var vw=Object.defineProperty;var _w=(nt,rt,it)=>rt in nt?vw(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it;var lc=(nt,rt,it)=>(_w(nt,typeof rt!="symbol"?rt+"":rt,it),it);(function(){const rt=document.createElement("link").relList;if(rt&&rt.supports&&rt.supports("modulepreload"))return;for(const bt of document.querySelectorAll('link[rel="modulepreload"]'))st(bt);new MutationObserver(bt=>{for(const xt of bt)if(xt.type==="childList")for(const Et of xt.addedNodes)Et.tagName==="LINK"&&Et.rel==="modulepreload"&&st(Et)}).observe(document,{childList:!0,subtree:!0});function it(bt){const xt={};return bt.integrity&&(xt.integrity=bt.integrity),bt.referrerpolicy&&(xt.referrerPolicy=bt.referrerpolicy),bt.crossorigin==="use-credentials"?xt.credentials="include":bt.crossorigin==="anonymous"?xt.credentials="omit":xt.credentials="same-origin",xt}function st(bt){if(bt.ep)return;bt.ep=!0;const xt=it(bt);fetch(bt.href,xt)}})();const style="";function makeMap(nt,rt){const it=Object.create(null),st=nt.split(",");for(let bt=0;bt<st.length;bt++)it[st[bt]]=!0;return rt?bt=>!!it[bt.toLowerCase()]:bt=>!!it[bt]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=nt=>onRE.test(nt),isModelListener=nt=>nt.startsWith("onUpdate:"),extend$3=Object.assign,remove$1=(nt,rt)=>{const it=nt.indexOf(rt);it>-1&&nt.splice(it,1)},hasOwnProperty$i=Object.prototype.hasOwnProperty,hasOwn=(nt,rt)=>hasOwnProperty$i.call(nt,rt),isArray$2=Array.isArray,isMap$2=nt=>toTypeString(nt)==="[object Map]",isSet$2=nt=>toTypeString(nt)==="[object Set]",isFunction$1=nt=>typeof nt=="function",isString=nt=>typeof nt=="string",isSymbol$1=nt=>typeof nt=="symbol",isObject$3=nt=>nt!==null&&typeof nt=="object",isPromise=nt=>isObject$3(nt)&&isFunction$1(nt.then)&&isFunction$1(nt.catch),objectToString$1=Object.prototype.toString,toTypeString=nt=>objectToString$1.call(nt),toRawType=nt=>toTypeString(nt).slice(8,-1),isPlainObject$1=nt=>toTypeString(nt)==="[object Object]",isIntegerKey=nt=>isString(nt)&&nt!=="NaN"&&nt[0]!=="-"&&""+parseInt(nt,10)===nt,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=nt=>{const rt=Object.create(null);return it=>rt[it]||(rt[it]=nt(it))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(nt=>nt.replace(camelizeRE,(rt,it)=>it?it.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(nt=>nt.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(nt=>nt.charAt(0).toUpperCase()+nt.slice(1)),toHandlerKey=cacheStringFunction(nt=>nt?`on${capitalize(nt)}`:""),hasChanged=(nt,rt)=>!Object.is(nt,rt),invokeArrayFns=(nt,rt)=>{for(let it=0;it<nt.length;it++)nt[it](rt)},def=(nt,rt,it)=>{Object.defineProperty(nt,rt,{configurable:!0,enumerable:!1,value:it})},looseToNumber=nt=>{const rt=parseFloat(nt);return isNaN(rt)?nt:rt},toNumber$1=nt=>{const rt=isString(nt)?Number(nt):NaN;return isNaN(rt)?nt:rt};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++){const st=nt[it],bt=isString(st)?parseStringStyle(st):normalizeStyle(st);if(bt)for(const xt in bt)rt[xt]=bt[xt]}return rt}else{if(isString(nt))return nt;if(isObject$3(nt))return nt}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(nt){const rt={};return nt.replace(styleCommentRE,"").split(listDelimiterRE).forEach(it=>{if(it){const st=it.split(propertyDelimiterRE);st.length>1&&(rt[st[0].trim()]=st[1].trim())}}),rt}function normalizeClass(nt){let rt="";if(isString(nt))rt=nt;else if(isArray$2(nt))for(let it=0;it<nt.length;it++){const st=normalizeClass(nt[it]);st&&(rt+=st+" ")}else if(isObject$3(nt))for(const it in nt)nt[it]&&(rt+=it+" ");return rt.trim()}function normalizeProps(nt){if(!nt)return null;let{class:rt,style:it}=nt;return rt&&!isString(rt)&&(nt.class=normalizeClass(rt)),it&&(nt.style=normalizeStyle(it)),nt}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(nt){return!!nt||nt===""}const toDisplayString=nt=>isString(nt)?nt:nt==null?"":isArray$2(nt)||isObject$3(nt)&&(nt.toString===objectToString$1||!isFunction$1(nt.toString))?JSON.stringify(nt,replacer,2):String(nt),replacer=(nt,rt)=>rt&&rt.__v_isRef?replacer(nt,rt.value):isMap$2(rt)?{[`Map(${rt.size})`]:[...rt.entries()].reduce((it,[st,bt])=>(it[`${st} =>`]=bt,it),{})}:isSet$2(rt)?{[`Set(${rt.size})`]:[...rt.values()]}:isObject$3(rt)&&!isArray$2(rt)&&!isPlainObject$1(rt)?String(rt):rt;let activeEffectScope;class EffectScope{constructor(rt=!1){this.detached=rt,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!rt&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(rt){if(this._active){const it=activeEffectScope;try{return activeEffectScope=this,rt()}finally{activeEffectScope=it}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(rt){if(this._active){let it,st;for(it=0,st=this.effects.length;it<st;it++)this.effects[it].stop();for(it=0,st=this.cleanups.length;it<st;it++)this.cleanups[it]();if(this.scopes)for(it=0,st=this.scopes.length;it<st;it++)this.scopes[it].stop(!0);if(!this.detached&&this.parent&&!rt){const bt=this.parent.scopes.pop();bt&&bt!==this&&(this.parent.scopes[this.index]=bt,bt.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(nt,rt=activeEffectScope){rt&&rt.active&&rt.effects.push(nt)}function getCurrentScope(){return activeEffectScope}const createDep=nt=>{const rt=new Set(nt);return rt.w=0,rt.n=0,rt},wasTracked=nt=>(nt.w&trackOpBit)>0,newTracked=nt=>(nt.n&trackOpBit)>0,initDepMarkers=({deps:nt})=>{if(nt.length)for(let rt=0;rt<nt.length;rt++)nt[rt].w|=trackOpBit},finalizeDepMarkers=nt=>{const{deps:rt}=nt;if(rt.length){let it=0;for(let st=0;st<rt.length;st++){const bt=rt[st];wasTracked(bt)&&!newTracked(bt)?bt.delete(nt):rt[it++]=bt,bt.w&=~trackOpBit,bt.n&=~trackOpBit}rt.length=it}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(rt,it=null,st){this.fn=rt,this.scheduler=it,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,st)}run(){if(!this.active)return this.fn();let rt=activeEffect,it=shouldTrack;for(;rt;){if(rt===this)return;rt=rt.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=it,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(nt){const{deps:rt}=nt;if(rt.length){for(let it=0;it<rt.length;it++)rt[it].delete(nt);rt.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const nt=trackStack.pop();shouldTrack=nt===void 0?!0:nt}function track(nt,rt,it){if(shouldTrack&&activeEffect){let st=targetMap.get(nt);st||targetMap.set(nt,st=new Map);let bt=st.get(it);bt||st.set(it,bt=createDep()),trackEffects(bt)}}function trackEffects(nt,rt){let it=!1;effectTrackDepth<=maxMarkerBits?newTracked(nt)||(nt.n|=trackOpBit,it=!wasTracked(nt)):it=!nt.has(activeEffect),it&&(nt.add(activeEffect),activeEffect.deps.push(nt))}function trigger(nt,rt,it,st,bt,xt){const Et=targetMap.get(nt);if(!Et)return;let kt=[];if(rt==="clear")kt=[...Et.values()];else if(it==="length"&&isArray$2(nt)){const Lt=Number(st);Et.forEach((Pt,Rt)=>{(Rt==="length"||Rt>=Lt)&&kt.push(Pt)})}else switch(it!==void 0&&kt.push(Et.get(it)),rt){case"add":isArray$2(nt)?isIntegerKey(it)&&kt.push(Et.get("length")):(kt.push(Et.get(ITERATE_KEY)),isMap$2(nt)&&kt.push(Et.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(nt)||(kt.push(Et.get(ITERATE_KEY)),isMap$2(nt)&&kt.push(Et.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(nt)&&kt.push(Et.get(ITERATE_KEY));break}if(kt.length===1)kt[0]&&triggerEffects(kt[0]);else{const Lt=[];for(const Pt of kt)Pt&&Lt.push(...Pt);triggerEffects(createDep(Lt))}}function triggerEffects(nt,rt){const it=isArray$2(nt)?nt:[...nt];for(const st of it)st.computed&&triggerEffect(st);for(const st of it)st.computed||triggerEffect(st)}function triggerEffect(nt,rt){(nt!==activeEffect||nt.allowRecurse)&&(nt.scheduler?nt.scheduler():nt.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(nt=>nt!=="arguments"&&nt!=="caller").map(nt=>Symbol[nt]).filter(isSymbol$1)),get$1$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const nt={};return["includes","indexOf","lastIndexOf"].forEach(rt=>{nt[rt]=function(...it){const st=toRaw(this);for(let xt=0,Et=this.length;xt<Et;xt++)track(st,"get",xt+"");const bt=st[rt](...it);return bt===-1||bt===!1?st[rt](...it.map(toRaw)):bt}}),["push","pop","shift","unshift","splice"].forEach(rt=>{nt[rt]=function(...it){pauseTracking();const st=toRaw(this)[rt].apply(this,it);return resetTracking(),st}}),nt}function hasOwnProperty$h(nt){const rt=toRaw(this);return track(rt,"has",nt),rt.hasOwnProperty(nt)}function createGetter(nt=!1,rt=!1){return function(st,bt,xt){if(bt==="__v_isReactive")return!nt;if(bt==="__v_isReadonly")return nt;if(bt==="__v_isShallow")return rt;if(bt==="__v_raw"&&xt===(nt?rt?shallowReadonlyMap:readonlyMap:rt?shallowReactiveMap:reactiveMap).get(st))return st;const Et=isArray$2(st);if(!nt){if(Et&&hasOwn(arrayInstrumentations,bt))return Reflect.get(arrayInstrumentations,bt,xt);if(bt==="hasOwnProperty")return hasOwnProperty$h}const kt=Reflect.get(st,bt,xt);return(isSymbol$1(bt)?builtInSymbols.has(bt):isNonTrackableKeys(bt))||(nt||track(st,"get",bt),rt)?kt:isRef(kt)?Et&&isIntegerKey(bt)?kt:kt.value:isObject$3(kt)?nt?readonly(kt):reactive(kt):kt}}const set$1$1=createSetter(),shallowSet=createSetter(!0);function createSetter(nt=!1){return function(it,st,bt,xt){let Et=it[st];if(isReadonly(Et)&&isRef(Et)&&!isRef(bt))return!1;if(!nt&&(!isShallow(bt)&&!isReadonly(bt)&&(Et=toRaw(Et),bt=toRaw(bt)),!isArray$2(it)&&isRef(Et)&&!isRef(bt)))return Et.value=bt,!0;const kt=isArray$2(it)&&isIntegerKey(st)?Number(st)<it.length:hasOwn(it,st),Lt=Reflect.set(it,st,bt,xt);return it===toRaw(xt)&&(kt?hasChanged(bt,Et)&&trigger(it,"set",st,bt):trigger(it,"add",st,bt)),Lt}}function deleteProperty(nt,rt){const it=hasOwn(nt,rt);nt[rt];const st=Reflect.deleteProperty(nt,rt);return st&&it&&trigger(nt,"delete",rt,void 0),st}function has$1(nt,rt){const it=Reflect.has(nt,rt);return(!isSymbol$1(rt)||!builtInSymbols.has(rt))&&track(nt,"has",rt),it}function ownKeys$1(nt){return track(nt,"iterate",isArray$2(nt)?"length":ITERATE_KEY),Reflect.ownKeys(nt)}const mutableHandlers={get:get$1$1,set:set$1$1,deleteProperty,has:has$1,ownKeys:ownKeys$1},readonlyHandlers={get:readonlyGet,set(nt,rt){return!0},deleteProperty(nt,rt){return!0}},shallowReactiveHandlers=extend$3({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=nt=>nt,getProto=nt=>Reflect.getPrototypeOf(nt);function get$4(nt,rt,it=!1,st=!1){nt=nt.__v_raw;const bt=toRaw(nt),xt=toRaw(rt);it||(rt!==xt&&track(bt,"get",rt),track(bt,"get",xt));const{has:Et}=getProto(bt),kt=st?toShallow:it?toReadonly:toReactive;if(Et.call(bt,rt))return kt(nt.get(rt));if(Et.call(bt,xt))return kt(nt.get(xt));nt!==bt&&nt.get(rt)}function has$2(nt,rt=!1){const it=this.__v_raw,st=toRaw(it),bt=toRaw(nt);return rt||(nt!==bt&&track(st,"has",nt),track(st,"has",bt)),nt===bt?it.has(nt):it.has(nt)||it.has(bt)}function size$1(nt,rt=!1){return nt=nt.__v_raw,!rt&&track(toRaw(nt),"iterate",ITERATE_KEY),Reflect.get(nt,"size",nt)}function add(nt){nt=toRaw(nt);const rt=toRaw(this);return getProto(rt).has.call(rt,nt)||(rt.add(nt),trigger(rt,"add",nt,nt)),this}function set$4(nt,rt){rt=toRaw(rt);const it=toRaw(this),{has:st,get:bt}=getProto(it);let xt=st.call(it,nt);xt||(nt=toRaw(nt),xt=st.call(it,nt));const Et=bt.call(it,nt);return it.set(nt,rt),xt?hasChanged(rt,Et)&&trigger(it,"set",nt,rt):trigger(it,"add",nt,rt),this}function deleteEntry(nt){const rt=toRaw(this),{has:it,get:st}=getProto(rt);let bt=it.call(rt,nt);bt||(nt=toRaw(nt),bt=it.call(rt,nt)),st&&st.call(rt,nt);const xt=rt.delete(nt);return bt&&trigger(rt,"delete",nt,void 0),xt}function clear$h(){const nt=toRaw(this),rt=nt.size!==0,it=nt.clear();return rt&&trigger(nt,"clear",void 0,void 0),it}function createForEach(nt,rt){return function(st,bt){const xt=this,Et=xt.__v_raw,kt=toRaw(Et),Lt=rt?toShallow:nt?toReadonly:toReactive;return!nt&&track(kt,"iterate",ITERATE_KEY),Et.forEach((Pt,Rt)=>st.call(bt,Lt(Pt),Lt(Rt),xt))}}function createIterableMethod(nt,rt,it){return function(...st){const bt=this.__v_raw,xt=toRaw(bt),Et=isMap$2(xt),kt=nt==="entries"||nt===Symbol.iterator&&Et,Lt=nt==="keys"&&Et,Pt=bt[nt](...st),Rt=it?toShallow:rt?toReadonly:toReactive;return!rt&&track(xt,"iterate",Lt?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Dt,done:Bt}=Pt.next();return Bt?{value:Dt,done:Bt}:{value:kt?[Rt(Dt[0]),Rt(Dt[1])]:Rt(Dt),done:Bt}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(nt){return function(...rt){return nt==="delete"?!1:this}}function createInstrumentations(){const nt={get(xt){return get$4(this,xt)},get size(){return size$1(this)},has:has$2,add,set:set$4,delete:deleteEntry,clear:clear$h,forEach:createForEach(!1,!1)},rt={get(xt){return get$4(this,xt,!1,!0)},get size(){return size$1(this)},has:has$2,add,set:set$4,delete:deleteEntry,clear:clear$h,forEach:createForEach(!1,!0)},it={get(xt){return get$4(this,xt,!0)},get size(){return size$1(this,!0)},has(xt){return has$2.call(this,xt,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},st={get(xt){return get$4(this,xt,!0,!0)},get size(){return size$1(this,!0)},has(xt){return has$2.call(this,xt,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(xt=>{nt[xt]=createIterableMethod(xt,!1,!1),it[xt]=createIterableMethod(xt,!0,!1),rt[xt]=createIterableMethod(xt,!1,!0),st[xt]=createIterableMethod(xt,!0,!0)}),[nt,it,rt,st]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(nt,rt){const it=rt?nt?shallowReadonlyInstrumentations:shallowInstrumentations:nt?readonlyInstrumentations:mutableInstrumentations;return(st,bt,xt)=>bt==="__v_isReactive"?!nt:bt==="__v_isReadonly"?nt:bt==="__v_raw"?st:Reflect.get(hasOwn(it,bt)&&bt in st?it:st,bt,xt)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(nt){switch(nt){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(nt){return nt.__v_skip||!Object.isExtensible(nt)?0:targetTypeMap(toRawType(nt))}function reactive(nt){return isReadonly(nt)?nt:createReactiveObject(nt,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(nt){return createReactiveObject(nt,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(nt){return createReactiveObject(nt,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(nt,rt,it,st,bt){if(!isObject$3(nt)||nt.__v_raw&&!(rt&&nt.__v_isReactive))return nt;const xt=bt.get(nt);if(xt)return xt;const Et=getTargetType(nt);if(Et===0)return nt;const kt=new Proxy(nt,Et===2?st:it);return bt.set(nt,kt),kt}function isReactive(nt){return isReadonly(nt)?isReactive(nt.__v_raw):!!(nt&&nt.__v_isReactive)}function isReadonly(nt){return!!(nt&&nt.__v_isReadonly)}function isShallow(nt){return!!(nt&&nt.__v_isShallow)}function isProxy(nt){return isReactive(nt)||isReadonly(nt)}function toRaw(nt){const rt=nt&&nt.__v_raw;return rt?toRaw(rt):nt}function markRaw(nt){return def(nt,"__v_skip",!0),nt}const toReactive=nt=>isObject$3(nt)?reactive(nt):nt,toReadonly=nt=>isObject$3(nt)?readonly(nt):nt;function trackRefValue(nt){shouldTrack&&activeEffect&&(nt=toRaw(nt),trackEffects(nt.dep||(nt.dep=createDep())))}function triggerRefValue(nt,rt){nt=toRaw(nt);const it=nt.dep;it&&triggerEffects(it)}function isRef(nt){return!!(nt&&nt.__v_isRef===!0)}function ref(nt){return createRef(nt,!1)}function createRef(nt,rt){return isRef(nt)?nt:new RefImpl(nt,rt)}class RefImpl{constructor(rt,it){this.__v_isShallow=it,this.dep=void 0,this.__v_isRef=!0,this._rawValue=it?rt:toRaw(rt),this._value=it?rt:toReactive(rt)}get value(){return trackRefValue(this),this._value}set value(rt){const it=this.__v_isShallow||isShallow(rt)||isReadonly(rt);rt=it?rt:toRaw(rt),hasChanged(rt,this._rawValue)&&(this._rawValue=rt,this._value=it?rt:toReactive(rt),triggerRefValue(this))}}function unref(nt){return isRef(nt)?nt.value:nt}const shallowUnwrapHandlers={get:(nt,rt,it)=>unref(Reflect.get(nt,rt,it)),set:(nt,rt,it,st)=>{const bt=nt[rt];return isRef(bt)&&!isRef(it)?(bt.value=it,!0):Reflect.set(nt,rt,it,st)}};function proxyRefs(nt){return isReactive(nt)?nt:new Proxy(nt,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(rt,it,st,bt){this._setter=it,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(rt,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!bt,this.__v_isReadonly=st}get value(){const rt=toRaw(this);return trackRefValue(rt),(rt._dirty||!rt._cacheable)&&(rt._dirty=!1,rt._value=rt.effect.run()),rt._value}set value(rt){this._setter(rt)}}function computed$1(nt,rt,it=!1){let st,bt;const xt=isFunction$1(nt);return xt?(st=nt,bt=NOOP):(st=nt.get,bt=nt.set),new ComputedRefImpl(st,bt,xt||!bt,it)}function warn(nt,...rt){}function callWithErrorHandling(nt,rt,it,st){let bt;try{bt=st?nt(...st):nt()}catch(xt){handleError$1(xt,rt,it)}return bt}function callWithAsyncErrorHandling(nt,rt,it,st){if(isFunction$1(nt)){const xt=callWithErrorHandling(nt,rt,it,st);return xt&&isPromise(xt)&&xt.catch(Et=>{handleError$1(Et,rt,it)}),xt}const bt=[];for(let xt=0;xt<nt.length;xt++)bt.push(callWithAsyncErrorHandling(nt[xt],rt,it,st));return bt}function handleError$1(nt,rt,it,st=!0){const bt=rt?rt.vnode:null;if(rt){let xt=rt.parent;const Et=rt.proxy,kt=it;for(;xt;){const Pt=xt.ec;if(Pt){for(let Rt=0;Rt<Pt.length;Rt++)if(Pt[Rt](nt,Et,kt)===!1)return}xt=xt.parent}const Lt=rt.appContext.config.errorHandler;if(Lt){callWithErrorHandling(Lt,null,10,[nt,Et,kt]);return}}logError(nt,it,bt,st)}function logError(nt,rt,it,st=!0){console.error(nt)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(nt){const rt=currentFlushPromise||resolvedPromise;return nt?rt.then(this?nt.bind(this):nt):rt}function findInsertionIndex(nt){let rt=flushIndex+1,it=queue.length;for(;rt<it;){const st=rt+it>>>1;getId$1(queue[st])<nt?rt=st+1:it=st}return rt}function queueJob(nt){(!queue.length||!queue.includes(nt,isFlushing&&nt.allowRecurse?flushIndex+1:flushIndex))&&(nt.id==null?queue.push(nt):queue.splice(findInsertionIndex(nt.id),0,nt),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(nt){const rt=queue.indexOf(nt);rt>flushIndex&&queue.splice(rt,1)}function queuePostFlushCb(nt){isArray$2(nt)?pendingPostFlushCbs.push(...nt):(!activePostFlushCbs||!activePostFlushCbs.includes(nt,nt.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(nt),queueFlush()}function flushPreFlushCbs(nt,rt=isFlushing?flushIndex+1:0){for(;rt<queue.length;rt++){const it=queue[rt];it&&it.pre&&(queue.splice(rt,1),rt--,it())}}function flushPostFlushCbs(nt){if(pendingPostFlushCbs.length){const rt=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...rt);return}for(activePostFlushCbs=rt,activePostFlushCbs.sort((it,st)=>getId$1(it)-getId$1(st)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId$1=nt=>nt.id==null?1/0:nt.id,comparator=(nt,rt)=>{const it=getId$1(nt)-getId$1(rt);if(it===0){if(nt.pre&&!rt.pre)return-1;if(rt.pre&&!nt.pre)return 1}return it};function flushJobs(nt){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const rt=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const it=queue[flushIndex];it&&it.active!==!1&&callWithErrorHandling(it,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(nt,rt,...it){if(nt.isUnmounted)return;const st=nt.vnode.props||EMPTY_OBJ;let bt=it;const xt=rt.startsWith("update:"),Et=xt&&rt.slice(7);if(Et&&Et in st){const Rt=`${Et==="modelValue"?"model":Et}Modifiers`,{number:Dt,trim:Bt}=st[Rt]||EMPTY_OBJ;Bt&&(bt=it.map(Ft=>isString(Ft)?Ft.trim():Ft)),Dt&&(bt=it.map(looseToNumber))}let kt,Lt=st[kt=toHandlerKey(rt)]||st[kt=toHandlerKey(camelize(rt))];!Lt&&xt&&(Lt=st[kt=toHandlerKey(hyphenate(rt))]),Lt&&callWithAsyncErrorHandling(Lt,nt,6,bt);const Pt=st[kt+"Once"];if(Pt){if(!nt.emitted)nt.emitted={};else if(nt.emitted[kt])return;nt.emitted[kt]=!0,callWithAsyncErrorHandling(Pt,nt,6,bt)}}function normalizeEmitsOptions(nt,rt,it=!1){const st=rt.emitsCache,bt=st.get(nt);if(bt!==void 0)return bt;const xt=nt.emits;let Et={},kt=!1;if(!isFunction$1(nt)){const Lt=Pt=>{const Rt=normalizeEmitsOptions(Pt,rt,!0);Rt&&(kt=!0,extend$3(Et,Rt))};!it&&rt.mixins.length&&rt.mixins.forEach(Lt),nt.extends&&Lt(nt.extends),nt.mixins&&nt.mixins.forEach(Lt)}return!xt&&!kt?(isObject$3(nt)&&st.set(nt,null),null):(isArray$2(xt)?xt.forEach(Lt=>Et[Lt]=null):extend$3(Et,xt),isObject$3(nt)&&st.set(nt,Et),Et)}function isEmitListener(nt,rt){return!nt||!isOn(rt)?!1:(rt=rt.slice(2).replace(/Once$/,""),hasOwn(nt,rt[0].toLowerCase()+rt.slice(1))||hasOwn(nt,hyphenate(rt))||hasOwn(nt,rt))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(nt){const rt=currentRenderingInstance;return currentRenderingInstance=nt,currentScopeId=nt&&nt.type.__scopeId||null,rt}function pushScopeId(nt){currentScopeId=nt}function popScopeId(){currentScopeId=null}function withCtx(nt,rt=currentRenderingInstance,it){if(!rt||nt._n)return nt;const st=(...bt)=>{st._d&&setBlockTracking(-1);const xt=setCurrentRenderingInstance(rt);let Et;try{Et=nt(...bt)}finally{setCurrentRenderingInstance(xt),st._d&&setBlockTracking(1)}return Et};return st._n=!0,st._c=!0,st._d=!0,st}function markAttrsAccessed(){}function renderComponentRoot(nt){const{type:rt,vnode:it,proxy:st,withProxy:bt,props:xt,propsOptions:[Et],slots:kt,attrs:Lt,emit:Pt,render:Rt,renderCache:Dt,data:Bt,setupState:Ft,ctx:Yt,inheritAttrs:Zt}=nt;let Wt,Qt;const Kt=setCurrentRenderingInstance(nt);try{if(it.shapeFlag&4){const nn=bt||st;Wt=normalizeVNode(Rt.call(nn,nn,Dt,xt,Ft,Bt,Yt)),Qt=Lt}else{const nn=rt;Wt=normalizeVNode(nn.length>1?nn(xt,{attrs:Lt,slots:kt,emit:Pt}):nn(xt,null)),Qt=rt.props?Lt:getFunctionalFallthrough(Lt)}}catch(nn){blockStack.length=0,handleError$1(nn,nt,1),Wt=createVNode(Comment)}let on=Wt;if(Qt&&Zt!==!1){const nn=Object.keys(Qt),{shapeFlag:mn}=on;nn.length&&mn&7&&(Et&&nn.some(isModelListener)&&(Qt=filterModelListeners(Qt,Et)),on=cloneVNode(on,Qt))}return it.dirs&&(on=cloneVNode(on),on.dirs=on.dirs?on.dirs.concat(it.dirs):it.dirs),it.transition&&(on.transition=it.transition),Wt=on,setCurrentRenderingInstance(Kt),Wt}const getFunctionalFallthrough=nt=>{let rt;for(const it in nt)(it==="class"||it==="style"||isOn(it))&&((rt||(rt={}))[it]=nt[it]);return rt},filterModelListeners=(nt,rt)=>{const it={};for(const st in nt)(!isModelListener(st)||!(st.slice(9)in rt))&&(it[st]=nt[st]);return it};function shouldUpdateComponent(nt,rt,it){const{props:st,children:bt,component:xt}=nt,{props:Et,children:kt,patchFlag:Lt}=rt,Pt=xt.emitsOptions;if(rt.dirs||rt.transition)return!0;if(it&&Lt>=0){if(Lt&1024)return!0;if(Lt&16)return st?hasPropsChanged(st,Et,Pt):!!Et;if(Lt&8){const Rt=rt.dynamicProps;for(let Dt=0;Dt<Rt.length;Dt++){const Bt=Rt[Dt];if(Et[Bt]!==st[Bt]&&!isEmitListener(Pt,Bt))return!0}}}else return(bt||kt)&&(!kt||!kt.$stable)?!0:st===Et?!1:st?Et?hasPropsChanged(st,Et,Pt):!0:!!Et;return!1}function hasPropsChanged(nt,rt,it){const st=Object.keys(rt);if(st.length!==Object.keys(nt).length)return!0;for(let bt=0;bt<st.length;bt++){const xt=st[bt];if(rt[xt]!==nt[xt]&&!isEmitListener(it,xt))return!0}return!1}function updateHOCHostEl({vnode:nt,parent:rt},it){for(;rt&&rt.subTree===nt;)(nt=rt.vnode).el=it,rt=rt.parent}const isSuspense=nt=>nt.__isSuspense;function queueEffectWithSuspense(nt,rt){rt&&rt.pendingBranch?isArray$2(nt)?rt.effects.push(...nt):rt.effects.push(nt):queuePostFlushCb(nt)}const INITIAL_WATCHER_VALUE={};function watch$1(nt,rt,it){return doWatch(nt,rt,it)}function doWatch(nt,rt,{immediate:it,deep:st,flush:bt,onTrack:xt,onTrigger:Et}=EMPTY_OBJ){var kt;const Lt=getCurrentScope()===((kt=currentInstance)==null?void 0:kt.scope)?currentInstance:null;let Pt,Rt=!1,Dt=!1;if(isRef(nt)?(Pt=()=>nt.value,Rt=isShallow(nt)):isReactive(nt)?(Pt=()=>nt,st=!0):isArray$2(nt)?(Dt=!0,Rt=nt.some(nn=>isReactive(nn)||isShallow(nn)),Pt=()=>nt.map(nn=>{if(isRef(nn))return nn.value;if(isReactive(nn))return traverse(nn);if(isFunction$1(nn))return callWithErrorHandling(nn,Lt,2)})):isFunction$1(nt)?rt?Pt=()=>callWithErrorHandling(nt,Lt,2):Pt=()=>{if(!(Lt&&Lt.isUnmounted))return Bt&&Bt(),callWithAsyncErrorHandling(nt,Lt,3,[Ft])}:Pt=NOOP,rt&&st){const nn=Pt;Pt=()=>traverse(nn())}let Bt,Ft=nn=>{Bt=Kt.onStop=()=>{callWithErrorHandling(nn,Lt,4)}},Yt;if(isInSSRComponentSetup)if(Ft=NOOP,rt?it&&callWithAsyncErrorHandling(rt,Lt,3,[Pt(),Dt?[]:void 0,Ft]):Pt(),bt==="sync"){const nn=useSSRContext();Yt=nn.__watcherHandles||(nn.__watcherHandles=[])}else return NOOP;let Zt=Dt?new Array(nt.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Wt=()=>{if(!!Kt.active)if(rt){const nn=Kt.run();(st||Rt||(Dt?nn.some((mn,gn)=>hasChanged(mn,Zt[gn])):hasChanged(nn,Zt)))&&(Bt&&Bt(),callWithAsyncErrorHandling(rt,Lt,3,[nn,Zt===INITIAL_WATCHER_VALUE?void 0:Dt&&Zt[0]===INITIAL_WATCHER_VALUE?[]:Zt,Ft]),Zt=nn)}else Kt.run()};Wt.allowRecurse=!!rt;let Qt;bt==="sync"?Qt=Wt:bt==="post"?Qt=()=>queuePostRenderEffect(Wt,Lt&&Lt.suspense):(Wt.pre=!0,Lt&&(Wt.id=Lt.uid),Qt=()=>queueJob(Wt));const Kt=new ReactiveEffect(Pt,Qt);rt?it?Wt():Zt=Kt.run():bt==="post"?queuePostRenderEffect(Kt.run.bind(Kt),Lt&&Lt.suspense):Kt.run();const on=()=>{Kt.stop(),Lt&&Lt.scope&&remove$1(Lt.scope.effects,Kt)};return Yt&&Yt.push(on),on}function instanceWatch(nt,rt,it){const st=this.proxy,bt=isString(nt)?nt.includes(".")?createPathGetter(st,nt):()=>st[nt]:nt.bind(st,st);let xt;isFunction$1(rt)?xt=rt:(xt=rt.handler,it=rt);const Et=currentInstance;setCurrentInstance(this);const kt=doWatch(bt,xt.bind(st),it);return Et?setCurrentInstance(Et):unsetCurrentInstance(),kt}function createPathGetter(nt,rt){const it=rt.split(".");return()=>{let st=nt;for(let bt=0;bt<it.length&&st;bt++)st=st[it[bt]];return st}}function traverse(nt,rt){if(!isObject$3(nt)||nt.__v_skip||(rt=rt||new Set,rt.has(nt)))return nt;if(rt.add(nt),isRef(nt))traverse(nt.value,rt);else if(isArray$2(nt))for(let it=0;it<nt.length;it++)traverse(nt[it],rt);else if(isSet$2(nt)||isMap$2(nt))nt.forEach(it=>{traverse(it,rt)});else if(isPlainObject$1(nt))for(const it in nt)traverse(nt[it],rt);return nt}function invokeDirectiveHook(nt,rt,it,st){const bt=nt.dirs,xt=rt&&rt.dirs;for(let Et=0;Et<bt.length;Et++){const kt=bt[Et];xt&&(kt.oldValue=xt[Et].value);let Lt=kt.dir[st];Lt&&(pauseTracking(),callWithAsyncErrorHandling(Lt,it,8,[nt.el,kt,nt,rt]),resetTracking())}}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator};function defineComponent(nt,rt){return isFunction$1(nt)?(()=>extend$3({name:nt.name},rt,{setup:nt}))():nt}const isAsyncWrapper=nt=>!!nt.type.__asyncLoader,isKeepAlive=nt=>nt.type.__isKeepAlive;function onActivated(nt,rt){registerKeepAliveHook(nt,"a",rt)}function onDeactivated(nt,rt){registerKeepAliveHook(nt,"da",rt)}function registerKeepAliveHook(nt,rt,it=currentInstance){const st=nt.__wdc||(nt.__wdc=()=>{let bt=it;for(;bt;){if(bt.isDeactivated)return;bt=bt.parent}return nt()});if(injectHook(rt,st,it),it){let bt=it.parent;for(;bt&&bt.parent;)isKeepAlive(bt.parent.vnode)&&injectToKeepAliveRoot(st,rt,it,bt),bt=bt.parent}}function injectToKeepAliveRoot(nt,rt,it,st){const bt=injectHook(rt,nt,st,!0);onUnmounted(()=>{remove$1(st[rt],bt)},it)}function injectHook(nt,rt,it=currentInstance,st=!1){if(it){const bt=it[nt]||(it[nt]=[]),xt=rt.__weh||(rt.__weh=(...Et)=>{if(it.isUnmounted)return;pauseTracking(),setCurrentInstance(it);const kt=callWithAsyncErrorHandling(rt,it,nt,Et);return unsetCurrentInstance(),resetTracking(),kt});return st?bt.unshift(xt):bt.push(xt),xt}}const createHook=nt=>(rt,it=currentInstance)=>(!isInSSRComponentSetup||nt==="sp")&&injectHook(nt,(...st)=>rt(...st),it),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(nt,rt=currentInstance){injectHook("ec",nt,rt)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(nt,rt,it,st){let bt;const xt=it&&it[st];if(isArray$2(nt)||isString(nt)){bt=new Array(nt.length);for(let Et=0,kt=nt.length;Et<kt;Et++)bt[Et]=rt(nt[Et],Et,void 0,xt&&xt[Et])}else if(typeof nt=="number"){bt=new Array(nt);for(let Et=0;Et<nt;Et++)bt[Et]=rt(Et+1,Et,void 0,xt&&xt[Et])}else if(isObject$3(nt))if(nt[Symbol.iterator])bt=Array.from(nt,(Et,kt)=>rt(Et,kt,void 0,xt&&xt[kt]));else{const Et=Object.keys(nt);bt=new Array(Et.length);for(let kt=0,Lt=Et.length;kt<Lt;kt++){const Pt=Et[kt];bt[kt]=rt(nt[Pt],Pt,kt,xt&&xt[kt])}}else bt=[];return it&&(it[st]=bt),bt}const getPublicInstance=nt=>nt?isStatefulComponent(nt)?getExposeProxy(nt)||nt.proxy:getPublicInstance(nt.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:nt=>nt,$el:nt=>nt.vnode.el,$data:nt=>nt.data,$props:nt=>nt.props,$attrs:nt=>nt.attrs,$slots:nt=>nt.slots,$refs:nt=>nt.refs,$parent:nt=>getPublicInstance(nt.parent),$root:nt=>getPublicInstance(nt.root),$emit:nt=>nt.emit,$options:nt=>resolveMergedOptions(nt),$forceUpdate:nt=>nt.f||(nt.f=()=>queueJob(nt.update)),$nextTick:nt=>nt.n||(nt.n=nextTick.bind(nt.proxy)),$watch:nt=>instanceWatch.bind(nt)}),hasSetupBinding=(nt,rt)=>nt!==EMPTY_OBJ&&!nt.__isScriptSetup&&hasOwn(nt,rt),PublicInstanceProxyHandlers={get({_:nt},rt){const{ctx:it,setupState:st,data:bt,props:xt,accessCache:Et,type:kt,appContext:Lt}=nt;let Pt;if(rt[0]!=="$"){const Ft=Et[rt];if(Ft!==void 0)switch(Ft){case 1:return st[rt];case 2:return bt[rt];case 4:return it[rt];case 3:return xt[rt]}else{if(hasSetupBinding(st,rt))return Et[rt]=1,st[rt];if(bt!==EMPTY_OBJ&&hasOwn(bt,rt))return Et[rt]=2,bt[rt];if((Pt=nt.propsOptions[0])&&hasOwn(Pt,rt))return Et[rt]=3,xt[rt];if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Et[rt]=4,it[rt];shouldCacheAccess&&(Et[rt]=0)}}const Rt=publicPropertiesMap[rt];let Dt,Bt;if(Rt)return rt==="$attrs"&&track(nt,"get",rt),Rt(nt);if((Dt=kt.__cssModules)&&(Dt=Dt[rt]))return Dt;if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Et[rt]=4,it[rt];if(Bt=Lt.config.globalProperties,hasOwn(Bt,rt))return Bt[rt]},set({_:nt},rt,it){const{data:st,setupState:bt,ctx:xt}=nt;return hasSetupBinding(bt,rt)?(bt[rt]=it,!0):st!==EMPTY_OBJ&&hasOwn(st,rt)?(st[rt]=it,!0):hasOwn(nt.props,rt)||rt[0]==="$"&&rt.slice(1)in nt?!1:(xt[rt]=it,!0)},has({_:{data:nt,setupState:rt,accessCache:it,ctx:st,appContext:bt,propsOptions:xt}},Et){let kt;return!!it[Et]||nt!==EMPTY_OBJ&&hasOwn(nt,Et)||hasSetupBinding(rt,Et)||(kt=xt[0])&&hasOwn(kt,Et)||hasOwn(st,Et)||hasOwn(publicPropertiesMap,Et)||hasOwn(bt.config.globalProperties,Et)},defineProperty(nt,rt,it){return it.get!=null?nt._.accessCache[rt]=0:hasOwn(it,"value")&&this.set(nt,rt,it.value,null),Reflect.defineProperty(nt,rt,it)}};function normalizePropsOrEmits(nt){return isArray$2(nt)?nt.reduce((rt,it)=>(rt[it]=null,rt),{}):nt}let shouldCacheAccess=!0;function applyOptions(nt){const rt=resolveMergedOptions(nt),it=nt.proxy,st=nt.ctx;shouldCacheAccess=!1,rt.beforeCreate&&callHook(rt.beforeCreate,nt,"bc");const{data:bt,computed:xt,methods:Et,watch:kt,provide:Lt,inject:Pt,created:Rt,beforeMount:Dt,mounted:Bt,beforeUpdate:Ft,updated:Yt,activated:Zt,deactivated:Wt,beforeDestroy:Qt,beforeUnmount:Kt,destroyed:on,unmounted:nn,render:mn,renderTracked:gn,renderTriggered:Tn,errorCaptured:An,serverPrefetch:kn,expose:Mn,inheritAttrs:$n,components:cn,directives:Sn,filters:an}=rt;if(Pt&&resolveInjections(Pt,st,null),Et)for(const zn in Et){const ir=Et[zn];isFunction$1(ir)&&(st[zn]=ir.bind(it))}if(bt){const zn=bt.call(it,it);isObject$3(zn)&&(nt.data=reactive(zn))}if(shouldCacheAccess=!0,xt)for(const zn in xt){const ir=xt[zn],tr=isFunction$1(ir)?ir.bind(it,it):isFunction$1(ir.get)?ir.get.bind(it,it):NOOP,nr=!isFunction$1(ir)&&isFunction$1(ir.set)?ir.set.bind(it):NOOP,dr=computed({get:tr,set:nr});Object.defineProperty(st,zn,{enumerable:!0,configurable:!0,get:()=>dr.value,set:or=>dr.value=or})}if(kt)for(const zn in kt)createWatcher(kt[zn],st,it,zn);if(Lt){const zn=isFunction$1(Lt)?Lt.call(it):Lt;Reflect.ownKeys(zn).forEach(ir=>{provide(ir,zn[ir])})}Rt&&callHook(Rt,nt,"c");function hn(zn,ir){isArray$2(ir)?ir.forEach(tr=>zn(tr.bind(it))):ir&&zn(ir.bind(it))}if(hn(onBeforeMount,Dt),hn(onMounted,Bt),hn(onBeforeUpdate,Ft),hn(onUpdated,Yt),hn(onActivated,Zt),hn(onDeactivated,Wt),hn(onErrorCaptured,An),hn(onRenderTracked,gn),hn(onRenderTriggered,Tn),hn(onBeforeUnmount,Kt),hn(onUnmounted,nn),hn(onServerPrefetch,kn),isArray$2(Mn))if(Mn.length){const zn=nt.exposed||(nt.exposed={});Mn.forEach(ir=>{Object.defineProperty(zn,ir,{get:()=>it[ir],set:tr=>it[ir]=tr})})}else nt.exposed||(nt.exposed={});mn&&nt.render===NOOP&&(nt.render=mn),$n!=null&&(nt.inheritAttrs=$n),cn&&(nt.components=cn),Sn&&(nt.directives=Sn)}function resolveInjections(nt,rt,it=NOOP){isArray$2(nt)&&(nt=normalizeInject(nt));for(const st in nt){const bt=nt[st];let xt;isObject$3(bt)?"default"in bt?xt=inject(bt.from||st,bt.default,!0):xt=inject(bt.from||st):xt=inject(bt),isRef(xt)?Object.defineProperty(rt,st,{enumerable:!0,configurable:!0,get:()=>xt.value,set:Et=>xt.value=Et}):rt[st]=xt}}function callHook(nt,rt,it){callWithAsyncErrorHandling(isArray$2(nt)?nt.map(st=>st.bind(rt.proxy)):nt.bind(rt.proxy),rt,it)}function createWatcher(nt,rt,it,st){const bt=st.includes(".")?createPathGetter(it,st):()=>it[st];if(isString(nt)){const xt=rt[nt];isFunction$1(xt)&&watch$1(bt,xt)}else if(isFunction$1(nt))watch$1(bt,nt.bind(it));else if(isObject$3(nt))if(isArray$2(nt))nt.forEach(xt=>createWatcher(xt,rt,it,st));else{const xt=isFunction$1(nt.handler)?nt.handler.bind(it):rt[nt.handler];isFunction$1(xt)&&watch$1(bt,xt,nt)}}function resolveMergedOptions(nt){const rt=nt.type,{mixins:it,extends:st}=rt,{mixins:bt,optionsCache:xt,config:{optionMergeStrategies:Et}}=nt.appContext,kt=xt.get(rt);let Lt;return kt?Lt=kt:!bt.length&&!it&&!st?Lt=rt:(Lt={},bt.length&&bt.forEach(Pt=>mergeOptions(Lt,Pt,Et,!0)),mergeOptions(Lt,rt,Et)),isObject$3(rt)&&xt.set(rt,Lt),Lt}function mergeOptions(nt,rt,it,st=!1){const{mixins:bt,extends:xt}=rt;xt&&mergeOptions(nt,xt,it,!0),bt&&bt.forEach(Et=>mergeOptions(nt,Et,it,!0));for(const Et in rt)if(!(st&&Et==="expose")){const kt=internalOptionMergeStrats[Et]||it&&it[Et];nt[Et]=kt?kt(nt[Et],rt[Et]):rt[Et]}return nt}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(nt,rt){return rt?nt?function(){return extend$3(isFunction$1(nt)?nt.call(this,this):nt,isFunction$1(rt)?rt.call(this,this):rt)}:rt:nt}function mergeInject(nt,rt){return mergeObjectOptions(normalizeInject(nt),normalizeInject(rt))}function normalizeInject(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++)rt[nt[it]]=nt[it];return rt}return nt}function mergeAsArray(nt,rt){return nt?[...new Set([].concat(nt,rt))]:rt}function mergeObjectOptions(nt,rt){return nt?extend$3(Object.create(null),nt,rt):rt}function mergeEmitsOrPropsOptions(nt,rt){return nt?isArray$2(nt)&&isArray$2(rt)?[...new Set([...nt,...rt])]:extend$3(Object.create(null),normalizePropsOrEmits(nt),normalizePropsOrEmits(rt!=null?rt:{})):rt}function mergeWatchOptions(nt,rt){if(!nt)return rt;if(!rt)return nt;const it=extend$3(Object.create(null),nt);for(const st in rt)it[st]=mergeAsArray(nt[st],rt[st]);return it}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(nt,rt){return function(st,bt=null){isFunction$1(st)||(st=extend$3({},st)),bt!=null&&!isObject$3(bt)&&(bt=null);const xt=createAppContext(),Et=new Set;let kt=!1;const Lt=xt.app={_uid:uid$1++,_component:st,_props:bt,_container:null,_context:xt,_instance:null,version:version$2,get config(){return xt.config},set config(Pt){},use(Pt,...Rt){return Et.has(Pt)||(Pt&&isFunction$1(Pt.install)?(Et.add(Pt),Pt.install(Lt,...Rt)):isFunction$1(Pt)&&(Et.add(Pt),Pt(Lt,...Rt))),Lt},mixin(Pt){return xt.mixins.includes(Pt)||xt.mixins.push(Pt),Lt},component(Pt,Rt){return Rt?(xt.components[Pt]=Rt,Lt):xt.components[Pt]},directive(Pt,Rt){return Rt?(xt.directives[Pt]=Rt,Lt):xt.directives[Pt]},mount(Pt,Rt,Dt){if(!kt){const Bt=createVNode(st,bt);return Bt.appContext=xt,Rt&&rt?rt(Bt,Pt):nt(Bt,Pt,Dt),kt=!0,Lt._container=Pt,Pt.__vue_app__=Lt,getExposeProxy(Bt.component)||Bt.component.proxy}},unmount(){kt&&(nt(null,Lt._container),delete Lt._container.__vue_app__)},provide(Pt,Rt){return xt.provides[Pt]=Rt,Lt},runWithContext(Pt){currentApp=Lt;try{return Pt()}finally{currentApp=null}}};return Lt}}let currentApp=null;function provide(nt,rt){if(currentInstance){let it=currentInstance.provides;const st=currentInstance.parent&&currentInstance.parent.provides;st===it&&(it=currentInstance.provides=Object.create(st)),it[nt]=rt}}function inject(nt,rt,it=!1){const st=currentInstance||currentRenderingInstance;if(st||currentApp){const bt=st?st.parent==null?st.vnode.appContext&&st.vnode.appContext.provides:st.parent.provides:currentApp._context.provides;if(bt&&nt in bt)return bt[nt];if(arguments.length>1)return it&&isFunction$1(rt)?rt.call(st&&st.proxy):rt}}function initProps(nt,rt,it,st=!1){const bt={},xt={};def(xt,InternalObjectKey,1),nt.propsDefaults=Object.create(null),setFullProps(nt,rt,bt,xt);for(const Et in nt.propsOptions[0])Et in bt||(bt[Et]=void 0);it?nt.props=st?bt:shallowReactive(bt):nt.type.props?nt.props=bt:nt.props=xt,nt.attrs=xt}function updateProps(nt,rt,it,st){const{props:bt,attrs:xt,vnode:{patchFlag:Et}}=nt,kt=toRaw(bt),[Lt]=nt.propsOptions;let Pt=!1;if((st||Et>0)&&!(Et&16)){if(Et&8){const Rt=nt.vnode.dynamicProps;for(let Dt=0;Dt<Rt.length;Dt++){let Bt=Rt[Dt];if(isEmitListener(nt.emitsOptions,Bt))continue;const Ft=rt[Bt];if(Lt)if(hasOwn(xt,Bt))Ft!==xt[Bt]&&(xt[Bt]=Ft,Pt=!0);else{const Yt=camelize(Bt);bt[Yt]=resolvePropValue(Lt,kt,Yt,Ft,nt,!1)}else Ft!==xt[Bt]&&(xt[Bt]=Ft,Pt=!0)}}}else{setFullProps(nt,rt,bt,xt)&&(Pt=!0);let Rt;for(const Dt in kt)(!rt||!hasOwn(rt,Dt)&&((Rt=hyphenate(Dt))===Dt||!hasOwn(rt,Rt)))&&(Lt?it&&(it[Dt]!==void 0||it[Rt]!==void 0)&&(bt[Dt]=resolvePropValue(Lt,kt,Dt,void 0,nt,!0)):delete bt[Dt]);if(xt!==kt)for(const Dt in xt)(!rt||!hasOwn(rt,Dt)&&!0)&&(delete xt[Dt],Pt=!0)}Pt&&trigger(nt,"set","$attrs")}function setFullProps(nt,rt,it,st){const[bt,xt]=nt.propsOptions;let Et=!1,kt;if(rt)for(let Lt in rt){if(isReservedProp(Lt))continue;const Pt=rt[Lt];let Rt;bt&&hasOwn(bt,Rt=camelize(Lt))?!xt||!xt.includes(Rt)?it[Rt]=Pt:(kt||(kt={}))[Rt]=Pt:isEmitListener(nt.emitsOptions,Lt)||(!(Lt in st)||Pt!==st[Lt])&&(st[Lt]=Pt,Et=!0)}if(xt){const Lt=toRaw(it),Pt=kt||EMPTY_OBJ;for(let Rt=0;Rt<xt.length;Rt++){const Dt=xt[Rt];it[Dt]=resolvePropValue(bt,Lt,Dt,Pt[Dt],nt,!hasOwn(Pt,Dt))}}return Et}function resolvePropValue(nt,rt,it,st,bt,xt){const Et=nt[it];if(Et!=null){const kt=hasOwn(Et,"default");if(kt&&st===void 0){const Lt=Et.default;if(Et.type!==Function&&!Et.skipFactory&&isFunction$1(Lt)){const{propsDefaults:Pt}=bt;it in Pt?st=Pt[it]:(setCurrentInstance(bt),st=Pt[it]=Lt.call(null,rt),unsetCurrentInstance())}else st=Lt}Et[0]&&(xt&&!kt?st=!1:Et[1]&&(st===""||st===hyphenate(it))&&(st=!0))}return st}function normalizePropsOptions(nt,rt,it=!1){const st=rt.propsCache,bt=st.get(nt);if(bt)return bt;const xt=nt.props,Et={},kt=[];let Lt=!1;if(!isFunction$1(nt)){const Rt=Dt=>{Lt=!0;const[Bt,Ft]=normalizePropsOptions(Dt,rt,!0);extend$3(Et,Bt),Ft&&kt.push(...Ft)};!it&&rt.mixins.length&&rt.mixins.forEach(Rt),nt.extends&&Rt(nt.extends),nt.mixins&&nt.mixins.forEach(Rt)}if(!xt&&!Lt)return isObject$3(nt)&&st.set(nt,EMPTY_ARR),EMPTY_ARR;if(isArray$2(xt))for(let Rt=0;Rt<xt.length;Rt++){const Dt=camelize(xt[Rt]);validatePropName(Dt)&&(Et[Dt]=EMPTY_OBJ)}else if(xt)for(const Rt in xt){const Dt=camelize(Rt);if(validatePropName(Dt)){const Bt=xt[Rt],Ft=Et[Dt]=isArray$2(Bt)||isFunction$1(Bt)?{type:Bt}:extend$3({},Bt);if(Ft){const Yt=getTypeIndex(Boolean,Ft.type),Zt=getTypeIndex(String,Ft.type);Ft[0]=Yt>-1,Ft[1]=Zt<0||Yt<Zt,(Yt>-1||hasOwn(Ft,"default"))&&kt.push(Dt)}}}const Pt=[Et,kt];return isObject$3(nt)&&st.set(nt,Pt),Pt}function validatePropName(nt){return nt[0]!=="$"}function getType(nt){const rt=nt&&nt.toString().match(/^\s*(function|class) (\w+)/);return rt?rt[2]:nt===null?"null":""}function isSameType(nt,rt){return getType(nt)===getType(rt)}function getTypeIndex(nt,rt){return isArray$2(rt)?rt.findIndex(it=>isSameType(it,nt)):isFunction$1(rt)&&isSameType(rt,nt)?0:-1}const isInternalKey=nt=>nt[0]==="_"||nt==="$stable",normalizeSlotValue=nt=>isArray$2(nt)?nt.map(normalizeVNode):[normalizeVNode(nt)],normalizeSlot=(nt,rt,it)=>{if(rt._n)return rt;const st=withCtx((...bt)=>normalizeSlotValue(rt(...bt)),it);return st._c=!1,st},normalizeObjectSlots=(nt,rt,it)=>{const st=nt._ctx;for(const bt in nt){if(isInternalKey(bt))continue;const xt=nt[bt];if(isFunction$1(xt))rt[bt]=normalizeSlot(bt,xt,st);else if(xt!=null){const Et=normalizeSlotValue(xt);rt[bt]=()=>Et}}},normalizeVNodeSlots=(nt,rt)=>{const it=normalizeSlotValue(rt);nt.slots.default=()=>it},initSlots=(nt,rt)=>{if(nt.vnode.shapeFlag&32){const it=rt._;it?(nt.slots=toRaw(rt),def(rt,"_",it)):normalizeObjectSlots(rt,nt.slots={})}else nt.slots={},rt&&normalizeVNodeSlots(nt,rt);def(nt.slots,InternalObjectKey,1)},updateSlots=(nt,rt,it)=>{const{vnode:st,slots:bt}=nt;let xt=!0,Et=EMPTY_OBJ;if(st.shapeFlag&32){const kt=rt._;kt?it&&kt===1?xt=!1:(extend$3(bt,rt),!it&&kt===1&&delete bt._):(xt=!rt.$stable,normalizeObjectSlots(rt,bt)),Et=rt}else rt&&(normalizeVNodeSlots(nt,rt),Et={default:1});if(xt)for(const kt in bt)!isInternalKey(kt)&&!(kt in Et)&&delete bt[kt]};function setRef(nt,rt,it,st,bt=!1){if(isArray$2(nt)){nt.forEach((Bt,Ft)=>setRef(Bt,rt&&(isArray$2(rt)?rt[Ft]:rt),it,st,bt));return}if(isAsyncWrapper(st)&&!bt)return;const xt=st.shapeFlag&4?getExposeProxy(st.component)||st.component.proxy:st.el,Et=bt?null:xt,{i:kt,r:Lt}=nt,Pt=rt&&rt.r,Rt=kt.refs===EMPTY_OBJ?kt.refs={}:kt.refs,Dt=kt.setupState;if(Pt!=null&&Pt!==Lt&&(isString(Pt)?(Rt[Pt]=null,hasOwn(Dt,Pt)&&(Dt[Pt]=null)):isRef(Pt)&&(Pt.value=null)),isFunction$1(Lt))callWithErrorHandling(Lt,kt,12,[Et,Rt]);else{const Bt=isString(Lt),Ft=isRef(Lt);if(Bt||Ft){const Yt=()=>{if(nt.f){const Zt=Bt?hasOwn(Dt,Lt)?Dt[Lt]:Rt[Lt]:Lt.value;bt?isArray$2(Zt)&&remove$1(Zt,xt):isArray$2(Zt)?Zt.includes(xt)||Zt.push(xt):Bt?(Rt[Lt]=[xt],hasOwn(Dt,Lt)&&(Dt[Lt]=Rt[Lt])):(Lt.value=[xt],nt.k&&(Rt[nt.k]=Lt.value))}else Bt?(Rt[Lt]=Et,hasOwn(Dt,Lt)&&(Dt[Lt]=Et)):Ft&&(Lt.value=Et,nt.k&&(Rt[nt.k]=Et))};Et?(Yt.id=-1,queuePostRenderEffect(Yt,it)):Yt()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(nt){return baseCreateRenderer(nt)}function baseCreateRenderer(nt,rt){const it=getGlobalThis();it.__VUE__=!0;const{insert:st,remove:bt,patchProp:xt,createElement:Et,createText:kt,createComment:Lt,setText:Pt,setElementText:Rt,parentNode:Dt,nextSibling:Bt,setScopeId:Ft=NOOP,insertStaticContent:Yt}=nt,Zt=(Cn,rn,dn,fn=null,On=null,xn=null,hr=!1,Nn=null,Kn=!!rn.dynamicChildren)=>{if(Cn===rn)return;Cn&&!isSameVNodeType(Cn,rn)&&(fn=Fr(Cn),or(Cn,On,xn,!0),Cn=null),rn.patchFlag===-2&&(Kn=!1,rn.dynamicChildren=null);const{type:Un,ref:sr,shapeFlag:ar}=rn;switch(Un){case Text:Wt(Cn,rn,dn,fn);break;case Comment:Qt(Cn,rn,dn,fn);break;case Static:Cn==null&&Kt(rn,dn,fn,hr);break;case Fragment:cn(Cn,rn,dn,fn,On,xn,hr,Nn,Kn);break;default:ar&1?mn(Cn,rn,dn,fn,On,xn,hr,Nn,Kn):ar&6?Sn(Cn,rn,dn,fn,On,xn,hr,Nn,Kn):(ar&64||ar&128)&&Un.process(Cn,rn,dn,fn,On,xn,hr,Nn,Kn,_r)}sr!=null&&On&&setRef(sr,Cn&&Cn.ref,xn,rn||Cn,!rn)},Wt=(Cn,rn,dn,fn)=>{if(Cn==null)st(rn.el=kt(rn.children),dn,fn);else{const On=rn.el=Cn.el;rn.children!==Cn.children&&Pt(On,rn.children)}},Qt=(Cn,rn,dn,fn)=>{Cn==null?st(rn.el=Lt(rn.children||""),dn,fn):rn.el=Cn.el},Kt=(Cn,rn,dn,fn)=>{[Cn.el,Cn.anchor]=Yt(Cn.children,rn,dn,fn,Cn.el,Cn.anchor)},on=({el:Cn,anchor:rn},dn,fn)=>{let On;for(;Cn&&Cn!==rn;)On=Bt(Cn),st(Cn,dn,fn),Cn=On;st(rn,dn,fn)},nn=({el:Cn,anchor:rn})=>{let dn;for(;Cn&&Cn!==rn;)dn=Bt(Cn),bt(Cn),Cn=dn;bt(rn)},mn=(Cn,rn,dn,fn,On,xn,hr,Nn,Kn)=>{hr=hr||rn.type==="svg",Cn==null?gn(rn,dn,fn,On,xn,hr,Nn,Kn):kn(Cn,rn,On,xn,hr,Nn,Kn)},gn=(Cn,rn,dn,fn,On,xn,hr,Nn)=>{let Kn,Un;const{type:sr,props:ar,shapeFlag:wr,transition:vr,dirs:Rr}=Cn;if(Kn=Cn.el=Et(Cn.type,xn,ar&&ar.is,ar),wr&8?Rt(Kn,Cn.children):wr&16&&An(Cn.children,Kn,null,fn,On,xn&&sr!=="foreignObject",hr,Nn),Rr&&invokeDirectiveHook(Cn,null,fn,"created"),Tn(Kn,Cn,Cn.scopeId,hr,fn),ar){for(const mi in ar)mi!=="value"&&!isReservedProp(mi)&&xt(Kn,mi,null,ar[mi],xn,Cn.children,fn,On,rr);"value"in ar&&xt(Kn,"value",null,ar.value),(Un=ar.onVnodeBeforeMount)&&invokeVNodeHook(Un,fn,Cn)}Rr&&invokeDirectiveHook(Cn,null,fn,"beforeMount");const ci=(!On||On&&!On.pendingBranch)&&vr&&!vr.persisted;ci&&vr.beforeEnter(Kn),st(Kn,rn,dn),((Un=ar&&ar.onVnodeMounted)||ci||Rr)&&queuePostRenderEffect(()=>{Un&&invokeVNodeHook(Un,fn,Cn),ci&&vr.enter(Kn),Rr&&invokeDirectiveHook(Cn,null,fn,"mounted")},On)},Tn=(Cn,rn,dn,fn,On)=>{if(dn&&Ft(Cn,dn),fn)for(let xn=0;xn<fn.length;xn++)Ft(Cn,fn[xn]);if(On){let xn=On.subTree;if(rn===xn){const hr=On.vnode;Tn(Cn,hr,hr.scopeId,hr.slotScopeIds,On.parent)}}},An=(Cn,rn,dn,fn,On,xn,hr,Nn,Kn=0)=>{for(let Un=Kn;Un<Cn.length;Un++){const sr=Cn[Un]=Nn?cloneIfMounted(Cn[Un]):normalizeVNode(Cn[Un]);Zt(null,sr,rn,dn,fn,On,xn,hr,Nn)}},kn=(Cn,rn,dn,fn,On,xn,hr)=>{const Nn=rn.el=Cn.el;let{patchFlag:Kn,dynamicChildren:Un,dirs:sr}=rn;Kn|=Cn.patchFlag&16;const ar=Cn.props||EMPTY_OBJ,wr=rn.props||EMPTY_OBJ;let vr;dn&&toggleRecurse(dn,!1),(vr=wr.onVnodeBeforeUpdate)&&invokeVNodeHook(vr,dn,rn,Cn),sr&&invokeDirectiveHook(rn,Cn,dn,"beforeUpdate"),dn&&toggleRecurse(dn,!0);const Rr=On&&rn.type!=="foreignObject";if(Un?Mn(Cn.dynamicChildren,Un,Nn,dn,fn,Rr,xn):hr||ir(Cn,rn,Nn,null,dn,fn,Rr,xn,!1),Kn>0){if(Kn&16)$n(Nn,rn,ar,wr,dn,fn,On);else if(Kn&2&&ar.class!==wr.class&&xt(Nn,"class",null,wr.class,On),Kn&4&&xt(Nn,"style",ar.style,wr.style,On),Kn&8){const ci=rn.dynamicProps;for(let mi=0;mi<ci.length;mi++){const si=ci[mi],yi=ar[si],Ni=wr[si];(Ni!==yi||si==="value")&&xt(Nn,si,yi,Ni,On,Cn.children,dn,fn,rr)}}Kn&1&&Cn.children!==rn.children&&Rt(Nn,rn.children)}else!hr&&Un==null&&$n(Nn,rn,ar,wr,dn,fn,On);((vr=wr.onVnodeUpdated)||sr)&&queuePostRenderEffect(()=>{vr&&invokeVNodeHook(vr,dn,rn,Cn),sr&&invokeDirectiveHook(rn,Cn,dn,"updated")},fn)},Mn=(Cn,rn,dn,fn,On,xn,hr)=>{for(let Nn=0;Nn<rn.length;Nn++){const Kn=Cn[Nn],Un=rn[Nn],sr=Kn.el&&(Kn.type===Fragment||!isSameVNodeType(Kn,Un)||Kn.shapeFlag&70)?Dt(Kn.el):dn;Zt(Kn,Un,sr,null,fn,On,xn,hr,!0)}},$n=(Cn,rn,dn,fn,On,xn,hr)=>{if(dn!==fn){if(dn!==EMPTY_OBJ)for(const Nn in dn)!isReservedProp(Nn)&&!(Nn in fn)&&xt(Cn,Nn,dn[Nn],null,hr,rn.children,On,xn,rr);for(const Nn in fn){if(isReservedProp(Nn))continue;const Kn=fn[Nn],Un=dn[Nn];Kn!==Un&&Nn!=="value"&&xt(Cn,Nn,Un,Kn,hr,rn.children,On,xn,rr)}"value"in fn&&xt(Cn,"value",dn.value,fn.value)}},cn=(Cn,rn,dn,fn,On,xn,hr,Nn,Kn)=>{const Un=rn.el=Cn?Cn.el:kt(""),sr=rn.anchor=Cn?Cn.anchor:kt("");let{patchFlag:ar,dynamicChildren:wr,slotScopeIds:vr}=rn;vr&&(Nn=Nn?Nn.concat(vr):vr),Cn==null?(st(Un,dn,fn),st(sr,dn,fn),An(rn.children,dn,sr,On,xn,hr,Nn,Kn)):ar>0&&ar&64&&wr&&Cn.dynamicChildren?(Mn(Cn.dynamicChildren,wr,dn,On,xn,hr,Nn),(rn.key!=null||On&&rn===On.subTree)&&traverseStaticChildren(Cn,rn,!0)):ir(Cn,rn,dn,sr,On,xn,hr,Nn,Kn)},Sn=(Cn,rn,dn,fn,On,xn,hr,Nn,Kn)=>{rn.slotScopeIds=Nn,Cn==null?rn.shapeFlag&512?On.ctx.activate(rn,dn,fn,hr,Kn):an(rn,dn,fn,On,xn,hr,Kn):jn(Cn,rn,Kn)},an=(Cn,rn,dn,fn,On,xn,hr)=>{const Nn=Cn.component=createComponentInstance(Cn,fn,On);if(isKeepAlive(Cn)&&(Nn.ctx.renderer=_r),setupComponent(Nn),Nn.asyncDep){if(On&&On.registerDep(Nn,hn),!Cn.el){const Kn=Nn.subTree=createVNode(Comment);Qt(null,Kn,rn,dn)}return}hn(Nn,Cn,rn,dn,On,xn,hr)},jn=(Cn,rn,dn)=>{const fn=rn.component=Cn.component;if(shouldUpdateComponent(Cn,rn,dn))if(fn.asyncDep&&!fn.asyncResolved){zn(fn,rn,dn);return}else fn.next=rn,invalidateJob(fn.update),fn.update();else rn.el=Cn.el,fn.vnode=rn},hn=(Cn,rn,dn,fn,On,xn,hr)=>{const Nn=()=>{if(Cn.isMounted){let{next:sr,bu:ar,u:wr,parent:vr,vnode:Rr}=Cn,ci=sr,mi;toggleRecurse(Cn,!1),sr?(sr.el=Rr.el,zn(Cn,sr,hr)):sr=Rr,ar&&invokeArrayFns(ar),(mi=sr.props&&sr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(mi,vr,sr,Rr),toggleRecurse(Cn,!0);const si=renderComponentRoot(Cn),yi=Cn.subTree;Cn.subTree=si,Zt(yi,si,Dt(yi.el),Fr(yi),Cn,On,xn),sr.el=si.el,ci===null&&updateHOCHostEl(Cn,si.el),wr&&queuePostRenderEffect(wr,On),(mi=sr.props&&sr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(mi,vr,sr,Rr),On)}else{let sr;const{el:ar,props:wr}=rn,{bm:vr,m:Rr,parent:ci}=Cn,mi=isAsyncWrapper(rn);if(toggleRecurse(Cn,!1),vr&&invokeArrayFns(vr),!mi&&(sr=wr&&wr.onVnodeBeforeMount)&&invokeVNodeHook(sr,ci,rn),toggleRecurse(Cn,!0),ar&&pr){const si=()=>{Cn.subTree=renderComponentRoot(Cn),pr(ar,Cn.subTree,Cn,On,null)};mi?rn.type.__asyncLoader().then(()=>!Cn.isUnmounted&&si()):si()}else{const si=Cn.subTree=renderComponentRoot(Cn);Zt(null,si,dn,fn,Cn,On,xn),rn.el=si.el}if(Rr&&queuePostRenderEffect(Rr,On),!mi&&(sr=wr&&wr.onVnodeMounted)){const si=rn;queuePostRenderEffect(()=>invokeVNodeHook(sr,ci,si),On)}(rn.shapeFlag&256||ci&&isAsyncWrapper(ci.vnode)&&ci.vnode.shapeFlag&256)&&Cn.a&&queuePostRenderEffect(Cn.a,On),Cn.isMounted=!0,rn=dn=fn=null}},Kn=Cn.effect=new ReactiveEffect(Nn,()=>queueJob(Un),Cn.scope),Un=Cn.update=()=>Kn.run();Un.id=Cn.uid,toggleRecurse(Cn,!0),Un()},zn=(Cn,rn,dn)=>{rn.component=Cn;const fn=Cn.vnode.props;Cn.vnode=rn,Cn.next=null,updateProps(Cn,rn.props,fn,dn),updateSlots(Cn,rn.children,dn),pauseTracking(),flushPreFlushCbs(),resetTracking()},ir=(Cn,rn,dn,fn,On,xn,hr,Nn,Kn=!1)=>{const Un=Cn&&Cn.children,sr=Cn?Cn.shapeFlag:0,ar=rn.children,{patchFlag:wr,shapeFlag:vr}=rn;if(wr>0){if(wr&128){nr(Un,ar,dn,fn,On,xn,hr,Nn,Kn);return}else if(wr&256){tr(Un,ar,dn,fn,On,xn,hr,Nn,Kn);return}}vr&8?(sr&16&&rr(Un,On,xn),ar!==Un&&Rt(dn,ar)):sr&16?vr&16?nr(Un,ar,dn,fn,On,xn,hr,Nn,Kn):rr(Un,On,xn,!0):(sr&8&&Rt(dn,""),vr&16&&An(ar,dn,fn,On,xn,hr,Nn,Kn))},tr=(Cn,rn,dn,fn,On,xn,hr,Nn,Kn)=>{Cn=Cn||EMPTY_ARR,rn=rn||EMPTY_ARR;const Un=Cn.length,sr=rn.length,ar=Math.min(Un,sr);let wr;for(wr=0;wr<ar;wr++){const vr=rn[wr]=Kn?cloneIfMounted(rn[wr]):normalizeVNode(rn[wr]);Zt(Cn[wr],vr,dn,null,On,xn,hr,Nn,Kn)}Un>sr?rr(Cn,On,xn,!0,!1,ar):An(rn,dn,fn,On,xn,hr,Nn,Kn,ar)},nr=(Cn,rn,dn,fn,On,xn,hr,Nn,Kn)=>{let Un=0;const sr=rn.length;let ar=Cn.length-1,wr=sr-1;for(;Un<=ar&&Un<=wr;){const vr=Cn[Un],Rr=rn[Un]=Kn?cloneIfMounted(rn[Un]):normalizeVNode(rn[Un]);if(isSameVNodeType(vr,Rr))Zt(vr,Rr,dn,null,On,xn,hr,Nn,Kn);else break;Un++}for(;Un<=ar&&Un<=wr;){const vr=Cn[ar],Rr=rn[wr]=Kn?cloneIfMounted(rn[wr]):normalizeVNode(rn[wr]);if(isSameVNodeType(vr,Rr))Zt(vr,Rr,dn,null,On,xn,hr,Nn,Kn);else break;ar--,wr--}if(Un>ar){if(Un<=wr){const vr=wr+1,Rr=vr<sr?rn[vr].el:fn;for(;Un<=wr;)Zt(null,rn[Un]=Kn?cloneIfMounted(rn[Un]):normalizeVNode(rn[Un]),dn,Rr,On,xn,hr,Nn,Kn),Un++}}else if(Un>wr)for(;Un<=ar;)or(Cn[Un],On,xn,!0),Un++;else{const vr=Un,Rr=Un,ci=new Map;for(Un=Rr;Un<=wr;Un++){const Ln=rn[Un]=Kn?cloneIfMounted(rn[Un]):normalizeVNode(rn[Un]);Ln.key!=null&&ci.set(Ln.key,Un)}let mi,si=0;const yi=wr-Rr+1;let Ni=!1,Ii=0;const Mi=new Array(yi);for(Un=0;Un<yi;Un++)Mi[Un]=0;for(Un=vr;Un<=ar;Un++){const Ln=Cn[Un];if(si>=yi){or(Ln,On,xn,!0);continue}let En;if(Ln.key!=null)En=ci.get(Ln.key);else for(mi=Rr;mi<=wr;mi++)if(Mi[mi-Rr]===0&&isSameVNodeType(Ln,rn[mi])){En=mi;break}En===void 0?or(Ln,On,xn,!0):(Mi[En-Rr]=Un+1,En>=Ii?Ii=En:Ni=!0,Zt(Ln,rn[En],dn,null,On,xn,hr,Nn,Kn),si++)}const Or=Ni?getSequence(Mi):EMPTY_ARR;for(mi=Or.length-1,Un=yi-1;Un>=0;Un--){const Ln=Rr+Un,En=rn[Ln],Wn=Ln+1<sr?rn[Ln+1].el:fn;Mi[Un]===0?Zt(null,En,dn,Wn,On,xn,hr,Nn,Kn):Ni&&(mi<0||Un!==Or[mi]?dr(En,dn,Wn,2):mi--)}}},dr=(Cn,rn,dn,fn,On=null)=>{const{el:xn,type:hr,transition:Nn,children:Kn,shapeFlag:Un}=Cn;if(Un&6){dr(Cn.component.subTree,rn,dn,fn);return}if(Un&128){Cn.suspense.move(rn,dn,fn);return}if(Un&64){hr.move(Cn,rn,dn,_r);return}if(hr===Fragment){st(xn,rn,dn);for(let ar=0;ar<Kn.length;ar++)dr(Kn[ar],rn,dn,fn);st(Cn.anchor,rn,dn);return}if(hr===Static){on(Cn,rn,dn);return}if(fn!==2&&Un&1&&Nn)if(fn===0)Nn.beforeEnter(xn),st(xn,rn,dn),queuePostRenderEffect(()=>Nn.enter(xn),On);else{const{leave:ar,delayLeave:wr,afterLeave:vr}=Nn,Rr=()=>st(xn,rn,dn),ci=()=>{ar(xn,()=>{Rr(),vr&&vr()})};wr?wr(xn,Rr,ci):ci()}else st(xn,rn,dn)},or=(Cn,rn,dn,fn=!1,On=!1)=>{const{type:xn,props:hr,ref:Nn,children:Kn,dynamicChildren:Un,shapeFlag:sr,patchFlag:ar,dirs:wr}=Cn;if(Nn!=null&&setRef(Nn,null,dn,Cn,!0),sr&256){rn.ctx.deactivate(Cn);return}const vr=sr&1&&wr,Rr=!isAsyncWrapper(Cn);let ci;if(Rr&&(ci=hr&&hr.onVnodeBeforeUnmount)&&invokeVNodeHook(ci,rn,Cn),sr&6)Sr(Cn.component,dn,fn);else{if(sr&128){Cn.suspense.unmount(dn,fn);return}vr&&invokeDirectiveHook(Cn,null,rn,"beforeUnmount"),sr&64?Cn.type.remove(Cn,rn,dn,On,_r,fn):Un&&(xn!==Fragment||ar>0&&ar&64)?rr(Un,rn,dn,!1,!0):(xn===Fragment&&ar&384||!On&&sr&16)&&rr(Kn,rn,dn),fn&&ur(Cn)}(Rr&&(ci=hr&&hr.onVnodeUnmounted)||vr)&&queuePostRenderEffect(()=>{ci&&invokeVNodeHook(ci,rn,Cn),vr&&invokeDirectiveHook(Cn,null,rn,"unmounted")},dn)},ur=Cn=>{const{type:rn,el:dn,anchor:fn,transition:On}=Cn;if(rn===Fragment){Cr(dn,fn);return}if(rn===Static){nn(Cn);return}const xn=()=>{bt(dn),On&&!On.persisted&&On.afterLeave&&On.afterLeave()};if(Cn.shapeFlag&1&&On&&!On.persisted){const{leave:hr,delayLeave:Nn}=On,Kn=()=>hr(dn,xn);Nn?Nn(Cn.el,xn,Kn):Kn()}else xn()},Cr=(Cn,rn)=>{let dn;for(;Cn!==rn;)dn=Bt(Cn),bt(Cn),Cn=dn;bt(rn)},Sr=(Cn,rn,dn)=>{const{bum:fn,scope:On,update:xn,subTree:hr,um:Nn}=Cn;fn&&invokeArrayFns(fn),On.stop(),xn&&(xn.active=!1,or(hr,Cn,rn,dn)),Nn&&queuePostRenderEffect(Nn,rn),queuePostRenderEffect(()=>{Cn.isUnmounted=!0},rn),rn&&rn.pendingBranch&&!rn.isUnmounted&&Cn.asyncDep&&!Cn.asyncResolved&&Cn.suspenseId===rn.pendingId&&(rn.deps--,rn.deps===0&&rn.resolve())},rr=(Cn,rn,dn,fn=!1,On=!1,xn=0)=>{for(let hr=xn;hr<Cn.length;hr++)or(Cn[hr],rn,dn,fn,On)},Fr=Cn=>Cn.shapeFlag&6?Fr(Cn.component.subTree):Cn.shapeFlag&128?Cn.suspense.next():Bt(Cn.anchor||Cn.el),mr=(Cn,rn,dn)=>{Cn==null?rn._vnode&&or(rn._vnode,null,null,!0):Zt(rn._vnode||null,Cn,rn,null,null,null,dn),flushPreFlushCbs(),flushPostFlushCbs(),rn._vnode=Cn},_r={p:Zt,um:or,m:dr,r:ur,mt:an,mc:An,pc:ir,pbc:Mn,n:Fr,o:nt};let yr,pr;return rt&&([yr,pr]=rt(_r)),{render:mr,hydrate:yr,createApp:createAppAPI(mr,yr)}}function toggleRecurse({effect:nt,update:rt},it){nt.allowRecurse=rt.allowRecurse=it}function traverseStaticChildren(nt,rt,it=!1){const st=nt.children,bt=rt.children;if(isArray$2(st)&&isArray$2(bt))for(let xt=0;xt<st.length;xt++){const Et=st[xt];let kt=bt[xt];kt.shapeFlag&1&&!kt.dynamicChildren&&((kt.patchFlag<=0||kt.patchFlag===32)&&(kt=bt[xt]=cloneIfMounted(bt[xt]),kt.el=Et.el),it||traverseStaticChildren(Et,kt)),kt.type===Text&&(kt.el=Et.el)}}function getSequence(nt){const rt=nt.slice(),it=[0];let st,bt,xt,Et,kt;const Lt=nt.length;for(st=0;st<Lt;st++){const Pt=nt[st];if(Pt!==0){if(bt=it[it.length-1],nt[bt]<Pt){rt[st]=bt,it.push(st);continue}for(xt=0,Et=it.length-1;xt<Et;)kt=xt+Et>>1,nt[it[kt]]<Pt?xt=kt+1:Et=kt;Pt<nt[it[xt]]&&(xt>0&&(rt[st]=it[xt-1]),it[xt]=st)}}for(xt=it.length,Et=it[xt-1];xt-- >0;)it[xt]=Et,Et=rt[Et];return it}const isTeleport=nt=>nt.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(nt=!1){blockStack.push(currentBlock=nt?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(nt){isBlockTreeEnabled+=nt}function setupBlock(nt){return nt.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(nt),nt}function createElementBlock(nt,rt,it,st,bt,xt){return setupBlock(createBaseVNode(nt,rt,it,st,bt,xt,!0))}function createBlock(nt,rt,it,st,bt){return setupBlock(createVNode(nt,rt,it,st,bt,!0))}function isVNode(nt){return nt?nt.__v_isVNode===!0:!1}function isSameVNodeType(nt,rt){return nt.type===rt.type&&nt.key===rt.key}const InternalObjectKey="__vInternal",normalizeKey=({key:nt})=>nt!=null?nt:null,normalizeRef=({ref:nt,ref_key:rt,ref_for:it})=>(typeof nt=="number"&&(nt=""+nt),nt!=null?isString(nt)||isRef(nt)||isFunction$1(nt)?{i:currentRenderingInstance,r:nt,k:rt,f:!!it}:nt:null);function createBaseVNode(nt,rt=null,it=null,st=0,bt=null,xt=nt===Fragment?0:1,Et=!1,kt=!1){const Lt={__v_isVNode:!0,__v_skip:!0,type:nt,props:rt,key:rt&&normalizeKey(rt),ref:rt&&normalizeRef(rt),scopeId:currentScopeId,slotScopeIds:null,children:it,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:xt,patchFlag:st,dynamicProps:bt,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return kt?(normalizeChildren(Lt,it),xt&128&&nt.normalize(Lt)):it&&(Lt.shapeFlag|=isString(it)?8:16),isBlockTreeEnabled>0&&!Et&&currentBlock&&(Lt.patchFlag>0||xt&6)&&Lt.patchFlag!==32&&currentBlock.push(Lt),Lt}const createVNode=_createVNode;function _createVNode(nt,rt=null,it=null,st=0,bt=null,xt=!1){if((!nt||nt===NULL_DYNAMIC_COMPONENT)&&(nt=Comment),isVNode(nt)){const kt=cloneVNode(nt,rt,!0);return it&&normalizeChildren(kt,it),isBlockTreeEnabled>0&&!xt&&currentBlock&&(kt.shapeFlag&6?currentBlock[currentBlock.indexOf(nt)]=kt:currentBlock.push(kt)),kt.patchFlag|=-2,kt}if(isClassComponent(nt)&&(nt=nt.__vccOpts),rt){rt=guardReactiveProps(rt);let{class:kt,style:Lt}=rt;kt&&!isString(kt)&&(rt.class=normalizeClass(kt)),isObject$3(Lt)&&(isProxy(Lt)&&!isArray$2(Lt)&&(Lt=extend$3({},Lt)),rt.style=normalizeStyle(Lt))}const Et=isString(nt)?1:isSuspense(nt)?128:isTeleport(nt)?64:isObject$3(nt)?4:isFunction$1(nt)?2:0;return createBaseVNode(nt,rt,it,st,bt,Et,xt,!0)}function guardReactiveProps(nt){return nt?isProxy(nt)||InternalObjectKey in nt?extend$3({},nt):nt:null}function cloneVNode(nt,rt,it=!1){const{props:st,ref:bt,patchFlag:xt,children:Et}=nt,kt=rt?mergeProps(st||{},rt):st;return{__v_isVNode:!0,__v_skip:!0,type:nt.type,props:kt,key:kt&&normalizeKey(kt),ref:rt&&rt.ref?it&&bt?isArray$2(bt)?bt.concat(normalizeRef(rt)):[bt,normalizeRef(rt)]:normalizeRef(rt):bt,scopeId:nt.scopeId,slotScopeIds:nt.slotScopeIds,children:Et,target:nt.target,targetAnchor:nt.targetAnchor,staticCount:nt.staticCount,shapeFlag:nt.shapeFlag,patchFlag:rt&&nt.type!==Fragment?xt===-1?16:xt|16:xt,dynamicProps:nt.dynamicProps,dynamicChildren:nt.dynamicChildren,appContext:nt.appContext,dirs:nt.dirs,transition:nt.transition,component:nt.component,suspense:nt.suspense,ssContent:nt.ssContent&&cloneVNode(nt.ssContent),ssFallback:nt.ssFallback&&cloneVNode(nt.ssFallback),el:nt.el,anchor:nt.anchor,ctx:nt.ctx,ce:nt.ce}}function createTextVNode(nt=" ",rt=0){return createVNode(Text,null,nt,rt)}function createCommentVNode(nt="",rt=!1){return rt?(openBlock(),createBlock(Comment,null,nt)):createVNode(Comment,null,nt)}function normalizeVNode(nt){return nt==null||typeof nt=="boolean"?createVNode(Comment):isArray$2(nt)?createVNode(Fragment,null,nt.slice()):typeof nt=="object"?cloneIfMounted(nt):createVNode(Text,null,String(nt))}function cloneIfMounted(nt){return nt.el===null&&nt.patchFlag!==-1||nt.memo?nt:cloneVNode(nt)}function normalizeChildren(nt,rt){let it=0;const{shapeFlag:st}=nt;if(rt==null)rt=null;else if(isArray$2(rt))it=16;else if(typeof rt=="object")if(st&65){const bt=rt.default;bt&&(bt._c&&(bt._d=!1),normalizeChildren(nt,bt()),bt._c&&(bt._d=!0));return}else{it=32;const bt=rt._;!bt&&!(InternalObjectKey in rt)?rt._ctx=currentRenderingInstance:bt===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?rt._=1:(rt._=2,nt.patchFlag|=1024))}else isFunction$1(rt)?(rt={default:rt,_ctx:currentRenderingInstance},it=32):(rt=String(rt),st&64?(it=16,rt=[createTextVNode(rt)]):it=8);nt.children=rt,nt.shapeFlag|=it}function mergeProps(...nt){const rt={};for(let it=0;it<nt.length;it++){const st=nt[it];for(const bt in st)if(bt==="class")rt.class!==st.class&&(rt.class=normalizeClass([rt.class,st.class]));else if(bt==="style")rt.style=normalizeStyle([rt.style,st.style]);else if(isOn(bt)){const xt=rt[bt],Et=st[bt];Et&&xt!==Et&&!(isArray$2(xt)&&xt.includes(Et))&&(rt[bt]=xt?[].concat(xt,Et):Et)}else bt!==""&&(rt[bt]=st[bt])}return rt}function invokeVNodeHook(nt,rt,it,st=null){callWithAsyncErrorHandling(nt,rt,7,[it,st])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(nt,rt,it){const st=nt.type,bt=(rt?rt.appContext:nt.appContext)||emptyAppContext,xt={uid:uid++,vnode:nt,type:st,parent:rt,appContext:bt,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:rt?rt.provides:Object.create(bt.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(st,bt),emitsOptions:normalizeEmitsOptions(st,bt),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:st.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:it,suspenseId:it?it.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return xt.ctx={_:xt},xt.root=rt?rt.root:xt,xt.emit=emit.bind(null,xt),nt.ce&&nt.ce(xt),xt}let currentInstance=null,internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(nt=>currentInstance=nt),internalSetCurrentInstance=nt=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(rt=>rt(nt)):globalCurrentInstanceSetters[0](nt)};const setCurrentInstance=nt=>{internalSetCurrentInstance(nt),nt.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(nt){return nt.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(nt,rt=!1){isInSSRComponentSetup=rt;const{props:it,children:st}=nt.vnode,bt=isStatefulComponent(nt);initProps(nt,it,bt,rt),initSlots(nt,st);const xt=bt?setupStatefulComponent(nt,rt):void 0;return isInSSRComponentSetup=!1,xt}function setupStatefulComponent(nt,rt){const it=nt.type;nt.accessCache=Object.create(null),nt.proxy=markRaw(new Proxy(nt.ctx,PublicInstanceProxyHandlers));const{setup:st}=it;if(st){const bt=nt.setupContext=st.length>1?createSetupContext(nt):null;setCurrentInstance(nt),pauseTracking();const xt=callWithErrorHandling(st,nt,0,[nt.props,bt]);if(resetTracking(),unsetCurrentInstance(),isPromise(xt)){if(xt.then(unsetCurrentInstance,unsetCurrentInstance),rt)return xt.then(Et=>{handleSetupResult(nt,Et,rt)}).catch(Et=>{handleError$1(Et,nt,0)});nt.asyncDep=xt}else handleSetupResult(nt,xt,rt)}else finishComponentSetup(nt,rt)}function handleSetupResult(nt,rt,it){isFunction$1(rt)?nt.type.__ssrInlineRender?nt.ssrRender=rt:nt.render=rt:isObject$3(rt)&&(nt.setupState=proxyRefs(rt)),finishComponentSetup(nt,it)}let compile$1;function finishComponentSetup(nt,rt,it){const st=nt.type;if(!nt.render){if(!rt&&compile$1&&!st.render){const bt=st.template||resolveMergedOptions(nt).template;if(bt){const{isCustomElement:xt,compilerOptions:Et}=nt.appContext.config,{delimiters:kt,compilerOptions:Lt}=st,Pt=extend$3(extend$3({isCustomElement:xt,delimiters:kt},Et),Lt);st.render=compile$1(bt,Pt)}}nt.render=st.render||NOOP}setCurrentInstance(nt),pauseTracking(),applyOptions(nt),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(nt){return nt.attrsProxy||(nt.attrsProxy=new Proxy(nt.attrs,{get(rt,it){return track(nt,"get","$attrs"),rt[it]}}))}function createSetupContext(nt){const rt=it=>{nt.exposed=it||{}};return{get attrs(){return getAttrsProxy(nt)},slots:nt.slots,emit:nt.emit,expose:rt}}function getExposeProxy(nt){if(nt.exposed)return nt.exposeProxy||(nt.exposeProxy=new Proxy(proxyRefs(markRaw(nt.exposed)),{get(rt,it){if(it in rt)return rt[it];if(it in publicPropertiesMap)return publicPropertiesMap[it](nt)},has(rt,it){return it in rt||it in publicPropertiesMap}}))}function isClassComponent(nt){return isFunction$1(nt)&&"__vccOpts"in nt}const computed=(nt,rt)=>computed$1(nt,rt,isInSSRComponentSetup),ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version$2="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(nt,rt,it)=>{rt.insertBefore(nt,it||null)},remove:nt=>{const rt=nt.parentNode;rt&&rt.removeChild(nt)},createElement:(nt,rt,it,st)=>{const bt=rt?doc.createElementNS(svgNS,nt):doc.createElement(nt,it?{is:it}:void 0);return nt==="select"&&st&&st.multiple!=null&&bt.setAttribute("multiple",st.multiple),bt},createText:nt=>doc.createTextNode(nt),createComment:nt=>doc.createComment(nt),setText:(nt,rt)=>{nt.nodeValue=rt},setElementText:(nt,rt)=>{nt.textContent=rt},parentNode:nt=>nt.parentNode,nextSibling:nt=>nt.nextSibling,querySelector:nt=>doc.querySelector(nt),setScopeId(nt,rt){nt.setAttribute(rt,"")},insertStaticContent(nt,rt,it,st,bt,xt){const Et=it?it.previousSibling:rt.lastChild;if(bt&&(bt===xt||bt.nextSibling))for(;rt.insertBefore(bt.cloneNode(!0),it),!(bt===xt||!(bt=bt.nextSibling)););else{templateContainer.innerHTML=st?`<svg>${nt}</svg>`:nt;const kt=templateContainer.content;if(st){const Lt=kt.firstChild;for(;Lt.firstChild;)kt.appendChild(Lt.firstChild);kt.removeChild(Lt)}rt.insertBefore(kt,it)}return[Et?Et.nextSibling:rt.firstChild,it?it.previousSibling:rt.lastChild]}};function patchClass(nt,rt,it){const st=nt._vtc;st&&(rt=(rt?[rt,...st]:[...st]).join(" ")),rt==null?nt.removeAttribute("class"):it?nt.setAttribute("class",rt):nt.className=rt}function patchStyle(nt,rt,it){const st=nt.style,bt=isString(it);if(it&&!bt){if(rt&&!isString(rt))for(const xt in rt)it[xt]==null&&setStyle$1(st,xt,"");for(const xt in it)setStyle$1(st,xt,it[xt])}else{const xt=st.display;bt?rt!==it&&(st.cssText=it):rt&&nt.removeAttribute("style"),"_vod"in nt&&(st.display=xt)}}const importantRE=/\s*!important$/;function setStyle$1(nt,rt,it){if(isArray$2(it))it.forEach(st=>setStyle$1(nt,rt,st));else if(it==null&&(it=""),rt.startsWith("--"))nt.setProperty(rt,it);else{const st=autoPrefix(nt,rt);importantRE.test(it)?nt.setProperty(hyphenate(st),it.replace(importantRE,""),"important"):nt[st]=it}}const prefixes$1=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(nt,rt){const it=prefixCache[rt];if(it)return it;let st=camelize(rt);if(st!=="filter"&&st in nt)return prefixCache[rt]=st;st=capitalize(st);for(let bt=0;bt<prefixes$1.length;bt++){const xt=prefixes$1[bt]+st;if(xt in nt)return prefixCache[rt]=xt}return rt}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(nt,rt,it,st,bt){if(st&&rt.startsWith("xlink:"))it==null?nt.removeAttributeNS(xlinkNS,rt.slice(6,rt.length)):nt.setAttributeNS(xlinkNS,rt,it);else{const xt=isSpecialBooleanAttr(rt);it==null||xt&&!includeBooleanAttr(it)?nt.removeAttribute(rt):nt.setAttribute(rt,xt?"":it)}}function patchDOMProp(nt,rt,it,st,bt,xt,Et){if(rt==="innerHTML"||rt==="textContent"){st&&Et(st,bt,xt),nt[rt]=it==null?"":it;return}const kt=nt.tagName;if(rt==="value"&&kt!=="PROGRESS"&&!kt.includes("-")){nt._value=it;const Pt=kt==="OPTION"?nt.getAttribute("value"):nt.value,Rt=it==null?"":it;Pt!==Rt&&(nt.value=Rt),it==null&&nt.removeAttribute(rt);return}let Lt=!1;if(it===""||it==null){const Pt=typeof nt[rt];Pt==="boolean"?it=includeBooleanAttr(it):it==null&&Pt==="string"?(it="",Lt=!0):Pt==="number"&&(it=0,Lt=!0)}try{nt[rt]=it}catch{}Lt&&nt.removeAttribute(rt)}function addEventListener(nt,rt,it,st){nt.addEventListener(rt,it,st)}function removeEventListener(nt,rt,it,st){nt.removeEventListener(rt,it,st)}function patchEvent(nt,rt,it,st,bt=null){const xt=nt._vei||(nt._vei={}),Et=xt[rt];if(st&&Et)Et.value=st;else{const[kt,Lt]=parseName(rt);if(st){const Pt=xt[rt]=createInvoker(st,bt);addEventListener(nt,kt,Pt,Lt)}else Et&&(removeEventListener(nt,kt,Et,Lt),xt[rt]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(nt){let rt;if(optionsModifierRE.test(nt)){rt={};let st;for(;st=nt.match(optionsModifierRE);)nt=nt.slice(0,nt.length-st[0].length),rt[st[0].toLowerCase()]=!0}return[nt[2]===":"?nt.slice(3):hyphenate(nt.slice(2)),rt]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(nt,rt){const it=st=>{if(!st._vts)st._vts=Date.now();else if(st._vts<=it.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(st,it.value),rt,5,[st])};return it.value=nt,it.attached=getNow(),it}function patchStopImmediatePropagation(nt,rt){if(isArray$2(rt)){const it=nt.stopImmediatePropagation;return nt.stopImmediatePropagation=()=>{it.call(nt),nt._stopped=!0},rt.map(st=>bt=>!bt._stopped&&st&&st(bt))}else return rt}const nativeOnRE=/^on[a-z]/,patchProp=(nt,rt,it,st,bt=!1,xt,Et,kt,Lt)=>{rt==="class"?patchClass(nt,st,bt):rt==="style"?patchStyle(nt,it,st):isOn(rt)?isModelListener(rt)||patchEvent(nt,rt,it,st,Et):(rt[0]==="."?(rt=rt.slice(1),!0):rt[0]==="^"?(rt=rt.slice(1),!1):shouldSetAsProp(nt,rt,st,bt))?patchDOMProp(nt,rt,st,xt,Et,kt,Lt):(rt==="true-value"?nt._trueValue=st:rt==="false-value"&&(nt._falseValue=st),patchAttr(nt,rt,st,bt))};function shouldSetAsProp(nt,rt,it,st){return st?!!(rt==="innerHTML"||rt==="textContent"||rt in nt&&nativeOnRE.test(rt)&&isFunction$1(it)):rt==="spellcheck"||rt==="draggable"||rt==="translate"||rt==="form"||rt==="list"&&nt.tagName==="INPUT"||rt==="type"&&nt.tagName==="TEXTAREA"||nativeOnRE.test(rt)&&isString(it)?!1:rt in nt}function defineCustomElement(nt,rt){const it=defineComponent(nt);class st extends VueElement{constructor(xt){super(it,xt,rt)}}return st.def=it,st}const BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(rt,it={},st){super(),this._def=rt,this._props=it,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&st?st(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(render$4(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let st=0;st<this.attributes.length;st++)this._setAttr(this.attributes[st].name);new MutationObserver(st=>{for(const bt of st)this._setAttr(bt.attributeName)}).observe(this,{attributes:!0});const rt=(st,bt=!1)=>{const{props:xt,styles:Et}=st;let kt;if(xt&&!isArray$2(xt))for(const Lt in xt){const Pt=xt[Lt];(Pt===Number||Pt&&Pt.type===Number)&&(Lt in this._props&&(this._props[Lt]=toNumber$1(this._props[Lt])),(kt||(kt=Object.create(null)))[camelize(Lt)]=!0)}this._numberProps=kt,bt&&this._resolveProps(st),this._applyStyles(Et),this._update()},it=this._def.__asyncLoader;it?it().then(st=>rt(st,!0)):rt(this._def)}_resolveProps(rt){const{props:it}=rt,st=isArray$2(it)?it:Object.keys(it||{});for(const bt of Object.keys(this))bt[0]!=="_"&&st.includes(bt)&&this._setProp(bt,this[bt],!0,!1);for(const bt of st.map(camelize))Object.defineProperty(this,bt,{get(){return this._getProp(bt)},set(xt){this._setProp(bt,xt)}})}_setAttr(rt){let it=this.getAttribute(rt);const st=camelize(rt);this._numberProps&&this._numberProps[st]&&(it=toNumber$1(it)),this._setProp(st,it,!1)}_getProp(rt){return this._props[rt]}_setProp(rt,it,st=!0,bt=!0){it!==this._props[rt]&&(this._props[rt]=it,bt&&this._instance&&this._update(),st&&(it===!0?this.setAttribute(hyphenate(rt),""):typeof it=="string"||typeof it=="number"?this.setAttribute(hyphenate(rt),it+""):it||this.removeAttribute(hyphenate(rt))))}_update(){render$4(this._createVNode(),this.shadowRoot)}_createVNode(){const rt=createVNode(this._def,extend$3({},this._props));return this._instance||(rt.ce=it=>{this._instance=it,it.isCE=!0;const st=(xt,Et)=>{this.dispatchEvent(new CustomEvent(xt,{detail:Et}))};it.emit=(xt,...Et)=>{st(xt,Et),hyphenate(xt)!==xt&&st(hyphenate(xt),Et)};let bt=this;for(;bt=bt&&(bt.parentNode||bt.host);)if(bt instanceof VueElement){it.parent=bt._instance,it.provides=bt._instance.provides;break}}),rt}_applyStyles(rt){rt&&rt.forEach(it=>{const st=document.createElement("style");st.textContent=it,this.shadowRoot.appendChild(st)})}}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:nt=>nt.stopPropagation(),prevent:nt=>nt.preventDefault(),self:nt=>nt.target!==nt.currentTarget,ctrl:nt=>!nt.ctrlKey,shift:nt=>!nt.shiftKey,alt:nt=>!nt.altKey,meta:nt=>!nt.metaKey,left:nt=>"button"in nt&&nt.button!==0,middle:nt=>"button"in nt&&nt.button!==1,right:nt=>"button"in nt&&nt.button!==2,exact:(nt,rt)=>systemModifiers.some(it=>nt[`${it}Key`]&&!rt.includes(it))},withModifiers=(nt,rt)=>(it,...st)=>{for(let bt=0;bt<rt.length;bt++){const xt=modifierGuards[rt[bt]];if(xt&&xt(it,rt))return}return nt(it,...st)},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render$4=(...nt)=>{ensureRenderer().render(...nt)},light="";var basePath="";function setBasePath(nt){basePath=nt}function getBasePath(nt=""){if(!basePath){const rt=[...document.getElementsByTagName("script")],it=rt.find(st=>st.hasAttribute("data-shoelace"));if(it)setBasePath(it.getAttribute("data-shoelace"));else{const st=rt.find(xt=>/shoelace(\.min)?\.js($|\?)/.test(xt.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(xt.src));let bt="";st&&(bt=st.getAttribute("src")),setBasePath(bt.split("/").slice(0,-1).join("/"))}}return basePath.replace(/\/$/,"")+(nt?`/${nt.replace(/^\//,"")}`:"")}var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(nt,rt,it)=>rt in nt?__defProp(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__spreadValues=(nt,rt)=>{for(var it in rt||(rt={}))__hasOwnProp.call(rt,it)&&__defNormalProp(nt,it,rt[it]);if(__getOwnPropSymbols)for(var it of __getOwnPropSymbols(rt))__propIsEnum.call(rt,it)&&__defNormalProp(nt,it,rt[it]);return nt},__spreadProps=(nt,rt)=>__defProps(nt,__getOwnPropDescs(rt)),__decorateClass=(nt,rt,it,st)=>{for(var bt=st>1?void 0:st?__getOwnPropDesc(rt,it):rt,xt=nt.length-1,Et;xt>=0;xt--)(Et=nt[xt])&&(bt=(st?Et(rt,it,bt):Et(bt))||bt);return st&&bt&&__defProp(rt,it,bt),bt};const scriptRel="modulepreload",assetsURL=function(nt){return"/"+nt},seen={},__vitePreload=function(rt,it,st){if(!it||it.length===0)return rt();const bt=document.getElementsByTagName("link");return Promise.all(it.map(xt=>{if(xt=assetsURL(xt),xt in seen)return;seen[xt]=!0;const Et=xt.endsWith(".css"),kt=Et?'[rel="stylesheet"]':"";if(!!st)for(let Rt=bt.length-1;Rt>=0;Rt--){const Dt=bt[Rt];if(Dt.href===xt&&(!Et||Dt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${xt}"]${kt}`))return;const Pt=document.createElement("link");if(Pt.rel=Et?"stylesheet":scriptRel,Et||(Pt.as="script",Pt.crossOrigin=""),Pt.href=xt,document.head.appendChild(Pt),Et)return new Promise((Rt,Dt)=>{Pt.addEventListener("load",Rt),Pt.addEventListener("error",()=>Dt(new Error(`Unable to preload CSS for ${xt}`)))})})).then(()=>rt())};var e$8=typeof self<"u"?self:global;const t$5=typeof navigator<"u",i$9=t$5&&typeof HTMLImageElement>"u",n$8=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),s$6=e$8.Buffer,r$3=e$8.BigInt,a$4=!!s$6,o$7=nt=>nt;function l$6(nt,rt=o$7){if(n$8)try{return typeof require=="function"?Promise.resolve(rt(require(nt))):__vitePreload(()=>import(nt),[]).then(rt)}catch{console.warn(`Couldn't load ${nt}`)}}let h$2=e$8.fetch;const u$2=nt=>h$2=nt;if(!e$8.fetch){const nt=l$6("http",st=>st),rt=l$6("https",st=>st),it=(st,{headers:bt}={})=>new Promise(async(xt,Et)=>{let{port:kt,hostname:Lt,pathname:Pt,protocol:Rt,search:Dt}=new URL(st);const Bt={method:"GET",hostname:Lt,path:encodeURI(Pt)+Dt,headers:bt};kt!==""&&(Bt.port=Number(kt));const Ft=(Rt==="https:"?await rt:await nt).request(Bt,Yt=>{if(Yt.statusCode===301||Yt.statusCode===302){let Zt=new URL(Yt.headers.location,st).toString();return it(Zt,{headers:bt}).then(xt).catch(Et)}xt({status:Yt.statusCode,arrayBuffer:()=>new Promise(Zt=>{let Wt=[];Yt.on("data",Qt=>Wt.push(Qt)),Yt.on("end",()=>Zt(Buffer.concat(Wt)))})})});Ft.on("error",Et),Ft.end()});u$2(it)}function c$3(nt,rt,it){return rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}const f$2=nt=>p$1(nt)?void 0:nt,d$2=nt=>nt!==void 0;function p$1(nt){return nt===void 0||(nt instanceof Map?nt.size===0:Object.values(nt).filter(d$2).length===0)}function g$1(nt){let rt=new Error(nt);throw delete rt.stack,rt}function m$1(nt){return(nt=function(rt){for(;rt.endsWith("\0");)rt=rt.slice(0,-1);return rt}(nt).trim())===""?void 0:nt}function S$2(nt){let rt=function(it){let st=0;return it.ifd0.enabled&&(st+=1024),it.exif.enabled&&(st+=2048),it.makerNote&&(st+=2048),it.userComment&&(st+=1024),it.gps.enabled&&(st+=512),it.interop.enabled&&(st+=100),it.ifd1.enabled&&(st+=1024),st+2048}(nt);return nt.jfif.enabled&&(rt+=50),nt.xmp.enabled&&(rt+=2e4),nt.iptc.enabled&&(rt+=14e3),nt.icc.enabled&&(rt+=6e3),rt}const C$1=nt=>String.fromCharCode.apply(null,nt),y$2=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function b(nt){return y$2?y$2.decode(nt):a$4?Buffer.from(nt).toString("utf8"):decodeURIComponent(escape(C$1(nt)))}class I$1{static from(rt,it){return rt instanceof this&&rt.le===it?rt:new I$1(rt,void 0,void 0,it)}constructor(rt,it=0,st,bt){if(typeof bt=="boolean"&&(this.le=bt),Array.isArray(rt)&&(rt=new Uint8Array(rt)),rt===0)this.byteOffset=0,this.byteLength=0;else if(rt instanceof ArrayBuffer){st===void 0&&(st=rt.byteLength-it);let xt=new DataView(rt,it,st);this._swapDataView(xt)}else if(rt instanceof Uint8Array||rt instanceof DataView||rt instanceof I$1){st===void 0&&(st=rt.byteLength-it),(it+=rt.byteOffset)+st>rt.byteOffset+rt.byteLength&&g$1("Creating view outside of available memory in ArrayBuffer");let xt=new DataView(rt.buffer,it,st);this._swapDataView(xt)}else if(typeof rt=="number"){let xt=new DataView(new ArrayBuffer(rt));this._swapDataView(xt)}else g$1("Invalid input argument for BufferView: "+rt)}_swapArrayBuffer(rt){this._swapDataView(new DataView(rt))}_swapBuffer(rt){this._swapDataView(new DataView(rt.buffer,rt.byteOffset,rt.byteLength))}_swapDataView(rt){this.dataView=rt,this.buffer=rt.buffer,this.byteOffset=rt.byteOffset,this.byteLength=rt.byteLength}_lengthToEnd(rt){return this.byteLength-rt}set(rt,it,st=I$1){return rt instanceof DataView||rt instanceof I$1?rt=new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength):rt instanceof ArrayBuffer&&(rt=new Uint8Array(rt)),rt instanceof Uint8Array||g$1("BufferView.set(): Invalid data argument."),this.toUint8().set(rt,it),new st(this,it,rt.byteLength)}subarray(rt,it){return it=it||this._lengthToEnd(rt),new I$1(this,rt,it)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(rt,it){return new Uint8Array(this.buffer,this.byteOffset+rt,it)}getString(rt=0,it=this.byteLength){return b(this.getUint8Array(rt,it))}getLatin1String(rt=0,it=this.byteLength){let st=this.getUint8Array(rt,it);return C$1(st)}getUnicodeString(rt=0,it=this.byteLength){const st=[];for(let bt=0;bt<it&&rt+bt<this.byteLength;bt+=2)st.push(this.getUint16(rt+bt));return C$1(st)}getInt8(rt){return this.dataView.getInt8(rt)}getUint8(rt){return this.dataView.getUint8(rt)}getInt16(rt,it=this.le){return this.dataView.getInt16(rt,it)}getInt32(rt,it=this.le){return this.dataView.getInt32(rt,it)}getUint16(rt,it=this.le){return this.dataView.getUint16(rt,it)}getUint32(rt,it=this.le){return this.dataView.getUint32(rt,it)}getFloat32(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getFloat64(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getFloat(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getDouble(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getUintBytes(rt,it,st){switch(it){case 1:return this.getUint8(rt,st);case 2:return this.getUint16(rt,st);case 4:return this.getUint32(rt,st);case 8:return this.getUint64&&this.getUint64(rt,st)}}getUint(rt,it,st){switch(it){case 8:return this.getUint8(rt,st);case 16:return this.getUint16(rt,st);case 32:return this.getUint32(rt,st);case 64:return this.getUint64&&this.getUint64(rt,st)}}toString(rt){return this.dataView.toString(rt,this.constructor.name)}ensureChunk(){}}function P$1(nt,rt){g$1(`${nt} '${rt}' was not loaded, try using full build of exifr.`)}class k$1 extends Map{constructor(rt){super(),this.kind=rt}get(rt,it){return this.has(rt)||P$1(this.kind,rt),it&&(rt in it||function(st,bt){g$1(`Unknown ${st} '${bt}'.`)}(this.kind,rt),it[rt].enabled||P$1(this.kind,rt)),super.get(rt)}keyList(){return Array.from(this.keys())}}var w$2=new k$1("file parser"),T$1=new k$1("segment parser"),A$1=new k$1("file reader");function D$1(nt,rt){return typeof nt=="string"?O(nt,rt):t$5&&!i$9&&nt instanceof HTMLImageElement?O(nt.src,rt):nt instanceof Uint8Array||nt instanceof ArrayBuffer||nt instanceof DataView?new I$1(nt):t$5&&nt instanceof Blob?x$2(nt,rt,"blob",R$1):void g$1("Invalid input argument")}function O(nt,rt){return(it=nt).startsWith("data:")||it.length>1e4?v$1(nt,rt,"base64"):n$8&&nt.includes("://")?x$2(nt,rt,"url",M$1):n$8?v$1(nt,rt,"fs"):t$5?x$2(nt,rt,"url",M$1):void g$1("Invalid input argument");var it}async function x$2(nt,rt,it,st){return A$1.has(it)?v$1(nt,rt,it):st?async function(bt,xt){let Et=await xt(bt);return new I$1(Et)}(nt,st):void g$1(`Parser ${it} is not loaded`)}async function v$1(nt,rt,it){let st=new(A$1.get(it))(nt,rt);return await st.read(),st}const M$1=nt=>h$2(nt).then(rt=>rt.arrayBuffer()),R$1=nt=>new Promise((rt,it)=>{let st=new FileReader;st.onloadend=()=>rt(st.result||new ArrayBuffer),st.onerror=it,st.readAsArrayBuffer(nt)});class L$3 extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function U(nt,rt,it){let st=new L$3;for(let[bt,xt]of it)st.set(bt,xt);if(Array.isArray(rt))for(let bt of rt)nt.set(bt,st);else nt.set(rt,st);return st}function F(nt,rt,it){let st,bt=nt.get(rt);for(st of it)bt.set(st[0],st[1])}const E$1=new Map,B$1=new Map,N$1=new Map,G=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],V$1=["jfif","xmp","icc","iptc","ihdr"],z$1=["tiff",...V$1],H$1=["ifd0","ifd1","exif","gps","interop"],j=[...z$1,...H$1],W=["makerNote","userComment"],K$1=["translateKeys","translateValues","reviveValues","multiSegment"],X=[...K$1,"sanitize","mergeOutput","silentErrors"];class _$2{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Y extends _$2{get needed(){return this.enabled||this.deps.size>0}constructor(rt,it,st,bt){if(super(),c$3(this,"enabled",!1),c$3(this,"skip",new Set),c$3(this,"pick",new Set),c$3(this,"deps",new Set),c$3(this,"translateKeys",!1),c$3(this,"translateValues",!1),c$3(this,"reviveValues",!1),this.key=rt,this.enabled=it,this.parse=this.enabled,this.applyInheritables(bt),this.canBeFiltered=H$1.includes(rt),this.canBeFiltered&&(this.dict=E$1.get(rt)),st!==void 0)if(Array.isArray(st))this.parse=this.enabled=!0,this.canBeFiltered&&st.length>0&&this.translateTagSet(st,this.pick);else if(typeof st=="object"){if(this.enabled=!0,this.parse=st.parse!==!1,this.canBeFiltered){let{pick:xt,skip:Et}=st;xt&&xt.length>0&&this.translateTagSet(xt,this.pick),Et&&Et.length>0&&this.translateTagSet(Et,this.skip)}this.applyInheritables(st)}else st===!0||st===!1?this.parse=this.enabled=st:g$1(`Invalid options argument: ${st}`)}applyInheritables(rt){let it,st;for(it of K$1)st=rt[it],st!==void 0&&(this[it]=st)}translateTagSet(rt,it){if(this.dict){let st,bt,{tagKeys:xt,tagValues:Et}=this.dict;for(st of rt)typeof st=="string"?(bt=Et.indexOf(st),bt===-1&&(bt=xt.indexOf(Number(st))),bt!==-1&&it.add(Number(xt[bt]))):it.add(st)}else for(let st of rt)it.add(st)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ee(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ee(this.pick,this.deps)}}var $$1={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},J=new Map;class q extends _$2{static useCached(rt){let it=J.get(rt);return it!==void 0||(it=new this(rt),J.set(rt,it)),it}constructor(rt){super(),rt===!0?this.setupFromTrue():rt===void 0?this.setupFromUndefined():Array.isArray(rt)?this.setupFromArray(rt):typeof rt=="object"?this.setupFromObject(rt):g$1(`Invalid options argument ${rt}`),this.firstChunkSize===void 0&&(this.firstChunkSize=t$5?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W)this[rt]=$$1[rt];for(rt of j)this[rt]=new Y(rt,$$1[rt],void 0,this)}setupFromTrue(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W)this[rt]=!0;for(rt of j)this[rt]=new Y(rt,!0,void 0,this)}setupFromArray(rt){let it;for(it of G)this[it]=$$1[it];for(it of X)this[it]=$$1[it];for(it of W)this[it]=$$1[it];for(it of j)this[it]=new Y(it,!1,void 0,this);this.setupGlobalFilters(rt,void 0,H$1)}setupFromObject(rt){let it;for(it of(H$1.ifd0=H$1.ifd0||H$1.image,H$1.ifd1=H$1.ifd1||H$1.thumbnail,Object.assign(this,rt),G))this[it]=Z$1(rt[it],$$1[it]);for(it of X)this[it]=Z$1(rt[it],$$1[it]);for(it of W)this[it]=Z$1(rt[it],$$1[it]);for(it of z$1)this[it]=new Y(it,$$1[it],rt[it],this);for(it of H$1)this[it]=new Y(it,$$1[it],rt[it],this.tiff);this.setupGlobalFilters(rt.pick,rt.skip,H$1,j),rt.tiff===!0?this.batchEnableWithBool(H$1,!0):rt.tiff===!1?this.batchEnableWithUserValue(H$1,rt):Array.isArray(rt.tiff)?this.setupGlobalFilters(rt.tiff,void 0,H$1):typeof rt.tiff=="object"&&this.setupGlobalFilters(rt.tiff.pick,rt.tiff.skip,H$1)}batchEnableWithBool(rt,it){for(let st of rt)this[st].enabled=it}batchEnableWithUserValue(rt,it){for(let st of rt){let bt=it[st];this[st].enabled=bt!==!1&&bt!==void 0}}setupGlobalFilters(rt,it,st,bt=st){if(rt&&rt.length){for(let Et of bt)this[Et].enabled=!1;let xt=Q(rt,st);for(let[Et,kt]of xt)ee(this[Et].pick,kt),this[Et].enabled=!0}else if(it&&it.length){let xt=Q(it,st);for(let[Et,kt]of xt)ee(this[Et].skip,kt)}}filterNestedSegmentTags(){let{ifd0:rt,exif:it,xmp:st,iptc:bt,icc:xt}=this;this.makerNote?it.deps.add(37500):it.skip.add(37500),this.userComment?it.deps.add(37510):it.skip.add(37510),st.enabled||rt.skip.add(700),bt.enabled||rt.skip.add(33723),xt.enabled||rt.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:rt,exif:it,gps:st,interop:bt}=this;bt.needed&&(it.deps.add(40965),rt.deps.add(40965)),it.needed&&rt.deps.add(34665),st.needed&&rt.deps.add(34853),this.tiff.enabled=H$1.some(xt=>this[xt].enabled===!0)||this.makerNote||this.userComment;for(let xt of H$1)this[xt].finalizeFilters()}get onlyTiff(){return!V$1.map(rt=>this[rt].enabled).some(rt=>rt===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let rt of z$1)this[rt].enabled&&!T$1.has(rt)&&P$1("segment parser",rt)}}function Q(nt,rt){let it,st,bt,xt,Et=[];for(bt of rt){for(xt of(it=E$1.get(bt),st=[],it))(nt.includes(xt[0])||nt.includes(xt[1]))&&st.push(xt[0]);st.length&&Et.push([bt,st])}return Et}function Z$1(nt,rt){return nt!==void 0?nt:rt!==void 0?rt:void 0}function ee(nt,rt){for(let it of rt)nt.add(it)}c$3(q,"default",$$1);class te{constructor(rt){c$3(this,"parsers",{}),c$3(this,"output",{}),c$3(this,"errors",[]),c$3(this,"pushToErrors",it=>this.errors.push(it)),this.options=q.useCached(rt)}async read(rt){this.file=await D$1(rt,this.options)}setup(){if(this.fileParser)return;let{file:rt}=this,it=rt.getUint16(0);for(let[st,bt]of w$2)if(bt.canHandle(rt,it))return this.fileParser=new bt(this.options,this.file,this.parsers),rt[st]=!0;this.file.close&&this.file.close(),g$1("Unknown file format")}async parse(){let{output:rt,errors:it}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),it.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&it.length>0&&(rt.errors=it),f$2(rt)}async executeParsers(){let{output:rt}=this;await this.fileParser.parse();let it=Object.values(this.parsers).map(async st=>{let bt=await st.parse();st.assignToOutput(rt,bt)});this.options.silentErrors&&(it=it.map(st=>st.catch(this.pushToErrors))),await Promise.all(it)}async extractThumbnail(){this.setup();let{options:rt,file:it}=this,st=T$1.get("tiff",rt);var bt;if(it.tiff?bt={start:0,type:"tiff"}:it.jpeg&&(bt=await this.fileParser.getOrFindSegment("tiff")),bt===void 0)return;let xt=await this.fileParser.ensureSegmentChunk(bt),Et=this.parsers.tiff=new st(xt,rt,it),kt=await Et.extractThumbnail();return it.close&&it.close(),kt}}async function ie(nt,rt){let it=new te(rt);return await it.read(nt),it.parse()}var ne=Object.freeze({__proto__:null,parse:ie,Exifr:te,fileParsers:w$2,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q});class se{constructor(rt,it,st){c$3(this,"errors",[]),c$3(this,"ensureSegmentChunk",async bt=>{let xt=bt.start,Et=bt.size||65536;if(this.file.chunked)if(this.file.available(xt,Et))bt.chunk=this.file.subarray(xt,Et);else try{bt.chunk=await this.file.readChunk(xt,Et)}catch(kt){g$1(`Couldn't read segment: ${JSON.stringify(bt)}. ${kt.message}`)}else this.file.byteLength>xt+Et?bt.chunk=this.file.subarray(xt,Et):bt.size===void 0?bt.chunk=this.file.subarray(xt):g$1("Segment unreachable: "+JSON.stringify(bt));return bt.chunk}),this.extendOptions&&this.extendOptions(rt),this.options=rt,this.file=it,this.parsers=st}injectSegment(rt,it){this.options[rt].enabled&&this.createParser(rt,it)}createParser(rt,it){let st=new(T$1.get(rt))(it,this.options,this.file);return this.parsers[rt]=st}createParsers(rt){for(let it of rt){let{type:st,chunk:bt}=it,xt=this.options[st];if(xt&&xt.enabled){let Et=this.parsers[st];Et&&Et.append||Et||this.createParser(st,bt)}}}async readSegments(rt){let it=rt.map(this.ensureSegmentChunk);await Promise.all(it)}}class re$1{static findPosition(rt,it){let st=rt.getUint16(it+2)+2,bt=typeof this.headerLength=="function"?this.headerLength(rt,it,st):this.headerLength,xt=it+bt,Et=st-bt;return{offset:it,length:st,headerLength:bt,start:xt,size:Et,end:xt+Et}}static parse(rt,it={}){return new this(rt,new q({[this.type]:it}),rt).parse()}normalizeInput(rt){return rt instanceof I$1?rt:new I$1(rt)}constructor(rt,it={},st){c$3(this,"errors",[]),c$3(this,"raw",new Map),c$3(this,"handleError",bt=>{if(!this.options.silentErrors)throw bt;this.errors.push(bt.message)}),this.chunk=this.normalizeInput(rt),this.file=st,this.type=this.constructor.type,this.globalOptions=this.options=it,this.localOptions=it[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(rt,it){let st=N$1.get(it),bt=B$1.get(it),xt=E$1.get(it),Et=this.options[it],kt=Et.reviveValues&&!!st,Lt=Et.translateValues&&!!bt,Pt=Et.translateKeys&&!!xt,Rt={};for(let[Dt,Bt]of rt)kt&&st.has(Dt)?Bt=st.get(Dt)(Bt):Lt&&bt.has(Dt)&&(Bt=this.translateValue(Bt,bt.get(Dt))),Pt&&xt.has(Dt)&&(Dt=xt.get(Dt)||Dt),Rt[Dt]=Bt;return Rt}translateValue(rt,it){return it[rt]||it.DEFAULT||rt}assignToOutput(rt,it){this.assignObjectToOutput(rt,this.constructor.type,it)}assignObjectToOutput(rt,it,st){if(this.globalOptions.mergeOutput)return Object.assign(rt,st);rt[it]?Object.assign(rt[it],st):rt[it]=st}}c$3(re$1,"headerLength",4),c$3(re$1,"type",void 0),c$3(re$1,"multiSegment",!1),c$3(re$1,"canHandle",()=>!1);function ae(nt){return nt===192||nt===194||nt===196||nt===219||nt===221||nt===218||nt===254}function oe(nt){return nt>=224&&nt<=239}function le(nt,rt,it){for(let[st,bt]of T$1)if(bt.canHandle(nt,rt,it))return st}class he extends se{constructor(...rt){super(...rt),c$3(this,"appSegments",[]),c$3(this,"jpegSegments",[]),c$3(this,"unknownSegments",[])}static canHandle(rt,it){return it===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(rt){rt===!0?(this.findAll=!0,this.wanted=new Set(T$1.keyList())):(rt=rt===void 0?T$1.keyList().filter(it=>this.options[it].enabled):rt.filter(it=>this.options[it].enabled&&T$1.has(it)),this.findAll=!1,this.remaining=new Set(rt),this.wanted=new Set(rt)),this.unfinishedMultiSegment=!1}async findAppSegments(rt=0,it){this.setupSegmentFinderArgs(it);let{file:st,findAll:bt,wanted:xt,remaining:Et}=this;if(!bt&&this.file.chunked&&(bt=Array.from(xt).some(kt=>{let Lt=T$1.get(kt),Pt=this.options[kt];return Lt.multiSegment&&Pt.multiSegment}),bt&&await this.file.readWhole()),rt=this.findAppSegmentsInRange(rt,st.byteLength),!this.options.onlyTiff&&st.chunked){let kt=!1;for(;Et.size>0&&!kt&&(st.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:Lt}=st,Pt=this.appSegments.some(Rt=>!this.file.available(Rt.offset||Rt.start,Rt.length||Rt.size));if(kt=rt>Lt&&!Pt?!await st.readNextChunk(rt):!await st.readNextChunk(Lt),(rt=this.findAppSegmentsInRange(rt,st.byteLength))===void 0)return}}}findAppSegmentsInRange(rt,it){it-=2;let st,bt,xt,Et,kt,Lt,{file:Pt,findAll:Rt,wanted:Dt,remaining:Bt,options:Ft}=this;for(;rt<it;rt++)if(Pt.getUint8(rt)===255){if(st=Pt.getUint8(rt+1),oe(st)){if(bt=Pt.getUint16(rt+2),xt=le(Pt,rt,bt),xt&&Dt.has(xt)&&(Et=T$1.get(xt),kt=Et.findPosition(Pt,rt),Lt=Ft[xt],kt.type=xt,this.appSegments.push(kt),!Rt&&(Et.multiSegment&&Lt.multiSegment?(this.unfinishedMultiSegment=kt.chunkNumber<kt.chunkCount,this.unfinishedMultiSegment||Bt.delete(xt)):Bt.delete(xt),Bt.size===0)))break;Ft.recordUnknownSegments&&(kt=re$1.findPosition(Pt,rt),kt.marker=st,this.unknownSegments.push(kt)),rt+=bt+1}else if(ae(st)){if(bt=Pt.getUint16(rt+2),st===218&&Ft.stopAfterSos!==!1)return;Ft.recordJpegSegments&&this.jpegSegments.push({offset:rt,length:bt,marker:st}),rt+=bt+1}}return rt}mergeMultiSegments(){if(!this.appSegments.some(it=>it.multiSegment))return;let rt=function(it,st){let bt,xt,Et,kt=new Map;for(let Lt=0;Lt<it.length;Lt++)bt=it[Lt],xt=bt[st],kt.has(xt)?Et=kt.get(xt):kt.set(xt,Et=[]),Et.push(bt);return Array.from(kt)}(this.appSegments,"type");this.mergedAppSegments=rt.map(([it,st])=>{let bt=T$1.get(it,this.options);return bt.handleMultiSegments?{type:it,chunk:bt.handleMultiSegments(st)}:st[0]})}getSegment(rt){return this.appSegments.find(it=>it.type===rt)}async getOrFindSegment(rt){let it=this.getSegment(rt);return it===void 0&&(await this.findAppSegments(0,[rt]),it=this.getSegment(rt)),it}}c$3(he,"type","jpeg"),w$2.set("jpeg",he);const ue=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ce extends re$1{parseHeader(){var rt=this.chunk.getUint16();rt===18761?this.le=!0:rt===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(rt,it,st=new Map){let{pick:bt,skip:xt}=this.options[it];bt=new Set(bt);let Et=bt.size>0,kt=xt.size===0,Lt=this.chunk.getUint16(rt);rt+=2;for(let Pt=0;Pt<Lt;Pt++){let Rt=this.chunk.getUint16(rt);if(Et){if(bt.has(Rt)&&(st.set(Rt,this.parseTag(rt,Rt,it)),bt.delete(Rt),bt.size===0))break}else!kt&&xt.has(Rt)||st.set(Rt,this.parseTag(rt,Rt,it));rt+=12}return st}parseTag(rt,it,st){let{chunk:bt}=this,xt=bt.getUint16(rt+2),Et=bt.getUint32(rt+4),kt=ue[xt];if(kt*Et<=4?rt+=8:rt=bt.getUint32(rt+8),(xt<1||xt>13)&&g$1(`Invalid TIFF value type. block: ${st.toUpperCase()}, tag: ${it.toString(16)}, type: ${xt}, offset ${rt}`),rt>bt.byteLength&&g$1(`Invalid TIFF value offset. block: ${st.toUpperCase()}, tag: ${it.toString(16)}, type: ${xt}, offset ${rt} is outside of chunk size ${bt.byteLength}`),xt===1)return bt.getUint8Array(rt,Et);if(xt===2)return m$1(bt.getString(rt,Et));if(xt===7)return bt.getUint8Array(rt,Et);if(Et===1)return this.parseTagValue(xt,rt);{let Lt=new(function(Rt){switch(Rt){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(xt))(Et),Pt=kt;for(let Rt=0;Rt<Et;Rt++)Lt[Rt]=this.parseTagValue(xt,rt),rt+=Pt;return Lt}}parseTagValue(rt,it){let{chunk:st}=this;switch(rt){case 1:return st.getUint8(it);case 3:return st.getUint16(it);case 4:return st.getUint32(it);case 5:return st.getUint32(it)/st.getUint32(it+4);case 6:return st.getInt8(it);case 8:return st.getInt16(it);case 9:return st.getInt32(it);case 10:return st.getInt32(it)/st.getInt32(it+4);case 11:return st.getFloat(it);case 12:return st.getDouble(it);case 13:return st.getUint32(it);default:g$1(`Invalid tiff type ${rt}`)}}}class fe extends ce{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1165519206&&rt.getUint16(it+8)===0}async parse(){this.parseHeader();let{options:rt}=this;return rt.ifd0.enabled&&await this.parseIfd0Block(),rt.exif.enabled&&await this.safeParse("parseExifBlock"),rt.gps.enabled&&await this.safeParse("parseGpsBlock"),rt.interop.enabled&&await this.safeParse("parseInteropBlock"),rt.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(rt){let it=this[rt]();return it.catch!==void 0&&(it=it.catch(this.handleError)),it}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let rt=this.chunk.getUint16(this.ifd0Offset),it=this.ifd0Offset+2+12*rt;this.ifd1Offset=this.chunk.getUint32(it)}}parseBlock(rt,it){let st=new Map;return this[it]=st,this.parseTags(rt,it,st),st}async parseIfd0Block(){if(this.ifd0)return;let{file:rt}=this;this.findIfd0Offset(),this.ifd0Offset<8&&g$1("Malformed EXIF data"),!rt.chunked&&this.ifd0Offset>rt.byteLength&&g$1(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${rt.byteLength}`),rt.tiff&&await rt.ensureChunk(this.ifd0Offset,S$2(this.options));let it=this.parseBlock(this.ifd0Offset,"ifd0");return it.size!==0?(this.exifOffset=it.get(34665),this.interopOffset=it.get(40965),this.gpsOffset=it.get(34853),this.xmp=it.get(700),this.iptc=it.get(33723),this.icc=it.get(34675),this.options.sanitize&&(it.delete(34665),it.delete(40965),it.delete(34853),it.delete(700),it.delete(33723),it.delete(34675)),it):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,S$2(this.options));let rt=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=rt.get(40965)),this.makerNote=rt.get(37500),this.userComment=rt.get(37510),this.options.sanitize&&(rt.delete(40965),rt.delete(37500),rt.delete(37510)),this.unpack(rt,41728),this.unpack(rt,41729),rt}unpack(rt,it){let st=rt.get(it);st&&st.length===1&&rt.set(it,st[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let rt=this.parseBlock(this.gpsOffset,"gps");return rt&&rt.has(2)&&rt.has(4)&&(rt.set("latitude",de(...rt.get(2),rt.get(1))),rt.set("longitude",de(...rt.get(4),rt.get(3)))),rt}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(rt=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||rt))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let rt=this.ifd1.get(513),it=this.ifd1.get(514);return this.chunk.getUint8Array(rt,it)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let rt,it,st,bt={};for(it of H$1)if(rt=this[it],!p$1(rt))if(st=this.canTranslate?this.translateBlock(rt,it):Object.fromEntries(rt),this.options.mergeOutput){if(it==="ifd1")continue;Object.assign(bt,st)}else bt[it]=st;return this.makerNote&&(bt.makerNote=this.makerNote),this.userComment&&(bt.userComment=this.userComment),bt}assignToOutput(rt,it){if(this.globalOptions.mergeOutput)Object.assign(rt,it);else for(let[st,bt]of Object.entries(it))this.assignObjectToOutput(rt,st,bt)}}function de(nt,rt,it,st){var bt=nt+rt/60+it/3600;return st!=="S"&&st!=="W"||(bt*=-1),bt}c$3(fe,"type","tiff"),c$3(fe,"headerLength",10),T$1.set("tiff",fe);var pe=Object.freeze({__proto__:null,default:ne,Exifr:te,fileParsers:w$2,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q,parse:ie});const ge={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},me=Object.assign({},ge,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Se(nt){let rt=new te(me);await rt.read(nt);let it=await rt.parse();if(it&&it.gps){let{latitude:st,longitude:bt}=it.gps;return{latitude:st,longitude:bt}}}const Ce=Object.assign({},ge,{tiff:!1,ifd1:!0,mergeOutput:!1});async function ye(nt){let rt=new te(Ce);await rt.read(nt);let it=await rt.extractThumbnail();return it&&a$4?s$6.from(it):it}async function be(nt){let rt=await this.thumbnail(nt);if(rt!==void 0){let it=new Blob([rt]);return URL.createObjectURL(it)}}const Ie=Object.assign({},ge,{firstChunkSize:4e4,ifd0:[274]});async function Pe(nt){let rt=new te(Ie);await rt.read(nt);let it=await rt.parse();if(it&&it.ifd0)return it.ifd0[274]}const ke=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let we=!0,Te=!0;if(typeof navigator=="object"){let nt=navigator.userAgent;if(nt.includes("iPad")||nt.includes("iPhone")){let rt=nt.match(/OS (\d+)_(\d+)/);if(rt){let[,it,st]=rt;we=Number(it)+.1*Number(st)<13.4,Te=!1}}else if(nt.includes("OS X 10")){let[,rt]=nt.match(/OS X 10[_.](\d+)/);we=Te=Number(rt)<15}if(nt.includes("Chrome/")){let[,rt]=nt.match(/Chrome\/(\d+)/);we=Te=Number(rt)<81}else if(nt.includes("Firefox/")){let[,rt]=nt.match(/Firefox\/(\d+)/);we=Te=Number(rt)<77}}async function Ae(nt){let rt=await Pe(nt);return Object.assign({canvas:we,css:Te},ke[rt])}class De extends I$1{constructor(...rt){super(...rt),c$3(this,"ranges",new Oe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(rt,it,st){if(rt===0&&this.byteLength===0&&st){let bt=new DataView(st.buffer||st,st.byteOffset,st.byteLength);this._swapDataView(bt)}else{let bt=rt+it;if(bt>this.byteLength){let{dataView:xt}=this._extend(bt);this._swapDataView(xt)}}}_extend(rt){let it;it=a$4?s$6.allocUnsafe(rt):new Uint8Array(rt);let st=new DataView(it.buffer,it.byteOffset,it.byteLength);return it.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:it,dataView:st}}subarray(rt,it,st=!1){return it=it||this._lengthToEnd(rt),st&&this._tryExtend(rt,it),this.ranges.add(rt,it),super.subarray(rt,it)}set(rt,it,st=!1){st&&this._tryExtend(it,rt.byteLength,rt);let bt=super.set(rt,it);return this.ranges.add(it,bt.byteLength),bt}async ensureChunk(rt,it){this.chunked&&(this.ranges.available(rt,it)||await this.readChunk(rt,it))}available(rt,it){return this.ranges.available(rt,it)}}class Oe{constructor(){c$3(this,"list",[])}get length(){return this.list.length}add(rt,it,st=0){let bt=rt+it,xt=this.list.filter(Et=>xe(rt,Et.offset,bt)||xe(rt,Et.end,bt));if(xt.length>0){rt=Math.min(rt,...xt.map(kt=>kt.offset)),bt=Math.max(bt,...xt.map(kt=>kt.end)),it=bt-rt;let Et=xt.shift();Et.offset=rt,Et.length=it,Et.end=bt,this.list=this.list.filter(kt=>!xt.includes(kt))}else this.list.push({offset:rt,length:it,end:bt})}available(rt,it){let st=rt+it;return this.list.some(bt=>bt.offset<=rt&&st<=bt.end)}}function xe(nt,rt,it){return nt<=rt&&rt<=it}class ve extends De{constructor(rt,it){super(0),c$3(this,"chunksRead",0),this.input=rt,this.options=it}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(rt=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let it=this.options.chunkSize,st=await this.readChunk(rt,it);return!!st&&st.byteLength===it}async readChunk(rt,it){if(this.chunksRead++,(it=this.safeWrapAddress(rt,it))!==0)return this._readChunk(rt,it)}safeWrapAddress(rt,it){return this.size!==void 0&&rt+it>this.size?Math.max(0,this.size-rt):it}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}A$1.set("blob",class extends ve{async readWhole(){this.chunked=!1;let nt=await R$1(this.input);this._swapArrayBuffer(nt)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(nt,rt){let it=rt?nt+rt:void 0,st=this.input.slice(nt,it),bt=await R$1(st);return this.set(bt,nt,!0)}});var Me=Object.freeze({__proto__:null,default:pe,Exifr:te,fileParsers:w$2,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});A$1.set("url",class extends ve{async readWhole(){this.chunked=!1;let nt=await M$1(this.input);nt instanceof ArrayBuffer?this._swapArrayBuffer(nt):nt instanceof Uint8Array&&this._swapBuffer(nt)}async _readChunk(nt,rt){let it=rt?nt+rt-1:void 0,st=this.options.httpHeaders||{};(nt||it)&&(st.range=`bytes=${[nt,it].join("-")}`);let bt=await h$2(this.input,{headers:st}),xt=await bt.arrayBuffer(),Et=xt.byteLength;if(bt.status!==416)return Et!==rt&&(this.size=nt+Et),this.set(xt,nt,!0)}});I$1.prototype.getUint64=function(nt){let rt=this.getUint32(nt),it=this.getUint32(nt+4);return rt<1048575?rt<<32|it:typeof r$3!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),r$3(rt)<<r$3(32)|r$3(it)):void g$1("Trying to read 64b value but JS can only handle 53b numbers.")};class Re extends se{parseBoxes(rt=0){let it=[];for(;rt<this.file.byteLength-4;){let st=this.parseBoxHead(rt);if(it.push(st),st.length===0)break;rt+=st.length}return it}parseSubBoxes(rt){rt.boxes=this.parseBoxes(rt.start)}findBox(rt,it){return rt.boxes===void 0&&this.parseSubBoxes(rt),rt.boxes.find(st=>st.kind===it)}parseBoxHead(rt){let it=this.file.getUint32(rt),st=this.file.getString(rt+4,4),bt=rt+8;return it===1&&(it=this.file.getUint64(rt+8),bt+=8),{offset:rt,length:it,kind:st,start:bt}}parseBoxFullHead(rt){if(rt.version!==void 0)return;let it=this.file.getUint32(rt.start);rt.version=it>>24,rt.start+=4}}class Le extends Re{static canHandle(rt,it){if(it!==0)return!1;let st=rt.getUint16(2);if(st>50)return!1;let bt=16,xt=[];for(;bt<st;)xt.push(rt.getString(bt,4)),bt+=4;return xt.includes(this.type)}async parse(){let rt=this.file.getUint32(0),it=this.parseBoxHead(rt);for(;it.kind!=="meta";)rt+=it.length,await this.file.ensureChunk(rt,16),it=this.parseBoxHead(rt);await this.file.ensureChunk(it.offset,it.length),this.parseBoxFullHead(it),this.parseSubBoxes(it),this.options.icc.enabled&&await this.findIcc(it),this.options.tiff.enabled&&await this.findExif(it)}async registerSegment(rt,it,st){await this.file.ensureChunk(it,st);let bt=this.file.subarray(it,st);this.createParser(rt,bt)}async findIcc(rt){let it=this.findBox(rt,"iprp");if(it===void 0)return;let st=this.findBox(it,"ipco");if(st===void 0)return;let bt=this.findBox(st,"colr");bt!==void 0&&await this.registerSegment("icc",bt.offset+12,bt.length)}async findExif(rt){let it=this.findBox(rt,"iinf");if(it===void 0)return;let st=this.findBox(rt,"iloc");if(st===void 0)return;let bt=this.findExifLocIdInIinf(it),xt=this.findExtentInIloc(st,bt);if(xt===void 0)return;let[Et,kt]=xt;await this.file.ensureChunk(Et,kt);let Lt=4+this.file.getUint32(Et);Et+=Lt,kt-=Lt,await this.registerSegment("tiff",Et,kt)}findExifLocIdInIinf(rt){this.parseBoxFullHead(rt);let it,st,bt,xt,Et=rt.start,kt=this.file.getUint16(Et);for(Et+=2;kt--;){if(it=this.parseBoxHead(Et),this.parseBoxFullHead(it),st=it.start,it.version>=2&&(bt=it.version===3?4:2,xt=this.file.getString(st+bt+2,4),xt==="Exif"))return this.file.getUintBytes(st,bt);Et+=it.length}}get8bits(rt){let it=this.file.getUint8(rt);return[it>>4,15&it]}findExtentInIloc(rt,it){this.parseBoxFullHead(rt);let st=rt.start,[bt,xt]=this.get8bits(st++),[Et,kt]=this.get8bits(st++),Lt=rt.version===2?4:2,Pt=rt.version===1||rt.version===2?2:0,Rt=kt+bt+xt,Dt=rt.version===2?4:2,Bt=this.file.getUintBytes(st,Dt);for(st+=Dt;Bt--;){let Ft=this.file.getUintBytes(st,Lt);st+=Lt+Pt+2+Et;let Yt=this.file.getUint16(st);if(st+=2,Ft===it)return Yt>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(st+kt,bt),this.file.getUintBytes(st+kt+bt,xt)];st+=Yt*Rt}}}class Ue extends Le{}c$3(Ue,"type","heic");class Fe extends Le{}c$3(Fe,"type","avif"),w$2.set("heic",Ue),w$2.set("avif",Fe),U(E$1,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),U(E$1,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),U(E$1,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),U(B$1,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Ee=U(B$1,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Be={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ee.set(37392,Be),Ee.set(41488,Be);const Ne={0:"Normal",1:"Low",2:"High"};function Ge(nt){return typeof nt=="object"&&nt.length!==void 0?nt[0]:nt}function Ve(nt){let rt=Array.from(nt).slice(1);return rt[1]>15&&(rt=rt.map(it=>String.fromCharCode(it))),rt[2]!=="0"&&rt[2]!==0||rt.pop(),rt.join(".")}function ze(nt){if(typeof nt=="string"){var[rt,it,st,bt,xt,Et]=nt.trim().split(/[-: ]/g).map(Number),kt=new Date(rt,it-1,st);return Number.isNaN(bt)||Number.isNaN(xt)||Number.isNaN(Et)||(kt.setHours(bt),kt.setMinutes(xt),kt.setSeconds(Et)),Number.isNaN(+kt)?nt:kt}}function He(nt){if(typeof nt=="string")return nt;let rt=[];if(nt[1]===0&&nt[nt.length-1]===0)for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it+1],nt[it]));else for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it],nt[it+1]));return m$1(String.fromCodePoint(...rt))}function je(nt,rt){return nt<<8|rt}Ee.set(41992,Ne),Ee.set(41993,Ne),Ee.set(41994,Ne),U(N$1,["ifd0","ifd1"],[[50827,function(nt){return typeof nt!="string"?b(nt):nt}],[306,ze],[40091,He],[40092,He],[40093,He],[40094,He],[40095,He]]),U(N$1,"exif",[[40960,Ve],[36864,Ve],[36867,ze],[36868,ze],[40962,Ge],[40963,Ge]]),U(N$1,"gps",[[0,nt=>Array.from(nt).join(".")],[7,nt=>Array.from(nt).join(":")]]);class We extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1752462448&&rt.getString(it+4,20)==="http://ns.adobe.com/"}static headerLength(rt,it){return rt.getString(it+4,34)==="http://ns.adobe.com/xmp/extension/"?79:4+28+1}static findPosition(rt,it){let st=super.findPosition(rt,it);return st.multiSegment=st.extended=st.headerLength===79,st.multiSegment?(st.chunkCount=rt.getUint8(it+72),st.chunkNumber=rt.getUint8(it+76),rt.getUint8(it+77)!==0&&st.chunkNumber++):(st.chunkCount=1/0,st.chunkNumber=-1),st}static handleMultiSegments(rt){return rt.map(it=>it.chunk.getString()).join("")}normalizeInput(rt){return typeof rt=="string"?rt:I$1.from(rt).getString()}parse(rt=this.chunk){if(!this.localOptions.parse)return rt;rt=function(xt){let Et={},kt={};for(let Lt of Ze)Et[Lt]=[],kt[Lt]=0;return xt.replace(et,(Lt,Pt,Rt)=>{if(Pt==="<"){let Dt=++kt[Rt];return Et[Rt].push(Dt),`${Lt}#${Dt}`}return`${Lt}#${Et[Rt].pop()}`})}(rt);let it=Xe.findAll(rt,"rdf","Description");it.length===0&&it.push(new Xe("rdf","Description",void 0,rt));let st,bt={};for(let xt of it)for(let Et of xt.properties)st=Je(Et.ns,bt),_e(Et,st);return function(xt){let Et;for(let kt in xt)Et=xt[kt]=f$2(xt[kt]),Et===void 0&&delete xt[kt];return f$2(xt)}(bt)}assignToOutput(rt,it){if(this.localOptions.parse)for(let[st,bt]of Object.entries(it))switch(st){case"tiff":this.assignObjectToOutput(rt,"ifd0",bt);break;case"exif":this.assignObjectToOutput(rt,"exif",bt);break;case"xmlns":break;default:this.assignObjectToOutput(rt,st,bt)}else rt.xmp=it}}c$3(We,"type","xmp"),c$3(We,"multiSegment",!0),T$1.set("xmp",We);class Ke{static findAll(rt){return qe(rt,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Ke.unpackMatch)}static unpackMatch(rt){let it=rt[1],st=rt[2],bt=rt[3].slice(1,-1);return bt=Qe(bt),new Ke(it,st,bt)}constructor(rt,it,st){this.ns=rt,this.name=it,this.value=st}serialize(){return this.value}}class Xe{static findAll(rt,it,st){if(it!==void 0||st!==void 0){it=it||"[\\w\\d-]+",st=st||"[\\w\\d-]+";var bt=new RegExp(`<(${it}):(${st})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else bt=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return qe(rt,bt).map(Xe.unpackMatch)}static unpackMatch(rt){let it=rt[1],st=rt[2],bt=rt[4],xt=rt[8];return new Xe(it,st,bt,xt)}constructor(rt,it,st,bt){this.ns=rt,this.name=it,this.attrString=st,this.innerXml=bt,this.attrs=Ke.findAll(st),this.children=Xe.findAll(bt),this.value=this.children.length===0?Qe(bt):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:rt,name:it}=this;return rt==="rdf"&&(it==="Seq"||it==="Bag"||it==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return $e(this.children.map(Ye));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let rt={};for(let it of this.properties)_e(it,rt);return this.value!==void 0&&(rt.value=this.value),f$2(rt)}}function _e(nt,rt){let it=nt.serialize();it!==void 0&&(rt[nt.name]=it)}var Ye=nt=>nt.serialize(),$e=nt=>nt.length===1?nt[0]:nt,Je=(nt,rt)=>rt[nt]?rt[nt]:rt[nt]={};function qe(nt,rt){let it,st=[];if(!nt)return st;for(;(it=rt.exec(nt))!==null;)st.push(it);return st}function Qe(nt){if(function(st){return st==null||st==="null"||st==="undefined"||st===""||st.trim()===""}(nt))return;let rt=Number(nt);if(!Number.isNaN(rt))return rt;let it=nt.toLowerCase();return it==="true"||it!=="false"&&nt.trim()}const Ze=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],et=new RegExp(`(<|\\/)(${Ze.join("|")})`,"g");var tt=Object.freeze({__proto__:null,default:Me,Exifr:te,fileParsers:w$2,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});let at=l$6("fs",nt=>nt.promises);A$1.set("fs",class extends ve{async readWhole(){this.chunked=!1,this.fs=await at;let nt=await this.fs.readFile(this.input);this._swapBuffer(nt)}async readChunked(){this.chunked=!0,this.fs=await at,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(nt,rt){this.fh===void 0&&await this.open(),nt+rt>this.size&&(rt=this.size-nt);var it=this.subarray(nt,rt,!0);return await this.fh.read(it.dataView,0,rt,nt),it}async close(){if(this.fh){let nt=this.fh;this.fh=void 0,await nt.close()}}});A$1.set("base64",class extends ve{constructor(...nt){super(...nt),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(nt,rt){let it,st,bt=this.input;nt===void 0?(nt=0,it=0,st=0):(it=4*Math.floor(nt/3),st=nt-it/4*3),rt===void 0&&(rt=this.size);let xt=nt+rt,Et=it+4*Math.ceil(xt/3);bt=bt.slice(it,Et);let kt=Math.min(rt,this.size-nt);if(a$4){let Lt=s$6.from(bt,"base64").slice(st,st+kt);return this.set(Lt,nt,!0)}{let Lt=this.subarray(nt,kt,!0),Pt=atob(bt),Rt=Lt.toUint8();for(let Dt=0;Dt<kt;Dt++)Rt[Dt]=Pt.charCodeAt(st+Dt);return Lt}}});class ot extends se{static canHandle(rt,it){return it===18761||it===19789}extendOptions(rt){let{ifd0:it,xmp:st,iptc:bt,icc:xt}=rt;st.enabled&&it.deps.add(700),bt.enabled&&it.deps.add(33723),xt.enabled&&it.deps.add(34675),it.finalizeFilters()}async parse(){let{tiff:rt,xmp:it,iptc:st,icc:bt}=this.options;if(rt.enabled||it.enabled||st.enabled||bt.enabled){let xt=Math.max(S$2(this.options),this.options.chunkSize);await this.file.ensureChunk(0,xt),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(rt){if(this.parsers.tiff[rt]){let it=this.parsers.tiff[rt];this.injectSegment(rt,it)}}}c$3(ot,"type","tiff"),w$2.set("tiff",ot);let lt=l$6("zlib");const ht=["ihdr","iccp","text","itxt","exif"];class ut extends se{constructor(...rt){super(...rt),c$3(this,"catchError",it=>this.errors.push(it)),c$3(this,"metaChunks",[]),c$3(this,"unknownChunks",[])}static canHandle(rt,it){return it===35152&&rt.getUint32(0)===2303741511&&rt.getUint32(4)===218765834}async parse(){let{file:rt}=this;await this.findPngChunksInRange(8,rt.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(rt,it){let{file:st}=this;for(;rt<it;){let bt=st.getUint32(rt),xt=st.getUint32(rt+4),Et=st.getString(rt+4,4).toLowerCase(),kt=bt+4+4+4,Lt={type:Et,offset:rt,length:kt,start:rt+4+4,size:bt,marker:xt};ht.includes(Et)?this.metaChunks.push(Lt):this.unknownChunks.push(Lt),rt+=kt}}parseTextChunks(){let rt=this.metaChunks.filter(it=>it.type==="text");for(let it of rt){let[st,bt]=this.file.getString(it.start,it.size).split("\0");this.injectKeyValToIhdr(st,bt)}}injectKeyValToIhdr(rt,it){let st=this.parsers.ihdr;st&&st.raw.set(rt,it)}findIhdr(){let rt=this.metaChunks.find(it=>it.type==="ihdr");rt&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",rt.chunk)}async findExif(){let rt=this.metaChunks.find(it=>it.type==="exif");rt&&this.injectSegment("tiff",rt.chunk)}async findXmp(){let rt=this.metaChunks.filter(it=>it.type==="itxt");for(let it of rt)it.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",it.chunk)}async findIcc(){let rt=this.metaChunks.find(kt=>kt.type==="iccp");if(!rt)return;let{chunk:it}=rt,st=it.getUint8Array(0,81),bt=0;for(;bt<80&&st[bt]!==0;)bt++;let xt=bt+2,Et=it.getString(0,bt);if(this.injectKeyValToIhdr("ProfileName",Et),n$8){let kt=await lt,Lt=it.getUint8Array(xt);Lt=kt.inflateSync(Lt),this.injectSegment("icc",Lt)}}}c$3(ut,"type","png"),w$2.set("png",ut),U(E$1,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),F(E$1,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let ct=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];F(E$1,"ifd0",ct),F(E$1,"exif",ct),U(B$1,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class ft extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===224&&rt.getUint32(it+4)===1246120262&&rt.getUint8(it+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}c$3(ft,"type","jfif"),c$3(ft,"headerLength",9),T$1.set("jfif",ft),U(E$1,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class dt extends re$1{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}c$3(dt,"type","ihdr"),T$1.set("ihdr",dt),U(E$1,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),U(B$1,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class pt extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===226&&rt.getUint32(it+4)===1229144927}static findPosition(rt,it){let st=super.findPosition(rt,it);return st.chunkNumber=rt.getUint8(it+16),st.chunkCount=rt.getUint8(it+17),st.multiSegment=st.chunkCount>1,st}static handleMultiSegments(rt){return function(it){let st=function(bt){let xt=bt[0].constructor,Et=0;for(let Pt of bt)Et+=Pt.length;let kt=new xt(Et),Lt=0;for(let Pt of bt)kt.set(Pt,Lt),Lt+=Pt.length;return kt}(it.map(bt=>bt.chunk.toUint8()));return new I$1(st)}(rt)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:rt}=this;this.chunk.byteLength<84&&g$1("ICC header is too short");for(let[it,st]of Object.entries(gt)){it=parseInt(it,10);let bt=st(this.chunk,it);bt!=="\0\0\0\0"&&rt.set(it,bt)}}parseTags(){let rt,it,st,bt,xt,{raw:Et}=this,kt=this.chunk.getUint32(128),Lt=132,Pt=this.chunk.byteLength;for(;kt--;){if(rt=this.chunk.getString(Lt,4),it=this.chunk.getUint32(Lt+4),st=this.chunk.getUint32(Lt+8),bt=this.chunk.getString(it,4),it+st>Pt)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");xt=this.parseTag(bt,it,st),xt!==void 0&&xt!=="\0\0\0\0"&&Et.set(rt,xt),Lt+=12}}parseTag(rt,it,st){switch(rt){case"desc":return this.parseDesc(it);case"mluc":return this.parseMluc(it);case"text":return this.parseText(it,st);case"sig ":return this.parseSig(it)}if(!(it+st>this.chunk.byteLength))return this.chunk.getUint8Array(it,st)}parseDesc(rt){let it=this.chunk.getUint32(rt+8)-1;return m$1(this.chunk.getString(rt+12,it))}parseText(rt,it){return m$1(this.chunk.getString(rt+8,it-8))}parseSig(rt){return m$1(this.chunk.getString(rt+8,4))}parseMluc(rt){let{chunk:it}=this,st=it.getUint32(rt+8),bt=it.getUint32(rt+12),xt=rt+16,Et=[];for(let kt=0;kt<st;kt++){let Lt=it.getString(xt+0,2),Pt=it.getString(xt+2,2),Rt=it.getUint32(xt+4),Dt=it.getUint32(xt+8)+rt,Bt=m$1(it.getUnicodeString(Dt,Rt));Et.push({lang:Lt,country:Pt,text:Bt}),xt+=bt}return st===1?Et[0].text:Et}translateValue(rt,it){return typeof rt=="string"?it[rt]||it[rt.toLowerCase()]||rt:it[rt]||rt}}c$3(pt,"type","icc"),c$3(pt,"multiSegment",!0),c$3(pt,"headerLength",18);const gt={4:mt,8:function(nt,rt){return[nt.getUint8(rt),nt.getUint8(rt+1)>>4,nt.getUint8(rt+1)%16].map(it=>it.toString(10)).join(".")},12:mt,16:mt,20:mt,24:function(nt,rt){const it=nt.getUint16(rt),st=nt.getUint16(rt+2)-1,bt=nt.getUint16(rt+4),xt=nt.getUint16(rt+6),Et=nt.getUint16(rt+8),kt=nt.getUint16(rt+10);return new Date(Date.UTC(it,st,bt,xt,Et,kt))},36:mt,40:mt,48:mt,52:mt,64:(nt,rt)=>nt.getUint32(rt),80:mt};function mt(nt,rt){return m$1(nt.getString(rt,4))}T$1.set("icc",pt),U(E$1,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const St={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ct={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};U(B$1,"icc",[[4,St],[12,Ct],[40,Object.assign({},St,Ct)],[48,St],[80,St],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class yt extends re$1{static canHandle(rt,it,st){return rt.getUint8(it+1)===237&&rt.getString(it+4,9)==="Photoshop"&&this.containsIptc8bim(rt,it,st)!==void 0}static headerLength(rt,it,st){let bt,xt=this.containsIptc8bim(rt,it,st);if(xt!==void 0)return bt=rt.getUint8(it+xt+7),bt%2!=0&&(bt+=1),bt===0&&(bt=4),xt+8+bt}static containsIptc8bim(rt,it,st){for(let bt=0;bt<st;bt++)if(this.isIptcSegmentHead(rt,it+bt))return bt}static isIptcSegmentHead(rt,it){return rt.getUint8(it)===56&&rt.getUint32(it)===943868237&&rt.getUint16(it+4)===1028}parse(){let{raw:rt}=this,it=this.chunk.byteLength-1,st=!1;for(let bt=0;bt<it;bt++)if(this.chunk.getUint8(bt)===28&&this.chunk.getUint8(bt+1)===2){st=!0;let xt=this.chunk.getUint16(bt+3),Et=this.chunk.getUint8(bt+2),kt=this.chunk.getLatin1String(bt+5,xt);rt.set(Et,this.pluralizeValue(rt.get(Et),kt)),bt+=4+xt}else if(st)break;return this.translate(),this.output}pluralizeValue(rt,it){return rt!==void 0?rt instanceof Array?(rt.push(it),rt):[rt,it]:it}}c$3(yt,"type","iptc"),c$3(yt,"translateValues",!1),c$3(yt,"reviveValues",!1),T$1.set("iptc",yt),U(E$1,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),U(B$1,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);class GithubClient{constructor(rt){lc(this,"authToken");lc(this,"_shas",{});this.authToken=rt}b64EncodeUnicode(rt){return btoa(encodeURIComponent(rt).replace(/%([0-9A-F]{2})/g,function(it,st){return String.fromCharCode(parseInt(st,16))}))}b64DecodeUnicode(rt){return decodeURIComponent(Array.prototype.map.call(atob(rt),function(it){return"%"+("00"+it.charCodeAt(0).toString(16)).slice(-2)}).join(""))}user(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}async isCollaborator(rt,it,st){let bt=`https://api.github.com/repos/${rt}/${it}/collaborators/${st}`,xt=await fetch(bt,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}});return xt.ok&&xt.status===204}organizations(){return fetch("https://api.github.com/user/orgs",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}repos(rt="",it=""){let st=rt?`users/${rt}`:it?`orgs/${it}`:"user";return fetch(`https://api.github.com/${st}/repos?per_page=100`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(bt=>bt.json())}async createRepository({org:rt=null,name:it="",description:st="",auto_init:bt=!0}){let xt=rt?`https://api.github.com/orgs/${rt}/repos`:"https://api.github.com/user/repos";console.log(`createUserRepository: org=${rt} name=${it} description=${st} auto_init=${bt} url=${xt}`);let Et=await fetch(xt,{method:"POST",body:JSON.stringify({name:it,description:st,auto_init:bt}),headers:{Authorization:`Token ${this.authToken}`}});return{status:Et.status,statusText:Et.statusText}}branches(rt,it){return fetch(`https://api.github.com/repos/${rt}/${it}/branches`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(st=>st.json())}async getFile(rt,it,st,bt){let xt,Et=`https://api.github.com/repos/${rt}/${it}/contents/${st}`;bt&&(Et+=`?ref=${bt}`);let kt=await fetch(Et,{cache:"no-cache",headers:{Authorization:`Token ${this.authToken}`}});return kt.ok&&(kt=await kt.json(),xt=decodeURIComponent(escape(atob(kt.content)))),Promise.resolve({content:xt,sha:kt.sha})}async getSha(rt,it,st,bt){console.log(`getSha: acct=${rt} repo=${it} path=${st} ref=${bt}`);let xt=`https://api.github.com/repos/${rt}/${it}/contents/${st}`;bt&&(xt+=`?ref=${bt}`);let Et=await fetch(xt,{headers:{Authorization:`Token ${this.authToken}`}});return Et.ok&&(Et=await Et.json()),Et.sha}async putFile(rt,it,st,bt,xt,Et=!1,kt=""){let Lt=`https://api.github.com/repos/${rt}/${it}/contents/${st}`,Pt=`${rt}/${it}/${xt}/${st}`;kt=kt||this._shas[Pt]||await this.getSha(rt,it,st,xt),console.log(`putFile: acct=${rt} repo=${it} path=${st} ref=${xt} sha=${kt} isBinaryString=${Et}`);let Rt={message:"API commit",content:Et?btoa(bt):this.b64EncodeUnicode(bt)};xt&&(Rt.branch=xt),kt&&(Rt.sha=kt);let Dt=await fetch(Lt,{method:"PUT",body:JSON.stringify(Rt),headers:{Authorization:`Token ${this.authToken}`}});return Dt.ok?(kt=(await Dt.json()).content.sha,this._shas[Pt]=kt):console.log(Dt),{status:Dt.status,statusText:Dt.statusText,sha:kt}}async deleteFile(rt,it,st,bt,xt=""){console.log(`deleteFile: acct=${rt} repo=${it} path=${st} sha=${xt}`),xt=xt||await this.getSha(rt,it,st,bt);let Et=`https://api.github.com/repos/${rt}/${it}/contents/${st}`,kt={message:"API commit",sha:xt},Lt=await fetch(Et,{method:"DELETE",body:JSON.stringify(kt),headers:{Authorization:`Token ${this.authToken}`}});Lt=await Lt.json()}async defaultBranch(rt,it){let st=null,bt=`https://api.github.com/repos/${rt}/${it}`,xt=await fetch(bt,{headers:{Authorization:`Token ${this.authToken}`}});return xt.ok&&(xt=await xt.json(),st=xt.default_branch),st}async dirlist(rt,it,st,bt){var Pt;st=st||"",bt=bt||await this.defaultBranch(rt,it);let xt=[],Et=`https://api.github.com/repos/${rt}/${it}/git/trees/${bt}`,kt={Authorization:`Token ${this.authToken}`,Accept:"application/vnd.github.v3+json","If-None-Match":""},Lt=st.split("/").filter(Rt=>Rt);for(let Rt=0;Rt<Lt.length;Rt++){let Dt=await fetch(Et,{headers:kt}),Bt=Dt.ok?await Dt.json():{},Ft=Bt?(Pt=Bt.tree)==null?void 0:Pt.find(Yt=>Yt.path===Lt[Rt]):null;if(Et=Ft?Ft.url:null,!Et)break}if(Et){let Rt=await fetch(Et,{headers:kt});xt=((Rt.ok?await Rt.json():{}).tree||[]).map(Bt=>({name:Bt.path,sha:Bt.sha,type:Bt.type==="tree"?"dir":"file"}))}return xt}async fullPath(rt,it,st,bt,xt=!1){let Et=st.split("/").filter(Rt=>Rt),kt=Et[Et.length-1],Lt=await this.dirlist(rt,it,Et.join("/"),bt);if(Lt.length===0&&(Et.pop(),Lt=await this.dirlist(rt,it,Et.join("/"),bt)),!xt){let Rt=[kt,`${kt}.md`,"README.md"];for(let Dt=0;Dt<Rt.length;Dt++)if(Lt.find(Bt=>Bt.type==="file"&&Bt.name===Rt[Dt])){Et.push(Rt[Dt]);break}}return Et.join("/")}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing$1(nt){return typeof nt>"u"||nt===null}function isObject$2(nt){return typeof nt=="object"&&nt!==null}function toArray$1(nt){return Array.isArray(nt)?nt:isNothing$1(nt)?[]:[nt]}function extend$2(nt,rt){var it,st,bt,xt;if(rt)for(xt=Object.keys(rt),it=0,st=xt.length;it<st;it+=1)bt=xt[it],nt[bt]=rt[bt];return nt}function repeat$1(nt,rt){var it="",st;for(st=0;st<rt;st+=1)it+=nt;return it}function isNegativeZero$1(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1$1=isNothing$1,isObject_1$1=isObject$2,toArray_1$1=toArray$1,repeat_1$1=repeat$1,isNegativeZero_1$1=isNegativeZero$1,extend_1$1=extend$2,common$3={isNothing:isNothing_1$1,isObject:isObject_1$1,toArray:toArray_1$1,repeat:repeat_1$1,isNegativeZero:isNegativeZero_1$1,extend:extend_1$1};function formatError$1(nt,rt){var it="",st=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),st+" "+it):st}function YAMLException$1$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError$1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1$1.prototype=Object.create(Error.prototype);YAMLException$1$1.prototype.constructor=YAMLException$1$1;YAMLException$1$1.prototype.toString=function(rt){return this.name+": "+formatError$1(this,rt)};var exception$1=YAMLException$1$1;function getLine$1(nt,rt,it,st,bt){var xt="",Et="",kt=Math.floor(bt/2)-1;return st-rt>kt&&(xt=" ... ",rt=st-kt+xt.length),it-st>kt&&(Et=" ...",it=st+kt-Et.length),{str:xt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Et,pos:st-rt+xt.length}}function padStart$1(nt,rt){return common$3.repeat(" ",rt-nt.length)+nt}function makeSnippet$1(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,st=[0],bt=[],xt,Et=-1;xt=it.exec(nt.buffer);)bt.push(xt.index),st.push(xt.index+xt[0].length),nt.position<=xt.index&&Et<0&&(Et=st.length-2);Et<0&&(Et=st.length-1);var kt="",Lt,Pt,Rt=Math.min(nt.line+rt.linesAfter,bt.length).toString().length,Dt=rt.maxLength-(rt.indent+Rt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Et-Lt<0);Lt++)Pt=getLine$1(nt.buffer,st[Et-Lt],bt[Et-Lt],nt.position-(st[Et]-st[Et-Lt]),Dt),kt=common$3.repeat(" ",rt.indent)+padStart$1((nt.line-Lt+1).toString(),Rt)+" | "+Pt.str+`
`+kt;for(Pt=getLine$1(nt.buffer,st[Et],bt[Et],nt.position,Dt),kt+=common$3.repeat(" ",rt.indent)+padStart$1((nt.line+1).toString(),Rt)+" | "+Pt.str+`
`,kt+=common$3.repeat("-",rt.indent+Rt+3+Pt.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Et+Lt>=bt.length);Lt++)Pt=getLine$1(nt.buffer,st[Et+Lt],bt[Et+Lt],nt.position-(st[Et]-st[Et+Lt]),Dt),kt+=common$3.repeat(" ",rt.indent)+padStart$1((nt.line+Lt+1).toString(),Rt)+" | "+Pt.str+`
`;return kt.replace(/\n$/,"")}var snippet$1=makeSnippet$1,TYPE_CONSTRUCTOR_OPTIONS$1=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS$1=["scalar","sequence","mapping"];function compileStyleAliases$1(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(st){rt[String(st)]=it})}),rt}function Type$1$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS$1.indexOf(it)===-1)throw new exception$1('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases$1(rt.styleAliases||null),YAML_NODE_KINDS$1.indexOf(this.kind)===-1)throw new exception$1('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type$1=Type$1$1;function compileList$1(nt,rt){var it=[];return nt[rt].forEach(function(st){var bt=it.length;it.forEach(function(xt,Et){xt.tag===st.tag&&xt.kind===st.kind&&xt.multi===st.multi&&(bt=Et)}),it[bt]=st}),it}function compileMap$1(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function st(bt){bt.multi?(nt.multi[bt.kind].push(bt),nt.multi.fallback.push(bt)):nt[bt.kind][bt.tag]=nt.fallback[bt.tag]=bt}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(st);return nt}function Schema$1$1(nt){return this.extend(nt)}Schema$1$1.prototype.extend=function(rt){var it=[],st=[];if(rt instanceof type$1)st.push(rt);else if(Array.isArray(rt))st=st.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(st=st.concat(rt.explicit));else throw new exception$1("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(xt){if(!(xt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(xt.loadKind&&xt.loadKind!=="scalar")throw new exception$1("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(xt.multi)throw new exception$1("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(xt){if(!(xt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var bt=Object.create(Schema$1$1.prototype);return bt.implicit=(this.implicit||[]).concat(it),bt.explicit=(this.explicit||[]).concat(st),bt.compiledImplicit=compileList$1(bt,"implicit"),bt.compiledExplicit=compileList$1(bt,"explicit"),bt.compiledTypeMap=compileMap$1(bt.compiledImplicit,bt.compiledExplicit),bt};var schema$1=Schema$1$1,str$1=new type$1("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$2=new type$1("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map$3=new type$1("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe$1=new schema$1({explicit:[str$1,seq$2,map$3]});function resolveYamlNull$1(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull$1(){return null}function isNull$1(nt){return nt===null}var _null$1=new type$1("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull$1,construct:constructYamlNull$1,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean$1(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean$1(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean$1(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool$1=new type$1("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean$1,construct:constructYamlBoolean$1,predicate:isBoolean$1,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode$1(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode$1(nt){return 48<=nt&&nt<=55}function isDecCode$1(nt){return 48<=nt&&nt<=57}function resolveYamlInteger$1(nt){if(nt===null)return!1;var rt=nt.length,it=0,st=!1,bt;if(!rt)return!1;if(bt=nt[it],(bt==="-"||bt==="+")&&(bt=nt[++it]),bt==="0"){if(it+1===rt)return!0;if(bt=nt[++it],bt==="b"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(bt!=="0"&&bt!=="1")return!1;st=!0}return st&&bt!=="_"}if(bt==="x"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isHexCode$1(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}if(bt==="o"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isOctCode$1(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}}if(bt==="_")return!1;for(;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isDecCode$1(nt.charCodeAt(it)))return!1;st=!0}return!(!st||bt==="_")}function constructYamlInteger$1(nt){var rt=nt,it=1,st;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),st=rt[0],(st==="-"||st==="+")&&(st==="-"&&(it=-1),rt=rt.slice(1),st=rt[0]),rt==="0")return 0;if(st==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger$2(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common$3.isNegativeZero(nt)}var int$1=new type$1("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger$1,construct:constructYamlInteger$1,predicate:isInteger$2,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN$1=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat$1(nt){return!(nt===null||!YAML_FLOAT_PATTERN$1.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat$1(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT$1=/^[-+]?[0-9]+e/;function representYamlFloat$1(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common$3.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT$1.test(it)?it.replace("e",".e"):it}function isFloat$1(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common$3.isNegativeZero(nt))}var float$1=new type$1("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat$1,construct:constructYamlFloat$1,predicate:isFloat$1,represent:representYamlFloat$1,defaultStyle:"lowercase"}),json$1=failsafe$1.extend({implicit:[_null$1,bool$1,int$1,float$1]}),core$1=json$1,YAML_DATE_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp$1(nt){return nt===null?!1:YAML_DATE_REGEXP$1.exec(nt)!==null||YAML_TIMESTAMP_REGEXP$1.exec(nt)!==null}function constructYamlTimestamp$1(nt){var rt,it,st,bt,xt,Et,kt,Lt=0,Pt=null,Rt,Dt,Bt;if(rt=YAML_DATE_REGEXP$1.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP$1.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],st=+rt[2]-1,bt=+rt[3],!rt[4])return new Date(Date.UTC(it,st,bt));if(xt=+rt[4],Et=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Rt=+rt[10],Dt=+(rt[11]||0),Pt=(Rt*60+Dt)*6e4,rt[9]==="-"&&(Pt=-Pt)),Bt=new Date(Date.UTC(it,st,bt,xt,Et,kt,Lt)),Pt&&Bt.setTime(Bt.getTime()-Pt),Bt}function representYamlTimestamp$1(nt){return nt.toISOString()}var timestamp$1=new type$1("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp$1,construct:constructYamlTimestamp$1,instanceOf:Date,represent:representYamlTimestamp$1});function resolveYamlMerge$1(nt){return nt==="<<"||nt===null}var merge$4=new type$1("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge$1}),BASE64_MAP$1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary$1(nt){if(nt===null)return!1;var rt,it,st=0,bt=nt.length,xt=BASE64_MAP$1;for(it=0;it<bt;it++)if(rt=xt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;st+=6}return st%8===0}function constructYamlBinary$1(nt){var rt,it,st=nt.replace(/[\r\n=]/g,""),bt=st.length,xt=BASE64_MAP$1,Et=0,kt=[];for(rt=0;rt<bt;rt++)rt%4===0&&rt&&(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)),Et=Et<<6|xt.indexOf(st.charAt(rt));return it=bt%4*6,it===0?(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)):it===18?(kt.push(Et>>10&255),kt.push(Et>>2&255)):it===12&&kt.push(Et>>4&255),new Uint8Array(kt)}function representYamlBinary$1(nt){var rt="",it=0,st,bt,xt=nt.length,Et=BASE64_MAP$1;for(st=0;st<xt;st++)st%3===0&&st&&(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]),it=(it<<8)+nt[st];return bt=xt%3,bt===0?(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]):bt===2?(rt+=Et[it>>10&63],rt+=Et[it>>4&63],rt+=Et[it<<2&63],rt+=Et[64]):bt===1&&(rt+=Et[it>>2&63],rt+=Et[it<<4&63],rt+=Et[64],rt+=Et[64]),rt}function isBinary$1(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary$1=new type$1("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary$1,construct:constructYamlBinary$1,predicate:isBinary$1,represent:representYamlBinary$1}),_hasOwnProperty$3$1=Object.prototype.hasOwnProperty,_toString$2$1=Object.prototype.toString;function resolveYamlOmap$1(nt){if(nt===null)return!0;var rt=[],it,st,bt,xt,Et,kt=nt;for(it=0,st=kt.length;it<st;it+=1){if(bt=kt[it],Et=!1,_toString$2$1.call(bt)!=="[object Object]")return!1;for(xt in bt)if(_hasOwnProperty$3$1.call(bt,xt))if(!Et)Et=!0;else return!1;if(!Et)return!1;if(rt.indexOf(xt)===-1)rt.push(xt);else return!1}return!0}function constructYamlOmap$1(nt){return nt!==null?nt:[]}var omap$1=new type$1("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap$1,construct:constructYamlOmap$1}),_toString$1$1=Object.prototype.toString;function resolveYamlPairs$1(nt){if(nt===null)return!0;var rt,it,st,bt,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1){if(st=Et[rt],_toString$1$1.call(st)!=="[object Object]"||(bt=Object.keys(st),bt.length!==1))return!1;xt[rt]=[bt[0],st[bt[0]]]}return!0}function constructYamlPairs$1(nt){if(nt===null)return[];var rt,it,st,bt,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1)st=Et[rt],bt=Object.keys(st),xt[rt]=[bt[0],st[bt[0]]];return xt}var pairs$1=new type$1("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs$1,construct:constructYamlPairs$1}),_hasOwnProperty$2$1=Object.prototype.hasOwnProperty;function resolveYamlSet$1(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2$1.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet$1(nt){return nt!==null?nt:{}}var set$3=new type$1("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet$1,construct:constructYamlSet$1}),_default$1=core$1.extend({implicit:[timestamp$1,merge$4],explicit:[binary$1,omap$1,pairs$1,set$3]}),_hasOwnProperty$1$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN$1=1,CONTEXT_FLOW_OUT$1=2,CONTEXT_BLOCK_IN$1=3,CONTEXT_BLOCK_OUT$1=4,CHOMPING_CLIP$1=1,CHOMPING_STRIP$1=2,CHOMPING_KEEP$1=3,PATTERN_NON_PRINTABLE$1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS$1=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS$1=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE$1=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI$1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class$1(nt){return Object.prototype.toString.call(nt)}function is_EOL$1(nt){return nt===10||nt===13}function is_WHITE_SPACE$1(nt){return nt===9||nt===32}function is_WS_OR_EOL$1(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR$1(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode$1(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen$1(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode$1(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence$1(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint$1(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck$1=new Array(256),simpleEscapeMap$1=new Array(256);for(var i$8=0;i$8<256;i$8++)simpleEscapeCheck$1[i$8]=simpleEscapeSequence$1(i$8)?1:0,simpleEscapeMap$1[i$8]=simpleEscapeSequence$1(i$8);function State$1$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default$1,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError$1(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet$1(it),new exception$1(rt,it)}function throwError$1(nt,rt){throw generateError$1(nt,rt)}function throwWarning$1(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError$1(nt,rt))}var directiveHandlers$1={YAML:function(rt,it,st){var bt,xt,Et;rt.version!==null&&throwError$1(rt,"duplication of %YAML directive"),st.length!==1&&throwError$1(rt,"YAML directive accepts exactly one argument"),bt=/^([0-9]+)\.([0-9]+)$/.exec(st[0]),bt===null&&throwError$1(rt,"ill-formed argument of the YAML directive"),xt=parseInt(bt[1],10),Et=parseInt(bt[2],10),xt!==1&&throwError$1(rt,"unacceptable YAML version of the document"),rt.version=st[0],rt.checkLineBreaks=Et<2,Et!==1&&Et!==2&&throwWarning$1(rt,"unsupported YAML version of the document")},TAG:function(rt,it,st){var bt,xt;st.length!==2&&throwError$1(rt,"TAG directive accepts exactly two arguments"),bt=st[0],xt=st[1],PATTERN_TAG_HANDLE$1.test(bt)||throwError$1(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1$1.call(rt.tagMap,bt)&&throwError$1(rt,'there is a previously declared suffix for "'+bt+'" tag handle'),PATTERN_TAG_URI$1.test(xt)||throwError$1(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{xt=decodeURIComponent(xt)}catch{throwError$1(rt,"tag prefix is malformed: "+xt)}rt.tagMap[bt]=xt}};function captureSegment$1(nt,rt,it,st){var bt,xt,Et,kt;if(rt<it){if(kt=nt.input.slice(rt,it),st)for(bt=0,xt=kt.length;bt<xt;bt+=1)Et=kt.charCodeAt(bt),Et===9||32<=Et&&Et<=1114111||throwError$1(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE$1.test(kt)&&throwError$1(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings$1(nt,rt,it,st){var bt,xt,Et,kt;for(common$3.isObject(it)||throwError$1(nt,"cannot merge mappings; the provided source object is unacceptable"),bt=Object.keys(it),Et=0,kt=bt.length;Et<kt;Et+=1)xt=bt[Et],_hasOwnProperty$1$1.call(rt,xt)||(rt[xt]=it[xt],st[xt]=!0)}function storeMappingPair$1(nt,rt,it,st,bt,xt,Et,kt,Lt){var Pt,Rt;if(Array.isArray(bt))for(bt=Array.prototype.slice.call(bt),Pt=0,Rt=bt.length;Pt<Rt;Pt+=1)Array.isArray(bt[Pt])&&throwError$1(nt,"nested arrays are not supported inside keys"),typeof bt=="object"&&_class$1(bt[Pt])==="[object Object]"&&(bt[Pt]="[object Object]");if(typeof bt=="object"&&_class$1(bt)==="[object Object]"&&(bt="[object Object]"),bt=String(bt),rt===null&&(rt={}),st==="tag:yaml.org,2002:merge")if(Array.isArray(xt))for(Pt=0,Rt=xt.length;Pt<Rt;Pt+=1)mergeMappings$1(nt,rt,xt[Pt],it);else mergeMappings$1(nt,rt,xt,it);else!nt.json&&!_hasOwnProperty$1$1.call(it,bt)&&_hasOwnProperty$1$1.call(rt,bt)&&(nt.line=Et||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError$1(nt,"duplicated mapping key")),bt==="__proto__"?Object.defineProperty(rt,bt,{configurable:!0,enumerable:!0,writable:!0,value:xt}):rt[bt]=xt,delete it[bt];return rt}function readLineBreak$1(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError$1(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace$1(nt,rt,it){for(var st=0,bt=nt.input.charCodeAt(nt.position);bt!==0;){for(;is_WHITE_SPACE$1(bt);)bt===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),bt=nt.input.charCodeAt(++nt.position);if(rt&&bt===35)do bt=nt.input.charCodeAt(++nt.position);while(bt!==10&&bt!==13&&bt!==0);if(is_EOL$1(bt))for(readLineBreak$1(nt),bt=nt.input.charCodeAt(nt.position),st++,nt.lineIndent=0;bt===32;)nt.lineIndent++,bt=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&st!==0&&nt.lineIndent<it&&throwWarning$1(nt,"deficient indentation"),st}function testDocumentSeparator$1(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL$1(it)))}function writeFoldedLines$1(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common$3.repeat(`
`,rt-1))}function readPlainScalar$1(nt,rt,it){var st,bt,xt,Et,kt,Lt,Pt,Rt,Dt=nt.kind,Bt=nt.result,Ft;if(Ft=nt.input.charCodeAt(nt.position),is_WS_OR_EOL$1(Ft)||is_FLOW_INDICATOR$1(Ft)||Ft===35||Ft===38||Ft===42||Ft===33||Ft===124||Ft===62||Ft===39||Ft===34||Ft===37||Ft===64||Ft===96||(Ft===63||Ft===45)&&(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(bt)||it&&is_FLOW_INDICATOR$1(bt)))return!1;for(nt.kind="scalar",nt.result="",xt=Et=nt.position,kt=!1;Ft!==0;){if(Ft===58){if(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(bt)||it&&is_FLOW_INDICATOR$1(bt))break}else if(Ft===35){if(st=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL$1(st))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator$1(nt)||it&&is_FLOW_INDICATOR$1(Ft))break;if(is_EOL$1(Ft))if(Lt=nt.line,Pt=nt.lineStart,Rt=nt.lineIndent,skipSeparationSpace$1(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Ft=nt.input.charCodeAt(nt.position);continue}else{nt.position=Et,nt.line=Lt,nt.lineStart=Pt,nt.lineIndent=Rt;break}}kt&&(captureSegment$1(nt,xt,Et,!1),writeFoldedLines$1(nt,nt.line-Lt),xt=Et=nt.position,kt=!1),is_WHITE_SPACE$1(Ft)||(Et=nt.position+1),Ft=nt.input.charCodeAt(++nt.position)}return captureSegment$1(nt,xt,Et,!1),nt.result?!0:(nt.kind=Dt,nt.result=Bt,!1)}function readSingleQuotedScalar$1(nt,rt){var it,st,bt;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,st=bt=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment$1(nt,st,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)st=nt.position,nt.position++,bt=nt.position;else return!0;else is_EOL$1(it)?(captureSegment$1(nt,st,bt,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),st=bt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,bt=nt.position);throwError$1(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar$1(nt,rt){var it,st,bt,xt,Et,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=st=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment$1(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment$1(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL$1(kt))skipSeparationSpace$1(nt,!1,rt);else if(kt<256&&simpleEscapeCheck$1[kt])nt.result+=simpleEscapeMap$1[kt],nt.position++;else if((Et=escapedHexLen$1(kt))>0){for(bt=Et,xt=0;bt>0;bt--)kt=nt.input.charCodeAt(++nt.position),(Et=fromHexCode$1(kt))>=0?xt=(xt<<4)+Et:throwError$1(nt,"expected hexadecimal character");nt.result+=charFromCodepoint$1(xt),nt.position++}else throwError$1(nt,"unknown escape sequence");it=st=nt.position}else is_EOL$1(kt)?(captureSegment$1(nt,it,st,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),it=st=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,st=nt.position)}throwError$1(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection$1(nt,rt){var it=!0,st,bt,xt,Et=nt.tag,kt,Lt=nt.anchor,Pt,Rt,Dt,Bt,Ft,Yt=Object.create(null),Zt,Wt,Qt,Kt;if(Kt=nt.input.charCodeAt(nt.position),Kt===91)Rt=93,Ft=!1,kt=[];else if(Kt===123)Rt=125,Ft=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),Kt=nt.input.charCodeAt(++nt.position);Kt!==0;){if(skipSeparationSpace$1(nt,!0,rt),Kt=nt.input.charCodeAt(nt.position),Kt===Rt)return nt.position++,nt.tag=Et,nt.anchor=Lt,nt.kind=Ft?"mapping":"sequence",nt.result=kt,!0;it?Kt===44&&throwError$1(nt,"expected the node content, but found ','"):throwError$1(nt,"missed comma between flow collection entries"),Wt=Zt=Qt=null,Dt=Bt=!1,Kt===63&&(Pt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(Pt)&&(Dt=Bt=!0,nt.position++,skipSeparationSpace$1(nt,!0,rt))),st=nt.line,bt=nt.lineStart,xt=nt.position,composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),Wt=nt.tag,Zt=nt.result,skipSeparationSpace$1(nt,!0,rt),Kt=nt.input.charCodeAt(nt.position),(Bt||nt.line===st)&&Kt===58&&(Dt=!0,Kt=nt.input.charCodeAt(++nt.position),skipSeparationSpace$1(nt,!0,rt),composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),Qt=nt.result),Ft?storeMappingPair$1(nt,kt,Yt,Wt,Zt,Qt,st,bt,xt):Dt?kt.push(storeMappingPair$1(nt,null,Yt,Wt,Zt,Qt,st,bt,xt)):kt.push(Zt),skipSeparationSpace$1(nt,!0,rt),Kt=nt.input.charCodeAt(nt.position),Kt===44?(it=!0,Kt=nt.input.charCodeAt(++nt.position)):it=!1}throwError$1(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar$1(nt,rt){var it,st,bt=CHOMPING_CLIP$1,xt=!1,Et=!1,kt=rt,Lt=0,Pt=!1,Rt,Dt;if(Dt=nt.input.charCodeAt(nt.position),Dt===124)st=!1;else if(Dt===62)st=!0;else return!1;for(nt.kind="scalar",nt.result="";Dt!==0;)if(Dt=nt.input.charCodeAt(++nt.position),Dt===43||Dt===45)CHOMPING_CLIP$1===bt?bt=Dt===43?CHOMPING_KEEP$1:CHOMPING_STRIP$1:throwError$1(nt,"repeat of a chomping mode identifier");else if((Rt=fromDecimalCode$1(Dt))>=0)Rt===0?throwError$1(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Et?throwError$1(nt,"repeat of an indentation width identifier"):(kt=rt+Rt-1,Et=!0);else break;if(is_WHITE_SPACE$1(Dt)){do Dt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE$1(Dt));if(Dt===35)do Dt=nt.input.charCodeAt(++nt.position);while(!is_EOL$1(Dt)&&Dt!==0)}for(;Dt!==0;){for(readLineBreak$1(nt),nt.lineIndent=0,Dt=nt.input.charCodeAt(nt.position);(!Et||nt.lineIndent<kt)&&Dt===32;)nt.lineIndent++,Dt=nt.input.charCodeAt(++nt.position);if(!Et&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL$1(Dt)){Lt++;continue}if(nt.lineIndent<kt){bt===CHOMPING_KEEP$1?nt.result+=common$3.repeat(`
`,xt?1+Lt:Lt):bt===CHOMPING_CLIP$1&&xt&&(nt.result+=`
`);break}for(st?is_WHITE_SPACE$1(Dt)?(Pt=!0,nt.result+=common$3.repeat(`
`,xt?1+Lt:Lt)):Pt?(Pt=!1,nt.result+=common$3.repeat(`
`,Lt+1)):Lt===0?xt&&(nt.result+=" "):nt.result+=common$3.repeat(`
`,Lt):nt.result+=common$3.repeat(`
`,xt?1+Lt:Lt),xt=!0,Et=!0,Lt=0,it=nt.position;!is_EOL$1(Dt)&&Dt!==0;)Dt=nt.input.charCodeAt(++nt.position);captureSegment$1(nt,it,nt.position,!1)}return!0}function readBlockSequence$1(nt,rt){var it,st=nt.tag,bt=nt.anchor,xt=[],Et,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=xt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Et=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL$1(Et))));){if(kt=!0,nt.position++,skipSeparationSpace$1(nt,!0,-1)&&nt.lineIndent<=rt){xt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode$1(nt,rt,CONTEXT_BLOCK_IN$1,!1,!0),xt.push(nt.result),skipSeparationSpace$1(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError$1(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=st,nt.anchor=bt,nt.kind="sequence",nt.result=xt,!0):!1}function readBlockMapping$1(nt,rt,it){var st,bt,xt,Et,kt,Lt,Pt=nt.tag,Rt=nt.anchor,Dt={},Bt=Object.create(null),Ft=null,Yt=null,Zt=null,Wt=!1,Qt=!1,Kt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=Dt),Kt=nt.input.charCodeAt(nt.position);Kt!==0;){if(!Wt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),st=nt.input.charCodeAt(nt.position+1),xt=nt.line,(Kt===63||Kt===58)&&is_WS_OR_EOL$1(st))Kt===63?(Wt&&(storeMappingPair$1(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Qt=!0,Wt=!0,bt=!0):Wt?(Wt=!1,bt=!0):throwError$1(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,Kt=st;else{if(Et=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode$1(nt,it,CONTEXT_FLOW_OUT$1,!1,!0))break;if(nt.line===xt){for(Kt=nt.input.charCodeAt(nt.position);is_WHITE_SPACE$1(Kt);)Kt=nt.input.charCodeAt(++nt.position);if(Kt===58)Kt=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL$1(Kt)||throwError$1(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Wt&&(storeMappingPair$1(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Qt=!0,Wt=!1,bt=!1,Ft=nt.tag,Yt=nt.result;else if(Qt)throwError$1(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=Pt,nt.anchor=Rt,!0}else if(Qt)throwError$1(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=Pt,nt.anchor=Rt,!0}if((nt.line===xt||nt.lineIndent>rt)&&(Wt&&(Et=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode$1(nt,rt,CONTEXT_BLOCK_OUT$1,!0,bt)&&(Wt?Yt=nt.result:Zt=nt.result),Wt||(storeMappingPair$1(nt,Dt,Bt,Ft,Yt,Zt,Et,kt,Lt),Ft=Yt=Zt=null),skipSeparationSpace$1(nt,!0,-1),Kt=nt.input.charCodeAt(nt.position)),(nt.line===xt||nt.lineIndent>rt)&&Kt!==0)throwError$1(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Wt&&storeMappingPair$1(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Qt&&(nt.tag=Pt,nt.anchor=Rt,nt.kind="mapping",nt.result=Dt),Qt}function readTagProperty$1(nt){var rt,it=!1,st=!1,bt,xt,Et;if(Et=nt.input.charCodeAt(nt.position),Et!==33)return!1;if(nt.tag!==null&&throwError$1(nt,"duplication of a tag property"),Et=nt.input.charCodeAt(++nt.position),Et===60?(it=!0,Et=nt.input.charCodeAt(++nt.position)):Et===33?(st=!0,bt="!!",Et=nt.input.charCodeAt(++nt.position)):bt="!",rt=nt.position,it){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&Et!==62);nt.position<nt.length?(xt=nt.input.slice(rt,nt.position),Et=nt.input.charCodeAt(++nt.position)):throwError$1(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Et!==0&&!is_WS_OR_EOL$1(Et);)Et===33&&(st?throwError$1(nt,"tag suffix cannot contain exclamation marks"):(bt=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE$1.test(bt)||throwError$1(nt,"named tag handle cannot contain such characters"),st=!0,rt=nt.position+1)),Et=nt.input.charCodeAt(++nt.position);xt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS$1.test(xt)&&throwError$1(nt,"tag suffix cannot contain flow indicator characters")}xt&&!PATTERN_TAG_URI$1.test(xt)&&throwError$1(nt,"tag name cannot contain such characters: "+xt);try{xt=decodeURIComponent(xt)}catch{throwError$1(nt,"tag name is malformed: "+xt)}return it?nt.tag=xt:_hasOwnProperty$1$1.call(nt.tagMap,bt)?nt.tag=nt.tagMap[bt]+xt:bt==="!"?nt.tag="!"+xt:bt==="!!"?nt.tag="tag:yaml.org,2002:"+xt:throwError$1(nt,'undeclared tag handle "'+bt+'"'),!0}function readAnchorProperty$1(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError$1(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL$1(it)&&!is_FLOW_INDICATOR$1(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias$1(nt){var rt,it,st;if(st=nt.input.charCodeAt(nt.position),st!==42)return!1;for(st=nt.input.charCodeAt(++nt.position),rt=nt.position;st!==0&&!is_WS_OR_EOL$1(st)&&!is_FLOW_INDICATOR$1(st);)st=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1$1.call(nt.anchorMap,it)||throwError$1(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace$1(nt,!0,-1),!0}function composeNode$1(nt,rt,it,st,bt){var xt,Et,kt,Lt=1,Pt=!1,Rt=!1,Dt,Bt,Ft,Yt,Zt,Wt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,xt=Et=kt=CONTEXT_BLOCK_OUT$1===it||CONTEXT_BLOCK_IN$1===it,st&&skipSeparationSpace$1(nt,!0,-1)&&(Pt=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty$1(nt)||readAnchorProperty$1(nt);)skipSeparationSpace$1(nt,!0,-1)?(Pt=!0,kt=xt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=Pt||bt),(Lt===1||CONTEXT_BLOCK_OUT$1===it)&&(CONTEXT_FLOW_IN$1===it||CONTEXT_FLOW_OUT$1===it?Zt=rt:Zt=rt+1,Wt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence$1(nt,Wt)||readBlockMapping$1(nt,Wt,Zt))||readFlowCollection$1(nt,Zt)?Rt=!0:(Et&&readBlockScalar$1(nt,Zt)||readSingleQuotedScalar$1(nt,Zt)||readDoubleQuotedScalar$1(nt,Zt)?Rt=!0:readAlias$1(nt)?(Rt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError$1(nt,"alias node should not have any properties")):readPlainScalar$1(nt,Zt,CONTEXT_FLOW_IN$1===it)&&(Rt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Rt=kt&&readBlockSequence$1(nt,Wt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError$1(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),Dt=0,Bt=nt.implicitTypes.length;Dt<Bt;Dt+=1)if(Yt=nt.implicitTypes[Dt],Yt.resolve(nt.result)){nt.result=Yt.construct(nt.result),nt.tag=Yt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Yt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Yt=null,Ft=nt.typeMap.multi[nt.kind||"fallback"],Dt=0,Bt=Ft.length;Dt<Bt;Dt+=1)if(nt.tag.slice(0,Ft[Dt].tag.length)===Ft[Dt].tag){Yt=Ft[Dt];break}Yt||throwError$1(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Yt.kind!==nt.kind&&throwError$1(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Yt.kind+'", not "'+nt.kind+'"'),Yt.resolve(nt.result,nt.tag)?(nt.result=Yt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError$1(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Rt}function readDocument$1(nt){var rt=nt.position,it,st,bt,xt=!1,Et;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Et=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace$1(nt,!0,-1),Et=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Et!==37));){for(xt=!0,Et=nt.input.charCodeAt(++nt.position),it=nt.position;Et!==0&&!is_WS_OR_EOL$1(Et);)Et=nt.input.charCodeAt(++nt.position);for(st=nt.input.slice(it,nt.position),bt=[],st.length<1&&throwError$1(nt,"directive name must not be less than one character in length");Et!==0;){for(;is_WHITE_SPACE$1(Et);)Et=nt.input.charCodeAt(++nt.position);if(Et===35){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&!is_EOL$1(Et));break}if(is_EOL$1(Et))break;for(it=nt.position;Et!==0&&!is_WS_OR_EOL$1(Et);)Et=nt.input.charCodeAt(++nt.position);bt.push(nt.input.slice(it,nt.position))}Et!==0&&readLineBreak$1(nt),_hasOwnProperty$1$1.call(directiveHandlers$1,st)?directiveHandlers$1[st](nt,st,bt):throwWarning$1(nt,'unknown document directive "'+st+'"')}if(skipSeparationSpace$1(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace$1(nt,!0,-1)):xt&&throwError$1(nt,"directives end mark is expected"),composeNode$1(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT$1,!1,!0),skipSeparationSpace$1(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS$1.test(nt.input.slice(rt,nt.position))&&throwWarning$1(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator$1(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace$1(nt,!0,-1));return}if(nt.position<nt.length-1)throwError$1(nt,"end of the stream or a document separator is expected");else return}function loadDocuments$1(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1$1(nt,rt),st=nt.indexOf("\0");for(st!==-1&&(it.position=st,throwError$1(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument$1(it);return it.documents}function loadAll$1$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var st=loadDocuments$1(nt,it);if(typeof rt!="function")return st;for(var bt=0,xt=st.length;bt<xt;bt+=1)rt(st[bt])}function load$1$1(nt,rt){var it=loadDocuments$1(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception$1("expected a single document in the stream, but found more")}}var loadAll_1$1=loadAll$1$1,load_1$1=load$1$1,loader$4={loadAll:loadAll_1$1,load:load_1$1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(nt,rt){var it,st,bt,xt,Et,kt,Lt;if(rt===null)return{};for(it={},st=Object.keys(rt),bt=0,xt=st.length;bt<xt;bt+=1)Et=st[bt],kt=String(rt[Et]),Et.slice(0,2)==="!!"&&(Et="tag:yaml.org,2002:"+Et.slice(2)),Lt=nt.compiledTypeMap.fallback[Et],Lt&&_hasOwnProperty.call(Lt.styleAliases,kt)&&(kt=Lt.styleAliases[kt]),it[Et]=kt;return it}function encodeHex(nt){var rt,it,st;if(rt=nt.toString(16).toUpperCase(),nt<=255)it="x",st=2;else if(nt<=65535)it="u",st=4;else if(nt<=4294967295)it="U",st=8;else throw new exception$1("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+it+common$3.repeat("0",st-rt.length)+rt}var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(nt){this.schema=nt.schema||_default$1,this.indent=Math.max(1,nt.indent||2),this.noArrayIndent=nt.noArrayIndent||!1,this.skipInvalid=nt.skipInvalid||!1,this.flowLevel=common$3.isNothing(nt.flowLevel)?-1:nt.flowLevel,this.styleMap=compileStyleMap(this.schema,nt.styles||null),this.sortKeys=nt.sortKeys||!1,this.lineWidth=nt.lineWidth||80,this.noRefs=nt.noRefs||!1,this.noCompatMode=nt.noCompatMode||!1,this.condenseFlow=nt.condenseFlow||!1,this.quotingType=nt.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=nt.forceQuotes||!1,this.replacer=typeof nt.replacer=="function"?nt.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(nt,rt){for(var it=common$3.repeat(" ",rt),st=0,bt=-1,xt="",Et,kt=nt.length;st<kt;)bt=nt.indexOf(`
`,st),bt===-1?(Et=nt.slice(st),st=kt):(Et=nt.slice(st,bt+1),st=bt+1),Et.length&&Et!==`
`&&(xt+=it),xt+=Et;return xt}function generateNextLine(nt,rt){return`
`+common$3.repeat(" ",nt.indent*rt)}function testImplicitResolving(nt,rt){var it,st,bt;for(it=0,st=nt.implicitTypes.length;it<st;it+=1)if(bt=nt.implicitTypes[it],bt.resolve(rt))return!0;return!1}function isWhitespace(nt){return nt===CHAR_SPACE||nt===CHAR_TAB}function isPrintable(nt){return 32<=nt&&nt<=126||161<=nt&&nt<=55295&&nt!==8232&&nt!==8233||57344<=nt&&nt<=65533&&nt!==CHAR_BOM||65536<=nt&&nt<=1114111}function isNsCharOrWhitespace(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&nt!==CHAR_CARRIAGE_RETURN&&nt!==CHAR_LINE_FEED}function isPlainSafe(nt,rt,it){var st=isNsCharOrWhitespace(nt),bt=st&&!isWhitespace(nt);return(it?st:st&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET)&&nt!==CHAR_SHARP&&!(rt===CHAR_COLON&&!bt)||isNsCharOrWhitespace(rt)&&!isWhitespace(rt)&&nt===CHAR_SHARP||rt===CHAR_COLON&&bt}function isPlainSafeFirst(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&!isWhitespace(nt)&&nt!==CHAR_MINUS&&nt!==CHAR_QUESTION&&nt!==CHAR_COLON&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET&&nt!==CHAR_SHARP&&nt!==CHAR_AMPERSAND&&nt!==CHAR_ASTERISK&&nt!==CHAR_EXCLAMATION&&nt!==CHAR_VERTICAL_LINE&&nt!==CHAR_EQUALS&&nt!==CHAR_GREATER_THAN&&nt!==CHAR_SINGLE_QUOTE&&nt!==CHAR_DOUBLE_QUOTE&&nt!==CHAR_PERCENT&&nt!==CHAR_COMMERCIAL_AT&&nt!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(nt){return!isWhitespace(nt)&&nt!==CHAR_COLON}function codePointAt(nt,rt){var it=nt.charCodeAt(rt),st;return it>=55296&&it<=56319&&rt+1<nt.length&&(st=nt.charCodeAt(rt+1),st>=56320&&st<=57343)?(it-55296)*1024+st-56320+65536:it}function needIndentIndicator(nt){var rt=/^\n* /;return rt.test(nt)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(nt,rt,it,st,bt,xt,Et,kt){var Lt,Pt=0,Rt=null,Dt=!1,Bt=!1,Ft=st!==-1,Yt=-1,Zt=isPlainSafeFirst(codePointAt(nt,0))&&isPlainSafeLast(codePointAt(nt,nt.length-1));if(rt||Et)for(Lt=0;Lt<nt.length;Pt>=65536?Lt+=2:Lt++){if(Pt=codePointAt(nt,Lt),!isPrintable(Pt))return STYLE_DOUBLE;Zt=Zt&&isPlainSafe(Pt,Rt,kt),Rt=Pt}else{for(Lt=0;Lt<nt.length;Pt>=65536?Lt+=2:Lt++){if(Pt=codePointAt(nt,Lt),Pt===CHAR_LINE_FEED)Dt=!0,Ft&&(Bt=Bt||Lt-Yt-1>st&&nt[Yt+1]!==" ",Yt=Lt);else if(!isPrintable(Pt))return STYLE_DOUBLE;Zt=Zt&&isPlainSafe(Pt,Rt,kt),Rt=Pt}Bt=Bt||Ft&&Lt-Yt-1>st&&nt[Yt+1]!==" "}return!Dt&&!Bt?Zt&&!Et&&!bt(nt)?STYLE_PLAIN:xt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:it>9&&needIndentIndicator(nt)?STYLE_DOUBLE:Et?xt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:Bt?STYLE_FOLDED:STYLE_LITERAL}function writeScalar(nt,rt,it,st,bt){nt.dump=function(){if(rt.length===0)return nt.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!nt.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(rt)!==-1||DEPRECATED_BASE60_SYNTAX.test(rt)))return nt.quotingType===QUOTING_TYPE_DOUBLE?'"'+rt+'"':"'"+rt+"'";var xt=nt.indent*Math.max(1,it),Et=nt.lineWidth===-1?-1:Math.max(Math.min(nt.lineWidth,40),nt.lineWidth-xt),kt=st||nt.flowLevel>-1&&it>=nt.flowLevel;function Lt(Pt){return testImplicitResolving(nt,Pt)}switch(chooseScalarStyle(rt,kt,nt.indent,Et,Lt,nt.quotingType,nt.forceQuotes&&!st,bt)){case STYLE_PLAIN:return rt;case STYLE_SINGLE:return"'"+rt.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(rt,xt));case STYLE_FOLDED:return">"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(foldString(rt,Et),xt));case STYLE_DOUBLE:return'"'+escapeString(rt)+'"';default:throw new exception$1("impossible error: invalid scalar style")}}()}function blockHeader(nt,rt){var it=needIndentIndicator(nt)?String(rt):"",st=nt[nt.length-1]===`
`,bt=st&&(nt[nt.length-2]===`
`||nt===`
`),xt=bt?"+":st?"":"-";return it+xt+`
`}function dropEndingNewline(nt){return nt[nt.length-1]===`
`?nt.slice(0,-1):nt}function foldString(nt,rt){for(var it=/(\n+)([^\n]*)/g,st=function(){var Pt=nt.indexOf(`
`);return Pt=Pt!==-1?Pt:nt.length,it.lastIndex=Pt,foldLine(nt.slice(0,Pt),rt)}(),bt=nt[0]===`
`||nt[0]===" ",xt,Et;Et=it.exec(nt);){var kt=Et[1],Lt=Et[2];xt=Lt[0]===" ",st+=kt+(!bt&&!xt&&Lt!==""?`
`:"")+foldLine(Lt,rt),bt=xt}return st}function foldLine(nt,rt){if(nt===""||nt[0]===" ")return nt;for(var it=/ [^ ]/g,st,bt=0,xt,Et=0,kt=0,Lt="";st=it.exec(nt);)kt=st.index,kt-bt>rt&&(xt=Et>bt?Et:kt,Lt+=`
`+nt.slice(bt,xt),bt=xt+1),Et=kt;return Lt+=`
`,nt.length-bt>rt&&Et>bt?Lt+=nt.slice(bt,Et)+`
`+nt.slice(Et+1):Lt+=nt.slice(bt),Lt.slice(1)}function escapeString(nt){for(var rt="",it=0,st,bt=0;bt<nt.length;it>=65536?bt+=2:bt++)it=codePointAt(nt,bt),st=ESCAPE_SEQUENCES[it],!st&&isPrintable(it)?(rt+=nt[bt],it>=65536&&(rt+=nt[bt+1])):rt+=st||encodeHex(it);return rt}function writeFlowSequence(nt,rt,it){var st="",bt=nt.tag,xt,Et,kt;for(xt=0,Et=it.length;xt<Et;xt+=1)kt=it[xt],nt.replacer&&(kt=nt.replacer.call(it,String(xt),kt)),(writeNode(nt,rt,kt,!1,!1)||typeof kt>"u"&&writeNode(nt,rt,null,!1,!1))&&(st!==""&&(st+=","+(nt.condenseFlow?"":" ")),st+=nt.dump);nt.tag=bt,nt.dump="["+st+"]"}function writeBlockSequence(nt,rt,it,st){var bt="",xt=nt.tag,Et,kt,Lt;for(Et=0,kt=it.length;Et<kt;Et+=1)Lt=it[Et],nt.replacer&&(Lt=nt.replacer.call(it,String(Et),Lt)),(writeNode(nt,rt+1,Lt,!0,!0,!1,!0)||typeof Lt>"u"&&writeNode(nt,rt+1,null,!0,!0,!1,!0))&&((!st||bt!=="")&&(bt+=generateNextLine(nt,rt)),nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?bt+="-":bt+="- ",bt+=nt.dump);nt.tag=xt,nt.dump=bt||"[]"}function writeFlowMapping(nt,rt,it){var st="",bt=nt.tag,xt=Object.keys(it),Et,kt,Lt,Pt,Rt;for(Et=0,kt=xt.length;Et<kt;Et+=1)Rt="",st!==""&&(Rt+=", "),nt.condenseFlow&&(Rt+='"'),Lt=xt[Et],Pt=it[Lt],nt.replacer&&(Pt=nt.replacer.call(it,Lt,Pt)),writeNode(nt,rt,Lt,!1,!1)&&(nt.dump.length>1024&&(Rt+="? "),Rt+=nt.dump+(nt.condenseFlow?'"':"")+":"+(nt.condenseFlow?"":" "),writeNode(nt,rt,Pt,!1,!1)&&(Rt+=nt.dump,st+=Rt));nt.tag=bt,nt.dump="{"+st+"}"}function writeBlockMapping(nt,rt,it,st){var bt="",xt=nt.tag,Et=Object.keys(it),kt,Lt,Pt,Rt,Dt,Bt;if(nt.sortKeys===!0)Et.sort();else if(typeof nt.sortKeys=="function")Et.sort(nt.sortKeys);else if(nt.sortKeys)throw new exception$1("sortKeys must be a boolean or a function");for(kt=0,Lt=Et.length;kt<Lt;kt+=1)Bt="",(!st||bt!=="")&&(Bt+=generateNextLine(nt,rt)),Pt=Et[kt],Rt=it[Pt],nt.replacer&&(Rt=nt.replacer.call(it,Pt,Rt)),writeNode(nt,rt+1,Pt,!0,!0,!0)&&(Dt=nt.tag!==null&&nt.tag!=="?"||nt.dump&&nt.dump.length>1024,Dt&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Bt+="?":Bt+="? "),Bt+=nt.dump,Dt&&(Bt+=generateNextLine(nt,rt)),writeNode(nt,rt+1,Rt,!0,Dt)&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Bt+=":":Bt+=": ",Bt+=nt.dump,bt+=Bt));nt.tag=xt,nt.dump=bt||"{}"}function detectType$1(nt,rt,it){var st,bt,xt,Et,kt,Lt;for(bt=it?nt.explicitTypes:nt.implicitTypes,xt=0,Et=bt.length;xt<Et;xt+=1)if(kt=bt[xt],(kt.instanceOf||kt.predicate)&&(!kt.instanceOf||typeof rt=="object"&&rt instanceof kt.instanceOf)&&(!kt.predicate||kt.predicate(rt))){if(it?kt.multi&&kt.representName?nt.tag=kt.representName(rt):nt.tag=kt.tag:nt.tag="?",kt.represent){if(Lt=nt.styleMap[kt.tag]||kt.defaultStyle,_toString.call(kt.represent)==="[object Function]")st=kt.represent(rt,Lt);else if(_hasOwnProperty.call(kt.represent,Lt))st=kt.represent[Lt](rt,Lt);else throw new exception$1("!<"+kt.tag+'> tag resolver accepts not "'+Lt+'" style');nt.dump=st}return!0}return!1}function writeNode(nt,rt,it,st,bt,xt,Et){nt.tag=null,nt.dump=it,detectType$1(nt,it,!1)||detectType$1(nt,it,!0);var kt=_toString.call(nt.dump),Lt=st,Pt;st&&(st=nt.flowLevel<0||nt.flowLevel>rt);var Rt=kt==="[object Object]"||kt==="[object Array]",Dt,Bt;if(Rt&&(Dt=nt.duplicates.indexOf(it),Bt=Dt!==-1),(nt.tag!==null&&nt.tag!=="?"||Bt||nt.indent!==2&&rt>0)&&(bt=!1),Bt&&nt.usedDuplicates[Dt])nt.dump="*ref_"+Dt;else{if(Rt&&Bt&&!nt.usedDuplicates[Dt]&&(nt.usedDuplicates[Dt]=!0),kt==="[object Object]")st&&Object.keys(nt.dump).length!==0?(writeBlockMapping(nt,rt,nt.dump,bt),Bt&&(nt.dump="&ref_"+Dt+nt.dump)):(writeFlowMapping(nt,rt,nt.dump),Bt&&(nt.dump="&ref_"+Dt+" "+nt.dump));else if(kt==="[object Array]")st&&nt.dump.length!==0?(nt.noArrayIndent&&!Et&&rt>0?writeBlockSequence(nt,rt-1,nt.dump,bt):writeBlockSequence(nt,rt,nt.dump,bt),Bt&&(nt.dump="&ref_"+Dt+nt.dump)):(writeFlowSequence(nt,rt,nt.dump),Bt&&(nt.dump="&ref_"+Dt+" "+nt.dump));else if(kt==="[object String]")nt.tag!=="?"&&writeScalar(nt,nt.dump,rt,xt,Lt);else{if(kt==="[object Undefined]")return!1;if(nt.skipInvalid)return!1;throw new exception$1("unacceptable kind of an object to dump "+kt)}nt.tag!==null&&nt.tag!=="?"&&(Pt=encodeURI(nt.tag[0]==="!"?nt.tag.slice(1):nt.tag).replace(/!/g,"%21"),nt.tag[0]==="!"?Pt="!"+Pt:Pt.slice(0,18)==="tag:yaml.org,2002:"?Pt="!!"+Pt.slice(18):Pt="!<"+Pt+">",nt.dump=Pt+" "+nt.dump)}return!0}function getDuplicateReferences(nt,rt){var it=[],st=[],bt,xt;for(inspectNode(nt,it,st),bt=0,xt=st.length;bt<xt;bt+=1)rt.duplicates.push(it[st[bt]]);rt.usedDuplicates=new Array(xt)}function inspectNode(nt,rt,it){var st,bt,xt;if(nt!==null&&typeof nt=="object")if(bt=rt.indexOf(nt),bt!==-1)it.indexOf(bt)===-1&&it.push(bt);else if(rt.push(nt),Array.isArray(nt))for(bt=0,xt=nt.length;bt<xt;bt+=1)inspectNode(nt[bt],rt,it);else for(st=Object.keys(nt),bt=0,xt=st.length;bt<xt;bt+=1)inspectNode(nt[st[bt]],rt,it)}function dump$1(nt,rt){rt=rt||{};var it=new State(rt);it.noRefs||getDuplicateReferences(nt,it);var st=nt;return it.replacer&&(st=it.replacer.call({"":st},"",st)),writeNode(it,0,st,!0,!0)?it.dump+`
`:""}var dump_1=dump$1,dumper={dump:dump_1};function renamed(nt,rt){return function(){throw new Error("Function yaml."+nt+" is removed in js-yaml 4. Use yaml."+rt+" instead, which is now safe by default.")}}var Type$3=type$1,Schema=schema$1,FAILSAFE_SCHEMA$1=failsafe$1,JSON_SCHEMA=json$1,CORE_SCHEMA=core$1,DEFAULT_SCHEMA=_default$1,load$2=loader$4.load,loadAll=loader$4.loadAll,dump=dumper.dump,YAMLException=exception$1,types$8={binary:binary$1,float:float$1,map:map$3,null:_null$1,pairs:pairs$1,set:set$3,timestamp:timestamp$1,bool:bool$1,int:int$1,merge:merge$4,omap:omap$1,seq:seq$2,str:str$1},safeLoad=renamed("safeLoad","load"),safeLoadAll=renamed("safeLoadAll","loadAll"),safeDump=renamed("safeDump","dump"),jsYaml={Type:Type$3,Schema,FAILSAFE_SCHEMA:FAILSAFE_SCHEMA$1,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SCHEMA,load:load$2,loadAll,dump,YAMLException,types:types$8,safeLoad,safeLoadAll,safeDump};function offsetParent(nt){return offsetParentPolyfill(nt)}function flatTreeParent(nt){return nt.assignedSlot?nt.assignedSlot:nt.parentNode instanceof ShadowRoot?nt.parentNode.host:nt.parentNode}function offsetParentPolyfill(nt){for(let rt=nt;rt;rt=flatTreeParent(rt))if(rt instanceof Element&&getComputedStyle(rt).display==="none")return null;for(let rt=flatTreeParent(nt);rt;rt=flatTreeParent(rt)){if(!(rt instanceof Element))continue;const it=getComputedStyle(rt);if(it.display!=="contents"&&(it.position!=="static"||it.filter!=="none"||rt.tagName==="BODY"))return rt}return null}function isTabbable(nt){const rt=nt.tagName.toLowerCase();return nt.getAttribute("tabindex")==="-1"||nt.hasAttribute("disabled")||nt.hasAttribute("aria-disabled")&&nt.getAttribute("aria-disabled")!=="false"||rt==="input"&&nt.getAttribute("type")==="radio"&&!nt.hasAttribute("checked")||nt.offsetParent===null&&offsetParent(nt)===null||window.getComputedStyle(nt).visibility==="hidden"?!1:(rt==="audio"||rt==="video")&&nt.hasAttribute("controls")||nt.hasAttribute("tabindex")||nt.hasAttribute("contenteditable")&&nt.getAttribute("contenteditable")!=="false"?!0:["button","input","select","textarea","a","audio","video","summary"].includes(rt)}function getTabbableBoundary(nt){var rt,it;const st=getTabbableElements(nt),bt=(rt=st[0])!=null?rt:null,xt=(it=st[st.length-1])!=null?it:null;return{start:bt,end:xt}}function getTabbableElements(nt){const rt=[];function it(st){st instanceof Element&&(rt.push(st),st.shadowRoot!==null&&st.shadowRoot.mode==="open"&&it(st.shadowRoot)),[...st.children].forEach(bt=>it(bt))}return it(nt),rt.filter(isTabbable).sort((st,bt)=>{const xt=Number(st.getAttribute("tabindex"))||0;return(Number(bt.getAttribute("tabindex"))||0)-xt})}var activeModals=[],Modal$1=class{constructor(nt){this.tabDirection="forward",this.handleFocusIn=()=>{this.checkFocus()},this.handleKeyDown=rt=>{var it;if(rt.key!=="Tab")return;rt.shiftKey?this.tabDirection="backward":this.tabDirection="forward",rt.preventDefault();const st=getTabbableElements(this.element),bt=st[0];let xt=this.currentFocusIndex;if(xt===-1){this.currentFocus=bt,this.currentFocus.focus({preventScroll:!0});return}const Et=this.tabDirection==="forward"?1:-1;xt+Et>=st.length?xt=0:this.currentFocusIndex+Et<0?xt=st.length-1:xt+=Et,this.currentFocus=st[xt],(it=this.currentFocus)==null||it.focus({preventScroll:!0}),setTimeout(()=>this.checkFocus())},this.handleKeyUp=()=>{this.tabDirection="forward"},this.element=nt}activate(){activeModals.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){activeModals=activeModals.filter(nt=>nt!==this.element),this.currentFocus=null,document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return activeModals[activeModals.length-1]===this.element}checkFocus(){if(this.isActive()){const nt=getTabbableElements(this.element);if(!this.element.matches(":focus-within")){const rt=nt[0],it=nt[nt.length-1],st=this.tabDirection==="forward"?rt:it;typeof(st==null?void 0:st.focus)=="function"&&(this.currentFocus=st,st.focus({preventScroll:!0}))}}}get currentFocusIndex(){return getTabbableElements(this.element).findIndex(nt=>nt===this.currentFocus)}};function getOffset(nt,rt){return{top:Math.round(nt.getBoundingClientRect().top-rt.getBoundingClientRect().top),left:Math.round(nt.getBoundingClientRect().left-rt.getBoundingClientRect().left)}}var locks=new Set;function getScrollbarWidth(){const nt=document.documentElement.clientWidth;return Math.abs(window.innerWidth-nt)}function lockBodyScrolling(nt){if(locks.add(nt),!document.body.classList.contains("sl-scroll-lock")){const rt=getScrollbarWidth();document.body.classList.add("sl-scroll-lock"),document.body.style.setProperty("--sl-scroll-lock-size",`${rt}px`)}}function unlockBodyScrolling(nt){locks.delete(nt),locks.size===0&&(document.body.classList.remove("sl-scroll-lock"),document.body.style.removeProperty("--sl-scroll-lock-size"))}function scrollIntoView(nt,rt,it="vertical",st="smooth"){const bt=getOffset(nt,rt),xt=bt.top+rt.scrollTop,Et=bt.left+rt.scrollLeft,kt=rt.scrollLeft,Lt=rt.scrollLeft+rt.offsetWidth,Pt=rt.scrollTop,Rt=rt.scrollTop+rt.offsetHeight;(it==="horizontal"||it==="both")&&(Et<kt?rt.scrollTo({left:Et,behavior:st}):Et+nt.clientWidth>Lt&&rt.scrollTo({left:Et-rt.offsetWidth+nt.clientWidth,behavior:st})),(it==="vertical"||it==="both")&&(xt<Pt?rt.scrollTo({top:xt,behavior:st}):xt+nt.clientHeight>Rt&&rt.scrollTo({top:xt-rt.offsetHeight+nt.clientHeight,behavior:st}))}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$4=window,e$7=t$4.ShadowRoot&&(t$4.ShadyCSS===void 0||t$4.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$5=Symbol(),n$7=new WeakMap;class o$6{constructor(rt,it,st){if(this._$cssResult$=!0,st!==s$5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=rt,this.t=it}get styleSheet(){let rt=this.o;const it=this.t;if(e$7&&rt===void 0){const st=it!==void 0&&it.length===1;st&&(rt=n$7.get(it)),rt===void 0&&((this.o=rt=new CSSStyleSheet).replaceSync(this.cssText),st&&n$7.set(it,rt))}return rt}toString(){return this.cssText}}const r$2=nt=>new o$6(typeof nt=="string"?nt:nt+"",void 0,s$5),i$7=(nt,...rt)=>{const it=nt.length===1?nt[0]:rt.reduce((st,bt,xt)=>st+(Et=>{if(Et._$cssResult$===!0)return Et.cssText;if(typeof Et=="number")return Et;throw Error("Value passed to 'css' function must be a 'css' function result: "+Et+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(bt)+nt[xt+1],nt[0]);return new o$6(it,nt,s$5)},S$1=(nt,rt)=>{e$7?nt.adoptedStyleSheets=rt.map(it=>it instanceof CSSStyleSheet?it:it.styleSheet):rt.forEach(it=>{const st=document.createElement("style"),bt=t$4.litNonce;bt!==void 0&&st.setAttribute("nonce",bt),st.textContent=it.cssText,nt.appendChild(st)})},c$2=e$7?nt=>nt:nt=>nt instanceof CSSStyleSheet?(rt=>{let it="";for(const st of rt.cssRules)it+=st.cssText;return r$2(it)})(nt):nt;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$4;const e$6=window,r$1=e$6.trustedTypes,h$1=r$1?r$1.emptyScript:"",o$5=e$6.reactiveElementPolyfillSupport,n$6={toAttribute(nt,rt){switch(rt){case Boolean:nt=nt?h$1:null;break;case Object:case Array:nt=nt==null?nt:JSON.stringify(nt)}return nt},fromAttribute(nt,rt){let it=nt;switch(rt){case Boolean:it=nt!==null;break;case Number:it=nt===null?null:Number(nt);break;case Object:case Array:try{it=JSON.parse(nt)}catch{it=null}}return it}},a$3=(nt,rt)=>rt!==nt&&(rt==rt||nt==nt),l$5={attribute:!0,type:String,converter:n$6,reflect:!1,hasChanged:a$3},d$1="finalized";class u$1 extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(rt){var it;this.finalize(),((it=this.h)!==null&&it!==void 0?it:this.h=[]).push(rt)}static get observedAttributes(){this.finalize();const rt=[];return this.elementProperties.forEach((it,st)=>{const bt=this._$Ep(st,it);bt!==void 0&&(this._$Ev.set(bt,st),rt.push(bt))}),rt}static createProperty(rt,it=l$5){if(it.state&&(it.attribute=!1),this.finalize(),this.elementProperties.set(rt,it),!it.noAccessor&&!this.prototype.hasOwnProperty(rt)){const st=typeof rt=="symbol"?Symbol():"__"+rt,bt=this.getPropertyDescriptor(rt,st,it);bt!==void 0&&Object.defineProperty(this.prototype,rt,bt)}}static getPropertyDescriptor(rt,it,st){return{get(){return this[it]},set(bt){const xt=this[rt];this[it]=bt,this.requestUpdate(rt,xt,st)},configurable:!0,enumerable:!0}}static getPropertyOptions(rt){return this.elementProperties.get(rt)||l$5}static finalize(){if(this.hasOwnProperty(d$1))return!1;this[d$1]=!0;const rt=Object.getPrototypeOf(this);if(rt.finalize(),rt.h!==void 0&&(this.h=[...rt.h]),this.elementProperties=new Map(rt.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const it=this.properties,st=[...Object.getOwnPropertyNames(it),...Object.getOwnPropertySymbols(it)];for(const bt of st)this.createProperty(bt,it[bt])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(rt){const it=[];if(Array.isArray(rt)){const st=new Set(rt.flat(1/0).reverse());for(const bt of st)it.unshift(c$2(bt))}else rt!==void 0&&it.push(c$2(rt));return it}static _$Ep(rt,it){const st=it.attribute;return st===!1?void 0:typeof st=="string"?st:typeof rt=="string"?rt.toLowerCase():void 0}_$Eu(){var rt;this._$E_=new Promise(it=>this.enableUpdating=it),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(rt=this.constructor.h)===null||rt===void 0||rt.forEach(it=>it(this))}addController(rt){var it,st;((it=this._$ES)!==null&&it!==void 0?it:this._$ES=[]).push(rt),this.renderRoot!==void 0&&this.isConnected&&((st=rt.hostConnected)===null||st===void 0||st.call(rt))}removeController(rt){var it;(it=this._$ES)===null||it===void 0||it.splice(this._$ES.indexOf(rt)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((rt,it)=>{this.hasOwnProperty(it)&&(this._$Ei.set(it,this[it]),delete this[it])})}createRenderRoot(){var rt;const it=(rt=this.shadowRoot)!==null&&rt!==void 0?rt:this.attachShadow(this.constructor.shadowRootOptions);return S$1(it,this.constructor.elementStyles),it}connectedCallback(){var rt;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(rt=this._$ES)===null||rt===void 0||rt.forEach(it=>{var st;return(st=it.hostConnected)===null||st===void 0?void 0:st.call(it)})}enableUpdating(rt){}disconnectedCallback(){var rt;(rt=this._$ES)===null||rt===void 0||rt.forEach(it=>{var st;return(st=it.hostDisconnected)===null||st===void 0?void 0:st.call(it)})}attributeChangedCallback(rt,it,st){this._$AK(rt,st)}_$EO(rt,it,st=l$5){var bt;const xt=this.constructor._$Ep(rt,st);if(xt!==void 0&&st.reflect===!0){const Et=(((bt=st.converter)===null||bt===void 0?void 0:bt.toAttribute)!==void 0?st.converter:n$6).toAttribute(it,st.type);this._$El=rt,Et==null?this.removeAttribute(xt):this.setAttribute(xt,Et),this._$El=null}}_$AK(rt,it){var st;const bt=this.constructor,xt=bt._$Ev.get(rt);if(xt!==void 0&&this._$El!==xt){const Et=bt.getPropertyOptions(xt),kt=typeof Et.converter=="function"?{fromAttribute:Et.converter}:((st=Et.converter)===null||st===void 0?void 0:st.fromAttribute)!==void 0?Et.converter:n$6;this._$El=xt,this[xt]=kt.fromAttribute(it,Et.type),this._$El=null}}requestUpdate(rt,it,st){let bt=!0;rt!==void 0&&(((st=st||this.constructor.getPropertyOptions(rt)).hasChanged||a$3)(this[rt],it)?(this._$AL.has(rt)||this._$AL.set(rt,it),st.reflect===!0&&this._$El!==rt&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(rt,st))):bt=!1),!this.isUpdatePending&&bt&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(it){Promise.reject(it)}const rt=this.scheduleUpdate();return rt!=null&&await rt,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var rt;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((bt,xt)=>this[xt]=bt),this._$Ei=void 0);let it=!1;const st=this._$AL;try{it=this.shouldUpdate(st),it?(this.willUpdate(st),(rt=this._$ES)===null||rt===void 0||rt.forEach(bt=>{var xt;return(xt=bt.hostUpdate)===null||xt===void 0?void 0:xt.call(bt)}),this.update(st)):this._$Ek()}catch(bt){throw it=!1,this._$Ek(),bt}it&&this._$AE(st)}willUpdate(rt){}_$AE(rt){var it;(it=this._$ES)===null||it===void 0||it.forEach(st=>{var bt;return(bt=st.hostUpdated)===null||bt===void 0?void 0:bt.call(st)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(rt)),this.updated(rt)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(rt){return!0}update(rt){this._$EC!==void 0&&(this._$EC.forEach((it,st)=>this._$EO(st,this[st],it)),this._$EC=void 0),this._$Ek()}updated(rt){}firstUpdated(rt){}}u$1[d$1]=!0,u$1.elementProperties=new Map,u$1.elementStyles=[],u$1.shadowRootOptions={mode:"open"},o$5==null||o$5({ReactiveElement:u$1}),((s$4=e$6.reactiveElementVersions)!==null&&s$4!==void 0?s$4:e$6.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$3;const i$6=window,s$3=i$6.trustedTypes,e$5=s$3?s$3.createPolicy("lit-html",{createHTML:nt=>nt}):void 0,o$4="$lit$",n$5=`lit$${(Math.random()+"").slice(9)}$`,l$4="?"+n$5,h=`<${l$4}>`,r=document,u=()=>r.createComment(""),d=nt=>nt===null||typeof nt!="object"&&typeof nt!="function",c$1=Array.isArray,v=nt=>c$1(nt)||typeof(nt==null?void 0:nt[Symbol.iterator])=="function",a$2=`[ 	
\f\r]`,f$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_$1=/-->/g,m=/>/g,p=RegExp(`>|${a$2}(?:([^\\s"'>=/]+)(${a$2}*=${a$2}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),g=/'/g,$=/"/g,y$1=/^(?:script|style|textarea|title)$/i,w$1=nt=>(rt,...it)=>({_$litType$:nt,strings:rt,values:it}),x$1=w$1(1),T=Symbol.for("lit-noChange"),A=Symbol.for("lit-nothing"),E=new WeakMap,C=r.createTreeWalker(r,129,null,!1);function P(nt,rt){if(!Array.isArray(nt)||!nt.hasOwnProperty("raw"))throw Error("invalid template strings array");return e$5!==void 0?e$5.createHTML(rt):rt}const V=(nt,rt)=>{const it=nt.length-1,st=[];let bt,xt=rt===2?"<svg>":"",Et=f$1;for(let kt=0;kt<it;kt++){const Lt=nt[kt];let Pt,Rt,Dt=-1,Bt=0;for(;Bt<Lt.length&&(Et.lastIndex=Bt,Rt=Et.exec(Lt),Rt!==null);)Bt=Et.lastIndex,Et===f$1?Rt[1]==="!--"?Et=_$1:Rt[1]!==void 0?Et=m:Rt[2]!==void 0?(y$1.test(Rt[2])&&(bt=RegExp("</"+Rt[2],"g")),Et=p):Rt[3]!==void 0&&(Et=p):Et===p?Rt[0]===">"?(Et=bt!=null?bt:f$1,Dt=-1):Rt[1]===void 0?Dt=-2:(Dt=Et.lastIndex-Rt[2].length,Pt=Rt[1],Et=Rt[3]===void 0?p:Rt[3]==='"'?$:g):Et===$||Et===g?Et=p:Et===_$1||Et===m?Et=f$1:(Et=p,bt=void 0);const Ft=Et===p&&nt[kt+1].startsWith("/>")?" ":"";xt+=Et===f$1?Lt+h:Dt>=0?(st.push(Pt),Lt.slice(0,Dt)+o$4+Lt.slice(Dt)+n$5+Ft):Lt+n$5+(Dt===-2?(st.push(void 0),kt):Ft)}return[P(nt,xt+(nt[it]||"<?>")+(rt===2?"</svg>":"")),st]};class N{constructor({strings:rt,_$litType$:it},st){let bt;this.parts=[];let xt=0,Et=0;const kt=rt.length-1,Lt=this.parts,[Pt,Rt]=V(rt,it);if(this.el=N.createElement(Pt,st),C.currentNode=this.el.content,it===2){const Dt=this.el.content,Bt=Dt.firstChild;Bt.remove(),Dt.append(...Bt.childNodes)}for(;(bt=C.nextNode())!==null&&Lt.length<kt;){if(bt.nodeType===1){if(bt.hasAttributes()){const Dt=[];for(const Bt of bt.getAttributeNames())if(Bt.endsWith(o$4)||Bt.startsWith(n$5)){const Ft=Rt[Et++];if(Dt.push(Bt),Ft!==void 0){const Yt=bt.getAttribute(Ft.toLowerCase()+o$4).split(n$5),Zt=/([.?@])?(.*)/.exec(Ft);Lt.push({type:1,index:xt,name:Zt[2],strings:Yt,ctor:Zt[1]==="."?H:Zt[1]==="?"?L$2:Zt[1]==="@"?z:k})}else Lt.push({type:6,index:xt})}for(const Bt of Dt)bt.removeAttribute(Bt)}if(y$1.test(bt.tagName)){const Dt=bt.textContent.split(n$5),Bt=Dt.length-1;if(Bt>0){bt.textContent=s$3?s$3.emptyScript:"";for(let Ft=0;Ft<Bt;Ft++)bt.append(Dt[Ft],u()),C.nextNode(),Lt.push({type:2,index:++xt});bt.append(Dt[Bt],u())}}}else if(bt.nodeType===8)if(bt.data===l$4)Lt.push({type:2,index:xt});else{let Dt=-1;for(;(Dt=bt.data.indexOf(n$5,Dt+1))!==-1;)Lt.push({type:7,index:xt}),Dt+=n$5.length-1}xt++}}static createElement(rt,it){const st=r.createElement("template");return st.innerHTML=rt,st}}function S(nt,rt,it=nt,st){var bt,xt,Et,kt;if(rt===T)return rt;let Lt=st!==void 0?(bt=it._$Co)===null||bt===void 0?void 0:bt[st]:it._$Cl;const Pt=d(rt)?void 0:rt._$litDirective$;return(Lt==null?void 0:Lt.constructor)!==Pt&&((xt=Lt==null?void 0:Lt._$AO)===null||xt===void 0||xt.call(Lt,!1),Pt===void 0?Lt=void 0:(Lt=new Pt(nt),Lt._$AT(nt,it,st)),st!==void 0?((Et=(kt=it)._$Co)!==null&&Et!==void 0?Et:kt._$Co=[])[st]=Lt:it._$Cl=Lt),Lt!==void 0&&(rt=S(nt,Lt._$AS(nt,rt.values),Lt,st)),rt}class M{constructor(rt,it){this._$AV=[],this._$AN=void 0,this._$AD=rt,this._$AM=it}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(rt){var it;const{el:{content:st},parts:bt}=this._$AD,xt=((it=rt==null?void 0:rt.creationScope)!==null&&it!==void 0?it:r).importNode(st,!0);C.currentNode=xt;let Et=C.nextNode(),kt=0,Lt=0,Pt=bt[0];for(;Pt!==void 0;){if(kt===Pt.index){let Rt;Pt.type===2?Rt=new R(Et,Et.nextSibling,this,rt):Pt.type===1?Rt=new Pt.ctor(Et,Pt.name,Pt.strings,this,rt):Pt.type===6&&(Rt=new Z(Et,this,rt)),this._$AV.push(Rt),Pt=bt[++Lt]}kt!==(Pt==null?void 0:Pt.index)&&(Et=C.nextNode(),kt++)}return C.currentNode=r,xt}v(rt){let it=0;for(const st of this._$AV)st!==void 0&&(st.strings!==void 0?(st._$AI(rt,st,it),it+=st.strings.length-2):st._$AI(rt[it])),it++}}class R{constructor(rt,it,st,bt){var xt;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=rt,this._$AB=it,this._$AM=st,this.options=bt,this._$Cp=(xt=bt==null?void 0:bt.isConnected)===null||xt===void 0||xt}get _$AU(){var rt,it;return(it=(rt=this._$AM)===null||rt===void 0?void 0:rt._$AU)!==null&&it!==void 0?it:this._$Cp}get parentNode(){let rt=this._$AA.parentNode;const it=this._$AM;return it!==void 0&&(rt==null?void 0:rt.nodeType)===11&&(rt=it.parentNode),rt}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(rt,it=this){rt=S(this,rt,it),d(rt)?rt===A||rt==null||rt===""?(this._$AH!==A&&this._$AR(),this._$AH=A):rt!==this._$AH&&rt!==T&&this._(rt):rt._$litType$!==void 0?this.g(rt):rt.nodeType!==void 0?this.$(rt):v(rt)?this.T(rt):this._(rt)}k(rt){return this._$AA.parentNode.insertBefore(rt,this._$AB)}$(rt){this._$AH!==rt&&(this._$AR(),this._$AH=this.k(rt))}_(rt){this._$AH!==A&&d(this._$AH)?this._$AA.nextSibling.data=rt:this.$(r.createTextNode(rt)),this._$AH=rt}g(rt){var it;const{values:st,_$litType$:bt}=rt,xt=typeof bt=="number"?this._$AC(rt):(bt.el===void 0&&(bt.el=N.createElement(P(bt.h,bt.h[0]),this.options)),bt);if(((it=this._$AH)===null||it===void 0?void 0:it._$AD)===xt)this._$AH.v(st);else{const Et=new M(xt,this),kt=Et.u(this.options);Et.v(st),this.$(kt),this._$AH=Et}}_$AC(rt){let it=E.get(rt.strings);return it===void 0&&E.set(rt.strings,it=new N(rt)),it}T(rt){c$1(this._$AH)||(this._$AH=[],this._$AR());const it=this._$AH;let st,bt=0;for(const xt of rt)bt===it.length?it.push(st=new R(this.k(u()),this.k(u()),this,this.options)):st=it[bt],st._$AI(xt),bt++;bt<it.length&&(this._$AR(st&&st._$AB.nextSibling,bt),it.length=bt)}_$AR(rt=this._$AA.nextSibling,it){var st;for((st=this._$AP)===null||st===void 0||st.call(this,!1,!0,it);rt&&rt!==this._$AB;){const bt=rt.nextSibling;rt.remove(),rt=bt}}setConnected(rt){var it;this._$AM===void 0&&(this._$Cp=rt,(it=this._$AP)===null||it===void 0||it.call(this,rt))}}class k{constructor(rt,it,st,bt,xt){this.type=1,this._$AH=A,this._$AN=void 0,this.element=rt,this.name=it,this._$AM=bt,this.options=xt,st.length>2||st[0]!==""||st[1]!==""?(this._$AH=Array(st.length-1).fill(new String),this.strings=st):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(rt,it=this,st,bt){const xt=this.strings;let Et=!1;if(xt===void 0)rt=S(this,rt,it,0),Et=!d(rt)||rt!==this._$AH&&rt!==T,Et&&(this._$AH=rt);else{const kt=rt;let Lt,Pt;for(rt=xt[0],Lt=0;Lt<xt.length-1;Lt++)Pt=S(this,kt[st+Lt],it,Lt),Pt===T&&(Pt=this._$AH[Lt]),Et||(Et=!d(Pt)||Pt!==this._$AH[Lt]),Pt===A?rt=A:rt!==A&&(rt+=(Pt!=null?Pt:"")+xt[Lt+1]),this._$AH[Lt]=Pt}Et&&!bt&&this.j(rt)}j(rt){rt===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,rt!=null?rt:"")}}class H extends k{constructor(){super(...arguments),this.type=3}j(rt){this.element[this.name]=rt===A?void 0:rt}}const I=s$3?s$3.emptyScript:"";class L$2 extends k{constructor(){super(...arguments),this.type=4}j(rt){rt&&rt!==A?this.element.setAttribute(this.name,I):this.element.removeAttribute(this.name)}}class z extends k{constructor(rt,it,st,bt,xt){super(rt,it,st,bt,xt),this.type=5}_$AI(rt,it=this){var st;if((rt=(st=S(this,rt,it,0))!==null&&st!==void 0?st:A)===T)return;const bt=this._$AH,xt=rt===A&&bt!==A||rt.capture!==bt.capture||rt.once!==bt.once||rt.passive!==bt.passive,Et=rt!==A&&(bt===A||xt);xt&&this.element.removeEventListener(this.name,this,bt),Et&&this.element.addEventListener(this.name,this,rt),this._$AH=rt}handleEvent(rt){var it,st;typeof this._$AH=="function"?this._$AH.call((st=(it=this.options)===null||it===void 0?void 0:it.host)!==null&&st!==void 0?st:this.element,rt):this._$AH.handleEvent(rt)}}class Z{constructor(rt,it,st){this.element=rt,this.type=6,this._$AN=void 0,this._$AM=it,this.options=st}get _$AU(){return this._$AM._$AU}_$AI(rt){S(this,rt)}}const B=i$6.litHtmlPolyfillSupport;B==null||B(N,R),((t$3=i$6.litHtmlVersions)!==null&&t$3!==void 0?t$3:i$6.litHtmlVersions=[]).push("2.8.0");const D=(nt,rt,it)=>{var st,bt;const xt=(st=it==null?void 0:it.renderBefore)!==null&&st!==void 0?st:rt;let Et=xt._$litPart$;if(Et===void 0){const kt=(bt=it==null?void 0:it.renderBefore)!==null&&bt!==void 0?bt:null;xt._$litPart$=Et=new R(rt.insertBefore(u(),kt),kt,void 0,it!=null?it:{})}return Et._$AI(nt),Et};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l$3,o$3;class s$2 extends u$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var rt,it;const st=super.createRenderRoot();return(rt=(it=this.renderOptions).renderBefore)!==null&&rt!==void 0||(it.renderBefore=st.firstChild),st}update(rt){const it=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(rt),this._$Do=D(it,this.renderRoot,this.renderOptions)}connectedCallback(){var rt;super.connectedCallback(),(rt=this._$Do)===null||rt===void 0||rt.setConnected(!0)}disconnectedCallback(){var rt;super.disconnectedCallback(),(rt=this._$Do)===null||rt===void 0||rt.setConnected(!1)}render(){return T}}s$2.finalized=!0,s$2._$litElement$=!0,(l$3=globalThis.litElementHydrateSupport)===null||l$3===void 0||l$3.call(globalThis,{LitElement:s$2});const n$4=globalThis.litElementPolyfillSupport;n$4==null||n$4({LitElement:s$2});((o$3=globalThis.litElementVersions)!==null&&o$3!==void 0?o$3:globalThis.litElementVersions=[]).push("3.3.3");var component_styles_default=i$7`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`,dialog_styles_default=i$7`
  ${component_styles_default}

  :host {
    --width: 31rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--sl-z-index-dialog);
  }

  .dialog__panel {
    display: flex;
    flex-direction: column;
    z-index: 2;
    width: var(--width);
    max-width: calc(100% - var(--sl-spacing-2x-large));
    max-height: calc(100% - var(--sl-spacing-2x-large));
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--sl-shadow-x-large);
  }

  .dialog__panel:focus {
    outline: none;
  }

  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */
  @media screen and (max-width: 420px) {
    .dialog__panel {
      max-height: 80vh;
    }
  }

  .dialog--open .dialog__panel {
    display: flex;
    opacity: 1;
  }

  .dialog__header {
    flex: 0 0 auto;
    display: flex;
  }

  .dialog__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .dialog__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .dialog__header-actions sl-icon-button,
  .dialog__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .dialog__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .dialog__footer {
    flex: 0 0 auto;
    text-align: right;
    padding: var(--footer-spacing);
  }

  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  .dialog:not(.dialog--has-footer) .dialog__footer {
    display: none;
  }

  .dialog__overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
  }

  @media (forced-colors: active) {
    .dialog__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`,icon_button_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-x-fast) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`,icon_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`,library={name:"default",resolver:nt=>getBasePath(`assets/icons/${nt}.svg`)},library_default_default=library,icons={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,copy:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files" viewBox="0 0 16 16" part="svg">
      <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"></path>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},systemLibrary={name:"system",resolver:nt=>nt in icons?`data:image/svg+xml,${encodeURIComponent(icons[nt])}`:""},library_system_default=systemLibrary,registry=[library_default_default,library_system_default],watchedIcons=[];function watchIcon(nt){watchedIcons.push(nt)}function unwatchIcon(nt){watchedIcons=watchedIcons.filter(rt=>rt!==nt)}function getIconLibrary(nt){return registry.find(rt=>rt.name===nt)}function watch(nt,rt){const it=__spreadValues({waitUntilFirstUpdate:!1},rt);return(st,bt)=>{const{update:xt}=st,Et=Array.isArray(nt)?nt:[nt];st.update=function(kt){Et.forEach(Lt=>{const Pt=Lt;if(kt.has(Pt)){const Rt=kt.get(Pt),Dt=this[Pt];Rt!==Dt&&(!it.waitUntilFirstUpdate||this.hasUpdated)&&this[bt](Rt,Dt)}}),xt.call(this,kt)}}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$5=(nt,rt)=>rt.kind==="method"&&rt.descriptor&&!("value"in rt.descriptor)?{...rt,finisher(it){it.createProperty(rt.key,nt)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:rt.key,initializer(){typeof rt.initializer=="function"&&(this[rt.key]=rt.initializer.call(this))},finisher(it){it.createProperty(rt.key,nt)}},e$4=(nt,rt,it)=>{rt.constructor.createProperty(it,nt)};function n$3(nt){return(rt,it)=>it!==void 0?e$4(nt,rt,it):i$5(nt,rt)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function t$2(nt){return n$3({...nt,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$2=({finisher:nt,descriptor:rt})=>(it,st)=>{var bt;if(st===void 0){const xt=(bt=it.originalKey)!==null&&bt!==void 0?bt:it.key,Et=rt!=null?{kind:"method",placement:"prototype",key:xt,descriptor:rt(it.key)}:{...it,key:xt};return nt!=null&&(Et.finisher=function(kt){nt(kt,xt)}),Et}{const xt=it.constructor;rt!==void 0&&Object.defineProperty(it,st,rt(st)),nt==null||nt(xt,st)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function e$3(nt){return o$2({finisher:(rt,it)=>{Object.assign(rt.prototype[it],nt)}})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function i$4(nt,rt){return o$2({descriptor:it=>{const st={get(){var bt,xt;return(xt=(bt=this.renderRoot)===null||bt===void 0?void 0:bt.querySelector(nt))!==null&&xt!==void 0?xt:null},enumerable:!0,configurable:!0};if(rt){const bt=typeof it=="symbol"?Symbol():"__"+it;st.get=function(){var xt,Et;return this[bt]===void 0&&(this[bt]=(Et=(xt=this.renderRoot)===null||xt===void 0?void 0:xt.querySelector(nt))!==null&&Et!==void 0?Et:null),this[bt]}}return st}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$2;((n$2=window.HTMLSlotElement)===null||n$2===void 0?void 0:n$2.prototype.assignedElements)!=null;var ShoelaceElement=class extends s$2{constructor(){super(),Object.entries(this.constructor.dependencies).forEach(([nt,rt])=>{this.constructor.define(nt,rt)})}emit(nt,rt){const it=new CustomEvent(nt,__spreadValues({bubbles:!0,cancelable:!1,composed:!0,detail:{}},rt));return this.dispatchEvent(it),it}static define(nt,rt=this,it={}){const st=customElements.get(nt);if(!st){customElements.define(nt,class extends rt{},it);return}let bt=" (unknown version)",xt=bt;"version"in rt&&rt.version&&(bt=" v"+rt.version),"version"in st&&st.version&&(xt=" v"+st.version),!(bt&&xt&&bt===xt)&&console.warn(`Attempted to register <${nt}>${bt}, but <${nt}>${xt} has already been registered.`)}};ShoelaceElement.version="2.7.0";ShoelaceElement.dependencies={};__decorateClass([n$3()],ShoelaceElement.prototype,"dir",2);__decorateClass([n$3()],ShoelaceElement.prototype,"lang",2);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$1=(nt,rt)=>rt===void 0?(nt==null?void 0:nt._$litType$)!==void 0:(nt==null?void 0:nt._$litType$)===rt,e$2=nt=>nt.strings===void 0,s$1={},a$1=(nt,rt=s$1)=>nt._$AH=rt;var CACHEABLE_ERROR=Symbol(),RETRYABLE_ERROR=Symbol(),parser$e,iconCache=new Map,SlIcon=class extends ShoelaceElement{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(nt,rt){var it;let st;if(rt!=null&&rt.spriteSheet)return x$1`<svg part="svg">
        <use part="use" href="${nt}"></use>
      </svg>`;try{if(st=await fetch(nt,{mode:"cors"}),!st.ok)return st.status===410?CACHEABLE_ERROR:RETRYABLE_ERROR}catch{return RETRYABLE_ERROR}try{const bt=document.createElement("div");bt.innerHTML=await st.text();const xt=bt.firstElementChild;if(((it=xt==null?void 0:xt.tagName)==null?void 0:it.toLowerCase())!=="svg")return CACHEABLE_ERROR;parser$e||(parser$e=new DOMParser);const kt=parser$e.parseFromString(xt.outerHTML,"text/html").body.querySelector("svg");return kt?(kt.part.add("svg"),document.adoptNode(kt)):CACHEABLE_ERROR}catch{return CACHEABLE_ERROR}}connectedCallback(){super.connectedCallback(),watchIcon(this)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),unwatchIcon(this)}getUrl(){const nt=getIconLibrary(this.library);return this.name&&nt?nt.resolver(this.name):this.src}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var nt;const rt=getIconLibrary(this.library),it=this.getUrl();if(!it){this.svg=null;return}let st=iconCache.get(it);if(st||(st=this.resolveIcon(it,rt),iconCache.set(it,st)),!this.initialRender)return;const bt=await st;if(bt===RETRYABLE_ERROR&&iconCache.delete(it),it===this.getUrl()){if(t$1(bt)){this.svg=bt;return}switch(bt){case RETRYABLE_ERROR:case CACHEABLE_ERROR:this.svg=null,this.emit("sl-error");break;default:this.svg=bt.cloneNode(!0),(nt=rt==null?void 0:rt.mutator)==null||nt.call(rt,this.svg),this.emit("sl-load")}}}render(){return this.svg}};SlIcon.styles=icon_styles_default;__decorateClass([t$2()],SlIcon.prototype,"svg",2);__decorateClass([n$3({reflect:!0})],SlIcon.prototype,"name",2);__decorateClass([n$3()],SlIcon.prototype,"src",2);__decorateClass([n$3()],SlIcon.prototype,"label",2);__decorateClass([n$3({reflect:!0})],SlIcon.prototype,"library",2);__decorateClass([watch("label")],SlIcon.prototype,"handleLabelChange",1);__decorateClass([watch(["name","src","library"])],SlIcon.prototype,"setIcon",1);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$1=nt=>(...rt)=>({_$litDirective$:nt,values:rt});class i$3{constructor(rt){}get _$AU(){return this._$AM._$AU}_$AT(rt,it,st){this._$Ct=rt,this._$AM=it,this._$Ci=st}_$AS(rt,it){return this.update(rt,it)}update(rt,it){return this.render(...it)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$1=e$1(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t.ATTRIBUTE||nt.name!=="class"||((rt=nt.strings)===null||rt===void 0?void 0:rt.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(nt){return" "+Object.keys(nt).filter(rt=>nt[rt]).join(" ")+" "}update(nt,[rt]){var it,st;if(this.it===void 0){this.it=new Set,nt.strings!==void 0&&(this.nt=new Set(nt.strings.join(" ").split(/\s/).filter(xt=>xt!=="")));for(const xt in rt)rt[xt]&&!(!((it=this.nt)===null||it===void 0)&&it.has(xt))&&this.it.add(xt);return this.render(rt)}const bt=nt.element.classList;this.it.forEach(xt=>{xt in rt||(bt.remove(xt),this.it.delete(xt))});for(const xt in rt){const Et=!!rt[xt];Et===this.it.has(xt)||((st=this.nt)===null||st===void 0?void 0:st.has(xt))||(Et?(bt.add(xt),this.it.add(xt)):(bt.remove(xt),this.it.delete(xt)))}return T}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e=Symbol.for(""),l$2=nt=>{if((nt==null?void 0:nt.r)===e)return nt==null?void 0:nt._$litStatic$},i$2=(nt,...rt)=>({_$litStatic$:rt.reduce((it,st,bt)=>it+(xt=>{if(xt._$litStatic$!==void 0)return xt._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${xt}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(st)+nt[bt+1],nt[0]),r:e}),s=new Map,a=nt=>(rt,...it)=>{const st=it.length;let bt,xt;const Et=[],kt=[];let Lt,Pt=0,Rt=!1;for(;Pt<st;){for(Lt=rt[Pt];Pt<st&&(xt=it[Pt],(bt=l$2(xt))!==void 0);)Lt+=bt+rt[++Pt],Rt=!0;Pt!==st&&kt.push(xt),Et.push(Lt),Pt++}if(Pt===st&&Et.push(rt[st]),Rt){const Dt=Et.join("$$lit$$");(rt=s.get(Dt))===void 0&&(Et.raw=Et,s.set(Dt,rt=Et)),it=kt}return nt(rt,...it)},n$1=a(x$1);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const l$1=nt=>nt!=null?nt:A;var SlIconButton=class extends ShoelaceElement{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(nt){this.disabled&&(nt.preventDefault(),nt.stopPropagation())}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}render(){const nt=!!this.href,rt=nt?i$2`a`:i$2`button`;return n$1`
      <${rt}
        part="base"
        class=${o$1({"icon-button":!0,"icon-button--disabled":!nt&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${l$1(nt?void 0:this.disabled)}
        type=${l$1(nt?void 0:"button")}
        href=${l$1(nt?this.href:void 0)}
        target=${l$1(nt?this.target:void 0)}
        download=${l$1(nt?this.download:void 0)}
        rel=${l$1(nt&&this.target?"noreferrer noopener":void 0)}
        role=${l$1(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${l$1(this.name)}
          library=${l$1(this.library)}
          src=${l$1(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${rt}>
    `}};SlIconButton.styles=icon_button_styles_default;SlIconButton.dependencies={"sl-icon":SlIcon};__decorateClass([i$4(".icon-button")],SlIconButton.prototype,"button",2);__decorateClass([t$2()],SlIconButton.prototype,"hasFocus",2);__decorateClass([n$3()],SlIconButton.prototype,"name",2);__decorateClass([n$3()],SlIconButton.prototype,"library",2);__decorateClass([n$3()],SlIconButton.prototype,"src",2);__decorateClass([n$3()],SlIconButton.prototype,"href",2);__decorateClass([n$3()],SlIconButton.prototype,"target",2);__decorateClass([n$3()],SlIconButton.prototype,"download",2);__decorateClass([n$3()],SlIconButton.prototype,"label",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlIconButton.prototype,"disabled",2);var defaultAnimationRegistry=new Map,customAnimationRegistry=new WeakMap;function ensureAnimation(nt){return nt!=null?nt:{keyframes:[],options:{duration:0}}}function getLogicalAnimation(nt,rt){return rt.toLowerCase()==="rtl"?{keyframes:nt.rtlKeyframes||nt.keyframes,options:nt.options}:nt}function setDefaultAnimation(nt,rt){defaultAnimationRegistry.set(nt,ensureAnimation(rt))}function getAnimation(nt,rt,it){const st=customAnimationRegistry.get(nt);if(st!=null&&st[rt])return getLogicalAnimation(st[rt],it.dir);const bt=defaultAnimationRegistry.get(rt);return bt?getLogicalAnimation(bt,it.dir):{keyframes:[],options:{duration:0}}}function waitForEvent(nt,rt){return new Promise(it=>{function st(bt){bt.target===nt&&(nt.removeEventListener(rt,st),it())}nt.addEventListener(rt,st)})}function animateTo(nt,rt,it){return new Promise(st=>{if((it==null?void 0:it.duration)===1/0)throw new Error("Promise-based animations must be finite.");const bt=nt.animate(rt,__spreadProps(__spreadValues({},it),{duration:prefersReducedMotion()?0:it.duration}));bt.addEventListener("cancel",st,{once:!0}),bt.addEventListener("finish",st,{once:!0})})}function parseDuration$1(nt){return nt=nt.toString().toLowerCase(),nt.indexOf("ms")>-1?parseFloat(nt):nt.indexOf("s")>-1?parseFloat(nt)*1e3:parseFloat(nt)}function prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function stopAnimations(nt){return Promise.all(nt.getAnimations().map(rt=>new Promise(it=>{const st=requestAnimationFrame(it);rt.addEventListener("cancel",()=>st,{once:!0}),rt.addEventListener("finish",()=>st,{once:!0}),rt.cancel()})))}function shimKeyframesHeightAuto(nt,rt){return nt.map(it=>__spreadProps(__spreadValues({},it),{height:it.height==="auto"?`${rt}px`:it.height}))}var HasSlotController=class{constructor(nt,...rt){this.slotNames=[],this.handleSlotChange=it=>{const st=it.target;(this.slotNames.includes("[default]")&&!st.name||st.name&&this.slotNames.includes(st.name))&&this.host.requestUpdate()},(this.host=nt).addController(this),this.slotNames=rt}hasDefaultSlot(){return[...this.host.childNodes].some(nt=>{if(nt.nodeType===nt.TEXT_NODE&&nt.textContent.trim()!=="")return!0;if(nt.nodeType===nt.ELEMENT_NODE){const rt=nt;if(rt.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!rt.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(nt){return this.host.querySelector(`:scope > [slot="${nt}"]`)!==null}test(nt){return nt==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(nt)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}};function getTextContent(nt){if(!nt)return"";const rt=nt.assignedNodes({flatten:!0});let it="";return[...rt].forEach(st=>{st.nodeType===Node.TEXT_NODE&&(it+=st.textContent)}),it}const connectedElements=new Set,documentElementObserver=new MutationObserver(update),translations=new Map;let documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,fallback;documentElementObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});function registerTranslation(...nt){nt.map(rt=>{const it=rt.$code.toLowerCase();translations.has(it)?translations.set(it,Object.assign(Object.assign({},translations.get(it)),rt)):translations.set(it,rt),fallback||(fallback=rt)}),update()}function update(){documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,[...connectedElements.keys()].map(nt=>{typeof nt.requestUpdate=="function"&&nt.requestUpdate()})}class LocalizeController$1{constructor(rt){this.host=rt,this.host.addController(this)}hostConnected(){connectedElements.add(this.host)}hostDisconnected(){connectedElements.delete(this.host)}dir(){return`${this.host.dir||documentDirection}`.toLowerCase()}lang(){return`${this.host.lang||documentLanguage}`.toLowerCase()}getTranslationData(rt){var it,st;const bt=new Intl.Locale(rt),xt=bt==null?void 0:bt.language.toLowerCase(),Et=(st=(it=bt==null?void 0:bt.region)===null||it===void 0?void 0:it.toLowerCase())!==null&&st!==void 0?st:"",kt=translations.get(`${xt}-${Et}`),Lt=translations.get(xt);return{locale:bt,language:xt,region:Et,primary:kt,secondary:Lt}}exists(rt,it){var st;const{primary:bt,secondary:xt}=this.getTranslationData((st=it.lang)!==null&&st!==void 0?st:this.lang());return it=Object.assign({includeFallback:!1},it),!!(bt&&bt[rt]||xt&&xt[rt]||it.includeFallback&&fallback&&fallback[rt])}term(rt,...it){const{primary:st,secondary:bt}=this.getTranslationData(this.lang());let xt;if(st&&st[rt])xt=st[rt];else if(bt&&bt[rt])xt=bt[rt];else if(fallback&&fallback[rt])xt=fallback[rt];else return console.error(`No translation found for: ${String(rt)}`),String(rt);return typeof xt=="function"?xt(...it):xt}date(rt,it){return rt=new Date(rt),new Intl.DateTimeFormat(this.lang(),it).format(rt)}number(rt,it){return rt=Number(rt),isNaN(rt)?"":new Intl.NumberFormat(this.lang(),it).format(rt)}relativeTime(rt,it,st){return new Intl.RelativeTimeFormat(this.lang(),st).format(rt,it)}}var LocalizeController=class extends LocalizeController$1{},SlDialog=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController(this),this.modal=new Modal$1(this),this.open=!1,this.label="",this.noHeader=!1,this.handleDocumentKeyDown=nt=>{nt.key==="Escape"&&this.modal.isActive()&&this.open&&(nt.stopPropagation(),this.requestClose("keyboard"))}}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.addOpenListeners(),this.modal.activate(),lockBodyScrolling(this))}disconnectedCallback(){super.disconnectedCallback(),this.modal.deactivate(),unlockBodyScrolling(this)}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"dialog.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.modal.activate(),lockBodyScrolling(this);const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]),this.dialog.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,"dialog.show",{dir:this.localize.dir()}),it=getAnimation(this,"dialog.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),this.modal.deactivate(),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]);const nt=getAnimation(this,"dialog.hide",{dir:this.localize.dir()}),rt=getAnimation(this,"dialog.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.dialog.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1,unlockBodyScrolling(this);const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return x$1`
      <div
        part="base"
        class=${o$1({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="dialog__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${l$1(this.noHeader?this.label:void 0)}
          aria-labelledby=${l$1(this.noHeader?void 0:"title")}
          tabindex="-1"
        >
          ${this.noHeader?"":x$1`
                <header part="header" class="dialog__header">
                  <h2 part="title" class="dialog__title" id="title">
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="dialog__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="dialog__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click="${()=>this.requestClose("close-button")}"
                    ></sl-icon-button>
                  </div>
                </header>
              `}
          ${""}
          <slot part="body" class="dialog__body" tabindex="-1"></slot>

          <footer part="footer" class="dialog__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDialog.styles=dialog_styles_default;SlDialog.dependencies={"sl-icon-button":SlIconButton};__decorateClass([i$4(".dialog")],SlDialog.prototype,"dialog",2);__decorateClass([i$4(".dialog__panel")],SlDialog.prototype,"panel",2);__decorateClass([i$4(".dialog__overlay")],SlDialog.prototype,"overlay",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlDialog.prototype,"open",2);__decorateClass([n$3({reflect:!0})],SlDialog.prototype,"label",2);__decorateClass([n$3({attribute:"no-header",type:Boolean,reflect:!0})],SlDialog.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDialog.prototype,"handleOpenChange",1);setDefaultAnimation("dialog.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.denyClose",{keyframes:[{scale:1},{scale:1.02},{scale:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});SlDialog.define("sl-dialog");var translation={$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copied:"Copied",copy:"Copy",currentValue:"Current value",error:"Error",goToSlide:(nt,rt)=>`Go to slide ${nt} of ${rt}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:nt=>nt===0?"No options selected":nt===1?"1 option selected":`${nt} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:nt=>`Slide ${nt}`,toggleColorFormat:"Toggle color format"};registerTranslation(translation);var spinner_styles_default=i$7`
  ${component_styles_default}

  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
      stroke-dasharray: 0.01em, 2.75em;
    }

    50% {
      transform: rotate(450deg);
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      transform: rotate(1080deg);
      stroke-dasharray: 0.01em, 2.75em;
    }
  }
`,SlSpinner=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this)}render(){return x$1`
      <svg part="base" class="spinner" role="progressbar" aria-label=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};SlSpinner.styles=spinner_styles_default;var formCollections=new WeakMap,reportValidityOverloads=new WeakMap,userInteractedControls=new WeakSet,interactions=new WeakMap,FormControlController=class{constructor(nt,rt){this.handleFormData=it=>{const st=this.options.disabled(this.host),bt=this.options.name(this.host),xt=this.options.value(this.host),Et=this.host.tagName.toLowerCase()==="sl-button";!st&&!Et&&typeof bt=="string"&&bt.length>0&&typeof xt<"u"&&(Array.isArray(xt)?xt.forEach(kt=>{it.formData.append(bt,kt.toString())}):it.formData.append(bt,xt.toString()))},this.handleFormSubmit=it=>{var st;const bt=this.options.disabled(this.host),xt=this.options.reportValidity;this.form&&!this.form.noValidate&&((st=formCollections.get(this.form))==null||st.forEach(Et=>{this.setUserInteracted(Et,!0)})),this.form&&!this.form.noValidate&&!bt&&!xt(this.host)&&(it.preventDefault(),it.stopImmediatePropagation())},this.handleFormReset=()=>{this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1),interactions.set(this.host,[])},this.handleInteraction=it=>{const st=interactions.get(this.host);st.includes(it.type)||st.push(it.type),st.length===this.options.assumeInteractionOn.length&&this.setUserInteracted(this.host,!0)},this.reportFormValidity=()=>{if(this.form&&!this.form.noValidate){const it=this.form.querySelectorAll("*");for(const st of it)if(typeof st.reportValidity=="function"&&!st.reportValidity())return!1}return!0},(this.host=nt).addController(this),this.options=__spreadValues({form:it=>{if(it.hasAttribute("form")&&it.getAttribute("form")!==""){const st=it.getRootNode(),bt=it.getAttribute("form");if(bt)return st.getElementById(bt)}return it.closest("form")},name:it=>it.name,value:it=>it.value,defaultValue:it=>it.defaultValue,disabled:it=>{var st;return(st=it.disabled)!=null?st:!1},reportValidity:it=>typeof it.reportValidity=="function"?it.reportValidity():!0,setValue:(it,st)=>it.value=st,assumeInteractionOn:["sl-input"]},rt)}hostConnected(){const nt=this.options.form(this.host);nt&&this.attachForm(nt),interactions.set(this.host,[]),this.options.assumeInteractionOn.forEach(rt=>{this.host.addEventListener(rt,this.handleInteraction)})}hostDisconnected(){this.detachForm(),interactions.delete(this.host),this.options.assumeInteractionOn.forEach(nt=>{this.host.removeEventListener(nt,this.handleInteraction)})}hostUpdated(){const nt=this.options.form(this.host);nt||this.detachForm(),nt&&this.form!==nt&&(this.detachForm(),this.attachForm(nt)),this.host.hasUpdated&&this.setValidity(this.host.validity.valid)}attachForm(nt){nt?(this.form=nt,formCollections.has(this.form)?formCollections.get(this.form).add(this.host):formCollections.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)||(reportValidityOverloads.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity())):this.form=void 0}detachForm(){var nt;this.form&&((nt=formCollections.get(this.form))==null||nt.delete(this.host),this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)&&(this.form.reportValidity=reportValidityOverloads.get(this.form),reportValidityOverloads.delete(this.form))),this.form=void 0}setUserInteracted(nt,rt){rt?userInteractedControls.add(nt):userInteractedControls.delete(nt),nt.requestUpdate()}doAction(nt,rt){if(this.form){const it=document.createElement("button");it.type=nt,it.style.position="absolute",it.style.width="0",it.style.height="0",it.style.clipPath="inset(50%)",it.style.overflow="hidden",it.style.whiteSpace="nowrap",rt&&(it.name=rt.name,it.value=rt.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(st=>{rt.hasAttribute(st)&&it.setAttribute(st,rt.getAttribute(st))})),this.form.append(it),it.click(),it.remove()}}getForm(){var nt;return(nt=this.form)!=null?nt:null}reset(nt){this.doAction("reset",nt)}submit(nt){this.doAction("submit",nt)}setValidity(nt){const rt=this.host,it=Boolean(userInteractedControls.has(rt)),st=Boolean(rt.required);rt.toggleAttribute("data-required",st),rt.toggleAttribute("data-optional",!st),rt.toggleAttribute("data-invalid",!nt),rt.toggleAttribute("data-valid",nt),rt.toggleAttribute("data-user-invalid",!nt&&it),rt.toggleAttribute("data-user-valid",nt&&it)}updateValidity(){const nt=this.host;this.setValidity(nt.validity.valid)}emitInvalidEvent(nt){const rt=new CustomEvent("sl-invalid",{bubbles:!1,composed:!1,cancelable:!0,detail:{}});nt||rt.preventDefault(),this.host.dispatchEvent(rt)||nt==null||nt.preventDefault()}},validValidityState=Object.freeze({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1});Object.freeze(__spreadProps(__spreadValues({},validValidityState),{valid:!1,valueMissing:!0}));Object.freeze(__spreadProps(__spreadValues({},validValidityState),{valid:!1,customError:!0}));var button_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up from children */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    height: auto;
    min-height: var(--sl-input-height-small);
    font-size: var(--sl-button-font-size-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    height: auto;
    min-height: var(--sl-input-height-medium);
    font-size: var(--sl-button-font-size-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    height: auto;
    min-height: var(--sl-input-height-large);
    font-size: var(--sl-button-font-size-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host(.sl-button-group__button--inner) .button {
    border-radius: 0;
  }

  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(
      .sl-button-group__button:not(
          .sl-button-group__button--first,
          .sl-button-group__button--radio,
          [variant='default']
        ):not(:hover)
    )
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host(.sl-button-group__button--hover) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host(.sl-button-group__button--focus),
  :host(.sl-button-group__button[checked]) {
    z-index: 2;
  }
`,SlButton=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this,{form:nt=>{if(nt.hasAttribute("form")){const rt=nt.getRootNode(),it=nt.getAttribute("form");return rt.getElementById(it)}return nt.closest("form")},assumeInteractionOn:["click"]}),this.hasSlotController=new HasSlotController(this,"[default]","prefix","suffix"),this.localize=new LocalizeController(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href="",this.rel="noreferrer noopener"}get validity(){return this.isButton()?this.button.validity:validValidityState}get validationMessage(){return this.isButton()?this.button.validationMessage:""}firstUpdated(){this.isButton()&&this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(){this.type==="submit"&&this.formControlController.submit(this),this.type==="reset"&&this.formControlController.reset(this)}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&this.formControlController.setValidity(this.disabled)}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}getForm(){return this.formControlController.getForm()}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(nt){this.isButton()&&(this.button.setCustomValidity(nt),this.formControlController.updateValidity())}render(){const nt=this.isLink(),rt=nt?i$2`a`:i$2`button`;return n$1`
      <${rt}
        part="base"
        class=${o$1({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${l$1(nt?void 0:this.disabled)}
        type=${l$1(nt?void 0:this.type)}
        title=${this.title}
        name=${l$1(nt?void 0:this.name)}
        value=${l$1(nt?void 0:this.value)}
        href=${l$1(nt?this.href:void 0)}
        target=${l$1(nt?this.target:void 0)}
        download=${l$1(nt?this.download:void 0)}
        rel=${l$1(nt?this.rel:void 0)}
        role=${l$1(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @invalid=${this.isButton()?this.handleInvalid:null}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?n$1` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?n$1`<sl-spinner part="spinner"></sl-spinner>`:""}
      </${rt}>
    `}};SlButton.styles=button_styles_default;SlButton.dependencies={"sl-icon":SlIcon,"sl-spinner":SlSpinner};__decorateClass([i$4(".button")],SlButton.prototype,"button",2);__decorateClass([t$2()],SlButton.prototype,"hasFocus",2);__decorateClass([t$2()],SlButton.prototype,"invalid",2);__decorateClass([n$3()],SlButton.prototype,"title",2);__decorateClass([n$3({reflect:!0})],SlButton.prototype,"variant",2);__decorateClass([n$3({reflect:!0})],SlButton.prototype,"size",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlButton.prototype,"caret",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlButton.prototype,"disabled",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlButton.prototype,"loading",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlButton.prototype,"outline",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlButton.prototype,"pill",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlButton.prototype,"circle",2);__decorateClass([n$3()],SlButton.prototype,"type",2);__decorateClass([n$3()],SlButton.prototype,"name",2);__decorateClass([n$3()],SlButton.prototype,"value",2);__decorateClass([n$3()],SlButton.prototype,"href",2);__decorateClass([n$3()],SlButton.prototype,"target",2);__decorateClass([n$3()],SlButton.prototype,"rel",2);__decorateClass([n$3()],SlButton.prototype,"download",2);__decorateClass([n$3()],SlButton.prototype,"form",2);__decorateClass([n$3({attribute:"formaction"})],SlButton.prototype,"formAction",2);__decorateClass([n$3({attribute:"formenctype"})],SlButton.prototype,"formEnctype",2);__decorateClass([n$3({attribute:"formmethod"})],SlButton.prototype,"formMethod",2);__decorateClass([n$3({attribute:"formnovalidate",type:Boolean})],SlButton.prototype,"formNoValidate",2);__decorateClass([n$3({attribute:"formtarget"})],SlButton.prototype,"formTarget",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlButton.prototype,"handleDisabledChange",1);SlButton.define("sl-button");SlIconButton.define("sl-icon-button");var form_control_styles_default=i$7`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control__label {
    font-size: var(--sl-input-label-font-size-large);
  }

  :host([required]) .form-control--has-label .form-control__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
    color: var(--sl-input-required-content-color);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }

  .form-control--has-help-text.form-control--radio-group .form-control__help-text {
    margin-top: var(--sl-spacing-2x-small);
  }
`,input_styles_default=i$7`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: inherit;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix ::slotted(sl-icon),
  .input__suffix ::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear:not(.input__clear--visible) {
    visibility: hidden;
  }

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  .input--empty .input__clear {
    visibility: hidden;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }

  /* Hide the built-in number spinner */
  .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button,
  .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    display: none;
  }

  .input--no-spin-buttons input[type='number'] {
    -moz-appearance: textfield;
  }
`,defaultValue=(nt="value")=>(rt,it)=>{const st=rt.constructor,bt=st.prototype.attributeChangedCallback;st.prototype.attributeChangedCallback=function(xt,Et,kt){var Lt;const Pt=st.getPropertyOptions(nt),Rt=typeof Pt.attribute=="string"?Pt.attribute:nt;if(xt===Rt){const Dt=Pt.converter||n$6,Ft=(typeof Dt=="function"?Dt:(Lt=Dt==null?void 0:Dt.fromAttribute)!=null?Lt:n$6.fromAttribute)(kt,Pt.type);this[nt]!==Ft&&(this[it]=Ft)}bt.call(this,xt,Et,kt)}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const l=e$1(class extends i$3{constructor(nt){if(super(nt),nt.type!==t.PROPERTY&&nt.type!==t.ATTRIBUTE&&nt.type!==t.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!e$2(nt))throw Error("`live` bindings can only contain a single expression")}render(nt){return nt}update(nt,[rt]){if(rt===T||rt===A)return rt;const it=nt.element,st=nt.name;if(nt.type===t.PROPERTY){if(rt===it[st])return T}else if(nt.type===t.BOOLEAN_ATTRIBUTE){if(!!rt===it.hasAttribute(st))return T}else if(nt.type===t.ATTRIBUTE&&it.getAttribute(st)===rt+"")return T;return a$1(nt),rt}});var SlInput=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController(this),this.hasFocus=!1,this.title="",this.__numberInput=Object.assign(document.createElement("input"),{type:"number"}),this.__dateInput=Object.assign(document.createElement("input"),{type:"date"}),this.type="text",this.name="",this.value="",this.defaultValue="",this.size="medium",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.disabled=!1,this.placeholder="",this.readonly=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.form="",this.required=!1,this.spellcheck=!0}get valueAsDate(){var nt;return this.__dateInput.type=this.type,this.__dateInput.value=this.value,((nt=this.input)==null?void 0:nt.valueAsDate)||this.__dateInput.valueAsDate}set valueAsDate(nt){this.__dateInput.type=this.type,this.__dateInput.valueAsDate=nt,this.value=this.__dateInput.value}get valueAsNumber(){var nt;return this.__numberInput.value=this.value,((nt=this.input)==null?void 0:nt.valueAsNumber)||this.__numberInput.valueAsNumber}set valueAsNumber(nt){this.__numberInput.valueAsNumber=nt,this.value=this.__numberInput.value}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(nt){this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change"),this.input.focus(),nt.stopPropagation()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.formControlController.updateValidity(),this.emit("sl-input")}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}handleKeyDown(nt){const rt=nt.metaKey||nt.ctrlKey||nt.shiftKey||nt.altKey;nt.key==="Enter"&&!rt&&setTimeout(()=>{!nt.defaultPrevented&&!nt.isComposing&&this.formControlController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleStepChange(){this.input.step=String(this.step),this.formControlController.updateValidity()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,st){this.input.setRangeText(nt,rt,it,st),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.formControlController.updateValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt,bt=this.clearable&&!this.disabled&&!this.readonly,xt=bt&&(typeof this.value=="number"||this.value.length>0);return x$1`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--no-spin-buttons":this.noSpinButtons})}
          >
            <span part="prefix" class="input__prefix">
              <slot name="prefix"></slot>
            </span>

            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.passwordVisible?"text":this.type}
              title=${this.title}
              name=${l$1(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${l$1(this.placeholder)}
              minlength=${l$1(this.minlength)}
              maxlength=${l$1(this.maxlength)}
              min=${l$1(this.min)}
              max=${l$1(this.max)}
              step=${l$1(this.step)}
              .value=${l(this.value)}
              autocapitalize=${l$1(this.autocapitalize)}
              autocomplete=${l$1(this.autocomplete)}
              autocorrect=${l$1(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${this.spellcheck}
              pattern=${l$1(this.pattern)}
              enterkeyhint=${l$1(this.enterkeyhint)}
              inputmode=${l$1(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${bt?x$1`
                  <button
                    part="clear-button"
                    class=${o$1({input__clear:!0,"input__clear--visible":xt})}
                    type="button"
                    aria-label=${this.localize.term("clearEntry")}
                    @click=${this.handleClearClick}
                    tabindex="-1"
                  >
                    <slot name="clear-icon">
                      <sl-icon name="x-circle-fill" library="system"></sl-icon>
                    </slot>
                  </button>
                `:""}
            ${this.passwordToggle&&!this.disabled?x$1`
                  <button
                    part="password-toggle-button"
                    class="input__password-toggle"
                    type="button"
                    aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")}
                    @click=${this.handlePasswordToggle}
                    tabindex="-1"
                  >
                    ${this.passwordVisible?x$1`
                          <slot name="show-password-icon">
                            <sl-icon name="eye-slash" library="system"></sl-icon>
                          </slot>
                        `:x$1`
                          <slot name="hide-password-icon">
                            <sl-icon name="eye" library="system"></sl-icon>
                          </slot>
                        `}
                  </button>
                `:""}

            <span part="suffix" class="input__suffix">
              <slot name="suffix"></slot>
            </span>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};SlInput.styles=input_styles_default;SlInput.dependencies={"sl-icon":SlIcon};__decorateClass([i$4(".input__control")],SlInput.prototype,"input",2);__decorateClass([t$2()],SlInput.prototype,"hasFocus",2);__decorateClass([n$3()],SlInput.prototype,"title",2);__decorateClass([n$3({reflect:!0})],SlInput.prototype,"type",2);__decorateClass([n$3()],SlInput.prototype,"name",2);__decorateClass([n$3()],SlInput.prototype,"value",2);__decorateClass([defaultValue()],SlInput.prototype,"defaultValue",2);__decorateClass([n$3({reflect:!0})],SlInput.prototype,"size",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlInput.prototype,"filled",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlInput.prototype,"pill",2);__decorateClass([n$3()],SlInput.prototype,"label",2);__decorateClass([n$3({attribute:"help-text"})],SlInput.prototype,"helpText",2);__decorateClass([n$3({type:Boolean})],SlInput.prototype,"clearable",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlInput.prototype,"disabled",2);__decorateClass([n$3()],SlInput.prototype,"placeholder",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlInput.prototype,"readonly",2);__decorateClass([n$3({attribute:"password-toggle",type:Boolean})],SlInput.prototype,"passwordToggle",2);__decorateClass([n$3({attribute:"password-visible",type:Boolean})],SlInput.prototype,"passwordVisible",2);__decorateClass([n$3({attribute:"no-spin-buttons",type:Boolean})],SlInput.prototype,"noSpinButtons",2);__decorateClass([n$3({reflect:!0})],SlInput.prototype,"form",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlInput.prototype,"required",2);__decorateClass([n$3()],SlInput.prototype,"pattern",2);__decorateClass([n$3({type:Number})],SlInput.prototype,"minlength",2);__decorateClass([n$3({type:Number})],SlInput.prototype,"maxlength",2);__decorateClass([n$3()],SlInput.prototype,"min",2);__decorateClass([n$3()],SlInput.prototype,"max",2);__decorateClass([n$3()],SlInput.prototype,"step",2);__decorateClass([n$3()],SlInput.prototype,"autocapitalize",2);__decorateClass([n$3()],SlInput.prototype,"autocorrect",2);__decorateClass([n$3()],SlInput.prototype,"autocomplete",2);__decorateClass([n$3({type:Boolean})],SlInput.prototype,"autofocus",2);__decorateClass([n$3()],SlInput.prototype,"enterkeyhint",2);__decorateClass([n$3({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlInput.prototype,"spellcheck",2);__decorateClass([n$3()],SlInput.prototype,"inputmode",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleDisabledChange",1);__decorateClass([watch("step",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleStepChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleValueChange",1);SlInput.define("sl-input");var tooltip_styles_default=i$7`
  ${component_styles_default}

  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip {
    --arrow-size: var(--sl-tooltip-arrow-size);
    --arrow-color: var(--sl-tooltip-background-color);
  }

  .tooltip::part(popup) {
    pointer-events: none;
    z-index: var(--sl-z-index-tooltip);
  }

  .tooltip[placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .tooltip[placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .tooltip[placement^='left']::part(popup) {
    transform-origin: right;
  }

  .tooltip[placement^='right']::part(popup) {
    transform-origin: left;
  }

  .tooltip__body {
    display: block;
    width: max-content;
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
    pointer-events: none;
    user-select: none;
  }
`,popup_styles_default=i$7`
  ${component_styles_default}

  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }
`;const min$4=Math.min,max$4=Math.max,round$1=Math.round,floor=Math.floor,createCoords=nt=>({x:nt,y:nt}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(nt,rt,it){return max$4(nt,min$4(rt,it))}function evaluate$1(nt,rt){return typeof nt=="function"?nt(rt):nt}function getSide(nt){return nt.split("-")[0]}function getAlignment(nt){return nt.split("-")[1]}function getOppositeAxis(nt){return nt==="x"?"y":"x"}function getAxisLength(nt){return nt==="y"?"height":"width"}function getSideAxis(nt){return["top","bottom"].includes(getSide(nt))?"y":"x"}function getAlignmentAxis(nt){return getOppositeAxis(getSideAxis(nt))}function getAlignmentSides(nt,rt,it){it===void 0&&(it=!1);const st=getAlignment(nt),bt=getAlignmentAxis(nt),xt=getAxisLength(bt);let Et=bt==="x"?st===(it?"end":"start")?"right":"left":st==="start"?"bottom":"top";return rt.reference[xt]>rt.floating[xt]&&(Et=getOppositePlacement$1(Et)),[Et,getOppositePlacement$1(Et)]}function getExpandedPlacements(nt){const rt=getOppositePlacement$1(nt);return[getOppositeAlignmentPlacement(nt),rt,getOppositeAlignmentPlacement(rt)]}function getOppositeAlignmentPlacement(nt){return nt.replace(/start|end/g,rt=>oppositeAlignmentMap[rt])}function getSideList(nt,rt,it){const st=["left","right"],bt=["right","left"],xt=["top","bottom"],Et=["bottom","top"];switch(nt){case"top":case"bottom":return it?rt?bt:st:rt?st:bt;case"left":case"right":return rt?xt:Et;default:return[]}}function getOppositeAxisPlacements(nt,rt,it,st){const bt=getAlignment(nt);let xt=getSideList(getSide(nt),it==="start",st);return bt&&(xt=xt.map(Et=>Et+"-"+bt),rt&&(xt=xt.concat(xt.map(getOppositeAlignmentPlacement)))),xt}function getOppositePlacement$1(nt){return nt.replace(/left|right|bottom|top/g,rt=>oppositeSideMap[rt])}function expandPaddingObject(nt){return{top:0,right:0,bottom:0,left:0,...nt}}function getPaddingObject(nt){return typeof nt!="number"?expandPaddingObject(nt):{top:nt,right:nt,bottom:nt,left:nt}}function rectToClientRect$1(nt){return{...nt,top:nt.y,left:nt.x,right:nt.x+nt.width,bottom:nt.y+nt.height}}function computeCoordsFromPlacement(nt,rt,it){let{reference:st,floating:bt}=nt;const xt=getSideAxis(rt),Et=getAlignmentAxis(rt),kt=getAxisLength(Et),Lt=getSide(rt),Pt=xt==="y",Rt=st.x+st.width/2-bt.width/2,Dt=st.y+st.height/2-bt.height/2,Bt=st[kt]/2-bt[kt]/2;let Ft;switch(Lt){case"top":Ft={x:Rt,y:st.y-bt.height};break;case"bottom":Ft={x:Rt,y:st.y+st.height};break;case"right":Ft={x:st.x+st.width,y:Dt};break;case"left":Ft={x:st.x-bt.width,y:Dt};break;default:Ft={x:st.x,y:st.y}}switch(getAlignment(rt)){case"start":Ft[Et]-=Bt*(it&&Pt?-1:1);break;case"end":Ft[Et]+=Bt*(it&&Pt?-1:1);break}return Ft}const computePosition$1=async(nt,rt,it)=>{const{placement:st="bottom",strategy:bt="absolute",middleware:xt=[],platform:Et}=it,kt=xt.filter(Boolean),Lt=await(Et.isRTL==null?void 0:Et.isRTL(rt));let Pt=await Et.getElementRects({reference:nt,floating:rt,strategy:bt}),{x:Rt,y:Dt}=computeCoordsFromPlacement(Pt,st,Lt),Bt=st,Ft={},Yt=0;for(let Zt=0;Zt<kt.length;Zt++){const{name:Wt,fn:Qt}=kt[Zt],{x:Kt,y:on,data:nn,reset:mn}=await Qt({x:Rt,y:Dt,initialPlacement:st,placement:Bt,strategy:bt,middlewareData:Ft,rects:Pt,platform:Et,elements:{reference:nt,floating:rt}});if(Rt=Kt!=null?Kt:Rt,Dt=on!=null?on:Dt,Ft={...Ft,[Wt]:{...Ft[Wt],...nn}},mn&&Yt<=50){Yt++,typeof mn=="object"&&(mn.placement&&(Bt=mn.placement),mn.rects&&(Pt=mn.rects===!0?await Et.getElementRects({reference:nt,floating:rt,strategy:bt}):mn.rects),{x:Rt,y:Dt}=computeCoordsFromPlacement(Pt,Bt,Lt)),Zt=-1;continue}}return{x:Rt,y:Dt,placement:Bt,strategy:bt,middlewareData:Ft}};async function detectOverflow$1(nt,rt){var it;rt===void 0&&(rt={});const{x:st,y:bt,platform:xt,rects:Et,elements:kt,strategy:Lt}=nt,{boundary:Pt="clippingAncestors",rootBoundary:Rt="viewport",elementContext:Dt="floating",altBoundary:Bt=!1,padding:Ft=0}=evaluate$1(rt,nt),Yt=getPaddingObject(Ft),Wt=kt[Bt?Dt==="floating"?"reference":"floating":Dt],Qt=rectToClientRect$1(await xt.getClippingRect({element:(it=await(xt.isElement==null?void 0:xt.isElement(Wt)))==null||it?Wt:Wt.contextElement||await(xt.getDocumentElement==null?void 0:xt.getDocumentElement(kt.floating)),boundary:Pt,rootBoundary:Rt,strategy:Lt})),Kt=Dt==="floating"?{...Et.floating,x:st,y:bt}:Et.reference,on=await(xt.getOffsetParent==null?void 0:xt.getOffsetParent(kt.floating)),nn=await(xt.isElement==null?void 0:xt.isElement(on))?await(xt.getScale==null?void 0:xt.getScale(on))||{x:1,y:1}:{x:1,y:1},mn=rectToClientRect$1(xt.convertOffsetParentRelativeRectToViewportRelativeRect?await xt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Kt,offsetParent:on,strategy:Lt}):Kt);return{top:(Qt.top-mn.top+Yt.top)/nn.y,bottom:(mn.bottom-Qt.bottom+Yt.bottom)/nn.y,left:(Qt.left-mn.left+Yt.left)/nn.x,right:(mn.right-Qt.right+Yt.right)/nn.x}}const arrow$2=nt=>({name:"arrow",options:nt,async fn(rt){const{x:it,y:st,placement:bt,rects:xt,platform:Et,elements:kt}=rt,{element:Lt,padding:Pt=0}=evaluate$1(nt,rt)||{};if(Lt==null)return{};const Rt=getPaddingObject(Pt),Dt={x:it,y:st},Bt=getAlignmentAxis(bt),Ft=getAxisLength(Bt),Yt=await Et.getDimensions(Lt),Zt=Bt==="y",Wt=Zt?"top":"left",Qt=Zt?"bottom":"right",Kt=Zt?"clientHeight":"clientWidth",on=xt.reference[Ft]+xt.reference[Bt]-Dt[Bt]-xt.floating[Ft],nn=Dt[Bt]-xt.reference[Bt],mn=await(Et.getOffsetParent==null?void 0:Et.getOffsetParent(Lt));let gn=mn?mn[Kt]:0;(!gn||!await(Et.isElement==null?void 0:Et.isElement(mn)))&&(gn=kt.floating[Kt]||xt.floating[Ft]);const Tn=on/2-nn/2,An=gn/2-Yt[Ft]/2-1,kn=min$4(Rt[Wt],An),Mn=min$4(Rt[Qt],An),$n=kn,cn=gn-Yt[Ft]-Mn,Sn=gn/2-Yt[Ft]/2+Tn,an=clamp$1($n,Sn,cn),hn=getAlignment(bt)!=null&&Sn!=an&&xt.reference[Ft]/2-(Sn<$n?kn:Mn)-Yt[Ft]/2<0?Sn<$n?$n-Sn:cn-Sn:0;return{[Bt]:Dt[Bt]-hn,data:{[Bt]:an,centerOffset:Sn-an+hn}}}}),flip$2=function(nt){return nt===void 0&&(nt={}),{name:"flip",options:nt,async fn(rt){var it;const{placement:st,middlewareData:bt,rects:xt,initialPlacement:Et,platform:kt,elements:Lt}=rt,{mainAxis:Pt=!0,crossAxis:Rt=!0,fallbackPlacements:Dt,fallbackStrategy:Bt="bestFit",fallbackAxisSideDirection:Ft="none",flipAlignment:Yt=!0,...Zt}=evaluate$1(nt,rt),Wt=getSide(st),Qt=getSide(Et)===Et,Kt=await(kt.isRTL==null?void 0:kt.isRTL(Lt.floating)),on=Dt||(Qt||!Yt?[getOppositePlacement$1(Et)]:getExpandedPlacements(Et));!Dt&&Ft!=="none"&&on.push(...getOppositeAxisPlacements(Et,Yt,Ft,Kt));const nn=[Et,...on],mn=await detectOverflow$1(rt,Zt),gn=[];let Tn=((it=bt.flip)==null?void 0:it.overflows)||[];if(Pt&&gn.push(mn[Wt]),Rt){const $n=getAlignmentSides(st,xt,Kt);gn.push(mn[$n[0]],mn[$n[1]])}if(Tn=[...Tn,{placement:st,overflows:gn}],!gn.every($n=>$n<=0)){var An,kn;const $n=(((An=bt.flip)==null?void 0:An.index)||0)+1,cn=nn[$n];if(cn)return{data:{index:$n,overflows:Tn},reset:{placement:cn}};let Sn=(kn=Tn.filter(an=>an.overflows[0]<=0).sort((an,jn)=>an.overflows[1]-jn.overflows[1])[0])==null?void 0:kn.placement;if(!Sn)switch(Bt){case"bestFit":{var Mn;const an=(Mn=Tn.map(jn=>[jn.placement,jn.overflows.filter(hn=>hn>0).reduce((hn,zn)=>hn+zn,0)]).sort((jn,hn)=>jn[1]-hn[1])[0])==null?void 0:Mn[0];an&&(Sn=an);break}case"initialPlacement":Sn=Et;break}if(st!==Sn)return{reset:{placement:Sn}}}return{}}}};async function convertValueToCoords(nt,rt){const{placement:it,platform:st,elements:bt}=nt,xt=await(st.isRTL==null?void 0:st.isRTL(bt.floating)),Et=getSide(it),kt=getAlignment(it),Lt=getSideAxis(it)==="y",Pt=["left","top"].includes(Et)?-1:1,Rt=xt&&Lt?-1:1,Dt=evaluate$1(rt,nt);let{mainAxis:Bt,crossAxis:Ft,alignmentAxis:Yt}=typeof Dt=="number"?{mainAxis:Dt,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Dt};return kt&&typeof Yt=="number"&&(Ft=kt==="end"?Yt*-1:Yt),Lt?{x:Ft*Rt,y:Bt*Pt}:{x:Bt*Pt,y:Ft*Rt}}const offset$3=function(nt){return nt===void 0&&(nt=0),{name:"offset",options:nt,async fn(rt){const{x:it,y:st}=rt,bt=await convertValueToCoords(rt,nt);return{x:it+bt.x,y:st+bt.y,data:bt}}}},shift=function(nt){return nt===void 0&&(nt={}),{name:"shift",options:nt,async fn(rt){const{x:it,y:st,placement:bt}=rt,{mainAxis:xt=!0,crossAxis:Et=!1,limiter:kt={fn:Wt=>{let{x:Qt,y:Kt}=Wt;return{x:Qt,y:Kt}}},...Lt}=evaluate$1(nt,rt),Pt={x:it,y:st},Rt=await detectOverflow$1(rt,Lt),Dt=getSideAxis(getSide(bt)),Bt=getOppositeAxis(Dt);let Ft=Pt[Bt],Yt=Pt[Dt];if(xt){const Wt=Bt==="y"?"top":"left",Qt=Bt==="y"?"bottom":"right",Kt=Ft+Rt[Wt],on=Ft-Rt[Qt];Ft=clamp$1(Kt,Ft,on)}if(Et){const Wt=Dt==="y"?"top":"left",Qt=Dt==="y"?"bottom":"right",Kt=Yt+Rt[Wt],on=Yt-Rt[Qt];Yt=clamp$1(Kt,Yt,on)}const Zt=kt.fn({...rt,[Bt]:Ft,[Dt]:Yt});return{...Zt,data:{x:Zt.x-it,y:Zt.y-st}}}}},size=function(nt){return nt===void 0&&(nt={}),{name:"size",options:nt,async fn(rt){const{placement:it,rects:st,platform:bt,elements:xt}=rt,{apply:Et=()=>{},...kt}=evaluate$1(nt,rt),Lt=await detectOverflow$1(rt,kt),Pt=getSide(it),Rt=getAlignment(it),Dt=getSideAxis(it)==="y",{width:Bt,height:Ft}=st.floating;let Yt,Zt;Pt==="top"||Pt==="bottom"?(Yt=Pt,Zt=Rt===(await(bt.isRTL==null?void 0:bt.isRTL(xt.floating))?"start":"end")?"left":"right"):(Zt=Pt,Yt=Rt==="end"?"top":"bottom");const Wt=Ft-Lt[Yt],Qt=Bt-Lt[Zt],Kt=!rt.middlewareData.shift;let on=Wt,nn=Qt;if(Dt){const gn=Bt-Lt.left-Lt.right;nn=Rt||Kt?min$4(Qt,gn):gn}else{const gn=Ft-Lt.top-Lt.bottom;on=Rt||Kt?min$4(Wt,gn):gn}if(Kt&&!Rt){const gn=max$4(Lt.left,0),Tn=max$4(Lt.right,0),An=max$4(Lt.top,0),kn=max$4(Lt.bottom,0);Dt?nn=Bt-2*(gn!==0||Tn!==0?gn+Tn:max$4(Lt.left,Lt.right)):on=Ft-2*(An!==0||kn!==0?An+kn:max$4(Lt.top,Lt.bottom))}await Et({...rt,availableWidth:nn,availableHeight:on});const mn=await bt.getDimensions(xt.floating);return Bt!==mn.width||Ft!==mn.height?{reset:{rects:!0}}:{}}}};function getNodeName$1(nt){return isNode$1(nt)?(nt.nodeName||"").toLowerCase():"#document"}function getWindow$1(nt){var rt;return(nt==null||(rt=nt.ownerDocument)==null?void 0:rt.defaultView)||window}function getDocumentElement$1(nt){var rt;return(rt=(isNode$1(nt)?nt.ownerDocument:nt.document)||window.document)==null?void 0:rt.documentElement}function isNode$1(nt){return nt instanceof Node||nt instanceof getWindow$1(nt).Node}function isElement$2(nt){return nt instanceof Element||nt instanceof getWindow$1(nt).Element}function isHTMLElement$1(nt){return nt instanceof HTMLElement||nt instanceof getWindow$1(nt).HTMLElement}function isShadowRoot$1(nt){return typeof ShadowRoot>"u"?!1:nt instanceof ShadowRoot||nt instanceof getWindow$1(nt).ShadowRoot}function isOverflowElement(nt){const{overflow:rt,overflowX:it,overflowY:st,display:bt}=getComputedStyle$2(nt);return/auto|scroll|overlay|hidden|clip/.test(rt+st+it)&&!["inline","contents"].includes(bt)}function isTableElement$1(nt){return["table","td","th"].includes(getNodeName$1(nt))}function isContainingBlock(nt){const rt=isWebKit(),it=getComputedStyle$2(nt);return it.transform!=="none"||it.perspective!=="none"||(it.containerType?it.containerType!=="normal":!1)||!rt&&(it.backdropFilter?it.backdropFilter!=="none":!1)||!rt&&(it.filter?it.filter!=="none":!1)||["transform","perspective","filter"].some(st=>(it.willChange||"").includes(st))||["paint","layout","strict","content"].some(st=>(it.contain||"").includes(st))}function getContainingBlock$1(nt){let rt=getParentNode$1(nt);for(;isHTMLElement$1(rt)&&!isLastTraversableNode(rt);){if(isContainingBlock(rt))return rt;rt=getParentNode$1(rt)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(nt){return["html","body","#document"].includes(getNodeName$1(nt))}function getComputedStyle$2(nt){return getWindow$1(nt).getComputedStyle(nt)}function getNodeScroll$1(nt){return isElement$2(nt)?{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}:{scrollLeft:nt.pageXOffset,scrollTop:nt.pageYOffset}}function getParentNode$1(nt){if(getNodeName$1(nt)==="html")return nt;const rt=nt.assignedSlot||nt.parentNode||isShadowRoot$1(nt)&&nt.host||getDocumentElement$1(nt);return isShadowRoot$1(rt)?rt.host:rt}function getNearestOverflowAncestor(nt){const rt=getParentNode$1(nt);return isLastTraversableNode(rt)?nt.ownerDocument?nt.ownerDocument.body:nt.body:isHTMLElement$1(rt)&&isOverflowElement(rt)?rt:getNearestOverflowAncestor(rt)}function getOverflowAncestors(nt,rt){var it;rt===void 0&&(rt=[]);const st=getNearestOverflowAncestor(nt),bt=st===((it=nt.ownerDocument)==null?void 0:it.body),xt=getWindow$1(st);return bt?rt.concat(xt,xt.visualViewport||[],isOverflowElement(st)?st:[]):rt.concat(st,getOverflowAncestors(st))}function getCssDimensions(nt){const rt=getComputedStyle$2(nt);let it=parseFloat(rt.width)||0,st=parseFloat(rt.height)||0;const bt=isHTMLElement$1(nt),xt=bt?nt.offsetWidth:it,Et=bt?nt.offsetHeight:st,kt=round$1(it)!==xt||round$1(st)!==Et;return kt&&(it=xt,st=Et),{width:it,height:st,$:kt}}function unwrapElement(nt){return isElement$2(nt)?nt:nt.contextElement}function getScale(nt){const rt=unwrapElement(nt);if(!isHTMLElement$1(rt))return createCoords(1);const it=rt.getBoundingClientRect(),{width:st,height:bt,$:xt}=getCssDimensions(rt);let Et=(xt?round$1(it.width):it.width)/st,kt=(xt?round$1(it.height):it.height)/bt;return(!Et||!Number.isFinite(Et))&&(Et=1),(!kt||!Number.isFinite(kt))&&(kt=1),{x:Et,y:kt}}const noOffsets=createCoords(0);function getVisualOffsets(nt){const rt=getWindow$1(nt);return!isWebKit()||!rt.visualViewport?noOffsets:{x:rt.visualViewport.offsetLeft,y:rt.visualViewport.offsetTop}}function shouldAddVisualOffsets(nt,rt,it){return rt===void 0&&(rt=!1),!it||rt&&it!==getWindow$1(nt)?!1:rt}function getBoundingClientRect$1(nt,rt,it,st){rt===void 0&&(rt=!1),it===void 0&&(it=!1);const bt=nt.getBoundingClientRect(),xt=unwrapElement(nt);let Et=createCoords(1);rt&&(st?isElement$2(st)&&(Et=getScale(st)):Et=getScale(nt));const kt=shouldAddVisualOffsets(xt,it,st)?getVisualOffsets(xt):createCoords(0);let Lt=(bt.left+kt.x)/Et.x,Pt=(bt.top+kt.y)/Et.y,Rt=bt.width/Et.x,Dt=bt.height/Et.y;if(xt){const Bt=getWindow$1(xt),Ft=st&&isElement$2(st)?getWindow$1(st):st;let Yt=Bt.frameElement;for(;Yt&&st&&Ft!==Bt;){const Zt=getScale(Yt),Wt=Yt.getBoundingClientRect(),Qt=getComputedStyle$2(Yt),Kt=Wt.left+(Yt.clientLeft+parseFloat(Qt.paddingLeft))*Zt.x,on=Wt.top+(Yt.clientTop+parseFloat(Qt.paddingTop))*Zt.y;Lt*=Zt.x,Pt*=Zt.y,Rt*=Zt.x,Dt*=Zt.y,Lt+=Kt,Pt+=on,Yt=getWindow$1(Yt).frameElement}}return rectToClientRect$1({width:Rt,height:Dt,x:Lt,y:Pt})}function convertOffsetParentRelativeRectToViewportRelativeRect(nt){let{rect:rt,offsetParent:it,strategy:st}=nt;const bt=isHTMLElement$1(it),xt=getDocumentElement$1(it);if(it===xt)return rt;let Et={scrollLeft:0,scrollTop:0},kt=createCoords(1);const Lt=createCoords(0);if((bt||!bt&&st!=="fixed")&&((getNodeName$1(it)!=="body"||isOverflowElement(xt))&&(Et=getNodeScroll$1(it)),isHTMLElement$1(it))){const Pt=getBoundingClientRect$1(it);kt=getScale(it),Lt.x=Pt.x+it.clientLeft,Lt.y=Pt.y+it.clientTop}return{width:rt.width*kt.x,height:rt.height*kt.y,x:rt.x*kt.x-Et.scrollLeft*kt.x+Lt.x,y:rt.y*kt.y-Et.scrollTop*kt.y+Lt.y}}function getClientRects(nt){return Array.from(nt.getClientRects())}function getWindowScrollBarX$1(nt){return getBoundingClientRect$1(getDocumentElement$1(nt)).left+getNodeScroll$1(nt).scrollLeft}function getDocumentRect$1(nt){const rt=getDocumentElement$1(nt),it=getNodeScroll$1(nt),st=nt.ownerDocument.body,bt=max$4(rt.scrollWidth,rt.clientWidth,st.scrollWidth,st.clientWidth),xt=max$4(rt.scrollHeight,rt.clientHeight,st.scrollHeight,st.clientHeight);let Et=-it.scrollLeft+getWindowScrollBarX$1(nt);const kt=-it.scrollTop;return getComputedStyle$2(st).direction==="rtl"&&(Et+=max$4(rt.clientWidth,st.clientWidth)-bt),{width:bt,height:xt,x:Et,y:kt}}function getViewportRect$1(nt,rt){const it=getWindow$1(nt),st=getDocumentElement$1(nt),bt=it.visualViewport;let xt=st.clientWidth,Et=st.clientHeight,kt=0,Lt=0;if(bt){xt=bt.width,Et=bt.height;const Pt=isWebKit();(!Pt||Pt&&rt==="fixed")&&(kt=bt.offsetLeft,Lt=bt.offsetTop)}return{width:xt,height:Et,x:kt,y:Lt}}function getInnerBoundingClientRect$1(nt,rt){const it=getBoundingClientRect$1(nt,!0,rt==="fixed"),st=it.top+nt.clientTop,bt=it.left+nt.clientLeft,xt=isHTMLElement$1(nt)?getScale(nt):createCoords(1),Et=nt.clientWidth*xt.x,kt=nt.clientHeight*xt.y,Lt=bt*xt.x,Pt=st*xt.y;return{width:Et,height:kt,x:Lt,y:Pt}}function getClientRectFromClippingAncestor(nt,rt,it){let st;if(rt==="viewport")st=getViewportRect$1(nt,it);else if(rt==="document")st=getDocumentRect$1(getDocumentElement$1(nt));else if(isElement$2(rt))st=getInnerBoundingClientRect$1(rt,it);else{const bt=getVisualOffsets(nt);st={...rt,x:rt.x-bt.x,y:rt.y-bt.y}}return rectToClientRect$1(st)}function hasFixedPositionAncestor(nt,rt){const it=getParentNode$1(nt);return it===rt||!isElement$2(it)||isLastTraversableNode(it)?!1:getComputedStyle$2(it).position==="fixed"||hasFixedPositionAncestor(it,rt)}function getClippingElementAncestors(nt,rt){const it=rt.get(nt);if(it)return it;let st=getOverflowAncestors(nt).filter(kt=>isElement$2(kt)&&getNodeName$1(kt)!=="body"),bt=null;const xt=getComputedStyle$2(nt).position==="fixed";let Et=xt?getParentNode$1(nt):nt;for(;isElement$2(Et)&&!isLastTraversableNode(Et);){const kt=getComputedStyle$2(Et),Lt=isContainingBlock(Et);!Lt&&kt.position==="fixed"&&(bt=null),(xt?!Lt&&!bt:!Lt&&kt.position==="static"&&!!bt&&["absolute","fixed"].includes(bt.position)||isOverflowElement(Et)&&!Lt&&hasFixedPositionAncestor(nt,Et))?st=st.filter(Rt=>Rt!==Et):bt=kt,Et=getParentNode$1(Et)}return rt.set(nt,st),st}function getClippingRect$1(nt){let{element:rt,boundary:it,rootBoundary:st,strategy:bt}=nt;const Et=[...it==="clippingAncestors"?getClippingElementAncestors(rt,this._c):[].concat(it),st],kt=Et[0],Lt=Et.reduce((Pt,Rt)=>{const Dt=getClientRectFromClippingAncestor(rt,Rt,bt);return Pt.top=max$4(Dt.top,Pt.top),Pt.right=min$4(Dt.right,Pt.right),Pt.bottom=min$4(Dt.bottom,Pt.bottom),Pt.left=max$4(Dt.left,Pt.left),Pt},getClientRectFromClippingAncestor(rt,kt,bt));return{width:Lt.right-Lt.left,height:Lt.bottom-Lt.top,x:Lt.left,y:Lt.top}}function getDimensions(nt){return getCssDimensions(nt)}function getRectRelativeToOffsetParent(nt,rt,it){const st=isHTMLElement$1(rt),bt=getDocumentElement$1(rt),xt=it==="fixed",Et=getBoundingClientRect$1(nt,!0,xt,rt);let kt={scrollLeft:0,scrollTop:0};const Lt=createCoords(0);if(st||!st&&!xt)if((getNodeName$1(rt)!=="body"||isOverflowElement(bt))&&(kt=getNodeScroll$1(rt)),st){const Pt=getBoundingClientRect$1(rt,!0,xt,rt);Lt.x=Pt.x+rt.clientLeft,Lt.y=Pt.y+rt.clientTop}else bt&&(Lt.x=getWindowScrollBarX$1(bt));return{x:Et.left+kt.scrollLeft-Lt.x,y:Et.top+kt.scrollTop-Lt.y,width:Et.width,height:Et.height}}function getTrueOffsetParent$1(nt,rt){return!isHTMLElement$1(nt)||getComputedStyle$2(nt).position==="fixed"?null:rt?rt(nt):nt.offsetParent}function getOffsetParent$1(nt,rt){const it=getWindow$1(nt);if(!isHTMLElement$1(nt))return it;let st=getTrueOffsetParent$1(nt,rt);for(;st&&isTableElement$1(st)&&getComputedStyle$2(st).position==="static";)st=getTrueOffsetParent$1(st,rt);return st&&(getNodeName$1(st)==="html"||getNodeName$1(st)==="body"&&getComputedStyle$2(st).position==="static"&&!isContainingBlock(st))?it:st||getContainingBlock$1(nt)||it}const getElementRects=async function(nt){let{reference:rt,floating:it,strategy:st}=nt;const bt=this.getOffsetParent||getOffsetParent$1,xt=this.getDimensions;return{reference:getRectRelativeToOffsetParent(rt,await bt(it),st),floating:{x:0,y:0,...await xt(it)}}};function isRTL(nt){return getComputedStyle$2(nt).direction==="rtl"}const platform$1={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement:getDocumentElement$1,getClippingRect:getClippingRect$1,getOffsetParent:getOffsetParent$1,getElementRects,getClientRects,getDimensions,getScale,isElement:isElement$2,isRTL};function observeMove(nt,rt){let it=null,st;const bt=getDocumentElement$1(nt);function xt(){clearTimeout(st),it&&it.disconnect(),it=null}function Et(kt,Lt){kt===void 0&&(kt=!1),Lt===void 0&&(Lt=1),xt();const{left:Pt,top:Rt,width:Dt,height:Bt}=nt.getBoundingClientRect();if(kt||rt(),!Dt||!Bt)return;const Ft=floor(Rt),Yt=floor(bt.clientWidth-(Pt+Dt)),Zt=floor(bt.clientHeight-(Rt+Bt)),Wt=floor(Pt),Kt={rootMargin:-Ft+"px "+-Yt+"px "+-Zt+"px "+-Wt+"px",threshold:max$4(0,min$4(1,Lt))||1};let on=!0;function nn(mn){const gn=mn[0].intersectionRatio;if(gn!==Lt){if(!on)return Et();gn?Et(!1,gn):st=setTimeout(()=>{Et(!1,1e-7)},100)}on=!1}try{it=new IntersectionObserver(nn,{...Kt,root:bt.ownerDocument})}catch{it=new IntersectionObserver(nn,Kt)}it.observe(nt)}return Et(!0),xt}function autoUpdate(nt,rt,it,st){st===void 0&&(st={});const{ancestorScroll:bt=!0,ancestorResize:xt=!0,elementResize:Et=typeof ResizeObserver=="function",layoutShift:kt=typeof IntersectionObserver=="function",animationFrame:Lt=!1}=st,Pt=unwrapElement(nt),Rt=bt||xt?[...Pt?getOverflowAncestors(Pt):[],...getOverflowAncestors(rt)]:[];Rt.forEach(Qt=>{bt&&Qt.addEventListener("scroll",it,{passive:!0}),xt&&Qt.addEventListener("resize",it)});const Dt=Pt&&kt?observeMove(Pt,it):null;let Bt=-1,Ft=null;Et&&(Ft=new ResizeObserver(Qt=>{let[Kt]=Qt;Kt&&Kt.target===Pt&&Ft&&(Ft.unobserve(rt),cancelAnimationFrame(Bt),Bt=requestAnimationFrame(()=>{Ft&&Ft.observe(rt)})),it()}),Pt&&!Lt&&Ft.observe(Pt),Ft.observe(rt));let Yt,Zt=Lt?getBoundingClientRect$1(nt):null;Lt&&Wt();function Wt(){const Qt=getBoundingClientRect$1(nt);Zt&&(Qt.x!==Zt.x||Qt.y!==Zt.y||Qt.width!==Zt.width||Qt.height!==Zt.height)&&it(),Zt=Qt,Yt=requestAnimationFrame(Wt)}return it(),()=>{Rt.forEach(Qt=>{bt&&Qt.removeEventListener("scroll",it),xt&&Qt.removeEventListener("resize",it)}),Dt&&Dt(),Ft&&Ft.disconnect(),Ft=null,Lt&&cancelAnimationFrame(Yt)}}const computePosition=(nt,rt,it)=>{const st=new Map,bt={platform:platform$1,...it},xt={...bt.platform,_c:st};return computePosition$1(nt,rt,{...bt,platform:xt})};function isVirtualElement(nt){return nt!==null&&typeof nt=="object"&&"getBoundingClientRect"in nt}var SlPopup=class extends ShoelaceElement{constructor(){super(...arguments),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){this.stop()}async updated(nt){super.updated(nt),nt.has("active")&&(this.active?this.start():this.stop()),nt.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){const nt=this.getRootNode();this.anchorEl=nt.getElementById(this.anchor)}else this.anchor instanceof Element||isVirtualElement(this.anchor)?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');if(this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),!this.anchorEl)throw new Error("Invalid anchor element: no anchor could be found using the anchor slot or the anchor attribute.");this.start()}start(){!this.anchorEl||(this.cleanup=autoUpdate(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(nt=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>nt())):nt()})}reposition(){if(!this.active||!this.anchorEl)return;const nt=[offset$3({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?nt.push(size({apply:({rects:it})=>{const st=this.sync==="width"||this.sync==="both",bt=this.sync==="height"||this.sync==="both";this.popup.style.width=st?`${it.reference.width}px`:"",this.popup.style.height=bt?`${it.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&nt.push(flip$2({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&nt.push(shift({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?nt.push(size({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:it,availableHeight:st})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${st}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${it}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&nt.push(arrow$2({element:this.arrowEl,padding:this.arrowPadding}));const rt=this.strategy==="absolute"?it=>platform$1.getOffsetParent(it,offsetParent):platform$1.getOffsetParent;computePosition(this.anchorEl,this.popup,{placement:this.placement,middleware:nt,strategy:this.strategy,platform:__spreadProps(__spreadValues({},platform$1),{getOffsetParent:rt})}).then(({x:it,y:st,middlewareData:bt,placement:xt})=>{const Et=getComputedStyle(this).direction==="rtl",kt={top:"bottom",right:"left",bottom:"top",left:"right"}[xt.split("-")[0]];if(this.setAttribute("data-current-placement",xt),Object.assign(this.popup.style,{left:`${it}px`,top:`${st}px`}),this.arrow){const Lt=bt.arrow.x,Pt=bt.arrow.y;let Rt="",Dt="",Bt="",Ft="";if(this.arrowPlacement==="start"){const Yt=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Rt=typeof Pt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",Dt=Et?Yt:"",Ft=Et?"":Yt}else if(this.arrowPlacement==="end"){const Yt=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Dt=Et?"":Yt,Ft=Et?Yt:"",Bt=typeof Pt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(Ft=typeof Lt=="number"?"calc(50% - var(--arrow-size-diagonal))":"",Rt=typeof Pt=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(Ft=typeof Lt=="number"?`${Lt}px`:"",Rt=typeof Pt=="number"?`${Pt}px`:"");Object.assign(this.arrowEl.style,{top:Rt,right:Dt,bottom:Bt,left:Ft,[kt]:"calc(var(--arrow-size-diagonal) * -1)"})}}),this.emit("sl-reposition")}render(){return x$1`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <div
        part="popup"
        class=${o$1({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?x$1`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};SlPopup.styles=popup_styles_default;__decorateClass([i$4(".popup")],SlPopup.prototype,"popup",2);__decorateClass([i$4(".popup__arrow")],SlPopup.prototype,"arrowEl",2);__decorateClass([n$3()],SlPopup.prototype,"anchor",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlPopup.prototype,"active",2);__decorateClass([n$3({reflect:!0})],SlPopup.prototype,"placement",2);__decorateClass([n$3({reflect:!0})],SlPopup.prototype,"strategy",2);__decorateClass([n$3({type:Number})],SlPopup.prototype,"distance",2);__decorateClass([n$3({type:Number})],SlPopup.prototype,"skidding",2);__decorateClass([n$3({type:Boolean})],SlPopup.prototype,"arrow",2);__decorateClass([n$3({attribute:"arrow-placement"})],SlPopup.prototype,"arrowPlacement",2);__decorateClass([n$3({attribute:"arrow-padding",type:Number})],SlPopup.prototype,"arrowPadding",2);__decorateClass([n$3({type:Boolean})],SlPopup.prototype,"flip",2);__decorateClass([n$3({attribute:"flip-fallback-placements",converter:{fromAttribute:nt=>nt.split(" ").map(rt=>rt.trim()).filter(rt=>rt!==""),toAttribute:nt=>nt.join(" ")}})],SlPopup.prototype,"flipFallbackPlacements",2);__decorateClass([n$3({attribute:"flip-fallback-strategy"})],SlPopup.prototype,"flipFallbackStrategy",2);__decorateClass([n$3({type:Object})],SlPopup.prototype,"flipBoundary",2);__decorateClass([n$3({attribute:"flip-padding",type:Number})],SlPopup.prototype,"flipPadding",2);__decorateClass([n$3({type:Boolean})],SlPopup.prototype,"shift",2);__decorateClass([n$3({type:Object})],SlPopup.prototype,"shiftBoundary",2);__decorateClass([n$3({attribute:"shift-padding",type:Number})],SlPopup.prototype,"shiftPadding",2);__decorateClass([n$3({attribute:"auto-size"})],SlPopup.prototype,"autoSize",2);__decorateClass([n$3()],SlPopup.prototype,"sync",2);__decorateClass([n$3({type:Object})],SlPopup.prototype,"autoSizeBoundary",2);__decorateClass([n$3({attribute:"auto-size-padding",type:Number})],SlPopup.prototype,"autoSizePadding",2);var SlTooltip=class extends ShoelaceElement{constructor(){super(),this.localize=new LocalizeController(this),this.content="",this.placement="top",this.disabled=!1,this.distance=8,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.handleBlur=()=>{this.hasTrigger("focus")&&this.hide()},this.handleClick=()=>{this.hasTrigger("click")&&(this.open?this.hide():this.show())},this.handleFocus=()=>{this.hasTrigger("focus")&&this.show()},this.handleKeyDown=nt=>{this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.hide())},this.handleMouseOver=()=>{if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.show(),nt)}},this.handleMouseOut=()=>{if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.hide(),nt)}},this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut)}connectedCallback(){super.connectedCallback()}firstUpdated(){this.body.hidden=!this.open,this.open&&(this.popup.active=!0,this.popup.reposition())}hasTrigger(nt){return this.trigger.split(" ").includes(nt)}async handleOpenChange(){if(this.open){if(this.disabled)return;this.emit("sl-show"),await stopAnimations(this.body),this.body.hidden=!1,this.popup.active=!0;const{keyframes:nt,options:rt}=getAnimation(this,"tooltip.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),await stopAnimations(this.body);const{keyframes:nt,options:rt}=getAnimation(this,"tooltip.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.popup.active=!1,this.body.hidden=!0,this.emit("sl-after-hide")}}async handleOptionsChange(){this.hasUpdated&&(await this.updateComplete,this.popup.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return x$1`
      <sl-popup
        part="base"
        exportparts="
          popup:base__popup,
          arrow:base__arrow
        "
        class=${o$1({tooltip:!0,"tooltip--open":this.open})}
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        arrow
      >
        ${""}
        <slot slot="anchor" aria-describedby="tooltip"></slot>

        ${""}
        <div part="body" id="tooltip" class="tooltip__body" role="tooltip" aria-live=${this.open?"polite":"off"}>
          <slot name="content">${this.content}</slot>
        </div>
      </sl-popup>
    `}};SlTooltip.styles=tooltip_styles_default;SlTooltip.dependencies={"sl-popup":SlPopup};__decorateClass([i$4("slot:not([name])")],SlTooltip.prototype,"defaultSlot",2);__decorateClass([i$4(".tooltip__body")],SlTooltip.prototype,"body",2);__decorateClass([i$4("sl-popup")],SlTooltip.prototype,"popup",2);__decorateClass([n$3()],SlTooltip.prototype,"content",2);__decorateClass([n$3()],SlTooltip.prototype,"placement",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTooltip.prototype,"disabled",2);__decorateClass([n$3({type:Number})],SlTooltip.prototype,"distance",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTooltip.prototype,"open",2);__decorateClass([n$3({type:Number})],SlTooltip.prototype,"skidding",2);__decorateClass([n$3()],SlTooltip.prototype,"trigger",2);__decorateClass([n$3({type:Boolean})],SlTooltip.prototype,"hoist",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlTooltip.prototype,"handleOpenChange",1);__decorateClass([watch(["content","distance","hoist","placement","skidding"])],SlTooltip.prototype,"handleOptionsChange",1);__decorateClass([watch("disabled")],SlTooltip.prototype,"handleDisabledChange",1);setDefaultAnimation("tooltip.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}});setDefaultAnimation("tooltip.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});SlTooltip.define("sl-tooltip");const _hoisted_1$w={id:"add-media-resource-dialog",label:"Add Media Resource"},_hoisted_2$r=createBaseVNode("img",{id:"img",style:{paddingLeft:"16px",height:"100%"}},null,-1),_hoisted_3$k=[_hoisted_2$r],_hoisted_4$h=createBaseVNode("div",{class:"fields"},[createBaseVNode("sl-input",{autocomplete:"off",id:"resource-folder",placeholder:"Folder",pattern:"^[A-z0-9\\/\\-_]+$"}),createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"resource-name",placeholder:"Name",pattern:"^[A-z0-9\\-_ ]+$"}),createBaseVNode("sl-input",{autocomplete:"off",id:"resource-summary",placeholder:"Summary"})],-1),_hoisted_5$f={class:"metadata"},_hoisted_6$b={class:"exif-data"},_hoisted_7$9=["innerHTML"],_hoisted_8$9=["innerHTML"],_hoisted_9$7={class:"depicted"},_hoisted_10$6={class:"search"},_hoisted_11$5=createBaseVNode("div",null,"Entities:",-1),_hoisted_12$4=["data-entity"],_hoisted_13$4=["innerHTML"],_hoisted_14$4=["innerHTML"],_hoisted_15$4=["onClick"],_hoisted_16$4=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_sfc_main$y=defineComponent({__name:"AddMediaResourceDialog.ce",props:{path:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){const it=nt;rt({isOpen:Sn,show:ir});const st=ref(""),bt=ref(),xt=ref(),Et=ref(),kt=ref(),Lt=ref([]),Pt=ref(),Rt=ref(),Dt=ref(),Bt=ref(),Ft=ref(),Yt=ref(),Zt=ref(),Wt=ref(),Qt=ref(),Kt=ref({}),on=ref([]),nn=ref(!1),mn=ref(null),gn=computed(()=>{var tr;return(tr=mn==null?void 0:mn.value)==null?void 0:tr.parentNode});computed(()=>{var tr,nr;return(nr=(tr=mn.value)==null?void 0:tr.getRootNode())==null?void 0:nr.host}),onMounted(()=>Tn()),watch$1(nn,()=>{Pt.value&&(Pt.value.open=nn.value)}),watch$1(st,()=>{bt.value=new GithubClient(st.value)}),watch$1(Rt,()=>{bt.value=new GithubClient(st.value)}),watch$1(Lt,()=>{Ft.value&&(Ft.value.value=Lt.value.join("/"))}),watch$1(it,()=>{An()});function Tn(){var nr,dr,or,ur,Cr,Sr,rr;let tr=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");tr&&(st.value=tr),it.path&&An(),Pt.value=(nr=gn.value)==null?void 0:nr.querySelector("#add-media-resource-dialog"),Pt.value.addEventListener("sl-hide",()=>kn()),Bt.value=(dr=gn.value)==null?void 0:dr.querySelector("#add-media-resource-form"),Ft.value=(or=gn.value)==null?void 0:or.querySelector("#resource-folder"),Ft.value.value=Lt.value.join("/"),Yt.value=(ur=gn.value)==null?void 0:ur.querySelector("#resource-name"),Zt.value=(Cr=gn.value)==null?void 0:Cr.querySelector("#resource-summary"),Wt.value=(Sr=gn.value)==null?void 0:Sr.querySelector("#img"),Qt.value=(rr=gn.value)==null?void 0:rr.querySelector("#filePicker"),it.show&&Mn()}function An(){var tr;if(it.path){let[nr,dr]=((tr=it.path.split(":").pop())==null?void 0:tr.split("?"))||[],or=dr?Object.fromEntries(dr.split("&").map(Cr=>Cr.split("="))):{},ur=nr.split("/").filter(Cr=>Cr);ur.length>0&&(xt.value=ur[0]),ur.length>1&&(Et.value=ur[1]),ur.length>2&&(Lt.value=ur.slice(2)),or.ref&&(kt.value=or.ref||"main")}}function kn(){Ft.value&&(Ft.value.value=Lt.value.join("/")),Yt.value&&(Yt.value.value=""),Rt.value=void 0,Qt.value&&(Qt.value.value=""),nn.value=!1}async function Mn(){let tr=Bt.value;tr&&(tr.onclick||(tr.onclick=function(){},tr.addEventListener("submit",async nr=>{var ur,Cr,Sr;nr.preventDefault(),console.log(`Add resource: folder="${(ur=Ft.value)==null?void 0:ur.value}" name="${(Cr=Yt.value)==null?void 0:Cr.value}" summary="${(Sr=Zt.value)==null?void 0:Sr.value}"`);let dr=await jn();const or=new FileReader;or.onloadend=async()=>{var mr,_r;const rr=or.result;let Fr=(mr=Yt.value)==null?void 0:mr.value.trim().replace(/ /g,"_");if(Ft.value){let yr=[...(_r=Ft.value)==null?void 0:_r.value.split("/").filter(pr=>pr),Fr].join("/");await bt.value.putFile(xt.value,Et.value,`${yr}.${Dt.value}`,rr,kt.value,!0),Object.keys(dr).length>0&&await bt.value.putFile(xt.value,Et.value,`${yr}.yaml`,jsYaml.dump(dr),kt.value),nn.value=!1}},Rt.value&&or.readAsBinaryString(Rt.value)})),nn.value=!0)}function $n(tr){on.value=on.value.filter(nr=>nr.id!==tr)}function cn(tr){on.value=[...on.value,tr.detail[0]]}function Sn(){return nn.value}function an(){var tr;if(((tr=Qt.value)==null?void 0:tr.files)&&Qt.value.files.length>0){Rt.value=Qt.value.files[0];let nr=Rt.value.name.split(".");Dt.value=nr.slice(-1)[0].toLowerCase();let dr=window.URL||window.webkitURL;Wt.value&&(Wt.value.onload=()=>hn().then(or=>{Kt.value=or}),Wt.value.src=dr.createObjectURL(Rt.value)),setTimeout(()=>{var or;return((or=gn.value)==null?void 0:or.querySelector("#resource-name")).focus()},100)}}async function jn(){let tr={};Zt.value&&(tr.summary=Zt.value.value.trim());let nr=gn.value?Array.from(gn.value.querySelectorAll(".depicted [data-entity]")).map(or=>or.dataset.entity):[];nr.length>0&&(tr.depicts=nr);let dr=await hn();return dr&&(tr={...tr,...dr}),tr}async function hn(){var nr,dr,or;let tr={};try{let ur=await tt.parse((nr=Wt.value)==null?void 0:nr.src,!0);ur.CreateDate&&(tr.created=ur.CreateDate.toISOString());let Cr=await tt.orientation((dr=Wt.value)==null?void 0:dr.src);Cr&&(tr.orientation=Cr);let Sr=await tt.gps((or=Wt.value)==null?void 0:or.src);if(Sr){let{latitude:rr,longitude:Fr}=Sr;rr&&(tr.location=`${rr.toFixed(7)},${Fr.toFixed(7)}`)}}catch(ur){console.log(ur)}return tr}function zn(){nn.value=!1}function ir(tr){tr?Mn():kn()}return(tr,nr)=>{var dr,or,ur;return openBlock(),createElementBlock("div",{ref_key:"root",ref:mn,class:"main"},[createBaseVNode("sl-dialog",_hoisted_1$w,[createBaseVNode("form",{style:normalizeStyle({display:(dr=Rt.value)!=null&&dr.name?"grid":"none"}),id:"add-media-resource-form",class:"input-validation-pattern"},[createBaseVNode("div",{style:normalizeStyle({height:`${(or=Rt.value)!=null&&or.name?120:0}px`})},_hoisted_3$k,4),_hoisted_4$h,createBaseVNode("div",_hoisted_5$f,[createBaseVNode("div",_hoisted_6$b,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Kt.value,(Cr,Sr,rr)=>(openBlock(),createElementBlock("li",{key:`exif-${rr}`},[createBaseVNode("span",{class:"label",innerHTML:Sr},null,8,_hoisted_7$9),createBaseVNode("span",{class:"value",innerHTML:Cr},null,8,_hoisted_8$9)]))),128))])]),createBaseVNode("div",_hoisted_9$7,[createBaseVNode("div",_hoisted_10$6,[_hoisted_11$5,createBaseVNode("ve-wikidata-search",{onEntitySelected:cn},null,32)]),createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(on.value,Cr=>(openBlock(),createElementBlock("li",{key:Cr.id,"data-entity":Cr.id},[createBaseVNode("span",{class:"entity-label",innerHTML:Cr.label},null,8,_hoisted_13$4),createBaseVNode("span",{class:"entity-description",innerHTML:Cr.description||""},null,8,_hoisted_14$4),createBaseVNode("sl-icon-button",{class:"remove-entity",onClick:Sr=>$n(Cr.id),id:"remove-icon",name:"trash",label:"Remove entity"},null,8,_hoisted_15$4)],8,_hoisted_12$4))),128))])])]),createBaseVNode("div",{class:"buttons"},[createBaseVNode("sl-button",{onClick:zn},"Cancel"),_hoisted_16$4])],4),createBaseVNode("input",{style:normalizeStyle({display:(ur=Rt.value)!=null&&ur.name?"none":"block"}),id:"filePicker",type:"file",accept:"image/x-png,image/jpeg,image/gif",onChange:an},null,36)])],512)}}}),_style_0$q=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}input[type=file]{font-size:1.2rem}form{margin:12px}form .buttons{display:flex;gap:12px;justify-content:center}form{display:grid;height:60vh;grid-template-columns:1fr;grid-template-rows:auto auto 1fr auto;margin:0;gap:12px}.metadata{height:100%;overflow-y:scroll;overflow-x:hidden;margin:0}.exif-data ul{list-style:none;margin:0;padding:0}.label{font-weight:700;margin-right:12px}.label:after{content:":"}.fields{display:flex;flex-direction:column;gap:6px}.search{display:flex;align-items:center;gap:12px}.search div{font-size:1.1rem;font-weight:700}ve-wikidata-search{width:100%}.depicted{margin-top:12px}.depicted ul{list-style:none;margin:12px 0;padding:0;width:95%}.depicted ul li{display:flex;align-items:flex-start;gap:6px;margin-bottom:9px;width:100%}.entity-label{width:30%}.entity-description{width:50%}.remove-entity{margin-left:auto}.value{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}
`,_export_sfc=(nt,rt)=>{const it=nt.__vccOpts||nt;for(const[st,bt]of rt)it[st]=bt;return it},AddMediaResourceDialog=_export_sfc(_sfc_main$y,[["styles",[_style_0$q]]]),_hoisted_1$v={ref:"root",class:"main"},_hoisted_2$q=["content"],_hoisted_3$j=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{"font-size":"20px"}},null,-1),_hoisted_4$g={key:1,content:"Click to Login with Github",placement:"top"},_hoisted_5$e=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{"font-size":"20px"}},null,-1),_sfc_main$x=defineComponent({__name:"Auth.ce",setup(nt){const rt={"www.juncture-digital.org":"f7247e1e4769ba7c61e4","dev.juncture-digital.org":"bb290b5a738cb6fe31c7","search.juncture-digital.org":"ce9f2d2fb0a3498569fd"},it=ref(""),st=ref(),bt=computed(()=>it.value!==null),xt=ref(null),Et=ref(null);onMounted(()=>{it.value=window.localStorage.getItem("gh-auth-token"),Et.value=window.localStorage.getItem("gh-username"),window.addEventListener("storage",()=>it.value=window.localStorage.getItem("gh-auth-token"));let Rt=new URL(window.location.href).searchParams.get("code");if(Rt){let Dt=`${location.pathname}${location.hash}`;window.history.replaceState({},"",Dt),fetch(`/gh-token?code=${Rt}&hostname=${window.location.hostname}`).then(Bt=>Bt.text()).then(Bt=>{Bt&&(localStorage.setItem("gh-auth-token",Bt),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),Pt())}).catch(Bt=>console.log("err",Bt))}});function kt(){let Rt=new URL(window.location.href).hostname,Dt=Rt==="localhost"||Rt.indexOf("192.168.")===0,Bt=`${window.location.href}`,Ft=Dt?`${window.location.pathname}?code=testing&redirect_uri=${location.pathname}${location.hash}`:rt[location.hostname]!==void 0?`https://github.com/login/oauth/authorize?client_id=${rt[location.hostname]}&scope=repo&state=juncture&redirect_uri=${Bt}`:null;Ft&&(window.location.href=Ft)}function Lt(){Object.keys(localStorage).forEach(Rt=>localStorage.removeItem(Rt)),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),xt.value=null,location.href=""}function Pt(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${it.value}`}}).then(Rt=>Rt.json()).then(Rt=>xt.value=Rt)}return watch$1(xt,()=>{xt.value&&localStorage.setItem("gh-username",xt.value.login),Et.value=window.localStorage.getItem("gh-username")}),watch$1(it,()=>{st.value=new GithubClient(it.value||"")}),watch$1(st,async()=>{if(bt.value){let Rt=await st.value.user().then(Dt=>Dt.login);await st.value.repos(Rt).then(Dt=>{Dt.find(Bt=>Bt.name==="essays")||st.value.createRepository({name:"essays",description:"Juncture visual essays"}),Dt.find(Bt=>Bt.name==="media")||st.value.createRepository({name:"media",description:"Juncture media"})})}}),(Rt,Dt)=>(openBlock(),createElementBlock("div",_hoisted_1$v,[bt.value?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Logged in as ${Et.value}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",onClick:Lt},[_hoisted_3$j,createTextVNode(" Logout ")])],8,_hoisted_2$q)):(openBlock(),createElementBlock("sl-tooltip",_hoisted_4$g,[createBaseVNode("sl-button",{variant:"default",onClick:kt},[_hoisted_5$e,createTextVNode(" Login with Github ")])]))],512))}}),_style_0$p=`:host{display:inline-block}div{color:#00f}div:hover{text-decoration:underline;cursor:pointer}
`,Auth=_export_sfc(_sfc_main$x,[["styles",[_style_0$p]]]);SlIcon.define("sl-icon");const _hoisted_1$u=["name"],_sfc_main$w=defineComponent({__name:"Button.ce",props:{href:{type:String},target:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},label:{type:String},icon:{type:String},authRequired:{type:Boolean,default:!1}},setup(nt){const rt=nt,it=window,st=ref(null),bt=computed(()=>{var Lt,Pt;return(Pt=(Lt=st.value)==null?void 0:Lt.getRootNode())==null?void 0:Pt.host}),xt=ref(""),Et=computed(()=>xt.value!==null);onMounted(()=>{xt.value=window.localStorage.getItem("gh-auth-token"),window.addEventListener("storage",()=>xt.value=window.localStorage.getItem("gh-auth-token"))}),watch$1(bt,()=>{var Lt;((Lt=bt.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&bt.value.parentElement.children.length===1&&(bt.value.parentElement.style.display=!rt.authRequired||Et.value?"block":"none")}),watch$1(Et,()=>{var Lt;((Lt=bt.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&bt.value.parentElement.children.length===1&&(bt.value.parentElement.style.display=!rt.authRequired||Et.value?"block":"none")});function kt(){if(rt.target==="_blank"){let Lt=rt.width||1040,Pt=rt.height||Math.max(window.innerHeight,1500);it.junctureWindow&&it.junctureWindow.close();let Rt=`toolbar=yes,location=yes,left=${rt.left},top=${rt.top},width=${Lt},height=${Pt},scrollbars=yes,status=yes`;it.junctureWindow=window.open(rt.href,"_blank",Rt)}else rt.href&&(location.href=rt.href)}return(Lt,Pt)=>!rt.authRequired||Et.value?(openBlock(),createElementBlock("sl-button",{key:0,ref_key:"root",ref:st,onClick:kt},[rt.icon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.icon},null,8,_hoisted_1$u)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.label),1)],512)):createCommentVNode("",!0)}}),_style_0$o=`*{box-sizing:border-box}.ve-component{z-index:2;position:relative}ve-media-card{height:100%}.manifest-popup{border:1px solid #555;background-color:#fff;width:350px;max-height:500px;overflow-y:scroll;border-radius:6px;padding:4px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}main>p:first-of-type{padding-top:24px}.markdown-section h1,.markdown-section h2,.markdown-section h3,.markdown-section h4,.markdown-section h5,.markdown-section h6{line-height:1.2}main>section,main>p{padding:0 1rem}.right{float:right;top:0;width:calc(50% - 12px)}.visible{visibility:visible;opacity:1;transition:opacity .5s linear}.hidden{visibility:hidden;opacity:0;transition:visibility 0s .5s,opacity .5s linear}#juncture section{display:flow-root;position:relative}#juncture>section{margin-top:2rem}#juncture>section>section,#juncture>section>section>section{margin-top:2rem}#juncture>section>section>section>section,#juncture>section>section>section>section>section,#juncture>section>section>section>section>section>section{margin-top:1rem;padding-top:0}#juncture section>h1,#juncture section>h2,#juncture section>h3,#juncture section>h4,#juncture section>h5,#juncture section>h6{padding-top:0;margin-top:unset;margin-bottom:1.5rem;padding-bottom:0}#juncture section ol,#juncture section ul{padding:.5em .5em .5em 1.4em}#juncture section li>p{margin:0}body{font-family:Roboto,sans-serif;margin:0;background-color:#fff}.clear{clear:both}#juncture section.sticky{position:sticky;top:0;z-index:3;background-color:#fff;padding-top:6px}ve-footer ul{display:none}#juncture section{background-color:inherit}#juncture .section1,#juncture .section2{width:100%;clear:both;background-color:inherit}.noclear{clear:none}.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.hide{display:none}.show-active p{border-left:8px solid transparent}.show-active p.active{border-left:4px solid #ccc;padding-left:4px}ve-header>ul{display:none}ve-footer{clear:both}main{background-color:inherit}:target:before{content:"";display:block;height:80px;margin:32px 0 0}section.no-offset:target:before{display:none}#juncture section.footnote{font-size:80%;margin-top:1rem}.ve-component.sticky+div.footnote,.ve-component.sticky~div.footnote{width:100%}@media (max-width: 480px){#juncture{font-size:1.2rem;line-height:1.3;padding:0 0 40vh}#juncture h1{font-size:1.5em}#juncture h2{font-size:1.4em}#juncture h3{font-size:1.3em}#juncture>section{padding:0 6px}#juncture section.sticky.right{display:none}}@media (min-width: 481px){body{margin:0 2rem}#juncture{font-size:1.3rem;line-height:1.4;padding:0;max-width:1200px;margin:auto}.ve-component{z-index:2}.ve-component[grid]{z-index:3}ve-map.full{padding-bottom:12px}.right{margin-left:12px}.left{margin-right:12px}.sticky.right+section,.sticky.right~section,.sticky.right+div,.sticky.right~div,.sticky.right+p,.sticky.right~p,.sticky.right+ol,.sticky.right~ol .sticky.right+ul,.sticky.right~ul,.sticky.right+blockquote,.sticky.right~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.left+section,.ve-component.sticky.left~section,.ve-component.sticky.left+div,.ve-component.sticky.left~div,.ve-component.sticky.left+p,.ve-component.sticky.left~p,.ve-component.sticky.left+ol,.ve-component.sticky.left~ol .ve-component.sticky.left+ul,.ve-component.sticky.left~ul,.ve-component.sticky.left+blockquote,.ve-component.sticky.left~blockquote{margin-left:50%;padding-left:9px}.ve-component.sticky+section,.ve-component.sticky~section,#juncture section.sticky+section,#juncture section.sticky~section{clear:none}.ve-component.sticky.left.text-left+section,.ve-component.sticky.left.text-left~section{margin-left:0}.ve-component.sticky.left.text-left+div,.ve-component.sticky.left.text-left~div,.ve-component.sticky.left.text-left+p,.ve-component.sticky.left.text-left~p,.ve-component.sticky.left.text-left+ol,.ve-component.sticky.left.text-left~ol .ve-component.sticky.left.text-left+ul,.ve-component.sticky.left.text-left~ul,.ve-component.sticky.left.text-left+blockquote,.ve-component.sticky.left.text-left~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.right.text-right+section,.ve-component.sticky.right.text-right~section,.ve-component.sticky.right.text-right+div,.ve-component.sticky.right.text-right~div,.ve-component.sticky.right.text-right+p,.ve-component.sticky.right.text-right~p,.ve-component.sticky.right.text-right+ol,.ve-component.sticky.right.text-right~ol .ve-component.sticky.right.text-right+ul,.ve-component.sticky.right.text-right~ul,.ve-component.sticky.right.text-right+blockquote,.ve-component.sticky.right.text-right~blockquote{margin-left:50%;padding-left:9px}}#juncture section.tab{height:calc(100% - 84px);overflow-y:scroll;border:1px solid #ccc}#juncture .tabs label{margin-bottom:0}#juncture input{display:none}#juncture input+label{display:inline-block}#juncture input~.tab{visibility:hidden}#juncture #tab1:checked~.tab.content1,#juncture #tab2:checked~.tab.content2,#juncture #tab3:checked~.tab.content3,#juncture #tab4:checked~.tab.content4,#juncture #tab5:checked~.tab.content5,#juncture #tab6:checked~.tab.content6{visibility:visible}#juncture input+label{border:1px solid #999;background:#EEE;padding:4px 12px;border-radius:4px 4px 0 0;position:relative;top:1px;cursor:pointer}#juncture input:checked+label{background:#FFF;border-bottom:1px solid white;z-index:2}#juncture input~.tab{border-top:1px solid #999;padding:12px}#juncture h1{margin-bottom:32px}#juncture .tab{position:absolute;visibility:hidden;width:100%;height:100%;padding:1rem 0}#juncture .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(265px,1fr));grid-auto-rows:1fr;row-gap:2rem;column-gap:2rem}#juncture .cards.wrapper{margin-top:0}#juncture .cards.wrapper>section{padding:0}#juncture .card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;padding:0;border:1px solid #ddd;border-radius:6px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#juncture .card p{border:none}#juncture .card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:300px}#juncture .card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}#juncture .card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.4rem .5rem;margin:0;font-size:1.1rem;font-weight:700;max-height:260px;overflow-y:scroll}#juncture .card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-start;min-height:110px;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:12}.clamp5{-webkit-line-clamp:5}#juncture .hero{display:flex;flex-direction:column;height:400px;margin-top:0}#juncture .hero-text{color:#fff;text-align:center;font-size:2.5rem;max-width:60%;margin:auto;font-family:Georgia;hyphens:unset}#juncture .cta{background-color:#ffe55a;border-radius:50px;font-family:Roboto;font-size:2rem;padding:16px 72px;margin:0 auto auto;text-align:center}@media (max-width: 480px){#juncture .hero-text{font-size:2rem;max-width:80%}#juncture .cta{font-size:1.5rem;padding:12px 60px}}mark{cursor:pointer;background:unset;border-bottom:1px solid #ccc;color:#444}mark:hover{border-bottom:2px solid #444;background:#eee}mark:after{color:#aaa;font-size:50%;line-height:0;position:relative;vertical-align:baseline;top:-.3em;padding-left:2px;padding-right:4px}mark.anno:after,mark.zoomto:after{content:"\\1f50e"}mark.play:after{content:"\\25b6"}mark.flyto:after{content:"\\2708";font-size:120%;top:0}#juncture a{color:#0645ad;text-decoration:none}#juncture a:visited{color:#0b0080}#juncture a:hover{color:#06e}#juncture a:active{color:#faa700}#juncture a:focus{outline:thin dotted}#juncture a:hover,#juncture a:active{outline:0}::-moz-selection{background:rgba(255,255,0,.3);color:#000}::selection{background:rgba(255,255,0,.3);color:#000}#juncture a::-moz-selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture a::selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture p,#juncture li{line-height:1.4;color:#444;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}#juncture p{margin:0 0 1rem}#juncture img{max-width:100%}#juncture h1,#juncture h2,#juncture h3,#juncture h4,#juncture h5,#juncture h6{font-weight:500;color:#444;line-height:1em}#juncture h4,#juncture h5 #juncture h6{font-weight:500}#juncture h1{font-size:1.8em}#juncture h2{font-size:1.6em}#juncture h3{font-size:1.5em}#juncture h4{font-size:1.2em}#juncture h5{font-size:1em}#juncture h6{font-size:.9em}#juncture blockquote{color:#666;margin:0;padding-left:1em;border-left:.5em #EEE solid}#juncture hr{display:block;height:2px;border:0;border-top:1px solid #aaa;border-bottom:1px solid #eee;margin:1em 0;padding:0}#juncture pre,#juncture code,#juncture kbd,#juncture samp{color:#900;background-color:#eee;padding:0;font-family:monospace,monospace;_font-family:"courier new",monospace;font-size:1em}#juncture pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#juncture b,#juncture strong{font-weight:700}#juncture dfn{font-style:italic}#juncture ins{background:#ff9;color:#000;text-decoration:none}#juncture sub,#juncture sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}#juncture sup{top:-.5em}#juncture sub{bottom:-.25em}#juncture ul,#juncture ol{margin:0;padding:0 0 0 2em}#juncture li p:last-child{margin:0}#juncture dd{margin:0 0 0 2em}#juncture img{border:0;-ms-interpolation-mode:bicubic;vertical-align:middle}#juncture table{border-collapse:collapse;border-spacing:0;width:100%}#juncture th{border-bottom:1px solid black}#juncture td{vertical-align:top}#juncture table{border:1px solid #555}#juncture td,#juncture th{border:1px solid #555;padding:8px;line-height:1.2}#juncture th{background-color:#e2f0f7;font-weight:700;text-align:center}
`,_style_1$6=`:host{display:inline-block}
`,Button=_export_sfc(_sfc_main$w,[["styles",[_style_0$o,_style_1$6]]]);var alert_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: contents;

    /* For better DX, we'll reset the margin here so the base part can inherit it */
    margin: 0;
  }

  .alert {
    position: relative;
    display: flex;
    align-items: stretch;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-top-width: calc(var(--sl-panel-border-width) * 3);
    border-radius: var(--sl-border-radius-medium);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-normal);
    line-height: 1.6;
    color: var(--sl-color-neutral-700);
    margin: inherit;
  }

  .alert:not(.alert--has-icon) .alert__icon,
  .alert:not(.alert--closable) .alert__close-button {
    display: none;
  }

  .alert__icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-large);
    padding-inline-start: var(--sl-spacing-large);
  }

  .alert--primary {
    border-top-color: var(--sl-color-primary-600);
  }

  .alert--primary .alert__icon {
    color: var(--sl-color-primary-600);
  }

  .alert--success {
    border-top-color: var(--sl-color-success-600);
  }

  .alert--success .alert__icon {
    color: var(--sl-color-success-600);
  }

  .alert--neutral {
    border-top-color: var(--sl-color-neutral-600);
  }

  .alert--neutral .alert__icon {
    color: var(--sl-color-neutral-600);
  }

  .alert--warning {
    border-top-color: var(--sl-color-warning-600);
  }

  .alert--warning .alert__icon {
    color: var(--sl-color-warning-600);
  }

  .alert--danger {
    border-top-color: var(--sl-color-danger-600);
  }

  .alert--danger .alert__icon {
    color: var(--sl-color-danger-600);
  }

  .alert__message {
    flex: 1 1 auto;
    display: block;
    padding: var(--sl-spacing-large);
    overflow: hidden;
  }

  .alert__close-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
    padding-inline-end: var(--sl-spacing-medium);
  }
`,toastStack=Object.assign(document.createElement("div"),{className:"sl-toast-stack"}),SlAlert=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"icon","suffix"),this.localize=new LocalizeController(this),this.open=!1,this.closable=!1,this.variant="primary",this.duration=1/0}firstUpdated(){this.base.hidden=!this.open}restartAutoHide(){clearTimeout(this.autoHideTimeout),this.open&&this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.duration))}handleCloseClick(){this.hide()}handleMouseMove(){this.restartAutoHide()}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.duration<1/0&&this.restartAutoHide(),await stopAnimations(this.base),this.base.hidden=!1;const{keyframes:nt,options:rt}=getAnimation(this,"alert.show",{dir:this.localize.dir()});await animateTo(this.base,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),clearTimeout(this.autoHideTimeout),await stopAnimations(this.base);const{keyframes:nt,options:rt}=getAnimation(this,"alert.hide",{dir:this.localize.dir()});await animateTo(this.base,nt,rt),this.base.hidden=!0,this.emit("sl-after-hide")}}handleDurationChange(){this.restartAutoHide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}async toast(){return new Promise(nt=>{toastStack.parentElement===null&&document.body.append(toastStack),toastStack.appendChild(this),requestAnimationFrame(()=>{this.clientWidth,this.show()}),this.addEventListener("sl-after-hide",()=>{toastStack.removeChild(this),nt(),toastStack.querySelector("sl-alert")===null&&toastStack.remove()},{once:!0})})}render(){return x$1`
      <div
        part="base"
        class=${o$1({alert:!0,"alert--open":this.open,"alert--closable":this.closable,"alert--has-icon":this.hasSlotController.test("icon"),"alert--primary":this.variant==="primary","alert--success":this.variant==="success","alert--neutral":this.variant==="neutral","alert--warning":this.variant==="warning","alert--danger":this.variant==="danger"})}
        role="alert"
        aria-hidden=${this.open?"false":"true"}
        @mousemove=${this.handleMouseMove}
      >
        <div part="icon" class="alert__icon">
          <slot name="icon"></slot>
        </div>

        <div part="message" class="alert__message" aria-live="polite">
          <slot></slot>
        </div>

        ${this.closable?x$1`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                class="alert__close-button"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                @click=${this.handleCloseClick}
              ></sl-icon-button>
            `:""}
      </div>
    `}};SlAlert.styles=alert_styles_default;SlAlert.dependencies={"sl-icon-button":SlIconButton};__decorateClass([i$4('[part~="base"]')],SlAlert.prototype,"base",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlAlert.prototype,"open",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlAlert.prototype,"closable",2);__decorateClass([n$3({reflect:!0})],SlAlert.prototype,"variant",2);__decorateClass([n$3({type:Number})],SlAlert.prototype,"duration",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlAlert.prototype,"handleOpenChange",1);__decorateClass([watch("duration")],SlAlert.prototype,"handleDurationChange",1);setDefaultAnimation("alert.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("alert.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});SlAlert.define("sl-alert");var textarea_styles_default=i$7`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    display: block;
  }

  .textarea {
    display: flex;
    align-items: center;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
    cursor: text;
  }

  /* Standard textareas */
  .textarea--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .textarea--standard:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }
  .textarea--standard:hover:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-hover);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    color: var(--sl-input-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-focus);
  }

  .textarea--standard.textarea--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea--standard.textarea--disabled .textarea__control {
    color: var(--sl-input-color-disabled);
  }

  .textarea--standard.textarea--disabled .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled textareas */
  .textarea--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .textarea--filled:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .textarea--filled.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .textarea--filled.textarea--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: 1.4;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .textarea__control::-webkit-search-decoration,
  .textarea__control::-webkit-search-cancel-button,
  .textarea__control::-webkit-search-results-button,
  .textarea__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .textarea__control:focus {
    outline: none;
  }

  /*
   * Size modifiers
   */

  .textarea--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
  }

  .textarea--small .textarea__control {
    padding: 0.5em var(--sl-input-spacing-small);
  }

  .textarea--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .textarea--medium .textarea__control {
    padding: 0.5em var(--sl-input-spacing-medium);
  }

  .textarea--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
  }

  .textarea--large .textarea__control {
    padding: 0.5em var(--sl-input-spacing-large);
  }

  /*
   * Resize types
   */

  .textarea--resize-none .textarea__control {
    resize: none;
  }

  .textarea--resize-vertical .textarea__control {
    resize: vertical;
  }

  .textarea--resize-auto .textarea__control {
    height: auto;
    resize: none;
    overflow-y: hidden;
  }
`,SlTextarea=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.hasFocus=!1,this.title="",this.name="",this.value="",this.size="medium",this.filled=!1,this.label="",this.helpText="",this.placeholder="",this.rows=4,this.resize="vertical",this.disabled=!1,this.readonly=!1,this.form="",this.required=!1,this.spellcheck=!0,this.defaultValue=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.setTextareaHeight()),this.updateComplete.then(()=>{this.setTextareaHeight(),this.resizeObserver.observe(this.input)})}firstUpdated(){this.formControlController.updateValidity()}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this.input)}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.setTextareaHeight(),this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.emit("sl-input")}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}setTextareaHeight(){this.resize==="auto"?(this.input.style.height="auto",this.input.style.height=`${this.input.scrollHeight}px`):this.input.style.height=void 0}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleRowsChange(){this.setTextareaHeight()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity(),this.setTextareaHeight()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}scrollPosition(nt){if(nt){typeof nt.top=="number"&&(this.input.scrollTop=nt.top),typeof nt.left=="number"&&(this.input.scrollLeft=nt.left);return}return{top:this.input.scrollTop,left:this.input.scrollTop}}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,st){this.input.setRangeText(nt,rt,it,st),this.value!==this.input.value&&(this.value=this.input.value),this.value!==this.input.value&&(this.value=this.input.value,this.setTextareaHeight())}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.formControlController.updateValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt;return x$1`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({textarea:!0,"textarea--small":this.size==="small","textarea--medium":this.size==="medium","textarea--large":this.size==="large","textarea--standard":!this.filled,"textarea--filled":this.filled,"textarea--disabled":this.disabled,"textarea--focused":this.hasFocus,"textarea--empty":!this.value,"textarea--resize-none":this.resize==="none","textarea--resize-vertical":this.resize==="vertical","textarea--resize-auto":this.resize==="auto"})}
          >
            <textarea
              part="textarea"
              id="input"
              class="textarea__control"
              title=${this.title}
              name=${l$1(this.name)}
              .value=${l(this.value)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${l$1(this.placeholder)}
              rows=${l$1(this.rows)}
              minlength=${l$1(this.minlength)}
              maxlength=${l$1(this.maxlength)}
              autocapitalize=${l$1(this.autocapitalize)}
              autocorrect=${l$1(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${l$1(this.spellcheck)}
              enterkeyhint=${l$1(this.enterkeyhint)}
              inputmode=${l$1(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            ></textarea>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};SlTextarea.styles=textarea_styles_default;__decorateClass([i$4(".textarea__control")],SlTextarea.prototype,"input",2);__decorateClass([t$2()],SlTextarea.prototype,"hasFocus",2);__decorateClass([n$3()],SlTextarea.prototype,"title",2);__decorateClass([n$3()],SlTextarea.prototype,"name",2);__decorateClass([n$3()],SlTextarea.prototype,"value",2);__decorateClass([n$3({reflect:!0})],SlTextarea.prototype,"size",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTextarea.prototype,"filled",2);__decorateClass([n$3()],SlTextarea.prototype,"label",2);__decorateClass([n$3({attribute:"help-text"})],SlTextarea.prototype,"helpText",2);__decorateClass([n$3()],SlTextarea.prototype,"placeholder",2);__decorateClass([n$3({type:Number})],SlTextarea.prototype,"rows",2);__decorateClass([n$3()],SlTextarea.prototype,"resize",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTextarea.prototype,"disabled",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTextarea.prototype,"readonly",2);__decorateClass([n$3({reflect:!0})],SlTextarea.prototype,"form",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTextarea.prototype,"required",2);__decorateClass([n$3({type:Number})],SlTextarea.prototype,"minlength",2);__decorateClass([n$3({type:Number})],SlTextarea.prototype,"maxlength",2);__decorateClass([n$3()],SlTextarea.prototype,"autocapitalize",2);__decorateClass([n$3()],SlTextarea.prototype,"autocorrect",2);__decorateClass([n$3()],SlTextarea.prototype,"autocomplete",2);__decorateClass([n$3({type:Boolean})],SlTextarea.prototype,"autofocus",2);__decorateClass([n$3()],SlTextarea.prototype,"enterkeyhint",2);__decorateClass([n$3({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlTextarea.prototype,"spellcheck",2);__decorateClass([n$3()],SlTextarea.prototype,"inputmode",2);__decorateClass([defaultValue()],SlTextarea.prototype,"defaultValue",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleDisabledChange",1);__decorateClass([watch("rows",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleRowsChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleValueChange",1);SlTextarea.define("sl-textarea");const _hoisted_1$t=["innerHTML"],_hoisted_2$p=["label"],_hoisted_3$i=createBaseVNode("sl-input",{id:"from",type:"email",label:"Email address"},null,-1),_hoisted_4$f=createBaseVNode("sl-alert",{id:"bad-email-alert",variant:"danger"},[createBaseVNode("sl-icon",{slot:"icon",name:"exclamation-octagon"}),createBaseVNode("strong",null,"Invalid email address"),createBaseVNode("br"),createTextVNode("Please fix and resubmit ")],-1),_hoisted_5$d=createBaseVNode("sl-textarea",{id:"message",label:"Message"},null,-1),_hoisted_6$a=createBaseVNode("sl-alert",{id:"no-message-alert",variant:"danger"},[createBaseVNode("sl-icon",{slot:"icon",name:"exclamation-octagon"}),createBaseVNode("strong",null,"No message entered"),createBaseVNode("br")],-1),emailEndpoint="/sendmail/",_sfc_main$v=defineComponent({__name:"Contact.ce",props:{contact:{type:String},title:{type:String},subject:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){const it=nt,st=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,bt=ref(null),xt=computed(()=>{var Wt,Qt;return(Qt=(Wt=bt.value)==null?void 0:Wt.getRootNode())==null?void 0:Qt.host}),Et=computed(()=>{var Wt;return(Wt=bt==null?void 0:bt.value)==null?void 0:Wt.parentNode}),kt=computed(()=>{var Wt;return(Wt=xt.value)==null?void 0:Wt.innerHTML}),Lt=ref(!1);rt({show:Lt}),watch$1(Lt,()=>Pt.open=Lt.value);let Pt,Rt,Dt,Bt,Ft;onMounted(()=>{Lt.value=it.show}),watch$1(it,()=>{Lt.value=it.show}),watch$1(xt,()=>{var Wt,Qt,Kt,on,nn;Pt=(Wt=Et.value)==null?void 0:Wt.querySelector(".contact-dialog"),Rt=(Qt=Et.value)==null?void 0:Qt.querySelector("#from"),Bt=(Kt=Et.value)==null?void 0:Kt.querySelector("#message"),Dt=(on=Et.value)==null?void 0:on.querySelector("#bad-email-alert"),Ft=(nn=Et.value)==null?void 0:nn.querySelector("#no-message-alert"),Pt.addEventListener("sl-hide",()=>Lt.value=!1)});function Yt(){Pt.hide(),Rt.value="",Bt.value="",Dt.hide(),Ft.hide()}async function Zt(){let Wt=st.test(Rt.value);Wt?Dt.hide():Dt.show();let Qt=Bt.value.trim().length>0;if(Qt?Ft.hide():Ft.show(),Wt&&Qt){let Kt={to:it.contact,from:Rt.value,subject:it.subject||"Contact Us",message:Bt.value};Yt(),await fetch(emailEndpoint,{method:"POST",body:JSON.stringify(Kt)})}}return(Wt,Qt)=>(openBlock(),createElementBlock("section",{ref_key:"root",ref:bt,class:"main"},[kt.value?(openBlock(),createElementBlock("a",{key:0,href:"#",onClick:Qt[0]||(Qt[0]=withModifiers(Kt=>Lt.value=!Lt.value,["prevent"])),innerHTML:kt.value},null,8,_hoisted_1$t)):createCommentVNode("",!0),createBaseVNode("sl-dialog",{label:it.title||"Contact Us",class:"contact-dialog"},[_hoisted_3$i,_hoisted_4$f,_hoisted_5$d,_hoisted_6$a,createBaseVNode("sl-button",{id:"cancel",slot:"footer",onClick:Yt},"Cancel"),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Zt},"Submit")],8,_hoisted_2$p)],512))}}),_style_0$n=`*{box-sizing:border-box}:host{display:inline-block}sl-input,sl-textarea{padding:12px 0}sl-dialog::part(title),sl-input::part(form-control),sl-textarea::part(form-control){text-align:left}
`,Contact=_export_sfc(_sfc_main$v,[["styles",[_style_0$n]]]);var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}function getAugmentedNamespace(nt){var rt=nt.default;if(typeof rt=="function"){var it=function(){return rt.apply(this,arguments)};it.prototype=rt.prototype}else it={};return Object.defineProperty(it,"__esModule",{value:!0}),Object.keys(nt).forEach(function(st){var bt=Object.getOwnPropertyDescriptor(nt,st);Object.defineProperty(it,st,bt.get?bt:{enumerable:!0,get:function(){return nt[st]}})}),it}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt,rt){return function(it){return new Sha256(rt,!0).update(it)[nt]()}},createMethod=function(nt){var rt=createOutputMethod("hex",nt);NODE_JS&&(rt=nodeWrap(rt,nt)),rt.create=function(){return new Sha256(nt)},rt.update=function(bt){return rt.create().update(bt)};for(var it=0;it<OUTPUT_TYPES.length;++it){var st=OUTPUT_TYPES[it];rt[st]=createOutputMethod(st,nt)}return rt},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash(algorithm).update(nt,"utf8").digest("hex");if(nt==null)throw new Error(ERROR);return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod},createHmacOutputMethod=function(nt,rt){return function(it,st){return new HmacSha256(it,rt,!0).update(st)[nt]()}},createHmacMethod=function(nt){var rt=createHmacOutputMethod("hex",nt);rt.create=function(bt){return new HmacSha256(bt,nt)},rt.update=function(bt,xt){return rt.create(bt).update(xt)};for(var it=0;it<OUTPUT_TYPES.length;++it){var st=OUTPUT_TYPES[it];rt[st]=createHmacOutputMethod(st,nt)}return rt};function Sha256(nt,rt){rt?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],nt?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=nt}Sha256.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);rt=!0}for(var st,bt=0,xt,Et=nt.length,kt=this.blocks;bt<Et;){if(this.hashed&&(this.hashed=!1,kt[0]=this.block,kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)for(xt=this.start;bt<Et&&xt<64;++bt)kt[xt>>2]|=nt[bt]<<SHIFT[xt++&3];else for(xt=this.start;bt<Et&&xt<64;++bt)st=nt.charCodeAt(bt),st<128?kt[xt>>2]|=st<<SHIFT[xt++&3]:st<2048?(kt[xt>>2]|=(192|st>>6)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):st<55296||st>=57344?(kt[xt>>2]|=(224|st>>12)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):(st=65536+((st&1023)<<10|nt.charCodeAt(++bt)&1023),kt[xt>>2]|=(240|st>>18)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>12&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]);this.lastByteIndex=xt,this.bytes+=xt-this.start,xt>=64?(this.block=kt[16],this.start=xt-64,this.hash(),this.hashed=!0):this.start=xt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[16]=this.block,nt[rt>>2]|=EXTRA[rt&3],this.block=nt[16],rt>=56&&(this.hashed||this.hash(),nt[0]=this.block,nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.hBytes<<3|this.bytes>>>29,nt[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,bt=this.h4,xt=this.h5,Et=this.h6,kt=this.h7,Lt=this.blocks,Pt,Rt,Dt,Bt,Ft,Yt,Zt,Wt,Qt,Kt,on;for(Pt=16;Pt<64;++Pt)Ft=Lt[Pt-15],Rt=(Ft>>>7|Ft<<25)^(Ft>>>18|Ft<<14)^Ft>>>3,Ft=Lt[Pt-2],Dt=(Ft>>>17|Ft<<15)^(Ft>>>19|Ft<<13)^Ft>>>10,Lt[Pt]=Lt[Pt-16]+Rt+Lt[Pt-7]+Dt<<0;for(on=rt&it,Pt=0;Pt<64;Pt+=4)this.first?(this.is224?(Wt=300032,Ft=Lt[0]-1413257819,kt=Ft-150054599<<0,st=Ft+24177077<<0):(Wt=704751109,Ft=Lt[0]-210244248,kt=Ft-1521486534<<0,st=Ft+143694565<<0),this.first=!1):(Rt=(nt>>>2|nt<<30)^(nt>>>13|nt<<19)^(nt>>>22|nt<<10),Dt=(bt>>>6|bt<<26)^(bt>>>11|bt<<21)^(bt>>>25|bt<<7),Wt=nt&rt,Bt=Wt^nt&it^on,Zt=bt&xt^~bt&Et,Ft=kt+Dt+Zt+K[Pt]+Lt[Pt],Yt=Rt+Bt,kt=st+Ft<<0,st=Ft+Yt<<0),Rt=(st>>>2|st<<30)^(st>>>13|st<<19)^(st>>>22|st<<10),Dt=(kt>>>6|kt<<26)^(kt>>>11|kt<<21)^(kt>>>25|kt<<7),Qt=st&nt,Bt=Qt^st&rt^Wt,Zt=kt&bt^~kt&xt,Ft=Et+Dt+Zt+K[Pt+1]+Lt[Pt+1],Yt=Rt+Bt,Et=it+Ft<<0,it=Ft+Yt<<0,Rt=(it>>>2|it<<30)^(it>>>13|it<<19)^(it>>>22|it<<10),Dt=(Et>>>6|Et<<26)^(Et>>>11|Et<<21)^(Et>>>25|Et<<7),Kt=it&st,Bt=Kt^it&nt^Qt,Zt=Et&kt^~Et&bt,Ft=xt+Dt+Zt+K[Pt+2]+Lt[Pt+2],Yt=Rt+Bt,xt=rt+Ft<<0,rt=Ft+Yt<<0,Rt=(rt>>>2|rt<<30)^(rt>>>13|rt<<19)^(rt>>>22|rt<<10),Dt=(xt>>>6|xt<<26)^(xt>>>11|xt<<21)^(xt>>>25|xt<<7),on=rt&it,Bt=on^rt&st^Kt,Zt=xt&Et^~xt&kt,Ft=bt+Dt+Zt+K[Pt+3]+Lt[Pt+3],Yt=Rt+Bt,bt=nt+Ft<<0,nt=Ft+Yt<<0;this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+st<<0,this.h4=this.h4+bt<<0,this.h5=this.h5+xt<<0,this.h6=this.h6+Et<<0,this.h7=this.h7+kt<<0},Sha256.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,bt=this.h4,xt=this.h5,Et=this.h6,kt=this.h7,Lt=HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[st>>28&15]+HEX_CHARS[st>>24&15]+HEX_CHARS[st>>20&15]+HEX_CHARS[st>>16&15]+HEX_CHARS[st>>12&15]+HEX_CHARS[st>>8&15]+HEX_CHARS[st>>4&15]+HEX_CHARS[st&15]+HEX_CHARS[bt>>28&15]+HEX_CHARS[bt>>24&15]+HEX_CHARS[bt>>20&15]+HEX_CHARS[bt>>16&15]+HEX_CHARS[bt>>12&15]+HEX_CHARS[bt>>8&15]+HEX_CHARS[bt>>4&15]+HEX_CHARS[bt&15]+HEX_CHARS[xt>>28&15]+HEX_CHARS[xt>>24&15]+HEX_CHARS[xt>>20&15]+HEX_CHARS[xt>>16&15]+HEX_CHARS[xt>>12&15]+HEX_CHARS[xt>>8&15]+HEX_CHARS[xt>>4&15]+HEX_CHARS[xt&15]+HEX_CHARS[Et>>28&15]+HEX_CHARS[Et>>24&15]+HEX_CHARS[Et>>20&15]+HEX_CHARS[Et>>16&15]+HEX_CHARS[Et>>12&15]+HEX_CHARS[Et>>8&15]+HEX_CHARS[Et>>4&15]+HEX_CHARS[Et&15];return this.is224||(Lt+=HEX_CHARS[kt>>28&15]+HEX_CHARS[kt>>24&15]+HEX_CHARS[kt>>20&15]+HEX_CHARS[kt>>16&15]+HEX_CHARS[kt>>12&15]+HEX_CHARS[kt>>8&15]+HEX_CHARS[kt>>4&15]+HEX_CHARS[kt&15]),Lt},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,bt=this.h4,xt=this.h5,Et=this.h6,kt=this.h7,Lt=[nt>>24&255,nt>>16&255,nt>>8&255,nt&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255,it>>24&255,it>>16&255,it>>8&255,it&255,st>>24&255,st>>16&255,st>>8&255,st&255,bt>>24&255,bt>>16&255,bt>>8&255,bt&255,xt>>24&255,xt>>16&255,xt>>8&255,xt&255,Et>>24&255,Et>>16&255,Et>>8&255,Et&255];return this.is224||Lt.push(kt>>24&255,kt>>16&255,kt>>8&255,kt&255),Lt},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(this.is224?28:32),rt=new DataView(nt);return rt.setUint32(0,this.h0),rt.setUint32(4,this.h1),rt.setUint32(8,this.h2),rt.setUint32(12,this.h3),rt.setUint32(16,this.h4),rt.setUint32(20,this.h5),rt.setUint32(24,this.h6),this.is224||rt.setUint32(28,this.h7),nt};function HmacSha256(nt,rt,it){var st,bt=typeof nt;if(bt==="string"){var xt=[],Et=nt.length,kt=0,Lt;for(st=0;st<Et;++st)Lt=nt.charCodeAt(st),Lt<128?xt[kt++]=Lt:Lt<2048?(xt[kt++]=192|Lt>>6,xt[kt++]=128|Lt&63):Lt<55296||Lt>=57344?(xt[kt++]=224|Lt>>12,xt[kt++]=128|Lt>>6&63,xt[kt++]=128|Lt&63):(Lt=65536+((Lt&1023)<<10|nt.charCodeAt(++st)&1023),xt[kt++]=240|Lt>>18,xt[kt++]=128|Lt>>12&63,xt[kt++]=128|Lt>>6&63,xt[kt++]=128|Lt&63);nt=xt}else if(bt==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);nt.length>64&&(nt=new Sha256(rt,!0).update(nt).array());var Pt=[],Rt=[];for(st=0;st<64;++st){var Dt=nt[st]||0;Pt[st]=92^Dt,Rt[st]=54^Dt}Sha256.call(this,rt,it),this.update(Rt),this.oKeyPad=Pt,this.inner=!0,this.sharedMemory=it}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var nt=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(nt),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var md5$1={exports:{}};/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt){return function(rt){return new Md5(!0).update(rt)[nt]()}},createMethod=function(){var nt=createOutputMethod("hex");NODE_JS&&(nt=nodeWrap(nt)),nt.create=function(){return new Md5},nt.update=function(st){return nt.create().update(st)};for(var rt=0;rt<OUTPUT_TYPES.length;++rt){var it=OUTPUT_TYPES[rt];nt[it]=createOutputMethod(it)}return nt},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash("md5").update(nt,"utf8").digest("hex");if(nt==null)throw ERROR;return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash("md5").update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod};function Md5(nt){if(nt)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var rt=new ArrayBuffer(68);this.buffer8=new Uint8Array(rt),this.blocks=new Uint32Array(rt)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw ERROR;if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw ERROR}else throw ERROR;rt=!0}for(var st,bt=0,xt,Et=nt.length,kt=this.blocks,Lt=this.buffer8;bt<Et;){if(this.hashed&&(this.hashed=!1,kt[0]=kt[16],kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)if(ARRAY_BUFFER)for(xt=this.start;bt<Et&&xt<64;++bt)Lt[xt++]=nt[bt];else for(xt=this.start;bt<Et&&xt<64;++bt)kt[xt>>2]|=nt[bt]<<SHIFT[xt++&3];else if(ARRAY_BUFFER)for(xt=this.start;bt<Et&&xt<64;++bt)st=nt.charCodeAt(bt),st<128?Lt[xt++]=st:st<2048?(Lt[xt++]=192|st>>6,Lt[xt++]=128|st&63):st<55296||st>=57344?(Lt[xt++]=224|st>>12,Lt[xt++]=128|st>>6&63,Lt[xt++]=128|st&63):(st=65536+((st&1023)<<10|nt.charCodeAt(++bt)&1023),Lt[xt++]=240|st>>18,Lt[xt++]=128|st>>12&63,Lt[xt++]=128|st>>6&63,Lt[xt++]=128|st&63);else for(xt=this.start;bt<Et&&xt<64;++bt)st=nt.charCodeAt(bt),st<128?kt[xt>>2]|=st<<SHIFT[xt++&3]:st<2048?(kt[xt>>2]|=(192|st>>6)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):st<55296||st>=57344?(kt[xt>>2]|=(224|st>>12)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):(st=65536+((st&1023)<<10|nt.charCodeAt(++bt)&1023),kt[xt>>2]|=(240|st>>18)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>12&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]);this.lastByteIndex=xt,this.bytes+=xt-this.start,xt>=64?(this.start=xt-64,this.hash(),this.hashed=!0):this.start=xt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[rt>>2]|=EXTRA[rt&3],rt>=56&&(this.hashed||this.hash(),nt[0]=nt[16],nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.bytes<<3,nt[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var nt,rt,it,st,bt,xt,Et=this.blocks;this.first?(nt=Et[0]-680876937,nt=(nt<<7|nt>>>25)-271733879<<0,st=(-1732584194^nt&2004318071)+Et[1]-117830708,st=(st<<12|st>>>20)+nt<<0,it=(-271733879^st&(nt^-271733879))+Et[2]-1126478375,it=(it<<17|it>>>15)+st<<0,rt=(nt^it&(st^nt))+Et[3]-1316259209,rt=(rt<<22|rt>>>10)+it<<0):(nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,nt+=(st^rt&(it^st))+Et[0]-680876936,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[1]-389564586,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[2]+606105819,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[3]-1044525330,rt=(rt<<22|rt>>>10)+it<<0),nt+=(st^rt&(it^st))+Et[4]-176418897,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[5]+1200080426,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[6]-1473231341,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[7]-45705983,rt=(rt<<22|rt>>>10)+it<<0,nt+=(st^rt&(it^st))+Et[8]+1770035416,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[9]-1958414417,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[10]-42063,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[11]-1990404162,rt=(rt<<22|rt>>>10)+it<<0,nt+=(st^rt&(it^st))+Et[12]+1804603682,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[13]-40341101,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[14]-1502002290,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[15]+1236535329,rt=(rt<<22|rt>>>10)+it<<0,nt+=(it^st&(rt^it))+Et[1]-165796510,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[6]-1069501632,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[11]+643717713,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[0]-373897302,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[5]-701558691,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[10]+38016083,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[15]-660478335,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[4]-405537848,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[9]+568446438,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[14]-1019803690,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[3]-187363961,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[8]+1163531501,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[13]-1444681467,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[2]-51403784,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[7]+1735328473,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[12]-1926607734,rt=(rt<<20|rt>>>12)+it<<0,bt=rt^it,nt+=(bt^st)+Et[5]-378558,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[8]-2022574463,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[11]+1839030562,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[14]-35309556,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^st)+Et[1]-1530992060,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[4]+1272893353,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[7]-155497632,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[10]-1094730640,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^st)+Et[13]+681279174,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[0]-358537222,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[3]-722521979,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[6]+76029189,rt=(rt<<23|rt>>>9)+it<<0,bt=rt^it,nt+=(bt^st)+Et[9]-640364487,nt=(nt<<4|nt>>>28)+rt<<0,st+=(bt^nt)+Et[12]-421815835,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[15]+530742520,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[2]-995338651,rt=(rt<<23|rt>>>9)+it<<0,nt+=(it^(rt|~st))+Et[0]-198630844,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[7]+1126891415,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[14]-1416354905,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[5]-57434055,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[12]+1700485571,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[3]-1894986606,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[10]-1051523,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[1]-2054922799,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[8]+1873313359,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[15]-30611744,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[6]-1560198380,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[13]+1309151649,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[4]-145523070,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[11]-1120210379,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[2]+718787259,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[9]-343485551,rt=(rt<<21|rt>>>11)+it<<0,this.first?(this.h0=nt+1732584193<<0,this.h1=rt-271733879<<0,this.h2=it-1732584194<<0,this.h3=st+271733878<<0,this.first=!1):(this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+st<<0)},Md5.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3;return HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[st>>4&15]+HEX_CHARS[st&15]+HEX_CHARS[st>>12&15]+HEX_CHARS[st>>8&15]+HEX_CHARS[st>>20&15]+HEX_CHARS[st>>16&15]+HEX_CHARS[st>>28&15]+HEX_CHARS[st>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3;return[nt&255,nt>>8&255,nt>>16&255,nt>>24&255,rt&255,rt>>8&255,rt>>16&255,rt>>24&255,it&255,it>>8&255,it>>16&255,it>>24&255,st&255,st>>8&255,st>>16&255,st>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(16),rt=new Uint32Array(nt);return rt[0]=this.h0,rt[1]=this.h1,rt[2]=this.h2,rt[3]=this.h3,nt},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var nt,rt,it,st="",bt=this.array(),xt=0;xt<15;)nt=bt[xt++],rt=bt[xt++],it=bt[xt++],st+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[(nt<<4|rt>>>4)&63]+BASE64_ENCODE_CHAR[(rt<<2|it>>>6)&63]+BASE64_ENCODE_CHAR[it&63];return nt=bt[xt],st+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[nt<<4&63]+"==",st};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);const md5=md5$1.exports;var top$2="top",bottom$1="bottom",right$1="right",left$1="left",auto="auto",basePlacements=[top$2,bottom$1,right$1,left$1],start$2="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(nt,rt){return nt.concat([rt+"-"+start$2,rt+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(nt,rt){return nt.concat([rt,rt+"-"+start$2,rt+"-"+end$1])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write$1="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write$1,afterWrite];function getNodeName(nt){return nt?(nt.nodeName||"").toLowerCase():null}function getWindow(nt){if(nt==null)return window;if(nt.toString()!=="[object Window]"){var rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function isElement$1(nt){var rt=getWindow(nt).Element;return nt instanceof rt||nt instanceof Element}function isHTMLElement(nt){var rt=getWindow(nt).HTMLElement;return nt instanceof rt||nt instanceof HTMLElement}function isShadowRoot(nt){if(typeof ShadowRoot>"u")return!1;var rt=getWindow(nt).ShadowRoot;return nt instanceof rt||nt instanceof ShadowRoot}function applyStyles(nt){var rt=nt.state;Object.keys(rt.elements).forEach(function(it){var st=rt.styles[it]||{},bt=rt.attributes[it]||{},xt=rt.elements[it];!isHTMLElement(xt)||!getNodeName(xt)||(Object.assign(xt.style,st),Object.keys(bt).forEach(function(Et){var kt=bt[Et];kt===!1?xt.removeAttribute(Et):xt.setAttribute(Et,kt===!0?"":kt)}))})}function effect$2(nt){var rt=nt.state,it={popper:{position:rt.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(rt.elements.popper.style,it.popper),rt.styles=it,rt.elements.arrow&&Object.assign(rt.elements.arrow.style,it.arrow),function(){Object.keys(rt.elements).forEach(function(st){var bt=rt.elements[st],xt=rt.attributes[st]||{},Et=Object.keys(rt.styles.hasOwnProperty(st)?rt.styles[st]:it[st]),kt=Et.reduce(function(Lt,Pt){return Lt[Pt]="",Lt},{});!isHTMLElement(bt)||!getNodeName(bt)||(Object.assign(bt.style,kt),Object.keys(xt).forEach(function(Lt){bt.removeAttribute(Lt)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(nt){return nt.split("-")[0]}var max$3=Math.max,min$3=Math.min,round=Math.round;function getUAString(){var nt=navigator.userAgentData;return nt!=null&&nt.brands&&Array.isArray(nt.brands)?nt.brands.map(function(rt){return rt.brand+"/"+rt.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!1);var st=nt.getBoundingClientRect(),bt=1,xt=1;rt&&isHTMLElement(nt)&&(bt=nt.offsetWidth>0&&round(st.width)/nt.offsetWidth||1,xt=nt.offsetHeight>0&&round(st.height)/nt.offsetHeight||1);var Et=isElement$1(nt)?getWindow(nt):window,kt=Et.visualViewport,Lt=!isLayoutViewport()&&it,Pt=(st.left+(Lt&&kt?kt.offsetLeft:0))/bt,Rt=(st.top+(Lt&&kt?kt.offsetTop:0))/xt,Dt=st.width/bt,Bt=st.height/xt;return{width:Dt,height:Bt,top:Rt,right:Pt+Dt,bottom:Rt+Bt,left:Pt,x:Pt,y:Rt}}function getLayoutRect(nt){var rt=getBoundingClientRect(nt),it=nt.offsetWidth,st=nt.offsetHeight;return Math.abs(rt.width-it)<=1&&(it=rt.width),Math.abs(rt.height-st)<=1&&(st=rt.height),{x:nt.offsetLeft,y:nt.offsetTop,width:it,height:st}}function contains(nt,rt){var it=rt.getRootNode&&rt.getRootNode();if(nt.contains(rt))return!0;if(it&&isShadowRoot(it)){var st=rt;do{if(st&&nt.isSameNode(st))return!0;st=st.parentNode||st.host}while(st)}return!1}function getComputedStyle$1(nt){return getWindow(nt).getComputedStyle(nt)}function isTableElement(nt){return["table","td","th"].indexOf(getNodeName(nt))>=0}function getDocumentElement(nt){return((isElement$1(nt)?nt.ownerDocument:nt.document)||window.document).documentElement}function getParentNode(nt){return getNodeName(nt)==="html"?nt:nt.assignedSlot||nt.parentNode||(isShadowRoot(nt)?nt.host:null)||getDocumentElement(nt)}function getTrueOffsetParent(nt){return!isHTMLElement(nt)||getComputedStyle$1(nt).position==="fixed"?null:nt.offsetParent}function getContainingBlock(nt){var rt=/firefox/i.test(getUAString()),it=/Trident/i.test(getUAString());if(it&&isHTMLElement(nt)){var st=getComputedStyle$1(nt);if(st.position==="fixed")return null}var bt=getParentNode(nt);for(isShadowRoot(bt)&&(bt=bt.host);isHTMLElement(bt)&&["html","body"].indexOf(getNodeName(bt))<0;){var xt=getComputedStyle$1(bt);if(xt.transform!=="none"||xt.perspective!=="none"||xt.contain==="paint"||["transform","perspective"].indexOf(xt.willChange)!==-1||rt&&xt.willChange==="filter"||rt&&xt.filter&&xt.filter!=="none")return bt;bt=bt.parentNode}return null}function getOffsetParent(nt){for(var rt=getWindow(nt),it=getTrueOffsetParent(nt);it&&isTableElement(it)&&getComputedStyle$1(it).position==="static";)it=getTrueOffsetParent(it);return it&&(getNodeName(it)==="html"||getNodeName(it)==="body"&&getComputedStyle$1(it).position==="static")?rt:it||getContainingBlock(nt)||rt}function getMainAxisFromPlacement(nt){return["top","bottom"].indexOf(nt)>=0?"x":"y"}function within(nt,rt,it){return max$3(nt,min$3(rt,it))}function withinMaxClamp(nt,rt,it){var st=within(nt,rt,it);return st>it?it:st}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(nt){return Object.assign({},getFreshSideObject(),nt)}function expandToHashMap(nt,rt){return rt.reduce(function(it,st){return it[st]=nt,it},{})}var toPaddingObject=function nt(rt,it){return rt=typeof rt=="function"?rt(Object.assign({},it.rects,{placement:it.placement})):rt,mergePaddingObject(typeof rt!="number"?rt:expandToHashMap(rt,basePlacements))};function arrow(nt){var rt,it=nt.state,st=nt.name,bt=nt.options,xt=it.elements.arrow,Et=it.modifiersData.popperOffsets,kt=getBasePlacement$1(it.placement),Lt=getMainAxisFromPlacement(kt),Pt=[left$1,right$1].indexOf(kt)>=0,Rt=Pt?"height":"width";if(!(!xt||!Et)){var Dt=toPaddingObject(bt.padding,it),Bt=getLayoutRect(xt),Ft=Lt==="y"?top$2:left$1,Yt=Lt==="y"?bottom$1:right$1,Zt=it.rects.reference[Rt]+it.rects.reference[Lt]-Et[Lt]-it.rects.popper[Rt],Wt=Et[Lt]-it.rects.reference[Lt],Qt=getOffsetParent(xt),Kt=Qt?Lt==="y"?Qt.clientHeight||0:Qt.clientWidth||0:0,on=Zt/2-Wt/2,nn=Dt[Ft],mn=Kt-Bt[Rt]-Dt[Yt],gn=Kt/2-Bt[Rt]/2+on,Tn=within(nn,gn,mn),An=Lt;it.modifiersData[st]=(rt={},rt[An]=Tn,rt.centerOffset=Tn-gn,rt)}}function effect$1(nt){var rt=nt.state,it=nt.options,st=it.element,bt=st===void 0?"[data-popper-arrow]":st;bt!=null&&(typeof bt=="string"&&(bt=rt.elements.popper.querySelector(bt),!bt)||!contains(rt.elements.popper,bt)||(rt.elements.arrow=bt))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(nt){return nt.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(nt,rt){var it=nt.x,st=nt.y,bt=rt.devicePixelRatio||1;return{x:round(it*bt)/bt||0,y:round(st*bt)/bt||0}}function mapToStyles(nt){var rt,it=nt.popper,st=nt.popperRect,bt=nt.placement,xt=nt.variation,Et=nt.offsets,kt=nt.position,Lt=nt.gpuAcceleration,Pt=nt.adaptive,Rt=nt.roundOffsets,Dt=nt.isFixed,Bt=Et.x,Ft=Bt===void 0?0:Bt,Yt=Et.y,Zt=Yt===void 0?0:Yt,Wt=typeof Rt=="function"?Rt({x:Ft,y:Zt}):{x:Ft,y:Zt};Ft=Wt.x,Zt=Wt.y;var Qt=Et.hasOwnProperty("x"),Kt=Et.hasOwnProperty("y"),on=left$1,nn=top$2,mn=window;if(Pt){var gn=getOffsetParent(it),Tn="clientHeight",An="clientWidth";if(gn===getWindow(it)&&(gn=getDocumentElement(it),getComputedStyle$1(gn).position!=="static"&&kt==="absolute"&&(Tn="scrollHeight",An="scrollWidth")),gn=gn,bt===top$2||(bt===left$1||bt===right$1)&&xt===end$1){nn=bottom$1;var kn=Dt&&gn===mn&&mn.visualViewport?mn.visualViewport.height:gn[Tn];Zt-=kn-st.height,Zt*=Lt?1:-1}if(bt===left$1||(bt===top$2||bt===bottom$1)&&xt===end$1){on=right$1;var Mn=Dt&&gn===mn&&mn.visualViewport?mn.visualViewport.width:gn[An];Ft-=Mn-st.width,Ft*=Lt?1:-1}}var $n=Object.assign({position:kt},Pt&&unsetSides),cn=Rt===!0?roundOffsetsByDPR({x:Ft,y:Zt},getWindow(it)):{x:Ft,y:Zt};if(Ft=cn.x,Zt=cn.y,Lt){var Sn;return Object.assign({},$n,(Sn={},Sn[nn]=Kt?"0":"",Sn[on]=Qt?"0":"",Sn.transform=(mn.devicePixelRatio||1)<=1?"translate("+Ft+"px, "+Zt+"px)":"translate3d("+Ft+"px, "+Zt+"px, 0)",Sn))}return Object.assign({},$n,(rt={},rt[nn]=Kt?Zt+"px":"",rt[on]=Qt?Ft+"px":"",rt.transform="",rt))}function computeStyles(nt){var rt=nt.state,it=nt.options,st=it.gpuAcceleration,bt=st===void 0?!0:st,xt=it.adaptive,Et=xt===void 0?!0:xt,kt=it.roundOffsets,Lt=kt===void 0?!0:kt,Pt={placement:getBasePlacement$1(rt.placement),variation:getVariation(rt.placement),popper:rt.elements.popper,popperRect:rt.rects.popper,gpuAcceleration:bt,isFixed:rt.options.strategy==="fixed"};rt.modifiersData.popperOffsets!=null&&(rt.styles.popper=Object.assign({},rt.styles.popper,mapToStyles(Object.assign({},Pt,{offsets:rt.modifiersData.popperOffsets,position:rt.options.strategy,adaptive:Et,roundOffsets:Lt})))),rt.modifiersData.arrow!=null&&(rt.styles.arrow=Object.assign({},rt.styles.arrow,mapToStyles(Object.assign({},Pt,{offsets:rt.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Lt})))),rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-placement":rt.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(nt){var rt=nt.state,it=nt.instance,st=nt.options,bt=st.scroll,xt=bt===void 0?!0:bt,Et=st.resize,kt=Et===void 0?!0:Et,Lt=getWindow(rt.elements.popper),Pt=[].concat(rt.scrollParents.reference,rt.scrollParents.popper);return xt&&Pt.forEach(function(Rt){Rt.addEventListener("scroll",it.update,passive)}),kt&&Lt.addEventListener("resize",it.update,passive),function(){xt&&Pt.forEach(function(Rt){Rt.removeEventListener("scroll",it.update,passive)}),kt&&Lt.removeEventListener("resize",it.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function nt(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(nt){return nt.replace(/left|right|bottom|top/g,function(rt){return hash$1[rt]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(nt){return nt.replace(/start|end/g,function(rt){return hash[rt]})}function getWindowScroll(nt){var rt=getWindow(nt),it=rt.pageXOffset,st=rt.pageYOffset;return{scrollLeft:it,scrollTop:st}}function getWindowScrollBarX(nt){return getBoundingClientRect(getDocumentElement(nt)).left+getWindowScroll(nt).scrollLeft}function getViewportRect(nt,rt){var it=getWindow(nt),st=getDocumentElement(nt),bt=it.visualViewport,xt=st.clientWidth,Et=st.clientHeight,kt=0,Lt=0;if(bt){xt=bt.width,Et=bt.height;var Pt=isLayoutViewport();(Pt||!Pt&&rt==="fixed")&&(kt=bt.offsetLeft,Lt=bt.offsetTop)}return{width:xt,height:Et,x:kt+getWindowScrollBarX(nt),y:Lt}}function getDocumentRect(nt){var rt,it=getDocumentElement(nt),st=getWindowScroll(nt),bt=(rt=nt.ownerDocument)==null?void 0:rt.body,xt=max$3(it.scrollWidth,it.clientWidth,bt?bt.scrollWidth:0,bt?bt.clientWidth:0),Et=max$3(it.scrollHeight,it.clientHeight,bt?bt.scrollHeight:0,bt?bt.clientHeight:0),kt=-st.scrollLeft+getWindowScrollBarX(nt),Lt=-st.scrollTop;return getComputedStyle$1(bt||it).direction==="rtl"&&(kt+=max$3(it.clientWidth,bt?bt.clientWidth:0)-xt),{width:xt,height:Et,x:kt,y:Lt}}function isScrollParent(nt){var rt=getComputedStyle$1(nt),it=rt.overflow,st=rt.overflowX,bt=rt.overflowY;return/auto|scroll|overlay|hidden/.test(it+bt+st)}function getScrollParent(nt){return["html","body","#document"].indexOf(getNodeName(nt))>=0?nt.ownerDocument.body:isHTMLElement(nt)&&isScrollParent(nt)?nt:getScrollParent(getParentNode(nt))}function listScrollParents(nt,rt){var it;rt===void 0&&(rt=[]);var st=getScrollParent(nt),bt=st===((it=nt.ownerDocument)==null?void 0:it.body),xt=getWindow(st),Et=bt?[xt].concat(xt.visualViewport||[],isScrollParent(st)?st:[]):st,kt=rt.concat(Et);return bt?kt:kt.concat(listScrollParents(getParentNode(Et)))}function rectToClientRect(nt){return Object.assign({},nt,{left:nt.x,top:nt.y,right:nt.x+nt.width,bottom:nt.y+nt.height})}function getInnerBoundingClientRect(nt,rt){var it=getBoundingClientRect(nt,!1,rt==="fixed");return it.top=it.top+nt.clientTop,it.left=it.left+nt.clientLeft,it.bottom=it.top+nt.clientHeight,it.right=it.left+nt.clientWidth,it.width=nt.clientWidth,it.height=nt.clientHeight,it.x=it.left,it.y=it.top,it}function getClientRectFromMixedType(nt,rt,it){return rt===viewport?rectToClientRect(getViewportRect(nt,it)):isElement$1(rt)?getInnerBoundingClientRect(rt,it):rectToClientRect(getDocumentRect(getDocumentElement(nt)))}function getClippingParents(nt){var rt=listScrollParents(getParentNode(nt)),it=["absolute","fixed"].indexOf(getComputedStyle$1(nt).position)>=0,st=it&&isHTMLElement(nt)?getOffsetParent(nt):nt;return isElement$1(st)?rt.filter(function(bt){return isElement$1(bt)&&contains(bt,st)&&getNodeName(bt)!=="body"}):[]}function getClippingRect(nt,rt,it,st){var bt=rt==="clippingParents"?getClippingParents(nt):[].concat(rt),xt=[].concat(bt,[it]),Et=xt[0],kt=xt.reduce(function(Lt,Pt){var Rt=getClientRectFromMixedType(nt,Pt,st);return Lt.top=max$3(Rt.top,Lt.top),Lt.right=min$3(Rt.right,Lt.right),Lt.bottom=min$3(Rt.bottom,Lt.bottom),Lt.left=max$3(Rt.left,Lt.left),Lt},getClientRectFromMixedType(nt,Et,st));return kt.width=kt.right-kt.left,kt.height=kt.bottom-kt.top,kt.x=kt.left,kt.y=kt.top,kt}function computeOffsets(nt){var rt=nt.reference,it=nt.element,st=nt.placement,bt=st?getBasePlacement$1(st):null,xt=st?getVariation(st):null,Et=rt.x+rt.width/2-it.width/2,kt=rt.y+rt.height/2-it.height/2,Lt;switch(bt){case top$2:Lt={x:Et,y:rt.y-it.height};break;case bottom$1:Lt={x:Et,y:rt.y+rt.height};break;case right$1:Lt={x:rt.x+rt.width,y:kt};break;case left$1:Lt={x:rt.x-it.width,y:kt};break;default:Lt={x:rt.x,y:rt.y}}var Pt=bt?getMainAxisFromPlacement(bt):null;if(Pt!=null){var Rt=Pt==="y"?"height":"width";switch(xt){case start$2:Lt[Pt]=Lt[Pt]-(rt[Rt]/2-it[Rt]/2);break;case end$1:Lt[Pt]=Lt[Pt]+(rt[Rt]/2-it[Rt]/2);break}}return Lt}function detectOverflow(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,bt=st===void 0?nt.placement:st,xt=it.strategy,Et=xt===void 0?nt.strategy:xt,kt=it.boundary,Lt=kt===void 0?clippingParents:kt,Pt=it.rootBoundary,Rt=Pt===void 0?viewport:Pt,Dt=it.elementContext,Bt=Dt===void 0?popper:Dt,Ft=it.altBoundary,Yt=Ft===void 0?!1:Ft,Zt=it.padding,Wt=Zt===void 0?0:Zt,Qt=mergePaddingObject(typeof Wt!="number"?Wt:expandToHashMap(Wt,basePlacements)),Kt=Bt===popper?reference:popper,on=nt.rects.popper,nn=nt.elements[Yt?Kt:Bt],mn=getClippingRect(isElement$1(nn)?nn:nn.contextElement||getDocumentElement(nt.elements.popper),Lt,Rt,Et),gn=getBoundingClientRect(nt.elements.reference),Tn=computeOffsets({reference:gn,element:on,strategy:"absolute",placement:bt}),An=rectToClientRect(Object.assign({},on,Tn)),kn=Bt===popper?An:gn,Mn={top:mn.top-kn.top+Qt.top,bottom:kn.bottom-mn.bottom+Qt.bottom,left:mn.left-kn.left+Qt.left,right:kn.right-mn.right+Qt.right},$n=nt.modifiersData.offset;if(Bt===popper&&$n){var cn=$n[bt];Object.keys(Mn).forEach(function(Sn){var an=[right$1,bottom$1].indexOf(Sn)>=0?1:-1,jn=[top$2,bottom$1].indexOf(Sn)>=0?"y":"x";Mn[Sn]+=cn[jn]*an})}return Mn}function computeAutoPlacement(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,bt=it.boundary,xt=it.rootBoundary,Et=it.padding,kt=it.flipVariations,Lt=it.allowedAutoPlacements,Pt=Lt===void 0?placements:Lt,Rt=getVariation(st),Dt=Rt?kt?variationPlacements:variationPlacements.filter(function(Yt){return getVariation(Yt)===Rt}):basePlacements,Bt=Dt.filter(function(Yt){return Pt.indexOf(Yt)>=0});Bt.length===0&&(Bt=Dt);var Ft=Bt.reduce(function(Yt,Zt){return Yt[Zt]=detectOverflow(nt,{placement:Zt,boundary:bt,rootBoundary:xt,padding:Et})[getBasePlacement$1(Zt)],Yt},{});return Object.keys(Ft).sort(function(Yt,Zt){return Ft[Yt]-Ft[Zt]})}function getExpandedFallbackPlacements(nt){if(getBasePlacement$1(nt)===auto)return[];var rt=getOppositePlacement(nt);return[getOppositeVariationPlacement(nt),rt,getOppositeVariationPlacement(rt)]}function flip(nt){var rt=nt.state,it=nt.options,st=nt.name;if(!rt.modifiersData[st]._skip){for(var bt=it.mainAxis,xt=bt===void 0?!0:bt,Et=it.altAxis,kt=Et===void 0?!0:Et,Lt=it.fallbackPlacements,Pt=it.padding,Rt=it.boundary,Dt=it.rootBoundary,Bt=it.altBoundary,Ft=it.flipVariations,Yt=Ft===void 0?!0:Ft,Zt=it.allowedAutoPlacements,Wt=rt.options.placement,Qt=getBasePlacement$1(Wt),Kt=Qt===Wt,on=Lt||(Kt||!Yt?[getOppositePlacement(Wt)]:getExpandedFallbackPlacements(Wt)),nn=[Wt].concat(on).reduce(function(Cr,Sr){return Cr.concat(getBasePlacement$1(Sr)===auto?computeAutoPlacement(rt,{placement:Sr,boundary:Rt,rootBoundary:Dt,padding:Pt,flipVariations:Yt,allowedAutoPlacements:Zt}):Sr)},[]),mn=rt.rects.reference,gn=rt.rects.popper,Tn=new Map,An=!0,kn=nn[0],Mn=0;Mn<nn.length;Mn++){var $n=nn[Mn],cn=getBasePlacement$1($n),Sn=getVariation($n)===start$2,an=[top$2,bottom$1].indexOf(cn)>=0,jn=an?"width":"height",hn=detectOverflow(rt,{placement:$n,boundary:Rt,rootBoundary:Dt,altBoundary:Bt,padding:Pt}),zn=an?Sn?right$1:left$1:Sn?bottom$1:top$2;mn[jn]>gn[jn]&&(zn=getOppositePlacement(zn));var ir=getOppositePlacement(zn),tr=[];if(xt&&tr.push(hn[cn]<=0),kt&&tr.push(hn[zn]<=0,hn[ir]<=0),tr.every(function(Cr){return Cr})){kn=$n,An=!1;break}Tn.set($n,tr)}if(An)for(var nr=Yt?3:1,dr=function(Sr){var rr=nn.find(function(Fr){var mr=Tn.get(Fr);if(mr)return mr.slice(0,Sr).every(function(_r){return _r})});if(rr)return kn=rr,"break"},or=nr;or>0;or--){var ur=dr(or);if(ur==="break")break}rt.placement!==kn&&(rt.modifiersData[st]._skip=!0,rt.placement=kn,rt.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(nt,rt,it){return it===void 0&&(it={x:0,y:0}),{top:nt.top-rt.height-it.y,right:nt.right-rt.width+it.x,bottom:nt.bottom-rt.height+it.y,left:nt.left-rt.width-it.x}}function isAnySideFullyClipped(nt){return[top$2,right$1,bottom$1,left$1].some(function(rt){return nt[rt]>=0})}function hide(nt){var rt=nt.state,it=nt.name,st=rt.rects.reference,bt=rt.rects.popper,xt=rt.modifiersData.preventOverflow,Et=detectOverflow(rt,{elementContext:"reference"}),kt=detectOverflow(rt,{altBoundary:!0}),Lt=getSideOffsets(Et,st),Pt=getSideOffsets(kt,bt,xt),Rt=isAnySideFullyClipped(Lt),Dt=isAnySideFullyClipped(Pt);rt.modifiersData[it]={referenceClippingOffsets:Lt,popperEscapeOffsets:Pt,isReferenceHidden:Rt,hasPopperEscaped:Dt},rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-reference-hidden":Rt,"data-popper-escaped":Dt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(nt,rt,it){var st=getBasePlacement$1(nt),bt=[left$1,top$2].indexOf(st)>=0?-1:1,xt=typeof it=="function"?it(Object.assign({},rt,{placement:nt})):it,Et=xt[0],kt=xt[1];return Et=Et||0,kt=(kt||0)*bt,[left$1,right$1].indexOf(st)>=0?{x:kt,y:Et}:{x:Et,y:kt}}function offset$1(nt){var rt=nt.state,it=nt.options,st=nt.name,bt=it.offset,xt=bt===void 0?[0,0]:bt,Et=placements.reduce(function(Rt,Dt){return Rt[Dt]=distanceAndSkiddingToXY(Dt,rt.rects,xt),Rt},{}),kt=Et[rt.placement],Lt=kt.x,Pt=kt.y;rt.modifiersData.popperOffsets!=null&&(rt.modifiersData.popperOffsets.x+=Lt,rt.modifiersData.popperOffsets.y+=Pt),rt.modifiersData[st]=Et}const offset$2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset$1};function popperOffsets(nt){var rt=nt.state,it=nt.name;rt.modifiersData[it]=computeOffsets({reference:rt.rects.reference,element:rt.rects.popper,strategy:"absolute",placement:rt.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(nt){return nt==="x"?"y":"x"}function preventOverflow(nt){var rt=nt.state,it=nt.options,st=nt.name,bt=it.mainAxis,xt=bt===void 0?!0:bt,Et=it.altAxis,kt=Et===void 0?!1:Et,Lt=it.boundary,Pt=it.rootBoundary,Rt=it.altBoundary,Dt=it.padding,Bt=it.tether,Ft=Bt===void 0?!0:Bt,Yt=it.tetherOffset,Zt=Yt===void 0?0:Yt,Wt=detectOverflow(rt,{boundary:Lt,rootBoundary:Pt,padding:Dt,altBoundary:Rt}),Qt=getBasePlacement$1(rt.placement),Kt=getVariation(rt.placement),on=!Kt,nn=getMainAxisFromPlacement(Qt),mn=getAltAxis(nn),gn=rt.modifiersData.popperOffsets,Tn=rt.rects.reference,An=rt.rects.popper,kn=typeof Zt=="function"?Zt(Object.assign({},rt.rects,{placement:rt.placement})):Zt,Mn=typeof kn=="number"?{mainAxis:kn,altAxis:kn}:Object.assign({mainAxis:0,altAxis:0},kn),$n=rt.modifiersData.offset?rt.modifiersData.offset[rt.placement]:null,cn={x:0,y:0};if(!!gn){if(xt){var Sn,an=nn==="y"?top$2:left$1,jn=nn==="y"?bottom$1:right$1,hn=nn==="y"?"height":"width",zn=gn[nn],ir=zn+Wt[an],tr=zn-Wt[jn],nr=Ft?-An[hn]/2:0,dr=Kt===start$2?Tn[hn]:An[hn],or=Kt===start$2?-An[hn]:-Tn[hn],ur=rt.elements.arrow,Cr=Ft&&ur?getLayoutRect(ur):{width:0,height:0},Sr=rt.modifiersData["arrow#persistent"]?rt.modifiersData["arrow#persistent"].padding:getFreshSideObject(),rr=Sr[an],Fr=Sr[jn],mr=within(0,Tn[hn],Cr[hn]),_r=on?Tn[hn]/2-nr-mr-rr-Mn.mainAxis:dr-mr-rr-Mn.mainAxis,yr=on?-Tn[hn]/2+nr+mr+Fr+Mn.mainAxis:or+mr+Fr+Mn.mainAxis,pr=rt.elements.arrow&&getOffsetParent(rt.elements.arrow),Cn=pr?nn==="y"?pr.clientTop||0:pr.clientLeft||0:0,rn=(Sn=$n==null?void 0:$n[nn])!=null?Sn:0,dn=zn+_r-rn-Cn,fn=zn+yr-rn,On=within(Ft?min$3(ir,dn):ir,zn,Ft?max$3(tr,fn):tr);gn[nn]=On,cn[nn]=On-zn}if(kt){var xn,hr=nn==="x"?top$2:left$1,Nn=nn==="x"?bottom$1:right$1,Kn=gn[mn],Un=mn==="y"?"height":"width",sr=Kn+Wt[hr],ar=Kn-Wt[Nn],wr=[top$2,left$1].indexOf(Qt)!==-1,vr=(xn=$n==null?void 0:$n[mn])!=null?xn:0,Rr=wr?sr:Kn-Tn[Un]-An[Un]-vr+Mn.altAxis,ci=wr?Kn+Tn[Un]+An[Un]-vr-Mn.altAxis:ar,mi=Ft&&wr?withinMaxClamp(Rr,Kn,ci):within(Ft?Rr:sr,Kn,Ft?ci:ar);gn[mn]=mi,cn[mn]=mi-Kn}rt.modifiersData[st]=cn}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(nt){return{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}}function getNodeScroll(nt){return nt===getWindow(nt)||!isHTMLElement(nt)?getWindowScroll(nt):getHTMLElementScroll(nt)}function isElementScaled(nt){var rt=nt.getBoundingClientRect(),it=round(rt.width)/nt.offsetWidth||1,st=round(rt.height)/nt.offsetHeight||1;return it!==1||st!==1}function getCompositeRect(nt,rt,it){it===void 0&&(it=!1);var st=isHTMLElement(rt),bt=isHTMLElement(rt)&&isElementScaled(rt),xt=getDocumentElement(rt),Et=getBoundingClientRect(nt,bt,it),kt={scrollLeft:0,scrollTop:0},Lt={x:0,y:0};return(st||!st&&!it)&&((getNodeName(rt)!=="body"||isScrollParent(xt))&&(kt=getNodeScroll(rt)),isHTMLElement(rt)?(Lt=getBoundingClientRect(rt,!0),Lt.x+=rt.clientLeft,Lt.y+=rt.clientTop):xt&&(Lt.x=getWindowScrollBarX(xt))),{x:Et.left+kt.scrollLeft-Lt.x,y:Et.top+kt.scrollTop-Lt.y,width:Et.width,height:Et.height}}function order$1(nt){var rt=new Map,it=new Set,st=[];nt.forEach(function(xt){rt.set(xt.name,xt)});function bt(xt){it.add(xt.name);var Et=[].concat(xt.requires||[],xt.requiresIfExists||[]);Et.forEach(function(kt){if(!it.has(kt)){var Lt=rt.get(kt);Lt&&bt(Lt)}}),st.push(xt)}return nt.forEach(function(xt){it.has(xt.name)||bt(xt)}),st}function orderModifiers(nt){var rt=order$1(nt);return modifierPhases.reduce(function(it,st){return it.concat(rt.filter(function(bt){return bt.phase===st}))},[])}function debounce$1(nt){var rt;return function(){return rt||(rt=new Promise(function(it){Promise.resolve().then(function(){rt=void 0,it(nt())})})),rt}}function mergeByName(nt){var rt=nt.reduce(function(it,st){var bt=it[st.name];return it[st.name]=bt?Object.assign({},bt,st,{options:Object.assign({},bt.options,st.options),data:Object.assign({},bt.data,st.data)}):st,it},{});return Object.keys(rt).map(function(it){return rt[it]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return!rt.some(function(st){return!(st&&typeof st.getBoundingClientRect=="function")})}function popperGenerator(nt){nt===void 0&&(nt={});var rt=nt,it=rt.defaultModifiers,st=it===void 0?[]:it,bt=rt.defaultOptions,xt=bt===void 0?DEFAULT_OPTIONS:bt;return function(kt,Lt,Pt){Pt===void 0&&(Pt=xt);var Rt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,xt),modifiersData:{},elements:{reference:kt,popper:Lt},attributes:{},styles:{}},Dt=[],Bt=!1,Ft={state:Rt,setOptions:function(Qt){var Kt=typeof Qt=="function"?Qt(Rt.options):Qt;Zt(),Rt.options=Object.assign({},xt,Rt.options,Kt),Rt.scrollParents={reference:isElement$1(kt)?listScrollParents(kt):kt.contextElement?listScrollParents(kt.contextElement):[],popper:listScrollParents(Lt)};var on=orderModifiers(mergeByName([].concat(st,Rt.options.modifiers)));return Rt.orderedModifiers=on.filter(function(nn){return nn.enabled}),Yt(),Ft.update()},forceUpdate:function(){if(!Bt){var Qt=Rt.elements,Kt=Qt.reference,on=Qt.popper;if(!!areValidElements(Kt,on)){Rt.rects={reference:getCompositeRect(Kt,getOffsetParent(on),Rt.options.strategy==="fixed"),popper:getLayoutRect(on)},Rt.reset=!1,Rt.placement=Rt.options.placement,Rt.orderedModifiers.forEach(function(Mn){return Rt.modifiersData[Mn.name]=Object.assign({},Mn.data)});for(var nn=0;nn<Rt.orderedModifiers.length;nn++){if(Rt.reset===!0){Rt.reset=!1,nn=-1;continue}var mn=Rt.orderedModifiers[nn],gn=mn.fn,Tn=mn.options,An=Tn===void 0?{}:Tn,kn=mn.name;typeof gn=="function"&&(Rt=gn({state:Rt,options:An,name:kn,instance:Ft})||Rt)}}}},update:debounce$1(function(){return new Promise(function(Wt){Ft.forceUpdate(),Wt(Rt)})}),destroy:function(){Zt(),Bt=!0}};if(!areValidElements(kt,Lt))return Ft;Ft.setOptions(Pt).then(function(Wt){!Bt&&Pt.onFirstUpdate&&Pt.onFirstUpdate(Wt)});function Yt(){Rt.orderedModifiers.forEach(function(Wt){var Qt=Wt.name,Kt=Wt.options,on=Kt===void 0?{}:Kt,nn=Wt.effect;if(typeof nn=="function"){var mn=nn({state:Rt,name:Qt,instance:Ft,options:on}),gn=function(){};Dt.push(mn||gn)}})}function Zt(){Dt.forEach(function(Wt){return Wt()}),Dt=[]}return Ft}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$2,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function nt(){return document.body};function getValueAtIndexOrReturn(nt,rt,it){if(Array.isArray(nt)){var st=nt[rt];return st==null?Array.isArray(it)?it[rt]:it:st}return nt}function isType(nt,rt){var it={}.toString.call(nt);return it.indexOf("[object")===0&&it.indexOf(rt+"]")>-1}function invokeWithArgsOrReturn(nt,rt){return typeof nt=="function"?nt.apply(void 0,rt):nt}function debounce(nt,rt){if(rt===0)return nt;var it;return function(st){clearTimeout(it),it=setTimeout(function(){nt(st)},rt)}}function splitBySpaces(nt){return nt.split(/\s+/).filter(Boolean)}function normalizeToArray(nt){return[].concat(nt)}function pushIfUnique(nt,rt){nt.indexOf(rt)===-1&&nt.push(rt)}function unique(nt){return nt.filter(function(rt,it){return nt.indexOf(rt)===it})}function getBasePlacement(nt){return nt.split("-")[0]}function arrayFrom(nt){return[].slice.call(nt)}function removeUndefinedProps(nt){return Object.keys(nt).reduce(function(rt,it){return nt[it]!==void 0&&(rt[it]=nt[it]),rt},{})}function div(){return document.createElement("div")}function isElement(nt){return["Element","Fragment"].some(function(rt){return isType(nt,rt)})}function isNodeList(nt){return isType(nt,"NodeList")}function isMouseEvent(nt){return isType(nt,"MouseEvent")}function isReferenceElement(nt){return!!(nt&&nt._tippy&&nt._tippy.reference===nt)}function getArrayOfElements(nt){return isElement(nt)?[nt]:isNodeList(nt)?arrayFrom(nt):Array.isArray(nt)?nt:arrayFrom(document.querySelectorAll(nt))}function setTransitionDuration(nt,rt){nt.forEach(function(it){it&&(it.style.transitionDuration=rt+"ms")})}function setVisibilityState(nt,rt){nt.forEach(function(it){it&&it.setAttribute("data-state",rt)})}function getOwnerDocument(nt){var rt,it=normalizeToArray(nt),st=it[0];return st!=null&&(rt=st.ownerDocument)!=null&&rt.body?st.ownerDocument:document}function isCursorOutsideInteractiveBorder(nt,rt){var it=rt.clientX,st=rt.clientY;return nt.every(function(bt){var xt=bt.popperRect,Et=bt.popperState,kt=bt.props,Lt=kt.interactiveBorder,Pt=getBasePlacement(Et.placement),Rt=Et.modifiersData.offset;if(!Rt)return!0;var Dt=Pt==="bottom"?Rt.top.y:0,Bt=Pt==="top"?Rt.bottom.y:0,Ft=Pt==="right"?Rt.left.x:0,Yt=Pt==="left"?Rt.right.x:0,Zt=xt.top-st+Dt>Lt,Wt=st-xt.bottom-Bt>Lt,Qt=xt.left-it+Ft>Lt,Kt=it-xt.right-Yt>Lt;return Zt||Wt||Qt||Kt})}function updateTransitionEndListener(nt,rt,it){var st=rt+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(bt){nt[st](bt,it)})}function actualContains(nt,rt){for(var it=rt;it;){var st;if(nt.contains(it))return!0;it=it.getRootNode==null||(st=it.getRootNode())==null?void 0:st.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var nt=performance.now();nt-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=nt}function onWindowBlur(){var nt=document.activeElement;if(isReferenceElement(nt)){var rt=nt._tippy;nt.blur&&!rt.state.isVisible&&nt.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function nt(){},onBeforeUpdate:function nt(){},onCreate:function nt(){},onDestroy:function nt(){},onHidden:function nt(){},onHide:function nt(){},onMount:function nt(){},onShow:function nt(){},onShown:function nt(){},onTrigger:function nt(){},onUntrigger:function nt(){},onClickOutside:function nt(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function nt(rt){var it=Object.keys(rt);it.forEach(function(st){defaultProps[st]=rt[st]})};function getExtendedPassedProps(nt){var rt=nt.plugins||[],it=rt.reduce(function(st,bt){var xt=bt.name,Et=bt.defaultValue;if(xt){var kt;st[xt]=nt[xt]!==void 0?nt[xt]:(kt=defaultProps[xt])!=null?kt:Et}return st},{});return Object.assign({},nt,it)}function getDataAttributeProps(nt,rt){var it=rt?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:rt}))):defaultKeys,st=it.reduce(function(bt,xt){var Et=(nt.getAttribute("data-tippy-"+xt)||"").trim();if(!Et)return bt;if(xt==="content")bt[xt]=Et;else try{bt[xt]=JSON.parse(Et)}catch{bt[xt]=Et}return bt},{});return st}function evaluateProps(nt,rt){var it=Object.assign({},rt,{content:invokeWithArgsOrReturn(rt.content,[nt])},rt.ignoreAttributes?{}:getDataAttributeProps(nt,rt.plugins));return it.aria=Object.assign({},defaultProps.aria,it.aria),it.aria={expanded:it.aria.expanded==="auto"?rt.interactive:it.aria.expanded,content:it.aria.content==="auto"?rt.interactive?null:"describedby":it.aria.content},it}var innerHTML=function nt(){return"innerHTML"};function dangerouslySetInnerHTML(nt,rt){nt[innerHTML()]=rt}function createArrowElement(nt){var rt=div();return nt===!0?rt.className=ARROW_CLASS:(rt.className=SVG_ARROW_CLASS,isElement(nt)?rt.appendChild(nt):dangerouslySetInnerHTML(rt,nt)),rt}function setContent(nt,rt){isElement(rt.content)?(dangerouslySetInnerHTML(nt,""),nt.appendChild(rt.content)):typeof rt.content!="function"&&(rt.allowHTML?dangerouslySetInnerHTML(nt,rt.content):nt.textContent=rt.content)}function getChildren(nt){var rt=nt.firstElementChild,it=arrayFrom(rt.children);return{box:rt,content:it.find(function(st){return st.classList.contains(CONTENT_CLASS)}),arrow:it.find(function(st){return st.classList.contains(ARROW_CLASS)||st.classList.contains(SVG_ARROW_CLASS)}),backdrop:it.find(function(st){return st.classList.contains(BACKDROP_CLASS)})}}function render$3(nt){var rt=div(),it=div();it.className=BOX_CLASS,it.setAttribute("data-state","hidden"),it.setAttribute("tabindex","-1");var st=div();st.className=CONTENT_CLASS,st.setAttribute("data-state","hidden"),setContent(st,nt.props),rt.appendChild(it),it.appendChild(st),bt(nt.props,nt.props);function bt(xt,Et){var kt=getChildren(rt),Lt=kt.box,Pt=kt.content,Rt=kt.arrow;Et.theme?Lt.setAttribute("data-theme",Et.theme):Lt.removeAttribute("data-theme"),typeof Et.animation=="string"?Lt.setAttribute("data-animation",Et.animation):Lt.removeAttribute("data-animation"),Et.inertia?Lt.setAttribute("data-inertia",""):Lt.removeAttribute("data-inertia"),Lt.style.maxWidth=typeof Et.maxWidth=="number"?Et.maxWidth+"px":Et.maxWidth,Et.role?Lt.setAttribute("role",Et.role):Lt.removeAttribute("role"),(xt.content!==Et.content||xt.allowHTML!==Et.allowHTML)&&setContent(Pt,nt.props),Et.arrow?Rt?xt.arrow!==Et.arrow&&(Lt.removeChild(Rt),Lt.appendChild(createArrowElement(Et.arrow))):Lt.appendChild(createArrowElement(Et.arrow)):Rt&&Lt.removeChild(Rt)}return{popper:rt,onUpdate:bt}}render$3.$$tippy=!0;var idCounter$1=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(nt,rt){var it=evaluateProps(nt,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(rt)))),st,bt,xt,Et=!1,kt=!1,Lt=!1,Pt=!1,Rt,Dt,Bt,Ft=[],Yt=debounce(dn,it.interactiveDebounce),Zt,Wt=idCounter$1++,Qt=null,Kt=unique(it.plugins),on={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},nn={id:Wt,reference:nt,popper:div(),popperInstance:Qt,props:it,state:on,plugins:Kt,clearDelayTimeouts:Rr,setProps:ci,setContent:mi,show:si,hide:yi,hideWithInteractivity:Ni,enable:wr,disable:vr,unmount:Ii,destroy:Mi};if(!it.render)return nn;var mn=it.render(nn),gn=mn.popper,Tn=mn.onUpdate;gn.setAttribute("data-tippy-root",""),gn.id="tippy-"+nn.id,nn.popper=gn,nt._tippy=nn,gn._tippy=nn;var An=Kt.map(function(Or){return Or.fn(nn)}),kn=nt.hasAttribute("aria-expanded");return pr(),nr(),zn(),ir("onCreate",[nn]),it.showOnCreate&&sr(),gn.addEventListener("mouseenter",function(){nn.props.interactive&&nn.state.isVisible&&nn.clearDelayTimeouts()}),gn.addEventListener("mouseleave",function(){nn.props.interactive&&nn.props.trigger.indexOf("mouseenter")>=0&&an().addEventListener("mousemove",Yt)}),nn;function Mn(){var Or=nn.props.touch;return Array.isArray(Or)?Or:[Or,0]}function $n(){return Mn()[0]==="hold"}function cn(){var Or;return!!((Or=nn.props.render)!=null&&Or.$$tippy)}function Sn(){return Zt||nt}function an(){var Or=Sn().parentNode;return Or?getOwnerDocument(Or):document}function jn(){return getChildren(gn)}function hn(Or){return nn.state.isMounted&&!nn.state.isVisible||currentInput.isTouch||Rt&&Rt.type==="focus"?0:getValueAtIndexOrReturn(nn.props.delay,Or?0:1,defaultProps.delay)}function zn(Or){Or===void 0&&(Or=!1),gn.style.pointerEvents=nn.props.interactive&&!Or?"":"none",gn.style.zIndex=""+nn.props.zIndex}function ir(Or,Ln,En){if(En===void 0&&(En=!0),An.forEach(function(er){er[Or]&&er[Or].apply(er,Ln)}),En){var Wn;(Wn=nn.props)[Or].apply(Wn,Ln)}}function tr(){var Or=nn.props.aria;if(!!Or.content){var Ln="aria-"+Or.content,En=gn.id,Wn=normalizeToArray(nn.props.triggerTarget||nt);Wn.forEach(function(er){var fr=er.getAttribute(Ln);if(nn.state.isVisible)er.setAttribute(Ln,fr?fr+" "+En:En);else{var Zr=fr&&fr.replace(En,"").trim();Zr?er.setAttribute(Ln,Zr):er.removeAttribute(Ln)}})}}function nr(){if(!(kn||!nn.props.aria.expanded)){var Or=normalizeToArray(nn.props.triggerTarget||nt);Or.forEach(function(Ln){nn.props.interactive?Ln.setAttribute("aria-expanded",nn.state.isVisible&&Ln===Sn()?"true":"false"):Ln.removeAttribute("aria-expanded")})}}function dr(){an().removeEventListener("mousemove",Yt),mouseMoveListeners=mouseMoveListeners.filter(function(Or){return Or!==Yt})}function or(Or){if(!(currentInput.isTouch&&(Lt||Or.type==="mousedown"))){var Ln=Or.composedPath&&Or.composedPath()[0]||Or.target;if(!(nn.props.interactive&&actualContains(gn,Ln))){if(normalizeToArray(nn.props.triggerTarget||nt).some(function(En){return actualContains(En,Ln)})){if(currentInput.isTouch||nn.state.isVisible&&nn.props.trigger.indexOf("click")>=0)return}else ir("onClickOutside",[nn,Or]);nn.props.hideOnClick===!0&&(nn.clearDelayTimeouts(),nn.hide(),kt=!0,setTimeout(function(){kt=!1}),nn.state.isMounted||rr())}}}function ur(){Lt=!0}function Cr(){Lt=!1}function Sr(){var Or=an();Or.addEventListener("mousedown",or,!0),Or.addEventListener("touchend",or,TOUCH_OPTIONS),Or.addEventListener("touchstart",Cr,TOUCH_OPTIONS),Or.addEventListener("touchmove",ur,TOUCH_OPTIONS)}function rr(){var Or=an();Or.removeEventListener("mousedown",or,!0),Or.removeEventListener("touchend",or,TOUCH_OPTIONS),Or.removeEventListener("touchstart",Cr,TOUCH_OPTIONS),Or.removeEventListener("touchmove",ur,TOUCH_OPTIONS)}function Fr(Or,Ln){_r(Or,function(){!nn.state.isVisible&&gn.parentNode&&gn.parentNode.contains(gn)&&Ln()})}function mr(Or,Ln){_r(Or,Ln)}function _r(Or,Ln){var En=jn().box;function Wn(er){er.target===En&&(updateTransitionEndListener(En,"remove",Wn),Ln())}if(Or===0)return Ln();updateTransitionEndListener(En,"remove",Dt),updateTransitionEndListener(En,"add",Wn),Dt=Wn}function yr(Or,Ln,En){En===void 0&&(En=!1);var Wn=normalizeToArray(nn.props.triggerTarget||nt);Wn.forEach(function(er){er.addEventListener(Or,Ln,En),Ft.push({node:er,eventType:Or,handler:Ln,options:En})})}function pr(){$n()&&(yr("touchstart",rn,{passive:!0}),yr("touchend",fn,{passive:!0})),splitBySpaces(nn.props.trigger).forEach(function(Or){if(Or!=="manual")switch(yr(Or,rn),Or){case"mouseenter":yr("mouseleave",fn);break;case"focus":yr(isIE11?"focusout":"blur",On);break;case"focusin":yr("focusout",On);break}})}function Cn(){Ft.forEach(function(Or){var Ln=Or.node,En=Or.eventType,Wn=Or.handler,er=Or.options;Ln.removeEventListener(En,Wn,er)}),Ft=[]}function rn(Or){var Ln,En=!1;if(!(!nn.state.isEnabled||xn(Or)||kt)){var Wn=((Ln=Rt)==null?void 0:Ln.type)==="focus";Rt=Or,Zt=Or.currentTarget,nr(),!nn.state.isVisible&&isMouseEvent(Or)&&mouseMoveListeners.forEach(function(er){return er(Or)}),Or.type==="click"&&(nn.props.trigger.indexOf("mouseenter")<0||Et)&&nn.props.hideOnClick!==!1&&nn.state.isVisible?En=!0:sr(Or),Or.type==="click"&&(Et=!En),En&&!Wn&&ar(Or)}}function dn(Or){var Ln=Or.target,En=Sn().contains(Ln)||gn.contains(Ln);if(!(Or.type==="mousemove"&&En)){var Wn=Un().concat(gn).map(function(er){var fr,Zr=er._tippy,gr=(fr=Zr.popperInstance)==null?void 0:fr.state;return gr?{popperRect:er.getBoundingClientRect(),popperState:gr,props:it}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Wn,Or)&&(dr(),ar(Or))}}function fn(Or){var Ln=xn(Or)||nn.props.trigger.indexOf("click")>=0&&Et;if(!Ln){if(nn.props.interactive){nn.hideWithInteractivity(Or);return}ar(Or)}}function On(Or){nn.props.trigger.indexOf("focusin")<0&&Or.target!==Sn()||nn.props.interactive&&Or.relatedTarget&&gn.contains(Or.relatedTarget)||ar(Or)}function xn(Or){return currentInput.isTouch?$n()!==Or.type.indexOf("touch")>=0:!1}function hr(){Nn();var Or=nn.props,Ln=Or.popperOptions,En=Or.placement,Wn=Or.offset,er=Or.getReferenceClientRect,fr=Or.moveTransition,Zr=cn()?getChildren(gn).arrow:null,gr=er?{getBoundingClientRect:er,contextElement:er.contextElement||Sn()}:nt,ti={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ui){var _i=ui.state;if(cn()){var hi=jn(),ji=hi.box;["placement","reference-hidden","escaped"].forEach(function(Ei){Ei==="placement"?ji.setAttribute("data-placement",_i.placement):_i.attributes.popper["data-popper-"+Ei]?ji.setAttribute("data-"+Ei,""):ji.removeAttribute("data-"+Ei)}),_i.attributes.popper={}}}},kr=[{name:"offset",options:{offset:Wn}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!fr}},ti];cn()&&Zr&&kr.push({name:"arrow",options:{element:Zr,padding:3}}),kr.push.apply(kr,(Ln==null?void 0:Ln.modifiers)||[]),nn.popperInstance=createPopper(gr,gn,Object.assign({},Ln,{placement:En,onFirstUpdate:Bt,modifiers:kr}))}function Nn(){nn.popperInstance&&(nn.popperInstance.destroy(),nn.popperInstance=null)}function Kn(){var Or=nn.props.appendTo,Ln,En=Sn();nn.props.interactive&&Or===TIPPY_DEFAULT_APPEND_TO||Or==="parent"?Ln=En.parentNode:Ln=invokeWithArgsOrReturn(Or,[En]),Ln.contains(gn)||Ln.appendChild(gn),nn.state.isMounted=!0,hr()}function Un(){return arrayFrom(gn.querySelectorAll("[data-tippy-root]"))}function sr(Or){nn.clearDelayTimeouts(),Or&&ir("onTrigger",[nn,Or]),Sr();var Ln=hn(!0),En=Mn(),Wn=En[0],er=En[1];currentInput.isTouch&&Wn==="hold"&&er&&(Ln=er),Ln?st=setTimeout(function(){nn.show()},Ln):nn.show()}function ar(Or){if(nn.clearDelayTimeouts(),ir("onUntrigger",[nn,Or]),!nn.state.isVisible){rr();return}if(!(nn.props.trigger.indexOf("mouseenter")>=0&&nn.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Or.type)>=0&&Et)){var Ln=hn(!1);Ln?bt=setTimeout(function(){nn.state.isVisible&&nn.hide()},Ln):xt=requestAnimationFrame(function(){nn.hide()})}}function wr(){nn.state.isEnabled=!0}function vr(){nn.hide(),nn.state.isEnabled=!1}function Rr(){clearTimeout(st),clearTimeout(bt),cancelAnimationFrame(xt)}function ci(Or){if(!nn.state.isDestroyed){ir("onBeforeUpdate",[nn,Or]),Cn();var Ln=nn.props,En=evaluateProps(nt,Object.assign({},Ln,removeUndefinedProps(Or),{ignoreAttributes:!0}));nn.props=En,pr(),Ln.interactiveDebounce!==En.interactiveDebounce&&(dr(),Yt=debounce(dn,En.interactiveDebounce)),Ln.triggerTarget&&!En.triggerTarget?normalizeToArray(Ln.triggerTarget).forEach(function(Wn){Wn.removeAttribute("aria-expanded")}):En.triggerTarget&&nt.removeAttribute("aria-expanded"),nr(),zn(),Tn&&Tn(Ln,En),nn.popperInstance&&(hr(),Un().forEach(function(Wn){requestAnimationFrame(Wn._tippy.popperInstance.forceUpdate)})),ir("onAfterUpdate",[nn,Or])}}function mi(Or){nn.setProps({content:Or})}function si(){var Or=nn.state.isVisible,Ln=nn.state.isDestroyed,En=!nn.state.isEnabled,Wn=currentInput.isTouch&&!nn.props.touch,er=getValueAtIndexOrReturn(nn.props.duration,0,defaultProps.duration);if(!(Or||Ln||En||Wn)&&!Sn().hasAttribute("disabled")&&(ir("onShow",[nn],!1),nn.props.onShow(nn)!==!1)){if(nn.state.isVisible=!0,cn()&&(gn.style.visibility="visible"),zn(),Sr(),nn.state.isMounted||(gn.style.transition="none"),cn()){var fr=jn(),Zr=fr.box,gr=fr.content;setTransitionDuration([Zr,gr],0)}Bt=function(){var kr;if(!(!nn.state.isVisible||Pt)){if(Pt=!0,gn.offsetHeight,gn.style.transition=nn.props.moveTransition,cn()&&nn.props.animation){var ai=jn(),ui=ai.box,_i=ai.content;setTransitionDuration([ui,_i],er),setVisibilityState([ui,_i],"visible")}tr(),nr(),pushIfUnique(mountedInstances,nn),(kr=nn.popperInstance)==null||kr.forceUpdate(),ir("onMount",[nn]),nn.props.animation&&cn()&&mr(er,function(){nn.state.isShown=!0,ir("onShown",[nn])})}},Kn()}}function yi(){var Or=!nn.state.isVisible,Ln=nn.state.isDestroyed,En=!nn.state.isEnabled,Wn=getValueAtIndexOrReturn(nn.props.duration,1,defaultProps.duration);if(!(Or||Ln||En)&&(ir("onHide",[nn],!1),nn.props.onHide(nn)!==!1)){if(nn.state.isVisible=!1,nn.state.isShown=!1,Pt=!1,Et=!1,cn()&&(gn.style.visibility="hidden"),dr(),rr(),zn(!0),cn()){var er=jn(),fr=er.box,Zr=er.content;nn.props.animation&&(setTransitionDuration([fr,Zr],Wn),setVisibilityState([fr,Zr],"hidden"))}tr(),nr(),nn.props.animation?cn()&&Fr(Wn,nn.unmount):nn.unmount()}}function Ni(Or){an().addEventListener("mousemove",Yt),pushIfUnique(mouseMoveListeners,Yt),Yt(Or)}function Ii(){nn.state.isVisible&&nn.hide(),nn.state.isMounted&&(Nn(),Un().forEach(function(Or){Or._tippy.unmount()}),gn.parentNode&&gn.parentNode.removeChild(gn),mountedInstances=mountedInstances.filter(function(Or){return Or!==nn}),nn.state.isMounted=!1,ir("onHidden",[nn]))}function Mi(){nn.state.isDestroyed||(nn.clearDelayTimeouts(),nn.unmount(),Cn(),delete nt._tippy,nn.state.isDestroyed=!0,ir("onDestroy",[nn]))}}function tippy(nt,rt){rt===void 0&&(rt={});var it=defaultProps.plugins.concat(rt.plugins||[]);bindGlobalEventListeners();var st=Object.assign({},rt,{plugins:it}),bt=getArrayOfElements(nt),xt=bt.reduce(function(Et,kt){var Lt=kt&&createTippy(kt,st);return Lt&&Et.push(Lt),Et},[]);return isElement(nt)?xt[0]:xt}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function nt(rt){var it=rt.state,st={popper:{position:it.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(it.elements.popper.style,st.popper),it.styles=st,it.elements.arrow&&Object.assign(it.elements.arrow.style,st.arrow)}});tippy.setDefaultProps({render:render$3});const iiifServer="https://iiif.juncture-digital.org";function isURL(nt){return/^https*:\/\//.test(nt)}function sha256(nt){return sha256$1.exports.sha256(nt)}function isMobile(){return"ontouchstart"in document.documentElement&&/mobi/i.test(navigator.userAgent)}function kebabToCamel(nt){return nt.replace(/-([a-z])/g,function(rt){return rt[1].toUpperCase()})}let tippyEntities;function initTippy(nt=null,rt=!1){let it=new Set("qid label description image".split(/\s/));rt&&(tippyEntities=null),nt=nt||document;let st=Array.from(nt.querySelectorAll("mark")).filter(bt=>Array.from(bt.attributes).find(xt=>{let Et=xt.name.toLowerCase();return it.has(Et)||isQID(xt.value)&&Et!=="flyto"}));!tippyEntities&&st.length>0&&(tippyEntities=st,tippy(tippyEntities,{interactive:!0,allowHTML:!0,delay:[null,null],onShow:bt=>{let xt=Array.from(bt.reference.attributes).filter(Et=>it.has(Et.name)).map(Et=>`${Et.name}="${Et.value}"`);bt.setContent(`<ve-entity-card ${xt} style="max-width:90vw;"></ve-entity-card>`)}}))}async function getManifest(nt,rt=!1){let it=nt.indexOf("http")===0?nt:`${iiifServer}/${nt}/manifest.json`;return(await loadManifests([it],rt))[0]}function observeNavbar(nt,rt){const it=()=>{let bt=parseInt(nt.style.top.replace(/^-/,"").replace(/px$/,""))||0,Et=(parseInt(nt.style.height.replace(/px$/,""))||nt.clientHeight)-bt;rt.style.top=`${Et}px`};it(),new MutationObserver(it).observe(nt,{attributes:!0})}function makeSticky(nt){var it;nt.classList.add("sticky"),nt.style.position="sticky";let rt=document.querySelector('ve-navbar[sticky="true"]');if(rt)observeNavbar(rt,nt);else{let st=document.querySelector("ve-header[sticky]");st?(rt=(it=st==null?void 0:st.shadowRoot)==null?void 0:it.querySelector("ve-navbar"),rt?observeNavbar(rt,nt):new MutationObserver(()=>{var xt;rt=(xt=st==null?void 0:st.shadowRoot)==null?void 0:xt.querySelector("ve-navbar"),rt&&observeNavbar(rt,nt)}).observe(st,{childList:!0,subtree:!0,attributes:!0})):nt.style.top="0"}}function findItem(nt,rt,it=1){const st=_findItems(nt,rt);return st.length>=it?st[it-1]:null}function _findItems(nt,rt,it=[]){if(it=it||[],rt.items)for(let st=0;st<rt.items.length;st++){let bt=rt.items[st];!Object.entries(nt).find(([Et,kt])=>bt[Et]&&bt[Et]!==kt)?it.push(bt):_findItems(nt,bt,it)}return it}function getItemInfo(nt,rt=1){return findItem({type:"Annotation",motivation:"painting"},nt,rt).body}function imageCount(nt){return _findItems({type:"Annotation",motivation:"painting"},nt).length}const _manifestCache={};async function loadManifests(nt,rt=!1){let it=nt.map(bt=>bt.indexOf("http")===0?bt:`${iiifServer}/${bt}/manifest.json`),st=it.filter(bt=>!_manifestCache[bt]);if(st.length>0){let bt=st.map(kt=>(rt&&["localhost","iiif.juncture-digital.org"].includes(new URL(kt).hostname)&&(kt+="?refresh"),fetch(kt))),xt=await Promise.all(bt),Et=await Promise.all(xt.map(kt=>kt.json()));if(bt=Et.filter(kt=>!Array.isArray(kt["@context"])&&parseFloat(kt["@context"].split("/").slice(-2,-1).pop())<3).map(kt=>fetch("https://iiif.juncture-digital.org/prezi2to3/",{method:"POST",body:JSON.stringify(kt)})),bt.length>0){xt=await Promise.all(bt);let kt=await Promise.all(xt.map(Lt=>Lt.json()));for(let Lt=0;Lt<Et.length;Lt++){let Pt=Et[Lt].id||Et[Lt]["@id"],Rt=kt.find(Dt=>(Dt.id||Dt["@id"])===Pt);Rt&&(Et[Lt]=Rt)}}return Et.forEach((kt,Lt)=>_manifestCache[st[Lt]]=kt),it.map(kt=>_manifestCache[kt])}else return it.map(bt=>_manifestCache[bt])}function _value(nt,rt="en"){return typeof nt=="object"?nt[rt]||nt.none||nt[Object.keys(nt).sort()[0]]:nt}function label(nt,rt="en"){return nt?_value(nt.label,rt):null}function summary(nt,rt="en"){return nt?_value(nt.summary,rt):null}function staticImage(nt,rt,it=0,st=0){let bt=getItemInfo(nt),xt=rt.region||"full",Et=rt.size?rt.size:it?st?`${it},${st}`:`${it},`:st?`,${st}`:"400,",kt=rt.rotation||"0",Lt=rt.quality||"default",Pt=rt.format||"jpg";return`${bt.service[0].id||bt.service[0]["@id"]}/${xt}/${Et}/${kt}/${Lt}.${Pt}`}function thumbnail(nt,rt=400,it=1){if(!nt)return null;let st=getItemInfo(nt,it);return st.service?`${st.service[0].id||st.service[0]["@id"]}/full/${rt},/0/default.jpg`:st.type==="Video"?`https://iiif.juncture-digital.org/thumbnail?url=${st.id}`:st.id}function parseRegionString(nt,rt){let it;const st=nt.split(":");let[bt,xt,Et,kt]=st[st.length-1].split(",").map(Pt=>parseInt(Pt));const Lt=rt.world.getItemAt(0).getContentSize();return st.length===2&&(st[0]==="pct"||st[0]==="percent")&&(bt=Math.round(Lt.x*bt/100),xt=Math.round(Lt.y*xt/100),Et=Math.round(Lt.x*Et/100),kt=Math.round(Lt.y*kt/100)),it=rt.viewport.imageToViewportRectangle(bt,xt,Et,kt),it}function getMetadata(nt,rt="en"){let it=[];return nt.metadata&&nt.metadata.forEach(st=>{it.push({label:_value(st.label,rt)[0],value:_value(st.value,rt)})}),it}function metadataAsObj(nt,rt="en"){return Object.fromEntries(getMetadata(nt,rt).map(it=>[it.label,it.value]))}function top$1(){return stickyElems.length>0&&stickyElems[0].localName.toLowerCase()==="ve-navbar"?parseInt(window.getComputedStyle(stickyElems[0]).height.slice(0,-2)):0}function findStickyElems(){var it,st;initTippy();let nt=Array.from(document.querySelectorAll(".sticky")),rt=nt.findIndex(bt=>bt.localName.toLowerCase()==="ve-navbar");if(rt<0){let bt=nt.findIndex(xt=>xt.localName.toLowerCase()==="ve-header");if(bt>=0){let xt=(st=(it=nt[bt])==null?void 0:it.shadowRoot)==null?void 0:st.querySelector("ve-navbar.sticky");xt&&(nt[bt]=xt,rt=bt)}}return nt.forEach(bt=>setTop(bt)),nt}function activeRegionOffset(){let nt=stickyElems.find(it=>it.localName.toLowerCase()==="ve-navbar"),rt=nt?nt.getBoundingClientRect().top:0;return stickyElems.forEach(it=>{let st=it.getBoundingClientRect();if((st.x<st.width?0:1)===0&&st.top===rt){let xt=window.getComputedStyle(it).height;xt.length>=3&&xt.slice(-2)==="px"&&(rt+=parseInt(window.getComputedStyle(it).height.slice(0,-2)))}}),rt}function setTop(nt){if(nt.localName.toLowerCase()==="section"){let rt=stickyElems.find(st=>st.localName.toLowerCase()==="ve-navbar"),it=rt?rt.clientHeight:0;nt.style.top=`${it}px`}}let stickyElems=[];const mutationObserver=new MutationObserver(nt=>{let rt=nt.filter(it=>{let st=Array.from(it.addedNodes).filter(xt=>{var Et;return((Et=xt.id)==null?void 0:Et.indexOf("tippy"))<0}).length,bt=Array.from(it.removedNodes).filter(xt=>{var Et;return((Et=xt.id)==null?void 0:Et.indexOf("tippy"))<0}).length;return st+bt>0});(!tippyEntities||rt.length>0)&&(stickyElems=findStickyElems())});mutationObserver.observe(document,{childList:!0,subtree:!0});let targets={},active,offset=0;const intersectionObserver=new IntersectionObserver(nt=>{offset=activeRegionOffset(),nt.forEach(st=>targets[domPath(st.target)]=st);let rt=Object.values(targets).filter(st=>st.isIntersecting).filter(st=>st.target.getBoundingClientRect().y>=offset).sort((st,bt)=>st.target.getBoundingClientRect().y>bt.target.getBoundingClientRect().y?1:-1),it=rt.find(st=>st.intersectionRatio===1)||rt[0];if(it){let st=it.target;Array.from(st.classList).indexOf("active")<0&&(active&&active.classList.remove("active"),st.classList.add("active"),active=st)}},{root:null,threshold:[0,.25,.5,.75,1],rootMargin:`-${offset}px 0px 0px 0px`});Array.from(document.querySelectorAll("p")).forEach(nt=>intersectionObserver.observe(nt));function observeActive(nt){Array.from(nt.querySelectorAll("p")).forEach(rt=>intersectionObserver.observe(rt))}function domPath(nt){for(var rt=[];nt.parentNode!=null;){let st=0,bt=0;for(var it=0;it<nt.parentNode.childNodes.length;it++){let xt=nt.parentNode.childNodes[it];xt.nodeName==nt.nodeName&&(xt===nt&&(bt=st),st++)}nt.hasAttribute("id")&&nt.id!=""?rt.unshift(nt.nodeName.toLowerCase()+`#${nt.id}`):st>1?rt.unshift(nt.nodeName.toLowerCase()+(bt>0?`[${bt}]`:"")):rt.unshift(nt.nodeName.toLowerCase()),nt=nt.parentNode}return rt.join(".")}let entityData={};async function getEntityData(nt=[],rt="en"){let it=nt.filter(st=>!entityData[st]).map(st=>`(<http://www.wikidata.org/entity/${st}>)`);if(it.length>0){let st=`
      SELECT ?item ?label ?description ?alias ?image ?logoImage ?coords ?pageBanner ?whosOnFirst ?wikipedia WHERE {
        VALUES (?item) { ${it.join(" ")} }
        ?item rdfs:label ?label . 
        FILTER (LANG(?label) = "${rt}" || LANG(?label) = "en")
        OPTIONAL { ?item schema:description ?description . FILTER (LANG(?description) = "${rt}" || LANG(?description) = "en")}
        OPTIONAL { ?item skos:altLabel ?alias . FILTER (LANG(?alias) = "${rt}" || LANG(?alias) = "en")}
        OPTIONAL { ?item wdt:P625 ?coords . }
        OPTIONAL { ?item wdt:P18 ?image . }
        OPTIONAL { ?item wdt:P154 ?logoImage . }
        OPTIONAL { ?item wdt:P948 ?pageBanner . }
        OPTIONAL { ?item wdt:P6766 ?whosOnFirst . }
        OPTIONAL { ?wikipedia schema:about ?item; schema:isPartOf <https://${rt}.wikipedia.org/> . }
    }`,bt=await fetch("https://query.wikidata.org/sparql",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"},body:`query=${encodeURIComponent(st)}`});if(bt.ok)return(await bt.json()).results.bindings.forEach(Et=>{let kt=Et.item.value.split("/").pop();entityData[kt]?Et.alias&&entityData[kt].aliases.push(Et.alias.value):(entityData[kt]={id:kt,label:Et.label.value},Et.description&&(entityData[kt].description=Et.description.value),Et.alias&&(entityData[kt].aliases=[Et.alias.value]),Et.coords&&(entityData[kt].coords=Et.coords.value.slice(6,-1).split(" ").reverse().join(",")),Et.wikipedia&&(entityData[kt].wikipedia=Et.wikipedia.value),Et.pageBanner&&(entityData[kt].pageBanner=Et.pageBanner.value),Et.image&&(entityData[kt].image=Et.image.value,entityData[kt].thumbnail=mwImage(Et.image.value,300)),Et.logoImage&&(entityData[kt].logoImage=Et.logoImage.value,entityData[kt].thumbnail||(entityData[kt].thumbnail=mwImage(Et.logoImage.value,300))),Et.whosOnFirst&&(entityData[kt].geojson=whosOnFirstUrl(Et.whosOnFirst.value)))}),Object.fromEntries(nt.filter(Et=>entityData[Et]).map(Et=>[Et,entityData[Et]]))}return Object.fromEntries(nt.filter(st=>entityData[st]).map(st=>[st,entityData[st]]))}function isQID(nt){return nt[0]==="Q"&&isNum(nt.slice(1))}async function getEntity(nt,rt="en"){return(await getEntityData([nt],rt))[nt]}function mwImage(nt,rt){nt=(Array.isArray(nt)?nt[0]:nt).replace(/Special:FilePath\//,"File:").split("File:").pop(),nt=decodeURIComponent(nt).replace(/ /g,"_");const it=md5(nt),st=nt.split(".").pop();let bt=`https://upload.wikimedia.org/wikipedia/commons${rt?"/thumb":""}`;return bt+=`/${it.slice(0,1)}/${it.slice(0,2)}/${nt}`,rt&&(bt+=`/${rt}px-${nt}`,st==="svg"?bt+=".png":(st==="tif"||st==="tiff")&&(bt+=".jpg")),bt}function whosOnFirstUrl(nt){let rt=[];for(let it=0;it<nt.length;it+=3)rt.push(nt.slice(it,it+3));return`https://data.whosonfirst.org/${rt.join("/")}/${nt}.geojson`}function isNum(nt){return nt&&!isNaN(nt)}function parseImageOptions(nt){let rt=(nt==null?void 0:nt.split("/"))||[],it="full",st="full",bt="0",xt="default",Et="jpg",kt=0;return{region:rt.length>kt&&rt[kt]?rt[kt]:it,size:rt.length>kt+1&&rt[kt+1]?rt[kt+1]:st,rotation:rt.length>kt+2&&rt[kt+2]?rt[kt+2]:bt,quality:rt.length>kt+3&&rt[kt+3]?rt[kt+3]:xt,format:rt.length>kt+4&&rt[kt+4]?rt[kt+4]:Et}}async function imageDataUrl(nt,rt,it){return new Promise(st=>{let{x:bt,y:xt,w:Et,h:kt}=rt,{width:Lt,height:Pt}=it,Rt=new Image;Rt.crossOrigin="anonymous",bt=bt?bt/100:0,xt=xt?xt/100:0,Et=Et?Et/100:0,kt=kt?kt/100:0,Rt.onload=()=>{let Dt=Rt.width,Bt=Rt.height,Ft=Et>0?Dt*Et:Dt-Dt*bt,Yt=kt>0?Bt*kt:Bt-Bt*xt,Zt=Ft/Yt;Zt>1?Pt=Lt/Zt:Lt=Pt*Zt;const Wt=document.createElement("canvas"),Qt=Wt.getContext("2d");Wt.width=Lt,Wt.height=Pt,bt=bt*Dt,xt=xt*Bt,Qt==null||Qt.drawImage(Rt,bt,xt,Ft,Yt,0,0,Lt,Pt);let Kt=Wt.toDataURL();st(Kt)},Rt.src=nt})}let summaryText={};async function getSummaryText(nt,rt="en"){if(summaryText[rt]||(summaryText[rt]={}),!summaryText[rt][nt]&&entityData[nt]&&entityData[nt].wikipedia){let st=entityData[nt].wikipedia.replace(/\/w\//,"/wiki").split("/wiki/").pop(),bt=`https://${rt}.wikipedia.org/api/rest_v1/page/summary/${st}`,xt=await fetch(bt);return xt.ok&&(xt=await xt.json(),summaryText[rt][nt]=xt.extract_html||xt.extract),summaryText[rt][nt]}else return summaryText[rt][nt]}var breadcrumb_styles_default=i$7`
  ${component_styles_default}

  .breadcrumb {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
  }
`,SlBreadcrumb=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.separatorDir=this.localize.dir(),this.label=""}getSeparator(){const rt=this.separatorSlot.assignedElements({flatten:!0})[0].cloneNode(!0);return[rt,...rt.querySelectorAll("[id]")].forEach(it=>it.removeAttribute("id")),rt.setAttribute("data-default",""),rt.slot="separator",rt}handleSlotChange(){const nt=[...this.defaultSlot.assignedElements({flatten:!0})].filter(rt=>rt.tagName.toLowerCase()==="sl-breadcrumb-item");nt.forEach((rt,it)=>{const st=rt.querySelector('[slot="separator"]');st===null?rt.append(this.getSeparator()):st.hasAttribute("data-default")&&st.replaceWith(this.getSeparator()),it===nt.length-1?rt.setAttribute("aria-current","page"):rt.removeAttribute("aria-current")})}render(){return this.separatorDir!==this.localize.dir()&&(this.separatorDir=this.localize.dir(),this.updateComplete.then(()=>this.handleSlotChange())),x$1`
      <nav part="base" class="breadcrumb" aria-label=${this.label}>
        <slot @slotchange=${this.handleSlotChange}></slot>
      </nav>

      <span hidden aria-hidden="true">
        <slot name="separator">
          <sl-icon name=${this.localize.dir()==="rtl"?"chevron-left":"chevron-right"} library="system"></sl-icon>
        </slot>
      </span>
    `}};SlBreadcrumb.styles=breadcrumb_styles_default;SlBreadcrumb.dependencies={"sl-icon":SlIcon};__decorateClass([i$4("slot")],SlBreadcrumb.prototype,"defaultSlot",2);__decorateClass([i$4('slot[name="separator"]')],SlBreadcrumb.prototype,"separatorSlot",2);__decorateClass([n$3()],SlBreadcrumb.prototype,"label",2);SlBreadcrumb.define("sl-breadcrumb");var breadcrumb_item_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-flex;
  }

  .breadcrumb-item {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-600);
    line-height: var(--sl-line-height-normal);
    white-space: nowrap;
  }

  .breadcrumb-item__label {
    display: inline-block;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    text-decoration: none;
    color: inherit;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    padding: 0;
    margin: 0;
    cursor: pointer;
    transition: var(--sl-transition-fast) --color;
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label {
    color: var(--sl-color-primary-600);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:hover {
    color: var(--sl-color-primary-500);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:active {
    color: var(--sl-color-primary-600);
  }

  .breadcrumb-item__label:focus {
    outline: none;
  }

  .breadcrumb-item__label:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .breadcrumb-item__prefix,
  .breadcrumb-item__suffix {
    display: none;
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .breadcrumb-item--has-prefix .breadcrumb-item__prefix {
    display: inline-flex;
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .breadcrumb-item--has-suffix .breadcrumb-item__suffix {
    display: inline-flex;
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:last-of-type) .breadcrumb-item__separator {
    display: none;
  }

  .breadcrumb-item__separator {
    display: inline-flex;
    align-items: center;
    margin: 0 var(--sl-spacing-x-small);
    user-select: none;
  }
`,SlBreadcrumbItem=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"prefix","suffix"),this.rel="noreferrer noopener"}render(){const nt=!!this.href;return x$1`
      <div
        part="base"
        class=${o$1({"breadcrumb-item":!0,"breadcrumb-item--has-prefix":this.hasSlotController.test("prefix"),"breadcrumb-item--has-suffix":this.hasSlotController.test("suffix")})}
      >
        <span part="prefix" class="breadcrumb-item__prefix">
          <slot name="prefix"></slot>
        </span>

        ${nt?x$1`
              <a
                part="label"
                class="breadcrumb-item__label breadcrumb-item__label--link"
                href="${this.href}"
                target="${l$1(this.target?this.target:void 0)}"
                rel=${l$1(this.target?this.rel:void 0)}
              >
                <slot></slot>
              </a>
            `:x$1`
              <button part="label" type="button" class="breadcrumb-item__label breadcrumb-item__label--button">
                <slot></slot>
              </button>
            `}

        <span part="suffix" class="breadcrumb-item__suffix">
          <slot name="suffix"></slot>
        </span>

        <span part="separator" class="breadcrumb-item__separator" aria-hidden="true">
          <slot name="separator"></slot>
        </span>
      </div>
    `}};SlBreadcrumbItem.styles=breadcrumb_item_styles_default;__decorateClass([n$3()],SlBreadcrumbItem.prototype,"href",2);__decorateClass([n$3()],SlBreadcrumbItem.prototype,"target",2);__decorateClass([n$3()],SlBreadcrumbItem.prototype,"rel",2);SlBreadcrumbItem.define("sl-breadcrumb-item");var details_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: block;
  }

  .details {
    border: solid 1px var(--sl-color-neutral-200);
    border-radius: var(--sl-border-radius-medium);
    background-color: var(--sl-color-neutral-0);
    overflow-anchor: none;
  }

  .details--disabled {
    opacity: 0.5;
  }

  .details__header {
    display: flex;
    align-items: center;
    border-radius: inherit;
    padding: var(--sl-spacing-medium);
    user-select: none;
    cursor: pointer;
  }

  .details__header::-webkit-details-marker {
    display: none;
  }

  .details__header:focus {
    outline: none;
  }

  .details__header:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(1px + var(--sl-focus-ring-offset));
  }

  .details--disabled .details__header {
    cursor: not-allowed;
  }

  .details--disabled .details__header:focus-visible {
    outline: none;
    box-shadow: none;
  }

  .details__summary {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
  }

  .details__summary-icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    transition: var(--sl-transition-medium) rotate ease;
  }

  .details--open .details__summary-icon {
    rotate: 90deg;
  }

  .details--open.details--rtl .details__summary-icon {
    rotate: -90deg;
  }

  .details--open slot[name='expand-icon'],
  .details:not(.details--open) slot[name='collapse-icon'] {
    display: none;
  }

  .details__body {
    overflow: hidden;
  }

  .details__content {
    display: block;
    padding: var(--sl-spacing-medium);
  }
`,SlDetails=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.open=!1,this.disabled=!1}firstUpdated(){this.body.style.height=this.open?"auto":"0",this.open&&(this.details.open=!0),this.detailsObserver=new MutationObserver(nt=>{for(const rt of nt)rt.type==="attributes"&&rt.attributeName==="open"&&(this.details.open?this.show():this.hide())}),this.detailsObserver.observe(this.details,{attributes:!0})}disconnectedCallback(){this.detailsObserver.disconnect()}handleSummaryClick(nt){nt.preventDefault(),this.disabled||(this.open?this.hide():this.show(),this.header.focus())}handleSummaryKeyDown(nt){(nt.key==="Enter"||nt.key===" ")&&(nt.preventDefault(),this.open?this.hide():this.show()),(nt.key==="ArrowUp"||nt.key==="ArrowLeft")&&(nt.preventDefault(),this.hide()),(nt.key==="ArrowDown"||nt.key==="ArrowRight")&&(nt.preventDefault(),this.show())}async handleOpenChange(){if(this.open){if(this.details.open=!0,this.emit("sl-show",{cancelable:!0}).defaultPrevented){this.open=!1,this.details.open=!1;return}await stopAnimations(this.body);const{keyframes:rt,options:it}=getAnimation(this,"details.show",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.style.height="auto",this.emit("sl-after-show")}else{if(this.emit("sl-hide",{cancelable:!0}).defaultPrevented){this.details.open=!0,this.open=!0;return}await stopAnimations(this.body);const{keyframes:rt,options:it}=getAnimation(this,"details.hide",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.style.height="auto",this.details.open=!1,this.emit("sl-after-hide")}}async show(){if(!(this.open||this.disabled))return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!(!this.open||this.disabled))return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){const nt=this.localize.dir()==="rtl";return x$1`
      <details
        part="base"
        class=${o$1({details:!0,"details--open":this.open,"details--disabled":this.disabled,"details--rtl":nt})}
      >
        <summary
          part="header"
          id="header"
          class="details__header"
          role="button"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="content"
          aria-disabled=${this.disabled?"true":"false"}
          tabindex=${this.disabled?"-1":"0"}
          @click=${this.handleSummaryClick}
          @keydown=${this.handleSummaryKeyDown}
        >
          <slot name="summary" part="summary" class="details__summary">${this.summary}</slot>

          <span part="summary-icon" class="details__summary-icon">
            <slot name="expand-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
            <slot name="collapse-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
          </span>
        </summary>

        <div class="details__body" role="region" aria-labelledby="header">
          <slot part="content" id="content" class="details__content"></slot>
        </div>
      </details>
    `}};SlDetails.styles=details_styles_default;SlDetails.dependencies={"sl-icon":SlIcon};__decorateClass([i$4(".details")],SlDetails.prototype,"details",2);__decorateClass([i$4(".details__header")],SlDetails.prototype,"header",2);__decorateClass([i$4(".details__body")],SlDetails.prototype,"body",2);__decorateClass([i$4(".details__expand-icon-slot")],SlDetails.prototype,"expandIconSlot",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlDetails.prototype,"open",2);__decorateClass([n$3()],SlDetails.prototype,"summary",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlDetails.prototype,"disabled",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDetails.prototype,"handleOpenChange",1);setDefaultAnimation("details.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:250,easing:"linear"}});setDefaultAnimation("details.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:250,easing:"linear"}});SlDetails.define("sl-details");var drawer_styles_default=i$7`
  ${component_styles_default}

  :host {
    --size: 25rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .drawer {
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
  }

  .drawer--contained {
    position: absolute;
    z-index: initial;
  }

  .drawer--fixed {
    position: fixed;
    z-index: var(--sl-z-index-drawer);
  }

  .drawer__panel {
    position: absolute;
    display: flex;
    flex-direction: column;
    z-index: 2;
    max-width: 100%;
    max-height: 100%;
    background-color: var(--sl-panel-background-color);
    box-shadow: var(--sl-shadow-x-large);
    overflow: auto;
    pointer-events: all;
  }

  .drawer__panel:focus {
    outline: none;
  }

  .drawer--top .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--end .drawer__panel {
    top: 0;
    inset-inline-end: 0;
    bottom: auto;
    inset-inline-start: auto;
    width: var(--size);
    height: 100%;
  }

  .drawer--bottom .drawer__panel {
    top: auto;
    inset-inline-end: auto;
    bottom: 0;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--start .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: var(--size);
    height: 100%;
  }

  .drawer__header {
    display: flex;
  }

  .drawer__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .drawer__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .drawer__header-actions sl-icon-button,
  .drawer__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .drawer__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .drawer__footer {
    text-align: right;
    padding: var(--footer-spacing);
  }

  .drawer__footer ::slotted(sl-button:not(:last-of-type)) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .drawer:not(.drawer--has-footer) .drawer__footer {
    display: none;
  }

  .drawer__overlay {
    display: block;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
    pointer-events: all;
  }

  .drawer--contained .drawer__overlay {
    display: none;
  }

  @media (forced-colors: active) {
    .drawer__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`;function uppercaseFirstLetter(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)}var SlDrawer=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController(this),this.modal=new Modal$1(this),this.open=!1,this.label="",this.placement="end",this.contained=!1,this.noHeader=!1,this.handleDocumentKeyDown=nt=>{this.contained||nt.key==="Escape"&&this.modal.isActive()&&this.open&&(nt.stopImmediatePropagation(),this.requestClose("keyboard"))}}firstUpdated(){this.drawer.hidden=!this.open,this.open&&(this.addOpenListeners(),this.contained||(this.modal.activate(),lockBodyScrolling(this)))}disconnectedCallback(){super.disconnectedCallback(),unlockBodyScrolling(this)}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"drawer.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown)}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.contained||(this.modal.activate(),lockBodyScrolling(this));const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]),this.drawer.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,`drawer.show${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),it=getAnimation(this,"drawer.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),this.contained||(this.modal.deactivate(),unlockBodyScrolling(this)),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]);const nt=getAnimation(this,`drawer.hide${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),rt=getAnimation(this,"drawer.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.drawer.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1;const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}handleNoModalChange(){this.open&&!this.contained&&(this.modal.activate(),lockBodyScrolling(this)),this.open&&this.contained&&(this.modal.deactivate(),unlockBodyScrolling(this))}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return x$1`
      <div
        part="base"
        class=${o$1({drawer:!0,"drawer--open":this.open,"drawer--top":this.placement==="top","drawer--end":this.placement==="end","drawer--bottom":this.placement==="bottom","drawer--start":this.placement==="start","drawer--contained":this.contained,"drawer--fixed":!this.contained,"drawer--rtl":this.localize.dir()==="rtl","drawer--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="drawer__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="drawer__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${l$1(this.noHeader?this.label:void 0)}
          aria-labelledby=${l$1(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":x$1`
                <header part="header" class="drawer__header">
                  <h2 part="title" class="drawer__title" id="title">
                    <!-- If there's no label, use an invisible character to prevent the header from collapsing -->
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="drawer__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="drawer__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click=${()=>this.requestClose("close-button")}
                    ></sl-icon-button>
                  </div>
                </header>
              `}

          <slot part="body" class="drawer__body"></slot>

          <footer part="footer" class="drawer__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDrawer.styles=drawer_styles_default;SlDrawer.dependencies={"sl-icon-button":SlIconButton};__decorateClass([i$4(".drawer")],SlDrawer.prototype,"drawer",2);__decorateClass([i$4(".drawer__panel")],SlDrawer.prototype,"panel",2);__decorateClass([i$4(".drawer__overlay")],SlDrawer.prototype,"overlay",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlDrawer.prototype,"open",2);__decorateClass([n$3({reflect:!0})],SlDrawer.prototype,"label",2);__decorateClass([n$3({reflect:!0})],SlDrawer.prototype,"placement",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlDrawer.prototype,"contained",2);__decorateClass([n$3({attribute:"no-header",type:Boolean,reflect:!0})],SlDrawer.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleOpenChange",1);__decorateClass([watch("contained",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleNoModalChange",1);setDefaultAnimation("drawer.showTop",{keyframes:[{opacity:0,translate:"0 -100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideTop",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 -100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showEnd",{keyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideEnd",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showBottom",{keyframes:[{opacity:0,translate:"0 100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideBottom",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showStart",{keyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideStart",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.denyClose",{keyframes:[{scale:1},{scale:1.01},{scale:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});SlDrawer.define("sl-drawer");var divider_styles_default=i$7`
  ${component_styles_default}

  :host {
    --color: var(--sl-panel-border-color);
    --width: var(--sl-panel-border-width);
    --spacing: var(--sl-spacing-medium);
  }

  :host(:not([vertical])) {
    display: block;
    border-top: solid var(--width) var(--color);
    margin: var(--spacing) 0;
  }

  :host([vertical]) {
    display: inline-block;
    height: 100%;
    border-left: solid var(--width) var(--color);
    margin: 0 var(--spacing);
  }
`,SlDivider=class extends ShoelaceElement{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}};SlDivider.styles=divider_styles_default;__decorateClass([n$3({type:Boolean,reflect:!0})],SlDivider.prototype,"vertical",2);__decorateClass([watch("vertical")],SlDivider.prototype,"handleVerticalChange",1);SlDivider.define("sl-divider");var dropdown_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`,SlDropdown=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1,this.handleKeyDown=nt=>{this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.hide(),this.focusOnTrigger())},this.handleDocumentKeyDown=nt=>{var rt;if(nt.key==="Escape"&&this.open){nt.stopPropagation(),this.focusOnTrigger(),this.hide();return}if(nt.key==="Tab"){if(this.open&&((rt=document.activeElement)==null?void 0:rt.tagName.toLowerCase())==="sl-menu-item"){nt.preventDefault(),this.hide(),this.focusOnTrigger();return}setTimeout(()=>{var it,st,bt;const xt=((it=this.containingElement)==null?void 0:it.getRootNode())instanceof ShadowRoot?(bt=(st=document.activeElement)==null?void 0:st.shadowRoot)==null?void 0:bt.activeElement:document.activeElement;(!this.containingElement||(xt==null?void 0:xt.closest(this.containingElement.tagName.toLowerCase()))!==this.containingElement)&&this.hide()})}},this.handleDocumentMouseDown=nt=>{const rt=nt.composedPath();this.containingElement&&!rt.includes(this.containingElement)&&this.hide()},this.handlePanelSelect=nt=>{const rt=nt.target;!this.stayOpenOnSelect&&rt.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}}connectedCallback(){super.connectedCallback(),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){const nt=this.trigger.assignedElements({flatten:!0})[0];typeof(nt==null?void 0:nt.focus)=="function"&&nt.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(nt=>nt.tagName.toLowerCase()==="sl-menu")}handleTriggerClick(){this.open?this.hide():(this.show(),this.focusOnTrigger())}async handleTriggerKeyDown(nt){if([" ","Enter"].includes(nt.key)){nt.preventDefault(),this.handleTriggerClick();return}const rt=this.getMenu();if(rt){const it=rt.getAllItems(),st=it[0],bt=it[it.length-1];["ArrowDown","ArrowUp","Home","End"].includes(nt.key)&&(nt.preventDefault(),this.open||(this.show(),await this.updateComplete),it.length>0&&this.updateComplete.then(()=>{(nt.key==="ArrowDown"||nt.key==="Home")&&(rt.setCurrentItem(st),st.focus()),(nt.key==="ArrowUp"||nt.key==="End")&&(rt.setCurrentItem(bt),bt.focus())}))}}handleTriggerKeyUp(nt){nt.key===" "&&nt.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const rt=this.trigger.assignedElements({flatten:!0}).find(st=>getTabbableBoundary(st).start);let it;if(rt){switch(rt.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":it=rt.button;break;default:it=rt}it.setAttribute("aria-haspopup","true"),it.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){this.panel.addEventListener("sl-select",this.handlePanelSelect),this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){this.panel&&(this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown)}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await stopAnimations(this),this.panel.hidden=!1,this.popup.active=!0;const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await stopAnimations(this);const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return x$1`
      <sl-popup
        part="base"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        class=${o$1({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <div aria-hidden=${this.open?"false":"true"} aria-labelledby="dropdown">
          <slot part="panel" class="dropdown__panel"></slot>
        </div>
      </sl-popup>
    `}};SlDropdown.styles=dropdown_styles_default;SlDropdown.dependencies={"sl-popup":SlPopup};__decorateClass([i$4(".dropdown")],SlDropdown.prototype,"popup",2);__decorateClass([i$4(".dropdown__trigger")],SlDropdown.prototype,"trigger",2);__decorateClass([i$4(".dropdown__panel")],SlDropdown.prototype,"panel",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlDropdown.prototype,"open",2);__decorateClass([n$3({reflect:!0})],SlDropdown.prototype,"placement",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlDropdown.prototype,"disabled",2);__decorateClass([n$3({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],SlDropdown.prototype,"stayOpenOnSelect",2);__decorateClass([n$3({attribute:!1})],SlDropdown.prototype,"containingElement",2);__decorateClass([n$3({type:Number})],SlDropdown.prototype,"distance",2);__decorateClass([n$3({type:Number})],SlDropdown.prototype,"skidding",2);__decorateClass([n$3({type:Boolean})],SlDropdown.prototype,"hoist",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDropdown.prototype,"handleOpenChange",1);setDefaultAnimation("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});setDefaultAnimation("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});SlDropdown.define("sl-dropdown");var menu_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: block;
    position: relative;
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-x-small) 0;
    overflow: auto;
    overscroll-behavior: none;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,SlMenu=class extends ShoelaceElement{connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}handleClick(nt){const it=nt.target.closest("sl-menu-item");!it||it.disabled||it.inert||(it.type==="checkbox"&&(it.checked=!it.checked),this.emit("sl-select",{detail:{item:it}}))}handleKeyDown(nt){if(nt.key==="Enter"||nt.key===" "){const rt=this.getCurrentItem();nt.preventDefault(),rt==null||rt.click()}if(["ArrowDown","ArrowUp","Home","End"].includes(nt.key)){const rt=this.getAllItems(),it=this.getCurrentItem();let st=it?rt.indexOf(it):0;rt.length>0&&(nt.preventDefault(),nt.key==="ArrowDown"?st++:nt.key==="ArrowUp"?st--:nt.key==="Home"?st=0:nt.key==="End"&&(st=rt.length-1),st<0&&(st=rt.length-1),st>rt.length-1&&(st=0),this.setCurrentItem(rt[st]),rt[st].focus())}}handleMouseDown(nt){const rt=nt.target;this.isMenuItem(rt)&&this.setCurrentItem(rt)}handleSlotChange(){const nt=this.getAllItems();nt.length>0&&this.setCurrentItem(nt[0])}isMenuItem(nt){var rt;return nt.tagName.toLowerCase()==="sl-menu-item"||["menuitem","menuitemcheckbox","menuitemradio"].includes((rt=nt.getAttribute("role"))!=null?rt:"")}getAllItems(){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(nt=>!(nt.inert||!this.isMenuItem(nt)))}getCurrentItem(){return this.getAllItems().find(nt=>nt.getAttribute("tabindex")==="0")}setCurrentItem(nt){this.getAllItems().forEach(it=>{it.setAttribute("tabindex",it===nt?"0":"-1")})}render(){return x$1`
      <slot
        @slotchange=${this.handleSlotChange}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      ></slot>
    `}};SlMenu.styles=menu_styles_default;__decorateClass([i$4("slot")],SlMenu.prototype,"defaultSlot",2);SlMenu.define("sl-menu");var menu_item_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: block;
  }

  :host([inert]) {
    display: none;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
    display: inline-block;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:focus-visible) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'], :focus-visible)) .menu-item {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  :host(:focus-visible) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .menu-item,
    :host(:focus-visible) .menu-item {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`,SlMenuItem=class extends ShoelaceElement{constructor(){super(...arguments),this.type="normal",this.checked=!1,this.value="",this.disabled=!1}handleDefaultSlotChange(){const nt=this.getTextLabel();if(typeof this.cachedTextLabel>"u"){this.cachedTextLabel=nt;return}nt!==this.cachedTextLabel&&(this.cachedTextLabel=nt,this.emit("slotchange",{bubbles:!0,composed:!1,cancelable:!1}))}handleCheckedChange(){if(this.checked&&this.type!=="checkbox"){this.checked=!1,console.error('The checked attribute can only be used on menu items with type="checkbox"',this);return}this.type==="checkbox"?this.setAttribute("aria-checked",this.checked?"true":"false"):this.removeAttribute("aria-checked")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleTypeChange(){this.type==="checkbox"?(this.setAttribute("role","menuitemcheckbox"),this.setAttribute("aria-checked",this.checked?"true":"false")):(this.setAttribute("role","menuitem"),this.removeAttribute("aria-checked"))}getTextLabel(){return getTextContent(this.defaultSlot)}render(){return x$1`
      <div
        part="base"
        class=${o$1({"menu-item":!0,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--has-submenu":!1})}
      >
        <span part="checked-icon" class="menu-item__check">
          <sl-icon name="check" library="system" aria-hidden="true"></sl-icon>
        </span>

        <slot name="prefix" part="prefix" class="menu-item__prefix"></slot>

        <slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot>

        <slot name="suffix" part="suffix" class="menu-item__suffix"></slot>

        <span part="submenu-icon" class="menu-item__chevron">
          <sl-icon name="chevron-right" library="system" aria-hidden="true"></sl-icon>
        </span>
      </div>
    `}};SlMenuItem.styles=menu_item_styles_default;SlMenuItem.dependencies={"sl-icon":SlIcon};__decorateClass([i$4("slot:not([name])")],SlMenuItem.prototype,"defaultSlot",2);__decorateClass([i$4(".menu-item")],SlMenuItem.prototype,"menuItem",2);__decorateClass([n$3()],SlMenuItem.prototype,"type",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlMenuItem.prototype,"checked",2);__decorateClass([n$3()],SlMenuItem.prototype,"value",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlMenuItem.prototype,"disabled",2);__decorateClass([watch("checked")],SlMenuItem.prototype,"handleCheckedChange",1);__decorateClass([watch("disabled")],SlMenuItem.prototype,"handleDisabledChange",1);__decorateClass([watch("type")],SlMenuItem.prototype,"handleTypeChange",1);SlMenuItem.define("sl-menu-item");var tag_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--primary:active > sl-icon-button {
    color: var(--sl-color-primary-600);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--success:active > sl-icon-button {
    color: var(--sl-color-success-600);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--neutral:active > sl-icon-button {
    color: var(--sl-color-neutral-600);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--warning:active > sl-icon-button {
    color: var(--sl-color-warning-600);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  .tag--danger:active > sl-icon-button {
    color: var(--sl-color-danger-600);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`,SlTag=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){this.emit("sl-remove")}render(){return x$1`
      <span
        part="base"
        class=${o$1({tag:!0,"tag--primary":this.variant==="primary","tag--success":this.variant==="success","tag--neutral":this.variant==="neutral","tag--warning":this.variant==="warning","tag--danger":this.variant==="danger","tag--text":this.variant==="text","tag--small":this.size==="small","tag--medium":this.size==="medium","tag--large":this.size==="large","tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <slot part="content" class="tag__content"></slot>

        ${this.removable?x$1`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </span>
    `}};SlTag.styles=tag_styles_default;SlTag.dependencies={"sl-icon-button":SlIconButton};__decorateClass([n$3({reflect:!0})],SlTag.prototype,"variant",2);__decorateClass([n$3({reflect:!0})],SlTag.prototype,"size",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTag.prototype,"pill",2);__decorateClass([n$3({type:Boolean})],SlTag.prototype,"removable",2);SlTag.define("sl-tag");const _hoisted_1$s={class:"content-path",style:{position:"relative"}},_hoisted_2$o={class:"workspace"},_hoisted_3$h=["content","disabled"],_hoisted_4$e=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_5$c=[_hoisted_4$e],_hoisted_6$9={class:"ws-path"},_hoisted_7$8={class:"breadcrumbs"},_hoisted_8$8=createBaseVNode("sl-icon",{slot:"prefix",name:"folder2",style:{fontSize:"24px"}},null,-1),_hoisted_9$6=["innerHTML","onClick"],_hoisted_10$5=["onClick"],_hoisted_11$4=createBaseVNode("sl-icon",{slot:"prefix",name:"filetype-md",style:{fontSize:"24px"}},null,-1),_hoisted_12$3={slot:"suffix"},_hoisted_13$3=createBaseVNode("sl-icon-button",{slot:"trigger",name:"caret-down",label:"File actions"},null,-1),_hoisted_14$3=["onClick"],_hoisted_15$3=createBaseVNode("sl-icon",{slot:"prefix",name:"trash"},null,-1),_hoisted_16$3=["innerHTML","onClick"],_hoisted_17$3=["onClick"],_hoisted_18$3=createBaseVNode("sl-icon",{slot:"prefix",name:"folder2",style:{fontSize:"24px"}},null,-1),_hoisted_19$3=["content"],_hoisted_20$3=["size","name"],_hoisted_21$3=createBaseVNode("sl-icon",{name:"plus-lg",label:"Add file"},null,-1),_hoisted_22$3=[_hoisted_21$3],_hoisted_23$3={noHeader:"",label:"Workspace",placement:"bottom",contained:"",class:"workspace-selector",style:{"--size":"100%"}},_hoisted_24$3={style:{display:"flex",height:"100%","align-items":"center"}},_hoisted_25$3={key:0,class:"github-select"},_hoisted_26$3={key:1,name:"chevron-double-right",style:{fontSize:"24px"}},_hoisted_27$3={style:{"margin-left":"12px"}},_hoisted_28$3=["disabled"],_hoisted_29$3={key:0},_hoisted_30$3={key:0,slot:"trigger",class:"path-elem"},_hoisted_31$3={key:1,slot:"trigger",pill:"",size:"medium",class:"folder"},_hoisted_32$3=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_33$3=["checked","onClick","innerHTML"],_hoisted_34$3={key:0,class:"path-elem"},_hoisted_35$2={key:1,pill:"",size:"medium",class:"folder"},_hoisted_36$2=createBaseVNode("sl-icon",{slot:"prefix",name:"github",style:{fontSize:"24px"}},null,-1),_hoisted_37$1=["disabled"],_hoisted_38$1={key:0},_hoisted_39$1={key:0,slot:"trigger",class:"path-elem"},_hoisted_40$1={key:1,slot:"trigger",pill:"",size:"medium"},_hoisted_41$1=createBaseVNode("sl-icon",{slot:"prefix",name:"archive",style:{fontSize:"24px"}},null,-1),_hoisted_42$1=["checked","onClick","innerHTML"],_hoisted_43$1=createBaseVNode("sl-divider",null,null,-1),_hoisted_44$1=createBaseVNode("sl-icon",{slot:"prefix",name:"plus-lg"},null,-1),_hoisted_45$1={key:0,class:"path-elem"},_hoisted_46$1={key:1,pill:"",size:"medium"},_hoisted_47$1=createBaseVNode("sl-icon",{slot:"prefix",name:"archive",style:{fontSize:"24px"}},null,-1),_hoisted_48=["disabled"],_hoisted_49={key:0},_hoisted_50={key:0,slot:"trigger",class:"path-elem"},_hoisted_51={key:1,slot:"trigger",pill:"",size:"medium"},_hoisted_52=createBaseVNode("sl-icon",{slot:"prefix",name:"share",style:{fontSize:"24px"}},null,-1),_hoisted_53=["checked","onClick","innerHTML"],_hoisted_54={key:0,class:"path-elem"},_hoisted_55={key:1,pill:"",size:"medium"},_hoisted_56=createBaseVNode("sl-icon",{slot:"prefix",name:"share",style:{fontSize:"24px"}},null,-1),_hoisted_57={key:0},_hoisted_58={key:1,class:"dirs"},_hoisted_59=["onClick"],_hoisted_60=["name"],_hoisted_61=["content"],_hoisted_62=createBaseVNode("sl-icon",{name:"plus-lg",label:"Add file"},null,-1),_hoisted_63=[_hoisted_62],_hoisted_64=createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"add-repo-input",placeholder:"Enter name",pattern:"^[A-z0-9\\-_]+$"},null,-1),_hoisted_65=createBaseVNode("br",null,null,-1),_hoisted_66=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_hoisted_67=createBaseVNode("sl-input",{autocomplete:"off",required:"",id:"add-file-input",placeholder:"Enter file path",pattern:"^\\/?([A-z0-9-_+]+\\/)*([A-z0-9\\-]+(\\.(css|md|json|geojson|yaml|yml))?)$"},null,-1),_hoisted_68=createBaseVNode("br",null,null,-1),_hoisted_69=createBaseVNode("sl-button",{type:"reset",variant:"default"},"Reset",-1),_hoisted_70=createBaseVNode("sl-button",{type:"submit",variant:"primary"},"Add",-1),_hoisted_71={id:"delete-file-dialog",label:"Confirm file delete"},_hoisted_72=["innerHTML"],_sfc_main$u=defineComponent({__name:"ContentSelector.ce",props:{contentPath:{type:String},sticky:{type:Boolean,default:!1},mode:{type:String,default:"media"},compact:{type:Boolean}},emits:["accessChanged","addMediaResource","contentPathChanged"],setup(nt,{expose:rt,emit:it}){const st=nt;rt({getDirList:tr,getFile:dr,putFile:or,repositoryIsWriteable:nr});const bt=new Set(["config.yaml","CNAME","index.html","404.html",".nojekyll"]),xt=ref("");watch$1(xt,()=>{console.log(`contentPath=${toRaw(xt.value)}`),it("contentPathChanged",xt.value)});const Et=ref(null),kt=computed(()=>{var Nn;return(Nn=Et==null?void 0:Et.value)==null?void 0:Nn.parentNode});let Lt,Pt="",Rt=!0;const Dt=ref();watch$1(Dt,()=>{Dt.value&&Cn()});const Bt=ref(isMobile()),Ft=ref(""),Yt=ref(),Zt=ref(!1),Wt=ref(!1);watch$1(Ft,()=>{Zt.value=window.localStorage.getItem("gh-auth-token")!==null,Yt.value=new GithubClient(Ft.value||"")}),watch$1(Zt,()=>{Zt||(Pt="",Wt.value=!1)}),watch$1(Wt,()=>{it("accessChanged",{acct:Kt.value,repo:nn.value,canUpdate:Wt.value})}),watch$1(Yt,async()=>{$n(),Zt.value&&(Qt.value=await jn(),Pt=await Yt.value.user().then(Nn=>Nn.login),await Yt.value.repos(Pt).then(Nn=>{Nn.find(Kn=>Kn.name==="essays")||Yt.value.createRepository({name:"essays",description:"Juncture visual essays"}),Nn.find(Kn=>Kn.name==="media")||Yt.value.createRepository({name:"media",description:"Juncture media"})}),Kt.value&&nn.value&&Pt&&Yt.value.isCollaborator(Kt.value,nn.value,Pt).then(Nn=>Wt.value=Nn))});const Qt=ref([]),Kt=ref("");watch$1(Qt,()=>{Kt.value=Kt.value||(Qt.value.length>0?Qt.value[0].login:null)}),watch$1(Kt,(Nn,Kn)=>{Kn&&(nn.value=""),hn().then(Un=>on.value=Un)});const on=ref([]),nn=ref("");watch$1(on,()=>{if(!nn.value&&on.value.length>0)if(on.value.length===1)nn.value=on.value[0].name;else{let Nn=st.mode==="media"?"media":"essays";nn.value=on.value.find(Kn=>Kn.name===Nn)?Nn:on.value[0].name}});const mn=ref([]),gn=ref("");watch$1(nn,(Nn,Kn)=>{Kn&&(An.value=[]),ir().then(Un=>cn()),gn.value="",nn.value&&(Zt.value&&Kt.value&&Yt.value.user().then(Un=>Un.login).then(Un=>nn.value?Yt.value.isCollaborator(Kt.value,nn.value,Un):!1).then(Un=>Wt.value=Un),zn().then(Un=>mn.value=Un))});let Tn;watch$1(mn,async()=>{!Tn&&Kt.value&&nn.value&&(Tn=await Yt.value.defaultBranch(Kt.value,nn.value)),Tn&&(gn.value=Tn)}),watch$1(gn,()=>{gn.value&&An.value&&kn&&ir().then(Nn=>cn())});const An=ref([]);watch$1(An,()=>{gn.value&&ir().then(Nn=>cn())});let kn=!0;const Mn=ref([]);watch$1(Mn,()=>{kn=An.value.length===0||Mn.value.length>0}),onMounted(()=>{var Nn;an(),window.addEventListener("storage",()=>an()),Lt=(Nn=kt==null?void 0:kt.value)==null?void 0:Nn.querySelector(".workspace-selector")});function $n(Nn=""){var Kn;if(Nn=Nn||st.contentPath||"",Nn){let[Un,sr]=((Kn=Nn.split(":").pop())==null?void 0:Kn.split("?"))||[],ar=sr?Object.fromEntries(sr.split("&").map(vr=>vr.split("="))):{},wr=Un.split("/").filter(vr=>vr);wr.length>0&&(Kt.value=wr[0]),wr.length>1&&(nn.value=wr[1]),wr.length>2&&(An.value=wr.slice(2)),ar.ref&&(gn.value=ar.ref||"main")}}function cn(){if(Kt.value&&nn.value){let Nn=`gh:${Kt.value}/${nn.value}`;An.value.length>0&&(Nn+=`/${An.value.join("/")}`),gn.value&&gn.value!==Tn&&(Nn+=`?ref=${gn.value}`),xt.value=Nn}}async function Sn(){let Kn=await fetch("https://api.juncture-digital.org/gh-token");if(Kn.ok){let Un=await Kn.text();window.localStorage.setItem("gh-unscoped-token",Un)}}async function an(){window.localStorage.getItem("gh-unscoped-token")||await Sn(),Ft.value=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token"),Zt.value=window.localStorage.getItem("gh-auth-token")!==null}async function jn(){return await Promise.all([Yt.value.user(),Yt.value.organizations()]).then(Nn=>Nn.flat())}async function hn(){return Yt.value.repos(Kt.value)}async function zn(){return Yt.value.branches(Kt.value,nn.value)}async function ir(){Mn.value=[];let Nn=await Yt.value.dirlist(Kt.value,nn.value,An.value.join("/"),gn.value),Kn=Nn.filter(sr=>sr.type==="dir"),Un=Nn.filter(sr=>sr.type==="file"&&!bt.has(sr.name));Rt&&Un.find(sr=>sr.name==="README.md")&&Kn.length===0&&(An.value.length===0||An.value[An.value.length-1]!=="README.md")&&(An.value=[...An.value,"README.md"]),Mn.value=[...Kn,...Un]}function tr(){return Mn.value}function nr(){return Wt.value}async function dr(Nn){var Rr;let[Kn,Un]=((Rr=Nn.split(":").pop())==null?void 0:Rr.split("?"))||[],sr=Un?Object.fromEntries(Un.split("&").map(ci=>ci.split("="))):{},ar=Kn.split("/").filter(ci=>ci),[wr,vr]=ar.slice(0,2);return Kn=ar.slice(2).filter(ci=>ci).join("/"),Yt.value.getFile(wr,vr,Kn,sr.ref||gn.value)}async function or(Nn,Kn){var mi;let[Un,sr]=((mi=Nn.split(":").pop())==null?void 0:mi.split("?"))||[],ar=sr?Object.fromEntries(sr.split("&").map(si=>si.split("="))):{},wr=Un.split("/").filter(si=>si),[vr,Rr]=wr.slice(0,2);Un=wr.slice(2).filter(si=>si).join("/");let ci=ar.ref||gn.value;return Yt.value.putFile(vr,Rr,Un,Kn,ci)}function ur(Nn){Kt.value=Nn.login}function Cr(Nn){nn.value=Nn.name}function Sr(Nn){gn.value=Nn.name}function rr(Nn){Lt.hide(),Rt=!0;let Kn=[...An.value];kn||(Kn=Kn.slice(0,-1)),(Kn.length===0||Kn[Kn.length-1]!==Nn.name)&&(Kn=[...Kn,Nn.name]),An.value=Kn}function Fr(Nn){Lt.hide(),Rt=!1,An.value=Nn===0?[]:An.value.slice(0,Nn)}function mr(Nn){st.mode==="essays"?yr():xn(Nn)}function _r(Nn){return Nn.toLowerCase().split("-").map(function(Kn){return Kn.charAt(0).toUpperCase()+Kn.slice(1)}).join(" ")}function yr(){var Un,sr;let Nn=(Un=kt.value)==null?void 0:Un.querySelector("#add-file-form");Nn.onclick||(Nn.onclick=function(){},Nn.addEventListener("submit",async ar=>{var mi;ar.preventDefault();let wr=(mi=kt.value)==null?void 0:mi.querySelector("#add-file-input"),vr=[...An.value,...wr.value.split("/").filter(si=>si)],Rr=vr[vr.length-1];vr[vr.length-1].indexOf(".")>0?vr[vr.length-1]=vr[vr.length-1].replace(/readme\.md/,"README.md"):vr.push("README.md");let ci=vr.join("/");Rr=_r(Rr),await Yt.value.putFile(Kt.value,nn.value,ci,`# ${Rr}

`,gn.value),An.value=vr,pr()}));let Kn=(sr=kt.value)==null?void 0:sr.querySelector("#add-file-dialog");Kn.addEventListener("sl-after-show",()=>{var ar;((ar=kt.value)==null?void 0:ar.querySelector("#add-file-input")).focus()}),Kn.show()}function pr(){var Nn,Kn;((Nn=kt.value)==null?void 0:Nn.querySelector("#add-file-input")).value="",((Kn=kt.value)==null?void 0:Kn.querySelector("#add-file-dialog")).hide()}function Cn(){var Kn;((Kn=kt.value)==null?void 0:Kn.querySelector("#delete-file-dialog")).show()}function rn(){var Kn;((Kn=kt.value)==null?void 0:Kn.querySelector("#delete-file-dialog")).hide()}async function dn(){var Un,sr;let Nn=(Un=kt.value)==null?void 0:Un.querySelector("#add-repo-form");Nn.onclick||(Nn.onclick=function(){},Nn.addEventListener("submit",async ar=>{var ci;ar.preventDefault();let vr=((ci=kt.value)==null?void 0:ci.querySelector("#add-repo-input")).value;(await Yt.value.createRepository({name:vr,org:Pt===Kt.value?null:Kt.value})).status===201&&hn().then(mi=>{nn.value=vr,on.value=mi}),fn()}));let Kn=(sr=kt.value)==null?void 0:sr.querySelector("#add-repo-dialog");Kn.addEventListener("sl-after-show",()=>{var ar;((ar=kt.value)==null?void 0:ar.querySelector("#add-repo-input")).focus()}),Kn.show()}function fn(){var Kn,Un;((Kn=kt.value)==null?void 0:Kn.querySelector("#add-repo-dialog")).hide(),((Un=kt.value)==null?void 0:Un.querySelector("#add-repo-input")).value=""}async function On(){let Nn=An.value.join("/");await Yt.value.deleteFile(Kt.value,nn.value,Nn,gn.value),await ir(),Fr(An.value.length-(Mn.value.length===0?2:1)),Dt.value=null,rn()}function xn(Nn){it("addMediaResource",Nn)}function hr(){Lt.open?Lt.hide():Lt.show()}return(Nn,Kn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Et},[createBaseVNode("section",_hoisted_1$s,[createBaseVNode("div",_hoisted_2$o,[createBaseVNode("sl-tooltip",{content:`${Kt.value}: ${nn.value} (${gn.value})`,disabled:Bt.value,placement:"bottom"},[createBaseVNode("sl-button",{pill:"",size:"medium",onClick:hr},_hoisted_5$c)],8,_hoisted_3$h),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("div",_hoisted_7$8,[createBaseVNode("sl-breadcrumb",null,[createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-button",{pill:"",size:"medium",onClick:Kn[0]||(Kn[0]=Un=>Fr(0))},[createTextVNode("/ "),_hoisted_8$8])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(An.value,(Un,sr)=>(openBlock(),createElementBlock("sl-breadcrumb-item",{key:`bci-${sr}`},[sr===An.value.length-1?(openBlock(),createElementBlock(Fragment,{key:0},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Un,onClick:ar=>Fr(sr+1)},null,8,_hoisted_9$6)):(openBlock(),createElementBlock("sl-button",{key:1,pill:"",size:"medium",onClick:ar=>Fr(sr+1)},[createTextVNode(toDisplayString(Un)+" ",1),_hoisted_11$4],8,_hoisted_10$5)),createBaseVNode("sl-dropdown",_hoisted_12$3,[_hoisted_13$3,createBaseVNode("sl-menu",null,[createBaseVNode("sl-menu-item",{onClick:()=>Dt.value=Un},[createTextVNode("Delete file"),_hoisted_15$3],8,_hoisted_14$3)])])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Un,onClick:ar=>Fr(sr+1)},null,8,_hoisted_16$3)):(openBlock(),createElementBlock("sl-button",{key:1,pill:"",size:"medium",onClick:ar=>Fr(sr+1)},[createTextVNode(toDisplayString(Un)+" ",1),_hoisted_18$3],8,_hoisted_17$3))],64))]))),128))]),Zt.value&&nt.mode==="media"?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Add ${st.mode==="media"?"resource":"file"}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",size:nt.mode==="media"?"medium":"small",class:"add-item",name:`Add ${nt.mode==="media"?"resource":"file"}`,circle:"",onClick:mr},_hoisted_22$3,8,_hoisted_20$3)],8,_hoisted_19$3)):createCommentVNode("",!0)]),createBaseVNode("sl-drawer",_hoisted_23$3,[createBaseVNode("div",_hoisted_24$3,[nt.compact?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_25$3,"Select GitHub Repository")),nt.compact?createCommentVNode("",!0):(openBlock(),createElementBlock("sl-icon",_hoisted_26$3)),createBaseVNode("sl-breadcrumb",_hoisted_27$3,[createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Account",hoist:"",disabled:Bt.value,placement:"left"},[Qt.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_29$3,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_30$3,toDisplayString(Kt.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_31$3,[createTextVNode(toDisplayString(Kt.value)+" ",1),_hoisted_32$3])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Qt.value,(Un,sr)=>(openBlock(),createElementBlock("sl-menu-item",{key:`acct-${sr}`,checked:Un.login===Kt.value,onClick:ar=>ur(Un),type:"checkbox",innerHTML:Un.login},null,8,_hoisted_33$3))),128))])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_34$3,toDisplayString(gn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_35$2,[createTextVNode(toDisplayString(Kt.value)+" ",1),_hoisted_36$2]))],64))],8,_hoisted_28$3)]),createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Repository",hoist:"",disabled:Bt.value,placement:"left"},[on.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_38$1,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_39$1,toDisplayString(nn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_40$1,[createTextVNode(toDisplayString(nn.value)+" ",1),_hoisted_41$1])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(on.value,(Un,sr)=>(openBlock(),createElementBlock("sl-menu-item",{key:`repo-${sr}`,checked:Un.name===nn.value,onClick:ar=>Cr(Un),type:"checkbox",innerHTML:Un.name},null,8,_hoisted_42$1))),128)),_hoisted_43$1,createBaseVNode("sl-menu-item",{class:"add-repo",onClick:dn},[_hoisted_44$1,createTextVNode(" New repository ")])])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_45$1,toDisplayString(nn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_46$1,[createTextVNode(toDisplayString(nn.value)+" ",1),_hoisted_47$1]))],64))],8,_hoisted_37$1)]),createBaseVNode("sl-breadcrumb-item",null,[createBaseVNode("sl-tooltip",{content:"Github Branch",hoist:"",disabled:Bt.value,placement:"left"},[mn.value.length>1?(openBlock(),createElementBlock("sl-dropdown",_hoisted_49,[nt.compact?(openBlock(),createElementBlock("span",_hoisted_50,toDisplayString(gn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_51,[createTextVNode(toDisplayString(gn.value)+" ",1),_hoisted_52])),createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(mn.value,(Un,sr)=>(openBlock(),createElementBlock("sl-menu-item",{key:`branch-${sr}`,checked:Un.name===gn.value,onClick:ar=>Sr(Un),type:"checkbox",innerHTML:Un.name},null,8,_hoisted_53))),128))])])):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_54,toDisplayString(gn.value),1)):(openBlock(),createElementBlock("sl-button",_hoisted_55,[createTextVNode(toDisplayString(gn.value)+" ",1),_hoisted_56]))],64))],8,_hoisted_48)])])])])])]),Mn.value.filter(Un=>st.mode==="essays"||Un.type==="dir").length>0?(openBlock(),createElementBlock("sl-divider",_hoisted_57)):createCommentVNode("",!0),Mn.value.length>0?(openBlock(),createElementBlock("div",_hoisted_58,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Mn.value.filter(Un=>st.mode==="essays"||Un.type==="dir"),(Un,sr)=>(openBlock(),createElementBlock("sl-button",{key:`child-${sr}`,onClick:ar=>rr(Un),pill:"",size:"small",class:normalizeClass(Un.type)},[createBaseVNode("sl-icon",{slot:"prefix",name:Un.type==="dir"?"folder2":"file-earmark"},null,8,_hoisted_60),createTextVNode(" "+toDisplayString(Un.name),1)],10,_hoisted_59))),128)),An.value&&(An.value.length===0||An.value[An.value.length-1].split(".").pop()!=="md")&&st.mode==="essays"?(openBlock(),createElementBlock("sl-tooltip",{key:0,content:`Add ${nt.mode==="media"?"resource":"file"}`,placement:"bottom"},[createBaseVNode("sl-button",{variant:"default",size:"small",class:"add-item",name:"`Add file",circle:"",onClick:mr},_hoisted_63)],8,_hoisted_61)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("sl-dialog",{id:"add-repo-dialog",label:"Add Repository"},[createBaseVNode("form",{id:"add-repo-form",class:"input-validation-pattern"},[_hoisted_64,_hoisted_65,createBaseVNode("sl-button",{onClick:fn},"Cancel"),_hoisted_66])]),createBaseVNode("sl-dialog",{id:"add-file-dialog",label:"Add File"},[createBaseVNode("form",{id:"add-file-form",class:"input-validation-pattern"},[_hoisted_67,_hoisted_68,createBaseVNode("sl-button",{onClick:pr},"Cancel"),_hoisted_69,_hoisted_70])]),createBaseVNode("sl-dialog",_hoisted_71,[createBaseVNode("div",null,[createTextVNode("Delete file "),createBaseVNode("span",{innerHTML:Dt.value},null,8,_hoisted_72),createTextVNode("?")]),createBaseVNode("sl-button",{slot:"footer",onClick:rn},"Cancel"),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:On},"Confirm")])],512))}}),_style_1$5=`*{box-sizing:border-box}:host{display:block;width:100%;border:1px solid #444;padding:6px;z-index:9;background-color:#fff}span.path-elem{font-family:Archivo Narrow,Roboto,sans-serif;font-size:1.2rem}.workspace{display:flex;align-items:center}.workspace-selector{display:flex;gap:12px}.workspace-selector div{display:inline-flex;position:relative;padding-left:6px;font-size:1rem}.selectors{display:flex;gap:6px}.ws-path{position:relative;display:flex;align-items:center;width:100%;height:100%;margin:3px}.workspace-selector>sl-icon{vertical-align:middle;padding-right:6px}sl-drawer::part(base),sl-drawer::part(panel),sl-drawer::part(body){padding:0;overflow:visible}.github-select{font-weight:700;font-size:1.2em;color:#5a162e}sl-divider{margin:6px}.values{display:flex;flex-direction:column;gap:1rem}.values>div{display:flex;align-items:center;gap:1rem}.label{font-weight:700}.value{display:inline-block}sl-breadcrumb-item::part(label){font-size:1rem;color:var(--sl-color-primary-600)}.dir-items li{cursor:pointer}.dir-items{height:40vh;overflow-y:scroll}.dir-items li:hover{color:var(--sl-color-primary-600)}sl-icon-button::part(base){padding:0}.content-path{display:flex;flex-direction:column}sl-icon-button{align-self:start;margin-top:6px}sl-menu::part(base){max-height:300px;overflow-y:scroll}.dirs{display:flex;flex-wrap:wrap;gap:6px}.dirs sl-button::part(base){border-radius:12px;font-weight:500;font-family:Archivo Narrow,Roboto,sans-serif;font-size:1rem}sl-button.dir::part(base){background-color:#eee}sl-button.add-item::part(base){background-color:#eee;color:#000}.delete{margin-left:18px}sl-icon-button.delete::part(base){color:red}.add-repo{background-color:#ddd}sl-menu{text-align:left}sl-breadcrumb{display:inline-block}.breadcrumbs{display:flex;align-items:center;gap:12px;padding-left:12px}
`,ContentSelector=_export_sfc(_sfc_main$u,[["styles",[_style_0$o,_style_1$5]]]),_hoisted_1$r={class:"content"},_hoisted_2$n={class:"buttons"},_hoisted_3$g=["onClick"],_hoisted_4$d=["qid"],_hoisted_5$b={key:0,class:"caption"},_sfc_main$t=defineComponent({__name:"Entities.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Yt;return(Yt=it==null?void 0:it.value)==null?void 0:Yt.parentNode}),bt=computed(()=>{var Yt,Zt;return(Zt=(Yt=it.value)==null?void 0:Yt.getRootNode())==null?void 0:Zt.host}),xt=computed(()=>{var Yt;return(Yt=st.value)==null?void 0:Yt.querySelector(".content")}),Et=ref({}),kt=ref(null),Lt=computed(()=>{var Yt,Zt;return((Zt=(Yt=kt.value)==null?void 0:Yt.getAttribute("entities"))==null?void 0:Zt.split(/\s/).filter(Wt=>Wt))||[]}),Pt=ref();watch$1(Lt,()=>{Lt.value.length>0?getEntityData(Lt.value).then(Yt=>{Et.value=Yt,Pt.value=Lt.value[0]}):(Et.value={},Pt.value=void 0)}),watch$1(bt,()=>Rt());function Rt(){Bt(),Ft()}const Dt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Bt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Dt),Dt==="full"?bt.value.style.width="100%":(bt.value.style.float=Dt,bt.value.style.width="calc(50% - 16px)"),bt.value.style.width=window.getComputedStyle(bt.value).width,rt.sticky&&makeSticky(bt.value),xt.value.style.width=rt.width||"100%",nextTick(()=>{let Yt=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2));rt.sticky,xt.value.style.width=`${Yt}px`})}function Ft(){kt.value=document.querySelector(".active"),new MutationObserver(Zt=>{Zt.forEach(Wt=>{if(Wt.type==="attributes"){let Qt=Wt.target;Array.from(Qt.classList).indexOf("active")>=0&&(kt.value=Qt)}})}).observe(document,{subtree:!0,attributes:!0})}return(Yt,Zt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$n,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Lt.value,Wt=>{var Qt;return openBlock(),createElementBlock("sl-button",{key:Wt,onClick:Kt=>Pt.value=Wt,pill:"",size:"small",class:normalizeClass({selected:Wt===Pt.value})},toDisplayString((Qt=Et.value[Wt])==null?void 0:Qt.label),11,_hoisted_3$g)}),128))]),Pt.value?(openBlock(),createElementBlock("ve-entity-card",{key:0,qid:Pt.value},null,8,_hoisted_4$d)):createCommentVNode("",!0)]),rt.caption&&Pt.value?(openBlock(),createElementBlock("div",_hoisted_5$b,toDisplayString(rt.caption),1)):createCommentVNode("",!0)],512))}}),_style_0$m=`*{box-sizing:border-box}.main{margin-bottom:3rem}.buttons{display:flex;flex-wrap:wrap;gap:6px;padding:0 0 12px}.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}sl-button.selected::part(base){background-color:#ddd;font-weight:700}
`,Entities=_export_sfc(_sfc_main$t,[["styles",[_style_0$m]]]),_hoisted_1$q=["innerHTML"],_hoisted_2$m=["innerHTML"],_hoisted_3$f={class:"links"},_hoisted_4$c={key:0,class:"logo",title:"Wikipedia"},_hoisted_5$a=["href"],_hoisted_6$8=createBaseVNode("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/77/Wikipedia_svg_logo.svg"},null,-1),_hoisted_7$7=[_hoisted_6$8],_hoisted_8$7=["innerHTML"],_sfc_main$s=defineComponent({__name:"EntityCard.ce",props:{qid:{type:String},label:{type:String},description:{type:String},image:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Wt,Qt;return(Qt=(Wt=it.value)==null?void 0:Wt.getRootNode())==null?void 0:Qt.host}),bt=ref(),xt=ref(),Et=ref(),kt=ref(),Lt=ref(),Pt=ref(),Rt=ref(),Dt=computed(()=>`${st.value.clientWidth*.33}px`);watch$1(Pt,()=>st.value.style.width="572px"),onMounted(()=>Bt());function Bt(){rt.qid&&bt.value!==rt.qid&&(bt.value=rt.qid),rt.label&&(Et.value=rt.label),rt.description&&(kt.value=rt.description),rt.image&&(Pt.value=rt.image)}watch$1(xt,()=>{var Wt;Et.value=xt.value.label,kt.value=xt.value.description,Pt.value=((Wt=xt.value)==null?void 0:Wt.thumbnail)&&`url('${Yt(xt.value.thumbnail)}')`,Rt.value=xt.value.wikipedia,Lt.value=xt.value.summaryText}),watch$1(bt,()=>Ft());async function Ft(){if(bt.value&&(!xt.value||xt.value.id!==rt.qid)){let Wt=await getEntity(bt.value),Qt=await getSummaryText(bt.value);Qt&&(Wt={...Wt,summaryText:Zt(Qt)}),xt.value=Wt}}function Yt(Wt){let Qt=Wt.split("/");return`${Qt.slice(0,-1).join("/")}/${encodeURIComponent(Qt[Qt.length-1])}`}function Zt(Wt){return new DOMParser().parseFromString(Wt,"text/html").children[0].children[1].children[0].innerHTML}return(Wt,Qt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:Et.value},null,8,_hoisted_1$q),createBaseVNode("div",{class:"description",innerHTML:kt.value},null,8,_hoisted_2$m),Pt.value?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:Pt.value,width:Dt.value})},null,4)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$f,[Rt.value?(openBlock(),createElementBlock("span",_hoisted_4$c,[createBaseVNode("a",{target:"_blank",href:Rt.value},_hoisted_7$7,8,_hoisted_5$a)])):createCommentVNode("",!0)]),Lt.value?(openBlock(),createElementBlock("p",{key:1,class:"summary",innerHTML:Lt.value},null,8,_hoisted_8$7)):createCommentVNode("",!0)],512))}}),_style_0$l=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border:1px solid #444;border-radius:6px;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;object-fit:cover;background-repeat:no-repeat;background-size:contain;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,EntityCard=_export_sfc(_sfc_main$s,[["styles",[_style_0$l]]]),_hoisted_1$p=["innerHTML"],_sfc_main$r=defineComponent({__name:"Essay.ce",props:{src:{type:String},prefix:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Pt,Rt;return(Rt=(Pt=it.value)==null?void 0:Pt.getRootNode())==null?void 0:Rt.host}),bt=computed(()=>{var Pt;return(Pt=it==null?void 0:it.value)==null?void 0:Pt.parentNode}),xt=computed(()=>{var Pt,Rt;return(Rt=(Pt=st.value)==null?void 0:Pt.querySelector("pre"))==null?void 0:Rt.textContent}),Et=ref(),kt=ref();watch$1(xt,()=>{let Pt=xt.value.split(`
`),Rt=[];if(Pt.forEach(Dt=>{(Dt.trim().length>0||Rt.length>0)&&Rt.push(Dt)}),Rt.length>0){let Dt=(Rt[0].match(/(^\s+)/)||[""])[0].length;Et.value=Rt.map(Bt=>(Bt.match(/(^\s+)/)||[""])[0].length>=Dt?Bt.slice(Dt):Bt).join(`
`)}}),watch$1(Et,()=>Lt()),watch$1(st,()=>{let Pt=st.value.textContent.split(`
`),Rt=[];if(Pt.forEach(Dt=>{(Dt.trim().length>0||Rt.length>0)&&Rt.push(Dt)}),Rt.length>0){let Dt=(Rt[0].match(/(^\s+)/)||[""])[0].length;Et.value=Rt.map(Bt=>(Bt.match(/(^\s+)/)||[""])[0].length>=Dt?Bt.slice(Dt):Bt).join(`
`)}});function Lt(){kt.value="",fetch("/html/?inline=true",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:"",markdown:Et.value})}).then(Rt=>Rt.text()).then(Rt=>{let Bt=new DOMParser().parseFromString(Rt,"text/html").children[0].children[1].querySelector("main");Bt&&(Bt.id="juncture"),Bt&&(kt.value=Bt.innerHTML),nextTick(()=>{var Yt;let Ft=(Yt=bt.value)==null?void 0:Yt.querySelector("#juncture");Ft&&observeActive(Ft)})})}return(Pt,Rt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[kt.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",innerHTML:kt.value},null,8,_hoisted_1$p)):createCommentVNode("",!0)],512))}}),_style_1$4=`[v-cloak]{display:none}*{box-sizing:border-box}#main{font-family:Roboto,sans-serif;margin-top:0}#juncture{padding:12px;font-size:1.2em;line-height:1.3}@media (max-width: 480px){#juncture{padding:0}}
`,Essay=_export_sfc(_sfc_main$r,[["styles",[_style_0$o,_style_1$4]]]),_hoisted_1$o=["content","disabled"],_hoisted_2$l=["name"],_sfc_main$q=defineComponent({__name:"FAB.ce",props:{color:{type:String,default:"red"},label:{type:String},icon:{type:String},action:{type:String},right:{type:String,default:"35px"},bottom:{type:String,default:"35px"},disabled:{type:Boolean}},emits:["fabClicked"],setup(nt,{emit:rt}){const it=nt,st=ref(null),bt=ref(isMobile());function xt(){rt("fabClicked",it.action)}return(Et,kt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:st,class:"fab-wrapper",style:normalizeStyle({right:it.right,bottom:it.bottom})},[createBaseVNode("sl-tooltip",{content:it.label,placement:"top",disabled:bt.value||it.disabled},[createBaseVNode("span",{"data-action":"props.action",class:"fab-button",onClick:xt,style:normalizeStyle({visibility:it.disabled?"hidden":"visible",backgroundColor:it.color})},[createBaseVNode("sl-icon",{name:it.icon,style:{"font-size":"36px"}},null,8,_hoisted_2$l)],4)],8,_hoisted_1$o)],4))}}),_style_0$k=`.fab-wrapper{position:absolute;bottom:35px;right:35px}.fab-button{height:56px;width:56px;background-color:red;border-radius:50%;color:#fff;z-index:1;display:flex;align-items:center;justify-content:center;text-decoration:none;opacity:.4}.fab-button:hover{opacity:1;transition:all .4s;cursor:pointer}.fab-button i{font-size:16px;transform:rotate(0);transition:all .4s}
`,FAB=_export_sfc(_sfc_main$q,[["styles",[_style_0$k]]]),_hoisted_1$n=["name","label","onClick"],_hoisted_2$k=["innerHTML","onClick"],_hoisted_3$e=["src"],_sfc_main$p=defineComponent({__name:"Footer.ce",props:{sticky:{type:Boolean}},setup(nt){const rt=nt,it={"view-code":{icon:"markdown",label:"View Page Code"}},st=ref([]),bt=ref(null),xt=computed(()=>{var Zt,Wt;return(Wt=(Zt=bt.value)==null?void 0:Zt.getRootNode())==null?void 0:Wt.host}),Et=computed(()=>{var Zt;return(Zt=bt==null?void 0:bt.value)==null?void 0:Zt.parentNode}),kt=ref(!1);watch$1(kt,()=>Lt.open=kt.value);let Lt;const Pt=ref();watch$1(xt,()=>{var Zt;Lt=(Zt=Et.value)==null?void 0:Zt.querySelector(".page-source-dialog"),Lt.addEventListener("sl-hide",()=>kt.value=!1)}),watch$1(xt,()=>Rt());function Rt(){var Zt;xt.value.style.clear="both",rt.sticky&&Dt(),st.value=Array.from((Zt=xt.value)==null?void 0:Zt.querySelectorAll("li"))}function Dt(){xt.value.classList.add("sticky");let Zt=xt.value.offsetHeight;Zt+=parseInt(window.getComputedStyle(xt.value).getPropertyValue("margin-top")),Zt+=parseInt(window.getComputedStyle(xt.value).getPropertyValue("margin-bottom"));let Wt=document.querySelector("main");Wt&&(Wt.style.paddingBottom=`${Zt}px`),xt.value.style.width=`${xt.value.parentElement.clientWidth}px`,document.body.style.marginBottom="80px"}function Bt(Zt){return Zt?Object.fromEntries(Zt.split(";").filter(Wt=>Wt.trim()).map(Wt=>Wt.split(":").map(Qt=>Qt.trim()))):{}}function Ft(){let Zt=window.PREFIX,Wt=location.hostname.indexOf("github.io")!==-1,Qt=location.pathname.split("/").filter(Kt=>Kt).filter(Kt=>Kt!=="editor").slice(Wt?1:0).join("/");Pt.value=Zt&&Qt.indexOf(Zt)!==0?`${Zt}/${Qt}`:Qt,kt.value=!0}function Yt(Zt,Wt){Zt.innerHTML==="view-code"&&(Wt.stopPropagation(),Ft())}return(Zt,Wt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:bt,class:"main"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(st.value,(Qt,Kt)=>(openBlock(),createElementBlock(Fragment,{key:`li-${Kt}`},[it[Qt.innerHTML]?(openBlock(),createElementBlock("sl-icon",{key:0,name:it[Qt.innerHTML].icon,label:it[Qt.innerHTML].label,onClick:on=>Yt(Qt,on),style:{"font-size":"24px"}},null,8,_hoisted_1$n)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(Qt.className),style:normalizeStyle(Bt(Qt.getAttribute("style")||"")),innerHTML:Qt.innerHTML,onClick:on=>Yt(Qt,on)},null,14,_hoisted_2$k))],64))),128)),createBaseVNode("sl-dialog",{label:"Page Source",class:"page-source-dialog",style:normalizeStyle({"--width":unref(isMobile)()?"100vw":"80vw"})},[Pt.value?(openBlock(),createElementBlock("ve-snippet",{key:0,src:Pt.value,tabs:"markdown,html,wordpress","disable-drag":""},null,8,_hoisted_3$e)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Wt[0]||(Wt[0]=Qt=>kt.value=!1)},"Close")],4)],512))}}),_style_0$j=`*{box-sizing:border-box}.main{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:9px 12px;margin:36px auto auto;font-family:Roboto,sans-serif;font-size:.9rem;z-index:100;background-color:#eee;color:#444;border-radius:3px}a,sl-icon{color:#0645ad;text-decoration:none}a:visited{color:#0b0080}a:hover,sl-icon:hover{color:#06e;cursor:pointer}a:active{color:#faa700}a:focus{outline:thin dotted}a:hover,a:active{outline:0}.main.sticky{position:fixed;bottom:0}div{display:flex;align-items:center;gap:12px}.main div{cursor:pointer}img{height:36px;vertical-align:middle}a{color:inherit;text-decoration:none}.logo,.logo img{height:20px}.push{margin-left:auto}sl-dialog::part(panel){color:#444;font-size:medium}
`,Footer=_export_sfc(_sfc_main$p,[["styles",[_style_0$j]]]),_hoisted_1$m=["src","alt"],_hoisted_2$j=["name","data-state"],_sfc_main$o=defineComponent({__name:"GIF.ce",props:{src:{type:String,required:!0},alt:{type:String},initiallyPaused:{type:Boolean},restartOnPlay:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Bt;return(Bt=it==null?void 0:it.value)==null?void 0:Bt.parentNode}),bt=computed(()=>{var Bt;return(Bt=st.value)==null?void 0:Bt.querySelector("#gif")}),xt=ref(!1),Et=ref(!1),kt=ref(),Lt={buttonPlayIconID:"",buttonPauseIconID:"",buttonPlayIconHTML:"",buttonPauseIconHTML:"",inheritClasses:!0,initiallyPaused:!1,restartOnPlay:!1,langPause:"Pause animation:",langPlay:"Play animation:",langPauseAllButton:"Pause all animations",langPlayAllButton:"Play all animations",langMissingAlt:"Animated GIF."};watch$1(bt,()=>{nextTick(()=>Pt())});function Pt(){kt.value={...Lt,initiallyPaused:rt.initiallyPaused,restartOnPlay:rt.restartOnPlay},Rt()}function Rt(){let Bt=()=>{xt.value=!0;let Ft;if(Ft=bt.value.src.split("."),Ft=Ft[Ft.length-1].toLowerCase(),Ft=Ft.substring(0,4),Ft==="gif"){const Yt=document.createElement("canvas");let Zt=parseFloat(getComputedStyle(bt.value,null).getPropertyValue("border-left-width")),Wt=parseFloat(getComputedStyle(bt.value,null).getPropertyValue("border-right-width")),Qt=Zt+Wt,Kt=bt.value.getAttribute("width");Kt!==null?(Yt.width=parseInt(Kt),Yt.setAttribute("style","width:"+Kt+"px !important;")):bt.value.clientWidth==0?Yt.width=bt.value.naturalWidth+.5+Qt:Yt.width=bt.value.clientWidth+.5+Qt;const on=bt.value.naturalHeight/bt.value.naturalWidth*Yt.width;if(Yt.height=on+.5,Yt.setAttribute("role","img"),kt.value.inheritClasses===!0){let An=bt.value.getAttribute("class");An==null&&(An=""),Yt.setAttribute("class","gifa11y-canvas "+An)}else Yt.setAttribute("class","gifa11y-canvas");let nn=bt.value.getAttribute("alt")||kt.value.langMissingAlt;Yt.setAttribute("aria-label",nn);const mn=bt.value.src,gn=window.matchMedia("(prefers-reduced-motion: reduce)");!gn||gn.matches||bt.value.classList.contains("gifa11y-paused")||mn.indexOf("gifa11y-paused")>-1||kt.value.initiallyPaused===!0?bt.value.style.display="none":Yt.style.display="none",Yt.getContext("2d").drawImage(bt.value,0,0,Yt.width,Yt.height),bt.value.after(Yt)}};bt.value.complete?Bt():bt.value.addEventListener("load",()=>{xt.value||nextTick(()=>Bt())})}function Dt(Bt,Ft){Et.value=!Et.value;const Yt=bt.value.nextElementSibling;Et.value?(kt.value.restartOnPlay&&(bt.value.src=rt.src),bt.value.style.display="block",Yt.style.display="none"):(kt.value.restartOnPlay&&(bt.value.src=rt.src),bt.value.style.display="none",Yt.style.display="block"),Ft.preventDefault()}return(Bt,Ft)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("img",{src:rt.src,i:"",id:"gif",style:{width:"100%"},alt:rt.alt||"Animated GIF",onClick:Ft[0]||(Ft[0]=Yt=>Dt("image",Yt))},null,8,_hoisted_1$m),xt.value?(openBlock(),createElementBlock("sl-icon",{key:0,id:"play-button",name:Et.value?"pause-circle":"play-circle","data-state":Et.value?"playing":"paused",style:{"font-size":"100px"},onClick:Ft[1]||(Ft[1]=Yt=>Dt("icon",Yt))},null,8,_hoisted_2$j)):createCommentVNode("",!0)],512))}}),_style_0$i=`.main{position:relative}canvas.gifa11y-canvas{object-fit:contain;max-width:100%}#play-button{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);color:#fff;visibility:hidden;background-color:#0006;border-radius:50%}#play-button:hover{cursor:pointer}#play-button[data-state=paused],.main:hover #play-button{visibility:visible}
`,GIF=_export_sfc(_sfc_main$o,[["styles",[_style_0$i]]]),_hoisted_1$l=["background","options","position","sticky","height","top"],_hoisted_2$i=["label","subtitle","logo","url","sticky","search-domain","contact","contact-form-title","contact-subject","height","background","alpha","offset"],_hoisted_3$d=["innerHTML"],navbarHeight=80,heroHeight=400,_sfc_main$n=defineComponent({__name:"Header.ce",props:{label:{type:String},subtitle:{type:String},logo:{type:String},url:{type:String},contact:{type:String},contactFormTitle:{type:String},contactSubject:{type:String},searchDomain:{type:String},entities:{type:String},sticky:{type:Boolean},background:{type:String},options:{type:String},height:{type:Number},position:{type:String}},setup(nt){const rt=nt,it=/^\w+:/,st=ref(null),bt=computed(()=>{var Yt,Zt;return(Zt=(Yt=st.value)==null?void 0:Yt.getRootNode())==null?void 0:Zt.host}),xt=ref(),Et=ref(),kt=ref([]),Lt=ref(),Pt=ref(),Rt=ref(),Dt=ref(rt.height||navbarHeight);onMounted(()=>Bt()),onUpdated(()=>Bt());function Bt(){var Yt;kt.value=rt.entities?rt.entities.split(/\s+/).filter(Zt=>Zt):[],rt.background!==void 0&&(isURL(rt.background)||Ft(rt.background))?(Rt.value=rt.background,Dt.value=rt.height||heroHeight):Pt.value=rt.background||"#444",rt.label&&rt.label!=="static"&&(xt.value=rt.label),rt.sticky&&bt.value.classList.add("sticky"),Et.value=(Yt=bt.value.querySelector("ul"))==null?void 0:Yt.innerHTML}watch$1(kt,async()=>{kt.value.length>0&&!Lt.value&&(Lt.value=await getEntity(kt.value[0]),Lt.value&&(xt.value=Lt.value.label,Lt.value.pageBanner&&(Rt.value=`https://iiif.juncture-digital.org/wc:${decodeURIComponent(Lt.value.pageBanner.split("/Special:FilePath/").pop()).replace(/\s/,"_")}/manifest.json`,Dt.value=heroHeight)))});function Ft(Yt){return it.test(Yt)}return(Yt,Zt)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",normalizeProps(guardReactiveProps(Yt.$attrs)),null,16),Rt.value?(openBlock(),createElementBlock("ve-hero",{key:0,background:Rt.value,options:rt.options,position:rt.position,sticky:rt.sticky?"":null,height:Dt.value,top:rt.sticky?Dt.value-navbarHeight:0},null,8,_hoisted_1$l)):createCommentVNode("",!0),createBaseVNode("ve-navbar",{ref_key:"navbar",ref:st,label:xt.value,subtitle:rt.subtitle,logo:rt.logo,url:rt.url,sticky:rt.sticky?"":null,"search-domain":rt.searchDomain,contact:rt.contact,"contact-form-title":rt.contactFormTitle,"contact-subject":rt.contactSubject,height:Rt.value?navbarHeight:Dt.value,background:Pt.value,alpha:Rt.value?.2:0,offset:Rt.value?navbarHeight:0},[Et.value?(openBlock(),createElementBlock("ul",{key:0,innerHTML:Et.value},null,8,_hoisted_3$d)):createCommentVNode("",!0)],8,_hoisted_2$i)],64))}}),_style_0$h=`.main{width:100%}
`,Header=_export_sfc(_sfc_main$n,[["styles",[_style_0$h]]]),_hoisted_1$k=["manifest"],_sfc_main$m=defineComponent({__name:"Hero.ce",props:{background:{type:String},options:{type:String},position:{type:String,default:"center"},sticky:{type:Boolean,default:!1},height:{type:Number,default:350},top:{type:Number,default:0}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Pt,Rt;return(Rt=(Pt=it.value)==null?void 0:Pt.getRootNode())==null?void 0:Rt.host}),bt=ref(),xt=ref(),Et=ref(),kt=ref();watch$1(rt,()=>{rt.sticky&&(st.value.style.position="sticky",st.value.style.top="-320px")}),watch$1(st,()=>{xt.value=parseImageOptions(rt.options||""),rt.background&&getManifest(rt.background).then(Pt=>bt.value=Pt),st.value.style.height=`${rt.height}px`,rt.sticky&&(st.value.style.position="sticky"),rt.top&&(st.value.style.top=`-${rt.top}px`)}),watch$1(bt,(Pt,Rt)=>{Pt!==Rt&&(Et.value=getItemInfo(Pt))}),watch$1(Et,async(Pt,Rt)=>{Pt!==Rt&&(kt.value=Pt.service?Lt(Pt.service[0].id||Pt.service[0]["@id"],xt.value):await imageDataUrl(Et.value.id,xt.value.region,{width:st.value.clientWidth,height:rt.height}))}),watch$1(kt,()=>{st.value.style.backgroundImage=`url("${kt.value}")`,st.value.style.backgroundPosition=rt.position});function Lt(Pt,Rt){let Dt=Et.value,Bt=Number((Dt.width/Dt.height).toFixed(4)),Ft=Math.min(800,st.value.clientWidth),Yt=Number(Ft/Bt).toFixed(0),Zt=`${Ft},${Yt}`;return`${Pt.replace(/\/info.json$/,"")}/${Rt.region}/${Zt}/${Rt.rotation}/${Rt.quality}.${Rt.format}`}return(Pt,Rt)=>{var Dt;return openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-hero media-item"},[createBaseVNode("ve-manifest-popup",{manifest:(Dt=bt.value)==null?void 0:Dt.id},null,8,_hoisted_1$k)],512)}}}),_style_0$g=`*{box-sizing:border-box}:host{display:block;position:relative;width:100%;z-index:10}.ve-hero{background-repeat:no-repeat;background-size:cover;background-position:center;z-index:8}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,Hero=_export_sfc(_sfc_main$m,[["styles",[_style_0$g]]]),_hoisted_1$j={class:"content"},_hoisted_2$h=["src","width","height"],_sfc_main$l=defineComponent({__name:"IFrame.ce",props:{allow:{type:String},allowfullscreen:{type:Boolean},allowpaymentrequest:{type:Boolean},height:{type:String},loading:{type:String},name:{type:String},referrerpolicy:{type:String},sandbox:{type:String},src:{type:String},srcdoc:{type:String},width:{type:String},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Bt;return(Bt=it==null?void 0:it.value)==null?void 0:Bt.parentNode}),bt=computed(()=>{var Bt,Ft;return(Ft=(Bt=it.value)==null?void 0:Bt.getRootNode())==null?void 0:Ft.host}),xt=computed(()=>{var Bt;return(Bt=st.value)==null?void 0:Bt.querySelector(".content")}),Et=ref(),kt=ref(0),Lt=ref(0),Pt=rt.position||(isMobile()?"full":rt.right?"right":rt.left?"left":"full");onMounted(()=>Rt());function Rt(){rt.src&&(Et.value=rt.src),Dt()}function Dt(){rt.sticky&&makeSticky(bt.value),bt.value.classList.add("ve-component"),bt.value.classList.add(Pt),Pt==="full"?bt.value.style.width="100%":(bt.value.style.float=Pt,bt.value.style.width="50%"),nextTick(()=>{bt.value.style.width=window.getComputedStyle(bt.value).width,bt.value.style.height=rt.height||window.getComputedStyle(bt.value).width,xt.value.style.width=rt.width||window.getComputedStyle(bt.value).width,xt.value.style.height=rt.height||window.getComputedStyle(bt.value).width,nextTick(()=>{kt.value=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2)),Lt.value=parseInt(window.getComputedStyle(xt.value).height.slice(0,-2))})})}return(Bt,Ft)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$j,[createBaseVNode("iframe",{src:Et.value,width:kt.value,height:Lt.value},null,8,_hoisted_2$h)])],512))}}),_style_0$f=`*{box-sizing:border-box}.main{height:500px}:host{display:block;width:100%;background-color:#fff}.content{margin:auto}iframe{border:none}
`,IFrame=_export_sfc(_sfc_main$l,[["styles",[_style_0$f]]]),_hoisted_1$i=["innerHTML"],_hoisted_2$g=["innerHTML"],_sfc_main$k=defineComponent({__name:"InfoCard.ce",props:{label:{type:String},description:{type:String},image:{type:String},href:{type:String},data:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Dt,Bt;return(Bt=(Dt=it.value)==null?void 0:Dt.getRootNode())==null?void 0:Bt.host}),bt=computed(()=>rt.data?JSON.parse(rt.data):{}),xt=computed(()=>bt.value.label||rt.label),Et=computed(()=>bt.value.description||rt.description),kt=computed(()=>bt.value.image||rt.image);computed(()=>bt.value.href||rt.href);const Lt=computed(()=>kt.value&&`url('${Rt(kt.value)}')`),Pt=computed(()=>{var Dt;return`${((Dt=st.value)==null?void 0:Dt.clientWidth)*.33}px`});function Rt(Dt){let Bt=Dt.split("/");return`${Bt.slice(0,-1).join("/")}/${encodeURIComponent(Bt[Bt.length-1])}`}return(Dt,Bt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:xt.value},null,8,_hoisted_1$i),createBaseVNode("div",{class:"description",innerHTML:Et.value},null,8,_hoisted_2$g),kt.value?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:Lt.value,width:Pt.value})},null,4)):createCommentVNode("",!0)],512))}}),_style_0$e=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border-radius:6px;min-height:80px;max-height:100px;overflow-y:hidden;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400;height:100%}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;max-height:100px;object-fit:cover;background-repeat:no-repeat;background-size:cover;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,InfoCard=_export_sfc(_sfc_main$k,[["styles",[_style_0$e]]]),_withScopeId=nt=>(pushScopeId("data-v-b4ddce3a"),nt=nt(),popScopeId(),nt),_hoisted_1$h={class:"main"},_hoisted_2$f=["src"],_hoisted_3$c=["innerHTML"],_hoisted_4$b=["innerHTML"],_hoisted_5$9=["href","innerHTML"],_hoisted_6$7={class:"links"},_hoisted_7$6={class:"detail"},_hoisted_8$6={key:0,class:"provider"},_hoisted_9$5=_withScopeId(()=>createBaseVNode("span",{class:"label"},"provider",-1)),_hoisted_10$4={key:0,style:{display:"flex","align-items":"center"}},_hoisted_11$3=["src"],_hoisted_12$2=["href","innerHTML"],_hoisted_13$2={key:1},_hoisted_14$2=["src"],_hoisted_15$2=["href","innerHTML"],_hoisted_16$2={key:1,class:"requiredStatement"},_hoisted_17$2=["innerHTML"],_hoisted_18$2={key:2,class:"rights"},_hoisted_19$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"Reuse rights",-1)),_hoisted_20$2=["href","innerHTML"],_hoisted_21$2={key:3,class:"metadata"},_hoisted_22$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"metadata",-1)),_hoisted_23$2=["innerHTML"],_hoisted_24$2=["innerHTML"],_hoisted_25$2={key:1},_hoisted_26$2=["innerHTML"],_hoisted_27$2={key:4,class:"navDate"},_hoisted_28$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"navDate",-1)),_hoisted_29$2=["innerHTML"],_hoisted_30$2={key:5,class:"homepage"},_hoisted_31$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"homepage",-1)),_hoisted_32$2=["href","innerHTML"],_hoisted_33$2={key:6,class:"seeAlso"},_hoisted_34$2=_withScopeId(()=>createBaseVNode("span",{class:"label"},"seeAlso",-1)),_hoisted_35$1=["href","innerHTML"],_hoisted_36$1={key:7,class:"logo"},_hoisted_37=_withScopeId(()=>createBaseVNode("span",{class:"label"},"logo",-1)),_hoisted_38=["href","innerHTML"],_hoisted_39={key:8,class:"imageData"},_hoisted_40=_withScopeId(()=>createBaseVNode("span",{class:"label"},"source",-1)),_hoisted_41=["href","innerHTML"],_hoisted_42=_withScopeId(()=>createBaseVNode("span",{class:"label"},"format",-1)),_hoisted_43=["innerHTML"],_hoisted_44=_withScopeId(()=>createBaseVNode("span",{class:"label"},"width",-1)),_hoisted_45=["innerHTML"],_hoisted_46=_withScopeId(()=>createBaseVNode("span",{class:"label"},"height",-1)),_hoisted_47=["innerHTML"],_sfc_main$j=defineComponent({__name:"Manifest.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null);computed(()=>{var Dt,Bt;return(Bt=(Dt=it.value)==null?void 0:Dt.getRootNode())==null?void 0:Bt.host});const st=ref(null),bt=ref(null);watch$1(st,()=>bt.value=Lt(st.value));const xt=computed(()=>bt.value&&Rt(bt.value));onMounted(()=>Et());function Et(){typeof rt.manifest=="object"?st.value=rt.manifest:getManifest(rt.manifest).then(Dt=>st.value=Dt)}function kt(Dt,Bt="en"){return typeof Dt=="object"&&!Array.isArray(Dt)?Dt[Bt]||Dt.none||Dt[Object.keys(Dt).sort()[0]]:Dt}function Lt(Dt){let Bt={};if(Bt.id=kt(Dt.id),Bt.label=kt(Dt.label),Dt.summary&&(Bt.summary=kt(Dt.summary)),Dt.rights&&(Bt.rights=Dt.rights),Dt.thumbnail&&(Bt.thumbnail=Dt.thumbnail[0].id||Dt.thumbnail),Dt.metadata){Bt.metadata=Dt.metadata.map(Zt=>({label:kt(Zt.label)[0],value:kt(Zt.value)}));let Ft=Bt.metadata.find(Zt=>Zt.label=="source_url");Bt.sourceUrl=Ft?Ft.value[0]:null;let Yt=Bt.metadata.find(Zt=>Zt.label==="depicts");Yt&&(Bt.depicts=Yt.value)}if(Dt.provider&&(Bt.provider=Dt.provider.map(Ft=>{let Yt={label:kt(Ft.label),href:Ft.id};return Ft.logo&&(Yt.logo={src:Ft.logo[0].id}),Yt})),Dt.logo&&(Bt.logo=Dt.logo.map(Ft=>{let Yt={src:typeof Ft=="object"?Ft.id||Ft["@id"]:Ft};return typeof Ft=="object"&&(Ft.width&&(Yt.width=Ft.width),Ft.height&&(Yt.height=Ft.height)),Yt})),Bt.imageData=getItemInfo(Dt),Bt.service=Bt.imageData.service&&`${(Bt.imageData.service[0].id||Bt.imageData.service[0]["@id"]).replace(/\/info\.json$/,"")}/info.json`,Dt.requiredStatement){let Ft=Dt.requiredStatement;Bt.requiredStatement={label:kt(Ft.label),value:kt(Ft.value)}}return Dt.homepage&&(Bt.homepage={label:Dt.homepage.label?kt(Dt.homepage.label):Dt.homepage.id,href:Dt.homepage.id}),Dt.seeAlso&&(Bt.seeAlso=Dt.seeAlso.map(Ft=>({label:Ft.label?kt(Ft.label):Ft.id,href:Ft.id}))),Bt}function Pt(Dt){navigator.clipboard&&navigator.clipboard.writeText(Dt)}function Rt(Dt){let Bt={cc:{badgeWidth:88,badgeHeight:31,badgeTemplate:'https://licensebuttons.net/l/${this.rightsCode}${this.rightsCode === "publicdomain" ? "" : "/"+this.version}/${this.badgeWidth}x${this.badgeHeight}.png'},rs:{badgeTemplate:"https://rightsstatements.org/files/buttons/${this.rightsCode}.white.svg",backgroundColor:"318ac7"}};const Ft=function(nn,mn){return new Function("return `"+nn+"`;").call(mn)};let Yt=Dt.rights||"",Zt="",[Wt,Qt,Kt,on]=Yt.split("/").slice(2);return Wt==="creativecommons.org"?(Kt=Kt==="zero"?"publicdomain":Kt,Zt=`<img src="${Ft(Bt.cc.badgeTemplate,{...Bt.cc,rightsCode:Kt,version:on})}"/>`):Wt==="rightsstatements.org"&&(Zt=`<div style="display:inline-block;height:25px;padding:3px;background-color:#${Bt.rs.backgroundColor};"><img style="height:100%;" src="${Ft(Bt.rs.badgeTemplate,{...Bt.rs,rightsCode:Kt})}"/></div>`),Zt}return(Dt,Bt)=>{var Ft,Yt,Zt,Wt,Qt,Kt,on,nn,mn,gn,Tn,An,kn,Mn,$n;return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"manifest"},[createBaseVNode("div",_hoisted_1$h,[createBaseVNode("img",{class:"thumbnail",src:(Ft=bt.value)==null?void 0:Ft.thumbnail},null,8,_hoisted_2$f),createBaseVNode("div",{class:"label",innerHTML:(Yt=bt.value)==null?void 0:Yt.label},null,8,_hoisted_3$c),(Zt=bt.value)!=null&&Zt.summary?(openBlock(),createElementBlock("div",{key:0,class:"summary",innerHTML:(Wt=bt.value)==null?void 0:Wt.summary},null,8,_hoisted_4$b)):createCommentVNode("",!0),(Qt=bt.value)!=null&&Qt.rights?(openBlock(),createElementBlock("a",{key:1,href:(Kt=bt.value)==null?void 0:Kt.rights,innerHTML:xt.value},null,8,_hoisted_5$9)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$7,[createBaseVNode("img",{src:"https://juncture-digital.github.io/web-app/static/iiif.png",class:"iiif",alt:"IIIF manifest icon",onClick:Bt[0]||(Bt[0]=cn=>Pt(st.value.id))})])]),createBaseVNode("div",_hoisted_7$6,[(on=bt.value)!=null&&on.provider?(openBlock(),createElementBlock("div",_hoisted_8$6,[_hoisted_9$5,bt.value.provider.length===1?(openBlock(),createElementBlock("div",_hoisted_10$4,[bt.value.provider[0].logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:bt.value.provider[0].logo.src},null,8,_hoisted_11$3)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:bt.value.provider[0].href,innerHTML:bt.value.provider[0].label},null,8,_hoisted_12$2)])):(openBlock(),createElementBlock("ul",_hoisted_13$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(bt.value.provider,(cn,Sn)=>(openBlock(),createElementBlock("li",{key:`provider-${Sn}`},[cn.logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:cn.logo.src},null,8,_hoisted_14$2)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:cn.href,innerHTML:cn.label},null,8,_hoisted_15$2)]))),128))]))])):createCommentVNode("",!0),(nn=bt.value)!=null&&nn.requiredStatement?(openBlock(),createElementBlock("div",_hoisted_16$2,[createBaseVNode("span",{class:"value",innerHTML:bt.value.requiredStatement.value},null,8,_hoisted_17$2)])):createCommentVNode("",!0),(mn=bt.value)!=null&&mn.rights?(openBlock(),createElementBlock("div",_hoisted_18$2,[_hoisted_19$2,createBaseVNode("a",{class:"value",href:bt.value.rights,innerHTML:bt.value.rights},null,8,_hoisted_20$2)])):createCommentVNode("",!0),(gn=bt.value)!=null&&gn.metadata?(openBlock(),createElementBlock("div",_hoisted_21$2,[_hoisted_22$2,createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(bt.value.metadata,(cn,Sn)=>(openBlock(),createElementBlock("li",{key:`md-${Sn}`},[createBaseVNode("span",{class:"label",innerHTML:cn.label},null,8,_hoisted_23$2),cn.value.length===1?(openBlock(),createElementBlock("span",{key:0,class:"value",innerHTML:cn.value[0]},null,8,_hoisted_24$2)):(openBlock(),createElementBlock("ul",_hoisted_25$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(cn.value,an=>(openBlock(),createElementBlock("li",{class:"value",innerHTML:an},null,8,_hoisted_26$2))),256))]))]))),128))])])):createCommentVNode("",!0),(Tn=bt.value)!=null&&Tn.navDate?(openBlock(),createElementBlock("div",_hoisted_27$2,[_hoisted_28$2,createBaseVNode("span",{class:"value",innerHTML:bt.value.navDate},null,8,_hoisted_29$2)])):createCommentVNode("",!0),(An=bt.value)!=null&&An.homepage?(openBlock(),createElementBlock("div",_hoisted_30$2,[_hoisted_31$2,createBaseVNode("a",{class:"value",href:bt.value.homepage.href,innerHTML:bt.value.homepage.label},null,8,_hoisted_32$2)])):createCommentVNode("",!0),(kn=bt.value)!=null&&kn.seeAlso?(openBlock(),createElementBlock("div",_hoisted_33$2,[_hoisted_34$2,createBaseVNode("a",{class:"value",href:bt.value.seeAlso[0].href,innerHTML:bt.value.seeAlso[0].label},null,8,_hoisted_35$1)])):createCommentVNode("",!0),(Mn=bt.value)!=null&&Mn.logo?(openBlock(),createElementBlock("div",_hoisted_36$1,[_hoisted_37,createBaseVNode("a",{class:"value",href:bt.value.logo[0].src,innerHTML:bt.value.logo[0].src},null,8,_hoisted_38)])):createCommentVNode("",!0),($n=bt.value)!=null&&$n.imageData?(openBlock(),createElementBlock("div",_hoisted_39,[createBaseVNode("div",null,[_hoisted_40,createBaseVNode("a",{class:"value",href:bt.value.imageData.id,innerHTML:bt.value.imageData.id.split("/").pop()},null,8,_hoisted_41)]),createBaseVNode("div",null,[_hoisted_42,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.format},null,8,_hoisted_43)]),createBaseVNode("div",null,[_hoisted_44,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.width},null,8,_hoisted_45)]),createBaseVNode("div",null,[_hoisted_46,createBaseVNode("span",{class:"value",innerHTML:bt.value.imageData.height},null,8,_hoisted_47)])])):createCommentVNode("",!0)])],512)}}}),_style_0$d=`*[data-v-b4ddce3a]{box-sizing:border-box}.manifest[data-v-b4ddce3a]{width:100%;height:100%;overflow-y:scroll;background-color:#fff}.main[data-v-b4ddce3a],.detail[data-v-b4ddce3a]{display:flow-root;margin:6px}.main>*[data-v-b4ddce3a]{margin-bottom:6px}.detail>div[data-v-b4ddce3a]{margin-top:12px}.main .label[data-v-b4ddce3a]{font-size:1.2em;font-weight:700}.thumbnail[data-v-b4ddce3a]{float:left;max-width:45%;max-height:200px;margin:0 6px 6px 0}.links[data-v-b4ddce3a]{margin-top:6px}img.iiif[data-v-b4ddce3a]{height:24px;cursor:copy}ul[data-v-b4ddce3a]{list-style:none;padding-left:12px;margin-top:0}.detail .label[data-v-b4ddce3a]{font-size:1.1em;font-weight:700;min-width:80px;margin-right:6px}.detail .label[data-v-b4ddce3a]:after{content:":"}.detail .value[data-v-b4ddce3a],.main .label[data-v-b4ddce3a]{white-space:pre-wrap;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.logo[data-v-b4ddce3a]{padding-right:6px}img.logo[data-v-b4ddce3a]{height:40px}.manifest-id[data-v-b4ddce3a],.manifest-label[data-v-b4ddce3a],.summary[data-v-b4ddce3a],.provider[data-v-b4ddce3a],.rights[data-v-b4ddce3a],.service[data-v-b4ddce3a],.imageData div[data-v-b4ddce3a],.thumbnail[data-v-b4ddce3a]{display:flex;align-items:flex-start}.metadata>ul[data-v-b4ddce3a],.requiredStatement ul[data-v-b4ddce3a]{padding-left:24px}.metadata ul li[data-v-b4ddce3a],.requiredStatement ul li[data-v-b4ddce3a]{display:flex}.metadata ul ul[data-v-b4ddce3a]{padding-left:0}a[data-v-b4ddce3a]:link,a[data-v-b4ddce3a]:visited{color:#00e}
`,Manifest=_export_sfc(_sfc_main$j,[["styles",[_style_0$d]],["__scopeId","data-v-b4ddce3a"]]),_hoisted_1$g=createBaseVNode("sl-icon",{id:"tippy",name:"info-circle-fill"},null,-1),_hoisted_2$e=[_hoisted_1$g],_sfc_main$i=defineComponent({__name:"ManifestPopup.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var bt,xt;return(xt=(bt=it.value)==null?void 0:bt.getRootNode())==null?void 0:xt.host});return watch$1(st,()=>{tippy(st.value,{theme:"light-border",allowHTML:!0,interactive:!0,appendTo:document.body,placement:"bottom-end",arrow:!0,delay:[null,null],onShow:bt=>bt.setContent(`<div class="manifest-popup"><ve-manifest manifest="${rt.manifest}"></ve-manifest></div>`)})}),(bt,xt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it},_hoisted_2$e,512))}}),_style_0$c=`#tippy{width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center}
`,ManifestPopup=_export_sfc(_sfc_main$i,[["styles",[_style_0$c]]]);var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(nt,rt){(function(it,st){st(rt)})(commonjsGlobal$1,function(it){var st="1.9.4";function bt($t){var Vt,tn,pn,In;for(tn=1,pn=arguments.length;tn<pn;tn++){In=arguments[tn];for(Vt in In)$t[Vt]=In[Vt]}return $t}var xt=Object.create||function(){function $t(){}return function(Vt){return $t.prototype=Vt,new $t}}();function Et($t,Vt){var tn=Array.prototype.slice;if($t.bind)return $t.bind.apply($t,tn.call(arguments,1));var pn=tn.call(arguments,2);return function(){return $t.apply(Vt,pn.length?pn.concat(tn.call(arguments)):arguments)}}var kt=0;function Lt($t){return"_leaflet_id"in $t||($t._leaflet_id=++kt),$t._leaflet_id}function Pt($t,Vt,tn){var pn,In,Jn,Tr;return Tr=function(){pn=!1,In&&(Jn.apply(tn,In),In=!1)},Jn=function(){pn?In=arguments:($t.apply(tn,arguments),setTimeout(Tr,Vt),pn=!0)},Jn}function Rt($t,Vt,tn){var pn=Vt[1],In=Vt[0],Jn=pn-In;return $t===pn&&tn?$t:(($t-In)%Jn+Jn)%Jn+In}function Dt(){return!1}function Bt($t,Vt){if(Vt===!1)return $t;var tn=Math.pow(10,Vt===void 0?6:Vt);return Math.round($t*tn)/tn}function Ft($t){return $t.trim?$t.trim():$t.replace(/^\s+|\s+$/g,"")}function Yt($t){return Ft($t).split(/\s+/)}function Zt($t,Vt){Object.prototype.hasOwnProperty.call($t,"options")||($t.options=$t.options?xt($t.options):{});for(var tn in Vt)$t.options[tn]=Vt[tn];return $t.options}function Wt($t,Vt,tn){var pn=[];for(var In in $t)pn.push(encodeURIComponent(tn?In.toUpperCase():In)+"="+encodeURIComponent($t[In]));return(!Vt||Vt.indexOf("?")===-1?"?":"&")+pn.join("&")}var Qt=/\{ *([\w_ -]+) *\}/g;function Kt($t,Vt){return $t.replace(Qt,function(tn,pn){var In=Vt[pn];if(In===void 0)throw new Error("No value provided for variable "+tn);return typeof In=="function"&&(In=In(Vt)),In})}var on=Array.isArray||function($t){return Object.prototype.toString.call($t)==="[object Array]"};function nn($t,Vt){for(var tn=0;tn<$t.length;tn++)if($t[tn]===Vt)return tn;return-1}var mn="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function gn($t){return window["webkit"+$t]||window["moz"+$t]||window["ms"+$t]}var Tn=0;function An($t){var Vt=+new Date,tn=Math.max(0,16-(Vt-Tn));return Tn=Vt+tn,window.setTimeout($t,tn)}var kn=window.requestAnimationFrame||gn("RequestAnimationFrame")||An,Mn=window.cancelAnimationFrame||gn("CancelAnimationFrame")||gn("CancelRequestAnimationFrame")||function($t){window.clearTimeout($t)};function $n($t,Vt,tn){if(tn&&kn===An)$t.call(Vt);else return kn.call(window,Et($t,Vt))}function cn($t){$t&&Mn.call(window,$t)}var Sn={__proto__:null,extend:bt,create:xt,bind:Et,get lastId(){return kt},stamp:Lt,throttle:Pt,wrapNum:Rt,falseFn:Dt,formatNum:Bt,trim:Ft,splitWords:Yt,setOptions:Zt,getParamString:Wt,template:Kt,isArray:on,indexOf:nn,emptyImageUrl:mn,requestFn:kn,cancelFn:Mn,requestAnimFrame:$n,cancelAnimFrame:cn};function an(){}an.extend=function($t){var Vt=function(){Zt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},tn=Vt.__super__=this.prototype,pn=xt(tn);pn.constructor=Vt,Vt.prototype=pn;for(var In in this)Object.prototype.hasOwnProperty.call(this,In)&&In!=="prototype"&&In!=="__super__"&&(Vt[In]=this[In]);return $t.statics&&bt(Vt,$t.statics),$t.includes&&(jn($t.includes),bt.apply(null,[pn].concat($t.includes))),bt(pn,$t),delete pn.statics,delete pn.includes,pn.options&&(pn.options=tn.options?xt(tn.options):{},bt(pn.options,$t.options)),pn._initHooks=[],pn.callInitHooks=function(){if(!this._initHooksCalled){tn.callInitHooks&&tn.callInitHooks.call(this),this._initHooksCalled=!0;for(var Jn=0,Tr=pn._initHooks.length;Jn<Tr;Jn++)pn._initHooks[Jn].call(this)}},Vt},an.include=function($t){var Vt=this.prototype.options;return bt(this.prototype,$t),$t.options&&(this.prototype.options=Vt,this.mergeOptions($t.options)),this},an.mergeOptions=function($t){return bt(this.prototype.options,$t),this},an.addInitHook=function($t){var Vt=Array.prototype.slice.call(arguments,1),tn=typeof $t=="function"?$t:function(){this[$t].apply(this,Vt)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(tn),this};function jn($t){if(!(typeof L>"u"||!L||!L.Mixin)){$t=on($t)?$t:[$t];for(var Vt=0;Vt<$t.length;Vt++)$t[Vt]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var hn={on:function($t,Vt,tn){if(typeof $t=="object")for(var pn in $t)this._on(pn,$t[pn],Vt);else{$t=Yt($t);for(var In=0,Jn=$t.length;In<Jn;In++)this._on($t[In],Vt,tn)}return this},off:function($t,Vt,tn){if(!arguments.length)delete this._events;else if(typeof $t=="object")for(var pn in $t)this._off(pn,$t[pn],Vt);else{$t=Yt($t);for(var In=arguments.length===1,Jn=0,Tr=$t.length;Jn<Tr;Jn++)In?this._off($t[Jn]):this._off($t[Jn],Vt,tn)}return this},_on:function($t,Vt,tn,pn){if(typeof Vt!="function"){console.warn("wrong listener type: "+typeof Vt);return}if(this._listens($t,Vt,tn)===!1){tn===this&&(tn=void 0);var In={fn:Vt,ctx:tn};pn&&(In.once=!0),this._events=this._events||{},this._events[$t]=this._events[$t]||[],this._events[$t].push(In)}},_off:function($t,Vt,tn){var pn,In,Jn;if(!!this._events&&(pn=this._events[$t],!!pn)){if(arguments.length===1){if(this._firingCount)for(In=0,Jn=pn.length;In<Jn;In++)pn[In].fn=Dt;delete this._events[$t];return}if(typeof Vt!="function"){console.warn("wrong listener type: "+typeof Vt);return}var Tr=this._listens($t,Vt,tn);if(Tr!==!1){var Vr=pn[Tr];this._firingCount&&(Vr.fn=Dt,this._events[$t]=pn=pn.slice()),pn.splice(Tr,1)}}},fire:function($t,Vt,tn){if(!this.listens($t,tn))return this;var pn=bt({},Vt,{type:$t,target:this,sourceTarget:Vt&&Vt.sourceTarget||this});if(this._events){var In=this._events[$t];if(In){this._firingCount=this._firingCount+1||1;for(var Jn=0,Tr=In.length;Jn<Tr;Jn++){var Vr=In[Jn],Jr=Vr.fn;Vr.once&&this.off($t,Jr,Vr.ctx),Jr.call(Vr.ctx||this,pn)}this._firingCount--}}return tn&&this._propagateEvent(pn),this},listens:function($t,Vt,tn,pn){typeof $t!="string"&&console.warn('"string" type argument expected');var In=Vt;typeof Vt!="function"&&(pn=!!Vt,In=void 0,tn=void 0);var Jn=this._events&&this._events[$t];if(Jn&&Jn.length&&this._listens($t,In,tn)!==!1)return!0;if(pn){for(var Tr in this._eventParents)if(this._eventParents[Tr].listens($t,Vt,tn,pn))return!0}return!1},_listens:function($t,Vt,tn){if(!this._events)return!1;var pn=this._events[$t]||[];if(!Vt)return!!pn.length;tn===this&&(tn=void 0);for(var In=0,Jn=pn.length;In<Jn;In++)if(pn[In].fn===Vt&&pn[In].ctx===tn)return In;return!1},once:function($t,Vt,tn){if(typeof $t=="object")for(var pn in $t)this._on(pn,$t[pn],Vt,!0);else{$t=Yt($t);for(var In=0,Jn=$t.length;In<Jn;In++)this._on($t[In],Vt,tn,!0)}return this},addEventParent:function($t){return this._eventParents=this._eventParents||{},this._eventParents[Lt($t)]=$t,this},removeEventParent:function($t){return this._eventParents&&delete this._eventParents[Lt($t)],this},_propagateEvent:function($t){for(var Vt in this._eventParents)this._eventParents[Vt].fire($t.type,bt({layer:$t.target,propagatedFrom:$t.target},$t),!0)}};hn.addEventListener=hn.on,hn.removeEventListener=hn.clearAllEventListeners=hn.off,hn.addOneTimeEventListener=hn.once,hn.fireEvent=hn.fire,hn.hasEventListeners=hn.listens;var zn=an.extend(hn);function ir($t,Vt,tn){this.x=tn?Math.round($t):$t,this.y=tn?Math.round(Vt):Vt}var tr=Math.trunc||function($t){return $t>0?Math.floor($t):Math.ceil($t)};ir.prototype={clone:function(){return new ir(this.x,this.y)},add:function($t){return this.clone()._add(nr($t))},_add:function($t){return this.x+=$t.x,this.y+=$t.y,this},subtract:function($t){return this.clone()._subtract(nr($t))},_subtract:function($t){return this.x-=$t.x,this.y-=$t.y,this},divideBy:function($t){return this.clone()._divideBy($t)},_divideBy:function($t){return this.x/=$t,this.y/=$t,this},multiplyBy:function($t){return this.clone()._multiplyBy($t)},_multiplyBy:function($t){return this.x*=$t,this.y*=$t,this},scaleBy:function($t){return new ir(this.x*$t.x,this.y*$t.y)},unscaleBy:function($t){return new ir(this.x/$t.x,this.y/$t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=tr(this.x),this.y=tr(this.y),this},distanceTo:function($t){$t=nr($t);var Vt=$t.x-this.x,tn=$t.y-this.y;return Math.sqrt(Vt*Vt+tn*tn)},equals:function($t){return $t=nr($t),$t.x===this.x&&$t.y===this.y},contains:function($t){return $t=nr($t),Math.abs($t.x)<=Math.abs(this.x)&&Math.abs($t.y)<=Math.abs(this.y)},toString:function(){return"Point("+Bt(this.x)+", "+Bt(this.y)+")"}};function nr($t,Vt,tn){return $t instanceof ir?$t:on($t)?new ir($t[0],$t[1]):$t==null?$t:typeof $t=="object"&&"x"in $t&&"y"in $t?new ir($t.x,$t.y):new ir($t,Vt,tn)}function dr($t,Vt){if(!!$t)for(var tn=Vt?[$t,Vt]:$t,pn=0,In=tn.length;pn<In;pn++)this.extend(tn[pn])}dr.prototype={extend:function($t){var Vt,tn;if(!$t)return this;if($t instanceof ir||typeof $t[0]=="number"||"x"in $t)Vt=tn=nr($t);else if($t=or($t),Vt=$t.min,tn=$t.max,!Vt||!tn)return this;return!this.min&&!this.max?(this.min=Vt.clone(),this.max=tn.clone()):(this.min.x=Math.min(Vt.x,this.min.x),this.max.x=Math.max(tn.x,this.max.x),this.min.y=Math.min(Vt.y,this.min.y),this.max.y=Math.max(tn.y,this.max.y)),this},getCenter:function($t){return nr((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,$t)},getBottomLeft:function(){return nr(this.min.x,this.max.y)},getTopRight:function(){return nr(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function($t){var Vt,tn;return typeof $t[0]=="number"||$t instanceof ir?$t=nr($t):$t=or($t),$t instanceof dr?(Vt=$t.min,tn=$t.max):Vt=tn=$t,Vt.x>=this.min.x&&tn.x<=this.max.x&&Vt.y>=this.min.y&&tn.y<=this.max.y},intersects:function($t){$t=or($t);var Vt=this.min,tn=this.max,pn=$t.min,In=$t.max,Jn=In.x>=Vt.x&&pn.x<=tn.x,Tr=In.y>=Vt.y&&pn.y<=tn.y;return Jn&&Tr},overlaps:function($t){$t=or($t);var Vt=this.min,tn=this.max,pn=$t.min,In=$t.max,Jn=In.x>Vt.x&&pn.x<tn.x,Tr=In.y>Vt.y&&pn.y<tn.y;return Jn&&Tr},isValid:function(){return!!(this.min&&this.max)},pad:function($t){var Vt=this.min,tn=this.max,pn=Math.abs(Vt.x-tn.x)*$t,In=Math.abs(Vt.y-tn.y)*$t;return or(nr(Vt.x-pn,Vt.y-In),nr(tn.x+pn,tn.y+In))},equals:function($t){return $t?($t=or($t),this.min.equals($t.getTopLeft())&&this.max.equals($t.getBottomRight())):!1}};function or($t,Vt){return!$t||$t instanceof dr?$t:new dr($t,Vt)}function ur($t,Vt){if(!!$t)for(var tn=Vt?[$t,Vt]:$t,pn=0,In=tn.length;pn<In;pn++)this.extend(tn[pn])}ur.prototype={extend:function($t){var Vt=this._southWest,tn=this._northEast,pn,In;if($t instanceof Sr)pn=$t,In=$t;else if($t instanceof ur){if(pn=$t._southWest,In=$t._northEast,!pn||!In)return this}else return $t?this.extend(rr($t)||Cr($t)):this;return!Vt&&!tn?(this._southWest=new Sr(pn.lat,pn.lng),this._northEast=new Sr(In.lat,In.lng)):(Vt.lat=Math.min(pn.lat,Vt.lat),Vt.lng=Math.min(pn.lng,Vt.lng),tn.lat=Math.max(In.lat,tn.lat),tn.lng=Math.max(In.lng,tn.lng)),this},pad:function($t){var Vt=this._southWest,tn=this._northEast,pn=Math.abs(Vt.lat-tn.lat)*$t,In=Math.abs(Vt.lng-tn.lng)*$t;return new ur(new Sr(Vt.lat-pn,Vt.lng-In),new Sr(tn.lat+pn,tn.lng+In))},getCenter:function(){return new Sr((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Sr(this.getNorth(),this.getWest())},getSouthEast:function(){return new Sr(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function($t){typeof $t[0]=="number"||$t instanceof Sr||"lat"in $t?$t=rr($t):$t=Cr($t);var Vt=this._southWest,tn=this._northEast,pn,In;return $t instanceof ur?(pn=$t.getSouthWest(),In=$t.getNorthEast()):pn=In=$t,pn.lat>=Vt.lat&&In.lat<=tn.lat&&pn.lng>=Vt.lng&&In.lng<=tn.lng},intersects:function($t){$t=Cr($t);var Vt=this._southWest,tn=this._northEast,pn=$t.getSouthWest(),In=$t.getNorthEast(),Jn=In.lat>=Vt.lat&&pn.lat<=tn.lat,Tr=In.lng>=Vt.lng&&pn.lng<=tn.lng;return Jn&&Tr},overlaps:function($t){$t=Cr($t);var Vt=this._southWest,tn=this._northEast,pn=$t.getSouthWest(),In=$t.getNorthEast(),Jn=In.lat>Vt.lat&&pn.lat<tn.lat,Tr=In.lng>Vt.lng&&pn.lng<tn.lng;return Jn&&Tr},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function($t,Vt){return $t?($t=Cr($t),this._southWest.equals($t.getSouthWest(),Vt)&&this._northEast.equals($t.getNorthEast(),Vt)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Cr($t,Vt){return $t instanceof ur?$t:new ur($t,Vt)}function Sr($t,Vt,tn){if(isNaN($t)||isNaN(Vt))throw new Error("Invalid LatLng object: ("+$t+", "+Vt+")");this.lat=+$t,this.lng=+Vt,tn!==void 0&&(this.alt=+tn)}Sr.prototype={equals:function($t,Vt){if(!$t)return!1;$t=rr($t);var tn=Math.max(Math.abs(this.lat-$t.lat),Math.abs(this.lng-$t.lng));return tn<=(Vt===void 0?1e-9:Vt)},toString:function($t){return"LatLng("+Bt(this.lat,$t)+", "+Bt(this.lng,$t)+")"},distanceTo:function($t){return mr.distance(this,rr($t))},wrap:function(){return mr.wrapLatLng(this)},toBounds:function($t){var Vt=180*$t/40075017,tn=Vt/Math.cos(Math.PI/180*this.lat);return Cr([this.lat-Vt,this.lng-tn],[this.lat+Vt,this.lng+tn])},clone:function(){return new Sr(this.lat,this.lng,this.alt)}};function rr($t,Vt,tn){return $t instanceof Sr?$t:on($t)&&typeof $t[0]!="object"?$t.length===3?new Sr($t[0],$t[1],$t[2]):$t.length===2?new Sr($t[0],$t[1]):null:$t==null?$t:typeof $t=="object"&&"lat"in $t?new Sr($t.lat,"lng"in $t?$t.lng:$t.lon,$t.alt):Vt===void 0?null:new Sr($t,Vt,tn)}var Fr={latLngToPoint:function($t,Vt){var tn=this.projection.project($t),pn=this.scale(Vt);return this.transformation._transform(tn,pn)},pointToLatLng:function($t,Vt){var tn=this.scale(Vt),pn=this.transformation.untransform($t,tn);return this.projection.unproject(pn)},project:function($t){return this.projection.project($t)},unproject:function($t){return this.projection.unproject($t)},scale:function($t){return 256*Math.pow(2,$t)},zoom:function($t){return Math.log($t/256)/Math.LN2},getProjectedBounds:function($t){if(this.infinite)return null;var Vt=this.projection.bounds,tn=this.scale($t),pn=this.transformation.transform(Vt.min,tn),In=this.transformation.transform(Vt.max,tn);return new dr(pn,In)},infinite:!1,wrapLatLng:function($t){var Vt=this.wrapLng?Rt($t.lng,this.wrapLng,!0):$t.lng,tn=this.wrapLat?Rt($t.lat,this.wrapLat,!0):$t.lat,pn=$t.alt;return new Sr(tn,Vt,pn)},wrapLatLngBounds:function($t){var Vt=$t.getCenter(),tn=this.wrapLatLng(Vt),pn=Vt.lat-tn.lat,In=Vt.lng-tn.lng;if(pn===0&&In===0)return $t;var Jn=$t.getSouthWest(),Tr=$t.getNorthEast(),Vr=new Sr(Jn.lat-pn,Jn.lng-In),Jr=new Sr(Tr.lat-pn,Tr.lng-In);return new ur(Vr,Jr)}},mr=bt({},Fr,{wrapLng:[-180,180],R:6371e3,distance:function($t,Vt){var tn=Math.PI/180,pn=$t.lat*tn,In=Vt.lat*tn,Jn=Math.sin((Vt.lat-$t.lat)*tn/2),Tr=Math.sin((Vt.lng-$t.lng)*tn/2),Vr=Jn*Jn+Math.cos(pn)*Math.cos(In)*Tr*Tr,Jr=2*Math.atan2(Math.sqrt(Vr),Math.sqrt(1-Vr));return this.R*Jr}}),_r=6378137,yr={R:_r,MAX_LATITUDE:85.0511287798,project:function($t){var Vt=Math.PI/180,tn=this.MAX_LATITUDE,pn=Math.max(Math.min(tn,$t.lat),-tn),In=Math.sin(pn*Vt);return new ir(this.R*$t.lng*Vt,this.R*Math.log((1+In)/(1-In))/2)},unproject:function($t){var Vt=180/Math.PI;return new Sr((2*Math.atan(Math.exp($t.y/this.R))-Math.PI/2)*Vt,$t.x*Vt/this.R)},bounds:function(){var $t=_r*Math.PI;return new dr([-$t,-$t],[$t,$t])}()};function pr($t,Vt,tn,pn){if(on($t)){this._a=$t[0],this._b=$t[1],this._c=$t[2],this._d=$t[3];return}this._a=$t,this._b=Vt,this._c=tn,this._d=pn}pr.prototype={transform:function($t,Vt){return this._transform($t.clone(),Vt)},_transform:function($t,Vt){return Vt=Vt||1,$t.x=Vt*(this._a*$t.x+this._b),$t.y=Vt*(this._c*$t.y+this._d),$t},untransform:function($t,Vt){return Vt=Vt||1,new ir(($t.x/Vt-this._b)/this._a,($t.y/Vt-this._d)/this._c)}};function Cn($t,Vt,tn,pn){return new pr($t,Vt,tn,pn)}var rn=bt({},mr,{code:"EPSG:3857",projection:yr,transformation:function(){var $t=.5/(Math.PI*yr.R);return Cn($t,.5,-$t,.5)}()}),dn=bt({},rn,{code:"EPSG:900913"});function fn($t){return document.createElementNS("http://www.w3.org/2000/svg",$t)}function On($t,Vt){var tn="",pn,In,Jn,Tr,Vr,Jr;for(pn=0,Jn=$t.length;pn<Jn;pn++){for(Vr=$t[pn],In=0,Tr=Vr.length;In<Tr;In++)Jr=Vr[In],tn+=(In?"L":"M")+Jr.x+" "+Jr.y;tn+=Vt?wi.svg?"z":"x":""}return tn||"M0 0"}var xn=document.documentElement.style,hr="ActiveXObject"in window,Nn=hr&&!document.addEventListener,Kn="msLaunchUri"in navigator&&!("documentMode"in document),Un=Ns("webkit"),sr=Ns("android"),ar=Ns("android 2")||Ns("android 3"),wr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vr=sr&&Ns("Google")&&wr<537&&!("AudioNode"in window),Rr=!!window.opera,ci=!Kn&&Ns("chrome"),mi=Ns("gecko")&&!Un&&!Rr&&!hr,si=!ci&&Ns("safari"),yi=Ns("phantom"),Ni="OTransition"in xn,Ii=navigator.platform.indexOf("Win")===0,Mi=hr&&"transition"in xn,Or="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ar,Ln="MozPerspective"in xn,En=!window.L_DISABLE_3D&&(Mi||Or||Ln)&&!Ni&&!yi,Wn=typeof orientation<"u"||Ns("mobile"),er=Wn&&Un,fr=Wn&&Or,Zr=!window.PointerEvent&&window.MSPointerEvent,gr=!!(window.PointerEvent||Zr),ti="ontouchstart"in window||!!window.TouchEvent,kr=!window.L_NO_TOUCH&&(ti||gr),ai=Wn&&Rr,ui=Wn&&mi,_i=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hi=function(){var $t=!1;try{var Vt=Object.defineProperty({},"passive",{get:function(){$t=!0}});window.addEventListener("testPassiveEventSupport",Dt,Vt),window.removeEventListener("testPassiveEventSupport",Dt,Vt)}catch{}return $t}(),ji=function(){return!!document.createElement("canvas").getContext}(),Ei=!!(document.createElementNS&&fn("svg").createSVGRect),Wi=!!Ei&&function(){var $t=document.createElement("div");return $t.innerHTML="<svg/>",($t.firstChild&&$t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),lo=!Ei&&function(){try{var $t=document.createElement("div");$t.innerHTML='<v:shape adj="1"/>';var Vt=$t.firstChild;return Vt.style.behavior="url(#default#VML)",Vt&&typeof Vt.adj=="object"}catch{return!1}}(),Xi=navigator.platform.indexOf("Mac")===0,Ga=navigator.platform.indexOf("Linux")===0;function Ns($t){return navigator.userAgent.toLowerCase().indexOf($t)>=0}var wi={ie:hr,ielt9:Nn,edge:Kn,webkit:Un,android:sr,android23:ar,androidStock:vr,opera:Rr,chrome:ci,gecko:mi,safari:si,phantom:yi,opera12:Ni,win:Ii,ie3d:Mi,webkit3d:Or,gecko3d:Ln,any3d:En,mobile:Wn,mobileWebkit:er,mobileWebkit3d:fr,msPointer:Zr,pointer:gr,touch:kr,touchNative:ti,mobileOpera:ai,mobileGecko:ui,retina:_i,passiveEvents:hi,canvas:ji,svg:Ei,vml:lo,inlineSvg:Wi,mac:Xi,linux:Ga},qi=wi.msPointer?"MSPointerDown":"pointerdown",$s=wi.msPointer?"MSPointerMove":"pointermove",xs=wi.msPointer?"MSPointerUp":"pointerup",fs=wi.msPointer?"MSPointerCancel":"pointercancel",Ts={touchstart:qi,touchmove:$s,touchend:xs,touchcancel:fs},ws={touchstart:us,touchmove:mo,touchend:mo,touchcancel:mo},Lr={},qr=!1;function Ir($t,Vt,tn){return Vt==="touchstart"&&xo(),ws[Vt]?(tn=ws[Vt].bind(this,tn),$t.addEventListener(Ts[Vt],tn,!1),tn):(console.warn("wrong event specified:",Vt),Dt)}function lr($t,Vt,tn){if(!Ts[Vt]){console.warn("wrong event specified:",Vt);return}$t.removeEventListener(Ts[Vt],tn,!1)}function zr($t){Lr[$t.pointerId]=$t}function ni($t){Lr[$t.pointerId]&&(Lr[$t.pointerId]=$t)}function fi($t){delete Lr[$t.pointerId]}function xo(){qr||(document.addEventListener(qi,zr,!0),document.addEventListener($s,ni,!0),document.addEventListener(xs,fi,!0),document.addEventListener(fs,fi,!0),qr=!0)}function mo($t,Vt){if(Vt.pointerType!==(Vt.MSPOINTER_TYPE_MOUSE||"mouse")){Vt.touches=[];for(var tn in Lr)Vt.touches.push(Lr[tn]);Vt.changedTouches=[Vt],$t(Vt)}}function us($t,Vt){Vt.MSPOINTER_TYPE_TOUCH&&Vt.pointerType===Vt.MSPOINTER_TYPE_TOUCH&&ua(Vt),mo($t,Vt)}function hs($t){var Vt={},tn,pn;for(pn in $t)tn=$t[pn],Vt[pn]=tn&&tn.bind?tn.bind($t):tn;return $t=Vt,Vt.type="dblclick",Vt.detail=2,Vt.isTrusted=!1,Vt._simulated=!0,Vt}var zo=200;function Is($t,Vt){$t.addEventListener("dblclick",Vt);var tn=0,pn;function In(Jn){if(Jn.detail!==1){pn=Jn.detail;return}if(!(Jn.pointerType==="mouse"||Jn.sourceCapabilities&&!Jn.sourceCapabilities.firesTouchEvents)){var Tr=cp(Jn);if(!(Tr.some(function(Jr){return Jr instanceof HTMLLabelElement&&Jr.attributes.for})&&!Tr.some(function(Jr){return Jr instanceof HTMLInputElement||Jr instanceof HTMLSelectElement}))){var Vr=Date.now();Vr-tn<=zo?(pn++,pn===2&&Vt(hs(Jn))):pn=1,tn=Vr}}}return $t.addEventListener("click",In),{dblclick:Vt,simDblclick:In}}function Ys($t,Vt){$t.removeEventListener("dblclick",Vt.dblclick),$t.removeEventListener("click",Vt.simDblclick)}var ca=tu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fi=tu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Zi=Fi==="webkitTransition"||Fi==="OTransition"?Fi+"End":"transitionend";function bo($t){return typeof $t=="string"?document.getElementById($t):$t}function bi($t,Vt){var tn=$t.style[Vt]||$t.currentStyle&&$t.currentStyle[Vt];if((!tn||tn==="auto")&&document.defaultView){var pn=document.defaultView.getComputedStyle($t,null);tn=pn?pn[Vt]:null}return tn==="auto"?null:tn}function Yi($t,Vt,tn){var pn=document.createElement($t);return pn.className=Vt||"",tn&&tn.appendChild(pn),pn}function br($t){var Vt=$t.parentNode;Vt&&Vt.removeChild($t)}function ll($t){for(;$t.firstChild;)$t.removeChild($t.firstChild)}function Pr($t){var Vt=$t.parentNode;Vt&&Vt.lastChild!==$t&&Vt.appendChild($t)}function ta($t){var Vt=$t.parentNode;Vt&&Vt.firstChild!==$t&&Vt.insertBefore($t,Vt.firstChild)}function Oc($t,Vt){if($t.classList!==void 0)return $t.classList.contains(Vt);var tn=Ai($t);return tn.length>0&&new RegExp("(^|\\s)"+Vt+"(\\s|$)").test(tn)}function Eo($t,Vt){if($t.classList!==void 0)for(var tn=Yt(Vt),pn=0,In=tn.length;pn<In;pn++)$t.classList.add(tn[pn]);else if(!Oc($t,Vt)){var Jn=Ai($t);Ah($t,(Jn?Jn+" ":"")+Vt)}}function ro($t,Vt){$t.classList!==void 0?$t.classList.remove(Vt):Ah($t,Ft((" "+Ai($t)+" ").replace(" "+Vt+" "," ")))}function Ah($t,Vt){$t.className.baseVal===void 0?$t.className=Vt:$t.className.baseVal=Vt}function Ai($t){return $t.correspondingElement&&($t=$t.correspondingElement),$t.className.baseVal===void 0?$t.className:$t.className.baseVal}function oo($t,Vt){"opacity"in $t.style?$t.style.opacity=Vt:"filter"in $t.style&&Yl($t,Vt)}function Yl($t,Vt){var tn=!1,pn="DXImageTransform.Microsoft.Alpha";try{tn=$t.filters.item(pn)}catch{if(Vt===1)return}Vt=Math.round(Vt*100),tn?(tn.Enabled=Vt!==100,tn.Opacity=Vt):$t.style.filter+=" progid:"+pn+"(opacity="+Vt+")"}function tu($t){for(var Vt=document.documentElement.style,tn=0;tn<$t.length;tn++)if($t[tn]in Vt)return $t[tn];return!1}function cc($t,Vt,tn){var pn=Vt||new ir(0,0);$t.style[ca]=(wi.ie3d?"translate("+pn.x+"px,"+pn.y+"px)":"translate3d("+pn.x+"px,"+pn.y+"px,0)")+(tn?" scale("+tn+")":"")}function Hs($t,Vt){$t._leaflet_pos=Vt,wi.any3d?cc($t,Vt):($t.style.left=Vt.x+"px",$t.style.top=Vt.y+"px")}function Po($t){return $t._leaflet_pos||new ir(0,0)}var Wa,na,$c;if("onselectstart"in document)Wa=function(){Co(window,"selectstart",ua)},na=function(){co(window,"selectstart",ua)};else{var Ba=tu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wa=function(){if(Ba){var $t=document.documentElement.style;$c=$t[Ba],$t[Ba]="none"}},na=function(){Ba&&(document.documentElement.style[Ba]=$c,$c=void 0)}}function Xl(){Co(window,"dragstart",ua)}function el(){co(window,"dragstart",ua)}var Yu,nu;function Su($t){for(;$t.tabIndex===-1;)$t=$t.parentNode;!$t.style||(cl(),Yu=$t,nu=$t.style.outlineStyle,$t.style.outlineStyle="none",Co(window,"keydown",cl))}function cl(){!Yu||(Yu.style.outlineStyle=nu,Yu=void 0,nu=void 0,co(window,"keydown",cl))}function cd($t){do $t=$t.parentNode;while((!$t.offsetWidth||!$t.offsetHeight)&&$t!==document.body);return $t}function Lh($t){var Vt=$t.getBoundingClientRect();return{x:Vt.width/$t.offsetWidth||1,y:Vt.height/$t.offsetHeight||1,boundingClientRect:Vt}}var Xu={__proto__:null,TRANSFORM:ca,TRANSITION:Fi,TRANSITION_END:Zi,get:bo,getStyle:bi,create:Yi,remove:br,empty:ll,toFront:Pr,toBack:ta,hasClass:Oc,addClass:Eo,removeClass:ro,setClass:Ah,getClass:Ai,setOpacity:oo,testProp:tu,setTransform:cc,setPosition:Hs,getPosition:Po,get disableTextSelection(){return Wa},get enableTextSelection(){return na},disableImageDrag:Xl,enableImageDrag:el,preventOutline:Su,restoreOutline:cl,getSizedParentNode:cd,getScale:Lh};function Co($t,Vt,tn,pn){if(Vt&&typeof Vt=="object")for(var In in Vt)ap($t,In,Vt[In],tn);else{Vt=Yt(Vt);for(var Jn=0,Tr=Vt.length;Jn<Tr;Jn++)ap($t,Vt[Jn],tn,pn)}return this}var uc="_leaflet_events";function co($t,Vt,tn,pn){if(arguments.length===1)Ml($t),delete $t[uc];else if(Vt&&typeof Vt=="object")for(var In in Vt)ud($t,In,Vt[In],tn);else if(Vt=Yt(Vt),arguments.length===2)Ml($t,function(Vr){return nn(Vt,Vr)!==-1});else for(var Jn=0,Tr=Vt.length;Jn<Tr;Jn++)ud($t,Vt[Jn],tn,pn);return this}function Ml($t,Vt){for(var tn in $t[uc]){var pn=tn.split(/\d/)[0];(!Vt||Vt(pn))&&ud($t,pn,null,null,tn)}}var sp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ap($t,Vt,tn,pn){var In=Vt+Lt(tn)+(pn?"_"+Lt(pn):"");if($t[uc]&&$t[uc][In])return this;var Jn=function(Vr){return tn.call(pn||$t,Vr||window.event)},Tr=Jn;!wi.touchNative&&wi.pointer&&Vt.indexOf("touch")===0?Jn=Ir($t,Vt,Jn):wi.touch&&Vt==="dblclick"?Jn=Is($t,Jn):"addEventListener"in $t?Vt==="touchstart"||Vt==="touchmove"||Vt==="wheel"||Vt==="mousewheel"?$t.addEventListener(sp[Vt]||Vt,Jn,wi.passiveEvents?{passive:!1}:!1):Vt==="mouseenter"||Vt==="mouseleave"?(Jn=function(Vr){Vr=Vr||window.event,Kl($t,Vr)&&Tr(Vr)},$t.addEventListener(sp[Vt],Jn,!1)):$t.addEventListener(Vt,Tr,!1):$t.attachEvent("on"+Vt,Jn),$t[uc]=$t[uc]||{},$t[uc][In]=Jn}function ud($t,Vt,tn,pn,In){In=In||Vt+Lt(tn)+(pn?"_"+Lt(pn):"");var Jn=$t[uc]&&$t[uc][In];if(!Jn)return this;!wi.touchNative&&wi.pointer&&Vt.indexOf("touch")===0?lr($t,Vt,Jn):wi.touch&&Vt==="dblclick"?Ys($t,Jn):"removeEventListener"in $t?$t.removeEventListener(sp[Vt]||Vt,Jn,!1):$t.detachEvent("on"+Vt,Jn),$t[uc][In]=null}function Zu($t){return $t.stopPropagation?$t.stopPropagation():$t.originalEvent?$t.originalEvent._stopped=!0:$t.cancelBubble=!0,this}function lp($t){return ap($t,"wheel",Zu),this}function Zl($t){return Co($t,"mousedown touchstart dblclick contextmenu",Zu),$t._leaflet_disable_click=!0,this}function ua($t){return $t.preventDefault?$t.preventDefault():$t.returnValue=!1,this}function Cu($t){return ua($t),Zu($t),this}function cp($t){if($t.composedPath)return $t.composedPath();for(var Vt=[],tn=$t.target;tn;)Vt.push(tn),tn=tn.parentNode;return Vt}function mg($t,Vt){if(!Vt)return new ir($t.clientX,$t.clientY);var tn=Lh(Vt),pn=tn.boundingClientRect;return new ir(($t.clientX-pn.left)/tn.x-Vt.clientLeft,($t.clientY-pn.top)/tn.y-Vt.clientTop)}var Pm=wi.linux&&wi.chrome?window.devicePixelRatio:wi.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yg($t){return wi.edge?$t.wheelDeltaY/2:$t.deltaY&&$t.deltaMode===0?-$t.deltaY/Pm:$t.deltaY&&$t.deltaMode===1?-$t.deltaY*20:$t.deltaY&&$t.deltaMode===2?-$t.deltaY*60:$t.deltaX||$t.deltaZ?0:$t.wheelDelta?($t.wheelDeltaY||$t.wheelDelta)/2:$t.detail&&Math.abs($t.detail)<32765?-$t.detail*20:$t.detail?$t.detail/-32765*60:0}function Kl($t,Vt){var tn=Vt.relatedTarget;if(!tn)return!0;try{for(;tn&&tn!==$t;)tn=tn.parentNode}catch{return!1}return tn!==$t}var ul={__proto__:null,on:Co,off:co,stopPropagation:Zu,disableScrollPropagation:lp,disableClickPropagation:Zl,preventDefault:ua,stop:Cu,getPropagationPath:cp,getMousePosition:mg,getWheelDelta:yg,isExternalTarget:Kl,addListener:Co,removeListener:co},Qd=zn.extend({run:function($t,Vt,tn,pn){this.stop(),this._el=$t,this._inProgress=!0,this._duration=tn||.25,this._easeOutPower=1/Math.max(pn||.5,.2),this._startPos=Po($t),this._offset=Vt.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=$n(this._animate,this),this._step()},_step:function($t){var Vt=+new Date-this._startTime,tn=this._duration*1e3;Vt<tn?this._runFrame(this._easeOut(Vt/tn),$t):(this._runFrame(1),this._complete())},_runFrame:function($t,Vt){var tn=this._startPos.add(this._offset.multiplyBy($t));Vt&&tn._round(),Hs(this._el,tn),this.fire("step")},_complete:function(){cn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function($t){return 1-Math.pow(1-$t,this._easeOutPower)}}),ds=zn.extend({options:{crs:rn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function($t,Vt){Vt=Zt(this,Vt),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer($t),this._initLayout(),this._onResize=Et(this._onResize,this),this._initEvents(),Vt.maxBounds&&this.setMaxBounds(Vt.maxBounds),Vt.zoom!==void 0&&(this._zoom=this._limitZoom(Vt.zoom)),Vt.center&&Vt.zoom!==void 0&&this.setView(rr(Vt.center),Vt.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fi&&wi.any3d&&!wi.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Co(this._proxy,Zi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function($t,Vt,tn){if(Vt=Vt===void 0?this._zoom:this._limitZoom(Vt),$t=this._limitCenter(rr($t),Vt,this.options.maxBounds),tn=tn||{},this._stop(),this._loaded&&!tn.reset&&tn!==!0){tn.animate!==void 0&&(tn.zoom=bt({animate:tn.animate},tn.zoom),tn.pan=bt({animate:tn.animate,duration:tn.duration},tn.pan));var pn=this._zoom!==Vt?this._tryAnimatedZoom&&this._tryAnimatedZoom($t,Vt,tn.zoom):this._tryAnimatedPan($t,tn.pan);if(pn)return clearTimeout(this._sizeTimer),this}return this._resetView($t,Vt,tn.pan&&tn.pan.noMoveStart),this},setZoom:function($t,Vt){return this._loaded?this.setView(this.getCenter(),$t,{zoom:Vt}):(this._zoom=$t,this)},zoomIn:function($t,Vt){return $t=$t||(wi.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+$t,Vt)},zoomOut:function($t,Vt){return $t=$t||(wi.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-$t,Vt)},setZoomAround:function($t,Vt,tn){var pn=this.getZoomScale(Vt),In=this.getSize().divideBy(2),Jn=$t instanceof ir?$t:this.latLngToContainerPoint($t),Tr=Jn.subtract(In).multiplyBy(1-1/pn),Vr=this.containerPointToLatLng(In.add(Tr));return this.setView(Vr,Vt,{zoom:tn})},_getBoundsCenterZoom:function($t,Vt){Vt=Vt||{},$t=$t.getBounds?$t.getBounds():Cr($t);var tn=nr(Vt.paddingTopLeft||Vt.padding||[0,0]),pn=nr(Vt.paddingBottomRight||Vt.padding||[0,0]),In=this.getBoundsZoom($t,!1,tn.add(pn));if(In=typeof Vt.maxZoom=="number"?Math.min(Vt.maxZoom,In):In,In===1/0)return{center:$t.getCenter(),zoom:In};var Jn=pn.subtract(tn).divideBy(2),Tr=this.project($t.getSouthWest(),In),Vr=this.project($t.getNorthEast(),In),Jr=this.unproject(Tr.add(Vr).divideBy(2).add(Jn),In);return{center:Jr,zoom:In}},fitBounds:function($t,Vt){if($t=Cr($t),!$t.isValid())throw new Error("Bounds are not valid.");var tn=this._getBoundsCenterZoom($t,Vt);return this.setView(tn.center,tn.zoom,Vt)},fitWorld:function($t){return this.fitBounds([[-90,-180],[90,180]],$t)},panTo:function($t,Vt){return this.setView($t,this._zoom,{pan:Vt})},panBy:function($t,Vt){if($t=nr($t).round(),Vt=Vt||{},!$t.x&&!$t.y)return this.fire("moveend");if(Vt.animate!==!0&&!this.getSize().contains($t))return this._resetView(this.unproject(this.project(this.getCenter()).add($t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qd,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),Vt.noMoveStart||this.fire("movestart"),Vt.animate!==!1){Eo(this._mapPane,"leaflet-pan-anim");var tn=this._getMapPanePos().subtract($t).round();this._panAnim.run(this._mapPane,tn,Vt.duration||.25,Vt.easeLinearity)}else this._rawPanBy($t),this.fire("move").fire("moveend");return this},flyTo:function($t,Vt,tn){if(tn=tn||{},tn.animate===!1||!wi.any3d)return this.setView($t,Vt,tn);this._stop();var pn=this.project(this.getCenter()),In=this.project($t),Jn=this.getSize(),Tr=this._zoom;$t=rr($t),Vt=Vt===void 0?Tr:Vt;var Vr=Math.max(Jn.x,Jn.y),Jr=Vr*this.getZoomScale(Tr,Vt),oi=In.distanceTo(pn)||1,$i=1.42,uo=$i*$i;function Oo(da){var Ed=da?-1:1,Pg=da?Jr:Vr,Vh=Jr*Jr-Vr*Vr+Ed*uo*uo*oi*oi,vf=2*Pg*uo*oi,Sd=Vh/vf,_f=Math.sqrt(Sd*Sd+1)-Sd,sh=_f<1e-9?-18:Math.log(_f);return sh}function tl(da){return(Math.exp(da)-Math.exp(-da))/2}function ha(da){return(Math.exp(da)+Math.exp(-da))/2}function nl(da){return tl(da)/ha(da)}var dl=Oo(0);function Lu(da){return Vr*(ha(dl)/ha(dl+$i*da))}function Ig(da){return Vr*(ha(dl)*nl(dl+$i*da)-tl(dl))/uo}function xp(da){return 1-Math.pow(1-da,1.5)}var ih=Date.now(),oh=(Oo(1)-dl)/$i,wp=tn.duration?1e3*tn.duration:1e3*oh*.8;function su(){var da=(Date.now()-ih)/wp,Ed=xp(da)*oh;da<=1?(this._flyToFrame=$n(su,this),this._move(this.unproject(pn.add(In.subtract(pn).multiplyBy(Ig(Ed)/oi)),Tr),this.getScaleZoom(Vr/Lu(Ed),Tr),{flyTo:!0})):this._move($t,Vt)._moveEnd(!0)}return this._moveStart(!0,tn.noMoveStart),su.call(this),this},flyToBounds:function($t,Vt){var tn=this._getBoundsCenterZoom($t,Vt);return this.flyTo(tn.center,tn.zoom,Vt)},setMaxBounds:function($t){return $t=Cr($t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),$t.isValid()?(this.options.maxBounds=$t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function($t){var Vt=this.options.minZoom;return this.options.minZoom=$t,this._loaded&&Vt!==$t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom($t):this},setMaxZoom:function($t){var Vt=this.options.maxZoom;return this.options.maxZoom=$t,this._loaded&&Vt!==$t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom($t):this},panInsideBounds:function($t,Vt){this._enforcingBounds=!0;var tn=this.getCenter(),pn=this._limitCenter(tn,this._zoom,Cr($t));return tn.equals(pn)||this.panTo(pn,Vt),this._enforcingBounds=!1,this},panInside:function($t,Vt){Vt=Vt||{};var tn=nr(Vt.paddingTopLeft||Vt.padding||[0,0]),pn=nr(Vt.paddingBottomRight||Vt.padding||[0,0]),In=this.project(this.getCenter()),Jn=this.project($t),Tr=this.getPixelBounds(),Vr=or([Tr.min.add(tn),Tr.max.subtract(pn)]),Jr=Vr.getSize();if(!Vr.contains(Jn)){this._enforcingBounds=!0;var oi=Jn.subtract(Vr.getCenter()),$i=Vr.extend(Jn).getSize().subtract(Jr);In.x+=oi.x<0?-$i.x:$i.x,In.y+=oi.y<0?-$i.y:$i.y,this.panTo(this.unproject(In),Vt),this._enforcingBounds=!1}return this},invalidateSize:function($t){if(!this._loaded)return this;$t=bt({animate:!1,pan:!0},$t===!0?{animate:!0}:$t);var Vt=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var tn=this.getSize(),pn=Vt.divideBy(2).round(),In=tn.divideBy(2).round(),Jn=pn.subtract(In);return!Jn.x&&!Jn.y?this:($t.animate&&$t.pan?this.panBy(Jn):($t.pan&&this._rawPanBy(Jn),this.fire("move"),$t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Et(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:Vt,newSize:tn}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function($t){if($t=this._locateOptions=bt({timeout:1e4,watch:!1},$t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var Vt=Et(this._handleGeolocationResponse,this),tn=Et(this._handleGeolocationError,this);return $t.watch?this._locationWatchId=navigator.geolocation.watchPosition(Vt,tn,$t):navigator.geolocation.getCurrentPosition(Vt,tn,$t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function($t){if(!!this._container._leaflet_id){var Vt=$t.code,tn=$t.message||(Vt===1?"permission denied":Vt===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:Vt,message:"Geolocation error: "+tn+"."})}},_handleGeolocationResponse:function($t){if(!!this._container._leaflet_id){var Vt=$t.coords.latitude,tn=$t.coords.longitude,pn=new Sr(Vt,tn),In=pn.toBounds($t.coords.accuracy*2),Jn=this._locateOptions;if(Jn.setView){var Tr=this.getBoundsZoom(In);this.setView(pn,Jn.maxZoom?Math.min(Tr,Jn.maxZoom):Tr)}var Vr={latlng:pn,bounds:In,timestamp:$t.timestamp};for(var Jr in $t.coords)typeof $t.coords[Jr]=="number"&&(Vr[Jr]=$t.coords[Jr]);this.fire("locationfound",Vr)}},addHandler:function($t,Vt){if(!Vt)return this;var tn=this[$t]=new Vt(this);return this._handlers.push(tn),this.options[$t]&&tn.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),br(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(cn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var $t;for($t in this._layers)this._layers[$t].remove();for($t in this._panes)br(this._panes[$t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function($t,Vt){var tn="leaflet-pane"+($t?" leaflet-"+$t.replace("Pane","")+"-pane":""),pn=Yi("div",tn,Vt||this._mapPane);return $t&&(this._panes[$t]=pn),pn},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var $t=this.getPixelBounds(),Vt=this.unproject($t.getBottomLeft()),tn=this.unproject($t.getTopRight());return new ur(Vt,tn)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function($t,Vt,tn){$t=Cr($t),tn=nr(tn||[0,0]);var pn=this.getZoom()||0,In=this.getMinZoom(),Jn=this.getMaxZoom(),Tr=$t.getNorthWest(),Vr=$t.getSouthEast(),Jr=this.getSize().subtract(tn),oi=or(this.project(Vr,pn),this.project(Tr,pn)).getSize(),$i=wi.any3d?this.options.zoomSnap:1,uo=Jr.x/oi.x,Oo=Jr.y/oi.y,tl=Vt?Math.max(uo,Oo):Math.min(uo,Oo);return pn=this.getScaleZoom(tl,pn),$i&&(pn=Math.round(pn/($i/100))*($i/100),pn=Vt?Math.ceil(pn/$i)*$i:Math.floor(pn/$i)*$i),Math.max(In,Math.min(Jn,pn))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ir(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function($t,Vt){var tn=this._getTopLeftPoint($t,Vt);return new dr(tn,tn.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function($t){return this.options.crs.getProjectedBounds($t===void 0?this.getZoom():$t)},getPane:function($t){return typeof $t=="string"?this._panes[$t]:$t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function($t,Vt){var tn=this.options.crs;return Vt=Vt===void 0?this._zoom:Vt,tn.scale($t)/tn.scale(Vt)},getScaleZoom:function($t,Vt){var tn=this.options.crs;Vt=Vt===void 0?this._zoom:Vt;var pn=tn.zoom($t*tn.scale(Vt));return isNaN(pn)?1/0:pn},project:function($t,Vt){return Vt=Vt===void 0?this._zoom:Vt,this.options.crs.latLngToPoint(rr($t),Vt)},unproject:function($t,Vt){return Vt=Vt===void 0?this._zoom:Vt,this.options.crs.pointToLatLng(nr($t),Vt)},layerPointToLatLng:function($t){var Vt=nr($t).add(this.getPixelOrigin());return this.unproject(Vt)},latLngToLayerPoint:function($t){var Vt=this.project(rr($t))._round();return Vt._subtract(this.getPixelOrigin())},wrapLatLng:function($t){return this.options.crs.wrapLatLng(rr($t))},wrapLatLngBounds:function($t){return this.options.crs.wrapLatLngBounds(Cr($t))},distance:function($t,Vt){return this.options.crs.distance(rr($t),rr(Vt))},containerPointToLayerPoint:function($t){return nr($t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function($t){return nr($t).add(this._getMapPanePos())},containerPointToLatLng:function($t){var Vt=this.containerPointToLayerPoint(nr($t));return this.layerPointToLatLng(Vt)},latLngToContainerPoint:function($t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(rr($t)))},mouseEventToContainerPoint:function($t){return mg($t,this._container)},mouseEventToLayerPoint:function($t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint($t))},mouseEventToLatLng:function($t){return this.layerPointToLatLng(this.mouseEventToLayerPoint($t))},_initContainer:function($t){var Vt=this._container=bo($t);if(Vt){if(Vt._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Co(Vt,"scroll",this._onScroll,this),this._containerId=Lt(Vt)},_initLayout:function(){var $t=this._container;this._fadeAnimated=this.options.fadeAnimation&&wi.any3d,Eo($t,"leaflet-container"+(wi.touch?" leaflet-touch":"")+(wi.retina?" leaflet-retina":"")+(wi.ielt9?" leaflet-oldie":"")+(wi.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var Vt=bi($t,"position");Vt!=="absolute"&&Vt!=="relative"&&Vt!=="fixed"&&Vt!=="sticky"&&($t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var $t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Hs(this._mapPane,new ir(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Eo($t.markerPane,"leaflet-zoom-hide"),Eo($t.shadowPane,"leaflet-zoom-hide"))},_resetView:function($t,Vt,tn){Hs(this._mapPane,new ir(0,0));var pn=!this._loaded;this._loaded=!0,Vt=this._limitZoom(Vt),this.fire("viewprereset");var In=this._zoom!==Vt;this._moveStart(In,tn)._move($t,Vt)._moveEnd(In),this.fire("viewreset"),pn&&this.fire("load")},_moveStart:function($t,Vt){return $t&&this.fire("zoomstart"),Vt||this.fire("movestart"),this},_move:function($t,Vt,tn,pn){Vt===void 0&&(Vt=this._zoom);var In=this._zoom!==Vt;return this._zoom=Vt,this._lastCenter=$t,this._pixelOrigin=this._getNewPixelOrigin($t),pn?tn&&tn.pinch&&this.fire("zoom",tn):((In||tn&&tn.pinch)&&this.fire("zoom",tn),this.fire("move",tn)),this},_moveEnd:function($t){return $t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return cn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function($t){Hs(this._mapPane,this._getMapPanePos().subtract($t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function($t){this._targets={},this._targets[Lt(this._container)]=this;var Vt=$t?co:Co;Vt(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&Vt(window,"resize",this._onResize,this),wi.any3d&&this.options.transform3DLimit&&($t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){cn(this._resizeRequest),this._resizeRequest=$n(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var $t=this._getMapPanePos();Math.max(Math.abs($t.x),Math.abs($t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function($t,Vt){for(var tn=[],pn,In=Vt==="mouseout"||Vt==="mouseover",Jn=$t.target||$t.srcElement,Tr=!1;Jn;){if(pn=this._targets[Lt(Jn)],pn&&(Vt==="click"||Vt==="preclick")&&this._draggableMoved(pn)){Tr=!0;break}if(pn&&pn.listens(Vt,!0)&&(In&&!Kl(Jn,$t)||(tn.push(pn),In))||Jn===this._container)break;Jn=Jn.parentNode}return!tn.length&&!Tr&&!In&&this.listens(Vt,!0)&&(tn=[this]),tn},_isClickDisabled:function($t){for(;$t&&$t!==this._container;){if($t._leaflet_disable_click)return!0;$t=$t.parentNode}},_handleDOMEvent:function($t){var Vt=$t.target||$t.srcElement;if(!(!this._loaded||Vt._leaflet_disable_events||$t.type==="click"&&this._isClickDisabled(Vt))){var tn=$t.type;tn==="mousedown"&&Su(Vt),this._fireDOMEvent($t,tn)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function($t,Vt,tn){if($t.type==="click"){var pn=bt({},$t);pn.type="preclick",this._fireDOMEvent(pn,pn.type,tn)}var In=this._findEventTargets($t,Vt);if(tn){for(var Jn=[],Tr=0;Tr<tn.length;Tr++)tn[Tr].listens(Vt,!0)&&Jn.push(tn[Tr]);In=Jn.concat(In)}if(!!In.length){Vt==="contextmenu"&&ua($t);var Vr=In[0],Jr={originalEvent:$t};if($t.type!=="keypress"&&$t.type!=="keydown"&&$t.type!=="keyup"){var oi=Vr.getLatLng&&(!Vr._radius||Vr._radius<=10);Jr.containerPoint=oi?this.latLngToContainerPoint(Vr.getLatLng()):this.mouseEventToContainerPoint($t),Jr.layerPoint=this.containerPointToLayerPoint(Jr.containerPoint),Jr.latlng=oi?Vr.getLatLng():this.layerPointToLatLng(Jr.layerPoint)}for(Tr=0;Tr<In.length;Tr++)if(In[Tr].fire(Vt,Jr,!0),Jr.originalEvent._stopped||In[Tr].options.bubblingMouseEvents===!1&&nn(this._mouseEvents,Vt)!==-1)return}},_draggableMoved:function($t){return $t=$t.dragging&&$t.dragging.enabled()?$t:this,$t.dragging&&$t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var $t=0,Vt=this._handlers.length;$t<Vt;$t++)this._handlers[$t].disable()},whenReady:function($t,Vt){return this._loaded?$t.call(Vt||this,{target:this}):this.on("load",$t,Vt),this},_getMapPanePos:function(){return Po(this._mapPane)||new ir(0,0)},_moved:function(){var $t=this._getMapPanePos();return $t&&!$t.equals([0,0])},_getTopLeftPoint:function($t,Vt){var tn=$t&&Vt!==void 0?this._getNewPixelOrigin($t,Vt):this.getPixelOrigin();return tn.subtract(this._getMapPanePos())},_getNewPixelOrigin:function($t,Vt){var tn=this.getSize()._divideBy(2);return this.project($t,Vt)._subtract(tn)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function($t,Vt,tn){var pn=this._getNewPixelOrigin(tn,Vt);return this.project($t,Vt)._subtract(pn)},_latLngBoundsToNewLayerBounds:function($t,Vt,tn){var pn=this._getNewPixelOrigin(tn,Vt);return or([this.project($t.getSouthWest(),Vt)._subtract(pn),this.project($t.getNorthWest(),Vt)._subtract(pn),this.project($t.getSouthEast(),Vt)._subtract(pn),this.project($t.getNorthEast(),Vt)._subtract(pn)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function($t){return this.latLngToLayerPoint($t).subtract(this._getCenterLayerPoint())},_limitCenter:function($t,Vt,tn){if(!tn)return $t;var pn=this.project($t,Vt),In=this.getSize().divideBy(2),Jn=new dr(pn.subtract(In),pn.add(In)),Tr=this._getBoundsOffset(Jn,tn,Vt);return Math.abs(Tr.x)<=1&&Math.abs(Tr.y)<=1?$t:this.unproject(pn.add(Tr),Vt)},_limitOffset:function($t,Vt){if(!Vt)return $t;var tn=this.getPixelBounds(),pn=new dr(tn.min.add($t),tn.max.add($t));return $t.add(this._getBoundsOffset(pn,Vt))},_getBoundsOffset:function($t,Vt,tn){var pn=or(this.project(Vt.getNorthEast(),tn),this.project(Vt.getSouthWest(),tn)),In=pn.min.subtract($t.min),Jn=pn.max.subtract($t.max),Tr=this._rebound(In.x,-Jn.x),Vr=this._rebound(In.y,-Jn.y);return new ir(Tr,Vr)},_rebound:function($t,Vt){return $t+Vt>0?Math.round($t-Vt)/2:Math.max(0,Math.ceil($t))-Math.max(0,Math.floor(Vt))},_limitZoom:function($t){var Vt=this.getMinZoom(),tn=this.getMaxZoom(),pn=wi.any3d?this.options.zoomSnap:1;return pn&&($t=Math.round($t/pn)*pn),Math.max(Vt,Math.min(tn,$t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ro(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function($t,Vt){var tn=this._getCenterOffset($t)._trunc();return(Vt&&Vt.animate)!==!0&&!this.getSize().contains(tn)?!1:(this.panBy(tn,Vt),!0)},_createAnimProxy:function(){var $t=this._proxy=Yi("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild($t),this.on("zoomanim",function(Vt){var tn=ca,pn=this._proxy.style[tn];cc(this._proxy,this.project(Vt.center,Vt.zoom),this.getZoomScale(Vt.zoom,1)),pn===this._proxy.style[tn]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){br(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var $t=this.getCenter(),Vt=this.getZoom();cc(this._proxy,this.project($t,Vt),this.getZoomScale(Vt,1))},_catchTransitionEnd:function($t){this._animatingZoom&&$t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function($t,Vt,tn){if(this._animatingZoom)return!0;if(tn=tn||{},!this._zoomAnimated||tn.animate===!1||this._nothingToAnimate()||Math.abs(Vt-this._zoom)>this.options.zoomAnimationThreshold)return!1;var pn=this.getZoomScale(Vt),In=this._getCenterOffset($t)._divideBy(1-1/pn);return tn.animate!==!0&&!this.getSize().contains(In)?!1:($n(function(){this._moveStart(!0,tn.noMoveStart||!1)._animateZoom($t,Vt,!0)},this),!0)},_animateZoom:function($t,Vt,tn,pn){!this._mapPane||(tn&&(this._animatingZoom=!0,this._animateToCenter=$t,this._animateToZoom=Vt,Eo(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:$t,zoom:Vt,noUpdate:pn}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Et(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&ro(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Om($t,Vt){return new ds($t,Vt)}var wl=an.extend({options:{position:"topright"},initialize:function($t){Zt(this,$t)},getPosition:function(){return this.options.position},setPosition:function($t){var Vt=this._map;return Vt&&Vt.removeControl(this),this.options.position=$t,Vt&&Vt.addControl(this),this},getContainer:function(){return this._container},addTo:function($t){this.remove(),this._map=$t;var Vt=this._container=this.onAdd($t),tn=this.getPosition(),pn=$t._controlCorners[tn];return Eo(Vt,"leaflet-control"),tn.indexOf("bottom")!==-1?pn.insertBefore(Vt,pn.firstChild):pn.appendChild(Vt),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(br(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function($t){this._map&&$t&&$t.screenX>0&&$t.screenY>0&&this._map.getContainer().focus()}}),Ih=function($t){return new wl($t)};ds.include({addControl:function($t){return $t.addTo(this),this},removeControl:function($t){return $t.remove(),this},_initControlPos:function(){var $t=this._controlCorners={},Vt="leaflet-",tn=this._controlContainer=Yi("div",Vt+"control-container",this._container);function pn(In,Jn){var Tr=Vt+In+" "+Vt+Jn;$t[In+Jn]=Yi("div",Tr,tn)}pn("top","left"),pn("top","right"),pn("bottom","left"),pn("bottom","right")},_clearControlPos:function(){for(var $t in this._controlCorners)br(this._controlCorners[$t]);br(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var hd=wl.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function($t,Vt,tn,pn){return tn<pn?-1:pn<tn?1:0}},initialize:function($t,Vt,tn){Zt(this,tn),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var pn in $t)this._addLayer($t[pn],pn);for(pn in Vt)this._addLayer(Vt[pn],pn,!0)},onAdd:function($t){this._initLayout(),this._update(),this._map=$t,$t.on("zoomend",this._checkDisabledLayers,this);for(var Vt=0;Vt<this._layers.length;Vt++)this._layers[Vt].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function($t){return wl.prototype.addTo.call(this,$t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var $t=0;$t<this._layers.length;$t++)this._layers[$t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function($t,Vt){return this._addLayer($t,Vt),this._map?this._update():this},addOverlay:function($t,Vt){return this._addLayer($t,Vt,!0),this._map?this._update():this},removeLayer:function($t){$t.off("add remove",this._onLayerChange,this);var Vt=this._getLayer(Lt($t));return Vt&&this._layers.splice(this._layers.indexOf(Vt),1),this._map?this._update():this},expand:function(){Eo(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var $t=this._map.getSize().y-(this._container.offsetTop+50);return $t<this._section.clientHeight?(Eo(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=$t+"px"):ro(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ro(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var $t="leaflet-control-layers",Vt=this._container=Yi("div",$t),tn=this.options.collapsed;Vt.setAttribute("aria-haspopup",!0),Zl(Vt),lp(Vt);var pn=this._section=Yi("section",$t+"-list");tn&&(this._map.on("click",this.collapse,this),Co(Vt,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var In=this._layersLink=Yi("a",$t+"-toggle",Vt);In.href="#",In.title="Layers",In.setAttribute("role","button"),Co(In,{keydown:function(Jn){Jn.keyCode===13&&this._expandSafely()},click:function(Jn){ua(Jn),this._expandSafely()}},this),tn||this.expand(),this._baseLayersList=Yi("div",$t+"-base",pn),this._separator=Yi("div",$t+"-separator",pn),this._overlaysList=Yi("div",$t+"-overlays",pn),Vt.appendChild(pn)},_getLayer:function($t){for(var Vt=0;Vt<this._layers.length;Vt++)if(this._layers[Vt]&&Lt(this._layers[Vt].layer)===$t)return this._layers[Vt]},_addLayer:function($t,Vt,tn){this._map&&$t.on("add remove",this._onLayerChange,this),this._layers.push({layer:$t,name:Vt,overlay:tn}),this.options.sortLayers&&this._layers.sort(Et(function(pn,In){return this.options.sortFunction(pn.layer,In.layer,pn.name,In.name)},this)),this.options.autoZIndex&&$t.setZIndex&&(this._lastZIndex++,$t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ll(this._baseLayersList),ll(this._overlaysList),this._layerControlInputs=[];var $t,Vt,tn,pn,In=0;for(tn=0;tn<this._layers.length;tn++)pn=this._layers[tn],this._addItem(pn),Vt=Vt||pn.overlay,$t=$t||!pn.overlay,In+=pn.overlay?0:1;return this.options.hideSingleBase&&($t=$t&&In>1,this._baseLayersList.style.display=$t?"":"none"),this._separator.style.display=Vt&&$t?"":"none",this},_onLayerChange:function($t){this._handlingClick||this._update();var Vt=this._getLayer(Lt($t.target)),tn=Vt.overlay?$t.type==="add"?"overlayadd":"overlayremove":$t.type==="add"?"baselayerchange":null;tn&&this._map.fire(tn,Vt)},_createRadioElement:function($t,Vt){var tn='<input type="radio" class="leaflet-control-layers-selector" name="'+$t+'"'+(Vt?' checked="checked"':"")+"/>",pn=document.createElement("div");return pn.innerHTML=tn,pn.firstChild},_addItem:function($t){var Vt=document.createElement("label"),tn=this._map.hasLayer($t.layer),pn;$t.overlay?(pn=document.createElement("input"),pn.type="checkbox",pn.className="leaflet-control-layers-selector",pn.defaultChecked=tn):pn=this._createRadioElement("leaflet-base-layers_"+Lt(this),tn),this._layerControlInputs.push(pn),pn.layerId=Lt($t.layer),Co(pn,"click",this._onInputClick,this);var In=document.createElement("span");In.innerHTML=" "+$t.name;var Jn=document.createElement("span");Vt.appendChild(Jn),Jn.appendChild(pn),Jn.appendChild(In);var Tr=$t.overlay?this._overlaysList:this._baseLayersList;return Tr.appendChild(Vt),this._checkDisabledLayers(),Vt},_onInputClick:function(){if(!this._preventClick){var $t=this._layerControlInputs,Vt,tn,pn=[],In=[];this._handlingClick=!0;for(var Jn=$t.length-1;Jn>=0;Jn--)Vt=$t[Jn],tn=this._getLayer(Vt.layerId).layer,Vt.checked?pn.push(tn):Vt.checked||In.push(tn);for(Jn=0;Jn<In.length;Jn++)this._map.hasLayer(In[Jn])&&this._map.removeLayer(In[Jn]);for(Jn=0;Jn<pn.length;Jn++)this._map.hasLayer(pn[Jn])||this._map.addLayer(pn[Jn]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var $t=this._layerControlInputs,Vt,tn,pn=this._map.getZoom(),In=$t.length-1;In>=0;In--)Vt=$t[In],tn=this._getLayer(Vt.layerId).layer,Vt.disabled=tn.options.minZoom!==void 0&&pn<tn.options.minZoom||tn.options.maxZoom!==void 0&&pn>tn.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var $t=this._section;this._preventClick=!0,Co($t,"click",ua),this.expand();var Vt=this;setTimeout(function(){co($t,"click",ua),Vt._preventClick=!1})}}),dd=function($t,Vt,tn){return new hd($t,Vt,tn)},fd=wl.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function($t){var Vt="leaflet-control-zoom",tn=Yi("div",Vt+" leaflet-bar"),pn=this.options;return this._zoomInButton=this._createButton(pn.zoomInText,pn.zoomInTitle,Vt+"-in",tn,this._zoomIn),this._zoomOutButton=this._createButton(pn.zoomOutText,pn.zoomOutTitle,Vt+"-out",tn,this._zoomOut),this._updateDisabled(),$t.on("zoomend zoomlevelschange",this._updateDisabled,this),tn},onRemove:function($t){$t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function($t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*($t.shiftKey?3:1))},_zoomOut:function($t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*($t.shiftKey?3:1))},_createButton:function($t,Vt,tn,pn,In){var Jn=Yi("a",tn,pn);return Jn.innerHTML=$t,Jn.href="#",Jn.title=Vt,Jn.setAttribute("role","button"),Jn.setAttribute("aria-label",Vt),Zl(Jn),Co(Jn,"click",Cu),Co(Jn,"click",In,this),Co(Jn,"click",this._refocusOnMap,this),Jn},_updateDisabled:function(){var $t=this._map,Vt="leaflet-disabled";ro(this._zoomInButton,Vt),ro(this._zoomOutButton,Vt),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||$t._zoom===$t.getMinZoom())&&(Eo(this._zoomOutButton,Vt),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||$t._zoom===$t.getMaxZoom())&&(Eo(this._zoomInButton,Vt),this._zoomInButton.setAttribute("aria-disabled","true"))}});ds.mergeOptions({zoomControl:!0}),ds.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fd,this.addControl(this.zoomControl))});var $m=function($t){return new fd($t)},vg=wl.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function($t){var Vt="leaflet-control-scale",tn=Yi("div",Vt),pn=this.options;return this._addScales(pn,Vt+"-line",tn),$t.on(pn.updateWhenIdle?"moveend":"move",this._update,this),$t.whenReady(this._update,this),tn},onRemove:function($t){$t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function($t,Vt,tn){$t.metric&&(this._mScale=Yi("div",Vt,tn)),$t.imperial&&(this._iScale=Yi("div",Vt,tn))},_update:function(){var $t=this._map,Vt=$t.getSize().y/2,tn=$t.distance($t.containerPointToLatLng([0,Vt]),$t.containerPointToLatLng([this.options.maxWidth,Vt]));this._updateScales(tn)},_updateScales:function($t){this.options.metric&&$t&&this._updateMetric($t),this.options.imperial&&$t&&this._updateImperial($t)},_updateMetric:function($t){var Vt=this._getRoundNum($t),tn=Vt<1e3?Vt+" m":Vt/1e3+" km";this._updateScale(this._mScale,tn,Vt/$t)},_updateImperial:function($t){var Vt=$t*3.2808399,tn,pn,In;Vt>5280?(tn=Vt/5280,pn=this._getRoundNum(tn),this._updateScale(this._iScale,pn+" mi",pn/tn)):(In=this._getRoundNum(Vt),this._updateScale(this._iScale,In+" ft",In/Vt))},_updateScale:function($t,Vt,tn){$t.style.width=Math.round(this.options.maxWidth*tn)+"px",$t.innerHTML=Vt},_getRoundNum:function($t){var Vt=Math.pow(10,(Math.floor($t)+"").length-1),tn=$t/Vt;return tn=tn>=10?10:tn>=5?5:tn>=3?3:tn>=2?2:1,Vt*tn}}),_g=function($t){return new vg($t)},up='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ef=wl.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(wi.inlineSvg?up+" ":"")+"Leaflet</a>"},initialize:function($t){Zt(this,$t),this._attributions={}},onAdd:function($t){$t.attributionControl=this,this._container=Yi("div","leaflet-control-attribution"),Zl(this._container);for(var Vt in $t._layers)$t._layers[Vt].getAttribution&&this.addAttribution($t._layers[Vt].getAttribution());return this._update(),$t.on("layeradd",this._addAttribution,this),this._container},onRemove:function($t){$t.off("layeradd",this._addAttribution,this)},_addAttribution:function($t){$t.layer.getAttribution&&(this.addAttribution($t.layer.getAttribution()),$t.layer.once("remove",function(){this.removeAttribution($t.layer.getAttribution())},this))},setPrefix:function($t){return this.options.prefix=$t,this._update(),this},addAttribution:function($t){return $t?(this._attributions[$t]||(this._attributions[$t]=0),this._attributions[$t]++,this._update(),this):this},removeAttribution:function($t){return $t?(this._attributions[$t]&&(this._attributions[$t]--,this._update()),this):this},_update:function(){if(!!this._map){var $t=[];for(var Vt in this._attributions)this._attributions[Vt]&&$t.push(Vt);var tn=[];this.options.prefix&&tn.push(this.options.prefix),$t.length&&tn.push($t.join(", ")),this._container.innerHTML=tn.join(' <span aria-hidden="true">|</span> ')}}});ds.mergeOptions({attributionControl:!0}),ds.addInitHook(function(){this.options.attributionControl&&new ef().addTo(this)});var bg=function($t){return new ef($t)};wl.Layers=hd,wl.Zoom=fd,wl.Scale=vg,wl.Attribution=ef,Ih.layers=dd,Ih.zoom=$m,Ih.scale=_g,Ih.attribution=bg;var Aa=an.extend({initialize:function($t){this._map=$t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Aa.addTo=function($t,Vt){return $t.addHandler(Vt,this),this};var hp={Events:hn},Rc=wi.touch?"touchstart mousedown":"mousedown",hc=zn.extend({options:{clickTolerance:3},initialize:function($t,Vt,tn,pn){Zt(this,pn),this._element=$t,this._dragStartTarget=Vt||$t,this._preventOutline=tn},enable:function(){this._enabled||(Co(this._dragStartTarget,Rc,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(hc._dragging===this&&this.finishDrag(!0),co(this._dragStartTarget,Rc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function($t){if(!!this._enabled&&(this._moved=!1,!Oc(this._element,"leaflet-zoom-anim"))){if($t.touches&&$t.touches.length!==1){hc._dragging===this&&this.finishDrag();return}if(!(hc._dragging||$t.shiftKey||$t.which!==1&&$t.button!==1&&!$t.touches)&&(hc._dragging=this,this._preventOutline&&Su(this._element),Xl(),Wa(),!this._moving)){this.fire("down");var Vt=$t.touches?$t.touches[0]:$t,tn=cd(this._element);this._startPoint=new ir(Vt.clientX,Vt.clientY),this._startPos=Po(this._element),this._parentScale=Lh(tn);var pn=$t.type==="mousedown";Co(document,pn?"mousemove":"touchmove",this._onMove,this),Co(document,pn?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function($t){if(!!this._enabled){if($t.touches&&$t.touches.length>1){this._moved=!0;return}var Vt=$t.touches&&$t.touches.length===1?$t.touches[0]:$t,tn=new ir(Vt.clientX,Vt.clientY)._subtract(this._startPoint);!tn.x&&!tn.y||Math.abs(tn.x)+Math.abs(tn.y)<this.options.clickTolerance||(tn.x/=this._parentScale.x,tn.y/=this._parentScale.y,ua($t),this._moved||(this.fire("dragstart"),this._moved=!0,Eo(document.body,"leaflet-dragging"),this._lastTarget=$t.target||$t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Eo(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(tn),this._moving=!0,this._lastEvent=$t,this._updatePosition())}},_updatePosition:function(){var $t={originalEvent:this._lastEvent};this.fire("predrag",$t),Hs(this._element,this._newPos),this.fire("drag",$t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function($t){ro(document.body,"leaflet-dragging"),this._lastTarget&&(ro(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),co(document,"mousemove touchmove",this._onMove,this),co(document,"mouseup touchend touchcancel",this._onUp,this),el(),na();var Vt=this._moved&&this._moving;this._moving=!1,hc._dragging=!1,Vt&&this.fire("dragend",{noInertia:$t,distance:this._newPos.distanceTo(this._startPos)})}});function dc($t,Vt,tn){var pn,In=[1,4,2,8],Jn,Tr,Vr,Jr,oi,$i,uo,Oo;for(Jn=0,$i=$t.length;Jn<$i;Jn++)$t[Jn]._code=Ku($t[Jn],Vt);for(Vr=0;Vr<4;Vr++){for(uo=In[Vr],pn=[],Jn=0,$i=$t.length,Tr=$i-1;Jn<$i;Tr=Jn++)Jr=$t[Jn],oi=$t[Tr],Jr._code&uo?oi._code&uo||(Oo=rf(oi,Jr,uo,Vt,tn),Oo._code=Ku(Oo,Vt),pn.push(Oo)):(oi._code&uo&&(Oo=rf(oi,Jr,uo,Vt,tn),Oo._code=Ku(Oo,Vt),pn.push(Oo)),pn.push(Jr));$t=pn}return $t}function pd($t,Vt){var tn,pn,In,Jn,Tr,Vr,Jr,oi,$i;if(!$t||$t.length===0)throw new Error("latlngs not passed");qa($t)||(console.warn("latlngs are not flat! Only the first ring will be used"),$t=$t[0]);var uo=rr([0,0]),Oo=Cr($t),tl=Oo.getNorthWest().distanceTo(Oo.getSouthWest())*Oo.getNorthEast().distanceTo(Oo.getNorthWest());tl<1700&&(uo=tf($t));var ha=$t.length,nl=[];for(tn=0;tn<ha;tn++){var dl=rr($t[tn]);nl.push(Vt.project(rr([dl.lat-uo.lat,dl.lng-uo.lng])))}for(Vr=Jr=oi=0,tn=0,pn=ha-1;tn<ha;pn=tn++)In=nl[tn],Jn=nl[pn],Tr=In.y*Jn.x-Jn.y*In.x,Jr+=(In.x+Jn.x)*Tr,oi+=(In.y+Jn.y)*Tr,Vr+=Tr*3;Vr===0?$i=nl[0]:$i=[Jr/Vr,oi/Vr];var Lu=Vt.unproject(nr($i));return rr([Lu.lat+uo.lat,Lu.lng+uo.lng])}function tf($t){for(var Vt=0,tn=0,pn=0,In=0;In<$t.length;In++){var Jn=rr($t[In]);Vt+=Jn.lat,tn+=Jn.lng,pn++}return rr([Vt/pn,tn/pn])}var Rm={__proto__:null,clipPolygon:dc,polygonCenter:pd,centroid:tf};function gd($t,Vt){if(!Vt||!$t.length)return $t.slice();var tn=Vt*Vt;return $t=Oh($t,tn),$t=El($t,tn),$t}function nf($t,Vt,tn){return Math.sqrt(md($t,Vt,tn,!0))}function Ph($t,Vt,tn){return md($t,Vt,tn)}function El($t,Vt){var tn=$t.length,pn=typeof Uint8Array!=void 0+""?Uint8Array:Array,In=new pn(tn);In[0]=In[tn-1]=1,hl($t,In,Vt,0,tn-1);var Jn,Tr=[];for(Jn=0;Jn<tn;Jn++)In[Jn]&&Tr.push($t[Jn]);return Tr}function hl($t,Vt,tn,pn,In){var Jn=0,Tr,Vr,Jr;for(Vr=pn+1;Vr<=In-1;Vr++)Jr=md($t[Vr],$t[pn],$t[In],!0),Jr>Jn&&(Tr=Vr,Jn=Jr);Jn>tn&&(Vt[Tr]=1,hl($t,Vt,tn,pn,Tr),hl($t,Vt,tn,Tr,In))}function Oh($t,Vt){for(var tn=[$t[0]],pn=1,In=0,Jn=$t.length;pn<Jn;pn++)dp($t[pn],$t[In])>Vt&&(tn.push($t[pn]),In=pn);return In<Jn-1&&tn.push($t[Jn-1]),tn}var xg;function wg($t,Vt,tn,pn,In){var Jn=pn?xg:Ku($t,tn),Tr=Ku(Vt,tn),Vr,Jr,oi;for(xg=Tr;;){if(!(Jn|Tr))return[$t,Vt];if(Jn&Tr)return!1;Vr=Jn||Tr,Jr=rf($t,Vt,Vr,tn,In),oi=Ku(Jr,tn),Vr===Jn?($t=Jr,Jn=oi):(Vt=Jr,Tr=oi)}}function rf($t,Vt,tn,pn,In){var Jn=Vt.x-$t.x,Tr=Vt.y-$t.y,Vr=pn.min,Jr=pn.max,oi,$i;return tn&8?(oi=$t.x+Jn*(Jr.y-$t.y)/Tr,$i=Jr.y):tn&4?(oi=$t.x+Jn*(Vr.y-$t.y)/Tr,$i=Vr.y):tn&2?(oi=Jr.x,$i=$t.y+Tr*(Jr.x-$t.x)/Jn):tn&1&&(oi=Vr.x,$i=$t.y+Tr*(Vr.x-$t.x)/Jn),new ir(oi,$i,In)}function Ku($t,Vt){var tn=0;return $t.x<Vt.min.x?tn|=1:$t.x>Vt.max.x&&(tn|=2),$t.y<Vt.min.y?tn|=4:$t.y>Vt.max.y&&(tn|=8),tn}function dp($t,Vt){var tn=Vt.x-$t.x,pn=Vt.y-$t.y;return tn*tn+pn*pn}function md($t,Vt,tn,pn){var In=Vt.x,Jn=Vt.y,Tr=tn.x-In,Vr=tn.y-Jn,Jr=Tr*Tr+Vr*Vr,oi;return Jr>0&&(oi=(($t.x-In)*Tr+($t.y-Jn)*Vr)/Jr,oi>1?(In=tn.x,Jn=tn.y):oi>0&&(In+=Tr*oi,Jn+=Vr*oi)),Tr=$t.x-In,Vr=$t.y-Jn,pn?Tr*Tr+Vr*Vr:new ir(In,Jn)}function qa($t){return!on($t[0])||typeof $t[0][0]!="object"&&typeof $t[0][0]<"u"}function Eg($t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),qa($t)}function Ea($t,Vt){var tn,pn,In,Jn,Tr,Vr,Jr,oi;if(!$t||$t.length===0)throw new Error("latlngs not passed");qa($t)||(console.warn("latlngs are not flat! Only the first ring will be used"),$t=$t[0]);var $i=rr([0,0]),uo=Cr($t),Oo=uo.getNorthWest().distanceTo(uo.getSouthWest())*uo.getNorthEast().distanceTo(uo.getNorthWest());Oo<1700&&($i=tf($t));var tl=$t.length,ha=[];for(tn=0;tn<tl;tn++){var nl=rr($t[tn]);ha.push(Vt.project(rr([nl.lat-$i.lat,nl.lng-$i.lng])))}for(tn=0,pn=0;tn<tl-1;tn++)pn+=ha[tn].distanceTo(ha[tn+1])/2;if(pn===0)oi=ha[0];else for(tn=0,Jn=0;tn<tl-1;tn++)if(Tr=ha[tn],Vr=ha[tn+1],In=Tr.distanceTo(Vr),Jn+=In,Jn>pn){Jr=(Jn-pn)/In,oi=[Vr.x-Jr*(Vr.x-Tr.x),Vr.y-Jr*(Vr.y-Tr.y)];break}var dl=Vt.unproject(nr(oi));return rr([dl.lat+$i.lat,dl.lng+$i.lng])}var Mc={__proto__:null,simplify:gd,pointToSegmentDistance:nf,closestPointOnSegment:Ph,clipSegment:wg,_getEdgeIntersection:rf,_getBitCode:Ku,_sqClosestPointOnSegment:md,isFlat:qa,_flat:Eg,polylineCenter:Ea},Ju={project:function($t){return new ir($t.lng,$t.lat)},unproject:function($t){return new Sr($t.y,$t.x)},bounds:new dr([-180,-90],[180,90])},Qu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new dr([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function($t){var Vt=Math.PI/180,tn=this.R,pn=$t.lat*Vt,In=this.R_MINOR/tn,Jn=Math.sqrt(1-In*In),Tr=Jn*Math.sin(pn),Vr=Math.tan(Math.PI/4-pn/2)/Math.pow((1-Tr)/(1+Tr),Jn/2);return pn=-tn*Math.log(Math.max(Vr,1e-10)),new ir($t.lng*Vt*tn,pn)},unproject:function($t){for(var Vt=180/Math.PI,tn=this.R,pn=this.R_MINOR/tn,In=Math.sqrt(1-pn*pn),Jn=Math.exp(-$t.y/tn),Tr=Math.PI/2-2*Math.atan(Jn),Vr=0,Jr=.1,oi;Vr<15&&Math.abs(Jr)>1e-7;Vr++)oi=In*Math.sin(Tr),oi=Math.pow((1-oi)/(1+oi),In/2),Jr=Math.PI/2-2*Math.atan(Jn*oi)-Tr,Tr+=Jr;return new Sr(Tr*Vt,$t.x*Vt/tn)}},$h={__proto__:null,LonLat:Ju,Mercator:Qu,SphericalMercator:yr},of=bt({},mr,{code:"EPSG:3395",projection:Qu,transformation:function(){var $t=.5/(Math.PI*Qu.R);return Cn($t,.5,-$t,.5)}()}),Fa=bt({},mr,{code:"EPSG:4326",projection:Ju,transformation:Cn(1/180,1,-1/180,.5)}),fp=bt({},Fr,{projection:Ju,transformation:Cn(1,0,-1,0),scale:function($t){return Math.pow(2,$t)},zoom:function($t){return Math.log($t)/Math.LN2},distance:function($t,Vt){var tn=Vt.lng-$t.lng,pn=Vt.lat-$t.lat;return Math.sqrt(tn*tn+pn*pn)},infinite:!0});Fr.Earth=mr,Fr.EPSG3395=of,Fr.EPSG3857=rn,Fr.EPSG900913=dn,Fr.EPSG4326=Fa,Fr.Simple=fp;var Ps=zn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function($t){return $t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function($t){return $t&&$t.removeLayer(this),this},getPane:function($t){return this._map.getPane($t?this.options[$t]||$t:this.options.pane)},addInteractiveTarget:function($t){return this._map._targets[Lt($t)]=this,this},removeInteractiveTarget:function($t){return delete this._map._targets[Lt($t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function($t){var Vt=$t.target;if(!!Vt.hasLayer(this)){if(this._map=Vt,this._zoomAnimated=Vt._zoomAnimated,this.getEvents){var tn=this.getEvents();Vt.on(tn,this),this.once("remove",function(){Vt.off(tn,this)},this)}this.onAdd(Vt),this.fire("add"),Vt.fire("layeradd",{layer:this})}}});ds.include({addLayer:function($t){if(!$t._layerAdd)throw new Error("The provided object is not a Layer.");var Vt=Lt($t);return this._layers[Vt]?this:(this._layers[Vt]=$t,$t._mapToAdd=this,$t.beforeAdd&&$t.beforeAdd(this),this.whenReady($t._layerAdd,$t),this)},removeLayer:function($t){var Vt=Lt($t);return this._layers[Vt]?(this._loaded&&$t.onRemove(this),delete this._layers[Vt],this._loaded&&(this.fire("layerremove",{layer:$t}),$t.fire("remove")),$t._map=$t._mapToAdd=null,this):this},hasLayer:function($t){return Lt($t)in this._layers},eachLayer:function($t,Vt){for(var tn in this._layers)$t.call(Vt,this._layers[tn]);return this},_addLayers:function($t){$t=$t?on($t)?$t:[$t]:[];for(var Vt=0,tn=$t.length;Vt<tn;Vt++)this.addLayer($t[Vt])},_addZoomLimit:function($t){(!isNaN($t.options.maxZoom)||!isNaN($t.options.minZoom))&&(this._zoomBoundLayers[Lt($t)]=$t,this._updateZoomLevels())},_removeZoomLimit:function($t){var Vt=Lt($t);this._zoomBoundLayers[Vt]&&(delete this._zoomBoundLayers[Vt],this._updateZoomLevels())},_updateZoomLevels:function(){var $t=1/0,Vt=-1/0,tn=this._getZoomSpan();for(var pn in this._zoomBoundLayers){var In=this._zoomBoundLayers[pn].options;$t=In.minZoom===void 0?$t:Math.min($t,In.minZoom),Vt=In.maxZoom===void 0?Vt:Math.max(Vt,In.maxZoom)}this._layersMaxZoom=Vt===-1/0?void 0:Vt,this._layersMinZoom=$t===1/0?void 0:$t,tn!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Nl=Ps.extend({initialize:function($t,Vt){Zt(this,Vt),this._layers={};var tn,pn;if($t)for(tn=0,pn=$t.length;tn<pn;tn++)this.addLayer($t[tn])},addLayer:function($t){var Vt=this.getLayerId($t);return this._layers[Vt]=$t,this._map&&this._map.addLayer($t),this},removeLayer:function($t){var Vt=$t in this._layers?$t:this.getLayerId($t);return this._map&&this._layers[Vt]&&this._map.removeLayer(this._layers[Vt]),delete this._layers[Vt],this},hasLayer:function($t){var Vt=typeof $t=="number"?$t:this.getLayerId($t);return Vt in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function($t){var Vt=Array.prototype.slice.call(arguments,1),tn,pn;for(tn in this._layers)pn=this._layers[tn],pn[$t]&&pn[$t].apply(pn,Vt);return this},onAdd:function($t){this.eachLayer($t.addLayer,$t)},onRemove:function($t){this.eachLayer($t.removeLayer,$t)},eachLayer:function($t,Vt){for(var tn in this._layers)$t.call(Vt,this._layers[tn]);return this},getLayer:function($t){return this._layers[$t]},getLayers:function(){var $t=[];return this.eachLayer($t.push,$t),$t},setZIndex:function($t){return this.invoke("setZIndex",$t)},getLayerId:function($t){return Lt($t)}}),Rh=function($t,Vt){return new Nl($t,Vt)},La=Nl.extend({addLayer:function($t){return this.hasLayer($t)?this:($t.addEventParent(this),Nl.prototype.addLayer.call(this,$t),this.fire("layeradd",{layer:$t}))},removeLayer:function($t){return this.hasLayer($t)?($t in this._layers&&($t=this._layers[$t]),$t.removeEventParent(this),Nl.prototype.removeLayer.call(this,$t),this.fire("layerremove",{layer:$t})):this},setStyle:function($t){return this.invoke("setStyle",$t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var $t=new ur;for(var Vt in this._layers){var tn=this._layers[Vt];$t.extend(tn.getBounds?tn.getBounds():tn.getLatLng())}return $t}}),Sa=function($t,Vt){return new La($t,Vt)},fc=an.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function($t){Zt(this,$t)},createIcon:function($t){return this._createIcon("icon",$t)},createShadow:function($t){return this._createIcon("shadow",$t)},_createIcon:function($t,Vt){var tn=this._getIconUrl($t);if(!tn){if($t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var pn=this._createImg(tn,Vt&&Vt.tagName==="IMG"?Vt:null);return this._setIconStyles(pn,$t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(pn.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),pn},_setIconStyles:function($t,Vt){var tn=this.options,pn=tn[Vt+"Size"];typeof pn=="number"&&(pn=[pn,pn]);var In=nr(pn),Jn=nr(Vt==="shadow"&&tn.shadowAnchor||tn.iconAnchor||In&&In.divideBy(2,!0));$t.className="leaflet-marker-"+Vt+" "+(tn.className||""),Jn&&($t.style.marginLeft=-Jn.x+"px",$t.style.marginTop=-Jn.y+"px"),In&&($t.style.width=In.x+"px",$t.style.height=In.y+"px")},_createImg:function($t,Vt){return Vt=Vt||document.createElement("img"),Vt.src=$t,Vt},_getIconUrl:function($t){return wi.retina&&this.options[$t+"RetinaUrl"]||this.options[$t+"Url"]}});function Sg($t){return new fc($t)}var Mh=fc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function($t){return typeof Mh.imagePath!="string"&&(Mh.imagePath=this._detectIconPath()),(this.options.imagePath||Mh.imagePath)+fc.prototype._getIconUrl.call(this,$t)},_stripUrl:function($t){var Vt=function(tn,pn,In){var Jn=pn.exec(tn);return Jn&&Jn[In]};return $t=Vt($t,/^url\((['"])?(.+)\1\)$/,2),$t&&Vt($t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var $t=Yi("div","leaflet-default-icon-path",document.body),Vt=bi($t,"background-image")||bi($t,"backgroundImage");if(document.body.removeChild($t),Vt=this._stripUrl(Vt),Vt)return Vt;var tn=document.querySelector('link[href$="leaflet.css"]');return tn?tn.href.substring(0,tn.href.length-11-1):""}}),sf=Aa.extend({initialize:function($t){this._marker=$t},addHooks:function(){var $t=this._marker._icon;this._draggable||(this._draggable=new hc($t,$t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Eo($t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ro(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function($t){var Vt=this._marker,tn=Vt._map,pn=this._marker.options.autoPanSpeed,In=this._marker.options.autoPanPadding,Jn=Po(Vt._icon),Tr=tn.getPixelBounds(),Vr=tn.getPixelOrigin(),Jr=or(Tr.min._subtract(Vr).add(In),Tr.max._subtract(Vr).subtract(In));if(!Jr.contains(Jn)){var oi=nr((Math.max(Jr.max.x,Jn.x)-Jr.max.x)/(Tr.max.x-Jr.max.x)-(Math.min(Jr.min.x,Jn.x)-Jr.min.x)/(Tr.min.x-Jr.min.x),(Math.max(Jr.max.y,Jn.y)-Jr.max.y)/(Tr.max.y-Jr.max.y)-(Math.min(Jr.min.y,Jn.y)-Jr.min.y)/(Tr.min.y-Jr.min.y)).multiplyBy(pn);tn.panBy(oi,{animate:!1}),this._draggable._newPos._add(oi),this._draggable._startPos._add(oi),Hs(Vt._icon,this._draggable._newPos),this._onDrag($t),this._panRequest=$n(this._adjustPan.bind(this,$t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function($t){this._marker.options.autoPan&&(cn(this._panRequest),this._panRequest=$n(this._adjustPan.bind(this,$t)))},_onDrag:function($t){var Vt=this._marker,tn=Vt._shadow,pn=Po(Vt._icon),In=Vt._map.layerPointToLatLng(pn);tn&&Hs(tn,pn),Vt._latlng=In,$t.latlng=In,$t.oldLatLng=this._oldLatLng,Vt.fire("move",$t).fire("drag",$t)},_onDragEnd:function($t){cn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",$t)}}),eh=Ps.extend({options:{icon:new Mh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function($t,Vt){Zt(this,Vt),this._latlng=rr($t)},onAdd:function($t){this._zoomAnimated=this._zoomAnimated&&$t.options.markerZoomAnimation,this._zoomAnimated&&$t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function($t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&$t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function($t){var Vt=this._latlng;return this._latlng=rr($t),this.update(),this.fire("move",{oldLatLng:Vt,latlng:this._latlng})},setZIndexOffset:function($t){return this.options.zIndexOffset=$t,this.update()},getIcon:function(){return this.options.icon},setIcon:function($t){return this.options.icon=$t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var $t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos($t)}return this},_initIcon:function(){var $t=this.options,Vt="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),tn=$t.icon.createIcon(this._icon),pn=!1;tn!==this._icon&&(this._icon&&this._removeIcon(),pn=!0,$t.title&&(tn.title=$t.title),tn.tagName==="IMG"&&(tn.alt=$t.alt||"")),Eo(tn,Vt),$t.keyboard&&(tn.tabIndex="0",tn.setAttribute("role","button")),this._icon=tn,$t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Co(tn,"focus",this._panOnFocus,this);var In=$t.icon.createShadow(this._shadow),Jn=!1;In!==this._shadow&&(this._removeShadow(),Jn=!0),In&&(Eo(In,Vt),In.alt=""),this._shadow=In,$t.opacity<1&&this._updateOpacity(),pn&&this.getPane().appendChild(this._icon),this._initInteraction(),In&&Jn&&this.getPane($t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&co(this._icon,"focus",this._panOnFocus,this),br(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&br(this._shadow),this._shadow=null},_setPos:function($t){this._icon&&Hs(this._icon,$t),this._shadow&&Hs(this._shadow,$t),this._zIndex=$t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function($t){this._icon&&(this._icon.style.zIndex=this._zIndex+$t)},_animateZoom:function($t){var Vt=this._map._latLngToNewLayerPoint(this._latlng,$t.zoom,$t.center).round();this._setPos(Vt)},_initInteraction:function(){if(!!this.options.interactive&&(Eo(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sf)){var $t=this.options.draggable;this.dragging&&($t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sf(this),$t&&this.dragging.enable()}},setOpacity:function($t){return this.options.opacity=$t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var $t=this.options.opacity;this._icon&&oo(this._icon,$t),this._shadow&&oo(this._shadow,$t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var $t=this._map;if(!!$t){var Vt=this.options.icon.options,tn=Vt.iconSize?nr(Vt.iconSize):nr(0,0),pn=Vt.iconAnchor?nr(Vt.iconAnchor):nr(0,0);$t.panInside(this._latlng,{paddingTopLeft:pn,paddingBottomRight:tn.subtract(pn)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pp($t,Vt){return new eh($t,Vt)}var ru=Ps.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function($t){this._renderer=$t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function($t){return Zt(this,$t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&$t&&Object.prototype.hasOwnProperty.call($t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),af=ru.extend({options:{fill:!0,radius:10},initialize:function($t,Vt){Zt(this,Vt),this._latlng=rr($t),this._radius=this.options.radius},setLatLng:function($t){var Vt=this._latlng;return this._latlng=rr($t),this.redraw(),this.fire("move",{oldLatLng:Vt,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function($t){return this.options.radius=this._radius=$t,this.redraw()},getRadius:function(){return this._radius},setStyle:function($t){var Vt=$t&&$t.radius||this._radius;return ru.prototype.setStyle.call(this,$t),this.setRadius(Vt),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var $t=this._radius,Vt=this._radiusY||$t,tn=this._clickTolerance(),pn=[$t+tn,Vt+tn];this._pxBounds=new dr(this._point.subtract(pn),this._point.add(pn))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function($t){return $t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Mm($t,Vt){return new af($t,Vt)}var lf=af.extend({initialize:function($t,Vt,tn){if(typeof Vt=="number"&&(Vt=bt({},tn,{radius:Vt})),Zt(this,Vt),this._latlng=rr($t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function($t){return this._mRadius=$t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var $t=[this._radius,this._radiusY||this._radius];return new ur(this._map.layerPointToLatLng(this._point.subtract($t)),this._map.layerPointToLatLng(this._point.add($t)))},setStyle:ru.prototype.setStyle,_project:function(){var $t=this._latlng.lng,Vt=this._latlng.lat,tn=this._map,pn=tn.options.crs;if(pn.distance===mr.distance){var In=Math.PI/180,Jn=this._mRadius/mr.R/In,Tr=tn.project([Vt+Jn,$t]),Vr=tn.project([Vt-Jn,$t]),Jr=Tr.add(Vr).divideBy(2),oi=tn.unproject(Jr).lat,$i=Math.acos((Math.cos(Jn*In)-Math.sin(Vt*In)*Math.sin(oi*In))/(Math.cos(Vt*In)*Math.cos(oi*In)))/In;(isNaN($i)||$i===0)&&($i=Jn/Math.cos(Math.PI/180*Vt)),this._point=Jr.subtract(tn.getPixelOrigin()),this._radius=isNaN($i)?0:Jr.x-tn.project([oi,$t-$i]).x,this._radiusY=Jr.y-Tr.y}else{var uo=pn.unproject(pn.project(this._latlng).subtract([this._mRadius,0]));this._point=tn.latLngToLayerPoint(this._latlng),this._radius=this._point.x-tn.latLngToLayerPoint(uo).x}this._updateBounds()}});function Nm($t,Vt,tn){return new lf($t,Vt,tn)}var iu=ru.extend({options:{smoothFactor:1,noClip:!1},initialize:function($t,Vt){Zt(this,Vt),this._setLatLngs($t)},getLatLngs:function(){return this._latlngs},setLatLngs:function($t){return this._setLatLngs($t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function($t){for(var Vt=1/0,tn=null,pn=md,In,Jn,Tr=0,Vr=this._parts.length;Tr<Vr;Tr++)for(var Jr=this._parts[Tr],oi=1,$i=Jr.length;oi<$i;oi++){In=Jr[oi-1],Jn=Jr[oi];var uo=pn($t,In,Jn,!0);uo<Vt&&(Vt=uo,tn=pn($t,In,Jn))}return tn&&(tn.distance=Math.sqrt(Vt)),tn},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ea(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function($t,Vt){return Vt=Vt||this._defaultShape(),$t=rr($t),Vt.push($t),this._bounds.extend($t),this.redraw()},_setLatLngs:function($t){this._bounds=new ur,this._latlngs=this._convertLatLngs($t)},_defaultShape:function(){return qa(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function($t){for(var Vt=[],tn=qa($t),pn=0,In=$t.length;pn<In;pn++)tn?(Vt[pn]=rr($t[pn]),this._bounds.extend(Vt[pn])):Vt[pn]=this._convertLatLngs($t[pn]);return Vt},_project:function(){var $t=new dr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,$t),this._bounds.isValid()&&$t.isValid()&&(this._rawPxBounds=$t,this._updateBounds())},_updateBounds:function(){var $t=this._clickTolerance(),Vt=new ir($t,$t);!this._rawPxBounds||(this._pxBounds=new dr([this._rawPxBounds.min.subtract(Vt),this._rawPxBounds.max.add(Vt)]))},_projectLatlngs:function($t,Vt,tn){var pn=$t[0]instanceof Sr,In=$t.length,Jn,Tr;if(pn){for(Tr=[],Jn=0;Jn<In;Jn++)Tr[Jn]=this._map.latLngToLayerPoint($t[Jn]),tn.extend(Tr[Jn]);Vt.push(Tr)}else for(Jn=0;Jn<In;Jn++)this._projectLatlngs($t[Jn],Vt,tn)},_clipPoints:function(){var $t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects($t))){if(this.options.noClip){this._parts=this._rings;return}var Vt=this._parts,tn,pn,In,Jn,Tr,Vr,Jr;for(tn=0,In=0,Jn=this._rings.length;tn<Jn;tn++)for(Jr=this._rings[tn],pn=0,Tr=Jr.length;pn<Tr-1;pn++)Vr=wg(Jr[pn],Jr[pn+1],$t,pn,!0),Vr&&(Vt[In]=Vt[In]||[],Vt[In].push(Vr[0]),(Vr[1]!==Jr[pn+1]||pn===Tr-2)&&(Vt[In].push(Vr[1]),In++))}},_simplifyPoints:function(){for(var $t=this._parts,Vt=this.options.smoothFactor,tn=0,pn=$t.length;tn<pn;tn++)$t[tn]=gd($t[tn],Vt)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function($t,Vt){var tn,pn,In,Jn,Tr,Vr,Jr=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains($t))return!1;for(tn=0,Jn=this._parts.length;tn<Jn;tn++)for(Vr=this._parts[tn],pn=0,Tr=Vr.length,In=Tr-1;pn<Tr;In=pn++)if(!(!Vt&&pn===0)&&nf($t,Vr[In],Vr[pn])<=Jr)return!0;return!1}});function gp($t,Vt){return new iu($t,Vt)}iu._flat=Eg;var Nh=iu.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function($t){var Vt=iu.prototype._convertLatLngs.call(this,$t),tn=Vt.length;return tn>=2&&Vt[0]instanceof Sr&&Vt[0].equals(Vt[tn-1])&&Vt.pop(),Vt},_setLatLngs:function($t){iu.prototype._setLatLngs.call(this,$t),qa(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return qa(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var $t=this._renderer._bounds,Vt=this.options.weight,tn=new ir(Vt,Vt);if($t=new dr($t.min.subtract(tn),$t.max.add(tn)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects($t))){if(this.options.noClip){this._parts=this._rings;return}for(var pn=0,In=this._rings.length,Jn;pn<In;pn++)Jn=dc(this._rings[pn],$t,!0),Jn.length&&this._parts.push(Jn)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function($t){var Vt=!1,tn,pn,In,Jn,Tr,Vr,Jr,oi;if(!this._pxBounds||!this._pxBounds.contains($t))return!1;for(Jn=0,Jr=this._parts.length;Jn<Jr;Jn++)for(tn=this._parts[Jn],Tr=0,oi=tn.length,Vr=oi-1;Tr<oi;Vr=Tr++)pn=tn[Tr],In=tn[Vr],pn.y>$t.y!=In.y>$t.y&&$t.x<(In.x-pn.x)*($t.y-pn.y)/(In.y-pn.y)+pn.x&&(Vt=!Vt);return Vt||iu.prototype._containsPoint.call(this,$t,!0)}});function Dm($t,Vt){return new Nh($t,Vt)}var js=La.extend({initialize:function($t,Vt){Zt(this,Vt),this._layers={},$t&&this.addData($t)},addData:function($t){var Vt=on($t)?$t:$t.features,tn,pn,In;if(Vt){for(tn=0,pn=Vt.length;tn<pn;tn++)In=Vt[tn],(In.geometries||In.geometry||In.features||In.coordinates)&&this.addData(In);return this}var Jn=this.options;if(Jn.filter&&!Jn.filter($t))return this;var Tr=cf($t,Jn);return Tr?(Tr.feature=vd($t),Tr.defaultOptions=Tr.options,this.resetStyle(Tr),Jn.onEachFeature&&Jn.onEachFeature($t,Tr),this.addLayer(Tr)):this},resetStyle:function($t){return $t===void 0?this.eachLayer(this.resetStyle,this):($t.options=bt({},$t.defaultOptions),this._setLayerStyle($t,this.options.style),this)},setStyle:function($t){return this.eachLayer(function(Vt){this._setLayerStyle(Vt,$t)},this)},_setLayerStyle:function($t,Vt){$t.setStyle&&(typeof Vt=="function"&&(Vt=Vt($t.feature)),$t.setStyle(Vt))}});function cf($t,Vt){var tn=$t.type==="Feature"?$t.geometry:$t,pn=tn?tn.coordinates:null,In=[],Jn=Vt&&Vt.pointToLayer,Tr=Vt&&Vt.coordsToLatLng||Sl,Vr,Jr,oi,$i;if(!pn&&!tn)return null;switch(tn.type){case"Point":return Vr=Tr(pn),yd(Jn,$t,Vr,Vt);case"MultiPoint":for(oi=0,$i=pn.length;oi<$i;oi++)Vr=Tr(pn[oi]),In.push(yd(Jn,$t,Vr,Vt));return new La(In);case"LineString":case"MultiLineString":return Jr=Cl(pn,tn.type==="LineString"?0:1,Tr),new iu(Jr,Vt);case"Polygon":case"MultiPolygon":return Jr=Cl(pn,tn.type==="Polygon"?1:2,Tr),new Nh(Jr,Vt);case"GeometryCollection":for(oi=0,$i=tn.geometries.length;oi<$i;oi++){var uo=cf({geometry:tn.geometries[oi],type:"Feature",properties:$t.properties},Vt);uo&&In.push(uo)}return new La(In);case"FeatureCollection":for(oi=0,$i=tn.features.length;oi<$i;oi++){var Oo=cf(tn.features[oi],Vt);Oo&&In.push(Oo)}return new La(In);default:throw new Error("Invalid GeoJSON object.")}}function yd($t,Vt,tn,pn){return $t?$t(Vt,tn):new eh(tn,pn&&pn.markersInheritOptions&&pn)}function Sl($t){return new Sr($t[1],$t[0],$t[2])}function Cl($t,Vt,tn){for(var pn=[],In=0,Jn=$t.length,Tr;In<Jn;In++)Tr=Vt?Cl($t[In],Vt-1,tn):(tn||Sl)($t[In]),pn.push(Tr);return pn}function Nc($t,Vt){return $t=rr($t),$t.alt!==void 0?[Bt($t.lng,Vt),Bt($t.lat,Vt),Bt($t.alt,Vt)]:[Bt($t.lng,Vt),Bt($t.lat,Vt)]}function th($t,Vt,tn,pn){for(var In=[],Jn=0,Tr=$t.length;Jn<Tr;Jn++)In.push(Vt?th($t[Jn],qa($t[Jn])?0:Vt-1,tn,pn):Nc($t[Jn],pn));return!Vt&&tn&&In.length>0&&In.push(In[0].slice()),In}function nh($t,Vt){return $t.feature?bt({},$t.feature,{geometry:Vt}):vd(Vt)}function vd($t){return $t.type==="Feature"||$t.type==="FeatureCollection"?$t:{type:"Feature",properties:{},geometry:$t}}var _d={toGeoJSON:function($t){return nh(this,{type:"Point",coordinates:Nc(this.getLatLng(),$t)})}};eh.include(_d),lf.include(_d),af.include(_d),iu.include({toGeoJSON:function($t){var Vt=!qa(this._latlngs),tn=th(this._latlngs,Vt?1:0,!1,$t);return nh(this,{type:(Vt?"Multi":"")+"LineString",coordinates:tn})}}),Nh.include({toGeoJSON:function($t){var Vt=!qa(this._latlngs),tn=Vt&&!qa(this._latlngs[0]),pn=th(this._latlngs,tn?2:Vt?1:0,!0,$t);return Vt||(pn=[pn]),nh(this,{type:(tn?"Multi":"")+"Polygon",coordinates:pn})}}),Nl.include({toMultiPoint:function($t){var Vt=[];return this.eachLayer(function(tn){Vt.push(tn.toGeoJSON($t).geometry.coordinates)}),nh(this,{type:"MultiPoint",coordinates:Vt})},toGeoJSON:function($t){var Vt=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(Vt==="MultiPoint")return this.toMultiPoint($t);var tn=Vt==="GeometryCollection",pn=[];return this.eachLayer(function(In){if(In.toGeoJSON){var Jn=In.toGeoJSON($t);if(tn)pn.push(Jn.geometry);else{var Tr=vd(Jn);Tr.type==="FeatureCollection"?pn.push.apply(pn,Tr.features):pn.push(Tr)}}}),tn?nh(this,{geometries:pn,type:"GeometryCollection"}):{type:"FeatureCollection",features:pn}}});function uf($t,Vt){return new js($t,Vt)}var Bm=uf,ou=Ps.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function($t,Vt,tn){this._url=$t,this._bounds=Cr(Vt),Zt(this,tn)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Eo(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){br(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function($t){return this.options.opacity=$t,this._image&&this._updateOpacity(),this},setStyle:function($t){return $t.opacity&&this.setOpacity($t.opacity),this},bringToFront:function(){return this._map&&Pr(this._image),this},bringToBack:function(){return this._map&&ta(this._image),this},setUrl:function($t){return this._url=$t,this._image&&(this._image.src=$t),this},setBounds:function($t){return this._bounds=Cr($t),this._map&&this._reset(),this},getEvents:function(){var $t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&($t.zoomanim=this._animateZoom),$t},setZIndex:function($t){return this.options.zIndex=$t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var $t=this._url.tagName==="IMG",Vt=this._image=$t?this._url:Yi("img");if(Eo(Vt,"leaflet-image-layer"),this._zoomAnimated&&Eo(Vt,"leaflet-zoom-animated"),this.options.className&&Eo(Vt,this.options.className),Vt.onselectstart=Dt,Vt.onmousemove=Dt,Vt.onload=Et(this.fire,this,"load"),Vt.onerror=Et(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Vt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),$t){this._url=Vt.src;return}Vt.src=this._url,Vt.alt=this.options.alt},_animateZoom:function($t){var Vt=this._map.getZoomScale($t.zoom),tn=this._map._latLngBoundsToNewLayerBounds(this._bounds,$t.zoom,$t.center).min;cc(this._image,tn,Vt)},_reset:function(){var $t=this._image,Vt=new dr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),tn=Vt.getSize();Hs($t,Vt.min),$t.style.width=tn.x+"px",$t.style.height=tn.y+"px"},_updateOpacity:function(){oo(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var $t=this.options.errorOverlayUrl;$t&&this._url!==$t&&(this._url=$t,this._image.src=$t)},getCenter:function(){return this._bounds.getCenter()}}),Fm=function($t,Vt,tn){return new ou($t,Vt,tn)},mp=ou.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var $t=this._url.tagName==="VIDEO",Vt=this._image=$t?this._url:Yi("video");if(Eo(Vt,"leaflet-image-layer"),this._zoomAnimated&&Eo(Vt,"leaflet-zoom-animated"),this.options.className&&Eo(Vt,this.options.className),Vt.onselectstart=Dt,Vt.onmousemove=Dt,Vt.onloadeddata=Et(this.fire,this,"load"),$t){for(var tn=Vt.getElementsByTagName("source"),pn=[],In=0;In<tn.length;In++)pn.push(tn[In].src);this._url=tn.length>0?pn:[Vt.src];return}on(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(Vt.style,"objectFit")&&(Vt.style.objectFit="fill"),Vt.autoplay=!!this.options.autoplay,Vt.loop=!!this.options.loop,Vt.muted=!!this.options.muted,Vt.playsInline=!!this.options.playsInline;for(var Jn=0;Jn<this._url.length;Jn++){var Tr=Yi("source");Tr.src=this._url[Jn],Vt.appendChild(Tr)}}});function hf($t,Vt,tn){return new mp($t,Vt,tn)}var Xs=ou.extend({_initImage:function(){var $t=this._image=this._url;Eo($t,"leaflet-image-layer"),this._zoomAnimated&&Eo($t,"leaflet-zoom-animated"),this.options.className&&Eo($t,this.options.className),$t.onselectstart=Dt,$t.onmousemove=Dt}});function Cg($t,Vt,tn){return new Xs($t,Vt,tn)}var Vs=Ps.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function($t,Vt){$t&&($t instanceof Sr||on($t))?(this._latlng=rr($t),Zt(this,Vt)):(Zt(this,$t),this._source=Vt),this.options.content&&(this._content=this.options.content)},openOn:function($t){return $t=arguments.length?$t:this._source._map,$t.hasLayer(this)||$t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function($t){return this._map?this.close():(arguments.length?this._source=$t:$t=this._source,this._prepareOpen(),this.openOn($t._map)),this},onAdd:function($t){this._zoomAnimated=$t._zoomAnimated,this._container||this._initLayout(),$t._fadeAnimated&&oo(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),$t._fadeAnimated&&oo(this._container,1),this.bringToFront(),this.options.interactive&&(Eo(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function($t){$t._fadeAnimated?(oo(this._container,0),this._removeTimeout=setTimeout(Et(br,void 0,this._container),200)):br(this._container),this.options.interactive&&(ro(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function($t){return this._latlng=rr($t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function($t){return this._content=$t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var $t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&($t.zoomanim=this._animateZoom),$t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pr(this._container),this},bringToBack:function(){return this._map&&ta(this._container),this},_prepareOpen:function($t){var Vt=this._source;if(!Vt._map)return!1;if(Vt instanceof La){Vt=null;var tn=this._source._layers;for(var pn in tn)if(tn[pn]._map){Vt=tn[pn];break}if(!Vt)return!1;this._source=Vt}if(!$t)if(Vt.getCenter)$t=Vt.getCenter();else if(Vt.getLatLng)$t=Vt.getLatLng();else if(Vt.getBounds)$t=Vt.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng($t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var $t=this._contentNode,Vt=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof Vt=="string")$t.innerHTML=Vt;else{for(;$t.hasChildNodes();)$t.removeChild($t.firstChild);$t.appendChild(Vt)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var $t=this._map.latLngToLayerPoint(this._latlng),Vt=nr(this.options.offset),tn=this._getAnchor();this._zoomAnimated?Hs(this._container,$t.add(tn)):Vt=Vt.add($t).add(tn);var pn=this._containerBottom=-Vt.y,In=this._containerLeft=-Math.round(this._containerWidth/2)+Vt.x;this._container.style.bottom=pn+"px",this._container.style.left=In+"px"}},_getAnchor:function(){return[0,0]}});ds.include({_initOverlay:function($t,Vt,tn,pn){var In=Vt;return In instanceof $t||(In=new $t(pn).setContent(Vt)),tn&&In.setLatLng(tn),In}}),Ps.include({_initOverlay:function($t,Vt,tn,pn){var In=tn;return In instanceof $t?(Zt(In,pn),In._source=this):(In=Vt&&!pn?Vt:new $t(pn,this),In.setContent(tn)),In}});var Dh=Vs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function($t){return $t=arguments.length?$t:this._source._map,!$t.hasLayer(this)&&$t._popup&&$t._popup.options.autoClose&&$t.removeLayer($t._popup),$t._popup=this,Vs.prototype.openOn.call(this,$t)},onAdd:function($t){Vs.prototype.onAdd.call(this,$t),$t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ru||this._source.on("preclick",Zu))},onRemove:function($t){Vs.prototype.onRemove.call(this,$t),$t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ru||this._source.off("preclick",Zu))},getEvents:function(){var $t=Vs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&($t.preclick=this.close),this.options.keepInView&&($t.moveend=this._adjustPan),$t},_initLayout:function(){var $t="leaflet-popup",Vt=this._container=Yi("div",$t+" "+(this.options.className||"")+" leaflet-zoom-animated"),tn=this._wrapper=Yi("div",$t+"-content-wrapper",Vt);if(this._contentNode=Yi("div",$t+"-content",tn),Zl(Vt),lp(this._contentNode),Co(Vt,"contextmenu",Zu),this._tipContainer=Yi("div",$t+"-tip-container",Vt),this._tip=Yi("div",$t+"-tip",this._tipContainer),this.options.closeButton){var pn=this._closeButton=Yi("a",$t+"-close-button",Vt);pn.setAttribute("role","button"),pn.setAttribute("aria-label","Close popup"),pn.href="#close",pn.innerHTML='<span aria-hidden="true">&#215;</span>',Co(pn,"click",function(In){ua(In),this.close()},this)}},_updateLayout:function(){var $t=this._contentNode,Vt=$t.style;Vt.width="",Vt.whiteSpace="nowrap";var tn=$t.offsetWidth;tn=Math.min(tn,this.options.maxWidth),tn=Math.max(tn,this.options.minWidth),Vt.width=tn+1+"px",Vt.whiteSpace="",Vt.height="";var pn=$t.offsetHeight,In=this.options.maxHeight,Jn="leaflet-popup-scrolled";In&&pn>In?(Vt.height=In+"px",Eo($t,Jn)):ro($t,Jn),this._containerWidth=this._container.offsetWidth},_animateZoom:function($t){var Vt=this._map._latLngToNewLayerPoint(this._latlng,$t.zoom,$t.center),tn=this._getAnchor();Hs(this._container,Vt.add(tn))},_adjustPan:function(){if(!!this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var $t=this._map,Vt=parseInt(bi(this._container,"marginBottom"),10)||0,tn=this._container.offsetHeight+Vt,pn=this._containerWidth,In=new ir(this._containerLeft,-tn-this._containerBottom);In._add(Po(this._container));var Jn=$t.layerPointToContainerPoint(In),Tr=nr(this.options.autoPanPadding),Vr=nr(this.options.autoPanPaddingTopLeft||Tr),Jr=nr(this.options.autoPanPaddingBottomRight||Tr),oi=$t.getSize(),$i=0,uo=0;Jn.x+pn+Jr.x>oi.x&&($i=Jn.x+pn-oi.x+Jr.x),Jn.x-$i-Vr.x<0&&($i=Jn.x-Vr.x),Jn.y+tn+Jr.y>oi.y&&(uo=Jn.y+tn-oi.y+Jr.y),Jn.y-uo-Vr.y<0&&(uo=Jn.y-Vr.y),($i||uo)&&(this.options.keepInView&&(this._autopanning=!0),$t.fire("autopanstart").panBy([$i,uo]))}},_getAnchor:function(){return nr(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Dc=function($t,Vt){return new Dh($t,Vt)};ds.mergeOptions({closePopupOnClick:!0}),ds.include({openPopup:function($t,Vt,tn){return this._initOverlay(Dh,$t,Vt,tn).openOn(this),this},closePopup:function($t){return $t=arguments.length?$t:this._popup,$t&&$t.close(),this}}),Ps.include({bindPopup:function($t,Vt){return this._popup=this._initOverlay(Dh,this._popup,$t,Vt),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function($t){return this._popup&&(this instanceof La||(this._popup._source=this),this._popup._prepareOpen($t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function($t){return this._popup&&this._popup.setContent($t),this},getPopup:function(){return this._popup},_openPopup:function($t){if(!(!this._popup||!this._map)){Cu($t);var Vt=$t.layer||$t.target;if(this._popup._source===Vt&&!(Vt instanceof ru)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup($t.latlng);return}this._popup._source=Vt,this.openPopup($t.latlng)}},_movePopup:function($t){this._popup.setLatLng($t.latlng)},_onKeyPress:function($t){$t.originalEvent.keyCode===13&&this._openPopup($t)}});var Tu=Vs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function($t){Vs.prototype.onAdd.call(this,$t),this.setOpacity(this.options.opacity),$t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function($t){Vs.prototype.onRemove.call(this,$t),$t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var $t=Vs.prototype.getEvents.call(this);return this.options.permanent||($t.preclick=this.close),$t},_initLayout:function(){var $t="leaflet-tooltip",Vt=$t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Yi("div",Vt),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Lt(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function($t){var Vt,tn,pn=this._map,In=this._container,Jn=pn.latLngToContainerPoint(pn.getCenter()),Tr=pn.layerPointToContainerPoint($t),Vr=this.options.direction,Jr=In.offsetWidth,oi=In.offsetHeight,$i=nr(this.options.offset),uo=this._getAnchor();Vr==="top"?(Vt=Jr/2,tn=oi):Vr==="bottom"?(Vt=Jr/2,tn=0):Vr==="center"?(Vt=Jr/2,tn=oi/2):Vr==="right"?(Vt=0,tn=oi/2):Vr==="left"?(Vt=Jr,tn=oi/2):Tr.x<Jn.x?(Vr="right",Vt=0,tn=oi/2):(Vr="left",Vt=Jr+($i.x+uo.x)*2,tn=oi/2),$t=$t.subtract(nr(Vt,tn,!0)).add($i).add(uo),ro(In,"leaflet-tooltip-right"),ro(In,"leaflet-tooltip-left"),ro(In,"leaflet-tooltip-top"),ro(In,"leaflet-tooltip-bottom"),Eo(In,"leaflet-tooltip-"+Vr),Hs(In,$t)},_updatePosition:function(){var $t=this._map.latLngToLayerPoint(this._latlng);this._setPosition($t)},setOpacity:function($t){this.options.opacity=$t,this._container&&oo(this._container,$t)},_animateZoom:function($t){var Vt=this._map._latLngToNewLayerPoint(this._latlng,$t.zoom,$t.center);this._setPosition(Vt)},_getAnchor:function(){return nr(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Tg=function($t,Vt){return new Tu($t,Vt)};ds.include({openTooltip:function($t,Vt,tn){return this._initOverlay(Tu,$t,Vt,tn).openOn(this),this},closeTooltip:function($t){return $t.close(),this}}),Ps.include({bindTooltip:function($t,Vt){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tu,this._tooltip,$t,Vt),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function($t){if(!(!$t&&this._tooltipHandlersAdded)){var Vt=$t?"off":"on",tn={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?tn.add=this._openTooltip:(tn.mouseover=this._openTooltip,tn.mouseout=this.closeTooltip,tn.click=this._openTooltip,this._map?this._addFocusListeners():tn.add=this._addFocusListeners),this._tooltip.options.sticky&&(tn.mousemove=this._moveTooltip),this[Vt](tn),this._tooltipHandlersAdded=!$t}},openTooltip:function($t){return this._tooltip&&(this instanceof La||(this._tooltip._source=this),this._tooltip._prepareOpen($t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function($t){return this._tooltip&&this._tooltip.setContent($t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function($t){var Vt=typeof $t.getElement=="function"&&$t.getElement();Vt&&(Co(Vt,"focus",function(){this._tooltip._source=$t,this.openTooltip()},this),Co(Vt,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function($t){var Vt=typeof $t.getElement=="function"&&$t.getElement();Vt&&Vt.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function($t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var Vt=this;this._map.once("moveend",function(){Vt._openOnceFlag=!1,Vt._openTooltip($t)});return}this._tooltip._source=$t.layer||$t.target,this.openTooltip(this._tooltip.options.sticky?$t.latlng:void 0)}},_moveTooltip:function($t){var Vt=$t.latlng,tn,pn;this._tooltip.options.sticky&&$t.originalEvent&&(tn=this._map.mouseEventToContainerPoint($t.originalEvent),pn=this._map.containerPointToLayerPoint(tn),Vt=this._map.layerPointToLatLng(pn)),this._tooltip.setLatLng(Vt)}});var yp=fc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function($t){var Vt=$t&&$t.tagName==="DIV"?$t:document.createElement("div"),tn=this.options;if(tn.html instanceof Element?(ll(Vt),Vt.appendChild(tn.html)):Vt.innerHTML=tn.html!==!1?tn.html:"",tn.bgPos){var pn=nr(tn.bgPos);Vt.style.backgroundPosition=-pn.x+"px "+-pn.y+"px"}return this._setIconStyles(Vt,"icon"),Vt},createShadow:function(){return null}});function df($t){return new yp($t)}fc.Default=Mh;var bd=Ps.extend({options:{tileSize:256,opacity:1,updateWhenIdle:wi.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function($t){Zt(this,$t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function($t){$t._addZoomLimit(this)},onRemove:function($t){this._removeAllTiles(),br(this._container),$t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ta(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function($t){return this.options.opacity=$t,this._updateOpacity(),this},setZIndex:function($t){return this.options.zIndex=$t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var $t=this._clampZoom(this._map.getZoom());$t!==this._tileZoom&&(this._tileZoom=$t,this._updateLevels()),this._update()}return this},getEvents:function(){var $t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Pt(this._onMoveEnd,this.options.updateInterval,this)),$t.move=this._onMove),this._zoomAnimated&&($t.zoomanim=this._animateZoom),$t},createTile:function(){return document.createElement("div")},getTileSize:function(){var $t=this.options.tileSize;return $t instanceof ir?$t:new ir($t,$t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function($t){for(var Vt=this.getPane().children,tn=-$t(-1/0,1/0),pn=0,In=Vt.length,Jn;pn<In;pn++)Jn=Vt[pn].style.zIndex,Vt[pn]!==this._container&&Jn&&(tn=$t(tn,+Jn));isFinite(tn)&&(this.options.zIndex=tn+$t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!wi.ielt9){oo(this._container,this.options.opacity);var $t=+new Date,Vt=!1,tn=!1;for(var pn in this._tiles){var In=this._tiles[pn];if(!(!In.current||!In.loaded)){var Jn=Math.min(1,($t-In.loaded)/200);oo(In.el,Jn),Jn<1?Vt=!0:(In.active?tn=!0:this._onOpaqueTile(In),In.active=!0)}}tn&&!this._noPrune&&this._pruneTiles(),Vt&&(cn(this._fadeFrame),this._fadeFrame=$n(this._updateOpacity,this))}},_onOpaqueTile:Dt,_initContainer:function(){this._container||(this._container=Yi("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var $t=this._tileZoom,Vt=this.options.maxZoom;if($t!==void 0){for(var tn in this._levels)tn=Number(tn),this._levels[tn].el.children.length||tn===$t?(this._levels[tn].el.style.zIndex=Vt-Math.abs($t-tn),this._onUpdateLevel(tn)):(br(this._levels[tn].el),this._removeTilesAtZoom(tn),this._onRemoveLevel(tn),delete this._levels[tn]);var pn=this._levels[$t],In=this._map;return pn||(pn=this._levels[$t]={},pn.el=Yi("div","leaflet-tile-container leaflet-zoom-animated",this._container),pn.el.style.zIndex=Vt,pn.origin=In.project(In.unproject(In.getPixelOrigin()),$t).round(),pn.zoom=$t,this._setZoomTransform(pn,In.getCenter(),In.getZoom()),Dt(pn.el.offsetWidth),this._onCreateLevel(pn)),this._level=pn,pn}},_onUpdateLevel:Dt,_onRemoveLevel:Dt,_onCreateLevel:Dt,_pruneTiles:function(){if(!!this._map){var $t,Vt,tn=this._map.getZoom();if(tn>this.options.maxZoom||tn<this.options.minZoom){this._removeAllTiles();return}for($t in this._tiles)Vt=this._tiles[$t],Vt.retain=Vt.current;for($t in this._tiles)if(Vt=this._tiles[$t],Vt.current&&!Vt.active){var pn=Vt.coords;this._retainParent(pn.x,pn.y,pn.z,pn.z-5)||this._retainChildren(pn.x,pn.y,pn.z,pn.z+2)}for($t in this._tiles)this._tiles[$t].retain||this._removeTile($t)}},_removeTilesAtZoom:function($t){for(var Vt in this._tiles)this._tiles[Vt].coords.z===$t&&this._removeTile(Vt)},_removeAllTiles:function(){for(var $t in this._tiles)this._removeTile($t)},_invalidateAll:function(){for(var $t in this._levels)br(this._levels[$t].el),this._onRemoveLevel(Number($t)),delete this._levels[$t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function($t,Vt,tn,pn){var In=Math.floor($t/2),Jn=Math.floor(Vt/2),Tr=tn-1,Vr=new ir(+In,+Jn);Vr.z=+Tr;var Jr=this._tileCoordsToKey(Vr),oi=this._tiles[Jr];return oi&&oi.active?(oi.retain=!0,!0):(oi&&oi.loaded&&(oi.retain=!0),Tr>pn?this._retainParent(In,Jn,Tr,pn):!1)},_retainChildren:function($t,Vt,tn,pn){for(var In=2*$t;In<2*$t+2;In++)for(var Jn=2*Vt;Jn<2*Vt+2;Jn++){var Tr=new ir(In,Jn);Tr.z=tn+1;var Vr=this._tileCoordsToKey(Tr),Jr=this._tiles[Vr];if(Jr&&Jr.active){Jr.retain=!0;continue}else Jr&&Jr.loaded&&(Jr.retain=!0);tn+1<pn&&this._retainChildren(In,Jn,tn+1,pn)}},_resetView:function($t){var Vt=$t&&($t.pinch||$t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),Vt,Vt)},_animateZoom:function($t){this._setView($t.center,$t.zoom,!0,$t.noUpdate)},_clampZoom:function($t){var Vt=this.options;return Vt.minNativeZoom!==void 0&&$t<Vt.minNativeZoom?Vt.minNativeZoom:Vt.maxNativeZoom!==void 0&&Vt.maxNativeZoom<$t?Vt.maxNativeZoom:$t},_setView:function($t,Vt,tn,pn){var In=Math.round(Vt);this.options.maxZoom!==void 0&&In>this.options.maxZoom||this.options.minZoom!==void 0&&In<this.options.minZoom?In=void 0:In=this._clampZoom(In);var Jn=this.options.updateWhenZooming&&In!==this._tileZoom;(!pn||Jn)&&(this._tileZoom=In,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),In!==void 0&&this._update($t),tn||this._pruneTiles(),this._noPrune=!!tn),this._setZoomTransforms($t,Vt)},_setZoomTransforms:function($t,Vt){for(var tn in this._levels)this._setZoomTransform(this._levels[tn],$t,Vt)},_setZoomTransform:function($t,Vt,tn){var pn=this._map.getZoomScale(tn,$t.zoom),In=$t.origin.multiplyBy(pn).subtract(this._map._getNewPixelOrigin(Vt,tn)).round();wi.any3d?cc($t.el,In,pn):Hs($t.el,In)},_resetGrid:function(){var $t=this._map,Vt=$t.options.crs,tn=this._tileSize=this.getTileSize(),pn=this._tileZoom,In=this._map.getPixelWorldBounds(this._tileZoom);In&&(this._globalTileRange=this._pxBoundsToTileRange(In)),this._wrapX=Vt.wrapLng&&!this.options.noWrap&&[Math.floor($t.project([0,Vt.wrapLng[0]],pn).x/tn.x),Math.ceil($t.project([0,Vt.wrapLng[1]],pn).x/tn.y)],this._wrapY=Vt.wrapLat&&!this.options.noWrap&&[Math.floor($t.project([Vt.wrapLat[0],0],pn).y/tn.x),Math.ceil($t.project([Vt.wrapLat[1],0],pn).y/tn.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function($t){var Vt=this._map,tn=Vt._animatingZoom?Math.max(Vt._animateToZoom,Vt.getZoom()):Vt.getZoom(),pn=Vt.getZoomScale(tn,this._tileZoom),In=Vt.project($t,this._tileZoom).floor(),Jn=Vt.getSize().divideBy(pn*2);return new dr(In.subtract(Jn),In.add(Jn))},_update:function($t){var Vt=this._map;if(!!Vt){var tn=this._clampZoom(Vt.getZoom());if($t===void 0&&($t=Vt.getCenter()),this._tileZoom!==void 0){var pn=this._getTiledPixelBounds($t),In=this._pxBoundsToTileRange(pn),Jn=In.getCenter(),Tr=[],Vr=this.options.keepBuffer,Jr=new dr(In.getBottomLeft().subtract([Vr,-Vr]),In.getTopRight().add([Vr,-Vr]));if(!(isFinite(In.min.x)&&isFinite(In.min.y)&&isFinite(In.max.x)&&isFinite(In.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oi in this._tiles){var $i=this._tiles[oi].coords;($i.z!==this._tileZoom||!Jr.contains(new ir($i.x,$i.y)))&&(this._tiles[oi].current=!1)}if(Math.abs(tn-this._tileZoom)>1){this._setView($t,tn);return}for(var uo=In.min.y;uo<=In.max.y;uo++)for(var Oo=In.min.x;Oo<=In.max.x;Oo++){var tl=new ir(Oo,uo);if(tl.z=this._tileZoom,!!this._isValidTile(tl)){var ha=this._tiles[this._tileCoordsToKey(tl)];ha?ha.current=!0:Tr.push(tl)}}if(Tr.sort(function(dl,Lu){return dl.distanceTo(Jn)-Lu.distanceTo(Jn)}),Tr.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nl=document.createDocumentFragment();for(Oo=0;Oo<Tr.length;Oo++)this._addTile(Tr[Oo],nl);this._level.el.appendChild(nl)}}}},_isValidTile:function($t){var Vt=this._map.options.crs;if(!Vt.infinite){var tn=this._globalTileRange;if(!Vt.wrapLng&&($t.x<tn.min.x||$t.x>tn.max.x)||!Vt.wrapLat&&($t.y<tn.min.y||$t.y>tn.max.y))return!1}if(!this.options.bounds)return!0;var pn=this._tileCoordsToBounds($t);return Cr(this.options.bounds).overlaps(pn)},_keyToBounds:function($t){return this._tileCoordsToBounds(this._keyToTileCoords($t))},_tileCoordsToNwSe:function($t){var Vt=this._map,tn=this.getTileSize(),pn=$t.scaleBy(tn),In=pn.add(tn),Jn=Vt.unproject(pn,$t.z),Tr=Vt.unproject(In,$t.z);return[Jn,Tr]},_tileCoordsToBounds:function($t){var Vt=this._tileCoordsToNwSe($t),tn=new ur(Vt[0],Vt[1]);return this.options.noWrap||(tn=this._map.wrapLatLngBounds(tn)),tn},_tileCoordsToKey:function($t){return $t.x+":"+$t.y+":"+$t.z},_keyToTileCoords:function($t){var Vt=$t.split(":"),tn=new ir(+Vt[0],+Vt[1]);return tn.z=+Vt[2],tn},_removeTile:function($t){var Vt=this._tiles[$t];!Vt||(br(Vt.el),delete this._tiles[$t],this.fire("tileunload",{tile:Vt.el,coords:this._keyToTileCoords($t)}))},_initTile:function($t){Eo($t,"leaflet-tile");var Vt=this.getTileSize();$t.style.width=Vt.x+"px",$t.style.height=Vt.y+"px",$t.onselectstart=Dt,$t.onmousemove=Dt,wi.ielt9&&this.options.opacity<1&&oo($t,this.options.opacity)},_addTile:function($t,Vt){var tn=this._getTilePos($t),pn=this._tileCoordsToKey($t),In=this.createTile(this._wrapCoords($t),Et(this._tileReady,this,$t));this._initTile(In),this.createTile.length<2&&$n(Et(this._tileReady,this,$t,null,In)),Hs(In,tn),this._tiles[pn]={el:In,coords:$t,current:!0},Vt.appendChild(In),this.fire("tileloadstart",{tile:In,coords:$t})},_tileReady:function($t,Vt,tn){Vt&&this.fire("tileerror",{error:Vt,tile:tn,coords:$t});var pn=this._tileCoordsToKey($t);tn=this._tiles[pn],tn&&(tn.loaded=+new Date,this._map._fadeAnimated?(oo(tn.el,0),cn(this._fadeFrame),this._fadeFrame=$n(this._updateOpacity,this)):(tn.active=!0,this._pruneTiles()),Vt||(Eo(tn.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:tn.el,coords:$t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),wi.ielt9||!this._map._fadeAnimated?$n(this._pruneTiles,this):setTimeout(Et(this._pruneTiles,this),250)))},_getTilePos:function($t){return $t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function($t){var Vt=new ir(this._wrapX?Rt($t.x,this._wrapX):$t.x,this._wrapY?Rt($t.y,this._wrapY):$t.y);return Vt.z=$t.z,Vt},_pxBoundsToTileRange:function($t){var Vt=this.getTileSize();return new dr($t.min.unscaleBy(Vt).floor(),$t.max.unscaleBy(Vt).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var $t in this._tiles)if(!this._tiles[$t].loaded)return!1;return!0}});function kg($t){return new bd($t)}var ku=bd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function($t,Vt){this._url=$t,Vt=Zt(this,Vt),Vt.detectRetina&&wi.retina&&Vt.maxZoom>0?(Vt.tileSize=Math.floor(Vt.tileSize/2),Vt.zoomReverse?(Vt.zoomOffset--,Vt.minZoom=Math.min(Vt.maxZoom,Vt.minZoom+1)):(Vt.zoomOffset++,Vt.maxZoom=Math.max(Vt.minZoom,Vt.maxZoom-1)),Vt.minZoom=Math.max(0,Vt.minZoom)):Vt.zoomReverse?Vt.minZoom=Math.min(Vt.maxZoom,Vt.minZoom):Vt.maxZoom=Math.max(Vt.minZoom,Vt.maxZoom),typeof Vt.subdomains=="string"&&(Vt.subdomains=Vt.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function($t,Vt){return this._url===$t&&Vt===void 0&&(Vt=!0),this._url=$t,Vt||this.redraw(),this},createTile:function($t,Vt){var tn=document.createElement("img");return Co(tn,"load",Et(this._tileOnLoad,this,Vt,tn)),Co(tn,"error",Et(this._tileOnError,this,Vt,tn)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(tn.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(tn.referrerPolicy=this.options.referrerPolicy),tn.alt="",tn.src=this.getTileUrl($t),tn},getTileUrl:function($t){var Vt={r:wi.retina?"@2x":"",s:this._getSubdomain($t),x:$t.x,y:$t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var tn=this._globalTileRange.max.y-$t.y;this.options.tms&&(Vt.y=tn),Vt["-y"]=tn}return Kt(this._url,bt(Vt,this.options))},_tileOnLoad:function($t,Vt){wi.ielt9?setTimeout(Et($t,this,null,Vt),0):$t(null,Vt)},_tileOnError:function($t,Vt,tn){var pn=this.options.errorTileUrl;pn&&Vt.getAttribute("src")!==pn&&(Vt.src=pn),$t(tn,Vt)},_onTileRemove:function($t){$t.tile.onload=null},_getZoomForUrl:function(){var $t=this._tileZoom,Vt=this.options.maxZoom,tn=this.options.zoomReverse,pn=this.options.zoomOffset;return tn&&($t=Vt-$t),$t+pn},_getSubdomain:function($t){var Vt=Math.abs($t.x+$t.y)%this.options.subdomains.length;return this.options.subdomains[Vt]},_abortLoading:function(){var $t,Vt;for($t in this._tiles)if(this._tiles[$t].coords.z!==this._tileZoom&&(Vt=this._tiles[$t].el,Vt.onload=Dt,Vt.onerror=Dt,!Vt.complete)){Vt.src=mn;var tn=this._tiles[$t].coords;br(Vt),delete this._tiles[$t],this.fire("tileabort",{tile:Vt,coords:tn})}},_removeTile:function($t){var Vt=this._tiles[$t];if(!!Vt)return Vt.el.setAttribute("src",mn),bd.prototype._removeTile.call(this,$t)},_tileReady:function($t,Vt,tn){if(!(!this._map||tn&&tn.getAttribute("src")===mn))return bd.prototype._tileReady.call(this,$t,Vt,tn)}});function xd($t,Vt){return new ku($t,Vt)}var Bh=ku.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function($t,Vt){this._url=$t;var tn=bt({},this.defaultWmsParams);for(var pn in Vt)pn in this.options||(tn[pn]=Vt[pn]);Vt=Zt(this,Vt);var In=Vt.detectRetina&&wi.retina?2:1,Jn=this.getTileSize();tn.width=Jn.x*In,tn.height=Jn.y*In,this.wmsParams=tn},onAdd:function($t){this._crs=this.options.crs||$t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var Vt=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[Vt]=this._crs.code,ku.prototype.onAdd.call(this,$t)},getTileUrl:function($t){var Vt=this._tileCoordsToNwSe($t),tn=this._crs,pn=or(tn.project(Vt[0]),tn.project(Vt[1])),In=pn.min,Jn=pn.max,Tr=(this._wmsVersion>=1.3&&this._crs===Fa?[In.y,In.x,Jn.y,Jn.x]:[In.x,In.y,Jn.x,Jn.y]).join(","),Vr=ku.prototype.getTileUrl.call(this,$t);return Vr+Wt(this.wmsParams,Vr,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Tr},setParams:function($t,Vt){return bt(this.wmsParams,$t),Vt||this.redraw(),this}});function vp($t,Vt){return new Bh($t,Vt)}ku.WMS=Bh,xd.wms=vp;var pc=Ps.extend({options:{padding:.1},initialize:function($t){Zt(this,$t),Lt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Eo(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var $t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&($t.zoomanim=this._onAnimZoom),$t},_onAnimZoom:function($t){this._updateTransform($t.center,$t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function($t,Vt){var tn=this._map.getZoomScale(Vt,this._zoom),pn=this._map.getSize().multiplyBy(.5+this.options.padding),In=this._map.project(this._center,Vt),Jn=pn.multiplyBy(-tn).add(In).subtract(this._map._getNewPixelOrigin($t,Vt));wi.any3d?cc(this._container,Jn,tn):Hs(this._container,Jn)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var $t in this._layers)this._layers[$t]._reset()},_onZoomEnd:function(){for(var $t in this._layers)this._layers[$t]._project()},_updatePaths:function(){for(var $t in this._layers)this._layers[$t]._update()},_update:function(){var $t=this.options.padding,Vt=this._map.getSize(),tn=this._map.containerPointToLayerPoint(Vt.multiplyBy(-$t)).round();this._bounds=new dr(tn,tn.add(Vt.multiplyBy(1+$t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ff=pc.extend({options:{tolerance:0},getEvents:function(){var $t=pc.prototype.getEvents.call(this);return $t.viewprereset=this._onViewPreReset,$t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var $t=this._container=document.createElement("canvas");Co($t,"mousemove",this._onMouseMove,this),Co($t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Co($t,"mouseout",this._handleMouseOut,this),$t._leaflet_disable_events=!0,this._ctx=$t.getContext("2d")},_destroyContainer:function(){cn(this._redrawRequest),delete this._ctx,br(this._container),co(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var $t;this._redrawBounds=null;for(var Vt in this._layers)$t=this._layers[Vt],$t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pc.prototype._update.call(this);var $t=this._bounds,Vt=this._container,tn=$t.getSize(),pn=wi.retina?2:1;Hs(Vt,$t.min),Vt.width=pn*tn.x,Vt.height=pn*tn.y,Vt.style.width=tn.x+"px",Vt.style.height=tn.y+"px",wi.retina&&this._ctx.scale(2,2),this._ctx.translate(-$t.min.x,-$t.min.y),this.fire("update")}},_reset:function(){pc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function($t){this._updateDashArray($t),this._layers[Lt($t)]=$t;var Vt=$t._order={layer:$t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=Vt),this._drawLast=Vt,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function($t){this._requestRedraw($t)},_removePath:function($t){var Vt=$t._order,tn=Vt.next,pn=Vt.prev;tn?tn.prev=pn:this._drawLast=pn,pn?pn.next=tn:this._drawFirst=tn,delete $t._order,delete this._layers[Lt($t)],this._requestRedraw($t)},_updatePath:function($t){this._extendRedrawBounds($t),$t._project(),$t._update(),this._requestRedraw($t)},_updateStyle:function($t){this._updateDashArray($t),this._requestRedraw($t)},_updateDashArray:function($t){if(typeof $t.options.dashArray=="string"){var Vt=$t.options.dashArray.split(/[, ]+/),tn=[],pn,In;for(In=0;In<Vt.length;In++){if(pn=Number(Vt[In]),isNaN(pn))return;tn.push(pn)}$t.options._dashArray=tn}else $t.options._dashArray=$t.options.dashArray},_requestRedraw:function($t){!this._map||(this._extendRedrawBounds($t),this._redrawRequest=this._redrawRequest||$n(this._redraw,this))},_extendRedrawBounds:function($t){if($t._pxBounds){var Vt=($t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new dr,this._redrawBounds.extend($t._pxBounds.min.subtract([Vt,Vt])),this._redrawBounds.extend($t._pxBounds.max.add([Vt,Vt]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var $t=this._redrawBounds;if($t){var Vt=$t.getSize();this._ctx.clearRect($t.min.x,$t.min.y,Vt.x,Vt.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var $t,Vt=this._redrawBounds;if(this._ctx.save(),Vt){var tn=Vt.getSize();this._ctx.beginPath(),this._ctx.rect(Vt.min.x,Vt.min.y,tn.x,tn.y),this._ctx.clip()}this._drawing=!0;for(var pn=this._drawFirst;pn;pn=pn.next)$t=pn.layer,(!Vt||$t._pxBounds&&$t._pxBounds.intersects(Vt))&&$t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function($t,Vt){if(!!this._drawing){var tn,pn,In,Jn,Tr=$t._parts,Vr=Tr.length,Jr=this._ctx;if(!!Vr){for(Jr.beginPath(),tn=0;tn<Vr;tn++){for(pn=0,In=Tr[tn].length;pn<In;pn++)Jn=Tr[tn][pn],Jr[pn?"lineTo":"moveTo"](Jn.x,Jn.y);Vt&&Jr.closePath()}this._fillStroke(Jr,$t)}}},_updateCircle:function($t){if(!(!this._drawing||$t._empty())){var Vt=$t._point,tn=this._ctx,pn=Math.max(Math.round($t._radius),1),In=(Math.max(Math.round($t._radiusY),1)||pn)/pn;In!==1&&(tn.save(),tn.scale(1,In)),tn.beginPath(),tn.arc(Vt.x,Vt.y/In,pn,0,Math.PI*2,!1),In!==1&&tn.restore(),this._fillStroke(tn,$t)}},_fillStroke:function($t,Vt){var tn=Vt.options;tn.fill&&($t.globalAlpha=tn.fillOpacity,$t.fillStyle=tn.fillColor||tn.color,$t.fill(tn.fillRule||"evenodd")),tn.stroke&&tn.weight!==0&&($t.setLineDash&&$t.setLineDash(Vt.options&&Vt.options._dashArray||[]),$t.globalAlpha=tn.opacity,$t.lineWidth=tn.weight,$t.strokeStyle=tn.color,$t.lineCap=tn.lineCap,$t.lineJoin=tn.lineJoin,$t.stroke())},_onClick:function($t){for(var Vt=this._map.mouseEventToLayerPoint($t),tn,pn,In=this._drawFirst;In;In=In.next)tn=In.layer,tn.options.interactive&&tn._containsPoint(Vt)&&(!($t.type==="click"||$t.type==="preclick")||!this._map._draggableMoved(tn))&&(pn=tn);this._fireEvent(pn?[pn]:!1,$t)},_onMouseMove:function($t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var Vt=this._map.mouseEventToLayerPoint($t);this._handleMouseHover($t,Vt)}},_handleMouseOut:function($t){var Vt=this._hoveredLayer;Vt&&(ro(this._container,"leaflet-interactive"),this._fireEvent([Vt],$t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function($t,Vt){if(!this._mouseHoverThrottled){for(var tn,pn,In=this._drawFirst;In;In=In.next)tn=In.layer,tn.options.interactive&&tn._containsPoint(Vt)&&(pn=tn);pn!==this._hoveredLayer&&(this._handleMouseOut($t),pn&&(Eo(this._container,"leaflet-interactive"),this._fireEvent([pn],$t,"mouseover"),this._hoveredLayer=pn)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,$t),this._mouseHoverThrottled=!0,setTimeout(Et(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function($t,Vt,tn){this._map._fireDOMEvent(Vt,tn||Vt.type,$t)},_bringToFront:function($t){var Vt=$t._order;if(!!Vt){var tn=Vt.next,pn=Vt.prev;if(tn)tn.prev=pn;else return;pn?pn.next=tn:tn&&(this._drawFirst=tn),Vt.prev=this._drawLast,this._drawLast.next=Vt,Vt.next=null,this._drawLast=Vt,this._requestRedraw($t)}},_bringToBack:function($t){var Vt=$t._order;if(!!Vt){var tn=Vt.next,pn=Vt.prev;if(pn)pn.next=tn;else return;tn?tn.prev=pn:pn&&(this._drawLast=pn),Vt.prev=null,Vt.next=this._drawFirst,this._drawFirst.prev=Vt,this._drawFirst=Vt,this._requestRedraw($t)}}});function pf($t){return wi.canvas?new ff($t):null}var Au=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function($t){return document.createElement("<lvml:"+$t+' class="lvml">')}}catch{}return function($t){return document.createElement("<"+$t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Tl={_initContainer:function(){this._container=Yi("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pc.prototype._update.call(this),this.fire("update"))},_initPath:function($t){var Vt=$t._container=Au("shape");Eo(Vt,"leaflet-vml-shape "+(this.options.className||"")),Vt.coordsize="1 1",$t._path=Au("path"),Vt.appendChild($t._path),this._updateStyle($t),this._layers[Lt($t)]=$t},_addPath:function($t){var Vt=$t._container;this._container.appendChild(Vt),$t.options.interactive&&$t.addInteractiveTarget(Vt)},_removePath:function($t){var Vt=$t._container;br(Vt),$t.removeInteractiveTarget(Vt),delete this._layers[Lt($t)]},_updateStyle:function($t){var Vt=$t._stroke,tn=$t._fill,pn=$t.options,In=$t._container;In.stroked=!!pn.stroke,In.filled=!!pn.fill,pn.stroke?(Vt||(Vt=$t._stroke=Au("stroke")),In.appendChild(Vt),Vt.weight=pn.weight+"px",Vt.color=pn.color,Vt.opacity=pn.opacity,pn.dashArray?Vt.dashStyle=on(pn.dashArray)?pn.dashArray.join(" "):pn.dashArray.replace(/( *, *)/g," "):Vt.dashStyle="",Vt.endcap=pn.lineCap.replace("butt","flat"),Vt.joinstyle=pn.lineJoin):Vt&&(In.removeChild(Vt),$t._stroke=null),pn.fill?(tn||(tn=$t._fill=Au("fill")),In.appendChild(tn),tn.color=pn.fillColor||pn.color,tn.opacity=pn.fillOpacity):tn&&(In.removeChild(tn),$t._fill=null)},_updateCircle:function($t){var Vt=$t._point.round(),tn=Math.round($t._radius),pn=Math.round($t._radiusY||tn);this._setPath($t,$t._empty()?"M0 0":"AL "+Vt.x+","+Vt.y+" "+tn+","+pn+" 0,"+65535*360)},_setPath:function($t,Vt){$t._path.v=Vt},_bringToFront:function($t){Pr($t._container)},_bringToBack:function($t){ta($t._container)}},gf=wi.vml?Au:fn,Fh=pc.extend({_initContainer:function(){this._container=gf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){br(this._container),co(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pc.prototype._update.call(this);var $t=this._bounds,Vt=$t.getSize(),tn=this._container;(!this._svgSize||!this._svgSize.equals(Vt))&&(this._svgSize=Vt,tn.setAttribute("width",Vt.x),tn.setAttribute("height",Vt.y)),Hs(tn,$t.min),tn.setAttribute("viewBox",[$t.min.x,$t.min.y,Vt.x,Vt.y].join(" ")),this.fire("update")}},_initPath:function($t){var Vt=$t._path=gf("path");$t.options.className&&Eo(Vt,$t.options.className),$t.options.interactive&&Eo(Vt,"leaflet-interactive"),this._updateStyle($t),this._layers[Lt($t)]=$t},_addPath:function($t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild($t._path),$t.addInteractiveTarget($t._path)},_removePath:function($t){br($t._path),$t.removeInteractiveTarget($t._path),delete this._layers[Lt($t)]},_updatePath:function($t){$t._project(),$t._update()},_updateStyle:function($t){var Vt=$t._path,tn=$t.options;!Vt||(tn.stroke?(Vt.setAttribute("stroke",tn.color),Vt.setAttribute("stroke-opacity",tn.opacity),Vt.setAttribute("stroke-width",tn.weight),Vt.setAttribute("stroke-linecap",tn.lineCap),Vt.setAttribute("stroke-linejoin",tn.lineJoin),tn.dashArray?Vt.setAttribute("stroke-dasharray",tn.dashArray):Vt.removeAttribute("stroke-dasharray"),tn.dashOffset?Vt.setAttribute("stroke-dashoffset",tn.dashOffset):Vt.removeAttribute("stroke-dashoffset")):Vt.setAttribute("stroke","none"),tn.fill?(Vt.setAttribute("fill",tn.fillColor||tn.color),Vt.setAttribute("fill-opacity",tn.fillOpacity),Vt.setAttribute("fill-rule",tn.fillRule||"evenodd")):Vt.setAttribute("fill","none"))},_updatePoly:function($t,Vt){this._setPath($t,On($t._parts,Vt))},_updateCircle:function($t){var Vt=$t._point,tn=Math.max(Math.round($t._radius),1),pn=Math.max(Math.round($t._radiusY),1)||tn,In="a"+tn+","+pn+" 0 1,0 ",Jn=$t._empty()?"M0 0":"M"+(Vt.x-tn)+","+Vt.y+In+tn*2+",0 "+In+-tn*2+",0 ";this._setPath($t,Jn)},_setPath:function($t,Vt){$t._path.setAttribute("d",Vt)},_bringToFront:function($t){Pr($t._path)},_bringToBack:function($t){ta($t._path)}});wi.vml&&Fh.include(Tl);function _p($t){return wi.svg||wi.vml?new Fh($t):null}ds.include({getRenderer:function($t){var Vt=$t.options.renderer||this._getPaneRenderer($t.options.pane)||this.options.renderer||this._renderer;return Vt||(Vt=this._renderer=this._createRenderer()),this.hasLayer(Vt)||this.addLayer(Vt),Vt},_getPaneRenderer:function($t){if($t==="overlayPane"||$t===void 0)return!1;var Vt=this._paneRenderers[$t];return Vt===void 0&&(Vt=this._createRenderer({pane:$t}),this._paneRenderers[$t]=Vt),Vt},_createRenderer:function($t){return this.options.preferCanvas&&pf($t)||_p($t)}});var mf=Nh.extend({initialize:function($t,Vt){Nh.prototype.initialize.call(this,this._boundsToLatLngs($t),Vt)},setBounds:function($t){return this.setLatLngs(this._boundsToLatLngs($t))},_boundsToLatLngs:function($t){return $t=Cr($t),[$t.getSouthWest(),$t.getNorthWest(),$t.getNorthEast(),$t.getSouthEast()]}});function Ag($t,Vt){return new mf($t,Vt)}Fh.create=gf,Fh.pointsToPath=On,js.geometryToLayer=cf,js.coordsToLatLng=Sl,js.coordsToLatLngs=Cl,js.latLngToCoords=Nc,js.latLngsToCoords=th,js.getFeature=nh,js.asFeature=vd,ds.mergeOptions({boxZoom:!0});var yf=Aa.extend({initialize:function($t){this._map=$t,this._container=$t._container,this._pane=$t._panes.overlayPane,this._resetStateTimeout=0,$t.on("unload",this._destroy,this)},addHooks:function(){Co(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){co(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){br(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function($t){if(!$t.shiftKey||$t.which!==1&&$t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Wa(),Xl(),this._startPoint=this._map.mouseEventToContainerPoint($t),Co(document,{contextmenu:Cu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function($t){this._moved||(this._moved=!0,this._box=Yi("div","leaflet-zoom-box",this._container),Eo(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint($t);var Vt=new dr(this._point,this._startPoint),tn=Vt.getSize();Hs(this._box,Vt.min),this._box.style.width=tn.x+"px",this._box.style.height=tn.y+"px"},_finish:function(){this._moved&&(br(this._box),ro(this._container,"leaflet-crosshair")),na(),el(),co(document,{contextmenu:Cu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function($t){if(!($t.which!==1&&$t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Et(this._resetState,this),0);var Vt=new ur(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(Vt).fire("boxzoomend",{boxZoomBounds:Vt})}},_onKeyDown:function($t){$t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ds.addInitHook("addHandler","boxZoom",yf),ds.mergeOptions({doubleClickZoom:!0});var zh=Aa.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function($t){var Vt=this._map,tn=Vt.getZoom(),pn=Vt.options.zoomDelta,In=$t.originalEvent.shiftKey?tn-pn:tn+pn;Vt.options.doubleClickZoom==="center"?Vt.setZoom(In):Vt.setZoomAround($t.containerPoint,In)}});ds.addInitHook("addHandler","doubleClickZoom",zh),ds.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var wd=Aa.extend({addHooks:function(){if(!this._draggable){var $t=this._map;this._draggable=new hc($t._mapPane,$t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),$t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),$t.on("zoomend",this._onZoomEnd,this),$t.whenReady(this._onZoomEnd,this))}Eo(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ro(this._map._container,"leaflet-grab"),ro(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var $t=this._map;if($t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var Vt=Cr(this._map.options.maxBounds);this._offsetLimit=or(this._map.latLngToContainerPoint(Vt.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(Vt.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;$t.fire("movestart").fire("dragstart"),$t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function($t){if(this._map.options.inertia){var Vt=this._lastTime=+new Date,tn=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(tn),this._times.push(Vt),this._prunePositions(Vt)}this._map.fire("move",$t).fire("drag",$t)},_prunePositions:function($t){for(;this._positions.length>1&&$t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var $t=this._map.getSize().divideBy(2),Vt=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=Vt.subtract($t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function($t,Vt){return $t-($t-Vt)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var $t=this._draggable._newPos.subtract(this._draggable._startPos),Vt=this._offsetLimit;$t.x<Vt.min.x&&($t.x=this._viscousLimit($t.x,Vt.min.x)),$t.y<Vt.min.y&&($t.y=this._viscousLimit($t.y,Vt.min.y)),$t.x>Vt.max.x&&($t.x=this._viscousLimit($t.x,Vt.max.x)),$t.y>Vt.max.y&&($t.y=this._viscousLimit($t.y,Vt.max.y)),this._draggable._newPos=this._draggable._startPos.add($t)}},_onPreDragWrap:function(){var $t=this._worldWidth,Vt=Math.round($t/2),tn=this._initialWorldOffset,pn=this._draggable._newPos.x,In=(pn-Vt+tn)%$t+Vt-tn,Jn=(pn+Vt+tn)%$t-Vt-tn,Tr=Math.abs(In+tn)<Math.abs(Jn+tn)?In:Jn;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Tr},_onDragEnd:function($t){var Vt=this._map,tn=Vt.options,pn=!tn.inertia||$t.noInertia||this._times.length<2;if(Vt.fire("dragend",$t),pn)Vt.fire("moveend");else{this._prunePositions(+new Date);var In=this._lastPos.subtract(this._positions[0]),Jn=(this._lastTime-this._times[0])/1e3,Tr=tn.easeLinearity,Vr=In.multiplyBy(Tr/Jn),Jr=Vr.distanceTo([0,0]),oi=Math.min(tn.inertiaMaxSpeed,Jr),$i=Vr.multiplyBy(oi/Jr),uo=oi/(tn.inertiaDeceleration*Tr),Oo=$i.multiplyBy(-uo/2).round();!Oo.x&&!Oo.y?Vt.fire("moveend"):(Oo=Vt._limitOffset(Oo,Vt.options.maxBounds),$n(function(){Vt.panBy(Oo,{duration:uo,easeLinearity:Tr,noMoveStart:!0,animate:!0})}))}}});ds.addInitHook("addHandler","dragging",wd),ds.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Lg=Aa.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function($t){this._map=$t,this._setPanDelta($t.options.keyboardPanDelta),this._setZoomDelta($t.options.zoomDelta)},addHooks:function(){var $t=this._map._container;$t.tabIndex<=0&&($t.tabIndex="0"),Co($t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),co(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var $t=document.body,Vt=document.documentElement,tn=$t.scrollTop||Vt.scrollTop,pn=$t.scrollLeft||Vt.scrollLeft;this._map._container.focus(),window.scrollTo(pn,tn)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function($t){var Vt=this._panKeys={},tn=this.keyCodes,pn,In;for(pn=0,In=tn.left.length;pn<In;pn++)Vt[tn.left[pn]]=[-1*$t,0];for(pn=0,In=tn.right.length;pn<In;pn++)Vt[tn.right[pn]]=[$t,0];for(pn=0,In=tn.down.length;pn<In;pn++)Vt[tn.down[pn]]=[0,$t];for(pn=0,In=tn.up.length;pn<In;pn++)Vt[tn.up[pn]]=[0,-1*$t]},_setZoomDelta:function($t){var Vt=this._zoomKeys={},tn=this.keyCodes,pn,In;for(pn=0,In=tn.zoomIn.length;pn<In;pn++)Vt[tn.zoomIn[pn]]=$t;for(pn=0,In=tn.zoomOut.length;pn<In;pn++)Vt[tn.zoomOut[pn]]=-$t},_addHooks:function(){Co(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){co(document,"keydown",this._onKeyDown,this)},_onKeyDown:function($t){if(!($t.altKey||$t.ctrlKey||$t.metaKey)){var Vt=$t.keyCode,tn=this._map,pn;if(Vt in this._panKeys){if(!tn._panAnim||!tn._panAnim._inProgress)if(pn=this._panKeys[Vt],$t.shiftKey&&(pn=nr(pn).multiplyBy(3)),tn.options.maxBounds&&(pn=tn._limitOffset(nr(pn),tn.options.maxBounds)),tn.options.worldCopyJump){var In=tn.wrapLatLng(tn.unproject(tn.project(tn.getCenter()).add(pn)));tn.panTo(In)}else tn.panBy(pn)}else if(Vt in this._zoomKeys)tn.setZoom(tn.getZoom()+($t.shiftKey?3:1)*this._zoomKeys[Vt]);else if(Vt===27&&tn._popup&&tn._popup.options.closeOnEscapeKey)tn.closePopup();else return;Cu($t)}}});ds.addInitHook("addHandler","keyboard",Lg),ds.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rh=Aa.extend({addHooks:function(){Co(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){co(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function($t){var Vt=yg($t),tn=this._map.options.wheelDebounceTime;this._delta+=Vt,this._lastMousePos=this._map.mouseEventToContainerPoint($t),this._startTime||(this._startTime=+new Date);var pn=Math.max(tn-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Et(this._performZoom,this),pn),Cu($t)},_performZoom:function(){var $t=this._map,Vt=$t.getZoom(),tn=this._map.options.zoomSnap||0;$t._stop();var pn=this._delta/(this._map.options.wheelPxPerZoomLevel*4),In=4*Math.log(2/(1+Math.exp(-Math.abs(pn))))/Math.LN2,Jn=tn?Math.ceil(In/tn)*tn:In,Tr=$t._limitZoom(Vt+(this._delta>0?Jn:-Jn))-Vt;this._delta=0,this._startTime=null,Tr&&($t.options.scrollWheelZoom==="center"?$t.setZoom(Vt+Tr):$t.setZoomAround(this._lastMousePos,Vt+Tr))}});ds.addInitHook("addHandler","scrollWheelZoom",rh);var zm=600;ds.mergeOptions({tapHold:wi.touchNative&&wi.safari&&wi.mobile,tapTolerance:15});var bp=Aa.extend({addHooks:function(){Co(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){co(this._map._container,"touchstart",this._onDown,this)},_onDown:function($t){if(clearTimeout(this._holdTimeout),$t.touches.length===1){var Vt=$t.touches[0];this._startPos=this._newPos=new ir(Vt.clientX,Vt.clientY),this._holdTimeout=setTimeout(Et(function(){this._cancel(),this._isTapValid()&&(Co(document,"touchend",ua),Co(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",Vt))},this),zm),Co(document,"touchend touchcancel contextmenu",this._cancel,this),Co(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function $t(){co(document,"touchend",ua),co(document,"touchend touchcancel",$t)},_cancel:function(){clearTimeout(this._holdTimeout),co(document,"touchend touchcancel contextmenu",this._cancel,this),co(document,"touchmove",this._onMove,this)},_onMove:function($t){var Vt=$t.touches[0];this._newPos=new ir(Vt.clientX,Vt.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function($t,Vt){var tn=new MouseEvent($t,{bubbles:!0,cancelable:!0,view:window,screenX:Vt.screenX,screenY:Vt.screenY,clientX:Vt.clientX,clientY:Vt.clientY});tn._simulated=!0,Vt.target.dispatchEvent(tn)}});ds.addInitHook("addHandler","tapHold",bp),ds.mergeOptions({touchZoom:wi.touch,bounceAtZoomLimits:!0});var Hh=Aa.extend({addHooks:function(){Eo(this._map._container,"leaflet-touch-zoom"),Co(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ro(this._map._container,"leaflet-touch-zoom"),co(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function($t){var Vt=this._map;if(!(!$t.touches||$t.touches.length!==2||Vt._animatingZoom||this._zooming)){var tn=Vt.mouseEventToContainerPoint($t.touches[0]),pn=Vt.mouseEventToContainerPoint($t.touches[1]);this._centerPoint=Vt.getSize()._divideBy(2),this._startLatLng=Vt.containerPointToLatLng(this._centerPoint),Vt.options.touchZoom!=="center"&&(this._pinchStartLatLng=Vt.containerPointToLatLng(tn.add(pn)._divideBy(2))),this._startDist=tn.distanceTo(pn),this._startZoom=Vt.getZoom(),this._moved=!1,this._zooming=!0,Vt._stop(),Co(document,"touchmove",this._onTouchMove,this),Co(document,"touchend touchcancel",this._onTouchEnd,this),ua($t)}},_onTouchMove:function($t){if(!(!$t.touches||$t.touches.length!==2||!this._zooming)){var Vt=this._map,tn=Vt.mouseEventToContainerPoint($t.touches[0]),pn=Vt.mouseEventToContainerPoint($t.touches[1]),In=tn.distanceTo(pn)/this._startDist;if(this._zoom=Vt.getScaleZoom(In,this._startZoom),!Vt.options.bounceAtZoomLimits&&(this._zoom<Vt.getMinZoom()&&In<1||this._zoom>Vt.getMaxZoom()&&In>1)&&(this._zoom=Vt._limitZoom(this._zoom)),Vt.options.touchZoom==="center"){if(this._center=this._startLatLng,In===1)return}else{var Jn=tn._add(pn)._divideBy(2)._subtract(this._centerPoint);if(In===1&&Jn.x===0&&Jn.y===0)return;this._center=Vt.unproject(Vt.project(this._pinchStartLatLng,this._zoom).subtract(Jn),this._zoom)}this._moved||(Vt._moveStart(!0,!1),this._moved=!0),cn(this._animRequest);var Tr=Et(Vt._move,Vt,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$n(Tr,this,!0),ua($t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,cn(this._animRequest),co(document,"touchmove",this._onTouchMove,this),co(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ds.addInitHook("addHandler","touchZoom",Hh),ds.BoxZoom=yf,ds.DoubleClickZoom=zh,ds.Drag=wd,ds.Keyboard=Lg,ds.ScrollWheelZoom=rh,ds.TapHold=bp,ds.TouchZoom=Hh,it.Bounds=dr,it.Browser=wi,it.CRS=Fr,it.Canvas=ff,it.Circle=lf,it.CircleMarker=af,it.Class=an,it.Control=wl,it.DivIcon=yp,it.DivOverlay=Vs,it.DomEvent=ul,it.DomUtil=Xu,it.Draggable=hc,it.Evented=zn,it.FeatureGroup=La,it.GeoJSON=js,it.GridLayer=bd,it.Handler=Aa,it.Icon=fc,it.ImageOverlay=ou,it.LatLng=Sr,it.LatLngBounds=ur,it.Layer=Ps,it.LayerGroup=Nl,it.LineUtil=Mc,it.Map=ds,it.Marker=eh,it.Mixin=hp,it.Path=ru,it.Point=ir,it.PolyUtil=Rm,it.Polygon=Nh,it.Polyline=iu,it.Popup=Dh,it.PosAnimation=Qd,it.Projection=$h,it.Rectangle=mf,it.Renderer=pc,it.SVG=Fh,it.SVGOverlay=Xs,it.TileLayer=ku,it.Tooltip=Tu,it.Transformation=pr,it.Util=Sn,it.VideoOverlay=mp,it.bind=Et,it.bounds=or,it.canvas=pf,it.circle=Nm,it.circleMarker=Mm,it.control=Ih,it.divIcon=df,it.extend=bt,it.featureGroup=Sa,it.geoJSON=uf,it.geoJson=Bm,it.gridLayer=kg,it.icon=Sg,it.imageOverlay=Fm,it.latLng=rr,it.latLngBounds=Cr,it.layerGroup=Rh,it.map=Om,it.marker=pp,it.point=nr,it.polygon=Dm,it.polyline=gp,it.popup=Dc,it.rectangle=Ag,it.setOptions=Zt,it.stamp=Lt,it.svg=_p,it.svgOverlay=Cg,it.tileLayer=xd,it.tooltip=Tg,it.transformation=Cn,it.version=st,it.videoOverlay=hf;var jh=window.L;it.noConflict=function(){return window.L=jh,this},window.L=it})})(leafletSrc,leafletSrc.exports);const L$1=leafletSrc.exports;var leafletGestureHandling_min={exports:{}};(function(nt,rt){(function(it,st){st(rt)})(commonjsGlobal$1,function(it){var st={ar:{touch:"\u0627\u0633\u062A\u062E\u062F\u0645 \u0625\u0635\u0628\u0639\u064A\u0646 \u0644\u062A\u062D\u0631\u064A\u0643 \u0627\u0644\u062E\u0631\u064A\u0637\u0629",scroll:"\u200F\u0627\u0633\u062A\u062E\u062F\u0645 ctrl + scroll \u0644\u062A\u0635\u063A\u064A\u0631/\u062A\u0643\u0628\u064A\u0631 \u0627\u0644\u062E\u0631\u064A\u0637\u0629",scrollMac:"\u064A\u0645\u0643\u0646\u0643 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u2318 + \u0627\u0644\u062A\u0645\u0631\u064A\u0631 \u0644\u062A\u0643\u0628\u064A\u0631/\u062A\u0635\u063A\u064A\u0631 \u0627\u0644\u062E\u0631\u064A\u0637\u0629"},bg:{touch:"\u0418\u0437\u043F\u043E\u043B\u0437\u0432\u0430\u0439\u0442\u0435 \u0434\u0432\u0430 \u043F\u0440\u044A\u0441\u0442\u0430, \u0437\u0430 \u0434\u0430 \u043F\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u0435 \u043A\u0430\u0440\u0442\u0430\u0442\u0430",scroll:"\u0417\u0430\u0434\u0440\u044A\u0436\u0442\u0435 \u0431\u0443\u0442\u043E\u043D\u0430 Ctrl \u043D\u0430\u0442\u0438\u0441\u043D\u0430\u0442, \u0434\u043E\u043A\u0430\u0442\u043E \u043F\u0440\u0435\u0432\u044A\u0440\u0442\u0430\u0442\u0435, \u0437\u0430 \u0434\u0430 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u043C\u0430\u0449\u0430\u0431\u0430 \u043D\u0430 \u043A\u0430\u0440\u0442\u0430\u0442\u0430",scrollMac:"\u0417\u0430\u0434\u0440\u044A\u0436\u0442\u0435 \u0431\u0443\u0442\u043E\u043D\u0430 \u2318 \u043D\u0430\u0442\u0438\u0441\u043D\u0430\u0442, \u0434\u043E\u043A\u0430\u0442\u043E \u043F\u0440\u0435\u0432\u044A\u0440\u0442\u0430\u0442\u0435, \u0437\u0430 \u0434\u0430 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u043C\u0430\u0449\u0430\u0431\u0430 \u043D\u0430 \u043A\u0430\u0440\u0442\u0430\u0442\u0430"},bn:{touch:"\u09AE\u09BE\u09A8\u099A\u09BF\u09A4\u09CD\u09B0\u099F\u09BF\u0995\u09C7 \u09B8\u09B0\u09BE\u09A4\u09C7 \u09A6\u09C1\u099F\u09BF \u0986\u0999\u09CD\u0997\u09C1\u09B2 \u09AC\u09CD\u09AF\u09AC\u09B9\u09BE\u09B0 \u0995\u09B0\u09C1\u09A8",scroll:"\u09AE\u09CD\u09AF\u09BE\u09AA \u099C\u09C1\u09AE \u0995\u09B0\u09A4\u09C7 ctrl + scroll \u09AC\u09CD\u09AF\u09AC\u09B9\u09BE\u09B0 \u0995\u09B0\u09C1\u09A8",scrollMac:"\u09AE\u09CD\u09AF\u09BE\u09AA\u09C7 \u099C\u09C1\u09AE \u0995\u09B0\u09A4\u09C7 \u2318 \u09AC\u09CB\u09A4\u09BE\u09AE \u099F\u09BF\u09AA\u09C7 \u09B8\u09CD\u0995\u09CD\u09B0\u09B2 \u0995\u09B0\u09C1\u09A8"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla \u2318 mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K\xA0posunut\xED mapy pou\u017Eijte dva prsty",scroll:"Velikost zobrazen\xED mapy zm\u011B\u0148te podr\u017Een\xEDm kl\xE1vesy Ctrl a\xA0posouv\xE1n\xEDm kole\u010Dka my\u0161i",scrollMac:"Velikost zobrazen\xED mapy zm\u011Bn\xEDte podr\u017Een\xEDm kl\xE1vesy \u2318 a\xA0posunut\xEDm kole\u010Dka my\u0161i / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud p\xE5 kortet",scrollMac:"Brug \u2318 + rullefunktionen til at zoome ind og ud p\xE5 kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"\u2318"},el:{touch:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03B4\u03CD\u03BF \u03B4\u03AC\u03C7\u03C4\u03C5\u03BB\u03B1 \u03B3\u03B9\u03B1 \u03BC\u03B5\u03C4\u03B1\u03BA\u03AF\u03BD\u03B7\u03C3\u03B7 \u03C3\u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7",scroll:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03BB\u03AE\u03BA\u03C4\u03C1\u03BF Ctrl \u03BA\u03B1\u03B9 \u03BA\u03CD\u03BB\u03B9\u03C3\u03B7, \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BC\u03B5\u03B3\u03B5\u03B8\u03CD\u03BD\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7",scrollMac:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03BB\u03AE\u03BA\u03C4\u03C1\u03BF \u2318 + \u03BA\u03CD\u03BB\u03B9\u03C3\u03B7 \u03B3\u03B9\u03B1 \u03B5\u03C3\u03C4\u03AF\u03B1\u03C3\u03B7 \u03C3\u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mant\xE9n pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mant\xE9n pulsada la tecla \u2318 mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta \u2318 eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"\u0628\u0631\u0627\u06CC \u062D\u0631\u06A9\u062A \u062F\u0627\u062F\u0646 \u0646\u0642\u0634\u0647 \u0627\u0632 \u062F\u0648 \u0627\u0646\u06AF\u0634\u062A \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F.",scroll:"\u200F\u0628\u0631\u0627\u06CC \u0628\u0632\u0631\u06AF\u200C\u0646\u0645\u0627\u06CC\u06CC \u0646\u0642\u0634\u0647 \u0627\u0632 ctrl + scroll \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F",scrollMac:"\u0628\u0631\u0627\u06CC \u0628\u0632\u0631\u06AF\u200C\u0646\u0645\u0627\u06CC\u06CC \u0646\u0642\u0634\u0647\u060C \u0627\u0632 \u2318 + \u067E\u06CC\u0645\u0627\u06CC\u0634 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F."},fi:{touch:"Siirr\xE4 karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vieritt\xE4m\xE4ll\xE4.",scrollMac:"Zoomaa karttaa pit\xE4m\xE4ll\xE4 painike \u2318 painettuna ja vieritt\xE4m\xE4ll\xE4."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang \u2318 + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux\xA0doigts pour d\xE9placer la carte",scroll:"Vous pouvez zoomer sur la carte \xE0 l'aide de CTRL+Molette de d\xE9filement",scrollMac:"Vous pouvez zoomer sur la carte \xE0 l'aide de \u2318+Molette de d\xE9filement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme \u2318 e despr\xE1zate para ampliar o mapa"},gu:{touch:"\u0AA8\u0A95\u0AB6\u0ACB \u0A96\u0AB8\u0AC7\u0AA1\u0AB5\u0ABE \u0AAC\u0AC7 \u0A86\u0A82\u0A97\u0AB3\u0AC0\u0A93\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB",scroll:"\u0AA8\u0A95\u0AB6\u0ABE\u0AA8\u0AC7 \u0A9D\u0AC2\u0AAE \u0A95\u0AB0\u0AB5\u0ABE \u0AAE\u0ABE\u0A9F\u0AC7 ctrl + \u0AB8\u0ACD\u0A95\u0ACD\u0AB0\u0ACB\u0AB2\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB",scrollMac:"\u0AA8\u0A95\u0AB6\u0ABE\u0AA8\u0AC7 \u0A9D\u0AC2\u0AAE \u0A95\u0AB0\u0AB5\u0ABE \u2318 + \u0AB8\u0ACD\u0A95\u0ACD\u0AB0\u0ACB\u0AB2\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB"},hi:{touch:"\u092E\u0948\u092A \u090F\u0915 \u091C\u0917\u0939 \u0938\u0947 \u0926\u0942\u0938\u0930\u0940 \u091C\u0917\u0939 \u0932\u0947 \u091C\u093E\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u0926\u094B \u0909\u0902\u0917\u0932\u093F\u092F\u094B\u0902 \u0915\u093E \u0907\u0938\u094D\u0924\u0947\u092E\u093E\u0932 \u0915\u0930\u0947\u0902",scroll:"\u092E\u0948\u092A \u0915\u094B \u091C\u093C\u0942\u092E \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F ctrl + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0915\u093E \u0909\u092A\u092F\u094B\u0917 \u0915\u0930\u0947\u0902",scrollMac:"\u092E\u0948\u092A \u0915\u094B \u091C\u093C\u0942\u092E \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u2318 + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0915\u093E \u0909\u092A\u092F\u094B\u0917 \u0915\u0930\u0947\u0902"},hr:{touch:"Pomi\u010Dite kartu pomo\u0107u dva prsta",scroll:"Upotrijebite Ctrl i kliza\u010D mi\u0161a da biste zumirali kartu",scrollMac:"Upotrijebite gumb \u2318 dok se pomi\u010Dete za zumiranje karte"},hu:{touch:"K\xE9t ujjal mozgassa a t\xE9rk\xE9pet",scroll:"A t\xE9rk\xE9p a ctrl + g\xF6rget\xE9s haszn\xE1lat\xE1val nagy\xEDthat\xF3",scrollMac:"A t\xE9rk\xE9p a \u2318 + g\xF6rget\xE9s haszn\xE1lat\xE1val nagy\xEDthat\xF3"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan \u2318 + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza \u2318 + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"\u05D4\u05D6\u05D6 \u05D0\u05EA \u05D4\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05E9\u05EA\u05D9 \u05D0\u05E6\u05D1\u05E2\u05D5\u05EA",scroll:"\u200F\u05D0\u05E4\u05E9\u05E8 \u05DC\u05E9\u05E0\u05D5\u05EA \u05D0\u05EA \u05DE\u05E8\u05D7\u05E7 \u05D4\u05EA\u05E6\u05D5\u05D2\u05D4 \u05D1\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05DE\u05E7\u05E9 ctrl \u05D5\u05D2\u05DC\u05D9\u05DC\u05D4",scrollMac:"\u05D0\u05E4\u05E9\u05E8 \u05DC\u05E9\u05E0\u05D5\u05EA \u05D0\u05EA \u05DE\u05E8\u05D7\u05E7 \u05D4\u05EA\u05E6\u05D5\u05D2\u05D4 \u05D1\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05DE\u05E7\u05E9 \u2318 \u05D5\u05D2\u05DC\u05D9\u05DC\u05D4"},ja:{touch:"\u5730\u56F3\u3092\u79FB\u52D5\u3055\u305B\u308B\u306B\u306F\u6307 2 \u672C\u3067\u64CD\u4F5C\u3057\u307E\u3059",scroll:"\u5730\u56F3\u3092\u30BA\u30FC\u30E0\u3059\u308B\u306B\u306F\u3001Ctrl \u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044",scrollMac:"\u5730\u56F3\u3092\u30BA\u30FC\u30E0\u3059\u308B\u306B\u306F\u3001\u2318 \u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},ko:{touch:"\uC9C0\uB3C4\uB97C \uC6C0\uC9C1\uC774\uB824\uBA74 \uB450 \uC190\uAC00\uB77D\uC744 \uC0AC\uC6A9\uD558\uC138\uC694.",scroll:"\uC9C0\uB3C4\uB97C \uD655\uB300/\uCD95\uC18C\uD558\uB824\uBA74 Ctrl\uC744 \uB204\uB978 \uCC44 \uC2A4\uD06C\uB864\uD558\uC138\uC694.",scrollMac:"\uC9C0\uB3C4\uB97C \uD655\uB300\uD558\uB824\uBA74 \u2318 + \uC2A4\uD06C\uB864 \uC0AC\uC6A9"},lt:{touch:"Perkelkite \u017Eem\u0117lap\u012F dviem pir\u0161tais",scroll:"Slinkite nuspaud\u0119 klavi\u0161\u0105 \u201ECtrl\u201C, kad pakeistum\u0117te \u017Eem\u0117lapio mastel\u012F",scrollMac:"Paspauskite klavi\u0161\u0105 \u2318 ir slinkite, kad priartintum\u0117te \u017Eem\u0117lap\u012F"},lv:{touch:"Lai p\u0101rvietotu karti, b\u012Bdiet to ar diviem pirkstiem",scroll:"Kartes t\u0101lummai\u0146ai izmantojiet ctrl + ritin\u0101\u0161anu",scrollMac:"Lai veiktu kartes t\u0101lummai\u0146u, izmantojiet \u2318 + ritin\u0101\u0161anu"},ml:{touch:"\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u0D28\u0D40\u0D15\u0D4D\u0D15\u0D3E\u0D7B \u0D30\u0D23\u0D4D\u0D1F\u0D4D \u0D35\u0D3F\u0D30\u0D32\u0D41\u0D15\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D15\u0D4D\u0D15\u0D41\u0D15",scroll:"\u0D15\u0D7A\u0D1F\u0D4D\u0D30\u0D4B\u0D7E + \u0D38\u0D4D\u200C\u0D15\u0D4D\u0D30\u0D4B\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D1A\u0D4D\u0D1A\u0D4D \u200C\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u200C\u0D38\u0D42\u0D02 \u0D1A\u0D46\u0D2F\u0D4D\u0D2F\u0D41\u0D15",scrollMac:"\u2318 + \u0D38\u0D4D\u200C\u0D15\u0D4D\u0D30\u0D4B\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D1A\u0D4D\u0D1A\u0D4D \u200C\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u200C\u0D38\u0D42\u0D02 \u0D1A\u0D46\u0D2F\u0D4D\u0D2F\u0D41\u0D15"},mr:{touch:"\u0928\u0915\u093E\u0936\u093E \u0939\u0932\u0935\u093F\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 \u0926\u094B\u0928 \u092C\u094B\u091F\u0947 \u0935\u093E\u092A\u0930\u093E",scroll:"\u0928\u0915\u093E\u0936\u093E \u091D\u0942\u092E \u0915\u0930\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 ctrl + scroll \u0935\u093E\u092A\u0930\u093E",scrollMac:"\u0928\u0915\u093E\u0936\u093E\u0935\u0930 \u091D\u0942\u092E \u0915\u0930\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 \u2318 + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0935\u093E\u092A\u0930\u093E"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik \u2318 + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for \xE5 flytte kartet",scroll:"Hold ctrl-tasten inne og rull for \xE5 zoome p\xE5 kartet",scrollMac:"Hold inne \u2318-tasten og rull for \xE5 zoome p\xE5 kartet"},pl:{touch:"Przesu\u0144 map\u0119 dwoma palcami",scroll:"Naci\u015Bnij CTRL i przewi\u0144, by przybli\u017Cy\u0107 map\u0119",scrollMac:"Naci\u015Bnij\xA0\u2318 i przewi\u0144, by przybli\u017Cy\u0107 map\u0119"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use \u2318 e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use \u2318 e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize \u2318 + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosi\u021Bi dou\u0103 degete pentru a deplasa harta",scroll:"Ap\u0103sa\u021Bi tasta ctrl \u0219i derula\u021Bi simultan pentru a m\u0103ri harta",scrollMac:"Folosi\u021Bi \u2318 \u0219i derula\u021Bi pentru a m\u0103ri/mic\u0219ora harta"},ru:{touch:"\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u0443, \u043F\u0440\u043E\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E \u043D\u0435\u0439 \u0434\u0432\u0443\u043C\u044F \u043F\u0430\u043B\u044C\u0446\u0430\u043C\u0438",scroll:"\u0427\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043C\u0430\u0441\u0448\u0442\u0430\u0431, \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0438\u0432\u0430\u0439\u0442\u0435 \u043A\u0430\u0440\u0442\u0443, \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044F \u043A\u043B\u0430\u0432\u0438\u0448\u0443 Ctrl.",scrollMac:"\u0427\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043C\u0430\u0441\u0448\u0442\u0430\u0431, \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u2318\xA0+ \u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430"},sk:{touch:"Mapu m\xF4\u017Eete posun\xFA\u0165 dvoma prstami",scroll:"Ak chcete pribl\xED\u017Ei\u0165 mapu, stla\u010Dte kl\xE1ves ctrl a\xA0pos\xFAvajte",scrollMac:"Ak chcete pribl\xED\u017Ei\u0165 mapu, stla\u010Dte kl\xE1ves \u2318 a\xA0pos\xFAvajte kolieskom my\u0161i"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid pove\u010Date tako, da dr\u017Eite tipko Ctrl in vrtite kolesce na mi\u0161ki",scrollMac:"Uporabite \u2318 + funkcijo pomika, da pove\u010Date ali pomanj\u0161ate zemljevid"},sr:{touch:"\u041C\u0430\u043F\u0443 \u043F\u043E\u043C\u0435\u0440\u0430\u0458\u0442\u0435 \u043F\u043E\u043C\u043E\u045B\u0443 \u0434\u0432\u0430 \u043F\u0440\u0441\u0442\u0430",scroll:"\u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 ctrl \u0442\u0430\u0441\u0442\u0435\u0440 \u0434\u043E\u043A \u043F\u043E\u043C\u0435\u0440\u0430\u0442\u0435 \u0434\u0430 \u0431\u0438\u0441\u0442\u0435 \u0437\u0443\u043C\u0438\u0440\u0430\u043B\u0438 \u043C\u0430\u043F\u0443",scrollMac:"\u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 \u0442\u0430\u0441\u0442\u0435\u0440 \u2318 \u0434\u043E\u043A \u043F\u043E\u043C\u0435\u0440\u0430\u0442\u0435 \u0434\u0430 \u0431\u0438\u0441\u0442\u0435 \u0437\u0443\u043C\u0438\u0440\u0430\u043B\u0438 \u043C\u0430\u043F\u0443"},sv:{touch:"Anv\xE4nd tv\xE5 fingrar f\xF6r att flytta kartan",scroll:"Anv\xE4nd ctrl + rulla f\xF6r att zooma kartan",scrollMac:"Anv\xE4nd \u2318 + rulla f\xF6r att zooma p\xE5 kartan"},ta:{touch:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BA8\u0B95\u0BB0\u0BCD\u0BA4\u0BCD\u0BA4 \u0B87\u0BB0\u0BA3\u0BCD\u0B9F\u0BC1 \u0BB5\u0BBF\u0BB0\u0BB2\u0BCD\u0B95\u0BB3\u0BC8\u0BAA\u0BCD \u0BAA\u0BAF\u0BA9\u0BCD\u0BAA\u0B9F\u0BC1\u0BA4\u0BCD\u0BA4\u0BB5\u0BC1\u0BAE\u0BCD",scroll:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BAA\u0BC6\u0BB0\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF/\u0B9A\u0BBF\u0BB1\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF\u0BAA\u0BCD \u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95, ctrl \u0BAA\u0B9F\u0BCD\u0B9F\u0BA9\u0BC8\u0BAA\u0BCD \u0BAA\u0BBF\u0B9F\u0BBF\u0BA4\u0BCD\u0BA4\u0BAA\u0B9F\u0BBF, \u0BAE\u0BC7\u0BB2\u0BC7/\u0B95\u0BC0\u0BB4\u0BC7 \u0BB8\u0BCD\u0B95\u0BCD\u0BB0\u0BBE\u0BB2\u0BCD \u0B9A\u0BC6\u0BAF\u0BCD\u0BAF\u0BB5\u0BC1\u0BAE\u0BCD",scrollMac:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BAA\u0BC6\u0BB0\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF/\u0B9A\u0BBF\u0BB1\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF\u0BAA\u0BCD \u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95, \u2318 \u0BAA\u0B9F\u0BCD\u0B9F\u0BA9\u0BC8\u0BAA\u0BCD \u0BAA\u0BBF\u0B9F\u0BBF\u0BA4\u0BCD\u0BA4\u0BAA\u0B9F\u0BBF, \u0BAE\u0BC7\u0BB2\u0BC7/\u0B95\u0BC0\u0BB4\u0BC7 \u0BB8\u0BCD\u0B95\u0BCD\u0BB0\u0BBE\u0BB2\u0BCD \u0B9A\u0BC6\u0BAF\u0BCD\u0BAF\u0BB5\u0BC1\u0BAE\u0BCD"},te:{touch:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D\u200C\u0C28\u0C3F \u0C24\u0C30\u0C32\u0C3F\u0C02\u0C1A\u0C21\u0C02 \u0C15\u0C4B\u0C38\u0C02 \u0C30\u0C46\u0C02\u0C21\u0C41 \u0C35\u0C47\u0C33\u0C4D\u0C32\u0C28\u0C41 \u0C09\u0C2A\u0C2F\u0C4B\u0C17\u0C3F\u0C02\u0C1A\u0C02\u0C21\u0C3F",scroll:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D\u200C\u0C28\u0C3F \u0C1C\u0C42\u0C2E\u0C4D \u0C1A\u0C47\u0C2F\u0C21\u0C3E\u0C28\u0C3F\u0C15\u0C3F ctrl \u0C2C\u0C1F\u0C28\u0C4D\u200C\u0C28\u0C41 \u0C28\u0C4A\u0C15\u0C4D\u0C15\u0C3F \u0C09\u0C02\u0C1A\u0C3F, \u0C38\u0C4D\u0C15\u0C4D\u0C30\u0C4B\u0C32\u0C4D \u0C1A\u0C47\u0C2F\u0C02\u0C21\u0C3F",scrollMac:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D \u0C1C\u0C42\u0C2E\u0C4D \u0C1A\u0C47\u0C2F\u0C3E\u0C32\u0C02\u0C1F\u0C47 \u2318 + \u0C38\u0C4D\u0C15\u0C4D\u0C30\u0C4B\u0C32\u0C4D \u0C09\u0C2A\u0C2F\u0C4B\u0C17\u0C3F\u0C02\u0C1A\u0C02\u0C21\u0C3F"},th:{touch:"\u0E43\u0E0A\u0E49 2 \u0E19\u0E34\u0E49\u0E27\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48",scroll:"\u0E01\u0E14 Ctrl \u0E04\u0E49\u0E32\u0E07\u0E44\u0E27\u0E49 \u0E41\u0E25\u0E49\u0E27\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E0B\u0E39\u0E21\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48",scrollMac:"\u0E01\u0E14 \u2318 \u0E41\u0E25\u0E49\u0E27\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E0B\u0E39\u0E21\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang \u2318 + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek i\xE7in iki parma\u011F\u0131n\u0131z\u0131 kullan\u0131n",scroll:"Haritay\u0131 yak\u0131nla\u015Ft\u0131rmak i\xE7in ctrl + kayd\u0131rma kombinasyonunu kullan\u0131n",scrollMac:"Haritay\u0131 yak\u0131nla\u015Ft\u0131rmak i\xE7in \u2318 tu\u015Funa bas\u0131p ekran\u0131 kayd\u0131r\u0131n"},uk:{touch:"\u041F\u0435\u0440\u0435\u043C\u0456\u0449\u0443\u0439\u0442\u0435 \u043A\u0430\u0440\u0442\u0443 \u0434\u0432\u043E\u043C\u0430 \u043F\u0430\u043B\u044C\u0446\u044F\u043C\u0438",scroll:"\u0429\u043E\u0431 \u0437\u043C\u0456\u043D\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0441\u0448\u0442\u0430\u0431 \u043A\u0430\u0440\u0442\u0438, \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0443\u0439\u0442\u0435 \u043A\u043E\u043B\u0456\u0449\u0430\u0442\u043A\u043E \u043C\u0438\u0448\u0456, \u0443\u0442\u0440\u0438\u043C\u0443\u044E\u0447\u0438 \u043A\u043B\u0430\u0432\u0456\u0448\u0443 Ctrl",scrollMac:"\u0429\u043E\u0431 \u0437\u043C\u0456\u043D\u0438\u0442\u0438 \u043C\u0430\u0441\u0448\u0442\u0430\u0431 \u043A\u0430\u0440\u0442\u0438, \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0439\u0442\u0435 \u2318 + \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0443\u0432\u0430\u043D\u043D\u044F"},vi:{touch:"S\u1EED d\u1EE5ng hai ng\xF3n tay \u0111\u1EC3 di chuy\u1EC3n b\u1EA3n \u0111\u1ED3",scroll:"S\u1EED d\u1EE5ng ctrl + cu\u1ED9n \u0111\u1EC3 thu ph\xF3ng b\u1EA3n \u0111\u1ED3",scrollMac:"S\u1EED d\u1EE5ng \u2318 + cu\u1ED9n \u0111\u1EC3 thu ph\xF3ng b\u1EA3n \u0111\u1ED3"},"zh-CN":{touch:"\u4F7F\u7528\u53CC\u6307\u79FB\u52A8\u5730\u56FE",scroll:"\u6309\u4F4F Ctrl \u5E76\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u624D\u53EF\u7F29\u653E\u5730\u56FE",scrollMac:"\u6309\u4F4F \u2318 \u5E76\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u624D\u53EF\u7F29\u653E\u5730\u56FE"},"zh-TW":{touch:"\u540C\u6642\u4EE5\u5169\u6307\u79FB\u52D5\u5730\u5716",scroll:"\u6309\u4F4F ctrl \u9375\u52A0\u4E0A\u6372\u52D5\u6ED1\u9F20\u53EF\u4EE5\u7E2E\u653E\u5730\u5716",scrollMac:"\u6309 \u2318 \u52A0\u4E0A\u6EFE\u52D5\u6372\u8EF8\u53EF\u4EE5\u7E2E\u653E\u5730\u5716"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var bt=!1,xt=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(Et){Et.type=="movestart"||Et.type=="move"?bt=!0:Et.type=="moveend"&&(bt=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var Et;if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)Et=this._map.options.gestureHandlingOptions.text;else{var kt=this._getUserLanguage();kt||(kt="en"),st[kt]&&(Et=st[kt]),Et||kt.indexOf("-")===-1||(kt=kt.split("-")[0],Et=st[kt]),Et||(Et=st[kt="en"])}var Lt=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(Lt=!0);var Pt=Et.scroll;Lt&&(Pt=Et.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",Et.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",Pt)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(Et){for(var kt=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],Lt=!1,Pt=0;Pt<kt.length;Pt++)L.DomUtil.hasClass(Et.target,kt[Pt])&&(Lt=!0);Lt?L.DomUtil.hasClass(Et.target,"leaflet-interactive")&&Et.type==="touchmove"&&Et.touches.length===1?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):Et.type==="touchmove"||Et.type==="touchstart"?Et.touches.length===1?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(Et.preventDefault(),this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(Et){Et.metaKey||Et.ctrlKey?(Et.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var kt=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),Lt=0;Lt<kt.length;Lt++)L.DomUtil.removeClass(kt[Lt],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(Et){this._enableInteractions()},_handleMouseOut:function(Et){bt||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",xt),it.GestureHandling=xt,it.default=xt,Object.defineProperty(it,"__esModule",{value:!0})})})(leafletGestureHandling_min,leafletGestureHandling_min.exports);L.Control.Opacity=L.Control.extend({options:{collapsed:!1,position:"topright",label:null},initialize:function(nt,rt){for(const it in L.Util.setOptions(this,rt),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,nt)this._addLayer(nt[it],it,!0)},onAdd:function(nt){return this._initLayout(),this._update(),this._container},expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var nt=this._map.getSize().y-(this._container.offsetTop+50);return nt<this._form.clientHeight?(L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=nt+"px"):L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this},collapse:function(){return L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){const nt="leaflet-control-layers",rt=this._container=L.DomUtil.create("div",nt),it=this.options.collapsed;if(rt.setAttribute("aria-haspopup",!0),L.DomEvent.disableClickPropagation(rt),L.DomEvent.disableScrollPropagation(rt),this.options.label){const xt=L.DomUtil.create("p",nt+"-label");xt.innerHTML=this.options.label,rt.appendChild(xt)}var st=this._form=L.DomUtil.create("form",nt+"-list");it&&(this._map.on("click zoom move",this.collapse,this),L.Browser.android||L.DomEvent.on(rt,{mouseenter:this.expand,mouseleave:this.collapse},this));const bt=this._layersLink=L.DomUtil.create("a",nt+"-toggle",rt);bt.href="#",bt.title="Layers",L.Browser.touch?(L.DomEvent.on(bt,"click",L.DomEvent.stop),L.DomEvent.on(bt,"click",this.expand,this)):L.DomEvent.on(bt,"focus",this.expand,this),it||this.expand(),this._baseLayersList=L.DomUtil.create("div",nt+"-base",st),this._separator=L.DomUtil.create("div",nt+"-separator",st),this._overlaysList=L.DomUtil.create("div",nt+"-overlays",st),rt.appendChild(st)},_getLayer:function(nt){for(let rt=0;rt<this._layers.length;rt++)if(this._layers[rt]&&L.Util.stamp(this._layers[rt].layer)===nt)return this._layers[rt]},_addLayer:function(nt,rt,it){this._layers.push({layer:nt,name:rt,overlay:it})},_update:function(){if(!this._container)return this;L.DomUtil.empty(this._baseLayersList),L.DomUtil.empty(this._overlaysList),this._layerControlInputs=[];let nt,rt,it,st,bt=0;for(it=0;it<this._layers.length;it++)st=this._layers[it],this._addItem(st),rt=rt||st.overlay,nt=nt||!st.overlay,bt+=st.overlay?0:1;this.options.hideSingleBase&&(nt=nt&&1<bt,this._baseLayersList.style.display=nt?"":"none"),this._separator.style.display=rt&&nt?"":"none"},_addItem:function(nt){let rt=document.createElement("label"),it=document.createElement("input");nt.overlay?(it.type="range",it.className="leaflet-control-layers-range",it.min=0,it.max=100,it.value=100*nt.layer.options.opacity):it=this._createRadioElement("leaflet-base-layers",checked),this._layerControlInputs.push(it),it.layerId=L.Util.stamp(nt.layer),it.addEventListener("input",kt=>{kt=kt.target.value;const Lt=this._getLayer(it.layerId).layer;Lt._url===void 0||Lt.setOpacity(Number(kt/100))});const st=document.createElement("span");st.innerHTML=" "+nt.name;const bt=document.createElement("div"),xt=document.createElement("div");rt.appendChild(bt),bt.appendChild(st),rt.appendChild(xt),xt.appendChild(it),(nt.overlay?this._overlaysList:this._baseLayersList).appendChild(rt)}}),L.control.opacity=function(nt,rt){return new L.Control.Opacity(nt,rt)};var range_styles_default=i$7`
  ${component_styles_default}
  ${form_control_styles_default}

  :host {
    --thumb-size: 20px;
    --tooltip-offset: 10px;
    --track-color-active: var(--sl-color-neutral-200);
    --track-color-inactive: var(--sl-color-neutral-200);
    --track-active-offset: 0%;
    --track-height: 6px;

    display: block;
  }

  .range {
    position: relative;
  }

  .range__control {
    --percent: 0%;
    -webkit-appearance: none;
    border-radius: 3px;
    width: 100%;
    height: var(--track-height);
    background: transparent;
    line-height: var(--sl-input-height-medium);
    vertical-align: middle;
    margin: 0;

    background-image: linear-gradient(
      to right,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  .range--rtl .range__control {
    background-image: linear-gradient(
      to left,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  /* Webkit */
  .range__control::-webkit-slider-runnable-track {
    width: 100%;
    height: var(--track-height);
    border-radius: 3px;
    border: none;
  }

  .range__control::-webkit-slider-thumb {
    border: none;
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border: solid var(--sl-input-border-width) var(--sl-color-primary-600);
    -webkit-appearance: none;
    margin-top: calc(var(--thumb-size) / -2 + var(--track-height) / 2);
    cursor: pointer;
  }

  .range__control:enabled::-webkit-slider-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-webkit-slider-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-webkit-slider-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* Firefox */
  .range__control::-moz-focus-outer {
    border: 0;
  }

  .range__control::-moz-range-progress {
    background-color: var(--track-color-active);
    border-radius: 3px;
    height: var(--track-height);
  }

  .range__control::-moz-range-track {
    width: 100%;
    height: var(--track-height);
    background-color: var(--track-color-inactive);
    border-radius: 3px;
    border: none;
  }

  .range__control::-moz-range-thumb {
    border: none;
    height: var(--thumb-size);
    width: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .range__control:enabled::-moz-range-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-moz-range-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-moz-range-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* States */
  .range__control:focus-visible {
    outline: none;
  }

  .range__control:disabled {
    opacity: 0.5;
  }

  .range__control:disabled::-webkit-slider-thumb {
    cursor: not-allowed;
  }

  .range__control:disabled::-moz-range-thumb {
    cursor: not-allowed;
  }

  /* Tooltip output */
  .range__tooltip {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    left: 0;
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    opacity: 0;
    padding: var(--sl-tooltip-padding);
    transition: var(--sl-transition-fast) opacity;
    pointer-events: none;
  }

  .range__tooltip:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    left: 50%;
    translate: calc(-1 * var(--sl-tooltip-arrow-size));
  }

  .range--tooltip-visible .range__tooltip {
    opacity: 1;
  }

  /* Tooltip on top */
  .range--tooltip-top .range__tooltip {
    top: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-top .range__tooltip:after {
    border-top: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    top: 100%;
  }

  /* Tooltip on bottom */
  .range--tooltip-bottom .range__tooltip {
    bottom: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-bottom .range__tooltip:after {
    border-bottom: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    bottom: 100%;
  }

  @media (forced-colors: active) {
    .range__control,
    .range__tooltip {
      border: solid 1px transparent;
    }

    .range__control::-webkit-slider-thumb {
      border: solid 1px transparent;
    }

    .range__control::-moz-range-thumb {
      border: solid 1px transparent;
    }

    .range__tooltip:after {
      display: none;
    }
  }
`,SlRange=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController(this),this.hasFocus=!1,this.hasTooltip=!1,this.title="",this.name="",this.value=0,this.label="",this.helpText="",this.disabled=!1,this.min=0,this.max=100,this.step=1,this.tooltip="top",this.tooltipFormatter=nt=>nt.toString(),this.form="",this.defaultValue=0}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.syncRange()),this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max),this.updateComplete.then(()=>{this.syncRange(),this.resizeObserver.observe(this.input)})}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this.input)}handleChange(){this.emit("sl-change")}handleInput(){this.value=parseFloat(this.input.value),this.emit("sl-input"),this.syncRange()}handleBlur(){this.hasFocus=!1,this.hasTooltip=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.hasTooltip=!0,this.emit("sl-focus")}handleThumbDragStart(){this.hasTooltip=!0}handleThumbDragEnd(){this.hasTooltip=!1}syncProgress(nt){this.input.style.setProperty("--percent",`${nt*100}%`)}syncTooltip(nt){if(this.output!==null){const rt=this.input.offsetWidth,it=this.output.offsetWidth,st=getComputedStyle(this.input).getPropertyValue("--thumb-size"),bt=this.localize.dir()==="rtl",xt=rt*nt;if(bt){const Et=`${rt-xt}px + ${nt} * ${st}`;this.output.style.translate=`calc((${Et} - ${it/2}px - ${st} / 2))`}else{const Et=`${xt}px - ${nt} * ${st}`;this.output.style.translate=`calc(${Et} - ${it/2}px + ${st} / 2)`}}}handleValueChange(){this.formControlController.updateValidity(),this.input.value=this.value.toString(),this.value=parseFloat(this.input.value),this.syncRange()}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}syncRange(){const nt=Math.max(0,(this.value-this.min)/(this.max-this.min));this.syncProgress(nt),this.tooltip!=="none"&&this.syncTooltip(nt)}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}stepUp(){this.input.stepUp(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}stepDown(){this.input.stepDown(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.formControlController.updateValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt;return x$1`
      <div
        part="form-control"
        class=${o$1({"form-control":!0,"form-control--medium":!0,"form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${o$1({range:!0,"range--disabled":this.disabled,"range--focused":this.hasFocus,"range--rtl":this.localize.dir()==="rtl","range--tooltip-visible":this.hasTooltip,"range--tooltip-top":this.tooltip==="top","range--tooltip-bottom":this.tooltip==="bottom"})}
            @mousedown=${this.handleThumbDragStart}
            @mouseup=${this.handleThumbDragEnd}
            @touchstart=${this.handleThumbDragStart}
            @touchend=${this.handleThumbDragEnd}
          >
            <input
              part="input"
              id="input"
              class="range__control"
              title=${this.title}
              type="range"
              name=${l$1(this.name)}
              ?disabled=${this.disabled}
              min=${l$1(this.min)}
              max=${l$1(this.max)}
              step=${l$1(this.step)}
              .value=${l(this.value.toString())}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @focus=${this.handleFocus}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @blur=${this.handleBlur}
            />
            ${this.tooltip!=="none"&&!this.disabled?x$1`
                  <output part="tooltip" class="range__tooltip">
                    ${typeof this.tooltipFormatter=="function"?this.tooltipFormatter(this.value):this.value}
                  </output>
                `:""}
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};SlRange.styles=range_styles_default;__decorateClass([i$4(".range__control")],SlRange.prototype,"input",2);__decorateClass([i$4(".range__tooltip")],SlRange.prototype,"output",2);__decorateClass([t$2()],SlRange.prototype,"hasFocus",2);__decorateClass([t$2()],SlRange.prototype,"hasTooltip",2);__decorateClass([n$3()],SlRange.prototype,"title",2);__decorateClass([n$3()],SlRange.prototype,"name",2);__decorateClass([n$3({type:Number})],SlRange.prototype,"value",2);__decorateClass([n$3()],SlRange.prototype,"label",2);__decorateClass([n$3({attribute:"help-text"})],SlRange.prototype,"helpText",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlRange.prototype,"disabled",2);__decorateClass([n$3({type:Number})],SlRange.prototype,"min",2);__decorateClass([n$3({type:Number})],SlRange.prototype,"max",2);__decorateClass([n$3({type:Number})],SlRange.prototype,"step",2);__decorateClass([n$3()],SlRange.prototype,"tooltip",2);__decorateClass([n$3({attribute:!1})],SlRange.prototype,"tooltipFormatter",2);__decorateClass([n$3({reflect:!0})],SlRange.prototype,"form",2);__decorateClass([defaultValue()],SlRange.prototype,"defaultValue",2);__decorateClass([e$3({passive:!0})],SlRange.prototype,"handleThumbDragStart",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleValueChange",1);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleDisabledChange",1);__decorateClass([watch("hasTooltip",{waitUntilFirstUpdate:!0})],SlRange.prototype,"syncRange",1);SlRange.define("sl-range");(function(nt,rt){typeof exports=="object"&&typeof module<"u"?rt(exports):typeof define=="function"&&define.amd?define(["exports"],rt):rt((nt=typeof globalThis<"u"?globalThis:nt||self).turf={})})(globalThis,function(nt){var rt=63710088e-1,it={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*rt,kilometers:6371.0088,kilometres:6371.0088,meters:rt,metres:rt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:rt/1852,radians:1,yards:6967335223679999e-9},st={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/rt,yards:1.0936133},bt={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function xt(vt,_t,wt){wt===void 0&&(wt={});var Tt={type:"Feature"};return(wt.id===0||wt.id)&&(Tt.id=wt.id),wt.bbox&&(Tt.bbox=wt.bbox),Tt.properties=_t||{},Tt.geometry=vt,Tt}function Et(vt,_t,wt){switch(vt){case"Point":return kt(_t).geometry;case"LineString":return Dt(_t).geometry;case"Polygon":return Pt(_t).geometry;case"MultiPoint":return Zt(_t).geometry;case"MultiLineString":return Yt(_t).geometry;case"MultiPolygon":return Wt(_t).geometry;default:throw new Error(vt+" is invalid")}}function kt(vt,_t,wt){if(wt===void 0&&(wt={}),!vt)throw new Error("coordinates is required");if(!Array.isArray(vt))throw new Error("coordinates must be an Array");if(vt.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!$n(vt[0])||!$n(vt[1]))throw new Error("coordinates must contain numbers");return xt({type:"Point",coordinates:vt},_t,wt)}function Lt(vt,_t,wt){return wt===void 0&&(wt={}),Ft(vt.map(function(Tt){return kt(Tt,_t)}),wt)}function Pt(vt,_t,wt){wt===void 0&&(wt={});for(var Tt=0,At=vt;Tt<At.length;Tt++){var Ot=At[Tt];if(Ot.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Nt=0;Nt<Ot[Ot.length-1].length;Nt++)if(Ot[Ot.length-1][Nt]!==Ot[0][Nt])throw new Error("First and last Position are not equivalent.")}return xt({type:"Polygon",coordinates:vt},_t,wt)}function Rt(vt,_t,wt){return wt===void 0&&(wt={}),Ft(vt.map(function(Tt){return Pt(Tt,_t)}),wt)}function Dt(vt,_t,wt){if(wt===void 0&&(wt={}),vt.length<2)throw new Error("coordinates must be an array of two or more positions");return xt({type:"LineString",coordinates:vt},_t,wt)}function Bt(vt,_t,wt){return wt===void 0&&(wt={}),Ft(vt.map(function(Tt){return Dt(Tt,_t)}),wt)}function Ft(vt,_t){_t===void 0&&(_t={});var wt={type:"FeatureCollection"};return _t.id&&(wt.id=_t.id),_t.bbox&&(wt.bbox=_t.bbox),wt.features=vt,wt}function Yt(vt,_t,wt){return wt===void 0&&(wt={}),xt({type:"MultiLineString",coordinates:vt},_t,wt)}function Zt(vt,_t,wt){return wt===void 0&&(wt={}),xt({type:"MultiPoint",coordinates:vt},_t,wt)}function Wt(vt,_t,wt){return wt===void 0&&(wt={}),xt({type:"MultiPolygon",coordinates:vt},_t,wt)}function Qt(vt,_t,wt){return wt===void 0&&(wt={}),xt({type:"GeometryCollection",geometries:vt},_t,wt)}function Kt(vt,_t){if(_t===void 0&&(_t=0),_t&&!(_t>=0))throw new Error("precision must be a positive number");var wt=Math.pow(10,_t||0);return Math.round(vt*wt)/wt}function on(vt,_t){_t===void 0&&(_t="kilometers");var wt=it[_t];if(!wt)throw new Error(_t+" units is invalid");return vt*wt}function nn(vt,_t){_t===void 0&&(_t="kilometers");var wt=it[_t];if(!wt)throw new Error(_t+" units is invalid");return vt/wt}function mn(vt,_t){return Tn(nn(vt,_t))}function gn(vt){var _t=vt%360;return _t<0&&(_t+=360),_t}function Tn(vt){return 180*(vt%(2*Math.PI))/Math.PI}function An(vt){return vt%360*Math.PI/180}function kn(vt,_t,wt){if(_t===void 0&&(_t="kilometers"),wt===void 0&&(wt="kilometers"),!(vt>=0))throw new Error("length must be a positive number");return on(nn(vt,_t),wt)}function Mn(vt,_t,wt){if(_t===void 0&&(_t="meters"),wt===void 0&&(wt="kilometers"),!(vt>=0))throw new Error("area must be a positive number");var Tt=bt[_t];if(!Tt)throw new Error("invalid original units");var At=bt[wt];if(!At)throw new Error("invalid final units");return vt/Tt*At}function $n(vt){return!isNaN(vt)&&vt!==null&&!Array.isArray(vt)}function cn(vt){return!!vt&&vt.constructor===Object}function Sn(vt){if(!vt)throw new Error("bbox is required");if(!Array.isArray(vt))throw new Error("bbox must be an Array");if(vt.length!==4&&vt.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");vt.forEach(function(_t){if(!$n(_t))throw new Error("bbox must only contain numbers")})}function an(vt){if(!vt)throw new Error("id is required");if(["string","number"].indexOf(typeof vt)===-1)throw new Error("id must be a number or a string")}var jn=Object.freeze({__proto__:null,earthRadius:rt,factors:it,unitsFactors:st,areaFactors:bt,feature:xt,geometry:Et,point:kt,points:Lt,polygon:Pt,polygons:Rt,lineString:Dt,lineStrings:Bt,featureCollection:Ft,multiLineString:Yt,multiPoint:Zt,multiPolygon:Wt,geometryCollection:Qt,round:Kt,radiansToLength:on,lengthToRadians:nn,lengthToDegrees:mn,bearingToAzimuth:gn,radiansToDegrees:Tn,degreesToRadians:An,convertLength:kn,convertArea:Mn,isNumber:$n,isObject:cn,validateBBox:Sn,validateId:an});function hn(vt,_t,wt){if(vt!==null)for(var Tt,At,Ot,Nt,jt,Gt,qt,en,Xt=0,sn=0,yn=vt.type,vn=yn==="FeatureCollection",wn=yn==="Feature",un=vn?vt.features.length:1,Fn=0;Fn<un;Fn++){jt=(en=!!(qt=vn?vt.features[Fn].geometry:wn?vt.geometry:vt)&&qt.type==="GeometryCollection")?qt.geometries.length:1;for(var Qn=0;Qn<jt;Qn++){var _n=0,Bn=0;if((Nt=en?qt.geometries[Qn]:qt)!==null){Gt=Nt.coordinates;var Hn=Nt.type;switch(Xt=!wt||Hn!=="Polygon"&&Hn!=="MultiPolygon"?0:1,Hn){case null:break;case"Point":if(_t(Gt,sn,Fn,_n,Bn)===!1)return!1;sn++,_n++;break;case"LineString":case"MultiPoint":for(Tt=0;Tt<Gt.length;Tt++){if(_t(Gt[Tt],sn,Fn,_n,Bn)===!1)return!1;sn++,Hn==="MultiPoint"&&_n++}Hn==="LineString"&&_n++;break;case"Polygon":case"MultiLineString":for(Tt=0;Tt<Gt.length;Tt++){for(At=0;At<Gt[Tt].length-Xt;At++){if(_t(Gt[Tt][At],sn,Fn,_n,Bn)===!1)return!1;sn++}Hn==="MultiLineString"&&_n++,Hn==="Polygon"&&Bn++}Hn==="Polygon"&&_n++;break;case"MultiPolygon":for(Tt=0;Tt<Gt.length;Tt++){for(Bn=0,At=0;At<Gt[Tt].length;At++){for(Ot=0;Ot<Gt[Tt][At].length-Xt;Ot++){if(_t(Gt[Tt][At][Ot],sn,Fn,_n,Bn)===!1)return!1;sn++}Bn++}_n++}break;case"GeometryCollection":for(Tt=0;Tt<Nt.geometries.length;Tt++)if(hn(Nt.geometries[Tt],_t,wt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function zn(vt,_t,wt,Tt){var At=wt;return hn(vt,function(Ot,Nt,jt,Gt,qt){At=Nt===0&&wt===void 0?Ot:_t(At,Ot,Nt,jt,Gt,qt)},Tt),At}function ir(vt,_t){var wt;switch(vt.type){case"FeatureCollection":for(wt=0;wt<vt.features.length&&_t(vt.features[wt].properties,wt)!==!1;wt++);break;case"Feature":_t(vt.properties,0)}}function tr(vt,_t,wt){var Tt=wt;return ir(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot)}),Tt}function nr(vt,_t){if(vt.type==="Feature")_t(vt,0);else if(vt.type==="FeatureCollection")for(var wt=0;wt<vt.features.length&&_t(vt.features[wt],wt)!==!1;wt++);}function dr(vt,_t,wt){var Tt=wt;return nr(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot)}),Tt}function or(vt){var _t=[];return hn(vt,function(wt){_t.push(wt)}),_t}function ur(vt,_t){var wt,Tt,At,Ot,Nt,jt,Gt,qt,en,Xt,sn=0,yn=vt.type==="FeatureCollection",vn=vt.type==="Feature",wn=yn?vt.features.length:1;for(wt=0;wt<wn;wt++){for(jt=yn?vt.features[wt].geometry:vn?vt.geometry:vt,qt=yn?vt.features[wt].properties:vn?vt.properties:{},en=yn?vt.features[wt].bbox:vn?vt.bbox:void 0,Xt=yn?vt.features[wt].id:vn?vt.id:void 0,Nt=(Gt=!!jt&&jt.type==="GeometryCollection")?jt.geometries.length:1,At=0;At<Nt;At++)if((Ot=Gt?jt.geometries[At]:jt)!==null)switch(Ot.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_t(Ot,sn,qt,en,Xt)===!1)return!1;break;case"GeometryCollection":for(Tt=0;Tt<Ot.geometries.length;Tt++)if(_t(Ot.geometries[Tt],sn,qt,en,Xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_t(null,sn,qt,en,Xt)===!1)return!1;sn++}}function Cr(vt,_t,wt){var Tt=wt;return ur(vt,function(At,Ot,Nt,jt,Gt){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot,Nt,jt,Gt)}),Tt}function Sr(vt,_t){ur(vt,function(wt,Tt,At,Ot,Nt){var jt,Gt=wt===null?null:wt.type;switch(Gt){case null:case"Point":case"LineString":case"Polygon":return _t(xt(wt,At,{bbox:Ot,id:Nt}),Tt,0)!==!1&&void 0}switch(Gt){case"MultiPoint":jt="Point";break;case"MultiLineString":jt="LineString";break;case"MultiPolygon":jt="Polygon"}for(var qt=0;qt<wt.coordinates.length;qt++){var en=wt.coordinates[qt];if(_t(xt({type:jt,coordinates:en},At),Tt,qt)===!1)return!1}})}function rr(vt,_t,wt){var Tt=wt;return Sr(vt,function(At,Ot,Nt){Tt=Ot===0&&Nt===0&&wt===void 0?At:_t(Tt,At,Ot,Nt)}),Tt}function Fr(vt,_t){Sr(vt,function(wt,Tt,At){var Ot=0;if(wt.geometry){var Nt=wt.geometry.type;if(Nt!=="Point"&&Nt!=="MultiPoint"){var jt,Gt=0,qt=0,en=0;return hn(wt,function(Xt,sn,yn,vn,wn){if(jt===void 0||Tt>Gt||vn>qt||wn>en)return jt=Xt,Gt=Tt,qt=vn,en=wn,void(Ot=0);var un=Dt([jt,Xt],wt.properties);if(_t(un,Tt,At,wn,Ot)===!1)return!1;Ot++,jt=Xt})!==!1&&void 0}}})}function mr(vt,_t,wt){var Tt=wt,At=!1;return Fr(vt,function(Ot,Nt,jt,Gt,qt){Tt=At===!1&&wt===void 0?Ot:_t(Tt,Ot,Nt,jt,Gt,qt),At=!0}),Tt}function _r(vt,_t){if(!vt)throw new Error("geojson is required");Sr(vt,function(wt,Tt,At){if(wt.geometry!==null){var Ot=wt.geometry.type,Nt=wt.geometry.coordinates;switch(Ot){case"LineString":if(_t(wt,Tt,At,0,0)===!1)return!1;break;case"Polygon":for(var jt=0;jt<Nt.length;jt++)if(_t(Dt(Nt[jt],wt.properties),Tt,At,jt)===!1)return!1}}})}function yr(vt,_t,wt){var Tt=wt;return _r(vt,function(At,Ot,Nt,jt){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot,Nt,jt)}),Tt}function pr(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Nt=_t.segmentIndex||0,jt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":case"MultiPoint":return null;case"LineString":return Nt<0&&(Nt=Gt.length+Nt-1),Dt([Gt[Nt],Gt[Nt+1]],jt,_t);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Nt<0&&(Nt=Gt[Ot].length+Nt-1),Dt([Gt[Ot][Nt],Gt[Ot][Nt+1]],jt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt-1),Dt([Gt[At][Nt],Gt[At][Nt+1]],jt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Nt<0&&(Nt=Gt[At][Ot].length-Nt-1),Dt([Gt[At][Ot][Nt],Gt[At][Ot][Nt+1]],jt,_t)}throw new Error("geojson is invalid")}function Cn(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Nt=_t.coordIndex||0,jt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":return kt(Gt,jt,_t);case"MultiPoint":return At<0&&(At=Gt.length+At),kt(Gt[At],jt,_t);case"LineString":return Nt<0&&(Nt=Gt.length+Nt),kt(Gt[Nt],jt,_t);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Nt<0&&(Nt=Gt[Ot].length+Nt),kt(Gt[Ot][Nt],jt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt),kt(Gt[At][Nt],jt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Nt<0&&(Nt=Gt[At][Ot].length-Nt),kt(Gt[At][Ot][Nt],jt,_t)}throw new Error("geojson is invalid")}var rn=Object.freeze({__proto__:null,coordAll:or,coordEach:hn,coordReduce:zn,featureEach:nr,featureReduce:dr,findPoint:Cn,findSegment:pr,flattenEach:Sr,flattenReduce:rr,geomEach:ur,geomReduce:Cr,lineEach:_r,lineReduce:yr,propEach:ir,propReduce:tr,segmentEach:Fr,segmentReduce:mr});function dn(vt){var _t=[1/0,1/0,-1/0,-1/0];return hn(vt,function(wt){_t[0]>wt[0]&&(_t[0]=wt[0]),_t[1]>wt[1]&&(_t[1]=wt[1]),_t[2]<wt[0]&&(_t[2]=wt[0]),_t[3]<wt[1]&&(_t[3]=wt[1])}),_t}function fn(vt){if(!vt)throw new Error("coord is required");if(!Array.isArray(vt)){if(vt.type==="Feature"&&vt.geometry!==null&&vt.geometry.type==="Point")return vt.geometry.coordinates;if(vt.type==="Point")return vt.coordinates}if(Array.isArray(vt)&&vt.length>=2&&!Array.isArray(vt[0])&&!Array.isArray(vt[1]))return vt;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function On(vt){if(Array.isArray(vt))return vt;if(vt.type==="Feature"){if(vt.geometry!==null)return vt.geometry.coordinates}else if(vt.coordinates)return vt.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function xn(vt){if(vt.length>1&&$n(vt[0])&&$n(vt[1]))return!0;if(Array.isArray(vt[0])&&vt[0].length)return xn(vt[0]);throw new Error("coordinates must only contain numbers")}function hr(vt,_t,wt){if(!_t||!wt)throw new Error("type and name required");if(!vt||vt.type!==_t)throw new Error("Invalid input to "+wt+": must be a "+_t+", given "+vt.type)}function Nn(vt,_t,wt){if(!vt)throw new Error("No feature passed");if(!wt)throw new Error(".featureOf() requires a name");if(!vt||vt.type!=="Feature"||!vt.geometry)throw new Error("Invalid input to "+wt+", Feature with geometry required");if(!vt.geometry||vt.geometry.type!==_t)throw new Error("Invalid input to "+wt+": must be a "+_t+", given "+vt.geometry.type)}function Kn(vt,_t,wt){if(!vt)throw new Error("No featureCollection passed");if(!wt)throw new Error(".collectionOf() requires a name");if(!vt||vt.type!=="FeatureCollection")throw new Error("Invalid input to "+wt+", FeatureCollection required");for(var Tt=0,At=vt.features;Tt<At.length;Tt++){var Ot=At[Tt];if(!Ot||Ot.type!=="Feature"||!Ot.geometry)throw new Error("Invalid input to "+wt+", Feature with geometry required");if(!Ot.geometry||Ot.geometry.type!==_t)throw new Error("Invalid input to "+wt+": must be a "+_t+", given "+Ot.geometry.type)}}function Un(vt){return vt.type==="Feature"?vt.geometry:vt}function sr(vt,_t){return vt.type==="FeatureCollection"?"FeatureCollection":vt.type==="GeometryCollection"?"GeometryCollection":vt.type==="Feature"&&vt.geometry!==null?vt.geometry.type:vt.type}dn.default=dn;var ar=Object.freeze({__proto__:null,getCoord:fn,getCoords:On,containsNumber:xn,geojsonType:hr,featureOf:Nn,collectionOf:Kn,getGeom:Un,getType:sr}),wr=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable;/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function ci(vt){if(vt==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(vt)}var mi=function(){try{if(!Object.assign)return!1;var vt=new String("abc");if(vt[5]="de",Object.getOwnPropertyNames(vt)[0]==="5")return!1;for(var _t={},wt=0;wt<10;wt++)_t["_"+String.fromCharCode(wt)]=wt;if(Object.getOwnPropertyNames(_t).map(function(At){return _t[At]}).join("")!=="0123456789")return!1;var Tt={};return"abcdefghijklmnopqrst".split("").forEach(function(At){Tt[At]=At}),Object.keys(Object.assign({},Tt)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(vt,_t){for(var wt,Tt,At=ci(vt),Ot=1;Ot<arguments.length;Ot++){for(var Nt in wt=Object(arguments[Ot]))vr.call(wt,Nt)&&(At[Nt]=wt[Nt]);if(wr){Tt=wr(wt);for(var jt=0;jt<Tt.length;jt++)Rr.call(wt,Tt[jt])&&(At[Tt[jt]]=wt[Tt[jt]])}}return At},si={successCallback:null,verbose:!1},yi={};/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function Ni(vt,_t,wt){wt=wt||{};for(var Tt=Object.keys(si),At=0;At<Tt.length;At++){var Ot=Tt[At],Nt=wt[Ot];Nt=Nt!=null?Nt:si[Ot],yi[Ot]=Nt}yi.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+_t);var jt=function(Gt){var qt=[],en=0,Xt=1e-7;return Gt.cells.forEach(function(sn,yn){sn.forEach(function(vn,wn){if(vn!==void 0&&(Gn=vn).cval!==5&&Gn.cval!==10&&!Mi(vn)){var un=function(Vn,Ur,$r){var Yr,Mr,Qr=Vn.length,Hr=[],Br=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],Nr=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],Xr=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],jr=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],ei=Vn[Ur][$r],xr=ei.cval,zi=Xr[xr],gi=Ln(ei,zi);Hr.push([$r+gi[0],Ur+gi[1]]),zi=jr[xr],gi=Ln(ei,zi),Hr.push([$r+gi[0],Ur+gi[1]]),Or(ei);for(var _o=$r+Br[xr],Oi=Ur+Nr[xr],Ji=xr;_o>=0&&Oi>=0&&Oi<Qr&&(_o!=$r||Oi!=Ur)&&(ei=Vn[Oi][_o])!==void 0;){if((xr=ei.cval)===0||xr===15)return{path:Hr,info:"mergeable"};zi=jr[xr],Yr=Br[xr],Mr=Nr[xr],xr!==5&&xr!==10||(xr===5?ei.flipped?Nr[Ji]===-1?(zi="left",Yr=-1,Mr=0):(zi="right",Yr=1,Mr=0):Br[Ji]===-1&&(zi="bottom",Yr=0,Mr=-1):xr===10&&(ei.flipped?Br[Ji]===-1?(zi="top",Yr=0,Mr=1):(zi="bottom",Yr=0,Mr=-1):Nr[Ji]===1&&(zi="left",Yr=-1,Mr=0))),gi=Ln(ei,zi),Hr.push([_o+gi[0],Oi+gi[1]]),Or(ei),_o+=Yr,Oi+=Mr,Ji=xr}return{path:Hr,info:"closed"}}(Gt.cells,yn,wn),Fn=!1;if(un.info==="mergeable"){for(var Qn=un.path[un.path.length-1][0],_n=un.path[un.path.length-1][1],Bn=en-1;Bn>=0;Bn--)if(Math.abs(qt[Bn][0][0]-Qn)<=Xt&&Math.abs(qt[Bn][0][1]-_n)<=Xt){for(var Hn=un.path.length-2;Hn>=0;--Hn)qt[Bn].unshift(un.path[Hn]);Fn=!0;break}}Fn||(qt[en++]=un.path)}var Gn})}),qt}(function(Gt,qt){for(var en=Gt.length-1,Xt=Gt[0].length-1,sn={rows:en,cols:Xt,cells:[]},yn=0;yn<en;++yn){sn.cells[yn]=[];for(var vn=0;vn<Xt;++vn){var wn=0,un=Gt[yn+1][vn],Fn=Gt[yn+1][vn+1],Qn=Gt[yn][vn+1],_n=Gt[yn][vn];if(!(isNaN(un)||isNaN(Fn)||isNaN(Qn)||isNaN(_n))){wn|=un>=qt?8:0,wn|=Fn>=qt?4:0,wn|=Qn>=qt?2:0;var Bn,Hn,Gn,Vn,Ur=!1;if((wn|=_n>=qt?1:0)===5||wn===10){var $r=(un+Fn+Qn+_n)/4;wn===5&&$r<qt?(wn=10,Ur=!0):wn===10&&$r<qt&&(wn=5,Ur=!0)}wn!==0&&wn!==15&&(Bn=Hn=Gn=Vn=.5,wn===1?(Gn=1-Ii(qt,un,_n),Hn=1-Ii(qt,Qn,_n)):wn===2?(Hn=Ii(qt,_n,Qn),Vn=1-Ii(qt,Fn,Qn)):wn===3?(Gn=1-Ii(qt,un,_n),Vn=1-Ii(qt,Fn,Qn)):wn===4?(Bn=Ii(qt,un,Fn),Vn=Ii(qt,Qn,Fn)):wn===5?(Bn=Ii(qt,un,Fn),Vn=Ii(qt,Qn,Fn),Hn=1-Ii(qt,Qn,_n),Gn=1-Ii(qt,un,_n)):wn===6?(Hn=Ii(qt,_n,Qn),Bn=Ii(qt,un,Fn)):wn===7?(Gn=1-Ii(qt,un,_n),Bn=Ii(qt,un,Fn)):wn===8?(Gn=Ii(qt,_n,un),Bn=1-Ii(qt,Fn,un)):wn===9?(Hn=1-Ii(qt,Qn,_n),Bn=1-Ii(qt,Fn,un)):wn===10?(Bn=1-Ii(qt,Fn,un),Vn=1-Ii(qt,Fn,Qn),Hn=Ii(qt,_n,Qn),Gn=Ii(qt,_n,un)):wn===11?(Bn=1-Ii(qt,Fn,un),Vn=1-Ii(qt,Fn,Qn)):wn===12?(Gn=Ii(qt,_n,un),Vn=Ii(qt,Qn,Fn)):wn===13?(Hn=1-Ii(qt,Qn,_n),Vn=Ii(qt,Qn,Fn)):wn===14?(Gn=Ii(qt,_n,un),Hn=Ii(qt,_n,Qn)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+wn),sn.cells[yn][vn]={cval:wn,flipped:Ur,top:Bn,right:Vn,bottom:Hn,left:Gn})}}}return sn}(vt,_t));return typeof yi.successCallback=="function"&&yi.successCallback(jt),jt}function Ii(vt,_t,wt){return(vt-_t)/(wt-_t)}function Mi(vt){return vt.cval===0||vt.cval===15}function Or(vt){Mi(vt)||vt.cval===5||vt.cval===10||(vt.cval=15)}function Ln(vt,_t){return _t==="top"?[vt.top,1]:_t==="bottom"?[vt.bottom,0]:_t==="right"?[1,vt.right]:_t==="left"?[0,vt.left]:void 0}function En(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.zProperty||"elevation",Tt=_t.flip,At=_t.flags;Kn(vt,"Point","input must contain Points");for(var Ot=function(sn,yn){var vn={};return nr(sn,function(wn){var un=On(wn)[1];vn[un]||(vn[un]=[]),vn[un].push(wn)}),Object.keys(vn).map(function(wn){return vn[wn].sort(function(un,Fn){return On(un)[0]-On(Fn)[0]})}).sort(function(wn,un){return yn?On(wn[0])[1]-On(un[0])[1]:On(un[0])[1]-On(wn[0])[1]})}(vt,Tt),Nt=[],jt=0;jt<Ot.length;jt++){for(var Gt=Ot[jt],qt=[],en=0;en<Gt.length;en++){var Xt=Gt[en];Xt.properties[wt]?qt.push(Xt.properties[wt]):qt.push(0),At===!0&&(Xt.properties.matrixPosition=[jt,en])}Nt.push(qt)}return Nt}var Wn=fr,er=fr;function fr(vt,_t,wt,Tt,At){Zr(vt,_t,wt||0,Tt||vt.length-1,At||ti)}function Zr(vt,_t,wt,Tt,At){for(;Tt>wt;){if(Tt-wt>600){var Ot=Tt-wt+1,Nt=_t-wt+1,jt=Math.log(Ot),Gt=.5*Math.exp(2*jt/3),qt=.5*Math.sqrt(jt*Gt*(Ot-Gt)/Ot)*(Nt-Ot/2<0?-1:1);Zr(vt,_t,Math.max(wt,Math.floor(_t-Nt*Gt/Ot+qt)),Math.min(Tt,Math.floor(_t+(Ot-Nt)*Gt/Ot+qt)),At)}var en=vt[_t],Xt=wt,sn=Tt;for(gr(vt,wt,_t),At(vt[Tt],en)>0&&gr(vt,wt,Tt);Xt<sn;){for(gr(vt,Xt,sn),Xt++,sn--;At(vt[Xt],en)<0;)Xt++;for(;At(vt[sn],en)>0;)sn--}At(vt[wt],en)===0?gr(vt,wt,sn):gr(vt,++sn,Tt),sn<=_t&&(wt=sn+1),_t<=sn&&(Tt=sn-1)}}function gr(vt,_t,wt){var Tt=vt[_t];vt[_t]=vt[wt],vt[wt]=Tt}function ti(vt,_t){return vt<_t?-1:vt>_t?1:0}Wn.default=er;var kr=ui,ai=ui;function ui(vt,_t){if(!(this instanceof ui))return new ui(vt,_t);this._maxEntries=Math.max(4,vt||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),_t&&this._initFormat(_t),this.clear()}function _i(vt,_t,wt){if(!wt)return _t.indexOf(vt);for(var Tt=0;Tt<_t.length;Tt++)if(wt(vt,_t[Tt]))return Tt;return-1}function hi(vt,_t){ji(vt,0,vt.children.length,_t,vt)}function ji(vt,_t,wt,Tt,At){At||(At=qi(null)),At.minX=1/0,At.minY=1/0,At.maxX=-1/0,At.maxY=-1/0;for(var Ot,Nt=_t;Nt<wt;Nt++)Ot=vt.children[Nt],Ei(At,vt.leaf?Tt(Ot):Ot);return At}function Ei(vt,_t){return vt.minX=Math.min(vt.minX,_t.minX),vt.minY=Math.min(vt.minY,_t.minY),vt.maxX=Math.max(vt.maxX,_t.maxX),vt.maxY=Math.max(vt.maxY,_t.maxY),vt}function Wi(vt,_t){return vt.minX-_t.minX}function lo(vt,_t){return vt.minY-_t.minY}function Xi(vt){return(vt.maxX-vt.minX)*(vt.maxY-vt.minY)}function Ga(vt){return vt.maxX-vt.minX+(vt.maxY-vt.minY)}function Ns(vt,_t){return vt.minX<=_t.minX&&vt.minY<=_t.minY&&_t.maxX<=vt.maxX&&_t.maxY<=vt.maxY}function wi(vt,_t){return _t.minX<=vt.maxX&&_t.minY<=vt.maxY&&_t.maxX>=vt.minX&&_t.maxY>=vt.minY}function qi(vt){return{children:vt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $s(vt,_t,wt,Tt,At){for(var Ot,Nt=[_t,wt];Nt.length;)(wt=Nt.pop())-(_t=Nt.pop())<=Tt||(Ot=_t+Math.ceil((wt-_t)/Tt/2)*Tt,Wn(vt,Ot,_t,wt,At),Nt.push(_t,Ot,Ot,wt))}function xs(vt){var _t={exports:{}};return vt(_t,_t.exports),_t.exports}ui.prototype={all:function(){return this._all(this.data,[])},search:function(vt){var _t=this.data,wt=[],Tt=this.toBBox;if(!wi(vt,_t))return wt;for(var At,Ot,Nt,jt,Gt=[];_t;){for(At=0,Ot=_t.children.length;At<Ot;At++)Nt=_t.children[At],wi(vt,jt=_t.leaf?Tt(Nt):Nt)&&(_t.leaf?wt.push(Nt):Ns(vt,jt)?this._all(Nt,wt):Gt.push(Nt));_t=Gt.pop()}return wt},collides:function(vt){var _t=this.data,wt=this.toBBox;if(!wi(vt,_t))return!1;for(var Tt,At,Ot,Nt,jt=[];_t;){for(Tt=0,At=_t.children.length;Tt<At;Tt++)if(Ot=_t.children[Tt],wi(vt,Nt=_t.leaf?wt(Ot):Ot)){if(_t.leaf||Ns(vt,Nt))return!0;jt.push(Ot)}_t=jt.pop()}return!1},load:function(vt){if(!vt||!vt.length)return this;if(vt.length<this._minEntries){for(var _t=0,wt=vt.length;_t<wt;_t++)this.insert(vt[_t]);return this}var Tt=this._build(vt.slice(),0,vt.length-1,0);if(this.data.children.length)if(this.data.height===Tt.height)this._splitRoot(this.data,Tt);else{if(this.data.height<Tt.height){var At=this.data;this.data=Tt,Tt=At}this._insert(Tt,this.data.height-Tt.height-1,!0)}else this.data=Tt;return this},insert:function(vt){return vt&&this._insert(vt,this.data.height-1),this},clear:function(){return this.data=qi([]),this},remove:function(vt,_t){if(!vt)return this;for(var wt,Tt,At,Ot,Nt=this.data,jt=this.toBBox(vt),Gt=[],qt=[];Nt||Gt.length;){if(Nt||(Nt=Gt.pop(),Tt=Gt[Gt.length-1],wt=qt.pop(),Ot=!0),Nt.leaf&&(At=_i(vt,Nt.children,_t))!==-1)return Nt.children.splice(At,1),Gt.push(Nt),this._condense(Gt),this;Ot||Nt.leaf||!Ns(Nt,jt)?Tt?(wt++,Nt=Tt.children[wt],Ot=!1):Nt=null:(Gt.push(Nt),qt.push(wt),wt=0,Tt=Nt,Nt=Nt.children[0])}return this},toBBox:function(vt){return vt},compareMinX:Wi,compareMinY:lo,toJSON:function(){return this.data},fromJSON:function(vt){return this.data=vt,this},_all:function(vt,_t){for(var wt=[];vt;)vt.leaf?_t.push.apply(_t,vt.children):wt.push.apply(wt,vt.children),vt=wt.pop();return _t},_build:function(vt,_t,wt,Tt){var At,Ot=wt-_t+1,Nt=this._maxEntries;if(Ot<=Nt)return hi(At=qi(vt.slice(_t,wt+1)),this.toBBox),At;Tt||(Tt=Math.ceil(Math.log(Ot)/Math.log(Nt)),Nt=Math.ceil(Ot/Math.pow(Nt,Tt-1))),(At=qi([])).leaf=!1,At.height=Tt;var jt,Gt,qt,en,Xt=Math.ceil(Ot/Nt),sn=Xt*Math.ceil(Math.sqrt(Nt));for($s(vt,_t,wt,sn,this.compareMinX),jt=_t;jt<=wt;jt+=sn)for($s(vt,jt,qt=Math.min(jt+sn-1,wt),Xt,this.compareMinY),Gt=jt;Gt<=qt;Gt+=Xt)en=Math.min(Gt+Xt-1,qt),At.children.push(this._build(vt,Gt,en,Tt-1));return hi(At,this.toBBox),At},_chooseSubtree:function(vt,_t,wt,Tt){for(var At,Ot,Nt,jt,Gt,qt,en,Xt,sn,yn;Tt.push(_t),!_t.leaf&&Tt.length-1!==wt;){for(en=Xt=1/0,At=0,Ot=_t.children.length;At<Ot;At++)Gt=Xi(Nt=_t.children[At]),sn=vt,yn=Nt,(qt=(Math.max(yn.maxX,sn.maxX)-Math.min(yn.minX,sn.minX))*(Math.max(yn.maxY,sn.maxY)-Math.min(yn.minY,sn.minY))-Gt)<Xt?(Xt=qt,en=Gt<en?Gt:en,jt=Nt):qt===Xt&&Gt<en&&(en=Gt,jt=Nt);_t=jt||_t.children[0]}return _t},_insert:function(vt,_t,wt){var Tt=this.toBBox,At=wt?vt:Tt(vt),Ot=[],Nt=this._chooseSubtree(At,this.data,_t,Ot);for(Nt.children.push(vt),Ei(Nt,At);_t>=0&&Ot[_t].children.length>this._maxEntries;)this._split(Ot,_t),_t--;this._adjustParentBBoxes(At,Ot,_t)},_split:function(vt,_t){var wt=vt[_t],Tt=wt.children.length,At=this._minEntries;this._chooseSplitAxis(wt,At,Tt);var Ot=this._chooseSplitIndex(wt,At,Tt),Nt=qi(wt.children.splice(Ot,wt.children.length-Ot));Nt.height=wt.height,Nt.leaf=wt.leaf,hi(wt,this.toBBox),hi(Nt,this.toBBox),_t?vt[_t-1].children.push(Nt):this._splitRoot(wt,Nt)},_splitRoot:function(vt,_t){this.data=qi([vt,_t]),this.data.height=vt.height+1,this.data.leaf=!1,hi(this.data,this.toBBox)},_chooseSplitIndex:function(vt,_t,wt){var Tt,At,Ot,Nt,jt,Gt,qt,en,Xt,sn,yn,vn,wn,un;for(Gt=qt=1/0,Tt=_t;Tt<=wt-_t;Tt++)At=ji(vt,0,Tt,this.toBBox),Ot=ji(vt,Tt,wt,this.toBBox),Xt=At,sn=Ot,yn=void 0,vn=void 0,wn=void 0,un=void 0,yn=Math.max(Xt.minX,sn.minX),vn=Math.max(Xt.minY,sn.minY),wn=Math.min(Xt.maxX,sn.maxX),un=Math.min(Xt.maxY,sn.maxY),Nt=Math.max(0,wn-yn)*Math.max(0,un-vn),jt=Xi(At)+Xi(Ot),Nt<Gt?(Gt=Nt,en=Tt,qt=jt<qt?jt:qt):Nt===Gt&&jt<qt&&(qt=jt,en=Tt);return en},_chooseSplitAxis:function(vt,_t,wt){var Tt=vt.leaf?this.compareMinX:Wi,At=vt.leaf?this.compareMinY:lo;this._allDistMargin(vt,_t,wt,Tt)<this._allDistMargin(vt,_t,wt,At)&&vt.children.sort(Tt)},_allDistMargin:function(vt,_t,wt,Tt){vt.children.sort(Tt);var At,Ot,Nt=this.toBBox,jt=ji(vt,0,_t,Nt),Gt=ji(vt,wt-_t,wt,Nt),qt=Ga(jt)+Ga(Gt);for(At=_t;At<wt-_t;At++)Ot=vt.children[At],Ei(jt,vt.leaf?Nt(Ot):Ot),qt+=Ga(jt);for(At=wt-_t-1;At>=_t;At--)Ot=vt.children[At],Ei(Gt,vt.leaf?Nt(Ot):Ot),qt+=Ga(Gt);return qt},_adjustParentBBoxes:function(vt,_t,wt){for(var Tt=wt;Tt>=0;Tt--)Ei(_t[Tt],vt)},_condense:function(vt){for(var _t,wt=vt.length-1;wt>=0;wt--)vt[wt].children.length===0?wt>0?(_t=vt[wt-1].children).splice(_t.indexOf(vt[wt]),1):this.clear():hi(vt[wt],this.toBBox)},_initFormat:function(vt){var _t=["return a"," - b",";"];this.compareMinX=new Function("a","b",_t.join(vt[0])),this.compareMinY=new Function("a","b",_t.join(vt[1])),this.toBBox=new Function("a","return {minX: a"+vt[0]+", minY: a"+vt[1]+", maxX: a"+vt[2]+", maxY: a"+vt[3]+"};")}},kr.default=ai;var fs=function(vt,_t,wt){var Tt=vt*_t,At=Ts*vt,Ot=At-(At-vt),Nt=vt-Ot,jt=Ts*_t,Gt=jt-(jt-_t),qt=_t-Gt,en=Nt*qt-(Tt-Ot*Gt-Nt*Gt-Ot*qt);return wt?(wt[0]=en,wt[1]=Tt,wt):[en,Tt]},Ts=+(Math.pow(2,27)+1),ws=function(vt,_t){var wt=0|vt.length,Tt=0|_t.length;if(wt===1&&Tt===1)return function(Gn,Vn){var Ur=Gn+Vn,$r=Ur-Gn,Yr=Gn-(Ur-$r)+(Vn-$r);return Yr?[Yr,Ur]:[Ur]}(vt[0],_t[0]);var At,Ot,Nt=new Array(wt+Tt),jt=0,Gt=0,qt=0,en=Math.abs,Xt=vt[Gt],sn=en(Xt),yn=_t[qt],vn=en(yn);sn<vn?(Ot=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(Ot=yn,(qt+=1)<Tt&&(yn=_t[qt],vn=en(yn))),Gt<wt&&sn<vn||qt>=Tt?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=_t[qt],vn=en(yn)));for(var wn,un,Fn=At+Ot,Qn=Fn-At,_n=Ot-Qn,Bn=_n,Hn=Fn;Gt<wt&&qt<Tt;)sn<vn?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=_t[qt],vn=en(yn))),(_n=(Ot=Bn)-(Qn=(Fn=At+Ot)-At))&&(Nt[jt++]=_n),Bn=Hn-((wn=Hn+Fn)-(un=wn-Hn))+(Fn-un),Hn=wn;for(;Gt<wt;)(_n=(Ot=Bn)-(Qn=(Fn=(At=Xt)+Ot)-At))&&(Nt[jt++]=_n),Bn=Hn-((wn=Hn+Fn)-(un=wn-Hn))+(Fn-un),Hn=wn,(Gt+=1)<wt&&(Xt=vt[Gt]);for(;qt<Tt;)(_n=(Ot=Bn)-(Qn=(Fn=(At=yn)+Ot)-At))&&(Nt[jt++]=_n),Bn=Hn-((wn=Hn+Fn)-(un=wn-Hn))+(Fn-un),Hn=wn,(qt+=1)<Tt&&(yn=_t[qt]);return Bn&&(Nt[jt++]=Bn),Hn&&(Nt[jt++]=Hn),jt||(Nt[jt++]=0),Nt.length=jt,Nt},Lr=function(vt,_t,wt){var Tt=vt+_t,At=Tt-vt,Ot=_t-At,Nt=vt-(Tt-At);return wt?(wt[0]=Nt+Ot,wt[1]=Tt,wt):[Nt+Ot,Tt]},qr=function(vt,_t){var wt=vt.length;if(wt===1){var Tt=fs(vt[0],_t);return Tt[0]?Tt:[Tt[1]]}var At=new Array(2*wt),Ot=[.1,.1],Nt=[.1,.1],jt=0;fs(vt[0],_t,Ot),Ot[0]&&(At[jt++]=Ot[0]);for(var Gt=1;Gt<wt;++Gt){fs(vt[Gt],_t,Nt);var qt=Ot[1];Lr(qt,Nt[0],Ot),Ot[0]&&(At[jt++]=Ot[0]);var en=Nt[1],Xt=Ot[1],sn=en+Xt,yn=Xt-(sn-en);Ot[1]=sn,yn&&(At[jt++]=yn)}return Ot[1]&&(At[jt++]=Ot[1]),jt===0&&(At[jt++]=0),At.length=jt,At},Ir=function(vt,_t){var wt=0|vt.length,Tt=0|_t.length;if(wt===1&&Tt===1)return function(Gn,Vn){var Ur=Gn+Vn,$r=Ur-Gn,Yr=Gn-(Ur-$r)+(Vn-$r);return Yr?[Yr,Ur]:[Ur]}(vt[0],-_t[0]);var At,Ot,Nt=new Array(wt+Tt),jt=0,Gt=0,qt=0,en=Math.abs,Xt=vt[Gt],sn=en(Xt),yn=-_t[qt],vn=en(yn);sn<vn?(Ot=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(Ot=yn,(qt+=1)<Tt&&(yn=-_t[qt],vn=en(yn))),Gt<wt&&sn<vn||qt>=Tt?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=-_t[qt],vn=en(yn)));for(var wn,un,Fn=At+Ot,Qn=Fn-At,_n=Ot-Qn,Bn=_n,Hn=Fn;Gt<wt&&qt<Tt;)sn<vn?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=-_t[qt],vn=en(yn))),(_n=(Ot=Bn)-(Qn=(Fn=At+Ot)-At))&&(Nt[jt++]=_n),Bn=Hn-((wn=Hn+Fn)-(un=wn-Hn))+(Fn-un),Hn=wn;for(;Gt<wt;)(_n=(Ot=Bn)-(Qn=(Fn=(At=Xt)+Ot)-At))&&(Nt[jt++]=_n),Bn=Hn-((wn=Hn+Fn)-(un=wn-Hn))+(Fn-un),Hn=wn,(Gt+=1)<wt&&(Xt=vt[Gt]);for(;qt<Tt;)(_n=(Ot=Bn)-(Qn=(Fn=(At=yn)+Ot)-At))&&(Nt[jt++]=_n),Bn=Hn-((wn=Hn+Fn)-(un=wn-Hn))+(Fn-un),Hn=wn,(qt+=1)<Tt&&(yn=-_t[qt]);return Bn&&(Nt[jt++]=Bn),Hn&&(Nt[jt++]=Hn),jt||(Nt[jt++]=0),Nt.length=jt,Nt},lr=xs(function(vt){function _t(qt,en){for(var Xt=new Array(qt.length-1),sn=1;sn<qt.length;++sn)for(var yn=Xt[sn-1]=new Array(qt.length-1),vn=0,wn=0;vn<qt.length;++vn)vn!==en&&(yn[wn++]=qt[sn][vn]);return Xt}function wt(qt){if(qt.length===1)return qt[0];if(qt.length===2)return["sum(",qt[0],",",qt[1],")"].join("");var en=qt.length>>1;return["sum(",wt(qt.slice(0,en)),",",wt(qt.slice(en)),")"].join("")}function Tt(qt){if(qt.length===2)return[["sum(prod(",qt[0][0],",",qt[1][1],"),prod(-",qt[0][1],",",qt[1][0],"))"].join("")];for(var en=[],Xt=0;Xt<qt.length;++Xt)en.push(["scale(",wt(Tt(_t(qt,Xt))),",",(sn=Xt,1&sn?"-":""),qt[0][Xt],")"].join(""));return en;var sn}function At(qt){for(var en=[],Xt=[],sn=function(_n){for(var Bn=new Array(_n),Hn=0;Hn<_n;++Hn){Bn[Hn]=new Array(_n);for(var Gn=0;Gn<_n;++Gn)Bn[Hn][Gn]=["m",Gn,"[",_n-Hn-1,"]"].join("")}return Bn}(qt),yn=[],vn=0;vn<qt;++vn)(1&vn)==0?en.push.apply(en,Tt(_t(sn,vn))):Xt.push.apply(Xt,Tt(_t(sn,vn))),yn.push("m"+vn);var wn=wt(en),un=wt(Xt),Fn="orientation"+qt+"Exact",Qn=["function ",Fn,"(",yn.join(),"){var p=",wn,",n=",un,",d=sub(p,n);return d[d.length-1];};return ",Fn].join("");return new Function("sum","prod","scale","sub",Qn)(ws,fs,qr,Ir)}var Ot=At(3),Nt=At(4),jt=[function(){return 0},function(){return 0},function(qt,en){return en[0]-qt[0]},function(qt,en,Xt){var sn,yn=(qt[1]-Xt[1])*(en[0]-Xt[0]),vn=(qt[0]-Xt[0])*(en[1]-Xt[1]),wn=yn-vn;if(yn>0){if(vn<=0)return wn;sn=yn+vn}else{if(!(yn<0)||vn>=0)return wn;sn=-(yn+vn)}var un=33306690738754716e-32*sn;return wn>=un||wn<=-un?wn:Ot(qt,en,Xt)},function(qt,en,Xt,sn){var yn=qt[0]-sn[0],vn=en[0]-sn[0],wn=Xt[0]-sn[0],un=qt[1]-sn[1],Fn=en[1]-sn[1],Qn=Xt[1]-sn[1],_n=qt[2]-sn[2],Bn=en[2]-sn[2],Hn=Xt[2]-sn[2],Gn=vn*Qn,Vn=wn*Fn,Ur=wn*un,$r=yn*Qn,Yr=yn*Fn,Mr=vn*un,Qr=_n*(Gn-Vn)+Bn*(Ur-$r)+Hn*(Yr-Mr),Hr=7771561172376103e-31*((Math.abs(Gn)+Math.abs(Vn))*Math.abs(_n)+(Math.abs(Ur)+Math.abs($r))*Math.abs(Bn)+(Math.abs(Yr)+Math.abs(Mr))*Math.abs(Hn));return Qr>Hr||-Qr>Hr?Qr:Nt(qt,en,Xt,sn)}];function Gt(qt){var en=jt[qt.length];return en||(en=jt[qt.length]=At(qt.length)),en.apply(void 0,qt)}(function(){for(;jt.length<=5;)jt.push(At(jt.length));for(var qt=[],en=["slow"],Xt=0;Xt<=5;++Xt)qt.push("a"+Xt),en.push("o"+Xt);var sn=["function getOrientation(",qt.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(Xt=2;Xt<=5;++Xt)sn.push("case ",Xt,":return o",Xt,"(",qt.slice(0,Xt).join(),");");sn.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),en.push(sn.join(""));var yn=Function.apply(void 0,en);for(vt.exports=yn.apply(void 0,[Gt].concat(jt)),Xt=0;Xt<=5;++Xt)vt.exports[Xt]=jt[Xt]})()}),zr=function(vt){var _t=vt.length;if(_t<3){for(var wt=new Array(_t),Tt=0;Tt<_t;++Tt)wt[Tt]=Tt;return _t===2&&vt[0][0]===vt[1][0]&&vt[0][1]===vt[1][1]?[0]:wt}var At=new Array(_t);for(Tt=0;Tt<_t;++Tt)At[Tt]=Tt;At.sort(function(yn,vn){var wn=vt[yn][0]-vt[vn][0];return wn||vt[yn][1]-vt[vn][1]});var Ot=[At[0],At[1]],Nt=[At[0],At[1]];for(Tt=2;Tt<_t;++Tt){for(var jt=At[Tt],Gt=vt[jt],qt=Ot.length;qt>1&&ni(vt[Ot[qt-2]],vt[Ot[qt-1]],Gt)<=0;)qt-=1,Ot.pop();for(Ot.push(jt),qt=Nt.length;qt>1&&ni(vt[Nt[qt-2]],vt[Nt[qt-1]],Gt)>=0;)qt-=1,Nt.pop();Nt.push(jt)}wt=new Array(Nt.length+Ot.length-2);for(var en=0,Xt=(Tt=0,Ot.length);Tt<Xt;++Tt)wt[en++]=Ot[Tt];for(var sn=Nt.length-2;sn>0;--sn)wt[en++]=Nt[sn];return wt},ni=lr[3],fi=mo,xo=mo;function mo(vt,_t){if(!(this instanceof mo))return new mo(vt,_t);if(this.data=vt||[],this.length=this.data.length,this.compare=_t||us,this.length>0)for(var wt=(this.length>>1)-1;wt>=0;wt--)this._down(wt)}function us(vt,_t){return vt<_t?-1:vt>_t?1:0}mo.prototype={push:function(vt){this.data.push(vt),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var vt=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),vt}},peek:function(){return this.data[0]},_up:function(vt){for(var _t=this.data,wt=this.compare,Tt=_t[vt];vt>0;){var At=vt-1>>1,Ot=_t[At];if(wt(Tt,Ot)>=0)break;_t[vt]=Ot,vt=At}_t[vt]=Tt},_down:function(vt){for(var _t=this.data,wt=this.compare,Tt=this.length>>1,At=_t[vt];vt<Tt;){var Ot=1+(vt<<1),Nt=Ot+1,jt=_t[Ot];if(Nt<this.length&&wt(_t[Nt],jt)<0&&(Ot=Nt,jt=_t[Nt]),wt(jt,At)>=0)break;_t[vt]=jt,vt=Ot}_t[vt]=At}},fi.default=xo;var hs=function(vt,_t){for(var wt=vt[0],Tt=vt[1],At=!1,Ot=0,Nt=_t.length-1;Ot<_t.length;Nt=Ot++){var jt=_t[Ot][0],Gt=_t[Ot][1],qt=_t[Nt][0],en=_t[Nt][1];Gt>Tt!=en>Tt&&wt<(qt-jt)*(Tt-Gt)/(en-Gt)+jt&&(At=!At)}return At},zo=lr[3],Is=ca,Ys=ca;function ca(vt,_t,wt){_t=Math.max(0,_t===void 0?2:_t),wt=wt||0;for(var Tt,At=function(Qn){for(var _n=Qn[0],Bn=Qn[0],Hn=Qn[0],Gn=Qn[0],Vn=0;Vn<Qn.length;Vn++){var Ur=Qn[Vn];Ur[0]<_n[0]&&(_n=Ur),Ur[0]>Hn[0]&&(Hn=Ur),Ur[1]<Bn[1]&&(Bn=Ur),Ur[1]>Gn[1]&&(Gn=Ur)}var $r=[_n,Bn,Hn,Gn],Yr=$r.slice();for(Vn=0;Vn<Qn.length;Vn++)hs(Qn[Vn],$r)||Yr.push(Qn[Vn]);var Mr=zr(Yr),Qr=[];for(Vn=0;Vn<Mr.length;Vn++)Qr.push(Yr[Mr[Vn]]);return Qr}(vt),Ot=kr(16,["[0]","[1]","[0]","[1]"]).load(vt),Nt=[],jt=0;jt<At.length;jt++){var Gt=At[jt];Ot.remove(Gt),Tt=ll(Gt,Tt),Nt.push(Tt)}var qt=kr(16);for(jt=0;jt<Nt.length;jt++)qt.insert(br(Nt[jt]));for(var en=_t*_t,Xt=wt*wt;Nt.length;){var sn=Nt.shift(),yn=sn.p,vn=sn.next.p,wn=Pr(yn,vn);if(!(wn<Xt)){var un=wn/en;(Gt=Fi(Ot,sn.prev.p,yn,vn,sn.next.next.p,un,qt))&&Math.min(Pr(Gt,yn),Pr(Gt,vn))<=un&&(Nt.push(sn),Nt.push(ll(Gt,sn)),Ot.remove(Gt),qt.remove(sn),qt.insert(br(sn)),qt.insert(br(sn.next)))}}sn=Tt;var Fn=[];do Fn.push(sn.p),sn=sn.next;while(sn!==Tt);return Fn.push(sn.p),Fn}function Fi(vt,_t,wt,Tt,At,Ot,Nt){for(var jt=new fi(null,Zi),Gt=vt.data;Gt;){for(var qt=0;qt<Gt.children.length;qt++){var en=Gt.children[qt],Xt=Gt.leaf?ta(en,wt,Tt):bo(wt,Tt,en);Xt>Ot||jt.push({node:en,dist:Xt})}for(;jt.length&&!jt.peek().node.children;){var sn=jt.pop(),yn=sn.node,vn=ta(yn,_t,wt),wn=ta(yn,Tt,At);if(sn.dist<vn&&sn.dist<wn&&Yi(wt,yn,Nt)&&Yi(Tt,yn,Nt))return yn}(Gt=jt.pop())&&(Gt=Gt.node)}return null}function Zi(vt,_t){return vt.dist-_t.dist}function bo(vt,_t,wt){if(bi(vt,wt)||bi(_t,wt))return 0;var Tt=Oc(vt[0],vt[1],_t[0],_t[1],wt.minX,wt.minY,wt.maxX,wt.minY);if(Tt===0)return 0;var At=Oc(vt[0],vt[1],_t[0],_t[1],wt.minX,wt.minY,wt.minX,wt.maxY);if(At===0)return 0;var Ot=Oc(vt[0],vt[1],_t[0],_t[1],wt.maxX,wt.minY,wt.maxX,wt.maxY);if(Ot===0)return 0;var Nt=Oc(vt[0],vt[1],_t[0],_t[1],wt.minX,wt.maxY,wt.maxX,wt.maxY);return Nt===0?0:Math.min(Tt,At,Ot,Nt)}function bi(vt,_t){return vt[0]>=_t.minX&&vt[0]<=_t.maxX&&vt[1]>=_t.minY&&vt[1]<=_t.maxY}function Yi(vt,_t,wt){for(var Tt,At,Ot,Nt,jt=Math.min(vt[0],_t[0]),Gt=Math.min(vt[1],_t[1]),qt=Math.max(vt[0],_t[0]),en=Math.max(vt[1],_t[1]),Xt=wt.search({minX:jt,minY:Gt,maxX:qt,maxY:en}),sn=0;sn<Xt.length;sn++)if(Tt=Xt[sn].p,At=Xt[sn].next.p,Ot=vt,Tt!==(Nt=_t)&&At!==Ot&&zo(Tt,At,Ot)>0!=zo(Tt,At,Nt)>0&&zo(Ot,Nt,Tt)>0!=zo(Ot,Nt,At)>0)return!1;return!0}function br(vt){var _t=vt.p,wt=vt.next.p;return vt.minX=Math.min(_t[0],wt[0]),vt.minY=Math.min(_t[1],wt[1]),vt.maxX=Math.max(_t[0],wt[0]),vt.maxY=Math.max(_t[1],wt[1]),vt}function ll(vt,_t){var wt={p:vt,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return _t?(wt.next=_t.next,wt.prev=_t,_t.next.prev=wt,_t.next=wt):(wt.prev=wt,wt.next=wt),wt}function Pr(vt,_t){var wt=vt[0]-_t[0],Tt=vt[1]-_t[1];return wt*wt+Tt*Tt}function ta(vt,_t,wt){var Tt=_t[0],At=_t[1],Ot=wt[0]-Tt,Nt=wt[1]-At;if(Ot!==0||Nt!==0){var jt=((vt[0]-Tt)*Ot+(vt[1]-At)*Nt)/(Ot*Ot+Nt*Nt);jt>1?(Tt=wt[0],At=wt[1]):jt>0&&(Tt+=Ot*jt,At+=Nt*jt)}return(Ot=vt[0]-Tt)*Ot+(Nt=vt[1]-At)*Nt}function Oc(vt,_t,wt,Tt,At,Ot,Nt,jt){var Gt,qt,en,Xt,sn=wt-vt,yn=Tt-_t,vn=Nt-At,wn=jt-Ot,un=vt-At,Fn=_t-Ot,Qn=sn*sn+yn*yn,_n=sn*vn+yn*wn,Bn=vn*vn+wn*wn,Hn=sn*un+yn*Fn,Gn=vn*un+wn*Fn,Vn=Qn*Bn-_n*_n,Ur=Vn,$r=Vn;Vn===0?(qt=0,Ur=1,Xt=Gn,$r=Bn):(Xt=Qn*Gn-_n*Hn,(qt=_n*Gn-Bn*Hn)<0?(qt=0,Xt=Gn,$r=Bn):qt>Ur&&(qt=Ur,Xt=Gn+_n,$r=Bn)),Xt<0?(Xt=0,-Hn<0?qt=0:-Hn>Qn?qt=Ur:(qt=-Hn,Ur=Qn)):Xt>$r&&(Xt=$r,-Hn+_n<0?qt=0:-Hn+_n>Qn?qt=Ur:(qt=-Hn+_n,Ur=Qn));var Yr=(1-(en=Xt===0?0:Xt/$r))*At+en*Nt-((1-(Gt=qt===0?0:qt/Ur))*vt+Gt*wt),Mr=(1-en)*Ot+en*jt-((1-Gt)*_t+Gt*Tt);return Yr*Yr+Mr*Mr}function Eo(vt,_t){_t===void 0&&(_t={}),_t.concavity=_t.concavity||1/0;var wt=[];if(hn(vt,function(At){wt.push([At[0],At[1]])}),!wt.length)return null;var Tt=Is(wt,_t.concavity);return Tt.length>3?Pt([Tt]):null}function ro(vt,_t,wt){if(wt===void 0&&(wt={}),!vt)throw new Error("point is required");if(!_t)throw new Error("polygon is required");var Tt=fn(vt),At=Un(_t),Ot=At.type,Nt=_t.bbox,jt=At.coordinates;if(Nt&&function(sn,yn){return yn[0]<=sn[0]&&yn[1]<=sn[1]&&yn[2]>=sn[0]&&yn[3]>=sn[1]}(Tt,Nt)===!1)return!1;Ot==="Polygon"&&(jt=[jt]);for(var Gt=!1,qt=0;qt<jt.length&&!Gt;qt++)if(Ah(Tt,jt[qt][0],wt.ignoreBoundary)){for(var en=!1,Xt=1;Xt<jt[qt].length&&!en;)Ah(Tt,jt[qt][Xt],!wt.ignoreBoundary)&&(en=!0),Xt++;en||(Gt=!0)}return Gt}function Ah(vt,_t,wt){var Tt=!1;_t[0][0]===_t[_t.length-1][0]&&_t[0][1]===_t[_t.length-1][1]&&(_t=_t.slice(0,_t.length-1));for(var At=0,Ot=_t.length-1;At<_t.length;Ot=At++){var Nt=_t[At][0],jt=_t[At][1],Gt=_t[Ot][0],qt=_t[Ot][1];if(vt[1]*(Nt-Gt)+jt*(Gt-vt[0])+qt*(vt[0]-Nt)==0&&(Nt-vt[0])*(Gt-vt[0])<=0&&(jt-vt[1])*(qt-vt[1])<=0)return!wt;jt>vt[1]!=qt>vt[1]&&vt[0]<(Gt-Nt)*(vt[1]-jt)/(qt-jt)+Nt&&(Tt=!Tt)}return Tt}function Ai(vt,_t){var wt=[];return nr(vt,function(Tt){var At=!1;if(Tt.geometry.type==="Point")ur(_t,function(Nt){ro(Tt,Nt)&&(At=!0)}),At&&wt.push(Tt);else{if(Tt.geometry.type!=="MultiPoint")throw new Error("Input geometry must be a Point or MultiPoint");var Ot=[];ur(_t,function(Nt){hn(Tt,function(jt){ro(jt,Nt)&&(At=!0,Ot.push(jt))})}),At&&wt.push(Zt(Ot))}}),Ft(wt)}function oo(vt,_t,wt){wt===void 0&&(wt={});var Tt=fn(vt),At=fn(_t),Ot=An(At[1]-Tt[1]),Nt=An(At[0]-Tt[0]),jt=An(Tt[1]),Gt=An(At[1]),qt=Math.pow(Math.sin(Ot/2),2)+Math.pow(Math.sin(Nt/2),2)*Math.cos(jt)*Math.cos(Gt);return on(2*Math.atan2(Math.sqrt(qt),Math.sqrt(1-qt)),wt.units)}function Yl(vt,_t){var wt=!1;return Ft(function(Tt){if(Tt.length<3)return[];Tt.sort(cc);for(var At,Ot,Nt,jt,Gt,qt,en=Tt.length-1,Xt=Tt[en].x,sn=Tt[0].x,yn=Tt[en].y,vn=yn,wn=1e-12;en--;)Tt[en].y<yn&&(yn=Tt[en].y),Tt[en].y>vn&&(vn=Tt[en].y);var un,Fn=sn-Xt,Qn=vn-yn,_n=Fn>Qn?Fn:Qn,Bn=.5*(sn+Xt),Hn=.5*(vn+yn),Gn=[new tu({__sentinel:!0,x:Bn-20*_n,y:Hn-_n},{__sentinel:!0,x:Bn,y:Hn+20*_n},{__sentinel:!0,x:Bn+20*_n,y:Hn-_n})],Vn=[],Ur=[];for(en=Tt.length;en--;){for(Ur.length=0,un=Gn.length;un--;)(Fn=Tt[en].x-Gn[un].x)>0&&Fn*Fn>Gn[un].r?(Vn.push(Gn[un]),Gn.splice(un,1)):Fn*Fn+(Qn=Tt[en].y-Gn[un].y)*Qn>Gn[un].r||(Ur.push(Gn[un].a,Gn[un].b,Gn[un].b,Gn[un].c,Gn[un].c,Gn[un].a),Gn.splice(un,1));for(Hs(Ur),un=Ur.length;un;)Ot=Ur[--un],At=Ur[--un],Nt=Tt[en],jt=Ot.x-At.x,Gt=Ot.y-At.y,qt=2*(jt*(Nt.y-Ot.y)-Gt*(Nt.x-Ot.x)),Math.abs(qt)>wn&&Gn.push(new tu(At,Ot,Nt))}for(Array.prototype.push.apply(Vn,Gn),en=Vn.length;en--;)(Vn[en].a.__sentinel||Vn[en].b.__sentinel||Vn[en].c.__sentinel)&&Vn.splice(en,1);return Vn}(vt.features.map(function(Tt){var At={x:Tt.geometry.coordinates[0],y:Tt.geometry.coordinates[1]};return _t?At.z=Tt.properties[_t]:Tt.geometry.coordinates.length===3&&(wt=!0,At.z=Tt.geometry.coordinates[2]),At})).map(function(Tt){var At=[Tt.a.x,Tt.a.y],Ot=[Tt.b.x,Tt.b.y],Nt=[Tt.c.x,Tt.c.y],jt={};return wt?(At.push(Tt.a.z),Ot.push(Tt.b.z),Nt.push(Tt.c.z)):jt={a:Tt.a.z,b:Tt.b.z,c:Tt.c.z},Pt([[At,Ot,Nt,At]],jt)}))}Is.default=Ys;var tu=function(vt,_t,wt){this.a=vt,this.b=_t,this.c=wt;var Tt,At,Ot=_t.x-vt.x,Nt=_t.y-vt.y,jt=wt.x-vt.x,Gt=wt.y-vt.y,qt=Ot*(vt.x+_t.x)+Nt*(vt.y+_t.y),en=jt*(vt.x+wt.x)+Gt*(vt.y+wt.y),Xt=2*(Ot*(wt.y-_t.y)-Nt*(wt.x-_t.x));this.x=(Gt*qt-Nt*en)/Xt,this.y=(Ot*en-jt*qt)/Xt,Tt=this.x-vt.x,At=this.y-vt.y,this.r=Tt*Tt+At*At};function cc(vt,_t){return _t.x-vt.x}function Hs(vt){var _t,wt,Tt,At,Ot,Nt=vt.length;e:for(;Nt;)for(wt=vt[--Nt],_t=vt[--Nt],Tt=Nt;Tt;)if(Ot=vt[--Tt],_t===(At=vt[--Tt])&&wt===Ot||_t===Ot&&wt===At){vt.splice(Nt,2),vt.splice(Tt,2),Nt-=2;continue e}}function Po(vt){if(!vt)throw new Error("geojson is required");switch(vt.type){case"Feature":return Wa(vt);case"FeatureCollection":return function(_t){var wt={type:"FeatureCollection"};return Object.keys(_t).forEach(function(Tt){switch(Tt){case"type":case"features":return;default:wt[Tt]=_t[Tt]}}),wt.features=_t.features.map(function(Tt){return Wa(Tt)}),wt}(vt);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return $c(vt);default:throw new Error("unknown GeoJSON type")}}function Wa(vt){var _t={type:"Feature"};return Object.keys(vt).forEach(function(wt){switch(wt){case"type":case"properties":case"geometry":return;default:_t[wt]=vt[wt]}}),_t.properties=na(vt.properties),_t.geometry=$c(vt.geometry),_t}function na(vt){var _t={};return vt&&Object.keys(vt).forEach(function(wt){var Tt=vt[wt];typeof Tt=="object"?Tt===null?_t[wt]=null:Array.isArray(Tt)?_t[wt]=Tt.map(function(At){return At}):_t[wt]=na(Tt):_t[wt]=Tt}),_t}function $c(vt){var _t={type:vt.type};return vt.bbox&&(_t.bbox=vt.bbox),vt.type==="GeometryCollection"?(_t.geometries=vt.geometries.map(function(wt){return $c(wt)}),_t):(_t.coordinates=Ba(vt.coordinates),_t)}function Ba(vt){var _t=vt;return typeof _t[0]!="object"?_t.slice():_t.map(function(wt){return Ba(wt)})}function Xl(vt,_t){if(_t===void 0&&(_t={}),!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.mutate;if(sr(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");wt!==!1&&wt!==void 0||(vt=Po(vt));var Tt=[],At=yr(vt,function(Ot,Nt){var jt=function(Gt,qt){var en,Xt=Gt.geometry.coordinates,sn=qt.geometry.coordinates,yn=el(Xt[0]),vn=el(Xt[Xt.length-1]),wn=el(sn[0]),un=el(sn[sn.length-1]);if(yn===un)en=sn.concat(Xt.slice(1));else if(wn===vn)en=Xt.concat(sn.slice(1));else if(yn===wn)en=Xt.slice(1).reverse().concat(sn);else{if(vn!==un)return null;en=Xt.concat(sn.reverse().slice(1))}return Dt(en)}(Ot,Nt);return jt||(Tt.push(Ot),Nt)});return At&&Tt.push(At),Tt.length?Tt.length===1?Tt[0]:Yt(Tt.map(function(Ot){return Ot.coordinates})):null}function el(vt){return vt[0].toString()+","+vt[1].toString()}function Yu(vt){return vt}function nu(vt,_t){var wt=function(qt){if(qt==null)return Yu;var en,Xt,sn=qt.scale[0],yn=qt.scale[1],vn=qt.translate[0],wn=qt.translate[1];return function(un,Fn){Fn||(en=Xt=0);var Qn=2,_n=un.length,Bn=new Array(_n);for(Bn[0]=(en+=un[0])*sn+vn,Bn[1]=(Xt+=un[1])*yn+wn;Qn<_n;)Bn[Qn]=un[Qn],++Qn;return Bn}}(vt.transform),Tt=vt.arcs;function At(qt,en){en.length&&en.pop();for(var Xt=Tt[qt<0?~qt:qt],sn=0,yn=Xt.length;sn<yn;++sn)en.push(wt(Xt[sn],sn));qt<0&&function(vn,wn){for(var un,Fn=vn.length,Qn=Fn-wn;Qn<--Fn;)un=vn[Qn],vn[Qn++]=vn[Fn],vn[Fn]=un}(en,yn)}function Ot(qt){return wt(qt)}function Nt(qt){for(var en=[],Xt=0,sn=qt.length;Xt<sn;++Xt)At(qt[Xt],en);return en.length<2&&en.push(en[0]),en}function jt(qt){for(var en=Nt(qt);en.length<4;)en.push(en[0]);return en}function Gt(qt){return qt.map(jt)}return function qt(en){var Xt,sn=en.type;switch(sn){case"GeometryCollection":return{type:sn,geometries:en.geometries.map(qt)};case"Point":Xt=Ot(en.coordinates);break;case"MultiPoint":Xt=en.coordinates.map(Ot);break;case"LineString":Xt=Nt(en.arcs);break;case"MultiLineString":Xt=en.arcs.map(Nt);break;case"Polygon":Xt=Gt(en.arcs);break;case"MultiPolygon":Xt=en.arcs.map(Gt);break;default:return null}return{type:sn,coordinates:Xt}}(_t)}function Su(vt,_t){var wt={},Tt={},At={},Ot=[],Nt=-1;function jt(Gt,qt){for(var en in Gt){var Xt=Gt[en];delete qt[Xt.start],delete Xt.start,delete Xt.end,Xt.forEach(function(sn){wt[sn<0?~sn:sn]=1}),Ot.push(Xt)}}return _t.forEach(function(Gt,qt){var en,Xt=vt.arcs[Gt<0?~Gt:Gt];Xt.length<3&&!Xt[1][0]&&!Xt[1][1]&&(en=_t[++Nt],_t[Nt]=Gt,_t[qt]=en)}),_t.forEach(function(Gt){var qt,en,Xt=function(un){var Fn,Qn=vt.arcs[un<0?~un:un],_n=Qn[0];return vt.transform?(Fn=[0,0],Qn.forEach(function(Bn){Fn[0]+=Bn[0],Fn[1]+=Bn[1]})):Fn=Qn[Qn.length-1],un<0?[Fn,_n]:[_n,Fn]}(Gt),sn=Xt[0],yn=Xt[1];if(qt=At[sn])if(delete At[qt.end],qt.push(Gt),qt.end=yn,en=Tt[yn]){delete Tt[en.start];var vn=en===qt?qt:qt.concat(en);Tt[vn.start=qt.start]=At[vn.end=en.end]=vn}else Tt[qt.start]=At[qt.end]=qt;else if(qt=Tt[yn])if(delete Tt[qt.start],qt.unshift(Gt),qt.start=sn,en=At[sn]){delete At[en.end];var wn=en===qt?qt:en.concat(qt);Tt[wn.start=en.start]=At[wn.end=qt.end]=wn}else Tt[qt.start]=At[qt.end]=qt;else Tt[(qt=[Gt]).start=sn]=At[qt.end=yn]=qt}),jt(At,Tt),jt(Tt,At),_t.forEach(function(Gt){wt[Gt<0?~Gt:Gt]||Ot.push([Gt])}),Ot}function cl(vt,_t){var wt={},Tt=[],At=[];function Ot(jt){jt.forEach(function(Gt){Gt.forEach(function(qt){(wt[qt=qt<0?~qt:qt]||(wt[qt]=[])).push(jt)})}),Tt.push(jt)}function Nt(jt){return function(Gt){for(var qt,en=-1,Xt=Gt.length,sn=Gt[Xt-1],yn=0;++en<Xt;)qt=sn,sn=Gt[en],yn+=qt[0]*sn[1]-qt[1]*sn[0];return Math.abs(yn)}(nu(vt,{type:"Polygon",arcs:[jt]}).coordinates[0])}return _t.forEach(function jt(Gt){switch(Gt.type){case"GeometryCollection":Gt.geometries.forEach(jt);break;case"Polygon":Ot(Gt.arcs);break;case"MultiPolygon":Gt.arcs.forEach(Ot)}}),Tt.forEach(function(jt){if(!jt._){var Gt=[],qt=[jt];for(jt._=1,At.push(Gt);jt=qt.pop();)Gt.push(jt),jt.forEach(function(en){en.forEach(function(Xt){wt[Xt<0?~Xt:Xt].forEach(function(sn){sn._||(sn._=1,qt.push(sn))})})})}}),Tt.forEach(function(jt){delete jt._}),{type:"MultiPolygon",arcs:At.map(function(jt){var Gt,qt=[];if(jt.forEach(function(vn){vn.forEach(function(wn){wn.forEach(function(un){wt[un<0?~un:un].length<2&&qt.push(un)})})}),(Gt=(qt=Su(vt,qt)).length)>1)for(var en,Xt,sn=1,yn=Nt(qt[0]);sn<Gt;++sn)(en=Nt(qt[sn]))>yn&&(Xt=qt[0],qt[0]=qt[sn],qt[sn]=Xt,yn=en);return qt}).filter(function(jt){return jt.length>0})}}var cd=Object.prototype.hasOwnProperty;function Lh(vt,_t,wt,Tt,At,Ot){arguments.length===3&&(Tt=Ot=Array,At=null);for(var Nt=new Tt(vt=1<<Math.max(4,Math.ceil(Math.log(vt)/Math.LN2))),jt=new Ot(vt),Gt=vt-1,qt=0;qt<vt;++qt)Nt[qt]=At;function en(vn,wn){for(var un=_t(vn)&Gt,Fn=Nt[un],Qn=0;Fn!=At;){if(wt(Fn,vn))return jt[un]=wn;if(++Qn>=vt)throw new Error("full hashmap");Fn=Nt[un=un+1&Gt]}return Nt[un]=vn,jt[un]=wn,wn}function Xt(vn,wn){for(var un=_t(vn)&Gt,Fn=Nt[un],Qn=0;Fn!=At;){if(wt(Fn,vn))return jt[un];if(++Qn>=vt)throw new Error("full hashmap");Fn=Nt[un=un+1&Gt]}return Nt[un]=vn,jt[un]=wn,wn}function sn(vn,wn){for(var un=_t(vn)&Gt,Fn=Nt[un],Qn=0;Fn!=At;){if(wt(Fn,vn))return jt[un];if(++Qn>=vt)break;Fn=Nt[un=un+1&Gt]}return wn}function yn(){for(var vn=[],wn=0,un=Nt.length;wn<un;++wn){var Fn=Nt[wn];Fn!=At&&vn.push(Fn)}return vn}return{set:en,maybeSet:Xt,get:sn,keys:yn}}function Xu(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}var Co=new ArrayBuffer(16),uc=new Float64Array(Co),co=new Uint32Array(Co);function Ml(vt){uc[0]=vt[0],uc[1]=vt[1];var _t=co[0]^co[1];return 2147483647&(_t=_t<<5^_t>>7^co[2]^co[3])}function sp(vt){var _t,wt,Tt,At,Ot=vt.coordinates,Nt=vt.lines,jt=vt.rings,Gt=function(){for(var $r=Lh(1.4*Ot.length,Hn,Gn,Int32Array,-1,Int32Array),Yr=new Int32Array(Ot.length),Mr=0,Qr=Ot.length;Mr<Qr;++Mr)Yr[Mr]=$r.maybeSet(Mr,Mr);return Yr}(),qt=new Int32Array(Ot.length),en=new Int32Array(Ot.length),Xt=new Int32Array(Ot.length),sn=new Int8Array(Ot.length),yn=0;for(_t=0,wt=Ot.length;_t<wt;++_t)qt[_t]=en[_t]=Xt[_t]=-1;for(_t=0,wt=Nt.length;_t<wt;++_t){var vn=Nt[_t],wn=vn[0],un=vn[1];for(Tt=Gt[wn],At=Gt[++wn],++yn,sn[Tt]=1;++wn<=un;)Bn(_t,Tt,Tt=At,At=Gt[wn]);++yn,sn[At]=1}for(_t=0,wt=Ot.length;_t<wt;++_t)qt[_t]=-1;for(_t=0,wt=jt.length;_t<wt;++_t){var Fn=jt[_t],Qn=Fn[0]+1,_n=Fn[1];for(Bn(_t,Gt[_n-1],Tt=Gt[Qn-1],At=Gt[Qn]);++Qn<=_n;)Bn(_t,Tt,Tt=At,At=Gt[Qn])}function Bn($r,Yr,Mr,Qr){if(qt[Mr]!==$r){qt[Mr]=$r;var Hr=en[Mr];if(Hr>=0){var Br=Xt[Mr];Hr===Yr&&Br===Qr||Hr===Qr&&Br===Yr||(++yn,sn[Mr]=1)}else en[Mr]=Yr,Xt[Mr]=Qr}}function Hn($r){return Ml(Ot[$r])}function Gn($r,Yr){return Xu(Ot[$r],Ot[Yr])}qt=en=Xt=null;var Vn,Ur=function($r,Yr,Mr,Qr,Hr){arguments.length===3&&(Qr=Array,Hr=null);for(var Br=new Qr($r=1<<Math.max(4,Math.ceil(Math.log($r)/Math.LN2))),Nr=$r-1,Xr=0;Xr<$r;++Xr)Br[Xr]=Hr;function jr(zi){for(var gi=Yr(zi)&Nr,_o=Br[gi],Oi=0;_o!=Hr;){if(Mr(_o,zi))return!0;if(++Oi>=$r)throw new Error("full hashset");_o=Br[gi=gi+1&Nr]}return Br[gi]=zi,!0}function ei(zi){for(var gi=Yr(zi)&Nr,_o=Br[gi],Oi=0;_o!=Hr;){if(Mr(_o,zi))return!0;if(++Oi>=$r)break;_o=Br[gi=gi+1&Nr]}return!1}function xr(){for(var zi=[],gi=0,_o=Br.length;gi<_o;++gi){var Oi=Br[gi];Oi!=Hr&&zi.push(Oi)}return zi}return{add:jr,has:ei,values:xr}}(1.4*yn,Ml,Xu);for(_t=0,wt=Ot.length;_t<wt;++_t)sn[Vn=Gt[_t]]&&Ur.add(Ot[Vn]);return Ur}function ap(vt,_t,wt,Tt){ud(vt,_t,wt),ud(vt,_t,_t+Tt),ud(vt,_t+Tt,wt)}function ud(vt,_t,wt){for(var Tt,At=_t+(wt---_t>>1);_t<At;++_t,--wt)Tt=vt[_t],vt[_t]=vt[wt],vt[wt]=Tt}function Zu(vt){var _t,wt,Tt={};for(_t in vt)Tt[_t]=(wt=vt[_t])==null?{type:null}:(wt.type==="FeatureCollection"?lp:wt.type==="Feature"?Zl:ua)(wt);return Tt}function lp(vt){var _t={type:"GeometryCollection",geometries:vt.features.map(Zl)};return vt.bbox!=null&&(_t.bbox=vt.bbox),_t}function Zl(vt){var _t,wt=ua(vt.geometry);for(_t in vt.id!=null&&(wt.id=vt.id),vt.bbox!=null&&(wt.bbox=vt.bbox),vt.properties){wt.properties=vt.properties;break}return wt}function ua(vt){if(vt==null)return{type:null};var _t=vt.type==="GeometryCollection"?{type:"GeometryCollection",geometries:vt.geometries.map(ua)}:vt.type==="Point"||vt.type==="MultiPoint"?{type:vt.type,coordinates:vt.coordinates}:{type:vt.type,arcs:vt.coordinates};return vt.bbox!=null&&(_t.bbox=vt.bbox),_t}function Cu(vt,_t){var wt=function(sn){var yn=1/0,vn=1/0,wn=-1/0,un=-1/0;function Fn(Vn){Vn!=null&&cd.call(Qn,Vn.type)&&Qn[Vn.type](Vn)}var Qn={GeometryCollection:function(Vn){Vn.geometries.forEach(Fn)},Point:function(Vn){_n(Vn.coordinates)},MultiPoint:function(Vn){Vn.coordinates.forEach(_n)},LineString:function(Vn){Bn(Vn.arcs)},MultiLineString:function(Vn){Vn.arcs.forEach(Bn)},Polygon:function(Vn){Vn.arcs.forEach(Bn)},MultiPolygon:function(Vn){Vn.arcs.forEach(Hn)}};function _n(Vn){var Ur=Vn[0],$r=Vn[1];Ur<yn&&(yn=Ur),Ur>wn&&(wn=Ur),$r<vn&&(vn=$r),$r>un&&(un=$r)}function Bn(Vn){Vn.forEach(_n)}function Hn(Vn){Vn.forEach(Bn)}for(var Gn in sn)Fn(sn[Gn]);return wn>=yn&&un>=vn?[yn,vn,wn,un]:void 0}(vt=Zu(vt)),Tt=_t>0&&wt&&function(sn,yn,vn){var wn=yn[0],un=yn[1],Fn=yn[2],Qn=yn[3],_n=Fn-wn?(vn-1)/(Fn-wn):1,Bn=Qn-un?(vn-1)/(Qn-un):1;function Hn(Hr){return[Math.round((Hr[0]-wn)*_n),Math.round((Hr[1]-un)*Bn)]}function Gn(Hr,Br){for(var Nr,Xr,jr,ei,xr,zi=-1,gi=0,_o=Hr.length,Oi=new Array(_o);++zi<_o;)Nr=Hr[zi],ei=Math.round((Nr[0]-wn)*_n),xr=Math.round((Nr[1]-un)*Bn),ei===Xr&&xr===jr||(Oi[gi++]=[Xr=ei,jr=xr]);for(Oi.length=gi;gi<Br;)gi=Oi.push([Oi[0][0],Oi[0][1]]);return Oi}function Vn(Hr){return Gn(Hr,2)}function Ur(Hr){return Gn(Hr,4)}function $r(Hr){return Hr.map(Ur)}function Yr(Hr){Hr!=null&&cd.call(Mr,Hr.type)&&Mr[Hr.type](Hr)}var Mr={GeometryCollection:function(Hr){Hr.geometries.forEach(Yr)},Point:function(Hr){Hr.coordinates=Hn(Hr.coordinates)},MultiPoint:function(Hr){Hr.coordinates=Hr.coordinates.map(Hn)},LineString:function(Hr){Hr.arcs=Vn(Hr.arcs)},MultiLineString:function(Hr){Hr.arcs=Hr.arcs.map(Vn)},Polygon:function(Hr){Hr.arcs=$r(Hr.arcs)},MultiPolygon:function(Hr){Hr.arcs=Hr.arcs.map($r)}};for(var Qr in sn)Yr(sn[Qr]);return{scale:[1/_n,1/Bn],translate:[wn,un]}}(vt,wt,_t),At=function(sn){var yn,vn,wn,un,Fn=sn.coordinates,Qn=sn.lines,_n=sn.rings,Bn=Qn.length+_n.length;for(delete sn.lines,delete sn.rings,wn=0,un=Qn.length;wn<un;++wn)for(yn=Qn[wn];yn=yn.next;)++Bn;for(wn=0,un=_n.length;wn<un;++wn)for(vn=_n[wn];vn=vn.next;)++Bn;var Hn=Lh(2*Bn*1.4,Ml,Xu),Gn=sn.arcs=[];for(wn=0,un=Qn.length;wn<un;++wn){yn=Qn[wn];do Vn(yn);while(yn=yn.next)}for(wn=0,un=_n.length;wn<un;++wn)if((vn=_n[wn]).next)do Vn(vn);while(vn=vn.next);else Ur(vn);function Vn(Br){var Nr,Xr,jr,ei,xr,zi,gi,_o;if(jr=Hn.get(Nr=Fn[Br[0]])){for(gi=0,_o=jr.length;gi<_o;++gi)if($r(ei=jr[gi],Br))return Br[0]=ei[0],void(Br[1]=ei[1])}if(xr=Hn.get(Xr=Fn[Br[1]])){for(gi=0,_o=xr.length;gi<_o;++gi)if(Yr(zi=xr[gi],Br))return Br[1]=zi[0],void(Br[0]=zi[1])}jr?jr.push(Br):Hn.set(Nr,[Br]),xr?xr.push(Br):Hn.set(Xr,[Br]),Gn.push(Br)}function Ur(Br){var Nr,Xr,jr,ei,xr;if(Xr=Hn.get(Fn[Br[0]]))for(ei=0,xr=Xr.length;ei<xr;++ei){if(Mr(jr=Xr[ei],Br))return Br[0]=jr[0],void(Br[1]=jr[1]);if(Qr(jr,Br))return Br[0]=jr[1],void(Br[1]=jr[0])}if(Xr=Hn.get(Nr=Fn[Br[0]+Hr(Br)]))for(ei=0,xr=Xr.length;ei<xr;++ei){if(Mr(jr=Xr[ei],Br))return Br[0]=jr[0],void(Br[1]=jr[1]);if(Qr(jr,Br))return Br[0]=jr[1],void(Br[1]=jr[0])}Xr?Xr.push(Br):Hn.set(Nr,[Br]),Gn.push(Br)}function $r(Br,Nr){var Xr=Br[0],jr=Nr[0],ei=Br[1];if(Xr-ei!=jr-Nr[1])return!1;for(;Xr<=ei;++Xr,++jr)if(!Xu(Fn[Xr],Fn[jr]))return!1;return!0}function Yr(Br,Nr){var Xr=Br[0],jr=Nr[0],ei=Br[1],xr=Nr[1];if(Xr-ei!=jr-xr)return!1;for(;Xr<=ei;++Xr,--xr)if(!Xu(Fn[Xr],Fn[xr]))return!1;return!0}function Mr(Br,Nr){var Xr=Br[0],jr=Nr[0],ei=Br[1]-Xr;if(ei!==Nr[1]-jr)return!1;for(var xr=Hr(Br),zi=Hr(Nr),gi=0;gi<ei;++gi)if(!Xu(Fn[Xr+(gi+xr)%ei],Fn[jr+(gi+zi)%ei]))return!1;return!0}function Qr(Br,Nr){var Xr=Br[0],jr=Nr[0],ei=Br[1],xr=Nr[1],zi=ei-Xr;if(zi!==xr-jr)return!1;for(var gi=Hr(Br),_o=zi-Hr(Nr),Oi=0;Oi<zi;++Oi)if(!Xu(Fn[Xr+(Oi+gi)%zi],Fn[xr-(Oi+_o)%zi]))return!1;return!0}function Hr(Br){for(var Nr=Br[0],Xr=Br[1],jr=Nr,ei=jr,xr=Fn[jr];++jr<Xr;){var zi=Fn[jr];(zi[0]<xr[0]||zi[0]===xr[0]&&zi[1]<xr[1])&&(ei=jr,xr=zi)}return ei-Nr}return sn}(function(sn){var yn,vn,wn,un=sp(sn),Fn=sn.coordinates,Qn=sn.lines,_n=sn.rings;for(vn=0,wn=Qn.length;vn<wn;++vn)for(var Bn=Qn[vn],Hn=Bn[0],Gn=Bn[1];++Hn<Gn;)un.has(Fn[Hn])&&(yn={0:Hn,1:Bn[1]},Bn[1]=Hn,Bn=Bn.next=yn);for(vn=0,wn=_n.length;vn<wn;++vn)for(var Vn=_n[vn],Ur=Vn[0],$r=Ur,Yr=Vn[1],Mr=un.has(Fn[Ur]);++$r<Yr;)un.has(Fn[$r])&&(Mr?(yn={0:$r,1:Vn[1]},Vn[1]=$r,Vn=Vn.next=yn):(ap(Fn,Ur,Yr,Yr-$r),Fn[Yr]=Fn[Ur],Mr=!0,$r=Ur));return sn}(function(sn){var yn=-1,vn=[],wn=[],un=[];function Fn(Vn){Vn&&cd.call(Qn,Vn.type)&&Qn[Vn.type](Vn)}var Qn={GeometryCollection:function(Vn){Vn.geometries.forEach(Fn)},LineString:function(Vn){Vn.arcs=_n(Vn.arcs)},MultiLineString:function(Vn){Vn.arcs=Vn.arcs.map(_n)},Polygon:function(Vn){Vn.arcs=Vn.arcs.map(Bn)},MultiPolygon:function(Vn){Vn.arcs=Vn.arcs.map(Hn)}};function _n(Vn){for(var Ur=0,$r=Vn.length;Ur<$r;++Ur)un[++yn]=Vn[Ur];var Yr={0:yn-$r+1,1:yn};return vn.push(Yr),Yr}function Bn(Vn){for(var Ur=0,$r=Vn.length;Ur<$r;++Ur)un[++yn]=Vn[Ur];var Yr={0:yn-$r+1,1:yn};return wn.push(Yr),Yr}function Hn(Vn){return Vn.map(Bn)}for(var Gn in sn)Fn(sn[Gn]);return{type:"Topology",coordinates:un,lines:vn,rings:wn,objects:sn}}(vt))),Ot=At.coordinates,Nt=Lh(1.4*At.arcs.length,cp,mg);function jt(sn){sn&&cd.call(Gt,sn.type)&&Gt[sn.type](sn)}vt=At.objects,At.bbox=wt,At.arcs=At.arcs.map(function(sn,yn){return Nt.set(sn,yn),Ot.slice(sn[0],sn[1]+1)}),delete At.coordinates,Ot=null;var Gt={GeometryCollection:function(sn){sn.geometries.forEach(jt)},LineString:function(sn){sn.arcs=qt(sn.arcs)},MultiLineString:function(sn){sn.arcs=sn.arcs.map(qt)},Polygon:function(sn){sn.arcs=sn.arcs.map(qt)},MultiPolygon:function(sn){sn.arcs=sn.arcs.map(en)}};function qt(sn){var yn=[];do{var vn=Nt.get(sn);yn.push(sn[0]<sn[1]?vn:~vn)}while(sn=sn.next);return yn}function en(sn){return sn.map(qt)}for(var Xt in vt)jt(vt[Xt]);return Tt&&(At.transform=Tt,At.arcs=function(sn){for(var yn=-1,vn=sn.length;++yn<vn;){for(var wn,un,Fn=sn[yn],Qn=0,_n=1,Bn=Fn.length,Hn=Fn[0],Gn=Hn[0],Vn=Hn[1];++Qn<Bn;)wn=(Hn=Fn[Qn])[0],un=Hn[1],wn===Gn&&un===Vn||(Fn[_n++]=[wn-Gn,un-Vn],Gn=wn,Vn=un);_n===1&&(Fn[_n++]=[0,0]),Fn.length=_n}return sn}(At.arcs)),At}function cp(vt){var _t,wt=vt[0],Tt=vt[1];return Tt<wt&&(_t=wt,wt=Tt,Tt=_t),wt+31*Tt}function mg(vt,_t){var wt,Tt=vt[0],At=vt[1],Ot=_t[0],Nt=_t[1];return At<Tt&&(wt=Tt,Tt=At,At=wt),Nt<Ot&&(wt=Ot,Ot=Nt,Nt=wt),Tt===Ot&&At===Nt}function Pm(vt,_t){if(_t===void 0&&(_t={}),sr(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");_t.mutate!==!1&&_t.mutate!==void 0||(vt=Po(vt));var wt=[];Sr(vt,function(At){wt.push(At.geometry)});var Tt=Cu({geoms:Qt(wt).geometry});return function(At){return nu(At,cl.apply(this,arguments))}(Tt,Tt.objects.geoms.geometries)}function yg(vt,_t){if(_t===void 0&&(_t={}),!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.mutate;if(sr(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");wt!==!1&&wt!==void 0||(vt=Po(vt));var Tt=function(Ot){var Nt={};Sr(Ot,function(Gt){Nt[Gt.geometry.type]=!0});var jt=Object.keys(Nt);return jt.length===1?jt[0]:null}(vt);if(!Tt)throw new Error("geojson must be homogenous");var At=vt;switch(Tt){case"LineString":return Xl(At,_t);case"Polygon":return Pm(At,_t);default:throw new Error(Tt+" is not supported")}}function Kl(vt,_t){_t===void 0&&(_t={});var wt=typeof _t=="object"?_t.mutate:_t;if(!vt)throw new Error("geojson is required");var Tt=sr(vt),At=[];switch(Tt){case"LineString":At=ul(vt);break;case"MultiLineString":case"Polygon":On(vt).forEach(function(Nt){At.push(ul(Nt))});break;case"MultiPolygon":On(vt).forEach(function(Nt){var jt=[];Nt.forEach(function(Gt){jt.push(ul(Gt))}),At.push(jt)});break;case"Point":return vt;case"MultiPoint":var Ot={};On(vt).forEach(function(Nt){var jt=Nt.join("-");Object.prototype.hasOwnProperty.call(Ot,jt)||(At.push(Nt),Ot[jt]=!0)});break;default:throw new Error(Tt+" geometry not supported")}return vt.coordinates?wt===!0?(vt.coordinates=At,vt):{type:Tt,coordinates:At}:wt===!0?(vt.geometry.coordinates=At,vt):xt({type:Tt,coordinates:At},vt.properties,{bbox:vt.bbox,id:vt.id})}function ul(vt){var _t=On(vt);if(_t.length===2&&!Qd(_t[0],_t[1]))return _t;var wt=[],Tt=_t.length-1,At=wt.length;wt.push(_t[0]);for(var Ot=1;Ot<Tt;Ot++){var Nt=wt[wt.length-1];_t[Ot][0]===Nt[0]&&_t[Ot][1]===Nt[1]||(wt.push(_t[Ot]),(At=wt.length)>2&&ds(wt[At-3],wt[At-1],wt[At-2])&&wt.splice(wt.length-2,1))}if(wt.push(_t[_t.length-1]),At=wt.length,Qd(_t[0],_t[_t.length-1])&&At<4)throw new Error("invalid polygon");return ds(wt[At-3],wt[At-1],wt[At-2])&&wt.splice(wt.length-2,1),wt}function Qd(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function ds(vt,_t,wt){var Tt=wt[0],At=wt[1],Ot=vt[0],Nt=vt[1],jt=_t[0],Gt=_t[1],qt=jt-Ot,en=Gt-Nt;return(Tt-Ot)*en-(At-Nt)*qt===0&&(Math.abs(qt)>=Math.abs(en)?qt>0?Ot<=Tt&&Tt<=jt:jt<=Tt&&Tt<=Ot:en>0?Nt<=At&&At<=Gt:Gt<=At&&At<=Nt)}function Om(vt,_t,wt){var Tt=_t.x,At=_t.y,Ot=wt.x-Tt,Nt=wt.y-At;if(Ot!==0||Nt!==0){var jt=((vt.x-Tt)*Ot+(vt.y-At)*Nt)/(Ot*Ot+Nt*Nt);jt>1?(Tt=wt.x,At=wt.y):jt>0&&(Tt+=Ot*jt,At+=Nt*jt)}return(Ot=vt.x-Tt)*Ot+(Nt=vt.y-At)*Nt}function wl(vt,_t,wt,Tt,At){for(var Ot,Nt=Tt,jt=_t+1;jt<wt;jt++){var Gt=Om(vt[jt],vt[_t],vt[wt]);Gt>Nt&&(Ot=jt,Nt=Gt)}Nt>Tt&&(Ot-_t>1&&wl(vt,_t,Ot,Tt,At),At.push(vt[Ot]),wt-Ot>1&&wl(vt,Ot,wt,Tt,At))}function Ih(vt,_t){var wt=vt.length-1,Tt=[vt[0]];return wl(vt,0,wt,_t,Tt),Tt.push(vt[wt]),Tt}function hd(vt,_t,wt){if(vt.length<=2)return vt;var Tt=_t!==void 0?_t*_t:1;return vt=Ih(vt=wt?vt:function(At,Ot){for(var Nt,jt,Gt,qt,en,Xt=At[0],sn=[Xt],yn=1,vn=At.length;yn<vn;yn++)Nt=At[yn],Gt=Xt,qt=void 0,en=void 0,qt=(jt=Nt).x-Gt.x,en=jt.y-Gt.y,qt*qt+en*en>Ot&&(sn.push(Nt),Xt=Nt);return Xt!==Nt&&sn.push(Nt),sn}(vt,Tt),Tt)}function dd(vt,_t,wt){return hd(vt.map(function(Tt){return{x:Tt[0],y:Tt[1],z:Tt[2]}}),_t,wt).map(function(Tt){return Tt.z?[Tt.x,Tt.y,Tt.z]:[Tt.x,Tt.y]})}function fd(vt,_t,wt){return vt.map(function(Tt){var At=Tt.map(function(Nt){return{x:Nt[0],y:Nt[1]}});if(At.length<4)throw new Error("invalid polygon");for(var Ot=hd(At,_t,wt).map(function(Nt){return[Nt.x,Nt.y]});!$m(Ot);)Ot=hd(At,_t-=.01*_t,wt).map(function(Nt){return[Nt.x,Nt.y]});return Ot[Ot.length-1][0]===Ot[0][0]&&Ot[Ot.length-1][1]===Ot[0][1]||Ot.push(Ot[0]),Ot})}function $m(vt){return!(vt.length<3)&&!(vt.length===3&&vt[2][0]===vt[0][0]&&vt[2][1]===vt[0][1])}var vg=function(){function vt(_t){this.points=_t.points||[],this.duration=_t.duration||1e4,this.sharpness=_t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=_t.stepLength||60,this.length=this.points.length,this.delay=0;for(var wt=0;wt<this.length;wt++)this.points[wt].z=this.points[wt].z||0;for(wt=0;wt<this.length-1;wt++){var Tt=this.points[wt],At=this.points[wt+1];this.centers.push({x:(Tt.x+At.x)/2,y:(Tt.y+At.y)/2,z:(Tt.z+At.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),wt=0;wt<this.centers.length-1;wt++){var Ot=this.points[wt+1].x-(this.centers[wt].x+this.centers[wt+1].x)/2,Nt=this.points[wt+1].y-(this.centers[wt].y+this.centers[wt+1].y)/2,jt=this.points[wt+1].z-(this.centers[wt].y+this.centers[wt+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[wt+1].x+this.sharpness*(this.centers[wt].x+Ot),y:(1-this.sharpness)*this.points[wt+1].y+this.sharpness*(this.centers[wt].y+Nt),z:(1-this.sharpness)*this.points[wt+1].z+this.sharpness*(this.centers[wt].z+jt)},{x:(1-this.sharpness)*this.points[wt+1].x+this.sharpness*(this.centers[wt+1].x+Ot),y:(1-this.sharpness)*this.points[wt+1].y+this.sharpness*(this.centers[wt+1].y+Nt),z:(1-this.sharpness)*this.points[wt+1].z+this.sharpness*(this.centers[wt+1].z+jt)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return vt.prototype.cacheSteps=function(_t){var wt=[],Tt=this.pos(0);wt.push(0);for(var At=0;At<this.duration;At+=10){var Ot=this.pos(At);Math.sqrt((Ot.x-Tt.x)*(Ot.x-Tt.x)+(Ot.y-Tt.y)*(Ot.y-Tt.y)+(Ot.z-Tt.z)*(Ot.z-Tt.z))>_t&&(wt.push(At),Tt=Ot)}return wt},vt.prototype.vector=function(_t){var wt=this.pos(_t+10),Tt=this.pos(_t-10);return{angle:180*Math.atan2(wt.y-Tt.y,wt.x-Tt.x)/3.14,speed:Math.sqrt((Tt.x-wt.x)*(Tt.x-wt.x)+(Tt.y-wt.y)*(Tt.y-wt.y)+(Tt.z-wt.z)*(Tt.z-wt.z))}},vt.prototype.pos=function(_t){var wt=_t-this.delay;wt<0&&(wt=0),wt>this.duration&&(wt=this.duration-1);var Tt=wt/this.duration;if(Tt>=1)return this.points[this.length-1];var At=Math.floor((this.points.length-1)*Tt);return function(Ot,Nt,jt,Gt,qt){var en=function(Xt){var sn=Xt*Xt;return[sn*Xt,3*sn*(1-Xt),3*Xt*(1-Xt)*(1-Xt),(1-Xt)*(1-Xt)*(1-Xt)]}(Ot);return{x:qt.x*en[0]+Gt.x*en[1]+jt.x*en[2]+Nt.x*en[3],y:qt.y*en[0]+Gt.y*en[1]+jt.y*en[2]+Nt.y*en[3],z:qt.z*en[0]+Gt.z*en[1]+jt.z*en[2]+Nt.z*en[3]}}((this.length-1)*Tt-At,this.points[At],this.controls[At][1],this.controls[At+1][0],this.points[At+1])},vt}();function _g(vt,_t){_t===void 0&&(_t={});for(var wt=_t.resolution||1e4,Tt=_t.sharpness||.85,At=[],Ot=Un(vt).coordinates.map(function(qt){return{x:qt[0],y:qt[1]}}),Nt=new vg({duration:wt,points:Ot,sharpness:Tt}),jt=function(qt){var en=Nt.pos(qt);Math.floor(qt/100)%2==0&&At.push([en.x,en.y])},Gt=0;Gt<Nt.duration;Gt+=10)jt(Gt);return jt(Nt.duration),Dt(At,_t.properties)}function up(vt,_t){_t===void 0&&(_t={});var wt=Number(vt[0]),Tt=Number(vt[1]),At=Number(vt[2]),Ot=Number(vt[3]);if(vt.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var Nt=[wt,Tt];return Pt([[Nt,[At,Tt],[At,Ot],[wt,Ot],Nt]],_t.properties,{bbox:vt,id:_t.id})}function ef(vt){return up(dn(vt))}function bg(vt){var _t=vt[0],wt=vt[1],Tt=vt[2],At=vt[3];if(oo(vt.slice(0,2),[Tt,wt])>=oo(vt.slice(0,2),[_t,At])){var Ot=(wt+At)/2;return[_t,Ot-(Tt-_t)/2,Tt,Ot+(Tt-_t)/2]}var Nt=(_t+Tt)/2;return[Nt-(At-wt)/2,wt,Nt+(At-wt)/2,At]}function Aa(vt,_t,wt,Tt){Tt===void 0&&(Tt={});var At=fn(vt),Ot=An(At[0]),Nt=An(At[1]),jt=An(wt),Gt=nn(_t,Tt.units),qt=Math.asin(Math.sin(Nt)*Math.cos(Gt)+Math.cos(Nt)*Math.sin(Gt)*Math.cos(jt));return kt([Tn(Ot+Math.atan2(Math.sin(jt)*Math.sin(Gt)*Math.cos(Nt),Math.cos(Gt)-Math.sin(Nt)*Math.sin(qt))),Tn(qt)],Tt.properties)}function hp(vt,_t,wt){wt===void 0&&(wt={});for(var Tt=wt.steps||64,At=wt.properties?wt.properties:!Array.isArray(vt)&&vt.type==="Feature"&&vt.properties?vt.properties:{},Ot=[],Nt=0;Nt<Tt;Nt++)Ot.push(Aa(vt,_t,-360*Nt/Tt,wt).geometry.coordinates);return Ot.push(Ot[0]),Pt([Ot],At)}function Rc(vt,_t,wt){if(wt===void 0&&(wt={}),wt.final===!0)return function(Xt,sn){var yn=Rc(sn,Xt);return yn=(yn+180)%360}(vt,_t);var Tt=fn(vt),At=fn(_t),Ot=An(Tt[0]),Nt=An(At[0]),jt=An(Tt[1]),Gt=An(At[1]),qt=Math.sin(Nt-Ot)*Math.cos(Gt),en=Math.cos(jt)*Math.sin(Gt)-Math.sin(jt)*Math.cos(Gt)*Math.cos(Nt-Ot);return Tn(Math.atan2(qt,en))}function hc(vt,_t){_t===void 0&&(_t={});var wt=dn(vt);return kt([(wt[0]+wt[2])/2,(wt[1]+wt[3])/2],_t.properties,_t)}function dc(vt,_t){_t===void 0&&(_t={});var wt=0,Tt=0,At=0;return hn(vt,function(Ot){wt+=Ot[0],Tt+=Ot[1],At++},!0),kt([wt/At,Tt/At],_t.properties)}function pd(vt){var _t=[];return vt.type==="FeatureCollection"?nr(vt,function(wt){hn(wt,function(Tt){_t.push(kt(Tt,wt.properties))})}):hn(vt,function(wt){_t.push(kt(wt,vt.properties))}),Ft(_t)}var tf=gd,Rm=gd;function gd(vt,_t,wt){wt=wt||2;var Tt,At,Ot,Nt,jt,Gt,qt,en=_t&&_t.length,Xt=en?_t[0]*wt:vt.length,sn=nf(vt,0,Xt,wt,!0),yn=[];if(!sn)return yn;if(en&&(sn=function(wn,un,Fn,Qn){var _n,Bn,Hn,Gn=[];for(_n=0,Bn=un.length;_n<Bn;_n++)(Hn=nf(wn,un[_n]*Qn,_n<Bn-1?un[_n+1]*Qn:wn.length,Qn,!1))===Hn.next&&(Hn.steiner=!0),Gn.push(md(Hn));for(Gn.sort(rf),_n=0;_n<Gn.length;_n++)Ku(Gn[_n],Fn),Fn=Ph(Fn,Fn.next);return Fn}(vt,_t,sn,wt)),vt.length>80*wt){Tt=Ot=vt[0],At=Nt=vt[1];for(var vn=wt;vn<Xt;vn+=wt)(jt=vt[vn])<Tt&&(Tt=jt),(Gt=vt[vn+1])<At&&(At=Gt),jt>Ot&&(Ot=jt),Gt>Nt&&(Nt=Gt);qt=(qt=Math.max(Ot-Tt,Nt-At))!==0?1/qt:0}return El(sn,yn,wt,Tt,At,qt),yn}function nf(vt,_t,wt,Tt,At){var Ot,Nt;if(At===Ps(vt,_t,wt,Tt)>0)for(Ot=_t;Ot<wt;Ot+=Tt)Nt=of(Ot,vt[Ot],vt[Ot+1],Nt);else for(Ot=wt-Tt;Ot>=_t;Ot-=Tt)Nt=of(Ot,vt[Ot],vt[Ot+1],Nt);return Nt&&Mc(Nt,Nt.next)&&(Fa(Nt),Nt=Nt.next),Nt}function Ph(vt,_t){if(!vt)return vt;_t||(_t=vt);var wt,Tt=vt;do if(wt=!1,Tt.steiner||!Mc(Tt,Tt.next)&&Ea(Tt.prev,Tt,Tt.next)!==0)Tt=Tt.next;else{if(Fa(Tt),(Tt=_t=Tt.prev)===Tt.next)break;wt=!0}while(wt||Tt!==_t);return _t}function El(vt,_t,wt,Tt,At,Ot,Nt){if(vt){!Nt&&Ot&&function(en,Xt,sn,yn){var vn=en;do vn.z===null&&(vn.z=dp(vn.x,vn.y,Xt,sn,yn)),vn.prevZ=vn.prev,vn.nextZ=vn.next,vn=vn.next;while(vn!==en);vn.prevZ.nextZ=null,vn.prevZ=null,function(wn){var un,Fn,Qn,_n,Bn,Hn,Gn,Vn,Ur=1;do{for(Fn=wn,wn=null,Bn=null,Hn=0;Fn;){for(Hn++,Qn=Fn,Gn=0,un=0;un<Ur&&(Gn++,Qn=Qn.nextZ);un++);for(Vn=Ur;Gn>0||Vn>0&&Qn;)Gn!==0&&(Vn===0||!Qn||Fn.z<=Qn.z)?(_n=Fn,Fn=Fn.nextZ,Gn--):(_n=Qn,Qn=Qn.nextZ,Vn--),Bn?Bn.nextZ=_n:wn=_n,_n.prevZ=Bn,Bn=_n;Fn=Qn}Bn.nextZ=null,Ur*=2}while(Hn>1)}(vn)}(vt,Tt,At,Ot);for(var jt,Gt,qt=vt;vt.prev!==vt.next;)if(jt=vt.prev,Gt=vt.next,Ot?Oh(vt,Tt,At,Ot):hl(vt))_t.push(jt.i/wt),_t.push(vt.i/wt),_t.push(Gt.i/wt),Fa(vt),vt=Gt.next,qt=Gt.next;else if((vt=Gt)===qt){Nt?Nt===1?El(vt=xg(vt,_t,wt),_t,wt,Tt,At,Ot,2):Nt===2&&wg(vt,_t,wt,Tt,At,Ot):El(Ph(vt),_t,wt,Tt,At,Ot,1);break}}}function hl(vt){var _t=vt.prev,wt=vt,Tt=vt.next;if(Ea(_t,wt,Tt)>=0)return!1;for(var At=vt.next.next;At!==vt.prev;){if(qa(_t.x,_t.y,wt.x,wt.y,Tt.x,Tt.y,At.x,At.y)&&Ea(At.prev,At,At.next)>=0)return!1;At=At.next}return!0}function Oh(vt,_t,wt,Tt){var At=vt.prev,Ot=vt,Nt=vt.next;if(Ea(At,Ot,Nt)>=0)return!1;for(var jt=At.x<Ot.x?At.x<Nt.x?At.x:Nt.x:Ot.x<Nt.x?Ot.x:Nt.x,Gt=At.y<Ot.y?At.y<Nt.y?At.y:Nt.y:Ot.y<Nt.y?Ot.y:Nt.y,qt=At.x>Ot.x?At.x>Nt.x?At.x:Nt.x:Ot.x>Nt.x?Ot.x:Nt.x,en=At.y>Ot.y?At.y>Nt.y?At.y:Nt.y:Ot.y>Nt.y?Ot.y:Nt.y,Xt=dp(jt,Gt,_t,wt,Tt),sn=dp(qt,en,_t,wt,Tt),yn=vt.prevZ,vn=vt.nextZ;yn&&yn.z>=Xt&&vn&&vn.z<=sn;){if(yn!==vt.prev&&yn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Nt.x,Nt.y,yn.x,yn.y)&&Ea(yn.prev,yn,yn.next)>=0||(yn=yn.prevZ,vn!==vt.prev&&vn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Nt.x,Nt.y,vn.x,vn.y)&&Ea(vn.prev,vn,vn.next)>=0))return!1;vn=vn.nextZ}for(;yn&&yn.z>=Xt;){if(yn!==vt.prev&&yn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Nt.x,Nt.y,yn.x,yn.y)&&Ea(yn.prev,yn,yn.next)>=0)return!1;yn=yn.prevZ}for(;vn&&vn.z<=sn;){if(vn!==vt.prev&&vn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Nt.x,Nt.y,vn.x,vn.y)&&Ea(vn.prev,vn,vn.next)>=0)return!1;vn=vn.nextZ}return!0}function xg(vt,_t,wt){var Tt=vt;do{var At=Tt.prev,Ot=Tt.next.next;!Mc(At,Ot)&&Ju(At,Tt,Tt.next,Ot)&&Qu(At,Ot)&&Qu(Ot,At)&&(_t.push(At.i/wt),_t.push(Tt.i/wt),_t.push(Ot.i/wt),Fa(Tt),Fa(Tt.next),Tt=vt=Ot),Tt=Tt.next}while(Tt!==vt);return Tt}function wg(vt,_t,wt,Tt,At,Ot){var Nt=vt;do{for(var jt=Nt.next.next;jt!==Nt.prev;){if(Nt.i!==jt.i&&Eg(Nt,jt)){var Gt=$h(Nt,jt);return Nt=Ph(Nt,Nt.next),Gt=Ph(Gt,Gt.next),El(Nt,_t,wt,Tt,At,Ot),void El(Gt,_t,wt,Tt,At,Ot)}jt=jt.next}Nt=Nt.next}while(Nt!==vt)}function rf(vt,_t){return vt.x-_t.x}function Ku(vt,_t){if(_t=function(Tt,At){var Ot,Nt=At,jt=Tt.x,Gt=Tt.y,qt=-1/0;do{if(Gt<=Nt.y&&Gt>=Nt.next.y&&Nt.next.y!==Nt.y){var en=Nt.x+(Gt-Nt.y)*(Nt.next.x-Nt.x)/(Nt.next.y-Nt.y);if(en<=jt&&en>qt){if(qt=en,en===jt){if(Gt===Nt.y)return Nt;if(Gt===Nt.next.y)return Nt.next}Ot=Nt.x<Nt.next.x?Nt:Nt.next}}Nt=Nt.next}while(Nt!==At);if(!Ot)return null;if(jt===qt)return Ot.prev;var Xt,sn=Ot,yn=Ot.x,vn=Ot.y,wn=1/0;for(Nt=Ot.next;Nt!==sn;)jt>=Nt.x&&Nt.x>=yn&&jt!==Nt.x&&qa(Gt<vn?jt:qt,Gt,yn,vn,Gt<vn?qt:jt,Gt,Nt.x,Nt.y)&&((Xt=Math.abs(Gt-Nt.y)/(jt-Nt.x))<wn||Xt===wn&&Nt.x>Ot.x)&&Qu(Nt,Tt)&&(Ot=Nt,wn=Xt),Nt=Nt.next;return Ot}(vt,_t)){var wt=$h(_t,vt);Ph(wt,wt.next)}}function dp(vt,_t,wt,Tt,At){return(vt=1431655765&((vt=858993459&((vt=252645135&((vt=16711935&((vt=32767*(vt-wt)*At)|vt<<8))|vt<<4))|vt<<2))|vt<<1))|(_t=1431655765&((_t=858993459&((_t=252645135&((_t=16711935&((_t=32767*(_t-Tt)*At)|_t<<8))|_t<<4))|_t<<2))|_t<<1))<<1}function md(vt){var _t=vt,wt=vt;do _t.x<wt.x&&(wt=_t),_t=_t.next;while(_t!==vt);return wt}function qa(vt,_t,wt,Tt,At,Ot,Nt,jt){return(At-Nt)*(_t-jt)-(vt-Nt)*(Ot-jt)>=0&&(vt-Nt)*(Tt-jt)-(wt-Nt)*(_t-jt)>=0&&(wt-Nt)*(Ot-jt)-(At-Nt)*(Tt-jt)>=0}function Eg(vt,_t){return vt.next.i!==_t.i&&vt.prev.i!==_t.i&&!function(wt,Tt){var At=wt;do{if(At.i!==wt.i&&At.next.i!==wt.i&&At.i!==Tt.i&&At.next.i!==Tt.i&&Ju(At,At.next,wt,Tt))return!0;At=At.next}while(At!==wt);return!1}(vt,_t)&&Qu(vt,_t)&&Qu(_t,vt)&&function(wt,Tt){var At=wt,Ot=!1,Nt=(wt.x+Tt.x)/2,jt=(wt.y+Tt.y)/2;do At.y>jt!=At.next.y>jt&&At.next.y!==At.y&&Nt<(At.next.x-At.x)*(jt-At.y)/(At.next.y-At.y)+At.x&&(Ot=!Ot),At=At.next;while(At!==wt);return Ot}(vt,_t)}function Ea(vt,_t,wt){return(_t.y-vt.y)*(wt.x-_t.x)-(_t.x-vt.x)*(wt.y-_t.y)}function Mc(vt,_t){return vt.x===_t.x&&vt.y===_t.y}function Ju(vt,_t,wt,Tt){return!!(Mc(vt,_t)&&Mc(wt,Tt)||Mc(vt,Tt)&&Mc(wt,_t))||Ea(vt,_t,wt)>0!=Ea(vt,_t,Tt)>0&&Ea(wt,Tt,vt)>0!=Ea(wt,Tt,_t)>0}function Qu(vt,_t){return Ea(vt.prev,vt,vt.next)<0?Ea(vt,_t,vt.next)>=0&&Ea(vt,vt.prev,_t)>=0:Ea(vt,_t,vt.prev)<0||Ea(vt,vt.next,_t)<0}function $h(vt,_t){var wt=new fp(vt.i,vt.x,vt.y),Tt=new fp(_t.i,_t.x,_t.y),At=vt.next,Ot=_t.prev;return vt.next=_t,_t.prev=vt,wt.next=At,At.prev=wt,Tt.next=wt,wt.prev=Tt,Ot.next=Tt,Tt.prev=Ot,Tt}function of(vt,_t,wt,Tt){var At=new fp(vt,_t,wt);return Tt?(At.next=Tt.next,At.prev=Tt,Tt.next.prev=At,Tt.next=At):(At.prev=At,At.next=At),At}function Fa(vt){vt.next.prev=vt.prev,vt.prev.next=vt.next,vt.prevZ&&(vt.prevZ.nextZ=vt.nextZ),vt.nextZ&&(vt.nextZ.prevZ=vt.prevZ)}function fp(vt,_t,wt){this.i=vt,this.x=_t,this.y=wt,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ps(vt,_t,wt,Tt){for(var At=0,Ot=_t,Nt=wt-Tt;Ot<wt;Ot+=Tt)At+=(vt[Nt]-vt[Ot])*(vt[Ot+1]+vt[Nt+1]),Nt=Ot;return At}function Nl(vt){var _t=function(jt){for(var Gt=jt[0][0].length,qt={vertices:[],holes:[],dimensions:Gt},en=0,Xt=0;Xt<jt.length;Xt++){for(var sn=0;sn<jt[Xt].length;sn++)for(var yn=0;yn<Gt;yn++)qt.vertices.push(jt[Xt][sn][yn]);Xt>0&&(en+=jt[Xt-1].length,qt.holes.push(en))}return qt}(vt),wt=tf(_t.vertices,_t.holes,2),Tt=[],At=[];wt.forEach(function(jt,Gt){var qt=wt[Gt];At.push([_t.vertices[2*qt],_t.vertices[2*qt+1]])});for(var Ot=0;Ot<At.length;Ot+=3){var Nt=At.slice(Ot,Ot+3);Nt.push(At[Ot]),Tt.push(Pt([Nt]))}return Tt}function Rh(vt,_t){if(!vt)throw new Error("targetPoint is required");if(!_t)throw new Error("points is required");var wt,Tt=1/0,At=0;return nr(_t,function(Ot,Nt){var jt=oo(vt,Ot);jt<Tt&&(At=Nt,Tt=jt)}),(wt=Po(_t.features[At])).properties.featureIndex=At,wt.properties.distanceToPoint=Tt,wt}function La(vt){if(!vt)throw new Error("geojson is required");var _t=[];return Sr(vt,function(wt){(function(Tt,At){var Ot=[],Nt=Tt.geometry;if(Nt!==null){switch(Nt.type){case"Polygon":Ot=On(Nt);break;case"LineString":Ot=[On(Nt)]}Ot.forEach(function(jt){(function(Gt,qt){var en=[];return Gt.reduce(function(Xt,sn){var yn=Dt([Xt,sn],qt);return yn.bbox=function(vn,wn){var un=vn[0],Fn=vn[1],Qn=wn[0],_n=wn[1];return[un<Qn?un:Qn,Fn<_n?Fn:_n,un>Qn?un:Qn,Fn>_n?Fn:_n]}(Xt,sn),en.push(yn),sn}),en})(jt,Tt.properties).forEach(function(Gt){Gt.id=At.length,At.push(Gt)})})}})(wt,_t)}),Ft(_t)}gd.deviation=function(vt,_t,wt,Tt){var At=_t&&_t.length,Ot=At?_t[0]*wt:vt.length,Nt=Math.abs(Ps(vt,0,Ot,wt));if(At)for(var jt=0,Gt=_t.length;jt<Gt;jt++){var qt=_t[jt]*wt,en=jt<Gt-1?_t[jt+1]*wt:vt.length;Nt-=Math.abs(Ps(vt,qt,en,wt))}var Xt=0;for(jt=0;jt<Tt.length;jt+=3){var sn=Tt[jt]*wt,yn=Tt[jt+1]*wt,vn=Tt[jt+2]*wt;Xt+=Math.abs((vt[sn]-vt[vn])*(vt[yn+1]-vt[sn+1])-(vt[sn]-vt[yn])*(vt[vn+1]-vt[sn+1]))}return Nt===0&&Xt===0?0:Math.abs((Xt-Nt)/Nt)},gd.flatten=function(vt){for(var _t=vt[0][0].length,wt={vertices:[],holes:[],dimensions:_t},Tt=0,At=0;At<vt.length;At++){for(var Ot=0;Ot<vt[At].length;Ot++)for(var Nt=0;Nt<_t;Nt++)wt.vertices.push(vt[At][Ot][Nt]);At>0&&(Tt+=vt[At-1].length,wt.holes.push(Tt))}return wt},tf.default=Rm;var Sa=xs(function(vt,_t){function wt(vn,wn,un){un===void 0&&(un={});var Fn={type:"Feature"};return(un.id===0||un.id)&&(Fn.id=un.id),un.bbox&&(Fn.bbox=un.bbox),Fn.properties=wn||{},Fn.geometry=vn,Fn}function Tt(vn,wn,un){if(un===void 0&&(un={}),!vn)throw new Error("coordinates is required");if(!Array.isArray(vn))throw new Error("coordinates must be an Array");if(vn.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!yn(vn[0])||!yn(vn[1]))throw new Error("coordinates must contain numbers");return wt({type:"Point",coordinates:vn},wn,un)}function At(vn,wn,un){un===void 0&&(un={});for(var Fn=0,Qn=vn;Fn<Qn.length;Fn++){var _n=Qn[Fn];if(_n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Bn=0;Bn<_n[_n.length-1].length;Bn++)if(_n[_n.length-1][Bn]!==_n[0][Bn])throw new Error("First and last Position are not equivalent.")}return wt({type:"Polygon",coordinates:vn},wn,un)}function Ot(vn,wn,un){if(un===void 0&&(un={}),vn.length<2)throw new Error("coordinates must be an array of two or more positions");return wt({type:"LineString",coordinates:vn},wn,un)}function Nt(vn,wn){wn===void 0&&(wn={});var un={type:"FeatureCollection"};return wn.id&&(un.id=wn.id),wn.bbox&&(un.bbox=wn.bbox),un.features=vn,un}function jt(vn,wn,un){return un===void 0&&(un={}),wt({type:"MultiLineString",coordinates:vn},wn,un)}function Gt(vn,wn,un){return un===void 0&&(un={}),wt({type:"MultiPoint",coordinates:vn},wn,un)}function qt(vn,wn,un){return un===void 0&&(un={}),wt({type:"MultiPolygon",coordinates:vn},wn,un)}function en(vn,wn){wn===void 0&&(wn="kilometers");var un=_t.factors[wn];if(!un)throw new Error(wn+" units is invalid");return vn*un}function Xt(vn,wn){wn===void 0&&(wn="kilometers");var un=_t.factors[wn];if(!un)throw new Error(wn+" units is invalid");return vn/un}function sn(vn){return 180*(vn%(2*Math.PI))/Math.PI}function yn(vn){return!isNaN(vn)&&vn!==null&&!Array.isArray(vn)}Object.defineProperty(_t,"__esModule",{value:!0}),_t.earthRadius=63710088e-1,_t.factors={centimeters:100*_t.earthRadius,centimetres:100*_t.earthRadius,degrees:_t.earthRadius/111325,feet:3.28084*_t.earthRadius,inches:39.37*_t.earthRadius,kilometers:_t.earthRadius/1e3,kilometres:_t.earthRadius/1e3,meters:_t.earthRadius,metres:_t.earthRadius,miles:_t.earthRadius/1609.344,millimeters:1e3*_t.earthRadius,millimetres:1e3*_t.earthRadius,nauticalmiles:_t.earthRadius/1852,radians:1,yards:1.0936*_t.earthRadius},_t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/_t.earthRadius,yards:1.0936133},_t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},_t.feature=wt,_t.geometry=function(vn,wn,un){switch(vn){case"Point":return Tt(wn).geometry;case"LineString":return Ot(wn).geometry;case"Polygon":return At(wn).geometry;case"MultiPoint":return Gt(wn).geometry;case"MultiLineString":return jt(wn).geometry;case"MultiPolygon":return qt(wn).geometry;default:throw new Error(vn+" is invalid")}},_t.point=Tt,_t.points=function(vn,wn,un){return un===void 0&&(un={}),Nt(vn.map(function(Fn){return Tt(Fn,wn)}),un)},_t.polygon=At,_t.polygons=function(vn,wn,un){return un===void 0&&(un={}),Nt(vn.map(function(Fn){return At(Fn,wn)}),un)},_t.lineString=Ot,_t.lineStrings=function(vn,wn,un){return un===void 0&&(un={}),Nt(vn.map(function(Fn){return Ot(Fn,wn)}),un)},_t.featureCollection=Nt,_t.multiLineString=jt,_t.multiPoint=Gt,_t.multiPolygon=qt,_t.geometryCollection=function(vn,wn,un){return un===void 0&&(un={}),wt({type:"GeometryCollection",geometries:vn},wn,un)},_t.round=function(vn,wn){if(wn===void 0&&(wn=0),wn&&!(wn>=0))throw new Error("precision must be a positive number");var un=Math.pow(10,wn||0);return Math.round(vn*un)/un},_t.radiansToLength=en,_t.lengthToRadians=Xt,_t.lengthToDegrees=function(vn,wn){return sn(Xt(vn,wn))},_t.bearingToAzimuth=function(vn){var wn=vn%360;return wn<0&&(wn+=360),wn},_t.radiansToDegrees=sn,_t.degreesToRadians=function(vn){return vn%360*Math.PI/180},_t.convertLength=function(vn,wn,un){if(wn===void 0&&(wn="kilometers"),un===void 0&&(un="kilometers"),!(vn>=0))throw new Error("length must be a positive number");return en(Xt(vn,wn),un)},_t.convertArea=function(vn,wn,un){if(wn===void 0&&(wn="meters"),un===void 0&&(un="kilometers"),!(vn>=0))throw new Error("area must be a positive number");var Fn=_t.areaFactors[wn];if(!Fn)throw new Error("invalid original units");var Qn=_t.areaFactors[un];if(!Qn)throw new Error("invalid final units");return vn/Fn*Qn},_t.isNumber=yn,_t.isObject=function(vn){return!!vn&&vn.constructor===Object},_t.validateBBox=function(vn){if(!vn)throw new Error("bbox is required");if(!Array.isArray(vn))throw new Error("bbox must be an Array");if(vn.length!==4&&vn.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");vn.forEach(function(wn){if(!yn(wn))throw new Error("bbox must only contain numbers")})},_t.validateId=function(vn){if(!vn)throw new Error("id is required");if(["string","number"].indexOf(typeof vn)===-1)throw new Error("id must be a number or a string")}});function fc(vt,_t,wt){if(vt!==null)for(var Tt,At,Ot,Nt,jt,Gt,qt,en,Xt=0,sn=0,yn=vt.type,vn=yn==="FeatureCollection",wn=yn==="Feature",un=vn?vt.features.length:1,Fn=0;Fn<un;Fn++){jt=(en=!!(qt=vn?vt.features[Fn].geometry:wn?vt.geometry:vt)&&qt.type==="GeometryCollection")?qt.geometries.length:1;for(var Qn=0;Qn<jt;Qn++){var _n=0,Bn=0;if((Nt=en?qt.geometries[Qn]:qt)!==null){Gt=Nt.coordinates;var Hn=Nt.type;switch(Xt=!wt||Hn!=="Polygon"&&Hn!=="MultiPolygon"?0:1,Hn){case null:break;case"Point":if(_t(Gt,sn,Fn,_n,Bn)===!1)return!1;sn++,_n++;break;case"LineString":case"MultiPoint":for(Tt=0;Tt<Gt.length;Tt++){if(_t(Gt[Tt],sn,Fn,_n,Bn)===!1)return!1;sn++,Hn==="MultiPoint"&&_n++}Hn==="LineString"&&_n++;break;case"Polygon":case"MultiLineString":for(Tt=0;Tt<Gt.length;Tt++){for(At=0;At<Gt[Tt].length-Xt;At++){if(_t(Gt[Tt][At],sn,Fn,_n,Bn)===!1)return!1;sn++}Hn==="MultiLineString"&&_n++,Hn==="Polygon"&&Bn++}Hn==="Polygon"&&_n++;break;case"MultiPolygon":for(Tt=0;Tt<Gt.length;Tt++){for(Bn=0,At=0;At<Gt[Tt].length;At++){for(Ot=0;Ot<Gt[Tt][At].length-Xt;Ot++){if(_t(Gt[Tt][At][Ot],sn,Fn,_n,Bn)===!1)return!1;sn++}Bn++}_n++}break;case"GeometryCollection":for(Tt=0;Tt<Nt.geometries.length;Tt++)if(fc(Nt.geometries[Tt],_t,wt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Sg(vt,_t){var wt;switch(vt.type){case"FeatureCollection":for(wt=0;wt<vt.features.length&&_t(vt.features[wt].properties,wt)!==!1;wt++);break;case"Feature":_t(vt.properties,0)}}function Mh(vt,_t){if(vt.type==="Feature")_t(vt,0);else if(vt.type==="FeatureCollection")for(var wt=0;wt<vt.features.length&&_t(vt.features[wt],wt)!==!1;wt++);}function sf(vt,_t){var wt,Tt,At,Ot,Nt,jt,Gt,qt,en,Xt,sn=0,yn=vt.type==="FeatureCollection",vn=vt.type==="Feature",wn=yn?vt.features.length:1;for(wt=0;wt<wn;wt++){for(jt=yn?vt.features[wt].geometry:vn?vt.geometry:vt,qt=yn?vt.features[wt].properties:vn?vt.properties:{},en=yn?vt.features[wt].bbox:vn?vt.bbox:void 0,Xt=yn?vt.features[wt].id:vn?vt.id:void 0,Nt=(Gt=!!jt&&jt.type==="GeometryCollection")?jt.geometries.length:1,At=0;At<Nt;At++)if((Ot=Gt?jt.geometries[At]:jt)!==null)switch(Ot.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_t(Ot,sn,qt,en,Xt)===!1)return!1;break;case"GeometryCollection":for(Tt=0;Tt<Ot.geometries.length;Tt++)if(_t(Ot.geometries[Tt],sn,qt,en,Xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_t(null,sn,qt,en,Xt)===!1)return!1;sn++}}function eh(vt,_t){sf(vt,function(wt,Tt,At,Ot,Nt){var jt,Gt=wt===null?null:wt.type;switch(Gt){case null:case"Point":case"LineString":case"Polygon":return _t(Sa.feature(wt,At,{bbox:Ot,id:Nt}),Tt,0)!==!1&&void 0}switch(Gt){case"MultiPoint":jt="Point";break;case"MultiLineString":jt="LineString";break;case"MultiPolygon":jt="Polygon"}for(var qt=0;qt<wt.coordinates.length;qt++){var en={type:jt,coordinates:wt.coordinates[qt]};if(_t(Sa.feature(en,At),Tt,qt)===!1)return!1}})}function pp(vt,_t){eh(vt,function(wt,Tt,At){var Ot=0;if(wt.geometry){var Nt=wt.geometry.type;if(Nt!=="Point"&&Nt!=="MultiPoint"){var jt,Gt=0,qt=0,en=0;return fc(wt,function(Xt,sn,yn,vn,wn){if(jt===void 0||Tt>Gt||vn>qt||wn>en)return jt=Xt,Gt=Tt,qt=vn,en=wn,void(Ot=0);var un=Sa.lineString([jt,Xt],wt.properties);if(_t(un,Tt,At,wn,Ot)===!1)return!1;Ot++,jt=Xt})!==!1&&void 0}}})}function ru(vt,_t){if(!vt)throw new Error("geojson is required");eh(vt,function(wt,Tt,At){if(wt.geometry!==null){var Ot=wt.geometry.type,Nt=wt.geometry.coordinates;switch(Ot){case"LineString":if(_t(wt,Tt,At,0,0)===!1)return!1;break;case"Polygon":for(var jt=0;jt<Nt.length;jt++)if(_t(Sa.lineString(Nt[jt],wt.properties),Tt,At,jt)===!1)return!1}}})}var af=function(vt){var _t=[];return fc(vt,function(wt){_t.push(wt)}),_t},Mm=fc,lf=function(vt,_t,wt,Tt){var At=wt;return fc(vt,function(Ot,Nt,jt,Gt,qt){At=Nt===0&&wt===void 0?Ot:_t(At,Ot,Nt,jt,Gt,qt)},Tt),At},Nm=Mh,iu=function(vt,_t,wt){var Tt=wt;return Mh(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot)}),Tt},gp=function(vt,_t){if(_t=_t||{},!Sa.isObject(_t))throw new Error("options is invalid");var wt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Nt=_t.coordIndex||0,jt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":return Sa.point(Gt,jt,_t);case"MultiPoint":return At<0&&(At=Gt.length+At),Sa.point(Gt[At],jt,_t);case"LineString":return Nt<0&&(Nt=Gt.length+Nt),Sa.point(Gt[Nt],jt,_t);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Nt<0&&(Nt=Gt[Ot].length+Nt),Sa.point(Gt[Ot][Nt],jt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt),Sa.point(Gt[At][Nt],jt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Nt<0&&(Nt=Gt[At][Ot].length-Nt),Sa.point(Gt[At][Ot][Nt],jt,_t)}throw new Error("geojson is invalid")},Nh=function(vt,_t){if(_t=_t||{},!Sa.isObject(_t))throw new Error("options is invalid");var wt,Tt=_t.featureIndex||0,At=_t.multiFeatureIndex||0,Ot=_t.geometryIndex||0,Nt=_t.segmentIndex||0,jt=_t.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":case"MultiPoint":return null;case"LineString":return Nt<0&&(Nt=Gt.length+Nt-1),Sa.lineString([Gt[Nt],Gt[Nt+1]],jt,_t);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Nt<0&&(Nt=Gt[Ot].length+Nt-1),Sa.lineString([Gt[Ot][Nt],Gt[Ot][Nt+1]],jt,_t);case"MultiLineString":return At<0&&(At=Gt.length+At),Nt<0&&(Nt=Gt[At].length+Nt-1),Sa.lineString([Gt[At][Nt],Gt[At][Nt+1]],jt,_t);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Nt<0&&(Nt=Gt[At][Ot].length-Nt-1),Sa.lineString([Gt[At][Ot][Nt],Gt[At][Ot][Nt+1]],jt,_t)}throw new Error("geojson is invalid")},Dm=eh,js=function(vt,_t,wt){var Tt=wt;return eh(vt,function(At,Ot,Nt){Tt=Ot===0&&Nt===0&&wt===void 0?At:_t(Tt,At,Ot,Nt)}),Tt},cf=sf,yd=function(vt,_t,wt){var Tt=wt;return sf(vt,function(At,Ot,Nt,jt,Gt){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot,Nt,jt,Gt)}),Tt},Sl=ru,Cl=function(vt,_t,wt){var Tt=wt;return ru(vt,function(At,Ot,Nt,jt){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot,Nt,jt)}),Tt},Nc=Sg,th=function(vt,_t,wt){var Tt=wt;return Sg(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:_t(Tt,At,Ot)}),Tt},nh=pp,vd=function(vt,_t,wt){var Tt=wt,At=!1;return pp(vt,function(Ot,Nt,jt,Gt,qt){Tt=At===!1&&wt===void 0?Ot:_t(Tt,Ot,Nt,jt,Gt,qt),At=!0}),Tt},_d=Object.defineProperty({coordAll:af,coordEach:Mm,coordReduce:lf,featureEach:Nm,featureReduce:iu,findPoint:gp,findSegment:Nh,flattenEach:Dm,flattenReduce:js,geomEach:cf,geomReduce:yd,lineEach:Sl,lineReduce:Cl,propEach:Nc,propReduce:th,segmentEach:nh,segmentReduce:vd},"__esModule",{value:!0});function uf(vt){var _t=[1/0,1/0,-1/0,-1/0];return _d.coordEach(vt,function(wt){_t[0]>wt[0]&&(_t[0]=wt[0]),_t[1]>wt[1]&&(_t[1]=wt[1]),_t[2]<wt[0]&&(_t[2]=wt[0]),_t[3]<wt[1]&&(_t[3]=wt[1])}),_t}uf.default=uf;var Bm=uf,ou=Object.defineProperty({default:Bm},"__esModule",{value:!0}).default,Fm=_d.featureEach,mp=(_d.coordEach,Sa.polygon,Sa.featureCollection);function hf(vt){var _t=kr(vt);return _t.insert=function(wt){if(wt.type!=="Feature")throw new Error("invalid feature");return wt.bbox=wt.bbox?wt.bbox:ou(wt),kr.prototype.insert.call(this,wt)},_t.load=function(wt){var Tt=[];return Array.isArray(wt)?wt.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:ou(At),Tt.push(At)}):Fm(wt,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:ou(At),Tt.push(At)}),kr.prototype.load.call(this,Tt)},_t.remove=function(wt,Tt){if(wt.type!=="Feature")throw new Error("invalid feature");return wt.bbox=wt.bbox?wt.bbox:ou(wt),kr.prototype.remove.call(this,wt,Tt)},_t.clear=function(){return kr.prototype.clear.call(this)},_t.search=function(wt){var Tt=kr.prototype.search.call(this,this.toBBox(wt));return mp(Tt)},_t.collides=function(wt){return kr.prototype.collides.call(this,this.toBBox(wt))},_t.all=function(){var wt=kr.prototype.all.call(this);return mp(wt)},_t.toJSON=function(){return kr.prototype.toJSON.call(this)},_t.fromJSON=function(wt){return kr.prototype.fromJSON.call(this,wt)},_t.toBBox=function(wt){var Tt;if(wt.bbox)Tt=wt.bbox;else if(Array.isArray(wt)&&wt.length===4)Tt=wt;else if(Array.isArray(wt)&&wt.length===6)Tt=[wt[0],wt[1],wt[3],wt[4]];else if(wt.type==="Feature")Tt=ou(wt);else{if(wt.type!=="FeatureCollection")throw new Error("invalid geojson");Tt=ou(wt)}return{minX:Tt[0],minY:Tt[1],maxX:Tt[2],maxY:Tt[3]}},_t}var Xs=hf,Cg=hf;function Vs(vt,_t){var wt={},Tt=[];if(vt.type==="LineString"&&(vt=xt(vt)),_t.type==="LineString"&&(_t=xt(_t)),vt.type==="Feature"&&_t.type==="Feature"&&vt.geometry!==null&&_t.geometry!==null&&vt.geometry.type==="LineString"&&_t.geometry.type==="LineString"&&vt.geometry.coordinates.length===2&&_t.geometry.coordinates.length===2){var At=Dh(vt,_t);return At&&Tt.push(At),Ft(Tt)}var Ot=Xs();return Ot.load(La(_t)),nr(La(vt),function(Nt){nr(Ot.search(Nt),function(jt){var Gt=Dh(Nt,jt);if(Gt){var qt=On(Gt).join(",");wt[qt]||(wt[qt]=!0,Tt.push(Gt))}})}),Ft(Tt)}function Dh(vt,_t){var wt=On(vt),Tt=On(_t);if(wt.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(Tt.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var At=wt[0][0],Ot=wt[0][1],Nt=wt[1][0],jt=wt[1][1],Gt=Tt[0][0],qt=Tt[0][1],en=Tt[1][0],Xt=Tt[1][1],sn=(Xt-qt)*(Nt-At)-(en-Gt)*(jt-Ot),yn=(en-Gt)*(Ot-qt)-(Xt-qt)*(At-Gt),vn=(Nt-At)*(Ot-qt)-(jt-Ot)*(At-Gt);if(sn===0)return null;var wn=yn/sn,un=vn/sn;return wn>=0&&wn<=1&&un>=0&&un<=1?kt([At+wn*(Nt-At),Ot+wn*(jt-Ot)]):null}function Dc(vt,_t,wt){wt===void 0&&(wt={});var Tt=kt([1/0,1/0],{dist:1/0}),At=0;return Sr(vt,function(Ot){for(var Nt=On(Ot),jt=0;jt<Nt.length-1;jt++){var Gt=kt(Nt[jt]);Gt.properties.dist=oo(_t,Gt,wt);var qt=kt(Nt[jt+1]);qt.properties.dist=oo(_t,qt,wt);var en=oo(Gt,qt,wt),Xt=Math.max(Gt.properties.dist,qt.properties.dist),sn=Rc(Gt,qt),yn=Aa(_t,Xt,sn+90,wt),vn=Aa(_t,Xt,sn-90,wt),wn=Vs(Dt([yn.geometry.coordinates,vn.geometry.coordinates]),Dt([Gt.geometry.coordinates,qt.geometry.coordinates])),un=null;wn.features.length>0&&((un=wn.features[0]).properties.dist=oo(_t,un,wt),un.properties.location=At+oo(Gt,un,wt)),Gt.properties.dist<Tt.properties.dist&&((Tt=Gt).properties.index=jt,Tt.properties.location=At),qt.properties.dist<Tt.properties.dist&&((Tt=qt).properties.index=jt+1,Tt.properties.location=At+en),un&&un.properties.dist<Tt.properties.dist&&((Tt=un).properties.index=jt),At+=en}}),Tt}function Tu(vt,_t,wt){wt===void 0&&(wt={});var Tt=fn(vt),At=fn(_t);return At[0]+=At[0]-Tt[0]>180?-360:Tt[0]-At[0]>180?360:0,kn(function(Ot,Nt,jt){var Gt=jt=jt===void 0?rt:Number(jt),qt=Ot[1]*Math.PI/180,en=Nt[1]*Math.PI/180,Xt=en-qt,sn=Math.abs(Nt[0]-Ot[0])*Math.PI/180;sn>Math.PI&&(sn-=2*Math.PI);var yn=Math.log(Math.tan(en/2+Math.PI/4)/Math.tan(qt/2+Math.PI/4)),vn=Math.abs(yn)>1e-11?Xt/yn:Math.cos(qt);return Math.sqrt(Xt*Xt+vn*vn*sn*sn)*Gt}(Tt,At),"meters",wt.units)}function Tg(vt,_t,wt){if(wt===void 0&&(wt={}),wt.method||(wt.method="geodesic"),wt.units||(wt.units="kilometers"),!vt)throw new Error("pt is required");if(Array.isArray(vt)?vt=kt(vt):vt.type==="Point"?vt=xt(vt):Nn(vt,"Point","point"),!_t)throw new Error("line is required");Array.isArray(_t)?_t=Dt(_t):_t.type==="LineString"?_t=xt(_t):Nn(_t,"LineString","line");var Tt=1/0,At=vt.geometry.coordinates;return Fr(_t,function(Ot){var Nt=Ot.geometry.coordinates[0],jt=Ot.geometry.coordinates[1],Gt=function(qt,en,Xt,sn){var yn=[Xt[0]-en[0],Xt[1]-en[1]],vn=yp([qt[0]-en[0],qt[1]-en[1]],yn);if(vn<=0)return df(qt,en,{method:sn.method,units:"degrees"});var wn=yp(yn,yn);if(wn<=vn)return df(qt,Xt,{method:sn.method,units:"degrees"});var un=vn/wn,Fn=[en[0]+un*yn[0],en[1]+un*yn[1]];return df(qt,Fn,{method:sn.method,units:"degrees"})}(At,Nt,jt,wt);Gt<Tt&&(Tt=Gt)}),kn(Tt,"degrees",wt.units)}function yp(vt,_t){return vt[0]*_t[0]+vt[1]*_t[1]}function df(vt,_t,wt){return wt.method==="planar"?Tu(vt,_t,wt):oo(vt,_t,wt)}function bd(vt,_t,wt,Tt,At,Ot,Nt,jt){var Gt,qt,en,Xt,sn={x:null,y:null,onLine1:!1,onLine2:!1};return(Gt=(jt-Ot)*(wt-vt)-(Nt-At)*(Tt-_t))===0?sn.x!==null&&sn.y!==null&&sn:(Xt=(wt-vt)*(qt=_t-Ot)-(Tt-_t)*(en=vt-At),qt=((Nt-At)*qt-(jt-Ot)*en)/Gt,en=Xt/Gt,sn.x=vt+qt*(wt-vt),sn.y=_t+qt*(Tt-_t),qt>=0&&qt<=1&&(sn.onLine1=!0),en>=0&&en<=1&&(sn.onLine2=!0),!(!sn.onLine1||!sn.onLine2)&&[sn.x,sn.y])}function kg(vt){for(var _t=function(sn){return sn.type!=="FeatureCollection"?sn.type!=="Feature"?Ft([xt(sn)]):Ft([sn]):sn}(vt),wt=hc(_t),Tt=!1,At=0;!Tt&&At<_t.features.length;){var Ot,Nt=_t.features[At].geometry,jt=!1;if(Nt.type==="Point")wt.geometry.coordinates[0]===Nt.coordinates[0]&&wt.geometry.coordinates[1]===Nt.coordinates[1]&&(Tt=!0);else if(Nt.type==="MultiPoint"){var Gt=!1;for(Ot=0;!Gt&&Ot<Nt.coordinates.length;)wt.geometry.coordinates[0]===Nt.coordinates[Ot][0]&&wt.geometry.coordinates[1]===Nt.coordinates[Ot][1]&&(Tt=!0,Gt=!0),Ot++}else if(Nt.type==="LineString")for(Ot=0;!jt&&Ot<Nt.coordinates.length-1;)ku(wt.geometry.coordinates[0],wt.geometry.coordinates[1],Nt.coordinates[Ot][0],Nt.coordinates[Ot][1],Nt.coordinates[Ot+1][0],Nt.coordinates[Ot+1][1])&&(jt=!0,Tt=!0),Ot++;else if(Nt.type==="MultiLineString")for(var qt=0;qt<Nt.coordinates.length;){jt=!1,Ot=0;for(var en=Nt.coordinates[qt];!jt&&Ot<en.length-1;)ku(wt.geometry.coordinates[0],wt.geometry.coordinates[1],en[Ot][0],en[Ot][1],en[Ot+1][0],en[Ot+1][1])&&(jt=!0,Tt=!0),Ot++;qt++}else Nt.type!=="Polygon"&&Nt.type!=="MultiPolygon"||ro(wt,Nt)&&(Tt=!0);At++}if(Tt)return wt;var Xt=Ft([]);for(At=0;At<_t.features.length;At++)Xt.features=Xt.features.concat(pd(_t.features[At]).features);return kt(Rh(wt,Xt).geometry.coordinates)}function ku(vt,_t,wt,Tt,At,Ot){return Math.sqrt((At-wt)*(At-wt)+(Ot-Tt)*(Ot-Tt))===Math.sqrt((vt-wt)*(vt-wt)+(_t-Tt)*(_t-Tt))+Math.sqrt((At-vt)*(At-vt)+(Ot-_t)*(Ot-_t))}Xs.default=Cg;var xd=6378137;function Bh(vt){return Cr(vt,function(_t,wt){return _t+function(Tt){var At,Ot=0;switch(Tt.type){case"Polygon":return vp(Tt.coordinates);case"MultiPolygon":for(At=0;At<Tt.coordinates.length;At++)Ot+=vp(Tt.coordinates[At]);return Ot;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(wt)},0)}function vp(vt){var _t=0;if(vt&&vt.length>0){_t+=Math.abs(pc(vt[0]));for(var wt=1;wt<vt.length;wt++)_t-=Math.abs(pc(vt[wt]))}return _t}function pc(vt){var _t,wt,Tt,At,Ot,Nt,jt=0,Gt=vt.length;if(Gt>2){for(Nt=0;Nt<Gt;Nt++)Nt===Gt-2?(Tt=Gt-2,At=Gt-1,Ot=0):Nt===Gt-1?(Tt=Gt-1,At=0,Ot=1):(Tt=Nt,At=Nt+1,Ot=Nt+2),_t=vt[Tt],wt=vt[At],jt+=(ff(vt[Ot][0])-ff(_t[0]))*Math.sin(ff(wt[1]));jt=jt*xd*xd/2}return jt}function ff(vt){return vt*Math.PI/180}function pf(vt,_t){return _t===void 0&&(_t={}),mr(vt,function(wt,Tt){var At=Tt.geometry.coordinates;return wt+oo(At[0],At[1],_t)},0)}function Au(vt,_t,wt,Tt){if(!cn(Tt=Tt||{}))throw new Error("options is invalid");var At,Ot=[];if(vt.type==="Feature")At=vt.geometry.coordinates;else{if(vt.type!=="LineString")throw new Error("input must be a LineString Feature or Geometry");At=vt.coordinates}for(var Nt,jt,Gt,qt=At.length,en=0,Xt=0;Xt<At.length&&!(_t>=en&&Xt===At.length-1);Xt++){if(en>_t&&Ot.length===0){if(!(Nt=_t-en))return Ot.push(At[Xt]),Dt(Ot);jt=Rc(At[Xt],At[Xt-1])-180,Gt=Aa(At[Xt],Nt,jt,Tt),Ot.push(Gt.geometry.coordinates)}if(en>=wt)return(Nt=wt-en)?(jt=Rc(At[Xt],At[Xt-1])-180,Gt=Aa(At[Xt],Nt,jt,Tt),Ot.push(Gt.geometry.coordinates),Dt(Ot)):(Ot.push(At[Xt]),Dt(Ot));if(en>=_t&&Ot.push(At[Xt]),Xt===At.length-1)return Dt(Ot);en+=oo(At[Xt],At[Xt+1],Tt)}if(en<_t&&At.length===qt)throw new Error("Start position is beyond line");var sn=At[At.length-1];return Dt([sn,sn])}function Tl(vt,_t,wt){wt===void 0&&(wt={});for(var Tt=fn(vt),At=On(_t),Ot=0;Ot<At.length-1;Ot++){var Nt=!1;if(wt.ignoreEndVertices&&(Ot===0&&(Nt="start"),Ot===At.length-2&&(Nt="end"),Ot===0&&Ot+1===At.length-1&&(Nt="both")),gf(At[Ot],At[Ot+1],Tt,Nt,wt.epsilon===void 0?null:wt.epsilon))return!0}return!1}function gf(vt,_t,wt,Tt,At){var Ot=wt[0],Nt=wt[1],jt=vt[0],Gt=vt[1],qt=_t[0],en=_t[1],Xt=qt-jt,sn=en-Gt,yn=(wt[0]-jt)*sn-(wt[1]-Gt)*Xt;if(At!==null){if(Math.abs(yn)>At)return!1}else if(yn!==0)return!1;return Tt?Tt==="start"?Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<Ot&&Ot<=qt:qt<=Ot&&Ot<jt:sn>0?Gt<Nt&&Nt<=en:en<=Nt&&Nt<Gt:Tt==="end"?Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<=Ot&&Ot<qt:qt<Ot&&Ot<=jt:sn>0?Gt<=Nt&&Nt<en:en<Nt&&Nt<=Gt:Tt==="both"&&(Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<Ot&&Ot<qt:qt<Ot&&Ot<jt:sn>0?Gt<Nt&&Nt<en:en<Nt&&Nt<Gt):Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<=Ot&&Ot<=qt:qt<=Ot&&Ot<=jt:sn>0?Gt<=Nt&&Nt<=en:en<=Nt&&Nt<=Gt}function Fh(vt,_t){var wt=Un(vt),Tt=Un(_t),At=wt.type,Ot=Tt.type;switch(At){case"Point":switch(Ot){case"MultiPoint":return function(Nt,jt){var Gt,qt=!1;for(Gt=0;Gt<jt.coordinates.length;Gt++)if(mf(jt.coordinates[Gt],Nt.coordinates)){qt=!0;break}return qt}(wt,Tt);case"LineString":return Tl(wt,Tt,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ro(wt,Tt,{ignoreBoundary:!0});default:throw new Error("feature2 "+Ot+" geometry not supported")}case"MultiPoint":switch(Ot){case"MultiPoint":return function(Nt,jt){for(var Gt=0;Gt<Nt.coordinates.length;Gt++){for(var qt=!1,en=0;en<jt.coordinates.length;en++)mf(Nt.coordinates[Gt],jt.coordinates[en])&&(qt=!0);if(!qt)return!1}return!0}(wt,Tt);case"LineString":return function(Nt,jt){for(var Gt=!1,qt=0;qt<Nt.coordinates.length;qt++){if(!Tl(Nt.coordinates[qt],jt))return!1;Gt||(Gt=Tl(Nt.coordinates[qt],jt,{ignoreEndVertices:!0}))}return Gt}(wt,Tt);case"Polygon":case"MultiPolygon":return function(Nt,jt){for(var Gt=!0,qt=!1,en=0;en<Nt.coordinates.length;en++){if(!(qt=ro(Nt.coordinates[1],jt))){Gt=!1;break}qt=ro(Nt.coordinates[1],jt,{ignoreBoundary:!0})}return Gt&&qt}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"LineString":return function(Nt,jt){for(var Gt=0;Gt<Nt.coordinates.length;Gt++)if(!Tl(Nt.coordinates[Gt],jt))return!1;return!0}(wt,Tt);case"Polygon":case"MultiPolygon":return function(Nt,jt){var Gt=dn(jt),qt=dn(Nt);if(!_p(Gt,qt))return!1;for(var en=!1,Xt=0;Xt<Nt.coordinates.length-1;Xt++){if(!ro(Nt.coordinates[Xt],jt))return!1;en||(en=ro(Nt.coordinates[Xt],jt,{ignoreBoundary:!0})),!en&&(en=ro(Ag(Nt.coordinates[Xt],Nt.coordinates[Xt+1]),jt,{ignoreBoundary:!0}))}return en}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"Polygon":case"MultiPolygon":return function(Nt,jt){var Gt=dn(Nt);if(!_p(dn(jt),Gt))return!1;for(var qt=0;qt<Nt.coordinates[0].length;qt++)if(!ro(Nt.coordinates[0][qt],jt))return!1;return!0}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}}function _p(vt,_t){return!(vt[0]>_t[0])&&!(vt[2]<_t[2])&&!(vt[1]>_t[1])&&!(vt[3]<_t[3])}function mf(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function Ag(vt,_t){return[(vt[0]+_t[0])/2,(vt[1]+_t[1])/2]}function yf(vt,_t,wt){wt===void 0&&(wt={}),wt.mask&&!wt.units&&(wt.units="kilometers");for(var Tt=[],At=vt[0],Ot=vt[1],Nt=vt[2],jt=vt[3],Gt=_t/oo([At,Ot],[Nt,Ot],wt)*(Nt-At),qt=_t/oo([At,Ot],[At,jt],wt)*(jt-Ot),en=Nt-At,Xt=jt-Ot,sn=Math.floor(en/Gt),yn=(Xt-Math.floor(Xt/qt)*qt)/2,vn=At+(en-sn*Gt)/2;vn<=Nt;){for(var wn=Ot+yn;wn<=jt;){var un=kt([vn,wn],wt.properties);wt.mask?Fh(un,wt.mask)&&Tt.push(un):Tt.push(un),wn+=qt}vn+=Gt}return Ft(Tt)}function zh(vt,_t){_t===void 0&&(_t={});var wt=_t.precision,Tt=_t.coordinates,At=_t.mutate;if(wt=wt==null||isNaN(wt)?6:wt,Tt=Tt==null||isNaN(Tt)?3:Tt,!vt)throw new Error("<geojson> is required");if(typeof wt!="number")throw new Error("<precision> must be a number");if(typeof Tt!="number")throw new Error("<coordinates> must be a number");At!==!1&&At!==void 0||(vt=JSON.parse(JSON.stringify(vt)));var Ot=Math.pow(10,wt);return hn(vt,function(Nt){(function(jt,Gt,qt){jt.length>qt&&jt.splice(qt,jt.length);for(var en=0;en<jt.length;en++)jt[en]=Math.round(jt[en]*Gt)/Gt})(Nt,Ot,Tt)}),vt}function wd(vt){if(!vt)throw new Error("geojson is required");var _t=[];return Sr(vt,function(wt){_t.push(wt)}),Ft(_t)}function Lg(vt,_t,wt){if(vt.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");wt===void 0&&(wt=1);var Tt=vt.geometry.coordinates,At=[],Ot={};if(wt){for(var Nt=[],jt=0;jt<Tt.length;jt++)for(var Gt=0;Gt<Tt[jt].length-1;Gt++)Nt.push(wn(jt,Gt));var qt=kr();qt.load(Nt)}for(var en=0;en<Tt.length;en++)for(var Xt=0;Xt<Tt[en].length-1;Xt++)if(wt)qt.search(wn(en,Xt)).forEach(function(un){var Fn=un.ring,Qn=un.edge;vn(en,Xt,Fn,Qn)});else for(var sn=0;sn<Tt.length;sn++)for(var yn=0;yn<Tt[sn].length-1;yn++)vn(en,Xt,sn,yn);return _t||(At={type:"Feature",geometry:{type:"MultiPoint",coordinates:At}}),At;function vn(un,Fn,Qn,_n){var Bn,Hn,Gn=Tt[un][Fn],Vn=Tt[un][Fn+1],Ur=Tt[Qn][_n],$r=Tt[Qn][_n+1],Yr=function(Hr,Br,Nr,Xr){if(rh(Hr,Nr)||rh(Hr,Xr)||rh(Br,Nr)||rh(Xr,Nr))return null;var jr=Hr[0],ei=Hr[1],xr=Br[0],zi=Br[1],gi=Nr[0],_o=Nr[1],Oi=Xr[0],Ji=Xr[1],Fo=(jr-xr)*(_o-Ji)-(ei-zi)*(gi-Oi);return Fo===0?null:[((jr*zi-ei*xr)*(gi-Oi)-(jr-xr)*(gi*Ji-_o*Oi))/Fo,((jr*zi-ei*xr)*(_o-Ji)-(ei-zi)*(gi*Ji-_o*Oi))/Fo]}(Gn,Vn,Ur,$r);if(Yr!==null&&(Bn=Vn[0]!==Gn[0]?(Yr[0]-Gn[0])/(Vn[0]-Gn[0]):(Yr[1]-Gn[1])/(Vn[1]-Gn[1]),Hn=$r[0]!==Ur[0]?(Yr[0]-Ur[0])/($r[0]-Ur[0]):(Yr[1]-Ur[1])/($r[1]-Ur[1]),!(Bn>=1||Bn<=0||Hn>=1||Hn<=0))){var Mr=Yr,Qr=!Ot[Mr];Qr&&(Ot[Mr]=!0),_t?At.push(_t(Yr,un,Fn,Gn,Vn,Bn,Qn,_n,Ur,$r,Hn,Qr)):At.push(Yr)}}function wn(un,Fn){var Qn,_n,Bn,Hn,Gn=Tt[un][Fn],Vn=Tt[un][Fn+1];return Gn[0]<Vn[0]?(Qn=Gn[0],_n=Vn[0]):(Qn=Vn[0],_n=Gn[0]),Gn[1]<Vn[1]?(Bn=Gn[1],Hn=Vn[1]):(Bn=Vn[1],Hn=Gn[1]),{minX:Qn,minY:Bn,maxX:_n,maxY:Hn,ring:un,edge:Fn}}}function rh(vt,_t){if(!vt||!_t||vt.length!==_t.length)return!1;for(var wt=0,Tt=vt.length;wt<Tt;wt++)if(vt[wt]instanceof Array&&_t[wt]instanceof Array){if(!rh(vt[wt],_t[wt]))return!1}else if(vt[wt]!==_t[wt])return!1;return!0}function zm(vt){if(vt.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(vt.geometry===void 0||vt.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(vt.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var _t=vt.geometry.coordinates.length,wt=[],Tt=0;Tt<_t;Tt++){var At=vt.geometry.coordinates[Tt];Vt(At[0],At[At.length-1])||At.push(At[0]),wt.push.apply(wt,At.slice(0,At.length-1))}if(!function(Oi){for(var Ji={},Fo=1,Ss=0,Ua=Oi.length;Ss<Ua;++Ss){if(Object.prototype.hasOwnProperty.call(Ji,Oi[Ss])){Fo=0;break}Ji[Oi[Ss]]=1}return Fo}(wt))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var Ot=wt.length,Nt=Lg(vt,function(Oi,Ji,Fo,Ss,Ua,ag,ad,lg,cg,np,Em,rp){return[Oi,Ji,Fo,Ss,Ua,ag,ad,lg,cg,np,Em,rp]}),jt=Nt.length;if(jt==0){var Gt=[];for(Tt=0;Tt<_t;Tt++)Gt.push(Pt([vt.geometry.coordinates[Tt]],{parent:-1,winding:$t(vt.geometry.coordinates[Tt])}));var qt=Ft(Gt);return zi(),gi(),qt}var en=[],Xt=[];for(Tt=0;Tt<_t;Tt++){en.push([]);for(var sn=0;sn<vt.geometry.coordinates[Tt].length-1;sn++)en[Tt].push([new bp(vt.geometry.coordinates[Tt][tn(sn+1,vt.geometry.coordinates[Tt].length-1)],1,[Tt,sn],[Tt,tn(sn+1,vt.geometry.coordinates[Tt].length-1)],void 0)]),Xt.push(new Hh(vt.geometry.coordinates[Tt][sn],[Tt,tn(sn-1,vt.geometry.coordinates[Tt].length-1)],[Tt,sn],void 0,void 0,!1,!0))}for(Tt=0;Tt<jt;Tt++)en[Nt[Tt][1]][Nt[Tt][2]].push(new bp(Nt[Tt][0],Nt[Tt][5],[Nt[Tt][1],Nt[Tt][2]],[Nt[Tt][6],Nt[Tt][7]],void 0)),Nt[Tt][11]&&Xt.push(new Hh(Nt[Tt][0],[Nt[Tt][1],Nt[Tt][2]],[Nt[Tt][6],Nt[Tt][7]],void 0,void 0,!0,!0));var yn=Xt.length;for(Tt=0;Tt<en.length;Tt++)for(sn=0;sn<en[Tt].length;sn++)en[Tt][sn].sort(function(Oi,Ji){return Oi.param<Ji.param?-1:1});var vn=[];for(Tt=0;Tt<yn;Tt++)vn.push({minX:Xt[Tt].coord[0],minY:Xt[Tt].coord[1],maxX:Xt[Tt].coord[0],maxY:Xt[Tt].coord[1],index:Tt});var wn=kr();for(wn.load(vn),Tt=0;Tt<en.length;Tt++)for(sn=0;sn<en[Tt].length;sn++)for(var un=0;un<en[Tt][sn].length;un++){Qn=un==en[Tt][sn].length-1?en[Tt][tn(sn+1,vt.geometry.coordinates[Tt].length-1)][0].coord:en[Tt][sn][un+1].coord;var Fn=wn.search({minX:Qn[0],minY:Qn[1],maxX:Qn[0],maxY:Qn[1]})[0];en[Tt][sn][un].nxtIsectAlongEdgeIn=Fn.index}for(Tt=0;Tt<en.length;Tt++)for(sn=0;sn<en[Tt].length;sn++)for(un=0;un<en[Tt][sn].length;un++){var Qn=en[Tt][sn][un].coord,_n=(Fn=wn.search({minX:Qn[0],minY:Qn[1],maxX:Qn[0],maxY:Qn[1]})[0]).index;_n<Ot?Xt[_n].nxtIsectAlongRingAndEdge2=en[Tt][sn][un].nxtIsectAlongEdgeIn:Vt(Xt[_n].ringAndEdge1,en[Tt][sn][un].ringAndEdgeIn)?Xt[_n].nxtIsectAlongRingAndEdge1=en[Tt][sn][un].nxtIsectAlongEdgeIn:Xt[_n].nxtIsectAlongRingAndEdge2=en[Tt][sn][un].nxtIsectAlongEdgeIn}var Bn=[];for(Tt=0,sn=0;sn<_t;sn++){var Hn=Tt;for(un=0;un<vt.geometry.coordinates[sn].length-1;un++)Xt[Tt].coord[0]<Xt[Hn].coord[0]&&(Hn=Tt),Tt++;var Gn=Xt[Hn].nxtIsectAlongRingAndEdge2;for(un=0;un<Xt.length;un++)if(Xt[un].nxtIsectAlongRingAndEdge1==Hn||Xt[un].nxtIsectAlongRingAndEdge2==Hn){var Vn=un;break}var Ur=jh([Xt[Vn].coord,Xt[Hn].coord,Xt[Gn].coord],!0)?1:-1;Bn.push({isect:Hn,parent:-1,winding:Ur})}for(Bn.sort(function(Oi,Ji){return Xt[Oi.isect].coord>Xt[Ji.isect].coord?-1:1}),Gt=[];Bn.length>0;){var $r=Bn.pop(),Yr=$r.isect,Mr=$r.parent,Qr=$r.winding,Hr=Gt.length,Br=[Xt[Yr].coord],Nr=Yr;if(Xt[Yr].ringAndEdge1Walkable)var Xr=Xt[Yr].ringAndEdge1,jr=Xt[Yr].nxtIsectAlongRingAndEdge1;else Xr=Xt[Yr].ringAndEdge2,jr=Xt[Yr].nxtIsectAlongRingAndEdge2;for(;!Vt(Xt[Yr].coord,Xt[jr].coord);){Br.push(Xt[jr].coord);var ei=void 0;for(Tt=0;Tt<Bn.length;Tt++)if(Bn[Tt].isect==jr){ei=Tt;break}if(ei!=null&&Bn.splice(ei,1),Vt(Xr,Xt[jr].ringAndEdge1)){if(Xr=Xt[jr].ringAndEdge2,Xt[jr].ringAndEdge2Walkable=!1,Xt[jr].ringAndEdge1Walkable){var xr={isect:jr};jh([Xt[Nr].coord,Xt[jr].coord,Xt[Xt[jr].nxtIsectAlongRingAndEdge2].coord],Qr==1)?(xr.parent=Mr,xr.winding=-Qr):(xr.parent=Hr,xr.winding=Qr),Bn.push(xr)}Nr=jr,jr=Xt[jr].nxtIsectAlongRingAndEdge2}else Xr=Xt[jr].ringAndEdge1,Xt[jr].ringAndEdge1Walkable=!1,Xt[jr].ringAndEdge2Walkable&&(xr={isect:jr},jh([Xt[Nr].coord,Xt[jr].coord,Xt[Xt[jr].nxtIsectAlongRingAndEdge1].coord],Qr==1)?(xr.parent=Mr,xr.winding=-Qr):(xr.parent=Hr,xr.winding=Qr),Bn.push(xr)),Nr=jr,jr=Xt[jr].nxtIsectAlongRingAndEdge1}Br.push(Xt[jr].coord),Gt.push(Pt([Br],{index:Hr,parent:Mr,winding:Qr,netWinding:void 0}))}qt=Ft(Gt);function zi(){for(var Oi=[],Ji=0;Ji<qt.features.length;Ji++)qt.features[Ji].properties.parent==-1&&Oi.push(Ji);if(Oi.length>1)for(Ji=0;Ji<Oi.length;Ji++){for(var Fo=-1,Ss=0;Ss<qt.features.length;Ss++)Oi[Ji]!=Ss&&ro(qt.features[Oi[Ji]].geometry.coordinates[0][0],qt.features[Ss],{ignoreBoundary:!0})&&Bh(qt.features[Ss])<1/0&&(Fo=Ss);qt.features[Oi[Ji]].properties.parent=Fo}}function gi(){for(var Oi=0;Oi<qt.features.length;Oi++)if(qt.features[Oi].properties.parent==-1){var Ji=qt.features[Oi].properties.winding;qt.features[Oi].properties.netWinding=Ji,_o(Oi,Ji)}}function _o(Oi,Ji){for(var Fo=0;Fo<qt.features.length;Fo++)if(qt.features[Fo].properties.parent==Oi){var Ss=Ji+qt.features[Fo].properties.winding;qt.features[Fo].properties.netWinding=Ss,_o(Fo,Ss)}}return zi(),gi(),qt}var bp=function(vt,_t,wt,Tt,At){this.coord=vt,this.param=_t,this.ringAndEdgeIn=wt,this.ringAndEdgeOut=Tt,this.nxtIsectAlongEdgeIn=At},Hh=function(vt,_t,wt,Tt,At,Ot,Nt){this.coord=vt,this.ringAndEdge1=_t,this.ringAndEdge2=wt,this.nxtIsectAlongRingAndEdge1=Tt,this.nxtIsectAlongRingAndEdge2=At,this.ringAndEdge1Walkable=Ot,this.ringAndEdge2Walkable=Nt};function jh(vt,_t){if(_t===void 0&&(_t=!0),vt.length!=3)throw new Error("This function requires an array of three points [x,y]");return(vt[1][0]-vt[0][0])*(vt[2][1]-vt[0][1])-(vt[1][1]-vt[0][1])*(vt[2][0]-vt[0][0])>=0==_t}function $t(vt){for(var _t=0,wt=0;wt<vt.length-1;wt++)vt[wt][0]<vt[_t][0]&&(_t=wt);if(jh([vt[tn(_t-1,vt.length-1)],vt[_t],vt[tn(_t+1,vt.length-1)]],!0))var Tt=1;else Tt=-1;return Tt}function Vt(vt,_t){if(!vt||!_t||vt.length!=_t.length)return!1;for(var wt=0,Tt=vt.length;wt<Tt;wt++)if(vt[wt]instanceof Array&&_t[wt]instanceof Array){if(!Vt(vt[wt],_t[wt]))return!1}else if(vt[wt]!=_t[wt])return!1;return!0}function tn(vt,_t){return(vt%_t+_t)%_t}var pn=Math.PI/180,In=180/Math.PI,Jn=function(vt,_t){this.lon=vt,this.lat=_t,this.x=pn*vt,this.y=pn*_t};Jn.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Jn.prototype.antipode=function(){var vt=-1*this.lat,_t=this.lon<0?180+this.lon:-1*(180-this.lon);return new Jn(_t,vt)};var Tr=function(){this.coords=[],this.length=0};Tr.prototype.move_to=function(vt){this.length++,this.coords.push(vt)};var Vr=function(vt){this.properties=vt||{},this.geometries=[]};Vr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var vt=[],_t=0;_t<this.geometries.length;_t++)vt.push(this.geometries[_t].coords);return{geometry:{type:"MultiLineString",coordinates:vt},type:"Feature",properties:this.properties}},Vr.prototype.wkt=function(){for(var vt="",_t="LINESTRING(",wt=function(At){_t+=At[0]+" "+At[1]+","},Tt=0;Tt<this.geometries.length;Tt++){if(this.geometries[Tt].coords.length===0)return"LINESTRING(empty)";this.geometries[Tt].coords.forEach(wt),vt+=_t.substring(0,_t.length-1)+")"}return vt};var Jr=function(vt,_t,wt){if(!vt||vt.x===void 0||vt.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!_t||_t.x===void 0||_t.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Jn(vt.x,vt.y),this.end=new Jn(_t.x,_t.y),this.properties=wt||{};var Tt=this.start.x-this.end.x,At=this.start.y-this.end.y,Ot=Math.pow(Math.sin(At/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(Tt/2),2);if(this.g=2*Math.asin(Math.sqrt(Ot)),this.g===Math.PI)throw new Error("it appears "+vt.view()+" and "+_t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+vt+" and "+_t)};function oi(vt,_t){var wt=[],Tt=Xs();return Sr(_t,function(At){if(wt.forEach(function(jt,Gt){jt.id=Gt}),wt.length){var Ot=Tt.search(At);if(Ot.features.length){var Nt=uo(At,Ot);wt=wt.filter(function(jt){return jt.id!==Nt.id}),Tt.remove(Nt),nr($i(Nt,At),function(jt){wt.push(jt),Tt.insert(jt)})}}else(wt=$i(vt,At).features).forEach(function(jt){jt.bbox||(jt.bbox=bg(dn(jt)))}),Tt.load(Ft(wt))}),Ft(wt)}function $i(vt,_t){var wt=[],Tt=On(vt)[0],At=On(vt)[vt.geometry.coordinates.length-1];if(Oo(Tt,fn(_t))||Oo(At,fn(_t)))return Ft([vt]);var Ot=Xs(),Nt=La(vt);Ot.load(Nt);var jt=Ot.search(_t);if(!jt.features.length)return Ft([vt]);var Gt=uo(_t,jt),qt=dr(Nt,function(en,Xt,sn){var yn=On(Xt)[1],vn=fn(_t);return sn===Gt.id?(en.push(vn),wt.push(Dt(en)),Oo(vn,yn)?[vn]:[vn,yn]):(en.push(yn),en)},[Tt]);return qt.length>1&&wt.push(Dt(qt)),Ft(wt)}function uo(vt,_t){if(!_t.features.length)throw new Error("lines must contain features");if(_t.features.length===1)return _t.features[0];var wt,Tt=1/0;return nr(_t,function(At){var Ot=Dc(At,vt).properties.dist;Ot<Tt&&(wt=At,Tt=Ot)}),wt}function Oo(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function tl(vt,_t,wt,Tt,At){At===void 0&&(At={});var Ot=At.steps||64,Nt=ha(wt),jt=ha(Tt),Gt=Array.isArray(vt)||vt.type!=="Feature"?{}:vt.properties;if(Nt===jt)return Dt(hp(vt,_t,At).geometry.coordinates[0],Gt);for(var qt=Nt,en=Nt<jt?jt:jt+360,Xt=qt,sn=[],yn=0;Xt<en;)sn.push(Aa(vt,_t,Xt,At).geometry.coordinates),Xt=qt+360*++yn/Ot;return Xt>en&&sn.push(Aa(vt,_t,en,At).geometry.coordinates),Dt(sn,Gt)}function ha(vt){var _t=vt%360;return _t<0&&(_t+=360),_t}function nl(vt,_t){_t===void 0&&(_t={});var wt=Un(vt);switch(_t.properties||vt.type!=="Feature"||(_t.properties=vt.properties),wt.type){case"Polygon":return dl(wt,_t);case"MultiPolygon":return function(Tt,At){At===void 0&&(At={});var Ot=Un(Tt).coordinates,Nt=At.properties?At.properties:Tt.type==="Feature"?Tt.properties:{},jt=[];return Ot.forEach(function(Gt){jt.push(Lu(Gt,Nt))}),Ft(jt)}(wt,_t);default:throw new Error("invalid poly")}}function dl(vt,_t){return _t===void 0&&(_t={}),Lu(Un(vt).coordinates,_t.properties?_t.properties:vt.type==="Feature"?vt.properties:{})}function Lu(vt,_t){return vt.length>1?Yt(vt,_t):Dt(vt[0],_t)}function Ig(vt,_t){var wt,Tt,At;_t===void 0&&(_t={});var Ot=_t.properties,Nt=(wt=_t.autoComplete)===null||wt===void 0||wt,jt=(Tt=_t.orderCoords)===null||Tt===void 0||Tt;switch((At=_t.mutate)!==null&&At!==void 0&&At||(vt=Po(vt)),vt.type){case"FeatureCollection":var Gt=[];return vt.features.forEach(function(qt){Gt.push(On(xp(qt,{},Nt,jt)))}),Wt(Gt,Ot);default:return xp(vt,Ot,Nt,jt)}}function xp(vt,_t,wt,Tt){_t=_t||(vt.type==="Feature"?vt.properties:{});var At=Un(vt),Ot=At.coordinates,Nt=At.type;if(!Ot.length)throw new Error("line must contain coordinates");switch(Nt){case"LineString":return wt&&(Ot=ih(Ot)),Pt([Ot],_t);case"MultiLineString":var jt=[],Gt=0;return Ot.forEach(function(qt){if(wt&&(qt=ih(qt)),Tt){var en=function(Xt){var sn=Xt[0],yn=Xt[1],vn=Xt[2],wn=Xt[3];return Math.abs(sn-vn)*Math.abs(yn-wn)}(dn(Dt(qt)));en>Gt?(jt.unshift(qt),Gt=en):jt.push(qt)}else jt.push(qt)}),Pt(jt,_t);default:throw new Error("geometry type "+Nt+" is not supported")}}function ih(vt){var _t=vt[0],wt=_t[0],Tt=_t[1],At=vt[vt.length-1],Ot=At[0],Nt=At[1];return wt===Ot&&Tt===Nt||vt.push(_t),vt}function oh(vt,_t){var wt,Tt,At,Ot,Nt,jt,Gt;for(Tt=1;Tt<=8;Tt*=2){for(wt=[],Ot=!(su(At=vt[vt.length-1],_t)&Tt),Nt=0;Nt<vt.length;Nt++)(Gt=!(su(jt=vt[Nt],_t)&Tt))!==Ot&&wt.push(wp(At,jt,Tt,_t)),Gt&&wt.push(jt),At=jt,Ot=Gt;if(!(vt=wt).length)break}return wt}function wp(vt,_t,wt,Tt){return 8&wt?[vt[0]+(_t[0]-vt[0])*(Tt[3]-vt[1])/(_t[1]-vt[1]),Tt[3]]:4&wt?[vt[0]+(_t[0]-vt[0])*(Tt[1]-vt[1])/(_t[1]-vt[1]),Tt[1]]:2&wt?[Tt[2],vt[1]+(_t[1]-vt[1])*(Tt[2]-vt[0])/(_t[0]-vt[0])]:1&wt?[Tt[0],vt[1]+(_t[1]-vt[1])*(Tt[0]-vt[0])/(_t[0]-vt[0])]:null}function su(vt,_t){var wt=0;return vt[0]<_t[0]?wt|=1:vt[0]>_t[2]&&(wt|=2),vt[1]<_t[1]?wt|=4:vt[1]>_t[3]&&(wt|=8),wt}function da(vt,_t){for(var wt=[],Tt=0,At=vt;Tt<At.length;Tt++){var Ot=oh(At[Tt],_t);Ot.length>0&&(Ot[0][0]===Ot[Ot.length-1][0]&&Ot[0][1]===Ot[Ot.length-1][1]||Ot.push(Ot[0]),Ot.length>=4&&wt.push(Ot))}return wt}Jr.prototype.interpolate=function(vt){var _t=Math.sin((1-vt)*this.g)/Math.sin(this.g),wt=Math.sin(vt*this.g)/Math.sin(this.g),Tt=_t*Math.cos(this.start.y)*Math.cos(this.start.x)+wt*Math.cos(this.end.y)*Math.cos(this.end.x),At=_t*Math.cos(this.start.y)*Math.sin(this.start.x)+wt*Math.cos(this.end.y)*Math.sin(this.end.x),Ot=_t*Math.sin(this.start.y)+wt*Math.sin(this.end.y),Nt=In*Math.atan2(Ot,Math.sqrt(Math.pow(Tt,2)+Math.pow(At,2)));return[In*Math.atan2(At,Tt),Nt]},Jr.prototype.Arc=function(vt,_t){var wt=[];if(!vt||vt<=2)wt.push([this.start.lon,this.start.lat]),wt.push([this.end.lon,this.end.lat]);else for(var Tt=1/(vt-1),At=0;At<vt;++At){var Ot=Tt*At,Nt=this.interpolate(Ot);wt.push(Nt)}for(var jt=!1,Gt=0,qt=_t&&_t.offset?_t.offset:10,en=180-qt,Xt=-180+qt,sn=360-qt,yn=1;yn<wt.length;++yn){var vn=wt[yn-1][0],wn=wt[yn][0],un=Math.abs(wn-vn);un>sn&&(wn>en&&vn<Xt||vn>en&&wn<Xt)?jt=!0:un>Gt&&(Gt=un)}var Fn=[];if(jt&&Gt<qt){var Qn=[];Fn.push(Qn);for(var _n=0;_n<wt.length;++_n){var Bn=parseFloat(wt[_n][0]);if(_n>0&&Math.abs(Bn-wt[_n-1][0])>sn){var Hn=parseFloat(wt[_n-1][0]),Gn=parseFloat(wt[_n-1][1]),Vn=parseFloat(wt[_n][0]),Ur=parseFloat(wt[_n][1]);if(Hn>-180&&Hn<Xt&&Vn===180&&_n+1<wt.length&&wt[_n-1][0]>-180&&wt[_n-1][0]<Xt){Qn.push([-180,wt[_n][1]]),_n++,Qn.push([wt[_n][0],wt[_n][1]]);continue}if(Hn>en&&Hn<180&&Vn===-180&&_n+1<wt.length&&wt[_n-1][0]>en&&wt[_n-1][0]<180){Qn.push([180,wt[_n][1]]),_n++,Qn.push([wt[_n][0],wt[_n][1]]);continue}if(Hn<Xt&&Vn>en){var $r=Hn;Hn=Vn,Vn=$r;var Yr=Gn;Gn=Ur,Ur=Yr}if(Hn>en&&Vn<Xt&&(Vn+=360),Hn<=180&&Vn>=180&&Hn<Vn){var Mr=(180-Hn)/(Vn-Hn),Qr=Mr*Ur+(1-Mr)*Gn;Qn.push([wt[_n-1][0]>en?180:-180,Qr]),(Qn=[]).push([wt[_n-1][0]>en?-180:180,Qr]),Fn.push(Qn)}else Qn=[],Fn.push(Qn);Qn.push([Bn,wt[_n][1]])}else Qn.push([wt[_n][0],wt[_n][1]])}}else{var Hr=[];Fn.push(Hr);for(var Br=0;Br<wt.length;++Br)Hr.push([wt[Br][0],wt[Br][1]])}for(var Nr=new Vr(this.properties),Xr=0;Xr<Fn.length;++Xr){var jr=new Tr;Nr.geometries.push(jr);for(var ei=Fn[Xr],xr=0;xr<ei.length;++xr)jr.move_to(ei[xr])}return Nr};var Ed=xs(function(vt,_t){function wt(Tt){var At=[];for(var Ot in Tt)At.push(Ot);return At}(vt.exports=typeof Object.keys=="function"?Object.keys:wt).shim=wt}),Pg=xs(function(vt,_t){var wt=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";function Tt(Ot){return Object.prototype.toString.call(Ot)=="[object Arguments]"}function At(Ot){return Ot&&typeof Ot=="object"&&typeof Ot.length=="number"&&Object.prototype.hasOwnProperty.call(Ot,"callee")&&!Object.prototype.propertyIsEnumerable.call(Ot,"callee")||!1}(_t=vt.exports=wt?Tt:At).supported=Tt,_t.unsupported=At}),Vh=xs(function(vt){var _t=Array.prototype.slice,wt=vt.exports=function(Ot,Nt,jt){return jt||(jt={}),Ot===Nt||(Ot instanceof Date&&Nt instanceof Date?Ot.getTime()===Nt.getTime():!Ot||!Nt||typeof Ot!="object"&&typeof Nt!="object"?jt.strict?Ot===Nt:Ot==Nt:function(Gt,qt,en){var Xt,sn;if(Tt(Gt)||Tt(qt)||Gt.prototype!==qt.prototype)return!1;if(Pg(Gt))return!!Pg(qt)&&(Gt=_t.call(Gt),qt=_t.call(qt),wt(Gt,qt,en));if(At(Gt)){if(!At(qt)||Gt.length!==qt.length)return!1;for(Xt=0;Xt<Gt.length;Xt++)if(Gt[Xt]!==qt[Xt])return!1;return!0}try{var yn=Ed(Gt),vn=Ed(qt)}catch{return!1}if(yn.length!=vn.length)return!1;for(yn.sort(),vn.sort(),Xt=yn.length-1;Xt>=0;Xt--)if(yn[Xt]!=vn[Xt])return!1;for(Xt=yn.length-1;Xt>=0;Xt--)if(sn=yn[Xt],!wt(Gt[sn],qt[sn],en))return!1;return typeof Gt==typeof qt}(Ot,Nt,jt))};function Tt(Ot){return Ot==null}function At(Ot){return!(!Ot||typeof Ot!="object"||typeof Ot.length!="number")&&typeof Ot.copy=="function"&&typeof Ot.slice=="function"&&!(Ot.length>0&&typeof Ot[0]!="number")}});function vf(vt,_t,wt){if(wt===void 0&&(wt={}),!cn(wt=wt||{}))throw new Error("options is invalid");var Tt,At=wt.tolerance||0,Ot=[],Nt=Xs(),jt=La(vt);return Nt.load(jt),Fr(_t,function(Gt){var qt=!1;Gt&&(nr(Nt.search(Gt),function(en){if(qt===!1){var Xt=On(Gt).sort(),sn=On(en).sort();Vh(Xt,sn)||(At===0?Tl(Xt[0],en)&&Tl(Xt[1],en):Dc(en,Xt[0]).properties.dist<=At&&Dc(en,Xt[1]).properties.dist<=At)?(qt=!0,Tt=Tt?Sd(Tt,Gt):Gt):(At===0?Tl(sn[0],Gt)&&Tl(sn[1],Gt):Dc(Gt,sn[0]).properties.dist<=At&&Dc(Gt,sn[1]).properties.dist<=At)&&(Tt=Tt?Sd(Tt,en):en)}}),qt===!1&&Tt&&(Ot.push(Tt),Tt=void 0))}),Tt&&Ot.push(Tt),Ft(Ot)}function Sd(vt,_t){var wt=On(_t),Tt=On(vt),At=Tt[0],Ot=Tt[Tt.length-1],Nt=vt.geometry.coordinates;return Vh(wt[0],At)?Nt.unshift(wt[1]):Vh(wt[0],Ot)?Nt.push(wt[1]):Vh(wt[1],At)?Nt.unshift(wt[0]):Vh(wt[1],Ot)&&Nt.push(wt[0]),vt}function _f(vt){var _t=vt%360;return _t<0&&(_t+=360),_t}function sh(vt,_t,wt){var Tt;return wt===void 0&&(wt={}),(Tt=wt.final?Hm(fn(_t),fn(vt)):Hm(fn(vt),fn(_t)))>180?-(360-Tt):Tt}function Hm(vt,_t){var wt=An(vt[1]),Tt=An(_t[1]),At=An(_t[0]-vt[0]);At>Math.PI&&(At-=2*Math.PI),At<-Math.PI&&(At+=2*Math.PI);var Ot=Math.log(Math.tan(Tt/2+Math.PI/4)/Math.tan(wt/2+Math.PI/4));return(Tn(Math.atan2(At,Ot))+360)%360}function bf(vt,_t,wt,Tt){Tt===void 0&&(Tt={});var At=_t<0,Ot=kn(Math.abs(_t),Tt.units,"meters");At&&(Ot=-Math.abs(Ot));var Nt=fn(vt),jt=function(Gt,qt,en,Xt){Xt=Xt===void 0?rt:Number(Xt);var sn=qt/Xt,yn=Gt[0]*Math.PI/180,vn=An(Gt[1]),wn=An(en),un=sn*Math.cos(wn),Fn=vn+un;Math.abs(Fn)>Math.PI/2&&(Fn=Fn>0?Math.PI-Fn:-Math.PI-Fn);var Qn=Math.log(Math.tan(Fn/2+Math.PI/4)/Math.tan(vn/2+Math.PI/4)),_n=Math.abs(Qn)>1e-11?un/Qn:Math.cos(vn),Bn=sn*Math.sin(wn)/_n;return[(180*(yn+Bn)/Math.PI+540)%360-180,180*Fn/Math.PI]}(Nt,Ot,wt);return jt[0]+=jt[0]-Nt[0]>180?-360:Nt[0]-jt[0]>180?360:0,kt(jt,Tt.properties)}function jm(vt,_t,wt,Tt,At,Ot){for(var Nt=0;Nt<vt.length;Nt++){var jt=vt[Nt],Gt=vt[Nt+1];Nt===vt.length-1&&(Gt=vt[0]),Tt=ah(jt,Gt,_t),wt<=0&&Tt>0?ah(_t,jt,At)<0||(At=jt):wt>0&&Tt<=0&&(Es(_t,jt,Ot)||(Ot=jt)),wt=Tt}return[At,Ot]}function Es(vt,_t,wt){return ah(vt,_t,wt)>0}function ah(vt,_t,wt){return(_t[0]-vt[0])*(wt[1]-vt[1])-(wt[0]-vt[0])*(_t[1]-vt[1])}function Ep(vt){for(var _t,wt,Tt=On(vt),At=0,Ot=1;Ot<Tt.length;)_t=wt||Tt[0],At+=((wt=Tt[Ot])[0]-_t[0])*(wt[1]+_t[1]),Ot++;return At>0}function lh(vt,_t){switch(vt.type==="Feature"?vt.geometry.type:vt.type){case"GeometryCollection":return ur(vt,function(wt){lh(wt,_t)}),vt;case"LineString":return Og(On(vt),_t),vt;case"Polygon":return Uh(On(vt),_t),vt;case"MultiLineString":return On(vt).forEach(function(wt){Og(wt,_t)}),vt;case"MultiPolygon":return On(vt).forEach(function(wt){Uh(wt,_t)}),vt;case"Point":case"MultiPoint":return vt}}function Og(vt,_t){Ep(vt)===_t&&vt.reverse()}function Uh(vt,_t){Ep(vt[0])!==_t&&vt[0].reverse();for(var wt=1;wt<vt.length;wt++)Ep(vt[wt])===_t&&vt[wt].reverse()}function Vm(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.zProperty||"elevation",Tt=_t.flip,At=_t.flags;Kn(vt,"Point","input must contain Points");for(var Ot=function(sn,yn){var vn={};return nr(sn,function(wn){var un=On(wn)[1];vn[un]||(vn[un]=[]),vn[un].push(wn)}),Object.keys(vn).map(function(wn){return vn[wn].sort(function(un,Fn){return On(un)[0]-On(Fn)[0]})}).sort(function(wn,un){return yn?On(wn[0])[1]-On(un[0])[1]:On(un[0])[1]-On(wn[0])[1]})}(vt,Tt),Nt=[],jt=0;jt<Ot.length;jt++){for(var Gt=Ot[jt],qt=[],en=0;en<Gt.length;en++){var Xt=Gt[en];Xt.properties[wt]?qt.push(Xt.properties[wt]):qt.push(0),At===!0&&(Xt.properties.matrixPosition=[jt,en])}Nt.push(qt)}return Nt}var p1={successCallback:null,verbose:!1,polygons:!1},Bc={};function Gh(vt,_t,wt,Tt){Tt=Tt||{};for(var At=Object.keys(p1),Ot=0;Ot<At.length;Ot++){var Nt=At[Ot],jt=Tt[Nt];jt=jt!=null?jt:p1[Nt],Bc[Nt]=jt}Bc.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+_t+":"+(_t+wt)+"]");var Gt,qt=function(en,Xt,sn){for(var yn=en.length-1,vn=en[0].length-1,wn={rows:yn,cols:vn,cells:[]},un=Xt+Math.abs(sn),Fn=0;Fn<yn;++Fn){wn.cells[Fn]=[];for(var Qn=0;Qn<vn;++Qn){var _n=0,Bn=en[Fn+1][Qn],Hn=en[Fn+1][Qn+1],Gn=en[Fn][Qn+1],Vn=en[Fn][Qn];if(!(isNaN(Bn)||isNaN(Hn)||isNaN(Gn)||isNaN(Vn))){_n|=Bn<Xt?0:Bn>un?128:64,_n|=Hn<Xt?0:Hn>un?32:16,_n|=Gn<Xt?0:Gn>un?8:4;var Ur=+(_n|=Vn<Xt?0:Vn>un?2:1),$r=0;if(_n===17||_n===18||_n===33||_n===34||_n===38||_n===68||_n===72||_n===98||_n===102||_n===132||_n===136||_n===137||_n===152||_n===153){var Yr=(Bn+Hn+Gn+Vn)/4;$r=Yr>un?2:Yr<Xt?0:1,_n===34?$r===1?_n=35:$r===0&&(_n=136):_n===136?$r===1?(_n=35,$r=4):$r===0&&(_n=34):_n===17?$r===1?(_n=155,$r=4):$r===0&&(_n=153):_n===68?$r===1?(_n=103,$r=4):$r===0&&(_n=102):_n===153?$r===1&&(_n=155):_n===102?$r===1&&(_n=103):_n===152?$r<2&&(_n=156,$r=1):_n===137?$r<2&&(_n=139,$r=1):_n===98?$r<2&&(_n=99,$r=1):_n===38?$r<2&&(_n=39,$r=1):_n===18?$r>0?(_n=156,$r=4):_n=152:_n===33?$r>0?(_n=139,$r=4):_n=137:_n===72?$r>0?(_n=99,$r=4):_n=98:_n===132&&($r>0?(_n=39,$r=4):_n=38)}if(_n!=0&&_n!=170){var Mr,Qr,Hr,Br,Nr,Xr,jr,ei;Mr=Qr=Hr=Br=Nr=Xr=jr=ei=.5;var xr=[];_n===1?(Hr=1-qn(Xt,Gn,Vn),ei=1-qn(Xt,Bn,Vn),xr.push(Ui[_n])):_n===169?(Hr=qn(un,Vn,Gn),ei=qn(un,Vn,Bn),xr.push(Ui[_n])):_n===4?(Xr=1-qn(Xt,Hn,Gn),Br=qn(Xt,Vn,Gn),xr.push(Ri[_n])):_n===166?(Xr=qn(un,Gn,Hn),Br=1-qn(un,Gn,Vn),xr.push(Ri[_n])):_n===16?(Nr=qn(Xt,Gn,Hn),Qr=qn(Xt,Bn,Hn),xr.push(Di[_n])):_n===154?(Nr=1-qn(un,Hn,Gn),Qr=1-qn(un,Hn,Bn),xr.push(Di[_n])):_n===64?(jr=qn(Xt,Vn,Bn),Mr=1-qn(Xt,Hn,Bn),xr.push(eo[_n])):_n===106?(jr=1-qn(un,Bn,Vn),Mr=qn(un,Bn,Hn),xr.push(eo[_n])):_n===168?(Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),xr.push(Ki[_n]),xr.push(Ui[_n])):_n===2?(Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),xr.push(Ki[_n]),xr.push(Ui[_n])):_n===162?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),xr.push(Ki[_n]),xr.push(Ui[_n])):_n===8?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===138?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===32?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===42?(ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn),xr.push(io[_n]),xr.push(eo[_n])):_n===128&&(ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn),xr.push(io[_n]),xr.push(eo[_n])),_n===5?(Xr=1-qn(Xt,Hn,Gn),ei=1-qn(Xt,Bn,Vn),xr.push(Ri[_n])):_n===165?(Xr=qn(un,Gn,Hn),ei=qn(un,Vn,Bn),xr.push(Ri[_n])):_n===20?(Br=qn(Xt,Vn,Gn),Qr=qn(Xt,Bn,Hn),xr.push(Ki[_n])):_n===150?(Br=1-qn(un,Gn,Vn),Qr=1-qn(un,Hn,Bn),xr.push(Ki[_n])):_n===80?(Nr=qn(Xt,Gn,Hn),jr=qn(Xt,Vn,Bn),xr.push(Di[_n])):_n===90?(Nr=1-qn(un,Hn,Gn),jr=1-qn(un,Bn,Vn),xr.push(Di[_n])):_n===65?(Hr=1-qn(Xt,Gn,Vn),Mr=1-qn(Xt,Hn,Bn),xr.push(Ui[_n])):_n===105?(Hr=qn(un,Vn,Gn),Mr=qn(un,Bn,Hn),xr.push(Ui[_n])):_n===160?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===10?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===130?(Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn),xr.push(Ki[_n]),xr.push(Ui[_n])):_n===40?(Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn),xr.push(Ki[_n]),xr.push(Ui[_n])):_n===101?(Xr=qn(un,Gn,Hn),Mr=qn(un,Bn,Hn),xr.push(Ri[_n])):_n===69?(Xr=1-qn(Xt,Hn,Gn),Mr=1-qn(Xt,Hn,Bn),xr.push(Ri[_n])):_n===149?(ei=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn),xr.push(io[_n])):_n===21?(ei=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn),xr.push(io[_n])):_n===86?(Br=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),xr.push(Ki[_n])):_n===84?(Br=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),xr.push(Ki[_n])):_n===89?(Nr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),xr.push(Ui[_n])):_n===81?(Nr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),xr.push(Ui[_n])):_n===96?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),jr=qn(Xt,Vn,Bn),Mr=qn(un,Bn,Hn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===74?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),jr=1-qn(un,Bn,Vn),Mr=1-qn(Xt,Hn,Bn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===24?(Nr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),Qr=qn(Xt,Bn,Hn),xr.push(Di[_n]),xr.push(Ui[_n])):_n===146?(Nr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),Qr=1-qn(un,Hn,Bn),xr.push(Di[_n]),xr.push(Ui[_n])):_n===6?(Xr=1-qn(Xt,Hn,Gn),Br=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),xr.push(Ri[_n]),xr.push(Ki[_n])):_n===164?(Xr=qn(un,Gn,Hn),Br=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),xr.push(Ri[_n]),xr.push(Ki[_n])):_n===129?(Hr=1-qn(Xt,Gn,Vn),ei=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn),xr.push(Ui[_n]),xr.push(io[_n])):_n===41?(Hr=qn(un,Vn,Gn),ei=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn),xr.push(Ui[_n]),xr.push(io[_n])):_n===66?(Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),Mr=1-qn(Xt,Hn,Bn),xr.push(Ki[_n]),xr.push(Ui[_n])):_n===104?(Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),Mr=qn(un,Bn,Hn),xr.push(Ui[_n]),xr.push(ss[_n])):_n===144?(Nr=qn(Xt,Gn,Hn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn),xr.push(Di[_n]),xr.push(eo[_n])):_n===26?(Nr=1-qn(un,Hn,Gn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn),xr.push(Di[_n]),xr.push(eo[_n])):_n===36?(Xr=qn(un,Gn,Hn),Br=qn(Xt,Vn,Gn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn),xr.push(Ri[_n]),xr.push(Ki[_n])):_n===134?(Xr=1-qn(Xt,Hn,Gn),Br=1-qn(un,Gn,Vn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn),xr.push(Ri[_n]),xr.push(Ki[_n])):_n===9?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),ei=1-qn(Xt,Bn,Vn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===161?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),ei=qn(un,Vn,Bn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===37?(Xr=qn(un,Gn,Hn),ei=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn),xr.push(Ri[_n]),xr.push(io[_n])):_n===133?(Xr=1-qn(Xt,Hn,Gn),ei=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn),xr.push(Ri[_n]),xr.push(io[_n])):_n===148?(Br=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn),xr.push(Ki[_n]),xr.push(eo[_n])):_n===22?(Br=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn),xr.push(Ki[_n]),xr.push(eo[_n])):_n===82?(Nr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),xr.push(Di[_n]),xr.push(Ui[_n])):_n===88?(Nr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),xr.push(Di[_n]),xr.push(Ui[_n])):_n===73?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),Mr=1-qn(Xt,Hn,Bn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===97?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),Mr=qn(un,Bn,Hn),xr.push(Di[_n]),xr.push(Ri[_n])):_n===145?(Nr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),ei=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn),xr.push(Di[_n]),xr.push(io[_n])):_n===25?(Nr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),ei=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn),xr.push(Di[_n]),xr.push(io[_n])):_n===70?(Xr=1-qn(Xt,Hn,Gn),Br=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),Mr=1-qn(Xt,Hn,Bn),xr.push(Ri[_n]),xr.push(Ki[_n])):_n===100?(Xr=qn(un,Gn,Hn),Br=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),Mr=qn(un,Bn,Hn),xr.push(Ri[_n]),xr.push(Ki[_n])):_n===34?($r===0?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn)):(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn)),xr.push(Di[_n]),xr.push(Ri[_n]),xr.push(io[_n]),xr.push(eo[_n])):_n===35?($r===4?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn)):(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn)),xr.push(Di[_n]),xr.push(Ri[_n]),xr.push(Ui[_n]),xr.push(eo[_n])):_n===136?($r===0?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn)):(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn)),xr.push(Di[_n]),xr.push(Ri[_n]),xr.push(io[_n]),xr.push(eo[_n])):_n===153?($r===0?(Nr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),ei=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn)):(Nr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),ei=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn)),xr.push(Di[_n]),xr.push(Ui[_n])):_n===102?($r===0?(Xr=1-qn(Xt,Hn,Gn),Br=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),Mr=1-qn(Xt,Hn,Bn)):(Xr=qn(un,Gn,Hn),Br=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),Mr=qn(un,Bn,Hn)),xr.push(Ri[_n]),xr.push(eo[_n])):_n===155?($r===4?(Nr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),ei=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn)):(Nr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),ei=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn)),xr.push(Di[_n]),xr.push(io[_n])):_n===103?($r===4?(Xr=1-qn(Xt,Hn,Gn),Br=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),Mr=1-qn(Xt,Hn,Bn)):(Xr=qn(un,Gn,Hn),Br=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),Mr=qn(un,Bn,Hn)),xr.push(Ri[_n]),xr.push(Ki[_n])):_n===152?($r===0?(Nr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn)):(Nr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn)),xr.push(Di[_n]),xr.push(Ki[_n]),xr.push(Ui[_n])):_n===156?($r===4?(Nr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Qr=qn(Xt,Bn,Hn)):(Nr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Qr=1-qn(un,Hn,Bn)),xr.push(Di[_n]),xr.push(Ui[_n]),xr.push(eo[_n])):_n===137?($r===0?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),ei=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn)):(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),ei=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn)),xr.push(Di[_n]),xr.push(Ri[_n]),xr.push(Ui[_n])):_n===139?($r===4?(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Hr=1-qn(Xt,Gn,Vn),ei=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn)):(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Hr=qn(un,Vn,Gn),ei=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn)),xr.push(Di[_n]),xr.push(Ri[_n]),xr.push(io[_n])):_n===98?($r===0?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),Mr=1-qn(Xt,Hn,Bn)):(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),Mr=qn(un,Bn,Hn)),xr.push(Di[_n]),xr.push(Ri[_n]),xr.push(eo[_n])):_n===99?($r===4?(Nr=1-qn(Xt,Hn,Gn),Xr=1-qn(un,Hn,Gn),Br=qn(un,Vn,Gn),Hr=qn(Xt,Vn,Gn),jr=qn(Xt,Vn,Bn),Mr=1-qn(Xt,Hn,Bn)):(Nr=qn(un,Gn,Hn),Xr=qn(Xt,Gn,Hn),Br=1-qn(Xt,Gn,Vn),Hr=1-qn(un,Gn,Vn),jr=1-qn(un,Bn,Vn),Mr=qn(un,Bn,Hn)),xr.push(Di[_n]),xr.push(Ri[_n]),xr.push(Ui[_n])):_n===38?($r===0?(Xr=1-qn(Xt,Hn,Gn),Br=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn)):(Xr=qn(un,Gn,Hn),Br=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn)),xr.push(Ri[_n]),xr.push(io[_n]),xr.push(eo[_n])):_n===39?($r===4?(Xr=1-qn(Xt,Hn,Gn),Br=qn(Xt,Vn,Gn),ei=qn(Xt,Vn,Bn),jr=qn(un,Vn,Bn),Mr=1-qn(un,Hn,Bn),Qr=1-qn(Xt,Hn,Bn)):(Xr=qn(un,Gn,Hn),Br=1-qn(un,Gn,Vn),ei=1-qn(un,Bn,Vn),jr=1-qn(Xt,Bn,Vn),Mr=qn(Xt,Bn,Hn),Qr=qn(un,Bn,Hn)),xr.push(Ri[_n]),xr.push(Ki[_n]),xr.push(eo[_n])):_n===85&&(Nr=1,Xr=0,Br=1,Hr=0,ei=0,jr=1,Mr=0,Qr=1),(Mr<0||Mr>1||Qr<0||Qr>1||Nr<0||Nr>1||Br<0||Br>1||ei<0||ei>1||jr<0||jr>1)&&console.log("MarchingSquaresJS-isoBands: "+_n+" "+Ur+" "+Bn+","+Hn+","+Gn+","+Vn+" "+$r+" "+Mr+" "+Qr+" "+Nr+" "+Xr+" "+Br+" "+Hr+" "+ei+" "+jr),wn.cells[Fn][Qn]={cval:_n,cval_real:Ur,flipped:$r,topleft:Mr,topright:Qr,righttop:Nr,rightbottom:Xr,bottomright:Br,bottomleft:Hr,leftbottom:ei,lefttop:jr,edges:xr}}}}}return wn}(vt,_t,wt);return Bc.polygons?(Bc.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),Gt=function(en){var Xt=[],sn=0;return en.cells.forEach(function(yn,vn){yn.forEach(function(wn,un){if(wn!==void 0){var Fn=Ci[wn.cval](wn);typeof Fn=="object"&&Km(Fn)?typeof Fn[0]=="object"&&Km(Fn[0])?typeof Fn[0][0]=="object"&&Km(Fn[0][0])?Fn.forEach(function(Qn){Qn.forEach(function(_n){_n[0]+=un,_n[1]+=vn}),Xt[sn++]=Qn}):(Fn.forEach(function(Qn){Qn[0]+=un,Qn[1]+=vn}),Xt[sn++]=Fn):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),Xt}(qt)):(Bc.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),Gt=function(en){for(var Xt=[],sn=en.rows,yn=en.cols,vn=[],wn=0;wn<sn;wn++)for(var un=0;un<yn;un++)if(en.cells[wn][un]!==void 0&&en.cells[wn][un].edges.length>0){var Fn=Sp(en.cells[wn][un]),Qn=null,_n=un,Bn=wn;Fn!==null&&vn.push([Fn.p[0]+_n,Fn.p[1]+Bn]);do{if((Qn=vv(en.cells[Bn][_n],Fn.x,Fn.y,Fn.o))===null)break;if(vn.push([Qn.p[0]+_n,Qn.p[1]+Bn]),_n+=Qn.x,Fn=Qn,(Bn+=Qn.y)<0||Bn>=sn||_n<0||_n>=yn||en.cells[Bn][_n]===void 0){var Hn=yv(en,_n-=Qn.x,Bn-=Qn.y,Qn.x,Qn.y,Qn.o);if(Hn===null)break;Hn.path.forEach(function(Gn){vn.push(Gn)}),_n=Hn.i,Bn=Hn.j,Fn=Hn}}while(en.cells[Bn][_n]!==void 0&&en.cells[Bn][_n].edges.length>0);Xt.push(vn),vn=[],en.cells[wn][un].edges.length>0&&un--}return Xt}(qt)),typeof Bc.successCallback=="function"&&Bc.successCallback(Gt),Gt}var Ca=64,au=16,Ao=[],Yo=[],Ho=[],$o=[],Ro=[],Xo=[],Zo=[],jo=[],Mo=[],Ko=[],Jo=[],Qo=[],es=[],ao=[],Vo=[],Uo=[],ts=[],To=[],ns=[],rs=[],is=[],No=[],os=[],Go=[];Zo[85]=Ko[85]=-1,jo[85]=Jo[85]=0,Mo[85]=Qo[85]=1,ns[85]=No[85]=1,rs[85]=os[85]=0,is[85]=Go[85]=1,Ao[85]=$o[85]=0,Yo[85]=Ro[85]=-1,Ho[85]=Vo[85]=0,Uo[85]=es[85]=0,ts[85]=ao[85]=1,Xo[85]=To[85]=1,No[1]=No[169]=0,os[1]=os[169]=-1,Go[1]=Go[169]=0,es[1]=es[169]=-1,ao[1]=ao[169]=0,Vo[1]=Vo[169]=0,Ko[4]=Ko[166]=0,Jo[4]=Jo[166]=-1,Qo[4]=Qo[166]=1,Uo[4]=Uo[166]=1,ts[4]=ts[166]=0,To[4]=To[166]=0,Zo[16]=Zo[154]=0,jo[16]=jo[154]=1,Mo[16]=Mo[154]=1,$o[16]=$o[154]=1,Ro[16]=Ro[154]=0,Xo[16]=Xo[154]=1,ns[64]=ns[106]=0,rs[64]=rs[106]=1,is[64]=is[106]=0,Ao[64]=Ao[106]=-1,Yo[64]=Yo[106]=0,Ho[64]=Ho[106]=1,ns[2]=ns[168]=0,rs[2]=rs[168]=-1,is[2]=is[168]=1,No[2]=No[168]=0,os[2]=os[168]=-1,Go[2]=Go[168]=0,es[2]=es[168]=-1,ao[2]=ao[168]=0,Vo[2]=Vo[168]=0,Uo[2]=Uo[168]=-1,ts[2]=ts[168]=0,To[2]=To[168]=1,Zo[8]=Zo[162]=0,jo[8]=jo[162]=-1,Mo[8]=Mo[162]=0,Ko[8]=Ko[162]=0,Jo[8]=Jo[162]=-1,Qo[8]=Qo[162]=1,es[8]=es[162]=1,ao[8]=ao[162]=0,Vo[8]=Vo[162]=1,Uo[8]=Uo[162]=1,ts[8]=ts[162]=0,To[8]=To[162]=0,Zo[32]=Zo[138]=0,jo[32]=jo[138]=1,Mo[32]=Mo[138]=1,Ko[32]=Ko[138]=0,Jo[32]=Jo[138]=1,Qo[32]=Qo[138]=0,Ao[32]=Ao[138]=1,Yo[32]=Yo[138]=0,Ho[32]=Ho[138]=0,$o[32]=$o[138]=1,Ro[32]=Ro[138]=0,Xo[32]=Xo[138]=1,No[128]=No[42]=0,os[128]=os[42]=1,Go[128]=Go[42]=1,ns[128]=ns[42]=0,rs[128]=rs[42]=1,is[128]=is[42]=0,Ao[128]=Ao[42]=-1,Yo[128]=Yo[42]=0,Ho[128]=Ho[42]=1,$o[128]=$o[42]=-1,Ro[128]=Ro[42]=0,Xo[128]=Xo[42]=0,Ko[5]=Ko[165]=-1,Jo[5]=Jo[165]=0,Qo[5]=Qo[165]=0,No[5]=No[165]=1,os[5]=os[165]=0,Go[5]=Go[165]=0,Uo[20]=Uo[150]=0,ts[20]=ts[150]=1,To[20]=To[150]=1,$o[20]=$o[150]=0,Ro[20]=Ro[150]=-1,Xo[20]=Xo[150]=1,Zo[80]=Zo[90]=-1,jo[80]=jo[90]=0,Mo[80]=Mo[90]=1,ns[80]=ns[90]=1,rs[80]=rs[90]=0,is[80]=is[90]=1,es[65]=es[105]=0,ao[65]=ao[105]=1,Vo[65]=Vo[105]=0,Ao[65]=Ao[105]=0,Yo[65]=Yo[105]=-1,Ho[65]=Ho[105]=0,Zo[160]=Zo[10]=-1,jo[160]=jo[10]=0,Mo[160]=Mo[10]=1,Ko[160]=Ko[10]=-1,Jo[160]=Jo[10]=0,Qo[160]=Qo[10]=0,No[160]=No[10]=1,os[160]=os[10]=0,Go[160]=Go[10]=0,ns[160]=ns[10]=1,rs[160]=rs[10]=0,is[160]=is[10]=1,Uo[130]=Uo[40]=0,ts[130]=ts[40]=1,To[130]=To[40]=1,es[130]=es[40]=0,ao[130]=ao[40]=1,Vo[130]=Vo[40]=0,Ao[130]=Ao[40]=0,Yo[130]=Yo[40]=-1,Ho[130]=Ho[40]=0,$o[130]=$o[40]=0,Ro[130]=Ro[40]=-1,Xo[130]=Xo[40]=1,Ko[37]=Ko[133]=0,Jo[37]=Jo[133]=1,Qo[37]=Qo[133]=1,No[37]=No[133]=0,os[37]=os[133]=1,Go[37]=Go[133]=0,Ao[37]=Ao[133]=-1,Yo[37]=Yo[133]=0,Ho[37]=Ho[133]=0,$o[37]=$o[133]=1,Ro[37]=Ro[133]=0,Xo[37]=Xo[133]=0,Uo[148]=Uo[22]=-1,ts[148]=ts[22]=0,To[148]=To[22]=0,No[148]=No[22]=0,os[148]=os[22]=-1,Go[148]=Go[22]=1,ns[148]=ns[22]=0,rs[148]=rs[22]=1,is[148]=is[22]=1,$o[148]=$o[22]=-1,Ro[148]=Ro[22]=0,Xo[148]=Xo[22]=1,Zo[82]=Zo[88]=0,jo[82]=jo[88]=-1,Mo[82]=Mo[88]=1,Uo[82]=Uo[88]=1,ts[82]=ts[88]=0,To[82]=To[88]=1,es[82]=es[88]=-1,ao[82]=ao[88]=0,Vo[82]=Vo[88]=1,ns[82]=ns[88]=0,rs[82]=rs[88]=-1,is[82]=is[88]=0,Zo[73]=Zo[97]=0,jo[73]=jo[97]=1,Mo[73]=Mo[97]=0,Ko[73]=Ko[97]=0,Jo[73]=Jo[97]=-1,Qo[73]=Qo[97]=0,es[73]=es[97]=1,ao[73]=ao[97]=0,Vo[73]=Vo[97]=0,Ao[73]=Ao[97]=1,Yo[73]=Yo[97]=0,Ho[73]=Ho[97]=1,Zo[145]=Zo[25]=0,jo[145]=jo[25]=-1,Mo[145]=Mo[25]=0,es[145]=es[25]=1,ao[145]=ao[25]=0,Vo[145]=Vo[25]=1,No[145]=No[25]=0,os[145]=os[25]=1,Go[145]=Go[25]=1,$o[145]=$o[25]=-1,Ro[145]=Ro[25]=0,Xo[145]=Xo[25]=0,Ko[70]=Ko[100]=0,Jo[70]=Jo[100]=1,Qo[70]=Qo[100]=0,Uo[70]=Uo[100]=-1,ts[70]=ts[100]=0,To[70]=To[100]=1,ns[70]=ns[100]=0,rs[70]=rs[100]=-1,is[70]=is[100]=1,Ao[70]=Ao[100]=1,Yo[70]=Yo[100]=0,Ho[70]=Ho[100]=0,Ko[101]=Ko[69]=0,Jo[101]=Jo[69]=1,Qo[101]=Qo[69]=0,Ao[101]=Ao[69]=1,Yo[101]=Yo[69]=0,Ho[101]=Ho[69]=0,No[149]=No[21]=0,os[149]=os[21]=1,Go[149]=Go[21]=1,$o[149]=$o[21]=-1,Ro[149]=Ro[21]=0,Xo[149]=Xo[21]=0,Uo[86]=Uo[84]=-1,ts[86]=ts[84]=0,To[86]=To[84]=1,ns[86]=ns[84]=0,rs[86]=rs[84]=-1,is[86]=is[84]=1,Zo[89]=Zo[81]=0,jo[89]=jo[81]=-1,Mo[89]=Mo[81]=0,es[89]=es[81]=1,ao[89]=ao[81]=0,Vo[89]=Vo[81]=1,Zo[96]=Zo[74]=0,jo[96]=jo[74]=1,Mo[96]=Mo[74]=0,Ko[96]=Ko[74]=-1,Jo[96]=Jo[74]=0,Qo[96]=Qo[74]=1,ns[96]=ns[74]=1,rs[96]=rs[74]=0,is[96]=is[74]=0,Ao[96]=Ao[74]=1,Yo[96]=Yo[74]=0,Ho[96]=Ho[74]=1,Zo[24]=Zo[146]=0,jo[24]=jo[146]=-1,Mo[24]=Mo[146]=1,Uo[24]=Uo[146]=1,ts[24]=ts[146]=0,To[24]=To[146]=1,es[24]=es[146]=0,ao[24]=ao[146]=1,Vo[24]=Vo[146]=1,$o[24]=$o[146]=0,Ro[24]=Ro[146]=-1,Xo[24]=Xo[146]=0,Ko[6]=Ko[164]=-1,Jo[6]=Jo[164]=0,Qo[6]=Qo[164]=1,Uo[6]=Uo[164]=-1,ts[6]=ts[164]=0,To[6]=To[164]=0,No[6]=No[164]=0,os[6]=os[164]=-1,Go[6]=Go[164]=1,ns[6]=ns[164]=1,rs[6]=rs[164]=0,is[6]=is[164]=0,es[129]=es[41]=0,ao[129]=ao[41]=1,Vo[129]=Vo[41]=1,No[129]=No[41]=0,os[129]=os[41]=1,Go[129]=Go[41]=0,Ao[129]=Ao[41]=-1,Yo[129]=Yo[41]=0,Ho[129]=Ho[41]=0,$o[129]=$o[41]=0,Ro[129]=Ro[41]=-1,Xo[129]=Xo[41]=0,Uo[66]=Uo[104]=0,ts[66]=ts[104]=1,To[66]=To[104]=0,es[66]=es[104]=-1,ao[66]=ao[104]=0,Vo[66]=Vo[104]=1,ns[66]=ns[104]=0,rs[66]=rs[104]=-1,is[66]=is[104]=0,Ao[66]=Ao[104]=0,Yo[66]=Yo[104]=-1,Ho[66]=Ho[104]=1,Zo[144]=Zo[26]=-1,jo[144]=jo[26]=0,Mo[144]=Mo[26]=0,No[144]=No[26]=1,os[144]=os[26]=0,Go[144]=Go[26]=1,ns[144]=ns[26]=0,rs[144]=rs[26]=1,is[144]=is[26]=1,$o[144]=$o[26]=-1,Ro[144]=Ro[26]=0,Xo[144]=Xo[26]=1,Ko[36]=Ko[134]=0,Jo[36]=Jo[134]=1,Qo[36]=Qo[134]=1,Uo[36]=Uo[134]=0,ts[36]=ts[134]=1,To[36]=To[134]=0,Ao[36]=Ao[134]=0,Yo[36]=Yo[134]=-1,Ho[36]=Ho[134]=1,$o[36]=$o[134]=1,Ro[36]=Ro[134]=0,Xo[36]=Xo[134]=0,Zo[9]=Zo[161]=-1,jo[9]=jo[161]=0,Mo[9]=Mo[161]=0,Ko[9]=Ko[161]=0,Jo[9]=Jo[161]=-1,Qo[9]=Qo[161]=0,es[9]=es[161]=1,ao[9]=ao[161]=0,Vo[9]=Vo[161]=0,No[9]=No[161]=1,os[9]=os[161]=0,Go[9]=Go[161]=1,Zo[136]=0,jo[136]=1,Mo[136]=1,Ko[136]=0,Jo[136]=1,Qo[136]=0,Uo[136]=-1,ts[136]=0,To[136]=1,es[136]=-1,ao[136]=0,Vo[136]=0,No[136]=0,os[136]=-1,Go[136]=0,ns[136]=0,rs[136]=-1,is[136]=1,Ao[136]=1,Yo[136]=0,Ho[136]=0,$o[136]=1,Ro[136]=0,Xo[136]=1,Zo[34]=0,jo[34]=-1,Mo[34]=0,Ko[34]=0,Jo[34]=-1,Qo[34]=1,Uo[34]=1,ts[34]=0,To[34]=0,es[34]=1,ao[34]=0,Vo[34]=1,No[34]=0,os[34]=1,Go[34]=1,ns[34]=0,rs[34]=1,is[34]=0,Ao[34]=-1,Yo[34]=0,Ho[34]=1,$o[34]=-1,Ro[34]=0,Xo[34]=0,Zo[35]=0,jo[35]=1,Mo[35]=1,Ko[35]=0,Jo[35]=-1,Qo[35]=1,Uo[35]=1,ts[35]=0,To[35]=0,es[35]=-1,ao[35]=0,Vo[35]=0,No[35]=0,os[35]=-1,Go[35]=0,ns[35]=0,rs[35]=1,is[35]=0,Ao[35]=-1,Yo[35]=0,Ho[35]=1,$o[35]=1,Ro[35]=0,Xo[35]=1,Zo[153]=0,jo[153]=1,Mo[153]=1,es[153]=-1,ao[153]=0,Vo[153]=0,No[153]=0,os[153]=-1,Go[153]=0,$o[153]=1,Ro[153]=0,Xo[153]=1,Ko[102]=0,Jo[102]=-1,Qo[102]=1,Uo[102]=1,ts[102]=0,To[102]=0,ns[102]=0,rs[102]=1,is[102]=0,Ao[102]=-1,Yo[102]=0,Ho[102]=1,Zo[155]=0,jo[155]=-1,Mo[155]=0,es[155]=1,ao[155]=0,Vo[155]=1,No[155]=0,os[155]=1,Go[155]=1,$o[155]=-1,Ro[155]=0,Xo[155]=0,Ko[103]=0,Jo[103]=1,Qo[103]=0,Uo[103]=-1,ts[103]=0,To[103]=1,ns[103]=0,rs[103]=-1,is[103]=1,Ao[103]=1,Yo[103]=0,Ho[103]=0,Zo[152]=0,jo[152]=1,Mo[152]=1,Uo[152]=-1,ts[152]=0,To[152]=1,es[152]=-1,ao[152]=0,Vo[152]=0,No[152]=0,os[152]=-1,Go[152]=0,ns[152]=0,rs[152]=-1,is[152]=1,$o[152]=1,Ro[152]=0,Xo[152]=1,Zo[156]=0,jo[156]=-1,Mo[156]=1,Uo[156]=1,ts[156]=0,To[156]=1,es[156]=-1,ao[156]=0,Vo[156]=0,No[156]=0,os[156]=-1,Go[156]=0,ns[156]=0,rs[156]=1,is[156]=1,$o[156]=-1,Ro[156]=0,Xo[156]=1,Zo[137]=0,jo[137]=1,Mo[137]=1,Ko[137]=0,Jo[137]=1,Qo[137]=0,es[137]=-1,ao[137]=0,Vo[137]=0,No[137]=0,os[137]=-1,Go[137]=0,Ao[137]=1,Yo[137]=0,Ho[137]=0,$o[137]=1,Ro[137]=0,Xo[137]=1,Zo[139]=0,jo[139]=1,Mo[139]=1,Ko[139]=0,Jo[139]=-1,Qo[139]=0,es[139]=1,ao[139]=0,Vo[139]=0,No[139]=0,os[139]=1,Go[139]=0,Ao[139]=-1,Yo[139]=0,Ho[139]=0,$o[139]=1,Ro[139]=0,Xo[139]=1,Zo[98]=0,jo[98]=-1,Mo[98]=0,Ko[98]=0,Jo[98]=-1,Qo[98]=1,Uo[98]=1,ts[98]=0,To[98]=0,es[98]=1,ao[98]=0,Vo[98]=1,ns[98]=0,rs[98]=1,is[98]=0,Ao[98]=-1,Yo[98]=0,Ho[98]=1,Zo[99]=0,jo[99]=1,Mo[99]=0,Ko[99]=0,Jo[99]=-1,Qo[99]=1,Uo[99]=1,ts[99]=0,To[99]=0,es[99]=-1,ao[99]=0,Vo[99]=1,ns[99]=0,rs[99]=-1,is[99]=0,Ao[99]=1,Yo[99]=0,Ho[99]=1,Ko[38]=0,Jo[38]=-1,Qo[38]=1,Uo[38]=1,ts[38]=0,To[38]=0,No[38]=0,os[38]=1,Go[38]=1,ns[38]=0,rs[38]=1,is[38]=0,Ao[38]=-1,Yo[38]=0,Ho[38]=1,$o[38]=-1,Ro[38]=0,Xo[38]=0,Ko[39]=0,Jo[39]=1,Qo[39]=1,Uo[39]=-1,ts[39]=0,To[39]=0,No[39]=0,os[39]=-1,Go[39]=1,ns[39]=0,rs[39]=1,is[39]=0,Ao[39]=-1,Yo[39]=0,Ho[39]=1,$o[39]=1,Ro[39]=0,Xo[39]=0;var Um=function(vt){return[[vt.bottomleft,0],[0,0],[0,vt.leftbottom]]},Gm=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0]]},$g=function(vt){return[[vt.topright,1],[1,1],[1,vt.righttop]]},Wm=function(vt){return[[0,vt.lefttop],[0,1],[vt.topleft,1]]},qm=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop]]},Ym=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[1,vt.righttop],[1,vt.rightbottom]]},Xm=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.topleft,1],[vt.topright,1]]},Zm=function(vt){return[[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]},Di=[],Ri=[],Ki=[],Ui=[],io=[],eo=[],ss=[],Wo=[];Ui[1]=io[1]=18,Ui[169]=io[169]=18,Ki[4]=Ri[4]=12,Ki[166]=Ri[166]=12,Di[16]=Wo[16]=4,Di[154]=Wo[154]=4,eo[64]=ss[64]=22,eo[106]=ss[106]=22,Ki[2]=eo[2]=17,Ui[2]=io[2]=18,Ki[168]=eo[168]=17,Ui[168]=io[168]=18,Di[8]=Ui[8]=9,Ri[8]=Ki[8]=12,Di[162]=Ui[162]=9,Ri[162]=Ki[162]=12,Di[32]=Wo[32]=4,Ri[32]=ss[32]=1,Di[138]=Wo[138]=4,Ri[138]=ss[138]=1,io[128]=Wo[128]=21,eo[128]=ss[128]=22,io[42]=Wo[42]=21,eo[42]=ss[42]=22,Ri[5]=io[5]=14,Ri[165]=io[165]=14,Ki[20]=Wo[20]=6,Ki[150]=Wo[150]=6,Di[80]=eo[80]=11,Di[90]=eo[90]=11,Ui[65]=ss[65]=3,Ui[105]=ss[105]=3,Di[160]=eo[160]=11,Ri[160]=io[160]=14,Di[10]=eo[10]=11,Ri[10]=io[10]=14,Ki[130]=Wo[130]=6,Ui[130]=ss[130]=3,Ki[40]=Wo[40]=6,Ui[40]=ss[40]=3,Ri[101]=ss[101]=1,Ri[69]=ss[69]=1,io[149]=Wo[149]=21,io[21]=Wo[21]=21,Ki[86]=eo[86]=17,Ki[84]=eo[84]=17,Di[89]=Ui[89]=9,Di[81]=Ui[81]=9,Di[96]=ss[96]=0,Ri[96]=eo[96]=15,Di[74]=ss[74]=0,Ri[74]=eo[74]=15,Di[24]=Ki[24]=8,Ui[24]=Wo[24]=7,Di[146]=Ki[146]=8,Ui[146]=Wo[146]=7,Ri[6]=eo[6]=15,Ki[6]=io[6]=16,Ri[164]=eo[164]=15,Ki[164]=io[164]=16,Ui[129]=Wo[129]=7,io[129]=ss[129]=20,Ui[41]=Wo[41]=7,io[41]=ss[41]=20,Ki[66]=ss[66]=2,Ui[66]=eo[66]=19,Ki[104]=ss[104]=2,Ui[104]=eo[104]=19,Di[144]=io[144]=10,eo[144]=Wo[144]=23,Di[26]=io[26]=10,eo[26]=Wo[26]=23,Ri[36]=Wo[36]=5,Ki[36]=ss[36]=2,Ri[134]=Wo[134]=5,Ki[134]=ss[134]=2,Di[9]=io[9]=10,Ri[9]=Ui[9]=13,Di[161]=io[161]=10,Ri[161]=Ui[161]=13,Ri[37]=Wo[37]=5,io[37]=ss[37]=20,Ri[133]=Wo[133]=5,io[133]=ss[133]=20,Ki[148]=io[148]=16,eo[148]=Wo[148]=23,Ki[22]=io[22]=16,eo[22]=Wo[22]=23,Di[82]=Ki[82]=8,Ui[82]=eo[82]=19,Di[88]=Ki[88]=8,Ui[88]=eo[88]=19,Di[73]=ss[73]=0,Ri[73]=Ui[73]=13,Di[97]=ss[97]=0,Ri[97]=Ui[97]=13,Di[145]=Ui[145]=9,io[145]=Wo[145]=21,Di[25]=Ui[25]=9,io[25]=Wo[25]=21,Ri[70]=ss[70]=1,Ki[70]=eo[70]=17,Ri[100]=ss[100]=1,Ki[100]=eo[100]=17,Di[34]=Ui[34]=9,Ri[34]=Ki[34]=12,io[34]=Wo[34]=21,eo[34]=ss[34]=22,Di[136]=Wo[136]=4,Ri[136]=ss[136]=1,Ki[136]=eo[136]=17,Ui[136]=io[136]=18,Di[35]=Wo[35]=4,Ri[35]=Ki[35]=12,Ui[35]=io[35]=18,eo[35]=ss[35]=22,Di[153]=Wo[153]=4,Ui[153]=io[153]=18,Ri[102]=Ki[102]=12,eo[102]=ss[102]=22,Di[155]=Ui[155]=9,io[155]=Wo[155]=23,Ri[103]=ss[103]=1,Ki[103]=eo[103]=17,Di[152]=Wo[152]=4,Ki[152]=eo[152]=17,Ui[152]=io[152]=18,Di[156]=Ki[156]=8,Ui[156]=io[156]=18,eo[156]=Wo[156]=23,Di[137]=Wo[137]=4,Ri[137]=ss[137]=1,Ui[137]=io[137]=18,Di[139]=Wo[139]=4,Ri[139]=Ui[139]=13,io[139]=ss[139]=20,Di[98]=Ui[98]=9,Ri[98]=Ki[98]=12,eo[98]=ss[98]=22,Di[99]=ss[99]=0,Ri[99]=Ki[99]=12,Ui[99]=eo[99]=19,Ri[38]=Ki[38]=12,io[38]=Wo[38]=21,eo[38]=ss[38]=22,Ri[39]=Wo[39]=5,Ki[39]=io[39]=16,eo[39]=ss[39]=22;var Ci=[];function qn(vt,_t,wt){return(vt-_t)/(wt-_t)}function Km(vt){return vt.constructor.toString().indexOf("Array")>-1}function yv(vt,_t,wt,Tt,At,Ot){for(var Nt=vt.cells[wt][_t],jt=Nt.cval_real,Gt=_t+Tt,qt=wt+At,en=[],Xt=!1;!Xt;){if(vt.cells[qt]===void 0||vt.cells[qt][Gt]===void 0)if(qt-=At,Gt-=Tt,jt=(Nt=vt.cells[qt][Gt]).cval_real,At===-1)if(Ot===0)if(1&jt)en.push([Gt,qt]),Tt=-1,At=0,Ot=0;else{if(!(4&jt)){en.push([Gt+Nt.bottomright,qt]),Tt=0,At=1,Ot=1,Xt=!0;break}en.push([Gt+1,qt]),Tt=1,At=0,Ot=0}else{if(!(1&jt)){if(4&jt){en.push([Gt+Nt.bottomright,qt]),Tt=0,At=1,Ot=1,Xt=!0;break}en.push([Gt+Nt.bottomleft,qt]),Tt=0,At=1,Ot=0,Xt=!0;break}en.push([Gt,qt]),Tt=-1,At=0,Ot=0}else if(At===1)if(Ot===0){if(!(jt&au)){if(jt&Ca){en.push([Gt+Nt.topleft,qt+1]),Tt=0,At=-1,Ot=0,Xt=!0;break}en.push([Gt+Nt.topright,qt+1]),Tt=0,At=-1,Ot=1,Xt=!0;break}en.push([Gt+1,qt+1]),Tt=1,At=0,Ot=1}else en.push([Gt+1,qt+1]),Tt=1,At=0,Ot=1;else if(Tt===-1)if(Ot===0){if(!(jt&Ca)){if(1&jt){en.push([Gt,qt+Nt.leftbottom]),Tt=1,At=0,Ot=0,Xt=!0;break}en.push([Gt,qt+Nt.lefttop]),Tt=1,At=0,Ot=1,Xt=!0;break}en.push([Gt,qt+1]),Tt=0,At=1,Ot=0}else{if(!(jt&Ca)){console.log("MarchingSquaresJS-isoBands: wtf");break}en.push([Gt,qt+1]),Tt=0,At=1,Ot=0}else{if(Tt!==1){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(Ot===0){if(!(4&jt)){en.push([Gt+1,qt+Nt.rightbottom]),Tt=-1,At=0,Ot=0,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Ot=1}else{if(!(4&jt)){if(jt&au){en.push([Gt+1,qt+Nt.righttop]),Tt=-1,At=0,Ot=1;break}en.push([Gt+1,qt+Nt.rightbottom]),Tt=-1,At=0,Ot=0,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Ot=1}}else if(jt=(Nt=vt.cells[qt][Gt]).cval_real,Tt===-1)if(Ot===0)if(vt.cells[qt-1]!==void 0&&vt.cells[qt-1][Gt]!==void 0)Tt=0,At=-1,Ot=1;else{if(!(1&jt)){en.push([Gt+Nt.bottomright,qt]),Tt=0,At=1,Ot=1,Xt=!0;break}en.push([Gt,qt])}else{if(!(jt&Ca)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+Gt+","+qt);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(Tt===1){if(Ot===0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt+1]!==void 0&&vt.cells[qt+1][Gt]!==void 0)Tt=0,At=1,Ot=0;else{if(!(jt&au)){en.push([Gt+Nt.topleft,qt+1]),Tt=0,At=-1,Ot=0,Xt=!0;break}en.push([Gt+1,qt+1]),Tt=1,At=0,Ot=1}}else if(At===-1){if(Ot!==1){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt][Gt+1]!==void 0)Tt=1,At=0,Ot=1;else{if(!(4&jt)){en.push([Gt+1,qt+Nt.righttop]),Tt=-1,At=0,Ot=1,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Ot=1}}else{if(At!==1){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(Ot!==0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt][Gt-1]!==void 0)Tt=-1,At=0,Ot=0;else{if(!(jt&Ca)){en.push([Gt,qt+Nt.leftbottom]),Tt=1,At=0,Ot=0,Xt=!0;break}en.push([Gt,qt+1]),Tt=0,At=1,Ot=0}}if(qt+=At,(Gt+=Tt)===_t&&qt===wt)break}return{path:en,i:Gt,j:qt,x:Tt,y:At,o:Ot}}function Sp(vt){if(vt.edges.length>0){var _t=vt.edges[vt.edges.length-1],wt=vt.cval_real;switch(_t){case 0:return wt&au?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.topleft,1],x:0,y:-1,o:0};case 1:return 4&wt?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 2:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[vt.topleft,1],x:0,y:-1,o:0};case 3:return 1&wt?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 4:return wt&au?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};case 5:return 4&wt?{p:[vt.topright,1],x:0,y:-1,o:1}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 6:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};case 7:return 1&wt?{p:[vt.topright,1],x:0,y:-1,o:1}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 8:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[1,vt.righttop],x:-1,y:0,o:1};case 9:return 1&wt?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 10:return 1&wt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[1,vt.righttop],x:-1,y:0,o:1};case 11:return wt&Ca?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 12:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 13:return 1&wt?{p:[1,vt.rightbottom],x:-1,y:0,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 14:return 1&wt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 15:return wt&Ca?{p:[1,vt.rightbottom],x:-1,y:0,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 16:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[0,vt.leftbottom],x:1,y:0,o:0};case 17:return wt&Ca?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 18:return 1&wt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 19:return wt&Ca?{p:[vt.bottomleft,0],x:0,y:1,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 20:return wt&Ca?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[0,vt.leftbottom],x:1,y:0,o:0};case 21:return wt&au?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[vt.topright,1],x:0,y:-1,o:1};case 22:return wt&Ca?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 23:return wt&au?{p:[0,vt.lefttop],x:1,y:0,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(vt)}}return null}function vv(vt,_t,wt,Tt){var At,Ot,Nt,jt,Gt,qt=vt.cval;switch(_t){case-1:switch(Tt){case 0:At=Ri[qt],Nt=Ko[qt],jt=Jo[qt],Gt=Qo[qt];break;default:At=Di[qt],Nt=Zo[qt],jt=jo[qt],Gt=Mo[qt]}break;case 1:switch(Tt){case 0:At=io[qt],Nt=No[qt],jt=os[qt],Gt=Go[qt];break;default:At=eo[qt],Nt=ns[qt],jt=rs[qt],Gt=is[qt]}break;default:switch(wt){case-1:switch(Tt){case 0:At=ss[qt],Nt=Ao[qt],jt=Yo[qt],Gt=Ho[qt];break;default:At=Wo[qt],Nt=$o[qt],jt=Ro[qt],Gt=Xo[qt]}break;case 1:switch(Tt){case 0:At=Ui[qt],Nt=es[qt],jt=ao[qt],Gt=Vo[qt];break;default:At=Ki[qt],Nt=Uo[qt],jt=ts[qt],Gt=To[qt]}}}if(Ot=vt.edges.indexOf(At),vt.edges[Ot]===void 0)return null;switch(function(en,Xt){delete en.edges[Xt];for(var sn=Xt+1;sn<en.edges.length;sn++)en.edges[sn-1]=en.edges[sn];en.edges.pop()}(vt,Ot),qt=vt.cval_real,At){case 0:qt&au?(_t=vt.topleft,wt=1):(_t=1,wt=vt.righttop);break;case 1:4&qt?(_t=1,wt=vt.rightbottom):(_t=vt.topleft,wt=1);break;case 2:4&qt?(_t=vt.topleft,wt=1):(_t=vt.bottomright,wt=0);break;case 3:1&qt?(_t=vt.bottomleft,wt=0):(_t=vt.topleft,wt=1);break;case 4:qt&au?(_t=vt.topright,wt=1):(_t=1,wt=vt.righttop);break;case 5:4&qt?(_t=1,wt=vt.rightbottom):(_t=vt.topright,wt=1);break;case 6:4&qt?(_t=vt.topright,wt=1):(_t=vt.bottomright,wt=0);break;case 7:1&qt?(_t=vt.bottomleft,wt=0):(_t=vt.topright,wt=1);break;case 8:4&qt?(_t=1,wt=vt.righttop):(_t=vt.bottomright,wt=0);break;case 9:1&qt?(_t=vt.bottomleft,wt=0):(_t=1,wt=vt.righttop);break;case 10:1&qt?(_t=1,wt=vt.righttop):(_t=0,wt=vt.leftbottom);break;case 11:qt&Ca?(_t=0,wt=vt.lefttop):(_t=1,wt=vt.righttop);break;case 12:4&qt?(_t=1,wt=vt.rightbottom):(_t=vt.bottomright,wt=0);break;case 13:1&qt?(_t=vt.bottomleft,wt=0):(_t=1,wt=vt.rightbottom);break;case 14:1&qt?(_t=1,wt=vt.rightbottom):(_t=0,wt=vt.leftbottom);break;case 15:qt&Ca?(_t=0,wt=vt.lefttop):(_t=1,wt=vt.rightbottom);break;case 16:4&qt?(_t=0,wt=vt.leftbottom):(_t=vt.bottomright,wt=0);break;case 17:qt&Ca?(_t=0,wt=vt.lefttop):(_t=vt.bottomright,wt=0);break;case 18:1&qt?(_t=vt.bottomleft,wt=0):(_t=0,wt=vt.leftbottom);break;case 19:qt&Ca?(_t=0,wt=vt.lefttop):(_t=vt.bottomleft,wt=0);break;case 20:qt&Ca?(_t=0,wt=vt.leftbottom):(_t=vt.topleft,wt=1);break;case 21:qt&au?(_t=vt.topright,wt=1):(_t=0,wt=vt.leftbottom);break;case 22:qt&Ca?(_t=0,wt=vt.lefttop):(_t=vt.topleft,wt=1);break;case 23:qt&au?(_t=vt.topright,wt=1):(_t=0,wt=vt.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(vt),null}return _t!==void 0&&wt!==void 0&&Nt!==void 0&&jt!==void 0&&Gt!==void 0||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(vt),console.log(_t+" "+wt+" "+Nt+" "+jt+" "+Gt)),{p:[_t,wt],x:Nt,y:jt,o:Gt}}function Cp(vt){var _t=[],wt=[];vt.forEach(function(At){var Ot=Bh(Pt([At]));wt.push(Ot),_t.push({ring:At,area:Ot})}),wt.sort(function(At,Ot){return Ot-At});var Tt=[];return wt.forEach(function(At){for(var Ot=0;Ot<_t.length;Ot++)if(_t[Ot].area===At){Tt.push(_t[Ot].ring),_t.splice(Ot,1);break}}),Tt}function _v(vt){for(var _t=vt.map(function(jt){return{lrCoordinates:jt,grouped:!1}}),wt=[];!bv(_t);)for(var Tt=0;Tt<_t.length;Tt++)if(!_t[Tt].grouped){var At=[];At.push(_t[Tt].lrCoordinates),_t[Tt].grouped=!0;for(var Ot=Pt([_t[Tt].lrCoordinates]),Nt=Tt+1;Nt<_t.length;Nt++)_t[Nt].grouped||g1(Pt([_t[Nt].lrCoordinates]),Ot)&&(At.push(_t[Nt].lrCoordinates),_t[Nt].grouped=!0);wt.push(At)}return wt}function g1(vt,_t){for(var wt=pd(vt),Tt=0;Tt<wt.features.length;Tt++)if(!ro(wt.features[Tt],_t))return!1;return!0}function bv(vt){for(var _t=0;_t<vt.length;_t++)if(vt[_t].grouped===!1)return!1;return!0}function m1(vt,_t,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.pivot,At=wt.mutate;if(!vt)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("angle is required");return _t===0||(Tt||(Tt=dc(vt)),At!==!1&&At!==void 0||(vt=Po(vt)),hn(vt,function(Ot){var Nt=sh(Tt,Ot)+_t,jt=Tu(Tt,Ot),Gt=On(bf(Tt,jt,Nt));Ot[0]=Gt[0],Ot[1]=Gt[1]})),vt}function y1(vt,_t,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.origin,At=wt.mutate;if(!vt)throw new Error("geojson required");if(typeof _t!="number"||_t===0)throw new Error("invalid factor");var Ot=Array.isArray(Tt)||typeof Tt=="object";return At!==!0&&(vt=Po(vt)),vt.type!=="FeatureCollection"||Ot?v1(vt,_t,Tt):(nr(vt,function(Nt,jt){vt.features[jt]=v1(Nt,_t,Tt)}),vt)}function v1(vt,_t,wt){var Tt=sr(vt)==="Point";return wt=function(At,Ot){if(Ot==null&&(Ot="centroid"),Array.isArray(Ot)||typeof Ot=="object")return fn(Ot);var Nt=At.bbox?At.bbox:dn(At),jt=Nt[0],Gt=Nt[1],qt=Nt[2],en=Nt[3];switch(Ot){case"sw":case"southwest":case"westsouth":case"bottomleft":return kt([jt,Gt]);case"se":case"southeast":case"eastsouth":case"bottomright":return kt([qt,Gt]);case"nw":case"northwest":case"westnorth":case"topleft":return kt([jt,en]);case"ne":case"northeast":case"eastnorth":case"topright":return kt([qt,en]);case"center":return hc(At);case void 0:case null:case"centroid":return dc(At);default:throw new Error("invalid origin")}}(vt,wt),_t===1||Tt||hn(vt,function(At){var Ot=Tu(wt,At),Nt=sh(wt,At),jt=On(bf(wt,Ot*_t,Nt));At[0]=jt[0],At[1]=jt[1],At.length===3&&(At[2]*=_t)}),vt}function xf(vt){var _t=vt[0],wt=vt[1];return[wt[0]-_t[0],wt[1]-_t[1]]}function Tp(vt,_t){return vt[0]*_t[1]-_t[0]*vt[1]}function Jm(vt,_t){return!function(wt,Tt){return Tp(xf(wt),xf(Tt))===0}(vt,_t)&&function(wt,Tt){var At,Ot,Nt=wt[0],jt=xf(wt),Gt=Tt[0],qt=xf(Tt),en=Tp(jt,qt);return function(Xt,sn){return[Xt[0]+sn[0],Xt[1]+sn[1]]}(Nt,function(Xt,sn){return[Xt*sn[0],Xt*sn[1]]}(Tp((Ot=Nt,[(At=Gt)[0]-Ot[0],At[1]-Ot[1]]),qt)/en,jt))}(vt,_t)}function wf(vt,_t,wt){var Tt=[],At=mn(_t,wt),Ot=On(vt),Nt=[];return Ot.forEach(function(jt,Gt){if(Gt!==Ot.length-1){var qt=(sn=jt,yn=Ot[Gt+1],vn=At,wn=Math.sqrt((sn[0]-yn[0])*(sn[0]-yn[0])+(sn[1]-yn[1])*(sn[1]-yn[1])),un=sn[0]+vn*(yn[1]-sn[1])/wn,Fn=yn[0]+vn*(yn[1]-sn[1])/wn,Qn=sn[1]+vn*(sn[0]-yn[0])/wn,_n=yn[1]+vn*(sn[0]-yn[0])/wn,[[un,Qn],[Fn,_n]]);if(Tt.push(qt),Gt>0){var en=Tt[Gt-1],Xt=Jm(qt,en);Xt!==!1&&(en[1]=Xt,qt[0]=Xt),Nt.push(en[0]),Gt===Ot.length-2&&(Nt.push(qt[0]),Nt.push(qt[1]))}Ot.length===2&&(Nt.push(qt[0]),Nt.push(qt[1]))}var sn,yn,vn,wn,un,Fn,Qn,_n}),Dt(Nt,vt.properties)}function Qm(vt,_t,wt){var Tt=_t[0]-vt[0],At=_t[1]-vt[1],Ot=wt[0]-_t[0];return function(Nt){return(Nt>0)-(Nt<0)||+Nt}(Tt*(wt[1]-_t[1])-Ot*At)}function e0(vt,_t){return _t.geometry.coordinates[0].every(function(wt){return ro(kt(wt),vt)})}Ci[1]=Ci[169]=Um,Ci[4]=Ci[166]=Gm,Ci[16]=Ci[154]=$g,Ci[64]=Ci[106]=Wm,Ci[168]=Ci[2]=qm,Ci[162]=Ci[8]=Ym,Ci[138]=Ci[32]=Xm,Ci[42]=Ci[128]=Zm,Ci[5]=Ci[165]=function(vt){return[[0,0],[0,vt.leftbottom],[1,vt.rightbottom],[1,0]]},Ci[20]=Ci[150]=function(vt){return[[1,0],[vt.bottomright,0],[vt.topright,1],[1,1]]},Ci[80]=Ci[90]=function(vt){return[[1,1],[1,vt.righttop],[0,vt.lefttop],[0,1]]},Ci[65]=Ci[105]=function(vt){return[[vt.bottomleft,0],[0,0],[0,1],[vt.topleft,1]]},Ci[160]=Ci[10]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[0,vt.leftbottom],[0,vt.lefttop]]},Ci[130]=Ci[40]=function(vt){return[[vt.topleft,1],[vt.topright,1],[vt.bottomright,0],[vt.bottomleft,0]]},Ci[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ci[101]=Ci[69]=function(vt){return[[1,vt.rightbottom],[1,0],[0,0],[0,1],[vt.topleft,1]]},Ci[149]=Ci[21]=function(vt){return[[vt.topright,1],[1,1],[1,0],[0,0],[0,vt.leftbottom]]},Ci[86]=Ci[84]=function(vt){return[[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[1,1]]},Ci[89]=Ci[81]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,1]]},Ci[96]=Ci[74]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ci[24]=Ci[146]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[vt.topright,1]]},Ci[6]=Ci[164]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop]]},Ci[129]=Ci[41]=function(vt){return[[vt.topright,1],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topleft,1]]},Ci[66]=Ci[104]=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ci[144]=Ci[26]=function(vt){return[[1,1],[1,vt.righttop],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Ci[36]=Ci[134]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[vt.topleft,1],[vt.topright,1]]},Ci[9]=Ci[161]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,vt.leftbottom]]},Ci[37]=Ci[133]=function(vt){return[[1,vt.rightbottom],[1,0],[0,0],[0,vt.leftbottom],[vt.topleft,1],[vt.topright,1]]},Ci[148]=Ci[22]=function(vt){return[[1,1],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Ci[82]=Ci[88]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1]]},Ci[73]=Ci[97]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,1],[vt.topleft,1]]},Ci[145]=Ci[25]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topright,1]]},Ci[70]=Ci[100]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ci[34]=function(vt){return[Zm(vt),Ym(vt)]},Ci[35]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]},Ci[136]=function(vt){return[Xm(vt),qm(vt)]},Ci[153]=function(vt){return[$g(vt),Um(vt)]},Ci[102]=function(vt){return[Gm(vt),Wm(vt)]},Ci[155]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topright,1]]},Ci[103]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ci[152]=function(vt){return[$g(vt),qm(vt)]},Ci[156]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Ci[137]=function(vt){return[Xm(vt),Um(vt)]},Ci[139]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topleft,1],[vt.topright,1]]},Ci[98]=function(vt){return[Ym(vt),Wm(vt)]},Ci[99]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ci[38]=function(vt){return[Gm(vt),Zm(vt)]},Ci[39]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]};var Rg=function(){function vt(_t){this.id=vt.buildId(_t),this.coordinates=_t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return vt.buildId=function(_t){return _t.join(",")},vt.prototype.removeInnerEdge=function(_t){this.innerEdges=this.innerEdges.filter(function(wt){return wt.from.id!==_t.from.id})},vt.prototype.removeOuterEdge=function(_t){this.outerEdges=this.outerEdges.filter(function(wt){return wt.to.id!==_t.to.id})},vt.prototype.addOuterEdge=function(_t){this.outerEdges.push(_t),this.outerEdgesSorted=!1},vt.prototype.sortOuterEdges=function(){var _t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(wt,Tt){var At=wt.to,Ot=Tt.to;if(At.coordinates[0]-_t.coordinates[0]>=0&&Ot.coordinates[0]-_t.coordinates[0]<0)return 1;if(At.coordinates[0]-_t.coordinates[0]<0&&Ot.coordinates[0]-_t.coordinates[0]>=0)return-1;if(At.coordinates[0]-_t.coordinates[0]==0&&Ot.coordinates[0]-_t.coordinates[0]==0)return At.coordinates[1]-_t.coordinates[1]>=0||Ot.coordinates[1]-_t.coordinates[1]>=0?At.coordinates[1]-Ot.coordinates[1]:Ot.coordinates[1]-At.coordinates[1];var Nt=Qm(_t.coordinates,At.coordinates,Ot.coordinates);return Nt<0?1:Nt>0?-1:Math.pow(At.coordinates[0]-_t.coordinates[0],2)+Math.pow(At.coordinates[1]-_t.coordinates[1],2)-(Math.pow(Ot.coordinates[0]-_t.coordinates[0],2)+Math.pow(Ot.coordinates[1]-_t.coordinates[1],2))}),this.outerEdgesSorted=!0)},vt.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},vt.prototype.getOuterEdge=function(_t){return this.sortOuterEdges(),this.outerEdges[_t]},vt.prototype.addInnerEdge=function(_t){this.innerEdges.push(_t)},vt}(),n0=function(){function vt(_t,wt){this.from=_t,this.to=wt,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return vt.prototype.getSymetric=function(){return this.symetric||(this.symetric=new vt(this.to,this.from),this.symetric.symetric=this),this.symetric},vt.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},vt.prototype.isEqual=function(_t){return this.from.id===_t.from.id&&this.to.id===_t.to.id},vt.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},vt.prototype.toLineString=function(){return Dt([this.from.coordinates,this.to.coordinates])},vt.prototype.compareTo=function(_t){return Qm(_t.from.coordinates,_t.to.coordinates,this.to.coordinates)},vt}(),fl=function(){function vt(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return vt.prototype.push=function(_t){this.edges.push(_t),this.polygon=this.envelope=void 0},vt.prototype.get=function(_t){return this.edges[_t]},Object.defineProperty(vt.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),vt.prototype.forEach=function(_t){this.edges.forEach(_t)},vt.prototype.map=function(_t){return this.edges.map(_t)},vt.prototype.some=function(_t){return this.edges.some(_t)},vt.prototype.isValid=function(){return!0},vt.prototype.isHole=function(){var _t=this,wt=this.edges.reduce(function(Nt,jt,Gt){return jt.from.coordinates[1]>_t.edges[Nt].from.coordinates[1]&&(Nt=Gt),Nt},0),Tt=(wt===0?this.length:wt)-1,At=(wt+1)%this.length,Ot=Qm(this.edges[Tt].from.coordinates,this.edges[wt].from.coordinates,this.edges[At].from.coordinates);return Ot===0?this.edges[Tt].from.coordinates[0]>this.edges[At].from.coordinates[0]:Ot>0},vt.prototype.toMultiPoint=function(){return Zt(this.edges.map(function(_t){return _t.from.coordinates}))},vt.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var _t=this.edges.map(function(wt){return wt.from.coordinates});return _t.push(this.edges[0].from.coordinates),this.polygon=Pt([_t])},vt.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ef(this.toPolygon())},vt.findEdgeRingContaining=function(_t,wt){var Tt,At,Ot=_t.getEnvelope();return wt.forEach(function(Nt){var jt,Gt,qt,en,Xt,sn,yn=Nt.getEnvelope();if(At&&(Tt=At.getEnvelope()),Gt=Ot,qt=(jt=yn).geometry.coordinates[0].map(function(_n){return _n[0]}),en=jt.geometry.coordinates[0].map(function(_n){return _n[1]}),Xt=Gt.geometry.coordinates[0].map(function(_n){return _n[0]}),sn=Gt.geometry.coordinates[0].map(function(_n){return _n[1]}),(Math.max.apply(null,qt)!==Math.max.apply(null,Xt)||Math.max.apply(null,en)!==Math.max.apply(null,sn)||Math.min.apply(null,qt)!==Math.min.apply(null,Xt)||Math.min.apply(null,en)!==Math.min.apply(null,sn))&&e0(yn,Ot)){for(var vn=_t.map(function(_n){return _n.from.coordinates}),wn=void 0,un=function(_n){Nt.some(function(Bn){return Hn=_n,Gn=Bn.from.coordinates,Hn[0]===Gn[0]&&Hn[1]===Gn[1];var Hn,Gn})||(wn=_n)},Fn=0,Qn=vn;Fn<Qn.length;Fn++)un(Qn[Fn]);wn&&Nt.inside(kt(wn))&&(At&&!e0(Tt,yn)||(At=Nt))}}),At},vt.prototype.inside=function(_t){return ro(_t,this.toPolygon())},vt}(),xv=function(){function vt(){this.edges=[],this.nodes={}}return vt.fromGeoJson=function(_t){(function(Tt){if(!Tt)throw new Error("No geojson passed");if(Tt.type!=="FeatureCollection"&&Tt.type!=="GeometryCollection"&&Tt.type!=="MultiLineString"&&Tt.type!=="LineString"&&Tt.type!=="Feature")throw new Error("Invalid input type '"+Tt.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")})(_t);var wt=new vt;return Sr(_t,function(Tt){Nn(Tt,"LineString","Graph::fromGeoJson"),zn(Tt,function(At,Ot){if(At){var Nt=wt.getNode(At),jt=wt.getNode(Ot);wt.addEdge(Nt,jt)}return Ot})}),wt},vt.prototype.getNode=function(_t){var wt=Rg.buildId(_t),Tt=this.nodes[wt];return Tt||(Tt=this.nodes[wt]=new Rg(_t)),Tt},vt.prototype.addEdge=function(_t,wt){var Tt=new n0(_t,wt),At=Tt.getSymetric();this.edges.push(Tt),this.edges.push(At)},vt.prototype.deleteDangles=function(){var _t=this;Object.keys(this.nodes).map(function(wt){return _t.nodes[wt]}).forEach(function(wt){return _t._removeIfDangle(wt)})},vt.prototype._removeIfDangle=function(_t){var wt=this;if(_t.innerEdges.length<=1){var Tt=_t.getOuterEdges().map(function(At){return At.to});this.removeNode(_t),Tt.forEach(function(At){return wt._removeIfDangle(At)})}},vt.prototype.deleteCutEdges=function(){var _t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(wt){wt.label===wt.symetric.label&&(_t.removeEdge(wt.symetric),_t.removeEdge(wt))})},vt.prototype._computeNextCWEdges=function(_t){var wt=this;_t===void 0?Object.keys(this.nodes).forEach(function(Tt){return wt._computeNextCWEdges(wt.nodes[Tt])}):_t.getOuterEdges().forEach(function(Tt,At){_t.getOuterEdge((At===0?_t.getOuterEdges().length:At)-1).symetric.next=Tt})},vt.prototype._computeNextCCWEdges=function(_t,wt){for(var Tt,At,Ot=_t.getOuterEdges(),Nt=Ot.length-1;Nt>=0;--Nt){var jt=Ot[Nt],Gt=jt.symetric,qt=void 0,en=void 0;jt.label===wt&&(qt=jt),Gt.label===wt&&(en=Gt),qt&&en&&(en&&(At=en),qt&&(At&&(At.next=qt,At=void 0),Tt||(Tt=qt)))}At&&(At.next=Tt)},vt.prototype._findLabeledEdgeRings=function(){var _t=[],wt=0;return this.edges.forEach(function(Tt){if(!(Tt.label>=0)){_t.push(Tt);var At=Tt;do At.label=wt,At=At.next;while(!Tt.isEqual(At));wt++}}),_t},vt.prototype.getEdgeRings=function(){var _t=this;this._computeNextCWEdges(),this.edges.forEach(function(Tt){Tt.label=void 0}),this._findLabeledEdgeRings().forEach(function(Tt){_t._findIntersectionNodes(Tt).forEach(function(At){_t._computeNextCCWEdges(At,Tt.label)})});var wt=[];return this.edges.forEach(function(Tt){Tt.ring||wt.push(_t._findEdgeRing(Tt))}),wt},vt.prototype._findIntersectionNodes=function(_t){var wt=[],Tt=_t,At=function(){var Ot=0;Tt.from.getOuterEdges().forEach(function(Nt){Nt.label===_t.label&&++Ot}),Ot>1&&wt.push(Tt.from),Tt=Tt.next};do At();while(!_t.isEqual(Tt));return wt},vt.prototype._findEdgeRing=function(_t){var wt=_t,Tt=new fl;do Tt.push(wt),wt.ring=Tt,wt=wt.next;while(!_t.isEqual(wt));return Tt},vt.prototype.removeNode=function(_t){var wt=this;_t.getOuterEdges().forEach(function(Tt){return wt.removeEdge(Tt)}),_t.innerEdges.forEach(function(Tt){return wt.removeEdge(Tt)}),delete this.nodes[_t.id]},vt.prototype.removeEdge=function(_t){this.edges=this.edges.filter(function(wt){return!wt.isEqual(_t)}),_t.deleteEdge()},vt}();function r0(vt,_t){var wt=!0;return Sr(vt,function(Tt){Sr(_t,function(At){if(wt===!1)return!1;wt=function(Ot,Nt){switch(Ot.type){case"Point":switch(Nt.type){case"Point":return jt=Ot.coordinates,Gt=Nt.coordinates,!(jt[0]===Gt[0]&&jt[1]===Gt[1]);case"LineString":return!_1(Nt,Ot);case"Polygon":return!ro(Ot,Nt)}break;case"LineString":switch(Nt.type){case"Point":return!_1(Ot,Nt);case"LineString":return!function(qt,en){return Vs(qt,en).features.length>0}(Ot,Nt);case"Polygon":return!Mg(Nt,Ot)}break;case"Polygon":switch(Nt.type){case"Point":return!ro(Nt,Ot);case"LineString":return!Mg(Ot,Nt);case"Polygon":return!function(qt,en){for(var Xt=0,sn=qt.coordinates[0];Xt<sn.length;Xt++)if(ro(sn[Xt],en))return!0;for(var yn=0,vn=en.coordinates[0];yn<vn.length;yn++)if(ro(vn[yn],qt))return!0;return Vs(nl(qt),nl(en)).features.length>0}(Nt,Ot)}}var jt,Gt;return!1}(Tt.geometry,At.geometry)})}),wt}function _1(vt,_t){for(var wt=0;wt<vt.coordinates.length-1;wt++)if(wv(vt.coordinates[wt],vt.coordinates[wt+1],_t.coordinates))return!0;return!1}function Mg(vt,_t){for(var wt=0,Tt=_t.coordinates;wt<Tt.length;wt++)if(ro(Tt[wt],vt))return!0;return Vs(_t,nl(vt)).features.length>0}function wv(vt,_t,wt){var Tt=wt[0]-vt[0],At=wt[1]-vt[1],Ot=_t[0]-vt[0],Nt=_t[1]-vt[1];return Tt*Nt-At*Ot==0&&(Math.abs(Ot)>=Math.abs(Nt)?Ot>0?vt[0]<=wt[0]&&wt[0]<=_t[0]:_t[0]<=wt[0]&&wt[0]<=vt[0]:Nt>0?vt[1]<=wt[1]&&wt[1]<=_t[1]:_t[1]<=wt[1]&&wt[1]<=vt[1])}function b1(vt,_t){return!(vt[0]>_t[0])&&!(vt[2]<_t[2])&&!(vt[1]>_t[1])&&!(vt[3]<_t[3])}function i0(vt,_t){return vt[0]===_t[0]&&vt[1]===_t[1]}function Ev(vt,_t){return[(vt[0]+_t[0])/2,(vt[1]+_t[1])/2]}function x1(vt,_t){for(var wt=!1,Tt=!1,At=vt.coordinates.length,Ot=0;Ot<At&&!wt&&!Tt;){for(var Nt=0;Nt<_t.coordinates.length-1;Nt++){var jt=!0;Nt!==0&&Nt!==_t.coordinates.length-2||(jt=!1),E1(_t.coordinates[Nt],_t.coordinates[Nt+1],vt.coordinates[Ot],jt)?wt=!0:Tt=!0}Ot++}return wt&&Tt}function w1(vt,_t){return Vs(vt,dl(_t)).features.length>0}function o0(vt,_t){for(var wt=!1,Tt=!1,At=vt.coordinates.length,Ot=0;Ot<At&&(!wt||!Tt);Ot++)ro(kt(vt.coordinates[Ot]),_t)?wt=!0:Tt=!0;return Tt&&wt}function E1(vt,_t,wt,Tt){var At=wt[0]-vt[0],Ot=wt[1]-vt[1],Nt=_t[0]-vt[0],jt=_t[1]-vt[1];return At*jt-Ot*Nt==0&&(Tt?Math.abs(Nt)>=Math.abs(jt)?Nt>0?vt[0]<=wt[0]&&wt[0]<=_t[0]:_t[0]<=wt[0]&&wt[0]<=vt[0]:jt>0?vt[1]<=wt[1]&&wt[1]<=_t[1]:_t[1]<=wt[1]&&wt[1]<=vt[1]:Math.abs(Nt)>=Math.abs(jt)?Nt>0?vt[0]<wt[0]&&wt[0]<_t[0]:_t[0]<wt[0]&&wt[0]<vt[0]:jt>0?vt[1]<wt[1]&&wt[1]<_t[1]:_t[1]<wt[1]&&wt[1]<vt[1])}var Iu=function(vt){this.precision=vt&&vt.precision?vt.precision:17,this.direction=!(!vt||!vt.direction)&&vt.direction,this.pseudoNode=!(!vt||!vt.pseudoNode)&&vt.pseudoNode,this.objectComparator=vt&&vt.objectComparator?vt.objectComparator:Sv};function Wh(vt){return vt.coordinates.map(function(_t){return{type:vt.type.replace("Multi",""),coordinates:_t}})}function ch(vt,_t){return vt.hasOwnProperty("coordinates")?vt.coordinates.length===_t.coordinates.length:vt.length===_t.length}function Sv(vt,_t){return Vh(vt,_t,{strict:!0})}Iu.prototype.compare=function(vt,_t){if(vt.type!==_t.type||!ch(vt,_t))return!1;switch(vt.type){case"Point":return this.compareCoord(vt.coordinates,_t.coordinates);case"LineString":return this.compareLine(vt.coordinates,_t.coordinates,0,!1);case"Polygon":return this.comparePolygon(vt,_t);case"Feature":return this.compareFeature(vt,_t);default:if(vt.type.indexOf("Multi")===0){var wt=this,Tt=Wh(vt),At=Wh(_t);return Tt.every(function(Ot){return this.some(function(Nt){return wt.compare(Ot,Nt)})},At)}}return!1},Iu.prototype.compareCoord=function(vt,_t){if(vt.length!==_t.length)return!1;for(var wt=0;wt<vt.length;wt++)if(vt[wt].toFixed(this.precision)!==_t[wt].toFixed(this.precision))return!1;return!0},Iu.prototype.compareLine=function(vt,_t,wt,Tt){if(!ch(vt,_t))return!1;var At=this.pseudoNode?vt:this.removePseudo(vt),Ot=this.pseudoNode?_t:this.removePseudo(_t);if(!Tt||this.compareCoord(At[0],Ot[0])||(Ot=this.fixStartIndex(Ot,At))){var Nt=this.compareCoord(At[wt],Ot[wt]);return this.direction||Nt?this.comparePath(At,Ot):!!this.compareCoord(At[wt],Ot[Ot.length-(1+wt)])&&this.comparePath(At.slice().reverse(),Ot)}},Iu.prototype.fixStartIndex=function(vt,_t){for(var wt,Tt=-1,At=0;At<vt.length;At++)if(this.compareCoord(vt[At],_t[0])){Tt=At;break}return Tt>=0&&(wt=[].concat(vt.slice(Tt,vt.length),vt.slice(1,Tt+1))),wt},Iu.prototype.comparePath=function(vt,_t){var wt=this;return vt.every(function(Tt,At){return wt.compareCoord(Tt,this[At])},_t)},Iu.prototype.comparePolygon=function(vt,_t){if(this.compareLine(vt.coordinates[0],_t.coordinates[0],1,!0)){var wt=vt.coordinates.slice(1,vt.coordinates.length),Tt=_t.coordinates.slice(1,_t.coordinates.length),At=this;return wt.every(function(Ot){return this.some(function(Nt){return At.compareLine(Ot,Nt,1,!0)})},Tt)}return!1},Iu.prototype.compareFeature=function(vt,_t){return!(vt.id!==_t.id||!this.objectComparator(vt.properties,_t.properties)||!this.compareBBox(vt,_t))&&this.compare(vt.geometry,_t.geometry)},Iu.prototype.compareBBox=function(vt,_t){return!!(!vt.bbox&&!_t.bbox||vt.bbox&&_t.bbox&&this.compareCoord(vt.bbox,_t.bbox))},Iu.prototype.removePseudo=function(vt){return vt};var s0=Iu;function S1(vt,_t){var wt=!1;return Sr(vt,function(Tt){Sr(_t,function(At){if(wt===!0)return!0;wt=!r0(Tt.geometry,At.geometry)})}),wt}var Cv=xs(function(vt){function _t(wt,Tt,At,Ot){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(wt,Tt,At,Ot)}_t.prototype.run=function(wt,Tt,At,Ot){this._init(wt,Tt,At,Ot);for(var Nt=0;Nt<this._datasetLength;Nt++)if(this._visited[Nt]!==1){this._visited[Nt]=1;var jt=this._regionQuery(Nt);if(jt.length<this.minPts)this.noise.push(Nt);else{var Gt=this.clusters.length;this.clusters.push([]),this._addToCluster(Nt,Gt),this._expandCluster(Gt,jt)}}return this.clusters},_t.prototype._init=function(wt,Tt,At,Ot){if(wt){if(!(wt instanceof Array))throw Error("Dataset must be of type array, "+typeof wt+" given");this.dataset=wt,this.clusters=[],this.noise=[],this._datasetLength=wt.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}Tt&&(this.epsilon=Tt),At&&(this.minPts=At),Ot&&(this.distance=Ot)},_t.prototype._expandCluster=function(wt,Tt){for(var At=0;At<Tt.length;At++){var Ot=Tt[At];if(this._visited[Ot]!==1){this._visited[Ot]=1;var Nt=this._regionQuery(Ot);Nt.length>=this.minPts&&(Tt=this._mergeArrays(Tt,Nt))}this._assigned[Ot]!==1&&this._addToCluster(Ot,wt)}},_t.prototype._addToCluster=function(wt,Tt){this.clusters[Tt].push(wt),this._assigned[wt]=1},_t.prototype._regionQuery=function(wt){for(var Tt=[],At=0;At<this._datasetLength;At++)this.distance(this.dataset[wt],this.dataset[At])<this.epsilon&&Tt.push(At);return Tt},_t.prototype._mergeArrays=function(wt,Tt){for(var At=Tt.length,Ot=0;Ot<At;Ot++){var Nt=Tt[Ot];wt.indexOf(Nt)<0&&wt.push(Nt)}return wt},_t.prototype._euclideanDistance=function(wt,Tt){for(var At=0,Ot=Math.min(wt.length,Tt.length);Ot--;)At+=(wt[Ot]-Tt[Ot])*(wt[Ot]-Tt[Ot]);return Math.sqrt(At)},vt.exports&&(vt.exports=_t)}),Tv=xs(function(vt){function _t(wt,Tt,At){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(wt,Tt,At)}_t.prototype.init=function(wt,Tt,At){this.assignments=[],this.centroids=[],wt!==void 0&&(this.dataset=wt),Tt!==void 0&&(this.k=Tt),At!==void 0&&(this.distance=At)},_t.prototype.run=function(wt,Tt){this.init(wt,Tt);for(var At=this.dataset.length,Ot=0;Ot<this.k;Ot++)this.centroids[Ot]=this.randomCentroid();for(var Nt=!0;Nt;){Nt=this.assign();for(var jt=0;jt<this.k;jt++){for(var Gt=new Array(sn),qt=0,en=0;en<sn;en++)Gt[en]=0;for(var Xt=0;Xt<At;Xt++){var sn=this.dataset[Xt].length;if(jt===this.assignments[Xt]){for(en=0;en<sn;en++)Gt[en]+=this.dataset[Xt][en];qt++}}if(qt>0){for(en=0;en<sn;en++)Gt[en]/=qt;this.centroids[jt]=Gt}else this.centroids[jt]=this.randomCentroid(),Nt=!0}}return this.getClusters()},_t.prototype.randomCentroid=function(){var wt,Tt,At=this.dataset.length-1;do Tt=Math.round(Math.random()*At),wt=this.dataset[Tt];while(this.centroids.indexOf(wt)>=0);return wt},_t.prototype.assign=function(){for(var wt,Tt=!1,At=this.dataset.length,Ot=0;Ot<At;Ot++)(wt=this.argmin(this.dataset[Ot],this.centroids,this.distance))!=this.assignments[Ot]&&(this.assignments[Ot]=wt,Tt=!0);return Tt},_t.prototype.getClusters=function(){for(var wt,Tt=new Array(this.k),At=0;At<this.assignments.length;At++)Tt[wt=this.assignments[At]]===void 0&&(Tt[wt]=[]),Tt[wt].push(At);return Tt},_t.prototype.argmin=function(wt,Tt,At){for(var Ot,Nt=Number.MAX_VALUE,jt=0,Gt=Tt.length,qt=0;qt<Gt;qt++)(Ot=At(wt,Tt[qt]))<Nt&&(Nt=Ot,jt=qt);return jt},_t.prototype.distance=function(wt,Tt){for(var At=0,Ot=Math.min(wt.length,Tt.length);Ot--;){var Nt=wt[Ot]-Tt[Ot];At+=Nt*Nt}return Math.sqrt(At)},vt.exports&&(vt.exports=_t)}),C1=xs(function(vt){function _t(wt,Tt,At){this._queue=[],this._priorities=[],this._sorting="desc",this._init(wt,Tt,At)}_t.prototype.insert=function(wt,Tt){for(var At=this._queue.length,Ot=At;Ot--;){var Nt=this._priorities[Ot];this._sorting==="desc"?Tt>Nt&&(At=Ot):Tt<Nt&&(At=Ot)}this._insertAt(wt,Tt,At)},_t.prototype.remove=function(wt){for(var Tt=this._queue.length;Tt--;)if(wt===this._queue[Tt]){this._queue.splice(Tt,1),this._priorities.splice(Tt,1);break}},_t.prototype.forEach=function(wt){this._queue.forEach(wt)},_t.prototype.getElements=function(){return this._queue},_t.prototype.getElementPriority=function(wt){return this._priorities[wt]},_t.prototype.getPriorities=function(){return this._priorities},_t.prototype.getElementsWithPriorities=function(){for(var wt=[],Tt=0,At=this._queue.length;Tt<At;Tt++)wt.push([this._queue[Tt],this._priorities[Tt]]);return wt},_t.prototype._init=function(wt,Tt,At){if(wt&&Tt){if(this._queue=[],this._priorities=[],wt.length!==Tt.length)throw new Error("Arrays must have the same length");for(var Ot=0;Ot<wt.length;Ot++)this.insert(wt[Ot],Tt[Ot])}At&&(this._sorting=At)},_t.prototype._insertAt=function(wt,Tt,At){this._queue.length===At?(this._queue.push(wt),this._priorities.push(Tt)):(this._queue.splice(At,0,wt),this._priorities.splice(At,0,Tt))},vt.exports&&(vt.exports=_t)}),kv=xs(function(vt){if(vt.exports)var _t=C1;function wt(Tt,At,Ot,Nt){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Tt,At,Ot,Nt)}wt.prototype.run=function(Tt,At,Ot,Nt){this._init(Tt,At,Ot,Nt);for(var jt=0,Gt=this.dataset.length;jt<Gt;jt++)if(this._processed[jt]!==1){this._processed[jt]=1,this.clusters.push([jt]);var qt=this.clusters.length-1;this._orderedList.push(jt);var en=new _t(null,null,"asc"),Xt=this._regionQuery(jt);this._distanceToCore(jt)!==void 0&&(this._updateQueue(jt,Xt,en),this._expandCluster(qt,en))}return this.clusters},wt.prototype.getReachabilityPlot=function(){for(var Tt=[],At=0,Ot=this._orderedList.length;At<Ot;At++){var Nt=this._orderedList[At],jt=this._reachability[Nt];Tt.push([Nt,jt])}return Tt},wt.prototype._init=function(Tt,At,Ot,Nt){if(Tt){if(!(Tt instanceof Array))throw Error("Dataset must be of type array, "+typeof Tt+" given");this.dataset=Tt,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}At&&(this.epsilon=At),Ot&&(this.minPts=Ot),Nt&&(this.distance=Nt)},wt.prototype._updateQueue=function(Tt,At,Ot){var Nt=this;this._coreDistance=this._distanceToCore(Tt),At.forEach(function(jt){if(Nt._processed[jt]===void 0){var Gt=Nt.distance(Nt.dataset[Tt],Nt.dataset[jt]),qt=Math.max(Nt._coreDistance,Gt);Nt._reachability[jt]===void 0?(Nt._reachability[jt]=qt,Ot.insert(jt,qt)):qt<Nt._reachability[jt]&&(Nt._reachability[jt]=qt,Ot.remove(jt),Ot.insert(jt,qt))}})},wt.prototype._expandCluster=function(Tt,At){for(var Ot=At.getElements(),Nt=0,jt=Ot.length;Nt<jt;Nt++){var Gt=Ot[Nt];if(this._processed[Gt]===void 0){var qt=this._regionQuery(Gt);this._processed[Gt]=1,this.clusters[Tt].push(Gt),this._orderedList.push(Gt),this._distanceToCore(Gt)!==void 0&&(this._updateQueue(Gt,qt,At),this._expandCluster(Tt,At))}}},wt.prototype._distanceToCore=function(Tt){for(var At=this.epsilon,Ot=0;Ot<At;Ot++)if(this._regionQuery(Tt,Ot).length>=this.minPts)return Ot},wt.prototype._regionQuery=function(Tt,At){At=At||this.epsilon;for(var Ot=[],Nt=0,jt=this.dataset.length;Nt<jt;Nt++)this.distance(this.dataset[Tt],this.dataset[Nt])<At&&Ot.push(Nt);return Ot},wt.prototype._euclideanDistance=function(Tt,At){for(var Ot=0,Nt=Math.min(Tt.length,At.length);Nt--;)Ot+=(Tt[Nt]-At[Nt])*(Tt[Nt]-At[Nt]);return Math.sqrt(Ot)},vt.exports&&(vt.exports=wt)}),Av=xs(function(vt){vt.exports&&(vt.exports={DBSCAN:Cv,KMEANS:Tv,OPTICS:kv,PriorityQueue:C1})}),a0=function(vt,_t,wt){for(var Tt=vt.length,At=0,Ot=0;Ot<Tt;Ot++){var Nt=(vt[Ot]||0)-(_t[Ot]||0);At+=Nt*Nt}return wt?Math.sqrt(At):At},Lv=a0,kp=function(vt,_t,wt){var Tt=Math.abs(vt-_t);return wt?Tt:Tt*Tt},l0=a0,T1=function(vt,_t){for(var wt={},Tt=[],At=_t<<2,Ot=vt.length,Nt=vt[0].length>0;Tt.length<_t&&At-- >0;){var jt=vt[Math.floor(Math.random()*Ot)],Gt=Nt?jt.join("_"):""+jt;wt[Gt]||(wt[Gt]=!0,Tt.push(jt))}if(Tt.length<_t)throw new Error("Error initializating clusters");return Tt},Iv=function(vt,_t){var wt=vt[0].length?Lv:kp,Tt=[],At=vt.length,Ot=vt[0].length>0,Nt=vt[Math.floor(Math.random()*At)];for(Ot&&Nt.join("_"),Tt.push(Nt);Tt.length<_t;){for(var jt=[],Gt=Tt.length,qt=0,en=[],Xt=0;Xt<At;Xt++){for(var sn=1/0,yn=0;yn<Gt;yn++){var vn=wt(vt[Xt],Tt[yn]);vn<=sn&&(sn=vn)}jt[Xt]=sn}for(var wn=0;wn<At;wn++)qt+=jt[wn];for(var un=0;un<At;un++)en[un]={i:un,v:vt[un],pr:jt[un]/qt,cs:0};en.sort(function(Bn,Hn){return Bn.pr-Hn.pr}),en[0].cs=en[0].pr;for(var Fn=1;Fn<At;Fn++)en[Fn].cs=en[Fn-1].cs+en[Fn].pr;for(var Qn=Math.random(),_n=0;_n<At-1&&en[_n++].cs<Qn;);Tt.push(en[_n-1].v)}return Tt};function k1(vt,_t,wt){wt=wt||[];for(var Tt=0;Tt<vt;Tt++)wt[Tt]=_t;return wt}var c0=function(vt,_t,wt,Tt){var At=[],Ot=[],Nt=[],jt=[],Gt=!1,qt=Tt||1e4,en=vt.length,Xt=vt[0].length,sn=Xt>0,yn=[];if(wt)At=wt=="kmrand"?T1(vt,_t):wt=="kmpp"?Iv(vt,_t):wt;else for(var vn={};At.length<_t;){var wn=Math.floor(Math.random()*en);vn[wn]||(vn[wn]=!0,At.push(vt[wn]))}do{k1(_t,0,yn);for(var un=0;un<en;un++){for(var Fn=1/0,Qn=0,_n=0;_n<_t;_n++)(jt=sn?l0(vt[un],At[_n]):Math.abs(vt[un]-At[_n]))<=Fn&&(Fn=jt,Qn=_n);Nt[un]=Qn,yn[Qn]++}for(var Bn=[],Hn=(Ot=[],0);Hn<_t;Hn++)Bn[Hn]=sn?k1(Xt,0,Bn[Hn]):0,Ot[Hn]=At[Hn];if(sn){for(var Gn=0;Gn<_t;Gn++)At[Gn]=[];for(var Vn=0;Vn<en;Vn++)for(var Ur=Bn[Nt[Vn]],$r=vt[Vn],Yr=0;Yr<Xt;Yr++)Ur[Yr]+=$r[Yr];Gt=!0;for(var Mr=0;Mr<_t;Mr++){for(var Qr=At[Mr],Hr=Bn[Mr],Br=Ot[Mr],Nr=yn[Mr],Xr=0;Xr<Xt;Xr++)Qr[Xr]=Hr[Xr]/Nr||0;if(Gt){for(var jr=0;jr<Xt;jr++)if(Br[jr]!=Qr[jr]){Gt=!1;break}}}}else{for(var ei=0;ei<en;ei++)Bn[Nt[ei]]+=vt[ei];for(var xr=0;xr<_t;xr++)At[xr]=Bn[xr]/yn[xr]||0;Gt=!0;for(var zi=0;zi<_t;zi++)if(Ot[zi]!=At[zi]){Gt=!1;break}}Gt=Gt||--qt<=0}while(!Gt);return{it:1e4-qt,k:_t,idxs:Nt,centroids:At}};function Ng(vt,_t){return gn(sh(vt[0],vt[1]))===gn(sh(_t[0],_t[1]))}function u0(vt,_t){if(vt.geometry&&vt.geometry.type)return vt.geometry.type;if(vt.type)return vt.type;throw new Error("Invalid GeoJSON object for "+_t)}function A1(vt){for(var _t=vt,wt=[];_t.parent;)wt.unshift(_t),_t=_t.parent;return wt}var Dg={search:function(vt,_t,wt,Tt){vt.cleanDirty();var At=(Tt=Tt||{}).heuristic||Dg.heuristics.manhattan,Ot=Tt.closest||!1,Nt=new h0(function(wn){return wn.f}),jt=_t;for(_t.h=At(_t,wt),Nt.push(_t);Nt.size()>0;){var Gt=Nt.pop();if(Gt===wt)return A1(Gt);Gt.closed=!0;for(var qt=vt.neighbors(Gt),en=0,Xt=qt.length;en<Xt;++en){var sn=qt[en];if(!sn.closed&&!sn.isWall()){var yn=Gt.g+sn.getCost(Gt),vn=sn.visited;(!vn||yn<sn.g)&&(sn.visited=!0,sn.parent=Gt,sn.h=sn.h||At(sn,wt),sn.g=yn,sn.f=sn.g+sn.h,vt.markDirty(sn),Ot&&(sn.h<jt.h||sn.h===jt.h&&sn.g<jt.g)&&(jt=sn),vn?Nt.rescoreElement(sn):Nt.push(sn))}}}return Ot?A1(jt):[]},heuristics:{manhattan:function(vt,_t){return Math.abs(_t.x-vt.x)+Math.abs(_t.y-vt.y)},diagonal:function(vt,_t){var wt=Math.sqrt(2),Tt=Math.abs(_t.x-vt.x),At=Math.abs(_t.y-vt.y);return 1*(Tt+At)+(wt-2)*Math.min(Tt,At)}},cleanNode:function(vt){vt.f=0,vt.g=0,vt.h=0,vt.visited=!1,vt.closed=!1,vt.parent=null}};function qh(vt,_t){_t=_t||{},this.nodes=[],this.diagonal=!!_t.diagonal,this.grid=[];for(var wt=0;wt<vt.length;wt++){this.grid[wt]=[];for(var Tt=0,At=vt[wt];Tt<At.length;Tt++){var Ot=new Bg(wt,Tt,At[Tt]);this.grid[wt][Tt]=Ot,this.nodes.push(Ot)}}this.init()}function Bg(vt,_t,wt){this.x=vt,this.y=_t,this.weight=wt}function h0(vt){this.content=[],this.scoreFunction=vt}function Pv(vt,_t){for(var wt=0;wt<_t.features.length;wt++)if(ro(vt,_t.features[wt]))return!0;return!1}function L1(vt){return function(){return vt}}function Ov(vt){return vt[0]}function I1(vt){return vt[1]}function Fg(){this._=null}function Ap(vt){vt.U=vt.C=vt.L=vt.R=vt.P=vt.N=null}function Lp(vt,_t){var wt=_t,Tt=_t.R,At=wt.U;At?At.L===wt?At.L=Tt:At.R=Tt:vt._=Tt,Tt.U=At,wt.U=Tt,wt.R=Tt.L,wt.R&&(wt.R.U=wt),Tt.L=wt}function Ip(vt,_t){var wt=_t,Tt=_t.L,At=wt.U;At?At.L===wt?At.L=Tt:At.R=Tt:vt._=Tt,Tt.U=At,wt.U=Tt,wt.L=Tt.R,wt.L&&(wt.L.U=wt),Tt.R=wt}function P1(vt){for(;vt.L;)vt=vt.L;return vt}function Ef(vt,_t,wt,Tt){var At=[null,null],Ot=kl.push(At)-1;return At.left=vt,At.right=_t,wt&&Sf(At,vt,_t,wt),Tt&&Sf(At,_t,vt,Tt),gc[vt.index].halfedges.push(Ot),gc[_t.index].halfedges.push(Ot),At}function Pu(vt,_t,wt){var Tt=[_t,wt];return Tt.left=vt,Tt}function Sf(vt,_t,wt,Tt){vt[0]||vt[1]?vt.left===wt?vt[1]=Tt:vt[0]=Tt:(vt[0]=Tt,vt.left=_t,vt.right=wt)}function zg(vt,_t,wt,Tt,At){var Ot,Nt=vt[0],jt=vt[1],Gt=Nt[0],qt=Nt[1],en=0,Xt=1,sn=jt[0]-Gt,yn=jt[1]-qt;if(Ot=_t-Gt,sn||!(Ot>0)){if(Ot/=sn,sn<0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}else if(sn>0){if(Ot>Xt)return;Ot>en&&(en=Ot)}if(Ot=Tt-Gt,sn||!(Ot<0)){if(Ot/=sn,sn<0){if(Ot>Xt)return;Ot>en&&(en=Ot)}else if(sn>0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}if(Ot=wt-qt,yn||!(Ot>0)){if(Ot/=yn,yn<0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}else if(yn>0){if(Ot>Xt)return;Ot>en&&(en=Ot)}if(Ot=At-qt,yn||!(Ot<0)){if(Ot/=yn,yn<0){if(Ot>Xt)return;Ot>en&&(en=Ot)}else if(yn>0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}return!(en>0||Xt<1)||(en>0&&(vt[0]=[Gt+en*sn,qt+en*yn]),Xt<1&&(vt[1]=[Gt+Xt*sn,qt+Xt*yn]),!0)}}}}}function $v(vt,_t,wt,Tt,At){var Ot=vt[1];if(Ot)return!0;var Nt,jt,Gt=vt[0],qt=vt.left,en=vt.right,Xt=qt[0],sn=qt[1],yn=en[0],vn=en[1],wn=(Xt+yn)/2,un=(sn+vn)/2;if(vn===sn){if(wn<_t||wn>=Tt)return;if(Xt>yn){if(Gt){if(Gt[1]>=At)return}else Gt=[wn,wt];Ot=[wn,At]}else{if(Gt){if(Gt[1]<wt)return}else Gt=[wn,At];Ot=[wn,wt]}}else if(jt=un-(Nt=(Xt-yn)/(vn-sn))*wn,Nt<-1||Nt>1)if(Xt>yn){if(Gt){if(Gt[1]>=At)return}else Gt=[(wt-jt)/Nt,wt];Ot=[(At-jt)/Nt,At]}else{if(Gt){if(Gt[1]<wt)return}else Gt=[(At-jt)/Nt,At];Ot=[(wt-jt)/Nt,wt]}else if(sn<vn){if(Gt){if(Gt[0]>=Tt)return}else Gt=[_t,Nt*_t+jt];Ot=[Tt,Nt*Tt+jt]}else{if(Gt){if(Gt[0]<_t)return}else Gt=[Tt,Nt*Tt+jt];Ot=[_t,Nt*_t+jt]}return vt[0]=Gt,vt[1]=Ot,!0}function d0(vt,_t){var wt=vt.site,Tt=_t.left,At=_t.right;return wt===At&&(At=Tt,Tt=wt),At?Math.atan2(At[1]-Tt[1],At[0]-Tt[0]):(wt===Tt?(Tt=_t[1],At=_t[0]):(Tt=_t[0],At=_t[1]),Math.atan2(Tt[0]-At[0],At[1]-Tt[1]))}function O1(vt,_t){return _t[+(_t.left!==vt.site)]}function Rv(vt,_t){return _t[+(_t.left===vt.site)]}qh.prototype.init=function(){this.dirtyNodes=[];for(var vt=0;vt<this.nodes.length;vt++)Dg.cleanNode(this.nodes[vt])},qh.prototype.cleanDirty=function(){for(var vt=0;vt<this.dirtyNodes.length;vt++)Dg.cleanNode(this.dirtyNodes[vt]);this.dirtyNodes=[]},qh.prototype.markDirty=function(vt){this.dirtyNodes.push(vt)},qh.prototype.neighbors=function(vt){var _t=[],wt=vt.x,Tt=vt.y,At=this.grid;return At[wt-1]&&At[wt-1][Tt]&&_t.push(At[wt-1][Tt]),At[wt+1]&&At[wt+1][Tt]&&_t.push(At[wt+1][Tt]),At[wt]&&At[wt][Tt-1]&&_t.push(At[wt][Tt-1]),At[wt]&&At[wt][Tt+1]&&_t.push(At[wt][Tt+1]),this.diagonal&&(At[wt-1]&&At[wt-1][Tt-1]&&_t.push(At[wt-1][Tt-1]),At[wt+1]&&At[wt+1][Tt-1]&&_t.push(At[wt+1][Tt-1]),At[wt-1]&&At[wt-1][Tt+1]&&_t.push(At[wt-1][Tt+1]),At[wt+1]&&At[wt+1][Tt+1]&&_t.push(At[wt+1][Tt+1])),_t},qh.prototype.toString=function(){for(var vt,_t,wt,Tt,At=[],Ot=this.grid,Nt=0,jt=Ot.length;Nt<jt;Nt++){for(vt=[],wt=0,Tt=(_t=Ot[Nt]).length;wt<Tt;wt++)vt.push(_t[wt].weight);At.push(vt.join(" "))}return At.join(`
`)},Bg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Bg.prototype.getCost=function(vt){return vt&&vt.x!==this.x&&vt.y!==this.y?1.41421*this.weight:this.weight},Bg.prototype.isWall=function(){return this.weight===0},h0.prototype={push:function(vt){this.content.push(vt),this.sinkDown(this.content.length-1)},pop:function(){var vt=this.content[0],_t=this.content.pop();return this.content.length>0&&(this.content[0]=_t,this.bubbleUp(0)),vt},remove:function(vt){var _t=this.content.indexOf(vt),wt=this.content.pop();_t!==this.content.length-1&&(this.content[_t]=wt,this.scoreFunction(wt)<this.scoreFunction(vt)?this.sinkDown(_t):this.bubbleUp(_t))},size:function(){return this.content.length},rescoreElement:function(vt){this.sinkDown(this.content.indexOf(vt))},sinkDown:function(vt){for(var _t=this.content[vt];vt>0;){var wt=(vt+1>>1)-1,Tt=this.content[wt];if(!(this.scoreFunction(_t)<this.scoreFunction(Tt)))break;this.content[wt]=_t,this.content[vt]=Tt,vt=wt}},bubbleUp:function(vt){for(var _t=this.content.length,wt=this.content[vt],Tt=this.scoreFunction(wt);;){var At,Ot=vt+1<<1,Nt=Ot-1,jt=null;if(Nt<_t){var Gt=this.content[Nt];(At=this.scoreFunction(Gt))<Tt&&(jt=Nt)}if(Ot<_t){var qt=this.content[Ot];this.scoreFunction(qt)<(jt===null?Tt:At)&&(jt=Ot)}if(jt===null)break;this.content[vt]=this.content[jt],this.content[jt]=wt,vt=jt}}},Fg.prototype={constructor:Fg,insert:function(vt,_t){var wt,Tt,At;if(vt){if(_t.P=vt,_t.N=vt.N,vt.N&&(vt.N.P=_t),vt.N=_t,vt.R){for(vt=vt.R;vt.L;)vt=vt.L;vt.L=_t}else vt.R=_t;wt=vt}else this._?(vt=P1(this._),_t.P=null,_t.N=vt,vt.P=vt.L=_t,wt=vt):(_t.P=_t.N=null,this._=_t,wt=null);for(_t.L=_t.R=null,_t.U=wt,_t.C=!0,vt=_t;wt&&wt.C;)wt===(Tt=wt.U).L?(At=Tt.R)&&At.C?(wt.C=At.C=!1,Tt.C=!0,vt=Tt):(vt===wt.R&&(Lp(this,wt),wt=(vt=wt).U),wt.C=!1,Tt.C=!0,Ip(this,Tt)):(At=Tt.L)&&At.C?(wt.C=At.C=!1,Tt.C=!0,vt=Tt):(vt===wt.L&&(Ip(this,wt),wt=(vt=wt).U),wt.C=!1,Tt.C=!0,Lp(this,Tt)),wt=vt.U;this._.C=!1},remove:function(vt){vt.N&&(vt.N.P=vt.P),vt.P&&(vt.P.N=vt.N),vt.N=vt.P=null;var _t,wt,Tt,At=vt.U,Ot=vt.L,Nt=vt.R;if(wt=Ot?Nt?P1(Nt):Ot:Nt,At?At.L===vt?At.L=wt:At.R=wt:this._=wt,Ot&&Nt?(Tt=wt.C,wt.C=vt.C,wt.L=Ot,Ot.U=wt,wt!==Nt?(At=wt.U,wt.U=vt.U,vt=wt.R,At.L=vt,wt.R=Nt,Nt.U=wt):(wt.U=At,At=wt,vt=wt.R)):(Tt=vt.C,vt=wt),vt&&(vt.U=At),!Tt)if(vt&&vt.C)vt.C=!1;else{do{if(vt===this._)break;if(vt===At.L){if((_t=At.R).C&&(_t.C=!1,At.C=!0,Lp(this,At),_t=At.R),_t.L&&_t.L.C||_t.R&&_t.R.C){_t.R&&_t.R.C||(_t.L.C=!1,_t.C=!0,Ip(this,_t),_t=At.R),_t.C=At.C,At.C=_t.R.C=!1,Lp(this,At),vt=this._;break}}else if((_t=At.L).C&&(_t.C=!1,At.C=!0,Ip(this,At),_t=At.L),_t.L&&_t.L.C||_t.R&&_t.R.C){_t.L&&_t.L.C||(_t.R.C=!1,_t.C=!0,Lp(this,_t),_t=At.L),_t.C=At.C,At.C=_t.L.C=!1,Ip(this,At),vt=this._;break}_t.C=!0,vt=At,At=At.U}while(!vt.C);vt&&(vt.C=!1)}}};var f0,$1=[];function Mv(){Ap(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cd(vt){var _t=vt.P,wt=vt.N;if(_t&&wt){var Tt=_t.site,At=vt.site,Ot=wt.site;if(Tt!==Ot){var Nt=At[0],jt=At[1],Gt=Tt[0]-Nt,qt=Tt[1]-jt,en=Ot[0]-Nt,Xt=Ot[1]-jt,sn=2*(Gt*Xt-qt*en);if(!(sn>=-Fv)){var yn=Gt*Gt+qt*qt,vn=en*en+Xt*Xt,wn=(Xt*yn-qt*vn)/sn,un=(Gt*vn-en*yn)/sn,Fn=$1.pop()||new Mv;Fn.arc=vt,Fn.site=At,Fn.x=wn+Nt,Fn.y=(Fn.cy=un+jt)+Math.sqrt(wn*wn+un*un),vt.circle=Fn;for(var Qn=null,_n=Tf._;_n;)if(Fn.y<_n.y||Fn.y===_n.y&&Fn.x<=_n.x){if(!_n.L){Qn=_n.P;break}_n=_n.L}else{if(!_n.R){Qn=_n;break}_n=_n.R}Tf.insert(Qn,Fn),Qn||(f0=Fn)}}}}function Yh(vt){var _t=vt.circle;_t&&(_t.P||(f0=_t.N),Tf.remove(_t),$1.push(_t),Ap(_t),vt.circle=null)}var R1=[];function M1(){Ap(this),this.edge=this.site=this.circle=null}function N1(vt){var _t=R1.pop()||new M1;return _t.site=vt,_t}function p0(vt){Yh(vt),Cf.remove(vt),R1.push(vt),Ap(vt)}function Nv(vt){var _t=vt.circle,wt=_t.x,Tt=_t.cy,At=[wt,Tt],Ot=vt.P,Nt=vt.N,jt=[vt];p0(vt);for(var Gt=Ot;Gt.circle&&Math.abs(wt-Gt.circle.x)<Rs&&Math.abs(Tt-Gt.circle.cy)<Rs;)Ot=Gt.P,jt.unshift(Gt),p0(Gt),Gt=Ot;jt.unshift(Gt),Yh(Gt);for(var qt=Nt;qt.circle&&Math.abs(wt-qt.circle.x)<Rs&&Math.abs(Tt-qt.circle.cy)<Rs;)Nt=qt.N,jt.push(qt),p0(qt),qt=Nt;jt.push(qt),Yh(qt);var en,Xt=jt.length;for(en=1;en<Xt;++en)qt=jt[en],Gt=jt[en-1],Sf(qt.edge,Gt.site,qt.site,At);Gt=jt[0],(qt=jt[Xt-1]).edge=Ef(Gt.site,qt.site,null,At),Cd(Gt),Cd(qt)}function Dv(vt){for(var _t,wt,Tt,At,Ot=vt[0],Nt=vt[1],jt=Cf._;jt;)if((Tt=D1(jt,Nt)-Ot)>Rs)jt=jt.L;else{if(!((At=Ot-Bv(jt,Nt))>Rs)){Tt>-Rs?(_t=jt.P,wt=jt):At>-Rs?(_t=jt,wt=jt.N):_t=wt=jt;break}if(!jt.R){_t=jt;break}jt=jt.R}(function(Hn){gc[Hn.index]={site:Hn,halfedges:[]}})(vt);var Gt=N1(vt);if(Cf.insert(_t,Gt),_t||wt){if(_t===wt)return Yh(_t),wt=N1(_t.site),Cf.insert(Gt,wt),Gt.edge=wt.edge=Ef(_t.site,Gt.site),Cd(_t),void Cd(wt);if(wt){Yh(_t),Yh(wt);var qt=_t.site,en=qt[0],Xt=qt[1],sn=vt[0]-en,yn=vt[1]-Xt,vn=wt.site,wn=vn[0]-en,un=vn[1]-Xt,Fn=2*(sn*un-yn*wn),Qn=sn*sn+yn*yn,_n=wn*wn+un*un,Bn=[(un*Qn-yn*_n)/Fn+en,(sn*_n-wn*Qn)/Fn+Xt];Sf(wt.edge,qt,vn,Bn),Gt.edge=Ef(qt,vt,null,Bn),wt.edge=Ef(vt,vn,null,Bn),Cd(_t),Cd(wt)}else Gt.edge=Ef(_t.site,Gt.site)}}function D1(vt,_t){var wt=vt.site,Tt=wt[0],At=wt[1],Ot=At-_t;if(!Ot)return Tt;var Nt=vt.P;if(!Nt)return-1/0;var jt=(wt=Nt.site)[0],Gt=wt[1],qt=Gt-_t;if(!qt)return jt;var en=jt-Tt,Xt=1/Ot-1/qt,sn=en/qt;return Xt?(-sn+Math.sqrt(sn*sn-2*Xt*(en*en/(-2*qt)-Gt+qt/2+At-Ot/2)))/Xt+Tt:(Tt+jt)/2}function Bv(vt,_t){var wt=vt.N;if(wt)return D1(wt,_t);var Tt=vt.site;return Tt[1]===_t?Tt[0]:1/0}var Cf,gc,Tf,kl,Rs=1e-6,Fv=1e-12;function B1(vt,_t){return _t[1]-vt[1]||_t[0]-vt[0]}function g0(vt,_t){var wt,Tt,At,Ot=vt.sort(B1).pop();for(kl=[],gc=new Array(vt.length),Cf=new Fg,Tf=new Fg;;)if(At=f0,Ot&&(!At||Ot[1]<At.y||Ot[1]===At.y&&Ot[0]<At.x))Ot[0]===wt&&Ot[1]===Tt||(Dv(Ot),wt=Ot[0],Tt=Ot[1]),Ot=vt.pop();else{if(!At)break;Nv(At.arc)}if(function(){for(var en,Xt,sn,yn,vn=0,wn=gc.length;vn<wn;++vn)if((en=gc[vn])&&(yn=(Xt=en.halfedges).length)){var un=new Array(yn),Fn=new Array(yn);for(sn=0;sn<yn;++sn)un[sn]=sn,Fn[sn]=d0(en,kl[Xt[sn]]);for(un.sort(function(Qn,_n){return Fn[_n]-Fn[Qn]}),sn=0;sn<yn;++sn)Fn[sn]=Xt[un[sn]];for(sn=0;sn<yn;++sn)Xt[sn]=Fn[sn]}}(),_t){var Nt=+_t[0][0],jt=+_t[0][1],Gt=+_t[1][0],qt=+_t[1][1];(function(en,Xt,sn,yn){for(var vn,wn=kl.length;wn--;)$v(vn=kl[wn],en,Xt,sn,yn)&&zg(vn,en,Xt,sn,yn)&&(Math.abs(vn[0][0]-vn[1][0])>Rs||Math.abs(vn[0][1]-vn[1][1])>Rs)||delete kl[wn]})(Nt,jt,Gt,qt),function(en,Xt,sn,yn){var vn,wn,un,Fn,Qn,_n,Bn,Hn,Gn,Vn,Ur,$r,Yr=gc.length,Mr=!0;for(vn=0;vn<Yr;++vn)if(wn=gc[vn]){for(un=wn.site,Fn=(Qn=wn.halfedges).length;Fn--;)kl[Qn[Fn]]||Qn.splice(Fn,1);for(Fn=0,_n=Qn.length;Fn<_n;)Ur=(Vn=Rv(wn,kl[Qn[Fn]]))[0],$r=Vn[1],Hn=(Bn=O1(wn,kl[Qn[++Fn%_n]]))[0],Gn=Bn[1],(Math.abs(Ur-Hn)>Rs||Math.abs($r-Gn)>Rs)&&(Qn.splice(Fn,0,kl.push(Pu(un,Vn,Math.abs(Ur-en)<Rs&&yn-$r>Rs?[en,Math.abs(Hn-en)<Rs?Gn:yn]:Math.abs($r-yn)<Rs&&sn-Ur>Rs?[Math.abs(Gn-yn)<Rs?Hn:sn,yn]:Math.abs(Ur-sn)<Rs&&$r-Xt>Rs?[sn,Math.abs(Hn-sn)<Rs?Gn:Xt]:Math.abs($r-Xt)<Rs&&Ur-en>Rs?[Math.abs(Gn-Xt)<Rs?Hn:en,Xt]:null))-1),++_n);_n&&(Mr=!1)}if(Mr){var Qr,Hr,Br,Nr=1/0;for(vn=0,Mr=null;vn<Yr;++vn)(wn=gc[vn])&&(Br=(Qr=(un=wn.site)[0]-en)*Qr+(Hr=un[1]-Xt)*Hr)<Nr&&(Nr=Br,Mr=wn);if(Mr){var Xr=[en,Xt],jr=[en,yn],ei=[sn,yn],xr=[sn,Xt];Mr.halfedges.push(kl.push(Pu(un=Mr.site,Xr,jr))-1,kl.push(Pu(un,jr,ei))-1,kl.push(Pu(un,ei,xr))-1,kl.push(Pu(un,xr,Xr))-1)}}for(vn=0;vn<Yr;++vn)(wn=gc[vn])&&(wn.halfedges.length||delete gc[vn])}(Nt,jt,Gt,qt)}this.edges=kl,this.cells=gc,Cf=Tf=kl=gc=null}function zv(vt){return(vt=vt.slice()).push(vt[0]),Pt([vt])}function F1(vt,_t,wt,Tt){var At=(Tt=Tt||{}).steps||64,Ot=Tt.units||"kilometers",Nt=Tt.angle||0,jt=Tt.pivot||vt,Gt=Tt.properties||vt.properties||{};if(!vt)throw new Error("center is required");if(!_t)throw new Error("xSemiAxis is required");if(!wt)throw new Error("ySemiAxis is required");if(!cn(Tt))throw new Error("options must be an object");if(!$n(At))throw new Error("steps must be a number");if(!$n(Nt))throw new Error("angle must be a number");var qt=fn(vt);if(Ot==="degrees")var en=An(Nt);else _t=bf(vt,_t,90,{units:Ot}),wt=bf(vt,wt,0,{units:Ot}),_t=fn(_t)[0]-qt[0],wt=fn(wt)[1]-qt[1];for(var Xt=[],sn=0;sn<At;sn+=1){var yn=-360*sn/At,vn=_t*wt/Math.sqrt(Math.pow(wt,2)+Math.pow(_t,2)*Math.pow(z1(yn),2)),wn=_t*wt/Math.sqrt(Math.pow(_t,2)+Math.pow(wt,2)/Math.pow(z1(yn),2));if(yn<-90&&yn>=-270&&(vn=-vn),yn<-180&&yn>=-360&&(wn=-wn),Ot==="degrees"){var un=vn*Math.cos(en)+wn*Math.sin(en),Fn=wn*Math.cos(en)-vn*Math.sin(en);vn=un,wn=Fn}Xt.push([vn+qt[0],wn+qt[1]])}return Xt.push(Xt[0]),Ot==="degrees"?Pt([Xt],Gt):m1(Pt([Xt],Gt),Nt,{pivot:jt})}function z1(vt){var _t=vt*Math.PI/180;return Math.tan(_t)}function m0(vt,_t){_t===void 0&&(_t={});var wt=0,Tt=0,At=0;return ur(vt,function(Ot,Nt,jt){var Gt=_t.weight?jt==null?void 0:jt[_t.weight]:void 0;if(!$n(Gt=Gt==null?1:Gt))throw new Error("weight value must be a number for feature index "+Nt);(Gt=Number(Gt))>0&&hn(Ot,function(qt){wt+=qt[0]*Gt,Tt+=qt[1]*Gt,At+=Gt})}),kt([wt/At,Tt/At],_t.properties,_t)}function H1(vt,_t,wt,Tt,At){var Ot=Tt.tolerance||.001,Nt=0,jt=0,Gt=0,qt=0;if(nr(wt,function(sn){var yn,vn=(yn=sn.properties)===null||yn===void 0?void 0:yn.weight,wn=vn==null?1:vn;if(!$n(wn=Number(wn)))throw new Error("weight value must be a number");if(wn>0){qt+=1;var un=wn*oo(sn,vt);un===0&&(un=1);var Fn=wn/un;Nt+=sn.geometry.coordinates[0]*Fn,jt+=sn.geometry.coordinates[1]*Fn,Gt+=Fn}}),qt<1)throw new Error("no features to measure");var en=Nt/Gt,Xt=jt/Gt;return qt===1||At===0||Math.abs(en-_t[0])<Ot&&Math.abs(Xt-_t[1])<Ot?kt([en,Xt],{medianCandidates:Tt.medianCandidates}):(Tt.medianCandidates.push([en,Xt]),H1([en,Xt],vt,wt,Tt,At-1))}function j1(vt,_t){return{x:vt[0]-_t[0],y:vt[1]-_t[1]}}function Hv(vt,_t){var wt=0,Tt=0;hn(vt,function(At,Ot,Nt,jt,Gt){Gt>wt&&(wt=Gt,Tt=Ot,_t.push([]));var qt=Ot-Tt,en=vt.coordinates[Gt][qt+1],Xt=At[0],sn=At[1],yn=en[0],vn=en[1];_t[Gt].push([.75*Xt+.25*yn,.75*sn+.25*vn]),_t[Gt].push([.25*Xt+.75*yn,.25*sn+.75*vn])},!0),_t.forEach(function(At){At.push(At[0])})}function jv(vt,_t){var wt=0,Tt=0,At=0;hn(vt,function(Ot,Nt,jt,Gt,qt){Gt>At&&(At=Gt,Tt=Nt,_t.push([[]])),qt>wt&&(wt=qt,Tt=Nt,_t[Gt].push([]));var en=Nt-Tt,Xt=vt.coordinates[Gt][qt][en+1],sn=Ot[0],yn=Ot[1],vn=Xt[0],wn=Xt[1];_t[Gt][qt].push([.75*sn+.25*vn,.75*yn+.25*wn]),_t[Gt][qt].push([.25*sn+.75*vn,.25*yn+.75*wn])},!0),_t.forEach(function(Ot){Ot.forEach(function(Nt){Nt.push(Nt[0])})})}function Vv(vt,_t,wt){wt===void 0&&(wt=2);var Tt=fn(vt),At=fn(_t),Ot=Tt[0]-At[0],Nt=Tt[1]-At[1];return wt===1?Math.abs(Ot)+Math.abs(Nt):Math.pow(Math.pow(Ot,wt)+Math.pow(Nt,wt),1/wt)}function V1(vt,_t){var wt=(_t=_t||{}).threshold||1e4,Tt=_t.p||2,At=_t.binary||!1,Ot=_t.alpha||-1,Nt=_t.standardization||!1,jt=[];nr(vt,function(yn){jt.push(dc(yn))});for(var Gt=[],qt=0;qt<jt.length;qt++)Gt[qt]=[];for(qt=0;qt<jt.length;qt++)for(var en=qt;en<jt.length;en++){qt===en&&(Gt[qt][en]=0);var Xt=Vv(jt[qt],jt[en],Tt);Gt[qt][en]=Xt,Gt[en][qt]=Xt}for(qt=0;qt<jt.length;qt++)for(en=0;en<jt.length;en++)(Xt=Gt[qt][en])!==0&&(Gt[qt][en]=At?Xt<=wt?1:0:Xt<=wt?Math.pow(Xt,Ot):0);if(Nt)for(qt=0;qt<jt.length;qt++){var sn=Gt[qt].reduce(function(yn,vn){return yn+vn},0);for(en=0;en<jt.length;en++)Gt[qt][en]=Gt[qt][en]/sn}return Gt}function U1(vt){for(var _t=0,wt=0,Tt=vt;wt<Tt.length;wt++)_t+=Tt[wt];return _t/vt.length}function G1(vt,_t){return _t===void 0&&(_t={}),q1(vt,"mercator",_t)}function W1(vt,_t){return _t===void 0&&(_t={}),q1(vt,"wgs84",_t)}function q1(vt,_t,wt){wt===void 0&&(wt={});var Tt=(wt=wt||{}).mutate;if(!vt)throw new Error("geojson is required");return Array.isArray(vt)&&$n(vt[0])?vt=_t==="mercator"?Y1(vt):X1(vt):(Tt!==!0&&(vt=Po(vt)),hn(vt,function(At){var Ot=_t==="mercator"?Y1(At):X1(At);At[0]=Ot[0],At[1]=Ot[1]})),vt}function Y1(vt){var _t=Math.PI/180,wt=6378137,Tt=20037508342789244e-9,At=[wt*(Math.abs(vt[0])<=180?vt[0]:vt[0]-360*function(Ot){return Ot<0?-1:Ot>0?1:0}(vt[0]))*_t,wt*Math.log(Math.tan(.25*Math.PI+.5*vt[1]*_t))];return At[0]>Tt&&(At[0]=Tt),At[0]<-Tt&&(At[0]=-Tt),At[1]>Tt&&(At[1]=Tt),At[1]<-Tt&&(At[1]=-Tt),At}function X1(vt){var _t=180/Math.PI,wt=6378137;return[vt[0]*_t/wt,(.5*Math.PI-2*Math.atan(Math.exp(-vt[1]/wt)))*_t]}g0.prototype={constructor:g0,polygons:function(){var vt=this.edges;return this.cells.map(function(_t){var wt=_t.halfedges.map(function(Tt){return O1(_t,vt[Tt])});return wt.data=_t.site.data,wt})},triangles:function(){var vt=[],_t=this.edges;return this.cells.forEach(function(wt,Tt){if(Ot=(At=wt.halfedges).length)for(var At,Ot,Nt,jt,Gt,qt,en=wt.site,Xt=-1,sn=_t[At[Ot-1]],yn=sn.left===en?sn.right:sn.left;++Xt<Ot;)Nt=yn,yn=(sn=_t[At[Xt]]).left===en?sn.right:sn.left,Nt&&yn&&Tt<Nt.index&&Tt<yn.index&&(Gt=Nt,qt=yn,((jt=en)[0]-qt[0])*(Gt[1]-jt[1])-(jt[0]-Gt[0])*(qt[1]-jt[1])<0)&&vt.push([en.data,Nt.data,yn.data])}),vt},links:function(){return this.edges.filter(function(vt){return vt.right}).map(function(vt){return{source:vt.left.data,target:vt.right.data}})},find:function(vt,_t,wt){for(var Tt,At,Ot=this,Nt=Ot._found||0,jt=Ot.cells.length;!(At=Ot.cells[Nt]);)if(++Nt>=jt)return null;var Gt=vt-At.site[0],qt=_t-At.site[1],en=Gt*Gt+qt*qt;do At=Ot.cells[Tt=Nt],Nt=null,At.halfedges.forEach(function(Xt){var sn=Ot.edges[Xt],yn=sn.left;if(yn!==At.site&&yn||(yn=sn.right)){var vn=vt-yn[0],wn=_t-yn[1],un=vn*vn+wn*wn;un<en&&(en=un,Nt=yn.index)}});while(Nt!==null);return Ot._found=Tt,wt==null||en<=wt*wt?At.site:null}};var Uv=Object.freeze({__proto__:null,toMercator:G1,toWgs84:W1}),Gv=function(){for(var vt=0,_t=0,wt=arguments.length;_t<wt;_t++)vt+=arguments[_t].length;var Tt=Array(vt),At=0;for(_t=0;_t<wt;_t++)for(var Ot=arguments[_t],Nt=0,jt=Ot.length;Nt<jt;Nt++,At++)Tt[At]=Ot[Nt];return Tt};function Pp(vt){return Array.isArray(vt)?Q1(vt):vt&&vt.bbox?Q1(vt.bbox):[360*J1(),180*J1()]}function Z1(vt,_t){_t===void 0&&(_t={}),vt==null&&(vt=1);for(var wt=[],Tt=0;Tt<vt;Tt++)wt.push(kt(Pp(_t.bbox)));return Ft(wt)}function y0(vt,_t){_t===void 0&&(_t={}),vt==null&&(vt=1),$n(_t.num_vertices)&&_t.num_vertices!==void 0||(_t.num_vertices=10),$n(_t.max_radial_length)&&_t.max_radial_length!==void 0||(_t.max_radial_length=10);for(var wt=[],Tt=function(Ot){var Nt,jt=[],Gt=Gv(Array(_t.num_vertices+1)).map(Math.random);Gt.forEach(function(qt,en,Xt){Xt[en]=en>0?qt+Xt[en-1]:qt}),Gt.forEach(function(qt){qt=2*qt*Math.PI/Gt[Gt.length-1];var en=Math.random();jt.push([en*(_t.max_radial_length||10)*Math.sin(qt),en*(_t.max_radial_length||10)*Math.cos(qt)])}),jt[jt.length-1]=jt[0],jt=jt.map((Nt=Pp(_t.bbox),function(qt){return[qt[0]+Nt[0],qt[1]+Nt[1]]})),wt.push(Pt([jt]))},At=0;At<vt;At++)Tt();return Ft(wt)}function K1(vt,_t){if(_t===void 0&&(_t={}),!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.bbox,Tt=_t.num_vertices,At=_t.max_length,Ot=_t.max_rotation;vt==null&&(vt=1),(!$n(Tt)||Tt===void 0||Tt<2)&&(Tt=10),$n(At)&&At!==void 0||(At=1e-4),$n(Ot)&&Ot!==void 0||(Ot=Math.PI/8);for(var Nt=[],jt=0;jt<vt;jt++){for(var Gt=[Pp(wt)],qt=0;qt<Tt-1;qt++){var en=(qt===0?2*Math.random()*Math.PI:Math.tan((Gt[qt][1]-Gt[qt-1][1])/(Gt[qt][0]-Gt[qt-1][0])))+(Math.random()-.5)*Ot*2,Xt=Math.random()*At;Gt.push([Gt[qt][0]+Xt*Math.cos(en),Gt[qt][1]+Xt*Math.sin(en)])}Nt.push(Dt(Gt))}return Ft(Nt)}function J1(){return Math.random()-.5}function Q1(vt){return[Math.random()*(vt[2]-vt[0])+vt[0],Math.random()*(vt[3]-vt[1])+vt[1]]}var Wv=Object.freeze({__proto__:null,randomPosition:Pp,randomPoint:Z1,randomPolygon:y0,randomLineString:K1});function ey(vt,_t){if(!vt)throw new Error("geojson is required");if(vt.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(_t==null)throw new Error("filter is required");var wt=[];return nr(vt,function(Tt){jg(Tt.properties,_t)&&wt.push(Tt)}),Ft(wt)}function v0(vt,_t,wt){if(!vt)throw new Error("geojson is required");if(vt.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(_t==null)throw new Error("property is required");for(var Tt=_0(vt,_t),At=Object.keys(Tt),Ot=0;Ot<At.length;Ot++){for(var Nt=At[Ot],jt=Tt[Nt],Gt=[],qt=0;qt<jt.length;qt++)Gt.push(vt.features[jt[qt]]);wt(Ft(Gt),Nt,Ot)}}function Hg(vt,_t,wt,Tt){var At=Tt;return v0(vt,_t,function(Ot,Nt,jt){At=jt===0&&Tt===void 0?Ot:wt(At,Ot,Nt,jt)}),At}function _0(vt,_t){var wt={};return nr(vt,function(Tt,At){var Ot=Tt.properties||{};if(Object.prototype.hasOwnProperty.call(Ot,String(_t))){var Nt=Ot[_t];Object.prototype.hasOwnProperty.call(wt,Nt)?wt[Nt].push(At):wt[Nt]=[At]}}),wt}function jg(vt,_t){if(vt===void 0)return!1;var wt=typeof _t;if(wt==="number"||wt==="string")return Object.prototype.hasOwnProperty.call(vt,_t);if(Array.isArray(_t)){for(var Tt=0;Tt<_t.length;Tt++)if(!jg(vt,_t[Tt]))return!1;return!0}return b0(vt,_t)}function b0(vt,_t){for(var wt=Object.keys(_t),Tt=0;Tt<wt.length;Tt++){var At=wt[Tt];if(vt[At]!==_t[At])return!1}return!0}function ty(vt,_t){if(!_t)return{};if(!_t.length)return{};for(var wt={},Tt=0;Tt<_t.length;Tt++){var At=_t[Tt];Object.prototype.hasOwnProperty.call(vt,At)&&(wt[At]=vt[At])}return wt}var qv=Object.freeze({__proto__:null,getCluster:ey,clusterEach:v0,clusterReduce:Hg,createBins:_0,applyFilter:jg,propertiesContainsFilter:b0,filterProperties:ty}),Xh=function(vt,_t){this.next=null,this.key=vt,this.data=_t,this.left=null,this.right=null};/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */function x0(vt,_t){return vt>_t?1:vt<_t?-1:0}function uh(vt,_t,wt){for(var Tt=new Xh(null,null),At=Tt,Ot=Tt;;){var Nt=wt(vt,_t.key);if(Nt<0){if(_t.left===null)break;if(wt(vt,_t.left.key)<0){var jt=_t.left;if(_t.left=jt.right,jt.right=_t,(_t=jt).left===null)break}Ot.left=_t,Ot=_t,_t=_t.left}else{if(!(Nt>0)||_t.right===null||wt(vt,_t.right.key)>0&&(jt=_t.right,_t.right=jt.left,jt.left=_t,(_t=jt).right===null))break;At.right=_t,At=_t,_t=_t.right}}return At.right=_t.left,Ot.left=_t.right,_t.left=Tt.right,_t.right=Tt.left,_t}function w0(vt,_t,wt,Tt){var At=new Xh(vt,_t);if(wt===null)return At.left=At.right=null,At;var Ot=Tt(vt,(wt=uh(vt,wt,Tt)).key);return Ot<0?(At.left=wt.left,At.right=wt,wt.left=null):Ot>=0&&(At.right=wt.right,At.left=wt,wt.right=null),At}function E0(vt,_t,wt){var Tt=null,At=null;if(_t){var Ot=wt((_t=uh(vt,_t,wt)).key,vt);Ot===0?(Tt=_t.left,At=_t.right):Ot<0?(At=_t.right,_t.right=null,Tt=_t):(Tt=_t.left,_t.left=null,At=_t)}return{left:Tt,right:At}}function S0(vt,_t,wt,Tt,At){if(vt){Tt(_t+(wt?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+At(vt)+`
`);var Ot=_t+(wt?"    ":"\u2502   ");vt.left&&S0(vt.left,Ot,!1,Tt,At),vt.right&&S0(vt.right,Ot,!0,Tt,At)}}var C0=function(){function vt(_t){_t===void 0&&(_t=x0),this._root=null,this._size=0,this._comparator=_t}return vt.prototype.insert=function(_t,wt){return this._size++,this._root=w0(_t,wt,this._root,this._comparator)},vt.prototype.add=function(_t,wt){var Tt=new Xh(_t,wt);this._root===null&&(Tt.left=Tt.right=null,this._size++,this._root=Tt);var At=this._comparator,Ot=uh(_t,this._root,At),Nt=At(_t,Ot.key);return Nt===0?this._root=Ot:(Nt<0?(Tt.left=Ot.left,Tt.right=Ot,Ot.left=null):Nt>0&&(Tt.right=Ot.right,Tt.left=Ot,Ot.right=null),this._size++,this._root=Tt),this._root},vt.prototype.remove=function(_t){this._root=this._remove(_t,this._root,this._comparator)},vt.prototype._remove=function(_t,wt,Tt){var At;return wt===null?null:Tt(_t,(wt=uh(_t,wt,Tt)).key)===0?(wt.left===null?At=wt.right:(At=uh(_t,wt.left,Tt)).right=wt.right,this._size--,At):wt},vt.prototype.pop=function(){var _t=this._root;if(_t){for(;_t.left;)_t=_t.left;return this._root=uh(_t.key,this._root,this._comparator),this._root=this._remove(_t.key,this._root,this._comparator),{key:_t.key,data:_t.data}}return null},vt.prototype.findStatic=function(_t){for(var wt=this._root,Tt=this._comparator;wt;){var At=Tt(_t,wt.key);if(At===0)return wt;wt=At<0?wt.left:wt.right}return null},vt.prototype.find=function(_t){return this._root&&(this._root=uh(_t,this._root,this._comparator),this._comparator(_t,this._root.key)!==0)?null:this._root},vt.prototype.contains=function(_t){for(var wt=this._root,Tt=this._comparator;wt;){var At=Tt(_t,wt.key);if(At===0)return!0;wt=At<0?wt.left:wt.right}return!1},vt.prototype.forEach=function(_t,wt){for(var Tt=this._root,At=[],Ot=!1;!Ot;)Tt!==null?(At.push(Tt),Tt=Tt.left):At.length!==0?(Tt=At.pop(),_t.call(wt,Tt),Tt=Tt.right):Ot=!0;return this},vt.prototype.range=function(_t,wt,Tt,At){for(var Ot=[],Nt=this._comparator,jt=this._root;Ot.length!==0||jt;)if(jt)Ot.push(jt),jt=jt.left;else{if(Nt((jt=Ot.pop()).key,wt)>0)break;if(Nt(jt.key,_t)>=0&&Tt.call(At,jt))return this;jt=jt.right}return this},vt.prototype.keys=function(){var _t=[];return this.forEach(function(wt){var Tt=wt.key;return _t.push(Tt)}),_t},vt.prototype.values=function(){var _t=[];return this.forEach(function(wt){var Tt=wt.data;return _t.push(Tt)}),_t},vt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},vt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},vt.prototype.minNode=function(_t){if(_t===void 0&&(_t=this._root),_t)for(;_t.left;)_t=_t.left;return _t},vt.prototype.maxNode=function(_t){if(_t===void 0&&(_t=this._root),_t)for(;_t.right;)_t=_t.right;return _t},vt.prototype.at=function(_t){for(var wt=this._root,Tt=!1,At=0,Ot=[];!Tt;)if(wt)Ot.push(wt),wt=wt.left;else if(Ot.length>0){if(wt=Ot.pop(),At===_t)return wt;At++,wt=wt.right}else Tt=!0;return null},vt.prototype.next=function(_t){var wt=this._root,Tt=null;if(_t.right){for(Tt=_t.right;Tt.left;)Tt=Tt.left;return Tt}for(var At=this._comparator;wt;){var Ot=At(_t.key,wt.key);if(Ot===0)break;Ot<0?(Tt=wt,wt=wt.left):wt=wt.right}return Tt},vt.prototype.prev=function(_t){var wt=this._root,Tt=null;if(_t.left!==null){for(Tt=_t.left;Tt.right;)Tt=Tt.right;return Tt}for(var At=this._comparator;wt;){var Ot=At(_t.key,wt.key);if(Ot===0)break;Ot<0?wt=wt.left:(Tt=wt,wt=wt.right)}return Tt},vt.prototype.clear=function(){return this._root=null,this._size=0,this},vt.prototype.toList=function(){return function(_t){for(var wt=_t,Tt=[],At=!1,Ot=new Xh(null,null),Nt=Ot;!At;)wt?(Tt.push(wt),wt=wt.left):Tt.length>0?wt=(wt=Nt=Nt.next=Tt.pop()).right:At=!0;return Nt.next=null,Ot.next}(this._root)},vt.prototype.load=function(_t,wt,Tt){wt===void 0&&(wt=[]),Tt===void 0&&(Tt=!1);var At=_t.length,Ot=this._comparator;if(Tt&&k0(_t,wt,0,At-1,Ot),this._root===null)this._root=T0(_t,wt,0,At),this._size=At;else{var Nt=function(jt,Gt,qt){for(var en=new Xh(null,null),Xt=en,sn=jt,yn=Gt;sn!==null&&yn!==null;)qt(sn.key,yn.key)<0?(Xt.next=sn,sn=sn.next):(Xt.next=yn,yn=yn.next),Xt=Xt.next;return sn!==null?Xt.next=sn:yn!==null&&(Xt.next=yn),en.next}(this.toList(),function(jt,Gt){for(var qt=new Xh(null,null),en=qt,Xt=0;Xt<jt.length;Xt++)en=en.next=new Xh(jt[Xt],Gt[Xt]);return en.next=null,qt.next}(_t,wt),Ot);At=this._size+At,this._root=Vg({head:Nt},0,At)}return this},vt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(vt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(vt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),vt.prototype.toString=function(_t){_t===void 0&&(_t=function(Tt){return String(Tt.key)});var wt=[];return S0(this._root,"",!0,function(Tt){return wt.push(Tt)},_t),wt.join("")},vt.prototype.update=function(_t,wt,Tt){var At=this._comparator,Ot=E0(_t,this._root,At),Nt=Ot.left,jt=Ot.right;At(_t,wt)<0?jt=w0(wt,Tt,jt,At):Nt=w0(wt,Tt,Nt,At),this._root=function(Gt,qt,en){return qt===null?Gt:(Gt===null||((qt=uh(Gt.key,qt,en)).left=Gt),qt)}(Nt,jt,At)},vt.prototype.split=function(_t){return E0(_t,this._root,this._comparator)},vt}();function T0(vt,_t,wt,Tt){var At=Tt-wt;if(At>0){var Ot=wt+Math.floor(At/2),Nt=vt[Ot],jt=_t[Ot],Gt=new Xh(Nt,jt);return Gt.left=T0(vt,_t,wt,Ot),Gt.right=T0(vt,_t,Ot+1,Tt),Gt}return null}function Vg(vt,_t,wt){var Tt=wt-_t;if(Tt>0){var At=_t+Math.floor(Tt/2),Ot=Vg(vt,_t,At),Nt=vt.head;return Nt.left=Ot,vt.head=vt.head.next,Nt.right=Vg(vt,At+1,wt),Nt}return null}function k0(vt,_t,wt,Tt,At){if(!(wt>=Tt)){for(var Ot=vt[wt+Tt>>1],Nt=wt-1,jt=Tt+1;;){do Nt++;while(At(vt[Nt],Ot)<0);do jt--;while(At(vt[jt],Ot)>0);if(Nt>=jt)break;var Gt=vt[Nt];vt[Nt]=vt[jt],vt[jt]=Gt,Gt=_t[Nt],_t[Nt]=_t[jt],_t[jt]=Gt}k0(vt,_t,wt,jt,At),k0(vt,_t,jt+1,Tt,At)}}function Dl(vt,_t){if(!(vt instanceof _t))throw new TypeError("Cannot call a class as a function")}function A0(vt,_t){for(var wt=0;wt<_t.length;wt++){var Tt=_t[wt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(vt,Tt.key,Tt)}}function Al(vt,_t,wt){return _t&&A0(vt.prototype,_t),wt&&A0(vt,wt),vt}var Op=function(vt,_t){return vt.ll.x<=_t.x&&_t.x<=vt.ur.x&&vt.ll.y<=_t.y&&_t.y<=vt.ur.y},Ug=function(vt,_t){if(_t.ur.x<vt.ll.x||vt.ur.x<_t.ll.x||_t.ur.y<vt.ll.y||vt.ur.y<_t.ll.y)return null;var wt=vt.ll.x<_t.ll.x?_t.ll.x:vt.ll.x,Tt=vt.ur.x<_t.ur.x?vt.ur.x:_t.ur.x;return{ll:{x:wt,y:vt.ll.y<_t.ll.y?_t.ll.y:vt.ll.y},ur:{x:Tt,y:vt.ur.y<_t.ur.y?vt.ur.y:_t.ur.y}}},hh=Number.EPSILON;hh===void 0&&(hh=Math.pow(2,-52));var Gg=hh*hh,L0=function(vt,_t){if(-hh<vt&&vt<hh&&-hh<_t&&_t<hh)return 0;var wt=vt-_t;return wt*wt<Gg*vt*_t?0:vt<_t?-1:1},ny=function(){function vt(){Dl(this,vt),this.reset()}return Al(vt,[{key:"reset",value:function(){this.xRounder=new ry,this.yRounder=new ry}},{key:"round",value:function(_t,wt){return{x:this.xRounder.round(_t),y:this.yRounder.round(wt)}}}]),vt}(),ry=function(){function vt(){Dl(this,vt),this.tree=new C0,this.round(0)}return Al(vt,[{key:"round",value:function(_t){var wt=this.tree.add(_t),Tt=this.tree.prev(wt);if(Tt!==null&&L0(wt.key,Tt.key)===0)return this.tree.remove(_t),Tt.key;var At=this.tree.next(wt);return At!==null&&L0(wt.key,At.key)===0?(this.tree.remove(_t),At.key):_t}}]),vt}(),$p=new ny,Rp=function(vt,_t){return vt.x*_t.y-vt.y*_t.x},iy=function(vt,_t){return vt.x*_t.x+vt.y*_t.y},oy=function(vt,_t,wt){var Tt={x:_t.x-vt.x,y:_t.y-vt.y},At={x:wt.x-vt.x,y:wt.y-vt.y},Ot=Rp(Tt,At);return L0(Ot,0)},Wg=function(vt){return Math.sqrt(iy(vt,vt))},sy=function(vt,_t,wt){var Tt={x:_t.x-vt.x,y:_t.y-vt.y},At={x:wt.x-vt.x,y:wt.y-vt.y};return iy(At,Tt)/Wg(At)/Wg(Tt)},ay=function(vt,_t,wt){return _t.y===0?null:{x:vt.x+_t.x/_t.y*(wt-vt.y),y:wt}},ly=function(vt,_t,wt){return _t.x===0?null:{x:wt,y:vt.y+_t.y/_t.x*(wt-vt.x)}},Ou=function(){function vt(_t,wt){Dl(this,vt),_t.events===void 0?_t.events=[this]:_t.events.push(this),this.point=_t,this.isLeft=wt}return Al(vt,null,[{key:"compare",value:function(_t,wt){var Tt=vt.comparePoints(_t.point,wt.point);return Tt!==0?Tt:(_t.point!==wt.point&&_t.link(wt),_t.isLeft!==wt.isLeft?_t.isLeft?1:-1:qg.compare(_t.segment,wt.segment))}},{key:"comparePoints",value:function(_t,wt){return _t.x<wt.x?-1:_t.x>wt.x?1:_t.y<wt.y?-1:_t.y>wt.y?1:0}}]),Al(vt,[{key:"link",value:function(_t){if(_t.point===this.point)throw new Error("Tried to link already linked events");for(var wt=_t.point.events,Tt=0,At=wt.length;Tt<At;Tt++){var Ot=wt[Tt];this.point.events.push(Ot),Ot.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var _t=this.point.events.length,wt=0;wt<_t;wt++){var Tt=this.point.events[wt];if(Tt.segment.consumedBy===void 0)for(var At=wt+1;At<_t;At++){var Ot=this.point.events[At];Ot.consumedBy===void 0&&Tt.otherSE.point.events===Ot.otherSE.point.events&&Tt.segment.consume(Ot.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var _t=[],wt=0,Tt=this.point.events.length;wt<Tt;wt++){var At=this.point.events[wt];At!==this&&!At.segment.ringOut&&At.segment.isInResult()&&_t.push(At)}return _t}},{key:"getLeftmostComparator",value:function(_t){var wt=this,Tt=new Map,At=function(Ot){var Nt,jt,Gt,qt,en,Xt=Ot.otherSE;Tt.set(Ot,{sine:(Nt=wt.point,jt=_t.point,Gt=Xt.point,qt={x:jt.x-Nt.x,y:jt.y-Nt.y},en={x:Gt.x-Nt.x,y:Gt.y-Nt.y},Rp(en,qt)/Wg(en)/Wg(qt)),cosine:sy(wt.point,_t.point,Xt.point)})};return function(Ot,Nt){Tt.has(Ot)||At(Ot),Tt.has(Nt)||At(Nt);var jt=Tt.get(Ot),Gt=jt.sine,qt=jt.cosine,en=Tt.get(Nt),Xt=en.sine,sn=en.cosine;return Gt>=0&&Xt>=0?qt<sn?1:qt>sn?-1:0:Gt<0&&Xt<0?qt<sn?-1:qt>sn?1:0:Xt<Gt?-1:Xt>Gt?1:0}}}]),vt}(),Yv=0,qg=function(){function vt(_t,wt,Tt,At){Dl(this,vt),this.id=++Yv,this.leftSE=_t,_t.segment=this,_t.otherSE=wt,this.rightSE=wt,wt.segment=this,wt.otherSE=_t,this.rings=Tt,this.windings=At}return Al(vt,null,[{key:"compare",value:function(_t,wt){var Tt=_t.leftSE.point.x,At=wt.leftSE.point.x,Ot=_t.rightSE.point.x,Nt=wt.rightSE.point.x;if(Nt<Tt)return 1;if(Ot<At)return-1;var jt=_t.leftSE.point.y,Gt=wt.leftSE.point.y,qt=_t.rightSE.point.y,en=wt.rightSE.point.y;if(Tt<At){if(Gt<jt&&Gt<qt)return 1;if(Gt>jt&&Gt>qt)return-1;var Xt=_t.comparePoint(wt.leftSE.point);if(Xt<0)return 1;if(Xt>0)return-1;var sn=wt.comparePoint(_t.rightSE.point);return sn!==0?sn:-1}if(Tt>At){if(jt<Gt&&jt<en)return-1;if(jt>Gt&&jt>en)return 1;var yn=wt.comparePoint(_t.leftSE.point);if(yn!==0)return yn;var vn=_t.comparePoint(wt.rightSE.point);return vn<0?1:vn>0?-1:1}if(jt<Gt)return-1;if(jt>Gt)return 1;if(Ot<Nt){var wn=wt.comparePoint(_t.rightSE.point);if(wn!==0)return wn}if(Ot>Nt){var un=_t.comparePoint(wt.rightSE.point);if(un<0)return 1;if(un>0)return-1}if(Ot!==Nt){var Fn=qt-jt,Qn=Ot-Tt,_n=en-Gt,Bn=Nt-At;if(Fn>Qn&&_n<Bn)return 1;if(Fn<Qn&&_n>Bn)return-1}return Ot>Nt?1:Ot<Nt||qt<en?-1:qt>en?1:_t.id<wt.id?-1:_t.id>wt.id?1:0}}]),Al(vt,[{key:"replaceRightSE",value:function(_t){this.rightSE=_t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var _t=this.leftSE.point.y,wt=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:_t<wt?_t:wt},ur:{x:this.rightSE.point.x,y:_t>wt?_t:wt}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(_t){return _t.x===this.leftSE.point.x&&_t.y===this.leftSE.point.y||_t.x===this.rightSE.point.x&&_t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(_t){if(this.isAnEndpoint(_t))return 0;var wt=this.leftSE.point,Tt=this.rightSE.point,At=this.vector();if(wt.x===Tt.x)return _t.x===wt.x?0:_t.x<wt.x?1:-1;var Ot=(_t.y-wt.y)/At.y,Nt=wt.x+Ot*At.x;if(_t.x===Nt)return 0;var jt=(_t.x-wt.x)/At.x,Gt=wt.y+jt*At.y;return _t.y===Gt?0:_t.y<Gt?-1:1}},{key:"getIntersection",value:function(_t){var wt=this.bbox(),Tt=_t.bbox(),At=Ug(wt,Tt);if(At===null)return null;var Ot=this.leftSE.point,Nt=this.rightSE.point,jt=_t.leftSE.point,Gt=_t.rightSE.point,qt=Op(wt,jt)&&this.comparePoint(jt)===0,en=Op(Tt,Ot)&&_t.comparePoint(Ot)===0,Xt=Op(wt,Gt)&&this.comparePoint(Gt)===0,sn=Op(Tt,Nt)&&_t.comparePoint(Nt)===0;if(en&&qt)return sn&&!Xt?Nt:!sn&&Xt?Gt:null;if(en)return Xt&&Ot.x===Gt.x&&Ot.y===Gt.y?null:Ot;if(qt)return sn&&Nt.x===jt.x&&Nt.y===jt.y?null:jt;if(sn&&Xt)return null;if(sn)return Nt;if(Xt)return Gt;var yn=function(vn,wn,un,Fn){if(wn.x===0)return ly(un,Fn,vn.x);if(Fn.x===0)return ly(vn,wn,un.x);if(wn.y===0)return ay(un,Fn,vn.y);if(Fn.y===0)return ay(vn,wn,un.y);var Qn=Rp(wn,Fn);if(Qn==0)return null;var _n={x:un.x-vn.x,y:un.y-vn.y},Bn=Rp(_n,wn)/Qn,Hn=Rp(_n,Fn)/Qn;return{x:(vn.x+Hn*wn.x+(un.x+Bn*Fn.x))/2,y:(vn.y+Hn*wn.y+(un.y+Bn*Fn.y))/2}}(Ot,this.vector(),jt,_t.vector());return yn===null?null:Op(At,yn)?$p.round(yn.x,yn.y):null}},{key:"split",value:function(_t){var wt=[],Tt=_t.events!==void 0,At=new Ou(_t,!0),Ot=new Ou(_t,!1),Nt=this.rightSE;this.replaceRightSE(Ot),wt.push(Ot),wt.push(At);var jt=new vt(At,Nt,this.rings.slice(),this.windings.slice());return Ou.comparePoints(jt.leftSE.point,jt.rightSE.point)>0&&jt.swapEvents(),Ou.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Tt&&(At.checkForConsuming(),Ot.checkForConsuming()),wt}},{key:"swapEvents",value:function(){var _t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=_t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var wt=0,Tt=this.windings.length;wt<Tt;wt++)this.windings[wt]*=-1}},{key:"consume",value:function(_t){for(var wt=this,Tt=_t;wt.consumedBy;)wt=wt.consumedBy;for(;Tt.consumedBy;)Tt=Tt.consumedBy;var At=vt.compare(wt,Tt);if(At!==0){if(At>0){var Ot=wt;wt=Tt,Tt=Ot}if(wt.prev===Tt){var Nt=wt;wt=Tt,Tt=Nt}for(var jt=0,Gt=Tt.rings.length;jt<Gt;jt++){var qt=Tt.rings[jt],en=Tt.windings[jt],Xt=wt.rings.indexOf(qt);Xt===-1?(wt.rings.push(qt),wt.windings.push(en)):wt.windings[Xt]+=en}Tt.rings=null,Tt.windings=null,Tt.consumedBy=wt,Tt.leftSE.consumedBy=wt.leftSE,Tt.rightSE.consumedBy=wt.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var _t=this.prev.consumedBy||this.prev;this._beforeState=_t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var _t=this.beforeState();this._afterState={rings:_t.rings.slice(0),windings:_t.windings.slice(0),multiPolys:[]};for(var wt=this._afterState.rings,Tt=this._afterState.windings,At=this._afterState.multiPolys,Ot=0,Nt=this.rings.length;Ot<Nt;Ot++){var jt=this.rings[Ot],Gt=this.windings[Ot],qt=wt.indexOf(jt);qt===-1?(wt.push(jt),Tt.push(Gt)):Tt[qt]+=Gt}for(var en=[],Xt=[],sn=0,yn=wt.length;sn<yn;sn++)if(Tt[sn]!==0){var vn=wt[sn],wn=vn.poly;if(Xt.indexOf(wn)===-1)if(vn.isExterior)en.push(wn);else{Xt.indexOf(wn)===-1&&Xt.push(wn);var un=en.indexOf(vn.poly);un!==-1&&en.splice(un,1)}}for(var Fn=0,Qn=en.length;Fn<Qn;Fn++){var _n=en[Fn].multiPoly;At.indexOf(_n)===-1&&At.push(_n)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var _t=this.beforeState().multiPolys,wt=this.afterState().multiPolys;switch(lu.type){case"union":var Tt=_t.length===0,At=wt.length===0;this._isInResult=Tt!==At;break;case"intersection":var Ot,Nt;_t.length<wt.length?(Ot=_t.length,Nt=wt.length):(Ot=wt.length,Nt=_t.length),this._isInResult=Nt===lu.numMultiPolys&&Ot<Nt;break;case"xor":var jt=Math.abs(_t.length-wt.length);this._isInResult=jt%2==1;break;case"difference":var Gt=function(qt){return qt.length===1&&qt[0].isSubject};this._isInResult=Gt(_t)!==Gt(wt);break;default:throw new Error("Unrecognized operation type found ".concat(lu.type))}return this._isInResult}}],[{key:"fromRing",value:function(_t,wt,Tt){var At,Ot,Nt,jt=Ou.comparePoints(_t,wt);if(jt<0)At=_t,Ot=wt,Nt=1;else{if(!(jt>0))throw new Error("Tried to create degenerate segment at [".concat(_t.x,", ").concat(_t.y,"]"));At=wt,Ot=_t,Nt=-1}return new vt(new Ou(At,!0),new Ou(Ot,!1),[Tt],[Nt])}}]),vt}(),cy=function(){function vt(_t,wt,Tt){if(Dl(this,vt),!Array.isArray(_t)||_t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=wt,this.isExterior=Tt,this.segments=[],typeof _t[0][0]!="number"||typeof _t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var At=$p.round(_t[0][0],_t[0][1]);this.bbox={ll:{x:At.x,y:At.y},ur:{x:At.x,y:At.y}};for(var Ot=At,Nt=1,jt=_t.length;Nt<jt;Nt++){if(typeof _t[Nt][0]!="number"||typeof _t[Nt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Gt=$p.round(_t[Nt][0],_t[Nt][1]);Gt.x===Ot.x&&Gt.y===Ot.y||(this.segments.push(qg.fromRing(Ot,Gt,this)),Gt.x<this.bbox.ll.x&&(this.bbox.ll.x=Gt.x),Gt.y<this.bbox.ll.y&&(this.bbox.ll.y=Gt.y),Gt.x>this.bbox.ur.x&&(this.bbox.ur.x=Gt.x),Gt.y>this.bbox.ur.y&&(this.bbox.ur.y=Gt.y),Ot=Gt)}At.x===Ot.x&&At.y===Ot.y||this.segments.push(qg.fromRing(Ot,At,this))}return Al(vt,[{key:"getSweepEvents",value:function(){for(var _t=[],wt=0,Tt=this.segments.length;wt<Tt;wt++){var At=this.segments[wt];_t.push(At.leftSE),_t.push(At.rightSE)}return _t}}]),vt}(),Xv=function(){function vt(_t,wt){if(Dl(this,vt),!Array.isArray(_t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new cy(_t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Tt=1,At=_t.length;Tt<At;Tt++){var Ot=new cy(_t[Tt],this,!1);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.interiorRings.push(Ot)}this.multiPoly=wt}return Al(vt,[{key:"getSweepEvents",value:function(){for(var _t=this.exteriorRing.getSweepEvents(),wt=0,Tt=this.interiorRings.length;wt<Tt;wt++)for(var At=this.interiorRings[wt].getSweepEvents(),Ot=0,Nt=At.length;Ot<Nt;Ot++)_t.push(At[Ot]);return _t}}]),vt}(),uy=function(){function vt(_t,wt){if(Dl(this,vt),!Array.isArray(_t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof _t[0][0][0]=="number"&&(_t=[_t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Tt=0,At=_t.length;Tt<At;Tt++){var Ot=new Xv(_t[Tt],this);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.polys.push(Ot)}this.isSubject=wt}return Al(vt,[{key:"getSweepEvents",value:function(){for(var _t=[],wt=0,Tt=this.polys.length;wt<Tt;wt++)for(var At=this.polys[wt].getSweepEvents(),Ot=0,Nt=At.length;Ot<Nt;Ot++)_t.push(At[Ot]);return _t}}]),vt}(),hy=function(){function vt(_t){Dl(this,vt),this.events=_t;for(var wt=0,Tt=_t.length;wt<Tt;wt++)_t[wt].segment.ringOut=this;this.poly=null}return Al(vt,null,[{key:"factory",value:function(_t){for(var wt=[],Tt=0,At=_t.length;Tt<At;Tt++){var Ot=_t[Tt];if(Ot.isInResult()&&!Ot.ringOut){for(var Nt=null,jt=Ot.leftSE,Gt=Ot.rightSE,qt=[jt],en=jt.point,Xt=[];Nt=jt,jt=Gt,qt.push(jt),jt.point!==en;)for(;;){var sn=jt.getAvailableLinkedEvents();if(sn.length===0){var yn=qt[0].point,vn=qt[qt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(yn.x,",")+" ".concat(yn.y,"]. Last matching segment found ends at")+" [".concat(vn.x,", ").concat(vn.y,"]."))}if(sn.length===1){Gt=sn[0].otherSE;break}for(var wn=null,un=0,Fn=Xt.length;un<Fn;un++)if(Xt[un].point===jt.point){wn=un;break}if(wn===null){Xt.push({index:qt.length,point:jt.point});var Qn=jt.getLeftmostComparator(Nt);Gt=sn.sort(Qn)[0].otherSE;break}var _n=Xt.splice(wn)[0],Bn=qt.splice(_n.index);Bn.unshift(Bn[0].otherSE),wt.push(new vt(Bn.reverse()))}wt.push(new vt(qt))}}return wt}}]),Al(vt,[{key:"getGeom",value:function(){for(var _t=this.events[0].point,wt=[_t],Tt=1,At=this.events.length-1;Tt<At;Tt++){var Ot=this.events[Tt].point,Nt=this.events[Tt+1].point;oy(Ot,_t,Nt)!==0&&(wt.push(Ot),_t=Ot)}if(wt.length===1)return null;var jt=wt[0],Gt=wt[1];oy(jt,_t,Gt)===0&&wt.shift(),wt.push(wt[0]);for(var qt=this.isExteriorRing()?1:-1,en=this.isExteriorRing()?0:wt.length-1,Xt=this.isExteriorRing()?wt.length:-1,sn=[],yn=en;yn!=Xt;yn+=qt)sn.push([wt[yn].x,wt[yn].y]);return sn}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var _t=this.enclosingRing();this._isExteriorRing=!_t||!_t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var _t=this.events[0],wt=1,Tt=this.events.length;wt<Tt;wt++){var At=this.events[wt];Ou.compare(_t,At)>0&&(_t=At)}for(var Ot=_t.segment.prevInResult(),Nt=Ot?Ot.prevInResult():null;;){if(!Ot)return null;if(!Nt)return Ot.ringOut;if(Nt.ringOut!==Ot.ringOut)return Nt.ringOut.enclosingRing()!==Ot.ringOut?Ot.ringOut:Ot.ringOut.enclosingRing();Ot=Nt.prevInResult(),Nt=Ot?Ot.prevInResult():null}}}]),vt}(),dy=function(){function vt(_t){Dl(this,vt),this.exteriorRing=_t,_t.poly=this,this.interiorRings=[]}return Al(vt,[{key:"addInterior",value:function(_t){this.interiorRings.push(_t),_t.poly=this}},{key:"getGeom",value:function(){var _t=[this.exteriorRing.getGeom()];if(_t[0]===null)return null;for(var wt=0,Tt=this.interiorRings.length;wt<Tt;wt++){var At=this.interiorRings[wt].getGeom();At!==null&&_t.push(At)}return _t}}]),vt}(),Zv=function(){function vt(_t){Dl(this,vt),this.rings=_t,this.polys=this._composePolys(_t)}return Al(vt,[{key:"getGeom",value:function(){for(var _t=[],wt=0,Tt=this.polys.length;wt<Tt;wt++){var At=this.polys[wt].getGeom();At!==null&&_t.push(At)}return _t}},{key:"_composePolys",value:function(_t){for(var wt=[],Tt=0,At=_t.length;Tt<At;Tt++){var Ot=_t[Tt];if(!Ot.poly)if(Ot.isExteriorRing())wt.push(new dy(Ot));else{var Nt=Ot.enclosingRing();Nt.poly||wt.push(new dy(Nt)),Nt.poly.addInterior(Ot)}}return wt}}]),vt}(),Kv=function(){function vt(_t){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qg.compare;Dl(this,vt),this.queue=_t,this.tree=new C0(wt),this.segments=[]}return Al(vt,[{key:"process",value:function(_t){var wt=_t.segment,Tt=[];if(_t.consumedBy)return _t.isLeft?this.queue.remove(_t.otherSE):this.tree.remove(wt),Tt;var At=_t.isLeft?this.tree.insert(wt):this.tree.find(wt);if(!At)throw new Error("Unable to find segment #".concat(wt.id," ")+"[".concat(wt.leftSE.point.x,", ").concat(wt.leftSE.point.y,"] -> ")+"[".concat(wt.rightSE.point.x,", ").concat(wt.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Ot=At,Nt=At,jt=void 0,Gt=void 0;jt===void 0;)(Ot=this.tree.prev(Ot))===null?jt=null:Ot.key.consumedBy===void 0&&(jt=Ot.key);for(;Gt===void 0;)(Nt=this.tree.next(Nt))===null?Gt=null:Nt.key.consumedBy===void 0&&(Gt=Nt.key);if(_t.isLeft){var qt=null;if(jt){var en=jt.getIntersection(wt);if(en!==null&&(wt.isAnEndpoint(en)||(qt=en),!jt.isAnEndpoint(en)))for(var Xt=this._splitSafely(jt,en),sn=0,yn=Xt.length;sn<yn;sn++)Tt.push(Xt[sn])}var vn=null;if(Gt){var wn=Gt.getIntersection(wt);if(wn!==null&&(wt.isAnEndpoint(wn)||(vn=wn),!Gt.isAnEndpoint(wn)))for(var un=this._splitSafely(Gt,wn),Fn=0,Qn=un.length;Fn<Qn;Fn++)Tt.push(un[Fn])}if(qt!==null||vn!==null){var _n=null;qt===null?_n=vn:vn===null?_n=qt:_n=Ou.comparePoints(qt,vn)<=0?qt:vn,this.queue.remove(wt.rightSE),Tt.push(wt.rightSE);for(var Bn=wt.split(_n),Hn=0,Gn=Bn.length;Hn<Gn;Hn++)Tt.push(Bn[Hn])}Tt.length>0?(this.tree.remove(wt),Tt.push(_t)):(this.segments.push(wt),wt.prev=jt)}else{if(jt&&Gt){var Vn=jt.getIntersection(Gt);if(Vn!==null){if(!jt.isAnEndpoint(Vn))for(var Ur=this._splitSafely(jt,Vn),$r=0,Yr=Ur.length;$r<Yr;$r++)Tt.push(Ur[$r]);if(!Gt.isAnEndpoint(Vn))for(var Mr=this._splitSafely(Gt,Vn),Qr=0,Hr=Mr.length;Qr<Hr;Qr++)Tt.push(Mr[Qr])}}this.tree.remove(wt)}return Tt}},{key:"_splitSafely",value:function(_t,wt){this.tree.remove(_t);var Tt=_t.rightSE;this.queue.remove(Tt);var At=_t.split(wt);return At.push(Tt),_t.consumedBy===void 0&&this.tree.insert(_t),At}}]),vt}(),fy=typeof process<"u"&&{version:"2.0.0-beta.43"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Jv=typeof process<"u"&&{version:"2.0.0-beta.43"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,lu=new(function(){function vt(){Dl(this,vt)}return Al(vt,[{key:"run",value:function(_t,wt,Tt){lu.type=_t,$p.reset();for(var At=[new uy(wt,!0)],Ot=0,Nt=Tt.length;Ot<Nt;Ot++)At.push(new uy(Tt[Ot],!1));if(lu.numMultiPolys=At.length,lu.type==="difference")for(var jt=At[0],Gt=1;Gt<At.length;)Ug(At[Gt].bbox,jt.bbox)!==null?Gt++:At.splice(Gt,1);if(lu.type==="intersection"){for(var qt=0,en=At.length;qt<en;qt++)for(var Xt=At[qt],sn=qt+1,yn=At.length;sn<yn;sn++)if(Ug(Xt.bbox,At[sn].bbox)===null)return[]}for(var vn=new C0(Ou.compare),wn=0,un=At.length;wn<un;wn++)for(var Fn=At[wn].getSweepEvents(),Qn=0,_n=Fn.length;Qn<_n;Qn++)if(vn.insert(Fn[Qn]),vn.size>fy)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Bn=new Kv(vn),Hn=vn.size,Gn=vn.pop();Gn;){var Vn=Gn.key;if(vn.size===Hn){var Ur=Vn.segment;throw new Error("Unable to pop() ".concat(Vn.isLeft?"left":"right"," SweepEvent ")+"[".concat(Vn.point.x,", ").concat(Vn.point.y,"] from segment #").concat(Ur.id," ")+"[".concat(Ur.leftSE.point.x,", ").concat(Ur.leftSE.point.y,"] -> ")+"[".concat(Ur.rightSE.point.x,", ").concat(Ur.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(vn.size>fy)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Bn.segments.length>Jv)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var $r=Bn.process(Vn),Yr=0,Mr=$r.length;Yr<Mr;Yr++){var Qr=$r[Yr];Qr.consumedBy===void 0&&vn.insert(Qr)}Hn=vn.size,Gn=vn.pop()}$p.reset();var Hr=hy.factory(Bn.segments);return new Zv(Hr).getGeom()}}]),vt}()),dh={union:function(vt){for(var _t=arguments.length,wt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("union",vt,wt)},intersection:function(vt){for(var _t=arguments.length,wt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("intersection",vt,wt)},xor:function(vt){for(var _t=arguments.length,wt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("xor",vt,wt)},difference:function(vt){for(var _t=arguments.length,wt=new Array(_t>1?_t-1:0),Tt=1;Tt<_t;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("difference",vt,wt)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(vt){if(this==null)throw new TypeError(this+" is not an object");var _t=Object(this),wt=Math.max(Math.min(_t.length,9007199254740991),0)||0,Tt=1 in arguments&&parseInt(Number(arguments[1]),10)||0;Tt=Tt<0?Math.max(wt+Tt,0):Math.min(Tt,wt);var At=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:wt;for(At=At<0?Math.max(wt+arguments[2],0):Math.min(At,wt);Tt<At;)_t[Tt]=vt,++Tt;return _t},writable:!0}),Number.isFinite=Number.isFinite||function(vt){return typeof vt=="number"&&isFinite(vt)},Number.isInteger=Number.isInteger||function(vt){return typeof vt=="number"&&isFinite(vt)&&Math.floor(vt)===vt},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(vt){return vt!=vt},Math.trunc=Math.trunc||function(vt){return vt<0?Math.ceil(vt):Math.floor(vt)};var Td=function(){};Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.prototype.equalsWithTolerance=function(vt,_t,wt){return Math.abs(vt-_t)<=wt};var Ds=function(vt){function _t(wt){vt.call(this,wt),this.name="IllegalArgumentException",this.message=wt,this.stack=new vt().stack}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t}(Error),ho=function(){},py={MAX_VALUE:{configurable:!0}};ho.isNaN=function(vt){return Number.isNaN(vt)},ho.doubleToLongBits=function(vt){return vt},ho.longBitsToDouble=function(vt){return vt},ho.isInfinite=function(vt){return!Number.isFinite(vt)},py.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ho,py);var Jl=function(){},Mp=function(){},kf=function(){};function Ql(){}var Dr=function vt(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=vt.NULL_ORDINATE;else if(arguments.length===1){var _t=arguments[0];this.x=_t.x,this.y=_t.y,this.z=_t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=vt.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},kd={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Dr.prototype.setOrdinate=function(vt,_t){switch(vt){case Dr.X:this.x=_t;break;case Dr.Y:this.y=_t;break;case Dr.Z:this.z=_t;break;default:throw new Ds("Invalid ordinate index: "+vt)}},Dr.prototype.equals2D=function(){if(arguments.length===1){var vt=arguments[0];return this.x===vt.x&&this.y===vt.y}if(arguments.length===2){var _t=arguments[0],wt=arguments[1];return!!Td.equalsWithTolerance(this.x,_t.x,wt)&&!!Td.equalsWithTolerance(this.y,_t.y,wt)}},Dr.prototype.getOrdinate=function(vt){switch(vt){case Dr.X:return this.x;case Dr.Y:return this.y;case Dr.Z:return this.z}throw new Ds("Invalid ordinate index: "+vt)},Dr.prototype.equals3D=function(vt){return this.x===vt.x&&this.y===vt.y&&(this.z===vt.z||ho.isNaN(this.z))&&ho.isNaN(vt.z)},Dr.prototype.equals=function(vt){return vt instanceof Dr&&this.equals2D(vt)},Dr.prototype.equalInZ=function(vt,_t){return Td.equalsWithTolerance(this.z,vt.z,_t)},Dr.prototype.compareTo=function(vt){var _t=vt;return this.x<_t.x?-1:this.x>_t.x?1:this.y<_t.y?-1:this.y>_t.y?1:0},Dr.prototype.clone=function(){},Dr.prototype.copy=function(){return new Dr(this)},Dr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Dr.prototype.distance3D=function(vt){var _t=this.x-vt.x,wt=this.y-vt.y,Tt=this.z-vt.z;return Math.sqrt(_t*_t+wt*wt+Tt*Tt)},Dr.prototype.distance=function(vt){var _t=this.x-vt.x,wt=this.y-vt.y;return Math.sqrt(_t*_t+wt*wt)},Dr.prototype.hashCode=function(){var vt=17;return vt=37*(vt=37*vt+Dr.hashCode(this.x))+Dr.hashCode(this.y)},Dr.prototype.setCoordinate=function(vt){this.x=vt.x,this.y=vt.y,this.z=vt.z},Dr.prototype.interfaces_=function(){return[Jl,Mp,Ql]},Dr.prototype.getClass=function(){return Dr},Dr.hashCode=function(){if(arguments.length===1){var vt=arguments[0],_t=ho.doubleToLongBits(vt);return Math.trunc((_t^_t)>>>32)}},kd.DimensionalComparator.get=function(){return fh},kd.serialVersionUID.get=function(){return 6683108902428367e3},kd.NULL_ORDINATE.get=function(){return ho.NaN},kd.X.get=function(){return 0},kd.Y.get=function(){return 1},kd.Z.get=function(){return 2},Object.defineProperties(Dr,kd);var fh=function(vt){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var _t=arguments[0];if(_t!==2&&_t!==3)throw new Ds("only 2 or 3 dimensions may be specified");this._dimensionsToTest=_t}}};fh.prototype.compare=function(vt,_t){var wt=vt,Tt=_t,At=fh.compare(wt.x,Tt.x);if(At!==0)return At;var Ot=fh.compare(wt.y,Tt.y);return Ot!==0?Ot:this._dimensionsToTest<=2?0:fh.compare(wt.z,Tt.z)},fh.prototype.interfaces_=function(){return[kf]},fh.prototype.getClass=function(){return fh},fh.compare=function(vt,_t){return vt<_t?-1:vt>_t?1:ho.isNaN(vt)?ho.isNaN(_t)?0:-1:ho.isNaN(_t)?1:0};var Af=function(){};Af.prototype.create=function(){},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af};var Gr=function(){},Np={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.toLocationSymbol=function(vt){switch(vt){case Gr.EXTERIOR:return"e";case Gr.BOUNDARY:return"b";case Gr.INTERIOR:return"i";case Gr.NONE:return"-"}throw new Ds("Unknown location value: "+vt)},Np.INTERIOR.get=function(){return 0},Np.BOUNDARY.get=function(){return 1},Np.EXTERIOR.get=function(){return 2},Np.NONE.get=function(){return-1},Object.defineProperties(Gr,Np);var to=function(vt,_t){return vt.interfaces_&&vt.interfaces_().indexOf(_t)>-1},Bl=function(){},gy={LOG_10:{configurable:!0}};Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Bl.log10=function(vt){var _t=Math.log(vt);return ho.isInfinite(_t)||ho.isNaN(_t)?_t:_t/Bl.LOG_10},Bl.min=function(vt,_t,wt,Tt){var At=vt;return _t<At&&(At=_t),wt<At&&(At=wt),Tt<At&&(At=Tt),At},Bl.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],_t=arguments[1],wt=arguments[2];return vt<_t?_t:vt>wt?wt:vt}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];return Tt<At?At:Tt>Ot?Ot:Tt}},Bl.wrap=function(vt,_t){return vt<0?_t- -vt%_t:vt%_t},Bl.max=function(){if(arguments.length===3){var vt=arguments[0],_t=arguments[1],wt=arguments[2],Tt=vt;return _t>Tt&&(Tt=_t),wt>Tt&&(Tt=wt),Tt}if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Nt=arguments[2],jt=arguments[3],Gt=At;return Ot>Gt&&(Gt=Ot),Nt>Gt&&(Gt=Nt),jt>Gt&&(Gt=jt),Gt}},Bl.average=function(vt,_t){return(vt+_t)/2},gy.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Bl,gy);var Fc=function(vt){this.str=vt};Fc.prototype.append=function(vt){this.str+=vt},Fc.prototype.setCharAt=function(vt,_t){this.str=this.str.substr(0,vt)+_t+this.str.substr(vt+1)},Fc.prototype.toString=function(vt){return this.str};var zc=function(vt){this.value=vt};zc.prototype.intValue=function(){return this.value},zc.prototype.compareTo=function(vt){return this.value<vt?-1:this.value>vt?1:0},zc.isNaN=function(vt){return Number.isNaN(vt)};var Dp=function(){};Dp.isWhitespace=function(vt){return vt<=32&&vt>=0||vt===127},Dp.toUpperCase=function(vt){return vt.toUpperCase()};var Kr=function vt(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var _t=arguments[0];this.init(_t)}else if(arguments[0]instanceof vt){var wt=arguments[0];this.init(wt)}else if(typeof arguments[0]=="string"){var Tt=arguments[0];vt.call(this,vt.parse(Tt))}}else if(arguments.length===2){var At=arguments[0],Ot=arguments[1];this.init(At,Ot)}},mc={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Kr.prototype.le=function(vt){return(this._hi<vt._hi||this._hi===vt._hi)&&this._lo<=vt._lo},Kr.prototype.extractSignificantDigits=function(vt,_t){var wt=this.abs(),Tt=Kr.magnitude(wt._hi),At=Kr.TEN.pow(Tt);(wt=wt.divide(At)).gt(Kr.TEN)?(wt=wt.divide(Kr.TEN),Tt+=1):wt.lt(Kr.ONE)&&(wt=wt.multiply(Kr.TEN),Tt-=1);for(var Ot=Tt+1,Nt=new Fc,jt=Kr.MAX_PRINT_DIGITS-1,Gt=0;Gt<=jt;Gt++){vt&&Gt===Ot&&Nt.append(".");var qt=Math.trunc(wt._hi);if(qt<0)break;var en=!1,Xt=0;qt>9?(en=!0,Xt="9"):Xt="0"+qt,Nt.append(Xt),wt=wt.subtract(Kr.valueOf(qt)).multiply(Kr.TEN),en&&wt.selfAdd(Kr.TEN);var sn=!0,yn=Kr.magnitude(wt._hi);if(yn<0&&Math.abs(yn)>=jt-Gt&&(sn=!1),!sn)break}return _t[0]=Tt,Nt.toString()},Kr.prototype.sqr=function(){return this.multiply(this)},Kr.prototype.doubleValue=function(){return this._hi+this._lo},Kr.prototype.subtract=function(){if(arguments[0]instanceof Kr){var vt=arguments[0];return this.add(vt.negate())}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.add(-_t)}},Kr.prototype.equals=function(){if(arguments.length===1){var vt=arguments[0];return this._hi===vt._hi&&this._lo===vt._lo}},Kr.prototype.isZero=function(){return this._hi===0&&this._lo===0},Kr.prototype.selfSubtract=function(){if(arguments[0]instanceof Kr){var vt=arguments[0];return this.isNaN()?this:this.selfAdd(-vt._hi,-vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.isNaN()?this:this.selfAdd(-_t,0)}},Kr.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Kr.prototype.min=function(vt){return this.le(vt)?this:vt},Kr.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof Kr){var vt=arguments[0];return this.selfDivide(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.selfDivide(_t,0)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=null,Ot=null,Nt=null,jt=null,Gt=null,qt=null,en=null,Xt=null;return Gt=this._hi/wt,Xt=(At=(qt=Kr.SPLIT*Gt)-(At=qt-Gt))*(Nt=(Xt=Kr.SPLIT*wt)-(Nt=Xt-wt))-(en=Gt*wt)+At*(jt=wt-Nt)+(Ot=Gt-At)*Nt+Ot*jt,Xt=Gt+(qt=(this._hi-en-Xt+this._lo-Gt*Tt)/wt),this._hi=Xt,this._lo=Gt-Xt+qt,this}},Kr.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Kr.prototype.divide=function(){if(arguments[0]instanceof Kr){var vt=arguments[0],_t=null,wt=null,Tt=null,At=null,Ot=null,Nt=null,jt=null,Gt=null;wt=(Ot=this._hi/vt._hi)-(_t=(Nt=Kr.SPLIT*Ot)-(_t=Nt-Ot)),Gt=_t*(Tt=(Gt=Kr.SPLIT*vt._hi)-(Tt=Gt-vt._hi))-(jt=Ot*vt._hi)+_t*(At=vt._hi-Tt)+wt*Tt+wt*At;var qt=Gt=Ot+(Nt=(this._hi-jt-Gt+this._lo-Ot*vt._lo)/vt._hi),en=Ot-Gt+Nt;return new Kr(qt,en)}if(typeof arguments[0]=="number"){var Xt=arguments[0];return ho.isNaN(Xt)?Kr.createNaN():Kr.copy(this).selfDivide(Xt,0)}},Kr.prototype.ge=function(vt){return(this._hi>vt._hi||this._hi===vt._hi)&&this._lo>=vt._lo},Kr.prototype.pow=function(vt){if(vt===0)return Kr.valueOf(1);var _t=new Kr(this),wt=Kr.valueOf(1),Tt=Math.abs(vt);if(Tt>1)for(;Tt>0;)Tt%2==1&&wt.selfMultiply(_t),(Tt/=2)>0&&(_t=_t.sqr());else wt=_t;return vt<0?wt.reciprocal():wt},Kr.prototype.ceil=function(){if(this.isNaN())return Kr.NaN;var vt=Math.ceil(this._hi),_t=0;return vt===this._hi&&(_t=Math.ceil(this._lo)),new Kr(vt,_t)},Kr.prototype.compareTo=function(vt){var _t=vt;return this._hi<_t._hi?-1:this._hi>_t._hi?1:this._lo<_t._lo?-1:this._lo>_t._lo?1:0},Kr.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Kr.prototype.setValue=function(){if(arguments[0]instanceof Kr){var vt=arguments[0];return this.init(vt),this}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.init(_t),this}},Kr.prototype.max=function(vt){return this.ge(vt)?this:vt},Kr.prototype.sqrt=function(){if(this.isZero())return Kr.valueOf(0);if(this.isNegative())return Kr.NaN;var vt=1/Math.sqrt(this._hi),_t=this._hi*vt,wt=Kr.valueOf(_t),Tt=this.subtract(wt.sqr())._hi*(.5*vt);return wt.add(Tt)},Kr.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof Kr){var vt=arguments[0];return this.selfAdd(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0],wt=null,Tt=null,At=null,Ot=null,Nt=null,jt=null;return Ot=(At=this._hi+_t)-(Nt=At-this._hi),Tt=(jt=(Ot=_t-Nt+(this._hi-Ot))+this._lo)+(At-(wt=At+jt)),this._hi=wt+Tt,this._lo=Tt+(wt-this._hi),this}}else if(arguments.length===2){var Gt=arguments[0],qt=arguments[1],en=null,Xt=null,sn=null,yn=null,vn=null,wn=null,un=null;yn=this._hi+Gt,Xt=this._lo+qt,vn=yn-(wn=yn-this._hi),sn=Xt-(un=Xt-this._lo);var Fn=(en=yn+(wn=(vn=Gt-wn+(this._hi-vn))+Xt))+(wn=(sn=qt-un+(this._lo-sn))+(wn+(yn-en))),Qn=wn+(en-Fn);return this._hi=Fn,this._lo=Qn,this}},Kr.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof Kr){var vt=arguments[0];return this.selfMultiply(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var _t=arguments[0];return this.selfMultiply(_t,0)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=null,Ot=null,Nt=null,jt=null,Gt=null,qt=null;At=(Gt=Kr.SPLIT*this._hi)-this._hi,qt=Kr.SPLIT*wt,At=Gt-At,Ot=this._hi-At,Nt=qt-wt;var en=(Gt=this._hi*wt)+(qt=At*(Nt=qt-Nt)-Gt+At*(jt=wt-Nt)+Ot*Nt+Ot*jt+(this._hi*Tt+this._lo*wt)),Xt=qt+(At=Gt-en);return this._hi=en,this._lo=Xt,this}},Kr.prototype.selfSqr=function(){return this.selfMultiply(this)},Kr.prototype.floor=function(){if(this.isNaN())return Kr.NaN;var vt=Math.floor(this._hi),_t=0;return vt===this._hi&&(_t=Math.floor(this._lo)),new Kr(vt,_t)},Kr.prototype.negate=function(){return this.isNaN()?this:new Kr(-this._hi,-this._lo)},Kr.prototype.clone=function(){},Kr.prototype.multiply=function(){if(arguments[0]instanceof Kr){var vt=arguments[0];return vt.isNaN()?Kr.createNaN():Kr.copy(this).selfMultiply(vt)}if(typeof arguments[0]=="number"){var _t=arguments[0];return ho.isNaN(_t)?Kr.createNaN():Kr.copy(this).selfMultiply(_t,0)}},Kr.prototype.isNaN=function(){return ho.isNaN(this._hi)},Kr.prototype.intValue=function(){return Math.trunc(this._hi)},Kr.prototype.toString=function(){var vt=Kr.magnitude(this._hi);return vt>=-3&&vt<=20?this.toStandardNotation():this.toSciNotation()},Kr.prototype.toStandardNotation=function(){var vt=this.getSpecialNumberString();if(vt!==null)return vt;var _t=new Array(1).fill(null),wt=this.extractSignificantDigits(!0,_t),Tt=_t[0]+1,At=wt;if(wt.charAt(0)===".")At="0"+wt;else if(Tt<0)At="0."+Kr.stringOfChar("0",-Tt)+wt;else if(wt.indexOf(".")===-1){var Ot=Tt-wt.length;At=wt+Kr.stringOfChar("0",Ot)+".0"}return this.isNegative()?"-"+At:At},Kr.prototype.reciprocal=function(){var vt,_t,wt,Tt,At=null,Ot=null,Nt=null,jt=null;vt=(wt=1/this._hi)-(At=(Nt=Kr.SPLIT*wt)-(At=Nt-wt)),Ot=(jt=Kr.SPLIT*this._hi)-this._hi;var Gt=wt+(Nt=(1-(Tt=wt*this._hi)-(jt=At*(Ot=jt-Ot)-Tt+At*(_t=this._hi-Ot)+vt*Ot+vt*_t)-wt*this._lo)/this._hi);return new Kr(Gt,wt-Gt+Nt)},Kr.prototype.toSciNotation=function(){if(this.isZero())return Kr.SCI_NOT_ZERO;var vt=this.getSpecialNumberString();if(vt!==null)return vt;var _t=new Array(1).fill(null),wt=this.extractSignificantDigits(!1,_t),Tt=Kr.SCI_NOT_EXPONENT_CHAR+_t[0];if(wt.charAt(0)==="0")throw new Error("Found leading zero: "+wt);var At="";wt.length>1&&(At=wt.substring(1));var Ot=wt.charAt(0)+"."+At;return this.isNegative()?"-"+Ot+Tt:Ot+Tt},Kr.prototype.abs=function(){return this.isNaN()?Kr.NaN:this.isNegative()?this.negate():new Kr(this)},Kr.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},Kr.prototype.lt=function(vt){return(this._hi<vt._hi||this._hi===vt._hi)&&this._lo<vt._lo},Kr.prototype.add=function(){if(arguments[0]instanceof Kr){var vt=arguments[0];return Kr.copy(this).selfAdd(vt)}if(typeof arguments[0]=="number"){var _t=arguments[0];return Kr.copy(this).selfAdd(_t)}},Kr.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var vt=arguments[0];this._hi=vt,this._lo=0}else if(arguments[0]instanceof Kr){var _t=arguments[0];this._hi=_t._hi,this._lo=_t._lo}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this._hi=wt,this._lo=Tt}},Kr.prototype.gt=function(vt){return(this._hi>vt._hi||this._hi===vt._hi)&&this._lo>vt._lo},Kr.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},Kr.prototype.trunc=function(){return this.isNaN()?Kr.NaN:this.isPositive()?this.floor():this.ceil()},Kr.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Kr.prototype.interfaces_=function(){return[Ql,Jl,Mp]},Kr.prototype.getClass=function(){return Kr},Kr.sqr=function(vt){return Kr.valueOf(vt).selfMultiply(vt)},Kr.valueOf=function(){if(typeof arguments[0]=="string"){var vt=arguments[0];return Kr.parse(vt)}if(typeof arguments[0]=="number"){var _t=arguments[0];return new Kr(_t)}},Kr.sqrt=function(vt){return Kr.valueOf(vt).sqrt()},Kr.parse=function(vt){for(var _t=0,wt=vt.length;Dp.isWhitespace(vt.charAt(_t));)_t++;var Tt=!1;if(_t<wt){var At=vt.charAt(_t);At!=="-"&&At!=="+"||(_t++,At==="-"&&(Tt=!0))}for(var Ot=new Kr,Nt=0,jt=0,Gt=0;!(_t>=wt);){var qt=vt.charAt(_t);if(_t++,Dp.isDigit(qt)){var en=qt-"0";Ot.selfMultiply(Kr.TEN),Ot.selfAdd(en),Nt++}else{if(qt!=="."){if(qt==="e"||qt==="E"){var Xt=vt.substring(_t);try{Gt=zc.parseInt(Xt)}catch(un){throw un instanceof Error?new Error("Invalid exponent "+Xt+" in string "+vt):un}break}throw new Error("Unexpected character '"+qt+"' at position "+_t+" in string "+vt)}jt=Nt}}var sn=Ot,yn=Nt-jt-Gt;if(yn===0)sn=Ot;else if(yn>0){var vn=Kr.TEN.pow(yn);sn=Ot.divide(vn)}else if(yn<0){var wn=Kr.TEN.pow(-yn);sn=Ot.multiply(wn)}return Tt?sn.negate():sn},Kr.createNaN=function(){return new Kr(ho.NaN,ho.NaN)},Kr.copy=function(vt){return new Kr(vt)},Kr.magnitude=function(vt){var _t=Math.abs(vt),wt=Math.log(_t)/Math.log(10),Tt=Math.trunc(Math.floor(wt));return 10*Math.pow(10,Tt)<=_t&&(Tt+=1),Tt},Kr.stringOfChar=function(vt,_t){for(var wt=new Fc,Tt=0;Tt<_t;Tt++)wt.append(vt);return wt.toString()},mc.PI.get=function(){return new Kr(3.141592653589793,12246467991473532e-32)},mc.TWO_PI.get=function(){return new Kr(6.283185307179586,24492935982947064e-32)},mc.PI_2.get=function(){return new Kr(1.5707963267948966,6123233995736766e-32)},mc.E.get=function(){return new Kr(2.718281828459045,14456468917292502e-32)},mc.NaN.get=function(){return new Kr(ho.NaN,ho.NaN)},mc.EPS.get=function(){return 123259516440783e-46},mc.SPLIT.get=function(){return 134217729},mc.MAX_PRINT_DIGITS.get=function(){return 32},mc.TEN.get=function(){return Kr.valueOf(10)},mc.ONE.get=function(){return Kr.valueOf(1)},mc.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},mc.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Kr,mc);var pl=function(){},my={DP_SAFE_EPSILON:{configurable:!0}};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.orientationIndex=function(vt,_t,wt){var Tt=pl.orientationIndexFilter(vt,_t,wt);if(Tt<=1)return Tt;var At=Kr.valueOf(_t.x).selfAdd(-vt.x),Ot=Kr.valueOf(_t.y).selfAdd(-vt.y),Nt=Kr.valueOf(wt.x).selfAdd(-_t.x),jt=Kr.valueOf(wt.y).selfAdd(-_t.y);return At.selfMultiply(jt).selfSubtract(Ot.selfMultiply(Nt)).signum()},pl.signOfDet2x2=function(vt,_t,wt,Tt){return vt.multiply(Tt).selfSubtract(_t.multiply(wt)).signum()},pl.intersection=function(vt,_t,wt,Tt){var At=Kr.valueOf(Tt.y).selfSubtract(wt.y).selfMultiply(Kr.valueOf(_t.x).selfSubtract(vt.x)),Ot=Kr.valueOf(Tt.x).selfSubtract(wt.x).selfMultiply(Kr.valueOf(_t.y).selfSubtract(vt.y)),Nt=At.subtract(Ot),jt=Kr.valueOf(Tt.x).selfSubtract(wt.x).selfMultiply(Kr.valueOf(vt.y).selfSubtract(wt.y)),Gt=Kr.valueOf(Tt.y).selfSubtract(wt.y).selfMultiply(Kr.valueOf(vt.x).selfSubtract(wt.x)),qt=jt.subtract(Gt).selfDivide(Nt).doubleValue(),en=Kr.valueOf(vt.x).selfAdd(Kr.valueOf(_t.x).selfSubtract(vt.x).selfMultiply(qt)).doubleValue(),Xt=Kr.valueOf(_t.x).selfSubtract(vt.x).selfMultiply(Kr.valueOf(vt.y).selfSubtract(wt.y)),sn=Kr.valueOf(_t.y).selfSubtract(vt.y).selfMultiply(Kr.valueOf(vt.x).selfSubtract(wt.x)),yn=Xt.subtract(sn).selfDivide(Nt).doubleValue(),vn=Kr.valueOf(wt.y).selfAdd(Kr.valueOf(Tt.y).selfSubtract(wt.y).selfMultiply(yn)).doubleValue();return new Dr(en,vn)},pl.orientationIndexFilter=function(vt,_t,wt){var Tt=null,At=(vt.x-wt.x)*(_t.y-wt.y),Ot=(vt.y-wt.y)*(_t.x-wt.x),Nt=At-Ot;if(At>0){if(Ot<=0)return pl.signum(Nt);Tt=At+Ot}else{if(!(At<0)||Ot>=0)return pl.signum(Nt);Tt=-At-Ot}var jt=pl.DP_SAFE_EPSILON*Tt;return Nt>=jt||-Nt>=jt?pl.signum(Nt):2},pl.signum=function(vt){return vt>0?1:vt<0?-1:0},my.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(pl,my);var qo=function(){},Bp={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Bp.X.get=function(){return 0},Bp.Y.get=function(){return 1},Bp.Z.get=function(){return 2},Bp.M.get=function(){return 3},qo.prototype.setOrdinate=function(vt,_t,wt){},qo.prototype.size=function(){},qo.prototype.getOrdinate=function(vt,_t){},qo.prototype.getCoordinate=function(){},qo.prototype.getCoordinateCopy=function(vt){},qo.prototype.getDimension=function(){},qo.prototype.getX=function(vt){},qo.prototype.clone=function(){},qo.prototype.expandEnvelope=function(vt){},qo.prototype.copy=function(){},qo.prototype.getY=function(vt){},qo.prototype.toCoordinateArray=function(){},qo.prototype.interfaces_=function(){return[Mp]},qo.prototype.getClass=function(){return qo},Object.defineProperties(qo,Bp);var yy=function(){},Ad=function(vt){function _t(){vt.call(this,"Projective point not representable on the Cartesian plane.")}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(yy),za=function(){};za.arraycopy=function(vt,_t,wt,Tt,At){for(var Ot=0,Nt=_t;Nt<_t+At;Nt++)wt[Tt+Ot]=vt[Nt],Ot++},za.getProperty=function(vt){return{"line.separator":`
`}[vt]};var ec=function vt(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var _t=arguments[0];this.x=_t.x,this.y=_t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var wt=arguments[0],Tt=arguments[1];this.x=wt,this.y=Tt,this.w=1}else if(arguments[0]instanceof vt&&arguments[1]instanceof vt){var At=arguments[0],Ot=arguments[1];this.x=At.y*Ot.w-Ot.y*At.w,this.y=Ot.x*At.w-At.x*Ot.w,this.w=At.x*Ot.y-Ot.x*At.y}else if(arguments[0]instanceof Dr&&arguments[1]instanceof Dr){var Nt=arguments[0],jt=arguments[1];this.x=Nt.y-jt.y,this.y=jt.x-Nt.x,this.w=Nt.x*jt.y-jt.x*Nt.y}}else if(arguments.length===3){var Gt=arguments[0],qt=arguments[1],en=arguments[2];this.x=Gt,this.y=qt,this.w=en}else if(arguments.length===4){var Xt=arguments[0],sn=arguments[1],yn=arguments[2],vn=arguments[3],wn=Xt.y-sn.y,un=sn.x-Xt.x,Fn=Xt.x*sn.y-sn.x*Xt.y,Qn=yn.y-vn.y,_n=vn.x-yn.x,Bn=yn.x*vn.y-vn.x*yn.y;this.x=un*Bn-_n*Fn,this.y=Qn*Fn-wn*Bn,this.w=wn*_n-Qn*un}};ec.prototype.getY=function(){var vt=this.y/this.w;if(ho.isNaN(vt)||ho.isInfinite(vt))throw new Ad;return vt},ec.prototype.getX=function(){var vt=this.x/this.w;if(ho.isNaN(vt)||ho.isInfinite(vt))throw new Ad;return vt},ec.prototype.getCoordinate=function(){var vt=new Dr;return vt.x=this.getX(),vt.y=this.getY(),vt},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.intersection=function(vt,_t,wt,Tt){var At=vt.y-_t.y,Ot=_t.x-vt.x,Nt=vt.x*_t.y-_t.x*vt.y,jt=wt.y-Tt.y,Gt=Tt.x-wt.x,qt=wt.x*Tt.y-Tt.x*wt.y,en=At*Gt-jt*Ot,Xt=(Ot*qt-Gt*Nt)/en,sn=(jt*Nt-At*qt)/en;if(ho.isNaN(Xt)||ho.isInfinite(Xt)||ho.isNaN(sn)||ho.isInfinite(sn))throw new Ad;return new Dr(Xt,sn)};var Vi=function vt(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Dr){var _t=arguments[0];this.init(_t.x,_t.x,_t.y,_t.y)}else if(arguments[0]instanceof vt){var wt=arguments[0];this.init(wt)}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.init(Tt.x,At.x,Tt.y,At.y)}else if(arguments.length===4){var Ot=arguments[0],Nt=arguments[1],jt=arguments[2],Gt=arguments[3];this.init(Ot,Nt,jt,Gt)}},vy={serialVersionUID:{configurable:!0}};Vi.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Vi.prototype.equals=function(vt){if(!(vt instanceof Vi))return!1;var _t=vt;return this.isNull()?_t.isNull():this._maxx===_t.getMaxX()&&this._maxy===_t.getMaxY()&&this._minx===_t.getMinX()&&this._miny===_t.getMinY()},Vi.prototype.intersection=function(vt){if(this.isNull()||vt.isNull()||!this.intersects(vt))return new Vi;var _t=this._minx>vt._minx?this._minx:vt._minx,wt=this._miny>vt._miny?this._miny:vt._miny,Tt=this._maxx<vt._maxx?this._maxx:vt._maxx,At=this._maxy<vt._maxy?this._maxy:vt._maxy;return new Vi(_t,Tt,wt,At)},Vi.prototype.isNull=function(){return this._maxx<this._minx},Vi.prototype.getMaxX=function(){return this._maxx},Vi.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Dr){var vt=arguments[0];return this.covers(vt.x,vt.y)}if(arguments[0]instanceof Vi){var _t=arguments[0];return!this.isNull()&&!_t.isNull()&&_t.getMinX()>=this._minx&&_t.getMaxX()<=this._maxx&&_t.getMinY()>=this._miny&&_t.getMaxY()<=this._maxy}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return!this.isNull()&&wt>=this._minx&&wt<=this._maxx&&Tt>=this._miny&&Tt<=this._maxy}},Vi.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Vi){var vt=arguments[0];return!this.isNull()&&!vt.isNull()&&!(vt._minx>this._maxx||vt._maxx<this._minx||vt._miny>this._maxy||vt._maxy<this._miny)}if(arguments[0]instanceof Dr){var _t=arguments[0];return this.intersects(_t.x,_t.y)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return!this.isNull()&&!(wt>this._maxx||wt<this._minx||Tt>this._maxy||Tt<this._miny)}},Vi.prototype.getMinY=function(){return this._miny},Vi.prototype.getMinX=function(){return this._minx},Vi.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Dr){var vt=arguments[0];this.expandToInclude(vt.x,vt.y)}else if(arguments[0]instanceof Vi){var _t=arguments[0];if(_t.isNull())return null;this.isNull()?(this._minx=_t.getMinX(),this._maxx=_t.getMaxX(),this._miny=_t.getMinY(),this._maxy=_t.getMaxY()):(_t._minx<this._minx&&(this._minx=_t._minx),_t._maxx>this._maxx&&(this._maxx=_t._maxx),_t._miny<this._miny&&(this._miny=_t._miny),_t._maxy>this._maxy&&(this._maxy=_t._maxy))}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this.isNull()?(this._minx=wt,this._maxx=wt,this._miny=Tt,this._maxy=Tt):(wt<this._minx&&(this._minx=wt),wt>this._maxx&&(this._maxx=wt),Tt<this._miny&&(this._miny=Tt),Tt>this._maxy&&(this._maxy=Tt))}},Vi.prototype.minExtent=function(){if(this.isNull())return 0;var vt=this.getWidth(),_t=this.getHeight();return vt<_t?vt:_t},Vi.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Vi.prototype.compareTo=function(vt){var _t=vt;return this.isNull()?_t.isNull()?0:-1:_t.isNull()?1:this._minx<_t._minx?-1:this._minx>_t._minx?1:this._miny<_t._miny?-1:this._miny>_t._miny?1:this._maxx<_t._maxx?-1:this._maxx>_t._maxx?1:this._maxy<_t._maxy?-1:this._maxy>_t._maxy?1:0},Vi.prototype.translate=function(vt,_t){if(this.isNull())return null;this.init(this.getMinX()+vt,this.getMaxX()+vt,this.getMinY()+_t,this.getMaxY()+_t)},Vi.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Vi.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Vi.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Vi.prototype.maxExtent=function(){if(this.isNull())return 0;var vt=this.getWidth(),_t=this.getHeight();return vt>_t?vt:_t},Vi.prototype.expandBy=function(){if(arguments.length===1){var vt=arguments[0];this.expandBy(vt,vt)}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];if(this.isNull())return null;this._minx-=_t,this._maxx+=_t,this._miny-=wt,this._maxy+=wt,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Vi.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Vi){var vt=arguments[0];return this.covers(vt)}if(arguments[0]instanceof Dr){var _t=arguments[0];return this.covers(_t)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return this.covers(wt,Tt)}},Vi.prototype.centre=function(){return this.isNull()?null:new Dr((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Vi.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Dr){var vt=arguments[0];this.init(vt.x,vt.x,vt.y,vt.y)}else if(arguments[0]instanceof Vi){var _t=arguments[0];this._minx=_t._minx,this._maxx=_t._maxx,this._miny=_t._miny,this._maxy=_t._maxy}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this.init(wt.x,Tt.x,wt.y,Tt.y)}else if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Nt=arguments[2],jt=arguments[3];At<Ot?(this._minx=At,this._maxx=Ot):(this._minx=Ot,this._maxx=At),Nt<jt?(this._miny=Nt,this._maxy=jt):(this._miny=jt,this._maxy=Nt)}},Vi.prototype.getMaxY=function(){return this._maxy},Vi.prototype.distance=function(vt){if(this.intersects(vt))return 0;var _t=0;this._maxx<vt._minx?_t=vt._minx-this._maxx:this._minx>vt._maxx&&(_t=this._minx-vt._maxx);var wt=0;return this._maxy<vt._miny?wt=vt._miny-this._maxy:this._miny>vt._maxy&&(wt=this._miny-vt._maxy),_t===0?wt:wt===0?_t:Math.sqrt(_t*_t+wt*wt)},Vi.prototype.hashCode=function(){var vt=17;return vt=37*(vt=37*(vt=37*(vt=37*vt+Dr.hashCode(this._minx))+Dr.hashCode(this._maxx))+Dr.hashCode(this._miny))+Dr.hashCode(this._maxy)},Vi.prototype.interfaces_=function(){return[Jl,Ql]},Vi.prototype.getClass=function(){return Vi},Vi.intersects=function(){if(arguments.length===3){var vt=arguments[0],_t=arguments[1],wt=arguments[2];return wt.x>=(vt.x<_t.x?vt.x:_t.x)&&wt.x<=(vt.x>_t.x?vt.x:_t.x)&&wt.y>=(vt.y<_t.y?vt.y:_t.y)&&wt.y<=(vt.y>_t.y?vt.y:_t.y)}if(arguments.length===4){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Nt=arguments[3],jt=Math.min(Ot.x,Nt.x),Gt=Math.max(Ot.x,Nt.x),qt=Math.min(Tt.x,At.x),en=Math.max(Tt.x,At.x);return!(qt>Gt)&&!(en<jt)&&(jt=Math.min(Ot.y,Nt.y),Gt=Math.max(Ot.y,Nt.y),qt=Math.min(Tt.y,At.y),en=Math.max(Tt.y,At.y),!(qt>Gt)&&!(en<jt))}},vy.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(Vi,vy);var Hc={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Fp=function(vt){this.geometryFactory=vt||new Io};Fp.prototype.read=function(vt){var _t,wt,Tt;vt=vt.replace(/[\n\r]/g," ");var At=Hc.typeStr.exec(vt);if(vt.search("EMPTY")!==-1&&((At=Hc.emptyTypeStr.exec(vt))[2]=void 0),At&&(wt=At[1].toLowerCase(),Tt=At[2],Lf[wt]&&(_t=Lf[wt].apply(this,[Tt]))),_t===void 0)throw new Error("Could not parse WKT "+vt);return _t},Fp.prototype.write=function(vt){return this.extractGeometry(vt)},Fp.prototype.extractGeometry=function(vt){var _t=vt.getGeometryType().toLowerCase();if(!$u[_t])return null;var wt=_t.toUpperCase();return vt.isEmpty()?wt+" EMPTY":wt+"("+$u[_t].apply(this,[vt])+")"};var $u={coordinate:function(vt){return vt.x+" "+vt.y},point:function(vt){return $u.coordinate.call(this,vt._coordinates._coordinates[0])},multipoint:function(vt){for(var _t=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)_t.push("("+$u.point.apply(this,[vt._geometries[wt]])+")");return _t.join(",")},linestring:function(vt){for(var _t=[],wt=0,Tt=vt._points._coordinates.length;wt<Tt;++wt)_t.push($u.coordinate.apply(this,[vt._points._coordinates[wt]]));return _t.join(",")},linearring:function(vt){for(var _t=[],wt=0,Tt=vt._points._coordinates.length;wt<Tt;++wt)_t.push($u.coordinate.apply(this,[vt._points._coordinates[wt]]));return _t.join(",")},multilinestring:function(vt){for(var _t=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)_t.push("("+$u.linestring.apply(this,[vt._geometries[wt]])+")");return _t.join(",")},polygon:function(vt){var _t=[];_t.push("("+$u.linestring.apply(this,[vt._shell])+")");for(var wt=0,Tt=vt._holes.length;wt<Tt;++wt)_t.push("("+$u.linestring.apply(this,[vt._holes[wt]])+")");return _t.join(",")},multipolygon:function(vt){for(var _t=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)_t.push("("+$u.polygon.apply(this,[vt._geometries[wt]])+")");return _t.join(",")},geometrycollection:function(vt){for(var _t=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)_t.push(this.extractGeometry(vt._geometries[wt]));return _t.join(",")}},Lf={point:function(vt){if(vt===void 0)return this.geometryFactory.createPoint();var _t=vt.trim().split(Hc.spaces);return this.geometryFactory.createPoint(new Dr(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])))},multipoint:function(vt){var _t;if(vt===void 0)return this.geometryFactory.createMultiPoint();for(var wt=vt.trim().split(","),Tt=[],At=0,Ot=wt.length;At<Ot;++At)_t=wt[At].replace(Hc.trimParens,"$1"),Tt.push(Lf.point.apply(this,[_t]));return this.geometryFactory.createMultiPoint(Tt)},linestring:function(vt){if(vt===void 0)return this.geometryFactory.createLineString();for(var _t,wt=vt.trim().split(","),Tt=[],At=0,Ot=wt.length;At<Ot;++At)_t=wt[At].trim().split(Hc.spaces),Tt.push(new Dr(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])));return this.geometryFactory.createLineString(Tt)},linearring:function(vt){if(vt===void 0)return this.geometryFactory.createLinearRing();for(var _t,wt=vt.trim().split(","),Tt=[],At=0,Ot=wt.length;At<Ot;++At)_t=wt[At].trim().split(Hc.spaces),Tt.push(new Dr(Number.parseFloat(_t[0]),Number.parseFloat(_t[1])));return this.geometryFactory.createLinearRing(Tt)},multilinestring:function(vt){var _t;if(vt===void 0)return this.geometryFactory.createMultiLineString();for(var wt=vt.trim().split(Hc.parenComma),Tt=[],At=0,Ot=wt.length;At<Ot;++At)_t=wt[At].replace(Hc.trimParens,"$1"),Tt.push(Lf.linestring.apply(this,[_t]));return this.geometryFactory.createMultiLineString(Tt)},polygon:function(vt){var _t,wt,Tt;if(vt===void 0)return this.geometryFactory.createPolygon();for(var At,Ot=vt.trim().split(Hc.parenComma),Nt=[],jt=0,Gt=Ot.length;jt<Gt;++jt)_t=Ot[jt].replace(Hc.trimParens,"$1"),wt=Lf.linestring.apply(this,[_t]),Tt=this.geometryFactory.createLinearRing(wt._points),jt===0?At=Tt:Nt.push(Tt);return this.geometryFactory.createPolygon(At,Nt)},multipolygon:function(vt){var _t;if(vt===void 0)return this.geometryFactory.createMultiPolygon();for(var wt=vt.trim().split(Hc.doubleParenComma),Tt=[],At=0,Ot=wt.length;At<Ot;++At)_t=wt[At].replace(Hc.trimParens,"$1"),Tt.push(Lf.polygon.apply(this,[_t]));return this.geometryFactory.createMultiPolygon(Tt)},geometrycollection:function(vt){if(vt===void 0)return this.geometryFactory.createGeometryCollection();for(var _t=(vt=vt.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),wt=[],Tt=0,At=_t.length;Tt<At;++Tt)wt.push(this.read(_t[Tt]));return this.geometryFactory.createGeometryCollection(wt)}},yc=function(vt){this.parser=new Fp(vt)};yc.prototype.write=function(vt){return this.parser.write(vt)},yc.toLineString=function(vt,_t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+vt.x+" "+vt.y+", "+_t.x+" "+_t.y+" )"};var Ru=function(vt){function _t(wt){vt.call(this,wt),this.name="RuntimeException",this.message=wt,this.stack=new vt().stack}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t}(Error),Yg=function(vt){function _t(){if(vt.call(this),arguments.length===0)vt.call(this);else if(arguments.length===1){var wt=arguments[0];vt.call(this,wt)}}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Ru),vo=function(){};vo.prototype.interfaces_=function(){return[]},vo.prototype.getClass=function(){return vo},vo.shouldNeverReachHere=function(){if(arguments.length===0)vo.shouldNeverReachHere(null);else if(arguments.length===1){var vt=arguments[0];throw new Yg("Should never reach here"+(vt!==null?": "+vt:""))}},vo.isTrue=function(){var vt;if(arguments.length===1)vo.isTrue(arguments[0],null);else if(arguments.length===2&&(vt=arguments[1],!arguments[0]))throw vt===null?new Yg:new Yg(vt)},vo.equals=function(){var vt,_t,wt;if(arguments.length===2)vo.equals(vt=arguments[0],_t=arguments[1],null);else if(arguments.length===3&&(vt=arguments[0],wt=arguments[2],!(_t=arguments[1]).equals(vt)))throw new Yg("Expected "+vt+" but encountered "+_t+(wt!==null?": "+wt:""))};var Fs=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Dr,this._intPt[1]=new Dr,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Ld={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Fs.prototype.getIndexAlongSegment=function(vt,_t){return this.computeIntLineIndex(),this._intLineIndex[vt][_t]},Fs.prototype.getTopologySummary=function(){var vt=new Fc;return this.isEndPoint()&&vt.append(" endpoint"),this._isProper&&vt.append(" proper"),this.isCollinear()&&vt.append(" collinear"),vt.toString()},Fs.prototype.computeIntersection=function(vt,_t,wt,Tt){this._inputLines[0][0]=vt,this._inputLines[0][1]=_t,this._inputLines[1][0]=wt,this._inputLines[1][1]=Tt,this._result=this.computeIntersect(vt,_t,wt,Tt)},Fs.prototype.getIntersectionNum=function(){return this._result},Fs.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var vt=arguments[0],_t=this.getEdgeDistance(vt,0),wt=this.getEdgeDistance(vt,1);_t>wt?(this._intLineIndex[vt][0]=0,this._intLineIndex[vt][1]=1):(this._intLineIndex[vt][0]=1,this._intLineIndex[vt][1]=0)}},Fs.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Fs.prototype.setPrecisionModel=function(vt){this._precisionModel=vt},Fs.prototype.isInteriorIntersection=function(){var vt=this;if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var _t=arguments[0],wt=0;wt<this._result;wt++)if(!vt._intPt[wt].equals2D(vt._inputLines[_t][0])&&!vt._intPt[wt].equals2D(vt._inputLines[_t][1]))return!0;return!1}},Fs.prototype.getIntersection=function(vt){return this._intPt[vt]},Fs.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Fs.prototype.hasIntersection=function(){return this._result!==Fs.NO_INTERSECTION},Fs.prototype.getEdgeDistance=function(vt,_t){return Fs.computeEdgeDistance(this._intPt[_t],this._inputLines[vt][0],this._inputLines[vt][1])},Fs.prototype.isCollinear=function(){return this._result===Fs.COLLINEAR_INTERSECTION},Fs.prototype.toString=function(){return yc.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+yc.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Fs.prototype.getEndpoint=function(vt,_t){return this._inputLines[vt][_t]},Fs.prototype.isIntersection=function(vt){for(var _t=0;_t<this._result;_t++)if(this._intPt[_t].equals2D(vt))return!0;return!1},Fs.prototype.getIntersectionAlongSegment=function(vt,_t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[vt][_t]]},Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs},Fs.computeEdgeDistance=function(vt,_t,wt){var Tt=Math.abs(wt.x-_t.x),At=Math.abs(wt.y-_t.y),Ot=-1;if(vt.equals(_t))Ot=0;else if(vt.equals(wt))Ot=Tt>At?Tt:At;else{var Nt=Math.abs(vt.x-_t.x),jt=Math.abs(vt.y-_t.y);(Ot=Tt>At?Nt:jt)!==0||vt.equals(_t)||(Ot=Math.max(Nt,jt))}return vo.isTrue(!(Ot===0&&!vt.equals(_t)),"Bad distance calculation"),Ot},Fs.nonRobustComputeEdgeDistance=function(vt,_t,wt){var Tt=vt.x-_t.x,At=vt.y-_t.y,Ot=Math.sqrt(Tt*Tt+At*At);return vo.isTrue(!(Ot===0&&!vt.equals(_t)),"Invalid distance calculation"),Ot},Ld.DONT_INTERSECT.get=function(){return 0},Ld.DO_INTERSECT.get=function(){return 1},Ld.COLLINEAR.get=function(){return 2},Ld.NO_INTERSECTION.get=function(){return 0},Ld.POINT_INTERSECTION.get=function(){return 1},Ld.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Fs,Ld);var ph=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.isInSegmentEnvelopes=function(wt){var Tt=new Vi(this._inputLines[0][0],this._inputLines[0][1]),At=new Vi(this._inputLines[1][0],this._inputLines[1][1]);return Tt.contains(wt)&&At.contains(wt)},_t.prototype.computeIntersection=function(){if(arguments.length!==3)return vt.prototype.computeIntersection.apply(this,arguments);var wt=arguments[0],Tt=arguments[1],At=arguments[2];if(this._isProper=!1,Vi.intersects(Tt,At,wt)&&Si.orientationIndex(Tt,At,wt)===0&&Si.orientationIndex(At,Tt,wt)===0)return this._isProper=!0,(wt.equals(Tt)||wt.equals(At))&&(this._isProper=!1),this._result=vt.POINT_INTERSECTION,null;this._result=vt.NO_INTERSECTION},_t.prototype.normalizeToMinimum=function(wt,Tt,At,Ot,Nt){Nt.x=this.smallestInAbsValue(wt.x,Tt.x,At.x,Ot.x),Nt.y=this.smallestInAbsValue(wt.y,Tt.y,At.y,Ot.y),wt.x-=Nt.x,wt.y-=Nt.y,Tt.x-=Nt.x,Tt.y-=Nt.y,At.x-=Nt.x,At.y-=Nt.y,Ot.x-=Nt.x,Ot.y-=Nt.y},_t.prototype.safeHCoordinateIntersection=function(wt,Tt,At,Ot){var Nt=null;try{Nt=ec.intersection(wt,Tt,At,Ot)}catch(jt){if(!(jt instanceof Ad))throw jt;Nt=_t.nearestEndpoint(wt,Tt,At,Ot)}return Nt},_t.prototype.intersection=function(wt,Tt,At,Ot){var Nt=this.intersectionWithNormalization(wt,Tt,At,Ot);return this.isInSegmentEnvelopes(Nt)||(Nt=new Dr(_t.nearestEndpoint(wt,Tt,At,Ot))),this._precisionModel!==null&&this._precisionModel.makePrecise(Nt),Nt},_t.prototype.smallestInAbsValue=function(wt,Tt,At,Ot){var Nt=wt,jt=Math.abs(Nt);return Math.abs(Tt)<jt&&(Nt=Tt,jt=Math.abs(Tt)),Math.abs(At)<jt&&(Nt=At,jt=Math.abs(At)),Math.abs(Ot)<jt&&(Nt=Ot),Nt},_t.prototype.checkDD=function(wt,Tt,At,Ot,Nt){var jt=pl.intersection(wt,Tt,At,Ot),Gt=this.isInSegmentEnvelopes(jt);za.out.println("DD in env = "+Gt+"  --------------------- "+jt),Nt.distance(jt)>1e-4&&za.out.println("Distance = "+Nt.distance(jt))},_t.prototype.intersectionWithNormalization=function(wt,Tt,At,Ot){var Nt=new Dr(wt),jt=new Dr(Tt),Gt=new Dr(At),qt=new Dr(Ot),en=new Dr;this.normalizeToEnvCentre(Nt,jt,Gt,qt,en);var Xt=this.safeHCoordinateIntersection(Nt,jt,Gt,qt);return Xt.x+=en.x,Xt.y+=en.y,Xt},_t.prototype.computeCollinearIntersection=function(wt,Tt,At,Ot){var Nt=Vi.intersects(wt,Tt,At),jt=Vi.intersects(wt,Tt,Ot),Gt=Vi.intersects(At,Ot,wt),qt=Vi.intersects(At,Ot,Tt);return Nt&&jt?(this._intPt[0]=At,this._intPt[1]=Ot,vt.COLLINEAR_INTERSECTION):Gt&&qt?(this._intPt[0]=wt,this._intPt[1]=Tt,vt.COLLINEAR_INTERSECTION):Nt&&Gt?(this._intPt[0]=At,this._intPt[1]=wt,!At.equals(wt)||jt||qt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):Nt&&qt?(this._intPt[0]=At,this._intPt[1]=Tt,!At.equals(Tt)||jt||Gt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):jt&&Gt?(this._intPt[0]=Ot,this._intPt[1]=wt,!Ot.equals(wt)||Nt||qt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):jt&&qt?(this._intPt[0]=Ot,this._intPt[1]=Tt,!Ot.equals(Tt)||Nt||Gt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):vt.NO_INTERSECTION},_t.prototype.normalizeToEnvCentre=function(wt,Tt,At,Ot,Nt){var jt=wt.x<Tt.x?wt.x:Tt.x,Gt=wt.y<Tt.y?wt.y:Tt.y,qt=wt.x>Tt.x?wt.x:Tt.x,en=wt.y>Tt.y?wt.y:Tt.y,Xt=At.x<Ot.x?At.x:Ot.x,sn=At.y<Ot.y?At.y:Ot.y,yn=At.x>Ot.x?At.x:Ot.x,vn=At.y>Ot.y?At.y:Ot.y,wn=((jt>Xt?jt:Xt)+(qt<yn?qt:yn))/2,un=((Gt>sn?Gt:sn)+(en<vn?en:vn))/2;Nt.x=wn,Nt.y=un,wt.x-=Nt.x,wt.y-=Nt.y,Tt.x-=Nt.x,Tt.y-=Nt.y,At.x-=Nt.x,At.y-=Nt.y,Ot.x-=Nt.x,Ot.y-=Nt.y},_t.prototype.computeIntersect=function(wt,Tt,At,Ot){if(this._isProper=!1,!Vi.intersects(wt,Tt,At,Ot))return vt.NO_INTERSECTION;var Nt=Si.orientationIndex(wt,Tt,At),jt=Si.orientationIndex(wt,Tt,Ot);if(Nt>0&&jt>0||Nt<0&&jt<0)return vt.NO_INTERSECTION;var Gt=Si.orientationIndex(At,Ot,wt),qt=Si.orientationIndex(At,Ot,Tt);return Gt>0&&qt>0||Gt<0&&qt<0?vt.NO_INTERSECTION:Nt===0&&jt===0&&Gt===0&&qt===0?this.computeCollinearIntersection(wt,Tt,At,Ot):(Nt===0||jt===0||Gt===0||qt===0?(this._isProper=!1,wt.equals2D(At)||wt.equals2D(Ot)?this._intPt[0]=wt:Tt.equals2D(At)||Tt.equals2D(Ot)?this._intPt[0]=Tt:Nt===0?this._intPt[0]=new Dr(At):jt===0?this._intPt[0]=new Dr(Ot):Gt===0?this._intPt[0]=new Dr(wt):qt===0&&(this._intPt[0]=new Dr(Tt))):(this._isProper=!0,this._intPt[0]=this.intersection(wt,Tt,At,Ot)),vt.POINT_INTERSECTION)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.nearestEndpoint=function(wt,Tt,At,Ot){var Nt=wt,jt=Si.distancePointLine(wt,At,Ot),Gt=Si.distancePointLine(Tt,At,Ot);return Gt<jt&&(jt=Gt,Nt=Tt),(Gt=Si.distancePointLine(At,wt,Tt))<jt&&(jt=Gt,Nt=At),(Gt=Si.distancePointLine(Ot,wt,Tt))<jt&&(jt=Gt,Nt=Ot),Nt},_t}(Fs),Id=function(){};Id.prototype.interfaces_=function(){return[]},Id.prototype.getClass=function(){return Id},Id.orientationIndex=function(vt,_t,wt){var Tt=_t.x-vt.x,At=_t.y-vt.y,Ot=wt.x-_t.x,Nt=wt.y-_t.y;return Id.signOfDet2x2(Tt,At,Ot,Nt)},Id.signOfDet2x2=function(vt,_t,wt,Tt){var At=null,Ot=null,Nt=null;if(At=1,vt===0||Tt===0)return _t===0||wt===0?0:_t>0?wt>0?-At:At:wt>0?At:-At;if(_t===0||wt===0)return Tt>0?vt>0?At:-At:vt>0?-At:At;if(_t>0?Tt>0?_t<=Tt||(At=-At,Ot=vt,vt=wt,wt=Ot,Ot=_t,_t=Tt,Tt=Ot):_t<=-Tt?(At=-At,wt=-wt,Tt=-Tt):(Ot=vt,vt=-wt,wt=Ot,Ot=_t,_t=-Tt,Tt=Ot):Tt>0?-_t<=Tt?(At=-At,vt=-vt,_t=-_t):(Ot=-vt,vt=wt,wt=Ot,Ot=-_t,_t=Tt,Tt=Ot):_t>=Tt?(vt=-vt,_t=-_t,wt=-wt,Tt=-Tt):(At=-At,Ot=-vt,vt=-wt,wt=Ot,Ot=-_t,_t=-Tt,Tt=Ot),vt>0){if(!(wt>0)||!(vt<=wt))return At}else{if(wt>0||!(vt>=wt))return-At;At=-At,vt=-vt,wt=-wt}for(;;){if((Tt-=(Nt=Math.floor(wt/vt))*_t)<0)return-At;if(Tt>_t)return At;if(vt>(wt-=Nt*vt)+wt){if(_t<Tt+Tt)return At}else{if(_t>Tt+Tt)return-At;wt=vt-wt,Tt=_t-Tt,At=-At}if(Tt===0)return wt===0?0:-At;if(wt===0||(_t-=(Nt=Math.floor(vt/wt))*Tt)<0)return At;if(_t>Tt)return-At;if(wt>(vt-=Nt*wt)+vt){if(Tt<_t+_t)return-At}else{if(Tt>_t+_t)return At;vt=wt-vt,_t=Tt-_t,At=-At}if(_t===0)return vt===0?0:At;if(vt===0)return-At}};var jc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var vt=arguments[0];this._p=vt};jc.prototype.countSegment=function(vt,_t){if(vt.x<this._p.x&&_t.x<this._p.x)return null;if(this._p.x===_t.x&&this._p.y===_t.y)return this._isPointOnSegment=!0,null;if(vt.y===this._p.y&&_t.y===this._p.y){var wt=vt.x,Tt=_t.x;return wt>Tt&&(wt=_t.x,Tt=vt.x),this._p.x>=wt&&this._p.x<=Tt&&(this._isPointOnSegment=!0),null}if(vt.y>this._p.y&&_t.y<=this._p.y||_t.y>this._p.y&&vt.y<=this._p.y){var At=vt.x-this._p.x,Ot=vt.y-this._p.y,Nt=_t.x-this._p.x,jt=_t.y-this._p.y,Gt=Id.signOfDet2x2(At,Ot,Nt,jt);if(Gt===0)return this._isPointOnSegment=!0,null;jt<Ot&&(Gt=-Gt),Gt>0&&this._crossingCount++}},jc.prototype.isPointInPolygon=function(){return this.getLocation()!==Gr.EXTERIOR},jc.prototype.getLocation=function(){return this._isPointOnSegment?Gr.BOUNDARY:this._crossingCount%2==1?Gr.INTERIOR:Gr.EXTERIOR},jc.prototype.isOnSegment=function(){return this._isPointOnSegment},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.locatePointInRing=function(){if(arguments[0]instanceof Dr&&to(arguments[1],qo)){for(var vt=arguments[0],_t=arguments[1],wt=new jc(vt),Tt=new Dr,At=new Dr,Ot=1;Ot<_t.size();Ot++)if(_t.getCoordinate(Ot,Tt),_t.getCoordinate(Ot-1,At),wt.countSegment(Tt,At),wt.isOnSegment())return wt.getLocation();return wt.getLocation()}if(arguments[0]instanceof Dr&&arguments[1]instanceof Array){for(var Nt=arguments[0],jt=arguments[1],Gt=new jc(Nt),qt=1;qt<jt.length;qt++){var en=jt[qt],Xt=jt[qt-1];if(Gt.countSegment(en,Xt),Gt.isOnSegment())return Gt.getLocation()}return Gt.getLocation()}};var Si=function(){},Pd={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.orientationIndex=function(vt,_t,wt){return pl.orientationIndex(vt,_t,wt)},Si.signedArea=function(){if(arguments[0]instanceof Array){var vt=arguments[0];if(vt.length<3)return 0;for(var _t=0,wt=vt[0].x,Tt=1;Tt<vt.length-1;Tt++){var At=vt[Tt].x-wt,Ot=vt[Tt+1].y,Nt=vt[Tt-1].y;_t+=At*(Nt-Ot)}return _t/2}if(to(arguments[0],qo)){var jt=arguments[0],Gt=jt.size();if(Gt<3)return 0;var qt=new Dr,en=new Dr,Xt=new Dr;jt.getCoordinate(0,en),jt.getCoordinate(1,Xt);var sn=en.x;Xt.x-=sn;for(var yn=0,vn=1;vn<Gt-1;vn++)qt.y=en.y,en.x=Xt.x,en.y=Xt.y,jt.getCoordinate(vn+1,Xt),Xt.x-=sn,yn+=en.x*(qt.y-Xt.y);return yn/2}},Si.distanceLineLine=function(vt,_t,wt,Tt){if(vt.equals(_t))return Si.distancePointLine(vt,wt,Tt);if(wt.equals(Tt))return Si.distancePointLine(Tt,vt,_t);var At=!1;if(Vi.intersects(vt,_t,wt,Tt)){var Ot=(_t.x-vt.x)*(Tt.y-wt.y)-(_t.y-vt.y)*(Tt.x-wt.x);if(Ot===0)At=!0;else{var Nt=(vt.y-wt.y)*(Tt.x-wt.x)-(vt.x-wt.x)*(Tt.y-wt.y),jt=((vt.y-wt.y)*(_t.x-vt.x)-(vt.x-wt.x)*(_t.y-vt.y))/Ot,Gt=Nt/Ot;(Gt<0||Gt>1||jt<0||jt>1)&&(At=!0)}}else At=!0;return At?Bl.min(Si.distancePointLine(vt,wt,Tt),Si.distancePointLine(_t,wt,Tt),Si.distancePointLine(wt,vt,_t),Si.distancePointLine(Tt,vt,_t)):0},Si.isPointInRing=function(vt,_t){return Si.locatePointInRing(vt,_t)!==Gr.EXTERIOR},Si.computeLength=function(vt){var _t=vt.size();if(_t<=1)return 0;var wt=0,Tt=new Dr;vt.getCoordinate(0,Tt);for(var At=Tt.x,Ot=Tt.y,Nt=1;Nt<_t;Nt++){vt.getCoordinate(Nt,Tt);var jt=Tt.x,Gt=Tt.y,qt=jt-At,en=Gt-Ot;wt+=Math.sqrt(qt*qt+en*en),At=jt,Ot=Gt}return wt},Si.isCCW=function(vt){var _t=vt.length-1;if(_t<3)throw new Ds("Ring has fewer than 4 points, so orientation cannot be determined");for(var wt=vt[0],Tt=0,At=1;At<=_t;At++){var Ot=vt[At];Ot.y>wt.y&&(wt=Ot,Tt=At)}var Nt=Tt;do(Nt-=1)<0&&(Nt=_t);while(vt[Nt].equals2D(wt)&&Nt!==Tt);var jt=Tt;do jt=(jt+1)%_t;while(vt[jt].equals2D(wt)&&jt!==Tt);var Gt=vt[Nt],qt=vt[jt];if(Gt.equals2D(wt)||qt.equals2D(wt)||Gt.equals2D(qt))return!1;var en=Si.computeOrientation(Gt,wt,qt),Xt=!1;return Xt=en===0?Gt.x>qt.x:en>0,Xt},Si.locatePointInRing=function(vt,_t){return jc.locatePointInRing(vt,_t)},Si.distancePointLinePerpendicular=function(vt,_t,wt){var Tt=(wt.x-_t.x)*(wt.x-_t.x)+(wt.y-_t.y)*(wt.y-_t.y),At=((_t.y-vt.y)*(wt.x-_t.x)-(_t.x-vt.x)*(wt.y-_t.y))/Tt;return Math.abs(At)*Math.sqrt(Tt)},Si.computeOrientation=function(vt,_t,wt){return Si.orientationIndex(vt,_t,wt)},Si.distancePointLine=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];if(_t.length===0)throw new Ds("Line array must contain at least one vertex");for(var wt=vt.distance(_t[0]),Tt=0;Tt<_t.length-1;Tt++){var At=Si.distancePointLine(vt,_t[Tt],_t[Tt+1]);At<wt&&(wt=At)}return wt}if(arguments.length===3){var Ot=arguments[0],Nt=arguments[1],jt=arguments[2];if(Nt.x===jt.x&&Nt.y===jt.y)return Ot.distance(Nt);var Gt=(jt.x-Nt.x)*(jt.x-Nt.x)+(jt.y-Nt.y)*(jt.y-Nt.y),qt=((Ot.x-Nt.x)*(jt.x-Nt.x)+(Ot.y-Nt.y)*(jt.y-Nt.y))/Gt;if(qt<=0)return Ot.distance(Nt);if(qt>=1)return Ot.distance(jt);var en=((Nt.y-Ot.y)*(jt.x-Nt.x)-(Nt.x-Ot.x)*(jt.y-Nt.y))/Gt;return Math.abs(en)*Math.sqrt(Gt)}},Si.isOnLine=function(vt,_t){for(var wt=new ph,Tt=1;Tt<_t.length;Tt++){var At=_t[Tt-1],Ot=_t[Tt];if(wt.computeIntersection(vt,At,Ot),wt.hasIntersection())return!0}return!1},Pd.CLOCKWISE.get=function(){return-1},Pd.RIGHT.get=function(){return Si.CLOCKWISE},Pd.COUNTERCLOCKWISE.get=function(){return 1},Pd.LEFT.get=function(){return Si.COUNTERCLOCKWISE},Pd.COLLINEAR.get=function(){return 0},Pd.STRAIGHT.get=function(){return Si.COLLINEAR},Object.defineProperties(Si,Pd);var cu=function(){};cu.prototype.filter=function(vt){},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu};var Qi=function(){var vt=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=vt,this._SRID=vt.getSRID()},uu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Qi.prototype.isGeometryCollection=function(){return this.getSortIndex()===Qi.SORTINDEX_GEOMETRYCOLLECTION},Qi.prototype.getFactory=function(){return this._factory},Qi.prototype.getGeometryN=function(vt){return this},Qi.prototype.getArea=function(){return 0},Qi.prototype.isRectangle=function(){return!1},Qi.prototype.equals=function(){if(arguments[0]instanceof Qi){var vt=arguments[0];return vt!==null&&this.equalsTopo(vt)}if(arguments[0]instanceof Object){var _t=arguments[0];if(!(_t instanceof Qi))return!1;var wt=_t;return this.equalsExact(wt)}},Qi.prototype.equalsExact=function(vt){return this===vt||this.equalsExact(vt,0)},Qi.prototype.geometryChanged=function(){this.apply(Qi.geometryChangedFilter)},Qi.prototype.geometryChangedAction=function(){this._envelope=null},Qi.prototype.equalsNorm=function(vt){return vt!==null&&this.norm().equalsExact(vt.norm())},Qi.prototype.getLength=function(){return 0},Qi.prototype.getNumGeometries=function(){return 1},Qi.prototype.compareTo=function(){if(arguments.length===1){var vt=arguments[0],_t=vt;return this.getSortIndex()!==_t.getSortIndex()?this.getSortIndex()-_t.getSortIndex():this.isEmpty()&&_t.isEmpty()?0:this.isEmpty()?-1:_t.isEmpty()?1:this.compareToSameClass(vt)}if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return this.getSortIndex()!==wt.getSortIndex()?this.getSortIndex()-wt.getSortIndex():this.isEmpty()&&wt.isEmpty()?0:this.isEmpty()?-1:wt.isEmpty()?1:this.compareToSameClass(wt,Tt)}},Qi.prototype.getUserData=function(){return this._userData},Qi.prototype.getSRID=function(){return this._SRID},Qi.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Qi.prototype.checkNotGeometryCollection=function(vt){if(vt.getSortIndex()===Qi.SORTINDEX_GEOMETRYCOLLECTION)throw new Ds("This method does not support GeometryCollection arguments")},Qi.prototype.equal=function(vt,_t,wt){return wt===0?vt.equals(_t):vt.distance(_t)<=wt},Qi.prototype.norm=function(){var vt=this.copy();return vt.normalize(),vt},Qi.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Qi.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Vi(this._envelope)},Qi.prototype.setSRID=function(vt){this._SRID=vt},Qi.prototype.setUserData=function(vt){this._userData=vt},Qi.prototype.compare=function(vt,_t){for(var wt=vt.iterator(),Tt=_t.iterator();wt.hasNext()&&Tt.hasNext();){var At=wt.next(),Ot=Tt.next(),Nt=At.compareTo(Ot);if(Nt!==0)return Nt}return wt.hasNext()?1:Tt.hasNext()?-1:0},Qi.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Qi.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Qi.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Qi.SORTINDEX_MULTIPOINT||this.getSortIndex()===Qi.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Qi.SORTINDEX_MULTIPOLYGON},Qi.prototype.interfaces_=function(){return[Mp,Jl,Ql]},Qi.prototype.getClass=function(){return Qi},Qi.hasNonEmptyElements=function(vt){for(var _t=0;_t<vt.length;_t++)if(!vt[_t].isEmpty())return!0;return!1},Qi.hasNullElements=function(vt){for(var _t=0;_t<vt.length;_t++)if(vt[_t]===null)return!0;return!1},uu.serialVersionUID.get=function(){return 8763622679187377e3},uu.SORTINDEX_POINT.get=function(){return 0},uu.SORTINDEX_MULTIPOINT.get=function(){return 1},uu.SORTINDEX_LINESTRING.get=function(){return 2},uu.SORTINDEX_LINEARRING.get=function(){return 3},uu.SORTINDEX_MULTILINESTRING.get=function(){return 4},uu.SORTINDEX_POLYGON.get=function(){return 5},uu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},uu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},uu.geometryChangedFilter.get=function(){return Xg},Object.defineProperties(Qi,uu);var Xg=function(){};Xg.interfaces_=function(){return[cu]},Xg.filter=function(vt){vt.geometryChangedAction()};var hu=function(){};hu.prototype.filter=function(vt){},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu};var tc=function(){},du={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};tc.prototype.isInBoundary=function(vt){},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},du.Mod2BoundaryNodeRule.get=function(){return If},du.EndPointBoundaryNodeRule.get=function(){return Od},du.MultiValentEndPointBoundaryNodeRule.get=function(){return Pf},du.MonoValentEndPointBoundaryNodeRule.get=function(){return Of},du.MOD2_BOUNDARY_RULE.get=function(){return new If},du.ENDPOINT_BOUNDARY_RULE.get=function(){return new Od},du.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Pf},du.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Of},du.OGC_SFS_BOUNDARY_RULE.get=function(){return tc.MOD2_BOUNDARY_RULE},Object.defineProperties(tc,du);var If=function(){};If.prototype.isInBoundary=function(vt){return vt%2==1},If.prototype.interfaces_=function(){return[tc]},If.prototype.getClass=function(){return If};var Od=function(){};Od.prototype.isInBoundary=function(vt){return vt>0},Od.prototype.interfaces_=function(){return[tc]},Od.prototype.getClass=function(){return Od};var Pf=function(){};Pf.prototype.isInBoundary=function(vt){return vt>1},Pf.prototype.interfaces_=function(){return[tc]},Pf.prototype.getClass=function(){return Pf};var Of=function(){};Of.prototype.isInBoundary=function(vt){return vt===1},Of.prototype.interfaces_=function(){return[tc]},Of.prototype.getClass=function(){return Of};var fa=function(){};function I0(vt){this.message=vt||""}fa.prototype.add=function(){},fa.prototype.addAll=function(){},fa.prototype.isEmpty=function(){},fa.prototype.iterator=function(){},fa.prototype.size=function(){},fa.prototype.toArray=function(){},fa.prototype.remove=function(){},I0.prototype=new Error,I0.prototype.name="IndexOutOfBoundsException";var $f=function(){};$f.prototype.hasNext=function(){},$f.prototype.next=function(){},$f.prototype.remove=function(){};var vc=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.get=function(){},_t.prototype.set=function(){},_t.prototype.isEmpty=function(){},_t}(fa);function $d(vt){this.message=vt||""}$d.prototype=new Error,$d.prototype.name="NoSuchElementException";var vi=function(vt){function _t(){vt.call(this),this.array_=[],arguments[0]instanceof fa&&this.addAll(arguments[0])}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.ensureCapacity=function(){},_t.prototype.interfaces_=function(){return[vt,fa]},_t.prototype.add=function(wt){return arguments.length===1?this.array_.push(wt):this.array_.splice(arguments[0],arguments[1]),!0},_t.prototype.clear=function(){this.array_=[]},_t.prototype.addAll=function(wt){for(var Tt=wt.iterator();Tt.hasNext();)this.add(Tt.next());return!0},_t.prototype.set=function(wt,Tt){var At=this.array_[wt];return this.array_[wt]=Tt,At},_t.prototype.iterator=function(){return new _y(this)},_t.prototype.get=function(wt){if(wt<0||wt>=this.size())throw new I0;return this.array_[wt]},_t.prototype.isEmpty=function(){return this.array_.length===0},_t.prototype.size=function(){return this.array_.length},_t.prototype.toArray=function(){for(var wt=[],Tt=0,At=this.array_.length;Tt<At;Tt++)wt.push(this.array_[Tt]);return wt},_t.prototype.remove=function(wt){for(var Tt=!1,At=0,Ot=this.array_.length;At<Ot;At++)if(this.array_[At]===wt){this.array_.splice(At,1),Tt=!0;break}return Tt},_t}(vc),_y=function(vt){function _t(wt){vt.call(this),this.arrayList_=wt,this.position_=0}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new $d;return this.arrayList_.get(this.position_++)},_t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},_t.prototype.set=function(wt){return this.arrayList_.set(this.position_-1,wt)},_t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},_t}($f),zp=function(vt){function _t(){if(vt.call(this),arguments.length!==0){if(arguments.length===1){var Tt=arguments[0];this.ensureCapacity(Tt.length),this.add(Tt,!0)}else if(arguments.length===2){var At=arguments[0],Ot=arguments[1];this.ensureCapacity(At.length),this.add(At,Ot)}}}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={coordArrayType:{configurable:!0}};return wt.coordArrayType.get=function(){return new Array(0).fill(null)},_t.prototype.getCoordinate=function(Tt){return this.get(Tt)},_t.prototype.addAll=function(){var Tt=this;if(arguments.length===2){for(var At=arguments[0],Ot=arguments[1],Nt=!1,jt=At.iterator();jt.hasNext();)Tt.add(jt.next(),Ot),Nt=!0;return Nt}return vt.prototype.addAll.apply(this,arguments)},_t.prototype.clone=function(){for(var Tt=vt.prototype.clone.call(this),At=0;At<this.size();At++)Tt.add(At,this.get(At).copy());return Tt},_t.prototype.toCoordinateArray=function(){return this.toArray(_t.coordArrayType)},_t.prototype.add=function(){var Tt=this;if(arguments.length===1){var At=arguments[0];vt.prototype.add.call(this,At)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Ot=arguments[0],Nt=arguments[1];return this.add(Ot,Nt,!0),!0}if(arguments[0]instanceof Dr&&typeof arguments[1]=="boolean"){var jt=arguments[0],Gt=arguments[1];if(!Gt&&this.size()>=1){var qt=this.get(this.size()-1);if(qt.equals2D(jt))return null}vt.prototype.add.call(this,jt)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var en=arguments[0],Xt=arguments[1];return this.add(en,Xt),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var sn=arguments[0],yn=arguments[1],vn=arguments[2];if(vn)for(var wn=0;wn<sn.length;wn++)Tt.add(sn[wn],yn);else for(var un=sn.length-1;un>=0;un--)Tt.add(sn[un],yn);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Dr){var Fn=arguments[0],Qn=arguments[1],_n=arguments[2];if(!_n){var Bn=this.size();if(Bn>0){if(Fn>0){var Hn=this.get(Fn-1);if(Hn.equals2D(Qn))return null}if(Fn<Bn){var Gn=this.get(Fn);if(Gn.equals2D(Qn))return null}}}vt.prototype.add.call(this,Fn,Qn)}}else if(arguments.length===4){var Vn=arguments[0],Ur=arguments[1],$r=arguments[2],Yr=arguments[3],Mr=1;$r>Yr&&(Mr=-1);for(var Qr=$r;Qr!==Yr;Qr+=Mr)Tt.add(Vn[Qr],Ur);return!0}},_t.prototype.closeRing=function(){this.size()>0&&this.add(new Dr(this.get(0)),!1)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},Object.defineProperties(_t,wt),_t}(vi),Lo=function(){},Zg={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Zg.ForwardComparator.get=function(){return Hp},Zg.BidirectionalComparator.get=function(){return Rd},Zg.coordArrayType.get=function(){return new Array(0).fill(null)},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},Lo.isRing=function(vt){return!(vt.length<4)&&!!vt[0].equals2D(vt[vt.length-1])},Lo.ptNotInList=function(vt,_t){for(var wt=0;wt<vt.length;wt++){var Tt=vt[wt];if(Lo.indexOf(Tt,_t)<0)return Tt}return null},Lo.scroll=function(vt,_t){var wt=Lo.indexOf(_t,vt);if(wt<0)return null;var Tt=new Array(vt.length).fill(null);za.arraycopy(vt,wt,Tt,0,vt.length-wt),za.arraycopy(vt,0,Tt,vt.length-wt,wt),za.arraycopy(Tt,0,vt,0,vt.length)},Lo.equals=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];if(vt===_t)return!0;if(vt===null||_t===null||vt.length!==_t.length)return!1;for(var wt=0;wt<vt.length;wt++)if(!vt[wt].equals(_t[wt]))return!1;return!0}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];if(Tt===At)return!0;if(Tt===null||At===null||Tt.length!==At.length)return!1;for(var Nt=0;Nt<Tt.length;Nt++)if(Ot.compare(Tt[Nt],At[Nt])!==0)return!1;return!0}},Lo.intersection=function(vt,_t){for(var wt=new zp,Tt=0;Tt<vt.length;Tt++)_t.intersects(vt[Tt])&&wt.add(vt[Tt],!0);return wt.toCoordinateArray()},Lo.hasRepeatedPoints=function(vt){for(var _t=1;_t<vt.length;_t++)if(vt[_t-1].equals(vt[_t]))return!0;return!1},Lo.removeRepeatedPoints=function(vt){return Lo.hasRepeatedPoints(vt)?new zp(vt,!1).toCoordinateArray():vt},Lo.reverse=function(vt){for(var _t=vt.length-1,wt=Math.trunc(_t/2),Tt=0;Tt<=wt;Tt++){var At=vt[Tt];vt[Tt]=vt[_t-Tt],vt[_t-Tt]=At}},Lo.removeNull=function(vt){for(var _t=0,wt=0;wt<vt.length;wt++)vt[wt]!==null&&_t++;var Tt=new Array(_t).fill(null);if(_t===0)return Tt;for(var At=0,Ot=0;Ot<vt.length;Ot++)vt[Ot]!==null&&(Tt[At++]=vt[Ot]);return Tt},Lo.copyDeep=function(){if(arguments.length===1){for(var vt=arguments[0],_t=new Array(vt.length).fill(null),wt=0;wt<vt.length;wt++)_t[wt]=new Dr(vt[wt]);return _t}if(arguments.length===5)for(var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Nt=arguments[3],jt=arguments[4],Gt=0;Gt<jt;Gt++)Ot[Nt+Gt]=new Dr(Tt[At+Gt])},Lo.isEqualReversed=function(vt,_t){for(var wt=0;wt<vt.length;wt++){var Tt=vt[wt],At=_t[vt.length-wt-1];if(Tt.compareTo(At)!==0)return!1}return!0},Lo.envelope=function(vt){for(var _t=new Vi,wt=0;wt<vt.length;wt++)_t.expandToInclude(vt[wt]);return _t},Lo.toCoordinateArray=function(vt){return vt.toArray(Lo.coordArrayType)},Lo.atLeastNCoordinatesOrNothing=function(vt,_t){return _t.length>=vt?_t:[]},Lo.indexOf=function(vt,_t){for(var wt=0;wt<_t.length;wt++)if(vt.equals(_t[wt]))return wt;return-1},Lo.increasingDirection=function(vt){for(var _t=0;_t<Math.trunc(vt.length/2);_t++){var wt=vt.length-1-_t,Tt=vt[_t].compareTo(vt[wt]);if(Tt!==0)return Tt}return 1},Lo.compare=function(vt,_t){for(var wt=0;wt<vt.length&&wt<_t.length;){var Tt=vt[wt].compareTo(_t[wt]);if(Tt!==0)return Tt;wt++}return wt<_t.length?-1:wt<vt.length?1:0},Lo.minCoordinate=function(vt){for(var _t=null,wt=0;wt<vt.length;wt++)(_t===null||_t.compareTo(vt[wt])>0)&&(_t=vt[wt]);return _t},Lo.extract=function(vt,_t,wt){_t=Bl.clamp(_t,0,vt.length);var Tt=(wt=Bl.clamp(wt,-1,vt.length))-_t+1;wt<0&&(Tt=0),_t>=vt.length&&(Tt=0),wt<_t&&(Tt=0);var At=new Array(Tt).fill(null);if(Tt===0)return At;for(var Ot=0,Nt=_t;Nt<=wt;Nt++)At[Ot++]=vt[Nt];return At},Object.defineProperties(Lo,Zg);var Hp=function(){};Hp.prototype.compare=function(vt,_t){return Lo.compare(vt,_t)},Hp.prototype.interfaces_=function(){return[kf]},Hp.prototype.getClass=function(){return Hp};var Rd=function(){};Rd.prototype.compare=function(vt,_t){var wt=vt,Tt=_t;if(wt.length<Tt.length)return-1;if(wt.length>Tt.length)return 1;if(wt.length===0)return 0;var At=Lo.compare(wt,Tt);return Lo.isEqualReversed(wt,Tt)?0:At},Rd.prototype.OLDcompare=function(vt,_t){var wt=vt,Tt=_t;if(wt.length<Tt.length)return-1;if(wt.length>Tt.length)return 1;if(wt.length===0)return 0;for(var At=Lo.increasingDirection(wt),Ot=Lo.increasingDirection(Tt),Nt=At>0?0:wt.length-1,jt=Ot>0?0:wt.length-1,Gt=0;Gt<wt.length;Gt++){var qt=wt[Nt].compareTo(Tt[jt]);if(qt!==0)return qt;Nt+=At,jt+=Ot}return 0},Rd.prototype.interfaces_=function(){return[kf]},Rd.prototype.getClass=function(){return Rd};var Md=function(){};Md.prototype.get=function(){},Md.prototype.put=function(){},Md.prototype.size=function(){},Md.prototype.values=function(){},Md.prototype.entrySet=function(){};var Qv=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t}(Md);function Rf(vt){this.message=vt||""}function Kg(){}Rf.prototype=new Error,Rf.prototype.name="OperationNotSupported",Kg.prototype=new fa,Kg.prototype.contains=function(){};var Jg=function(vt){function _t(){vt.call(this),this.array_=[],arguments[0]instanceof fa&&this.addAll(arguments[0])}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.contains=function(wt){for(var Tt=0,At=this.array_.length;Tt<At;Tt++)if(this.array_[Tt]===wt)return!0;return!1},_t.prototype.add=function(wt){return!this.contains(wt)&&(this.array_.push(wt),!0)},_t.prototype.addAll=function(wt){for(var Tt=wt.iterator();Tt.hasNext();)this.add(Tt.next());return!0},_t.prototype.remove=function(wt){throw new Error},_t.prototype.size=function(){return this.array_.length},_t.prototype.isEmpty=function(){return this.array_.length===0},_t.prototype.toArray=function(){for(var wt=[],Tt=0,At=this.array_.length;Tt<At;Tt++)wt.push(this.array_[Tt]);return wt},_t.prototype.iterator=function(){return new by(this)},_t}(Kg),by=function(vt){function _t(wt){vt.call(this),this.hashSet_=wt,this.position_=0}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new $d;return this.hashSet_.array_[this.position_++]},_t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},_t.prototype.remove=function(){throw new Rf},_t}($f);function xy(vt){return vt===null?0:vt.color}function ks(vt){return vt===null?null:vt.parent}function Mu(vt,_t){vt!==null&&(vt.color=_t)}function P0(vt){return vt===null?null:vt.left}function wy(vt){return vt===null?null:vt.right}function Ya(){this.root_=null,this.size_=0}Ya.prototype=new Qv,Ya.prototype.get=function(vt){for(var _t=this.root_;_t!==null;){var wt=vt.compareTo(_t.key);if(wt<0)_t=_t.left;else{if(!(wt>0))return _t.value;_t=_t.right}}return null},Ya.prototype.put=function(vt,_t){if(this.root_===null)return this.root_={key:vt,value:_t,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var wt,Tt,At=this.root_;do if(wt=At,(Tt=vt.compareTo(At.key))<0)At=At.left;else{if(!(Tt>0)){var Ot=At.value;return At.value=_t,Ot}At=At.right}while(At!==null);var Nt={key:vt,left:null,right:null,value:_t,parent:wt,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return Tt<0?wt.left=Nt:wt.right=Nt,this.fixAfterInsertion(Nt),this.size_++,null},Ya.prototype.fixAfterInsertion=function(vt){var _t=this;for(vt.color=1;vt!=null&&vt!==this.root_&&vt.parent.color===1;)if(ks(vt)===P0(ks(ks(vt)))){var wt=wy(ks(ks(vt)));xy(wt)===1?(Mu(ks(vt),0),Mu(wt,0),Mu(ks(ks(vt)),1),vt=ks(ks(vt))):(vt===wy(ks(vt))&&(vt=ks(vt),_t.rotateLeft(vt)),Mu(ks(vt),0),Mu(ks(ks(vt)),1),_t.rotateRight(ks(ks(vt))))}else{var Tt=P0(ks(ks(vt)));xy(Tt)===1?(Mu(ks(vt),0),Mu(Tt,0),Mu(ks(ks(vt)),1),vt=ks(ks(vt))):(vt===P0(ks(vt))&&(vt=ks(vt),_t.rotateRight(vt)),Mu(ks(vt),0),Mu(ks(ks(vt)),1),_t.rotateLeft(ks(ks(vt))))}this.root_.color=0},Ya.prototype.values=function(){var vt=new vi,_t=this.getFirstEntry();if(_t!==null)for(vt.add(_t.value);(_t=Ya.successor(_t))!==null;)vt.add(_t.value);return vt},Ya.prototype.entrySet=function(){var vt=new Jg,_t=this.getFirstEntry();if(_t!==null)for(vt.add(_t);(_t=Ya.successor(_t))!==null;)vt.add(_t);return vt},Ya.prototype.rotateLeft=function(vt){if(vt!=null){var _t=vt.right;vt.right=_t.left,_t.left!=null&&(_t.left.parent=vt),_t.parent=vt.parent,vt.parent===null?this.root_=_t:vt.parent.left===vt?vt.parent.left=_t:vt.parent.right=_t,_t.left=vt,vt.parent=_t}},Ya.prototype.rotateRight=function(vt){if(vt!=null){var _t=vt.left;vt.left=_t.right,_t.right!=null&&(_t.right.parent=vt),_t.parent=vt.parent,vt.parent===null?this.root_=_t:vt.parent.right===vt?vt.parent.right=_t:vt.parent.left=_t,_t.right=vt,vt.parent=_t}},Ya.prototype.getFirstEntry=function(){var vt=this.root_;if(vt!=null)for(;vt.left!=null;)vt=vt.left;return vt},Ya.successor=function(vt){if(vt===null)return null;if(vt.right!==null){for(var _t=vt.right;_t.left!==null;)_t=_t.left;return _t}for(var wt=vt.parent,Tt=vt;wt!==null&&Tt===wt.right;)Tt=wt,wt=wt.parent;return wt},Ya.prototype.size=function(){return this.size_};var Mf=function(){};function Ey(){}function _c(){this.array_=[],arguments[0]instanceof fa&&this.addAll(arguments[0])}Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Ey.prototype=new Kg,_c.prototype=new Ey,_c.prototype.contains=function(vt){for(var _t=0,wt=this.array_.length;_t<wt;_t++)if(this.array_[_t].compareTo(vt)===0)return!0;return!1},_c.prototype.add=function(vt){if(this.contains(vt))return!1;for(var _t=0,wt=this.array_.length;_t<wt;_t++)if(this.array_[_t].compareTo(vt)===1)return this.array_.splice(_t,0,vt),!0;return this.array_.push(vt),!0},_c.prototype.addAll=function(vt){for(var _t=vt.iterator();_t.hasNext();)this.add(_t.next());return!0},_c.prototype.remove=function(vt){throw new Rf},_c.prototype.size=function(){return this.array_.length},_c.prototype.isEmpty=function(){return this.array_.length===0},_c.prototype.toArray=function(){for(var vt=[],_t=0,wt=this.array_.length;_t<wt;_t++)vt.push(this.array_[_t]);return vt},_c.prototype.iterator=function(){return new Qg(this)};var Qg=function(vt){this.treeSet_=vt,this.position_=0};Qg.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new $d;return this.treeSet_.array_[this.position_++]},Qg.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Qg.prototype.remove=function(){throw new Rf};var fu=function(){};fu.sort=function(){var vt,_t,wt,Tt,At=arguments[0];if(arguments.length===1)Tt=function(Nt,jt){return Nt.compareTo(jt)},At.sort(Tt);else if(arguments.length===2)wt=arguments[1],Tt=function(Nt,jt){return wt.compare(Nt,jt)},At.sort(Tt);else if(arguments.length===3){(_t=At.slice(arguments[1],arguments[2])).sort();var Ot=At.slice(0,arguments[1]).concat(_t,At.slice(arguments[2],At.length));for(At.splice(0,At.length),vt=0;vt<Ot.length;vt++)At.push(Ot[vt])}else if(arguments.length===4)for(_t=At.slice(arguments[1],arguments[2]),wt=arguments[3],Tt=function(Nt,jt){return wt.compare(Nt,jt)},_t.sort(Tt),Ot=At.slice(0,arguments[1]).concat(_t,At.slice(arguments[2],At.length)),At.splice(0,At.length),vt=0;vt<Ot.length;vt++)At.push(Ot[vt])},fu.asList=function(vt){for(var _t=new vi,wt=0,Tt=vt.length;wt<Tt;wt++)_t.add(vt[wt]);return _t};var as=function(){},nc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};nc.P.get=function(){return 0},nc.L.get=function(){return 1},nc.A.get=function(){return 2},nc.FALSE.get=function(){return-1},nc.TRUE.get=function(){return-2},nc.DONTCARE.get=function(){return-3},nc.SYM_FALSE.get=function(){return"F"},nc.SYM_TRUE.get=function(){return"T"},nc.SYM_DONTCARE.get=function(){return"*"},nc.SYM_P.get=function(){return"0"},nc.SYM_L.get=function(){return"1"},nc.SYM_A.get=function(){return"2"},as.prototype.interfaces_=function(){return[]},as.prototype.getClass=function(){return as},as.toDimensionSymbol=function(vt){switch(vt){case as.FALSE:return as.SYM_FALSE;case as.TRUE:return as.SYM_TRUE;case as.DONTCARE:return as.SYM_DONTCARE;case as.P:return as.SYM_P;case as.L:return as.SYM_L;case as.A:return as.SYM_A}throw new Ds("Unknown dimension value: "+vt)},as.toDimensionValue=function(vt){switch(Dp.toUpperCase(vt)){case as.SYM_FALSE:return as.FALSE;case as.SYM_TRUE:return as.TRUE;case as.SYM_DONTCARE:return as.DONTCARE;case as.SYM_P:return as.P;case as.SYM_L:return as.L;case as.SYM_A:return as.A}throw new Ds("Unknown dimension symbol: "+vt)},Object.defineProperties(as,nc);var Vc=function(){};Vc.prototype.filter=function(vt){},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc};var bc=function(){};bc.prototype.filter=function(vt,_t){},bc.prototype.isDone=function(){},bc.prototype.isGeometryChanged=function(){},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc};var rl=function(vt){function _t(Tt,At){if(vt.call(this,At),this._geometries=Tt||[],vt.hasNullElements(this._geometries))throw new Ds("geometries must not contain null elements")}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){for(var Tt=new Vi,At=0;At<this._geometries.length;At++)Tt.expandToInclude(this._geometries[At].getEnvelopeInternal());return Tt},_t.prototype.getGeometryN=function(Tt){return this._geometries[Tt]},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_GEOMETRYCOLLECTION},_t.prototype.getCoordinates=function(){for(var Tt=new Array(this.getNumPoints()).fill(null),At=-1,Ot=0;Ot<this._geometries.length;Ot++)for(var Nt=this._geometries[Ot].getCoordinates(),jt=0;jt<Nt.length;jt++)Tt[++At]=Nt[jt];return Tt},_t.prototype.getArea=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getArea();return Tt},_t.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Nt=At;if(this._geometries.length!==Nt._geometries.length)return!1;for(var jt=0;jt<this._geometries.length;jt++)if(!Tt._geometries[jt].equalsExact(Nt._geometries[jt],Ot))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){for(var Tt=0;Tt<this._geometries.length;Tt++)this._geometries[Tt].normalize();fu.sort(this._geometries)},_t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},_t.prototype.getBoundaryDimension=function(){for(var Tt=as.FALSE,At=0;At<this._geometries.length;At++)Tt=Math.max(Tt,this._geometries[At].getBoundaryDimension());return Tt},_t.prototype.getDimension=function(){for(var Tt=as.FALSE,At=0;At<this._geometries.length;At++)Tt=Math.max(Tt,this._geometries[At].getDimension());return Tt},_t.prototype.getLength=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getLength();return Tt},_t.prototype.getNumPoints=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getNumPoints();return Tt},_t.prototype.getNumGeometries=function(){return this._geometries.length},_t.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Ot]=this._geometries[Ot].reverse();return this.getFactory().createGeometryCollection(At)},_t.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){var At=arguments[0],Ot=new _c(fu.asList(this._geometries)),Nt=new _c(fu.asList(At._geometries));return this.compare(Ot,Nt)}if(arguments.length===2){for(var jt=arguments[0],Gt=arguments[1],qt=jt,en=this.getNumGeometries(),Xt=qt.getNumGeometries(),sn=0;sn<en&&sn<Xt;){var yn=Tt.getGeometryN(sn),vn=qt.getGeometryN(sn),wn=yn.compareToSameClass(vn,Gt);if(wn!==0)return wn;sn++}return sn<en?1:sn<Xt?-1:0}},_t.prototype.apply=function(){var Tt=this;if(to(arguments[0],hu))for(var At=arguments[0],Ot=0;Ot<this._geometries.length;Ot++)Tt._geometries[Ot].apply(At);else if(to(arguments[0],bc)){var Nt=arguments[0];if(this._geometries.length===0)return null;for(var jt=0;jt<this._geometries.length&&(Tt._geometries[jt].apply(Nt),!Nt.isDone());jt++);Nt.isGeometryChanged()&&this.geometryChanged()}else if(to(arguments[0],Vc)){var Gt=arguments[0];Gt.filter(this);for(var qt=0;qt<this._geometries.length;qt++)Tt._geometries[qt].apply(Gt)}else if(to(arguments[0],cu)){var en=arguments[0];en.filter(this);for(var Xt=0;Xt<this._geometries.length;Xt++)Tt._geometries[Xt].apply(en)}},_t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),vo.shouldNeverReachHere(),null},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);Tt._geometries=new Array(this._geometries.length).fill(null);for(var At=0;At<this._geometries.length;At++)Tt._geometries[At]=this._geometries[At].clone();return Tt},_t.prototype.getGeometryType=function(){return"GeometryCollection"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.isEmpty=function(){for(var Tt=0;Tt<this._geometries.length;Tt++)if(!this._geometries[Tt].isEmpty())return!1;return!0},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},wt.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(_t,wt),_t}(Qi),gh=function(vt){function _t(){vt.apply(this,arguments)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return Qi.SORTINDEX_MULTILINESTRING},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return this.isClosed()?as.FALSE:0},_t.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var Tt=0;Tt<this._geometries.length;Tt++)if(!this._geometries[Tt].isClosed())return!1;return!0},_t.prototype.getDimension=function(){return 1},_t.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Tt-1-Ot]=this._geometries[Ot].reverse();return this.getFactory().createMultiLineString(At)},_t.prototype.getBoundary=function(){return new gl(this).getBoundary()},_t.prototype.getGeometryType=function(){return"MultiLineString"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.interfaces_=function(){return[Mf]},_t.prototype.getClass=function(){return _t},wt.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(_t,wt),_t}(rl),gl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var vt=arguments[0],_t=tc.MOD2_BOUNDARY_RULE;this._geom=vt,this._geomFact=vt.getFactory(),this._bnRule=_t}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this._geom=wt,this._geomFact=wt.getFactory(),this._bnRule=Tt}};gl.prototype.boundaryMultiLineString=function(vt){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var _t=this.computeBoundaryCoordinates(vt);return _t.length===1?this._geomFact.createPoint(_t[0]):this._geomFact.createMultiPointFromCoords(_t)},gl.prototype.getBoundary=function(){return this._geom instanceof Bs?this.boundaryLineString(this._geom):this._geom instanceof gh?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},gl.prototype.boundaryLineString=function(vt){return this._geom.isEmpty()?this.getEmptyMultiPoint():vt.isClosed()?this._bnRule.isInBoundary(2)?vt.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([vt.getStartPoint(),vt.getEndPoint()])},gl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},gl.prototype.computeBoundaryCoordinates=function(vt){var _t=this,wt=new vi;this._endpointMap=new Ya;for(var Tt=0;Tt<vt.getNumGeometries();Tt++){var At=vt.getGeometryN(Tt);At.getNumPoints()!==0&&(_t.addEndpoint(At.getCoordinateN(0)),_t.addEndpoint(At.getCoordinateN(At.getNumPoints()-1)))}for(var Ot=this._endpointMap.entrySet().iterator();Ot.hasNext();){var Nt=Ot.next(),jt=Nt.getValue().count;_t._bnRule.isInBoundary(jt)&&wt.add(Nt.getKey())}return Lo.toCoordinateArray(wt)},gl.prototype.addEndpoint=function(vt){var _t=this._endpointMap.get(vt);_t===null&&(_t=new Nf,this._endpointMap.put(vt,_t)),_t.count++},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.getBoundary=function(){if(arguments.length===1){var vt=arguments[0],_t=new gl(vt);return _t.getBoundary()}if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=new gl(wt,Tt);return At.getBoundary()}};var Nf=function(){this.count=null};function Sy(){}function e_(){}Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf};var t_=function(){};function n_(){}function r_(){}function Cy(){}var rc=function(){},O0={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},rc.chars=function(vt,_t){for(var wt=new Array(_t).fill(null),Tt=0;Tt<_t;Tt++)wt[Tt]=vt;return String(wt)},rc.getStackTrace=function(){if(arguments.length===1){var vt=arguments[0],_t=new n_,wt=new Sy;return vt.printStackTrace(wt),_t.toString()}if(arguments.length===2){for(var Tt=arguments[0],At=arguments[1],Ot="",Nt=new e_(rc.getStackTrace(Tt)),jt=new Cy,Gt=0;Gt<At;Gt++)try{Ot+=jt.readLine()+rc.NEWLINE}catch(qt){if(!(qt instanceof r_))throw qt;vo.shouldNeverReachHere()}return Ot}},rc.split=function(vt,_t){for(var wt=_t.length,Tt=new vi,At=""+vt,Ot=At.indexOf(_t);Ot>=0;){var Nt=At.substring(0,Ot);Tt.add(Nt),Ot=(At=At.substring(Ot+wt)).indexOf(_t)}At.length>0&&Tt.add(At);for(var jt=new Array(Tt.size()).fill(null),Gt=0;Gt<jt.length;Gt++)jt[Gt]=Tt.get(Gt);return jt},rc.toString=function(){if(arguments.length===1){var vt=arguments[0];return rc.SIMPLE_ORDINATE_FORMAT.format(vt)}},rc.spaces=function(vt){return rc.chars(" ",vt)},O0.NEWLINE.get=function(){return za.getProperty("line.separator")},O0.SIMPLE_ORDINATE_FORMAT.get=function(){return new t_},Object.defineProperties(rc,O0);var Zs=function(){};Zs.prototype.interfaces_=function(){return[]},Zs.prototype.getClass=function(){return Zs},Zs.copyCoord=function(vt,_t,wt,Tt){for(var At=Math.min(vt.getDimension(),wt.getDimension()),Ot=0;Ot<At;Ot++)wt.setOrdinate(Tt,Ot,vt.getOrdinate(_t,Ot))},Zs.isRing=function(vt){var _t=vt.size();return _t===0||!(_t<=3)&&vt.getOrdinate(0,qo.X)===vt.getOrdinate(_t-1,qo.X)&&vt.getOrdinate(0,qo.Y)===vt.getOrdinate(_t-1,qo.Y)},Zs.isEqual=function(vt,_t){var wt=vt.size();if(wt!==_t.size())return!1;for(var Tt=Math.min(vt.getDimension(),_t.getDimension()),At=0;At<wt;At++)for(var Ot=0;Ot<Tt;Ot++){var Nt=vt.getOrdinate(At,Ot),jt=_t.getOrdinate(At,Ot);if(vt.getOrdinate(At,Ot)!==_t.getOrdinate(At,Ot)&&(!ho.isNaN(Nt)||!ho.isNaN(jt)))return!1}return!0},Zs.extend=function(vt,_t,wt){var Tt=vt.create(wt,_t.getDimension()),At=_t.size();if(Zs.copy(_t,0,Tt,0,At),At>0)for(var Ot=At;Ot<wt;Ot++)Zs.copy(_t,At-1,Tt,Ot,1);return Tt},Zs.reverse=function(vt){for(var _t=vt.size()-1,wt=Math.trunc(_t/2),Tt=0;Tt<=wt;Tt++)Zs.swap(vt,Tt,_t-Tt)},Zs.swap=function(vt,_t,wt){if(_t===wt)return null;for(var Tt=0;Tt<vt.getDimension();Tt++){var At=vt.getOrdinate(_t,Tt);vt.setOrdinate(_t,Tt,vt.getOrdinate(wt,Tt)),vt.setOrdinate(wt,Tt,At)}},Zs.copy=function(vt,_t,wt,Tt,At){for(var Ot=0;Ot<At;Ot++)Zs.copyCoord(vt,_t+Ot,wt,Tt+Ot)},Zs.toString=function(){if(arguments.length===1){var vt=arguments[0],_t=vt.size();if(_t===0)return"()";var wt=vt.getDimension(),Tt=new Fc;Tt.append("(");for(var At=0;At<_t;At++){At>0&&Tt.append(" ");for(var Ot=0;Ot<wt;Ot++)Ot>0&&Tt.append(","),Tt.append(rc.toString(vt.getOrdinate(At,Ot)))}return Tt.append(")"),Tt.toString()}},Zs.ensureValidRing=function(vt,_t){var wt=_t.size();return wt===0?_t:wt<=3?Zs.createClosedRing(vt,_t,4):_t.getOrdinate(0,qo.X)===_t.getOrdinate(wt-1,qo.X)&&_t.getOrdinate(0,qo.Y)===_t.getOrdinate(wt-1,qo.Y)?_t:Zs.createClosedRing(vt,_t,wt+1)},Zs.createClosedRing=function(vt,_t,wt){var Tt=vt.create(wt,_t.getDimension()),At=_t.size();Zs.copy(_t,0,Tt,0,At);for(var Ot=At;Ot<wt;Ot++)Zs.copy(_t,0,Tt,Ot,1);return Tt};var Bs=function(vt){function _t(Tt,At){vt.call(this,At),this._points=null,this.init(Tt)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Vi:this._points.expandEnvelope(new Vi)},_t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_LINESTRING},_t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},_t.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Nt=At;if(this._points.size()!==Nt._points.size())return!1;for(var jt=0;jt<this._points.size();jt++)if(!Tt.equal(Tt._points.getCoordinate(jt),Nt._points.getCoordinate(jt),Ot))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){for(var Tt=this,At=0;At<Math.trunc(this._points.size()/2);At++){var Ot=Tt._points.size()-1-At;if(!Tt._points.getCoordinate(At).equals(Tt._points.getCoordinate(Ot)))return Tt._points.getCoordinate(At).compareTo(Tt._points.getCoordinate(Ot))>0&&Zs.reverse(Tt._points),null}},_t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},_t.prototype.getBoundaryDimension=function(){return this.isClosed()?as.FALSE:0},_t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},_t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},_t.prototype.getDimension=function(){return 1},_t.prototype.getLength=function(){return Si.computeLength(this._points)},_t.prototype.getNumPoints=function(){return this._points.size()},_t.prototype.reverse=function(){var Tt=this._points.copy();return Zs.reverse(Tt),this.getFactory().createLineString(Tt)},_t.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){for(var At=arguments[0],Ot=At,Nt=0,jt=0;Nt<this._points.size()&&jt<Ot._points.size();){var Gt=Tt._points.getCoordinate(Nt).compareTo(Ot._points.getCoordinate(jt));if(Gt!==0)return Gt;Nt++,jt++}return Nt<this._points.size()?1:jt<Ot._points.size()?-1:0}if(arguments.length===2){var qt=arguments[0],en=arguments[1],Xt=qt;return en.compare(this._points,Xt._points)}},_t.prototype.apply=function(){var Tt=this;if(to(arguments[0],hu))for(var At=arguments[0],Ot=0;Ot<this._points.size();Ot++)At.filter(Tt._points.getCoordinate(Ot));else if(to(arguments[0],bc)){var Nt=arguments[0];if(this._points.size()===0)return null;for(var jt=0;jt<this._points.size()&&(Nt.filter(Tt._points,jt),!Nt.isDone());jt++);Nt.isGeometryChanged()&&this.geometryChanged()}else if(to(arguments[0],Vc)){var Gt=arguments[0];Gt.filter(this)}else if(to(arguments[0],cu)){var qt=arguments[0];qt.filter(this)}},_t.prototype.getBoundary=function(){return new gl(this).getBoundary()},_t.prototype.isEquivalentClass=function(Tt){return Tt instanceof _t},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);return Tt._points=this._points.clone(),Tt},_t.prototype.getCoordinateN=function(Tt){return this._points.getCoordinate(Tt)},_t.prototype.getGeometryType=function(){return"LineString"},_t.prototype.copy=function(){return new _t(this._points.copy(),this._factory)},_t.prototype.getCoordinateSequence=function(){return this._points},_t.prototype.isEmpty=function(){return this._points.size()===0},_t.prototype.init=function(Tt){if(Tt===null&&(Tt=this.getFactory().getCoordinateSequenceFactory().create([])),Tt.size()===1)throw new Ds("Invalid number of points in LineString (found "+Tt.size()+" - must be 0 or >= 2)");this._points=Tt},_t.prototype.isCoordinate=function(Tt){for(var At=0;At<this._points.size();At++)if(this._points.getCoordinate(At).equals(Tt))return!0;return!1},_t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},_t.prototype.getPointN=function(Tt){return this.getFactory().createPoint(this._points.getCoordinate(Tt))},_t.prototype.interfaces_=function(){return[Mf]},_t.prototype.getClass=function(){return _t},wt.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(_t,wt),_t}(Qi),xc=function(){};xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var Ll=function(vt){function _t(Tt,At){vt.call(this,At),this._coordinates=Tt||null,this.init(this._coordinates)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Vi;var Tt=new Vi;return Tt.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),Tt},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_POINT},_t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&(!(!this.isEmpty()||!Tt.isEmpty())||this.isEmpty()===Tt.isEmpty()&&this.equal(Tt.getCoordinate(),this.getCoordinate(),At))}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){},_t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},_t.prototype.getBoundaryDimension=function(){return as.FALSE},_t.prototype.getDimension=function(){return 0},_t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},_t.prototype.reverse=function(){return this.copy()},_t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},_t.prototype.compareToSameClass=function(){if(arguments.length===1){var Tt=arguments[0],At=Tt;return this.getCoordinate().compareTo(At.getCoordinate())}if(arguments.length===2){var Ot=arguments[0],Nt=arguments[1],jt=Ot;return Nt.compare(this._coordinates,jt._coordinates)}},_t.prototype.apply=function(){if(to(arguments[0],hu)){var Tt=arguments[0];if(this.isEmpty())return null;Tt.filter(this.getCoordinate())}else if(to(arguments[0],bc)){var At=arguments[0];if(this.isEmpty())return null;At.filter(this._coordinates,0),At.isGeometryChanged()&&this.geometryChanged()}else if(to(arguments[0],Vc)){var Ot=arguments[0];Ot.filter(this)}else if(to(arguments[0],cu)){var Nt=arguments[0];Nt.filter(this)}},_t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);return Tt._coordinates=this._coordinates.clone(),Tt},_t.prototype.getGeometryType=function(){return"Point"},_t.prototype.copy=function(){return new _t(this._coordinates.copy(),this._factory)},_t.prototype.getCoordinateSequence=function(){return this._coordinates},_t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},_t.prototype.isEmpty=function(){return this._coordinates.size()===0},_t.prototype.init=function(Tt){Tt===null&&(Tt=this.getFactory().getCoordinateSequenceFactory().create([])),vo.isTrue(Tt.size()<=1),this._coordinates=Tt},_t.prototype.isSimple=function(){return!0},_t.prototype.interfaces_=function(){return[xc]},_t.prototype.getClass=function(){return _t},wt.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(_t,wt),_t}(Qi),mh=function(){};mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var pa=function(vt){function _t(Tt,At,Ot){if(vt.call(this,Ot),this._shell=null,this._holes=null,Tt===null&&(Tt=this.getFactory().createLinearRing()),At===null&&(At=[]),vt.hasNullElements(At))throw new Ds("holes must not contain null elements");if(Tt.isEmpty()&&vt.hasNonEmptyElements(At))throw new Ds("shell is empty but holes are not");this._shell=Tt,this._holes=At}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={serialVersionUID:{configurable:!0}};return _t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},_t.prototype.getSortIndex=function(){return vt.SORTINDEX_POLYGON},_t.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var Tt=new Array(this.getNumPoints()).fill(null),At=-1,Ot=this._shell.getCoordinates(),Nt=0;Nt<Ot.length;Nt++)Tt[++At]=Ot[Nt];for(var jt=0;jt<this._holes.length;jt++)for(var Gt=this._holes[jt].getCoordinates(),qt=0;qt<Gt.length;qt++)Tt[++At]=Gt[qt];return Tt},_t.prototype.getArea=function(){var Tt=0;Tt+=Math.abs(Si.signedArea(this._shell.getCoordinateSequence()));for(var At=0;At<this._holes.length;At++)Tt-=Math.abs(Si.signedArea(this._holes[At].getCoordinateSequence()));return Tt},_t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var Tt=this._shell.getCoordinateSequence(),At=this.getEnvelopeInternal(),Ot=0;Ot<5;Ot++){var Nt=Tt.getX(Ot);if(Nt!==At.getMinX()&&Nt!==At.getMaxX())return!1;var jt=Tt.getY(Ot);if(jt!==At.getMinY()&&jt!==At.getMaxY())return!1}for(var Gt=Tt.getX(0),qt=Tt.getY(0),en=1;en<=4;en++){var Xt=Tt.getX(en),sn=Tt.getY(en);if(Xt!==Gt==(sn!==qt))return!1;Gt=Xt,qt=sn}return!0},_t.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Nt=At,jt=this._shell,Gt=Nt._shell;if(!jt.equalsExact(Gt,Ot)||this._holes.length!==Nt._holes.length)return!1;for(var qt=0;qt<this._holes.length;qt++)if(!Tt._holes[qt].equalsExact(Nt._holes[qt],Ot))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.normalize=function(){var Tt=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var At=0;At<this._holes.length;At++)Tt.normalize(Tt._holes[At],!1);fu.sort(this._holes)}else if(arguments.length===2){var Ot=arguments[0],Nt=arguments[1];if(Ot.isEmpty())return null;var jt=new Array(Ot.getCoordinates().length-1).fill(null);za.arraycopy(Ot.getCoordinates(),0,jt,0,jt.length);var Gt=Lo.minCoordinate(Ot.getCoordinates());Lo.scroll(jt,Gt),za.arraycopy(jt,0,Ot.getCoordinates(),0,jt.length),Ot.getCoordinates()[jt.length]=jt[0],Si.isCCW(Ot.getCoordinates())===Nt&&Lo.reverse(Ot.getCoordinates())}},_t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},_t.prototype.getNumInteriorRing=function(){return this._holes.length},_t.prototype.getBoundaryDimension=function(){return 1},_t.prototype.getDimension=function(){return 2},_t.prototype.getLength=function(){var Tt=0;Tt+=this._shell.getLength();for(var At=0;At<this._holes.length;At++)Tt+=this._holes[At].getLength();return Tt},_t.prototype.getNumPoints=function(){for(var Tt=this._shell.getNumPoints(),At=0;At<this._holes.length;At++)Tt+=this._holes[At].getNumPoints();return Tt},_t.prototype.reverse=function(){var Tt=this.copy();Tt._shell=this._shell.copy().reverse(),Tt._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Tt._holes[At]=this._holes[At].copy().reverse();return Tt},_t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},_t.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){var At=arguments[0],Ot=this._shell,Nt=At._shell;return Ot.compareToSameClass(Nt)}if(arguments.length===2){var jt=arguments[0],Gt=arguments[1],qt=jt,en=this._shell,Xt=qt._shell,sn=en.compareToSameClass(Xt,Gt);if(sn!==0)return sn;for(var yn=this.getNumInteriorRing(),vn=qt.getNumInteriorRing(),wn=0;wn<yn&&wn<vn;){var un=Tt.getInteriorRingN(wn),Fn=qt.getInteriorRingN(wn),Qn=un.compareToSameClass(Fn,Gt);if(Qn!==0)return Qn;wn++}return wn<yn?1:wn<vn?-1:0}},_t.prototype.apply=function(Tt){var At=this;if(to(Tt,hu)){this._shell.apply(Tt);for(var Ot=0;Ot<this._holes.length;Ot++)At._holes[Ot].apply(Tt)}else if(to(Tt,bc)){if(this._shell.apply(Tt),!Tt.isDone())for(var Nt=0;Nt<this._holes.length&&(At._holes[Nt].apply(Tt),!Tt.isDone());Nt++);Tt.isGeometryChanged()&&this.geometryChanged()}else if(to(Tt,Vc))Tt.filter(this);else if(to(Tt,cu)){Tt.filter(this),this._shell.apply(Tt);for(var jt=0;jt<this._holes.length;jt++)At._holes[jt].apply(Tt)}},_t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var Tt=new Array(this._holes.length+1).fill(null);Tt[0]=this._shell;for(var At=0;At<this._holes.length;At++)Tt[At+1]=this._holes[At];return Tt.length<=1?this.getFactory().createLinearRing(Tt[0].getCoordinateSequence()):this.getFactory().createMultiLineString(Tt)},_t.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);Tt._shell=this._shell.clone(),Tt._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Tt._holes[At]=this._holes[At].clone();return Tt},_t.prototype.getGeometryType=function(){return"Polygon"},_t.prototype.copy=function(){for(var Tt=this._shell.copy(),At=new Array(this._holes.length).fill(null),Ot=0;Ot<At.length;Ot++)At[Ot]=this._holes[Ot].copy();return new _t(Tt,At,this._factory)},_t.prototype.getExteriorRing=function(){return this._shell},_t.prototype.isEmpty=function(){return this._shell.isEmpty()},_t.prototype.getInteriorRingN=function(Tt){return this._holes[Tt]},_t.prototype.interfaces_=function(){return[mh]},_t.prototype.getClass=function(){return _t},wt.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(_t,wt),_t}(Qi),Df=function(vt){function _t(){vt.apply(this,arguments)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return Qi.SORTINDEX_MULTIPOINT},_t.prototype.isValid=function(){return!0},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.getCoordinate=function(){if(arguments.length===1){var Tt=arguments[0];return this._geometries[Tt].getCoordinate()}return vt.prototype.getCoordinate.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return as.FALSE},_t.prototype.getDimension=function(){return 0},_t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},_t.prototype.getGeometryType=function(){return"MultiPoint"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.interfaces_=function(){return[xc]},_t.prototype.getClass=function(){return _t},wt.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(_t,wt),_t}(rl),pu=function(vt){function _t(Tt,At){Tt instanceof Dr&&At instanceof Io&&(Tt=At.getCoordinateSequenceFactory().create(Tt)),vt.call(this,Tt,At),this.validateConstruction()}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return Qi.SORTINDEX_LINEARRING},_t.prototype.getBoundaryDimension=function(){return as.FALSE},_t.prototype.isClosed=function(){return!!this.isEmpty()||vt.prototype.isClosed.call(this)},_t.prototype.reverse=function(){var Tt=this._points.copy();return Zs.reverse(Tt),this.getFactory().createLinearRing(Tt)},_t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!vt.prototype.isClosed.call(this))throw new Ds("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<_t.MINIMUM_VALID_SIZE)throw new Ds("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},_t.prototype.getGeometryType=function(){return"LinearRing"},_t.prototype.copy=function(){return new _t(this._points.copy(),this._factory)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},wt.MINIMUM_VALID_SIZE.get=function(){return 4},wt.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(_t,wt),_t}(Bs),gu=function(vt){function _t(){vt.apply(this,arguments)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={serialVersionUID:{configurable:!0}};return _t.prototype.getSortIndex=function(){return Qi.SORTINDEX_MULTIPOLYGON},_t.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},_t.prototype.getBoundaryDimension=function(){return 1},_t.prototype.getDimension=function(){return 2},_t.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Ot]=this._geometries[Ot].reverse();return this.getFactory().createMultiPolygon(At)},_t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var Tt=new vi,At=0;At<this._geometries.length;At++)for(var Ot=this._geometries[At].getBoundary(),Nt=0;Nt<Ot.getNumGeometries();Nt++)Tt.add(Ot.getGeometryN(Nt));var jt=new Array(Tt.size()).fill(null);return this.getFactory().createMultiLineString(Tt.toArray(jt))},_t.prototype.getGeometryType=function(){return"MultiPolygon"},_t.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new _t(Tt,this._factory)},_t.prototype.interfaces_=function(){return[mh]},_t.prototype.getClass=function(){return _t},wt.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(_t,wt),_t}(rl),ic=function(vt){this._factory=vt||null,this._isUserDataCopied=!1},em={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ic.prototype.setCopyUserData=function(vt){this._isUserDataCopied=vt},ic.prototype.edit=function(vt,_t){if(vt===null)return null;var wt=this.editInternal(vt,_t);return this._isUserDataCopied&&wt.setUserData(vt.getUserData()),wt},ic.prototype.editInternal=function(vt,_t){return this._factory===null&&(this._factory=vt.getFactory()),vt instanceof rl?this.editGeometryCollection(vt,_t):vt instanceof pa?this.editPolygon(vt,_t):vt instanceof Ll||vt instanceof Bs?_t.edit(vt,this._factory):(vo.shouldNeverReachHere("Unsupported Geometry class: "+vt.getClass().getName()),null)},ic.prototype.editGeometryCollection=function(vt,_t){for(var wt=_t.edit(vt,this._factory),Tt=new vi,At=0;At<wt.getNumGeometries();At++){var Ot=this.edit(wt.getGeometryN(At),_t);Ot===null||Ot.isEmpty()||Tt.add(Ot)}return wt.getClass()===Df?this._factory.createMultiPoint(Tt.toArray([])):wt.getClass()===gh?this._factory.createMultiLineString(Tt.toArray([])):wt.getClass()===gu?this._factory.createMultiPolygon(Tt.toArray([])):this._factory.createGeometryCollection(Tt.toArray([]))},ic.prototype.editPolygon=function(vt,_t){var wt=_t.edit(vt,this._factory);if(wt===null&&(wt=this._factory.createPolygon(null)),wt.isEmpty())return wt;var Tt=this.edit(wt.getExteriorRing(),_t);if(Tt===null||Tt.isEmpty())return this._factory.createPolygon();for(var At=new vi,Ot=0;Ot<wt.getNumInteriorRing();Ot++){var Nt=this.edit(wt.getInteriorRingN(Ot),_t);Nt===null||Nt.isEmpty()||At.add(Nt)}return this._factory.createPolygon(Tt,At.toArray([]))},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.GeometryEditorOperation=function(){},em.NoOpGeometryOperation.get=function(){return jp},em.CoordinateOperation.get=function(){return Vp},em.CoordinateSequenceOperation.get=function(){return Up},Object.defineProperties(ic,em);var jp=function(){};jp.prototype.edit=function(vt,_t){return vt},jp.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},jp.prototype.getClass=function(){return jp};var Vp=function(){};Vp.prototype.edit=function(vt,_t){var wt=this.editCoordinates(vt.getCoordinates(),vt);return wt===null?vt:vt instanceof pu?_t.createLinearRing(wt):vt instanceof Bs?_t.createLineString(wt):vt instanceof Ll?wt.length>0?_t.createPoint(wt[0]):_t.createPoint():vt},Vp.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},Vp.prototype.getClass=function(){return Vp};var Up=function(){};Up.prototype.edit=function(vt,_t){return vt instanceof pu?_t.createLinearRing(this.edit(vt.getCoordinateSequence(),vt)):vt instanceof Bs?_t.createLineString(this.edit(vt.getCoordinateSequence(),vt)):vt instanceof Ll?_t.createPoint(this.edit(vt.getCoordinateSequence(),vt)):vt},Up.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},Up.prototype.getClass=function(){return Up};var Ks=function(){var vt=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var _t=arguments[0];this._coordinates=new Array(_t).fill(null);for(var wt=0;wt<_t;wt++)vt._coordinates[wt]=new Dr}else if(to(arguments[0],qo)){var Tt=arguments[0];if(Tt===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=Tt.getDimension(),this._coordinates=new Array(Tt.size()).fill(null);for(var At=0;At<this._coordinates.length;At++)vt._coordinates[At]=Tt.getCoordinateCopy(At)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Ot=arguments[0],Nt=arguments[1];this._coordinates=Ot,this._dimension=Nt,Ot===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var jt=arguments[0],Gt=arguments[1];this._coordinates=new Array(jt).fill(null),this._dimension=Gt;for(var qt=0;qt<jt;qt++)vt._coordinates[qt]=new Dr}}},Ty={serialVersionUID:{configurable:!0}};Ks.prototype.setOrdinate=function(vt,_t,wt){switch(_t){case qo.X:this._coordinates[vt].x=wt;break;case qo.Y:this._coordinates[vt].y=wt;break;case qo.Z:this._coordinates[vt].z=wt;break;default:throw new Ds("invalid ordinateIndex")}},Ks.prototype.size=function(){return this._coordinates.length},Ks.prototype.getOrdinate=function(vt,_t){switch(_t){case qo.X:return this._coordinates[vt].x;case qo.Y:return this._coordinates[vt].y;case qo.Z:return this._coordinates[vt].z}return ho.NaN},Ks.prototype.getCoordinate=function(){if(arguments.length===1){var vt=arguments[0];return this._coordinates[vt]}if(arguments.length===2){var _t=arguments[0],wt=arguments[1];wt.x=this._coordinates[_t].x,wt.y=this._coordinates[_t].y,wt.z=this._coordinates[_t].z}},Ks.prototype.getCoordinateCopy=function(vt){return new Dr(this._coordinates[vt])},Ks.prototype.getDimension=function(){return this._dimension},Ks.prototype.getX=function(vt){return this._coordinates[vt].x},Ks.prototype.clone=function(){for(var vt=new Array(this.size()).fill(null),_t=0;_t<this._coordinates.length;_t++)vt[_t]=this._coordinates[_t].clone();return new Ks(vt,this._dimension)},Ks.prototype.expandEnvelope=function(vt){for(var _t=0;_t<this._coordinates.length;_t++)vt.expandToInclude(this._coordinates[_t]);return vt},Ks.prototype.copy=function(){for(var vt=new Array(this.size()).fill(null),_t=0;_t<this._coordinates.length;_t++)vt[_t]=this._coordinates[_t].copy();return new Ks(vt,this._dimension)},Ks.prototype.toString=function(){if(this._coordinates.length>0){var vt=new Fc(17*this._coordinates.length);vt.append("("),vt.append(this._coordinates[0]);for(var _t=1;_t<this._coordinates.length;_t++)vt.append(", "),vt.append(this._coordinates[_t]);return vt.append(")"),vt.toString()}return"()"},Ks.prototype.getY=function(vt){return this._coordinates[vt].y},Ks.prototype.toCoordinateArray=function(){return this._coordinates},Ks.prototype.interfaces_=function(){return[qo,Ql]},Ks.prototype.getClass=function(){return Ks},Ty.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Ks,Ty);var mu=function(){},$0={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};mu.prototype.readResolve=function(){return mu.instance()},mu.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var vt=arguments[0];return new Ks(vt)}if(to(arguments[0],qo)){var _t=arguments[0];return new Ks(_t)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return Tt>3&&(Tt=3),Tt<2?new Ks(wt):new Ks(wt,Tt)}},mu.prototype.interfaces_=function(){return[Af,Ql]},mu.prototype.getClass=function(){return mu},mu.instance=function(){return mu.instanceObject},$0.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},$0.instanceObject.get=function(){return new mu},Object.defineProperties(mu,$0);var ky=function(vt){function _t(){vt.call(this),this.map_=new Map}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.get=function(wt){return this.map_.get(wt)||null},_t.prototype.put=function(wt,Tt){return this.map_.set(wt,Tt),Tt},_t.prototype.values=function(){for(var wt=new vi,Tt=this.map_.values(),At=Tt.next();!At.done;)wt.add(At.value),At=Tt.next();return wt},_t.prototype.entrySet=function(){var wt=new Jg;return this.map_.entries().forEach(function(Tt){return wt.add(Tt)}),wt},_t.prototype.size=function(){return this.map_.size()},_t}(Md),ps=function vt(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=vt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof wc){var _t=arguments[0];this._modelType=_t,_t===vt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var wt=arguments[0];this._modelType=vt.FIXED,this.setScale(wt)}else if(arguments[0]instanceof vt){var Tt=arguments[0];this._modelType=Tt._modelType,this._scale=Tt._scale}}},R0={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ps.prototype.equals=function(vt){if(!(vt instanceof ps))return!1;var _t=vt;return this._modelType===_t._modelType&&this._scale===_t._scale},ps.prototype.compareTo=function(vt){var _t=vt,wt=this.getMaximumSignificantDigits(),Tt=_t.getMaximumSignificantDigits();return new zc(wt).compareTo(new zc(Tt))},ps.prototype.getScale=function(){return this._scale},ps.prototype.isFloating=function(){return this._modelType===ps.FLOATING||this._modelType===ps.FLOATING_SINGLE},ps.prototype.getType=function(){return this._modelType},ps.prototype.toString=function(){var vt="UNKNOWN";return this._modelType===ps.FLOATING?vt="Floating":this._modelType===ps.FLOATING_SINGLE?vt="Floating-Single":this._modelType===ps.FIXED&&(vt="Fixed (Scale="+this.getScale()+")"),vt},ps.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var vt=arguments[0];return ho.isNaN(vt)||this._modelType===ps.FLOATING_SINGLE?vt:this._modelType===ps.FIXED?Math.round(vt*this._scale)/this._scale:vt}if(arguments[0]instanceof Dr){var _t=arguments[0];if(this._modelType===ps.FLOATING)return null;_t.x=this.makePrecise(_t.x),_t.y=this.makePrecise(_t.y)}},ps.prototype.getMaximumSignificantDigits=function(){var vt=16;return this._modelType===ps.FLOATING?vt=16:this._modelType===ps.FLOATING_SINGLE?vt=6:this._modelType===ps.FIXED&&(vt=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),vt},ps.prototype.setScale=function(vt){this._scale=Math.abs(vt)},ps.prototype.interfaces_=function(){return[Ql,Jl]},ps.prototype.getClass=function(){return ps},ps.mostPrecise=function(vt,_t){return vt.compareTo(_t)>=0?vt:_t},R0.serialVersionUID.get=function(){return 7777263578777804e3},R0.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(ps,R0);var wc=function vt(_t){this._name=_t||null,vt.nameToTypeMap.put(_t,this)},Gp={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};wc.prototype.readResolve=function(){return wc.nameToTypeMap.get(this._name)},wc.prototype.toString=function(){return this._name},wc.prototype.interfaces_=function(){return[Ql]},wc.prototype.getClass=function(){return wc},Gp.serialVersionUID.get=function(){return-552860263173159e4},Gp.nameToTypeMap.get=function(){return new ky},Object.defineProperties(wc,Gp),ps.Type=wc,ps.FIXED=new wc("FIXED"),ps.FLOATING=new wc("FLOATING"),ps.FLOATING_SINGLE=new wc("FLOATING SINGLE");var Io=function vt(){this._precisionModel=new ps,this._SRID=0,this._coordinateSequenceFactory=vt.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?to(arguments[0],Af)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ps&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ay={serialVersionUID:{configurable:!0}};Io.prototype.toGeometry=function(vt){return vt.isNull()?this.createPoint(null):vt.getMinX()===vt.getMaxX()&&vt.getMinY()===vt.getMaxY()?this.createPoint(new Dr(vt.getMinX(),vt.getMinY())):vt.getMinX()===vt.getMaxX()||vt.getMinY()===vt.getMaxY()?this.createLineString([new Dr(vt.getMinX(),vt.getMinY()),new Dr(vt.getMaxX(),vt.getMaxY())]):this.createPolygon(this.createLinearRing([new Dr(vt.getMinX(),vt.getMinY()),new Dr(vt.getMinX(),vt.getMaxY()),new Dr(vt.getMaxX(),vt.getMaxY()),new Dr(vt.getMaxX(),vt.getMinY()),new Dr(vt.getMinX(),vt.getMinY())]),null)},Io.prototype.createLineString=function(vt){return vt?vt instanceof Array?new Bs(this.getCoordinateSequenceFactory().create(vt),this):to(vt,qo)?new Bs(vt,this):void 0:new Bs(this.getCoordinateSequenceFactory().create([]),this)},Io.prototype.createMultiLineString=function(){if(arguments.length===0)return new gh(null,this);if(arguments.length===1){var vt=arguments[0];return new gh(vt,this)}},Io.prototype.buildGeometry=function(vt){for(var _t=null,wt=!1,Tt=!1,At=vt.iterator();At.hasNext();){var Ot=At.next(),Nt=Ot.getClass();_t===null&&(_t=Nt),Nt!==_t&&(wt=!0),Ot.isGeometryCollectionOrDerived()&&(Tt=!0)}if(_t===null)return this.createGeometryCollection();if(wt||Tt)return this.createGeometryCollection(Io.toGeometryArray(vt));var jt=vt.iterator().next();if(vt.size()>1){if(jt instanceof pa)return this.createMultiPolygon(Io.toPolygonArray(vt));if(jt instanceof Bs)return this.createMultiLineString(Io.toLineStringArray(vt));if(jt instanceof Ll)return this.createMultiPoint(Io.toPointArray(vt));vo.shouldNeverReachHere("Unhandled class: "+jt.getClass().getName())}return jt},Io.prototype.createMultiPointFromCoords=function(vt){return this.createMultiPoint(vt!==null?this.getCoordinateSequenceFactory().create(vt):null)},Io.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Dr){var vt=arguments[0];return this.createPoint(vt!==null?this.getCoordinateSequenceFactory().create([vt]):null)}if(to(arguments[0],qo)){var _t=arguments[0];return new Ll(_t,this)}}},Io.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Io.prototype.createPolygon=function(){if(arguments.length===0)return new pa(null,null,this);if(arguments.length===1){if(to(arguments[0],qo)){var vt=arguments[0];return this.createPolygon(this.createLinearRing(vt))}if(arguments[0]instanceof Array){var _t=arguments[0];return this.createPolygon(this.createLinearRing(_t))}if(arguments[0]instanceof pu){var wt=arguments[0];return this.createPolygon(wt,null)}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return new pa(Tt,At,this)}},Io.prototype.getSRID=function(){return this._SRID},Io.prototype.createGeometryCollection=function(){if(arguments.length===0)return new rl(null,this);if(arguments.length===1){var vt=arguments[0];return new rl(vt,this)}},Io.prototype.createGeometry=function(vt){return new ic(this).edit(vt,{edit:function(){if(arguments.length===2){var _t=arguments[0];return this._coordinateSequenceFactory.create(_t)}}})},Io.prototype.getPrecisionModel=function(){return this._precisionModel},Io.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var vt=arguments[0];return this.createLinearRing(vt!==null?this.getCoordinateSequenceFactory().create(vt):null)}if(to(arguments[0],qo)){var _t=arguments[0];return new pu(_t,this)}}},Io.prototype.createMultiPolygon=function(){if(arguments.length===0)return new gu(null,this);if(arguments.length===1){var vt=arguments[0];return new gu(vt,this)}},Io.prototype.createMultiPoint=function(){var vt=this;if(arguments.length===0)return new Df(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var _t=arguments[0];return new Df(_t,this)}if(arguments[0]instanceof Array){var wt=arguments[0];return this.createMultiPoint(wt!==null?this.getCoordinateSequenceFactory().create(wt):null)}if(to(arguments[0],qo)){var Tt=arguments[0];if(Tt===null)return this.createMultiPoint(new Array(0).fill(null));for(var At=new Array(Tt.size()).fill(null),Ot=0;Ot<Tt.size();Ot++){var Nt=vt.getCoordinateSequenceFactory().create(1,Tt.getDimension());Zs.copy(Tt,Ot,Nt,0,1),At[Ot]=vt.createPoint(Nt)}return this.createMultiPoint(At)}}},Io.prototype.interfaces_=function(){return[Ql]},Io.prototype.getClass=function(){return Io},Io.toMultiPolygonArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.toGeometryArray=function(vt){if(vt===null)return null;var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.getDefaultCoordinateSequenceFactory=function(){return mu.instance()},Io.toMultiLineStringArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.toLineStringArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.toMultiPointArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.toLinearRingArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.toPointArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.toPolygonArray=function(vt){var _t=new Array(vt.size()).fill(null);return vt.toArray(_t)},Io.createPointFromInternalCoord=function(vt,_t){return _t.getPrecisionModel().makePrecise(vt),_t.getFactory().createPoint(vt)},Ay.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Io,Ay);var i_=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Wp=function(vt){this.geometryFactory=vt||new Io};Wp.prototype.read=function(vt){var _t,wt=(_t=typeof vt=="string"?JSON.parse(vt):vt).type;if(!Uc[wt])throw new Error("Unknown GeoJSON type: "+_t.type);return i_.indexOf(wt)!==-1?Uc[wt].apply(this,[_t.coordinates]):wt==="GeometryCollection"?Uc[wt].apply(this,[_t.geometries]):Uc[wt].apply(this,[_t])},Wp.prototype.write=function(vt){var _t=vt.getGeometryType();if(!Nu[_t])throw new Error("Geometry is not supported");return Nu[_t].apply(this,[vt])};var Uc={Feature:function(vt){var _t={};for(var wt in vt)_t[wt]=vt[wt];if(vt.geometry){var Tt=vt.geometry.type;if(!Uc[Tt])throw new Error("Unknown GeoJSON type: "+vt.type);_t.geometry=this.read(vt.geometry)}return vt.bbox&&(_t.bbox=Uc.bbox.apply(this,[vt.bbox])),_t},FeatureCollection:function(vt){var _t={};if(vt.features){_t.features=[];for(var wt=0;wt<vt.features.length;++wt)_t.features.push(this.read(vt.features[wt]))}return vt.bbox&&(_t.bbox=this.parse.bbox.apply(this,[vt.bbox])),_t},coordinates:function(vt){for(var _t=[],wt=0;wt<vt.length;++wt){var Tt=vt[wt];_t.push(new Dr(Tt[0],Tt[1]))}return _t},bbox:function(vt){return this.geometryFactory.createLinearRing([new Dr(vt[0],vt[1]),new Dr(vt[2],vt[1]),new Dr(vt[2],vt[3]),new Dr(vt[0],vt[3]),new Dr(vt[0],vt[1])])},Point:function(vt){var _t=new Dr(vt[0],vt[1]);return this.geometryFactory.createPoint(_t)},MultiPoint:function(vt){for(var _t=[],wt=0;wt<vt.length;++wt)_t.push(Uc.Point.apply(this,[vt[wt]]));return this.geometryFactory.createMultiPoint(_t)},LineString:function(vt){var _t=Uc.coordinates.apply(this,[vt]);return this.geometryFactory.createLineString(_t)},MultiLineString:function(vt){for(var _t=[],wt=0;wt<vt.length;++wt)_t.push(Uc.LineString.apply(this,[vt[wt]]));return this.geometryFactory.createMultiLineString(_t)},Polygon:function(vt){for(var _t=Uc.coordinates.apply(this,[vt[0]]),wt=this.geometryFactory.createLinearRing(_t),Tt=[],At=1;At<vt.length;++At){var Ot=vt[At],Nt=Uc.coordinates.apply(this,[Ot]),jt=this.geometryFactory.createLinearRing(Nt);Tt.push(jt)}return this.geometryFactory.createPolygon(wt,Tt)},MultiPolygon:function(vt){for(var _t=[],wt=0;wt<vt.length;++wt){var Tt=vt[wt];_t.push(Uc.Polygon.apply(this,[Tt]))}return this.geometryFactory.createMultiPolygon(_t)},GeometryCollection:function(vt){for(var _t=[],wt=0;wt<vt.length;++wt){var Tt=vt[wt];_t.push(this.read(Tt))}return this.geometryFactory.createGeometryCollection(_t)}},Nu={coordinate:function(vt){return[vt.x,vt.y]},Point:function(vt){return{type:"Point",coordinates:Nu.coordinate.apply(this,[vt.getCoordinate()])}},MultiPoint:function(vt){for(var _t=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Nu.Point.apply(this,[Tt]);_t.push(At.coordinates)}return{type:"MultiPoint",coordinates:_t}},LineString:function(vt){for(var _t=[],wt=vt.getCoordinates(),Tt=0;Tt<wt.length;++Tt){var At=wt[Tt];_t.push(Nu.coordinate.apply(this,[At]))}return{type:"LineString",coordinates:_t}},MultiLineString:function(vt){for(var _t=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Nu.LineString.apply(this,[Tt]);_t.push(At.coordinates)}return{type:"MultiLineString",coordinates:_t}},Polygon:function(vt){var _t=[],wt=Nu.LineString.apply(this,[vt._shell]);_t.push(wt.coordinates);for(var Tt=0;Tt<vt._holes.length;++Tt){var At=vt._holes[Tt],Ot=Nu.LineString.apply(this,[At]);_t.push(Ot.coordinates)}return{type:"Polygon",coordinates:_t}},MultiPolygon:function(vt){for(var _t=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Nu.Polygon.apply(this,[Tt]);_t.push(At.coordinates)}return{type:"MultiPolygon",coordinates:_t}},GeometryCollection:function(vt){for(var _t=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Tt.getGeometryType();_t.push(Nu[At].apply(this,[Tt]))}return{type:"GeometryCollection",geometries:_t}}},tm=function(vt){this.geometryFactory=vt||new Io,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Wp(this.geometryFactory)};tm.prototype.read=function(vt){var _t=this.parser.read(vt);return this.precisionModel.getType()===ps.FIXED&&this.reducePrecision(_t),_t},tm.prototype.reducePrecision=function(vt){var _t,wt;if(vt.coordinate)this.precisionModel.makePrecise(vt.coordinate);else if(vt.points)for(_t=0,wt=vt.points.length;_t<wt;_t++)this.precisionModel.makePrecise(vt.points[_t]);else if(vt.geometries)for(_t=0,wt=vt.geometries.length;_t<wt;_t++)this.reducePrecision(vt.geometries[_t])};var Ly=function(){this.parser=new Wp(this.geometryFactory)};Ly.prototype.write=function(vt){return this.parser.write(vt)};var di=function(){},qp={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function nm(vt){this.message=vt||""}function Gc(){this.array_=[]}di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},di.opposite=function(vt){return vt===di.LEFT?di.RIGHT:vt===di.RIGHT?di.LEFT:vt},qp.ON.get=function(){return 0},qp.LEFT.get=function(){return 1},qp.RIGHT.get=function(){return 2},Object.defineProperties(di,qp),nm.prototype=new Error,nm.prototype.name="EmptyStackException",Gc.prototype=new vc,Gc.prototype.add=function(vt){return this.array_.push(vt),!0},Gc.prototype.get=function(vt){if(vt<0||vt>=this.size())throw new Error;return this.array_[vt]},Gc.prototype.push=function(vt){return this.array_.push(vt),vt},Gc.prototype.pop=function(vt){if(this.array_.length===0)throw new nm;return this.array_.pop()},Gc.prototype.peek=function(){if(this.array_.length===0)throw new nm;return this.array_[this.array_.length-1]},Gc.prototype.empty=function(){return this.array_.length===0},Gc.prototype.isEmpty=function(){return this.empty()},Gc.prototype.search=function(vt){return this.array_.indexOf(vt)},Gc.prototype.size=function(){return this.array_.length},Gc.prototype.toArray=function(){for(var vt=[],_t=0,wt=this.array_.length;_t<wt;_t++)vt.push(this.array_[_t]);return vt};var Ec=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ec.prototype.getCoordinate=function(){return this._minCoord},Ec.prototype.getRightmostSide=function(vt,_t){var wt=this.getRightmostSideOfSegment(vt,_t);return wt<0&&(wt=this.getRightmostSideOfSegment(vt,_t-1)),wt<0&&(this._minCoord=null,this.checkForRightmostCoordinate(vt)),wt},Ec.prototype.findRightmostEdgeAtVertex=function(){var vt=this._minDe.getEdge().getCoordinates();vo.isTrue(this._minIndex>0&&this._minIndex<vt.length,"rightmost point expected to be interior vertex of edge");var _t=vt[this._minIndex-1],wt=vt[this._minIndex+1],Tt=Si.computeOrientation(this._minCoord,wt,_t),At=!1;(_t.y<this._minCoord.y&&wt.y<this._minCoord.y&&Tt===Si.COUNTERCLOCKWISE||_t.y>this._minCoord.y&&wt.y>this._minCoord.y&&Tt===Si.CLOCKWISE)&&(At=!0),At&&(this._minIndex=this._minIndex-1)},Ec.prototype.getRightmostSideOfSegment=function(vt,_t){var wt=vt.getEdge().getCoordinates();if(_t<0||_t+1>=wt.length||wt[_t].y===wt[_t+1].y)return-1;var Tt=di.LEFT;return wt[_t].y<wt[_t+1].y&&(Tt=di.RIGHT),Tt},Ec.prototype.getEdge=function(){return this._orientedDe},Ec.prototype.checkForRightmostCoordinate=function(vt){for(var _t=this,wt=vt.getEdge().getCoordinates(),Tt=0;Tt<wt.length-1;Tt++)(_t._minCoord===null||wt[Tt].x>_t._minCoord.x)&&(_t._minDe=vt,_t._minIndex=Tt,_t._minCoord=wt[Tt])},Ec.prototype.findRightmostEdgeAtNode=function(){var vt=this._minDe.getNode().getEdges();this._minDe=vt.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ec.prototype.findEdge=function(vt){for(var _t=vt.iterator();_t.hasNext();){var wt=_t.next();wt.isForward()&&this.checkForRightmostCoordinate(wt)}vo.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===di.LEFT&&(this._orientedDe=this._minDe.getSym())},Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec};var Du=function(vt){function _t(wt,Tt){vt.call(this,_t.msgWithCoord(wt,Tt)),this.pt=Tt?new Dr(Tt):null,this.name="TopologyException"}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.getCoordinate=function(){return this.pt},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.msgWithCoord=function(wt,Tt){return Tt?wt:wt+" [ "+Tt+" ]"},_t}(Ru),rm=function(){this.array_=[]};rm.prototype.addLast=function(vt){this.array_.push(vt)},rm.prototype.removeFirst=function(){return this.array_.shift()},rm.prototype.isEmpty=function(){return this.array_.length===0};var Xa=function(){this._finder=null,this._dirEdgeList=new vi,this._nodes=new vi,this._rightMostCoord=null,this._env=null,this._finder=new Ec};Xa.prototype.clearVisitedEdges=function(){for(var vt=this._dirEdgeList.iterator();vt.hasNext();)vt.next().setVisited(!1)},Xa.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Xa.prototype.computeNodeDepth=function(vt){for(var _t=null,wt=vt.getEdges().iterator();wt.hasNext();){var Tt=wt.next();if(Tt.isVisited()||Tt.getSym().isVisited()){_t=Tt;break}}if(_t===null)throw new Du("unable to find edge to compute depths at "+vt.getCoordinate());vt.getEdges().computeDepths(_t);for(var At=vt.getEdges().iterator();At.hasNext();){var Ot=At.next();Ot.setVisited(!0),this.copySymDepths(Ot)}},Xa.prototype.computeDepth=function(vt){this.clearVisitedEdges();var _t=this._finder.getEdge();_t.setEdgeDepths(di.RIGHT,vt),this.copySymDepths(_t),this.computeDepths(_t)},Xa.prototype.create=function(vt){this.addReachable(vt),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Xa.prototype.findResultEdges=function(){for(var vt=this._dirEdgeList.iterator();vt.hasNext();){var _t=vt.next();_t.getDepth(di.RIGHT)>=1&&_t.getDepth(di.LEFT)<=0&&!_t.isInteriorAreaEdge()&&_t.setInResult(!0)}},Xa.prototype.computeDepths=function(vt){var _t=new Jg,wt=new rm,Tt=vt.getNode();for(wt.addLast(Tt),_t.add(Tt),vt.setVisited(!0);!wt.isEmpty();){var At=wt.removeFirst();_t.add(At),this.computeNodeDepth(At);for(var Ot=At.getEdges().iterator();Ot.hasNext();){var Nt=Ot.next().getSym();if(!Nt.isVisited()){var jt=Nt.getNode();_t.contains(jt)||(wt.addLast(jt),_t.add(jt))}}}},Xa.prototype.compareTo=function(vt){var _t=vt;return this._rightMostCoord.x<_t._rightMostCoord.x?-1:this._rightMostCoord.x>_t._rightMostCoord.x?1:0},Xa.prototype.getEnvelope=function(){if(this._env===null){for(var vt=new Vi,_t=this._dirEdgeList.iterator();_t.hasNext();)for(var wt=_t.next().getEdge().getCoordinates(),Tt=0;Tt<wt.length-1;Tt++)vt.expandToInclude(wt[Tt]);this._env=vt}return this._env},Xa.prototype.addReachable=function(vt){var _t=new Gc;for(_t.add(vt);!_t.empty();){var wt=_t.pop();this.add(wt,_t)}},Xa.prototype.copySymDepths=function(vt){var _t=vt.getSym();_t.setDepth(di.LEFT,vt.getDepth(di.RIGHT)),_t.setDepth(di.RIGHT,vt.getDepth(di.LEFT))},Xa.prototype.add=function(vt,_t){vt.setVisited(!0),this._nodes.add(vt);for(var wt=vt.getEdges().iterator();wt.hasNext();){var Tt=wt.next();this._dirEdgeList.add(Tt);var At=Tt.getSym().getNode();At.isVisited()||_t.push(At)}},Xa.prototype.getNodes=function(){return this._nodes},Xa.prototype.getDirectedEdges=function(){return this._dirEdgeList},Xa.prototype.interfaces_=function(){return[Jl]},Xa.prototype.getClass=function(){return Xa};var As=function vt(){var _t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var wt=arguments[0];this.init(wt.length)}else if(Number.isInteger(arguments[0])){var Tt=arguments[0];this.init(1),this.location[di.ON]=Tt}else if(arguments[0]instanceof vt){var At=arguments[0];if(this.init(At.location.length),At!==null)for(var Ot=0;Ot<this.location.length;Ot++)_t.location[Ot]=At.location[Ot]}}else if(arguments.length===3){var Nt=arguments[0],jt=arguments[1],Gt=arguments[2];this.init(3),this.location[di.ON]=Nt,this.location[di.LEFT]=jt,this.location[di.RIGHT]=Gt}};As.prototype.setAllLocations=function(vt){for(var _t=0;_t<this.location.length;_t++)this.location[_t]=vt},As.prototype.isNull=function(){for(var vt=0;vt<this.location.length;vt++)if(this.location[vt]!==Gr.NONE)return!1;return!0},As.prototype.setAllLocationsIfNull=function(vt){for(var _t=0;_t<this.location.length;_t++)this.location[_t]===Gr.NONE&&(this.location[_t]=vt)},As.prototype.isLine=function(){return this.location.length===1},As.prototype.merge=function(vt){if(vt.location.length>this.location.length){var _t=new Array(3).fill(null);_t[di.ON]=this.location[di.ON],_t[di.LEFT]=Gr.NONE,_t[di.RIGHT]=Gr.NONE,this.location=_t}for(var wt=0;wt<this.location.length;wt++)this.location[wt]===Gr.NONE&&wt<vt.location.length&&(this.location[wt]=vt.location[wt])},As.prototype.getLocations=function(){return this.location},As.prototype.flip=function(){if(this.location.length<=1)return null;var vt=this.location[di.LEFT];this.location[di.LEFT]=this.location[di.RIGHT],this.location[di.RIGHT]=vt},As.prototype.toString=function(){var vt=new Fc;return this.location.length>1&&vt.append(Gr.toLocationSymbol(this.location[di.LEFT])),vt.append(Gr.toLocationSymbol(this.location[di.ON])),this.location.length>1&&vt.append(Gr.toLocationSymbol(this.location[di.RIGHT])),vt.toString()},As.prototype.setLocations=function(vt,_t,wt){this.location[di.ON]=vt,this.location[di.LEFT]=_t,this.location[di.RIGHT]=wt},As.prototype.get=function(vt){return vt<this.location.length?this.location[vt]:Gr.NONE},As.prototype.isArea=function(){return this.location.length>1},As.prototype.isAnyNull=function(){for(var vt=0;vt<this.location.length;vt++)if(this.location[vt]===Gr.NONE)return!0;return!1},As.prototype.setLocation=function(){if(arguments.length===1){var vt=arguments[0];this.setLocation(di.ON,vt)}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];this.location[_t]=wt}},As.prototype.init=function(vt){this.location=new Array(vt).fill(null),this.setAllLocations(Gr.NONE)},As.prototype.isEqualOnSide=function(vt,_t){return this.location[_t]===vt.location[_t]},As.prototype.allPositionsEqual=function(vt){for(var _t=0;_t<this.location.length;_t++)if(this.location[_t]!==vt)return!1;return!0},As.prototype.interfaces_=function(){return[]},As.prototype.getClass=function(){return As};var vs=function vt(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var _t=arguments[0];this.elt[0]=new As(_t),this.elt[1]=new As(_t)}else if(arguments[0]instanceof vt){var wt=arguments[0];this.elt[0]=new As(wt.elt[0]),this.elt[1]=new As(wt.elt[1])}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.elt[0]=new As(Gr.NONE),this.elt[1]=new As(Gr.NONE),this.elt[Tt].setLocation(At)}else if(arguments.length===3){var Ot=arguments[0],Nt=arguments[1],jt=arguments[2];this.elt[0]=new As(Ot,Nt,jt),this.elt[1]=new As(Ot,Nt,jt)}else if(arguments.length===4){var Gt=arguments[0],qt=arguments[1],en=arguments[2],Xt=arguments[3];this.elt[0]=new As(Gr.NONE,Gr.NONE,Gr.NONE),this.elt[1]=new As(Gr.NONE,Gr.NONE,Gr.NONE),this.elt[Gt].setLocations(qt,en,Xt)}};vs.prototype.getGeometryCount=function(){var vt=0;return this.elt[0].isNull()||vt++,this.elt[1].isNull()||vt++,vt},vs.prototype.setAllLocations=function(vt,_t){this.elt[vt].setAllLocations(_t)},vs.prototype.isNull=function(vt){return this.elt[vt].isNull()},vs.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var vt=arguments[0];this.setAllLocationsIfNull(0,vt),this.setAllLocationsIfNull(1,vt)}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];this.elt[_t].setAllLocationsIfNull(wt)}},vs.prototype.isLine=function(vt){return this.elt[vt].isLine()},vs.prototype.merge=function(vt){for(var _t=this,wt=0;wt<2;wt++)_t.elt[wt]===null&&vt.elt[wt]!==null?_t.elt[wt]=new As(vt.elt[wt]):_t.elt[wt].merge(vt.elt[wt])},vs.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},vs.prototype.getLocation=function(){if(arguments.length===1){var vt=arguments[0];return this.elt[vt].get(di.ON)}if(arguments.length===2){var _t=arguments[0],wt=arguments[1];return this.elt[_t].get(wt)}},vs.prototype.toString=function(){var vt=new Fc;return this.elt[0]!==null&&(vt.append("A:"),vt.append(this.elt[0].toString())),this.elt[1]!==null&&(vt.append(" B:"),vt.append(this.elt[1].toString())),vt.toString()},vs.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var vt=arguments[0];return this.elt[vt].isArea()}},vs.prototype.isAnyNull=function(vt){return this.elt[vt].isAnyNull()},vs.prototype.setLocation=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this.elt[vt].setLocation(di.ON,_t)}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this.elt[wt].setLocation(Tt,At)}},vs.prototype.isEqualOnSide=function(vt,_t){return this.elt[0].isEqualOnSide(vt.elt[0],_t)&&this.elt[1].isEqualOnSide(vt.elt[1],_t)},vs.prototype.allPositionsEqual=function(vt,_t){return this.elt[vt].allPositionsEqual(_t)},vs.prototype.toLine=function(vt){this.elt[vt].isArea()&&(this.elt[vt]=new As(this.elt[vt].location[0]))},vs.prototype.interfaces_=function(){return[]},vs.prototype.getClass=function(){return vs},vs.toLineLabel=function(vt){for(var _t=new vs(Gr.NONE),wt=0;wt<2;wt++)_t.setLocation(wt,vt.getLocation(wt));return _t};var Js=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new vi,this._pts=new vi,this._label=new vs(Gr.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new vi,this._geometryFactory=null;var vt=arguments[0],_t=arguments[1];this._geometryFactory=_t,this.computePoints(vt),this.computeRing()};Js.prototype.computeRing=function(){if(this._ring!==null)return null;for(var vt=new Array(this._pts.size()).fill(null),_t=0;_t<this._pts.size();_t++)vt[_t]=this._pts.get(_t);this._ring=this._geometryFactory.createLinearRing(vt),this._isHole=Si.isCCW(this._ring.getCoordinates())},Js.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Js.prototype.computePoints=function(vt){var _t=this;this._startDe=vt;var wt=vt,Tt=!0;do{if(wt===null)throw new Du("Found null DirectedEdge");if(wt.getEdgeRing()===_t)throw new Du("Directed Edge visited twice during ring-building at "+wt.getCoordinate());_t._edges.add(wt);var At=wt.getLabel();vo.isTrue(At.isArea()),_t.mergeLabel(At),_t.addPoints(wt.getEdge(),wt.isForward(),Tt),Tt=!1,_t.setEdgeRing(wt,_t),wt=_t.getNext(wt)}while(wt!==this._startDe)},Js.prototype.getLinearRing=function(){return this._ring},Js.prototype.getCoordinate=function(vt){return this._pts.get(vt)},Js.prototype.computeMaxNodeDegree=function(){var vt=this;this._maxNodeDegree=0;var _t=this._startDe;do{var wt=_t.getNode().getEdges().getOutgoingDegree(vt);wt>vt._maxNodeDegree&&(vt._maxNodeDegree=wt),_t=vt.getNext(_t)}while(_t!==this._startDe);this._maxNodeDegree*=2},Js.prototype.addPoints=function(vt,_t,wt){var Tt=vt.getCoordinates();if(_t){var At=1;wt&&(At=0);for(var Ot=At;Ot<Tt.length;Ot++)this._pts.add(Tt[Ot])}else{var Nt=Tt.length-2;wt&&(Nt=Tt.length-1);for(var jt=Nt;jt>=0;jt--)this._pts.add(Tt[jt])}},Js.prototype.isHole=function(){return this._isHole},Js.prototype.setInResult=function(){var vt=this._startDe;do vt.getEdge().setInResult(!0),vt=vt.getNext();while(vt!==this._startDe)},Js.prototype.containsPoint=function(vt){var _t=this.getLinearRing();if(!_t.getEnvelopeInternal().contains(vt)||!Si.isPointInRing(vt,_t.getCoordinates()))return!1;for(var wt=this._holes.iterator();wt.hasNext();)if(wt.next().containsPoint(vt))return!1;return!0},Js.prototype.addHole=function(vt){this._holes.add(vt)},Js.prototype.isShell=function(){return this._shell===null},Js.prototype.getLabel=function(){return this._label},Js.prototype.getEdges=function(){return this._edges},Js.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Js.prototype.getShell=function(){return this._shell},Js.prototype.mergeLabel=function(){if(arguments.length===1){var vt=arguments[0];this.mergeLabel(vt,0),this.mergeLabel(vt,1)}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1],Tt=_t.getLocation(wt,di.RIGHT);if(Tt===Gr.NONE)return null;if(this._label.getLocation(wt)===Gr.NONE)return this._label.setLocation(wt,Tt),null}},Js.prototype.setShell=function(vt){this._shell=vt,vt!==null&&vt.addHole(this)},Js.prototype.toPolygon=function(vt){for(var _t=new Array(this._holes.size()).fill(null),wt=0;wt<this._holes.size();wt++)_t[wt]=this._holes.get(wt).getLinearRing();return vt.createPolygon(this.getLinearRing(),_t)},Js.prototype.interfaces_=function(){return[]},Js.prototype.getClass=function(){return Js};var o_=function(vt){function _t(){var wt=arguments[0],Tt=arguments[1];vt.call(this,wt,Tt)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.setEdgeRing=function(wt,Tt){wt.setMinEdgeRing(Tt)},_t.prototype.getNext=function(wt){return wt.getNextMin()},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Js),s_=function(vt){function _t(){var wt=arguments[0],Tt=arguments[1];vt.call(this,wt,Tt)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.buildMinimalRings=function(){var wt=new vi,Tt=this._startDe;do{if(Tt.getMinEdgeRing()===null){var At=new o_(Tt,this._geometryFactory);wt.add(At)}Tt=Tt.getNext()}while(Tt!==this._startDe);return wt},_t.prototype.setEdgeRing=function(wt,Tt){wt.setEdgeRing(Tt)},_t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var wt=this._startDe;do wt.getNode().getEdges().linkMinimalDirectedEdges(this),wt=wt.getNext();while(wt!==this._startDe)},_t.prototype.getNext=function(wt){return wt.getNext()},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Js),Il=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this._label=vt}}};Il.prototype.setVisited=function(vt){this._isVisited=vt},Il.prototype.setInResult=function(vt){this._isInResult=vt},Il.prototype.isCovered=function(){return this._isCovered},Il.prototype.isCoveredSet=function(){return this._isCoveredSet},Il.prototype.setLabel=function(vt){this._label=vt},Il.prototype.getLabel=function(){return this._label},Il.prototype.setCovered=function(vt){this._isCovered=vt,this._isCoveredSet=!0},Il.prototype.updateIM=function(vt){vo.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(vt)},Il.prototype.isInResult=function(){return this._isInResult},Il.prototype.isVisited=function(){return this._isVisited},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il};var im=function(vt){function _t(){vt.call(this),this._coord=null,this._edges=null;var wt=arguments[0],Tt=arguments[1];this._coord=wt,this._edges=Tt,this._label=new vs(0,Gr.NONE)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.isIncidentEdgeInResult=function(){for(var wt=this.getEdges().getEdges().iterator();wt.hasNext();)if(wt.next().getEdge().isInResult())return!0;return!1},_t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},_t.prototype.getCoordinate=function(){return this._coord},_t.prototype.print=function(wt){wt.println("node "+this._coord+" lbl: "+this._label)},_t.prototype.computeIM=function(wt){},_t.prototype.computeMergedLocation=function(wt,Tt){var At=Gr.NONE;if(At=this._label.getLocation(Tt),!wt.isNull(Tt)){var Ot=wt.getLocation(Tt);At!==Gr.BOUNDARY&&(At=Ot)}return At},_t.prototype.setLabel=function(){if(arguments.length!==2)return vt.prototype.setLabel.apply(this,arguments);var wt=arguments[0],Tt=arguments[1];this._label===null?this._label=new vs(wt,Tt):this._label.setLocation(wt,Tt)},_t.prototype.getEdges=function(){return this._edges},_t.prototype.mergeLabel=function(){var wt=this;if(arguments[0]instanceof _t){var Tt=arguments[0];this.mergeLabel(Tt._label)}else if(arguments[0]instanceof vs)for(var At=arguments[0],Ot=0;Ot<2;Ot++){var Nt=wt.computeMergedLocation(At,Ot),jt=wt._label.getLocation(Ot);jt===Gr.NONE&&wt._label.setLocation(Ot,Nt)}},_t.prototype.add=function(wt){this._edges.insert(wt),wt.setNode(this)},_t.prototype.setLabelBoundary=function(wt){if(this._label===null)return null;var Tt=Gr.NONE;this._label!==null&&(Tt=this._label.getLocation(wt));var At=null;switch(Tt){case Gr.BOUNDARY:At=Gr.INTERIOR;break;case Gr.INTERIOR:default:At=Gr.BOUNDARY}this._label.setLocation(wt,At)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Il),Wc=function(){this.nodeMap=new Ya,this.nodeFact=null;var vt=arguments[0];this.nodeFact=vt};Wc.prototype.find=function(vt){return this.nodeMap.get(vt)},Wc.prototype.addNode=function(){if(arguments[0]instanceof Dr){var vt=arguments[0],_t=this.nodeMap.get(vt);return _t===null&&(_t=this.nodeFact.createNode(vt),this.nodeMap.put(vt,_t)),_t}if(arguments[0]instanceof im){var wt=arguments[0],Tt=this.nodeMap.get(wt.getCoordinate());return Tt===null?(this.nodeMap.put(wt.getCoordinate(),wt),wt):(Tt.mergeLabel(wt),Tt)}},Wc.prototype.print=function(vt){for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},Wc.prototype.iterator=function(){return this.nodeMap.values().iterator()},Wc.prototype.values=function(){return this.nodeMap.values()},Wc.prototype.getBoundaryNodes=function(vt){for(var _t=new vi,wt=this.iterator();wt.hasNext();){var Tt=wt.next();Tt.getLabel().getLocation(vt)===Gr.BOUNDARY&&_t.add(Tt)}return _t},Wc.prototype.add=function(vt){var _t=vt.getCoordinate();this.addNode(_t).add(vt)},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var _s=function(){},Yp={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};_s.prototype.interfaces_=function(){return[]},_s.prototype.getClass=function(){return _s},_s.isNorthern=function(vt){return vt===_s.NE||vt===_s.NW},_s.isOpposite=function(vt,_t){return vt!==_t&&(vt-_t+4)%4===2},_s.commonHalfPlane=function(vt,_t){if(vt===_t)return vt;if((vt-_t+4)%4===2)return-1;var wt=vt<_t?vt:_t;return wt===0&&(vt>_t?vt:_t)===3?3:wt},_s.isInHalfPlane=function(vt,_t){return _t===_s.SE?vt===_s.SE||vt===_s.SW:vt===_t||vt===_t+1},_s.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],_t=arguments[1];if(vt===0&&_t===0)throw new Ds("Cannot compute the quadrant for point ( "+vt+", "+_t+" )");return vt>=0?_t>=0?_s.NE:_s.SE:_t>=0?_s.NW:_s.SW}if(arguments[0]instanceof Dr&&arguments[1]instanceof Dr){var wt=arguments[0],Tt=arguments[1];if(Tt.x===wt.x&&Tt.y===wt.y)throw new Ds("Cannot compute the quadrant for two identical points "+wt);return Tt.x>=wt.x?Tt.y>=wt.y?_s.NE:_s.SE:Tt.y>=wt.y?_s.NW:_s.SW}},Yp.NE.get=function(){return 0},Yp.NW.get=function(){return 1},Yp.SW.get=function(){return 2},Yp.SE.get=function(){return 3},Object.defineProperties(_s,Yp);var Za=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var vt=arguments[0];this._edge=vt}else if(arguments.length===3){var _t=arguments[0],wt=arguments[1],Tt=arguments[2],At=null;this._edge=_t,this.init(wt,Tt),this._label=At}else if(arguments.length===4){var Ot=arguments[0],Nt=arguments[1],jt=arguments[2],Gt=arguments[3];this._edge=Ot,this.init(Nt,jt),this._label=Gt}};Za.prototype.compareDirection=function(vt){return this._dx===vt._dx&&this._dy===vt._dy?0:this._quadrant>vt._quadrant?1:this._quadrant<vt._quadrant?-1:Si.computeOrientation(vt._p0,vt._p1,this._p1)},Za.prototype.getDy=function(){return this._dy},Za.prototype.getCoordinate=function(){return this._p0},Za.prototype.setNode=function(vt){this._node=vt},Za.prototype.print=function(vt){var _t=Math.atan2(this._dy,this._dx),wt=this.getClass().getName(),Tt=wt.lastIndexOf("."),At=wt.substring(Tt+1);vt.print("  "+At+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+_t+"   "+this._label)},Za.prototype.compareTo=function(vt){var _t=vt;return this.compareDirection(_t)},Za.prototype.getDirectedCoordinate=function(){return this._p1},Za.prototype.getDx=function(){return this._dx},Za.prototype.getLabel=function(){return this._label},Za.prototype.getEdge=function(){return this._edge},Za.prototype.getQuadrant=function(){return this._quadrant},Za.prototype.getNode=function(){return this._node},Za.prototype.toString=function(){var vt=Math.atan2(this._dy,this._dx),_t=this.getClass().getName(),wt=_t.lastIndexOf(".");return"  "+_t.substring(wt+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+vt+"   "+this._label},Za.prototype.computeLabel=function(vt){},Za.prototype.init=function(vt,_t){this._p0=vt,this._p1=_t,this._dx=_t.x-vt.x,this._dy=_t.y-vt.y,this._quadrant=_s.quadrant(this._dx,this._dy),vo.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},Za.prototype.interfaces_=function(){return[Jl]},Za.prototype.getClass=function(){return Za};var om=function(vt){function _t(){var wt=arguments[0],Tt=arguments[1];if(vt.call(this,wt),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=Tt,Tt)this.init(wt.getCoordinate(0),wt.getCoordinate(1));else{var At=wt.getNumPoints()-1;this.init(wt.getCoordinate(At),wt.getCoordinate(At-1))}this.computeDirectedLabel()}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.getNextMin=function(){return this._nextMin},_t.prototype.getDepth=function(wt){return this._depth[wt]},_t.prototype.setVisited=function(wt){this._isVisited=wt},_t.prototype.computeDirectedLabel=function(){this._label=new vs(this._edge.getLabel()),this._isForward||this._label.flip()},_t.prototype.getNext=function(){return this._next},_t.prototype.setDepth=function(wt,Tt){if(this._depth[wt]!==-999&&this._depth[wt]!==Tt)throw new Du("assigned depths do not match",this.getCoordinate());this._depth[wt]=Tt},_t.prototype.isInteriorAreaEdge=function(){for(var wt=this,Tt=!0,At=0;At<2;At++)wt._label.isArea(At)&&wt._label.getLocation(At,di.LEFT)===Gr.INTERIOR&&wt._label.getLocation(At,di.RIGHT)===Gr.INTERIOR||(Tt=!1);return Tt},_t.prototype.setNextMin=function(wt){this._nextMin=wt},_t.prototype.print=function(wt){vt.prototype.print.call(this,wt),wt.print(" "+this._depth[di.LEFT]+"/"+this._depth[di.RIGHT]),wt.print(" ("+this.getDepthDelta()+")"),this._isInResult&&wt.print(" inResult")},_t.prototype.setMinEdgeRing=function(wt){this._minEdgeRing=wt},_t.prototype.isLineEdge=function(){var wt=this._label.isLine(0)||this._label.isLine(1),Tt=!this._label.isArea(0)||this._label.allPositionsEqual(0,Gr.EXTERIOR),At=!this._label.isArea(1)||this._label.allPositionsEqual(1,Gr.EXTERIOR);return wt&&Tt&&At},_t.prototype.setEdgeRing=function(wt){this._edgeRing=wt},_t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},_t.prototype.getDepthDelta=function(){var wt=this._edge.getDepthDelta();return this._isForward||(wt=-wt),wt},_t.prototype.setInResult=function(wt){this._isInResult=wt},_t.prototype.getSym=function(){return this._sym},_t.prototype.isForward=function(){return this._isForward},_t.prototype.getEdge=function(){return this._edge},_t.prototype.printEdge=function(wt){this.print(wt),wt.print(" "),this._isForward?this._edge.print(wt):this._edge.printReverse(wt)},_t.prototype.setSym=function(wt){this._sym=wt},_t.prototype.setVisitedEdge=function(wt){this.setVisited(wt),this._sym.setVisited(wt)},_t.prototype.setEdgeDepths=function(wt,Tt){var At=this.getEdge().getDepthDelta();this._isForward||(At=-At);var Ot=1;wt===di.LEFT&&(Ot=-1);var Nt=di.opposite(wt),jt=Tt+At*Ot;this.setDepth(wt,Tt),this.setDepth(Nt,jt)},_t.prototype.getEdgeRing=function(){return this._edgeRing},_t.prototype.isInResult=function(){return this._isInResult},_t.prototype.setNext=function(wt){this._next=wt},_t.prototype.isVisited=function(){return this._isVisited},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.depthFactor=function(wt,Tt){return wt===Gr.EXTERIOR&&Tt===Gr.INTERIOR?1:wt===Gr.INTERIOR&&Tt===Gr.EXTERIOR?-1:0},_t}(Za),Bf=function(){};Bf.prototype.createNode=function(vt){return new im(vt,null)},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var zs=function(){if(this._edges=new vi,this._nodes=null,this._edgeEndList=new vi,arguments.length===0)this._nodes=new Wc(new Bf);else if(arguments.length===1){var vt=arguments[0];this._nodes=new Wc(vt)}};zs.prototype.printEdges=function(vt){vt.println("Edges:");for(var _t=0;_t<this._edges.size();_t++){vt.println("edge "+_t+":");var wt=this._edges.get(_t);wt.print(vt),wt.eiList.print(vt)}},zs.prototype.find=function(vt){return this._nodes.find(vt)},zs.prototype.addNode=function(){if(arguments[0]instanceof im){var vt=arguments[0];return this._nodes.addNode(vt)}if(arguments[0]instanceof Dr){var _t=arguments[0];return this._nodes.addNode(_t)}},zs.prototype.getNodeIterator=function(){return this._nodes.iterator()},zs.prototype.linkResultDirectedEdges=function(){for(var vt=this._nodes.iterator();vt.hasNext();)vt.next().getEdges().linkResultDirectedEdges()},zs.prototype.debugPrintln=function(vt){za.out.println(vt)},zs.prototype.isBoundaryNode=function(vt,_t){var wt=this._nodes.find(_t);if(wt===null)return!1;var Tt=wt.getLabel();return Tt!==null&&Tt.getLocation(vt)===Gr.BOUNDARY},zs.prototype.linkAllDirectedEdges=function(){for(var vt=this._nodes.iterator();vt.hasNext();)vt.next().getEdges().linkAllDirectedEdges()},zs.prototype.matchInSameDirection=function(vt,_t,wt,Tt){return!!vt.equals(wt)&&Si.computeOrientation(vt,_t,Tt)===Si.COLLINEAR&&_s.quadrant(vt,_t)===_s.quadrant(wt,Tt)},zs.prototype.getEdgeEnds=function(){return this._edgeEndList},zs.prototype.debugPrint=function(vt){za.out.print(vt)},zs.prototype.getEdgeIterator=function(){return this._edges.iterator()},zs.prototype.findEdgeInSameDirection=function(vt,_t){for(var wt=this,Tt=0;Tt<this._edges.size();Tt++){var At=wt._edges.get(Tt),Ot=At.getCoordinates();if(wt.matchInSameDirection(vt,_t,Ot[0],Ot[1])||wt.matchInSameDirection(vt,_t,Ot[Ot.length-1],Ot[Ot.length-2]))return At}return null},zs.prototype.insertEdge=function(vt){this._edges.add(vt)},zs.prototype.findEdgeEnd=function(vt){for(var _t=this.getEdgeEnds().iterator();_t.hasNext();){var wt=_t.next();if(wt.getEdge()===vt)return wt}return null},zs.prototype.addEdges=function(vt){for(var _t=this,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();_t._edges.add(Tt);var At=new om(Tt,!0),Ot=new om(Tt,!1);At.setSym(Ot),Ot.setSym(At),_t.add(At),_t.add(Ot)}},zs.prototype.add=function(vt){this._nodes.add(vt),this._edgeEndList.add(vt)},zs.prototype.getNodes=function(){return this._nodes.values()},zs.prototype.findEdge=function(vt,_t){for(var wt=0;wt<this._edges.size();wt++){var Tt=this._edges.get(wt),At=Tt.getCoordinates();if(vt.equals(At[0])&&_t.equals(At[1]))return Tt}return null},zs.prototype.interfaces_=function(){return[]},zs.prototype.getClass=function(){return zs},zs.linkResultDirectedEdges=function(vt){for(var _t=vt.iterator();_t.hasNext();)_t.next().getEdges().linkResultDirectedEdges()};var ml=function(){this._geometryFactory=null,this._shellList=new vi;var vt=arguments[0];this._geometryFactory=vt};ml.prototype.sortShellsAndHoles=function(vt,_t,wt){for(var Tt=vt.iterator();Tt.hasNext();){var At=Tt.next();At.isHole()?wt.add(At):_t.add(At)}},ml.prototype.computePolygons=function(vt){for(var _t=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next().toPolygon(this._geometryFactory);_t.add(Tt)}return _t},ml.prototype.placeFreeHoles=function(vt,_t){for(var wt=_t.iterator();wt.hasNext();){var Tt=wt.next();if(Tt.getShell()===null){var At=this.findEdgeRingContaining(Tt,vt);if(At===null)throw new Du("unable to assign hole to a shell",Tt.getCoordinate(0));Tt.setShell(At)}}},ml.prototype.buildMinimalEdgeRings=function(vt,_t,wt){for(var Tt=new vi,At=vt.iterator();At.hasNext();){var Ot=At.next();if(Ot.getMaxNodeDegree()>2){Ot.linkDirectedEdgesForMinimalEdgeRings();var Nt=Ot.buildMinimalRings(),jt=this.findShell(Nt);jt!==null?(this.placePolygonHoles(jt,Nt),_t.add(jt)):wt.addAll(Nt)}else Tt.add(Ot)}return Tt},ml.prototype.containsPoint=function(vt){for(var _t=this._shellList.iterator();_t.hasNext();)if(_t.next().containsPoint(vt))return!0;return!1},ml.prototype.buildMaximalEdgeRings=function(vt){for(var _t=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();if(Tt.isInResult()&&Tt.getLabel().isArea()&&Tt.getEdgeRing()===null){var At=new s_(Tt,this._geometryFactory);_t.add(At),At.setInResult()}}return _t},ml.prototype.placePolygonHoles=function(vt,_t){for(var wt=_t.iterator();wt.hasNext();){var Tt=wt.next();Tt.isHole()&&Tt.setShell(vt)}},ml.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},ml.prototype.findEdgeRingContaining=function(vt,_t){for(var wt=vt.getLinearRing(),Tt=wt.getEnvelopeInternal(),At=wt.getCoordinateN(0),Ot=null,Nt=null,jt=_t.iterator();jt.hasNext();){var Gt=jt.next(),qt=Gt.getLinearRing(),en=qt.getEnvelopeInternal();Ot!==null&&(Nt=Ot.getLinearRing().getEnvelopeInternal());var Xt=!1;en.contains(Tt)&&Si.isPointInRing(At,qt.getCoordinates())&&(Xt=!0),Xt&&(Ot===null||Nt.contains(en))&&(Ot=Gt)}return Ot},ml.prototype.findShell=function(vt){for(var _t=0,wt=null,Tt=vt.iterator();Tt.hasNext();){var At=Tt.next();At.isHole()||(wt=At,_t++)}return vo.isTrue(_t<=1,"found two shells in MinimalEdgeRing list"),wt},ml.prototype.add=function(){if(arguments.length===1){var vt=arguments[0];this.add(vt.getEdgeEnds(),vt.getNodes())}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];zs.linkResultDirectedEdges(wt);var Tt=this.buildMaximalEdgeRings(_t),At=new vi,Ot=this.buildMinimalEdgeRings(Tt,this._shellList,At);this.sortShellsAndHoles(Ot,this._shellList,At),this.placeFreeHoles(this._shellList,At)}},ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml};var Ff=function(){};Ff.prototype.getBounds=function(){},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff};var Sc=function(){this._bounds=null,this._item=null;var vt=arguments[0],_t=arguments[1];this._bounds=vt,this._item=_t};Sc.prototype.getItem=function(){return this._item},Sc.prototype.getBounds=function(){return this._bounds},Sc.prototype.interfaces_=function(){return[Ff,Ql]},Sc.prototype.getClass=function(){return Sc};var yu=function(){this._size=null,this._items=null,this._size=0,this._items=new vi,this._items.add(null)};yu.prototype.poll=function(){if(this.isEmpty())return null;var vt=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),vt},yu.prototype.size=function(){return this._size},yu.prototype.reorder=function(vt){for(var _t=this,wt=null,Tt=this._items.get(vt);2*vt<=this._size&&((wt=2*vt)!==_t._size&&_t._items.get(wt+1).compareTo(_t._items.get(wt))<0&&wt++,_t._items.get(wt).compareTo(Tt)<0);vt=wt)_t._items.set(vt,_t._items.get(wt));this._items.set(vt,Tt)},yu.prototype.clear=function(){this._size=0,this._items.clear()},yu.prototype.isEmpty=function(){return this._size===0},yu.prototype.add=function(vt){this._items.add(null),this._size+=1;var _t=this._size;for(this._items.set(0,vt);vt.compareTo(this._items.get(Math.trunc(_t/2)))<0;_t/=2)this._items.set(_t,this._items.get(Math.trunc(_t/2)));this._items.set(_t,vt)},yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu};var yh=function(){};yh.prototype.visitItem=function(vt){},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var Nd=function(){};Nd.prototype.insert=function(vt,_t){},Nd.prototype.remove=function(vt,_t){},Nd.prototype.query=function(){},Nd.prototype.interfaces_=function(){return[]},Nd.prototype.getClass=function(){return Nd};var ra=function(){if(this._childBoundables=new vi,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this._level=vt}}},Iy={serialVersionUID:{configurable:!0}};ra.prototype.getLevel=function(){return this._level},ra.prototype.size=function(){return this._childBoundables.size()},ra.prototype.getChildBoundables=function(){return this._childBoundables},ra.prototype.addChildBoundable=function(vt){vo.isTrue(this._bounds===null),this._childBoundables.add(vt)},ra.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ra.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},ra.prototype.interfaces_=function(){return[Ff,Ql]},ra.prototype.getClass=function(){return ra},Iy.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(ra,Iy);var Cc=function(){};Cc.reverseOrder=function(){return{compare:function(vt,_t){return _t.compareTo(vt)}}},Cc.min=function(vt){return Cc.sort(vt),vt.get(0)},Cc.sort=function(vt,_t){var wt=vt.toArray();_t?fu.sort(wt,_t):fu.sort(wt);for(var Tt=vt.iterator(),At=0,Ot=wt.length;At<Ot;At++)Tt.next(),Tt.set(wt[At])},Cc.singletonList=function(vt){var _t=new vi;return _t.add(vt),_t};var Qs=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var vt=arguments[0],_t=arguments[1],wt=arguments[2];this._boundable1=vt,this._boundable2=_t,this._itemDistance=wt,this._distance=this.distance()};Qs.prototype.expandToQueue=function(vt,_t){var wt=Qs.isComposite(this._boundable1),Tt=Qs.isComposite(this._boundable2);if(wt&&Tt)return Qs.area(this._boundable1)>Qs.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,vt,_t),null):(this.expand(this._boundable2,this._boundable1,vt,_t),null);if(wt)return this.expand(this._boundable1,this._boundable2,vt,_t),null;if(Tt)return this.expand(this._boundable2,this._boundable1,vt,_t),null;throw new Ds("neither boundable is composite")},Qs.prototype.isLeaves=function(){return!(Qs.isComposite(this._boundable1)||Qs.isComposite(this._boundable2))},Qs.prototype.compareTo=function(vt){var _t=vt;return this._distance<_t._distance?-1:this._distance>_t._distance?1:0},Qs.prototype.expand=function(vt,_t,wt,Tt){for(var At=vt.getChildBoundables().iterator();At.hasNext();){var Ot=At.next(),Nt=new Qs(Ot,_t,this._itemDistance);Nt.getDistance()<Tt&&wt.add(Nt)}},Qs.prototype.getBoundable=function(vt){return vt===0?this._boundable1:this._boundable2},Qs.prototype.getDistance=function(){return this._distance},Qs.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Qs.prototype.interfaces_=function(){return[Jl]},Qs.prototype.getClass=function(){return Qs},Qs.area=function(vt){return vt.getBounds().getArea()},Qs.isComposite=function(vt){return vt instanceof ra};var Ia=function vt(){if(this._root=null,this._built=!1,this._itemBoundables=new vi,this._nodeCapacity=null,arguments.length===0){var _t=vt.DEFAULT_NODE_CAPACITY;this._nodeCapacity=_t}else if(arguments.length===1){var wt=arguments[0];vo.isTrue(wt>1,"Node capacity must be greater than 1"),this._nodeCapacity=wt}},sm={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ia.prototype.getNodeCapacity=function(){return this._nodeCapacity},Ia.prototype.lastNode=function(vt){return vt.get(vt.size()-1)},Ia.prototype.size=function(){var vt=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var _t=arguments[0],wt=0,Tt=_t.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();At instanceof ra?wt+=vt.size(At):At instanceof Sc&&(wt+=1)}return wt}},Ia.prototype.removeItem=function(vt,_t){for(var wt=null,Tt=vt.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();At instanceof Sc&&At.getItem()===_t&&(wt=At)}return wt!==null&&(vt.getChildBoundables().remove(wt),!0)},Ia.prototype.itemsTree=function(){var vt=this;if(arguments.length===0){this.build();var _t=this.itemsTree(this._root);return _t===null?new vi:_t}if(arguments.length===1){for(var wt=arguments[0],Tt=new vi,At=wt.getChildBoundables().iterator();At.hasNext();){var Ot=At.next();if(Ot instanceof ra){var Nt=vt.itemsTree(Ot);Nt!==null&&Tt.add(Nt)}else Ot instanceof Sc?Tt.add(Ot.getItem()):vo.shouldNeverReachHere()}return Tt.size()<=0?null:Tt}},Ia.prototype.insert=function(vt,_t){vo.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Sc(vt,_t))},Ia.prototype.boundablesAtLevel=function(){var vt=this;if(arguments.length===1){var _t=arguments[0],wt=new vi;return this.boundablesAtLevel(_t,this._root,wt),wt}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];if(vo.isTrue(Tt>-2),At.getLevel()===Tt)return Ot.add(At),null;for(var Nt=At.getChildBoundables().iterator();Nt.hasNext();){var jt=Nt.next();jt instanceof ra?vt.boundablesAtLevel(Tt,jt,Ot):(vo.isTrue(jt instanceof Sc),Tt===-1&&Ot.add(jt))}return null}},Ia.prototype.query=function(){var vt=this;if(arguments.length===1){var _t=arguments[0];this.build();var wt=new vi;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),_t)&&this.query(_t,this._root,wt),wt}if(arguments.length===2){var Tt=arguments[0],At=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),Tt)&&this.query(Tt,this._root,At)}else if(arguments.length===3){if(to(arguments[2],yh)&&arguments[0]instanceof Object&&arguments[1]instanceof ra)for(var Ot=arguments[0],Nt=arguments[1],jt=arguments[2],Gt=Nt.getChildBoundables(),qt=0;qt<Gt.size();qt++){var en=Gt.get(qt);vt.getIntersectsOp().intersects(en.getBounds(),Ot)&&(en instanceof ra?vt.query(Ot,en,jt):en instanceof Sc?jt.visitItem(en.getItem()):vo.shouldNeverReachHere())}else if(to(arguments[2],vc)&&arguments[0]instanceof Object&&arguments[1]instanceof ra)for(var Xt=arguments[0],sn=arguments[1],yn=arguments[2],vn=sn.getChildBoundables(),wn=0;wn<vn.size();wn++){var un=vn.get(wn);vt.getIntersectsOp().intersects(un.getBounds(),Xt)&&(un instanceof ra?vt.query(Xt,un,yn):un instanceof Sc?yn.add(un.getItem()):vo.shouldNeverReachHere())}}},Ia.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Ia.prototype.getRoot=function(){return this.build(),this._root},Ia.prototype.remove=function(){var vt=this;if(arguments.length===2){var _t=arguments[0],wt=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),_t)&&this.remove(_t,this._root,wt)}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Nt=this.removeItem(At,Ot);if(Nt)return!0;for(var jt=null,Gt=At.getChildBoundables().iterator();Gt.hasNext();){var qt=Gt.next();if(vt.getIntersectsOp().intersects(qt.getBounds(),Tt)&&qt instanceof ra&&(Nt=vt.remove(Tt,qt,Ot))){jt=qt;break}}return jt!==null&&jt.getChildBoundables().isEmpty()&&At.getChildBoundables().remove(jt),Nt}},Ia.prototype.createHigherLevels=function(vt,_t){vo.isTrue(!vt.isEmpty());var wt=this.createParentBoundables(vt,_t+1);return wt.size()===1?wt.get(0):this.createHigherLevels(wt,_t+1)},Ia.prototype.depth=function(){var vt=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var _t=arguments[0],wt=0,Tt=_t.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();if(At instanceof ra){var Ot=vt.depth(At);Ot>wt&&(wt=Ot)}}return wt+1}},Ia.prototype.createParentBoundables=function(vt,_t){var wt=this;vo.isTrue(!vt.isEmpty());var Tt=new vi;Tt.add(this.createNode(_t));var At=new vi(vt);Cc.sort(At,this.getComparator());for(var Ot=At.iterator();Ot.hasNext();){var Nt=Ot.next();wt.lastNode(Tt).getChildBoundables().size()===wt.getNodeCapacity()&&Tt.add(wt.createNode(_t)),wt.lastNode(Tt).addChildBoundable(Nt)}return Tt},Ia.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Ia.prototype.interfaces_=function(){return[Ql]},Ia.prototype.getClass=function(){return Ia},Ia.compareDoubles=function(vt,_t){return vt>_t?1:vt<_t?-1:0},sm.IntersectsOp.get=function(){return Py},sm.serialVersionUID.get=function(){return-3886435814360241e3},sm.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Ia,sm);var Py=function(){},zf=function(){};zf.prototype.distance=function(vt,_t){},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var Oy=function(vt){function _t(Tt){Tt=Tt||_t.DEFAULT_NODE_CAPACITY,vt.call(this,Tt)}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return _t.prototype.createParentBoundablesFromVerticalSlices=function(Tt,At){vo.isTrue(Tt.length>0);for(var Ot=new vi,Nt=0;Nt<Tt.length;Nt++)Ot.addAll(this.createParentBoundablesFromVerticalSlice(Tt[Nt],At));return Ot},_t.prototype.createNode=function(Tt){return new M0(Tt)},_t.prototype.size=function(){return arguments.length===0?vt.prototype.size.call(this):vt.prototype.size.apply(this,arguments)},_t.prototype.insert=function(){if(arguments.length!==2)return vt.prototype.insert.apply(this,arguments);var Tt=arguments[0],At=arguments[1];if(Tt.isNull())return null;vt.prototype.insert.call(this,Tt,At)},_t.prototype.getIntersectsOp=function(){return _t.intersectsOp},_t.prototype.verticalSlices=function(Tt,At){for(var Ot=Math.trunc(Math.ceil(Tt.size()/At)),Nt=new Array(At).fill(null),jt=Tt.iterator(),Gt=0;Gt<At;Gt++){Nt[Gt]=new vi;for(var qt=0;jt.hasNext()&&qt<Ot;){var en=jt.next();Nt[Gt].add(en),qt++}}return Nt},_t.prototype.query=function(){if(arguments.length===1){var Tt=arguments[0];return vt.prototype.query.call(this,Tt)}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];vt.prototype.query.call(this,At,Ot)}else if(arguments.length===3){if(to(arguments[2],yh)&&arguments[0]instanceof Object&&arguments[1]instanceof ra){var Nt=arguments[0],jt=arguments[1],Gt=arguments[2];vt.prototype.query.call(this,Nt,jt,Gt)}else if(to(arguments[2],vc)&&arguments[0]instanceof Object&&arguments[1]instanceof ra){var qt=arguments[0],en=arguments[1],Xt=arguments[2];vt.prototype.query.call(this,qt,en,Xt)}}},_t.prototype.getComparator=function(){return _t.yComparator},_t.prototype.createParentBoundablesFromVerticalSlice=function(Tt,At){return vt.prototype.createParentBoundables.call(this,Tt,At)},_t.prototype.remove=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return vt.prototype.remove.call(this,Tt,At)}return vt.prototype.remove.apply(this,arguments)},_t.prototype.depth=function(){return arguments.length===0?vt.prototype.depth.call(this):vt.prototype.depth.apply(this,arguments)},_t.prototype.createParentBoundables=function(Tt,At){vo.isTrue(!Tt.isEmpty());var Ot=Math.trunc(Math.ceil(Tt.size()/this.getNodeCapacity())),Nt=new vi(Tt);Cc.sort(Nt,_t.xComparator);var jt=this.verticalSlices(Nt,Math.trunc(Math.ceil(Math.sqrt(Ot))));return this.createParentBoundablesFromVerticalSlices(jt,At)},_t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(to(arguments[0],zf)){var Tt=arguments[0],At=new Qs(this.getRoot(),this.getRoot(),Tt);return this.nearestNeighbour(At)}if(arguments[0]instanceof Qs){var Ot=arguments[0];return this.nearestNeighbour(Ot,ho.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof _t&&to(arguments[1],zf)){var Nt=arguments[0],jt=arguments[1],Gt=new Qs(this.getRoot(),Nt.getRoot(),jt);return this.nearestNeighbour(Gt)}if(arguments[0]instanceof Qs&&typeof arguments[1]=="number"){var qt=arguments[0],en=arguments[1],Xt=en,sn=null,yn=new yu;for(yn.add(qt);!yn.isEmpty()&&Xt>0;){var vn=yn.poll(),wn=vn.getDistance();if(wn>=Xt)break;vn.isLeaves()?(Xt=wn,sn=vn):vn.expandToQueue(yn,Xt)}return[sn.getBoundable(0).getItem(),sn.getBoundable(1).getItem()]}}else if(arguments.length===3){var un=arguments[0],Fn=arguments[1],Qn=arguments[2],_n=new Sc(un,Fn),Bn=new Qs(this.getRoot(),_n,Qn);return this.nearestNeighbour(Bn)[0]}},_t.prototype.interfaces_=function(){return[Nd,Ql]},_t.prototype.getClass=function(){return _t},_t.centreX=function(Tt){return _t.avg(Tt.getMinX(),Tt.getMaxX())},_t.avg=function(Tt,At){return(Tt+At)/2},_t.centreY=function(Tt){return _t.avg(Tt.getMinY(),Tt.getMaxY())},wt.STRtreeNode.get=function(){return M0},wt.serialVersionUID.get=function(){return 0x39920f7d5f261e0},wt.xComparator.get=function(){return{interfaces_:function(){return[kf]},compare:function(Tt,At){return vt.compareDoubles(_t.centreX(Tt.getBounds()),_t.centreX(At.getBounds()))}}},wt.yComparator.get=function(){return{interfaces_:function(){return[kf]},compare:function(Tt,At){return vt.compareDoubles(_t.centreY(Tt.getBounds()),_t.centreY(At.getBounds()))}}},wt.intersectsOp.get=function(){return{interfaces_:function(){return[vt.IntersectsOp]},intersects:function(Tt,At){return Tt.intersects(At)}}},wt.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_t,wt),_t}(Ia),M0=function(vt){function _t(){var wt=arguments[0];vt.call(this,wt)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.computeBounds=function(){for(var wt=null,Tt=this.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();wt===null?wt=new Vi(At.getBounds()):wt.expandToInclude(At.getBounds())}return wt},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(ra),yl=function(){};yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl},yl.relativeSign=function(vt,_t){return vt<_t?-1:vt>_t?1:0},yl.compare=function(vt,_t,wt){if(_t.equals2D(wt))return 0;var Tt=yl.relativeSign(_t.x,wt.x),At=yl.relativeSign(_t.y,wt.y);switch(vt){case 0:return yl.compareValue(Tt,At);case 1:return yl.compareValue(At,Tt);case 2:return yl.compareValue(At,-Tt);case 3:return yl.compareValue(-Tt,At);case 4:return yl.compareValue(-Tt,-At);case 5:return yl.compareValue(-At,-Tt);case 6:return yl.compareValue(-At,Tt);case 7:return yl.compareValue(Tt,-At)}return vo.shouldNeverReachHere("invalid octant value"),0},yl.compareValue=function(vt,_t){return vt<0?-1:vt>0?1:_t<0?-1:_t>0?1:0};var vh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var vt=arguments[0],_t=arguments[1],wt=arguments[2],Tt=arguments[3];this._segString=vt,this.coord=new Dr(_t),this.segmentIndex=wt,this._segmentOctant=Tt,this._isInterior=!_t.equals2D(vt.getCoordinate(wt))};vh.prototype.getCoordinate=function(){return this.coord},vh.prototype.print=function(vt){vt.print(this.coord),vt.print(" seg # = "+this.segmentIndex)},vh.prototype.compareTo=function(vt){var _t=vt;return this.segmentIndex<_t.segmentIndex?-1:this.segmentIndex>_t.segmentIndex?1:this.coord.equals2D(_t.coord)?0:yl.compare(this._segmentOctant,this.coord,_t.coord)},vh.prototype.isEndPoint=function(vt){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===vt},vh.prototype.isInterior=function(){return this._isInterior},vh.prototype.interfaces_=function(){return[Jl]},vh.prototype.getClass=function(){return vh};var Ta=function(){this._nodeMap=new Ya,this._edge=null;var vt=arguments[0];this._edge=vt};Ta.prototype.getSplitCoordinates=function(){var vt=new zp;this.addEndpoints();for(var _t=this.iterator(),wt=_t.next();_t.hasNext();){var Tt=_t.next();this.addEdgeCoordinates(wt,Tt,vt),wt=Tt}return vt.toCoordinateArray()},Ta.prototype.addCollapsedNodes=function(){var vt=new vi;this.findCollapsesFromInsertedNodes(vt),this.findCollapsesFromExistingVertices(vt);for(var _t=vt.iterator();_t.hasNext();){var wt=_t.next().intValue();this.add(this._edge.getCoordinate(wt),wt)}},Ta.prototype.print=function(vt){vt.println("Intersections:");for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},Ta.prototype.findCollapsesFromExistingVertices=function(vt){for(var _t=0;_t<this._edge.size()-2;_t++){var wt=this._edge.getCoordinate(_t),Tt=this._edge.getCoordinate(_t+2);wt.equals2D(Tt)&&vt.add(new zc(_t+1))}},Ta.prototype.addEdgeCoordinates=function(vt,_t,wt){var Tt=this._edge.getCoordinate(_t.segmentIndex),At=_t.isInterior()||!_t.coord.equals2D(Tt);wt.add(new Dr(vt.coord),!1);for(var Ot=vt.segmentIndex+1;Ot<=_t.segmentIndex;Ot++)wt.add(this._edge.getCoordinate(Ot));At&&wt.add(new Dr(_t.coord))},Ta.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ta.prototype.addSplitEdges=function(vt){this.addEndpoints(),this.addCollapsedNodes();for(var _t=this.iterator(),wt=_t.next();_t.hasNext();){var Tt=_t.next(),At=this.createSplitEdge(wt,Tt);vt.add(At),wt=Tt}},Ta.prototype.findCollapseIndex=function(vt,_t,wt){if(!vt.coord.equals2D(_t.coord))return!1;var Tt=_t.segmentIndex-vt.segmentIndex;return _t.isInterior()||Tt--,Tt===1&&(wt[0]=vt.segmentIndex+1,!0)},Ta.prototype.findCollapsesFromInsertedNodes=function(vt){for(var _t=new Array(1).fill(null),wt=this.iterator(),Tt=wt.next();wt.hasNext();){var At=wt.next();this.findCollapseIndex(Tt,At,_t)&&vt.add(new zc(_t[0])),Tt=At}},Ta.prototype.getEdge=function(){return this._edge},Ta.prototype.addEndpoints=function(){var vt=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(vt),vt)},Ta.prototype.createSplitEdge=function(vt,_t){var wt=_t.segmentIndex-vt.segmentIndex+2,Tt=this._edge.getCoordinate(_t.segmentIndex),At=_t.isInterior()||!_t.coord.equals2D(Tt);At||wt--;var Ot=new Array(wt).fill(null),Nt=0;Ot[Nt++]=new Dr(vt.coord);for(var jt=vt.segmentIndex+1;jt<=_t.segmentIndex;jt++)Ot[Nt++]=this._edge.getCoordinate(jt);return At&&(Ot[Nt]=new Dr(_t.coord)),new Us(Ot,this._edge.getData())},Ta.prototype.add=function(vt,_t){var wt=new vh(this._edge,vt,_t,this._edge.getSegmentOctant(_t)),Tt=this._nodeMap.get(wt);return Tt!==null?(vo.isTrue(Tt.coord.equals2D(vt),"Found equal nodes with different coordinates"),Tt):(this._nodeMap.put(wt,wt),wt)},Ta.prototype.checkSplitEdgesCorrectness=function(vt){var _t=this._edge.getCoordinates(),wt=vt.get(0).getCoordinate(0);if(!wt.equals2D(_t[0]))throw new Ru("bad split edge start point at "+wt);var Tt=vt.get(vt.size()-1).getCoordinates(),At=Tt[Tt.length-1];if(!At.equals2D(_t[_t.length-1]))throw new Ru("bad split edge end point at "+At)},Ta.prototype.interfaces_=function(){return[]},Ta.prototype.getClass=function(){return Ta};var Tc=function(){};Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],_t=arguments[1];if(vt===0&&_t===0)throw new Ds("Cannot compute the octant for point ( "+vt+", "+_t+" )");var wt=Math.abs(vt),Tt=Math.abs(_t);return vt>=0?_t>=0?wt>=Tt?0:1:wt>=Tt?7:6:_t>=0?wt>=Tt?3:2:wt>=Tt?4:5}if(arguments[0]instanceof Dr&&arguments[1]instanceof Dr){var At=arguments[0],Ot=arguments[1],Nt=Ot.x-At.x,jt=Ot.y-At.y;if(Nt===0&&jt===0)throw new Ds("Cannot compute the octant for two identical points "+At);return Tc.octant(Nt,jt)}};var ga=function(){};ga.prototype.getCoordinates=function(){},ga.prototype.size=function(){},ga.prototype.getCoordinate=function(vt){},ga.prototype.isClosed=function(){},ga.prototype.setData=function(vt){},ga.prototype.getData=function(){},ga.prototype.interfaces_=function(){return[]},ga.prototype.getClass=function(){return ga};var Xp=function(){};Xp.prototype.addIntersection=function(vt,_t){},Xp.prototype.interfaces_=function(){return[ga]},Xp.prototype.getClass=function(){return Xp};var Us=function(){this._nodeList=new Ta(this),this._pts=null,this._data=null;var vt=arguments[0],_t=arguments[1];this._pts=vt,this._data=_t};Us.prototype.getCoordinates=function(){return this._pts},Us.prototype.size=function(){return this._pts.length},Us.prototype.getCoordinate=function(vt){return this._pts[vt]},Us.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Us.prototype.getSegmentOctant=function(vt){return vt===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(vt),this.getCoordinate(vt+1))},Us.prototype.setData=function(vt){this._data=vt},Us.prototype.safeOctant=function(vt,_t){return vt.equals2D(_t)?0:Tc.octant(vt,_t)},Us.prototype.getData=function(){return this._data},Us.prototype.addIntersection=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this.addIntersectionNode(vt,_t)}else if(arguments.length===4){var wt=arguments[0],Tt=arguments[1],At=arguments[3],Ot=new Dr(wt.getIntersection(At));this.addIntersection(Ot,Tt)}},Us.prototype.toString=function(){return yc.toLineString(new Ks(this._pts))},Us.prototype.getNodeList=function(){return this._nodeList},Us.prototype.addIntersectionNode=function(vt,_t){var wt=_t,Tt=wt+1;if(Tt<this._pts.length){var At=this._pts[Tt];vt.equals2D(At)&&(wt=Tt)}return this._nodeList.add(vt,wt)},Us.prototype.addIntersections=function(vt,_t,wt){for(var Tt=0;Tt<vt.getIntersectionNum();Tt++)this.addIntersection(vt,_t,wt,Tt)},Us.prototype.interfaces_=function(){return[Xp]},Us.prototype.getClass=function(){return Us},Us.getNodedSubstrings=function(){if(arguments.length===1){var vt=arguments[0],_t=new vi;return Us.getNodedSubstrings(vt,_t),_t}if(arguments.length===2)for(var wt=arguments[0],Tt=arguments[1],At=wt.iterator();At.hasNext();){var Ot=At.next();Ot.getNodeList().addSplitEdges(Tt)}};var Hi=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Dr,this.p1=new Dr;else if(arguments.length===1){var vt=arguments[0];this.p0=new Dr(vt.p0),this.p1=new Dr(vt.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var _t=arguments[0],wt=arguments[1],Tt=arguments[2],At=arguments[3];this.p0=new Dr(_t,wt),this.p1=new Dr(Tt,At)}},am={serialVersionUID:{configurable:!0}};Hi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Hi.prototype.orientationIndex=function(){if(arguments[0]instanceof Hi){var vt=arguments[0],_t=Si.orientationIndex(this.p0,this.p1,vt.p0),wt=Si.orientationIndex(this.p0,this.p1,vt.p1);return _t>=0&&wt>=0||_t<=0&&wt<=0?Math.max(_t,wt):0}if(arguments[0]instanceof Dr){var Tt=arguments[0];return Si.orientationIndex(this.p0,this.p1,Tt)}},Hi.prototype.toGeometry=function(vt){return vt.createLineString([this.p0,this.p1])},Hi.prototype.isVertical=function(){return this.p0.x===this.p1.x},Hi.prototype.equals=function(vt){if(!(vt instanceof Hi))return!1;var _t=vt;return this.p0.equals(_t.p0)&&this.p1.equals(_t.p1)},Hi.prototype.intersection=function(vt){var _t=new ph;return _t.computeIntersection(this.p0,this.p1,vt.p0,vt.p1),_t.hasIntersection()?_t.getIntersection(0):null},Hi.prototype.project=function(){if(arguments[0]instanceof Dr){var vt=arguments[0];if(vt.equals(this.p0)||vt.equals(this.p1))return new Dr(vt);var _t=this.projectionFactor(vt),wt=new Dr;return wt.x=this.p0.x+_t*(this.p1.x-this.p0.x),wt.y=this.p0.y+_t*(this.p1.y-this.p0.y),wt}if(arguments[0]instanceof Hi){var Tt=arguments[0],At=this.projectionFactor(Tt.p0),Ot=this.projectionFactor(Tt.p1);if(At>=1&&Ot>=1||At<=0&&Ot<=0)return null;var Nt=this.project(Tt.p0);At<0&&(Nt=this.p0),At>1&&(Nt=this.p1);var jt=this.project(Tt.p1);return Ot<0&&(jt=this.p0),Ot>1&&(jt=this.p1),new Hi(Nt,jt)}},Hi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Hi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Hi.prototype.getCoordinate=function(vt){return vt===0?this.p0:this.p1},Hi.prototype.distancePerpendicular=function(vt){return Si.distancePointLinePerpendicular(vt,this.p0,this.p1)},Hi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Hi.prototype.midPoint=function(){return Hi.midPoint(this.p0,this.p1)},Hi.prototype.projectionFactor=function(vt){if(vt.equals(this.p0))return 0;if(vt.equals(this.p1))return 1;var _t=this.p1.x-this.p0.x,wt=this.p1.y-this.p0.y,Tt=_t*_t+wt*wt;return Tt<=0?ho.NaN:((vt.x-this.p0.x)*_t+(vt.y-this.p0.y)*wt)/Tt},Hi.prototype.closestPoints=function(vt){var _t=this.intersection(vt);if(_t!==null)return[_t,_t];var wt=new Array(2).fill(null),Tt=ho.MAX_VALUE,At=null,Ot=this.closestPoint(vt.p0);Tt=Ot.distance(vt.p0),wt[0]=Ot,wt[1]=vt.p0;var Nt=this.closestPoint(vt.p1);(At=Nt.distance(vt.p1))<Tt&&(Tt=At,wt[0]=Nt,wt[1]=vt.p1);var jt=vt.closestPoint(this.p0);(At=jt.distance(this.p0))<Tt&&(Tt=At,wt[0]=this.p0,wt[1]=jt);var Gt=vt.closestPoint(this.p1);return(At=Gt.distance(this.p1))<Tt&&(Tt=At,wt[0]=this.p1,wt[1]=Gt),wt},Hi.prototype.closestPoint=function(vt){var _t=this.projectionFactor(vt);return _t>0&&_t<1?this.project(vt):this.p0.distance(vt)<this.p1.distance(vt)?this.p0:this.p1},Hi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Hi.prototype.getLength=function(){return this.p0.distance(this.p1)},Hi.prototype.compareTo=function(vt){var _t=vt,wt=this.p0.compareTo(_t.p0);return wt!==0?wt:this.p1.compareTo(_t.p1)},Hi.prototype.reverse=function(){var vt=this.p0;this.p0=this.p1,this.p1=vt},Hi.prototype.equalsTopo=function(vt){return this.p0.equals(vt.p0)&&(this.p1.equals(vt.p1)||this.p0.equals(vt.p1))&&this.p1.equals(vt.p0)},Hi.prototype.lineIntersection=function(vt){try{return ec.intersection(this.p0,this.p1,vt.p0,vt.p1)}catch(_t){if(!(_t instanceof Ad))throw _t}return null},Hi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Hi.prototype.pointAlongOffset=function(vt,_t){var wt=this.p0.x+vt*(this.p1.x-this.p0.x),Tt=this.p0.y+vt*(this.p1.y-this.p0.y),At=this.p1.x-this.p0.x,Ot=this.p1.y-this.p0.y,Nt=Math.sqrt(At*At+Ot*Ot),jt=0,Gt=0;if(_t!==0){if(Nt<=0)throw new Error("Cannot compute offset from zero-length line segment");jt=_t*At/Nt,Gt=_t*Ot/Nt}return new Dr(wt-Gt,Tt+jt)},Hi.prototype.setCoordinates=function(){if(arguments.length===1){var vt=arguments[0];this.setCoordinates(vt.p0,vt.p1)}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];this.p0.x=_t.x,this.p0.y=_t.y,this.p1.x=wt.x,this.p1.y=wt.y}},Hi.prototype.segmentFraction=function(vt){var _t=this.projectionFactor(vt);return _t<0?_t=0:(_t>1||ho.isNaN(_t))&&(_t=1),_t},Hi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Hi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Hi.prototype.distance=function(){if(arguments[0]instanceof Hi){var vt=arguments[0];return Si.distanceLineLine(this.p0,this.p1,vt.p0,vt.p1)}if(arguments[0]instanceof Dr){var _t=arguments[0];return Si.distancePointLine(_t,this.p0,this.p1)}},Hi.prototype.pointAlong=function(vt){var _t=new Dr;return _t.x=this.p0.x+vt*(this.p1.x-this.p0.x),_t.y=this.p0.y+vt*(this.p1.y-this.p0.y),_t},Hi.prototype.hashCode=function(){var vt=ho.doubleToLongBits(this.p0.x);vt^=31*ho.doubleToLongBits(this.p0.y);var _t=Math.trunc(vt)^Math.trunc(vt>>32),wt=ho.doubleToLongBits(this.p1.x);return wt^=31*ho.doubleToLongBits(this.p1.y),_t^(Math.trunc(wt)^Math.trunc(wt>>32))},Hi.prototype.interfaces_=function(){return[Jl,Ql]},Hi.prototype.getClass=function(){return Hi},Hi.midPoint=function(vt,_t){return new Dr((vt.x+_t.x)/2,(vt.y+_t.y)/2)},am.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Hi,am);var Zp=function(){this.tempEnv1=new Vi,this.tempEnv2=new Vi,this._overlapSeg1=new Hi,this._overlapSeg2=new Hi};Zp.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var vt=arguments[0],_t=arguments[1],wt=arguments[2],Tt=arguments[3];vt.getLineSegment(_t,this._overlapSeg1),wt.getLineSegment(Tt,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Pl=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var vt=arguments[0],_t=arguments[1],wt=arguments[2],Tt=arguments[3];this._pts=vt,this._start=_t,this._end=wt,this._context=Tt};Pl.prototype.getLineSegment=function(vt,_t){_t.p0=this._pts[vt],_t.p1=this._pts[vt+1]},Pl.prototype.computeSelect=function(vt,_t,wt,Tt){var At=this._pts[_t],Ot=this._pts[wt];if(Tt.tempEnv1.init(At,Ot),wt-_t==1)return Tt.select(this,_t),null;if(!vt.intersects(Tt.tempEnv1))return null;var Nt=Math.trunc((_t+wt)/2);_t<Nt&&this.computeSelect(vt,_t,Nt,Tt),Nt<wt&&this.computeSelect(vt,Nt,wt,Tt)},Pl.prototype.getCoordinates=function(){for(var vt=new Array(this._end-this._start+1).fill(null),_t=0,wt=this._start;wt<=this._end;wt++)vt[_t++]=this._pts[wt];return vt},Pl.prototype.computeOverlaps=function(vt,_t){this.computeOverlapsInternal(this._start,this._end,vt,vt._start,vt._end,_t)},Pl.prototype.setId=function(vt){this._id=vt},Pl.prototype.select=function(vt,_t){this.computeSelect(vt,this._start,this._end,_t)},Pl.prototype.getEnvelope=function(){if(this._env===null){var vt=this._pts[this._start],_t=this._pts[this._end];this._env=new Vi(vt,_t)}return this._env},Pl.prototype.getEndIndex=function(){return this._end},Pl.prototype.getStartIndex=function(){return this._start},Pl.prototype.getContext=function(){return this._context},Pl.prototype.getId=function(){return this._id},Pl.prototype.computeOverlapsInternal=function(vt,_t,wt,Tt,At,Ot){var Nt=this._pts[vt],jt=this._pts[_t],Gt=wt._pts[Tt],qt=wt._pts[At];if(_t-vt==1&&At-Tt==1)return Ot.overlap(this,vt,wt,Tt),null;if(Ot.tempEnv1.init(Nt,jt),Ot.tempEnv2.init(Gt,qt),!Ot.tempEnv1.intersects(Ot.tempEnv2))return null;var en=Math.trunc((vt+_t)/2),Xt=Math.trunc((Tt+At)/2);vt<en&&(Tt<Xt&&this.computeOverlapsInternal(vt,en,wt,Tt,Xt,Ot),Xt<At&&this.computeOverlapsInternal(vt,en,wt,Xt,At,Ot)),en<_t&&(Tt<Xt&&this.computeOverlapsInternal(en,_t,wt,Tt,Xt,Ot),Xt<At&&this.computeOverlapsInternal(en,_t,wt,Xt,At,Ot))},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var oc=function(){};oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.getChainStartIndices=function(vt){var _t=0,wt=new vi;wt.add(new zc(_t));do{var Tt=oc.findChainEnd(vt,_t);wt.add(new zc(Tt)),_t=Tt}while(_t<vt.length-1);return oc.toIntArray(wt)},oc.findChainEnd=function(vt,_t){for(var wt=_t;wt<vt.length-1&&vt[wt].equals2D(vt[wt+1]);)wt++;if(wt>=vt.length-1)return vt.length-1;for(var Tt=_s.quadrant(vt[wt],vt[wt+1]),At=_t+1;At<vt.length&&!(!vt[At-1].equals2D(vt[At])&&_s.quadrant(vt[At-1],vt[At])!==Tt);)At++;return At-1},oc.getChains=function(){if(arguments.length===1){var vt=arguments[0];return oc.getChains(vt,null)}if(arguments.length===2){for(var _t=arguments[0],wt=arguments[1],Tt=new vi,At=oc.getChainStartIndices(_t),Ot=0;Ot<At.length-1;Ot++){var Nt=new Pl(_t,At[Ot],At[Ot+1],wt);Tt.add(Nt)}return Tt}},oc.toIntArray=function(vt){for(var _t=new Array(vt.size()).fill(null),wt=0;wt<_t.length;wt++)_t[wt]=vt.get(wt).intValue();return _t};var Zh=function(){};Zh.prototype.computeNodes=function(vt){},Zh.prototype.getNodedSubstrings=function(){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Kp=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this.setSegmentIntersector(vt)}}};Kp.prototype.setSegmentIntersector=function(vt){this._segInt=vt},Kp.prototype.interfaces_=function(){return[Zh]},Kp.prototype.getClass=function(){return Kp};var N0=function(vt){function _t(Tt){Tt?vt.call(this,Tt):vt.call(this),this._monoChains=new vi,this._index=new Oy,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t;var wt={SegmentOverlapAction:{configurable:!0}};return _t.prototype.getMonotoneChains=function(){return this._monoChains},_t.prototype.getNodedSubstrings=function(){return Us.getNodedSubstrings(this._nodedSegStrings)},_t.prototype.getIndex=function(){return this._index},_t.prototype.add=function(Tt){for(var At=this,Ot=oc.getChains(Tt.getCoordinates(),Tt).iterator();Ot.hasNext();){var Nt=Ot.next();Nt.setId(At._idCounter++),At._index.insert(Nt.getEnvelope(),Nt),At._monoChains.add(Nt)}},_t.prototype.computeNodes=function(Tt){this._nodedSegStrings=Tt;for(var At=Tt.iterator();At.hasNext();)this.add(At.next());this.intersectChains()},_t.prototype.intersectChains=function(){for(var Tt=this,At=new lm(this._segInt),Ot=this._monoChains.iterator();Ot.hasNext();)for(var Nt=Ot.next(),jt=Tt._index.query(Nt.getEnvelope()).iterator();jt.hasNext();){var Gt=jt.next();if(Gt.getId()>Nt.getId()&&(Nt.computeOverlaps(Gt,At),Tt._nOverlaps++),Tt._segInt.isDone())return null}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},wt.SegmentOverlapAction.get=function(){return lm},Object.defineProperties(_t,wt),_t}(Kp),lm=function(vt){function _t(){vt.call(this),this._si=null;var wt=arguments[0];this._si=wt}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.overlap=function(){if(arguments.length!==4)return vt.prototype.overlap.apply(this,arguments);var wt=arguments[0],Tt=arguments[1],At=arguments[2],Ot=arguments[3],Nt=wt.getContext(),jt=At.getContext();this._si.processIntersections(Nt,Tt,jt,Ot)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Zp),gs=function vt(){if(this._quadrantSegments=vt.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=vt.CAP_ROUND,this._joinStyle=vt.JOIN_ROUND,this._mitreLimit=vt.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=vt.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var _t=arguments[0];this.setQuadrantSegments(_t)}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this.setQuadrantSegments(wt),this.setEndCapStyle(Tt)}else if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Nt=arguments[2],jt=arguments[3];this.setQuadrantSegments(At),this.setEndCapStyle(Ot),this.setJoinStyle(Nt),this.setMitreLimit(jt)}}},kc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};gs.prototype.getEndCapStyle=function(){return this._endCapStyle},gs.prototype.isSingleSided=function(){return this._isSingleSided},gs.prototype.setQuadrantSegments=function(vt){this._quadrantSegments=vt,this._quadrantSegments===0&&(this._joinStyle=gs.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=gs.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),vt<=0&&(this._quadrantSegments=1),this._joinStyle!==gs.JOIN_ROUND&&(this._quadrantSegments=gs.DEFAULT_QUADRANT_SEGMENTS)},gs.prototype.getJoinStyle=function(){return this._joinStyle},gs.prototype.setJoinStyle=function(vt){this._joinStyle=vt},gs.prototype.setSimplifyFactor=function(vt){this._simplifyFactor=vt<0?0:vt},gs.prototype.getSimplifyFactor=function(){return this._simplifyFactor},gs.prototype.getQuadrantSegments=function(){return this._quadrantSegments},gs.prototype.setEndCapStyle=function(vt){this._endCapStyle=vt},gs.prototype.getMitreLimit=function(){return this._mitreLimit},gs.prototype.setMitreLimit=function(vt){this._mitreLimit=vt},gs.prototype.setSingleSided=function(vt){this._isSingleSided=vt},gs.prototype.interfaces_=function(){return[]},gs.prototype.getClass=function(){return gs},gs.bufferDistanceError=function(vt){var _t=Math.PI/2/vt;return 1-Math.cos(_t/2)},kc.CAP_ROUND.get=function(){return 1},kc.CAP_FLAT.get=function(){return 2},kc.CAP_SQUARE.get=function(){return 3},kc.JOIN_ROUND.get=function(){return 1},kc.JOIN_MITRE.get=function(){return 2},kc.JOIN_BEVEL.get=function(){return 3},kc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},kc.DEFAULT_MITRE_LIMIT.get=function(){return 5},kc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(gs,kc);var Os=function(vt){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Si.COUNTERCLOCKWISE,this._inputLine=vt||null},Kh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Os.prototype.isDeletable=function(vt,_t,wt,Tt){var At=this._inputLine[vt],Ot=this._inputLine[_t],Nt=this._inputLine[wt];return!!this.isConcave(At,Ot,Nt)&&!!this.isShallow(At,Ot,Nt,Tt)&&this.isShallowSampled(At,Ot,vt,wt,Tt)},Os.prototype.deleteShallowConcavities=function(){for(var vt=this,_t=1,wt=this.findNextNonDeletedIndex(_t),Tt=this.findNextNonDeletedIndex(wt),At=!1;Tt<this._inputLine.length;){var Ot=!1;vt.isDeletable(_t,wt,Tt,vt._distanceTol)&&(vt._isDeleted[wt]=Os.DELETE,Ot=!0,At=!0),_t=Ot?Tt:wt,wt=vt.findNextNonDeletedIndex(_t),Tt=vt.findNextNonDeletedIndex(wt)}return At},Os.prototype.isShallowConcavity=function(vt,_t,wt,Tt){return Si.computeOrientation(vt,_t,wt)===this._angleOrientation&&Si.distancePointLine(_t,vt,wt)<Tt},Os.prototype.isShallowSampled=function(vt,_t,wt,Tt,At){var Ot=Math.trunc((Tt-wt)/Os.NUM_PTS_TO_CHECK);Ot<=0&&(Ot=1);for(var Nt=wt;Nt<Tt;Nt+=Ot)if(!this.isShallow(vt,_t,this._inputLine[Nt],At))return!1;return!0},Os.prototype.isConcave=function(vt,_t,wt){var Tt=Si.computeOrientation(vt,_t,wt)===this._angleOrientation;return Tt},Os.prototype.simplify=function(vt){this._distanceTol=Math.abs(vt),vt<0&&(this._angleOrientation=Si.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var _t=!1;do _t=this.deleteShallowConcavities();while(_t);return this.collapseLine()},Os.prototype.findNextNonDeletedIndex=function(vt){for(var _t=vt+1;_t<this._inputLine.length&&this._isDeleted[_t]===Os.DELETE;)_t++;return _t},Os.prototype.isShallow=function(vt,_t,wt,Tt){return Si.distancePointLine(_t,vt,wt)<Tt},Os.prototype.collapseLine=function(){for(var vt=new zp,_t=0;_t<this._inputLine.length;_t++)this._isDeleted[_t]!==Os.DELETE&&vt.add(this._inputLine[_t]);return vt.toCoordinateArray()},Os.prototype.interfaces_=function(){return[]},Os.prototype.getClass=function(){return Os},Os.simplify=function(vt,_t){return new Os(vt).simplify(_t)},Kh.INIT.get=function(){return 0},Kh.DELETE.get=function(){return 1},Kh.KEEP.get=function(){return 1},Kh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Os,Kh);var Fl=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new vi},$y={COORDINATE_ARRAY_TYPE:{configurable:!0}};Fl.prototype.getCoordinates=function(){return this._ptList.toArray(Fl.COORDINATE_ARRAY_TYPE)},Fl.prototype.setPrecisionModel=function(vt){this._precisionModel=vt},Fl.prototype.addPt=function(vt){var _t=new Dr(vt);if(this._precisionModel.makePrecise(_t),this.isRedundant(_t))return null;this._ptList.add(_t)},Fl.prototype.revere=function(){},Fl.prototype.addPts=function(vt,_t){if(_t)for(var wt=0;wt<vt.length;wt++)this.addPt(vt[wt]);else for(var Tt=vt.length-1;Tt>=0;Tt--)this.addPt(vt[Tt])},Fl.prototype.isRedundant=function(vt){if(this._ptList.size()<1)return!1;var _t=this._ptList.get(this._ptList.size()-1);return vt.distance(_t)<this._minimimVertexDistance},Fl.prototype.toString=function(){return new Io().createLineString(this.getCoordinates()).toString()},Fl.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var vt=new Dr(this._ptList.get(0)),_t=this._ptList.get(this._ptList.size()-1);if(vt.equals(_t))return null;this._ptList.add(vt)},Fl.prototype.setMinimumVertexDistance=function(vt){this._minimimVertexDistance=vt},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl},$y.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Fl,$y);var Do=function(){},Dd={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Do.prototype.interfaces_=function(){return[]},Do.prototype.getClass=function(){return Do},Do.toDegrees=function(vt){return 180*vt/Math.PI},Do.normalize=function(vt){for(;vt>Math.PI;)vt-=Do.PI_TIMES_2;for(;vt<=-Math.PI;)vt+=Do.PI_TIMES_2;return vt},Do.angle=function(){if(arguments.length===1){var vt=arguments[0];return Math.atan2(vt.y,vt.x)}if(arguments.length===2){var _t=arguments[0],wt=arguments[1],Tt=wt.x-_t.x,At=wt.y-_t.y;return Math.atan2(At,Tt)}},Do.isAcute=function(vt,_t,wt){var Tt=vt.x-_t.x,At=vt.y-_t.y;return Tt*(wt.x-_t.x)+At*(wt.y-_t.y)>0},Do.isObtuse=function(vt,_t,wt){var Tt=vt.x-_t.x,At=vt.y-_t.y;return Tt*(wt.x-_t.x)+At*(wt.y-_t.y)<0},Do.interiorAngle=function(vt,_t,wt){var Tt=Do.angle(_t,vt),At=Do.angle(_t,wt);return Math.abs(At-Tt)},Do.normalizePositive=function(vt){if(vt<0){for(;vt<0;)vt+=Do.PI_TIMES_2;vt>=Do.PI_TIMES_2&&(vt=0)}else{for(;vt>=Do.PI_TIMES_2;)vt-=Do.PI_TIMES_2;vt<0&&(vt=0)}return vt},Do.angleBetween=function(vt,_t,wt){var Tt=Do.angle(_t,vt),At=Do.angle(_t,wt);return Do.diff(Tt,At)},Do.diff=function(vt,_t){var wt=null;return(wt=vt<_t?_t-vt:vt-_t)>Math.PI&&(wt=2*Math.PI-wt),wt},Do.toRadians=function(vt){return vt*Math.PI/180},Do.getTurn=function(vt,_t){var wt=Math.sin(_t-vt);return wt>0?Do.COUNTERCLOCKWISE:wt<0?Do.CLOCKWISE:Do.NONE},Do.angleBetweenOriented=function(vt,_t,wt){var Tt=Do.angle(_t,vt),At=Do.angle(_t,wt)-Tt;return At<=-Math.PI?At+Do.PI_TIMES_2:At>Math.PI?At-Do.PI_TIMES_2:At},Dd.PI_TIMES_2.get=function(){return 2*Math.PI},Dd.PI_OVER_2.get=function(){return Math.PI/2},Dd.PI_OVER_4.get=function(){return Math.PI/4},Dd.COUNTERCLOCKWISE.get=function(){return Si.COUNTERCLOCKWISE},Dd.CLOCKWISE.get=function(){return Si.CLOCKWISE},Dd.NONE.get=function(){return Si.COLLINEAR},Object.defineProperties(Do,Dd);var Ms=function vt(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Hi,this._seg1=new Hi,this._offset0=new Hi,this._offset1=new Hi,this._side=0,this._hasNarrowConcaveAngle=!1;var _t=arguments[0],wt=arguments[1],Tt=arguments[2];this._precisionModel=_t,this._bufParams=wt,this._li=new ph,this._filletAngleQuantum=Math.PI/2/wt.getQuadrantSegments(),wt.getQuadrantSegments()>=8&&wt.getJoinStyle()===gs.JOIN_ROUND&&(this._closingSegLengthFactor=vt.MAX_CLOSING_SEG_LEN_FACTOR),this.init(Tt)},Hf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ms.prototype.addNextSegment=function(vt,_t){if(this._s0=this._s1,this._s1=this._s2,this._s2=vt,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var wt=Si.computeOrientation(this._s0,this._s1,this._s2),Tt=wt===Si.CLOCKWISE&&this._side===di.LEFT||wt===Si.COUNTERCLOCKWISE&&this._side===di.RIGHT;wt===0?this.addCollinear(_t):Tt?this.addOutsideTurn(wt,_t):this.addInsideTurn(wt,_t)},Ms.prototype.addLineEndCap=function(vt,_t){var wt=new Hi(vt,_t),Tt=new Hi;this.computeOffsetSegment(wt,di.LEFT,this._distance,Tt);var At=new Hi;this.computeOffsetSegment(wt,di.RIGHT,this._distance,At);var Ot=_t.x-vt.x,Nt=_t.y-vt.y,jt=Math.atan2(Nt,Ot);switch(this._bufParams.getEndCapStyle()){case gs.CAP_ROUND:this._segList.addPt(Tt.p1),this.addFilletArc(_t,jt+Math.PI/2,jt-Math.PI/2,Si.CLOCKWISE,this._distance),this._segList.addPt(At.p1);break;case gs.CAP_FLAT:this._segList.addPt(Tt.p1),this._segList.addPt(At.p1);break;case gs.CAP_SQUARE:var Gt=new Dr;Gt.x=Math.abs(this._distance)*Math.cos(jt),Gt.y=Math.abs(this._distance)*Math.sin(jt);var qt=new Dr(Tt.p1.x+Gt.x,Tt.p1.y+Gt.y),en=new Dr(At.p1.x+Gt.x,At.p1.y+Gt.y);this._segList.addPt(qt),this._segList.addPt(en)}},Ms.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ms.prototype.addMitreJoin=function(vt,_t,wt,Tt){var At=!0,Ot=null;try{Ot=ec.intersection(_t.p0,_t.p1,wt.p0,wt.p1),(Tt<=0?1:Ot.distance(vt)/Math.abs(Tt))>this._bufParams.getMitreLimit()&&(At=!1)}catch(Nt){if(!(Nt instanceof Ad))throw Nt;Ot=new Dr(0,0),At=!1}At?this._segList.addPt(Ot):this.addLimitedMitreJoin(_t,wt,Tt,this._bufParams.getMitreLimit())},Ms.prototype.addFilletCorner=function(vt,_t,wt,Tt,At){var Ot=_t.x-vt.x,Nt=_t.y-vt.y,jt=Math.atan2(Nt,Ot),Gt=wt.x-vt.x,qt=wt.y-vt.y,en=Math.atan2(qt,Gt);Tt===Si.CLOCKWISE?jt<=en&&(jt+=2*Math.PI):jt>=en&&(jt-=2*Math.PI),this._segList.addPt(_t),this.addFilletArc(vt,jt,en,Tt,At),this._segList.addPt(wt)},Ms.prototype.addOutsideTurn=function(vt,_t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ms.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===gs.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===gs.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(_t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,vt,this._distance),this._segList.addPt(this._offset1.p0))},Ms.prototype.createSquare=function(vt){this._segList.addPt(new Dr(vt.x+this._distance,vt.y+this._distance)),this._segList.addPt(new Dr(vt.x+this._distance,vt.y-this._distance)),this._segList.addPt(new Dr(vt.x-this._distance,vt.y-this._distance)),this._segList.addPt(new Dr(vt.x-this._distance,vt.y+this._distance)),this._segList.closeRing()},Ms.prototype.addSegments=function(vt,_t){this._segList.addPts(vt,_t)},Ms.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ms.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ms.prototype.initSideSegments=function(vt,_t,wt){this._s1=vt,this._s2=_t,this._side=wt,this._seg1.setCoordinates(vt,_t),this.computeOffsetSegment(this._seg1,wt,this._distance,this._offset1)},Ms.prototype.addLimitedMitreJoin=function(vt,_t,wt,Tt){var At=this._seg0.p1,Ot=Do.angle(At,this._seg0.p0),Nt=Do.angleBetweenOriented(this._seg0.p0,At,this._seg1.p1)/2,jt=Do.normalize(Ot+Nt),Gt=Do.normalize(jt+Math.PI),qt=Tt*wt,en=wt-qt*Math.abs(Math.sin(Nt)),Xt=At.x+qt*Math.cos(Gt),sn=At.y+qt*Math.sin(Gt),yn=new Dr(Xt,sn),vn=new Hi(At,yn),wn=vn.pointAlongOffset(1,en),un=vn.pointAlongOffset(1,-en);this._side===di.LEFT?(this._segList.addPt(wn),this._segList.addPt(un)):(this._segList.addPt(un),this._segList.addPt(wn))},Ms.prototype.computeOffsetSegment=function(vt,_t,wt,Tt){var At=_t===di.LEFT?1:-1,Ot=vt.p1.x-vt.p0.x,Nt=vt.p1.y-vt.p0.y,jt=Math.sqrt(Ot*Ot+Nt*Nt),Gt=At*wt*Ot/jt,qt=At*wt*Nt/jt;Tt.p0.x=vt.p0.x-qt,Tt.p0.y=vt.p0.y+Gt,Tt.p1.x=vt.p1.x-qt,Tt.p1.y=vt.p1.y+Gt},Ms.prototype.addFilletArc=function(vt,_t,wt,Tt,At){var Ot=Tt===Si.CLOCKWISE?-1:1,Nt=Math.abs(_t-wt),jt=Math.trunc(Nt/this._filletAngleQuantum+.5);if(jt<1)return null;for(var Gt=Nt/jt,qt=0,en=new Dr;qt<Nt;){var Xt=_t+Ot*qt;en.x=vt.x+At*Math.cos(Xt),en.y=vt.y+At*Math.sin(Xt),this._segList.addPt(en),qt+=Gt}},Ms.prototype.addInsideTurn=function(vt,_t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ms.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var wt=new Dr((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(wt);var Tt=new Dr((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(Tt)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ms.prototype.createCircle=function(vt){var _t=new Dr(vt.x+this._distance,vt.y);this._segList.addPt(_t),this.addFilletArc(vt,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ms.prototype.addBevelJoin=function(vt,_t){this._segList.addPt(vt.p1),this._segList.addPt(_t.p0)},Ms.prototype.init=function(vt){this._distance=vt,this._maxCurveSegmentError=vt*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Fl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(vt*Ms.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ms.prototype.addCollinear=function(vt){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===gs.JOIN_BEVEL||this._bufParams.getJoinStyle()===gs.JOIN_MITRE?(vt&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Si.CLOCKWISE,this._distance))},Ms.prototype.closeRing=function(){this._segList.closeRing()},Ms.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ms.prototype.interfaces_=function(){return[]},Ms.prototype.getClass=function(){return Ms},Hf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},Hf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},Hf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Hf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ms,Hf);var Gi=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var vt=arguments[0],_t=arguments[1];this._precisionModel=vt,this._bufParams=_t};Gi.prototype.getOffsetCurve=function(vt,_t){if(this._distance=_t,_t===0)return null;var wt=_t<0,Tt=Math.abs(_t),At=this.getSegGen(Tt);vt.length<=1?this.computePointCurve(vt[0],At):this.computeOffsetCurve(vt,wt,At);var Ot=At.getCoordinates();return wt&&Lo.reverse(Ot),Ot},Gi.prototype.computeSingleSidedBufferCurve=function(vt,_t,wt){var Tt=this.simplifyTolerance(this._distance);if(_t){wt.addSegments(vt,!0);var At=Os.simplify(vt,-Tt),Ot=At.length-1;wt.initSideSegments(At[Ot],At[Ot-1],di.LEFT),wt.addFirstSegment();for(var Nt=Ot-2;Nt>=0;Nt--)wt.addNextSegment(At[Nt],!0)}else{wt.addSegments(vt,!1);var jt=Os.simplify(vt,Tt),Gt=jt.length-1;wt.initSideSegments(jt[0],jt[1],di.LEFT),wt.addFirstSegment();for(var qt=2;qt<=Gt;qt++)wt.addNextSegment(jt[qt],!0)}wt.addLastSegment(),wt.closeRing()},Gi.prototype.computeRingBufferCurve=function(vt,_t,wt){var Tt=this.simplifyTolerance(this._distance);_t===di.RIGHT&&(Tt=-Tt);var At=Os.simplify(vt,Tt),Ot=At.length-1;wt.initSideSegments(At[Ot-1],At[0],_t);for(var Nt=1;Nt<=Ot;Nt++){var jt=Nt!==1;wt.addNextSegment(At[Nt],jt)}wt.closeRing()},Gi.prototype.computeLineBufferCurve=function(vt,_t){var wt=this.simplifyTolerance(this._distance),Tt=Os.simplify(vt,wt),At=Tt.length-1;_t.initSideSegments(Tt[0],Tt[1],di.LEFT);for(var Ot=2;Ot<=At;Ot++)_t.addNextSegment(Tt[Ot],!0);_t.addLastSegment(),_t.addLineEndCap(Tt[At-1],Tt[At]);var Nt=Os.simplify(vt,-wt),jt=Nt.length-1;_t.initSideSegments(Nt[jt],Nt[jt-1],di.LEFT);for(var Gt=jt-2;Gt>=0;Gt--)_t.addNextSegment(Nt[Gt],!0);_t.addLastSegment(),_t.addLineEndCap(Nt[1],Nt[0]),_t.closeRing()},Gi.prototype.computePointCurve=function(vt,_t){switch(this._bufParams.getEndCapStyle()){case gs.CAP_ROUND:_t.createCircle(vt);break;case gs.CAP_SQUARE:_t.createSquare(vt)}},Gi.prototype.getLineCurve=function(vt,_t){if(this._distance=_t,_t<0&&!this._bufParams.isSingleSided()||_t===0)return null;var wt=Math.abs(_t),Tt=this.getSegGen(wt);if(vt.length<=1)this.computePointCurve(vt[0],Tt);else if(this._bufParams.isSingleSided()){var At=_t<0;this.computeSingleSidedBufferCurve(vt,At,Tt)}else this.computeLineBufferCurve(vt,Tt);return Tt.getCoordinates()},Gi.prototype.getBufferParameters=function(){return this._bufParams},Gi.prototype.simplifyTolerance=function(vt){return vt*this._bufParams.getSimplifyFactor()},Gi.prototype.getRingCurve=function(vt,_t,wt){if(this._distance=wt,vt.length<=2)return this.getLineCurve(vt,wt);if(wt===0)return Gi.copyCoordinates(vt);var Tt=this.getSegGen(wt);return this.computeRingBufferCurve(vt,_t,Tt),Tt.getCoordinates()},Gi.prototype.computeOffsetCurve=function(vt,_t,wt){var Tt=this.simplifyTolerance(this._distance);if(_t){var At=Os.simplify(vt,-Tt),Ot=At.length-1;wt.initSideSegments(At[Ot],At[Ot-1],di.LEFT),wt.addFirstSegment();for(var Nt=Ot-2;Nt>=0;Nt--)wt.addNextSegment(At[Nt],!0)}else{var jt=Os.simplify(vt,Tt),Gt=jt.length-1;wt.initSideSegments(jt[0],jt[1],di.LEFT),wt.addFirstSegment();for(var qt=2;qt<=Gt;qt++)wt.addNextSegment(jt[qt],!0)}wt.addLastSegment()},Gi.prototype.getSegGen=function(vt){return new Ms(this._precisionModel,this._bufParams,vt)},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi},Gi.copyCoordinates=function(vt){for(var _t=new Array(vt.length).fill(null),wt=0;wt<_t.length;wt++)_t[wt]=new Dr(vt[wt]);return _t};var Bd=function(){this._subgraphs=null,this._seg=new Hi,this._cga=new Si;var vt=arguments[0];this._subgraphs=vt},Ry={DepthSegment:{configurable:!0}};Bd.prototype.findStabbedSegments=function(){var vt=this;if(arguments.length===1){for(var _t=arguments[0],wt=new vi,Tt=this._subgraphs.iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getEnvelope();_t.y<Ot.getMinY()||_t.y>Ot.getMaxY()||vt.findStabbedSegments(_t,At.getDirectedEdges(),wt)}return wt}if(arguments.length===3){if(to(arguments[2],vc)&&arguments[0]instanceof Dr&&arguments[1]instanceof om)for(var Nt=arguments[0],jt=arguments[1],Gt=arguments[2],qt=jt.getEdge().getCoordinates(),en=0;en<qt.length-1;en++){vt._seg.p0=qt[en],vt._seg.p1=qt[en+1],vt._seg.p0.y>vt._seg.p1.y&&vt._seg.reverse();var Xt=Math.max(vt._seg.p0.x,vt._seg.p1.x);if(!(Xt<Nt.x)&&!(vt._seg.isHorizontal()||Nt.y<vt._seg.p0.y||Nt.y>vt._seg.p1.y||Si.computeOrientation(vt._seg.p0,vt._seg.p1,Nt)===Si.RIGHT)){var sn=jt.getDepth(di.LEFT);vt._seg.p0.equals(qt[en])||(sn=jt.getDepth(di.RIGHT));var yn=new Jh(vt._seg,sn);Gt.add(yn)}}else if(to(arguments[2],vc)&&arguments[0]instanceof Dr&&to(arguments[1],vc))for(var vn=arguments[0],wn=arguments[1],un=arguments[2],Fn=wn.iterator();Fn.hasNext();){var Qn=Fn.next();Qn.isForward()&&vt.findStabbedSegments(vn,Qn,un)}}},Bd.prototype.getDepth=function(vt){var _t=this.findStabbedSegments(vt);return _t.size()===0?0:Cc.min(_t)._leftDepth},Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd},Ry.DepthSegment.get=function(){return Jh},Object.defineProperties(Bd,Ry);var Jh=function(){this._upwardSeg=null,this._leftDepth=null;var vt=arguments[0],_t=arguments[1];this._upwardSeg=new Hi(vt),this._leftDepth=_t};Jh.prototype.compareTo=function(vt){var _t=vt;if(this._upwardSeg.minX()>=_t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=_t._upwardSeg.minX())return-1;var wt=this._upwardSeg.orientationIndex(_t._upwardSeg);return wt!==0||(wt=-1*_t._upwardSeg.orientationIndex(this._upwardSeg))!==0?wt:this._upwardSeg.compareTo(_t._upwardSeg)},Jh.prototype.compareX=function(vt,_t){var wt=vt.p0.compareTo(_t.p0);return wt!==0?wt:vt.p1.compareTo(_t.p1)},Jh.prototype.toString=function(){return this._upwardSeg.toString()},Jh.prototype.interfaces_=function(){return[Jl]},Jh.prototype.getClass=function(){return Jh};var fo=function(vt,_t,wt){this.p0=vt||null,this.p1=_t||null,this.p2=wt||null};fo.prototype.area=function(){return fo.area(this.p0,this.p1,this.p2)},fo.prototype.signedArea=function(){return fo.signedArea(this.p0,this.p1,this.p2)},fo.prototype.interpolateZ=function(vt){if(vt===null)throw new Ds("Supplied point is null.");return fo.interpolateZ(vt,this.p0,this.p1,this.p2)},fo.prototype.longestSideLength=function(){return fo.longestSideLength(this.p0,this.p1,this.p2)},fo.prototype.isAcute=function(){return fo.isAcute(this.p0,this.p1,this.p2)},fo.prototype.circumcentre=function(){return fo.circumcentre(this.p0,this.p1,this.p2)},fo.prototype.area3D=function(){return fo.area3D(this.p0,this.p1,this.p2)},fo.prototype.centroid=function(){return fo.centroid(this.p0,this.p1,this.p2)},fo.prototype.inCentre=function(){return fo.inCentre(this.p0,this.p1,this.p2)},fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo},fo.area=function(vt,_t,wt){return Math.abs(((wt.x-vt.x)*(_t.y-vt.y)-(_t.x-vt.x)*(wt.y-vt.y))/2)},fo.signedArea=function(vt,_t,wt){return((wt.x-vt.x)*(_t.y-vt.y)-(_t.x-vt.x)*(wt.y-vt.y))/2},fo.det=function(vt,_t,wt,Tt){return vt*Tt-_t*wt},fo.interpolateZ=function(vt,_t,wt,Tt){var At=_t.x,Ot=_t.y,Nt=wt.x-At,jt=Tt.x-At,Gt=wt.y-Ot,qt=Tt.y-Ot,en=Nt*qt-jt*Gt,Xt=vt.x-At,sn=vt.y-Ot,yn=(qt*Xt-jt*sn)/en,vn=(-Gt*Xt+Nt*sn)/en;return _t.z+yn*(wt.z-_t.z)+vn*(Tt.z-_t.z)},fo.longestSideLength=function(vt,_t,wt){var Tt=vt.distance(_t),At=_t.distance(wt),Ot=wt.distance(vt),Nt=Tt;return At>Nt&&(Nt=At),Ot>Nt&&(Nt=Ot),Nt},fo.isAcute=function(vt,_t,wt){return!!Do.isAcute(vt,_t,wt)&&!!Do.isAcute(_t,wt,vt)&&!!Do.isAcute(wt,vt,_t)},fo.circumcentre=function(vt,_t,wt){var Tt=wt.x,At=wt.y,Ot=vt.x-Tt,Nt=vt.y-At,jt=_t.x-Tt,Gt=_t.y-At,qt=2*fo.det(Ot,Nt,jt,Gt),en=fo.det(Nt,Ot*Ot+Nt*Nt,Gt,jt*jt+Gt*Gt),Xt=fo.det(Ot,Ot*Ot+Nt*Nt,jt,jt*jt+Gt*Gt);return new Dr(Tt-en/qt,At+Xt/qt)},fo.perpendicularBisector=function(vt,_t){var wt=_t.x-vt.x,Tt=_t.y-vt.y,At=new ec(vt.x+wt/2,vt.y+Tt/2,1),Ot=new ec(vt.x-Tt+wt/2,vt.y+wt+Tt/2,1);return new ec(At,Ot)},fo.angleBisector=function(vt,_t,wt){var Tt=_t.distance(vt),At=Tt/(Tt+_t.distance(wt)),Ot=wt.x-vt.x,Nt=wt.y-vt.y;return new Dr(vt.x+At*Ot,vt.y+At*Nt)},fo.area3D=function(vt,_t,wt){var Tt=_t.x-vt.x,At=_t.y-vt.y,Ot=_t.z-vt.z,Nt=wt.x-vt.x,jt=wt.y-vt.y,Gt=wt.z-vt.z,qt=At*Gt-Ot*jt,en=Ot*Nt-Tt*Gt,Xt=Tt*jt-At*Nt,sn=qt*qt+en*en+Xt*Xt,yn=Math.sqrt(sn)/2;return yn},fo.centroid=function(vt,_t,wt){var Tt=(vt.x+_t.x+wt.x)/3,At=(vt.y+_t.y+wt.y)/3;return new Dr(Tt,At)},fo.inCentre=function(vt,_t,wt){var Tt=_t.distance(wt),At=vt.distance(wt),Ot=vt.distance(_t),Nt=Tt+At+Ot,jt=(Tt*vt.x+At*_t.x+Ot*wt.x)/Nt,Gt=(Tt*vt.y+At*_t.y+Ot*wt.y)/Nt;return new Dr(jt,Gt)};var vl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new vi;var vt=arguments[0],_t=arguments[1],wt=arguments[2];this._inputGeom=vt,this._distance=_t,this._curveBuilder=wt};vl.prototype.addPoint=function(vt){if(this._distance<=0)return null;var _t=vt.getCoordinates(),wt=this._curveBuilder.getLineCurve(_t,this._distance);this.addCurve(wt,Gr.EXTERIOR,Gr.INTERIOR)},vl.prototype.addPolygon=function(vt){var _t=this,wt=this._distance,Tt=di.LEFT;this._distance<0&&(wt=-this._distance,Tt=di.RIGHT);var At=vt.getExteriorRing(),Ot=Lo.removeRepeatedPoints(At.getCoordinates());if(this._distance<0&&this.isErodedCompletely(At,this._distance)||this._distance<=0&&Ot.length<3)return null;this.addPolygonRing(Ot,wt,Tt,Gr.EXTERIOR,Gr.INTERIOR);for(var Nt=0;Nt<vt.getNumInteriorRing();Nt++){var jt=vt.getInteriorRingN(Nt),Gt=Lo.removeRepeatedPoints(jt.getCoordinates());_t._distance>0&&_t.isErodedCompletely(jt,-_t._distance)||_t.addPolygonRing(Gt,wt,di.opposite(Tt),Gr.INTERIOR,Gr.EXTERIOR)}},vl.prototype.isTriangleErodedCompletely=function(vt,_t){var wt=new fo(vt[0],vt[1],vt[2]),Tt=wt.inCentre();return Si.distancePointLine(Tt,wt.p0,wt.p1)<Math.abs(_t)},vl.prototype.addLineString=function(vt){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var _t=Lo.removeRepeatedPoints(vt.getCoordinates()),wt=this._curveBuilder.getLineCurve(_t,this._distance);this.addCurve(wt,Gr.EXTERIOR,Gr.INTERIOR)},vl.prototype.addCurve=function(vt,_t,wt){if(vt===null||vt.length<2)return null;var Tt=new Us(vt,new vs(0,Gr.BOUNDARY,_t,wt));this._curveList.add(Tt)},vl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},vl.prototype.addPolygonRing=function(vt,_t,wt,Tt,At){if(_t===0&&vt.length<pu.MINIMUM_VALID_SIZE)return null;var Ot=Tt,Nt=At;vt.length>=pu.MINIMUM_VALID_SIZE&&Si.isCCW(vt)&&(Ot=At,Nt=Tt,wt=di.opposite(wt));var jt=this._curveBuilder.getRingCurve(vt,wt,_t);this.addCurve(jt,Ot,Nt)},vl.prototype.add=function(vt){if(vt.isEmpty())return null;vt instanceof pa?this.addPolygon(vt):vt instanceof Bs?this.addLineString(vt):vt instanceof Ll?this.addPoint(vt):(vt instanceof Df||vt instanceof gh||vt instanceof gu||vt instanceof rl)&&this.addCollection(vt)},vl.prototype.isErodedCompletely=function(vt,_t){var wt=vt.getCoordinates();if(wt.length<4)return _t<0;if(wt.length===4)return this.isTriangleErodedCompletely(wt,_t);var Tt=vt.getEnvelopeInternal(),At=Math.min(Tt.getHeight(),Tt.getWidth());return _t<0&&2*Math.abs(_t)>At},vl.prototype.addCollection=function(vt){for(var _t=0;_t<vt.getNumGeometries();_t++){var wt=vt.getGeometryN(_t);this.add(wt)}},vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl};var ys=function(){};ys.prototype.locate=function(vt){},ys.prototype.interfaces_=function(){return[]},ys.prototype.getClass=function(){return ys};var qc=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var vt=arguments[0];this._parent=vt,this._atStart=!0,this._index=0,this._max=vt.getNumGeometries()};qc.prototype.next=function(){if(this._atStart)return this._atStart=!1,qc.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new $d;var vt=this._parent.getGeometryN(this._index++);return vt instanceof rl?(this._subcollectionIterator=new qc(vt),this._subcollectionIterator.next()):vt},qc.prototype.remove=function(){throw new Error(this.getClass().getName())},qc.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},qc.prototype.interfaces_=function(){return[$f]},qc.prototype.getClass=function(){return qc},qc.isAtomic=function(vt){return!(vt instanceof rl)};var _l=function(){this._geom=null;var vt=arguments[0];this._geom=vt};_l.prototype.locate=function(vt){return _l.locate(vt,this._geom)},_l.prototype.interfaces_=function(){return[ys]},_l.prototype.getClass=function(){return _l},_l.isPointInRing=function(vt,_t){return!!_t.getEnvelopeInternal().intersects(vt)&&Si.isPointInRing(vt,_t.getCoordinates())},_l.containsPointInPolygon=function(vt,_t){if(_t.isEmpty())return!1;var wt=_t.getExteriorRing();if(!_l.isPointInRing(vt,wt))return!1;for(var Tt=0;Tt<_t.getNumInteriorRing();Tt++){var At=_t.getInteriorRingN(Tt);if(_l.isPointInRing(vt,At))return!1}return!0},_l.containsPoint=function(vt,_t){if(_t instanceof pa)return _l.containsPointInPolygon(vt,_t);if(_t instanceof rl)for(var wt=new qc(_t);wt.hasNext();){var Tt=wt.next();if(Tt!==_t&&_l.containsPoint(vt,Tt))return!0}return!1},_l.locate=function(vt,_t){return _t.isEmpty()?Gr.EXTERIOR:_l.containsPoint(vt,_t)?Gr.INTERIOR:Gr.EXTERIOR};var Pa=function(){this._edgeMap=new Ya,this._edgeList=null,this._ptInAreaLocation=[Gr.NONE,Gr.NONE]};Pa.prototype.getNextCW=function(vt){this.getEdges();var _t=this._edgeList.indexOf(vt),wt=_t-1;return _t===0&&(wt=this._edgeList.size()-1),this._edgeList.get(wt)},Pa.prototype.propagateSideLabels=function(vt){for(var _t=Gr.NONE,wt=this.iterator();wt.hasNext();){var Tt=wt.next().getLabel();Tt.isArea(vt)&&Tt.getLocation(vt,di.LEFT)!==Gr.NONE&&(_t=Tt.getLocation(vt,di.LEFT))}if(_t===Gr.NONE)return null;for(var At=_t,Ot=this.iterator();Ot.hasNext();){var Nt=Ot.next(),jt=Nt.getLabel();if(jt.getLocation(vt,di.ON)===Gr.NONE&&jt.setLocation(vt,di.ON,At),jt.isArea(vt)){var Gt=jt.getLocation(vt,di.LEFT),qt=jt.getLocation(vt,di.RIGHT);if(qt!==Gr.NONE){if(qt!==At)throw new Du("side location conflict",Nt.getCoordinate());Gt===Gr.NONE&&vo.shouldNeverReachHere("found single null side (at "+Nt.getCoordinate()+")"),At=Gt}else vo.isTrue(jt.getLocation(vt,di.LEFT)===Gr.NONE,"found single null side"),jt.setLocation(vt,di.RIGHT,At),jt.setLocation(vt,di.LEFT,At)}}},Pa.prototype.getCoordinate=function(){var vt=this.iterator();return vt.hasNext()?vt.next().getCoordinate():null},Pa.prototype.print=function(vt){za.out.println("EdgeEndStar:   "+this.getCoordinate());for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},Pa.prototype.isAreaLabelsConsistent=function(vt){return this.computeEdgeEndLabels(vt.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Pa.prototype.checkAreaLabelsConsistent=function(vt){var _t=this.getEdges();if(_t.size()<=0)return!0;var wt=_t.size()-1,Tt=_t.get(wt).getLabel().getLocation(vt,di.LEFT);vo.isTrue(Tt!==Gr.NONE,"Found unlabelled area edge");for(var At=Tt,Ot=this.iterator();Ot.hasNext();){var Nt=Ot.next().getLabel();vo.isTrue(Nt.isArea(vt),"Found non-area edge");var jt=Nt.getLocation(vt,di.LEFT),Gt=Nt.getLocation(vt,di.RIGHT);if(jt===Gt||Gt!==At)return!1;At=jt}return!0},Pa.prototype.findIndex=function(vt){this.iterator();for(var _t=0;_t<this._edgeList.size();_t++)if(this._edgeList.get(_t)===vt)return _t;return-1},Pa.prototype.iterator=function(){return this.getEdges().iterator()},Pa.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new vi(this._edgeMap.values())),this._edgeList},Pa.prototype.getLocation=function(vt,_t,wt){return this._ptInAreaLocation[vt]===Gr.NONE&&(this._ptInAreaLocation[vt]=_l.locate(_t,wt[vt].getGeometry())),this._ptInAreaLocation[vt]},Pa.prototype.toString=function(){var vt=new Fc;vt.append("EdgeEndStar:   "+this.getCoordinate()),vt.append(`
`);for(var _t=this.iterator();_t.hasNext();){var wt=_t.next();vt.append(wt),vt.append(`
`)}return vt.toString()},Pa.prototype.computeEdgeEndLabels=function(vt){for(var _t=this.iterator();_t.hasNext();)_t.next().computeLabel(vt)},Pa.prototype.computeLabelling=function(vt){this.computeEdgeEndLabels(vt[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var _t=[!1,!1],wt=this.iterator();wt.hasNext();)for(var Tt=wt.next().getLabel(),At=0;At<2;At++)Tt.isLine(At)&&Tt.getLocation(At)===Gr.BOUNDARY&&(_t[At]=!0);for(var Ot=this.iterator();Ot.hasNext();)for(var Nt=Ot.next(),jt=Nt.getLabel(),Gt=0;Gt<2;Gt++)if(jt.isAnyNull(Gt)){var qt=Gr.NONE;if(_t[Gt])qt=Gr.EXTERIOR;else{var en=Nt.getCoordinate();qt=this.getLocation(Gt,en,vt)}jt.setAllLocationsIfNull(Gt,qt)}},Pa.prototype.getDegree=function(){return this._edgeMap.size()},Pa.prototype.insertEdgeEnd=function(vt,_t){this._edgeMap.put(vt,_t),this._edgeList=null},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa};var a_=function(vt){function _t(){vt.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.linkResultDirectedEdges=function(){var wt=this;this.getResultAreaEdges();for(var Tt=null,At=null,Ot=this._SCANNING_FOR_INCOMING,Nt=0;Nt<this._resultAreaEdgeList.size();Nt++){var jt=wt._resultAreaEdgeList.get(Nt),Gt=jt.getSym();if(jt.getLabel().isArea())switch(Tt===null&&jt.isInResult()&&(Tt=jt),Ot){case wt._SCANNING_FOR_INCOMING:if(!Gt.isInResult())continue;At=Gt,Ot=wt._LINKING_TO_OUTGOING;break;case wt._LINKING_TO_OUTGOING:if(!jt.isInResult())continue;At.setNext(jt),Ot=wt._SCANNING_FOR_INCOMING}}if(Ot===this._LINKING_TO_OUTGOING){if(Tt===null)throw new Du("no outgoing dirEdge found",this.getCoordinate());vo.isTrue(Tt.isInResult(),"unable to link last incoming dirEdge"),At.setNext(Tt)}},_t.prototype.insert=function(wt){var Tt=wt;this.insertEdgeEnd(Tt,Tt)},_t.prototype.getRightmostEdge=function(){var wt=this.getEdges(),Tt=wt.size();if(Tt<1)return null;var At=wt.get(0);if(Tt===1)return At;var Ot=wt.get(Tt-1),Nt=At.getQuadrant(),jt=Ot.getQuadrant();return _s.isNorthern(Nt)&&_s.isNorthern(jt)?At:_s.isNorthern(Nt)||_s.isNorthern(jt)?At.getDy()!==0?At:Ot.getDy()!==0?Ot:(vo.shouldNeverReachHere("found two horizontal edges incident on node"),null):Ot},_t.prototype.print=function(wt){za.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var Tt=this.iterator();Tt.hasNext();){var At=Tt.next();wt.print("out "),At.print(wt),wt.println(),wt.print("in "),At.getSym().print(wt),wt.println()}},_t.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new vi;for(var wt=this.iterator();wt.hasNext();){var Tt=wt.next();(Tt.isInResult()||Tt.getSym().isInResult())&&this._resultAreaEdgeList.add(Tt)}return this._resultAreaEdgeList},_t.prototype.updateLabelling=function(wt){for(var Tt=this.iterator();Tt.hasNext();){var At=Tt.next().getLabel();At.setAllLocationsIfNull(0,wt.getLocation(0)),At.setAllLocationsIfNull(1,wt.getLocation(1))}},_t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var wt=null,Tt=null,At=this._edgeList.size()-1;At>=0;At--){var Ot=this._edgeList.get(At),Nt=Ot.getSym();Tt===null&&(Tt=Nt),wt!==null&&Nt.setNext(wt),wt=Ot}Tt.setNext(wt)},_t.prototype.computeDepths=function(){var wt=this;if(arguments.length===1){var Tt=arguments[0],At=this.findIndex(Tt),Ot=Tt.getDepth(di.LEFT),Nt=Tt.getDepth(di.RIGHT),jt=this.computeDepths(At+1,this._edgeList.size(),Ot),Gt=this.computeDepths(0,At,jt);if(Gt!==Nt)throw new Du("depth mismatch at "+Tt.getCoordinate())}else if(arguments.length===3){for(var qt=arguments[0],en=arguments[1],Xt=arguments[2],sn=Xt,yn=qt;yn<en;yn++){var vn=wt._edgeList.get(yn);vn.setEdgeDepths(di.RIGHT,sn),sn=vn.getDepth(di.LEFT)}return sn}},_t.prototype.mergeSymLabels=function(){for(var wt=this.iterator();wt.hasNext();){var Tt=wt.next();Tt.getLabel().merge(Tt.getSym().getLabel())}},_t.prototype.linkMinimalDirectedEdges=function(wt){for(var Tt=this,At=null,Ot=null,Nt=this._SCANNING_FOR_INCOMING,jt=this._resultAreaEdgeList.size()-1;jt>=0;jt--){var Gt=Tt._resultAreaEdgeList.get(jt),qt=Gt.getSym();switch(At===null&&Gt.getEdgeRing()===wt&&(At=Gt),Nt){case Tt._SCANNING_FOR_INCOMING:if(qt.getEdgeRing()!==wt)continue;Ot=qt,Nt=Tt._LINKING_TO_OUTGOING;break;case Tt._LINKING_TO_OUTGOING:if(Gt.getEdgeRing()!==wt)continue;Ot.setNextMin(Gt),Nt=Tt._SCANNING_FOR_INCOMING}}Nt===this._LINKING_TO_OUTGOING&&(vo.isTrue(At!==null,"found null for first outgoing dirEdge"),vo.isTrue(At.getEdgeRing()===wt,"unable to link last incoming dirEdge"),Ot.setNextMin(At))},_t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var wt=0,Tt=this.iterator();Tt.hasNext();){var At=Tt.next();At.isInResult()&&wt++}return wt}if(arguments.length===1){for(var Ot=arguments[0],Nt=0,jt=this.iterator();jt.hasNext();){var Gt=jt.next();Gt.getEdgeRing()===Ot&&Nt++}return Nt}},_t.prototype.getLabel=function(){return this._label},_t.prototype.findCoveredLineEdges=function(){for(var wt=Gr.NONE,Tt=this.iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getSym();if(!At.isLineEdge()){if(At.isInResult()){wt=Gr.INTERIOR;break}if(Ot.isInResult()){wt=Gr.EXTERIOR;break}}}if(wt===Gr.NONE)return null;for(var Nt=wt,jt=this.iterator();jt.hasNext();){var Gt=jt.next(),qt=Gt.getSym();Gt.isLineEdge()?Gt.getEdge().setCovered(Nt===Gr.INTERIOR):(Gt.isInResult()&&(Nt=Gr.EXTERIOR),qt.isInResult()&&(Nt=Gr.INTERIOR))}},_t.prototype.computeLabelling=function(wt){vt.prototype.computeLabelling.call(this,wt),this._label=new vs(Gr.NONE);for(var Tt=this.iterator();Tt.hasNext();)for(var At=Tt.next().getEdge().getLabel(),Ot=0;Ot<2;Ot++){var Nt=At.getLocation(Ot);Nt!==Gr.INTERIOR&&Nt!==Gr.BOUNDARY||this._label.setLocation(Ot,Gr.INTERIOR)}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Pa),My=function(vt){function _t(){vt.apply(this,arguments)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.createNode=function(wt){return new im(wt,new a_)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Bf),_h=function vt(){this._pts=null,this._orientation=null;var _t=arguments[0];this._pts=_t,this._orientation=vt.orientation(_t)};_h.prototype.compareTo=function(vt){var _t=vt;return _h.compareOriented(this._pts,this._orientation,_t._pts,_t._orientation)},_h.prototype.interfaces_=function(){return[Jl]},_h.prototype.getClass=function(){return _h},_h.orientation=function(vt){return Lo.increasingDirection(vt)===1},_h.compareOriented=function(vt,_t,wt,Tt){for(var At=_t?1:-1,Ot=Tt?1:-1,Nt=_t?vt.length:-1,jt=Tt?wt.length:-1,Gt=_t?0:vt.length-1,qt=Tt?0:wt.length-1;;){var en=vt[Gt].compareTo(wt[qt]);if(en!==0)return en;var Xt=(Gt+=At)===Nt,sn=(qt+=Ot)===jt;if(Xt&&!sn)return-1;if(!Xt&&sn)return 1;if(Xt&&sn)return 0}};var Ol=function(){this._edges=new vi,this._ocaMap=new Ya};Ol.prototype.print=function(vt){vt.print("MULTILINESTRING ( ");for(var _t=0;_t<this._edges.size();_t++){var wt=this._edges.get(_t);_t>0&&vt.print(","),vt.print("(");for(var Tt=wt.getCoordinates(),At=0;At<Tt.length;At++)At>0&&vt.print(","),vt.print(Tt[At].x+" "+Tt[At].y);vt.println(")")}vt.print(")  ")},Ol.prototype.addAll=function(vt){for(var _t=vt.iterator();_t.hasNext();)this.add(_t.next())},Ol.prototype.findEdgeIndex=function(vt){for(var _t=0;_t<this._edges.size();_t++)if(this._edges.get(_t).equals(vt))return _t;return-1},Ol.prototype.iterator=function(){return this._edges.iterator()},Ol.prototype.getEdges=function(){return this._edges},Ol.prototype.get=function(vt){return this._edges.get(vt)},Ol.prototype.findEqualEdge=function(vt){var _t=new _h(vt.getCoordinates());return this._ocaMap.get(_t)},Ol.prototype.add=function(vt){this._edges.add(vt);var _t=new _h(vt.getCoordinates());this._ocaMap.put(_t,vt)},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var Qh=function(){};Qh.prototype.processIntersections=function(vt,_t,wt,Tt){},Qh.prototype.isDone=function(){},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var $l=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var vt=arguments[0];this._li=vt};$l.prototype.isTrivialIntersection=function(vt,_t,wt,Tt){if(vt===wt&&this._li.getIntersectionNum()===1){if($l.isAdjacentSegments(_t,Tt))return!0;if(vt.isClosed()){var At=vt.size()-1;if(_t===0&&Tt===At||Tt===0&&_t===At)return!0}}return!1},$l.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$l.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$l.prototype.getLineIntersector=function(){return this._li},$l.prototype.hasProperIntersection=function(){return this._hasProper},$l.prototype.processIntersections=function(vt,_t,wt,Tt){if(vt===wt&&_t===Tt)return null;this.numTests++;var At=vt.getCoordinates()[_t],Ot=vt.getCoordinates()[_t+1],Nt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Ot,Nt,jt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(vt,_t,wt,Tt)||(this._hasIntersection=!0,vt.addIntersections(this._li,_t,0),wt.addIntersections(this._li,Tt,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$l.prototype.hasIntersection=function(){return this._hasIntersection},$l.prototype.isDone=function(){return!1},$l.prototype.hasInteriorIntersection=function(){return this._hasInterior},$l.prototype.interfaces_=function(){return[Qh]},$l.prototype.getClass=function(){return $l},$l.isAdjacentSegments=function(vt,_t){return Math.abs(vt-_t)===1};var Yc=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var vt=arguments[0],_t=arguments[1],wt=arguments[2];this.coord=new Dr(vt),this.segmentIndex=_t,this.dist=wt};Yc.prototype.getSegmentIndex=function(){return this.segmentIndex},Yc.prototype.getCoordinate=function(){return this.coord},Yc.prototype.print=function(vt){vt.print(this.coord),vt.print(" seg # = "+this.segmentIndex),vt.println(" dist = "+this.dist)},Yc.prototype.compareTo=function(vt){var _t=vt;return this.compare(_t.segmentIndex,_t.dist)},Yc.prototype.isEndPoint=function(vt){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===vt},Yc.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Yc.prototype.getDistance=function(){return this.dist},Yc.prototype.compare=function(vt,_t){return this.segmentIndex<vt?-1:this.segmentIndex>vt?1:this.dist<_t?-1:this.dist>_t?1:0},Yc.prototype.interfaces_=function(){return[Jl]},Yc.prototype.getClass=function(){return Yc};var ls=function(){this._nodeMap=new Ya,this.edge=null;var vt=arguments[0];this.edge=vt};ls.prototype.print=function(vt){vt.println("Intersections:");for(var _t=this.iterator();_t.hasNext();)_t.next().print(vt)},ls.prototype.iterator=function(){return this._nodeMap.values().iterator()},ls.prototype.addSplitEdges=function(vt){this.addEndpoints();for(var _t=this.iterator(),wt=_t.next();_t.hasNext();){var Tt=_t.next(),At=this.createSplitEdge(wt,Tt);vt.add(At),wt=Tt}},ls.prototype.addEndpoints=function(){var vt=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[vt],vt,0)},ls.prototype.createSplitEdge=function(vt,_t){var wt=_t.segmentIndex-vt.segmentIndex+2,Tt=this.edge.pts[_t.segmentIndex],At=_t.dist>0||!_t.coord.equals2D(Tt);At||wt--;var Ot=new Array(wt).fill(null),Nt=0;Ot[Nt++]=new Dr(vt.coord);for(var jt=vt.segmentIndex+1;jt<=_t.segmentIndex;jt++)Ot[Nt++]=this.edge.pts[jt];return At&&(Ot[Nt]=_t.coord),new jf(Ot,new vs(this.edge._label))},ls.prototype.add=function(vt,_t,wt){var Tt=new Yc(vt,_t,wt),At=this._nodeMap.get(Tt);return At!==null?At:(this._nodeMap.put(Tt,Tt),Tt)},ls.prototype.isIntersection=function(vt){for(var _t=this.iterator();_t.hasNext();)if(_t.next().coord.equals(vt))return!0;return!1},ls.prototype.interfaces_=function(){return[]},ls.prototype.getClass=function(){return ls};var bh=function(){};bh.prototype.getChainStartIndices=function(vt){var _t=0,wt=new vi;wt.add(new zc(_t));do{var Tt=this.findChainEnd(vt,_t);wt.add(new zc(Tt)),_t=Tt}while(_t<vt.length-1);return bh.toIntArray(wt)},bh.prototype.findChainEnd=function(vt,_t){for(var wt=_s.quadrant(vt[_t],vt[_t+1]),Tt=_t+1;Tt<vt.length&&_s.quadrant(vt[Tt-1],vt[Tt])===wt;)Tt++;return Tt-1},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh},bh.toIntArray=function(vt){for(var _t=new Array(vt.size()).fill(null),wt=0;wt<_t.length;wt++)_t[wt]=vt.get(wt).intValue();return _t};var ma=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Vi,this.env2=new Vi;var vt=arguments[0];this.e=vt,this.pts=vt.getCoordinates();var _t=new bh;this.startIndex=_t.getChainStartIndices(this.pts)};ma.prototype.getCoordinates=function(){return this.pts},ma.prototype.getMaxX=function(vt){var _t=this.pts[this.startIndex[vt]].x,wt=this.pts[this.startIndex[vt+1]].x;return _t>wt?_t:wt},ma.prototype.getMinX=function(vt){var _t=this.pts[this.startIndex[vt]].x,wt=this.pts[this.startIndex[vt+1]].x;return _t<wt?_t:wt},ma.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var vt=arguments[0],_t=arguments[1],wt=arguments[2],Tt=arguments[3];this.computeIntersectsForChain(this.startIndex[vt],this.startIndex[vt+1],_t,_t.startIndex[wt],_t.startIndex[wt+1],Tt)}else if(arguments.length===6){var At=arguments[0],Ot=arguments[1],Nt=arguments[2],jt=arguments[3],Gt=arguments[4],qt=arguments[5],en=this.pts[At],Xt=this.pts[Ot],sn=Nt.pts[jt],yn=Nt.pts[Gt];if(Ot-At==1&&Gt-jt==1)return qt.addIntersections(this.e,At,Nt.e,jt),null;if(this.env1.init(en,Xt),this.env2.init(sn,yn),!this.env1.intersects(this.env2))return null;var vn=Math.trunc((At+Ot)/2),wn=Math.trunc((jt+Gt)/2);At<vn&&(jt<wn&&this.computeIntersectsForChain(At,vn,Nt,jt,wn,qt),wn<Gt&&this.computeIntersectsForChain(At,vn,Nt,wn,Gt,qt)),vn<Ot&&(jt<wn&&this.computeIntersectsForChain(vn,Ot,Nt,jt,wn,qt),wn<Gt&&this.computeIntersectsForChain(vn,Ot,Nt,wn,Gt,qt))}},ma.prototype.getStartIndexes=function(){return this.startIndex},ma.prototype.computeIntersects=function(vt,_t){for(var wt=0;wt<this.startIndex.length-1;wt++)for(var Tt=0;Tt<vt.startIndex.length-1;Tt++)this.computeIntersectsForChain(wt,vt,Tt,_t)},ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma};var ia=function vt(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var _t=0;_t<2;_t++)for(var wt=0;wt<3;wt++)this._depth[_t][wt]=vt.NULL_VALUE},vu={NULL_VALUE:{configurable:!0}};ia.prototype.getDepth=function(vt,_t){return this._depth[vt][_t]},ia.prototype.setDepth=function(vt,_t,wt){this._depth[vt][_t]=wt},ia.prototype.isNull=function(){var vt=this;if(arguments.length===0){for(var _t=0;_t<2;_t++)for(var wt=0;wt<3;wt++)if(vt._depth[_t][wt]!==ia.NULL_VALUE)return!1;return!0}if(arguments.length===1){var Tt=arguments[0];return this._depth[Tt][1]===ia.NULL_VALUE}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return this._depth[At][Ot]===ia.NULL_VALUE}},ia.prototype.normalize=function(){for(var vt=this,_t=0;_t<2;_t++)if(!vt.isNull(_t)){var wt=vt._depth[_t][1];vt._depth[_t][2]<wt&&(wt=vt._depth[_t][2]),wt<0&&(wt=0);for(var Tt=1;Tt<3;Tt++){var At=0;vt._depth[_t][Tt]>wt&&(At=1),vt._depth[_t][Tt]=At}}},ia.prototype.getDelta=function(vt){return this._depth[vt][di.RIGHT]-this._depth[vt][di.LEFT]},ia.prototype.getLocation=function(vt,_t){return this._depth[vt][_t]<=0?Gr.EXTERIOR:Gr.INTERIOR},ia.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ia.prototype.add=function(){var vt=this;if(arguments.length===1)for(var _t=arguments[0],wt=0;wt<2;wt++)for(var Tt=1;Tt<3;Tt++){var At=_t.getLocation(wt,Tt);At!==Gr.EXTERIOR&&At!==Gr.INTERIOR||(vt.isNull(wt,Tt)?vt._depth[wt][Tt]=ia.depthAtLocation(At):vt._depth[wt][Tt]+=ia.depthAtLocation(At))}else if(arguments.length===3){var Ot=arguments[0],Nt=arguments[1],jt=arguments[2];jt===Gr.INTERIOR&&this._depth[Ot][Nt]++}},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia},ia.depthAtLocation=function(vt){return vt===Gr.EXTERIOR?0:vt===Gr.INTERIOR?1:ia.NULL_VALUE},vu.NULL_VALUE.get=function(){return-1},Object.defineProperties(ia,vu);var jf=function(vt){function _t(){if(vt.call(this),this.pts=null,this._env=null,this.eiList=new ls(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ia,this._depthDelta=0,arguments.length===1){var wt=arguments[0];_t.call(this,wt,null)}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.pts=Tt,this._label=At}}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.getDepth=function(){return this._depth},_t.prototype.getCollapsedEdge=function(){var wt=new Array(2).fill(null);return wt[0]=this.pts[0],wt[1]=this.pts[1],new _t(wt,vs.toLineLabel(this._label))},_t.prototype.isIsolated=function(){return this._isIsolated},_t.prototype.getCoordinates=function(){return this.pts},_t.prototype.setIsolated=function(wt){this._isIsolated=wt},_t.prototype.setName=function(wt){this._name=wt},_t.prototype.equals=function(wt){if(!(wt instanceof _t))return!1;var Tt=wt;if(this.pts.length!==Tt.pts.length)return!1;for(var At=!0,Ot=!0,Nt=this.pts.length,jt=0;jt<this.pts.length;jt++)if(this.pts[jt].equals2D(Tt.pts[jt])||(At=!1),this.pts[jt].equals2D(Tt.pts[--Nt])||(Ot=!1),!At&&!Ot)return!1;return!0},_t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var wt=arguments[0];return this.pts[wt]}},_t.prototype.print=function(wt){wt.print("edge "+this._name+": "),wt.print("LINESTRING (");for(var Tt=0;Tt<this.pts.length;Tt++)Tt>0&&wt.print(","),wt.print(this.pts[Tt].x+" "+this.pts[Tt].y);wt.print(")  "+this._label+" "+this._depthDelta)},_t.prototype.computeIM=function(wt){_t.updateIM(this._label,wt)},_t.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},_t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},_t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},_t.prototype.getDepthDelta=function(){return this._depthDelta},_t.prototype.getNumPoints=function(){return this.pts.length},_t.prototype.printReverse=function(wt){wt.print("edge "+this._name+": ");for(var Tt=this.pts.length-1;Tt>=0;Tt--)wt.print(this.pts[Tt]+" ");wt.println("")},_t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new ma(this)),this._mce},_t.prototype.getEnvelope=function(){if(this._env===null){this._env=new Vi;for(var wt=0;wt<this.pts.length;wt++)this._env.expandToInclude(this.pts[wt])}return this._env},_t.prototype.addIntersection=function(wt,Tt,At,Ot){var Nt=new Dr(wt.getIntersection(Ot)),jt=Tt,Gt=wt.getEdgeDistance(At,Ot),qt=jt+1;if(qt<this.pts.length){var en=this.pts[qt];Nt.equals2D(en)&&(jt=qt,Gt=0)}this.eiList.add(Nt,jt,Gt)},_t.prototype.toString=function(){var wt=new Fc;wt.append("edge "+this._name+": "),wt.append("LINESTRING (");for(var Tt=0;Tt<this.pts.length;Tt++)Tt>0&&wt.append(","),wt.append(this.pts[Tt].x+" "+this.pts[Tt].y);return wt.append(")  "+this._label+" "+this._depthDelta),wt.toString()},_t.prototype.isPointwiseEqual=function(wt){if(this.pts.length!==wt.pts.length)return!1;for(var Tt=0;Tt<this.pts.length;Tt++)if(!this.pts[Tt].equals2D(wt.pts[Tt]))return!1;return!0},_t.prototype.setDepthDelta=function(wt){this._depthDelta=wt},_t.prototype.getEdgeIntersectionList=function(){return this.eiList},_t.prototype.addIntersections=function(wt,Tt,At){for(var Ot=0;Ot<wt.getIntersectionNum();Ot++)this.addIntersection(wt,Tt,At,Ot)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.updateIM=function(){if(arguments.length!==2)return vt.prototype.updateIM.apply(this,arguments);var wt=arguments[0],Tt=arguments[1];Tt.setAtLeastIfValid(wt.getLocation(0,di.ON),wt.getLocation(1,di.ON),1),wt.isArea()&&(Tt.setAtLeastIfValid(wt.getLocation(0,di.LEFT),wt.getLocation(1,di.LEFT),2),Tt.setAtLeastIfValid(wt.getLocation(0,di.RIGHT),wt.getLocation(1,di.RIGHT),2))},_t}(Il),Oa=function(vt){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ol,this._bufParams=vt||null};Oa.prototype.setWorkingPrecisionModel=function(vt){this._workingPrecisionModel=vt},Oa.prototype.insertUniqueEdge=function(vt){var _t=this._edgeList.findEqualEdge(vt);if(_t!==null){var wt=_t.getLabel(),Tt=vt.getLabel();_t.isPointwiseEqual(vt)||(Tt=new vs(vt.getLabel())).flip(),wt.merge(Tt);var At=Oa.depthDelta(Tt),Ot=_t.getDepthDelta()+At;_t.setDepthDelta(Ot)}else this._edgeList.add(vt),vt.setDepthDelta(Oa.depthDelta(vt.getLabel()))},Oa.prototype.buildSubgraphs=function(vt,_t){for(var wt=new vi,Tt=vt.iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getRightmostCoordinate(),Nt=new Bd(wt).getDepth(Ot);At.computeDepth(Nt),At.findResultEdges(),wt.add(At),_t.add(At.getDirectedEdges(),At.getNodes())}},Oa.prototype.createSubgraphs=function(vt){for(var _t=new vi,wt=vt.getNodes().iterator();wt.hasNext();){var Tt=wt.next();if(!Tt.isVisited()){var At=new Xa;At.create(Tt),_t.add(At)}}return Cc.sort(_t,Cc.reverseOrder()),_t},Oa.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Oa.prototype.getNoder=function(vt){if(this._workingNoder!==null)return this._workingNoder;var _t=new N0,wt=new ph;return wt.setPrecisionModel(vt),_t.setSegmentIntersector(new $l(wt)),_t},Oa.prototype.buffer=function(vt,_t){var wt=this._workingPrecisionModel;wt===null&&(wt=vt.getPrecisionModel()),this._geomFact=vt.getFactory();var Tt=new Gi(wt,this._bufParams),At=new vl(vt,_t,Tt).getCurves();if(At.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(At,wt),this._graph=new zs(new My),this._graph.addEdges(this._edgeList.getEdges());var Ot=this.createSubgraphs(this._graph),Nt=new ml(this._geomFact);this.buildSubgraphs(Ot,Nt);var jt=Nt.getPolygons();return jt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(jt)},Oa.prototype.computeNodedEdges=function(vt,_t){var wt=this.getNoder(_t);wt.computeNodes(vt);for(var Tt=wt.getNodedSubstrings().iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getCoordinates();if(Ot.length!==2||!Ot[0].equals2D(Ot[1])){var Nt=At.getData(),jt=new jf(At.getCoordinates(),new vs(Nt));this.insertUniqueEdge(jt)}}},Oa.prototype.setNoder=function(vt){this._workingNoder=vt},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Oa.depthDelta=function(vt){var _t=vt.getLocation(0,di.LEFT),wt=vt.getLocation(0,di.RIGHT);return _t===Gr.INTERIOR&&wt===Gr.EXTERIOR?1:_t===Gr.EXTERIOR&&wt===Gr.INTERIOR?-1:0},Oa.convertSegStrings=function(vt){for(var _t=new Io,wt=new vi;vt.hasNext();){var Tt=vt.next(),At=_t.createLineString(Tt.getCoordinates());wt.add(At)}return _t.buildGeometry(wt)};var xh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var vt=arguments[0],_t=arguments[1];this._noder=vt,this._scaleFactor=_t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var wt=arguments[0],Tt=arguments[1],At=arguments[2],Ot=arguments[3];this._noder=wt,this._scaleFactor=Tt,this._offsetX=At,this._offsetY=Ot,this._isScaled=!this.isIntegerPrecision()}};xh.prototype.rescale=function(){var vt=this;if(to(arguments[0],fa))for(var _t=arguments[0],wt=_t.iterator();wt.hasNext();){var Tt=wt.next();vt.rescale(Tt.getCoordinates())}else if(arguments[0]instanceof Array){for(var At=arguments[0],Ot=0;Ot<At.length;Ot++)At[Ot].x=At[Ot].x/vt._scaleFactor+vt._offsetX,At[Ot].y=At[Ot].y/vt._scaleFactor+vt._offsetY;At.length===2&&At[0].equals2D(At[1])&&za.out.println(At)}},xh.prototype.scale=function(){var vt=this;if(to(arguments[0],fa)){for(var _t=arguments[0],wt=new vi,Tt=_t.iterator();Tt.hasNext();){var At=Tt.next();wt.add(new Us(vt.scale(At.getCoordinates()),At.getData()))}return wt}if(arguments[0]instanceof Array){for(var Ot=arguments[0],Nt=new Array(Ot.length).fill(null),jt=0;jt<Ot.length;jt++)Nt[jt]=new Dr(Math.round((Ot[jt].x-vt._offsetX)*vt._scaleFactor),Math.round((Ot[jt].y-vt._offsetY)*vt._scaleFactor),Ot[jt].z);var Gt=Lo.removeRepeatedPoints(Nt);return Gt}},xh.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},xh.prototype.getNodedSubstrings=function(){var vt=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(vt),vt},xh.prototype.computeNodes=function(vt){var _t=vt;this._isScaled&&(_t=this.scale(vt)),this._noder.computeNodes(_t)},xh.prototype.interfaces_=function(){return[Zh]},xh.prototype.getClass=function(){return xh};var zl=function(){this._li=new ph,this._segStrings=null;var vt=arguments[0];this._segStrings=vt},Fd={fact:{configurable:!0}};zl.prototype.checkEndPtVertexIntersections=function(){var vt=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();){var wt=_t.next(),Tt=wt.getCoordinates();vt.checkEndPtVertexIntersections(Tt[0],vt._segStrings),vt.checkEndPtVertexIntersections(Tt[Tt.length-1],vt._segStrings)}else if(arguments.length===2){for(var At=arguments[0],Ot=arguments[1],Nt=Ot.iterator();Nt.hasNext();)for(var jt=Nt.next(),Gt=jt.getCoordinates(),qt=1;qt<Gt.length-1;qt++)if(Gt[qt].equals(At))throw new Ru("found endpt/interior pt intersection at index "+qt+" :pt "+At)}},zl.prototype.checkInteriorIntersections=function(){var vt=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();)for(var wt=_t.next(),Tt=this._segStrings.iterator();Tt.hasNext();){var At=Tt.next();vt.checkInteriorIntersections(wt,At)}else if(arguments.length===2)for(var Ot=arguments[0],Nt=arguments[1],jt=Ot.getCoordinates(),Gt=Nt.getCoordinates(),qt=0;qt<jt.length-1;qt++)for(var en=0;en<Gt.length-1;en++)vt.checkInteriorIntersections(Ot,qt,Nt,en);else if(arguments.length===4){var Xt=arguments[0],sn=arguments[1],yn=arguments[2],vn=arguments[3];if(Xt===yn&&sn===vn)return null;var wn=Xt.getCoordinates()[sn],un=Xt.getCoordinates()[sn+1],Fn=yn.getCoordinates()[vn],Qn=yn.getCoordinates()[vn+1];if(this._li.computeIntersection(wn,un,Fn,Qn),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,wn,un)||this.hasInteriorIntersection(this._li,Fn,Qn)))throw new Ru("found non-noded intersection at "+wn+"-"+un+" and "+Fn+"-"+Qn)}},zl.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},zl.prototype.checkCollapses=function(){var vt=this;if(arguments.length===0)for(var _t=this._segStrings.iterator();_t.hasNext();){var wt=_t.next();vt.checkCollapses(wt)}else if(arguments.length===1)for(var Tt=arguments[0],At=Tt.getCoordinates(),Ot=0;Ot<At.length-2;Ot++)vt.checkCollapse(At[Ot],At[Ot+1],At[Ot+2])},zl.prototype.hasInteriorIntersection=function(vt,_t,wt){for(var Tt=0;Tt<vt.getIntersectionNum();Tt++){var At=vt.getIntersection(Tt);if(!At.equals(_t)&&!At.equals(wt))return!0}return!1},zl.prototype.checkCollapse=function(vt,_t,wt){if(vt.equals(wt))throw new Ru("found non-noded collapse at "+zl.fact.createLineString([vt,_t,wt]))},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},Fd.fact.get=function(){return new Io},Object.defineProperties(zl,Fd);var il=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var vt=arguments[0],_t=arguments[1],wt=arguments[2];if(this._originalPt=vt,this._pt=vt,this._scaleFactor=_t,this._li=wt,_t<=0)throw new Ds("Scale factor must be non-zero");_t!==1&&(this._pt=new Dr(this.scale(vt.x),this.scale(vt.y)),this._p0Scaled=new Dr,this._p1Scaled=new Dr),this.initCorners(this._pt)},Hl={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};il.prototype.intersectsScaled=function(vt,_t){var wt=Math.min(vt.x,_t.x),Tt=Math.max(vt.x,_t.x),At=Math.min(vt.y,_t.y),Ot=Math.max(vt.y,_t.y),Nt=this._maxx<wt||this._minx>Tt||this._maxy<At||this._miny>Ot;if(Nt)return!1;var jt=this.intersectsToleranceSquare(vt,_t);return vo.isTrue(!(Nt&&jt),"Found bad envelope test"),jt},il.prototype.initCorners=function(vt){var _t=.5;this._minx=vt.x-_t,this._maxx=vt.x+_t,this._miny=vt.y-_t,this._maxy=vt.y+_t,this._corner[0]=new Dr(this._maxx,this._maxy),this._corner[1]=new Dr(this._minx,this._maxy),this._corner[2]=new Dr(this._minx,this._miny),this._corner[3]=new Dr(this._maxx,this._miny)},il.prototype.intersects=function(vt,_t){return this._scaleFactor===1?this.intersectsScaled(vt,_t):(this.copyScaled(vt,this._p0Scaled),this.copyScaled(_t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},il.prototype.scale=function(vt){return Math.round(vt*this._scaleFactor)},il.prototype.getCoordinate=function(){return this._originalPt},il.prototype.copyScaled=function(vt,_t){_t.x=this.scale(vt.x),_t.y=this.scale(vt.y)},il.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var vt=il.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Vi(this._originalPt.x-vt,this._originalPt.x+vt,this._originalPt.y-vt,this._originalPt.y+vt)}return this._safeEnv},il.prototype.intersectsPixelClosure=function(vt,_t){return this._li.computeIntersection(vt,_t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,_t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,_t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,_t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},il.prototype.intersectsToleranceSquare=function(vt,_t){var wt=!1,Tt=!1;return this._li.computeIntersection(vt,_t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(vt,_t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(wt=!0),this._li.computeIntersection(vt,_t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(Tt=!0),this._li.computeIntersection(vt,_t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!wt||!Tt)||!!vt.equals(this._pt)||!!_t.equals(this._pt))))},il.prototype.addSnappedNode=function(vt,_t){var wt=vt.getCoordinate(_t),Tt=vt.getCoordinate(_t+1);return!!this.intersects(wt,Tt)&&(vt.addIntersection(this.getCoordinate(),_t),!0)},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},Hl.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(il,Hl);var oa=function(){this.tempEnv1=new Vi,this.selectedSegment=new Hi};oa.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var vt=arguments[0],_t=arguments[1];vt.getLineSegment(_t,this.selectedSegment),this.select(this.selectedSegment)}}},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa};var _u=function(){this._index=null;var vt=arguments[0];this._index=vt},Jp={HotPixelSnapAction:{configurable:!0}};_u.prototype.snap=function(){if(arguments.length===1){var vt=arguments[0];return this.snap(vt,null,-1)}if(arguments.length===3){var _t=arguments[0],wt=arguments[1],Tt=arguments[2],At=_t.getSafeEnvelope(),Ot=new Vf(_t,wt,Tt);return this._index.query(At,{interfaces_:function(){return[yh]},visitItem:function(Nt){Nt.select(At,Ot)}}),Ot.isNodeAdded()}},_u.prototype.interfaces_=function(){return[]},_u.prototype.getClass=function(){return _u},Jp.HotPixelSnapAction.get=function(){return Vf},Object.defineProperties(_u,Jp);var Vf=function(vt){function _t(){vt.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._hotPixel=wt,this._parentEdge=Tt,this._hotPixelVertexIndex=At}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.isNodeAdded=function(){return this._isNodeAdded},_t.prototype.select=function(){if(arguments.length!==2)return vt.prototype.select.apply(this,arguments);var wt=arguments[0],Tt=arguments[1],At=wt.getContext();if(this._parentEdge!==null&&At===this._parentEdge&&Tt===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(At,Tt)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(oa),zd=function(){this._li=null,this._interiorIntersections=null;var vt=arguments[0];this._li=vt,this._interiorIntersections=new vi};zd.prototype.processIntersections=function(vt,_t,wt,Tt){if(vt===wt&&_t===Tt)return null;var At=vt.getCoordinates()[_t],Ot=vt.getCoordinates()[_t+1],Nt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];if(this._li.computeIntersection(At,Ot,Nt,jt),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Gt=0;Gt<this._li.getIntersectionNum();Gt++)this._interiorIntersections.add(this._li.getIntersection(Gt));vt.addIntersections(this._li,_t,0),wt.addIntersections(this._li,Tt,1)}},zd.prototype.isDone=function(){return!1},zd.prototype.getInteriorIntersections=function(){return this._interiorIntersections},zd.prototype.interfaces_=function(){return[Qh]},zd.prototype.getClass=function(){return zd};var bu=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var vt=arguments[0];this._pm=vt,this._li=new ph,this._li.setPrecisionModel(vt),this._scaleFactor=vt.getScale()};bu.prototype.checkCorrectness=function(vt){var _t=Us.getNodedSubstrings(vt),wt=new zl(_t);try{wt.checkValid()}catch(Tt){if(!(Tt instanceof yy))throw Tt;Tt.printStackTrace()}},bu.prototype.getNodedSubstrings=function(){return Us.getNodedSubstrings(this._nodedSegStrings)},bu.prototype.snapRound=function(vt,_t){var wt=this.findInteriorIntersections(vt,_t);this.computeIntersectionSnaps(wt),this.computeVertexSnaps(vt)},bu.prototype.findInteriorIntersections=function(vt,_t){var wt=new zd(_t);return this._noder.setSegmentIntersector(wt),this._noder.computeNodes(vt),wt.getInteriorIntersections()},bu.prototype.computeVertexSnaps=function(){var vt=this;if(to(arguments[0],fa))for(var _t=arguments[0],wt=_t.iterator();wt.hasNext();){var Tt=wt.next();vt.computeVertexSnaps(Tt)}else if(arguments[0]instanceof Us)for(var At=arguments[0],Ot=At.getCoordinates(),Nt=0;Nt<Ot.length;Nt++){var jt=new il(Ot[Nt],vt._scaleFactor,vt._li),Gt=vt._pointSnapper.snap(jt,At,Nt);Gt&&At.addIntersection(Ot[Nt],Nt)}},bu.prototype.computeNodes=function(vt){this._nodedSegStrings=vt,this._noder=new N0,this._pointSnapper=new _u(this._noder.getIndex()),this.snapRound(vt,this._li)},bu.prototype.computeIntersectionSnaps=function(vt){for(var _t=this,wt=vt.iterator();wt.hasNext();){var Tt=wt.next(),At=new il(Tt,_t._scaleFactor,_t._li);_t._pointSnapper.snap(At)}},bu.prototype.interfaces_=function(){return[Zh]},bu.prototype.getClass=function(){return bu};var Cs=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new gs,this._resultGeometry=null,this._saveException=null,arguments.length===1){var vt=arguments[0];this._argGeom=vt}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];this._argGeom=_t,this._bufParams=wt}},jl={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Cs.prototype.bufferFixedPrecision=function(vt){var _t=new xh(new bu(new ps(1)),vt.getScale()),wt=new Oa(this._bufParams);wt.setWorkingPrecisionModel(vt),wt.setNoder(_t),this._resultGeometry=wt.buffer(this._argGeom,this._distance)},Cs.prototype.bufferReducedPrecision=function(){var vt=this;if(arguments.length===0){for(var _t=Cs.MAX_PRECISION_DIGITS;_t>=0;_t--){try{vt.bufferReducedPrecision(_t)}catch(Ot){if(!(Ot instanceof Du))throw Ot;vt._saveException=Ot}if(vt._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var wt=arguments[0],Tt=Cs.precisionScaleFactor(this._argGeom,this._distance,wt),At=new ps(Tt);this.bufferFixedPrecision(At)}},Cs.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var vt=this._argGeom.getFactory().getPrecisionModel();vt.getType()===ps.FIXED?this.bufferFixedPrecision(vt):this.bufferReducedPrecision()},Cs.prototype.setQuadrantSegments=function(vt){this._bufParams.setQuadrantSegments(vt)},Cs.prototype.bufferOriginalPrecision=function(){try{var vt=new Oa(this._bufParams);this._resultGeometry=vt.buffer(this._argGeom,this._distance)}catch(_t){if(!(_t instanceof Ru))throw _t;this._saveException=_t}},Cs.prototype.getResultGeometry=function(vt){return this._distance=vt,this.computeGeometry(),this._resultGeometry},Cs.prototype.setEndCapStyle=function(vt){this._bufParams.setEndCapStyle(vt)},Cs.prototype.interfaces_=function(){return[]},Cs.prototype.getClass=function(){return Cs},Cs.bufferOp=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],wt=new Cs(vt),Tt=wt.getResultGeometry(_t);return Tt}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Qi&&typeof arguments[1]=="number"){var At=arguments[0],Ot=arguments[1],Nt=arguments[2],jt=new Cs(At);jt.setQuadrantSegments(Nt);var Gt=jt.getResultGeometry(Ot);return Gt}if(arguments[2]instanceof gs&&arguments[0]instanceof Qi&&typeof arguments[1]=="number"){var qt=arguments[0],en=arguments[1],Xt=arguments[2],sn=new Cs(qt,Xt),yn=sn.getResultGeometry(en);return yn}}else if(arguments.length===4){var vn=arguments[0],wn=arguments[1],un=arguments[2],Fn=arguments[3],Qn=new Cs(vn);Qn.setQuadrantSegments(un),Qn.setEndCapStyle(Fn);var _n=Qn.getResultGeometry(wn);return _n}},Cs.precisionScaleFactor=function(vt,_t,wt){var Tt=vt.getEnvelopeInternal(),At=Bl.max(Math.abs(Tt.getMaxX()),Math.abs(Tt.getMaxY()),Math.abs(Tt.getMinX()),Math.abs(Tt.getMinY()))+2*(_t>0?_t:0),Ot=wt-Math.trunc(Math.log(At)/Math.log(10)+1);return Math.pow(10,Ot)},jl.CAP_ROUND.get=function(){return gs.CAP_ROUND},jl.CAP_BUTT.get=function(){return gs.CAP_FLAT},jl.CAP_FLAT.get=function(){return gs.CAP_FLAT},jl.CAP_SQUARE.get=function(){return gs.CAP_SQUARE},jl.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Cs,jl);var $a=function(){this._pt=[new Dr,new Dr],this._distance=ho.NaN,this._isNull=!0};$a.prototype.getCoordinates=function(){return this._pt},$a.prototype.getCoordinate=function(vt){return this._pt[vt]},$a.prototype.setMinimum=function(){if(arguments.length===1){var vt=arguments[0];this.setMinimum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(_t,wt),null;var Tt=_t.distance(wt);Tt<this._distance&&this.initialize(_t,wt,Tt)}},$a.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this._pt[0].setCoordinate(vt),this._pt[1].setCoordinate(_t),this._distance=vt.distance(_t),this._isNull=!1}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._pt[0].setCoordinate(wt),this._pt[1].setCoordinate(Tt),this._distance=At,this._isNull=!1}},$a.prototype.getDistance=function(){return this._distance},$a.prototype.setMaximum=function(){if(arguments.length===1){var vt=arguments[0];this.setMaximum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(_t,wt),null;var Tt=_t.distance(wt);Tt>this._distance&&this.initialize(_t,wt,Tt)}},$a.prototype.interfaces_=function(){return[]},$a.prototype.getClass=function(){return $a};var Vl=function(){};Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.computeDistance=function(){if(arguments[2]instanceof $a&&arguments[0]instanceof Bs&&arguments[1]instanceof Dr)for(var vt=arguments[0],_t=arguments[1],wt=arguments[2],Tt=vt.getCoordinates(),At=new Hi,Ot=0;Ot<Tt.length-1;Ot++){At.setCoordinates(Tt[Ot],Tt[Ot+1]);var Nt=At.closestPoint(_t);wt.setMinimum(Nt,_t)}else if(arguments[2]instanceof $a&&arguments[0]instanceof pa&&arguments[1]instanceof Dr){var jt=arguments[0],Gt=arguments[1],qt=arguments[2];Vl.computeDistance(jt.getExteriorRing(),Gt,qt);for(var en=0;en<jt.getNumInteriorRing();en++)Vl.computeDistance(jt.getInteriorRingN(en),Gt,qt)}else if(arguments[2]instanceof $a&&arguments[0]instanceof Qi&&arguments[1]instanceof Dr){var Xt=arguments[0],sn=arguments[1],yn=arguments[2];if(Xt instanceof Bs)Vl.computeDistance(Xt,sn,yn);else if(Xt instanceof pa)Vl.computeDistance(Xt,sn,yn);else if(Xt instanceof rl)for(var vn=Xt,wn=0;wn<vn.getNumGeometries();wn++){var un=vn.getGeometryN(wn);Vl.computeDistance(un,sn,yn)}else yn.setMinimum(Xt.getCoordinate(),sn)}else if(arguments[2]instanceof $a&&arguments[0]instanceof Hi&&arguments[1]instanceof Dr){var Fn=arguments[0],Qn=arguments[1],_n=arguments[2],Bn=Fn.closestPoint(Qn);_n.setMinimum(Bn,Qn)}};var Xc=function(vt){this._maxPtDist=new $a,this._inputGeom=vt||null},cm={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Xc.prototype.computeMaxMidpointDistance=function(vt){var _t=new xu(this._inputGeom);vt.apply(_t),this._maxPtDist.setMaximum(_t.getMaxPointDistance())},Xc.prototype.computeMaxVertexDistance=function(vt){var _t=new ed(this._inputGeom);vt.apply(_t),this._maxPtDist.setMaximum(_t.getMaxPointDistance())},Xc.prototype.findDistance=function(vt){return this.computeMaxVertexDistance(vt),this.computeMaxMidpointDistance(vt),this._maxPtDist.getDistance()},Xc.prototype.getDistancePoints=function(){return this._maxPtDist},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc},cm.MaxPointDistanceFilter.get=function(){return ed},cm.MaxMidpointDistanceFilter.get=function(){return xu},Object.defineProperties(Xc,cm);var ed=function(vt){this._maxPtDist=new $a,this._minPtDist=new $a,this._geom=vt||null};ed.prototype.filter=function(vt){this._minPtDist.initialize(),Vl.computeDistance(this._geom,vt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ed.prototype.getMaxPointDistance=function(){return this._maxPtDist},ed.prototype.interfaces_=function(){return[hu]},ed.prototype.getClass=function(){return ed};var xu=function(vt){this._maxPtDist=new $a,this._minPtDist=new $a,this._geom=vt||null};xu.prototype.filter=function(vt,_t){if(_t===0)return null;var wt=vt.getCoordinate(_t-1),Tt=vt.getCoordinate(_t),At=new Dr((wt.x+Tt.x)/2,(wt.y+Tt.y)/2);this._minPtDist.initialize(),Vl.computeDistance(this._geom,At,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xu.prototype.isDone=function(){return!1},xu.prototype.isGeometryChanged=function(){return!1},xu.prototype.getMaxPointDistance=function(){return this._maxPtDist},xu.prototype.interfaces_=function(){return[bc]},xu.prototype.getClass=function(){return xu};var Bu=function(vt){this._comps=vt||null};Bu.prototype.filter=function(vt){vt instanceof pa&&this._comps.add(vt)},Bu.prototype.interfaces_=function(){return[Vc]},Bu.prototype.getClass=function(){return Bu},Bu.getPolygons=function(){if(arguments.length===1){var vt=arguments[0];return Bu.getPolygons(vt,new vi)}if(arguments.length===2){var _t=arguments[0],wt=arguments[1];return _t instanceof pa?wt.add(_t):_t instanceof rl&&_t.apply(new Bu(wt)),wt}};var Ha=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var vt=arguments[0];this._lines=vt}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];this._lines=_t,this._isForcedToLineString=wt}};Ha.prototype.filter=function(vt){if(this._isForcedToLineString&&vt instanceof pu){var _t=vt.getFactory().createLineString(vt.getCoordinateSequence());return this._lines.add(_t),null}vt instanceof Bs&&this._lines.add(vt)},Ha.prototype.setForceToLineString=function(vt){this._isForcedToLineString=vt},Ha.prototype.interfaces_=function(){return[cu]},Ha.prototype.getClass=function(){return Ha},Ha.getGeometry=function(){if(arguments.length===1){var vt=arguments[0];return vt.getFactory().buildGeometry(Ha.getLines(vt))}if(arguments.length===2){var _t=arguments[0],wt=arguments[1];return _t.getFactory().buildGeometry(Ha.getLines(_t,wt))}},Ha.getLines=function(){if(arguments.length===1){var vt=arguments[0];return Ha.getLines(vt,!1)}if(arguments.length===2){if(to(arguments[0],fa)&&to(arguments[1],fa)){for(var _t=arguments[0],wt=arguments[1],Tt=_t.iterator();Tt.hasNext();){var At=Tt.next();Ha.getLines(At,wt)}return wt}if(arguments[0]instanceof Qi&&typeof arguments[1]=="boolean"){var Ot=arguments[0],Nt=arguments[1],jt=new vi;return Ot.apply(new Ha(jt,Nt)),jt}if(arguments[0]instanceof Qi&&to(arguments[1],fa)){var Gt=arguments[0],qt=arguments[1];return Gt instanceof Bs?qt.add(Gt):Gt.apply(new Ha(qt)),qt}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&to(arguments[0],fa)&&to(arguments[1],fa)){for(var en=arguments[0],Xt=arguments[1],sn=arguments[2],yn=en.iterator();yn.hasNext();){var vn=yn.next();Ha.getLines(vn,Xt,sn)}return Xt}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Qi&&to(arguments[1],fa)){var wn=arguments[0],un=arguments[1],Fn=arguments[2];return wn.apply(new Ha(un,Fn)),un}}};var Ul=function(){if(this._boundaryRule=tc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];if(vt===null)throw new Ds("Rule must be non-null");this._boundaryRule=vt}}};Ul.prototype.locateInternal=function(){var vt=this;if(arguments[0]instanceof Dr&&arguments[1]instanceof pa){var _t=arguments[0],wt=arguments[1];if(wt.isEmpty())return Gr.EXTERIOR;var Tt=wt.getExteriorRing(),At=this.locateInPolygonRing(_t,Tt);if(At===Gr.EXTERIOR)return Gr.EXTERIOR;if(At===Gr.BOUNDARY)return Gr.BOUNDARY;for(var Ot=0;Ot<wt.getNumInteriorRing();Ot++){var Nt=wt.getInteriorRingN(Ot),jt=vt.locateInPolygonRing(_t,Nt);if(jt===Gr.INTERIOR)return Gr.EXTERIOR;if(jt===Gr.BOUNDARY)return Gr.BOUNDARY}return Gr.INTERIOR}if(arguments[0]instanceof Dr&&arguments[1]instanceof Bs){var Gt=arguments[0],qt=arguments[1];if(!qt.getEnvelopeInternal().intersects(Gt))return Gr.EXTERIOR;var en=qt.getCoordinates();return qt.isClosed()||!Gt.equals(en[0])&&!Gt.equals(en[en.length-1])?Si.isOnLine(Gt,en)?Gr.INTERIOR:Gr.EXTERIOR:Gr.BOUNDARY}if(arguments[0]instanceof Dr&&arguments[1]instanceof Ll){var Xt=arguments[0],sn=arguments[1],yn=sn.getCoordinate();return yn.equals2D(Xt)?Gr.INTERIOR:Gr.EXTERIOR}},Ul.prototype.locateInPolygonRing=function(vt,_t){return _t.getEnvelopeInternal().intersects(vt)?Si.locatePointInRing(vt,_t.getCoordinates()):Gr.EXTERIOR},Ul.prototype.intersects=function(vt,_t){return this.locate(vt,_t)!==Gr.EXTERIOR},Ul.prototype.updateLocationInfo=function(vt){vt===Gr.INTERIOR&&(this._isIn=!0),vt===Gr.BOUNDARY&&this._numBoundaries++},Ul.prototype.computeLocation=function(vt,_t){var wt=this;if(_t instanceof Ll&&this.updateLocationInfo(this.locateInternal(vt,_t)),_t instanceof Bs)this.updateLocationInfo(this.locateInternal(vt,_t));else if(_t instanceof pa)this.updateLocationInfo(this.locateInternal(vt,_t));else if(_t instanceof gh)for(var Tt=_t,At=0;At<Tt.getNumGeometries();At++){var Ot=Tt.getGeometryN(At);wt.updateLocationInfo(wt.locateInternal(vt,Ot))}else if(_t instanceof gu)for(var Nt=_t,jt=0;jt<Nt.getNumGeometries();jt++){var Gt=Nt.getGeometryN(jt);wt.updateLocationInfo(wt.locateInternal(vt,Gt))}else if(_t instanceof rl)for(var qt=new qc(_t);qt.hasNext();){var en=qt.next();en!==_t&&wt.computeLocation(vt,en)}},Ul.prototype.locate=function(vt,_t){return _t.isEmpty()?Gr.EXTERIOR:_t instanceof Bs||_t instanceof pa?this.locateInternal(vt,_t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(vt,_t),this._boundaryRule.isInBoundary(this._numBoundaries)?Gr.BOUNDARY:this._numBoundaries>0||this._isIn?Gr.INTERIOR:Gr.EXTERIOR)},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul};var ol=function vt(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var _t=arguments[0],wt=arguments[1];vt.call(this,_t,vt.INSIDE_AREA,wt)}else if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];this._component=Tt,this._segIndex=At,this._pt=Ot}},Ny={INSIDE_AREA:{configurable:!0}};ol.prototype.isInsideArea=function(){return this._segIndex===ol.INSIDE_AREA},ol.prototype.getCoordinate=function(){return this._pt},ol.prototype.getGeometryComponent=function(){return this._component},ol.prototype.getSegmentIndex=function(){return this._segIndex},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},Ny.INSIDE_AREA.get=function(){return-1},Object.defineProperties(ol,Ny);var wh=function(vt){this._pts=vt||null};wh.prototype.filter=function(vt){vt instanceof Ll&&this._pts.add(vt)},wh.prototype.interfaces_=function(){return[Vc]},wh.prototype.getClass=function(){return wh},wh.getPoints=function(){if(arguments.length===1){var vt=arguments[0];return vt instanceof Ll?Cc.singletonList(vt):wh.getPoints(vt,new vi)}if(arguments.length===2){var _t=arguments[0],wt=arguments[1];return _t instanceof Ll?wt.add(_t):_t instanceof rl&&_t.apply(new wh(wt)),wt}};var Fu=function(){this._locations=null;var vt=arguments[0];this._locations=vt};Fu.prototype.filter=function(vt){(vt instanceof Ll||vt instanceof Bs||vt instanceof pa)&&this._locations.add(new ol(vt,0,vt.getCoordinate()))},Fu.prototype.interfaces_=function(){return[Vc]},Fu.prototype.getClass=function(){return Fu},Fu.getLocations=function(vt){var _t=new vi;return vt.apply(new Fu(_t)),_t};var Ra=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ul,this._minDistanceLocation=null,this._minDistance=ho.MAX_VALUE,arguments.length===2){var vt=arguments[0],_t=arguments[1];this._geom=[vt,_t],this._terminateDistance=0}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=wt,this._geom[1]=Tt,this._terminateDistance=At}};Ra.prototype.computeContainmentDistance=function(){var vt=this;if(arguments.length===0){var _t=new Array(2).fill(null);if(this.computeContainmentDistance(0,_t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,_t)}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=1-wt,Ot=Bu.getPolygons(this._geom[wt]);if(Ot.size()>0){var Nt=Fu.getLocations(this._geom[At]);if(this.computeContainmentDistance(Nt,Ot,Tt),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[At]=Tt[0],this._minDistanceLocation[wt]=Tt[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&to(arguments[0],vc)&&to(arguments[1],vc)){for(var jt=arguments[0],Gt=arguments[1],qt=arguments[2],en=0;en<jt.size();en++)for(var Xt=jt.get(en),sn=0;sn<Gt.size();sn++)if(vt.computeContainmentDistance(Xt,Gt.get(sn),qt),vt._minDistance<=vt._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ol&&arguments[1]instanceof pa){var yn=arguments[0],vn=arguments[1],wn=arguments[2],un=yn.getCoordinate();if(Gr.EXTERIOR!==this._ptLocator.locate(un,vn))return this._minDistance=0,wn[0]=yn,wn[1]=new ol(vn,un),null}}},Ra.prototype.computeMinDistanceLinesPoints=function(vt,_t,wt){for(var Tt=this,At=0;At<vt.size();At++)for(var Ot=vt.get(At),Nt=0;Nt<_t.size();Nt++){var jt=_t.get(Nt);if(Tt.computeMinDistance(Ot,jt,wt),Tt._minDistance<=Tt._terminateDistance)return null}},Ra.prototype.computeFacetDistance=function(){var vt=new Array(2).fill(null),_t=Ha.getLines(this._geom[0]),wt=Ha.getLines(this._geom[1]),Tt=wh.getPoints(this._geom[0]),At=wh.getPoints(this._geom[1]);return this.computeMinDistanceLines(_t,wt,vt),this.updateMinDistance(vt,!1),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistanceLinesPoints(_t,At,vt),this.updateMinDistance(vt,!1),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistanceLinesPoints(wt,Tt,vt),this.updateMinDistance(vt,!0),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistancePoints(Tt,At,vt),void this.updateMinDistance(vt,!1))))},Ra.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ra.prototype.updateMinDistance=function(vt,_t){if(vt[0]===null)return null;_t?(this._minDistanceLocation[0]=vt[1],this._minDistanceLocation[1]=vt[0]):(this._minDistanceLocation[0]=vt[0],this._minDistanceLocation[1]=vt[1])},Ra.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ra.prototype.computeMinDistance=function(){var vt=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Bs&&arguments[1]instanceof Ll){var _t=arguments[0],wt=arguments[1],Tt=arguments[2];if(_t.getEnvelopeInternal().distance(wt.getEnvelopeInternal())>this._minDistance)return null;for(var At=_t.getCoordinates(),Ot=wt.getCoordinate(),Nt=0;Nt<At.length-1;Nt++){var jt=Si.distancePointLine(Ot,At[Nt],At[Nt+1]);if(jt<vt._minDistance){vt._minDistance=jt;var Gt=new Hi(At[Nt],At[Nt+1]),qt=Gt.closestPoint(Ot);Tt[0]=new ol(_t,Nt,qt),Tt[1]=new ol(wt,0,Ot)}if(vt._minDistance<=vt._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Bs&&arguments[1]instanceof Bs){var en=arguments[0],Xt=arguments[1],sn=arguments[2];if(en.getEnvelopeInternal().distance(Xt.getEnvelopeInternal())>this._minDistance)return null;for(var yn=en.getCoordinates(),vn=Xt.getCoordinates(),wn=0;wn<yn.length-1;wn++)for(var un=0;un<vn.length-1;un++){var Fn=Si.distanceLineLine(yn[wn],yn[wn+1],vn[un],vn[un+1]);if(Fn<vt._minDistance){vt._minDistance=Fn;var Qn=new Hi(yn[wn],yn[wn+1]),_n=new Hi(vn[un],vn[un+1]),Bn=Qn.closestPoints(_n);sn[0]=new ol(en,wn,Bn[0]),sn[1]=new ol(Xt,un,Bn[1])}if(vt._minDistance<=vt._terminateDistance)return null}}}},Ra.prototype.computeMinDistancePoints=function(vt,_t,wt){for(var Tt=this,At=0;At<vt.size();At++)for(var Ot=vt.get(At),Nt=0;Nt<_t.size();Nt++){var jt=_t.get(Nt),Gt=Ot.getCoordinate().distance(jt.getCoordinate());if(Gt<Tt._minDistance&&(Tt._minDistance=Gt,wt[0]=new ol(Ot,0,Ot.getCoordinate()),wt[1]=new ol(jt,0,jt.getCoordinate())),Tt._minDistance<=Tt._terminateDistance)return null}},Ra.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new Ds("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ra.prototype.computeMinDistanceLines=function(vt,_t,wt){for(var Tt=this,At=0;At<vt.size();At++)for(var Ot=vt.get(At),Nt=0;Nt<_t.size();Nt++){var jt=_t.get(Nt);if(Tt.computeMinDistance(Ot,jt,wt),Tt._minDistance<=Tt._terminateDistance)return null}},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra},Ra.distance=function(vt,_t){return new Ra(vt,_t).distance()},Ra.isWithinDistance=function(vt,_t,wt){return new Ra(vt,_t,wt).distance()<=wt},Ra.nearestPoints=function(vt,_t){return new Ra(vt,_t).nearestPoints()};var Ka=function(){this._pt=[new Dr,new Dr],this._distance=ho.NaN,this._isNull=!0};Ka.prototype.getCoordinates=function(){return this._pt},Ka.prototype.getCoordinate=function(vt){return this._pt[vt]},Ka.prototype.setMinimum=function(){if(arguments.length===1){var vt=arguments[0];this.setMinimum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(_t,wt),null;var Tt=_t.distance(wt);Tt<this._distance&&this.initialize(_t,wt,Tt)}},Ka.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var vt=arguments[0],_t=arguments[1];this._pt[0].setCoordinate(vt),this._pt[1].setCoordinate(_t),this._distance=vt.distance(_t),this._isNull=!1}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._pt[0].setCoordinate(wt),this._pt[1].setCoordinate(Tt),this._distance=At,this._isNull=!1}},Ka.prototype.toString=function(){return yc.toLineString(this._pt[0],this._pt[1])},Ka.prototype.getDistance=function(){return this._distance},Ka.prototype.setMaximum=function(){if(arguments.length===1){var vt=arguments[0];this.setMaximum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(_t,wt),null;var Tt=_t.distance(wt);Tt>this._distance&&this.initialize(_t,wt,Tt)}},Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka};var Ac=function(){};Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.computeDistance=function(){if(arguments[2]instanceof Ka&&arguments[0]instanceof Bs&&arguments[1]instanceof Dr)for(var vt=arguments[0],_t=arguments[1],wt=arguments[2],Tt=new Hi,At=vt.getCoordinates(),Ot=0;Ot<At.length-1;Ot++){Tt.setCoordinates(At[Ot],At[Ot+1]);var Nt=Tt.closestPoint(_t);wt.setMinimum(Nt,_t)}else if(arguments[2]instanceof Ka&&arguments[0]instanceof pa&&arguments[1]instanceof Dr){var jt=arguments[0],Gt=arguments[1],qt=arguments[2];Ac.computeDistance(jt.getExteriorRing(),Gt,qt);for(var en=0;en<jt.getNumInteriorRing();en++)Ac.computeDistance(jt.getInteriorRingN(en),Gt,qt)}else if(arguments[2]instanceof Ka&&arguments[0]instanceof Qi&&arguments[1]instanceof Dr){var Xt=arguments[0],sn=arguments[1],yn=arguments[2];if(Xt instanceof Bs)Ac.computeDistance(Xt,sn,yn);else if(Xt instanceof pa)Ac.computeDistance(Xt,sn,yn);else if(Xt instanceof rl)for(var vn=Xt,wn=0;wn<vn.getNumGeometries();wn++){var un=vn.getGeometryN(wn);Ac.computeDistance(un,sn,yn)}else yn.setMinimum(Xt.getCoordinate(),sn)}else if(arguments[2]instanceof Ka&&arguments[0]instanceof Hi&&arguments[1]instanceof Dr){var Fn=arguments[0],Qn=arguments[1],_n=arguments[2],Bn=Fn.closestPoint(Qn);_n.setMinimum(Bn,Qn)}};var Gl=function(){this._g0=null,this._g1=null,this._ptDist=new Ka,this._densifyFrac=0;var vt=arguments[0],_t=arguments[1];this._g0=vt,this._g1=_t},Hd={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Gl.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Gl.prototype.setDensifyFraction=function(vt){if(vt>1||vt<=0)throw new Ds("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=vt},Gl.prototype.compute=function(vt,_t){this.computeOrientedDistance(vt,_t,this._ptDist),this.computeOrientedDistance(_t,vt,this._ptDist)},Gl.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Gl.prototype.computeOrientedDistance=function(vt,_t,wt){var Tt=new jd(_t);if(vt.apply(Tt),wt.setMaximum(Tt.getMaxPointDistance()),this._densifyFrac>0){var At=new Eh(_t,this._densifyFrac);vt.apply(At),wt.setMaximum(At.getMaxPointDistance())}},Gl.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.distance=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],wt=new Gl(vt,_t);return wt.distance()}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Nt=new Gl(Tt,At);return Nt.setDensifyFraction(Ot),Nt.distance()}},Hd.MaxPointDistanceFilter.get=function(){return jd},Hd.MaxDensifiedByFractionDistanceFilter.get=function(){return Eh},Object.defineProperties(Gl,Hd);var jd=function(){this._maxPtDist=new Ka,this._minPtDist=new Ka,this._euclideanDist=new Ac,this._geom=null;var vt=arguments[0];this._geom=vt};jd.prototype.filter=function(vt){this._minPtDist.initialize(),Ac.computeDistance(this._geom,vt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},jd.prototype.getMaxPointDistance=function(){return this._maxPtDist},jd.prototype.interfaces_=function(){return[hu]},jd.prototype.getClass=function(){return jd};var Eh=function(){this._maxPtDist=new Ka,this._minPtDist=new Ka,this._geom=null,this._numSubSegs=0;var vt=arguments[0],_t=arguments[1];this._geom=vt,this._numSubSegs=Math.trunc(Math.round(1/_t))};Eh.prototype.filter=function(vt,_t){var wt=this;if(_t===0)return null;for(var Tt=vt.getCoordinate(_t-1),At=vt.getCoordinate(_t),Ot=(At.x-Tt.x)/this._numSubSegs,Nt=(At.y-Tt.y)/this._numSubSegs,jt=0;jt<this._numSubSegs;jt++){var Gt=Tt.x+jt*Ot,qt=Tt.y+jt*Nt,en=new Dr(Gt,qt);wt._minPtDist.initialize(),Ac.computeDistance(wt._geom,en,wt._minPtDist),wt._maxPtDist.setMaximum(wt._minPtDist)}},Eh.prototype.isDone=function(){return!1},Eh.prototype.isGeometryChanged=function(){return!1},Eh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Eh.prototype.interfaces_=function(){return[bc]},Eh.prototype.getClass=function(){return Eh};var Rl=function(vt,_t,wt){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=vt||null,this._bufDistance=_t||null,this._result=wt||null},D0={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Rl.prototype.checkMaximumDistance=function(vt,_t,wt){var Tt=new Gl(_t,vt);if(Tt.setDensifyFraction(.25),this._maxDistanceFound=Tt.orientedDistance(),this._maxDistanceFound>wt){this._isValid=!1;var At=Tt.getCoordinates();this._errorLocation=At[1],this._errorIndicator=vt.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+yc.toLineString(At[0],At[1])+")"}},Rl.prototype.isValid=function(){var vt=Math.abs(this._bufDistance),_t=Rl.MAX_DISTANCE_DIFF_FRAC*vt;return this._minValidDistance=vt-_t,this._maxValidDistance=vt+_t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Rl.VERBOSE&&za.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Rl.prototype.checkNegativeValid=function(){if(!(this._input instanceof pa||this._input instanceof gu||this._input instanceof rl))return null;var vt=this.getPolygonLines(this._input);if(this.checkMinimumDistance(vt,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(vt,this._result,this._maxValidDistance)},Rl.prototype.getErrorIndicator=function(){return this._errorIndicator},Rl.prototype.checkMinimumDistance=function(vt,_t,wt){var Tt=new Ra(vt,_t,wt);if(this._minDistanceFound=Tt.distance(),this._minDistanceFound<wt){this._isValid=!1;var At=Tt.nearestPoints();this._errorLocation=Tt.nearestPoints()[1],this._errorIndicator=vt.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+yc.toLineString(At[0],At[1])+" )"}},Rl.prototype.checkPositiveValid=function(){var vt=this._result.getBoundary();if(this.checkMinimumDistance(this._input,vt,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,vt,this._maxValidDistance)},Rl.prototype.getErrorLocation=function(){return this._errorLocation},Rl.prototype.getPolygonLines=function(vt){for(var _t=new vi,wt=new Ha(_t),Tt=Bu.getPolygons(vt).iterator();Tt.hasNext();)Tt.next().apply(wt);return vt.getFactory().buildGeometry(_t)},Rl.prototype.getErrorMessage=function(){return this._errMsg},Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl},D0.VERBOSE.get=function(){return!1},D0.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(Rl,D0);var ja=function(vt,_t,wt){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=vt||null,this._distance=_t||null,this._result=wt||null},B0={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ja.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ja.prototype.checkEnvelope=function(){if(this._distance<0)return null;var vt=this._distance*ja.MAX_ENV_DIFF_FRAC;vt===0&&(vt=.001);var _t=new Vi(this._input.getEnvelopeInternal());_t.expandBy(this._distance);var wt=new Vi(this._result.getEnvelopeInternal());wt.expandBy(vt),wt.contains(_t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(wt)),this.report("Envelope")},ja.prototype.checkDistance=function(){var vt=new Rl(this._input,this._distance,this._result);vt.isValid()||(this._isValid=!1,this._errorMsg=vt.getErrorMessage(),this._errorLocation=vt.getErrorLocation(),this._errorIndicator=vt.getErrorIndicator()),this.report("Distance")},ja.prototype.checkArea=function(){var vt=this._input.getArea(),_t=this._result.getArea();this._distance>0&&vt>_t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&vt<_t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ja.prototype.checkPolygonal=function(){this._result instanceof pa||this._result instanceof gu||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ja.prototype.getErrorIndicator=function(){return this._errorIndicator},ja.prototype.getErrorLocation=function(){return this._errorLocation},ja.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ja.prototype.report=function(vt){if(!ja.VERBOSE)return null;za.out.println("Check "+vt+": "+(this._isValid?"passed":"FAILED"))},ja.prototype.getErrorMessage=function(){return this._errorMsg},ja.prototype.interfaces_=function(){return[]},ja.prototype.getClass=function(){return ja},ja.isValidMsg=function(vt,_t,wt){var Tt=new ja(vt,_t,wt);return Tt.isValid()?null:Tt.getErrorMessage()},ja.isValid=function(vt,_t,wt){return!!new ja(vt,_t,wt).isValid()},B0.VERBOSE.get=function(){return!1},B0.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(ja,B0);var Zc=function(){this._pts=null,this._data=null;var vt=arguments[0],_t=arguments[1];this._pts=vt,this._data=_t};Zc.prototype.getCoordinates=function(){return this._pts},Zc.prototype.size=function(){return this._pts.length},Zc.prototype.getCoordinate=function(vt){return this._pts[vt]},Zc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zc.prototype.getSegmentOctant=function(vt){return vt===this._pts.length-1?-1:Tc.octant(this.getCoordinate(vt),this.getCoordinate(vt+1))},Zc.prototype.setData=function(vt){this._data=vt},Zc.prototype.getData=function(){return this._data},Zc.prototype.toString=function(){return yc.toLineString(new Ks(this._pts))},Zc.prototype.interfaces_=function(){return[ga]},Zc.prototype.getClass=function(){return Zc};var Ma=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new vi,this._intersectionCount=0,this._keepIntersections=!0;var vt=arguments[0];this._li=vt,this._interiorIntersection=null};Ma.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ma.prototype.setCheckEndSegmentsOnly=function(vt){this._isCheckEndSegmentsOnly=vt},Ma.prototype.getIntersectionSegments=function(){return this._intSegments},Ma.prototype.count=function(){return this._intersectionCount},Ma.prototype.getIntersections=function(){return this._intersections},Ma.prototype.setFindAllIntersections=function(vt){this._findAllIntersections=vt},Ma.prototype.setKeepIntersections=function(vt){this._keepIntersections=vt},Ma.prototype.processIntersections=function(vt,_t,wt,Tt){if(!this._findAllIntersections&&this.hasIntersection()||vt===wt&&_t===Tt||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(vt,_t)||this.isEndSegment(wt,Tt)))return null;var At=vt.getCoordinates()[_t],Ot=vt.getCoordinates()[_t+1],Nt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Ot,Nt,jt),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=At,this._intSegments[1]=Ot,this._intSegments[2]=Nt,this._intSegments[3]=jt,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ma.prototype.isEndSegment=function(vt,_t){return _t===0||_t>=vt.size()-2},Ma.prototype.hasIntersection=function(){return this._interiorIntersection!==null},Ma.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},Ma.prototype.interfaces_=function(){return[Qh]},Ma.prototype.getClass=function(){return Ma},Ma.createAllIntersectionsFinder=function(vt){var _t=new Ma(vt);return _t.setFindAllIntersections(!0),_t},Ma.createAnyIntersectionFinder=function(vt){return new Ma(vt)},Ma.createIntersectionCounter=function(vt){var _t=new Ma(vt);return _t.setFindAllIntersections(!0),_t.setKeepIntersections(!1),_t};var sc=function(){this._li=new ph,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var vt=arguments[0];this._segStrings=vt};sc.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},sc.prototype.getIntersections=function(){return this._segInt.getIntersections()},sc.prototype.isValid=function(){return this.execute(),this._isValid},sc.prototype.setFindAllIntersections=function(vt){this._findAllIntersections=vt},sc.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ma(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var vt=new N0;if(vt.setSegmentIntersector(this._segInt),vt.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},sc.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Du(this.getErrorMessage(),this._segInt.getInteriorIntersection())},sc.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var vt=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+yc.toLineString(vt[0],vt[1])+" and "+yc.toLineString(vt[2],vt[3])},sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.computeIntersections=function(vt){var _t=new sc(vt);return _t.setFindAllIntersections(!0),_t.isValid(),_t.getIntersections()};var td=function vt(){this._nv=null;var _t=arguments[0];this._nv=new sc(vt.toSegmentStrings(_t))};td.prototype.checkValid=function(){this._nv.checkValid()},td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td},td.toSegmentStrings=function(vt){for(var _t=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();_t.add(new Zc(Tt.getCoordinates(),Tt))}return _t},td.checkValid=function(vt){new td(vt).checkValid()};var Vd=function(vt){this._mapOp=vt};Vd.prototype.map=function(vt){for(var _t=new vi,wt=0;wt<vt.getNumGeometries();wt++){var Tt=this._mapOp.map(vt.getGeometryN(wt));Tt.isEmpty()||_t.add(Tt)}return vt.getFactory().createGeometryCollection(Io.toGeometryArray(_t))},Vd.prototype.interfaces_=function(){return[]},Vd.prototype.getClass=function(){return Vd},Vd.map=function(vt,_t){return new Vd(_t).map(vt)};var Kc=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new vi,this._resultLineList=new vi;var vt=arguments[0],_t=arguments[1],wt=arguments[2];this._op=vt,this._geometryFactory=_t,this._ptLocator=wt};Kc.prototype.collectLines=function(vt){for(var _t=this,wt=this._op.getGraph().getEdgeEnds().iterator();wt.hasNext();){var Tt=wt.next();_t.collectLineEdge(Tt,vt,_t._lineEdgesList),_t.collectBoundaryTouchEdge(Tt,vt,_t._lineEdgesList)}},Kc.prototype.labelIsolatedLine=function(vt,_t){var wt=this._ptLocator.locate(vt.getCoordinate(),this._op.getArgGeometry(_t));vt.getLabel().setLocation(_t,wt)},Kc.prototype.build=function(vt){return this.findCoveredLineEdges(),this.collectLines(vt),this.buildLines(vt),this._resultLineList},Kc.prototype.collectLineEdge=function(vt,_t,wt){var Tt=vt.getLabel(),At=vt.getEdge();vt.isLineEdge()&&(vt.isVisited()||!yo.isResultOfOp(Tt,_t)||At.isCovered()||(wt.add(At),vt.setVisitedEdge(!0)))},Kc.prototype.findCoveredLineEdges=function(){for(var vt=this._op.getGraph().getNodes().iterator();vt.hasNext();)vt.next().getEdges().findCoveredLineEdges();for(var _t=this._op.getGraph().getEdgeEnds().iterator();_t.hasNext();){var wt=_t.next(),Tt=wt.getEdge();if(wt.isLineEdge()&&!Tt.isCoveredSet()){var At=this._op.isCoveredByA(wt.getCoordinate());Tt.setCovered(At)}}},Kc.prototype.labelIsolatedLines=function(vt){for(var _t=vt.iterator();_t.hasNext();){var wt=_t.next(),Tt=wt.getLabel();wt.isIsolated()&&(Tt.isNull(0)?this.labelIsolatedLine(wt,0):this.labelIsolatedLine(wt,1))}},Kc.prototype.buildLines=function(vt){for(var _t=this._lineEdgesList.iterator();_t.hasNext();){var wt=_t.next(),Tt=this._geometryFactory.createLineString(wt.getCoordinates());this._resultLineList.add(Tt),wt.setInResult(!0)}},Kc.prototype.collectBoundaryTouchEdge=function(vt,_t,wt){var Tt=vt.getLabel();return vt.isLineEdge()||vt.isVisited()||vt.isInteriorAreaEdge()||vt.getEdge().isInResult()?null:(vo.isTrue(!(vt.isInResult()||vt.getSym().isInResult())||!vt.getEdge().isInResult()),void(yo.isResultOfOp(Tt,_t)&&_t===yo.INTERSECTION&&(wt.add(vt.getEdge()),vt.setVisitedEdge(!0))))},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Ud=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new vi;var vt=arguments[0],_t=arguments[1];this._op=vt,this._geometryFactory=_t};Ud.prototype.filterCoveredNodeToPoint=function(vt){var _t=vt.getCoordinate();if(!this._op.isCoveredByLA(_t)){var wt=this._geometryFactory.createPoint(_t);this._resultPointList.add(wt)}},Ud.prototype.extractNonCoveredResultNodes=function(vt){for(var _t=this._op.getGraph().getNodes().iterator();_t.hasNext();){var wt=_t.next();if(!wt.isInResult()&&!wt.isIncidentEdgeInResult()&&(wt.getEdges().getDegree()===0||vt===yo.INTERSECTION)){var Tt=wt.getLabel();yo.isResultOfOp(Tt,vt)&&this.filterCoveredNodeToPoint(wt)}}},Ud.prototype.build=function(vt){return this.extractNonCoveredResultNodes(vt),this._resultPointList},Ud.prototype.interfaces_=function(){return[]},Ud.prototype.getClass=function(){return Ud};var sl=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};sl.prototype.transformPoint=function(vt,_t){return this._factory.createPoint(this.transformCoordinates(vt.getCoordinateSequence(),vt))},sl.prototype.transformPolygon=function(vt,_t){var wt=!0,Tt=this.transformLinearRing(vt.getExteriorRing(),vt);Tt!==null&&Tt instanceof pu&&!Tt.isEmpty()||(wt=!1);for(var At=new vi,Ot=0;Ot<vt.getNumInteriorRing();Ot++){var Nt=this.transformLinearRing(vt.getInteriorRingN(Ot),vt);Nt===null||Nt.isEmpty()||(Nt instanceof pu||(wt=!1),At.add(Nt))}if(wt)return this._factory.createPolygon(Tt,At.toArray([]));var jt=new vi;return Tt!==null&&jt.add(Tt),jt.addAll(At),this._factory.buildGeometry(jt)},sl.prototype.createCoordinateSequence=function(vt){return this._factory.getCoordinateSequenceFactory().create(vt)},sl.prototype.getInputGeometry=function(){return this._inputGeom},sl.prototype.transformMultiLineString=function(vt,_t){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformLineString(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||wt.add(At))}return this._factory.buildGeometry(wt)},sl.prototype.transformCoordinates=function(vt,_t){return this.copy(vt)},sl.prototype.transformLineString=function(vt,_t){return this._factory.createLineString(this.transformCoordinates(vt.getCoordinateSequence(),vt))},sl.prototype.transformMultiPoint=function(vt,_t){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformPoint(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||wt.add(At))}return this._factory.buildGeometry(wt)},sl.prototype.transformMultiPolygon=function(vt,_t){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformPolygon(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||wt.add(At))}return this._factory.buildGeometry(wt)},sl.prototype.copy=function(vt){return vt.copy()},sl.prototype.transformGeometryCollection=function(vt,_t){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transform(vt.getGeometryN(Tt));At!==null&&(this._pruneEmptyGeometry&&At.isEmpty()||wt.add(At))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Io.toGeometryArray(wt)):this._factory.buildGeometry(wt)},sl.prototype.transform=function(vt){if(this._inputGeom=vt,this._factory=vt.getFactory(),vt instanceof Ll)return this.transformPoint(vt,null);if(vt instanceof Df)return this.transformMultiPoint(vt,null);if(vt instanceof pu)return this.transformLinearRing(vt,null);if(vt instanceof Bs)return this.transformLineString(vt,null);if(vt instanceof gh)return this.transformMultiLineString(vt,null);if(vt instanceof pa)return this.transformPolygon(vt,null);if(vt instanceof gu)return this.transformMultiPolygon(vt,null);if(vt instanceof rl)return this.transformGeometryCollection(vt,null);throw new Ds("Unknown Geometry subtype: "+vt.getClass().getName())},sl.prototype.transformLinearRing=function(vt,_t){var wt=this.transformCoordinates(vt.getCoordinateSequence(),vt);if(wt===null)return this._factory.createLinearRing(null);var Tt=wt.size();return Tt>0&&Tt<4&&!this._preserveType?this._factory.createLineString(wt):this._factory.createLinearRing(wt)},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl};var cs=function vt(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Hi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Bs&&typeof arguments[1]=="number"){var _t=arguments[0],wt=arguments[1];vt.call(this,_t.getCoordinates(),wt)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var Tt=arguments[0],At=arguments[1];this._srcPts=Tt,this._isClosed=vt.isClosed(Tt),this._snapTolerance=At}};cs.prototype.snapVertices=function(vt,_t){for(var wt=this._isClosed?vt.size()-1:vt.size(),Tt=0;Tt<wt;Tt++){var At=vt.get(Tt),Ot=this.findSnapForVertex(At,_t);Ot!==null&&(vt.set(Tt,new Dr(Ot)),Tt===0&&this._isClosed&&vt.set(vt.size()-1,new Dr(Ot)))}},cs.prototype.findSnapForVertex=function(vt,_t){for(var wt=0;wt<_t.length;wt++){if(vt.equals2D(_t[wt]))return null;if(vt.distance(_t[wt])<this._snapTolerance)return _t[wt]}return null},cs.prototype.snapTo=function(vt){var _t=new zp(this._srcPts);return this.snapVertices(_t,vt),this.snapSegments(_t,vt),_t.toCoordinateArray()},cs.prototype.snapSegments=function(vt,_t){if(_t.length===0)return null;var wt=_t.length;_t[0].equals2D(_t[_t.length-1])&&(wt=_t.length-1);for(var Tt=0;Tt<wt;Tt++){var At=_t[Tt],Ot=this.findSegmentIndexToSnap(At,vt);Ot>=0&&vt.add(Ot+1,new Dr(At),!1)}},cs.prototype.findSegmentIndexToSnap=function(vt,_t){for(var wt=this,Tt=ho.MAX_VALUE,At=-1,Ot=0;Ot<_t.size()-1;Ot++){if(wt._seg.p0=_t.get(Ot),wt._seg.p1=_t.get(Ot+1),wt._seg.p0.equals2D(vt)||wt._seg.p1.equals2D(vt)){if(wt._allowSnappingToSourceVertices)continue;return-1}var Nt=wt._seg.distance(vt);Nt<wt._snapTolerance&&Nt<Tt&&(Tt=Nt,At=Ot)}return At},cs.prototype.setAllowSnappingToSourceVertices=function(vt){this._allowSnappingToSourceVertices=vt},cs.prototype.interfaces_=function(){return[]},cs.prototype.getClass=function(){return cs},cs.isClosed=function(vt){return!(vt.length<=1)&&vt[0].equals2D(vt[vt.length-1])};var Bo=function(vt){this._srcGeom=vt||null},um={SNAP_PRECISION_FACTOR:{configurable:!0}};Bo.prototype.snapTo=function(vt,_t){var wt=this.extractTargetCoordinates(vt);return new hm(_t,wt).transform(this._srcGeom)},Bo.prototype.snapToSelf=function(vt,_t){var wt=this.extractTargetCoordinates(this._srcGeom),Tt=new hm(vt,wt,!0).transform(this._srcGeom),At=Tt;return _t&&to(At,mh)&&(At=Tt.buffer(0)),At},Bo.prototype.computeSnapTolerance=function(vt){return this.computeMinimumSegmentLength(vt)/10},Bo.prototype.extractTargetCoordinates=function(vt){for(var _t=new _c,wt=vt.getCoordinates(),Tt=0;Tt<wt.length;Tt++)_t.add(wt[Tt]);return _t.toArray(new Array(0).fill(null))},Bo.prototype.computeMinimumSegmentLength=function(vt){for(var _t=ho.MAX_VALUE,wt=0;wt<vt.length-1;wt++){var Tt=vt[wt].distance(vt[wt+1]);Tt<_t&&(_t=Tt)}return _t},Bo.prototype.interfaces_=function(){return[]},Bo.prototype.getClass=function(){return Bo},Bo.snap=function(vt,_t,wt){var Tt=new Array(2).fill(null),At=new Bo(vt);Tt[0]=At.snapTo(_t,wt);var Ot=new Bo(_t);return Tt[1]=Ot.snapTo(Tt[0],wt),Tt},Bo.computeOverlaySnapTolerance=function(){if(arguments.length===1){var vt=arguments[0],_t=Bo.computeSizeBasedSnapTolerance(vt),wt=vt.getPrecisionModel();if(wt.getType()===ps.FIXED){var Tt=1/wt.getScale()*2/1.415;Tt>_t&&(_t=Tt)}return _t}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return Math.min(Bo.computeOverlaySnapTolerance(At),Bo.computeOverlaySnapTolerance(Ot))}},Bo.computeSizeBasedSnapTolerance=function(vt){var _t=vt.getEnvelopeInternal();return Math.min(_t.getHeight(),_t.getWidth())*Bo.SNAP_PRECISION_FACTOR},Bo.snapToSelf=function(vt,_t,wt){return new Bo(vt).snapToSelf(_t,wt)},um.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Bo,um);var hm=function(vt){function _t(wt,Tt,At){vt.call(this),this._snapTolerance=wt||null,this._snapPts=Tt||null,this._isSelfSnap=At!==void 0&&At}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.snapLine=function(wt,Tt){var At=new cs(wt,this._snapTolerance);return At.setAllowSnappingToSourceVertices(this._isSelfSnap),At.snapTo(Tt)},_t.prototype.transformCoordinates=function(wt,Tt){var At=wt.toCoordinateArray(),Ot=this.snapLine(At,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(Ot)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(sl),Na=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Na.prototype.getCommon=function(){return ho.longBitsToDouble(this._commonBits)},Na.prototype.add=function(vt){var _t=ho.doubleToLongBits(vt);return this._isFirst?(this._commonBits=_t,this._commonSignExp=Na.signExpBits(this._commonBits),this._isFirst=!1,null):Na.signExpBits(_t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Na.numCommonMostSigMantissaBits(this._commonBits,_t),void(this._commonBits=Na.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Na.prototype.toString=function(){if(arguments.length===1){var vt=arguments[0],_t=ho.longBitsToDouble(vt),wt=ho.toBinaryString(vt),Tt="0000000000000000000000000000000000000000000000000000000000000000"+wt,At=Tt.substring(Tt.length-64),Ot=At.substring(0,1)+"  "+At.substring(1,12)+"(exp) "+At.substring(12)+" [ "+_t+" ]";return Ot}},Na.prototype.interfaces_=function(){return[]},Na.prototype.getClass=function(){return Na},Na.getBit=function(vt,_t){return(vt&1<<_t)!=0?1:0},Na.signExpBits=function(vt){return vt>>52},Na.zeroLowerBits=function(vt,_t){return vt&~((1<<_t)-1)},Na.numCommonMostSigMantissaBits=function(vt,_t){for(var wt=0,Tt=52;Tt>=0;Tt--){if(Na.getBit(vt,Tt)!==Na.getBit(_t,Tt))return wt;wt++}return 52};var Jc=function(){this._commonCoord=null,this._ccFilter=new zu},Uf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Jc.prototype.addCommonBits=function(vt){var _t=new Qc(this._commonCoord);vt.apply(_t),vt.geometryChanged()},Jc.prototype.removeCommonBits=function(vt){if(this._commonCoord.x===0&&this._commonCoord.y===0)return vt;var _t=new Dr(this._commonCoord);_t.x=-_t.x,_t.y=-_t.y;var wt=new Qc(_t);return vt.apply(wt),vt.geometryChanged(),vt},Jc.prototype.getCommonCoordinate=function(){return this._commonCoord},Jc.prototype.add=function(vt){vt.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Uf.CommonCoordinateFilter.get=function(){return zu},Uf.Translater.get=function(){return Qc},Object.defineProperties(Jc,Uf);var zu=function(){this._commonBitsX=new Na,this._commonBitsY=new Na};zu.prototype.filter=function(vt){this._commonBitsX.add(vt.x),this._commonBitsY.add(vt.y)},zu.prototype.getCommonCoordinate=function(){return new Dr(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},zu.prototype.interfaces_=function(){return[hu]},zu.prototype.getClass=function(){return zu};var Qc=function(){this.trans=null;var vt=arguments[0];this.trans=vt};Qc.prototype.filter=function(vt,_t){var wt=vt.getOrdinate(_t,0)+this.trans.x,Tt=vt.getOrdinate(_t,1)+this.trans.y;vt.setOrdinate(_t,0,wt),vt.setOrdinate(_t,1,Tt)},Qc.prototype.isDone=function(){return!1},Qc.prototype.isGeometryChanged=function(){return!0},Qc.prototype.interfaces_=function(){return[bc]},Qc.prototype.getClass=function(){return Qc};var ya=function(vt,_t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=vt,this._geom[1]=_t,this.computeSnapTolerance()};ya.prototype.selfSnap=function(vt){return new Bo(vt).snapTo(vt,this._snapTolerance)},ya.prototype.removeCommonBits=function(vt){this._cbr=new Jc,this._cbr.add(vt[0]),this._cbr.add(vt[1]);var _t=new Array(2).fill(null);return _t[0]=this._cbr.removeCommonBits(vt[0].copy()),_t[1]=this._cbr.removeCommonBits(vt[1].copy()),_t},ya.prototype.prepareResult=function(vt){return this._cbr.addCommonBits(vt),vt},ya.prototype.getResultGeometry=function(vt){var _t=this.snap(this._geom),wt=yo.overlayOp(_t[0],_t[1],vt);return this.prepareResult(wt)},ya.prototype.checkValid=function(vt){vt.isValid()||za.out.println("Snapped geometry is invalid")},ya.prototype.computeSnapTolerance=function(){this._snapTolerance=Bo.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ya.prototype.snap=function(vt){var _t=this.removeCommonBits(vt);return Bo.snap(_t[0],_t[1],this._snapTolerance)},ya.prototype.interfaces_=function(){return[]},ya.prototype.getClass=function(){return ya},ya.overlayOp=function(vt,_t,wt){return new ya(vt,_t).getResultGeometry(wt)},ya.union=function(vt,_t){return ya.overlayOp(vt,_t,yo.UNION)},ya.intersection=function(vt,_t){return ya.overlayOp(vt,_t,yo.INTERSECTION)},ya.symDifference=function(vt,_t){return ya.overlayOp(vt,_t,yo.SYMDIFFERENCE)},ya.difference=function(vt,_t){return ya.overlayOp(vt,_t,yo.DIFFERENCE)};var Da=function(vt,_t){this._geom=new Array(2).fill(null),this._geom[0]=vt,this._geom[1]=_t};Da.prototype.getResultGeometry=function(vt){var _t=null,wt=!1,Tt=null;try{_t=yo.overlayOp(this._geom[0],this._geom[1],vt),wt=!0}catch(At){if(!(At instanceof Ru))throw At;Tt=At}if(!wt)try{_t=ya.overlayOp(this._geom[0],this._geom[1],vt)}catch(At){throw At instanceof Ru?Tt:At}return _t},Da.prototype.interfaces_=function(){return[]},Da.prototype.getClass=function(){return Da},Da.overlayOp=function(vt,_t,wt){return new Da(vt,_t).getResultGeometry(wt)},Da.union=function(vt,_t){return Da.overlayOp(vt,_t,yo.UNION)},Da.intersection=function(vt,_t){return Da.overlayOp(vt,_t,yo.INTERSECTION)},Da.symDifference=function(vt,_t){return Da.overlayOp(vt,_t,yo.SYMDIFFERENCE)},Da.difference=function(vt,_t){return Da.overlayOp(vt,_t,yo.DIFFERENCE)};var nd=function(){this.mce=null,this.chainIndex=null;var vt=arguments[0],_t=arguments[1];this.mce=vt,this.chainIndex=_t};nd.prototype.computeIntersections=function(vt,_t){this.mce.computeIntersectsForChain(this.chainIndex,vt.mce,vt.chainIndex,_t)},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd};var Ja=function vt(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var _t=arguments[0],wt=arguments[1];this._eventType=vt.DELETE,this._xValue=_t,this._insertEvent=wt}else if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];this._eventType=vt.INSERT,this._label=Tt,this._xValue=At,this._obj=Ot}},F0={INSERT:{configurable:!0},DELETE:{configurable:!0}};Ja.prototype.isDelete=function(){return this._eventType===Ja.DELETE},Ja.prototype.setDeleteEventIndex=function(vt){this._deleteEventIndex=vt},Ja.prototype.getObject=function(){return this._obj},Ja.prototype.compareTo=function(vt){var _t=vt;return this._xValue<_t._xValue?-1:this._xValue>_t._xValue?1:this._eventType<_t._eventType?-1:this._eventType>_t._eventType?1:0},Ja.prototype.getInsertEvent=function(){return this._insertEvent},Ja.prototype.isInsert=function(){return this._eventType===Ja.INSERT},Ja.prototype.isSameLabel=function(vt){return this._label!==null&&this._label===vt._label},Ja.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Ja.prototype.interfaces_=function(){return[Jl]},Ja.prototype.getClass=function(){return Ja},F0.INSERT.get=function(){return 1},F0.DELETE.get=function(){return 2},Object.defineProperties(Ja,F0);var Gd=function(){};Gd.prototype.interfaces_=function(){return[]},Gd.prototype.getClass=function(){return Gd};var va=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var vt=arguments[0],_t=arguments[1],wt=arguments[2];this._li=vt,this._includeProper=_t,this._recordIsolated=wt};va.prototype.isTrivialIntersection=function(vt,_t,wt,Tt){if(vt===wt&&this._li.getIntersectionNum()===1){if(va.isAdjacentSegments(_t,Tt))return!0;if(vt.isClosed()){var At=vt.getNumPoints()-1;if(_t===0&&Tt===At||Tt===0&&_t===At)return!0}}return!1},va.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},va.prototype.setIsDoneIfProperInt=function(vt){this._isDoneWhenProperInt=vt},va.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},va.prototype.isBoundaryPointInternal=function(vt,_t){for(var wt=_t.iterator();wt.hasNext();){var Tt=wt.next().getCoordinate();if(vt.isIntersection(Tt))return!0}return!1},va.prototype.hasProperIntersection=function(){return this._hasProper},va.prototype.hasIntersection=function(){return this._hasIntersection},va.prototype.isDone=function(){return this._isDone},va.prototype.isBoundaryPoint=function(vt,_t){return _t!==null&&(!!this.isBoundaryPointInternal(vt,_t[0])||!!this.isBoundaryPointInternal(vt,_t[1]))},va.prototype.setBoundaryNodes=function(vt,_t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=vt,this._bdyNodes[1]=_t},va.prototype.addIntersections=function(vt,_t,wt,Tt){if(vt===wt&&_t===Tt)return null;this.numTests++;var At=vt.getCoordinates()[_t],Ot=vt.getCoordinates()[_t+1],Nt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Ot,Nt,jt),this._li.hasIntersection()&&(this._recordIsolated&&(vt.setIsolated(!1),wt.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(vt,_t,wt,Tt)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(vt.addIntersections(this._li,_t,0),wt.addIntersections(this._li,Tt,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},va.prototype.interfaces_=function(){return[]},va.prototype.getClass=function(){return va},va.isAdjacentSegments=function(vt,_t){return Math.abs(vt-_t)===1};var l_=function(vt){function _t(){vt.call(this),this.events=new vi,this.nOverlaps=null}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.prepareEvents=function(){Cc.sort(this.events);for(var wt=0;wt<this.events.size();wt++){var Tt=this.events.get(wt);Tt.isDelete()&&Tt.getInsertEvent().setDeleteEventIndex(wt)}},_t.prototype.computeIntersections=function(){var wt=this;if(arguments.length===1){var Tt=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var At=0;At<this.events.size();At++){var Ot=wt.events.get(At);if(Ot.isInsert()&&wt.processOverlaps(At,Ot.getDeleteEventIndex(),Ot,Tt),Tt.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof va&&to(arguments[0],vc)&&to(arguments[1],vc)){var Nt=arguments[0],jt=arguments[1],Gt=arguments[2];this.addEdges(Nt,Nt),this.addEdges(jt,jt),this.computeIntersections(Gt)}else if(typeof arguments[2]=="boolean"&&to(arguments[0],vc)&&arguments[1]instanceof va){var qt=arguments[0],en=arguments[1],Xt=arguments[2];Xt?this.addEdges(qt,null):this.addEdges(qt),this.computeIntersections(en)}}},_t.prototype.addEdge=function(wt,Tt){for(var At=wt.getMonotoneChainEdge(),Ot=At.getStartIndexes(),Nt=0;Nt<Ot.length-1;Nt++){var jt=new nd(At,Nt),Gt=new Ja(Tt,At.getMinX(Nt),jt);this.events.add(Gt),this.events.add(new Ja(At.getMaxX(Nt),Gt))}},_t.prototype.processOverlaps=function(wt,Tt,At,Ot){for(var Nt=At.getObject(),jt=wt;jt<Tt;jt++){var Gt=this.events.get(jt);if(Gt.isInsert()){var qt=Gt.getObject();At.isSameLabel(Gt)||(Nt.computeIntersections(qt,Ot),this.nOverlaps++)}}},_t.prototype.addEdges=function(){var wt=this;if(arguments.length===1)for(var Tt=arguments[0],At=Tt.iterator();At.hasNext();){var Ot=At.next();wt.addEdge(Ot,Ot)}else if(arguments.length===2)for(var Nt=arguments[0],jt=arguments[1],Gt=Nt.iterator();Gt.hasNext();){var qt=Gt.next();wt.addEdge(qt,jt)}},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Gd),wu=function(){this._min=ho.POSITIVE_INFINITY,this._max=ho.NEGATIVE_INFINITY},Dy={NodeComparator:{configurable:!0}};wu.prototype.getMin=function(){return this._min},wu.prototype.intersects=function(vt,_t){return!(this._min>_t||this._max<vt)},wu.prototype.getMax=function(){return this._max},wu.prototype.toString=function(){return yc.toLineString(new Dr(this._min,0),new Dr(this._max,0))},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},Dy.NodeComparator.get=function(){return Qp},Object.defineProperties(wu,Dy);var Qp=function(){};Qp.prototype.compare=function(vt,_t){var wt=vt,Tt=_t,At=(wt._min+wt._max)/2,Ot=(Tt._min+Tt._max)/2;return At<Ot?-1:At>Ot?1:0},Qp.prototype.interfaces_=function(){return[kf]},Qp.prototype.getClass=function(){return Qp};var Lc=function(vt){function _t(){vt.call(this),this._item=null;var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._min=wt,this._max=Tt,this._item=At}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.query=function(wt,Tt,At){if(!this.intersects(wt,Tt))return null;At.visitItem(this._item)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(wu),By=function(vt){function _t(){vt.call(this),this._node1=null,this._node2=null;var wt=arguments[0],Tt=arguments[1];this._node1=wt,this._node2=Tt,this.buildExtent(this._node1,this._node2)}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.buildExtent=function(wt,Tt){this._min=Math.min(wt._min,Tt._min),this._max=Math.max(wt._max,Tt._max)},_t.prototype.query=function(wt,Tt,At){if(!this.intersects(wt,Tt))return null;this._node1!==null&&this._node1.query(wt,Tt,At),this._node2!==null&&this._node2.query(wt,Tt,At)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(wu),eu=function(){this._leaves=new vi,this._root=null,this._level=0};eu.prototype.buildTree=function(){Cc.sort(this._leaves,new wu.NodeComparator);for(var vt=this._leaves,_t=null,wt=new vi;;){if(this.buildLevel(vt,wt),wt.size()===1)return wt.get(0);_t=vt,vt=wt,wt=_t}},eu.prototype.insert=function(vt,_t,wt){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Lc(vt,_t,wt))},eu.prototype.query=function(vt,_t,wt){this.init(),this._root.query(vt,_t,wt)},eu.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},eu.prototype.printNode=function(vt){za.out.println(yc.toLineString(new Dr(vt._min,this._level),new Dr(vt._max,this._level)))},eu.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},eu.prototype.buildLevel=function(vt,_t){this._level++,_t.clear();for(var wt=0;wt<vt.size();wt+=2){var Tt=vt.get(wt);if((wt+1<vt.size()?vt.get(wt):null)===null)_t.add(Tt);else{var At=new By(vt.get(wt),vt.get(wt+1));_t.add(At)}}},eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu};var Gf=function(){this._items=new vi};Gf.prototype.visitItem=function(vt){this._items.add(vt)},Gf.prototype.getItems=function(){return this._items},Gf.prototype.interfaces_=function(){return[yh]},Gf.prototype.getClass=function(){return Gf};var Wf=function(){this._index=null;var vt=arguments[0];if(!to(vt,mh))throw new Ds("Argument must be Polygonal");this._index=new Sh(vt)},dm={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Wf.prototype.locate=function(vt){var _t=new jc(vt),wt=new qf(_t);return this._index.query(vt.y,vt.y,wt),_t.getLocation()},Wf.prototype.interfaces_=function(){return[ys]},Wf.prototype.getClass=function(){return Wf},dm.SegmentVisitor.get=function(){return qf},dm.IntervalIndexedGeometry.get=function(){return Sh},Object.defineProperties(Wf,dm);var qf=function(){this._counter=null;var vt=arguments[0];this._counter=vt};qf.prototype.visitItem=function(vt){var _t=vt;this._counter.countSegment(_t.getCoordinate(0),_t.getCoordinate(1))},qf.prototype.interfaces_=function(){return[yh]},qf.prototype.getClass=function(){return qf};var Sh=function(){this._index=new eu;var vt=arguments[0];this.init(vt)};Sh.prototype.init=function(vt){for(var _t=Ha.getLines(vt).iterator();_t.hasNext();){var wt=_t.next().getCoordinates();this.addLine(wt)}},Sh.prototype.addLine=function(vt){for(var _t=1;_t<vt.length;_t++){var wt=new Hi(vt[_t-1],vt[_t]),Tt=Math.min(wt.p0.y,wt.p1.y),At=Math.max(wt.p0.y,wt.p1.y);this._index.insert(Tt,At,wt)}},Sh.prototype.query=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],wt=new Gf;return this._index.query(vt,_t,wt),wt.getItems()}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];this._index.query(Tt,At,Ot)}},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var Yf=function(vt){function _t(){if(vt.call(this),this._parentGeom=null,this._lineEdgeMap=new ky,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ul,arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=tc.OGC_SFS_BOUNDARY_RULE;this._argIndex=wt,this._parentGeom=Tt,this._boundaryNodeRule=At,Tt!==null&&this.add(Tt)}else if(arguments.length===3){var Ot=arguments[0],Nt=arguments[1],jt=arguments[2];this._argIndex=Ot,this._parentGeom=Nt,this._boundaryNodeRule=jt,Nt!==null&&this.add(Nt)}}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.insertBoundaryPoint=function(wt,Tt){var At=this._nodes.addNode(Tt).getLabel(),Ot=1;At.getLocation(wt,di.ON)===Gr.BOUNDARY&&Ot++;var Nt=_t.determineBoundary(this._boundaryNodeRule,Ot);At.setLocation(wt,Nt)},_t.prototype.computeSelfNodes=function(){if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return this.computeSelfNodes(wt,Tt,!1)}if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Nt=arguments[2],jt=new va(At,!0,!1);jt.setIsDoneIfProperInt(Nt);var Gt=this.createEdgeSetIntersector(),qt=this._parentGeom instanceof pu||this._parentGeom instanceof pa||this._parentGeom instanceof gu,en=Ot||!qt;return Gt.computeIntersections(this._edges,jt,en),this.addSelfIntersectionNodes(this._argIndex),jt}},_t.prototype.computeSplitEdges=function(wt){for(var Tt=this._edges.iterator();Tt.hasNext();)Tt.next().eiList.addSplitEdges(wt)},_t.prototype.computeEdgeIntersections=function(wt,Tt,At){var Ot=new va(Tt,At,!0);return Ot.setBoundaryNodes(this.getBoundaryNodes(),wt.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,wt._edges,Ot),Ot},_t.prototype.getGeometry=function(){return this._parentGeom},_t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},_t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},_t.prototype.addPoint=function(){if(arguments[0]instanceof Ll){var wt=arguments[0],Tt=wt.getCoordinate();this.insertPoint(this._argIndex,Tt,Gr.INTERIOR)}else if(arguments[0]instanceof Dr){var At=arguments[0];this.insertPoint(this._argIndex,At,Gr.INTERIOR)}},_t.prototype.addPolygon=function(wt){this.addPolygonRing(wt.getExteriorRing(),Gr.EXTERIOR,Gr.INTERIOR);for(var Tt=0;Tt<wt.getNumInteriorRing();Tt++){var At=wt.getInteriorRingN(Tt);this.addPolygonRing(At,Gr.INTERIOR,Gr.EXTERIOR)}},_t.prototype.addEdge=function(wt){this.insertEdge(wt);var Tt=wt.getCoordinates();this.insertPoint(this._argIndex,Tt[0],Gr.BOUNDARY),this.insertPoint(this._argIndex,Tt[Tt.length-1],Gr.BOUNDARY)},_t.prototype.addLineString=function(wt){var Tt=Lo.removeRepeatedPoints(wt.getCoordinates());if(Tt.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=Tt[0],null;var At=new jf(Tt,new vs(this._argIndex,Gr.INTERIOR));this._lineEdgeMap.put(wt,At),this.insertEdge(At),vo.isTrue(Tt.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,Tt[0]),this.insertBoundaryPoint(this._argIndex,Tt[Tt.length-1])},_t.prototype.getInvalidPoint=function(){return this._invalidPoint},_t.prototype.getBoundaryPoints=function(){for(var wt=this.getBoundaryNodes(),Tt=new Array(wt.size()).fill(null),At=0,Ot=wt.iterator();Ot.hasNext();){var Nt=Ot.next();Tt[At++]=Nt.getCoordinate().copy()}return Tt},_t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},_t.prototype.addSelfIntersectionNode=function(wt,Tt,At){if(this.isBoundaryNode(wt,Tt))return null;At===Gr.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(wt,Tt):this.insertPoint(wt,Tt,At)},_t.prototype.addPolygonRing=function(wt,Tt,At){if(wt.isEmpty())return null;var Ot=Lo.removeRepeatedPoints(wt.getCoordinates());if(Ot.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=Ot[0],null;var Nt=Tt,jt=At;Si.isCCW(Ot)&&(Nt=At,jt=Tt);var Gt=new jf(Ot,new vs(this._argIndex,Gr.BOUNDARY,Nt,jt));this._lineEdgeMap.put(wt,Gt),this.insertEdge(Gt),this.insertPoint(this._argIndex,Ot[0],Gr.BOUNDARY)},_t.prototype.insertPoint=function(wt,Tt,At){var Ot=this._nodes.addNode(Tt),Nt=Ot.getLabel();Nt===null?Ot._label=new vs(wt,At):Nt.setLocation(wt,At)},_t.prototype.createEdgeSetIntersector=function(){return new l_},_t.prototype.addSelfIntersectionNodes=function(wt){for(var Tt=this._edges.iterator();Tt.hasNext();)for(var At=Tt.next(),Ot=At.getLabel().getLocation(wt),Nt=At.eiList.iterator();Nt.hasNext();){var jt=Nt.next();this.addSelfIntersectionNode(wt,jt.coord,Ot)}},_t.prototype.add=function(){if(arguments.length!==1)return vt.prototype.add.apply(this,arguments);var wt=arguments[0];if(wt.isEmpty())return null;if(wt instanceof gu&&(this._useBoundaryDeterminationRule=!1),wt instanceof pa)this.addPolygon(wt);else if(wt instanceof Bs)this.addLineString(wt);else if(wt instanceof Ll)this.addPoint(wt);else if(wt instanceof Df)this.addCollection(wt);else if(wt instanceof gh)this.addCollection(wt);else if(wt instanceof gu)this.addCollection(wt);else{if(!(wt instanceof rl))throw new Error(wt.getClass().getName());this.addCollection(wt)}},_t.prototype.addCollection=function(wt){for(var Tt=0;Tt<wt.getNumGeometries();Tt++){var At=wt.getGeometryN(Tt);this.add(At)}},_t.prototype.locate=function(wt){return to(this._parentGeom,mh)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Wf(this._parentGeom)),this._areaPtLocator.locate(wt)):this._ptLocator.locate(wt,this._parentGeom)},_t.prototype.findEdge=function(){if(arguments.length===1){var wt=arguments[0];return this._lineEdgeMap.get(wt)}return vt.prototype.findEdge.apply(this,arguments)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.determineBoundary=function(wt,Tt){return wt.isInBoundary(Tt)?Gr.BOUNDARY:Gr.INTERIOR},_t}(zs),Xf=function(){if(this._li=new ph,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var vt=arguments[0];this.setComputationPrecision(vt.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Yf(0,vt)}else if(arguments.length===2){var _t=arguments[0],wt=arguments[1],Tt=tc.OGC_SFS_BOUNDARY_RULE;_t.getPrecisionModel().compareTo(wt.getPrecisionModel())>=0?this.setComputationPrecision(_t.getPrecisionModel()):this.setComputationPrecision(wt.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yf(0,_t,Tt),this._arg[1]=new Yf(1,wt,Tt)}else if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Nt=arguments[2];At.getPrecisionModel().compareTo(Ot.getPrecisionModel())>=0?this.setComputationPrecision(At.getPrecisionModel()):this.setComputationPrecision(Ot.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yf(0,At,Nt),this._arg[1]=new Yf(1,Ot,Nt)}};Xf.prototype.getArgGeometry=function(vt){return this._arg[vt].getGeometry()},Xf.prototype.setComputationPrecision=function(vt){this._resultPrecisionModel=vt,this._li.setPrecisionModel(this._resultPrecisionModel)},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var rd=function(){};rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},rd.map=function(){if(arguments[0]instanceof Qi&&to(arguments[1],rd.MapOp)){for(var vt=arguments[0],_t=arguments[1],wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=_t.map(vt.getGeometryN(Tt));At!==null&&wt.add(At)}return vt.getFactory().buildGeometry(wt)}if(to(arguments[0],fa)&&to(arguments[1],rd.MapOp)){for(var Ot=arguments[0],Nt=arguments[1],jt=new vi,Gt=Ot.iterator();Gt.hasNext();){var qt=Gt.next(),en=Nt.map(qt);en!==null&&jt.add(en)}return jt}},rd.MapOp=function(){};var yo=function(vt){function _t(){var wt=arguments[0],Tt=arguments[1];vt.call(this,wt,Tt),this._ptLocator=new Ul,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ol,this._resultPolyList=new vi,this._resultLineList=new vi,this._resultPointList=new vi,this._graph=new zs(new My),this._geomFact=wt.getFactory()}return vt&&(_t.__proto__=vt),_t.prototype=Object.create(vt&&vt.prototype),_t.prototype.constructor=_t,_t.prototype.insertUniqueEdge=function(wt){var Tt=this._edgeList.findEqualEdge(wt);if(Tt!==null){var At=Tt.getLabel(),Ot=wt.getLabel();Tt.isPointwiseEqual(wt)||(Ot=new vs(wt.getLabel())).flip();var Nt=Tt.getDepth();Nt.isNull()&&Nt.add(At),Nt.add(Ot),At.merge(Ot)}else this._edgeList.add(wt)},_t.prototype.getGraph=function(){return this._graph},_t.prototype.cancelDuplicateResultEdges=function(){for(var wt=this._graph.getEdgeEnds().iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getSym();Tt.isInResult()&&At.isInResult()&&(Tt.setInResult(!1),At.setInResult(!1))}},_t.prototype.isCoveredByLA=function(wt){return!!this.isCovered(wt,this._resultLineList)||!!this.isCovered(wt,this._resultPolyList)},_t.prototype.computeGeometry=function(wt,Tt,At,Ot){var Nt=new vi;return Nt.addAll(wt),Nt.addAll(Tt),Nt.addAll(At),Nt.isEmpty()?_t.createEmptyResult(Ot,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(Nt)},_t.prototype.mergeSymLabels=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();)wt.next().getEdges().mergeSymLabels()},_t.prototype.isCovered=function(wt,Tt){for(var At=Tt.iterator();At.hasNext();){var Ot=At.next();if(this._ptLocator.locate(wt,Ot)!==Gr.EXTERIOR)return!0}return!1},_t.prototype.replaceCollapsedEdges=function(){for(var wt=new vi,Tt=this._edgeList.iterator();Tt.hasNext();){var At=Tt.next();At.isCollapsed()&&(Tt.remove(),wt.add(At.getCollapsedEdge()))}this._edgeList.addAll(wt)},_t.prototype.updateNodeLabelling=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getEdges().getLabel();Tt.getLabel().merge(At)}},_t.prototype.getResultGeometry=function(wt){return this.computeOverlay(wt),this._resultGeom},_t.prototype.insertUniqueEdges=function(wt){for(var Tt=wt.iterator();Tt.hasNext();){var At=Tt.next();this.insertUniqueEdge(At)}},_t.prototype.computeOverlay=function(wt){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var Tt=new vi;this._arg[0].computeSplitEdges(Tt),this._arg[1].computeSplitEdges(Tt),this.insertUniqueEdges(Tt),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),td.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(wt),this.cancelDuplicateResultEdges();var At=new ml(this._geomFact);At.add(this._graph),this._resultPolyList=At.getPolygons();var Ot=new Kc(this,this._geomFact,this._ptLocator);this._resultLineList=Ot.build(wt);var Nt=new Ud(this,this._geomFact,this._ptLocator);this._resultPointList=Nt.build(wt),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,wt)},_t.prototype.labelIncompleteNode=function(wt,Tt){var At=this._ptLocator.locate(wt.getCoordinate(),this._arg[Tt].getGeometry());wt.getLabel().setLocation(Tt,At)},_t.prototype.copyPoints=function(wt){for(var Tt=this._arg[wt].getNodeIterator();Tt.hasNext();){var At=Tt.next();this._graph.addNode(At.getCoordinate()).setLabel(wt,At.getLabel().getLocation(wt))}},_t.prototype.findResultAreaEdges=function(wt){for(var Tt=this._graph.getEdgeEnds().iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getLabel();Ot.isArea()&&!At.isInteriorAreaEdge()&&_t.isResultOfOp(Ot.getLocation(0,di.RIGHT),Ot.getLocation(1,di.RIGHT),wt)&&At.setInResult(!0)}},_t.prototype.computeLabelsFromDepths=function(){for(var wt=this._edgeList.iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getLabel(),Ot=Tt.getDepth();if(!Ot.isNull()){Ot.normalize();for(var Nt=0;Nt<2;Nt++)At.isNull(Nt)||!At.isArea()||Ot.isNull(Nt)||(Ot.getDelta(Nt)===0?At.toLine(Nt):(vo.isTrue(!Ot.isNull(Nt,di.LEFT),"depth of LEFT side has not been initialized"),At.setLocation(Nt,di.LEFT,Ot.getLocation(Nt,di.LEFT)),vo.isTrue(!Ot.isNull(Nt,di.RIGHT),"depth of RIGHT side has not been initialized"),At.setLocation(Nt,di.RIGHT,Ot.getLocation(Nt,di.RIGHT))))}}},_t.prototype.computeLabelling=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();)wt.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},_t.prototype.labelIncompleteNodes=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getLabel();Tt.isIsolated()&&(At.isNull(0)?this.labelIncompleteNode(Tt,0):this.labelIncompleteNode(Tt,1)),Tt.getEdges().updateLabelling(At)}},_t.prototype.isCoveredByA=function(wt){return!!this.isCovered(wt,this._resultPolyList)},_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t}(Xf);yo.overlayOp=function(vt,_t,wt){return new yo(vt,_t).getResultGeometry(wt)},yo.intersection=function(vt,_t){if(vt.isEmpty()||_t.isEmpty())return yo.createEmptyResult(yo.INTERSECTION,vt,_t,vt.getFactory());if(vt.isGeometryCollection()){var wt=_t;return Vd.map(vt,{interfaces_:function(){return[rd.MapOp]},map:function(Tt){return Tt.intersection(wt)}})}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),Da.overlayOp(vt,_t,yo.INTERSECTION)},yo.symDifference=function(vt,_t){if(vt.isEmpty()||_t.isEmpty()){if(vt.isEmpty()&&_t.isEmpty())return yo.createEmptyResult(yo.SYMDIFFERENCE,vt,_t,vt.getFactory());if(vt.isEmpty())return _t.copy();if(_t.isEmpty())return vt.copy()}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),Da.overlayOp(vt,_t,yo.SYMDIFFERENCE)},yo.resultDimension=function(vt,_t,wt){var Tt=_t.getDimension(),At=wt.getDimension(),Ot=-1;switch(vt){case yo.INTERSECTION:Ot=Math.min(Tt,At);break;case yo.UNION:Ot=Math.max(Tt,At);break;case yo.DIFFERENCE:Ot=Tt;break;case yo.SYMDIFFERENCE:Ot=Math.max(Tt,At)}return Ot},yo.createEmptyResult=function(vt,_t,wt,Tt){var At=null;switch(yo.resultDimension(vt,_t,wt)){case-1:At=Tt.createGeometryCollection(new Array(0).fill(null));break;case 0:At=Tt.createPoint();break;case 1:At=Tt.createLineString();break;case 2:At=Tt.createPolygon()}return At},yo.difference=function(vt,_t){return vt.isEmpty()?yo.createEmptyResult(yo.DIFFERENCE,vt,_t,vt.getFactory()):_t.isEmpty()?vt.copy():(vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),Da.overlayOp(vt,_t,yo.DIFFERENCE))},yo.isResultOfOp=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],wt=vt.getLocation(0),Tt=vt.getLocation(1);return yo.isResultOfOp(wt,Tt,_t)}if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Nt=arguments[2];switch(At===Gr.BOUNDARY&&(At=Gr.INTERIOR),Ot===Gr.BOUNDARY&&(Ot=Gr.INTERIOR),Nt){case yo.INTERSECTION:return At===Gr.INTERIOR&&Ot===Gr.INTERIOR;case yo.UNION:return At===Gr.INTERIOR||Ot===Gr.INTERIOR;case yo.DIFFERENCE:return At===Gr.INTERIOR&&Ot!==Gr.INTERIOR;case yo.SYMDIFFERENCE:return At===Gr.INTERIOR&&Ot!==Gr.INTERIOR||At!==Gr.INTERIOR&&Ot===Gr.INTERIOR}return!1}},yo.INTERSECTION=1,yo.UNION=2,yo.DIFFERENCE=3,yo.SYMDIFFERENCE=4;var Ch=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ul,this._seg=new Hi;var vt=arguments[0],_t=arguments[1];this._g=vt,this._boundaryDistanceTolerance=_t,this._linework=this.extractLinework(vt)};Ch.prototype.isWithinToleranceOfBoundary=function(vt){for(var _t=this,wt=0;wt<this._linework.getNumGeometries();wt++)for(var Tt=_t._linework.getGeometryN(wt).getCoordinateSequence(),At=0;At<Tt.size()-1;At++)if(Tt.getCoordinate(At,_t._seg.p0),Tt.getCoordinate(At+1,_t._seg.p1),_t._seg.distance(vt)<=_t._boundaryDistanceTolerance)return!0;return!1},Ch.prototype.getLocation=function(vt){return this.isWithinToleranceOfBoundary(vt)?Gr.BOUNDARY:this._ptLocator.locate(vt,this._g)},Ch.prototype.extractLinework=function(vt){var _t=new Wd;vt.apply(_t);var wt=_t.getLinework(),Tt=Io.toLineStringArray(wt);return vt.getFactory().createMultiLineString(Tt)},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var Wd=function(){this._linework=null,this._linework=new vi};Wd.prototype.getLinework=function(){return this._linework},Wd.prototype.filter=function(vt){if(vt instanceof pa){var _t=vt;this._linework.add(_t.getExteriorRing());for(var wt=0;wt<_t.getNumInteriorRing();wt++)this._linework.add(_t.getInteriorRingN(wt))}},Wd.prototype.interfaces_=function(){return[Vc]},Wd.prototype.getClass=function(){return Wd};var Th=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var vt=arguments[0];this._g=vt};Th.prototype.extractPoints=function(vt,_t,wt){for(var Tt=vt.getCoordinates(),At=0;At<Tt.length-1;At++)this.computeOffsetPoints(Tt[At],Tt[At+1],_t,wt)},Th.prototype.setSidesToGenerate=function(vt,_t){this._doLeft=vt,this._doRight=_t},Th.prototype.getPoints=function(vt){for(var _t=new vi,wt=Ha.getLines(this._g).iterator();wt.hasNext();){var Tt=wt.next();this.extractPoints(Tt,vt,_t)}return _t},Th.prototype.computeOffsetPoints=function(vt,_t,wt,Tt){var At=_t.x-vt.x,Ot=_t.y-vt.y,Nt=Math.sqrt(At*At+Ot*Ot),jt=wt*At/Nt,Gt=wt*Ot/Nt,qt=(_t.x+vt.x)/2,en=(_t.y+vt.y)/2;if(this._doLeft){var Xt=new Dr(qt-Gt,en+jt);Tt.add(Xt)}if(this._doRight){var sn=new Dr(qt+Gt,en-jt);Tt.add(sn)}},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var bl=function vt(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=vt.TOLERANCE,this._testCoords=new vi;var _t=arguments[0],wt=arguments[1],Tt=arguments[2];this._boundaryDistanceTolerance=vt.computeBoundaryDistanceTolerance(_t,wt),this._geom=[_t,wt,Tt],this._locFinder=[new Ch(this._geom[0],this._boundaryDistanceTolerance),new Ch(this._geom[1],this._boundaryDistanceTolerance),new Ch(this._geom[2],this._boundaryDistanceTolerance)]},z0={TOLERANCE:{configurable:!0}};bl.prototype.reportResult=function(vt,_t,wt){za.out.println("Overlay result invalid - A:"+Gr.toLocationSymbol(_t[0])+" B:"+Gr.toLocationSymbol(_t[1])+" expected:"+(wt?"i":"e")+" actual:"+Gr.toLocationSymbol(_t[2]))},bl.prototype.isValid=function(vt){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var _t=this.checkValid(vt);return _t},bl.prototype.checkValid=function(){var vt=this;if(arguments.length===1){for(var _t=arguments[0],wt=0;wt<this._testCoords.size();wt++){var Tt=vt._testCoords.get(wt);if(!vt.checkValid(_t,Tt))return vt._invalidLocation=Tt,!1}return!0}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return this._location[0]=this._locFinder[0].getLocation(Ot),this._location[1]=this._locFinder[1].getLocation(Ot),this._location[2]=this._locFinder[2].getLocation(Ot),!!bl.hasLocation(this._location,Gr.BOUNDARY)||this.isValidResult(At,this._location)}},bl.prototype.addTestPts=function(vt){var _t=new Th(vt);this._testCoords.addAll(_t.getPoints(5*this._boundaryDistanceTolerance))},bl.prototype.isValidResult=function(vt,_t){var wt=yo.isResultOfOp(_t[0],_t[1],vt),Tt=!(wt^_t[2]===Gr.INTERIOR);return Tt||this.reportResult(vt,_t,wt),Tt},bl.prototype.getInvalidLocation=function(){return this._invalidLocation},bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl},bl.hasLocation=function(vt,_t){for(var wt=0;wt<3;wt++)if(vt[wt]===_t)return!0;return!1},bl.computeBoundaryDistanceTolerance=function(vt,_t){return Math.min(Bo.computeSizeBasedSnapTolerance(vt),Bo.computeSizeBasedSnapTolerance(_t))},bl.isValid=function(vt,_t,wt,Tt){return new bl(vt,_t,Tt).isValid(wt)},z0.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(bl,z0);var Qa=function vt(_t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=vt.extractFactory(_t),this._inputGeoms=_t};Qa.prototype.extractElements=function(vt,_t){if(vt===null)return null;for(var wt=0;wt<vt.getNumGeometries();wt++){var Tt=vt.getGeometryN(wt);this._skipEmpty&&Tt.isEmpty()||_t.add(Tt)}},Qa.prototype.combine=function(){for(var vt=new vi,_t=this._inputGeoms.iterator();_t.hasNext();){var wt=_t.next();this.extractElements(wt,vt)}return vt.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(vt)},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa},Qa.combine=function(){if(arguments.length===1){var vt=arguments[0],_t=new Qa(vt);return _t.combine()}if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=new Qa(Qa.createList(wt,Tt));return At.combine()}if(arguments.length===3){var Ot=arguments[0],Nt=arguments[1],jt=arguments[2],Gt=new Qa(Qa.createList(Ot,Nt,jt));return Gt.combine()}},Qa.extractFactory=function(vt){return vt.isEmpty()?null:vt.iterator().next().getFactory()},Qa.createList=function(){if(arguments.length===2){var vt=arguments[0],_t=arguments[1],wt=new vi;return wt.add(vt),wt.add(_t),wt}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Nt=new vi;return Nt.add(Tt),Nt.add(At),Nt.add(Ot),Nt}};var sa=function(){this._inputPolys=null,this._geomFactory=null;var vt=arguments[0];this._inputPolys=vt,this._inputPolys===null&&(this._inputPolys=new vi)},H0={STRTREE_NODE_CAPACITY:{configurable:!0}};sa.prototype.reduceToGeometries=function(vt){for(var _t=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next(),At=null;to(Tt,vc)?At=this.unionTree(Tt):Tt instanceof Qi&&(At=Tt),_t.add(At)}return _t},sa.prototype.extractByEnvelope=function(vt,_t,wt){for(var Tt=new vi,At=0;At<_t.getNumGeometries();At++){var Ot=_t.getGeometryN(At);Ot.getEnvelopeInternal().intersects(vt)?Tt.add(Ot):wt.add(Ot)}return this._geomFactory.buildGeometry(Tt)},sa.prototype.unionOptimized=function(vt,_t){var wt=vt.getEnvelopeInternal(),Tt=_t.getEnvelopeInternal();if(!wt.intersects(Tt))return Qa.combine(vt,_t);if(vt.getNumGeometries()<=1&&_t.getNumGeometries()<=1)return this.unionActual(vt,_t);var At=wt.intersection(Tt);return this.unionUsingEnvelopeIntersection(vt,_t,At)},sa.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var vt=new Oy(sa.STRTREE_NODE_CAPACITY),_t=this._inputPolys.iterator();_t.hasNext();){var wt=_t.next();vt.insert(wt.getEnvelopeInternal(),wt)}this._inputPolys=null;var Tt=vt.itemsTree();return this.unionTree(Tt)},sa.prototype.binaryUnion=function(){if(arguments.length===1){var vt=arguments[0];return this.binaryUnion(vt,0,vt.size())}if(arguments.length===3){var _t=arguments[0],wt=arguments[1],Tt=arguments[2];if(Tt-wt<=1){var At=sa.getGeometry(_t,wt);return this.unionSafe(At,null)}if(Tt-wt==2)return this.unionSafe(sa.getGeometry(_t,wt),sa.getGeometry(_t,wt+1));var Ot=Math.trunc((Tt+wt)/2),Nt=this.binaryUnion(_t,wt,Ot),jt=this.binaryUnion(_t,Ot,Tt);return this.unionSafe(Nt,jt)}},sa.prototype.repeatedUnion=function(vt){for(var _t=null,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();_t=_t===null?Tt.copy():_t.union(Tt)}return _t},sa.prototype.unionSafe=function(vt,_t){return vt===null&&_t===null?null:vt===null?_t.copy():_t===null?vt.copy():this.unionOptimized(vt,_t)},sa.prototype.unionActual=function(vt,_t){return sa.restrictToPolygons(vt.union(_t))},sa.prototype.unionTree=function(vt){var _t=this.reduceToGeometries(vt);return this.binaryUnion(_t)},sa.prototype.unionUsingEnvelopeIntersection=function(vt,_t,wt){var Tt=new vi,At=this.extractByEnvelope(wt,vt,Tt),Ot=this.extractByEnvelope(wt,_t,Tt),Nt=this.unionActual(At,Ot);return Tt.add(Nt),Qa.combine(Tt)},sa.prototype.bufferUnion=function(){if(arguments.length===1){var vt=arguments[0],_t=vt.get(0).getFactory(),wt=_t.buildGeometry(vt),Tt=wt.buffer(0);return Tt}if(arguments.length===2){var At=arguments[0],Ot=arguments[1],Nt=At.getFactory(),jt=Nt.createGeometryCollection([At,Ot]),Gt=jt.buffer(0);return Gt}},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa},sa.restrictToPolygons=function(vt){if(to(vt,mh))return vt;var _t=Bu.getPolygons(vt);return _t.size()===1?_t.get(0):vt.getFactory().createMultiPolygon(Io.toPolygonArray(_t))},sa.getGeometry=function(vt,_t){return _t>=vt.size()?null:vt.get(_t)},sa.union=function(vt){return new sa(vt).union()},H0.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(sa,H0);var Ic=function(){};function Hu(){return new Zf}function Zf(){this.reset()}Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.union=function(vt,_t){if(vt.isEmpty()||_t.isEmpty()){if(vt.isEmpty()&&_t.isEmpty())return yo.createEmptyResult(yo.UNION,vt,_t,vt.getFactory());if(vt.isEmpty())return _t.copy();if(_t.isEmpty())return vt.copy()}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(_t),Da.overlayOp(vt,_t,yo.UNION)},Zf.prototype={constructor:Zf,reset:function(){this.s=this.t=0},add:function(vt){j0(eg,vt,this.t),j0(this,eg.s,this.s),this.s?this.t+=eg.t:this.s=eg.t},valueOf:function(){return this.s}};var eg=new Zf;function j0(vt,_t,wt){var Tt=vt.s=_t+wt,At=Tt-_t,Ot=Tt-At;vt.t=_t-Ot+(wt-At)}var ea=1e-6,bs=Math.PI,ju=bs/2,Fy=bs/4,Vu=2*bs,no=180/bs,ac=bs/180,al=Math.abs,c_=Math.atan,Kf=Math.atan2,_a=Math.cos,ba=Math.sin,tg=Math.sqrt;function fm(vt){return vt>1?0:vt<-1?bs:Math.acos(vt)}function Eu(vt){return vt>1?ju:vt<-1?-ju:Math.asin(vt)}function od(){}function ng(vt,_t){vt&&V0.hasOwnProperty(vt.type)&&V0[vt.type](vt,_t)}var pm={Feature:function(vt,_t){ng(vt.geometry,_t)},FeatureCollection:function(vt,_t){for(var wt=vt.features,Tt=-1,At=wt.length;++Tt<At;)ng(wt[Tt].geometry,_t)}},V0={Sphere:function(vt,_t){_t.sphere()},Point:function(vt,_t){vt=vt.coordinates,_t.point(vt[0],vt[1],vt[2])},MultiPoint:function(vt,_t){for(var wt=vt.coordinates,Tt=-1,At=wt.length;++Tt<At;)vt=wt[Tt],_t.point(vt[0],vt[1],vt[2])},LineString:function(vt,_t){gm(vt.coordinates,_t,0)},MultiLineString:function(vt,_t){for(var wt=vt.coordinates,Tt=-1,At=wt.length;++Tt<At;)gm(wt[Tt],_t,0)},Polygon:function(vt,_t){Jf(vt.coordinates,_t)},MultiPolygon:function(vt,_t){for(var wt=vt.coordinates,Tt=-1,At=wt.length;++Tt<At;)Jf(wt[Tt],_t)},GeometryCollection:function(vt,_t){for(var wt=vt.geometries,Tt=-1,At=wt.length;++Tt<At;)ng(wt[Tt],_t)}};function gm(vt,_t,wt){var Tt,At=-1,Ot=vt.length-wt;for(_t.lineStart();++At<Ot;)Tt=vt[At],_t.point(Tt[0],Tt[1],Tt[2]);_t.lineEnd()}function Jf(vt,_t){var wt=-1,Tt=vt.length;for(_t.polygonStart();++wt<Tt;)gm(vt[wt],_t,1);_t.polygonEnd()}Hu(),Hu();function U0(vt){return[Kf(vt[1],vt[0]),Eu(vt[2])]}function aa(vt){var _t=vt[0],wt=vt[1],Tt=_a(wt);return[Tt*_a(_t),Tt*ba(_t),ba(wt)]}function rg(vt,_t){return vt[0]*_t[0]+vt[1]*_t[1]+vt[2]*_t[2]}function mm(vt,_t){return[vt[1]*_t[2]-vt[2]*_t[1],vt[2]*_t[0]-vt[0]*_t[2],vt[0]*_t[1]-vt[1]*_t[0]]}function G0(vt,_t){vt[0]+=_t[0],vt[1]+=_t[1],vt[2]+=_t[2]}function ym(vt,_t){return[vt[0]*_t,vt[1]*_t,vt[2]*_t]}function W0(vt){var _t=tg(vt[0]*vt[0]+vt[1]*vt[1]+vt[2]*vt[2]);vt[0]/=_t,vt[1]/=_t,vt[2]/=_t}Hu();function q0(vt,_t){function wt(Tt,At){return Tt=vt(Tt,At),_t(Tt[0],Tt[1])}return vt.invert&&_t.invert&&(wt.invert=function(Tt,At){return(Tt=_t.invert(Tt,At))&&vt.invert(Tt[0],Tt[1])}),wt}function Y0(vt,_t){return[vt>bs?vt-Vu:vt<-bs?vt+Vu:vt,_t]}function zy(vt){return function(_t,wt){return[(_t+=vt)>bs?_t-Vu:_t<-bs?_t+Vu:_t,wt]}}function X0(vt){var _t=zy(vt);return _t.invert=zy(-vt),_t}function Z0(vt,_t){var wt=_a(vt),Tt=ba(vt),At=_a(_t),Ot=ba(_t);function Nt(jt,Gt){var qt=_a(Gt),en=_a(jt)*qt,Xt=ba(jt)*qt,sn=ba(Gt),yn=sn*wt+en*Tt;return[Kf(Xt*At-yn*Ot,en*wt-sn*Tt),Eu(yn*At+Xt*Ot)]}return Nt.invert=function(jt,Gt){var qt=_a(Gt),en=_a(jt)*qt,Xt=ba(jt)*qt,sn=ba(Gt),yn=sn*At-Xt*Ot;return[Kf(Xt*At+sn*Ot,en*wt+yn*Tt),Eu(yn*wt-en*Tt)]},Nt}function K0(vt,_t){(_t=aa(_t))[0]-=vt,W0(_t);var wt=fm(-_t[1]);return((-_t[2]<0?-wt:wt)+Vu-ea)%Vu}function vm(){var vt,_t=[];return{point:function(wt,Tt){vt.push([wt,Tt])},lineStart:function(){_t.push(vt=[])},lineEnd:od,rejoin:function(){_t.length>1&&_t.push(_t.pop().concat(_t.shift()))},result:function(){var wt=_t;return _t=[],vt=null,wt}}}function _m(vt,_t){return al(vt[0]-_t[0])<ea&&al(vt[1]-_t[1])<ea}function qd(vt,_t,wt,Tt){this.x=vt,this.z=_t,this.o=wt,this.e=Tt,this.v=!1,this.n=this.p=null}function J0(vt,_t,wt,Tt,At){var Ot,Nt,jt=[],Gt=[];if(vt.forEach(function(vn){if(!((wn=vn.length-1)<=0)){var wn,un,Fn=vn[0],Qn=vn[wn];if(_m(Fn,Qn)){for(At.lineStart(),Ot=0;Ot<wn;++Ot)At.point((Fn=vn[Ot])[0],Fn[1]);At.lineEnd()}else jt.push(un=new qd(Fn,vn,null,!0)),Gt.push(un.o=new qd(Fn,null,un,!1)),jt.push(un=new qd(Qn,vn,null,!1)),Gt.push(un.o=new qd(Qn,null,un,!0))}}),jt.length){for(Gt.sort(_t),ig(jt),ig(Gt),Ot=0,Nt=Gt.length;Ot<Nt;++Ot)Gt[Ot].e=wt=!wt;for(var qt,en,Xt=jt[0];;){for(var sn=Xt,yn=!0;sn.v;)if((sn=sn.n)===Xt)return;qt=sn.z,At.lineStart();do{if(sn.v=sn.o.v=!0,sn.e){if(yn)for(Ot=0,Nt=qt.length;Ot<Nt;++Ot)At.point((en=qt[Ot])[0],en[1]);else Tt(sn.x,sn.n.x,1,At);sn=sn.n}else{if(yn)for(qt=sn.p.z,Ot=qt.length-1;Ot>=0;--Ot)At.point((en=qt[Ot])[0],en[1]);else Tt(sn.x,sn.p.x,-1,At);sn=sn.p}qt=(sn=sn.o).z,yn=!yn}while(!sn.v);At.lineEnd()}}}function ig(vt){if(_t=vt.length){for(var _t,wt,Tt=0,At=vt[0];++Tt<_t;)At.n=wt=vt[Tt],wt.p=At,At=wt;At.n=wt=vt[0],wt.p=At}}function og(vt,_t){return vt<_t?-1:vt>_t?1:vt>=_t?0:NaN}Y0.invert=Y0;var Qf,Uu;(Qf=og).length===1&&(Uu=Qf,Qf=function(vt,_t){return og(Uu(vt),_t)});function Hy(vt){for(var _t,wt,Tt,At=vt.length,Ot=-1,Nt=0;++Ot<At;)Nt+=vt[Ot].length;for(wt=new Array(Nt);--At>=0;)for(_t=(Tt=vt[At]).length;--_t>=0;)wt[--Nt]=Tt[_t];return wt}var ep=1e9,Va=-ep;function bm(vt,_t,wt,Tt){function At(qt,en){return vt<=qt&&qt<=wt&&_t<=en&&en<=Tt}function Ot(qt,en,Xt,sn){var yn=0,vn=0;if(qt==null||(yn=Nt(qt,Xt))!==(vn=Nt(en,Xt))||Gt(qt,en)<0^Xt>0)do sn.point(yn===0||yn===3?vt:wt,yn>1?Tt:_t);while((yn=(yn+Xt+4)%4)!==vn);else sn.point(en[0],en[1])}function Nt(qt,en){return al(qt[0]-vt)<ea?en>0?0:3:al(qt[0]-wt)<ea?en>0?2:1:al(qt[1]-_t)<ea?en>0?1:0:en>0?3:2}function jt(qt,en){return Gt(qt.x,en.x)}function Gt(qt,en){var Xt=Nt(qt,1),sn=Nt(en,1);return Xt!==sn?Xt-sn:Xt===0?en[1]-qt[1]:Xt===1?qt[0]-en[0]:Xt===2?qt[1]-en[1]:en[0]-qt[0]}return function(qt){var en,Xt,sn,yn,vn,wn,un,Fn,Qn,_n,Bn,Hn=qt,Gn=vm(),Vn={point:Ur,lineStart:function(){Vn.point=$r,Xt&&Xt.push(sn=[]),_n=!0,Qn=!1,un=Fn=NaN},lineEnd:function(){en&&($r(yn,vn),wn&&Qn&&Gn.rejoin(),en.push(Gn.result())),Vn.point=Ur,Qn&&Hn.lineEnd()},polygonStart:function(){Hn=Gn,en=[],Xt=[],Bn=!0},polygonEnd:function(){var Yr=function(){for(var Hr=0,Br=0,Nr=Xt.length;Br<Nr;++Br)for(var Xr,jr,ei=Xt[Br],xr=1,zi=ei.length,gi=ei[0],_o=gi[0],Oi=gi[1];xr<zi;++xr)Xr=_o,jr=Oi,_o=(gi=ei[xr])[0],Oi=gi[1],jr<=Tt?Oi>Tt&&(_o-Xr)*(Tt-jr)>(Oi-jr)*(vt-Xr)&&++Hr:Oi<=Tt&&(_o-Xr)*(Tt-jr)<(Oi-jr)*(vt-Xr)&&--Hr;return Hr}(),Mr=Bn&&Yr,Qr=(en=Hy(en)).length;(Mr||Qr)&&(qt.polygonStart(),Mr&&(qt.lineStart(),Ot(null,null,1,qt),qt.lineEnd()),Qr&&J0(en,jt,Yr,Ot,qt),qt.polygonEnd()),Hn=qt,en=Xt=sn=null}};function Ur(Yr,Mr){At(Yr,Mr)&&Hn.point(Yr,Mr)}function $r(Yr,Mr){var Qr=At(Yr,Mr);if(Xt&&sn.push([Yr,Mr]),_n)yn=Yr,vn=Mr,wn=Qr,_n=!1,Qr&&(Hn.lineStart(),Hn.point(Yr,Mr));else if(Qr&&Qn)Hn.point(Yr,Mr);else{var Hr=[un=Math.max(Va,Math.min(ep,un)),Fn=Math.max(Va,Math.min(ep,Fn))],Br=[Yr=Math.max(Va,Math.min(ep,Yr)),Mr=Math.max(Va,Math.min(ep,Mr))];(function(Nr,Xr,jr,ei,xr,zi){var gi,_o=Nr[0],Oi=Nr[1],Ji=0,Fo=1,Ss=Xr[0]-_o,Ua=Xr[1]-Oi;if(gi=jr-_o,Ss||!(gi>0)){if(gi/=Ss,Ss<0){if(gi<Ji)return;gi<Fo&&(Fo=gi)}else if(Ss>0){if(gi>Fo)return;gi>Ji&&(Ji=gi)}if(gi=xr-_o,Ss||!(gi<0)){if(gi/=Ss,Ss<0){if(gi>Fo)return;gi>Ji&&(Ji=gi)}else if(Ss>0){if(gi<Ji)return;gi<Fo&&(Fo=gi)}if(gi=ei-Oi,Ua||!(gi>0)){if(gi/=Ua,Ua<0){if(gi<Ji)return;gi<Fo&&(Fo=gi)}else if(Ua>0){if(gi>Fo)return;gi>Ji&&(Ji=gi)}if(gi=zi-Oi,Ua||!(gi<0)){if(gi/=Ua,Ua<0){if(gi>Fo)return;gi>Ji&&(Ji=gi)}else if(Ua>0){if(gi<Ji)return;gi<Fo&&(Fo=gi)}return Ji>0&&(Nr[0]=_o+Ji*Ss,Nr[1]=Oi+Ji*Ua),Fo<1&&(Xr[0]=_o+Fo*Ss,Xr[1]=Oi+Fo*Ua),!0}}}}})(Hr,Br,vt,_t,wt,Tt)?(Qn||(Hn.lineStart(),Hn.point(Hr[0],Hr[1])),Hn.point(Br[0],Br[1]),Qr||Hn.lineEnd(),Bn=!1):Qr&&(Hn.lineStart(),Hn.point(Yr,Mr),Bn=!1)}un=Yr,Fn=Mr,Qn=Qr}return Vn}}var Q0=Hu();Hu();function jy(vt){return vt}Hu(),Hu();var tp=1/0,Yd=tp,sd=-tp,xm=sd,Vy={point:function(vt,_t){vt<tp&&(tp=vt),vt>sd&&(sd=vt),_t<Yd&&(Yd=_t),_t>xm&&(xm=_t)},lineStart:od,lineEnd:od,polygonStart:od,polygonEnd:od,result:function(){var vt=[[tp,Yd],[sd,xm]];return sd=xm=-(Yd=tp=1/0),vt}};Hu();function e1(vt,_t,wt,Tt){return function(At,Ot){var Nt,jt,Gt,qt=_t(Ot),en=At.invert(Tt[0],Tt[1]),Xt=vm(),sn=_t(Xt),yn=!1,vn={point:wn,lineStart:Fn,lineEnd:Qn,polygonStart:function(){vn.point=_n,vn.lineStart=Bn,vn.lineEnd=Hn,jt=[],Nt=[]},polygonEnd:function(){vn.point=wn,vn.lineStart=Fn,vn.lineEnd=Qn,jt=Hy(jt);var Gn=function(Vn,Ur){var $r=Ur[0],Yr=Ur[1],Mr=[ba($r),-_a($r),0],Qr=0,Hr=0;Q0.reset();for(var Br=0,Nr=Vn.length;Br<Nr;++Br)if(jr=(Xr=Vn[Br]).length)for(var Xr,jr,ei=Xr[jr-1],xr=ei[0],zi=ei[1]/2+Fy,gi=ba(zi),_o=_a(zi),Oi=0;Oi<jr;++Oi,xr=Fo,gi=Ua,_o=ag,ei=Ji){var Ji=Xr[Oi],Fo=Ji[0],Ss=Ji[1]/2+Fy,Ua=ba(Ss),ag=_a(Ss),ad=Fo-xr,lg=ad>=0?1:-1,cg=lg*ad,np=cg>bs,Em=gi*Ua;if(Q0.add(Kf(Em*lg*ba(cg),_o*ag+Em*_a(cg))),Qr+=np?ad+lg*Vu:ad,np^xr>=$r^Fo>=$r){var rp=mm(aa(ei),aa(Ji));W0(rp);var nv=mm(Mr,rp);W0(nv);var rv=(np^ad>=0?-1:1)*Eu(nv[2]);(Yr>rv||Yr===rv&&(rp[0]||rp[1]))&&(Hr+=np^ad>=0?1:-1)}}return(Qr<-1e-6||Qr<ea&&Q0<-1e-6)^1&Hr}(Nt,en);jt.length?(yn||(Ot.polygonStart(),yn=!0),J0(jt,n1,Gn,wt,Ot)):Gn&&(yn||(Ot.polygonStart(),yn=!0),Ot.lineStart(),wt(null,null,1,Ot),Ot.lineEnd()),yn&&(Ot.polygonEnd(),yn=!1),jt=Nt=null},sphere:function(){Ot.polygonStart(),Ot.lineStart(),wt(null,null,1,Ot),Ot.lineEnd(),Ot.polygonEnd()}};function wn(Gn,Vn){var Ur=At(Gn,Vn);vt(Gn=Ur[0],Vn=Ur[1])&&Ot.point(Gn,Vn)}function un(Gn,Vn){var Ur=At(Gn,Vn);qt.point(Ur[0],Ur[1])}function Fn(){vn.point=un,qt.lineStart()}function Qn(){vn.point=wn,qt.lineEnd()}function _n(Gn,Vn){Gt.push([Gn,Vn]);var Ur=At(Gn,Vn);sn.point(Ur[0],Ur[1])}function Bn(){sn.lineStart(),Gt=[]}function Hn(){_n(Gt[0][0],Gt[0][1]),sn.lineEnd();var Gn,Vn,Ur,$r,Yr=sn.clean(),Mr=Xt.result(),Qr=Mr.length;if(Gt.pop(),Nt.push(Gt),Gt=null,Qr)if(1&Yr){if((Vn=(Ur=Mr[0]).length-1)>0){for(yn||(Ot.polygonStart(),yn=!0),Ot.lineStart(),Gn=0;Gn<Vn;++Gn)Ot.point(($r=Ur[Gn])[0],$r[1]);Ot.lineEnd()}}else Qr>1&&2&Yr&&Mr.push(Mr.pop().concat(Mr.shift())),jt.push(Mr.filter(Uy))}return vn}}function Uy(vt){return vt.length>1}function n1(vt,_t){return((vt=vt.x)[0]<0?vt[1]-ju-ea:ju-vt[1])-((_t=_t.x)[0]<0?_t[1]-ju-ea:ju-_t[1])}var r1=e1(function(){return!0},function(vt){var _t,wt=NaN,Tt=NaN,At=NaN;return{lineStart:function(){vt.lineStart(),_t=1},point:function(Ot,Nt){var jt=Ot>0?bs:-bs,Gt=al(Ot-wt);al(Gt-bs)<ea?(vt.point(wt,Tt=(Tt+Nt)/2>0?ju:-ju),vt.point(At,Tt),vt.lineEnd(),vt.lineStart(),vt.point(jt,Tt),vt.point(Ot,Tt),_t=0):At!==jt&&Gt>=bs&&(al(wt-At)<ea&&(wt-=At*ea),al(Ot-jt)<ea&&(Ot-=jt*ea),Tt=function(qt,en,Xt,sn){var yn,vn,wn=ba(qt-Xt);return al(wn)>ea?c_((ba(en)*(vn=_a(sn))*ba(Xt)-ba(sn)*(yn=_a(en))*ba(qt))/(yn*vn*wn)):(en+sn)/2}(wt,Tt,Ot,Nt),vt.point(At,Tt),vt.lineEnd(),vt.lineStart(),vt.point(jt,Tt),_t=0),vt.point(wt=Ot,Tt=Nt),At=jt},lineEnd:function(){vt.lineEnd(),wt=Tt=NaN},clean:function(){return 2-_t}}},function(vt,_t,wt,Tt){var At;if(vt==null)At=wt*ju,Tt.point(-bs,At),Tt.point(0,At),Tt.point(bs,At),Tt.point(bs,0),Tt.point(bs,-At),Tt.point(0,-At),Tt.point(-bs,-At),Tt.point(-bs,0),Tt.point(-bs,At);else if(al(vt[0]-_t[0])>ea){var Ot=vt[0]<_t[0]?bs:-bs;At=wt*Ot/2,Tt.point(-Ot,At),Tt.point(0,At),Tt.point(Ot,At)}else Tt.point(_t[0],_t[1])},[-bs,-ju]);function wm(vt,_t){var wt=_a(vt),Tt=wt>0,At=al(wt)>ea;function Ot(Gt,qt){return _a(Gt)*_a(qt)>wt}function Nt(Gt,qt,en){var Xt=[1,0,0],sn=mm(aa(Gt),aa(qt)),yn=rg(sn,sn),vn=sn[0],wn=yn-vn*vn;if(!wn)return!en&&Gt;var un=wt*yn/wn,Fn=-wt*vn/wn,Qn=mm(Xt,sn),_n=ym(Xt,un);G0(_n,ym(sn,Fn));var Bn=Qn,Hn=rg(_n,Bn),Gn=rg(Bn,Bn),Vn=Hn*Hn-Gn*(rg(_n,_n)-1);if(!(Vn<0)){var Ur=tg(Vn),$r=ym(Bn,(-Hn-Ur)/Gn);if(G0($r,_n),$r=U0($r),!en)return $r;var Yr,Mr=Gt[0],Qr=qt[0],Hr=Gt[1],Br=qt[1];Qr<Mr&&(Yr=Mr,Mr=Qr,Qr=Yr);var Nr=Qr-Mr,Xr=al(Nr-bs)<ea;if(!Xr&&Br<Hr&&(Yr=Hr,Hr=Br,Br=Yr),Xr||Nr<ea?Xr?Hr+Br>0^$r[1]<(al($r[0]-Mr)<ea?Hr:Br):Hr<=$r[1]&&$r[1]<=Br:Nr>bs^(Mr<=$r[0]&&$r[0]<=Qr)){var jr=ym(Bn,(-Hn+Ur)/Gn);return G0(jr,_n),[$r,U0(jr)]}}}function jt(Gt,qt){var en=Tt?vt:bs-vt,Xt=0;return Gt<-en?Xt|=1:Gt>en&&(Xt|=2),qt<-en?Xt|=4:qt>en&&(Xt|=8),Xt}return e1(Ot,function(Gt){var qt,en,Xt,sn,yn;return{lineStart:function(){sn=Xt=!1,yn=1},point:function(vn,wn){var un,Fn=[vn,wn],Qn=Ot(vn,wn),_n=Tt?Qn?0:jt(vn,wn):Qn?jt(vn+(vn<0?bs:-bs),wn):0;if(!qt&&(sn=Xt=Qn)&&Gt.lineStart(),Qn!==Xt&&(!(un=Nt(qt,Fn))||_m(qt,un)||_m(Fn,un))&&(Fn[0]+=ea,Fn[1]+=ea,Qn=Ot(Fn[0],Fn[1])),Qn!==Xt)yn=0,Qn?(Gt.lineStart(),un=Nt(Fn,qt),Gt.point(un[0],un[1])):(un=Nt(qt,Fn),Gt.point(un[0],un[1]),Gt.lineEnd()),qt=un;else if(At&&qt&&Tt^Qn){var Bn;_n&en||!(Bn=Nt(Fn,qt,!0))||(yn=0,Tt?(Gt.lineStart(),Gt.point(Bn[0][0],Bn[0][1]),Gt.point(Bn[1][0],Bn[1][1]),Gt.lineEnd()):(Gt.point(Bn[1][0],Bn[1][1]),Gt.lineEnd(),Gt.lineStart(),Gt.point(Bn[0][0],Bn[0][1])))}!Qn||qt&&_m(qt,Fn)||Gt.point(Fn[0],Fn[1]),qt=Fn,Xt=Qn,en=_n},lineEnd:function(){Xt&&Gt.lineEnd(),qt=null},clean:function(){return yn|(sn&&Xt)<<1}}},function(Gt,qt,en,Xt){(function(sn,yn,vn,wn,un,Fn){if(vn){var Qn=_a(yn),_n=ba(yn),Bn=wn*vn;un==null?(un=yn+wn*Vu,Fn=yn-Bn/2):(un=K0(Qn,un),Fn=K0(Qn,Fn),(wn>0?un<Fn:un>Fn)&&(un+=wn*Vu));for(var Hn,Gn=un;wn>0?Gn>Fn:Gn<Fn;Gn-=Bn)Hn=U0([Qn,-_n*_a(Gn),-_n*ba(Gn)]),sn.point(Hn[0],Hn[1])}})(Xt,vt,_t,en,Gt,qt)},Tt?[0,-vt]:[-bs,vt-bs])}function Gy(vt){return function(_t){var wt=new i1;for(var Tt in vt)wt[Tt]=vt[Tt];return wt.stream=_t,wt}}function i1(){}function sg(vt,_t,wt){var Tt=_t[1][0]-_t[0][0],At=_t[1][1]-_t[0][1],Ot=vt.clipExtent&&vt.clipExtent();vt.scale(150).translate([0,0]),Ot!=null&&vt.clipExtent(null),function(en,Xt){en&&pm.hasOwnProperty(en.type)?pm[en.type](en,Xt):ng(en,Xt)}(wt,vt.stream(Vy));var Nt=Vy.result(),jt=Math.min(Tt/(Nt[1][0]-Nt[0][0]),At/(Nt[1][1]-Nt[0][1])),Gt=+_t[0][0]+(Tt-jt*(Nt[1][0]+Nt[0][0]))/2,qt=+_t[0][1]+(At-jt*(Nt[1][1]+Nt[0][1]))/2;return Ot!=null&&vt.clipExtent(Ot),vt.scale(150*jt).translate([Gt,qt])}i1.prototype={constructor:i1,point:function(vt,_t){this.stream.point(vt,_t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var u_=_a(30*ac);function Wy(vt,_t){return+_t?function(wt,Tt){function At(Ot,Nt,jt,Gt,qt,en,Xt,sn,yn,vn,wn,un,Fn,Qn){var _n=Xt-Ot,Bn=sn-Nt,Hn=_n*_n+Bn*Bn;if(Hn>4*Tt&&Fn--){var Gn=Gt+vn,Vn=qt+wn,Ur=en+un,$r=tg(Gn*Gn+Vn*Vn+Ur*Ur),Yr=Eu(Ur/=$r),Mr=al(al(Ur)-1)<ea||al(jt-yn)<ea?(jt+yn)/2:Kf(Vn,Gn),Qr=wt(Mr,Yr),Hr=Qr[0],Br=Qr[1],Nr=Hr-Ot,Xr=Br-Nt,jr=Bn*Nr-_n*Xr;(jr*jr/Hn>Tt||al((_n*Nr+Bn*Xr)/Hn-.5)>.3||Gt*vn+qt*wn+en*un<u_)&&(At(Ot,Nt,jt,Gt,qt,en,Hr,Br,Mr,Gn/=$r,Vn/=$r,Ur,Fn,Qn),Qn.point(Hr,Br),At(Hr,Br,Mr,Gn,Vn,Ur,Xt,sn,yn,vn,wn,un,Fn,Qn))}}return function(Ot){var Nt,jt,Gt,qt,en,Xt,sn,yn,vn,wn,un,Fn,Qn={point:_n,lineStart:Bn,lineEnd:Gn,polygonStart:function(){Ot.polygonStart(),Qn.lineStart=Vn},polygonEnd:function(){Ot.polygonEnd(),Qn.lineStart=Bn}};function _n(Yr,Mr){Yr=wt(Yr,Mr),Ot.point(Yr[0],Yr[1])}function Bn(){yn=NaN,Qn.point=Hn,Ot.lineStart()}function Hn(Yr,Mr){var Qr=aa([Yr,Mr]),Hr=wt(Yr,Mr);At(yn,vn,sn,wn,un,Fn,yn=Hr[0],vn=Hr[1],sn=Yr,wn=Qr[0],un=Qr[1],Fn=Qr[2],16,Ot),Ot.point(yn,vn)}function Gn(){Qn.point=_n,Ot.lineEnd()}function Vn(){Bn(),Qn.point=Ur,Qn.lineEnd=$r}function Ur(Yr,Mr){Hn(Nt=Yr,Mr),jt=yn,Gt=vn,qt=wn,en=un,Xt=Fn,Qn.point=Hn}function $r(){At(yn,vn,sn,wn,un,Fn,jt,Gt,Nt,qt,en,Xt,16,Ot),Qn.lineEnd=Gn,Gn()}return Qn}}(vt,_t):function(wt){return Gy({point:function(Tt,At){Tt=wt(Tt,At),this.stream.point(Tt[0],Tt[1])}})}(vt)}var qy=Gy({point:function(vt,_t){this.stream.point(vt*ac,_t*ac)}});function h_(vt){return function(_t){var wt,Tt,At,Ot,Nt,jt,Gt,qt,en,Xt,sn=150,yn=480,vn=250,wn=0,un=0,Fn=0,Qn=0,_n=0,Bn=null,Hn=r1,Gn=null,Vn=jy,Ur=.5,$r=Wy(Qr,Ur);function Yr(Nr){return[(Nr=Nt(Nr[0]*ac,Nr[1]*ac))[0]*sn+Tt,At-Nr[1]*sn]}function Mr(Nr){return(Nr=Nt.invert((Nr[0]-Tt)/sn,(At-Nr[1])/sn))&&[Nr[0]*no,Nr[1]*no]}function Qr(Nr,Xr){return[(Nr=wt(Nr,Xr))[0]*sn+Tt,At-Nr[1]*sn]}function Hr(){Nt=q0(Ot=function(Xr,jr,ei){return(Xr%=Vu)?jr||ei?q0(X0(Xr),Z0(jr,ei)):X0(Xr):jr||ei?Z0(jr,ei):Y0}(Fn,Qn,_n),wt);var Nr=wt(wn,un);return Tt=yn-Nr[0]*sn,At=vn+Nr[1]*sn,Br()}function Br(){return en=Xt=null,Yr}return Yr.stream=function(Nr){return en&&Xt===Nr?en:en=qy(Hn(Ot,$r(Vn(Xt=Nr))))},Yr.clipAngle=function(Nr){return arguments.length?(Hn=+Nr?wm(Bn=Nr*ac,6*ac):(Bn=null,r1),Br()):Bn*no},Yr.clipExtent=function(Nr){return arguments.length?(Vn=Nr==null?(Gn=jt=Gt=qt=null,jy):bm(Gn=+Nr[0][0],jt=+Nr[0][1],Gt=+Nr[1][0],qt=+Nr[1][1]),Br()):Gn==null?null:[[Gn,jt],[Gt,qt]]},Yr.scale=function(Nr){return arguments.length?(sn=+Nr,Hr()):sn},Yr.translate=function(Nr){return arguments.length?(yn=+Nr[0],vn=+Nr[1],Hr()):[yn,vn]},Yr.center=function(Nr){return arguments.length?(wn=Nr[0]%360*ac,un=Nr[1]%360*ac,Hr()):[wn*no,un*no]},Yr.rotate=function(Nr){return arguments.length?(Fn=Nr[0]%360*ac,Qn=Nr[1]%360*ac,_n=Nr.length>2?Nr[2]%360*ac:0,Hr()):[Fn*no,Qn*no,_n*no]},Yr.precision=function(Nr){return arguments.length?($r=Wy(Qr,Ur=Nr*Nr),Br()):tg(Ur)},Yr.fitExtent=function(Nr,Xr){return sg(Yr,Nr,Xr)},Yr.fitSize=function(Nr,Xr){return function(jr,ei,xr){return sg(jr,[[0,0],ei],xr)}(Yr,Nr,Xr)},function(){return wt=_t.apply(this,arguments),Yr.invert=wt.invert&&Mr,Hr()}}(function(){return vt})()}var o1=function(vt){return function(_t,wt){var Tt=_a(_t),At=_a(wt),Ot=vt(Tt*At);return[Ot*At*ba(_t),Ot*ba(wt)]}}(function(vt){return(vt=fm(vt))&&vt/ba(vt)});function d_(){return h_(o1).scale(79.4188).clipAngle(179.999)}function Xd(vt,_t,wt,Tt){var At=vt.properties||{},Ot=vt.type==="Feature"?vt.geometry:vt;if(Ot.type==="GeometryCollection"){var Nt=[];return ur(vt,function(sn){var yn=Xd(sn,_t,wt,Tt);yn&&Nt.push(yn)}),Ft(Nt)}var jt=function(sn){var yn=hc(sn).geometry.coordinates,vn=[-yn[0],-yn[1]];return d_().rotate(vn).scale(rt)}(Ot),Gt={type:Ot.type,coordinates:Xy(Ot.coordinates,jt)},qt=new tm().read(Gt),en=on(nn(_t,wt),"meters"),Xt=Cs.bufferOp(qt,en,Tt);if(!Yy((Xt=new Ly().write(Xt)).coordinates))return xt({type:Xt.type,coordinates:Zy(Xt.coordinates,jt)},At)}function Yy(vt){return Array.isArray(vt[0])?Yy(vt[0]):isNaN(vt[0])}function Xy(vt,_t){return typeof vt[0]!="object"?_t(vt):vt.map(function(wt){return Xy(wt,_t)})}function Zy(vt,_t){return typeof vt[0]!="object"?_t.invert(vt):vt.map(function(wt){return Zy(wt,_t)})}function Zd(vt,_t,wt){wt===void 0&&(wt={});var Tt=Un(vt),At=Un(_t),Ot=dh.intersection(Tt.coordinates,At.coordinates);return Ot.length===0?null:Ot.length===1?Pt(Ot[0],wt.properties):Wt(Ot,wt.properties)}function Ky(vt,_t,wt){wt===void 0&&(wt={});var Tt=JSON.stringify(wt.properties||{}),At=vt[0],Ot=vt[1],Nt=vt[2],jt=vt[3],Gt=(Ot+jt)/2,qt=(At+Nt)/2,en=2*_t/oo([At,Gt],[Nt,Gt],wt)*(Nt-At),Xt=2*_t/oo([qt,Ot],[qt,jt],wt)*(jt-Ot),sn=en/2,yn=2*sn,vn=Math.sqrt(3)/2*Xt,wn=Nt-At,un=jt-Ot,Fn=3/4*yn,Qn=vn,_n=(wn-yn)/(yn-sn/2),Bn=Math.floor(_n),Hn=(Bn*Fn-sn/2-wn)/2-sn/2+Fn/2,Gn=Math.floor((un-vn)/vn),Vn=(un-Gn*vn)/2,Ur=Gn*vn-un>vn/2;Ur&&(Vn-=vn/4);for(var $r=[],Yr=[],Mr=0;Mr<6;Mr++){var Qr=2*Math.PI/6*Mr;$r.push(Math.cos(Qr)),Yr.push(Math.sin(Qr))}for(var Hr=[],Br=0;Br<=Bn;Br++)for(var Nr=0;Nr<=Gn;Nr++){var Xr=Br%2==1;if((Nr!==0||!Xr)&&(Nr!==0||!Ur)){var jr=Br*Fn+At-Hn,ei=Nr*Qn+Ot+Vn;if(Xr&&(ei-=vn/2),wt.triangles===!0)Qy([jr,ei],en/2,Xt/2,JSON.parse(Tt),$r,Yr).forEach(function(zi){wt.mask?Zd(wt.mask,zi)&&Hr.push(zi):Hr.push(zi)});else{var xr=Jy([jr,ei],en/2,Xt/2,JSON.parse(Tt),$r,Yr);wt.mask?Zd(wt.mask,xr)&&Hr.push(xr):Hr.push(xr)}}}return Ft(Hr)}function Jy(vt,_t,wt,Tt,At,Ot){for(var Nt=[],jt=0;jt<6;jt++){var Gt=vt[0]+_t*At[jt],qt=vt[1]+wt*Ot[jt];Nt.push([Gt,qt])}return Nt.push(Nt[0].slice()),Pt([Nt],Tt)}function Qy(vt,_t,wt,Tt,At,Ot){for(var Nt=[],jt=0;jt<6;jt++){var Gt=[];Gt.push(vt),Gt.push([vt[0]+_t*At[jt],vt[1]+wt*Ot[jt]]),Gt.push([vt[0]+_t*At[(jt+1)%6],vt[1]+wt*Ot[(jt+1)%6]]),Gt.push(vt),Nt.push(Pt([Gt],Tt))}return Nt}function ev(vt){return Wt(vt)}function f_(vt){return Pt(vt&&vt.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function tv(vt,_t,wt){return wt===void 0&&(wt={}),function(Tt,At,Ot,Nt){Nt===void 0&&(Nt={});for(var jt=[],Gt=Tt[0],qt=Tt[1],en=Tt[2],Xt=Tt[3],sn=At/oo([Gt,qt],[en,qt],Nt)*(en-Gt),yn=Ot/oo([Gt,qt],[Gt,Xt],Nt)*(Xt-qt),vn=en-Gt,wn=Xt-qt,un=Math.floor(vn/sn),Fn=Math.floor(wn/yn),Qn=(wn-Fn*yn)/2,_n=Gt+(vn-un*sn)/2,Bn=0;Bn<un;Bn++){for(var Hn=qt+Qn,Gn=0;Gn<Fn;Gn++){var Vn=Pt([[[_n,Hn],[_n,Hn+yn],[_n+sn,Hn+yn],[_n+sn,Hn],[_n,Hn]]],Nt.properties);Nt.mask?S1(Nt.mask,Vn)&&jt.push(Vn):jt.push(Vn),Hn+=yn}_n+=sn}return Ft(jt)}(vt,_t,_t,wt)}function s1(vt,_t,wt){wt===void 0&&(wt={});for(var Tt=[],At=_t/oo([vt[0],vt[1]],[vt[2],vt[1]],wt)*(vt[2]-vt[0]),Ot=_t/oo([vt[0],vt[1]],[vt[0],vt[3]],wt)*(vt[3]-vt[1]),Nt=0,jt=vt[0];jt<=vt[2];){for(var Gt=0,qt=vt[1];qt<=vt[3];){var en=null,Xt=null;Nt%2==0&&Gt%2==0?(en=Pt([[[jt,qt],[jt,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties),Xt=Pt([[[jt,qt+Ot],[jt+At,qt+Ot],[jt+At,qt],[jt,qt+Ot]]],wt.properties)):Nt%2==0&&Gt%2==1?(en=Pt([[[jt,qt],[jt+At,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties),Xt=Pt([[[jt,qt],[jt,qt+Ot],[jt+At,qt+Ot],[jt,qt]]],wt.properties)):Gt%2==0&&Nt%2==1?(en=Pt([[[jt,qt],[jt,qt+Ot],[jt+At,qt+Ot],[jt,qt]]],wt.properties),Xt=Pt([[[jt,qt],[jt+At,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties)):Gt%2==1&&Nt%2==1&&(en=Pt([[[jt,qt],[jt,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties),Xt=Pt([[[jt,qt+Ot],[jt+At,qt+Ot],[jt+At,qt],[jt,qt+Ot]]],wt.properties)),wt.mask?(Zd(wt.mask,en)&&Tt.push(en),Zd(wt.mask,Xt)&&Tt.push(Xt)):(Tt.push(en),Tt.push(Xt)),qt+=Ot,Gt++}Nt++,jt+=At}return Ft(Tt)}o1.invert=function(vt){return function(_t,wt){var Tt=tg(_t*_t+wt*wt),At=vt(Tt),Ot=ba(At),Nt=_a(At);return[Kf(_t*Ot,Tt*Nt),Eu(Tt&&wt*Ot/Tt)]}}(function(vt){return vt}),nt.along=function(vt,_t,wt){wt===void 0&&(wt={});for(var Tt=Un(vt).coordinates,At=0,Ot=0;Ot<Tt.length&&!(_t>=At&&Ot===Tt.length-1);Ot++){if(At>=_t){var Nt=_t-At;if(Nt){var jt=Rc(Tt[Ot],Tt[Ot-1])-180;return Aa(Tt[Ot],Nt,jt,wt)}return kt(Tt[Ot])}At+=oo(Tt[Ot],Tt[Ot+1],wt)}return kt(Tt[Tt.length-1])},nt.angle=function(vt,_t,wt,Tt){if(Tt===void 0&&(Tt={}),!cn(Tt))throw new Error("options is invalid");if(!vt)throw new Error("startPoint is required");if(!_t)throw new Error("midPoint is required");if(!wt)throw new Error("endPoint is required");var At=vt,Ot=_t,Nt=wt,jt=gn(Tt.mercator!==!0?Rc(At,Ot):sh(At,Ot)),Gt=gn(Tt.mercator!==!0?Rc(Nt,Ot):sh(Nt,Ot)),qt=Math.abs(jt-Gt);return Tt.explementary===!0?360-qt:qt},nt.applyFilter=jg,nt.area=Bh,nt.areaFactors=bt,nt.bbox=dn,nt.bboxClip=function(vt,_t){var wt=Un(vt),Tt=wt.type,At=vt.type==="Feature"?vt.properties:{},Ot=wt.coordinates;switch(Tt){case"LineString":case"MultiLineString":var Nt=[];return Tt==="LineString"&&(Ot=[Ot]),Ot.forEach(function(jt){(function(Gt,qt,en){var Xt,sn,yn,vn,wn,un=Gt.length,Fn=su(Gt[0],qt),Qn=[];for(en||(en=[]),Xt=1;Xt<un;Xt++){for(vn=Gt[Xt-1],sn=yn=su(wn=Gt[Xt],qt);;){if(!(Fn|sn)){Qn.push(vn),sn!==yn?(Qn.push(wn),Xt<un-1&&(en.push(Qn),Qn=[])):Xt===un-1&&Qn.push(wn);break}if(Fn&sn)break;Fn?Fn=su(vn=wp(vn,wn,Fn,qt),qt):sn=su(wn=wp(vn,wn,sn,qt),qt)}Fn=yn}Qn.length&&en.push(Qn)})(jt,_t,Nt)}),Nt.length===1?Dt(Nt[0],At):Yt(Nt,At);case"Polygon":return Pt(da(Ot,_t),At);case"MultiPolygon":return Wt(Ot.map(function(jt){return da(jt,_t)}),At);default:throw new Error("geometry "+Tt+" not supported")}},nt.bboxPolygon=up,nt.bearing=Rc,nt.bearingToAngle=gn,nt.bearingToAzimuth=gn,nt.bezier=_g,nt.bezierSpline=_g,nt.booleanClockwise=Ep,nt.booleanContains=function(vt,_t){var wt=Un(vt),Tt=Un(_t),At=wt.type,Ot=Tt.type,Nt=wt.coordinates,jt=Tt.coordinates;switch(At){case"Point":switch(Ot){case"Point":return i0(Nt,jt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"MultiPoint":switch(Ot){case"Point":return function(Gt,qt){var en,Xt=!1;for(en=0;en<Gt.coordinates.length;en++)if(i0(Gt.coordinates[en],qt.coordinates)){Xt=!0;break}return Xt}(wt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=0,Xt=qt.coordinates;en<Xt.length;en++){for(var sn=Xt[en],yn=!1,vn=0,wn=Gt.coordinates;vn<wn.length;vn++)if(i0(sn,wn[vn])){yn=!0;break}if(!yn)return!1}return!0}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"Point":return Tl(Tt,wt,{ignoreEndVertices:!0});case"LineString":return function(Gt,qt){for(var en=!1,Xt=0,sn=qt.coordinates;Xt<sn.length;Xt++){var yn=sn[Xt];if(Tl({type:"Point",coordinates:yn},Gt,{ignoreEndVertices:!0})&&(en=!0),!Tl({type:"Point",coordinates:yn},Gt,{ignoreEndVertices:!1}))return!1}return en}(wt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=!1,Xt=0,sn=qt.coordinates;Xt<sn.length;Xt++){var yn=sn[Xt];if(Tl(yn,Gt,{ignoreEndVertices:!0})&&(en=!0),!Tl(yn,Gt))return!1}return!!en}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"Point":return ro(Tt,wt,{ignoreBoundary:!0});case"LineString":return function(Gt,qt){var en=!1,Xt=0,sn=dn(Gt),yn=dn(qt);if(!b1(sn,yn))return!1;for(;Xt<qt.coordinates.length-1;Xt++)if(ro({type:"Point",coordinates:Ev(qt.coordinates[Xt],qt.coordinates[Xt+1])},Gt,{ignoreBoundary:!0})){en=!0;break}return en}(wt,Tt);case"Polygon":return function(Gt,qt){if(Gt.type==="Feature"&&Gt.geometry===null||qt.type==="Feature"&&qt.geometry===null)return!1;var en=dn(Gt),Xt=dn(qt);if(!b1(en,Xt))return!1;for(var sn=Un(qt).coordinates,yn=0,vn=sn;yn<vn.length;yn++)for(var wn=0,un=vn[yn];wn<un.length;wn++)if(!ro(un[wn],Gt))return!1;return!0}(wt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=0,Xt=qt.coordinates;en<Xt.length;en++)if(!ro(Xt[en],Gt,{ignoreBoundary:!0}))return!1;return!0}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanCrosses=function(vt,_t){var wt=Un(vt),Tt=Un(_t),At=wt.type,Ot=Tt.type;switch(At){case"MultiPoint":switch(Ot){case"LineString":return x1(wt,Tt);case"Polygon":return o0(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"MultiPoint":return x1(Tt,wt);case"LineString":return function(Nt,jt){if(Vs(Nt,jt).features.length>0)for(var Gt=0;Gt<Nt.coordinates.length-1;Gt++)for(var qt=0;qt<jt.coordinates.length-1;qt++){var en=!0;if(qt!==0&&qt!==jt.coordinates.length-2||(en=!1),E1(Nt.coordinates[Gt],Nt.coordinates[Gt+1],jt.coordinates[qt],en))return!0}return!1}(wt,Tt);case"Polygon":return w1(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"MultiPoint":return o0(Tt,wt);case"LineString":return w1(Tt,wt);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanDisjoint=r0,nt.booleanEqual=function(vt,_t){return Un(vt).type===Un(_t).type&&new s0({precision:6}).compare(Kl(vt),Kl(_t))},nt.booleanIntersects=S1,nt.booleanOverlap=function(vt,_t){var wt=Un(vt),Tt=Un(_t),At=wt.type,Ot=Tt.type;if(At==="MultiPoint"&&Ot!=="MultiPoint"||(At==="LineString"||At==="MultiLineString")&&Ot!=="LineString"&&Ot!=="MultiLineString"||(At==="Polygon"||At==="MultiPolygon")&&Ot!=="Polygon"&&Ot!=="MultiPolygon")throw new Error("features must be of the same type");if(At==="Point")throw new Error("Point geometry not supported");if(new s0({precision:6}).compare(vt,_t))return!1;var Nt=0;switch(At){case"MultiPoint":for(var jt=0;jt<wt.coordinates.length;jt++)for(var Gt=0;Gt<Tt.coordinates.length;Gt++){var qt=wt.coordinates[jt],en=Tt.coordinates[Gt];if(qt[0]===en[0]&&qt[1]===en[1])return!0}return!1;case"LineString":case"MultiLineString":Fr(vt,function(Xt){Fr(_t,function(sn){vf(Xt,sn).features.length&&Nt++})});break;case"Polygon":case"MultiPolygon":Fr(vt,function(Xt){Fr(_t,function(sn){Vs(Xt,sn).features.length&&Nt++})})}return Nt>0},nt.booleanParallel=function(vt,_t){if(!vt)throw new Error("line1 is required");if(!_t)throw new Error("line2 is required");if(u0(vt,"line1")!=="LineString")throw new Error("line1 must be a LineString");if(u0(_t,"line2")!=="LineString")throw new Error("line2 must be a LineString");for(var wt=La(Kl(vt)).features,Tt=La(Kl(_t)).features,At=0;At<wt.length;At++){var Ot=wt[At].geometry.coordinates;if(!Tt[At])break;if(!Ng(Ot,Tt[At].geometry.coordinates))return!1}return!0},nt.booleanPointInPolygon=ro,nt.booleanPointOnLine=Tl,nt.booleanWithin=Fh,nt.buffer=function(vt,_t,wt){var Tt=(wt=wt||{}).units||"kilometers",At=wt.steps||8;if(!vt)throw new Error("geojson is required");if(typeof wt!="object")throw new Error("options must be an object");if(typeof At!="number")throw new Error("steps must be an number");if(_t===void 0)throw new Error("radius is required");if(At<=0)throw new Error("steps must be greater than 0");var Ot=[];switch(vt.type){case"GeometryCollection":return ur(vt,function(Nt){var jt=Xd(Nt,_t,Tt,At);jt&&Ot.push(jt)}),Ft(Ot);case"FeatureCollection":return nr(vt,function(Nt){var jt=Xd(Nt,_t,Tt,At);jt&&nr(jt,function(Gt){Gt&&Ot.push(Gt)})}),Ft(Ot)}return Xd(vt,_t,Tt,At)},nt.center=hc,nt.centerMean=m0,nt.centerMedian=function(vt,_t){if(_t===void 0&&(_t={}),!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.counter||10;if(!$n(wt))throw new Error("counter must be a number");var Tt=_t.weight,At=m0(vt,{weight:_t.weight}),Ot=Ft([]);nr(vt,function(jt){var Gt;Ot.features.push(dc(jt,{properties:{weight:(Gt=jt.properties)===null||Gt===void 0?void 0:Gt[Tt]}}))});var Nt={tolerance:_t.tolerance,medianCandidates:[]};return H1(At.geometry.coordinates,[0,0],Ot,Nt,wt)},nt.centerOfMass=function vt(_t,wt){switch(wt===void 0&&(wt={}),sr(_t)){case"Point":return kt(fn(_t),wt.properties);case"Polygon":var Tt=[];hn(_t,function(Bn){Tt.push(Bn)});var At,Ot,Nt,jt,Gt,qt,en,Xt,sn=dc(_t,{properties:wt.properties}),yn=sn.geometry.coordinates,vn=0,wn=0,un=0,Fn=Tt.map(function(Bn){return[Bn[0]-yn[0],Bn[1]-yn[1]]});for(At=0;At<Tt.length-1;At++)jt=(Ot=Fn[At])[0],qt=Ot[1],Gt=(Nt=Fn[At+1])[0],un+=Xt=jt*(en=Nt[1])-Gt*qt,vn+=(jt+Gt)*Xt,wn+=(qt+en)*Xt;if(un===0)return sn;var Qn=1/(6*(.5*un));return kt([yn[0]+Qn*vn,yn[1]+Qn*wn],wt.properties);default:var _n=Eo(_t);return _n?vt(_n,{properties:wt.properties}):dc(_t,{properties:wt.properties})}},nt.centroid=dc,nt.circle=hp,nt.cleanCoords=Kl,nt.clone=Po,nt.clusterEach=v0,nt.clusterReduce=Hg,nt.clusters=qv,nt.clustersDbscan=function(vt,_t,wt){wt===void 0&&(wt={}),wt.mutate!==!0&&(vt=Po(vt)),wt.minPoints=wt.minPoints||3;var Tt=new Av.DBSCAN,At=Tt.run(or(vt),kn(_t,wt.units),wt.minPoints,oo),Ot=-1;return At.forEach(function(Nt){Ot++,Nt.forEach(function(jt){var Gt=vt.features[jt];Gt.properties||(Gt.properties={}),Gt.properties.cluster=Ot,Gt.properties.dbscan="core"})}),Tt.noise.forEach(function(Nt){var jt=vt.features[Nt];jt.properties||(jt.properties={}),jt.properties.cluster?jt.properties.dbscan="edge":jt.properties.dbscan="noise"}),vt},nt.clustersKmeans=function(vt,_t){_t===void 0&&(_t={});var wt=vt.features.length;_t.numberOfClusters=_t.numberOfClusters||Math.round(Math.sqrt(wt/2)),_t.numberOfClusters>wt&&(_t.numberOfClusters=wt),_t.mutate!==!0&&(vt=Po(vt));var Tt=or(vt),At=Tt.slice(0,_t.numberOfClusters),Ot=c0(Tt,_t.numberOfClusters,At),Nt={};return Ot.centroids.forEach(function(jt,Gt){Nt[Gt]=jt}),nr(vt,function(jt,Gt){var qt=Ot.idxs[Gt];jt.properties.cluster=qt,jt.properties.centroid=Nt[qt]}),vt},nt.collect=function(vt,_t,wt,Tt){var At=kr(6),Ot=_t.features.map(function(Nt){var jt;return{minX:Nt.geometry.coordinates[0],minY:Nt.geometry.coordinates[1],maxX:Nt.geometry.coordinates[0],maxY:Nt.geometry.coordinates[1],property:(jt=Nt.properties)===null||jt===void 0?void 0:jt[wt]}});return At.load(Ot),vt.features.forEach(function(Nt){Nt.properties||(Nt.properties={});var jt=dn(Nt),Gt=At.search({minX:jt[0],minY:jt[1],maxX:jt[2],maxY:jt[3]}),qt=[];Gt.forEach(function(en){ro([en.minX,en.minY],Nt)&&qt.push(en.property)}),Nt.properties[Tt]=qt}),vt},nt.collectionOf=Kn,nt.combine=function(vt){var _t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return nr(vt,function(wt){var Tt,At,Ot,Nt;switch((Nt=wt.geometry)===null||Nt===void 0?void 0:Nt.type){case"Point":_t.MultiPoint.coordinates.push(wt.geometry.coordinates),_t.MultiPoint.properties.push(wt.properties);break;case"MultiPoint":(Tt=_t.MultiPoint.coordinates).push.apply(Tt,wt.geometry.coordinates),_t.MultiPoint.properties.push(wt.properties);break;case"LineString":_t.MultiLineString.coordinates.push(wt.geometry.coordinates),_t.MultiLineString.properties.push(wt.properties);break;case"MultiLineString":(At=_t.MultiLineString.coordinates).push.apply(At,wt.geometry.coordinates),_t.MultiLineString.properties.push(wt.properties);break;case"Polygon":_t.MultiPolygon.coordinates.push(wt.geometry.coordinates),_t.MultiPolygon.properties.push(wt.properties);break;case"MultiPolygon":(Ot=_t.MultiPolygon.coordinates).push.apply(Ot,wt.geometry.coordinates),_t.MultiPolygon.properties.push(wt.properties)}}),Ft(Object.keys(_t).filter(function(wt){return _t[wt].coordinates.length}).sort().map(function(wt){return xt({type:wt,coordinates:_t[wt].coordinates},{collectedProperties:_t[wt].properties})}))},nt.concave=function(vt,_t){_t===void 0&&(_t={});var wt=_t.maxEdge||1/0,Tt=Yl(function(Ot){var Nt=[],jt={};return nr(Ot,function(Gt){if(Gt.geometry){var qt=Gt.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(jt,qt)||(Nt.push(Gt),jt[qt]=!0)}}),Ft(Nt)}(vt));if(Tt.features=Tt.features.filter(function(Ot){var Nt=Ot.geometry.coordinates[0][0],jt=Ot.geometry.coordinates[0][1],Gt=Ot.geometry.coordinates[0][2],qt=oo(Nt,jt,_t),en=oo(jt,Gt,_t),Xt=oo(Nt,Gt,_t);return qt<=wt&&en<=wt&&Xt<=wt}),Tt.features.length<1)return null;var At=yg(Tt);return At.coordinates.length===1&&(At.coordinates=At.coordinates[0],At.type="Polygon"),xt(At)},nt.containsNumber=xn,nt.convertArea=Mn,nt.convertDistance=kn,nt.convertLength=kn,nt.convex=Eo,nt.coordAll=or,nt.coordEach=hn,nt.coordReduce=zn,nt.createBins=_0,nt.degrees2radians=An,nt.degreesToRadians=An,nt.destination=Aa,nt.difference=function(vt,_t){var wt=Un(vt),Tt=Un(_t),At=vt.properties||{},Ot=dh.difference(wt.coordinates,Tt.coordinates);return Ot.length===0?null:Ot.length===1?Pt(Ot[0],At):Wt(Ot,At)},nt.dissolve=function(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.propertyName;Kn(vt,"Polygon","dissolve");var Tt=[];if(!_t.propertyName)return wd(Wt(dh.union.apply(null,vt.features.map(function(Gt){return Gt.geometry.coordinates}))));var At={};nr(vt,function(Gt){Object.prototype.hasOwnProperty.call(At,Gt.properties[wt])||(At[Gt.properties[wt]]=[]),At[Gt.properties[wt]].push(Gt)});for(var Ot=Object.keys(At),Nt=0;Nt<Ot.length;Nt++){var jt=Wt(dh.union.apply(null,At[Ot[Nt]].map(function(Gt){return Gt.geometry.coordinates})));jt.properties[wt]=Ot[Nt],Tt.push(jt)}return wd(Ft(Tt))},nt.distance=oo,nt.distanceToDegrees=mn,nt.distanceToRadians=nn,nt.distanceWeight=V1,nt.earthRadius=rt,nt.ellipse=F1,nt.envelope=ef,nt.explode=pd,nt.factors=it,nt.feature=xt,nt.featureCollection=Ft,nt.featureEach=nr,nt.featureOf=Nn,nt.featureReduce=dr,nt.filterProperties=ty,nt.findPoint=Cn,nt.findSegment=pr,nt.flatten=wd,nt.flattenEach=Sr,nt.flattenReduce=rr,nt.flip=function(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.mutate;if(!vt)throw new Error("geojson is required");return wt!==!1&&wt!==void 0||(vt=Po(vt)),hn(vt,function(Tt){var At=Tt[0],Ot=Tt[1];Tt[0]=Ot,Tt[1]=At}),vt},nt.geojsonType=hr,nt.geomEach=ur,nt.geomReduce=Cr,nt.geometry=Et,nt.geometryCollection=Qt,nt.getCluster=ey,nt.getCoord=fn,nt.getCoords=On,nt.getGeom=Un,nt.getType=sr,nt.greatCircle=function(vt,_t,wt){if(typeof(wt=wt||{})!="object")throw new Error("options is invalid");var Tt=wt.properties,At=wt.npoints,Ot=wt.offset;return vt=fn(vt),_t=fn(_t),Tt=Tt||{},At=At||100,Ot=Ot||10,new Jr({x:vt[0],y:vt[1]},{x:_t[0],y:_t[1]},Tt).Arc(At,{offset:Ot}).json()},nt.helpers=jn,nt.hexGrid=Ky,nt.inside=ro,nt.interpolate=function(vt,_t,wt){if(typeof(wt=wt||{})!="object")throw new Error("options is invalid");var Tt=wt.gridType,At=wt.property,Ot=wt.weight;if(!vt)throw new Error("points is required");if(Kn(vt,"Point","input must contain Points"),!_t)throw new Error("cellSize is required");if(Ot!==void 0&&typeof Ot!="number")throw new Error("weight must be a number");At=At||"elevation",Tt=Tt||"square",Ot=Ot||1;var Nt,jt=dn(vt);switch(Tt){case"point":case"points":Nt=yf(jt,_t,wt);break;case"square":case"squares":Nt=tv(jt,_t,wt);break;case"hex":case"hexes":Nt=Ky(jt,_t,wt);break;case"triangle":case"triangles":Nt=s1(jt,_t,wt);break;default:throw new Error("invalid gridType")}var Gt=[];return nr(Nt,function(qt){var en=0,Xt=0;nr(vt,function(yn){var vn,wn=oo(Tt==="point"?qt:dc(qt),yn,wt);if(At!==void 0&&(vn=yn.properties[At]),vn===void 0&&(vn=yn.geometry.coordinates[2]),vn===void 0)throw new Error("zValue is missing");wn===0&&(en=vn);var un=1/Math.pow(wn,Ot);Xt+=un,en+=un*vn});var sn=Po(qt);sn.properties[At]=en/Xt,Gt.push(sn)}),Ft(Gt)},nt.intersect=Zd,nt.invariant=ar,nt.isNumber=$n,nt.isObject=cn,nt.isobands=function(vt,_t,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.zProperty||"elevation",At=wt.commonProperties||{},Ot=wt.breaksProperties||[];if(Kn(vt,"Point","Input must contain Points"),!_t)throw new Error("breaks is required");if(!Array.isArray(_t))throw new Error("breaks is not an Array");if(!cn(At))throw new Error("commonProperties is not an Object");if(!Array.isArray(Ot))throw new Error("breaksProperties is not an Array");var Nt=Vm(vt,{zProperty:Tt,flip:!0}),jt=function(Gt,qt,en){for(var Xt=[],sn=1;sn<qt.length;sn++){var yn=+qt[sn-1],vn=+qt[sn],wn=_v(Cp(Gh(Gt,yn,vn-yn))),un={};un.groupedRings=wn,un[en]=yn+"-"+vn,Xt.push(un)}return Xt}(Nt,_t,Tt);return Ft((jt=function(Gt,qt,en){var Xt=dn(en),sn=Xt[2]-Xt[0],yn=Xt[3]-Xt[1],vn=Xt[0],wn=Xt[1],un=qt[0].length-1,Fn=qt.length-1,Qn=sn/un,_n=yn/Fn,Bn=function(Hn){Hn[0]=Hn[0]*Qn+vn,Hn[1]=Hn[1]*_n+wn};return Gt.forEach(function(Hn){Hn.groupedRings.forEach(function(Gn){Gn.forEach(function(Vn){Vn.forEach(Bn)})})}),Gt}(jt,Nt,vt)).map(function(Gt,qt){if(Ot[qt]&&!cn(Ot[qt]))throw new Error("Each mappedProperty is required to be an Object");var en=mi({},At,Ot[qt]);return en[Tt]=Gt[Tt],Wt(Gt.groupedRings,en)}))},nt.isolines=function(vt,_t,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.zProperty||"elevation",At=wt.commonProperties||{},Ot=wt.breaksProperties||[];if(Kn(vt,"Point","Input must contain Points"),!_t)throw new Error("breaks is required");if(!Array.isArray(_t))throw new Error("breaks must be an Array");if(!cn(At))throw new Error("commonProperties must be an Object");if(!Array.isArray(Ot))throw new Error("breaksProperties must be an Array");var Nt=En(vt,{zProperty:Tt,flip:!0});return Ft(function(jt,Gt,qt){var en=dn(qt),Xt=en[2]-en[0],sn=en[3]-en[1],yn=en[0],vn=en[1],wn=Gt[0].length-1,un=Gt.length-1,Fn=Xt/wn,Qn=sn/un,_n=function(Bn){Bn[0]=Bn[0]*Fn+yn,Bn[1]=Bn[1]*Qn+vn};return jt.forEach(function(Bn){hn(Bn,_n)}),jt}(function(jt,Gt,qt,en,Xt){for(var sn=[],yn=1;yn<Gt.length;yn++){var vn=+Gt[yn],wn=mi({},en,Xt[yn]);wn[qt]=vn;var un=Yt(Ni(jt,vn),wn);sn.push(un)}return sn}(Nt,_t,Tt,At,Ot),Nt,vt))},nt.kinks=function(vt){var _t,wt,Tt={type:"FeatureCollection",features:[]};if((wt=vt.type==="Feature"?vt.geometry:vt).type==="LineString")_t=[wt.coordinates];else if(wt.type==="MultiLineString")_t=wt.coordinates;else if(wt.type==="MultiPolygon")_t=[].concat.apply([],wt.coordinates);else{if(wt.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");_t=wt.coordinates}return _t.forEach(function(At){_t.forEach(function(Ot){for(var Nt=0;Nt<At.length-1;Nt++)for(var jt=Nt;jt<Ot.length-1;jt++)if(!(At===Ot&&(Math.abs(Nt-jt)===1||Nt===0&&jt===At.length-2&&At[Nt][0]===At[At.length-1][0]&&At[Nt][1]===At[At.length-1][1]))){var Gt=bd(At[Nt][0],At[Nt][1],At[Nt+1][0],At[Nt+1][1],Ot[jt][0],Ot[jt][1],Ot[jt+1][0],Ot[jt+1][1]);Gt&&Tt.features.push(kt([Gt[0],Gt[1]]))}})}),Tt},nt.length=pf,nt.lengthToDegrees=mn,nt.lengthToRadians=nn,nt.lineArc=tl,nt.lineChunk=function(vt,_t,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.units,At=wt.reverse;if(!vt)throw new Error("geojson is required");if(_t<=0)throw new Error("segmentLength must be greater than 0");var Ot=[];return Sr(vt,function(Nt){At&&(Nt.geometry.coordinates=Nt.geometry.coordinates.reverse()),function(jt,Gt,qt,en){var Xt=pf(jt,{units:qt});if(Xt<=Gt)return en(jt);var sn=Xt/Gt;Number.isInteger(sn)||(sn=Math.floor(sn)+1);for(var yn=0;yn<sn;yn++)en(Au(jt,Gt*yn,Gt*(yn+1),{units:qt}),yn)}(Nt,_t,Tt,function(jt){Ot.push(jt)})}),Ft(Ot)},nt.lineDistance=pf,nt.lineEach=_r,nt.lineIntersect=Vs,nt.lineOffset=function(vt,_t,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.units;if(!vt)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("distance is required");var At=sr(vt),Ot=vt.properties;switch(At){case"LineString":return wf(vt,_t,Tt);case"MultiLineString":var Nt=[];return Sr(vt,function(jt){Nt.push(wf(jt,_t,Tt).geometry.coordinates)}),Yt(Nt,Ot);default:throw new Error("geometry "+At+" is not supported")}},nt.lineOverlap=vf,nt.lineReduce=yr,nt.lineSegment=La,nt.lineSlice=function(vt,_t,wt){var Tt=On(wt);if(sr(wt)!=="LineString")throw new Error("line must be a LineString");for(var At,Ot=Dc(wt,vt),Nt=Dc(wt,_t),jt=[(At=Ot.properties.index<=Nt.properties.index?[Ot,Nt]:[Nt,Ot])[0].geometry.coordinates],Gt=At[0].properties.index+1;Gt<At[1].properties.index+1;Gt++)jt.push(Tt[Gt]);return jt.push(At[1].geometry.coordinates),Dt(jt,wt.properties)},nt.lineSliceAlong=Au,nt.lineSplit=function(vt,_t){if(!vt)throw new Error("line is required");if(!_t)throw new Error("splitter is required");var wt=sr(vt),Tt=sr(_t);if(wt!=="LineString")throw new Error("line must be LineString");if(Tt==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(Tt==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var At=zh(_t,{precision:7});switch(Tt){case"Point":return $i(vt,At);case"MultiPoint":return oi(vt,At);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return oi(vt,Vs(vt,At))}},nt.lineString=Dt,nt.lineStringToPolygon=Ig,nt.lineStrings=Bt,nt.lineToPolygon=Ig,nt.mask=function(vt,_t){var wt,Tt=f_(_t),At=null;return vt.type==="FeatureCollection"?At=ev((wt=vt).features.length===2?dh.union(wt.features[0].geometry.coordinates,wt.features[1].geometry.coordinates):dh.union.apply(dh,wt.features.map(function(Ot){return Ot.geometry.coordinates}))):At=ev(dh.union(vt.geometry.coordinates)),At.geometry.coordinates.forEach(function(Ot){Tt.geometry.coordinates.push(Ot[0])}),Tt},nt.meta=rn,nt.midpoint=function(vt,_t){return Aa(vt,oo(vt,_t)/2,Rc(vt,_t))},nt.moranIndex=function(vt,_t){var wt=_t.inputField,Tt=_t.threshold||1e5,At=_t.p||2,Ot=_t.binary||!1,Nt=V1(vt,{alpha:_t.alpha||-1,binary:Ot,p:At,standardization:_t.standardization||!0,threshold:Tt}),jt=[];nr(vt,function(Gn){var Vn=Gn.properties||{};jt.push(Vn[wt])});for(var Gt=U1(jt),qt=function(Gn){for(var Vn=U1(Gn),Ur=0,$r=0,Yr=Gn;$r<Yr.length;$r++){var Mr=Yr[$r];Ur+=Math.pow(Mr-Vn,2)}return Ur/Gn.length}(jt),en=0,Xt=0,sn=0,yn=0,vn=Nt.length,wn=0;wn<vn;wn++){for(var un=0,Fn=0;Fn<vn;Fn++)en+=Nt[wn][Fn]*(jt[wn]-Gt)*(jt[Fn]-Gt),Xt+=Nt[wn][Fn],sn+=Math.pow(Nt[wn][Fn]+Nt[Fn][wn],2),un+=Nt[wn][Fn]+Nt[Fn][wn];yn+=Math.pow(un,2)}var Qn=en/Xt/qt,_n=-1/(vn-1),Bn=(vn*vn*(sn*=.5)-vn*yn+Xt*Xt*3)/((vn-1)*(vn+1)*(Xt*Xt))-_n*_n,Hn=Math.sqrt(Bn);return{expectedMoranIndex:_n,moranIndex:Qn,stdNorm:Hn,zNorm:(Qn-_n)/Hn}},nt.multiLineString=Yt,nt.multiPoint=Zt,nt.multiPolygon=Wt,nt.nearest=Rh,nt.nearestPoint=Rh,nt.nearestPointOnLine=Dc,nt.nearestPointToLine=function(vt,_t,wt){wt===void 0&&(wt={});var Tt=wt.units,At=wt.properties||{},Ot=function(Gt){var qt=[];switch(Gt.geometry?Gt.geometry.type:Gt.type){case"GeometryCollection":return ur(Gt,function(en){en.type==="Point"&&qt.push({type:"Feature",properties:{},geometry:en})}),{type:"FeatureCollection",features:qt};case"FeatureCollection":return Gt.features=Gt.features.filter(function(en){return en.geometry.type==="Point"}),Gt;default:throw new Error("points must be a Point Collection")}}(vt);if(!Ot.features.length)throw new Error("points must contain features");if(!_t)throw new Error("line is required");if(sr(_t)!=="LineString")throw new Error("line must be a LineString");var Nt=1/0,jt=null;return nr(Ot,function(Gt){var qt=Tg(Gt,_t,{units:Tt});qt<Nt&&(Nt=qt,jt=Gt)}),jt&&(jt.properties=mi({dist:Nt},jt.properties,At)),jt},nt.planepoint=function(vt,_t){var wt=fn(vt),Tt=Un(_t).coordinates[0];if(Tt.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var At=_t.properties||{},Ot=At.a,Nt=At.b,jt=At.c,Gt=wt[0],qt=wt[1],en=Tt[0][0],Xt=Tt[0][1],sn=Ot!==void 0?Ot:Tt[0][2],yn=Tt[1][0],vn=Tt[1][1],wn=Nt!==void 0?Nt:Tt[1][2],un=Tt[2][0],Fn=Tt[2][1],Qn=jt!==void 0?jt:Tt[2][2];return(Qn*(Gt-en)*(qt-vn)+sn*(Gt-yn)*(qt-Fn)+wn*(Gt-un)*(qt-Xt)-wn*(Gt-en)*(qt-Fn)-Qn*(Gt-yn)*(qt-Xt)-sn*(Gt-un)*(qt-vn))/((Gt-en)*(qt-vn)+(Gt-yn)*(qt-Fn)+(Gt-un)*(qt-Xt)-(Gt-en)*(qt-Fn)-(Gt-yn)*(qt-Xt)-(Gt-un)*(qt-vn))},nt.point=kt,nt.pointGrid=yf,nt.pointOnFeature=kg,nt.pointOnLine=Dc,nt.pointOnSurface=kg,nt.pointToLineDistance=Tg,nt.points=Lt,nt.pointsWithinPolygon=Ai,nt.polygon=Pt,nt.polygonSmooth=function(vt,_t){var wt=[],Tt=_t.iterations||1;if(!vt)throw new Error("inputPolys is required");return ur(vt,function(At,Ot,Nt){var jt,Gt,qt;switch(At.type){case"Polygon":jt=[[]];for(var en=0;en<Tt;en++)qt=[[]],Gt=At,en>0&&(Gt=Pt(jt).geometry),Hv(Gt,qt),jt=qt.slice(0);wt.push(Pt(jt,Nt));break;case"MultiPolygon":jt=[[[]]];for(var Xt=0;Xt<Tt;Xt++)qt=[[[]]],Gt=At,Xt>0&&(Gt=Wt(jt).geometry),jv(Gt,qt),jt=qt.slice(0);wt.push(Wt(jt,Nt));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),Ft(wt)},nt.polygonTangents=function(vt,_t){var wt,Tt,At,Ot,Nt=On(vt),jt=On(_t),Gt=dn(_t),qt=0,en=null;switch(Nt[0]>Gt[0]&&Nt[0]<Gt[2]&&Nt[1]>Gt[1]&&Nt[1]<Gt[3]&&(qt=(en=Rh(vt,pd(_t))).properties.featureIndex),sr(_t)){case"Polygon":wt=jt[0][qt],Tt=jt[0][0],en!==null&&en.geometry.coordinates[1]<Nt[1]&&(Tt=jt[0][qt]),Ot=ah(jt[0][0],jt[0][jt[0].length-1],Nt);var Xt=jm(jt[0],Nt,Ot,At,wt,Tt);wt=Xt[0],Tt=Xt[1];break;case"MultiPolygon":for(var sn=0,yn=0,vn=0,wn=0;wn<jt[0].length;wn++){sn=wn;for(var un=!1,Fn=0;Fn<jt[0][wn].length;Fn++){if(yn=Fn,vn===qt){un=!0;break}vn++}if(un)break}wt=jt[0][sn][yn],Tt=jt[0][sn][yn],Ot=ah(jt[0][0][0],jt[0][0][jt[0][0].length-1],Nt),jt.forEach(function(Qn){var _n=jm(Qn[0],Nt,Ot,At,wt,Tt);wt=_n[0],Tt=_n[1]})}return Ft([kt(wt),kt(Tt)])},nt.polygonToLine=nl,nt.polygonToLineString=nl,nt.polygonize=function(vt){var _t=xv.fromGeoJson(vt);_t.deleteDangles(),_t.deleteCutEdges();var wt=[],Tt=[];return _t.getEdgeRings().filter(function(At){return At.isValid()}).forEach(function(At){At.isHole()?wt.push(At):Tt.push(At)}),wt.forEach(function(At){fl.findEdgeRingContaining(At,Tt)&&Tt.push(At)}),Ft(Tt.map(function(At){return At.toPolygon()}))},nt.polygons=Rt,nt.projection=Uv,nt.propEach=ir,nt.propReduce=tr,nt.propertiesContainsFilter=b0,nt.radians2degrees=Tn,nt.radiansToDegrees=Tn,nt.radiansToDistance=on,nt.radiansToLength=on,nt.random=Wv,nt.randomLineString=K1,nt.randomPoint=Z1,nt.randomPolygon=y0,nt.randomPosition=Pp,nt.rewind=function(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.reverse||!1,Tt=_t.mutate||!1;if(!vt)throw new Error("<geojson> is required");if(typeof wt!="boolean")throw new Error("<reverse> must be a boolean");if(typeof Tt!="boolean")throw new Error("<mutate> must be a boolean");Tt===!1&&(vt=Po(vt));var At=[];switch(vt.type){case"GeometryCollection":return ur(vt,function(Ot){lh(Ot,wt)}),vt;case"FeatureCollection":return nr(vt,function(Ot){nr(lh(Ot,wt),function(Nt){At.push(Nt)})}),Ft(At)}return lh(vt,wt)},nt.rhumbBearing=sh,nt.rhumbDestination=bf,nt.rhumbDistance=Tu,nt.round=Kt,nt.sample=function(vt,_t){if(!vt)throw new Error("featurecollection is required");if(_t==null)throw new Error("num is required");if(typeof _t!="number")throw new Error("num must be a number");return Ft(function(wt,Tt){for(var At,Ot,Nt=wt.slice(0),jt=wt.length,Gt=jt-Tt;jt-- >Gt;)At=Nt[Ot=Math.floor((jt+1)*Math.random())],Nt[Ot]=Nt[jt],Nt[jt]=At;return Nt.slice(Gt)}(vt.features,_t))},nt.sector=function(vt,_t,wt,Tt,At){if(!cn(At=At||{}))throw new Error("options is invalid");var Ot=At.properties;if(!vt)throw new Error("center is required");if(wt==null)throw new Error("bearing1 is required");if(Tt==null)throw new Error("bearing2 is required");if(!_t)throw new Error("radius is required");if(typeof At!="object")throw new Error("options must be an object");if(_f(wt)===_f(Tt))return hp(vt,_t,At);var Nt=On(vt),jt=tl(vt,_t,wt,Tt,At),Gt=[[Nt]];return hn(jt,function(qt){Gt[0].push(qt)}),Gt[0].push(Nt),Pt(Gt,Ot)},nt.segmentEach=Fr,nt.segmentReduce=mr,nt.shortestPath=function(vt,_t,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.resolution,At=wt.minDistance,Ot=wt.obstacles||Ft([]);if(!vt)throw new Error("start is required");if(!_t)throw new Error("end is required");if(Tt&&!$n(Tt)||Tt<=0)throw new Error("options.resolution must be a number, greater than 0");if(At)throw new Error("options.minDistance is not yet implemented");var Nt=fn(vt),jt=fn(_t);switch(vt=kt(Nt),_t=kt(jt),sr(Ot)){case"FeatureCollection":if(Ot.features.length===0)return Dt([Nt,jt]);break;case"Polygon":Ot=Ft([xt(Un(Ot))]);break;default:throw new Error("invalid obstacles")}var Gt=Ot;Gt.features.push(vt),Gt.features.push(_t);var qt=dn(y1(up(dn(Gt)),1.15));Tt||(Tt=oo([qt[0],qt[1]],[qt[2],qt[1]],wt)/100),Gt.features.pop(),Gt.features.pop();for(var en=qt[0],Xt=qt[1],sn=qt[2],yn=qt[3],vn=Tt/oo([en,Xt],[sn,Xt],wt)*(sn-en),wn=Tt/oo([en,Xt],[en,yn],wt)*(yn-Xt),un=sn-en,Fn=yn-Xt,Qn=Math.floor(un/vn),_n=Math.floor(Fn/wn),Bn=(un-Qn*vn)/2,Hn=[],Gn=[],Vn=[],Ur=[],$r=1/0,Yr=1/0,Mr=yn-(Fn-_n*wn)/2,Qr=0;Mr>=Xt;){for(var Hr=[],Br=[],Nr=en+Bn,Xr=0;Nr<=sn;){var jr=kt([Nr,Mr]),ei=Pv(jr,Ot);Hr.push(ei?0:1),Br.push(Nr+"|"+Mr);var xr=oo(jr,vt);!ei&&xr<$r&&($r=xr,Vn={x:Xr,y:Qr});var zi=oo(jr,_t);!ei&&zi<Yr&&(Yr=zi,Ur={x:Xr,y:Qr}),Nr+=vn,Xr++}Gn.push(Hr),Hn.push(Br),Mr-=wn,Qr++}var gi=new qh(Gn,{diagonal:!0}),_o=gi.grid[Vn.y][Vn.x],Oi=gi.grid[Ur.y][Ur.x],Ji=Dg.search(gi,_o,Oi),Fo=[Nt];return Ji.forEach(function(Ss){var Ua=Hn[Ss.x][Ss.y].split("|");Fo.push([+Ua[0],+Ua[1]])}),Fo.push(jt),Kl(Dt(Fo))},nt.simplify=function(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.tolerance!==void 0?_t.tolerance:1,Tt=_t.highQuality||!1,At=_t.mutate||!1;if(!vt)throw new Error("geojson is required");if(wt&&wt<0)throw new Error("invalid tolerance");return At!==!0&&(vt=Po(vt)),ur(vt,function(Ot){(function(Nt,jt,Gt){var qt=Nt.type;if(qt==="Point"||qt==="MultiPoint")return Nt;Kl(Nt,!0);var en=Nt.coordinates;switch(qt){case"LineString":Nt.coordinates=dd(en,jt,Gt);break;case"MultiLineString":Nt.coordinates=en.map(function(Xt){return dd(Xt,jt,Gt)});break;case"Polygon":Nt.coordinates=fd(en,jt,Gt);break;case"MultiPolygon":Nt.coordinates=en.map(function(Xt){return fd(Xt,jt,Gt)})}})(Ot,wt,Tt)}),vt},nt.square=bg,nt.squareGrid=tv,nt.standardDeviationalEllipse=function(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.steps||64,Tt=_t.weight,At=_t.properties||{};if(!$n(wt))throw new Error("steps must be a number");if(!cn(At))throw new Error("properties must be a number");var Ot=or(vt).length,Nt=m0(vt,{weight:Tt}),jt=0,Gt=0,qt=0;nr(vt,function(Vn){var Ur=Vn.properties[Tt]||1,$r=j1(On(Vn),On(Nt));jt+=Math.pow($r.x,2)*Ur,Gt+=Math.pow($r.y,2)*Ur,qt+=$r.x*$r.y*Ur});var en=jt-Gt,Xt=Math.sqrt(Math.pow(en,2)+4*Math.pow(qt,2)),sn=2*qt,yn=Math.atan((en+Xt)/sn),vn=180*yn/Math.PI,wn=0,un=0,Fn=0;nr(vt,function(Vn){var Ur=Vn.properties[Tt]||1,$r=j1(On(Vn),On(Nt));wn+=Math.pow($r.x*Math.cos(yn)-$r.y*Math.sin(yn),2)*Ur,un+=Math.pow($r.x*Math.sin(yn)+$r.y*Math.cos(yn),2)*Ur,Fn+=Ur});var Qn=Math.sqrt(2*wn/Fn),_n=Math.sqrt(2*un/Fn),Bn=F1(Nt,Qn,_n,{units:"degrees",angle:vn,steps:wt,properties:At}),Hn=Ai(vt,Ft([Bn])),Gn={meanCenterCoordinates:On(Nt),semiMajorAxis:Qn,semiMinorAxis:_n,numberOfFeatures:Ot,angle:vn,percentageWithinEllipse:100*or(Hn).length/Ot};return Bn.properties.standardDeviationalEllipse=Gn,Bn},nt.tag=function(vt,_t,wt,Tt){return vt=Po(vt),_t=Po(_t),nr(vt,function(At){At.properties||(At.properties={}),nr(_t,function(Ot){At.properties[Tt]===void 0&&ro(At,Ot)&&(At.properties[Tt]=Ot.properties[wt])})}),vt},nt.tesselate=function(vt){if(!vt.geometry||vt.geometry.type!=="Polygon"&&vt.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var _t={type:"FeatureCollection",features:[]};return vt.geometry.type==="Polygon"?_t.features=Nl(vt.geometry.coordinates):vt.geometry.coordinates.forEach(function(wt){_t.features=_t.features.concat(Nl(wt))}),_t},nt.tin=Yl,nt.toMercator=G1,nt.toWgs84=W1,nt.transformRotate=m1,nt.transformScale=y1,nt.transformTranslate=function(vt,_t,wt,Tt){if(!cn(Tt=Tt||{}))throw new Error("options is invalid");var At=Tt.units,Ot=Tt.zTranslation,Nt=Tt.mutate;if(!vt)throw new Error("geojson is required");if(_t==null||isNaN(_t))throw new Error("distance is required");if(Ot&&typeof Ot!="number"&&isNaN(Ot))throw new Error("zTranslation is not a number");if(Ot=Ot!==void 0?Ot:0,_t===0&&Ot===0)return vt;if(wt==null||isNaN(wt))throw new Error("direction is required");return _t<0&&(_t=-_t,wt+=180),Nt!==!1&&Nt!==void 0||(vt=Po(vt)),hn(vt,function(jt){var Gt=On(bf(jt,_t,wt,{units:At}));jt[0]=Gt[0],jt[1]=Gt[1],Ot&&jt.length===3&&(jt[2]+=Ot)}),vt},nt.triangleGrid=s1,nt.truncate=zh,nt.union=function(vt,_t,wt){wt===void 0&&(wt={});var Tt=Un(vt),At=Un(_t),Ot=dh.union(Tt.coordinates,At.coordinates);return Ot.length===0?null:Ot.length===1?Pt(Ot[0],wt.properties):Wt(Ot,wt.properties)},nt.unitsFactors=st,nt.unkinkPolygon=function(vt){var _t=[];return Sr(vt,function(wt){wt.geometry.type==="Polygon"&&nr(zm(wt),function(Tt){_t.push(Pt(Tt.geometry.coordinates,wt.properties))})}),Ft(_t)},nt.validateBBox=Sn,nt.validateId=an,nt.voronoi=function(vt,_t){if(!cn(_t=_t||{}))throw new Error("options is invalid");var wt=_t.bbox||[-180,-85,180,85];if(!vt)throw new Error("points is required");if(!Array.isArray(wt))throw new Error("bbox is invalid");return Kn(vt,"Point","points"),Ft(function(){var Tt=Ov,At=I1,Ot=null;function Nt(jt){return new g0(jt.map(function(Gt,qt){var en=[Math.round(Tt(Gt,qt,jt)/Rs)*Rs,Math.round(At(Gt,qt,jt)/Rs)*Rs];return en.index=qt,en.data=Gt,en}),Ot)}return Nt.polygons=function(jt){return Nt(jt).polygons()},Nt.links=function(jt){return Nt(jt).links()},Nt.triangles=function(jt){return Nt(jt).triangles()},Nt.x=function(jt){return arguments.length?(Tt=typeof jt=="function"?jt:L1(+jt),Nt):Tt},Nt.y=function(jt){return arguments.length?(At=typeof jt=="function"?jt:L1(+jt),Nt):At},Nt.extent=function(jt){return arguments.length?(Ot=jt==null?null:[[+jt[0][0],+jt[0][1]],[+jt[1][0],+jt[1][1]]],Nt):Ot&&[[Ot[0][0],Ot[0][1]],[Ot[1][0],Ot[1][1]]]},Nt.size=function(jt){return arguments.length?(Ot=jt==null?null:[[0,0],[+jt[0],+jt[1]]],Nt):Ot&&[Ot[1][0]-Ot[0][0],Ot[1][1]-Ot[0][1]]},Nt}().x(function(Tt){return Tt.geometry.coordinates[0]}).y(function(Tt){return Tt.geometry.coordinates[1]}).extent([[wt[0],wt[1]],[wt[2],wt[3]]]).polygons(vt.features).map(zv))},nt.within=Ai,Object.defineProperty(nt,"__esModule",{value:!0})});const _hoisted_1$f={class:"content"},_hoisted_2$d=["innerHTML"],_hoisted_3$b=createBaseVNode("div",{id:"map"},null,-1),_hoisted_4$a=["innerHTML"],_sfc_main$h=defineComponent({__name:"Map.ce",props:{overlay:{type:String},zoom:{type:Number,default:2},center:{type:String,default:"55.4,6.7"},marker:{type:Boolean},basemaps:{type:String,default:"OpenStreetMap"},caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},entities:{type:String},preferGeojson:{type:Boolean},popupOnHover:{type:Boolean},zoomOnClick:{type:Boolean},scrollWheelZoom:{type:Boolean},cards:{type:String},essayBase:{type:String}},setup(nt){const rt=nt,it=window.turf,st={iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon.png",iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",shadowSize:[41,41]},bt={CartoDB_DarkMatter:["https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterNoLabels:["https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterOnlyLabels:["https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Positron:["https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronNoLabels:["https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronOnlyLabels:["https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Voyager:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerNoLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerOnlyLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerLabelsUnder:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],Esri_DeLorme:["https://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Copyright: &copy;2012 DeLorme",minZoom:1,maxZoom:11}],Esri_NatGeoWorldMap:["https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC",maxZoom:16}],Esri_OceanBasemap:["https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri",maxZoom:13}],Esri_WorldGrayCanvas:["https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}],Esri_WorldImagery:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}],Esri_WorldPhysical:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",{maxZoom:8,attribution:"Tiles &copy; Esri &mdash; Source: US National Park Service"}],Esri_WorldShadedRelief:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri",maxZoom:13}],Esri_WorldStreetMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}],Esri_WorldTerrain:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS",maxZoom:13}],Esri_WorldTopoMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}],MtbMap:["http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &amp; USGS'}],OpenStreetMap:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}],OpenStreetMap_DE:["https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_France:["https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",{maxZoom:20,attribution:'&copy; OpenStreetMap France | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_HOT:["https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>',maxZoom:19}],OpenStreetMap_Mapnik:["https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}],OpenTopoMap:["https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}],OPNVKarte:["https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",{attribution:'Map <a href="https://memomaps.de/">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}],Stadia_AlidadeSmooth:["https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_AlidadeSmoothDark:["https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_OSMBright:["https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_Outdoors:["https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}],Stamen_Terrain:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainLabels:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-labels/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_Toner:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerLite:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_Watercolor:["https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}",{subdomains:"abcd",minZoom:1,maxZoom:16,ext:"jpg",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],USGS_USTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImagery:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImageryTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}]},xt=ref(null),Et=computed(()=>{var dn,fn;return(fn=(dn=xt.value)==null?void 0:dn.getRootNode())==null?void 0:fn.host}),kt=computed(()=>{var dn;return(dn=xt==null?void 0:xt.value)==null?void 0:dn.parentNode}),Lt=computed(()=>{var dn;return(dn=kt.value)==null?void 0:dn.querySelector(".content")}),Pt=ref(),Rt=ref(),Dt=ref([]),Bt=ref(),Ft=ref([]),Yt=ref(),Zt=ref(),Wt=ref(),Qt=ref(10),Kt=ref(),on=ref(!1),nn=ref(),mn=ref();watch$1(Et,()=>Tn()),onMounted(()=>{let dn=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");dn&&(Pt.value=new GithubClient(dn)),An(),Tn()});const gn=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Tn(){Et.value.classList.add("ve-component"),Et.value.classList.add(gn),gn==="full"?Et.value.style.width="100%":(Et.value.style.float=gn,Et.value.style.width="calc(50% - 16px)"),Et.value.style.width=window.getComputedStyle(Et.value).width,rt.sticky&&makeSticky(Et.value),Lt.value.style.width=isMobile()?"100%":rt.width||"100%",nextTick(()=>{let dn=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),fn=dn;if(rt.sticky&&gn==="full"){let On=Math.round(window.innerHeight*.4);fn=Math.min(On,dn)}Lt.value.style.width=`${dn}px`,Lt.value.style.height=`${fn}px`,Et.value.style.height=`${rt.caption?fn+32:fn}px`,Mn()})}watch$1(rt,()=>An());function An(){Qt.value=rt.zoom,rt.cards&&kn()}function kn(){let dn=[];if(rt.cards){let fn=document.getElementById(rt.cards);fn&&fn.querySelectorAll(".card").forEach(async On=>{var hr;let xn=Array.from(On.querySelectorAll("li")).filter(Nn=>Nn.innerHTML.trim().indexOf("coords:")===0).map(Nn=>Nn.innerHTML.split(":")[1].trim()).pop()||"";if(xn){let Nn=On.querySelector("ul.card-metadata");Nn&&((hr=Nn.parentElement)==null||hr.removeChild(Nn)),dn.push({coords:Sr(xn),caption:On.innerHTML})}})}dn.length>0&&(Ft.value=[...Ft.value,...dn])}watch$1(Ft,async()=>{let dn=await Promise.all(Ft.value),fn=dn.filter(Kn=>Kn.geojson&&Kn.preferGeojson).map(Kn=>{if(Kn.geojson.indexOf("http")!==0)if(Kn.geojson[0]==="/"){let[Un,sr,...ar]=Kn.geojson.split("/").filter(Rr=>Rr),wr=ar.join("/"),vr="main";Kn.geojson=`https://raw.githubusercontent.com/${Un}/${sr}/${vr}/${wr}`}else Kn.geojson=`https://raw.githubusercontent.com/${rt.essayBase}/${Kn.geojson}`;return Kn}).map(Kn=>({url:Kn.geojson,item:Kn})),On=await Promise.all(fn.map(Kn=>fetch(Kn.url))),xn=await Promise.all(On.map(Kn=>Kn.json())),hr={};for(let Kn=0;Kn<fn.length;Kn++){fn[Kn].item.id&&/^Q[0-9]+$/.test(fn[Kn].item.id)&&(fn[Kn].item.qid=fn[Kn].item.id,delete fn[Kn].item.id),xn[Kn].type==="FeatureCollection"?xn[Kn].features.forEach(sr=>sr.properties={...sr.properties,...fn[Kn].item}):xn[Kn].properties={...xn[Kn].properties,...fn[Kn].item};let Un=fn[Kn].item.layer||"Locations";hr[Un]||(hr[Un]=[]),hr[Un].push(xn[Kn])}let Nn={};dn.filter(Kn=>!Kn.geojson||!Kn.preferGeojson).filter(Kn=>!Kn.allmaps).forEach(Kn=>{let Un=Kn.layer||"Locations";Nn[Un]||(Nn[Un]=[]),Nn[Un].push(Kn)}),dn.filter(Kn=>!Kn.allmaps).forEach(Kn=>{let Un=Kn.layer||"Locations";hr[Un]?Nn[Un]&&(hr[Un].push(hn(Nn[Un])),delete Nn[Un]):(hr[Un]=[hn(Nn[Un])],delete Nn[Un])}),Zt.value=dn.filter(Kn=>Kn.allmaps).map(Kn=>({name:Kn.layer||"Image layer",disabled:Kn.disabled,layer:L$1.tileLayer(`https://allmaps.xyz/maps/${Kn.allmaps}/{z}/{x}/{y}.png`,{maxZoom:19,attribution:'<a href="https://allmaps.org">Allmaps</a>'})})),Wt.value=hr}),watch$1(Zt,()=>jn()),watch$1(Wt,()=>jn()),watch$1(Rt,()=>jn());function Mn(){var On;if(on.value)return;if(on.value=!0,Dt.value=rt.entities?rt.entities.split(/\s+/).filter(xn=>xn):[],rt.cards){let xn=[],hr=document.getElementById(rt.cards);hr&&hr.querySelectorAll(".card").forEach(async Nn=>{var Un;let Kn=Array.from(Nn.querySelectorAll("li")).filter(sr=>sr.innerHTML.trim().indexOf("coords:")===0).map(sr=>sr.innerHTML.split(":")[1].trim()).pop()||"";if(Kn){let sr=Nn.querySelector("ul.card-metadata");sr&&((Un=sr.parentElement)==null||Un.removeChild(sr)),xn.push({coords:Sr(Kn),caption:Nn.innerHTML})}}),Ft.value=[...Ft.value,...xn]}zn(),ir();const dn=new ResizeObserver(()=>$n());let fn=(On=kt.value)==null?void 0:On.querySelector("#map");fn&&dn.observe(fn),_r()}async function $n(){var On,xn;let dn;if(rt.center)if(isQID(rt.center)){let hr=await getEntity(rt.center);dn=Sr(hr.coords)}else dn=Sr(rt.center);else if(rt.entities){let hr=await getEntity(Dt.value[0]);dn=Sr(hr.coords),Qt.value=9}else dn=new L$1.LatLng(0,0),Qt.value=6;if(Rt.value){Rt.value.off(),Rt.value.remove();let hr=(On=kt.value)==null?void 0:On.querySelector("#map"),Nn=document.createElement("div");Nn.id="map",hr==null||hr.replaceWith(Nn)}let fn=(xn=kt.value)==null?void 0:xn.querySelector("#map");if(fn){isMobile()&&L$1.Map.addInitHook("addHandler","gestureHandling",leafletGestureHandling_min.exports.GestureHandling),fn.style.cursor="default";let hr=rt.basemaps.split(",").map(Kn=>{let[Un,sr]=bt[Kn];return[Kn.replace(/_/," "),L$1.tileLayer(Un,sr)]}),Nn={preferCanvas:!1,zoomSnap:.1,center:dn,zoom:Qt.value,zoomAnimation:!0,gestureHandling:isMobile(),layers:[hr[0][1]]};Rt.value=L$1.map(fn,Nn),(hr.length>1||Object.keys(Wt.value||{}).length>1)&&(Yt.value=L$1.control.layers(Object.fromEntries(hr),{}).addTo(Rt.value)),Rt.value.on("click",Kn=>{var Un;cn(Kn),Bt.value&&rr((Un=Bt.value)==null?void 0:Un.split(" ")[0]),rt.zoomOnClick&&rn()}),Rt.value.on("zoomend",Kn=>{cn(Kn),mn.value&&mn.value.layer.openPopup()}),Rt.value.on("movestart",()=>fn.style.cursor="move"),Rt.value.on("moveend",Kn=>{fn.style.cursor="default",cn(Kn)}),Rt.value.on("layeradd",Kn=>{var Un,sr;if(Kn.layer.feature){let ar=Kn.layer;((Un=ar.feature)==null?void 0:Un.type)=="Feature"&&((sr=ar.feature)==null?void 0:sr.properties.qid)&&ar.feature}}),Bt.value=`${Number(dn.lat.toFixed(5))},${Number(dn.lng.toFixed(5))} ${Qt.value}`,Kt.value=`${Number(dn.lat.toFixed(5))},${Number(dn.lng.toFixed(5))},${Qt.value}`}}function cn(dn){let fn=dn.type==="click"?dn.latlng:dn.target.getCenter(),On=dn.target.getZoom(),xn=[fn.lat,fn.lng,On];return Bt.value=`${Number(fn.lat.toFixed(5))},${Number(fn.lng.toFixed(5))} ${On}`,nn.value||(Kt.value=`${Number(fn.lat.toFixed(5))},${Number(fn.lng.toFixed(5))},${On}`),xn}function Sn(dn){return L$1.geoJSON(dn,{pointToLayer:(fn,On)=>{const xn=fn.properties;let hr={...st};return fn.properties.icon&&(hr.iconUrl=fn.properties.icon),fn.properties.shadowUrl&&(hr.shadowUrl=fn.properties.shadowUrl),fn.properties.iconRetinaUrl&&(hr.iconRetinaUrl=fn.properties.iconRetinaUrl),xn.markerType==="circle"?L$1.circleMarker(On,{radius:xn.radius||4}):L$1.marker(On,{icon:new L$1.Icon(hr)})},onEachFeature:async(fn,On)=>{var hr;let xn=On;if(!fn.properties.coords){if((hr=xn.feature)!=null&&hr.bbox){let Nn=xn.getBounds().getCenter();fn.properties.coords=`${Nn.lat},${Nn.lng}`}else if(fn.geometry.type==="Polygon"){let Nn=it.centroid(fn);fn.properties.coords=`${Nn.geometry.coordinates[1]},${Nn.geometry.coordinates[0]}`}}if(fn.properties.qid){let Nn=await getEntity(fn.properties.qid);fn.properties.entityData=Nn;let Un=`<ve-info-card data="${JSON.stringify(Nn).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;On.bindPopup(Un)}else{let Kn=`<ve-info-card data="${JSON.stringify(fn.properties).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;On.bindPopup(Kn)}rt.popupOnHover&&(On.on("mouseover",()=>On.openPopup()),On.on("mouseout",()=>On.closePopup())),On.on("click",()=>{nn.value?(On.closePopup(),nn.value=void 0):(On.openPopup(),nn.value={},rt.zoomOnClick&&Cn(fn.properties.coords))})},style:fn=>{const On=fn==null?void 0:fn.properties,xn=fn==null?void 0:fn.geometry.type;for(let[Nn,Kn]of Object.entries(On))Kn==="null"&&(On[Nn]=null);return{color:On.color||"#FB683F",weight:On.weight||(xn==="Polygon"||xn==="MultiPolygon"?0:4),opacity:On.opacity||1,fillColor:On.fillColor||"#32C125",fillOpacity:On.fillOpacity||.5}}})}let an=!1;function jn(){var dn;if(Rt.value&&Wt.value&&Zt.value&&!an){an=!0;let fn=Object.keys(Wt.value||{}),On=Zt.value?Zt.value.length:0;!Yt.value&&(fn.length>1||fn.length===1&&fn[0]!=="Locations"||On>0)&&(Yt.value=L$1.control.layers(Object.fromEntries([]),{}).addTo(Rt.value)),Object.keys(Wt.value||{}).forEach(hr=>{var Un;let Nn=new L$1.LayerGroup,Kn=!1;Wt.value[hr].forEach(sr=>{var wr;let ar=Sn(sr);Nn.addLayer(ar),(wr=sr.properties)!=null&&wr.disabled&&(Kn=!0)}),Kn||(Un=Rt.value)==null||Un.addLayer(Nn),Yt.value&&Yt.value.addOverlay(Nn,hr)});let xn={};(dn=Zt.value)==null||dn.forEach(hr=>{var Nn;Yt.value&&Yt.value.addOverlay(hr.layer,hr.name),hr.disabled||(Nn=Rt.value)==null||Nn.addLayer(hr.layer),xn[hr.name]=hr.layer}),Object.keys(xn).length>0&&L$1.control.opacity(xn,{label:null,collapsed:!0,position:"topright"}).addTo(Rt.value)}}function hn(dn){const fn={type:"FeatureCollection",features:[]};return dn.filter(On=>On.coords).forEach(On=>{let[xn,hr]=On.coords.split(",").map(Nn=>parseFloat(Nn.trim()));fn.features.push({type:"Feature",properties:On,geometry:{type:"Point",coordinates:[hr,xn]}})}),fn}async function zn(){let dn=Array.from(Et.value.querySelectorAll("li")).map(fn=>{var On;return Cr((On=fn.firstChild)==null?void 0:On.textContent)});if(rt.marker&&rt.center)if(isQID(rt.center)){let fn=await getEntity(rt.center);dn.push(Promise.resolve(ur(fn)))}else dn.push(Promise.resolve({coords:rt.center,zoom:rt.zoom||10}));Ft.value=[...Ft.value,...dn]}function ir(){const dn=On=>{for(let xn of On)xn.type==="childList"&&Array.from(xn.target.classList).indexOf("hydrated")>=0&&zn()};new MutationObserver(dn).observe(Et.value,{childList:!0,subtree:!0,characterData:!0})}function tr(dn){return/^[+-]?\d+(.\d*|\d*),{1}[+-]?\d+(.\d*|\d*)$/.test(dn)}function nr(dn){return/^\d{1,2}(\.\d{1})?$/.test(dn)}function dr(dn){dn=dn||"";let fn=[];dn=dn.replace(//,'"').replace(//,'"').replace(//,"'");let On=dn.match(/[^\s"]+|"([^"]*)"/gmi);return On&&On.forEach(xn=>{fn.length>0&&fn[fn.length-1].indexOf("=")===fn[fn.length-1].length-1?fn[fn.length-1]=`${fn[fn.length-1]}${xn}`:fn.push(xn)}),fn}function or(dn,fn){let On={id:fn},xn=metadataAsObj(dn);return xn.location&&(On.coords=xn.location[0]),xn.coordinates_of_the_point_of_view&&(On.coords=xn.coordinates_of_the_point_of_view[0]),dn.label&&(On.label=dn.label.en),dn.summary&&(On.description=dn.summary.en[0]),dn.thumbnail&&(On.image=dn.thumbnail[0].id),On}function ur(dn,fn=""){let On={id:fn||dn.id};return dn.coords&&(On.coords=dn.coords),dn.geojson&&(On.geojson=dn.geojson),dn.label&&(On.label=dn.label),dn.description&&(On.description=dn.description),dn.thumbnail&&(On.image=dn.thumbnail),On}async function Cr(dn){let fn=dr(dn),On=/\.(geo)?json$/i,xn=/^[a-z0-9\-]+:.+/,hr={},Nn=new Set(["disabled","prefer-geojson"]);for(let Kn=0;Kn<fn.length;Kn++){let Un=fn[Kn];if(Un.indexOf("=")>0){let[sr,...ar]=Un.split("="),wr=ar.join("=");if(wr=wr[wr.length-1]==='"'?wr.slice(1,-1):wr,sr==="qid"){let vr=await getEntity(Un);hr={...ur(vr,Un),...hr}}else if(sr==="iiif"){let vr=await getManifest(Un);hr={...or(vr,Un),...hr}}else hr[sr]=wr}else if(nr(Un))hr.zoom=parseInt(Un);else if(tr(Un))hr.coords=Un,hr.id=Un;else if(isQID(Un)){let sr=await getEntity(Un);hr={...ur(sr,Un),...hr}}else if(On.test(Un))hr.geojson=Un;else if(xn.test(Un)){let sr=await getManifest(Un);hr={...or(sr,Un),...hr}}else if(Nn.has(Un))hr[kebabToCamel(Un)]=!0;else{let sr=Un[0]==='"'&&Un[Un.length-1]==='"'?Un.slice(1,-1):Un;hr.label?hr.description=sr:hr.label=sr}}return hr.preferGeojson=hr.preferGeojson||rt.preferGeojson&&hr.geojson||hr.geojson&&!hr.coords,hr}function Sr(dn){let[fn,On]=dn.split(",").map(xn=>parseFloat(xn.trim()));return new leafletSrc.exports.LatLng(fn,On)}function rr(dn){navigator.clipboard&&navigator.clipboard.writeText(dn)}function Fr(dn="",fn=""){return Object.values(Wt.value).map(xn=>{let hr=xn[0];return hr.type==="FeatureCollection"?hr.features:[hr]}).flat().find(xn=>{var hr,Nn;return xn.id===dn||((hr=xn.properties)==null?void 0:hr.id)===dn||((Nn=xn.properties)==null?void 0:Nn.coords)===fn})}function mr(dn=""){var Nn,Kn,Un,sr;dn=dn.replace(/^flyto\|/i,"");let fn="",On=10,xn=dn.split(",");if(xn.length===1){fn=xn[0];let ar=Fr(fn);On=((Nn=ar==null?void 0:ar.properties)==null?void 0:Nn.zoom)||On}else if(xn.length===2)if(/^[+-]?\d+(.\d*|\d*)$/.test(xn[0])){fn=xn.join(",");let ar=Fr("",fn);On=((Kn=ar==null?void 0:ar.properties)==null?void 0:Kn.zoom)||On}else fn=xn[0],On=parseFloat(xn[1]);else fn=xn.slice(0,2).join(","),On=parseFloat(xn[2]);let hr;return(Un=Rt.value)==null||Un.eachLayer(ar=>{var wr,vr,Rr,ci;(((vr=(wr=ar==null?void 0:ar.feature)==null?void 0:wr.properties)==null?void 0:vr.id)===fn||((ci=(Rr=ar==null?void 0:ar.feature)==null?void 0:Rr.properties)==null?void 0:ci.coords)===fn)&&(hr=ar)}),hr||(sr=Rt.value)==null||sr.eachLayer(ar=>hr=ar),{id:fn,zoom:On,layer:hr}}function _r(){let dn=Et.value.parentElement,fn=new Set;for(;dn.parentElement&&dn.tagName!=="MAIN";)dn=dn.parentElement,Array.from(dn.querySelectorAll("[enter],[exit]")).forEach(xn=>{pr(xn)&&!fn.has(xn)&&(yr(xn),fn.add(xn))});let On=Et.value.parentElement;for(;(On==null?void 0:On.parentElement)&&On.tagName!=="BODY";)On=On.parentElement;On&&Array.from(On.querySelectorAll("mark")).forEach(xn=>{let hr=Array.from(xn.attributes).find(Nn=>Nn.name==="flyto");if(hr&&pr(xn.parentElement)){let Kn=hr==null?void 0:hr.value;xn.classList.add(hr.name),xn.addEventListener("click",()=>Cn(Kn)),rt.popupOnHover&&(xn.addEventListener("mouseover",()=>{let Un=mr(Kn).layer;Un.openPopup(),isMobile()&&setTimeout(()=>Un.closePopup(),2e3)}),xn.addEventListener("mouseleave",()=>{var Un;mn.value=mr(Kn),mn.value.id!==nn.value&&((Un=mn.value.layer)==null||Un.closePopup())}))}})}function yr(dn){let fn=dn.classList.contains("active");new MutationObserver(xn=>{xn.forEach(hr=>{if(hr.attributeName=="class"){let Nn=hr.target.classList.contains("active");if(fn!==Nn){fn=Nn;let Kn=dn.attributes.getNamedItem(Nn?"enter":"exit");if(Kn){const[Un,...sr]=Kn.value.split(":");let ar=sr.join(":");Un==="flyto"&&Cn(ar,!0),Kn.name==="exit"&&rn()}}}})}).observe(dn,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}function pr(dn){let fn=dn.previousSibling;for(;fn;){if(fn.nodeName==="VE-MAP")return fn===Et.value?fn:null;fn=fn.previousSibling}for(;dn.parentElement&&dn.tagName!=="MAIN";){dn=dn.parentElement;let On=dn.querySelector(":scope > ve-map, :scope > p > ve-map, :scope > section > ve-map");if(On)return On===Et.value?On:null}}async function Cn(dn,fn=!1){var On,xn;if(mn.value=mr(dn),mn.value.layer){if(mn.value.id===nn.value&&!fn)mn.value.layer.closePopup(),rn();else if(nn.value=mn.value.id,(On=mn.value.layer.feature)!=null&&On.properties){let hr=Sr(mn.value.layer.feature.properties.coords);(xn=Rt.value)==null||xn.flyTo(hr,mn.value.zoom)}}else rn()}function rn(){var dn,fn;if(mn.value=null,Kt.value){let[On,xn,hr]=Kt.value.split(",").map(Kn=>parseFloat(Kn)),Nn=new L$1.LatLng(On,xn);(dn=Rt.value)==null||dn.flyTo(Nn,hr),(fn=Rt.value)==null||fn.closePopup()}nn.value=void 0}return(dn,fn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:xt,style:{width:"100%",height:"100%"}},[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("div",{id:"lat-lng-zoom",innerHTML:Bt.value,onClick:fn[0]||(fn[0]=On=>rr(`${Bt.value}`))},null,8,_hoisted_2$d),_hoisted_3$b,nt.caption?(openBlock(),createElementBlock("div",{key:0,id:"caption",innerHTML:nt.caption},null,8,_hoisted_4$a)):createCommentVNode("",!0)])],512))}}),_style_0$b=`.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,.5)}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255,255,255,.8);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:rgba(255,255,255,.8);text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:white;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}input[type=range]{-webkit-appearance:none;-webkit-tap-highlight-color:rgba(255,255,255,0);width:110px;height:10px;margin:0;border:none;padding:1px 2px;border-radius:30px;background:#f1f0ee;outline:none}input[type=range]::-ms-track{border:inherit;color:transparent;background:transparent}input[type=range]::-ms-fill-lower,input[type=range]::-ms-fill-upper{background:transparent}input[type=range]::-ms-tooltip{display:none}input[type=range]::-ms-thumb{width:15px;height:18px;border-radius:12px;border:0;background-image:linear-gradient(to bottom,#1253a4 0,#1253a4 100%)}.leaflet-control-layers-label{margin:0 0 8px 1px}@-webkit-keyframes leaflet-gestures-fadein{0%{opacity:0}to{opacity:1}}@keyframes leaflet-gestures-fadein{0%{opacity:0}to{opacity:1}}.leaflet-container:after{-webkit-animation:leaflet-gestures-fadein .8s backwards;animation:leaflet-gestures-fadein .8s backwards;color:#fff;font-family:Roboto,Arial,sans-serif;font-size:22px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:15px;position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:461;pointer-events:none}.leaflet-gesture-handling-touch-warning:after,.leaflet-gesture-handling-scroll-warning:after{-webkit-animation:leaflet-gestures-fadein .8s forwards;animation:leaflet-gestures-fadein .8s forwards}.leaflet-gesture-handling-touch-warning:after{content:attr(data-gesture-handling-touch-content)}.leaflet-gesture-handling-scroll-warning:after{content:attr(data-gesture-handling-scroll-content)}*{box-sizing:border-box}:host{display:flex;align-content:center;justify-content:center;position:relative;font-family:Roboto,sans-serif;background-color:#fff;margin-bottom:1rem}.content{margin:auto}#map{border:1px solid #ccc;width:100%;height:100%}#caption{font-family:sans-serif;width:100%;white-space:nowrap;background-color:#555;color:#fff;padding:4px 6px;bottom:0;height:32px;text-overflow:ellipsis;overflow:hidden}#lat-lng-zoom{position:absolute;font-family:sans-serif;bottom:24px;right:0;width:150px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#lat-lng-zoom:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy;z-index:1000}.card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border-radius:4px;padding:0}.card p{border:none}.card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:190px}.card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}.card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.2rem .5rem;margin:0;font-size:.9rem;font-weight:400}.card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-end;height:110px;line-height:1.4;font-size:1rem;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;margin:0 0 .5rem}.leaflet-popup-content{width:280px;margin:0}.leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers.png)}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers-2x.png)}
`,Map$3=_export_sfc(_sfc_main$h,[["styles",[_style_0$b]]]),_hoisted_1$e=["innerHTML"],_hoisted_2$c=["innerHTML"],_hoisted_3$a={class:"card-metadata"},_hoisted_4$9=["innerHTML"],_hoisted_5$8=["innerHTML","onClick"],_hoisted_6$6={key:1},_hoisted_7$5=["innerHTML","onClick"],_hoisted_8$5={class:"card-links",style:{"margin-top":"auto"}},_hoisted_9$4=["manifest"],_hoisted_10$3=["center","zoom"],_hoisted_11$2={key:0},_sfc_main$g=defineComponent({__name:"MediaCard.ce",props:{manifest:{type:String,required:!0}},setup(nt){const rt=nt,it=computed(()=>`"${thumbnail(bt.value)}"`),st=ref(null);computed(()=>{var mn;return(mn=st==null?void 0:st.value)==null?void 0:mn.parentNode}),computed(()=>{var mn,gn;return(gn=(mn=st.value)==null?void 0:mn.getRootNode())==null?void 0:gn.host});const bt=ref(),xt=computed(()=>bt.value&&getItemInfo(bt.value)),Et=computed(()=>xt.value&&`${xt.value.width.toLocaleString()} x ${xt.value.height.toLocaleString()}`),kt=computed(()=>bt.value&&Dt()),Lt=computed(()=>{let mn=kt.value.find(gn=>gn.label.toLowerCase()==="location");return mn?`${mn.value}`:null}),Pt=computed(()=>{let mn=kt.value.find(gn=>gn.label.toLowerCase()==="allmapsid");return mn?`${mn.value}`:null}),Rt=computed(()=>{let mn=kt.value.find(gn=>gn.label.toLowerCase()==="zoom");return mn?`${parseFloat(mn.value)}`:9});onUpdated(()=>{getManifest(rt.manifest).then(mn=>bt.value=mn)});function Dt(){let mn=new Set(["created","updated"]),gn=new Set(["image_url","size"]),Tn=getMetadata(bt.value).filter(An=>!gn.has(An.label));return bt.value.navDate&&Tn.push({label:"navDate",value:[bt.value.navDate]}),Tn.push({label:"dimensions",value:[Et.value]}),Tn=Tn.map(An=>mn.has(An.label)?{label:An.label,value:[An.value[0].split("T")[0]]}:An).map(An=>{if(An.label==="source_url"){let kn=An.value[0].split("/").pop();An={label:"source",value:[`<a href="${An.value[0]}" target="_blank">${kn}</a>`]}}return An}),Tn.sort()}getManifest(rt.manifest).then(mn=>bt.value=mn);function Bt(mn){navigator.clipboard&&navigator.clipboard.writeText(mn)}const Ft=ref();watch$1(Ft,mn=>{mn==null||mn.addEventListener("sl-show",()=>{Ft.value&&(Ft.value.panel.style.width=`${on()}px`)})});const Yt=ref(!1);watch$1(Yt,()=>{var mn,gn;Yt.value?(mn=Ft.value)==null||mn.show():(gn=Ft.value)==null||gn.hide()});function Zt(){Yt.value=!Yt.value}const Wt=ref();watch$1(Wt,mn=>{mn==null||mn.addEventListener("sl-show",()=>{Wt.value&&(Wt.value.panel.style.width=`${on()}px`)})});const Qt=ref(!1);watch$1(Qt,()=>{var mn,gn;Qt.value?(mn=Wt.value)==null||mn.show():(gn=Wt.value)==null||gn.hide()});function Kt(){Qt.value=!Qt.value}function on(){let mn=Math.round(window.innerWidth-(isMobile()?0:100)),gn=Math.round(window.innerHeight-150),Tn=bt.value;if(Tn){let An=getItemInfo(Tn),kn=Number((An.width/An.height).toFixed(4));mn=kn>=1?mn/kn>gn?mn=gn*kn:mn:Math.round(gn*kn)}return mn}function nn(mn){var Tn;mn.stopPropagation();let gn=`https://iiif.juncture-digital.org/?manifest=${bt.value.id}`;(Tn=mn.dataTransfer)==null||Tn.setData("text/uri-list",gn)}return(mn,gn)=>bt.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"root",ref:st},[createBaseVNode("div",{class:"card",draggable:"true",onDragstart:nn},[createBaseVNode("div",{class:"card-image",style:normalizeStyle({backgroundImage:`url(${it.value})`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"top"}),onClick:Zt},null,4),createBaseVNode("div",{class:"card-title",innerHTML:unref(label)(bt.value)},null,8,_hoisted_1$e),createBaseVNode("div",{class:"card-abstract",innerHTML:unref(summary)(bt.value)},null,8,_hoisted_2$c),createBaseVNode("ul",_hoisted_3$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value,Tn=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-label",innerHTML:Tn.label},null,8,_hoisted_4$9),Tn.value.length===1?(openBlock(),createElementBlock(Fragment,{key:0},[Tn.label==="location"?(openBlock(),createElementBlock("sl-icon-button",{key:0,name:"chat-square-text",label:"Show Location",onClick:Kt})):createCommentVNode("",!0),createBaseVNode("span",{class:"md-value",innerHTML:Tn.value[0],onClick:An=>Bt(Tn.value)},null,8,_hoisted_5$8)],64)):(openBlock(),createElementBlock("ul",_hoisted_6$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Tn.value,An=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-value",innerHTML:An,onClick:kn=>Bt(An)},null,8,_hoisted_7$5)]))),256))]))]))),256))]),createBaseVNode("div",_hoisted_8$5,[createBaseVNode("img",{src:"https://juncture-digital.github.io/web-app/static/iiif.png",class:"draggable-iiif",alt:"IIIF manifest icon",onClick:gn[0]||(gn[0]=Tn=>Bt(bt.value.id)),onDragstart:nn},null,32)])],32),createBaseVNode("sl-dialog",{ref_key:"imageDialog",ref:Ft,id:"image-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},[Yt.value?(openBlock(),createElementBlock("ve-media",{key:0,manifest:bt.value.id,"zoom-on-scroll":""},null,8,_hoisted_9$4)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:Zt,variant:"primary"},"Close")],512),createBaseVNode("sl-dialog",{ref_key:"mapDialog",ref:Wt,id:"map-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},[Qt.value?(openBlock(),createElementBlock("ve-map",{key:0,center:Lt.value,zoom:Rt.value},[createBaseVNode("ul",null,[createBaseVNode("li",null,toDisplayString(Lt.value),1),Pt.value?(openBlock(),createElementBlock("li",_hoisted_11$2,"allmaps="+toDisplayString(Pt.value),1)):createCommentVNode("",!0)])],8,_hoisted_10$3)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:Kt,variant:"primary"},"Close")],512)],512)):createCommentVNode("",!0)}}),_style_0$a=`*{box-sizing:border-box}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.md-label{font-weight:700;margin-right:6px;color:#444}.md-value{display:inline;line-height:1.2rem;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;color:#444;cursor:copy}.md-value:hover{text-decoration:underline}.md-label:after{content:":"}.card-metadata ul ul{margin-left:18px}@media (max-width: 480px){.card-image{height:72vw}}.card{display:flex;flex-flow:column nowrap;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border:1px solid #ccc;border-radius:4px;padding:0;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.card p{border:none}.card-image{align-self:flex-start;width:100%;height:300px;cursor:pointer}.card-title{font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none;color:#444}.card-metadata{list-style:none;padding:.2rem .5rem;margin:12px 0 0;font-size:.9em;font-weight:400;max-height:260px;overflow-y:scroll}.card-abstract{align-self:flex-start;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:8}.card-links{padding:6px}.card-links img{height:24px}.draggable-iiif{cursor:grab}.clamp5{-webkit-line-clamp:5}
`,MediaCard=_export_sfc(_sfc_main$g,[["styles",[_style_0$a]]]),_hoisted_1$d={class:"content"},_hoisted_2$b=["caption"],_sfc_main$f=defineComponent({__name:"MediaSelector.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ft;return(Ft=it==null?void 0:it.value)==null?void 0:Ft.parentNode}),bt=computed(()=>{var Ft,Yt;return(Yt=(Ft=it.value)==null?void 0:Ft.getRootNode())==null?void 0:Yt.host}),xt=computed(()=>{var Ft;return(Ft=st.value)==null?void 0:Ft.querySelector(".content")}),Et=ref(null),kt=computed(()=>{var Ft,Yt;return((Yt=(Ft=Et.value)==null?void 0:Ft.getAttribute("data-media"))==null?void 0:Yt.split(/\s/).filter(Zt=>Zt))||[]}),Lt=ref();watch$1(bt,()=>Pt()),watch$1(Lt,()=>console.log(`selected=${toRaw(Lt.value)}`));function Pt(){Dt(),Bt()}const Rt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Dt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Rt),Rt==="full"?bt.value.style.width="100%":(bt.value.style.float=Rt,bt.value.style.width="calc(50% - 16px)"),bt.value.style.width=window.getComputedStyle(bt.value).width,rt.sticky&&makeSticky(bt.value),xt.value.style.width=rt.width||"100%",nextTick(()=>{let Ft=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2)),Yt=Ft;if(rt.sticky&&Rt==="full"){let Zt=Math.round(window.innerHeight*.4);Yt=Math.min(Zt,Ft)}xt.value.style.width=`${Ft}px`,xt.value.style.height=`${Yt}px`})}function Bt(){Et.value=document.querySelector(".active"),new MutationObserver(Yt=>{Yt.forEach(Zt=>{if(Zt.type==="attributes"){let Wt=Zt.target;Array.from(Wt.classList).indexOf("active")>=0&&(Et.value=Wt)}})}).observe(document,{subtree:!0,attributes:!0})}return(Ft,Yt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$d,[kt.value.length>0?(openBlock(),createElementBlock("ve-media",{key:0,grid:"",small:"",caption:Ft.$props.caption},[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value,(Zt,Wt)=>(openBlock(),createElementBlock("li",{key:`item-${Wt}`},toDisplayString(Zt),1))),128))])],8,_hoisted_2$b)):createCommentVNode("",!0)])],512))}}),_style_0$9=`sl-button{margin:6px 3px}
`,MediaSelector=_export_sfc(_sfc_main$f,[["styles",[_style_0$9]]]);var dist$1={exports:{}},Sister;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/Sister=function(){var nt={},rt={};return nt.on=function(it,st){var bt={name:it,handler:st};return rt[it]=rt[it]||[],rt[it].unshift(bt),bt},nt.off=function(it){var st=rt[it.name].indexOf(it);st!==-1&&rt[it.name].splice(st,1)},nt.trigger=function(it,st){var bt=rt[it],xt;if(bt)for(xt=bt.length;xt--;)bt[xt].handler(st)},nt};var sister=Sister,YouTubePlayer$1={exports:{}},browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var nt=1e3,rt=nt*60,it=rt*60,st=it*24,bt=st*7,xt=st*365.25;ms=function(Rt,Dt){Dt=Dt||{};var Bt=typeof Rt;if(Bt==="string"&&Rt.length>0)return Et(Rt);if(Bt==="number"&&isFinite(Rt))return Dt.long?Lt(Rt):kt(Rt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Rt))};function Et(Rt){if(Rt=String(Rt),!(Rt.length>100)){var Dt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Rt);if(!!Dt){var Bt=parseFloat(Dt[1]),Ft=(Dt[2]||"ms").toLowerCase();switch(Ft){case"years":case"year":case"yrs":case"yr":case"y":return Bt*xt;case"weeks":case"week":case"w":return Bt*bt;case"days":case"day":case"d":return Bt*st;case"hours":case"hour":case"hrs":case"hr":case"h":return Bt*it;case"minutes":case"minute":case"mins":case"min":case"m":return Bt*rt;case"seconds":case"second":case"secs":case"sec":case"s":return Bt*nt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Bt;default:return}}}}function kt(Rt){var Dt=Math.abs(Rt);return Dt>=st?Math.round(Rt/st)+"d":Dt>=it?Math.round(Rt/it)+"h":Dt>=rt?Math.round(Rt/rt)+"m":Dt>=nt?Math.round(Rt/nt)+"s":Rt+"ms"}function Lt(Rt){var Dt=Math.abs(Rt);return Dt>=st?Pt(Rt,Dt,st,"day"):Dt>=it?Pt(Rt,Dt,it,"hour"):Dt>=rt?Pt(Rt,Dt,rt,"minute"):Dt>=nt?Pt(Rt,Dt,nt,"second"):Rt+" ms"}function Pt(Rt,Dt,Bt,Ft){var Yt=Dt>=Bt*1.5;return Math.round(Rt/Bt)+" "+Ft+(Yt?"s":"")}return ms}function setup(nt){it.debug=it,it.default=it,it.coerce=Lt,it.disable=xt,it.enable=bt,it.enabled=Et,it.humanize=requireMs(),it.destroy=Pt,Object.keys(nt).forEach(Rt=>{it[Rt]=nt[Rt]}),it.names=[],it.skips=[],it.formatters={};function rt(Rt){let Dt=0;for(let Bt=0;Bt<Rt.length;Bt++)Dt=(Dt<<5)-Dt+Rt.charCodeAt(Bt),Dt|=0;return it.colors[Math.abs(Dt)%it.colors.length]}it.selectColor=rt;function it(Rt){let Dt,Bt=null,Ft,Yt;function Zt(...Wt){if(!Zt.enabled)return;const Qt=Zt,Kt=Number(new Date),on=Kt-(Dt||Kt);Qt.diff=on,Qt.prev=Dt,Qt.curr=Kt,Dt=Kt,Wt[0]=it.coerce(Wt[0]),typeof Wt[0]!="string"&&Wt.unshift("%O");let nn=0;Wt[0]=Wt[0].replace(/%([a-zA-Z%])/g,(gn,Tn)=>{if(gn==="%%")return"%";nn++;const An=it.formatters[Tn];if(typeof An=="function"){const kn=Wt[nn];gn=An.call(Qt,kn),Wt.splice(nn,1),nn--}return gn}),it.formatArgs.call(Qt,Wt),(Qt.log||it.log).apply(Qt,Wt)}return Zt.namespace=Rt,Zt.useColors=it.useColors(),Zt.color=it.selectColor(Rt),Zt.extend=st,Zt.destroy=it.destroy,Object.defineProperty(Zt,"enabled",{enumerable:!0,configurable:!1,get:()=>Bt!==null?Bt:(Ft!==it.namespaces&&(Ft=it.namespaces,Yt=it.enabled(Rt)),Yt),set:Wt=>{Bt=Wt}}),typeof it.init=="function"&&it.init(Zt),Zt}function st(Rt,Dt){const Bt=it(this.namespace+(typeof Dt>"u"?":":Dt)+Rt);return Bt.log=this.log,Bt}function bt(Rt){it.save(Rt),it.namespaces=Rt,it.names=[],it.skips=[];let Dt;const Bt=(typeof Rt=="string"?Rt:"").split(/[\s,]+/),Ft=Bt.length;for(Dt=0;Dt<Ft;Dt++)!Bt[Dt]||(Rt=Bt[Dt].replace(/\*/g,".*?"),Rt[0]==="-"?it.skips.push(new RegExp("^"+Rt.slice(1)+"$")):it.names.push(new RegExp("^"+Rt+"$")))}function xt(){const Rt=[...it.names.map(kt),...it.skips.map(kt).map(Dt=>"-"+Dt)].join(",");return it.enable(""),Rt}function Et(Rt){if(Rt[Rt.length-1]==="*")return!0;let Dt,Bt;for(Dt=0,Bt=it.skips.length;Dt<Bt;Dt++)if(it.skips[Dt].test(Rt))return!1;for(Dt=0,Bt=it.names.length;Dt<Bt;Dt++)if(it.names[Dt].test(Rt))return!0;return!1}function kt(Rt){return Rt.toString().substring(2,Rt.toString().length-2).replace(/\.\*\?$/,"*")}function Lt(Rt){return Rt instanceof Error?Rt.stack||Rt.message:Rt}function Pt(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return it.enable(it.load()),it}var common$2=setup;(function(nt,rt){rt.formatArgs=st,rt.save=bt,rt.load=xt,rt.useColors=it,rt.storage=Et(),rt.destroy=(()=>{let Lt=!1;return()=>{Lt||(Lt=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),rt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function it(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function st(Lt){if(Lt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Lt[0]+(this.useColors?"%c ":" ")+"+"+nt.exports.humanize(this.diff),!this.useColors)return;const Pt="color: "+this.color;Lt.splice(1,0,Pt,"color: inherit");let Rt=0,Dt=0;Lt[0].replace(/%[a-zA-Z%]/g,Bt=>{Bt!=="%%"&&(Rt++,Bt==="%c"&&(Dt=Rt))}),Lt.splice(Dt,0,Pt)}rt.log=console.debug||console.log||(()=>{});function bt(Lt){try{Lt?rt.storage.setItem("debug",Lt):rt.storage.removeItem("debug")}catch{}}function xt(){let Lt;try{Lt=rt.storage.getItem("debug")}catch{}return!Lt&&typeof process<"u"&&"env"in process&&(Lt={version:"2.0.0-beta.43"}.DEBUG),Lt}function Et(){try{return localStorage}catch{}}nt.exports=common$2(rt);const{formatters:kt}=nt.exports;kt.j=function(Lt){try{return JSON.stringify(Lt)}catch(Pt){return"[UnexpectedJSONParseError]: "+Pt.message}}})(browser,browser.exports);var FunctionStateMap={exports:{}},PlayerStates={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},nt.exports=rt.default})(PlayerStates,PlayerStates.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=PlayerStates.exports,st=bt(it);function bt(xt){return xt&&xt.__esModule?xt:{default:xt}}rt.default={pauseVideo:{acceptableStates:[st.default.ENDED,st.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[st.default.ENDED,st.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[st.default.ENDED,st.default.PLAYING,st.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},nt.exports=rt.default})(FunctionStateMap,FunctionStateMap.exports);var eventNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],nt.exports=rt.default})(eventNames,eventNames.exports);var functionNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe","getSphericalProperties","setSphericalProperties"],nt.exports=rt.default})(functionNames,functionNames.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=browser.exports,st=Rt(it),bt=FunctionStateMap.exports,xt=Rt(bt),Et=eventNames.exports,kt=Rt(Et),Lt=functionNames.exports,Pt=Rt(Lt);function Rt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}const Dt=(0,st.default)("youtube-player"),Bt={};Bt.proxyEvents=Ft=>{const Yt={};for(const Zt of kt.default){const Wt="on"+Zt.slice(0,1).toUpperCase()+Zt.slice(1);Yt[Wt]=Qt=>{Dt('event "%s"',Wt,Qt),Ft.trigger(Zt,Qt)}}return Yt},Bt.promisifyPlayer=(Ft,Yt=!1)=>{const Zt={};for(const Wt of Pt.default)Yt&&xt.default[Wt]?Zt[Wt]=(...Qt)=>Ft.then(Kt=>{const on=xt.default[Wt],nn=Kt.getPlayerState(),mn=Kt[Wt].apply(Kt,Qt);return on.stateChangeRequired||Array.isArray(on.acceptableStates)&&!on.acceptableStates.includes(nn)?new Promise(gn=>{const Tn=()=>{const An=Kt.getPlayerState();let kn;typeof on.timeout=="number"&&(kn=setTimeout(()=>{Kt.removeEventListener("onStateChange",Tn),gn()},on.timeout)),Array.isArray(on.acceptableStates)&&on.acceptableStates.includes(An)&&(Kt.removeEventListener("onStateChange",Tn),clearTimeout(kn),gn())};Kt.addEventListener("onStateChange",Tn)}).then(()=>mn):mn}):Zt[Wt]=(...Qt)=>Ft.then(Kt=>Kt[Wt].apply(Kt,Qt));return Zt},rt.default=Bt,nt.exports=rt.default})(YouTubePlayer$1,YouTubePlayer$1.exports);var loadYouTubeIframeApi={exports:{}},loadScript=function nt(rt,it,st){var bt=document.head||document.getElementsByTagName("head")[0],xt=document.createElement("script");typeof it=="function"&&(st=it,it={}),it=it||{},st=st||function(){},xt.type=it.type||"text/javascript",xt.charset=it.charset||"utf8",xt.async="async"in it?!!it.async:!0,xt.src=rt,it.attrs&&setAttributes(xt,it.attrs),it.text&&(xt.text=""+it.text);var Et="onload"in xt?stdOnEnd:ieOnEnd;Et(xt,st),xt.onload||stdOnEnd(xt,st),bt.appendChild(xt)};function setAttributes(nt,rt){for(var it in rt)nt.setAttribute(it,rt[it])}function stdOnEnd(nt,rt){nt.onload=function(){this.onerror=this.onload=null,rt(null,nt)},nt.onerror=function(){this.onerror=this.onload=null,rt(new Error("Failed to load "+this.src),nt)}}function ieOnEnd(nt,rt){nt.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,rt(null,nt))}}(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=loadScript,st=bt(it);function bt(xt){return xt&&xt.__esModule?xt:{default:xt}}rt.default=xt=>new Promise(kt=>{if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){kt(window.YT);return}else{const Pt=window.location.protocol==="http:"?"http:":"https:";(0,st.default)(Pt+"//www.youtube.com/iframe_api",Rt=>{Rt&&xt.trigger("error",Rt)})}const Lt=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{Lt&&Lt(),kt(window.YT)}}),nt.exports=rt.default})(loadYouTubeIframeApi,loadYouTubeIframeApi.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=sister,st=Lt(it),bt=YouTubePlayer$1.exports,xt=Lt(bt),Et=loadYouTubeIframeApi.exports,kt=Lt(Et);function Lt(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}let Pt;rt.default=(Rt,Dt={},Bt=!1)=>{const Ft=(0,st.default)();if(Pt||(Pt=(0,kt.default)(Ft)),Dt.events)throw new Error("Event handlers cannot be overwritten.");if(typeof Rt=="string"&&!document.getElementById(Rt))throw new Error('Element "'+Rt+'" does not exist.');Dt.events=xt.default.proxyEvents(Ft);const Yt=new Promise(Wt=>{typeof Rt=="object"&&Rt.playVideo instanceof Function?Wt(Rt):Pt.then(Qt=>{const Kt=new Qt.Player(Rt,Dt);return Ft.on("ready",()=>{Wt(Kt)}),null})}),Zt=xt.default.promisifyPlayer(Yt,Bt);return Zt.on=Ft.on,Zt.off=Ft.off,Zt},nt.exports=rt.default})(dist$1,dist$1.exports);const YouTubePlayer=getDefaultExportFromCjs(dist$1.exports);/*! @vimeo/player v2.20.1 | (c) 2023 Vimeo | MIT License | https://github.com/vimeo/player.js */function ownKeys(nt,rt){var it=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);rt&&(st=st.filter(function(bt){return Object.getOwnPropertyDescriptor(nt,bt).enumerable})),it.push.apply(it,st)}return it}function _objectSpread2(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt]!=null?arguments[rt]:{};rt%2?ownKeys(Object(it),!0).forEach(function(st){_defineProperty(nt,st,it[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(it)):ownKeys(Object(it)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(it,st))})}return nt}function _regeneratorRuntime(){_regeneratorRuntime=function(){return nt};var nt={},rt=Object.prototype,it=rt.hasOwnProperty,st=Object.defineProperty||function(cn,Sn,an){cn[Sn]=an.value},bt=typeof Symbol=="function"?Symbol:{},xt=bt.iterator||"@@iterator",Et=bt.asyncIterator||"@@asyncIterator",kt=bt.toStringTag||"@@toStringTag";function Lt(cn,Sn,an){return Object.defineProperty(cn,Sn,{value:an,enumerable:!0,configurable:!0,writable:!0}),cn[Sn]}try{Lt({},"")}catch{Lt=function(Sn,an,jn){return Sn[an]=jn}}function Pt(cn,Sn,an,jn){var hn=Sn&&Sn.prototype instanceof Bt?Sn:Bt,zn=Object.create(hn.prototype),ir=new kn(jn||[]);return st(zn,"_invoke",{value:mn(cn,an,ir)}),zn}function Rt(cn,Sn,an){try{return{type:"normal",arg:cn.call(Sn,an)}}catch(jn){return{type:"throw",arg:jn}}}nt.wrap=Pt;var Dt={};function Bt(){}function Ft(){}function Yt(){}var Zt={};Lt(Zt,xt,function(){return this});var Wt=Object.getPrototypeOf,Qt=Wt&&Wt(Wt(Mn([])));Qt&&Qt!==rt&&it.call(Qt,xt)&&(Zt=Qt);var Kt=Yt.prototype=Bt.prototype=Object.create(Zt);function on(cn){["next","throw","return"].forEach(function(Sn){Lt(cn,Sn,function(an){return this._invoke(Sn,an)})})}function nn(cn,Sn){function an(hn,zn,ir,tr){var nr=Rt(cn[hn],cn,zn);if(nr.type!=="throw"){var dr=nr.arg,or=dr.value;return or&&typeof or=="object"&&it.call(or,"__await")?Sn.resolve(or.__await).then(function(ur){an("next",ur,ir,tr)},function(ur){an("throw",ur,ir,tr)}):Sn.resolve(or).then(function(ur){dr.value=ur,ir(dr)},function(ur){return an("throw",ur,ir,tr)})}tr(nr.arg)}var jn;st(this,"_invoke",{value:function(hn,zn){function ir(){return new Sn(function(tr,nr){an(hn,zn,tr,nr)})}return jn=jn?jn.then(ir,ir):ir()}})}function mn(cn,Sn,an){var jn="suspendedStart";return function(hn,zn){if(jn==="executing")throw new Error("Generator is already running");if(jn==="completed"){if(hn==="throw")throw zn;return $n()}for(an.method=hn,an.arg=zn;;){var ir=an.delegate;if(ir){var tr=gn(ir,an);if(tr){if(tr===Dt)continue;return tr}}if(an.method==="next")an.sent=an._sent=an.arg;else if(an.method==="throw"){if(jn==="suspendedStart")throw jn="completed",an.arg;an.dispatchException(an.arg)}else an.method==="return"&&an.abrupt("return",an.arg);jn="executing";var nr=Rt(cn,Sn,an);if(nr.type==="normal"){if(jn=an.done?"completed":"suspendedYield",nr.arg===Dt)continue;return{value:nr.arg,done:an.done}}nr.type==="throw"&&(jn="completed",an.method="throw",an.arg=nr.arg)}}}function gn(cn,Sn){var an=Sn.method,jn=cn.iterator[an];if(jn===void 0)return Sn.delegate=null,an==="throw"&&cn.iterator.return&&(Sn.method="return",Sn.arg=void 0,gn(cn,Sn),Sn.method==="throw")||an!=="return"&&(Sn.method="throw",Sn.arg=new TypeError("The iterator does not provide a '"+an+"' method")),Dt;var hn=Rt(jn,cn.iterator,Sn.arg);if(hn.type==="throw")return Sn.method="throw",Sn.arg=hn.arg,Sn.delegate=null,Dt;var zn=hn.arg;return zn?zn.done?(Sn[cn.resultName]=zn.value,Sn.next=cn.nextLoc,Sn.method!=="return"&&(Sn.method="next",Sn.arg=void 0),Sn.delegate=null,Dt):zn:(Sn.method="throw",Sn.arg=new TypeError("iterator result is not an object"),Sn.delegate=null,Dt)}function Tn(cn){var Sn={tryLoc:cn[0]};1 in cn&&(Sn.catchLoc=cn[1]),2 in cn&&(Sn.finallyLoc=cn[2],Sn.afterLoc=cn[3]),this.tryEntries.push(Sn)}function An(cn){var Sn=cn.completion||{};Sn.type="normal",delete Sn.arg,cn.completion=Sn}function kn(cn){this.tryEntries=[{tryLoc:"root"}],cn.forEach(Tn,this),this.reset(!0)}function Mn(cn){if(cn){var Sn=cn[xt];if(Sn)return Sn.call(cn);if(typeof cn.next=="function")return cn;if(!isNaN(cn.length)){var an=-1,jn=function hn(){for(;++an<cn.length;)if(it.call(cn,an))return hn.value=cn[an],hn.done=!1,hn;return hn.value=void 0,hn.done=!0,hn};return jn.next=jn}}return{next:$n}}function $n(){return{value:void 0,done:!0}}return Ft.prototype=Yt,st(Kt,"constructor",{value:Yt,configurable:!0}),st(Yt,"constructor",{value:Ft,configurable:!0}),Ft.displayName=Lt(Yt,kt,"GeneratorFunction"),nt.isGeneratorFunction=function(cn){var Sn=typeof cn=="function"&&cn.constructor;return!!Sn&&(Sn===Ft||(Sn.displayName||Sn.name)==="GeneratorFunction")},nt.mark=function(cn){return Object.setPrototypeOf?Object.setPrototypeOf(cn,Yt):(cn.__proto__=Yt,Lt(cn,kt,"GeneratorFunction")),cn.prototype=Object.create(Kt),cn},nt.awrap=function(cn){return{__await:cn}},on(nn.prototype),Lt(nn.prototype,Et,function(){return this}),nt.AsyncIterator=nn,nt.async=function(cn,Sn,an,jn,hn){hn===void 0&&(hn=Promise);var zn=new nn(Pt(cn,Sn,an,jn),hn);return nt.isGeneratorFunction(Sn)?zn:zn.next().then(function(ir){return ir.done?ir.value:zn.next()})},on(Kt),Lt(Kt,kt,"Generator"),Lt(Kt,xt,function(){return this}),Lt(Kt,"toString",function(){return"[object Generator]"}),nt.keys=function(cn){var Sn=Object(cn),an=[];for(var jn in Sn)an.push(jn);return an.reverse(),function hn(){for(;an.length;){var zn=an.pop();if(zn in Sn)return hn.value=zn,hn.done=!1,hn}return hn.done=!0,hn}},nt.values=Mn,kn.prototype={constructor:kn,reset:function(cn){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(An),!cn)for(var Sn in this)Sn.charAt(0)==="t"&&it.call(this,Sn)&&!isNaN(+Sn.slice(1))&&(this[Sn]=void 0)},stop:function(){this.done=!0;var cn=this.tryEntries[0].completion;if(cn.type==="throw")throw cn.arg;return this.rval},dispatchException:function(cn){if(this.done)throw cn;var Sn=this;function an(nr,dr){return zn.type="throw",zn.arg=cn,Sn.next=nr,dr&&(Sn.method="next",Sn.arg=void 0),!!dr}for(var jn=this.tryEntries.length-1;jn>=0;--jn){var hn=this.tryEntries[jn],zn=hn.completion;if(hn.tryLoc==="root")return an("end");if(hn.tryLoc<=this.prev){var ir=it.call(hn,"catchLoc"),tr=it.call(hn,"finallyLoc");if(ir&&tr){if(this.prev<hn.catchLoc)return an(hn.catchLoc,!0);if(this.prev<hn.finallyLoc)return an(hn.finallyLoc)}else if(ir){if(this.prev<hn.catchLoc)return an(hn.catchLoc,!0)}else{if(!tr)throw new Error("try statement without catch or finally");if(this.prev<hn.finallyLoc)return an(hn.finallyLoc)}}}},abrupt:function(cn,Sn){for(var an=this.tryEntries.length-1;an>=0;--an){var jn=this.tryEntries[an];if(jn.tryLoc<=this.prev&&it.call(jn,"finallyLoc")&&this.prev<jn.finallyLoc){var hn=jn;break}}hn&&(cn==="break"||cn==="continue")&&hn.tryLoc<=Sn&&Sn<=hn.finallyLoc&&(hn=null);var zn=hn?hn.completion:{};return zn.type=cn,zn.arg=Sn,hn?(this.method="next",this.next=hn.finallyLoc,Dt):this.complete(zn)},complete:function(cn,Sn){if(cn.type==="throw")throw cn.arg;return cn.type==="break"||cn.type==="continue"?this.next=cn.arg:cn.type==="return"?(this.rval=this.arg=cn.arg,this.method="return",this.next="end"):cn.type==="normal"&&Sn&&(this.next=Sn),Dt},finish:function(cn){for(var Sn=this.tryEntries.length-1;Sn>=0;--Sn){var an=this.tryEntries[Sn];if(an.finallyLoc===cn)return this.complete(an.completion,an.afterLoc),An(an),Dt}},catch:function(cn){for(var Sn=this.tryEntries.length-1;Sn>=0;--Sn){var an=this.tryEntries[Sn];if(an.tryLoc===cn){var jn=an.completion;if(jn.type==="throw"){var hn=jn.arg;An(an)}return hn}}throw new Error("illegal catch attempt")},delegateYield:function(cn,Sn,an){return this.delegate={iterator:Mn(cn),resultName:Sn,nextLoc:an},this.method==="next"&&(this.arg=void 0),Dt}},nt}function asyncGeneratorStep(nt,rt,it,st,bt,xt,Et){try{var kt=nt[xt](Et),Lt=kt.value}catch(Pt){it(Pt);return}kt.done?rt(Lt):Promise.resolve(Lt).then(st,bt)}function _asyncToGenerator(nt){return function(){var rt=this,it=arguments;return new Promise(function(st,bt){var xt=nt.apply(rt,it);function Et(Lt){asyncGeneratorStep(xt,st,bt,Et,kt,"next",Lt)}function kt(Lt){asyncGeneratorStep(xt,st,bt,Et,kt,"throw",Lt)}Et(void 0)})}}function _classCallCheck(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}function _defineProperties(nt,rt){for(var it=0;it<rt.length;it++){var st=rt[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(nt,_toPropertyKey(st.key),st)}}function _createClass(nt,rt,it){return rt&&_defineProperties(nt.prototype,rt),it&&_defineProperties(nt,it),Object.defineProperty(nt,"prototype",{writable:!1}),nt}function _defineProperty(nt,rt,it){return rt=_toPropertyKey(rt),rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}function _inherits(nt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(rt&&rt.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),rt&&_setPrototypeOf$1(nt,rt)}function _getPrototypeOf(nt){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(it){return it.__proto__||Object.getPrototypeOf(it)},_getPrototypeOf(nt)}function _setPrototypeOf$1(nt,rt){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(st,bt){return st.__proto__=bt,st},_setPrototypeOf$1(nt,rt)}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct$1(nt,rt,it){return _isNativeReflectConstruct$1()?_construct$1=Reflect.construct.bind():_construct$1=function(bt,xt,Et){var kt=[null];kt.push.apply(kt,xt);var Lt=Function.bind.apply(bt,kt),Pt=new Lt;return Et&&_setPrototypeOf$1(Pt,Et.prototype),Pt},_construct$1.apply(null,arguments)}function _isNativeFunction(nt){return Function.toString.call(nt).indexOf("[native code]")!==-1}function _wrapNativeSuper(nt){var rt=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(st){if(st===null||!_isNativeFunction(st))return st;if(typeof st!="function")throw new TypeError("Super expression must either be null or a function");if(typeof rt<"u"){if(rt.has(st))return rt.get(st);rt.set(st,bt)}function bt(){return _construct$1(st,arguments,_getPrototypeOf(this).constructor)}return bt.prototype=Object.create(st.prototype,{constructor:{value:bt,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(bt,st)},_wrapNativeSuper(nt)}function _assertThisInitialized(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function _possibleConstructorReturn(nt,rt){if(rt&&(typeof rt=="object"||typeof rt=="function"))return rt;if(rt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(nt)}function _createSuper(nt){var rt=_isNativeReflectConstruct$1();return function(){var st=_getPrototypeOf(nt),bt;if(rt){var xt=_getPrototypeOf(this).constructor;bt=Reflect.construct(st,arguments,xt)}else bt=st.apply(this,arguments);return _possibleConstructorReturn(this,bt)}}function _toPrimitive(nt,rt){if(typeof nt!="object"||nt===null)return nt;var it=nt[Symbol.toPrimitive];if(it!==void 0){var st=it.call(nt,rt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(nt)}function _toPropertyKey(nt){var rt=_toPrimitive(nt,"string");return typeof rt=="symbol"?rt:String(rt)}var isNode=typeof global<"u"&&{}.toString.call(global)==="[object global]";function getMethodName(nt,rt){return nt.indexOf(rt.toLowerCase())===0?nt:"".concat(rt.toLowerCase()).concat(nt.substr(0,1).toUpperCase()).concat(nt.substr(1))}function isDomElement(nt){return Boolean(nt&&nt.nodeType===1&&"nodeName"in nt&&nt.ownerDocument&&nt.ownerDocument.defaultView)}function isInteger$1(nt){return!isNaN(parseFloat(nt))&&isFinite(nt)&&Math.floor(nt)==nt}function isVimeoUrl(nt){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(nt)}function isVimeoEmbed(nt){var rt=/^https:\/\/player\.vimeo\.com\/video\/\d+/;return rt.test(nt)}function getVimeoUrl(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=nt.id,it=nt.url,st=rt||it;if(!st)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(isInteger$1(st))return"https://vimeo.com/".concat(st);if(isVimeoUrl(st))return st.replace("http:","https:");throw rt?new TypeError("\u201C".concat(rt,"\u201D is not a valid video id.")):new TypeError("\u201C".concat(st,"\u201D is not a vimeo.com url."))}var subscribe=function nt(rt,it,st){var bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"addEventListener",xt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"removeEventListener",Et=typeof it=="string"?[it]:it;return Et.forEach(function(kt){rt[bt](kt,st)}),{cancel:function(){return Et.forEach(function(Lt){return rt[xt](Lt,st)})}}},arrayIndexOfSupport=typeof Array.prototype.indexOf<"u",postMessageSupport=typeof window<"u"&&typeof window.postMessage<"u";if(!isNode&&(!arrayIndexOfSupport||!postMessageSupport))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule(nt,rt){return rt={exports:{}},nt(rt,rt.exports),rt.exports}/*!
 * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */(function(nt){if(nt.WeakMap)return;var rt=Object.prototype.hasOwnProperty,it=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),st=function(xt,Et,kt){it?Object.defineProperty(xt,Et,{configurable:!0,writable:!0,value:kt}):xt[Et]=kt};nt.WeakMap=function(){function xt(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(st(this,"_id",kt("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}st(xt.prototype,"delete",function(Pt){if(Et(this,"delete"),!bt(Pt))return!1;var Rt=Pt[this._id];return Rt&&Rt[0]===Pt?(delete Pt[this._id],!0):!1}),st(xt.prototype,"get",function(Pt){if(Et(this,"get"),!!bt(Pt)){var Rt=Pt[this._id];if(Rt&&Rt[0]===Pt)return Rt[1]}}),st(xt.prototype,"has",function(Pt){if(Et(this,"has"),!bt(Pt))return!1;var Rt=Pt[this._id];return!!(Rt&&Rt[0]===Pt)}),st(xt.prototype,"set",function(Pt,Rt){if(Et(this,"set"),!bt(Pt))throw new TypeError("Invalid value used as weak map key");var Dt=Pt[this._id];return Dt&&Dt[0]===Pt?(Dt[1]=Rt,this):(st(Pt,this._id,[Pt,Rt]),this)});function Et(Pt,Rt){if(!bt(Pt)||!rt.call(Pt,"_id"))throw new TypeError(Rt+" method called on incompatible receiver "+typeof Pt)}function kt(Pt){return Pt+"_"+Lt()+"."+Lt()}function Lt(){return Math.random().toString().substring(2)}return st(xt,"_polyfill",!0),xt}();function bt(xt){return Object(xt)===xt}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal);var npo_src=createCommonjsModule(function(nt){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(it,st,bt){st[it]=st[it]||bt(),nt.exports&&(nt.exports=st[it])})("Promise",commonjsGlobal,function(){var it,st,bt,xt=Object.prototype.toString,Et=typeof setImmediate<"u"?function(on){return setImmediate(on)}:setTimeout;try{Object.defineProperty({},"x",{}),it=function(on,nn,mn,gn){return Object.defineProperty(on,nn,{value:mn,writable:!0,configurable:gn!==!1})}}catch{it=function(nn,mn,gn){return nn[mn]=gn,nn}}bt=function(){var on,nn,mn;function gn(Tn,An){this.fn=Tn,this.self=An,this.next=void 0}return{add:function(An,kn){mn=new gn(An,kn),nn?nn.next=mn:on=mn,nn=mn,mn=void 0},drain:function(){var An=on;for(on=nn=st=void 0;An;)An.fn.call(An.self),An=An.next}}}();function kt(Kt,on){bt.add(Kt,on),st||(st=Et(bt.drain))}function Lt(Kt){var on,nn=typeof Kt;return Kt!=null&&(nn=="object"||nn=="function")&&(on=Kt.then),typeof on=="function"?on:!1}function Pt(){for(var Kt=0;Kt<this.chain.length;Kt++)Rt(this,this.state===1?this.chain[Kt].success:this.chain[Kt].failure,this.chain[Kt]);this.chain.length=0}function Rt(Kt,on,nn){var mn,gn;try{on===!1?nn.reject(Kt.msg):(on===!0?mn=Kt.msg:mn=on.call(void 0,Kt.msg),mn===nn.promise?nn.reject(TypeError("Promise-chain cycle")):(gn=Lt(mn))?gn.call(mn,nn.resolve,nn.reject):nn.resolve(mn))}catch(Tn){nn.reject(Tn)}}function Dt(Kt){var on,nn=this;if(!nn.triggered){nn.triggered=!0,nn.def&&(nn=nn.def);try{(on=Lt(Kt))?kt(function(){var mn=new Yt(nn);try{on.call(Kt,function(){Dt.apply(mn,arguments)},function(){Bt.apply(mn,arguments)})}catch(gn){Bt.call(mn,gn)}}):(nn.msg=Kt,nn.state=1,nn.chain.length>0&&kt(Pt,nn))}catch(mn){Bt.call(new Yt(nn),mn)}}}function Bt(Kt){var on=this;on.triggered||(on.triggered=!0,on.def&&(on=on.def),on.msg=Kt,on.state=2,on.chain.length>0&&kt(Pt,on))}function Ft(Kt,on,nn,mn){for(var gn=0;gn<on.length;gn++)(function(An){Kt.resolve(on[An]).then(function(Mn){nn(An,Mn)},mn)})(gn)}function Yt(Kt){this.def=Kt,this.triggered=!1}function Zt(Kt){this.promise=Kt,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Wt(Kt){if(typeof Kt!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var on=new Zt(this);this.then=function(mn,gn){var Tn={success:typeof mn=="function"?mn:!0,failure:typeof gn=="function"?gn:!1};return Tn.promise=new this.constructor(function(kn,Mn){if(typeof kn!="function"||typeof Mn!="function")throw TypeError("Not a function");Tn.resolve=kn,Tn.reject=Mn}),on.chain.push(Tn),on.state!==0&&kt(Pt,on),Tn.promise},this.catch=function(mn){return this.then(void 0,mn)};try{Kt.call(void 0,function(mn){Dt.call(on,mn)},function(mn){Bt.call(on,mn)})}catch(nn){Bt.call(on,nn)}}var Qt=it({},"constructor",Wt,!1);return Wt.prototype=Qt,it(Qt,"__NPO__",0,!1),it(Wt,"resolve",function(on){var nn=this;return on&&typeof on=="object"&&on.__NPO__===1?on:new nn(function(gn,Tn){if(typeof gn!="function"||typeof Tn!="function")throw TypeError("Not a function");gn(on)})}),it(Wt,"reject",function(on){return new this(function(mn,gn){if(typeof mn!="function"||typeof gn!="function")throw TypeError("Not a function");gn(on)})}),it(Wt,"all",function(on){var nn=this;return xt.call(on)!="[object Array]"?nn.reject(TypeError("Not an array")):on.length===0?nn.resolve([]):new nn(function(gn,Tn){if(typeof gn!="function"||typeof Tn!="function")throw TypeError("Not a function");var An=on.length,kn=Array(An),Mn=0;Ft(nn,on,function(cn,Sn){kn[cn]=Sn,++Mn===An&&gn(kn)},Tn)})}),it(Wt,"race",function(on){var nn=this;return xt.call(on)!="[object Array]"?nn.reject(TypeError("Not an array")):new nn(function(gn,Tn){if(typeof gn!="function"||typeof Tn!="function")throw TypeError("Not a function");Ft(nn,on,function(kn,Mn){gn(Mn)},Tn)})}),Wt})}),callbackMap=new WeakMap;function storeCallback(nt,rt,it){var st=callbackMap.get(nt.element)||{};rt in st||(st[rt]=[]),st[rt].push(it),callbackMap.set(nt.element,st)}function getCallbacks(nt,rt){var it=callbackMap.get(nt.element)||{};return it[rt]||[]}function removeCallback(nt,rt,it){var st=callbackMap.get(nt.element)||{};if(!st[rt])return!0;if(!it)return st[rt]=[],callbackMap.set(nt.element,st),!0;var bt=st[rt].indexOf(it);return bt!==-1&&st[rt].splice(bt,1),callbackMap.set(nt.element,st),st[rt]&&st[rt].length===0}function shiftCallbacks(nt,rt){var it=getCallbacks(nt,rt);if(it.length<1)return!1;var st=it.shift();return removeCallback(nt,rt,st),st}function swapCallbacks(nt,rt){var it=callbackMap.get(nt);callbackMap.set(rt,it),callbackMap.delete(nt)}function parseMessageData(nt){if(typeof nt=="string")try{nt=JSON.parse(nt)}catch(rt){return console.warn(rt),{}}return nt}function postMessage(nt,rt,it){if(!(!nt.element.contentWindow||!nt.element.contentWindow.postMessage)){var st={method:rt};it!==void 0&&(st.value=it);var bt=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));bt>=8&&bt<10&&(st=JSON.stringify(st)),nt.element.contentWindow.postMessage(st,nt.origin)}}function processData(nt,rt){rt=parseMessageData(rt);var it=[],st;if(rt.event){if(rt.event==="error"){var bt=getCallbacks(nt,rt.data.method);bt.forEach(function(Et){var kt=new Error(rt.data.message);kt.name=rt.data.name,Et.reject(kt),removeCallback(nt,rt.data.method,Et)})}it=getCallbacks(nt,"event:".concat(rt.event)),st=rt.data}else if(rt.method){var xt=shiftCallbacks(nt,rt.method);xt&&(it.push(xt),st=rt.value)}it.forEach(function(Et){try{if(typeof Et=="function"){Et.call(nt,st);return}Et.resolve(st)}catch{}})}var oEmbedParameters=["autopause","autoplay","background","byline","color","colors","controls","dnt","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function getOEmbedParameters(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oEmbedParameters.reduce(function(it,st){var bt=nt.getAttribute("data-vimeo-".concat(st));return(bt||bt==="")&&(it[st]=bt===""?1:bt),it},rt)}function createEmbed(nt,rt){var it=nt.html;if(!rt)throw new TypeError("An element must be provided");if(rt.getAttribute("data-vimeo-initialized")!==null)return rt.querySelector("iframe");var st=document.createElement("div");return st.innerHTML=it,rt.appendChild(st.firstChild),rt.setAttribute("data-vimeo-initialized","true"),rt.querySelector("iframe")}function getOEmbedData(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=arguments.length>2?arguments[2]:void 0;return new Promise(function(st,bt){if(!isVimeoUrl(nt))throw new TypeError("\u201C".concat(nt,"\u201D is not a vimeo.com url."));var xt="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(nt));for(var Et in rt)rt.hasOwnProperty(Et)&&(xt+="&".concat(Et,"=").concat(encodeURIComponent(rt[Et])));var kt="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;kt.open("GET",xt,!0),kt.onload=function(){if(kt.status===404){bt(new Error("\u201C".concat(nt,"\u201D was not found.")));return}if(kt.status===403){bt(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}try{var Lt=JSON.parse(kt.responseText);if(Lt.domain_status_code===403){createEmbed(Lt,it),bt(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}st(Lt)}catch(Pt){bt(Pt)}},kt.onerror=function(){var Lt=kt.status?" (".concat(kt.status,")"):"";bt(new Error("There was an error fetching the embed code from Vimeo".concat(Lt,".")))},kt.send()})}function initializeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,rt=[].slice.call(nt.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),it=function(bt){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(bt))};rt.forEach(function(st){try{if(st.getAttribute("data-vimeo-defer")!==null)return;var bt=getOEmbedParameters(st),xt=getVimeoUrl(bt);getOEmbedData(xt,bt,st).then(function(Et){return createEmbed(Et,st)}).catch(it)}catch(Et){it(Et)}})}function resizeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var rt=function(st){if(!!isVimeoUrl(st.origin)&&!(!st.data||st.data.event!=="spacechange")){for(var bt=nt.querySelectorAll("iframe"),xt=0;xt<bt.length;xt++)if(bt[xt].contentWindow===st.source){var Et=bt[xt].parentElement;Et.style.paddingBottom="".concat(st.data.data[0].bottom,"px");break}}};window.addEventListener("message",rt)}}function initAppendVideoMetadata(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var rt=function(st){if(!!isVimeoUrl(st.origin)){var bt=parseMessageData(st.data);if(!(!bt||bt.event!=="ready"))for(var xt=nt.querySelectorAll("iframe"),Et=0;Et<xt.length;Et++){var kt=xt[Et],Lt=kt.contentWindow===st.source;if(isVimeoEmbed(kt.src)&&Lt){var Pt=new Player(kt);Pt.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",rt)}}function checkUrlTimeParam(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var rt=function(bt){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(bt))},it=function(bt){if(!!isVimeoUrl(bt.origin)){var xt=parseMessageData(bt.data);if(!(!xt||xt.event!=="ready"))for(var Et=nt.querySelectorAll("iframe"),kt=function(){var Rt=Et[Lt],Dt=Rt.contentWindow===bt.source;if(isVimeoEmbed(Rt.src)&&Dt){var Bt=new Player(Rt);Bt.getVideoId().then(function(Ft){var Yt=new RegExp("[?&]vimeo_t_".concat(Ft,"=([^&#]*)")).exec(window.location.href);if(Yt&&Yt[1]){var Zt=decodeURI(Yt[1]);Bt.setCurrentTime(Zt)}}).catch(rt)}},Lt=0;Lt<Et.length;Lt++)kt()}};window.addEventListener("message",it)}}function initializeScreenfull(){var nt=function(){for(var st,bt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],xt=0,Et=bt.length,kt={};xt<Et;xt++)if(st=bt[xt],st&&st[1]in document){for(xt=0;xt<st.length;xt++)kt[bt[0][xt]]=st[xt];return kt}return!1}(),rt={fullscreenchange:nt.fullscreenchange,fullscreenerror:nt.fullscreenerror},it={request:function(bt){return new Promise(function(xt,Et){var kt=function Pt(){it.off("fullscreenchange",Pt),xt()};it.on("fullscreenchange",kt),bt=bt||document.documentElement;var Lt=bt[nt.requestFullscreen]();Lt instanceof Promise&&Lt.then(kt).catch(Et)})},exit:function(){return new Promise(function(bt,xt){if(!it.isFullscreen){bt();return}var Et=function Lt(){it.off("fullscreenchange",Lt),bt()};it.on("fullscreenchange",Et);var kt=document[nt.exitFullscreen]();kt instanceof Promise&&kt.then(Et).catch(xt)})},on:function(bt,xt){var Et=rt[bt];Et&&document.addEventListener(Et,xt)},off:function(bt,xt){var Et=rt[bt];Et&&document.removeEventListener(Et,xt)}};return Object.defineProperties(it,{isFullscreen:{get:function(){return Boolean(document[nt.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[nt.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[nt.fullscreenEnabled])}}}),it}var defaultOptions={role:"viewer",autoPlayMuted:!0,allowedDrift:.3,maxAllowedDrift:1,minCheckInterval:.1,maxRateAdjustment:.2,maxTimeToCatchUp:1},TimingSrcConnector=function(nt){_inherits(it,nt);var rt=_createSuper(it);function it(st,bt){var xt,Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},kt=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,it),xt=rt.call(this),_defineProperty(_assertThisInitialized(xt),"logger",void 0),_defineProperty(_assertThisInitialized(xt),"speedAdjustment",0),_defineProperty(_assertThisInitialized(xt),"adjustSpeed",function(){var Lt=_asyncToGenerator(_regeneratorRuntime().mark(function Pt(Rt,Dt){var Bt;return _regeneratorRuntime().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:if(xt.speedAdjustment!==Dt){Yt.next=2;break}return Yt.abrupt("return");case 2:return Yt.next=4,Rt.getPlaybackRate();case 4:return Yt.t0=Yt.sent,Yt.t1=xt.speedAdjustment,Yt.t2=Yt.t0-Yt.t1,Yt.t3=Dt,Bt=Yt.t2+Yt.t3,xt.log("New playbackRate:  ".concat(Bt)),Yt.next=12,Rt.setPlaybackRate(Bt);case 12:xt.speedAdjustment=Dt;case 13:case"end":return Yt.stop()}},Pt)}));return function(Pt,Rt){return Lt.apply(this,arguments)}}()),xt.logger=kt,xt.init(bt,st,_objectSpread2(_objectSpread2({},defaultOptions),Et)),xt}return _createClass(it,[{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnect"))}},{key:"init",value:function(){var st=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Et,kt,Lt){var Pt=this,Rt,Dt,Bt;return _regeneratorRuntime().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Yt.next=2,this.waitForTOReadyState(Et,"open");case 2:if(Lt.role!=="viewer"){Yt.next=10;break}return Yt.next=5,this.updatePlayer(Et,kt,Lt);case 5:Rt=subscribe(Et,"change",function(){return Pt.updatePlayer(Et,kt,Lt)}),Dt=this.maintainPlaybackPosition(Et,kt,Lt),this.addEventListener("disconnect",function(){Dt.cancel(),Rt.cancel()}),Yt.next=14;break;case 10:return Yt.next=12,this.updateTimingObject(Et,kt);case 12:Bt=subscribe(kt,["seeked","play","pause","ratechange"],function(){return Pt.updateTimingObject(Et,kt)},"on","off"),this.addEventListener("disconnect",function(){return Bt.cancel()});case 14:case"end":return Yt.stop()}},xt,this)}));function bt(xt,Et,kt){return st.apply(this,arguments)}return bt}()},{key:"updateTimingObject",value:function(){var st=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Et,kt){return _regeneratorRuntime().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.t0=Et,Pt.next=3,kt.getCurrentTime();case 3:return Pt.t1=Pt.sent,Pt.next=6,kt.getPaused();case 6:if(!Pt.sent){Pt.next=10;break}Pt.t2=0,Pt.next=13;break;case 10:return Pt.next=12,kt.getPlaybackRate();case 12:Pt.t2=Pt.sent;case 13:Pt.t3=Pt.t2,Pt.t4={position:Pt.t1,velocity:Pt.t3},Pt.t0.update.call(Pt.t0,Pt.t4);case 16:case"end":return Pt.stop()}},xt)}));function bt(xt,Et){return st.apply(this,arguments)}return bt}()},{key:"updatePlayer",value:function(){var st=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Et,kt,Lt){var Pt,Rt,Dt;return _regeneratorRuntime().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:if(Pt=Et.query(),Rt=Pt.position,Dt=Pt.velocity,typeof Rt=="number"&&kt.setCurrentTime(Rt),typeof Dt!="number"){Ft.next=25;break}if(Dt!==0){Ft.next=11;break}return Ft.next=6,kt.getPaused();case 6:if(Ft.t0=Ft.sent,Ft.t0!==!1){Ft.next=9;break}kt.pause();case 9:Ft.next=25;break;case 11:if(!(Dt>0)){Ft.next=25;break}return Ft.next=14,kt.getPaused();case 14:if(Ft.t1=Ft.sent,Ft.t1!==!0){Ft.next=19;break}return Ft.next=18,kt.play().catch(function(){var Yt=_asyncToGenerator(_regeneratorRuntime().mark(function Zt(Wt){return _regeneratorRuntime().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(!(Wt.name==="NotAllowedError"&&Lt.autoPlayMuted)){Kt.next=5;break}return Kt.next=3,kt.setMuted(!0);case 3:return Kt.next=5,kt.play().catch(function(on){return console.error("Couldn't play the video from TimingSrcConnector. Error:",on)});case 5:case"end":return Kt.stop()}},Zt)}));return function(Zt){return Yt.apply(this,arguments)}}());case 18:this.updatePlayer(Et,kt,Lt);case 19:return Ft.next=21,kt.getPlaybackRate();case 21:if(Ft.t2=Ft.sent,Ft.t3=Dt,Ft.t2===Ft.t3){Ft.next=25;break}kt.setPlaybackRate(Dt);case 25:case"end":return Ft.stop()}},xt,this)}));function bt(xt,Et,kt){return st.apply(this,arguments)}return bt}()},{key:"maintainPlaybackPosition",value:function(bt,xt,Et){var kt=this,Lt=Et.allowedDrift,Pt=Et.maxAllowedDrift,Rt=Et.minCheckInterval,Dt=Et.maxRateAdjustment,Bt=Et.maxTimeToCatchUp,Ft=Math.min(Bt,Math.max(Rt,Pt))*1e3,Yt=function(){var Wt=_asyncToGenerator(_regeneratorRuntime().mark(function Qt(){var Kt,on,nn,mn,gn;return _regeneratorRuntime().wrap(function(An){for(;;)switch(An.prev=An.next){case 0:if(An.t0=bt.query().velocity===0,An.t0){An.next=6;break}return An.next=4,xt.getPaused();case 4:An.t1=An.sent,An.t0=An.t1===!0;case 6:if(!An.t0){An.next=8;break}return An.abrupt("return");case 8:return An.t2=bt.query().position,An.next=11,xt.getCurrentTime();case 11:if(An.t3=An.sent,Kt=An.t2-An.t3,on=Math.abs(Kt),kt.log("Drift: ".concat(Kt)),!(on>Pt)){An.next=22;break}return An.next=18,kt.adjustSpeed(xt,0);case 18:xt.setCurrentTime(bt.query().position),kt.log("Resync by currentTime"),An.next=29;break;case 22:if(!(on>Lt)){An.next=29;break}return nn=on/Bt,mn=Dt,gn=nn<mn?(mn-nn)/2:mn,An.next=28,kt.adjustSpeed(xt,gn*Math.sign(Kt));case 28:kt.log("Resync by playbackRate");case 29:case"end":return An.stop()}},Qt)}));return function(){return Wt.apply(this,arguments)}}(),Zt=setInterval(function(){return Yt()},Ft);return{cancel:function(){return clearInterval(Zt)}}}},{key:"log",value:function(bt){var xt;(xt=this.logger)===null||xt===void 0||xt.call(this,"TimingSrcConnector: ".concat(bt))}},{key:"waitForTOReadyState",value:function(bt,xt){return new Promise(function(Et){var kt=function Lt(){bt.readyState===xt?Et():bt.addEventListener("readystatechange",Lt,{once:!0})};kt()})}}]),it}(_wrapNativeSuper(EventTarget)),playerMap=new WeakMap,readyMap=new WeakMap,screenfull={},Player=function(){function nt(rt){var it=this,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,nt),window.jQuery&&rt instanceof jQuery&&(rt.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),rt=rt[0]),typeof document<"u"&&typeof rt=="string"&&(rt=document.getElementById(rt)),!isDomElement(rt))throw new TypeError("You must pass either a valid element or a valid id.");if(rt.nodeName!=="IFRAME"){var bt=rt.querySelector("iframe");bt&&(rt=bt)}if(rt.nodeName==="IFRAME"&&!isVimeoUrl(rt.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(playerMap.has(rt))return playerMap.get(rt);this._window=rt.ownerDocument.defaultView,this.element=rt,this.origin="*";var xt=new npo_src(function(kt,Lt){if(it._onMessage=function(Dt){if(!(!isVimeoUrl(Dt.origin)||it.element.contentWindow!==Dt.source)){it.origin==="*"&&(it.origin=Dt.origin);var Bt=parseMessageData(Dt.data),Ft=Bt&&Bt.event==="error",Yt=Ft&&Bt.data&&Bt.data.method==="ready";if(Yt){var Zt=new Error(Bt.data.message);Zt.name=Bt.data.name,Lt(Zt);return}var Wt=Bt&&Bt.event==="ready",Qt=Bt&&Bt.method==="ping";if(Wt||Qt){it.element.setAttribute("data-ready","true"),kt();return}processData(it,Bt)}},it._window.addEventListener("message",it._onMessage),it.element.nodeName!=="IFRAME"){var Pt=getOEmbedParameters(rt,st),Rt=getVimeoUrl(Pt);getOEmbedData(Rt,Pt,rt).then(function(Dt){var Bt=createEmbed(Dt,rt);return it.element=Bt,it._originalElement=rt,swapCallbacks(rt,Bt),playerMap.set(it.element,it),Dt}).catch(Lt)}});if(readyMap.set(this,xt),playerMap.set(this.element,this),this.element.nodeName==="IFRAME"&&postMessage(this,"ping"),screenfull.isEnabled){var Et=function(){return screenfull.exit()};this.fullscreenchangeHandler=function(){screenfull.isFullscreen?storeCallback(it,"event:exitFullscreen",Et):removeCallback(it,"event:exitFullscreen",Et),it.ready().then(function(){postMessage(it,"fullscreenchange",screenfull.isFullscreen)})},screenfull.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return _createClass(nt,[{key:"callMethod",value:function(it){var st=this,bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new npo_src(function(xt,Et){return st.ready().then(function(){storeCallback(st,it,{resolve:xt,reject:Et}),postMessage(st,it,bt)}).catch(Et)})}},{key:"get",value:function(it){var st=this;return new npo_src(function(bt,xt){return it=getMethodName(it,"get"),st.ready().then(function(){storeCallback(st,it,{resolve:bt,reject:xt}),postMessage(st,it)}).catch(xt)})}},{key:"set",value:function(it,st){var bt=this;return new npo_src(function(xt,Et){if(it=getMethodName(it,"set"),st==null)throw new TypeError("There must be a value to set.");return bt.ready().then(function(){storeCallback(bt,it,{resolve:xt,reject:Et}),postMessage(bt,it,st)}).catch(Et)})}},{key:"on",value:function(it,st){if(!it)throw new TypeError("You must pass an event name.");if(!st)throw new TypeError("You must pass a callback function.");if(typeof st!="function")throw new TypeError("The callback must be a function.");var bt=getCallbacks(this,"event:".concat(it));bt.length===0&&this.callMethod("addEventListener",it).catch(function(){}),storeCallback(this,"event:".concat(it),st)}},{key:"off",value:function(it,st){if(!it)throw new TypeError("You must pass an event name.");if(st&&typeof st!="function")throw new TypeError("The callback must be a function.");var bt=removeCallback(this,"event:".concat(it),st);bt&&this.callMethod("removeEventListener",it).catch(function(xt){})}},{key:"loadVideo",value:function(it){return this.callMethod("loadVideo",it)}},{key:"ready",value:function(){var it=readyMap.get(this)||new npo_src(function(st,bt){bt(new Error("Unknown player. Probably unloaded."))});return npo_src.resolve(it)}},{key:"addCuePoint",value:function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:it,data:st})}},{key:"removeCuePoint",value:function(it){return this.callMethod("removeCuePoint",it)}},{key:"enableTextTrack",value:function(it,st){if(!it)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:it,kind:st})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return screenfull.isEnabled?screenfull.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return screenfull.isEnabled?screenfull.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return screenfull.isEnabled?npo_src.resolve(screenfull.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"remotePlaybackPrompt",value:function(){return this.callMethod("remotePlaybackPrompt")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var it=this;return new npo_src(function(st){if(readyMap.delete(it),playerMap.delete(it.element),it._originalElement&&(playerMap.delete(it._originalElement),it._originalElement.removeAttribute("data-vimeo-initialized")),it.element&&it.element.nodeName==="IFRAME"&&it.element.parentNode&&(it.element.parentNode.parentNode&&it._originalElement&&it._originalElement!==it.element.parentNode?it.element.parentNode.parentNode.removeChild(it.element.parentNode):it.element.parentNode.removeChild(it.element)),it.element&&it.element.nodeName==="DIV"&&it.element.parentNode){it.element.removeAttribute("data-vimeo-initialized");var bt=it.element.querySelector("iframe");bt&&bt.parentNode&&(bt.parentNode.parentNode&&it._originalElement&&it._originalElement!==bt.parentNode?bt.parentNode.parentNode.removeChild(bt.parentNode):bt.parentNode.removeChild(bt))}it._window.removeEventListener("message",it._onMessage),screenfull.isEnabled&&screenfull.off("fullscreenchange",it.fullscreenchangeHandler),st()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(it){return this.set("autopause",it)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(it){return this.set("cameraProps",it)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"getColors",value:function(){return npo_src.all([this.get("colorOne"),this.get("colorTwo"),this.get("colorThree"),this.get("colorFour")])}},{key:"setColor",value:function(it){return this.set("color",it)}},{key:"setColors",value:function(it){if(!Array.isArray(it))return new npo_src(function(xt,Et){return Et(new TypeError("Argument must be an array."))});var st=new npo_src(function(xt){return xt(null)}),bt=[it[0]?this.set("colorOne",it[0]):st,it[1]?this.set("colorTwo",it[1]):st,it[2]?this.set("colorThree",it[2]):st,it[3]?this.set("colorFour",it[3]):st];return npo_src.all(bt)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(it){return this.set("currentTime",it)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(it){return this.set("loop",it)}},{key:"setMuted",value:function(it){return this.set("muted",it)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(it){return this.set("playbackRate",it)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(it){return this.set("quality",it)}},{key:"getRemotePlaybackAvailability",value:function(){return this.get("remotePlaybackAvailability")}},{key:"getRemotePlaybackState",value:function(){return this.get("remotePlaybackState")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(it){return this.set("volume",it)}},{key:"setTimingSrc",value:function(){var rt=_asyncToGenerator(_regeneratorRuntime().mark(function st(bt,xt){var Et=this,kt;return _regeneratorRuntime().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(bt){Pt.next=2;break}throw new TypeError("A Timing Object must be provided.");case 2:return Pt.next=4,this.ready();case 4:return kt=new TimingSrcConnector(this,bt,xt),postMessage(this,"notifyTimingObjectConnect"),kt.addEventListener("disconnect",function(){return postMessage(Et,"notifyTimingObjectDisconnect")}),Pt.abrupt("return",kt);case 8:case"end":return Pt.stop()}},st,this)}));function it(st,bt){return rt.apply(this,arguments)}return it}()}]),nt}();isNode||(screenfull=initializeScreenfull(),initializeEmbeds(),resizeEmbeds(),initAppendVideoMetadata(),checkUrlTimeParam());var openseadragon={exports:{}},hasRequiredOpenseadragon;function requireOpenseadragon(){return hasRequiredOpenseadragon||(hasRequiredOpenseadragon=1,function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(nt){return new OpenSeadragon.Viewer(nt)}(function(nt){nt.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var rt={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},it=Object.prototype.toString,st=Object.prototype.hasOwnProperty;nt.isFunction=function(bt){return nt.type(bt)==="function"},nt.isArray=Array.isArray||function(bt){return nt.type(bt)==="array"},nt.isWindow=function(bt){return bt&&typeof bt=="object"&&"setInterval"in bt},nt.type=function(bt){return bt==null?String(bt):rt[it.call(bt)]||"object"},nt.isPlainObject=function(bt){if(!bt||OpenSeadragon.type(bt)!=="object"||bt.nodeType||nt.isWindow(bt)||bt.constructor&&!st.call(bt,"constructor")&&!st.call(bt.constructor.prototype,"isPrototypeOf"))return!1;var xt;for(var Et in bt)xt=Et;return xt===void 0||st.call(bt,xt)},nt.isEmptyObject=function(bt){for(var xt in bt)return!1;return!0},nt.freezeObject=function(bt){return Object.freeze?nt.freezeObject=Object.freeze:nt.freezeObject=function(xt){return xt},nt.freezeObject(bt)},nt.supportsCanvas=function(){var bt=document.createElement("canvas");return!!(nt.isFunction(bt.getContext)&&bt.getContext("2d"))}(),nt.isCanvasTainted=function(bt){var xt=!1;try{bt.getContext("2d").getImageData(0,0,1,1)}catch{xt=!0}return xt},nt.pixelDensityRatio=function(){if(nt.supportsCanvas){var bt=document.createElement("canvas").getContext("2d"),xt=window.devicePixelRatio||1,Et=bt.webkitBackingStorePixelRatio||bt.mozBackingStorePixelRatio||bt.msBackingStorePixelRatio||bt.oBackingStorePixelRatio||bt.backingStorePixelRatio||1;return Math.max(xt,1)/Et}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var nt,rt,it,st,bt,xt,Et=arguments[0]||{},kt=arguments.length,Lt=!1,Pt=1;for(typeof Et=="boolean"&&(Lt=Et,Et=arguments[1]||{},Pt=2),typeof Et!="object"&&!OpenSeadragon.isFunction(Et)&&(Et={}),kt===Pt&&(Et=this,--Pt);Pt<kt;Pt++)if(nt=arguments[Pt],nt!==null||nt!==void 0)for(rt in nt)it=Et[rt],st=nt[rt],Et!==st&&(Lt&&st&&(OpenSeadragon.isPlainObject(st)||(bt=OpenSeadragon.isArray(st)))?(bt?(bt=!1,xt=it&&OpenSeadragon.isArray(it)?it:[]):xt=it&&OpenSeadragon.isPlainObject(it)?it:{},Et[rt]=OpenSeadragon.extend(Lt,xt,st)):st!==void 0&&(Et[rt]=st));return Et};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var nt=navigator.userAgent;return typeof nt!="string"?!1:nt.indexOf("iPhone")!==-1||nt.indexOf("iPad")!==-1||nt.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(nt,rt){return function(){var it=arguments;return it===void 0&&(it=[]),rt.apply(nt,it)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(nt){return typeof nt=="string"&&(nt=document.getElementById(nt)),nt},getElementPosition:function(nt){var rt=new $.Point,it,st;for(nt=$.getElement(nt),it=$.getElementStyle(nt).position=="fixed",st=getOffsetParent(nt,it);st;)rt.x+=nt.offsetLeft,rt.y+=nt.offsetTop,it&&(rt=rt.plus($.getPageScroll())),nt=st,it=$.getElementStyle(nt).position=="fixed",st=getOffsetParent(nt,it);return rt},getElementOffset:function(nt){nt=$.getElement(nt);var rt=nt&&nt.ownerDocument,it,st,bt={top:0,left:0};return rt?(it=rt.documentElement,typeof nt.getBoundingClientRect<"u"&&(bt=nt.getBoundingClientRect()),st=rt==rt.window?rt:rt.nodeType===9?rt.defaultView||rt.parentWindow:!1,new $.Point(bt.left+(st.pageXOffset||it.scrollLeft)-(it.clientLeft||0),bt.top+(st.pageYOffset||it.scrollTop)-(it.clientTop||0))):new $.Point},getElementSize:function(nt){return nt=$.getElement(nt),new $.Point(nt.clientWidth,nt.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(nt){return nt=$.getElement(nt),nt.currentStyle}:function(nt){return nt=$.getElement(nt),window.getComputedStyle(nt,"")},getCssPropertyWithVendorPrefix:function(nt){var rt={};return $.getCssPropertyWithVendorPrefix=function(it){if(rt[it]!==void 0)return rt[it];var st=document.createElement("div").style,bt=null;if(st[it]!==void 0)bt=it;else for(var xt=["Webkit","Moz","MS","O","webkit","moz","ms","o"],Et=$.capitalizeFirstLetter(it),kt=0;kt<xt.length;kt++){var Lt=xt[kt]+Et;if(st[Lt]!==void 0){bt=Lt;break}}return rt[it]=bt,bt},$.getCssPropertyWithVendorPrefix(nt)},capitalizeFirstLetter:function(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)},positiveModulo:function(nt,rt){var it=nt%rt;return it<0&&(it+=rt),it},pointInElement:function(nt,rt){nt=$.getElement(nt);var it=$.getElementOffset(nt),st=$.getElementSize(nt);return rt.x>=it.x&&rt.x<it.x+st.x&&rt.y<it.y+st.y&&rt.y>=it.y},getEvent:function(nt){return nt?$.getEvent=function(rt){return rt}:$.getEvent=function(){return window.event},$.getEvent(nt)},getMousePosition:function(nt){if(typeof nt.pageX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.pageX,it.y=rt.pageY,it};else if(typeof nt.clientX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,it.y=rt.clientY+document.body.scrollTop+document.documentElement.scrollTop,it};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(nt)},getPageScroll:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(rt.scrollLeft||rt.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(nt.scrollLeft||nt.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(nt){if(typeof window.scrollTo<"u")$.setPageScroll=function(st){window.scrollTo(st.x,st.y)};else{var rt=$.getPageScroll();if(rt.x===nt.x&&rt.y===nt.y)return;document.body.scrollLeft=nt.x,document.body.scrollTop=nt.y;var it=$.getPageScroll();if(it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(st){document.body.scrollLeft=st.x,document.body.scrollTop=st.y};return}if(document.documentElement.scrollLeft=nt.x,document.documentElement.scrollTop=nt.y,it=$.getPageScroll(),it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(st){document.documentElement.scrollLeft=st.x,document.documentElement.scrollTop=st.y};return}$.setPageScroll=function(st){}}return $.setPageScroll(nt)},getWindowSize:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(nt.clientWidth||nt.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(rt.clientWidth||rt.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(nt){nt=$.getElement(nt);var rt=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(rt[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(rt[1].style,{display:"table-row"}),$.extend(rt[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),rt[0].appendChild(rt[1]),rt[1].appendChild(rt[2]),rt[2].appendChild(nt),rt[0]},makeNeutralElement:function(nt){var rt=document.createElement(nt),it=rt.style;return it.background="transparent none",it.border="none",it.margin="0px",it.padding="0px",it.position="static",rt},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(nt){return $.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img");return it.src=rt,it},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img"),st=null;return st=$.makeNeutralElement("span"),st.style.display="inline-block",it.onload=function(){st.style.width=st.style.width||it.width+"px",st.style.height=st.style.height||it.height+"px",it.onload=null,it=null},it.src=rt,st.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+rt+"', sizingMethod='scale')",st}),$.makeTransparentImage(nt)},setElementOpacity:function(nt,rt,it){var st,bt;nt=$.getElement(nt),it&&!$.Browser.alpha&&(rt=Math.round(rt)),$.Browser.opacity?nt.style.opacity=rt<1?rt:"":rt<1?(st=Math.round(100*rt),bt="alpha(opacity="+st+")",nt.style.filter=bt):nt.style.filter=""},setElementTouchActionNone:function(nt){nt=$.getElement(nt),typeof nt.style.touchAction<"u"?nt.style.touchAction="none":typeof nt.style.msTouchAction<"u"&&(nt.style.msTouchAction="none")},addClass:function(nt,rt){nt=$.getElement(nt),nt.className?(" "+nt.className+" ").indexOf(" "+rt+" ")===-1&&(nt.className+=" "+rt):nt.className=rt},indexOf:function(nt,rt,it){return Array.prototype.indexOf?this.indexOf=function(st,bt,xt){return st.indexOf(bt,xt)}:this.indexOf=function(st,bt,xt){var Et,kt=xt||0,Lt;if(!st)throw new TypeError;if(Lt=st.length,Lt===0||kt>=Lt)return-1;for(kt<0&&(kt=Lt-Math.abs(kt)),Et=kt;Et<Lt;Et++)if(st[Et]===bt)return Et;return-1},this.indexOf(nt,rt,it)},removeClass:function(nt,rt){var it,st=[],bt;for(nt=$.getElement(nt),it=nt.className.split(/\s+/),bt=0;bt<it.length;bt++)it[bt]&&it[bt]!==rt&&st.push(it[bt]);nt.className=st.join(" ")},addEvent:function(){if(window.addEventListener)return function(nt,rt,it,st){nt=$.getElement(nt),nt.addEventListener(rt,it,st)};if(window.attachEvent)return function(nt,rt,it,st){nt=$.getElement(nt),nt.attachEvent("on"+rt,it)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(nt,rt,it,st){nt=$.getElement(nt),nt.removeEventListener(rt,it,st)};if(window.detachEvent)return function(nt,rt,it,st){nt=$.getElement(nt),nt.detachEvent("on"+rt,it)};throw new Error("No known event model.")}(),cancelEvent:function(nt){nt=$.getEvent(nt),nt.preventDefault?$.cancelEvent=function(rt){rt.preventDefault()}:$.cancelEvent=function(rt){rt=$.getEvent(rt),rt.cancel=!0,rt.returnValue=!1},$.cancelEvent(nt)},stopEvent:function(nt){nt=$.getEvent(nt),nt.stopPropagation?$.stopEvent=function(rt){rt.stopPropagation()}:$.stopEvent=function(rt){rt=$.getEvent(rt),rt.cancelBubble=!0},$.stopEvent(nt)},createCallback:function(nt,rt){var it=[],st;for(st=2;st<arguments.length;st++)it.push(arguments[st]);return function(){var bt=it.concat([]),xt;for(xt=0;xt<arguments.length;xt++)bt.push(arguments[xt]);return rt.apply(nt,bt)}},getUrlParameter:function(nt){var rt=URLPARAMS[nt];return rt||null},getUrlProtocol:function(nt){var rt=nt.match(/^([a-z]+:)\/\//i);return rt===null?window.location.protocol:rt[1].toLowerCase()},createAjaxRequest:function(nt){var rt;try{rt=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{rt=!1}if(rt)window.XMLHttpRequest?$.createAjaxRequest=function(it){return it?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(nt)},makeAjaxRequest:function(nt,rt,it){var st,bt,xt;$.isPlainObject(nt)&&(rt=nt.success,it=nt.error,st=nt.withCredentials,bt=nt.headers,xt=nt.responseType||null,nt=nt.url);var Et=$.getUrlProtocol(nt),kt=$.createAjaxRequest(Et==="file:");if(!$.isFunction(rt))throw new Error("makeAjaxRequest requires a success callback");kt.onreadystatechange=function(){kt.readyState==4&&(kt.onreadystatechange=function(){},kt.status>=200&&kt.status<300||kt.status===0&&Et!=="http:"&&Et!=="https:"?rt(kt):($.console.log("AJAX request returned %d: %s",kt.status,nt),$.isFunction(it)&&it(kt)))};try{if(kt.open("GET",nt,!0),xt&&(kt.responseType=xt),bt)for(var Lt in bt)Object.prototype.hasOwnProperty.call(bt,Lt)&&bt[Lt]&&kt.setRequestHeader(Lt,bt[Lt]);st&&(kt.withCredentials=!0),kt.send(null)}catch(Bt){var Pt=Bt.message,Rt=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(Rt&&typeof Bt.number<"u"&&Bt.number==-2147024891&&(Pt+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",Bt.name,Pt),kt.onreadystatechange=function(){},window.XDomainRequest){var Dt=new window.XDomainRequest;if(Dt){Dt.onload=function(Ft){$.isFunction(rt)&&rt({responseText:Dt.responseText,status:200,statusText:"OK"})},Dt.onerror=function(Ft){$.isFunction(it)&&it({responseText:Dt.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{Dt.open("GET",nt),Dt.send()}catch{$.isFunction(it)&&it(kt,Bt)}}}else $.isFunction(it)&&it(kt,Bt)}return kt},jsonp:function(nt){var rt,it=nt.url,st=document.head||document.getElementsByTagName("head")[0]||document.documentElement,bt=nt.callbackName||"openseadragon"+$.now(),xt=window[bt],Et="$1"+bt+"$2",kt=nt.param||"callback",Lt=nt.callback;it=it.replace(/(\=)\?(&|$)|\?\?/i,Et),it+=(/\?/.test(it)?"&":"?")+kt+"="+bt,window[bt]=function(Pt){if(xt)window[bt]=xt;else try{delete window[bt]}catch{}Lt&&$.isFunction(Lt)&&Lt(Pt)},rt=document.createElement("script"),(nt.async!==void 0||nt.async!==!1)&&(rt.async="async"),nt.scriptCharset&&(rt.charset=nt.scriptCharset),rt.src=it,rt.onload=rt.onreadystatechange=function(Pt,Rt){(Rt||!rt.readyState||/loaded|complete/.test(rt.readyState))&&(rt.onload=rt.onreadystatechange=null,st&&rt.parentNode&&st.removeChild(rt),rt=void 0)},st.insertBefore(rt,st.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(nt){if(window.DOMParser)$.parseXml=function(rt){var it=null,st;return st=new DOMParser,it=st.parseFromString(rt,"text/xml"),it};else if(window.ActiveXObject)$.parseXml=function(rt){var it=null;return it=new ActiveXObject("Microsoft.XMLDOM"),it.async=!1,it.loadXML(rt),it};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(nt)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(nt){return nt=nt||"",!!FILEFORMATS[nt.toLowerCase()]}});var nullfunction=function(nt){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var nt=navigator.appVersion,rt=navigator.userAgent,it;switch(navigator.appName){case"Microsoft Internet Explorer":!!window.attachEvent&&!!window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(rt.substring(rt.indexOf("MSIE")+5,rt.indexOf(";",rt.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(rt.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(rt.substring(rt.indexOf("Firefox")+8))):rt.indexOf("Safari")>=0?($.Browser.vendor=rt.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(rt.substring(rt.substring(0,rt.indexOf("Safari")).lastIndexOf("/")+1,rt.indexOf("Safari")))):(it=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),it.exec(rt)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(nt);break}var st=window.location.search.substring(1),bt=st.split("&"),xt,Et,kt;for(kt=0;kt<bt.length;kt++)if(xt=bt[kt],Et=xt.indexOf("="),Et>0){var Lt=xt.substring(0,Et),Pt=xt.substring(Et+1);try{URLPARAMS[Lt]=decodeURIComponent(Pt)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",Lt,Pt)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(nt){var rt=nt.requestAnimationFrame||nt.mozRequestAnimationFrame||nt.webkitRequestAnimationFrame||nt.msRequestAnimationFrame,it=nt.cancelAnimationFrame||nt.mozCancelAnimationFrame||nt.webkitCancelAnimationFrame||nt.msCancelAnimationFrame;if(rt&&it)$.requestAnimationFrame=function(){return rt.apply(nt,arguments)},$.cancelAnimationFrame=function(){return it.apply(nt,arguments)};else{var st=[],bt=[],xt=0,Et;$.requestAnimationFrame=function(kt){return st.push([++xt,kt]),Et||(Et=setInterval(function(){if(st.length){var Lt=$.now(),Pt=bt;for(bt=st,st=Pt;bt.length;)bt.shift()[1](Lt)}else clearInterval(Et),Et=void 0},1e3/50)),xt},$.cancelAnimationFrame=function(kt){var Lt,Pt;for(Lt=0,Pt=st.length;Lt<Pt;Lt+=1)if(st[Lt][0]===kt){st.splice(Lt,1);return}for(Lt=0,Pt=bt.length;Lt<Pt;Lt+=1)if(bt[Lt][0]===kt){bt.splice(Lt,1);return}}}}(window);function getOffsetParent(nt,rt){return rt&&nt!=document.body?document.body:nt.offsetParent}}(OpenSeadragon),function(nt,rt){module.exports?module.exports=rt():nt.OpenSeadragon=rt()}(commonjsGlobal$1,function(){return OpenSeadragon}),function(nt){var rt={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.fullscreenElement},rt.requestFullScreen=function(it){return it.requestFullscreen()},rt.exitFullScreen=function(){document.exitFullscreen()},rt.fullScreenEventName="fullscreenchange",rt.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.msFullscreenElement},rt.requestFullScreen=function(it){return it.msRequestFullscreen()},rt.exitFullScreen=function(){document.msExitFullscreen()},rt.fullScreenEventName="MSFullscreenChange",rt.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitFullscreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullscreen()},rt.exitFullScreen=function(){document.webkitExitFullscreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullScreen()},rt.exitFullScreen=function(){document.webkitCancelFullScreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.mozFullScreenElement},rt.requestFullScreen=function(it){return it.mozRequestFullScreen()},rt.exitFullScreen=function(){document.mozCancelFullScreen()},rt.fullScreenEventName="mozfullscreenchange",rt.fullScreenErrorEventName="mozfullscreenerror"),rt.isFullScreen=function(){return rt.getFullScreenElement()!==null},rt.cancelFullScreen=function(){nt.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),rt.exitFullScreen()},nt.extend(nt,rt)}(OpenSeadragon),function(nt){nt.EventSource=function(){this.events={}},nt.EventSource.prototype={addOnceHandler:function(rt,it,st,bt){var xt=this;bt=bt||1;var Et=0,kt=function(Lt){Et++,Et===bt&&xt.removeHandler(rt,kt),it(Lt)};this.addHandler(rt,kt,st)},addHandler:function(rt,it,st){var bt=this.events[rt];bt||(this.events[rt]=bt=[]),it&&nt.isFunction(it)&&(bt[bt.length]={handler:it,userData:st||null})},removeHandler:function(rt,it){var st=this.events[rt],bt=[],xt;if(!!st&&nt.isArray(st)){for(xt=0;xt<st.length;xt++)st[xt].handler!==it&&bt.push(st[xt]);this.events[rt]=bt}},removeAllHandlers:function(rt){if(rt)this.events[rt]=[];else for(var it in this.events)this.events[it]=[]},getHandler:function(rt){var it=this.events[rt];return!it||!it.length?null:(it=it.length===1?[it[0]]:Array.apply(null,it),function(st,bt){var xt,Et=it.length;for(xt=0;xt<Et;xt++)it[xt]&&(bt.eventSource=st,bt.userData=it[xt].userData,it[xt].handler(bt))})},raiseEvent:function(rt,it){var st=this.getHandler(rt);st&&(it||(it={}),st(this,it))}}}(OpenSeadragon),function(nt){var rt=[],it={};nt.MouseTracker=function(Ln){rt.push(this);var En=arguments;nt.isPlainObject(Ln)||(Ln={element:En[0],clickTimeThreshold:En[1],clickDistThreshold:En[2]}),this.hash=Math.random(),this.element=nt.getElement(Ln.element),this.clickTimeThreshold=Ln.clickTimeThreshold||nt.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=Ln.clickDistThreshold||nt.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=Ln.dblClickTimeThreshold||nt.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=Ln.dblClickDistThreshold||nt.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=Ln.userData||null,this.stopDelay=Ln.stopDelay||50,this.enterHandler=Ln.enterHandler||null,this.exitHandler=Ln.exitHandler||null,this.pressHandler=Ln.pressHandler||null,this.nonPrimaryPressHandler=Ln.nonPrimaryPressHandler||null,this.releaseHandler=Ln.releaseHandler||null,this.nonPrimaryReleaseHandler=Ln.nonPrimaryReleaseHandler||null,this.moveHandler=Ln.moveHandler||null,this.scrollHandler=Ln.scrollHandler||null,this.clickHandler=Ln.clickHandler||null,this.dblClickHandler=Ln.dblClickHandler||null,this.dragHandler=Ln.dragHandler||null,this.dragEndHandler=Ln.dragEndHandler||null,this.pinchHandler=Ln.pinchHandler||null,this.stopHandler=Ln.stopHandler||null,this.keyDownHandler=Ln.keyDownHandler||null,this.keyUpHandler=Ln.keyUpHandler||null,this.keyHandler=Ln.keyHandler||null,this.focusHandler=Ln.focusHandler||null,this.blurHandler=Ln.blurHandler||null;var Wn=this;it[this.hash]={click:function(er){Yt(Wn,er)},dblclick:function(er){Zt(Wn,er)},keydown:function(er){Wt(Wn,er)},keyup:function(er){Qt(Wn,er)},keypress:function(er){Kt(Wn,er)},focus:function(er){on(Wn,er)},blur:function(er){nn(Wn,er)},wheel:function(er){mn(Wn,er)},mousewheel:function(er){gn(Wn,er)},DOMMouseScroll:function(er){gn(Wn,er)},MozMousePixelScroll:function(er){gn(Wn,er)},mouseenter:function(er){kn(Wn,er)},mouseleave:function(er){cn(Wn,er)},mouseover:function(er){Mn(Wn,er)},mouseout:function(er){Sn(Wn,er)},mousedown:function(er){hn(Wn,er)},mouseup:function(er){zn(Wn,er)},mouseupcaptured:function(er){ir(Wn,er)},mousemove:function(er){nr(Wn,er)},mousemovecaptured:function(er){dr(Wn,er)},touchstart:function(er){Cr(Wn,er)},touchend:function(er){Sr(Wn,er)},touchendcaptured:function(er){rr(Wn,er)},touchmove:function(er){mr(Wn,er)},touchmovecaptured:function(er){_r(Wn,er)},touchcancel:function(er){pr(Wn,er)},gesturestart:function(er){Cn(Wn,er)},gesturechange:function(er){rn(Wn,er)},pointerover:function(er){dn(Wn,er)},MSPointerOver:function(er){dn(Wn,er)},pointerout:function(er){fn(Wn,er)},MSPointerOut:function(er){fn(Wn,er)},pointerdown:function(er){On(Wn,er)},MSPointerDown:function(er){On(Wn,er)},pointerup:function(er){xn(Wn,er)},MSPointerUp:function(er){xn(Wn,er)},pointermove:function(er){Kn(Wn,er)},MSPointerMove:function(er){Kn(Wn,er)},pointercancel:function(er){ar(Wn,er)},MSPointerCancel:function(er){ar(Wn,er)},pointerupcaptured:function(er){hr(Wn,er)},pointermovecaptured:function(er){Un(Wn,er)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},Ln.startDisabled||this.setTracking(!0)},nt.MouseTracker.prototype={destroy:function(){var Ln;for(xt(this),this.element=null,Ln=0;Ln<rt.length;Ln++)if(rt[Ln]===this){rt.splice(Ln,1);break}it[this.hash]=null,delete it[this.hash]},isTracking:function(){return it[this.hash].tracking},setTracking:function(Ln){return Ln?bt(this):xt(this),this},getActivePointersListsExceptType:function(Ln){for(var En=it[this.hash],Wn=[],er=0;er<En.activePointersLists.length;++er)En.activePointersLists[er].type!==Ln&&Wn.push(En.activePointersLists[er]);return Wn},getActivePointersListByType:function(Ln){var En=it[this.hash],Wn,er=En.activePointersLists.length,fr;for(Wn=0;Wn<er;Wn++)if(En.activePointersLists[Wn].type===Ln)return En.activePointersLists[Wn];return fr=new nt.MouseTracker.GesturePointList(Ln),En.activePointersLists.push(fr),fr},getActivePointerCount:function(){var Ln=it[this.hash],En,Wn=Ln.activePointersLists.length,er=0;for(En=0;En<Wn;En++)er+=Ln.activePointersLists[En].getLength();return er},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},nt.MouseTracker.resetAllMouseTrackers=function(){for(var Ln=0;Ln<rt.length;Ln++)rt[Ln].isTracking()&&(rt[Ln].setTracking(!1),rt[Ln].setTracking(!0))},nt.MouseTracker.gesturePointVelocityTracker=function(){var Ln=[],En=0,Wn=0,er=function(ti,kr){return ti.hash.toString()+kr.type+kr.id.toString()},fr=function(){var ti,kr=Ln.length,ai,ui,_i=nt.now(),hi,ji,Ei;for(hi=_i-Wn,Wn=_i,ti=0;ti<kr;ti++)ai=Ln[ti],ui=ai.gPoint,ui.direction=Math.atan2(ui.currentPos.y-ai.lastPos.y,ui.currentPos.x-ai.lastPos.x),ji=ai.lastPos.distanceTo(ui.currentPos),ai.lastPos=ui.currentPos,Ei=1e3*ji/(hi+1),ui.speed=.75*Ei+.25*ui.speed},Zr=function(ti,kr){var ai=er(ti,kr);Ln.push({guid:ai,gPoint:kr,lastPos:kr.currentPos}),Ln.length===1&&(Wn=nt.now(),En=window.setInterval(fr,50))},gr=function(ti,kr){var ai=er(ti,kr),ui,_i=Ln.length;for(ui=0;ui<_i;ui++)if(Ln[ui].guid===ai){Ln.splice(ui,1),_i--,_i===0&&window.clearInterval(En);break}};return{addPoint:Zr,removePoint:gr}}(),nt.MouseTracker.captureElement=document,nt.MouseTracker.wheelEventName=nt.Browser.vendor==nt.BROWSERS.IE&&nt.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",nt.MouseTracker.supportsMouseCapture=function(){var Ln=document.createElement("div");return nt.isFunction(Ln.setCapture)&&nt.isFunction(Ln.releaseCapture)}(),nt.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",nt.MouseTracker.wheelEventName],nt.MouseTracker.wheelEventName=="DOMMouseScroll"&&nt.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||nt.Browser.vendor!==nt.BROWSERS.IE)?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),nt.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),nt.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):(nt.MouseTracker.havePointerEvents=!1,nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?(nt.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),nt.MouseTracker.haveMouseEnter=!0):(nt.MouseTracker.subscribeEvents.push("mouseover","mouseout"),nt.MouseTracker.haveMouseEnter=!1),nt.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&nt.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&nt.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),nt.MouseTracker.mousePointerId="legacy-mouse",nt.MouseTracker.maxTouchPoints=10),nt.MouseTracker.GesturePointList=function(Ln){this._gPoints=[],this.type=Ln,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},nt.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(Ln){return this._gPoints.push(Ln)},removeById:function(Ln){var En,Wn=this._gPoints.length;for(En=0;En<Wn;En++)if(this._gPoints[En].id===Ln){this._gPoints.splice(En,1);break}return this._gPoints.length},getByIndex:function(Ln){return Ln<this._gPoints.length?this._gPoints[Ln]:null},getById:function(Ln){var En,Wn=this._gPoints.length;for(En=0;En<Wn;En++)if(this._gPoints[En].id===Ln)return this._gPoints[En];return null},getPrimary:function(Ln){var En,Wn=this._gPoints.length;for(En=0;En<Wn;En++)if(this._gPoints[En].isPrimary)return this._gPoints[En];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function st(Ln){var En=it[Ln.hash],Wn,er=En.activePointersLists.length;for(Wn=0;Wn<er;Wn++)En.activePointersLists[Wn].captureCount>0&&(nt.removeEvent(nt.MouseTracker.captureElement,"mousemove",En.mousemovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"mouseup",En.mouseupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",En.pointermovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",En.pointerupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchmove",En.touchmovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchend",En.touchendcaptured,!0),En.activePointersLists[Wn].captureCount=0);for(Wn=0;Wn<er;Wn++)En.activePointersLists.pop()}function bt(Ln){var En=it[Ln.hash],Wn,er;if(!En.tracking){for(er=0;er<nt.MouseTracker.subscribeEvents.length;er++)Wn=nt.MouseTracker.subscribeEvents[er],nt.addEvent(Ln.element,Wn,En[Wn],!1);st(Ln),En.tracking=!0}}function xt(Ln){var En=it[Ln.hash],Wn,er;if(En.tracking){for(er=0;er<nt.MouseTracker.subscribeEvents.length;er++)Wn=nt.MouseTracker.subscribeEvents[er],nt.removeEvent(Ln.element,Wn,En[Wn],!1);st(Ln),En.tracking=!1}}function Et(Ln,En){var Wn=it[Ln.hash];if(En==="pointerevent")return{upName:nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:Wn.pointerupcaptured,moveName:nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:Wn.pointermovecaptured};if(En==="mouse")return{upName:"mouseup",upHandler:Wn.mouseupcaptured,moveName:"mousemove",moveHandler:Wn.mousemovecaptured};if(En==="touch")return{upName:"touchend",upHandler:Wn.touchendcaptured,moveName:"touchmove",moveHandler:Wn.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function kt(Ln,En,Wn){var er=Ln.getActivePointersListByType(En),fr;er.captureCount+=Wn||1,er.captureCount===1&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Ln.element.setCapture(!0):(fr=Et(Ln,nt.MouseTracker.havePointerEvents?"pointerevent":En),Mi&&Or(window.top)&&nt.addEvent(window.top,fr.upName,fr.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,fr.upName,fr.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,fr.moveName,fr.moveHandler,!0)))}function Lt(Ln,En,Wn){var er=Ln.getActivePointersListByType(En),fr;er.captureCount-=Wn||1,er.captureCount===0&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Ln.element.releaseCapture():(fr=Et(Ln,nt.MouseTracker.havePointerEvents?"pointerevent":En),Mi&&Or(window.top)&&nt.removeEvent(window.top,fr.upName,fr.upHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,fr.moveName,fr.moveHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,fr.upName,fr.upHandler,!0)))}function Pt(Ln){var En;if(nt.MouseTracker.unprefixedPointerEvents)En=Ln.pointerType;else switch(Ln.pointerType){case 2:En="touch";break;case 3:En="pen";break;case 4:En="mouse";break;default:En=""}return En}function Rt(Ln){return nt.getMousePosition(Ln)}function Dt(Ln,En){return Bt(Rt(Ln),En)}function Bt(Ln,En){var Wn=nt.getElementOffset(En);return Ln.minus(Wn)}function Ft(Ln,En){return new nt.Point((Ln.x+En.x)/2,(Ln.y+En.y)/2)}function Yt(Ln,En){Ln.clickHandler&&nt.cancelEvent(En)}function Zt(Ln,En){Ln.dblClickHandler&&nt.cancelEvent(En)}function Wt(Ln,En){var Wn;Ln.keyDownHandler&&(En=nt.getEvent(En),Wn=Ln.keyDownHandler({eventSource:Ln,keyCode:En.keyCode?En.keyCode:En.charCode,ctrl:En.ctrlKey,shift:En.shiftKey,alt:En.altKey,meta:En.metaKey,originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),Wn||nt.cancelEvent(En))}function Qt(Ln,En){var Wn;Ln.keyUpHandler&&(En=nt.getEvent(En),Wn=Ln.keyUpHandler({eventSource:Ln,keyCode:En.keyCode?En.keyCode:En.charCode,ctrl:En.ctrlKey,shift:En.shiftKey,alt:En.altKey,meta:En.metaKey,originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),Wn||nt.cancelEvent(En))}function Kt(Ln,En){var Wn;Ln.keyHandler&&(En=nt.getEvent(En),Wn=Ln.keyHandler({eventSource:Ln,keyCode:En.keyCode?En.keyCode:En.charCode,ctrl:En.ctrlKey,shift:En.shiftKey,alt:En.altKey,meta:En.metaKey,originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),Wn||nt.cancelEvent(En))}function on(Ln,En){var Wn;Ln.focusHandler&&(En=nt.getEvent(En),Wn=Ln.focusHandler({eventSource:Ln,originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),Wn===!1&&nt.cancelEvent(En))}function nn(Ln,En){var Wn;Ln.blurHandler&&(En=nt.getEvent(En),Wn=Ln.blurHandler({eventSource:Ln,originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),Wn===!1&&nt.cancelEvent(En))}function mn(Ln,En){Tn(Ln,En,En)}function gn(Ln,En){En=nt.getEvent(En);var Wn={target:En.target||En.srcElement,type:"wheel",shiftKey:En.shiftKey||!1,clientX:En.clientX,clientY:En.clientY,pageX:En.pageX?En.pageX:En.clientX,pageY:En.pageY?En.pageY:En.clientY,deltaMode:En.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};nt.MouseTracker.wheelEventName=="mousewheel"?Wn.deltaY=-En.wheelDelta/nt.DEFAULT_SETTINGS.pixelsPerWheelLine:Wn.deltaY=En.detail,Tn(Ln,Wn,En)}function Tn(Ln,En,Wn){var er=0,fr;er=En.deltaY<0?1:-1,Ln.scrollHandler&&(fr=Ln.scrollHandler({eventSource:Ln,pointerType:"mouse",position:Dt(En,Ln.element),scroll:er,shift:En.shiftKey,isTouchEvent:!1,originalEvent:Wn,preventDefaultAction:!1,userData:Ln.userData}),fr===!1&&nt.cancelEvent(Wn))}function An(Ln,En){if(Ln===En)return!1;for(;En&&En!==Ln;)En=En.parentNode;return En===Ln}function kn(Ln,En){En=nt.getEvent(En),$n(Ln,En)}function Mn(Ln,En){En=nt.getEvent(En),!(En.currentTarget===En.relatedTarget||An(En.currentTarget,En.relatedTarget))&&$n(Ln,En)}function $n(Ln,En){var Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()};Rr(Ln,En,[Wn])}function cn(Ln,En){En=nt.getEvent(En),an(Ln,En)}function Sn(Ln,En){En=nt.getEvent(En),!(En.currentTarget===En.relatedTarget||An(En.currentTarget,En.relatedTarget))&&an(Ln,En)}function an(Ln,En){var Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()};ci(Ln,En,[Wn])}function jn(Ln){return nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Ln===1?0:Ln===2?2:Ln===4?1:-1:Ln}function hn(Ln,En){var Wn;En=nt.getEvent(En),Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()},mi(Ln,En,[Wn],jn(En.button))&&(nt.stopEvent(En),kt(Ln,"mouse")),(Ln.clickHandler||Ln.dblClickHandler||Ln.pressHandler||Ln.dragHandler||Ln.dragEndHandler)&&nt.cancelEvent(En)}function zn(Ln,En){tr(Ln,En)}function ir(Ln,En){tr(Ln,En),nt.stopEvent(En)}function tr(Ln,En){var Wn;En=nt.getEvent(En),Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()},si(Ln,En,[Wn],jn(En.button))&&Lt(Ln,"mouse")}function nr(Ln,En){or(Ln,En)}function dr(Ln,En){or(Ln,En),nt.stopEvent(En)}function or(Ln,En){var Wn;En=nt.getEvent(En),Wn={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()},yi(Ln,En,[Wn])}function ur(Ln,En,Wn){var er,fr=Wn.getLength(),Zr=[];if(Wn.type==="touch"||Wn.contacts>0){for(er=0;er<fr;er++)Zr.push(Wn.getByIndex(er));Zr.length>0&&(si(Ln,En,Zr,0),Wn.captureCount=1,Lt(Ln,Wn.type),ci(Ln,En,Zr))}}function Cr(Ln,En){var Wn,er,fr,Zr=En.changedTouches.length,gr=[],ti,kr=Ln.getActivePointersListByType("touch");for(Wn=nt.now(),kr.getLength()>En.touches.length-Zr&&(nt.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),ur(Ln,En,kr)),er=0;er<Zr;er++)gr.push({id:En.changedTouches[er].identifier,type:"touch",currentPos:Rt(En.changedTouches[er]),currentTime:Wn});for(Rr(Ln,En,gr),er=0;er<rt.length;er++)if(rt[er]!==Ln&&rt[er].isTracking()&&An(rt[er].element,Ln.element)){for(ti=[],fr=0;fr<Zr;fr++)ti.push({id:En.changedTouches[fr].identifier,type:"touch",currentPos:Rt(En.changedTouches[fr]),currentTime:Wn});Rr(rt[er],En,ti)}mi(Ln,En,gr,0)&&(nt.stopEvent(En),kt(Ln,"touch",Zr)),nt.cancelEvent(En)}function Sr(Ln,En){Fr(Ln,En)}function rr(Ln,En){Fr(Ln,En),nt.stopEvent(En)}function Fr(Ln,En){var Wn,er,fr,Zr=En.changedTouches.length,gr=[],ti;for(Wn=nt.now(),er=0;er<Zr;er++)gr.push({id:En.changedTouches[er].identifier,type:"touch",currentPos:Rt(En.changedTouches[er]),currentTime:Wn});for(si(Ln,En,gr,0)&&Lt(Ln,"touch",Zr),ci(Ln,En,gr),er=0;er<rt.length;er++)if(rt[er]!==Ln&&rt[er].isTracking()&&An(rt[er].element,Ln.element)){for(ti=[],fr=0;fr<Zr;fr++)ti.push({id:En.changedTouches[fr].identifier,type:"touch",currentPos:Rt(En.changedTouches[fr]),currentTime:Wn});ci(rt[er],En,ti)}nt.cancelEvent(En)}function mr(Ln,En){yr(Ln,En)}function _r(Ln,En){yr(Ln,En),nt.stopEvent(En)}function yr(Ln,En){var Wn,er=En.changedTouches.length,fr=[];for(Wn=0;Wn<er;Wn++)fr.push({id:En.changedTouches[Wn].identifier,type:"touch",currentPos:Rt(En.changedTouches[Wn]),currentTime:nt.now()});yi(Ln,En,fr),nt.cancelEvent(En)}function pr(Ln,En){var Wn=Ln.getActivePointersListByType("touch");ur(Ln,En,Wn)}function Cn(Ln,En){return En.stopPropagation(),En.preventDefault(),!1}function rn(Ln,En){return En.stopPropagation(),En.preventDefault(),!1}function dn(Ln,En){var Wn;En.currentTarget===En.relatedTarget||An(En.currentTarget,En.relatedTarget)||(Wn={id:En.pointerId,type:Pt(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},Rr(Ln,En,[Wn]))}function fn(Ln,En){var Wn;En.currentTarget===En.relatedTarget||An(En.currentTarget,En.relatedTarget)||(Wn={id:En.pointerId,type:Pt(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},ci(Ln,En,[Wn]))}function On(Ln,En){var Wn;Wn={id:En.pointerId,type:Pt(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},mi(Ln,En,[Wn],En.button)&&(nt.stopEvent(En),kt(Ln,Wn.type)),(Ln.clickHandler||Ln.dblClickHandler||Ln.pressHandler||Ln.dragHandler||Ln.dragEndHandler||Ln.pinchHandler)&&nt.cancelEvent(En)}function xn(Ln,En){Nn(Ln,En)}function hr(Ln,En){var Wn=Ln.getActivePointersListByType(Pt(En));Wn.getById(En.pointerId)&&Nn(Ln,En),nt.stopEvent(En)}function Nn(Ln,En){var Wn;Wn={id:En.pointerId,type:Pt(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},si(Ln,En,[Wn],En.button)&&Lt(Ln,Wn.type)}function Kn(Ln,En){sr(Ln,En)}function Un(Ln,En){var Wn=Ln.getActivePointersListByType(Pt(En));Wn.getById(En.pointerId)&&sr(Ln,En),nt.stopEvent(En)}function sr(Ln,En){var Wn;Wn={id:En.pointerId,type:Pt(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},yi(Ln,En,[Wn])}function ar(Ln,En){var Wn;Wn={id:En.pointerId,type:Pt(En)},Ni(Ln,En,[Wn])}function wr(Ln,En){return Object.prototype.hasOwnProperty.call(En,"isPrimary")||(Ln.getLength()===0?En.isPrimary=!0:En.isPrimary=!1),En.speed=0,En.direction=0,En.contactPos=En.currentPos,En.contactTime=En.currentTime,En.lastPos=En.currentPos,En.lastTime=En.currentTime,Ln.add(En)}function vr(Ln,En){var Wn,er;return Ln.getById(En.id)?(Wn=Ln.removeById(En.id),Object.prototype.hasOwnProperty.call(En,"isPrimary")||(er=Ln.getPrimary(),er||(er=Ln.getByIndex(0),er&&(er.isPrimary=!0)))):Wn=Ln.getLength(),Wn}function Rr(Ln,En,Wn){var er=Ln.getActivePointersListByType(Wn[0].type),fr,Zr=Wn.length,gr,ti,kr;for(fr=0;fr<Zr;fr++)gr=Wn[fr],ti=er.getById(gr.id),ti?(ti.insideElement=!0,ti.lastPos=ti.currentPos,ti.lastTime=ti.currentTime,ti.currentPos=gr.currentPos,ti.currentTime=gr.currentTime,gr=ti):(gr.captured=!1,gr.insideElementPressed=!1,gr.insideElement=!0,wr(er,gr)),Ln.enterHandler&&(kr=Ln.enterHandler({eventSource:Ln,pointerType:gr.type,position:Bt(gr.currentPos,Ln.element),buttons:er.buttons,pointers:Ln.getActivePointerCount(),insideElementPressed:gr.insideElementPressed,buttonDownAny:er.buttons!==0,isTouchEvent:gr.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),kr===!1&&nt.cancelEvent(En))}function ci(Ln,En,Wn){var er=Ln.getActivePointersListByType(Wn[0].type),fr,Zr=Wn.length,gr,ti,kr;for(fr=0;fr<Zr;fr++)gr=Wn[fr],ti=er.getById(gr.id),ti&&(ti.captured?(ti.insideElement=!1,ti.lastPos=ti.currentPos,ti.lastTime=ti.currentTime,ti.currentPos=gr.currentPos,ti.currentTime=gr.currentTime):vr(er,ti),gr=ti),Ln.exitHandler&&(kr=Ln.exitHandler({eventSource:Ln,pointerType:gr.type,position:gr.currentPos&&Bt(gr.currentPos,Ln.element),buttons:er.buttons,pointers:Ln.getActivePointerCount(),insideElementPressed:ti?ti.insideElementPressed:!1,buttonDownAny:er.buttons!==0,isTouchEvent:gr.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),kr===!1&&nt.cancelEvent(En))}function mi(Ln,En,Wn,er){var fr=it[Ln.hash],Zr,gr=Ln.getActivePointersListByType(Wn[0].type),ti,kr=Wn.length,ai,ui;typeof En.buttons<"u"?gr.buttons=En.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?er===0?gr.buttons+=1:er===1?gr.buttons+=4:er===2?gr.buttons+=2:er===3?gr.buttons+=8:er===4?gr.buttons+=16:er===5&&(gr.buttons+=32):er===0?gr.buttons|=1:er===1?gr.buttons|=4:er===2?gr.buttons|=2:er===3?gr.buttons|=8:er===4?gr.buttons|=16:er===5&&(gr.buttons|=32);var _i=Ln.getActivePointersListsExceptType(Wn[0].type);for(ti=0;ti<_i.length;ti++)ur(Ln,En,_i[ti]);if(er!==0)return Ln.nonPrimaryPressHandler&&(Zr=Ln.nonPrimaryPressHandler({eventSource:Ln,pointerType:Wn[0].type,position:Bt(Wn[0].currentPos,Ln.element),button:er,buttons:gr.buttons,isTouchEvent:Wn[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),Zr===!1&&nt.cancelEvent(En)),!1;for(ti=0;ti<kr;ti++)ai=Wn[ti],ui=gr.getById(ai.id),ui?(ui.captured=!0,ui.insideElementPressed=!0,ui.insideElement=!0,ui.contactPos=ai.currentPos,ui.contactTime=ai.currentTime,ui.lastPos=ui.currentPos,ui.lastTime=ui.currentTime,ui.currentPos=ai.currentPos,ui.currentTime=ai.currentTime,ai=ui):(ai.captured=!0,ai.insideElementPressed=!0,ai.insideElement=!0,wr(gr,ai)),gr.addContact(),(Ln.dragHandler||Ln.dragEndHandler||Ln.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.addPoint(Ln,ai),gr.contacts===1?Ln.pressHandler&&(Zr=Ln.pressHandler({eventSource:Ln,pointerType:ai.type,position:Bt(ai.contactPos,Ln.element),buttons:gr.buttons,isTouchEvent:ai.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),Zr===!1&&nt.cancelEvent(En)):gr.contacts===2&&Ln.pinchHandler&&ai.type==="touch"&&(fr.pinchGPoints=gr.asArray(),fr.lastPinchDist=fr.currentPinchDist=fr.pinchGPoints[0].currentPos.distanceTo(fr.pinchGPoints[1].currentPos),fr.lastPinchCenter=fr.currentPinchCenter=Ft(fr.pinchGPoints[0].currentPos,fr.pinchGPoints[1].currentPos));return!0}function si(Ln,En,Wn,er){var fr=it[Ln.hash],Zr=Ln.getActivePointersListByType(Wn[0].type),gr,ti,kr,ai,ui=Wn.length,_i,hi,ji=!1,Ei=!1,Wi;if(typeof En.buttons<"u"?Zr.buttons=En.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?er===0?Zr.buttons-=1:er===1?Zr.buttons-=4:er===2?Zr.buttons-=2:er===3?Zr.buttons-=8:er===4?Zr.buttons-=16:er===5&&(Zr.buttons-=32):er===0?Zr.buttons^=-2:er===1?Zr.buttons^=-5:er===2?Zr.buttons^=-3:er===3?Zr.buttons^=-9:er===4?Zr.buttons^=-17:er===5&&(Zr.buttons^=-33),er!==0){Ln.nonPrimaryReleaseHandler&&(gr=Ln.nonPrimaryReleaseHandler({eventSource:Ln,pointerType:Wn[0].type,position:Bt(Wn[0].currentPos,Ln.element),button:er,buttons:Zr.buttons,isTouchEvent:Wn[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),gr===!1&&nt.cancelEvent(En));var lo=Ln.getActivePointersListByType("mouse");return ur(Ln,En,lo),!1}if(typeof Wn[0].currentPos>"u")return ur(Ln,En,Zr),!1;for(ai=0;ai<ui;ai++)_i=Wn[ai],hi=Zr.getById(_i.id),hi&&(hi.captured&&(hi.captured=!1,ji=!0,Ei=!0),hi.lastPos=hi.currentPos,hi.lastTime=hi.currentTime,hi.currentPos=_i.currentPos,hi.currentTime=_i.currentTime,hi.insideElement||vr(Zr,hi),ti=hi.currentPos,kr=hi.currentTime,Ei?(Zr.removeContact(),(Ln.dragHandler||Ln.dragEndHandler||Ln.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.removePoint(Ln,hi),Zr.contacts===0?(Ln.releaseHandler&&(gr=Ln.releaseHandler({eventSource:Ln,pointerType:hi.type,position:Bt(ti,Ln.element),buttons:Zr.buttons,insideElementPressed:hi.insideElementPressed,insideElementReleased:hi.insideElement,isTouchEvent:hi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),gr===!1&&nt.cancelEvent(En)),Ln.dragEndHandler&&!hi.currentPos.equals(hi.contactPos)&&(gr=Ln.dragEndHandler({eventSource:Ln,pointerType:hi.type,position:Bt(hi.currentPos,Ln.element),speed:hi.speed,direction:hi.direction,shift:En.shiftKey,isTouchEvent:hi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),gr===!1&&nt.cancelEvent(En)),(Ln.clickHandler||Ln.dblClickHandler)&&hi.insideElement&&(Wi=kr-hi.contactTime<=Ln.clickTimeThreshold&&hi.contactPos.distanceTo(ti)<=Ln.clickDistThreshold,Ln.clickHandler&&(gr=Ln.clickHandler({eventSource:Ln,pointerType:hi.type,position:Bt(hi.currentPos,Ln.element),quick:Wi,shift:En.shiftKey,isTouchEvent:hi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),gr===!1&&nt.cancelEvent(En)),Ln.dblClickHandler&&Wi&&(Zr.clicks++,Zr.clicks===1?(fr.lastClickPos=ti,fr.dblClickTimeOut=setTimeout(function(){Zr.clicks=0},Ln.dblClickTimeThreshold)):Zr.clicks===2&&(clearTimeout(fr.dblClickTimeOut),Zr.clicks=0,fr.lastClickPos.distanceTo(ti)<=Ln.dblClickDistThreshold&&(gr=Ln.dblClickHandler({eventSource:Ln,pointerType:hi.type,position:Bt(hi.currentPos,Ln.element),shift:En.shiftKey,isTouchEvent:hi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),gr===!1&&nt.cancelEvent(En)),fr.lastClickPos=null)))):Zr.contacts===2&&Ln.pinchHandler&&hi.type==="touch"&&(fr.pinchGPoints=Zr.asArray(),fr.lastPinchDist=fr.currentPinchDist=fr.pinchGPoints[0].currentPos.distanceTo(fr.pinchGPoints[1].currentPos),fr.lastPinchCenter=fr.currentPinchCenter=Ft(fr.pinchGPoints[0].currentPos,fr.pinchGPoints[1].currentPos))):Ln.releaseHandler&&(gr=Ln.releaseHandler({eventSource:Ln,pointerType:hi.type,position:Bt(ti,Ln.element),buttons:Zr.buttons,insideElementPressed:hi.insideElementPressed,insideElementReleased:hi.insideElement,isTouchEvent:hi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),gr===!1&&nt.cancelEvent(En)));return ji}function yi(Ln,En,Wn){var er=it[Ln.hash],fr=Ln.getActivePointersListByType(Wn[0].type),Zr,gr=Wn.length,ti,kr,ai,ui,_i;for(typeof En.buttons<"u"&&(fr.buttons=En.buttons),Zr=0;Zr<gr;Zr++)ti=Wn[Zr],kr=fr.getById(ti.id),kr?(Object.prototype.hasOwnProperty.call(ti,"isPrimary")&&(kr.isPrimary=ti.isPrimary),kr.lastPos=kr.currentPos,kr.lastTime=kr.currentTime,kr.currentPos=ti.currentPos,kr.currentTime=ti.currentTime):(ti.captured=!1,ti.insideElementPressed=!1,ti.insideElement=!0,wr(fr,ti));Ln.stopHandler&&Wn[0].type==="mouse"&&(clearTimeout(Ln.stopTimeOut),Ln.stopTimeOut=setTimeout(function(){Ii(Ln,En,Wn[0].type)},Ln.stopDelay)),fr.contacts===0?Ln.moveHandler&&(_i=Ln.moveHandler({eventSource:Ln,pointerType:Wn[0].type,position:Bt(Wn[0].currentPos,Ln.element),buttons:fr.buttons,isTouchEvent:Wn[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),_i===!1&&nt.cancelEvent(En)):fr.contacts===1?(Ln.moveHandler&&(kr=fr.asArray()[0],_i=Ln.moveHandler({eventSource:Ln,pointerType:kr.type,position:Bt(kr.currentPos,Ln.element),buttons:fr.buttons,isTouchEvent:kr.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),_i===!1&&nt.cancelEvent(En)),Ln.dragHandler&&(kr=fr.asArray()[0],ui=kr.currentPos.minus(kr.lastPos),_i=Ln.dragHandler({eventSource:Ln,pointerType:kr.type,position:Bt(kr.currentPos,Ln.element),buttons:fr.buttons,delta:ui,speed:kr.speed,direction:kr.direction,shift:En.shiftKey,isTouchEvent:kr.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),_i===!1&&nt.cancelEvent(En))):fr.contacts===2&&(Ln.moveHandler&&(ai=fr.asArray(),_i=Ln.moveHandler({eventSource:Ln,pointerType:ai[0].type,position:Bt(Ft(ai[0].currentPos,ai[1].currentPos),Ln.element),buttons:fr.buttons,isTouchEvent:ai[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),_i===!1&&nt.cancelEvent(En)),Ln.pinchHandler&&Wn[0].type==="touch"&&(ui=er.pinchGPoints[0].currentPos.distanceTo(er.pinchGPoints[1].currentPos),ui!=er.currentPinchDist&&(er.lastPinchDist=er.currentPinchDist,er.currentPinchDist=ui,er.lastPinchCenter=er.currentPinchCenter,er.currentPinchCenter=Ft(er.pinchGPoints[0].currentPos,er.pinchGPoints[1].currentPos),_i=Ln.pinchHandler({eventSource:Ln,pointerType:"touch",gesturePoints:er.pinchGPoints,lastCenter:Bt(er.lastPinchCenter,Ln.element),center:Bt(er.currentPinchCenter,Ln.element),lastDistance:er.lastPinchDist,distance:er.currentPinchDist,shift:En.shiftKey,originalEvent:En,preventDefaultAction:!1,userData:Ln.userData}),_i===!1&&nt.cancelEvent(En))))}function Ni(Ln,En,Wn){si(Ln,En,Wn,0),ci(Ln,En,Wn)}function Ii(Ln,En,Wn){Ln.stopHandler&&Ln.stopHandler({eventSource:Ln,pointerType:Wn,position:Dt(En,Ln.element),buttons:Ln.getActivePointersListByType(Wn).buttons,isTouchEvent:Wn==="touch",originalEvent:En,preventDefaultAction:!1,userData:Ln.userData})}var Mi=function(){try{return window.self!==window.top}catch{return!0}}();function Or(Ln){try{return Ln.addEventListener&&Ln.removeEventListener}catch{return!1}}}(OpenSeadragon),function(nt){nt.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},nt.Control=function(rt,it,st){var bt=rt.parentNode;typeof it=="number"&&(nt.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),it={anchor:it}),it.attachToViewer=typeof it.attachToViewer>"u"?!0:it.attachToViewer,this.autoFade=typeof it.autoFade>"u"?!0:it.autoFade,this.element=rt,this.anchor=it.anchor,this.container=st,this.anchor==nt.ControlAnchor.ABSOLUTE?(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof it.top=="number"?it.top+"px":it.top,this.wrapper.style.left=typeof it.left=="number"?it.left+"px":it.left,this.wrapper.style.height=typeof it.height=="number"?it.height+"px":it.height,this.wrapper.style.width=typeof it.width=="number"?it.width+"px":it.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==nt.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),it.attachToViewer?this.anchor==nt.ControlAnchor.TOP_RIGHT||this.anchor==nt.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):bt.appendChild(this.wrapper)},nt.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(rt){this.wrapper.style.display=rt?this.anchor==nt.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(rt){this.element[nt.SIGNAL]&&nt.Browser.vendor==nt.BROWSERS.IE?nt.setElementOpacity(this.element,rt,!0):nt.setElementOpacity(this.wrapper,rt,!0)}}}(OpenSeadragon),function(nt){nt.ControlDock=function(it){var st=["topleft","topright","bottomright","bottomleft"],bt,xt;for(nt.extend(!0,this,{id:"controldock-"+nt.now()+"-"+Math.floor(Math.random()*1e6),container:nt.makeNeutralElement("div"),controls:[]},it),this.container.onsubmit=function(){return!1},this.element&&(this.element=nt.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),xt=0;xt<st.length;xt++)bt=st[xt],this.controls[bt]=nt.makeNeutralElement("div"),this.controls[bt].style.position="absolute",bt.match("left")&&(this.controls[bt].style.left="0px"),bt.match("right")&&(this.controls[bt].style.right="0px"),bt.match("top")&&(this.controls[bt].style.top="0px"),bt.match("bottom")&&(this.controls[bt].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},nt.ControlDock.prototype={addControl:function(it,st){it=nt.getElement(it);var bt=null;if(!(rt(this,it)>=0)){switch(st.anchor){case nt.ControlAnchor.TOP_RIGHT:bt=this.controls.topright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.BOTTOM_RIGHT:bt=this.controls.bottomright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.BOTTOM_LEFT:bt=this.controls.bottomleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.TOP_LEFT:bt=this.controls.topleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.ABSOLUTE:bt=this.container,it.style.margin="0px",it.style.padding="0px";break;default:case nt.ControlAnchor.NONE:bt=this.container,it.style.margin="0px",it.style.padding="0px";break}this.controls.push(new nt.Control(it,st,bt)),it.style.display="inline-block"}},removeControl:function(it){it=nt.getElement(it);var st=rt(this,it);return st>=0&&(this.controls[st].destroy(),this.controls.splice(st,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var it;for(it=this.controls.length-1;it>=0;it--)if(this.controls[it].isVisible())return!0;return!1},setControlsEnabled:function(it){var st;for(st=this.controls.length-1;st>=0;st--)this.controls[st].setVisible(it);return this}};function rt(it,st){var bt=it.controls,xt;for(xt=bt.length-1;xt>=0;xt--)if(bt[xt].element==st)return xt;return-1}}(OpenSeadragon),function(nt){nt.Placement=nt.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(nt){var rt={},it=1;nt.Viewer=function(rn){var dn=arguments,fn=this,On;if(nt.isPlainObject(rn)||(rn={id:dn[0],xmlPath:dn.length>1?dn[1]:void 0,prefixUrl:dn.length>2?dn[2]:void 0,controls:dn.length>3?dn[3]:void 0,overlays:dn.length>4?dn[4]:void 0}),rn.config&&(nt.extend(!0,rn,rn.config),delete rn.config),nt.extend(!0,this,{id:rn.id,hash:rn.hash||it++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},nt.DEFAULT_SETTINGS,rn),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof rt[this.hash]<"u"&&nt.console.warn("Hash "+this.hash+" has already been used."),rt[this.hash]={fsBoundsDelta:new nt.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=nt.now(),nt.EventSource.call(this),this.addHandler("open-failed",function(xn){var hr=nt.getString("Errors.OpenFailed",xn.eventSource,xn.message);fn._showMessage(hr)}),nt.ControlDock.call(this,rn),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=nt.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(xn){xn.width="100%",xn.height="100%",xn.overflow="hidden",xn.position="absolute",xn.top="0px",xn.left="0px"}(this.canvas.style),nt.setElementTouchActionNone(this.canvas),rn.tabIndex!==""&&(this.canvas.tabIndex=rn.tabIndex===void 0?0:rn.tabIndex),this.container.className="openseadragon-container",function(xn){xn.width="100%",xn.height="100%",xn.position="relative",xn.overflow="hidden",xn.left="0px",xn.top="0px",xn.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new nt.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:nt.delegate(this,Yt),keyHandler:nt.delegate(this,Zt),clickHandler:nt.delegate(this,Wt),dblClickHandler:nt.delegate(this,Qt),dragHandler:nt.delegate(this,Kt),dragEndHandler:nt.delegate(this,on),enterHandler:nt.delegate(this,nn),exitHandler:nt.delegate(this,mn),pressHandler:nt.delegate(this,gn),releaseHandler:nt.delegate(this,Tn),nonPrimaryPressHandler:nt.delegate(this,An),nonPrimaryReleaseHandler:nt.delegate(this,kn),scrollHandler:nt.delegate(this,$n),pinchHandler:nt.delegate(this,Mn)}),this.outerTracker=new nt.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:nt.delegate(this,cn),exitHandler:nt.delegate(this,Sn)}),this.toolbar&&(this.toolbar=new nt.ControlDock({element:this.toolbar})),this.bindStandardControls(),rt[this.hash].prevContainerSize=st(this.container),this.world=new nt.World({viewer:this}),this.world.addHandler("add-item",function(xn){fn.source=fn.world.getItemAt(0).source,rt[fn.hash].forceRedraw=!0,fn._updateRequestId||(fn._updateRequestId=kt(fn,an))}),this.world.addHandler("remove-item",function(xn){fn.world.getItemCount()?fn.source=fn.world.getItemAt(0).source:fn.source=null,rt[fn.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(xn){fn.viewport&&fn.viewport._setContentBounds(fn.world.getHomeBounds(),fn.world.getContentFactor())}),this.world.addHandler("item-index-change",function(xn){fn.source=fn.world.getItemAt(0).source}),this.viewport=new nt.Viewport({containerSize:rt[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new nt.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:rn.timeout}),this.tileCache=new nt.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new nt.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=nt.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(On=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(On,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(On=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(On,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new nt.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),On=0;On<this.customControls.length;On++)this.addControl(this.customControls[On].id,{anchor:this.customControls[On].anchor});nt.requestAnimationFrame(function(){Pt(fn)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},nt.extend(nt.Viewer.prototype,nt.EventSource.prototype,nt.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(rn){return nt.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(rn)},openTileSource:function(rn){return nt.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(rn)},open:function(rn,dn){var fn=this;if(this.close(),!!rn){if(this.sequenceMode&&nt.isArray(rn)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof dn<"u"&&!isNaN(dn)&&(this.initialPage=dn),this.tileSources=rn,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(nt.isArray(rn)||(rn=[rn]),!!rn.length){this._opening=!0;for(var On=rn.length,xn=0,hr=0,Nn,Kn=function(){if(xn+hr===On)if(xn){(fn._firstOpen||!fn.preserveViewport)&&(fn.viewport.goHome(!0),fn.viewport.update()),fn._firstOpen=!1;var ar=rn[0];if(ar.tileSource&&(ar=ar.tileSource),fn.overlays&&!fn.preserveOverlays)for(var wr=0;wr<fn.overlays.length;wr++)fn.currentOverlays[wr]=xt(fn,fn.overlays[wr]);fn._drawOverlays(),fn._opening=!1,fn.raiseEvent("open",{source:ar})}else fn._opening=!1,fn.raiseEvent("open-failed",Nn)},Un=function(ar){(!nt.isPlainObject(ar)||!ar.tileSource)&&(ar={tileSource:ar}),ar.index!==void 0&&(nt.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete ar.index),ar.collectionImmediately===void 0&&(ar.collectionImmediately=!0);var wr=ar.success;ar.success=function(Rr){if(xn++,ar.tileSource.overlays)for(var ci=0;ci<ar.tileSource.overlays.length;ci++)fn.addOverlay(ar.tileSource.overlays[ci]);wr&&wr(Rr),Kn()};var vr=ar.error;ar.error=function(Rr){hr++,Nn||(Nn=Rr),vr&&vr(Rr),Kn()},fn.addTiledImage(ar)},sr=0;sr<rn.length;sr++)Un(rn[sr]);return this}}},close:function(){return rt[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),rt[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(!!rt[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(nt.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),rt[this.hash]=null,delete rt[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(rn){return this.innerTracker.setTracking(rn),this.outerTracker.setTracking(rn),this.raiseEvent("mouse-enabled",{enabled:rn}),this},areControlsEnabled:function(){var rn=this.controls.length,dn;for(dn=0;dn<this.controls.length;dn++)rn=rn&&this.controls[dn].isVisible();return rn},setControlsEnabled:function(rn){return rn?Dt(this):Pt(this),this.raiseEvent("controls-enabled",{enabled:rn}),this},setDebugMode:function(rn){for(var dn=0;dn<this.world.getItemCount();dn++)this.world.getItemAt(dn).debugMode=rn;this.debugMode=rn,this.forceRedraw()},isFullPage:function(){return rt[this.hash].fullPage},setFullPage:function(rn){var dn=document.body,fn=dn.style,On=document.documentElement.style,xn=this,hr,Nn;if(rn==this.isFullPage())return this;var Kn={fullPage:rn,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Kn),Kn.preventDefaultAction)return this;if(rn){for(this.elementSize=nt.getElementSize(this.element),this.pageScroll=nt.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=fn.margin,this.docMargin=On.margin,fn.margin="0",On.margin="0",this.bodyPadding=fn.padding,this.docPadding=On.padding,fn.padding="0",On.padding="0",this.bodyWidth=fn.width,this.docWidth=On.width,fn.width="100%",On.width="100%",this.bodyHeight=fn.height,this.docHeight=On.height,fn.height="100%",On.height="100%",this.previousBody=[],rt[this.hash].prevElementParent=this.element.parentNode,rt[this.hash].prevNextSibling=this.element.nextSibling,rt[this.hash].prevElementWidth=this.element.style.width,rt[this.hash].prevElementHeight=this.element.style.height,hr=dn.childNodes.length,Nn=0;Nn<hr;Nn++)this.previousBody.push(dn.childNodes[0]),dn.removeChild(dn.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,dn.appendChild(this.toolbar.element),nt.addClass(this.toolbar.element,"fullpage")),nt.addClass(this.element,"fullpage"),dn.appendChild(this.element),this.element.style.height=nt.getWindowSize().y+"px",this.element.style.width=nt.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=nt.getElementSize(this.element).y-nt.getElementSize(this.toolbar.element).y+"px"),rt[this.hash].fullPage=!0,nt.delegate(this,cn)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,fn.margin=this.bodyMargin,On.margin=this.docMargin,fn.padding=this.bodyPadding,On.padding=this.docPadding,fn.width=this.bodyWidth,On.width=this.docWidth,fn.height=this.bodyHeight,On.height=this.docHeight,dn.removeChild(this.element),hr=this.previousBody.length,Nn=0;Nn<hr;Nn++)dn.appendChild(this.previousBody.shift());nt.removeClass(this.element,"fullpage"),rt[this.hash].prevElementParent.insertBefore(this.element,rt[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(dn.removeChild(this.toolbar.element),nt.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=rt[this.hash].prevElementWidth,this.element.style.height=rt[this.hash].prevElementHeight;var Un=0,sr=function(){nt.setPageScroll(xn.pageScroll);var ar=nt.getPageScroll();Un++,Un<10&&(ar.x!==xn.pageScroll.x||ar.y!==xn.pageScroll.y)&&nt.requestAnimationFrame(sr)};nt.requestAnimationFrame(sr),rt[this.hash].fullPage=!1,nt.delegate(this,Sn)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:rn}),this},setFullScreen:function(rn){var dn=this;if(!nt.supportsFullScreen)return this.setFullPage(rn);if(nt.isFullScreen()===rn)return this;var fn={fullScreen:rn,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",fn),fn.preventDefaultAction)return this;if(rn){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var On=function(){var xn=nt.isFullScreen();xn||(nt.removeEvent(document,nt.fullScreenEventName,On),nt.removeEvent(document,nt.fullScreenErrorEventName,On),dn.setFullPage(!1),dn.isFullPage()&&(dn.element.style.width=dn.fullPageStyleWidth,dn.element.style.height=dn.fullPageStyleHeight)),dn.navigator&&dn.viewport&&setTimeout(function(){dn.navigator.update(dn.viewport)}),dn.raiseEvent("full-screen",{fullScreen:xn})};nt.addEvent(document,nt.fullScreenEventName,On),nt.addEvent(document,nt.fullScreenErrorEventName,On),nt.requestFullScreen(document.body)}else nt.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(rn){return this.container.style.visibility=rn?"":"hidden",this.raiseEvent("visible",{visible:rn}),this},addTiledImage:function(rn){nt.console.assert(rn,"[Viewer.addTiledImage] options is required"),nt.console.assert(rn.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),nt.console.assert(!rn.replace||rn.index>-1&&rn.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var dn=this;rn.replace&&(rn.replaceItem=dn.world.getItemAt(rn.index)),this._hideMessage(),rn.placeholderFillStyle===void 0&&(rn.placeholderFillStyle=this.placeholderFillStyle),rn.opacity===void 0&&(rn.opacity=this.opacity),rn.preload===void 0&&(rn.preload=this.preload),rn.compositeOperation===void 0&&(rn.compositeOperation=this.compositeOperation),rn.crossOriginPolicy===void 0&&(rn.crossOriginPolicy=rn.tileSource.crossOriginPolicy!==void 0?rn.tileSource.crossOriginPolicy:this.crossOriginPolicy),rn.ajaxWithCredentials===void 0&&(rn.ajaxWithCredentials=this.ajaxWithCredentials),rn.loadTilesWithAjax===void 0&&(rn.loadTilesWithAjax=this.loadTilesWithAjax),rn.ajaxHeaders===void 0||rn.ajaxHeaders===null?rn.ajaxHeaders=this.ajaxHeaders:nt.isPlainObject(rn.ajaxHeaders)&&nt.isPlainObject(this.ajaxHeaders)&&(rn.ajaxHeaders=nt.extend({},this.ajaxHeaders,rn.ajaxHeaders));var fn={options:rn};function On(Nn){for(var Kn=0;Kn<dn._loadQueue.length;Kn++)if(dn._loadQueue[Kn]===fn){dn._loadQueue.splice(Kn,1);break}dn._loadQueue.length===0&&xn(fn),dn.raiseEvent("add-item-failed",Nn),rn.error&&rn.error(Nn)}function xn(Nn){dn.collectionMode&&(dn.world.arrange({immediately:Nn.options.collectionImmediately,rows:dn.collectionRows,columns:dn.collectionColumns,layout:dn.collectionLayout,tileSize:dn.collectionTileSize,tileMargin:dn.collectionTileMargin}),dn.world.setAutoRefigureSizes(!0))}if(nt.isArray(rn.tileSource)){setTimeout(function(){On({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:rn.tileSource,options:rn})});return}this._loadQueue.push(fn);function hr(){for(var Nn,Kn,Un;dn._loadQueue.length&&(Nn=dn._loadQueue[0],!!Nn.tileSource);){if(dn._loadQueue.splice(0,1),Nn.options.replace){var sr=dn.world.getIndexOfItem(Nn.options.replaceItem);sr!=-1&&(Nn.options.index=sr),dn.world.removeItem(Nn.options.replaceItem)}Kn=new nt.TiledImage({viewer:dn,source:Nn.tileSource,viewport:dn.viewport,drawer:dn.drawer,tileCache:dn.tileCache,imageLoader:dn.imageLoader,x:Nn.options.x,y:Nn.options.y,width:Nn.options.width,height:Nn.options.height,fitBounds:Nn.options.fitBounds,fitBoundsPlacement:Nn.options.fitBoundsPlacement,clip:Nn.options.clip,placeholderFillStyle:Nn.options.placeholderFillStyle,opacity:Nn.options.opacity,preload:Nn.options.preload,degrees:Nn.options.degrees,compositeOperation:Nn.options.compositeOperation,springStiffness:dn.springStiffness,animationTime:dn.animationTime,minZoomImageRatio:dn.minZoomImageRatio,wrapHorizontal:dn.wrapHorizontal,wrapVertical:dn.wrapVertical,immediateRender:dn.immediateRender,blendTime:dn.blendTime,alwaysBlend:dn.alwaysBlend,minPixelRatio:dn.minPixelRatio,smoothTileEdgesMinZoom:dn.smoothTileEdgesMinZoom,iOSDevice:dn.iOSDevice,crossOriginPolicy:Nn.options.crossOriginPolicy,ajaxWithCredentials:Nn.options.ajaxWithCredentials,loadTilesWithAjax:Nn.options.loadTilesWithAjax,ajaxHeaders:Nn.options.ajaxHeaders,debugMode:dn.debugMode}),dn.collectionMode&&dn.world.setAutoRefigureSizes(!1),dn.world.addItem(Kn,{index:Nn.options.index}),dn._loadQueue.length===0&&xn(Nn),dn.world.getItemCount()===1&&!dn.preserveViewport&&dn.viewport.goHome(!0),dn.navigator&&(Un=nt.extend({},Nn.options,{replace:!1,originalTiledImage:Kn,tileSource:Nn.tileSource}),dn.navigator.addTiledImage(Un)),Nn.options.success&&Nn.options.success({item:Kn})}}bt(this,rn.tileSource,rn,function(Nn){fn.tileSource=Nn,hr()},function(Nn){Nn.options=rn,On(Nn),hr()})},addSimpleImage:function(rn){nt.console.assert(rn,"[Viewer.addSimpleImage] options is required"),nt.console.assert(rn.url,"[Viewer.addSimpleImage] options.url is required");var dn=nt.extend({},rn,{tileSource:{type:"image",url:rn.url}});delete dn.url,this.addTiledImage(dn)},addLayer:function(rn){var dn=this;nt.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var fn=nt.extend({},rn,{success:function(On){dn.raiseEvent("add-layer",{options:rn,drawer:On.item})},error:function(On){dn.raiseEvent("add-layer-failed",On)}});return this.addTiledImage(fn),this},getLayerAtLevel:function(rn){return nt.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(rn)},getLevelOfLayer:function(rn){return nt.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(rn)},getLayersCount:function(){return nt.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(rn,dn){return nt.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(rn,dn)},removeLayer:function(rn){return nt.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(rn)},forceRedraw:function(){return rt[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var rn=nt.delegate(this,Bt),dn=nt.delegate(this,Ft),fn=nt.delegate(this,Cn),On=nt.delegate(this,pr),xn=this.navImages,hr=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(hr=!1),this.previousButton=new nt.Button({element:this.previousButton?nt.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.PreviousPage"),srcRest:zn(this.prefixUrl,xn.previous.REST),srcGroup:zn(this.prefixUrl,xn.previous.GROUP),srcHover:zn(this.prefixUrl,xn.previous.HOVER),srcDown:zn(this.prefixUrl,xn.previous.DOWN),onRelease:On,onFocus:rn,onBlur:dn}),this.nextButton=new nt.Button({element:this.nextButton?nt.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.NextPage"),srcRest:zn(this.prefixUrl,xn.next.REST),srcGroup:zn(this.prefixUrl,xn.next.GROUP),srcHover:zn(this.prefixUrl,xn.next.HOVER),srcDown:zn(this.prefixUrl,xn.next.DOWN),onRelease:fn,onFocus:rn,onBlur:dn}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),hr&&(this.paging=new nt.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:nt.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var rn=nt.delegate(this,ir),dn=nt.delegate(this,nr),fn=nt.delegate(this,ur),On=nt.delegate(this,tr),xn=nt.delegate(this,Cr),hr=nt.delegate(this,rr),Nn=nt.delegate(this,Fr),Kn=nt.delegate(this,mr),Un=nt.delegate(this,_r),sr=nt.delegate(this,yr),ar=nt.delegate(this,Bt),wr=nt.delegate(this,Ft),vr=this.navImages,Rr=[],ci=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(ci=!1),this.showZoomControl&&(Rr.push(this.zoomInButton=new nt.Button({element:this.zoomInButton?nt.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomIn"),srcRest:zn(this.prefixUrl,vr.zoomIn.REST),srcGroup:zn(this.prefixUrl,vr.zoomIn.GROUP),srcHover:zn(this.prefixUrl,vr.zoomIn.HOVER),srcDown:zn(this.prefixUrl,vr.zoomIn.DOWN),onPress:rn,onRelease:dn,onClick:fn,onEnter:rn,onExit:dn,onFocus:ar,onBlur:wr})),Rr.push(this.zoomOutButton=new nt.Button({element:this.zoomOutButton?nt.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomOut"),srcRest:zn(this.prefixUrl,vr.zoomOut.REST),srcGroup:zn(this.prefixUrl,vr.zoomOut.GROUP),srcHover:zn(this.prefixUrl,vr.zoomOut.HOVER),srcDown:zn(this.prefixUrl,vr.zoomOut.DOWN),onPress:On,onRelease:dn,onClick:xn,onEnter:On,onExit:dn,onFocus:ar,onBlur:wr}))),this.showHomeControl&&Rr.push(this.homeButton=new nt.Button({element:this.homeButton?nt.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Home"),srcRest:zn(this.prefixUrl,vr.home.REST),srcGroup:zn(this.prefixUrl,vr.home.GROUP),srcHover:zn(this.prefixUrl,vr.home.HOVER),srcDown:zn(this.prefixUrl,vr.home.DOWN),onRelease:hr,onFocus:ar,onBlur:wr})),this.showFullPageControl&&Rr.push(this.fullPageButton=new nt.Button({element:this.fullPageButton?nt.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.FullPage"),srcRest:zn(this.prefixUrl,vr.fullpage.REST),srcGroup:zn(this.prefixUrl,vr.fullpage.GROUP),srcHover:zn(this.prefixUrl,vr.fullpage.HOVER),srcDown:zn(this.prefixUrl,vr.fullpage.DOWN),onRelease:Nn,onFocus:ar,onBlur:wr})),this.showRotationControl&&(Rr.push(this.rotateLeftButton=new nt.Button({element:this.rotateLeftButton?nt.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateLeft"),srcRest:zn(this.prefixUrl,vr.rotateleft.REST),srcGroup:zn(this.prefixUrl,vr.rotateleft.GROUP),srcHover:zn(this.prefixUrl,vr.rotateleft.HOVER),srcDown:zn(this.prefixUrl,vr.rotateleft.DOWN),onRelease:Kn,onFocus:ar,onBlur:wr})),Rr.push(this.rotateRightButton=new nt.Button({element:this.rotateRightButton?nt.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateRight"),srcRest:zn(this.prefixUrl,vr.rotateright.REST),srcGroup:zn(this.prefixUrl,vr.rotateright.GROUP),srcHover:zn(this.prefixUrl,vr.rotateright.HOVER),srcDown:zn(this.prefixUrl,vr.rotateright.DOWN),onRelease:Un,onFocus:ar,onBlur:wr}))),this.showFlipControl&&Rr.push(this.flipButton=new nt.Button({element:this.flipButton?nt.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Flip"),srcRest:zn(this.prefixUrl,vr.flip.REST),srcGroup:zn(this.prefixUrl,vr.flip.GROUP),srcHover:zn(this.prefixUrl,vr.flip.HOVER),srcDown:zn(this.prefixUrl,vr.flip.DOWN),onRelease:sr,onFocus:ar,onBlur:wr})),ci&&(this.buttons=new nt.ButtonGroup({buttons:Rr,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",nt.delegate(this,Sr)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(rn){return this.tileSources&&rn>=0&&rn<this.tileSources.length&&(this._sequenceIndex=rn,this._updateSequenceButtons(rn),this.open(this.tileSources[rn]),this.referenceStrip&&this.referenceStrip.setFocus(rn),this.raiseEvent("page",{page:rn})),this},addOverlay:function(rn,dn,fn,On){var xn;if(nt.isPlainObject(rn)?xn=rn:xn={element:rn,location:dn,placement:fn,onDraw:On},rn=nt.getElement(xn.element),Et(this.currentOverlays,rn)>=0)return this;var hr=xt(this,xn);return this.currentOverlays.push(hr),hr.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:rn,location:xn.location,placement:xn.placement}),this},updateOverlay:function(rn,dn,fn){var On;return rn=nt.getElement(rn),On=Et(this.currentOverlays,rn),On>=0&&(this.currentOverlays[On].update(dn,fn),rt[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:rn,location:dn,placement:fn})),this},removeOverlay:function(rn){var dn;return rn=nt.getElement(rn),dn=Et(this.currentOverlays,rn),dn>=0&&(this.currentOverlays[dn].destroy(),this.currentOverlays.splice(dn,1),rt[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:rn})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return rt[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(rn){var dn;return rn=nt.getElement(rn),dn=Et(this.currentOverlays,rn),dn>=0?this.currentOverlays[dn]:null},_updateSequenceButtons:function(rn){this.nextButton&&(!this.tileSources||this.tileSources.length-1===rn?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(rn>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(rn){this._hideMessage();var dn=nt.makeNeutralElement("div");dn.appendChild(document.createTextNode(rn)),this.messageDiv=nt.makeCenteredNode(dn),nt.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var rn=this.messageDiv;rn&&(rn.parentNode.removeChild(rn),delete this.messageDiv)},gestureSettingsByDeviceType:function(rn){switch(rn){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var rn,dn=this.currentOverlays.length;for(rn=0;rn<dn;rn++)this.currentOverlays[rn].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new nt.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else nt.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function st(rn){return rn=nt.getElement(rn),new nt.Point(rn.clientWidth===0?1:rn.clientWidth,rn.clientHeight===0?1:rn.clientHeight)}function bt(rn,dn,fn,On,xn){var hr=rn;if(nt.type(dn)=="string"){if(dn.match(/^\s*<.*>\s*$/))dn=nt.parseXml(dn);else if(dn.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var Nn=nt.parseJSON(dn);dn=Nn}catch{}}function Kn(Un,sr){Un.ready?On(Un):(Un.addHandler("ready",function(){On(Un)}),Un.addHandler("open-failed",function(ar){xn({message:ar.message,source:sr})}))}setTimeout(function(){if(nt.type(dn)=="string")dn=new nt.TileSource({url:dn,crossOriginPolicy:fn.crossOriginPolicy!==void 0?fn.crossOriginPolicy:rn.crossOriginPolicy,ajaxWithCredentials:rn.ajaxWithCredentials,ajaxHeaders:rn.ajaxHeaders,useCanvas:rn.useCanvas,success:function(wr){On(wr.tileSource)}}),dn.addHandler("open-failed",function(wr){xn(wr)});else if(nt.isPlainObject(dn)||dn.nodeType)if(dn.crossOriginPolicy===void 0&&(fn.crossOriginPolicy!==void 0||rn.crossOriginPolicy!==void 0)&&(dn.crossOriginPolicy=fn.crossOriginPolicy!==void 0?fn.crossOriginPolicy:rn.crossOriginPolicy),dn.ajaxWithCredentials===void 0&&(dn.ajaxWithCredentials=rn.ajaxWithCredentials),dn.useCanvas===void 0&&(dn.useCanvas=rn.useCanvas),nt.isFunction(dn.getTileUrl)){var Un=new nt.TileSource(dn);Un.getTileUrl=dn.getTileUrl,On(Un)}else{var sr=nt.TileSource.determineType(hr,dn);if(!sr){xn({message:"Unable to load TileSource",source:dn});return}var ar=sr.prototype.configure.apply(hr,[dn]);Kn(new sr(ar),dn)}else Kn(dn,dn)})}function xt(rn,dn){if(dn instanceof nt.Overlay)return dn;var fn=null;if(dn.element)fn=nt.getElement(dn.element);else{var On=dn.id?dn.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);fn=nt.getElement(dn.id),fn||(fn=document.createElement("a"),fn.href="#/overlay/"+On),fn.id=On,nt.addClass(fn,dn.className?dn.className:"openseadragon-overlay")}var xn=dn.location,hr=dn.width,Nn=dn.height;if(!xn){var Kn=dn.x,Un=dn.y;if(dn.px!==void 0){var sr=rn.viewport.imageToViewportRectangle(new nt.Rect(dn.px,dn.py,hr||0,Nn||0));Kn=sr.x,Un=sr.y,hr=hr!==void 0?sr.width:void 0,Nn=Nn!==void 0?sr.height:void 0}xn=new nt.Point(Kn,Un)}var ar=dn.placement;return ar&&nt.type(ar)==="string"&&(ar=nt.Placement[dn.placement.toUpperCase()]),new nt.Overlay({element:fn,location:xn,placement:ar,onDraw:dn.onDraw,checkResize:dn.checkResize,width:hr,height:Nn,rotationMode:dn.rotationMode})}function Et(rn,dn){var fn;for(fn=rn.length-1;fn>=0;fn--)if(rn[fn].element===dn)return fn;return-1}function kt(rn,dn){return nt.requestAnimationFrame(function(){dn(rn)})}function Lt(rn){nt.requestAnimationFrame(function(){Rt(rn)})}function Pt(rn){!rn.autoHideControls||(rn.controlsShouldFade=!0,rn.controlsFadeBeginTime=nt.now()+rn.controlsFadeDelay,window.setTimeout(function(){Lt(rn)},rn.controlsFadeDelay))}function Rt(rn){var dn,fn,On,xn;if(rn.controlsShouldFade){for(dn=nt.now(),fn=dn-rn.controlsFadeBeginTime,On=1-fn/rn.controlsFadeLength,On=Math.min(1,On),On=Math.max(0,On),xn=rn.controls.length-1;xn>=0;xn--)rn.controls[xn].autoFade&&rn.controls[xn].setOpacity(On);On>0&&Lt(rn)}}function Dt(rn){var dn;for(rn.controlsShouldFade=!1,dn=rn.controls.length-1;dn>=0;dn--)rn.controls[dn].setOpacity(1)}function Bt(){Dt(this)}function Ft(){Pt(this)}function Yt(rn){var dn={originalEvent:rn.originalEvent,preventDefaultAction:rn.preventDefaultAction,preventVerticalPan:rn.preventVerticalPan,preventHorizontalPan:rn.preventHorizontalPan};if(this.raiseEvent("canvas-key",dn),!dn.preventDefaultAction&&!rn.ctrl&&!rn.alt&&!rn.meta)switch(rn.keyCode){case 38:return dn.preventVerticalPan||(rn.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return dn.preventVerticalPan||(rn.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function Zt(rn){var dn={originalEvent:rn.originalEvent,preventDefaultAction:rn.preventDefaultAction,preventVerticalPan:rn.preventVerticalPan,preventHorizontalPan:rn.preventHorizontalPan};if(this.raiseEvent("canvas-key",dn),!dn.preventDefaultAction&&!rn.ctrl&&!rn.alt&&!rn.meta)switch(rn.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return dn.preventVerticalPan||(rn.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return dn.preventVerticalPan||(rn.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return dn.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function Wt(rn){var dn,fn=document.activeElement==this.canvas;fn||this.canvas.focus(),this.viewport.flipped&&(rn.position.x=this.viewport.getContainerSize().x-rn.position.x);var On={tracker:rn.eventSource,position:rn.position,quick:rn.quick,shift:rn.shift,originalEvent:rn.originalEvent,preventDefaultAction:rn.preventDefaultAction};this.raiseEvent("canvas-click",On),!On.preventDefaultAction&&this.viewport&&rn.quick&&(dn=this.gestureSettingsByDeviceType(rn.pointerType),dn.clickToZoom&&(this.viewport.zoomBy(rn.shift?1/this.zoomPerClick:this.zoomPerClick,dn.zoomToRefPoint?this.viewport.pointFromPixel(rn.position,!0):null),this.viewport.applyConstraints()))}function Qt(rn){var dn,fn={tracker:rn.eventSource,position:rn.position,shift:rn.shift,originalEvent:rn.originalEvent,preventDefaultAction:rn.preventDefaultAction};this.raiseEvent("canvas-double-click",fn),!fn.preventDefaultAction&&this.viewport&&(dn=this.gestureSettingsByDeviceType(rn.pointerType),dn.dblClickToZoom&&(this.viewport.zoomBy(rn.shift?1/this.zoomPerClick:this.zoomPerClick,dn.zoomToRefPoint?this.viewport.pointFromPixel(rn.position,!0):null),this.viewport.applyConstraints()))}function Kt(rn){var dn,fn={tracker:rn.eventSource,position:rn.position,delta:rn.delta,speed:rn.speed,direction:rn.direction,shift:rn.shift,originalEvent:rn.originalEvent,preventDefaultAction:rn.preventDefaultAction};if(this.raiseEvent("canvas-drag",fn),!fn.preventDefaultAction&&this.viewport){if(dn=this.gestureSettingsByDeviceType(rn.pointerType),this.panHorizontal||(rn.delta.x=0),this.panVertical||(rn.delta.y=0),this.viewport.flipped&&(rn.delta.x=-rn.delta.x),this.constrainDuringPan){var On=this.viewport.deltaPointsFromPixels(rn.delta.negate());this.viewport.centerSpringX.target.value+=On.x,this.viewport.centerSpringY.target.value+=On.y;var xn=this.viewport.getBounds(),hr=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=On.x,this.viewport.centerSpringY.target.value-=On.y,xn.x!=hr.x&&(rn.delta.x=0),xn.y!=hr.y&&(rn.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(rn.delta.negate()),dn.flickEnabled&&!this.constrainDuringPan)}}function on(rn){if(!rn.preventDefaultAction&&this.viewport){var dn=this.gestureSettingsByDeviceType(rn.pointerType);if(dn.flickEnabled&&rn.speed>=dn.flickMinSpeed){var fn=0;this.panHorizontal&&(fn=dn.flickMomentum*rn.speed*Math.cos(rn.direction));var On=0;this.panVertical&&(On=dn.flickMomentum*rn.speed*Math.sin(rn.direction));var xn=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),hr=this.viewport.pointFromPixel(new nt.Point(xn.x-fn,xn.y-On));this.viewport.panTo(hr,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:rn.eventSource,position:rn.position,speed:rn.speed,direction:rn.direction,shift:rn.shift,originalEvent:rn.originalEvent})}function nn(rn){this.raiseEvent("canvas-enter",{tracker:rn.eventSource,pointerType:rn.pointerType,position:rn.position,buttons:rn.buttons,pointers:rn.pointers,insideElementPressed:rn.insideElementPressed,buttonDownAny:rn.buttonDownAny,originalEvent:rn.originalEvent})}function mn(rn){window.location!=window.parent.location&&nt.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:rn.eventSource,pointerType:rn.pointerType,position:rn.position,buttons:rn.buttons,pointers:rn.pointers,insideElementPressed:rn.insideElementPressed,buttonDownAny:rn.buttonDownAny,originalEvent:rn.originalEvent})}function gn(rn){this.raiseEvent("canvas-press",{tracker:rn.eventSource,pointerType:rn.pointerType,position:rn.position,insideElementPressed:rn.insideElementPressed,insideElementReleased:rn.insideElementReleased,originalEvent:rn.originalEvent})}function Tn(rn){this.raiseEvent("canvas-release",{tracker:rn.eventSource,pointerType:rn.pointerType,position:rn.position,insideElementPressed:rn.insideElementPressed,insideElementReleased:rn.insideElementReleased,originalEvent:rn.originalEvent})}function An(rn){this.raiseEvent("canvas-nonprimary-press",{tracker:rn.eventSource,position:rn.position,pointerType:rn.pointerType,button:rn.button,buttons:rn.buttons,originalEvent:rn.originalEvent})}function kn(rn){this.raiseEvent("canvas-nonprimary-release",{tracker:rn.eventSource,position:rn.position,pointerType:rn.pointerType,button:rn.button,buttons:rn.buttons,originalEvent:rn.originalEvent})}function Mn(rn){var dn,fn,On,xn;if(!rn.preventDefaultAction&&this.viewport&&(dn=this.gestureSettingsByDeviceType(rn.pointerType),dn.pinchToZoom&&(fn=this.viewport.pointFromPixel(rn.center,!0),On=this.viewport.pointFromPixel(rn.lastCenter,!0),xn=On.minus(fn),this.panHorizontal||(xn.x=0),this.panVertical||(xn.y=0),this.viewport.zoomBy(rn.distance/rn.lastDistance,fn,!0),dn.zoomToRefPoint&&this.viewport.panBy(xn,!0),this.viewport.applyConstraints()),dn.pinchRotate)){var hr=Math.atan2(rn.gesturePoints[0].currentPos.y-rn.gesturePoints[1].currentPos.y,rn.gesturePoints[0].currentPos.x-rn.gesturePoints[1].currentPos.x),Nn=Math.atan2(rn.gesturePoints[0].lastPos.y-rn.gesturePoints[1].lastPos.y,rn.gesturePoints[0].lastPos.x-rn.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(hr-Nn)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:rn.eventSource,gesturePoints:rn.gesturePoints,lastCenter:rn.lastCenter,center:rn.center,lastDistance:rn.lastDistance,distance:rn.distance,shift:rn.shift,originalEvent:rn.originalEvent}),!1}function $n(rn){var dn,fn,On,xn;if(On=nt.now(),xn=On-this._lastScrollTime,xn>this.minScrollDeltaTime){if(this._lastScrollTime=On,this.viewport.flipped&&(rn.position.x=this.viewport.getContainerSize().x-rn.position.x),!rn.preventDefaultAction&&this.viewport&&(dn=this.gestureSettingsByDeviceType(rn.pointerType),dn.scrollToZoom&&(fn=Math.pow(this.zoomPerScroll,rn.scroll),this.viewport.zoomBy(fn,dn.zoomToRefPoint?this.viewport.pointFromPixel(rn.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:rn.eventSource,position:rn.position,scroll:rn.scroll,shift:rn.shift,originalEvent:rn.originalEvent}),dn&&dn.scrollToZoom)return!1}else if(dn=this.gestureSettingsByDeviceType(rn.pointerType),dn&&dn.scrollToZoom)return!1}function cn(rn){rt[this.hash].mouseInside=!0,Dt(this),this.raiseEvent("container-enter",{tracker:rn.eventSource,position:rn.position,buttons:rn.buttons,pointers:rn.pointers,insideElementPressed:rn.insideElementPressed,buttonDownAny:rn.buttonDownAny,originalEvent:rn.originalEvent})}function Sn(rn){rn.pointers<1&&(rt[this.hash].mouseInside=!1,rt[this.hash].animating||Pt(this)),this.raiseEvent("container-exit",{tracker:rn.eventSource,position:rn.position,buttons:rn.buttons,pointers:rn.pointers,insideElementPressed:rn.insideElementPressed,buttonDownAny:rn.buttonDownAny,originalEvent:rn.originalEvent})}function an(rn){jn(rn),rn.isOpen()?rn._updateRequestId=kt(rn,an):rn._updateRequestId=!1}function jn(rn){if(!rn._opening){if(rn.autoResize){var dn=st(rn.container),fn=rt[rn.hash].prevContainerSize;if(!dn.equals(fn)){var On=rn.viewport;if(rn.preserveImageSizeOnResize){var xn=fn.x/dn.x,hr=On.getZoom()*xn,Nn=On.getCenter();On.resize(dn,!1),On.zoomTo(hr,null,!0),On.panTo(Nn,!0)}else{var Kn=On.getBounds();On.resize(dn,!0),On.fitBoundsWithConstraints(Kn,!0)}rt[rn.hash].prevContainerSize=dn,rt[rn.hash].forceRedraw=!0}}var Un=rn.viewport.update(),sr=rn.world.update()||Un;Un&&rn.raiseEvent("viewport-change"),rn.referenceStrip&&(sr=rn.referenceStrip.update(rn.viewport)||sr),!rt[rn.hash].animating&&sr&&(rn.raiseEvent("animation-start"),Dt(rn)),(sr||rt[rn.hash].forceRedraw||rn.world.needsDraw())&&(hn(rn),rn._drawOverlays(),rn.navigator&&rn.navigator.update(rn.viewport),rt[rn.hash].forceRedraw=!1,sr&&rn.raiseEvent("animation")),rt[rn.hash].animating&&!sr&&(rn.raiseEvent("animation-finish"),rt[rn.hash].mouseInside||Pt(rn)),rt[rn.hash].animating=sr}}function hn(rn){rn.imageLoader.clear(),rn.drawer.clear(),rn.world.draw(),rn.raiseEvent("update-viewport",{})}function zn(rn,dn){return rn?rn+dn:dn}function ir(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=this.zoomPerSecond,rt[this.hash].zooming=!0,dr(this)}function tr(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=1/this.zoomPerSecond,rt[this.hash].zooming=!0,dr(this)}function nr(){rt[this.hash].zooming=!1}function dr(rn){nt.requestAnimationFrame(nt.delegate(rn,or))}function or(){var rn,dn,fn;rt[this.hash].zooming&&this.viewport&&(rn=nt.now(),dn=rn-rt[this.hash].lastZoomTime,fn=Math.pow(rt[this.hash].zoomFactor,dn/1e3),this.viewport.zoomBy(fn),this.viewport.applyConstraints(),rt[this.hash].lastZoomTime=rn,dr(this))}function ur(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Cr(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Sr(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function rr(){this.viewport&&this.viewport.goHome()}function Fr(){this.isFullPage()&&!nt.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function mr(){if(this.viewport){var rn=this.viewport.getRotation();this.viewport.flipped?rn=nt.positiveModulo(rn+this.rotationIncrement,360):rn=nt.positiveModulo(rn-this.rotationIncrement,360),this.viewport.setRotation(rn)}}function _r(){if(this.viewport){var rn=this.viewport.getRotation();this.viewport.flipped?rn=nt.positiveModulo(rn-this.rotationIncrement,360):rn=nt.positiveModulo(rn+this.rotationIncrement,360),this.viewport.setRotation(rn)}}function yr(){this.viewport.toggleFlip()}function pr(){var rn=this._sequenceIndex-1;this.navPrevNextWrap&&rn<0&&(rn+=this.tileSources.length),this.goToPage(rn)}function Cn(){var rn=this._sequenceIndex+1;this.navPrevNextWrap&&rn>=this.tileSources.length&&(rn=0),this.goToPage(rn)}}(OpenSeadragon),function(nt){nt.Navigator=function(kt){var Lt=kt.viewer,Pt=this,Rt,Dt;kt.id?(this.element=document.getElementById(kt.id),kt.controlOptions={anchor:nt.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(kt.id="navigator-"+nt.now(),this.element=nt.makeNeutralElement("div"),kt.controlOptions={anchor:nt.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:kt.autoFade},kt.position&&(kt.position=="BOTTOM_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_RIGHT:kt.position=="BOTTOM_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_LEFT:kt.position=="TOP_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_RIGHT:kt.position=="TOP_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_LEFT:kt.position=="ABSOLUTE"&&(kt.controlOptions.anchor=nt.ControlAnchor.ABSOLUTE,kt.controlOptions.top=kt.top,kt.controlOptions.left=kt.left,kt.controlOptions.height=kt.height,kt.controlOptions.width=kt.width))),this.element.id=kt.id,this.element.className+=" navigator",kt=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.navigatorSizeRatio},kt,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:kt.autoResize,minZoomImageRatio:1,background:kt.background,opacity:kt.opacity,borderColor:kt.borderColor,displayRegionColor:kt.displayRegionColor}),kt.minPixelRatio=this.minPixelRatio=Lt.minPixelRatio,nt.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new nt.Point(1,1),this.totalBorderWidths=new nt.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),kt.controlOptions.anchor!=nt.ControlAnchor.NONE&&function(Yt,Zt){Yt.margin="0px",Yt.border=Zt+"px solid "+kt.borderColor,Yt.padding="0px",Yt.background=kt.background,Yt.opacity=kt.opacity,Yt.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=nt.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(Yt,Zt){Yt.position="relative",Yt.top="0px",Yt.left="0px",Yt.fontSize="0px",Yt.overflow="hidden",Yt.border=Zt+"px solid "+kt.displayRegionColor,Yt.margin="0px",Yt.padding="0px",Yt.background="transparent",Yt.float="left",Yt.cssFloat="left",Yt.styleFloat="left",Yt.zIndex=999999999,Yt.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=nt.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",Lt.addControl(this.element,kt.controlOptions),this._resizeWithViewer=kt.controlOptions.anchor!=nt.ControlAnchor.ABSOLUTE&&kt.controlOptions.anchor!=nt.ControlAnchor.NONE,kt.width&&kt.height?(this.setWidth(kt.width),this.setHeight(kt.height)):this._resizeWithViewer&&(Rt=nt.getElementSize(Lt.element),this.element.style.height=Math.round(Rt.y*kt.sizeRatio)+"px",this.element.style.width=Math.round(Rt.x*kt.sizeRatio)+"px",this.oldViewerSize=Rt,Dt=nt.getElementSize(this.element),this.elementArea=Dt.x*Dt.y),this.oldContainerSize=new nt.Point(0,0),nt.Viewer.apply(this,[kt]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function Bt(Yt){xt(Pt.displayRegionContainer,Yt),xt(Pt.displayRegion,-Yt),Pt.viewport.setRotation(Yt)}if(kt.navigatorRotate){var Ft=kt.viewer.viewport?kt.viewer.viewport.getRotation():kt.viewer.degrees||0;Bt(Ft),kt.viewer.addHandler("rotate",function(Yt){Bt(Yt.degrees)})}this.innerTracker.destroy(),this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),clickHandler:nt.delegate(this,rt),releaseHandler:nt.delegate(this,st),scrollHandler:nt.delegate(this,bt)}),this.addHandler("reset-size",function(){Pt.viewport&&Pt.viewport.goHome(!0)}),Lt.world.addHandler("item-index-change",function(Yt){window.setTimeout(function(){var Zt=Pt.world.getItemAt(Yt.previousIndex);Pt.world.setItemIndex(Zt,Yt.newIndex)},1)}),Lt.world.addHandler("remove-item",function(Yt){var Zt=Yt.item,Wt=Pt._getMatchingItem(Zt);Wt&&Pt.world.removeItem(Wt)}),this.update(Lt.viewport)},nt.extend(nt.Navigator.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{updateSize:function(){if(this.viewport){var kt=new nt.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);kt.equals(this.oldContainerSize)||(this.viewport.resize(kt,!0),this.viewport.goHome(!0),this.oldContainerSize=kt,this.drawer.clear(),this.world.draw())}},setWidth:function(kt){this.width=kt,this.element.style.width=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setHeight:function(kt){this.height=kt,this.element.style.height=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setFlip:function(kt){return this.viewport.setFlip(kt),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(kt){Et(this.displayRegion,kt),Et(this.canvas,kt),Et(this.element,kt)},update:function(kt){var Lt,Pt,Rt,Dt,Bt,Ft;if(Lt=nt.getElementSize(this.viewer.element),this._resizeWithViewer&&Lt.x&&Lt.y&&!Lt.equals(this.oldViewerSize)&&(this.oldViewerSize=Lt,this.maintainSizeRatio||!this.elementArea?(Pt=Lt.x*this.sizeRatio,Rt=Lt.y*this.sizeRatio):(Pt=Math.sqrt(this.elementArea*(Lt.x/Lt.y)),Rt=this.elementArea/Pt),this.element.style.width=Math.round(Pt)+"px",this.element.style.height=Math.round(Rt)+"px",this.elementArea||(this.elementArea=Pt*Rt),this.updateSize()),kt&&this.viewport){Dt=kt.getBoundsNoRotate(!0),Bt=this.viewport.pixelFromPointNoRotate(Dt.getTopLeft(),!1),Ft=this.viewport.pixelFromPointNoRotate(Dt.getBottomRight(),!1).minus(this.totalBorderWidths);var Yt=this.displayRegion.style;Yt.display=this.world.getItemCount()?"block":"none",Yt.top=Math.round(Bt.y)+"px",Yt.left=Math.round(Bt.x)+"px";var Zt=Math.abs(Bt.x-Ft.x),Wt=Math.abs(Bt.y-Ft.y);Yt.width=Math.round(Math.max(Zt,0))+"px",Yt.height=Math.round(Math.max(Wt,0))+"px"}},addTiledImage:function(kt){var Lt=this,Pt=kt.originalTiledImage;delete kt.original;var Rt=nt.extend({},kt,{success:function(Dt){var Bt=Dt.item;Bt._originalForNavigator=Pt,Lt._matchBounds(Bt,Pt,!0);function Ft(){Lt._matchBounds(Bt,Pt)}function Yt(){Lt._matchOpacity(Bt,Pt)}function Zt(){Lt._matchCompositeOperation(Bt,Pt)}Pt.addHandler("bounds-change",Ft),Pt.addHandler("clip-change",Ft),Pt.addHandler("opacity-change",Yt),Pt.addHandler("composite-operation-change",Zt)}});return nt.Viewer.prototype.addTiledImage.apply(this,[Rt])},_getMatchingItem:function(kt){for(var Lt=this.world.getItemCount(),Pt,Rt=0;Rt<Lt;Rt++)if(Pt=this.world.getItemAt(Rt),Pt._originalForNavigator===kt)return Pt;return null},_matchBounds:function(kt,Lt,Pt){var Rt=Lt.getBoundsNoRotate();kt.setPosition(Rt.getTopLeft(),Pt),kt.setWidth(Rt.width,Pt),kt.setRotation(Lt.getRotation(),Pt),kt.setClip(Lt.getClip())},_matchOpacity:function(kt,Lt){kt.setOpacity(Lt.opacity)},_matchCompositeOperation:function(kt,Lt){kt.setCompositeOperation(Lt.compositeOperation)}});function rt(kt){var Lt={tracker:kt.eventSource,position:kt.position,quick:kt.quick,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",Lt),!Lt.preventDefaultAction&&kt.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(kt.position.x=this.viewport.getContainerSize().x-kt.position.x);var Pt=this.viewport.pointFromPixel(kt.position);this.panVertical?this.panHorizontal||(Pt.x=this.viewer.viewport.getCenter(!0).x):Pt.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(Pt),this.viewer.viewport.applyConstraints()}}function it(kt){var Lt={tracker:kt.eventSource,position:kt.position,delta:kt.delta,speed:kt.speed,direction:kt.direction,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",Lt),!Lt.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(kt.delta.x=0),this.panVertical||(kt.delta.y=0),this.viewer.viewport.flipped&&(kt.delta.x=-kt.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(kt.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function st(kt){kt.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function bt(kt){return this.viewer.raiseEvent("navigator-scroll",{tracker:kt.eventSource,position:kt.position,scroll:kt.scroll,shift:kt.shift,originalEvent:kt.originalEvent}),!1}function xt(kt,Lt){Et(kt,"rotate("+Lt+"deg)")}function Et(kt,Lt){kt.style.webkitTransform=Lt,kt.style.mozTransform=Lt,kt.style.msTransform=Lt,kt.style.oTransform=Lt,kt.style.transform=Lt}}(OpenSeadragon),function(nt){var rt={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};nt.extend(nt,{getString:function(it){var st=it.split("."),bt=null,xt=arguments,Et=rt,kt;for(kt=0;kt<st.length-1;kt++)Et=Et[st[kt]]||{};return bt=Et[st[kt]],typeof bt!="string"&&(nt.console.log("Untranslated source string:",it),bt=""),bt.replace(/\{\d+\}/g,function(Lt){var Pt=parseInt(Lt.match(/\d+/),10)+1;return Pt<xt.length?xt[Pt]:""})},setString:function(it,st){var bt=it.split("."),xt=rt,Et;for(Et=0;Et<bt.length-1;Et++)xt[bt[Et]]||(xt[bt[Et]]={}),xt=xt[bt[Et]];xt[bt[Et]]=st}})}(OpenSeadragon),function(nt){nt.Point=function(rt,it){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0},nt.Point.prototype={clone:function(){return new nt.Point(this.x,this.y)},plus:function(rt){return new nt.Point(this.x+rt.x,this.y+rt.y)},minus:function(rt){return new nt.Point(this.x-rt.x,this.y-rt.y)},times:function(rt){return new nt.Point(this.x*rt,this.y*rt)},divide:function(rt){return new nt.Point(this.x/rt,this.y/rt)},negate:function(){return new nt.Point(-this.x,-this.y)},distanceTo:function(rt){return Math.sqrt(Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2))},squaredDistanceTo:function(rt){return Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2)},apply:function(rt){return new nt.Point(rt(this.x),rt(this.y))},equals:function(rt){return rt instanceof nt.Point&&this.x===rt.x&&this.y===rt.y},rotate:function(rt,it){it=it||new nt.Point(0,0);var st,bt;if(rt%90===0){var xt=nt.positiveModulo(rt,360);switch(xt){case 0:st=1,bt=0;break;case 90:st=0,bt=1;break;case 180:st=-1,bt=0;break;case 270:st=0,bt=-1;break}}else{var Et=rt*Math.PI/180;st=Math.cos(Et),bt=Math.sin(Et)}var kt=st*(this.x-it.x)-bt*(this.y-it.y)+it.x,Lt=bt*(this.x-it.x)+st*(this.y-it.y)+it.y;return new nt.Point(kt,Lt)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(nt){nt.TileSource=function(it,st,bt,xt,Et,kt){var Lt=this,Pt=arguments,Rt,Dt;if(nt.isPlainObject(it)?Rt=it:Rt={width:Pt[0],height:Pt[1],tileSize:Pt[2],tileOverlap:Pt[3],minLevel:Pt[4],maxLevel:Pt[5]},nt.EventSource.call(this),nt.extend(!0,this,Rt),!this.success){for(Dt=0;Dt<arguments.length;Dt++)if(nt.isFunction(arguments[Dt])){this.success=arguments[Dt];break}}this.success&&this.addHandler("ready",function(Bt){Lt.success(Bt)}),nt.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new nt.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=Rt.width&&Rt.height?Rt.width/Rt.height:1,this.dimensions=new nt.Point(Rt.width,Rt.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=Rt.tileOverlap?Rt.tileOverlap:0,this.minLevel=Rt.minLevel?Rt.minLevel:0,this.maxLevel=Rt.maxLevel!==void 0&&Rt.maxLevel!==null?Rt.maxLevel:Rt.width&&Rt.height?Math.ceil(Math.log(Math.max(Rt.width,Rt.height))/Math.log(2)):0,this.success&&nt.isFunction(this.success)&&this.success(this))},nt.TileSource.prototype={getTileSize:function(it){return nt.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(it){return this._tileWidth?this._tileWidth:this.getTileSize(it)},getTileHeight:function(it){return this._tileHeight?this._tileHeight:this.getTileSize(it)},getLevelScale:function(it){var st={},bt;for(bt=0;bt<=this.maxLevel;bt++)st[bt]=1/Math.pow(2,this.maxLevel-bt);return this.getLevelScale=function(xt){return st[xt]},this.getLevelScale(it)},getNumTiles:function(it){var st=this.getLevelScale(it),bt=Math.ceil(st*this.dimensions.x/this.getTileWidth(it)),xt=Math.ceil(st*this.dimensions.y/this.getTileHeight(it));return new nt.Point(bt,xt)},getPixelRatio:function(it){var st=this.dimensions.times(this.getLevelScale(it)),bt=1/st.x,xt=1/st.y;return new nt.Point(bt,xt)},getClosestLevel:function(){var it,st;for(it=this.minLevel+1;it<=this.maxLevel&&(st=this.getNumTiles(it),!(st.x>1||st.y>1));it++);return it-1},getTileAtPoint:function(it,st){var bt=st.x>=0&&st.x<=1&&st.y>=0&&st.y<=1/this.aspectRatio;nt.console.assert(bt,"[TileSource.getTileAtPoint] must be called with a valid point.");var xt=this.dimensions.x*this.getLevelScale(it),Et=st.x*xt,kt=st.y*xt,Lt=Math.floor(Et/this.getTileWidth(it)),Pt=Math.floor(kt/this.getTileHeight(it));st.x>=1&&(Lt=this.getNumTiles(it).x-1);var Rt=1e-15;return st.y>=1/this.aspectRatio-Rt&&(Pt=this.getNumTiles(it).y-1),new nt.Point(Lt,Pt)},getTileBounds:function(it,st,bt,xt){var Et=this.dimensions.times(this.getLevelScale(it)),kt=this.getTileWidth(it),Lt=this.getTileHeight(it),Pt=st===0?0:kt*st-this.tileOverlap,Rt=bt===0?0:Lt*bt-this.tileOverlap,Dt=kt+(st===0?1:2)*this.tileOverlap,Bt=Lt+(bt===0?1:2)*this.tileOverlap,Ft=1/Et.x;return Dt=Math.min(Dt,Et.x-Pt),Bt=Math.min(Bt,Et.y-Rt),xt?new nt.Rect(0,0,Dt,Bt):new nt.Rect(Pt*Ft,Rt*Ft,Dt*Ft,Bt*Ft)},getImageInfo:function(it){var st=this,bt,xt,Et,kt,Lt,Pt,Rt;it&&(Lt=it.split("/"),Pt=Lt[Lt.length-1],Rt=Pt.lastIndexOf("."),Rt>-1&&(Lt[Lt.length-1]=Pt.slice(0,Rt))),xt=function(Dt){typeof Dt=="string"&&(Dt=nt.parseXml(Dt));var Bt=nt.TileSource.determineType(st,Dt,it);if(!Bt){st.raiseEvent("open-failed",{message:"Unable to load TileSource",source:it});return}kt=Bt.prototype.configure.apply(st,[Dt,it]),kt.ajaxWithCredentials===void 0&&(kt.ajaxWithCredentials=st.ajaxWithCredentials),Et=new Bt(kt),st.ready=!0,st.raiseEvent("ready",{tileSource:Et})},it.match(/\.js$/)?(bt=it.split("/").pop().replace(".js",""),nt.jsonp({url:it,async:!1,callbackName:bt,callback:xt})):nt.makeAjaxRequest({url:it,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(Dt){var Bt=rt(Dt);xt(Bt)},error:function(Dt,Bt){var Ft;try{Ft="HTTP "+Dt.status+" attempting to load TileSource"}catch{var Yt;typeof Bt>"u"||!Bt.toString?Yt="Unknown error":Yt=Bt.toString(),Ft=Yt+" attempting to load TileSource"}st.raiseEvent("open-failed",{message:Ft,source:it})}})},supports:function(it,st){return!1},configure:function(it,st){throw new Error("Method not implemented.")},getTileUrl:function(it,st,bt){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(it,st,bt){return{}},tileExists:function(it,st,bt){var xt=this.getNumTiles(it);return it>=this.minLevel&&it<=this.maxLevel&&st>=0&&bt>=0&&st<xt.x&&bt<xt.y}},nt.extend(!0,nt.TileSource.prototype,nt.EventSource.prototype);function rt(it){var st=it.responseText,bt=it.status,xt,Et;if(it){if(it.status!==200&&it.status!==0)throw bt=it.status,xt=bt==404?"Not Found":it.statusText,new Error(nt.getString("Errors.Status",bt,xt))}else throw new Error(nt.getString("Errors.Security"));if(st.match(/\s*<.*/))try{Et=it.responseXML&&it.responseXML.documentElement?it.responseXML:nt.parseXml(st)}catch{Et=it.responseText}else if(st.match(/\s*[\{\[].*/))try{Et=nt.parseJSON(st)}catch{Et=st}else Et=st;return Et}nt.TileSource.determineType=function(it,st,bt){var xt;for(xt in OpenSeadragon)if(xt.match(/.+TileSource$/)&&nt.isFunction(OpenSeadragon[xt])&&nt.isFunction(OpenSeadragon[xt].prototype.supports)&&OpenSeadragon[xt].prototype.supports.call(it,st,bt))return OpenSeadragon[xt];nt.console.error("No TileSource was able to open %s %s",bt,st)}}(OpenSeadragon),function(nt){nt.DziTileSource=function(st,bt,xt,Et,kt,Lt,Pt,Rt,Dt){var Bt,Ft,Yt,Zt;if(nt.isPlainObject(st)?Zt=st:Zt={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=Zt.tilesUrl,this.fileFormat=Zt.fileFormat,this.displayRects=Zt.displayRects,this.displayRects)for(Bt=this.displayRects.length-1;Bt>=0;Bt--)for(Ft=this.displayRects[Bt],Yt=Ft.minLevel;Yt<=Ft.maxLevel;Yt++)this._levelRects[Yt]||(this._levelRects[Yt]=[]),this._levelRects[Yt].push(Ft);nt.TileSource.apply(this,[Zt])},nt.extend(nt.DziTileSource.prototype,nt.TileSource.prototype,{supports:function(st,bt){var xt;return st.Image?xt=st.Image.xmlns:st.documentElement&&(st.documentElement.localName=="Image"||st.documentElement.tagName=="Image")&&(xt=st.documentElement.namespaceURI),xt=(xt||"").toLowerCase(),xt.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||xt.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(st,bt){var xt;return nt.isPlainObject(st)?xt=it(this,st):xt=rt(this,st),bt&&!xt.tilesUrl&&(xt.tilesUrl=bt.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),bt.search(/\.(dzi|xml|js)\?/)!=-1?xt.queryParams=bt.match(/\?.*/):xt.queryParams=""),xt},getTileUrl:function(st,bt,xt){return[this.tilesUrl,st,"/",bt,"_",xt,".",this.fileFormat,this.queryParams].join("")},tileExists:function(st,bt,xt){var Et=this._levelRects[st],kt,Lt,Pt,Rt,Dt,Bt,Ft;if(this.minLevel&&st<this.minLevel||this.maxLevel&&st>this.maxLevel)return!1;if(!Et||!Et.length)return!0;for(Ft=Et.length-1;Ft>=0;Ft--)if(kt=Et[Ft],!(st<kt.minLevel||st>kt.maxLevel)&&(Lt=this.getLevelScale(st),Pt=kt.x*Lt,Rt=kt.y*Lt,Dt=Pt+kt.width*Lt,Bt=Rt+kt.height*Lt,Pt=Math.floor(Pt/this._tileWidth),Rt=Math.floor(Rt/this._tileWidth),Dt=Math.ceil(Dt/this._tileWidth),Bt=Math.ceil(Bt/this._tileWidth),Pt<=bt&&bt<Dt&&Rt<=xt&&xt<Bt))return!0;return!1}});function rt(st,bt){if(!bt||!bt.documentElement)throw new Error(nt.getString("Errors.Xml"));var xt=bt.documentElement,Et=xt.localName||xt.tagName,kt=bt.documentElement.namespaceURI,Lt=null,Pt=[],Rt,Dt,Bt,Ft,Yt;if(Et=="Image")try{if(Ft=xt.getElementsByTagName("Size")[0],Ft===void 0&&(Ft=xt.getElementsByTagNameNS(kt,"Size")[0]),Lt={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:xt.getAttribute("Url"),Format:xt.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(xt.getAttribute("Overlap"),10),TileSize:parseInt(xt.getAttribute("TileSize"),10),Size:{Height:parseInt(Ft.getAttribute("Height"),10),Width:parseInt(Ft.getAttribute("Width"),10)}}},!nt.imageFormatSupported(Lt.Image.Format))throw new Error(nt.getString("Errors.ImageFormat",Lt.Image.Format.toUpperCase()));for(Rt=xt.getElementsByTagName("DisplayRect"),Rt===void 0&&(Rt=xt.getElementsByTagNameNS(kt,"DisplayRect")[0]),Yt=0;Yt<Rt.length;Yt++)Dt=Rt[Yt],Bt=Dt.getElementsByTagName("Rect")[0],Bt===void 0&&(Bt=Dt.getElementsByTagNameNS(kt,"Rect")[0]),Pt.push({Rect:{X:parseInt(Bt.getAttribute("X"),10),Y:parseInt(Bt.getAttribute("Y"),10),Width:parseInt(Bt.getAttribute("Width"),10),Height:parseInt(Bt.getAttribute("Height"),10),MinLevel:parseInt(Dt.getAttribute("MinLevel"),10),MaxLevel:parseInt(Dt.getAttribute("MaxLevel"),10)}});return Pt.length&&(Lt.Image.DisplayRect=Pt),it(st,Lt)}catch(Qt){throw Qt instanceof Error?Qt:new Error(nt.getString("Errors.Dzi"))}else{if(Et=="Collection")throw new Error(nt.getString("Errors.Dzc"));if(Et=="Error"){var Zt=xt.getElementsByTagName("Message")[0],Wt=Zt.firstChild.nodeValue;throw new Error(Wt)}}throw new Error(nt.getString("Errors.Dzi"))}function it(st,bt){var xt=bt.Image,Et=xt.Url,kt=xt.Format,Lt=xt.Size,Pt=xt.DisplayRect||[],Rt=parseInt(Lt.Width,10),Dt=parseInt(Lt.Height,10),Bt=parseInt(xt.TileSize,10),Ft=parseInt(xt.Overlap,10),Yt=[],Zt,Wt;for(Wt=0;Wt<Pt.length;Wt++)Zt=Pt[Wt].Rect,Yt.push(new nt.DisplayRect(parseInt(Zt.X,10),parseInt(Zt.Y,10),parseInt(Zt.Width,10),parseInt(Zt.Height,10),parseInt(Zt.MinLevel,10),parseInt(Zt.MaxLevel,10)));return nt.extend(!0,{width:Rt,height:Dt,tileSize:Bt,tileOverlap:Ft,minLevel:null,maxLevel:null,tilesUrl:Et,fileFormat:kt,displayRects:Yt},bt)}}(OpenSeadragon),function(nt){nt.IIIFTileSource=function(xt){if(nt.extend(!0,this,xt),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(xt.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=xt.version,this.tile_width&&this.tile_height)xt.tileWidth=this.tile_width,xt.tileHeight=this.tile_height;else if(this.tile_width)xt.tileSize=this.tile_width;else if(this.tile_height)xt.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)xt.tileWidth=this.tiles[0].width,xt.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var Et=0;Et<this.tiles.length;Et++)for(var kt=0;kt<this.tiles[Et].scaleFactors.length;kt++){var Lt=this.tiles[Et].scaleFactors[kt];this.scale_factors.push(Lt),xt.tileSizePerScaleFactor[Lt]={width:this.tiles[Et].width,height:this.tiles[Et].height||this.tiles[Et].width}}}else if(rt(xt)){for(var Pt=Math.min(this.height,this.width),Rt=[256,512,1024],Dt=[],Bt=0;Bt<Rt.length;Bt++)Rt[Bt]<=Pt&&Dt.push(Rt[Bt]);Dt.length>0?xt.tileSize=Math.max.apply(null,Dt):xt.tileSize=Pt}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,xt.levels=it(this),nt.extend(!0,xt,{width:xt.levels[xt.levels.length-1].width,height:xt.levels[xt.levels.length-1].height,tileSize:Math.max(xt.height,xt.width),tileOverlap:0,minLevel:0,maxLevel:xt.levels.length-1}),this.levels=xt.levels):nt.console.error("Nothing in the info.json to construct image pyramids from");if(!xt.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)xt.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var Ft=Math.max.apply(null,this.scale_factors);xt.maxLevel=Math.round(Math.log(Ft)*Math.LOG2E)}nt.TileSource.apply(this,[xt])},nt.extend(nt.IIIFTileSource.prototype,nt.TileSource.prototype,{supports:function(xt,Et){return xt.protocol&&xt.protocol=="http://iiif.io/api/image"||xt["@context"]&&(xt["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||xt["@context"]=="http://iiif.io/api/image/1/context.json")||xt.profile&&xt.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||xt.identifier&&xt.width&&xt.height?!0:!!(xt.documentElement&&xt.documentElement.tagName=="info"&&xt.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(xt,Et){if(nt.isPlainObject(xt)){if(!xt["@context"])xt["@context"]="http://iiif.io/api/image/1.0/context.json",xt["@id"]=Et.replace("/info.json",""),xt.version=1;else{var Lt=xt["@context"];if(Array.isArray(Lt)){for(var Pt=0;Pt<Lt.length;Pt++)if(typeof Lt[Pt]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(Lt[Pt])||Lt[Pt]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){Lt=Lt[Pt];break}}switch(Lt){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":xt.version=1;break;case"http://iiif.io/api/image/2/context.json":xt.version=2;break;case"http://iiif.io/api/image/3/context.json":xt.version=3;break;default:nt.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!xt["@id"]&&xt.id&&(xt["@id"]=xt.id),xt.preferredFormats){for(var Rt=0;Rt<xt.preferredFormats.length;Rt++)if(OpenSeadragon.imageFormatSupported(xt.preferredFormats[Rt])){xt.tileFormat=xt.preferredFormats[Rt];break}}return xt}else{var kt=st(xt);return kt["@context"]="http://iiif.io/api/image/1.0/context.json",kt["@id"]=Et.replace("/info.xml",""),kt.version=1,kt}},getTileWidth:function(xt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileWidth.call(this,xt);var Et=Math.pow(2,this.maxLevel-xt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Et]?this.tileSizePerScaleFactor[Et].width:this._tileWidth},getTileHeight:function(xt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileHeight.call(this,xt);var Et=Math.pow(2,this.maxLevel-xt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Et]?this.tileSizePerScaleFactor[Et].height:this._tileHeight},getLevelScale:function(xt){if(this.emulateLegacyImagePyramid){var Et=NaN;return this.levels.length>0&&xt>=this.minLevel&&xt<=this.maxLevel&&(Et=this.levels[xt].width/this.levels[this.maxLevel].width),Et}return nt.TileSource.prototype.getLevelScale.call(this,xt)},getNumTiles:function(xt){if(this.emulateLegacyImagePyramid){var Et=this.getLevelScale(xt);return Et?new nt.Point(1,1):new nt.Point(0,0)}return nt.TileSource.prototype.getNumTiles.call(this,xt)},getTileAtPoint:function(xt,Et){return this.emulateLegacyImagePyramid?new nt.Point(0,0):nt.TileSource.prototype.getTileAtPoint.call(this,xt,Et)},getTileUrl:function(xt,Et,kt){if(this.emulateLegacyImagePyramid){var Lt=null;return this.levels.length>0&&xt>=this.minLevel&&xt<=this.maxLevel&&(Lt=this.levels[xt].url),Lt}var Pt="0",Rt=Math.pow(.5,this.maxLevel-xt),Dt=Math.ceil(this.width*Rt),Bt=Math.ceil(this.height*Rt),Ft,Yt,Zt,Wt,Qt,Kt,on,nn,mn,gn,Tn,An,kn,Mn;return Ft=this.getTileWidth(xt),Yt=this.getTileHeight(xt),Zt=Math.ceil(Ft/Rt),Wt=Math.ceil(Yt/Rt),this.version===1?kn="native."+this.tileFormat:kn="default."+this.tileFormat,Dt<Ft&&Bt<Yt?(this.version===2&&Dt===this.width||this.version===3&&Dt===this.width&&Bt===this.height?gn="max":this.version===3?gn=Dt+","+Bt:gn=Dt+",",Qt="full"):(Kt=Et*Zt,on=kt*Wt,nn=Math.min(Zt,this.width-Kt),mn=Math.min(Wt,this.height-on),Et===0&&kt===0&&nn===this.width&&mn===this.height?Qt="full":Qt=[Kt,on,nn,mn].join(","),Tn=Math.ceil(nn*Rt),An=Math.ceil(mn*Rt),this.version===2&&Tn===this.width||this.version===3&&Tn===this.width&&An===this.height?gn="max":this.version===3?gn=Tn+","+An:gn=Tn+","),Mn=[this["@id"],Qt,gn,Pt,kn].join("/"),Mn},__testonly__:{canBeTiled:rt,constructLevels:it}});function rt(xt){var Et=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],kt=Array.isArray(xt.profile)?xt.profile[0]:xt.profile,Lt=Et.indexOf(kt)!==-1,Pt=!1;return xt.version===2&&xt.profile.length>1&&xt.profile[1].supports&&(Pt=xt.profile[1].supports.indexOf("sizeByW")!==-1),xt.version===3&&xt.extraFeatures&&(Pt=xt.extraFeatures.indexOf("sizeByWh")!==-1),!Lt||Pt}function it(xt){for(var Et=[],kt=0;kt<xt.sizes.length;kt++)Et.push({url:xt["@id"]+"/full/"+xt.sizes[kt].width+","+(xt.version===3?xt.sizes[kt].height:"")+"/0/default."+xt.tileFormat,width:xt.sizes[kt].width,height:xt.sizes[kt].height});return Et.sort(function(Lt,Pt){return Lt.width-Pt.width})}function st(xt){if(!xt||!xt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Et=xt.documentElement,kt=Et.tagName,Lt=null;if(kt=="info")try{return Lt={},bt(Et,Lt),Lt}catch(Pt){throw Pt instanceof Error?Pt:new Error(nt.getString("Errors.IIIF"))}throw new Error(nt.getString("Errors.IIIF"))}function bt(xt,Et,kt){var Lt,Pt;if(xt.nodeType==3&&kt)Pt=xt.nodeValue.trim(),Pt.match(/^\d*$/)&&(Pt=Number(Pt)),Et[kt]?(nt.isArray(Et[kt])||(Et[kt]=[Et[kt]]),Et[kt].push(Pt)):Et[kt]=Pt;else if(xt.nodeType==1)for(Lt=0;Lt<xt.childNodes.length;Lt++)bt(xt.childNodes[Lt],Et,xt.nodeName)}}(OpenSeadragon),function(nt){nt.OsmTileSource=function(rt,it,st,bt,xt){var Et;nt.isPlainObject(rt)?Et=rt:Et={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!Et.width||!Et.height)&&(Et.width=65572864,Et.height=65572864),Et.tileSize||(Et.tileSize=256,Et.tileOverlap=0),Et.tilesUrl||(Et.tilesUrl="http://tile.openstreetmap.org/"),Et.minLevel=8,nt.TileSource.apply(this,[Et])},nt.extend(nt.OsmTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="openstreetmaps"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){return this.tilesUrl+(rt-8)+"/"+it+"/"+st+".png"}})}(OpenSeadragon),function(nt){nt.TmsTileSource=function(rt,it,st,bt,xt){var Et;nt.isPlainObject(rt)?Et=rt:Et={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var kt=Math.ceil(Et.width/256)*256,Lt=Math.ceil(Et.height/256)*256,Pt;kt>Lt?Pt=kt/256:Pt=Lt/256,Et.maxLevel=Math.ceil(Math.log(Pt)/Math.log(2))-1,Et.tileSize=256,Et.width=kt,Et.height=Lt,nt.TileSource.apply(this,[Et])},nt.extend(nt.TmsTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="tiledmapservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){var bt=this.getNumTiles(rt).y-1;return this.tilesUrl+rt+"/"+it+"/"+(bt-st)+".png"}})}(OpenSeadragon),function(nt){nt.ZoomifyTileSource=function(rt){rt.tileSize=256;var it={x:rt.width,y:rt.height};for(rt.imageSizes=[{x:rt.width,y:rt.height}],rt.gridSize=[this._getGridSize(rt.width,rt.height,rt.tileSize)];parseInt(it.x,10)>rt.tileSize||parseInt(it.y,10)>rt.tileSize;)it.x=Math.floor(it.x/2),it.y=Math.floor(it.y/2),rt.imageSizes.push({x:it.x,y:it.y}),rt.gridSize.push(this._getGridSize(it.x,it.y,rt.tileSize));rt.imageSizes.reverse(),rt.gridSize.reverse(),rt.minLevel=0,rt.maxLevel=rt.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[rt])},nt.extend(nt.ZoomifyTileSource.prototype,nt.TileSource.prototype,{_getGridSize:function(rt,it,st){return{x:Math.ceil(rt/st),y:Math.ceil(it/st)}},_calculateAbsoluteTileNumber:function(rt,it,st){for(var bt=0,xt={},Et=0;Et<rt;Et++)xt=this.gridSize[Et],bt+=xt.x*xt.y;return xt=this.gridSize[rt],bt+=xt.x*st+it,bt},supports:function(rt,it){return rt.type&&rt.type=="zoomifytileservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){var bt=0,xt=this._calculateAbsoluteTileNumber(rt,it,st);return bt=Math.floor(xt/256),this.tilesUrl+"TileGroup"+bt+"/"+rt+"-"+it+"-"+st+".jpg"}})}(OpenSeadragon),function(nt){nt.LegacyTileSource=function(bt){var xt,Et,kt;nt.isArray(bt)&&(xt={type:"legacy-image-pyramid",levels:bt}),xt.levels=rt(xt.levels),xt.levels.length>0?(Et=xt.levels[xt.levels.length-1].width,kt=xt.levels[xt.levels.length-1].height):(Et=0,kt=0,nt.console.error("No supported image formats found")),nt.extend(!0,xt,{width:Et,height:kt,tileSize:Math.max(kt,Et),tileOverlap:0,minLevel:0,maxLevel:xt.levels.length>0?xt.levels.length-1:0}),nt.TileSource.apply(this,[xt]),this.levels=xt.levels},nt.extend(nt.LegacyTileSource.prototype,nt.TileSource.prototype,{supports:function(bt,xt){return bt.type&&bt.type=="legacy-image-pyramid"||bt.documentElement&&bt.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(bt,xt){var Et;return nt.isPlainObject(bt)?Et=st(this,bt):Et=it(this,bt),Et},getLevelScale:function(bt){var xt=NaN;return this.levels.length>0&&bt>=this.minLevel&&bt<=this.maxLevel&&(xt=this.levels[bt].width/this.levels[this.maxLevel].width),xt},getNumTiles:function(bt){var xt=this.getLevelScale(bt);return xt?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(bt,xt,Et){var kt=null;return this.levels.length>0&&bt>=this.minLevel&&bt<=this.maxLevel&&(kt=this.levels[bt].url),kt}});function rt(bt){var xt=[],Et,kt;for(kt=0;kt<bt.length;kt++)Et=bt[kt],Et.height&&Et.width&&Et.url?xt.push({url:Et.url,width:Number(Et.width),height:Number(Et.height)}):nt.console.error("Unsupported image format: %s",Et.url?Et.url:"<no URL>");return xt.sort(function(Lt,Pt){return Lt.height-Pt.height})}function it(bt,xt){if(!xt||!xt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Et=xt.documentElement,kt=Et.tagName,Lt=null,Pt=[],Rt,Dt;if(kt=="image")try{for(Lt={type:Et.getAttribute("type"),levels:[]},Pt=Et.getElementsByTagName("level"),Dt=0;Dt<Pt.length;Dt++)Rt=Pt[Dt],Lt.levels.push({url:Rt.getAttribute("url"),width:parseInt(Rt.getAttribute("width"),10),height:parseInt(Rt.getAttribute("height"),10)});return st(bt,Lt)}catch(Bt){throw Bt instanceof Error?Bt:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(kt=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(kt=="error")throw new Error("Error: "+xt)}throw new Error("Unknown element "+kt)}function st(bt,xt){return xt.levels}}(OpenSeadragon),function(nt){nt.ImageTileSource=function(rt){rt=nt.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},rt),nt.TileSource.apply(this,[rt])},nt.extend(nt.ImageTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type==="image"},configure:function(rt,it){return rt},getImageInfo:function(rt){var it=this._image=new Image,st=this;this.crossOriginPolicy&&(it.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(it.useCredentials=this.ajaxWithCredentials),nt.addEvent(it,"load",function(){st.width=Object.prototype.hasOwnProperty.call(it,"naturalWidth")?it.naturalWidth:it.width,st.height=Object.prototype.hasOwnProperty.call(it,"naturalHeight")?it.naturalHeight:it.height,st.aspectRatio=st.width/st.height,st.dimensions=new nt.Point(st.width,st.height),st._tileWidth=st.width,st._tileHeight=st.height,st.tileOverlap=0,st.minLevel=0,st.levels=st._buildLevels(),st.maxLevel=st.levels.length-1,st.ready=!0,st.raiseEvent("ready",{tileSource:st})}),nt.addEvent(it,"error",function(){st.raiseEvent("open-failed",{message:"Error loading image at "+rt,source:rt})}),it.src=rt},getLevelScale:function(rt){var it=NaN;return rt>=this.minLevel&&rt<=this.maxLevel&&(it=this.levels[rt].width/this.levels[this.maxLevel].width),it},getNumTiles:function(rt){var it=this.getLevelScale(rt);return it?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(rt,it,st){var bt=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(bt=this.levels[rt].url),bt},getContext2D:function(rt,it,st){var bt=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(bt=this.levels[rt].context2D),bt},_buildLevels:function(){var rt=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!nt.supportsCanvas||!this.useCanvas)return delete this._image,rt;var it=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,st=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,bt=document.createElement("canvas"),xt=bt.getContext("2d");if(bt.width=it,bt.height=st,xt.drawImage(this._image,0,0,it,st),rt[0].context2D=xt,delete this._image,nt.isCanvasTainted(bt))return rt;for(;it>=2&&st>=2;){it=Math.floor(it/2),st=Math.floor(st/2);var Et=document.createElement("canvas"),kt=Et.getContext("2d");Et.width=it,Et.height=st,kt.drawImage(bt,0,0,it,st),rt.splice(0,0,{context2D:kt,width:it,height:st}),bt=Et,xt=kt}return rt}})}(OpenSeadragon),function(nt){nt.TileSourceCollection=function(rt,it,st,bt){nt.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(nt){nt.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},nt.Button=function(kt){var Lt=this;nt.EventSource.call(this),nt.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},kt),this.element=kt.element||nt.makeNeutralElement("div"),kt.element||(this.imgRest=nt.makeTransparentImage(this.srcRest),this.imgGroup=nt.makeTransparentImage(this.srcGroup),this.imgHover=nt.makeTransparentImage(this.srcHover),this.imgDown=nt.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",nt.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",nt.Browser.vendor==nt.BROWSERS.FIREFOX&&nt.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=nt.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Pt){Pt.insideElementPressed?(xt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("enter",{originalEvent:Pt.originalEvent})):Pt.buttonDownAny||xt(Lt,nt.ButtonState.HOVER)},focusHandler:function(Pt){this.enterHandler(Pt),Lt.raiseEvent("focus",{originalEvent:Pt.originalEvent})},exitHandler:function(Pt){Et(Lt,nt.ButtonState.GROUP),Pt.insideElementPressed&&Lt.raiseEvent("exit",{originalEvent:Pt.originalEvent})},blurHandler:function(Pt){this.exitHandler(Pt),Lt.raiseEvent("blur",{originalEvent:Pt.originalEvent})},pressHandler:function(Pt){xt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("press",{originalEvent:Pt.originalEvent})},releaseHandler:function(Pt){Pt.insideElementPressed&&Pt.insideElementReleased?(Et(Lt,nt.ButtonState.HOVER),Lt.raiseEvent("release",{originalEvent:Pt.originalEvent})):Pt.insideElementPressed?Et(Lt,nt.ButtonState.GROUP):xt(Lt,nt.ButtonState.HOVER)},clickHandler:function(Pt){Pt.quick&&Lt.raiseEvent("click",{originalEvent:Pt.originalEvent})},keyHandler:function(Pt){return Pt.keyCode===13?(Lt.raiseEvent("click",{originalEvent:Pt.originalEvent}),Lt.raiseEvent("release",{originalEvent:Pt.originalEvent}),!1):!0}}),Et(this,nt.ButtonState.REST)},nt.extend(nt.Button.prototype,nt.EventSource.prototype,{notifyGroupEnter:function(){xt(this,nt.ButtonState.GROUP)},notifyGroupExit:function(){Et(this,nt.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,nt.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,nt.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function rt(kt){nt.requestAnimationFrame(function(){it(kt)})}function it(kt){var Lt,Pt,Rt;kt.shouldFade&&(Lt=nt.now(),Pt=Lt-kt.fadeBeginTime,Rt=1-Pt/kt.fadeLength,Rt=Math.min(1,Rt),Rt=Math.max(0,Rt),kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,Rt,!0),Rt>0&&rt(kt))}function st(kt){kt.shouldFade=!0,kt.fadeBeginTime=nt.now()+kt.fadeDelay,window.setTimeout(function(){rt(kt)},kt.fadeDelay)}function bt(kt){kt.shouldFade=!1,kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,1,!0)}function xt(kt,Lt){kt.element.disabled||(Lt>=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.REST&&(bt(kt),kt.currentState=nt.ButtonState.GROUP),Lt>=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.GROUP&&(kt.imgHover&&(kt.imgHover.style.visibility=""),kt.currentState=nt.ButtonState.HOVER),Lt>=nt.ButtonState.DOWN&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgDown&&(kt.imgDown.style.visibility=""),kt.currentState=nt.ButtonState.DOWN))}function Et(kt,Lt){kt.element.disabled||(Lt<=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.DOWN&&(kt.imgDown&&(kt.imgDown.style.visibility="hidden"),kt.currentState=nt.ButtonState.HOVER),Lt<=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgHover&&(kt.imgHover.style.visibility="hidden"),kt.currentState=nt.ButtonState.GROUP),Lt<=nt.ButtonState.REST&&kt.currentState==nt.ButtonState.GROUP&&(st(kt),kt.currentState=nt.ButtonState.REST))}}(OpenSeadragon),function(nt){nt.ButtonGroup=function(rt){nt.extend(!0,this,{buttons:[],clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},rt);var it=this.buttons.concat([]),st=this,bt;if(this.element=rt.element||nt.makeNeutralElement("div"),!rt.group)for(this.element.style.display="inline-block",bt=0;bt<it.length;bt++)this.element.appendChild(it[bt].element);nt.setElementTouchActionNone(this.element),this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(xt){var Et;for(Et=0;Et<st.buttons.length;Et++)st.buttons[Et].notifyGroupEnter()},exitHandler:function(xt){var Et;if(!xt.insideElementPressed)for(Et=0;Et<st.buttons.length;Et++)st.buttons[Et].notifyGroupExit()}})},nt.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(nt){nt.Rect=function(rt,it,st,bt,xt){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0,this.width=typeof st=="number"?st:0,this.height=typeof bt=="number"?bt:0,this.degrees=typeof xt=="number"?xt:0,this.degrees=nt.positiveModulo(this.degrees,360);var Et,kt;this.degrees>=270?(Et=this.getTopRight(),this.x=Et.x,this.y=Et.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=270):this.degrees>=180?(Et=this.getBottomRight(),this.x=Et.x,this.y=Et.y,this.degrees-=180):this.degrees>=90&&(Et=this.getBottomLeft(),this.x=Et.x,this.y=Et.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=90)},nt.Rect.fromSummits=function(rt,it,st){var bt=rt.distanceTo(it),xt=rt.distanceTo(st),Et=it.minus(rt),kt=Math.atan(Et.y/Et.x);return Et.x<0?kt+=Math.PI:Et.y<0&&(kt+=2*Math.PI),new nt.Rect(rt.x,rt.y,bt,xt,kt/Math.PI*180)},nt.Rect.prototype={clone:function(){return new nt.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new nt.Point(this.x,this.y)},getBottomRight:function(){return new nt.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new nt.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new nt.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new nt.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new nt.Point(this.width,this.height)},equals:function(rt){return rt instanceof nt.Rect&&this.x===rt.x&&this.y===rt.y&&this.width===rt.width&&this.height===rt.height&&this.degrees===rt.degrees},times:function(rt){return new nt.Rect(this.x*rt,this.y*rt,this.width*rt,this.height*rt,this.degrees)},translate:function(rt){return new nt.Rect(this.x+rt.x,this.y+rt.y,this.width,this.height,this.degrees)},union:function(rt){var it=this.getBoundingBox(),st=rt.getBoundingBox(),bt=Math.min(it.x,st.x),xt=Math.min(it.y,st.y),Et=Math.max(it.x+it.width,st.x+st.width),kt=Math.max(it.y+it.height,st.y+st.height);return new nt.Rect(bt,xt,Et-bt,kt-xt)},intersection:function(rt){var it=1e-10,st=[],bt=this.getTopLeft();rt.containsPoint(bt,it)&&st.push(bt);var xt=this.getTopRight();rt.containsPoint(xt,it)&&st.push(xt);var Et=this.getBottomLeft();rt.containsPoint(Et,it)&&st.push(Et);var kt=this.getBottomRight();rt.containsPoint(kt,it)&&st.push(kt);var Lt=rt.getTopLeft();this.containsPoint(Lt,it)&&st.push(Lt);var Pt=rt.getTopRight();this.containsPoint(Pt,it)&&st.push(Pt);var Rt=rt.getBottomLeft();this.containsPoint(Rt,it)&&st.push(Rt);var Dt=rt.getBottomRight();this.containsPoint(Dt,it)&&st.push(Dt);for(var Bt=this._getSegments(),Ft=rt._getSegments(),Yt=0;Yt<Bt.length;Yt++)for(var Zt=Bt[Yt],Wt=0;Wt<Ft.length;Wt++){var Qt=Ft[Wt],Kt=on(Zt[0],Zt[1],Qt[0],Qt[1]);Kt&&st.push(Kt)}function on(Mn,$n,cn,Sn){var an=$n.minus(Mn),jn=Sn.minus(cn),hn=-jn.x*an.y+an.x*jn.y;if(hn===0)return null;var zn=(an.x*(Mn.y-cn.y)-an.y*(Mn.x-cn.x))/hn,ir=(jn.x*(Mn.y-cn.y)-jn.y*(Mn.x-cn.x))/hn;return-it<=zn&&zn<=1-it&&-it<=ir&&ir<=1-it?new nt.Point(Mn.x+ir*an.x,Mn.y+ir*an.y):null}if(st.length===0)return null;for(var nn=st[0].x,mn=st[0].x,gn=st[0].y,Tn=st[0].y,An=1;An<st.length;An++){var kn=st[An];kn.x<nn&&(nn=kn.x),kn.x>mn&&(mn=kn.x),kn.y<gn&&(gn=kn.y),kn.y>Tn&&(Tn=kn.y)}return new nt.Rect(nn,gn,mn-nn,Tn-gn)},_getSegments:function(){var rt=this.getTopLeft(),it=this.getTopRight(),st=this.getBottomLeft(),bt=this.getBottomRight();return[[rt,it],[it,bt],[bt,st],[st,rt]]},rotate:function(rt,it){if(rt=nt.positiveModulo(rt,360),rt===0)return this.clone();it=it||this.getCenter();var st=this.getTopLeft().rotate(rt,it),bt=this.getTopRight().rotate(rt,it),xt=bt.minus(st);xt=xt.apply(function(kt){var Lt=1e-15;return Math.abs(kt)<Lt?0:kt});var Et=Math.atan(xt.y/xt.x);return xt.x<0?Et+=Math.PI:xt.y<0&&(Et+=2*Math.PI),new nt.Rect(st.x,st.y,this.width,this.height,Et/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var rt=this.getTopLeft(),it=this.getTopRight(),st=this.getBottomLeft(),bt=this.getBottomRight(),xt=Math.min(rt.x,it.x,st.x,bt.x),Et=Math.max(rt.x,it.x,st.x,bt.x),kt=Math.min(rt.y,it.y,st.y,bt.y),Lt=Math.max(rt.y,it.y,st.y,bt.y);return new nt.Rect(xt,kt,Et-xt,Lt-kt)},getIntegerBoundingBox:function(){var rt=this.getBoundingBox(),it=Math.floor(rt.x),st=Math.floor(rt.y),bt=Math.ceil(rt.width+rt.x-it),xt=Math.ceil(rt.height+rt.y-st);return new nt.Rect(it,st,bt,xt)},containsPoint:function(rt,it){it=it||0;var st=this.getTopLeft(),bt=this.getTopRight(),xt=this.getBottomLeft(),Et=bt.minus(st),kt=xt.minus(st);return(rt.x-st.x)*Et.x+(rt.y-st.y)*Et.y>=-it&&(rt.x-bt.x)*Et.x+(rt.y-bt.y)*Et.y<=it&&(rt.x-st.x)*kt.x+(rt.y-st.y)*kt.y>=-it&&(rt.x-xt.x)*kt.x+(rt.y-xt.y)*kt.y<=it},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(nt){var rt={};nt.ReferenceStrip=function(Pt){var Rt=this,Dt=Pt.viewer,Bt=nt.getElementSize(Dt.element),Ft,Yt,Zt;for(Pt.id||(Pt.id="referencestrip-"+nt.now(),this.element=nt.makeNeutralElement("div"),this.element.id=Pt.id,this.element.className="referencestrip"),Pt=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.referenceStripSizeRatio,position:nt.DEFAULT_SETTINGS.referenceStripPosition,scroll:nt.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold},Pt,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),nt.extend(this,Pt),rt[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,Yt=this.element.style,Yt.marginTop="0px",Yt.marginRight="0px",Yt.marginBottom="0px",Yt.marginLeft="0px",Yt.left="0px",Yt.bottom="0px",Yt.border="0px",Yt.background="#000",Yt.position="relative",nt.setElementTouchActionNone(this.element),nt.setElementOpacity(this.element,.8),this.viewer=Dt,this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),scrollHandler:nt.delegate(this,st),enterHandler:nt.delegate(this,xt),exitHandler:nt.delegate(this,Et),keyDownHandler:nt.delegate(this,kt),keyHandler:nt.delegate(this,Lt)}),Pt.width&&Pt.height?(this.element.style.width=Pt.width+"px",this.element.style.height=Pt.height+"px",Dt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):Pt.scroll=="horizontal"?(this.element.style.width=Bt.x*Pt.sizeRatio*Dt.tileSources.length+12*Dt.tileSources.length+"px",this.element.style.height=Bt.y*Pt.sizeRatio+"px",Dt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=Bt.y*Pt.sizeRatio*Dt.tileSources.length+12*Dt.tileSources.length+"px",this.element.style.width=Bt.x*Pt.sizeRatio+"px",Dt.addControl(this.element,{anchor:nt.ControlAnchor.TOP_LEFT})),this.panelWidth=Bt.x*this.sizeRatio+8,this.panelHeight=Bt.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},Zt=0;Zt<Dt.tileSources.length;Zt++)Ft=nt.makeNeutralElement("div"),Ft.id=this.element.id+"-"+Zt,Ft.style.width=Rt.panelWidth+"px",Ft.style.height=Rt.panelHeight+"px",Ft.style.display="inline",Ft.style.float="left",Ft.style.cssFloat="left",Ft.style.styleFloat="left",Ft.style.padding="2px",nt.setElementTouchActionNone(Ft),Ft.innerTracker=new nt.MouseTracker({element:Ft,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(Wt){Wt.eventSource.dragging=nt.now()},releaseHandler:function(Wt){var Qt=Wt.eventSource,Kt=Qt.element.id,on=Number(Kt.split("-")[2]),nn=nt.now();Wt.insideElementPressed&&Wt.insideElementReleased&&Qt.dragging&&nn-Qt.dragging<Qt.clickTimeThreshold&&(Qt.dragging=null,Dt.goToPage(on))}}),this.element.appendChild(Ft),Ft.activePanel=!1,this.panels.push(Ft);bt(this,this.scroll=="vertical"?Bt.y:Bt.x,0),this.setFocus(0)},nt.extend(nt.ReferenceStrip.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{setFocus:function(Pt){var Rt=this.element.querySelector("#"+this.element.id+"-"+Pt),Dt=nt.getElementSize(this.viewer.canvas),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=-Number(this.element.style.marginLeft.replace("px","")),Zt=-Number(this.element.style.marginTop.replace("px","")),Wt;this.currentSelected!==Rt&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=Rt,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(Wt=Number(Pt)*(this.panelWidth+3),Wt>Yt+Dt.x-this.panelWidth?(Wt=Math.min(Wt,Bt-Dt.x),this.element.style.marginLeft=-Wt+"px",bt(this,Dt.x,-Wt)):Wt<Yt&&(Wt=Math.max(0,Wt-Dt.x/2),this.element.style.marginLeft=-Wt+"px",bt(this,Dt.x,-Wt))):(Wt=Number(Pt)*(this.panelHeight+3),Wt>Zt+Dt.y-this.panelHeight?(Wt=Math.min(Wt,Ft-Dt.y),this.element.style.marginTop=-Wt+"px",bt(this,Dt.y,-Wt)):Wt<Zt&&(Wt=Math.max(0,Wt-Dt.y/2),this.element.style.marginTop=-Wt+"px",bt(this,Dt.y,-Wt))),this.currentPage=Pt,xt.call(this,{eventSource:this.innerTracker}))},update:function(){return rt[this.id].animating?(nt.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var Pt in this.miniViewers)this.miniViewers[Pt].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function it(Pt){var Rt=Number(this.element.style.marginLeft.replace("px","")),Dt=Number(this.element.style.marginTop.replace("px","")),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=nt.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-Pt.delta.x>0?Rt>-(Bt-Yt.x)&&(this.element.style.marginLeft=Rt+Pt.delta.x*2+"px",bt(this,Yt.x,Rt+Pt.delta.x*2)):-Pt.delta.x<0&&Rt<0&&(this.element.style.marginLeft=Rt+Pt.delta.x*2+"px",bt(this,Yt.x,Rt+Pt.delta.x*2)):-Pt.delta.y>0?Dt>-(Ft-Yt.y)&&(this.element.style.marginTop=Dt+Pt.delta.y*2+"px",bt(this,Yt.y,Dt+Pt.delta.y*2)):-Pt.delta.y<0&&Dt<0&&(this.element.style.marginTop=Dt+Pt.delta.y*2+"px",bt(this,Yt.y,Dt+Pt.delta.y*2))),!1}function st(Pt){var Rt=Number(this.element.style.marginLeft.replace("px","")),Dt=Number(this.element.style.marginTop.replace("px","")),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=nt.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?Pt.scroll>0?Rt>-(Bt-Yt.x)&&(this.element.style.marginLeft=Rt-Pt.scroll*60+"px",bt(this,Yt.x,Rt-Pt.scroll*60)):Pt.scroll<0&&Rt<0&&(this.element.style.marginLeft=Rt-Pt.scroll*60+"px",bt(this,Yt.x,Rt-Pt.scroll*60)):Pt.scroll<0?Dt>Yt.y-Ft&&(this.element.style.marginTop=Dt+Pt.scroll*60+"px",bt(this,Yt.y,Dt+Pt.scroll*60)):Pt.scroll>0&&Dt<0&&(this.element.style.marginTop=Dt+Pt.scroll*60+"px",bt(this,Yt.y,Dt+Pt.scroll*60))),!1}function bt(Pt,Rt,Dt){var Bt,Ft,Yt,Zt,Wt,Qt,Kt;for(Pt.scroll=="horizontal"?Bt=Pt.panelWidth:Bt=Pt.panelHeight,Ft=Math.ceil(Rt/Bt)+5,Yt=Math.ceil((Math.abs(Dt)+Rt)/Bt)+1,Ft=Yt-Ft,Ft=Ft<0?0:Ft,Qt=Ft;Qt<Yt&&Qt<Pt.panels.length;Qt++)if(Kt=Pt.panels[Qt],!Kt.activePanel){var on,nn=Pt.viewer.tileSources[Qt];nn.referenceStripThumbnailUrl?on={type:"image",url:nn.referenceStripThumbnailUrl}:on=nn,Zt=new nt.Viewer({id:Kt.id,tileSources:[on],element:Kt,navigatorSizeRatio:Pt.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:Pt.viewer.loadTilesWithAjax,ajaxHeaders:Pt.viewer.ajaxHeaders,useCanvas:Pt.useCanvas}),Zt.displayRegion=nt.makeNeutralElement("div"),Zt.displayRegion.id=Kt.id+"-displayregion",Zt.displayRegion.className="displayregion",Wt=Zt.displayRegion.style,Wt.position="relative",Wt.top="0px",Wt.left="0px",Wt.fontSize="0px",Wt.overflow="hidden",Wt.float="left",Wt.cssFloat="left",Wt.styleFloat="left",Wt.zIndex=999999999,Wt.cursor="default",Wt.width=Pt.panelWidth-4+"px",Wt.height=Pt.panelHeight-4+"px",Zt.displayRegion.innerTracker=new nt.MouseTracker({element:Zt.displayRegion,startDisabled:!0}),Kt.getElementsByTagName("div")[0].appendChild(Zt.displayRegion),Pt.miniViewers[Kt.id]=Zt,Kt.activePanel=!0}}function xt(Pt){var Rt=Pt.eventSource.element;return this.scroll=="horizontal"?Rt.style.marginBottom="0px":Rt.style.marginLeft="0px",!1}function Et(Pt){var Rt=Pt.eventSource.element;return this.scroll=="horizontal"?Rt.style.marginBottom="-"+nt.getElementSize(Rt).y/2+"px":Rt.style.marginLeft="-"+nt.getElementSize(Rt).x/2+"px",!1}function kt(Pt){if(!Pt.preventDefaultAction&&!Pt.ctrl&&!Pt.alt&&!Pt.meta)switch(Pt.keyCode){case 38:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function Lt(Pt){if(!Pt.preventDefaultAction&&!Pt.ctrl&&!Pt.alt&&!Pt.meta)switch(Pt.keyCode){case 61:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(nt){nt.DisplayRect=function(rt,it,st,bt,xt,Et){nt.Rect.apply(this,[rt,it,st,bt]),this.minLevel=xt,this.maxLevel=Et},nt.extend(nt.DisplayRect.prototype,nt.Rect.prototype)}(OpenSeadragon),function(nt){nt.Spring=function(it){var st=arguments;typeof it!="object"&&(it={initial:st.length&&typeof st[0]=="number"?st[0]:void 0,springStiffness:st.length>1?st[1].springStiffness:5,animationTime:st.length>1?st[1].animationTime:1.5}),nt.console.assert(typeof it.springStiffness=="number"&&it.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),nt.console.assert(typeof it.animationTime=="number"&&it.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),it.exponential&&(this._exponential=!0,delete it.exponential),nt.extend(!0,this,it),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:nt.now()},nt.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},nt.Spring.prototype={resetTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=it,this.start.time=this.target.time=this.current.time=nt.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=it,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(it){this.start.value+=it,this.target.value+=it,this._exponential&&(nt.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(it){this._exponential=it,this._exponential&&(nt.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=nt.now();var it,st;this._exponential?(it=this.start._logValue,st=this.target._logValue):(it=this.start.value,st=this.target.value);var bt=this.current.time>=this.target.time?st:it+(st-it)*rt(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),xt=this.current.value;return this._exponential?this.current.value=Math.exp(bt):this.current.value=bt,xt!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function rt(it,st){return(1-Math.exp(it*-st))/(1-Math.exp(-it))}}(OpenSeadragon),function(nt){function rt(st){nt.extend(!0,this,{timeout:nt.DEFAULT_SETTINGS.timeout,jobId:null},st),this.image=null}rt.prototype={errorMsg:null,start:function(){var st=this,bt=this.abort;this.image=new Image,this.image.onload=function(){st.finish(!0)},this.image.onabort=this.image.onerror=function(){st.errorMsg="Image load aborted",st.finish(!1)},this.jobId=window.setTimeout(function(){st.errorMsg="Image load exceeded timeout ("+st.timeout+" ms)",st.finish(!1)},this.timeout),this.loadWithAjax?(this.request=nt.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(xt){var Et;try{Et=new window.Blob([xt.response])}catch(Rt){var kt=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(Rt.name==="TypeError"&&kt){var Lt=new kt;Lt.append(xt.response),Et=Lt.getBlob()}}Et.size===0&&(st.errorMsg="Empty image response.",st.finish(!1));var Pt=(window.URL||window.webkitURL).createObjectURL(Et);st.image.src=Pt},error:function(xt){st.errorMsg="Image load aborted - XHR error",st.finish(!1)}}),this.abort=function(){st.request.abort(),typeof bt=="function"&&bt()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(st){this.image.onload=this.image.onerror=this.image.onabort=null,st||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},nt.ImageLoader=function(st){nt.extend(!0,this,{jobLimit:nt.DEFAULT_SETTINGS.imageLoaderLimit,timeout:nt.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},st)},nt.ImageLoader.prototype={addJob:function(st){var bt=this,xt=function(Lt){it(bt,Lt,st.callback)},Et={src:st.src,loadWithAjax:st.loadWithAjax,ajaxHeaders:st.loadWithAjax?st.ajaxHeaders:null,crossOriginPolicy:st.crossOriginPolicy,ajaxWithCredentials:st.ajaxWithCredentials,callback:xt,abort:st.abort,timeout:this.timeout},kt=new rt(Et);!this.jobLimit||this.jobsInProgress<this.jobLimit?(kt.start(),this.jobsInProgress++):this.jobQueue.push(kt)},clear:function(){for(var st=0;st<this.jobQueue.length;st++){var bt=this.jobQueue[st];typeof bt.abort=="function"&&bt.abort()}this.jobQueue=[]}};function it(st,bt,xt){var Et;st.jobsInProgress--,(!st.jobLimit||st.jobsInProgress<st.jobLimit)&&st.jobQueue.length>0&&(Et=st.jobQueue.shift(),Et.start(),st.jobsInProgress++),xt(bt.image,bt.errorMsg,bt.request)}}(OpenSeadragon),function(nt){nt.Tile=function(rt,it,st,bt,xt,Et,kt,Lt,Pt,Rt){this.level=rt,this.x=it,this.y=st,this.bounds=bt,this.sourceBounds=Rt,this.exists=xt,this.url=Et,this.context2D=kt,this.loadWithAjax=Lt,this.ajaxHeaders=Pt,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},nt.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(rt){if(!this.cacheImageRecord){nt.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=nt.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=rt&&rt.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",nt.setElementOpacity(this.element,this.opacity)},drawCanvas:function(rt,it,st,bt){var xt=this.position.times(nt.pixelDensityRatio),Et=this.size.times(nt.pixelDensityRatio),kt;if(!this.context2D&&!this.cacheImageRecord){nt.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(kt=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!kt){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}rt.save(),rt.globalAlpha=this.opacity,typeof st=="number"&&st!==1&&(xt=xt.times(st),Et=Et.times(st)),bt instanceof nt.Point&&(xt=xt.plus(bt)),rt.globalAlpha===1&&this._hasTransparencyChannel()&&rt.clearRect(xt.x,xt.y,Et.x,Et.y),it({context:rt,tile:this,rendered:kt});var Lt,Pt;this.sourceBounds?(Lt=Math.min(this.sourceBounds.width,kt.canvas.width),Pt=Math.min(this.sourceBounds.height,kt.canvas.height)):(Lt=kt.canvas.width,Pt=kt.canvas.height),rt.drawImage(kt.canvas,0,0,Lt,Pt,xt.x,xt.y,Et.x,Et.y),rt.restore()},getScaleForEdgeSmoothing:function(){var rt;if(this.cacheImageRecord)rt=this.cacheImageRecord.getRenderedContext();else if(this.context2D)rt=this.context2D;else return nt.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return rt.canvas.width/(this.size.x*nt.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(rt,it,st){var bt=Math.max(1,Math.ceil((st.x-it.x)/2)),xt=Math.max(1,Math.ceil((st.y-it.y)/2));return new nt.Point(bt,xt).minus(this.position.times(nt.pixelDensityRatio).times(rt||1).apply(function(Et){return Et%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(nt){nt.OverlayPlacement=nt.Placement,nt.OverlayRotationMode=nt.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),nt.Overlay=function(rt,it,st){var bt;nt.isPlainObject(rt)?bt=rt:bt={element:rt,location:it,placement:st},this.element=bt.element,this.style=bt.element.style,this._init(bt)},nt.Overlay.prototype={_init:function(rt){this.location=rt.location,this.placement=rt.placement===void 0?nt.Placement.TOP_LEFT:rt.placement,this.onDraw=rt.onDraw,this.checkResize=rt.checkResize===void 0?!0:rt.checkResize,this.width=rt.width===void 0?null:rt.width,this.height=rt.height===void 0?null:rt.height,this.rotationMode=rt.rotationMode||nt.OverlayRotationMode.EXACT,this.location instanceof nt.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=nt.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new nt.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(rt,it){var st=nt.Placement.properties[this.placement];!st||(st.isHorizontallyCentered?rt.x-=it.x/2:st.isRight&&(rt.x-=it.x),st.isVerticallyCentered?rt.y-=it.y/2:st.isBottom&&(rt.y-=it.y))},destroy:function(){var rt=this.element,it=this.style;rt.parentNode&&(rt.parentNode.removeChild(rt),rt.prevElementParent&&(it.display="none",document.body.appendChild(rt))),this.onDraw=null,it.top="",it.left="",it.position="",this.width!==null&&(it.width=""),this.height!==null&&(it.height="");var st=nt.getCssPropertyWithVendorPrefix("transformOrigin"),bt=nt.getCssPropertyWithVendorPrefix("transform");st&&bt&&(it[st]="",it[bt]="")},drawHTML:function(rt,it){var st=this.element;st.parentNode!==rt&&(st.prevElementParent=st.parentNode,st.prevNextSibling=st.nextSibling,rt.appendChild(st),this.style.position="absolute",this.size=nt.getElementSize(st));var bt=this._getOverlayPositionAndSize(it),xt=bt.position,Et=this.size=bt.size,kt=bt.rotate;if(this.onDraw)this.onDraw(xt,Et,this.element);else{var Lt=this.style;Lt.left=xt.x+"px",Lt.top=xt.y+"px",this.width!==null&&(Lt.width=Et.x+"px"),this.height!==null&&(Lt.height=Et.y+"px");var Pt=nt.getCssPropertyWithVendorPrefix("transformOrigin"),Rt=nt.getCssPropertyWithVendorPrefix("transform");Pt&&Rt&&(kt?(Lt[Pt]=this._getTransformOrigin(),Lt[Rt]="rotate("+kt+"deg)"):(Lt[Pt]="",Lt[Rt]="")),Lt.display!=="none"&&(Lt.display="block")}},_getOverlayPositionAndSize:function(rt){var it=rt.pixelFromPoint(this.location,!0),st=this._getSizeInPixels(rt);this.adjust(it,st);var bt=0;if(rt.degrees&&this.rotationMode!==nt.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var xt=new nt.Rect(it.x,it.y,st.x,st.y),Et=this._getBoundingBox(xt,rt.degrees);it=Et.getTopLeft(),st=Et.getSize()}else bt=rt.degrees;return{position:it,size:st,rotate:bt}},_getSizeInPixels:function(rt){var it=this.size.x,st=this.size.y;if(this.width!==null||this.height!==null){var bt=rt.deltaPixelsFromPointsNoRotate(new nt.Point(this.width||0,this.height||0),!0);this.width!==null&&(it=bt.x),this.height!==null&&(st=bt.y)}if(this.checkResize&&(this.width===null||this.height===null)){var xt=this.size=nt.getElementSize(this.element);this.width===null&&(it=xt.x),this.height===null&&(st=xt.y)}return new nt.Point(it,st)},_getBoundingBox:function(rt,it){var st=this._getPlacementPoint(rt);return rt.rotate(it,st).getBoundingBox()},_getPlacementPoint:function(rt){var it=new nt.Point(rt.x,rt.y),st=nt.Placement.properties[this.placement];return st&&(st.isHorizontallyCentered?it.x+=rt.width/2:st.isRight&&(it.x+=rt.width),st.isVerticallyCentered?it.y+=rt.height/2:st.isBottom&&(it.y+=rt.height)),it},_getTransformOrigin:function(){var rt="",it=nt.Placement.properties[this.placement];return it&&(it.isLeft?rt="left":it.isRight&&(rt="right"),it.isTop?rt+=" top":it.isBottom&&(rt+=" bottom")),rt},update:function(rt,it){var st=nt.isPlainObject(rt)?rt:{location:rt,placement:it};this._init({location:st.location||this.location,placement:st.placement!==void 0?st.placement:this.placement,onDraw:st.onDraw||this.onDraw,checkResize:st.checkResize||this.checkResize,width:st.width!==void 0?st.width:this.width,height:st.height!==void 0?st.height:this.height,rotationMode:st.rotationMode||this.rotationMode})},getBounds:function(rt){nt.console.assert(rt,"A viewport must now be passed to Overlay.getBounds.");var it=this.width,st=this.height;if(it===null||st===null){var bt=rt.deltaPointsFromPixelsNoRotate(this.size,!0);it===null&&(it=bt.x),st===null&&(st=bt.y)}var xt=this.location.clone();return this.adjust(xt,new nt.Point(it,st)),this._adjustBoundsForRotation(rt,new nt.Rect(xt.x,xt.y,it,st))},_adjustBoundsForRotation:function(rt,it){if(!rt||rt.degrees===0||this.rotationMode===nt.OverlayRotationMode.EXACT)return it;if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return it;var st=this._getOverlayPositionAndSize(rt);return rt.viewerElementToViewportRectangle(new nt.Rect(st.position.x,st.position.y,st.size.x,st.size.y))}return it.rotate(-rt.degrees,this._getPlacementPoint(it))}}}(OpenSeadragon),function(nt){nt.Drawer=function(rt){nt.console.assert(rt.viewer,"[Drawer] options.viewer is required");var it=arguments;if(nt.isPlainObject(rt)||(rt={source:it[0],viewport:it[1],element:it[2]}),nt.console.assert(rt.viewport,"[Drawer] options.viewport is required"),nt.console.assert(rt.element,"[Drawer] options.element is required"),rt.source&&nt.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=rt.viewer,this.viewport=rt.viewport,this.debugGridColor=typeof rt.debugGridColor=="string"?[rt.debugGridColor]:rt.debugGridColor||nt.DEFAULT_SETTINGS.debugGridColor,rt.opacity&&nt.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=nt.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=nt.getElement(rt.element),this.canvas=nt.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var st=this._calculateCanvasSize();this.canvas.width=st.x,this.canvas.height=st.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",nt.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},nt.Drawer.prototype={addOverlay:function(rt,it,st,bt){return nt.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(rt,it,st,bt),this},updateOverlay:function(rt,it,st){return nt.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(rt,it,st),this},removeOverlay:function(rt){return nt.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(rt),this},clearOverlays:function(){return nt.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt,!0);return new nt.Point(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio)},clipWithPolygons:function(rt,it){if(!!this.useCanvas){var st=this._getContext(it);st.beginPath(),rt.forEach(function(bt){bt.forEach(function(xt,Et){st[Et===0?"moveTo":"lineTo"](xt.x,xt.y)})}),st.clip()}},setOpacity:function(rt){nt.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var it=this.viewer.world,st=0;st<it.getItemCount();st++)it.getItemAt(st).setOpacity(rt);return this},getOpacity:function(){nt.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var rt=this.viewer.world,it=0,st=0;st<rt.getItemCount();st++){var bt=rt.getItemAt(st).getOpacity();bt>it&&(it=bt)}return it},needsUpdate:function(){return nt.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return nt.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return nt.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return nt.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var rt=this._calculateCanvasSize();if((this.canvas.width!=rt.x||this.canvas.height!=rt.y)&&(this.canvas.width=rt.x,this.canvas.height=rt.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var it=this._calculateSketchCanvasSize();this.sketchCanvas.width=it.x,this.sketchCanvas.height=it.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(rt,it){if(!!this.useCanvas){var st=this._getContext(rt);if(it)st.clearRect(it.x,it.y,it.width,it.height);else{var bt=st.canvas;st.clearRect(0,0,bt.width,bt.height)}}},viewportToDrawerRectangle:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt.getTopLeft(),!0),st=this.viewport.deltaPixelsFromPointsNoRotate(rt.getSize(),!0);return new nt.Rect(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio,st.x*nt.pixelDensityRatio,st.y*nt.pixelDensityRatio)},drawTile:function(rt,it,st,bt,xt){if(nt.console.assert(rt,"[Drawer.drawTile] tile is required"),nt.console.assert(it,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var Et=this._getContext(st);bt=bt||1,rt.drawCanvas(Et,it,bt,xt)}else rt.drawHTML(this.canvas)},_getContext:function(rt){var it=this.context;if(rt){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var st=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=st.x,this.sketchCanvas.height=st.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var bt=this;this.viewer.addHandler("rotate",function xt(){if(bt.viewport.getRotation()!==0){bt.viewer.removeHandler("rotate",xt);var Et=bt._calculateSketchCanvasSize();bt.sketchCanvas.width=Et.x,bt.sketchCanvas.height=Et.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}it=this.sketchContext}return it},saveContext:function(rt){!this.useCanvas||this._getContext(rt).save()},restoreContext:function(rt){!this.useCanvas||this._getContext(rt).restore()},setClip:function(rt,it){if(!!this.useCanvas){var st=this._getContext(it);st.beginPath(),st.rect(rt.x,rt.y,rt.width,rt.height),st.clip()}},drawRectangle:function(rt,it,st){if(!!this.useCanvas){var bt=this._getContext(st);bt.save(),bt.fillStyle=it,bt.fillRect(rt.x,rt.y,rt.width,rt.height),bt.restore()}},blendSketch:function(rt,it,st,bt){var xt=rt;if(nt.isPlainObject(xt)||(xt={opacity:rt,scale:it,translate:st,compositeOperation:bt}),!(!this.useCanvas||!this.sketchCanvas)){rt=xt.opacity,bt=xt.compositeOperation;var Et=xt.bounds;if(this.context.save(),this.context.globalAlpha=rt,bt&&(this.context.globalCompositeOperation=bt),Et)Et.x<0&&(Et.width+=Et.x,Et.x=0),Et.x+Et.width>this.canvas.width&&(Et.width=this.canvas.width-Et.x),Et.y<0&&(Et.height+=Et.y,Et.y=0),Et.y+Et.height>this.canvas.height&&(Et.height=this.canvas.height-Et.y),this.context.drawImage(this.sketchCanvas,Et.x,Et.y,Et.width,Et.height,Et.x,Et.y,Et.width,Et.height);else{it=xt.scale||1,st=xt.translate;var kt=st instanceof nt.Point?st:new nt.Point(0,0),Lt=0,Pt=0;if(st){var Rt=this.sketchCanvas.width-this.canvas.width,Dt=this.sketchCanvas.height-this.canvas.height;Lt=Math.round(Rt/2),Pt=Math.round(Dt/2)}this.context.drawImage(this.sketchCanvas,kt.x-Lt*it,kt.y-Pt*it,(this.canvas.width+2*Lt)*it,(this.canvas.height+2*Pt)*it,-Lt,-Pt,this.canvas.width+2*Lt,this.canvas.height+2*Pt)}this.context.restore()}},drawDebugInfo:function(rt,it,st,bt){if(!!this.useCanvas){var xt=this.viewer.world.getIndexOfItem(bt)%this.debugGridColor.length,Et=this.context;Et.save(),Et.lineWidth=2*nt.pixelDensityRatio,Et.font="small-caps bold "+13*nt.pixelDensityRatio+"px arial",Et.strokeStyle=this.debugGridColor[xt],Et.fillStyle=this.debugGridColor[xt],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),bt.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:bt.getRotation(!0),point:bt.viewport.pixelFromPointNoRotate(bt._getRotationPoint(!0),!0)}),bt.viewport.degrees===0&&bt.getRotation(!0)%360===0&&bt._drawer.viewer.viewport.getFlip()&&bt._drawer._flip(),Et.strokeRect(rt.position.x*nt.pixelDensityRatio,rt.position.y*nt.pixelDensityRatio,rt.size.x*nt.pixelDensityRatio,rt.size.y*nt.pixelDensityRatio);var kt=(rt.position.x+rt.size.x/2)*nt.pixelDensityRatio,Lt=(rt.position.y+rt.size.y/2)*nt.pixelDensityRatio;Et.translate(kt,Lt),Et.rotate(Math.PI/180*-this.viewport.degrees),Et.translate(-kt,-Lt),rt.x===0&&rt.y===0&&(Et.fillText("Zoom: "+this.viewport.getZoom(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-30)*nt.pixelDensityRatio),Et.fillText("Pan: "+this.viewport.getBounds().toString(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-20)*nt.pixelDensityRatio)),Et.fillText("Level: "+rt.level,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+20)*nt.pixelDensityRatio),Et.fillText("Column: "+rt.x,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+30)*nt.pixelDensityRatio),Et.fillText("Row: "+rt.y,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+40)*nt.pixelDensityRatio),Et.fillText("Order: "+st+" of "+it,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+50)*nt.pixelDensityRatio),Et.fillText("Size: "+rt.size.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+60)*nt.pixelDensityRatio),Et.fillText("Position: "+rt.position.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+70)*nt.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),bt.getRotation(!0)%360!==0&&this._restoreRotationChanges(),bt.viewport.degrees===0&&bt.getRotation(!0)%360===0&&bt._drawer.viewer.viewport.getFlip()&&bt._drawer._flip(),Et.restore()}},debugRect:function(rt){if(this.useCanvas){var it=this.context;it.save(),it.lineWidth=2*nt.pixelDensityRatio,it.strokeStyle=this.debugGridColor[0],it.fillStyle=this.debugGridColor[0],it.strokeRect(rt.x*nt.pixelDensityRatio,rt.y*nt.pixelDensityRatio,rt.width*nt.pixelDensityRatio,rt.height*nt.pixelDensityRatio),it.restore()}},setImageSmoothingEnabled:function(rt){this.useCanvas&&(this._imageSmoothingEnabled=rt,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(rt){rt.msImageSmoothingEnabled=this._imageSmoothingEnabled,rt.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(rt){var it=this._getContext(rt).canvas;return new nt.Point(it.width,it.height)},getCanvasCenter:function(){return new nt.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(rt){var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),st=this._getContext(rt.useSketch);st.save(),st.translate(it.x,it.y),this.viewer.viewport.flipped?(st.rotate(Math.PI/180*-rt.degrees),st.scale(-1,1)):st.rotate(Math.PI/180*rt.degrees),st.translate(-it.x,-it.y)},_flip:function(rt){rt=rt||{};var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),st=this._getContext(rt.useSketch);st.translate(it.x,0),st.scale(-1,1),st.translate(-it.x,0)},_restoreRotationChanges:function(rt){var it=this._getContext(rt);it.restore()},_calculateCanvasSize:function(){var rt=nt.pixelDensityRatio,it=this.viewport.getContainerSize();return{x:Math.round(it.x*rt),y:Math.round(it.y*rt)}},_calculateSketchCanvasSize:function(){var rt=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return rt;var it=Math.ceil(Math.sqrt(rt.x*rt.x+rt.y*rt.y));return{x:it,y:it}}}}(OpenSeadragon),function(nt){nt.Viewport=function(rt){var it=arguments;it.length&&it[0]instanceof nt.Point&&(rt={containerSize:it[0],contentSize:it[1],config:it[2]}),rt.config&&(nt.extend(!0,rt,rt.config),delete rt.config),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt.margins||{}),delete rt.margins,nt.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:nt.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:nt.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:nt.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:nt.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:nt.DEFAULT_SETTINGS.maxZoomLevel,degrees:nt.DEFAULT_SETTINGS.degrees,flipped:nt.DEFAULT_SETTINGS.flipped,homeFillsViewer:nt.DEFAULT_SETTINGS.homeFillsViewer},rt),this._updateContainerInnerSize(),this.centerSpringX=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new nt.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new nt.Rect(0,0,1,1),1),this.goHome(!0),this.update()},nt.Viewport.prototype={resetContentSize:function(rt){return nt.console.assert(rt,"[Viewport.resetContentSize] contentSize is required"),nt.console.assert(rt instanceof nt.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),nt.console.assert(rt.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),nt.console.assert(rt.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new nt.Rect(0,0,1,rt.y/rt.x),rt.x),this},setHomeBounds:function(rt,it){nt.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(rt,it)},_setContentBounds:function(rt,it){nt.console.assert(rt,"[Viewport._setContentBounds] bounds is required"),nt.console.assert(rt instanceof nt.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),nt.console.assert(rt.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),nt.console.assert(rt.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=rt.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(it),this._contentBounds=rt.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(it),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:it,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var rt=this._contentAspectRatio/this.getAspectRatio(),it;return this.homeFillsViewer?it=rt>=1?rt:1:it=rt>=1?1:rt,it/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var rt=this._contentBounds.getCenter(),it=1/this.getHomeZoom(),st=it/this.getAspectRatio();return new nt.Rect(rt.x-it/2,rt.y-st/2,it,st)},goHome:function(rt){return this.viewer&&this.viewer.raiseEvent("home",{immediately:rt}),this.fitBounds(this.getHomeBounds(),rt)},getMinZoom:function(){var rt=this.getHomeZoom(),it=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*rt;return it},getMaxZoom:function(){var rt=this.maxZoomLevel;return rt||(rt=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,rt/=this._contentBounds.width),Math.max(rt,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new nt.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return nt.extend({},this._margins)},setMargins:function(rt){nt.console.assert(nt.type(rt)==="object","[Viewport.setMargins] margins must be an object"),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(rt){return this.getBoundsNoRotate(rt).rotate(-this.getRotation())},getBoundsNoRotate:function(rt){var it=this.getCenter(rt),st=1/this.getZoom(rt),bt=st/this.getAspectRatio();return new nt.Rect(it.x-st/2,it.y-bt/2,st,bt)},getBoundsWithMargins:function(rt){return this.getBoundsNoRotateWithMargins(rt).rotate(-this.getRotation(),this.getCenter(rt))},getBoundsNoRotateWithMargins:function(rt){var it=this.getBoundsNoRotate(rt),st=this._containerInnerSize.x*this.getZoom(rt);return it.x-=this._margins.left/st,it.y-=this._margins.top/st,it.width+=(this._margins.left+this._margins.right)/st,it.height+=(this._margins.top+this._margins.bottom)/st,it},getCenter:function(rt){var it=new nt.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),st=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),bt,xt,Et,kt,Lt,Pt,Rt,Dt;return rt?it:this.zoomPoint?(bt=this.pixelFromPoint(this.zoomPoint,!0),xt=this.getZoom(),Et=1/xt,kt=Et/this.getAspectRatio(),Lt=new nt.Rect(it.x-Et/2,it.y-kt/2,Et,kt),Pt=this._pixelFromPoint(this.zoomPoint,Lt),Rt=Pt.minus(bt),Dt=Rt.divide(this._containerInnerSize.x*xt),st.plus(Dt)):st},getZoom:function(rt){return rt?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(rt){return Math.max(Math.min(rt,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(rt){var it=new nt.Rect(rt.x,rt.y,rt.width,rt.height);if(!this.wrapHorizontal){var st=this.visibilityRatio*it.width,bt=it.x+it.width,xt=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,Et=this._contentBoundsNoRotate.x-bt+st,kt=xt-it.x-st;st>this._contentBoundsNoRotate.width?it.x+=(Et+kt)/2:kt<0?it.x+=kt:Et>0&&(it.x+=Et)}if(!this.wrapVertical){var Lt=this.visibilityRatio*it.height,Pt=it.y+it.height,Rt=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,Dt=this._contentBoundsNoRotate.y-Pt+Lt,Bt=Rt-it.y-Lt;Lt>this._contentBoundsNoRotate.height?it.y+=(Dt+Bt)/2:Bt<0?it.y+=Bt:Dt>0&&(it.y+=Dt)}return it},_raiseConstraintsEvent:function(rt){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:rt})},applyConstraints:function(rt){var it=this.getZoom(),st=this._applyZoomConstraints(it);it!==st&&this.zoomTo(st,this.zoomPoint,rt);var bt=this.getBoundsNoRotate(),xt=this._applyBoundaryConstraints(bt);return this._raiseConstraintsEvent(rt),(bt.x!==xt.x||bt.y!==xt.y||rt)&&this.fitBounds(xt.rotate(-this.getRotation()),rt),this},ensureVisible:function(rt){return this.applyConstraints(rt)},_fitBounds:function(rt,it){it=it||{};var st=it.immediately||!1,bt=it.constraints||!1,xt=this.getAspectRatio(),Et=rt.getCenter(),kt=new nt.Rect(rt.x,rt.y,rt.width,rt.height,rt.degrees+this.getRotation()).getBoundingBox();kt.getAspectRatio()>=xt?kt.height=kt.width/xt:kt.width=kt.height*xt,kt.x=Et.x-kt.width/2,kt.y=Et.y-kt.height/2;var Lt=1/kt.width;if(bt){var Pt=kt.getAspectRatio(),Rt=this._applyZoomConstraints(Lt);Lt!==Rt&&(Lt=Rt,kt.width=1/Lt,kt.x=Et.x-kt.width/2,kt.height=kt.width/Pt,kt.y=Et.y-kt.height/2),kt=this._applyBoundaryConstraints(kt),Et=kt.getCenter(),this._raiseConstraintsEvent(st)}if(st)return this.panTo(Et,!0),this.zoomTo(Lt,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var Dt=this.getBounds(),Bt=this.getZoom();if(Bt===0||Math.abs(Lt/Bt-1)<1e-8)return this.zoomTo(Lt,!0),this.panTo(Et,st);kt=kt.rotate(-this.getRotation());var Ft=kt.getTopLeft().times(Lt).minus(Dt.getTopLeft().times(Bt)).divide(Lt-Bt);return this.zoomTo(Lt,Ft,st)},fitBounds:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!1})},fitBoundsWithConstraints:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!0})},fitVertically:function(rt){var it=new nt.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(it,rt)},fitHorizontally:function(rt){var it=new nt.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(it,rt)},getConstrainedBounds:function(rt){var it,st;return it=this.getBounds(rt),st=this._applyBoundaryConstraints(it),st},panBy:function(rt,it){var st=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(st.plus(rt),it)},panTo:function(rt,it){return it?(this.centerSpringX.resetTo(rt.x),this.centerSpringY.resetTo(rt.y)):(this.centerSpringX.springTo(rt.x),this.centerSpringY.springTo(rt.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:rt,immediately:it}),this},zoomBy:function(rt,it,st){return this.zoomTo(this.zoomSpring.target.value*rt,it,st)},zoomTo:function(rt,it,st){var bt=this;return this.zoomPoint=it instanceof nt.Point&&!isNaN(it.x)&&!isNaN(it.y)?it:null,st?this._adjustCenterSpringsForZoomPoint(function(){bt.zoomSpring.resetTo(rt)}):this.zoomSpring.springTo(rt),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:rt,refPoint:it,immediately:st}),this},setRotation:function(rt){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=nt.positiveModulo(rt,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:rt}),this)},getRotation:function(){return this.degrees},resize:function(rt,it){var st=this.getBoundsNoRotate(),bt=st,xt;return this.containerSize.x=rt.x,this.containerSize.y=rt.y,this._updateContainerInnerSize(),it&&(xt=rt.x/this.containerSize.x,bt.width=st.width*xt,bt.height=bt.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:rt,maintain:it}),this.fitBounds(bt,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new nt.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var rt=this;this._adjustCenterSpringsForZoomPoint(function(){rt.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var it=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,it},_adjustCenterSpringsForZoomPoint:function(rt){if(this.zoomPoint){var it=this.pixelFromPoint(this.zoomPoint,!0);rt();var st=this.pixelFromPoint(this.zoomPoint,!0),bt=st.minus(it),xt=this.deltaPointsFromPixels(bt,!0);this.centerSpringX.shiftBy(xt.x),this.centerSpringY.shiftBy(xt.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else rt()},deltaPixelsFromPointsNoRotate:function(rt,it){return rt.times(this._containerInnerSize.x*this.getZoom(it))},deltaPixelsFromPoints:function(rt,it){return this.deltaPixelsFromPointsNoRotate(rt.rotate(this.getRotation()),it)},deltaPointsFromPixelsNoRotate:function(rt,it){return rt.divide(this._containerInnerSize.x*this.getZoom(it))},deltaPointsFromPixels:function(rt,it){return this.deltaPointsFromPixelsNoRotate(rt,it).rotate(-this.getRotation())},pixelFromPointNoRotate:function(rt,it){return this._pixelFromPointNoRotate(rt,this.getBoundsNoRotate(it))},pixelFromPoint:function(rt,it){return this._pixelFromPoint(rt,this.getBoundsNoRotate(it))},_pixelFromPointNoRotate:function(rt,it){return rt.minus(it.getTopLeft()).times(this._containerInnerSize.x/it.width).plus(new nt.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(rt,it){return this._pixelFromPointNoRotate(rt.rotate(this.getRotation(),this.getCenter(!0)),it)},pointFromPixelNoRotate:function(rt,it){var st=this.getBoundsNoRotate(it);return rt.minus(new nt.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/st.width).plus(st.getTopLeft())},pointFromPixel:function(rt,it){return this.pointFromPixelNoRotate(rt,it).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(rt,it){var st=this._contentBoundsNoRotate.width;return new nt.Point(rt*this._contentSizeNoRotate.x/st,it*this._contentSizeNoRotate.x/st)},viewportToImageCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.viewportToImageCoordinates(rt.x,rt.y);if(this.viewer){var st=this.viewer.world.getItemCount();if(st>1)nt.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(st===1){var bt=this.viewer.world.getItemAt(0);return bt.viewportToImageCoordinates(rt,it,!0)}}return this._viewportToImageDelta(rt-this._contentBoundsNoRotate.x,it-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(rt,it){var st=this._contentBoundsNoRotate.width;return new nt.Point(rt/this._contentSizeNoRotate.x*st,it/this._contentSizeNoRotate.x*st)},imageToViewportCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.imageToViewportCoordinates(rt.x,rt.y);if(this.viewer){var st=this.viewer.world.getItemCount();if(st>1)nt.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(st===1){var bt=this.viewer.world.getItemAt(0);return bt.imageToViewportCoordinates(rt,it,!0)}}var xt=this._imageToViewportDelta(rt,it);return xt.x+=this._contentBoundsNoRotate.x,xt.y+=this._contentBoundsNoRotate.y,xt},imageToViewportRectangle:function(rt,it,st,bt){var xt=rt;if(xt instanceof nt.Rect||(xt=new nt.Rect(rt,it,st,bt)),this.viewer){var Et=this.viewer.world.getItemCount();if(Et>1)nt.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(Et===1){var kt=this.viewer.world.getItemAt(0);return kt.imageToViewportRectangle(rt,it,st,bt,!0)}}var Lt=this.imageToViewportCoordinates(xt.x,xt.y),Pt=this._imageToViewportDelta(xt.width,xt.height);return new nt.Rect(Lt.x,Lt.y,Pt.x,Pt.y,xt.degrees)},viewportToImageRectangle:function(rt,it,st,bt){var xt=rt;if(xt instanceof nt.Rect||(xt=new nt.Rect(rt,it,st,bt)),this.viewer){var Et=this.viewer.world.getItemCount();if(Et>1)nt.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(Et===1){var kt=this.viewer.world.getItemAt(0);return kt.viewportToImageRectangle(rt,it,st,bt,!0)}}var Lt=this.viewportToImageCoordinates(xt.x,xt.y),Pt=this._viewportToImageDelta(xt.width,xt.height);return new nt.Rect(Lt.x,Lt.y,Pt.x,Pt.y,xt.degrees)},viewerElementToImageCoordinates:function(rt){var it=this.pointFromPixel(rt,!0);return this.viewportToImageCoordinates(it)},imageToViewerElementCoordinates:function(rt){var it=this.imageToViewportCoordinates(rt);return this.pixelFromPoint(it,!0)},windowToImageCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(it)},imageToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var it=this.imageToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(rt){return this.pointFromPixel(rt,!0)},viewportToViewerElementCoordinates:function(rt){return this.pixelFromPoint(rt,!0)},viewerElementToViewportRectangle:function(rt){return nt.Rect.fromSummits(this.pointFromPixel(rt.getTopLeft(),!0),this.pointFromPixel(rt.getTopRight(),!0),this.pointFromPixel(rt.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(rt){return nt.Rect.fromSummits(this.pixelFromPoint(rt.getTopLeft(),!0),this.pixelFromPoint(rt.getTopRight(),!0),this.pixelFromPoint(rt.getBottomLeft(),!0))},windowToViewportCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(it)},viewportToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var it=this.viewportToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewportToImageZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(it===1){var st=this.viewer.world.getItemAt(0);return st.viewportToImageZoom(rt)}}var bt=this._contentSizeNoRotate.x,xt=this._containerInnerSize.x,Et=this._contentBoundsNoRotate.width,kt=xt/bt*Et;return rt*kt},imageToViewportZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(it===1){var st=this.viewer.world.getItemAt(0);return st.imageToViewportZoom(rt)}}var bt=this._contentSizeNoRotate.x,xt=this._containerInnerSize.x,Et=this._contentBoundsNoRotate.width,kt=bt/xt/Et;return rt*kt},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(rt){return this.flipped===rt?this:(this.flipped=rt,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:rt}),this)}}}(OpenSeadragon),function(nt){nt.TiledImage=function(Wt){var Qt=this;nt.console.assert(Wt.tileCache,"[TiledImage] options.tileCache is required"),nt.console.assert(Wt.drawer,"[TiledImage] options.drawer is required"),nt.console.assert(Wt.viewer,"[TiledImage] options.viewer is required"),nt.console.assert(Wt.imageLoader,"[TiledImage] options.imageLoader is required"),nt.console.assert(Wt.source,"[TiledImage] options.source is required"),nt.console.assert(!Wt.clip||Wt.clip instanceof nt.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),nt.EventSource.call(this),this._tileCache=Wt.tileCache,delete Wt.tileCache,this._drawer=Wt.drawer,delete Wt.drawer,this._imageLoader=Wt.imageLoader,delete Wt.imageLoader,Wt.clip instanceof nt.Rect&&(this._clip=Wt.clip.clone()),delete Wt.clip;var Kt=Wt.x||0;delete Wt.x;var on=Wt.y||0;delete Wt.y,this.normHeight=Wt.source.dimensions.y/Wt.source.dimensions.x,this.contentAspectX=Wt.source.dimensions.x/Wt.source.dimensions.y;var nn=1;Wt.width?(nn=Wt.width,delete Wt.width,Wt.height&&(nt.console.error("specifying both width and height to a tiledImage is not supported"),delete Wt.height)):Wt.height&&(nn=Wt.height/this.normHeight,delete Wt.height);var mn=Wt.fitBounds;delete Wt.fitBounds;var gn=Wt.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete Wt.fitBoundsPlacement;var Tn=Wt.degrees||0;delete Wt.degrees,nt.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,immediateRender:nt.DEFAULT_SETTINGS.immediateRender,blendTime:nt.DEFAULT_SETTINGS.blendTime,alwaysBlend:nt.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:nt.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:nt.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:nt.DEFAULT_SETTINGS.iOSDevice,debugMode:nt.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:nt.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:nt.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:nt.DEFAULT_SETTINGS.placeholderFillStyle,opacity:nt.DEFAULT_SETTINGS.opacity,preload:nt.DEFAULT_SETTINGS.preload,compositeOperation:nt.DEFAULT_SETTINGS.compositeOperation},Wt),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new nt.Spring({initial:Kt,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new nt.Spring({initial:on,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new nt.Spring({initial:nn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new nt.Spring({initial:Tn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),mn&&this.fitBounds(mn,gn,!0),this._drawingHandler=function(An){Qt.viewer.raiseEvent("tile-drawing",nt.extend({tiledImage:Qt},An))}},nt.extend(nt.TiledImage.prototype,nt.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(Wt){Wt!==this._fullyLoaded&&(this._fullyLoaded=Wt,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=nt.now(),this._needsDraw=!0},update:function(){var Wt=this._xSpring.update(),Qt=this._ySpring.update(),Kt=this._scaleSpring.update(),on=this._degreesSpring.update();return Wt||Qt||Kt||on?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(Wt){return this.getBoundsNoRotate(Wt).rotate(this.getRotation(Wt),this._getRotationPoint(Wt))},getBoundsNoRotate:function(Wt){return Wt?new nt.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new nt.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return nt.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(Wt){var Qt=this.getBoundsNoRotate(Wt);if(this._clip){var Kt=Wt?this._worldWidthCurrent:this._worldWidthTarget,on=Kt/this.source.dimensions.x,nn=this._clip.times(on);Qt=new nt.Rect(Qt.x+nn.x,Qt.y+nn.y,nn.width,nn.height)}return Qt.rotate(this.getRotation(Wt),this._getRotationPoint(Wt))},getContentSize:function(){return new nt.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(Wt,Qt,Kt){var on=Kt?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Wt*(this.source.dimensions.x/on),Qt*(this.source.dimensions.y*this.contentAspectX/on))},viewportToImageCoordinates:function(Wt,Qt,Kt){var on;return Wt instanceof nt.Point?(Kt=Qt,on=Wt):on=new nt.Point(Wt,Qt),on=on.rotate(-this.getRotation(Kt),this._getRotationPoint(Kt)),Kt?this._viewportToImageDelta(on.x-this._xSpring.current.value,on.y-this._ySpring.current.value):this._viewportToImageDelta(on.x-this._xSpring.target.value,on.y-this._ySpring.target.value)},_imageToViewportDelta:function(Wt,Qt,Kt){var on=Kt?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Wt/this.source.dimensions.x*on,Qt/this.source.dimensions.y/this.contentAspectX*on)},imageToViewportCoordinates:function(Wt,Qt,Kt){Wt instanceof nt.Point&&(Kt=Qt,Qt=Wt.y,Wt=Wt.x);var on=this._imageToViewportDelta(Wt,Qt);return Kt?(on.x+=this._xSpring.current.value,on.y+=this._ySpring.current.value):(on.x+=this._xSpring.target.value,on.y+=this._ySpring.target.value),on.rotate(this.getRotation(Kt),this._getRotationPoint(Kt))},imageToViewportRectangle:function(Wt,Qt,Kt,on,nn){var mn=Wt;mn instanceof nt.Rect?nn=Qt:mn=new nt.Rect(Wt,Qt,Kt,on);var gn=this.imageToViewportCoordinates(mn.getTopLeft(),nn),Tn=this._imageToViewportDelta(mn.width,mn.height,nn);return new nt.Rect(gn.x,gn.y,Tn.x,Tn.y,mn.degrees+this.getRotation(nn))},viewportToImageRectangle:function(Wt,Qt,Kt,on,nn){var mn=Wt;Wt instanceof nt.Rect?nn=Qt:mn=new nt.Rect(Wt,Qt,Kt,on);var gn=this.viewportToImageCoordinates(mn.getTopLeft(),nn),Tn=this._viewportToImageDelta(mn.width,mn.height,nn);return new nt.Rect(gn.x,gn.y,Tn.x,Tn.y,mn.degrees-this.getRotation(nn))},viewerElementToImageCoordinates:function(Wt){var Qt=this.viewport.pointFromPixel(Wt,!0);return this.viewportToImageCoordinates(Qt)},imageToViewerElementCoordinates:function(Wt){var Qt=this.imageToViewportCoordinates(Wt);return this.viewport.pixelFromPoint(Qt,!0)},windowToImageCoordinates:function(Wt){var Qt=Wt.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Qt)},imageToWindowCoordinates:function(Wt){var Qt=this.imageToViewerElementCoordinates(Wt);return Qt.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(Wt){var Qt=this._scaleSpring.current.value;return Wt=Wt.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new nt.Rect((Wt.x-this._xSpring.current.value)/Qt,(Wt.y-this._ySpring.current.value)/Qt,Wt.width/Qt,Wt.height/Qt,Wt.degrees)},viewportToImageZoom:function(Wt){var Qt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Qt*Wt},imageToViewportZoom:function(Wt){var Qt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Wt/Qt},setPosition:function(Wt,Qt){var Kt=this._xSpring.target.value===Wt.x&&this._ySpring.target.value===Wt.y;if(Qt){if(Kt&&this._xSpring.current.value===Wt.x&&this._ySpring.current.value===Wt.y)return;this._xSpring.resetTo(Wt.x),this._ySpring.resetTo(Wt.y),this._needsDraw=!0}else{if(Kt)return;this._xSpring.springTo(Wt.x),this._ySpring.springTo(Wt.y),this._needsDraw=!0}Kt||this._raiseBoundsChange()},setWidth:function(Wt,Qt){this._setScale(Wt,Qt)},setHeight:function(Wt,Qt){this._setScale(Wt/this.normHeight,Qt)},setCroppingPolygons:function(Wt){var Qt=function(on){return on instanceof nt.Point||typeof on.x=="number"&&typeof on.y=="number"},Kt=function(on){return on.map(function(nn){try{if(Qt(nn))return{x:nn.x,y:nn.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!nt.isArray(Wt))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=Wt.map(function(on){return Kt(on)})}catch(on){nt.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),nt.console.error(on),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(Wt,Qt,Kt){Qt=Qt||nt.Placement.CENTER;var on=nt.Placement.properties[Qt],nn=this.contentAspectX,mn=0,gn=0,Tn=1,An=1;if(this._clip&&(nn=this._clip.getAspectRatio(),Tn=this._clip.width/this.source.dimensions.x,An=this._clip.height/this.source.dimensions.y,Wt.getAspectRatio()>nn?(mn=this._clip.x/this._clip.height*Wt.height,gn=this._clip.y/this._clip.height*Wt.height):(mn=this._clip.x/this._clip.width*Wt.width,gn=this._clip.y/this._clip.width*Wt.width)),Wt.getAspectRatio()>nn){var kn=Wt.height/An,Mn=0;on.isHorizontallyCentered?Mn=(Wt.width-Wt.height*nn)/2:on.isRight&&(Mn=Wt.width-Wt.height*nn),this.setPosition(new nt.Point(Wt.x-mn+Mn,Wt.y-gn),Kt),this.setHeight(kn,Kt)}else{var $n=Wt.width/Tn,cn=0;on.isVerticallyCentered?cn=(Wt.height-Wt.width/nn)/2:on.isBottom&&(cn=Wt.height-Wt.width/nn),this.setPosition(new nt.Point(Wt.x-mn,Wt.y-gn+cn),Kt),this.setWidth($n,Kt)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(Wt){nt.console.assert(!Wt||Wt instanceof nt.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),Wt instanceof nt.Rect?this._clip=Wt.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(Wt){Wt!==this.opacity&&(this.opacity=Wt,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(Wt){this._preload=!!Wt,this._needsDraw=!0},getRotation:function(Wt){return Wt?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(Wt,Qt){this._degreesSpring.target.value===Wt&&this._degreesSpring.isAtTargetValue()||(Qt?this._degreesSpring.resetTo(Wt):this._degreesSpring.springTo(Wt),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(Wt){return this.getBoundsNoRotate(Wt).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(Wt){Wt!==this.compositeOperation&&(this.compositeOperation=Wt,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(Wt,Qt){var Kt=this._scaleSpring.target.value===Wt;if(Qt){if(Kt&&this._scaleSpring.current.value===Wt)return;this._scaleSpring.resetTo(Wt),this._updateForScale(),this._needsDraw=!0}else{if(Kt)return;this._scaleSpring.springTo(Wt),this._updateForScale(),this._needsDraw=!0}Kt||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var Wt=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),Qt=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,Kt=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(Qt/this.minPixelRatio)/Math.log(2))));return Kt=Math.max(Kt,this.source.minLevel||0),Wt=Math.min(Wt,Kt),{lowestLevel:Wt,highestLevel:Kt}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var Wt=this.lastDrawn.pop();Wt.beingDrawn=!1}var Qt=this.viewport,Kt=this._viewportToTiledImageRectangle(Qt.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var on=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(Kt=Kt.intersection(on),Kt===null)return}for(var nn=this._getLevelsInterval(),mn=nn.lowestLevel,gn=nn.highestLevel,Tn=null,An=!1,kn=nt.now(),Mn=gn;Mn>=mn;Mn--){var $n=!1,cn=Qt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Mn),!0).x*this._scaleSpring.current.value;if(Mn===mn||!An&&cn>=this.minPixelRatio)$n=!0,An=!0;else if(!An)continue;var Sn=Qt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Mn),!1).x*this._scaleSpring.current.value,an=Qt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,jn=this.immediateRender?1:an,hn=Math.min(1,(cn-.5)/.5),zn=jn/Math.abs(jn-Sn);if(Tn=rt(this,An,$n,Mn,hn,zn,Kt,kn,Tn),Pt(this.coverage,Mn))break}Yt(this,this.lastDrawn),Tn&&!Tn.context2D?(bt(this,Tn,kn),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(Wt,Qt,Kt){var on,nn;this.wrapHorizontal?(on=nt.positiveModulo(Qt.x,1),nn=nt.positiveModulo(Kt.x,1)):(on=Math.max(0,Qt.x),nn=Math.min(1,Kt.x));var mn,gn,Tn=1/this.source.aspectRatio;this.wrapVertical?(mn=nt.positiveModulo(Qt.y,Tn),gn=nt.positiveModulo(Kt.y,Tn)):(mn=Math.max(0,Qt.y),gn=Math.min(Tn,Kt.y));var An=this.source.getTileAtPoint(Wt,new nt.Point(on,mn)),kn=this.source.getTileAtPoint(Wt,new nt.Point(nn,gn)),Mn=this.source.getNumTiles(Wt);return this.wrapHorizontal&&(An.x+=Mn.x*Math.floor(Qt.x),kn.x+=Mn.x*Math.floor(Kt.x)),this.wrapVertical&&(An.y+=Mn.y*Math.floor(Qt.y/Tn),kn.y+=Mn.y*Math.floor(Kt.y/Tn)),{topLeft:An,bottomRight:kn}}});function rt(Wt,Qt,Kt,on,nn,mn,gn,Tn,An){var kn=gn.getBoundingBox().getTopLeft(),Mn=gn.getBoundingBox().getBottomRight();Wt.viewer&&Wt.viewer.raiseEvent("update-level",{tiledImage:Wt,havedrawn:Qt,level:on,opacity:nn,visibility:mn,drawArea:gn,topleft:kn,bottomright:Mn,currenttime:Tn,best:An}),Bt(Wt.coverage,on),Bt(Wt.loadingCoverage,on);for(var $n=Wt._getCornerTiles(on,kn,Mn),cn=$n.topLeft,Sn=$n.bottomRight,an=Wt.source.getNumTiles(on),jn=Wt.viewport.pixelFromPoint(Wt.viewport.getCenter()),hn=cn.x;hn<=Sn.x;hn++)for(var zn=cn.y;zn<=Sn.y;zn++){if(!Wt.wrapHorizontal&&!Wt.wrapVertical){var ir=Wt.source.getTileBounds(on,hn,zn);if(gn.intersection(ir)===null)continue}An=it(Wt,Kt,Qt,hn,zn,on,nn,mn,jn,an,Tn,An)}return An}function it(Wt,Qt,Kt,on,nn,mn,gn,Tn,An,kn,Mn,$n){var cn=st(on,nn,mn,Wt,Wt.source,Wt.tilesMatrix,Mn,kn,Wt._worldWidthCurrent,Wt._worldHeightCurrent),Sn=Kt;Wt.viewer&&Wt.viewer.raiseEvent("update-tile",{tiledImage:Wt,tile:cn}),Dt(Wt.coverage,mn,on,nn,!1);var an=cn.loaded||cn.loading||Rt(Wt.loadingCoverage,mn,on,nn);if(Dt(Wt.loadingCoverage,mn,on,nn,an),!cn.exists||(Qt&&!Sn&&(Rt(Wt.coverage,mn,on,nn)?Dt(Wt.coverage,mn,on,nn,!0):Sn=!0),!Sn))return $n;if(kt(cn,Wt.source.tileOverlap,Wt.viewport,An,Tn,Wt),!cn.loaded)if(cn.context2D)Et(Wt,cn);else{var jn=Wt._tileCache.getImageRecord(cn.cacheKey);if(jn){var hn=jn.getImage();Et(Wt,cn,hn)}}if(cn.loaded){var zn=Lt(Wt,cn,on,nn,mn,gn,Mn);zn&&(Wt._needsDraw=!0)}else cn.loading?Wt._tilesLoading++:an||($n=Ft($n,cn));return $n}function st(Wt,Qt,Kt,on,nn,mn,gn,Tn,An,kn){var Mn,$n,cn,Sn,an,jn,hn,zn,ir;return mn[Kt]||(mn[Kt]={}),mn[Kt][Wt]||(mn[Kt][Wt]={}),mn[Kt][Wt][Qt]||(Mn=(Tn.x+Wt%Tn.x)%Tn.x,$n=(Tn.y+Qt%Tn.y)%Tn.y,cn=nn.getTileBounds(Kt,Mn,$n),Sn=nn.getTileBounds(Kt,Mn,$n,!0),an=nn.tileExists(Kt,Mn,$n),jn=nn.getTileUrl(Kt,Mn,$n),on.loadTilesWithAjax?(hn=nn.getTileAjaxHeaders(Kt,Mn,$n),nt.isPlainObject(on.ajaxHeaders)&&(hn=nt.extend({},on.ajaxHeaders,hn))):hn=null,zn=nn.getContext2D?nn.getContext2D(Kt,Mn,$n):void 0,cn.x+=(Wt-Mn)/Tn.x,cn.y+=kn/An*((Qt-$n)/Tn.y),ir=new nt.Tile(Kt,Wt,Qt,cn,an,jn,zn,on.loadTilesWithAjax,hn,Sn),Mn===Tn.x-1&&(ir.isRightMost=!0),$n===Tn.y-1&&(ir.isBottomMost=!0),mn[Kt][Wt][Qt]=ir),ir=mn[Kt][Wt][Qt],ir.lastTouchTime=gn,ir}function bt(Wt,Qt,Kt){Qt.loading=!0,Wt._imageLoader.addJob({src:Qt.url,loadWithAjax:Qt.loadWithAjax,ajaxHeaders:Qt.ajaxHeaders,crossOriginPolicy:Wt.crossOriginPolicy,ajaxWithCredentials:Wt.ajaxWithCredentials,callback:function(on,nn,mn){xt(Wt,Qt,Kt,on,nn,mn)},abort:function(){Qt.loading=!1}})}function xt(Wt,Qt,Kt,on,nn,mn){if(!on){nt.console.log("Tile %s failed to load: %s - error: %s",Qt,Qt.url,nn),Wt.viewer.raiseEvent("tile-load-failed",{tile:Qt,tiledImage:Wt,time:Kt,message:nn,tileRequest:mn}),Qt.loading=!1,Qt.exists=!1;return}if(Kt<Wt.lastResetTime){nt.console.log("Ignoring tile %s loaded before reset: %s",Qt,Qt.url),Qt.loading=!1;return}var gn=function(){var Tn=Wt.source.getClosestLevel();Et(Wt,Qt,on,Tn,mn)};Wt._midDraw?window.setTimeout(gn,1):gn()}function Et(Wt,Qt,Kt,on,nn){var mn=0;function gn(){return mn++,Tn}function Tn(){mn--,mn===0&&(Qt.loading=!1,Qt.loaded=!0,Qt.context2D||Wt._tileCache.cacheTile({image:Kt,tile:Qt,cutoff:on,tiledImage:Wt}),Wt._needsDraw=!0)}Wt.viewer.raiseEvent("tile-loaded",{tile:Qt,tiledImage:Wt,tileRequest:nn,image:Kt,getCompletionCallback:gn}),gn()()}function kt(Wt,Qt,Kt,on,nn,mn){var gn=Wt.bounds.getTopLeft();gn.x*=mn._scaleSpring.current.value,gn.y*=mn._scaleSpring.current.value,gn.x+=mn._xSpring.current.value,gn.y+=mn._ySpring.current.value;var Tn=Wt.bounds.getSize();Tn.x*=mn._scaleSpring.current.value,Tn.y*=mn._scaleSpring.current.value;var An=Kt.pixelFromPointNoRotate(gn,!0),kn=Kt.pixelFromPointNoRotate(gn,!1),Mn=Kt.deltaPixelsFromPointsNoRotate(Tn,!0),$n=Kt.deltaPixelsFromPointsNoRotate(Tn,!1),cn=kn.plus($n.divide(2)),Sn=on.squaredDistanceTo(cn);Qt||(Mn=Mn.plus(new nt.Point(1,1))),Wt.isRightMost&&mn.wrapHorizontal&&(Mn.x+=.75),Wt.isBottomMost&&mn.wrapVertical&&(Mn.y+=.75),Wt.position=An,Wt.size=Mn,Wt.squaredDistance=Sn,Wt.visibility=nn}function Lt(Wt,Qt,Kt,on,nn,mn,gn){var Tn=1e3*Wt.blendTime,An,kn;if(Qt.blendStart||(Qt.blendStart=gn),An=gn-Qt.blendStart,kn=Tn?Math.min(1,An/Tn):1,Wt.alwaysBlend&&(kn*=mn),Qt.opacity=kn,Wt.lastDrawn.push(Qt),kn===1)Dt(Wt.coverage,nn,Kt,on,!0),Wt._hasOpaqueTile=!0;else if(An<Tn)return!0;return!1}function Pt(Wt,Qt,Kt,on){var nn,mn,gn,Tn;if(!Wt[Qt])return!1;if(Kt===void 0||on===void 0){nn=Wt[Qt];for(gn in nn)if(Object.prototype.hasOwnProperty.call(nn,gn)){mn=nn[gn];for(Tn in mn)if(Object.prototype.hasOwnProperty.call(mn,Tn)&&!mn[Tn])return!1}return!0}return Wt[Qt][Kt]===void 0||Wt[Qt][Kt][on]===void 0||Wt[Qt][Kt][on]===!0}function Rt(Wt,Qt,Kt,on){return Kt===void 0||on===void 0?Pt(Wt,Qt+1):Pt(Wt,Qt+1,2*Kt,2*on)&&Pt(Wt,Qt+1,2*Kt,2*on+1)&&Pt(Wt,Qt+1,2*Kt+1,2*on)&&Pt(Wt,Qt+1,2*Kt+1,2*on+1)}function Dt(Wt,Qt,Kt,on,nn){if(!Wt[Qt]){nt.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",Qt);return}Wt[Qt][Kt]||(Wt[Qt][Kt]={}),Wt[Qt][Kt][on]=nn}function Bt(Wt,Qt){Wt[Qt]={}}function Ft(Wt,Qt){return!Wt||Qt.visibility>Wt.visibility||Qt.visibility==Wt.visibility&&Qt.squaredDistance<Wt.squaredDistance?Qt:Wt}function Yt(Wt,Qt){if(!(Wt.opacity===0||Qt.length===0&&!Wt.placeholderFillStyle)){var Kt=Qt[0],on;Kt&&(on=Wt.opacity<1||Wt.compositeOperation&&Wt.compositeOperation!=="source-over"||!Wt._isBottomItem()&&Kt._hasTransparencyChannel());var nn,mn,gn=Wt.viewport.getZoom(!0),Tn=Wt.viewportToImageZoom(gn);Qt.length>1&&Tn>Wt.smoothTileEdgesMinZoom&&!Wt.iOSDevice&&Wt.getRotation(!0)%360===0&&nt.supportsCanvas&&(on=!0,nn=Kt.getScaleForEdgeSmoothing(),mn=Kt.getTranslationForEdgeSmoothing(nn,Wt._drawer.getCanvasSize(!1),Wt._drawer.getCanvasSize(!0)));var An;on&&(nn||(An=Wt.viewport.viewportToViewerElementRectangle(Wt.getClippedBounds(!0)).getIntegerBoundingBox(),Wt._drawer.viewer.viewport.getFlip()&&(Wt.viewport.degrees!==0||Wt.getRotation(!0)%360!==0)&&(An.x=Wt._drawer.viewer.container.clientWidth-(An.x+An.width)),An=An.times(nt.pixelDensityRatio)),Wt._drawer._clear(!0,An)),nn||(Wt.viewport.degrees!==0&&Wt._drawer._offsetForRotation({degrees:Wt.viewport.degrees,useSketch:on}),Wt.getRotation(!0)%360!==0&&Wt._drawer._offsetForRotation({degrees:Wt.getRotation(!0),point:Wt.viewport.pixelFromPointNoRotate(Wt._getRotationPoint(!0),!0),useSketch:on}),Wt.viewport.degrees===0&&Wt.getRotation(!0)%360===0&&Wt._drawer.viewer.viewport.getFlip()&&Wt._drawer._flip());var kn=!1;if(Wt._clip){Wt._drawer.saveContext(on);var Mn=Wt.imageToViewportRectangle(Wt._clip,!0);Mn=Mn.rotate(-Wt.getRotation(!0),Wt._getRotationPoint(!0));var $n=Wt._drawer.viewportToDrawerRectangle(Mn);nn&&($n=$n.times(nn)),mn&&($n=$n.translate(mn)),Wt._drawer.setClip($n,on),kn=!0}if(Wt._croppingPolygons){Wt._drawer.saveContext(on);try{var cn=Wt._croppingPolygons.map(function(hn){return hn.map(function(zn){var ir=Wt.imageToViewportCoordinates(zn.x,zn.y,!0).rotate(-Wt.getRotation(!0),Wt._getRotationPoint(!0)),tr=Wt._drawer.viewportCoordToDrawerCoord(ir);return nn&&(tr=tr.times(nn)),tr})});Wt._drawer.clipWithPolygons(cn,on)}catch(hn){nt.console.error(hn)}kn=!0}if(Wt.placeholderFillStyle&&Wt._hasOpaqueTile===!1){var Sn=Wt._drawer.viewportToDrawerRectangle(Wt.getBounds(!0));nn&&(Sn=Sn.times(nn)),mn&&(Sn=Sn.translate(mn));var an=null;typeof Wt.placeholderFillStyle=="function"?an=Wt.placeholderFillStyle(Wt,Wt._drawer.context):an=Wt.placeholderFillStyle,Wt._drawer.drawRectangle(Sn,an,on)}for(var jn=Qt.length-1;jn>=0;jn--)Kt=Qt[jn],Wt._drawer.drawTile(Kt,Wt._drawingHandler,on,nn,mn),Kt.beingDrawn=!0,Wt.viewer&&Wt.viewer.raiseEvent("tile-drawn",{tiledImage:Wt,tile:Kt});kn&&Wt._drawer.restoreContext(on),nn||(Wt.getRotation(!0)%360!==0&&Wt._drawer._restoreRotationChanges(on),Wt.viewport.degrees!==0&&Wt._drawer._restoreRotationChanges(on)),on&&(nn&&(Wt.viewport.degrees!==0&&Wt._drawer._offsetForRotation({degrees:Wt.viewport.degrees,useSketch:!1}),Wt.getRotation(!0)%360!==0&&Wt._drawer._offsetForRotation({degrees:Wt.getRotation(!0),point:Wt.viewport.pixelFromPointNoRotate(Wt._getRotationPoint(!0),!0),useSketch:!1})),Wt._drawer.blendSketch({opacity:Wt.opacity,scale:nn,translate:mn,compositeOperation:Wt.compositeOperation,bounds:An}),nn&&(Wt.getRotation(!0)%360!==0&&Wt._drawer._restoreRotationChanges(!1),Wt.viewport.degrees!==0&&Wt._drawer._restoreRotationChanges(!1))),nn||Wt.viewport.degrees===0&&Wt.getRotation(!0)%360===0&&Wt._drawer.viewer.viewport.getFlip()&&Wt._drawer._flip(),Zt(Wt,Qt)}}function Zt(Wt,Qt){if(Wt.debugMode)for(var Kt=Qt.length-1;Kt>=0;Kt--){var on=Qt[Kt];try{Wt._drawer.drawDebugInfo(on,Qt.length,Kt,Wt)}catch(nn){nt.console.error(nn)}}}}(OpenSeadragon),function(nt){var rt=function(st){nt.console.assert(st,"[TileCache.cacheTile] options is required"),nt.console.assert(st.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(st.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=st.tile,this.tiledImage=st.tiledImage},it=function(st){nt.console.assert(st,"[ImageRecord] options is required"),nt.console.assert(st.image,"[ImageRecord] options.image is required"),this._image=st.image,this._tiles=[]};it.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var st=document.createElement("canvas");st.width=this._image.width,st.height=this._image.height,this._renderedContext=st.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(st){nt.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=st},addTile:function(st){nt.console.assert(st,"[ImageRecord.addTile] tile is required"),this._tiles.push(st)},removeTile:function(st){for(var bt=0;bt<this._tiles.length;bt++)if(this._tiles[bt]===st){this._tiles.splice(bt,1);return}nt.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",st)},getTileCount:function(){return this._tiles.length}},nt.TileCache=function(st){st=st||{},this._maxImageCacheCount=st.maxImageCacheCount||nt.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},nt.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(st){nt.console.assert(st,"[TileCache.cacheTile] options is required"),nt.console.assert(st.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(st.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),nt.console.assert(st.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var bt=st.cutoff||0,xt=this._tilesLoaded.length,Et=this._imagesLoaded[st.tile.cacheKey];if(Et||(nt.console.assert(st.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),Et=this._imagesLoaded[st.tile.cacheKey]=new it({image:st.image}),this._imagesLoadedCount++),Et.addTile(st.tile),st.tile.cacheImageRecord=Et,this._imagesLoadedCount>this._maxImageCacheCount){for(var kt=null,Lt=-1,Pt=null,Rt,Dt,Bt,Ft,Yt,Zt,Wt=this._tilesLoaded.length-1;Wt>=0;Wt--)if(Zt=this._tilesLoaded[Wt],Rt=Zt.tile,!(Rt.level<=bt||Rt.beingDrawn)){if(!kt){kt=Rt,Lt=Wt,Pt=Zt;continue}Ft=Rt.lastTouchTime,Dt=kt.lastTouchTime,Yt=Rt.level,Bt=kt.level,(Ft<Dt||Ft==Dt&&Yt>Bt)&&(kt=Rt,Lt=Wt,Pt=Zt)}kt&&Lt>=0&&(this._unloadTile(Pt),xt=Lt)}this._tilesLoaded[xt]=new rt({tile:st.tile,tiledImage:st.tiledImage})},clearTilesFor:function(st){nt.console.assert(st,"[TileCache.clearTilesFor] tiledImage is required");for(var bt,xt=0;xt<this._tilesLoaded.length;++xt)bt=this._tilesLoaded[xt],bt.tiledImage===st&&(this._unloadTile(bt),this._tilesLoaded.splice(xt,1),xt--)},getImageRecord:function(st){return nt.console.assert(st,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[st]},_unloadTile:function(st){nt.console.assert(st,"[TileCache._unloadTile] tileRecord is required");var bt=st.tile,xt=st.tiledImage;bt.unload(),bt.cacheImageRecord=null;var Et=this._imagesLoaded[bt.cacheKey];Et.removeTile(bt),Et.getTileCount()||(Et.destroy(),delete this._imagesLoaded[bt.cacheKey],this._imagesLoadedCount--),xt.viewer.raiseEvent("tile-unloaded",{tile:bt,tiledImage:xt})}}}(OpenSeadragon),function(nt){nt.World=function(rt){var it=this;nt.console.assert(rt.viewer,"[World] options.viewer is required"),nt.EventSource.call(this),this.viewer=rt.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(st){it._autoRefigureSizes?it._figureSizes():it._needsSizesFigured=!0},this._figureSizes()},nt.extend(nt.World.prototype,nt.EventSource.prototype,{addItem:function(rt,it){if(nt.console.assert(rt,"[World.addItem] item is required"),nt.console.assert(rt instanceof nt.TiledImage,"[World.addItem] only TiledImages supported at this time"),it=it||{},it.index!==void 0){var st=Math.max(0,Math.min(this._items.length,it.index));this._items.splice(st,0,rt)}else this._items.push(rt);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,rt.addHandler("bounds-change",this._delegatedFigureSizes),rt.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:rt})},getItemAt:function(rt){return nt.console.assert(rt!==void 0,"[World.getItemAt] index is required"),this._items[rt]},getIndexOfItem:function(rt){return nt.console.assert(rt,"[World.getIndexOfItem] item is required"),nt.indexOf(this._items,rt)},getItemCount:function(){return this._items.length},setItemIndex:function(rt,it){nt.console.assert(rt,"[World.setItemIndex] item is required"),nt.console.assert(it!==void 0,"[World.setItemIndex] index is required");var st=this.getIndexOfItem(rt);if(it>=this._items.length)throw new Error("Index bigger than number of layers.");it===st||st===-1||(this._items.splice(st,1),this._items.splice(it,0,rt),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:rt,previousIndex:st,newIndex:it}))},removeItem:function(rt){nt.console.assert(rt,"[World.removeItem] item is required");var it=nt.indexOf(this._items,rt);it!==-1&&(rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy(),this._items.splice(it,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(rt))},removeAll:function(){this.viewer._cancelPendingImages();var rt,it;for(it=0;it<this._items.length;it++)rt=this._items[it],rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy();var st=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,it=0;it<st.length;it++)rt=st[it],this._raiseRemoveItem(rt)},resetItems:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].reset()},update:function(){for(var rt=!1,it=0;it<this._items.length;it++)rt=this._items[it].update()||rt;return rt},draw:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].draw();this._needsDraw=!1},needsDraw:function(){for(var rt=0;rt<this._items.length;rt++)if(this._items[rt].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(rt){this._autoRefigureSizes=rt,rt&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(rt){rt=rt||{};var it=rt.immediately||!1,st=rt.layout||nt.DEFAULT_SETTINGS.collectionLayout,bt=rt.rows||nt.DEFAULT_SETTINGS.collectionRows,xt=rt.columns||nt.DEFAULT_SETTINGS.collectionColumns,Et=rt.tileSize||nt.DEFAULT_SETTINGS.collectionTileSize,kt=rt.tileMargin||nt.DEFAULT_SETTINGS.collectionTileMargin,Lt=Et+kt,Pt;!rt.rows&&xt?Pt=xt:Pt=Math.ceil(this._items.length/bt);var Rt=0,Dt=0,Bt,Ft,Yt,Zt,Wt;this.setAutoRefigureSizes(!1);for(var Qt=0;Qt<this._items.length;Qt++)Qt&&Qt%Pt===0&&(st==="horizontal"?(Dt+=Lt,Rt=0):(Rt+=Lt,Dt=0)),Bt=this._items[Qt],Ft=Bt.getBounds(),Ft.width>Ft.height?Yt=Et:Yt=Et*(Ft.width/Ft.height),Zt=Yt*(Ft.height/Ft.width),Wt=new nt.Point(Rt+(Et-Yt)/2,Dt+(Et-Zt)/2),Bt.setPosition(Wt,it),Bt.setWidth(Yt,it),st==="horizontal"?Rt+=Lt:Dt+=Lt;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var rt=this._homeBounds?this._homeBounds.clone():null,it=this._contentSize?this._contentSize.clone():null,st=this._contentFactor||0;if(!this._items.length)this._homeBounds=new nt.Rect(0,0,1,1),this._contentSize=new nt.Point(1,1),this._contentFactor=1;else{var bt=this._items[0],xt=bt.getBounds();this._contentFactor=bt.getContentSize().x/xt.width;for(var Et=bt.getClippedBounds().getBoundingBox(),kt=Et.x,Lt=Et.y,Pt=Et.x+Et.width,Rt=Et.y+Et.height,Dt=1;Dt<this._items.length;Dt++)bt=this._items[Dt],xt=bt.getBounds(),this._contentFactor=Math.max(this._contentFactor,bt.getContentSize().x/xt.width),Et=bt.getClippedBounds().getBoundingBox(),kt=Math.min(kt,Et.x),Lt=Math.min(Lt,Et.y),Pt=Math.max(Pt,Et.x+Et.width),Rt=Math.max(Rt,Et.y+Et.height);this._homeBounds=new nt.Rect(kt,Lt,Pt-kt,Rt-Lt),this._contentSize=new nt.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==st||!this._homeBounds.equals(rt)||!this._contentSize.equals(it))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(rt){this.raiseEvent("remove-item",{item:rt})}})}(OpenSeadragon)}(openseadragon)),openseadragon.exports}var openseadragonExports=requireOpenseadragon(),openseadragonViewerinputhook={exports:{}};/*! @openseadragon-imaging/openseadragon-viewerinputhook 2.2.1 ab9b394 (clean)  @license MIT */(function(nt,rt){(function(it,st){nt.exports=st(requireOpenseadragon())})(window,function(it){return function(st){function bt(Et){if(xt[Et])return xt[Et].exports;var kt=xt[Et]={i:Et,l:!1,exports:{}};return st[Et].call(kt.exports,kt,kt.exports,bt),kt.l=!0,kt.exports}var xt={};return bt.m=st,bt.c=xt,bt.d=function(Et,kt,Lt){bt.o(Et,kt)||Object.defineProperty(Et,kt,{enumerable:!0,get:Lt})},bt.r=function(Et){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Et,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Et,"__esModule",{value:!0})},bt.t=function(Et,kt){if(1&kt&&(Et=bt(Et)),8&kt||4&kt&&typeof Et=="object"&&Et&&Et.__esModule)return Et;var Lt=Object.create(null);if(bt.r(Lt),Object.defineProperty(Lt,"default",{enumerable:!0,value:Et}),2&kt&&typeof Et!="string")for(var Pt in Et)bt.d(Lt,Pt,function(Rt){return Et[Rt]}.bind(null,Pt));return Lt},bt.n=function(Et){var kt=Et&&Et.__esModule?function(){return Et.default}:function(){return Et};return bt.d(kt,"a",kt),kt},bt.o=function(Et,kt){return Object.prototype.hasOwnProperty.call(Et,kt)},bt.p="",bt(bt.s=1)}([function(st){st.exports=it},function(st,bt,xt){xt.r(bt);var Et=xt(0),kt=xt.n(Et);bt.default=function(Lt,Pt){if(!Lt.version||1>Lt.version.major)throw new Error("OpenSeadragonViewerInputHook requires OpenSeadragon version 1.0.0+");return Lt.Viewer.prototype.addViewerInputHook=function(Rt){return(Rt=Rt||{}).viewer=this,new Pt.ViewerInputHook(Rt)},Pt.ViewerInputHook=function(Rt){var Dt,Bt;for((Rt=Rt||{}).hooks=Rt.hooks||[],this.viewer=Rt.viewer||null,this.viewerTrackers={},this.hooks=[],this.viewer&&(this.viewerTrackers.viewer=this.viewer.innerTracker,this.viewerTrackers.viewer_outer=this.viewer.outerTracker),Dt=0;Dt<Rt.hooks.length;Dt++){if(typeof Rt.hooks[Dt].tracker=="string"){if(!this.viewer)throw new Error("A viewer must be specified.");if((Bt=this.viewerTrackers[Rt.hooks[Dt].tracker])===void 0)throw new Error("Unknown tracker specified: "+Rt.hooks[Dt].tracker)}else Bt=Rt.hooks[Dt].tracker;this.hooks.push({tracker:Bt,handlerName:Rt.hooks[Dt].handler,origHandler:Bt[Rt.hooks[Dt].handler],hookHandler:Rt.hooks[Dt].hookHandler}),function(Ft,Yt,Zt,Wt){var Qt=Yt[Zt];Yt[Zt]=function(Kt){return Ft._callHandlers(Wt,Qt,Kt)}}(this,Bt,Rt.hooks[Dt].handler,Rt.hooks[Dt].hookHandler)}},Pt.ViewerInputHook.version={versionStr:"2.2.1",major:2,minor:2,revision:1},Pt.ViewerInputHook.prototype._callHandlers=function(Rt,Dt,Bt){var Ft=Rt(Bt);return Dt&&!Bt.stopHandlers&&(Ft=Dt(Bt)),!Bt.stopBubbling&&Ft},Pt.ViewerInputHook.prototype.destroy=function(){for(;0<this.hooks.length;){var Rt=this.hooks.pop();Rt.tracker[Rt.handlerName]=Rt.origHandler}this.viewer&&(delete this.viewerTrackers.viewer,delete this.viewerTrackers.viewer_outer,this.viewer=null)},Pt.ViewerInputHook}(kt.a||window.OpenSeadragon,window.OpenSeadragonImaging=window.OpenSeadragonImaging||{})}]).default})})(openseadragonViewerinputhook);const OpenSeadragonViewerInputHook=getDefaultExportFromCjs(openseadragonViewerinputhook.exports);var openseadragonAnnotorious_min={exports:{}};(function(nt,rt){var it=Object.defineProperty,st=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,Lt=(Ft,Yt,Zt)=>Yt in Ft?it(Ft,Yt,{enumerable:!0,configurable:!0,writable:!0,value:Zt}):Ft[Yt]=Zt,Pt=(Ft,Yt)=>{for(var Zt in Yt||(Yt={}))Et.call(Yt,Zt)&&Lt(Ft,Zt,Yt[Zt]);if(xt)for(var Zt of xt(Yt))kt.call(Yt,Zt)&&Lt(Ft,Zt,Yt[Zt]);return Ft},Rt=(Ft,Yt)=>st(Ft,bt(Yt)),Dt=(Ft,Yt)=>{var Zt={};for(var Wt in Ft)Et.call(Ft,Wt)&&Yt.indexOf(Wt)<0&&(Zt[Wt]=Ft[Wt]);if(Ft!=null&&xt)for(var Wt of xt(Ft))Yt.indexOf(Wt)<0&&kt.call(Ft,Wt)&&(Zt[Wt]=Ft[Wt]);return Zt},Bt=(Ft,Yt,Zt)=>(Lt(Ft,typeof Yt!="symbol"?Yt+"":Yt,Zt),Zt);(function(Ft,Yt){nt.exports=Yt(requireOpenseadragon())})(commonjsGlobal$1,function(Ft){function Yt(It){return It&&typeof It=="object"&&"default"in It?It:{default:It}}var Zt=Yt(Ft),Wt,Qt,Kt,on,nn,mn,gn,Tn={},An=[],kn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Mn(It,Mt){for(var zt in Mt)It[zt]=Mt[zt];return It}function $n(It){var Mt=It.parentNode;Mt&&Mt.removeChild(It)}function cn(It,Mt,zt){var Ht,Ut,Jt,ln={};for(Jt in Mt)Jt=="key"?Ht=Mt[Jt]:Jt=="ref"?Ut=Mt[Jt]:ln[Jt]=Mt[Jt];if(arguments.length>2&&(ln.children=arguments.length>3?Wt.call(arguments,2):zt),typeof It=="function"&&It.defaultProps!=null)for(Jt in It.defaultProps)ln[Jt]===void 0&&(ln[Jt]=It.defaultProps[Jt]);return Sn(It,ln,Ht,Ut,null)}function Sn(It,Mt,zt,Ht,Ut){var Jt={type:It,props:Mt,key:zt,ref:Ht,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ut==null?++Kt:Ut};return Qt.vnode!=null&&Qt.vnode(Jt),Jt}function an(){return{current:null}}function jn(It){return It.children}function hn(It,Mt){this.props=It,this.context=Mt}function zn(It,Mt){if(Mt==null)return It.__?zn(It.__,It.__.__k.indexOf(It)+1):null;for(var zt;Mt<It.__k.length;Mt++)if((zt=It.__k[Mt])!=null&&zt.__e!=null)return zt.__e;return typeof It.type=="function"?zn(It):null}function ir(It){var Mt,zt;if((It=It.__)!=null&&It.__c!=null){for(It.__e=It.__c.base=null,Mt=0;Mt<It.__k.length;Mt++)if((zt=It.__k[Mt])!=null&&zt.__e!=null){It.__e=It.__c.base=zt.__e;break}return ir(It)}}function tr(It){(!It.__d&&(It.__d=!0)&&on.push(It)&&!nr.__r++||mn!==Qt.debounceRendering)&&((mn=Qt.debounceRendering)||nn)(nr)}function nr(){for(var It;nr.__r=on.length;)It=on.sort(function(Mt,zt){return Mt.__v.__b-zt.__v.__b}),on=[],It.some(function(Mt){var zt,Ht,Ut,Jt,ln,bn;Mt.__d&&(ln=(Jt=(zt=Mt).__v).__e,(bn=zt.__P)&&(Ht=[],(Ut=Mn({},Jt)).__v=Jt.__v+1,yr(bn,Jt,Ut,zt.__n,bn.ownerSVGElement!==void 0,Jt.__h!=null?[ln]:null,Ht,ln==null?zn(Jt):ln,Jt.__h),pr(Ht,Jt),Jt.__e!=ln&&ir(Jt)))})}function dr(It,Mt,zt,Ht,Ut,Jt,ln,bn,Rn,Dn){var Pn,cr,Er,Ar,Wr,ii,ri,xi=Ht&&Ht.__k||An,Li=xi.length;for(zt.__k=[],Pn=0;Pn<Mt.length;Pn++)if((Ar=zt.__k[Pn]=(Ar=Mt[Pn])==null||typeof Ar=="boolean"?null:typeof Ar=="string"||typeof Ar=="number"||typeof Ar=="bigint"?Sn(null,Ar,null,null,Ar):Array.isArray(Ar)?Sn(jn,{children:Ar},null,null,null):Ar.__b>0?Sn(Ar.type,Ar.props,Ar.key,null,Ar.__v):Ar)!=null){if(Ar.__=zt,Ar.__b=zt.__b+1,(Er=xi[Pn])===null||Er&&Ar.key==Er.key&&Ar.type===Er.type)xi[Pn]=void 0;else for(cr=0;cr<Li;cr++){if((Er=xi[cr])&&Ar.key==Er.key&&Ar.type===Er.type){xi[cr]=void 0;break}Er=null}yr(It,Ar,Er=Er||Tn,Ut,Jt,ln,bn,Rn,Dn),Wr=Ar.__e,(cr=Ar.ref)&&Er.ref!=cr&&(ri||(ri=[]),Er.ref&&ri.push(Er.ref,null,Ar),ri.push(cr,Ar.__c||Wr,Ar)),Wr!=null?(ii==null&&(ii=Wr),typeof Ar.type=="function"&&Ar.__k!=null&&Ar.__k===Er.__k?Ar.__d=Rn=or(Ar,Rn,It):Rn=Cr(It,Ar,Er,xi,Wr,Rn),Dn||zt.type!=="option"?typeof zt.type=="function"&&(zt.__d=Rn):It.value=""):Rn&&Er.__e==Rn&&Rn.parentNode!=It&&(Rn=zn(Er))}for(zt.__e=ii,Pn=Li;Pn--;)xi[Pn]!=null&&(typeof zt.type=="function"&&xi[Pn].__e!=null&&xi[Pn].__e==zt.__d&&(zt.__d=zn(Ht,Pn+1)),dn(xi[Pn],xi[Pn]));if(ri)for(Pn=0;Pn<ri.length;Pn++)rn(ri[Pn],ri[++Pn],ri[++Pn])}function or(It,Mt,zt){var Ht,Ut;for(Ht=0;Ht<It.__k.length;Ht++)(Ut=It.__k[Ht])&&(Ut.__=It,Mt=typeof Ut.type=="function"?or(Ut,Mt,zt):Cr(zt,Ut,Ut,It.__k,Ut.__e,Mt));return Mt}function ur(It,Mt){return Mt=Mt||[],It==null||typeof It=="boolean"||(Array.isArray(It)?It.some(function(zt){ur(zt,Mt)}):Mt.push(It)),Mt}function Cr(It,Mt,zt,Ht,Ut,Jt){var ln,bn,Rn;if(Mt.__d!==void 0)ln=Mt.__d,Mt.__d=void 0;else if(zt==null||Ut!=Jt||Ut.parentNode==null)e:if(Jt==null||Jt.parentNode!==It)It.appendChild(Ut),ln=null;else{for(bn=Jt,Rn=0;(bn=bn.nextSibling)&&Rn<Ht.length;Rn+=2)if(bn==Ut)break e;It.insertBefore(Ut,Jt),ln=Jt}return ln!==void 0?ln:Ut.nextSibling}function Sr(It,Mt,zt,Ht,Ut){var Jt;for(Jt in zt)Jt==="children"||Jt==="key"||Jt in Mt||Fr(It,Jt,null,zt[Jt],Ht);for(Jt in Mt)Ut&&typeof Mt[Jt]!="function"||Jt==="children"||Jt==="key"||Jt==="value"||Jt==="checked"||zt[Jt]===Mt[Jt]||Fr(It,Jt,Mt[Jt],zt[Jt],Ht)}function rr(It,Mt,zt){Mt[0]==="-"?It.setProperty(Mt,zt):It[Mt]=zt==null?"":typeof zt!="number"||kn.test(Mt)?zt:zt+"px"}function Fr(It,Mt,zt,Ht,Ut){var Jt;e:if(Mt==="style")if(typeof zt=="string")It.style.cssText=zt;else{if(typeof Ht=="string"&&(It.style.cssText=Ht=""),Ht)for(Mt in Ht)zt&&Mt in zt||rr(It.style,Mt,"");if(zt)for(Mt in zt)Ht&&zt[Mt]===Ht[Mt]||rr(It.style,Mt,zt[Mt])}else if(Mt[0]==="o"&&Mt[1]==="n")Jt=Mt!==(Mt=Mt.replace(/Capture$/,"")),Mt=Mt.toLowerCase()in It?Mt.toLowerCase().slice(2):Mt.slice(2),It.l||(It.l={}),It.l[Mt+Jt]=zt,zt?Ht||It.addEventListener(Mt,Jt?_r:mr,Jt):It.removeEventListener(Mt,Jt?_r:mr,Jt);else if(Mt!=="dangerouslySetInnerHTML"){if(Ut)Mt=Mt.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Mt!=="href"&&Mt!=="list"&&Mt!=="form"&&Mt!=="tabIndex"&&Mt!=="download"&&Mt in It)try{It[Mt]=zt==null?"":zt;break e}catch{}typeof zt=="function"||(zt!=null&&(zt!==!1||Mt[0]==="a"&&Mt[1]==="r")?It.setAttribute(Mt,zt):It.removeAttribute(Mt))}}function mr(It){this.l[It.type+!1](Qt.event?Qt.event(It):It)}function _r(It){this.l[It.type+!0](Qt.event?Qt.event(It):It)}function yr(It,Mt,zt,Ht,Ut,Jt,ln,bn,Rn){var Dn,Pn,cr,Er,Ar,Wr,ii,ri,xi,Li,wo,po=Mt.type;if(Mt.constructor!==void 0)return null;zt.__h!=null&&(Rn=zt.__h,bn=Mt.__e=zt.__e,Mt.__h=null,Jt=[bn]),(Dn=Qt.__b)&&Dn(Mt);try{e:if(typeof po=="function"){if(ri=Mt.props,xi=(Dn=po.contextType)&&Ht[Dn.__c],Li=Dn?xi?xi.props.value:Dn.__:Ht,zt.__c?ii=(Pn=Mt.__c=zt.__c).__=Pn.__E:("prototype"in po&&po.prototype.render?Mt.__c=Pn=new po(ri,Li):(Mt.__c=Pn=new hn(ri,Li),Pn.constructor=po,Pn.render=fn),xi&&xi.sub(Pn),Pn.props=ri,Pn.state||(Pn.state={}),Pn.context=Li,Pn.__n=Ht,cr=Pn.__d=!0,Pn.__h=[]),Pn.__s==null&&(Pn.__s=Pn.state),po.getDerivedStateFromProps!=null&&(Pn.__s==Pn.state&&(Pn.__s=Mn({},Pn.__s)),Mn(Pn.__s,po.getDerivedStateFromProps(ri,Pn.__s))),Er=Pn.props,Ar=Pn.state,cr)po.getDerivedStateFromProps==null&&Pn.componentWillMount!=null&&Pn.componentWillMount(),Pn.componentDidMount!=null&&Pn.__h.push(Pn.componentDidMount);else{if(po.getDerivedStateFromProps==null&&ri!==Er&&Pn.componentWillReceiveProps!=null&&Pn.componentWillReceiveProps(ri,Li),!Pn.__e&&Pn.shouldComponentUpdate!=null&&Pn.shouldComponentUpdate(ri,Pn.__s,Li)===!1||Mt.__v===zt.__v){Pn.props=ri,Pn.state=Pn.__s,Mt.__v!==zt.__v&&(Pn.__d=!1),Pn.__v=Mt,Mt.__e=zt.__e,Mt.__k=zt.__k,Mt.__k.forEach(function(so){so&&(so.__=Mt)}),Pn.__h.length&&ln.push(Pn);break e}Pn.componentWillUpdate!=null&&Pn.componentWillUpdate(ri,Pn.__s,Li),Pn.componentDidUpdate!=null&&Pn.__h.push(function(){Pn.componentDidUpdate(Er,Ar,Wr)})}Pn.context=Li,Pn.props=ri,Pn.state=Pn.__s,(Dn=Qt.__r)&&Dn(Mt),Pn.__d=!1,Pn.__v=Mt,Pn.__P=It,Dn=Pn.render(Pn.props,Pn.state,Pn.context),Pn.state=Pn.__s,Pn.getChildContext!=null&&(Ht=Mn(Mn({},Ht),Pn.getChildContext())),cr||Pn.getSnapshotBeforeUpdate==null||(Wr=Pn.getSnapshotBeforeUpdate(Er,Ar)),wo=Dn!=null&&Dn.type===jn&&Dn.key==null?Dn.props.children:Dn,dr(It,Array.isArray(wo)?wo:[wo],Mt,zt,Ht,Ut,Jt,ln,bn,Rn),Pn.base=Mt.__e,Mt.__h=null,Pn.__h.length&&ln.push(Pn),ii&&(Pn.__E=Pn.__=null),Pn.__e=!1}else Jt==null&&Mt.__v===zt.__v?(Mt.__k=zt.__k,Mt.__e=zt.__e):Mt.__e=Cn(zt.__e,Mt,zt,Ht,Ut,Jt,ln,Rn);(Dn=Qt.diffed)&&Dn(Mt)}catch(so){Mt.__v=null,(Rn||Jt!=null)&&(Mt.__e=bn,Mt.__h=!!Rn,Jt[Jt.indexOf(bn)]=null),Qt.__e(so,Mt,zt)}}function pr(It,Mt){Qt.__c&&Qt.__c(Mt,It),It.some(function(zt){try{It=zt.__h,zt.__h=[],It.some(function(Ht){Ht.call(zt)})}catch(Ht){Qt.__e(Ht,zt.__v)}})}function Cn(It,Mt,zt,Ht,Ut,Jt,ln,bn){var Rn,Dn,Pn,cr=zt.props,Er=Mt.props,Ar=Mt.type,Wr=0;if(Ar==="svg"&&(Ut=!0),Jt!=null){for(;Wr<Jt.length;Wr++)if((Rn=Jt[Wr])&&(Rn===It||(Ar?Rn.localName==Ar:Rn.nodeType==3))){It=Rn,Jt[Wr]=null;break}}if(It==null){if(Ar===null)return document.createTextNode(Er);It=Ut?document.createElementNS("http://www.w3.org/2000/svg",Ar):document.createElement(Ar,Er.is&&Er),Jt=null,bn=!1}if(Ar===null)cr===Er||bn&&It.data===Er||(It.data=Er);else{if(Jt=Jt&&Wt.call(It.childNodes),Dn=(cr=zt.props||Tn).dangerouslySetInnerHTML,Pn=Er.dangerouslySetInnerHTML,!bn){if(Jt!=null)for(cr={},Wr=0;Wr<It.attributes.length;Wr++)cr[It.attributes[Wr].name]=It.attributes[Wr].value;(Pn||Dn)&&(Pn&&(Dn&&Pn.__html==Dn.__html||Pn.__html===It.innerHTML)||(It.innerHTML=Pn&&Pn.__html||""))}if(Sr(It,Er,cr,Ut,bn),Pn)Mt.__k=[];else if(Wr=Mt.props.children,dr(It,Array.isArray(Wr)?Wr:[Wr],Mt,zt,Ht,Ut&&Ar!=="foreignObject",Jt,ln,Jt?Jt[0]:zt.__k&&zn(zt,0),bn),Jt!=null)for(Wr=Jt.length;Wr--;)Jt[Wr]!=null&&$n(Jt[Wr]);bn||("value"in Er&&(Wr=Er.value)!==void 0&&(Wr!==It.value||Ar==="progress"&&!Wr)&&Fr(It,"value",Wr,cr.value,!1),"checked"in Er&&(Wr=Er.checked)!==void 0&&Wr!==It.checked&&Fr(It,"checked",Wr,cr.checked,!1))}return It}function rn(It,Mt,zt){try{typeof It=="function"?It(Mt):It.current=Mt}catch(Ht){Qt.__e(Ht,zt)}}function dn(It,Mt,zt){var Ht,Ut;if(Qt.unmount&&Qt.unmount(It),(Ht=It.ref)&&(Ht.current&&Ht.current!==It.__e||rn(Ht,null,Mt)),(Ht=It.__c)!=null){if(Ht.componentWillUnmount)try{Ht.componentWillUnmount()}catch(Jt){Qt.__e(Jt,Mt)}Ht.base=Ht.__P=null}if(Ht=It.__k)for(Ut=0;Ut<Ht.length;Ut++)Ht[Ut]&&dn(Ht[Ut],Mt,typeof It.type!="function");zt||It.__e==null||$n(It.__e),It.__e=It.__d=void 0}function fn(It,Mt,zt){return this.constructor(It,zt)}function On(It,Mt,zt){var Ht,Ut,Jt;Qt.__&&Qt.__(It,Mt),Ut=(Ht=typeof zt=="function")?null:zt&&zt.__k||Mt.__k,Jt=[],yr(Mt,It=(!Ht&&zt||Mt).__k=cn(jn,null,[It]),Ut||Tn,Tn,Mt.ownerSVGElement!==void 0,!Ht&&zt?[zt]:Ut?null:Mt.firstChild?Wt.call(Mt.childNodes):null,Jt,!Ht&&zt?zt:Ut?Ut.__e:Mt.firstChild,Ht),pr(Jt,It)}function xn(It,Mt){On(It,Mt,xn)}function hr(It,Mt,zt){var Ht,Ut,Jt,ln=Mn({},It.props);for(Jt in Mt)Jt=="key"?Ht=Mt[Jt]:Jt=="ref"?Ut=Mt[Jt]:ln[Jt]=Mt[Jt];return arguments.length>2&&(ln.children=arguments.length>3?Wt.call(arguments,2):zt),Sn(It.type,ln,Ht||It.key,Ut||It.ref,null)}function Nn(It,Mt){var zt={__c:Mt="__cC"+gn++,__:It,Consumer:function(Ht,Ut){return Ht.children(Ut)},Provider:function(Ht){var Ut,Jt;return this.getChildContext||(Ut=[],(Jt={})[Mt]=this,this.getChildContext=function(){return Jt},this.shouldComponentUpdate=function(ln){this.props.value!==ln.value&&Ut.some(tr)},this.sub=function(ln){Ut.push(ln);var bn=ln.componentWillUnmount;ln.componentWillUnmount=function(){Ut.splice(Ut.indexOf(ln),1),bn&&bn.call(ln)}}),Ht.children}};return zt.Provider.__=zt.Consumer.contextType=zt}Wt=An.slice,Qt={__e:function(It,Mt){for(var zt,Ht,Ut;Mt=Mt.__;)if((zt=Mt.__c)&&!zt.__)try{if((Ht=zt.constructor)&&Ht.getDerivedStateFromError!=null&&(zt.setState(Ht.getDerivedStateFromError(It)),Ut=zt.__d),zt.componentDidCatch!=null&&(zt.componentDidCatch(It),Ut=zt.__d),Ut)return zt.__E=zt}catch(Jt){It=Jt}throw It}},Kt=0,hn.prototype.setState=function(It,Mt){var zt;zt=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Mn({},this.state),typeof It=="function"&&(It=It(Mn({},zt),this.props)),It&&Mn(zt,It),It!=null&&this.__v&&(Mt&&this.__h.push(Mt),tr(this))},hn.prototype.forceUpdate=function(It){this.__v&&(this.__e=!0,It&&this.__h.push(It),tr(this))},hn.prototype.render=jn,on=[],nn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nr.__r=0,gn=0;var Kn,Un,sr,ar=0,wr=[],vr=Qt.__b,Rr=Qt.__r,ci=Qt.diffed,mi=Qt.__c,si=Qt.unmount;function yi(It,Mt){Qt.__h&&Qt.__h(Un,It,ar||Mt),ar=0;var zt=Un.__H||(Un.__H={__:[],__h:[]});return It>=zt.__.length&&zt.__.push({}),zt.__[It]}function Ni(It){return ar=1,Ii(hi,It)}function Ii(It,Mt,zt){var Ht=yi(Kn++,2);return Ht.t=It,Ht.__c||(Ht.__=[zt?zt(Mt):hi(void 0,Mt),function(Ut){var Jt=Ht.t(Ht.__[0],Ut);Ht.__[0]!==Jt&&(Ht.__=[Jt,Ht.__[1]],Ht.__c.setState({}))}],Ht.__c=Un),Ht.__}function Mi(It,Mt){var zt=yi(Kn++,3);!Qt.__s&&_i(zt.__H,Mt)&&(zt.__=It,zt.__H=Mt,Un.__H.__h.push(zt))}function Or(It,Mt){var zt=yi(Kn++,4);!Qt.__s&&_i(zt.__H,Mt)&&(zt.__=It,zt.__H=Mt,Un.__h.push(zt))}function Ln(It){return ar=5,Wn(function(){return{current:It}},[])}function En(It,Mt,zt){ar=6,Or(function(){typeof It=="function"?It(Mt()):It&&(It.current=Mt())},zt==null?zt:zt.concat(It))}function Wn(It,Mt){var zt=yi(Kn++,7);return _i(zt.__H,Mt)&&(zt.__=It(),zt.__H=Mt,zt.__h=It),zt.__}function er(It,Mt){return ar=8,Wn(function(){return It},Mt)}function fr(It){var Mt=Un.context[It.__c],zt=yi(Kn++,9);return zt.c=It,Mt?(zt.__==null&&(zt.__=!0,Mt.sub(Un)),Mt.props.value):It.__}function Zr(It,Mt){Qt.useDebugValue&&Qt.useDebugValue(Mt?Mt(It):It)}function gr(It){var Mt=yi(Kn++,10),zt=Ni();return Mt.__=It,Un.componentDidCatch||(Un.componentDidCatch=function(Ht){Mt.__&&Mt.__(Ht),zt[1](Ht)}),[zt[0],function(){zt[1](void 0)}]}function ti(){wr.forEach(function(It){if(It.__P)try{It.__H.__h.forEach(ai),It.__H.__h.forEach(ui),It.__H.__h=[]}catch(Mt){It.__H.__h=[],Qt.__e(Mt,It.__v)}}),wr=[]}Qt.__b=function(It){Un=null,vr&&vr(It)},Qt.__r=function(It){Rr&&Rr(It),Kn=0;var Mt=(Un=It.__c).__H;Mt&&(Mt.__h.forEach(ai),Mt.__h.forEach(ui),Mt.__h=[])},Qt.diffed=function(It){ci&&ci(It);var Mt=It.__c;Mt&&Mt.__H&&Mt.__H.__h.length&&(wr.push(Mt)!==1&&sr===Qt.requestAnimationFrame||((sr=Qt.requestAnimationFrame)||function(zt){var Ht,Ut=function(){clearTimeout(Jt),kr&&cancelAnimationFrame(Ht),setTimeout(zt)},Jt=setTimeout(Ut,100);kr&&(Ht=requestAnimationFrame(Ut))})(ti)),Un=void 0},Qt.__c=function(It,Mt){Mt.some(function(zt){try{zt.__h.forEach(ai),zt.__h=zt.__h.filter(function(Ht){return!Ht.__||ui(Ht)})}catch(Ht){Mt.some(function(Ut){Ut.__h&&(Ut.__h=[])}),Mt=[],Qt.__e(Ht,zt.__v)}}),mi&&mi(It,Mt)},Qt.unmount=function(It){si&&si(It);var Mt=It.__c;if(Mt&&Mt.__H)try{Mt.__H.__.forEach(ai)}catch(zt){Qt.__e(zt,Mt.__v)}};var kr=typeof requestAnimationFrame=="function";function ai(It){var Mt=Un;typeof It.__c=="function"&&It.__c(),Un=Mt}function ui(It){var Mt=Un;It.__c=It.__(),Un=Mt}function _i(It,Mt){return!It||It.length!==Mt.length||Mt.some(function(zt,Ht){return zt!==It[Ht]})}function hi(It,Mt){return typeof Mt=="function"?Mt(It):Mt}function ji(It,Mt){for(var zt in Mt)It[zt]=Mt[zt];return It}function Ei(It,Mt){for(var zt in It)if(zt!=="__source"&&!(zt in Mt))return!0;for(var Ht in Mt)if(Ht!=="__source"&&It[Ht]!==Mt[Ht])return!0;return!1}function Wi(It){this.props=It}function lo(It,Mt){function zt(Ut){var Jt=this.props.ref,ln=Jt==Ut.ref;return!ln&&Jt&&(Jt.call?Jt(null):Jt.current=null),Mt?!Mt(this.props,Ut)||!ln:Ei(this.props,Ut)}function Ht(Ut){return this.shouldComponentUpdate=zt,cn(It,Ut)}return Ht.displayName="Memo("+(It.displayName||It.name)+")",Ht.prototype.isReactComponent=!0,Ht.__f=!0,Ht}(Wi.prototype=new hn).isPureReactComponent=!0,Wi.prototype.shouldComponentUpdate=function(It,Mt){return Ei(this.props,It)||Ei(this.state,Mt)};var Xi=Qt.__b;Qt.__b=function(It){It.type&&It.type.__f&&It.ref&&(It.props.ref=It.ref,It.ref=null),Xi&&Xi(It)};var Ga=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ns(It){function Mt(zt,Ht){var Ut=ji({},zt);return delete Ut.ref,It(Ut,(Ht=zt.ref||Ht)&&(typeof Ht!="object"||"current"in Ht)?Ht:null)}return Mt.$$typeof=Ga,Mt.render=Mt,Mt.prototype.isReactComponent=Mt.__f=!0,Mt.displayName="ForwardRef("+(It.displayName||It.name)+")",Mt}var wi=function(It,Mt){return It==null?null:ur(ur(It).map(Mt))},qi={map:wi,forEach:wi,count:function(It){return It?ur(It).length:0},only:function(It){var Mt=ur(It);if(Mt.length!==1)throw"Children.only";return Mt[0]},toArray:ur},$s=Qt.__e;Qt.__e=function(It,Mt,zt){if(It.then){for(var Ht,Ut=Mt;Ut=Ut.__;)if((Ht=Ut.__c)&&Ht.__c)return Mt.__e==null&&(Mt.__e=zt.__e,Mt.__k=zt.__k),Ht.__c(It,Mt)}$s(It,Mt,zt)};var xs=Qt.unmount;function fs(){this.__u=0,this.t=null,this.__b=null}function Ts(It){var Mt=It.__.__c;return Mt&&Mt.__e&&Mt.__e(It)}function ws(It){var Mt,zt,Ht;function Ut(Jt){if(Mt||(Mt=It()).then(function(ln){zt=ln.default||ln},function(ln){Ht=ln}),Ht)throw Ht;if(!zt)throw Mt;return cn(zt,Jt)}return Ut.displayName="Lazy",Ut.__f=!0,Ut}function Lr(){this.u=null,this.o=null}Qt.unmount=function(It){var Mt=It.__c;Mt&&Mt.__R&&Mt.__R(),Mt&&It.__h===!0&&(It.type=null),xs&&xs(It)},(fs.prototype=new hn).__c=function(It,Mt){var zt=Mt.__c,Ht=this;Ht.t==null&&(Ht.t=[]),Ht.t.push(zt);var Ut=Ts(Ht.__v),Jt=!1,ln=function(){Jt||(Jt=!0,zt.__R=null,Ut?Ut(bn):bn())};zt.__R=ln;var bn=function(){if(!--Ht.__u){if(Ht.state.__e){var Dn=Ht.state.__e;Ht.__v.__k[0]=function cr(Er,Ar,Wr){return Er&&(Er.__v=null,Er.__k=Er.__k&&Er.__k.map(function(ii){return cr(ii,Ar,Wr)}),Er.__c&&Er.__c.__P===Ar&&(Er.__e&&Wr.insertBefore(Er.__e,Er.__d),Er.__c.__e=!0,Er.__c.__P=Wr)),Er}(Dn,Dn.__c.__P,Dn.__c.__O)}var Pn;for(Ht.setState({__e:Ht.__b=null});Pn=Ht.t.pop();)Pn.forceUpdate()}},Rn=Mt.__h===!0;Ht.__u++||Rn||Ht.setState({__e:Ht.__b=Ht.__v.__k[0]}),It.then(ln,ln)},fs.prototype.componentWillUnmount=function(){this.t=[]},fs.prototype.render=function(It,Mt){if(this.__b){if(this.__v.__k){var zt=document.createElement("div"),Ht=this.__v.__k[0].__c;this.__v.__k[0]=function Jt(ln,bn,Rn){return ln&&(ln.__c&&ln.__c.__H&&(ln.__c.__H.__.forEach(function(Dn){typeof Dn.__c=="function"&&Dn.__c()}),ln.__c.__H=null),(ln=ji({},ln)).__c!=null&&(ln.__c.__P===Rn&&(ln.__c.__P=bn),ln.__c=null),ln.__k=ln.__k&&ln.__k.map(function(Dn){return Jt(Dn,bn,Rn)})),ln}(this.__b,zt,Ht.__O=Ht.__P)}this.__b=null}var Ut=Mt.__e&&cn(jn,null,It.fallback);return Ut&&(Ut.__h=null),[cn(jn,null,Mt.__e?null:It.children),Ut]};var qr=function(It,Mt,zt){if(++zt[1]===zt[0]&&It.o.delete(Mt),It.props.revealOrder&&(It.props.revealOrder[0]!=="t"||!It.o.size))for(zt=It.u;zt;){for(;zt.length>3;)zt.pop()();if(zt[1]<zt[0])break;It.u=zt=zt[2]}};function Ir(It){return this.getChildContext=function(){return It.context},It.children}function lr(It){var Mt=this,zt=It.i;Mt.componentWillUnmount=function(){On(null,Mt.l),Mt.l=null,Mt.i=null},Mt.i&&Mt.i!==zt&&Mt.componentWillUnmount(),It.__v?(Mt.l||(Mt.i=zt,Mt.l={nodeType:1,parentNode:zt,childNodes:[],appendChild:function(Ht){this.childNodes.push(Ht),Mt.i.appendChild(Ht)},insertBefore:function(Ht,Ut){this.childNodes.push(Ht),Mt.i.appendChild(Ht)},removeChild:function(Ht){this.childNodes.splice(this.childNodes.indexOf(Ht)>>>1,1),Mt.i.removeChild(Ht)}}),On(cn(Ir,{context:Mt.context},It.__v),Mt.l)):Mt.l&&Mt.componentWillUnmount()}function zr(It,Mt){return cn(lr,{__v:It,i:Mt})}(Lr.prototype=new hn).__e=function(It){var Mt=this,zt=Ts(Mt.__v),Ht=Mt.o.get(It);return Ht[0]++,function(Ut){var Jt=function(){Mt.props.revealOrder?(Ht.push(Ut),qr(Mt,It,Ht)):Ut()};zt?zt(Jt):Jt()}},Lr.prototype.render=function(It){this.u=null,this.o=new Map;var Mt=ur(It.children);It.revealOrder&&It.revealOrder[0]==="b"&&Mt.reverse();for(var zt=Mt.length;zt--;)this.o.set(Mt[zt],this.u=[1,0,this.u]);return It.children},Lr.prototype.componentDidUpdate=Lr.prototype.componentDidMount=function(){var It=this;this.o.forEach(function(Mt,zt){qr(It,zt,Mt)})};var ni=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,fi=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,xo=function(It){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(It)};function mo(It,Mt,zt){return Mt.__k==null&&(Mt.textContent=""),On(It,Mt),typeof zt=="function"&&zt(),It?It.__c:null}function us(It,Mt,zt){return xn(It,Mt),typeof zt=="function"&&zt(),It?It.__c:null}hn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(It){Object.defineProperty(hn.prototype,It,{configurable:!0,get:function(){return this["UNSAFE_"+It]},set:function(Mt){Object.defineProperty(this,It,{configurable:!0,writable:!0,value:Mt})}})});var hs=Qt.event;function zo(){}function Is(){return this.cancelBubble}function Ys(){return this.defaultPrevented}Qt.event=function(It){return hs&&(It=hs(It)),It.persist=zo,It.isPropagationStopped=Is,It.isDefaultPrevented=Ys,It.nativeEvent=It};var ca,Fi={configurable:!0,get:function(){return this.class}},Zi=Qt.vnode;Qt.vnode=function(It){var Mt=It.type,zt=It.props,Ht=zt;if(typeof Mt=="string"){for(var Ut in Ht={},zt){var Jt=zt[Ut];Ut==="value"&&"defaultValue"in zt&&Jt==null||(Ut==="defaultValue"&&"value"in zt&&zt.value==null?Ut="value":Ut==="download"&&Jt===!0?Jt="":/ondoubleclick/i.test(Ut)?Ut="ondblclick":/^onchange(textarea|input)/i.test(Ut+Mt)&&!xo(zt.type)?Ut="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(Ut)?Ut=Ut.toLowerCase():fi.test(Ut)?Ut=Ut.replace(/[A-Z0-9]/,"-$&").toLowerCase():Jt===null&&(Jt=void 0),Ht[Ut]=Jt)}Mt=="select"&&Ht.multiple&&Array.isArray(Ht.value)&&(Ht.value=ur(zt.children).forEach(function(ln){ln.props.selected=Ht.value.indexOf(ln.props.value)!=-1})),Mt=="select"&&Ht.defaultValue!=null&&(Ht.value=ur(zt.children).forEach(function(ln){ln.props.selected=Ht.multiple?Ht.defaultValue.indexOf(ln.props.value)!=-1:Ht.defaultValue==ln.props.value})),It.props=Ht}Mt&&zt.class!=zt.className&&(Fi.enumerable="className"in zt,zt.className!=null&&(Ht.class=zt.className),Object.defineProperty(Ht,"className",Fi)),It.$$typeof=ni,Zi&&Zi(It)};var bo=Qt.__r;Qt.__r=function(It){bo&&bo(It),ca=It.__c};var bi={ReactCurrentDispatcher:{current:{readContext:function(It){return ca.__n[It.__c].props.value}}}},Yi="17.0.2";function br(It){return cn.bind(null,It)}function ll(It){return!!It&&It.$$typeof===ni}function Pr(It){return ll(It)?hr.apply(null,arguments):It}function ta(It){return!!It.__k&&(On(null,It),!0)}function Oc(It){return It&&(It.base||It.nodeType===1&&It)||null}var Eo=function(It,Mt){return It(Mt)},ro=function(It,Mt){return It(Mt)},Ah=jn,Ai={useState:Ni,useReducer:Ii,useEffect:Mi,useLayoutEffect:Or,useRef:Ln,useImperativeHandle:En,useMemo:Wn,useCallback:er,useContext:fr,useDebugValue:Zr,version:"17.0.2",Children:qi,render:mo,hydrate:us,unmountComponentAtNode:ta,createPortal:zr,createElement:cn,createContext:Nn,createFactory:br,cloneElement:Pr,createRef:an,Fragment:jn,isValidElement:ll,findDOMNode:Oc,Component:hn,PureComponent:Wi,memo:lo,forwardRef:Ns,flushSync:ro,unstable_batchedUpdates:Eo,StrictMode:jn,Suspense:fs,SuspenseList:Lr,lazy:ws,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:bi},oo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ai,version:Yi,Children:qi,render:mo,hydrate:us,unmountComponentAtNode:ta,createPortal:zr,createFactory:br,cloneElement:Pr,isValidElement:ll,findDOMNode:Oc,PureComponent:Wi,memo:lo,forwardRef:Ns,flushSync:ro,unstable_batchedUpdates:Eo,StrictMode:Ah,Suspense:fs,SuspenseList:Lr,lazy:ws,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:bi,createElement:cn,createContext:Nn,createRef:an,Fragment:jn,Component:hn,useState:Ni,useReducer:Ii,useEffect:Mi,useLayoutEffect:Or,useRef:Ln,useImperativeHandle:En,useMemo:Wn,useCallback:er,useContext:fr,useDebugValue:Zr,useErrorBoundary:gr}),Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:{};function tu(It){return It&&It.__esModule&&Object.prototype.hasOwnProperty.call(It,"default")?It.default:It}function cc(It){if(It.__esModule)return It;var Mt=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(It).forEach(function(zt){var Ht=Object.getOwnPropertyDescriptor(It,zt);Object.defineProperty(Mt,zt,Ht.get?Ht:{enumerable:!0,get:function(){return It[zt]}})}),Mt}var Hs={exports:{}};function Po(){}Po.prototype={on:function(It,Mt,zt){var Ht=this.e||(this.e={});return(Ht[It]||(Ht[It]=[])).push({fn:Mt,ctx:zt}),this},once:function(It,Mt,zt){var Ht=this;function Ut(){Ht.off(It,Ut),Mt.apply(zt,arguments)}return Ut._=Mt,this.on(It,Ut,zt)},emit:function(It){var Mt=[].slice.call(arguments,1),zt=((this.e||(this.e={}))[It]||[]).slice(),Ht=0,Ut=zt.length;for(Ht;Ht<Ut;Ht++)zt[Ht].fn.apply(zt[Ht].ctx,Mt);return this},off:function(It,Mt){var zt=this.e||(this.e={}),Ht=zt[It],Ut=[];if(Ht&&Mt)for(var Jt=0,ln=Ht.length;Jt<ln;Jt++)Ht[Jt].fn!==Mt&&Ht[Jt].fn._!==Mt&&Ut.push(Ht[Jt]);return Ut.length?zt[It]=Ut:delete zt[It],this}},Hs.exports=Po,Hs.exports.TinyEmitter=Po;var Wa=Hs.exports,na={exports:{}},$c={},Ba=cc(oo),Xl={exports:{}},el="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Yu=el,nu=Yu;function Su(){}function cl(){}cl.resetWarningCache=Su;var cd=function(){function It(Ht,Ut,Jt,ln,bn,Rn){if(Rn!==nu){var Dn=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Dn.name="Invariant Violation",Dn}}It.isRequired=It;function Mt(){return It}var zt={array:It,bool:It,func:It,number:It,object:It,string:It,symbol:It,any:It,arrayOf:Mt,element:It,elementType:It,instanceOf:Mt,node:It,objectOf:Mt,oneOf:Mt,oneOfType:Mt,shape:Mt,exact:Mt,checkPropTypes:cl,resetWarningCache:Su};return zt.PropTypes=zt,zt};Xl.exports=cd();function Lh(It){var Mt,zt,Ht="";if(typeof It=="string"||typeof It=="number")Ht+=It;else if(typeof It=="object")if(Array.isArray(It))for(Mt=0;Mt<It.length;Mt++)It[Mt]&&(zt=Lh(It[Mt]))&&(Ht&&(Ht+=" "),Ht+=zt);else for(Mt in It)It[Mt]&&(Ht&&(Ht+=" "),Ht+=Mt);return Ht}function Xu(){for(var It=0,Mt,zt,Ht="";It<arguments.length;)(Mt=arguments[It++])&&(zt=Lh(Mt))&&(Ht&&(Ht+=" "),Ht+=zt);return Ht}var Co=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xu}),uc=cc(Co),co={},Ml={};Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.findInArray=sp,Ml.isFunction=ap,Ml.isNum=ud,Ml.int=Zu,Ml.dontSetMe=lp;function sp(It,Mt){for(var zt=0,Ht=It.length;zt<Ht;zt++)if(Mt.apply(Mt,[It[zt],zt,It]))return It[zt]}function ap(It){return typeof It=="function"||Object.prototype.toString.call(It)==="[object Function]"}function ud(It){return typeof It=="number"&&!isNaN(It)}function Zu(It){return parseInt(It,10)}function lp(It,Mt,zt){if(It[Mt])return new Error("Invalid prop ".concat(Mt," passed to ").concat(zt," - do not set this, set it on the child."))}var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.getPrefix=Cu,Zl.browserPrefixToKey=cp,Zl.browserPrefixToStyle=mg,Zl.default=void 0;var ua=["Moz","Webkit","O","ms"];function Cu(){var It,Mt,zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var Ht=(It=window.document)===null||It===void 0||(Mt=It.documentElement)===null||Mt===void 0?void 0:Mt.style;if(!Ht||zt in Ht)return"";for(var Ut=0;Ut<ua.length;Ut++)if(cp(zt,ua[Ut])in Ht)return ua[Ut];return""}function cp(It,Mt){return Mt?"".concat(Mt).concat(Pm(It)):It}function mg(It,Mt){return Mt?"-".concat(Mt.toLowerCase(),"-").concat(It):It}function Pm(It){for(var Mt="",zt=!0,Ht=0;Ht<It.length;Ht++)zt?(Mt+=It[Ht].toUpperCase(),zt=!1):It[Ht]==="-"?zt=!0:Mt+=It[Ht];return Mt}var yg=Cu();Zl.default=yg;function Kl(It){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kl=function(Mt){return typeof Mt}:Kl=function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},Kl(It)}Object.defineProperty(co,"__esModule",{value:!0}),co.matchesSelector=fd,co.matchesSelectorAndParentsTo=$m,co.addEvent=vg,co.removeEvent=_g,co.outerHeight=up,co.outerWidth=ef,co.innerHeight=bg,co.innerWidth=Aa,co.offsetXYFromParent=hp,co.createCSSTransform=Rc,co.createSVGTransform=hc,co.getTranslation=dc,co.getTouch=pd,co.getTouchIdentifier=tf,co.addUserSelectStyles=Rm,co.removeUserSelectStyles=gd,co.addClassName=nf,co.removeClassName=Ph;var ul=Ml,Qd=Om(Zl);function ds(It){if(typeof WeakMap!="function")return null;var Mt=new WeakMap,zt=new WeakMap;return(ds=function(Ht){return Ht?zt:Mt})(It)}function Om(It,Mt){if(!Mt&&It&&It.__esModule)return It;if(It===null||Kl(It)!=="object"&&typeof It!="function")return{default:It};var zt=ds(Mt);if(zt&&zt.has(It))return zt.get(It);var Ht={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Jt in It)if(Jt!=="default"&&Object.prototype.hasOwnProperty.call(It,Jt)){var ln=Ut?Object.getOwnPropertyDescriptor(It,Jt):null;ln&&(ln.get||ln.set)?Object.defineProperty(Ht,Jt,ln):Ht[Jt]=It[Jt]}return Ht.default=It,zt&&zt.set(It,Ht),Ht}function wl(It,Mt){var zt=Object.keys(It);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(It);Mt&&(Ht=Ht.filter(function(Ut){return Object.getOwnPropertyDescriptor(It,Ut).enumerable})),zt.push.apply(zt,Ht)}return zt}function Ih(It){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt]!=null?arguments[Mt]:{};Mt%2?wl(Object(zt),!0).forEach(function(Ht){hd(It,Ht,zt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(zt)):wl(Object(zt)).forEach(function(Ht){Object.defineProperty(It,Ht,Object.getOwnPropertyDescriptor(zt,Ht))})}return It}function hd(It,Mt,zt){return Mt in It?Object.defineProperty(It,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[Mt]=zt,It}var dd="";function fd(It,Mt){return dd||(dd=(0,ul.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(zt){return(0,ul.isFunction)(It[zt])})),(0,ul.isFunction)(It[dd])?It[dd](Mt):!1}function $m(It,Mt,zt){var Ht=It;do{if(fd(Ht,Mt))return!0;if(Ht===zt)return!1;Ht=Ht.parentNode}while(Ht);return!1}function vg(It,Mt,zt,Ht){if(It){var Ut=Ih({capture:!0},Ht);It.addEventListener?It.addEventListener(Mt,zt,Ut):It.attachEvent?It.attachEvent("on"+Mt,zt):It["on"+Mt]=zt}}function _g(It,Mt,zt,Ht){if(It){var Ut=Ih({capture:!0},Ht);It.removeEventListener?It.removeEventListener(Mt,zt,Ut):It.detachEvent?It.detachEvent("on"+Mt,zt):It["on"+Mt]=null}}function up(It){var Mt=It.clientHeight,zt=It.ownerDocument.defaultView.getComputedStyle(It);return Mt+=(0,ul.int)(zt.borderTopWidth),Mt+=(0,ul.int)(zt.borderBottomWidth),Mt}function ef(It){var Mt=It.clientWidth,zt=It.ownerDocument.defaultView.getComputedStyle(It);return Mt+=(0,ul.int)(zt.borderLeftWidth),Mt+=(0,ul.int)(zt.borderRightWidth),Mt}function bg(It){var Mt=It.clientHeight,zt=It.ownerDocument.defaultView.getComputedStyle(It);return Mt-=(0,ul.int)(zt.paddingTop),Mt-=(0,ul.int)(zt.paddingBottom),Mt}function Aa(It){var Mt=It.clientWidth,zt=It.ownerDocument.defaultView.getComputedStyle(It);return Mt-=(0,ul.int)(zt.paddingLeft),Mt-=(0,ul.int)(zt.paddingRight),Mt}function hp(It,Mt,zt){var Ht=Mt===Mt.ownerDocument.body,Ut=Ht?{left:0,top:0}:Mt.getBoundingClientRect(),Jt=(It.clientX+Mt.scrollLeft-Ut.left)/zt,ln=(It.clientY+Mt.scrollTop-Ut.top)/zt;return{x:Jt,y:ln}}function Rc(It,Mt){var zt=dc(It,Mt,"px");return hd({},(0,Qd.browserPrefixToKey)("transform",Qd.default),zt)}function hc(It,Mt){var zt=dc(It,Mt,"");return zt}function dc(It,Mt,zt){var Ht=It.x,Ut=It.y,Jt="translate(".concat(Ht).concat(zt,",").concat(Ut).concat(zt,")");if(Mt){var ln="".concat(typeof Mt.x=="string"?Mt.x:Mt.x+zt),bn="".concat(typeof Mt.y=="string"?Mt.y:Mt.y+zt);Jt="translate(".concat(ln,", ").concat(bn,")")+Jt}return Jt}function pd(It,Mt){return It.targetTouches&&(0,ul.findInArray)(It.targetTouches,function(zt){return Mt===zt.identifier})||It.changedTouches&&(0,ul.findInArray)(It.changedTouches,function(zt){return Mt===zt.identifier})}function tf(It){if(It.targetTouches&&It.targetTouches[0])return It.targetTouches[0].identifier;if(It.changedTouches&&It.changedTouches[0])return It.changedTouches[0].identifier}function Rm(It){if(It){var Mt=It.getElementById("react-draggable-style-el");Mt||(Mt=It.createElement("style"),Mt.type="text/css",Mt.id="react-draggable-style-el",Mt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,Mt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,It.getElementsByTagName("head")[0].appendChild(Mt)),It.body&&nf(It.body,"react-draggable-transparent-selection")}}function gd(It){if(It)try{if(It.body&&Ph(It.body,"react-draggable-transparent-selection"),It.selection)It.selection.empty();else{var Mt=(It.defaultView||window).getSelection();Mt&&Mt.type!=="Caret"&&Mt.removeAllRanges()}}catch{}}function nf(It,Mt){It.classList?It.classList.add(Mt):It.className.match(new RegExp("(?:^|\\s)".concat(Mt,"(?!\\S)")))||(It.className+=" ".concat(Mt))}function Ph(It,Mt){It.classList?It.classList.remove(Mt):It.className=It.className.replace(new RegExp("(?:^|\\s)".concat(Mt,"(?!\\S)"),"g"),"")}var El={};Object.defineProperty(El,"__esModule",{value:!0}),El.getBoundPosition=xg,El.snapToGrid=wg,El.canDragX=rf,El.canDragY=Ku,El.getControlPosition=dp,El.createCoreData=md,El.createDraggableData=qa;var hl=Ml,Oh=co;function xg(It,Mt,zt){if(!It.props.bounds)return[Mt,zt];var Ht=It.props.bounds;Ht=typeof Ht=="string"?Ht:Eg(Ht);var Ut=Ea(It);if(typeof Ht=="string"){var Jt=Ut.ownerDocument,ln=Jt.defaultView,bn;if(Ht==="parent"?bn=Ut.parentNode:bn=Jt.querySelector(Ht),!(bn instanceof ln.HTMLElement))throw new Error('Bounds selector "'+Ht+'" could not find an element.');var Rn=bn,Dn=ln.getComputedStyle(Ut),Pn=ln.getComputedStyle(Rn);Ht={left:-Ut.offsetLeft+(0,hl.int)(Pn.paddingLeft)+(0,hl.int)(Dn.marginLeft),top:-Ut.offsetTop+(0,hl.int)(Pn.paddingTop)+(0,hl.int)(Dn.marginTop),right:(0,Oh.innerWidth)(Rn)-(0,Oh.outerWidth)(Ut)-Ut.offsetLeft+(0,hl.int)(Pn.paddingRight)-(0,hl.int)(Dn.marginRight),bottom:(0,Oh.innerHeight)(Rn)-(0,Oh.outerHeight)(Ut)-Ut.offsetTop+(0,hl.int)(Pn.paddingBottom)-(0,hl.int)(Dn.marginBottom)}}return(0,hl.isNum)(Ht.right)&&(Mt=Math.min(Mt,Ht.right)),(0,hl.isNum)(Ht.bottom)&&(zt=Math.min(zt,Ht.bottom)),(0,hl.isNum)(Ht.left)&&(Mt=Math.max(Mt,Ht.left)),(0,hl.isNum)(Ht.top)&&(zt=Math.max(zt,Ht.top)),[Mt,zt]}function wg(It,Mt,zt){var Ht=Math.round(Mt/It[0])*It[0],Ut=Math.round(zt/It[1])*It[1];return[Ht,Ut]}function rf(It){return It.props.axis==="both"||It.props.axis==="x"}function Ku(It){return It.props.axis==="both"||It.props.axis==="y"}function dp(It,Mt,zt){var Ht=typeof Mt=="number"?(0,Oh.getTouch)(It,Mt):null;if(typeof Mt=="number"&&!Ht)return null;var Ut=Ea(zt),Jt=zt.props.offsetParent||Ut.offsetParent||Ut.ownerDocument.body;return(0,Oh.offsetXYFromParent)(Ht||It,Jt,zt.props.scale)}function md(It,Mt,zt){var Ht=It.state,Ut=!(0,hl.isNum)(Ht.lastX),Jt=Ea(It);return Ut?{node:Jt,deltaX:0,deltaY:0,lastX:Mt,lastY:zt,x:Mt,y:zt}:{node:Jt,deltaX:Mt-Ht.lastX,deltaY:zt-Ht.lastY,lastX:Ht.lastX,lastY:Ht.lastY,x:Mt,y:zt}}function qa(It,Mt){var zt=It.props.scale;return{node:Mt.node,x:It.state.x+Mt.deltaX/zt,y:It.state.y+Mt.deltaY/zt,deltaX:Mt.deltaX/zt,deltaY:Mt.deltaY/zt,lastX:It.state.x,lastY:It.state.y}}function Eg(It){return{left:It.left,top:It.top,right:It.right,bottom:It.bottom}}function Ea(It){var Mt=It.findDOMNode();if(!Mt)throw new Error("<DraggableCore>: Unmounted during event!");return Mt}var Mc={},Ju={};Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.default=Qu;function Qu(){}function $h(It){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$h=function(Mt){return typeof Mt}:$h=function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},$h(It)}Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.default=void 0;var of=Sg(Ba),Fa=Sa(Xl.exports),fp=Sa(Ba),Ps=co,Nl=El,Rh=Ml,La=Sa(Ju);function Sa(It){return It&&It.__esModule?It:{default:It}}function fc(It){if(typeof WeakMap!="function")return null;var Mt=new WeakMap,zt=new WeakMap;return(fc=function(Ht){return Ht?zt:Mt})(It)}function Sg(It,Mt){if(!Mt&&It&&It.__esModule)return It;if(It===null||$h(It)!=="object"&&typeof It!="function")return{default:It};var zt=fc(Mt);if(zt&&zt.has(It))return zt.get(It);var Ht={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Jt in It)if(Jt!=="default"&&Object.prototype.hasOwnProperty.call(It,Jt)){var ln=Ut?Object.getOwnPropertyDescriptor(It,Jt):null;ln&&(ln.get||ln.set)?Object.defineProperty(Ht,Jt,ln):Ht[Jt]=It[Jt]}return Ht.default=It,zt&&zt.set(It,Ht),Ht}function Mh(It,Mt){return af(It)||ru(It,Mt)||eh(It,Mt)||sf()}function sf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eh(It,Mt){if(It){if(typeof It=="string")return pp(It,Mt);var zt=Object.prototype.toString.call(It).slice(8,-1);if(zt==="Object"&&It.constructor&&(zt=It.constructor.name),zt==="Map"||zt==="Set")return Array.from(It);if(zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt))return pp(It,Mt)}}function pp(It,Mt){(Mt==null||Mt>It.length)&&(Mt=It.length);for(var zt=0,Ht=new Array(Mt);zt<Mt;zt++)Ht[zt]=It[zt];return Ht}function ru(It,Mt){var zt=It==null?null:typeof Symbol<"u"&&It[Symbol.iterator]||It["@@iterator"];if(zt!=null){var Ht=[],Ut=!0,Jt=!1,ln,bn;try{for(zt=zt.call(It);!(Ut=(ln=zt.next()).done)&&(Ht.push(ln.value),!(Mt&&Ht.length===Mt));Ut=!0);}catch(Rn){Jt=!0,bn=Rn}finally{try{!Ut&&zt.return!=null&&zt.return()}finally{if(Jt)throw bn}}return Ht}}function af(It){if(Array.isArray(It))return It}function Mm(It,Mt){if(!(It instanceof Mt))throw new TypeError("Cannot call a class as a function")}function lf(It,Mt){for(var zt=0;zt<Mt.length;zt++){var Ht=Mt[zt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(It,Ht.key,Ht)}}function Nm(It,Mt,zt){return Mt&&lf(It.prototype,Mt),zt&&lf(It,zt),It}function iu(It,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Super expression must either be null or a function");It.prototype=Object.create(Mt&&Mt.prototype,{constructor:{value:It,writable:!0,configurable:!0}}),Mt&&gp(It,Mt)}function gp(It,Mt){return gp=Object.setPrototypeOf||function(zt,Ht){return zt.__proto__=Ht,zt},gp(It,Mt)}function Nh(It){var Mt=cf();return function(){var zt=yd(It),Ht;if(Mt){var Ut=yd(this).constructor;Ht=Reflect.construct(zt,arguments,Ut)}else Ht=zt.apply(this,arguments);return Dm(this,Ht)}}function Dm(It,Mt){if(Mt&&($h(Mt)==="object"||typeof Mt=="function"))return Mt;if(Mt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return js(It)}function js(It){if(It===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return It}function cf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yd(It){return yd=Object.setPrototypeOf?Object.getPrototypeOf:function(Mt){return Mt.__proto__||Object.getPrototypeOf(Mt)},yd(It)}function Sl(It,Mt,zt){return Mt in It?Object.defineProperty(It,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[Mt]=zt,It}var Cl={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Nc=Cl.mouse,th=function(It){iu(zt,It);var Mt=Nh(zt);function zt(){var Ht;Mm(this,zt);for(var Ut=arguments.length,Jt=new Array(Ut),ln=0;ln<Ut;ln++)Jt[ln]=arguments[ln];return Ht=Mt.call.apply(Mt,[this].concat(Jt)),Sl(js(Ht),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Sl(js(Ht),"mounted",!1),Sl(js(Ht),"handleDragStart",function(bn){if(Ht.props.onMouseDown(bn),!Ht.props.allowAnyClick&&typeof bn.button=="number"&&bn.button!==0)return!1;var Rn=Ht.findDOMNode();if(!Rn||!Rn.ownerDocument||!Rn.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Dn=Rn.ownerDocument;if(!(Ht.props.disabled||!(bn.target instanceof Dn.defaultView.Node)||Ht.props.handle&&!(0,Ps.matchesSelectorAndParentsTo)(bn.target,Ht.props.handle,Rn)||Ht.props.cancel&&(0,Ps.matchesSelectorAndParentsTo)(bn.target,Ht.props.cancel,Rn))){bn.type==="touchstart"&&bn.preventDefault();var Pn=(0,Ps.getTouchIdentifier)(bn);Ht.setState({touchIdentifier:Pn});var cr=(0,Nl.getControlPosition)(bn,Pn,js(Ht));if(cr!=null){var Er=cr.x,Ar=cr.y,Wr=(0,Nl.createCoreData)(js(Ht),Er,Ar);(0,La.default)("DraggableCore: handleDragStart: %j",Wr),(0,La.default)("calling",Ht.props.onStart);var ii=Ht.props.onStart(bn,Wr);ii===!1||Ht.mounted===!1||(Ht.props.enableUserSelectHack&&(0,Ps.addUserSelectStyles)(Dn),Ht.setState({dragging:!0,lastX:Er,lastY:Ar}),(0,Ps.addEvent)(Dn,Nc.move,Ht.handleDrag),(0,Ps.addEvent)(Dn,Nc.stop,Ht.handleDragStop))}}}),Sl(js(Ht),"handleDrag",function(bn){var Rn=(0,Nl.getControlPosition)(bn,Ht.state.touchIdentifier,js(Ht));if(Rn!=null){var Dn=Rn.x,Pn=Rn.y;if(Array.isArray(Ht.props.grid)){var cr=Dn-Ht.state.lastX,Er=Pn-Ht.state.lastY,Ar=(0,Nl.snapToGrid)(Ht.props.grid,cr,Er),Wr=Mh(Ar,2);if(cr=Wr[0],Er=Wr[1],!cr&&!Er)return;Dn=Ht.state.lastX+cr,Pn=Ht.state.lastY+Er}var ii=(0,Nl.createCoreData)(js(Ht),Dn,Pn);(0,La.default)("DraggableCore: handleDrag: %j",ii);var ri=Ht.props.onDrag(bn,ii);if(ri===!1||Ht.mounted===!1){try{Ht.handleDragStop(new MouseEvent("mouseup"))}catch{var xi=document.createEvent("MouseEvents");xi.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Ht.handleDragStop(xi)}return}Ht.setState({lastX:Dn,lastY:Pn})}}),Sl(js(Ht),"handleDragStop",function(bn){if(Ht.state.dragging){var Rn=(0,Nl.getControlPosition)(bn,Ht.state.touchIdentifier,js(Ht));if(Rn!=null){var Dn=Rn.x,Pn=Rn.y,cr=(0,Nl.createCoreData)(js(Ht),Dn,Pn),Er=Ht.props.onStop(bn,cr);if(Er===!1||Ht.mounted===!1)return!1;var Ar=Ht.findDOMNode();Ar&&Ht.props.enableUserSelectHack&&(0,Ps.removeUserSelectStyles)(Ar.ownerDocument),(0,La.default)("DraggableCore: handleDragStop: %j",cr),Ht.setState({dragging:!1,lastX:NaN,lastY:NaN}),Ar&&((0,La.default)("DraggableCore: Removing handlers"),(0,Ps.removeEvent)(Ar.ownerDocument,Nc.move,Ht.handleDrag),(0,Ps.removeEvent)(Ar.ownerDocument,Nc.stop,Ht.handleDragStop))}}}),Sl(js(Ht),"onMouseDown",function(bn){return Nc=Cl.mouse,Ht.handleDragStart(bn)}),Sl(js(Ht),"onMouseUp",function(bn){return Nc=Cl.mouse,Ht.handleDragStop(bn)}),Sl(js(Ht),"onTouchStart",function(bn){return Nc=Cl.touch,Ht.handleDragStart(bn)}),Sl(js(Ht),"onTouchEnd",function(bn){return Nc=Cl.touch,Ht.handleDragStop(bn)}),Ht}return Nm(zt,[{key:"componentDidMount",value:function(){this.mounted=!0;var Ht=this.findDOMNode();Ht&&(0,Ps.addEvent)(Ht,Cl.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Ht=this.findDOMNode();if(Ht){var Ut=Ht.ownerDocument;(0,Ps.removeEvent)(Ut,Cl.mouse.move,this.handleDrag),(0,Ps.removeEvent)(Ut,Cl.touch.move,this.handleDrag),(0,Ps.removeEvent)(Ut,Cl.mouse.stop,this.handleDragStop),(0,Ps.removeEvent)(Ut,Cl.touch.stop,this.handleDragStop),(0,Ps.removeEvent)(Ht,Cl.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ps.removeUserSelectStyles)(Ut)}}},{key:"findDOMNode",value:function(){var Ht,Ut,Jt;return(Ht=(Ut=this.props)===null||Ut===void 0||(Jt=Ut.nodeRef)===null||Jt===void 0?void 0:Jt.current)!==null&&Ht!==void 0?Ht:fp.default.findDOMNode(this)}},{key:"render",value:function(){return of.cloneElement(of.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),zt}(of.Component);Mc.default=th,Sl(th,"displayName","DraggableCore"),Sl(th,"propTypes",{allowAnyClick:Fa.default.bool,disabled:Fa.default.bool,enableUserSelectHack:Fa.default.bool,offsetParent:function(It,Mt){if(It[Mt]&&It[Mt].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Fa.default.arrayOf(Fa.default.number),handle:Fa.default.string,cancel:Fa.default.string,nodeRef:Fa.default.object,onStart:Fa.default.func,onDrag:Fa.default.func,onStop:Fa.default.func,onMouseDown:Fa.default.func,scale:Fa.default.number,className:Rh.dontSetMe,style:Rh.dontSetMe,transform:Rh.dontSetMe}),Sl(th,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(It){function Mt(li){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mt=function(Ti){return typeof Ti}:Mt=function(Ti){return Ti&&typeof Symbol=="function"&&Ti.constructor===Symbol&&Ti!==Symbol.prototype?"symbol":typeof Ti},Mt(li)}Object.defineProperty(It,"__esModule",{value:!0}),Object.defineProperty(It,"DraggableCore",{enumerable:!0,get:function(){return Dn.default}}),It.default=void 0;var zt=Wr(Ba),Ht=Er(Xl.exports),Ut=Er(Ba),Jt=Er(uc),ln=co,bn=El,Rn=Ml,Dn=Er(Mc),Pn=Er(Ju),cr=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function Er(li){return li&&li.__esModule?li:{default:li}}function Ar(li){if(typeof WeakMap!="function")return null;var Ti=new WeakMap,Pi=new WeakMap;return(Ar=function(ki){return ki?Pi:Ti})(li)}function Wr(li,Ti){if(!Ti&&li&&li.__esModule)return li;if(li===null||Mt(li)!=="object"&&typeof li!="function")return{default:li};var Pi=Ar(Ti);if(Pi&&Pi.has(li))return Pi.get(li);var ki={},Bi=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ko in li)if(ko!=="default"&&Object.prototype.hasOwnProperty.call(li,ko)){var wa=Bi?Object.getOwnPropertyDescriptor(li,ko):null;wa&&(wa.get||wa.set)?Object.defineProperty(ki,ko,wa):ki[ko]=li[ko]}return ki.default=li,Pi&&Pi.set(li,ki),ki}function ii(){return ii=Object.assign||function(li){for(var Ti=1;Ti<arguments.length;Ti++){var Pi=arguments[Ti];for(var ki in Pi)Object.prototype.hasOwnProperty.call(Pi,ki)&&(li[ki]=Pi[ki])}return li},ii.apply(this,arguments)}function ri(li,Ti){if(li==null)return{};var Pi=xi(li,Ti),ki,Bi;if(Object.getOwnPropertySymbols){var ko=Object.getOwnPropertySymbols(li);for(Bi=0;Bi<ko.length;Bi++)ki=ko[Bi],!(Ti.indexOf(ki)>=0)&&(!Object.prototype.propertyIsEnumerable.call(li,ki)||(Pi[ki]=li[ki]))}return Pi}function xi(li,Ti){if(li==null)return{};var Pi={},ki=Object.keys(li),Bi,ko;for(ko=0;ko<ki.length;ko++)Bi=ki[ko],!(Ti.indexOf(Bi)>=0)&&(Pi[Bi]=li[Bi]);return Pi}function Li(li,Ti){var Pi=Object.keys(li);if(Object.getOwnPropertySymbols){var ki=Object.getOwnPropertySymbols(li);Ti&&(ki=ki.filter(function(Bi){return Object.getOwnPropertyDescriptor(li,Bi).enumerable})),Pi.push.apply(Pi,ki)}return Pi}function wo(li){for(var Ti=1;Ti<arguments.length;Ti++){var Pi=arguments[Ti]!=null?arguments[Ti]:{};Ti%2?Li(Object(Pi),!0).forEach(function(ki){qu(li,ki,Pi[ki])}):Object.getOwnPropertyDescriptors?Object.defineProperties(li,Object.getOwnPropertyDescriptors(Pi)):Li(Object(Pi)).forEach(function(ki){Object.defineProperty(li,ki,Object.getOwnPropertyDescriptor(Pi,ki))})}return li}function po(li,Ti){return ka(li)||xa(li,Ti)||So(li,Ti)||so()}function so(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function So(li,Ti){if(li){if(typeof li=="string")return go(li,Ti);var Pi=Object.prototype.toString.call(li).slice(8,-1);if(Pi==="Object"&&li.constructor&&(Pi=li.constructor.name),Pi==="Map"||Pi==="Set")return Array.from(li);if(Pi==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pi))return go(li,Ti)}}function go(li,Ti){(Ti==null||Ti>li.length)&&(Ti=li.length);for(var Pi=0,ki=new Array(Ti);Pi<Ti;Pi++)ki[Pi]=li[Pi];return ki}function xa(li,Ti){var Pi=li==null?null:typeof Symbol<"u"&&li[Symbol.iterator]||li["@@iterator"];if(Pi!=null){var ki=[],Bi=!0,ko=!1,wa,xl;try{for(Pi=Pi.call(li);!(Bi=(wa=Pi.next()).done)&&(ki.push(wa.value),!(Ti&&ki.length===Ti));Bi=!0);}catch(qs){ko=!0,xl=qs}finally{try{!Bi&&Pi.return!=null&&Pi.return()}finally{if(ko)throw xl}}return ki}}function ka(li){if(Array.isArray(li))return li}function Gs(li,Ti){if(!(li instanceof Ti))throw new TypeError("Cannot call a class as a function")}function Ws(li,Ti){for(var Pi=0;Pi<Ti.length;Pi++){var ki=Ti[Pi];ki.enumerable=ki.enumerable||!1,ki.configurable=!0,"value"in ki&&(ki.writable=!0),Object.defineProperty(li,ki.key,ki)}}function Gu(li,Ti,Pi){return Ti&&Ws(li.prototype,Ti),Pi&&Ws(li,Pi),li}function Pc(li,Ti){if(typeof Ti!="function"&&Ti!==null)throw new TypeError("Super expression must either be null or a function");li.prototype=Object.create(Ti&&Ti.prototype,{constructor:{value:li,writable:!0,configurable:!0}}),Ti&&Jd(li,Ti)}function Jd(li,Ti){return Jd=Object.setPrototypeOf||function(Pi,ki){return Pi.__proto__=ki,Pi},Jd(li,Ti)}function Wu(li){var Ti=fv();return function(){var Pi=pg(li),ki;if(Ti){var Bi=pg(this).constructor;ki=Reflect.construct(Pi,arguments,Bi)}else ki=Pi.apply(this,arguments);return kh(this,ki)}}function kh(li,Ti){if(Ti&&(Mt(Ti)==="object"||typeof Ti=="function"))return Ti;if(Ti!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ql(li)}function ql(li){if(li===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return li}function fv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pg(li){return pg=Object.setPrototypeOf?Object.getPrototypeOf:function(Ti){return Ti.__proto__||Object.getPrototypeOf(Ti)},pg(li)}function qu(li,Ti,Pi){return Ti in li?Object.defineProperty(li,Ti,{value:Pi,enumerable:!0,configurable:!0,writable:!0}):li[Ti]=Pi,li}var la=function(li){Pc(Pi,li);var Ti=Wu(Pi);function Pi(ki){var Bi;return Gs(this,Pi),Bi=Ti.call(this,ki),qu(ql(Bi),"onDragStart",function(ko,wa){(0,Pn.default)("Draggable: onDragStart: %j",wa);var xl=Bi.props.onStart(ko,(0,bn.createDraggableData)(ql(Bi),wa));if(xl===!1)return!1;Bi.setState({dragging:!0,dragged:!0})}),qu(ql(Bi),"onDrag",function(ko,wa){if(!Bi.state.dragging)return!1;(0,Pn.default)("Draggable: onDrag: %j",wa);var xl=(0,bn.createDraggableData)(ql(Bi),wa),qs={x:xl.x,y:xl.y};if(Bi.props.bounds){var gg=qs.x,ld=qs.y;qs.x+=Bi.state.slackX,qs.y+=Bi.state.slackY;var op=(0,bn.getBoundPosition)(ql(Bi),qs.x,qs.y),Im=po(op,2),pv=Im[0],gv=Im[1];qs.x=pv,qs.y=gv,qs.slackX=Bi.state.slackX+(gg-qs.x),qs.slackY=Bi.state.slackY+(ld-qs.y),xl.x=qs.x,xl.y=qs.y,xl.deltaX=qs.x-Bi.state.x,xl.deltaY=qs.y-Bi.state.y}var j_=Bi.props.onDrag(ko,xl);if(j_===!1)return!1;Bi.setState(qs)}),qu(ql(Bi),"onDragStop",function(ko,wa){if(!Bi.state.dragging)return!1;var xl=Bi.props.onStop(ko,(0,bn.createDraggableData)(ql(Bi),wa));if(xl===!1)return!1;(0,Pn.default)("Draggable: onDragStop: %j",wa);var qs={dragging:!1,slackX:0,slackY:0},gg=Boolean(Bi.props.position);if(gg){var ld=Bi.props.position,op=ld.x,Im=ld.y;qs.x=op,qs.y=Im}Bi.setState(qs)}),Bi.state={dragging:!1,dragged:!1,x:ki.position?ki.position.x:ki.defaultPosition.x,y:ki.position?ki.position.y:ki.defaultPosition.y,prevPropsPosition:wo({},ki.position),slackX:0,slackY:0,isElementSVG:!1},ki.position&&!(ki.onDrag||ki.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Bi}return Gu(Pi,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var ki,Bi,ko;return(ki=(Bi=this.props)===null||Bi===void 0||(ko=Bi.nodeRef)===null||ko===void 0?void 0:ko.current)!==null&&ki!==void 0?ki:Ut.default.findDOMNode(this)}},{key:"render",value:function(){var ki,Bi=this.props;Bi.axis,Bi.bounds;var ko=Bi.children,wa=Bi.defaultPosition,xl=Bi.defaultClassName,qs=Bi.defaultClassNameDragging,gg=Bi.defaultClassNameDragged,ld=Bi.position,op=Bi.positionOffset;Bi.scale;var Im=ri(Bi,cr),pv={},gv=null,j_=Boolean(ld),Yb=!j_||this.state.dragging,Xb=ld||wa,Zb={x:(0,bn.canDragX)(this)&&Yb?this.state.x:Xb.x,y:(0,bn.canDragY)(this)&&Yb?this.state.y:Xb.y};this.state.isElementSVG?gv=(0,ln.createSVGTransform)(Zb,op):pv=(0,ln.createCSSTransform)(Zb,op);var yw=(0,Jt.default)(ko.props.className||"",xl,(ki={},qu(ki,qs,this.state.dragging),qu(ki,gg,this.state.dragged),ki));return zt.createElement(Dn.default,ii({},Im,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),zt.cloneElement(zt.Children.only(ko),{className:yw,style:wo(wo({},ko.props.style),pv),transform:gv}))}}],[{key:"getDerivedStateFromProps",value:function(ki,Bi){var ko=ki.position,wa=Bi.prevPropsPosition;return ko&&(!wa||ko.x!==wa.x||ko.y!==wa.y)?((0,Pn.default)("Draggable: getDerivedStateFromProps %j",{position:ko,prevPropsPosition:wa}),{x:ko.x,y:ko.y,prevPropsPosition:wo({},ko)}):null}}]),Pi}(zt.Component);It.default=la,qu(la,"displayName","Draggable"),qu(la,"propTypes",wo(wo({},Dn.default.propTypes),{},{axis:Ht.default.oneOf(["both","x","y","none"]),bounds:Ht.default.oneOfType([Ht.default.shape({left:Ht.default.number,right:Ht.default.number,top:Ht.default.number,bottom:Ht.default.number}),Ht.default.string,Ht.default.oneOf([!1])]),defaultClassName:Ht.default.string,defaultClassNameDragging:Ht.default.string,defaultClassNameDragged:Ht.default.string,defaultPosition:Ht.default.shape({x:Ht.default.number,y:Ht.default.number}),positionOffset:Ht.default.shape({x:Ht.default.oneOfType([Ht.default.number,Ht.default.string]),y:Ht.default.oneOfType([Ht.default.number,Ht.default.string])}),position:Ht.default.shape({x:Ht.default.number,y:Ht.default.number}),className:Rn.dontSetMe,style:Rn.dontSetMe,transform:Rn.dontSetMe})),qu(la,"defaultProps",wo(wo({},Dn.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}($c);var nh=$c,vd=nh.default,_d=nh.DraggableCore;na.exports=vd,na.exports.default=vd,na.exports.DraggableCore=_d;var uf=na.exports,Bm=["second","minute","hour","day","week","month","year"];function ou(It,Mt){if(Mt===0)return["just now","right now"];var zt=Bm[Math.floor(Mt/2)];return It>1&&(zt+="s"),[It+" "+zt+" ago","in "+It+" "+zt]}var Fm=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"];function mp(It,Mt){if(Mt===0)return["\u521A\u521A","\u7247\u523B\u540E"];var zt=Fm[~~(Mt/2)];return[It+" "+zt+"\u524D",It+" "+zt+"\u540E"]}var hf={},Xs=function(It,Mt){hf[It]=Mt},Cg=function(It){return hf[It]||hf.en_US},Vs=[60,60,24,7,365/7/12,12];function Dh(It){return It instanceof Date?It:!isNaN(It)||/^\d+$/.test(It)?new Date(parseInt(It)):(It=(It||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(It))}function Dc(It,Mt){var zt=It<0?1:0;It=Math.abs(It);for(var Ht=It,Ut=0;It>=Vs[Ut]&&Ut<Vs.length;Ut++)It/=Vs[Ut];return It=Math.floor(It),Ut*=2,It>(Ut===0?9:1)&&(Ut+=1),Mt(It,Ut,Ht)[zt].replace("%s",It.toString())}function Tu(It,Mt){var zt=Mt?Dh(Mt):new Date;return(+zt-+Dh(It))/1e3}function Tg(It){for(var Mt=1,zt=0,Ht=Math.abs(It);It>=Vs[zt]&&zt<Vs.length;zt++)It/=Vs[zt],Mt*=Vs[zt];return Ht=Ht%Mt,Ht=Ht?Mt-Ht:Mt,Math.ceil(Ht)}var yp=function(It,Mt,zt){var Ht=Tu(It,zt&&zt.relativeDate);return Dc(Ht,Cg(Mt))},df="timeago-id";function bd(It){return It.getAttribute("datetime")}function kg(It,Mt){It.setAttribute(df,Mt)}function ku(It){return parseInt(It.getAttribute(df))}var xd={},Bh=function(It){clearTimeout(It),delete xd[It]};function vp(It,Mt,zt,Ht){Bh(ku(It));var Ut=Ht.relativeDate,Jt=Ht.minInterval,ln=Tu(Mt,Ut);It.innerText=Dc(ln,zt);var bn=setTimeout(function(){vp(It,Mt,zt,Ht)},Math.min(Math.max(Tg(ln),Jt||1)*1e3,2147483647));xd[bn]=0,kg(It,bn)}function pc(It){It?Bh(ku(It)):Object.keys(xd).forEach(Bh)}function ff(It,Mt,zt){var Ht=It.length?It:[It];return Ht.forEach(function(Ut){vp(Ut,bd(Ut),Cg(Mt),zt||{})}),Ht}Xs("en_US",ou),Xs("zh_CN",mp);var pf=function(){var It=function(Mt,zt){return It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ht,Ut){Ht.__proto__=Ut}||function(Ht,Ut){for(var Jt in Ut)Ut.hasOwnProperty(Jt)&&(Ht[Jt]=Ut[Jt])},It(Mt,zt)};return function(Mt,zt){It(Mt,zt);function Ht(){this.constructor=Mt}Mt.prototype=zt===null?Object.create(zt):(Ht.prototype=zt.prototype,new Ht)}}(),Au=function(){return Au=Object.assign||function(It){for(var Mt,zt=1,Ht=arguments.length;zt<Ht;zt++){Mt=arguments[zt];for(var Ut in Mt)Object.prototype.hasOwnProperty.call(Mt,Ut)&&(It[Ut]=Mt[Ut])}return It},Au.apply(this,arguments)},Tl=function(It,Mt){var zt={};for(var Ht in It)Object.prototype.hasOwnProperty.call(It,Ht)&&Mt.indexOf(Ht)<0&&(zt[Ht]=It[Ht]);if(It!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Ht=Object.getOwnPropertySymbols(It);Ut<Ht.length;Ut++)Mt.indexOf(Ht[Ut])<0&&Object.prototype.propertyIsEnumerable.call(It,Ht[Ut])&&(zt[Ht[Ut]]=It[Ht[Ut]]);return zt},gf=function(It){return""+(It instanceof Date?It.getTime():It)},Fh=function(It){pf(Mt,It);function Mt(){var zt=It!==null&&It.apply(this,arguments)||this;return zt.dom=null,zt}return Mt.prototype.componentDidMount=function(){this.renderTimeAgo()},Mt.prototype.componentDidUpdate=function(){this.renderTimeAgo()},Mt.prototype.renderTimeAgo=function(){var zt=this.props,Ht=zt.live,Ut=zt.datetime,Jt=zt.locale,ln=zt.opts;pc(this.dom),Ht!==!1&&(this.dom.setAttribute("datetime",gf(Ut)),ff(this.dom,Jt,ln))},Mt.prototype.componentWillUnmount=function(){pc(this.dom)},Mt.prototype.render=function(){var zt=this,Ht=this.props,Ut=Ht.datetime;Ht.live;var Jt=Ht.locale,ln=Ht.opts,bn=Tl(Ht,["datetime","live","locale","opts"]);return cn("time",Au({ref:function(Rn){zt.dom=Rn}},bn),yp(Ut,Jt,ln))},Mt.defaultProps={live:!0,className:""},Mt}(Wi);function _p(It,Mt){const zt=Ht=>{It.current&&!It.current.contains(event.target)&&Mt()};Mi(()=>(document.addEventListener("mousedown",zt),()=>document.removeEventListener("mousedown",zt)))}var mf=Object.prototype.toString,Ag=function(It){var Mt=mf.call(It),zt=Mt==="[object Arguments]";return zt||(zt=Mt!=="[object Array]"&&It!==null&&typeof It=="object"&&typeof It.length=="number"&&It.length>=0&&mf.call(It.callee)==="[object Function]"),zt},yf;if(!Object.keys){var zh=Object.prototype.hasOwnProperty,wd=Object.prototype.toString,Lg=Ag,rh=Object.prototype.propertyIsEnumerable,zm=!rh.call({toString:null},"toString"),bp=rh.call(function(){},"prototype"),Hh=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],jh=function(It){var Mt=It.constructor;return Mt&&Mt.prototype===It},$t={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Vt=function(){if(typeof window>"u")return!1;for(var It in window)try{if(!$t["$"+It]&&zh.call(window,It)&&window[It]!==null&&typeof window[It]=="object")try{jh(window[It])}catch{return!0}}catch{return!0}return!1}(),tn=function(It){if(typeof window>"u"||!Vt)return jh(It);try{return jh(It)}catch{return!1}};yf=function(It){var Mt=It!==null&&typeof It=="object",zt=wd.call(It)==="[object Function]",Ht=Lg(It),Ut=Mt&&wd.call(It)==="[object String]",Jt=[];if(!Mt&&!zt&&!Ht)throw new TypeError("Object.keys called on a non-object");var ln=bp&&zt;if(Ut&&It.length>0&&!zh.call(It,0))for(var bn=0;bn<It.length;++bn)Jt.push(String(bn));if(Ht&&It.length>0)for(var Rn=0;Rn<It.length;++Rn)Jt.push(String(Rn));else for(var Dn in It)!(ln&&Dn==="prototype")&&zh.call(It,Dn)&&Jt.push(String(Dn));if(zm)for(var Pn=tn(It),cr=0;cr<Hh.length;++cr)!(Pn&&Hh[cr]==="constructor")&&zh.call(It,Hh[cr])&&Jt.push(Hh[cr]);return Jt}}var pn=yf,In=Array.prototype.slice,Jn=Ag,Tr=Object.keys,Vr=Tr?function(It){return Tr(It)}:pn,Jr=Object.keys;Vr.shim=function(){if(Object.keys){var It=function(){var Mt=Object.keys(arguments);return Mt&&Mt.length===arguments.length}(1,2);It||(Object.keys=function(Mt){return Jn(Mt)?Jr(In.call(Mt)):Jr(Mt)})}else Object.keys=Vr;return Object.keys||Vr};var oi=Vr,$i=oi,uo=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Oo=Object.prototype.toString,tl=Array.prototype.concat,ha=Object.defineProperty,nl=function(It){return typeof It=="function"&&Oo.call(It)==="[object Function]"},dl=function(){var It={};try{ha(It,"x",{enumerable:!1,value:It});for(var Mt in It)return!1;return It.x===It}catch{return!1}},Lu=ha&&dl(),Ig=function(It,Mt,zt,Ht){Mt in It&&(!nl(Ht)||!Ht())||(Lu?ha(It,Mt,{configurable:!0,enumerable:!1,value:zt,writable:!0}):It[Mt]=zt)},xp=function(It,Mt){var zt=arguments.length>2?arguments[2]:{},Ht=$i(Mt);uo&&(Ht=tl.call(Ht,Object.getOwnPropertySymbols(Mt)));for(var Ut=0;Ut<Ht.length;Ut+=1)Ig(It,Ht[Ut],Mt[Ht[Ut]],zt[Ht[Ut]])};xp.supportsDescriptors=!!Lu;var ih=xp,oh={exports:{}},wp="Function.prototype.bind called on incompatible ",su=Array.prototype.slice,da=Object.prototype.toString,Ed="[object Function]",Pg=function(It){var Mt=this;if(typeof Mt!="function"||da.call(Mt)!==Ed)throw new TypeError(wp+Mt);for(var zt=su.call(arguments,1),Ht,Ut=function(){if(this instanceof Ht){var Dn=Mt.apply(this,zt.concat(su.call(arguments)));return Object(Dn)===Dn?Dn:this}else return Mt.apply(It,zt.concat(su.call(arguments)))},Jt=Math.max(0,Mt.length-zt.length),ln=[],bn=0;bn<Jt;bn++)ln.push("$"+bn);if(Ht=Function("binder","return function ("+ln.join(",")+"){ return binder.apply(this,arguments); }")(Ut),Mt.prototype){var Rn=function(){};Rn.prototype=Mt.prototype,Ht.prototype=new Rn,Rn.prototype=null}return Ht},Vh=Pg,vf=Function.prototype.bind||Vh,Sd=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var It={},Mt=Symbol("test"),zt=Object(Mt);if(typeof Mt=="string"||Object.prototype.toString.call(Mt)!=="[object Symbol]"||Object.prototype.toString.call(zt)!=="[object Symbol]")return!1;var Ht=42;It[Mt]=Ht;for(Mt in It)return!1;if(typeof Object.keys=="function"&&Object.keys(It).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(It).length!==0)return!1;var Ut=Object.getOwnPropertySymbols(It);if(Ut.length!==1||Ut[0]!==Mt||!Object.prototype.propertyIsEnumerable.call(It,Mt))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var Jt=Object.getOwnPropertyDescriptor(It,Mt);if(Jt.value!==Ht||Jt.enumerable!==!0)return!1}return!0},_f=typeof Symbol<"u"&&Symbol,sh=Sd,Hm=function(){return typeof _f!="function"||typeof Symbol!="function"||typeof _f("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:sh()},bf=vf,jm=bf.call(Function.call,Object.prototype.hasOwnProperty),Es,ah=SyntaxError,Ep=Function,lh=TypeError,Og=function(It){try{return Ep('"use strict"; return ('+It+").constructor;")()}catch{}},Uh=Object.getOwnPropertyDescriptor;if(Uh)try{Uh({},"")}catch{Uh=null}var Vm=function(){throw new lh},p1=Uh?function(){try{return arguments.callee,Vm}catch{try{return Uh(arguments,"callee").get}catch{return Vm}}}():Vm,Bc=Hm(),Gh=Object.getPrototypeOf||function(It){return It.__proto__},Ca={},au=typeof Uint8Array>"u"?Es:Gh(Uint8Array),Ao={"%AggregateError%":typeof AggregateError>"u"?Es:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Es:ArrayBuffer,"%ArrayIteratorPrototype%":Bc?Gh([][Symbol.iterator]()):Es,"%AsyncFromSyncIteratorPrototype%":Es,"%AsyncFunction%":Ca,"%AsyncGenerator%":Ca,"%AsyncGeneratorFunction%":Ca,"%AsyncIteratorPrototype%":Ca,"%Atomics%":typeof Atomics>"u"?Es:Atomics,"%BigInt%":typeof BigInt>"u"?Es:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Es:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Es:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Es:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Es:FinalizationRegistry,"%Function%":Ep,"%GeneratorFunction%":Ca,"%Int8Array%":typeof Int8Array>"u"?Es:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Es:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Es:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bc?Gh(Gh([][Symbol.iterator]())):Es,"%JSON%":typeof JSON=="object"?JSON:Es,"%Map%":typeof Map>"u"?Es:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Bc?Es:Gh(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Es:Promise,"%Proxy%":typeof Proxy>"u"?Es:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Es:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Es:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Bc?Es:Gh(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Es:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bc?Gh(""[Symbol.iterator]()):Es,"%Symbol%":Bc?Symbol:Es,"%SyntaxError%":ah,"%ThrowTypeError%":p1,"%TypedArray%":au,"%TypeError%":lh,"%Uint8Array%":typeof Uint8Array>"u"?Es:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Es:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Es:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Es:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Es:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Es:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Es:WeakSet},Yo=function It(Mt){var zt;if(Mt==="%AsyncFunction%")zt=Og("async function () {}");else if(Mt==="%GeneratorFunction%")zt=Og("function* () {}");else if(Mt==="%AsyncGeneratorFunction%")zt=Og("async function* () {}");else if(Mt==="%AsyncGenerator%"){var Ht=It("%AsyncGeneratorFunction%");Ht&&(zt=Ht.prototype)}else if(Mt==="%AsyncIteratorPrototype%"){var Ut=It("%AsyncGenerator%");Ut&&(zt=Gh(Ut.prototype))}return Ao[Mt]=zt,zt},Ho={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$o=vf,Ro=jm,Xo=$o.call(Function.call,Array.prototype.concat),Zo=$o.call(Function.apply,Array.prototype.splice),jo=$o.call(Function.call,String.prototype.replace),Mo=$o.call(Function.call,String.prototype.slice),Ko=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Jo=/\\(\\)?/g,Qo=function(It){var Mt=Mo(It,0,1),zt=Mo(It,-1);if(Mt==="%"&&zt!=="%")throw new ah("invalid intrinsic syntax, expected closing `%`");if(zt==="%"&&Mt!=="%")throw new ah("invalid intrinsic syntax, expected opening `%`");var Ht=[];return jo(It,Ko,function(Ut,Jt,ln,bn){Ht[Ht.length]=ln?jo(bn,Jo,"$1"):Jt||Ut}),Ht},es=function(It,Mt){var zt=It,Ht;if(Ro(Ho,zt)&&(Ht=Ho[zt],zt="%"+Ht[0]+"%"),Ro(Ao,zt)){var Ut=Ao[zt];if(Ut===Ca&&(Ut=Yo(zt)),typeof Ut>"u"&&!Mt)throw new lh("intrinsic "+It+" exists, but is not available. Please file an issue!");return{alias:Ht,name:zt,value:Ut}}throw new ah("intrinsic "+It+" does not exist!")},ao=function(It,Mt){if(typeof It!="string"||It.length===0)throw new lh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Mt!="boolean")throw new lh('"allowMissing" argument must be a boolean');var zt=Qo(It),Ht=zt.length>0?zt[0]:"",Ut=es("%"+Ht+"%",Mt),Jt=Ut.name,ln=Ut.value,bn=!1,Rn=Ut.alias;Rn&&(Ht=Rn[0],Zo(zt,Xo([0,1],Rn)));for(var Dn=1,Pn=!0;Dn<zt.length;Dn+=1){var cr=zt[Dn],Er=Mo(cr,0,1),Ar=Mo(cr,-1);if((Er==='"'||Er==="'"||Er==="`"||Ar==='"'||Ar==="'"||Ar==="`")&&Er!==Ar)throw new ah("property names with quotes must have matching quotes");if((cr==="constructor"||!Pn)&&(bn=!0),Ht+="."+cr,Jt="%"+Ht+"%",Ro(Ao,Jt))ln=Ao[Jt];else if(ln!=null){if(!(cr in ln)){if(!Mt)throw new lh("base intrinsic for "+It+" exists, but the property is not available.");return}if(Uh&&Dn+1>=zt.length){var Wr=Uh(ln,cr);Pn=!!Wr,Pn&&"get"in Wr&&!("originalValue"in Wr.get)?ln=Wr.get:ln=ln[cr]}else Pn=Ro(ln,cr),ln=ln[cr];Pn&&!bn&&(Ao[Jt]=ln)}}return ln};(function(It){var Mt=vf,zt=ao,Ht=zt("%Function.prototype.apply%"),Ut=zt("%Function.prototype.call%"),Jt=zt("%Reflect.apply%",!0)||Mt.call(Ut,Ht),ln=zt("%Object.getOwnPropertyDescriptor%",!0),bn=zt("%Object.defineProperty%",!0),Rn=zt("%Math.max%");if(bn)try{bn({},"a",{value:1})}catch{bn=null}It.exports=function(Pn){var cr=Jt(Mt,Ut,arguments);if(ln&&bn){var Er=ln(cr,"length");Er.configurable&&bn(cr,"length",{value:1+Rn(0,Pn.length-(arguments.length-1))})}return cr};var Dn=function(){return Jt(Mt,Ht,arguments)};bn?bn(It.exports,"apply",{value:Dn}):It.exports.apply=Dn})(oh);var Vo=ao,Uo=oh.exports,ts=Uo(Vo("String.prototype.indexOf")),To=function(It,Mt){var zt=Vo(It,!!Mt);return typeof zt=="function"&&ts(It,".prototype.")>-1?Uo(zt):zt},ns=ao,rs=ns("%TypeError%"),is=function(It,Mt){if(It==null)throw new rs(Mt||"Cannot call method on "+It);return It},No=is,os=ao,Go=os("%Array%"),Um=!Go.isArray&&To("Object.prototype.toString"),Gm=Go.isArray||function(It){return Um(It)==="[object Array]"},$g=ao,Wm=To,qm=$g("%TypeError%"),Ym=Gm,Xm=$g("%Reflect.apply%",!0)||Wm("%Function.prototype.apply%"),Zm=function(It,Mt){var zt=arguments.length>2?arguments[2]:[];if(!Ym(zt))throw new qm("Assertion failed: optional `argumentsList`, if provided, must be a List");return Xm(It,Mt,zt)},Di={},Ri=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Di}),Ki=cc(Ri),Ui=typeof Map=="function"&&Map.prototype,io=Object.getOwnPropertyDescriptor&&Ui?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,eo=Ui&&io&&typeof io.get=="function"?io.get:null,ss=Ui&&Map.prototype.forEach,Wo=typeof Set=="function"&&Set.prototype,Ci=Object.getOwnPropertyDescriptor&&Wo?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,qn=Wo&&Ci&&typeof Ci.get=="function"?Ci.get:null,Km=Wo&&Set.prototype.forEach,yv=typeof WeakMap=="function"&&WeakMap.prototype,Sp=yv?WeakMap.prototype.has:null,vv=typeof WeakSet=="function"&&WeakSet.prototype,Cp=vv?WeakSet.prototype.has:null,_v=typeof WeakRef=="function"&&WeakRef.prototype,g1=_v?WeakRef.prototype.deref:null,bv=Boolean.prototype.valueOf,m1=Object.prototype.toString,y1=Function.prototype.toString,v1=String.prototype.match,xf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Tp=Object.getOwnPropertySymbols,Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,wf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Qm=Object.prototype.propertyIsEnumerable,e0=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(It){return It.__proto__}:null),Rg=Ki.custom,n0=Rg&&o0(Rg)?Rg:null,fl=typeof Symbol=="function"&&typeof Symbol.toStringTag<"u"?Symbol.toStringTag:null,xv=function It(Mt,zt,Ht,Ut){var Jt=zt||{};if(Wh(Jt,"quoteStyle")&&Jt.quoteStyle!=="single"&&Jt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Wh(Jt,"maxStringLength")&&(typeof Jt.maxStringLength=="number"?Jt.maxStringLength<0&&Jt.maxStringLength!==1/0:Jt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ln=Wh(Jt,"customInspect")?Jt.customInspect:!0;if(typeof ln!="boolean"&&ln!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Wh(Jt,"indent")&&Jt.indent!==null&&Jt.indent!=="	"&&!(parseInt(Jt.indent,10)===Jt.indent&&Jt.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(typeof Mt>"u")return"undefined";if(Mt===null)return"null";if(typeof Mt=="boolean")return Mt?"true":"false";if(typeof Mt=="string")return a0(Mt,Jt);if(typeof Mt=="number")return Mt===0?1/0/Mt>0?"0":"-0":String(Mt);if(typeof Mt=="bigint")return String(Mt)+"n";var bn=typeof Jt.depth>"u"?5:Jt.depth;if(typeof Ht>"u"&&(Ht=0),Ht>=bn&&bn>0&&typeof Mt=="object")return Mg(Mt)?"[Array]":"[Object]";var Rn=k1(Jt,Ht);if(typeof Ut>"u")Ut=[];else if(s0(Ut,Mt)>=0)return"[Circular]";function Dn(Gs,Ws,Gu){if(Ws&&(Ut=Ut.slice(),Ut.push(Ws)),Gu){var Pc={depth:Jt.depth};return Wh(Jt,"quoteStyle")&&(Pc.quoteStyle=Jt.quoteStyle),It(Gs,Pc,Ht+1,Ut)}return It(Gs,Jt,Ht+1,Ut)}if(typeof Mt=="function"){var Pn=Sv(Mt),cr=Ng(Mt,Dn);return"[Function"+(Pn?": "+Pn:" (anonymous)")+"]"+(cr.length>0?" { "+cr.join(", ")+" }":"")}if(o0(Mt)){var Er=wf?String(Mt).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Jm.call(Mt);return typeof Mt=="object"&&!wf?kp(Er):Er}if(Av(Mt)){for(var Ar="<"+String(Mt.nodeName).toLowerCase(),Wr=Mt.attributes||[],ii=0;ii<Wr.length;ii++)Ar+=" "+Wr[ii].name+"="+r0(_1(Wr[ii].value),"double",Jt);return Ar+=">",Mt.childNodes&&Mt.childNodes.length&&(Ar+="..."),Ar+="</"+String(Mt.nodeName).toLowerCase()+">",Ar}if(Mg(Mt)){if(Mt.length===0)return"[]";var ri=Ng(Mt,Dn);return Rn&&!Iv(ri)?"["+c0(ri,Rn)+"]":"[ "+ri.join(", ")+" ]"}if(i0(Mt)){var xi=Ng(Mt,Dn);return xi.length===0?"["+String(Mt)+"]":"{ ["+String(Mt)+"] "+xi.join(", ")+" }"}if(typeof Mt=="object"&&ln){if(n0&&typeof Mt[n0]=="function")return Mt[n0]();if(ln!=="symbol"&&typeof Mt.inspect=="function")return Mt.inspect()}if(S1(Mt)){var Li=[];return ss.call(Mt,function(Gs,Ws){Li.push(Dn(Ws,Mt,!0)+" => "+Dn(Gs,Mt))}),T1("Map",eo.call(Mt),Li,Rn)}if(C1(Mt)){var wo=[];return Km.call(Mt,function(Gs){wo.push(Dn(Gs,Mt))}),T1("Set",qn.call(Mt),wo,Rn)}if(Cv(Mt))return l0("WeakMap");if(kv(Mt))return l0("WeakSet");if(Tv(Mt))return l0("WeakRef");if(x1(Mt))return kp(Dn(Number(Mt)));if(E1(Mt))return kp(Dn(xf.call(Mt)));if(w1(Mt))return kp(bv.call(Mt));if(Ev(Mt))return kp(Dn(String(Mt)));if(!wv(Mt)&&!b1(Mt)){var po=Ng(Mt,Dn),so=e0?e0(Mt)===Object.prototype:Mt instanceof Object||Mt.constructor===Object,So=Mt instanceof Object?"":"null prototype",go=!so&&fl&&Object(Mt)===Mt&&fl in Mt?ch(Mt).slice(8,-1):So?"Object":"",xa=so||typeof Mt.constructor!="function"?"":Mt.constructor.name?Mt.constructor.name+" ":"",ka=xa+(go||So?"["+[].concat(go||[],So||[]).join(": ")+"] ":"");return po.length===0?ka+"{}":Rn?ka+"{"+c0(po,Rn)+"}":ka+"{ "+po.join(", ")+" }"}return String(Mt)};function r0(It,Mt,zt){var Ht=(zt.quoteStyle||Mt)==="double"?'"':"'";return Ht+It+Ht}function _1(It){return String(It).replace(/"/g,"&quot;")}function Mg(It){return ch(It)==="[object Array]"&&(!fl||!(typeof It=="object"&&fl in It))}function wv(It){return ch(It)==="[object Date]"&&(!fl||!(typeof It=="object"&&fl in It))}function b1(It){return ch(It)==="[object RegExp]"&&(!fl||!(typeof It=="object"&&fl in It))}function i0(It){return ch(It)==="[object Error]"&&(!fl||!(typeof It=="object"&&fl in It))}function Ev(It){return ch(It)==="[object String]"&&(!fl||!(typeof It=="object"&&fl in It))}function x1(It){return ch(It)==="[object Number]"&&(!fl||!(typeof It=="object"&&fl in It))}function w1(It){return ch(It)==="[object Boolean]"&&(!fl||!(typeof It=="object"&&fl in It))}function o0(It){if(wf)return It&&typeof It=="object"&&It instanceof Symbol;if(typeof It=="symbol")return!0;if(!It||typeof It!="object"||!Jm)return!1;try{return Jm.call(It),!0}catch{}return!1}function E1(It){if(!It||typeof It!="object"||!xf)return!1;try{return xf.call(It),!0}catch{}return!1}var Iu=Object.prototype.hasOwnProperty||function(It){return It in this};function Wh(It,Mt){return Iu.call(It,Mt)}function ch(It){return m1.call(It)}function Sv(It){if(It.name)return It.name;var Mt=v1.call(y1.call(It),/^function\s*([\w$]+)/);return Mt?Mt[1]:null}function s0(It,Mt){if(It.indexOf)return It.indexOf(Mt);for(var zt=0,Ht=It.length;zt<Ht;zt++)if(It[zt]===Mt)return zt;return-1}function S1(It){if(!eo||!It||typeof It!="object")return!1;try{eo.call(It);try{qn.call(It)}catch{return!0}return It instanceof Map}catch{}return!1}function Cv(It){if(!Sp||!It||typeof It!="object")return!1;try{Sp.call(It,Sp);try{Cp.call(It,Cp)}catch{return!0}return It instanceof WeakMap}catch{}return!1}function Tv(It){if(!g1||!It||typeof It!="object")return!1;try{return g1.call(It),!0}catch{}return!1}function C1(It){if(!qn||!It||typeof It!="object")return!1;try{qn.call(It);try{eo.call(It)}catch{return!0}return It instanceof Set}catch{}return!1}function kv(It){if(!Cp||!It||typeof It!="object")return!1;try{Cp.call(It,Cp);try{Sp.call(It,Sp)}catch{return!0}return It instanceof WeakSet}catch{}return!1}function Av(It){return!It||typeof It!="object"?!1:typeof HTMLElement<"u"&&It instanceof HTMLElement?!0:typeof It.nodeName=="string"&&typeof It.getAttribute=="function"}function a0(It,Mt){if(It.length>Mt.maxStringLength){var zt=It.length-Mt.maxStringLength,Ht="... "+zt+" more character"+(zt>1?"s":"");return a0(It.slice(0,Mt.maxStringLength),Mt)+Ht}var Ut=It.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Lv);return r0(Ut,"single",Mt)}function Lv(It){var Mt=It.charCodeAt(0),zt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Mt];return zt?"\\"+zt:"\\x"+(Mt<16?"0":"")+Mt.toString(16).toUpperCase()}function kp(It){return"Object("+It+")"}function l0(It){return It+" { ? }"}function T1(It,Mt,zt,Ht){var Ut=Ht?c0(zt,Ht):zt.join(", ");return It+" ("+Mt+") {"+Ut+"}"}function Iv(It){for(var Mt=0;Mt<It.length;Mt++)if(s0(It[Mt],`
`)>=0)return!1;return!0}function k1(It,Mt){var zt;if(It.indent==="	")zt="	";else if(typeof It.indent=="number"&&It.indent>0)zt=Array(It.indent+1).join(" ");else return null;return{base:zt,prev:Array(Mt+1).join(zt)}}function c0(It,Mt){if(It.length===0)return"";var zt=`
`+Mt.prev+Mt.base;return zt+It.join(","+zt)+`
`+Mt.prev}function Ng(It,Mt){var zt=Mg(It),Ht=[];if(zt){Ht.length=It.length;for(var Ut=0;Ut<It.length;Ut++)Ht[Ut]=Wh(It,Ut)?Mt(It[Ut],It):""}var Jt=typeof Tp=="function"?Tp(It):[],ln;if(wf){ln={};for(var bn=0;bn<Jt.length;bn++)ln["$"+Jt[bn]]=Jt[bn]}for(var Rn in It)!Wh(It,Rn)||zt&&String(Number(Rn))===Rn&&Rn<It.length||wf&&ln["$"+Rn]instanceof Symbol||(/[^\w$]/.test(Rn)?Ht.push(Mt(Rn,It)+": "+Mt(It[Rn],It)):Ht.push(Rn+": "+Mt(It[Rn],It)));if(typeof Tp=="function")for(var Dn=0;Dn<Jt.length;Dn++)Qm.call(It,Jt[Dn])&&Ht.push("["+Mt(Jt[Dn])+"]: "+Mt(It[Jt[Dn]],It));return Ht}var u0=function(It){return typeof It=="string"||typeof It=="symbol"},A1=function(It){if(It===null)return"Null";if(typeof It>"u")return"Undefined";if(typeof It=="function"||typeof It=="object")return"Object";if(typeof It=="number")return"Number";if(typeof It=="boolean")return"Boolean";if(typeof It=="string")return"String"},Dg=A1,qh=function(It){return typeof It=="symbol"?"Symbol":typeof It=="bigint"?"BigInt":Dg(It)},Bg=ao,h0=Bg("%TypeError%"),Pv=xv,L1=u0,Ov=qh,I1=function(It,Mt){if(Ov(It)!=="Object")throw new h0("Assertion failed: Type(O) is not Object");if(!L1(Mt))throw new h0("Assertion failed: IsPropertyKey(P) is not true, got "+Pv(Mt));return It[Mt]},Fg=ao,Ap=Fg("%TypeError%"),Lp=u0,Ip=qh,P1=function(It,Mt){if(Ip(It)!=="Object")throw new Ap("Assertion failed: `O` must be an Object");if(!Lp(Mt))throw new Ap("Assertion failed: `P` must be a Property Key");return Mt in It},Ef=Function.prototype.toString,Pu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Sf,zg;if(typeof Pu=="function"&&typeof Object.defineProperty=="function")try{Sf=Object.defineProperty({},"length",{get:function(){throw zg}}),zg={},Pu(function(){throw 42},null,Sf)}catch(It){It!==zg&&(Pu=null)}else Pu=null;var $v=/^\s*class\b/,d0=function(It){try{var Mt=Ef.call(It);return $v.test(Mt)}catch{return!1}},O1=function(It){try{return d0(It)?!1:(Ef.call(It),!0)}catch{return!1}},Rv=Object.prototype.toString,f0="[object Function]",$1="[object GeneratorFunction]",Mv=typeof Symbol=="function"&&!!Symbol.toStringTag,Cd=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{},Yh=Pu?function(It){if(It===Cd)return!0;if(!It||typeof It!="function"&&typeof It!="object")return!1;if(typeof It=="function"&&!It.prototype)return!0;try{Pu(It,null,Sf)}catch(Mt){if(Mt!==zg)return!1}return!d0(It)}:function(It){if(It===Cd)return!0;if(!It||typeof It!="function"&&typeof It!="object")return!1;if(typeof It=="function"&&!It.prototype)return!0;if(Mv)return O1(It);if(d0(It))return!1;var Mt=Rv.call(It);return Mt===f0||Mt===$1},R1=Yh,M1=ao,N1=M1("%Math%"),p0=M1("%Number%"),Nv=p0.MAX_SAFE_INTEGER||N1.pow(2,53)-1,Dv=ao,D1=Dv("%Math.abs%"),Bv=function(It){return D1(It)},Cf=Math.floor,gc=function(It){return Cf(It)},Tf=function(It){return It===null||typeof It!="function"&&typeof It!="object"},kl=Object.prototype.toString,Rs=Tf,Fv=Yh,B1={"[[DefaultValue]]":function(It){var Mt;if(arguments.length>1?Mt=arguments[1]:Mt=kl.call(It)==="[object Date]"?String:Number,Mt===String||Mt===Number){var zt=Mt===String?["toString","valueOf"]:["valueOf","toString"],Ht,Ut;for(Ut=0;Ut<zt.length;++Ut)if(Fv(It[zt[Ut]])&&(Ht=It[zt[Ut]](),Rs(Ht)))return Ht;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}},g0=function(It){return Rs(It)?It:arguments.length>1?B1["[[DefaultValue]]"](It,arguments[1]):B1["[[DefaultValue]]"](It)},zv=g0,F1=zv,z1=function(It){var Mt=F1(It,Number);if(typeof Mt!="string")return+Mt;var zt=Mt.replace(/^[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+|[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+$/g,"");return/^0[ob]|^[+-]0x/.test(zt)?NaN:+zt},m0=Number.isNaN||function(It){return It!==It},H1=Number.isNaN||function(It){return It!==It},j1=Number.isFinite||function(It){return typeof It=="number"&&!H1(It)&&It!==1/0&&It!==-1/0},Hv=function(It){return It>=0?1:-1},jv=Bv,Vv=gc,V1=z1,U1=m0,G1=j1,W1=Hv,q1=function(It){var Mt=V1(It);return U1(Mt)?0:Mt===0||!G1(Mt)?Mt:W1(Mt)*Vv(jv(Mt))},Y1=ao,X1=Y1("RegExp.prototype.test"),Uv=oh.exports,Gv=function(It){return Uv(X1,It)},Pp=function(It){return It===null||typeof It!="function"&&typeof It!="object"},Z1=Sd,y0=function(){return Z1()&&!!Symbol.toStringTag},K1=Date.prototype.getDay,J1=function(It){try{return K1.call(It),!0}catch{return!1}},Q1=Object.prototype.toString,Wv="[object Date]",ey=y0(),v0=function(It){return typeof It!="object"||It===null?!1:ey?J1(It):Q1.call(It)===Wv},Hg={exports:{}},_0=Object.prototype.toString,jg=Hm();if(jg){var b0=Symbol.prototype.toString,ty=/^Symbol\(.*\)$/,qv=function(It){return typeof It.valueOf()!="symbol"?!1:ty.test(b0.call(It))};Hg.exports=function(It){if(typeof It=="symbol")return!0;if(_0.call(It)!=="[object Symbol]")return!1;try{return qv(It)}catch{return!1}}}else Hg.exports=function(It){return!1};var Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",x0=Tf,uh=Yh,w0=v0,E0=Hg.exports,S0=function(It,Mt){if(typeof It>"u"||It===null)throw new TypeError("Cannot call method on "+It);if(typeof Mt!="string"||Mt!=="number"&&Mt!=="string")throw new TypeError('hint must be "string" or "number"');var zt=Mt==="string"?["toString","valueOf"]:["valueOf","toString"],Ht,Ut,Jt;for(Jt=0;Jt<zt.length;++Jt)if(Ht=It[zt[Jt]],uh(Ht)&&(Ut=Ht.call(It),x0(Ut)))return Ut;throw new TypeError("No default value")},C0=function(It,Mt){var zt=It[Mt];if(zt!==null&&typeof zt<"u"){if(!uh(zt))throw new TypeError(zt+" returned for property "+Mt+" of object "+It+" is not a function");return zt}},T0=function(It){if(x0(It))return It;var Mt="default";arguments.length>1&&(arguments[1]===String?Mt="string":arguments[1]===Number&&(Mt="number"));var zt;if(Xh&&(Symbol.toPrimitive?zt=C0(It,Symbol.toPrimitive):E0(It)&&(zt=Symbol.prototype.valueOf)),typeof zt<"u"){var Ht=zt.call(It,Mt);if(x0(Ht))return Ht;throw new TypeError("unable to convert exotic object to primitive")}return Mt==="default"&&(w0(It)||E0(It))&&(Mt="string"),S0(It,Mt==="default"?"number":Mt)},Vg=T0,k0=function(It){return arguments.length>1?Vg(It,arguments[1]):Vg(It)},Dl=ao,A0=Dl("%TypeError%"),Al=Dl("%Number%"),Op=Dl("%RegExp%"),Ug=Dl("%parseInt%"),hh=To,Gg=Gv,L0=Pp,ny=hh("String.prototype.slice"),ry=Gg(/^0b[01]+$/i),$p=Gg(/^0o[0-7]+$/i),Rp=Gg(/^[-+]0x[0-9a-f]+$/i),iy=["\x85","\u200B","\uFFFE"].join(""),oy=new Op("["+iy+"]","g"),Wg=Gg(oy),sy=[`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003`,"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),ay=new RegExp("(^["+sy+"]+)|(["+sy+"]+$)","g"),ly=hh("String.prototype.replace"),Ou=function(It){return ly(It,ay,"")},Yv=k0,qg=function It(Mt){var zt=L0(Mt)?Mt:Yv(Mt,Al);if(typeof zt=="symbol")throw new A0("Cannot convert a Symbol value to a number");if(typeof zt=="bigint")throw new A0("Conversion from 'BigInt' to 'number' is not allowed.");if(typeof zt=="string"){if(ry(zt))return It(Ug(ny(zt,2),2));if($p(zt))return It(Ug(ny(zt,2),8));if(Wg(zt)||Rp(zt))return NaN;var Ht=Ou(zt);if(Ht!==zt)return It(Ht)}return Al(zt)},cy=q1,Xv=qg,uy=function(It){var Mt=Xv(It);return Mt!==0&&(Mt=cy(Mt)),Mt===0?0:Mt},hy=Nv,dy=uy,Zv=function(It){var Mt=dy(It);return Mt<=0?0:Mt>hy?hy:Mt},Kv=ao,fy=Kv("%TypeError%"),Jv=I1,lu=Zv,dh=qh,Td=function(It){if(dh(It)!=="Object")throw new fy("Assertion failed: `obj` must be an Object");return lu(Jv(It,"length"))},Ds=ao,ho=Ds("%Object%"),py=No,Jl=function(It){return py(It),ho(It)},Mp=ao,kf=Mp("%String%"),Ql=Mp("%TypeError%"),Dr=function(It){if(typeof It=="symbol")throw new Ql("Cannot convert a Symbol value to a string");return kf(It)},kd=String.prototype.valueOf,fh=function(It){try{return kd.call(It),!0}catch{return!1}},Af=Object.prototype.toString,Gr="[object String]",Np=y0(),to=function(It){return typeof It=="string"?!0:typeof It!="object"?!1:Np?fh(It):Af.call(It)===Gr},Bl=ao,gy=To,Fc=Bl("%TypeError%"),zc=Zm,Dp=I1,Kr=P1,mc=R1,pl=Td,my=Jl,qo=Dr,Bp=to,yy=gy("String.prototype.split"),Ad=Object("a"),za=Ad[0]!=="a"||!(0 in Ad),ec=function(It){var Mt=my(this),zt=za&&Bp(this)?yy(this,""):Mt,Ht=pl(zt);if(!mc(It))throw new Fc("Array.prototype.forEach callback must be a function");var Ut;arguments.length>1&&(Ut=arguments[1]);for(var Jt=0;Jt<Ht;){var ln=qo(Jt),bn=Kr(zt,ln);if(bn){var Rn=Dp(zt,ln);zc(It,Ut,[Rn,Jt,zt])}Jt+=1}},Vi=function(It){var Mt=!0,zt=!0,Ht=!1;if(typeof It=="function"){try{It.call("f",function(Ut,Jt,ln){typeof ln!="object"&&(Mt=!1)}),It.call([null],function(){"use strict";zt=typeof this=="string"},"x")}catch{Ht=!0}return!Ht&&Mt&&zt}return!1},vy=Vi,Hc=ec,Fp=function(){var It=Array.prototype.forEach;return vy(It)?It:Hc},$u=ih,Lf=Fp,yc=function(){var It=Lf();return $u(Array.prototype,{forEach:It},{forEach:function(){return Array.prototype.forEach!==It}}),It},Ru=ih,Yg=oh.exports,vo=To,Fs=No,Ld=ec,ph=Fp,Id=ph(),jc=yc,Si=vo("Array.prototype.slice"),Pd=Yg.apply(Id),cu=function(It,Mt){return Fs(It),Pd(It,Si(arguments,1))};Ru(cu,{getPolyfill:ph,implementation:Ld,shim:jc});var Qi=cu,uu=No,Xg=To,hu=Xg("Object.prototype.propertyIsEnumerable"),tc=Xg("Array.prototype.push"),du=function(It){var Mt=uu(It),zt=[];for(var Ht in Mt)hu(Mt,Ht)&&tc(zt,[Ht,Mt[Ht]]);return zt},If=du,Od=function(){return typeof Object.entries=="function"?Object.entries:If},Pf=Od,Of=ih,fa=function(){var It=Pf();return Of(Object,{entries:It},{entries:function(){return Object.entries!==It}}),It},I0=ih,$f=oh.exports,vc=du,$d=Od,vi=fa,_y=$f($d(),Object);I0(_y,{getPolyfill:$d,implementation:vc,shim:vi});var zp=_y,Lo=No,Zg=Dr,Hp=To,Rd=Hp("String.prototype.replace"),Md=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Qv=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,Rf=function(){var It=Zg(Lo(this));return Rd(Rd(It,Md,""),Qv,"")},Kg=Rf,Jg="\u200B",by=function(){return String.prototype.trim&&Jg.trim()===Jg?String.prototype.trim:Kg},xy=ih,ks=by,Mu=function(){var It=ks();return xy(String.prototype,{trim:It},{trim:function(){return String.prototype.trim!==It}}),It},P0=oh.exports,wy=ih,Ya=Rf,Mf=by,Ey=Mu,_c=P0(Mf());wy(_c,{getPolyfill:Mf,implementation:Ya,shim:Ey});var Qg=_c,fu=Qi,as=zp,nc=jm,Vc=Qg,bc=function(It){},rl=String.prototype.replace,gh=String.prototype.split,gl="||||",Nf=function(It){var Mt=It%100,zt=Mt%10;return Mt!==11&&zt===1?0:2<=zt&&zt<=4&&!(Mt>=12&&Mt<=14)?1:2},Sy={pluralTypes:{arabic:function(It){if(It<3)return It;var Mt=It%100;return Mt>=3&&Mt<=10?3:Mt>=11?4:5},bosnian_serbian:Nf,chinese:function(){return 0},croatian:Nf,french:function(It){return It>=2?1:0},german:function(It){return It!==1?1:0},russian:Nf,lithuanian:function(It){return It%10==1&&It%100!=11?0:It%10>=2&&It%10<=9&&(It%100<11||It%100>19)?1:2},czech:function(It){return It===1?0:It>=2&&It<=4?1:2},polish:function(It){if(It===1)return 0;var Mt=It%10;return 2<=Mt&&Mt<=4&&(It%100<10||It%100>=20)?1:2},icelandic:function(It){return It%10!=1||It%100==11?1:0},slovenian:function(It){var Mt=It%100;return Mt===1?0:Mt===2?1:Mt===3||Mt===4?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function e_(It){var Mt={};return fu(as(It),function(zt){var Ht=zt[0],Ut=zt[1];fu(Ut,function(Jt){Mt[Jt]=Ht})}),Mt}function t_(It,Mt){var zt=e_(It.pluralTypeToLanguages);return zt[Mt]||zt[gh.call(Mt,/-/,1)[0]]||zt.en}function n_(It,Mt,zt){return It.pluralTypes[Mt](zt)}function r_(){var It={};return function(Mt,zt){var Ht=It[zt];return Ht&&!Mt.pluralTypes[Ht]&&(Ht=null,It[zt]=Ht),Ht||(Ht=t_(Mt,zt),Ht&&(It[zt]=Ht)),Ht}}function Cy(It){return It.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rc(It){var Mt=It&&It.prefix||"%{",zt=It&&It.suffix||"}";if(Mt===gl||zt===gl)throw new RangeError('"'+gl+'" token is reserved for pluralization');return new RegExp(Cy(Mt)+"(.*?)"+Cy(zt),"g")}var O0=r_(),Zs=/%\{(.*?)\}/g;function Bs(It,Mt,zt,Ht,Ut){if(typeof It!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(Mt==null)return It;var Jt=It,ln=Ht||Zs,bn=typeof Mt=="number"?{smart_count:Mt}:Mt;if(bn.smart_count!=null&&It){var Rn=Ut||Sy,Dn=gh.call(It,gl),Pn=zt||"en",cr=O0(Rn,Pn),Er=n_(Rn,cr,bn.smart_count);Jt=Vc(Dn[Er]||Dn[0])}return Jt=rl.call(Jt,ln,function(Ar,Wr){return!nc(bn,Wr)||bn[Wr]==null?Ar:bn[Wr]}),Jt}function xc(It){var Mt=It||{};this.phrases={},this.extend(Mt.phrases||{}),this.currentLocale=Mt.locale||"en";var zt=Mt.allowMissing?Bs:null;this.onMissingKey=typeof Mt.onMissingKey=="function"?Mt.onMissingKey:zt,this.warn=Mt.warn||bc,this.tokenRegex=rc(Mt.interpolation),this.pluralRules=Mt.pluralRules||Sy}xc.prototype.locale=function(It){return It&&(this.currentLocale=It),this.currentLocale},xc.prototype.extend=function(It,Mt){fu(as(It||{}),function(zt){var Ht=zt[0],Ut=zt[1],Jt=Mt?Mt+"."+Ht:Ht;typeof Ut=="object"?this.extend(Ut,Jt):this.phrases[Jt]=Ut},this)},xc.prototype.unset=function(It,Mt){typeof It=="string"?delete this.phrases[It]:fu(as(It||{}),function(zt){var Ht=zt[0],Ut=zt[1],Jt=Mt?Mt+"."+Ht:Ht;typeof Ut=="object"?this.unset(Ut,Jt):delete this.phrases[Jt]},this)},xc.prototype.clear=function(){this.phrases={}},xc.prototype.replace=function(It){this.clear(),this.extend(It)},xc.prototype.t=function(It,Mt){var zt,Ht,Ut=Mt==null?{}:Mt;if(typeof this.phrases[It]=="string")zt=this.phrases[It];else if(typeof Ut._=="string")zt=Ut._;else if(this.onMissingKey){var Jt=this.onMissingKey;Ht=Jt(It,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+It+'"'),Ht=It;return typeof zt=="string"&&(Ht=Bs(zt,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)),Ht},xc.prototype.has=function(It){return nc(this.phrases,It)},xc.transformPhrase=function(It,Mt,zt){return Bs(It,Mt,zt)};var Ll=xc,mh={"Add a comment...":"\u0625\u0636\u0627\u0641\u0629 \u062A\u0639\u0644\u064A\u0642","Add a reply...":"\u0625\u0636\u0627\u0641\u0629 \u0631\u062F","Add tag...":"\u0625\u0636\u0627\u0641\u0629 \u0639\u0644\u0627\u0645\u0629",Cancel:"\u0625\u0644\u063A\u0627\u0621",Close:"\u0625\u063A\u0644\u0627\u0642",Edit:"Edit",Delete:"Delete",Ok:"\u062A\u0645"},pa={"Add a comment...":"Napsat koment\xE1\u0159...","Add a reply...":"Odpov\u011Bd\u011Bt...","Add tag...":"P\u0159idat \u0161t\xEDtek...",Cancel:"Zru\u0161it",Close:"Zav\u0159\xEDt",Edit:"Upravit",Delete:"Smazat",Ok:"Ok"},Df={"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...",Cancel:"Abbrechen",Close:"Schliessen",Edit:"Bearbeiten",Delete:"L\xF6schen",Ok:"Ok"},pu={"Add a comment...":"\u03A3\u03C7\u03BF\u03BB\u03AF\u03B1\u03C3\u03B5...","Add a reply...":"\u0391\u03C0\u03AC\u03BD\u03C4\u03B7\u03C3\u03B5...","Add tag...":"\u03A0\u03C1\u03CC\u03C3\u03B8\u03B5\u03C3\u03B5 tag...",Cancel:"\u0386\u03BA\u03C5\u03C1\u03BF",Close:"\u039A\u03BB\u03B5\u03AF\u03C3\u03B9\u03BC\u03BF",Edit:"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1",Delete:"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE",Ok:"Ok"},gu={"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Cerrar",Edit:"Editar",Delete:"Eliminar",Ok:"Ok"},ic={"Add a comment...":"Lis\xE4\xE4 kommentti","Add a reply...":"Lis\xE4\xE4 vastaus","Add tag...":"Lis\xE4\xE4 tunniste",Cancel:"Peruuta",Close:"Sulje",Edit:"Muokkaa",Delete:"Poista",Ok:"Ok"},em={"Add a comment...":"Ajouter un commentaire...","Add a reply...":"Ajouter une r\xE9ponse...","Add tag...":"Ajouter une \xE9tiquette...",Cancel:"Annuler",Close:"Fermer",Edit:"\xC9diter",Delete:"Supprimer",Ok:"Ok"},jp={"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Pechar",Edit:"Edit",Delete:"Delete",Ok:"Ok"},Vp={"Add a comment...":"\u091F\u093F\u092A\u094D\u092A\u0923\u0940 \u091C\u094B\u0921\u093C\u0947\u0902","Add a reply...":"\u091C\u0935\u093E\u092C \u0926\u0947\u0902","Add tag...":"\u091F\u0948\u0917 \u0932\u0917\u093E\u090F\u0901",Cancel:"\u0930\u0926\u094D\u0926 \u0915\u0930\u0947\u0902",Close:"\u092C\u0902\u0926 \u0915\u0930\u0947\u0902",Edit:"\u0938\u0902\u092A\u093E\u0926\u093F\u0924 \u0915\u0930\u0947\u0902",Delete:"\u0939\u091F\u093E\u090F\u0901",Ok:"\u0920\u0940\u0915 \u0939\u0948"},Up={"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...",Cancel:"Annulla",Close:"Chiudi",Edit:"Edit",Delete:"Delete",Ok:"Ok"},Ks={"Add a comment...":"\uB313\uAE00 \uCD94\uAC00","Add a reply...":"\uB2F5\uAE00 \uCD94\uAC00","Add tag...":"\uD0DC\uADF8 \uCD94\uAC00",Cancel:"\uCDE8\uC18C",Close:"\uB2EB\uAE30",Edit:"\uC218\uC815",Delete:"\uC0AD\uC81C",Ok:"\uD655\uC778"},Ty={"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...",Cancel:"Afbreken",Close:"Sluiten",Edit:"Bewerken",Delete:"Verwijderen",Ok:"Ok"},mu={"Add a comment...":"Adicionar um coment\xE1rio...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Fechar",Edit:"Editar",Delete:"Apagar",Ok:"Ok"},$0={"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...",Cancel:"Cancel",Close:"St\xE4ng",Edit:"Edit",Delete:"Delete",Ok:"Ok"},ky={"Add a comment...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E2D\u0E21\u0E40\u0E21\u0E19\u0E15\u0E4C...","Add a reply...":"\u0E15\u0E2D\u0E1A\u0E01\u0E25\u0E31\u0E1A...","Add tag...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E41\u0E17\u0E47\u0E01...",Cancel:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",Close:"\u0E1B\u0E34\u0E14",Edit:"\u0E41\u0E01\u0E49\u0E44\u0E02",Delete:"\u0E25\u0E1A",Ok:"\u0E15\u0E01\u0E25\u0E07"},ps={"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...",Cancel:"\u0130ptal",Close:"Kapat",Edit:"D\xFCzenle",Delete:"Sil",Ok:"Tamam"},R0={"Add a comment...":"\u062A\u0628\u0635\u0631\u06C1 \u06A9\u0631\u06CC\u06BA","Add a reply...":"\u062C\u0648\u0627\u0628 \u062F\u06CC\u06BA","Add tag...":"\u0679\u06CC\u06AF \u0644\u06AF\u0627\u0626\u06CC\u06BA",Cancel:"\u0645\u0646\u0633\u0648\u062E \u06A9\u0631\u06CC\u06BA",Close:"\u0628\u0646\u062F \u06A9\u0631\u06CC\u06BA",Edit:"\u062A\u0631\u0645\u06CC\u0645 \u06A9\u0631\u06CC\u06BA",Delete:"\u06C1\u0679\u0627\u0626\u06CC\u06BA",Ok:"\u0679\u06BE\u06CC\u06A9 \u06C1\u06D2"},wc={};Object.defineProperty(wc,"__esModule",{value:!0});var Gp=[["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u064A\u0646","%s \u062B\u0648\u0627\u0646","%s \u062B\u0627\u0646\u064A\u0629"],["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u064A\u0646","%s \u062F\u0642\u0627\u0626\u0642","%s \u062F\u0642\u064A\u0642\u0629"],["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","%s \u0633\u0627\u0639\u0627\u062A","%s \u0633\u0627\u0639\u0629"],["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","%s \u0623\u064A\u0627\u0645","%s \u064A\u0648\u0645\u0627\u064B"],["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","%s \u0623\u0633\u0627\u0628\u064A\u0639","%s \u0623\u0633\u0628\u0648\u0639\u0627\u064B"],["\u0634\u0647\u0631","\u0634\u0647\u0631\u064A\u0646","%s \u0623\u0634\u0647\u0631","%s \u0634\u0647\u0631\u0627\u064B"],["\u0639\u0627\u0645","\u0639\u0627\u0645\u064A\u0646","%s \u0623\u0639\u0648\u0627\u0645","%s \u0639\u0627\u0645\u0627\u064B"]];function Io(It,Mt){return Mt<3?Gp[It][Mt-1]:Mt>=3&&Mt<=10?Gp[It][2]:Gp[It][3]}function Ay(It,Mt){if(Mt===0)return["\u0645\u0646\u0630 \u0644\u062D\u0638\u0627\u062A","\u0628\u0639\u062F \u0644\u062D\u0638\u0627\u062A"];var zt=Io(Math.floor(Mt/2),It);return["\u0645\u0646\u0630 "+zt,"\u0628\u0639\u062F "+zt]}var i_=wc.default=Ay,Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});function Uc(It,Mt){var zt=0,Ht=Mt==1||Mt==3||Mt==5||Mt==7||Mt==9||Mt==11||Mt==13;return Ht&&It>=5&&(zt=1),[[["pr\xE1v\u011B te\u010F","pr\xE1v\u011B te\u010F"]],[["p\u0159ed %s vte\u0159inami","za %s vte\u0159iny"],["p\u0159ed %s vte\u0159inami","za %s vte\u0159in"]],[["p\u0159ed minutou","za minutu"]],[["p\u0159ed %s minutami","za %s minuty"],["p\u0159ed %s minutami","za %s minut"]],[["p\u0159ed hodinou","za hodinu"]],[["p\u0159ed %s hodinami","za %s hodiny"],["p\u0159ed %s hodinami","za %s hodin"]],[["v\u010Dera","z\xEDtra"]],[["p\u0159ed %s dny","za %s dny"],["p\u0159ed %s dny","za %s dn\u016F"]],[["minul\xFD t\xFDden","p\u0159\xED\u0161t\xED t\xFDden"]],[["p\u0159ed %s t\xFDdny","za %s t\xFDdny"],["p\u0159ed %s t\xFDdny","za %s t\xFDdn\u016F"]],[["minul\xFD m\u011Bs\xEDc","p\u0159\xEDst\xED m\u011Bs\xEDc"]],[["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDce"],["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDc\u016F"]],[["p\u0159ed rokem","p\u0159\xEDst\xED rok"]],[["p\u0159ed %s lety","za %s roky"],["p\u0159ed %s lety","za %s let"]]][Mt][zt]}var Nu=Wp.default=Uc,tm={};Object.defineProperty(tm,"__esModule",{value:!0});function Ly(It,Mt){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][Mt]}var di=tm.default=Ly,qp={};Object.defineProperty(qp,"__esModule",{value:!0});function nm(It,Mt){return[["\u03BC\u03CC\u03BB\u03B9\u03C2 \u03C4\u03CE\u03C1\u03B1","\u03C3\u03B5 \u03BB\u03AF\u03B3\u03BF"],["%s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"],["1 \u03BB\u03B5\u03C0\u03C4\u03CC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BB\u03B5\u03C0\u03C4\u03CC"],["%s \u03BB\u03B5\u03C0\u03C4\u03AC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BB\u03B5\u03C0\u03C4\u03AC"],["1 \u03CE\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03CE\u03C1\u03B1"],["%s \u03CE\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03CE\u03C1\u03B5\u03C2"],["1 \u03BC\u03AD\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AD\u03C1\u03B1"],["%s \u03BC\u03AD\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AD\u03C1\u03B5\u03C2"],["1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1"],["%s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"],["1 \u03BC\u03AE\u03BD\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AE\u03BD\u03B1"],["%s \u03BC\u03AE\u03BD\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AE\u03BD\u03B5\u03C2"],["1 \u03C7\u03C1\u03CC\u03BD\u03BF \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03C7\u03C1\u03CC\u03BD\u03BF"],["%s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"]][Mt]}var Gc=qp.default=nm,Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});function Du(It,Mt){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xEDa","en 1 d\xEDa"],["hace %s d\xEDas","en %s d\xEDas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xF1o","en 1 a\xF1o"],["hace %s a\xF1os","en %s a\xF1os"]][Mt]}var rm=Ec.default=Du,Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});function As(It,Mt){return[["juuri \xE4sken","juuri nyt"],["%s sekuntia sitten","%s sekunnin p\xE4\xE4st\xE4"],["minuutti sitten","minuutin p\xE4\xE4st\xE4"],["%s minuuttia sitten","%s minuutin p\xE4\xE4st\xE4"],["tunti sitten","tunnin p\xE4\xE4st\xE4"],["%s tuntia sitten","%s tunnin p\xE4\xE4st\xE4"],["p\xE4iv\xE4 sitten","p\xE4iv\xE4n p\xE4\xE4st\xE4"],["%s p\xE4iv\xE4\xE4 sitten","%s p\xE4iv\xE4n p\xE4\xE4st\xE4"],["viikko sitten","viikon p\xE4\xE4st\xE4"],["%s viikkoa sitten","%s viikon p\xE4\xE4st\xE4"],["kuukausi sitten","kuukauden p\xE4\xE4st\xE4"],["%s kuukautta sitten","%s kuukauden p\xE4\xE4st\xE4"],["vuosi sitten","vuoden p\xE4\xE4st\xE4"],["%s vuotta sitten","%s vuoden p\xE4\xE4st\xE4"]][Mt]}var vs=Xa.default=As,Js={};Object.defineProperty(Js,"__esModule",{value:!0});function o_(It,Mt){return[["\xE0 l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][Mt]}var s_=Js.default=o_,Il={};Object.defineProperty(Il,"__esModule",{value:!0});function im(It,Mt){return[["xusto agora","daqu\xED a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 d\xEDa","nun d\xEDa"],["hai %s d\xEDas","en %s d\xEDas"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][Mt]}var Wc=Il.default=im,_s={};Object.defineProperty(_s,"__esModule",{value:!0});function Yp(It,Mt){return[["\u0905\u092D\u0940","\u0915\u0941\u091B \u0938\u092E\u092F"],["%s \u0938\u0947\u0915\u0902\u0921 \u092A\u0939\u0932\u0947","%s \u0938\u0947\u0915\u0902\u0921 \u092E\u0947\u0902"],["1 \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","1 \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["%s \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","%s \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["1 \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","1 \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["%s \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","%s \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["1 \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","1 \u0926\u093F\u0928 \u092E\u0947\u0902"],["%s \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","%s \u0926\u093F\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092A\u0939\u0932\u0947","1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092E\u0947\u0902"],["%s \u0939\u092B\u094D\u0924\u0947 \u092A\u0939\u0932\u0947","%s \u0939\u092B\u094D\u0924\u094B\u0902 \u092E\u0947\u0902"],["1 \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","1 \u092E\u0939\u0940\u0928\u0947 \u092E\u0947\u0902"],["%s \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","%s \u092E\u0939\u0940\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","1 \u0938\u093E\u0932 \u092E\u0947\u0902"],["%s \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","%s \u0938\u093E\u0932 \u092E\u0947\u0902"]][Mt]}var Za=_s.default=Yp,om={};Object.defineProperty(om,"__esModule",{value:!0});function Bf(It,Mt){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][Mt]}var zs=om.default=Bf,ml={};Object.defineProperty(ml,"__esModule",{value:!0});function Ff(It,Mt){return[["\uBC29\uAE08","\uACE7"],["%s\uCD08 \uC804","%s\uCD08 \uD6C4"],["1\uBD84 \uC804","1\uBD84 \uD6C4"],["%s\uBD84 \uC804","%s\uBD84 \uD6C4"],["1\uC2DC\uAC04 \uC804","1\uC2DC\uAC04 \uD6C4"],["%s\uC2DC\uAC04 \uC804","%s\uC2DC\uAC04 \uD6C4"],["1\uC77C \uC804","1\uC77C \uD6C4"],["%s\uC77C \uC804","%s\uC77C \uD6C4"],["1\uC8FC\uC77C \uC804","1\uC8FC\uC77C \uD6C4"],["%s\uC8FC\uC77C \uC804","%s\uC8FC\uC77C \uD6C4"],["1\uAC1C\uC6D4 \uC804","1\uAC1C\uC6D4 \uD6C4"],["%s\uAC1C\uC6D4 \uC804","%s\uAC1C\uC6D4 \uD6C4"],["1\uB144 \uC804","1\uB144 \uD6C4"],["%s\uB144 \uC804","%s\uB144 \uD6C4"]][Mt]}var Sc=ml.default=Ff,yu={};Object.defineProperty(yu,"__esModule",{value:!0});function yh(It,Mt){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][Mt]}var Nd=yu.default=yh,ra={};Object.defineProperty(ra,"__esModule",{value:!0});function Iy(It,Mt){return[["agora mesmo","agora"],["h\xE1 %s segundos","em %s segundos"],["h\xE1 um minuto","em um minuto"],["h\xE1 %s minutos","em %s minutos"],["h\xE1 uma hora","em uma hora"],["h\xE1 %s horas","em %s horas"],["h\xE1 um dia","em um dia"],["h\xE1 %s dias","em %s dias"],["h\xE1 uma semana","em uma semana"],["h\xE1 %s semanas","em %s semanas"],["h\xE1 um m\xEAs","em um m\xEAs"],["h\xE1 %s meses","em %s meses"],["h\xE1 um ano","em um ano"],["h\xE1 %s anos","em %s anos"]][Mt]}var Cc=ra.default=Iy,Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});function Ia(It,Mt){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 m\xE5nad sedan","om 1 m\xE5nad"],["%s m\xE5nader sedan","om %s m\xE5nader"],["1 \xE5r sedan","om 1 \xE5r"],["%s \xE5r sedan","om %s \xE5r"]][Mt]}var sm=Qs.default=Ia,Py={};Object.defineProperty(Py,"__esModule",{value:!0});function zf(It,Mt){return[["\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48\u0E19\u0E35\u0E49","\u0E2D\u0E35\u0E01\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48"],["%s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"],["1 \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E19\u0E32\u0E17\u0E35"],["%s \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E19\u0E32\u0E17\u0E35"],["1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["%s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["1 \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E27\u0E31\u0E19"],["%s \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E31\u0E19"],["1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["%s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["1 \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E40\u0E14\u0E37\u0E2D\u0E19"],["%s \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E40\u0E14\u0E37\u0E2D\u0E19"],["1 \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E1B\u0E35"],["%s \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E1B\u0E35"]][Mt]}var Oy=Py.default=zf,M0={};Object.defineProperty(M0,"__esModule",{value:!0});function yl(It,Mt){return[["az \xF6nce","\u015Fimdi"],["%s saniye \xF6nce","%s saniye i\xE7inde"],["1 dakika \xF6nce","1 dakika i\xE7inde"],["%s dakika \xF6nce","%s dakika i\xE7inde"],["1 saat \xF6nce","1 saat i\xE7inde"],["%s saat \xF6nce","%s saat i\xE7inde"],["1 g\xFCn \xF6nce","1 g\xFCn i\xE7inde"],["%s g\xFCn \xF6nce","%s g\xFCn i\xE7inde"],["1 hafta \xF6nce","1 hafta i\xE7inde"],["%s hafta \xF6nce","%s hafta i\xE7inde"],["1 ay \xF6nce","1 ay i\xE7inde"],["%s ay \xF6nce","%s ay i\xE7inde"],["1 y\u0131l \xF6nce","1 y\u0131l i\xE7inde"],["%s y\u0131l \xF6nce","%s y\u0131l i\xE7inde"]][Mt]}var vh=M0.default=yl;const Ta={ar:mh,cs:pa,de:Df,el:pu,es:gu,fi:ic,fr:em,gl:jp,hi:Vp,it:Up,ko:Ks,nl:Ty,pt:mu,sv:$0,th:ky,tr:ps,ur:R0},Tc=new Ll({allowMissing:!0});Tc.init=(It,Mt)=>{Tc.clear(),It&&(Tc.locale(It),Tc.extend(Ta[It])),Mt&&Tc.extend(Mt)},Xs("ar",i_),Xs("cs",Nu),Xs("de",di),Xs("el",Gc),Xs("es",rm),Xs("fi",vs),Xs("fr",s_),Xs("gl",Wc),Xs("hi",Za),Xs("it",zs),Xs("ko",Sc),Xs("nl",Nd),Xs("pt",Cc),Xs("sv",sm),Xs("th",Oy),Xs("tr",vh),Tc.registerMessages=(It,Mt)=>{Ta[It]?Ta[It]=Pt(Pt({},Ta[It]),Mt):Ta[It]=Mt};var ga=Tc,Xp=It=>{const Mt=Ln();return _p(Mt,()=>It.onClickOutside()),cn("ul",{ref:Mt,className:"r6o-comment-dropdown-menu"},cn("li",{onClick:It.onEdit},ga.t("Edit")),cn("li",{onClick:It.onDelete},ga.t("Delete")))},Us={},Hi={},am={exports:{}};/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/(function(It,Mt){(function(zt,Ht){Ht(It,Mt)})(Yl,function(zt,Ht){var Ut=typeof Map=="function"?new Map:function(){var Pn=[],cr=[];return{has:function(Er){return Pn.indexOf(Er)>-1},get:function(Er){return cr[Pn.indexOf(Er)]},set:function(Er,Ar){Pn.indexOf(Er)===-1&&(Pn.push(Er),cr.push(Ar))},delete:function(Er){var Ar=Pn.indexOf(Er);Ar>-1&&(Pn.splice(Ar,1),cr.splice(Ar,1))}}}(),Jt=function(Pn){return new Event(Pn,{bubbles:!0})};try{new Event("test")}catch{Jt=function(cr){var Er=document.createEvent("Event");return Er.initEvent(cr,!0,!1),Er}}function ln(Pn){if(!Pn||!Pn.nodeName||Pn.nodeName!=="TEXTAREA"||Ut.has(Pn))return;var cr=null,Er=null,Ar=null;function Wr(){var so=window.getComputedStyle(Pn,null);so.resize==="vertical"?Pn.style.resize="none":so.resize==="both"&&(Pn.style.resize="horizontal"),so.boxSizing==="content-box"?cr=-(parseFloat(so.paddingTop)+parseFloat(so.paddingBottom)):cr=parseFloat(so.borderTopWidth)+parseFloat(so.borderBottomWidth),isNaN(cr)&&(cr=0),Li()}function ii(so){{var So=Pn.style.width;Pn.style.width="0px",Pn.offsetWidth,Pn.style.width=So}Pn.style.overflowY=so}function ri(so){for(var So=[];so&&so.parentNode&&so.parentNode instanceof Element;)so.parentNode.scrollTop&&So.push({node:so.parentNode,scrollTop:so.parentNode.scrollTop}),so=so.parentNode;return So}function xi(){if(Pn.scrollHeight!==0){var so=ri(Pn),So=document.documentElement&&document.documentElement.scrollTop;Pn.style.height="",Pn.style.height=Pn.scrollHeight+cr+"px",Er=Pn.clientWidth,so.forEach(function(go){go.node.scrollTop=go.scrollTop}),So&&(document.documentElement.scrollTop=So)}}function Li(){xi();var so=Math.round(parseFloat(Pn.style.height)),So=window.getComputedStyle(Pn,null),go=So.boxSizing==="content-box"?Math.round(parseFloat(So.height)):Pn.offsetHeight;if(go<so?So.overflowY==="hidden"&&(ii("scroll"),xi(),go=So.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(Pn,null).height)):Pn.offsetHeight):So.overflowY!=="hidden"&&(ii("hidden"),xi(),go=So.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(Pn,null).height)):Pn.offsetHeight),Ar!==go){Ar=go;var xa=Jt("autosize:resized");try{Pn.dispatchEvent(xa)}catch{}}}var wo=function(){Pn.clientWidth!==Er&&Li()},po=function(so){window.removeEventListener("resize",wo,!1),Pn.removeEventListener("input",Li,!1),Pn.removeEventListener("keyup",Li,!1),Pn.removeEventListener("autosize:destroy",po,!1),Pn.removeEventListener("autosize:update",Li,!1),Object.keys(so).forEach(function(So){Pn.style[So]=so[So]}),Ut.delete(Pn)}.bind(Pn,{height:Pn.style.height,resize:Pn.style.resize,overflowY:Pn.style.overflowY,overflowX:Pn.style.overflowX,wordWrap:Pn.style.wordWrap});Pn.addEventListener("autosize:destroy",po,!1),"onpropertychange"in Pn&&"oninput"in Pn&&Pn.addEventListener("keyup",Li,!1),window.addEventListener("resize",wo,!1),Pn.addEventListener("input",Li,!1),Pn.addEventListener("autosize:update",Li,!1),Pn.style.overflowX="hidden",Pn.style.wordWrap="break-word",Ut.set(Pn,{destroy:po,update:Li}),Wr()}function bn(Pn){var cr=Ut.get(Pn);cr&&cr.destroy()}function Rn(Pn){var cr=Ut.get(Pn);cr&&cr.update()}var Dn=null;typeof window>"u"||typeof window.getComputedStyle!="function"?(Dn=function(Pn){return Pn},Dn.destroy=function(Pn){return Pn},Dn.update=function(Pn){return Pn}):(Dn=function(Pn,cr){return Pn&&Array.prototype.forEach.call(Pn.length?Pn:[Pn],function(Er){return ln(Er)}),Pn},Dn.destroy=function(Pn){return Pn&&Array.prototype.forEach.call(Pn.length?Pn:[Pn],bn),Pn},Dn.update=function(Pn){return Pn&&Array.prototype.forEach.call(Pn.length?Pn:[Pn],Rn),Pn}),Ht.default=Dn,zt.exports=Ht.default})})(am,am.exports);var Zp=function(It,Mt,zt){return zt=window.getComputedStyle,(zt?zt(It):It.currentStyle)[Mt.replace(/-(\w)/gi,function(Ht,Ut){return Ut.toUpperCase()})]},Pl=Zp,oc=Pl;function Zh(It){var Mt=oc(It,"line-height"),zt=parseFloat(Mt,10);if(Mt===zt+""){var Ht=It.style.lineHeight;It.style.lineHeight=Mt+"em",Mt=oc(It,"line-height"),zt=parseFloat(Mt,10),Ht?It.style.lineHeight=Ht:delete It.style.lineHeight}if(Mt.indexOf("pt")!==-1?(zt*=4,zt/=3):Mt.indexOf("mm")!==-1?(zt*=96,zt/=25.4):Mt.indexOf("cm")!==-1?(zt*=96,zt/=2.54):Mt.indexOf("in")!==-1?zt*=96:Mt.indexOf("pc")!==-1&&(zt*=16),zt=Math.round(zt),Mt==="normal"){var Ut=It.nodeName,Jt=document.createElement(Ut);Jt.innerHTML="&nbsp;",Ut.toUpperCase()==="TEXTAREA"&&Jt.setAttribute("rows","1");var ln=oc(It,"font-size");Jt.style.fontSize=ln,Jt.style.padding="0px",Jt.style.border="0px";var bn=document.body;bn.appendChild(Jt);var Rn=Jt.offsetHeight;zt=Rn,bn.removeChild(Jt)}return zt}var Kp=Zh,N0=Yl&&Yl.__extends||function(){var It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,zt){Mt.__proto__=zt}||function(Mt,zt){for(var Ht in zt)zt.hasOwnProperty(Ht)&&(Mt[Ht]=zt[Ht])};return function(Mt,zt){It(Mt,zt);function Ht(){this.constructor=Mt}Mt.prototype=zt===null?Object.create(zt):(Ht.prototype=zt.prototype,new Ht)}}(),lm=Yl&&Yl.__assign||Object.assign||function(It){for(var Mt,zt=1,Ht=arguments.length;zt<Ht;zt++){Mt=arguments[zt];for(var Ut in Mt)Object.prototype.hasOwnProperty.call(Mt,Ut)&&(It[Ut]=Mt[Ut])}return It},gs=Yl&&Yl.__rest||function(It,Mt){var zt={};for(var Ht in It)Object.prototype.hasOwnProperty.call(It,Ht)&&Mt.indexOf(Ht)<0&&(zt[Ht]=It[Ht]);if(It!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Ht=Object.getOwnPropertySymbols(It);Ut<Ht.length;Ut++)Mt.indexOf(Ht[Ut])<0&&(zt[Ht[Ut]]=It[Ht[Ut]]);return zt};Hi.__esModule=!0;var kc=Ba,Os=Xl.exports,Kh=am.exports,Fl=Kp,$y=Fl,Do="autosize:resized",Dd=function(It){N0(Mt,It);function Mt(){var zt=It!==null&&It.apply(this,arguments)||this;return zt.state={lineHeight:null},zt.textarea=null,zt.onResize=function(Ht){zt.props.onResize&&zt.props.onResize(Ht)},zt.updateLineHeight=function(){zt.textarea&&zt.setState({lineHeight:$y(zt.textarea)})},zt.onChange=function(Ht){var Ut=zt.props.onChange;zt.currentValue=Ht.currentTarget.value,Ut&&Ut(Ht)},zt}return Mt.prototype.componentDidMount=function(){var zt=this,Ht=this.props,Ut=Ht.maxRows,Jt=Ht.async;typeof Ut=="number"&&this.updateLineHeight(),typeof Ut=="number"||Jt?setTimeout(function(){return zt.textarea&&Kh(zt.textarea)}):this.textarea&&Kh(this.textarea),this.textarea&&this.textarea.addEventListener(Do,this.onResize)},Mt.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(Do,this.onResize),Kh.destroy(this.textarea))},Mt.prototype.render=function(){var zt=this,Ht=this,Ut=Ht.props;Ut.onResize;var Jt=Ut.maxRows;Ut.onChange;var ln=Ut.style;Ut.innerRef;var bn=Ut.children,Rn=gs(Ut,["onResize","maxRows","onChange","style","innerRef","children"]),Dn=Ht.state.lineHeight,Pn=Jt&&Dn?Dn*Jt:null;return kc.createElement("textarea",lm({},Rn,{onChange:this.onChange,style:Pn?lm({},ln,{maxHeight:Pn}):ln,ref:function(cr){zt.textarea=cr,typeof zt.props.innerRef=="function"?zt.props.innerRef(cr):zt.props.innerRef&&(zt.props.innerRef.current=cr)}}),bn)},Mt.prototype.componentDidUpdate=function(){this.textarea&&Kh.update(this.textarea)},Mt.defaultProps={rows:1,async:!1},Mt.propTypes={rows:Os.number,maxRows:Os.number,onResize:Os.func,innerRef:Os.any,async:Os.bool},Mt}(kc.Component);Hi.TextareaAutosize=kc.forwardRef(function(It,Mt){return kc.createElement(Dd,lm({},It,{innerRef:Mt}))}),function(It){It.__esModule=!0;var Mt=Hi;It.default=Mt.TextareaAutosize}(Us);var Ms=tu(Us);class Hf extends hn{constructor(Mt){super(Mt),Bt(this,"onKeyDown",zt=>{zt.which===13&&zt.ctrlKey&&this.props.onSaveAndClose()}),this.element=an()}componentDidMount(){this.props.focus&&this.element.current&&this.element.current.focus({preventScroll:!0})}render(){return cn(Ms,{ref:this.element,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||ga.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}function Gi(){return Gi=Object.assign||function(It){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt];for(var Ht in zt)Object.prototype.hasOwnProperty.call(zt,Ht)&&(It[Ht]=zt[Ht])}return It},Gi.apply(this,arguments)}function Bd(It){if(It.sheet)return It.sheet;for(var Mt=0;Mt<document.styleSheets.length;Mt++)if(document.styleSheets[Mt].ownerNode===It)return document.styleSheets[Mt]}function Ry(It){var Mt=document.createElement("style");return Mt.setAttribute("data-emotion",It.key),It.nonce!==void 0&&Mt.setAttribute("nonce",It.nonce),Mt.appendChild(document.createTextNode("")),Mt.setAttribute("data-s",""),Mt}var Jh=function(){function It(zt){var Ht=this;this._insertTag=function(Ut){var Jt;Ht.tags.length===0?Ht.insertionPoint?Jt=Ht.insertionPoint.nextSibling:Ht.prepend?Jt=Ht.container.firstChild:Jt=Ht.before:Jt=Ht.tags[Ht.tags.length-1].nextSibling,Ht.container.insertBefore(Ut,Jt),Ht.tags.push(Ut)},this.isSpeedy=zt.speedy===void 0?!0:zt.speedy,this.tags=[],this.ctr=0,this.nonce=zt.nonce,this.key=zt.key,this.container=zt.container,this.prepend=zt.prepend,this.insertionPoint=zt.insertionPoint,this.before=null}var Mt=It.prototype;return Mt.hydrate=function(zt){zt.forEach(this._insertTag)},Mt.insert=function(zt){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(Ry(this));var Ht=this.tags[this.tags.length-1];if(this.isSpeedy){var Ut=Bd(Ht);try{Ut.insertRule(zt,Ut.cssRules.length)}catch{}}else Ht.appendChild(document.createTextNode(zt));this.ctr++},Mt.flush=function(){this.tags.forEach(function(zt){return zt.parentNode&&zt.parentNode.removeChild(zt)}),this.tags=[],this.ctr=0},It}(),fo="-ms-",vl="-moz-",ys="-webkit-",qc="comm",_l="rule",Pa="decl",a_="@import",My="@keyframes",_h=Math.abs,Ol=String.fromCharCode;function Qh(It,Mt){return(((Mt<<2^ma(It,0))<<2^ma(It,1))<<2^ma(It,2))<<2^ma(It,3)}function $l(It){return It.trim()}function Yc(It,Mt){return(It=Mt.exec(It))?It[0]:It}function ls(It,Mt,zt){return It.replace(Mt,zt)}function bh(It,Mt){return It.indexOf(Mt)}function ma(It,Mt){return It.charCodeAt(Mt)|0}function ia(It,Mt,zt){return It.slice(Mt,zt)}function vu(It){return It.length}function jf(It){return It.length}function Oa(It,Mt){return Mt.push(It),It}function xh(It,Mt){return It.map(Mt).join("")}var zl=1,Fd=1,il=0,Hl=0,oa=0,_u="";function Jp(It,Mt,zt,Ht,Ut,Jt,ln){return{value:It,root:Mt,parent:zt,type:Ht,props:Ut,children:Jt,line:zl,column:Fd,length:ln,return:""}}function Vf(It,Mt,zt){return Jp(It,Mt.root,Mt.parent,zt,Mt.props,Mt.children,0)}function zd(){return oa}function bu(){return oa=Hl>0?ma(_u,--Hl):0,Fd--,oa===10&&(Fd=1,zl--),oa}function Cs(){return oa=Hl<il?ma(_u,Hl++):0,Fd++,oa===10&&(Fd=1,zl++),oa}function jl(){return ma(_u,Hl)}function $a(){return Hl}function Vl(It,Mt){return ia(_u,It,Mt)}function Xc(It){switch(It){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cm(It){return zl=Fd=1,il=vu(_u=It),Hl=0,[]}function ed(It){return _u="",It}function xu(It){return $l(Vl(Hl-1,Ul(It===91?It+2:It===40?It+1:It)))}function Bu(It){for(;(oa=jl())&&oa<33;)Cs();return Xc(It)>2||Xc(oa)>3?"":" "}function Ha(It,Mt){for(;--Mt&&Cs()&&!(oa<48||oa>102||oa>57&&oa<65||oa>70&&oa<97););return Vl(It,$a()+(Mt<6&&jl()==32&&Cs()==32))}function Ul(It){for(;Cs();)switch(oa){case It:return Hl;case 34:case 39:return Ul(It===34||It===39?It:oa);case 40:It===41&&Ul(It);break;case 92:Cs();break}return Hl}function ol(It,Mt){for(;Cs()&&It+oa!==47+10&&!(It+oa===42+42&&jl()===47););return"/*"+Vl(Mt,Hl-1)+"*"+Ol(It===47?It:Cs())}function Ny(It){for(;!Xc(jl());)Cs();return Vl(It,Hl)}function wh(It){return ed(Fu("",null,null,null,[""],It=cm(It),0,[0],It))}function Fu(It,Mt,zt,Ht,Ut,Jt,ln,bn,Rn){for(var Dn=0,Pn=0,cr=ln,Er=0,Ar=0,Wr=0,ii=1,ri=1,xi=1,Li=0,wo="",po=Ut,so=Jt,So=Ht,go=wo;ri;)switch(Wr=Li,Li=Cs()){case 34:case 39:case 91:case 40:go+=xu(Li);break;case 9:case 10:case 13:case 32:go+=Bu(Wr);break;case 92:go+=Ha($a()-1,7);continue;case 47:switch(jl()){case 42:case 47:Oa(Ka(ol(Cs(),$a()),Mt,zt),Rn);break;default:go+="/"}break;case 123*ii:bn[Dn++]=vu(go)*xi;case 125*ii:case 59:case 0:switch(Li){case 0:case 125:ri=0;case 59+Pn:Ar>0&&vu(go)-cr&&Oa(Ar>32?Ac(go+";",Ht,zt,cr-1):Ac(ls(go," ","")+";",Ht,zt,cr-2),Rn);break;case 59:go+=";";default:if(Oa(So=Ra(go,Mt,zt,Dn,Pn,Ut,bn,wo,po=[],so=[],cr),Jt),Li===123)if(Pn===0)Fu(go,Mt,So,So,po,Jt,cr,bn,so);else switch(Er){case 100:case 109:case 115:Fu(It,So,So,Ht&&Oa(Ra(It,So,So,0,0,Ut,bn,wo,Ut,po=[],cr),so),Ut,so,cr,bn,Ht?po:so);break;default:Fu(go,So,So,So,[""],so,cr,bn,so)}}Dn=Pn=Ar=0,ii=xi=1,wo=go="",cr=ln;break;case 58:cr=1+vu(go),Ar=Wr;default:if(ii<1){if(Li==123)--ii;else if(Li==125&&ii++==0&&bu()==125)continue}switch(go+=Ol(Li),Li*ii){case 38:xi=Pn>0?1:(go+="\f",-1);break;case 44:bn[Dn++]=(vu(go)-1)*xi,xi=1;break;case 64:jl()===45&&(go+=xu(Cs())),Er=jl(),Pn=vu(wo=go+=Ny($a())),Li++;break;case 45:Wr===45&&vu(go)==2&&(ii=0)}}return Jt}function Ra(It,Mt,zt,Ht,Ut,Jt,ln,bn,Rn,Dn,Pn){for(var cr=Ut-1,Er=Ut===0?Jt:[""],Ar=jf(Er),Wr=0,ii=0,ri=0;Wr<Ht;++Wr)for(var xi=0,Li=ia(It,cr+1,cr=_h(ii=ln[Wr])),wo=It;xi<Ar;++xi)(wo=$l(ii>0?Er[xi]+" "+Li:ls(Li,/&\f/g,Er[xi])))&&(Rn[ri++]=wo);return Jp(It,Mt,zt,Ut===0?_l:bn,Rn,Dn,Pn)}function Ka(It,Mt,zt){return Jp(It,Mt,zt,qc,Ol(zd()),ia(It,2,-2),0)}function Ac(It,Mt,zt,Ht){return Jp(It,Mt,zt,Pa,ia(It,0,Ht),ia(It,Ht+1,-1),Ht)}function Gl(It,Mt){switch(Qh(It,Mt)){case 5103:return ys+"print-"+It+It;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ys+It+It;case 5349:case 4246:case 4810:case 6968:case 2756:return ys+It+vl+It+fo+It+It;case 6828:case 4268:return ys+It+fo+It+It;case 6165:return ys+It+fo+"flex-"+It+It;case 5187:return ys+It+ls(It,/(\w+).+(:[^]+)/,ys+"box-$1$2"+fo+"flex-$1$2")+It;case 5443:return ys+It+fo+"flex-item-"+ls(It,/flex-|-self/,"")+It;case 4675:return ys+It+fo+"flex-line-pack"+ls(It,/align-content|flex-|-self/,"")+It;case 5548:return ys+It+fo+ls(It,"shrink","negative")+It;case 5292:return ys+It+fo+ls(It,"basis","preferred-size")+It;case 6060:return ys+"box-"+ls(It,"-grow","")+ys+It+fo+ls(It,"grow","positive")+It;case 4554:return ys+ls(It,/([^-])(transform)/g,"$1"+ys+"$2")+It;case 6187:return ls(ls(ls(It,/(zoom-|grab)/,ys+"$1"),/(image-set)/,ys+"$1"),It,"")+It;case 5495:case 3959:return ls(It,/(image-set\([^]*)/,ys+"$1$`$1");case 4968:return ls(ls(It,/(.+:)(flex-)?(.*)/,ys+"box-pack:$3"+fo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ys+It+It;case 4095:case 3583:case 4068:case 2532:return ls(It,/(.+)-inline(.+)/,ys+"$1$2")+It;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vu(It)-1-Mt>6)switch(ma(It,Mt+1)){case 109:if(ma(It,Mt+4)!==45)break;case 102:return ls(It,/(.+:)(.+)-([^]+)/,"$1"+ys+"$2-$3$1"+vl+(ma(It,Mt+3)==108?"$3":"$2-$3"))+It;case 115:return~bh(It,"stretch")?Gl(ls(It,"stretch","fill-available"),Mt)+It:It}break;case 4949:if(ma(It,Mt+1)!==115)break;case 6444:switch(ma(It,vu(It)-3-(~bh(It,"!important")&&10))){case 107:return ls(It,":",":"+ys)+It;case 101:return ls(It,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ys+(ma(It,14)===45?"inline-":"")+"box$3$1"+ys+"$2$3$1"+fo+"$2box$3")+It}break;case 5936:switch(ma(It,Mt+11)){case 114:return ys+It+fo+ls(It,/[svh]\w+-[tblr]{2}/,"tb")+It;case 108:return ys+It+fo+ls(It,/[svh]\w+-[tblr]{2}/,"tb-rl")+It;case 45:return ys+It+fo+ls(It,/[svh]\w+-[tblr]{2}/,"lr")+It}return ys+It+fo+It+It}return It}function Hd(It,Mt){for(var zt="",Ht=jf(It),Ut=0;Ut<Ht;Ut++)zt+=Mt(It[Ut],Ut,It,Mt)||"";return zt}function jd(It,Mt,zt,Ht){switch(It.type){case a_:case Pa:return It.return=It.return||It.value;case qc:return"";case _l:It.value=It.props.join(",")}return vu(zt=Hd(It.children,Ht))?It.return=It.value+"{"+zt+"}":""}function Eh(It){var Mt=jf(It);return function(zt,Ht,Ut,Jt){for(var ln="",bn=0;bn<Mt;bn++)ln+=It[bn](zt,Ht,Ut,Jt)||"";return ln}}function Rl(It){return function(Mt){Mt.root||(Mt=Mt.return)&&It(Mt)}}function D0(It,Mt,zt,Ht){if(!It.return)switch(It.type){case Pa:It.return=Gl(It.value,It.length);break;case My:return Hd([Vf(ls(It.value,"@","@"+ys),It,"")],Ht);case _l:if(It.length)return xh(It.props,function(Ut){switch(Yc(Ut,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hd([Vf(ls(Ut,/:(read-\w+)/,":"+vl+"$1"),It,"")],Ht);case"::placeholder":return Hd([Vf(ls(Ut,/:(plac\w+)/,":"+ys+"input-$1"),It,""),Vf(ls(Ut,/:(plac\w+)/,":"+vl+"$1"),It,""),Vf(ls(Ut,/:(plac\w+)/,fo+"input-$1"),It,"")],Ht)}return""})}}function ja(It){var Mt=Object.create(null);return function(zt){return Mt[zt]===void 0&&(Mt[zt]=It(zt)),Mt[zt]}}var B0=function(It,Mt,zt){for(var Ht=0,Ut=0;Ht=Ut,Ut=jl(),Ht===38&&Ut===12&&(Mt[zt]=1),!Xc(Ut);)Cs();return Vl(It,Hl)},Zc=function(It,Mt){var zt=-1,Ht=44;do switch(Xc(Ht)){case 0:Ht===38&&jl()===12&&(Mt[zt]=1),It[zt]+=B0(Hl-1,Mt,zt);break;case 2:It[zt]+=xu(Ht);break;case 4:if(Ht===44){It[++zt]=jl()===58?"&\f":"",Mt[zt]=It[zt].length;break}default:It[zt]+=Ol(Ht)}while(Ht=Cs());return It},Ma=function(It,Mt){return ed(Zc(cm(It),Mt))},sc=new WeakMap,td=function(It){if(!(It.type!=="rule"||!It.parent||!It.length)){for(var Mt=It.value,zt=It.parent,Ht=It.column===zt.column&&It.line===zt.line;zt.type!=="rule";)if(zt=zt.parent,!zt)return;if(!(It.props.length===1&&Mt.charCodeAt(0)!==58&&!sc.get(zt))&&!Ht){sc.set(It,!0);for(var Ut=[],Jt=Ma(Mt,Ut),ln=zt.props,bn=0,Rn=0;bn<Jt.length;bn++)for(var Dn=0;Dn<ln.length;Dn++,Rn++)It.props[Rn]=Ut[bn]?Jt[bn].replace(/&\f/g,ln[Dn]):ln[Dn]+" "+Jt[bn]}}},Vd=function(It){if(It.type==="decl"){var Mt=It.value;Mt.charCodeAt(0)===108&&Mt.charCodeAt(2)===98&&(It.return="",It.value="")}},Kc=[D0],Ud=function(It){var Mt=It.key;if(Mt==="css"){var zt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(zt,function(Wr){var ii=Wr.getAttribute("data-emotion");ii.indexOf(" ")!==-1&&(document.head.appendChild(Wr),Wr.setAttribute("data-s",""))})}var Ht=It.stylisPlugins||Kc,Ut={},Jt,ln=[];Jt=It.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+Mt+' "]'),function(Wr){for(var ii=Wr.getAttribute("data-emotion").split(" "),ri=1;ri<ii.length;ri++)Ut[ii[ri]]=!0;ln.push(Wr)});var bn,Rn=[td,Vd];{var Dn,Pn=[jd,Rl(function(Wr){Dn.insert(Wr)})],cr=Eh(Rn.concat(Ht,Pn)),Er=function(Wr){return Hd(wh(Wr),cr)};bn=function(Wr,ii,ri,xi){Dn=ri,Er(Wr?Wr+"{"+ii.styles+"}":ii.styles),xi&&(Ar.inserted[ii.name]=!0)}}var Ar={key:Mt,sheet:new Jh({key:Mt,container:Jt,nonce:It.nonce,speedy:It.speedy,prepend:It.prepend,insertionPoint:It.insertionPoint}),nonce:It.nonce,inserted:Ut,registered:{},insert:bn};return Ar.sheet.hydrate(ln),Ar},sl={exports:{}},cs={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Bo=typeof Symbol=="function"&&Symbol.for,um=Bo?Symbol.for("react.element"):60103,hm=Bo?Symbol.for("react.portal"):60106,Na=Bo?Symbol.for("react.fragment"):60107,Jc=Bo?Symbol.for("react.strict_mode"):60108,Uf=Bo?Symbol.for("react.profiler"):60114,zu=Bo?Symbol.for("react.provider"):60109,Qc=Bo?Symbol.for("react.context"):60110,ya=Bo?Symbol.for("react.async_mode"):60111,Da=Bo?Symbol.for("react.concurrent_mode"):60111,nd=Bo?Symbol.for("react.forward_ref"):60112,Ja=Bo?Symbol.for("react.suspense"):60113,F0=Bo?Symbol.for("react.suspense_list"):60120,Gd=Bo?Symbol.for("react.memo"):60115,va=Bo?Symbol.for("react.lazy"):60116,l_=Bo?Symbol.for("react.block"):60121,wu=Bo?Symbol.for("react.fundamental"):60117,Dy=Bo?Symbol.for("react.responder"):60118,Qp=Bo?Symbol.for("react.scope"):60119;function Lc(It){if(typeof It=="object"&&It!==null){var Mt=It.$$typeof;switch(Mt){case um:switch(It=It.type,It){case ya:case Da:case Na:case Uf:case Jc:case Ja:return It;default:switch(It=It&&It.$$typeof,It){case Qc:case nd:case va:case Gd:case zu:return It;default:return Mt}}case hm:return Mt}}}function By(It){return Lc(It)===Da}cs.AsyncMode=ya,cs.ConcurrentMode=Da,cs.ContextConsumer=Qc,cs.ContextProvider=zu,cs.Element=um,cs.ForwardRef=nd,cs.Fragment=Na,cs.Lazy=va,cs.Memo=Gd,cs.Portal=hm,cs.Profiler=Uf,cs.StrictMode=Jc,cs.Suspense=Ja,cs.isAsyncMode=function(It){return By(It)||Lc(It)===ya},cs.isConcurrentMode=By,cs.isContextConsumer=function(It){return Lc(It)===Qc},cs.isContextProvider=function(It){return Lc(It)===zu},cs.isElement=function(It){return typeof It=="object"&&It!==null&&It.$$typeof===um},cs.isForwardRef=function(It){return Lc(It)===nd},cs.isFragment=function(It){return Lc(It)===Na},cs.isLazy=function(It){return Lc(It)===va},cs.isMemo=function(It){return Lc(It)===Gd},cs.isPortal=function(It){return Lc(It)===hm},cs.isProfiler=function(It){return Lc(It)===Uf},cs.isStrictMode=function(It){return Lc(It)===Jc},cs.isSuspense=function(It){return Lc(It)===Ja},cs.isValidElementType=function(It){return typeof It=="string"||typeof It=="function"||It===Na||It===Da||It===Uf||It===Jc||It===Ja||It===F0||typeof It=="object"&&It!==null&&(It.$$typeof===va||It.$$typeof===Gd||It.$$typeof===zu||It.$$typeof===Qc||It.$$typeof===nd||It.$$typeof===wu||It.$$typeof===Dy||It.$$typeof===Qp||It.$$typeof===l_)},cs.typeOf=Lc,sl.exports=cs;var eu=sl.exports,Gf={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Wf={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dm={};dm[eu.ForwardRef]=Gf,dm[eu.Memo]=Wf;var qf=!0;function Sh(It,Mt,zt){var Ht="";return zt.split(" ").forEach(function(Ut){It[Ut]!==void 0?Mt.push(It[Ut]+";"):Ht+=Ut+" "}),Ht}var Yf=function(It,Mt,zt){var Ht=It.key+"-"+Mt.name;if((zt===!1||qf===!1)&&It.registered[Ht]===void 0&&(It.registered[Ht]=Mt.styles),It.inserted[Mt.name]===void 0){var Ut=Mt;do It.insert(Mt===Ut?"."+Ht:"",Ut,It.sheet,!0),Ut=Ut.next;while(Ut!==void 0)}};function Xf(It){for(var Mt=0,zt,Ht=0,Ut=It.length;Ut>=4;++Ht,Ut-=4)zt=It.charCodeAt(Ht)&255|(It.charCodeAt(++Ht)&255)<<8|(It.charCodeAt(++Ht)&255)<<16|(It.charCodeAt(++Ht)&255)<<24,zt=(zt&65535)*1540483477+((zt>>>16)*59797<<16),zt^=zt>>>24,Mt=(zt&65535)*1540483477+((zt>>>16)*59797<<16)^(Mt&65535)*1540483477+((Mt>>>16)*59797<<16);switch(Ut){case 3:Mt^=(It.charCodeAt(Ht+2)&255)<<16;case 2:Mt^=(It.charCodeAt(Ht+1)&255)<<8;case 1:Mt^=It.charCodeAt(Ht)&255,Mt=(Mt&65535)*1540483477+((Mt>>>16)*59797<<16)}return Mt^=Mt>>>13,Mt=(Mt&65535)*1540483477+((Mt>>>16)*59797<<16),((Mt^Mt>>>15)>>>0).toString(36)}var rd={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},yo=/[A-Z]|^ms/g,Ch=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wd=function(It){return It.charCodeAt(1)===45},Th=function(It){return It!=null&&typeof It!="boolean"},bl=ja(function(It){return Wd(It)?It:It.replace(yo,"-$&").toLowerCase()}),z0=function(It,Mt){switch(It){case"animation":case"animationName":if(typeof Mt=="string")return Mt.replace(Ch,function(zt,Ht,Ut){return Ic={name:Ht,styles:Ut,next:Ic},Ht})}return rd[It]!==1&&!Wd(It)&&typeof Mt=="number"&&Mt!==0?Mt+"px":Mt};function Qa(It,Mt,zt){if(zt==null)return"";if(zt.__emotion_styles!==void 0)return zt;switch(typeof zt){case"boolean":return"";case"object":{if(zt.anim===1)return Ic={name:zt.name,styles:zt.styles,next:Ic},zt.name;if(zt.styles!==void 0){var Ht=zt.next;if(Ht!==void 0)for(;Ht!==void 0;)Ic={name:Ht.name,styles:Ht.styles,next:Ic},Ht=Ht.next;var Ut=zt.styles+";";return Ut}return sa(It,Mt,zt)}case"function":{if(It!==void 0){var Jt=Ic,ln=zt(It);return Ic=Jt,Qa(It,Mt,ln)}break}}if(Mt==null)return zt;var bn=Mt[zt];return bn!==void 0?bn:zt}function sa(It,Mt,zt){var Ht="";if(Array.isArray(zt))for(var Ut=0;Ut<zt.length;Ut++)Ht+=Qa(It,Mt,zt[Ut])+";";else for(var Jt in zt){var ln=zt[Jt];if(typeof ln!="object")Mt!=null&&Mt[ln]!==void 0?Ht+=Jt+"{"+Mt[ln]+"}":Th(ln)&&(Ht+=bl(Jt)+":"+z0(Jt,ln)+";");else if(Array.isArray(ln)&&typeof ln[0]=="string"&&(Mt==null||Mt[ln[0]]===void 0))for(var bn=0;bn<ln.length;bn++)Th(ln[bn])&&(Ht+=bl(Jt)+":"+z0(Jt,ln[bn])+";");else{var Rn=Qa(It,Mt,ln);switch(Jt){case"animation":case"animationName":{Ht+=bl(Jt)+":"+Rn+";";break}default:Ht+=Jt+"{"+Rn+"}"}}}return Ht}var H0=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ic,Hu=function(It,Mt,zt){if(It.length===1&&typeof It[0]=="object"&&It[0]!==null&&It[0].styles!==void 0)return It[0];var Ht=!0,Ut="";Ic=void 0;var Jt=It[0];Jt==null||Jt.raw===void 0?(Ht=!1,Ut+=Qa(zt,Mt,Jt)):Ut+=Jt[0];for(var ln=1;ln<It.length;ln++)Ut+=Qa(zt,Mt,It[ln]),Ht&&(Ut+=Jt[ln]);H0.lastIndex=0;for(var bn="",Rn;(Rn=H0.exec(Ut))!==null;)bn+="-"+Rn[1];var Dn=Xf(Ut)+bn;return{name:Dn,styles:Ut,next:Ic}},Zf={}.hasOwnProperty,eg=Nn(typeof HTMLElement<"u"?Ud({key:"css"}):null);eg.Provider;var j0=function(It){return Ns(function(Mt,zt){var Ht=fr(eg);return It(Mt,Ht,zt)})},ea=Nn({}),bs="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ju=function(It,Mt){var zt={};for(var Ht in Mt)Zf.call(Mt,Ht)&&(zt[Ht]=Mt[Ht]);return zt[bs]=It,zt},Fy=function(){return null},Vu=j0(function(It,Mt,zt){var Ht=It.css;typeof Ht=="string"&&Mt.registered[Ht]!==void 0&&(Ht=Mt.registered[Ht]);var Ut=It[bs],Jt=[Ht],ln="";typeof It.className=="string"?ln=Sh(Mt.registered,Jt,It.className):It.className!=null&&(ln=It.className+" ");var bn=Hu(Jt,void 0,fr(ea));Yf(Mt,bn,typeof Ut=="string"),ln+=Mt.key+"-"+bn.name;var Rn={};for(var Dn in It)Zf.call(It,Dn)&&Dn!=="css"&&Dn!==bs&&(Rn[Dn]=It[Dn]);Rn.ref=zt,Rn.className=ln;var Pn=cn(Ut,Rn),cr=cn(Fy,null);return cn(jn,null,cr,Pn)}),no=function(It,Mt){var zt=arguments;if(Mt==null||!Zf.call(Mt,"css"))return cn.apply(void 0,zt);var Ht=zt.length,Ut=new Array(Ht);Ut[0]=Vu,Ut[1]=ju(It,Mt);for(var Jt=2;Jt<Ht;Jt++)Ut[Jt]=zt[Jt];return cn.apply(null,Ut)};function ac(){for(var It=arguments.length,Mt=new Array(It),zt=0;zt<It;zt++)Mt[zt]=arguments[zt];return Hu(Mt)}var al=function(){var It=ac.apply(void 0,arguments),Mt="animation-"+It.name;return{name:Mt,styles:"@keyframes "+Mt+"{"+It.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},c_=function It(Mt){for(var zt=Mt.length,Ht=0,Ut="";Ht<zt;Ht++){var Jt=Mt[Ht];if(Jt!=null){var ln=void 0;switch(typeof Jt){case"boolean":break;case"object":{if(Array.isArray(Jt))ln=It(Jt);else{ln="";for(var bn in Jt)Jt[bn]&&bn&&(ln&&(ln+=" "),ln+=bn)}break}default:ln=Jt}ln&&(Ut&&(Ut+=" "),Ut+=ln)}}return Ut};function Kf(It,Mt,zt){var Ht=[],Ut=Sh(It,Ht,zt);return Ht.length<2?zt:Ut+Mt(Ht)}var _a=function(){return null},ba=j0(function(It,Mt){var zt=function(){for(var bn=arguments.length,Rn=new Array(bn),Dn=0;Dn<bn;Dn++)Rn[Dn]=arguments[Dn];var Pn=Hu(Rn,Mt.registered);return Yf(Mt,Pn,!1),Mt.key+"-"+Pn.name},Ht=function(){for(var bn=arguments.length,Rn=new Array(bn),Dn=0;Dn<bn;Dn++)Rn[Dn]=arguments[Dn];return Kf(Mt.registered,zt,c_(Rn))},Ut={css:zt,cx:Ht,theme:fr(ea)},Jt=It.children(Ut),ln=cn(_a,null);return cn(jn,null,ln,Jt)});function tg(It,Mt){return Mt||(Mt=It.slice(0)),Object.freeze(Object.defineProperties(It,{raw:{value:Object.freeze(Mt)}}))}function fm(It,Mt){if(It==null)return{};var zt={},Ht=Object.keys(It),Ut,Jt;for(Jt=0;Jt<Ht.length;Jt++)Ut=Ht[Jt],!(Mt.indexOf(Ut)>=0)&&(zt[Ut]=It[Ut]);return zt}function Eu(It,Mt){if(It==null)return{};var zt=fm(It,Mt),Ht,Ut;if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(It);for(Ut=0;Ut<Jt.length;Ut++)Ht=Jt[Ut],!(Mt.indexOf(Ht)>=0)&&(!Object.prototype.propertyIsEnumerable.call(It,Ht)||(zt[Ht]=It[Ht]))}return zt}function od(It){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?od=function(Mt){return typeof Mt}:od=function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},od(It)}var ng={};Object.defineProperty(ng,"__esModule",{value:!0});var pm=Object.assign||function(It){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt];for(var Ht in zt)Object.prototype.hasOwnProperty.call(zt,Ht)&&(It[Ht]=zt[Ht])}return It},V0=function(){function It(Mt,zt){for(var Ht=0;Ht<zt.length;Ht++){var Ut=zt[Ht];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Mt,Ut.key,Ut)}}return function(Mt,zt,Ht){return zt&&It(Mt.prototype,zt),Ht&&It(Mt,Ht),Mt}}(),gm=Ba,Jf=rg(gm),U0=Xl.exports,aa=rg(U0);function rg(It){return It&&It.__esModule?It:{default:It}}function mm(It,Mt){var zt={};for(var Ht in It)Mt.indexOf(Ht)>=0||!Object.prototype.hasOwnProperty.call(It,Ht)||(zt[Ht]=It[Ht]);return zt}function G0(It,Mt){if(!(It instanceof Mt))throw new TypeError("Cannot call a class as a function")}function ym(It,Mt){if(!It)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt&&(typeof Mt=="object"||typeof Mt=="function")?Mt:It}function W0(It,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Mt);It.prototype=Object.create(Mt&&Mt.prototype,{constructor:{value:It,enumerable:!1,writable:!0,configurable:!0}}),Mt&&(Object.setPrototypeOf?Object.setPrototypeOf(It,Mt):It.__proto__=Mt)}var q0={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},Y0=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],zy=function(It){return Y0.forEach(function(Mt){return delete It[Mt]}),It},X0=function(It,Mt){Mt.style.fontSize=It.fontSize,Mt.style.fontFamily=It.fontFamily,Mt.style.fontWeight=It.fontWeight,Mt.style.fontStyle=It.fontStyle,Mt.style.letterSpacing=It.letterSpacing,Mt.style.textTransform=It.textTransform},Z0=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,K0=function(){return Z0?"_"+Math.random().toString(36).substr(2,12):void 0},vm=function(It){W0(Mt,It),V0(Mt,null,[{key:"getDerivedStateFromProps",value:function(zt,Ht){var Ut=zt.id;return Ut!==Ht.prevId?{inputId:Ut||K0(),prevId:Ut}:null}}]);function Mt(zt){G0(this,Mt);var Ht=ym(this,(Mt.__proto__||Object.getPrototypeOf(Mt)).call(this,zt));return Ht.inputRef=function(Ut){Ht.input=Ut,typeof Ht.props.inputRef=="function"&&Ht.props.inputRef(Ut)},Ht.placeHolderSizerRef=function(Ut){Ht.placeHolderSizer=Ut},Ht.sizerRef=function(Ut){Ht.sizer=Ut},Ht.state={inputWidth:zt.minWidth,inputId:zt.id||K0(),prevId:zt.id},Ht}return V0(Mt,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(zt,Ht){Ht.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var zt=this.input&&window.getComputedStyle(this.input);!zt||(X0(zt,this.sizer),this.placeHolderSizer&&X0(zt,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var zt=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?zt=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:zt=this.sizer.scrollWidth+2;var Ht=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;zt+=Ht,zt<this.props.minWidth&&(zt=this.props.minWidth),zt!==this.state.inputWidth&&this.setState({inputWidth:zt})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var zt=this.props.injectStyles;return Z0&&zt?Jf.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var zt=[this.props.defaultValue,this.props.value,""].reduce(function(ln,bn){return ln!=null?ln:bn}),Ht=pm({},this.props.style);Ht.display||(Ht.display="inline-block");var Ut=pm({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),Jt=mm(this.props,[]);return zy(Jt),Jt.className=this.props.inputClassName,Jt.id=this.state.inputId,Jt.style=Ut,Jf.default.createElement("div",{className:this.props.className,style:Ht},this.renderStyles(),Jf.default.createElement("input",pm({},Jt,{ref:this.inputRef})),Jf.default.createElement("div",{ref:this.sizerRef,style:q0},zt),this.props.placeholder?Jf.default.createElement("div",{ref:this.placeHolderSizerRef,style:q0},this.props.placeholder):null)}}]),Mt}(gm.Component);vm.propTypes={className:aa.default.string,defaultValue:aa.default.any,extraWidth:aa.default.oneOfType([aa.default.number,aa.default.string]),id:aa.default.string,injectStyles:aa.default.bool,inputClassName:aa.default.string,inputRef:aa.default.func,inputStyle:aa.default.object,minWidth:aa.default.oneOfType([aa.default.number,aa.default.string]),onAutosize:aa.default.func,onChange:aa.default.func,placeholder:aa.default.string,placeholderIsMinWidth:aa.default.bool,style:aa.default.object,value:aa.default.any},vm.defaultProps={minWidth:1,injectStyles:!0};var _m=ng.default=vm;function qd(It,Mt){if(!(It instanceof Mt))throw new TypeError("Cannot call a class as a function")}function J0(It,Mt){for(var zt=0;zt<Mt.length;zt++){var Ht=Mt[zt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(It,Ht.key,Ht)}}function ig(It,Mt,zt){return Mt&&J0(It.prototype,Mt),zt&&J0(It,zt),It}function og(It,Mt){return og=Object.setPrototypeOf||function(zt,Ht){return zt.__proto__=Ht,zt},og(It,Mt)}function Qf(It,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Super expression must either be null or a function");It.prototype=Object.create(Mt&&Mt.prototype,{constructor:{value:It,writable:!0,configurable:!0}}),Mt&&og(It,Mt)}function Uu(It,Mt,zt){return Mt in It?Object.defineProperty(It,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[Mt]=zt,It}function Hy(It,Mt,zt){return Mt in It?Object.defineProperty(It,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):It[Mt]=zt,It}function ep(It,Mt){var zt=Object.keys(It);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(It);Mt&&(Ht=Ht.filter(function(Ut){return Object.getOwnPropertyDescriptor(It,Ut).enumerable})),zt.push.apply(zt,Ht)}return zt}function Va(It){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt]!=null?arguments[Mt]:{};Mt%2?ep(Object(zt),!0).forEach(function(Ht){Hy(It,Ht,zt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(zt)):ep(Object(zt)).forEach(function(Ht){Object.defineProperty(It,Ht,Object.getOwnPropertyDescriptor(zt,Ht))})}return It}function bm(It){return bm=Object.setPrototypeOf?Object.getPrototypeOf:function(Mt){return Mt.__proto__||Object.getPrototypeOf(Mt)},bm(It)}function Q0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function jy(It){if(It===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return It}function tp(It,Mt){return Mt&&(typeof Mt=="object"||typeof Mt=="function")?Mt:jy(It)}function Yd(It){var Mt=Q0();return function(){var zt=bm(It),Ht;if(Mt){var Ut=bm(this).constructor;Ht=Reflect.construct(zt,arguments,Ut)}else Ht=zt.apply(this,arguments);return tp(this,Ht)}}var sd=function(){};function xm(It,Mt){return Mt?Mt[0]==="-"?It+Mt:It+"__"+Mt:It}function Vy(It,Mt,zt){var Ht=[zt];if(Mt&&It)for(var Ut in Mt)Mt.hasOwnProperty(Ut)&&Mt[Ut]&&Ht.push("".concat(xm(It,Ut)));return Ht.filter(function(Jt){return Jt}).map(function(Jt){return String(Jt).trim()}).join(" ")}var e1=function(It){return Array.isArray(It)?It.filter(Boolean):od(It)==="object"&&It!==null?[It]:[]},Uy=function(It){It.className,It.clearValue,It.cx,It.getStyles,It.getValue,It.hasValue,It.isMulti,It.isRtl,It.options,It.selectOption,It.selectProps,It.setValue,It.theme;var Mt=Eu(It,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]);return Va({},Mt)};function n1(It){return[document.documentElement,document.body,window].indexOf(It)>-1}function r1(It){return n1(It)?window.pageYOffset:It.scrollTop}function wm(It,Mt){if(n1(It)){window.scrollTo(0,Mt);return}It.scrollTop=Mt}function Gy(It){var Mt=getComputedStyle(It),zt=Mt.position==="absolute",Ht=/(auto|scroll)/,Ut=document.documentElement;if(Mt.position==="fixed")return Ut;for(var Jt=It;Jt=Jt.parentElement;)if(Mt=getComputedStyle(Jt),!(zt&&Mt.position==="static")&&Ht.test(Mt.overflow+Mt.overflowY+Mt.overflowX))return Jt;return Ut}function i1(It,Mt,zt,Ht){return zt*((It=It/Ht-1)*It*It+1)+Mt}function sg(It,Mt){var zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,Ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:sd,Ut=r1(It),Jt=Mt-Ut,ln=10,bn=0;function Rn(){bn+=ln;var Dn=i1(bn,Ut,Jt,zt);wm(It,Dn),bn<zt?window.requestAnimationFrame(Rn):Ht(It)}Rn()}function u_(It,Mt){var zt=It.getBoundingClientRect(),Ht=Mt.getBoundingClientRect(),Ut=Mt.offsetHeight/3;Ht.bottom+Ut>zt.bottom?wm(It,Math.min(Mt.offsetTop+Mt.clientHeight-It.offsetHeight+Ut,It.scrollHeight)):Ht.top-Ut<zt.top&&wm(It,Math.max(Mt.offsetTop-Ut,0))}function Wy(It){var Mt=It.getBoundingClientRect();return{bottom:Mt.bottom,height:Mt.height,left:Mt.left,right:Mt.right,top:Mt.top,width:Mt.width}}function qy(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function h_(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var o1=!1,d_={get passive(){return o1=!0}},Xd=typeof window<"u"?window:{};Xd.addEventListener&&Xd.removeEventListener&&(Xd.addEventListener("p",sd,d_),Xd.removeEventListener("p",sd,!1));var Yy=o1;function Xy(It){var Mt=It.maxHeight,zt=It.menuEl,Ht=It.minHeight,Ut=It.placement,Jt=It.shouldScroll,ln=It.isFixedPosition,bn=It.theme,Rn=bn.spacing,Dn=Gy(zt),Pn={placement:"bottom",maxHeight:Mt};if(!zt||!zt.offsetParent)return Pn;var cr=Dn.getBoundingClientRect(),Er=cr.height,Ar=zt.getBoundingClientRect(),Wr=Ar.bottom,ii=Ar.height,ri=Ar.top,xi=zt.offsetParent.getBoundingClientRect(),Li=xi.top,wo=window.innerHeight,po=r1(Dn),so=parseInt(getComputedStyle(zt).marginBottom,10),So=parseInt(getComputedStyle(zt).marginTop,10),go=Li-So,xa=wo-ri,ka=go+po,Gs=Er-po-ri,Ws=Wr-wo+po+so,Gu=po+ri-So,Pc=160;switch(Ut){case"auto":case"bottom":if(xa>=ii)return{placement:"bottom",maxHeight:Mt};if(Gs>=ii&&!ln)return Jt&&sg(Dn,Ws,Pc),{placement:"bottom",maxHeight:Mt};if(!ln&&Gs>=Ht||ln&&xa>=Ht){Jt&&sg(Dn,Ws,Pc);var Jd=ln?xa-so:Gs-so;return{placement:"bottom",maxHeight:Jd}}if(Ut==="auto"||ln){var Wu=Mt,kh=ln?go:ka;return kh>=Ht&&(Wu=Math.min(kh-so-Rn.controlHeight,Mt)),{placement:"top",maxHeight:Wu}}if(Ut==="bottom")return Jt&&wm(Dn,Ws),{placement:"bottom",maxHeight:Mt};break;case"top":if(go>=ii)return{placement:"top",maxHeight:Mt};if(ka>=ii&&!ln)return Jt&&sg(Dn,Gu,Pc),{placement:"top",maxHeight:Mt};if(!ln&&ka>=Ht||ln&&go>=Ht){var ql=Mt;return(!ln&&ka>=Ht||ln&&go>=Ht)&&(ql=ln?go-So:ka-So),Jt&&sg(Dn,Gu,Pc),{placement:"top",maxHeight:ql}}return{placement:"bottom",maxHeight:Mt};default:throw new Error('Invalid placement provided "'.concat(Ut,'".'))}return Pn}function Zy(It){var Mt={bottom:"top",top:"bottom"};return It?Mt[It]:"bottom"}var Zd=function(It){return It==="auto"?"bottom":It},Ky=function(It){var Mt,zt=It.placement,Ht=It.theme,Ut=Ht.borderRadius,Jt=Ht.spacing,ln=Ht.colors;return Mt={label:"menu"},Uu(Mt,Zy(zt),"100%"),Uu(Mt,"backgroundColor",ln.neutral0),Uu(Mt,"borderRadius",Ut),Uu(Mt,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Uu(Mt,"marginBottom",Jt.menuGutter),Uu(Mt,"marginTop",Jt.menuGutter),Uu(Mt,"position","absolute"),Uu(Mt,"width","100%"),Uu(Mt,"zIndex",1),Mt},Jy=Nn({getPortalPlacement:null}),Qy=function(It){Qf(zt,It);var Mt=Yd(zt);function zt(){var Ht;qd(this,zt);for(var Ut=arguments.length,Jt=new Array(Ut),ln=0;ln<Ut;ln++)Jt[ln]=arguments[ln];return Ht=Mt.call.apply(Mt,[this].concat(Jt)),Ht.state={maxHeight:Ht.props.maxMenuHeight,placement:null},Ht.getPlacement=function(bn){var Rn=Ht.props,Dn=Rn.minMenuHeight,Pn=Rn.maxMenuHeight,cr=Rn.menuPlacement,Er=Rn.menuPosition,Ar=Rn.menuShouldScrollIntoView,Wr=Rn.theme;if(bn){var ii=Er==="fixed",ri=Ar&&!ii,xi=Xy({maxHeight:Pn,menuEl:bn,minHeight:Dn,placement:cr,shouldScroll:ri,isFixedPosition:ii,theme:Wr}),Li=Ht.context.getPortalPlacement;Li&&Li(xi),Ht.setState(xi)}},Ht.getUpdatedProps=function(){var bn=Ht.props.menuPlacement,Rn=Ht.state.placement||Zd(bn);return Va(Va({},Ht.props),{},{placement:Rn,maxHeight:Ht.state.maxHeight})},Ht}return ig(zt,[{key:"render",value:function(){var Ht=this.props.children;return Ht({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),zt}(hn);Qy.contextType=Jy;var ev=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerRef,ln=It.innerProps;return no("div",Gi({css:Ut("menu",It),className:Ht({menu:!0},zt),ref:Jt},ln),Mt)},f_=function(It){var Mt=It.maxHeight,zt=It.theme.spacing.baseUnit;return{maxHeight:Mt,overflowY:"auto",paddingBottom:zt,paddingTop:zt,position:"relative",WebkitOverflowScrolling:"touch"}},tv=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerProps,ln=It.innerRef,bn=It.isMulti;return no("div",Gi({css:Ut("menuList",It),className:Ht({"menu-list":!0,"menu-list--is-multi":bn},zt),ref:ln},Jt),Mt)},s1=function(It){var Mt=It.theme,zt=Mt.spacing.baseUnit,Ht=Mt.colors;return{color:Ht.neutral40,padding:"".concat(zt*2,"px ").concat(zt*3,"px"),textAlign:"center"}},vt=s1,_t=s1,wt=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerProps;return no("div",Gi({css:Ut("noOptionsMessage",It),className:Ht({"menu-notice":!0,"menu-notice--no-options":!0},zt)},Jt),Mt)};wt.defaultProps={children:"No options"};var Tt=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerProps;return no("div",Gi({css:Ut("loadingMessage",It),className:Ht({"menu-notice":!0,"menu-notice--loading":!0},zt)},Jt),Mt)};Tt.defaultProps={children:"Loading..."};var At=function(It){var Mt=It.rect,zt=It.offset,Ht=It.position;return{left:Mt.left,position:Ht,top:zt,width:Mt.width,zIndex:1}},Ot=function(It){Qf(zt,It);var Mt=Yd(zt);function zt(){var Ht;qd(this,zt);for(var Ut=arguments.length,Jt=new Array(Ut),ln=0;ln<Ut;ln++)Jt[ln]=arguments[ln];return Ht=Mt.call.apply(Mt,[this].concat(Jt)),Ht.state={placement:null},Ht.getPortalPlacement=function(bn){var Rn=bn.placement,Dn=Zd(Ht.props.menuPlacement);Rn!==Dn&&Ht.setState({placement:Rn})},Ht}return ig(zt,[{key:"render",value:function(){var Ht=this.props,Ut=Ht.appendTo,Jt=Ht.children,ln=Ht.className,bn=Ht.controlElement,Rn=Ht.cx,Dn=Ht.innerProps,Pn=Ht.menuPlacement,cr=Ht.menuPosition,Er=Ht.getStyles,Ar=cr==="fixed";if(!Ut&&!Ar||!bn)return null;var Wr=this.state.placement||Zd(Pn),ii=Wy(bn),ri=Ar?0:window.pageYOffset,xi=ii[Wr]+ri,Li={offset:xi,position:cr,rect:ii},wo=no("div",Gi({css:Er("menuPortal",Li),className:Rn({"menu-portal":!0},ln)},Dn),Jt);return no(Jy.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},Ut?zr(wo,Ut):wo)}}]),zt}(hn),Nt=function(It){var Mt=It.isDisabled,zt=It.isRtl;return{label:"container",direction:zt?"rtl":null,pointerEvents:Mt?"none":null,position:"relative"}},jt=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerProps,ln=It.isDisabled,bn=It.isRtl;return no("div",Gi({css:Ut("container",It),className:Ht({"--is-disabled":ln,"--is-rtl":bn},zt)},Jt),Mt)},Gt=function(It){var Mt=It.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(Mt.baseUnit/2,"px ").concat(Mt.baseUnit*2,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},qt=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.innerProps,Jt=It.isMulti,ln=It.getStyles,bn=It.hasValue;return no("div",Gi({css:ln("valueContainer",It),className:Ht({"value-container":!0,"value-container--is-multi":Jt,"value-container--has-value":bn},zt)},Ut),Mt)},en=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Xt=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.innerProps,Jt=It.getStyles;return no("div",Gi({css:Jt("indicatorsContainer",It),className:Ht({indicators:!0},zt)},Ut),Mt)},sn,yn={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},vn=function(It){var Mt=It.size,zt=Eu(It,["size"]);return no("svg",Gi({height:Mt,width:Mt,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:yn},zt))},wn=function(It){return no(vn,Gi({size:20},It),no("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},un=function(It){return no(vn,Gi({size:20},It),no("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Fn=function(It){var Mt=It.isFocused,zt=It.theme,Ht=zt.spacing.baseUnit,Ut=zt.colors;return{label:"indicatorContainer",color:Mt?Ut.neutral60:Ut.neutral20,display:"flex",padding:Ht*2,transition:"color 150ms",":hover":{color:Mt?Ut.neutral80:Ut.neutral40}}},Qn=Fn,_n=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerProps;return no("div",Gi({css:Ut("dropdownIndicator",It),className:Ht({indicator:!0,"dropdown-indicator":!0},zt)},Jt),Mt||no(un,null))},Bn=Fn,Hn=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerProps;return no("div",Gi({css:Ut("clearIndicator",It),className:Ht({indicator:!0,"clear-indicator":!0},zt)},Jt),Mt||no(wn,null))},Gn=function(It){var Mt=It.isDisabled,zt=It.theme,Ht=zt.spacing.baseUnit,Ut=zt.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:Mt?Ut.neutral10:Ut.neutral20,marginBottom:Ht*2,marginTop:Ht*2,width:1}},Vn=function(It){var Mt=It.className,zt=It.cx,Ht=It.getStyles,Ut=It.innerProps;return no("span",Gi({},Ut,{css:Ht("indicatorSeparator",It),className:zt({"indicator-separator":!0},Mt)}))},Ur=al(sn||(sn=tg([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),$r=function(It){var Mt=It.isFocused,zt=It.size,Ht=It.theme,Ut=Ht.colors,Jt=Ht.spacing.baseUnit;return{label:"loadingIndicator",color:Mt?Ut.neutral60:Ut.neutral20,display:"flex",padding:Jt*2,transition:"color 150ms",alignSelf:"center",fontSize:zt,lineHeight:1,marginRight:zt,textAlign:"center",verticalAlign:"middle"}},Yr=function(It){var Mt=It.delay,zt=It.offset;return no("span",{css:ac({animation:"".concat(Ur," 1s ease-in-out ").concat(Mt,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:zt?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Mr=function(It){var Mt=It.className,zt=It.cx,Ht=It.getStyles,Ut=It.innerProps,Jt=It.isRtl;return no("div",Gi({css:Ht("loadingIndicator",It),className:zt({indicator:!0,"loading-indicator":!0},Mt)},Ut),no(Yr,{delay:0,offset:Jt}),no(Yr,{delay:160,offset:!0}),no(Yr,{delay:320,offset:!Jt}))};Mr.defaultProps={size:4};var Qr=function(It){var Mt=It.isDisabled,zt=It.isFocused,Ht=It.theme,Ut=Ht.colors,Jt=Ht.borderRadius,ln=Ht.spacing;return{label:"control",alignItems:"center",backgroundColor:Mt?Ut.neutral5:Ut.neutral0,borderColor:Mt?Ut.neutral10:zt?Ut.primary:Ut.neutral20,borderRadius:Jt,borderStyle:"solid",borderWidth:1,boxShadow:zt?"0 0 0 1px ".concat(Ut.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:ln.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:zt?Ut.primary:Ut.neutral30}}},Hr=function(It){var Mt=It.children,zt=It.cx,Ht=It.getStyles,Ut=It.className,Jt=It.isDisabled,ln=It.isFocused,bn=It.innerRef,Rn=It.innerProps,Dn=It.menuIsOpen;return no("div",Gi({ref:bn,css:Ht("control",It),className:zt({control:!0,"control--is-disabled":Jt,"control--is-focused":ln,"control--menu-is-open":Dn},Ut)},Rn),Mt)},Br=function(It){var Mt=It.theme.spacing;return{paddingBottom:Mt.baseUnit*2,paddingTop:Mt.baseUnit*2}},Nr=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.Heading,ln=It.headingProps,bn=It.innerProps,Rn=It.label,Dn=It.theme,Pn=It.selectProps;return no("div",Gi({css:Ut("group",It),className:Ht({group:!0},zt)},bn),no(Jt,Gi({},ln,{selectProps:Pn,theme:Dn,getStyles:Ut,cx:Ht}),Rn),no("div",null,Mt))},Xr=function(It){var Mt=It.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:Mt.baseUnit*3,paddingRight:Mt.baseUnit*3,textTransform:"uppercase"}},jr=function(It){var Mt=It.getStyles,zt=It.cx,Ht=It.className,Ut=Uy(It);Ut.data;var Jt=Eu(Ut,["data"]);return no("div",Gi({css:Mt("groupHeading",It),className:zt({"group-heading":!0},Ht)},Jt))},ei=function(It){var Mt=It.isDisabled,zt=It.theme,Ht=zt.spacing,Ut=zt.colors;return{margin:Ht.baseUnit/2,paddingBottom:Ht.baseUnit/2,paddingTop:Ht.baseUnit/2,visibility:Mt?"hidden":"visible",color:Ut.neutral80}},xr=function(It){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:It?0:1,outline:0,padding:0,color:"inherit"}},zi=function(It){var Mt=It.className,zt=It.cx,Ht=It.getStyles,Ut=Uy(It),Jt=Ut.innerRef,ln=Ut.isDisabled,bn=Ut.isHidden,Rn=Eu(Ut,["innerRef","isDisabled","isHidden"]);return no("div",{css:Ht("input",It)},no(_m,Gi({className:zt({input:!0},Mt),inputRef:Jt,inputStyle:xr(bn),disabled:ln},Rn)))},gi=function(It){var Mt=It.theme,zt=Mt.spacing,Ht=Mt.borderRadius,Ut=Mt.colors;return{label:"multiValue",backgroundColor:Ut.neutral10,borderRadius:Ht/2,display:"flex",margin:zt.baseUnit/2,minWidth:0}},_o=function(It){var Mt=It.theme,zt=Mt.borderRadius,Ht=Mt.colors,Ut=It.cropWithEllipsis;return{borderRadius:zt/2,color:Ht.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:Ut?"ellipsis":null,whiteSpace:"nowrap"}},Oi=function(It){var Mt=It.theme,zt=Mt.spacing,Ht=Mt.borderRadius,Ut=Mt.colors,Jt=It.isFocused;return{alignItems:"center",borderRadius:Ht/2,backgroundColor:Jt&&Ut.dangerLight,display:"flex",paddingLeft:zt.baseUnit,paddingRight:zt.baseUnit,":hover":{backgroundColor:Ut.dangerLight,color:Ut.danger}}},Ji=function(It){var Mt=It.children,zt=It.innerProps;return no("div",zt,Mt)},Fo=Ji,Ss=Ji;function Ua(It){var Mt=It.children,zt=It.innerProps;return no("div",zt,Mt||no(wn,{size:14}))}var ag=function(It){var Mt=It.children,zt=It.className,Ht=It.components,Ut=It.cx,Jt=It.data,ln=It.getStyles,bn=It.innerProps,Rn=It.isDisabled,Dn=It.removeProps,Pn=It.selectProps,cr=Ht.Container,Er=Ht.Label,Ar=Ht.Remove;return no(ba,null,function(Wr){var ii=Wr.css,ri=Wr.cx;return no(cr,{data:Jt,innerProps:Va({className:ri(ii(ln("multiValue",It)),Ut({"multi-value":!0,"multi-value--is-disabled":Rn},zt))},bn),selectProps:Pn},no(Er,{data:Jt,innerProps:{className:ri(ii(ln("multiValueLabel",It)),Ut({"multi-value__label":!0},zt))},selectProps:Pn},Mt),no(Ar,{data:Jt,innerProps:Va({className:ri(ii(ln("multiValueRemove",It)),Ut({"multi-value__remove":!0},zt))},Dn),selectProps:Pn}))})};ag.defaultProps={cropWithEllipsis:!0};var ad=function(It){var Mt=It.isDisabled,zt=It.isFocused,Ht=It.isSelected,Ut=It.theme,Jt=Ut.spacing,ln=Ut.colors;return{label:"option",backgroundColor:Ht?ln.primary:zt?ln.primary25:"transparent",color:Mt?ln.neutral20:Ht?ln.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(Jt.baseUnit*2,"px ").concat(Jt.baseUnit*3,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!Mt&&(Ht?ln.primary:ln.primary50)}}},lg=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.isDisabled,ln=It.isFocused,bn=It.isSelected,Rn=It.innerRef,Dn=It.innerProps;return no("div",Gi({css:Ut("option",It),className:Ht({option:!0,"option--is-disabled":Jt,"option--is-focused":ln,"option--is-selected":bn},zt),ref:Rn},Dn),Mt)},cg=function(It){var Mt=It.theme,zt=Mt.spacing,Ht=Mt.colors;return{label:"placeholder",color:Ht.neutral50,marginLeft:zt.baseUnit/2,marginRight:zt.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},np=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.innerProps;return no("div",Gi({css:Ut("placeholder",It),className:Ht({placeholder:!0},zt)},Jt),Mt)},Em=function(It){var Mt=It.isDisabled,zt=It.theme,Ht=zt.spacing,Ut=zt.colors;return{label:"singleValue",color:Mt?Ut.neutral40:Ut.neutral80,marginLeft:Ht.baseUnit/2,marginRight:Ht.baseUnit/2,maxWidth:"calc(100% - ".concat(Ht.baseUnit*2,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},rp=function(It){var Mt=It.children,zt=It.className,Ht=It.cx,Ut=It.getStyles,Jt=It.isDisabled,ln=It.innerProps;return no("div",Gi({css:Ut("singleValue",It),className:Ht({"single-value":!0,"single-value--is-disabled":Jt},zt)},ln),Mt)},nv={ClearIndicator:Hn,Control:Hr,DropdownIndicator:_n,DownChevron:un,CrossIcon:wn,Group:Nr,GroupHeading:jr,IndicatorsContainer:Xt,IndicatorSeparator:Vn,Input:zi,LoadingIndicator:Mr,Menu:ev,MenuList:tv,MenuPortal:Ot,LoadingMessage:Tt,NoOptionsMessage:wt,MultiValue:ag,MultiValueContainer:Fo,MultiValueLabel:Ss,MultiValueRemove:Ua,Option:lg,Placeholder:np,SelectContainer:jt,SingleValue:rp,ValueContainer:qt},rv=function(It){return Va(Va({},nv),It.components)};function p_(It,Mt){(Mt==null||Mt>It.length)&&(Mt=It.length);for(var zt=0,Ht=new Array(Mt);zt<Mt;zt++)Ht[zt]=It[zt];return Ht}function Jb(It){if(Array.isArray(It))return p_(It)}function Qb(It){if(typeof Symbol<"u"&&It[Symbol.iterator]!=null||It["@@iterator"]!=null)return Array.from(It)}function n2(It,Mt){if(It){if(typeof It=="string")return p_(It,Mt);var zt=Object.prototype.toString.call(It).slice(8,-1);if(zt==="Object"&&It.constructor&&(zt=It.constructor.name),zt==="Map"||zt==="Set")return Array.from(It);if(zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt))return p_(It,Mt)}}function r2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_(It){return Jb(It)||Qb(It)||n2(It)||r2()}var U_=Number.isNaN||function(It){return typeof It=="number"&&It!==It};function i2(It,Mt){return!!(It===Mt||U_(It)&&U_(Mt))}function o2(It,Mt){if(It.length!==Mt.length)return!1;for(var zt=0;zt<It.length;zt++)if(!i2(It[zt],Mt[zt]))return!1;return!0}function s2(It,Mt){Mt===void 0&&(Mt=o2);var zt,Ht=[],Ut,Jt=!1;function ln(){for(var bn=[],Rn=0;Rn<arguments.length;Rn++)bn[Rn]=arguments[Rn];return Jt&&zt===this&&Mt(bn,Ht)||(Ut=It.apply(this,bn),Jt=!0,zt=this,Ht=bn),Ut}return ln}for(var a2={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},l2=function(It){return no("span",Gi({css:a2},It))},c2={guidance:function(It){var Mt=It.isSearchable,zt=It.isMulti,Ht=It.isDisabled,Ut=It.tabSelectsValue,Jt=It.context;switch(Jt){case"menu":return"Use Up and Down to choose options".concat(Ht?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(Ut?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(It["aria-label"]||"Select"," is focused ").concat(Mt?",type to refine list":"",", press Down to open the menu, ").concat(zt?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(It){var Mt=It.action,zt=It.label,Ht=zt===void 0?"":zt,Ut=It.isDisabled;switch(Mt){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(Ht,", deselected.");case"select-option":return Ut?"option ".concat(Ht," is disabled. Select another option."):"option ".concat(Ht,", selected.");default:return""}},onFocus:function(It){var Mt=It.context,zt=It.focused,Ht=zt===void 0?{}:zt,Ut=It.options,Jt=It.label,ln=Jt===void 0?"":Jt,bn=It.selectValue,Rn=It.isDisabled,Dn=It.isSelected,Pn=function(Ar,Wr){return Ar&&Ar.length?"".concat(Ar.indexOf(Wr)+1," of ").concat(Ar.length):""};if(Mt==="value"&&bn)return"value ".concat(ln," focused, ").concat(Pn(bn,Ht),".");if(Mt==="menu"){var cr=Rn?" disabled":"",Er="".concat(Dn?"selected":"focused").concat(cr);return"option ".concat(ln," ").concat(Er,", ").concat(Pn(Ut,Ht),".")}return""},onFilter:function(It){var Mt=It.inputValue,zt=It.resultsMessage;return"".concat(zt).concat(Mt?" for search term "+Mt:"",".")}},u2=function(It){var Mt=It.ariaSelection,zt=It.focusedOption,Ht=It.focusedValue,Ut=It.focusableOptions,Jt=It.isFocused,ln=It.selectValue,bn=It.selectProps,Rn=bn.ariaLiveMessages,Dn=bn.getOptionLabel,Pn=bn.inputValue,cr=bn.isMulti,Er=bn.isOptionDisabled,Ar=bn.isSearchable,Wr=bn.menuIsOpen,ii=bn.options,ri=bn.screenReaderStatus,xi=bn.tabSelectsValue,Li=bn["aria-label"],wo=bn["aria-live"],po=Wn(function(){return Va(Va({},c2),Rn||{})},[Rn]),so=Wn(function(){var Gs="";if(Mt&&po.onChange){var Ws=Mt.option,Gu=Mt.removedValue,Pc=Mt.value,Jd=function(ql){return Array.isArray(ql)?null:ql},Wu=Gu||Ws||Jd(Pc),kh=Va({isDisabled:Wu&&Er(Wu),label:Wu?Dn(Wu):""},Mt);Gs=po.onChange(kh)}return Gs},[Mt,Er,Dn,po]),So=Wn(function(){var Gs="",Ws=zt||Ht,Gu=!!(zt&&ln&&ln.includes(zt));if(Ws&&po.onFocus){var Pc={focused:Ws,label:Dn(Ws),isDisabled:Er(Ws),isSelected:Gu,options:ii,context:Ws===zt?"menu":"value",selectValue:ln};Gs=po.onFocus(Pc)}return Gs},[zt,Ht,Dn,Er,po,ii,ln]),go=Wn(function(){var Gs="";if(Wr&&ii.length&&po.onFilter){var Ws=ri({count:Ut.length});Gs=po.onFilter({inputValue:Pn,resultsMessage:Ws})}return Gs},[Ut,Pn,Wr,po,ii,ri]),xa=Wn(function(){var Gs="";if(po.guidance){var Ws=Ht?"value":Wr?"menu":"input";Gs=po.guidance({"aria-label":Li,context:Ws,isDisabled:zt&&Er(zt),isMulti:cr,isSearchable:Ar,tabSelectsValue:xi})}return Gs},[Li,zt,Ht,cr,Er,Ar,Wr,po,xi]),ka="".concat(So," ").concat(go," ").concat(xa);return no(l2,{"aria-live":wo,"aria-atomic":"false","aria-relevant":"additions text"},Jt&&no(Ai.Fragment,null,no("span",{id:"aria-selection"},so),no("span",{id:"aria-context"},ka)))},g_=[{base:"A",letters:"A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xC6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xE6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],h2=new RegExp("["+g_.map(function(It){return It.letters}).join("")+"]","g"),G_={},m_=0;m_<g_.length;m_++)for(var y_=g_[m_],v_=0;v_<y_.letters.length;v_++)G_[y_.letters[v_]]=y_.base;var W_=function(It){return It.replace(h2,function(Mt){return G_[Mt]})},d2=s2(W_),q_=function(It){return It.replace(/^\s+|\s+$/g,"")},f2=function(It){return"".concat(It.label," ").concat(It.value)},p2=function(It){return function(Mt,zt){var Ht=Va({ignoreCase:!0,ignoreAccents:!0,stringify:f2,trim:!0,matchFrom:"any"},It),Ut=Ht.ignoreCase,Jt=Ht.ignoreAccents,ln=Ht.stringify,bn=Ht.trim,Rn=Ht.matchFrom,Dn=bn?q_(zt):zt,Pn=bn?q_(ln(Mt)):ln(Mt);return Ut&&(Dn=Dn.toLowerCase(),Pn=Pn.toLowerCase()),Jt&&(Dn=d2(Dn),Pn=W_(Pn)),Rn==="start"?Pn.substr(0,Dn.length)===Dn:Pn.indexOf(Dn)>-1}};function g2(It){It.in,It.out,It.onExited,It.appear,It.enter,It.exit;var Mt=It.innerRef;It.emotion;var zt=Eu(It,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return no("input",Gi({ref:Mt},zt,{css:ac({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"","")}))}var m2=function(It){It.preventDefault(),It.stopPropagation()};function y2(It){var Mt=It.isEnabled,zt=It.onBottomArrive,Ht=It.onBottomLeave,Ut=It.onTopArrive,Jt=It.onTopLeave,ln=Ln(!1),bn=Ln(!1),Rn=Ln(0),Dn=Ln(null),Pn=er(function(ri,xi){if(Dn.current!==null){var Li=Dn.current,wo=Li.scrollTop,po=Li.scrollHeight,so=Li.clientHeight,So=Dn.current,go=xi>0,xa=po-so-wo,ka=!1;xa>xi&&ln.current&&(Ht&&Ht(ri),ln.current=!1),go&&bn.current&&(Jt&&Jt(ri),bn.current=!1),go&&xi>xa?(zt&&!ln.current&&zt(ri),So.scrollTop=po,ka=!0,ln.current=!0):!go&&-xi>wo&&(Ut&&!bn.current&&Ut(ri),So.scrollTop=0,ka=!0,bn.current=!0),ka&&m2(ri)}},[]),cr=er(function(ri){Pn(ri,ri.deltaY)},[Pn]),Er=er(function(ri){Rn.current=ri.changedTouches[0].clientY},[]),Ar=er(function(ri){var xi=Rn.current-ri.changedTouches[0].clientY;Pn(ri,xi)},[Pn]),Wr=er(function(ri){if(ri){var xi=Yy?{passive:!1}:!1;typeof ri.addEventListener=="function"&&ri.addEventListener("wheel",cr,xi),typeof ri.addEventListener=="function"&&ri.addEventListener("touchstart",Er,xi),typeof ri.addEventListener=="function"&&ri.addEventListener("touchmove",Ar,xi)}},[Ar,Er,cr]),ii=er(function(ri){!ri||(typeof ri.removeEventListener=="function"&&ri.removeEventListener("wheel",cr,!1),typeof ri.removeEventListener=="function"&&ri.removeEventListener("touchstart",Er,!1),typeof ri.removeEventListener=="function"&&ri.removeEventListener("touchmove",Ar,!1))},[Ar,Er,cr]);return Mi(function(){if(Mt){var ri=Dn.current;return Wr(ri),function(){ii(ri)}}},[Mt,Wr,ii]),function(ri){Dn.current=ri}}var Y_=["boxSizing","height","overflow","paddingRight","position"],X_={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Z_(It){It.preventDefault()}function K_(It){It.stopPropagation()}function J_(){var It=this.scrollTop,Mt=this.scrollHeight,zt=It+this.offsetHeight;It===0?this.scrollTop=1:zt===Mt&&(this.scrollTop=It-1)}function Q_(){return"ontouchstart"in window||navigator.maxTouchPoints}var eb=!!(typeof window<"u"&&window.document&&window.document.createElement),a1=0,Sm={capture:!1,passive:!1};function v2(It){var Mt=It.isEnabled,zt=It.accountForScrollbars,Ht=zt===void 0?!0:zt,Ut=Ln({}),Jt=Ln(null),ln=er(function(Rn){if(eb){var Dn=document.body,Pn=Dn&&Dn.style;if(Ht&&Y_.forEach(function(Wr){var ii=Pn&&Pn[Wr];Ut.current[Wr]=ii}),Ht&&a1<1){var cr=parseInt(Ut.current.paddingRight,10)||0,Er=document.body?document.body.clientWidth:0,Ar=window.innerWidth-Er+cr||0;Object.keys(X_).forEach(function(Wr){var ii=X_[Wr];Pn&&(Pn[Wr]=ii)}),Pn&&(Pn.paddingRight="".concat(Ar,"px"))}Dn&&Q_()&&(Dn.addEventListener("touchmove",Z_,Sm),Rn&&(Rn.addEventListener("touchstart",J_,Sm),Rn.addEventListener("touchmove",K_,Sm))),a1+=1}},[]),bn=er(function(Rn){if(eb){var Dn=document.body,Pn=Dn&&Dn.style;a1=Math.max(a1-1,0),Ht&&a1<1&&Y_.forEach(function(cr){var Er=Ut.current[cr];Pn&&(Pn[cr]=Er)}),Dn&&Q_()&&(Dn.removeEventListener("touchmove",Z_,Sm),Rn&&(Rn.removeEventListener("touchstart",J_,Sm),Rn.removeEventListener("touchmove",K_,Sm)))}},[]);return Mi(function(){if(Mt){var Rn=Jt.current;return ln(Rn),function(){bn(Rn)}}},[Mt,ln,bn]),function(Rn){Jt.current=Rn}}var _2=function(){return document.activeElement&&document.activeElement.blur()},b2={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function x2(It){var Mt=It.children,zt=It.lockEnabled,Ht=It.captureEnabled,Ut=Ht===void 0?!0:Ht,Jt=It.onBottomArrive,ln=It.onBottomLeave,bn=It.onTopArrive,Rn=It.onTopLeave,Dn=y2({isEnabled:Ut,onBottomArrive:Jt,onBottomLeave:ln,onTopArrive:bn,onTopLeave:Rn}),Pn=v2({isEnabled:zt}),cr=function(Er){Dn(Er),Pn(Er)};return no(Ai.Fragment,null,zt&&no("div",{onClick:_2,css:b2}),Mt(cr))}var w2=function(It){return It.label},E2=function(It){return It.label},S2=function(It){return It.value},C2=function(It){return!!It.isDisabled},T2={clearIndicator:Bn,container:Nt,control:Qr,dropdownIndicator:Qn,group:Br,groupHeading:Xr,indicatorsContainer:en,indicatorSeparator:Gn,input:ei,loadingIndicator:$r,loadingMessage:_t,menu:Ky,menuList:f_,menuPortal:At,multiValue:gi,multiValueLabel:_o,multiValueRemove:Oi,noOptionsMessage:vt,option:ad,placeholder:cg,singleValue:Em,valueContainer:Gt},k2={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},A2=4,tb=4,L2=38,I2=tb*2,P2={baseUnit:tb,controlHeight:L2,menuGutter:I2},__={borderRadius:A2,colors:k2,spacing:P2},O2={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:qy(),captureMenuScroll:!qy(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:p2(),formatGroupLabel:w2,getOptionLabel:E2,getOptionValue:S2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:C2,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!h_(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(It){var Mt=It.count;return"".concat(Mt," result").concat(Mt!==1?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};function nb(It,Mt,zt,Ht){var Ut=ab(It,Mt,zt),Jt=lb(It,Mt,zt),ln=sb(It,Mt),bn=iv(It,Mt);return{type:"option",data:Mt,isDisabled:Ut,isSelected:Jt,label:ln,value:bn,index:Ht}}function rb(It,Mt){return It.options.map(function(zt,Ht){if(zt.options){var Ut=zt.options.map(function(ln,bn){return nb(It,ln,Mt,bn)}).filter(function(ln){return ob(It,ln)});return Ut.length>0?{type:"group",data:zt,options:Ut,index:Ht}:void 0}var Jt=nb(It,zt,Mt,Ht);return ob(It,Jt)?Jt:void 0}).filter(function(zt){return!!zt})}function ib(It){return It.reduce(function(Mt,zt){return zt.type==="group"?Mt.push.apply(Mt,V_(zt.options.map(function(Ht){return Ht.data}))):Mt.push(zt.data),Mt},[])}function $2(It,Mt){return ib(rb(It,Mt))}function ob(It,Mt){var zt=It.inputValue,Ht=zt===void 0?"":zt,Ut=Mt.data,Jt=Mt.isSelected,ln=Mt.label,bn=Mt.value;return(!ub(It)||!Jt)&&cb(It,{label:ln,value:bn,data:Ut},Ht)}function R2(It,Mt){var zt=It.focusedValue,Ht=It.selectValue,Ut=Ht.indexOf(zt);if(Ut>-1){var Jt=Mt.indexOf(zt);if(Jt>-1)return zt;if(Ut<Mt.length)return Mt[Ut]}return null}function M2(It,Mt){var zt=It.focusedOption;return zt&&Mt.indexOf(zt)>-1?zt:Mt[0]}var sb=function(It,Mt){return It.getOptionLabel(Mt)},iv=function(It,Mt){return It.getOptionValue(Mt)};function ab(It,Mt,zt){return typeof It.isOptionDisabled=="function"?It.isOptionDisabled(Mt,zt):!1}function lb(It,Mt,zt){if(zt.indexOf(Mt)>-1)return!0;if(typeof It.isOptionSelected=="function")return It.isOptionSelected(Mt,zt);var Ht=iv(It,Mt);return zt.some(function(Ut){return iv(It,Ut)===Ht})}function cb(It,Mt,zt){return It.filterOption?It.filterOption(Mt,zt):!0}var ub=function(It){var Mt=It.hideSelectedOptions,zt=It.isMulti;return Mt===void 0?zt:Mt},N2=1,hb=function(It){Qf(zt,It);var Mt=Yd(zt);function zt(Ht){var Ut;return qd(this,zt),Ut=Mt.call(this,Ht),Ut.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},Ut.blockOptionHover=!1,Ut.isComposing=!1,Ut.commonProps=void 0,Ut.initialTouchX=0,Ut.initialTouchY=0,Ut.instancePrefix="",Ut.openAfterFocus=!1,Ut.scrollToFocusedOptionOnUpdate=!1,Ut.userIsDragging=void 0,Ut.controlRef=null,Ut.getControlRef=function(Jt){Ut.controlRef=Jt},Ut.focusedOptionRef=null,Ut.getFocusedOptionRef=function(Jt){Ut.focusedOptionRef=Jt},Ut.menuListRef=null,Ut.getMenuListRef=function(Jt){Ut.menuListRef=Jt},Ut.inputRef=null,Ut.getInputRef=function(Jt){Ut.inputRef=Jt},Ut.focus=Ut.focusInput,Ut.blur=Ut.blurInput,Ut.onChange=function(Jt,ln){var bn=Ut.props,Rn=bn.onChange,Dn=bn.name;ln.name=Dn,Ut.ariaOnChange(Jt,ln),Rn(Jt,ln)},Ut.setValue=function(Jt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set-value",bn=arguments.length>2?arguments[2]:void 0,Rn=Ut.props,Dn=Rn.closeMenuOnSelect,Pn=Rn.isMulti;Ut.onInputChange("",{action:"set-value"}),Dn&&(Ut.setState({inputIsHiddenAfterUpdate:!Pn}),Ut.onMenuClose()),Ut.setState({clearFocusValueOnUpdate:!0}),Ut.onChange(Jt,{action:ln,option:bn})},Ut.selectOption=function(Jt){var ln=Ut.props,bn=ln.blurInputOnSelect,Rn=ln.isMulti,Dn=ln.name,Pn=Ut.state.selectValue,cr=Rn&&Ut.isOptionSelected(Jt,Pn),Er=Ut.isOptionDisabled(Jt,Pn);if(cr){var Ar=Ut.getOptionValue(Jt);Ut.setValue(Pn.filter(function(Wr){return Ut.getOptionValue(Wr)!==Ar}),"deselect-option",Jt)}else if(!Er)Rn?Ut.setValue([].concat(V_(Pn),[Jt]),"select-option",Jt):Ut.setValue(Jt,"select-option");else{Ut.ariaOnChange(Jt,{action:"select-option",name:Dn});return}bn&&Ut.blurInput()},Ut.removeValue=function(Jt){var ln=Ut.props.isMulti,bn=Ut.state.selectValue,Rn=Ut.getOptionValue(Jt),Dn=bn.filter(function(cr){return Ut.getOptionValue(cr)!==Rn}),Pn=ln?Dn:Dn[0]||null;Ut.onChange(Pn,{action:"remove-value",removedValue:Jt}),Ut.focusInput()},Ut.clearValue=function(){var Jt=Ut.state.selectValue;Ut.onChange(Ut.props.isMulti?[]:null,{action:"clear",removedValues:Jt})},Ut.popValue=function(){var Jt=Ut.props.isMulti,ln=Ut.state.selectValue,bn=ln[ln.length-1],Rn=ln.slice(0,ln.length-1),Dn=Jt?Rn:Rn[0]||null;Ut.onChange(Dn,{action:"pop-value",removedValue:bn})},Ut.getValue=function(){return Ut.state.selectValue},Ut.cx=function(){for(var Jt=arguments.length,ln=new Array(Jt),bn=0;bn<Jt;bn++)ln[bn]=arguments[bn];return Vy.apply(void 0,[Ut.props.classNamePrefix].concat(ln))},Ut.getOptionLabel=function(Jt){return sb(Ut.props,Jt)},Ut.getOptionValue=function(Jt){return iv(Ut.props,Jt)},Ut.getStyles=function(Jt,ln){var bn=T2[Jt](ln);bn.boxSizing="border-box";var Rn=Ut.props.styles[Jt];return Rn?Rn(bn,ln):bn},Ut.getElementId=function(Jt){return"".concat(Ut.instancePrefix,"-").concat(Jt)},Ut.getComponents=function(){return rv(Ut.props)},Ut.buildCategorizedOptions=function(){return rb(Ut.props,Ut.state.selectValue)},Ut.getCategorizedOptions=function(){return Ut.props.menuIsOpen?Ut.buildCategorizedOptions():[]},Ut.buildFocusableOptions=function(){return ib(Ut.buildCategorizedOptions())},Ut.getFocusableOptions=function(){return Ut.props.menuIsOpen?Ut.buildFocusableOptions():[]},Ut.ariaOnChange=function(Jt,ln){Ut.setState({ariaSelection:Va({value:Jt},ln)})},Ut.onMenuMouseDown=function(Jt){Jt.button===0&&(Jt.stopPropagation(),Jt.preventDefault(),Ut.focusInput())},Ut.onMenuMouseMove=function(Jt){Ut.blockOptionHover=!1},Ut.onControlMouseDown=function(Jt){var ln=Ut.props.openMenuOnClick;Ut.state.isFocused?Ut.props.menuIsOpen?Jt.target.tagName!=="INPUT"&&Jt.target.tagName!=="TEXTAREA"&&Ut.onMenuClose():ln&&Ut.openMenu("first"):(ln&&(Ut.openAfterFocus=!0),Ut.focusInput()),Jt.target.tagName!=="INPUT"&&Jt.target.tagName!=="TEXTAREA"&&Jt.preventDefault()},Ut.onDropdownIndicatorMouseDown=function(Jt){if(!(Jt&&Jt.type==="mousedown"&&Jt.button!==0)&&!Ut.props.isDisabled){var ln=Ut.props,bn=ln.isMulti,Rn=ln.menuIsOpen;Ut.focusInput(),Rn?(Ut.setState({inputIsHiddenAfterUpdate:!bn}),Ut.onMenuClose()):Ut.openMenu("first"),Jt.preventDefault(),Jt.stopPropagation()}},Ut.onClearIndicatorMouseDown=function(Jt){Jt&&Jt.type==="mousedown"&&Jt.button!==0||(Ut.clearValue(),Jt.stopPropagation(),Ut.openAfterFocus=!1,Jt.type==="touchend"?Ut.focusInput():setTimeout(function(){return Ut.focusInput()}))},Ut.onScroll=function(Jt){typeof Ut.props.closeMenuOnScroll=="boolean"?Jt.target instanceof HTMLElement&&n1(Jt.target)&&Ut.props.onMenuClose():typeof Ut.props.closeMenuOnScroll=="function"&&Ut.props.closeMenuOnScroll(Jt)&&Ut.props.onMenuClose()},Ut.onCompositionStart=function(){Ut.isComposing=!0},Ut.onCompositionEnd=function(){Ut.isComposing=!1},Ut.onTouchStart=function(Jt){var ln=Jt.touches,bn=ln&&ln.item(0);!bn||(Ut.initialTouchX=bn.clientX,Ut.initialTouchY=bn.clientY,Ut.userIsDragging=!1)},Ut.onTouchMove=function(Jt){var ln=Jt.touches,bn=ln&&ln.item(0);if(bn){var Rn=Math.abs(bn.clientX-Ut.initialTouchX),Dn=Math.abs(bn.clientY-Ut.initialTouchY),Pn=5;Ut.userIsDragging=Rn>Pn||Dn>Pn}},Ut.onTouchEnd=function(Jt){Ut.userIsDragging||(Ut.controlRef&&!Ut.controlRef.contains(Jt.target)&&Ut.menuListRef&&!Ut.menuListRef.contains(Jt.target)&&Ut.blurInput(),Ut.initialTouchX=0,Ut.initialTouchY=0)},Ut.onControlTouchEnd=function(Jt){Ut.userIsDragging||Ut.onControlMouseDown(Jt)},Ut.onClearIndicatorTouchEnd=function(Jt){Ut.userIsDragging||Ut.onClearIndicatorMouseDown(Jt)},Ut.onDropdownIndicatorTouchEnd=function(Jt){Ut.userIsDragging||Ut.onDropdownIndicatorMouseDown(Jt)},Ut.handleInputChange=function(Jt){var ln=Jt.currentTarget.value;Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange(ln,{action:"input-change"}),Ut.props.menuIsOpen||Ut.onMenuOpen()},Ut.onInputFocus=function(Jt){Ut.props.onFocus&&Ut.props.onFocus(Jt),Ut.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(Ut.openAfterFocus||Ut.props.openMenuOnFocus)&&Ut.openMenu("first"),Ut.openAfterFocus=!1},Ut.onInputBlur=function(Jt){if(Ut.menuListRef&&Ut.menuListRef.contains(document.activeElement)){Ut.inputRef.focus();return}Ut.props.onBlur&&Ut.props.onBlur(Jt),Ut.onInputChange("",{action:"input-blur"}),Ut.onMenuClose(),Ut.setState({focusedValue:null,isFocused:!1})},Ut.onOptionHover=function(Jt){Ut.blockOptionHover||Ut.state.focusedOption===Jt||Ut.setState({focusedOption:Jt})},Ut.shouldHideSelectedOptions=function(){return ub(Ut.props)},Ut.onKeyDown=function(Jt){var ln=Ut.props,bn=ln.isMulti,Rn=ln.backspaceRemovesValue,Dn=ln.escapeClearsValue,Pn=ln.inputValue,cr=ln.isClearable,Er=ln.isDisabled,Ar=ln.menuIsOpen,Wr=ln.onKeyDown,ii=ln.tabSelectsValue,ri=ln.openMenuOnFocus,xi=Ut.state,Li=xi.focusedOption,wo=xi.focusedValue,po=xi.selectValue;if(!Er&&!(typeof Wr=="function"&&(Wr(Jt),Jt.defaultPrevented))){switch(Ut.blockOptionHover=!0,Jt.key){case"ArrowLeft":if(!bn||Pn)return;Ut.focusValue("previous");break;case"ArrowRight":if(!bn||Pn)return;Ut.focusValue("next");break;case"Delete":case"Backspace":if(Pn)return;if(wo)Ut.removeValue(wo);else{if(!Rn)return;bn?Ut.popValue():cr&&Ut.clearValue()}break;case"Tab":if(Ut.isComposing||Jt.shiftKey||!Ar||!ii||!Li||ri&&Ut.isOptionSelected(Li,po))return;Ut.selectOption(Li);break;case"Enter":if(Jt.keyCode===229)break;if(Ar){if(!Li||Ut.isComposing)return;Ut.selectOption(Li);break}return;case"Escape":Ar?(Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange("",{action:"menu-close"}),Ut.onMenuClose()):cr&&Dn&&Ut.clearValue();break;case" ":if(Pn)return;if(!Ar){Ut.openMenu("first");break}if(!Li)return;Ut.selectOption(Li);break;case"ArrowUp":Ar?Ut.focusOption("up"):Ut.openMenu("last");break;case"ArrowDown":Ar?Ut.focusOption("down"):Ut.openMenu("first");break;case"PageUp":if(!Ar)return;Ut.focusOption("pageup");break;case"PageDown":if(!Ar)return;Ut.focusOption("pagedown");break;case"Home":if(!Ar)return;Ut.focusOption("first");break;case"End":if(!Ar)return;Ut.focusOption("last");break;default:return}Jt.preventDefault()}},Ut.instancePrefix="react-select-"+(Ut.props.instanceId||++N2),Ut.state.selectValue=e1(Ht.value),Ut}return ig(zt,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(Ht){var Ut=this.props,Jt=Ut.isDisabled,ln=Ut.menuIsOpen,bn=this.state.isFocused;(bn&&!Jt&&Ht.isDisabled||bn&&ln&&!Ht.menuIsOpen)&&this.focusInput(),bn&&Jt&&!Ht.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(u_(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(Ht,Ut){this.props.onInputChange(Ht,Ut)}},{key:"focusInput",value:function(){!this.inputRef||this.inputRef.focus()}},{key:"blurInput",value:function(){!this.inputRef||this.inputRef.blur()}},{key:"openMenu",value:function(Ht){var Ut=this,Jt=this.state,ln=Jt.selectValue,bn=Jt.isFocused,Rn=this.buildFocusableOptions(),Dn=Ht==="first"?0:Rn.length-1;if(!this.props.isMulti){var Pn=Rn.indexOf(ln[0]);Pn>-1&&(Dn=Pn)}this.scrollToFocusedOptionOnUpdate=!(bn&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:Rn[Dn]},function(){return Ut.onMenuOpen()})}},{key:"focusValue",value:function(Ht){var Ut=this.state,Jt=Ut.selectValue,ln=Ut.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var bn=Jt.indexOf(ln);ln||(bn=-1);var Rn=Jt.length-1,Dn=-1;if(Jt.length){switch(Ht){case"previous":bn===0?Dn=0:bn===-1?Dn=Rn:Dn=bn-1;break;case"next":bn>-1&&bn<Rn&&(Dn=bn+1);break}this.setState({inputIsHidden:Dn!==-1,focusedValue:Jt[Dn]})}}}},{key:"focusOption",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",Ut=this.props.pageSize,Jt=this.state.focusedOption,ln=this.getFocusableOptions();if(ln.length){var bn=0,Rn=ln.indexOf(Jt);Jt||(Rn=-1),Ht==="up"?bn=Rn>0?Rn-1:ln.length-1:Ht==="down"?bn=(Rn+1)%ln.length:Ht==="pageup"?(bn=Rn-Ut,bn<0&&(bn=0)):Ht==="pagedown"?(bn=Rn+Ut,bn>ln.length-1&&(bn=ln.length-1)):Ht==="last"&&(bn=ln.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:ln[bn],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(__):Va(Va({},__),this.props.theme):__}},{key:"getCommonProps",value:function(){var Ht=this.clearValue,Ut=this.cx,Jt=this.getStyles,ln=this.getValue,bn=this.selectOption,Rn=this.setValue,Dn=this.props,Pn=Dn.isMulti,cr=Dn.isRtl,Er=Dn.options,Ar=this.hasValue();return{clearValue:Ht,cx:Ut,getStyles:Jt,getValue:ln,hasValue:Ar,isMulti:Pn,isRtl:cr,options:Er,selectOption:bn,selectProps:Dn,setValue:Rn,theme:this.getTheme()}}},{key:"hasValue",value:function(){var Ht=this.state.selectValue;return Ht.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var Ht=this.props,Ut=Ht.isClearable,Jt=Ht.isMulti;return Ut===void 0?Jt:Ut}},{key:"isOptionDisabled",value:function(Ht,Ut){return ab(this.props,Ht,Ut)}},{key:"isOptionSelected",value:function(Ht,Ut){return lb(this.props,Ht,Ut)}},{key:"filterOption",value:function(Ht,Ut){return cb(this.props,Ht,Ut)}},{key:"formatOptionLabel",value:function(Ht,Ut){if(typeof this.props.formatOptionLabel=="function"){var Jt=this.props.inputValue,ln=this.state.selectValue;return this.props.formatOptionLabel(Ht,{context:Ut,inputValue:Jt,selectValue:ln})}else return this.getOptionLabel(Ht)}},{key:"formatGroupLabel",value:function(Ht){return this.props.formatGroupLabel(Ht)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var Ht=this.props,Ut=Ht.isDisabled,Jt=Ht.isSearchable,ln=Ht.inputId,bn=Ht.inputValue,Rn=Ht.tabIndex,Dn=Ht.form,Pn=this.getComponents(),cr=Pn.Input,Er=this.state.inputIsHidden,Ar=this.commonProps,Wr=ln||this.getElementId("input"),ii={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};return Jt?Ai.createElement(cr,Gi({},Ar,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Wr,innerRef:this.getInputRef,isDisabled:Ut,isHidden:Er,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:Rn,form:Dn,type:"text",value:bn},ii)):Ai.createElement(g2,Gi({id:Wr,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:sd,onFocus:this.onInputFocus,readOnly:!0,disabled:Ut,tabIndex:Rn,form:Dn,value:""},ii))}},{key:"renderPlaceholderOrValue",value:function(){var Ht=this,Ut=this.getComponents(),Jt=Ut.MultiValue,ln=Ut.MultiValueContainer,bn=Ut.MultiValueLabel,Rn=Ut.MultiValueRemove,Dn=Ut.SingleValue,Pn=Ut.Placeholder,cr=this.commonProps,Er=this.props,Ar=Er.controlShouldRenderValue,Wr=Er.isDisabled,ii=Er.isMulti,ri=Er.inputValue,xi=Er.placeholder,Li=this.state,wo=Li.selectValue,po=Li.focusedValue,so=Li.isFocused;if(!this.hasValue()||!Ar)return ri?null:Ai.createElement(Pn,Gi({},cr,{key:"placeholder",isDisabled:Wr,isFocused:so}),xi);if(ii){var So=wo.map(function(xa,ka){var Gs=xa===po;return Ai.createElement(Jt,Gi({},cr,{components:{Container:ln,Label:bn,Remove:Rn},isFocused:Gs,isDisabled:Wr,key:"".concat(Ht.getOptionValue(xa)).concat(ka),index:ka,removeProps:{onClick:function(){return Ht.removeValue(xa)},onTouchEnd:function(){return Ht.removeValue(xa)},onMouseDown:function(Ws){Ws.preventDefault(),Ws.stopPropagation()}},data:xa}),Ht.formatOptionLabel(xa,"value"))});return So}if(ri)return null;var go=wo[0];return Ai.createElement(Dn,Gi({},cr,{data:go,isDisabled:Wr}),this.formatOptionLabel(go,"value"))}},{key:"renderClearIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.ClearIndicator,Jt=this.commonProps,ln=this.props,bn=ln.isDisabled,Rn=ln.isLoading,Dn=this.state.isFocused;if(!this.isClearable()||!Ut||bn||!this.hasValue()||Rn)return null;var Pn={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Ai.createElement(Ut,Gi({},Jt,{innerProps:Pn,isFocused:Dn}))}},{key:"renderLoadingIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.LoadingIndicator,Jt=this.commonProps,ln=this.props,bn=ln.isDisabled,Rn=ln.isLoading,Dn=this.state.isFocused;if(!Ut||!Rn)return null;var Pn={"aria-hidden":"true"};return Ai.createElement(Ut,Gi({},Jt,{innerProps:Pn,isDisabled:bn,isFocused:Dn}))}},{key:"renderIndicatorSeparator",value:function(){var Ht=this.getComponents(),Ut=Ht.DropdownIndicator,Jt=Ht.IndicatorSeparator;if(!Ut||!Jt)return null;var ln=this.commonProps,bn=this.props.isDisabled,Rn=this.state.isFocused;return Ai.createElement(Jt,Gi({},ln,{isDisabled:bn,isFocused:Rn}))}},{key:"renderDropdownIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.DropdownIndicator;if(!Ut)return null;var Jt=this.commonProps,ln=this.props.isDisabled,bn=this.state.isFocused,Rn={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Ai.createElement(Ut,Gi({},Jt,{innerProps:Rn,isDisabled:ln,isFocused:bn}))}},{key:"renderMenu",value:function(){var Ht=this,Ut=this.getComponents(),Jt=Ut.Group,ln=Ut.GroupHeading,bn=Ut.Menu,Rn=Ut.MenuList,Dn=Ut.MenuPortal,Pn=Ut.LoadingMessage,cr=Ut.NoOptionsMessage,Er=Ut.Option,Ar=this.commonProps,Wr=this.state.focusedOption,ii=this.props,ri=ii.captureMenuScroll,xi=ii.inputValue,Li=ii.isLoading,wo=ii.loadingMessage,po=ii.minMenuHeight,so=ii.maxMenuHeight,So=ii.menuIsOpen,go=ii.menuPlacement,xa=ii.menuPosition,ka=ii.menuPortalTarget,Gs=ii.menuShouldBlockScroll,Ws=ii.menuShouldScrollIntoView,Gu=ii.noOptionsMessage,Pc=ii.onMenuScrollToTop,Jd=ii.onMenuScrollToBottom;if(!So)return null;var Wu=function(la,li){var Ti=la.type,Pi=la.data,ki=la.isDisabled,Bi=la.isSelected,ko=la.label,wa=la.value,xl=Wr===Pi,qs=ki?void 0:function(){return Ht.onOptionHover(Pi)},gg=ki?void 0:function(){return Ht.selectOption(Pi)},ld="".concat(Ht.getElementId("option"),"-").concat(li),op={id:ld,onClick:gg,onMouseMove:qs,onMouseOver:qs,tabIndex:-1};return Ai.createElement(Er,Gi({},Ar,{innerProps:op,data:Pi,isDisabled:ki,isSelected:Bi,key:ld,label:ko,type:Ti,value:wa,isFocused:xl,innerRef:xl?Ht.getFocusedOptionRef:void 0}),Ht.formatOptionLabel(la.data,"menu"))},kh;if(this.hasOptions())kh=this.getCategorizedOptions().map(function(la){if(la.type==="group"){var li=la.data,Ti=la.options,Pi=la.index,ki="".concat(Ht.getElementId("group"),"-").concat(Pi),Bi="".concat(ki,"-heading");return Ai.createElement(Jt,Gi({},Ar,{key:ki,data:li,options:Ti,Heading:ln,headingProps:{id:Bi,data:la.data},label:Ht.formatGroupLabel(la.data)}),la.options.map(function(ko){return Wu(ko,"".concat(Pi,"-").concat(ko.index))}))}else if(la.type==="option")return Wu(la,"".concat(la.index))});else if(Li){var ql=wo({inputValue:xi});if(ql===null)return null;kh=Ai.createElement(Pn,Ar,ql)}else{var fv=Gu({inputValue:xi});if(fv===null)return null;kh=Ai.createElement(cr,Ar,fv)}var pg={minMenuHeight:po,maxMenuHeight:so,menuPlacement:go,menuPosition:xa,menuShouldScrollIntoView:Ws},qu=Ai.createElement(Qy,Gi({},Ar,pg),function(la){var li=la.ref,Ti=la.placerProps,Pi=Ti.placement,ki=Ti.maxHeight;return Ai.createElement(bn,Gi({},Ar,pg,{innerRef:li,innerProps:{onMouseDown:Ht.onMenuMouseDown,onMouseMove:Ht.onMenuMouseMove},isLoading:Li,placement:Pi}),Ai.createElement(x2,{captureEnabled:ri,onTopArrive:Pc,onBottomArrive:Jd,lockEnabled:Gs},function(Bi){return Ai.createElement(Rn,Gi({},Ar,{innerRef:function(ko){Ht.getMenuListRef(ko),Bi(ko)},isLoading:Li,maxHeight:ki,focusedOption:Wr}),kh)}))});return ka||xa==="fixed"?Ai.createElement(Dn,Gi({},Ar,{appendTo:ka,controlElement:this.controlRef,menuPlacement:go,menuPosition:xa}),qu):qu}},{key:"renderFormField",value:function(){var Ht=this,Ut=this.props,Jt=Ut.delimiter,ln=Ut.isDisabled,bn=Ut.isMulti,Rn=Ut.name,Dn=this.state.selectValue;if(!(!Rn||ln))if(bn)if(Jt){var Pn=Dn.map(function(Ar){return Ht.getOptionValue(Ar)}).join(Jt);return Ai.createElement("input",{name:Rn,type:"hidden",value:Pn})}else{var cr=Dn.length>0?Dn.map(function(Ar,Wr){return Ai.createElement("input",{key:"i-".concat(Wr),name:Rn,type:"hidden",value:Ht.getOptionValue(Ar)})}):Ai.createElement("input",{name:Rn,type:"hidden"});return Ai.createElement("div",null,cr)}else{var Er=Dn[0]?this.getOptionValue(Dn[0]):"";return Ai.createElement("input",{name:Rn,type:"hidden",value:Er})}}},{key:"renderLiveRegion",value:function(){var Ht=this.commonProps,Ut=this.state,Jt=Ut.ariaSelection,ln=Ut.focusedOption,bn=Ut.focusedValue,Rn=Ut.isFocused,Dn=Ut.selectValue,Pn=this.getFocusableOptions();return Ai.createElement(u2,Gi({},Ht,{ariaSelection:Jt,focusedOption:ln,focusedValue:bn,isFocused:Rn,selectValue:Dn,focusableOptions:Pn}))}},{key:"render",value:function(){var Ht=this.getComponents(),Ut=Ht.Control,Jt=Ht.IndicatorsContainer,ln=Ht.SelectContainer,bn=Ht.ValueContainer,Rn=this.props,Dn=Rn.className,Pn=Rn.id,cr=Rn.isDisabled,Er=Rn.menuIsOpen,Ar=this.state.isFocused,Wr=this.commonProps=this.getCommonProps();return Ai.createElement(ln,Gi({},Wr,{className:Dn,innerProps:{id:Pn,onKeyDown:this.onKeyDown},isDisabled:cr,isFocused:Ar}),this.renderLiveRegion(),Ai.createElement(Ut,Gi({},Wr,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:cr,isFocused:Ar,menuIsOpen:Er}),Ai.createElement(bn,Gi({},Wr,{isDisabled:cr}),this.renderPlaceholderOrValue(),this.renderInput()),Ai.createElement(Jt,Gi({},Wr,{isDisabled:cr}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(Ht,Ut){var Jt=Ut.prevProps,ln=Ut.clearFocusValueOnUpdate,bn=Ut.inputIsHiddenAfterUpdate,Rn=Ht.options,Dn=Ht.value,Pn=Ht.menuIsOpen,cr=Ht.inputValue,Er={};if(Jt&&(Dn!==Jt.value||Rn!==Jt.options||Pn!==Jt.menuIsOpen||cr!==Jt.inputValue)){var Ar=e1(Dn),Wr=Pn?$2(Ht,Ar):[],ii=ln?R2(Ut,Ar):null,ri=M2(Ut,Wr);Er={selectValue:Ar,focusedOption:ri,focusedValue:ii,clearFocusValueOnUpdate:!1}}var xi=bn!=null&&Ht!==Jt?{inputIsHidden:bn,inputIsHiddenAfterUpdate:void 0}:{};return Va(Va(Va({},Er),xi),{},{prevProps:Ht})}}]),zt}(hn);hb.defaultProps=O2;var D2={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},B2=function(It){var Mt,zt;return zt=Mt=function(Ht){Qf(Jt,Ht);var Ut=Yd(Jt);function Jt(){var ln;qd(this,Jt);for(var bn=arguments.length,Rn=new Array(bn),Dn=0;Dn<bn;Dn++)Rn[Dn]=arguments[Dn];return ln=Ut.call.apply(Ut,[this].concat(Rn)),ln.select=void 0,ln.state={inputValue:ln.props.inputValue!==void 0?ln.props.inputValue:ln.props.defaultInputValue,menuIsOpen:ln.props.menuIsOpen!==void 0?ln.props.menuIsOpen:ln.props.defaultMenuIsOpen,value:ln.props.value!==void 0?ln.props.value:ln.props.defaultValue},ln.onChange=function(Pn,cr){ln.callProp("onChange",Pn,cr),ln.setState({value:Pn})},ln.onInputChange=function(Pn,cr){var Er=ln.callProp("onInputChange",Pn,cr);ln.setState({inputValue:Er!==void 0?Er:Pn})},ln.onMenuOpen=function(){ln.callProp("onMenuOpen"),ln.setState({menuIsOpen:!0})},ln.onMenuClose=function(){ln.callProp("onMenuClose"),ln.setState({menuIsOpen:!1})},ln}return ig(Jt,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(ln){return this.props[ln]!==void 0?this.props[ln]:this.state[ln]}},{key:"callProp",value:function(ln){if(typeof this.props[ln]=="function"){for(var bn,Rn=arguments.length,Dn=new Array(Rn>1?Rn-1:0),Pn=1;Pn<Rn;Pn++)Dn[Pn-1]=arguments[Pn];return(bn=this.props)[ln].apply(bn,Dn)}}},{key:"render",value:function(){var ln=this,bn=this.props;bn.defaultInputValue,bn.defaultMenuIsOpen,bn.defaultValue;var Rn=Eu(bn,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return Ai.createElement(It,Gi({},Rn,{ref:function(Dn){ln.select=Dn},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),Jt}(hn),Mt.defaultProps=D2,zt},F2=B2(hb),z2=F2;const b_=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"},{value:"supplementing",label:"Transcription"}];var fb=It=>{const Mt=It.content?b_.find(zt=>zt.value===It.content):null;return cn("div",{className:"r6o-purposedropdown"},cn(z2,{value:Mt,onChange:It.onChange,options:b_,isDisabled:!It.editable}))};const H2=It=>cn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:It.width},cn("metadata",null,"IcoFont Icons"),cn("title",null,"simple-down"),cn("glyph",{glyphName:"simple-down",unicode:"\uEAB2",horizAdvX:"1000"}),cn("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"})),j2=It=>cn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:It.width},cn("metadata",null,"IcoFont Icons"),cn("title",null,"close"),cn("glyph",{glyphName:"close",unicode:"\uEEE4",horizAdvX:"1000"}),cn("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"})),V2=It=>cn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:It.width},cn("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}));var U2=It=>{const[Mt,zt]=Ni(!1),[Ht,Ut]=Ni(!1),Jt=cr=>{zt(!0),Ut(!1)},ln=cr=>{It.onDelete(It.body),Ut(!1)},bn=cr=>It.onUpdate(It.body,Rt(Pt({},It.body),{value:cr.target.value})),Rn=cr=>It.onUpdate(It.body,Rt(Pt({},It.body),{purpose:cr.value})),Dn=It.body.modified||It.body.created,Pn=It.body.creator&&cn("div",{className:"r6o-lastmodified"},cn("span",{className:"r6o-lastmodified-by"},It.body.creator.name||It.body.creator.id),It.body.created&&cn("span",{className:"r6o-lastmodified-at"},cn(Fh,{datetime:It.env.toClientTime(Dn),locale:ga.locale()})));return It.readOnly?cn("div",{className:"r6o-widget comment"},cn("div",{className:"r6o-readonly-comment"},It.body.value),Pn):cn("div",{className:Mt?"r6o-widget comment editable":"r6o-widget comment"},cn(Hf,{editable:Mt,content:It.body.value,onChange:bn,onSaveAndClose:It.onSaveAndClose}),!Mt&&Pn,It.purposeSelector&&cn(fb,{editable:Mt,content:It.body.purpose,onChange:Rn,onSaveAndClose:It.onSaveAndClose}),cn("div",{className:Ht?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:()=>Ut(!Ht)},cn(H2,{width:12})),Ht&&cn(Xp,{onEdit:Jt,onDelete:ln,onClickOutside:()=>Ut(!1)}))};const G2=b_.map(It=>It.value),pb=(It,Mt)=>{const zt=Mt?G2.indexOf(It.purpose)>-1:It.purpose=="commenting"||It.purpose=="replying";return It.type==="TextualBody"&&(!It.hasOwnProperty("purpose")||zt)},gb=(It,Mt)=>{var zt,Ht;if(Mt.editable===!0)return!1;if(Mt.editable===!1)return!0;if(Mt.editable==="MINE_ONLY"){const Ut=(zt=It.creator)==null?void 0:zt.id;return((Ht=Mt.env.user)==null?void 0:Ht.id)!==Ut}return Mt.readOnly},W2=(It,Mt)=>It||{type:"TextualBody",value:"",purpose:Mt?"replying":"commenting",draft:!0},mb=It=>{const Mt=It.annotation?It.annotation.bodies.filter(ln=>pb(ln,It.purposeSelector)):[],zt=W2(Mt.find(ln=>ln.draft==!0),Mt.length>1),Ht=Mt.filter(ln=>ln!=zt),Ut=ln=>{const bn=zt.value,Rn=ln.target.value;bn.length===0&&Rn.length>0?It.onAppendBody(Rt(Pt({},zt),{value:Rn})):bn.length>0&&Rn.length===0?It.onRemoveBody(zt):It.onUpdateBody(zt,Rt(Pt({},zt),{value:Rn}))},Jt=ln=>It.onUpdateBody(zt,Rt(Pt({},zt),{purpose:ln.value}));return cn(jn,null,Ht.map((ln,bn)=>cn(U2,{key:bn,env:It.env,purposeSelector:It.purposeSelector,readOnly:gb(ln,It),body:ln,onUpdate:It.onUpdateBody,onDelete:It.onRemoveBody,onSaveAndClose:It.onSaveAndClose})),!It.readOnly&&It.annotation&&cn("div",{className:"r6o-widget comment editable"},cn(Hf,{focus:It.focus,content:zt.value,editable:!0,placeholder:Ht.length>0?ga.t("Add a reply..."):ga.t("Add a comment..."),onChange:Ut,onSaveAndClose:()=>It.onSaveAndClose()}),It.purposeSelector&&zt.value.length>0&&cn(fb,{editable:!0,content:zt.purpose,onChange:Jt,onSaveAndClose:()=>It.onSaveAndClose()})))};mb.disableDelete=(It,Mt)=>It.bodies.filter(zt=>pb(zt,Mt.purposeSelector)).some(zt=>gb(zt,Mt));var yb=mb;function vb(It,Mt){It.prototype=Object.create(Mt.prototype),It.prototype.constructor=It,og(It,Mt)}function q2(It,Mt){return It.classList?!!Mt&&It.classList.contains(Mt):(" "+(It.className.baseVal||It.className)+" ").indexOf(" "+Mt+" ")!==-1}function Y2(It,Mt){It.classList?It.classList.add(Mt):q2(It,Mt)||(typeof It.className=="string"?It.className=It.className+" "+Mt:It.setAttribute("class",(It.className&&It.className.baseVal||"")+" "+Mt))}function _b(It,Mt){return It.replace(new RegExp("(^|\\s)"+Mt+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function X2(It,Mt){It.classList?It.classList.remove(Mt):typeof It.className=="string"?It.className=_b(It.className,Mt):It.setAttribute("class",_b(It.className&&It.className.baseVal||"",Mt))}var bb={disabled:!1},xb=Ai.createContext(null),l1="unmounted",ug="exited",hg="entering",Cm="entered",x_="exiting",Kd=function(It){vb(Mt,It);function Mt(Ht,Ut){var Jt;Jt=It.call(this,Ht,Ut)||this;var ln=Ut,bn=ln&&!ln.isMounting?Ht.enter:Ht.appear,Rn;return Jt.appearStatus=null,Ht.in?bn?(Rn=ug,Jt.appearStatus=hg):Rn=Cm:Ht.unmountOnExit||Ht.mountOnEnter?Rn=l1:Rn=ug,Jt.state={status:Rn},Jt.nextCallback=null,Jt}Mt.getDerivedStateFromProps=function(Ht,Ut){var Jt=Ht.in;return Jt&&Ut.status===l1?{status:ug}:null};var zt=Mt.prototype;return zt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},zt.componentDidUpdate=function(Ht){var Ut=null;if(Ht!==this.props){var Jt=this.state.status;this.props.in?Jt!==hg&&Jt!==Cm&&(Ut=hg):(Jt===hg||Jt===Cm)&&(Ut=x_)}this.updateStatus(!1,Ut)},zt.componentWillUnmount=function(){this.cancelNextCallback()},zt.getTimeouts=function(){var Ht=this.props.timeout,Ut,Jt,ln;return Ut=Jt=ln=Ht,Ht!=null&&typeof Ht!="number"&&(Ut=Ht.exit,Jt=Ht.enter,ln=Ht.appear!==void 0?Ht.appear:Jt),{exit:Ut,enter:Jt,appear:ln}},zt.updateStatus=function(Ht,Ut){Ht===void 0&&(Ht=!1),Ut!==null?(this.cancelNextCallback(),Ut===hg?this.performEnter(Ht):this.performExit()):this.props.unmountOnExit&&this.state.status===ug&&this.setState({status:l1})},zt.performEnter=function(Ht){var Ut=this,Jt=this.props.enter,ln=this.context?this.context.isMounting:Ht,bn=this.props.nodeRef?[ln]:[Ai.findDOMNode(this),ln],Rn=bn[0],Dn=bn[1],Pn=this.getTimeouts(),cr=ln?Pn.appear:Pn.enter;if(!Ht&&!Jt||bb.disabled){this.safeSetState({status:Cm},function(){Ut.props.onEntered(Rn)});return}this.props.onEnter(Rn,Dn),this.safeSetState({status:hg},function(){Ut.props.onEntering(Rn,Dn),Ut.onTransitionEnd(cr,function(){Ut.safeSetState({status:Cm},function(){Ut.props.onEntered(Rn,Dn)})})})},zt.performExit=function(){var Ht=this,Ut=this.props.exit,Jt=this.getTimeouts(),ln=this.props.nodeRef?void 0:Ai.findDOMNode(this);if(!Ut||bb.disabled){this.safeSetState({status:ug},function(){Ht.props.onExited(ln)});return}this.props.onExit(ln),this.safeSetState({status:x_},function(){Ht.props.onExiting(ln),Ht.onTransitionEnd(Jt.exit,function(){Ht.safeSetState({status:ug},function(){Ht.props.onExited(ln)})})})},zt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},zt.safeSetState=function(Ht,Ut){Ut=this.setNextCallback(Ut),this.setState(Ht,Ut)},zt.setNextCallback=function(Ht){var Ut=this,Jt=!0;return this.nextCallback=function(ln){Jt&&(Jt=!1,Ut.nextCallback=null,Ht(ln))},this.nextCallback.cancel=function(){Jt=!1},this.nextCallback},zt.onTransitionEnd=function(Ht,Ut){this.setNextCallback(Ut);var Jt=this.props.nodeRef?this.props.nodeRef.current:Ai.findDOMNode(this),ln=Ht==null&&!this.props.addEndListener;if(!Jt||ln){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var bn=this.props.nodeRef?[this.nextCallback]:[Jt,this.nextCallback],Rn=bn[0],Dn=bn[1];this.props.addEndListener(Rn,Dn)}Ht!=null&&setTimeout(this.nextCallback,Ht)},zt.render=function(){var Ht=this.state.status;if(Ht===l1)return null;var Ut=this.props,Jt=Ut.children;Ut.in,Ut.mountOnEnter,Ut.unmountOnExit,Ut.appear,Ut.enter,Ut.exit,Ut.timeout,Ut.addEndListener,Ut.onEnter,Ut.onEntering,Ut.onEntered,Ut.onExit,Ut.onExiting,Ut.onExited,Ut.nodeRef;var ln=fm(Ut,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ai.createElement(xb.Provider,{value:null},typeof Jt=="function"?Jt(Ht,ln):Ai.cloneElement(Ai.Children.only(Jt),ln))},Mt}(Ai.Component);Kd.contextType=xb,Kd.propTypes={};function Tm(){}Kd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Tm,onEntering:Tm,onEntered:Tm,onExit:Tm,onExiting:Tm,onExited:Tm},Kd.UNMOUNTED=l1,Kd.EXITED=ug,Kd.ENTERING=hg,Kd.ENTERED=Cm,Kd.EXITING=x_;var Z2=Kd,K2=function(It,Mt){return It&&Mt&&Mt.split(" ").forEach(function(zt){return Y2(It,zt)})},w_=function(It,Mt){return It&&Mt&&Mt.split(" ").forEach(function(zt){return X2(It,zt)})},E_=function(It){vb(Mt,It);function Mt(){for(var Ht,Ut=arguments.length,Jt=new Array(Ut),ln=0;ln<Ut;ln++)Jt[ln]=arguments[ln];return Ht=It.call.apply(It,[this].concat(Jt))||this,Ht.appliedClasses={appear:{},enter:{},exit:{}},Ht.onEnter=function(bn,Rn){var Dn=Ht.resolveArguments(bn,Rn),Pn=Dn[0],cr=Dn[1];Ht.removeClasses(Pn,"exit"),Ht.addClass(Pn,cr?"appear":"enter","base"),Ht.props.onEnter&&Ht.props.onEnter(bn,Rn)},Ht.onEntering=function(bn,Rn){var Dn=Ht.resolveArguments(bn,Rn),Pn=Dn[0],cr=Dn[1],Er=cr?"appear":"enter";Ht.addClass(Pn,Er,"active"),Ht.props.onEntering&&Ht.props.onEntering(bn,Rn)},Ht.onEntered=function(bn,Rn){var Dn=Ht.resolveArguments(bn,Rn),Pn=Dn[0],cr=Dn[1],Er=cr?"appear":"enter";Ht.removeClasses(Pn,Er),Ht.addClass(Pn,Er,"done"),Ht.props.onEntered&&Ht.props.onEntered(bn,Rn)},Ht.onExit=function(bn){var Rn=Ht.resolveArguments(bn),Dn=Rn[0];Ht.removeClasses(Dn,"appear"),Ht.removeClasses(Dn,"enter"),Ht.addClass(Dn,"exit","base"),Ht.props.onExit&&Ht.props.onExit(bn)},Ht.onExiting=function(bn){var Rn=Ht.resolveArguments(bn),Dn=Rn[0];Ht.addClass(Dn,"exit","active"),Ht.props.onExiting&&Ht.props.onExiting(bn)},Ht.onExited=function(bn){var Rn=Ht.resolveArguments(bn),Dn=Rn[0];Ht.removeClasses(Dn,"exit"),Ht.addClass(Dn,"exit","done"),Ht.props.onExited&&Ht.props.onExited(bn)},Ht.resolveArguments=function(bn,Rn){return Ht.props.nodeRef?[Ht.props.nodeRef.current,bn]:[bn,Rn]},Ht.getClassNames=function(bn){var Rn=Ht.props.classNames,Dn=typeof Rn=="string",Pn=Dn&&Rn?Rn+"-":"",cr=Dn?""+Pn+bn:Rn[bn],Er=Dn?cr+"-active":Rn[bn+"Active"],Ar=Dn?cr+"-done":Rn[bn+"Done"];return{baseClassName:cr,activeClassName:Er,doneClassName:Ar}},Ht}var zt=Mt.prototype;return zt.addClass=function(Ht,Ut,Jt){var ln=this.getClassNames(Ut)[Jt+"ClassName"],bn=this.getClassNames("enter"),Rn=bn.doneClassName;Ut==="appear"&&Jt==="done"&&Rn&&(ln+=" "+Rn),Jt==="active"&&Ht&&Ht.scrollTop,ln&&(this.appliedClasses[Ut][Jt]=ln,K2(Ht,ln))},zt.removeClasses=function(Ht,Ut){var Jt=this.appliedClasses[Ut],ln=Jt.base,bn=Jt.active,Rn=Jt.done;this.appliedClasses[Ut]={},ln&&w_(Ht,ln),bn&&w_(Ht,bn),Rn&&w_(Ht,Rn)},zt.render=function(){var Ht=this.props;Ht.classNames;var Ut=fm(Ht,["classNames"]);return Ai.createElement(Z2,Gi({},Ut,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},Mt}(Ai.Component);E_.defaultProps={classNames:""},E_.propTypes={};var J2=E_;const Q2=(It,Mt)=>Mt.filter(zt=>(zt.label?zt.label:zt).toLowerCase().startsWith(It.toLowerCase())),ex=(It,Mt)=>Mt(It);var tx=It=>{const Mt=Ln(),[zt,Ht]=Ni(It.initialValue||""),[Ut,Jt]=Ni([]),[ln,bn]=Ni(null);Mi(()=>{It.focus&&Mt.current.querySelector("input").focus({preventScroll:!0})},[]),Mi(()=>{It.onChange&&It.onChange(zt)},[zt]);const Rn=Pn=>{if(typeof It.vocabulary=="function"){const cr=ex(Pn,It.vocabulary);cr.then?cr.then(Jt):Jt(cr)}else{const cr=Q2(Pn,It.vocabulary);Jt(cr)}},Dn=()=>{if(ln!==null)It.onSubmit(Ut[ln]);else{const Pn=zt.trim();if(Pn){const cr=Array.isArray(It.vocabulary)?It.vocabulary.find(Er=>(Er.label||Er).toLowerCase()===Pn.toLowerCase()):null;cr?It.onSubmit(cr):It.onSubmit(Pn)}}Ht(""),Jt([]),bn(null)};return cn("div",{ref:Mt,className:"r6o-autocomplete"},cn("div",null,cn("input",{onKeyDown:Pn=>{if(Pn.which===13)Dn();else if(Pn.which===27)It.onCancel&&It.onCancel();else if(Ut.length>0){if(Pn.which===38)if(ln===null)bn(0);else{const cr=Math.max(0,ln-1);bn(cr)}else if(Pn.which===40)if(ln===null)bn(0);else{const cr=Math.min(Ut.length-1,ln+1);bn(cr)}}else Pn.which===40&&Array.isArray(It.vocabulary)&&Jt(It.vocabulary)},onChange:Pn=>{const{value:cr}=Pn.target;Ht(cr),bn(null),cr?Rn(cr):Jt([])},value:zt,placeholder:It.placeholder})),cn("ul",null,Ut.length>0&&Ut.map((Pn,cr)=>cn("li",{key:`${Pn.label?Pn.label:Pn}${cr}`,onClick:Dn,onMouseEnter:()=>bn(cr),style:ln===cr?{backgroundColor:"#bde4ff"}:{}},Pn.label?Pn.label:Pn))))};const nx=It=>It||{type:"TextualBody",value:"",purpose:"tagging",draft:!0};var wb=It=>{const Mt=It.annotation?It.annotation.bodies.filter(Pn=>Pn.type==="TextualBody"&&Pn.purpose==="tagging"):[],zt=nx(Mt.slice().reverse().find(Pn=>Pn.draft)),Ht=Mt.filter(Pn=>Pn!=zt),[Ut,Jt]=Ni(!1),ln=Pn=>cr=>{Jt(Ut===Pn?!1:Pn)},bn=Pn=>{const cr=zt.value.trim(),Er=Pn.trim();cr.length===0&&Er.length>0?It.onAppendBody(Rt(Pt({},zt),{value:Er})):cr.length>0&&Er.length===0?It.onRemoveBody(zt):It.onUpdateBody(zt,Rt(Pt({},zt),{value:Er}))},Rn=Pn=>cr=>{cr.stopPropagation(),It.onRemoveBody(Pn)},Dn=Pn=>{const cr=Pn.label?Rt(Pt({},zt),{value:Pn.label,source:Pn.uri}):Rt(Pt({},zt),{value:Pn}),Er=Dt(cr,["draft"]);zt.value.trim().length===0?It.onAppendBody(Er):It.onUpdateBody(zt,Er)};return cn("div",{className:"r6o-widget r6o-tag"},Ht.length>0&&cn("ul",{className:"r6o-taglist"},Ht.map(Pn=>cn("li",{key:Pn.value,onClick:ln(Pn.value)},cn("span",{className:"r6o-label"},Pn.value),!It.readOnly&&cn(J2,{in:Ut===Pn.value,timeout:200,classNames:"r6o-delete"},cn("span",{className:"r6o-delete-wrapper",onClick:Rn(Pn)},cn("span",{className:"r6o-delete"},cn(j2,{width:12}))))))),!It.readOnly&&cn(tx,{focus:It.focus,placeholder:ga.t("Add tag..."),vocabulary:It.vocabulary||[],onChange:bn,onSubmit:Dn}))};class Eb extends hn{constructor(Mt){super(Mt),this.element=Ai.createRef()}renderWidget(Mt){const zt=this.props.widget(Rt(Pt({annotation:Mt.annotation,readOnly:Mt.readOnly},Mt.config),{onAppendBody:(Ht,Ut)=>Mt.onAppendBody(Ht,Ut),onUpdateBody:(Ht,Ut,Jt)=>Mt.onUpdateBody(Ht,Ut,Jt),onUpsertBody:(Ht,Ut,Jt)=>Mt.onUpsertBody(Ht,Ut,Jt),onRemoveBody:(Ht,Ut)=>Mt.onRemoveBody(Ht,Ut),onBatchModify:(Ht,Ut)=>Mt.onBatchModify(Ht,Ut),onSetProperty:(Ht,Ut)=>Mt.onSetProperty(Ht,Ut),onSaveAndClose:()=>Mt.onSaveAndClose()}));for(;this.element.current.firstChild;)this.element.current.removeChild(this.element.current.lastChild);this.element.current.appendChild(zt)}componentDidMount(){this.renderWidget(this.props)}componentWillReceiveProps(Mt){this.element.current&&this.props.annotation!==Mt.annotation&&this.renderWidget(Mt)}render(){return cn("div",{ref:this.element,className:"widget"})}}window.React=Ai,window.ReactDOM=Ai;const rx={COMMENT:yb,TAG:wb},ix=[cn(yb,null),cn(wb,null)],ox=It=>{const Mt=Ht=>{var Ut;return typeof Ht=="function"&&!!((Ut=Ht.prototype)!=null&&Ut.isReactComponent)},zt=Ht=>typeof Ht=="function"&&(String(Ht).match(/return .+\(['|"].+['|"],\s*\{/g)||String(Ht).match(/return .+preact_compat/)||String(Ht).match(/return .+\.createElement/g));return Mt(It)||zt(It)},sx=It=>{const Mt=(zt,Ht,Ut)=>{if(typeof zt=="string"||zt instanceof String)return Ai.createElement(rx[zt],Ht);if((Ut==null?void 0:Ut.toLowerCase())==="react")return Ai.createElement(zt,Ht);if((Ut==null?void 0:Ut.toLowerCase())==="plainjs")return cn(Eb,{widget:zt,config:Ht});if(ox(zt))return Ai.createElement(zt,Ht);if(typeof zt=="function"||zt instanceof Function)return cn(Eb,{widget:zt,config:Ht});throw`${zt} is not a valid plugin`};if(It.widget){const zt=It,{widget:Ht,force:Ut}=zt,Jt=Dt(zt,["widget","force"]);return Mt(Ht,Jt,Ut)}else return Mt(It)},Sb=14;var Cb=(It,Mt,zt,Ht)=>{const Ut=It.getBoundingClientRect();Mt.className="r6o-editor r6o-arrow-top r6o-arrow-left";const{left:Jt,top:ln,right:bn,bottom:Rn}=zt.getBoundingClientRect();if(Mt.style.top=`${Rn-Ut.top+Sb}px`,Mt.style.left=`${Jt-Ut.left}px`,Ht){const Dn=Mt.children[1].getBoundingClientRect();if(Dn.right>window.innerWidth&&(Mt.classList.remove("r6o-arrow-left"),Mt.classList.add("r6o-arrow-right"),Mt.style.left=`${bn-Dn.width-Ut.left}px`),Dn.bottom>window.innerHeight){Mt.classList.remove("r6o-arrow-top"),Mt.classList.add("r6o-arrow-bottom");const cr=Mt.children[1].getBoundingClientRect().height;Mt.style.top=`${ln-Ut.top-cr-Sb}px`}const Pn=Mt.children[1].getBoundingClientRect();if(Pn.top<0){Mt.classList.add("pushed","down"),Mt.style.top=`${-Ut.top}px`;const cr=Rn-Ut.top;Pn.height-Ut.top>cr&&Mt.classList.remove("r6o-arrow-bottom")}Pn.left<0&&(Mt.classList.add("pushed","right"),Mt.style.left=`${-Ut.left}px`),requestAnimationFrame(()=>Mt.style.opacity=1)}};const Tb=It=>{const{top:Mt,left:zt,width:Ht,height:Ut}=It.getBoundingClientRect();return`${Mt}, ${zt}, ${Ht}, ${Ut}`};class ax extends hn{constructor(Mt){super(Mt),Bt(this,"initResizeObserver",()=>{const zt=this.props.autoPosition===void 0?!0:this.props.autoPosition;if(window!=null&&window.ResizeObserver){const Ht=new ResizeObserver(()=>{this.state.dragged||Cb(this.props.wrapperEl,this.element.current,this.props.selectedElement,zt)});return Ht.observe(this.props.wrapperEl),()=>Ht.disconnect()}else this.state.dragged||Cb(this.props.wrapperEl,this.element.current,this.props.selectedElement,zt)}),Bt(this,"creationMeta",zt=>{const Ht={},{user:Ut}=this.props.env;return Ut&&(Ht.creator={},Ut.id&&(Ht.creator.id=Ut.id),Ut.displayName&&(Ht.creator.name=Ut.displayName),Ht[zt.created?"modified":"created"]=this.props.env.getCurrentTimeAdjusted()),Ht}),Bt(this,"getCurrentAnnotation",()=>this.state.currentAnnotation.clone()),Bt(this,"updateCurrentAnnotation",(zt,Ht)=>this.setState({currentAnnotation:this.state.currentAnnotation.clone(zt)},()=>{Ht&&this.onOk()})),Bt(this,"onAppendBody",(zt,Ht)=>this.updateCurrentAnnotation({body:[...this.state.currentAnnotation.bodies,Pt(Pt({},zt),this.creationMeta(zt))]},Ht)),Bt(this,"onUpdateBody",(zt,Ht,Ut)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.map(Jt=>Jt===zt?Pt(Pt({},Ht),this.creationMeta(Ht)):Jt)},Ut)),Bt(this,"onRemoveBody",(zt,Ht)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.filter(Ut=>Ut!==zt)},Ht)),Bt(this,"onUpsertBody",(zt,Ht,Ut)=>{if(zt==null&&Ht!=null)this.onAppendBody(Ht,Ut);else if(zt!=null&&Ht!=null)this.onUpdateBody(zt,Ht,Ut);else if(zt!=null&&Ht==null){const Jt=this.state.currentAnnotation.bodies.find(ln=>ln.purpose===zt.purpose);Jt?this.onUpdateBody(Jt,zt,Ut):this.onAppendBody(zt,Ut)}}),Bt(this,"onBatchModify",(zt,Ht)=>{const Ut=zt.filter(Dn=>Dn.action==="upsert"&&Dn.body).map(Dn=>({previous:this.state.currentAnnotation.bodies.find(Pn=>Pn.purpose===Dn.body.purpose),updated:Pt(Pt({},Dn.body),this.creationMeta(Dn.body))})),Jt=zt.filter(Dn=>Dn.action==="remove").map(Dn=>Dn.body),ln=[...zt.filter(Dn=>Dn.action==="append"||Dn.action==="upsert"&&Dn.updated&&!Dn.previous).map(Dn=>Pt(Pt({},Dn.body),this.creationMeta(Dn.body))),...Ut.filter(Dn=>!Dn.previous).map(Dn=>Dn.updated)],bn=[...zt.filter(Dn=>Dn.action==="update"||Dn.action==="upsert"&&Dn.updated&&Dn.previous).map(Dn=>({previous:Dn.previous,updated:Pt(Pt({},Dn.updated),this.creationMeta(Dn.updated))})),...Ut.filter(Dn=>Dn.previous)],Rn=[...this.state.currentAnnotation.bodies.filter(Dn=>!Jt.includes(Dn)).map(Dn=>{const Pn=bn.find(cr=>cr.previous===Dn);return Pn?Pn.updated:Dn}),...ln];this.updateCurrentAnnotation({body:Rn},Ht)}),Bt(this,"onSetProperty",(zt,Ht)=>{if(["@context","id","type","body","target"].includes(zt))throw new Exception(`Cannot set ${zt} - not allowed`);if(Ht)this.updateCurrentAnnotation({[zt]:Ht});else{const Ut=this.currentAnnotation.clone();delete Ut[zt],this.setState({currentAnnotation:Ut})}}),Bt(this,"onCancel",()=>this.props.onCancel(this.props.annotation)),Bt(this,"onOk",()=>{const zt=Ut=>Ut.clone({body:Ut.bodies.map(Jt=>{var ln=Jt,bn=Dt(ln,["draft"]);return bn})}),{currentAnnotation:Ht}=this.state;Ht.bodies.length===0&&!this.props.allowEmpty?Ht.isSelection?this.onCancel():this.props.onAnnotationDeleted(this.props.annotation):Ht.isSelection?this.props.onAnnotationCreated(zt(Ht).toAnnotation()):this.props.onAnnotationUpdated(zt(Ht),this.props.annotation)}),Bt(this,"onDelete",()=>this.props.onAnnotationDeleted(this.props.annotation)),this.element=Ai.createRef(),this.state={currentAnnotation:Mt.annotation,dragged:!1,selectionBounds:Tb(Mt.selectedElement)}}componentWillReceiveProps(Mt){var zt;const{selectionBounds:Ht}=this.state,Ut=Tb(Mt.selectedElement);(zt=this.props.annotation)!=null&&zt.isEqual(Mt.annotation)?this.setState({selectionBounds:Ut}):this.setState({currentAnnotation:Mt.annotation,selectionBounds:Ut}),this.props.modifiedTarget!=Mt.modifiedTarget&&this.state.currentAnnotation&&this.updateCurrentAnnotation({target:this.props.modifiedTarget}),Ht!=Ut&&this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}componentDidMount(){this.removeObserver=this.initResizeObserver(),new MutationObserver(()=>{this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}).observe(this.element.current,{childList:!0,subtree:!0})}componentWillUnmount(){this.removeObserver&&this.removeObserver()}render(){const{currentAnnotation:Mt}=this.state,zt=this.props.widgets?this.props.widgets.map(sx):ix,Ht=Jt=>Jt.type.disableDelete?Jt.type.disableDelete(Mt,Rt(Pt({},Jt.props),{readOnly:this.props.readOnly,env:this.props.env})):!1,Ut=Mt&&(Mt.bodies.length>0||this.props.allowEmpty)&&!this.props.readOnly&&!Mt.isSelection&&!zt.some(Ht);return cn(uf,{disabled:!this.props.detachable,handle:".r6o-draggable",cancel:".r6o-btn, .r6o-btn *",onDrag:()=>this.setState({dragged:!0})},cn("div",{ref:this.element,className:this.state.dragged?"r6o-editor dragged":"r6o-editor"},cn("div",{className:"r6o-arrow"}),cn("div",{className:"r6o-editor-inner"},zt.map((Jt,ln)=>Ai.cloneElement(Jt,{key:`${ln}`,focus:ln===0,annotation:Mt,readOnly:this.props.readOnly,env:this.props.env,onAppendBody:this.onAppendBody,onUpdateBody:this.onUpdateBody,onRemoveBody:this.onRemoveBody,onUpsertBody:this.onUpsertBody,onBatchModify:this.onBatchModify,onSetProperty:this.onSetProperty,onSaveAndClose:this.onOk})),this.props.readOnly?cn("div",{className:"r6o-footer"},cn("button",{className:"r6o-btn",onClick:this.onCancel},ga.t("Close"))):cn("div",{className:this.props.detachable?"r6o-footer r6o-draggable":"r6o-footer"},Ut&&cn("button",{className:"r6o-btn left delete-annotation",title:ga.t("Delete"),onClick:this.onDelete},cn(V2,{width:12})),cn("button",{className:"r6o-btn outline",onClick:this.onCancel},ga.t("Cancel")),cn("button",{className:"r6o-btn ",onClick:this.onOk},ga.t("Ok"))))))}}var ov,lx=new Uint8Array(16);function cx(){if(!ov&&(ov=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ov))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ov(lx)}var ux=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hx(It){return typeof It=="string"&&ux.test(It)}for(var Wl=[],S_=0;S_<256;++S_)Wl.push((S_+256).toString(16).substr(1));function dx(It){var Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,zt=(Wl[It[Mt+0]]+Wl[It[Mt+1]]+Wl[It[Mt+2]]+Wl[It[Mt+3]]+"-"+Wl[It[Mt+4]]+Wl[It[Mt+5]]+"-"+Wl[It[Mt+6]]+Wl[It[Mt+7]]+"-"+Wl[It[Mt+8]]+Wl[It[Mt+9]]+"-"+Wl[It[Mt+10]]+Wl[It[Mt+11]]+Wl[It[Mt+12]]+Wl[It[Mt+13]]+Wl[It[Mt+14]]+Wl[It[Mt+15]]).toLowerCase();if(!hx(zt))throw TypeError("Stringified UUID is invalid");return zt}function kb(It,Mt,zt){It=It||{};var Ht=It.random||(It.rng||cx)();if(Ht[6]=Ht[6]&15|64,Ht[8]=Ht[8]&63|128,Mt){zt=zt||0;for(var Ut=0;Ut<16;++Ut)Mt[zt+Ut]=Ht[Ut];return Mt}return dx(Ht)}var fx=function It(Mt,zt){if(Mt===zt)return!0;if(Mt&&zt&&typeof Mt=="object"&&typeof zt=="object"){if(Mt.constructor!==zt.constructor)return!1;var Ht,Ut,Jt;if(Array.isArray(Mt)){if(Ht=Mt.length,Ht!=zt.length)return!1;for(Ut=Ht;Ut--!=0;)if(!It(Mt[Ut],zt[Ut]))return!1;return!0}if(Mt.constructor===RegExp)return Mt.source===zt.source&&Mt.flags===zt.flags;if(Mt.valueOf!==Object.prototype.valueOf)return Mt.valueOf()===zt.valueOf();if(Mt.toString!==Object.prototype.toString)return Mt.toString()===zt.toString();if(Jt=Object.keys(Mt),Ht=Jt.length,Ht!==Object.keys(zt).length)return!1;for(Ut=Ht;Ut--!=0;)if(!Object.prototype.hasOwnProperty.call(zt,Jt[Ut]))return!1;for(Ut=Ht;Ut--!=0;){var ln=Jt[Ut];if(!It(Mt[ln],zt[ln]))return!1}return!0}return Mt!==Mt&&zt!==zt},Ab=fx;const C_=class{constructor(It,Mt){Bt(this,"clone",(zt,Ht)=>new C_(Pt(Pt({},this.underlying),zt),Pt(Pt({},this.opts),Ht))),Bt(this,"selector",zt=>{const{target:Ht}=this.underlying;if(Ht.selector)return(Array.isArray(Ht.selector)?Ht.selector:[Ht.selector]).find(Ut=>Ut.type===zt)}),this.underlying=It,this.opts=Mt}isEqual(It){return(It==null?void 0:It.type)!=="Annotation"?!1:this.underlying===It.underlying?!0:!this.underlying.id||!It.underlying.id?!1:Ab(this.underlying,It.underlying)}get readOnly(){var It;return(It=this.opts)==null?void 0:It.readOnly}get id(){return this.underlying.id}get type(){return this.underlying.type}get motivation(){return this.underlying.motivation}get body(){return this.underlying.body}get target(){return this.underlying.target}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}set bodies(It){this.underlying.body=It}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}get quote(){return this.selector("TextQuoteSelector").exact}get start(){return this.selector("TextPositionSelector").start}get end(){return this.selector("TextPositionSelector").end}};let dg=C_;Bt(dg,"create",It=>{const Mt={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${kb()}`,body:[]};return new C_(Pt(Pt({},Mt),It))});class c1{constructor(Mt,zt){Bt(this,"clone",Ht=>{const Ut=new c1;return Ut.underlying=JSON.parse(JSON.stringify(this.underlying)),Ht&&(Ut.underlying=Pt(Pt({},Ut.underlying),Ht)),Ut}),Bt(this,"selector",Ht=>{const{target:Ut}=this.underlying;if(Ut.selector)return(Array.isArray(Ut.selector)?Ut.selector:[Ut.selector]).find(Jt=>Jt.type===Ht)}),Bt(this,"toAnnotation",()=>{const Ht=Object.assign({},this.underlying,{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${kb()}`});return new dg(Ht)}),this.underlying={type:"Selection",body:zt||[],target:Mt}}get type(){return this.underlying.type}get body(){return this.underlying.body}get target(){return this.underlying.target}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}isEqual(Mt){return Mt?Ab(this.underlying,Mt.underlying):!1}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}get quote(){return this.selector("TextQuoteSelector").exact}get isSelection(){return!0}}let T_=0;var px=()=>({setServerTime:It=>{const Mt=Date.now();T_=It-Mt},getCurrentTimeAdjusted:()=>new Date(Date.now()+T_).toISOString(),toClientTime:It=>Date.parse(It)-T_});const gx=(It,Mt)=>{if(It){const zt=It==="auto"?window.navigator.userLanguage||window.navigator.language:It;try{ga.init(zt.split("-")[0].toLowerCase(),Mt)}catch{console.warn(`Unsupported locale '${zt}'. Falling back to default en.`)}}else ga.init(null,Mt)},Ls="http://www.w3.org/2000/svg",k_=It=>{const Mt=It.getAttribute("class");return Mt?new Set(Mt.split(" ")):new Set},ip=(It,Mt)=>{const zt=k_(It);zt.add(Mt),It.setAttribute("class",Array.from(zt).join(" "))},mx=(It,Mt)=>{const zt=k_(It);zt.delete(Mt),zt.size===0?It.removeAttribute("class"):It.setAttribute("class",Array.from(zt).join(" "))},A_=(It,Mt)=>k_(It).has(Mt),fg=(It,Mt)=>{const zt=It.selector("FragmentSelector");if(zt!=null&&zt.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){const{value:Ht}=zt,Ut=Ht.includes(":")?Ht.substring(Ht.indexOf("=")+1,Ht.indexOf(":")):"pixel",Jt=Ht.includes(":")?Ht.substring(Ht.indexOf(":")+1):Ht.substring(Ht.indexOf("=")+1);let[ln,bn,Rn,Dn]=Jt.split(",").map(parseFloat);return Ut.toLowerCase()==="percent"&&(ln=ln*Mt.naturalWidth/100,bn=bn*Mt.naturalHeight/100,Rn=Rn*Mt.naturalWidth/100,Dn=Dn*Mt.naturalHeight/100),{x:ln,y:bn,w:Rn,h:Dn}}},yx=(It,Mt,zt,Ht,Ut)=>({source:Ut==null?void 0:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${It},${Mt},${zt},${Ht}`}}),vx=(It,Mt,zt,Ht,Ut)=>{const Jt=It/Ut.naturalWidth*100,ln=Mt/Ut.naturalHeight*100,bn=zt/Ut.naturalWidth*100,Rn=Ht/Ut.naturalHeight*100;return{source:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=percent:${Jt},${ln},${bn},${Rn}`}}},u1=(It,Mt,zt,Ht,Ut,Jt)=>(Jt==null?void 0:Jt.toLowerCase())==="percent"?vx(It,Mt,zt,Ht,Ut):yx(It,Mt,zt,Ht,Ut),sv=(It,Mt,zt,Ht,Ut)=>{It.setAttribute("x",Mt),It.setAttribute("y",zt),It.setAttribute("width",Ht),It.setAttribute("height",Ut)},av=(It,Mt,zt)=>{It.setAttribute("cx",Mt),It.setAttribute("cy",zt),It.setAttribute("r",7)},Lb=(It,Mt,zt,Ht,Ut)=>{const Jt=document.createElementNS(Ls,"path");Jt.setAttribute("fill-rule","evenodd");const{naturalWidth:ln,naturalHeight:bn}=It;return Jt.setAttribute("d",`M0 0 h${ln} v${bn} h-${ln} z M${Mt} ${zt} h${Ht} v${Ut} h-${Ht} z`),Jt},L_=(It,Mt,zt,Ht,Ut,Jt)=>{const{naturalWidth:ln,naturalHeight:bn}=Mt;It.setAttribute("d",`M0 0 h${ln} v${bn} h-${ln} z M${zt} ${Ht} h${Ut} v${Jt} h-${Ut} z`)},I_=(It,Mt,zt,Ht)=>{const{x:Ut,y:Jt,w:ln,h:bn}=It.type==="Annotation"||It.type==="Selection"?fg(It,Mt):{x:It,y:Mt,w:zt,h:Ht},Rn=document.createElementNS(Ls,"g");if(ln===0&&bn===0){ip(Rn,"a9s-point"),ip(Rn,"a9s-non-scaling"),Rn.setAttribute("transform-origin",`${Ut} ${Jt}`);const Dn=document.createElementNS(Ls,"circle"),Pn=document.createElementNS(Ls,"circle");Pn.setAttribute("class","a9s-inner"),av(Pn,Ut,Jt),Dn.setAttribute("class","a9s-outer"),av(Dn,Ut,Jt),Rn.appendChild(Dn),Rn.appendChild(Pn)}else{const Dn=document.createElementNS(Ls,"rect"),Pn=document.createElementNS(Ls,"rect");Pn.setAttribute("class","a9s-inner"),sv(Pn,Ut,Jt,ln,bn),Dn.setAttribute("class","a9s-outer"),sv(Dn,Ut,Jt,ln,bn),Rn.appendChild(Dn),Rn.appendChild(Pn)}return Rn},Ib=It=>{const Mt=It.querySelector(".a9s-outer");if(Mt.nodeName==="rect"){const zt=parseFloat(Mt.getAttribute("x")),Ht=parseFloat(Mt.getAttribute("y")),Ut=parseFloat(Mt.getAttribute("width")),Jt=parseFloat(Mt.getAttribute("height"));return{x:zt,y:Ht,w:Ut,h:Jt}}else{const zt=parseFloat(Mt.getAttribute("cx")),Ht=parseFloat(Mt.getAttribute("cy"));return{x:zt,y:Ht,w:0,h:0}}},P_=(It,Mt,zt,Ht,Ut)=>{const Jt=It.querySelector(".a9s-inner"),ln=It.querySelector(".a9s-outer");ln.nodeName==="rect"?(sv(Jt,Mt,zt,Ht,Ut),sv(ln,Mt,zt,Ht,Ut)):(av(Jt,Mt,zt),av(ln,Mt,zt))},_x=(It,Mt)=>{const{w:zt,h:Ht}=fg(It,Mt);return zt*Ht};class bx{constructor(Mt,zt,Ht,Ut,Jt){Bt(this,"dragTo",(ln,bn)=>{this.group.style.display=null,this.opposite=[ln,bn];const{x:Rn,y:Dn,w:Pn,h:cr}=this.bbox;L_(this.mask,this.env.image,Rn,Dn,Pn,cr),P_(this.rect,Rn,Dn,Pn,cr)}),Bt(this,"getBoundingClientRect",()=>this.rect.getBoundingClientRect()),Bt(this,"toSelection",()=>{const{x:ln,y:bn,w:Rn,h:Dn}=this.bbox;return new c1(u1(ln,bn,Rn,Dn,this.env.image,this.config.fragmentUnit))}),Bt(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.mask=null,this.rect=null,this.group=null}),this.anchor=[Mt,zt],this.opposite=[Mt,zt],this.config=Ut,this.env=Jt,this.group=document.createElementNS(Ls,"g"),this.mask=Lb(Jt.image,Mt,zt,2,2),this.mask.setAttribute("class","a9s-selection-mask"),this.rect=I_(Mt,zt,2,2),this.rect.setAttribute("class","a9s-selection"),this.group.style.pointerEvents="none",this.group.style.display="none",this.group.appendChild(this.mask),this.group.appendChild(this.rect),Ht.appendChild(this.group)}get bbox(){const Mt=this.opposite[0]-this.anchor[0],zt=this.opposite[1]-this.anchor[1];return{x:Mt>0?this.anchor[0]:this.opposite[0],y:zt>0?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs(Mt)),h:Math.max(1,Math.abs(zt))}}get element(){return this.rect}}const xx={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},O_=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,wx=It=>{let Mt=null;const zt=(Ut,Jt)=>new MouseEvent(Ut,{screenX:Jt.screenX,screenY:Jt.screenY,clientX:Jt.clientX,clientY:Jt.clientY,pageX:Jt.pageX,pageY:Jt.pageY,bubbles:!0}),Ht=Ut=>{const Jt=Ut.changedTouches[0],ln=zt(xx[Ut.type],Jt);Jt.target.dispatchEvent(ln),Ut.preventDefault(),(Ut.type==="touchstart"||Ut.type==="touchmove")&&(Mt&&clearTimeout(Mt),Mt=setTimeout(()=>{const bn=zt("dblclick",Jt);Jt.target.dispatchEvent(bn)},800)),Ut.type==="touchend"&&Mt&&clearTimeout(Mt)};It.addEventListener("touchstart",Ht,!0),It.addEventListener("touchmove",Ht,!0),It.addEventListener("touchend",Ht,!0),It.addEventListener("touchcancel",Ht,!0)},lv="An implementation is missing",Ex=O_();class Pb extends Wa{constructor(Mt,zt,Ht){super(),Bt(this,"enableResponsive",()=>{window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>{const Jt=this.svg.getBoundingClientRect(),{width:ln,height:bn}=this.svg.viewBox.baseVal;this.scale=Math.max(ln/Jt.width,bn/Jt.height),this.onScaleChanged&&this.onScaleChanged(this.scale)}),this.resizeObserver.observe(this.svg.parentNode))}),Bt(this,"getSVGPoint",Jt=>{const ln=this.svg.createSVGPoint();if(Ex){const bn=this.svg.getBoundingClientRect(),Rn=Jt.clientX-bn.x,Dn=Jt.clientY-bn.y,{left:Pn,top:cr}=this.svg.getBoundingClientRect();return ln.x=Rn+Pn,ln.y=Dn+cr,ln.matrixTransform(this.g.getScreenCTM().inverse())}else return ln.x=Jt.offsetX,ln.y=Jt.offsetY,ln.matrixTransform(this.g.getCTM().inverse())}),Bt(this,"drawHandle",(Jt,ln)=>{const bn=document.createElementNS(Ls,"g");bn.setAttribute("class","a9s-handle");const Rn=document.createElementNS(Ls,"g"),Dn=Ar=>{const Wr=document.createElementNS(Ls,"circle");return Wr.setAttribute("cx",Jt),Wr.setAttribute("cy",ln),Wr.setAttribute("r",Ar),Wr},Pn=this.config.handleRadius||6,cr=Dn(Pn);cr.setAttribute("class","a9s-handle-inner");const Er=Dn(Pn+1);return Er.setAttribute("class","a9s-handle-outer"),Rn.appendChild(Er),Rn.appendChild(cr),bn.appendChild(Rn),bn}),Bt(this,"setHandleXY",(Jt,ln,bn)=>{const Rn=Jt.querySelector(".a9s-handle-inner");Rn.setAttribute("cx",ln),Rn.setAttribute("cy",bn);const Dn=Jt.querySelector(".a9s-handle-outer");Dn.setAttribute("cx",ln),Dn.setAttribute("cy",bn)}),Bt(this,"getHandleXY",Jt=>{const ln=Jt.querySelector(".a9s-handle-outer");return{x:parseFloat(ln.getAttribute("cx")),y:parseFloat(ln.getAttribute("cy"))}}),Bt(this,"scaleHandle",Jt=>{const ln=Jt.querySelector(".a9s-handle-inner"),bn=Jt.querySelector(".a9s-handle-outer"),Rn=this.scale*(this.config.handleRadius||6);ln.setAttribute("r",Rn),bn.setAttribute("r",Rn)}),this.svg=Mt.closest("svg"),this.g=Mt,this.config=zt,this.env=Ht,this.scale=1;const{image:Ut}=Ht;(Ut instanceof Element||Ut instanceof HTMLDocument)&&this.enableResponsive()}destroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null}}class $_ extends Pb{constructor(Mt,zt,Ht){super(Mt,zt,Ht),Bt(this,"attachListeners",({mouseMove:Ut,mouseUp:Jt,dblClick:ln})=>{Ut&&(this.mouseMove=bn=>{const{x:Rn,y:Dn}=this.getSVGPoint(bn);this.started||(this.emit("startSelection",{x:Rn,y:Dn}),this.started=!0),Ut(Rn,Dn,bn)},this.svg.addEventListener("mousemove",this.mouseMove)),Jt&&(this.mouseUp=bn=>{if(bn.button!==0)return;const{x:Rn,y:Dn}=this.getSVGPoint(bn);Jt(Rn,Dn,bn)},document.addEventListener("mouseup",this.mouseUp)),ln&&(this.dblClick=bn=>{const{x:Rn,y:Dn}=this.getSVGPoint(bn);ln(Rn,Dn,bn)},document.addEventListener("dblclick",this.dblClick))}),Bt(this,"detachListeners",()=>{this.mouseMove&&this.svg.removeEventListener("mousemove",this.mouseMove),this.mouseUp&&document.removeEventListener("mouseup",this.mouseUp),this.dblClick&&document.removeEventListener("dblclick",this.dblClick)}),Bt(this,"start",(Ut,Jt)=>{const{x:ln,y:bn}=this.getSVGPoint(Ut);this.startDrawing(ln,bn,Jt,Ut)}),Bt(this,"startDrawing",Ut=>{throw new Error(lv)}),Bt(this,"createEditableShape",Ut=>{throw new Error(lv)}),this.started=!1}get isDrawing(){throw new Error(lv)}}$_.supports=It=>{throw new Error(lv)};const Ob="An implementation is missing";class $b extends Pb{constructor(Mt,zt,Ht,Ut){super(zt,Ht,Ut),Bt(this,"updateState",Jt=>{throw new Error(Ob)}),this.annotation=Mt}get element(){throw new Error(Ob)}}const Sx=/firefox/i.test(navigator.userAgent),Rb=(It,Mt,zt,Ht,Ut)=>{It.setAttribute("width",Ht),It.setAttribute("height",Ut),Sx?(It.setAttribute("x",0),It.setAttribute("y",0),It.setAttribute("transform",`translate(${Mt}, ${zt})`)):(It.setAttribute("x",Mt),It.setAttribute("y",zt))},Mb=(It,Mt)=>{const{x:zt,y:Ht,width:Ut,height:Jt}=Mt.getBBox(),ln=document.createElementNS(Ls,"svg");ln.setAttribute("class","a9s-formatter-el"),Rb(ln,zt,Ht,Ut,Jt);const bn=document.createElementNS(Ls,"g");bn.appendChild(It),ln.appendChild(bn),Mt.append(ln)},cv=(It,Mt,zt)=>{if(!zt)return It;const Ht=zt(Mt);if(!Ht)return It;if(typeof Ht=="string"||Ht instanceof String)ip(It,Ht);else if(Ht.nodeType===Node.ELEMENT_NODE)Mb(Ht,It);else{const{className:Ut,style:Jt,element:ln}=Ht;if(Ut&&ip(It,Ut),Jt){const bn=It.querySelector(".a9s-outer"),Rn=It.querySelector(".a9s-inner");bn&&Rn?(bn.setAttribute("style","display:none"),Rn.setAttribute("style",Jt)):It.setAttribute("style",Jt)}ln&&Mb(ln,It);for(const bn in Ht)Ht.hasOwnProperty(bn)&&bn.startsWith("data-")&&It.setAttribute(bn,Ht[bn])}},R_=(It,Mt,zt,Ht,Ut)=>{const Jt=It.querySelector(".a9s-formatter-el");Jt&&Rb(Jt,Mt,zt,Ht,Ut)};class Cx extends $b{constructor(Mt,zt,Ht,Ut){super(Mt,zt,Ht,Ut),Bt(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Bt(this,"setSize",(Dn,Pn,cr,Er)=>{P_(this.rectangle,Dn,Pn,cr,Er),L_(this.mask,this.env.image,Dn,Pn,cr,Er),R_(this.elementGroup,Dn,Pn,cr,Er);const[Ar,Wr,ii,ri]=this.handles;this.setHandleXY(Ar,Dn,Pn),this.setHandleXY(Wr,Dn+cr,Pn),this.setHandleXY(ii,Dn+cr,Pn+Er),this.setHandleXY(ri,Dn,Pn+Er)}),Bt(this,"stretchCorners",(Dn,Pn,cr)=>{const Er=this.getHandleXY(Pn),Ar=cr.x-Er.x,Wr=cr.y-Er.y,ii=Ar>0?Er.x:cr.x,ri=Wr>0?Er.y:cr.y,xi=Math.abs(Ar),Li=Math.abs(Wr);P_(this.rectangle,ii,ri,xi,Li),L_(this.mask,this.env.image,ii,ri,xi,Li),R_(this.elementGroup,ii,ri,xi,Li),this.setHandleXY(this.handles[Dn],cr.x,cr.y);const wo=this.handles[(Dn+3)%4];this.setHandleXY(wo,Er.x,cr.y);const po=this.handles[(Dn+5)%4];return this.setHandleXY(po,cr.x,Er.y),{x:ii,y:ri,w:xi,h:Li}}),Bt(this,"onGrab",Dn=>Pn=>{if(Pn.button!==0)return;this.grabbedElem=Dn;const cr=this.getSVGPoint(Pn),{x:Er,y:Ar}=Ib(this.rectangle);this.mouseOffset={x:cr.x-Er,y:cr.y-Ar}}),Bt(this,"onMouseMove",Dn=>{if(Dn.button!==0)return;const Pn=(cr,Er)=>cr<0?0:cr>Er?Er:cr;if(this.grabbedElem){const cr=this.getSVGPoint(Dn);if(this.grabbedElem===this.rectangle){const{w:Er,h:Ar}=Ib(this.rectangle),{naturalWidth:Wr,naturalHeight:ii}=this.env.image,ri=Pn(cr.x-this.mouseOffset.x,Wr-Er),xi=Pn(cr.y-this.mouseOffset.y,ii-Ar);this.setSize(ri,xi,Er,Ar),this.emit("update",u1(ri,xi,Er,Ar,this.env.image,this.config.fragmentUnit))}else{const Er=this.handles.indexOf(this.grabbedElem),Ar=Er<2?this.handles[Er+2]:this.handles[Er-2],{x:Wr,y:ii,w:ri,h:xi}=this.stretchCorners(Er,Ar,cr);this.emit("update",u1(Wr,ii,ri,xi,this.env.image,this.config.fragmentUnit))}}}),Bt(this,"onMouseUp",Dn=>{this.grabbedElem=null,this.mouseOffset=null}),Bt(this,"updateState",Dn=>{const{x:Pn,y:cr,w:Er,h:Ar}=fg(Dn,this.env.image);this.setSize(Pn,cr,Er,Ar)}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp);const{x:Jt,y:ln,w:bn,h:Rn}=fg(Mt,Ut.image);this.containerGroup=document.createElementNS(Ls,"g"),this.mask=Lb(Ut.image,Jt,ln,bn,Rn),this.mask.setAttribute("class","a9s-selection-mask"),this.containerGroup.appendChild(this.mask),this.elementGroup=document.createElementNS(Ls,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.rectangle=I_(Jt,ln,bn,Rn),this.rectangle.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.rectangle)),this.elementGroup.appendChild(this.rectangle),this.handles=[[Jt,ln],[Jt+bn,ln],[Jt+bn,ln+Rn],[Jt,ln+Rn]].map(Dn=>{const[Pn,cr]=Dn,Er=this.drawHandle(Pn,cr);return Er.addEventListener("mousedown",this.onGrab(Er)),this.elementGroup.appendChild(Er),Er}),this.containerGroup.appendChild(this.elementGroup),zt.appendChild(this.containerGroup),cv(this.rectangle,Mt,Ht.formatter),this.grabbedElem=null,this.mouseOffset=null}get element(){return this.elementGroup}destroy(){this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}}class uv extends $_{constructor(Mt,zt,Ht){super(Mt,zt,Ht),Bt(this,"startDrawing",(Ut,Jt)=>{this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp}),this.rubberband=new bx(Ut,Jt,this.g,this.config,this.env)}),Bt(this,"stop",()=>{this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Bt(this,"onMouseMove",(Ut,Jt)=>this.rubberband.dragTo(Ut,Jt)),Bt(this,"onMouseUp",()=>{this.detachListeners(),this.started=!1;const{width:Ut,height:Jt}=this.rubberband.getBoundingClientRect(),ln=this.config.minSelectionWidth||4,bn=this.config.minSelectionHeight||4;if(Ut>=ln&&Jt>=bn){const{element:Rn}=this.rubberband;Rn.annotation=this.rubberband.toSelection(),this.emit("complete",Rn)}else this.emit("cancel");this.stop()}),Bt(this,"createEditableShape",Ut=>new Cx(Ut,this.g,this.config,this.env)),this.rubberband=null}get isDrawing(){return this.rubberband!=null}}uv.identifier="rect",uv.supports=It=>{const Mt=It.selector("FragmentSelector");return Mt==null?void 0:Mt.conformsTo.startsWith("http://www.w3.org/TR/media-frags")};const Tx=It=>{const Mt=new XMLSerializer().serializeToString(It.documentElement).replace("<svg>",`<svg xmlns="${Ls}">`);return new DOMParser().parseFromString(Mt,"image/svg+xml").documentElement},Nb=It=>{const Mt=Ht=>{Array.from(Ht.attributes).forEach(Ut=>{Ut.name.startsWith("on")&&Ht.removeAttribute(Ut.name)})},zt=It.getElementsByTagName("script");return Array.from(zt).reverse().forEach(Ht=>Ht.parentNode.removeChild(Ht)),Mt(It),Array.from(It.querySelectorAll("*")).forEach(Mt),It},km=It=>{const Mt=It.selector("SvgSelector");if(Mt){const zt=new DOMParser,{value:Ht}=Mt,Ut=zt.parseFromString(Ht,"image/svg+xml"),Jt=Ut.lookupPrefix(Ls),ln=Ut.lookupNamespaceURI(null);return Jt||ln?Nb(Ut).firstChild:Nb(Tx(Ut)).firstChild}},Db=It=>{const Mt=km(It),zt=document.createElementNS(Ls,"g"),Ht=Mt.cloneNode(!0);Ht.setAttribute("class","a9s-inner");const Ut=Mt.cloneNode(!0);return Ut.setAttribute("class","a9s-outer"),zt.appendChild(Ut),zt.appendChild(Ht),zt},M_=(It,Mt)=>{const zt=It.querySelector(".a9s-inner").cloneNode(!0);zt.removeAttribute("class"),zt.removeAttribute("xmlns");let Ht=zt.outerHTML||new XMLSerializer().serializeToString(zt);return Ht=Ht.replace(` xmlns="${Ls}"`,""),{source:Mt==null?void 0:Mt.src,selector:{type:"SvgSelector",value:`<svg>${Ht}</svg>`}}},kx=It=>{const Mt=km(It),zt=Mt.nodeName.toLowerCase();if(zt==="polygon")return Ax(Mt);if(zt==="circle")return Lx(Mt);if(zt==="ellipse")return Ix(Mt);if(zt=="path")return Px(Mt);throw`Unsupported SVG shape type: ${zt}`},Ax=It=>{const Mt=It.getAttribute("points").split(" ").map(Ut=>Ut.split(",").map(Jt=>parseFloat(Jt.trim())));let zt=0,Ht=Mt.length-1;for(let Ut=0;Ut<Mt.length;Ut++)zt+=(Mt[Ht][0]+Mt[Ut][0])*(Mt[Ht][1]-Mt[Ut][1]),Ht=Ut;return Math.abs(.5*zt)},Lx=It=>{const Mt=It.getAttribute("r");return Mt*Mt*Math.PI},Ix=It=>{const Mt=It.getAttribute("rx"),zt=It.getAttribute("ry");return Mt*zt*Math.PI},Px=It=>{const Mt=It.getAttribute("d").split("L");let zt=0;if(Mt.length>1){var Ht=Mt[Mt.length-1].trim().split(" ");let Ut=parseFloat(Ht[0]),Jt=parseFloat(Ht[1]);Ht=Mt[0].substring(1).trim().split(" ");let ln=parseFloat(Ht[0]),bn=parseFloat(Ht[1]);zt+=(Ut+ln)*(Jt-bn),Ut=ln,Jt=bn;for(let Rn=1;Rn<Mt.length;Rn++)Ht=Mt[Rn].trim().split(" "),ln=parseFloat(Ht[0]),bn=parseFloat(Ht[1]),zt+=(Ut+ln)*(Jt-bn),Ut=ln,Jt=bn}return Math.abs(.5*zt)};class Bb{constructor(Mt,zt){Bt(this,"redraw",()=>{this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}),Bt(this,"destroy",()=>this.mask.parentNode.removeChild(this.mask)),this.w=Mt.naturalWidth,this.h=Mt.naturalHeight,this.polygon=zt,this.mask=document.createElementNS(Ls,"path"),this.mask.setAttribute("fill-rule","evenodd"),this.mask.setAttribute("class","a9s-selection-mask"),this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}get element(){return this.mask}}class Ox{constructor(Mt,zt,Ht){Bt(this,"setPoints",Ut=>{const Jt=Ut.map(ln=>`${ln[0]},${ln[1]}`).join(" ");this.outer.setAttribute("points",Jt),this.inner.setAttribute("points",Jt)}),Bt(this,"getBoundingClientRect",()=>this.outer.getBoundingClientRect()),Bt(this,"dragTo",Ut=>{this.group.style.display=null,this.mousepos=Ut;const Jt=[...this.points,Ut];this.setPoints(Jt),this.mask.redraw()}),Bt(this,"addPoint",()=>{const[Ut,Jt]=this.mousepos,ln=this.points[this.points.length-1];Math.pow(Ut-ln[0],2)+Math.pow(Jt-ln[1],2)>4&&(this.points=[...this.points,this.mousepos],this.setPoints(this.points),this.mask.redraw())}),Bt(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.polygon=null,this.group=null}),Bt(this,"toSelection",()=>new c1(M_(this.group,this.env.image))),this.points=[Mt],this.env=Ht,this.mousepos=Mt,this.group=document.createElementNS(Ls,"g"),this.polygon=document.createElementNS(Ls,"g"),this.polygon.setAttribute("class","a9s-selection"),this.outer=document.createElementNS(Ls,"polygon"),this.outer.setAttribute("class","a9s-outer"),this.inner=document.createElementNS(Ls,"polygon"),this.inner.setAttribute("class","a9s-inner"),this.setPoints(this.points),this.mask=new Bb(Ht.image,this.inner),this.polygon.appendChild(this.outer),this.polygon.appendChild(this.inner),this.group.style.display="none",this.group.appendChild(this.mask.element),this.group.appendChild(this.polygon),zt.appendChild(this.group)}get element(){return this.polygon}}const N_=It=>{const Mt=It.querySelector(".a9s-inner").points,zt=[];for(let Ht=0;Ht<Mt.numberOfItems;Ht++)zt.push(Mt.getItem(Ht));return zt},$x=It=>It.querySelector(".a9s-inner").getBBox();class Rx extends $b{constructor(Mt,zt,Ht,Ut){super(Mt,zt,Ht,Ut),Bt(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Bt(this,"setPoints",Jt=>{const ln=Ar=>Math.round(10*Ar)/10,bn=Jt.map(Ar=>`${ln(Ar.x)},${ln(Ar.y)}`).join(" ");this.shape.querySelector(".a9s-inner").setAttribute("points",bn);const Rn=this.shape.querySelector(".a9s-outer");Rn.setAttribute("points",bn),this.mask.redraw();const{x:Dn,y:Pn,width:cr,height:Er}=Rn.getBBox();R_(this.elementGroup,Dn,Pn,cr,Er)}),Bt(this,"onGrab",Jt=>ln=>{ln.button===0&&(this.grabbedElem=Jt,this.grabbedAt=this.getSVGPoint(ln))}),Bt(this,"onMouseMove",Jt=>{const ln=(bn,Rn,Dn)=>bn+Rn<0?-bn:bn+Rn>Dn?Dn-bn:Rn;if(this.grabbedElem){const bn=this.getSVGPoint(Jt);if(this.grabbedElem===this.shape){const{x:Rn,y:Dn,width:Pn,height:cr}=$x(this.shape),{naturalWidth:Er,naturalHeight:Ar}=this.env.image,Wr=ln(Rn,bn.x-this.grabbedAt.x,Er-Pn),ii=ln(Dn,bn.y-this.grabbedAt.y,Ar-cr),ri=N_(this.shape).map(xi=>({x:xi.x+Wr,y:xi.y+ii}));this.grabbedAt=bn,this.setPoints(ri),ri.forEach((xi,Li)=>this.setHandleXY(this.handles[Li],xi.x,xi.y)),this.emit("update",M_(this.shape,this.env.image))}else{const Rn=this.handles.indexOf(this.grabbedElem),Dn=N_(this.shape).map((Pn,cr)=>cr===Rn?bn:Pn);this.setPoints(Dn),this.setHandleXY(this.handles[Rn],bn.x,bn.y),this.emit("update",M_(this.shape,this.env.image))}}}),Bt(this,"onMouseUp",Jt=>{this.grabbedElem=null,this.grabbedAt=null}),Bt(this,"updateState",Jt=>{const ln=km(Jt).getAttribute("points").split(" ").map(bn=>{const[Rn,Dn]=bn.split(",").map(Pn=>parseFloat(Pn.trim()));return{x:Rn,y:Dn}});this.setPoints(ln),ln.forEach((bn,Rn)=>this.setHandleXY(this.handles[Rn],bn.x,bn.y))}),Bt(this,"destroy",()=>{this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp),this.containerGroup=document.createElementNS(Ls,"g"),this.shape=Db(Mt),this.shape.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.shape)),this.mask=new Bb(Ut.image,this.shape.querySelector(".a9s-inner")),this.containerGroup.appendChild(this.mask.element),this.elementGroup=document.createElementNS(Ls,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.elementGroup.appendChild(this.shape),this.handles=N_(this.shape).map(Jt=>{const ln=this.drawHandle(Jt.x,Jt.y);return ln.addEventListener("mousedown",this.onGrab(ln)),this.elementGroup.appendChild(ln),ln}),this.containerGroup.appendChild(this.elementGroup),zt.appendChild(this.containerGroup),cv(this.shape,Mt,Ht.formatter),this.grabbedElem=null,this.grabbedAt=null}get element(){return this.elementGroup}}class D_ extends $_{constructor(Mt,zt,Ht){super(Mt,zt,Ht),Bt(this,"startDrawing",(Ut,Jt,ln)=>{this._isDrawing=!0,this._startOnSingleClick=ln,this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp,dblClick:this.onDblClick}),this.rubberband=new Ox([Ut,Jt],this.g,this.env)}),Bt(this,"stop",()=>{this.detachListeners(),this._isDrawing=!1,this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Bt(this,"onMouseMove",(Ut,Jt)=>this.rubberband.dragTo([Ut,Jt])),Bt(this,"onMouseUp",()=>{const{width:Ut,height:Jt}=this.rubberband.getBoundingClientRect(),ln=this.config.minSelectionWidth||4,bn=this.config.minSelectionHeight||4;Ut>=ln||Jt>=bn?this.rubberband.addPoint():this._startOnSingleClick||(this.emit("cancel"),this.stop())}),Bt(this,"onDblClick",()=>{this._isDrawing=!1;const Ut=this.rubberband.element;Ut.annotation=this.rubberband.toSelection(),this.emit("complete",Ut),this.stop()}),Bt(this,"createEditableShape",Ut=>new Rx(Ut,this.g,this.config,this.env)),this._isDrawing=!1,this._startOnSingleClick=!1}get isDrawing(){return this._isDrawing}}D_.identifier="polygon",D_.supports=It=>{var Mt;const zt=It.selector("SvgSelector");if(zt)return(Mt=zt.value)==null?void 0:Mt.match(/^<svg.*<polygon/g)};class Mx extends Wa{constructor(Mt,zt,Ht){super(),Bt(this,"listTools",()=>this._registered.map(Ut=>Ut.identifier)),Bt(this,"registerTool",Ut=>{const Jt=Ut.identifier;this.listTools().includes(Jt)&&this.unregisterTool(Jt),this._registered.push(Ut)}),Bt(this,"unregisterTool",Ut=>this._registered=this._registered.filter(Jt=>Jt.identifier!==Ut)),Bt(this,"setCurrent",Ut=>{const Jt=typeof Ut=="string"||Ut instanceof String?this._registered.find(ln=>ln.identifier===Ut):Ut;this._current=new Jt(this._g,this._config,this._env),this._current.on("startSelection",ln=>this.emit("startSelection",ln)),this._current.on("complete",ln=>this.emit("complete",ln)),this._current.on("cancel",ln=>this.emit("cancel",ln))}),Bt(this,"forAnnotation",Ut=>{var Jt;const[ln,...bn]=Ut.targets,Rn=(Jt=ln.renderedVia)==null?void 0:Jt.name,Dn=Rn?this._registered.find(Pn=>Pn.identifier===Rn):this._registered.find(Pn=>Pn.supports(Ut));return Dn?new Dn(this._g,this._config,this._env):null}),this._g=Mt,this._config=zt,this._env=Ht,this._registered=[uv,D_],this.setCurrent(uv)}get current(){return this._current}}class Nx{constructor(Mt,zt,Ht){this.svg=Mt.closest("svg"),this.g=document.createElementNS(Ls,"g"),this.g.setAttribute("class","a9s-crosshair");const Ut=document.createElementNS(Ls,"line"),Jt=document.createElementNS(Ls,"line");this.g.appendChild(Ut),this.g.appendChild(Jt),Mt.appendChild(this.g);const ln=bn=>{const Rn=this.svg.getBoundingClientRect(),Dn=bn.clientX-Rn.x,Pn=bn.clientY-Rn.y,cr=this.svg.createSVGPoint(),{left:Er,top:Ar}=this.svg.getBoundingClientRect();return cr.x=Dn+Er,cr.y=Pn+Ar,cr.matrixTransform(Mt.getScreenCTM().inverse())};this.svg.addEventListener("mousemove",bn=>{const{x:Rn,y:Dn}=ln(bn);Ut.setAttribute("x1",0),Ut.setAttribute("y1",Dn),Ut.setAttribute("x2",zt),Ut.setAttribute("y2",Dn),Jt.setAttribute("x1",Rn),Jt.setAttribute("y1",0),Jt.setAttribute("x2",Rn),Jt.setAttribute("y2",Ht)})}}const Dx={FragmentSelector:I_,SvgSelector:Db},Bx={FragmentSelector:_x,SvgSelector:kx},Fb=It=>{const Mt=It.targets[0];if(Mt)return Array.isArray(Mt.selector)?Mt.selector[0]:Mt.selector},B_=(It,Mt)=>Dx[Fb(It).type](It,Mt),zb=(It,Mt)=>Bx[Fb(It).type](It,Mt);function Fx(It,Mt,zt,Ht,Ut){Hb(It,Mt,zt||0,Ht||It.length-1,Ut||zx)}function Hb(It,Mt,zt,Ht,Ut){for(;Ht>zt;){if(Ht-zt>600){var Jt=Ht-zt+1,ln=Mt-zt+1,bn=Math.log(Jt),Rn=.5*Math.exp(2*bn/3),Dn=.5*Math.sqrt(bn*Rn*(Jt-Rn)/Jt)*(ln-Jt/2<0?-1:1),Pn=Math.max(zt,Math.floor(Mt-ln*Rn/Jt+Dn)),cr=Math.min(Ht,Math.floor(Mt+(Jt-ln)*Rn/Jt+Dn));Hb(It,Mt,Pn,cr,Ut)}var Er=It[Mt],Ar=zt,Wr=Ht;for(h1(It,zt,Mt),Ut(It[Ht],Er)>0&&h1(It,zt,Ht);Ar<Wr;){for(h1(It,Ar,Wr),Ar++,Wr--;Ut(It[Ar],Er)<0;)Ar++;for(;Ut(It[Wr],Er)>0;)Wr--}Ut(It[zt],Er)===0?h1(It,zt,Wr):(Wr++,h1(It,Wr,Ht)),Wr<=Mt&&(zt=Wr+1),Mt<=Wr&&(Ht=Wr-1)}}function h1(It,Mt,zt){var Ht=It[Mt];It[Mt]=It[zt],It[zt]=Ht}function zx(It,Mt){return It<Mt?-1:It>Mt?1:0}class Hx{constructor(Mt=9){this._maxEntries=Math.max(4,Mt),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(Mt){let zt=this.data;const Ht=[];if(!dv(Mt,zt))return Ht;const Ut=this.toBBox,Jt=[];for(;zt;){for(let ln=0;ln<zt.children.length;ln++){const bn=zt.children[ln],Rn=zt.leaf?Ut(bn):bn;dv(Mt,Rn)&&(zt.leaf?Ht.push(bn):z_(Mt,Rn)?this._all(bn,Ht):Jt.push(bn))}zt=Jt.pop()}return Ht}collides(Mt){let zt=this.data;if(!dv(Mt,zt))return!1;const Ht=[];for(;zt;){for(let Ut=0;Ut<zt.children.length;Ut++){const Jt=zt.children[Ut],ln=zt.leaf?this.toBBox(Jt):Jt;if(dv(Mt,ln)){if(zt.leaf||z_(Mt,ln))return!0;Ht.push(Jt)}}zt=Ht.pop()}return!1}load(Mt){if(!(Mt&&Mt.length))return this;if(Mt.length<this._minEntries){for(let Ht=0;Ht<Mt.length;Ht++)this.insert(Mt[Ht]);return this}let zt=this._build(Mt.slice(),0,Mt.length-1,0);if(!this.data.children.length)this.data=zt;else if(this.data.height===zt.height)this._splitRoot(this.data,zt);else{if(this.data.height<zt.height){const Ht=this.data;this.data=zt,zt=Ht}this._insert(zt,this.data.height-zt.height-1,!0)}return this}insert(Mt){return Mt&&this._insert(Mt,this.data.height-1),this}clear(){return this.data=Lm([]),this}remove(Mt,zt){if(!Mt)return this;let Ht=this.data;const Ut=this.toBBox(Mt),Jt=[],ln=[];let bn,Rn,Dn;for(;Ht||Jt.length;){if(Ht||(Ht=Jt.pop(),Rn=Jt[Jt.length-1],bn=ln.pop(),Dn=!0),Ht.leaf){const Pn=jx(Mt,Ht.children,zt);if(Pn!==-1)return Ht.children.splice(Pn,1),Jt.push(Ht),this._condense(Jt),this}!Dn&&!Ht.leaf&&z_(Ht,Ut)?(Jt.push(Ht),ln.push(bn),bn=0,Rn=Ht,Ht=Ht.children[0]):Rn?(bn++,Ht=Rn.children[bn],Dn=!1):Ht=null}return this}toBBox(Mt){return Mt}compareMinX(Mt,zt){return Mt.minX-zt.minX}compareMinY(Mt,zt){return Mt.minY-zt.minY}toJSON(){return this.data}fromJSON(Mt){return this.data=Mt,this}_all(Mt,zt){const Ht=[];for(;Mt;)Mt.leaf?zt.push(...Mt.children):Ht.push(...Mt.children),Mt=Ht.pop();return zt}_build(Mt,zt,Ht,Ut){const Jt=Ht-zt+1;let ln=this._maxEntries,bn;if(Jt<=ln)return bn=Lm(Mt.slice(zt,Ht+1)),Am(bn,this.toBBox),bn;Ut||(Ut=Math.ceil(Math.log(Jt)/Math.log(ln)),ln=Math.ceil(Jt/Math.pow(ln,Ut-1))),bn=Lm([]),bn.leaf=!1,bn.height=Ut;const Rn=Math.ceil(Jt/ln),Dn=Rn*Math.ceil(Math.sqrt(ln));jb(Mt,zt,Ht,Dn,this.compareMinX);for(let Pn=zt;Pn<=Ht;Pn+=Dn){const cr=Math.min(Pn+Dn-1,Ht);jb(Mt,Pn,cr,Rn,this.compareMinY);for(let Er=Pn;Er<=cr;Er+=Rn){const Ar=Math.min(Er+Rn-1,cr);bn.children.push(this._build(Mt,Er,Ar,Ut-1))}}return Am(bn,this.toBBox),bn}_chooseSubtree(Mt,zt,Ht,Ut){for(;Ut.push(zt),!(zt.leaf||Ut.length-1===Ht);){let Jt=1/0,ln=1/0,bn;for(let Rn=0;Rn<zt.children.length;Rn++){const Dn=zt.children[Rn],Pn=F_(Dn),cr=Gx(Mt,Dn)-Pn;cr<ln?(ln=cr,Jt=Pn<Jt?Pn:Jt,bn=Dn):cr===ln&&Pn<Jt&&(Jt=Pn,bn=Dn)}zt=bn||zt.children[0]}return zt}_insert(Mt,zt,Ht){const Ut=Ht?Mt:this.toBBox(Mt),Jt=[],ln=this._chooseSubtree(Ut,this.data,zt,Jt);for(ln.children.push(Mt),f1(ln,Ut);zt>=0&&Jt[zt].children.length>this._maxEntries;)this._split(Jt,zt),zt--;this._adjustParentBBoxes(Ut,Jt,zt)}_split(Mt,zt){const Ht=Mt[zt],Ut=Ht.children.length,Jt=this._minEntries;this._chooseSplitAxis(Ht,Jt,Ut);const ln=this._chooseSplitIndex(Ht,Jt,Ut),bn=Lm(Ht.children.splice(ln,Ht.children.length-ln));bn.height=Ht.height,bn.leaf=Ht.leaf,Am(Ht,this.toBBox),Am(bn,this.toBBox),zt?Mt[zt-1].children.push(bn):this._splitRoot(Ht,bn)}_splitRoot(Mt,zt){this.data=Lm([Mt,zt]),this.data.height=Mt.height+1,this.data.leaf=!1,Am(this.data,this.toBBox)}_chooseSplitIndex(Mt,zt,Ht){let Ut,Jt=1/0,ln=1/0;for(let bn=zt;bn<=Ht-zt;bn++){const Rn=d1(Mt,0,bn,this.toBBox),Dn=d1(Mt,bn,Ht,this.toBBox),Pn=Wx(Rn,Dn),cr=F_(Rn)+F_(Dn);Pn<Jt?(Jt=Pn,Ut=bn,ln=cr<ln?cr:ln):Pn===Jt&&cr<ln&&(ln=cr,Ut=bn)}return Ut||Ht-zt}_chooseSplitAxis(Mt,zt,Ht){const Ut=Mt.leaf?this.compareMinX:Vx,Jt=Mt.leaf?this.compareMinY:Ux,ln=this._allDistMargin(Mt,zt,Ht,Ut),bn=this._allDistMargin(Mt,zt,Ht,Jt);ln<bn&&Mt.children.sort(Ut)}_allDistMargin(Mt,zt,Ht,Ut){Mt.children.sort(Ut);const Jt=this.toBBox,ln=d1(Mt,0,zt,Jt),bn=d1(Mt,Ht-zt,Ht,Jt);let Rn=hv(ln)+hv(bn);for(let Dn=zt;Dn<Ht-zt;Dn++){const Pn=Mt.children[Dn];f1(ln,Mt.leaf?Jt(Pn):Pn),Rn+=hv(ln)}for(let Dn=Ht-zt-1;Dn>=zt;Dn--){const Pn=Mt.children[Dn];f1(bn,Mt.leaf?Jt(Pn):Pn),Rn+=hv(bn)}return Rn}_adjustParentBBoxes(Mt,zt,Ht){for(let Ut=Ht;Ut>=0;Ut--)f1(zt[Ut],Mt)}_condense(Mt){for(let zt=Mt.length-1,Ht;zt>=0;zt--)Mt[zt].children.length===0?zt>0?(Ht=Mt[zt-1].children,Ht.splice(Ht.indexOf(Mt[zt]),1)):this.clear():Am(Mt[zt],this.toBBox)}}function jx(It,Mt,zt){if(!zt)return Mt.indexOf(It);for(let Ht=0;Ht<Mt.length;Ht++)if(zt(It,Mt[Ht]))return Ht;return-1}function Am(It,Mt){d1(It,0,It.children.length,Mt,It)}function d1(It,Mt,zt,Ht,Ut){Ut||(Ut=Lm(null)),Ut.minX=1/0,Ut.minY=1/0,Ut.maxX=-1/0,Ut.maxY=-1/0;for(let Jt=Mt;Jt<zt;Jt++){const ln=It.children[Jt];f1(Ut,It.leaf?Ht(ln):ln)}return Ut}function f1(It,Mt){return It.minX=Math.min(It.minX,Mt.minX),It.minY=Math.min(It.minY,Mt.minY),It.maxX=Math.max(It.maxX,Mt.maxX),It.maxY=Math.max(It.maxY,Mt.maxY),It}function Vx(It,Mt){return It.minX-Mt.minX}function Ux(It,Mt){return It.minY-Mt.minY}function F_(It){return(It.maxX-It.minX)*(It.maxY-It.minY)}function hv(It){return It.maxX-It.minX+(It.maxY-It.minY)}function Gx(It,Mt){return(Math.max(Mt.maxX,It.maxX)-Math.min(Mt.minX,It.minX))*(Math.max(Mt.maxY,It.maxY)-Math.min(Mt.minY,It.minY))}function Wx(It,Mt){const zt=Math.max(It.minX,Mt.minX),Ht=Math.max(It.minY,Mt.minY),Ut=Math.min(It.maxX,Mt.maxX),Jt=Math.min(It.maxY,Mt.maxY);return Math.max(0,Ut-zt)*Math.max(0,Jt-Ht)}function z_(It,Mt){return It.minX<=Mt.minX&&It.minY<=Mt.minY&&Mt.maxX<=It.maxX&&Mt.maxY<=It.maxY}function dv(It,Mt){return Mt.minX<=It.maxX&&Mt.minY<=It.maxY&&Mt.maxX>=It.minX&&Mt.maxY>=It.minY}function Lm(It){return{children:It,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jb(It,Mt,zt,Ht,Ut){const Jt=[Mt,zt];for(;Jt.length;){if(zt=Jt.pop(),Mt=Jt.pop(),zt-Mt<=Ht)continue;const ln=Mt+Math.ceil((zt-Mt)/Ht/2)*Ht;Fx(It,ln,Mt,zt,Ut),Jt.push(Mt,ln,ln,zt)}}const Vb=It=>{const Mt=B_(It),zt=document.createElementNS(Ls,"svg");zt.style.position="absolute",zt.style.opacity=0,zt.style.top=0,zt.style.left=0,zt.appendChild(Mt),document.body.appendChild(zt);const{x:Ht,y:Ut,width:Jt,height:ln}=Mt.getBBox();return document.body.removeChild(zt),{minX:Ht,minY:Ut,maxX:Ht+Jt,maxY:Ut+ln}};class qx{constructor(Mt){Bt(this,"getAnnotationAt",(zt,Ht,Ut)=>{const Jt=Ut?5/Ut:5,ln=this.spatial_index.search({minX:zt-Jt,minY:Ht-Jt,maxX:zt+Jt,maxY:Ht+Jt}).map(bn=>bn.annotation);if(ln.length>0)return ln.sort((bn,Rn)=>zb(bn,this.env.image)-zb(Rn,this.env.image)),ln[0]}),Bt(this,"getAnnotationsIntersecting",zt=>this.spatial_index.search(zt).map(Ht=>Ht.annotation)),Bt(this,"insert",zt=>{(Array.isArray(zt)?zt:[zt]).forEach(Ht=>{this.spatial_index.insert(Rt(Pt({},Vb(Ht)),{annotation:Ht}))})}),Bt(this,"remove",zt=>{const Ht=Rt(Pt({},Vb(zt)),{annotation:zt});this.spatial_index.remove(Ht,(Ut,Jt)=>Ut.annotation.id===Jt.annotation.id)}),this.env=Mt,this.spatial_index=new Hx}}const Yx=(It,Mt)=>{const zt=A_(Mt,".a9s-annotation")?Mt:Mt.querySelector(".a9s-annotation"),{canvas:Ht}=It.drawer,Ut=Ht.getBoundingClientRect(),Jt=Ht.width/Ut.width,ln=Ht.height/Ut.height,bn=zt.getBoundingClientRect(),Rn=bn.x-Ut.x,Dn=bn.y-Ut.y,{width:Pn,height:cr}=bn,Er=document.createElement("CANVAS"),Ar=Er.getContext("2d");Er.width=Pn,Er.height=cr,Ar.drawImage(Ht,Rn*Jt,Dn*ln,Pn*Jt,cr*ln,0,0,Pn,cr);const Wr=It.viewport.viewportToImageCoordinates(bn.x,bn.y),ii=It.viewport.viewportToImageZoom(It.viewport.getZoom());return{snippet:Er,transform:ri=>{const xi=Wr.x+ri[0]/Jt/ii,Li=Wr.y+ri[1]/ln/ii;return[xi,Li]}}},Xx=O_();class Ub extends Wa{constructor(Mt){super(),Bt(this,"_getShapeAt",Ht=>{const Ut=Rn=>{const Dn=this.svg.createSVGPoint();if(window.TouchEvent&&Rn instanceof TouchEvent){const Pn=this.svg.getBoundingClientRect(),cr=Rn.touches[0],Er=cr.clientX-Pn.x,Ar=cr.clientY-Pn.y,{left:Wr,top:ii}=this.svg.getBoundingClientRect();return Dn.x=Er+Wr,Dn.y=Ar+ii,Dn.matrixTransform(this.g.getScreenCTM().inverse())}else return Dn.x=Rn.offsetX,Dn.y=Rn.offsetY,Dn.matrixTransform(this.g.getCTM().inverse())},{x:Jt,y:ln}=Ut(Ht),bn=this.store.getAnnotationAt(Jt,ln,this.currentScale());if(bn)return this.findShape(bn)}),Bt(this,"_initDrawingTools",Ht=>{this.tools=new Mx(this.g,this.config,this.env),this.tools.on("complete",this.onDrawingComplete);let Ut=!1;this.mouseTracker=new Zt.default.MouseTracker({element:this.svg,pressHandler:Jt=>{this.tools.current.isDrawing||(this.tools.current.start(Jt.originalEvent,this.drawOnSingleClick&&!this.hoveredShape),Ht||this.scaleTool(this.tools.current))},moveHandler:Jt=>{if(this.tools.current.isDrawing){const{x:ln,y:bn}=this.tools.current.getSVGPoint(Jt.originalEvent);this.tools.current.onMouseMove(ln,bn,Jt.originalEvent),Ut||(this.emit("startSelection",{x:ln,y:bn}),Ut=!0)}},releaseHandler:Jt=>{if(this.tools.current.isDrawing){const{x:ln,y:bn}=this.tools.current.getSVGPoint(Jt.originalEvent);this.tools.current.onMouseUp(ln,bn,Jt.originalEvent)}Ut=!1}}).setTracking(!1),this.onKeyDown&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyUp&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyDown=Jt=>{Jt.which===16&&!this.selectedShape&&this.mouseTracker.setTracking(!this.readOnly)},this.onKeyUp=Jt=>{Jt.which===16&&!this.tools.current.isDrawing&&this.mouseTracker.setTracking(!1)},document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)}),Bt(this,"_initMouseEvents",()=>{let Ht=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom;this.svg.addEventListener("mousemove",ln=>{var bn,Rn;if(!((bn=this.tools)!=null&&bn.current.isDrawing)&&!ln.target.closest(".a9s-annotation.editable.selected")){const Dn=this._getShapeAt(ln);if((Dn==null?void 0:Dn.annotation)!==((Rn=this.hoveredShape)==null?void 0:Rn.annotation)){if(this.hoveredShape){this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=Ht;const Pn=this.hoveredShape.element||this.hoveredShape;mx(Pn,"hover"),this.emit("mouseLeaveAnnotation",this.hoveredShape.annotation,this.hoveredShape)}Dn&&(Ht=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom,this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=!1,ip(Dn,"hover"),this.emit("mouseEnterAnnotation",Dn.annotation,Dn))}this.hoveredShape=Dn}});let Ut=null;new Zt.default.MouseTracker({element:this.viewer.canvas,pressHandler:()=>{Ut=new Date().getTime()}}),this.svg.addEventListener("mousedown",()=>{Ut=new Date().getTime()});const Jt=ln=>{var bn;if(!(((bn=this.tools.current)==null?void 0:bn.isDrawing)||this.disableSelect)&&new Date().getTime()-Ut<250){const Rn=ln.target.closest(".a9s-annotation.editable.selected")?this.selectedShape:this._getShapeAt(ln);Rn?this.selectShape(Rn):Rn||(this.deselect(),this.emit("select",{}))}this.disableSelect&&this.emit("clickAnnotation",this.hoveredShape.annotation,this.hoveredShape)};this.svg.addEventListener("click",Jt),this.svg.addEventListener("touchstart",Jt)}),Bt(this,"_refreshNonScalingAnnotations",()=>{const Ht=this.currentScale();Array.from(this.svg.querySelectorAll(".a9s-non-scaling")).forEach(Ut=>Ut.setAttribute("transform",`scale(${1/Ht})`))}),Bt(this,"addAnnotation",(Ht,Ut)=>{const Jt=Ut||this.g,ln=B_(Ht,this.env.image);return ip(ln,"a9s-annotation"),ln.setAttribute("data-id",Ht.id),ln.annotation=Ht,Jt.appendChild(ln),cv(ln,Ht,this.formatter),this.scaleFormatterElements(ln),ln}),Bt(this,"addDrawingTool",Ht=>this.tools.registerTool(Ht)),Bt(this,"addOrUpdateAnnotation",(Ht,Ut)=>{var Jt,ln;(((Jt=this.selectedShape)==null?void 0:Jt.annotation)===Ht||((ln=this.selectedShape)==null?void 0:ln.annotation)==Ut)&&this.deselect(),Ut&&this.removeAnnotation(Ht),this.removeAnnotation(Ht);const bn=this.addAnnotation(Ht);A_(bn,"a9s-non-scaling")&&bn.setAttribute("transform",`scale(${1/this.currentScale()})`),this.store.insert(Ht)}),Bt(this,"currentScale",()=>{const Ht=this.viewer.viewport.getContainerSize().x;return this.viewer.viewport.getZoom(!0)*Ht/this.viewer.world.getContentFactor()}),Bt(this,"deselect",()=>{var Ht;if((Ht=this.tools)==null||Ht.current.stop(),this.selectedShape){const{annotation:Ut}=this.selectedShape;if(this.selectedShape.destroy&&(this.selectedShape.mouseTracker.destroy(),this.selectedShape.destroy(),!Ut.isSelection)){const Jt=this.addAnnotation(Ut);A_(Jt,"a9s-non-scaling")&&Jt.setAttribute("transform",`scale(${1/this.currentScale()})`)}this.selectedShape=null}}),Bt(this,"destroy",()=>{this.deselect(),this.svg.parentNode.removeChild(this.svg)}),Bt(this,"findShape",Ht=>{const Ut=Ht!=null&&Ht.id?Ht.id:Ht;return this.g.querySelector(`.a9s-annotation[data-id="${Ut}"]`)}),Bt(this,"fitBounds",(Ht,Ut)=>{const Jt=this.findShape(Ht);if(Jt){const{x:ln,y:bn,width:Rn,height:Dn}=Jt.getBBox(),Pn=this.viewer.viewport.imageToViewportRectangle(ln,bn,Rn,Dn);this.viewer.viewport.fitBounds(Pn,Ut)}}),Bt(this,"getAnnotations",()=>Array.from(this.g.querySelectorAll(".a9s-annotation")).map(Ht=>Ht.annotation)),Bt(this,"getSelectedImageSnippet",()=>{var Ht;if(this.selectedShape){const Ut=(Ht=this.selectedShape.element)!=null?Ht:this.selectedShape;return Yx(this.viewer,Ut)}}),Bt(this,"init",Ht=>{this.deselect(),Array.from(this.g.querySelectorAll(".a9s-annotation")).forEach(Ut=>this.g.removeChild(Ut)),console.time("Took"),console.log("Drawing..."),this.loaded||(this.g.style.display="none"),Ht.forEach(Ut=>this.addAnnotation(Ut)),console.log("Indexing..."),this.store.insert(Ht),console.timeEnd("Took"),this.resize()}),Bt(this,"listDrawingTools",()=>this.tools.listTools()),Bt(this,"overrideId",(Ht,Ut)=>{const Jt=this.findShape(Ht);Jt.setAttribute("data-id",Ut);const{annotation:ln}=Jt,bn=ln.clone({id:Ut});return Jt.annotation=bn,this.store.remove(ln),this.store.insert(bn),bn}),Bt(this,"panTo",(Ht,Ut)=>{const Jt=this.findShape(Ht);if(Jt){const{top:ln,left:bn,width:Rn,height:Dn}=Jt.getBoundingClientRect(),Pn=bn+Rn/2+window.scrollX,cr=ln+Dn/2+window.scrollY,Er=this.viewer.viewport.windowToViewportCoordinates(new Zt.default.Point(Pn,cr));this.viewer.viewport.panTo(Er,Ut)}}),Bt(this,"removeAnnotation",Ht=>{var Ut,Jt;const ln=Ht.type?Ht.id:Ht;((Ut=this.selectedShape)==null?void 0:Ut.annotation.id)===ln&&this.deselect();const bn=this.findShape(Ht);if(bn){const{annotation:Rn}=bn;((Jt=this.selectedShape)==null?void 0:Jt.annotation)===Rn&&this.deselect(),bn.parentNode.removeChild(bn),this.store.remove(Rn)}}),Bt(this,"removeDrawingTool",Ht=>{var Ut;return(Ut=this.tools)==null?void 0:Ut.unregisterTool(Ht)}),Bt(this,"scaleFormatterElements",Ht=>{const Ut=1/this.currentScale();if(Ht){const Jt=Ht.querySelector(".a9s-formatter-el");Jt&&Jt.firstChild.setAttribute("transform",`scale(${Ut})`)}else Array.from(this.g.querySelectorAll(".a9s-formatter-el")).forEach(Jt=>Jt.firstChild.setAttribute("transform",`scale(${Ut})`))}),Bt(this,"scaleTool",Ht=>{if(Ht){const Ut=1/this.currentScale();Ht.scale=Ut,Ht.onScaleChanged&&Ht.onScaleChanged(Ut)}}),Bt(this,"selectAnnotation",(Ht,Ut)=>{this.selectedShape&&this.deselect();const Jt=this.findShape(Ht);if(Jt){this.selectShape(Jt,Ut);const ln=this.selectedShape.element?this.selectedShape.element:this.selectedShape;return{annotation:Jt.annotation,element:ln}}else this.deselect()}),Bt(this,"selectShape",(Ht,Ut)=>{var Jt;if(!Ut&&!Ht.annotation.isSelection&&this.emit("clickAnnotation",Ht.annotation,Ht),((Jt=this.selectedShape)==null?void 0:Jt.annotation)===Ht.annotation)return;this.selectedShape&&this.selectedShape.annotation!==Ht.annotation&&this.deselect();const{annotation:ln}=Ht;if(this.readOnly||ln.readOnly||this.headless)this.selectedShape=Ht,Ut||this.emit("select",{annotation:ln,element:Ht,skipEvent:Ut});else{const bn=this.tools.forAnnotation(ln);if(bn){setTimeout(()=>{Ht.parentNode.removeChild(Ht),Ut||this.emit("select",{annotation:ln,element:this.selectedShape.element})},1),this.selectedShape=bn.createEditableShape(ln),this.scaleTool(this.selectedShape),this.scaleFormatterElements(this.selectedShape.element),this.selectedShape.element.annotation=ln;const Rn=new Zt.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",()=>{this.hoveredShape=this.selectedShape,Rn.setTracking(!0)}),this.selectedShape.element.addEventListener("mouseleave",()=>{this.hoveredShape=null,Rn.setTracking(!1)}),this.selectedShape.mouseTracker=Rn,this.selectedShape.on("update",Dn=>this.emit("updateTarget",this.selectedShape.element,Dn))}else this.selectedShape=Ht,Ut||this.emit("select",{annotation:ln,element:this.selectedShape})}}),Bt(this,"setDrawingEnabled",Ht=>{var Ut;return(Ut=this.mouseTracker)==null?void 0:Ut.setTracking(Ht&&!this.readOnly)}),Bt(this,"setDrawingTool",Ht=>{var Ut;this.tools&&((Ut=this.tools.current)==null||Ut.stop(),this.tools.setCurrent(Ht))}),Bt(this,"setVisible",Ht=>{Ht?this.svg.style.display=null:(this.deselect(),this.svg.style.display="none")}),Bt(this,"stopDrawing",()=>{var Ht,Ut;return(Ut=(Ht=this.tools)==null?void 0:Ht.current)==null?void 0:Ut.stop()}),this.viewer=Mt.viewer,this.config=Mt.config,this.env=Mt.env,this.readOnly=Mt.config.readOnly,this.headless=Mt.config.headless,this.formatter=Mt.config.formatter,this.disableSelect=Mt.disableSelect,this.drawOnSingleClick=Mt.config.drawOnSingleClick,this.svg=document.createElementNS(Ls,"svg"),Xx?(this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer touch"),wx(this.svg)):this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer"),this.g=document.createElementNS(Ls,"g"),this.svg.appendChild(this.g),this.viewer.canvas.appendChild(this.svg),this.viewer.addHandler("animation",()=>this.resize()),this.viewer.addHandler("rotate",()=>this.resize()),this.viewer.addHandler("resize",()=>this.resize()),this.viewer.addHandler("flip",()=>this.resize()),this.loaded=!1;const zt=()=>{const{x:Ht,y:Ut}=this.viewer.world.getItemAt(0).source.dimensions;this.env.image={src:this.viewer.world.getItemAt(0).source["@id"]||new URL(this.viewer.world.getItemAt(0).source.url,document.baseURI).href,naturalWidth:Ht,naturalHeight:Ut},Mt.config.crosshair&&(this.crosshair=new Nx(this.g,Ht,Ut),ip(this.svg,"has-crosshair")),this.loaded=!0,this.g.style.display="inline",this.resize()};this.viewer.addHandler("open",zt),this.viewer.world.addHandler("add-item",zt),this.viewer.world.getItemAt(0)&&zt(),this.store=new qx(this.env),this.selectedShape=null,this.hoveredShape=null,this._initMouseEvents()}resize(){var Mt;const zt=this.viewer.viewport.getFlip(),Ht=this.viewer.viewport.pixelFromPoint(new Zt.default.Point(0,0),!0);zt&&(Ht.x=this.viewer.viewport._containerInnerSize.x-Ht.x);const Ut=this.currentScale(),Jt=zt?-Ut:Ut,ln=this.viewer.viewport.getRotation();this.g.setAttribute("transform",`translate(${Ht.x}, ${Ht.y}) scale(${Jt}, ${Ut}) rotate(${ln})`),this._refreshNonScalingAnnotations(),this.scaleFormatterElements(),this.selectedShape&&(this.selectedShape.element?(this.scaleTool(this.selectedShape),this.emit("viewportChange",this.selectedShape.element)):this.emit("viewportChange",this.selectedShape)),(Mt=this.tools)!=null&&Mt.current.isDrawing&&this.scaleTool(this.tools.current)}}class Zx extends Ub{constructor(Mt){super(Mt),Bt(this,"onDrawingComplete",zt=>{this.selectShape(zt),this.emit("createSelection",zt.annotation),this.mouseTracker.setTracking(!1)}),this._initDrawingTools()}}const H_=It=>{const Mt=It.viewport.viewportToImageRectangle(It.viewport.getBounds(!0)),zt=It.viewport.getContainerSize().x,Ht=It.viewport.getZoom(!0)*zt/It.world.getContentFactor();return{extent:Mt,scale:Ht}},Kx=It=>{var Mt;const zt=It.targets[0];return zt?Array.isArray(zt.selector)?zt.selector[0].type:(Mt=zt.selector)==null?void 0:Mt.type:null},Gb=(It,Mt)=>{const{extent:zt,scale:Ht}=H_(It),{selector:Ut}=Mt,Jt=dg.create({target:Mt});if(Ut.type==="SvgSelector"){const ln=km(Jt),bn=ln.nodeName.toLowerCase();let Rn=null;if(bn==="polygon")Rn=Jx(ln,zt,Ht);else if(bn==="circle")Rn=Qx(ln,zt,Ht);else if(bn==="ellipse")Rn=ew(ln,zt,Ht);else if(bn==="path")Rn=tw(ln,zt,Ht);else throw`Unsupported SVG shape type: ${bn}`;let Dn=Rn.outerHTML||new XMLSerializer().serializeToString(Rn);return Dn=Dn.replace(` xmlns="${Ls}"`,""),Rt(Pt({},Mt),{selector:{type:"SvgSelector",value:`<svg>${Dn}</svg>`}})}else if(Ut.type==="FragmentSelector"){const{x:ln,y:bn,w:Rn,h:Dn}=fg(Jt),Pn=zt.x+ln/Ht,cr=zt.y+bn/Ht,Er=Rn/Ht,Ar=Dn/Ht;return u1(Pn,cr,Er,Ar)}else throw`Unsupported selector type: ${Ut.type}`},Jx=(It,Mt,zt)=>{const Ht=Array.from(It.points).map(Ut=>{const Jt=Mt.x+Ut.x/zt,ln=Mt.y+Ut.y/zt;return Jt+","+ln}).join(" ");return It.setAttribute("points",Ht),It},Qx=(It,Mt,zt)=>{const Ht=parseFloat(It.getAttribute("cx")),Ut=parseFloat(It.getAttribute("cy")),Jt=parseFloat(It.getAttribute("r"));return It.setAttribute("cx",Mt.x+Ht/zt),It.setAttribute("cy",Mt.y+Ut/zt),It.setAttribute("r",Jt/zt),It},ew=(It,Mt,zt)=>{const Ht=parseFloat(It.getAttribute("cx")),Ut=parseFloat(It.getAttribute("cy")),Jt=parseFloat(It.getAttribute("rx")),ln=parseFloat(It.getAttribute("ry"));return It.setAttribute("cx",Mt.x+Ht/zt),It.setAttribute("cy",Mt.y+Ut/zt),It.setAttribute("rx",Jt/zt),It.setAttribute("ry",ln/zt),It},tw=(It,Mt,zt)=>{const Ht=It.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Jt=Ut.substring(0,1);if(Jt.toLowerCase()==="z")return Jt;{const ln=Ut.substring(1).split(" ").map(Pn=>parseFloat(Pn.trim())),bn=Jt===Jt.toUpperCase(),Rn=bn?Mt.x+ln[0]/zt:ln[0]/zt,Dn=bn?Mt.y+ln[1]/zt:ln[1]/zt;return Jt+" "+Rn+" "+Dn}}).join(" ");return It.setAttribute("d",Ht),It},Wb=(It,Mt)=>{const{extent:zt,scale:Ht}=H_(It),Ut=Mt.selector("FragmentSelector");if(Mt.selector("SvgSelector")){const Jt=km(Mt),ln=Jt.nodeName.toLowerCase();let bn=null;if(ln==="polygon")bn=nw(Jt,zt,Ht);else if(ln==="circle")bn=rw(Jt,zt,Ht);else if(ln==="ellipse")bn=iw(Jt,zt,Ht);else if(ln==="path")bn=ow(Jt,zt,Ht);else throw`Unsupported SVG shape type: ${ln}`;let Rn=bn.outerHTML||new XMLSerializer().serializeToString(bn);Rn=Rn.replace(` xmlns="${Ls}"`,"");const Dn={selector:{type:"SvgSelector",value:`<svg>${Rn}</svg>`}};return Mt.clone({target:Dn})}else if(Ut){const{x:Jt,y:ln,w:bn,h:Rn}=fg(Mt),Dn=(Jt-zt.x)*Ht,Pn=(ln-zt.y)*Ht,cr=u1(Dn,Pn,bn*Ht,Rn*Ht);return Mt.clone({target:cr})}},nw=(It,Mt,zt)=>{const Ht=Array.from(It.points).map(Ut=>{const Jt=zt*(Ut.x-Mt.x),ln=zt*(Ut.y-Mt.y);return Jt+","+ln}).join(" ");return It.setAttribute("points",Ht),It},rw=(It,Mt,zt)=>{const Ht=It.getAttribute("cx"),Ut=It.getAttribute("cy"),Jt=It.getAttribute("r");return It.setAttribute("cx",zt*(Ht-Mt.x)),It.setAttribute("cy",zt*(Ut-Mt.y)),It.setAttribute("r",Jt*zt),It},iw=(It,Mt,zt)=>{const Ht=It.getAttribute("cx"),Ut=It.getAttribute("cy"),Jt=It.getAttribute("rx"),ln=It.getAttribute("ry");return It.setAttribute("cx",zt*(Ht-Mt.x)),It.setAttribute("cy",zt*(Ut-Mt.y)),It.setAttribute("rx",Jt*zt),It.setAttribute("ry",ln*zt),It},ow=(It,Mt,zt)=>{const Ht=It.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Jt=Ut.substring(0,1);if(Jt.toLowerCase()==="z")return Jt;{const ln=Ut.substring(1).split(" ").filter(Pn=>Pn).map(Pn=>parseFloat(Pn.trim())),bn=Jt===Jt.toUpperCase(),Rn=bn?zt*(ln[0]-Mt.x):zt*ln[0],Dn=bn?zt*(ln[1]-Mt.y):zt*ln[1];return Jt+" "+Rn+" "+Dn}}).join(" ");return It.setAttribute("d",Ht),It},qb=(It,Mt)=>{const{extent:zt,scale:Ht}=H_(It),Ut=Kx(Mt.annotation);if(Ut==="FragmentSelector")sw(Mt,zt,Ht);else if(Ut==="SvgSelector")aw(Mt,zt,Ht);else throw`Unsupported selector type type: ${Ut}`},sw=(It,Mt,zt)=>{const{x:Ht,y:Ut,w:Jt,h:ln}=fg(It.annotation),bn=It.querySelector(".a9s-outer"),Rn=It.querySelector(".a9s-inner"),Dn=zt*(Ht-Mt.x),Pn=zt*(Ut-Mt.y);Jt===0&&ln===0?[bn,Rn].forEach(cr=>{cr.setAttribute("cx",Dn),cr.setAttribute("cy",Pn)}):[bn,Rn].forEach(cr=>{cr.setAttribute("x",Dn),cr.setAttribute("y",Pn),cr.setAttribute("width",Jt*zt),cr.setAttribute("height",ln*zt)})},aw=(It,Mt,zt)=>{const Ht=km(It.annotation),Ut=Ht.nodeName.toLowerCase();if(Ut==="polygon")lw(It,Ht,Mt,zt);else if(Ut==="circle")cw(It,Ht,Mt,zt);else if(Ut==="ellipse")uw(It,Ht,Mt,zt);else if(Ut==="path")hw(It,Ht,Mt,zt);else throw`Unsupported SVG shape type: ${Ut}`},lw=(It,Mt,zt,Ht)=>{const Ut=Array.from(Mt.points).map(Jt=>{const ln=Ht*(Jt.x-zt.x),bn=Ht*(Jt.y-zt.y);return ln+","+bn}).join(" ");It.querySelector(".a9s-outer").setAttribute("points",Ut),It.querySelector(".a9s-inner").setAttribute("points",Ut)},cw=(It,Mt,zt,Ht)=>{const Ut=Ht*(Mt.getAttribute("cx")-zt.x),Jt=Ht*(Mt.getAttribute("cy")-zt.y),ln=Ht*Mt.getAttribute("r"),bn=It.querySelector(".a9s-outer");bn.setAttribute("cx",Ut),bn.setAttribute("cy",Jt),bn.setAttribute("r",ln);const Rn=It.querySelector(".a9s-inner");Rn.setAttribute("cx",Ut),Rn.setAttribute("cy",Jt),Rn.setAttribute("r",ln)},uw=(It,Mt,zt,Ht)=>{const Ut=Ht*(Mt.getAttribute("cx")-zt.x),Jt=Ht*(Mt.getAttribute("cy")-zt.y),ln=Ht*Mt.getAttribute("rx"),bn=Ht*Mt.getAttribute("ry"),Rn=It.querySelector(".a9s-outer");Rn.setAttribute("cx",Ut),Rn.setAttribute("cy",Jt),Rn.setAttribute("rx",ln),Rn.setAttribute("ry",bn);const Dn=It.querySelector(".a9s-inner");Dn.setAttribute("cx",Ut),Dn.setAttribute("cy",Jt),Dn.setAttribute("rx",ln),Dn.setAttribute("ry",bn)},hw=(It,Mt,zt,Ht)=>{const Ut=Mt.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Jt=>Jt.trim()).map(Jt=>{const ln=Jt.substring(0,1);if(ln.toLowerCase()==="z")return ln;{const bn=Jt.substring(1).split(" ").filter(cr=>cr).map(cr=>parseFloat(cr.trim())),Rn=ln===ln.toUpperCase(),Dn=Rn?Ht*(bn[0]-zt.x):Ht*bn[0],Pn=Rn?Ht*(bn[1]-zt.y):Ht*bn[1];return ln+" "+Dn+" "+Pn}}).join(" ");It.querySelector(".a9s-inner").setAttribute("d",Ut),It.querySelector(".a9s-outer").setAttribute("d",Ut)},dw=O_();class fw extends Ub{constructor(Mt){super(Mt),Bt(this,"onDrawingComplete",zt=>{const Ht=zt.annotation.clone({target:Gb(this.viewer,zt.annotation.target)});zt.annotation=Ht,this.selectShape(zt),this.emit("createSelection",zt.annotation),this.mouseTracker.setTracking(!1)}),Bt(this,"addAnnotation",(zt,Ht)=>{const Ut=Ht||this.g,Jt=B_(zt,this.env.image);return ip(Jt,"a9s-annotation"),Jt.setAttribute("data-id",zt.id),Jt.annotation=zt,qb(this.viewer,Jt),Ut.appendChild(Jt),cv(Jt,zt,this.formatter),Jt}),Bt(this,"_getShapeAt",zt=>{const Ht=Rn=>{if(dw){const Dn=this.svg.getBoundingClientRect(),Pn=Rn.clientX-Dn.x,cr=Rn.clientY-Dn.y;return new Zt.default.Point(Pn,cr)}else return new Zt.default.Point(Rn.offsetX,Rn.offsetY)},Ut=this.viewer.viewport.viewerElementToViewportCoordinates(Ht(zt)),{x:Jt,y:ln}=this.viewer.viewport.viewportToImageCoordinates(Ut.x,Ut.y),bn=this.store.getAnnotationAt(Jt,ln,this.currentScale());if(bn)return this.findShape(bn)}),Bt(this,"selectShape",(zt,Ht)=>{var Ut;if(!Ht&&!zt.annotation.isSelection&&this.emit("clickAnnotation",zt.annotation,zt),((Ut=this.selectedShape)==null?void 0:Ut.annotation)===zt.annotation)return;this.selectedShape&&this.selectedShape.annotation!==zt.annotation&&this.deselect(!0);const{annotation:Jt}=zt;if(this.readOnly||Jt.readOnly||this.headless)this.selectedShape=zt,Ht||this.emit("select",{annotation:Jt,element:zt,skipEvent:Ht});else{setTimeout(()=>{zt.parentNode.removeChild(zt),Ht||this.emit("select",{annotation:Jt,element:this.selectedShape.element})},1);const ln=this.tools.forAnnotation(Jt);this.selectedShape=ln.createEditableShape(Jt),this.selectedShape.element.annotation=Jt;const bn=Wb(this.viewer,Jt);this.selectedShape.updateState(bn);const Rn=new Zt.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",Dn=>Rn.setTracking(!0)),this.selectedShape.element.addEventListener("mouseleave",Dn=>Rn.setTracking(!1)),this.selectedShape.mouseTracker=Rn,this.selectedShape.on("update",Dn=>{const Pn=Gb(this.viewer,Dn);this.selectedShape.element.annotation=this.selectedShape.annotation.clone({target:Pn}),this.emit("updateTarget",this.selectedShape.element,Pn)})}}),this._initDrawingTools(!0)}resize(){const Mt=this.viewer.viewport.getBounds(!0),{x:zt,y:Ht,width:Ut,height:Jt}=this.viewer.viewport.viewportToImageRectangle(Mt),ln={minX:zt,minY:Ht,maxX:zt+Ut,maxY:Ht+Jt},bn=new Set(this.store.getAnnotationsIntersecting(ln).map(Rn=>Rn.id));if(bn.size>0&&Array.from(this.g.querySelectorAll(".a9s-annotation:not(.selected)")).forEach(Rn=>{bn.has(Rn.annotation.id)?(Rn.removeAttribute("visibility"),qb(this.viewer,Rn)):Rn.hasAttribute("visibility")||Rn.setAttribute("visibility","hidden")}),this.selectedShape)if(this.selectedShape.element){const Rn=Wb(this.viewer,this.selectedShape.element.annotation);this.selectedShape.updateState&&this.selectedShape.updateState(Rn),this.emit("viewportChange",this.selectedShape.element)}else this.emit("viewportChange",this.selectedShape)}}class pw extends hn{constructor(Mt){super(Mt),Bt(this,"clearState",zt=>this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,beforeHeadlessModify:null},zt)),Bt(this,"forwardEvent",(zt,Ht)=>{this.annotationLayer.on(zt,(Ut,Jt)=>{this.props[Ht](Ut.clone(),Jt)})}),Bt(this,"escapeKeyCancel",zt=>{if(zt.which===27){this.annotationLayer.stopDrawing();const{selectedAnnotation:Ht}=this.state;Ht&&(this.cancelSelected(),this.props.onCancelSelected(Ht))}}),Bt(this,"handleStartSelect",zt=>this.props.onSelectionStarted(zt)),Bt(this,"handleSelect",(zt,Ht)=>{this.state.editorDisabled?this.onHeadlessSelect(zt,Ht):this.onNormalSelect(zt,Ht)}),Bt(this,"onNormalSelect",(zt,Ht)=>{const{annotation:Ut,element:Jt}=zt;if(Ut){const ln=()=>{this.setState({selectedAnnotation:Ut,selectedDOMElement:Jt,modifiedTarget:null},()=>{Ht||(Ut.isSelection?this.props.onSelectionCreated(Ut.clone()):this.props.onAnnotationSelected(Ut.clone(),Jt))})},{selectedAnnotation:bn}=this.state;bn&&!bn.isEqual(Ut)?this.clearState(()=>{this.props.onCancelSelected(bn),ln()}):ln()}else{const{selectedAnnotation:ln}=this.state;ln?this.clearState(()=>this.props.onCancelSelected(ln)):this.clearState()}}),Bt(this,"onHeadlessSelect",(zt,Ht)=>{this.saveSelected().then(()=>{this.onNormalSelect(zt,Ht)})}),Bt(this,"handleUpdateTarget",(zt,Ht)=>{this.setState({selectedDOMElement:zt,modifiedTarget:Ht});const Ut=JSON.parse(JSON.stringify(Ht));this.props.onSelectionTargetChanged(Ut)}),Bt(this,"handleViewportChange",zt=>this.setState({selectedDOMElement:zt})),Bt(this,"overrideAnnotationId",zt=>Ht=>{const{id:Ut}=zt;this.state.selectedAnnotation?this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null},()=>{this.annotationLayer.overrideId(Ut,Ht)}):this.annotationLayer.overrideId(Ut,Ht)}),Bt(this,"onCreateOrUpdateAnnotation",(zt,Ht)=>(Ut,Jt)=>{let ln=Ut.isSelection?Ut.toAnnotation():Ut;ln=this.state.modifiedTarget?ln.clone({target:this.state.modifiedTarget}):ln.clone(),this.clearState(()=>{this.annotationLayer.deselect(),this.annotationLayer.addOrUpdateAnnotation(ln,Jt),Jt?this.props[zt](ln,Jt.clone()):this.props[zt](ln,this.overrideAnnotationId(Ut)),Ht&&Ht()})}),Bt(this,"onDeleteAnnotation",zt=>{this.clearState(),this.annotationLayer.removeAnnotation(zt),this.props.onAnnotationDeleted(zt)}),Bt(this,"onCancelAnnotation",(zt,Ht)=>{this.state.editorDisabled||this.annotationLayer.deselect(),this.props.onCancelSelected(zt),this.clearState(Ht)}),Bt(this,"addAnnotation",zt=>{var Ht;zt.id===((Ht=this.state.selectedAnnotation)==null?void 0:Ht.id)&&(this.annotationLayer.deselect(),this.clearState()),this.annotationLayer.addOrUpdateAnnotation(zt.clone())}),Bt(this,"addDrawingTool",zt=>this.annotationLayer.addDrawingTool(zt)),Bt(this,"cancelSelected",()=>new Promise(zt=>{this.annotationLayer.deselect(),this.state.selectedAnnotation?this.clearState(zt):zt()})),Bt(this,"fitBounds",(zt,Ht)=>this.annotationLayer.fitBounds(zt,Ht)),Bt(this,"getAnnotationById",zt=>{var Ht;return(Ht=this.annotationLayer.findShape(zt))==null?void 0:Ht.annotation}),Bt(this,"getAnnotations",()=>this.annotationLayer.getAnnotations().map(zt=>zt.clone())),Bt(this,"getSelected",()=>{var zt;if(this.state.selectedAnnotation)return this.state.editorDisabled?this.state.selectedAnnotation:(zt=this._editor.current)==null?void 0:zt.getCurrentAnnotation()}),Bt(this,"getSelectedImageSnippet",()=>this.annotationLayer.getSelectedImageSnippet()),Bt(this,"listDrawingTools",()=>this.annotationLayer.listDrawingTools()),Bt(this,"panTo",(zt,Ht)=>this.annotationLayer.panTo(zt,Ht)),Bt(this,"removeAnnotation",zt=>this.annotationLayer.removeAnnotation(zt)),Bt(this,"removeDrawingTool",zt=>this.annotationLayer.removeDrawingTool(zt)),Bt(this,"saveSelected",()=>new Promise(zt=>{const Ht=this.state.selectedAnnotation;if(Ht)if(Ht.isSelection)Ht.bodies.length>0||this.props.config.allowEmpty?this.onCreateOrUpdateAnnotation("onAnnotationCreated",zt)(Ht,Ht):(this.annotationLayer.deselect(),zt());else{const{beforeHeadlessModify:Ut,modifiedTarget:Jt}=this.state;Ut?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",zt)(Ht,Ut):Jt?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",zt)(Ht,Ht):this.onCancelAnnotation(Ht,zt)}else zt()})),Bt(this,"selectAnnotation",zt=>{const Ht=this.annotationLayer.selectAnnotation(zt,!0);if(Ht)return this.handleSelect(Ht,!0),Ht.annotation.clone();this.clearState()}),Bt(this,"setAnnotations",zt=>this.annotationLayer.init(zt.map(Ht=>Ht.clone()))),Bt(this,"setDrawingEnabled",zt=>this.annotationLayer.setDrawingEnabled(zt)),Bt(this,"setDrawingTool",zt=>this.annotationLayer.setDrawingTool(zt)),Bt(this,"setVisible",zt=>{this.annotationLayer.setVisible(zt),zt||this.clearState()}),Bt(this,"updateSelected",(zt,Ht)=>new Promise(Ut=>{this.state.selectedAnnotation&&(Ht?this.state.selectedAnnotation.isSelection?this.onCreateOrUpdateAnnotation("onAnnotationCreated",Ut)(zt):this.onCreateOrUpdateAnnotation("onAnnotationUpdated",Ut)(zt,this.state.selectedAnnotation):this.setState({selectedAnnotation:zt,beforeHeadlessModify:this.state.beforeHeadlessModify||this.state.selectedAnnotation},Ut))})),this.state={selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,readOnly:Mt.config.readOnly,editorDisabled:Mt.config.disableEditor,widgets:Mt.config.widgets,beforeHeadlessModify:null},this._editor=Ai.createRef()}componentDidMount(){this.annotationLayer=this.props.config.gigapixelMode?new fw(this.props):new Zx(this.props),this.annotationLayer.on("startSelection",this.handleStartSelect),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget),this.annotationLayer.on("viewportChange",this.handleViewportChange),this.forwardEvent("mouseEnterAnnotation","onMouseEnterAnnotation"),this.forwardEvent("mouseLeaveAnnotation","onMouseLeaveAnnotation"),this.forwardEvent("clickAnnotation","onClickAnnotation"),document.addEventListener("keyup",this.escapeKeyCancel)}componentWillUnmount(){this.annotationLayer.destroy(),document.removeEventListener("keyup",this.escapeKeyCancel)}get disableEditor(){return this.state.editorDisabled}set disableEditor(Mt){this.setState({editorDisabled:Mt},()=>{Mt?document.addEventListener("keyup",this.escapeKeyCancel):document.removeEventListener("keyup",this.escapeKeyCancel)})}get disableSelect(){return this.annotationLayer.disableSelect}set disableSelect(Mt){this.annotationLayer.disableSelect=Mt}get readOnly(){return this.state.readOnly}set readOnly(Mt){this.annotationLayer.readOnly=Mt,this.setState({readOnly:Mt})}get widgets(){return this.state.widgets}set widgets(Mt){this.setState({widgets:Mt})}render(){var Mt;const zt=this.state.selectedAnnotation&&!this.state.editorDisabled,Ht=this.state.readOnly||((Mt=this.state.selectedAnnotation)==null?void 0:Mt.readOnly);return zt&&cn(ax,{ref:this._editor,detachable:!0,wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,modifiedTarget:this.state.modifiedTarget,selectedElement:this.state.selectedDOMElement,readOnly:Ht,allowEmpty:this.props.config.allowEmpty,widgets:this.state.widgets,env:this.props.env,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation})}}class gw{constructor(Mt,zt){Bt(this,"handleAnnotationCreated",(Ut,Jt)=>this._emitter.emit("createAnnotation",Ut.underlying,Jt)),Bt(this,"handleAnnotationDeleted",Ut=>this._emitter.emit("deleteAnnotation",Ut.underlying)),Bt(this,"handleAnnotationSelected",(Ut,Jt)=>this._emitter.emit("selectAnnotation",Ut.underlying,Jt)),Bt(this,"handleAnnotationUpdated",(Ut,Jt)=>this._emitter.emit("updateAnnotation",Ut.underlying,Jt.underlying)),Bt(this,"handleCancelSelected",Ut=>this._emitter.emit("cancelSelected",Ut.underlying)),Bt(this,"handleClickAnnotation",(Ut,Jt)=>this._emitter.emit("clickAnnotation",Ut.underlying,Jt)),Bt(this,"handleSelectionCreated",Ut=>this._emitter.emit("createSelection",Ut.underlying)),Bt(this,"handleSelectionStarted",Ut=>this._emitter.emit("startSelection",Ut)),Bt(this,"handleSelectionTargetChanged",Ut=>this._emitter.emit("changeSelectionTarget",Ut)),Bt(this,"handleMouseEnterAnnotation",(Ut,Jt)=>this._emitter.emit("mouseEnterAnnotation",Ut.underlying,Jt)),Bt(this,"handleMouseLeaveAnnotation",(Ut,Jt)=>this._emitter.emit("mouseLeaveAnnotation",Ut.underlying,Jt)),Bt(this,"_wrap",Ut=>(Ut==null?void 0:Ut.type)==="Annotation"?new dg(Ut):Ut),Bt(this,"addAnnotation",Ut=>this._app.current.addAnnotation(new dg(Ut))),Bt(this,"addDrawingTool",Ut=>this._app.current.addDrawingTool(Ut)),Bt(this,"cancelSelected",()=>this._app.current.cancelSelected()),Bt(this,"clearAnnotations",()=>this.setAnnotations([])),Bt(this,"clearAuthInfo",()=>this._env.user=null),Bt(this,"destroy",()=>Ai.unmountComponentAtNode(this.appContainerEl)),Bt(this,"fitBounds",(Ut,Jt)=>this._app.current.fitBounds(this._wrap(Ut),Jt)),Bt(this,"getAnnotationById",Ut=>{const Jt=this._app.current.getAnnotationById(Ut);return Jt==null?void 0:Jt.underlying}),Bt(this,"getAnnotations",()=>this._app.current.getAnnotations().map(Ut=>Ut.underlying)),Bt(this,"getSelected",()=>{const Ut=this._app.current.getSelected();return Ut==null?void 0:Ut.underlying}),Bt(this,"getSelectedImageSnippet",()=>this._app.current.getSelectedImageSnippet()),Bt(this,"listDrawingTools",()=>this._app.current.listDrawingTools()),Bt(this,"loadAnnotations",Ut=>fetch(Ut).then(Jt=>Jt.json()).then(Jt=>(this.setAnnotations(Jt),Jt))),Bt(this,"off",(Ut,Jt)=>this._emitter.off(Ut,Jt)),Bt(this,"on",(Ut,Jt)=>this._emitter.on(Ut,Jt)),Bt(this,"once",(Ut,Jt)=>this._emitter.once(Ut,Jt)),Bt(this,"panTo",(Ut,Jt)=>this._app.current.panTo(this._wrap(Ut),Jt)),Bt(this,"removeAnnotation",Ut=>this._app.current.removeAnnotation(this._wrap(Ut))),Bt(this,"removeDrawingTool",Ut=>this._app.current.removeDrawingTool(Ut)),Bt(this,"saveSelected",()=>this._app.current.saveSelected()),Bt(this,"selectAnnotation",Ut=>{const Jt=this._app.current.selectAnnotation(this._wrap(Ut));return Jt==null?void 0:Jt.underlying}),Bt(this,"setAnnotations",Ut=>{const Jt=(Ut||[]).map(ln=>new dg(ln));this._app.current.setAnnotations(Jt)}),Bt(this,"setAuthInfo",Ut=>this._env.user=Ut),Bt(this,"setDrawingEnabled",Ut=>this._app.current.setDrawingEnabled(Ut)),Bt(this,"setDrawingTool",Ut=>this._app.current.setDrawingTool(Ut)),Bt(this,"setServerTime",Ut=>this._env.setServerTime(Ut)),Bt(this,"setVisible",Ut=>this._app.current.setVisible(Ut)),Bt(this,"updateSelected",(Ut,Jt)=>{let ln=null;Ut.type==="Annotation"?ln=new dg(Ut):Ut.type==="Selection"&&(ln=new c1(Ut.target,Ut.body)),ln&&this._app.current.updateSelected(ln,Jt)});const Ht=zt||{};this._app=Ai.createRef(),this._emitter=new Wa,this._env=px(),this._element=Mt.element,window.getComputedStyle(this._element).getPropertyValue("position")==="static"&&(this._element.style.position="relative"),gx(Ht.locale,Ht.messages),this.appContainerEl=document.createElement("DIV"),this._element.appendChild(this.appContainerEl),Ai.render(cn(pw,{ref:this._app,viewer:Mt,wrapperEl:this._element,config:Ht,env:this._env,onSelectionStarted:this.handleSelectionStarted,onSelectionCreated:this.handleSelectionCreated,onSelectionTargetChanged:this.handleSelectionTargetChanged,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onCancelSelected:this.handleCancelSelected,onClickAnnotation:this.handleClickAnnotation,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}get disableEditor(){return this._app.current.disableEditor}set disableEditor(Mt){this._app.current.disableEditor=Mt}get disableSelect(){return this._app.current.disableSelect}set disableSelect(Mt){this._app.current.disableSelect=Mt}get readOnly(){return this._app.current.readOnly}set readOnly(Mt){this._app.current.readOnly=Mt}get widgets(){return this._app.current.widgets}set widgets(Mt){this._app.current.widgets=Mt}}var mw=(It,Mt)=>new gw(It,Mt);return mw})})(openseadragonAnnotorious_min);const Annotorious=getDefaultExportFromCjs(openseadragonAnnotorious_min.exports);class Annotator{constructor(rt,it="",st=!0){lc(this,"ghClient");lc(this,"osd");lc(this,"base");lc(this,"acct");lc(this,"repo");lc(this,"ref","main");lc(this,"basePath");lc(this,"imageId","");lc(this,"sha","");lc(this,"annotorious");lc(this,"visible",!1);lc(this,"ghAuthToken","");lc(this,"selected",null);this.osd=rt,this.base=it;let[bt,xt,...Et]=this.base.split("/");this.acct=bt,this.repo=xt,this.basePath=Et.join("/"),this.annotorious=Annotorious(rt,{readOnly:!st}),this.annotorious.on("createAnnotation",async kt=>this.createAnnotation(kt)),this.annotorious.on("updateAnnotation",async kt=>this.updateAnnotation(kt)),this.annotorious.on("deleteAnnotation",async kt=>this.deleteAnnotation(kt)),this.annotorious.on("selectAnnotation",async kt=>this.onSelect(kt)),this.setVisible(!0),this.ghAuthToken=localStorage.getItem("gh-auth-token")||"",this.ghAuthToken&&(this.ghClient=new GithubClient(this.ghAuthToken))}async loadAnnotations(rt){this.imageId=rt,this.setVisible(!1);let it=[],st=await this.ghClient.getFile(this.acct,this.repo,`${this.basePath}/${this.imageId}.json`,this.ref);return st.content&&(it=JSON.parse(st.content),this.sha=st.sha),console.log(`Adding ${it.length} annotations`),this.annotorious.setAnnotations(it),this.annotorious.readOnly&&it.forEach(bt=>{let xt=this.annoEl(bt.id);xt&&(xt.addEventListener("mouseenter",()=>this.select(bt.id)),xt.addEventListener("mouseleave",()=>this.deselect()),xt.addEventListener("click",()=>navigator.clipboard.writeText(bt.id)))}),it}setVisible(rt){if(this.selected)this.deselect();else{this.visible=rt;let it=this.osd.element.querySelector(".a9s-annotationlayer");it&&(it.style.visibility=this.visible?"visible":"hidden"),Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(st=>st.style.visibility=this.visible?"visible":"hidden")}}toggleVisibility(rt){rt&&rt.stopPropagation(),this.setVisible(!this.visible)}onSelect(rt){this.selected=rt.id,navigator.clipboard&&navigator.clipboard.writeText(this.selected)}annoEl(rt){return this.osd.element.querySelector(`[data-id="${rt}"]`)}select(rt){var it;if(rt!==((it=this.selected)==null?void 0:it.id)){if(this.deselect(),this.selected=this.annotorious.selectAnnotation(rt),this.selected){let st=this.annoEl(rt);st&&(st.style.visibility="visible");let bt=this.osd.element.querySelector(".a9s-annotation.selected");bt&&(bt.style.visibility="visible")}}else this.deselect()}deselect(){Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(rt=>rt.style.visibility=this.visible?"visible":"hidden"),this.annotorious.selectAnnotation(),this.selected=void 0}async saveAnnotations(){let rt=JSON.stringify(this.annotorious.getAnnotations(),null,2);await this.ghClient.putFile(this.acct,this.repo,`${this.basePath}/${this.imageId}.json`,rt,this.ref,!1,this.sha)}async createAnnotation(rt){rt.id=sha256(rt.id).slice(0,8),rt.target.id=this.imageId,this.saveAnnotations(),navigator.clipboard&&navigator.clipboard.writeText(rt.id)}async updateAnnotation(rt){rt.target.id=this.imageId,this.saveAnnotations(),navigator.clipboard&&navigator.clipboard.writeText(rt.id)}async deleteAnnotation(rt){this.saveAnnotations()}}var badge_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-flex;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: max(12px, 0.75em);
    font-weight: var(--sl-font-weight-semibold);
    letter-spacing: var(--sl-letter-spacing-normal);
    line-height: 1;
    border-radius: var(--sl-border-radius-small);
    border: solid 1px var(--sl-color-neutral-0);
    white-space: nowrap;
    padding: 0.35em 0.6em;
    user-select: none;
    cursor: inherit;
  }

  /* Variant modifiers */
  .badge--primary {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--success {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--neutral {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--warning {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--danger {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /* Pill modifier */
  .badge--pill {
    border-radius: var(--sl-border-radius-pill);
  }

  /* Pulse modifier */
  .badge--pulse {
    animation: pulse 1.5s infinite;
  }

  .badge--pulse.badge--primary {
    --pulse-color: var(--sl-color-primary-600);
  }

  .badge--pulse.badge--success {
    --pulse-color: var(--sl-color-success-600);
  }

  .badge--pulse.badge--neutral {
    --pulse-color: var(--sl-color-neutral-600);
  }

  .badge--pulse.badge--warning {
    --pulse-color: var(--sl-color-warning-600);
  }

  .badge--pulse.badge--danger {
    --pulse-color: var(--sl-color-danger-600);
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--pulse-color);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }
`,SlBadge=class extends ShoelaceElement{constructor(){super(...arguments),this.variant="primary",this.pill=!1,this.pulse=!1}render(){return x$1`
      <span
        part="base"
        class=${o$1({badge:!0,"badge--primary":this.variant==="primary","badge--success":this.variant==="success","badge--neutral":this.variant==="neutral","badge--warning":this.variant==="warning","badge--danger":this.variant==="danger","badge--pill":this.pill,"badge--pulse":this.pulse})}
        role="status"
      >
        <slot></slot>
      </span>
    `}};SlBadge.styles=badge_styles_default;__decorateClass([n$3({reflect:!0})],SlBadge.prototype,"variant",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlBadge.prototype,"pill",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlBadge.prototype,"pulse",2);SlBadge.define("sl-badge");var image_comparer_styles_default=i$7`
  ${component_styles_default}

  :host {
    --divider-width: 2px;
    --handle-size: 2.5rem;

    display: inline-block;
    position: relative;
  }

  .image-comparer {
    max-width: 100%;
    max-height: 100%;
    overflow: hidden;
  }

  .image-comparer__before,
  .image-comparer__after {
    display: block;
    pointer-events: none;
  }

  .image-comparer__before::slotted(img),
  .image-comparer__after::slotted(img),
  .image-comparer__before::slotted(svg),
  .image-comparer__after::slotted(svg) {
    display: block;
    max-width: 100% !important;
    height: auto;
  }

  .image-comparer__after {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
  }

  .image-comparer__divider {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    width: var(--divider-width);
    height: 100%;
    background-color: var(--sl-color-neutral-0);
    translate: calc(var(--divider-width) / -2);
    cursor: ew-resize;
  }

  .image-comparer__handle {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: calc(50% - (var(--handle-size) / 2));
    width: var(--handle-size);
    height: var(--handle-size);
    background-color: var(--sl-color-neutral-0);
    border-radius: var(--sl-border-radius-circle);
    font-size: calc(var(--handle-size) * 0.5);
    color: var(--sl-color-neutral-700);
    cursor: inherit;
    z-index: 10;
  }

  .image-comparer__handle:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }
`;function drag(nt,rt){function it(bt){const xt=nt.getBoundingClientRect(),Et=nt.ownerDocument.defaultView,kt=xt.left+Et.pageXOffset,Lt=xt.top+Et.pageYOffset,Pt=bt.pageX-kt,Rt=bt.pageY-Lt;rt!=null&&rt.onMove&&rt.onMove(Pt,Rt)}function st(){document.removeEventListener("pointermove",it),document.removeEventListener("pointerup",st),rt!=null&&rt.onStop&&rt.onStop()}document.addEventListener("pointermove",it,{passive:!0}),document.addEventListener("pointerup",st),(rt==null?void 0:rt.initialEvent)instanceof PointerEvent&&it(rt.initialEvent)}function clamp(nt,rt,it){const st=bt=>Object.is(bt,-0)?0:bt;return nt<rt?st(rt):nt>it?st(it):st(nt)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$1="important",n=" !"+i$1,o=e$1(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t.ATTRIBUTE||nt.name!=="style"||((rt=nt.strings)===null||rt===void 0?void 0:rt.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(nt){return Object.keys(nt).reduce((rt,it)=>{const st=nt[it];return st==null?rt:rt+`${it=it.includes("-")?it:it.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${st};`},"")}update(nt,[rt]){const{style:it}=nt.element;if(this.ht===void 0){this.ht=new Set;for(const st in rt)this.ht.add(st);return this.render(rt)}this.ht.forEach(st=>{rt[st]==null&&(this.ht.delete(st),st.includes("-")?it.removeProperty(st):it[st]="")});for(const st in rt){const bt=rt[st];if(bt!=null){this.ht.add(st);const xt=typeof bt=="string"&&bt.endsWith(n);st.includes("-")||xt?it.setProperty(st,xt?bt.slice(0,-11):bt,xt?i$1:""):it[st]=bt}}return T}});var SlImageComparer=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.position=50}handleDrag(nt){const{width:rt}=this.base.getBoundingClientRect(),it=this.localize.dir()==="rtl";nt.preventDefault(),drag(this.base,{onMove:st=>{this.position=parseFloat(clamp(st/rt*100,0,100).toFixed(2)),it&&(this.position=100-this.position)},initialEvent:nt})}handleKeyDown(nt){const rt=this.localize.dir()==="ltr",it=this.localize.dir()==="rtl";if(["ArrowLeft","ArrowRight","Home","End"].includes(nt.key)){const st=nt.shiftKey?10:1;let bt=this.position;nt.preventDefault(),(rt&&nt.key==="ArrowLeft"||it&&nt.key==="ArrowRight")&&(bt-=st),(rt&&nt.key==="ArrowRight"||it&&nt.key==="ArrowLeft")&&(bt+=st),nt.key==="Home"&&(bt=0),nt.key==="End"&&(bt=100),bt=clamp(bt,0,100),this.position=bt}}handlePositionChange(){this.emit("sl-change")}render(){const nt=this.localize.dir()==="rtl";return x$1`
      <div
        part="base"
        id="image-comparer"
        class=${o$1({"image-comparer":!0,"image-comparer--rtl":nt})}
        @keydown=${this.handleKeyDown}
      >
        <div class="image-comparer__image">
          <div part="before" class="image-comparer__before">
            <slot name="before"></slot>
          </div>

          <div
            part="after"
            class="image-comparer__after"
            style=${o({clipPath:nt?`inset(0 0 0 ${100-this.position}%)`:`inset(0 ${100-this.position}% 0 0)`})}
          >
            <slot name="after"></slot>
          </div>
        </div>

        <div
          part="divider"
          class="image-comparer__divider"
          style=${o({left:nt?`${100-this.position}%`:`${this.position}%`})}
          @mousedown=${this.handleDrag}
          @touchstart=${this.handleDrag}
        >
          <div
            part="handle"
            class="image-comparer__handle"
            role="scrollbar"
            aria-valuenow=${this.position}
            aria-valuemin="0"
            aria-valuemax="100"
            aria-controls="image-comparer"
            tabindex="0"
          >
            <slot name="handle">
              <sl-icon library="system" name="grip-vertical"></sl-icon>
            </slot>
          </div>
        </div>
      </div>
    `}};SlImageComparer.styles=image_comparer_styles_default;SlImageComparer.scopedElement={"sl-icon":SlIcon};__decorateClass([i$4(".image-comparer")],SlImageComparer.prototype,"base",2);__decorateClass([i$4(".image-comparer__handle")],SlImageComparer.prototype,"handle",2);__decorateClass([n$3({type:Number,reflect:!0})],SlImageComparer.prototype,"position",2);__decorateClass([watch("position",{waitUntilFirstUpdate:!0})],SlImageComparer.prototype,"handlePositionChange",1);SlImageComparer.define("sl-image-comparer");SlPopup.define("sl-popup");const _hoisted_1$c=["draggable"],_hoisted_2$a={id:"content"},_hoisted_3$9={key:0,class:"image-wrapper media-item"},_hoisted_4$8=["src"],_hoisted_5$7=["src"],_hoisted_6$5={key:2,id:"osd"},_hoisted_7$4=["manifest"],_hoisted_8$4=["manifest"],_hoisted_9$3={key:1},_hoisted_10$2=["draggable","onDragstart"],_hoisted_11$1=["data-id","src","onClick"],_hoisted_12$1=["src","onClick"],_hoisted_13$1=["manifest"],_hoisted_14$1={key:2},_hoisted_15$1=["slot","src","alt"],_hoisted_16$1={key:3,class:"media-item"},_hoisted_17$1={id:"html5-player",controls:""},_hoisted_18$1=["src","type"],_hoisted_19$1=["manifest"],_hoisted_20$1={key:4,class:"media-item"},_hoisted_21$1={key:0,id:"youtube-placeholder"},_hoisted_22$1={key:1,id:"ve-video-vimeo","data-vimeo-playsinline":"true"},_hoisted_23$1=["muted","autoplay","poster"],_hoisted_24$1=["src","type"],_hoisted_25$1=["manifest"],_hoisted_26$1=["total","current"],_hoisted_27$1={key:0,name:"chat-square",label:"Hide annotations"},_hoisted_28$1={key:1,name:"pencil",label:"Edit annotations"},_hoisted_29$1={key:2,variant:"danger",pill:""},_hoisted_30$1={key:0,name:"chat-square",label:"Hide annotations"},_hoisted_31$1={key:1,name:"chat-square-text",label:"Show annotations"},_hoisted_32$1={key:2,variant:"danger",pill:""},_hoisted_33$1=["innerHTML"],_hoisted_34$1=["innerHTML"],_hoisted_35={id:"media-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},_hoisted_36=["src"],_sfc_main$e=defineComponent({__name:"MediaViewer.ce",props:{manifest:{type:String},src:{type:String},seq:{type:Number,default:1},annoBase:{type:String},base:{type:String},region:{type:String},size:{type:String},rotation:{type:String},quality:{type:String},format:{type:String},options:{type:String},alt:{type:String},caption:{type:String},fit:{type:String},entities:{type:String},zoomOnScroll:{type:Boolean},noCaption:{type:Boolean},noInfoIcon:{type:Boolean},editable:{type:Boolean},static:{type:Boolean},grid:{type:Boolean},cards:{type:Boolean},compare:{type:Boolean},small:{type:Boolean},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean},width:{type:String},height:{type:String},autoplay:{type:Boolean,default:!1},muted:{type:Boolean,default:!0},start:{type:Number},end:{type:Number},poster:{type:String},class:{type:String}},setup(nt){const rt=nt;function it(Lr,qr){var lr;qr.stopPropagation();let Ir=`https://iiif.juncture-digital.org/?manifest=${Lr.id}`;(lr=qr.dataTransfer)==null||lr.setData("text/uri-list",Ir)}const st=ref(null),bt=computed(()=>{var Lr;return(Lr=st==null?void 0:st.value)==null?void 0:Lr.parentNode}),xt=computed(()=>{var Lr,qr;return(qr=(Lr=st.value)==null?void 0:Lr.getRootNode())==null?void 0:qr.host}),Et=computed(()=>{var Lr;return(Lr=bt.value)==null?void 0:Lr.querySelector("#content")}),kt=computed(()=>{var Lr;return(Lr=bt.value)==null?void 0:Lr.querySelector("#outer")}),Lt=computed(()=>{var Lr;return(Lr=bt.value)==null?void 0:Lr.querySelector("#inner")}),Pt=ref([]);onMounted(()=>Bt());const Rt=rt.position||(isMobile()?"full":rt.right?"right":rt.left?"left":"full");function Dt(Lr=16/9){rt.sticky&&(makeSticky(xt.value),Lt.value.style.paddingTop="6px",kt.value.style.paddingBottom="6px"),dr.value=rr.value?Number((rr.value.width/rr.value.height).toFixed(4)):Lr,xt.value.classList.add("ve-component"),xt.value.classList.add(Rt),Rt==="full"||(xt.value.style.float=Rt,xt.value.style.width="calc(50% - 12px)"),xt.value.style.width=window.getComputedStyle(xt.value).width,Et.value&&(Lt.value.style.width=isMobile()?"100%":rt.width||"100%"),nextTick(()=>{if(tr.value=parseInt(window.getComputedStyle(Et.value).width.slice(0,-2)),Et.value.style.width=`${tr.value}px`,Et.value.style.height=rt.height||(Fr.value==="image-grid"?"":Fr.value==="audio"?"80px":`${Math.round((tr==null?void 0:tr.value)/dr.value)}px`),nr.value=parseInt(window.getComputedStyle(Et.value).height.slice(0,-2)),rt.sticky&&Rt==="full"&&!(rt.width||rt.height)){let qr=Math.round(window.innerHeight*.4),Ir=Math.ceil(qr*dr.value);Fr.value==="image"&&(Et.value.style.height=`${qr}px`),Fr.value!=="image-grid"&&Lt.value.classList.add("drop-shadow"),Lt.value.style.width=`${Ir}px`}nextTick(()=>{tr.value=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),nr.value=parseInt(window.getComputedStyle(Et.value).height.slice(0,-2))})})}function Bt(){var Lr;if(Pt.value=rt.entities?rt.entities.split(/\s+/).filter(qr=>qr):[],rt.src)if(((Lr=rt.src)==null?void 0:Lr.indexOf("http"))===0){let qr=new URL(rt.src),Ir=qr.hostname.replace(/^www\./,"");Wn.has(Ir)?(Fr.value="video",kr=!0,Zr.value=qr.searchParams.get("v"),nextTick(()=>lo())):er.has(Ir)?(Fr.value="video",ai=!0,Zr.value=qr.pathname.slice(1),nextTick(()=>Xi())):or.value=Nn()}else or.value=Nn();else or.value=Nn();rn()}function Ft(Lr){const qr=Lr.target.parentElement;qr&&(qr.active=!qr.active)}const Yt=ref();watch$1(Yt,()=>{if(Yt.value){let Lr=Yt.value;setTimeout(()=>Mn(),100),Lr.addHandler("viewport-change",()=>kn()),(rt.base||rt.annoBase)&&(Kt.value=new Annotator(Lr,rt.base||rt.annoBase,mn.value));let qr=Lr.world.getItemAt(0);qr?(rt.rotation&&qr.setRotation(parseInt(rt.rotation),!0),qr.getFullyLoaded()?Wt():qr.addHandler("fully-loaded-change",Ir=>{Ir.fullyLoaded&&Wt()})):Lr.world.addHandler("add-item",()=>{let Ir=Lr.world.getItemAt(0);rt.rotation&&Ir.setRotation(parseInt(rt.rotation),!0),Ir.getFullyLoaded()?Wt():Ir.addHandler("fully-loaded-change",lr=>{lr.fullyLoaded&&Wt()})})}});let Zt;function Wt(Lr){var lr;let qr=or.value[0],Ir=sha256(rr.value.id||rr.value["@id"]).slice(0,8);Ir!==Zt&&(Kt.value&&Kt.value.loadAnnotations(Ir).then(zr=>on.value=zr),!Zt&&qr.seq===hn.value&&qr.region&&((lr=Yt.value)==null||lr.viewport.fitBounds(parseRegionString(qr.region,Yt.value),!0)),Zt=Ir)}function Qt(Lr){return getItemInfo(Lr).format==="image/gif"}const Kt=ref(),on=ref([]),nn=ref(!1),mn=ref(window.location.pathname.split("/")[1]==="editor"||rt.editable);function gn(){nn.value=!nn.value}watch$1(nn,()=>{var qr;Kt.value.setVisible(nn.value);let Lr=(qr=bt.value)==null?void 0:qr.querySelector("#annotations-icon");mn.value&&nn.value?Lr==null||Lr.classList.add("editable"):Lr==null||Lr.classList.remove("editable")});const Tn=ref();let An=null;function kn(){An!==null&&(clearTimeout(An),An=null),An=window.setTimeout(()=>Mn(),100)}function Mn(){var qr,Ir;const Lr=Yt&&((qr=Yt.value)==null?void 0:qr.world.getItemAt(0));if(Lr){let lr=(Ir=Yt.value)==null?void 0:Ir.viewport.getBounds();const zr=lr?Lr.viewportToImageRectangle(lr):null;Tn.value=zr?`${Math.ceil(zr.x)},${Math.ceil(zr.y)},${Math.ceil(zr.width)},${Math.ceil(zr.height)}`:""}}const $n=ref();watch$1(bt,()=>{var Lr;$n.value=(Lr=bt.value)==null?void 0:Lr.querySelector("#media-dialog")}),watch$1($n,Lr=>{Lr==null||Lr.addEventListener("sl-after-hide",()=>cn.value=null),Lr==null||Lr.addEventListener("sl-show",()=>{$n.value&&($n.value.panel.style.width=isMobile()?"100%":`${an()}px`)})});const cn=ref();watch$1(cn,Lr=>{var qr,Ir;Lr?(qr=$n.value)==null||qr.show():(Ir=$n.value)==null||Ir.hide()});function Sn(Lr=null){cn.value=cn.value?null:Lr.src||Lr.id}function an(){var zr;let Lr=Math.round(window.innerWidth-100),qr=Math.round(window.innerHeight-150),Ir=((zr=cn.value)==null?void 0:zr.indexOf("http"))===0?cn.value:`https://iiif.juncture-digital.org/${cn.value}/manifest.json`,lr=ur.value.find(ni=>decodeURIComponent(ni.id)===Ir);if(lr){let ni=getItemInfo(lr),fi=Number((ni.width/ni.height).toFixed(4));Lr=fi>=1?Lr/fi>qr?Lr=qr*fi:Lr:Math.round(qr*fi)}return Lr}const jn=ref(rt.caption),hn=ref(rt.seq),zn=ref(rt.seq);function ir(Lr){hn.value=Lr.detail}const tr=ref(0),nr=ref(0),dr=ref(0),or=ref([]),ur=ref([]),Cr=ref(null),Sr=ref(null),rr=ref(null),Fr=ref(null),mr=ref(null),_r=computed(()=>Object.fromEntries(ur.value.map(Lr=>[sha256(decodeURIComponent(Lr.id)).slice(0,8),Lr])));watch$1(or,()=>{let Lr=or.value.filter(qr=>qr.iiif).map(qr=>qr.src);loadManifests(Lr).then(qr=>{ur.value=qr,rt.grid?Fr.value="image-grid":ur.value.length>1&&(Fr.value=ur.value.length===2?"image-compare":"image-grid")})}),watch$1(ur,()=>{Cr.value=ur.value.length>0&&ur.value[0],Sr.value=or.value[0]}),watch$1(Cr,()=>{zn.value=imageCount(Cr.value),rr.value=Cr.value?getItemInfo(Cr.value,hn.value):null}),watch$1(hn,()=>rr.value=Cr.value?getItemInfo(Cr.value,hn.value):null);const yr=ref([]),pr=computed(()=>{var Lr;return(Lr=rr.value)==null?void 0:Lr.id}),Cn=computed(()=>{var qr;let Lr=(qr=pr.value)==null?void 0:qr.split("#")[0].split(".").pop();return Lr==="mp4"?"video/mp4":Lr==="webm"?"video/webm":"application/ogg"});watch$1(rr,()=>{var Lr,qr;Fr.value=Fr.value||((qr=(Lr=rr.value)==null?void 0:Lr.type)==null?void 0:qr.split(":").pop().toLowerCase()),mr.value=(Fr==null?void 0:Fr.value.indexOf("image"))===0?rr.value.service?`${rr.value.service[0].id||rr.value.service[0]["@id"]}/info.json`:{url:rr.value.id,type:"image",buildPyramid:!0}:null,Yt.value&&Yt.value.open(mr.value),tr.value||nextTick(()=>Dt())}),watch$1(Fr,()=>{si(),nextTick(()=>{Fr.value==="image"&&!Qt(Cr.value)&&!rt.static?Un():(Fr.value==="video"&&or.value.length>0||Fr.value==="audio")&&Ga(),!jn.value&&Fr.value==="image"&&(jn.value=label(Cr.value))})}),watch$1(nr,()=>{Fr.value==="image-compare"&&(yr.value=Kn())});function rn(){let Lr=xt.value.parentElement.querySelector("ve-media > ul, ve-media > span");if(Lr){const qr=lr=>{for(let zr of lr)zr.type==="childList"||zr.type;or.value=Nn()};new MutationObserver(qr).observe(Lr,{childList:!0,subtree:!0,characterData:!0})}}const dn=RegExp(/^(?<region>(pct:)?([0-9.]+,[0-9.]+,[0-9.]+,[0-9.]+)|full|square)(\/(?<size>full|max|((pct:)?[\d,.!]+)))?(\/(?<rotation>!?\d+))?(\/(?<quality>color|gray|bitonal|default))?(\/(?<format>jpg|tif|png|gif|jp2|pdf|webp))?/),fn=RegExp(/^(?<mirror>!?)(?<rotation>0|90|180|270){1}/);function On(Lr){return dn.test(Lr)}function xn(Lr){return/^[0-9]+$/.test(Lr)}function hr(Lr){return fn.test(Lr)}function Nn(){let Lr=[],qr=rt.manifest||rt.src,Ir=Array.from(xt.value.querySelectorAll("li")).filter(lr=>lr.innerText.trim()!=="");if(!qr&&Ir.length===0&&Pt.value.length>0&&(qr=`wd:${Pt.value[0]}`),qr){let lr={};lr.src=qr,lr.src=lr.src.indexOf("http")===0?lr.src:`https://iiif.juncture-digital.org/${lr.src}/manifest.json`,lr.id=sha256(lr.src).slice(0,8);let ni=new URL(lr.src).hostname.replace(/^www\./,"");if(lr.iiif=!Wn.has(ni)&&!er.has(ni),rt.options&&On(rt.options)){let fi=rt.options.match(dn);fi&&(lr={...lr,...fi.groups})}lr.seq=rt.seq,lr.region=rt.region||lr.region,lr.size=rt.size||lr.size,lr.rotation=rt.rotation||lr.rotation,lr.quality=rt.quality||lr.quality,lr.format=rt.format||lr.format,lr.fit=rt.fit,Lr.push(lr)}else Lr=Ir.map(lr=>{var us,hs;let zr=[],ni=(us=lr.textContent)==null?void 0:us.replace(//,'"').replace(//,'"').replace(//,"'").trim();(hs=ni==null?void 0:ni.match(/[^\s"]+|"([^"]*)"/gmi))==null||hs.forEach(zo=>{zr.length>0&&zr[zr.length-1].indexOf("=")===zr[zr.length-1].length-1?zr[zr.length-1]=`${zr[zr.length-1]}${zo}`:zr.push(zo)});let fi={};zr.length>0&&(fi.src=zr[0].indexOf("http")===0?zr[0]:zr[0].indexOf("manifest")===0?`https://iiif.juncture-digital.org/${zr[0]}`:`https://iiif.juncture-digital.org/${zr[0]}/manifest.json`),fi.id=sha256(decodeURIComponent(fi.src)).slice(0,8);let xo=new URL(fi.src),mo=xo.hostname.replace(/^www\./,"");Wn.has(mo)?(fi.youtube=!0,fi.videoid=xo.searchParams.get("v")):er.has(mo)?fi.vimeo=!0:fi.iiif=!0,fi.iiif=!Wn.has(mo)&&!er.has(mo);for(let zo=1;zo<zr.length;zo++){let Is=zr[zo];if(Is.indexOf("=")>0){let Ys=Is.split("=");fi[Ys[0]]=Ys[1]}else if(xn(Is))fi.seq=Is;else if(On(Is)){let Ys=Is.match(dn);Ys&&(fi={...fi,...Ys.groups})}else if(Is==="cover"||Is==="contain")fi.fit=Is;else if(hr(Is)){let Ys=Is.match(fn);Ys&&(fi={...fi,...Ys.groups})}else Is==="mirror"?fi.mirror=!0:fi.caption=Is[0]==='"'&&Is[Is.length-1]==='"'?Is.slice(1,-1):Is}return fi});return Lr}function Kn(){let Lr=tr.value,qr=nr.value,Ir=dr.value;return or.value.map((lr,zr)=>{let ni=getItemInfo(ur.value[zr],lr.seq),fi,xo,mo,us;lr.region&&([fi,xo,mo,us]=lr.region.split(":").pop().split(",").map(ll=>parseFloat(ll)),lr.region.split(":")[0]==="pct"&&(fi=Math.round(fi*ni.width/100),xo=Math.round(xo*ni.height/100),mo=Math.round(mo*ni.width/100),us=Math.round(us*ni.height/100)));const hs=mo||ni.width,zo=us||ni.height,Is=Number((hs/zo).toFixed(4));let Ys=hs,ca=zo;Is>Ir?(Ys=Math.round(zo*Ir),ca=Math.round(Ys/Ir)):(ca=Math.round(hs/Ir),Ys=Math.round(ca*Ir));let Fi=ni.service[0].id||ni.service[0]["@id"];const Zi=(fi||0)+Math.abs(Math.round((Ys-hs)*.5)),bo=(xo||0)+Math.abs(Math.round((ca-zo)*.5));let bi=`${Zi},${bo},${Ys},${ca}`;return`${Fi}/${bi}/${Lr},${qr}/${lr.mirror?"!":""}${lr.rotation||0}/${lr.quality||"default"}.${lr.format||"jpg"}`})}function Un(){Yt.value=sr(),ar(),mr.value&&Yt.value.open(mr.value)}function sr(){var lr;const Ir={element:((lr=st.value)==null?void 0:lr.parentNode).querySelector("#osd"),prefixUrl:"https://openseadragon.github.io/openseadragon/images/",homeFillsViewer:rt.fit==="cover",showNavigationControl:!0,minZoomImageRatio:1,maxZoomPixelRatio:10,showRotationControl:!0,showHomeControl:!0,showZoomControl:!0,showFullPageControl:!0,showNavigator:!1,sequenceMode:!0,showReferenceStrip:!0,animationTime:.5,springStiffness:10,visibilityRatio:1,constrainDuringPan:!0};return openseadragonExports(Ir)}function ar(){rt.zoomOnScroll||new OpenSeadragonViewerInputHook({viewer:Yt.value,hooks:[{tracker:"viewer",handler:"scrollHandler",hookHandler:Lr=>{var qr;return!((qr=Yt.value)!=null&&qr.isFullPage())&&!Lr.originalEvent.ctrlKey&&(Lr.preventDefaultAction=!0,Lr.stopHandlers=!0),!0}}]})}function wr(Lr){navigator.clipboard&&navigator.clipboard.writeText(Lr)}function vr(Lr){let qr=Lr.name.toLowerCase(),Ir=Lr.value;return(qr==="enter"||qr==="exit")&&Ir.indexOf("|")>0&&([qr,Ir]=Ir.split("|")),["zoom","zoomto"].indexOf(qr.toLowerCase())===0||/^((pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?\|?([0-9a-f]{8})?$/.test(Ir)}function Rr(Lr){let qr=Lr.name.toLowerCase(),Ir=Lr.value;return(qr==="enter"||qr==="exit")&&Ir.indexOf("|")>0&&([qr,Ir]=Ir.split("|")),qr.toLowerCase()==="play"||/^([0-9:]+)+,?([0-9:]+)?$/.test(Ir)}function ci(Lr){let qr=Lr.name.toLowerCase(),Ir=Lr.value.toLowerCase();return qr==="pause"||Ir==="pause"}const mi=new Set(["anno","play","start","zoomto"]);function si(){Array.from(xt.value.querySelectorAll("[enter],[exit]")).forEach(qr=>{yi(qr)&&Ni(qr)});let Lr=xt.value.parentElement;for(;Lr.parentElement&&Lr.tagName!=="BODY";)Lr=Lr.parentElement;Array.from(Lr.querySelectorAll("mark, ve-trigger")).forEach(qr=>{let Ir=Array.from(qr.attributes).find(lr=>mi.has(lr.name));Ir&&yi(qr.parentElement)&&(qr.classList.add(Ir.name),qr.addEventListener("click",()=>{(Ir==null?void 0:Ir.name)==="anno"?En(Ir.value):(Ir==null?void 0:Ir.name)==="zoomto"?Ln(Ir.value):(Ir==null?void 0:Ir.name)==="play"?Ii(Ir.value):Mi()}))})}function yi(Lr){let qr=Lr.previousSibling;for(;qr;){if(qr.nodeName==="VE-MEDIA")return qr===xt.value?qr:null;qr=qr.previousSibling}for(;Lr.parentElement&&Lr.tagName!=="MAIN";){Lr=Lr.parentElement;let Ir=Lr.querySelector(":scope > ve-media, :scope > p > ve-media");if(Ir)return Ir===xt.value?Ir:null}}function Ni(Lr){let qr=Lr.classList.contains("active");new MutationObserver(lr=>{lr.forEach(zr=>{if(zr.attributeName=="class"){let ni=zr.target.classList.contains("active");if(qr!==ni){qr=ni;let fi=Lr.attributes.getNamedItem(ni?"enter":"exit");fi&&(Fr.value==="image"&&vr(fi)&&Ln(fi.value),Fr.value!=="image"&&(Rr(fi)?Ii(fi.value):ci(fi)&&Mi()))}}})}).observe(Lr,{attributes:!0})}function Ii(Lr){Lr=Lr.replace(/^play\|/i,"");const qr=Lr.match(/^([0-9:]+)+,?([0-9:]+)?$/);qr&&ws(qr[1],qr[2])}function Mi(){wi()}let Or="";function Ln(Lr){var Ir,lr,zr,ni,fi,xo,mo;Lr=Lr.replace(/^zoomto\|/i,"");const qr=Lr==null?void 0:Lr.match(/^(?<region>(pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?,?(?<annoid>[0-9a-f]{8})?$/);if(qr){let us=(Ir=qr==null?void 0:qr.groups)==null?void 0:Ir.region,hs=(lr=qr==null?void 0:qr.groups)==null?void 0:lr.annoid;us?(Or===us?((zr=Yt.value)==null||zr.viewport.goHome(),Or=""):(Or=us,(ni=Kt.value)==null||ni.deselect(),(fi=Yt.value)==null||fi.viewport.fitBounds(parseRegionString(us,Yt.value),!1)),hs&&Kt.value.select(hs)):hs&&(((xo=Kt.value.selected)==null?void 0:xo.id)===hs?Kt.value.deselect():((mo=Yt.value)==null||mo.viewport.goHome(),hs&&Kt.value.select(hs)))}}function En(Lr){var Ir,lr,zr,ni,fi;const qr=Lr==null?void 0:Lr.match(/^(?<annoid>[0-9a-f]{8})$/);if(qr){let xo=(Ir=qr==null?void 0:qr.groups)==null?void 0:Ir.annoid;xo&&((lr=Kt.value.selected)==null?void 0:lr.id)===xo?((zr=Kt.value)==null||zr.deselect(),(ni=Yt.value)==null||ni.viewport.goHome()):((fi=Yt.value)==null||fi.viewport.goHome(),Kt.value.select(xo))}}const Wn=new Set(["youtube.com","youtube.co.uk","youtu.be"]),er=new Set(["vimeo.com"]);let fr=null;const Zr=ref(),gr=ref(!0),ti=ref(!1);let kr=!1,ai=!1,ui=!1,_i=null,hi=!0,ji={};function Ei(){ji.value=Object.fromEntries(Array.from(xt.value.parentElement.querySelectorAll("p[data-start]")).map(Lr=>[Ts(Lr.dataset.start||"0"),Lr]))}async function Wi(Lr){let Ir=`https://youtube.com/oembed?url=${encodeURI(`https://www.youtube.com/watch?v=${Lr}`)}&format=json`,zr=await(await fetch(Ir)).json();return zr.aspect=zr.width/zr.height,zr}async function lo(){let Lr=await Wi(Zr.value);Ei(),nextTick(()=>{Dt(Lr.aspect),nextTick(()=>{var zr;let qr=(zr=bt.value)==null?void 0:zr.querySelector("#youtube-placeholder"),Ir=parseInt(window.getComputedStyle(qr).width.slice(0,-2));qr.style.height=`${Ir/Lr.aspect}px`;let lr={color:"white",rel:0,modestbranding:1,playsinline:1};fr=YouTubePlayer(qr,{videoId:Zr.value,width:Ir,playerVars:lr}),fr.on("ready",ni=>{Ns(),rt.autoplay&&ws(`${rt.start||""}`,`${rt.end||""}`)})})})}async function Xi(){var qr;Dt();let Lr=(qr=bt.value)==null?void 0:qr.querySelector("#ve-video-vimeo");fr=new Player(Lr,{id:Zr.value,width:parseInt(window.getComputedStyle(Lr).width.slice(0,-2))}),fr.on("loaded",()=>{Dt(Lr.clientWidth/Lr.clientHeight-5),Ns()})}function Ga(){Ei(),ui=!0,nextTick(()=>{var Lr;fr=(Lr=bt.value)==null?void 0:Lr.querySelector("#html5-player"),Ns()}),Dt()}async function Ns(){let Lr=xt.value.parentElement.querySelector("ve-media"),qr=!1;setInterval(async()=>{if(gr.value=await xs(),ti.value=await $s(),ti.value&&rt.sticky&&Object.keys(ji.value).length>0&&!qr){let Ir=Lr.getBoundingClientRect().top+window.scrollY-top$1();window.scrollTo(0,Ir),qr=!0}ti.value&&qi().then(Ir=>{if(Ir=Math.round(Ir),ji.value[Ir]){let zr=ji.value[Ir].getBoundingClientRect();window.scrollTo(0,zr.top+window.scrollY-Lr.getBoundingClientRect().bottom)}})},1e3)}function wi(){kr?fr.pauseVideo():(ai||ui)&&fr.pause()}async function qi(){if(kr)return fr.getCurrentTime();if(ai)return await fr.getCurrentTime();if(ui)return fr.currentTime}async function $s(){return kr?await fr.getPlayerState()===1:ai?!(await fr.getEnded()||await fr.getPaused()):ui?!(fr.ended||fr.paused):!1}async function xs(){return kr?await fr.isMuted():ai?await fr.getMuted():await rt.muted}function fs(Lr){kr?Lr?fr.mute():fr.unMute():ai?fr.setMuted(Lr):ui&&(fr.muted=Lr)}function Ts(Lr){var qr=Lr.split(":").slice(0,3).map(zr=>parseInt(zr,10));let Ir=0,lr=1;for(;qr.length>0;){let zr=qr.pop()||0;Ir+=lr*zr,lr*=60}return Ir}function ws(Lr,qr=""){let Ir=Ts(Lr),lr=qr?Ts(qr)+1:-1;_i&&(clearTimeout(_i),_i=null);let zr=gr.value;if(kr?(fr.playVideo(),fr.seekTo(Ir).then(ni=>{lr>=Ir&&(_i=setTimeout(()=>{fr.pauseVideo().then(fi=>{_i=null,!zr&&hi&&fs(!1)})},lr===Ir?200:(lr-Ir)*1e3))})):ai?(fr.setCurrentTime(Ir),fr.play().then(ni=>{lr>=Ir&&(_i=setTimeout(()=>{fr.pause().then(fi=>{_i=null,!zr&&hi&&fs(!1)})},lr===Ir?200:(lr-Ir)*1e3))})):ui&&setTimeout(()=>{fr.play(),fr.currentTime=Ir,lr>=Ir&&(_i=setTimeout(()=>{_i=null,fr.pause(),!zr&&hi&&fs(!1)},lr===Ir?200:(lr-Ir)*1e3))},200),ji.value[Ir]){let fi=ji.value[Ir].getBoundingClientRect(),xo=xt.value.parentElement.querySelector("ve-media");window.scrollTo(0,fi.top+window.scrollY-xo.getBoundingClientRect().bottom)}}return(Lr,qr)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",mergeProps({ref_key:"root",ref:st},Lr.$attrs),null,16),createBaseVNode("div",{id:"outer",class:normalizeClass(mn.value?"edit":"view"),draggable:Fr.value==="image",onDragstart:qr[2]||(qr[2]=Ir=>it(Cr.value,Ir))},[createBaseVNode("div",{id:"inner",class:normalizeClass(Fr.value)},[createBaseVNode("div",_hoisted_2$a,[Fr.value==="image"?(openBlock(),createElementBlock("div",_hoisted_3$9,[Qt(ur.value[0])?(openBlock(),createElementBlock("ve-gif",{key:0,src:rr.value.id,alt:"Animated GIF","initially-paused":"","restart-on-play":""},null,8,_hoisted_4$8)):nt.static?(openBlock(),createElementBlock("img",{key:1,src:unref(staticImage)(Cr.value,Sr.value,tr.value),style:{width:"100%"},onClick:qr[0]||(qr[0]=Ir=>Sn(Cr.value))},null,8,_hoisted_5$7)):(openBlock(),createElementBlock("div",_hoisted_6$5)),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:3,manifest:ur.value[0].id},null,8,_hoisted_7$4))])):Fr.value==="image-grid"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`grid-wrapper${rt.small?" small":""}`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(or.value,(Ir,lr)=>(openBlock(),createElementBlock(Fragment,null,[rt.cards?(openBlock(),createElementBlock("ve-media-card",{key:0,style:{width:"100%",height:"100%"},manifest:Ir.src},null,8,_hoisted_8$4)):(openBlock(),createElementBlock("div",_hoisted_9$3,[createBaseVNode("div",{class:"media-item",draggable:Fr.value==="image",onDragstart:zr=>it(_r.value[Ir.id],zr)},[Ir.iiif?(openBlock(),createElementBlock("img",{key:0,"data-id":Ir.id,src:unref(thumbnail)(_r.value[Ir.id],400,Ir.seq||1),onClick:zr=>Sn(Ir)},null,8,_hoisted_11$1)):Ir.youtube?(openBlock(),createElementBlock("img",{key:1,src:`https://img.youtube.com/vi/${Ir.videoid}/0.jpg`,onClick:zr=>Sn(Ir)},null,8,_hoisted_12$1)):createCommentVNode("",!0),Ir.iiif?(openBlock(),createElementBlock("ve-manifest-popup",{key:2,manifest:Ir.src},null,8,_hoisted_13$1)):createCommentVNode("",!0)],40,_hoisted_10$2)]))],64))),256))],2)):Fr.value==="image-compare"?(openBlock(),createElementBlock("div",_hoisted_14$1,[createBaseVNode("sl-image-comparer",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(yr.value,(Ir,lr)=>(openBlock(),createElementBlock("img",{key:`img-${lr}`,slot:lr===0?"before":"after",src:Ir,alt:unref(label)(ur.value[lr])},null,8,_hoisted_15$1))),128))])])):Fr.value==="audio"?(openBlock(),createElementBlock("div",_hoisted_16$1,[createBaseVNode("audio",_hoisted_17$1,[createBaseVNode("source",{src:pr.value,type:Cn.value},null,8,_hoisted_18$1)]),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:0,manifest:ur.value[0].id},null,8,_hoisted_19$1))])):Fr.value==="video"?(openBlock(),createElementBlock("div",_hoisted_20$1,[unref(kr)?(openBlock(),createElementBlock("div",_hoisted_21$1)):unref(ai)?(openBlock(),createElementBlock("div",_hoisted_22$1)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("video",{id:"html5-player",controls:"",playsinline:"",muted:rt.muted,autoplay:rt.autoplay,poster:rt.poster},[createBaseVNode("source",{src:pr.value,type:Cn.value},null,8,_hoisted_24$1)],8,_hoisted_23$1),rt.noInfoIcon?createCommentVNode("",!0):(openBlock(),createElementBlock("ve-manifest-popup",{key:0,manifest:ur.value[0].id},null,8,_hoisted_25$1))],64))])):createCommentVNode("",!0)]),Fr.value==="image"&&zn.value>1?(openBlock(),createElementBlock("ve-pager",{key:0,total:zn.value,current:hn.value,onImageSelected:ir},null,40,_hoisted_26$1)):createCommentVNode("",!0),jn.value&&!rt.noCaption?(openBlock(),createElementBlock("div",{key:1,id:"caption-bar",onClick:Ft},[Fr.value==="image"?(openBlock(),createElementBlock("div",{key:0,id:"annotations-icon",class:"button-icon-with-badge",onClick:gn},[mn.value?(openBlock(),createElementBlock(Fragment,{key:0},[nn.value?(openBlock(),createElementBlock("sl-icon-button",_hoisted_27$1)):(openBlock(),createElementBlock("sl-icon-button",_hoisted_28$1)),!nn.value&&on.value.length>0?(openBlock(),createElementBlock("sl-badge",_hoisted_29$1,toDisplayString(on.value.length),1)):createCommentVNode("",!0)],64)):on.value.length>0?(openBlock(),createElementBlock(Fragment,{key:1},[nn.value?(openBlock(),createElementBlock("sl-icon-button",_hoisted_30$1)):(openBlock(),createElementBlock("sl-icon-button",_hoisted_31$1)),nn.value?createCommentVNode("",!0):(openBlock(),createElementBlock("sl-badge",_hoisted_32$1,toDisplayString(on.value.length),1))],64)):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",{class:"label",innerHTML:jn.value},null,8,_hoisted_33$1)])):createCommentVNode("",!0),Tn.value?(openBlock(),createElementBlock("div",{key:2,id:"coords",innerHTML:Tn.value,onClick:qr[1]||(qr[1]=Ir=>wr(Tn.value||""))},null,8,_hoisted_34$1)):createCommentVNode("",!0)],2),createBaseVNode("sl-dialog",_hoisted_35,[cn.value?(openBlock(),createElementBlock("ve-media",{key:0,src:cn.value,"zoom-on-scroll":""},null,8,_hoisted_36)):createCommentVNode("",!0),createBaseVNode("sl-button",{slot:"footer",class:"close",onClick:Sn,variant:"primary"},"Close")])],42,_hoisted_1$c)],64))}}),_style_0$8=`.r6o-editor{top:0;left:0;margin-left:-19px}.a9s-annotationlayer{position:absolute;top:0;left:0;width:100%;height:100%;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.a9s-annotationlayer.no-cursor,.a9s-annotationlayer.no-cursor *{cursor:none!important}.a9s-crosshair line{stroke-width:1px;stroke:#00000080;pointer-events:none;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.a9s-selection-mask{stroke:none;fill:transparent;pointer-events:none}.a9s-annotation rect,.a9s-annotation circle,.a9s-annotation ellipse,.a9s-annotation path,.a9s-annotation polygon,.a9s-annotation line,.a9s-selection rect,.a9s-selection circle,.a9s-selection ellipse,.a9s-selection path,.a9s-selection polygon,.a9s-selection line{fill:transparent;cursor:pointer;vector-effect:non-scaling-stroke}.a9s-annotation .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff;stroke-width:1px;fill:transparent}.a9s-annotation .a9s-inner:hover,.a9s-selection .a9s-inner:hover{stroke:#fff000}.a9s-annotation .a9s-outer,.a9s-selection .a9s-outer{stroke:#000000b3;stroke-width:3px;fill:none}.a9s-annotation .a9s-formatter-el,.a9s-selection .a9s-formatter-el{overflow:visible}.a9s-annotation.a9s-point .a9s-inner{display:none}.a9s-annotation.a9s-point .a9s-outer{stroke:#5a5a5a;stroke-width:1.5px;fill:#ffffff80}.a9s-annotation.a9s-point .a9s-outer:hover{fill:#fff000}.a9s-annotation.selected .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff000}.a9s-annotation.editable .a9s-inner{stroke:#fff000;cursor:move!important}.a9s-annotation.editable .a9s-inner:hover{fill:#fff0001a}.a9s-handle{cursor:move}.a9s-handle .a9s-handle-inner{stroke:#fff000;fill:#000}.a9s-handle .a9s-handle-outer{stroke:#000;fill:#fff}.a9s-handle:hover .a9s-handle-inner{fill:#fff000}.r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle;cursor:pointer}.r6o-btn .r6o-icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2!important;background-color:#a3c2e2!important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.r6o-autocomplete{display:inline;position:relative}.r6o-autocomplete div[role=combobox]{display:inline}.r6o-autocomplete input{outline:none;border:none;width:80px;height:100%;line-height:14px;white-space:pre;box-sizing:border-box;background-color:transparent;font-size:14px;color:#3f3f3f}.r6o-autocomplete ul{position:absolute;margin:0;padding:0;list-style-type:none;background-color:#fff;border-radius:3px;border:1px solid #d6d7d9;box-sizing:border-box;box-shadow:0 0 20px #00000040}.r6o-autocomplete ul:empty{display:none}.r6o-autocomplete li{box-sizing:border-box;padding:2px 12px;width:100%;cursor:pointer}.r6o-editable-text{max-height:120px;overflow:auto;outline:none;min-height:2em;font-size:14px;font-family:Lato,sans-serif}.r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-widget.comment{font-size:14px;min-height:3em;background-color:#fff;position:relative}.r6o-widget.comment .r6o-editable-text,.r6o-widget.comment .r6o-readonly-comment{padding:10px;width:100%;box-sizing:border-box;outline:none;border:none;background-color:transparent;resize:none}.r6o-widget.comment .r6o-readonly-comment{white-space:pre-line}.r6o-widget.comment .r6o-editable-text::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text::-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-ms-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-lastmodified{border:1px solid #e5e5e5;display:inline-block;border-radius:2px;margin:0 10px 8px;padding:4px 5px;line-height:100%;font-size:12px}.r6o-widget.comment .r6o-lastmodified .r6o-lastmodified-at{color:#757575;padding-left:3px}.r6o-widget.comment .r6o-arrow-down{position:absolute;height:20px;width:20px;top:9px;right:9px;line-height:22px;background-color:#fff;text-align:center;-webkit-font-smoothing:antialiased;border:1px solid #e5e5e5;cursor:pointer;-webkit-border-radius:1px;-khtml-border-radius:1px;-moz-border-radius:1px;border-radius:1px}.r6o-widget.comment .r6o-arrow-down.r6o-menu-open{border-color:#4483c4}.r6o-widget.comment .r6o-comment-dropdown-menu{position:absolute;top:32px;right:8px;background-color:#fff;border:1px solid #e5e5e5;list-style-type:none;margin:0;padding:5px 0;z-index:9999;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px #0003}.r6o-widget.comment .r6o-comment-dropdown-menu li{padding:0 15px;cursor:pointer}.r6o-widget.comment .r6o-comment-dropdown-menu li:hover{background-color:#ecf0f1}.r6o-widget.comment .r6o-purposedropdown{position:relative;z-index:2}.r6o-widget.comment.editable{background-color:#ecf0f1}.r6o-widget.r6o-tag:empty{display:none}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.r6o-widget.tag .r6o-taglist li{height:27px}.r6o-widget.tag .r6o-taglist li .r6o-delete-wrapper .r6o-delete{position:relative;top:-4px}}.r6o-widget.r6o-tag{background-color:#ecf0f1;border-bottom:1px solid #e5e5e5;padding:1px 3px;display:flex}.r6o-widget.r6o-tag ul{margin:0;padding:0;list-style-type:none;z-index:1}.r6o-widget.r6o-tag ul.r6o-taglist{flex:0;white-space:nowrap}.r6o-widget.r6o-tag ul.r6o-taglist li{display:inline-block;margin:1px 1px 1px 0;padding:0;vertical-align:middle;overflow:hidden;font-size:12px;background-color:#fff;border:1px solid #d6d7d9;cursor:pointer;position:relative;line-height:180%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 4px rgba(0,0,0,.1);-moz-box-shadow:0 0 4px rgba(0,0,0,.1);box-shadow:0 0 4px #0000001a}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-label{padding:2px 8px;display:inline-block}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper{display:inline-block;padding:2px 0;color:#fff;width:0;height:100%;background-color:#4483c4;-webkit-border-top-right-radius:2px;-webkit-border-bottom-right-radius:2px;-khtml-border-radius-topright:2px;-khtml-border-radius-bottomright:2px;-moz-border-radius-topright:2px;-moz-border-radius-bottomright:2px;border-top-right-radius:2px;border-bottom-right-radius:2px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper .r6o-delete{padding:2px 6px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper svg{vertical-align:text-top}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-active{width:24px;transition:width .2s}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-done,.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit{width:24px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit-active{width:0;transition:width .2s}.r6o-widget.r6o-tag .r6o-autocomplete{flex:1;position:relative}.r6o-widget.r6o-tag .r6o-autocomplete li{font-size:14px}.r6o-widget.r6o-tag input{width:100%;padding:0 3px;min-width:80px;outline:none;border:none;line-height:170%;background-color:transparent;color:#3f3f3f}.r6o-widget.r6o-tag input::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input::-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-ms-input-placeholder{color:#c2c2c2}.r6o-editor{position:absolute;z-index:99999;width:400px;color:#3f3f3f;opacity:0;font-family:Lato,sans-serif;font-size:17px;line-height:27px;-webkit-transition:opacity .2s ease-in;-moz-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.r6o-editor .r6o-arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px;display:none}.r6o-editor .r6o-arrow:after{content:"";position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .r6o-editor-inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,.4);box-shadow:2px 2px 42px #0006}.r6o-editor .r6o-editor-inner .r6o-widget:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .r6o-editor-inner .r6o-widget{border-bottom:1px solid #e5e5e5}.r6o-editor .r6o-footer{position:relative;text-align:right;padding:8px 0}.r6o-editor .r6o-footer .r6o-btn{margin-right:8px}.r6o-editor .r6o-footer .r6o-btn.delete-annotation{position:absolute;top:7px;left:7px;background-color:transparent;border:none;color:#4483c4;width:32px;height:32px;min-width:0;border-radius:100%;padding:0;display:flex;justify-content:center;align-items:center;-webkit-transition:all .1s ease-in;-moz-transition:all .1s ease-in;-o-transition:all .1s ease-in;transition:all .1s ease-in}.r6o-editor .r6o-footer .r6o-btn.delete-annotation:hover{color:#fff;background-color:#ef352c}@media (max-width: 640px){.r6o-editor{width:260px}}.r6o-editor.r6o-arrow-top .r6o-arrow{display:block}.r6o-editor.r6o-arrow-right{margin-left:8px}.r6o-editor.r6o-arrow-right .r6o-arrow{left:auto;right:12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow{display:block;top:auto;bottom:-12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow:after{top:-11px;box-shadow:none}.r6o-editor.pushed .r6o-arrow,.r6o-editor.dragged .r6o-arrow{display:none}.r6o-editor .r6o-draggable{cursor:move}.r6o-purposedropdown{width:150px;display:inline-block}.r6o-noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.a9s-annotation.hover .a9s-inner{stroke:#fff000}.a9s-annotation:not(.hover):hover .a9s-inner{stroke:#fff}*{box-sizing:border-box}:host{display:block;padding-bottom:6px;background-color:inherit}.info-icon{position:absolute;top:12px;right:12px;width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center;visibility:hidden}.media-item:hover .info-icon{visibility:visible;transition:all .3s ease-in}.manifest-popover{background-color:#fff;border-radius:6px;width:300px;height:400px;overflow-y:scroll;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#outer{position:relative;width:100%;background-color:inherit;display:flex;justify-items:center}#outer{margin-bottom:12px}#inner{margin:auto;width:100%}#inner.image,.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#content{width:100%}#osd,video{width:100%;height:100%}#caption-bar{display:flex;gap:6px;width:100%;align-items:center;height:32px;background-color:#555}#caption-bar .label{color:#fff;padding:0 9px;font-size:1.1rem;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;cursor:pointer}.image-wrapper{position:relative;height:100%;width:100%}.grid-wrapper{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper.small{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper>.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}.grid-wrapper img{border:1px solid #ccc;box-shadow:2px 2px 6px #0000004d;max-width:100%;cursor:pointer}#coords{position:absolute;display:flex;align-items:center;justify-content:flex-end;font-family:sans-serif;bottom:0;right:0;width:130px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#coords:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy}.info-icon span{position:absolute;top:20px;right:20px;font-size:24px;z-index:2;opacity:0;border-radius:50%;border:1px solid white;background-color:#0003}.media-item{position:relative}.media-item:hover .info-icon span{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:pointer;color:#fff}.info-icon:hover svg{fill:#000}.view .r6o-footer{display:none}.r6o-widget.comment .r6o-readonly-comment{display:inline;padding:0}.view .r6o-editor,.view .r6o-editor-inner,.view .r6o-widget{display:inline-block;min-height:unset!important;line-height:1.4;padding:0;border-bottom:none}.r6o-tag,.comment.editable:nth-of-type(2){display:none!important}.edit .r6o-editor{width:216px}.r6o-widget.comment{padding:6px 6px 4px;border-radius:4px}svg.a9s-annotationlayer .a9s-selection .a9s-inner,svg.a9s-annotationlayer .a9s-annotation .a9s-inner{stroke-width:3;stroke:#ff0}ul.annotations{list-style:none;padding-left:0}.annotations li{display:flex;align-items:center;gap:6px;padding:6px 0}.annotations li:hover{background-color:#fff3;cursor:pointer}.compare{height:100%;width:100%;position:relative;overflow:hidden;border:5px solid #bfc0c1;box-shadow:-3px 5px 15px #000}.compare img{width:100%;height:100%;position:absolute}#compare-img-2{clip-path:polygon(0 0,50% 0,50% 100%,0 100%)}#slider{position:relative;-webkit-appearance:none;width:calc(100% + 40px);height:100%;margin-left:-20px;background-color:transparent;outline:none}#slider::-webkit-slider-thumb{-webkit-appearance:none;height:45px;width:45px;background:rgba(255,255,255,.3);border:4px solid white;border-radius:50%;background-size:contain;cursor:pointer}audio#html5-player{width:calc(100% - 60px);max-width:50vh}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.popup-overview sl-popup{--arrow-color: var(--sl-color-primary-600)}.popup-overview span[slot=anchor]{display:inline-block;width:150px;height:150px;border:dashed 2px var(--sl-color-neutral-600);margin:50px}.popup-overview .box{width:100px;height:50px;background:var(--sl-color-primary-600);border-radius:var(--sl-border-radius-medium)}.popup-overview-options{display:flex;flex-wrap:wrap;align-items:end;gap:1rem}.popup-overview-options sl-select{width:160px}.popup-overview-options sl-input{width:100px}.popup-overview-options+.popup-overview-options{margin-top:1rem}sl-popup{--arrow-color: var(--sl-color-primary-600)}.media-item .box{width:300px;height:600px;background:white;border-radius:var(--sl-border-radius-medium)}#annotations-icon{position:relative;cursor:pointer}#annotations-icon sl-icon-button::part(base){color:#fff;font-size:1.2rem;padding:3px}.button-icon-with-badge{display:inline-block;position:relative;margin:0 6px}.button-icon-with-badge sl-badge{position:absolute;left:70%;top:0;cursor:pointer}.button-icon-with-badge sl-badge::part(base){font-size:.7rem;background-color:#ff0;color:#000;font-weight:700;padding:4px 5px 1px;border:unset}#youtube-placeholder,#ve-video-vimeo{width:100%}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,MediaViewer=_export_sfc(_sfc_main$e,[["styles",[_style_0$8]]]),_hoisted_1$b={key:0,class:"wrapper"},_hoisted_2$9={class:"dropdown-selection-alt"},_hoisted_3$8=createBaseVNode("sl-icon-button",{name:"list",slot:"trigger",style:{"font-size":"2.5rem"}},null,-1),_hoisted_4$7=["data-item"],_hoisted_5$6=["name","label"],_hoisted_6$4=["contact","title","subject"],_sfc_main$d=defineComponent({__name:"Menu.ce",props:{background:{type:String},position:{type:String,default:"left"},contact:{type:String},contactFormTitle:{type:String},contactSubject:{type:String}},setup(nt){const rt=nt,it={about:{icon:"info-circle-fill"},contact:{icon:"envelope-fill"},documentation:{icon:"book"},docs:{icon:"book"},editor:{icon:"pencil",loginRequired:!0},essays:{icon:"pencil"},help:{icon:"question-circle"},home:{icon:"house-fill"},"how to":{icon:"book-fill"},link:{icon:"link-45deg"},login:{icon:"person-circle"},logout:{icon:"person-circle"},markdown:{icon:"markdown"},media:{icon:"images",loginRequired:!0},showcase:{icon:"easel2"},tools:{icon:"tools",loginRequired:!0}},st=ref(null),bt=computed(()=>{var Dt,Bt;return(Bt=(Dt=st.value)==null?void 0:Dt.getRootNode())==null?void 0:Bt.host});computed(()=>{var Dt;return(Dt=st==null?void 0:st.value)==null?void 0:Dt.parentNode});const xt=ref(!1),Et=ref([]),kt=ref();onMounted(()=>{Lt(),nextTick(()=>{var Bt;let Dt=Array.from(((Bt=bt.value.children[0])==null?void 0:Bt.children)||[]);Dt.length>0&&(Et.value=Dt.map(Ft=>{if(Ft.firstChild.nodeName==="A"){let Yt=Ft.firstChild;return{label:Yt.textContent,href:Yt.href,newWindow:Yt.getAttribute("target")==="_blank"}}else return Ft.firstChild.textContent.toLowerCase()==="auth"?{label:xt.value?"Logout":"Login",href:xt.value?"logout":"login"}:{label:Ft.textContent}}).filter(Ft=>Ft.label.toLowerCase().indexOf("contact")!==0||rt.contact))})});function Lt(){xt.value=Pt()!==null;let Dt=new URL(window.location.href).searchParams.get("code");Dt&&(window.history.replaceState({},"",window.location.pathname),fetch(`/gh-token?code=${Dt}&hostname=${window.location.hostname}`).then(Bt=>Bt.text()).then(Bt=>{Bt&&(xt.value=!0,localStorage.setItem("gh-auth-token",Bt),window.dispatchEvent(new Event("storage")))}).catch(Bt=>console.log("err",Bt))),bt.value.classList.add(rt.position)}watch$1(Et,()=>{kt.value=Et.value.filter(Dt=>{var Ft;let Bt=Dt.href?Dt.href.split("/").filter(Yt=>Yt).pop().toLowerCase():"link";return!it[Bt]||!((Ft=it[Bt])!=null&&Ft.loginRequired)||xt.value}).map(Dt=>Dt.label==="Login"||Dt.label==="Logout"?{label:xt.value?"Logout":"Login",href:xt.value?"logout":"login"}:Dt)}),watch$1(xt,()=>{kt.value=Et.value.filter(Dt=>{var Ft;let Bt=Dt.href?Dt.href.split("/").filter(Yt=>Yt).pop().toLowerCase():"link";return!it[Bt]||!((Ft=it[Bt])!=null&&Ft.loginRequired)||xt.value}).map(Dt=>Dt.label==="Login"||Dt.label==="Logout"?{label:xt.value?"Logout":"Login",href:xt.value?"logout":"login"}:Dt)});function Pt(){return localStorage.getItem("gh-auth-token")}function Rt(Dt){let Bt="",Ft=Dt.label.toLowerCase();return Object.keys(it).forEach(Yt=>{Ft.indexOf(Yt)>=0&&(Bt=it[Yt].icon)}),Bt||"link"}return(Dt,Bt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:st},[createBaseVNode("div",{class:"nav",style:normalizeStyle({backgroundColor:rt.background})},[kt.value?(openBlock(),createElementBlock("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$9,[createBaseVNode("sl-dropdown",null,[_hoisted_3$8,createBaseVNode("sl-menu",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value,(Ft,Yt)=>(openBlock(),createElementBlock("div",{"data-item":JSON.stringify(Ft),key:`nav-${Yt}`},[createBaseVNode("sl-menu-item",{name:Rt(Ft),label:Ft.label},toDisplayString(Ft.label),9,_hoisted_5$6)],8,_hoisted_4$7))),128))])])])])):createCommentVNode("",!0)],4),createBaseVNode("ve-contact",{contact:rt.contact,title:rt.contactFormTitle,subject:rt.contactSubject},null,8,_hoisted_6$4)],512))}}),_style_0$7=`:host,ve-menu{height:100%}:host(.right) .menu,ve-menu.right .menu{right:0}.hydrated ul{display:none}.nav{display:inline-block;position:relative;z-index:10;height:100%;background-color:inherit}.menu{display:none;clear:both;max-height:0;transition:max-height .2s ease-out;position:absolute;top:58px;width:200px;background-color:#0009;color:#fff}ul.menu{padding:0;list-style:none}.menu li{display:flex;padding:10px 20px;text-decoration:none;cursor:pointer;font-size:1rem}.menu li:hover{text-decoration:underline;background-color:inherit;filter:brightness(150%)}.menu-icon{cursor:pointer;display:inline-block;padding:34px 20px;position:relative;user-select:none}.menu-icon .navicon,.menu-icon .navicon:before,.menu-icon .navicon:after{background:#fff}.menu-icon .navicon{display:block;height:4px;border-radius:2px;position:relative;transition:background .2s ease-out;width:32px}.menu-icon .navicon:before,.menu-icon .navicon:after{content:"";display:block;height:100%;position:absolute;transition:all .2s ease-out;width:100%;border-radius:2px}.menu-icon .navicon:before{top:10px}.menu-icon .navicon:after{top:-10px}.menu sl-icon{padding-right:12px}.menu-btn{display:none}.menu-btn:checked~.wrapper{filter:brightness(150%);background-color:inherit}.menu-btn:checked~.wrapper .menu{max-height:unset;display:block}.menu-btn:checked~.wrapper .menu-icon .navicon{background:transparent}.menu-btn:checked~.wrapper .menu-icon .navicon:before{transform:rotate(-45deg)}.menu-btn:checked~.wrapper .menu-icon .navicon:after{transform:rotate(45deg)}.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:before,.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:after{top:0}
`,Menu=_export_sfc(_sfc_main$d,[["styles",[_style_0$7]]]);function dedent(nt){for(var rt=[],it=1;it<arguments.length;it++)rt[it-1]=arguments[it];var st=Array.from(typeof nt=="string"?[nt]:nt);st[st.length-1]=st[st.length-1].replace(/\r?\n([\t ]*)$/,"");var bt=st.reduce(function(kt,Lt){var Pt=Lt.match(/\n([\t ]+|(?!\s).)/g);return Pt?kt.concat(Pt.map(function(Rt){var Dt,Bt;return(Bt=(Dt=Rt.match(/[\t ]/g))===null||Dt===void 0?void 0:Dt.length)!==null&&Bt!==void 0?Bt:0})):kt},[]);if(bt.length){var xt=new RegExp(`
[	 ]{`+Math.min.apply(Math,bt)+"}","g");st=st.map(function(kt){return kt.replace(xt,`
`)})}st[0]=st[0].replace(/^\r?\n/,"");var Et=st[0];return rt.forEach(function(kt,Lt){var Pt=Et.match(/(?:^|\n)( *)$/),Rt=Pt?Pt[1]:"",Dt=kt;typeof kt=="string"&&kt.includes(`
`)&&(Dt=String(kt).split(`
`).map(function(Bt,Ft){return Ft===0?Bt:""+Rt+Bt}).join(`
`)),Et+=Dt+st[Lt+1]}),Et}var dayjs_min={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){var it=1e3,st=6e4,bt=36e5,xt="millisecond",Et="second",kt="minute",Lt="hour",Pt="day",Rt="week",Dt="month",Bt="quarter",Ft="year",Yt="date",Zt="Invalid Date",Wt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Qt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Kt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Sn){var an=["th","st","nd","rd"],jn=Sn%100;return"["+Sn+(an[(jn-20)%10]||an[jn]||an[0])+"]"}},on=function(Sn,an,jn){var hn=String(Sn);return!hn||hn.length>=an?Sn:""+Array(an+1-hn.length).join(jn)+Sn},nn={s:on,z:function(Sn){var an=-Sn.utcOffset(),jn=Math.abs(an),hn=Math.floor(jn/60),zn=jn%60;return(an<=0?"+":"-")+on(hn,2,"0")+":"+on(zn,2,"0")},m:function Sn(an,jn){if(an.date()<jn.date())return-Sn(jn,an);var hn=12*(jn.year()-an.year())+(jn.month()-an.month()),zn=an.clone().add(hn,Dt),ir=jn-zn<0,tr=an.clone().add(hn+(ir?-1:1),Dt);return+(-(hn+(jn-zn)/(ir?zn-tr:tr-zn))||0)},a:function(Sn){return Sn<0?Math.ceil(Sn)||0:Math.floor(Sn)},p:function(Sn){return{M:Dt,y:Ft,w:Rt,d:Pt,D:Yt,h:Lt,m:kt,s:Et,ms:xt,Q:Bt}[Sn]||String(Sn||"").toLowerCase().replace(/s$/,"")},u:function(Sn){return Sn===void 0}},mn="en",gn={};gn[mn]=Kt;var Tn=function(Sn){return Sn instanceof $n},An=function Sn(an,jn,hn){var zn;if(!an)return mn;if(typeof an=="string"){var ir=an.toLowerCase();gn[ir]&&(zn=ir),jn&&(gn[ir]=jn,zn=ir);var tr=an.split("-");if(!zn&&tr.length>1)return Sn(tr[0])}else{var nr=an.name;gn[nr]=an,zn=nr}return!hn&&zn&&(mn=zn),zn||!hn&&mn},kn=function(Sn,an){if(Tn(Sn))return Sn.clone();var jn=typeof an=="object"?an:{};return jn.date=Sn,jn.args=arguments,new $n(jn)},Mn=nn;Mn.l=An,Mn.i=Tn,Mn.w=function(Sn,an){return kn(Sn,{locale:an.$L,utc:an.$u,x:an.$x,$offset:an.$offset})};var $n=function(){function Sn(jn){this.$L=An(jn.locale,null,!0),this.parse(jn)}var an=Sn.prototype;return an.parse=function(jn){this.$d=function(hn){var zn=hn.date,ir=hn.utc;if(zn===null)return new Date(NaN);if(Mn.u(zn))return new Date;if(zn instanceof Date)return new Date(zn);if(typeof zn=="string"&&!/Z$/i.test(zn)){var tr=zn.match(Wt);if(tr){var nr=tr[2]-1||0,dr=(tr[7]||"0").substring(0,3);return ir?new Date(Date.UTC(tr[1],nr,tr[3]||1,tr[4]||0,tr[5]||0,tr[6]||0,dr)):new Date(tr[1],nr,tr[3]||1,tr[4]||0,tr[5]||0,tr[6]||0,dr)}}return new Date(zn)}(jn),this.$x=jn.x||{},this.init()},an.init=function(){var jn=this.$d;this.$y=jn.getFullYear(),this.$M=jn.getMonth(),this.$D=jn.getDate(),this.$W=jn.getDay(),this.$H=jn.getHours(),this.$m=jn.getMinutes(),this.$s=jn.getSeconds(),this.$ms=jn.getMilliseconds()},an.$utils=function(){return Mn},an.isValid=function(){return this.$d.toString()!==Zt},an.isSame=function(jn,hn){var zn=kn(jn);return this.startOf(hn)<=zn&&zn<=this.endOf(hn)},an.isAfter=function(jn,hn){return kn(jn)<this.startOf(hn)},an.isBefore=function(jn,hn){return this.endOf(hn)<kn(jn)},an.$g=function(jn,hn,zn){return Mn.u(jn)?this[hn]:this.set(zn,jn)},an.unix=function(){return Math.floor(this.valueOf()/1e3)},an.valueOf=function(){return this.$d.getTime()},an.startOf=function(jn,hn){var zn=this,ir=!!Mn.u(hn)||hn,tr=Mn.p(jn),nr=function(mr,_r){var yr=Mn.w(zn.$u?Date.UTC(zn.$y,_r,mr):new Date(zn.$y,_r,mr),zn);return ir?yr:yr.endOf(Pt)},dr=function(mr,_r){return Mn.w(zn.toDate()[mr].apply(zn.toDate("s"),(ir?[0,0,0,0]:[23,59,59,999]).slice(_r)),zn)},or=this.$W,ur=this.$M,Cr=this.$D,Sr="set"+(this.$u?"UTC":"");switch(tr){case Ft:return ir?nr(1,0):nr(31,11);case Dt:return ir?nr(1,ur):nr(0,ur+1);case Rt:var rr=this.$locale().weekStart||0,Fr=(or<rr?or+7:or)-rr;return nr(ir?Cr-Fr:Cr+(6-Fr),ur);case Pt:case Yt:return dr(Sr+"Hours",0);case Lt:return dr(Sr+"Minutes",1);case kt:return dr(Sr+"Seconds",2);case Et:return dr(Sr+"Milliseconds",3);default:return this.clone()}},an.endOf=function(jn){return this.startOf(jn,!1)},an.$set=function(jn,hn){var zn,ir=Mn.p(jn),tr="set"+(this.$u?"UTC":""),nr=(zn={},zn[Pt]=tr+"Date",zn[Yt]=tr+"Date",zn[Dt]=tr+"Month",zn[Ft]=tr+"FullYear",zn[Lt]=tr+"Hours",zn[kt]=tr+"Minutes",zn[Et]=tr+"Seconds",zn[xt]=tr+"Milliseconds",zn)[ir],dr=ir===Pt?this.$D+(hn-this.$W):hn;if(ir===Dt||ir===Ft){var or=this.clone().set(Yt,1);or.$d[nr](dr),or.init(),this.$d=or.set(Yt,Math.min(this.$D,or.daysInMonth())).$d}else nr&&this.$d[nr](dr);return this.init(),this},an.set=function(jn,hn){return this.clone().$set(jn,hn)},an.get=function(jn){return this[Mn.p(jn)]()},an.add=function(jn,hn){var zn,ir=this;jn=Number(jn);var tr=Mn.p(hn),nr=function(ur){var Cr=kn(ir);return Mn.w(Cr.date(Cr.date()+Math.round(ur*jn)),ir)};if(tr===Dt)return this.set(Dt,this.$M+jn);if(tr===Ft)return this.set(Ft,this.$y+jn);if(tr===Pt)return nr(1);if(tr===Rt)return nr(7);var dr=(zn={},zn[kt]=st,zn[Lt]=bt,zn[Et]=it,zn)[tr]||1,or=this.$d.getTime()+jn*dr;return Mn.w(or,this)},an.subtract=function(jn,hn){return this.add(-1*jn,hn)},an.format=function(jn){var hn=this,zn=this.$locale();if(!this.isValid())return zn.invalidDate||Zt;var ir=jn||"YYYY-MM-DDTHH:mm:ssZ",tr=Mn.z(this),nr=this.$H,dr=this.$m,or=this.$M,ur=zn.weekdays,Cr=zn.months,Sr=zn.meridiem,rr=function(_r,yr,pr,Cn){return _r&&(_r[yr]||_r(hn,ir))||pr[yr].slice(0,Cn)},Fr=function(_r){return Mn.s(nr%12||12,_r,"0")},mr=Sr||function(_r,yr,pr){var Cn=_r<12?"AM":"PM";return pr?Cn.toLowerCase():Cn};return ir.replace(Qt,function(_r,yr){return yr||function(pr){switch(pr){case"YY":return String(hn.$y).slice(-2);case"YYYY":return Mn.s(hn.$y,4,"0");case"M":return or+1;case"MM":return Mn.s(or+1,2,"0");case"MMM":return rr(zn.monthsShort,or,Cr,3);case"MMMM":return rr(Cr,or);case"D":return hn.$D;case"DD":return Mn.s(hn.$D,2,"0");case"d":return String(hn.$W);case"dd":return rr(zn.weekdaysMin,hn.$W,ur,2);case"ddd":return rr(zn.weekdaysShort,hn.$W,ur,3);case"dddd":return ur[hn.$W];case"H":return String(nr);case"HH":return Mn.s(nr,2,"0");case"h":return Fr(1);case"hh":return Fr(2);case"a":return mr(nr,dr,!0);case"A":return mr(nr,dr,!1);case"m":return String(dr);case"mm":return Mn.s(dr,2,"0");case"s":return String(hn.$s);case"ss":return Mn.s(hn.$s,2,"0");case"SSS":return Mn.s(hn.$ms,3,"0");case"Z":return tr}return null}(_r)||tr.replace(":","")})},an.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},an.diff=function(jn,hn,zn){var ir,tr=this,nr=Mn.p(hn),dr=kn(jn),or=(dr.utcOffset()-this.utcOffset())*st,ur=this-dr,Cr=function(){return Mn.m(tr,dr)};switch(nr){case Ft:ir=Cr()/12;break;case Dt:ir=Cr();break;case Bt:ir=Cr()/3;break;case Rt:ir=(ur-or)/6048e5;break;case Pt:ir=(ur-or)/864e5;break;case Lt:ir=ur/bt;break;case kt:ir=ur/st;break;case Et:ir=ur/it;break;default:ir=ur}return zn?ir:Mn.a(ir)},an.daysInMonth=function(){return this.endOf(Dt).$D},an.$locale=function(){return gn[this.$L]},an.locale=function(jn,hn){if(!jn)return this.$L;var zn=this.clone(),ir=An(jn,hn,!0);return ir&&(zn.$L=ir),zn},an.clone=function(){return Mn.w(this.$d,this)},an.toDate=function(){return new Date(this.valueOf())},an.toJSON=function(){return this.isValid()?this.toISOString():null},an.toISOString=function(){return this.$d.toISOString()},an.toString=function(){return this.$d.toUTCString()},Sn}(),cn=$n.prototype;return kn.prototype=cn,[["$ms",xt],["$s",Et],["$m",kt],["$H",Lt],["$W",Pt],["$M",Dt],["$y",Ft],["$D",Yt]].forEach(function(Sn){cn[Sn[1]]=function(an){return this.$g(an,Sn[0],Sn[1])}}),kn.extend=function(Sn,an){return Sn.$i||(Sn(an,$n,kn),Sn.$i=!0),kn},kn.locale=An,kn.isDayjs=Tn,kn.unix=function(Sn){return kn(1e3*Sn)},kn.en=gn[mn],kn.Ls=gn,kn.p={},kn})})(dayjs_min);const dayjs=dayjs_min.exports;var dist={};(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.sanitizeUrl=nt.BLANK_URL=void 0;var rt=/^([^\w]*)(javascript|data|vbscript)/im,it=/&#(\w+)(^\w|;)?/g,st=/&(newline|tab);/gi,bt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,xt=/^.+(:|&colon;)/gim,Et=[".","/"];nt.BLANK_URL="about:blank";function kt(Rt){return Et.indexOf(Rt[0])>-1}function Lt(Rt){var Dt=Rt.replace(bt,"");return Dt.replace(it,function(Bt,Ft){return String.fromCharCode(Ft)})}function Pt(Rt){if(!Rt)return nt.BLANK_URL;var Dt=Lt(Rt).replace(st,"").replace(bt,"").trim();if(!Dt)return nt.BLANK_URL;if(kt(Dt))return Dt;var Bt=Dt.match(xt);if(!Bt)return Dt;var Ft=Bt[0];return rt.test(Ft)?nt.BLANK_URL:Dt}nt.sanitizeUrl=Pt})(dist);function ascending$1(nt,rt){return nt==null||rt==null?NaN:nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function descending$1(nt,rt){return nt==null||rt==null?NaN:rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function bisector(nt){let rt,it,st;nt.length!==2?(rt=ascending$1,it=(kt,Lt)=>ascending$1(nt(kt),Lt),st=(kt,Lt)=>nt(kt)-Lt):(rt=nt===ascending$1||nt===descending$1?nt:zero$1,it=nt,st=nt);function bt(kt,Lt,Pt=0,Rt=kt.length){if(Pt<Rt){if(rt(Lt,Lt)!==0)return Rt;do{const Dt=Pt+Rt>>>1;it(kt[Dt],Lt)<0?Pt=Dt+1:Rt=Dt}while(Pt<Rt)}return Pt}function xt(kt,Lt,Pt=0,Rt=kt.length){if(Pt<Rt){if(rt(Lt,Lt)!==0)return Rt;do{const Dt=Pt+Rt>>>1;it(kt[Dt],Lt)<=0?Pt=Dt+1:Rt=Dt}while(Pt<Rt)}return Pt}function Et(kt,Lt,Pt=0,Rt=kt.length){const Dt=bt(kt,Lt,Pt,Rt-1);return Dt>Pt&&st(kt[Dt-1],Lt)>-st(kt[Dt],Lt)?Dt-1:Dt}return{left:bt,center:Et,right:xt}}function zero$1(){return 0}function number$3(nt){return nt===null?NaN:+nt}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$3).center;const bisect=bisectRight;class InternMap extends Map{constructor(rt,it=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:it}}),rt!=null)for(const[st,bt]of rt)this.set(st,bt)}get(rt){return super.get(intern_get(this,rt))}has(rt){return super.has(intern_get(this,rt))}set(rt,it){return super.set(intern_set(this,rt),it)}delete(rt){return super.delete(intern_delete(this,rt))}}function intern_get({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)?nt.get(st):it}function intern_set({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)?nt.get(st):(nt.set(st,it),it)}function intern_delete({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)&&(it=nt.get(st),nt.delete(st)),it}function keyof(nt){return nt!==null&&typeof nt=="object"?nt.valueOf():nt}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(nt,rt,it){const st=(rt-nt)/Math.max(0,it),bt=Math.floor(Math.log10(st)),xt=st/Math.pow(10,bt),Et=xt>=e10?10:xt>=e5?5:xt>=e2?2:1;let kt,Lt,Pt;return bt<0?(Pt=Math.pow(10,-bt)/Et,kt=Math.round(nt*Pt),Lt=Math.round(rt*Pt),kt/Pt<nt&&++kt,Lt/Pt>rt&&--Lt,Pt=-Pt):(Pt=Math.pow(10,bt)*Et,kt=Math.round(nt/Pt),Lt=Math.round(rt/Pt),kt*Pt<nt&&++kt,Lt*Pt>rt&&--Lt),Lt<kt&&.5<=it&&it<2?tickSpec(nt,rt,it*2):[kt,Lt,Pt]}function ticks(nt,rt,it){if(rt=+rt,nt=+nt,it=+it,!(it>0))return[];if(nt===rt)return[nt];const st=rt<nt,[bt,xt,Et]=st?tickSpec(rt,nt,it):tickSpec(nt,rt,it);if(!(xt>=bt))return[];const kt=xt-bt+1,Lt=new Array(kt);if(st)if(Et<0)for(let Pt=0;Pt<kt;++Pt)Lt[Pt]=(xt-Pt)/-Et;else for(let Pt=0;Pt<kt;++Pt)Lt[Pt]=(xt-Pt)*Et;else if(Et<0)for(let Pt=0;Pt<kt;++Pt)Lt[Pt]=(bt+Pt)/-Et;else for(let Pt=0;Pt<kt;++Pt)Lt[Pt]=(bt+Pt)*Et;return Lt}function tickIncrement(nt,rt,it){return rt=+rt,nt=+nt,it=+it,tickSpec(nt,rt,it)[2]}function tickStep(nt,rt,it){rt=+rt,nt=+nt,it=+it;const st=rt<nt,bt=st?tickIncrement(rt,nt,it):tickIncrement(nt,rt,it);return(st?-1:1)*(bt<0?1/-bt:bt)}function max$2(nt,rt){let it;if(rt===void 0)for(const st of nt)st!=null&&(it<st||it===void 0&&st>=st)&&(it=st);else{let st=-1;for(let bt of nt)(bt=rt(bt,++st,nt))!=null&&(it<bt||it===void 0&&bt>=bt)&&(it=bt)}return it}function min$2(nt,rt){let it;if(rt===void 0)for(const st of nt)st!=null&&(it>st||it===void 0&&st>=st)&&(it=st);else{let st=-1;for(let bt of nt)(bt=rt(bt,++st,nt))!=null&&(it>bt||it===void 0&&bt>=bt)&&(it=bt)}return it}function identity$5(nt){return nt}var top=1,right=2,bottom=3,left=4,epsilon$2=1e-6;function translateX(nt){return"translate("+nt+",0)"}function translateY(nt){return"translate(0,"+nt+")"}function number$2(nt){return rt=>+nt(rt)}function center(nt,rt){return rt=Math.max(0,nt.bandwidth()-rt*2)/2,nt.round()&&(rt=Math.round(rt)),it=>+nt(it)+rt}function entering(){return!this.__axis}function axis(nt,rt){var it=[],st=null,bt=null,xt=6,Et=6,kt=3,Lt=typeof window<"u"&&window.devicePixelRatio>1?0:.5,Pt=nt===top||nt===left?-1:1,Rt=nt===left||nt===right?"x":"y",Dt=nt===top||nt===bottom?translateX:translateY;function Bt(Ft){var Yt=st==null?rt.ticks?rt.ticks.apply(rt,it):rt.domain():st,Zt=bt==null?rt.tickFormat?rt.tickFormat.apply(rt,it):identity$5:bt,Wt=Math.max(xt,0)+kt,Qt=rt.range(),Kt=+Qt[0]+Lt,on=+Qt[Qt.length-1]+Lt,nn=(rt.bandwidth?center:number$2)(rt.copy(),Lt),mn=Ft.selection?Ft.selection():Ft,gn=mn.selectAll(".domain").data([null]),Tn=mn.selectAll(".tick").data(Yt,rt).order(),An=Tn.exit(),kn=Tn.enter().append("g").attr("class","tick"),Mn=Tn.select("line"),$n=Tn.select("text");gn=gn.merge(gn.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Tn=Tn.merge(kn),Mn=Mn.merge(kn.append("line").attr("stroke","currentColor").attr(Rt+"2",Pt*xt)),$n=$n.merge(kn.append("text").attr("fill","currentColor").attr(Rt,Pt*Wt).attr("dy",nt===top?"0em":nt===bottom?"0.71em":"0.32em")),Ft!==mn&&(gn=gn.transition(Ft),Tn=Tn.transition(Ft),Mn=Mn.transition(Ft),$n=$n.transition(Ft),An=An.transition(Ft).attr("opacity",epsilon$2).attr("transform",function(cn){return isFinite(cn=nn(cn))?Dt(cn+Lt):this.getAttribute("transform")}),kn.attr("opacity",epsilon$2).attr("transform",function(cn){var Sn=this.parentNode.__axis;return Dt((Sn&&isFinite(Sn=Sn(cn))?Sn:nn(cn))+Lt)})),An.remove(),gn.attr("d",nt===left||nt===right?Et?"M"+Pt*Et+","+Kt+"H"+Lt+"V"+on+"H"+Pt*Et:"M"+Lt+","+Kt+"V"+on:Et?"M"+Kt+","+Pt*Et+"V"+Lt+"H"+on+"V"+Pt*Et:"M"+Kt+","+Lt+"H"+on),Tn.attr("opacity",1).attr("transform",function(cn){return Dt(nn(cn)+Lt)}),Mn.attr(Rt+"2",Pt*xt),$n.attr(Rt,Pt*Wt).text(Zt),mn.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",nt===right?"start":nt===left?"end":"middle"),mn.each(function(){this.__axis=nn})}return Bt.scale=function(Ft){return arguments.length?(rt=Ft,Bt):rt},Bt.ticks=function(){return it=Array.from(arguments),Bt},Bt.tickArguments=function(Ft){return arguments.length?(it=Ft==null?[]:Array.from(Ft),Bt):it.slice()},Bt.tickValues=function(Ft){return arguments.length?(st=Ft==null?null:Array.from(Ft),Bt):st&&st.slice()},Bt.tickFormat=function(Ft){return arguments.length?(bt=Ft,Bt):bt},Bt.tickSize=function(Ft){return arguments.length?(xt=Et=+Ft,Bt):xt},Bt.tickSizeInner=function(Ft){return arguments.length?(xt=+Ft,Bt):xt},Bt.tickSizeOuter=function(Ft){return arguments.length?(Et=+Ft,Bt):Et},Bt.tickPadding=function(Ft){return arguments.length?(kt=+Ft,Bt):kt},Bt.offset=function(Ft){return arguments.length?(Lt=+Ft,Bt):Lt},Bt}function axisTop(nt){return axis(top,nt)}function axisBottom(nt){return axis(bottom,nt)}var noop$2={value:()=>{}};function dispatch(){for(var nt=0,rt=arguments.length,it={},st;nt<rt;++nt){if(!(st=arguments[nt]+"")||st in it||/[\s.]/.test(st))throw new Error("illegal type: "+st);it[st]=[]}return new Dispatch(it)}function Dispatch(nt){this._=nt}function parseTypenames$1(nt,rt){return nt.trim().split(/^|\s+/).map(function(it){var st="",bt=it.indexOf(".");if(bt>=0&&(st=it.slice(bt+1),it=it.slice(0,bt)),it&&!rt.hasOwnProperty(it))throw new Error("unknown type: "+it);return{type:it,name:st}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(nt,rt){var it=this._,st=parseTypenames$1(nt+"",it),bt,xt=-1,Et=st.length;if(arguments.length<2){for(;++xt<Et;)if((bt=(nt=st[xt]).type)&&(bt=get$3(it[bt],nt.name)))return bt;return}if(rt!=null&&typeof rt!="function")throw new Error("invalid callback: "+rt);for(;++xt<Et;)if(bt=(nt=st[xt]).type)it[bt]=set$2(it[bt],nt.name,rt);else if(rt==null)for(bt in it)it[bt]=set$2(it[bt],nt.name,null);return this},copy:function(){var nt={},rt=this._;for(var it in rt)nt[it]=rt[it].slice();return new Dispatch(nt)},call:function(nt,rt){if((bt=arguments.length-2)>0)for(var it=new Array(bt),st=0,bt,xt;st<bt;++st)it[st]=arguments[st+2];if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(xt=this._[nt],st=0,bt=xt.length;st<bt;++st)xt[st].value.apply(rt,it)},apply:function(nt,rt,it){if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(var st=this._[nt],bt=0,xt=st.length;bt<xt;++bt)st[bt].value.apply(rt,it)}};function get$3(nt,rt){for(var it=0,st=nt.length,bt;it<st;++it)if((bt=nt[it]).name===rt)return bt.value}function set$2(nt,rt,it){for(var st=0,bt=nt.length;st<bt;++st)if(nt[st].name===rt){nt[st]=noop$2,nt=nt.slice(0,st).concat(nt.slice(st+1));break}return it!=null&&nt.push({name:rt,value:it}),nt}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(nt){var rt=nt+="",it=rt.indexOf(":");return it>=0&&(rt=nt.slice(0,it))!=="xmlns"&&(nt=nt.slice(it+1)),namespaces.hasOwnProperty(rt)?{space:namespaces[rt],local:nt}:nt}function creatorInherit(nt){return function(){var rt=this.ownerDocument,it=this.namespaceURI;return it===xhtml&&rt.documentElement.namespaceURI===xhtml?rt.createElement(nt):rt.createElementNS(it,nt)}}function creatorFixed(nt){return function(){return this.ownerDocument.createElementNS(nt.space,nt.local)}}function creator(nt){var rt=namespace(nt);return(rt.local?creatorFixed:creatorInherit)(rt)}function none(){}function selector(nt){return nt==null?none:function(){return this.querySelector(nt)}}function selection_select(nt){typeof nt!="function"&&(nt=selector(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),bt=0;bt<it;++bt)for(var xt=rt[bt],Et=xt.length,kt=st[bt]=new Array(Et),Lt,Pt,Rt=0;Rt<Et;++Rt)(Lt=xt[Rt])&&(Pt=nt.call(Lt,Lt.__data__,Rt,xt))&&("__data__"in Lt&&(Pt.__data__=Lt.__data__),kt[Rt]=Pt);return new Selection$1(st,this._parents)}function array$1(nt){return nt==null?[]:Array.isArray(nt)?nt:Array.from(nt)}function empty(){return[]}function selectorAll(nt){return nt==null?empty:function(){return this.querySelectorAll(nt)}}function arrayAll(nt){return function(){return array$1(nt.apply(this,arguments))}}function selection_selectAll(nt){typeof nt=="function"?nt=arrayAll(nt):nt=selectorAll(nt);for(var rt=this._groups,it=rt.length,st=[],bt=[],xt=0;xt<it;++xt)for(var Et=rt[xt],kt=Et.length,Lt,Pt=0;Pt<kt;++Pt)(Lt=Et[Pt])&&(st.push(nt.call(Lt,Lt.__data__,Pt,Et)),bt.push(Lt));return new Selection$1(st,bt)}function matcher(nt){return function(){return this.matches(nt)}}function childMatcher(nt){return function(rt){return rt.matches(nt)}}var find$2=Array.prototype.find;function childFind(nt){return function(){return find$2.call(this.children,nt)}}function childFirst(){return this.firstElementChild}function selection_selectChild(nt){return this.select(nt==null?childFirst:childFind(typeof nt=="function"?nt:childMatcher(nt)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(nt){return function(){return filter$1.call(this.children,nt)}}function selection_selectChildren(nt){return this.selectAll(nt==null?children:childrenFilter(typeof nt=="function"?nt:childMatcher(nt)))}function selection_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),bt=0;bt<it;++bt)for(var xt=rt[bt],Et=xt.length,kt=st[bt]=[],Lt,Pt=0;Pt<Et;++Pt)(Lt=xt[Pt])&&nt.call(Lt,Lt.__data__,Pt,xt)&&kt.push(Lt);return new Selection$1(st,this._parents)}function sparse(nt){return new Array(nt.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(nt,rt){this.ownerDocument=nt.ownerDocument,this.namespaceURI=nt.namespaceURI,this._next=null,this._parent=nt,this.__data__=rt}EnterNode.prototype={constructor:EnterNode,appendChild:function(nt){return this._parent.insertBefore(nt,this._next)},insertBefore:function(nt,rt){return this._parent.insertBefore(nt,rt)},querySelector:function(nt){return this._parent.querySelector(nt)},querySelectorAll:function(nt){return this._parent.querySelectorAll(nt)}};function constant$3(nt){return function(){return nt}}function bindIndex(nt,rt,it,st,bt,xt){for(var Et=0,kt,Lt=rt.length,Pt=xt.length;Et<Pt;++Et)(kt=rt[Et])?(kt.__data__=xt[Et],st[Et]=kt):it[Et]=new EnterNode(nt,xt[Et]);for(;Et<Lt;++Et)(kt=rt[Et])&&(bt[Et]=kt)}function bindKey(nt,rt,it,st,bt,xt,Et){var kt,Lt,Pt=new Map,Rt=rt.length,Dt=xt.length,Bt=new Array(Rt),Ft;for(kt=0;kt<Rt;++kt)(Lt=rt[kt])&&(Bt[kt]=Ft=Et.call(Lt,Lt.__data__,kt,rt)+"",Pt.has(Ft)?bt[kt]=Lt:Pt.set(Ft,Lt));for(kt=0;kt<Dt;++kt)Ft=Et.call(nt,xt[kt],kt,xt)+"",(Lt=Pt.get(Ft))?(st[kt]=Lt,Lt.__data__=xt[kt],Pt.delete(Ft)):it[kt]=new EnterNode(nt,xt[kt]);for(kt=0;kt<Rt;++kt)(Lt=rt[kt])&&Pt.get(Bt[kt])===Lt&&(bt[kt]=Lt)}function datum(nt){return nt.__data__}function selection_data(nt,rt){if(!arguments.length)return Array.from(this,datum);var it=rt?bindKey:bindIndex,st=this._parents,bt=this._groups;typeof nt!="function"&&(nt=constant$3(nt));for(var xt=bt.length,Et=new Array(xt),kt=new Array(xt),Lt=new Array(xt),Pt=0;Pt<xt;++Pt){var Rt=st[Pt],Dt=bt[Pt],Bt=Dt.length,Ft=arraylike(nt.call(Rt,Rt&&Rt.__data__,Pt,st)),Yt=Ft.length,Zt=kt[Pt]=new Array(Yt),Wt=Et[Pt]=new Array(Yt),Qt=Lt[Pt]=new Array(Bt);it(Rt,Dt,Zt,Wt,Qt,Ft,rt);for(var Kt=0,on=0,nn,mn;Kt<Yt;++Kt)if(nn=Zt[Kt]){for(Kt>=on&&(on=Kt+1);!(mn=Wt[on])&&++on<Yt;);nn._next=mn||null}}return Et=new Selection$1(Et,st),Et._enter=kt,Et._exit=Lt,Et}function arraylike(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(nt,rt,it){var st=this.enter(),bt=this,xt=this.exit();return typeof nt=="function"?(st=nt(st),st&&(st=st.selection())):st=st.append(nt+""),rt!=null&&(bt=rt(bt),bt&&(bt=bt.selection())),it==null?xt.remove():it(xt),st&&bt?st.merge(bt).order():bt}function selection_merge(nt){for(var rt=nt.selection?nt.selection():nt,it=this._groups,st=rt._groups,bt=it.length,xt=st.length,Et=Math.min(bt,xt),kt=new Array(bt),Lt=0;Lt<Et;++Lt)for(var Pt=it[Lt],Rt=st[Lt],Dt=Pt.length,Bt=kt[Lt]=new Array(Dt),Ft,Yt=0;Yt<Dt;++Yt)(Ft=Pt[Yt]||Rt[Yt])&&(Bt[Yt]=Ft);for(;Lt<bt;++Lt)kt[Lt]=it[Lt];return new Selection$1(kt,this._parents)}function selection_order(){for(var nt=this._groups,rt=-1,it=nt.length;++rt<it;)for(var st=nt[rt],bt=st.length-1,xt=st[bt],Et;--bt>=0;)(Et=st[bt])&&(xt&&Et.compareDocumentPosition(xt)^4&&xt.parentNode.insertBefore(Et,xt),xt=Et);return this}function selection_sort(nt){nt||(nt=ascending);function rt(Dt,Bt){return Dt&&Bt?nt(Dt.__data__,Bt.__data__):!Dt-!Bt}for(var it=this._groups,st=it.length,bt=new Array(st),xt=0;xt<st;++xt){for(var Et=it[xt],kt=Et.length,Lt=bt[xt]=new Array(kt),Pt,Rt=0;Rt<kt;++Rt)(Pt=Et[Rt])&&(Lt[Rt]=Pt);Lt.sort(rt)}return new Selection$1(bt,this._parents).order()}function ascending(nt,rt){return nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function selection_call(){var nt=arguments[0];return arguments[0]=this,nt.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var st=nt[rt],bt=0,xt=st.length;bt<xt;++bt){var Et=st[bt];if(Et)return Et}return null}function selection_size(){let nt=0;for(const rt of this)++nt;return nt}function selection_empty(){return!this.node()}function selection_each(nt){for(var rt=this._groups,it=0,st=rt.length;it<st;++it)for(var bt=rt[it],xt=0,Et=bt.length,kt;xt<Et;++xt)(kt=bt[xt])&&nt.call(kt,kt.__data__,xt,bt);return this}function attrRemove$1(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS$1(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant$1(nt,rt){return function(){this.setAttribute(nt,rt)}}function attrConstantNS$1(nt,rt){return function(){this.setAttributeNS(nt.space,nt.local,rt)}}function attrFunction$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttribute(nt):this.setAttribute(nt,it)}}function attrFunctionNS$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttributeNS(nt.space,nt.local):this.setAttributeNS(nt.space,nt.local,it)}}function selection_attr(nt,rt){var it=namespace(nt);if(arguments.length<2){var st=this.node();return it.local?st.getAttributeNS(it.space,it.local):st.getAttribute(it)}return this.each((rt==null?it.local?attrRemoveNS$1:attrRemove$1:typeof rt=="function"?it.local?attrFunctionNS$1:attrFunction$1:it.local?attrConstantNS$1:attrConstant$1)(it,rt))}function defaultView(nt){return nt.ownerDocument&&nt.ownerDocument.defaultView||nt.document&&nt||nt.defaultView}function styleRemove$1(nt){return function(){this.style.removeProperty(nt)}}function styleConstant$1(nt,rt,it){return function(){this.style.setProperty(nt,rt,it)}}function styleFunction$1(nt,rt,it){return function(){var st=rt.apply(this,arguments);st==null?this.style.removeProperty(nt):this.style.setProperty(nt,st,it)}}function selection_style(nt,rt,it){return arguments.length>1?this.each((rt==null?styleRemove$1:typeof rt=="function"?styleFunction$1:styleConstant$1)(nt,rt,it==null?"":it)):styleValue(this.node(),nt)}function styleValue(nt,rt){return nt.style.getPropertyValue(rt)||defaultView(nt).getComputedStyle(nt,null).getPropertyValue(rt)}function propertyRemove(nt){return function(){delete this[nt]}}function propertyConstant(nt,rt){return function(){this[nt]=rt}}function propertyFunction(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?delete this[nt]:this[nt]=it}}function selection_property(nt,rt){return arguments.length>1?this.each((rt==null?propertyRemove:typeof rt=="function"?propertyFunction:propertyConstant)(nt,rt)):this.node()[nt]}function classArray(nt){return nt.trim().split(/^|\s+/)}function classList(nt){return nt.classList||new ClassList(nt)}function ClassList(nt){this._node=nt,this._names=classArray(nt.getAttribute("class")||"")}ClassList.prototype={add:function(nt){var rt=this._names.indexOf(nt);rt<0&&(this._names.push(nt),this._node.setAttribute("class",this._names.join(" ")))},remove:function(nt){var rt=this._names.indexOf(nt);rt>=0&&(this._names.splice(rt,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(nt){return this._names.indexOf(nt)>=0}};function classedAdd(nt,rt){for(var it=classList(nt),st=-1,bt=rt.length;++st<bt;)it.add(rt[st])}function classedRemove(nt,rt){for(var it=classList(nt),st=-1,bt=rt.length;++st<bt;)it.remove(rt[st])}function classedTrue(nt){return function(){classedAdd(this,nt)}}function classedFalse(nt){return function(){classedRemove(this,nt)}}function classedFunction(nt,rt){return function(){(rt.apply(this,arguments)?classedAdd:classedRemove)(this,nt)}}function selection_classed(nt,rt){var it=classArray(nt+"");if(arguments.length<2){for(var st=classList(this.node()),bt=-1,xt=it.length;++bt<xt;)if(!st.contains(it[bt]))return!1;return!0}return this.each((typeof rt=="function"?classedFunction:rt?classedTrue:classedFalse)(it,rt))}function textRemove(){this.textContent=""}function textConstant$1(nt){return function(){this.textContent=nt}}function textFunction$1(nt){return function(){var rt=nt.apply(this,arguments);this.textContent=rt==null?"":rt}}function selection_text(nt){return arguments.length?this.each(nt==null?textRemove:(typeof nt=="function"?textFunction$1:textConstant$1)(nt)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(nt){return function(){this.innerHTML=nt}}function htmlFunction(nt){return function(){var rt=nt.apply(this,arguments);this.innerHTML=rt==null?"":rt}}function selection_html(nt){return arguments.length?this.each(nt==null?htmlRemove:(typeof nt=="function"?htmlFunction:htmlConstant)(nt)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(nt){var rt=typeof nt=="function"?nt:creator(nt);return this.select(function(){return this.appendChild(rt.apply(this,arguments))})}function constantNull(){return null}function selection_insert(nt,rt){var it=typeof nt=="function"?nt:creator(nt),st=rt==null?constantNull:typeof rt=="function"?rt:selector(rt);return this.select(function(){return this.insertBefore(it.apply(this,arguments),st.apply(this,arguments)||null)})}function remove(){var nt=this.parentNode;nt&&nt.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var nt=this.cloneNode(!1),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_cloneDeep(){var nt=this.cloneNode(!0),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_clone(nt){return this.select(nt?selection_cloneDeep:selection_cloneShallow)}function selection_datum(nt){return arguments.length?this.property("__data__",nt):this.node().__data__}function contextListener(nt){return function(rt){nt.call(this,rt,this.__data__)}}function parseTypenames(nt){return nt.trim().split(/^|\s+/).map(function(rt){var it="",st=rt.indexOf(".");return st>=0&&(it=rt.slice(st+1),rt=rt.slice(0,st)),{type:rt,name:it}})}function onRemove(nt){return function(){var rt=this.__on;if(!!rt){for(var it=0,st=-1,bt=rt.length,xt;it<bt;++it)xt=rt[it],(!nt.type||xt.type===nt.type)&&xt.name===nt.name?this.removeEventListener(xt.type,xt.listener,xt.options):rt[++st]=xt;++st?rt.length=st:delete this.__on}}}function onAdd(nt,rt,it){return function(){var st=this.__on,bt,xt=contextListener(rt);if(st){for(var Et=0,kt=st.length;Et<kt;++Et)if((bt=st[Et]).type===nt.type&&bt.name===nt.name){this.removeEventListener(bt.type,bt.listener,bt.options),this.addEventListener(bt.type,bt.listener=xt,bt.options=it),bt.value=rt;return}}this.addEventListener(nt.type,xt,it),bt={type:nt.type,name:nt.name,value:rt,listener:xt,options:it},st?st.push(bt):this.__on=[bt]}}function selection_on(nt,rt,it){var st=parseTypenames(nt+""),bt,xt=st.length,Et;if(arguments.length<2){var kt=this.node().__on;if(kt){for(var Lt=0,Pt=kt.length,Rt;Lt<Pt;++Lt)for(bt=0,Rt=kt[Lt];bt<xt;++bt)if((Et=st[bt]).type===Rt.type&&Et.name===Rt.name)return Rt.value}return}for(kt=rt?onAdd:onRemove,bt=0;bt<xt;++bt)this.each(kt(st[bt],rt,it));return this}function dispatchEvent(nt,rt,it){var st=defaultView(nt),bt=st.CustomEvent;typeof bt=="function"?bt=new bt(rt,it):(bt=st.document.createEvent("Event"),it?(bt.initEvent(rt,it.bubbles,it.cancelable),bt.detail=it.detail):bt.initEvent(rt,!1,!1)),nt.dispatchEvent(bt)}function dispatchConstant(nt,rt){return function(){return dispatchEvent(this,nt,rt)}}function dispatchFunction(nt,rt){return function(){return dispatchEvent(this,nt,rt.apply(this,arguments))}}function selection_dispatch(nt,rt){return this.each((typeof rt=="function"?dispatchFunction:dispatchConstant)(nt,rt))}function*selection_iterator(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var st=nt[rt],bt=0,xt=st.length,Et;bt<xt;++bt)(Et=st[bt])&&(yield Et)}var root$2=[null];function Selection$1(nt,rt){this._groups=nt,this._parents=rt}function selection(){return new Selection$1([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(nt){return typeof nt=="string"?new Selection$1([[document.querySelector(nt)]],[document.documentElement]):new Selection$1([[nt]],root$2)}function selectAll(nt){return typeof nt=="string"?new Selection$1([document.querySelectorAll(nt)],[document.documentElement]):new Selection$1([array$1(nt)],root$2)}function define$1(nt,rt,it){nt.prototype=rt.prototype=it,it.constructor=nt}function extend$1(nt,rt){var it=Object.create(nt.prototype);for(var st in rt)it[st]=rt[st];return it}function Color$2(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color$2,color,{copy(nt){return Object.assign(new this.constructor,this,nt)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(nt){var rt,it;return nt=(nt+"").trim().toLowerCase(),(rt=reHex.exec(nt))?(it=rt[1].length,rt=parseInt(rt[1],16),it===6?rgbn(rt):it===3?new Rgb(rt>>8&15|rt>>4&240,rt>>4&15|rt&240,(rt&15)<<4|rt&15,1):it===8?rgba$2(rt>>24&255,rt>>16&255,rt>>8&255,(rt&255)/255):it===4?rgba$2(rt>>12&15|rt>>8&240,rt>>8&15|rt>>4&240,rt>>4&15|rt&240,((rt&15)<<4|rt&15)/255):null):(rt=reRgbInteger.exec(nt))?new Rgb(rt[1],rt[2],rt[3],1):(rt=reRgbPercent.exec(nt))?new Rgb(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,1):(rt=reRgbaInteger.exec(nt))?rgba$2(rt[1],rt[2],rt[3],rt[4]):(rt=reRgbaPercent.exec(nt))?rgba$2(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,rt[4]):(rt=reHslPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,1):(rt=reHslaPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,rt[4]):named.hasOwnProperty(nt)?rgbn(named[nt]):nt==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(nt){return new Rgb(nt>>16&255,nt>>8&255,nt&255,1)}function rgba$2(nt,rt,it,st){return st<=0&&(nt=rt=it=NaN),new Rgb(nt,rt,it,st)}function rgbConvert(nt){return nt instanceof Color$2||(nt=color(nt)),nt?(nt=nt.rgb(),new Rgb(nt.r,nt.g,nt.b,nt.opacity)):new Rgb}function rgb(nt,rt,it,st){return arguments.length===1?rgbConvert(nt):new Rgb(nt,rt,it,st==null?1:st)}function Rgb(nt,rt,it,st){this.r=+nt,this.g=+rt,this.b=+it,this.opacity=+st}define$1(Rgb,rgb,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const nt=clampa(this.opacity);return`${nt===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${nt===1?")":`, ${nt})`}`}function clampa(nt){return isNaN(nt)?1:Math.max(0,Math.min(1,nt))}function clampi(nt){return Math.max(0,Math.min(255,Math.round(nt)||0))}function hex(nt){return nt=clampi(nt),(nt<16?"0":"")+nt.toString(16)}function hsla(nt,rt,it,st){return st<=0?nt=rt=it=NaN:it<=0||it>=1?nt=rt=NaN:rt<=0&&(nt=NaN),new Hsl(nt,rt,it,st)}function hslConvert(nt){if(nt instanceof Hsl)return new Hsl(nt.h,nt.s,nt.l,nt.opacity);if(nt instanceof Color$2||(nt=color(nt)),!nt)return new Hsl;if(nt instanceof Hsl)return nt;nt=nt.rgb();var rt=nt.r/255,it=nt.g/255,st=nt.b/255,bt=Math.min(rt,it,st),xt=Math.max(rt,it,st),Et=NaN,kt=xt-bt,Lt=(xt+bt)/2;return kt?(rt===xt?Et=(it-st)/kt+(it<st)*6:it===xt?Et=(st-rt)/kt+2:Et=(rt-it)/kt+4,kt/=Lt<.5?xt+bt:2-xt-bt,Et*=60):kt=Lt>0&&Lt<1?0:Et,new Hsl(Et,kt,Lt,nt.opacity)}function hsl(nt,rt,it,st){return arguments.length===1?hslConvert(nt):new Hsl(nt,rt,it,st==null?1:st)}function Hsl(nt,rt,it,st){this.h=+nt,this.s=+rt,this.l=+it,this.opacity=+st}define$1(Hsl,hsl,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},rgb(){var nt=this.h%360+(this.h<0)*360,rt=isNaN(nt)||isNaN(this.s)?0:this.s,it=this.l,st=it+(it<.5?it:1-it)*rt,bt=2*it-st;return new Rgb(hsl2rgb(nt>=240?nt-240:nt+120,bt,st),hsl2rgb(nt,bt,st),hsl2rgb(nt<120?nt+240:nt-120,bt,st),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const nt=clampa(this.opacity);return`${nt===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${nt===1?")":`, ${nt})`}`}}));function clamph(nt){return nt=(nt||0)%360,nt<0?nt+360:nt}function clampt(nt){return Math.max(0,Math.min(1,nt||0))}function hsl2rgb(nt,rt,it){return(nt<60?rt+(it-rt)*nt/60:nt<180?it:nt<240?rt+(it-rt)*(240-nt)/60:rt)*255}const radians=Math.PI/180,degrees$1=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(nt){if(nt instanceof Lab)return new Lab(nt.l,nt.a,nt.b,nt.opacity);if(nt instanceof Hcl)return hcl2lab(nt);nt instanceof Rgb||(nt=rgbConvert(nt));var rt=rgb2lrgb(nt.r),it=rgb2lrgb(nt.g),st=rgb2lrgb(nt.b),bt=xyz2lab((.2225045*rt+.7168786*it+.0606169*st)/Yn),xt,Et;return rt===it&&it===st?xt=Et=bt:(xt=xyz2lab((.4360747*rt+.3850649*it+.1430804*st)/Xn),Et=xyz2lab((.0139322*rt+.0971045*it+.7141733*st)/Zn)),new Lab(116*bt-16,500*(xt-bt),200*(bt-Et),nt.opacity)}function lab(nt,rt,it,st){return arguments.length===1?labConvert(nt):new Lab(nt,rt,it,st==null?1:st)}function Lab(nt,rt,it,st){this.l=+nt,this.a=+rt,this.b=+it,this.opacity=+st}define$1(Lab,lab,extend$1(Color$2,{brighter(nt){return new Lab(this.l+K*(nt==null?1:nt),this.a,this.b,this.opacity)},darker(nt){return new Lab(this.l-K*(nt==null?1:nt),this.a,this.b,this.opacity)},rgb(){var nt=(this.l+16)/116,rt=isNaN(this.a)?nt:nt+this.a/500,it=isNaN(this.b)?nt:nt-this.b/200;return rt=Xn*lab2xyz(rt),nt=Yn*lab2xyz(nt),it=Zn*lab2xyz(it),new Rgb(lrgb2rgb(3.1338561*rt-1.6168667*nt-.4906146*it),lrgb2rgb(-.9787684*rt+1.9161415*nt+.033454*it),lrgb2rgb(.0719453*rt-.2289914*nt+1.4052427*it),this.opacity)}}));function xyz2lab(nt){return nt>t3?Math.pow(nt,1/3):nt/t2+t0$1}function lab2xyz(nt){return nt>t1$1?nt*nt*nt:t2*(nt-t0$1)}function lrgb2rgb(nt){return 255*(nt<=.0031308?12.92*nt:1.055*Math.pow(nt,1/2.4)-.055)}function rgb2lrgb(nt){return(nt/=255)<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)}function hclConvert(nt){if(nt instanceof Hcl)return new Hcl(nt.h,nt.c,nt.l,nt.opacity);if(nt instanceof Lab||(nt=labConvert(nt)),nt.a===0&&nt.b===0)return new Hcl(NaN,0<nt.l&&nt.l<100?0:NaN,nt.l,nt.opacity);var rt=Math.atan2(nt.b,nt.a)*degrees$1;return new Hcl(rt<0?rt+360:rt,Math.sqrt(nt.a*nt.a+nt.b*nt.b),nt.l,nt.opacity)}function hcl$1(nt,rt,it,st){return arguments.length===1?hclConvert(nt):new Hcl(nt,rt,it,st==null?1:st)}function Hcl(nt,rt,it,st){this.h=+nt,this.c=+rt,this.l=+it,this.opacity=+st}function hcl2lab(nt){if(isNaN(nt.h))return new Lab(nt.l,0,0,nt.opacity);var rt=nt.h*radians;return new Lab(nt.l,Math.cos(rt)*nt.c,Math.sin(rt)*nt.c,nt.opacity)}define$1(Hcl,hcl$1,extend$1(Color$2,{brighter(nt){return new Hcl(this.h,this.c,this.l+K*(nt==null?1:nt),this.opacity)},darker(nt){return new Hcl(this.h,this.c,this.l-K*(nt==null?1:nt),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));const constant$2=nt=>()=>nt;function linear$1(nt,rt){return function(it){return nt+it*rt}}function exponential(nt,rt,it){return nt=Math.pow(nt,it),rt=Math.pow(rt,it)-nt,it=1/it,function(st){return Math.pow(nt+st*rt,it)}}function hue(nt,rt){var it=rt-nt;return it?linear$1(nt,it>180||it<-180?it-360*Math.round(it/360):it):constant$2(isNaN(nt)?rt:nt)}function gamma(nt){return(nt=+nt)==1?nogamma:function(rt,it){return it-rt?exponential(rt,it,nt):constant$2(isNaN(rt)?it:rt)}}function nogamma(nt,rt){var it=rt-nt;return it?linear$1(nt,it):constant$2(isNaN(nt)?rt:nt)}const interpolateRgb=function nt(rt){var it=gamma(rt);function st(bt,xt){var Et=it((bt=rgb(bt)).r,(xt=rgb(xt)).r),kt=it(bt.g,xt.g),Lt=it(bt.b,xt.b),Pt=nogamma(bt.opacity,xt.opacity);return function(Rt){return bt.r=Et(Rt),bt.g=kt(Rt),bt.b=Lt(Rt),bt.opacity=Pt(Rt),bt+""}}return st.gamma=nt,st}(1);function numberArray(nt,rt){rt||(rt=[]);var it=nt?Math.min(rt.length,nt.length):0,st=rt.slice(),bt;return function(xt){for(bt=0;bt<it;++bt)st[bt]=nt[bt]*(1-xt)+rt[bt]*xt;return st}}function isNumberArray(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function genericArray(nt,rt){var it=rt?rt.length:0,st=nt?Math.min(it,nt.length):0,bt=new Array(st),xt=new Array(it),Et;for(Et=0;Et<st;++Et)bt[Et]=interpolate$1(nt[Et],rt[Et]);for(;Et<it;++Et)xt[Et]=rt[Et];return function(kt){for(Et=0;Et<st;++Et)xt[Et]=bt[Et](kt);return xt}}function date$1(nt,rt){var it=new Date;return nt=+nt,rt=+rt,function(st){return it.setTime(nt*(1-st)+rt*st),it}}function interpolateNumber(nt,rt){return nt=+nt,rt=+rt,function(it){return nt*(1-it)+rt*it}}function object(nt,rt){var it={},st={},bt;(nt===null||typeof nt!="object")&&(nt={}),(rt===null||typeof rt!="object")&&(rt={});for(bt in rt)bt in nt?it[bt]=interpolate$1(nt[bt],rt[bt]):st[bt]=rt[bt];return function(xt){for(bt in it)st[bt]=it[bt](xt);return st}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(nt){return function(){return nt}}function one(nt){return function(rt){return nt(rt)+""}}function interpolateString(nt,rt){var it=reA.lastIndex=reB.lastIndex=0,st,bt,xt,Et=-1,kt=[],Lt=[];for(nt=nt+"",rt=rt+"";(st=reA.exec(nt))&&(bt=reB.exec(rt));)(xt=bt.index)>it&&(xt=rt.slice(it,xt),kt[Et]?kt[Et]+=xt:kt[++Et]=xt),(st=st[0])===(bt=bt[0])?kt[Et]?kt[Et]+=bt:kt[++Et]=bt:(kt[++Et]=null,Lt.push({i:Et,x:interpolateNumber(st,bt)})),it=reB.lastIndex;return it<rt.length&&(xt=rt.slice(it),kt[Et]?kt[Et]+=xt:kt[++Et]=xt),kt.length<2?Lt[0]?one(Lt[0].x):zero(rt):(rt=Lt.length,function(Pt){for(var Rt=0,Dt;Rt<rt;++Rt)kt[(Dt=Lt[Rt]).i]=Dt.x(Pt);return kt.join("")})}function interpolate$1(nt,rt){var it=typeof rt,st;return rt==null||it==="boolean"?constant$2(rt):(it==="number"?interpolateNumber:it==="string"?(st=color(rt))?(rt=st,interpolateRgb):interpolateString:rt instanceof color?interpolateRgb:rt instanceof Date?date$1:isNumberArray(rt)?numberArray:Array.isArray(rt)?genericArray:typeof rt.valueOf!="function"&&typeof rt.toString!="function"||isNaN(rt)?object:interpolateNumber)(nt,rt)}function interpolateRound(nt,rt){return nt=+nt,rt=+rt,function(it){return Math.round(nt*(1-it)+rt*it)}}var degrees=180/Math.PI,identity$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(nt,rt,it,st,bt,xt){var Et,kt,Lt;return(Et=Math.sqrt(nt*nt+rt*rt))&&(nt/=Et,rt/=Et),(Lt=nt*it+rt*st)&&(it-=nt*Lt,st-=rt*Lt),(kt=Math.sqrt(it*it+st*st))&&(it/=kt,st/=kt,Lt/=kt),nt*st<rt*it&&(nt=-nt,rt=-rt,Lt=-Lt,Et=-Et),{translateX:bt,translateY:xt,rotate:Math.atan2(rt,nt)*degrees,skewX:Math.atan(Lt)*degrees,scaleX:Et,scaleY:kt}}var svgNode;function parseCss(nt){const rt=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(nt+"");return rt.isIdentity?identity$4:decompose(rt.a,rt.b,rt.c,rt.d,rt.e,rt.f)}function parseSvg(nt){return nt==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",nt),!(nt=svgNode.transform.baseVal.consolidate()))?identity$4:(nt=nt.matrix,decompose(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f))}function interpolateTransform(nt,rt,it,st){function bt(Pt){return Pt.length?Pt.pop()+" ":""}function xt(Pt,Rt,Dt,Bt,Ft,Yt){if(Pt!==Dt||Rt!==Bt){var Zt=Ft.push("translate(",null,rt,null,it);Yt.push({i:Zt-4,x:interpolateNumber(Pt,Dt)},{i:Zt-2,x:interpolateNumber(Rt,Bt)})}else(Dt||Bt)&&Ft.push("translate("+Dt+rt+Bt+it)}function Et(Pt,Rt,Dt,Bt){Pt!==Rt?(Pt-Rt>180?Rt+=360:Rt-Pt>180&&(Pt+=360),Bt.push({i:Dt.push(bt(Dt)+"rotate(",null,st)-2,x:interpolateNumber(Pt,Rt)})):Rt&&Dt.push(bt(Dt)+"rotate("+Rt+st)}function kt(Pt,Rt,Dt,Bt){Pt!==Rt?Bt.push({i:Dt.push(bt(Dt)+"skewX(",null,st)-2,x:interpolateNumber(Pt,Rt)}):Rt&&Dt.push(bt(Dt)+"skewX("+Rt+st)}function Lt(Pt,Rt,Dt,Bt,Ft,Yt){if(Pt!==Dt||Rt!==Bt){var Zt=Ft.push(bt(Ft)+"scale(",null,",",null,")");Yt.push({i:Zt-4,x:interpolateNumber(Pt,Dt)},{i:Zt-2,x:interpolateNumber(Rt,Bt)})}else(Dt!==1||Bt!==1)&&Ft.push(bt(Ft)+"scale("+Dt+","+Bt+")")}return function(Pt,Rt){var Dt=[],Bt=[];return Pt=nt(Pt),Rt=nt(Rt),xt(Pt.translateX,Pt.translateY,Rt.translateX,Rt.translateY,Dt,Bt),Et(Pt.rotate,Rt.rotate,Dt,Bt),kt(Pt.skewX,Rt.skewX,Dt,Bt),Lt(Pt.scaleX,Pt.scaleY,Rt.scaleX,Rt.scaleY,Dt,Bt),Pt=Rt=null,function(Ft){for(var Yt=-1,Zt=Bt.length,Wt;++Yt<Zt;)Dt[(Wt=Bt[Yt]).i]=Wt.x(Ft);return Dt.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function hcl(nt){return function(rt,it){var st=nt((rt=hcl$1(rt)).h,(it=hcl$1(it)).h),bt=nogamma(rt.c,it.c),xt=nogamma(rt.l,it.l),Et=nogamma(rt.opacity,it.opacity);return function(kt){return rt.h=st(kt),rt.c=bt(kt),rt.l=xt(kt),rt.opacity=Et(kt),rt+""}}}const interpolateHcl=hcl(hue);var frame$1=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(nt){setTimeout(nt,17)};function now$2(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(nt,rt,it){if(typeof nt!="function")throw new TypeError("callback is not a function");it=(it==null?now$2():+it)+(rt==null?0:+rt),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=nt,this._time=it,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(nt,rt,it){var st=new Timer;return st.restart(nt,rt,it),st}function timerFlush(){now$2(),++frame$1;for(var nt=taskHead,rt;nt;)(rt=clockNow-nt._time)>=0&&nt._call.call(void 0,rt),nt=nt._next;--frame$1}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame$1=timeout$1=0;try{timerFlush()}finally{frame$1=0,nap(),clockNow=0}}function poke(){var nt=clock.now(),rt=nt-clockLast;rt>pokeDelay&&(clockSkew-=rt,clockLast=nt)}function nap(){for(var nt,rt=taskHead,it,st=1/0;rt;)rt._call?(st>rt._time&&(st=rt._time),nt=rt,rt=rt._next):(it=rt._next,rt._next=null,rt=nt?nt._next=it:taskHead=it);taskTail=nt,sleep(st)}function sleep(nt){if(!frame$1){timeout$1&&(timeout$1=clearTimeout(timeout$1));var rt=nt-clockNow;rt>24?(nt<1/0&&(timeout$1=setTimeout(wake,nt-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame$1=1,setFrame(wake))}}function timeout(nt,rt,it){var st=new Timer;return rt=rt==null?0:+rt,st.restart(bt=>{st.stop(),nt(bt+rt)},rt,it),st}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(nt,rt,it,st,bt,xt){var Et=nt.__transition;if(!Et)nt.__transition={};else if(it in Et)return;create$1(nt,it,{name:rt,index:st,group:bt,on:emptyOn,tween:emptyTween,time:xt.time,delay:xt.delay,duration:xt.duration,ease:xt.ease,timer:null,state:CREATED})}function init$2(nt,rt){var it=get$2(nt,rt);if(it.state>CREATED)throw new Error("too late; already scheduled");return it}function set(nt,rt){var it=get$2(nt,rt);if(it.state>STARTED)throw new Error("too late; already running");return it}function get$2(nt,rt){var it=nt.__transition;if(!it||!(it=it[rt]))throw new Error("transition not found");return it}function create$1(nt,rt,it){var st=nt.__transition,bt;st[rt]=it,it.timer=timer(xt,0,it.time);function xt(Pt){it.state=SCHEDULED,it.timer.restart(Et,it.delay,it.time),it.delay<=Pt&&Et(Pt-it.delay)}function Et(Pt){var Rt,Dt,Bt,Ft;if(it.state!==SCHEDULED)return Lt();for(Rt in st)if(Ft=st[Rt],Ft.name===it.name){if(Ft.state===STARTED)return timeout(Et);Ft.state===RUNNING?(Ft.state=ENDED,Ft.timer.stop(),Ft.on.call("interrupt",nt,nt.__data__,Ft.index,Ft.group),delete st[Rt]):+Rt<rt&&(Ft.state=ENDED,Ft.timer.stop(),Ft.on.call("cancel",nt,nt.__data__,Ft.index,Ft.group),delete st[Rt])}if(timeout(function(){it.state===STARTED&&(it.state=RUNNING,it.timer.restart(kt,it.delay,it.time),kt(Pt))}),it.state=STARTING,it.on.call("start",nt,nt.__data__,it.index,it.group),it.state===STARTING){for(it.state=STARTED,bt=new Array(Bt=it.tween.length),Rt=0,Dt=-1;Rt<Bt;++Rt)(Ft=it.tween[Rt].value.call(nt,nt.__data__,it.index,it.group))&&(bt[++Dt]=Ft);bt.length=Dt+1}}function kt(Pt){for(var Rt=Pt<it.duration?it.ease.call(null,Pt/it.duration):(it.timer.restart(Lt),it.state=ENDING,1),Dt=-1,Bt=bt.length;++Dt<Bt;)bt[Dt].call(nt,Rt);it.state===ENDING&&(it.on.call("end",nt,nt.__data__,it.index,it.group),Lt())}function Lt(){it.state=ENDED,it.timer.stop(),delete st[rt];for(var Pt in st)return;delete nt.__transition}}function interrupt(nt,rt){var it=nt.__transition,st,bt,xt=!0,Et;if(!!it){rt=rt==null?null:rt+"";for(Et in it){if((st=it[Et]).name!==rt){xt=!1;continue}bt=st.state>STARTING&&st.state<ENDING,st.state=ENDED,st.timer.stop(),st.on.call(bt?"interrupt":"cancel",nt,nt.__data__,st.index,st.group),delete it[Et]}xt&&delete nt.__transition}}function selection_interrupt(nt){return this.each(function(){interrupt(this,nt)})}function tweenRemove(nt,rt){var it,st;return function(){var bt=set(this,nt),xt=bt.tween;if(xt!==it){st=it=xt;for(var Et=0,kt=st.length;Et<kt;++Et)if(st[Et].name===rt){st=st.slice(),st.splice(Et,1);break}}bt.tween=st}}function tweenFunction(nt,rt,it){var st,bt;if(typeof it!="function")throw new Error;return function(){var xt=set(this,nt),Et=xt.tween;if(Et!==st){bt=(st=Et).slice();for(var kt={name:rt,value:it},Lt=0,Pt=bt.length;Lt<Pt;++Lt)if(bt[Lt].name===rt){bt[Lt]=kt;break}Lt===Pt&&bt.push(kt)}xt.tween=bt}}function transition_tween(nt,rt){var it=this._id;if(nt+="",arguments.length<2){for(var st=get$2(this.node(),it).tween,bt=0,xt=st.length,Et;bt<xt;++bt)if((Et=st[bt]).name===nt)return Et.value;return null}return this.each((rt==null?tweenRemove:tweenFunction)(it,nt,rt))}function tweenValue(nt,rt,it){var st=nt._id;return nt.each(function(){var bt=set(this,st);(bt.value||(bt.value={}))[rt]=it.apply(this,arguments)}),function(bt){return get$2(bt,st).value[rt]}}function interpolate(nt,rt){var it;return(typeof rt=="number"?interpolateNumber:rt instanceof color?interpolateRgb:(it=color(rt))?(rt=it,interpolateRgb):interpolateString)(nt,rt)}function attrRemove(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant(nt,rt,it){var st,bt=it+"",xt;return function(){var Et=this.getAttribute(nt);return Et===bt?null:Et===st?xt:xt=rt(st=Et,it)}}function attrConstantNS(nt,rt,it){var st,bt=it+"",xt;return function(){var Et=this.getAttributeNS(nt.space,nt.local);return Et===bt?null:Et===st?xt:xt=rt(st=Et,it)}}function attrFunction(nt,rt,it){var st,bt,xt;return function(){var Et,kt=it(this),Lt;return kt==null?void this.removeAttribute(nt):(Et=this.getAttribute(nt),Lt=kt+"",Et===Lt?null:Et===st&&Lt===bt?xt:(bt=Lt,xt=rt(st=Et,kt)))}}function attrFunctionNS(nt,rt,it){var st,bt,xt;return function(){var Et,kt=it(this),Lt;return kt==null?void this.removeAttributeNS(nt.space,nt.local):(Et=this.getAttributeNS(nt.space,nt.local),Lt=kt+"",Et===Lt?null:Et===st&&Lt===bt?xt:(bt=Lt,xt=rt(st=Et,kt)))}}function transition_attr(nt,rt){var it=namespace(nt),st=it==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(nt,typeof rt=="function"?(it.local?attrFunctionNS:attrFunction)(it,st,tweenValue(this,"attr."+nt,rt)):rt==null?(it.local?attrRemoveNS:attrRemove)(it):(it.local?attrConstantNS:attrConstant)(it,st,rt))}function attrInterpolate(nt,rt){return function(it){this.setAttribute(nt,rt.call(this,it))}}function attrInterpolateNS(nt,rt){return function(it){this.setAttributeNS(nt.space,nt.local,rt.call(this,it))}}function attrTweenNS(nt,rt){var it,st;function bt(){var xt=rt.apply(this,arguments);return xt!==st&&(it=(st=xt)&&attrInterpolateNS(nt,xt)),it}return bt._value=rt,bt}function attrTween(nt,rt){var it,st;function bt(){var xt=rt.apply(this,arguments);return xt!==st&&(it=(st=xt)&&attrInterpolate(nt,xt)),it}return bt._value=rt,bt}function transition_attrTween(nt,rt){var it="attr."+nt;if(arguments.length<2)return(it=this.tween(it))&&it._value;if(rt==null)return this.tween(it,null);if(typeof rt!="function")throw new Error;var st=namespace(nt);return this.tween(it,(st.local?attrTweenNS:attrTween)(st,rt))}function delayFunction(nt,rt){return function(){init$2(this,nt).delay=+rt.apply(this,arguments)}}function delayConstant(nt,rt){return rt=+rt,function(){init$2(this,nt).delay=rt}}function transition_delay(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?delayFunction:delayConstant)(rt,nt)):get$2(this.node(),rt).delay}function durationFunction(nt,rt){return function(){set(this,nt).duration=+rt.apply(this,arguments)}}function durationConstant(nt,rt){return rt=+rt,function(){set(this,nt).duration=rt}}function transition_duration(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?durationFunction:durationConstant)(rt,nt)):get$2(this.node(),rt).duration}function easeConstant(nt,rt){if(typeof rt!="function")throw new Error;return function(){set(this,nt).ease=rt}}function transition_ease(nt){var rt=this._id;return arguments.length?this.each(easeConstant(rt,nt)):get$2(this.node(),rt).ease}function easeVarying(nt,rt){return function(){var it=rt.apply(this,arguments);if(typeof it!="function")throw new Error;set(this,nt).ease=it}}function transition_easeVarying(nt){if(typeof nt!="function")throw new Error;return this.each(easeVarying(this._id,nt))}function transition_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),bt=0;bt<it;++bt)for(var xt=rt[bt],Et=xt.length,kt=st[bt]=[],Lt,Pt=0;Pt<Et;++Pt)(Lt=xt[Pt])&&nt.call(Lt,Lt.__data__,Pt,xt)&&kt.push(Lt);return new Transition(st,this._parents,this._name,this._id)}function transition_merge(nt){if(nt._id!==this._id)throw new Error;for(var rt=this._groups,it=nt._groups,st=rt.length,bt=it.length,xt=Math.min(st,bt),Et=new Array(st),kt=0;kt<xt;++kt)for(var Lt=rt[kt],Pt=it[kt],Rt=Lt.length,Dt=Et[kt]=new Array(Rt),Bt,Ft=0;Ft<Rt;++Ft)(Bt=Lt[Ft]||Pt[Ft])&&(Dt[Ft]=Bt);for(;kt<st;++kt)Et[kt]=rt[kt];return new Transition(Et,this._parents,this._name,this._id)}function start$1(nt){return(nt+"").trim().split(/^|\s+/).every(function(rt){var it=rt.indexOf(".");return it>=0&&(rt=rt.slice(0,it)),!rt||rt==="start"})}function onFunction(nt,rt,it){var st,bt,xt=start$1(rt)?init$2:set;return function(){var Et=xt(this,nt),kt=Et.on;kt!==st&&(bt=(st=kt).copy()).on(rt,it),Et.on=bt}}function transition_on(nt,rt){var it=this._id;return arguments.length<2?get$2(this.node(),it).on.on(nt):this.each(onFunction(it,nt,rt))}function removeFunction(nt){return function(){var rt=this.parentNode;for(var it in this.__transition)if(+it!==nt)return;rt&&rt.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selector(nt));for(var st=this._groups,bt=st.length,xt=new Array(bt),Et=0;Et<bt;++Et)for(var kt=st[Et],Lt=kt.length,Pt=xt[Et]=new Array(Lt),Rt,Dt,Bt=0;Bt<Lt;++Bt)(Rt=kt[Bt])&&(Dt=nt.call(Rt,Rt.__data__,Bt,kt))&&("__data__"in Rt&&(Dt.__data__=Rt.__data__),Pt[Bt]=Dt,schedule(Pt[Bt],rt,it,Bt,Pt,get$2(Rt,it)));return new Transition(xt,this._parents,rt,it)}function transition_selectAll(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selectorAll(nt));for(var st=this._groups,bt=st.length,xt=[],Et=[],kt=0;kt<bt;++kt)for(var Lt=st[kt],Pt=Lt.length,Rt,Dt=0;Dt<Pt;++Dt)if(Rt=Lt[Dt]){for(var Bt=nt.call(Rt,Rt.__data__,Dt,Lt),Ft,Yt=get$2(Rt,it),Zt=0,Wt=Bt.length;Zt<Wt;++Zt)(Ft=Bt[Zt])&&schedule(Ft,rt,it,Zt,Bt,Yt);xt.push(Bt),Et.push(Rt)}return new Transition(xt,Et,rt,it)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(nt,rt){var it,st,bt;return function(){var xt=styleValue(this,nt),Et=(this.style.removeProperty(nt),styleValue(this,nt));return xt===Et?null:xt===it&&Et===st?bt:bt=rt(it=xt,st=Et)}}function styleRemove(nt){return function(){this.style.removeProperty(nt)}}function styleConstant(nt,rt,it){var st,bt=it+"",xt;return function(){var Et=styleValue(this,nt);return Et===bt?null:Et===st?xt:xt=rt(st=Et,it)}}function styleFunction(nt,rt,it){var st,bt,xt;return function(){var Et=styleValue(this,nt),kt=it(this),Lt=kt+"";return kt==null&&(Lt=kt=(this.style.removeProperty(nt),styleValue(this,nt))),Et===Lt?null:Et===st&&Lt===bt?xt:(bt=Lt,xt=rt(st=Et,kt))}}function styleMaybeRemove(nt,rt){var it,st,bt,xt="style."+rt,Et="end."+xt,kt;return function(){var Lt=set(this,nt),Pt=Lt.on,Rt=Lt.value[xt]==null?kt||(kt=styleRemove(rt)):void 0;(Pt!==it||bt!==Rt)&&(st=(it=Pt).copy()).on(Et,bt=Rt),Lt.on=st}}function transition_style(nt,rt,it){var st=(nt+="")=="transform"?interpolateTransformCss:interpolate;return rt==null?this.styleTween(nt,styleNull(nt,st)).on("end.style."+nt,styleRemove(nt)):typeof rt=="function"?this.styleTween(nt,styleFunction(nt,st,tweenValue(this,"style."+nt,rt))).each(styleMaybeRemove(this._id,nt)):this.styleTween(nt,styleConstant(nt,st,rt),it).on("end.style."+nt,null)}function styleInterpolate(nt,rt,it){return function(st){this.style.setProperty(nt,rt.call(this,st),it)}}function styleTween(nt,rt,it){var st,bt;function xt(){var Et=rt.apply(this,arguments);return Et!==bt&&(st=(bt=Et)&&styleInterpolate(nt,Et,it)),st}return xt._value=rt,xt}function transition_styleTween(nt,rt,it){var st="style."+(nt+="");if(arguments.length<2)return(st=this.tween(st))&&st._value;if(rt==null)return this.tween(st,null);if(typeof rt!="function")throw new Error;return this.tween(st,styleTween(nt,rt,it==null?"":it))}function textConstant(nt){return function(){this.textContent=nt}}function textFunction(nt){return function(){var rt=nt(this);this.textContent=rt==null?"":rt}}function transition_text(nt){return this.tween("text",typeof nt=="function"?textFunction(tweenValue(this,"text",nt)):textConstant(nt==null?"":nt+""))}function textInterpolate(nt){return function(rt){this.textContent=nt.call(this,rt)}}function textTween(nt){var rt,it;function st(){var bt=nt.apply(this,arguments);return bt!==it&&(rt=(it=bt)&&textInterpolate(bt)),rt}return st._value=nt,st}function transition_textTween(nt){var rt="text";if(arguments.length<1)return(rt=this.tween(rt))&&rt._value;if(nt==null)return this.tween(rt,null);if(typeof nt!="function")throw new Error;return this.tween(rt,textTween(nt))}function transition_transition(){for(var nt=this._name,rt=this._id,it=newId(),st=this._groups,bt=st.length,xt=0;xt<bt;++xt)for(var Et=st[xt],kt=Et.length,Lt,Pt=0;Pt<kt;++Pt)if(Lt=Et[Pt]){var Rt=get$2(Lt,rt);schedule(Lt,nt,it,Pt,Et,{time:Rt.time+Rt.delay+Rt.duration,delay:0,duration:Rt.duration,ease:Rt.ease})}return new Transition(st,this._parents,nt,it)}function transition_end(){var nt,rt,it=this,st=it._id,bt=it.size();return new Promise(function(xt,Et){var kt={value:Et},Lt={value:function(){--bt===0&&xt()}};it.each(function(){var Pt=set(this,st),Rt=Pt.on;Rt!==nt&&(rt=(nt=Rt).copy(),rt._.cancel.push(kt),rt._.interrupt.push(kt),rt._.end.push(Lt)),Pt.on=rt}),bt===0&&xt()})}var id$4=0;function Transition(nt,rt,it,st){this._groups=nt,this._parents=rt,this._name=it,this._id=st}function newId(){return++id$4}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(nt){return((nt*=2)<=1?nt*nt*nt:(nt-=2)*nt*nt+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(nt,rt){for(var it;!(it=nt.__transition)||!(it=it[rt]);)if(!(nt=nt.parentNode))throw new Error(`transition ${rt} not found`);return it}function selection_transition(nt){var rt,it;nt instanceof Transition?(rt=nt._id,nt=nt._name):(rt=newId(),(it=defaultTiming).time=now$2(),nt=nt==null?null:nt+"");for(var st=this._groups,bt=st.length,xt=0;xt<bt;++xt)for(var Et=st[xt],kt=Et.length,Lt,Pt=0;Pt<kt;++Pt)(Lt=Et[Pt])&&schedule(Lt,nt,rt,Pt,Et,it||inherit(Lt,rt));return new Transition(st,this._parents,nt,rt)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon=tau$1-epsilon$1;function append$1(nt){this._+=nt[0];for(let rt=1,it=nt.length;rt<it;++rt)this._+=arguments[rt]+nt[rt]}function appendRound(nt){let rt=Math.floor(nt);if(!(rt>=0))throw new Error(`invalid digits: ${nt}`);if(rt>15)return append$1;const it=10**rt;return function(st){this._+=st[0];for(let bt=1,xt=st.length;bt<xt;++bt)this._+=Math.round(arguments[bt]*it)/it+st[bt]}}class Path{constructor(rt){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=rt==null?append$1:appendRound(rt)}moveTo(rt,it){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(rt,it){this._append`L${this._x1=+rt},${this._y1=+it}`}quadraticCurveTo(rt,it,st,bt){this._append`Q${+rt},${+it},${this._x1=+st},${this._y1=+bt}`}bezierCurveTo(rt,it,st,bt,xt,Et){this._append`C${+rt},${+it},${+st},${+bt},${this._x1=+xt},${this._y1=+Et}`}arcTo(rt,it,st,bt,xt){if(rt=+rt,it=+it,st=+st,bt=+bt,xt=+xt,xt<0)throw new Error(`negative radius: ${xt}`);let Et=this._x1,kt=this._y1,Lt=st-rt,Pt=bt-it,Rt=Et-rt,Dt=kt-it,Bt=Rt*Rt+Dt*Dt;if(this._x1===null)this._append`M${this._x1=rt},${this._y1=it}`;else if(Bt>epsilon$1)if(!(Math.abs(Dt*Lt-Pt*Rt)>epsilon$1)||!xt)this._append`L${this._x1=rt},${this._y1=it}`;else{let Ft=st-Et,Yt=bt-kt,Zt=Lt*Lt+Pt*Pt,Wt=Ft*Ft+Yt*Yt,Qt=Math.sqrt(Zt),Kt=Math.sqrt(Bt),on=xt*Math.tan((pi$1-Math.acos((Zt+Bt-Wt)/(2*Qt*Kt)))/2),nn=on/Kt,mn=on/Qt;Math.abs(nn-1)>epsilon$1&&this._append`L${rt+nn*Rt},${it+nn*Dt}`,this._append`A${xt},${xt},0,0,${+(Dt*Ft>Rt*Yt)},${this._x1=rt+mn*Lt},${this._y1=it+mn*Pt}`}}arc(rt,it,st,bt,xt,Et){if(rt=+rt,it=+it,st=+st,Et=!!Et,st<0)throw new Error(`negative radius: ${st}`);let kt=st*Math.cos(bt),Lt=st*Math.sin(bt),Pt=rt+kt,Rt=it+Lt,Dt=1^Et,Bt=Et?bt-xt:xt-bt;this._x1===null?this._append`M${Pt},${Rt}`:(Math.abs(this._x1-Pt)>epsilon$1||Math.abs(this._y1-Rt)>epsilon$1)&&this._append`L${Pt},${Rt}`,st&&(Bt<0&&(Bt=Bt%tau$1+tau$1),Bt>tauEpsilon?this._append`A${st},${st},0,1,${Dt},${rt-kt},${it-Lt}A${st},${st},0,1,${Dt},${this._x1=Pt},${this._y1=Rt}`:Bt>epsilon$1&&this._append`A${st},${st},0,${+(Bt>=pi$1)},${Dt},${this._x1=rt+st*Math.cos(xt)},${this._y1=it+st*Math.sin(xt)}`)}rect(rt,it,st,bt){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}h${st=+st}v${+bt}h${-st}Z`}toString(){return this._}}function responseText(nt){if(!nt.ok)throw new Error(nt.status+" "+nt.statusText);return nt.text()}function text$1(nt,rt){return fetch(nt,rt).then(responseText)}function parser$d(nt){return(rt,it)=>text$1(rt,it).then(st=>new DOMParser().parseFromString(st,nt))}var svg$2=parser$d("image/svg+xml");function formatDecimal(nt){return Math.abs(nt=Math.round(nt))>=1e21?nt.toLocaleString("en").replace(/,/g,""):nt.toString(10)}function formatDecimalParts(nt,rt){if((it=(nt=rt?nt.toExponential(rt-1):nt.toExponential()).indexOf("e"))<0)return null;var it,st=nt.slice(0,it);return[st.length>1?st[0]+st.slice(2):st,+nt.slice(it+1)]}function exponent(nt){return nt=formatDecimalParts(Math.abs(nt)),nt?nt[1]:NaN}function formatGroup(nt,rt){return function(it,st){for(var bt=it.length,xt=[],Et=0,kt=nt[0],Lt=0;bt>0&&kt>0&&(Lt+kt+1>st&&(kt=Math.max(1,st-Lt)),xt.push(it.substring(bt-=kt,bt+kt)),!((Lt+=kt+1)>st));)kt=nt[Et=(Et+1)%nt.length];return xt.reverse().join(rt)}}function formatNumerals(nt){return function(rt){return rt.replace(/[0-9]/g,function(it){return nt[+it]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(nt){if(!(rt=re.exec(nt)))throw new Error("invalid format: "+nt);var rt;return new FormatSpecifier({fill:rt[1],align:rt[2],sign:rt[3],symbol:rt[4],zero:rt[5],width:rt[6],comma:rt[7],precision:rt[8]&&rt[8].slice(1),trim:rt[9],type:rt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(nt){this.fill=nt.fill===void 0?" ":nt.fill+"",this.align=nt.align===void 0?">":nt.align+"",this.sign=nt.sign===void 0?"-":nt.sign+"",this.symbol=nt.symbol===void 0?"":nt.symbol+"",this.zero=!!nt.zero,this.width=nt.width===void 0?void 0:+nt.width,this.comma=!!nt.comma,this.precision=nt.precision===void 0?void 0:+nt.precision,this.trim=!!nt.trim,this.type=nt.type===void 0?"":nt.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(nt){e:for(var rt=nt.length,it=1,st=-1,bt;it<rt;++it)switch(nt[it]){case".":st=bt=it;break;case"0":st===0&&(st=it),bt=it;break;default:if(!+nt[it])break e;st>0&&(st=0);break}return st>0?nt.slice(0,st)+nt.slice(bt+1):nt}var prefixExponent;function formatPrefixAuto(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var st=it[0],bt=it[1],xt=bt-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(bt/3)))*3)+1,Et=st.length;return xt===Et?st:xt>Et?st+new Array(xt-Et+1).join("0"):xt>0?st.slice(0,xt)+"."+st.slice(xt):"0."+new Array(1-xt).join("0")+formatDecimalParts(nt,Math.max(0,rt+xt-1))[0]}function formatRounded(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var st=it[0],bt=it[1];return bt<0?"0."+new Array(-bt).join("0")+st:st.length>bt+1?st.slice(0,bt+1)+"."+st.slice(bt+1):st+new Array(bt-st.length+2).join("0")}const formatTypes={"%":(nt,rt)=>(nt*100).toFixed(rt),b:nt=>Math.round(nt).toString(2),c:nt=>nt+"",d:formatDecimal,e:(nt,rt)=>nt.toExponential(rt),f:(nt,rt)=>nt.toFixed(rt),g:(nt,rt)=>nt.toPrecision(rt),o:nt=>Math.round(nt).toString(8),p:(nt,rt)=>formatRounded(nt*100,rt),r:formatRounded,s:formatPrefixAuto,X:nt=>Math.round(nt).toString(16).toUpperCase(),x:nt=>Math.round(nt).toString(16)};function identity$3(nt){return nt}var map$2=Array.prototype.map,prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(nt){var rt=nt.grouping===void 0||nt.thousands===void 0?identity$3:formatGroup(map$2.call(nt.grouping,Number),nt.thousands+""),it=nt.currency===void 0?"":nt.currency[0]+"",st=nt.currency===void 0?"":nt.currency[1]+"",bt=nt.decimal===void 0?".":nt.decimal+"",xt=nt.numerals===void 0?identity$3:formatNumerals(map$2.call(nt.numerals,String)),Et=nt.percent===void 0?"%":nt.percent+"",kt=nt.minus===void 0?"\u2212":nt.minus+"",Lt=nt.nan===void 0?"NaN":nt.nan+"";function Pt(Dt){Dt=formatSpecifier(Dt);var Bt=Dt.fill,Ft=Dt.align,Yt=Dt.sign,Zt=Dt.symbol,Wt=Dt.zero,Qt=Dt.width,Kt=Dt.comma,on=Dt.precision,nn=Dt.trim,mn=Dt.type;mn==="n"?(Kt=!0,mn="g"):formatTypes[mn]||(on===void 0&&(on=12),nn=!0,mn="g"),(Wt||Bt==="0"&&Ft==="=")&&(Wt=!0,Bt="0",Ft="=");var gn=Zt==="$"?it:Zt==="#"&&/[boxX]/.test(mn)?"0"+mn.toLowerCase():"",Tn=Zt==="$"?st:/[%p]/.test(mn)?Et:"",An=formatTypes[mn],kn=/[defgprs%]/.test(mn);on=on===void 0?6:/[gprs]/.test(mn)?Math.max(1,Math.min(21,on)):Math.max(0,Math.min(20,on));function Mn($n){var cn=gn,Sn=Tn,an,jn,hn;if(mn==="c")Sn=An($n)+Sn,$n="";else{$n=+$n;var zn=$n<0||1/$n<0;if($n=isNaN($n)?Lt:An(Math.abs($n),on),nn&&($n=formatTrim($n)),zn&&+$n==0&&Yt!=="+"&&(zn=!1),cn=(zn?Yt==="("?Yt:kt:Yt==="-"||Yt==="("?"":Yt)+cn,Sn=(mn==="s"?prefixes[8+prefixExponent/3]:"")+Sn+(zn&&Yt==="("?")":""),kn){for(an=-1,jn=$n.length;++an<jn;)if(hn=$n.charCodeAt(an),48>hn||hn>57){Sn=(hn===46?bt+$n.slice(an+1):$n.slice(an))+Sn,$n=$n.slice(0,an);break}}}Kt&&!Wt&&($n=rt($n,1/0));var ir=cn.length+$n.length+Sn.length,tr=ir<Qt?new Array(Qt-ir+1).join(Bt):"";switch(Kt&&Wt&&($n=rt(tr+$n,tr.length?Qt-Sn.length:1/0),tr=""),Ft){case"<":$n=cn+$n+Sn+tr;break;case"=":$n=cn+tr+$n+Sn;break;case"^":$n=tr.slice(0,ir=tr.length>>1)+cn+$n+Sn+tr.slice(ir);break;default:$n=tr+cn+$n+Sn;break}return xt($n)}return Mn.toString=function(){return Dt+""},Mn}function Rt(Dt,Bt){var Ft=Pt((Dt=formatSpecifier(Dt),Dt.type="f",Dt)),Yt=Math.max(-8,Math.min(8,Math.floor(exponent(Bt)/3)))*3,Zt=Math.pow(10,-Yt),Wt=prefixes[8+Yt/3];return function(Qt){return Ft(Zt*Qt)+Wt}}return{format:Pt,formatPrefix:Rt}}var locale$1,format$1,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(nt){return locale$1=formatLocale$1(nt),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(nt){return Math.max(0,-exponent(Math.abs(nt)))}function precisionPrefix(nt,rt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(rt)/3)))*3-exponent(Math.abs(nt)))}function precisionRound(nt,rt){return nt=Math.abs(nt),rt=Math.abs(rt)-nt,Math.max(0,exponent(rt)-exponent(nt))+1}function initRange(nt,rt){switch(arguments.length){case 0:break;case 1:this.range(nt);break;default:this.range(rt).domain(nt);break}return this}const implicit=Symbol("implicit");function ordinal(){var nt=new InternMap,rt=[],it=[],st=implicit;function bt(xt){let Et=nt.get(xt);if(Et===void 0){if(st!==implicit)return st;nt.set(xt,Et=rt.push(xt)-1)}return it[Et%it.length]}return bt.domain=function(xt){if(!arguments.length)return rt.slice();rt=[],nt=new InternMap;for(const Et of xt)nt.has(Et)||nt.set(Et,rt.push(Et)-1);return bt},bt.range=function(xt){return arguments.length?(it=Array.from(xt),bt):it.slice()},bt.unknown=function(xt){return arguments.length?(st=xt,bt):st},bt.copy=function(){return ordinal(rt,it).unknown(st)},initRange.apply(bt,arguments),bt}function constants$1(nt){return function(){return nt}}function number$1(nt){return+nt}var unit$1=[0,1];function identity$2(nt){return nt}function normalize(nt,rt){return(rt-=nt=+nt)?function(it){return(it-nt)/rt}:constants$1(isNaN(rt)?NaN:.5)}function clamper(nt,rt){var it;return nt>rt&&(it=nt,nt=rt,rt=it),function(st){return Math.max(nt,Math.min(rt,st))}}function bimap(nt,rt,it){var st=nt[0],bt=nt[1],xt=rt[0],Et=rt[1];return bt<st?(st=normalize(bt,st),xt=it(Et,xt)):(st=normalize(st,bt),xt=it(xt,Et)),function(kt){return xt(st(kt))}}function polymap(nt,rt,it){var st=Math.min(nt.length,rt.length)-1,bt=new Array(st),xt=new Array(st),Et=-1;for(nt[st]<nt[0]&&(nt=nt.slice().reverse(),rt=rt.slice().reverse());++Et<st;)bt[Et]=normalize(nt[Et],nt[Et+1]),xt[Et]=it(rt[Et],rt[Et+1]);return function(kt){var Lt=bisect(nt,kt,1,st)-1;return xt[Lt](bt[Lt](kt))}}function copy$1(nt,rt){return rt.domain(nt.domain()).range(nt.range()).interpolate(nt.interpolate()).clamp(nt.clamp()).unknown(nt.unknown())}function transformer(){var nt=unit$1,rt=unit$1,it=interpolate$1,st,bt,xt,Et=identity$2,kt,Lt,Pt;function Rt(){var Bt=Math.min(nt.length,rt.length);return Et!==identity$2&&(Et=clamper(nt[0],nt[Bt-1])),kt=Bt>2?polymap:bimap,Lt=Pt=null,Dt}function Dt(Bt){return Bt==null||isNaN(Bt=+Bt)?xt:(Lt||(Lt=kt(nt.map(st),rt,it)))(st(Et(Bt)))}return Dt.invert=function(Bt){return Et(bt((Pt||(Pt=kt(rt,nt.map(st),interpolateNumber)))(Bt)))},Dt.domain=function(Bt){return arguments.length?(nt=Array.from(Bt,number$1),Rt()):nt.slice()},Dt.range=function(Bt){return arguments.length?(rt=Array.from(Bt),Rt()):rt.slice()},Dt.rangeRound=function(Bt){return rt=Array.from(Bt),it=interpolateRound,Rt()},Dt.clamp=function(Bt){return arguments.length?(Et=Bt?!0:identity$2,Rt()):Et!==identity$2},Dt.interpolate=function(Bt){return arguments.length?(it=Bt,Rt()):it},Dt.unknown=function(Bt){return arguments.length?(xt=Bt,Dt):xt},function(Bt,Ft){return st=Bt,bt=Ft,Rt()}}function continuous(){return transformer()(identity$2,identity$2)}function tickFormat(nt,rt,it,st){var bt=tickStep(nt,rt,it),xt;switch(st=formatSpecifier(st==null?",f":st),st.type){case"s":{var Et=Math.max(Math.abs(nt),Math.abs(rt));return st.precision==null&&!isNaN(xt=precisionPrefix(bt,Et))&&(st.precision=xt),formatPrefix(st,Et)}case"":case"e":case"g":case"p":case"r":{st.precision==null&&!isNaN(xt=precisionRound(bt,Math.max(Math.abs(nt),Math.abs(rt))))&&(st.precision=xt-(st.type==="e"));break}case"f":case"%":{st.precision==null&&!isNaN(xt=precisionFixed(bt))&&(st.precision=xt-(st.type==="%")*2);break}}return format$1(st)}function linearish(nt){var rt=nt.domain;return nt.ticks=function(it){var st=rt();return ticks(st[0],st[st.length-1],it==null?10:it)},nt.tickFormat=function(it,st){var bt=rt();return tickFormat(bt[0],bt[bt.length-1],it==null?10:it,st)},nt.nice=function(it){it==null&&(it=10);var st=rt(),bt=0,xt=st.length-1,Et=st[bt],kt=st[xt],Lt,Pt,Rt=10;for(kt<Et&&(Pt=Et,Et=kt,kt=Pt,Pt=bt,bt=xt,xt=Pt);Rt-- >0;){if(Pt=tickIncrement(Et,kt,it),Pt===Lt)return st[bt]=Et,st[xt]=kt,rt(st);if(Pt>0)Et=Math.floor(Et/Pt)*Pt,kt=Math.ceil(kt/Pt)*Pt;else if(Pt<0)Et=Math.ceil(Et*Pt)/Pt,kt=Math.floor(kt*Pt)/Pt;else break;Lt=Pt}return nt},nt}function linear(){var nt=continuous();return nt.copy=function(){return copy$1(nt,linear())},initRange.apply(nt,arguments),linearish(nt)}function nice(nt,rt){nt=nt.slice();var it=0,st=nt.length-1,bt=nt[it],xt=nt[st],Et;return xt<bt&&(Et=it,it=st,st=Et,Et=bt,bt=xt,xt=Et),nt[it]=rt.floor(bt),nt[st]=rt.ceil(xt),nt}const t0=new Date,t1=new Date;function timeInterval(nt,rt,it,st){function bt(xt){return nt(xt=arguments.length===0?new Date:new Date(+xt)),xt}return bt.floor=xt=>(nt(xt=new Date(+xt)),xt),bt.ceil=xt=>(nt(xt=new Date(xt-1)),rt(xt,1),nt(xt),xt),bt.round=xt=>{const Et=bt(xt),kt=bt.ceil(xt);return xt-Et<kt-xt?Et:kt},bt.offset=(xt,Et)=>(rt(xt=new Date(+xt),Et==null?1:Math.floor(Et)),xt),bt.range=(xt,Et,kt)=>{const Lt=[];if(xt=bt.ceil(xt),kt=kt==null?1:Math.floor(kt),!(xt<Et)||!(kt>0))return Lt;let Pt;do Lt.push(Pt=new Date(+xt)),rt(xt,kt),nt(xt);while(Pt<xt&&xt<Et);return Lt},bt.filter=xt=>timeInterval(Et=>{if(Et>=Et)for(;nt(Et),!xt(Et);)Et.setTime(Et-1)},(Et,kt)=>{if(Et>=Et)if(kt<0)for(;++kt<=0;)for(;rt(Et,-1),!xt(Et););else for(;--kt>=0;)for(;rt(Et,1),!xt(Et););}),it&&(bt.count=(xt,Et)=>(t0.setTime(+xt),t1.setTime(+Et),nt(t0),nt(t1),Math.floor(it(t0,t1))),bt.every=xt=>(xt=Math.floor(xt),!isFinite(xt)||!(xt>0)?null:xt>1?bt.filter(st?Et=>st(Et)%xt===0:Et=>bt.count(0,Et)%xt===0):bt)),bt}const millisecond=timeInterval(()=>{},(nt,rt)=>{nt.setTime(+nt+rt)},(nt,rt)=>rt-nt);millisecond.every=nt=>(nt=Math.floor(nt),!isFinite(nt)||!(nt>0)?null:nt>1?timeInterval(rt=>{rt.setTime(Math.floor(rt/nt)*nt)},(rt,it)=>{rt.setTime(+rt+it*nt)},(rt,it)=>(it-rt)/nt):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds())},(nt,rt)=>{nt.setTime(+nt+rt*durationSecond)},(nt,rt)=>(rt-nt)/durationSecond,nt=>nt.getUTCSeconds());second.range;const timeMinute=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getMinutes());timeMinute.range;const utcMinute=timeInterval(nt=>{nt.setUTCSeconds(0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond-nt.getMinutes()*durationMinute)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getHours());timeHour.range;const utcHour=timeInterval(nt=>{nt.setUTCMinutes(0,0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getUTCHours());utcHour.range;const timeDay=timeInterval(nt=>nt.setHours(0,0,0,0),(nt,rt)=>nt.setDate(nt.getDate()+rt),(nt,rt)=>(rt-nt-(rt.getTimezoneOffset()-nt.getTimezoneOffset())*durationMinute)/durationDay,nt=>nt.getDate()-1);timeDay.range;const utcDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>nt.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>Math.floor(nt/durationDay));unixDay.range;function timeWeekday(nt){return timeInterval(rt=>{rt.setDate(rt.getDate()-(rt.getDay()+7-nt)%7),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setDate(rt.getDate()+it*7)},(rt,it)=>(it-rt-(it.getTimezoneOffset()-rt.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(nt){return timeInterval(rt=>{rt.setUTCDate(rt.getUTCDate()-(rt.getUTCDay()+7-nt)%7),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCDate(rt.getUTCDate()+it*7)},(rt,it)=>(it-rt)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(nt=>{nt.setDate(1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setMonth(nt.getMonth()+rt)},(nt,rt)=>rt.getMonth()-nt.getMonth()+(rt.getFullYear()-nt.getFullYear())*12,nt=>nt.getMonth());timeMonth.range;const utcMonth=timeInterval(nt=>{nt.setUTCDate(1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCMonth(nt.getUTCMonth()+rt)},(nt,rt)=>rt.getUTCMonth()-nt.getUTCMonth()+(rt.getUTCFullYear()-nt.getUTCFullYear())*12,nt=>nt.getUTCMonth());utcMonth.range;const timeYear=timeInterval(nt=>{nt.setMonth(0,1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setFullYear(nt.getFullYear()+rt)},(nt,rt)=>rt.getFullYear()-nt.getFullYear(),nt=>nt.getFullYear());timeYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setFullYear(Math.floor(rt.getFullYear()/nt)*nt),rt.setMonth(0,1),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setFullYear(rt.getFullYear()+it*nt)});timeYear.range;const utcYear=timeInterval(nt=>{nt.setUTCMonth(0,1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCFullYear(nt.getUTCFullYear()+rt)},(nt,rt)=>rt.getUTCFullYear()-nt.getUTCFullYear(),nt=>nt.getUTCFullYear());utcYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setUTCFullYear(Math.floor(rt.getUTCFullYear()/nt)*nt),rt.setUTCMonth(0,1),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCFullYear(rt.getUTCFullYear()+it*nt)});utcYear.range;function ticker(nt,rt,it,st,bt,xt){const Et=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[xt,1,durationMinute],[xt,5,5*durationMinute],[xt,15,15*durationMinute],[xt,30,30*durationMinute],[bt,1,durationHour],[bt,3,3*durationHour],[bt,6,6*durationHour],[bt,12,12*durationHour],[st,1,durationDay],[st,2,2*durationDay],[it,1,durationWeek],[rt,1,durationMonth],[rt,3,3*durationMonth],[nt,1,durationYear]];function kt(Pt,Rt,Dt){const Bt=Rt<Pt;Bt&&([Pt,Rt]=[Rt,Pt]);const Ft=Dt&&typeof Dt.range=="function"?Dt:Lt(Pt,Rt,Dt),Yt=Ft?Ft.range(Pt,+Rt+1):[];return Bt?Yt.reverse():Yt}function Lt(Pt,Rt,Dt){const Bt=Math.abs(Rt-Pt)/Dt,Ft=bisector(([,,Wt])=>Wt).right(Et,Bt);if(Ft===Et.length)return nt.every(tickStep(Pt/durationYear,Rt/durationYear,Dt));if(Ft===0)return millisecond.every(Math.max(tickStep(Pt,Rt,Dt),1));const[Yt,Zt]=Et[Bt/Et[Ft-1][2]<Et[Ft][2]/Bt?Ft-1:Ft];return Yt.every(Zt)}return[kt,Lt]}ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute);const[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L);return rt.setFullYear(nt.y),rt}return new Date(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L)}function utcDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(Date.UTC(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L));return rt.setUTCFullYear(nt.y),rt}return new Date(Date.UTC(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L))}function newDate(nt,rt,it){return{y:nt,m:rt,d:it,H:0,M:0,S:0,L:0}}function formatLocale(nt){var rt=nt.dateTime,it=nt.date,st=nt.time,bt=nt.periods,xt=nt.days,Et=nt.shortDays,kt=nt.months,Lt=nt.shortMonths,Pt=formatRe(bt),Rt=formatLookup(bt),Dt=formatRe(xt),Bt=formatLookup(xt),Ft=formatRe(Et),Yt=formatLookup(Et),Zt=formatRe(kt),Wt=formatLookup(kt),Qt=formatRe(Lt),Kt=formatLookup(Lt),on={a:zn,A:ir,b:tr,B:nr,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:dr,q:or,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},nn={a:ur,A:Cr,b:Sr,B:rr,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Fr,q:mr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},mn={a:Mn,A:$n,b:cn,B:Sn,c:an,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:kn,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:jn,X:hn,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};on.x=gn(it,on),on.X=gn(st,on),on.c=gn(rt,on),nn.x=gn(it,nn),nn.X=gn(st,nn),nn.c=gn(rt,nn);function gn(_r,yr){return function(pr){var Cn=[],rn=-1,dn=0,fn=_r.length,On,xn,hr;for(pr instanceof Date||(pr=new Date(+pr));++rn<fn;)_r.charCodeAt(rn)===37&&(Cn.push(_r.slice(dn,rn)),(xn=pads[On=_r.charAt(++rn)])!=null?On=_r.charAt(++rn):xn=On==="e"?" ":"0",(hr=yr[On])&&(On=hr(pr,xn)),Cn.push(On),dn=rn+1);return Cn.push(_r.slice(dn,rn)),Cn.join("")}}function Tn(_r,yr){return function(pr){var Cn=newDate(1900,void 0,1),rn=An(Cn,_r,pr+="",0),dn,fn;if(rn!=pr.length)return null;if("Q"in Cn)return new Date(Cn.Q);if("s"in Cn)return new Date(Cn.s*1e3+("L"in Cn?Cn.L:0));if(yr&&!("Z"in Cn)&&(Cn.Z=0),"p"in Cn&&(Cn.H=Cn.H%12+Cn.p*12),Cn.m===void 0&&(Cn.m="q"in Cn?Cn.q:0),"V"in Cn){if(Cn.V<1||Cn.V>53)return null;"w"in Cn||(Cn.w=1),"Z"in Cn?(dn=utcDate(newDate(Cn.y,0,1)),fn=dn.getUTCDay(),dn=fn>4||fn===0?utcMonday.ceil(dn):utcMonday(dn),dn=utcDay.offset(dn,(Cn.V-1)*7),Cn.y=dn.getUTCFullYear(),Cn.m=dn.getUTCMonth(),Cn.d=dn.getUTCDate()+(Cn.w+6)%7):(dn=localDate(newDate(Cn.y,0,1)),fn=dn.getDay(),dn=fn>4||fn===0?timeMonday.ceil(dn):timeMonday(dn),dn=timeDay.offset(dn,(Cn.V-1)*7),Cn.y=dn.getFullYear(),Cn.m=dn.getMonth(),Cn.d=dn.getDate()+(Cn.w+6)%7)}else("W"in Cn||"U"in Cn)&&("w"in Cn||(Cn.w="u"in Cn?Cn.u%7:"W"in Cn?1:0),fn="Z"in Cn?utcDate(newDate(Cn.y,0,1)).getUTCDay():localDate(newDate(Cn.y,0,1)).getDay(),Cn.m=0,Cn.d="W"in Cn?(Cn.w+6)%7+Cn.W*7-(fn+5)%7:Cn.w+Cn.U*7-(fn+6)%7);return"Z"in Cn?(Cn.H+=Cn.Z/100|0,Cn.M+=Cn.Z%100,utcDate(Cn)):localDate(Cn)}}function An(_r,yr,pr,Cn){for(var rn=0,dn=yr.length,fn=pr.length,On,xn;rn<dn;){if(Cn>=fn)return-1;if(On=yr.charCodeAt(rn++),On===37){if(On=yr.charAt(rn++),xn=mn[On in pads?yr.charAt(rn++):On],!xn||(Cn=xn(_r,pr,Cn))<0)return-1}else if(On!=pr.charCodeAt(Cn++))return-1}return Cn}function kn(_r,yr,pr){var Cn=Pt.exec(yr.slice(pr));return Cn?(_r.p=Rt.get(Cn[0].toLowerCase()),pr+Cn[0].length):-1}function Mn(_r,yr,pr){var Cn=Ft.exec(yr.slice(pr));return Cn?(_r.w=Yt.get(Cn[0].toLowerCase()),pr+Cn[0].length):-1}function $n(_r,yr,pr){var Cn=Dt.exec(yr.slice(pr));return Cn?(_r.w=Bt.get(Cn[0].toLowerCase()),pr+Cn[0].length):-1}function cn(_r,yr,pr){var Cn=Qt.exec(yr.slice(pr));return Cn?(_r.m=Kt.get(Cn[0].toLowerCase()),pr+Cn[0].length):-1}function Sn(_r,yr,pr){var Cn=Zt.exec(yr.slice(pr));return Cn?(_r.m=Wt.get(Cn[0].toLowerCase()),pr+Cn[0].length):-1}function an(_r,yr,pr){return An(_r,rt,yr,pr)}function jn(_r,yr,pr){return An(_r,it,yr,pr)}function hn(_r,yr,pr){return An(_r,st,yr,pr)}function zn(_r){return Et[_r.getDay()]}function ir(_r){return xt[_r.getDay()]}function tr(_r){return Lt[_r.getMonth()]}function nr(_r){return kt[_r.getMonth()]}function dr(_r){return bt[+(_r.getHours()>=12)]}function or(_r){return 1+~~(_r.getMonth()/3)}function ur(_r){return Et[_r.getUTCDay()]}function Cr(_r){return xt[_r.getUTCDay()]}function Sr(_r){return Lt[_r.getUTCMonth()]}function rr(_r){return kt[_r.getUTCMonth()]}function Fr(_r){return bt[+(_r.getUTCHours()>=12)]}function mr(_r){return 1+~~(_r.getUTCMonth()/3)}return{format:function(_r){var yr=gn(_r+="",on);return yr.toString=function(){return _r},yr},parse:function(_r){var yr=Tn(_r+="",!1);return yr.toString=function(){return _r},yr},utcFormat:function(_r){var yr=gn(_r+="",nn);return yr.toString=function(){return _r},yr},utcParse:function(_r){var yr=Tn(_r+="",!0);return yr.toString=function(){return _r},yr}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(nt,rt,it){var st=nt<0?"-":"",bt=(st?-nt:nt)+"",xt=bt.length;return st+(xt<it?new Array(it-xt+1).join(rt)+bt:bt)}function requote(nt){return nt.replace(requoteRe,"\\$&")}function formatRe(nt){return new RegExp("^(?:"+nt.map(requote).join("|")+")","i")}function formatLookup(nt){return new Map(nt.map((rt,it)=>[rt.toLowerCase(),it]))}function parseWeekdayNumberSunday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.w=+st[0],it+st[0].length):-1}function parseWeekdayNumberMonday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.u=+st[0],it+st[0].length):-1}function parseWeekNumberSunday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.U=+st[0],it+st[0].length):-1}function parseWeekNumberISO(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.V=+st[0],it+st[0].length):-1}function parseWeekNumberMonday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.W=+st[0],it+st[0].length):-1}function parseFullYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+4));return st?(nt.y=+st[0],it+st[0].length):-1}function parseYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.y=+st[0]+(+st[0]>68?1900:2e3),it+st[0].length):-1}function parseZone(nt,rt,it){var st=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(rt.slice(it,it+6));return st?(nt.Z=st[1]?0:-(st[2]+(st[3]||"00")),it+st[0].length):-1}function parseQuarter(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.q=st[0]*3-3,it+st[0].length):-1}function parseMonthNumber(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.m=st[0]-1,it+st[0].length):-1}function parseDayOfMonth(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.d=+st[0],it+st[0].length):-1}function parseDayOfYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+3));return st?(nt.m=0,nt.d=+st[0],it+st[0].length):-1}function parseHour24(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.H=+st[0],it+st[0].length):-1}function parseMinutes(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.M=+st[0],it+st[0].length):-1}function parseSeconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.S=+st[0],it+st[0].length):-1}function parseMilliseconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+3));return st?(nt.L=+st[0],it+st[0].length):-1}function parseMicroseconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+6));return st?(nt.L=Math.floor(st[0]/1e3),it+st[0].length):-1}function parseLiteralPercent(nt,rt,it){var st=percentRe.exec(rt.slice(it,it+1));return st?it+st[0].length:-1}function parseUnixTimestamp(nt,rt,it){var st=numberRe.exec(rt.slice(it));return st?(nt.Q=+st[0],it+st[0].length):-1}function parseUnixTimestampSeconds(nt,rt,it){var st=numberRe.exec(rt.slice(it));return st?(nt.s=+st[0],it+st[0].length):-1}function formatDayOfMonth(nt,rt){return pad(nt.getDate(),rt,2)}function formatHour24(nt,rt){return pad(nt.getHours(),rt,2)}function formatHour12(nt,rt){return pad(nt.getHours()%12||12,rt,2)}function formatDayOfYear(nt,rt){return pad(1+timeDay.count(timeYear(nt),nt),rt,3)}function formatMilliseconds(nt,rt){return pad(nt.getMilliseconds(),rt,3)}function formatMicroseconds(nt,rt){return formatMilliseconds(nt,rt)+"000"}function formatMonthNumber(nt,rt){return pad(nt.getMonth()+1,rt,2)}function formatMinutes(nt,rt){return pad(nt.getMinutes(),rt,2)}function formatSeconds(nt,rt){return pad(nt.getSeconds(),rt,2)}function formatWeekdayNumberMonday(nt){var rt=nt.getDay();return rt===0?7:rt}function formatWeekNumberSunday(nt,rt){return pad(timeSunday.count(timeYear(nt)-1,nt),rt,2)}function dISO(nt){var rt=nt.getDay();return rt>=4||rt===0?timeThursday(nt):timeThursday.ceil(nt)}function formatWeekNumberISO(nt,rt){return nt=dISO(nt),pad(timeThursday.count(timeYear(nt),nt)+(timeYear(nt).getDay()===4),rt,2)}function formatWeekdayNumberSunday(nt){return nt.getDay()}function formatWeekNumberMonday(nt,rt){return pad(timeMonday.count(timeYear(nt)-1,nt),rt,2)}function formatYear(nt,rt){return pad(nt.getFullYear()%100,rt,2)}function formatYearISO(nt,rt){return nt=dISO(nt),pad(nt.getFullYear()%100,rt,2)}function formatFullYear(nt,rt){return pad(nt.getFullYear()%1e4,rt,4)}function formatFullYearISO(nt,rt){var it=nt.getDay();return nt=it>=4||it===0?timeThursday(nt):timeThursday.ceil(nt),pad(nt.getFullYear()%1e4,rt,4)}function formatZone(nt){var rt=nt.getTimezoneOffset();return(rt>0?"-":(rt*=-1,"+"))+pad(rt/60|0,"0",2)+pad(rt%60,"0",2)}function formatUTCDayOfMonth(nt,rt){return pad(nt.getUTCDate(),rt,2)}function formatUTCHour24(nt,rt){return pad(nt.getUTCHours(),rt,2)}function formatUTCHour12(nt,rt){return pad(nt.getUTCHours()%12||12,rt,2)}function formatUTCDayOfYear(nt,rt){return pad(1+utcDay.count(utcYear(nt),nt),rt,3)}function formatUTCMilliseconds(nt,rt){return pad(nt.getUTCMilliseconds(),rt,3)}function formatUTCMicroseconds(nt,rt){return formatUTCMilliseconds(nt,rt)+"000"}function formatUTCMonthNumber(nt,rt){return pad(nt.getUTCMonth()+1,rt,2)}function formatUTCMinutes(nt,rt){return pad(nt.getUTCMinutes(),rt,2)}function formatUTCSeconds(nt,rt){return pad(nt.getUTCSeconds(),rt,2)}function formatUTCWeekdayNumberMonday(nt){var rt=nt.getUTCDay();return rt===0?7:rt}function formatUTCWeekNumberSunday(nt,rt){return pad(utcSunday.count(utcYear(nt)-1,nt),rt,2)}function UTCdISO(nt){var rt=nt.getUTCDay();return rt>=4||rt===0?utcThursday(nt):utcThursday.ceil(nt)}function formatUTCWeekNumberISO(nt,rt){return nt=UTCdISO(nt),pad(utcThursday.count(utcYear(nt),nt)+(utcYear(nt).getUTCDay()===4),rt,2)}function formatUTCWeekdayNumberSunday(nt){return nt.getUTCDay()}function formatUTCWeekNumberMonday(nt,rt){return pad(utcMonday.count(utcYear(nt)-1,nt),rt,2)}function formatUTCYear(nt,rt){return pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCYearISO(nt,rt){return nt=UTCdISO(nt),pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCFullYear(nt,rt){return pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCFullYearISO(nt,rt){var it=nt.getUTCDay();return nt=it>=4||it===0?utcThursday(nt):utcThursday.ceil(nt),pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(nt){return+nt}function formatUnixTimestampSeconds(nt){return Math.floor(+nt/1e3)}var locale,timeFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(nt){return locale=formatLocale(nt),timeFormat=locale.format,locale.parse,locale.utcFormat,locale.utcParse,locale}function date(nt){return new Date(nt)}function number(nt){return nt instanceof Date?+nt:+new Date(+nt)}function calendar(nt,rt,it,st,bt,xt,Et,kt,Lt,Pt){var Rt=continuous(),Dt=Rt.invert,Bt=Rt.domain,Ft=Pt(".%L"),Yt=Pt(":%S"),Zt=Pt("%I:%M"),Wt=Pt("%I %p"),Qt=Pt("%a %d"),Kt=Pt("%b %d"),on=Pt("%B"),nn=Pt("%Y");function mn(gn){return(Lt(gn)<gn?Ft:kt(gn)<gn?Yt:Et(gn)<gn?Zt:xt(gn)<gn?Wt:st(gn)<gn?bt(gn)<gn?Qt:Kt:it(gn)<gn?on:nn)(gn)}return Rt.invert=function(gn){return new Date(Dt(gn))},Rt.domain=function(gn){return arguments.length?Bt(Array.from(gn,number)):Bt().map(date)},Rt.ticks=function(gn){var Tn=Bt();return nt(Tn[0],Tn[Tn.length-1],gn==null?10:gn)},Rt.tickFormat=function(gn,Tn){return Tn==null?mn:Pt(Tn)},Rt.nice=function(gn){var Tn=Bt();return(!gn||typeof gn.range!="function")&&(gn=rt(Tn[0],Tn[Tn.length-1],gn==null?10:gn)),gn?Bt(nice(Tn,gn)):Rt},Rt.copy=function(){return copy$1(Rt,calendar(nt,rt,it,st,bt,xt,Et,kt,Lt,Pt))},Rt}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function constant$1(nt){return function(){return nt}}const abs$1=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(nt){return nt>1?0:nt<-1?pi:Math.acos(nt)}function asin(nt){return nt>=1?halfPi:nt<=-1?-halfPi:Math.asin(nt)}function withPath(nt){let rt=3;return nt.digits=function(it){if(!arguments.length)return rt;if(it==null)rt=null;else{const st=Math.floor(it);if(!(st>=0))throw new RangeError(`invalid digits: ${it}`);rt=st}return nt},()=>new Path(rt)}function arcInnerRadius(nt){return nt.innerRadius}function arcOuterRadius(nt){return nt.outerRadius}function arcStartAngle(nt){return nt.startAngle}function arcEndAngle(nt){return nt.endAngle}function arcPadAngle(nt){return nt&&nt.padAngle}function intersect$1(nt,rt,it,st,bt,xt,Et,kt){var Lt=it-nt,Pt=st-rt,Rt=Et-bt,Dt=kt-xt,Bt=Dt*Lt-Rt*Pt;if(!(Bt*Bt<epsilon))return Bt=(Rt*(rt-xt)-Dt*(nt-bt))/Bt,[nt+Bt*Lt,rt+Bt*Pt]}function cornerTangents(nt,rt,it,st,bt,xt,Et){var kt=nt-it,Lt=rt-st,Pt=(Et?xt:-xt)/sqrt(kt*kt+Lt*Lt),Rt=Pt*Lt,Dt=-Pt*kt,Bt=nt+Rt,Ft=rt+Dt,Yt=it+Rt,Zt=st+Dt,Wt=(Bt+Yt)/2,Qt=(Ft+Zt)/2,Kt=Yt-Bt,on=Zt-Ft,nn=Kt*Kt+on*on,mn=bt-xt,gn=Bt*Zt-Yt*Ft,Tn=(on<0?-1:1)*sqrt(max$1(0,mn*mn*nn-gn*gn)),An=(gn*on-Kt*Tn)/nn,kn=(-gn*Kt-on*Tn)/nn,Mn=(gn*on+Kt*Tn)/nn,$n=(-gn*Kt+on*Tn)/nn,cn=An-Wt,Sn=kn-Qt,an=Mn-Wt,jn=$n-Qt;return cn*cn+Sn*Sn>an*an+jn*jn&&(An=Mn,kn=$n),{cx:An,cy:kn,x01:-Rt,y01:-Dt,x11:An*(bt/mn-1),y11:kn*(bt/mn-1)}}function arc(){var nt=arcInnerRadius,rt=arcOuterRadius,it=constant$1(0),st=null,bt=arcStartAngle,xt=arcEndAngle,Et=arcPadAngle,kt=null,Lt=withPath(Pt);function Pt(){var Rt,Dt,Bt=+nt.apply(this,arguments),Ft=+rt.apply(this,arguments),Yt=bt.apply(this,arguments)-halfPi,Zt=xt.apply(this,arguments)-halfPi,Wt=abs$1(Zt-Yt),Qt=Zt>Yt;if(kt||(kt=Rt=Lt()),Ft<Bt&&(Dt=Ft,Ft=Bt,Bt=Dt),!(Ft>epsilon))kt.moveTo(0,0);else if(Wt>tau-epsilon)kt.moveTo(Ft*cos(Yt),Ft*sin(Yt)),kt.arc(0,0,Ft,Yt,Zt,!Qt),Bt>epsilon&&(kt.moveTo(Bt*cos(Zt),Bt*sin(Zt)),kt.arc(0,0,Bt,Zt,Yt,Qt));else{var Kt=Yt,on=Zt,nn=Yt,mn=Zt,gn=Wt,Tn=Wt,An=Et.apply(this,arguments)/2,kn=An>epsilon&&(st?+st.apply(this,arguments):sqrt(Bt*Bt+Ft*Ft)),Mn=min$1(abs$1(Ft-Bt)/2,+it.apply(this,arguments)),$n=Mn,cn=Mn,Sn,an;if(kn>epsilon){var jn=asin(kn/Bt*sin(An)),hn=asin(kn/Ft*sin(An));(gn-=jn*2)>epsilon?(jn*=Qt?1:-1,nn+=jn,mn-=jn):(gn=0,nn=mn=(Yt+Zt)/2),(Tn-=hn*2)>epsilon?(hn*=Qt?1:-1,Kt+=hn,on-=hn):(Tn=0,Kt=on=(Yt+Zt)/2)}var zn=Ft*cos(Kt),ir=Ft*sin(Kt),tr=Bt*cos(mn),nr=Bt*sin(mn);if(Mn>epsilon){var dr=Ft*cos(on),or=Ft*sin(on),ur=Bt*cos(nn),Cr=Bt*sin(nn),Sr;if(Wt<pi)if(Sr=intersect$1(zn,ir,ur,Cr,dr,or,tr,nr)){var rr=zn-Sr[0],Fr=ir-Sr[1],mr=dr-Sr[0],_r=or-Sr[1],yr=1/sin(acos((rr*mr+Fr*_r)/(sqrt(rr*rr+Fr*Fr)*sqrt(mr*mr+_r*_r)))/2),pr=sqrt(Sr[0]*Sr[0]+Sr[1]*Sr[1]);$n=min$1(Mn,(Bt-pr)/(yr-1)),cn=min$1(Mn,(Ft-pr)/(yr+1))}else $n=cn=0}Tn>epsilon?cn>epsilon?(Sn=cornerTangents(ur,Cr,zn,ir,Ft,cn,Qt),an=cornerTangents(dr,or,tr,nr,Ft,cn,Qt),kt.moveTo(Sn.cx+Sn.x01,Sn.cy+Sn.y01),cn<Mn?kt.arc(Sn.cx,Sn.cy,cn,atan2(Sn.y01,Sn.x01),atan2(an.y01,an.x01),!Qt):(kt.arc(Sn.cx,Sn.cy,cn,atan2(Sn.y01,Sn.x01),atan2(Sn.y11,Sn.x11),!Qt),kt.arc(0,0,Ft,atan2(Sn.cy+Sn.y11,Sn.cx+Sn.x11),atan2(an.cy+an.y11,an.cx+an.x11),!Qt),kt.arc(an.cx,an.cy,cn,atan2(an.y11,an.x11),atan2(an.y01,an.x01),!Qt))):(kt.moveTo(zn,ir),kt.arc(0,0,Ft,Kt,on,!Qt)):kt.moveTo(zn,ir),!(Bt>epsilon)||!(gn>epsilon)?kt.lineTo(tr,nr):$n>epsilon?(Sn=cornerTangents(tr,nr,dr,or,Bt,-$n,Qt),an=cornerTangents(zn,ir,ur,Cr,Bt,-$n,Qt),kt.lineTo(Sn.cx+Sn.x01,Sn.cy+Sn.y01),$n<Mn?kt.arc(Sn.cx,Sn.cy,$n,atan2(Sn.y01,Sn.x01),atan2(an.y01,an.x01),!Qt):(kt.arc(Sn.cx,Sn.cy,$n,atan2(Sn.y01,Sn.x01),atan2(Sn.y11,Sn.x11),!Qt),kt.arc(0,0,Bt,atan2(Sn.cy+Sn.y11,Sn.cx+Sn.x11),atan2(an.cy+an.y11,an.cx+an.x11),Qt),kt.arc(an.cx,an.cy,$n,atan2(an.y11,an.x11),atan2(an.y01,an.x01),!Qt))):kt.arc(0,0,Bt,mn,nn,Qt)}if(kt.closePath(),Rt)return kt=null,Rt+""||null}return Pt.centroid=function(){var Rt=(+nt.apply(this,arguments)+ +rt.apply(this,arguments))/2,Dt=(+bt.apply(this,arguments)+ +xt.apply(this,arguments))/2-pi/2;return[cos(Dt)*Rt,sin(Dt)*Rt]},Pt.innerRadius=function(Rt){return arguments.length?(nt=typeof Rt=="function"?Rt:constant$1(+Rt),Pt):nt},Pt.outerRadius=function(Rt){return arguments.length?(rt=typeof Rt=="function"?Rt:constant$1(+Rt),Pt):rt},Pt.cornerRadius=function(Rt){return arguments.length?(it=typeof Rt=="function"?Rt:constant$1(+Rt),Pt):it},Pt.padRadius=function(Rt){return arguments.length?(st=Rt==null?null:typeof Rt=="function"?Rt:constant$1(+Rt),Pt):st},Pt.startAngle=function(Rt){return arguments.length?(bt=typeof Rt=="function"?Rt:constant$1(+Rt),Pt):bt},Pt.endAngle=function(Rt){return arguments.length?(xt=typeof Rt=="function"?Rt:constant$1(+Rt),Pt):xt},Pt.padAngle=function(Rt){return arguments.length?(Et=typeof Rt=="function"?Rt:constant$1(+Rt),Pt):Et},Pt.context=function(Rt){return arguments.length?(kt=Rt==null?null:Rt,Pt):kt},Pt}function array(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function Linear(nt){this._context=nt}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:this._context.lineTo(nt,rt);break}}};function curveLinear(nt){return new Linear(nt)}function x(nt){return nt[0]}function y(nt){return nt[1]}function line$1(nt,rt){var it=constant$1(!0),st=null,bt=curveLinear,xt=null,Et=withPath(kt);nt=typeof nt=="function"?nt:nt===void 0?x:constant$1(nt),rt=typeof rt=="function"?rt:rt===void 0?y:constant$1(rt);function kt(Lt){var Pt,Rt=(Lt=array(Lt)).length,Dt,Bt=!1,Ft;for(st==null&&(xt=bt(Ft=Et())),Pt=0;Pt<=Rt;++Pt)!(Pt<Rt&&it(Dt=Lt[Pt],Pt,Lt))===Bt&&((Bt=!Bt)?xt.lineStart():xt.lineEnd()),Bt&&xt.point(+nt(Dt,Pt,Lt),+rt(Dt,Pt,Lt));if(Ft)return xt=null,Ft+""||null}return kt.x=function(Lt){return arguments.length?(nt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):nt},kt.y=function(Lt){return arguments.length?(rt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):rt},kt.defined=function(Lt){return arguments.length?(it=typeof Lt=="function"?Lt:constant$1(!!Lt),kt):it},kt.curve=function(Lt){return arguments.length?(bt=Lt,st!=null&&(xt=bt(st)),kt):bt},kt.context=function(Lt){return arguments.length?(Lt==null?st=xt=null:xt=bt(st=Lt),kt):st},kt}function descending(nt,rt){return rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function identity$1(nt){return nt}function pie(){var nt=identity$1,rt=descending,it=null,st=constant$1(0),bt=constant$1(tau),xt=constant$1(0);function Et(kt){var Lt,Pt=(kt=array(kt)).length,Rt,Dt,Bt=0,Ft=new Array(Pt),Yt=new Array(Pt),Zt=+st.apply(this,arguments),Wt=Math.min(tau,Math.max(-tau,bt.apply(this,arguments)-Zt)),Qt,Kt=Math.min(Math.abs(Wt)/Pt,xt.apply(this,arguments)),on=Kt*(Wt<0?-1:1),nn;for(Lt=0;Lt<Pt;++Lt)(nn=Yt[Ft[Lt]=Lt]=+nt(kt[Lt],Lt,kt))>0&&(Bt+=nn);for(rt!=null?Ft.sort(function(mn,gn){return rt(Yt[mn],Yt[gn])}):it!=null&&Ft.sort(function(mn,gn){return it(kt[mn],kt[gn])}),Lt=0,Dt=Bt?(Wt-Pt*on)/Bt:0;Lt<Pt;++Lt,Zt=Qt)Rt=Ft[Lt],nn=Yt[Rt],Qt=Zt+(nn>0?nn*Dt:0)+on,Yt[Rt]={data:kt[Rt],index:Lt,value:nn,startAngle:Zt,endAngle:Qt,padAngle:Kt};return Yt}return Et.value=function(kt){return arguments.length?(nt=typeof kt=="function"?kt:constant$1(+kt),Et):nt},Et.sortValues=function(kt){return arguments.length?(rt=kt,it=null,Et):rt},Et.sort=function(kt){return arguments.length?(it=kt,rt=null,Et):it},Et.startAngle=function(kt){return arguments.length?(st=typeof kt=="function"?kt:constant$1(+kt),Et):st},Et.endAngle=function(kt){return arguments.length?(bt=typeof kt=="function"?kt:constant$1(+kt),Et):bt},Et.padAngle=function(kt){return arguments.length?(xt=typeof kt=="function"?kt:constant$1(+kt),Et):xt},Et}class Bump{constructor(rt,it){this._context=rt,this._x=it}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(rt,it){switch(rt=+rt,it=+it,this._point){case 0:{this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+rt)/2,this._y0,this._x0,it,rt,it):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+it)/2,rt,this._y0,rt,it);break}}this._x0=rt,this._y0=it}}function bumpX(nt){return new Bump(nt,!0)}function bumpY(nt){return new Bump(nt,!1)}function noop$1(){}function point$4(nt,rt,it){nt._context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+rt)/6,(nt._y0+4*nt._y1+it)/6)}function Basis(nt){this._context=nt}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$4(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasis(nt){return new Basis(nt)}function BasisClosed(nt){this._context=nt}BasisClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._x2=nt,this._y2=rt;break;case 1:this._point=2,this._x3=nt,this._y3=rt;break;case 2:this._point=3,this._x4=nt,this._y4=rt,this._context.moveTo((this._x0+4*this._x1+nt)/6,(this._y0+4*this._y1+rt)/6);break;default:point$4(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisClosed(nt){return new BasisClosed(nt)}function BasisOpen(nt){this._context=nt}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var it=(this._x0+4*this._x1+nt)/6,st=(this._y0+4*this._y1+rt)/6;this._line?this._context.lineTo(it,st):this._context.moveTo(it,st);break;case 3:this._point=4;default:point$4(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisOpen(nt){return new BasisOpen(nt)}function Bundle(nt,rt){this._basis=new Basis(nt),this._beta=rt}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var nt=this._x,rt=this._y,it=nt.length-1;if(it>0)for(var st=nt[0],bt=rt[0],xt=nt[it]-st,Et=rt[it]-bt,kt=-1,Lt;++kt<=it;)Lt=kt/it,this._basis.point(this._beta*nt[kt]+(1-this._beta)*(st+Lt*xt),this._beta*rt[kt]+(1-this._beta)*(bt+Lt*Et));this._x=this._y=null,this._basis.lineEnd()},point:function(nt,rt){this._x.push(+nt),this._y.push(+rt)}};const curveBundle=function nt(rt){function it(st){return rt===1?new Basis(st):new Bundle(st,rt)}return it.beta=function(st){return nt(+st)},it}(.85);function point$3(nt,rt,it){nt._context.bezierCurveTo(nt._x1+nt._k*(nt._x2-nt._x0),nt._y1+nt._k*(nt._y2-nt._y0),nt._x2+nt._k*(nt._x1-rt),nt._y2+nt._k*(nt._y1-it),nt._x2,nt._y2)}function Cardinal(nt,rt){this._context=nt,this._k=(1-rt)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2,this._x1=nt,this._y1=rt;break;case 2:this._point=3;default:point$3(this,nt,rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCardinal=function nt(rt){function it(st){return new Cardinal(st,rt)}return it.tension=function(st){return nt(+st)},it}(0);function CardinalClosed(nt,rt){this._context=nt,this._k=(1-rt)/6}CardinalClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._x3=nt,this._y3=rt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=rt);break;case 2:this._point=3,this._x5=nt,this._y5=rt;break;default:point$3(this,nt,rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCardinalClosed=function nt(rt){function it(st){return new CardinalClosed(st,rt)}return it.tension=function(st){return nt(+st)},it}(0);function CardinalOpen(nt,rt){this._context=nt,this._k=(1-rt)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,nt,rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCardinalOpen=function nt(rt){function it(st){return new CardinalOpen(st,rt)}return it.tension=function(st){return nt(+st)},it}(0);function point$2(nt,rt,it){var st=nt._x1,bt=nt._y1,xt=nt._x2,Et=nt._y2;if(nt._l01_a>epsilon){var kt=2*nt._l01_2a+3*nt._l01_a*nt._l12_a+nt._l12_2a,Lt=3*nt._l01_a*(nt._l01_a+nt._l12_a);st=(st*kt-nt._x0*nt._l12_2a+nt._x2*nt._l01_2a)/Lt,bt=(bt*kt-nt._y0*nt._l12_2a+nt._y2*nt._l01_2a)/Lt}if(nt._l23_a>epsilon){var Pt=2*nt._l23_2a+3*nt._l23_a*nt._l12_a+nt._l12_2a,Rt=3*nt._l23_a*(nt._l23_a+nt._l12_a);xt=(xt*Pt+nt._x1*nt._l23_2a-rt*nt._l12_2a)/Rt,Et=(Et*Pt+nt._y1*nt._l23_2a-it*nt._l12_2a)/Rt}nt._context.bezierCurveTo(st,bt,xt,Et,nt._x2,nt._y2)}function CatmullRom(nt,rt){this._context=nt,this._alpha=rt}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){if(nt=+nt,rt=+rt,this._point){var it=this._x2-nt,st=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+st*st,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,nt,rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCatmullRom=function nt(rt){function it(st){return rt?new CatmullRom(st,rt):new Cardinal(st,0)}return it.alpha=function(st){return nt(+st)},it}(.5);function CatmullRomClosed(nt,rt){this._context=nt,this._alpha=rt}CatmullRomClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,rt){if(nt=+nt,rt=+rt,this._point){var it=this._x2-nt,st=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+st*st,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=nt,this._y3=rt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=rt);break;case 2:this._point=3,this._x5=nt,this._y5=rt;break;default:point$2(this,nt,rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCatmullRomClosed=function nt(rt){function it(st){return rt?new CatmullRomClosed(st,rt):new CardinalClosed(st,0)}return it.alpha=function(st){return nt(+st)},it}(.5);function CatmullRomOpen(nt,rt){this._context=nt,this._alpha=rt}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){if(nt=+nt,rt=+rt,this._point){var it=this._x2-nt,st=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+st*st,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,nt,rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCatmullRomOpen=function nt(rt){function it(st){return rt?new CatmullRomOpen(st,rt):new CardinalOpen(st,0)}return it.alpha=function(st){return nt(+st)},it}(.5);function LinearClosed(nt){this._context=nt}LinearClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(nt,rt){nt=+nt,rt=+rt,this._point?this._context.lineTo(nt,rt):(this._point=1,this._context.moveTo(nt,rt))}};function curveLinearClosed(nt){return new LinearClosed(nt)}function sign(nt){return nt<0?-1:1}function slope3(nt,rt,it){var st=nt._x1-nt._x0,bt=rt-nt._x1,xt=(nt._y1-nt._y0)/(st||bt<0&&-0),Et=(it-nt._y1)/(bt||st<0&&-0),kt=(xt*bt+Et*st)/(st+bt);return(sign(xt)+sign(Et))*Math.min(Math.abs(xt),Math.abs(Et),.5*Math.abs(kt))||0}function slope2(nt,rt){var it=nt._x1-nt._x0;return it?(3*(nt._y1-nt._y0)/it-rt)/2:rt}function point$1(nt,rt,it){var st=nt._x0,bt=nt._y0,xt=nt._x1,Et=nt._y1,kt=(xt-st)/3;nt._context.bezierCurveTo(st+kt,bt+kt*rt,xt-kt,Et-kt*it,xt,Et)}function MonotoneX(nt){this._context=nt}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){var it=NaN;if(nt=+nt,rt=+rt,!(nt===this._x1&&rt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,it=slope3(this,nt,rt)),it);break;default:point$1(this,this._t0,it=slope3(this,nt,rt));break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt,this._t0=it}}};function MonotoneY(nt){this._context=new ReflectContext(nt)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(nt,rt){MonotoneX.prototype.point.call(this,rt,nt)};function ReflectContext(nt){this._context=nt}ReflectContext.prototype={moveTo:function(nt,rt){this._context.moveTo(rt,nt)},closePath:function(){this._context.closePath()},lineTo:function(nt,rt){this._context.lineTo(rt,nt)},bezierCurveTo:function(nt,rt,it,st,bt,xt){this._context.bezierCurveTo(rt,nt,st,it,xt,bt)}};function monotoneX(nt){return new MonotoneX(nt)}function monotoneY(nt){return new MonotoneY(nt)}function Natural(nt){this._context=nt}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var nt=this._x,rt=this._y,it=nt.length;if(it)if(this._line?this._context.lineTo(nt[0],rt[0]):this._context.moveTo(nt[0],rt[0]),it===2)this._context.lineTo(nt[1],rt[1]);else for(var st=controlPoints(nt),bt=controlPoints(rt),xt=0,Et=1;Et<it;++xt,++Et)this._context.bezierCurveTo(st[0][xt],bt[0][xt],st[1][xt],bt[1][xt],nt[Et],rt[Et]);(this._line||this._line!==0&&it===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(nt,rt){this._x.push(+nt),this._y.push(+rt)}};function controlPoints(nt){var rt,it=nt.length-1,st,bt=new Array(it),xt=new Array(it),Et=new Array(it);for(bt[0]=0,xt[0]=2,Et[0]=nt[0]+2*nt[1],rt=1;rt<it-1;++rt)bt[rt]=1,xt[rt]=4,Et[rt]=4*nt[rt]+2*nt[rt+1];for(bt[it-1]=2,xt[it-1]=7,Et[it-1]=8*nt[it-1]+nt[it],rt=1;rt<it;++rt)st=bt[rt]/xt[rt-1],xt[rt]-=st,Et[rt]-=st*Et[rt-1];for(bt[it-1]=Et[it-1]/xt[it-1],rt=it-2;rt>=0;--rt)bt[rt]=(Et[rt]-bt[rt+1])/xt[rt];for(xt[it-1]=(nt[it]+bt[it-1])/2,rt=0;rt<it-1;++rt)xt[rt]=2*nt[rt+1]-bt[rt+1];return[bt,xt]}function curveNatural(nt){return new Natural(nt)}function Step(nt,rt){this._context=nt,this._t=rt}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,rt),this._context.lineTo(nt,rt);else{var it=this._x*(1-this._t)+nt*this._t;this._context.lineTo(it,this._y),this._context.lineTo(it,rt)}break}}this._x=nt,this._y=rt}};function curveStep(nt){return new Step(nt,.5)}function stepBefore(nt){return new Step(nt,0)}function stepAfter(nt){return new Step(nt,1)}function Transform(nt,rt,it){this.k=nt,this.x=rt,this.y=it}Transform.prototype={constructor:Transform,scale:function(nt){return nt===1?this:new Transform(this.k*nt,this.x,this.y)},translate:function(nt,rt){return nt===0&rt===0?this:new Transform(this.k,this.x+this.k*nt,this.y+this.k*rt)},apply:function(nt){return[nt[0]*this.k+this.x,nt[1]*this.k+this.y]},applyX:function(nt){return nt*this.k+this.x},applyY:function(nt){return nt*this.k+this.y},invert:function(nt){return[(nt[0]-this.x)/this.k,(nt[1]-this.y)/this.k]},invertX:function(nt){return(nt-this.x)/this.k},invertY:function(nt){return(nt-this.y)/this.k},rescaleX:function(nt){return nt.copy().domain(nt.range().map(this.invertX,this).map(nt.invert,nt))},rescaleY:function(nt){return nt.copy().domain(nt.range().map(this.invertY,this).map(nt.invert,nt))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Transform(1,0,0);Transform.prototype;/*! @license DOMPurify 2.4.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.3/LICENSE */function _typeof(nt){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof(nt)}function _setPrototypeOf(nt,rt){return _setPrototypeOf=Object.setPrototypeOf||function(st,bt){return st.__proto__=bt,st},_setPrototypeOf(nt,rt)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(nt,rt,it){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(bt,xt,Et){var kt=[null];kt.push.apply(kt,xt);var Lt=Function.bind.apply(bt,kt),Pt=new Lt;return Et&&_setPrototypeOf(Pt,Et.prototype),Pt},_construct.apply(null,arguments)}function _toConsumableArray(nt){return _arrayWithoutHoles(nt)||_iterableToArray(nt)||_unsupportedIterableToArray(nt)||_nonIterableSpread()}function _arrayWithoutHoles(nt){if(Array.isArray(nt))return _arrayLikeToArray(nt)}function _iterableToArray(nt){if(typeof Symbol<"u"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)}function _unsupportedIterableToArray(nt,rt){if(!!nt){if(typeof nt=="string")return _arrayLikeToArray(nt,rt);var it=Object.prototype.toString.call(nt).slice(8,-1);if(it==="Object"&&nt.constructor&&(it=nt.constructor.name),it==="Map"||it==="Set")return Array.from(nt);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return _arrayLikeToArray(nt,rt)}}function _arrayLikeToArray(nt,rt){(rt==null||rt>nt.length)&&(rt=nt.length);for(var it=0,st=new Array(rt);it<rt;it++)st[it]=nt[it];return st}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hasOwnProperty$g=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply$2=_ref.apply,construct=_ref.construct;apply$2||(apply$2=function(rt,it,st){return rt.apply(it,st)});freeze||(freeze=function(rt){return rt});seal||(seal=function(rt){return rt});construct||(construct=function(rt,it){return _construct(rt,_toConsumableArray(it))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush$1=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(nt){return function(rt){for(var it=arguments.length,st=new Array(it>1?it-1:0),bt=1;bt<it;bt++)st[bt-1]=arguments[bt];return apply$2(nt,rt,st)}}function unconstruct(nt){return function(){for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return construct(nt,it)}}function addToSet(nt,rt,it){it=it||stringToLowerCase,setPrototypeOf&&setPrototypeOf(nt,null);for(var st=rt.length;st--;){var bt=rt[st];if(typeof bt=="string"){var xt=it(bt);xt!==bt&&(isFrozen(rt)||(rt[st]=xt),bt=xt)}nt[bt]=!0}return nt}function clone$2(nt){var rt=create(null),it;for(it in nt)apply$2(hasOwnProperty$g,nt,[it])===!0&&(rt[it]=nt[it]);return rt}function lookupGetter(nt,rt){for(;nt!==null;){var it=getOwnPropertyDescriptor(nt,rt);if(it){if(it.get)return unapply(it.get);if(typeof it.value=="function")return unapply(it.value)}nt=getPrototypeOf(nt)}function st(bt){return console.warn("fallback value for",bt),null}return st}var html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),getGlobal=function nt(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function nt(rt,it){if(_typeof(rt)!=="object"||typeof rt.createPolicy!="function")return null;var st=null,bt="data-tt-policy-suffix";it.currentScript&&it.currentScript.hasAttribute(bt)&&(st=it.currentScript.getAttribute(bt));var xt="dompurify"+(st?"#"+st:"");try{return rt.createPolicy(xt,{createHTML:function(kt){return kt},createScriptURL:function(kt){return kt}})}catch{return console.warn("TrustedTypes policy "+xt+" could not be created."),null}};function createDOMPurify(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),rt=function(lr){return createDOMPurify(lr)};if(rt.version="2.4.3",rt.removed=[],!nt||!nt.document||nt.document.nodeType!==9)return rt.isSupported=!1,rt;var it=nt.document,st=nt.document,bt=nt.DocumentFragment,xt=nt.HTMLTemplateElement,Et=nt.Node,kt=nt.Element,Lt=nt.NodeFilter,Pt=nt.NamedNodeMap,Rt=Pt===void 0?nt.NamedNodeMap||nt.MozNamedAttrMap:Pt,Dt=nt.HTMLFormElement,Bt=nt.DOMParser,Ft=nt.trustedTypes,Yt=kt.prototype,Zt=lookupGetter(Yt,"cloneNode"),Wt=lookupGetter(Yt,"nextSibling"),Qt=lookupGetter(Yt,"childNodes"),Kt=lookupGetter(Yt,"parentNode");if(typeof xt=="function"){var on=st.createElement("template");on.content&&on.content.ownerDocument&&(st=on.content.ownerDocument)}var nn=_createTrustedTypesPolicy(Ft,it),mn=nn?nn.createHTML(""):"",gn=st,Tn=gn.implementation,An=gn.createNodeIterator,kn=gn.createDocumentFragment,Mn=gn.getElementsByTagName,$n=it.importNode,cn={};try{cn=clone$2(st).documentMode?st.documentMode:{}}catch{}var Sn={};rt.isSupported=typeof Kt=="function"&&Tn&&typeof Tn.createHTMLDocument<"u"&&cn!==9;var an=MUSTACHE_EXPR,jn=ERB_EXPR,hn=TMPLIT_EXPR,zn=DATA_ATTR,ir=ARIA_ATTR,tr=IS_SCRIPT_OR_DATA,nr=ATTR_WHITESPACE,dr=IS_ALLOWED_URI,or=null,ur=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),Cr=null,Sr=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),rr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Fr=null,mr=null,_r=!0,yr=!0,pr=!1,Cn=!1,rn=!1,dn=!1,fn=!1,On=!1,xn=!1,hr=!1,Nn=!0,Kn=!1,Un="user-content-",sr=!0,ar=!1,wr={},vr=null,Rr=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ci=null,mi=addToSet({},["audio","video","img","source","image","track"]),si=null,yi=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ni="http://www.w3.org/1998/Math/MathML",Ii="http://www.w3.org/2000/svg",Mi="http://www.w3.org/1999/xhtml",Or=Mi,Ln=!1,En=null,Wn=addToSet({},[Ni,Ii,Mi],stringToString),er,fr=["application/xhtml+xml","text/html"],Zr="text/html",gr,ti=null,kr=st.createElement("form"),ai=function(lr){return lr instanceof RegExp||lr instanceof Function},ui=function(lr){ti&&ti===lr||((!lr||_typeof(lr)!=="object")&&(lr={}),lr=clone$2(lr),er=fr.indexOf(lr.PARSER_MEDIA_TYPE)===-1?er=Zr:er=lr.PARSER_MEDIA_TYPE,gr=er==="application/xhtml+xml"?stringToString:stringToLowerCase,or="ALLOWED_TAGS"in lr?addToSet({},lr.ALLOWED_TAGS,gr):ur,Cr="ALLOWED_ATTR"in lr?addToSet({},lr.ALLOWED_ATTR,gr):Sr,En="ALLOWED_NAMESPACES"in lr?addToSet({},lr.ALLOWED_NAMESPACES,stringToString):Wn,si="ADD_URI_SAFE_ATTR"in lr?addToSet(clone$2(yi),lr.ADD_URI_SAFE_ATTR,gr):yi,ci="ADD_DATA_URI_TAGS"in lr?addToSet(clone$2(mi),lr.ADD_DATA_URI_TAGS,gr):mi,vr="FORBID_CONTENTS"in lr?addToSet({},lr.FORBID_CONTENTS,gr):Rr,Fr="FORBID_TAGS"in lr?addToSet({},lr.FORBID_TAGS,gr):{},mr="FORBID_ATTR"in lr?addToSet({},lr.FORBID_ATTR,gr):{},wr="USE_PROFILES"in lr?lr.USE_PROFILES:!1,_r=lr.ALLOW_ARIA_ATTR!==!1,yr=lr.ALLOW_DATA_ATTR!==!1,pr=lr.ALLOW_UNKNOWN_PROTOCOLS||!1,Cn=lr.SAFE_FOR_TEMPLATES||!1,rn=lr.WHOLE_DOCUMENT||!1,On=lr.RETURN_DOM||!1,xn=lr.RETURN_DOM_FRAGMENT||!1,hr=lr.RETURN_TRUSTED_TYPE||!1,fn=lr.FORCE_BODY||!1,Nn=lr.SANITIZE_DOM!==!1,Kn=lr.SANITIZE_NAMED_PROPS||!1,sr=lr.KEEP_CONTENT!==!1,ar=lr.IN_PLACE||!1,dr=lr.ALLOWED_URI_REGEXP||dr,Or=lr.NAMESPACE||Mi,lr.CUSTOM_ELEMENT_HANDLING&&ai(lr.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rr.tagNameCheck=lr.CUSTOM_ELEMENT_HANDLING.tagNameCheck),lr.CUSTOM_ELEMENT_HANDLING&&ai(lr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rr.attributeNameCheck=lr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),lr.CUSTOM_ELEMENT_HANDLING&&typeof lr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rr.allowCustomizedBuiltInElements=lr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Cn&&(yr=!1),xn&&(On=!0),wr&&(or=addToSet({},_toConsumableArray(text)),Cr=[],wr.html===!0&&(addToSet(or,html$1),addToSet(Cr,html)),wr.svg===!0&&(addToSet(or,svg$1),addToSet(Cr,svg),addToSet(Cr,xml)),wr.svgFilters===!0&&(addToSet(or,svgFilters),addToSet(Cr,svg),addToSet(Cr,xml)),wr.mathMl===!0&&(addToSet(or,mathMl$1),addToSet(Cr,mathMl),addToSet(Cr,xml))),lr.ADD_TAGS&&(or===ur&&(or=clone$2(or)),addToSet(or,lr.ADD_TAGS,gr)),lr.ADD_ATTR&&(Cr===Sr&&(Cr=clone$2(Cr)),addToSet(Cr,lr.ADD_ATTR,gr)),lr.ADD_URI_SAFE_ATTR&&addToSet(si,lr.ADD_URI_SAFE_ATTR,gr),lr.FORBID_CONTENTS&&(vr===Rr&&(vr=clone$2(vr)),addToSet(vr,lr.FORBID_CONTENTS,gr)),sr&&(or["#text"]=!0),rn&&addToSet(or,["html","head","body"]),or.table&&(addToSet(or,["tbody"]),delete Fr.tbody),freeze&&freeze(lr),ti=lr)},_i=addToSet({},["mi","mo","mn","ms","mtext"]),hi=addToSet({},["foreignobject","desc","title","annotation-xml"]),ji=addToSet({},["title","style","font","a","script"]),Ei=addToSet({},svg$1);addToSet(Ei,svgFilters),addToSet(Ei,svgDisallowed);var Wi=addToSet({},mathMl$1);addToSet(Wi,mathMlDisallowed);var lo=function(lr){var zr=Kt(lr);(!zr||!zr.tagName)&&(zr={namespaceURI:Or,tagName:"template"});var ni=stringToLowerCase(lr.tagName),fi=stringToLowerCase(zr.tagName);return En[lr.namespaceURI]?lr.namespaceURI===Ii?zr.namespaceURI===Mi?ni==="svg":zr.namespaceURI===Ni?ni==="svg"&&(fi==="annotation-xml"||_i[fi]):Boolean(Ei[ni]):lr.namespaceURI===Ni?zr.namespaceURI===Mi?ni==="math":zr.namespaceURI===Ii?ni==="math"&&hi[fi]:Boolean(Wi[ni]):lr.namespaceURI===Mi?zr.namespaceURI===Ii&&!hi[fi]||zr.namespaceURI===Ni&&!_i[fi]?!1:!Wi[ni]&&(ji[ni]||!Ei[ni]):!!(er==="application/xhtml+xml"&&En[lr.namespaceURI]):!1},Xi=function(lr){arrayPush$1(rt.removed,{element:lr});try{lr.parentNode.removeChild(lr)}catch{try{lr.outerHTML=mn}catch{lr.remove()}}},Ga=function(lr,zr){try{arrayPush$1(rt.removed,{attribute:zr.getAttributeNode(lr),from:zr})}catch{arrayPush$1(rt.removed,{attribute:null,from:zr})}if(zr.removeAttribute(lr),lr==="is"&&!Cr[lr])if(On||xn)try{Xi(zr)}catch{}else try{zr.setAttribute(lr,"")}catch{}},Ns=function(lr){var zr,ni;if(fn)lr="<remove></remove>"+lr;else{var fi=stringMatch(lr,/^[\r\n\t ]+/);ni=fi&&fi[0]}er==="application/xhtml+xml"&&Or===Mi&&(lr='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+lr+"</body></html>");var xo=nn?nn.createHTML(lr):lr;if(Or===Mi)try{zr=new Bt().parseFromString(xo,er)}catch{}if(!zr||!zr.documentElement){zr=Tn.createDocument(Or,"template",null);try{zr.documentElement.innerHTML=Ln?mn:xo}catch{}}var mo=zr.body||zr.documentElement;return lr&&ni&&mo.insertBefore(st.createTextNode(ni),mo.childNodes[0]||null),Or===Mi?Mn.call(zr,rn?"html":"body")[0]:rn?zr.documentElement:mo},wi=function(lr){return An.call(lr.ownerDocument||lr,lr,Lt.SHOW_ELEMENT|Lt.SHOW_COMMENT|Lt.SHOW_TEXT,null,!1)},qi=function(lr){return lr instanceof Dt&&(typeof lr.nodeName!="string"||typeof lr.textContent!="string"||typeof lr.removeChild!="function"||!(lr.attributes instanceof Rt)||typeof lr.removeAttribute!="function"||typeof lr.setAttribute!="function"||typeof lr.namespaceURI!="string"||typeof lr.insertBefore!="function"||typeof lr.hasChildNodes!="function")},$s=function(lr){return _typeof(Et)==="object"?lr instanceof Et:lr&&_typeof(lr)==="object"&&typeof lr.nodeType=="number"&&typeof lr.nodeName=="string"},xs=function(lr,zr,ni){!Sn[lr]||arrayForEach(Sn[lr],function(fi){fi.call(rt,zr,ni,ti)})},fs=function(lr){var zr;if(xs("beforeSanitizeElements",lr,null),qi(lr)||regExpTest(/[\u0080-\uFFFF]/,lr.nodeName))return Xi(lr),!0;var ni=gr(lr.nodeName);if(xs("uponSanitizeElement",lr,{tagName:ni,allowedTags:or}),lr.hasChildNodes()&&!$s(lr.firstElementChild)&&(!$s(lr.content)||!$s(lr.content.firstElementChild))&&regExpTest(/<[/\w]/g,lr.innerHTML)&&regExpTest(/<[/\w]/g,lr.textContent)||ni==="select"&&regExpTest(/<template/i,lr.innerHTML))return Xi(lr),!0;if(!or[ni]||Fr[ni]){if(!Fr[ni]&&ws(ni)&&(rr.tagNameCheck instanceof RegExp&&regExpTest(rr.tagNameCheck,ni)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(ni)))return!1;if(sr&&!vr[ni]){var fi=Kt(lr)||lr.parentNode,xo=Qt(lr)||lr.childNodes;if(xo&&fi)for(var mo=xo.length,us=mo-1;us>=0;--us)fi.insertBefore(Zt(xo[us],!0),Wt(lr))}return Xi(lr),!0}return lr instanceof kt&&!lo(lr)||(ni==="noscript"||ni==="noembed")&&regExpTest(/<\/no(script|embed)/i,lr.innerHTML)?(Xi(lr),!0):(Cn&&lr.nodeType===3&&(zr=lr.textContent,zr=stringReplace(zr,an," "),zr=stringReplace(zr,jn," "),zr=stringReplace(zr,hn," "),lr.textContent!==zr&&(arrayPush$1(rt.removed,{element:lr.cloneNode()}),lr.textContent=zr)),xs("afterSanitizeElements",lr,null),!1)},Ts=function(lr,zr,ni){if(Nn&&(zr==="id"||zr==="name")&&(ni in st||ni in kr))return!1;if(!(yr&&!mr[zr]&&regExpTest(zn,zr))){if(!(_r&&regExpTest(ir,zr))){if(!Cr[zr]||mr[zr]){if(!(ws(lr)&&(rr.tagNameCheck instanceof RegExp&&regExpTest(rr.tagNameCheck,lr)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(lr))&&(rr.attributeNameCheck instanceof RegExp&&regExpTest(rr.attributeNameCheck,zr)||rr.attributeNameCheck instanceof Function&&rr.attributeNameCheck(zr))||zr==="is"&&rr.allowCustomizedBuiltInElements&&(rr.tagNameCheck instanceof RegExp&&regExpTest(rr.tagNameCheck,ni)||rr.tagNameCheck instanceof Function&&rr.tagNameCheck(ni))))return!1}else if(!si[zr]){if(!regExpTest(dr,stringReplace(ni,nr,""))){if(!((zr==="src"||zr==="xlink:href"||zr==="href")&&lr!=="script"&&stringIndexOf(ni,"data:")===0&&ci[lr])){if(!(pr&&!regExpTest(tr,stringReplace(ni,nr,"")))){if(ni)return!1}}}}}}return!0},ws=function(lr){return lr.indexOf("-")>0},Lr=function(lr){var zr,ni,fi,xo;xs("beforeSanitizeAttributes",lr,null);var mo=lr.attributes;if(!!mo){var us={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Cr};for(xo=mo.length;xo--;){zr=mo[xo];var hs=zr,zo=hs.name,Is=hs.namespaceURI;if(ni=zo==="value"?zr.value:stringTrim(zr.value),fi=gr(zo),us.attrName=fi,us.attrValue=ni,us.keepAttr=!0,us.forceKeepAttr=void 0,xs("uponSanitizeAttribute",lr,us),ni=us.attrValue,!us.forceKeepAttr&&(Ga(zo,lr),!!us.keepAttr)){if(regExpTest(/\/>/i,ni)){Ga(zo,lr);continue}Cn&&(ni=stringReplace(ni,an," "),ni=stringReplace(ni,jn," "),ni=stringReplace(ni,hn," "));var Ys=gr(lr.nodeName);if(!!Ts(Ys,fi,ni)){if(Kn&&(fi==="id"||fi==="name")&&(Ga(zo,lr),ni=Un+ni),nn&&_typeof(Ft)==="object"&&typeof Ft.getAttributeType=="function"&&!Is)switch(Ft.getAttributeType(Ys,fi)){case"TrustedHTML":ni=nn.createHTML(ni);break;case"TrustedScriptURL":ni=nn.createScriptURL(ni);break}try{Is?lr.setAttributeNS(Is,zo,ni):lr.setAttribute(zo,ni),arrayPop(rt.removed)}catch{}}}}xs("afterSanitizeAttributes",lr,null)}},qr=function Ir(lr){var zr,ni=wi(lr);for(xs("beforeSanitizeShadowDOM",lr,null);zr=ni.nextNode();)xs("uponSanitizeShadowNode",zr,null),!fs(zr)&&(zr.content instanceof bt&&Ir(zr.content),Lr(zr));xs("afterSanitizeShadowDOM",lr,null)};return rt.sanitize=function(Ir){var lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zr,ni,fi,xo,mo;if(Ln=!Ir,Ln&&(Ir="<!-->"),typeof Ir!="string"&&!$s(Ir)){if(typeof Ir.toString!="function")throw typeErrorCreate("toString is not a function");if(Ir=Ir.toString(),typeof Ir!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!rt.isSupported){if(_typeof(nt.toStaticHTML)==="object"||typeof nt.toStaticHTML=="function"){if(typeof Ir=="string")return nt.toStaticHTML(Ir);if($s(Ir))return nt.toStaticHTML(Ir.outerHTML)}return Ir}if(dn||ui(lr),rt.removed=[],typeof Ir=="string"&&(ar=!1),ar){if(Ir.nodeName){var us=gr(Ir.nodeName);if(!or[us]||Fr[us])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(Ir instanceof Et)zr=Ns("<!---->"),ni=zr.ownerDocument.importNode(Ir,!0),ni.nodeType===1&&ni.nodeName==="BODY"||ni.nodeName==="HTML"?zr=ni:zr.appendChild(ni);else{if(!On&&!Cn&&!rn&&Ir.indexOf("<")===-1)return nn&&hr?nn.createHTML(Ir):Ir;if(zr=Ns(Ir),!zr)return On?null:hr?mn:""}zr&&fn&&Xi(zr.firstChild);for(var hs=wi(ar?Ir:zr);fi=hs.nextNode();)fi.nodeType===3&&fi===xo||fs(fi)||(fi.content instanceof bt&&qr(fi.content),Lr(fi),xo=fi);if(xo=null,ar)return Ir;if(On){if(xn)for(mo=kn.call(zr.ownerDocument);zr.firstChild;)mo.appendChild(zr.firstChild);else mo=zr;return Cr.shadowroot&&(mo=$n.call(it,mo,!0)),mo}var zo=rn?zr.outerHTML:zr.innerHTML;return rn&&or["!doctype"]&&zr.ownerDocument&&zr.ownerDocument.doctype&&zr.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,zr.ownerDocument.doctype.name)&&(zo="<!DOCTYPE "+zr.ownerDocument.doctype.name+`>
`+zo),Cn&&(zo=stringReplace(zo,an," "),zo=stringReplace(zo,jn," "),zo=stringReplace(zo,hn," ")),nn&&hr?nn.createHTML(zo):zo},rt.setConfig=function(Ir){ui(Ir),dn=!0},rt.clearConfig=function(){ti=null,dn=!1},rt.isValidAttribute=function(Ir,lr,zr){ti||ui({});var ni=gr(Ir),fi=gr(lr);return Ts(ni,fi,zr)},rt.addHook=function(Ir,lr){typeof lr=="function"&&(Sn[Ir]=Sn[Ir]||[],arrayPush$1(Sn[Ir],lr))},rt.removeHook=function(Ir){if(Sn[Ir])return arrayPop(Sn[Ir])},rt.removeHooks=function(Ir){Sn[Ir]&&(Sn[Ir]=[])},rt.removeAllHooks=function(){Sn={}},rt}var purify=createDOMPurify();const Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:nt=>nt>=255?255:nt<0?0:nt,g:nt=>nt>=255?255:nt<0?0:nt,b:nt=>nt>=255?255:nt<0?0:nt,h:nt=>nt%360,s:nt=>nt>=100?100:nt<0?0:nt,l:nt=>nt>=100?100:nt<0?0:nt,a:nt=>nt>=1?1:nt<0?0:nt},toLinear:nt=>{const rt=nt/255;return nt>.03928?Math.pow((rt+.055)/1.055,2.4):rt/12.92},hue2rgb:(nt,rt,it)=>(it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*(2/3-it)*6:nt),hsl2rgb:({h:nt,s:rt,l:it},st)=>{if(!rt)return it*2.55;nt/=360,rt/=100,it/=100;const bt=it<.5?it*(1+rt):it+rt-it*rt,xt=2*it-bt;switch(st){case"r":return Channel.hue2rgb(xt,bt,nt+1/3)*255;case"g":return Channel.hue2rgb(xt,bt,nt)*255;case"b":return Channel.hue2rgb(xt,bt,nt-1/3)*255}},rgb2hsl:({r:nt,g:rt,b:it},st)=>{nt/=255,rt/=255,it/=255;const bt=Math.max(nt,rt,it),xt=Math.min(nt,rt,it),Et=(bt+xt)/2;if(st==="l")return Et*100;if(bt===xt)return 0;const kt=bt-xt,Lt=Et>.5?kt/(2-bt-xt):kt/(bt+xt);if(st==="s")return Lt*100;switch(bt){case nt:return((rt-it)/kt+(rt<it?6:0))*60;case rt:return((it-nt)/kt+2)*60;case it:return((nt-rt)/kt+4)*60;default:return-1}}},channel=Channel,Lang={clamp:(nt,rt,it)=>rt>it?Math.min(rt,Math.max(it,nt)):Math.min(it,Math.max(rt,nt)),round:nt=>Math.round(nt*1e10)/1e10},lang=Lang,Unit={dec2hex:nt=>{const rt=Math.round(nt).toString(16);return rt.length>1?rt:`0${rt}`}},unit=Unit,Utils={channel,lang,unit},_=Utils,DEC2HEX={};for(let nt=0;nt<=255;nt++)DEC2HEX[nt]=_.unit.dec2hex(nt);const TYPE={ALL:0,RGB:1,HSL:2};class Type{constructor(){this.type=TYPE.ALL}get(){return this.type}set(rt){if(this.type&&this.type!==rt)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=rt}reset(){this.type=TYPE.ALL}is(rt){return this.type===rt}}const Type$2=Type;class Channels{constructor(rt,it){this.color=it,this.changed=!1,this.data=rt,this.type=new Type$2}set(rt,it){return this.color=it,this.changed=!1,this.data=rt,this.type.type=TYPE.ALL,this}_ensureHSL(){const rt=this.data,{h:it,s:st,l:bt}=rt;it===void 0&&(rt.h=_.channel.rgb2hsl(rt,"h")),st===void 0&&(rt.s=_.channel.rgb2hsl(rt,"s")),bt===void 0&&(rt.l=_.channel.rgb2hsl(rt,"l"))}_ensureRGB(){const rt=this.data,{r:it,g:st,b:bt}=rt;it===void 0&&(rt.r=_.channel.hsl2rgb(rt,"r")),st===void 0&&(rt.g=_.channel.hsl2rgb(rt,"g")),bt===void 0&&(rt.b=_.channel.hsl2rgb(rt,"b"))}get r(){const rt=this.data,it=rt.r;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"r"))}get g(){const rt=this.data,it=rt.g;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"g"))}get b(){const rt=this.data,it=rt.b;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"b"))}get h(){const rt=this.data,it=rt.h;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"h"))}get s(){const rt=this.data,it=rt.s;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"s"))}get l(){const rt=this.data,it=rt.l;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"l"))}get a(){return this.data.a}set r(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.r=rt}set g(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.g=rt}set b(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.b=rt}set h(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.h=rt}set s(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.s=rt}set l(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.l=rt}set a(rt){this.changed=!0,this.data.a=rt}}const Channels$1=Channels,channels=new Channels$1({r:0,g:0,b:0,a:0},"transparent"),ChannelsReusable=channels,Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:nt=>{if(nt.charCodeAt(0)!==35)return;const rt=nt.match(Hex.re);if(!rt)return;const it=rt[1],st=parseInt(it,16),bt=it.length,xt=bt%4===0,Et=bt>4,kt=Et?1:17,Lt=Et?8:4,Pt=xt?0:-1,Rt=Et?255:15;return ChannelsReusable.set({r:(st>>Lt*(Pt+3)&Rt)*kt,g:(st>>Lt*(Pt+2)&Rt)*kt,b:(st>>Lt*(Pt+1)&Rt)*kt,a:xt?(st&Rt)*kt/255:1},nt)},stringify:nt=>{const{r:rt,g:it,b:st,a:bt}=nt;return bt<1?`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(st)]}${DEC2HEX[Math.round(bt*255)]}`:`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(st)]}`}},Hex$1=Hex,HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:nt=>{const rt=nt.match(HSL.hueRe);if(rt){const[,it,st]=rt;switch(st){case"grad":return _.channel.clamp.h(parseFloat(it)*.9);case"rad":return _.channel.clamp.h(parseFloat(it)*180/Math.PI);case"turn":return _.channel.clamp.h(parseFloat(it)*360)}}return _.channel.clamp.h(parseFloat(nt))},parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==104&&rt!==72)return;const it=nt.match(HSL.re);if(!it)return;const[,st,bt,xt,Et,kt]=it;return ChannelsReusable.set({h:HSL._hue2deg(st),s:_.channel.clamp.s(parseFloat(bt)),l:_.channel.clamp.l(parseFloat(xt)),a:Et?_.channel.clamp.a(kt?parseFloat(Et)/100:parseFloat(Et)):1},nt)},stringify:nt=>{const{h:rt,s:it,l:st,a:bt}=nt;return bt<1?`hsla(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(st)}%, ${bt})`:`hsl(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(st)}%)`}},HSL$1=HSL,Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:nt=>{nt=nt.toLowerCase();const rt=Keyword.colors[nt];if(!!rt)return Hex$1.parse(rt)},stringify:nt=>{const rt=Hex$1.stringify(nt);for(const it in Keyword.colors)if(Keyword.colors[it]===rt)return it}},Keyword$1=Keyword,RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==114&&rt!==82)return;const it=nt.match(RGB.re);if(!it)return;const[,st,bt,xt,Et,kt,Lt,Pt,Rt]=it;return ChannelsReusable.set({r:_.channel.clamp.r(bt?parseFloat(st)*2.55:parseFloat(st)),g:_.channel.clamp.g(Et?parseFloat(xt)*2.55:parseFloat(xt)),b:_.channel.clamp.b(Lt?parseFloat(kt)*2.55:parseFloat(kt)),a:Pt?_.channel.clamp.a(Rt?parseFloat(Pt)/100:parseFloat(Pt)):1},nt)},stringify:nt=>{const{r:rt,g:it,b:st,a:bt}=nt;return bt<1?`rgba(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(st)}, ${_.lang.round(bt)})`:`rgb(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(st)})`}},RGB$1=RGB,Color={format:{keyword:Keyword$1,hex:Hex$1,rgb:RGB$1,rgba:RGB$1,hsl:HSL$1,hsla:HSL$1},parse:nt=>{if(typeof nt!="string")return nt;const rt=Hex$1.parse(nt)||RGB$1.parse(nt)||HSL$1.parse(nt)||Keyword$1.parse(nt);if(rt)return rt;throw new Error(`Unsupported color format: "${nt}"`)},stringify:nt=>!nt.changed&&nt.color?nt.color:nt.type.is(TYPE.HSL)||nt.data.r===void 0?HSL$1.stringify(nt):nt.a<1||!Number.isInteger(nt.r)||!Number.isInteger(nt.g)||!Number.isInteger(nt.b)?RGB$1.stringify(nt):Hex$1.stringify(nt)},Color$1=Color,change=(nt,rt)=>{const it=Color$1.parse(nt);for(const st in rt)it[st]=_.channel.clamp[st](rt[st]);return Color$1.stringify(it)},change$1=change,rgba=(nt,rt,it=0,st=1)=>{if(typeof nt!="number")return change$1(nt,{a:rt});const bt=ChannelsReusable.set({r:_.channel.clamp.r(nt),g:_.channel.clamp.g(rt),b:_.channel.clamp.b(it),a:_.channel.clamp.a(st)});return Color$1.stringify(bt)},rgba$1=rgba,adjustChannel=(nt,rt,it)=>{const st=Color$1.parse(nt),bt=st[rt],xt=_.channel.clamp[rt](bt+it);return bt!==xt&&(st[rt]=xt),Color$1.stringify(st)},adjustChannel$1=adjustChannel,lighten=(nt,rt)=>adjustChannel$1(nt,"l",rt),lighten$1=lighten,darken=(nt,rt)=>adjustChannel$1(nt,"l",-rt),darken$1=darken,adjust$1=(nt,rt)=>{const it=Color$1.parse(nt),st={};for(const bt in rt)!rt[bt]||(st[bt]=it[bt]+rt[bt]);return change$1(nt,st)},adjust$2=adjust$1,mix=(nt,rt,it=50)=>{const{r:st,g:bt,b:xt,a:Et}=Color$1.parse(nt),{r:kt,g:Lt,b:Pt,a:Rt}=Color$1.parse(rt),Dt=it/100,Bt=Dt*2-1,Ft=Et-Rt,Zt=((Bt*Ft===-1?Bt:(Bt+Ft)/(1+Bt*Ft))+1)/2,Wt=1-Zt,Qt=st*Zt+kt*Wt,Kt=bt*Zt+Lt*Wt,on=xt*Zt+Pt*Wt,nn=Et*Dt+Rt*(1-Dt);return rgba$1(Qt,Kt,on,nn)},mix$1=mix,invert=(nt,rt=100)=>{const it=Color$1.parse(nt);return it.r=255-it.r,it.g=255-it.g,it.b=255-it.b,mix$1(it,nt,rt)},invert$1=invert;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$i=Object.prototype,hasOwnProperty$f=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(nt){var rt=hasOwnProperty$f.call(nt,symToStringTag$1),it=nt[symToStringTag$1];try{nt[symToStringTag$1]=void 0;var st=!0}catch{}var bt=nativeObjectToString$1.call(nt);return st&&(rt?nt[symToStringTag$1]=it:delete nt[symToStringTag$1]),bt}var objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString(nt){return nativeObjectToString.call(nt)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(nt){return nt==null?nt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(nt)?getRawTag(nt):objectToString(nt)}function isObject$1(nt){var rt=typeof nt;return nt!=null&&(rt=="object"||rt=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(nt){if(!isObject$1(nt))return!1;var rt=baseGetTag(nt);return rt==funcTag$2||rt==genTag$1||rt==asyncTag||rt==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var nt=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return nt?"Symbol(src)_1."+nt:""}();function isMasked(nt){return!!maskSrcKey&&maskSrcKey in nt}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(nt){if(nt!=null){try{return funcToString$2.call(nt)}catch{}try{return nt+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$g=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$e=objectProto$g.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(nt){if(!isObject$1(nt)||isMasked(nt))return!1;var rt=isFunction(nt)?reIsNative:reIsHostCtor;return rt.test(toSource(nt))}function getValue(nt,rt){return nt==null?void 0:nt[rt]}function getNative(nt,rt){var it=getValue(nt,rt);return baseIsNative(it)?it:void 0}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(nt){var rt=this.has(nt)&&delete this.__data__[nt];return this.size-=rt?1:0,rt}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty;function hashGet(nt){var rt=this.__data__;if(nativeCreate$1){var it=rt[nt];return it===HASH_UNDEFINED$2?void 0:it}return hasOwnProperty$d.call(rt,nt)?rt[nt]:void 0}var objectProto$e=Object.prototype,hasOwnProperty$c=objectProto$e.hasOwnProperty;function hashHas(nt){var rt=this.__data__;return nativeCreate$1?rt[nt]!==void 0:hasOwnProperty$c.call(rt,nt)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(nt,rt){var it=this.__data__;return this.size+=this.has(nt)?0:1,it[nt]=nativeCreate$1&&rt===void 0?HASH_UNDEFINED$1:rt,this}function Hash(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function eq(nt,rt){return nt===rt||nt!==nt&&rt!==rt}function assocIndexOf(nt,rt){for(var it=nt.length;it--;)if(eq(nt[it][0],rt))return it;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);if(it<0)return!1;var st=rt.length-1;return it==st?rt.pop():splice.call(rt,it,1),--this.size,!0}function listCacheGet(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);return it<0?void 0:rt[it][1]}function listCacheHas(nt){return assocIndexOf(this.__data__,nt)>-1}function listCacheSet(nt,rt){var it=this.__data__,st=assocIndexOf(it,nt);return st<0?(++this.size,it.push([nt,rt])):it[st][1]=rt,this}function ListCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(nt){var rt=typeof nt;return rt=="string"||rt=="number"||rt=="symbol"||rt=="boolean"?nt!=="__proto__":nt===null}function getMapData(nt,rt){var it=nt.__data__;return isKeyable(rt)?it[typeof rt=="string"?"string":"hash"]:it.map}function mapCacheDelete(nt){var rt=getMapData(this,nt).delete(nt);return this.size-=rt?1:0,rt}function mapCacheGet(nt){return getMapData(this,nt).get(nt)}function mapCacheHas(nt){return getMapData(this,nt).has(nt)}function mapCacheSet(nt,rt){var it=getMapData(this,nt),st=it.size;return it.set(nt,rt),this.size+=it.size==st?0:1,this}function MapCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(nt,rt){if(typeof nt!="function"||rt!=null&&typeof rt!="function")throw new TypeError(FUNC_ERROR_TEXT);var it=function(){var st=arguments,bt=rt?rt.apply(this,st):st[0],xt=it.cache;if(xt.has(bt))return xt.get(bt);var Et=nt.apply(this,st);return it.cache=xt.set(bt,Et)||xt,Et};return it.cache=new(memoize.Cache||MapCache),it}memoize.Cache=MapCache;var COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode;function trim$1(nt){return nt.trim()}function replace(nt,rt,it){return nt.replace(rt,it)}function indexof(nt,rt){return nt.indexOf(rt)}function charat(nt,rt){return nt.charCodeAt(rt)|0}function substr(nt,rt,it){return nt.slice(rt,it)}function strlen(nt){return nt.length}function sizeof(nt){return nt.length}function append(nt,rt){return rt.push(nt),nt}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(nt,rt,it,st,bt,xt,Et,kt){return{value:nt,root:rt,parent:it,type:st,props:bt,children:xt,line,column,length:Et,return:"",siblings:kt}}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(nt,rt){return substr(characters,nt,rt)}function token(nt){switch(nt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(nt){return line=column=1,length=strlen(characters=nt),position$1=0,[]}function dealloc(nt){return characters="",nt}function delimit(nt){return trim$1(slice(position$1-1,delimiter(nt===91?nt+2:nt===40?nt+1:nt)))}function whitespace(nt){for(;(character=peek())&&character<33;)next();return token(nt)>2||token(character)>3?"":" "}function escaping(nt,rt){for(;--rt&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(nt,caret()+(rt<6&&peek()==32&&next()==32))}function delimiter(nt){for(;next();)switch(character){case nt:return position$1;case 34:case 39:nt!==34&&nt!==39&&delimiter(character);break;case 40:nt===41&&delimiter(nt);break;case 92:next();break}return position$1}function commenter(nt,rt){for(;next()&&nt+character!==47+10;)if(nt+character===42+42&&peek()===47)break;return"/*"+slice(rt,position$1-1)+"*"+from(nt===47?nt:next())}function identifier(nt){for(;!token(peek());)next();return slice(nt,position$1)}function compile(nt){return dealloc(parse$3("",null,null,null,[""],nt=alloc(nt),0,[0],nt))}function parse$3(nt,rt,it,st,bt,xt,Et,kt,Lt){for(var Pt=0,Rt=0,Dt=Et,Bt=0,Ft=0,Yt=0,Zt=1,Wt=1,Qt=1,Kt=0,on="",nn=bt,mn=xt,gn=st,Tn=on;Wt;)switch(Yt=Kt,Kt=next()){case 40:if(Yt!=108&&charat(Tn,Dt-1)==58){indexof(Tn+=replace(delimit(Kt),"&","&\f"),"&\f")!=-1&&(Qt=-1);break}case 34:case 39:case 91:Tn+=delimit(Kt);break;case 9:case 10:case 13:case 32:Tn+=whitespace(Yt);break;case 92:Tn+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),rt,it,Lt),Lt);break;default:Tn+="/"}break;case 123*Zt:kt[Pt++]=strlen(Tn)*Qt;case 125*Zt:case 59:case 0:switch(Kt){case 0:case 125:Wt=0;case 59+Rt:Qt==-1&&(Tn=replace(Tn,/\f/g,"")),Ft>0&&strlen(Tn)-Dt&&append(Ft>32?declaration(Tn+";",st,it,Dt-1,Lt):declaration(replace(Tn," ","")+";",st,it,Dt-2,Lt),Lt);break;case 59:Tn+=";";default:if(append(gn=ruleset(Tn,rt,it,Pt,Rt,bt,kt,on,nn=[],mn=[],Dt,xt),xt),Kt===123)if(Rt===0)parse$3(Tn,rt,gn,gn,nn,xt,Dt,kt,mn);else switch(Bt===99&&charat(Tn,3)===110?100:Bt){case 100:case 108:case 109:case 115:parse$3(nt,gn,gn,st&&append(ruleset(nt,gn,gn,0,0,bt,kt,on,bt,nn=[],Dt,mn),mn),bt,mn,Dt,kt,st?nn:mn);break;default:parse$3(Tn,gn,gn,gn,[""],mn,0,kt,mn)}}Pt=Rt=Ft=0,Zt=Qt=1,on=Tn="",Dt=Et;break;case 58:Dt=1+strlen(Tn),Ft=Yt;default:if(Zt<1){if(Kt==123)--Zt;else if(Kt==125&&Zt++==0&&prev()==125)continue}switch(Tn+=from(Kt),Kt*Zt){case 38:Qt=Rt>0?1:(Tn+="\f",-1);break;case 44:kt[Pt++]=(strlen(Tn)-1)*Qt,Qt=1;break;case 64:peek()===45&&(Tn+=delimit(next())),Bt=peek(),Rt=Dt=strlen(on=Tn+=identifier(caret())),Kt++;break;case 45:Yt===45&&strlen(Tn)==2&&(Zt=0)}}return xt}function ruleset(nt,rt,it,st,bt,xt,Et,kt,Lt,Pt,Rt,Dt){for(var Bt=bt-1,Ft=bt===0?xt:[""],Yt=sizeof(Ft),Zt=0,Wt=0,Qt=0;Zt<st;++Zt)for(var Kt=0,on=substr(nt,Bt+1,Bt=abs(Wt=Et[Zt])),nn=nt;Kt<Yt;++Kt)(nn=trim$1(Wt>0?Ft[Kt]+" "+on:replace(on,/&\f/g,Ft[Kt])))&&(Lt[Qt++]=nn);return node(nt,rt,it,bt===0?RULESET:kt,Lt,Pt,Rt,Dt)}function comment(nt,rt,it,st){return node(nt,rt,it,COMMENT,from(char()),substr(nt,2,-2),0,st)}function declaration(nt,rt,it,st,bt){return node(nt,rt,it,DECLARATION,substr(nt,0,st),substr(nt,st+1,-1),st,bt)}function serialize(nt,rt){for(var it="",st=0;st<nt.length;st++)it+=rt(nt[st],st,nt,rt)||"";return it}function stringify(nt,rt,it,st){switch(nt.type){case LAYER:if(nt.children.length)break;case IMPORT:case DECLARATION:return nt.return=nt.return||nt.value;case COMMENT:return"";case KEYFRAMES:return nt.return=nt.value+"{"+serialize(nt.children,st)+"}";case RULESET:if(!strlen(nt.value=nt.props.join(",")))return""}return strlen(it=serialize(nt.children,st))?nt.return=nt.value+"{"+it+"}":""}function isObjectLike(nt){return nt!=null&&typeof nt=="object"}var symbolTag$3="[object Symbol]";function isSymbol(nt){return typeof nt=="symbol"||isObjectLike(nt)&&baseGetTag(nt)==symbolTag$3}function arrayMap(nt,rt){for(var it=-1,st=nt==null?0:nt.length,bt=Array(st);++it<st;)bt[it]=rt(nt[it],it,nt);return bt}var isArray=Array.isArray;const isArray$1=isArray;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(nt){if(typeof nt=="string")return nt;if(isArray$1(nt))return arrayMap(nt,baseToString)+"";if(isSymbol(nt))return symbolToString?symbolToString.call(nt):"";var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$3?"-0":rt}var reWhitespace=/\s/;function trimmedEndIndex(nt){for(var rt=nt.length;rt--&&reWhitespace.test(nt.charAt(rt)););return rt}var reTrimStart=/^\s+/;function baseTrim(nt){return nt&&nt.slice(0,trimmedEndIndex(nt)+1).replace(reTrimStart,"")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(nt){if(typeof nt=="number")return nt;if(isSymbol(nt))return NAN;if(isObject$1(nt)){var rt=typeof nt.valueOf=="function"?nt.valueOf():nt;nt=isObject$1(rt)?rt+"":rt}if(typeof nt!="string")return nt===0?nt:+nt;nt=baseTrim(nt);var it=reIsBinary.test(nt);return it||reIsOctal.test(nt)?freeParseInt(nt.slice(2),it?2:8):reIsBadHex.test(nt)?NAN:+nt}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(nt){if(!nt)return nt===0?nt:0;if(nt=toNumber(nt),nt===INFINITY$2||nt===-INFINITY$2){var rt=nt<0?-1:1;return rt*MAX_INTEGER}return nt===nt?nt:0}function toInteger(nt){var rt=toFinite(nt),it=rt%1;return rt===rt?it?rt-it:rt:0}function identity(nt){return nt}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function nt(){}return function(rt){if(!isObject$1(rt))return{};if(objectCreate)return objectCreate(rt);nt.prototype=rt;var it=new nt;return nt.prototype=void 0,it}}();const baseCreate$1=baseCreate;function apply$1(nt,rt,it){switch(it.length){case 0:return nt.call(rt);case 1:return nt.call(rt,it[0]);case 2:return nt.call(rt,it[0],it[1]);case 3:return nt.call(rt,it[0],it[1],it[2])}return nt.apply(rt,it)}function noop(){}function copyArray(nt,rt){var it=-1,st=nt.length;for(rt||(rt=Array(st));++it<st;)rt[it]=nt[it];return rt}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(nt){var rt=0,it=0;return function(){var st=nativeNow(),bt=HOT_SPAN-(st-it);if(it=st,bt>0){if(++rt>=HOT_COUNT)return arguments[0]}else rt=0;return nt.apply(void 0,arguments)}}function constant(nt){return function(){return nt}}var defineProperty=function(){try{var nt=getNative(Object,"defineProperty");return nt({},"",{}),nt}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(nt,rt){return defineProperty$1(nt,"toString",{configurable:!0,enumerable:!1,value:constant(rt),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(nt,rt){for(var it=-1,st=nt==null?0:nt.length;++it<st&&rt(nt[it],it,nt)!==!1;);return nt}function baseFindIndex(nt,rt,it,st){for(var bt=nt.length,xt=it+(st?1:-1);st?xt--:++xt<bt;)if(rt(nt[xt],xt,nt))return xt;return-1}function baseIsNaN(nt){return nt!==nt}function strictIndexOf(nt,rt,it){for(var st=it-1,bt=nt.length;++st<bt;)if(nt[st]===rt)return st;return-1}function baseIndexOf(nt,rt,it){return rt===rt?strictIndexOf(nt,rt,it):baseFindIndex(nt,baseIsNaN,it)}function arrayIncludes(nt,rt){var it=nt==null?0:nt.length;return!!it&&baseIndexOf(nt,rt,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(nt,rt){var it=typeof nt;return rt=rt==null?MAX_SAFE_INTEGER$1:rt,!!rt&&(it=="number"||it!="symbol"&&reIsUint.test(nt))&&nt>-1&&nt%1==0&&nt<rt}function baseAssignValue(nt,rt,it){rt=="__proto__"&&defineProperty$1?defineProperty$1(nt,rt,{configurable:!0,enumerable:!0,value:it,writable:!0}):nt[rt]=it}var objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function assignValue(nt,rt,it){var st=nt[rt];(!(hasOwnProperty$b.call(nt,rt)&&eq(st,it))||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function copyObject(nt,rt,it,st){var bt=!it;it||(it={});for(var xt=-1,Et=rt.length;++xt<Et;){var kt=rt[xt],Lt=st?st(it[kt],nt[kt],kt,it,nt):void 0;Lt===void 0&&(Lt=nt[kt]),bt?baseAssignValue(it,kt,Lt):assignValue(it,kt,Lt)}return it}var nativeMax$2=Math.max;function overRest(nt,rt,it){return rt=nativeMax$2(rt===void 0?nt.length-1:rt,0),function(){for(var st=arguments,bt=-1,xt=nativeMax$2(st.length-rt,0),Et=Array(xt);++bt<xt;)Et[bt]=st[rt+bt];bt=-1;for(var kt=Array(rt+1);++bt<rt;)kt[bt]=st[bt];return kt[rt]=it(Et),apply$1(nt,this,kt)}}function baseRest(nt,rt){return setToString$1(overRest(nt,rt,identity),nt+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(nt){return typeof nt=="number"&&nt>-1&&nt%1==0&&nt<=MAX_SAFE_INTEGER}function isArrayLike(nt){return nt!=null&&isLength(nt.length)&&!isFunction(nt)}function isIterateeCall(nt,rt,it){if(!isObject$1(it))return!1;var st=typeof rt;return(st=="number"?isArrayLike(it)&&isIndex(rt,it.length):st=="string"&&rt in it)?eq(it[rt],nt):!1}function createAssigner(nt){return baseRest(function(rt,it){var st=-1,bt=it.length,xt=bt>1?it[bt-1]:void 0,Et=bt>2?it[2]:void 0;for(xt=nt.length>3&&typeof xt=="function"?(bt--,xt):void 0,Et&&isIterateeCall(it[0],it[1],Et)&&(xt=bt<3?void 0:xt,bt=1),rt=Object(rt);++st<bt;){var kt=it[st];kt&&nt(rt,kt,st,xt)}return rt})}var objectProto$c=Object.prototype;function isPrototype(nt){var rt=nt&&nt.constructor,it=typeof rt=="function"&&rt.prototype||objectProto$c;return nt===it}function baseTimes(nt,rt){for(var it=-1,st=Array(nt);++it<nt;)st[it]=rt(it);return st}var argsTag$3="[object Arguments]";function baseIsArguments(nt){return isObjectLike(nt)&&baseGetTag(nt)==argsTag$3}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty,propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(nt){return isObjectLike(nt)&&hasOwnProperty$a.call(nt,"callee")&&!propertyIsEnumerable$1.call(nt,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(nt){return isObjectLike(nt)&&isLength(nt.length)&&!!typedArrayTags[baseGetTag(nt)]}function baseUnary(nt){return function(rt){return nt(rt)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var nt=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return nt||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function arrayLikeKeys(nt,rt){var it=isArray$1(nt),st=!it&&isArguments$1(nt),bt=!it&&!st&&isBuffer$1(nt),xt=!it&&!st&&!bt&&isTypedArray$1(nt),Et=it||st||bt||xt,kt=Et?baseTimes(nt.length,String):[],Lt=kt.length;for(var Pt in nt)(rt||hasOwnProperty$9.call(nt,Pt))&&!(Et&&(Pt=="length"||bt&&(Pt=="offset"||Pt=="parent")||xt&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||isIndex(Pt,Lt)))&&kt.push(Pt);return kt}function overArg(nt,rt){return function(it){return nt(rt(it))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function baseKeys(nt){if(!isPrototype(nt))return nativeKeys$1(nt);var rt=[];for(var it in Object(nt))hasOwnProperty$8.call(nt,it)&&it!="constructor"&&rt.push(it);return rt}function keys(nt){return isArrayLike(nt)?arrayLikeKeys(nt):baseKeys(nt)}function nativeKeysIn(nt){var rt=[];if(nt!=null)for(var it in Object(nt))rt.push(it);return rt}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeysIn(nt){if(!isObject$1(nt))return nativeKeysIn(nt);var rt=isPrototype(nt),it=[];for(var st in nt)st=="constructor"&&(rt||!hasOwnProperty$7.call(nt,st))||it.push(st);return it}function keysIn(nt){return isArrayLike(nt)?arrayLikeKeys(nt,!0):baseKeysIn(nt)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(nt,rt){if(isArray$1(nt))return!1;var it=typeof nt;return it=="number"||it=="symbol"||it=="boolean"||nt==null||isSymbol(nt)?!0:reIsPlainProp.test(nt)||!reIsDeepProp.test(nt)||rt!=null&&nt in Object(rt)}var MAX_MEMOIZE_SIZE=500;function memoizeCapped(nt){var rt=memoize(nt,function(st){return it.size===MAX_MEMOIZE_SIZE&&it.clear(),st}),it=rt.cache;return rt}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(nt){var rt=[];return nt.charCodeAt(0)===46&&rt.push(""),nt.replace(rePropName,function(it,st,bt,xt){rt.push(bt?xt.replace(reEscapeChar,"$1"):st||it)}),rt});const stringToPath$1=stringToPath;function toString(nt){return nt==null?"":baseToString(nt)}function castPath(nt,rt){return isArray$1(nt)?nt:isKey(nt,rt)?[nt]:stringToPath$1(toString(nt))}var INFINITY$1=1/0;function toKey(nt){if(typeof nt=="string"||isSymbol(nt))return nt;var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$1?"-0":rt}function baseGet(nt,rt){rt=castPath(rt,nt);for(var it=0,st=rt.length;nt!=null&&it<st;)nt=nt[toKey(rt[it++])];return it&&it==st?nt:void 0}function get$1(nt,rt,it){var st=nt==null?void 0:baseGet(nt,rt);return st===void 0?it:st}function arrayPush(nt,rt){for(var it=-1,st=rt.length,bt=nt.length;++it<st;)nt[bt+it]=rt[it];return nt}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(nt){return isArray$1(nt)||isArguments$1(nt)||!!(spreadableSymbol&&nt&&nt[spreadableSymbol])}function baseFlatten(nt,rt,it,st,bt){var xt=-1,Et=nt.length;for(it||(it=isFlattenable),bt||(bt=[]);++xt<Et;){var kt=nt[xt];rt>0&&it(kt)?rt>1?baseFlatten(kt,rt-1,it,st,bt):arrayPush(bt,kt):st||(bt[bt.length]=kt)}return bt}function flatten$1(nt){var rt=nt==null?0:nt.length;return rt?baseFlatten(nt,1):[]}function flatRest(nt){return setToString$1(overRest(nt,void 0,flatten$1),nt+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(nt){if(!isObjectLike(nt)||baseGetTag(nt)!=objectTag$3)return!1;var rt=getPrototype$1(nt);if(rt===null)return!0;var it=hasOwnProperty$6.call(rt,"constructor")&&rt.constructor;return typeof it=="function"&&it instanceof it&&funcToString.call(it)==objectCtorString}function arrayReduce(nt,rt,it,st){var bt=-1,xt=nt==null?0:nt.length;for(st&&xt&&(it=nt[++bt]);++bt<xt;)it=rt(it,nt[bt],bt,nt);return it}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(nt){var rt=this.__data__,it=rt.delete(nt);return this.size=rt.size,it}function stackGet(nt){return this.__data__.get(nt)}function stackHas(nt){return this.__data__.has(nt)}var LARGE_ARRAY_SIZE$1=200;function stackSet(nt,rt){var it=this.__data__;if(it instanceof ListCache){var st=it.__data__;if(!Map$2||st.length<LARGE_ARRAY_SIZE$1-1)return st.push([nt,rt]),this.size=++it.size,this;it=this.__data__=new MapCache(st)}return it.set(nt,rt),this.size=it.size,this}function Stack(nt){var rt=this.__data__=new ListCache(nt);this.size=rt.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(nt,rt){return nt&&copyObject(rt,keys(rt),nt)}function baseAssignIn(nt,rt){return nt&&copyObject(rt,keysIn(rt),nt)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(nt,rt){if(rt)return nt.slice();var it=nt.length,st=allocUnsafe?allocUnsafe(it):new nt.constructor(it);return nt.copy(st),st}function arrayFilter(nt,rt){for(var it=-1,st=nt==null?0:nt.length,bt=0,xt=[];++it<st;){var Et=nt[it];rt(Et,it,nt)&&(xt[bt++]=Et)}return xt}function stubArray(){return[]}var objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(nt){return nt==null?[]:(nt=Object(nt),arrayFilter(nativeGetSymbols$1(nt),function(rt){return propertyIsEnumerable.call(nt,rt)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(nt,rt){return copyObject(nt,getSymbols$1(nt),rt)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(nt){for(var rt=[];nt;)arrayPush(rt,getSymbols$1(nt)),nt=getPrototype$1(nt);return rt}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(nt,rt){return copyObject(nt,getSymbolsIn$1(nt),rt)}function baseGetAllKeys(nt,rt,it){var st=rt(nt);return isArray$1(nt)?st:arrayPush(st,it(nt))}function getAllKeys(nt){return baseGetAllKeys(nt,keys,getSymbols$1)}function getAllKeysIn(nt){return baseGetAllKeys(nt,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(nt){var rt=baseGetTag(nt),it=rt==objectTag$2?nt.constructor:void 0,st=it?toSource(it):"";if(st)switch(st){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return rt});const getTag$1=getTag;var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function initCloneArray(nt){var rt=nt.length,it=new nt.constructor(rt);return rt&&typeof nt[0]=="string"&&hasOwnProperty$5.call(nt,"index")&&(it.index=nt.index,it.input=nt.input),it}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(nt){var rt=new nt.constructor(nt.byteLength);return new Uint8Array$2(rt).set(new Uint8Array$2(nt)),rt}function cloneDataView(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.byteLength)}var reFlags=/\w*$/;function cloneRegExp(nt){var rt=new nt.constructor(nt.source,reFlags.exec(nt));return rt.lastIndex=nt.lastIndex,rt}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(nt){return symbolValueOf$1?Object(symbolValueOf$1.call(nt)):{}}function cloneTypedArray(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(nt,rt,it){var st=nt.constructor;switch(rt){case arrayBufferTag$2:return cloneArrayBuffer(nt);case boolTag$2:case dateTag$2:return new st(+nt);case dataViewTag$2:return cloneDataView(nt,it);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(nt,it);case mapTag$4:return new st;case numberTag$2:case stringTag$2:return new st(nt);case regexpTag$2:return cloneRegExp(nt);case setTag$4:return new st;case symbolTag$2:return cloneSymbol(nt)}}function initCloneObject(nt){return typeof nt.constructor=="function"&&!isPrototype(nt)?baseCreate$1(getPrototype$1(nt)):{}}var mapTag$3="[object Map]";function baseIsMap(nt){return isObjectLike(nt)&&getTag$1(nt)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(nt){return isObjectLike(nt)&&getTag$1(nt)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(nt,rt,it,st,bt,xt){var Et,kt=rt&CLONE_DEEP_FLAG$1,Lt=rt&CLONE_FLAT_FLAG,Pt=rt&CLONE_SYMBOLS_FLAG$2;if(it&&(Et=bt?it(nt,st,bt,xt):it(nt)),Et!==void 0)return Et;if(!isObject$1(nt))return nt;var Rt=isArray$1(nt);if(Rt){if(Et=initCloneArray(nt),!kt)return copyArray(nt,Et)}else{var Dt=getTag$1(nt),Bt=Dt==funcTag||Dt==genTag;if(isBuffer$1(nt))return cloneBuffer(nt,kt);if(Dt==objectTag$1||Dt==argsTag$1||Bt&&!bt){if(Et=Lt||Bt?{}:initCloneObject(nt),!kt)return Lt?copySymbolsIn(nt,baseAssignIn(Et,nt)):copySymbols(nt,baseAssign(Et,nt))}else{if(!cloneableTags[Dt])return bt?nt:{};Et=initCloneByTag(nt,Dt,kt)}}xt||(xt=new Stack);var Ft=xt.get(nt);if(Ft)return Ft;xt.set(nt,Et),isSet$1(nt)?nt.forEach(function(Wt){Et.add(baseClone(Wt,rt,it,Wt,nt,xt))}):isMap$1(nt)&&nt.forEach(function(Wt,Qt){Et.set(Qt,baseClone(Wt,rt,it,Qt,nt,xt))});var Yt=Pt?Lt?getAllKeysIn:getAllKeys:Lt?keysIn:keys,Zt=Rt?void 0:Yt(nt);return arrayEach(Zt||nt,function(Wt,Qt){Zt&&(Qt=Wt,Wt=nt[Qt]),assignValue(Et,Qt,baseClone(Wt,rt,it,Qt,nt,xt))}),Et}var CLONE_SYMBOLS_FLAG$1=4;function clone$1(nt){return baseClone(nt,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(nt){return baseClone(nt,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(nt){return this.__data__.set(nt,HASH_UNDEFINED),this}function setCacheHas(nt){return this.__data__.has(nt)}function SetCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.__data__=new MapCache;++rt<it;)this.add(nt[rt])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(nt,rt){for(var it=-1,st=nt==null?0:nt.length;++it<st;)if(rt(nt[it],it,nt))return!0;return!1}function cacheHas(nt,rt){return nt.has(rt)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(nt,rt,it,st,bt,xt){var Et=it&COMPARE_PARTIAL_FLAG$5,kt=nt.length,Lt=rt.length;if(kt!=Lt&&!(Et&&Lt>kt))return!1;var Pt=xt.get(nt),Rt=xt.get(rt);if(Pt&&Rt)return Pt==rt&&Rt==nt;var Dt=-1,Bt=!0,Ft=it&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(xt.set(nt,rt),xt.set(rt,nt);++Dt<kt;){var Yt=nt[Dt],Zt=rt[Dt];if(st)var Wt=Et?st(Zt,Yt,Dt,rt,nt,xt):st(Yt,Zt,Dt,nt,rt,xt);if(Wt!==void 0){if(Wt)continue;Bt=!1;break}if(Ft){if(!arraySome(rt,function(Qt,Kt){if(!cacheHas(Ft,Kt)&&(Yt===Qt||bt(Yt,Qt,it,st,xt)))return Ft.push(Kt)})){Bt=!1;break}}else if(!(Yt===Zt||bt(Yt,Zt,it,st,xt))){Bt=!1;break}}return xt.delete(nt),xt.delete(rt),Bt}function mapToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(st,bt){it[++rt]=[bt,st]}),it}function setToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(st){it[++rt]=st}),it}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(nt,rt,it,st,bt,xt,Et){switch(it){case dataViewTag:if(nt.byteLength!=rt.byteLength||nt.byteOffset!=rt.byteOffset)return!1;nt=nt.buffer,rt=rt.buffer;case arrayBufferTag:return!(nt.byteLength!=rt.byteLength||!xt(new Uint8Array$2(nt),new Uint8Array$2(rt)));case boolTag:case dateTag:case numberTag:return eq(+nt,+rt);case errorTag:return nt.name==rt.name&&nt.message==rt.message;case regexpTag:case stringTag:return nt==rt+"";case mapTag$1:var kt=mapToArray;case setTag$1:var Lt=st&COMPARE_PARTIAL_FLAG$4;if(kt||(kt=setToArray),nt.size!=rt.size&&!Lt)return!1;var Pt=Et.get(nt);if(Pt)return Pt==rt;st|=COMPARE_UNORDERED_FLAG$2,Et.set(nt,rt);var Rt=equalArrays(kt(nt),kt(rt),st,bt,xt,Et);return Et.delete(nt),Rt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(nt)==symbolValueOf.call(rt)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function equalObjects(nt,rt,it,st,bt,xt){var Et=it&COMPARE_PARTIAL_FLAG$3,kt=getAllKeys(nt),Lt=kt.length,Pt=getAllKeys(rt),Rt=Pt.length;if(Lt!=Rt&&!Et)return!1;for(var Dt=Lt;Dt--;){var Bt=kt[Dt];if(!(Et?Bt in rt:hasOwnProperty$4.call(rt,Bt)))return!1}var Ft=xt.get(nt),Yt=xt.get(rt);if(Ft&&Yt)return Ft==rt&&Yt==nt;var Zt=!0;xt.set(nt,rt),xt.set(rt,nt);for(var Wt=Et;++Dt<Lt;){Bt=kt[Dt];var Qt=nt[Bt],Kt=rt[Bt];if(st)var on=Et?st(Kt,Qt,Bt,rt,nt,xt):st(Qt,Kt,Bt,nt,rt,xt);if(!(on===void 0?Qt===Kt||bt(Qt,Kt,it,st,xt):on)){Zt=!1;break}Wt||(Wt=Bt=="constructor")}if(Zt&&!Wt){var nn=nt.constructor,mn=rt.constructor;nn!=mn&&"constructor"in nt&&"constructor"in rt&&!(typeof nn=="function"&&nn instanceof nn&&typeof mn=="function"&&mn instanceof mn)&&(Zt=!1)}return xt.delete(nt),xt.delete(rt),Zt}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseIsEqualDeep(nt,rt,it,st,bt,xt){var Et=isArray$1(nt),kt=isArray$1(rt),Lt=Et?arrayTag:getTag$1(nt),Pt=kt?arrayTag:getTag$1(rt);Lt=Lt==argsTag?objectTag:Lt,Pt=Pt==argsTag?objectTag:Pt;var Rt=Lt==objectTag,Dt=Pt==objectTag,Bt=Lt==Pt;if(Bt&&isBuffer$1(nt)){if(!isBuffer$1(rt))return!1;Et=!0,Rt=!1}if(Bt&&!Rt)return xt||(xt=new Stack),Et||isTypedArray$1(nt)?equalArrays(nt,rt,it,st,bt,xt):equalByTag(nt,rt,Lt,it,st,bt,xt);if(!(it&COMPARE_PARTIAL_FLAG$2)){var Ft=Rt&&hasOwnProperty$3.call(nt,"__wrapped__"),Yt=Dt&&hasOwnProperty$3.call(rt,"__wrapped__");if(Ft||Yt){var Zt=Ft?nt.value():nt,Wt=Yt?rt.value():rt;return xt||(xt=new Stack),bt(Zt,Wt,it,st,xt)}}return Bt?(xt||(xt=new Stack),equalObjects(nt,rt,it,st,bt,xt)):!1}function baseIsEqual(nt,rt,it,st,bt){return nt===rt?!0:nt==null||rt==null||!isObjectLike(nt)&&!isObjectLike(rt)?nt!==nt&&rt!==rt:baseIsEqualDeep(nt,rt,it,st,baseIsEqual,bt)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(nt,rt,it,st){var bt=it.length,xt=bt,Et=!st;if(nt==null)return!xt;for(nt=Object(nt);bt--;){var kt=it[bt];if(Et&&kt[2]?kt[1]!==nt[kt[0]]:!(kt[0]in nt))return!1}for(;++bt<xt;){kt=it[bt];var Lt=kt[0],Pt=nt[Lt],Rt=kt[1];if(Et&&kt[2]){if(Pt===void 0&&!(Lt in nt))return!1}else{var Dt=new Stack;if(st)var Bt=st(Pt,Rt,Lt,nt,rt,Dt);if(!(Bt===void 0?baseIsEqual(Rt,Pt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,st,Dt):Bt))return!1}}return!0}function isStrictComparable(nt){return nt===nt&&!isObject$1(nt)}function getMatchData(nt){for(var rt=keys(nt),it=rt.length;it--;){var st=rt[it],bt=nt[st];rt[it]=[st,bt,isStrictComparable(bt)]}return rt}function matchesStrictComparable(nt,rt){return function(it){return it==null?!1:it[nt]===rt&&(rt!==void 0||nt in Object(it))}}function baseMatches(nt){var rt=getMatchData(nt);return rt.length==1&&rt[0][2]?matchesStrictComparable(rt[0][0],rt[0][1]):function(it){return it===nt||baseIsMatch(it,nt,rt)}}function baseHasIn(nt,rt){return nt!=null&&rt in Object(nt)}function hasPath(nt,rt,it){rt=castPath(rt,nt);for(var st=-1,bt=rt.length,xt=!1;++st<bt;){var Et=toKey(rt[st]);if(!(xt=nt!=null&&it(nt,Et)))break;nt=nt[Et]}return xt||++st!=bt?xt:(bt=nt==null?0:nt.length,!!bt&&isLength(bt)&&isIndex(Et,bt)&&(isArray$1(nt)||isArguments$1(nt)))}function hasIn(nt,rt){return nt!=null&&hasPath(nt,rt,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(nt,rt){return isKey(nt)&&isStrictComparable(rt)?matchesStrictComparable(toKey(nt),rt):function(it){var st=get$1(it,nt);return st===void 0&&st===rt?hasIn(it,nt):baseIsEqual(rt,st,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(nt){return function(rt){return rt==null?void 0:rt[nt]}}function basePropertyDeep(nt){return function(rt){return baseGet(rt,nt)}}function property(nt){return isKey(nt)?baseProperty(toKey(nt)):basePropertyDeep(nt)}function baseIteratee(nt){return typeof nt=="function"?nt:nt==null?identity:typeof nt=="object"?isArray$1(nt)?baseMatchesProperty(nt[0],nt[1]):baseMatches(nt):property(nt)}function createBaseFor(nt){return function(rt,it,st){for(var bt=-1,xt=Object(rt),Et=st(rt),kt=Et.length;kt--;){var Lt=Et[nt?kt:++bt];if(it(xt[Lt],Lt,xt)===!1)break}return rt}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(nt,rt){return nt&&baseFor$1(nt,rt,keys)}function createBaseEach(nt,rt){return function(it,st){if(it==null)return it;if(!isArrayLike(it))return nt(it,st);for(var bt=it.length,xt=rt?bt:-1,Et=Object(it);(rt?xt--:++xt<bt)&&st(Et[xt],xt,Et)!==!1;);return it}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now=function(){return root$1.Date.now()};const now$1=now;var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,defaults=baseRest(function(nt,rt){nt=Object(nt);var it=-1,st=rt.length,bt=st>2?rt[2]:void 0;for(bt&&isIterateeCall(rt[0],rt[1],bt)&&(st=1);++it<st;)for(var xt=rt[it],Et=keysIn(xt),kt=-1,Lt=Et.length;++kt<Lt;){var Pt=Et[kt],Rt=nt[Pt];(Rt===void 0||eq(Rt,objectProto$2[Pt])&&!hasOwnProperty$2.call(nt,Pt))&&(nt[Pt]=xt[Pt])}return nt});const defaults$1=defaults;function assignMergeValue(nt,rt,it){(it!==void 0&&!eq(nt[rt],it)||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function isArrayLikeObject(nt){return isObjectLike(nt)&&isArrayLike(nt)}function safeGet(nt,rt){if(!(rt==="constructor"&&typeof nt[rt]=="function")&&rt!="__proto__")return nt[rt]}function toPlainObject(nt){return copyObject(nt,keysIn(nt))}function baseMergeDeep(nt,rt,it,st,bt,xt,Et){var kt=safeGet(nt,it),Lt=safeGet(rt,it),Pt=Et.get(Lt);if(Pt){assignMergeValue(nt,it,Pt);return}var Rt=xt?xt(kt,Lt,it+"",nt,rt,Et):void 0,Dt=Rt===void 0;if(Dt){var Bt=isArray$1(Lt),Ft=!Bt&&isBuffer$1(Lt),Yt=!Bt&&!Ft&&isTypedArray$1(Lt);Rt=Lt,Bt||Ft||Yt?isArray$1(kt)?Rt=kt:isArrayLikeObject(kt)?Rt=copyArray(kt):Ft?(Dt=!1,Rt=cloneBuffer(Lt,!0)):Yt?(Dt=!1,Rt=cloneTypedArray(Lt,!0)):Rt=[]:isPlainObject(Lt)||isArguments$1(Lt)?(Rt=kt,isArguments$1(kt)?Rt=toPlainObject(kt):(!isObject$1(kt)||isFunction(kt))&&(Rt=initCloneObject(Lt))):Dt=!1}Dt&&(Et.set(Lt,Rt),bt(Rt,Lt,st,xt,Et),Et.delete(Lt)),assignMergeValue(nt,it,Rt)}function baseMerge(nt,rt,it,st,bt){nt!==rt&&baseFor$1(rt,function(xt,Et){if(bt||(bt=new Stack),isObject$1(xt))baseMergeDeep(nt,rt,Et,it,baseMerge,st,bt);else{var kt=st?st(safeGet(nt,Et),xt,Et+"",nt,rt,bt):void 0;kt===void 0&&(kt=xt),assignMergeValue(nt,Et,kt)}},keysIn)}function arrayIncludesWith(nt,rt,it){for(var st=-1,bt=nt==null?0:nt.length;++st<bt;)if(it(rt,nt[st]))return!0;return!1}function last(nt){var rt=nt==null?0:nt.length;return rt?nt[rt-1]:void 0}function castFunction(nt){return typeof nt=="function"?nt:identity}function forEach(nt,rt){var it=isArray$1(nt)?arrayEach:baseEach$1;return it(nt,castFunction(rt))}function baseFilter(nt,rt){var it=[];return baseEach$1(nt,function(st,bt,xt){rt(st,bt,xt)&&it.push(st)}),it}function filter(nt,rt){var it=isArray$1(nt)?arrayFilter:baseFilter;return it(nt,baseIteratee(rt))}function createFind(nt){return function(rt,it,st){var bt=Object(rt);if(!isArrayLike(rt)){var xt=baseIteratee(it);rt=keys(rt),it=function(kt){return xt(bt[kt],kt,bt)}}var Et=nt(rt,it,st);return Et>-1?bt[xt?rt[Et]:Et]:void 0}}var nativeMax$1=Math.max;function findIndex(nt,rt,it){var st=nt==null?0:nt.length;if(!st)return-1;var bt=it==null?0:toInteger(it);return bt<0&&(bt=nativeMax$1(st+bt,0)),baseFindIndex(nt,baseIteratee(rt),bt)}var find=createFind(findIndex);const find$1=find;function baseMap(nt,rt){var it=-1,st=isArrayLike(nt)?Array(nt.length):[];return baseEach$1(nt,function(bt,xt,Et){st[++it]=rt(bt,xt,Et)}),st}function map$1(nt,rt){var it=isArray$1(nt)?arrayMap:baseMap;return it(nt,baseIteratee(rt))}function forIn(nt,rt){return nt==null?nt:baseFor$1(nt,castFunction(rt),keysIn)}function baseGt(nt,rt){return nt>rt}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseHas(nt,rt){return nt!=null&&hasOwnProperty$1.call(nt,rt)}function has(nt,rt){return nt!=null&&hasPath(nt,rt,baseHas)}function baseValues(nt,rt){return arrayMap(rt,function(it){return nt[it]})}function values(nt){return nt==null?[]:baseValues(nt,keys(nt))}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(nt){if(nt==null)return!0;if(isArrayLike(nt)&&(isArray$1(nt)||typeof nt=="string"||typeof nt.splice=="function"||isBuffer$1(nt)||isTypedArray$1(nt)||isArguments$1(nt)))return!nt.length;var rt=getTag$1(nt);if(rt==mapTag||rt==setTag)return!nt.size;if(isPrototype(nt))return!baseKeys(nt).length;for(var it in nt)if(hasOwnProperty.call(nt,it))return!1;return!0}function isUndefined(nt){return nt===void 0}function baseLt(nt,rt){return nt<rt}function mapValues(nt,rt){var it={};return rt=baseIteratee(rt),baseForOwn(nt,function(st,bt,xt){baseAssignValue(it,bt,rt(st,bt,xt))}),it}function baseExtremum(nt,rt,it){for(var st=-1,bt=nt.length;++st<bt;){var xt=nt[st],Et=rt(xt);if(Et!=null&&(kt===void 0?Et===Et&&!isSymbol(Et):it(Et,kt)))var kt=Et,Lt=xt}return Lt}function max(nt){return nt&&nt.length?baseExtremum(nt,identity,baseGt):void 0}var merge$2=createAssigner(function(nt,rt,it){baseMerge(nt,rt,it)});const merge$3=merge$2;function min(nt){return nt&&nt.length?baseExtremum(nt,identity,baseLt):void 0}function minBy(nt,rt){return nt&&nt.length?baseExtremum(nt,baseIteratee(rt),baseLt):void 0}function baseSet(nt,rt,it,st){if(!isObject$1(nt))return nt;rt=castPath(rt,nt);for(var bt=-1,xt=rt.length,Et=xt-1,kt=nt;kt!=null&&++bt<xt;){var Lt=toKey(rt[bt]),Pt=it;if(Lt==="__proto__"||Lt==="constructor"||Lt==="prototype")return nt;if(bt!=Et){var Rt=kt[Lt];Pt=st?st(Rt,Lt,kt):void 0,Pt===void 0&&(Pt=isObject$1(Rt)?Rt:isIndex(rt[bt+1])?[]:{})}assignValue(kt,Lt,Pt),kt=kt[Lt]}return nt}function basePickBy(nt,rt,it){for(var st=-1,bt=rt.length,xt={};++st<bt;){var Et=rt[st],kt=baseGet(nt,Et);it(kt,Et)&&baseSet(xt,castPath(Et,nt),kt)}return xt}function baseSortBy(nt,rt){var it=nt.length;for(nt.sort(rt);it--;)nt[it]=nt[it].value;return nt}function compareAscending(nt,rt){if(nt!==rt){var it=nt!==void 0,st=nt===null,bt=nt===nt,xt=isSymbol(nt),Et=rt!==void 0,kt=rt===null,Lt=rt===rt,Pt=isSymbol(rt);if(!kt&&!Pt&&!xt&&nt>rt||xt&&Et&&Lt&&!kt&&!Pt||st&&Et&&Lt||!it&&Lt||!bt)return 1;if(!st&&!xt&&!Pt&&nt<rt||Pt&&it&&bt&&!st&&!xt||kt&&it&&bt||!Et&&bt||!Lt)return-1}return 0}function compareMultiple(nt,rt,it){for(var st=-1,bt=nt.criteria,xt=rt.criteria,Et=bt.length,kt=it.length;++st<Et;){var Lt=compareAscending(bt[st],xt[st]);if(Lt){if(st>=kt)return Lt;var Pt=it[st];return Lt*(Pt=="desc"?-1:1)}}return nt.index-rt.index}function baseOrderBy(nt,rt,it){rt.length?rt=arrayMap(rt,function(xt){return isArray$1(xt)?function(Et){return baseGet(Et,xt.length===1?xt[0]:xt)}:xt}):rt=[identity];var st=-1;rt=arrayMap(rt,baseUnary(baseIteratee));var bt=baseMap(nt,function(xt,Et,kt){var Lt=arrayMap(rt,function(Pt){return Pt(xt)});return{criteria:Lt,index:++st,value:xt}});return baseSortBy(bt,function(xt,Et){return compareMultiple(xt,Et,it)})}function basePick(nt,rt){return basePickBy(nt,rt,function(it,st){return hasIn(nt,st)})}var pick=flatRest(function(nt,rt){return nt==null?{}:basePick(nt,rt)});const pick$1=pick;var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(nt,rt,it,st){for(var bt=-1,xt=nativeMax(nativeCeil((rt-nt)/(it||1)),0),Et=Array(xt);xt--;)Et[st?xt:++bt]=nt,nt+=it;return Et}function createRange(nt){return function(rt,it,st){return st&&typeof st!="number"&&isIterateeCall(rt,it,st)&&(it=st=void 0),rt=toFinite(rt),it===void 0?(it=rt,rt=0):it=toFinite(it),st=st===void 0?rt<it?1:-1:toFinite(st),baseRange(rt,it,st,nt)}}var range=createRange();const range$1=range;function baseReduce(nt,rt,it,st,bt){return bt(nt,function(xt,Et,kt){it=st?(st=!1,xt):rt(it,xt,Et,kt)}),it}function reduce(nt,rt,it){var st=isArray$1(nt)?arrayReduce:baseReduce,bt=arguments.length<3;return st(nt,baseIteratee(rt),it,bt,baseEach$1)}var sortBy=baseRest(function(nt,rt){if(nt==null)return[];var it=rt.length;return it>1&&isIterateeCall(nt,rt[0],rt[1])?rt=[]:it>2&&isIterateeCall(rt[0],rt[1],rt[2])&&(rt=[rt[0]]),baseOrderBy(nt,baseFlatten(rt,1),[])});const sortBy$1=sortBy;var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(nt){return new Set$2(nt)}:noop;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq(nt,rt,it){var st=-1,bt=arrayIncludes,xt=nt.length,Et=!0,kt=[],Lt=kt;if(it)Et=!1,bt=arrayIncludesWith;else if(xt>=LARGE_ARRAY_SIZE){var Pt=rt?null:createSet$1(nt);if(Pt)return setToArray(Pt);Et=!1,bt=cacheHas,Lt=new SetCache}else Lt=rt?[]:kt;e:for(;++st<xt;){var Rt=nt[st],Dt=rt?rt(Rt):Rt;if(Rt=it||Rt!==0?Rt:0,Et&&Dt===Dt){for(var Bt=Lt.length;Bt--;)if(Lt[Bt]===Dt)continue e;rt&&Lt.push(Dt),kt.push(Rt)}else bt(Lt,Dt,it)||(Lt!==kt&&Lt.push(Dt),kt.push(Rt))}return kt}var union=baseRest(function(nt){return baseUniq(baseFlatten(nt,1,isArrayLikeObject,!0))});const union$1=union;var idCounter=0;function uniqueId(nt){var rt=++idCounter;return toString(nt)+rt}function baseZipObject(nt,rt,it){for(var st=-1,bt=nt.length,xt=rt.length,Et={};++st<bt;){var kt=st<xt?rt[st]:void 0;it(Et,nt[st],kt)}return Et}function zipObject(nt,rt){return baseZipObject(nt||[],rt||[],assignValue)}var DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";class Graph{constructor(rt={}){this._isDirected=has(rt,"directed")?rt.directed:!0,this._isMultigraph=has(rt,"multigraph")?rt.multigraph:!1,this._isCompound=has(rt,"compound")?rt.compound:!1,this._label=void 0,this._defaultNodeLabelFn=constant(void 0),this._defaultEdgeLabelFn=constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(rt){return this._label=rt,this}graph(){return this._label}setDefaultNodeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultNodeLabelFn=rt,this}nodeCount(){return this._nodeCount}nodes(){return keys(this._nodes)}sources(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._in[it])})}sinks(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._out[it])})}setNodes(rt,it){var st=arguments,bt=this;return forEach(rt,function(xt){st.length>1?bt.setNode(xt,it):bt.setNode(xt)}),this}setNode(rt,it){return has(this._nodes,rt)?(arguments.length>1&&(this._nodes[rt]=it),this):(this._nodes[rt]=arguments.length>1?it:this._defaultNodeLabelFn(rt),this._isCompound&&(this._parent[rt]=GRAPH_NODE,this._children[rt]={},this._children[GRAPH_NODE][rt]=!0),this._in[rt]={},this._preds[rt]={},this._out[rt]={},this._sucs[rt]={},++this._nodeCount,this)}node(rt){return this._nodes[rt]}hasNode(rt){return has(this._nodes,rt)}removeNode(rt){var it=this;if(has(this._nodes,rt)){var st=function(bt){it.removeEdge(it._edgeObjs[bt])};delete this._nodes[rt],this._isCompound&&(this._removeFromParentsChildList(rt),delete this._parent[rt],forEach(this.children(rt),function(bt){it.setParent(bt)}),delete this._children[rt]),forEach(keys(this._in[rt]),st),delete this._in[rt],delete this._preds[rt],forEach(keys(this._out[rt]),st),delete this._out[rt],delete this._sucs[rt],--this._nodeCount}return this}setParent(rt,it){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(isUndefined(it))it=GRAPH_NODE;else{it+="";for(var st=it;!isUndefined(st);st=this.parent(st))if(st===rt)throw new Error("Setting "+it+" as parent of "+rt+" would create a cycle");this.setNode(it)}return this.setNode(rt),this._removeFromParentsChildList(rt),this._parent[rt]=it,this._children[it][rt]=!0,this}_removeFromParentsChildList(rt){delete this._children[this._parent[rt]][rt]}parent(rt){if(this._isCompound){var it=this._parent[rt];if(it!==GRAPH_NODE)return it}}children(rt){if(isUndefined(rt)&&(rt=GRAPH_NODE),this._isCompound){var it=this._children[rt];if(it)return keys(it)}else{if(rt===GRAPH_NODE)return this.nodes();if(this.hasNode(rt))return[]}}predecessors(rt){var it=this._preds[rt];if(it)return keys(it)}successors(rt){var it=this._sucs[rt];if(it)return keys(it)}neighbors(rt){var it=this.predecessors(rt);if(it)return union$1(it,this.successors(rt))}isLeaf(rt){var it;return this.isDirected()?it=this.successors(rt):it=this.neighbors(rt),it.length===0}filterNodes(rt){var it=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});it.setGraph(this.graph());var st=this;forEach(this._nodes,function(Et,kt){rt(kt)&&it.setNode(kt,Et)}),forEach(this._edgeObjs,function(Et){it.hasNode(Et.v)&&it.hasNode(Et.w)&&it.setEdge(Et,st.edge(Et))});var bt={};function xt(Et){var kt=st.parent(Et);return kt===void 0||it.hasNode(kt)?(bt[Et]=kt,kt):kt in bt?bt[kt]:xt(kt)}return this._isCompound&&forEach(it.nodes(),function(Et){it.setParent(Et,xt(Et))}),it}setDefaultEdgeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultEdgeLabelFn=rt,this}edgeCount(){return this._edgeCount}edges(){return values(this._edgeObjs)}setPath(rt,it){var st=this,bt=arguments;return reduce(rt,function(xt,Et){return bt.length>1?st.setEdge(xt,Et,it):st.setEdge(xt,Et),Et}),this}setEdge(){var rt,it,st,bt,xt=!1,Et=arguments[0];typeof Et=="object"&&Et!==null&&"v"in Et?(rt=Et.v,it=Et.w,st=Et.name,arguments.length===2&&(bt=arguments[1],xt=!0)):(rt=Et,it=arguments[1],st=arguments[3],arguments.length>2&&(bt=arguments[2],xt=!0)),rt=""+rt,it=""+it,isUndefined(st)||(st=""+st);var kt=edgeArgsToId(this._isDirected,rt,it,st);if(has(this._edgeLabels,kt))return xt&&(this._edgeLabels[kt]=bt),this;if(!isUndefined(st)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(rt),this.setNode(it),this._edgeLabels[kt]=xt?bt:this._defaultEdgeLabelFn(rt,it,st);var Lt=edgeArgsToObj(this._isDirected,rt,it,st);return rt=Lt.v,it=Lt.w,Object.freeze(Lt),this._edgeObjs[kt]=Lt,incrementOrInitEntry(this._preds[it],rt),incrementOrInitEntry(this._sucs[rt],it),this._in[it][kt]=Lt,this._out[rt][kt]=Lt,this._edgeCount++,this}edge(rt,it,st){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st);return this._edgeLabels[bt]}hasEdge(rt,it,st){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st);return has(this._edgeLabels,bt)}removeEdge(rt,it,st){var bt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st),xt=this._edgeObjs[bt];return xt&&(rt=xt.v,it=xt.w,delete this._edgeLabels[bt],delete this._edgeObjs[bt],decrementOrRemoveEntry(this._preds[it],rt),decrementOrRemoveEntry(this._sucs[rt],it),delete this._in[it][bt],delete this._out[rt][bt],this._edgeCount--),this}inEdges(rt,it){var st=this._in[rt];if(st){var bt=values(st);return it?filter(bt,function(xt){return xt.v===it}):bt}}outEdges(rt,it){var st=this._out[rt];if(st){var bt=values(st);return it?filter(bt,function(xt){return xt.w===it}):bt}}nodeEdges(rt,it){var st=this.inEdges(rt,it);if(st)return st.concat(this.outEdges(rt,it))}}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;function incrementOrInitEntry(nt,rt){nt[rt]?nt[rt]++:nt[rt]=1}function decrementOrRemoveEntry(nt,rt){--nt[rt]||delete nt[rt]}function edgeArgsToId(nt,rt,it,st){var bt=""+rt,xt=""+it;if(!nt&&bt>xt){var Et=bt;bt=xt,xt=Et}return bt+EDGE_KEY_DELIM+xt+EDGE_KEY_DELIM+(isUndefined(st)?DEFAULT_EDGE_NAME:st)}function edgeArgsToObj(nt,rt,it,st){var bt=""+rt,xt=""+it;if(!nt&&bt>xt){var Et=bt;bt=xt,xt=Et}var kt={v:bt,w:xt};return st&&(kt.name=st),kt}function edgeObjToId(nt,rt){return edgeArgsToId(nt,rt.v,rt.w,rt.name)}class List{constructor(){var rt={};rt._next=rt._prev=rt,this._sentinel=rt}dequeue(){var rt=this._sentinel,it=rt._prev;if(it!==rt)return unlink(it),it}enqueue(rt){var it=this._sentinel;rt._prev&&rt._next&&unlink(rt),rt._next=it._next,it._next._prev=rt,it._next=rt,rt._prev=it}toString(){for(var rt=[],it=this._sentinel,st=it._prev;st!==it;)rt.push(JSON.stringify(st,filterOutLinks)),st=st._prev;return"["+rt.join(", ")+"]"}}function unlink(nt){nt._prev._next=nt._next,nt._next._prev=nt._prev,delete nt._next,delete nt._prev}function filterOutLinks(nt,rt){if(nt!=="_next"&&nt!=="_prev")return rt}var DEFAULT_WEIGHT_FN=constant(1);function greedyFAS(nt,rt){if(nt.nodeCount()<=1)return[];var it=buildState(nt,rt||DEFAULT_WEIGHT_FN),st=doGreedyFAS(it.graph,it.buckets,it.zeroIdx);return flatten$1(map$1(st,function(bt){return nt.outEdges(bt.v,bt.w)}))}function doGreedyFAS(nt,rt,it){for(var st=[],bt=rt[rt.length-1],xt=rt[0],Et;nt.nodeCount();){for(;Et=xt.dequeue();)removeNode(nt,rt,it,Et);for(;Et=bt.dequeue();)removeNode(nt,rt,it,Et);if(nt.nodeCount()){for(var kt=rt.length-2;kt>0;--kt)if(Et=rt[kt].dequeue(),Et){st=st.concat(removeNode(nt,rt,it,Et,!0));break}}}return st}function removeNode(nt,rt,it,st,bt){var xt=bt?[]:void 0;return forEach(nt.inEdges(st.v),function(Et){var kt=nt.edge(Et),Lt=nt.node(Et.v);bt&&xt.push({v:Et.v,w:Et.w}),Lt.out-=kt,assignBucket(rt,it,Lt)}),forEach(nt.outEdges(st.v),function(Et){var kt=nt.edge(Et),Lt=Et.w,Pt=nt.node(Lt);Pt.in-=kt,assignBucket(rt,it,Pt)}),nt.removeNode(st.v),xt}function buildState(nt,rt){var it=new Graph,st=0,bt=0;forEach(nt.nodes(),function(kt){it.setNode(kt,{v:kt,in:0,out:0})}),forEach(nt.edges(),function(kt){var Lt=it.edge(kt.v,kt.w)||0,Pt=rt(kt),Rt=Lt+Pt;it.setEdge(kt.v,kt.w,Rt),bt=Math.max(bt,it.node(kt.v).out+=Pt),st=Math.max(st,it.node(kt.w).in+=Pt)});var xt=range$1(bt+st+3).map(function(){return new List}),Et=st+1;return forEach(it.nodes(),function(kt){assignBucket(xt,Et,it.node(kt))}),{graph:it,buckets:xt,zeroIdx:Et}}function assignBucket(nt,rt,it){it.out?it.in?nt[it.out-it.in+rt].enqueue(it):nt[nt.length-1].enqueue(it):nt[0].enqueue(it)}function run$2(nt){var rt=nt.graph().acyclicer==="greedy"?greedyFAS(nt,it(nt)):dfsFAS(nt);forEach(rt,function(st){var bt=nt.edge(st);nt.removeEdge(st),bt.forwardName=st.name,bt.reversed=!0,nt.setEdge(st.w,st.v,bt,uniqueId("rev"))});function it(st){return function(bt){return st.edge(bt).weight}}}function dfsFAS(nt){var rt=[],it={},st={};function bt(xt){has(st,xt)||(st[xt]=!0,it[xt]=!0,forEach(nt.outEdges(xt),function(Et){has(it,Et.w)?rt.push(Et):bt(Et.w)}),delete it[xt])}return forEach(nt.nodes(),bt),rt}function undo$2(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.reversed){nt.removeEdge(rt);var st=it.forwardName;delete it.reversed,delete it.forwardName,nt.setEdge(rt.w,rt.v,it,st)}})}function addDummyNode(nt,rt,it,st){var bt;do bt=uniqueId(st);while(nt.hasNode(bt));return it.dummy=rt,nt.setNode(bt,it),bt}function simplify(nt){var rt=new Graph().setGraph(nt.graph());return forEach(nt.nodes(),function(it){rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){var st=rt.edge(it.v,it.w)||{weight:0,minlen:1},bt=nt.edge(it);rt.setEdge(it.v,it.w,{weight:st.weight+bt.weight,minlen:Math.max(st.minlen,bt.minlen)})}),rt}function asNonCompoundGraph(nt){var rt=new Graph({multigraph:nt.isMultigraph()}).setGraph(nt.graph());return forEach(nt.nodes(),function(it){nt.children(it).length||rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){rt.setEdge(it,nt.edge(it))}),rt}function intersectRect$3(nt,rt){var it=nt.x,st=nt.y,bt=rt.x-it,xt=rt.y-st,Et=nt.width/2,kt=nt.height/2;if(!bt&&!xt)throw new Error("Not possible to find intersection inside of the rectangle");var Lt,Pt;return Math.abs(xt)*Et>Math.abs(bt)*kt?(xt<0&&(kt=-kt),Lt=kt*bt/xt,Pt=kt):(bt<0&&(Et=-Et),Lt=Et,Pt=Et*xt/bt),{x:it+Lt,y:st+Pt}}function buildLayerMatrix(nt){var rt=map$1(range$1(maxRank(nt)+1),function(){return[]});return forEach(nt.nodes(),function(it){var st=nt.node(it),bt=st.rank;isUndefined(bt)||(rt[bt][st.order]=it)}),rt}function normalizeRanks(nt){var rt=min(map$1(nt.nodes(),function(it){return nt.node(it).rank}));forEach(nt.nodes(),function(it){var st=nt.node(it);has(st,"rank")&&(st.rank-=rt)})}function removeEmptyRanks(nt){var rt=min(map$1(nt.nodes(),function(xt){return nt.node(xt).rank})),it=[];forEach(nt.nodes(),function(xt){var Et=nt.node(xt).rank-rt;it[Et]||(it[Et]=[]),it[Et].push(xt)});var st=0,bt=nt.graph().nodeRankFactor;forEach(it,function(xt,Et){isUndefined(xt)&&Et%bt!==0?--st:st&&forEach(xt,function(kt){nt.node(kt).rank+=st})})}function addBorderNode$1(nt,rt,it,st){var bt={width:0,height:0};return arguments.length>=4&&(bt.rank=it,bt.order=st),addDummyNode(nt,"border",bt,rt)}function maxRank(nt){return max(map$1(nt.nodes(),function(rt){var it=nt.node(rt).rank;if(!isUndefined(it))return it}))}function partition(nt,rt){var it={lhs:[],rhs:[]};return forEach(nt,function(st){rt(st)?it.lhs.push(st):it.rhs.push(st)}),it}function time(nt,rt){var it=now$1();try{return rt()}finally{console.log(nt+" time: "+(now$1()-it)+"ms")}}function notime(nt,rt){return rt()}function addBorderSegments(nt){function rt(it){var st=nt.children(it),bt=nt.node(it);if(st.length&&forEach(st,rt),has(bt,"minRank")){bt.borderLeft=[],bt.borderRight=[];for(var xt=bt.minRank,Et=bt.maxRank+1;xt<Et;++xt)addBorderNode(nt,"borderLeft","_bl",it,bt,xt),addBorderNode(nt,"borderRight","_br",it,bt,xt)}}forEach(nt.children(),rt)}function addBorderNode(nt,rt,it,st,bt,xt){var Et={width:0,height:0,rank:xt,borderType:rt},kt=bt[rt][xt-1],Lt=addDummyNode(nt,"border",Et,it);bt[rt][xt]=Lt,nt.setParent(Lt,st),kt&&nt.setEdge(kt,Lt,{weight:1})}function adjust(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="lr"||rt==="rl")&&swapWidthHeight(nt)}function undo$1(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="bt"||rt==="rl")&&reverseY(nt),(rt==="lr"||rt==="rl")&&(swapXY(nt),swapWidthHeight(nt))}function swapWidthHeight(nt){forEach(nt.nodes(),function(rt){swapWidthHeightOne(nt.node(rt))}),forEach(nt.edges(),function(rt){swapWidthHeightOne(nt.edge(rt))})}function swapWidthHeightOne(nt){var rt=nt.width;nt.width=nt.height,nt.height=rt}function reverseY(nt){forEach(nt.nodes(),function(rt){reverseYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,reverseYOne),has(it,"y")&&reverseYOne(it)})}function reverseYOne(nt){nt.y=-nt.y}function swapXY(nt){forEach(nt.nodes(),function(rt){swapXYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,swapXYOne),has(it,"x")&&swapXYOne(it)})}function swapXYOne(nt){var rt=nt.x;nt.x=nt.y,nt.y=rt}function run$1(nt){nt.graph().dummyChains=[],forEach(nt.edges(),function(rt){normalizeEdge(nt,rt)})}function normalizeEdge(nt,rt){var it=rt.v,st=nt.node(it).rank,bt=rt.w,xt=nt.node(bt).rank,Et=rt.name,kt=nt.edge(rt),Lt=kt.labelRank;if(xt!==st+1){nt.removeEdge(rt);var Pt,Rt,Dt;for(Dt=0,++st;st<xt;++Dt,++st)kt.points=[],Rt={width:0,height:0,edgeLabel:kt,edgeObj:rt,rank:st},Pt=addDummyNode(nt,"edge",Rt,"_d"),st===Lt&&(Rt.width=kt.width,Rt.height=kt.height,Rt.dummy="edge-label",Rt.labelpos=kt.labelpos),nt.setEdge(it,Pt,{weight:kt.weight},Et),Dt===0&&nt.graph().dummyChains.push(Pt),it=Pt;nt.setEdge(it,bt,{weight:kt.weight},Et)}}function undo(nt){forEach(nt.graph().dummyChains,function(rt){var it=nt.node(rt),st=it.edgeLabel,bt;for(nt.setEdge(it.edgeObj,st);it.dummy;)bt=nt.successors(rt)[0],nt.removeNode(rt),st.points.push({x:it.x,y:it.y}),it.dummy==="edge-label"&&(st.x=it.x,st.y=it.y,st.width=it.width,st.height=it.height),rt=bt,it=nt.node(rt)})}function longestPath(nt){var rt={};function it(st){var bt=nt.node(st);if(has(rt,st))return bt.rank;rt[st]=!0;var xt=min(map$1(nt.outEdges(st),function(Et){return it(Et.w)-nt.edge(Et).minlen}));return(xt===Number.POSITIVE_INFINITY||xt===void 0||xt===null)&&(xt=0),bt.rank=xt}forEach(nt.sources(),it)}function slack(nt,rt){return nt.node(rt.w).rank-nt.node(rt.v).rank-nt.edge(rt).minlen}function feasibleTree(nt){var rt=new Graph({directed:!1}),it=nt.nodes()[0],st=nt.nodeCount();rt.setNode(it,{});for(var bt,xt;tightTree(rt,nt)<st;)bt=findMinSlackEdge(rt,nt),xt=rt.hasNode(bt.v)?slack(nt,bt):-slack(nt,bt),shiftRanks(rt,nt,xt);return rt}function tightTree(nt,rt){function it(st){forEach(rt.nodeEdges(st),function(bt){var xt=bt.v,Et=st===xt?bt.w:xt;!nt.hasNode(Et)&&!slack(rt,bt)&&(nt.setNode(Et,{}),nt.setEdge(st,Et,{}),it(Et))})}return forEach(nt.nodes(),it),nt.nodeCount()}function findMinSlackEdge(nt,rt){return minBy(rt.edges(),function(it){if(nt.hasNode(it.v)!==nt.hasNode(it.w))return slack(rt,it)})}function shiftRanks(nt,rt,it){forEach(nt.nodes(),function(st){rt.node(st).rank+=it})}function CycleException(){}CycleException.prototype=new Error;function dfs$1(nt,rt,it){isArray$1(rt)||(rt=[rt]);var st=(nt.isDirected()?nt.successors:nt.neighbors).bind(nt),bt=[],xt={};return forEach(rt,function(Et){if(!nt.hasNode(Et))throw new Error("Graph does not have node: "+Et);doDfs(nt,Et,it==="post",xt,st,bt)}),bt}function doDfs(nt,rt,it,st,bt,xt){has(st,rt)||(st[rt]=!0,it||xt.push(rt),forEach(bt(rt),function(Et){doDfs(nt,Et,it,st,bt,xt)}),it&&xt.push(rt))}function postorder$1(nt,rt){return dfs$1(nt,rt,"post")}function preorder(nt,rt){return dfs$1(nt,rt,"pre")}networkSimplex.initLowLimValues=initLowLimValues;networkSimplex.initCutValues=initCutValues;networkSimplex.calcCutValue=calcCutValue;networkSimplex.leaveEdge=leaveEdge;networkSimplex.enterEdge=enterEdge;networkSimplex.exchangeEdges=exchangeEdges;function networkSimplex(nt){nt=simplify(nt),longestPath(nt);var rt=feasibleTree(nt);initLowLimValues(rt),initCutValues(rt,nt);for(var it,st;it=leaveEdge(rt);)st=enterEdge(rt,nt,it),exchangeEdges(rt,nt,it,st)}function initCutValues(nt,rt){var it=postorder$1(nt,nt.nodes());it=it.slice(0,it.length-1),forEach(it,function(st){assignCutValue(nt,rt,st)})}function assignCutValue(nt,rt,it){var st=nt.node(it),bt=st.parent;nt.edge(it,bt).cutvalue=calcCutValue(nt,rt,it)}function calcCutValue(nt,rt,it){var st=nt.node(it),bt=st.parent,xt=!0,Et=rt.edge(it,bt),kt=0;return Et||(xt=!1,Et=rt.edge(bt,it)),kt=Et.weight,forEach(rt.nodeEdges(it),function(Lt){var Pt=Lt.v===it,Rt=Pt?Lt.w:Lt.v;if(Rt!==bt){var Dt=Pt===xt,Bt=rt.edge(Lt).weight;if(kt+=Dt?Bt:-Bt,isTreeEdge(nt,it,Rt)){var Ft=nt.edge(it,Rt).cutvalue;kt+=Dt?-Ft:Ft}}}),kt}function initLowLimValues(nt,rt){arguments.length<2&&(rt=nt.nodes()[0]),dfsAssignLowLim(nt,{},1,rt)}function dfsAssignLowLim(nt,rt,it,st,bt){var xt=it,Et=nt.node(st);return rt[st]=!0,forEach(nt.neighbors(st),function(kt){has(rt,kt)||(it=dfsAssignLowLim(nt,rt,it,kt,st))}),Et.low=xt,Et.lim=it++,bt?Et.parent=bt:delete Et.parent,it}function leaveEdge(nt){return find$1(nt.edges(),function(rt){return nt.edge(rt).cutvalue<0})}function enterEdge(nt,rt,it){var st=it.v,bt=it.w;rt.hasEdge(st,bt)||(st=it.w,bt=it.v);var xt=nt.node(st),Et=nt.node(bt),kt=xt,Lt=!1;xt.lim>Et.lim&&(kt=Et,Lt=!0);var Pt=filter(rt.edges(),function(Rt){return Lt===isDescendant$1(nt,nt.node(Rt.v),kt)&&Lt!==isDescendant$1(nt,nt.node(Rt.w),kt)});return minBy(Pt,function(Rt){return slack(rt,Rt)})}function exchangeEdges(nt,rt,it,st){var bt=it.v,xt=it.w;nt.removeEdge(bt,xt),nt.setEdge(st.v,st.w,{}),initLowLimValues(nt),initCutValues(nt,rt),updateRanks(nt,rt)}function updateRanks(nt,rt){var it=find$1(nt.nodes(),function(bt){return!rt.node(bt).parent}),st=preorder(nt,it);st=st.slice(1),forEach(st,function(bt){var xt=nt.node(bt).parent,Et=rt.edge(bt,xt),kt=!1;Et||(Et=rt.edge(xt,bt),kt=!0),rt.node(bt).rank=rt.node(xt).rank+(kt?Et.minlen:-Et.minlen)})}function isTreeEdge(nt,rt,it){return nt.hasEdge(rt,it)}function isDescendant$1(nt,rt,it){return it.low<=rt.lim&&rt.lim<=it.lim}function rank(nt){switch(nt.graph().ranker){case"network-simplex":networkSimplexRanker(nt);break;case"tight-tree":tightTreeRanker(nt);break;case"longest-path":longestPathRanker(nt);break;default:networkSimplexRanker(nt)}}var longestPathRanker=longestPath;function tightTreeRanker(nt){longestPath(nt),feasibleTree(nt)}function networkSimplexRanker(nt){networkSimplex(nt)}function run(nt){var rt=addDummyNode(nt,"root",{},"_root"),it=treeDepths(nt),st=max(values(it))-1,bt=2*st+1;nt.graph().nestingRoot=rt,forEach(nt.edges(),function(Et){nt.edge(Et).minlen*=bt});var xt=sumWeights(nt)+1;forEach(nt.children(),function(Et){dfs(nt,rt,bt,xt,st,it,Et)}),nt.graph().nodeRankFactor=bt}function dfs(nt,rt,it,st,bt,xt,Et){var kt=nt.children(Et);if(!kt.length){Et!==rt&&nt.setEdge(rt,Et,{weight:0,minlen:it});return}var Lt=addBorderNode$1(nt,"_bt"),Pt=addBorderNode$1(nt,"_bb"),Rt=nt.node(Et);nt.setParent(Lt,Et),Rt.borderTop=Lt,nt.setParent(Pt,Et),Rt.borderBottom=Pt,forEach(kt,function(Dt){dfs(nt,rt,it,st,bt,xt,Dt);var Bt=nt.node(Dt),Ft=Bt.borderTop?Bt.borderTop:Dt,Yt=Bt.borderBottom?Bt.borderBottom:Dt,Zt=Bt.borderTop?st:2*st,Wt=Ft!==Yt?1:bt-xt[Et]+1;nt.setEdge(Lt,Ft,{weight:Zt,minlen:Wt,nestingEdge:!0}),nt.setEdge(Yt,Pt,{weight:Zt,minlen:Wt,nestingEdge:!0})}),nt.parent(Et)||nt.setEdge(rt,Lt,{weight:0,minlen:bt+xt[Et]})}function treeDepths(nt){var rt={};function it(st,bt){var xt=nt.children(st);xt&&xt.length&&forEach(xt,function(Et){it(Et,bt+1)}),rt[st]=bt}return forEach(nt.children(),function(st){it(st,1)}),rt}function sumWeights(nt){return reduce(nt.edges(),function(rt,it){return rt+nt.edge(it).weight},0)}function cleanup(nt){var rt=nt.graph();nt.removeNode(rt.nestingRoot),delete rt.nestingRoot,forEach(nt.edges(),function(it){var st=nt.edge(it);st.nestingEdge&&nt.removeEdge(it)})}function addSubgraphConstraints(nt,rt,it){var st={},bt;forEach(it,function(xt){for(var Et=nt.parent(xt),kt,Lt;Et;){if(kt=nt.parent(Et),kt?(Lt=st[kt],st[kt]=Et):(Lt=bt,bt=Et),Lt&&Lt!==Et){rt.setEdge(Lt,Et);return}Et=kt}})}function buildLayerGraph(nt,rt,it){var st=createRootNode(nt),bt=new Graph({compound:!0}).setGraph({root:st}).setDefaultNodeLabel(function(xt){return nt.node(xt)});return forEach(nt.nodes(),function(xt){var Et=nt.node(xt),kt=nt.parent(xt);(Et.rank===rt||Et.minRank<=rt&&rt<=Et.maxRank)&&(bt.setNode(xt),bt.setParent(xt,kt||st),forEach(nt[it](xt),function(Lt){var Pt=Lt.v===xt?Lt.w:Lt.v,Rt=bt.edge(Pt,xt),Dt=isUndefined(Rt)?0:Rt.weight;bt.setEdge(Pt,xt,{weight:nt.edge(Lt).weight+Dt})}),has(Et,"minRank")&&bt.setNode(xt,{borderLeft:Et.borderLeft[rt],borderRight:Et.borderRight[rt]}))}),bt}function createRootNode(nt){for(var rt;nt.hasNode(rt=uniqueId("_root")););return rt}function crossCount(nt,rt){for(var it=0,st=1;st<rt.length;++st)it+=twoLayerCrossCount(nt,rt[st-1],rt[st]);return it}function twoLayerCrossCount(nt,rt,it){for(var st=zipObject(it,map$1(it,function(Pt,Rt){return Rt})),bt=flatten$1(map$1(rt,function(Pt){return sortBy$1(map$1(nt.outEdges(Pt),function(Rt){return{pos:st[Rt.w],weight:nt.edge(Rt).weight}}),"pos")})),xt=1;xt<it.length;)xt<<=1;var Et=2*xt-1;xt-=1;var kt=map$1(new Array(Et),function(){return 0}),Lt=0;return forEach(bt.forEach(function(Pt){var Rt=Pt.pos+xt;kt[Rt]+=Pt.weight;for(var Dt=0;Rt>0;)Rt%2&&(Dt+=kt[Rt+1]),Rt=Rt-1>>1,kt[Rt]+=Pt.weight;Lt+=Pt.weight*Dt})),Lt}function initOrder(nt){var rt={},it=filter(nt.nodes(),function(kt){return!nt.children(kt).length}),st=max(map$1(it,function(kt){return nt.node(kt).rank})),bt=map$1(range$1(st+1),function(){return[]});function xt(kt){if(!has(rt,kt)){rt[kt]=!0;var Lt=nt.node(kt);bt[Lt.rank].push(kt),forEach(nt.successors(kt),xt)}}var Et=sortBy$1(it,function(kt){return nt.node(kt).rank});return forEach(Et,xt),bt}function barycenter(nt,rt){return map$1(rt,function(it){var st=nt.inEdges(it);if(st.length){var bt=reduce(st,function(xt,Et){var kt=nt.edge(Et),Lt=nt.node(Et.v);return{sum:xt.sum+kt.weight*Lt.order,weight:xt.weight+kt.weight}},{sum:0,weight:0});return{v:it,barycenter:bt.sum/bt.weight,weight:bt.weight}}else return{v:it}})}function resolveConflicts(nt,rt){var it={};forEach(nt,function(bt,xt){var Et=it[bt.v]={indegree:0,in:[],out:[],vs:[bt.v],i:xt};isUndefined(bt.barycenter)||(Et.barycenter=bt.barycenter,Et.weight=bt.weight)}),forEach(rt.edges(),function(bt){var xt=it[bt.v],Et=it[bt.w];!isUndefined(xt)&&!isUndefined(Et)&&(Et.indegree++,xt.out.push(it[bt.w]))});var st=filter(it,function(bt){return!bt.indegree});return doResolveConflicts(st)}function doResolveConflicts(nt){var rt=[];function it(xt){return function(Et){Et.merged||(isUndefined(Et.barycenter)||isUndefined(xt.barycenter)||Et.barycenter>=xt.barycenter)&&mergeEntries(xt,Et)}}function st(xt){return function(Et){Et.in.push(xt),--Et.indegree===0&&nt.push(Et)}}for(;nt.length;){var bt=nt.pop();rt.push(bt),forEach(bt.in.reverse(),it(bt)),forEach(bt.out,st(bt))}return map$1(filter(rt,function(xt){return!xt.merged}),function(xt){return pick$1(xt,["vs","i","barycenter","weight"])})}function mergeEntries(nt,rt){var it=0,st=0;nt.weight&&(it+=nt.barycenter*nt.weight,st+=nt.weight),rt.weight&&(it+=rt.barycenter*rt.weight,st+=rt.weight),nt.vs=rt.vs.concat(nt.vs),nt.barycenter=it/st,nt.weight=st,nt.i=Math.min(rt.i,nt.i),rt.merged=!0}function sort(nt,rt){var it=partition(nt,function(Rt){return has(Rt,"barycenter")}),st=it.lhs,bt=sortBy$1(it.rhs,function(Rt){return-Rt.i}),xt=[],Et=0,kt=0,Lt=0;st.sort(compareWithBias(!!rt)),Lt=consumeUnsortable(xt,bt,Lt),forEach(st,function(Rt){Lt+=Rt.vs.length,xt.push(Rt.vs),Et+=Rt.barycenter*Rt.weight,kt+=Rt.weight,Lt=consumeUnsortable(xt,bt,Lt)});var Pt={vs:flatten$1(xt)};return kt&&(Pt.barycenter=Et/kt,Pt.weight=kt),Pt}function consumeUnsortable(nt,rt,it){for(var st;rt.length&&(st=last(rt)).i<=it;)rt.pop(),nt.push(st.vs),it++;return it}function compareWithBias(nt){return function(rt,it){return rt.barycenter<it.barycenter?-1:rt.barycenter>it.barycenter?1:nt?it.i-rt.i:rt.i-it.i}}function sortSubgraph(nt,rt,it,st){var bt=nt.children(rt),xt=nt.node(rt),Et=xt?xt.borderLeft:void 0,kt=xt?xt.borderRight:void 0,Lt={};Et&&(bt=filter(bt,function(Yt){return Yt!==Et&&Yt!==kt}));var Pt=barycenter(nt,bt);forEach(Pt,function(Yt){if(nt.children(Yt.v).length){var Zt=sortSubgraph(nt,Yt.v,it,st);Lt[Yt.v]=Zt,has(Zt,"barycenter")&&mergeBarycenters(Yt,Zt)}});var Rt=resolveConflicts(Pt,it);expandSubgraphs(Rt,Lt);var Dt=sort(Rt,st);if(Et&&(Dt.vs=flatten$1([Et,Dt.vs,kt]),nt.predecessors(Et).length)){var Bt=nt.node(nt.predecessors(Et)[0]),Ft=nt.node(nt.predecessors(kt)[0]);has(Dt,"barycenter")||(Dt.barycenter=0,Dt.weight=0),Dt.barycenter=(Dt.barycenter*Dt.weight+Bt.order+Ft.order)/(Dt.weight+2),Dt.weight+=2}return Dt}function expandSubgraphs(nt,rt){forEach(nt,function(it){it.vs=flatten$1(it.vs.map(function(st){return rt[st]?rt[st].vs:st}))})}function mergeBarycenters(nt,rt){isUndefined(nt.barycenter)?(nt.barycenter=rt.barycenter,nt.weight=rt.weight):(nt.barycenter=(nt.barycenter*nt.weight+rt.barycenter*rt.weight)/(nt.weight+rt.weight),nt.weight+=rt.weight)}function order(nt){var rt=maxRank(nt),it=buildLayerGraphs(nt,range$1(1,rt+1),"inEdges"),st=buildLayerGraphs(nt,range$1(rt-1,-1,-1),"outEdges"),bt=initOrder(nt);assignOrder(nt,bt);for(var xt=Number.POSITIVE_INFINITY,Et,kt=0,Lt=0;Lt<4;++kt,++Lt){sweepLayerGraphs(kt%2?it:st,kt%4>=2),bt=buildLayerMatrix(nt);var Pt=crossCount(nt,bt);Pt<xt&&(Lt=0,Et=cloneDeep(bt),xt=Pt)}assignOrder(nt,Et)}function buildLayerGraphs(nt,rt,it){return map$1(rt,function(st){return buildLayerGraph(nt,st,it)})}function sweepLayerGraphs(nt,rt){var it=new Graph;forEach(nt,function(st){var bt=st.graph().root,xt=sortSubgraph(st,bt,it,rt);forEach(xt.vs,function(Et,kt){st.node(Et).order=kt}),addSubgraphConstraints(st,it,xt.vs)})}function assignOrder(nt,rt){forEach(rt,function(it){forEach(it,function(st,bt){nt.node(st).order=bt})})}function parentDummyChains(nt){var rt=postorder(nt);forEach(nt.graph().dummyChains,function(it){for(var st=nt.node(it),bt=st.edgeObj,xt=findPath(nt,rt,bt.v,bt.w),Et=xt.path,kt=xt.lca,Lt=0,Pt=Et[Lt],Rt=!0;it!==bt.w;){if(st=nt.node(it),Rt){for(;(Pt=Et[Lt])!==kt&&nt.node(Pt).maxRank<st.rank;)Lt++;Pt===kt&&(Rt=!1)}if(!Rt){for(;Lt<Et.length-1&&nt.node(Pt=Et[Lt+1]).minRank<=st.rank;)Lt++;Pt=Et[Lt]}nt.setParent(it,Pt),it=nt.successors(it)[0]}})}function findPath(nt,rt,it,st){var bt=[],xt=[],Et=Math.min(rt[it].low,rt[st].low),kt=Math.max(rt[it].lim,rt[st].lim),Lt,Pt;Lt=it;do Lt=nt.parent(Lt),bt.push(Lt);while(Lt&&(rt[Lt].low>Et||kt>rt[Lt].lim));for(Pt=Lt,Lt=st;(Lt=nt.parent(Lt))!==Pt;)xt.push(Lt);return{path:bt.concat(xt.reverse()),lca:Pt}}function postorder(nt){var rt={},it=0;function st(bt){var xt=it;forEach(nt.children(bt),st),rt[bt]={low:xt,lim:it++}}return forEach(nt.children(),st),rt}function findType1Conflicts(nt,rt){var it={};function st(bt,xt){var Et=0,kt=0,Lt=bt.length,Pt=last(xt);return forEach(xt,function(Rt,Dt){var Bt=findOtherInnerSegmentNode(nt,Rt),Ft=Bt?nt.node(Bt).order:Lt;(Bt||Rt===Pt)&&(forEach(xt.slice(kt,Dt+1),function(Yt){forEach(nt.predecessors(Yt),function(Zt){var Wt=nt.node(Zt),Qt=Wt.order;(Qt<Et||Ft<Qt)&&!(Wt.dummy&&nt.node(Yt).dummy)&&addConflict(it,Zt,Yt)})}),kt=Dt+1,Et=Ft)}),xt}return reduce(rt,st),it}function findType2Conflicts(nt,rt){var it={};function st(xt,Et,kt,Lt,Pt){var Rt;forEach(range$1(Et,kt),function(Dt){Rt=xt[Dt],nt.node(Rt).dummy&&forEach(nt.predecessors(Rt),function(Bt){var Ft=nt.node(Bt);Ft.dummy&&(Ft.order<Lt||Ft.order>Pt)&&addConflict(it,Bt,Rt)})})}function bt(xt,Et){var kt=-1,Lt,Pt=0;return forEach(Et,function(Rt,Dt){if(nt.node(Rt).dummy==="border"){var Bt=nt.predecessors(Rt);Bt.length&&(Lt=nt.node(Bt[0]).order,st(Et,Pt,Dt,kt,Lt),Pt=Dt,kt=Lt)}st(Et,Pt,Et.length,Lt,xt.length)}),Et}return reduce(rt,bt),it}function findOtherInnerSegmentNode(nt,rt){if(nt.node(rt).dummy)return find$1(nt.predecessors(rt),function(it){return nt.node(it).dummy})}function addConflict(nt,rt,it){if(rt>it){var st=rt;rt=it,it=st}var bt=nt[rt];bt||(nt[rt]=bt={}),bt[it]=!0}function hasConflict(nt,rt,it){if(rt>it){var st=rt;rt=it,it=st}return has(nt[rt],it)}function verticalAlignment(nt,rt,it,st){var bt={},xt={},Et={};return forEach(rt,function(kt){forEach(kt,function(Lt,Pt){bt[Lt]=Lt,xt[Lt]=Lt,Et[Lt]=Pt})}),forEach(rt,function(kt){var Lt=-1;forEach(kt,function(Pt){var Rt=st(Pt);if(Rt.length){Rt=sortBy$1(Rt,function(Zt){return Et[Zt]});for(var Dt=(Rt.length-1)/2,Bt=Math.floor(Dt),Ft=Math.ceil(Dt);Bt<=Ft;++Bt){var Yt=Rt[Bt];xt[Pt]===Pt&&Lt<Et[Yt]&&!hasConflict(it,Pt,Yt)&&(xt[Yt]=Pt,xt[Pt]=bt[Pt]=bt[Yt],Lt=Et[Yt])}}})}),{root:bt,align:xt}}function horizontalCompaction(nt,rt,it,st,bt){var xt={},Et=buildBlockGraph(nt,rt,it,bt),kt=bt?"borderLeft":"borderRight";function Lt(Dt,Bt){for(var Ft=Et.nodes(),Yt=Ft.pop(),Zt={};Yt;)Zt[Yt]?Dt(Yt):(Zt[Yt]=!0,Ft.push(Yt),Ft=Ft.concat(Bt(Yt))),Yt=Ft.pop()}function Pt(Dt){xt[Dt]=Et.inEdges(Dt).reduce(function(Bt,Ft){return Math.max(Bt,xt[Ft.v]+Et.edge(Ft))},0)}function Rt(Dt){var Bt=Et.outEdges(Dt).reduce(function(Yt,Zt){return Math.min(Yt,xt[Zt.w]-Et.edge(Zt))},Number.POSITIVE_INFINITY),Ft=nt.node(Dt);Bt!==Number.POSITIVE_INFINITY&&Ft.borderType!==kt&&(xt[Dt]=Math.max(xt[Dt],Bt))}return Lt(Pt,Et.predecessors.bind(Et)),Lt(Rt,Et.successors.bind(Et)),forEach(st,function(Dt){xt[Dt]=xt[it[Dt]]}),xt}function buildBlockGraph(nt,rt,it,st){var bt=new Graph,xt=nt.graph(),Et=sep(xt.nodesep,xt.edgesep,st);return forEach(rt,function(kt){var Lt;forEach(kt,function(Pt){var Rt=it[Pt];if(bt.setNode(Rt),Lt){var Dt=it[Lt],Bt=bt.edge(Dt,Rt);bt.setEdge(Dt,Rt,Math.max(Et(nt,Pt,Lt),Bt||0))}Lt=Pt})}),bt}function findSmallestWidthAlignment(nt,rt){return minBy(values(rt),function(it){var st=Number.NEGATIVE_INFINITY,bt=Number.POSITIVE_INFINITY;return forIn(it,function(xt,Et){var kt=width$1(nt,Et)/2;st=Math.max(xt+kt,st),bt=Math.min(xt-kt,bt)}),st-bt})}function alignCoordinates(nt,rt){var it=values(rt),st=min(it),bt=max(it);forEach(["u","d"],function(xt){forEach(["l","r"],function(Et){var kt=xt+Et,Lt=nt[kt],Pt;if(Lt!==rt){var Rt=values(Lt);Pt=Et==="l"?st-min(Rt):bt-max(Rt),Pt&&(nt[kt]=mapValues(Lt,function(Dt){return Dt+Pt}))}})})}function balance(nt,rt){return mapValues(nt.ul,function(it,st){if(rt)return nt[rt.toLowerCase()][st];var bt=sortBy$1(map$1(nt,st));return(bt[1]+bt[2])/2})}function positionX(nt){var rt=buildLayerMatrix(nt),it=merge$3(findType1Conflicts(nt,rt),findType2Conflicts(nt,rt)),st={},bt;forEach(["u","d"],function(Et){bt=Et==="u"?rt:values(rt).reverse(),forEach(["l","r"],function(kt){kt==="r"&&(bt=map$1(bt,function(Dt){return values(Dt).reverse()}));var Lt=(Et==="u"?nt.predecessors:nt.successors).bind(nt),Pt=verticalAlignment(nt,bt,it,Lt),Rt=horizontalCompaction(nt,bt,Pt.root,Pt.align,kt==="r");kt==="r"&&(Rt=mapValues(Rt,function(Dt){return-Dt})),st[Et+kt]=Rt})});var xt=findSmallestWidthAlignment(nt,st);return alignCoordinates(st,xt),balance(st,nt.graph().align)}function sep(nt,rt,it){return function(st,bt,xt){var Et=st.node(bt),kt=st.node(xt),Lt=0,Pt;if(Lt+=Et.width/2,has(Et,"labelpos"))switch(Et.labelpos.toLowerCase()){case"l":Pt=-Et.width/2;break;case"r":Pt=Et.width/2;break}if(Pt&&(Lt+=it?Pt:-Pt),Pt=0,Lt+=(Et.dummy?rt:nt)/2,Lt+=(kt.dummy?rt:nt)/2,Lt+=kt.width/2,has(kt,"labelpos"))switch(kt.labelpos.toLowerCase()){case"l":Pt=kt.width/2;break;case"r":Pt=-kt.width/2;break}return Pt&&(Lt+=it?Pt:-Pt),Pt=0,Lt}}function width$1(nt,rt){return nt.node(rt).width}function position(nt){nt=asNonCompoundGraph(nt),positionY(nt),forEach(positionX(nt),function(rt,it){nt.node(it).x=rt})}function positionY(nt){var rt=buildLayerMatrix(nt),it=nt.graph().ranksep,st=0;forEach(rt,function(bt){var xt=max(map$1(bt,function(Et){return nt.node(Et).height}));forEach(bt,function(Et){nt.node(Et).y=st+xt/2}),st+=xt+it})}function layout(nt,rt){var it=rt&&rt.debugTiming?time:notime;it("layout",function(){var st=it("  buildLayoutGraph",function(){return buildLayoutGraph(nt)});it("  runLayout",function(){runLayout(st,it)}),it("  updateInputGraph",function(){updateInputGraph(nt,st)})})}function runLayout(nt,rt){rt("    makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels(nt)}),rt("    removeSelfEdges",function(){removeSelfEdges(nt)}),rt("    acyclic",function(){run$2(nt)}),rt("    nestingGraph.run",function(){run(nt)}),rt("    rank",function(){rank(asNonCompoundGraph(nt))}),rt("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies(nt)}),rt("    removeEmptyRanks",function(){removeEmptyRanks(nt)}),rt("    nestingGraph.cleanup",function(){cleanup(nt)}),rt("    normalizeRanks",function(){normalizeRanks(nt)}),rt("    assignRankMinMax",function(){assignRankMinMax(nt)}),rt("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies(nt)}),rt("    normalize.run",function(){run$1(nt)}),rt("    parentDummyChains",function(){parentDummyChains(nt)}),rt("    addBorderSegments",function(){addBorderSegments(nt)}),rt("    order",function(){order(nt)}),rt("    insertSelfEdges",function(){insertSelfEdges(nt)}),rt("    adjustCoordinateSystem",function(){adjust(nt)}),rt("    position",function(){position(nt)}),rt("    positionSelfEdges",function(){positionSelfEdges(nt)}),rt("    removeBorderNodes",function(){removeBorderNodes(nt)}),rt("    normalize.undo",function(){undo(nt)}),rt("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords(nt)}),rt("    undoCoordinateSystem",function(){undo$1(nt)}),rt("    translateGraph",function(){translateGraph(nt)}),rt("    assignNodeIntersects",function(){assignNodeIntersects(nt)}),rt("    reversePoints",function(){reversePointsForReversedEdges(nt)}),rt("    acyclic.undo",function(){undo$2(nt)})}function updateInputGraph(nt,rt){forEach(nt.nodes(),function(it){var st=nt.node(it),bt=rt.node(it);st&&(st.x=bt.x,st.y=bt.y,rt.children(it).length&&(st.width=bt.width,st.height=bt.height))}),forEach(nt.edges(),function(it){var st=nt.edge(it),bt=rt.edge(it);st.points=bt.points,has(bt,"x")&&(st.x=bt.x,st.y=bt.y)}),nt.graph().width=rt.graph().width,nt.graph().height=rt.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph(nt){var rt=new Graph({multigraph:!0,compound:!0}),it=canonicalize$1(nt.graph());return rt.setGraph(merge$3({},graphDefaults,selectNumberAttrs(it,graphNumAttrs),pick$1(it,graphAttrs))),forEach(nt.nodes(),function(st){var bt=canonicalize$1(nt.node(st));rt.setNode(st,defaults$1(selectNumberAttrs(bt,nodeNumAttrs),nodeDefaults)),rt.setParent(st,nt.parent(st))}),forEach(nt.edges(),function(st){var bt=canonicalize$1(nt.edge(st));rt.setEdge(st,merge$3({},edgeDefaults,selectNumberAttrs(bt,edgeNumAttrs),pick$1(bt,edgeAttrs)))}),rt}function makeSpaceForEdgeLabels(nt){var rt=nt.graph();rt.ranksep/=2,forEach(nt.edges(),function(it){var st=nt.edge(it);st.minlen*=2,st.labelpos.toLowerCase()!=="c"&&(rt.rankdir==="TB"||rt.rankdir==="BT"?st.width+=st.labeloffset:st.height+=st.labeloffset)})}function injectEdgeLabelProxies(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.width&&it.height){var st=nt.node(rt.v),bt=nt.node(rt.w),xt={rank:(bt.rank-st.rank)/2+st.rank,e:rt};addDummyNode(nt,"edge-proxy",xt,"_ep")}})}function assignRankMinMax(nt){var rt=0;forEach(nt.nodes(),function(it){var st=nt.node(it);st.borderTop&&(st.minRank=nt.node(st.borderTop).rank,st.maxRank=nt.node(st.borderBottom).rank,rt=max(rt,st.maxRank))}),nt.graph().maxRank=rt}function removeEdgeLabelProxies(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);it.dummy==="edge-proxy"&&(nt.edge(it.e).labelRank=it.rank,nt.removeNode(rt))})}function translateGraph(nt){var rt=Number.POSITIVE_INFINITY,it=0,st=Number.POSITIVE_INFINITY,bt=0,xt=nt.graph(),Et=xt.marginx||0,kt=xt.marginy||0;function Lt(Pt){var Rt=Pt.x,Dt=Pt.y,Bt=Pt.width,Ft=Pt.height;rt=Math.min(rt,Rt-Bt/2),it=Math.max(it,Rt+Bt/2),st=Math.min(st,Dt-Ft/2),bt=Math.max(bt,Dt+Ft/2)}forEach(nt.nodes(),function(Pt){Lt(nt.node(Pt))}),forEach(nt.edges(),function(Pt){var Rt=nt.edge(Pt);has(Rt,"x")&&Lt(Rt)}),rt-=Et,st-=kt,forEach(nt.nodes(),function(Pt){var Rt=nt.node(Pt);Rt.x-=rt,Rt.y-=st}),forEach(nt.edges(),function(Pt){var Rt=nt.edge(Pt);forEach(Rt.points,function(Dt){Dt.x-=rt,Dt.y-=st}),has(Rt,"x")&&(Rt.x-=rt),has(Rt,"y")&&(Rt.y-=st)}),xt.width=it-rt+Et,xt.height=bt-st+kt}function assignNodeIntersects(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt),st=nt.node(rt.v),bt=nt.node(rt.w),xt,Et;it.points?(xt=it.points[0],Et=it.points[it.points.length-1]):(it.points=[],xt=bt,Et=st),it.points.unshift(intersectRect$3(st,xt)),it.points.push(intersectRect$3(bt,Et))})}function fixupEdgeLabelCoords(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(has(it,"x"))switch((it.labelpos==="l"||it.labelpos==="r")&&(it.width-=it.labeloffset),it.labelpos){case"l":it.x-=it.width/2+it.labeloffset;break;case"r":it.x+=it.width/2+it.labeloffset;break}})}function reversePointsForReversedEdges(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);it.reversed&&it.points.reverse()})}function removeBorderNodes(nt){forEach(nt.nodes(),function(rt){if(nt.children(rt).length){var it=nt.node(rt),st=nt.node(it.borderTop),bt=nt.node(it.borderBottom),xt=nt.node(last(it.borderLeft)),Et=nt.node(last(it.borderRight));it.width=Math.abs(Et.x-xt.x),it.height=Math.abs(bt.y-st.y),it.x=xt.x+it.width/2,it.y=st.y+it.height/2}}),forEach(nt.nodes(),function(rt){nt.node(rt).dummy==="border"&&nt.removeNode(rt)})}function removeSelfEdges(nt){forEach(nt.edges(),function(rt){if(rt.v===rt.w){var it=nt.node(rt.v);it.selfEdges||(it.selfEdges=[]),it.selfEdges.push({e:rt,label:nt.edge(rt)}),nt.removeEdge(rt)}})}function insertSelfEdges(nt){var rt=buildLayerMatrix(nt);forEach(rt,function(it){var st=0;forEach(it,function(bt,xt){var Et=nt.node(bt);Et.order=xt+st,forEach(Et.selfEdges,function(kt){addDummyNode(nt,"selfedge",{width:kt.label.width,height:kt.label.height,rank:Et.rank,order:xt+ ++st,e:kt.e,label:kt.label},"_se")}),delete Et.selfEdges})})}function positionSelfEdges(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);if(it.dummy==="selfedge"){var st=nt.node(it.e.v),bt=st.x+st.width/2,xt=st.y,Et=it.x-bt,kt=st.height/2;nt.setEdge(it.e,it.label),nt.removeNode(rt),it.label.points=[{x:bt+2*Et/3,y:xt-kt},{x:bt+5*Et/6,y:xt-kt},{x:bt+Et,y:xt},{x:bt+5*Et/6,y:xt+kt},{x:bt+2*Et/3,y:xt+kt}],it.label.x=it.x,it.label.y=it.y}})}function selectNumberAttrs(nt,rt){return mapValues(pick$1(nt,rt),Number)}function canonicalize$1(nt){var rt={};return forEach(nt,function(it,st){rt[st.toLowerCase()]=it}),rt}function write(nt){var rt={options:{directed:nt.isDirected(),multigraph:nt.isMultigraph(),compound:nt.isCompound()},nodes:writeNodes(nt),edges:writeEdges(nt)};return isUndefined(nt.graph())||(rt.value=clone$1(nt.graph())),rt}function writeNodes(nt){return map$1(nt.nodes(),function(rt){var it=nt.node(rt),st=nt.parent(rt),bt={v:rt};return isUndefined(it)||(bt.value=it),isUndefined(st)||(bt.parent=st),bt})}function writeEdges(nt){return map$1(nt.edges(),function(rt){var it=nt.edge(rt),st={v:rt.v,w:rt.w};return isUndefined(rt.name)||(st.name=rt.name),isUndefined(it)||(st.value=it),st})}const REGEX$1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(nt){return typeof nt=="string"&&REGEX$1.test(nt)}const byteToHex=[];for(let nt=0;nt<256;++nt)byteToHex.push((nt+256).toString(16).slice(1));function unsafeStringify(nt,rt=0){return(byteToHex[nt[rt+0]]+byteToHex[nt[rt+1]]+byteToHex[nt[rt+2]]+byteToHex[nt[rt+3]]+"-"+byteToHex[nt[rt+4]]+byteToHex[nt[rt+5]]+"-"+byteToHex[nt[rt+6]]+byteToHex[nt[rt+7]]+"-"+byteToHex[nt[rt+8]]+byteToHex[nt[rt+9]]+"-"+byteToHex[nt[rt+10]]+byteToHex[nt[rt+11]]+byteToHex[nt[rt+12]]+byteToHex[nt[rt+13]]+byteToHex[nt[rt+14]]+byteToHex[nt[rt+15]]).toLowerCase()}function parse$2(nt){if(!validate(nt))throw TypeError("Invalid UUID");let rt;const it=new Uint8Array(16);return it[0]=(rt=parseInt(nt.slice(0,8),16))>>>24,it[1]=rt>>>16&255,it[2]=rt>>>8&255,it[3]=rt&255,it[4]=(rt=parseInt(nt.slice(9,13),16))>>>8,it[5]=rt&255,it[6]=(rt=parseInt(nt.slice(14,18),16))>>>8,it[7]=rt&255,it[8]=(rt=parseInt(nt.slice(19,23),16))>>>8,it[9]=rt&255,it[10]=(rt=parseInt(nt.slice(24,36),16))/1099511627776&255,it[11]=rt/4294967296&255,it[12]=rt>>>24&255,it[13]=rt>>>16&255,it[14]=rt>>>8&255,it[15]=rt&255,it}function stringToBytes(nt){nt=unescape(encodeURIComponent(nt));const rt=[];for(let it=0;it<nt.length;++it)rt.push(nt.charCodeAt(it));return rt}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(nt,rt,it){function st(bt,xt,Et,kt){var Lt;if(typeof bt=="string"&&(bt=stringToBytes(bt)),typeof xt=="string"&&(xt=parse$2(xt)),((Lt=xt)===null||Lt===void 0?void 0:Lt.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let Pt=new Uint8Array(16+bt.length);if(Pt.set(xt),Pt.set(bt,xt.length),Pt=it(Pt),Pt[6]=Pt[6]&15|rt,Pt[8]=Pt[8]&63|128,Et){kt=kt||0;for(let Rt=0;Rt<16;++Rt)Et[kt+Rt]=Pt[Rt];return Et}return unsafeStringify(Pt)}try{st.name=nt}catch{}return st.DNS=DNS,st.URL=URL$1,st}function f(nt,rt,it,st){switch(nt){case 0:return rt&it^~rt&st;case 1:return rt^it^st;case 2:return rt&it^rt&st^it&st;case 3:return rt^it^st}}function ROTL(nt,rt){return nt<<rt|nt>>>32-rt}function sha1(nt){const rt=[1518500249,1859775393,2400959708,3395469782],it=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof nt=="string"){const Et=unescape(encodeURIComponent(nt));nt=[];for(let kt=0;kt<Et.length;++kt)nt.push(Et.charCodeAt(kt))}else Array.isArray(nt)||(nt=Array.prototype.slice.call(nt));nt.push(128);const st=nt.length/4+2,bt=Math.ceil(st/16),xt=new Array(bt);for(let Et=0;Et<bt;++Et){const kt=new Uint32Array(16);for(let Lt=0;Lt<16;++Lt)kt[Lt]=nt[Et*64+Lt*4]<<24|nt[Et*64+Lt*4+1]<<16|nt[Et*64+Lt*4+2]<<8|nt[Et*64+Lt*4+3];xt[Et]=kt}xt[bt-1][14]=(nt.length-1)*8/Math.pow(2,32),xt[bt-1][14]=Math.floor(xt[bt-1][14]),xt[bt-1][15]=(nt.length-1)*8&4294967295;for(let Et=0;Et<bt;++Et){const kt=new Uint32Array(80);for(let Ft=0;Ft<16;++Ft)kt[Ft]=xt[Et][Ft];for(let Ft=16;Ft<80;++Ft)kt[Ft]=ROTL(kt[Ft-3]^kt[Ft-8]^kt[Ft-14]^kt[Ft-16],1);let Lt=it[0],Pt=it[1],Rt=it[2],Dt=it[3],Bt=it[4];for(let Ft=0;Ft<80;++Ft){const Yt=Math.floor(Ft/20),Zt=ROTL(Lt,5)+f(Yt,Pt,Rt,Dt)+Bt+rt[Yt]+kt[Ft]>>>0;Bt=Dt,Dt=Rt,Rt=ROTL(Pt,30)>>>0,Pt=Lt,Lt=Zt}it[0]=it[0]+Lt>>>0,it[1]=it[1]+Pt>>>0,it[2]=it[2]+Rt>>>0,it[3]=it[3]+Dt>>>0,it[4]=it[4]+Bt>>>0}return[it[0]>>24&255,it[0]>>16&255,it[0]>>8&255,it[0]&255,it[1]>>24&255,it[1]>>16&255,it[1]>>8&255,it[1]&255,it[2]>>24&255,it[2]>>16&255,it[2]>>8&255,it[2]&255,it[3]>>24&255,it[3]>>16&255,it[3]>>8&255,it[3]&255,it[4]>>24&255,it[4]>>16&255,it[4]>>8&255,it[4]&255]}const v5=v35("v5",80,sha1),v5$1=v5;function isSubgraph(nt,rt){return!!nt.children(rt).length}function edgeToId(nt){return escapeId(nt.v)+":"+escapeId(nt.w)+":"+escapeId(nt.name)}var ID_DELIM=/:/g;function escapeId(nt){return nt?String(nt).replace(ID_DELIM,"\\:"):""}function applyStyle$1(nt,rt){rt&&nt.attr("style",rt)}function applyClass(nt,rt,it){rt&&nt.attr("class",rt).attr("class",it+" "+nt.attr("class"))}function applyTransition(nt,rt){var it=rt.graph();if(isPlainObject(it)){var st=it.transition;if(isFunction(st))return st(nt)}return nt}var arrows={normal,vee,undirected};function setArrows(nt){arrows=nt}function normal(nt,rt,it,st){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),xt=bt.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(xt,it[st+"Style"]),it[st+"Class"]&&xt.attr("class",it[st+"Class"])}function vee(nt,rt,it,st){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),xt=bt.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(xt,it[st+"Style"]),it[st+"Class"]&&xt.attr("class",it[st+"Class"])}function undirected(nt,rt,it,st){var bt=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),xt=bt.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(xt,it[st+"Style"]),it[st+"Class"]&&xt.attr("class",it[st+"Class"])}function addHtmlLabel$1(nt,rt){var it=nt.append("foreignObject").attr("width","100000"),st=it.append("xhtml:div");st.attr("xmlns","http://www.w3.org/1999/xhtml");var bt=rt.label;switch(typeof bt){case"function":st.insert(bt);break;case"object":st.insert(function(){return bt});break;default:st.html(bt)}applyStyle$1(st,rt.labelStyle),st.style("display","inline-block"),st.style("white-space","nowrap");var xt=st.node().getBoundingClientRect();return it.attr("width",xt.width).attr("height",xt.height),it}function addSVGLabel(nt,rt){var it=nt;return it.node().appendChild(rt.label),applyStyle$1(it,rt.labelStyle),it}function addTextLabel(nt,rt){for(var it=nt.append("text"),st=processEscapeSequences(rt.label).split(`
`),bt=0;bt<st.length;bt++)it.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(st[bt]);return applyStyle$1(it,rt.labelStyle),it}function processEscapeSequences(nt){for(var rt="",it=!1,st,bt=0;bt<nt.length;++bt)if(st=nt[bt],it){switch(st){case"n":rt+=`
`;break;default:rt+=st}it=!1}else st==="\\"?it=!0:rt+=st;return rt}function addLabel(nt,rt,it){var st=rt.label,bt=nt.append("g");rt.labelType==="svg"?addSVGLabel(bt,rt):typeof st!="string"||rt.labelType==="html"?addHtmlLabel$1(bt,rt):addTextLabel(bt,rt);var xt=bt.node().getBBox(),Et;switch(it){case"top":Et=-rt.height/2;break;case"bottom":Et=rt.height/2-xt.height;break;default:Et=-xt.height/2}return bt.attr("transform","translate("+-xt.width/2+","+Et+")"),bt}var createClusters=function(nt,rt){var it=rt.nodes().filter(function(xt){return isSubgraph(rt,xt)}),st=nt.selectAll("g.cluster").data(it,function(xt){return xt});applyTransition(st.exit(),rt).style("opacity",0).remove();var bt=st.enter().append("g").attr("class","cluster").attr("id",function(xt){var Et=rt.node(xt);return Et.id}).style("opacity",0).each(function(xt){var Et=rt.node(xt),kt=select(this);select(this).append("rect");var Lt=kt.append("g").attr("class","label");addLabel(Lt,Et,Et.clusterLabelPos)});return st=st.merge(bt),st=applyTransition(st,rt).style("opacity",1),st.selectAll("rect").each(function(xt){var Et=rt.node(xt),kt=select(this);applyStyle$1(kt,Et.style)}),st};function setCreateClusters(nt){createClusters=nt}let createEdgeLabels=function(nt,rt){var it=nt.selectAll("g.edgeLabel").data(rt.edges(),function(bt){return edgeToId(bt)}).classed("update",!0);it.exit().remove(),it.enter().append("g").classed("edgeLabel",!0).style("opacity",0),it=nt.selectAll("g.edgeLabel"),it.each(function(bt){var xt=select(this);xt.select(".label").remove();var Et=rt.edge(bt),kt=addLabel(xt,rt.edge(bt),0).classed("label",!0),Lt=kt.node().getBBox();Et.labelId&&kt.attr("id",Et.labelId),has(Et,"width")||(Et.width=Lt.width),has(Et,"height")||(Et.height=Lt.height)});var st;return it.exit?st=it.exit():st=it.selectAll(null),applyTransition(st,rt).style("opacity",0).remove(),it};function setCreateEdgeLabels(nt){createEdgeLabels=nt}function intersectNode$1(nt,rt){return nt.intersect(rt)}var createEdgePaths=function(nt,rt,it){var st=nt.selectAll("g.edgePath").data(rt.edges(),function(Et){return edgeToId(Et)}).classed("update",!0),bt=enter(st,rt);exit(st,rt);var xt=st.merge!==void 0?st.merge(bt):st;return applyTransition(xt,rt).style("opacity",1),xt.each(function(Et){var kt=select(this),Lt=rt.edge(Et);Lt.elem=this,Lt.id&&kt.attr("id",Lt.id),applyClass(kt,Lt.class,(kt.classed("update")?"update ":"")+"edgePath")}),xt.selectAll("path.path").each(function(Et){var kt=rt.edge(Et);kt.arrowheadId=uniqueId("arrowhead");var Lt=select(this).attr("marker-end",function(){return"url("+makeFragmentRef(location.href,kt.arrowheadId)+")"}).style("fill","none");applyTransition(Lt,rt).attr("d",function(Pt){return calcPoints(rt,Pt)}),applyStyle$1(Lt,kt.style)}),xt.selectAll("defs *").remove(),xt.selectAll("defs").each(function(Et){var kt=rt.edge(Et),Lt=it[kt.arrowhead];Lt(select(this),kt.arrowheadId,kt,"arrowhead")}),xt};function setCreateEdgePaths(nt){createEdgePaths=nt}function makeFragmentRef(nt,rt){var it=nt.split("#")[0];return it+"#"+rt}function calcPoints(nt,rt){var it=nt.edge(rt),st=nt.node(rt.v),bt=nt.node(rt.w),xt=it.points.slice(1,it.points.length-1);return xt.unshift(intersectNode$1(st,xt[0])),xt.push(intersectNode$1(bt,xt[xt.length-1])),createLine(it,xt)}function createLine(nt,rt){var it=(line$1||svg$2.line)().x(function(st){return st.x}).y(function(st){return st.y});return(it.curve||it.interpolate)(nt.curve),it(rt)}function getCoords(nt){var rt=nt.getBBox(),it=nt.ownerSVGElement.getScreenCTM().inverse().multiply(nt.getScreenCTM()).translate(rt.width/2,rt.height/2);return{x:it.e,y:it.f}}function enter(nt,rt){var it=nt.enter().append("g").attr("class","edgePath").style("opacity",0);return it.append("path").attr("class","path").attr("d",function(st){var bt=rt.edge(st),xt=rt.node(st.v).elem,Et=range$1(bt.points.length).map(function(){return getCoords(xt)});return createLine(bt,Et)}),it.append("defs"),it}function exit(nt,rt){var it=nt.exit();applyTransition(it,rt).style("opacity",0).remove()}var createNodes=function(nt,rt,it){var st=rt.nodes().filter(function(Et){return!isSubgraph(rt,Et)}),bt=nt.selectAll("g.node").data(st,function(Et){return Et}).classed("update",!0);bt.exit().remove(),bt.enter().append("g").attr("class","node").style("opacity",0),bt=nt.selectAll("g.node"),bt.each(function(Et){var kt=rt.node(Et),Lt=select(this);applyClass(Lt,kt.class,(Lt.classed("update")?"update ":"")+"node"),Lt.select("g.label").remove();var Pt=Lt.append("g").attr("class","label"),Rt=addLabel(Pt,kt),Dt=it[kt.shape],Bt=pick$1(Rt.node().getBBox(),"width","height");kt.elem=this,kt.id&&Lt.attr("id",kt.id),kt.labelId&&Pt.attr("id",kt.labelId),has(kt,"width")&&(Bt.width=kt.width),has(kt,"height")&&(Bt.height=kt.height),Bt.width+=kt.paddingLeft+kt.paddingRight,Bt.height+=kt.paddingTop+kt.paddingBottom,Pt.attr("transform","translate("+(kt.paddingLeft-kt.paddingRight)/2+","+(kt.paddingTop-kt.paddingBottom)/2+")");var Ft=select(this);Ft.select(".label-container").remove();var Yt=Dt(Ft,Bt,kt).classed("label-container",!0);applyStyle$1(Yt,kt.style);var Zt=Yt.node().getBBox();kt.width=Zt.width,kt.height=Zt.height});var xt;return bt.exit?xt=bt.exit():xt=bt.selectAll(null),applyTransition(xt,rt).style("opacity",0).remove(),bt};function setCreateNodes(nt){createNodes=nt}function positionClusters(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(bt){var xt=rt.node(bt);return"translate("+xt.x+","+xt.y+")"}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st),applyTransition(it.selectAll("rect"),rt).attr("width",function(bt){return rt.node(bt).width}).attr("height",function(bt){return rt.node(bt).height}).attr("x",function(bt){var xt=rt.node(bt);return-xt.width/2}).attr("y",function(bt){var xt=rt.node(bt);return-xt.height/2})}function positionEdgeLabels(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(bt){var xt=rt.edge(bt);return has(xt,"x")?"translate("+xt.x+","+xt.y+")":""}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st)}function positionNodes(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(bt){var xt=rt.node(bt);return"translate("+xt.x+","+xt.y+")"}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st)}function intersectEllipse$1(nt,rt,it,st){var bt=nt.x,xt=nt.y,Et=bt-st.x,kt=xt-st.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Et*Et),Pt=Math.abs(rt*it*Et/Lt);st.x<bt&&(Pt=-Pt);var Rt=Math.abs(rt*it*kt/Lt);return st.y<xt&&(Rt=-Rt),{x:bt+Pt,y:xt+Rt}}function intersectCircle$1(nt,rt,it){return intersectEllipse$1(nt,rt,rt,it)}function intersectLine$1(nt,rt,it,st){var bt,xt,Et,kt,Lt,Pt,Rt,Dt,Bt,Ft,Yt,Zt,Wt,Qt,Kt;if(bt=rt.y-nt.y,Et=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Bt=bt*it.x+Et*it.y+Lt,Ft=bt*st.x+Et*st.y+Lt,!(Bt!==0&&Ft!==0&&sameSign$1(Bt,Ft))&&(xt=st.y-it.y,kt=it.x-st.x,Pt=st.x*it.y-it.x*st.y,Rt=xt*nt.x+kt*nt.y+Pt,Dt=xt*rt.x+kt*rt.y+Pt,!(Rt!==0&&Dt!==0&&sameSign$1(Rt,Dt))&&(Yt=bt*kt-xt*Et,Yt!==0)))return Zt=Math.abs(Yt/2),Wt=Et*Pt-kt*Lt,Qt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,Wt=xt*Lt-bt*Pt,Kt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,{x:Qt,y:Kt}}function sameSign$1(nt,rt){return nt*rt>0}function intersectPolygon$1(nt,rt,it){var st=nt.x,bt=nt.y,xt=[],Et=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;rt.forEach(function(Yt){Et=Math.min(Et,Yt.x),kt=Math.min(kt,Yt.y)});for(var Lt=st-nt.width/2-Et,Pt=bt-nt.height/2-kt,Rt=0;Rt<rt.length;Rt++){var Dt=rt[Rt],Bt=rt[Rt<rt.length-1?Rt+1:0],Ft=intersectLine$1(nt,it,{x:Lt+Dt.x,y:Pt+Dt.y},{x:Lt+Bt.x,y:Pt+Bt.y});Ft&&xt.push(Ft)}return xt.length?(xt.length>1&&xt.sort(function(Yt,Zt){var Wt=Yt.x-it.x,Qt=Yt.y-it.y,Kt=Math.sqrt(Wt*Wt+Qt*Qt),on=Zt.x-it.x,nn=Zt.y-it.y,mn=Math.sqrt(on*on+nn*nn);return Kt<mn?-1:Kt===mn?0:1}),xt[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",nt),nt)}function intersectRect$2(nt,rt){var it=nt.x,st=nt.y,bt=rt.x-it,xt=rt.y-st,Et=nt.width/2,kt=nt.height/2,Lt,Pt;return Math.abs(xt)*Et>Math.abs(bt)*kt?(xt<0&&(kt=-kt),Lt=xt===0?0:kt*bt/xt,Pt=kt):(bt<0&&(Et=-Et),Lt=Et,Pt=bt===0?0:Et*xt/bt),{x:it+Lt,y:st+Pt}}var shapes$2={rect:rect$2,ellipse,circle:circle$2,diamond};function setShapes(nt){shapes$2=nt}function rect$2(nt,rt,it){var st=nt.insert("rect",":first-child").attr("rx",it.rx).attr("ry",it.ry).attr("x",-rt.width/2).attr("y",-rt.height/2).attr("width",rt.width).attr("height",rt.height);return it.intersect=function(bt){return intersectRect$2(it,bt)},st}function ellipse(nt,rt,it){var st=rt.width/2,bt=rt.height/2,xt=nt.insert("ellipse",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("rx",st).attr("ry",bt);return it.intersect=function(Et){return intersectEllipse$1(it,st,bt,Et)},xt}function circle$2(nt,rt,it){var st=Math.max(rt.width,rt.height)/2,bt=nt.insert("circle",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("r",st);return it.intersect=function(xt){return intersectCircle$1(it,st,xt)},bt}function diamond(nt,rt,it){var st=rt.width*Math.SQRT2/2,bt=rt.height*Math.SQRT2/2,xt=[{x:0,y:-bt},{x:-st,y:0},{x:0,y:bt},{x:st,y:0}],Et=nt.insert("polygon",":first-child").attr("points",xt.map(function(kt){return kt.x+","+kt.y}).join(" "));return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function render$2(){var nt=function(rt,it){preProcessGraph(it);var st=createOrSelectGroup(rt,"output"),bt=createOrSelectGroup(st,"clusters"),xt=createOrSelectGroup(st,"edgePaths"),Et=createEdgeLabels(createOrSelectGroup(st,"edgeLabels"),it),kt=createNodes(createOrSelectGroup(st,"nodes"),it,shapes$2);layout(it),positionNodes(kt,it),positionEdgeLabels(Et,it),createEdgePaths(xt,it,arrows);var Lt=createClusters(bt,it);positionClusters(Lt,it),postProcessGraph(it)};return nt.createNodes=function(rt){return arguments.length?(setCreateNodes(rt),nt):createNodes},nt.createClusters=function(rt){return arguments.length?(setCreateClusters(rt),nt):createClusters},nt.createEdgeLabels=function(rt){return arguments.length?(setCreateEdgeLabels(rt),nt):createEdgeLabels},nt.createEdgePaths=function(rt){return arguments.length?(setCreateEdgePaths(rt),nt):createEdgePaths},nt.shapes=function(rt){return arguments.length?(setShapes(rt),nt):shapes$2},nt.arrows=function(rt){return arguments.length?(setArrows(rt),nt):arrows},nt}var NODE_DEFAULT_ATTRS={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},EDGE_DEFAULT_ATTRS={arrowhead:"normal",curve:curveLinear};function preProcessGraph(nt){nt.nodes().forEach(function(rt){var it=nt.node(rt);!has(it,"label")&&!nt.children(rt).length&&(it.label=rt),has(it,"paddingX")&&defaults$1(it,{paddingLeft:it.paddingX,paddingRight:it.paddingX}),has(it,"paddingY")&&defaults$1(it,{paddingTop:it.paddingY,paddingBottom:it.paddingY}),has(it,"padding")&&defaults$1(it,{paddingLeft:it.padding,paddingRight:it.padding,paddingTop:it.padding,paddingBottom:it.padding}),defaults$1(it,NODE_DEFAULT_ATTRS),forEach(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(st){it[st]=Number(it[st])}),has(it,"width")&&(it._prevWidth=it.width),has(it,"height")&&(it._prevHeight=it.height)}),nt.edges().forEach(function(rt){var it=nt.edge(rt);has(it,"label")||(it.label=""),defaults$1(it,EDGE_DEFAULT_ATTRS)})}function postProcessGraph(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);has(it,"_prevWidth")?it.width=it._prevWidth:delete it.width,has(it,"_prevHeight")?it.height=it._prevHeight:delete it.height,delete it._prevWidth,delete it._prevHeight})}function createOrSelectGroup(nt,rt){var it=nt.select("g."+rt);return it.empty()&&(it=nt.append("g").attr("class",rt)),it}var isoWeek={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){var it="day";return function(st,bt,xt){var Et=function(Pt){return Pt.add(4-Pt.isoWeekday(),it)},kt=bt.prototype;kt.isoWeekYear=function(){return Et(this).year()},kt.isoWeek=function(Pt){if(!this.$utils().u(Pt))return this.add(7*(Pt-this.isoWeek()),it);var Rt,Dt,Bt,Ft,Yt=Et(this),Zt=(Rt=this.isoWeekYear(),Dt=this.$u,Bt=(Dt?xt.utc:xt)().year(Rt).startOf("year"),Ft=4-Bt.isoWeekday(),Bt.isoWeekday()>4&&(Ft+=7),Bt.add(Ft,it));return Yt.diff(Zt,"week")+1},kt.isoWeekday=function(Pt){return this.$utils().u(Pt)?this.day()||7:this.day(this.day()%7?Pt:Pt-7)};var Lt=kt.startOf;kt.startOf=function(Pt,Rt){var Dt=this.$utils(),Bt=!!Dt.u(Rt)||Rt;return Dt.p(Pt)==="isoweek"?Bt?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):Lt.bind(this)(Pt,Rt)}}})})(isoWeek);const dayjsIsoWeek=isoWeek.exports;var customParseFormat={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){var it={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},st=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,bt=/\d\d/,xt=/\d\d?/,Et=/\d*[^-_:/,()\s\d]+/,kt={},Lt=function(Zt){return(Zt=+Zt)+(Zt>68?1900:2e3)},Pt=function(Zt){return function(Wt){this[Zt]=+Wt}},Rt=[/[+-]\d\d:?(\d\d)?|Z/,function(Zt){(this.zone||(this.zone={})).offset=function(Wt){if(!Wt||Wt==="Z")return 0;var Qt=Wt.match(/([+-]|\d\d)/g),Kt=60*Qt[1]+(+Qt[2]||0);return Kt===0?0:Qt[0]==="+"?-Kt:Kt}(Zt)}],Dt=function(Zt){var Wt=kt[Zt];return Wt&&(Wt.indexOf?Wt:Wt.s.concat(Wt.f))},Bt=function(Zt,Wt){var Qt,Kt=kt.meridiem;if(Kt){for(var on=1;on<=24;on+=1)if(Zt.indexOf(Kt(on,0,Wt))>-1){Qt=on>12;break}}else Qt=Zt===(Wt?"pm":"PM");return Qt},Ft={A:[Et,function(Zt){this.afternoon=Bt(Zt,!1)}],a:[Et,function(Zt){this.afternoon=Bt(Zt,!0)}],S:[/\d/,function(Zt){this.milliseconds=100*+Zt}],SS:[bt,function(Zt){this.milliseconds=10*+Zt}],SSS:[/\d{3}/,function(Zt){this.milliseconds=+Zt}],s:[xt,Pt("seconds")],ss:[xt,Pt("seconds")],m:[xt,Pt("minutes")],mm:[xt,Pt("minutes")],H:[xt,Pt("hours")],h:[xt,Pt("hours")],HH:[xt,Pt("hours")],hh:[xt,Pt("hours")],D:[xt,Pt("day")],DD:[bt,Pt("day")],Do:[Et,function(Zt){var Wt=kt.ordinal,Qt=Zt.match(/\d+/);if(this.day=Qt[0],Wt)for(var Kt=1;Kt<=31;Kt+=1)Wt(Kt).replace(/\[|\]/g,"")===Zt&&(this.day=Kt)}],M:[xt,Pt("month")],MM:[bt,Pt("month")],MMM:[Et,function(Zt){var Wt=Dt("months"),Qt=(Dt("monthsShort")||Wt.map(function(Kt){return Kt.slice(0,3)})).indexOf(Zt)+1;if(Qt<1)throw new Error;this.month=Qt%12||Qt}],MMMM:[Et,function(Zt){var Wt=Dt("months").indexOf(Zt)+1;if(Wt<1)throw new Error;this.month=Wt%12||Wt}],Y:[/[+-]?\d+/,Pt("year")],YY:[bt,function(Zt){this.year=Lt(Zt)}],YYYY:[/\d{4}/,Pt("year")],Z:Rt,ZZ:Rt};function Yt(Zt){var Wt,Qt;Wt=Zt,Qt=kt&&kt.formats;for(var Kt=(Zt=Wt.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(kn,Mn,$n){var cn=$n&&$n.toUpperCase();return Mn||Qt[$n]||it[$n]||Qt[cn].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Sn,an,jn){return an||jn.slice(1)})})).match(st),on=Kt.length,nn=0;nn<on;nn+=1){var mn=Kt[nn],gn=Ft[mn],Tn=gn&&gn[0],An=gn&&gn[1];Kt[nn]=An?{regex:Tn,parser:An}:mn.replace(/^\[|\]$/g,"")}return function(kn){for(var Mn={},$n=0,cn=0;$n<on;$n+=1){var Sn=Kt[$n];if(typeof Sn=="string")cn+=Sn.length;else{var an=Sn.regex,jn=Sn.parser,hn=kn.slice(cn),zn=an.exec(hn)[0];jn.call(Mn,zn),kn=kn.replace(zn,"")}}return function(ir){var tr=ir.afternoon;if(tr!==void 0){var nr=ir.hours;tr?nr<12&&(ir.hours+=12):nr===12&&(ir.hours=0),delete ir.afternoon}}(Mn),Mn}}return function(Zt,Wt,Qt){Qt.p.customParseFormat=!0,Zt&&Zt.parseTwoDigitYear&&(Lt=Zt.parseTwoDigitYear);var Kt=Wt.prototype,on=Kt.parse;Kt.parse=function(nn){var mn=nn.date,gn=nn.utc,Tn=nn.args;this.$u=gn;var An=Tn[1];if(typeof An=="string"){var kn=Tn[2]===!0,Mn=Tn[3]===!0,$n=kn||Mn,cn=Tn[2];Mn&&(cn=Tn[2]),kt=this.$locale(),!kn&&cn&&(kt=Qt.Ls[cn]),this.$d=function(hn,zn,ir){try{if(["x","X"].indexOf(zn)>-1)return new Date((zn==="X"?1e3:1)*hn);var tr=Yt(zn)(hn),nr=tr.year,dr=tr.month,or=tr.day,ur=tr.hours,Cr=tr.minutes,Sr=tr.seconds,rr=tr.milliseconds,Fr=tr.zone,mr=new Date,_r=or||(nr||dr?1:mr.getDate()),yr=nr||mr.getFullYear(),pr=0;nr&&!dr||(pr=dr>0?dr-1:mr.getMonth());var Cn=ur||0,rn=Cr||0,dn=Sr||0,fn=rr||0;return Fr?new Date(Date.UTC(yr,pr,_r,Cn,rn,dn,fn+60*Fr.offset*1e3)):ir?new Date(Date.UTC(yr,pr,_r,Cn,rn,dn,fn)):new Date(yr,pr,_r,Cn,rn,dn,fn)}catch{return new Date("")}}(mn,An,gn),this.init(),cn&&cn!==!0&&(this.$L=this.locale(cn).$L),$n&&mn!=this.format(An)&&(this.$d=new Date("")),kt={}}else if(An instanceof Array)for(var Sn=An.length,an=1;an<=Sn;an+=1){Tn[1]=An[an-1];var jn=Qt.apply(this,Tn);if(jn.isValid()){this.$d=jn.$d,this.$L=jn.$L,this.init();break}an===Sn&&(this.$d=new Date(""))}else on.call(this,nn)}}})})(customParseFormat);const dayjsCustomParseFormat=customParseFormat.exports;var advancedFormat={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){return function(it,st){var bt=st.prototype,xt=bt.format;bt.format=function(Et){var kt=this,Lt=this.$locale();if(!this.isValid())return xt.bind(this)(Et);var Pt=this.$utils(),Rt=(Et||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(Dt){switch(Dt){case"Q":return Math.ceil((kt.$M+1)/3);case"Do":return Lt.ordinal(kt.$D);case"gggg":return kt.weekYear();case"GGGG":return kt.isoWeekYear();case"wo":return Lt.ordinal(kt.week(),"W");case"w":case"ww":return Pt.s(kt.week(),Dt==="w"?1:2,"0");case"W":case"WW":return Pt.s(kt.isoWeek(),Dt==="W"?1:2,"0");case"k":case"kk":return Pt.s(String(kt.$H===0?24:kt.$H),Dt==="k"?1:2,"0");case"X":return Math.floor(kt.$d.getTime()/1e3);case"x":return kt.$d.getTime();case"z":return"["+kt.offsetName()+"]";case"zzz":return"["+kt.offsetName("long")+"]";default:return Dt}});return xt.bind(this)(Rt)}}})})(advancedFormat);const dayjsAdvancedFormat=advancedFormat.exports,LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log$1={trace:(...nt)=>{},debug:(...nt)=>{},info:(...nt)=>{},warn:(...nt)=>{},error:(...nt)=>{},fatal:(...nt)=>{}},setLogLevel$1=function(nt="fatal"){let rt=LEVELS.fatal;typeof nt=="string"?(nt=nt.toLowerCase(),nt in LEVELS&&(rt=LEVELS[nt])):typeof nt=="number"&&(rt=nt),log$1.trace=()=>{},log$1.debug=()=>{},log$1.info=()=>{},log$1.warn=()=>{},log$1.error=()=>{},log$1.fatal=()=>{},rt<=LEVELS.fatal&&(log$1.fatal=console.error?console.error.bind(console,format("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",format("FATAL"))),rt<=LEVELS.error&&(log$1.error=console.error?console.error.bind(console,format("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",format("ERROR"))),rt<=LEVELS.warn&&(log$1.warn=console.warn?console.warn.bind(console,format("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",format("WARN"))),rt<=LEVELS.info&&(log$1.info=console.info?console.info.bind(console,format("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",format("INFO"))),rt<=LEVELS.debug&&(log$1.debug=console.debug?console.debug.bind(console,format("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("DEBUG"))),rt<=LEVELS.trace&&(log$1.trace=console.debug?console.debug.bind(console,format("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("TRACE")))},format=nt=>`%c${dayjs().format("ss.SSS")} : ${nt} : `,getRows=nt=>nt?breakToPlaceholder(nt).replace(/\\n/g,"#br#").split("#br#"):[""],removeScript=nt=>purify.sanitize(nt),sanitizeMore=(nt,rt)=>{var it;if(((it=rt.flowchart)==null?void 0:it.htmlLabels)!==!1){const st=rt.securityLevel;st==="antiscript"||st==="strict"?nt=removeScript(nt):st!=="loose"&&(nt=breakToPlaceholder(nt),nt=nt.replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=nt.replace(/=/g,"&equals;"),nt=placeholderToBreak(nt))}return nt},sanitizeText$5=(nt,rt)=>nt&&(rt.dompurifyConfig?nt=purify.sanitize(sanitizeMore(nt,rt),rt.dompurifyConfig).toString():nt=purify.sanitize(sanitizeMore(nt,rt),{FORBID_TAGS:["style"]}).toString(),nt),sanitizeTextOrArray=(nt,rt)=>typeof nt=="string"?sanitizeText$5(nt,rt):nt.flat().map(it=>sanitizeText$5(it,rt)),lineBreakRegex=/<br\s*\/?>/gi,hasBreaks=nt=>lineBreakRegex.test(nt),splitBreaks=nt=>nt.split(lineBreakRegex),placeholderToBreak=nt=>nt.replace(/#br#/g,"<br/>"),breakToPlaceholder=nt=>nt.replace(lineBreakRegex,"#br#"),getUrl=nt=>{let rt="";return nt&&(rt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,rt=rt.replaceAll(/\(/g,"\\("),rt=rt.replaceAll(/\)/g,"\\)")),rt},evaluate=nt=>!(nt===!1||["false","null","0"].includes(String(nt).trim().toLowerCase())),parseGenericTypes=function(nt){let rt=nt;if(nt.split("~").length-1>=2){let it=rt;do rt=it,it=rt.replace(/~([^\s,:;]+)~/,"<$1>");while(it!=rt);return parseGenericTypes(it)}else return rt},common$1={getRows,sanitizeText:sanitizeText$5,sanitizeTextOrArray,hasBreaks,splitBreaks,lineBreakRegex,removeScript,getUrl,evaluate},mkBorder=(nt,rt)=>rt?adjust$2(nt,{s:-40,l:10}):adjust$2(nt,{s:-40,l:-10}),oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2";let Theme$4=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust$2(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust$2(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert$1(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert$1(this.tertiaryColor),this.lineColor=this.lineColor||invert$1(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken$1(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert$1(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten$1(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this.darkMode)for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScale"+it]=darken$1(this["cScale"+it],75);else for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScale"+it]=darken$1(this["cScale"+it],25);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleInv"+it]=this["cScaleInv"+it]||invert$1(this["cScale"+it]);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this.darkMode?this["cScalePeer"+it]=this["cScalePeer"+it]||lighten$1(this["cScale"+it],10):this["cScalePeer"+it]=this["cScalePeer"+it]||darken$1(this["cScale"+it],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleLabel"+it]=this["cScaleLabel"+it]||this.scaleLabelColor;const rt=this.darkMode?-4:-1;for(let it=0;it<5;it++)this["surface"+it]=this["surface"+it]||adjust$2(this.mainBkg,{h:180,s:-15,l:rt*(5+it*3)}),this["surfacePeer"+it]=this["surfacePeer"+it]||adjust$2(this.mainBkg,{h:180,s:-15,l:rt*(8+it*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust$2(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust$2(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust$2(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust$2(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust$2(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$4=nt=>{const rt=new Theme$4;return rt.calculate(nt),rt};let Theme$3=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten$1(this.primaryColor,16),this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=invert$1(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten$1(invert$1("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=rgba$1(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken$1("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=rgba$1(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba$1(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=lighten$1(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten$1(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten$1(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10);for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(-10+rt*4)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(-7+rt*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten$1(this.secondaryColor,20),this.git1=lighten$1(this.pie2||this.secondaryColor,20),this.git2=lighten$1(this.pie3||this.tertiaryColor,20),this.git3=lighten$1(this.pie4||adjust$2(this.primaryColor,{h:-30}),20),this.git4=lighten$1(this.pie5||adjust$2(this.primaryColor,{h:-60}),20),this.git5=lighten$1(this.pie6||adjust$2(this.primaryColor,{h:-90}),10),this.git6=lighten$1(this.pie7||adjust$2(this.primaryColor,{h:60}),10),this.git7=lighten$1(this.pie8||adjust$2(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten$1(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten$1(this.background,2)}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$3=nt=>{const rt=new Theme$3;return rt.calculate(nt),rt};let Theme$2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust$2(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=rgba$1(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{h:30,l:-(5+rt*5)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{h:30,l:-(7+rt*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||invert$1(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert$1(this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust$2(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||darken$1(invert$1(this.git0),25),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert$1(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert$1(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$2=nt=>{const rt=new Theme$2;return rt.calculate(nt),rt};let Theme$1=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten$1("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.primaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(5+rt*5)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(8+rt*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=darken$1(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$1=nt=>{const rt=new Theme$1;return rt.calculate(nt),rt};class Theme5{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten$1(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=lighten$1(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this.darkMode?this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10):this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{l:-(5+rt*5)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{l:-(8+rt*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=lighten$1(this.contrast,30),this.sectionBkgColor2=lighten$1(this.contrast,30),this.taskBorderColor=darken$1(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten$1(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken$1(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken$1(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust$2(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust$2(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust$2(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust$2(this.primaryColor,{h:60}),this.git7=this.pie8||adjust$2(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}}const getThemeVariables=nt=>{const rt=new Theme5;return rt.calculate(nt),rt},theme={base:{getThemeVariables:getThemeVariables$4},dark:{getThemeVariables:getThemeVariables$3},default:{getThemeVariables:getThemeVariables$2},forest:{getThemeVariables:getThemeVariables$1},neutral:{getThemeVariables}},config$1={theme:"default",themeVariables:theme.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},timeline:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};config$1.class&&(config$1.class.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);config$1.gitGraph&&(config$1.gitGraph.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);const keyify=(nt,rt="")=>Object.keys(nt).reduce((it,st)=>Array.isArray(nt[st])?it:typeof nt[st]=="object"&&nt[st]!==null?[...it,rt+st,...keyify(nt[st],"")]:[...it,rt+st],[]),configKeys=keyify(config$1,""),config$2=config$1;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing(nt){return typeof nt>"u"||nt===null}function isObject(nt){return typeof nt=="object"&&nt!==null}function toArray(nt){return Array.isArray(nt)?nt:isNothing(nt)?[]:[nt]}function extend(nt,rt){var it,st,bt,xt;if(rt)for(xt=Object.keys(rt),it=0,st=xt.length;it<st;it+=1)bt=xt[it],nt[bt]=rt[bt];return nt}function repeat(nt,rt){var it="",st;for(st=0;st<rt;st+=1)it+=nt;return it}function isNegativeZero(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1=isNothing,isObject_1=isObject,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(nt,rt){var it="",st=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),st+" "+it):st}function YAMLException$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=function nt(rt){return this.name+": "+formatError(this,rt)};var exception=YAMLException$1;function getLine(nt,rt,it,st,bt){var xt="",Et="",kt=Math.floor(bt/2)-1;return st-rt>kt&&(xt=" ... ",rt=st-kt+xt.length),it-st>kt&&(Et=" ...",it=st+kt-Et.length),{str:xt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Et,pos:st-rt+xt.length}}function padStart(nt,rt){return common.repeat(" ",rt-nt.length)+nt}function makeSnippet(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,st=[0],bt=[],xt,Et=-1;xt=it.exec(nt.buffer);)bt.push(xt.index),st.push(xt.index+xt[0].length),nt.position<=xt.index&&Et<0&&(Et=st.length-2);Et<0&&(Et=st.length-1);var kt="",Lt,Pt,Rt=Math.min(nt.line+rt.linesAfter,bt.length).toString().length,Dt=rt.maxLength-(rt.indent+Rt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Et-Lt<0);Lt++)Pt=getLine(nt.buffer,st[Et-Lt],bt[Et-Lt],nt.position-(st[Et]-st[Et-Lt]),Dt),kt=common.repeat(" ",rt.indent)+padStart((nt.line-Lt+1).toString(),Rt)+" | "+Pt.str+`
`+kt;for(Pt=getLine(nt.buffer,st[Et],bt[Et],nt.position,Dt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+1).toString(),Rt)+" | "+Pt.str+`
`,kt+=common.repeat("-",rt.indent+Rt+3+Pt.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Et+Lt>=bt.length);Lt++)Pt=getLine(nt.buffer,st[Et+Lt],bt[Et+Lt],nt.position-(st[Et]-st[Et+Lt]),Dt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+Lt+1).toString(),Rt)+" | "+Pt.str+`
`;return kt.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(st){rt[String(st)]=it})}),rt}function Type$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(it)===-1)throw new exception('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases(rt.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type=Type$1;function compileList(nt,rt){var it=[];return nt[rt].forEach(function(st){var bt=it.length;it.forEach(function(xt,Et){xt.tag===st.tag&&xt.kind===st.kind&&xt.multi===st.multi&&(bt=Et)}),it[bt]=st}),it}function compileMap(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function st(bt){bt.multi?(nt.multi[bt.kind].push(bt),nt.multi.fallback.push(bt)):nt[bt.kind][bt.tag]=nt.fallback[bt.tag]=bt}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(st);return nt}function Schema$1(nt){return this.extend(nt)}Schema$1.prototype.extend=function nt(rt){var it=[],st=[];if(rt instanceof type)st.push(rt);else if(Array.isArray(rt))st=st.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(st=st.concat(rt.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(xt){if(!(xt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(xt.loadKind&&xt.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(xt.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(xt){if(!(xt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var bt=Object.create(Schema$1.prototype);return bt.implicit=(this.implicit||[]).concat(it),bt.explicit=(this.explicit||[]).concat(st),bt.compiledImplicit=compileList(bt,"implicit"),bt.compiledExplicit=compileList(bt,"explicit"),bt.compiledTypeMap=compileMap(bt.compiledImplicit,bt.compiledExplicit),bt};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$1=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe=new schema({explicit:[str,seq$1,map]});function resolveYamlNull(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull(){return null}function isNull(nt){return nt===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode(nt){return 48<=nt&&nt<=55}function isDecCode(nt){return 48<=nt&&nt<=57}function resolveYamlInteger(nt){if(nt===null)return!1;var rt=nt.length,it=0,st=!1,bt;if(!rt)return!1;if(bt=nt[it],(bt==="-"||bt==="+")&&(bt=nt[++it]),bt==="0"){if(it+1===rt)return!0;if(bt=nt[++it],bt==="b"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(bt!=="0"&&bt!=="1")return!1;st=!0}return st&&bt!=="_"}if(bt==="x"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isHexCode(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}if(bt==="o"){for(it++;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isOctCode(nt.charCodeAt(it)))return!1;st=!0}return st&&bt!=="_"}}if(bt==="_")return!1;for(;it<rt;it++)if(bt=nt[it],bt!=="_"){if(!isDecCode(nt.charCodeAt(it)))return!1;st=!0}return!(!st||bt==="_")}function constructYamlInteger(nt){var rt=nt,it=1,st;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),st=rt[0],(st==="-"||st==="+")&&(st==="-"&&(it=-1),rt=rt.slice(1),st=rt[0]),rt==="0")return 0;if(st==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common.isNegativeZero(nt)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(nt){return!(nt===null||!YAML_FLOAT_PATTERN.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT.test(it)?it.replace("e",".e"):it}function isFloat(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common.isNegativeZero(nt))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(nt){return nt===null?!1:YAML_DATE_REGEXP.exec(nt)!==null||YAML_TIMESTAMP_REGEXP.exec(nt)!==null}function constructYamlTimestamp(nt){var rt,it,st,bt,xt,Et,kt,Lt=0,Pt=null,Rt,Dt,Bt;if(rt=YAML_DATE_REGEXP.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],st=+rt[2]-1,bt=+rt[3],!rt[4])return new Date(Date.UTC(it,st,bt));if(xt=+rt[4],Et=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Rt=+rt[10],Dt=+(rt[11]||0),Pt=(Rt*60+Dt)*6e4,rt[9]==="-"&&(Pt=-Pt)),Bt=new Date(Date.UTC(it,st,bt,xt,Et,kt,Lt)),Pt&&Bt.setTime(Bt.getTime()-Pt),Bt}function representYamlTimestamp(nt){return nt.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(nt){return nt==="<<"||nt===null}var merge$1=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(nt){if(nt===null)return!1;var rt,it,st=0,bt=nt.length,xt=BASE64_MAP;for(it=0;it<bt;it++)if(rt=xt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;st+=6}return st%8===0}function constructYamlBinary(nt){var rt,it,st=nt.replace(/[\r\n=]/g,""),bt=st.length,xt=BASE64_MAP,Et=0,kt=[];for(rt=0;rt<bt;rt++)rt%4===0&&rt&&(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)),Et=Et<<6|xt.indexOf(st.charAt(rt));return it=bt%4*6,it===0?(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)):it===18?(kt.push(Et>>10&255),kt.push(Et>>2&255)):it===12&&kt.push(Et>>4&255),new Uint8Array(kt)}function representYamlBinary(nt){var rt="",it=0,st,bt,xt=nt.length,Et=BASE64_MAP;for(st=0;st<xt;st++)st%3===0&&st&&(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]),it=(it<<8)+nt[st];return bt=xt%3,bt===0?(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]):bt===2?(rt+=Et[it>>10&63],rt+=Et[it>>4&63],rt+=Et[it<<2&63],rt+=Et[64]):bt===1&&(rt+=Et[it>>2&63],rt+=Et[it<<4&63],rt+=Et[64],rt+=Et[64]),rt}function isBinary(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(nt){if(nt===null)return!0;var rt=[],it,st,bt,xt,Et,kt=nt;for(it=0,st=kt.length;it<st;it+=1){if(bt=kt[it],Et=!1,_toString$2.call(bt)!=="[object Object]")return!1;for(xt in bt)if(_hasOwnProperty$3.call(bt,xt))if(!Et)Et=!0;else return!1;if(!Et)return!1;if(rt.indexOf(xt)===-1)rt.push(xt);else return!1}return!0}function constructYamlOmap(nt){return nt!==null?nt:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(nt){if(nt===null)return!0;var rt,it,st,bt,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1){if(st=Et[rt],_toString$1.call(st)!=="[object Object]"||(bt=Object.keys(st),bt.length!==1))return!1;xt[rt]=[bt[0],st[bt[0]]]}return!0}function constructYamlPairs(nt){if(nt===null)return[];var rt,it,st,bt,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1)st=Et[rt],bt=Object.keys(st),xt[rt]=[bt[0],st[bt[0]]];return xt}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet(nt){return nt!==null?nt:{}}var set$1=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge$1],explicit:[binary,omap,pairs,set$1]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(nt){return Object.prototype.toString.call(nt)}function is_EOL(nt){return nt===10||nt===13}function is_WHITE_SPACE(nt){return nt===9||nt===32}function is_WS_OR_EOL(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(var i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet(it),new exception(rt,it)}function throwError(nt,rt){throw generateError(nt,rt)}function throwWarning(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError(nt,rt))}var directiveHandlers={YAML:function nt(rt,it,st){var bt,xt,Et;rt.version!==null&&throwError(rt,"duplication of %YAML directive"),st.length!==1&&throwError(rt,"YAML directive accepts exactly one argument"),bt=/^([0-9]+)\.([0-9]+)$/.exec(st[0]),bt===null&&throwError(rt,"ill-formed argument of the YAML directive"),xt=parseInt(bt[1],10),Et=parseInt(bt[2],10),xt!==1&&throwError(rt,"unacceptable YAML version of the document"),rt.version=st[0],rt.checkLineBreaks=Et<2,Et!==1&&Et!==2&&throwWarning(rt,"unsupported YAML version of the document")},TAG:function nt(rt,it,st){var bt,xt;st.length!==2&&throwError(rt,"TAG directive accepts exactly two arguments"),bt=st[0],xt=st[1],PATTERN_TAG_HANDLE.test(bt)||throwError(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(rt.tagMap,bt)&&throwError(rt,'there is a previously declared suffix for "'+bt+'" tag handle'),PATTERN_TAG_URI.test(xt)||throwError(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{xt=decodeURIComponent(xt)}catch{throwError(rt,"tag prefix is malformed: "+xt)}rt.tagMap[bt]=xt}};function captureSegment(nt,rt,it,st){var bt,xt,Et,kt;if(rt<it){if(kt=nt.input.slice(rt,it),st)for(bt=0,xt=kt.length;bt<xt;bt+=1)Et=kt.charCodeAt(bt),Et===9||32<=Et&&Et<=1114111||throwError(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(kt)&&throwError(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings(nt,rt,it,st){var bt,xt,Et,kt;for(common.isObject(it)||throwError(nt,"cannot merge mappings; the provided source object is unacceptable"),bt=Object.keys(it),Et=0,kt=bt.length;Et<kt;Et+=1)xt=bt[Et],_hasOwnProperty$1.call(rt,xt)||(rt[xt]=it[xt],st[xt]=!0)}function storeMappingPair(nt,rt,it,st,bt,xt,Et,kt,Lt){var Pt,Rt;if(Array.isArray(bt))for(bt=Array.prototype.slice.call(bt),Pt=0,Rt=bt.length;Pt<Rt;Pt+=1)Array.isArray(bt[Pt])&&throwError(nt,"nested arrays are not supported inside keys"),typeof bt=="object"&&_class(bt[Pt])==="[object Object]"&&(bt[Pt]="[object Object]");if(typeof bt=="object"&&_class(bt)==="[object Object]"&&(bt="[object Object]"),bt=String(bt),rt===null&&(rt={}),st==="tag:yaml.org,2002:merge")if(Array.isArray(xt))for(Pt=0,Rt=xt.length;Pt<Rt;Pt+=1)mergeMappings(nt,rt,xt[Pt],it);else mergeMappings(nt,rt,xt,it);else!nt.json&&!_hasOwnProperty$1.call(it,bt)&&_hasOwnProperty$1.call(rt,bt)&&(nt.line=Et||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError(nt,"duplicated mapping key")),bt==="__proto__"?Object.defineProperty(rt,bt,{configurable:!0,enumerable:!0,writable:!0,value:xt}):rt[bt]=xt,delete it[bt];return rt}function readLineBreak(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace(nt,rt,it){for(var st=0,bt=nt.input.charCodeAt(nt.position);bt!==0;){for(;is_WHITE_SPACE(bt);)bt===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),bt=nt.input.charCodeAt(++nt.position);if(rt&&bt===35)do bt=nt.input.charCodeAt(++nt.position);while(bt!==10&&bt!==13&&bt!==0);if(is_EOL(bt))for(readLineBreak(nt),bt=nt.input.charCodeAt(nt.position),st++,nt.lineIndent=0;bt===32;)nt.lineIndent++,bt=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&st!==0&&nt.lineIndent<it&&throwWarning(nt,"deficient indentation"),st}function testDocumentSeparator(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL(it)))}function writeFoldedLines(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common.repeat(`
`,rt-1))}function readPlainScalar(nt,rt,it){var st,bt,xt,Et,kt,Lt,Pt,Rt,Dt=nt.kind,Bt=nt.result,Ft;if(Ft=nt.input.charCodeAt(nt.position),is_WS_OR_EOL(Ft)||is_FLOW_INDICATOR(Ft)||Ft===35||Ft===38||Ft===42||Ft===33||Ft===124||Ft===62||Ft===39||Ft===34||Ft===37||Ft===64||Ft===96||(Ft===63||Ft===45)&&(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(bt)||it&&is_FLOW_INDICATOR(bt)))return!1;for(nt.kind="scalar",nt.result="",xt=Et=nt.position,kt=!1;Ft!==0;){if(Ft===58){if(bt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(bt)||it&&is_FLOW_INDICATOR(bt))break}else if(Ft===35){if(st=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL(st))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator(nt)||it&&is_FLOW_INDICATOR(Ft))break;if(is_EOL(Ft))if(Lt=nt.line,Pt=nt.lineStart,Rt=nt.lineIndent,skipSeparationSpace(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Ft=nt.input.charCodeAt(nt.position);continue}else{nt.position=Et,nt.line=Lt,nt.lineStart=Pt,nt.lineIndent=Rt;break}}kt&&(captureSegment(nt,xt,Et,!1),writeFoldedLines(nt,nt.line-Lt),xt=Et=nt.position,kt=!1),is_WHITE_SPACE(Ft)||(Et=nt.position+1),Ft=nt.input.charCodeAt(++nt.position)}return captureSegment(nt,xt,Et,!1),nt.result?!0:(nt.kind=Dt,nt.result=Bt,!1)}function readSingleQuotedScalar(nt,rt){var it,st,bt;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,st=bt=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment(nt,st,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)st=nt.position,nt.position++,bt=nt.position;else return!0;else is_EOL(it)?(captureSegment(nt,st,bt,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),st=bt=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,bt=nt.position);throwError(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(nt,rt){var it,st,bt,xt,Et,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=st=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL(kt))skipSeparationSpace(nt,!1,rt);else if(kt<256&&simpleEscapeCheck[kt])nt.result+=simpleEscapeMap[kt],nt.position++;else if((Et=escapedHexLen(kt))>0){for(bt=Et,xt=0;bt>0;bt--)kt=nt.input.charCodeAt(++nt.position),(Et=fromHexCode(kt))>=0?xt=(xt<<4)+Et:throwError(nt,"expected hexadecimal character");nt.result+=charFromCodepoint(xt),nt.position++}else throwError(nt,"unknown escape sequence");it=st=nt.position}else is_EOL(kt)?(captureSegment(nt,it,st,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),it=st=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,st=nt.position)}throwError(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(nt,rt){var it=!0,st,bt,xt,Et=nt.tag,kt,Lt=nt.anchor,Pt,Rt,Dt,Bt,Ft,Yt=Object.create(null),Zt,Wt,Qt,Kt;if(Kt=nt.input.charCodeAt(nt.position),Kt===91)Rt=93,Ft=!1,kt=[];else if(Kt===123)Rt=125,Ft=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),Kt=nt.input.charCodeAt(++nt.position);Kt!==0;){if(skipSeparationSpace(nt,!0,rt),Kt=nt.input.charCodeAt(nt.position),Kt===Rt)return nt.position++,nt.tag=Et,nt.anchor=Lt,nt.kind=Ft?"mapping":"sequence",nt.result=kt,!0;it?Kt===44&&throwError(nt,"expected the node content, but found ','"):throwError(nt,"missed comma between flow collection entries"),Wt=Zt=Qt=null,Dt=Bt=!1,Kt===63&&(Pt=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(Pt)&&(Dt=Bt=!0,nt.position++,skipSeparationSpace(nt,!0,rt))),st=nt.line,bt=nt.lineStart,xt=nt.position,composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),Wt=nt.tag,Zt=nt.result,skipSeparationSpace(nt,!0,rt),Kt=nt.input.charCodeAt(nt.position),(Bt||nt.line===st)&&Kt===58&&(Dt=!0,Kt=nt.input.charCodeAt(++nt.position),skipSeparationSpace(nt,!0,rt),composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),Qt=nt.result),Ft?storeMappingPair(nt,kt,Yt,Wt,Zt,Qt,st,bt,xt):Dt?kt.push(storeMappingPair(nt,null,Yt,Wt,Zt,Qt,st,bt,xt)):kt.push(Zt),skipSeparationSpace(nt,!0,rt),Kt=nt.input.charCodeAt(nt.position),Kt===44?(it=!0,Kt=nt.input.charCodeAt(++nt.position)):it=!1}throwError(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar(nt,rt){var it,st,bt=CHOMPING_CLIP,xt=!1,Et=!1,kt=rt,Lt=0,Pt=!1,Rt,Dt;if(Dt=nt.input.charCodeAt(nt.position),Dt===124)st=!1;else if(Dt===62)st=!0;else return!1;for(nt.kind="scalar",nt.result="";Dt!==0;)if(Dt=nt.input.charCodeAt(++nt.position),Dt===43||Dt===45)CHOMPING_CLIP===bt?bt=Dt===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(nt,"repeat of a chomping mode identifier");else if((Rt=fromDecimalCode(Dt))>=0)Rt===0?throwError(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Et?throwError(nt,"repeat of an indentation width identifier"):(kt=rt+Rt-1,Et=!0);else break;if(is_WHITE_SPACE(Dt)){do Dt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE(Dt));if(Dt===35)do Dt=nt.input.charCodeAt(++nt.position);while(!is_EOL(Dt)&&Dt!==0)}for(;Dt!==0;){for(readLineBreak(nt),nt.lineIndent=0,Dt=nt.input.charCodeAt(nt.position);(!Et||nt.lineIndent<kt)&&Dt===32;)nt.lineIndent++,Dt=nt.input.charCodeAt(++nt.position);if(!Et&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL(Dt)){Lt++;continue}if(nt.lineIndent<kt){bt===CHOMPING_KEEP?nt.result+=common.repeat(`
`,xt?1+Lt:Lt):bt===CHOMPING_CLIP&&xt&&(nt.result+=`
`);break}for(st?is_WHITE_SPACE(Dt)?(Pt=!0,nt.result+=common.repeat(`
`,xt?1+Lt:Lt)):Pt?(Pt=!1,nt.result+=common.repeat(`
`,Lt+1)):Lt===0?xt&&(nt.result+=" "):nt.result+=common.repeat(`
`,Lt):nt.result+=common.repeat(`
`,xt?1+Lt:Lt),xt=!0,Et=!0,Lt=0,it=nt.position;!is_EOL(Dt)&&Dt!==0;)Dt=nt.input.charCodeAt(++nt.position);captureSegment(nt,it,nt.position,!1)}return!0}function readBlockSequence(nt,rt){var it,st=nt.tag,bt=nt.anchor,xt=[],Et,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=xt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Et=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL(Et))));){if(kt=!0,nt.position++,skipSeparationSpace(nt,!0,-1)&&nt.lineIndent<=rt){xt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode(nt,rt,CONTEXT_BLOCK_IN,!1,!0),xt.push(nt.result),skipSeparationSpace(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=st,nt.anchor=bt,nt.kind="sequence",nt.result=xt,!0):!1}function readBlockMapping(nt,rt,it){var st,bt,xt,Et,kt,Lt,Pt=nt.tag,Rt=nt.anchor,Dt={},Bt=Object.create(null),Ft=null,Yt=null,Zt=null,Wt=!1,Qt=!1,Kt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=Dt),Kt=nt.input.charCodeAt(nt.position);Kt!==0;){if(!Wt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),st=nt.input.charCodeAt(nt.position+1),xt=nt.line,(Kt===63||Kt===58)&&is_WS_OR_EOL(st))Kt===63?(Wt&&(storeMappingPair(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Qt=!0,Wt=!0,bt=!0):Wt?(Wt=!1,bt=!0):throwError(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,Kt=st;else{if(Et=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode(nt,it,CONTEXT_FLOW_OUT,!1,!0))break;if(nt.line===xt){for(Kt=nt.input.charCodeAt(nt.position);is_WHITE_SPACE(Kt);)Kt=nt.input.charCodeAt(++nt.position);if(Kt===58)Kt=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL(Kt)||throwError(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Wt&&(storeMappingPair(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Qt=!0,Wt=!1,bt=!1,Ft=nt.tag,Yt=nt.result;else if(Qt)throwError(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=Pt,nt.anchor=Rt,!0}else if(Qt)throwError(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=Pt,nt.anchor=Rt,!0}if((nt.line===xt||nt.lineIndent>rt)&&(Wt&&(Et=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode(nt,rt,CONTEXT_BLOCK_OUT,!0,bt)&&(Wt?Yt=nt.result:Zt=nt.result),Wt||(storeMappingPair(nt,Dt,Bt,Ft,Yt,Zt,Et,kt,Lt),Ft=Yt=Zt=null),skipSeparationSpace(nt,!0,-1),Kt=nt.input.charCodeAt(nt.position)),(nt.line===xt||nt.lineIndent>rt)&&Kt!==0)throwError(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Wt&&storeMappingPair(nt,Dt,Bt,Ft,Yt,null,Et,kt,Lt),Qt&&(nt.tag=Pt,nt.anchor=Rt,nt.kind="mapping",nt.result=Dt),Qt}function readTagProperty(nt){var rt,it=!1,st=!1,bt,xt,Et;if(Et=nt.input.charCodeAt(nt.position),Et!==33)return!1;if(nt.tag!==null&&throwError(nt,"duplication of a tag property"),Et=nt.input.charCodeAt(++nt.position),Et===60?(it=!0,Et=nt.input.charCodeAt(++nt.position)):Et===33?(st=!0,bt="!!",Et=nt.input.charCodeAt(++nt.position)):bt="!",rt=nt.position,it){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&Et!==62);nt.position<nt.length?(xt=nt.input.slice(rt,nt.position),Et=nt.input.charCodeAt(++nt.position)):throwError(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Et!==0&&!is_WS_OR_EOL(Et);)Et===33&&(st?throwError(nt,"tag suffix cannot contain exclamation marks"):(bt=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE.test(bt)||throwError(nt,"named tag handle cannot contain such characters"),st=!0,rt=nt.position+1)),Et=nt.input.charCodeAt(++nt.position);xt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS.test(xt)&&throwError(nt,"tag suffix cannot contain flow indicator characters")}xt&&!PATTERN_TAG_URI.test(xt)&&throwError(nt,"tag name cannot contain such characters: "+xt);try{xt=decodeURIComponent(xt)}catch{throwError(nt,"tag name is malformed: "+xt)}return it?nt.tag=xt:_hasOwnProperty$1.call(nt.tagMap,bt)?nt.tag=nt.tagMap[bt]+xt:bt==="!"?nt.tag="!"+xt:bt==="!!"?nt.tag="tag:yaml.org,2002:"+xt:throwError(nt,'undeclared tag handle "'+bt+'"'),!0}function readAnchorProperty(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL(it)&&!is_FLOW_INDICATOR(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias(nt){var rt,it,st;if(st=nt.input.charCodeAt(nt.position),st!==42)return!1;for(st=nt.input.charCodeAt(++nt.position),rt=nt.position;st!==0&&!is_WS_OR_EOL(st)&&!is_FLOW_INDICATOR(st);)st=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1.call(nt.anchorMap,it)||throwError(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace(nt,!0,-1),!0}function composeNode(nt,rt,it,st,bt){var xt,Et,kt,Lt=1,Pt=!1,Rt=!1,Dt,Bt,Ft,Yt,Zt,Wt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,xt=Et=kt=CONTEXT_BLOCK_OUT===it||CONTEXT_BLOCK_IN===it,st&&skipSeparationSpace(nt,!0,-1)&&(Pt=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty(nt)||readAnchorProperty(nt);)skipSeparationSpace(nt,!0,-1)?(Pt=!0,kt=xt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=Pt||bt),(Lt===1||CONTEXT_BLOCK_OUT===it)&&(CONTEXT_FLOW_IN===it||CONTEXT_FLOW_OUT===it?Zt=rt:Zt=rt+1,Wt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence(nt,Wt)||readBlockMapping(nt,Wt,Zt))||readFlowCollection(nt,Zt)?Rt=!0:(Et&&readBlockScalar(nt,Zt)||readSingleQuotedScalar(nt,Zt)||readDoubleQuotedScalar(nt,Zt)?Rt=!0:readAlias(nt)?(Rt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError(nt,"alias node should not have any properties")):readPlainScalar(nt,Zt,CONTEXT_FLOW_IN===it)&&(Rt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Rt=kt&&readBlockSequence(nt,Wt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),Dt=0,Bt=nt.implicitTypes.length;Dt<Bt;Dt+=1)if(Yt=nt.implicitTypes[Dt],Yt.resolve(nt.result)){nt.result=Yt.construct(nt.result),nt.tag=Yt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Yt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Yt=null,Ft=nt.typeMap.multi[nt.kind||"fallback"],Dt=0,Bt=Ft.length;Dt<Bt;Dt+=1)if(nt.tag.slice(0,Ft[Dt].tag.length)===Ft[Dt].tag){Yt=Ft[Dt];break}Yt||throwError(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Yt.kind!==nt.kind&&throwError(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Yt.kind+'", not "'+nt.kind+'"'),Yt.resolve(nt.result,nt.tag)?(nt.result=Yt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Rt}function readDocument(nt){var rt=nt.position,it,st,bt,xt=!1,Et;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Et=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace(nt,!0,-1),Et=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Et!==37));){for(xt=!0,Et=nt.input.charCodeAt(++nt.position),it=nt.position;Et!==0&&!is_WS_OR_EOL(Et);)Et=nt.input.charCodeAt(++nt.position);for(st=nt.input.slice(it,nt.position),bt=[],st.length<1&&throwError(nt,"directive name must not be less than one character in length");Et!==0;){for(;is_WHITE_SPACE(Et);)Et=nt.input.charCodeAt(++nt.position);if(Et===35){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&!is_EOL(Et));break}if(is_EOL(Et))break;for(it=nt.position;Et!==0&&!is_WS_OR_EOL(Et);)Et=nt.input.charCodeAt(++nt.position);bt.push(nt.input.slice(it,nt.position))}Et!==0&&readLineBreak(nt),_hasOwnProperty$1.call(directiveHandlers,st)?directiveHandlers[st](nt,st,bt):throwWarning(nt,'unknown document directive "'+st+'"')}if(skipSeparationSpace(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace(nt,!0,-1)):xt&&throwError(nt,"directives end mark is expected"),composeNode(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(nt.input.slice(rt,nt.position))&&throwWarning(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace(nt,!0,-1));return}if(nt.position<nt.length-1)throwError(nt,"end of the stream or a document separator is expected");else return}function loadDocuments(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1(nt,rt),st=nt.indexOf("\0");for(st!==-1&&(it.position=st,throwError(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument(it);return it.documents}function loadAll$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var st=loadDocuments(nt,it);if(typeof rt!="function")return st;for(var bt=0,xt=st.length;bt<xt;bt+=1)rt(st[bt])}function load$1(nt,rt){var it=loadDocuments(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader$3={loadAll:loadAll_1,load:load_1},FAILSAFE_SCHEMA=failsafe,load=loader$3.load;const frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function extractFrontMatter(nt,rt){var it;const st=nt.match(frontMatterRegex);if(st){const bt=load(st[1],{schema:FAILSAFE_SCHEMA});return bt!=null&&bt.title&&((it=rt.setDiagramTitle)==null||it.call(rt,bt.title)),nt.slice(st[0].length)}else return nt}const directive$1=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyComment=/\s*%%.*\n/gm,detectors={},detectType=function(nt,rt){nt=nt.replace(frontMatterRegex,"").replace(directive$1,"").replace(anyComment,`
`);for(const[it,{detector:st}]of Object.entries(detectors))if(st(nt,rt))return it;throw new Error(`No diagram type detected for text: ${nt}`)},registerLazyLoadedDiagrams=(...nt)=>{for(const{id:rt,detector:it,loader:st}of nt)addDetector(rt,it,st)},addDetector=(nt,rt,it)=>{detectors[nt]?log$1.error(`Detector with key ${nt} already exists`):detectors[nt]={detector:rt,loader:it},log$1.debug(`Detector with key ${nt} added${it?" with loader":""}`)},getDiagramLoader=nt=>detectors[nt].loader,assignWithDepth=function(nt,rt,it){const{depth:st,clobber:bt}=Object.assign({depth:2,clobber:!1},it);return Array.isArray(rt)&&!Array.isArray(nt)?(rt.forEach(xt=>assignWithDepth(nt,xt,it)),nt):Array.isArray(rt)&&Array.isArray(nt)?(rt.forEach(xt=>{nt.includes(xt)||nt.push(xt)}),nt):nt===void 0||st<=0?nt!=null&&typeof nt=="object"&&typeof rt=="object"?Object.assign(nt,rt):rt:(rt!==void 0&&typeof nt=="object"&&typeof rt=="object"&&Object.keys(rt).forEach(xt=>{typeof rt[xt]=="object"&&(nt[xt]===void 0||typeof nt[xt]=="object")?(nt[xt]===void 0&&(nt[xt]=Array.isArray(rt[xt])?[]:{}),nt[xt]=assignWithDepth(nt[xt],rt[xt],{depth:st-1,clobber:bt})):(bt||typeof nt[xt]!="object"&&typeof rt[xt]!="object")&&(nt[xt]=rt[xt])}),nt)},assignWithDepth$1=assignWithDepth,d3CurveTypes={curveBasis,curveBasisClosed,curveBasisOpen,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle,curveCardinalClosed,curveCardinalOpen,curveCardinal,curveCatmullRomClosed,curveCatmullRomOpen,curveCatmullRom,curveLinear,curveLinearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directive=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=function(nt,rt){const it=detectDirective(nt,/(?:init\b)|(?:initialize\b)/);let st={};if(Array.isArray(it)){const bt=it.map(xt=>xt.args);directiveSanitizer(bt),st=assignWithDepth$1(st,[...bt])}else st=it.args;if(st){let bt=detectType(nt,rt);["config"].forEach(xt=>{st[xt]!==void 0&&(bt==="flowchart-v2"&&(bt="flowchart"),st[bt]=st[xt],delete st[xt])})}return st},detectDirective=function(nt,rt=null){try{const it=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*
`,"ig");nt=nt.trim().replace(it,"").replace(/'/gm,'"'),log$1.debug(`Detecting diagram directive${rt!==null?" type:"+rt:""} based on the text:${nt}`);let st;const bt=[];for(;(st=directive.exec(nt))!==null;)if(st.index===directive.lastIndex&&directive.lastIndex++,st&&!rt||rt&&st[1]&&st[1].match(rt)||rt&&st[2]&&st[2].match(rt)){const xt=st[1]?st[1]:st[2],Et=st[3]?st[3].trim():st[4]?JSON.parse(st[4].trim()):null;bt.push({type:xt,args:Et})}return bt.length===0&&bt.push({type:nt,args:null}),bt.length===1?bt[0]:bt}catch(it){return log$1.error(`ERROR: ${it.message} - Unable to parse directive
      ${rt!==null?" type:"+rt:""} based on the text:${nt}`),{type:null,args:null}}},isSubstringInArray=function(nt,rt){for(const[it,st]of rt.entries())if(st.match(nt))return it;return-1};function interpolateToCurve(nt,rt){if(!nt)return rt;const it=`curve${nt.charAt(0).toUpperCase()+nt.slice(1)}`;return d3CurveTypes[it]||rt}function formatUrl(nt,rt){const it=nt.trim();if(it)return rt.securityLevel!=="loose"?dist.sanitizeUrl(it):it}const runFunc=(nt,...rt)=>{const it=nt.split("."),st=it.length-1,bt=it[st];let xt=window;for(let Et=0;Et<st;Et++)if(xt=xt[it[Et]],!xt)return;xt[bt](...rt)};function distance(nt,rt){return nt&&rt?Math.sqrt(Math.pow(rt.x-nt.x,2)+Math.pow(rt.y-nt.y,2)):0}function traverseEdge(nt){let rt,it=0;nt.forEach(xt=>{it+=distance(xt,rt),rt=xt});let st=it/2,bt;return rt=void 0,nt.forEach(xt=>{if(rt&&!bt){const Et=distance(xt,rt);if(Et<st)st-=Et;else{const kt=st/Et;kt<=0&&(bt=rt),kt>=1&&(bt={x:xt.x,y:xt.y}),kt>0&&kt<1&&(bt={x:(1-kt)*rt.x+kt*xt.x,y:(1-kt)*rt.y+kt*xt.y})}}rt=xt}),bt}function calcLabelPosition(nt){return nt.length===1?nt[0]:traverseEdge(nt)}const calcCardinalityPosition=(nt,rt,it)=>{let st;log$1.info(`our points ${JSON.stringify(rt)}`),rt[0]!==it&&(rt=rt.reverse());let xt=25,Et;st=void 0,rt.forEach(Rt=>{if(st&&!Et){const Dt=distance(Rt,st);if(Dt<xt)xt-=Dt;else{const Bt=xt/Dt;Bt<=0&&(Et=st),Bt>=1&&(Et={x:Rt.x,y:Rt.y}),Bt>0&&Bt<1&&(Et={x:(1-Bt)*st.x+Bt*Rt.x,y:(1-Bt)*st.y+Bt*Rt.y})}}st=Rt});const kt=nt?10:5,Lt=Math.atan2(rt[0].y-Et.y,rt[0].x-Et.x),Pt={x:0,y:0};return Pt.x=Math.sin(Lt)*kt+(rt[0].x+Et.x)/2,Pt.y=-Math.cos(Lt)*kt+(rt[0].y+Et.y)/2,Pt};function calcTerminalLabelPosition(nt,rt,it){let st=JSON.parse(JSON.stringify(it)),bt;log$1.info("our points",st),rt!=="start_left"&&rt!=="start_right"&&(st=st.reverse()),st.forEach(Dt=>{bt=Dt});let Et=25+nt,kt;bt=void 0,st.forEach(Dt=>{if(bt&&!kt){const Bt=distance(Dt,bt);if(Bt<Et)Et-=Bt;else{const Ft=Et/Bt;Ft<=0&&(kt=bt),Ft>=1&&(kt={x:Dt.x,y:Dt.y}),Ft>0&&Ft<1&&(kt={x:(1-Ft)*bt.x+Ft*Dt.x,y:(1-Ft)*bt.y+Ft*Dt.y})}}bt=Dt});const Lt=10+nt*.5,Pt=Math.atan2(st[0].y-kt.y,st[0].x-kt.x),Rt={x:0,y:0};return Rt.x=Math.sin(Pt)*Lt+(st[0].x+kt.x)/2,Rt.y=-Math.cos(Pt)*Lt+(st[0].y+kt.y)/2,rt==="start_left"&&(Rt.x=Math.sin(Pt+Math.PI)*Lt+(st[0].x+kt.x)/2,Rt.y=-Math.cos(Pt+Math.PI)*Lt+(st[0].y+kt.y)/2),rt==="end_right"&&(Rt.x=Math.sin(Pt-Math.PI)*Lt+(st[0].x+kt.x)/2-5,Rt.y=-Math.cos(Pt-Math.PI)*Lt+(st[0].y+kt.y)/2-5),rt==="end_left"&&(Rt.x=Math.sin(Pt)*Lt+(st[0].x+kt.x)/2-5,Rt.y=-Math.cos(Pt)*Lt+(st[0].y+kt.y)/2-5),Rt}function getStylesFromArray(nt){let rt="",it="";for(const st of nt)st!==void 0&&(st.startsWith("color:")||st.startsWith("text-align:")?it=it+st+";":rt=rt+st+";");return{style:rt,labelStyle:it}}let cnt=0;const generateId$1=()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt);function makeid(nt){let rt="";const it="0123456789abcdef",st=it.length;for(let bt=0;bt<nt;bt++)rt+=it.charAt(Math.floor(Math.random()*st));return rt}const random=nt=>makeid(nt.length),getTextObj$2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},drawSimpleText=function(nt,rt){const it=rt.text.replace(common$1.lineBreakRegex," "),[,st]=parseFontSize(rt.fontSize),bt=nt.append("text");bt.attr("x",rt.x),bt.attr("y",rt.y),bt.style("text-anchor",rt.anchor),bt.style("font-family",rt.fontFamily),bt.style("font-size",st),bt.style("font-weight",rt.fontWeight),bt.attr("fill",rt.fill),rt.class!==void 0&&bt.attr("class",rt.class);const xt=bt.append("tspan");return xt.attr("x",rt.x+rt.textMargin*2),xt.attr("fill",rt.fill),xt.text(it),bt},wrapLabel=memoize((nt,rt,it)=>{if(!nt||(it=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},it),common$1.lineBreakRegex.test(nt)))return nt;const st=nt.split(" "),bt=[];let xt="";return st.forEach((Et,kt)=>{const Lt=calculateTextWidth(`${Et} `,it),Pt=calculateTextWidth(xt,it);if(Lt>rt){const{hyphenatedStrings:Bt,remainingWord:Ft}=breakString(Et,rt,"-",it);bt.push(xt,...Bt),xt=Ft}else Pt+Lt>=rt?(bt.push(xt),xt=Et):xt=[xt,Et].filter(Boolean).join(" ");kt+1===st.length&&bt.push(xt)}),bt.filter(Et=>Et!=="").join(it.joinWith)},(nt,rt,it)=>`${nt}${rt}${it.fontSize}${it.fontWeight}${it.fontFamily}${it.joinWith}`),breakString=memoize((nt,rt,it="-",st)=>{st=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},st);const bt=[...nt],xt=[];let Et="";return bt.forEach((kt,Lt)=>{const Pt=`${Et}${kt}`;if(calculateTextWidth(Pt,st)>=rt){const Dt=Lt+1,Bt=bt.length===Dt,Ft=`${Pt}${it}`;xt.push(Bt?Pt:Ft),Et=""}else Et=Pt}),{hyphenatedStrings:xt,remainingWord:Et}},(nt,rt,it="-",st)=>`${nt}${rt}${it}${st.fontSize}${st.fontWeight}${st.fontFamily}`);function calculateTextHeight(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},rt),calculateTextDimensions(nt,rt).height}function calculateTextWidth(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt),calculateTextDimensions(nt,rt).width}const calculateTextDimensions=memoize((nt,rt)=>{rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt);const{fontSize:it,fontFamily:st,fontWeight:bt}=rt;if(!nt)return{width:0,height:0};const[,xt]=parseFontSize(it),Et=["sans-serif",st],kt=nt.split(common$1.lineBreakRegex),Lt=[],Pt=select("body");if(!Pt.remove)return{width:0,height:0,lineHeight:0};const Rt=Pt.append("svg");for(const Bt of Et){let Ft=0;const Yt={width:0,height:0,lineHeight:0};for(const Zt of kt){const Wt=getTextObj$2();Wt.text=Zt;const Qt=drawSimpleText(Rt,Wt).style("font-size",xt).style("font-weight",bt).style("font-family",Bt),Kt=(Qt._groups||Qt)[0][0].getBBox();Yt.width=Math.round(Math.max(Yt.width,Kt.width)),Ft=Math.round(Kt.height),Yt.height+=Ft,Yt.lineHeight=Math.round(Math.max(Yt.lineHeight,Ft))}Lt.push(Yt)}Rt.remove();const Dt=isNaN(Lt[1].height)||isNaN(Lt[1].width)||isNaN(Lt[1].lineHeight)||Lt[0].height>Lt[1].height&&Lt[0].width>Lt[1].width&&Lt[0].lineHeight>Lt[1].lineHeight?0:1;return Lt[Dt]},(nt,rt)=>`${nt}${rt.fontSize}${rt.fontWeight}${rt.fontFamily}`),initIdGenerator=class{constructor(rt,it){this.deterministic=rt,this.seed=it,this.count=it?it.length:0}next(){return this.deterministic?this.count++:Date.now()}};let decoder;const entityDecode=function(nt){return decoder=decoder||document.createElement("div"),nt=escape(nt).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=nt,unescape(decoder.textContent)},directiveSanitizer=nt=>{if(log$1.debug("directiveSanitizer called with",nt),typeof nt=="object"&&(nt.length?nt.forEach(rt=>directiveSanitizer(rt)):Object.keys(nt).forEach(rt=>{log$1.debug("Checking key",rt),rt.startsWith("__")&&(log$1.debug("sanitize deleting __ option",rt),delete nt[rt]),rt.includes("proto")&&(log$1.debug("sanitize deleting proto option",rt),delete nt[rt]),rt.includes("constr")&&(log$1.debug("sanitize deleting constr option",rt),delete nt[rt]),rt.includes("themeCSS")&&(log$1.debug("sanitizing themeCss option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("fontFamily")&&(log$1.debug("sanitizing fontFamily option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("altFontFamily")&&(log$1.debug("sanitizing altFontFamily option"),nt[rt]=sanitizeCss(nt[rt])),configKeys.includes(rt)?typeof nt[rt]=="object"&&(log$1.debug("sanitize deleting object",rt),directiveSanitizer(nt[rt])):(log$1.debug("sanitize deleting option",rt),delete nt[rt])})),nt.themeVariables){const rt=Object.keys(nt.themeVariables);for(const it of rt){const st=nt.themeVariables[it];st&&st.match&&!st.match(/^[\d "#%(),.;A-Za-z]+$/)&&(nt.themeVariables[it]="")}}log$1.debug("After sanitization",nt)},sanitizeCss=nt=>{let rt=0,it=0;for(const st of nt){if(rt<it)return"{ /* ERROR: Unbalanced CSS */ }";st==="{"?rt++:st==="}"&&it++}return rt!==it?"{ /* ERROR: Unbalanced CSS */ }":nt};function isDetailedError(nt){return"str"in nt}function getErrorMessage(nt){return nt instanceof Error?nt.message:String(nt)}const insertTitle=(nt,rt,it,st)=>{if(!st)return;const bt=nt.node().getBBox();nt.append("text").text(st).attr("x",bt.x+bt.width/2).attr("y",-it).attr("class",rt)},parseFontSize=nt=>{if(typeof nt=="number")return[nt,nt+"px"];const rt=parseInt(nt,10);return Number.isNaN(rt)?[void 0,void 0]:nt===String(rt)?[rt,nt+"px"]:[rt,nt]},utils={assignWithDepth:assignWithDepth$1,wrapLabel,calculateTextHeight,calculateTextWidth,calculateTextDimensions,detectInit,detectDirective,isSubstringInArray,interpolateToCurve,calcLabelPosition,calcCardinalityPosition,calcTerminalLabelPosition,formatUrl,getStylesFromArray,generateId:generateId$1,random,runFunc,entityDecode,initIdGenerator,directiveSanitizer,sanitizeCss,insertTitle,parseFontSize},version$1="9.4.3",defaultConfig=Object.freeze(config$2);let siteConfig=assignWithDepth$1({},defaultConfig),configFromInitialize,directives=[],currentConfig=assignWithDepth$1({},defaultConfig);const updateCurrentConfig=(nt,rt)=>{let it=assignWithDepth$1({},nt),st={};for(const bt of rt)sanitize(bt),st=assignWithDepth$1(st,bt);if(it=assignWithDepth$1(it,st),st.theme&&st.theme in theme){const bt=assignWithDepth$1({},configFromInitialize),xt=assignWithDepth$1(bt.themeVariables||{},st.themeVariables);it.theme&&it.theme in theme&&(it.themeVariables=theme[it.theme].getThemeVariables(xt))}return currentConfig=it,checkConfig(currentConfig),currentConfig},setSiteConfig=nt=>(siteConfig=assignWithDepth$1({},defaultConfig),siteConfig=assignWithDepth$1(siteConfig,nt),nt.theme&&theme[nt.theme]&&(siteConfig.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),saveConfigFromInitialize=nt=>{configFromInitialize=assignWithDepth$1({},nt)},updateSiteConfig=nt=>(siteConfig=assignWithDepth$1(siteConfig,nt),updateCurrentConfig(siteConfig,directives),siteConfig),getSiteConfig=()=>assignWithDepth$1({},siteConfig),setConfig=nt=>(checkConfig(nt),assignWithDepth$1(currentConfig,nt),getConfig$1()),getConfig$1=()=>assignWithDepth$1({},currentConfig),sanitize=nt=>{var rt;["secure",...(rt=siteConfig.secure)!=null?rt:[]].forEach(it=>{nt[it]!==void 0&&(log$1.debug(`Denied attempt to modify a secure key ${it}`,nt[it]),delete nt[it])}),Object.keys(nt).forEach(it=>{it.indexOf("__")===0&&delete nt[it]}),Object.keys(nt).forEach(it=>{typeof nt[it]=="string"&&(nt[it].includes("<")||nt[it].includes(">")||nt[it].includes("url(data:"))&&delete nt[it],typeof nt[it]=="object"&&sanitize(nt[it])})},addDirective=nt=>{nt.fontFamily&&(nt.themeVariables?nt.themeVariables.fontFamily||(nt.themeVariables={fontFamily:nt.fontFamily}):nt.themeVariables={fontFamily:nt.fontFamily}),directives.push(nt),updateCurrentConfig(siteConfig,directives)},reset=(nt=siteConfig)=>{directives=[],updateCurrentConfig(nt,directives)};var ConfigWarning=(nt=>(nt.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",nt))(ConfigWarning||{});const issuedWarnings={},issueWarning=nt=>{issuedWarnings[nt]||(log$1.warn(ConfigWarning[nt]),issuedWarnings[nt]=!0)},checkConfig=nt=>{!nt||(nt.lazyLoadedDiagrams||nt.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},d3Attrs=function(nt,rt){for(let it of rt)nt.attr(it[0],it[1])},calculateSvgSizeAttrs=function(nt,rt,it){let st=new Map;return it?(st.set("width","100%"),st.set("style",`max-width: ${rt}px;`)):(st.set("height",nt),st.set("width",rt)),st},configureSvgSize=function(nt,rt,it,st){const bt=calculateSvgSizeAttrs(rt,it,st);d3Attrs(nt,bt)},setupGraphViewbox$1=function(nt,rt,it,st){const bt=rt.node().getBBox(),xt=bt.width,Et=bt.height;log$1.info(`SVG bounds: ${xt}x${Et}`,bt);let kt=0,Lt=0;log$1.info(`Graph bounds: ${kt}x${Lt}`,nt),kt=xt+it*2,Lt=Et+it*2,log$1.info(`Calculated bounds: ${kt}x${Lt}`),configureSvgSize(rt,Lt,kt,st);const Pt=`${bt.x-it} ${bt.y-it} ${bt.width+2*it} ${bt.height+2*it}`;rt.attr("viewBox",Pt)},getStyles$e=nt=>`g.classGroup text {
  fill: ${nt.nodeBorder};
  fill: ${nt.classText};
  stroke: none;
  font-family: ${nt.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${nt.classText};
}
.edgeLabel .label rect {
  fill: ${nt.mainBkg};
}
.label text {
  fill: ${nt.classText};
}
.edgeLabel .label span {
  background: ${nt.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${nt.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.classGroup line {
  stroke: ${nt.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${nt.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${nt.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,classStyles=getStyles$e,getStyles$d=nt=>`
  .entityBox {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${nt.attributeBackgroundColorOdd};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${nt.attributeBackgroundColorEven};
    stroke: ${nt.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${nt.tertiaryColor};
    opacity: 0.7;
    background-color: ${nt.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${nt.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }    
`,erStyles=getStyles$d,getStyles$c=()=>"",errorStyles=getStyles$c,getStyles$b=nt=>`.label {
    font-family: ${nt.fontFamily};
    color: ${nt.nodeTextColor||nt.textColor};
  }
  .cluster-label text {
    fill: ${nt.titleColor};
  }
  .cluster-label span {
    color: ${nt.titleColor};
  }

  .label text,span {
    fill: ${nt.nodeTextColor||nt.textColor};
    color: ${nt.nodeTextColor||nt.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${nt.edgeLabelBackground};
      fill: ${nt.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${nt.clusterBkg};
    stroke: ${nt.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  .cluster span {
    color: ${nt.titleColor};
  }
  /* .cluster div {
    color: ${nt.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${nt.fontFamily};
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
`,flowStyles=getStyles$b,getStyles$a=nt=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${nt.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${nt.sectionBkgColor};
  }

  .section2 {
    fill: ${nt.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${nt.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${nt.titleColor};
  }

  .sectionTitle1 {
    fill: ${nt.titleColor};
  }

  .sectionTitle2 {
    fill: ${nt.titleColor};
  }

  .sectionTitle3 {
    fill: ${nt.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${nt.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${nt.fontFamily};
      fill: ${nt.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${nt.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${nt.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${nt.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${nt.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${nt.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${nt.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${nt.taskBkgColor};
    stroke: ${nt.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${nt.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${nt.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${nt.activeTaskBkgColor};
    stroke: ${nt.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${nt.doneTaskBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,ganttStyles=getStyles$a,getStyles$9=()=>"",infoStyles=getStyles$9,getStyles$8=nt=>`
  .pieCircle{
    stroke: ${nt.pieStrokeColor};
    stroke-width : ${nt.pieStrokeWidth};
    opacity : ${nt.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${nt.pieTitleTextSize};
    fill: ${nt.pieTitleTextColor};
    font-family: ${nt.fontFamily};
  }
  .slice {
    font-family: ${nt.fontFamily};
    fill: ${nt.pieSectionTextColor};
    font-size:${nt.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${nt.pieLegendTextColor};
    font-family: ${nt.fontFamily};
    font-size: ${nt.pieLegendTextSize};
  }
`,pieStyles=getStyles$8,getStyles$7=nt=>`

  marker {
    fill: ${nt.relationColor};
    stroke: ${nt.relationColor};
  }

  marker.cross {
    stroke: ${nt.lineColor};
  }

  svg {
    font-family: ${nt.fontFamily};
    font-size: ${nt.fontSize};
  }

  .reqBox {
    fill: ${nt.requirementBackground};
    fill-opacity: 100%;
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${nt.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${nt.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${nt.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${nt.relationLabelColor};
  }

`,requirementStyles=getStyles$7,getStyles$6=nt=>`.actor {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }

  text.actor > tspan {
    fill: ${nt.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${nt.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${nt.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${nt.signalColor};
  }

  #arrowhead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .sequenceNumber {
    fill: ${nt.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${nt.signalColor};
  }

  #crosshead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .messageText {
    fill: ${nt.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${nt.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${nt.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${nt.noteBorderColor};
    fill: ${nt.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${nt.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation1 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation2 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${nt.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
    stroke-width: 2px;
  }
`,sequenceStyles=getStyles$6,getStyles$5=nt=>`
defs #statediagram-barbEnd {
    fill: ${nt.transitionColor};
    stroke: ${nt.transitionColor};
  }
g.stateGroup text {
  fill: ${nt.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${nt.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${nt.stateLabelColor};
}

g.stateGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.stateGroup line {
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${nt.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${nt.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${nt.noteBorderColor};
  fill: ${nt.noteBkgColor};

  text {
    fill: ${nt.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${nt.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}

.stateLabel text {
  fill: ${nt.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node .fork-join {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node circle.state-end {
  fill: ${nt.innerEndBackground};
  stroke: ${nt.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${nt.compositeBackground||nt.background};
  // stroke: ${nt.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${nt.stateBkg||nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${nt.lineColor};
}

.statediagram-cluster rect {
  fill: ${nt.compositeTitleBackground};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${nt.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${nt.stateBorder||nt.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${nt.compositeBackground||nt.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${nt.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${nt.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${nt.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${nt.lineColor};
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,stateStyles=getStyles$5,getStyles$4=nt=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${nt.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${nt.textColor}
  }

  .legend {
    fill: ${nt.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${nt.textColor}
  }

  .face {
    ${nt.faceColor?`fill: ${nt.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${nt.fillType0?`fill: ${nt.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${nt.fillType0?`fill: ${nt.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${nt.fillType0?`fill: ${nt.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${nt.fillType0?`fill: ${nt.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${nt.fillType0?`fill: ${nt.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${nt.fillType0?`fill: ${nt.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${nt.fillType0?`fill: ${nt.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${nt.fillType0?`fill: ${nt.fillType7}`:""};
  }

  .actor-0 {
    ${nt.actor0?`fill: ${nt.actor0}`:""};
  }
  .actor-1 {
    ${nt.actor1?`fill: ${nt.actor1}`:""};
  }
  .actor-2 {
    ${nt.actor2?`fill: ${nt.actor2}`:""};
  }
  .actor-3 {
    ${nt.actor3?`fill: ${nt.actor3}`:""};
  }
  .actor-4 {
    ${nt.actor4?`fill: ${nt.actor4}`:""};
  }
  .actor-5 {
    ${nt.actor5?`fill: ${nt.actor5}`:""};
  }
`,journeyStyles=getStyles$4,getStyles$3=nt=>`.person {
    stroke: ${nt.personBorder};
    fill: ${nt.personBkg};
  }
`,c4Styles=getStyles$3,themes={flowchart:flowStyles,"flowchart-v2":flowStyles,sequence:sequenceStyles,gantt:ganttStyles,classDiagram:classStyles,"classDiagram-v2":classStyles,class:classStyles,stateDiagram:stateStyles,state:stateStyles,info:infoStyles,pie:pieStyles,er:erStyles,error:errorStyles,journey:journeyStyles,requirement:requirementStyles,c4:c4Styles},getStyles$1=(nt,rt,it)=>{let st="";return nt in themes&&themes[nt]?st=themes[nt](it):log$1.warn(`No theme found for ${nt}`),` & {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
    fill: ${it.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${it.errorBkgColor};
  }
  & .error-text {
    fill: ${it.errorTextColor};
    stroke: ${it.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${it.lineColor};
    stroke: ${it.lineColor};
  }
  & .marker.cross {
    stroke: ${it.lineColor};
  }

  & svg {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
  }

  ${st}

  ${rt}
`},addStylesForDiagram=(nt,rt)=>{themes[nt]=rt},getStyles$2=getStyles$1;let title$1="",diagramTitle="",description="";const sanitizeText$4=nt=>sanitizeText$5(nt,getConfig$1()),clear$g=function(){title$1="",description="",diagramTitle=""},setAccTitle=function(nt){title$1=sanitizeText$4(nt).replace(/^\s+/g,"")},getAccTitle=function(){return title$1||diagramTitle},setAccDescription=function(nt){description=sanitizeText$4(nt).replace(/\n\s+/g,`
`)},getAccDescription=function(){return description},setDiagramTitle=function(nt){diagramTitle=sanitizeText$4(nt)},getDiagramTitle=function(){return diagramTitle},commonDb={setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,getAccDescription,setAccDescription,clear:clear$g},commonDb$1=Object.freeze(Object.defineProperty({__proto__:null,clear:clear$g,default:commonDb,getAccDescription,getAccTitle,getDiagramTitle,setAccDescription,setAccTitle,setDiagramTitle},Symbol.toStringTag,{value:"Module"}));let currentDirective={};const parseDirective$c=function(nt,rt,it,st){log$1.debug("parseDirective is being called",rt,it,st);try{if(rt!==void 0)switch(rt=rt.trim(),it){case"open_directive":currentDirective={};break;case"type_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.type=rt.toLowerCase();break;case"arg_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.args=JSON.parse(rt);break;case"close_directive":handleDirective(nt,currentDirective,st),currentDirective=void 0;break}}catch(bt){log$1.error(`Error while rendering sequenceDiagram directive: ${rt} jison context: ${it}`),log$1.error(bt.message)}},handleDirective=function(nt,rt,it){switch(log$1.info(`Directive type=${rt.type} with args:`,rt.args),rt.type){case"init":case"initialize":{["config"].forEach(st=>{rt.args[st]!==void 0&&(it==="flowchart-v2"&&(it="flowchart"),rt.args[it]=rt.args[st],delete rt.args[st])}),log$1.info("sanitize in handleDirective",rt.args),directiveSanitizer(rt.args),log$1.info("sanitize in handleDirective (done)",rt.args),addDirective(rt.args);break}case"wrap":case"nowrap":nt&&nt.setWrap&&nt.setWrap(rt.type==="wrap");break;case"themeCss":log$1.warn("themeCss encountered");break;default:log$1.warn(`Unhandled directive: source: '%%{${rt.type}: ${JSON.stringify(rt.args?rt.args:{})}}%%`,rt);break}},log=log$1,setLogLevel=setLogLevel$1,getConfig=getConfig$1,sanitizeText$3=nt=>sanitizeText$5(nt,getConfig()),setupGraphViewbox=setupGraphViewbox$1,getCommonDb=()=>commonDb$1,parseDirective$b=(nt,rt,it,st)=>parseDirective$c(nt,rt,it,st),diagrams={},registerDiagram=(nt,rt,it)=>{if(diagrams[nt])throw new Error(`Diagram ${nt} already registered.`);diagrams[nt]=rt,it&&addDetector(nt,it),addStylesForDiagram(nt,rt.styles),rt.injectUtils&&rt.injectUtils(log,setLogLevel,getConfig,sanitizeText$3,setupGraphViewbox,getCommonDb(),parseDirective$b)},getDiagram=nt=>{if(nt in diagrams)return diagrams[nt];throw new Error(`Diagram ${nt} not found.`)};var parser$c=function(){var nt=function(An,kn,Mn,$n){for(Mn=Mn||{},$n=An.length;$n--;Mn[An[$n]]=kn);return Mn},rt=[1,4],it=[1,7],st=[1,5],bt=[1,9],xt=[1,6],Et=[2,6],kt=[1,16],Lt=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],Pt=[8,14,20,22,24,25,27,29,32,37,40],Rt=[8,13,14,20,22,24,25,27,29,32,37,40],Dt=[1,26],Bt=[6,8,14,50,55],Ft=[8,14,55],Yt=[1,53],Zt=[1,52],Wt=[8,14,30,33,35,38,55],Qt=[1,67],Kt=[1,68],on=[1,69],nn=[8,14,33,35,42,55],mn={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(kn,Mn,$n,cn,Sn,an,jn){var hn=an.length-1;switch(Sn){case 3:return an[hn];case 4:return an[hn-1];case 5:return cn.setDirection(an[hn-3]),an[hn-1];case 7:cn.setOptions(an[hn-1]),this.$=an[hn];break;case 8:an[hn-1]+=an[hn],this.$=an[hn-1];break;case 10:this.$=[];break;case 11:an[hn-1].push(an[hn]),this.$=an[hn-1];break;case 12:this.$=an[hn-1];break;case 17:this.$=an[hn].trim(),cn.setAccTitle(this.$);break;case 18:case 19:this.$=an[hn].trim(),cn.setAccDescription(this.$);break;case 20:cn.addSection(an[hn].substr(8)),this.$=an[hn].substr(8);break;case 22:cn.checkout(an[hn]);break;case 23:cn.branch(an[hn]);break;case 24:cn.branch(an[hn-2],an[hn]);break;case 25:cn.cherryPick(an[hn],"",void 0);break;case 26:cn.cherryPick(an[hn-2],"",an[hn]);break;case 27:case 29:cn.cherryPick(an[hn-2],"","");break;case 28:cn.cherryPick(an[hn],"",an[hn-2]);break;case 30:cn.merge(an[hn],"","","");break;case 31:cn.merge(an[hn-2],an[hn],"","");break;case 32:cn.merge(an[hn-2],"",an[hn],"");break;case 33:cn.merge(an[hn-2],"","",an[hn]);break;case 34:cn.merge(an[hn-4],an[hn],"",an[hn-2]);break;case 35:cn.merge(an[hn-4],"",an[hn],an[hn-2]);break;case 36:cn.merge(an[hn-4],"",an[hn-2],an[hn]);break;case 37:cn.merge(an[hn-4],an[hn-2],an[hn],"");break;case 38:cn.merge(an[hn-4],an[hn-2],"",an[hn]);break;case 39:cn.merge(an[hn-4],an[hn],an[hn-2],"");break;case 40:cn.merge(an[hn-6],an[hn-4],an[hn-2],an[hn]);break;case 41:cn.merge(an[hn-6],an[hn],an[hn-4],an[hn-2]);break;case 42:cn.merge(an[hn-6],an[hn-4],an[hn],an[hn-2]);break;case 43:cn.merge(an[hn-6],an[hn-2],an[hn-4],an[hn]);break;case 44:cn.merge(an[hn-6],an[hn],an[hn-2],an[hn-4]);break;case 45:cn.merge(an[hn-6],an[hn-2],an[hn],an[hn-4]);break;case 46:cn.commit(an[hn]);break;case 47:cn.commit("","",cn.commitType.NORMAL,an[hn]);break;case 48:cn.commit("","",an[hn],"");break;case 49:cn.commit("","",an[hn],an[hn-2]);break;case 50:cn.commit("","",an[hn-2],an[hn]);break;case 51:cn.commit("",an[hn],cn.commitType.NORMAL,"");break;case 52:cn.commit("",an[hn-2],cn.commitType.NORMAL,an[hn]);break;case 53:cn.commit("",an[hn],cn.commitType.NORMAL,an[hn-2]);break;case 54:cn.commit("",an[hn-2],an[hn],"");break;case 55:cn.commit("",an[hn],an[hn-2],"");break;case 56:cn.commit("",an[hn-4],an[hn-2],an[hn]);break;case 57:cn.commit("",an[hn-4],an[hn],an[hn-2]);break;case 58:cn.commit("",an[hn-2],an[hn-4],an[hn]);break;case 59:cn.commit("",an[hn],an[hn-4],an[hn-2]);break;case 60:cn.commit("",an[hn],an[hn-2],an[hn-4]);break;case 61:cn.commit("",an[hn-2],an[hn],an[hn-4]);break;case 62:cn.commit(an[hn],"",cn.commitType.NORMAL,"");break;case 63:cn.commit(an[hn],"",cn.commitType.NORMAL,an[hn-2]);break;case 64:cn.commit(an[hn-2],"",cn.commitType.NORMAL,an[hn]);break;case 65:cn.commit(an[hn-2],"",an[hn],"");break;case 66:cn.commit(an[hn],"",an[hn-2],"");break;case 67:cn.commit(an[hn],an[hn-2],cn.commitType.NORMAL,"");break;case 68:cn.commit(an[hn-2],an[hn],cn.commitType.NORMAL,"");break;case 69:cn.commit(an[hn-4],"",an[hn-2],an[hn]);break;case 70:cn.commit(an[hn-4],"",an[hn],an[hn-2]);break;case 71:cn.commit(an[hn-2],"",an[hn-4],an[hn]);break;case 72:cn.commit(an[hn],"",an[hn-4],an[hn-2]);break;case 73:cn.commit(an[hn],"",an[hn-2],an[hn-4]);break;case 74:cn.commit(an[hn-2],"",an[hn],an[hn-4]);break;case 75:cn.commit(an[hn-4],an[hn],an[hn-2],"");break;case 76:cn.commit(an[hn-4],an[hn-2],an[hn],"");break;case 77:cn.commit(an[hn-2],an[hn],an[hn-4],"");break;case 78:cn.commit(an[hn],an[hn-2],an[hn-4],"");break;case 79:cn.commit(an[hn],an[hn-4],an[hn-2],"");break;case 80:cn.commit(an[hn-2],an[hn-4],an[hn],"");break;case 81:cn.commit(an[hn-4],an[hn],cn.commitType.NORMAL,an[hn-2]);break;case 82:cn.commit(an[hn-4],an[hn-2],cn.commitType.NORMAL,an[hn]);break;case 83:cn.commit(an[hn-2],an[hn],cn.commitType.NORMAL,an[hn-4]);break;case 84:cn.commit(an[hn],an[hn-2],cn.commitType.NORMAL,an[hn-4]);break;case 85:cn.commit(an[hn],an[hn-4],cn.commitType.NORMAL,an[hn-2]);break;case 86:cn.commit(an[hn-2],an[hn-4],cn.commitType.NORMAL,an[hn]);break;case 87:cn.commit(an[hn-6],an[hn-4],an[hn-2],an[hn]);break;case 88:cn.commit(an[hn-6],an[hn-4],an[hn],an[hn-2]);break;case 89:cn.commit(an[hn-6],an[hn-2],an[hn-4],an[hn]);break;case 90:cn.commit(an[hn-6],an[hn],an[hn-4],an[hn-2]);break;case 91:cn.commit(an[hn-6],an[hn-2],an[hn],an[hn-4]);break;case 92:cn.commit(an[hn-6],an[hn],an[hn-2],an[hn-4]);break;case 93:cn.commit(an[hn-4],an[hn-6],an[hn-2],an[hn]);break;case 94:cn.commit(an[hn-4],an[hn-6],an[hn],an[hn-2]);break;case 95:cn.commit(an[hn-2],an[hn-6],an[hn-4],an[hn]);break;case 96:cn.commit(an[hn],an[hn-6],an[hn-4],an[hn-2]);break;case 97:cn.commit(an[hn-2],an[hn-6],an[hn],an[hn-4]);break;case 98:cn.commit(an[hn],an[hn-6],an[hn-2],an[hn-4]);break;case 99:cn.commit(an[hn],an[hn-4],an[hn-2],an[hn-6]);break;case 100:cn.commit(an[hn-2],an[hn-4],an[hn],an[hn-6]);break;case 101:cn.commit(an[hn],an[hn-2],an[hn-4],an[hn-6]);break;case 102:cn.commit(an[hn-2],an[hn],an[hn-4],an[hn-6]);break;case 103:cn.commit(an[hn-4],an[hn-2],an[hn],an[hn-6]);break;case 104:cn.commit(an[hn-4],an[hn],an[hn-2],an[hn-6]);break;case 105:cn.commit(an[hn-2],an[hn-4],an[hn-6],an[hn]);break;case 106:cn.commit(an[hn],an[hn-4],an[hn-6],an[hn-2]);break;case 107:cn.commit(an[hn-2],an[hn],an[hn-6],an[hn-4]);break;case 108:cn.commit(an[hn],an[hn-2],an[hn-6],an[hn-4]);break;case 109:cn.commit(an[hn-4],an[hn-2],an[hn-6],an[hn]);break;case 110:cn.commit(an[hn-4],an[hn],an[hn-6],an[hn-2]);break;case 111:this.$="";break;case 112:this.$=an[hn];break;case 113:this.$=cn.commitType.NORMAL;break;case 114:this.$=cn.commitType.REVERSE;break;case 115:this.$=cn.commitType.HIGHLIGHT;break;case 118:cn.parseDirective("%%{","open_directive");break;case 119:cn.parseDirective(an[hn],"type_directive");break;case 120:an[hn]=an[hn].trim().replace(/'/g,'"'),cn.parseDirective(an[hn],"arg_directive");break;case 121:cn.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:rt,8:it,14:st,46:8,50:bt,55:xt},{1:[3]},{3:10,4:2,5:3,6:rt,8:it,14:st,46:8,50:bt,55:xt},{3:11,4:2,5:3,6:rt,8:it,14:st,46:8,50:bt,55:xt},{7:12,8:Et,9:[1,13],10:[1,14],11:15,14:kt},nt(Lt,[2,124]),nt(Lt,[2,125]),nt(Lt,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:Et,11:15,14:kt},{9:[1,21]},nt(Pt,[2,10],{12:22,13:[1,23]}),nt(Rt,[2,9]),{9:[1,25],48:24,53:Dt},nt([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:Et,11:15,14:kt},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},nt(Rt,[2,8]),nt(Bt,[2,116]),{49:45,52:[1,46]},nt(Bt,[2,121]),{1:[2,4]},{8:[1,47]},nt(Pt,[2,11]),{4:48,8:it,14:st,55:xt},nt(Pt,[2,13]),nt(Ft,[2,14]),nt(Ft,[2,15]),nt(Ft,[2,16]),{21:[1,49]},{23:[1,50]},nt(Ft,[2,19]),nt(Ft,[2,20]),nt(Ft,[2,21]),{28:51,34:Yt,54:Zt},nt(Ft,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:Yt,54:Zt},{33:[1,61],35:[1,62]},{28:63,34:Yt,54:Zt},{48:64,53:Dt},{53:[2,120]},{1:[2,5]},nt(Pt,[2,12]),nt(Ft,[2,17]),nt(Ft,[2,18]),nt(Ft,[2,22]),nt(Wt,[2,122]),nt(Wt,[2,123]),nt(Ft,[2,46]),{34:[1,65]},{39:66,43:Qt,44:Kt,45:on},{34:[1,70]},{34:[1,71]},nt(Ft,[2,112]),nt(Ft,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},nt(Ft,[2,23],{30:[1,78]}),nt(Bt,[2,117]),nt(Ft,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),nt(Ft,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),nt(nn,[2,113]),nt(nn,[2,114]),nt(nn,[2,115]),nt(Ft,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),nt(Ft,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:Qt,44:Kt,45:on},{34:[1,93]},nt(Ft,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:Qt,44:Kt,45:on},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:Qt,44:Kt,45:on},{34:[1,106]},{34:[1,107]},{39:108,43:Qt,44:Kt,45:on},{34:[1,109]},nt(Ft,[2,31],{35:[1,111],38:[1,110]}),nt(Ft,[2,32],{33:[1,113],35:[1,112]}),nt(Ft,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},nt(Ft,[2,24]),nt(Ft,[2,49],{33:[1,120],42:[1,121]}),nt(Ft,[2,53],{38:[1,122],42:[1,123]}),nt(Ft,[2,63],{33:[1,125],38:[1,124]}),nt(Ft,[2,50],{33:[1,126],42:[1,127]}),nt(Ft,[2,55],{35:[1,128],42:[1,129]}),nt(Ft,[2,66],{33:[1,131],35:[1,130]}),nt(Ft,[2,52],{38:[1,132],42:[1,133]}),nt(Ft,[2,54],{35:[1,134],42:[1,135]}),nt(Ft,[2,67],{35:[1,137],38:[1,136]}),nt(Ft,[2,64],{33:[1,139],38:[1,138]}),nt(Ft,[2,65],{33:[1,141],35:[1,140]}),nt(Ft,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:Qt,44:Kt,45:on},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:Qt,44:Kt,45:on},nt(Ft,[2,26]),nt(Ft,[2,27]),nt(Ft,[2,28]),nt(Ft,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:Qt,44:Kt,45:on},{34:[1,153]},{39:154,43:Qt,44:Kt,45:on},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:Qt,44:Kt,45:on},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:Qt,44:Kt,45:on},{34:[1,167]},{39:168,43:Qt,44:Kt,45:on},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:Qt,44:Kt,45:on},{34:[1,173]},nt(Ft,[2,37],{35:[1,174]}),nt(Ft,[2,38],{38:[1,175]}),nt(Ft,[2,36],{33:[1,176]}),nt(Ft,[2,39],{35:[1,177]}),nt(Ft,[2,34],{38:[1,178]}),nt(Ft,[2,35],{33:[1,179]}),nt(Ft,[2,60],{42:[1,180]}),nt(Ft,[2,73],{33:[1,181]}),nt(Ft,[2,61],{42:[1,182]}),nt(Ft,[2,84],{38:[1,183]}),nt(Ft,[2,74],{33:[1,184]}),nt(Ft,[2,83],{38:[1,185]}),nt(Ft,[2,59],{42:[1,186]}),nt(Ft,[2,72],{33:[1,187]}),nt(Ft,[2,58],{42:[1,188]}),nt(Ft,[2,78],{35:[1,189]}),nt(Ft,[2,71],{33:[1,190]}),nt(Ft,[2,77],{35:[1,191]}),nt(Ft,[2,57],{42:[1,192]}),nt(Ft,[2,85],{38:[1,193]}),nt(Ft,[2,56],{42:[1,194]}),nt(Ft,[2,79],{35:[1,195]}),nt(Ft,[2,80],{35:[1,196]}),nt(Ft,[2,86],{38:[1,197]}),nt(Ft,[2,70],{33:[1,198]}),nt(Ft,[2,81],{38:[1,199]}),nt(Ft,[2,69],{33:[1,200]}),nt(Ft,[2,75],{35:[1,201]}),nt(Ft,[2,76],{35:[1,202]}),nt(Ft,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:Qt,44:Kt,45:on},{34:[1,206]},{34:[1,207]},{39:208,43:Qt,44:Kt,45:on},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:Qt,44:Kt,45:on},{34:[1,214]},{39:215,43:Qt,44:Kt,45:on},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:Qt,44:Kt,45:on},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:Qt,44:Kt,45:on},{34:[1,228]},{39:229,43:Qt,44:Kt,45:on},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:Qt,44:Kt,45:on},nt(Ft,[2,40]),nt(Ft,[2,42]),nt(Ft,[2,41]),nt(Ft,[2,43]),nt(Ft,[2,45]),nt(Ft,[2,44]),nt(Ft,[2,101]),nt(Ft,[2,102]),nt(Ft,[2,99]),nt(Ft,[2,100]),nt(Ft,[2,104]),nt(Ft,[2,103]),nt(Ft,[2,108]),nt(Ft,[2,107]),nt(Ft,[2,106]),nt(Ft,[2,105]),nt(Ft,[2,110]),nt(Ft,[2,109]),nt(Ft,[2,98]),nt(Ft,[2,97]),nt(Ft,[2,96]),nt(Ft,[2,95]),nt(Ft,[2,93]),nt(Ft,[2,94]),nt(Ft,[2,92]),nt(Ft,[2,91]),nt(Ft,[2,90]),nt(Ft,[2,89]),nt(Ft,[2,87]),nt(Ft,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(kn,Mn){if(Mn.recoverable)this.trace(kn);else{var $n=new Error(kn);throw $n.hash=Mn,$n}},parse:function(kn){var Mn=this,$n=[0],cn=[],Sn=[null],an=[],jn=this.table,hn="",zn=0,ir=0,tr=2,nr=1,dr=an.slice.call(arguments,1),or=Object.create(this.lexer),ur={yy:{}};for(var Cr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Cr)&&(ur.yy[Cr]=this.yy[Cr]);or.setInput(kn,ur.yy),ur.yy.lexer=or,ur.yy.parser=this,typeof or.yylloc>"u"&&(or.yylloc={});var Sr=or.yylloc;an.push(Sr);var rr=or.options&&or.options.ranges;typeof ur.yy.parseError=="function"?this.parseError=ur.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Fr(){var hr;return hr=cn.pop()||or.lex()||nr,typeof hr!="number"&&(hr instanceof Array&&(cn=hr,hr=cn.pop()),hr=Mn.symbols_[hr]||hr),hr}for(var mr,_r,yr,pr,Cn={},rn,dn,fn,On;;){if(_r=$n[$n.length-1],this.defaultActions[_r]?yr=this.defaultActions[_r]:((mr===null||typeof mr>"u")&&(mr=Fr()),yr=jn[_r]&&jn[_r][mr]),typeof yr>"u"||!yr.length||!yr[0]){var xn="";On=[];for(rn in jn[_r])this.terminals_[rn]&&rn>tr&&On.push("'"+this.terminals_[rn]+"'");or.showPosition?xn="Parse error on line "+(zn+1)+`:
`+or.showPosition()+`
Expecting `+On.join(", ")+", got '"+(this.terminals_[mr]||mr)+"'":xn="Parse error on line "+(zn+1)+": Unexpected "+(mr==nr?"end of input":"'"+(this.terminals_[mr]||mr)+"'"),this.parseError(xn,{text:or.match,token:this.terminals_[mr]||mr,line:or.yylineno,loc:Sr,expected:On})}if(yr[0]instanceof Array&&yr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_r+", token: "+mr);switch(yr[0]){case 1:$n.push(mr),Sn.push(or.yytext),an.push(or.yylloc),$n.push(yr[1]),mr=null,ir=or.yyleng,hn=or.yytext,zn=or.yylineno,Sr=or.yylloc;break;case 2:if(dn=this.productions_[yr[1]][1],Cn.$=Sn[Sn.length-dn],Cn._$={first_line:an[an.length-(dn||1)].first_line,last_line:an[an.length-1].last_line,first_column:an[an.length-(dn||1)].first_column,last_column:an[an.length-1].last_column},rr&&(Cn._$.range=[an[an.length-(dn||1)].range[0],an[an.length-1].range[1]]),pr=this.performAction.apply(Cn,[hn,ir,zn,ur.yy,yr[1],Sn,an].concat(dr)),typeof pr<"u")return pr;dn&&($n=$n.slice(0,-1*dn*2),Sn=Sn.slice(0,-1*dn),an=an.slice(0,-1*dn)),$n.push(this.productions_[yr[1]][0]),Sn.push(Cn.$),an.push(Cn._$),fn=jn[$n[$n.length-2]][$n[$n.length-1]],$n.push(fn);break;case 3:return!0}}return!0}},gn=function(){var An={EOF:1,parseError:function(Mn,$n){if(this.yy.parser)this.yy.parser.parseError(Mn,$n);else throw new Error(Mn)},setInput:function(kn,Mn){return this.yy=Mn||this.yy||{},this._input=kn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var kn=this._input[0];this.yytext+=kn,this.yyleng++,this.offset++,this.match+=kn,this.matched+=kn;var Mn=kn.match(/(?:\r\n?|\n).*/g);return Mn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),kn},unput:function(kn){var Mn=kn.length,$n=kn.split(/(?:\r\n?|\n)/g);this._input=kn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Mn),this.offset-=Mn;var cn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),$n.length-1&&(this.yylineno-=$n.length-1);var Sn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$n?($n.length===cn.length?this.yylloc.first_column:0)+cn[cn.length-$n.length].length-$n[0].length:this.yylloc.first_column-Mn},this.options.ranges&&(this.yylloc.range=[Sn[0],Sn[0]+this.yyleng-Mn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(kn){this.unput(this.match.slice(kn))},pastInput:function(){var kn=this.matched.substr(0,this.matched.length-this.match.length);return(kn.length>20?"...":"")+kn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var kn=this.match;return kn.length<20&&(kn+=this._input.substr(0,20-kn.length)),(kn.substr(0,20)+(kn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var kn=this.pastInput(),Mn=new Array(kn.length+1).join("-");return kn+this.upcomingInput()+`
`+Mn+"^"},test_match:function(kn,Mn){var $n,cn,Sn;if(this.options.backtrack_lexer&&(Sn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Sn.yylloc.range=this.yylloc.range.slice(0))),cn=kn[0].match(/(?:\r\n?|\n).*/g),cn&&(this.yylineno+=cn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:cn?cn[cn.length-1].length-cn[cn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+kn[0].length},this.yytext+=kn[0],this.match+=kn[0],this.matches=kn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(kn[0].length),this.matched+=kn[0],$n=this.performAction.call(this,this.yy,this,Mn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),$n)return $n;if(this._backtrack){for(var an in Sn)this[an]=Sn[an];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var kn,Mn,$n,cn;this._more||(this.yytext="",this.match="");for(var Sn=this._currentRules(),an=0;an<Sn.length;an++)if($n=this._input.match(this.rules[Sn[an]]),$n&&(!Mn||$n[0].length>Mn[0].length)){if(Mn=$n,cn=an,this.options.backtrack_lexer){if(kn=this.test_match($n,Sn[an]),kn!==!1)return kn;if(this._backtrack){Mn=!1;continue}else return!1}else if(!this.options.flex)break}return Mn?(kn=this.test_match(Mn,Sn[cn]),kn!==!1?kn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Mn=this.next();return Mn||this.lex()},begin:function(Mn){this.conditionStack.push(Mn)},popState:function(){var Mn=this.conditionStack.length-1;return Mn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Mn){return Mn=this.conditionStack.length-1-Math.abs(Mn||0),Mn>=0?this.conditionStack[Mn]:"INITIAL"},pushState:function(Mn){this.begin(Mn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Mn,$n,cn,Sn){switch(cn){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return An}();mn.lexer=gn;function Tn(){this.yy={}}return Tn.prototype=mn,mn.Parser=Tn,new Tn}();parser$c.parser=parser$c;const gitGraphParser=parser$c,gitGraphDetector=nt=>nt.match(/^\s*gitGraph/)!==null;let mainBranchName=getConfig$1().gitGraph.mainBranchName,mainBranchOrder=getConfig$1().gitGraph.mainBranchOrder,commits={},head=null,branchesConfig={};branchesConfig[mainBranchName]={name:mainBranchName,order:mainBranchOrder};let branches={};branches[mainBranchName]=head;let curBranch=mainBranchName,direction$3="LR",seq=0;function getId(){return random({length:7})}const parseDirective$a=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)};function uniqBy(nt,rt){const it=Object.create(null);return nt.reduce((st,bt)=>{const xt=rt(bt);return it[xt]||(it[xt]=!0,st.push(bt)),st},[])}const setDirection$3=function(nt){direction$3=nt};let options={};const setOptions=function(nt){log$1.debug("options str",nt),nt=nt&&nt.trim(),nt=nt||"{}";try{options=JSON.parse(nt)}catch(rt){log$1.error("error while parsing gitGraph options",rt.message)}},getOptions=function(){return options},commit=function(nt,rt,it,st){log$1.debug("Entering commit:",nt,rt,it,st),rt=common$1.sanitizeText(rt,getConfig$1()),nt=common$1.sanitizeText(nt,getConfig$1()),st=common$1.sanitizeText(st,getConfig$1());const bt={id:rt||seq+"-"+getId(),message:nt,seq:seq++,type:it||commitType$1.NORMAL,tag:st||"",parents:head==null?[]:[head.id],branch:curBranch};head=bt,commits[bt.id]=bt,branches[curBranch]=bt.id,log$1.debug("in pushCommit "+bt.id)},branch=function(nt,rt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0)branches[nt]=head!=null?head.id:null,branchesConfig[nt]={name:nt,order:rt?parseInt(rt,10):null},checkout(nt),log$1.debug("in createBranch");else{let it=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+nt+'")');throw it.hash={text:"branch "+nt,token:"branch "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+nt+'"']},it}},merge=function(nt,rt,it,st){nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1());const bt=commits[branches[curBranch]],xt=commits[branches[nt]];if(curBranch===nt){let kt=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(bt===void 0||!bt){let kt=new Error('Incorrect usage of "merge". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},kt}else if(branches[nt]===void 0){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") does not exist");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+nt]},kt}else if(xt===void 0||!xt){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},kt}else if(bt===xt){let kt=new Error('Incorrect usage of "merge". Both branches have same head');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(rt&&commits[rt]!==void 0){let kt=new Error('Incorrect usage of "merge". Commit with id:'+rt+" already exists, use different custom Id");throw kt.hash={text:"merge "+nt+rt+it+st,token:"merge "+nt+rt+it+st,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+nt+" "+rt+"_UNIQUE "+it+" "+st]},kt}const Et={id:rt||seq+"-"+getId(),message:"merged branch "+nt+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,branches[nt]],branch:curBranch,type:commitType$1.MERGE,customType:it,customId:!!rt,tag:st||""};head=Et,commits[Et.id]=Et,branches[curBranch]=Et.id,log$1.debug(branches),log$1.debug("in mergeBranch")},cherryPick=function(nt,rt,it){if(log$1.debug("Entering cherryPick:",nt,rt,it),nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1()),it=common$1.sanitizeText(it,getConfig$1()),!nt||commits[nt]===void 0){let xt=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw xt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},xt}let st=commits[nt],bt=st.branch;if(st.type===commitType$1.MERGE){let xt=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw xt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},xt}if(!rt||commits[rt]===void 0){if(bt===curBranch){let kt=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const xt=commits[branches[curBranch]];if(xt===void 0||!xt){let kt=new Error('Incorrect usage of "cherry-pick". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const Et={id:seq+"-"+getId(),message:"cherry-picked "+st+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,st.id],branch:curBranch,type:commitType$1.CHERRY_PICK,tag:it!=null?it:"cherry-pick:"+st.id};head=Et,commits[Et.id]=Et,branches[curBranch]=Et.id,log$1.debug(branches),log$1.debug("in cherryPick")}},checkout=function(nt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0){let rt=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+nt+'")');throw rt.hash={text:"checkout "+nt,token:"checkout "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+nt+'"']},rt}else{curBranch=nt;const rt=branches[curBranch];head=commits[rt]}};function upsert(nt,rt,it){const st=nt.indexOf(rt);st===-1?nt.push(it):nt.splice(st,1,it)}function prettyPrintCommitHistory(nt){const rt=nt.reduce((bt,xt)=>bt.seq>xt.seq?bt:xt,nt[0]);let it="";nt.forEach(function(bt){bt===rt?it+="	*":it+="	|"});const st=[it,rt.id,rt.seq];for(let bt in branches)branches[bt]===rt.id&&st.push(bt);if(log$1.debug(st.join(" ")),rt.parents&&rt.parents.length==2){const bt=commits[rt.parents[0]];upsert(nt,rt,bt),nt.push(commits[rt.parents[1]])}else{if(rt.parents.length==0)return;{const bt=commits[rt.parents];upsert(nt,rt,bt)}}nt=uniqBy(nt,bt=>bt.id),prettyPrintCommitHistory(nt)}const prettyPrint=function(){log$1.debug(commits);const nt=getCommitsArray()[0];prettyPrintCommitHistory([nt])},clear$f=function(){commits={},head=null;let nt=getConfig$1().gitGraph.mainBranchName,rt=getConfig$1().gitGraph.mainBranchOrder;branches={},branches[nt]=null,branchesConfig={},branchesConfig[nt]={name:nt,order:rt},curBranch=nt,seq=0,clear$g()},getBranchesAsObjArray=function(){return Object.values(branchesConfig).map((rt,it)=>rt.order!==null?rt:{...rt,order:parseFloat(`0.${it}`,10)}).sort((rt,it)=>rt.order-it.order).map(({name:rt})=>({name:rt}))},getBranches=function(){return branches},getCommits=function(){return commits},getCommitsArray=function(){const nt=Object.keys(commits).map(function(rt){return commits[rt]});return nt.forEach(function(rt){log$1.debug(rt.id)}),nt.sort((rt,it)=>rt.seq-it.seq),nt},getCurrentBranch=function(){return curBranch},getDirection$3=function(){return direction$3},getHead=function(){return head},commitType$1={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},gitGraphDb={parseDirective:parseDirective$a,getConfig:()=>getConfig$1().gitGraph,setDirection:setDirection$3,setOptions,getOptions,commit,branch,merge,cherryPick,checkout,prettyPrint,clear:clear$f,getBranchesAsObjArray,getBranches,getCommits,getCommitsArray,getCurrentBranch,getDirection:getDirection$3,getHead,setAccTitle,getAccTitle,getAccDescription,setAccDescription,setDiagramTitle,getDiagramTitle,commitType:commitType$1};let allCommitsDict={};const commitType={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},THEME_COLOR_LIMIT=8;let branchPos={},commitPos={},lanes=[],maxPos=0;const clear$e=()=>{branchPos={},commitPos={},allCommitsDict={},maxPos=0,lanes=[]},drawText$2=nt=>{const rt=document.createElementNS("http://www.w3.org/2000/svg","text");let it=[];typeof nt=="string"?it=nt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(nt)?it=nt:it=[];for(const st of it){const bt=document.createElementNS("http://www.w3.org/2000/svg","tspan");bt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),bt.setAttribute("dy","1em"),bt.setAttribute("x","0"),bt.setAttribute("class","row"),bt.textContent=st.trim(),rt.appendChild(bt)}return rt},drawCommits=(nt,rt,it)=>{const st=getConfig().gitGraph,bt=nt.append("g").attr("class","commit-bullets"),xt=nt.append("g").attr("class","commit-labels");let Et=0;Object.keys(rt).sort((Pt,Rt)=>rt[Pt].seq-rt[Rt].seq).forEach(Pt=>{const Rt=rt[Pt],Dt=branchPos[Rt.branch].pos,Bt=Et+10;if(it){let Ft,Yt=Rt.customType!==void 0&&Rt.customType!==""?Rt.customType:Rt.type;switch(Yt){case commitType.NORMAL:Ft="commit-normal";break;case commitType.REVERSE:Ft="commit-reverse";break;case commitType.HIGHLIGHT:Ft="commit-highlight";break;case commitType.MERGE:Ft="commit-merge";break;case commitType.CHERRY_PICK:Ft="commit-cherry-pick";break;default:Ft="commit-normal"}if(Yt===commitType.HIGHLIGHT){const Zt=bt.append("rect");Zt.attr("x",Bt-10),Zt.attr("y",Dt-10),Zt.attr("height",20),Zt.attr("width",20),Zt.attr("class",`commit ${Rt.id} commit-highlight${branchPos[Rt.branch].index%THEME_COLOR_LIMIT} ${Ft}-outer`),bt.append("rect").attr("x",Bt-6).attr("y",Dt-6).attr("height",12).attr("width",12).attr("class",`commit ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT} ${Ft}-inner`)}else if(Yt===commitType.CHERRY_PICK)bt.append("circle").attr("cx",Bt).attr("cy",Dt).attr("r",10).attr("class",`commit ${Rt.id} ${Ft}`),bt.append("circle").attr("cx",Bt-3).attr("cy",Dt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Rt.id} ${Ft}`),bt.append("circle").attr("cx",Bt+3).attr("cy",Dt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Rt.id} ${Ft}`),bt.append("line").attr("x1",Bt+3).attr("y1",Dt+1).attr("x2",Bt).attr("y2",Dt-5).attr("stroke","#fff").attr("class",`commit ${Rt.id} ${Ft}`),bt.append("line").attr("x1",Bt-3).attr("y1",Dt+1).attr("x2",Bt).attr("y2",Dt-5).attr("stroke","#fff").attr("class",`commit ${Rt.id} ${Ft}`);else{const Zt=bt.append("circle");if(Zt.attr("cx",Bt),Zt.attr("cy",Dt),Zt.attr("r",Rt.type===commitType.MERGE?9:10),Zt.attr("class",`commit ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`),Yt===commitType.MERGE){const Wt=bt.append("circle");Wt.attr("cx",Bt),Wt.attr("cy",Dt),Wt.attr("r",6),Wt.attr("class",`commit ${Ft} ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`)}Yt===commitType.REVERSE&&bt.append("path").attr("d",`M ${Bt-5},${Dt-5}L${Bt+5},${Dt+5}M${Bt-5},${Dt+5}L${Bt+5},${Dt-5}`).attr("class",`commit ${Ft} ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`)}}if(commitPos[Rt.id]={x:Et+10,y:Dt},it){if(Rt.type!==commitType.CHERRY_PICK&&(Rt.customId&&Rt.type===commitType.MERGE||Rt.type!==commitType.MERGE)&&st.showCommitLabel){const Zt=xt.append("g"),Wt=Zt.insert("rect").attr("class","commit-label-bkg"),Qt=Zt.append("text").attr("x",Et).attr("y",Dt+25).attr("class","commit-label").text(Rt.id);let Kt=Qt.node().getBBox();if(Wt.attr("x",Et+10-Kt.width/2-2).attr("y",Dt+13.5).attr("width",Kt.width+2*2).attr("height",Kt.height+2*2),Qt.attr("x",Et+10-Kt.width/2),st.rotateCommitLabel){let on=-7.5-(Kt.width+10)/25*9.5,nn=10+Kt.width/25*8.5;Zt.attr("transform","translate("+on+", "+nn+") rotate("+-45+", "+Et+", "+Dt+")")}}if(Rt.tag){const Zt=xt.insert("polygon"),Wt=xt.append("circle"),Qt=xt.append("text").attr("y",Dt-16).attr("class","tag-label").text(Rt.tag);let Kt=Qt.node().getBBox();Qt.attr("x",Et+10-Kt.width/2);const on=Kt.height/2,nn=Dt-19.2;Zt.attr("class","tag-label-bkg").attr("points",`
          ${Et-Kt.width/2-4/2},${nn+2}
          ${Et-Kt.width/2-4/2},${nn-2}
          ${Et+10-Kt.width/2-4},${nn-on-2}
          ${Et+10+Kt.width/2+4},${nn-on-2}
          ${Et+10+Kt.width/2+4},${nn+on+2}
          ${Et+10-Kt.width/2-4},${nn+on+2}`),Wt.attr("cx",Et-Kt.width/2+4/2).attr("cy",nn).attr("r",1.5).attr("class","tag-hole")}}Et+=50,Et>maxPos&&(maxPos=Et)})},hasOverlappingCommits=(nt,rt,it)=>Object.keys(it).filter(xt=>it[xt].branch===rt.branch&&it[xt].seq>nt.seq&&it[xt].seq<rt.seq).length>0,findLane=(nt,rt,it=0)=>{const st=nt+Math.abs(nt-rt)/2;if(it>5)return st;if(lanes.every(Et=>Math.abs(Et-st)>=10))return lanes.push(st),st;const xt=Math.abs(nt-rt);return findLane(nt,rt-xt/5,it+1)},drawArrow=(nt,rt,it,st)=>{const bt=commitPos[rt.id],xt=commitPos[it.id],Et=hasOverlappingCommits(rt,it,st);let kt="",Lt="",Pt=0,Rt=0,Dt=branchPos[it.branch].index,Bt;if(Et){kt="A 10 10, 0, 0, 0,",Lt="A 10 10, 0, 0, 1,",Pt=10,Rt=10,Dt=branchPos[it.branch].index;const Ft=bt.y<xt.y?findLane(bt.y,xt.y):findLane(xt.y,bt.y);bt.y<xt.y?Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${Ft-Pt} ${kt} ${bt.x+Rt} ${Ft} L ${xt.x-Pt} ${Ft} ${Lt} ${xt.x} ${Ft+Rt} L ${xt.x} ${xt.y}`:Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${Ft+Pt} ${Lt} ${bt.x+Rt} ${Ft} L ${xt.x-Pt} ${Ft} ${kt} ${xt.x} ${Ft-Rt} L ${xt.x} ${xt.y}`}else bt.y<xt.y&&(kt="A 20 20, 0, 0, 0,",Pt=20,Rt=20,Dt=branchPos[it.branch].index,Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${xt.y-Pt} ${kt} ${bt.x+Rt} ${xt.y} L ${xt.x} ${xt.y}`),bt.y>xt.y&&(kt="A 20 20, 0, 0, 0,",Pt=20,Rt=20,Dt=branchPos[rt.branch].index,Bt=`M ${bt.x} ${bt.y} L ${xt.x-Pt} ${bt.y} ${kt} ${xt.x} ${bt.y-Rt} L ${xt.x} ${xt.y}`),bt.y===xt.y&&(Dt=branchPos[rt.branch].index,Bt=`M ${bt.x} ${bt.y} L ${bt.x} ${xt.y-Pt} ${kt} ${bt.x+Rt} ${xt.y} L ${xt.x} ${xt.y}`);nt.append("path").attr("d",Bt).attr("class","arrow arrow"+Dt%THEME_COLOR_LIMIT)},drawArrows=(nt,rt)=>{const it=nt.append("g").attr("class","commit-arrows");Object.keys(rt).forEach(st=>{const bt=rt[st];bt.parents&&bt.parents.length>0&&bt.parents.forEach(xt=>{drawArrow(it,rt[xt],bt,rt)})})},drawBranches=(nt,rt)=>{const it=getConfig().gitGraph,st=nt.append("g");rt.forEach((bt,xt)=>{const Et=xt%THEME_COLOR_LIMIT,kt=branchPos[bt.name].pos,Lt=st.append("line");Lt.attr("x1",0),Lt.attr("y1",kt),Lt.attr("x2",maxPos),Lt.attr("y2",kt),Lt.attr("class","branch branch"+Et),lanes.push(kt);let Pt=bt.name;const Rt=drawText$2(Pt),Dt=st.insert("rect"),Ft=st.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+Et);Ft.node().appendChild(Rt);let Yt=Rt.getBBox();Dt.attr("class","branchLabelBkg label"+Et).attr("rx",4).attr("ry",4).attr("x",-Yt.width-4-(it.rotateCommitLabel===!0?30:0)).attr("y",-Yt.height/2+8).attr("width",Yt.width+18).attr("height",Yt.height+4),Ft.attr("transform","translate("+(-Yt.width-14-(it.rotateCommitLabel===!0?30:0))+", "+(kt-Yt.height/2-1)+")"),Dt.attr("transform","translate("+-19+", "+(kt-Yt.height/2)+")")})},draw$f=function(nt,rt,it,st){var Pt;clear$e();const bt=getConfig(),xt=bt.gitGraph;log$1.debug("in gitgraph renderer",nt+`
`,"id:",rt,it),allCommitsDict=st.db.getCommits();const Et=st.db.getBranchesAsObjArray();let kt=0;Et.forEach((Rt,Dt)=>{branchPos[Rt.name]={pos:kt,index:Dt},kt+=50+(xt.rotateCommitLabel?40:0)});const Lt=select(`[id="${rt}"]`);drawCommits(Lt,allCommitsDict,!1),xt.showBranches&&drawBranches(Lt,Et),drawArrows(Lt,allCommitsDict),drawCommits(Lt,allCommitsDict,!0),utils.insertTitle(Lt,"gitTitleText",xt.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox(void 0,Lt,xt.diagramPadding,(Pt=xt.useMaxWidth)!=null?Pt:bt.useMaxWidth)},gitGraphRenderer={draw:draw$f},getStyles=nt=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(rt=>`
        .branch-label${rt} { fill: ${nt["gitBranchLabel"+rt]}; }
        .commit${rt} { stroke: ${nt["git"+rt]}; fill: ${nt["git"+rt]}; }
        .commit-highlight${rt} { stroke: ${nt["gitInv"+rt]}; fill: ${nt["gitInv"+rt]}; }
        .label${rt}  { fill: ${nt["git"+rt]}; }
        .arrow${rt} { stroke: ${nt["git"+rt]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${nt.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelColor};}
  .commit-label-bkg { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${nt.tagLabelFontSize}; fill: ${nt.tagLabelColor};}
  .tag-label-bkg { fill: ${nt.tagLabelBackground}; stroke: ${nt.tagLabelBorder}; }
  .tag-hole { fill: ${nt.textColor}; }

  .commit-merge {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }
  .commit-reverse {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
  }
`,gitGraphStyles=getStyles;var parser$b=function(){var nt=function(Ln,En,Wn,er){for(Wn=Wn||{},er=Ln.length;er--;Wn[Ln[er]]=En);return Wn},rt=[1,6],it=[1,7],st=[1,8],bt=[1,9],xt=[1,16],Et=[1,11],kt=[1,12],Lt=[1,13],Pt=[1,14],Rt=[1,15],Dt=[1,27],Bt=[1,33],Ft=[1,34],Yt=[1,35],Zt=[1,36],Wt=[1,37],Qt=[1,72],Kt=[1,73],on=[1,74],nn=[1,75],mn=[1,76],gn=[1,77],Tn=[1,78],An=[1,38],kn=[1,39],Mn=[1,40],$n=[1,41],cn=[1,42],Sn=[1,43],an=[1,44],jn=[1,45],hn=[1,46],zn=[1,47],ir=[1,48],tr=[1,49],nr=[1,50],dr=[1,51],or=[1,52],ur=[1,53],Cr=[1,54],Sr=[1,55],rr=[1,56],Fr=[1,57],mr=[1,59],_r=[1,60],yr=[1,61],pr=[1,62],Cn=[1,63],rn=[1,64],dn=[1,65],fn=[1,66],On=[1,67],xn=[1,68],hr=[1,69],Nn=[24,52],Kn=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Un=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],sr=[1,94],ar=[1,95],wr=[1,96],vr=[1,97],Rr=[15,24,52],ci=[7,8,9,10,18,22,25,26,27,28],mi=[15,24,43,52],si=[15,24,43,52,86,87,89,90],yi=[15,43],Ni=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Ii={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(En,Wn,er,fr,Zr,gr,ti){var kr=gr.length-1;switch(Zr){case 4:fr.setDirection("TB");break;case 5:fr.setDirection("BT");break;case 6:fr.setDirection("RL");break;case 7:fr.setDirection("LR");break;case 11:fr.parseDirective("%%{","open_directive");break;case 12:break;case 13:gr[kr]=gr[kr].trim().replace(/'/g,'"'),fr.parseDirective(gr[kr],"arg_directive");break;case 14:fr.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:fr.setC4Type(gr[kr-3]);break;case 26:fr.setTitle(gr[kr].substring(6)),this.$=gr[kr].substring(6);break;case 27:fr.setAccDescription(gr[kr].substring(15)),this.$=gr[kr].substring(15);break;case 28:this.$=gr[kr].trim(),fr.setTitle(this.$);break;case 29:case 30:this.$=gr[kr].trim(),fr.setAccDescription(this.$);break;case 35:case 36:gr[kr].splice(2,0,"ENTERPRISE"),fr.addPersonOrSystemBoundary(...gr[kr]),this.$=gr[kr];break;case 37:fr.addPersonOrSystemBoundary(...gr[kr]),this.$=gr[kr];break;case 38:gr[kr].splice(2,0,"CONTAINER"),fr.addContainerBoundary(...gr[kr]),this.$=gr[kr];break;case 39:fr.addDeploymentNode("node",...gr[kr]),this.$=gr[kr];break;case 40:fr.addDeploymentNode("nodeL",...gr[kr]),this.$=gr[kr];break;case 41:fr.addDeploymentNode("nodeR",...gr[kr]),this.$=gr[kr];break;case 42:fr.popBoundaryParseStack();break;case 46:fr.addPersonOrSystem("person",...gr[kr]),this.$=gr[kr];break;case 47:fr.addPersonOrSystem("external_person",...gr[kr]),this.$=gr[kr];break;case 48:fr.addPersonOrSystem("system",...gr[kr]),this.$=gr[kr];break;case 49:fr.addPersonOrSystem("system_db",...gr[kr]),this.$=gr[kr];break;case 50:fr.addPersonOrSystem("system_queue",...gr[kr]),this.$=gr[kr];break;case 51:fr.addPersonOrSystem("external_system",...gr[kr]),this.$=gr[kr];break;case 52:fr.addPersonOrSystem("external_system_db",...gr[kr]),this.$=gr[kr];break;case 53:fr.addPersonOrSystem("external_system_queue",...gr[kr]),this.$=gr[kr];break;case 54:fr.addContainer("container",...gr[kr]),this.$=gr[kr];break;case 55:fr.addContainer("container_db",...gr[kr]),this.$=gr[kr];break;case 56:fr.addContainer("container_queue",...gr[kr]),this.$=gr[kr];break;case 57:fr.addContainer("external_container",...gr[kr]),this.$=gr[kr];break;case 58:fr.addContainer("external_container_db",...gr[kr]),this.$=gr[kr];break;case 59:fr.addContainer("external_container_queue",...gr[kr]),this.$=gr[kr];break;case 60:fr.addComponent("component",...gr[kr]),this.$=gr[kr];break;case 61:fr.addComponent("component_db",...gr[kr]),this.$=gr[kr];break;case 62:fr.addComponent("component_queue",...gr[kr]),this.$=gr[kr];break;case 63:fr.addComponent("external_component",...gr[kr]),this.$=gr[kr];break;case 64:fr.addComponent("external_component_db",...gr[kr]),this.$=gr[kr];break;case 65:fr.addComponent("external_component_queue",...gr[kr]),this.$=gr[kr];break;case 67:fr.addRel("rel",...gr[kr]),this.$=gr[kr];break;case 68:fr.addRel("birel",...gr[kr]),this.$=gr[kr];break;case 69:fr.addRel("rel_u",...gr[kr]),this.$=gr[kr];break;case 70:fr.addRel("rel_d",...gr[kr]),this.$=gr[kr];break;case 71:fr.addRel("rel_l",...gr[kr]),this.$=gr[kr];break;case 72:fr.addRel("rel_r",...gr[kr]),this.$=gr[kr];break;case 73:fr.addRel("rel_b",...gr[kr]),this.$=gr[kr];break;case 74:gr[kr].splice(0,1),fr.addRel("rel",...gr[kr]),this.$=gr[kr];break;case 75:fr.updateElStyle("update_el_style",...gr[kr]),this.$=gr[kr];break;case 76:fr.updateRelStyle("update_rel_style",...gr[kr]),this.$=gr[kr];break;case 77:fr.updateLayoutConfig("update_layout_config",...gr[kr]),this.$=gr[kr];break;case 78:this.$=[gr[kr]];break;case 79:gr[kr].unshift(gr[kr-1]),this.$=gr[kr];break;case 80:case 82:this.$=gr[kr].trim();break;case 81:let ai={};ai[gr[kr-1].trim()]=gr[kr].trim(),this.$=ai;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:rt,8:it,9:st,10:bt,11:5,12:10,18:xt,22:Et,25:kt,26:Lt,27:Pt,28:Rt},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:rt,8:it,9:st,10:bt,11:5,12:10,18:xt,22:Et,25:kt,26:Lt,27:Pt,28:Rt},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:Dt},nt([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,53:32,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr},{23:79,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,53:32,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr},{23:80,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,53:32,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr},{23:81,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,53:32,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr},{23:82,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,53:32,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},nt(Nn,[2,20],{53:32,39:58,40:70,42:71,30:87,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr}),nt(Nn,[2,21]),nt(Kn,[2,23],{15:[1,88]}),nt(Nn,[2,43],{15:[1,89]}),nt(Un,[2,26]),nt(Un,[2,27]),{35:[1,90]},{37:[1,91]},nt(Un,[2,30]),{45:92,85:93,86:sr,87:ar,89:wr,90:vr},{45:98,85:93,86:sr,87:ar,89:wr,90:vr},{45:99,85:93,86:sr,87:ar,89:wr,90:vr},{45:100,85:93,86:sr,87:ar,89:wr,90:vr},{45:101,85:93,86:sr,87:ar,89:wr,90:vr},{45:102,85:93,86:sr,87:ar,89:wr,90:vr},{45:103,85:93,86:sr,87:ar,89:wr,90:vr},{45:104,85:93,86:sr,87:ar,89:wr,90:vr},{45:105,85:93,86:sr,87:ar,89:wr,90:vr},{45:106,85:93,86:sr,87:ar,89:wr,90:vr},{45:107,85:93,86:sr,87:ar,89:wr,90:vr},{45:108,85:93,86:sr,87:ar,89:wr,90:vr},{45:109,85:93,86:sr,87:ar,89:wr,90:vr},{45:110,85:93,86:sr,87:ar,89:wr,90:vr},{45:111,85:93,86:sr,87:ar,89:wr,90:vr},{45:112,85:93,86:sr,87:ar,89:wr,90:vr},{45:113,85:93,86:sr,87:ar,89:wr,90:vr},{45:114,85:93,86:sr,87:ar,89:wr,90:vr},{45:115,85:93,86:sr,87:ar,89:wr,90:vr},{45:116,85:93,86:sr,87:ar,89:wr,90:vr},nt(Rr,[2,66]),{45:117,85:93,86:sr,87:ar,89:wr,90:vr},{45:118,85:93,86:sr,87:ar,89:wr,90:vr},{45:119,85:93,86:sr,87:ar,89:wr,90:vr},{45:120,85:93,86:sr,87:ar,89:wr,90:vr},{45:121,85:93,86:sr,87:ar,89:wr,90:vr},{45:122,85:93,86:sr,87:ar,89:wr,90:vr},{45:123,85:93,86:sr,87:ar,89:wr,90:vr},{45:124,85:93,86:sr,87:ar,89:wr,90:vr},{45:125,85:93,86:sr,87:ar,89:wr,90:vr},{45:126,85:93,86:sr,87:ar,89:wr,90:vr},{45:127,85:93,86:sr,87:ar,89:wr,90:vr},{30:128,39:58,40:70,42:71,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,53:32,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr},{15:[1,130],43:[1,129]},{45:131,85:93,86:sr,87:ar,89:wr,90:vr},{45:132,85:93,86:sr,87:ar,89:wr,90:vr},{45:133,85:93,86:sr,87:ar,89:wr,90:vr},{45:134,85:93,86:sr,87:ar,89:wr,90:vr},{45:135,85:93,86:sr,87:ar,89:wr,90:vr},{45:136,85:93,86:sr,87:ar,89:wr,90:vr},{45:137,85:93,86:sr,87:ar,89:wr,90:vr},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},nt(ci,[2,9]),{14:142,21:Dt},{21:[2,13]},{1:[2,15]},nt(Nn,[2,22]),nt(Kn,[2,24],{31:31,29:143,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt}),nt(Nn,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,44:Qt,46:Kt,47:on,48:nn,49:mn,50:gn,51:Tn,54:An,55:kn,56:Mn,57:$n,58:cn,59:Sn,60:an,61:jn,62:hn,63:zn,64:ir,65:tr,66:nr,67:dr,68:or,69:ur,70:Cr,71:Sr,72:rr,73:Fr,74:mr,75:_r,76:yr,77:pr,78:Cn,79:rn,80:dn,81:fn,82:On,83:xn,84:hr}),nt(Un,[2,28]),nt(Un,[2,29]),nt(Rr,[2,46]),nt(mi,[2,78],{85:93,45:145,86:sr,87:ar,89:wr,90:vr}),nt(si,[2,80]),{88:[1,146]},nt(si,[2,82]),nt(si,[2,83]),nt(Rr,[2,47]),nt(Rr,[2,48]),nt(Rr,[2,49]),nt(Rr,[2,50]),nt(Rr,[2,51]),nt(Rr,[2,52]),nt(Rr,[2,53]),nt(Rr,[2,54]),nt(Rr,[2,55]),nt(Rr,[2,56]),nt(Rr,[2,57]),nt(Rr,[2,58]),nt(Rr,[2,59]),nt(Rr,[2,60]),nt(Rr,[2,61]),nt(Rr,[2,62]),nt(Rr,[2,63]),nt(Rr,[2,64]),nt(Rr,[2,65]),nt(Rr,[2,67]),nt(Rr,[2,68]),nt(Rr,[2,69]),nt(Rr,[2,70]),nt(Rr,[2,71]),nt(Rr,[2,72]),nt(Rr,[2,73]),nt(Rr,[2,74]),nt(Rr,[2,75]),nt(Rr,[2,76]),nt(Rr,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},nt(yi,[2,35]),nt(yi,[2,36]),nt(yi,[2,37]),nt(yi,[2,38]),nt(yi,[2,39]),nt(yi,[2,40]),nt(yi,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},nt(Kn,[2,25]),nt(Nn,[2,45]),nt(mi,[2,79]),nt(si,[2,81]),nt(Rr,[2,31]),nt(Rr,[2,42]),nt(Ni,[2,32]),nt(Ni,[2,33],{15:[1,152]}),nt(ci,[2,10]),nt(Ni,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(En,Wn){if(Wn.recoverable)this.trace(En);else{var er=new Error(En);throw er.hash=Wn,er}},parse:function(En){var Wn=this,er=[0],fr=[],Zr=[null],gr=[],ti=this.table,kr="",ai=0,ui=0,_i=2,hi=1,ji=gr.slice.call(arguments,1),Ei=Object.create(this.lexer),Wi={yy:{}};for(var lo in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lo)&&(Wi.yy[lo]=this.yy[lo]);Ei.setInput(En,Wi.yy),Wi.yy.lexer=Ei,Wi.yy.parser=this,typeof Ei.yylloc>"u"&&(Ei.yylloc={});var Xi=Ei.yylloc;gr.push(Xi);var Ga=Ei.options&&Ei.options.ranges;typeof Wi.yy.parseError=="function"?this.parseError=Wi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ns(){var lr;return lr=fr.pop()||Ei.lex()||hi,typeof lr!="number"&&(lr instanceof Array&&(fr=lr,lr=fr.pop()),lr=Wn.symbols_[lr]||lr),lr}for(var wi,qi,$s,xs,fs={},Ts,ws,Lr,qr;;){if(qi=er[er.length-1],this.defaultActions[qi]?$s=this.defaultActions[qi]:((wi===null||typeof wi>"u")&&(wi=Ns()),$s=ti[qi]&&ti[qi][wi]),typeof $s>"u"||!$s.length||!$s[0]){var Ir="";qr=[];for(Ts in ti[qi])this.terminals_[Ts]&&Ts>_i&&qr.push("'"+this.terminals_[Ts]+"'");Ei.showPosition?Ir="Parse error on line "+(ai+1)+`:
`+Ei.showPosition()+`
Expecting `+qr.join(", ")+", got '"+(this.terminals_[wi]||wi)+"'":Ir="Parse error on line "+(ai+1)+": Unexpected "+(wi==hi?"end of input":"'"+(this.terminals_[wi]||wi)+"'"),this.parseError(Ir,{text:Ei.match,token:this.terminals_[wi]||wi,line:Ei.yylineno,loc:Xi,expected:qr})}if($s[0]instanceof Array&&$s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+qi+", token: "+wi);switch($s[0]){case 1:er.push(wi),Zr.push(Ei.yytext),gr.push(Ei.yylloc),er.push($s[1]),wi=null,ui=Ei.yyleng,kr=Ei.yytext,ai=Ei.yylineno,Xi=Ei.yylloc;break;case 2:if(ws=this.productions_[$s[1]][1],fs.$=Zr[Zr.length-ws],fs._$={first_line:gr[gr.length-(ws||1)].first_line,last_line:gr[gr.length-1].last_line,first_column:gr[gr.length-(ws||1)].first_column,last_column:gr[gr.length-1].last_column},Ga&&(fs._$.range=[gr[gr.length-(ws||1)].range[0],gr[gr.length-1].range[1]]),xs=this.performAction.apply(fs,[kr,ui,ai,Wi.yy,$s[1],Zr,gr].concat(ji)),typeof xs<"u")return xs;ws&&(er=er.slice(0,-1*ws*2),Zr=Zr.slice(0,-1*ws),gr=gr.slice(0,-1*ws)),er.push(this.productions_[$s[1]][0]),Zr.push(fs.$),gr.push(fs._$),Lr=ti[er[er.length-2]][er[er.length-1]],er.push(Lr);break;case 3:return!0}}return!0}},Mi=function(){var Ln={EOF:1,parseError:function(Wn,er){if(this.yy.parser)this.yy.parser.parseError(Wn,er);else throw new Error(Wn)},setInput:function(En,Wn){return this.yy=Wn||this.yy||{},this._input=En,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var En=this._input[0];this.yytext+=En,this.yyleng++,this.offset++,this.match+=En,this.matched+=En;var Wn=En.match(/(?:\r\n?|\n).*/g);return Wn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),En},unput:function(En){var Wn=En.length,er=En.split(/(?:\r\n?|\n)/g);this._input=En+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Wn),this.offset-=Wn;var fr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),er.length-1&&(this.yylineno-=er.length-1);var Zr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:er?(er.length===fr.length?this.yylloc.first_column:0)+fr[fr.length-er.length].length-er[0].length:this.yylloc.first_column-Wn},this.options.ranges&&(this.yylloc.range=[Zr[0],Zr[0]+this.yyleng-Wn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(En){this.unput(this.match.slice(En))},pastInput:function(){var En=this.matched.substr(0,this.matched.length-this.match.length);return(En.length>20?"...":"")+En.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var En=this.match;return En.length<20&&(En+=this._input.substr(0,20-En.length)),(En.substr(0,20)+(En.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var En=this.pastInput(),Wn=new Array(En.length+1).join("-");return En+this.upcomingInput()+`
`+Wn+"^"},test_match:function(En,Wn){var er,fr,Zr;if(this.options.backtrack_lexer&&(Zr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Zr.yylloc.range=this.yylloc.range.slice(0))),fr=En[0].match(/(?:\r\n?|\n).*/g),fr&&(this.yylineno+=fr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:fr?fr[fr.length-1].length-fr[fr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+En[0].length},this.yytext+=En[0],this.match+=En[0],this.matches=En,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(En[0].length),this.matched+=En[0],er=this.performAction.call(this,this.yy,this,Wn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),er)return er;if(this._backtrack){for(var gr in Zr)this[gr]=Zr[gr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var En,Wn,er,fr;this._more||(this.yytext="",this.match="");for(var Zr=this._currentRules(),gr=0;gr<Zr.length;gr++)if(er=this._input.match(this.rules[Zr[gr]]),er&&(!Wn||er[0].length>Wn[0].length)){if(Wn=er,fr=gr,this.options.backtrack_lexer){if(En=this.test_match(er,Zr[gr]),En!==!1)return En;if(this._backtrack){Wn=!1;continue}else return!1}else if(!this.options.flex)break}return Wn?(En=this.test_match(Wn,Zr[fr]),En!==!1?En:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Wn=this.next();return Wn||this.lex()},begin:function(Wn){this.conditionStack.push(Wn)},popState:function(){var Wn=this.conditionStack.length-1;return Wn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Wn){return Wn=this.conditionStack.length-1-Math.abs(Wn||0),Wn>=0?this.conditionStack[Wn]:"INITIAL"},pushState:function(Wn){this.begin(Wn)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Wn,er,fr,Zr){switch(fr){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return Ln}();Ii.lexer=Mi;function Or(){this.yy={}}return Or.prototype=Ii,Ii.Parser=Or,new Or}();parser$b.parser=parser$b;const c4Parser=parser$b,c4Detector=nt=>nt.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let c4ShapeArray=[],boundaryParseStack=[""],currentBoundaryParse="global",parentBoundaryParse="",boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],rels=[],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2;var c4Type;const getC4Type=function(){return c4Type},setC4Type=function(nt){c4Type=sanitizeText$5(nt,getConfig$1())},parseDirective$9=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRel=function(nt,rt,it,st,bt,xt,Et,kt,Lt){if(nt==null||rt===void 0||rt===null||it===void 0||it===null||st===void 0||st===null)return;let Pt={};const Rt=rels.find(Dt=>Dt.from===rt&&Dt.to===it);if(Rt?Pt=Rt:rels.push(Pt),Pt.type=nt,Pt.from=rt,Pt.to=it,Pt.label={text:st},bt==null)Pt.techn={text:""};else if(typeof bt=="object"){let[Dt,Bt]=Object.entries(bt)[0];Pt[Dt]={text:Bt}}else Pt.techn={text:bt};if(xt==null)Pt.descr={text:""};else if(typeof xt=="object"){let[Dt,Bt]=Object.entries(xt)[0];Pt[Dt]={text:Bt}}else Pt.descr={text:xt};if(typeof Et=="object"){let[Dt,Bt]=Object.entries(Et)[0];Pt[Dt]=Bt}else Pt.sprite=Et;if(typeof kt=="object"){let[Dt,Bt]=Object.entries(kt)[0];Pt[Dt]=Bt}else Pt.tags=kt;if(typeof Lt=="object"){let[Dt,Bt]=Object.entries(Lt)[0];Pt[Dt]=Bt}else Pt.link=Lt;Pt.wrap=autoWrap$1()},addPersonOrSystem=function(nt,rt,it,st,bt,xt,Et){if(rt===null||it===null)return;let kt={};const Lt=c4ShapeArray.find(Pt=>Pt.alias===rt);if(Lt&&rt===Lt.alias?kt=Lt:(kt.alias=rt,c4ShapeArray.push(kt)),it==null?kt.label={text:""}:kt.label={text:it},st==null)kt.descr={text:""};else if(typeof st=="object"){let[Pt,Rt]=Object.entries(st)[0];kt[Pt]={text:Rt}}else kt.descr={text:st};if(typeof bt=="object"){let[Pt,Rt]=Object.entries(bt)[0];kt[Pt]=Rt}else kt.sprite=bt;if(typeof xt=="object"){let[Pt,Rt]=Object.entries(xt)[0];kt[Pt]=Rt}else kt.tags=xt;if(typeof Et=="object"){let[Pt,Rt]=Object.entries(Et)[0];kt[Pt]=Rt}else kt.link=Et;kt.typeC4Shape={text:nt},kt.parentBoundary=currentBoundaryParse,kt.wrap=autoWrap$1()},addContainer=function(nt,rt,it,st,bt,xt,Et,kt){if(rt===null||it===null)return;let Lt={};const Pt=c4ShapeArray.find(Rt=>Rt.alias===rt);if(Pt&&rt===Pt.alias?Lt=Pt:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.techn={text:""};else if(typeof st=="object"){let[Rt,Dt]=Object.entries(st)[0];Lt[Rt]={text:Dt}}else Lt.techn={text:st};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Rt,Dt]=Object.entries(bt)[0];Lt[Rt]={text:Dt}}else Lt.descr={text:bt};if(typeof xt=="object"){let[Rt,Dt]=Object.entries(xt)[0];Lt[Rt]=Dt}else Lt.sprite=xt;if(typeof Et=="object"){let[Rt,Dt]=Object.entries(Et)[0];Lt[Rt]=Dt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Dt]=Object.entries(kt)[0];Lt[Rt]=Dt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addComponent=function(nt,rt,it,st,bt,xt,Et,kt){if(rt===null||it===null)return;let Lt={};const Pt=c4ShapeArray.find(Rt=>Rt.alias===rt);if(Pt&&rt===Pt.alias?Lt=Pt:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.techn={text:""};else if(typeof st=="object"){let[Rt,Dt]=Object.entries(st)[0];Lt[Rt]={text:Dt}}else Lt.techn={text:st};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Rt,Dt]=Object.entries(bt)[0];Lt[Rt]={text:Dt}}else Lt.descr={text:bt};if(typeof xt=="object"){let[Rt,Dt]=Object.entries(xt)[0];Lt[Rt]=Dt}else Lt.sprite=xt;if(typeof Et=="object"){let[Rt,Dt]=Object.entries(Et)[0];Lt[Rt]=Dt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Dt]=Object.entries(kt)[0];Lt[Rt]=Dt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addPersonOrSystemBoundary=function(nt,rt,it,st,bt){if(nt===null||rt===null)return;let xt={};const Et=boundarys.find(kt=>kt.alias===nt);if(Et&&nt===Et.alias?xt=Et:(xt.alias=nt,boundarys.push(xt)),rt==null?xt.label={text:""}:xt.label={text:rt},it==null)xt.type={text:"system"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];xt[kt]={text:Lt}}else xt.type={text:it};if(typeof st=="object"){let[kt,Lt]=Object.entries(st)[0];xt[kt]=Lt}else xt.tags=st;if(typeof bt=="object"){let[kt,Lt]=Object.entries(bt)[0];xt[kt]=Lt}else xt.link=bt;xt.parentBoundary=currentBoundaryParse,xt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addContainerBoundary=function(nt,rt,it,st,bt){if(nt===null||rt===null)return;let xt={};const Et=boundarys.find(kt=>kt.alias===nt);if(Et&&nt===Et.alias?xt=Et:(xt.alias=nt,boundarys.push(xt)),rt==null?xt.label={text:""}:xt.label={text:rt},it==null)xt.type={text:"container"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];xt[kt]={text:Lt}}else xt.type={text:it};if(typeof st=="object"){let[kt,Lt]=Object.entries(st)[0];xt[kt]=Lt}else xt.tags=st;if(typeof bt=="object"){let[kt,Lt]=Object.entries(bt)[0];xt[kt]=Lt}else xt.link=bt;xt.parentBoundary=currentBoundaryParse,xt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addDeploymentNode=function(nt,rt,it,st,bt,xt,Et,kt){if(rt===null||it===null)return;let Lt={};const Pt=boundarys.find(Rt=>Rt.alias===rt);if(Pt&&rt===Pt.alias?Lt=Pt:(Lt.alias=rt,boundarys.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.type={text:"node"};else if(typeof st=="object"){let[Rt,Dt]=Object.entries(st)[0];Lt[Rt]={text:Dt}}else Lt.type={text:st};if(bt==null)Lt.descr={text:""};else if(typeof bt=="object"){let[Rt,Dt]=Object.entries(bt)[0];Lt[Rt]={text:Dt}}else Lt.descr={text:bt};if(typeof Et=="object"){let[Rt,Dt]=Object.entries(Et)[0];Lt[Rt]=Dt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Dt]=Object.entries(kt)[0];Lt[Rt]=Dt}else Lt.link=kt;Lt.nodeType=nt,Lt.parentBoundary=currentBoundaryParse,Lt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=rt,boundaryParseStack.push(parentBoundaryParse)},popBoundaryParseStack=function(){currentBoundaryParse=parentBoundaryParse,boundaryParseStack.pop(),parentBoundaryParse=boundaryParseStack.pop(),boundaryParseStack.push(parentBoundaryParse)},updateElStyle=function(nt,rt,it,st,bt,xt,Et,kt,Lt,Pt,Rt){let Dt=c4ShapeArray.find(Bt=>Bt.alias===rt);if(!(Dt===void 0&&(Dt=boundarys.find(Bt=>Bt.alias===rt),Dt===void 0))){if(it!=null)if(typeof it=="object"){let[Bt,Ft]=Object.entries(it)[0];Dt[Bt]=Ft}else Dt.bgColor=it;if(st!=null)if(typeof st=="object"){let[Bt,Ft]=Object.entries(st)[0];Dt[Bt]=Ft}else Dt.fontColor=st;if(bt!=null)if(typeof bt=="object"){let[Bt,Ft]=Object.entries(bt)[0];Dt[Bt]=Ft}else Dt.borderColor=bt;if(xt!=null)if(typeof xt=="object"){let[Bt,Ft]=Object.entries(xt)[0];Dt[Bt]=Ft}else Dt.shadowing=xt;if(Et!=null)if(typeof Et=="object"){let[Bt,Ft]=Object.entries(Et)[0];Dt[Bt]=Ft}else Dt.shape=Et;if(kt!=null)if(typeof kt=="object"){let[Bt,Ft]=Object.entries(kt)[0];Dt[Bt]=Ft}else Dt.sprite=kt;if(Lt!=null)if(typeof Lt=="object"){let[Bt,Ft]=Object.entries(Lt)[0];Dt[Bt]=Ft}else Dt.techn=Lt;if(Pt!=null)if(typeof Pt=="object"){let[Bt,Ft]=Object.entries(Pt)[0];Dt[Bt]=Ft}else Dt.legendText=Pt;if(Rt!=null)if(typeof Rt=="object"){let[Bt,Ft]=Object.entries(Rt)[0];Dt[Bt]=Ft}else Dt.legendSprite=Rt}},updateRelStyle=function(nt,rt,it,st,bt,xt,Et){const kt=rels.find(Lt=>Lt.from===rt&&Lt.to===it);if(kt!==void 0){if(st!=null)if(typeof st=="object"){let[Lt,Pt]=Object.entries(st)[0];kt[Lt]=Pt}else kt.textColor=st;if(bt!=null)if(typeof bt=="object"){let[Lt,Pt]=Object.entries(bt)[0];kt[Lt]=Pt}else kt.lineColor=bt;if(xt!=null)if(typeof xt=="object"){let[Lt,Pt]=Object.entries(xt)[0];kt[Lt]=parseInt(Pt)}else kt.offsetX=parseInt(xt);if(Et!=null)if(typeof Et=="object"){let[Lt,Pt]=Object.entries(Et)[0];kt[Lt]=parseInt(Pt)}else kt.offsetY=parseInt(Et)}},updateLayoutConfig=function(nt,rt,it){let st=c4ShapeInRow$1,bt=c4BoundaryInRow$1;if(typeof rt=="object"){const xt=Object.values(rt)[0];st=parseInt(xt)}else st=parseInt(rt);if(typeof it=="object"){const xt=Object.values(it)[0];bt=parseInt(xt)}else bt=parseInt(it);st>=1&&(c4ShapeInRow$1=st),bt>=1&&(c4BoundaryInRow$1=bt)},getC4ShapeInRow=function(){return c4ShapeInRow$1},getC4BoundaryInRow=function(){return c4BoundaryInRow$1},getCurrentBoundaryParse=function(){return currentBoundaryParse},getParentBoundaryParse=function(){return parentBoundaryParse},getC4ShapeArray=function(nt){return nt==null?c4ShapeArray:c4ShapeArray.filter(rt=>rt.parentBoundary===nt)},getC4Shape=function(nt){return c4ShapeArray.find(rt=>rt.alias===nt)},getC4ShapeKeys=function(nt){return Object.keys(getC4ShapeArray(nt))},getBoundarys=function(nt){return nt==null?boundarys:boundarys.filter(rt=>rt.parentBoundary===nt)},getRels=function(){return rels},getTitle=function(){return title},setWrap$1=function(nt){wrapEnabled$1=nt},autoWrap$1=function(){return wrapEnabled$1},clear$d=function(){c4ShapeArray=[],boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],parentBoundaryParse="",currentBoundaryParse="global",boundaryParseStack=[""],rels=[],boundaryParseStack=[""],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2},LINETYPE$1={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE$1={FILLED:0,OPEN:1},PLACEMENT$1={LEFTOF:0,RIGHTOF:1,OVER:2},setTitle=function(nt){title=sanitizeText$5(nt,getConfig$1())},c4Db={addPersonOrSystem,addPersonOrSystemBoundary,addContainer,addContainerBoundary,addComponent,addDeploymentNode,popBoundaryParseStack,addRel,updateElStyle,updateRelStyle,updateLayoutConfig,autoWrap:autoWrap$1,setWrap:setWrap$1,getC4ShapeArray,getC4Shape,getC4ShapeKeys,getBoundarys,getCurrentBoundaryParse,getParentBoundaryParse,getRels,getTitle,getC4Type,getC4ShapeInRow,getC4BoundaryInRow,setAccTitle,getAccTitle,getAccDescription,setAccDescription,parseDirective:parseDirective$9,getConfig:()=>getConfig$1().c4,clear:clear$d,LINETYPE:LINETYPE$1,ARROWTYPE:ARROWTYPE$1,PLACEMENT:PLACEMENT$1,setTitle,setC4Type},drawRect$2=function(nt,rt){const it=nt.append("rect");if(it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.attrs!=="undefined"&&rt.attrs!==null)for(let st in rt.attrs)it.attr(st,rt.attrs[st]);return rt.class!=="undefined"&&it.attr("class",rt.class),it},drawImage$1=function(nt,rt,it,st,bt,xt){const Et=nt.append("image");Et.attr("width",rt),Et.attr("height",it),Et.attr("x",st),Et.attr("y",bt);let kt=xt.startsWith("data:image/png;base64")?xt:dist.sanitizeUrl(xt);Et.attr("xlink:href",kt)},drawRels$1=(nt,rt,it)=>{const st=nt.append("g");let bt=0;for(let xt of rt){let Et=xt.textColor?xt.textColor:"#444444",kt=xt.lineColor?xt.lineColor:"#444444",Lt=xt.offsetX?parseInt(xt.offsetX):0,Pt=xt.offsetY?parseInt(xt.offsetY):0,Rt="";if(bt===0){let Bt=st.append("line");Bt.attr("x1",xt.startPoint.x),Bt.attr("y1",xt.startPoint.y),Bt.attr("x2",xt.endPoint.x),Bt.attr("y2",xt.endPoint.y),Bt.attr("stroke-width","1"),Bt.attr("stroke",kt),Bt.style("fill","none"),xt.type!=="rel_b"&&Bt.attr("marker-end","url("+Rt+"#arrowhead)"),(xt.type==="birel"||xt.type==="rel_b")&&Bt.attr("marker-start","url("+Rt+"#arrowend)"),bt=-1}else{let Bt=st.append("path");Bt.attr("fill","none").attr("stroke-width","1").attr("stroke",kt).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",xt.startPoint.x).replaceAll("starty",xt.startPoint.y).replaceAll("controlx",xt.startPoint.x+(xt.endPoint.x-xt.startPoint.x)/2-(xt.endPoint.x-xt.startPoint.x)/4).replaceAll("controly",xt.startPoint.y+(xt.endPoint.y-xt.startPoint.y)/2).replaceAll("stopx",xt.endPoint.x).replaceAll("stopy",xt.endPoint.y)),xt.type!=="rel_b"&&Bt.attr("marker-end","url("+Rt+"#arrowhead)"),(xt.type==="birel"||xt.type==="rel_b")&&Bt.attr("marker-start","url("+Rt+"#arrowend)")}let Dt=it.messageFont();_drawTextCandidateFunc$2(it)(xt.label.text,st,Math.min(xt.startPoint.x,xt.endPoint.x)+Math.abs(xt.endPoint.x-xt.startPoint.x)/2+Lt,Math.min(xt.startPoint.y,xt.endPoint.y)+Math.abs(xt.endPoint.y-xt.startPoint.y)/2+Pt,xt.label.width,xt.label.height,{fill:Et},Dt),xt.techn&&xt.techn.text!==""&&(Dt=it.messageFont(),_drawTextCandidateFunc$2(it)("["+xt.techn.text+"]",st,Math.min(xt.startPoint.x,xt.endPoint.x)+Math.abs(xt.endPoint.x-xt.startPoint.x)/2+Lt,Math.min(xt.startPoint.y,xt.endPoint.y)+Math.abs(xt.endPoint.y-xt.startPoint.y)/2+it.messageFontSize+5+Pt,Math.max(xt.label.width,xt.techn.width),xt.techn.height,{fill:Et,"font-style":"italic"},Dt))}},drawBoundary$1=function(nt,rt,it){const st=nt.append("g");let bt=rt.bgColor?rt.bgColor:"none",xt=rt.borderColor?rt.borderColor:"#444444",Et=rt.fontColor?rt.fontColor:"black",kt={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};rt.nodeType&&(kt={"stroke-width":1});let Lt={x:rt.x,y:rt.y,fill:bt,stroke:xt,width:rt.width,height:rt.height,rx:2.5,ry:2.5,attrs:kt};drawRect$2(st,Lt);let Pt=it.boundaryFont();Pt.fontWeight="bold",Pt.fontSize=Pt.fontSize+2,Pt.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.label.text,st,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:"#444444"},Pt),rt.type&&rt.type.text!==""&&(Pt=it.boundaryFont(),Pt.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.type.text,st,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:"#444444"},Pt)),rt.descr&&rt.descr.text!==""&&(Pt=it.boundaryFont(),Pt.fontSize=Pt.fontSize-2,Pt.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.descr.text,st,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:"#444444"},Pt))},drawC4Shape=function(nt,rt,it){var st;let bt=rt.bgColor?rt.bgColor:it[rt.typeC4Shape.text+"_bg_color"],xt=rt.borderColor?rt.borderColor:it[rt.typeC4Shape.text+"_border_color"],Et=rt.fontColor?rt.fontColor:"#FFFFFF",kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(rt.typeC4Shape.text){case"person":kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const Lt=nt.append("g");Lt.attr("class","person-man");const Pt=getNoteRect$2();switch(rt.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":Pt.x=rt.x,Pt.y=rt.y,Pt.fill=bt,Pt.width=rt.width,Pt.height=rt.height,Pt.stroke=xt,Pt.rx=2.5,Pt.ry=2.5,Pt.attrs={"stroke-width":.5},drawRect$2(Lt,Pt);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":Lt.append("path").attr("fill",bt).attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2).replaceAll("height",rt.height)),Lt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":Lt.append("path").attr("fill",bt).attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("width",rt.width).replaceAll("half",rt.height/2)),Lt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",rt.x+rt.width).replaceAll("starty",rt.y).replaceAll("half",rt.height/2));break}let Rt=getC4ShapeFont(it,rt.typeC4Shape.text);switch(Lt.append("text").attr("fill",Et).attr("font-family",Rt.fontFamily).attr("font-size",Rt.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",rt.typeC4Shape.width).attr("x",rt.x+rt.width/2-rt.typeC4Shape.width/2).attr("y",rt.y+rt.typeC4Shape.Y).text("<<"+rt.typeC4Shape.text+">>"),rt.typeC4Shape.text){case"person":case"external_person":drawImage$1(Lt,48,48,rt.x+rt.width/2-24,rt.y+rt.image.Y,kt);break}let Dt=it[rt.typeC4Shape.text+"Font"]();return Dt.fontWeight="bold",Dt.fontSize=Dt.fontSize+2,Dt.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.label.text,Lt,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:Et},Dt),Dt=it[rt.typeC4Shape.text+"Font"](),Dt.fontColor=Et,rt.techn&&((st=rt.techn)==null?void 0:st.text)!==""?_drawTextCandidateFunc$2(it)(rt.techn.text,Lt,rt.x,rt.y+rt.techn.Y,rt.width,rt.height,{fill:Et,"font-style":"italic"},Dt):rt.type&&rt.type.text!==""&&_drawTextCandidateFunc$2(it)(rt.type.text,Lt,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:Et,"font-style":"italic"},Dt),rt.descr&&rt.descr.text!==""&&(Dt=it.personFont(),Dt.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.descr.text,Lt,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:Et},Dt)),rt.height},insertDatabaseIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead$1=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowEnd=function(nt){nt.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},insertArrowFilledHead$1=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertDynamicNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead$1=function(nt){const it=nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);it.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),it.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},getNoteRect$2=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},getC4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),_drawTextCandidateFunc$2=function(){function nt(bt,xt,Et,kt,Lt,Pt,Rt){const Dt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt+Pt/2+5).style("text-anchor","middle").text(bt);st(Dt,Rt)}function rt(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const{fontSize:Bt,fontFamily:Ft,fontWeight:Yt}=Dt,Zt=bt.split(common$1.lineBreakRegex);for(let Wt=0;Wt<Zt.length;Wt++){const Qt=Wt*Bt-Bt*(Zt.length-1)/2,Kt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",Bt).style("font-weight",Yt).style("font-family",Ft);Kt.append("tspan").attr("dy",Qt).text(Zt[Wt]).attr("alignment-baseline","mathematical"),st(Kt,Rt)}}function it(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Pt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Pt,Rt,Dt),st(Yt,Rt)}function st(bt,xt){for(const Et in xt)xt.hasOwnProperty(Et)&&bt.attr(Et,xt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),svgDraw$3={drawRect:drawRect$2,drawBoundary:drawBoundary$1,drawC4Shape,drawRels:drawRels$1,drawImage:drawImage$1,insertArrowHead:insertArrowHead$1,insertArrowEnd,insertArrowFilledHead:insertArrowFilledHead$1,insertDynamicNumber,insertArrowCrossHead:insertArrowCrossHead$1,insertDatabaseIcon:insertDatabaseIcon$1,insertComputerIcon:insertComputerIcon$1,insertClockIcon:insertClockIcon$1,getNoteRect:getNoteRect$2,sanitizeUrl:dist.sanitizeUrl};let globalBoundaryMaxX=0,globalBoundaryMaxY=0,c4ShapeInRow=4,c4BoundaryInRow=2;parser$b.yy=c4Db;let conf$a={};class Bounds{constructor(rt){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,setConf$a(rt.db.getConfig())}setData(rt,it,st,bt){this.nextData.startx=this.data.startx=rt,this.nextData.stopx=this.data.stopx=it,this.nextData.starty=this.data.starty=st,this.nextData.stopy=this.data.stopy=bt}updateVal(rt,it,st,bt){rt[it]===void 0?rt[it]=st:rt[it]=bt(st,rt[it])}insert(rt){this.nextData.cnt=this.nextData.cnt+1;let it=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+rt.margin:this.nextData.stopx+rt.margin*2,st=it+rt.width,bt=this.nextData.starty+rt.margin*2,xt=bt+rt.height;(it>=this.data.widthLimit||st>=this.data.widthLimit||this.nextData.cnt>c4ShapeInRow)&&(it=this.nextData.startx+rt.margin+conf$a.nextLinePaddingX,bt=this.nextData.stopy+rt.margin*2,this.nextData.stopx=st=it+rt.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=xt=bt+rt.height,this.nextData.cnt=1),rt.x=it,rt.y=bt,this.updateVal(this.data,"startx",it,Math.min),this.updateVal(this.data,"starty",bt,Math.min),this.updateVal(this.data,"stopx",st,Math.max),this.updateVal(this.data,"stopy",xt,Math.max),this.updateVal(this.nextData,"startx",it,Math.min),this.updateVal(this.nextData,"starty",bt,Math.min),this.updateVal(this.nextData,"stopx",st,Math.max),this.updateVal(this.nextData,"stopy",xt,Math.max)}init(rt){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},setConf$a(rt.db.getConfig())}bumpLastMargin(rt){this.data.stopx+=rt,this.data.stopy+=rt}}const setConf$a=function(nt){assignWithDepth$1(conf$a,nt),nt.fontFamily&&(conf$a.personFontFamily=conf$a.systemFontFamily=conf$a.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$a.personFontSize=conf$a.systemFontSize=conf$a.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$a.personFontWeight=conf$a.systemFontWeight=conf$a.messageFontWeight=nt.fontWeight)},c4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),boundaryFont=nt=>({fontFamily:nt.boundaryFontFamily,fontSize:nt.boundaryFontSize,fontWeight:nt.boundaryFontWeight}),messageFont$1=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight});function calcC4ShapeTextWH(nt,rt,it,st,bt){if(!rt[nt].width)if(it)rt[nt].text=wrapLabel(rt[nt].text,bt,st),rt[nt].textLines=rt[nt].text.split(common$1.lineBreakRegex).length,rt[nt].width=bt,rt[nt].height=calculateTextHeight(rt[nt].text,st);else{let xt=rt[nt].text.split(common$1.lineBreakRegex);rt[nt].textLines=xt.length;let Et=0;rt[nt].height=0,rt[nt].width=0;for(const kt of xt)rt[nt].width=Math.max(calculateTextWidth(kt,st),rt[nt].width),Et=calculateTextHeight(kt,st),rt[nt].height=rt[nt].height+Et}}const drawBoundary=function(nt,rt,it){rt.x=it.data.startx,rt.y=it.data.starty,rt.width=it.data.stopx-it.data.startx,rt.height=it.data.stopy-it.data.starty,rt.label.y=conf$a.c4ShapeMargin-35;let st=rt.wrap&&conf$a.wrap,bt=boundaryFont(conf$a);bt.fontSize=bt.fontSize+2,bt.fontWeight="bold";let xt=calculateTextWidth(rt.label.text,bt);calcC4ShapeTextWH("label",rt,st,bt,xt),svgDraw$3.drawBoundary(nt,rt,conf$a)},drawC4ShapeArray=function(nt,rt,it,st){let bt=0;for(const xt of st){bt=0;const Et=it[xt];let kt=c4ShapeFont(conf$a,Et.typeC4Shape.text);switch(kt.fontSize=kt.fontSize-2,Et.typeC4Shape.width=calculateTextWidth("<<"+Et.typeC4Shape.text+">>",kt),Et.typeC4Shape.height=kt.fontSize+2,Et.typeC4Shape.Y=conf$a.c4ShapePadding,bt=Et.typeC4Shape.Y+Et.typeC4Shape.height-4,Et.image={width:0,height:0,Y:0},Et.typeC4Shape.text){case"person":case"external_person":Et.image.width=48,Et.image.height=48,Et.image.Y=bt,bt=Et.image.Y+Et.image.height;break}Et.sprite&&(Et.image.width=48,Et.image.height=48,Et.image.Y=bt,bt=Et.image.Y+Et.image.height);let Lt=Et.wrap&&conf$a.wrap,Pt=conf$a.width-conf$a.c4ShapePadding*2,Rt=c4ShapeFont(conf$a,Et.typeC4Shape.text);if(Rt.fontSize=Rt.fontSize+2,Rt.fontWeight="bold",calcC4ShapeTextWH("label",Et,Lt,Rt,Pt),Et.label.Y=bt+8,bt=Et.label.Y+Et.label.height,Et.type&&Et.type.text!==""){Et.type.text="["+Et.type.text+"]";let Ft=c4ShapeFont(conf$a,Et.typeC4Shape.text);calcC4ShapeTextWH("type",Et,Lt,Ft,Pt),Et.type.Y=bt+5,bt=Et.type.Y+Et.type.height}else if(Et.techn&&Et.techn.text!==""){Et.techn.text="["+Et.techn.text+"]";let Ft=c4ShapeFont(conf$a,Et.techn.text);calcC4ShapeTextWH("techn",Et,Lt,Ft,Pt),Et.techn.Y=bt+5,bt=Et.techn.Y+Et.techn.height}let Dt=bt,Bt=Et.label.width;if(Et.descr&&Et.descr.text!==""){let Ft=c4ShapeFont(conf$a,Et.typeC4Shape.text);calcC4ShapeTextWH("descr",Et,Lt,Ft,Pt),Et.descr.Y=bt+20,bt=Et.descr.Y+Et.descr.height,Bt=Math.max(Et.label.width,Et.descr.width),Dt=bt-Et.descr.textLines*5}Bt=Bt+conf$a.c4ShapePadding,Et.width=Math.max(Et.width||conf$a.width,Bt,conf$a.width),Et.height=Math.max(Et.height||conf$a.height,Dt,conf$a.height),Et.margin=Et.margin||conf$a.c4ShapeMargin,nt.insert(Et),svgDraw$3.drawC4Shape(rt,Et,conf$a)}nt.bumpLastMargin(conf$a.c4ShapeMargin)};class Point{constructor(rt,it){this.x=rt,this.y=it}}let getIntersectPoint=function(nt,rt){let it=nt.x,st=nt.y,bt=rt.x,xt=rt.y,Et=it+nt.width/2,kt=st+nt.height/2,Lt=Math.abs(it-bt),Pt=Math.abs(st-xt),Rt=Pt/Lt,Dt=nt.height/nt.width,Bt=null;return st==xt&&it<bt?Bt=new Point(it+nt.width,kt):st==xt&&it>bt?Bt=new Point(it,kt):it==bt&&st<xt?Bt=new Point(Et,st+nt.height):it==bt&&st>xt&&(Bt=new Point(Et,st)),it>bt&&st<xt?Dt>=Rt?Bt=new Point(it,kt+Rt*nt.width/2):Bt=new Point(Et-Lt/Pt*nt.height/2,st+nt.height):it<bt&&st<xt?Dt>=Rt?Bt=new Point(it+nt.width,kt+Rt*nt.width/2):Bt=new Point(Et+Lt/Pt*nt.height/2,st+nt.height):it<bt&&st>xt?Dt>=Rt?Bt=new Point(it+nt.width,kt-Rt*nt.width/2):Bt=new Point(Et+nt.height/2*Lt/Pt,st):it>bt&&st>xt&&(Dt>=Rt?Bt=new Point(it,kt-nt.width/2*Rt):Bt=new Point(Et-nt.height/2*Lt/Pt,st)),Bt},getIntersectPoints=function(nt,rt){let it={x:0,y:0};it.x=rt.x+rt.width/2,it.y=rt.y+rt.height/2;let st=getIntersectPoint(nt,it);it.x=nt.x+nt.width/2,it.y=nt.y+nt.height/2;let bt=getIntersectPoint(rt,it);return{startPoint:st,endPoint:bt}};const drawRels=function(nt,rt,it,st){let bt=0;for(let xt of rt){bt=bt+1;let Et=xt.wrap&&conf$a.wrap,kt=messageFont$1(conf$a);st.db.getC4Type()==="C4Dynamic"&&(xt.label.text=bt+": "+xt.label.text);let Pt=calculateTextWidth(xt.label.text,kt);calcC4ShapeTextWH("label",xt,Et,kt,Pt),xt.techn&&xt.techn.text!==""&&(Pt=calculateTextWidth(xt.techn.text,kt),calcC4ShapeTextWH("techn",xt,Et,kt,Pt)),xt.descr&&xt.descr.text!==""&&(Pt=calculateTextWidth(xt.descr.text,kt),calcC4ShapeTextWH("descr",xt,Et,kt,Pt));let Rt=it(xt.from),Dt=it(xt.to),Bt=getIntersectPoints(Rt,Dt);xt.startPoint=Bt.startPoint,xt.endPoint=Bt.endPoint}svgDraw$3.drawRels(nt,rt,conf$a)};function drawInsideBoundary(nt,rt,it,st,bt){let xt=new Bounds(bt);xt.data.widthLimit=it.data.widthLimit/Math.min(c4BoundaryInRow,st.length);for(let[Et,kt]of st.entries()){let Lt=0;kt.image={width:0,height:0,Y:0},kt.sprite&&(kt.image.width=48,kt.image.height=48,kt.image.Y=Lt,Lt=kt.image.Y+kt.image.height);let Pt=kt.wrap&&conf$a.wrap,Rt=boundaryFont(conf$a);if(Rt.fontSize=Rt.fontSize+2,Rt.fontWeight="bold",calcC4ShapeTextWH("label",kt,Pt,Rt,xt.data.widthLimit),kt.label.Y=Lt+8,Lt=kt.label.Y+kt.label.height,kt.type&&kt.type.text!==""){kt.type.text="["+kt.type.text+"]";let Yt=boundaryFont(conf$a);calcC4ShapeTextWH("type",kt,Pt,Yt,xt.data.widthLimit),kt.type.Y=Lt+5,Lt=kt.type.Y+kt.type.height}if(kt.descr&&kt.descr.text!==""){let Yt=boundaryFont(conf$a);Yt.fontSize=Yt.fontSize-2,calcC4ShapeTextWH("descr",kt,Pt,Yt,xt.data.widthLimit),kt.descr.Y=Lt+20,Lt=kt.descr.Y+kt.descr.height}if(Et==0||Et%c4BoundaryInRow===0){let Yt=it.data.startx+conf$a.diagramMarginX,Zt=it.data.stopy+conf$a.diagramMarginY+Lt;xt.setData(Yt,Yt,Zt,Zt)}else{let Yt=xt.data.stopx!==xt.data.startx?xt.data.stopx+conf$a.diagramMarginX:xt.data.startx,Zt=xt.data.starty;xt.setData(Yt,Yt,Zt,Zt)}xt.name=kt.alias;let Dt=bt.db.getC4ShapeArray(kt.alias),Bt=bt.db.getC4ShapeKeys(kt.alias);Bt.length>0&&drawC4ShapeArray(xt,nt,Dt,Bt),rt=kt.alias;let Ft=bt.db.getBoundarys(rt);Ft.length>0&&drawInsideBoundary(nt,rt,xt,Ft,bt),kt.alias!=="global"&&drawBoundary(nt,kt,xt),it.data.stopy=Math.max(xt.data.stopy+conf$a.c4ShapeMargin,it.data.stopy),it.data.stopx=Math.max(xt.data.stopx+conf$a.c4ShapeMargin,it.data.stopx),globalBoundaryMaxX=Math.max(globalBoundaryMaxX,it.data.stopx),globalBoundaryMaxY=Math.max(globalBoundaryMaxY,it.data.stopy)}}const draw$e=function(nt,rt,it,st){conf$a=getConfig$1().c4;const bt=getConfig$1().securityLevel;let xt;bt==="sandbox"&&(xt=select("#i"+rt));const Et=select(bt==="sandbox"?xt.nodes()[0].contentDocument.body:"body");let kt=st.db;st.db.setWrap(conf$a.wrap),c4ShapeInRow=kt.getC4ShapeInRow(),c4BoundaryInRow=kt.getC4BoundaryInRow(),log$1.debug(`C:${JSON.stringify(conf$a,null,2)}`);const Lt=bt==="sandbox"?Et.select(`[id="${rt}"]`):select(`[id="${rt}"]`);svgDraw$3.insertComputerIcon(Lt),svgDraw$3.insertDatabaseIcon(Lt),svgDraw$3.insertClockIcon(Lt);let Pt=new Bounds(st);Pt.setData(conf$a.diagramMarginX,conf$a.diagramMarginX,conf$a.diagramMarginY,conf$a.diagramMarginY),Pt.data.widthLimit=screen.availWidth,globalBoundaryMaxX=conf$a.diagramMarginX,globalBoundaryMaxY=conf$a.diagramMarginY;const Rt=st.db.getTitle();let Dt=st.db.getBoundarys("");drawInsideBoundary(Lt,"",Pt,Dt,st),svgDraw$3.insertArrowHead(Lt),svgDraw$3.insertArrowEnd(Lt),svgDraw$3.insertArrowCrossHead(Lt),svgDraw$3.insertArrowFilledHead(Lt),drawRels(Lt,st.db.getRels(),st.db.getC4Shape,st),Pt.data.stopx=globalBoundaryMaxX,Pt.data.stopy=globalBoundaryMaxY;const Bt=Pt.data;let Yt=Bt.stopy-Bt.starty+2*conf$a.diagramMarginY;const Wt=Bt.stopx-Bt.startx+2*conf$a.diagramMarginX;Rt&&Lt.append("text").text(Rt).attr("x",(Bt.stopx-Bt.startx)/2-4*conf$a.diagramMarginX).attr("y",Bt.starty+conf$a.diagramMarginY),configureSvgSize(Lt,Yt,Wt,conf$a.useMaxWidth);const Qt=Rt?60:0;Lt.attr("viewBox",Bt.startx-conf$a.diagramMarginX+" -"+(conf$a.diagramMarginY+Qt)+" "+Wt+" "+(Yt+Qt)),log$1.debug("models:",Bt)},c4Renderer={drawPersonOrSystemArray:drawC4ShapeArray,drawBoundary,setConf:setConf$a,draw:draw$e};var parser$a=function(){var nt=function(pr,Cn,rn,dn){for(rn=rn||{},dn=pr.length;dn--;rn[pr[dn]]=Cn);return rn},rt=[1,3],it=[1,7],st=[1,8],bt=[1,9],xt=[1,10],Et=[1,13],kt=[1,12],Lt=[1,16,25],Pt=[1,20],Rt=[1,32],Dt=[1,33],Bt=[1,34],Ft=[1,36],Yt=[1,39],Zt=[1,37],Wt=[1,38],Qt=[1,44],Kt=[1,45],on=[1,40],nn=[1,41],mn=[1,42],gn=[1,43],Tn=[1,48],An=[1,49],kn=[1,50],Mn=[1,51],$n=[16,25],cn=[1,65],Sn=[1,66],an=[1,67],jn=[1,68],hn=[1,69],zn=[1,70],ir=[1,71],tr=[1,80],nr=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],dr=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],or=[5,8,9,10,11,16,19,23,25],ur=[54,88,89,90,91],Cr=[54,65,66,88,89,90,91],Sr=[54,60,61,62,63,64,88,89,90,91],rr=[16,25,32],Fr=[1,107],mr={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(Cn,rn,dn,fn,On,xn,hr){var Nn=xn.length-1;switch(On){case 5:fn.setDirection("TB");break;case 6:fn.setDirection("BT");break;case 7:fn.setDirection("RL");break;case 8:fn.setDirection("LR");break;case 12:fn.parseDirective("%%{","open_directive");break;case 13:fn.parseDirective(xn[Nn],"type_directive");break;case 14:xn[Nn]=xn[Nn].trim().replace(/'/g,'"'),fn.parseDirective(xn[Nn],"arg_directive");break;case 15:fn.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=xn[Nn];break;case 22:this.$=xn[Nn-1]+xn[Nn];break;case 23:case 24:this.$=xn[Nn-1]+"~"+xn[Nn];break;case 25:fn.addRelation(xn[Nn]);break;case 26:xn[Nn-1].title=fn.cleanupLabel(xn[Nn]),fn.addRelation(xn[Nn-1]);break;case 35:this.$=xn[Nn].trim(),fn.setAccTitle(this.$);break;case 36:case 37:this.$=xn[Nn].trim(),fn.setAccDescription(this.$);break;case 38:fn.addClass(xn[Nn]);break;case 39:fn.addClass(xn[Nn-2]),fn.setCssClass(xn[Nn-2],xn[Nn]);break;case 40:fn.addClass(xn[Nn-3]),fn.addMembers(xn[Nn-3],xn[Nn-1]);break;case 41:fn.addClass(xn[Nn-5]),fn.setCssClass(xn[Nn-5],xn[Nn-3]),fn.addMembers(xn[Nn-5],xn[Nn-1]);break;case 42:fn.addAnnotation(xn[Nn],xn[Nn-2]);break;case 43:this.$=[xn[Nn]];break;case 44:xn[Nn].push(xn[Nn-1]),this.$=xn[Nn];break;case 45:break;case 46:fn.addMember(xn[Nn-1],fn.cleanupLabel(xn[Nn]));break;case 47:break;case 48:break;case 49:this.$={id1:xn[Nn-2],id2:xn[Nn],relation:xn[Nn-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:xn[Nn-3],id2:xn[Nn],relation:xn[Nn-1],relationTitle1:xn[Nn-2],relationTitle2:"none"};break;case 51:this.$={id1:xn[Nn-3],id2:xn[Nn],relation:xn[Nn-2],relationTitle1:"none",relationTitle2:xn[Nn-1]};break;case 52:this.$={id1:xn[Nn-4],id2:xn[Nn],relation:xn[Nn-2],relationTitle1:xn[Nn-3],relationTitle2:xn[Nn-1]};break;case 53:fn.addNote(xn[Nn],xn[Nn-1]);break;case 54:fn.addNote(xn[Nn]);break;case 55:this.$={type1:xn[Nn-2],type2:xn[Nn],lineType:xn[Nn-1]};break;case 56:this.$={type1:"none",type2:xn[Nn],lineType:xn[Nn-1]};break;case 57:this.$={type1:xn[Nn-1],type2:"none",lineType:xn[Nn]};break;case 58:this.$={type1:"none",type2:"none",lineType:xn[Nn]};break;case 59:this.$=fn.relationType.AGGREGATION;break;case 60:this.$=fn.relationType.EXTENSION;break;case 61:this.$=fn.relationType.COMPOSITION;break;case 62:this.$=fn.relationType.DEPENDENCY;break;case 63:this.$=fn.relationType.LOLLIPOP;break;case 64:this.$=fn.lineType.LINE;break;case 65:this.$=fn.lineType.DOTTED_LINE;break;case 66:case 72:this.$=xn[Nn-2],fn.setClickEvent(xn[Nn-1],xn[Nn]);break;case 67:case 73:this.$=xn[Nn-3],fn.setClickEvent(xn[Nn-2],xn[Nn-1]),fn.setTooltip(xn[Nn-2],xn[Nn]);break;case 68:case 76:this.$=xn[Nn-2],fn.setLink(xn[Nn-1],xn[Nn]);break;case 69:this.$=xn[Nn-3],fn.setLink(xn[Nn-2],xn[Nn-1],xn[Nn]);break;case 70:case 78:this.$=xn[Nn-3],fn.setLink(xn[Nn-2],xn[Nn-1]),fn.setTooltip(xn[Nn-2],xn[Nn]);break;case 71:case 79:this.$=xn[Nn-4],fn.setLink(xn[Nn-3],xn[Nn-2],xn[Nn]),fn.setTooltip(xn[Nn-3],xn[Nn-1]);break;case 74:this.$=xn[Nn-3],fn.setClickEvent(xn[Nn-2],xn[Nn-1],xn[Nn]);break;case 75:this.$=xn[Nn-4],fn.setClickEvent(xn[Nn-3],xn[Nn-2],xn[Nn-1]),fn.setTooltip(xn[Nn-3],xn[Nn]);break;case 77:this.$=xn[Nn-3],fn.setLink(xn[Nn-2],xn[Nn-1],xn[Nn]);break;case 80:fn.setCssClass(xn[Nn-1],xn[Nn]);break}},table:[{3:1,4:2,5:rt,6:4,7:5,8:it,9:st,10:bt,11:xt,12:6,13:11,19:Et,23:kt},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:rt,6:4,7:5,8:it,9:st,10:bt,11:xt,12:6,13:11,19:Et,23:kt},{1:[2,9]},nt(Lt,[2,5]),nt(Lt,[2,6]),nt(Lt,[2,7]),nt(Lt,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:Pt},nt([17,22],[2,13]),{6:31,7:30,8:it,9:st,10:bt,11:xt,13:11,19:Et,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Rt,41:Dt,43:Bt,44:Ft,49:Yt,51:Zt,52:Wt,55:Qt,57:Kt,67:on,68:nn,70:mn,74:gn,88:Tn,89:An,90:kn,91:Mn},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},nt($n,[2,25],{32:[1,57]}),nt($n,[2,27]),nt($n,[2,28]),nt($n,[2,29]),nt($n,[2,30]),nt($n,[2,31]),nt($n,[2,32]),nt($n,[2,33]),nt($n,[2,34]),{40:[1,58]},{42:[1,59]},nt($n,[2,37]),nt($n,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:cn,61:Sn,62:an,63:jn,64:hn,65:zn,66:ir}),{27:72,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},nt($n,[2,47]),nt($n,[2,48]),{28:73,88:Tn,89:An,90:kn},{27:74,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},{27:75,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},{27:76,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},{54:[1,77]},{27:78,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},{54:tr,56:79},nt(nr,[2,20],{28:46,29:47,27:81,30:[1,82],88:Tn,89:An,90:kn,91:Mn}),nt(nr,[2,21],{30:[1,83]}),nt(dr,[2,94]),nt(dr,[2,95]),nt(dr,[2,96]),nt([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),nt(or,[2,10]),{15:84,22:Pt},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:it,9:st,10:bt,11:xt,13:11,19:Et,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Rt,41:Dt,43:Bt,44:Ft,49:Yt,51:Zt,52:Wt,55:Qt,57:Kt,67:on,68:nn,70:mn,74:gn,88:Tn,89:An,90:kn,91:Mn},nt($n,[2,26]),nt($n,[2,35]),nt($n,[2,36]),{27:86,28:46,29:47,54:[1,87],88:Tn,89:An,90:kn,91:Mn},{53:88,58:63,59:64,60:cn,61:Sn,62:an,63:jn,64:hn,65:zn,66:ir},nt($n,[2,46]),{59:89,65:zn,66:ir},nt(ur,[2,58],{58:90,60:cn,61:Sn,62:an,63:jn,64:hn}),nt(Cr,[2,59]),nt(Cr,[2,60]),nt(Cr,[2,61]),nt(Cr,[2,62]),nt(Cr,[2,63]),nt(Sr,[2,64]),nt(Sr,[2,65]),nt($n,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:Tn,89:An,90:kn},{54:tr,56:99},nt($n,[2,54]),nt($n,[2,98]),nt(nr,[2,22]),nt(nr,[2,23]),nt(nr,[2,24]),{16:[1,100]},{25:[2,19]},nt(rr,[2,49]),{27:101,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},{27:102,28:46,29:47,54:[1,103],88:Tn,89:An,90:kn,91:Mn},nt(ur,[2,57],{58:104,60:cn,61:Sn,62:an,63:jn,64:hn}),nt(ur,[2,56]),{28:105,88:Tn,89:An,90:kn},{47:106,51:Fr},{27:108,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},nt($n,[2,66],{54:[1,109]}),nt($n,[2,68],{54:[1,111],69:[1,110]}),nt($n,[2,72],{54:[1,112],72:[1,113]}),nt($n,[2,76],{54:[1,115],69:[1,114]}),nt($n,[2,80]),nt($n,[2,53]),nt(or,[2,11]),nt(rr,[2,51]),nt(rr,[2,50]),{27:116,28:46,29:47,88:Tn,89:An,90:kn,91:Mn},nt(ur,[2,55]),nt($n,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:Fr},nt($n,[2,42]),nt($n,[2,67]),nt($n,[2,69]),nt($n,[2,70],{69:[1,120]}),nt($n,[2,73]),nt($n,[2,74],{54:[1,121]}),nt($n,[2,77]),nt($n,[2,78],{69:[1,122]}),nt(rr,[2,52]),{47:123,51:Fr},nt($n,[2,40]),{48:[2,44]},nt($n,[2,71]),nt($n,[2,75]),nt($n,[2,79]),{48:[1,124]},nt($n,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(Cn,rn){if(rn.recoverable)this.trace(Cn);else{var dn=new Error(Cn);throw dn.hash=rn,dn}},parse:function(Cn){var rn=this,dn=[0],fn=[],On=[null],xn=[],hr=this.table,Nn="",Kn=0,Un=0,sr=2,ar=1,wr=xn.slice.call(arguments,1),vr=Object.create(this.lexer),Rr={yy:{}};for(var ci in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ci)&&(Rr.yy[ci]=this.yy[ci]);vr.setInput(Cn,Rr.yy),Rr.yy.lexer=vr,Rr.yy.parser=this,typeof vr.yylloc>"u"&&(vr.yylloc={});var mi=vr.yylloc;xn.push(mi);var si=vr.options&&vr.options.ranges;typeof Rr.yy.parseError=="function"?this.parseError=Rr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function yi(){var gr;return gr=fn.pop()||vr.lex()||ar,typeof gr!="number"&&(gr instanceof Array&&(fn=gr,gr=fn.pop()),gr=rn.symbols_[gr]||gr),gr}for(var Ni,Ii,Mi,Or,Ln={},En,Wn,er,fr;;){if(Ii=dn[dn.length-1],this.defaultActions[Ii]?Mi=this.defaultActions[Ii]:((Ni===null||typeof Ni>"u")&&(Ni=yi()),Mi=hr[Ii]&&hr[Ii][Ni]),typeof Mi>"u"||!Mi.length||!Mi[0]){var Zr="";fr=[];for(En in hr[Ii])this.terminals_[En]&&En>sr&&fr.push("'"+this.terminals_[En]+"'");vr.showPosition?Zr="Parse error on line "+(Kn+1)+`:
`+vr.showPosition()+`
Expecting `+fr.join(", ")+", got '"+(this.terminals_[Ni]||Ni)+"'":Zr="Parse error on line "+(Kn+1)+": Unexpected "+(Ni==ar?"end of input":"'"+(this.terminals_[Ni]||Ni)+"'"),this.parseError(Zr,{text:vr.match,token:this.terminals_[Ni]||Ni,line:vr.yylineno,loc:mi,expected:fr})}if(Mi[0]instanceof Array&&Mi.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ii+", token: "+Ni);switch(Mi[0]){case 1:dn.push(Ni),On.push(vr.yytext),xn.push(vr.yylloc),dn.push(Mi[1]),Ni=null,Un=vr.yyleng,Nn=vr.yytext,Kn=vr.yylineno,mi=vr.yylloc;break;case 2:if(Wn=this.productions_[Mi[1]][1],Ln.$=On[On.length-Wn],Ln._$={first_line:xn[xn.length-(Wn||1)].first_line,last_line:xn[xn.length-1].last_line,first_column:xn[xn.length-(Wn||1)].first_column,last_column:xn[xn.length-1].last_column},si&&(Ln._$.range=[xn[xn.length-(Wn||1)].range[0],xn[xn.length-1].range[1]]),Or=this.performAction.apply(Ln,[Nn,Un,Kn,Rr.yy,Mi[1],On,xn].concat(wr)),typeof Or<"u")return Or;Wn&&(dn=dn.slice(0,-1*Wn*2),On=On.slice(0,-1*Wn),xn=xn.slice(0,-1*Wn)),dn.push(this.productions_[Mi[1]][0]),On.push(Ln.$),xn.push(Ln._$),er=hr[dn[dn.length-2]][dn[dn.length-1]],dn.push(er);break;case 3:return!0}}return!0}},_r=function(){var pr={EOF:1,parseError:function(rn,dn){if(this.yy.parser)this.yy.parser.parseError(rn,dn);else throw new Error(rn)},setInput:function(Cn,rn){return this.yy=rn||this.yy||{},this._input=Cn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Cn=this._input[0];this.yytext+=Cn,this.yyleng++,this.offset++,this.match+=Cn,this.matched+=Cn;var rn=Cn.match(/(?:\r\n?|\n).*/g);return rn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Cn},unput:function(Cn){var rn=Cn.length,dn=Cn.split(/(?:\r\n?|\n)/g);this._input=Cn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-rn),this.offset-=rn;var fn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),dn.length-1&&(this.yylineno-=dn.length-1);var On=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:dn?(dn.length===fn.length?this.yylloc.first_column:0)+fn[fn.length-dn.length].length-dn[0].length:this.yylloc.first_column-rn},this.options.ranges&&(this.yylloc.range=[On[0],On[0]+this.yyleng-rn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Cn){this.unput(this.match.slice(Cn))},pastInput:function(){var Cn=this.matched.substr(0,this.matched.length-this.match.length);return(Cn.length>20?"...":"")+Cn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Cn=this.match;return Cn.length<20&&(Cn+=this._input.substr(0,20-Cn.length)),(Cn.substr(0,20)+(Cn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Cn=this.pastInput(),rn=new Array(Cn.length+1).join("-");return Cn+this.upcomingInput()+`
`+rn+"^"},test_match:function(Cn,rn){var dn,fn,On;if(this.options.backtrack_lexer&&(On={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(On.yylloc.range=this.yylloc.range.slice(0))),fn=Cn[0].match(/(?:\r\n?|\n).*/g),fn&&(this.yylineno+=fn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:fn?fn[fn.length-1].length-fn[fn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Cn[0].length},this.yytext+=Cn[0],this.match+=Cn[0],this.matches=Cn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Cn[0].length),this.matched+=Cn[0],dn=this.performAction.call(this,this.yy,this,rn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),dn)return dn;if(this._backtrack){for(var xn in On)this[xn]=On[xn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Cn,rn,dn,fn;this._more||(this.yytext="",this.match="");for(var On=this._currentRules(),xn=0;xn<On.length;xn++)if(dn=this._input.match(this.rules[On[xn]]),dn&&(!rn||dn[0].length>rn[0].length)){if(rn=dn,fn=xn,this.options.backtrack_lexer){if(Cn=this.test_match(dn,On[xn]),Cn!==!1)return Cn;if(this._backtrack){rn=!1;continue}else return!1}else if(!this.options.flex)break}return rn?(Cn=this.test_match(rn,On[fn]),Cn!==!1?Cn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var rn=this.next();return rn||this.lex()},begin:function(rn){this.conditionStack.push(rn)},popState:function(){var rn=this.conditionStack.length-1;return rn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(rn){return rn=this.conditionStack.length-1-Math.abs(rn||0),rn>=0?this.conditionStack[rn]:"INITIAL"},pushState:function(rn){this.begin(rn)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(rn,dn,fn,On){switch(fn){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return pr}();mr.lexer=_r;function yr(){this.yy={}}return yr.prototype=mr,mr.Parser=yr,new yr}();parser$a.parser=parser$a;const classParser=parser$a,classDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*classDiagram/)!==null},classDetectorV2=(nt,rt)=>{var it;return nt.match(/^\s*classDiagram/)!==null&&((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!0:nt.match(/^\s*classDiagram-v2/)!==null},MERMAID_DOM_ID_PREFIX$1="classid-";let relations$1=[],classes$2={},notes=[],classCounter=0,funs$2=[];const sanitizeText$2=nt=>common$1.sanitizeText(nt,getConfig$1()),parseDirective$8=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},splitClassNameAndType=function(nt){let rt="",it=nt;if(nt.indexOf("~")>0){let st=nt.split("~");it=st[0],rt=common$1.sanitizeText(st[1],getConfig$1())}return{className:it,type:rt}},addClass$1=function(nt){let rt=splitClassNameAndType(nt);classes$2[rt.className]===void 0&&(classes$2[rt.className]={id:rt.className,type:rt.type,cssClasses:[],methods:[],members:[],annotations:[],domId:MERMAID_DOM_ID_PREFIX$1+rt.className+"-"+classCounter},classCounter++)},lookUpDomId$1=function(nt){const rt=Object.keys(classes$2);for(const it of rt)if(classes$2[it].id===nt)return classes$2[it].domId},clear$c=function(){relations$1=[],classes$2={},notes=[],funs$2=[],funs$2.push(setupToolTips$1),clear$g()},getClass=function(nt){return classes$2[nt]},getClasses$5=function(){return classes$2},getRelations$1=function(){return relations$1},getNotes=function(){return notes},addRelation$1=function(nt){log$1.debug("Adding relation: "+JSON.stringify(nt)),addClass$1(nt.id1),addClass$1(nt.id2),nt.id1=splitClassNameAndType(nt.id1).className,nt.id2=splitClassNameAndType(nt.id2).className,nt.relationTitle1=common$1.sanitizeText(nt.relationTitle1.trim(),getConfig$1()),nt.relationTitle2=common$1.sanitizeText(nt.relationTitle2.trim(),getConfig$1()),relations$1.push(nt)},addAnnotation=function(nt,rt){const it=splitClassNameAndType(nt).className;classes$2[it].annotations.push(rt)},addMember=function(nt,rt){const it=splitClassNameAndType(nt).className,st=classes$2[it];if(typeof rt=="string"){const bt=rt.trim();bt.startsWith("<<")&&bt.endsWith(">>")?st.annotations.push(sanitizeText$2(bt.substring(2,bt.length-2))):bt.indexOf(")")>0?st.methods.push(sanitizeText$2(bt)):bt&&st.members.push(sanitizeText$2(bt))}},addMembers=function(nt,rt){Array.isArray(rt)&&(rt.reverse(),rt.forEach(it=>addMember(nt,it)))},addNote$1=function(nt,rt){const it={id:`note${notes.length}`,class:rt,text:nt};notes.push(it)},cleanupLabel$1=function(nt){return nt.substring(0,1)===":"?common$1.sanitizeText(nt.substr(1).trim(),getConfig$1()):sanitizeText$2(nt.trim())},setCssClass$1=function(nt,rt){nt.split(",").forEach(function(it){let st=it;it[0].match(/\d/)&&(st=MERMAID_DOM_ID_PREFIX$1+st),classes$2[st]!==void 0&&classes$2[st].cssClasses.push(rt)})},setTooltip$1=function(nt,rt){const it=getConfig$1();nt.split(",").forEach(function(st){rt!==void 0&&(classes$2[st].tooltip=common$1.sanitizeText(rt,it))})},getTooltip$1=function(nt){return classes$2[nt].tooltip},setLink$2=function(nt,rt,it){const st=getConfig$1();nt.split(",").forEach(function(bt){let xt=bt;bt[0].match(/\d/)&&(xt=MERMAID_DOM_ID_PREFIX$1+xt),classes$2[xt]!==void 0&&(classes$2[xt].link=utils.formatUrl(rt,st),st.securityLevel==="sandbox"?classes$2[xt].linkTarget="_top":typeof it=="string"?classes$2[xt].linkTarget=sanitizeText$2(it):classes$2[xt].linkTarget="_blank")}),setCssClass$1(nt,"clickable")},setClickEvent$2=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFunc(st,rt,it),classes$2[st].haveCallback=!0}),setCssClass$1(nt,"clickable")},setClickFunc=function(nt,rt,it){const st=getConfig$1();let bt=nt,xt=lookUpDomId$1(bt);if(st.securityLevel==="loose"&&rt!==void 0&&classes$2[bt]!==void 0){let Et=[];if(typeof it=="string"){Et=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let kt=0;kt<Et.length;kt++){let Lt=Et[kt].trim();Lt.charAt(0)==='"'&&Lt.charAt(Lt.length-1)==='"'&&(Lt=Lt.substr(1,Lt.length-2)),Et[kt]=Lt}}Et.length===0&&Et.push(xt),funs$2.push(function(){const kt=document.querySelector(`[id="${xt}"]`);kt!==null&&kt.addEventListener("click",function(){utils.runFunc(rt,...Et)},!1)})}},bindFunctions$2=function(nt){funs$2.forEach(function(rt){rt(nt)})},lineType$1={LINE:0,DOTTED_LINE:1},relationType$1={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setupToolTips$1=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const bt=select(this);if(bt.attr("title")===null)return;const Et=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(bt.attr("title")).style("left",window.scrollX+Et.left+(Et.right-Et.left)/2+"px").style("top",window.scrollY+Et.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),bt.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$2.push(setupToolTips$1);let direction$2="TB";const getDirection$2=()=>direction$2,setDirection$2=nt=>{direction$2=nt},classDb={parseDirective:parseDirective$8,setAccTitle,getAccTitle,getAccDescription,setAccDescription,getConfig:()=>getConfig$1().class,addClass:addClass$1,bindFunctions:bindFunctions$2,clear:clear$c,getClass,getClasses:getClasses$5,getNotes,addAnnotation,addNote:addNote$1,getRelations:getRelations$1,addRelation:addRelation$1,getDirection:getDirection$2,setDirection:setDirection$2,addMember,addMembers,cleanupLabel:cleanupLabel$1,lineType:lineType$1,relationType:relationType$1,setClickEvent:setClickEvent$2,setCssClass:setCssClass$1,setLink:setLink$2,getTooltip:getTooltip$1,setTooltip:setTooltip$1,lookUpDomId:lookUpDomId$1,setDiagramTitle,getDiagramTitle};let edgeCount$1=0;const drawEdge$1=function(nt,rt,it,st,bt){const xt=function(Kt){switch(Kt){case bt.db.relationType.AGGREGATION:return"aggregation";case bt.db.relationType.EXTENSION:return"extension";case bt.db.relationType.COMPOSITION:return"composition";case bt.db.relationType.DEPENDENCY:return"dependency";case bt.db.relationType.LOLLIPOP:return"lollipop"}};rt.points=rt.points.filter(Kt=>!Number.isNaN(Kt.y));const Et=rt.points,kt=line$1().x(function(Kt){return Kt.x}).y(function(Kt){return Kt.y}).curve(curveBasis),Lt=nt.append("path").attr("d",kt(Et)).attr("id","edge"+edgeCount$1).attr("class","relation");let Pt="";st.arrowMarkerAbsolute&&(Pt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Pt=Pt.replace(/\(/g,"\\("),Pt=Pt.replace(/\)/g,"\\)")),it.relation.lineType==1&&Lt.attr("class","relation dashed-line"),it.relation.lineType==10&&Lt.attr("class","relation dotted-line"),it.relation.type1!=="none"&&Lt.attr("marker-start","url("+Pt+"#"+xt(it.relation.type1)+"Start)"),it.relation.type2!=="none"&&Lt.attr("marker-end","url("+Pt+"#"+xt(it.relation.type2)+"End)");let Rt,Dt;const Bt=rt.points.length;let Ft=utils.calcLabelPosition(rt.points);Rt=Ft.x,Dt=Ft.y;let Yt,Zt,Wt,Qt;if(Bt%2!==0&&Bt>1){let Kt=utils.calcCardinalityPosition(it.relation.type1!=="none",rt.points,rt.points[0]),on=utils.calcCardinalityPosition(it.relation.type2!=="none",rt.points,rt.points[Bt-1]);log$1.debug("cardinality_1_point "+JSON.stringify(Kt)),log$1.debug("cardinality_2_point "+JSON.stringify(on)),Yt=Kt.x,Zt=Kt.y,Wt=on.x,Qt=on.y}if(it.title!==void 0){const Kt=nt.append("g").attr("class","classLabel"),on=Kt.append("text").attr("class","label").attr("x",Rt).attr("y",Dt).attr("fill","red").attr("text-anchor","middle").text(it.title);window.label=on;const nn=on.node().getBBox();Kt.insert("rect",":first-child").attr("class","box").attr("x",nn.x-st.padding/2).attr("y",nn.y-st.padding/2).attr("width",nn.width+st.padding).attr("height",nn.height+st.padding)}log$1.info("Rendering relation "+JSON.stringify(it)),it.relationTitle1!==void 0&&it.relationTitle1!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",Yt).attr("y",Zt).attr("fill","black").attr("font-size","6").text(it.relationTitle1),it.relationTitle2!==void 0&&it.relationTitle2!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",Wt).attr("y",Qt).attr("fill","black").attr("font-size","6").text(it.relationTitle2),edgeCount$1++},drawClass=function(nt,rt,it,st){log$1.debug("Rendering class ",rt,it);const bt=rt.id,xt={id:bt,label:rt.id,width:0,height:0},Et=nt.append("g").attr("id",st.db.lookUpDomId(bt)).attr("class","classGroup");let kt;rt.link?kt=Et.append("svg:a").attr("xlink:href",rt.link).attr("target",rt.linkTarget).append("text").attr("y",it.textHeight+it.padding).attr("x",0):kt=Et.append("text").attr("y",it.textHeight+it.padding).attr("x",0);let Lt=!0;rt.annotations.forEach(function(mn){const gn=kt.append("tspan").text("\xAB"+mn+"\xBB");Lt||gn.attr("dy",it.textHeight),Lt=!1});let Pt=rt.id;rt.type!==void 0&&rt.type!==""&&(Pt+="<"+rt.type+">");const Rt=kt.append("tspan").text(Pt).attr("class","title");Lt||Rt.attr("dy",it.textHeight);const Dt=kt.node().getBBox().height,Bt=Et.append("line").attr("x1",0).attr("y1",it.padding+Dt+it.dividerMargin/2).attr("y2",it.padding+Dt+it.dividerMargin/2),Ft=Et.append("text").attr("x",it.padding).attr("y",Dt+it.dividerMargin+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.members.forEach(function(mn){addTspan(Ft,mn,Lt,it),Lt=!1});const Yt=Ft.node().getBBox(),Zt=Et.append("line").attr("x1",0).attr("y1",it.padding+Dt+it.dividerMargin+Yt.height).attr("y2",it.padding+Dt+it.dividerMargin+Yt.height),Wt=Et.append("text").attr("x",it.padding).attr("y",Dt+2*it.dividerMargin+Yt.height+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.methods.forEach(function(mn){addTspan(Wt,mn,Lt,it),Lt=!1});const Qt=Et.node().getBBox();var Kt=" ";rt.cssClasses.length>0&&(Kt=Kt+rt.cssClasses.join(" "));const nn=Et.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",Qt.width+2*it.padding).attr("height",Qt.height+it.padding+.5*it.dividerMargin).attr("class",Kt).node().getBBox().width;return kt.node().childNodes.forEach(function(mn){mn.setAttribute("x",(nn-mn.getBBox().width)/2)}),rt.tooltip&&kt.insert("title").text(rt.tooltip),Bt.attr("x2",nn),Zt.attr("x2",nn),xt.width=nn,xt.height=Qt.height+it.padding+.5*it.dividerMargin,xt},drawNote$2=function(nt,rt,it,st){log$1.debug("Rendering note ",rt,it);const bt=rt.id,xt={id:bt,text:rt.text,width:0,height:0},Et=nt.append("g").attr("id",bt).attr("class","classGroup");let kt=Et.append("text").attr("y",it.textHeight+it.padding).attr("x",0);const Lt=JSON.parse(`"${rt.text}"`).split(`
`);Lt.forEach(function(Bt){log$1.debug(`Adding line: ${Bt}`),kt.append("tspan").text(Bt).attr("class","title").attr("dy",it.textHeight)});const Pt=Et.node().getBBox(),Dt=Et.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",Pt.width+2*it.padding).attr("height",Pt.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin).node().getBBox().width;return kt.node().childNodes.forEach(function(Bt){Bt.setAttribute("x",(Dt-Bt.getBBox().width)/2)}),xt.width=Dt,xt.height=Pt.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin,xt},parseMember=function(nt){const rt=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,it=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let st=nt.match(rt),bt=nt.match(it);return st&&!bt?buildFieldDisplay(st):bt?buildMethodDisplay(bt):buildLegacyDisplay(nt)},buildFieldDisplay=function(nt){let rt="",it="";try{let st=nt[1]?nt[1].trim():"",bt=nt[2]?nt[2].trim():"",xt=nt[3]?parseGenericTypes(nt[3].trim()):"",Et=nt[4]?nt[4].trim():"",kt=nt[5]?nt[5].trim():"";it=st+bt+xt+" "+Et,rt=parseClassifier(kt)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildMethodDisplay=function(nt){let rt="",it="";try{let st=nt[1]?nt[1].trim():"",bt=nt[2]?nt[2].trim():"",xt=nt[3]?parseGenericTypes(nt[3].trim()):"",Et=nt[4]?nt[4].trim():"",kt=nt[5]?" : "+parseGenericTypes(nt[5]).trim():"";it=st+bt+"("+xt+")"+kt,rt=parseClassifier(Et)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildLegacyDisplay=function(nt){let rt="",it="",st="",bt=nt.indexOf("("),xt=nt.indexOf(")");if(bt>1&&xt>bt&&xt<=nt.length){let Et="",kt="",Lt=nt.substring(0,1);Lt.match(/\w/)?kt=nt.substring(0,bt).trim():(Lt.match(/[#+~-]/)&&(Et=Lt),kt=nt.substring(1,bt).trim());const Pt=nt.substring(bt+1,xt);nt.substring(xt+1,1),it=parseClassifier(nt.substring(xt+1,xt+2)),rt=Et+kt+"("+parseGenericTypes(Pt.trim())+")",xt<nt.length&&(st=nt.substring(xt+2).trim(),st!==""&&(st=" : "+parseGenericTypes(st),rt+=st))}else rt=parseGenericTypes(nt);return{displayText:rt,cssStyle:it}},addTspan=function(nt,rt,it,st){let bt=parseMember(rt);const xt=nt.append("tspan").attr("x",st.padding).text(bt.displayText);bt.cssStyle!==""&&xt.attr("style",bt.cssStyle),it||xt.attr("dy",st.textHeight)},parseClassifier=function(nt){switch(nt){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},svgDraw$2={drawClass,drawEdge:drawEdge$1,drawNote:drawNote$2,parseMember};let idCache$2={};const padding=20,getGraphId=function(nt){const rt=Object.entries(idCache$2).find(it=>it[1].label===nt);if(rt)return rt[0]},insertMarkers$4=function(nt){nt.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),nt.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},draw$d=function(nt,rt,it,st){const bt=getConfig$1().class;idCache$2={},log$1.info("Rendering diagram "+nt);const xt=getConfig$1().securityLevel;let Et;xt==="sandbox"&&(Et=select("#i"+rt));const kt=select(xt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=kt.select(`[id='${rt}']`);insertMarkers$4(Lt);const Pt=new Graph({multigraph:!0});Pt.setGraph({isMultiGraph:!0}),Pt.setDefaultEdgeLabel(function(){return{}});const Rt=st.db.getClasses(),Dt=Object.keys(Rt);for(const Kt of Dt){const on=Rt[Kt],nn=svgDraw$2.drawClass(Lt,on,bt,st);idCache$2[nn.id]=nn,Pt.setNode(nn.id,nn),log$1.info("Org height: "+nn.height)}st.db.getRelations().forEach(function(Kt){log$1.info("tjoho"+getGraphId(Kt.id1)+getGraphId(Kt.id2)+JSON.stringify(Kt)),Pt.setEdge(getGraphId(Kt.id1),getGraphId(Kt.id2),{relation:Kt},Kt.title||"DEFAULT")}),st.db.getNotes().forEach(function(Kt){log$1.debug(`Adding note: ${JSON.stringify(Kt)}`);const on=svgDraw$2.drawNote(Lt,Kt,bt,st);idCache$2[on.id]=on,Pt.setNode(on.id,on),Kt.class&&Kt.class in Rt&&Pt.setEdge(Kt.id,getGraphId(Kt.class),{relation:{id1:Kt.id,id2:Kt.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),layout(Pt),Pt.nodes().forEach(function(Kt){Kt!==void 0&&Pt.node(Kt)!==void 0&&(log$1.debug("Node "+Kt+": "+JSON.stringify(Pt.node(Kt))),kt.select("#"+(st.db.lookUpDomId(Kt)||Kt)).attr("transform","translate("+(Pt.node(Kt).x-Pt.node(Kt).width/2)+","+(Pt.node(Kt).y-Pt.node(Kt).height/2)+" )"))}),Pt.edges().forEach(function(Kt){Kt!==void 0&&Pt.edge(Kt)!==void 0&&(log$1.debug("Edge "+Kt.v+" -> "+Kt.w+": "+JSON.stringify(Pt.edge(Kt))),svgDraw$2.drawEdge(Lt,Pt.edge(Kt),Pt.edge(Kt).relation,bt,st))});const Yt=Lt.node().getBBox(),Zt=Yt.width+padding*2,Wt=Yt.height+padding*2;configureSvgSize(Lt,Wt,Zt,bt.useMaxWidth);const Qt=`${Yt.x-padding} ${Yt.y-padding} ${Zt} ${Wt}`;log$1.debug(`viewBox ${Qt}`),Lt.attr("viewBox",Qt)},classRenderer={draw:draw$d},insertMarkers$2=(nt,rt,it,st)=>{rt.forEach(bt=>{markers$1[bt](nt,it,st)})},extension=(nt,rt,it)=>{log$1.trace("Making markers for ",it),nt.append("defs").append("marker").attr("id",rt+"-extensionStart").attr("class","marker extension "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id",rt+"-extensionEnd").attr("class","marker extension "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-compositionStart").attr("class","marker composition "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-compositionEnd").attr("class","marker composition "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-aggregationStart").attr("class","marker aggregation "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-aggregationEnd").attr("class","marker aggregation "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-dependencyStart").attr("class","marker dependency "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-dependencyEnd").attr("class","marker dependency "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-lollipopStart").attr("class","marker lollipop "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point=(nt,rt)=>{nt.append("marker").attr("id",rt+"-pointEnd").attr("class","marker "+rt).attr("viewBox","0 0 12 20").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-pointStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle$1=(nt,rt)=>{nt.append("marker").attr("id",rt+"-circleEnd").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-circleStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross=(nt,rt)=>{nt.append("marker").attr("id",rt+"-crossEnd").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-crossStart").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},markers$1={extension,composition,aggregation,dependency,lollipop,point,circle:circle$1,cross,barb},insertMarkers$3=insertMarkers$2;function applyStyle(nt,rt){rt&&nt.attr("style",rt)}function addHtmlLabel(nt){const rt=select(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),it=rt.append("xhtml:div"),st=nt.label,bt=nt.isNode?"nodeLabel":"edgeLabel";return it.html('<span class="'+bt+'" '+(nt.labelStyle?'style="'+nt.labelStyle+'"':"")+">"+st+"</span>"),applyStyle(it,nt.labelStyle),it.style("display","inline-block"),it.style("white-space","nowrap"),it.attr("xmlns","http://www.w3.org/1999/xhtml"),rt.node()}const createLabel=(nt,rt,it,st)=>{let bt=nt||"";if(typeof bt=="object"&&(bt=bt[0]),evaluate(getConfig$1().flowchart.htmlLabels)){bt=bt.replace(/\\n|\n/g,"<br />"),log$1.info("vertexText"+bt);const xt={isNode:st,label:decodeEntities(bt).replace(/fa[blrs]?:fa-[\w-]+/g,kt=>`<i class='${kt.replace(":"," ")}'></i>`),labelStyle:rt.replace("fill:","color:")};return addHtmlLabel(xt)}else{const xt=document.createElementNS("http://www.w3.org/2000/svg","text");xt.setAttribute("style",rt.replace("color:","fill:"));let Et=[];typeof bt=="string"?Et=bt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(bt)?Et=bt:Et=[];for(const kt of Et){const Lt=document.createElementNS("http://www.w3.org/2000/svg","tspan");Lt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Lt.setAttribute("dy","1em"),Lt.setAttribute("x","0"),it?Lt.setAttribute("class","title-row"):Lt.setAttribute("class","row"),Lt.textContent=kt.trim(),xt.appendChild(Lt)}return xt}},createLabel$1=createLabel,labelHelper=(nt,rt,it,st)=>{let bt;it?bt=it:bt="node default";const xt=nt.insert("g").attr("class",bt).attr("id",rt.domId||rt.id),Et=xt.insert("g").attr("class","label").attr("style",rt.labelStyle);let kt;rt.labelText===void 0?kt="":kt=typeof rt.labelText=="string"?rt.labelText:rt.labelText[0];const Lt=Et.node().appendChild(createLabel$1(sanitizeText$5(decodeEntities(kt),getConfig$1()),rt.labelStyle,!1,st));let Pt=Lt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Dt=Lt.children[0],Bt=select(Lt);Pt=Dt.getBoundingClientRect(),Bt.attr("width",Pt.width),Bt.attr("height",Pt.height)}const Rt=rt.padding/2;return Et.attr("transform","translate("+-Pt.width/2+", "+-Pt.height/2+")"),{shapeSvg:xt,bbox:Pt,halfPadding:Rt,label:Et}},updateNodeBounds=(nt,rt)=>{const it=rt.node().getBBox();nt.width=it.width,nt.height=it.height};function insertPolygonShape$1(nt,rt,it,st){return nt.insert("polygon",":first-child").attr("points",st.map(function(bt){return bt.x+","+bt.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-rt/2+","+it/2+")")}let clusterDb={},descendants={},parents={};const clear$b=()=>{descendants={},parents={},clusterDb={}},isDescendant=(nt,rt)=>(log$1.trace("In isDecendant",rt," ",nt," = ",descendants[rt].includes(nt)),!!descendants[rt].includes(nt)),edgeInCluster=(nt,rt)=>(log$1.info("Decendants of ",rt," is ",descendants[rt]),log$1.info("Edge is ",nt),nt.v===rt||nt.w===rt?!1:descendants[rt]?descendants[rt].includes(nt.v)||isDescendant(nt.v,rt)||isDescendant(nt.w,rt)||descendants[rt].includes(nt.w):(log$1.debug("Tilt, ",rt,",not in decendants"),!1)),copy=(nt,rt,it,st)=>{log$1.warn("Copying children of ",nt,"root",st,"data",rt.node(nt),st);const bt=rt.children(nt)||[];nt!==st&&bt.push(nt),log$1.warn("Copying (nodes) clusterId",nt,"nodes",bt),bt.forEach(xt=>{if(rt.children(xt).length>0)copy(xt,rt,it,st);else{const Et=rt.node(xt);log$1.info("cp ",xt," to ",st," with parent ",nt),it.setNode(xt,Et),st!==rt.parent(xt)&&(log$1.warn("Setting parent",xt,rt.parent(xt)),it.setParent(xt,rt.parent(xt))),nt!==st&&xt!==nt?(log$1.debug("Setting parent",xt,nt),it.setParent(xt,nt)):(log$1.info("In copy ",nt,"root",st,"data",rt.node(nt),st),log$1.debug("Not Setting parent for node=",xt,"cluster!==rootId",nt!==st,"node!==clusterId",xt!==nt));const kt=rt.edges(xt);log$1.debug("Copying Edges",kt),kt.forEach(Lt=>{log$1.info("Edge",Lt);const Pt=rt.edge(Lt.v,Lt.w,Lt.name);log$1.info("Edge data",Pt,st);try{edgeInCluster(Lt,st)?(log$1.info("Copying as ",Lt.v,Lt.w,Pt,Lt.name),it.setEdge(Lt.v,Lt.w,Pt,Lt.name),log$1.info("newGraph edges ",it.edges(),it.edge(it.edges()[0]))):log$1.info("Skipping copy of edge ",Lt.v,"-->",Lt.w," rootId: ",st," clusterId:",nt)}catch(Rt){log$1.error(Rt)}})}log$1.debug("Removing node",xt),rt.removeNode(xt)})},extractDescendants=(nt,rt)=>{const it=rt.children(nt);let st=[...it];for(const bt of it)parents[bt]=nt,st=[...st,...extractDescendants(bt,rt)];return st},findNonClusterChild=(nt,rt)=>{log$1.trace("Searching",nt);const it=rt.children(nt);if(log$1.trace("Searching children of id ",nt,it),it.length<1)return log$1.trace("This is a valid node",nt),nt;for(const st of it){const bt=findNonClusterChild(st,rt);if(bt)return log$1.trace("Found replacement for",nt," => ",bt),bt}},getAnchorId=nt=>!clusterDb[nt]||!clusterDb[nt].externalConnections?nt:clusterDb[nt]?clusterDb[nt].id:nt,adjustClustersAndEdges=(nt,rt)=>{if(!nt||rt>10){log$1.debug("Opting out, no graph ");return}else log$1.debug("Opting in, graph ");nt.nodes().forEach(function(it){nt.children(it).length>0&&(log$1.warn("Cluster identified",it," Replacement id in edges: ",findNonClusterChild(it,nt)),descendants[it]=extractDescendants(it,nt),clusterDb[it]={id:findNonClusterChild(it,nt),clusterData:nt.node(it)})}),nt.nodes().forEach(function(it){const st=nt.children(it),bt=nt.edges();st.length>0?(log$1.debug("Cluster identified",it,descendants),bt.forEach(xt=>{if(xt.v!==it&&xt.w!==it){const Et=isDescendant(xt.v,it),kt=isDescendant(xt.w,it);Et^kt&&(log$1.warn("Edge: ",xt," leaves cluster ",it),log$1.warn("Decendants of XXX ",it,": ",descendants[it]),clusterDb[it].externalConnections=!0)}})):log$1.debug("Not a cluster ",it,descendants)}),nt.edges().forEach(function(it){const st=nt.edge(it);log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(it)),log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(nt.edge(it)));let bt=it.v,xt=it.w;if(log$1.warn("Fix XXX",clusterDb,"ids:",it.v,it.w,"Translating: ",clusterDb[it.v]," --- ",clusterDb[it.w]),clusterDb[it.v]&&clusterDb[it.w]&&clusterDb[it.v]===clusterDb[it.w]){log$1.warn("Fixing and trixing link to self - removing XXX",it.v,it.w,it.name),log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),bt=getAnchorId(it.v),xt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name);const Et=it.w+"---"+it.v;nt.setNode(Et,{domId:Et,id:Et,labelStyle:"",labelText:st.label,padding:0,shape:"labelRect",style:""});const kt=JSON.parse(JSON.stringify(st)),Lt=JSON.parse(JSON.stringify(st));kt.label="",kt.arrowTypeEnd="none",Lt.label="",kt.fromCluster=it.v,Lt.toCluster=it.v,nt.setEdge(bt,Et,kt,it.name+"-cyclic-special"),nt.setEdge(Et,xt,Lt,it.name+"-cyclic-special")}else(clusterDb[it.v]||clusterDb[it.w])&&(log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),bt=getAnchorId(it.v),xt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name),bt!==it.v&&(st.fromCluster=it.v),xt!==it.w&&(st.toCluster=it.w),log$1.warn("Fix Replacing with XXX",bt,xt,it.name),nt.setEdge(bt,xt,st,it.name))}),log$1.warn("Adjusted Graph",write(nt)),extractor(nt,0),log$1.trace(clusterDb)},extractor=(nt,rt)=>{if(log$1.warn("extractor - ",rt,write(nt),nt.children("D")),rt>10){log$1.error("Bailing out");return}let it=nt.nodes(),st=!1;for(const bt of it){const xt=nt.children(bt);st=st||xt.length>0}if(!st){log$1.debug("Done, no node has children",nt.nodes());return}log$1.debug("Nodes = ",it,rt);for(const bt of it)if(log$1.debug("Extracting node",bt,clusterDb,clusterDb[bt]&&!clusterDb[bt].externalConnections,!nt.parent(bt),nt.node(bt),nt.children("D")," Depth ",rt),!clusterDb[bt])log$1.debug("Not a cluster",bt,rt);else if(!clusterDb[bt].externalConnections&&nt.children(bt)&&nt.children(bt).length>0){log$1.warn("Cluster without external connections, without a parent and with children",bt,rt);let Et=nt.graph().rankdir==="TB"?"LR":"TB";clusterDb[bt]&&clusterDb[bt].clusterData&&clusterDb[bt].clusterData.dir&&(Et=clusterDb[bt].clusterData.dir,log$1.warn("Fixing dir",clusterDb[bt].clusterData.dir,Et));const kt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Et,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});log$1.warn("Old graph before copy",write(nt)),copy(bt,nt,kt,bt),nt.setNode(bt,{clusterNode:!0,id:bt,clusterData:clusterDb[bt].clusterData,labelText:clusterDb[bt].labelText,graph:kt}),log$1.warn("New graph after copy node: (",bt,")",write(kt)),log$1.debug("Old graph after copy",write(nt))}else log$1.warn("Cluster ** ",bt," **not meeting the criteria !externalConnections:",!clusterDb[bt].externalConnections," no parent: ",!nt.parent(bt)," children ",nt.children(bt)&&nt.children(bt).length>0,nt.children("D"),rt),log$1.debug(clusterDb);it=nt.nodes(),log$1.warn("New list of nodes",it);for(const bt of it){const xt=nt.node(bt);log$1.warn(" Now next level",bt,xt),xt.clusterNode&&extractor(xt.graph,rt+1)}},sorter=(nt,rt)=>{if(rt.length===0)return[];let it=Object.assign(rt);return rt.forEach(st=>{const bt=nt.children(st),xt=sorter(nt,bt);it=[...it,...xt]}),it},sortNodesByHierarchy=nt=>sorter(nt,nt.children());function intersectNode(nt,rt){return nt.intersect(rt)}function intersectEllipse(nt,rt,it,st){var bt=nt.x,xt=nt.y,Et=bt-st.x,kt=xt-st.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Et*Et),Pt=Math.abs(rt*it*Et/Lt);st.x<bt&&(Pt=-Pt);var Rt=Math.abs(rt*it*kt/Lt);return st.y<xt&&(Rt=-Rt),{x:bt+Pt,y:xt+Rt}}function intersectCircle(nt,rt,it){return intersectEllipse(nt,rt,rt,it)}function intersectLine(nt,rt,it,st){var bt,xt,Et,kt,Lt,Pt,Rt,Dt,Bt,Ft,Yt,Zt,Wt,Qt,Kt;if(bt=rt.y-nt.y,Et=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Bt=bt*it.x+Et*it.y+Lt,Ft=bt*st.x+Et*st.y+Lt,!(Bt!==0&&Ft!==0&&sameSign(Bt,Ft))&&(xt=st.y-it.y,kt=it.x-st.x,Pt=st.x*it.y-it.x*st.y,Rt=xt*nt.x+kt*nt.y+Pt,Dt=xt*rt.x+kt*rt.y+Pt,!(Rt!==0&&Dt!==0&&sameSign(Rt,Dt))&&(Yt=bt*kt-xt*Et,Yt!==0)))return Zt=Math.abs(Yt/2),Wt=Et*Pt-kt*Lt,Qt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,Wt=xt*Lt-bt*Pt,Kt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,{x:Qt,y:Kt}}function sameSign(nt,rt){return nt*rt>0}function intersectPolygon(nt,rt,it){var st=nt.x,bt=nt.y,xt=[],Et=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;typeof rt.forEach=="function"?rt.forEach(function(Yt){Et=Math.min(Et,Yt.x),kt=Math.min(kt,Yt.y)}):(Et=Math.min(Et,rt.x),kt=Math.min(kt,rt.y));for(var Lt=st-nt.width/2-Et,Pt=bt-nt.height/2-kt,Rt=0;Rt<rt.length;Rt++){var Dt=rt[Rt],Bt=rt[Rt<rt.length-1?Rt+1:0],Ft=intersectLine(nt,it,{x:Lt+Dt.x,y:Pt+Dt.y},{x:Lt+Bt.x,y:Pt+Bt.y});Ft&&xt.push(Ft)}return xt.length?(xt.length>1&&xt.sort(function(Yt,Zt){var Wt=Yt.x-it.x,Qt=Yt.y-it.y,Kt=Math.sqrt(Wt*Wt+Qt*Qt),on=Zt.x-it.x,nn=Zt.y-it.y,mn=Math.sqrt(on*on+nn*nn);return Kt<mn?-1:Kt===mn?0:1}),xt[0]):nt}const intersectRect=(nt,rt)=>{var it=nt.x,st=nt.y,bt=rt.x-it,xt=rt.y-st,Et=nt.width/2,kt=nt.height/2,Lt,Pt;return Math.abs(xt)*Et>Math.abs(bt)*kt?(xt<0&&(kt=-kt),Lt=xt===0?0:kt*bt/xt,Pt=kt):(bt<0&&(Et=-Et),Lt=Et,Pt=bt===0?0:Et*xt/bt),{x:it+Lt,y:st+Pt}},intersectRect$1=intersectRect,intersect={node:intersectNode,circle:intersectCircle,ellipse:intersectEllipse,polygon:intersectPolygon,rect:intersectRect$1},note=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.info("Classes = ",rt.classes);const xt=it.insert("rect",":first-child");return xt.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-st.width/2-bt).attr("y",-st.height/2-bt).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),updateNodeBounds(rt,xt),rt.intersect=function(Et){return intersect.rect(rt,Et)},it},note$1=note,question$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=bt+xt,kt=[{x:Et/2,y:0},{x:Et,y:-Et/2},{x:Et/2,y:-Et},{x:0,y:-Et/2}];log$1.info("Question main (Circle)");const Lt=insertPolygonShape$1(it,Et,Et,kt);return Lt.attr("style",rt.style),updateNodeBounds(rt,Lt),rt.intersect=function(Pt){return log$1.warn("Intersect called"),intersect.polygon(rt,kt,Pt)},it},choice=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=28,bt=[{x:0,y:st/2},{x:st/2,y:0},{x:0,y:-st/2},{x:-st/2,y:0}];return it.insert("polygon",":first-child").attr("points",bt.map(function(Et){return Et.x+","+Et.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),rt.width=28,rt.height=28,rt.intersect=function(Et){return intersect.circle(rt,14,Et)},it},hexagon$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=4,xt=st.height+rt.padding,Et=xt/bt,kt=st.width+2*Et+rt.padding,Lt=[{x:Et,y:0},{x:kt-Et,y:0},{x:kt,y:-xt/2},{x:kt-Et,y:-xt},{x:Et,y:-xt},{x:0,y:-xt/2}],Pt=insertPolygonShape$1(it,kt,xt,Lt);return Pt.attr("style",rt.style),updateNodeBounds(rt,Pt),rt.intersect=function(Rt){return intersect.polygon(rt,Lt,Rt)},it},rect_left_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:-xt/2,y:0},{x:bt,y:0},{x:bt,y:-xt},{x:-xt/2,y:-xt},{x:0,y:-xt/2}];return insertPolygonShape$1(it,bt,xt,Et).attr("style",rt.style),rt.width=bt+xt,rt.height=xt,rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},lean_right$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:-2*xt/6,y:0},{x:bt-xt/6,y:0},{x:bt+2*xt/6,y:-xt},{x:xt/6,y:-xt}],kt=insertPolygonShape$1(it,bt,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},lean_left$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:2*xt/6,y:0},{x:bt+xt/6,y:0},{x:bt-2*xt/6,y:-xt},{x:-xt/6,y:-xt}],kt=insertPolygonShape$1(it,bt,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:-2*xt/6,y:0},{x:bt+2*xt/6,y:0},{x:bt-xt/6,y:-xt},{x:xt/6,y:-xt}],kt=insertPolygonShape$1(it,bt,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},inv_trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:xt/6,y:0},{x:bt-xt/6,y:0},{x:bt+2*xt/6,y:-xt},{x:-2*xt/6,y:-xt}],kt=insertPolygonShape$1(it,bt,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},rect_right_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:0,y:0},{x:bt+xt/2,y:0},{x:bt,y:-xt/2},{x:bt+xt/2,y:-xt},{x:0,y:-xt}],kt=insertPolygonShape$1(it,bt,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},cylinder$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=bt/2,Et=xt/(2.5+bt/50),kt=st.height+Et+rt.padding,Lt="M 0,"+Et+" a "+xt+","+Et+" 0,0,0 "+bt+" 0 a "+xt+","+Et+" 0,0,0 "+-bt+" 0 l 0,"+kt+" a "+xt+","+Et+" 0,0,0 "+bt+" 0 l 0,"+-kt,Pt=it.attr("label-offset-y",Et).insert("path",":first-child").attr("style",rt.style).attr("d",Lt).attr("transform","translate("+-bt/2+","+-(kt/2+Et)+")");return updateNodeBounds(rt,Pt),rt.intersect=function(Rt){const Dt=intersect.rect(rt,Rt),Bt=Dt.x-rt.x;if(xt!=0&&(Math.abs(Bt)<rt.width/2||Math.abs(Bt)==rt.width/2&&Math.abs(Dt.y-rt.y)>rt.height/2-Et)){let Ft=Et*Et*(1-Bt*Bt/(xt*xt));Ft!=0&&(Ft=Math.sqrt(Ft)),Ft=Et-Ft,Rt.y-rt.y>0&&(Ft=-Ft),Dt.y+=Ft}return Dt},it},rect$1=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.trace("Classes = ",rt.classes);const xt=it.insert("rect",":first-child"),Et=st.width+rt.padding,kt=st.height+rt.padding;if(xt.attr("class","basic label-container").attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-st.width/2-bt).attr("y",-st.height/2-bt).attr("width",Et).attr("height",kt),rt.props){const Lt=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(xt,rt.props.borders,Et,kt),Lt.delete("borders")),Lt.forEach(Pt=>{log$1.warn(`Unknown node property ${Pt}`)})}return updateNodeBounds(rt,xt),rt.intersect=function(Lt){return intersect.rect(rt,Lt)},it},labelRect=(nt,rt)=>{const{shapeSvg:it}=labelHelper(nt,rt,"label",!0);log$1.trace("Classes = ",rt.classes);const st=it.insert("rect",":first-child"),bt=0,xt=0;if(st.attr("width",bt).attr("height",xt),it.attr("class","label edgeLabel"),rt.props){const Et=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(st,rt.props.borders,bt,xt),Et.delete("borders")),Et.forEach(kt=>{log$1.warn(`Unknown node property ${kt}`)})}return updateNodeBounds(rt,st),rt.intersect=function(Et){return intersect.rect(rt,Et)},it};function applyNodePropertyBorders(nt,rt,it,st){const bt=[],xt=kt=>{bt.push(kt,0)},Et=kt=>{bt.push(0,kt)};rt.includes("t")?(log$1.debug("add top border"),xt(it)):Et(it),rt.includes("r")?(log$1.debug("add right border"),xt(st)):Et(st),rt.includes("b")?(log$1.debug("add bottom border"),xt(it)):Et(it),rt.includes("l")?(log$1.debug("add left border"),xt(st)):Et(st),nt.attr("stroke-dasharray",bt.join(" "))}const rectWithTitle=(nt,rt)=>{let it;rt.classes?it="node "+rt.classes:it="node default";const st=nt.insert("g").attr("class",it).attr("id",rt.domId||rt.id),bt=st.insert("rect",":first-child"),xt=st.insert("line"),Et=st.insert("g").attr("class","label"),kt=rt.labelText.flat?rt.labelText.flat():rt.labelText;let Lt="";typeof kt=="object"?Lt=kt[0]:Lt=kt,log$1.info("Label text abc79",Lt,kt,typeof kt=="object");const Pt=Et.node().appendChild(createLabel$1(Lt,rt.labelStyle,!0,!0));let Rt={width:0,height:0};if(evaluate(getConfig$1().flowchart.htmlLabels)){const Zt=Pt.children[0],Wt=select(Pt);Rt=Zt.getBoundingClientRect(),Wt.attr("width",Rt.width),Wt.attr("height",Rt.height)}log$1.info("Text 2",kt);const Dt=kt.slice(1,kt.length);let Bt=Pt.getBBox();const Ft=Et.node().appendChild(createLabel$1(Dt.join?Dt.join("<br/>"):Dt,rt.labelStyle,!0,!0));if(evaluate(getConfig$1().flowchart.htmlLabels)){const Zt=Ft.children[0],Wt=select(Ft);Rt=Zt.getBoundingClientRect(),Wt.attr("width",Rt.width),Wt.attr("height",Rt.height)}const Yt=rt.padding/2;return select(Ft).attr("transform","translate( "+(Rt.width>Bt.width?0:(Bt.width-Rt.width)/2)+", "+(Bt.height+Yt+5)+")"),select(Pt).attr("transform","translate( "+(Rt.width<Bt.width?0:-(Bt.width-Rt.width)/2)+", "+0+")"),Rt=Et.node().getBBox(),Et.attr("transform","translate("+-Rt.width/2+", "+(-Rt.height/2-Yt+3)+")"),bt.attr("class","outer title-state").attr("x",-Rt.width/2-Yt).attr("y",-Rt.height/2-Yt).attr("width",Rt.width+rt.padding).attr("height",Rt.height+rt.padding),xt.attr("class","divider").attr("x1",-Rt.width/2-Yt).attr("x2",Rt.width/2+Yt).attr("y1",-Rt.height/2-Yt+Bt.height+Yt).attr("y2",-Rt.height/2-Yt+Bt.height+Yt),updateNodeBounds(rt,bt),rt.intersect=function(Zt){return intersect.rect(rt,Zt)},st},stadium$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.height+rt.padding,xt=st.width+bt/4+rt.padding,Et=it.insert("rect",":first-child").attr("style",rt.style).attr("rx",bt/2).attr("ry",bt/2).attr("x",-xt/2).attr("y",-bt/2).attr("width",xt).attr("height",bt);return updateNodeBounds(rt,Et),rt.intersect=function(kt){return intersect.rect(rt,kt)},it},circle=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,void 0,!0),xt=it.insert("circle",":first-child");return xt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+bt).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),log$1.info("Circle main"),updateNodeBounds(rt,xt),rt.intersect=function(Et){return log$1.info("Circle intersect",rt,st.width/2+bt,Et),intersect.circle(rt,st.width/2+bt,Et)},it},doublecircle=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:bt}=labelHelper(nt,rt,void 0,!0),xt=5,Et=it.insert("g",":first-child"),kt=Et.insert("circle"),Lt=Et.insert("circle");return kt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+bt+xt).attr("width",st.width+rt.padding+xt*2).attr("height",st.height+rt.padding+xt*2),Lt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+bt).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),log$1.info("DoubleCircle main"),updateNodeBounds(rt,kt),rt.intersect=function(Pt){return log$1.info("DoubleCircle intersect",rt,st.width/2+bt+xt,Pt),intersect.circle(rt,st.width/2+bt+xt,Pt)},it},subroutine$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),bt=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:0,y:0},{x:bt,y:0},{x:bt,y:-xt},{x:0,y:-xt},{x:0,y:0},{x:-8,y:0},{x:bt+8,y:0},{x:bt+8,y:-xt},{x:-8,y:-xt},{x:-8,y:0}],kt=insertPolygonShape$1(it,bt,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},start=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=it.insert("circle",":first-child");return st.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),updateNodeBounds(rt,st),rt.intersect=function(bt){return intersect.circle(rt,7,bt)},it},forkJoin=(nt,rt,it)=>{const st=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id);let bt=70,xt=10;it==="LR"&&(bt=10,xt=70);const Et=st.append("rect").attr("x",-1*bt/2).attr("y",-1*xt/2).attr("width",bt).attr("height",xt).attr("class","fork-join");return updateNodeBounds(rt,Et),rt.height=rt.height+rt.padding/2,rt.width=rt.width+rt.padding/2,rt.intersect=function(kt){return intersect.rect(rt,kt)},st},end=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=it.insert("circle",":first-child"),bt=it.insert("circle",":first-child");return bt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),st.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),updateNodeBounds(rt,bt),rt.intersect=function(xt){return intersect.circle(rt,7,xt)},it},class_box=(nt,rt)=>{const it=rt.padding/2,st=4,bt=8;let xt;rt.classes?xt="node "+rt.classes:xt="node default";const Et=nt.insert("g").attr("class",xt).attr("id",rt.domId||rt.id),kt=Et.insert("rect",":first-child"),Lt=Et.insert("line"),Pt=Et.insert("line");let Rt=0,Dt=st;const Bt=Et.insert("g").attr("class","label");let Ft=0;const Yt=rt.classData.annotations&&rt.classData.annotations[0],Zt=rt.classData.annotations[0]?"\xAB"+rt.classData.annotations[0]+"\xBB":"",Wt=Bt.node().appendChild(createLabel$1(Zt,rt.labelStyle,!0,!0));let Qt=Wt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const An=Wt.children[0],kn=select(Wt);Qt=An.getBoundingClientRect(),kn.attr("width",Qt.width),kn.attr("height",Qt.height)}rt.classData.annotations[0]&&(Dt+=Qt.height+st,Rt+=Qt.width);let Kt=rt.classData.id;rt.classData.type!==void 0&&rt.classData.type!==""&&(getConfig$1().flowchart.htmlLabels?Kt+="&lt;"+rt.classData.type+"&gt;":Kt+="<"+rt.classData.type+">");const on=Bt.node().appendChild(createLabel$1(Kt,rt.labelStyle,!0,!0));select(on).attr("class","classTitle");let nn=on.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const An=on.children[0],kn=select(on);nn=An.getBoundingClientRect(),kn.attr("width",nn.width),kn.attr("height",nn.height)}Dt+=nn.height+st,nn.width>Rt&&(Rt=nn.width);const mn=[];rt.classData.members.forEach(An=>{const kn=parseMember(An);let Mn=kn.displayText;getConfig$1().flowchart.htmlLabels&&(Mn=Mn.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const $n=Bt.node().appendChild(createLabel$1(Mn,kn.cssStyle?kn.cssStyle:rt.labelStyle,!0,!0));let cn=$n.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Sn=$n.children[0],an=select($n);cn=Sn.getBoundingClientRect(),an.attr("width",cn.width),an.attr("height",cn.height)}cn.width>Rt&&(Rt=cn.width),Dt+=cn.height+st,mn.push($n)}),Dt+=bt;const gn=[];if(rt.classData.methods.forEach(An=>{const kn=parseMember(An);let Mn=kn.displayText;getConfig$1().flowchart.htmlLabels&&(Mn=Mn.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const $n=Bt.node().appendChild(createLabel$1(Mn,kn.cssStyle?kn.cssStyle:rt.labelStyle,!0,!0));let cn=$n.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Sn=$n.children[0],an=select($n);cn=Sn.getBoundingClientRect(),an.attr("width",cn.width),an.attr("height",cn.height)}cn.width>Rt&&(Rt=cn.width),Dt+=cn.height+st,gn.push($n)}),Dt+=bt,Yt){let An=(Rt-Qt.width)/2;select(Wt).attr("transform","translate( "+(-1*Rt/2+An)+", "+-1*Dt/2+")"),Ft=Qt.height+st}let Tn=(Rt-nn.width)/2;return select(on).attr("transform","translate( "+(-1*Rt/2+Tn)+", "+(-1*Dt/2+Ft)+")"),Ft+=nn.height+st,Lt.attr("class","divider").attr("x1",-Rt/2-it).attr("x2",Rt/2+it).attr("y1",-Dt/2-it+bt+Ft).attr("y2",-Dt/2-it+bt+Ft),Ft+=bt,mn.forEach(An=>{select(An).attr("transform","translate( "+-Rt/2+", "+(-1*Dt/2+Ft+bt/2)+")"),Ft+=nn.height+st}),Ft+=bt,Pt.attr("class","divider").attr("x1",-Rt/2-it).attr("x2",Rt/2+it).attr("y1",-Dt/2-it+bt+Ft).attr("y2",-Dt/2-it+bt+Ft),Ft+=bt,gn.forEach(An=>{select(An).attr("transform","translate( "+-Rt/2+", "+(-1*Dt/2+Ft)+")"),Ft+=nn.height+st}),kt.attr("class","outer title-state").attr("x",-Rt/2-it).attr("y",-(Dt/2)-it).attr("width",Rt+rt.padding).attr("height",Dt+rt.padding),updateNodeBounds(rt,kt),rt.intersect=function(An){return intersect.rect(rt,An)},Et},shapes$1={rhombus:question$1,question:question$1,rect:rect$1,labelRect,rectWithTitle,choice,circle,doublecircle,stadium:stadium$1,hexagon:hexagon$1,rect_left_inv_arrow:rect_left_inv_arrow$1,lean_right:lean_right$1,lean_left:lean_left$1,trapezoid:trapezoid$1,inv_trapezoid:inv_trapezoid$1,rect_right_inv_arrow:rect_right_inv_arrow$1,cylinder:cylinder$1,start,end,note:note$1,subroutine:subroutine$1,fork:forkJoin,join:forkJoin,class_box};let nodeElems={};const insertNode=(nt,rt,it)=>{let st,bt;if(rt.link){let xt;getConfig$1().securityLevel==="sandbox"?xt="_top":rt.linkTarget&&(xt=rt.linkTarget||"_blank"),st=nt.insert("svg:a").attr("xlink:href",rt.link).attr("target",xt),bt=shapes$1[rt.shape](st,rt,it)}else bt=shapes$1[rt.shape](nt,rt,it),st=bt;return rt.tooltip&&bt.attr("title",rt.tooltip),rt.class&&bt.attr("class","node default "+rt.class),nodeElems[rt.id]=st,rt.haveCallback&&nodeElems[rt.id].attr("class",nodeElems[rt.id].attr("class")+" clickable"),st},setNodeElem=(nt,rt)=>{nodeElems[rt.id]=nt},clear$a=()=>{nodeElems={}},positionNode=nt=>{const rt=nodeElems[nt.id];log$1.trace("Transforming node",nt.diff,nt,"translate("+(nt.x-nt.width/2-5)+", "+nt.width/2+")");const it=8,st=nt.diff||0;return nt.clusterNode?rt.attr("transform","translate("+(nt.x+st-nt.width/2)+", "+(nt.y-nt.height/2-it)+")"):rt.attr("transform","translate("+nt.x+", "+nt.y+")"),st},rect=(nt,rt)=>{log$1.trace("Creating subgraph rect for ",rt.id,rt);const it=nt.insert("g").attr("class","cluster"+(rt.class?" "+rt.class:"")).attr("id",rt.id),st=it.insert("rect",":first-child"),bt=it.insert("g").attr("class","cluster-label"),xt=bt.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let Et=xt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Dt=xt.children[0],Bt=select(xt);Et=Dt.getBoundingClientRect(),Bt.attr("width",Et.width),Bt.attr("height",Et.height)}const kt=0*rt.padding,Lt=kt/2,Pt=rt.width<=Et.width+kt?Et.width+kt:rt.width;rt.width<=Et.width+kt?rt.diff=(Et.width-rt.width)/2-rt.padding/2:rt.diff=-rt.padding/2,log$1.trace("Data ",rt,JSON.stringify(rt)),st.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-Pt/2).attr("y",rt.y-rt.height/2-Lt).attr("width",Pt).attr("height",rt.height+kt),bt.attr("transform","translate("+(rt.x-Et.width/2)+", "+(rt.y-rt.height/2)+")");const Rt=st.node().getBBox();return rt.width=Rt.width,rt.height=Rt.height,rt.intersect=function(Dt){return intersectRect$1(rt,Dt)},it},noteGroup=(nt,rt)=>{const it=nt.insert("g").attr("class","note-cluster").attr("id",rt.id),st=it.insert("rect",":first-child"),bt=0*rt.padding,xt=bt/2;st.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-rt.width/2-xt).attr("y",rt.y-rt.height/2-xt).attr("width",rt.width+bt).attr("height",rt.height+bt).attr("fill","none");const Et=st.node().getBBox();return rt.width=Et.width,rt.height=Et.height,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},roundedWithTitle=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),st=it.insert("rect",":first-child"),bt=it.insert("g").attr("class","cluster-label"),xt=it.append("rect"),Et=bt.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let kt=Et.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Bt=Et.children[0],Ft=select(Et);kt=Bt.getBoundingClientRect(),Ft.attr("width",kt.width),Ft.attr("height",kt.height)}kt=Et.getBBox();const Lt=0*rt.padding,Pt=Lt/2,Rt=rt.width<=kt.width+rt.padding?kt.width+rt.padding:rt.width;rt.width<=kt.width+rt.padding?rt.diff=(kt.width+rt.padding*0-rt.width)/2:rt.diff=-rt.padding/2,st.attr("class","outer").attr("x",rt.x-Rt/2-Pt).attr("y",rt.y-rt.height/2-Pt).attr("width",Rt+Lt).attr("height",rt.height+Lt),xt.attr("class","inner").attr("x",rt.x-Rt/2-Pt).attr("y",rt.y-rt.height/2-Pt+kt.height-1).attr("width",Rt+Lt).attr("height",rt.height+Lt-kt.height-3),bt.attr("transform","translate("+(rt.x-kt.width/2)+", "+(rt.y-rt.height/2-rt.padding/3+(evaluate(getConfig$1().flowchart.htmlLabels)?5:3))+")");const Dt=st.node().getBBox();return rt.height=Dt.height,rt.intersect=function(Bt){return intersectRect$1(rt,Bt)},it},divider=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),st=it.insert("rect",":first-child"),bt=0*rt.padding,xt=bt/2;st.attr("class","divider").attr("x",rt.x-rt.width/2-xt).attr("y",rt.y-rt.height/2).attr("width",rt.width+bt).attr("height",rt.height+bt);const Et=st.node().getBBox();return rt.width=Et.width,rt.height=Et.height,rt.diff=-rt.padding/2,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},shapes={rect,roundedWithTitle,noteGroup,divider};let clusterElems={};const insertCluster=(nt,rt)=>{log$1.trace("Inserting cluster");const it=rt.shape||"rect";clusterElems[rt.id]=shapes[it](nt,rt)},clear$9=()=>{clusterElems={}};let edgeLabels={},terminalLabels={};const clear$8=()=>{edgeLabels={},terminalLabels={}},insertEdgeLabel=(nt,rt)=>{const it=createLabel$1(rt.label,rt.labelStyle),st=nt.insert("g").attr("class","edgeLabel"),bt=st.insert("g").attr("class","label");bt.node().appendChild(it);let xt=it.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const kt=it.children[0],Lt=select(it);xt=kt.getBoundingClientRect(),Lt.attr("width",xt.width),Lt.attr("height",xt.height)}bt.attr("transform","translate("+-xt.width/2+", "+-xt.height/2+")"),edgeLabels[rt.id]=st,rt.width=xt.width,rt.height=xt.height;let Et;if(rt.startLabelLeft){const kt=createLabel$1(rt.startLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Pt=Lt.insert("g").attr("class","inner");Et=Pt.node().appendChild(kt);const Rt=kt.getBBox();Pt.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startLeft=Lt,setTerminalWidth(Et,rt.startLabelLeft)}if(rt.startLabelRight){const kt=createLabel$1(rt.startLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Pt=Lt.insert("g").attr("class","inner");Et=Lt.node().appendChild(kt),Pt.node().appendChild(kt);const Rt=kt.getBBox();Pt.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startRight=Lt,setTerminalWidth(Et,rt.startLabelRight)}if(rt.endLabelLeft){const kt=createLabel$1(rt.endLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Pt=Lt.insert("g").attr("class","inner");Et=Pt.node().appendChild(kt);const Rt=kt.getBBox();Pt.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endLeft=Lt,setTerminalWidth(Et,rt.endLabelLeft)}if(rt.endLabelRight){const kt=createLabel$1(rt.endLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),Pt=Lt.insert("g").attr("class","inner");Et=Pt.node().appendChild(kt);const Rt=kt.getBBox();Pt.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endRight=Lt,setTerminalWidth(Et,rt.endLabelRight)}return it};function setTerminalWidth(nt,rt){getConfig$1().flowchart.htmlLabels&&nt&&(nt.style.width=rt.length*9+"px",nt.style.height="12px")}const positionEdgeLabel=(nt,rt)=>{log$1.info("Moving label abc78 ",nt.id,nt.label,edgeLabels[nt.id]);let it=rt.updatedPath?rt.updatedPath:rt.originalPath;if(nt.label){const st=edgeLabels[nt.id];let bt=nt.x,xt=nt.y;if(it){const Et=utils.calcLabelPosition(it);log$1.info("Moving label "+nt.label+" from (",bt,",",xt,") to (",Et.x,",",Et.y,") abc78"),rt.updatedPath&&(bt=Et.x,xt=Et.y)}st.attr("transform","translate("+bt+", "+xt+")")}if(nt.startLabelLeft){const st=terminalLabels[nt.id].startLeft;let bt=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_left",it);bt=Et.x,xt=Et.y}st.attr("transform","translate("+bt+", "+xt+")")}if(nt.startLabelRight){const st=terminalLabels[nt.id].startRight;let bt=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_right",it);bt=Et.x,xt=Et.y}st.attr("transform","translate("+bt+", "+xt+")")}if(nt.endLabelLeft){const st=terminalLabels[nt.id].endLeft;let bt=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_left",it);bt=Et.x,xt=Et.y}st.attr("transform","translate("+bt+", "+xt+")")}if(nt.endLabelRight){const st=terminalLabels[nt.id].endRight;let bt=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_right",it);bt=Et.x,xt=Et.y}st.attr("transform","translate("+bt+", "+xt+")")}},outsideNode=(nt,rt)=>{const it=nt.x,st=nt.y,bt=Math.abs(rt.x-it),xt=Math.abs(rt.y-st),Et=nt.width/2,kt=nt.height/2;return bt>=Et||xt>=kt},intersection=(nt,rt,it)=>{log$1.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(rt)}
  insidePoint : ${JSON.stringify(it)}
  node        : x:${nt.x} y:${nt.y} w:${nt.width} h:${nt.height}`);const st=nt.x,bt=nt.y,xt=Math.abs(st-it.x),Et=nt.width/2;let kt=it.x<rt.x?Et-xt:Et+xt;const Lt=nt.height/2,Pt=Math.abs(rt.y-it.y),Rt=Math.abs(rt.x-it.x);if(Math.abs(bt-rt.y)*Et>Math.abs(st-rt.x)*Lt){let Dt=it.y<rt.y?rt.y-Lt-bt:bt-Lt-rt.y;kt=Rt*Dt/Pt;const Bt={x:it.x<rt.x?it.x+kt:it.x-Rt+kt,y:it.y<rt.y?it.y+Pt-Dt:it.y-Pt+Dt};return kt===0&&(Bt.x=rt.x,Bt.y=rt.y),Rt===0&&(Bt.x=rt.x),Pt===0&&(Bt.y=rt.y),log$1.warn(`abc89 topp/bott calc, Q ${Pt}, q ${Dt}, R ${Rt}, r ${kt}`,Bt),Bt}else{it.x<rt.x?kt=rt.x-Et-st:kt=st-Et-rt.x;let Dt=Pt*kt/Rt,Bt=it.x<rt.x?it.x+Rt-kt:it.x-Rt+kt,Ft=it.y<rt.y?it.y+Dt:it.y-Dt;return log$1.warn(`sides calc abc89, Q ${Pt}, q ${Dt}, R ${Rt}, r ${kt}`,{_x:Bt,_y:Ft}),kt===0&&(Bt=rt.x,Ft=rt.y),Rt===0&&(Bt=rt.x),Pt===0&&(Ft=rt.y),{x:Bt,y:Ft}}},cutPathAtIntersect=(nt,rt)=>{log$1.warn("abc88 cutPathAtIntersect",nt,rt);let it=[],st=nt[0],bt=!1;return nt.forEach(xt=>{if(log$1.info("abc88 checking point",xt,rt),!outsideNode(rt,xt)&&!bt){const Et=intersection(rt,st,xt);log$1.warn("abc88 inside",xt,st,Et),log$1.warn("abc88 intersection",Et);let kt=!1;it.forEach(Lt=>{kt=kt||Lt.x===Et.x&&Lt.y===Et.y}),it.some(Lt=>Lt.x===Et.x&&Lt.y===Et.y)?log$1.warn("abc88 no intersect",Et,it):it.push(Et),bt=!0}else log$1.warn("abc88 outside",xt,st),st=xt,bt||it.push(xt)}),log$1.warn("abc88 returning points",it),it},insertEdge=function(nt,rt,it,st,bt,xt){let Et=it.points,kt=!1;const Lt=xt.node(rt.v);var Pt=xt.node(rt.w);log$1.info("abc88 InsertEdge: ",it),Pt.intersect&&Lt.intersect&&(Et=Et.slice(1,it.points.length-1),Et.unshift(Lt.intersect(Et[0])),log$1.info("Last point",Et[Et.length-1],Pt,Pt.intersect(Et[Et.length-1])),Et.push(Pt.intersect(Et[Et.length-1]))),it.toCluster&&(log$1.info("to cluster abc88",st[it.toCluster]),Et=cutPathAtIntersect(it.points,st[it.toCluster].node),kt=!0),it.fromCluster&&(log$1.info("from cluster abc88",st[it.fromCluster]),Et=cutPathAtIntersect(Et.reverse(),st[it.fromCluster].node).reverse(),kt=!0);const Rt=Et.filter(Qt=>!Number.isNaN(Qt.y));let Dt;bt==="graph"||bt==="flowchart"?Dt=it.curve||curveBasis:Dt=curveBasis;const Bt=line$1().x(function(Qt){return Qt.x}).y(function(Qt){return Qt.y}).curve(Dt);let Ft;switch(it.thickness){case"normal":Ft="edge-thickness-normal";break;case"thick":Ft="edge-thickness-thick";break;default:Ft=""}switch(it.pattern){case"solid":Ft+=" edge-pattern-solid";break;case"dotted":Ft+=" edge-pattern-dotted";break;case"dashed":Ft+=" edge-pattern-dashed";break}const Yt=nt.append("path").attr("d",Bt(Rt)).attr("id",it.id).attr("class"," "+Ft+(it.classes?" "+it.classes:"")).attr("style",it.style);let Zt="";switch((getConfig$1().flowchart.arrowMarkerAbsolute||getConfig$1().state.arrowMarkerAbsolute)&&(Zt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Zt=Zt.replace(/\(/g,"\\("),Zt=Zt.replace(/\)/g,"\\)")),log$1.info("arrowTypeStart",it.arrowTypeStart),log$1.info("arrowTypeEnd",it.arrowTypeEnd),it.arrowTypeStart){case"arrow_cross":Yt.attr("marker-start","url("+Zt+"#"+bt+"-crossStart)");break;case"arrow_point":Yt.attr("marker-start","url("+Zt+"#"+bt+"-pointStart)");break;case"arrow_barb":Yt.attr("marker-start","url("+Zt+"#"+bt+"-barbStart)");break;case"arrow_circle":Yt.attr("marker-start","url("+Zt+"#"+bt+"-circleStart)");break;case"aggregation":Yt.attr("marker-start","url("+Zt+"#"+bt+"-aggregationStart)");break;case"extension":Yt.attr("marker-start","url("+Zt+"#"+bt+"-extensionStart)");break;case"composition":Yt.attr("marker-start","url("+Zt+"#"+bt+"-compositionStart)");break;case"dependency":Yt.attr("marker-start","url("+Zt+"#"+bt+"-dependencyStart)");break;case"lollipop":Yt.attr("marker-start","url("+Zt+"#"+bt+"-lollipopStart)");break}switch(it.arrowTypeEnd){case"arrow_cross":Yt.attr("marker-end","url("+Zt+"#"+bt+"-crossEnd)");break;case"arrow_point":Yt.attr("marker-end","url("+Zt+"#"+bt+"-pointEnd)");break;case"arrow_barb":Yt.attr("marker-end","url("+Zt+"#"+bt+"-barbEnd)");break;case"arrow_circle":Yt.attr("marker-end","url("+Zt+"#"+bt+"-circleEnd)");break;case"aggregation":Yt.attr("marker-end","url("+Zt+"#"+bt+"-aggregationEnd)");break;case"extension":Yt.attr("marker-end","url("+Zt+"#"+bt+"-extensionEnd)");break;case"composition":Yt.attr("marker-end","url("+Zt+"#"+bt+"-compositionEnd)");break;case"dependency":Yt.attr("marker-end","url("+Zt+"#"+bt+"-dependencyEnd)");break;case"lollipop":Yt.attr("marker-end","url("+Zt+"#"+bt+"-lollipopEnd)");break}let Wt={};return kt&&(Wt.updatedPath=Et),Wt.originalPath=it.points,Wt},recursiveRender=(nt,rt,it,st)=>{log$1.info("Graph in recursive render: XXX",write(rt),st);const bt=rt.graph().rankdir;log$1.trace("Dir in recursive render - dir:",bt);const xt=nt.insert("g").attr("class","root");rt.nodes()?log$1.info("Recursive render XXX",rt.nodes()):log$1.info("No nodes found for",rt),rt.edges().length>0&&log$1.trace("Recursive edges",rt.edge(rt.edges()[0]));const Et=xt.insert("g").attr("class","clusters"),kt=xt.insert("g").attr("class","edgePaths"),Lt=xt.insert("g").attr("class","edgeLabels"),Pt=xt.insert("g").attr("class","nodes");rt.nodes().forEach(function(Dt){const Bt=rt.node(Dt);if(st!==void 0){const Ft=JSON.parse(JSON.stringify(st.clusterData));log$1.info("Setting data for cluster XXX (",Dt,") ",Ft,st),rt.setNode(st.id,Ft),rt.parent(Dt)||(log$1.trace("Setting parent",Dt,st.id),rt.setParent(Dt,st.id,Ft))}if(log$1.info("(Insert) Node XXX"+Dt+": "+JSON.stringify(rt.node(Dt))),Bt&&Bt.clusterNode){log$1.info("Cluster identified",Dt,Bt.width,rt.node(Dt));const Ft=recursiveRender(Pt,Bt.graph,it,rt.node(Dt)),Yt=Ft.elem;updateNodeBounds(Bt,Yt),Bt.diff=Ft.diff||0,log$1.info("Node bounds (abc123)",Dt,Bt,Bt.width,Bt.x,Bt.y),setNodeElem(Yt,Bt),log$1.warn("Recursive render complete ",Yt,Bt)}else rt.children(Dt).length>0?(log$1.info("Cluster - the non recursive path XXX",Dt,Bt.id,Bt,rt),log$1.info(findNonClusterChild(Bt.id,rt)),clusterDb[Bt.id]={id:findNonClusterChild(Bt.id,rt),node:Bt}):(log$1.info("Node - the non recursive path",Dt,Bt.id,Bt),insertNode(Pt,rt.node(Dt),bt))}),rt.edges().forEach(function(Dt){const Bt=rt.edge(Dt.v,Dt.w,Dt.name);log$1.info("Edge "+Dt.v+" -> "+Dt.w+": "+JSON.stringify(Dt)),log$1.info("Edge "+Dt.v+" -> "+Dt.w+": ",Dt," ",JSON.stringify(rt.edge(Dt))),log$1.info("Fix",clusterDb,"ids:",Dt.v,Dt.w,"Translateing: ",clusterDb[Dt.v],clusterDb[Dt.w]),insertEdgeLabel(Lt,Bt)}),rt.edges().forEach(function(Dt){log$1.info("Edge "+Dt.v+" -> "+Dt.w+": "+JSON.stringify(Dt))}),log$1.info("#############################################"),log$1.info("###                Layout                 ###"),log$1.info("#############################################"),log$1.info(rt),layout(rt),log$1.info("Graph after layout:",write(rt));let Rt=0;return sortNodesByHierarchy(rt).forEach(function(Dt){const Bt=rt.node(Dt);log$1.info("Position "+Dt+": "+JSON.stringify(rt.node(Dt))),log$1.info("Position "+Dt+": ("+Bt.x,","+Bt.y,") width: ",Bt.width," height: ",Bt.height),Bt&&Bt.clusterNode?positionNode(Bt):rt.children(Dt).length>0?(insertCluster(Et,Bt),clusterDb[Bt.id].node=Bt):positionNode(Bt)}),rt.edges().forEach(function(Dt){const Bt=rt.edge(Dt);log$1.info("Edge "+Dt.v+" -> "+Dt.w+": "+JSON.stringify(Bt),Bt);const Ft=insertEdge(kt,Dt,Bt,clusterDb,it,rt);positionEdgeLabel(Bt,Ft)}),rt.nodes().forEach(function(Dt){const Bt=rt.node(Dt);log$1.info(Dt,Bt.type,Bt.diff),Bt.type==="group"&&(Rt=Bt.diff)}),{elem:xt,diff:Rt}},render$1=(nt,rt,it,st,bt)=>{insertMarkers$3(nt,it,st,bt),clear$a(),clear$8(),clear$9(),clear$b(),log$1.warn("Graph at first:",write(rt)),adjustClustersAndEdges(rt),log$1.warn("Graph after:",write(rt)),recursiveRender(nt,rt,st)},sanitizeText$1=nt=>common$1.sanitizeText(nt,getConfig$1());let conf$9={dividerMargin:10,padding:5,textHeight:10};const addClasses=function(nt,rt,it,st){const bt=Object.keys(nt);log$1.info("keys:",bt),log$1.info(nt),bt.forEach(function(xt){const Et=nt[xt];let kt="";Et.cssClasses.length>0&&(kt=kt+" "+Et.cssClasses.join(" "));const Lt={labelStyle:""};let Pt=Et.text!==void 0?Et.text:Et.id,Rt=0,Dt="";switch(Et.type){case"class":Dt="class_box";break;default:Dt="class_box"}rt.setNode(Et.id,{labelStyle:Lt.labelStyle,shape:Dt,labelText:sanitizeText$1(Pt),classData:Et,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,domId:Et.domId,tooltip:st.db.getTooltip(Et.id)||"",haveCallback:Et.haveCallback,link:Et.link,width:Et.type==="group"?500:void 0,type:Et.type,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:Dt,labelText:Pt,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,width:Et.type==="group"?500:void 0,type:Et.type,padding:getConfig$1().flowchart.padding})})},addNotes=function(nt,rt,it,st){log$1.info(nt),nt.forEach(function(bt,xt){const Et=bt;let kt="";const Lt={labelStyle:"",style:""};let Pt=Et.text,Rt=0,Dt="note";if(rt.setNode(Et.id,{labelStyle:Lt.labelStyle,shape:Dt,labelText:sanitizeText$1(Pt),noteData:Et,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,domId:Et.id,tooltip:"",type:"note",padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:Dt,labelText:Pt,rx:Rt,ry:Rt,style:Lt.style,id:Et.id,type:"note",padding:getConfig$1().flowchart.padding}),!Et.class||!(Et.class in st))return;const Bt=it+xt,Ft={};Ft.classes="relation",Ft.pattern="dotted",Ft.id=`edgeNote${Bt}`,Ft.arrowhead="none",log$1.info(`Note edge: ${JSON.stringify(Ft)}, ${JSON.stringify(Et)}`),Ft.startLabelRight="",Ft.endLabelLeft="",Ft.arrowTypeStart="none",Ft.arrowTypeEnd="none";let Yt="fill:none",Zt="";Ft.style=Yt,Ft.labelStyle=Zt,Ft.curve=interpolateToCurve(conf$9.curve,curveLinear),rt.setEdge(Et.id,Et.class,Ft,Bt)})},addRelations=function(nt,rt){const it=getConfig$1().flowchart;let st=0;nt.forEach(function(bt){st++;const xt={};xt.classes="relation",xt.pattern=bt.relation.lineType==1?"dashed":"solid",xt.id="id"+st,bt.type==="arrow_open"?xt.arrowhead="none":xt.arrowhead="normal",log$1.info(xt,bt),xt.startLabelRight=bt.relationTitle1==="none"?"":bt.relationTitle1,xt.endLabelLeft=bt.relationTitle2==="none"?"":bt.relationTitle2,xt.arrowTypeStart=getArrowMarker(bt.relation.type1),xt.arrowTypeEnd=getArrowMarker(bt.relation.type2);let Et="",kt="";if(bt.style!==void 0){const Lt=getStylesFromArray(bt.style);Et=Lt.style,kt=Lt.labelStyle}else Et="fill:none";xt.style=Et,xt.labelStyle=kt,bt.interpolate!==void 0?xt.curve=interpolateToCurve(bt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?xt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):xt.curve=interpolateToCurve(it.curve,curveLinear),bt.text=bt.title,bt.text===void 0?bt.style!==void 0&&(xt.arrowheadStyle="fill: #333"):(xt.arrowheadStyle="fill: #333",xt.labelpos="c",getConfig$1().flowchart.htmlLabels?(xt.labelType="html",xt.label='<span class="edgeLabel">'+bt.text+"</span>"):(xt.labelType="text",xt.label=bt.text.replace(common$1.lineBreakRegex,`
`),bt.style===void 0&&(xt.style=xt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),xt.labelStyle=xt.labelStyle.replace("color:","fill:"))),rt.setEdge(bt.id1,bt.id2,xt,st)})},setConf$9=function(nt){Object.keys(nt).forEach(function(it){conf$9[it]=nt[it]})},draw$c=function(nt,rt,it,st){log$1.info("Drawing class - ",rt);const bt=getConfig$1().flowchart,xt=getConfig$1().securityLevel;log$1.info("config:",bt);const Et=bt.nodeSpacing||50,kt=bt.rankSpacing||50,Lt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:st.db.getDirection(),nodesep:Et,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),Pt=st.db.getClasses(),Rt=st.db.getRelations(),Dt=st.db.getNotes();log$1.info(Rt),addClasses(Pt,Lt,rt,st),addRelations(Rt,Lt),addNotes(Dt,Lt,Rt.length+1,Pt);let Bt;xt==="sandbox"&&(Bt=select("#i"+rt));const Ft=select(xt==="sandbox"?Bt.nodes()[0].contentDocument.body:"body"),Yt=Ft.select(`[id="${rt}"]`),Zt=Ft.select("#"+rt+" g");if(render$1(Zt,Lt,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",rt),utils.insertTitle(Yt,"classTitleText",bt.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox$1(Lt,Yt,bt.diagramPadding,bt.useMaxWidth),!bt.htmlLabels){const Wt=xt==="sandbox"?Bt.nodes()[0].contentDocument:document,Qt=Wt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const Kt of Qt){const on=Kt.getBBox(),nn=Wt.createElementNS("http://www.w3.org/2000/svg","rect");nn.setAttribute("rx",0),nn.setAttribute("ry",0),nn.setAttribute("width",on.width),nn.setAttribute("height",on.height),Kt.insertBefore(nn,Kt.firstChild)}}};function getArrowMarker(nt){let rt;switch(nt){case 0:rt="aggregation";break;case 1:rt="extension";break;case 2:rt="composition";break;case 3:rt="dependency";break;case 4:rt="lollipop";break;default:rt="none"}return rt}const classRendererV2={setConf:setConf$9,draw:draw$c};var parser$9=function(){var nt=function($n,cn,Sn,an){for(Sn=Sn||{},an=$n.length;an--;Sn[$n[an]]=cn);return Sn},rt=[1,2],it=[1,5],st=[6,9,11,23,25,27,29,30,31,51],bt=[1,17],xt=[1,18],Et=[1,19],kt=[1,20],Lt=[1,21],Pt=[1,22],Rt=[1,25],Dt=[1,30],Bt=[1,31],Ft=[1,32],Yt=[1,33],Zt=[6,9,11,15,20,23,25,27,29,30,31,44,45,46,47,51],Wt=[1,45],Qt=[30,31,48,49],Kt=[4,6,9,11,23,25,27,29,30,31,51],on=[44,45,46,47],nn=[22,37],mn=[1,65],gn=[1,64],Tn=[22,37,39,41],An={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyTypeList:35,attributeComment:36,ATTRIBUTE_WORD:37,attributeKeyType:38,COMMA:39,ATTRIBUTE_KEY:40,COMMENT:41,cardinality:42,relType:43,ZERO_OR_ONE:44,ZERO_OR_MORE:45,ONE_OR_MORE:46,ONLY_ONE:47,NON_IDENTIFYING:48,IDENTIFYING:49,WORD:50,open_directive:51,type_directive:52,arg_directive:53,close_directive:54,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",39:"COMMA",40:"ATTRIBUTE_KEY",41:"COMMENT",44:"ZERO_OR_ONE",45:"ZERO_OR_MORE",46:"ONE_OR_MORE",47:"ONLY_ONE",48:"NON_IDENTIFYING",49:"IDENTIFYING",50:"WORD",51:"open_directive",52:"type_directive",53:"arg_directive",54:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[35,3],[38,1],[36,1],[18,3],[42,1],[42,1],[42,1],[42,1],[43,1],[43,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(cn,Sn,an,jn,hn,zn,ir){var tr=zn.length-1;switch(hn){case 1:break;case 3:this.$=[];break;case 4:zn[tr-1].push(zn[tr]),this.$=zn[tr-1];break;case 5:case 6:this.$=zn[tr];break;case 7:case 8:this.$=[];break;case 12:jn.addEntity(zn[tr-4]),jn.addEntity(zn[tr-2]),jn.addRelationship(zn[tr-4],zn[tr],zn[tr-2],zn[tr-3]);break;case 13:jn.addEntity(zn[tr-3]),jn.addAttributes(zn[tr-3],zn[tr-1]);break;case 14:jn.addEntity(zn[tr-2]);break;case 15:jn.addEntity(zn[tr]);break;case 16:case 17:this.$=zn[tr].trim(),jn.setAccTitle(this.$);break;case 18:case 19:this.$=zn[tr].trim(),jn.setAccDescription(this.$);break;case 20:case 43:this.$=zn[tr];break;case 21:case 41:case 42:this.$=zn[tr].replace(/"/g,"");break;case 22:case 30:this.$=[zn[tr]];break;case 23:zn[tr].push(zn[tr-1]),this.$=zn[tr];break;case 24:this.$={attributeType:zn[tr-1],attributeName:zn[tr]};break;case 25:this.$={attributeType:zn[tr-2],attributeName:zn[tr-1],attributeKeyTypeList:zn[tr]};break;case 26:this.$={attributeType:zn[tr-2],attributeName:zn[tr-1],attributeComment:zn[tr]};break;case 27:this.$={attributeType:zn[tr-3],attributeName:zn[tr-2],attributeKeyTypeList:zn[tr-1],attributeComment:zn[tr]};break;case 28:case 29:case 32:this.$=zn[tr];break;case 31:zn[tr-2].push(zn[tr]),this.$=zn[tr-2];break;case 33:this.$=zn[tr].replace(/"/g,"");break;case 34:this.$={cardA:zn[tr],relType:zn[tr-1],cardB:zn[tr-2]};break;case 35:this.$=jn.Cardinality.ZERO_OR_ONE;break;case 36:this.$=jn.Cardinality.ZERO_OR_MORE;break;case 37:this.$=jn.Cardinality.ONE_OR_MORE;break;case 38:this.$=jn.Cardinality.ONLY_ONE;break;case 39:this.$=jn.Identification.NON_IDENTIFYING;break;case 40:this.$=jn.Identification.IDENTIFYING;break;case 44:jn.parseDirective("%%{","open_directive");break;case 45:jn.parseDirective(zn[tr],"type_directive");break;case 46:zn[tr]=zn[tr].trim().replace(/'/g,'"'),jn.parseDirective(zn[tr],"arg_directive");break;case 47:jn.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:rt,7:3,12:4,51:it},{1:[3]},nt(st,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,51:it},{13:8,52:[1,9]},{52:[2,44]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:bt,25:xt,27:Et,29:kt,30:Lt,31:Pt,51:it},{1:[2,2]},{14:23,15:[1,24],54:Rt},nt([15,54],[2,45]),nt(st,[2,8],{1:[2,1]}),nt(st,[2,4]),{7:15,10:26,12:4,17:16,23:bt,25:xt,27:Et,29:kt,30:Lt,31:Pt,51:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,11]),nt(st,[2,15],{18:27,42:29,20:[1,28],44:Dt,45:Bt,46:Ft,47:Yt}),{24:[1,34]},{26:[1,35]},{28:[1,36]},nt(st,[2,19]),nt(Zt,[2,20]),nt(Zt,[2,21]),{11:[1,37]},{16:38,53:[1,39]},{11:[2,47]},nt(st,[2,5]),{17:40,30:Lt,31:Pt},{21:41,22:[1,42],32:43,33:44,37:Wt},{43:46,48:[1,47],49:[1,48]},nt(Qt,[2,35]),nt(Qt,[2,36]),nt(Qt,[2,37]),nt(Qt,[2,38]),nt(st,[2,16]),nt(st,[2,17]),nt(st,[2,18]),nt(Kt,[2,9]),{14:49,54:Rt},{54:[2,46]},{15:[1,50]},{22:[1,51]},nt(st,[2,14]),{21:52,22:[2,22],32:43,33:44,37:Wt},{34:53,37:[1,54]},{37:[2,28]},{42:55,44:Dt,45:Bt,46:Ft,47:Yt},nt(on,[2,39]),nt(on,[2,40]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],50:[1,58]},nt(st,[2,13]),{22:[2,23]},nt(nn,[2,24],{35:61,36:62,38:63,40:mn,41:gn}),nt([22,37,40,41],[2,29]),nt([30,31],[2,34]),nt(Kt,[2,10]),nt(st,[2,12]),nt(st,[2,41]),nt(st,[2,42]),nt(st,[2,43]),nt(nn,[2,25],{36:66,39:[1,67],41:gn}),nt(nn,[2,26]),nt(Tn,[2,30]),nt(nn,[2,33]),nt(Tn,[2,32]),nt(nn,[2,27]),{38:68,40:mn},nt(Tn,[2,31])],defaultActions:{5:[2,44],7:[2,2],25:[2,47],39:[2,46],45:[2,28],52:[2,23]},parseError:function(cn,Sn){if(Sn.recoverable)this.trace(cn);else{var an=new Error(cn);throw an.hash=Sn,an}},parse:function(cn){var Sn=this,an=[0],jn=[],hn=[null],zn=[],ir=this.table,tr="",nr=0,dr=0,or=2,ur=1,Cr=zn.slice.call(arguments,1),Sr=Object.create(this.lexer),rr={yy:{}};for(var Fr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Fr)&&(rr.yy[Fr]=this.yy[Fr]);Sr.setInput(cn,rr.yy),rr.yy.lexer=Sr,rr.yy.parser=this,typeof Sr.yylloc>"u"&&(Sr.yylloc={});var mr=Sr.yylloc;zn.push(mr);var _r=Sr.options&&Sr.options.ranges;typeof rr.yy.parseError=="function"?this.parseError=rr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function yr(){var Un;return Un=jn.pop()||Sr.lex()||ur,typeof Un!="number"&&(Un instanceof Array&&(jn=Un,Un=jn.pop()),Un=Sn.symbols_[Un]||Un),Un}for(var pr,Cn,rn,dn,fn={},On,xn,hr,Nn;;){if(Cn=an[an.length-1],this.defaultActions[Cn]?rn=this.defaultActions[Cn]:((pr===null||typeof pr>"u")&&(pr=yr()),rn=ir[Cn]&&ir[Cn][pr]),typeof rn>"u"||!rn.length||!rn[0]){var Kn="";Nn=[];for(On in ir[Cn])this.terminals_[On]&&On>or&&Nn.push("'"+this.terminals_[On]+"'");Sr.showPosition?Kn="Parse error on line "+(nr+1)+`:
`+Sr.showPosition()+`
Expecting `+Nn.join(", ")+", got '"+(this.terminals_[pr]||pr)+"'":Kn="Parse error on line "+(nr+1)+": Unexpected "+(pr==ur?"end of input":"'"+(this.terminals_[pr]||pr)+"'"),this.parseError(Kn,{text:Sr.match,token:this.terminals_[pr]||pr,line:Sr.yylineno,loc:mr,expected:Nn})}if(rn[0]instanceof Array&&rn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Cn+", token: "+pr);switch(rn[0]){case 1:an.push(pr),hn.push(Sr.yytext),zn.push(Sr.yylloc),an.push(rn[1]),pr=null,dr=Sr.yyleng,tr=Sr.yytext,nr=Sr.yylineno,mr=Sr.yylloc;break;case 2:if(xn=this.productions_[rn[1]][1],fn.$=hn[hn.length-xn],fn._$={first_line:zn[zn.length-(xn||1)].first_line,last_line:zn[zn.length-1].last_line,first_column:zn[zn.length-(xn||1)].first_column,last_column:zn[zn.length-1].last_column},_r&&(fn._$.range=[zn[zn.length-(xn||1)].range[0],zn[zn.length-1].range[1]]),dn=this.performAction.apply(fn,[tr,dr,nr,rr.yy,rn[1],hn,zn].concat(Cr)),typeof dn<"u")return dn;xn&&(an=an.slice(0,-1*xn*2),hn=hn.slice(0,-1*xn),zn=zn.slice(0,-1*xn)),an.push(this.productions_[rn[1]][0]),hn.push(fn.$),zn.push(fn._$),hr=ir[an[an.length-2]][an[an.length-1]],an.push(hr);break;case 3:return!0}}return!0}},kn=function(){var $n={EOF:1,parseError:function(Sn,an){if(this.yy.parser)this.yy.parser.parseError(Sn,an);else throw new Error(Sn)},setInput:function(cn,Sn){return this.yy=Sn||this.yy||{},this._input=cn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var cn=this._input[0];this.yytext+=cn,this.yyleng++,this.offset++,this.match+=cn,this.matched+=cn;var Sn=cn.match(/(?:\r\n?|\n).*/g);return Sn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),cn},unput:function(cn){var Sn=cn.length,an=cn.split(/(?:\r\n?|\n)/g);this._input=cn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Sn),this.offset-=Sn;var jn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),an.length-1&&(this.yylineno-=an.length-1);var hn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:an?(an.length===jn.length?this.yylloc.first_column:0)+jn[jn.length-an.length].length-an[0].length:this.yylloc.first_column-Sn},this.options.ranges&&(this.yylloc.range=[hn[0],hn[0]+this.yyleng-Sn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(cn){this.unput(this.match.slice(cn))},pastInput:function(){var cn=this.matched.substr(0,this.matched.length-this.match.length);return(cn.length>20?"...":"")+cn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var cn=this.match;return cn.length<20&&(cn+=this._input.substr(0,20-cn.length)),(cn.substr(0,20)+(cn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var cn=this.pastInput(),Sn=new Array(cn.length+1).join("-");return cn+this.upcomingInput()+`
`+Sn+"^"},test_match:function(cn,Sn){var an,jn,hn;if(this.options.backtrack_lexer&&(hn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(hn.yylloc.range=this.yylloc.range.slice(0))),jn=cn[0].match(/(?:\r\n?|\n).*/g),jn&&(this.yylineno+=jn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:jn?jn[jn.length-1].length-jn[jn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+cn[0].length},this.yytext+=cn[0],this.match+=cn[0],this.matches=cn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(cn[0].length),this.matched+=cn[0],an=this.performAction.call(this,this.yy,this,Sn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),an)return an;if(this._backtrack){for(var zn in hn)this[zn]=hn[zn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var cn,Sn,an,jn;this._more||(this.yytext="",this.match="");for(var hn=this._currentRules(),zn=0;zn<hn.length;zn++)if(an=this._input.match(this.rules[hn[zn]]),an&&(!Sn||an[0].length>Sn[0].length)){if(Sn=an,jn=zn,this.options.backtrack_lexer){if(cn=this.test_match(an,hn[zn]),cn!==!1)return cn;if(this._backtrack){Sn=!1;continue}else return!1}else if(!this.options.flex)break}return Sn?(cn=this.test_match(Sn,hn[jn]),cn!==!1?cn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Sn=this.next();return Sn||this.lex()},begin:function(Sn){this.conditionStack.push(Sn)},popState:function(){var Sn=this.conditionStack.length-1;return Sn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Sn){return Sn=this.conditionStack.length-1-Math.abs(Sn||0),Sn>=0?this.conditionStack[Sn]:"INITIAL"},pushState:function(Sn){this.begin(Sn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Sn,an,jn,hn){switch(jn){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),51;case 8:return this.begin("type_directive"),52;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),54;case 11:return 53;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 50;case 19:return 4;case 20:return this.begin("block"),20;case 21:return 39;case 22:break;case 23:return 40;case 24:return 37;case 25:return 37;case 26:return 41;case 27:break;case 28:return this.popState(),22;case 29:return an.yytext[0];case 30:return 44;case 31:return 46;case 32:return 46;case 33:return 46;case 34:return 44;case 35:return 44;case 36:return 45;case 37:return 45;case 38:return 45;case 39:return 45;case 40:return 45;case 41:return 46;case 42:return 45;case 43:return 46;case 44:return 47;case 45:return 47;case 46:return 47;case 47:return 47;case 48:return 44;case 49:return 45;case 50:return 46;case 51:return 48;case 52:return 49;case 53:return 49;case 54:return 48;case 55:return 48;case 56:return 48;case 57:return 30;case 58:return an.yytext[0];case 59:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28,29],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return $n}();An.lexer=kn;function Mn(){this.yy={}}return Mn.prototype=An,An.Parser=Mn,new Mn}();parser$9.parser=parser$9;const erParser=parser$9,erDetector=nt=>nt.match(/^\s*erDiagram/)!==null;let entities={},relationships=[];const Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective$7=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addEntity=function(nt){return entities[nt]===void 0&&(entities[nt]={attributes:[]},log$1.info("Added new entity :",nt)),entities[nt]},getEntities=()=>entities,addAttributes=function(nt,rt){let it=addEntity(nt),st;for(st=rt.length-1;st>=0;st--)it.attributes.push(rt[st]),log$1.debug("Added attribute ",rt[st].attributeName)},addRelationship$1=function(nt,rt,it,st){let bt={entityA:nt,roleA:rt,entityB:it,relSpec:st};relationships.push(bt),log$1.debug("Added new relationship :",bt)},getRelationships$1=()=>relationships,clear$7=function(){entities={},relationships=[],clear$g()},erDb={Cardinality,Identification,parseDirective:parseDirective$7,getConfig:()=>getConfig$1().er,addEntity,addAttributes,getEntities,addRelationship:addRelationship$1,getRelationships:getRelationships$1,clear:clear$7,setAccTitle,getAccTitle,setAccDescription,getAccDescription,setDiagramTitle,getDiagramTitle},ERMarkers={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},insertMarkers$1=function(nt,rt){let it;nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,0 L21,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},erMarkers={ERMarkers,insertMarkers:insertMarkers$1},BAD_ID_CHARS_REGEXP=/[^\dA-Za-z](\W)*/g;let conf$8={},entityNameIds=new Map;const setConf$8=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$8[it]=nt[it]},drawAttributes=(nt,rt,it)=>{const st=conf$8.entityPadding/3,bt=conf$8.entityPadding/3,xt=conf$8.fontSize*.85,Et=rt.node().getBBox(),kt=[];let Lt=!1,Pt=!1,Rt=0,Dt=0,Bt=0,Ft=0,Yt=Et.height+st*2,Zt=1;it.forEach(on=>{on.attributeKeyTypeList!==void 0&&on.attributeKeyTypeList.length>0&&(Lt=!0),on.attributeComment!==void 0&&(Pt=!0)}),it.forEach(on=>{const nn=`${rt.node().id}-attr-${Zt}`;let mn=0;const gn=parseGenericTypes(on.attributeType),Tn=nt.append("text").classed("er entityLabel",!0).attr("id",`${nn}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(gn),An=nt.append("text").classed("er entityLabel",!0).attr("id",`${nn}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(on.attributeName),kn={};kn.tn=Tn,kn.nn=An;const Mn=Tn.node().getBBox(),$n=An.node().getBBox();if(Rt=Math.max(Rt,Mn.width),Dt=Math.max(Dt,$n.width),mn=Math.max(Mn.height,$n.height),Lt){const cn=on.attributeKeyTypeList!==void 0?on.attributeKeyTypeList.join(","):"",Sn=nt.append("text").classed("er entityLabel",!0).attr("id",`${nn}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(cn);kn.kn=Sn;const an=Sn.node().getBBox();Bt=Math.max(Bt,an.width),mn=Math.max(mn,an.height)}if(Pt){const cn=nt.append("text").classed("er entityLabel",!0).attr("id",`${nn}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(on.attributeComment||"");kn.cn=cn;const Sn=cn.node().getBBox();Ft=Math.max(Ft,Sn.width),mn=Math.max(mn,Sn.height)}kn.height=mn,kt.push(kn),Yt+=mn+st*2,Zt+=1});let Wt=4;Lt&&(Wt+=2),Pt&&(Wt+=2);const Qt=Rt+Dt+Bt+Ft,Kt={width:Math.max(conf$8.minEntityWidth,Math.max(Et.width+conf$8.entityPadding*2,Qt+bt*Wt)),height:it.length>0?Yt:Math.max(conf$8.minEntityHeight,Et.height+conf$8.entityPadding*2)};if(it.length>0){const on=Math.max(0,(Kt.width-Qt-bt*Wt)/(Wt/2));rt.attr("transform","translate("+Kt.width/2+","+(st+Et.height/2)+")");let nn=Et.height+st*2,mn="attributeBoxOdd";kt.forEach(gn=>{const Tn=nn+st+gn.height/2;gn.tn.attr("transform","translate("+bt+","+Tn+")");const An=nt.insert("rect","#"+gn.tn.node().id).classed(`er ${mn}`,!0).attr("x",0).attr("y",nn).attr("width",Rt+bt*2+on).attr("height",gn.height+st*2),kn=parseFloat(An.attr("x"))+parseFloat(An.attr("width"));gn.nn.attr("transform","translate("+(kn+bt)+","+Tn+")");const Mn=nt.insert("rect","#"+gn.nn.node().id).classed(`er ${mn}`,!0).attr("x",kn).attr("y",nn).attr("width",Dt+bt*2+on).attr("height",gn.height+st*2);let $n=parseFloat(Mn.attr("x"))+parseFloat(Mn.attr("width"));if(Lt){gn.kn.attr("transform","translate("+($n+bt)+","+Tn+")");const cn=nt.insert("rect","#"+gn.kn.node().id).classed(`er ${mn}`,!0).attr("x",$n).attr("y",nn).attr("width",Bt+bt*2+on).attr("height",gn.height+st*2);$n=parseFloat(cn.attr("x"))+parseFloat(cn.attr("width"))}Pt&&(gn.cn.attr("transform","translate("+($n+bt)+","+Tn+")"),nt.insert("rect","#"+gn.cn.node().id).classed(`er ${mn}`,"true").attr("x",$n).attr("y",nn).attr("width",Ft+bt*2+on).attr("height",gn.height+st*2)),nn+=gn.height+st*2,mn=mn==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else Kt.height=Math.max(conf$8.minEntityHeight,Yt),rt.attr("transform","translate("+Kt.width/2+","+Kt.height/2+")");return Kt},drawEntities=function(nt,rt,it){const st=Object.keys(rt);let bt;return st.forEach(function(xt){const Et=generateId(xt,"entity");entityNameIds.set(xt,Et);const kt=nt.append("g").attr("id",Et);bt=bt===void 0?Et:bt;const Lt="text-"+Et,Pt=kt.append("text").classed("er entityLabel",!0).attr("id",Lt).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(xt),{width:Rt,height:Dt}=drawAttributes(kt,Pt,rt[xt].attributes),Ft=kt.insert("rect","#"+Lt).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",Rt).attr("height",Dt).node().getBBox();it.setNode(Et,{width:Ft.width,height:Ft.height,shape:"rect",id:Et})}),bt},adjustEntities$1=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )")})},getEdgeName=function(nt){return(nt.entityA+nt.roleA+nt.entityB).replace(/\s/g,"")},addRelationships$1=function(nt,rt){return nt.forEach(function(it){rt.setEdge(entityNameIds.get(it.entityA),entityNameIds.get(it.entityB),{relationship:it},getEdgeName(it))}),nt};let relCnt$1=0;const drawRelationshipFromLayout$1=function(nt,rt,it,st,bt){relCnt$1++;const xt=it.edge(entityNameIds.get(rt.entityA),entityNameIds.get(rt.entityB),getEdgeName(rt)),Et=line$1().x(function(Yt){return Yt.x}).y(function(Yt){return Yt.y}).curve(curveBasis),kt=nt.insert("path","#"+st).classed("er relationshipLine",!0).attr("d",Et(xt.points)).style("stroke",conf$8.stroke).style("fill","none");rt.relSpec.relType===bt.db.Identification.NON_IDENTIFYING&&kt.attr("stroke-dasharray","8,8");let Lt="";switch(conf$8.arrowMarkerAbsolute&&(Lt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Lt=Lt.replace(/\(/g,"\\("),Lt=Lt.replace(/\)/g,"\\)")),rt.relSpec.cardA){case bt.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_END+")");break;case bt.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_END+")");break;case bt.db.Cardinality.ONE_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_END+")");break;case bt.db.Cardinality.ONLY_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_END+")");break}switch(rt.relSpec.cardB){case bt.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_START+")");break;case bt.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_START+")");break;case bt.db.Cardinality.ONE_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_START+")");break;case bt.db.Cardinality.ONLY_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_START+")");break}const Pt=kt.node().getTotalLength(),Rt=kt.node().getPointAtLength(Pt*.5),Dt="rel"+relCnt$1,Ft=nt.append("text").classed("er relationshipLabel",!0).attr("id",Dt).attr("x",Rt.x).attr("y",Rt.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(rt.roleA).node().getBBox();nt.insert("rect","#"+Dt).classed("er relationshipLabelBox",!0).attr("x",Rt.x-Ft.width/2).attr("y",Rt.y-Ft.height/2).attr("width",Ft.width).attr("height",Ft.height)},draw$b=function(nt,rt,it,st){conf$8=getConfig$1().er,log$1.info("Drawing ER diagram");const bt=getConfig$1().securityLevel;let xt;bt==="sandbox"&&(xt=select("#i"+rt));const kt=select(bt==="sandbox"?xt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);erMarkers.insertMarkers(kt,conf$8);let Lt;Lt=new Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:conf$8.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const Pt=drawEntities(kt,st.db.getEntities(),Lt),Rt=addRelationships$1(st.db.getRelationships(),Lt);layout(Lt),adjustEntities$1(kt,Lt),Rt.forEach(function(Zt){drawRelationshipFromLayout$1(kt,Zt,Lt,Pt,st)});const Dt=conf$8.diagramPadding;utils.insertTitle(kt,"entityTitleText",conf$8.titleTopMargin,st.db.getDiagramTitle());const Bt=kt.node().getBBox(),Ft=Bt.width+Dt*2,Yt=Bt.height+Dt*2;configureSvgSize(kt,Yt,Ft,conf$8.useMaxWidth),kt.attr("viewBox",`${Bt.x-Dt} ${Bt.y-Dt} ${Ft} ${Yt}`)},MERMAID_ERDIAGRAM_UUID="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function generateId(nt="",rt=""){const it=nt.replace(BAD_ID_CHARS_REGEXP,"");return`${strWithHyphen(rt)}${strWithHyphen(it)}${v5$1(nt,MERMAID_ERDIAGRAM_UUID)}`}function strWithHyphen(nt=""){return nt.length>0?`${nt}-`:""}const erRenderer={setConf:setConf$8,draw:draw$b};var parser$7=function(){var nt=function(ca,Fi,Zi,bo){for(Zi=Zi||{},bo=ca.length;bo--;Zi[ca[bo]]=Fi);return Zi},rt=[1,9],it=[1,7],st=[1,6],bt=[1,8],xt=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Et=[2,10],kt=[1,20],Lt=[1,21],Pt=[1,22],Rt=[1,23],Dt=[1,30],Bt=[1,32],Ft=[1,33],Yt=[1,34],Zt=[1,62],Wt=[1,48],Qt=[1,52],Kt=[1,36],on=[1,37],nn=[1,38],mn=[1,39],gn=[1,40],Tn=[1,56],An=[1,63],kn=[1,51],Mn=[1,53],$n=[1,55],cn=[1,59],Sn=[1,60],an=[1,41],jn=[1,42],hn=[1,43],zn=[1,44],ir=[1,61],tr=[1,50],nr=[1,54],dr=[1,57],or=[1,58],ur=[1,49],Cr=[1,66],Sr=[1,71],rr=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Fr=[1,75],mr=[1,74],_r=[1,76],yr=[20,21,23,81,82],pr=[1,99],Cn=[1,104],rn=[1,107],dn=[1,108],fn=[1,101],On=[1,106],xn=[1,109],hr=[1,102],Nn=[1,114],Kn=[1,113],Un=[1,103],sr=[1,105],ar=[1,110],wr=[1,111],vr=[1,112],Rr=[1,115],ci=[20,21,22,23,81,82],mi=[20,21,22,23,53,81,82],si=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],yi=[20,21,23],Ni=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ii=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Mi=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],Or=[1,149],Ln=[1,157],En=[1,158],Wn=[1,159],er=[1,160],fr=[1,144],Zr=[1,145],gr=[1,141],ti=[1,152],kr=[1,153],ai=[1,154],ui=[1,155],_i=[1,156],hi=[1,161],ji=[1,162],Ei=[1,147],Wi=[1,150],lo=[1,146],Xi=[1,143],Ga=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ns=[1,165],wi=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],qi=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],$s=[12,21,22,24],xs=[22,106],fs=[1,250],Ts=[1,245],ws=[1,246],Lr=[1,254],qr=[1,251],Ir=[1,248],lr=[1,247],zr=[1,249],ni=[1,252],fi=[1,253],xo=[1,255],mo=[1,273],us=[20,21,23,106],hs=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],zo={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(Fi,Zi,bo,bi,Yi,br,ll){var Pr=br.length-1;switch(Yi){case 5:bi.parseDirective("%%{","open_directive");break;case 6:bi.parseDirective(br[Pr],"type_directive");break;case 7:br[Pr]=br[Pr].trim().replace(/'/g,'"'),bi.parseDirective(br[Pr],"arg_directive");break;case 8:bi.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(br[Pr])||br[Pr].length>0)&&br[Pr-1].push(br[Pr]),this.$=br[Pr-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=br[Pr];break;case 19:bi.setDirection("TB"),this.$="TB";break;case 20:bi.setDirection(br[Pr-1]),this.$=br[Pr-1];break;case 35:this.$=br[Pr-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=bi.addSubGraph(br[Pr-6],br[Pr-1],br[Pr-4]);break;case 42:this.$=bi.addSubGraph(br[Pr-3],br[Pr-1],br[Pr-3]);break;case 43:this.$=bi.addSubGraph(void 0,br[Pr-1],void 0);break;case 45:this.$=br[Pr].trim(),bi.setAccTitle(this.$);break;case 46:case 47:this.$=br[Pr].trim(),bi.setAccDescription(this.$);break;case 51:bi.addLink(br[Pr-2].stmt,br[Pr],br[Pr-1]),this.$={stmt:br[Pr],nodes:br[Pr].concat(br[Pr-2].nodes)};break;case 52:bi.addLink(br[Pr-3].stmt,br[Pr-1],br[Pr-2]),this.$={stmt:br[Pr-1],nodes:br[Pr-1].concat(br[Pr-3].nodes)};break;case 53:this.$={stmt:br[Pr-1],nodes:br[Pr-1]};break;case 54:this.$={stmt:br[Pr],nodes:br[Pr]};break;case 55:this.$=[br[Pr]];break;case 56:this.$=br[Pr-4].concat(br[Pr]);break;case 57:this.$=[br[Pr-2]],bi.setClass(br[Pr-2],br[Pr]);break;case 58:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"square");break;case 59:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"doublecircle");break;case 60:this.$=br[Pr-5],bi.addVertex(br[Pr-5],br[Pr-2],"circle");break;case 61:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"ellipse");break;case 62:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"stadium");break;case 63:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"subroutine");break;case 64:this.$=br[Pr-7],bi.addVertex(br[Pr-7],br[Pr-1],"rect",void 0,void 0,void 0,Object.fromEntries([[br[Pr-5],br[Pr-3]]]));break;case 65:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"cylinder");break;case 66:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"round");break;case 67:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"diamond");break;case 68:this.$=br[Pr-5],bi.addVertex(br[Pr-5],br[Pr-2],"hexagon");break;case 69:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"odd");break;case 70:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"trapezoid");break;case 71:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"inv_trapezoid");break;case 72:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"lean_right");break;case 73:this.$=br[Pr-3],bi.addVertex(br[Pr-3],br[Pr-1],"lean_left");break;case 74:this.$=br[Pr],bi.addVertex(br[Pr]);break;case 75:br[Pr-1].text=br[Pr],this.$=br[Pr-1];break;case 76:case 77:br[Pr-2].text=br[Pr-1],this.$=br[Pr-2];break;case 78:this.$=br[Pr];break;case 79:var ta=bi.destructLink(br[Pr],br[Pr-2]);this.$={type:ta.type,stroke:ta.stroke,length:ta.length,text:br[Pr-1]};break;case 80:var ta=bi.destructLink(br[Pr]);this.$={type:ta.type,stroke:ta.stroke,length:ta.length};break;case 81:this.$=br[Pr-1];break;case 83:case 97:case 153:this.$=br[Pr-1]+""+br[Pr];break;case 98:case 99:this.$=br[Pr-4],bi.addClass(br[Pr-2],br[Pr]);break;case 100:this.$=br[Pr-4],bi.setClass(br[Pr-2],br[Pr]);break;case 101:case 109:this.$=br[Pr-1],bi.setClickEvent(br[Pr-1],br[Pr]);break;case 102:case 110:this.$=br[Pr-3],bi.setClickEvent(br[Pr-3],br[Pr-2]),bi.setTooltip(br[Pr-3],br[Pr]);break;case 103:this.$=br[Pr-2],bi.setClickEvent(br[Pr-2],br[Pr-1],br[Pr]);break;case 104:this.$=br[Pr-4],bi.setClickEvent(br[Pr-4],br[Pr-3],br[Pr-2]),bi.setTooltip(br[Pr-4],br[Pr]);break;case 105:case 111:this.$=br[Pr-1],bi.setLink(br[Pr-1],br[Pr]);break;case 106:case 112:this.$=br[Pr-3],bi.setLink(br[Pr-3],br[Pr-2]),bi.setTooltip(br[Pr-3],br[Pr]);break;case 107:case 113:this.$=br[Pr-3],bi.setLink(br[Pr-3],br[Pr-2],br[Pr]);break;case 108:case 114:this.$=br[Pr-5],bi.setLink(br[Pr-5],br[Pr-4],br[Pr]),bi.setTooltip(br[Pr-5],br[Pr-2]);break;case 115:this.$=br[Pr-4],bi.addVertex(br[Pr-2],void 0,void 0,br[Pr]);break;case 116:case 118:this.$=br[Pr-4],bi.updateLink(br[Pr-2],br[Pr]);break;case 117:this.$=br[Pr-4],bi.updateLink([br[Pr-2]],br[Pr]);break;case 119:this.$=br[Pr-8],bi.updateLinkInterpolate([br[Pr-6]],br[Pr-2]),bi.updateLink([br[Pr-6]],br[Pr]);break;case 120:this.$=br[Pr-8],bi.updateLinkInterpolate(br[Pr-6],br[Pr-2]),bi.updateLink(br[Pr-6],br[Pr]);break;case 121:this.$=br[Pr-6],bi.updateLinkInterpolate([br[Pr-4]],br[Pr]);break;case 122:this.$=br[Pr-6],bi.updateLinkInterpolate(br[Pr-4],br[Pr]);break;case 123:case 125:this.$=[br[Pr]];break;case 124:case 126:br[Pr-2].push(br[Pr]),this.$=br[Pr-2];break;case 128:this.$=br[Pr-1]+br[Pr];break;case 150:this.$=br[Pr];break;case 151:this.$=br[Pr-1]+""+br[Pr];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:rt,16:4,21:it,22:st,24:bt},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:rt,16:4,21:it,22:st,24:bt},nt(xt,Et,{17:11}),{7:12,13:[1,13]},{16:14,21:it,22:st,24:bt},{16:15,21:it,22:st,24:bt},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:kt,21:Lt,22:Pt,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Qt,86:Kt,87:on,88:nn,89:mn,90:gn,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,116:47,118:an,119:jn,120:hn,121:zn,122:ir,123:tr,124:nr,125:dr,126:or,127:ur},{8:64,10:[1,65],15:Cr},nt([10,15],[2,6]),nt(xt,[2,17]),nt(xt,[2,18]),nt(xt,[2,19]),{20:[1,68],21:[1,69],22:Sr,27:67,30:70},nt(rr,[2,11]),nt(rr,[2,12]),nt(rr,[2,13]),nt(rr,[2,14]),nt(rr,[2,15]),nt(rr,[2,16]),{9:72,20:Fr,21:mr,23:_r,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:Fr,21:mr,23:_r},{9:81,20:Fr,21:mr,23:_r},{9:82,20:Fr,21:mr,23:_r},{9:83,20:Fr,21:mr,23:_r},{9:84,20:Fr,21:mr,23:_r},{9:86,20:Fr,21:mr,22:[1,85],23:_r},nt(rr,[2,44]),{45:[1,87]},{47:[1,88]},nt(rr,[2,47]),nt(yr,[2,54],{30:89,22:Sr}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:pr,52:Cn,66:rn,67:dn,84:[1,97],91:fn,97:96,98:[1,94],100:[1,95],105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:98,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(rr,[2,158]),nt(rr,[2,159]),nt(rr,[2,160]),nt(rr,[2,161]),nt(ci,[2,55],{53:[1,116]}),nt(mi,[2,74],{116:129,40:[1,117],52:Zt,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:Wt,67:Qt,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,122:ir,123:tr,124:nr,125:dr,126:or,127:ur}),nt(si,[2,150]),nt(si,[2,175]),nt(si,[2,176]),nt(si,[2,177]),nt(si,[2,178]),nt(si,[2,179]),nt(si,[2,180]),nt(si,[2,181]),nt(si,[2,182]),nt(si,[2,183]),nt(si,[2,184]),nt(si,[2,185]),nt(si,[2,186]),nt(si,[2,187]),nt(si,[2,188]),nt(si,[2,189]),nt(si,[2,190]),{9:130,20:Fr,21:mr,23:_r},{11:131,14:[1,132]},nt(yi,[2,8]),nt(xt,[2,20]),nt(xt,[2,26]),nt(xt,[2,27]),{21:[1,133]},nt(Ni,[2,34],{30:134,22:Sr}),nt(rr,[2,35]),{50:135,51:45,52:Zt,54:46,66:Wt,67:Qt,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,116:47,122:ir,123:tr,124:nr,125:dr,126:or,127:ur},nt(Ii,[2,48]),nt(Ii,[2,49]),nt(Ii,[2,50]),nt(Mi,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:Or,24:Ln,26:En,38:Wn,39:139,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),nt(rr,[2,36]),nt(rr,[2,37]),nt(rr,[2,38]),nt(rr,[2,39]),nt(rr,[2,40]),{22:Or,24:Ln,26:En,38:Wn,39:163,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(Ga,Et,{17:164}),nt(rr,[2,45]),nt(rr,[2,46]),nt(yr,[2,53],{52:Ns}),{26:pr,52:Cn,66:rn,67:dn,91:fn,97:166,102:[1,167],105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:98,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{95:[1,168],103:169,105:[1,170]},{26:pr,52:Cn,66:rn,67:dn,91:fn,95:[1,171],97:172,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:98,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{26:pr,52:Cn,66:rn,67:dn,91:fn,97:173,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:98,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(yi,[2,101],{22:[1,174],99:[1,175]}),nt(yi,[2,105],{22:[1,176]}),nt(yi,[2,109],{115:100,117:178,22:[1,177],26:pr,52:Cn,66:rn,67:dn,91:fn,105:On,106:xn,109:hr,111:Nn,112:Kn,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr}),nt(yi,[2,111],{22:[1,179]}),nt(wi,[2,152]),nt(wi,[2,154]),nt(wi,[2,155]),nt(wi,[2,156]),nt(wi,[2,157]),nt(qi,[2,162]),nt(qi,[2,163]),nt(qi,[2,164]),nt(qi,[2,165]),nt(qi,[2,166]),nt(qi,[2,167]),nt(qi,[2,168]),nt(qi,[2,169]),nt(qi,[2,170]),nt(qi,[2,171]),nt(qi,[2,172]),nt(qi,[2,173]),nt(qi,[2,174]),{52:Zt,54:180,66:Wt,67:Qt,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,116:47,122:ir,123:tr,124:nr,125:dr,126:or,127:ur},{22:Or,24:Ln,26:En,38:Wn,39:181,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:182,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:184,42:er,52:Cn,57:[1,183],66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:185,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:186,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:187,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{66:[1,188]},{22:Or,24:Ln,26:En,38:Wn,39:189,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:190,42:er,52:Cn,66:rn,67:dn,71:[1,191],73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:192,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:193,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:194,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(si,[2,151]),nt($s,[2,3]),{8:195,15:Cr},{15:[2,7]},nt(xt,[2,28]),nt(Ni,[2,33]),nt(yr,[2,51],{30:196,22:Sr}),nt(Mi,[2,75],{22:[1,197]}),{22:[1,198]},{22:Or,24:Ln,26:En,38:Wn,39:199,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,82:[1,200],83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(qi,[2,82]),nt(qi,[2,84]),nt(qi,[2,140]),nt(qi,[2,141]),nt(qi,[2,142]),nt(qi,[2,143]),nt(qi,[2,144]),nt(qi,[2,145]),nt(qi,[2,146]),nt(qi,[2,147]),nt(qi,[2,148]),nt(qi,[2,149]),nt(qi,[2,85]),nt(qi,[2,86]),nt(qi,[2,87]),nt(qi,[2,88]),nt(qi,[2,89]),nt(qi,[2,90]),nt(qi,[2,91]),nt(qi,[2,92]),nt(qi,[2,93]),nt(qi,[2,94]),nt(qi,[2,95]),{9:203,20:Fr,21:mr,22:Or,23:_r,24:Ln,26:En,38:Wn,40:[1,202],42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{18:18,19:19,20:kt,21:Lt,22:Pt,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,42:[1,204],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Qt,86:Kt,87:on,88:nn,89:mn,90:gn,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,116:47,118:an,119:jn,120:hn,121:zn,122:ir,123:tr,124:nr,125:dr,126:or,127:ur},{22:Sr,30:205},{22:[1,206],26:pr,52:Cn,66:rn,67:dn,91:fn,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:178,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},nt(xs,[2,123]),{22:[1,211]},{22:[1,212],26:pr,52:Cn,66:rn,67:dn,91:fn,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:178,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:[1,213],26:pr,52:Cn,66:rn,67:dn,91:fn,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:178,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{84:[1,214]},nt(yi,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},nt(wi,[2,153]),{84:[1,219],101:[1,220]},nt(ci,[2,57],{116:129,52:Zt,66:Wt,67:Qt,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,122:ir,123:tr,124:nr,125:dr,126:or,127:ur}),{22:Or,24:Ln,26:En,38:Wn,41:[1,221],42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,56:[1,222],66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:223,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,58:[1,224],66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,60:[1,225],66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,62:[1,226],66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,64:[1,227],66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{67:[1,228]},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,66:rn,67:dn,70:[1,229],73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,66:rn,67:dn,72:[1,230],73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,39:231,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,41:[1,232],42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,66:rn,67:dn,73:fr,75:[1,233],77:[1,234],81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,66:rn,67:dn,73:fr,75:[1,236],77:[1,235],81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{9:237,20:Fr,21:mr,23:_r},nt(yr,[2,52],{52:Ns}),nt(Mi,[2,77]),nt(Mi,[2,76]),{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,66:rn,67:dn,68:[1,238],73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(Mi,[2,79]),nt(qi,[2,83]),{22:Or,24:Ln,26:En,38:Wn,39:239,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(Ga,Et,{17:240}),nt(rr,[2,43]),{51:241,52:Zt,54:46,66:Wt,67:Qt,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,116:47,122:ir,123:tr,124:nr,125:dr,126:or,127:ur},{22:fs,66:Ts,67:ws,86:Lr,96:242,102:qr,105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},{22:fs,66:Ts,67:ws,86:Lr,96:256,102:qr,105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},{22:fs,66:Ts,67:ws,86:Lr,96:257,102:qr,104:[1,258],105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},{22:fs,66:Ts,67:ws,86:Lr,96:259,102:qr,104:[1,260],105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},{105:[1,261]},{22:fs,66:Ts,67:ws,86:Lr,96:262,102:qr,105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},{22:fs,66:Ts,67:ws,86:Lr,96:263,102:qr,105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},{26:pr,52:Cn,66:rn,67:dn,91:fn,97:264,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:98,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(yi,[2,102]),{84:[1,265]},nt(yi,[2,106],{22:[1,266]}),nt(yi,[2,107]),nt(yi,[2,110]),nt(yi,[2,112],{22:[1,267]}),nt(yi,[2,113]),nt(mi,[2,58]),nt(mi,[2,59]),{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,58:[1,268],66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(mi,[2,66]),nt(mi,[2,61]),nt(mi,[2,62]),nt(mi,[2,63]),{66:[1,269]},nt(mi,[2,65]),nt(mi,[2,67]),{22:Or,24:Ln,26:En,38:Wn,42:er,52:Cn,66:rn,67:dn,72:[1,270],73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(mi,[2,69]),nt(mi,[2,70]),nt(mi,[2,72]),nt(mi,[2,71]),nt(mi,[2,73]),nt($s,[2,4]),nt([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:Or,24:Ln,26:En,38:Wn,41:[1,271],42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{18:18,19:19,20:kt,21:Lt,22:Pt,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,42:[1,272],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Qt,86:Kt,87:on,88:nn,89:mn,90:gn,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,116:47,118:an,119:jn,120:hn,121:zn,122:ir,123:tr,124:nr,125:dr,126:or,127:ur},nt(ci,[2,56]),nt(yi,[2,115],{106:mo}),nt(us,[2,125],{108:274,22:fs,66:Ts,67:ws,86:Lr,102:qr,105:Ir,109:lr,110:zr,111:ni,112:fi,113:xo}),nt(hs,[2,127]),nt(hs,[2,129]),nt(hs,[2,130]),nt(hs,[2,131]),nt(hs,[2,132]),nt(hs,[2,133]),nt(hs,[2,134]),nt(hs,[2,135]),nt(hs,[2,136]),nt(hs,[2,137]),nt(hs,[2,138]),nt(hs,[2,139]),nt(yi,[2,116],{106:mo}),nt(yi,[2,117],{106:mo}),{22:[1,275]},nt(yi,[2,118],{106:mo}),{22:[1,276]},nt(xs,[2,124]),nt(yi,[2,98],{106:mo}),nt(yi,[2,99],{106:mo}),nt(yi,[2,100],{115:100,117:178,26:pr,52:Cn,66:rn,67:dn,91:fn,105:On,106:xn,109:hr,111:Nn,112:Kn,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr}),nt(yi,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:Fr,21:mr,23:_r},nt(rr,[2,42]),{22:fs,66:Ts,67:ws,86:Lr,102:qr,105:Ir,107:283,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},nt(hs,[2,128]),{26:pr,52:Cn,66:rn,67:dn,91:fn,97:284,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:98,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{26:pr,52:Cn,66:rn,67:dn,91:fn,97:285,105:On,106:xn,109:hr,111:Nn,112:Kn,115:100,117:98,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(yi,[2,108]),nt(yi,[2,114]),nt(mi,[2,60]),{22:Or,24:Ln,26:En,38:Wn,39:286,42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:140,84:gr,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},nt(mi,[2,68]),nt(Ga,Et,{17:287}),nt(us,[2,126],{108:274,22:fs,66:Ts,67:ws,86:Lr,102:qr,105:Ir,109:lr,110:zr,111:ni,112:fi,113:xo}),nt(yi,[2,121],{115:100,117:178,22:[1,288],26:pr,52:Cn,66:rn,67:dn,91:fn,105:On,106:xn,109:hr,111:Nn,112:Kn,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr}),nt(yi,[2,122],{115:100,117:178,22:[1,289],26:pr,52:Cn,66:rn,67:dn,91:fn,105:On,106:xn,109:hr,111:Nn,112:Kn,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr}),{22:Or,24:Ln,26:En,38:Wn,41:[1,290],42:er,52:Cn,66:rn,67:dn,73:fr,81:Zr,83:201,85:151,86:ti,87:kr,88:ai,89:ui,90:_i,91:hi,92:ji,94:142,95:Ei,105:On,106:xn,109:Wi,111:Nn,112:Kn,113:lo,114:Xi,115:148,122:Un,123:sr,124:ar,125:wr,126:vr,127:Rr},{18:18,19:19,20:kt,21:Lt,22:Pt,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Dt,42:[1,291],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Qt,86:Kt,87:on,88:nn,89:mn,90:gn,91:Tn,95:An,105:kn,106:Mn,109:$n,111:cn,112:Sn,116:47,118:an,119:jn,120:hn,121:zn,122:ir,123:tr,124:nr,125:dr,126:or,127:ur},{22:fs,66:Ts,67:ws,86:Lr,96:292,102:qr,105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},{22:fs,66:Ts,67:ws,86:Lr,96:293,102:qr,105:Ir,107:243,108:244,109:lr,110:zr,111:ni,112:fi,113:xo},nt(mi,[2,64]),nt(rr,[2,41]),nt(yi,[2,119],{106:mo}),nt(yi,[2,120],{106:mo})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(Fi,Zi){if(Zi.recoverable)this.trace(Fi);else{var bo=new Error(Fi);throw bo.hash=Zi,bo}},parse:function(Fi){var Zi=this,bo=[0],bi=[],Yi=[null],br=[],ll=this.table,Pr="",ta=0,Oc=0,Eo=2,ro=1,Ah=br.slice.call(arguments,1),Ai=Object.create(this.lexer),oo={yy:{}};for(var Yl in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Yl)&&(oo.yy[Yl]=this.yy[Yl]);Ai.setInput(Fi,oo.yy),oo.yy.lexer=Ai,oo.yy.parser=this,typeof Ai.yylloc>"u"&&(Ai.yylloc={});var tu=Ai.yylloc;br.push(tu);var cc=Ai.options&&Ai.options.ranges;typeof oo.yy.parseError=="function"?this.parseError=oo.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Hs(){var cl;return cl=bi.pop()||Ai.lex()||ro,typeof cl!="number"&&(cl instanceof Array&&(bi=cl,cl=bi.pop()),cl=Zi.symbols_[cl]||cl),cl}for(var Po,Wa,na,$c,Ba={},Xl,el,Yu,nu;;){if(Wa=bo[bo.length-1],this.defaultActions[Wa]?na=this.defaultActions[Wa]:((Po===null||typeof Po>"u")&&(Po=Hs()),na=ll[Wa]&&ll[Wa][Po]),typeof na>"u"||!na.length||!na[0]){var Su="";nu=[];for(Xl in ll[Wa])this.terminals_[Xl]&&Xl>Eo&&nu.push("'"+this.terminals_[Xl]+"'");Ai.showPosition?Su="Parse error on line "+(ta+1)+`:
`+Ai.showPosition()+`
Expecting `+nu.join(", ")+", got '"+(this.terminals_[Po]||Po)+"'":Su="Parse error on line "+(ta+1)+": Unexpected "+(Po==ro?"end of input":"'"+(this.terminals_[Po]||Po)+"'"),this.parseError(Su,{text:Ai.match,token:this.terminals_[Po]||Po,line:Ai.yylineno,loc:tu,expected:nu})}if(na[0]instanceof Array&&na.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Wa+", token: "+Po);switch(na[0]){case 1:bo.push(Po),Yi.push(Ai.yytext),br.push(Ai.yylloc),bo.push(na[1]),Po=null,Oc=Ai.yyleng,Pr=Ai.yytext,ta=Ai.yylineno,tu=Ai.yylloc;break;case 2:if(el=this.productions_[na[1]][1],Ba.$=Yi[Yi.length-el],Ba._$={first_line:br[br.length-(el||1)].first_line,last_line:br[br.length-1].last_line,first_column:br[br.length-(el||1)].first_column,last_column:br[br.length-1].last_column},cc&&(Ba._$.range=[br[br.length-(el||1)].range[0],br[br.length-1].range[1]]),$c=this.performAction.apply(Ba,[Pr,Oc,ta,oo.yy,na[1],Yi,br].concat(Ah)),typeof $c<"u")return $c;el&&(bo=bo.slice(0,-1*el*2),Yi=Yi.slice(0,-1*el),br=br.slice(0,-1*el)),bo.push(this.productions_[na[1]][0]),Yi.push(Ba.$),br.push(Ba._$),Yu=ll[bo[bo.length-2]][bo[bo.length-1]],bo.push(Yu);break;case 3:return!0}}return!0}},Is=function(){var ca={EOF:1,parseError:function(Zi,bo){if(this.yy.parser)this.yy.parser.parseError(Zi,bo);else throw new Error(Zi)},setInput:function(Fi,Zi){return this.yy=Zi||this.yy||{},this._input=Fi,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Fi=this._input[0];this.yytext+=Fi,this.yyleng++,this.offset++,this.match+=Fi,this.matched+=Fi;var Zi=Fi.match(/(?:\r\n?|\n).*/g);return Zi?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Fi},unput:function(Fi){var Zi=Fi.length,bo=Fi.split(/(?:\r\n?|\n)/g);this._input=Fi+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Zi),this.offset-=Zi;var bi=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),bo.length-1&&(this.yylineno-=bo.length-1);var Yi=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:bo?(bo.length===bi.length?this.yylloc.first_column:0)+bi[bi.length-bo.length].length-bo[0].length:this.yylloc.first_column-Zi},this.options.ranges&&(this.yylloc.range=[Yi[0],Yi[0]+this.yyleng-Zi]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Fi){this.unput(this.match.slice(Fi))},pastInput:function(){var Fi=this.matched.substr(0,this.matched.length-this.match.length);return(Fi.length>20?"...":"")+Fi.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Fi=this.match;return Fi.length<20&&(Fi+=this._input.substr(0,20-Fi.length)),(Fi.substr(0,20)+(Fi.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Fi=this.pastInput(),Zi=new Array(Fi.length+1).join("-");return Fi+this.upcomingInput()+`
`+Zi+"^"},test_match:function(Fi,Zi){var bo,bi,Yi;if(this.options.backtrack_lexer&&(Yi={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Yi.yylloc.range=this.yylloc.range.slice(0))),bi=Fi[0].match(/(?:\r\n?|\n).*/g),bi&&(this.yylineno+=bi.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:bi?bi[bi.length-1].length-bi[bi.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Fi[0].length},this.yytext+=Fi[0],this.match+=Fi[0],this.matches=Fi,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Fi[0].length),this.matched+=Fi[0],bo=this.performAction.call(this,this.yy,this,Zi,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),bo)return bo;if(this._backtrack){for(var br in Yi)this[br]=Yi[br];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Fi,Zi,bo,bi;this._more||(this.yytext="",this.match="");for(var Yi=this._currentRules(),br=0;br<Yi.length;br++)if(bo=this._input.match(this.rules[Yi[br]]),bo&&(!Zi||bo[0].length>Zi[0].length)){if(Zi=bo,bi=br,this.options.backtrack_lexer){if(Fi=this.test_match(bo,Yi[br]),Fi!==!1)return Fi;if(this._backtrack){Zi=!1;continue}else return!1}else if(!this.options.flex)break}return Zi?(Fi=this.test_match(Zi,Yi[bi]),Fi!==!1?Fi:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Zi=this.next();return Zi||this.lex()},begin:function(Zi){this.conditionStack.push(Zi)},popState:function(){var Zi=this.conditionStack.length-1;return Zi>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Zi){return Zi=this.conditionStack.length-1-Math.abs(Zi||0),Zi>=0?this.conditionStack[Zi]:"INITIAL"},pushState:function(Zi){this.begin(Zi)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Zi,bo,bi,Yi){switch(bi){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return Zi.lex.firstGraph()&&this.begin("dir"),24;case 36:return Zi.lex.firstGraph()&&this.begin("dir"),24;case 37:return Zi.lex.firstGraph()&&this.begin("dir"),24;case 38:return 38;case 39:return 42;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return 101;case 44:return this.popState(),25;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return this.popState(),26;case 55:return 118;case 56:return 119;case 57:return 120;case 58:return 121;case 59:return 105;case 60:return 111;case 61:return 53;case 62:return 67;case 63:return 52;case 64:return 20;case 65:return 106;case 66:return 126;case 67:return 82;case 68:return 82;case 69:return 82;case 70:return 81;case 71:return 81;case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:return 125;case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[44,45,46,47,48,49,50,51,52,53,54],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};return ca}();zo.lexer=Is;function Ys(){this.yy={}}return Ys.prototype=zo,zo.Parser=Ys,new Ys}();parser$7.parser=parser$7;const parser$8=parser$7,flowDetector=(nt,rt)=>{var it,st;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-wrapper"||((st=rt==null?void 0:rt.flowchart)==null?void 0:st.defaultRenderer)==="elk"?!1:nt.match(/^\s*graph/)!==null},flowDetectorV2=(nt,rt)=>{var it,st;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-d3"||((st=rt==null?void 0:rt.flowchart)==null?void 0:st.defaultRenderer)==="elk"?!1:nt.match(/^\s*graph/)!==null?!0:nt.match(/^\s*flowchart/)!==null},MERMAID_DOM_ID_PREFIX="flowchart-";let vertexCounter=0,config=getConfig$1(),vertices={},edges=[],classes$1={},subGraphs=[],subGraphLookup={},tooltips={},subCount=0,firstGraphFlag=!0,direction$1,version,funs$1=[];const sanitizeText=nt=>common$1.sanitizeText(nt,config),parseDirective$6=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},lookUpDomId=function(nt){const rt=Object.keys(vertices);for(const it of rt)if(vertices[it].id===nt)return vertices[it].domId;return nt},addVertex=function(nt,rt,it,st,bt,xt,Et={}){let kt,Lt=nt;Lt!==void 0&&Lt.trim().length!==0&&(vertices[Lt]===void 0&&(vertices[Lt]={id:Lt,domId:MERMAID_DOM_ID_PREFIX+Lt+"-"+vertexCounter,styles:[],classes:[]}),vertexCounter++,rt!==void 0?(config=getConfig$1(),kt=sanitizeText(rt.trim()),kt[0]==='"'&&kt[kt.length-1]==='"'&&(kt=kt.substring(1,kt.length-1)),vertices[Lt].text=kt):vertices[Lt].text===void 0&&(vertices[Lt].text=nt),it!==void 0&&(vertices[Lt].type=it),st!=null&&st.forEach(function(Pt){vertices[Lt].styles.push(Pt)}),bt!=null&&bt.forEach(function(Pt){vertices[Lt].classes.push(Pt)}),xt!==void 0&&(vertices[Lt].dir=xt),vertices[Lt].props===void 0?vertices[Lt].props=Et:Et!==void 0&&Object.assign(vertices[Lt].props,Et))},addSingleLink=function(nt,rt,it,st){const Et={start:nt,end:rt,type:void 0,text:""};st=it.text,st!==void 0&&(Et.text=sanitizeText(st.trim()),Et.text[0]==='"'&&Et.text[Et.text.length-1]==='"'&&(Et.text=Et.text.substring(1,Et.text.length-1))),it!==void 0&&(Et.type=it.type,Et.stroke=it.stroke,Et.length=it.length),edges.push(Et)},addLink=function(nt,rt,it,st){let bt,xt;for(bt=0;bt<nt.length;bt++)for(xt=0;xt<rt.length;xt++)addSingleLink(nt[bt],rt[xt],it,st)},updateLinkInterpolate=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultInterpolate=rt:edges[it].interpolate=rt})},updateLink=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultStyle=rt:(utils.isSubstringInArray("fill",rt)===-1&&rt.push("fill:none"),edges[it].style=rt)})},addClass=function(nt,rt){classes$1[nt]===void 0&&(classes$1[nt]={id:nt,styles:[],textStyles:[]}),rt!=null&&rt.forEach(function(it){if(it.match("color")){const bt=it.replace("fill","bgFill").replace("color","fill");classes$1[nt].textStyles.push(bt)}classes$1[nt].styles.push(it)})},setDirection$1=function(nt){direction$1=nt,direction$1.match(/.*</)&&(direction$1="RL"),direction$1.match(/.*\^/)&&(direction$1="BT"),direction$1.match(/.*>/)&&(direction$1="LR"),direction$1.match(/.*v/)&&(direction$1="TB"),direction$1==="TD"&&(direction$1="TB")},setClass$1=function(nt,rt){nt.split(",").forEach(function(it){let st=it;vertices[st]!==void 0&&vertices[st].classes.push(rt),subGraphLookup[st]!==void 0&&subGraphLookup[st].classes.push(rt)})},setTooltip=function(nt,rt){nt.split(",").forEach(function(it){rt!==void 0&&(tooltips[version==="gen-1"?lookUpDomId(it):it]=sanitizeText(rt))})},setClickFun$1=function(nt,rt,it){let st=lookUpDomId(nt);if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let bt=[];if(typeof it=="string"){bt=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let xt=0;xt<bt.length;xt++){let Et=bt[xt].trim();Et.charAt(0)==='"'&&Et.charAt(Et.length-1)==='"'&&(Et=Et.substr(1,Et.length-2)),bt[xt]=Et}}bt.length===0&&bt.push(nt),vertices[nt]!==void 0&&(vertices[nt].haveCallback=!0,funs$1.push(function(){const xt=document.querySelector(`[id="${st}"]`);xt!==null&&xt.addEventListener("click",function(){utils.runFunc(rt,...bt)},!1)}))},setLink$1=function(nt,rt,it){nt.split(",").forEach(function(st){vertices[st]!==void 0&&(vertices[st].link=utils.formatUrl(rt,config),vertices[st].linkTarget=it)}),setClass$1(nt,"clickable")},getTooltip=function(nt){return tooltips[nt]},setClickEvent$1=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFun$1(st,rt,it)}),setClass$1(nt,"clickable")},bindFunctions$1=function(nt){funs$1.forEach(function(rt){rt(nt)})},getDirection$1=function(){return direction$1.trim()},getVertices=function(){return vertices},getEdges=function(){return edges},getClasses$4=function(){return classes$1},setupToolTips=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const bt=select(this);if(bt.attr("title")===null)return;const Et=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(bt.attr("title")).style("left",window.scrollX+Et.left+(Et.right-Et.left)/2+"px").style("top",window.scrollY+Et.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),bt.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$1.push(setupToolTips);const clear$6=function(nt="gen-1"){vertices={},classes$1={},edges=[],funs$1=[setupToolTips],subGraphs=[],subGraphLookup={},subCount=0,tooltips=[],firstGraphFlag=!0,version=nt,clear$g()},setGen=nt=>{version=nt||"gen-2"},defaultStyle=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph=function(nt,rt,it){let st=nt.trim(),bt=it;nt===it&&it.match(/\s/)&&(st=void 0);function xt(Rt){const Dt={boolean:{},number:{},string:{}},Bt=[];let Ft;return{nodeList:Rt.filter(function(Zt){const Wt=typeof Zt;return Zt.stmt&&Zt.stmt==="dir"?(Ft=Zt.value,!1):Zt.trim()===""?!1:Wt in Dt?Dt[Wt].hasOwnProperty(Zt)?!1:Dt[Wt][Zt]=!0:Bt.includes(Zt)?!1:Bt.push(Zt)}),dir:Ft}}let Et=[];const{nodeList:kt,dir:Lt}=xt(Et.concat.apply(Et,rt));if(Et=kt,version==="gen-1")for(let Rt=0;Rt<Et.length;Rt++)Et[Rt]=lookUpDomId(Et[Rt]);st=st||"subGraph"+subCount,bt=bt||"",bt=sanitizeText(bt),subCount=subCount+1;const Pt={id:st,nodes:Et,title:bt.trim(),classes:[],dir:Lt};return log$1.info("Adding",Pt.id,Pt.nodes,Pt.dir),Pt.nodes=makeUniq(Pt,subGraphs).nodes,subGraphs.push(Pt),subGraphLookup[st]=Pt,st},getPosForId=function(nt){for(const[rt,it]of subGraphs.entries())if(it.id===nt)return rt;return-1};let secCount=-1;const posCrossRef=[],indexNodes2=function(nt,rt){const it=subGraphs[rt].nodes;if(secCount=secCount+1,secCount>2e3)return;if(posCrossRef[secCount]=rt,subGraphs[rt].id===nt)return{result:!0,count:0};let st=0,bt=1;for(;st<it.length;){const xt=getPosForId(it[st]);if(xt>=0){const Et=indexNodes2(nt,xt);if(Et.result)return{result:!0,count:bt+Et.count};bt=bt+Et.count}st=st+1}return{result:!1,count:bt}},getDepthFirstPos=function(nt){return posCrossRef[nt]},indexNodes=function(){secCount=-1,subGraphs.length>0&&indexNodes2("none",subGraphs.length-1)},getSubGraphs=function(){return subGraphs},firstGraph=()=>firstGraphFlag?(firstGraphFlag=!1,!0):!1,destructStartLink=nt=>{let rt=nt.trim(),it="arrow_open";switch(rt[0]){case"<":it="arrow_point",rt=rt.slice(1);break;case"x":it="arrow_cross",rt=rt.slice(1);break;case"o":it="arrow_circle",rt=rt.slice(1);break}let st="normal";return rt.includes("=")&&(st="thick"),rt.includes(".")&&(st="dotted"),{type:it,stroke:st}},countChar=(nt,rt)=>{const it=rt.length;let st=0;for(let bt=0;bt<it;++bt)rt[bt]===nt&&++st;return st},destructEndLink=nt=>{const rt=nt.trim();let it=rt.slice(0,-1),st="arrow_open";switch(rt.slice(-1)){case"x":st="arrow_cross",rt[0]==="x"&&(st="double_"+st,it=it.slice(1));break;case">":st="arrow_point",rt[0]==="<"&&(st="double_"+st,it=it.slice(1));break;case"o":st="arrow_circle",rt[0]==="o"&&(st="double_"+st,it=it.slice(1));break}let bt="normal",xt=it.length-1;it[0]==="="&&(bt="thick");let Et=countChar(".",it);return Et&&(bt="dotted",xt=Et),{type:st,stroke:bt,length:xt}},destructLink=(nt,rt)=>{const it=destructEndLink(nt);let st;if(rt){if(st=destructStartLink(rt),st.stroke!==it.stroke)return{type:"INVALID",stroke:"INVALID"};if(st.type==="arrow_open")st.type=it.type;else{if(st.type!==it.type)return{type:"INVALID",stroke:"INVALID"};st.type="double_"+st.type}return st.type==="double_arrow"&&(st.type="double_arrow_point"),st.length=it.length,st}return it},exists=(nt,rt)=>{let it=!1;return nt.forEach(st=>{st.nodes.indexOf(rt)>=0&&(it=!0)}),it},makeUniq=(nt,rt)=>{const it=[];return nt.nodes.forEach((st,bt)=>{exists(rt,st)||it.push(nt.nodes[bt])}),{nodes:it}},lex={firstGraph},flowDb={parseDirective:parseDirective$6,defaultConfig:()=>defaultConfig.flowchart,setAccTitle,getAccTitle,getAccDescription,setAccDescription,addVertex,lookUpDomId,addLink,updateLinkInterpolate,updateLink,addClass,setDirection:setDirection$1,setClass:setClass$1,setTooltip,getTooltip,setClickEvent:setClickEvent$1,setLink:setLink$1,bindFunctions:bindFunctions$1,getDirection:getDirection$1,getVertices,getEdges,getClasses:getClasses$4,clear:clear$6,setGen,defaultStyle,addSubGraph,getDepthFirstPos,indexNodes,getSubGraphs,destructLink,lex,exists,makeUniq,setDiagramTitle,getDiagramTitle},db=Object.freeze(Object.defineProperty({__proto__:null,addClass,addLink,addSingleLink,addSubGraph,addVertex,bindFunctions:bindFunctions$1,clear:clear$6,default:flowDb,defaultStyle,destructLink,firstGraph,getClasses:getClasses$4,getDepthFirstPos,getDirection:getDirection$1,getEdges,getSubGraphs,getTooltip,getVertices,indexNodes,lex,lookUpDomId,parseDirective:parseDirective$6,setClass:setClass$1,setClickEvent:setClickEvent$1,setDirection:setDirection$1,setGen,setLink:setLink$1,updateLink,updateLinkInterpolate},Symbol.toStringTag,{value:"Module"}));function question(nt,rt,it){const st=rt.width,bt=rt.height,xt=(st+bt)*.9,Et=[{x:xt/2,y:0},{x:xt,y:-xt/2},{x:xt/2,y:-xt},{x:0,y:-xt/2}],kt=insertPolygonShape(nt,xt,xt,Et);return it.intersect=function(Lt){return intersectPolygon$1(it,Et,Lt)},kt}function hexagon(nt,rt,it){const bt=rt.height,xt=bt/4,Et=rt.width+2*xt,kt=[{x:xt,y:0},{x:Et-xt,y:0},{x:Et,y:-bt/2},{x:Et-xt,y:-bt},{x:xt,y:-bt},{x:0,y:-bt/2}],Lt=insertPolygonShape(nt,Et,bt,kt);return it.intersect=function(Pt){return intersectPolygon$1(it,kt,Pt)},Lt}function rect_left_inv_arrow(nt,rt,it){const st=rt.width,bt=rt.height,xt=[{x:-bt/2,y:0},{x:st,y:0},{x:st,y:-bt},{x:-bt/2,y:-bt},{x:0,y:-bt/2}],Et=insertPolygonShape(nt,st,bt,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function lean_right(nt,rt,it){const st=rt.width,bt=rt.height,xt=[{x:-2*bt/6,y:0},{x:st-bt/6,y:0},{x:st+2*bt/6,y:-bt},{x:bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function lean_left(nt,rt,it){const st=rt.width,bt=rt.height,xt=[{x:2*bt/6,y:0},{x:st+bt/6,y:0},{x:st-2*bt/6,y:-bt},{x:-bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function trapezoid(nt,rt,it){const st=rt.width,bt=rt.height,xt=[{x:-2*bt/6,y:0},{x:st+2*bt/6,y:0},{x:st-bt/6,y:-bt},{x:bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function inv_trapezoid(nt,rt,it){const st=rt.width,bt=rt.height,xt=[{x:bt/6,y:0},{x:st-bt/6,y:0},{x:st+2*bt/6,y:-bt},{x:-2*bt/6,y:-bt}],Et=insertPolygonShape(nt,st,bt,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function rect_right_inv_arrow(nt,rt,it){const st=rt.width,bt=rt.height,xt=[{x:0,y:0},{x:st+bt/2,y:0},{x:st,y:-bt/2},{x:st+bt/2,y:-bt},{x:0,y:-bt}],Et=insertPolygonShape(nt,st,bt,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function stadium(nt,rt,it){const st=rt.height,bt=rt.width+st/4,xt=nt.insert("rect",":first-child").attr("rx",st/2).attr("ry",st/2).attr("x",-bt/2).attr("y",-st/2).attr("width",bt).attr("height",st);return it.intersect=function(Et){return intersectRect$2(it,Et)},xt}function subroutine(nt,rt,it){const st=rt.width,bt=rt.height,xt=[{x:0,y:0},{x:st,y:0},{x:st,y:-bt},{x:0,y:-bt},{x:0,y:0},{x:-8,y:0},{x:st+8,y:0},{x:st+8,y:-bt},{x:-8,y:-bt},{x:-8,y:0}],Et=insertPolygonShape(nt,st,bt,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function cylinder(nt,rt,it){const st=rt.width,bt=st/2,xt=bt/(2.5+st/50),Et=rt.height+xt,kt="M 0,"+xt+" a "+bt+","+xt+" 0,0,0 "+st+" 0 a "+bt+","+xt+" 0,0,0 "+-st+" 0 l 0,"+Et+" a "+bt+","+xt+" 0,0,0 "+st+" 0 l 0,"+-Et,Lt=nt.attr("label-offset-y",xt).insert("path",":first-child").attr("d",kt).attr("transform","translate("+-st/2+","+-(Et/2+xt)+")");return it.intersect=function(Pt){const Rt=intersectRect$2(it,Pt),Dt=Rt.x-it.x;if(bt!=0&&(Math.abs(Dt)<it.width/2||Math.abs(Dt)==it.width/2&&Math.abs(Rt.y-it.y)>it.height/2-xt)){let Bt=xt*xt*(1-Dt*Dt/(bt*bt));Bt!=0&&(Bt=Math.sqrt(Bt)),Bt=xt-Bt,Pt.y-it.y>0&&(Bt=-Bt),Rt.y+=Bt}return Rt},Lt}function addToRender(nt){nt.shapes().question=question,nt.shapes().hexagon=hexagon,nt.shapes().stadium=stadium,nt.shapes().subroutine=subroutine,nt.shapes().cylinder=cylinder,nt.shapes().rect_left_inv_arrow=rect_left_inv_arrow,nt.shapes().lean_right=lean_right,nt.shapes().lean_left=lean_left,nt.shapes().trapezoid=trapezoid,nt.shapes().inv_trapezoid=inv_trapezoid,nt.shapes().rect_right_inv_arrow=rect_right_inv_arrow}function addToRenderV2(nt){nt({question}),nt({hexagon}),nt({stadium}),nt({subroutine}),nt({cylinder}),nt({rect_left_inv_arrow}),nt({lean_right}),nt({lean_left}),nt({trapezoid}),nt({inv_trapezoid}),nt({rect_right_inv_arrow})}function insertPolygonShape(nt,rt,it,st){return nt.insert("polygon",":first-child").attr("points",st.map(function(bt){return bt.x+","+bt.y}).join(" ")).attr("transform","translate("+-rt/2+","+it/2+")")}const flowChartShapes={addToRender,addToRenderV2},conf$7={},setConf$7=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$7[it]=nt[it]},addVertices$1=function(nt,rt,it,st,bt,xt){const Et=st?st.select(`[id="${it}"]`):select(`[id="${it}"]`),kt=bt||document;Object.keys(nt).forEach(function(Pt){const Rt=nt[Pt];let Dt="default";Rt.classes.length>0&&(Dt=Rt.classes.join(" "));const Bt=getStylesFromArray(Rt.styles);let Ft=Rt.text!==void 0?Rt.text:Rt.id,Yt;if(evaluate(getConfig$1().flowchart.htmlLabels)){const Qt={label:Ft.replace(/fa[blrs]?:fa-[\w-]+/g,Kt=>`<i class='${Kt.replace(":"," ")}'></i>`)};Yt=addHtmlLabel$1(Et,Qt).node(),Yt.parentNode.removeChild(Yt)}else{const Qt=kt.createElementNS("http://www.w3.org/2000/svg","text");Qt.setAttribute("style",Bt.labelStyle.replace("color:","fill:"));const Kt=Ft.split(common$1.lineBreakRegex);for(const on of Kt){const nn=kt.createElementNS("http://www.w3.org/2000/svg","tspan");nn.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),nn.setAttribute("dy","1em"),nn.setAttribute("x","1"),nn.textContent=on,Qt.appendChild(nn)}Yt=Qt}let Zt=0,Wt="";switch(Rt.type){case"round":Zt=5,Wt="rect";break;case"square":Wt="rect";break;case"diamond":Wt="question";break;case"hexagon":Wt="hexagon";break;case"odd":Wt="rect_left_inv_arrow";break;case"lean_right":Wt="lean_right";break;case"lean_left":Wt="lean_left";break;case"trapezoid":Wt="trapezoid";break;case"inv_trapezoid":Wt="inv_trapezoid";break;case"odd_right":Wt="rect_left_inv_arrow";break;case"circle":Wt="circle";break;case"ellipse":Wt="ellipse";break;case"stadium":Wt="stadium";break;case"subroutine":Wt="subroutine";break;case"cylinder":Wt="cylinder";break;case"group":Wt="rect";break;default:Wt="rect"}log$1.warn("Adding node",Rt.id,Rt.domId),rt.setNode(xt.db.lookUpDomId(Rt.id),{labelType:"svg",labelStyle:Bt.labelStyle,shape:Wt,label:Yt,rx:Zt,ry:Zt,class:Dt,style:Bt.style,id:xt.db.lookUpDomId(Rt.id)})})},addEdges$1=function(nt,rt,it){let st=0,bt,xt;if(nt.defaultStyle!==void 0){const Et=getStylesFromArray(nt.defaultStyle);bt=Et.style,xt=Et.labelStyle}nt.forEach(function(Et){st++;var kt="L-"+Et.start+"-"+Et.end,Lt="LS-"+Et.start,Pt="LE-"+Et.end;const Rt={};Et.type==="arrow_open"?Rt.arrowhead="none":Rt.arrowhead="normal";let Dt="",Bt="";if(Et.style!==void 0){const Ft=getStylesFromArray(Et.style);Dt=Ft.style,Bt=Ft.labelStyle}else switch(Et.stroke){case"normal":Dt="fill:none",bt!==void 0&&(Dt=bt),xt!==void 0&&(Bt=xt);break;case"dotted":Dt="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":Dt=" stroke-width: 3.5px;fill:none";break}Rt.style=Dt,Rt.labelStyle=Bt,Et.interpolate!==void 0?Rt.curve=interpolateToCurve(Et.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Rt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Rt.curve=interpolateToCurve(conf$7.curve,curveLinear),Et.text===void 0?Et.style!==void 0&&(Rt.arrowheadStyle="fill: #333"):(Rt.arrowheadStyle="fill: #333",Rt.labelpos="c",evaluate(getConfig$1().flowchart.htmlLabels)?(Rt.labelType="html",Rt.label=`<span id="L-${kt}" class="edgeLabel L-${Lt}' L-${Pt}" style="${Rt.labelStyle}">${Et.text.replace(/fa[blrs]?:fa-[\w-]+/g,Ft=>`<i class='${Ft.replace(":"," ")}'></i>`)}</span>`):(Rt.labelType="text",Rt.label=Et.text.replace(common$1.lineBreakRegex,`
`),Et.style===void 0&&(Rt.style=Rt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),Rt.labelStyle=Rt.labelStyle.replace("color:","fill:"))),Rt.id=kt,Rt.class=Lt+" "+Pt,Rt.minlen=Et.length||1,rt.setEdge(it.db.lookUpDomId(Et.start),it.db.lookUpDomId(Et.end),Rt,st)})},getClasses$3=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch(it){return log$1.error(it),{}}},draw$a=function(nt,rt,it,st){log$1.info("Drawing flowchart"),st.db.clear();const{securityLevel:bt,flowchart:xt}=getConfig$1();let Et;bt==="sandbox"&&(Et=select("#i"+rt));const kt=select(bt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=bt==="sandbox"?Et.nodes()[0].contentDocument:document;try{st.parser.parse(nt)}catch{log$1.debug("Parsing failed")}let Pt=st.db.getDirection();Pt===void 0&&(Pt="TD");const Rt=xt.nodeSpacing||50,Dt=xt.rankSpacing||50,Bt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Pt,nodesep:Rt,ranksep:Dt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let Ft;const Yt=st.db.getSubGraphs();for(let gn=Yt.length-1;gn>=0;gn--)Ft=Yt[gn],st.db.addVertex(Ft.id,Ft.title,"group",void 0,Ft.classes);const Zt=st.db.getVertices();log$1.warn("Get vertices",Zt);const Wt=st.db.getEdges();let Qt=0;for(Qt=Yt.length-1;Qt>=0;Qt--){Ft=Yt[Qt],selectAll("cluster").append("text");for(let gn=0;gn<Ft.nodes.length;gn++)log$1.warn("Setting subgraph",Ft.nodes[gn],st.db.lookUpDomId(Ft.nodes[gn]),st.db.lookUpDomId(Ft.id)),Bt.setParent(st.db.lookUpDomId(Ft.nodes[gn]),st.db.lookUpDomId(Ft.id))}addVertices$1(Zt,Bt,rt,kt,Lt,st),addEdges$1(Wt,Bt,st);const Kt=new render$2;flowChartShapes.addToRender(Kt),Kt.arrows().none=function(Tn,An,kn,Mn){const cn=Tn.append("marker").attr("id",An).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");applyStyle$1(cn,kn[Mn+"Style"])},Kt.arrows().normal=function(Tn,An){Tn.append("marker").attr("id",An).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const on=kt.select(`[id="${rt}"]`),nn=kt.select("#"+rt+" g");for(Kt(nn,Bt),nn.selectAll("g.node").attr("title",function(){return st.db.getTooltip(this.id)}),st.db.indexNodes("subGraph"+Qt),Qt=0;Qt<Yt.length;Qt++)if(Ft=Yt[Qt],Ft.title!=="undefined"){const gn=Lt.querySelectorAll("#"+rt+' [id="'+st.db.lookUpDomId(Ft.id)+'"] rect'),Tn=Lt.querySelectorAll("#"+rt+' [id="'+st.db.lookUpDomId(Ft.id)+'"]'),An=gn[0].x.baseVal.value,kn=gn[0].y.baseVal.value,Mn=gn[0].width.baseVal.value,cn=select(Tn[0]).select(".label");cn.attr("transform",`translate(${An+Mn/2}, ${kn+14})`),cn.attr("id",rt+"Text");for(let Sn=0;Sn<Ft.classes.length;Sn++)Tn[0].classList.add(Ft.classes[Sn])}if(!xt.htmlLabels){const gn=Lt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const Tn of gn){const An=Tn.getBBox(),kn=Lt.createElementNS("http://www.w3.org/2000/svg","rect");kn.setAttribute("rx",0),kn.setAttribute("ry",0),kn.setAttribute("width",An.width),kn.setAttribute("height",An.height),Tn.insertBefore(kn,Tn.firstChild)}}setupGraphViewbox$1(Bt,on,xt.diagramPadding,xt.useMaxWidth),Object.keys(Zt).forEach(function(gn){const Tn=Zt[gn];if(Tn.link){const An=kt.select("#"+rt+' [id="'+st.db.lookUpDomId(gn)+'"]');if(An){const kn=Lt.createElementNS("http://www.w3.org/2000/svg","a");kn.setAttributeNS("http://www.w3.org/2000/svg","class",Tn.classes.join(" ")),kn.setAttributeNS("http://www.w3.org/2000/svg","href",Tn.link),kn.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),bt==="sandbox"?kn.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):Tn.linkTarget&&kn.setAttributeNS("http://www.w3.org/2000/svg","target",Tn.linkTarget);const Mn=An.insert(function(){return kn},":first-child"),$n=An.select(".label-container");$n&&Mn.append(function(){return $n.node()});const cn=An.select(".label");cn&&Mn.append(function(){return cn.node()})}}})},flowRenderer={setConf:setConf$7,addVertices:addVertices$1,addEdges:addEdges$1,getClasses:getClasses$3,draw:draw$a},conf$6={},setConf$6=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$6[it]=nt[it]},addVertices=function(nt,rt,it,st,bt,xt){const Et=st.select(`[id="${it}"]`);Object.keys(nt).forEach(function(Lt){const Pt=nt[Lt];let Rt="default";Pt.classes.length>0&&(Rt=Pt.classes.join(" "));const Dt=getStylesFromArray(Pt.styles);let Bt=Pt.text!==void 0?Pt.text:Pt.id,Ft;if(evaluate(getConfig$1().flowchart.htmlLabels)){const Wt={label:Bt.replace(/fa[blrs]?:fa-[\w-]+/g,Qt=>`<i class='${Qt.replace(":"," ")}'></i>`)};Ft=addHtmlLabel$1(Et,Wt).node(),Ft.parentNode.removeChild(Ft)}else{const Wt=bt.createElementNS("http://www.w3.org/2000/svg","text");Wt.setAttribute("style",Dt.labelStyle.replace("color:","fill:"));const Qt=Bt.split(common$1.lineBreakRegex);for(const Kt of Qt){const on=bt.createElementNS("http://www.w3.org/2000/svg","tspan");on.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),on.setAttribute("dy","1em"),on.setAttribute("x","1"),on.textContent=Kt,Wt.appendChild(on)}Ft=Wt}let Yt=0,Zt="";switch(Pt.type){case"round":Yt=5,Zt="rect";break;case"square":Zt="rect";break;case"diamond":Zt="question";break;case"hexagon":Zt="hexagon";break;case"odd":Zt="rect_left_inv_arrow";break;case"lean_right":Zt="lean_right";break;case"lean_left":Zt="lean_left";break;case"trapezoid":Zt="trapezoid";break;case"inv_trapezoid":Zt="inv_trapezoid";break;case"odd_right":Zt="rect_left_inv_arrow";break;case"circle":Zt="circle";break;case"ellipse":Zt="ellipse";break;case"stadium":Zt="stadium";break;case"subroutine":Zt="subroutine";break;case"cylinder":Zt="cylinder";break;case"group":Zt="rect";break;case"doublecircle":Zt="doublecircle";break;default:Zt="rect"}rt.setNode(Pt.id,{labelStyle:Dt.labelStyle,shape:Zt,labelText:Bt,rx:Yt,ry:Yt,class:Rt,style:Dt.style,id:Pt.id,link:Pt.link,linkTarget:Pt.linkTarget,tooltip:xt.db.getTooltip(Pt.id)||"",domId:xt.db.lookUpDomId(Pt.id),haveCallback:Pt.haveCallback,width:Pt.type==="group"?500:void 0,dir:Pt.dir,type:Pt.type,props:Pt.props,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Dt.labelStyle,shape:Zt,labelText:Bt,rx:Yt,ry:Yt,class:Rt,style:Dt.style,id:Pt.id,domId:xt.db.lookUpDomId(Pt.id),width:Pt.type==="group"?500:void 0,type:Pt.type,dir:Pt.dir,props:Pt.props,padding:getConfig$1().flowchart.padding})})},addEdges=function(nt,rt,it){log$1.info("abc78 edges = ",nt);let st=0,bt={},xt,Et;if(nt.defaultStyle!==void 0){const kt=getStylesFromArray(nt.defaultStyle);xt=kt.style,Et=kt.labelStyle}nt.forEach(function(kt){st++;var Lt="L-"+kt.start+"-"+kt.end;bt[Lt]===void 0?(bt[Lt]=0,log$1.info("abc78 new entry",Lt,bt[Lt])):(bt[Lt]++,log$1.info("abc78 new entry",Lt,bt[Lt]));let Pt=Lt+"-"+bt[Lt];log$1.info("abc78 new link id to be used is",Lt,Pt,bt[Lt]);var Rt="LS-"+kt.start,Dt="LE-"+kt.end;const Bt={style:"",labelStyle:""};switch(Bt.minlen=kt.length||1,kt.type==="arrow_open"?Bt.arrowhead="none":Bt.arrowhead="normal",Bt.arrowTypeStart="arrow_open",Bt.arrowTypeEnd="arrow_open",kt.type){case"double_arrow_cross":Bt.arrowTypeStart="arrow_cross";case"arrow_cross":Bt.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":Bt.arrowTypeStart="arrow_point";case"arrow_point":Bt.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":Bt.arrowTypeStart="arrow_circle";case"arrow_circle":Bt.arrowTypeEnd="arrow_circle";break}let Ft="",Yt="";switch(kt.stroke){case"normal":Ft="fill:none;",xt!==void 0&&(Ft=xt),Et!==void 0&&(Yt=Et),Bt.thickness="normal",Bt.pattern="solid";break;case"dotted":Bt.thickness="normal",Bt.pattern="dotted",Bt.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":Bt.thickness="thick",Bt.pattern="solid",Bt.style="stroke-width: 3.5px;fill:none;";break}if(kt.style!==void 0){const Zt=getStylesFromArray(kt.style);Ft=Zt.style,Yt=Zt.labelStyle}Bt.style=Bt.style+=Ft,Bt.labelStyle=Bt.labelStyle+=Yt,kt.interpolate!==void 0?Bt.curve=interpolateToCurve(kt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Bt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Bt.curve=interpolateToCurve(conf$6.curve,curveLinear),kt.text===void 0?kt.style!==void 0&&(Bt.arrowheadStyle="fill: #333"):(Bt.arrowheadStyle="fill: #333",Bt.labelpos="c"),Bt.labelType="text",Bt.label=kt.text.replace(common$1.lineBreakRegex,`
`),kt.style===void 0&&(Bt.style=Bt.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),Bt.labelStyle=Bt.labelStyle.replace("color:","fill:"),Bt.id=Pt,Bt.classes="flowchart-link "+Rt+" "+Dt,rt.setEdge(kt.start,kt.end,Bt,st)})},getClasses$2=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch{return}},draw$9=function(nt,rt,it,st){log$1.info("Drawing flowchart"),st.db.clear(),flowDb.setGen("gen-2"),st.parser.parse(nt);let bt=st.db.getDirection();bt===void 0&&(bt="TD");const{securityLevel:xt,flowchart:Et}=getConfig$1(),kt=Et.nodeSpacing||50,Lt=Et.rankSpacing||50;let Pt;xt==="sandbox"&&(Pt=select("#i"+rt));const Rt=select(xt==="sandbox"?Pt.nodes()[0].contentDocument.body:"body"),Dt=xt==="sandbox"?Pt.nodes()[0].contentDocument:document,Bt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:bt,nodesep:kt,ranksep:Lt,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let Ft;const Yt=st.db.getSubGraphs();log$1.info("Subgraphs - ",Yt);for(let mn=Yt.length-1;mn>=0;mn--)Ft=Yt[mn],log$1.info("Subgraph - ",Ft),st.db.addVertex(Ft.id,Ft.title,"group",void 0,Ft.classes,Ft.dir);const Zt=st.db.getVertices(),Wt=st.db.getEdges();log$1.info("Edges",Wt);let Qt=0;for(Qt=Yt.length-1;Qt>=0;Qt--){Ft=Yt[Qt],selectAll("cluster").append("text");for(let mn=0;mn<Ft.nodes.length;mn++)log$1.info("Setting up subgraphs",Ft.nodes[mn],Ft.id),Bt.setParent(Ft.nodes[mn],Ft.id)}addVertices(Zt,Bt,rt,Rt,Dt,st),addEdges(Wt,Bt);const Kt=Rt.select(`[id="${rt}"]`),on=Rt.select("#"+rt+" g");if(render$1(on,Bt,["point","circle","cross"],"flowchart",rt),utils.insertTitle(Kt,"flowchartTitleText",Et.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox$1(Bt,Kt,Et.diagramPadding,Et.useMaxWidth),st.db.indexNodes("subGraph"+Qt),!Et.htmlLabels){const mn=Dt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const gn of mn){const Tn=gn.getBBox(),An=Dt.createElementNS("http://www.w3.org/2000/svg","rect");An.setAttribute("rx",0),An.setAttribute("ry",0),An.setAttribute("width",Tn.width),An.setAttribute("height",Tn.height),gn.insertBefore(An,gn.firstChild)}}Object.keys(Zt).forEach(function(mn){const gn=Zt[mn];if(gn.link){const Tn=select("#"+rt+' [id="'+mn+'"]');if(Tn){const An=Dt.createElementNS("http://www.w3.org/2000/svg","a");An.setAttributeNS("http://www.w3.org/2000/svg","class",gn.classes.join(" ")),An.setAttributeNS("http://www.w3.org/2000/svg","href",gn.link),An.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),xt==="sandbox"?An.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):gn.linkTarget&&An.setAttributeNS("http://www.w3.org/2000/svg","target",gn.linkTarget);const kn=Tn.insert(function(){return An},":first-child"),Mn=Tn.select(".label-container");Mn&&kn.append(function(){return Mn.node()});const $n=Tn.select(".label");$n&&kn.append(function(){return $n.node()})}}})},flowRendererV2={setConf:setConf$6,addVertices,addEdges,getClasses:getClasses$2,draw:draw$9};var parser$6=function(){var nt=function(An,kn,Mn,$n){for(Mn=Mn||{},$n=An.length;$n--;Mn[An[$n]]=kn);return Mn},rt=[1,3],it=[1,5],st=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],bt=[1,15],xt=[1,16],Et=[1,17],kt=[1,18],Lt=[1,19],Pt=[1,20],Rt=[1,21],Dt=[1,22],Bt=[1,23],Ft=[1,24],Yt=[1,25],Zt=[1,26],Wt=[1,27],Qt=[1,29],Kt=[1,31],on=[1,34],nn=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],mn={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(kn,Mn,$n,cn,Sn,an,jn){var hn=an.length-1;switch(Sn){case 2:return an[hn-1];case 3:this.$=[];break;case 4:an[hn-1].push(an[hn]),this.$=an[hn-1];break;case 5:case 6:this.$=an[hn];break;case 7:case 8:this.$=[];break;case 9:cn.setDateFormat(an[hn].substr(11)),this.$=an[hn].substr(11);break;case 10:cn.enableInclusiveEndDates(),this.$=an[hn].substr(18);break;case 11:cn.TopAxis(),this.$=an[hn].substr(8);break;case 12:cn.setAxisFormat(an[hn].substr(11)),this.$=an[hn].substr(11);break;case 13:cn.setTickInterval(an[hn].substr(13)),this.$=an[hn].substr(13);break;case 14:cn.setExcludes(an[hn].substr(9)),this.$=an[hn].substr(9);break;case 15:cn.setIncludes(an[hn].substr(9)),this.$=an[hn].substr(9);break;case 16:cn.setTodayMarker(an[hn].substr(12)),this.$=an[hn].substr(12);break;case 17:cn.setDiagramTitle(an[hn].substr(6)),this.$=an[hn].substr(6);break;case 18:this.$=an[hn].trim(),cn.setAccTitle(this.$);break;case 19:case 20:this.$=an[hn].trim(),cn.setAccDescription(this.$);break;case 21:cn.addSection(an[hn].substr(8)),this.$=an[hn].substr(8);break;case 23:cn.addTask(an[hn-1],an[hn]),this.$="task";break;case 27:this.$=an[hn-1],cn.setClickEvent(an[hn-1],an[hn],null);break;case 28:this.$=an[hn-2],cn.setClickEvent(an[hn-2],an[hn-1],an[hn]);break;case 29:this.$=an[hn-2],cn.setClickEvent(an[hn-2],an[hn-1],null),cn.setLink(an[hn-2],an[hn]);break;case 30:this.$=an[hn-3],cn.setClickEvent(an[hn-3],an[hn-2],an[hn-1]),cn.setLink(an[hn-3],an[hn]);break;case 31:this.$=an[hn-2],cn.setClickEvent(an[hn-2],an[hn],null),cn.setLink(an[hn-2],an[hn-1]);break;case 32:this.$=an[hn-3],cn.setClickEvent(an[hn-3],an[hn-1],an[hn]),cn.setLink(an[hn-3],an[hn-2]);break;case 33:this.$=an[hn-1],cn.setLink(an[hn-1],an[hn]);break;case 34:case 40:this.$=an[hn-1]+" "+an[hn];break;case 35:case 36:case 38:this.$=an[hn-2]+" "+an[hn-1]+" "+an[hn];break;case 37:case 39:this.$=an[hn-3]+" "+an[hn-2]+" "+an[hn-1]+" "+an[hn];break;case 41:cn.parseDirective("%%{","open_directive");break;case 42:cn.parseDirective(an[hn],"type_directive");break;case 43:an[hn]=an[hn].trim().replace(/'/g,'"'),cn.parseDirective(an[hn],"arg_directive");break;case 44:cn.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:rt,30:4,40:it},{1:[3]},{3:6,4:2,5:rt,30:4,40:it},nt(st,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:bt,13:xt,14:Et,15:kt,16:Lt,17:Pt,18:Rt,19:Dt,20:Bt,21:Ft,23:Yt,25:Zt,26:Wt,27:28,28:Qt,30:4,35:Kt,40:it},{32:32,33:[1,33],43:on},nt([33,43],[2,42]),nt(st,[2,8],{1:[2,2]}),nt(st,[2,4]),{4:30,10:35,12:bt,13:xt,14:Et,15:kt,16:Lt,17:Pt,18:Rt,19:Dt,20:Bt,21:Ft,23:Yt,25:Zt,26:Wt,27:28,28:Qt,30:4,35:Kt,40:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,9]),nt(st,[2,10]),nt(st,[2,11]),nt(st,[2,12]),nt(st,[2,13]),nt(st,[2,14]),nt(st,[2,15]),nt(st,[2,16]),nt(st,[2,17]),{22:[1,36]},{24:[1,37]},nt(st,[2,20]),nt(st,[2,21]),nt(st,[2,22]),{29:[1,38]},nt(st,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},nt(st,[2,5]),nt(st,[2,18]),nt(st,[2,19]),nt(st,[2,23]),nt(st,[2,27],{37:[1,44],38:[1,45]}),nt(st,[2,33],{36:[1,46]}),nt(nn,[2,25]),{32:47,43:on},{43:[2,43]},nt(st,[2,28],{38:[1,48]}),nt(st,[2,29]),nt(st,[2,31],{37:[1,49]}),{11:[1,50]},nt(st,[2,30]),nt(st,[2,32]),nt(nn,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(kn,Mn){if(Mn.recoverable)this.trace(kn);else{var $n=new Error(kn);throw $n.hash=Mn,$n}},parse:function(kn){var Mn=this,$n=[0],cn=[],Sn=[null],an=[],jn=this.table,hn="",zn=0,ir=0,tr=2,nr=1,dr=an.slice.call(arguments,1),or=Object.create(this.lexer),ur={yy:{}};for(var Cr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Cr)&&(ur.yy[Cr]=this.yy[Cr]);or.setInput(kn,ur.yy),ur.yy.lexer=or,ur.yy.parser=this,typeof or.yylloc>"u"&&(or.yylloc={});var Sr=or.yylloc;an.push(Sr);var rr=or.options&&or.options.ranges;typeof ur.yy.parseError=="function"?this.parseError=ur.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Fr(){var hr;return hr=cn.pop()||or.lex()||nr,typeof hr!="number"&&(hr instanceof Array&&(cn=hr,hr=cn.pop()),hr=Mn.symbols_[hr]||hr),hr}for(var mr,_r,yr,pr,Cn={},rn,dn,fn,On;;){if(_r=$n[$n.length-1],this.defaultActions[_r]?yr=this.defaultActions[_r]:((mr===null||typeof mr>"u")&&(mr=Fr()),yr=jn[_r]&&jn[_r][mr]),typeof yr>"u"||!yr.length||!yr[0]){var xn="";On=[];for(rn in jn[_r])this.terminals_[rn]&&rn>tr&&On.push("'"+this.terminals_[rn]+"'");or.showPosition?xn="Parse error on line "+(zn+1)+`:
`+or.showPosition()+`
Expecting `+On.join(", ")+", got '"+(this.terminals_[mr]||mr)+"'":xn="Parse error on line "+(zn+1)+": Unexpected "+(mr==nr?"end of input":"'"+(this.terminals_[mr]||mr)+"'"),this.parseError(xn,{text:or.match,token:this.terminals_[mr]||mr,line:or.yylineno,loc:Sr,expected:On})}if(yr[0]instanceof Array&&yr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_r+", token: "+mr);switch(yr[0]){case 1:$n.push(mr),Sn.push(or.yytext),an.push(or.yylloc),$n.push(yr[1]),mr=null,ir=or.yyleng,hn=or.yytext,zn=or.yylineno,Sr=or.yylloc;break;case 2:if(dn=this.productions_[yr[1]][1],Cn.$=Sn[Sn.length-dn],Cn._$={first_line:an[an.length-(dn||1)].first_line,last_line:an[an.length-1].last_line,first_column:an[an.length-(dn||1)].first_column,last_column:an[an.length-1].last_column},rr&&(Cn._$.range=[an[an.length-(dn||1)].range[0],an[an.length-1].range[1]]),pr=this.performAction.apply(Cn,[hn,ir,zn,ur.yy,yr[1],Sn,an].concat(dr)),typeof pr<"u")return pr;dn&&($n=$n.slice(0,-1*dn*2),Sn=Sn.slice(0,-1*dn),an=an.slice(0,-1*dn)),$n.push(this.productions_[yr[1]][0]),Sn.push(Cn.$),an.push(Cn._$),fn=jn[$n[$n.length-2]][$n[$n.length-1]],$n.push(fn);break;case 3:return!0}}return!0}},gn=function(){var An={EOF:1,parseError:function(Mn,$n){if(this.yy.parser)this.yy.parser.parseError(Mn,$n);else throw new Error(Mn)},setInput:function(kn,Mn){return this.yy=Mn||this.yy||{},this._input=kn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var kn=this._input[0];this.yytext+=kn,this.yyleng++,this.offset++,this.match+=kn,this.matched+=kn;var Mn=kn.match(/(?:\r\n?|\n).*/g);return Mn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),kn},unput:function(kn){var Mn=kn.length,$n=kn.split(/(?:\r\n?|\n)/g);this._input=kn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Mn),this.offset-=Mn;var cn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),$n.length-1&&(this.yylineno-=$n.length-1);var Sn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$n?($n.length===cn.length?this.yylloc.first_column:0)+cn[cn.length-$n.length].length-$n[0].length:this.yylloc.first_column-Mn},this.options.ranges&&(this.yylloc.range=[Sn[0],Sn[0]+this.yyleng-Mn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(kn){this.unput(this.match.slice(kn))},pastInput:function(){var kn=this.matched.substr(0,this.matched.length-this.match.length);return(kn.length>20?"...":"")+kn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var kn=this.match;return kn.length<20&&(kn+=this._input.substr(0,20-kn.length)),(kn.substr(0,20)+(kn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var kn=this.pastInput(),Mn=new Array(kn.length+1).join("-");return kn+this.upcomingInput()+`
`+Mn+"^"},test_match:function(kn,Mn){var $n,cn,Sn;if(this.options.backtrack_lexer&&(Sn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Sn.yylloc.range=this.yylloc.range.slice(0))),cn=kn[0].match(/(?:\r\n?|\n).*/g),cn&&(this.yylineno+=cn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:cn?cn[cn.length-1].length-cn[cn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+kn[0].length},this.yytext+=kn[0],this.match+=kn[0],this.matches=kn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(kn[0].length),this.matched+=kn[0],$n=this.performAction.call(this,this.yy,this,Mn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),$n)return $n;if(this._backtrack){for(var an in Sn)this[an]=Sn[an];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var kn,Mn,$n,cn;this._more||(this.yytext="",this.match="");for(var Sn=this._currentRules(),an=0;an<Sn.length;an++)if($n=this._input.match(this.rules[Sn[an]]),$n&&(!Mn||$n[0].length>Mn[0].length)){if(Mn=$n,cn=an,this.options.backtrack_lexer){if(kn=this.test_match($n,Sn[an]),kn!==!1)return kn;if(this._backtrack){Mn=!1;continue}else return!1}else if(!this.options.flex)break}return Mn?(kn=this.test_match(Mn,Sn[cn]),kn!==!1?kn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Mn=this.next();return Mn||this.lex()},begin:function(Mn){this.conditionStack.push(Mn)},popState:function(){var Mn=this.conditionStack.length-1;return Mn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Mn){return Mn=this.conditionStack.length-1-Math.abs(Mn||0),Mn>=0?this.conditionStack[Mn]:"INITIAL"},pushState:function(Mn){this.begin(Mn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Mn,$n,cn,Sn){switch(cn){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return An}();mn.lexer=gn;function Tn(){this.yy={}}return Tn.prototype=mn,mn.Parser=Tn,new Tn}();parser$6.parser=parser$6;const ganttParser=parser$6,ganttDetector=nt=>nt.match(/^\s*gantt/)!==null;dayjs.extend(dayjsIsoWeek);dayjs.extend(dayjsCustomParseFormat);dayjs.extend(dayjsAdvancedFormat);let dateFormat="",axisFormat="",tickInterval,todayMarker="",includes=[],excludes=[],links={},sections$2=[],tasks$1=[],currentSection$1="";const tags=["active","done","crit","milestone"];let funs=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0;const parseDirective$5=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear$5=function(){sections$2=[],tasks$1=[],currentSection$1="",funs=[],taskCnt=0,lastTask=void 0,lastTaskID=void 0,rawTasks$1=[],dateFormat="",axisFormat="",tickInterval=void 0,todayMarker="",includes=[],excludes=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0,links={},clear$g()},setAxisFormat=function(nt){axisFormat=nt},getAxisFormat=function(){return axisFormat},setTickInterval=function(nt){tickInterval=nt},getTickInterval=function(){return tickInterval},setTodayMarker=function(nt){todayMarker=nt},getTodayMarker=function(){return todayMarker},setDateFormat=function(nt){dateFormat=nt},enableInclusiveEndDates=function(){inclusiveEndDates=!0},endDatesAreInclusive=function(){return inclusiveEndDates},enableTopAxis=function(){topAxis=!0},topAxisEnabled=function(){return topAxis},getDateFormat=function(){return dateFormat},setIncludes=function(nt){includes=nt.toLowerCase().split(/[\s,]+/)},getIncludes=function(){return includes},setExcludes=function(nt){excludes=nt.toLowerCase().split(/[\s,]+/)},getExcludes=function(){return excludes},getLinks=function(){return links},addSection$2=function(nt){currentSection$1=nt,sections$2.push(nt)},getSections$2=function(){return sections$2},getTasks$1=function(){let nt=compileTasks$1();const rt=10;let it=0;for(;!nt&&it<rt;)nt=compileTasks$1(),it++;return tasks$1=rawTasks$1,tasks$1},isInvalidDate=function(nt,rt,it,st){return st.includes(nt.format(rt.trim()))?!1:nt.isoWeekday()>=6&&it.includes("weekends")||it.includes(nt.format("dddd").toLowerCase())?!0:it.includes(nt.format(rt.trim()))},checkTaskDates=function(nt,rt,it,st){if(!it.length||nt.manualEndTime)return;let bt;nt.startTime instanceof Date?bt=dayjs(nt.startTime):bt=dayjs(nt.startTime,rt,!0),bt=bt.add(1,"d");let xt;nt.endTime instanceof Date?xt=dayjs(nt.endTime):xt=dayjs(nt.endTime,rt,!0);const[Et,kt]=fixTaskDates(bt,xt,rt,it,st);nt.endTime=Et.toDate(),nt.renderEndTime=kt},fixTaskDates=function(nt,rt,it,st,bt){let xt=!1,Et=null;for(;nt<=rt;)xt||(Et=rt.toDate()),xt=isInvalidDate(nt,it,st,bt),xt&&(rt=rt.add(1,"d")),nt=nt.add(1,"d");return[rt,Et]},getStartDate=function(nt,rt,it){it=it.trim();const bt=/^after\s+([\d\w- ]+)/.exec(it.trim());if(bt!==null){let Et=null;if(bt[1].split(" ").forEach(function(kt){let Lt=findTaskById(kt);Lt!==void 0&&(Et?Lt.endTime>Et.endTime&&(Et=Lt):Et=Lt)}),Et)return Et.endTime;{const kt=new Date;return kt.setHours(0,0,0,0),kt}}let xt=dayjs(it,rt.trim(),!0);if(xt.isValid())return xt.toDate();{log$1.debug("Invalid date:"+it),log$1.debug("With date format:"+rt.trim());const Et=new Date(it);if(Et===void 0||isNaN(Et.getTime()))throw new Error("Invalid date:"+it);return Et}},parseDuration=function(nt){const rt=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(nt.trim());return rt!==null?[Number.parseFloat(rt[1]),rt[2]]:[NaN,"ms"]},getEndDate=function(nt,rt,it,st=!1){it=it.trim();let bt=dayjs(it,rt.trim(),!0);if(bt.isValid())return st&&(bt=bt.add(1,"d")),bt.toDate();let xt=dayjs(nt);const[Et,kt]=parseDuration(it);if(!Number.isNaN(Et)){const Lt=xt.add(Et,kt);Lt.isValid()&&(xt=Lt)}return xt.toDate()};let taskCnt=0;const parseId=function(nt){return nt===void 0?(taskCnt=taskCnt+1,"task"+taskCnt):nt},compileData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const st=it.split(","),bt={};getTaskTags(st,bt,tags);for(let Et=0;Et<st.length;Et++)st[Et]=st[Et].trim();let xt="";switch(st.length){case 1:bt.id=parseId(),bt.startTime=nt.endTime,xt=st[0];break;case 2:bt.id=parseId(),bt.startTime=getStartDate(void 0,dateFormat,st[0]),xt=st[1];break;case 3:bt.id=parseId(st[0]),bt.startTime=getStartDate(void 0,dateFormat,st[1]),xt=st[2];break}return xt&&(bt.endTime=getEndDate(bt.startTime,dateFormat,xt,inclusiveEndDates),bt.manualEndTime=dayjs(xt,"YYYY-MM-DD",!0).isValid(),checkTaskDates(bt,dateFormat,excludes,includes)),bt},parseData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const st=it.split(","),bt={};getTaskTags(st,bt,tags);for(let xt=0;xt<st.length;xt++)st[xt]=st[xt].trim();switch(st.length){case 1:bt.id=parseId(),bt.startTime={type:"prevTaskEnd",id:nt},bt.endTime={data:st[0]};break;case 2:bt.id=parseId(),bt.startTime={type:"getStartDate",startData:st[0]},bt.endTime={data:st[1]};break;case 3:bt.id=parseId(st[0]),bt.startTime={type:"getStartDate",startData:st[1]},bt.endTime={data:st[2]};break}return bt};let lastTask,lastTaskID,rawTasks$1=[];const taskDb={},addTask$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:rt},task:nt,classes:[]},st=parseData(lastTaskID,rt);it.raw.startTime=st.startTime,it.raw.endTime=st.endTime,it.id=st.id,it.prevTaskId=lastTaskID,it.active=st.active,it.done=st.done,it.crit=st.crit,it.milestone=st.milestone,it.order=lastOrder,lastOrder++;const bt=rawTasks$1.push(it);lastTaskID=it.id,taskDb[it.id]=bt-1},findTaskById=function(nt){const rt=taskDb[nt];return rawTasks$1[rt]},addTaskOrg$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,description:nt,task:nt,classes:[]},st=compileData(lastTask,rt);it.startTime=st.startTime,it.endTime=st.endTime,it.id=st.id,it.active=st.active,it.done=st.done,it.crit=st.crit,it.milestone=st.milestone,lastTask=it,tasks$1.push(it)},compileTasks$1=function(){const nt=function(it){const st=rawTasks$1[it];let bt="";switch(rawTasks$1[it].raw.startTime.type){case"prevTaskEnd":{const xt=findTaskById(st.prevTaskId);st.startTime=xt.endTime;break}case"getStartDate":bt=getStartDate(void 0,dateFormat,rawTasks$1[it].raw.startTime.startData),bt&&(rawTasks$1[it].startTime=bt);break}return rawTasks$1[it].startTime&&(rawTasks$1[it].endTime=getEndDate(rawTasks$1[it].startTime,dateFormat,rawTasks$1[it].raw.endTime.data,inclusiveEndDates),rawTasks$1[it].endTime&&(rawTasks$1[it].processed=!0,rawTasks$1[it].manualEndTime=dayjs(rawTasks$1[it].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),checkTaskDates(rawTasks$1[it],dateFormat,excludes,includes))),rawTasks$1[it].processed};let rt=!0;for(const[it,st]of rawTasks$1.entries())nt(it),rt=rt&&st.processed;return rt},setLink=function(nt,rt){let it=rt;getConfig$1().securityLevel!=="loose"&&(it=dist.sanitizeUrl(rt)),nt.split(",").forEach(function(st){findTaskById(st)!==void 0&&(pushFun(st,()=>{window.open(it,"_self")}),links[st]=it)}),setClass(nt,"clickable")},setClass=function(nt,rt){nt.split(",").forEach(function(it){let st=findTaskById(it);st!==void 0&&st.classes.push(rt)})},setClickFun=function(nt,rt,it){if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let st=[];if(typeof it=="string"){st=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let xt=0;xt<st.length;xt++){let Et=st[xt].trim();Et.charAt(0)==='"'&&Et.charAt(Et.length-1)==='"'&&(Et=Et.substr(1,Et.length-2)),st[xt]=Et}}st.length===0&&st.push(nt),findTaskById(nt)!==void 0&&pushFun(nt,()=>{utils.runFunc(rt,...st)})},pushFun=function(nt,rt){funs.push(function(){const it=document.querySelector(`[id="${nt}"]`);it!==null&&it.addEventListener("click",function(){rt()})},function(){const it=document.querySelector(`[id="${nt}-text"]`);it!==null&&it.addEventListener("click",function(){rt()})})},setClickEvent=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFun(st,rt,it)}),setClass(nt,"clickable")},bindFunctions=function(nt){funs.forEach(function(rt){rt(nt)})},ganttDb={parseDirective:parseDirective$5,getConfig:()=>getConfig$1().gantt,clear:clear$5,setDateFormat,getDateFormat,enableInclusiveEndDates,endDatesAreInclusive,enableTopAxis,topAxisEnabled,setAxisFormat,getAxisFormat,setTickInterval,getTickInterval,setTodayMarker,getTodayMarker,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setAccDescription,getAccDescription,addSection:addSection$2,getSections:getSections$2,getTasks:getTasks$1,addTask:addTask$1,findTaskById,addTaskOrg:addTaskOrg$1,setIncludes,getIncludes,setExcludes,getExcludes,setClickEvent,setLink,getLinks,bindFunctions,parseDuration,isInvalidDate};function getTaskTags(nt,rt,it){let st=!0;for(;st;)st=!1,it.forEach(function(bt){const xt="^\\s*"+bt+"\\s*$",Et=new RegExp(xt);nt[0].match(Et)&&(rt[bt]=!0,nt.shift(1),st=!0)})}const setConf$5=function(){log$1.debug("Something is calling, setConf, remove the call")};let w;const draw$8=function(nt,rt,it,st){const bt=getConfig$1().gantt,xt=getConfig$1().securityLevel;let Et;xt==="sandbox"&&(Et=select("#i"+rt));const kt=select(xt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=xt==="sandbox"?Et.nodes()[0].contentDocument:document,Pt=Lt.getElementById(rt);w=Pt.parentElement.offsetWidth,w===void 0&&(w=1200),bt.useWidth!==void 0&&(w=bt.useWidth);const Rt=st.db.getTasks(),Dt=Rt.length*(bt.barHeight+bt.barGap)+2*bt.topPadding;Pt.setAttribute("viewBox","0 0 "+w+" "+Dt);const Bt=kt.select(`[id="${rt}"]`),Ft=time$1().domain([min$2(Rt,function(Mn){return Mn.startTime}),max$2(Rt,function(Mn){return Mn.endTime})]).rangeRound([0,w-bt.leftPadding-bt.rightPadding]);let Yt=[];for(const Mn of Rt)Yt.push(Mn.type);const Zt=Yt;Yt=Tn(Yt);function Wt(Mn,$n){const cn=Mn.startTime,Sn=$n.startTime;let an=0;return cn>Sn?an=1:cn<Sn&&(an=-1),an}Rt.sort(Wt),Qt(Rt,w,Dt),configureSvgSize(Bt,Dt,w,bt.useMaxWidth),Bt.append("text").text(st.db.getDiagramTitle()).attr("x",w/2).attr("y",bt.titleTopMargin).attr("class","titleText");function Qt(Mn,$n,cn){const Sn=bt.barHeight,an=Sn+bt.barGap,jn=bt.topPadding,hn=bt.leftPadding,zn=linear().domain([0,Yt.length]).range(["#00B9FA","#F95002"]).interpolate(interpolateHcl);on(an,jn,hn,$n,cn,Mn,st.db.getExcludes(),st.db.getIncludes()),nn(hn,jn,$n,cn),Kt(Mn,an,jn,hn,Sn,zn,$n),mn(an,jn),gn(hn,jn,$n,cn)}function Kt(Mn,$n,cn,Sn,an,jn,hn){Bt.append("g").selectAll("rect").data(Mn).enter().append("rect").attr("x",0).attr("y",function(nr,dr){return dr=nr.order,dr*$n+cn-2}).attr("width",function(){return hn-bt.rightPadding/2}).attr("height",$n).attr("class",function(nr){for(const[dr,or]of Yt.entries())if(nr.type===or)return"section section"+dr%bt.numberSectionStyles;return"section section0"});const zn=Bt.append("g").selectAll("rect").data(Mn).enter(),ir=st.db.getLinks();if(zn.append("rect").attr("id",function(nr){return nr.id}).attr("rx",3).attr("ry",3).attr("x",function(nr){return nr.milestone?Ft(nr.startTime)+Sn+.5*(Ft(nr.endTime)-Ft(nr.startTime))-.5*an:Ft(nr.startTime)+Sn}).attr("y",function(nr,dr){return dr=nr.order,dr*$n+cn}).attr("width",function(nr){return nr.milestone?an:Ft(nr.renderEndTime||nr.endTime)-Ft(nr.startTime)}).attr("height",an).attr("transform-origin",function(nr,dr){return dr=nr.order,(Ft(nr.startTime)+Sn+.5*(Ft(nr.endTime)-Ft(nr.startTime))).toString()+"px "+(dr*$n+cn+.5*an).toString()+"px"}).attr("class",function(nr){const dr="task";let or="";nr.classes.length>0&&(or=nr.classes.join(" "));let ur=0;for(const[Sr,rr]of Yt.entries())nr.type===rr&&(ur=Sr%bt.numberSectionStyles);let Cr="";return nr.active?nr.crit?Cr+=" activeCrit":Cr=" active":nr.done?nr.crit?Cr=" doneCrit":Cr=" done":nr.crit&&(Cr+=" crit"),Cr.length===0&&(Cr=" task"),nr.milestone&&(Cr=" milestone "+Cr),Cr+=ur,Cr+=" "+or,dr+Cr}),zn.append("text").attr("id",function(nr){return nr.id+"-text"}).text(function(nr){return nr.task}).attr("font-size",bt.fontSize).attr("x",function(nr){let dr=Ft(nr.startTime),or=Ft(nr.renderEndTime||nr.endTime);nr.milestone&&(dr+=.5*(Ft(nr.endTime)-Ft(nr.startTime))-.5*an),nr.milestone&&(or=dr+an);const ur=this.getBBox().width;return ur>or-dr?or+ur+1.5*bt.leftPadding>hn?dr+Sn-5:or+Sn+5:(or-dr)/2+dr+Sn}).attr("y",function(nr,dr){return dr=nr.order,dr*$n+bt.barHeight/2+(bt.fontSize/2-2)+cn}).attr("text-height",an).attr("class",function(nr){const dr=Ft(nr.startTime);let or=Ft(nr.endTime);nr.milestone&&(or=dr+an);const ur=this.getBBox().width;let Cr="";nr.classes.length>0&&(Cr=nr.classes.join(" "));let Sr=0;for(const[Fr,mr]of Yt.entries())nr.type===mr&&(Sr=Fr%bt.numberSectionStyles);let rr="";return nr.active&&(nr.crit?rr="activeCritText"+Sr:rr="activeText"+Sr),nr.done?nr.crit?rr=rr+" doneCritText"+Sr:rr=rr+" doneText"+Sr:nr.crit&&(rr=rr+" critText"+Sr),nr.milestone&&(rr+=" milestoneText"),ur>or-dr?or+ur+1.5*bt.leftPadding>hn?Cr+" taskTextOutsideLeft taskTextOutside"+Sr+" "+rr:Cr+" taskTextOutsideRight taskTextOutside"+Sr+" "+rr+" width-"+ur:Cr+" taskText taskText"+Sr+" "+rr+" width-"+ur}),getConfig$1().securityLevel==="sandbox"){let nr;nr=select("#i"+rt);const dr=nr.nodes()[0].contentDocument;zn.filter(function(or){return ir[or.id]!==void 0}).each(function(or){var ur=dr.querySelector("#"+or.id),Cr=dr.querySelector("#"+or.id+"-text");const Sr=ur.parentNode;var rr=dr.createElement("a");rr.setAttribute("xlink:href",ir[or.id]),rr.setAttribute("target","_top"),Sr.appendChild(rr),rr.appendChild(ur),rr.appendChild(Cr)})}}function on(Mn,$n,cn,Sn,an,jn,hn,zn){const ir=jn.reduce((Sr,{startTime:rr})=>Sr?Math.min(Sr,rr):rr,0),tr=jn.reduce((Sr,{endTime:rr})=>Sr?Math.max(Sr,rr):rr,0),nr=st.db.getDateFormat();if(!ir||!tr)return;const dr=[];let or=null,ur=dayjs(ir);for(;ur.valueOf()<=tr;)st.db.isInvalidDate(ur,nr,hn,zn)?or?or.end=ur:or={start:ur,end:ur}:or&&(dr.push(or),or=null),ur=ur.add(1,"d");Bt.append("g").selectAll("rect").data(dr).enter().append("rect").attr("id",function(Sr){return"exclude-"+Sr.start.format("YYYY-MM-DD")}).attr("x",function(Sr){return Ft(Sr.start)+cn}).attr("y",bt.gridLineStartPadding).attr("width",function(Sr){const rr=Sr.end.add(1,"day");return Ft(rr)-Ft(Sr.start)}).attr("height",an-$n-bt.gridLineStartPadding).attr("transform-origin",function(Sr,rr){return(Ft(Sr.start)+cn+.5*(Ft(Sr.end)-Ft(Sr.start))).toString()+"px "+(rr*Mn+.5*an).toString()+"px"}).attr("class","exclude-range")}function nn(Mn,$n,cn,Sn){let an=axisBottom(Ft).tickSize(-Sn+$n+bt.gridLineStartPadding).tickFormat(timeFormat(st.db.getAxisFormat()||bt.axisFormat||"%Y-%m-%d"));const hn=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(st.db.getTickInterval()||bt.tickInterval);if(hn!==null){const zn=hn[1];switch(hn[2]){case"minute":an.ticks(timeMinute.every(zn));break;case"hour":an.ticks(timeHour.every(zn));break;case"day":an.ticks(timeDay.every(zn));break;case"week":an.ticks(timeSunday.every(zn));break;case"month":an.ticks(timeMonth.every(zn));break}}if(Bt.append("g").attr("class","grid").attr("transform","translate("+Mn+", "+(Sn-50)+")").call(an).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),st.db.topAxisEnabled()||bt.topAxis){let zn=axisTop(Ft).tickSize(-Sn+$n+bt.gridLineStartPadding).tickFormat(timeFormat(st.db.getAxisFormat()||bt.axisFormat||"%Y-%m-%d"));if(hn!==null){const ir=hn[1];switch(hn[2]){case"minute":zn.ticks(timeMinute.every(ir));break;case"hour":zn.ticks(timeHour.every(ir));break;case"day":zn.ticks(timeDay.every(ir));break;case"week":zn.ticks(timeSunday.every(ir));break;case"month":zn.ticks(timeMonth.every(ir));break}}Bt.append("g").attr("class","grid").attr("transform","translate("+Mn+", "+$n+")").call(zn).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function mn(Mn,$n){const cn=[];let Sn=0;for(const[an,jn]of Yt.entries())cn[an]=[jn,kn(jn,Zt)];Bt.append("g").selectAll("text").data(cn).enter().append(function(an){const jn=an[0].split(common$1.lineBreakRegex),hn=-(jn.length-1)/2,zn=Lt.createElementNS("http://www.w3.org/2000/svg","text");zn.setAttribute("dy",hn+"em");for(const[ir,tr]of jn.entries()){const nr=Lt.createElementNS("http://www.w3.org/2000/svg","tspan");nr.setAttribute("alignment-baseline","central"),nr.setAttribute("x","10"),ir>0&&nr.setAttribute("dy","1em"),nr.textContent=tr,zn.appendChild(nr)}return zn}).attr("x",10).attr("y",function(an,jn){if(jn>0)for(let hn=0;hn<jn;hn++)return Sn+=cn[jn-1][1],an[1]*Mn/2+Sn*Mn+$n;else return an[1]*Mn/2+$n}).attr("font-size",bt.sectionFontSize).attr("font-size",bt.sectionFontSize).attr("class",function(an){for(const[jn,hn]of Yt.entries())if(an[0]===hn)return"sectionTitle sectionTitle"+jn%bt.numberSectionStyles;return"sectionTitle"})}function gn(Mn,$n,cn,Sn){const an=st.db.getTodayMarker();if(an==="off")return;const jn=Bt.append("g").attr("class","today"),hn=new Date,zn=jn.append("line");zn.attr("x1",Ft(hn)+Mn).attr("x2",Ft(hn)+Mn).attr("y1",bt.titleTopMargin).attr("y2",Sn-bt.titleTopMargin).attr("class","today"),an!==""&&zn.attr("style",an.replace(/,/g,";"))}function Tn(Mn){const $n={},cn=[];for(let Sn=0,an=Mn.length;Sn<an;++Sn)Object.prototype.hasOwnProperty.call($n,Mn[Sn])||($n[Mn[Sn]]=!0,cn.push(Mn[Sn]));return cn}function An(Mn){let $n=Mn.length;const cn={};for(;$n;)cn[Mn[--$n]]=(cn[Mn[$n]]||0)+1;return cn}function kn(Mn,$n){return An($n)[Mn]||0}},ganttRenderer={setConf:setConf$5,draw:draw$8};var parser$5=function(){var nt=function(xt,Et,kt,Lt){for(kt=kt||{},Lt=xt.length;Lt--;kt[xt[Lt]]=Et);return kt},rt=[6,9,10],it={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(Et,kt,Lt,Pt,Rt,Dt,Bt){switch(Dt.length-1,Rt){case 1:return Pt;case 4:break;case 6:Pt.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},nt(rt,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},nt(rt,[2,3]),nt(rt,[2,4]),nt(rt,[2,5]),nt(rt,[2,6])],defaultActions:{4:[2,1]},parseError:function(Et,kt){if(kt.recoverable)this.trace(Et);else{var Lt=new Error(Et);throw Lt.hash=kt,Lt}},parse:function(Et){var kt=this,Lt=[0],Pt=[],Rt=[null],Dt=[],Bt=this.table,Ft="",Yt=0,Zt=0,Wt=2,Qt=1,Kt=Dt.slice.call(arguments,1),on=Object.create(this.lexer),nn={yy:{}};for(var mn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mn)&&(nn.yy[mn]=this.yy[mn]);on.setInput(Et,nn.yy),nn.yy.lexer=on,nn.yy.parser=this,typeof on.yylloc>"u"&&(on.yylloc={});var gn=on.yylloc;Dt.push(gn);var Tn=on.options&&on.options.ranges;typeof nn.yy.parseError=="function"?this.parseError=nn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function An(){var tr;return tr=Pt.pop()||on.lex()||Qt,typeof tr!="number"&&(tr instanceof Array&&(Pt=tr,tr=Pt.pop()),tr=kt.symbols_[tr]||tr),tr}for(var kn,Mn,$n,cn,Sn={},an,jn,hn,zn;;){if(Mn=Lt[Lt.length-1],this.defaultActions[Mn]?$n=this.defaultActions[Mn]:((kn===null||typeof kn>"u")&&(kn=An()),$n=Bt[Mn]&&Bt[Mn][kn]),typeof $n>"u"||!$n.length||!$n[0]){var ir="";zn=[];for(an in Bt[Mn])this.terminals_[an]&&an>Wt&&zn.push("'"+this.terminals_[an]+"'");on.showPosition?ir="Parse error on line "+(Yt+1)+`:
`+on.showPosition()+`
Expecting `+zn.join(", ")+", got '"+(this.terminals_[kn]||kn)+"'":ir="Parse error on line "+(Yt+1)+": Unexpected "+(kn==Qt?"end of input":"'"+(this.terminals_[kn]||kn)+"'"),this.parseError(ir,{text:on.match,token:this.terminals_[kn]||kn,line:on.yylineno,loc:gn,expected:zn})}if($n[0]instanceof Array&&$n.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Mn+", token: "+kn);switch($n[0]){case 1:Lt.push(kn),Rt.push(on.yytext),Dt.push(on.yylloc),Lt.push($n[1]),kn=null,Zt=on.yyleng,Ft=on.yytext,Yt=on.yylineno,gn=on.yylloc;break;case 2:if(jn=this.productions_[$n[1]][1],Sn.$=Rt[Rt.length-jn],Sn._$={first_line:Dt[Dt.length-(jn||1)].first_line,last_line:Dt[Dt.length-1].last_line,first_column:Dt[Dt.length-(jn||1)].first_column,last_column:Dt[Dt.length-1].last_column},Tn&&(Sn._$.range=[Dt[Dt.length-(jn||1)].range[0],Dt[Dt.length-1].range[1]]),cn=this.performAction.apply(Sn,[Ft,Zt,Yt,nn.yy,$n[1],Rt,Dt].concat(Kt)),typeof cn<"u")return cn;jn&&(Lt=Lt.slice(0,-1*jn*2),Rt=Rt.slice(0,-1*jn),Dt=Dt.slice(0,-1*jn)),Lt.push(this.productions_[$n[1]][0]),Rt.push(Sn.$),Dt.push(Sn._$),hn=Bt[Lt[Lt.length-2]][Lt[Lt.length-1]],Lt.push(hn);break;case 3:return!0}}return!0}},st=function(){var xt={EOF:1,parseError:function(kt,Lt){if(this.yy.parser)this.yy.parser.parseError(kt,Lt);else throw new Error(kt)},setInput:function(Et,kt){return this.yy=kt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var kt=Et.match(/(?:\r\n?|\n).*/g);return kt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var kt=Et.length,Lt=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-kt),this.offset-=kt;var Pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Lt.length-1&&(this.yylineno-=Lt.length-1);var Rt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Lt?(Lt.length===Pt.length?this.yylloc.first_column:0)+Pt[Pt.length-Lt.length].length-Lt[0].length:this.yylloc.first_column-kt},this.options.ranges&&(this.yylloc.range=[Rt[0],Rt[0]+this.yyleng-kt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),kt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+kt+"^"},test_match:function(Et,kt){var Lt,Pt,Rt;if(this.options.backtrack_lexer&&(Rt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Rt.yylloc.range=this.yylloc.range.slice(0))),Pt=Et[0].match(/(?:\r\n?|\n).*/g),Pt&&(this.yylineno+=Pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pt?Pt[Pt.length-1].length-Pt[Pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Lt=this.performAction.call(this,this.yy,this,kt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Lt)return Lt;if(this._backtrack){for(var Dt in Rt)this[Dt]=Rt[Dt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,kt,Lt,Pt;this._more||(this.yytext="",this.match="");for(var Rt=this._currentRules(),Dt=0;Dt<Rt.length;Dt++)if(Lt=this._input.match(this.rules[Rt[Dt]]),Lt&&(!kt||Lt[0].length>kt[0].length)){if(kt=Lt,Pt=Dt,this.options.backtrack_lexer){if(Et=this.test_match(Lt,Rt[Dt]),Et!==!1)return Et;if(this._backtrack){kt=!1;continue}else return!1}else if(!this.options.flex)break}return kt?(Et=this.test_match(kt,Rt[Pt]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var kt=this.next();return kt||this.lex()},begin:function(kt){this.conditionStack.push(kt)},popState:function(){var kt=this.conditionStack.length-1;return kt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(kt){return kt=this.conditionStack.length-1-Math.abs(kt||0),kt>=0?this.conditionStack[kt]:"INITIAL"},pushState:function(kt){this.begin(kt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(kt,Lt,Pt,Rt){switch(Pt){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return xt}();it.lexer=st;function bt(){this.yy={}}return bt.prototype=it,it.Parser=bt,new bt}();parser$5.parser=parser$5;const infoParser=parser$5;var message="",info=!1;const setMessage=nt=>{log$1.debug("Setting message to: "+nt),message=nt},getMessage=()=>message,setInfo=nt=>{info=nt},getInfo=()=>info,infoDb={setMessage,getMessage,setInfo,getInfo,clear:clear$g},draw$7=(nt,rt,it)=>{try{log$1.debug(`Rendering info diagram
`+nt);const st=getConfig$1().securityLevel;let bt;st==="sandbox"&&(bt=select("#i"+rt));const Et=select(st==="sandbox"?bt.nodes()[0].contentDocument.body:"body").select("#"+rt);Et.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+it),Et.attr("height",100),Et.attr("width",400)}catch(st){log$1.error("Error while rendering info diagram"),log$1.error(st.message)}},infoRenderer={draw:draw$7},infoDetector=nt=>nt.match(/^\s*info/)!==null;var parser$4=function(){var nt=function(gn,Tn,An,kn){for(An=An||{},kn=gn.length;kn--;An[gn[kn]]=Tn);return An},rt=[1,4],it=[1,5],st=[1,6],bt=[1,7],xt=[1,9],Et=[1,11,13,15,17,19,20,26,27,28,29],kt=[2,5],Lt=[1,6,11,13,15,17,19,20,26,27,28,29],Pt=[26,27,28],Rt=[2,8],Dt=[1,18],Bt=[1,19],Ft=[1,20],Yt=[1,21],Zt=[1,22],Wt=[1,23],Qt=[1,28],Kt=[6,26,27,28,29],on={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(Tn,An,kn,Mn,$n,cn,Sn){var an=cn.length-1;switch($n){case 4:Mn.setShowData(!0);break;case 7:this.$=cn[an-1];break;case 9:Mn.addSection(cn[an-1],Mn.cleanupValue(cn[an]));break;case 10:this.$=cn[an].trim(),Mn.setDiagramTitle(this.$);break;case 11:this.$=cn[an].trim(),Mn.setAccTitle(this.$);break;case 12:case 13:this.$=cn[an].trim(),Mn.setAccDescription(this.$);break;case 14:Mn.addSection(cn[an].substr(8)),this.$=cn[an].substr(8);break;case 21:Mn.parseDirective("%%{","open_directive");break;case 22:Mn.parseDirective(cn[an],"type_directive");break;case 23:cn[an]=cn[an].trim().replace(/'/g,'"'),Mn.parseDirective(cn[an],"arg_directive");break;case 24:Mn.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:rt,21:8,26:it,27:st,28:bt,29:xt},{1:[3]},{3:10,4:2,5:3,6:rt,21:8,26:it,27:st,28:bt,29:xt},{3:11,4:2,5:3,6:rt,21:8,26:it,27:st,28:bt,29:xt},nt(Et,kt,{7:12,8:[1,13]}),nt(Lt,[2,18]),nt(Lt,[2,19]),nt(Lt,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},nt(Pt,Rt,{21:8,9:16,10:17,5:24,1:[2,3],11:Dt,13:Bt,15:Ft,17:Yt,19:Zt,20:Wt,29:xt}),nt(Et,kt,{7:25}),{23:26,24:[1,27],32:Qt},nt([24,32],[2,22]),nt(Et,[2,6]),{4:29,26:it,27:st,28:bt},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},nt(Pt,[2,13]),nt(Pt,[2,14]),nt(Pt,[2,15]),nt(Pt,Rt,{21:8,9:16,10:17,5:24,1:[2,4],11:Dt,13:Bt,15:Ft,17:Yt,19:Zt,20:Wt,29:xt}),nt(Kt,[2,16]),{25:34,31:[1,35]},nt(Kt,[2,24]),nt(Et,[2,7]),nt(Pt,[2,9]),nt(Pt,[2,10]),nt(Pt,[2,11]),nt(Pt,[2,12]),{23:36,32:Qt},{32:[2,23]},nt(Kt,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(Tn,An){if(An.recoverable)this.trace(Tn);else{var kn=new Error(Tn);throw kn.hash=An,kn}},parse:function(Tn){var An=this,kn=[0],Mn=[],$n=[null],cn=[],Sn=this.table,an="",jn=0,hn=0,zn=2,ir=1,tr=cn.slice.call(arguments,1),nr=Object.create(this.lexer),dr={yy:{}};for(var or in this.yy)Object.prototype.hasOwnProperty.call(this.yy,or)&&(dr.yy[or]=this.yy[or]);nr.setInput(Tn,dr.yy),dr.yy.lexer=nr,dr.yy.parser=this,typeof nr.yylloc>"u"&&(nr.yylloc={});var ur=nr.yylloc;cn.push(ur);var Cr=nr.options&&nr.options.ranges;typeof dr.yy.parseError=="function"?this.parseError=dr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Sr(){var On;return On=Mn.pop()||nr.lex()||ir,typeof On!="number"&&(On instanceof Array&&(Mn=On,On=Mn.pop()),On=An.symbols_[On]||On),On}for(var rr,Fr,mr,_r,yr={},pr,Cn,rn,dn;;){if(Fr=kn[kn.length-1],this.defaultActions[Fr]?mr=this.defaultActions[Fr]:((rr===null||typeof rr>"u")&&(rr=Sr()),mr=Sn[Fr]&&Sn[Fr][rr]),typeof mr>"u"||!mr.length||!mr[0]){var fn="";dn=[];for(pr in Sn[Fr])this.terminals_[pr]&&pr>zn&&dn.push("'"+this.terminals_[pr]+"'");nr.showPosition?fn="Parse error on line "+(jn+1)+`:
`+nr.showPosition()+`
Expecting `+dn.join(", ")+", got '"+(this.terminals_[rr]||rr)+"'":fn="Parse error on line "+(jn+1)+": Unexpected "+(rr==ir?"end of input":"'"+(this.terminals_[rr]||rr)+"'"),this.parseError(fn,{text:nr.match,token:this.terminals_[rr]||rr,line:nr.yylineno,loc:ur,expected:dn})}if(mr[0]instanceof Array&&mr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Fr+", token: "+rr);switch(mr[0]){case 1:kn.push(rr),$n.push(nr.yytext),cn.push(nr.yylloc),kn.push(mr[1]),rr=null,hn=nr.yyleng,an=nr.yytext,jn=nr.yylineno,ur=nr.yylloc;break;case 2:if(Cn=this.productions_[mr[1]][1],yr.$=$n[$n.length-Cn],yr._$={first_line:cn[cn.length-(Cn||1)].first_line,last_line:cn[cn.length-1].last_line,first_column:cn[cn.length-(Cn||1)].first_column,last_column:cn[cn.length-1].last_column},Cr&&(yr._$.range=[cn[cn.length-(Cn||1)].range[0],cn[cn.length-1].range[1]]),_r=this.performAction.apply(yr,[an,hn,jn,dr.yy,mr[1],$n,cn].concat(tr)),typeof _r<"u")return _r;Cn&&(kn=kn.slice(0,-1*Cn*2),$n=$n.slice(0,-1*Cn),cn=cn.slice(0,-1*Cn)),kn.push(this.productions_[mr[1]][0]),$n.push(yr.$),cn.push(yr._$),rn=Sn[kn[kn.length-2]][kn[kn.length-1]],kn.push(rn);break;case 3:return!0}}return!0}},nn=function(){var gn={EOF:1,parseError:function(An,kn){if(this.yy.parser)this.yy.parser.parseError(An,kn);else throw new Error(An)},setInput:function(Tn,An){return this.yy=An||this.yy||{},this._input=Tn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Tn=this._input[0];this.yytext+=Tn,this.yyleng++,this.offset++,this.match+=Tn,this.matched+=Tn;var An=Tn.match(/(?:\r\n?|\n).*/g);return An?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Tn},unput:function(Tn){var An=Tn.length,kn=Tn.split(/(?:\r\n?|\n)/g);this._input=Tn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-An),this.offset-=An;var Mn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),kn.length-1&&(this.yylineno-=kn.length-1);var $n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:kn?(kn.length===Mn.length?this.yylloc.first_column:0)+Mn[Mn.length-kn.length].length-kn[0].length:this.yylloc.first_column-An},this.options.ranges&&(this.yylloc.range=[$n[0],$n[0]+this.yyleng-An]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Tn){this.unput(this.match.slice(Tn))},pastInput:function(){var Tn=this.matched.substr(0,this.matched.length-this.match.length);return(Tn.length>20?"...":"")+Tn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Tn=this.match;return Tn.length<20&&(Tn+=this._input.substr(0,20-Tn.length)),(Tn.substr(0,20)+(Tn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Tn=this.pastInput(),An=new Array(Tn.length+1).join("-");return Tn+this.upcomingInput()+`
`+An+"^"},test_match:function(Tn,An){var kn,Mn,$n;if(this.options.backtrack_lexer&&($n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($n.yylloc.range=this.yylloc.range.slice(0))),Mn=Tn[0].match(/(?:\r\n?|\n).*/g),Mn&&(this.yylineno+=Mn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Mn?Mn[Mn.length-1].length-Mn[Mn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Tn[0].length},this.yytext+=Tn[0],this.match+=Tn[0],this.matches=Tn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Tn[0].length),this.matched+=Tn[0],kn=this.performAction.call(this,this.yy,this,An,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),kn)return kn;if(this._backtrack){for(var cn in $n)this[cn]=$n[cn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Tn,An,kn,Mn;this._more||(this.yytext="",this.match="");for(var $n=this._currentRules(),cn=0;cn<$n.length;cn++)if(kn=this._input.match(this.rules[$n[cn]]),kn&&(!An||kn[0].length>An[0].length)){if(An=kn,Mn=cn,this.options.backtrack_lexer){if(Tn=this.test_match(kn,$n[cn]),Tn!==!1)return Tn;if(this._backtrack){An=!1;continue}else return!1}else if(!this.options.flex)break}return An?(Tn=this.test_match(An,$n[Mn]),Tn!==!1?Tn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var An=this.next();return An||this.lex()},begin:function(An){this.conditionStack.push(An)},popState:function(){var An=this.conditionStack.length-1;return An>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(An){return An=this.conditionStack.length-1-Math.abs(An||0),An>=0?this.conditionStack[An]:"INITIAL"},pushState:function(An){this.begin(An)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(An,kn,Mn,$n){switch(Mn){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return gn}();on.lexer=nn;function mn(){this.yy={}}return mn.prototype=on,on.Parser=mn,new mn}();parser$4.parser=parser$4;const pieParser=parser$4,pieDetector=nt=>nt.match(/^\s*pie/)!==null||nt.match(/^\s*bar/)!==null;let sections$1={},showData=!1;const parseDirective$4=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addSection$1=function(nt,rt){nt=common$1.sanitizeText(nt,getConfig$1()),sections$1[nt]===void 0&&(sections$1[nt]=rt,log$1.debug("Added new section :",nt))},getSections$1=()=>sections$1,setShowData=function(nt){showData=nt},getShowData=function(){return showData},cleanupValue=function(nt){return nt.substring(0,1)===":"&&(nt=nt.substring(1).trim()),Number(nt.trim())},clear$4=function(){sections$1={},showData=!1,clear$g()},pieDb={parseDirective:parseDirective$4,getConfig:()=>getConfig$1().pie,addSection:addSection$1,getSections:getSections$1,cleanupValue,clear:clear$4,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setShowData,getShowData,getAccDescription,setAccDescription};let conf$5=getConfig$1(),width;const height=450,draw$6=(nt,rt,it,st)=>{try{conf$5=getConfig$1(),log$1.debug(`Rendering info diagram
`+nt);const Kt=getConfig$1().securityLevel;let on;Kt==="sandbox"&&(on=select("#i"+rt));const nn=select(Kt==="sandbox"?on.nodes()[0].contentDocument.body:"body"),mn=Kt==="sandbox"?on.nodes()[0].contentDocument:document;st.db.clear(),st.parser.parse(nt),log$1.debug("Parsed info diagram");const gn=mn.getElementById(rt);width=gn.parentElement.offsetWidth,width===void 0&&(width=1200),conf$5.useWidth!==void 0&&(width=conf$5.useWidth),conf$5.pie.useWidth!==void 0&&(width=conf$5.pie.useWidth);const Tn=nn.select("#"+rt);configureSvgSize(Tn,height,width,conf$5.pie.useMaxWidth),gn.setAttribute("viewBox","0 0 "+width+" "+height);var bt=40,xt=18,Et=4,kt=Math.min(width,height)/2-bt,Lt=Tn.append("g").attr("transform","translate("+width/2+","+height/2+")"),Pt=st.db.getSections(),Rt=0;Object.keys(Pt).forEach(function(kn){Rt+=Pt[kn]});const An=conf$5.themeVariables;var Dt=[An.pie1,An.pie2,An.pie3,An.pie4,An.pie5,An.pie6,An.pie7,An.pie8,An.pie9,An.pie10,An.pie11,An.pie12],Bt=ordinal().range(Dt),Ft=Object.entries(Pt).map(function(kn,Mn){return{order:Mn,name:kn[0],value:kn[1]}}),Yt=pie().value(function(kn){return kn.value}).sort(function(kn,Mn){return kn.order-Mn.order}),Zt=Yt(Ft),Wt=arc().innerRadius(0).outerRadius(kt);Lt.selectAll("mySlices").data(Zt).enter().append("path").attr("d",Wt).attr("fill",function(kn){return Bt(kn.data.name)}).attr("class","pieCircle"),Lt.selectAll("mySlices").data(Zt).enter().append("text").text(function(kn){return(kn.data.value/Rt*100).toFixed(0)+"%"}).attr("transform",function(kn){return"translate("+Wt.centroid(kn)+")"}).style("text-anchor","middle").attr("class","slice"),Lt.append("text").text(st.db.getDiagramTitle()).attr("x",0).attr("y",-(height-50)/2).attr("class","pieTitleText");var Qt=Lt.selectAll(".legend").data(Bt.domain()).enter().append("g").attr("class","legend").attr("transform",function(kn,Mn){const $n=xt+Et,cn=$n*Bt.domain().length/2,Sn=12*xt,an=Mn*$n-cn;return"translate("+Sn+","+an+")"});Qt.append("rect").attr("width",xt).attr("height",xt).style("fill",Bt).style("stroke",Bt),Qt.data(Zt).append("text").attr("x",xt+Et).attr("y",xt-Et).text(function(kn){return st.db.getShowData()||conf$5.showData||conf$5.pie.showData?kn.data.name+" ["+kn.data.value+"]":kn.data.name})}catch(Kt){log$1.error("Error while rendering info diagram"),log$1.error(Kt)}},pieRenderer={draw:draw$6};var parser$3=function(){var nt=function(Fr,mr,_r,yr){for(_r=_r||{},yr=Fr.length;yr--;_r[Fr[yr]]=mr);return _r},rt=[1,3],it=[1,5],st=[1,6],bt=[1,7],xt=[1,8],Et=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],kt=[1,22],Lt=[2,13],Pt=[1,26],Rt=[1,27],Dt=[1,28],Bt=[1,29],Ft=[1,30],Yt=[1,31],Zt=[1,24],Wt=[1,32],Qt=[1,33],Kt=[1,36],on=[71,72],nn=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],mn=[1,56],gn=[1,57],Tn=[1,58],An=[1,59],kn=[1,60],Mn=[1,61],$n=[1,62],cn=[62,63],Sn=[1,74],an=[1,70],jn=[1,71],hn=[1,72],zn=[1,73],ir=[1,75],tr=[1,79],nr=[1,80],dr=[1,77],or=[1,78],ur=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Cr={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(mr,_r,yr,pr,Cn,rn,dn){var fn=rn.length-1;switch(Cn){case 6:this.$=rn[fn].trim(),pr.setAccTitle(this.$);break;case 7:case 8:this.$=rn[fn].trim(),pr.setAccDescription(this.$);break;case 9:pr.parseDirective("%%{","open_directive");break;case 10:pr.parseDirective(rn[fn],"type_directive");break;case 11:rn[fn]=rn[fn].trim().replace(/'/g,'"'),pr.parseDirective(rn[fn],"arg_directive");break;case 12:pr.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:pr.addRequirement(rn[fn-3],rn[fn-4]);break;case 20:pr.setNewReqId(rn[fn-2]);break;case 21:pr.setNewReqText(rn[fn-2]);break;case 22:pr.setNewReqRisk(rn[fn-2]);break;case 23:pr.setNewReqVerifyMethod(rn[fn-2]);break;case 26:this.$=pr.RequirementType.REQUIREMENT;break;case 27:this.$=pr.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=pr.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=pr.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=pr.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=pr.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=pr.RiskLevel.LOW_RISK;break;case 33:this.$=pr.RiskLevel.MED_RISK;break;case 34:this.$=pr.RiskLevel.HIGH_RISK;break;case 35:this.$=pr.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=pr.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=pr.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=pr.VerifyType.VERIFY_TEST;break;case 39:pr.addElement(rn[fn-3]);break;case 40:pr.setNewElementType(rn[fn-2]);break;case 41:pr.setNewElementDocRef(rn[fn-2]);break;case 44:pr.addRelationship(rn[fn-2],rn[fn],rn[fn-4]);break;case 45:pr.addRelationship(rn[fn-2],rn[fn-4],rn[fn]);break;case 46:this.$=pr.Relationships.CONTAINS;break;case 47:this.$=pr.Relationships.COPIES;break;case 48:this.$=pr.Relationships.DERIVES;break;case 49:this.$=pr.Relationships.SATISFIES;break;case 50:this.$=pr.Relationships.VERIFIES;break;case 51:this.$=pr.Relationships.REFINES;break;case 52:this.$=pr.Relationships.TRACES;break}},table:[{3:1,4:2,6:rt,9:4,14:it,16:st,18:bt,19:xt},{1:[3]},{3:10,4:2,5:[1,9],6:rt,9:4,14:it,16:st,18:bt,19:xt},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},nt(Et,[2,8]),{20:[2,9]},{3:16,4:2,6:rt,9:4,14:it,16:st,18:bt,19:xt},{1:[2,2]},{4:21,5:kt,7:17,8:Lt,9:4,14:it,16:st,18:bt,19:xt,23:18,24:19,25:20,26:23,32:25,40:Pt,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Qt},{11:34,12:[1,35],22:Kt},nt([12,22],[2,10]),nt(Et,[2,6]),nt(Et,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:kt,7:38,8:Lt,9:4,14:it,16:st,18:bt,19:xt,23:18,24:19,25:20,26:23,32:25,40:Pt,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Qt},{4:21,5:kt,7:39,8:Lt,9:4,14:it,16:st,18:bt,19:xt,23:18,24:19,25:20,26:23,32:25,40:Pt,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Qt},{4:21,5:kt,7:40,8:Lt,9:4,14:it,16:st,18:bt,19:xt,23:18,24:19,25:20,26:23,32:25,40:Pt,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Qt},{4:21,5:kt,7:41,8:Lt,9:4,14:it,16:st,18:bt,19:xt,23:18,24:19,25:20,26:23,32:25,40:Pt,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Qt},{4:21,5:kt,7:42,8:Lt,9:4,14:it,16:st,18:bt,19:xt,23:18,24:19,25:20,26:23,32:25,40:Pt,41:Rt,42:Dt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Qt},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},nt(on,[2,26]),nt(on,[2,27]),nt(on,[2,28]),nt(on,[2,29]),nt(on,[2,30]),nt(on,[2,31]),nt(nn,[2,55]),nt(nn,[2,56]),nt(Et,[2,4]),{13:51,21:[1,52]},nt(Et,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:mn,65:gn,66:Tn,67:An,68:kn,69:Mn,70:$n},{61:63,64:mn,65:gn,66:Tn,67:An,68:kn,69:Mn,70:$n},{11:64,22:Kt},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},nt(cn,[2,46]),nt(cn,[2,47]),nt(cn,[2,48]),nt(cn,[2,49]),nt(cn,[2,50]),nt(cn,[2,51]),nt(cn,[2,52]),{63:[1,68]},nt(Et,[2,5]),{5:Sn,29:69,30:an,33:jn,35:hn,37:zn,39:ir},{5:tr,39:nr,55:76,56:dr,58:or},{32:81,71:Wt,72:Qt},{32:82,71:Wt,72:Qt},nt(ur,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:Sn,29:87,30:an,33:jn,35:hn,37:zn,39:ir},nt(ur,[2,25]),nt(ur,[2,39]),{31:[1,88]},{31:[1,89]},{5:tr,39:nr,55:90,56:dr,58:or},nt(ur,[2,43]),nt(ur,[2,44]),nt(ur,[2,45]),{32:91,71:Wt,72:Qt},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},nt(ur,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},nt(ur,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:Sn,29:116,30:an,33:jn,35:hn,37:zn,39:ir},{5:Sn,29:117,30:an,33:jn,35:hn,37:zn,39:ir},{5:Sn,29:118,30:an,33:jn,35:hn,37:zn,39:ir},{5:Sn,29:119,30:an,33:jn,35:hn,37:zn,39:ir},{5:tr,39:nr,55:120,56:dr,58:or},{5:tr,39:nr,55:121,56:dr,58:or},nt(ur,[2,20]),nt(ur,[2,21]),nt(ur,[2,22]),nt(ur,[2,23]),nt(ur,[2,40]),nt(ur,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(mr,_r){if(_r.recoverable)this.trace(mr);else{var yr=new Error(mr);throw yr.hash=_r,yr}},parse:function(mr){var _r=this,yr=[0],pr=[],Cn=[null],rn=[],dn=this.table,fn="",On=0,xn=0,hr=2,Nn=1,Kn=rn.slice.call(arguments,1),Un=Object.create(this.lexer),sr={yy:{}};for(var ar in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ar)&&(sr.yy[ar]=this.yy[ar]);Un.setInput(mr,sr.yy),sr.yy.lexer=Un,sr.yy.parser=this,typeof Un.yylloc>"u"&&(Un.yylloc={});var wr=Un.yylloc;rn.push(wr);var vr=Un.options&&Un.options.ranges;typeof sr.yy.parseError=="function"?this.parseError=sr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Rr(){var Wn;return Wn=pr.pop()||Un.lex()||Nn,typeof Wn!="number"&&(Wn instanceof Array&&(pr=Wn,Wn=pr.pop()),Wn=_r.symbols_[Wn]||Wn),Wn}for(var ci,mi,si,yi,Ni={},Ii,Mi,Or,Ln;;){if(mi=yr[yr.length-1],this.defaultActions[mi]?si=this.defaultActions[mi]:((ci===null||typeof ci>"u")&&(ci=Rr()),si=dn[mi]&&dn[mi][ci]),typeof si>"u"||!si.length||!si[0]){var En="";Ln=[];for(Ii in dn[mi])this.terminals_[Ii]&&Ii>hr&&Ln.push("'"+this.terminals_[Ii]+"'");Un.showPosition?En="Parse error on line "+(On+1)+`:
`+Un.showPosition()+`
Expecting `+Ln.join(", ")+", got '"+(this.terminals_[ci]||ci)+"'":En="Parse error on line "+(On+1)+": Unexpected "+(ci==Nn?"end of input":"'"+(this.terminals_[ci]||ci)+"'"),this.parseError(En,{text:Un.match,token:this.terminals_[ci]||ci,line:Un.yylineno,loc:wr,expected:Ln})}if(si[0]instanceof Array&&si.length>1)throw new Error("Parse Error: multiple actions possible at state: "+mi+", token: "+ci);switch(si[0]){case 1:yr.push(ci),Cn.push(Un.yytext),rn.push(Un.yylloc),yr.push(si[1]),ci=null,xn=Un.yyleng,fn=Un.yytext,On=Un.yylineno,wr=Un.yylloc;break;case 2:if(Mi=this.productions_[si[1]][1],Ni.$=Cn[Cn.length-Mi],Ni._$={first_line:rn[rn.length-(Mi||1)].first_line,last_line:rn[rn.length-1].last_line,first_column:rn[rn.length-(Mi||1)].first_column,last_column:rn[rn.length-1].last_column},vr&&(Ni._$.range=[rn[rn.length-(Mi||1)].range[0],rn[rn.length-1].range[1]]),yi=this.performAction.apply(Ni,[fn,xn,On,sr.yy,si[1],Cn,rn].concat(Kn)),typeof yi<"u")return yi;Mi&&(yr=yr.slice(0,-1*Mi*2),Cn=Cn.slice(0,-1*Mi),rn=rn.slice(0,-1*Mi)),yr.push(this.productions_[si[1]][0]),Cn.push(Ni.$),rn.push(Ni._$),Or=dn[yr[yr.length-2]][yr[yr.length-1]],yr.push(Or);break;case 3:return!0}}return!0}},Sr=function(){var Fr={EOF:1,parseError:function(_r,yr){if(this.yy.parser)this.yy.parser.parseError(_r,yr);else throw new Error(_r)},setInput:function(mr,_r){return this.yy=_r||this.yy||{},this._input=mr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var mr=this._input[0];this.yytext+=mr,this.yyleng++,this.offset++,this.match+=mr,this.matched+=mr;var _r=mr.match(/(?:\r\n?|\n).*/g);return _r?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),mr},unput:function(mr){var _r=mr.length,yr=mr.split(/(?:\r\n?|\n)/g);this._input=mr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-_r),this.offset-=_r;var pr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),yr.length-1&&(this.yylineno-=yr.length-1);var Cn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:yr?(yr.length===pr.length?this.yylloc.first_column:0)+pr[pr.length-yr.length].length-yr[0].length:this.yylloc.first_column-_r},this.options.ranges&&(this.yylloc.range=[Cn[0],Cn[0]+this.yyleng-_r]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(mr){this.unput(this.match.slice(mr))},pastInput:function(){var mr=this.matched.substr(0,this.matched.length-this.match.length);return(mr.length>20?"...":"")+mr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var mr=this.match;return mr.length<20&&(mr+=this._input.substr(0,20-mr.length)),(mr.substr(0,20)+(mr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var mr=this.pastInput(),_r=new Array(mr.length+1).join("-");return mr+this.upcomingInput()+`
`+_r+"^"},test_match:function(mr,_r){var yr,pr,Cn;if(this.options.backtrack_lexer&&(Cn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Cn.yylloc.range=this.yylloc.range.slice(0))),pr=mr[0].match(/(?:\r\n?|\n).*/g),pr&&(this.yylineno+=pr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pr?pr[pr.length-1].length-pr[pr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+mr[0].length},this.yytext+=mr[0],this.match+=mr[0],this.matches=mr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(mr[0].length),this.matched+=mr[0],yr=this.performAction.call(this,this.yy,this,_r,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),yr)return yr;if(this._backtrack){for(var rn in Cn)this[rn]=Cn[rn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var mr,_r,yr,pr;this._more||(this.yytext="",this.match="");for(var Cn=this._currentRules(),rn=0;rn<Cn.length;rn++)if(yr=this._input.match(this.rules[Cn[rn]]),yr&&(!_r||yr[0].length>_r[0].length)){if(_r=yr,pr=rn,this.options.backtrack_lexer){if(mr=this.test_match(yr,Cn[rn]),mr!==!1)return mr;if(this._backtrack){_r=!1;continue}else return!1}else if(!this.options.flex)break}return _r?(mr=this.test_match(_r,Cn[pr]),mr!==!1?mr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var _r=this.next();return _r||this.lex()},begin:function(_r){this.conditionStack.push(_r)},popState:function(){var _r=this.conditionStack.length-1;return _r>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(_r){return _r=this.conditionStack.length-1-Math.abs(_r||0),_r>=0?this.conditionStack[_r]:"INITIAL"},pushState:function(_r){this.begin(_r)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(_r,yr,pr,Cn){switch(pr){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return yr.yytext=yr.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return Fr}();Cr.lexer=Sr;function rr(){this.yy={}}return rr.prototype=Cr,Cr.Parser=rr,new rr}();parser$3.parser=parser$3;const requirementParser=parser$3,requirementDetector=nt=>nt.match(/^\s*requirement(Diagram)?/)!==null;let relations=[],latestRequirement={},requirements={},latestElement={},elements={};const RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective$3=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRequirement=(nt,rt)=>(requirements[nt]===void 0&&(requirements[nt]={name:nt,type:rt,id:latestRequirement.id,text:latestRequirement.text,risk:latestRequirement.risk,verifyMethod:latestRequirement.verifyMethod}),latestRequirement={},requirements[nt]),getRequirements=()=>requirements,setNewReqId=nt=>{latestRequirement!==void 0&&(latestRequirement.id=nt)},setNewReqText=nt=>{latestRequirement!==void 0&&(latestRequirement.text=nt)},setNewReqRisk=nt=>{latestRequirement!==void 0&&(latestRequirement.risk=nt)},setNewReqVerifyMethod=nt=>{latestRequirement!==void 0&&(latestRequirement.verifyMethod=nt)},addElement=nt=>(elements[nt]===void 0&&(elements[nt]={name:nt,type:latestElement.type,docRef:latestElement.docRef},log$1.info("Added new requirement: ",nt)),latestElement={},elements[nt]),getElements=()=>elements,setNewElementType=nt=>{latestElement!==void 0&&(latestElement.type=nt)},setNewElementDocRef=nt=>{latestElement!==void 0&&(latestElement.docRef=nt)},addRelationship=(nt,rt,it)=>{relations.push({type:nt,src:rt,dst:it})},getRelationships=()=>relations,clear$3=()=>{relations=[],latestRequirement={},requirements={},latestElement={},elements={},clear$g()},requirementDb={RequirementType,RiskLevel,VerifyType,Relationships,parseDirective:parseDirective$3,getConfig:()=>getConfig$1().req,addRequirement,getRequirements,setNewReqId,setNewReqText,setNewReqRisk,setNewReqVerifyMethod,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addElement,getElements,setNewElementType,setNewElementDocRef,addRelationship,getRelationships,clear:clear$3},ReqMarkers={CONTAINS:"contains",ARROW:"arrow"},insertLineEndings=(nt,rt)=>{let it=nt.append("defs").append("marker").attr("id",ReqMarkers.CONTAINS+"_line_ending").attr("refX",0).attr("refY",rt.line_height/2).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("g");it.append("circle").attr("cx",rt.line_height/2).attr("cy",rt.line_height/2).attr("r",rt.line_height/2).attr("fill","none"),it.append("line").attr("x1",0).attr("x2",rt.line_height).attr("y1",rt.line_height/2).attr("y2",rt.line_height/2).attr("stroke-width",1),it.append("line").attr("y1",0).attr("y2",rt.line_height).attr("x1",rt.line_height/2).attr("x2",rt.line_height/2).attr("stroke-width",1),nt.append("defs").append("marker").attr("id",ReqMarkers.ARROW+"_line_ending").attr("refX",rt.line_height).attr("refY",.5*rt.line_height).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${rt.line_height},${rt.line_height/2}
      M${rt.line_height},${rt.line_height/2}
      L0,${rt.line_height}`).attr("stroke-width",1)},markers={ReqMarkers,insertLineEndings};let conf$4={},relCnt=0;const newRectNode=(nt,rt)=>nt.insert("rect","#"+rt).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",conf$4.rect_min_width+"px").attr("height",conf$4.rect_min_height+"px"),newTitleNode=(nt,rt,it)=>{let st=conf$4.rect_min_width/2,bt=nt.append("text").attr("class","req reqLabel reqTitle").attr("id",rt).attr("x",st).attr("y",conf$4.rect_padding).attr("dominant-baseline","hanging"),xt=0;it.forEach(Pt=>{xt==0?bt.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",0).text(Pt):bt.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",conf$4.line_height*.75).text(Pt),xt++});let Et=1.5*conf$4.rect_padding,kt=xt*conf$4.line_height*.75,Lt=Et+kt;return nt.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",conf$4.rect_min_width).attr("y1",Lt).attr("y2",Lt),{titleNode:bt,y:Lt}},newBodyNode=(nt,rt,it,st)=>{let bt=nt.append("text").attr("class","req reqLabel").attr("id",rt).attr("x",conf$4.rect_padding).attr("y",st).attr("dominant-baseline","hanging"),xt=0;const Et=30;let kt=[];return it.forEach(Lt=>{let Pt=Lt.length;for(;Pt>Et&&xt<3;){let Rt=Lt.substring(0,Et);Lt=Lt.substring(Et,Lt.length),Pt=Lt.length,kt[kt.length]=Rt,xt++}if(xt==3){let Rt=kt[kt.length-1];kt[kt.length-1]=Rt.substring(0,Rt.length-4)+"..."}else kt[kt.length]=Lt;xt=0}),kt.forEach(Lt=>{bt.append("tspan").attr("x",conf$4.rect_padding).attr("dy",conf$4.line_height).text(Lt)}),bt},addEdgeLabel=(nt,rt,it,st)=>{const bt=rt.node().getTotalLength(),xt=rt.node().getPointAtLength(bt*.5),Et="rel"+relCnt;relCnt++;const Lt=nt.append("text").attr("class","req relationshipLabel").attr("id",Et).attr("x",xt.x).attr("y",xt.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(st).node().getBBox();nt.insert("rect","#"+Et).attr("class","req reqLabelBox").attr("x",xt.x-Lt.width/2).attr("y",xt.y-Lt.height/2).attr("width",Lt.width).attr("height",Lt.height).attr("fill","white").attr("fill-opacity","85%")},drawRelationshipFromLayout=function(nt,rt,it,st,bt){const xt=it.edge(elementString(rt.src),elementString(rt.dst)),Et=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}),kt=nt.insert("path","#"+st).attr("class","er relationshipLine").attr("d",Et(xt.points)).attr("fill","none");rt.type==bt.db.Relationships.CONTAINS?kt.attr("marker-start","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+rt.type+"_line_ending)"):(kt.attr("stroke-dasharray","10,7"),kt.attr("marker-end","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+markers.ReqMarkers.ARROW+"_line_ending)")),addEdgeLabel(nt,kt,conf$4,`<<${rt.type}>>`)},drawReqs=(nt,rt,it)=>{Object.keys(nt).forEach(st=>{let bt=nt[st];st=elementString(st),log$1.info("Added new requirement: ",st);const xt=it.append("g").attr("id",st),Et="req-"+st,kt=newRectNode(xt,Et);let Lt=newTitleNode(xt,st+"_title",[`<<${bt.type}>>`,`${bt.name}`]);newBodyNode(xt,st+"_body",[`Id: ${bt.id}`,`Text: ${bt.text}`,`Risk: ${bt.risk}`,`Verification: ${bt.verifyMethod}`],Lt.y);const Pt=kt.node().getBBox();rt.setNode(st,{width:Pt.width,height:Pt.height,shape:"rect",id:st})})},drawElements=(nt,rt,it)=>{Object.keys(nt).forEach(st=>{let bt=nt[st];const xt=elementString(st),Et=it.append("g").attr("id",xt),kt="element-"+xt,Lt=newRectNode(Et,kt);let Pt=newTitleNode(Et,kt+"_title",["<<Element>>",`${st}`]);newBodyNode(Et,kt+"_body",[`Type: ${bt.type||"Not Specified"}`,`Doc Ref: ${bt.docRef||"None"}`],Pt.y);const Rt=Lt.node().getBBox();rt.setNode(xt,{width:Rt.width,height:Rt.height,shape:"rect",id:xt})})},addRelationships=(nt,rt)=>(nt.forEach(function(it){let st=elementString(it.src),bt=elementString(it.dst);rt.setEdge(st,bt,{relationship:it})}),nt),adjustEntities=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&(nt.select("#"+it),nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )"))})},elementString=nt=>nt.replace(/\s/g,"").replace(/\./g,"_"),draw$5=(nt,rt,it,st)=>{conf$4=getConfig$1().requirement,st.db.clear(),st.parser.parse(nt);const bt=conf$4.securityLevel;let xt;bt==="sandbox"&&(xt=select("#i"+rt));const kt=select(bt==="sandbox"?xt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);markers.insertLineEndings(kt,conf$4);const Lt=new Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:conf$4.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let Pt=st.db.getRequirements(),Rt=st.db.getElements(),Dt=st.db.getRelationships();drawReqs(Pt,Lt,kt),drawElements(Rt,Lt,kt),addRelationships(Dt,Lt),layout(Lt),adjustEntities(kt,Lt),Dt.forEach(function(Wt){drawRelationshipFromLayout(kt,Wt,Lt,rt,st)});const Bt=conf$4.rect_padding,Ft=kt.node().getBBox(),Yt=Ft.width+Bt*2,Zt=Ft.height+Bt*2;configureSvgSize(kt,Zt,Yt,conf$4.useMaxWidth),kt.attr("viewBox",`${Ft.x-Bt} ${Ft.y-Bt} ${Yt} ${Zt}`)},requirementRenderer={draw:draw$5};var parser$2=function(){var nt=function(_r,yr,pr,Cn){for(pr=pr||{},Cn=_r.length;Cn--;pr[_r[Cn]]=yr);return pr},rt=[1,2],it=[1,3],st=[1,5],bt=[1,7],xt=[2,5],Et=[1,15],kt=[1,17],Lt=[1,19],Pt=[1,21],Rt=[1,22],Dt=[1,23],Bt=[1,29],Ft=[1,30],Yt=[1,31],Zt=[1,32],Wt=[1,33],Qt=[1,34],Kt=[1,35],on=[1,36],nn=[1,37],mn=[1,38],gn=[1,39],Tn=[1,40],An=[1,42],kn=[1,43],Mn=[1,45],$n=[1,46],cn=[1,47],Sn=[1,48],an=[1,49],jn=[1,50],hn=[1,53],zn=[1,4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],ir=[4,5,21,54,56],tr=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],nr=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,53,54,56,57,62,63,64,65,73,83],dr=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,52,54,56,57,62,63,64,65,73,83],or=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,54,56,57,62,63,64,65,73,83],ur=[71,72,73],Cr=[1,125],Sr=[1,4,5,7,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],rr={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,box_section:11,box_line:12,participant_statement:13,openDirective:14,typeDirective:15,closeDirective:16,":":17,argDirective:18,box:19,restOfLine:20,end:21,signal:22,autonumber:23,NUM:24,off:25,activate:26,actor:27,deactivate:28,note_statement:29,links_statement:30,link_statement:31,properties_statement:32,details_statement:33,title:34,legacy_title:35,acc_title:36,acc_title_value:37,acc_descr:38,acc_descr_value:39,acc_descr_multiline_value:40,loop:41,rect:42,opt:43,alt:44,else_sections:45,par:46,par_sections:47,critical:48,option_sections:49,break:50,option:51,and:52,else:53,participant:54,AS:55,participant_actor:56,note:57,placement:58,text2:59,over:60,actor_pair:61,links:62,link:63,properties:64,details:65,spaceList:66,",":67,left_of:68,right_of:69,signaltype:70,"+":71,"-":72,ACTOR:73,SOLID_OPEN_ARROW:74,DOTTED_OPEN_ARROW:75,SOLID_ARROW:76,DOTTED_ARROW:77,SOLID_CROSS:78,DOTTED_CROSS:79,SOLID_POINT:80,DOTTED_POINT:81,TXT:82,open_directive:83,type_directive:84,arg_directive:85,close_directive:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",17:":",19:"box",20:"restOfLine",21:"end",23:"autonumber",24:"NUM",25:"off",26:"activate",28:"deactivate",34:"title",35:"legacy_title",36:"acc_title",37:"acc_title_value",38:"acc_descr",39:"acc_descr_value",40:"acc_descr_multiline_value",41:"loop",42:"rect",43:"opt",44:"alt",46:"par",48:"critical",50:"break",51:"option",52:"and",53:"else",54:"participant",55:"AS",56:"participant_actor",57:"note",60:"over",62:"links",63:"link",64:"properties",65:"details",67:",",68:"left_of",69:"right_of",71:"+",72:"-",73:"ACTOR",74:"SOLID_OPEN_ARROW",75:"DOTTED_OPEN_ARROW",76:"SOLID_ARROW",77:"DOTTED_ARROW",78:"SOLID_CROSS",79:"DOTTED_CROSS",80:"SOLID_POINT",81:"DOTTED_POINT",82:"TXT",83:"open_directive",84:"type_directive",85:"arg_directive",86:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[11,0],[11,2],[12,2],[12,1],[12,1],[6,4],[6,6],[10,1],[10,4],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[49,1],[49,4],[47,1],[47,4],[45,1],[45,4],[13,5],[13,3],[13,5],[13,3],[29,4],[29,4],[30,3],[31,3],[32,3],[33,3],[66,2],[66,1],[61,3],[61,1],[58,1],[58,1],[22,5],[22,5],[22,4],[27,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[59,1],[14,1],[15,1],[18,1],[16,1]],performAction:function(yr,pr,Cn,rn,dn,fn,On){var xn=fn.length-1;switch(dn){case 4:return rn.apply(fn[xn]),fn[xn];case 5:case 10:this.$=[];break;case 6:case 11:fn[xn-1].push(fn[xn]),this.$=fn[xn-1];break;case 7:case 8:case 12:case 13:this.$=fn[xn];break;case 9:case 14:this.$=[];break;case 18:fn[xn-1].unshift({type:"boxStart",boxData:rn.parseBoxData(fn[xn-2])}),fn[xn-1].push({type:"boxEnd",boxText:fn[xn-2]}),this.$=fn[xn-1];break;case 20:this.$={type:"sequenceIndex",sequenceIndex:Number(fn[xn-2]),sequenceIndexStep:Number(fn[xn-1]),sequenceVisible:!0,signalType:rn.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceIndex:Number(fn[xn-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:rn.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:rn.LINETYPE.AUTONUMBER};break;case 23:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:rn.LINETYPE.AUTONUMBER};break;case 24:this.$={type:"activeStart",signalType:rn.LINETYPE.ACTIVE_START,actor:fn[xn-1]};break;case 25:this.$={type:"activeEnd",signalType:rn.LINETYPE.ACTIVE_END,actor:fn[xn-1]};break;case 31:rn.setDiagramTitle(fn[xn].substring(6)),this.$=fn[xn].substring(6);break;case 32:rn.setDiagramTitle(fn[xn].substring(7)),this.$=fn[xn].substring(7);break;case 33:this.$=fn[xn].trim(),rn.setAccTitle(this.$);break;case 34:case 35:this.$=fn[xn].trim(),rn.setAccDescription(this.$);break;case 36:fn[xn-1].unshift({type:"loopStart",loopText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.LOOP_START}),fn[xn-1].push({type:"loopEnd",loopText:fn[xn-2],signalType:rn.LINETYPE.LOOP_END}),this.$=fn[xn-1];break;case 37:fn[xn-1].unshift({type:"rectStart",color:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.RECT_START}),fn[xn-1].push({type:"rectEnd",color:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.RECT_END}),this.$=fn[xn-1];break;case 38:fn[xn-1].unshift({type:"optStart",optText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.OPT_START}),fn[xn-1].push({type:"optEnd",optText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.OPT_END}),this.$=fn[xn-1];break;case 39:fn[xn-1].unshift({type:"altStart",altText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.ALT_START}),fn[xn-1].push({type:"altEnd",signalType:rn.LINETYPE.ALT_END}),this.$=fn[xn-1];break;case 40:fn[xn-1].unshift({type:"parStart",parText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.PAR_START}),fn[xn-1].push({type:"parEnd",signalType:rn.LINETYPE.PAR_END}),this.$=fn[xn-1];break;case 41:fn[xn-1].unshift({type:"criticalStart",criticalText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.CRITICAL_START}),fn[xn-1].push({type:"criticalEnd",signalType:rn.LINETYPE.CRITICAL_END}),this.$=fn[xn-1];break;case 42:fn[xn-1].unshift({type:"breakStart",breakText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.BREAK_START}),fn[xn-1].push({type:"breakEnd",optText:rn.parseMessage(fn[xn-2]),signalType:rn.LINETYPE.BREAK_END}),this.$=fn[xn-1];break;case 45:this.$=fn[xn-3].concat([{type:"option",optionText:rn.parseMessage(fn[xn-1]),signalType:rn.LINETYPE.CRITICAL_OPTION},fn[xn]]);break;case 47:this.$=fn[xn-3].concat([{type:"and",parText:rn.parseMessage(fn[xn-1]),signalType:rn.LINETYPE.PAR_AND},fn[xn]]);break;case 49:this.$=fn[xn-3].concat([{type:"else",altText:rn.parseMessage(fn[xn-1]),signalType:rn.LINETYPE.ALT_ELSE},fn[xn]]);break;case 50:fn[xn-3].type="addParticipant",fn[xn-3].description=rn.parseMessage(fn[xn-1]),this.$=fn[xn-3];break;case 51:fn[xn-1].type="addParticipant",this.$=fn[xn-1];break;case 52:fn[xn-3].type="addActor",fn[xn-3].description=rn.parseMessage(fn[xn-1]),this.$=fn[xn-3];break;case 53:fn[xn-1].type="addActor",this.$=fn[xn-1];break;case 54:this.$=[fn[xn-1],{type:"addNote",placement:fn[xn-2],actor:fn[xn-1].actor,text:fn[xn]}];break;case 55:fn[xn-2]=[].concat(fn[xn-1],fn[xn-1]).slice(0,2),fn[xn-2][0]=fn[xn-2][0].actor,fn[xn-2][1]=fn[xn-2][1].actor,this.$=[fn[xn-1],{type:"addNote",placement:rn.PLACEMENT.OVER,actor:fn[xn-2].slice(0,2),text:fn[xn]}];break;case 56:this.$=[fn[xn-1],{type:"addLinks",actor:fn[xn-1].actor,text:fn[xn]}];break;case 57:this.$=[fn[xn-1],{type:"addALink",actor:fn[xn-1].actor,text:fn[xn]}];break;case 58:this.$=[fn[xn-1],{type:"addProperties",actor:fn[xn-1].actor,text:fn[xn]}];break;case 59:this.$=[fn[xn-1],{type:"addDetails",actor:fn[xn-1].actor,text:fn[xn]}];break;case 62:this.$=[fn[xn-2],fn[xn]];break;case 63:this.$=fn[xn];break;case 64:this.$=rn.PLACEMENT.LEFTOF;break;case 65:this.$=rn.PLACEMENT.RIGHTOF;break;case 66:this.$=[fn[xn-4],fn[xn-1],{type:"addMessage",from:fn[xn-4].actor,to:fn[xn-1].actor,signalType:fn[xn-3],msg:fn[xn]},{type:"activeStart",signalType:rn.LINETYPE.ACTIVE_START,actor:fn[xn-1]}];break;case 67:this.$=[fn[xn-4],fn[xn-1],{type:"addMessage",from:fn[xn-4].actor,to:fn[xn-1].actor,signalType:fn[xn-3],msg:fn[xn]},{type:"activeEnd",signalType:rn.LINETYPE.ACTIVE_END,actor:fn[xn-4]}];break;case 68:this.$=[fn[xn-3],fn[xn-1],{type:"addMessage",from:fn[xn-3].actor,to:fn[xn-1].actor,signalType:fn[xn-2],msg:fn[xn]}];break;case 69:this.$={type:"addParticipant",actor:fn[xn]};break;case 70:this.$=rn.LINETYPE.SOLID_OPEN;break;case 71:this.$=rn.LINETYPE.DOTTED_OPEN;break;case 72:this.$=rn.LINETYPE.SOLID;break;case 73:this.$=rn.LINETYPE.DOTTED;break;case 74:this.$=rn.LINETYPE.SOLID_CROSS;break;case 75:this.$=rn.LINETYPE.DOTTED_CROSS;break;case 76:this.$=rn.LINETYPE.SOLID_POINT;break;case 77:this.$=rn.LINETYPE.DOTTED_POINT;break;case 78:this.$=rn.parseMessage(fn[xn].trim().substring(1));break;case 79:rn.parseDirective("%%{","open_directive");break;case 80:rn.parseDirective(fn[xn],"type_directive");break;case 81:fn[xn]=fn[xn].trim().replace(/'/g,'"'),rn.parseDirective(fn[xn],"arg_directive");break;case 82:rn.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:rt,5:it,6:4,7:st,14:6,83:bt},{1:[3]},{3:8,4:rt,5:it,6:4,7:st,14:6,83:bt},{3:9,4:rt,5:it,6:4,7:st,14:6,83:bt},{3:10,4:rt,5:it,6:4,7:st,14:6,83:bt},nt([1,4,5,19,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],xt,{8:11}),{15:12,84:[1,13]},{84:[2,79]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{16:51,17:[1,52],86:hn},nt([17,86],[2,80]),nt(zn,[2,6]),{6:41,10:54,13:18,14:6,19:Lt,22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},nt(zn,[2,8]),nt(zn,[2,9]),nt(zn,[2,17]),{20:[1,55]},{5:[1,56]},{5:[1,59],24:[1,57],25:[1,58]},{27:60,73:jn},{27:61,73:jn},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},{5:[1,66]},nt(zn,[2,31]),nt(zn,[2,32]),{37:[1,67]},{39:[1,68]},nt(zn,[2,35]),{20:[1,69]},{20:[1,70]},{20:[1,71]},{20:[1,72]},{20:[1,73]},{20:[1,74]},{20:[1,75]},nt(zn,[2,43]),{27:76,73:jn},{27:77,73:jn},{70:78,74:[1,79],75:[1,80],76:[1,81],77:[1,82],78:[1,83],79:[1,84],80:[1,85],81:[1,86]},{58:87,60:[1,88],68:[1,89],69:[1,90]},{27:91,73:jn},{27:92,73:jn},{27:93,73:jn},{27:94,73:jn},nt([5,55,67,74,75,76,77,78,79,80,81,82],[2,69]),{5:[1,95]},{18:96,85:[1,97]},{5:[2,82]},nt(zn,[2,7]),nt(ir,[2,10],{11:98}),nt(zn,[2,19]),{5:[1,100],24:[1,99]},{5:[1,101]},nt(zn,[2,23]),{5:[1,102]},{5:[1,103]},nt(zn,[2,26]),nt(zn,[2,27]),nt(zn,[2,28]),nt(zn,[2,29]),nt(zn,[2,30]),nt(zn,[2,33]),nt(zn,[2,34]),nt(tr,xt,{8:104}),nt(tr,xt,{8:105}),nt(tr,xt,{8:106}),nt(nr,xt,{45:107,8:108}),nt(dr,xt,{47:109,8:110}),nt(or,xt,{49:111,8:112}),nt(tr,xt,{8:113}),{5:[1,115],55:[1,114]},{5:[1,117],55:[1,116]},{27:120,71:[1,118],72:[1,119],73:jn},nt(ur,[2,70]),nt(ur,[2,71]),nt(ur,[2,72]),nt(ur,[2,73]),nt(ur,[2,74]),nt(ur,[2,75]),nt(ur,[2,76]),nt(ur,[2,77]),{27:121,73:jn},{27:123,61:122,73:jn},{73:[2,64]},{73:[2,65]},{59:124,82:Cr},{59:126,82:Cr},{59:127,82:Cr},{59:128,82:Cr},nt(Sr,[2,15]),{16:129,86:hn},{86:[2,81]},{4:[1,132],5:[1,134],12:131,13:133,21:[1,130],54:An,56:kn},{5:[1,135]},nt(zn,[2,21]),nt(zn,[2,22]),nt(zn,[2,24]),nt(zn,[2,25]),{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,136],22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,137],22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,138],22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{21:[1,139]},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[2,48],22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,53:[1,140],54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{21:[1,141]},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[2,46],22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,52:[1,142],54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{21:[1,143]},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[2,44],22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,51:[1,144],54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,145],22:20,23:Pt,26:Rt,27:44,28:Dt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Qt,42:Kt,43:on,44:nn,46:mn,48:gn,50:Tn,54:An,56:kn,57:Mn,62:$n,63:cn,64:Sn,65:an,73:jn,83:bt},{20:[1,146]},nt(zn,[2,51]),{20:[1,147]},nt(zn,[2,53]),{27:148,73:jn},{27:149,73:jn},{59:150,82:Cr},{59:151,82:Cr},{59:152,82:Cr},{67:[1,153],82:[2,63]},{5:[2,56]},{5:[2,78]},{5:[2,57]},{5:[2,58]},{5:[2,59]},{5:[1,154]},nt(zn,[2,18]),nt(ir,[2,11]),{13:155,54:An,56:kn},nt(ir,[2,13]),nt(ir,[2,14]),nt(zn,[2,20]),nt(zn,[2,36]),nt(zn,[2,37]),nt(zn,[2,38]),nt(zn,[2,39]),{20:[1,156]},nt(zn,[2,40]),{20:[1,157]},nt(zn,[2,41]),{20:[1,158]},nt(zn,[2,42]),{5:[1,159]},{5:[1,160]},{59:161,82:Cr},{59:162,82:Cr},{5:[2,68]},{5:[2,54]},{5:[2,55]},{27:163,73:jn},nt(Sr,[2,16]),nt(ir,[2,12]),nt(nr,xt,{8:108,45:164}),nt(dr,xt,{8:110,47:165}),nt(or,xt,{8:112,49:166}),nt(zn,[2,50]),nt(zn,[2,52]),{5:[2,66]},{5:[2,67]},{82:[2,62]},{21:[2,49]},{21:[2,47]},{21:[2,45]}],defaultActions:{7:[2,79],8:[2,1],9:[2,2],10:[2,3],53:[2,82],89:[2,64],90:[2,65],97:[2,81],124:[2,56],125:[2,78],126:[2,57],127:[2,58],128:[2,59],150:[2,68],151:[2,54],152:[2,55],161:[2,66],162:[2,67],163:[2,62],164:[2,49],165:[2,47],166:[2,45]},parseError:function(yr,pr){if(pr.recoverable)this.trace(yr);else{var Cn=new Error(yr);throw Cn.hash=pr,Cn}},parse:function(yr){var pr=this,Cn=[0],rn=[],dn=[null],fn=[],On=this.table,xn="",hr=0,Nn=0,Kn=2,Un=1,sr=fn.slice.call(arguments,1),ar=Object.create(this.lexer),wr={yy:{}};for(var vr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,vr)&&(wr.yy[vr]=this.yy[vr]);ar.setInput(yr,wr.yy),wr.yy.lexer=ar,wr.yy.parser=this,typeof ar.yylloc>"u"&&(ar.yylloc={});var Rr=ar.yylloc;fn.push(Rr);var ci=ar.options&&ar.options.ranges;typeof wr.yy.parseError=="function"?this.parseError=wr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function mi(){var fr;return fr=rn.pop()||ar.lex()||Un,typeof fr!="number"&&(fr instanceof Array&&(rn=fr,fr=rn.pop()),fr=pr.symbols_[fr]||fr),fr}for(var si,yi,Ni,Ii,Mi={},Or,Ln,En,Wn;;){if(yi=Cn[Cn.length-1],this.defaultActions[yi]?Ni=this.defaultActions[yi]:((si===null||typeof si>"u")&&(si=mi()),Ni=On[yi]&&On[yi][si]),typeof Ni>"u"||!Ni.length||!Ni[0]){var er="";Wn=[];for(Or in On[yi])this.terminals_[Or]&&Or>Kn&&Wn.push("'"+this.terminals_[Or]+"'");ar.showPosition?er="Parse error on line "+(hr+1)+`:
`+ar.showPosition()+`
Expecting `+Wn.join(", ")+", got '"+(this.terminals_[si]||si)+"'":er="Parse error on line "+(hr+1)+": Unexpected "+(si==Un?"end of input":"'"+(this.terminals_[si]||si)+"'"),this.parseError(er,{text:ar.match,token:this.terminals_[si]||si,line:ar.yylineno,loc:Rr,expected:Wn})}if(Ni[0]instanceof Array&&Ni.length>1)throw new Error("Parse Error: multiple actions possible at state: "+yi+", token: "+si);switch(Ni[0]){case 1:Cn.push(si),dn.push(ar.yytext),fn.push(ar.yylloc),Cn.push(Ni[1]),si=null,Nn=ar.yyleng,xn=ar.yytext,hr=ar.yylineno,Rr=ar.yylloc;break;case 2:if(Ln=this.productions_[Ni[1]][1],Mi.$=dn[dn.length-Ln],Mi._$={first_line:fn[fn.length-(Ln||1)].first_line,last_line:fn[fn.length-1].last_line,first_column:fn[fn.length-(Ln||1)].first_column,last_column:fn[fn.length-1].last_column},ci&&(Mi._$.range=[fn[fn.length-(Ln||1)].range[0],fn[fn.length-1].range[1]]),Ii=this.performAction.apply(Mi,[xn,Nn,hr,wr.yy,Ni[1],dn,fn].concat(sr)),typeof Ii<"u")return Ii;Ln&&(Cn=Cn.slice(0,-1*Ln*2),dn=dn.slice(0,-1*Ln),fn=fn.slice(0,-1*Ln)),Cn.push(this.productions_[Ni[1]][0]),dn.push(Mi.$),fn.push(Mi._$),En=On[Cn[Cn.length-2]][Cn[Cn.length-1]],Cn.push(En);break;case 3:return!0}}return!0}},Fr=function(){var _r={EOF:1,parseError:function(pr,Cn){if(this.yy.parser)this.yy.parser.parseError(pr,Cn);else throw new Error(pr)},setInput:function(yr,pr){return this.yy=pr||this.yy||{},this._input=yr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var yr=this._input[0];this.yytext+=yr,this.yyleng++,this.offset++,this.match+=yr,this.matched+=yr;var pr=yr.match(/(?:\r\n?|\n).*/g);return pr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),yr},unput:function(yr){var pr=yr.length,Cn=yr.split(/(?:\r\n?|\n)/g);this._input=yr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-pr),this.offset-=pr;var rn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Cn.length-1&&(this.yylineno-=Cn.length-1);var dn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Cn?(Cn.length===rn.length?this.yylloc.first_column:0)+rn[rn.length-Cn.length].length-Cn[0].length:this.yylloc.first_column-pr},this.options.ranges&&(this.yylloc.range=[dn[0],dn[0]+this.yyleng-pr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(yr){this.unput(this.match.slice(yr))},pastInput:function(){var yr=this.matched.substr(0,this.matched.length-this.match.length);return(yr.length>20?"...":"")+yr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var yr=this.match;return yr.length<20&&(yr+=this._input.substr(0,20-yr.length)),(yr.substr(0,20)+(yr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var yr=this.pastInput(),pr=new Array(yr.length+1).join("-");return yr+this.upcomingInput()+`
`+pr+"^"},test_match:function(yr,pr){var Cn,rn,dn;if(this.options.backtrack_lexer&&(dn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(dn.yylloc.range=this.yylloc.range.slice(0))),rn=yr[0].match(/(?:\r\n?|\n).*/g),rn&&(this.yylineno+=rn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:rn?rn[rn.length-1].length-rn[rn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+yr[0].length},this.yytext+=yr[0],this.match+=yr[0],this.matches=yr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(yr[0].length),this.matched+=yr[0],Cn=this.performAction.call(this,this.yy,this,pr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Cn)return Cn;if(this._backtrack){for(var fn in dn)this[fn]=dn[fn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var yr,pr,Cn,rn;this._more||(this.yytext="",this.match="");for(var dn=this._currentRules(),fn=0;fn<dn.length;fn++)if(Cn=this._input.match(this.rules[dn[fn]]),Cn&&(!pr||Cn[0].length>pr[0].length)){if(pr=Cn,rn=fn,this.options.backtrack_lexer){if(yr=this.test_match(Cn,dn[fn]),yr!==!1)return yr;if(this._backtrack){pr=!1;continue}else return!1}else if(!this.options.flex)break}return pr?(yr=this.test_match(pr,dn[rn]),yr!==!1?yr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var pr=this.next();return pr||this.lex()},begin:function(pr){this.conditionStack.push(pr)},popState:function(){var pr=this.conditionStack.length-1;return pr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(pr){return pr=this.conditionStack.length-1-Math.abs(pr||0),pr>=0?this.conditionStack[pr]:"INITIAL"},pushState:function(pr){this.begin(pr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(pr,Cn,rn,dn){switch(rn){case 0:return this.begin("open_directive"),83;case 1:return this.begin("type_directive"),84;case 2:return this.popState(),this.begin("arg_directive"),17;case 3:return this.popState(),this.popState(),86;case 4:return 85;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 24;case 12:return this.begin("LINE"),19;case 13:return this.begin("ID"),54;case 14:return this.begin("ID"),56;case 15:return Cn.yytext=Cn.yytext.trim(),this.begin("ALIAS"),73;case 16:return this.popState(),this.popState(),this.begin("LINE"),55;case 17:return this.popState(),this.popState(),5;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),44;case 22:return this.begin("LINE"),53;case 23:return this.begin("LINE"),46;case 24:return this.begin("LINE"),52;case 25:return this.begin("LINE"),48;case 26:return this.begin("LINE"),51;case 27:return this.begin("LINE"),50;case 28:return this.popState(),20;case 29:return 21;case 30:return 68;case 31:return 69;case 32:return 62;case 33:return 63;case 34:return 64;case 35:return 65;case 36:return 60;case 37:return 57;case 38:return this.begin("ID"),26;case 39:return this.begin("ID"),28;case 40:return 34;case 41:return 35;case 42:return this.begin("acc_title"),36;case 43:return this.popState(),"acc_title_value";case 44:return this.begin("acc_descr"),38;case 45:return this.popState(),"acc_descr_value";case 46:this.begin("acc_descr_multiline");break;case 47:this.popState();break;case 48:return"acc_descr_multiline_value";case 49:return 7;case 50:return 23;case 51:return 25;case 52:return 67;case 53:return 5;case 54:return Cn.yytext=Cn.yytext.trim(),73;case 55:return 76;case 56:return 77;case 57:return 74;case 58:return 75;case 59:return 78;case 60:return 79;case 61:return 80;case 62:return 81;case 63:return 82;case 64:return 71;case 65:return 72;case 66:return 5;case 67:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[47,48],inclusive:!1},acc_descr:{rules:[45],inclusive:!1},acc_title:{rules:[43],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,15],inclusive:!1},ALIAS:{rules:[7,8,16,17],inclusive:!1},LINE:{rules:[7,8,28],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24,25,26,27,29,30,31,32,33,34,35,36,37,38,39,40,41,42,44,46,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return _r}();rr.lexer=Fr;function mr(){this.yy={}}return mr.prototype=rr,rr.Parser=mr,new mr}();parser$2.parser=parser$2;const sequenceParser=parser$2,sequenceDetector=nt=>nt.match(/^\s*sequenceDiagram/)!==null;let prevActor,actors$1={},boxes=[],messages=[],sequenceNumbersEnabled=!1,wrapEnabled,currentBox;const parseDirective$2=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addBox=function(nt){boxes.push({name:nt.text,wrap:nt.wrap===void 0&&autoWrap()||!!nt.wrap,fill:nt.color,actorKeys:[]}),currentBox=boxes.slice(-1)[0]},addActor=function(nt,rt,it,st){let bt=currentBox;const xt=actors$1[nt];if(xt){if(currentBox&&xt.box&&currentBox!==xt.box)throw new Error("A same participant should only be defined in one Box: "+xt.name+" can't be in '"+xt.box.name+"' and in '"+currentBox.name+"' at the same time.");if(bt=xt.box?xt.box:currentBox,xt.box=bt,xt&&rt===xt.name&&it==null)return}(it==null||it.text==null)&&(it={text:rt,wrap:null,type:st}),(st==null||it.text==null)&&(it={text:rt,wrap:null,type:st}),actors$1[nt]={box:bt,name:rt,description:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:st||"participant"},prevActor&&actors$1[prevActor]&&(actors$1[prevActor].nextActor=nt),currentBox&&currentBox.actorKeys.push(nt),prevActor=nt},activationCount=nt=>{let rt,it=0;for(rt=0;rt<messages.length;rt++)messages[rt].type===LINETYPE.ACTIVE_START&&messages[rt].from.actor===nt&&it++,messages[rt].type===LINETYPE.ACTIVE_END&&messages[rt].from.actor===nt&&it--;return it},addMessage=function(nt,rt,it,st){messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,answer:st})},addSignal=function(nt,rt,it={text:void 0,wrap:void 0},st){if(st===LINETYPE.ACTIVE_END&&activationCount(nt.actor)<1){let xt=new Error("Trying to inactivate an inactive participant ("+nt.actor+")");throw xt.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},xt}return messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:st}),!0},hasAtLeastOneBox=function(){return boxes.length>0},hasAtLeastOneBoxWithTitle=function(){return boxes.some(nt=>nt.name)},getMessages=function(){return messages},getBoxes=function(){return boxes},getActors$1=function(){return actors$1},getActor=function(nt){return actors$1[nt]},getActorKeys=function(){return Object.keys(actors$1)},enableSequenceNumbers=function(){sequenceNumbersEnabled=!0},disableSequenceNumbers=function(){sequenceNumbersEnabled=!1},showSequenceNumbers=()=>sequenceNumbersEnabled,setWrap=function(nt){wrapEnabled=nt},autoWrap=()=>wrapEnabled!==void 0?wrapEnabled:getConfig$1().sequence.wrap,clear$2=function(){actors$1={},boxes=[],messages=[],sequenceNumbersEnabled=!1,clear$g()},parseMessage=function(nt){const rt=nt.trim(),it={text:rt.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:rt.match(/^:?wrap:/)!==null?!0:rt.match(/^:?nowrap:/)!==null?!1:void 0};return log$1.debug("parseMessage:",it),it},parseBoxData=function(nt){const rt=nt.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let it=rt!=null&&rt[1]?rt[1].trim():"transparent",st=rt!=null&&rt[2]?rt[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",it)||(it="transparent",st=nt.trim());else{const xt=new Option().style;xt.color=it,xt.color!==it&&(it="transparent",st=nt.trim())}return{color:it,text:st!==void 0?sanitizeText$5(st.replace(/^:?(?:no)?wrap:/,""),getConfig$1()):void 0,wrap:st!==void 0?st.match(/^:?wrap:/)!==null?!0:st.match(/^:?nowrap:/)!==null?!1:void 0:void 0}},LINETYPE={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},ARROWTYPE={FILLED:0,OPEN:1},PLACEMENT={LEFTOF:0,RIGHTOF:1,OVER:2},addNote=function(nt,rt,it){it.text,it.wrap===void 0&&autoWrap()||it.wrap;const st=[].concat(nt,nt);messages.push({from:st[0],to:st[1],message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:LINETYPE.NOTE,placement:rt})},addLinks=function(nt,rt){const it=getActor(nt);try{let st=sanitizeText$5(rt.text,getConfig$1());st=st.replace(/&amp;/g,"&"),st=st.replace(/&equals;/g,"=");const bt=JSON.parse(st);insertLinks(it,bt)}catch(st){log$1.error("error while parsing actor link text",st)}},addALink=function(nt,rt){const it=getActor(nt);try{const Et={};let kt=sanitizeText$5(rt.text,getConfig$1());var st=kt.indexOf("@");kt=kt.replace(/&amp;/g,"&"),kt=kt.replace(/&equals;/g,"=");var bt=kt.slice(0,st-1).trim(),xt=kt.slice(st+1).trim();Et[bt]=xt,insertLinks(it,Et)}catch(Et){log$1.error("error while parsing actor link text",Et)}};function insertLinks(nt,rt){if(nt.links==null)nt.links=rt;else for(let it in rt)nt.links[it]=rt[it]}const addProperties=function(nt,rt){const it=getActor(nt);try{let st=sanitizeText$5(rt.text,getConfig$1());const bt=JSON.parse(st);insertProperties(it,bt)}catch(st){log$1.error("error while parsing actor properties text",st)}};function insertProperties(nt,rt){if(nt.properties==null)nt.properties=rt;else for(let it in rt)nt.properties[it]=rt[it]}function boxEnd(){currentBox=void 0}const addDetails=function(nt,rt){const it=getActor(nt),st=document.getElementById(rt.text);try{const bt=st.innerHTML,xt=JSON.parse(bt);xt.properties&&insertProperties(it,xt.properties),xt.links&&insertLinks(it,xt.links)}catch(bt){log$1.error("error while parsing actor details text",bt)}},getActorProperty=function(nt,rt){if(nt!==void 0&&nt.properties!==void 0)return nt.properties[rt]},apply=function(nt){if(Array.isArray(nt))nt.forEach(function(rt){apply(rt)});else switch(nt.type){case"sequenceIndex":messages.push({from:void 0,to:void 0,message:{start:nt.sequenceIndex,step:nt.sequenceIndexStep,visible:nt.sequenceVisible},wrap:!1,type:nt.signalType});break;case"addParticipant":addActor(nt.actor,nt.actor,nt.description,"participant");break;case"addActor":addActor(nt.actor,nt.actor,nt.description,"actor");break;case"activeStart":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"activeEnd":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"addNote":addNote(nt.actor,nt.placement,nt.text);break;case"addLinks":addLinks(nt.actor,nt.text);break;case"addALink":addALink(nt.actor,nt.text);break;case"addProperties":addProperties(nt.actor,nt.text);break;case"addDetails":addDetails(nt.actor,nt.text);break;case"addMessage":addSignal(nt.from,nt.to,nt.msg,nt.signalType);break;case"boxStart":addBox(nt.boxData);break;case"boxEnd":boxEnd();break;case"loopStart":addSignal(void 0,void 0,nt.loopText,nt.signalType);break;case"loopEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"rectStart":addSignal(void 0,void 0,nt.color,nt.signalType);break;case"rectEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"optStart":addSignal(void 0,void 0,nt.optText,nt.signalType);break;case"optEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"altStart":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"else":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"altEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"setAccTitle":setAccTitle(nt.text);break;case"parStart":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"and":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"parEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"criticalStart":addSignal(void 0,void 0,nt.criticalText,nt.signalType);break;case"option":addSignal(void 0,void 0,nt.optionText,nt.signalType);break;case"criticalEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"breakStart":addSignal(void 0,void 0,nt.breakText,nt.signalType);break;case"breakEnd":addSignal(void 0,void 0,void 0,nt.signalType);break}},sequenceDb={addActor,addMessage,addSignal,addLinks,addDetails,addProperties,autoWrap,setWrap,enableSequenceNumbers,disableSequenceNumbers,showSequenceNumbers,getMessages,getActors:getActors$1,getActor,getActorKeys,getActorProperty,getAccTitle,getBoxes,getDiagramTitle,setDiagramTitle,parseDirective:parseDirective$2,getConfig:()=>getConfig$1().sequence,clear:clear$2,parseMessage,parseBoxData,LINETYPE,ARROWTYPE,PLACEMENT,addNote,setAccTitle,apply,setAccDescription,getAccDescription,hasAtLeastOneBox,hasAtLeastOneBoxWithTitle};let interactionFunctions=[];const addFunction=nt=>{interactionFunctions.push(nt)},attachFunctions=()=>{interactionFunctions.forEach(nt=>{nt()}),interactionFunctions=[]},drawRect$1=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},addPopupInteraction=(nt,rt)=>{addFunction(()=>{const it=document.querySelectorAll(nt);it.length!==0&&(it[0].addEventListener("mouseover",function(){popupMenuUpFunc("actor"+rt+"_popup")}),it[0].addEventListener("mouseout",function(){popupMenuDownFunc("actor"+rt+"_popup")}))})},drawPopup=function(nt,rt,it,st,bt){if(rt.links===void 0||rt.links===null||Object.keys(rt.links).length===0)return{height:0,width:0};const xt=rt.links,Et=rt.actorCnt,kt=rt.rectData;var Lt="none";bt&&(Lt="block !important");const Pt=nt.append("g");Pt.attr("id","actor"+Et+"_popup"),Pt.attr("class","actorPopupMenu"),Pt.attr("display",Lt),addPopupInteraction("#actor"+Et+"_popup",Et);var Rt="";kt.class!==void 0&&(Rt=" "+kt.class);let Dt=kt.width>it?kt.width:it;const Bt=Pt.append("rect");if(Bt.attr("class","actorPopupMenuPanel"+Rt),Bt.attr("x",kt.x),Bt.attr("y",kt.height),Bt.attr("fill",kt.fill),Bt.attr("stroke",kt.stroke),Bt.attr("width",Dt),Bt.attr("height",kt.height),Bt.attr("rx",kt.rx),Bt.attr("ry",kt.ry),xt!=null){var Ft=20;for(let Wt in xt){var Yt=Pt.append("a"),Zt=dist.sanitizeUrl(xt[Wt]);Yt.attr("xlink:href",Zt),Yt.attr("target","_blank"),_drawMenuItemTextCandidateFunc(st)(Wt,Yt,kt.x+10,kt.height+Ft,Dt,20,{class:"actor"},st),Ft+=30}}return Bt.attr("height",Ft),{height:kt.height+Ft,width:Dt}},drawImage=function(nt,rt,it,st){const bt=nt.append("image");bt.attr("x",rt),bt.attr("y",it);var xt=dist.sanitizeUrl(st);bt.attr("xlink:href",xt)},drawEmbeddedImage=function(nt,rt,it,st){const bt=nt.append("use");bt.attr("x",rt),bt.attr("y",it);var xt=dist.sanitizeUrl(st);bt.attr("xlink:href","#"+xt)},popupMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'block'; }"},popdownMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'none'; }"},popupMenuUpFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="block")},popupMenuDownFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="none")},drawText$1=function(nt,rt){let it=0,st=0;const bt=rt.text.split(common$1.lineBreakRegex),[xt,Et]=parseFontSize(rt.fontSize);let kt=[],Lt=0,Pt=()=>rt.y;if(rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0)switch(rt.valign){case"top":case"start":Pt=()=>Math.round(rt.y+rt.textMargin);break;case"middle":case"center":Pt=()=>Math.round(rt.y+(it+st+rt.textMargin)/2);break;case"bottom":case"end":Pt=()=>Math.round(rt.y+(it+st+2*rt.textMargin)-rt.textMargin);break}if(rt.anchor!==void 0&&rt.textMargin!==void 0&&rt.width!==void 0)switch(rt.anchor){case"left":case"start":rt.x=Math.round(rt.x+rt.textMargin),rt.anchor="start",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"middle":case"center":rt.x=Math.round(rt.x+rt.width/2),rt.anchor="middle",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"right":case"end":rt.x=Math.round(rt.x+rt.width-rt.textMargin),rt.anchor="end",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break}for(let[Rt,Dt]of bt.entries()){rt.textMargin!==void 0&&rt.textMargin===0&&xt!==void 0&&(Lt=Rt*xt);const Bt=nt.append("text");if(Bt.attr("x",rt.x),Bt.attr("y",Pt()),rt.anchor!==void 0&&Bt.attr("text-anchor",rt.anchor).attr("dominant-baseline",rt.dominantBaseline).attr("alignment-baseline",rt.alignmentBaseline),rt.fontFamily!==void 0&&Bt.style("font-family",rt.fontFamily),Et!==void 0&&Bt.style("font-size",Et),rt.fontWeight!==void 0&&Bt.style("font-weight",rt.fontWeight),rt.fill!==void 0&&Bt.attr("fill",rt.fill),rt.class!==void 0&&Bt.attr("class",rt.class),rt.dy!==void 0?Bt.attr("dy",rt.dy):Lt!==0&&Bt.attr("dy",Lt),rt.tspan){const Ft=Bt.append("tspan");Ft.attr("x",rt.x),rt.fill!==void 0&&Ft.attr("fill",rt.fill),Ft.text(Dt)}else Bt.text(Dt);rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0&&(st+=(Bt._groups||Bt)[0][0].getBBox().height,it=st),kt.push(Bt)}return kt},drawLabel$1=function(nt,rt){function it(bt,xt,Et,kt,Lt){return bt+","+xt+" "+(bt+Et)+","+xt+" "+(bt+Et)+","+(xt+kt-Lt)+" "+(bt+Et-Lt*1.2)+","+(xt+kt)+" "+bt+","+(xt+kt)}const st=nt.append("polygon");return st.attr("points",it(rt.x,rt.y,rt.width,rt.height,7)),st.attr("class","labelBox"),rt.y=rt.y+rt.height/2,drawText$1(nt,rt),st};let actorCnt=-1;const fixLifeLineHeights=(nt,rt)=>{!nt.selectAll||nt.selectAll(".actor-line").attr("class","200").attr("y2",rt-55)},drawActorTypeParticipant=function(nt,rt,it,st){const bt=rt.x+rt.width/2,xt=rt.y+5,Et=nt.append("g");var kt=Et;st||(actorCnt++,kt.append("line").attr("id","actor"+actorCnt).attr("x1",bt).attr("y1",xt).attr("x2",bt).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),kt=Et.append("g"),rt.actorCnt=actorCnt,rt.links!=null&&(kt.attr("id","root-"+actorCnt),addPopupInteraction("#root-"+actorCnt,actorCnt)));const Lt=getNoteRect$1();var Pt="actor";rt.properties!=null&&rt.properties.class?Pt=rt.properties.class:Lt.fill="#eaeaea",Lt.x=rt.x,Lt.y=rt.y,Lt.width=rt.width,Lt.height=rt.height,Lt.class=Pt,Lt.rx=3,Lt.ry=3;const Rt=drawRect$1(kt,Lt);if(rt.rectData=Lt,rt.properties!=null&&rt.properties.icon){const Bt=rt.properties.icon.trim();Bt.charAt(0)==="@"?drawEmbeddedImage(kt,Lt.x+Lt.width-20,Lt.y+10,Bt.substr(1)):drawImage(kt,Lt.x+Lt.width-20,Lt.y+10,Bt)}_drawTextCandidateFunc$1(it)(rt.description,kt,Lt.x,Lt.y,Lt.width,Lt.height,{class:"actor"},it);let Dt=rt.height;if(Rt.node){const Bt=Rt.node().getBBox();rt.height=Bt.height,Dt=Bt.height}return Dt},drawActorTypeActor=function(nt,rt,it,st){const bt=rt.x+rt.width/2,xt=rt.y+80;st||(actorCnt++,nt.append("line").attr("id","actor"+actorCnt).attr("x1",bt).attr("y1",xt).attr("x2",bt).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const Et=nt.append("g");Et.attr("class","actor-man");const kt=getNoteRect$1();kt.x=rt.x,kt.y=rt.y,kt.fill="#eaeaea",kt.width=rt.width,kt.height=rt.height,kt.class="actor",kt.rx=3,kt.ry=3,Et.append("line").attr("id","actor-man-torso"+actorCnt).attr("x1",bt).attr("y1",rt.y+25).attr("x2",bt).attr("y2",rt.y+45),Et.append("line").attr("id","actor-man-arms"+actorCnt).attr("x1",bt-18).attr("y1",rt.y+33).attr("x2",bt+18).attr("y2",rt.y+33),Et.append("line").attr("x1",bt-18).attr("y1",rt.y+60).attr("x2",bt).attr("y2",rt.y+45),Et.append("line").attr("x1",bt).attr("y1",rt.y+45).attr("x2",bt+16).attr("y2",rt.y+60);const Lt=Et.append("circle");Lt.attr("cx",rt.x+rt.width/2),Lt.attr("cy",rt.y+10),Lt.attr("r",15),Lt.attr("width",rt.width),Lt.attr("height",rt.height);const Pt=Et.node().getBBox();return rt.height=Pt.height,_drawTextCandidateFunc$1(it)(rt.description,Et,kt.x,kt.y+35,kt.width,kt.height,{class:"actor"},it),rt.height},drawActor=function(nt,rt,it,st){switch(rt.type){case"actor":return drawActorTypeActor(nt,rt,it,st);case"participant":return drawActorTypeParticipant(nt,rt,it,st)}},drawBox=function(nt,rt,it){const bt=nt.append("g");drawBackgroundRect$1(bt,rt),rt.name&&_drawTextCandidateFunc$1(it)(rt.name,bt,rt.x,rt.y+(rt.textMaxHeight||0)/2,rt.width,0,{class:"text"},it),bt.lower()},anchorElement=function(nt){return nt.append("g")},drawActivation=function(nt,rt,it,st,bt){const xt=getNoteRect$1(),Et=rt.anchored;xt.x=rt.startx,xt.y=rt.starty,xt.class="activation"+bt%3,xt.width=rt.stopx-rt.startx,xt.height=it-rt.starty,drawRect$1(Et,xt)},drawLoop=function(nt,rt,it,st){const{boxMargin:bt,boxTextMargin:xt,labelBoxHeight:Et,labelBoxWidth:kt,messageFontFamily:Lt,messageFontSize:Pt,messageFontWeight:Rt}=st,Dt=nt.append("g"),Bt=function(Zt,Wt,Qt,Kt){return Dt.append("line").attr("x1",Zt).attr("y1",Wt).attr("x2",Qt).attr("y2",Kt).attr("class","loopLine")};Bt(rt.startx,rt.starty,rt.stopx,rt.starty),Bt(rt.stopx,rt.starty,rt.stopx,rt.stopy),Bt(rt.startx,rt.stopy,rt.stopx,rt.stopy),Bt(rt.startx,rt.starty,rt.startx,rt.stopy),rt.sections!==void 0&&rt.sections.forEach(function(Zt){Bt(rt.startx,Zt.y,rt.stopx,Zt.y).style("stroke-dasharray","3, 3")});let Ft=getTextObj$1();Ft.text=it,Ft.x=rt.startx,Ft.y=rt.starty,Ft.fontFamily=Lt,Ft.fontSize=Pt,Ft.fontWeight=Rt,Ft.anchor="middle",Ft.valign="middle",Ft.tspan=!1,Ft.width=kt||50,Ft.height=Et||20,Ft.textMargin=xt,Ft.class="labelText",drawLabel$1(Dt,Ft),Ft=getTextObj$1(),Ft.text=rt.title,Ft.x=rt.startx+kt/2+(rt.stopx-rt.startx)/2,Ft.y=rt.starty+bt+xt,Ft.anchor="middle",Ft.valign="middle",Ft.textMargin=xt,Ft.class="loopText",Ft.fontFamily=Lt,Ft.fontSize=Pt,Ft.fontWeight=Rt,Ft.wrap=!0;let Yt=drawText$1(Dt,Ft);return rt.sectionTitles!==void 0&&rt.sectionTitles.forEach(function(Zt,Wt){if(Zt.message){Ft.text=Zt.message,Ft.x=rt.startx+(rt.stopx-rt.startx)/2,Ft.y=rt.sections[Wt].y+bt+xt,Ft.class="loopText",Ft.anchor="middle",Ft.valign="middle",Ft.tspan=!1,Ft.fontFamily=Lt,Ft.fontSize=Pt,Ft.fontWeight=Rt,Ft.wrap=rt.wrap,Yt=drawText$1(Dt,Ft);let Qt=Math.round(Yt.map(Kt=>(Kt._groups||Kt)[0][0].getBBox().height).reduce((Kt,on)=>Kt+on));rt.sections[Wt].height+=Qt-(bt+xt)}}),rt.height=Math.round(rt.stopy-rt.starty),Dt},drawBackgroundRect$1=function(nt,rt){drawRect$1(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,stroke:rt.stroke,class:"rect"}).lower()},insertDatabaseIcon=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowFilledHead=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertSequenceNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead=function(nt){nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},getTextObj$1=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},getNoteRect$1=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc$1=function(){function nt(bt,xt,Et,kt,Lt,Pt,Rt){const Dt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt+Pt/2+5).style("text-anchor","middle").text(bt);st(Dt,Rt)}function rt(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const{actorFontSize:Bt,actorFontFamily:Ft,actorFontWeight:Yt}=Dt,[Zt,Wt]=parseFontSize(Bt),Qt=bt.split(common$1.lineBreakRegex);for(let Kt=0;Kt<Qt.length;Kt++){const on=Kt*Zt-Zt*(Qt.length-1)/2,nn=xt.append("text").attr("x",Et+Lt/2).attr("y",kt).style("text-anchor","middle").style("font-size",Wt).style("font-weight",Yt).style("font-family",Ft);nn.append("tspan").attr("x",Et+Lt/2).attr("dy",on).text(Qt[Kt]),nn.attr("y",kt+Pt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(nn,Rt)}}function it(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Pt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Pt,Rt,Dt),st(Yt,Rt)}function st(bt,xt){for(const Et in xt)xt.hasOwnProperty(Et)&&bt.attr(Et,xt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),_drawMenuItemTextCandidateFunc=function(){function nt(bt,xt,Et,kt,Lt,Pt,Rt){const Dt=xt.append("text").attr("x",Et).attr("y",kt).style("text-anchor","start").text(bt);st(Dt,Rt)}function rt(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const{actorFontSize:Bt,actorFontFamily:Ft,actorFontWeight:Yt}=Dt,Zt=bt.split(common$1.lineBreakRegex);for(let Wt=0;Wt<Zt.length;Wt++){const Qt=Wt*Bt-Bt*(Zt.length-1)/2,Kt=xt.append("text").attr("x",Et).attr("y",kt).style("text-anchor","start").style("font-size",Bt).style("font-weight",Yt).style("font-family",Ft);Kt.append("tspan").attr("x",Et).attr("dy",Qt).text(Zt[Wt]),Kt.attr("y",kt+Pt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(Kt,Rt)}}function it(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Pt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Pt,Rt,Dt),st(Yt,Rt)}function st(bt,xt){for(const Et in xt)xt.hasOwnProperty(Et)&&bt.attr(Et,xt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),svgDraw$1={drawRect:drawRect$1,drawText:drawText$1,drawLabel:drawLabel$1,drawActor,drawBox,drawPopup,drawImage,drawEmbeddedImage,anchorElement,drawActivation,drawLoop,drawBackgroundRect:drawBackgroundRect$1,insertArrowHead,insertArrowFilledHead,insertSequenceNumber,insertArrowCrossHead,insertDatabaseIcon,insertComputerIcon,insertClockIcon,getTextObj:getTextObj$1,getNoteRect:getNoteRect$1,popupMenu,popdownMenu,fixLifeLineHeights,sanitizeUrl:dist.sanitizeUrl};let conf$3={};const bounds$1={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(nt=>nt.height||0))+(this.loops.length===0?0:this.loops.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.messages.length===0?0:this.messages.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.notes.length===0?0:this.notes.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(nt){this.boxes.push(nt)},addActor:function(nt){this.actors.push(nt)},addLoop:function(nt){this.loops.push(nt)},addMessage:function(nt){this.messages.push(nt)},addNote:function(nt){this.notes.push(nt)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,setConf$4(getConfig$1())},updateVal:function(nt,rt,it,st){nt[rt]===void 0?nt[rt]=it:nt[rt]=st(it,nt[rt])},updateBounds:function(nt,rt,it,st){const bt=this;let xt=0;function Et(kt){return function(Pt){xt++;const Rt=bt.sequenceItems.length-xt+1;bt.updateVal(Pt,"starty",rt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(Pt,"stopy",st+Rt*conf$3.boxMargin,Math.max),bt.updateVal(bounds$1.data,"startx",nt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(bounds$1.data,"stopx",it+Rt*conf$3.boxMargin,Math.max),kt!=="activation"&&(bt.updateVal(Pt,"startx",nt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(Pt,"stopx",it+Rt*conf$3.boxMargin,Math.max),bt.updateVal(bounds$1.data,"starty",rt-Rt*conf$3.boxMargin,Math.min),bt.updateVal(bounds$1.data,"stopy",st+Rt*conf$3.boxMargin,Math.max))}}this.sequenceItems.forEach(Et()),this.activations.forEach(Et("activation"))},insert:function(nt,rt,it,st){const bt=Math.min(nt,it),xt=Math.max(nt,it),Et=Math.min(rt,st),kt=Math.max(rt,st);this.updateVal(bounds$1.data,"startx",bt,Math.min),this.updateVal(bounds$1.data,"starty",Et,Math.min),this.updateVal(bounds$1.data,"stopx",xt,Math.max),this.updateVal(bounds$1.data,"stopy",kt,Math.max),this.updateBounds(bt,Et,xt,kt)},newActivation:function(nt,rt,it){const st=it[nt.from.actor],bt=actorActivations(nt.from.actor).length||0,xt=st.x+st.width/2+(bt-1)*conf$3.activationWidth/2;this.activations.push({startx:xt,starty:this.verticalPos+2,stopx:xt+conf$3.activationWidth,stopy:void 0,actor:nt.from.actor,anchored:svgDraw$1.anchorElement(rt)})},endActivation:function(nt){const rt=this.activations.map(function(it){return it.actor}).lastIndexOf(nt.from.actor);return this.activations.splice(rt,1)[0]},createLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:nt.message,wrap:nt.wrap,width:nt.width,height:0,fill:rt}},newLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){this.sequenceItems.push(this.createLoop(nt,rt))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(nt){const rt=this.sequenceItems.pop();rt.sections=rt.sections||[],rt.sectionTitles=rt.sectionTitles||[],rt.sections.push({y:bounds$1.getVerticalPos(),height:0}),rt.sectionTitles.push(nt),this.sequenceItems.push(rt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},drawNote$1=function(nt,rt){bounds$1.bumpVerticalPos(conf$3.boxMargin),rt.height=conf$3.boxMargin,rt.starty=bounds$1.getVerticalPos();const it=svgDraw$1.getNoteRect();it.x=rt.startx,it.y=rt.starty,it.width=rt.width||conf$3.width,it.class="note";const st=nt.append("g"),bt=svgDraw$1.drawRect(st,it),xt=svgDraw$1.getTextObj();xt.x=rt.startx,xt.y=rt.starty,xt.width=it.width,xt.dy="1em",xt.text=rt.message,xt.class="noteText",xt.fontFamily=conf$3.noteFontFamily,xt.fontSize=conf$3.noteFontSize,xt.fontWeight=conf$3.noteFontWeight,xt.anchor=conf$3.noteAlign,xt.textMargin=conf$3.noteMargin,xt.valign="center";const Et=drawText$1(st,xt),kt=Math.round(Et.map(Lt=>(Lt._groups||Lt)[0][0].getBBox().height).reduce((Lt,Pt)=>Lt+Pt));bt.attr("height",kt+2*conf$3.noteMargin),rt.height+=kt+2*conf$3.noteMargin,bounds$1.bumpVerticalPos(kt+2*conf$3.noteMargin),rt.stopy=rt.starty+kt+2*conf$3.noteMargin,rt.stopx=rt.startx+it.width,bounds$1.insert(rt.startx,rt.starty,rt.stopx,rt.stopy),bounds$1.models.addNote(rt)},messageFont=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight}),noteFont=nt=>({fontFamily:nt.noteFontFamily,fontSize:nt.noteFontSize,fontWeight:nt.noteFontWeight}),actorFont=nt=>({fontFamily:nt.actorFontFamily,fontSize:nt.actorFontSize,fontWeight:nt.actorFontWeight});function boundMessage(nt,rt){bounds$1.bumpVerticalPos(10);const{startx:it,stopx:st,message:bt}=rt,xt=common$1.splitBreaks(bt).length,Et=utils.calculateTextDimensions(bt,messageFont(conf$3)),kt=Et.height/xt;rt.height+=kt,bounds$1.bumpVerticalPos(kt);let Lt,Pt=Et.height-10;const Rt=Et.width;if(it===st){Lt=bounds$1.getVerticalPos()+Pt,conf$3.rightAngles||(Pt+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+Pt),Pt+=30;const Dt=Math.max(Rt/2,conf$3.width/2);bounds$1.insert(it-Dt,bounds$1.getVerticalPos()-10+Pt,st+Dt,bounds$1.getVerticalPos()+30+Pt)}else Pt+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+Pt,bounds$1.insert(it,Lt-10,st,Lt);return bounds$1.bumpVerticalPos(Pt),rt.height+=Pt,rt.stopy=rt.starty+rt.height,bounds$1.insert(rt.fromBounds,rt.starty,rt.toBounds,rt.stopy),Lt}const drawMessage=function(nt,rt,it,st){const{startx:bt,stopx:xt,starty:Et,message:kt,type:Lt,sequenceIndex:Pt,sequenceVisible:Rt}=rt,Dt=utils.calculateTextDimensions(kt,messageFont(conf$3)),Bt=svgDraw$1.getTextObj();Bt.x=bt,Bt.y=Et+10,Bt.width=xt-bt,Bt.class="messageText",Bt.dy="1em",Bt.text=kt,Bt.fontFamily=conf$3.messageFontFamily,Bt.fontSize=conf$3.messageFontSize,Bt.fontWeight=conf$3.messageFontWeight,Bt.anchor=conf$3.messageAlign,Bt.valign="center",Bt.textMargin=conf$3.wrapPadding,Bt.tspan=!1,drawText$1(nt,Bt);const Ft=Dt.width;let Yt;bt===xt?conf$3.rightAngles?Yt=nt.append("path").attr("d",`M  ${bt},${it} H ${bt+Math.max(conf$3.width/2,Ft/2)} V ${it+25} H ${bt}`):Yt=nt.append("path").attr("d","M "+bt+","+it+" C "+(bt+60)+","+(it-10)+" "+(bt+60)+","+(it+30)+" "+bt+","+(it+20)):(Yt=nt.append("line"),Yt.attr("x1",bt),Yt.attr("y1",it),Yt.attr("x2",xt),Yt.attr("y2",it)),Lt===st.db.LINETYPE.DOTTED||Lt===st.db.LINETYPE.DOTTED_CROSS||Lt===st.db.LINETYPE.DOTTED_POINT||Lt===st.db.LINETYPE.DOTTED_OPEN?(Yt.style("stroke-dasharray","3, 3"),Yt.attr("class","messageLine1")):Yt.attr("class","messageLine0");let Zt="";conf$3.arrowMarkerAbsolute&&(Zt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Zt=Zt.replace(/\(/g,"\\("),Zt=Zt.replace(/\)/g,"\\)")),Yt.attr("stroke-width",2),Yt.attr("stroke","none"),Yt.style("fill","none"),(Lt===st.db.LINETYPE.SOLID||Lt===st.db.LINETYPE.DOTTED)&&Yt.attr("marker-end","url("+Zt+"#arrowhead)"),(Lt===st.db.LINETYPE.SOLID_POINT||Lt===st.db.LINETYPE.DOTTED_POINT)&&Yt.attr("marker-end","url("+Zt+"#filled-head)"),(Lt===st.db.LINETYPE.SOLID_CROSS||Lt===st.db.LINETYPE.DOTTED_CROSS)&&Yt.attr("marker-end","url("+Zt+"#crosshead)"),(Rt||conf$3.showSequenceNumbers)&&(Yt.attr("marker-start","url("+Zt+"#sequencenumber)"),nt.append("text").attr("x",bt).attr("y",it+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(Pt))},drawActors=function(nt,rt,it,st,bt,xt,Et){if(bt.hideUnusedParticipants===!0){const Dt=new Set;xt.forEach(Bt=>{Dt.add(Bt.from),Dt.add(Bt.to)}),it=it.filter(Bt=>Dt.has(Bt))}let kt=0,Lt=0,Pt=0,Rt;for(const Dt of it){const Bt=rt[Dt],Ft=Bt.box;Rt&&Rt!=Ft&&(Et||bounds$1.models.addBox(Rt),Lt+=conf$3.boxMargin+Rt.margin),Ft&&Ft!=Rt&&(Et||(Ft.x=kt+Lt,Ft.y=st),Lt+=Ft.margin),Bt.width=Bt.width||conf$3.width,Bt.height=Math.max(Bt.height||conf$3.height,conf$3.height),Bt.margin=Bt.margin||conf$3.actorMargin,Bt.x=kt+Lt,Bt.y=bounds$1.getVerticalPos();const Yt=svgDraw$1.drawActor(nt,Bt,conf$3,Et);Pt=Math.max(Pt,Yt),bounds$1.insert(Bt.x,st,Bt.x+Bt.width,Bt.height),kt+=Bt.width+Lt,Bt.box&&(Bt.box.width=kt+Ft.margin-Bt.box.x),Lt=Bt.margin,Rt=Bt.box,bounds$1.models.addActor(Bt)}Rt&&!Et&&bounds$1.models.addBox(Rt),bounds$1.bumpVerticalPos(Pt)},drawActorsPopup=function(nt,rt,it,st){let bt=0,xt=0;for(const Et of it){const kt=rt[Et],Lt=getRequiredPopupWidth(kt),Pt=svgDraw$1.drawPopup(nt,kt,Lt,conf$3,conf$3.forceMenus,st);Pt.height>bt&&(bt=Pt.height),Pt.width+kt.x>xt&&(xt=Pt.width+kt.x)}return{maxHeight:bt,maxWidth:xt}},setConf$4=function(nt){assignWithDepth$1(conf$3,nt),nt.fontFamily&&(conf$3.actorFontFamily=conf$3.noteFontFamily=conf$3.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$3.actorFontSize=conf$3.noteFontSize=conf$3.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$3.actorFontWeight=conf$3.noteFontWeight=conf$3.messageFontWeight=nt.fontWeight)},actorActivations=function(nt){return bounds$1.activations.filter(function(rt){return rt.actor===nt})},activationBounds=function(nt,rt){const it=rt[nt],st=actorActivations(nt),bt=st.reduce(function(Et,kt){return Math.min(Et,kt.startx)},it.x+it.width/2),xt=st.reduce(function(Et,kt){return Math.max(Et,kt.stopx)},it.x+it.width/2);return[bt,xt]};function adjustLoopHeightForWrap(nt,rt,it,st,bt){bounds$1.bumpVerticalPos(it);let xt=st;if(rt.id&&rt.message&&nt[rt.id]){const Et=nt[rt.id].width,kt=messageFont(conf$3);rt.message=utils.wrapLabel(`[${rt.message}]`,Et-2*conf$3.wrapPadding,kt),rt.width=Et,rt.wrap=!0;const Lt=utils.calculateTextDimensions(rt.message,kt),Pt=Math.max(Lt.height,conf$3.labelBoxHeight);xt=st+Pt,log$1.debug(`${Pt} - ${rt.message}`)}bt(rt),bounds$1.bumpVerticalPos(xt)}const draw$4=function(nt,rt,it,st){const{securityLevel:bt,sequence:xt}=getConfig$1();conf$3=xt,st.db.clear(),st.parser.parse(nt);let Et;bt==="sandbox"&&(Et=select("#i"+rt));const kt=select(bt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=bt==="sandbox"?Et.nodes()[0].contentDocument:document;bounds$1.init(),log$1.debug(st.db);const Pt=bt==="sandbox"?kt.select(`[id="${rt}"]`):select(`[id="${rt}"]`),Rt=st.db.getActors(),Dt=st.db.getBoxes(),Bt=st.db.getActorKeys(),Ft=st.db.getMessages(),Yt=st.db.getDiagramTitle(),Zt=st.db.hasAtLeastOneBox(),Wt=st.db.hasAtLeastOneBoxWithTitle(),Qt=getMaxMessageWidthPerActor(Rt,Ft,st);conf$3.height=calculateActorMargins(Rt,Qt,Dt),svgDraw$1.insertComputerIcon(Pt),svgDraw$1.insertDatabaseIcon(Pt),svgDraw$1.insertClockIcon(Pt),Zt&&(bounds$1.bumpVerticalPos(conf$3.boxMargin),Wt&&bounds$1.bumpVerticalPos(Dt[0].textMaxHeight)),drawActors(Pt,Rt,Bt,0,conf$3,Ft,!1);const Kt=calculateLoopBounds(Ft,Rt,Qt,st);svgDraw$1.insertArrowHead(Pt),svgDraw$1.insertArrowCrossHead(Pt),svgDraw$1.insertArrowFilledHead(Pt),svgDraw$1.insertSequenceNumber(Pt);function on(jn,hn){const zn=bounds$1.endActivation(jn);zn.starty+18>hn&&(zn.starty=hn-6,hn+=12),svgDraw$1.drawActivation(Pt,zn,hn,conf$3,actorActivations(jn.from.actor).length),bounds$1.insert(zn.startx,hn-10,zn.stopx,hn)}let nn=1,mn=1;const gn=[];Ft.forEach(function(jn){let hn,zn,ir;switch(jn.type){case st.db.LINETYPE.NOTE:zn=jn.noteModel,drawNote$1(Pt,zn);break;case st.db.LINETYPE.ACTIVE_START:bounds$1.newActivation(jn,Pt,Rt);break;case st.db.LINETYPE.ACTIVE_END:on(jn,bounds$1.getVerticalPos());break;case st.db.LINETYPE.LOOP_START:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.LOOP_END:hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Pt,hn,"loop",conf$3),bounds$1.bumpVerticalPos(hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(hn);break;case st.db.LINETYPE.RECT_START:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin,conf$3.boxMargin,tr=>bounds$1.newLoop(void 0,tr.message));break;case st.db.LINETYPE.RECT_END:hn=bounds$1.endLoop(),svgDraw$1.drawBackgroundRect(Pt,hn),bounds$1.models.addLoop(hn),bounds$1.bumpVerticalPos(hn.stopy-bounds$1.getVerticalPos());break;case st.db.LINETYPE.OPT_START:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.OPT_END:hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Pt,hn,"opt",conf$3),bounds$1.bumpVerticalPos(hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(hn);break;case st.db.LINETYPE.ALT_START:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.ALT_ELSE:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,tr=>bounds$1.addSectionToLoop(tr));break;case st.db.LINETYPE.ALT_END:hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Pt,hn,"alt",conf$3),bounds$1.bumpVerticalPos(hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(hn);break;case st.db.LINETYPE.PAR_START:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.PAR_AND:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,tr=>bounds$1.addSectionToLoop(tr));break;case st.db.LINETYPE.PAR_END:hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Pt,hn,"par",conf$3),bounds$1.bumpVerticalPos(hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(hn);break;case st.db.LINETYPE.AUTONUMBER:nn=jn.message.start||nn,mn=jn.message.step||mn,jn.message.visible?st.db.enableSequenceNumbers():st.db.disableSequenceNumbers();break;case st.db.LINETYPE.CRITICAL_START:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.CRITICAL_OPTION:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,tr=>bounds$1.addSectionToLoop(tr));break;case st.db.LINETYPE.CRITICAL_END:hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Pt,hn,"critical",conf$3),bounds$1.bumpVerticalPos(hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(hn);break;case st.db.LINETYPE.BREAK_START:adjustLoopHeightForWrap(Kt,jn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.BREAK_END:hn=bounds$1.endLoop(),svgDraw$1.drawLoop(Pt,hn,"break",conf$3),bounds$1.bumpVerticalPos(hn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(hn);break;default:try{ir=jn.msgModel,ir.starty=bounds$1.getVerticalPos(),ir.sequenceIndex=nn,ir.sequenceVisible=st.db.showSequenceNumbers();const tr=boundMessage(Pt,ir);gn.push({messageModel:ir,lineStartY:tr}),bounds$1.models.addMessage(ir)}catch(tr){log$1.error("error while drawing message",tr)}}[st.db.LINETYPE.SOLID_OPEN,st.db.LINETYPE.DOTTED_OPEN,st.db.LINETYPE.SOLID,st.db.LINETYPE.DOTTED,st.db.LINETYPE.SOLID_CROSS,st.db.LINETYPE.DOTTED_CROSS,st.db.LINETYPE.SOLID_POINT,st.db.LINETYPE.DOTTED_POINT].includes(jn.type)&&(nn=nn+mn)}),gn.forEach(jn=>drawMessage(Pt,jn.messageModel,jn.lineStartY,st)),conf$3.mirrorActors&&(bounds$1.bumpVerticalPos(conf$3.boxMargin*2),drawActors(Pt,Rt,Bt,bounds$1.getVerticalPos(),conf$3,Ft,!0),bounds$1.bumpVerticalPos(conf$3.boxMargin),fixLifeLineHeights(Pt,bounds$1.getVerticalPos())),bounds$1.models.boxes.forEach(function(jn){jn.height=bounds$1.getVerticalPos()-jn.y,bounds$1.insert(jn.x,jn.y,jn.x+jn.width,jn.height),jn.startx=jn.x,jn.starty=jn.y,jn.stopx=jn.startx+jn.width,jn.stopy=jn.starty+jn.height,jn.stroke="rgb(0,0,0, 0.5)",svgDraw$1.drawBox(Pt,jn,conf$3)}),Zt&&bounds$1.bumpVerticalPos(conf$3.boxMargin);const Tn=drawActorsPopup(Pt,Rt,Bt,Lt),{bounds:An}=bounds$1.getBounds();log$1.debug("For line height fix Querying: #"+rt+" .actor-line"),selectAll("#"+rt+" .actor-line").attr("y2",An.stopy);let Mn=An.stopy-An.starty;Mn<Tn.maxHeight&&(Mn=Tn.maxHeight);let $n=Mn+2*conf$3.diagramMarginY;conf$3.mirrorActors&&($n=$n-conf$3.boxMargin+conf$3.bottomMarginAdj);let cn=An.stopx-An.startx;cn<Tn.maxWidth&&(cn=Tn.maxWidth);const Sn=cn+2*conf$3.diagramMarginX;Yt&&Pt.append("text").text(Yt).attr("x",(An.stopx-An.startx)/2-2*conf$3.diagramMarginX).attr("y",-25),configureSvgSize(Pt,$n,Sn,conf$3.useMaxWidth);const an=Yt?40:0;Pt.attr("viewBox",An.startx-conf$3.diagramMarginX+" -"+(conf$3.diagramMarginY+an)+" "+Sn+" "+($n+an)),log$1.debug("models:",bounds$1.models)};function getMaxMessageWidthPerActor(nt,rt,it){const st={};return rt.forEach(function(bt){if(nt[bt.to]&&nt[bt.from]){const xt=nt[bt.to];if(bt.placement===it.db.PLACEMENT.LEFTOF&&!xt.prevActor||bt.placement===it.db.PLACEMENT.RIGHTOF&&!xt.nextActor)return;const Et=bt.placement!==void 0,kt=!Et,Lt=Et?noteFont(conf$3):messageFont(conf$3),Pt=bt.wrap?utils.wrapLabel(bt.message,conf$3.width-2*conf$3.wrapPadding,Lt):bt.message,Dt=utils.calculateTextDimensions(Pt,Lt).width+2*conf$3.wrapPadding;kt&&bt.from===xt.nextActor?st[bt.to]=Math.max(st[bt.to]||0,Dt):kt&&bt.from===xt.prevActor?st[bt.from]=Math.max(st[bt.from]||0,Dt):kt&&bt.from===bt.to?(st[bt.from]=Math.max(st[bt.from]||0,Dt/2),st[bt.to]=Math.max(st[bt.to]||0,Dt/2)):bt.placement===it.db.PLACEMENT.RIGHTOF?st[bt.from]=Math.max(st[bt.from]||0,Dt):bt.placement===it.db.PLACEMENT.LEFTOF?st[xt.prevActor]=Math.max(st[xt.prevActor]||0,Dt):bt.placement===it.db.PLACEMENT.OVER&&(xt.prevActor&&(st[xt.prevActor]=Math.max(st[xt.prevActor]||0,Dt/2)),xt.nextActor&&(st[bt.from]=Math.max(st[bt.from]||0,Dt/2)))}}),log$1.debug("maxMessageWidthPerActor:",st),st}const getRequiredPopupWidth=function(nt){let rt=0;const it=actorFont(conf$3);for(const st in nt.links){const xt=utils.calculateTextDimensions(st,it).width+2*conf$3.wrapPadding+2*conf$3.boxMargin;rt<xt&&(rt=xt)}return rt};function calculateActorMargins(nt,rt,it){let st=0;Object.keys(nt).forEach(xt=>{const Et=nt[xt];Et.wrap&&(Et.description=utils.wrapLabel(Et.description,conf$3.width-2*conf$3.wrapPadding,actorFont(conf$3)));const kt=utils.calculateTextDimensions(Et.description,actorFont(conf$3));Et.width=Et.wrap?conf$3.width:Math.max(conf$3.width,kt.width+2*conf$3.wrapPadding),Et.height=Et.wrap?Math.max(kt.height,conf$3.height):conf$3.height,st=Math.max(st,Et.height)});for(const xt in rt){const Et=nt[xt];if(!Et)continue;const kt=nt[Et.nextActor];if(!kt){const Dt=rt[xt]+conf$3.actorMargin-Et.width/2;Et.margin=Math.max(Dt,conf$3.actorMargin);continue}const Pt=rt[xt]+conf$3.actorMargin-Et.width/2-kt.width/2;Et.margin=Math.max(Pt,conf$3.actorMargin)}let bt=0;return it.forEach(xt=>{const Et=messageFont(conf$3);let kt=xt.actorKeys.reduce((Rt,Dt)=>Rt+=nt[Dt].width+(nt[Dt].margin||0),0);kt-=2*conf$3.boxTextMargin,xt.wrap&&(xt.name=utils.wrapLabel(xt.name,kt-2*conf$3.wrapPadding,Et));const Lt=utils.calculateTextDimensions(xt.name,Et);bt=Math.max(Lt.height,bt);const Pt=Math.max(kt,Lt.width+2*conf$3.wrapPadding);if(xt.margin=conf$3.boxTextMargin,kt<Pt){const Rt=(Pt-kt)/2;xt.margin+=Rt}}),it.forEach(xt=>xt.textMaxHeight=bt),Math.max(st,conf$3.height)}const buildNoteModel=function(nt,rt,it){const st=rt[nt.from].x,bt=rt[nt.to].x,xt=nt.wrap&&nt.message;let Et=utils.calculateTextDimensions(xt?utils.wrapLabel(nt.message,conf$3.width,noteFont(conf$3)):nt.message,noteFont(conf$3));const kt={width:xt?conf$3.width:Math.max(conf$3.width,Et.width+2*conf$3.noteMargin),height:0,startx:rt[nt.from].x,stopx:0,starty:0,stopy:0,message:nt.message};return nt.placement===it.db.PLACEMENT.RIGHTOF?(kt.width=xt?Math.max(conf$3.width,Et.width):Math.max(rt[nt.from].width/2+rt[nt.to].width/2,Et.width+2*conf$3.noteMargin),kt.startx=st+(rt[nt.from].width+conf$3.actorMargin)/2):nt.placement===it.db.PLACEMENT.LEFTOF?(kt.width=Math.max(xt?conf$3.width:rt[nt.from].width/2+rt[nt.to].width/2,Et.width+2*conf$3.noteMargin),kt.startx=st-kt.width+(rt[nt.from].width-conf$3.actorMargin)/2):nt.to===nt.from?(Et=utils.calculateTextDimensions(xt?utils.wrapLabel(nt.message,Math.max(conf$3.width,rt[nt.from].width),noteFont(conf$3)):nt.message,noteFont(conf$3)),kt.width=xt?Math.max(conf$3.width,rt[nt.from].width):Math.max(rt[nt.from].width,conf$3.width,Et.width+2*conf$3.noteMargin),kt.startx=st+(rt[nt.from].width-kt.width)/2):(kt.width=Math.abs(st+rt[nt.from].width/2-(bt+rt[nt.to].width/2))+conf$3.actorMargin,kt.startx=st<bt?st+rt[nt.from].width/2-conf$3.actorMargin/2:bt+rt[nt.to].width/2-conf$3.actorMargin/2),xt&&(kt.message=utils.wrapLabel(nt.message,kt.width-2*conf$3.wrapPadding,noteFont(conf$3))),log$1.debug(`NM:[${kt.startx},${kt.stopx},${kt.starty},${kt.stopy}:${kt.width},${kt.height}=${nt.message}]`),kt},buildMessageModel=function(nt,rt,it){let st=!1;if([it.db.LINETYPE.SOLID_OPEN,it.db.LINETYPE.DOTTED_OPEN,it.db.LINETYPE.SOLID,it.db.LINETYPE.DOTTED,it.db.LINETYPE.SOLID_CROSS,it.db.LINETYPE.DOTTED_CROSS,it.db.LINETYPE.SOLID_POINT,it.db.LINETYPE.DOTTED_POINT].includes(nt.type)&&(st=!0),!st)return{};const bt=activationBounds(nt.from,rt),xt=activationBounds(nt.to,rt),Et=bt[0]<=xt[0]?1:0,kt=bt[0]<xt[0]?0:1,Lt=[...bt,...xt],Pt=Math.abs(xt[kt]-bt[Et]);nt.wrap&&nt.message&&(nt.message=utils.wrapLabel(nt.message,Math.max(Pt+2*conf$3.wrapPadding,conf$3.width),messageFont(conf$3)));const Rt=utils.calculateTextDimensions(nt.message,messageFont(conf$3));return{width:Math.max(nt.wrap?0:Rt.width+2*conf$3.wrapPadding,Pt+2*conf$3.wrapPadding,conf$3.width),height:0,startx:bt[Et],stopx:xt[kt],starty:0,stopy:0,message:nt.message,type:nt.type,wrap:nt.wrap,fromBounds:Math.min.apply(null,Lt),toBounds:Math.max.apply(null,Lt)}},calculateLoopBounds=function(nt,rt,it,st){const bt={},xt=[];let Et,kt,Lt;return nt.forEach(function(Pt){switch(Pt.id=utils.random({length:10}),Pt.type){case st.db.LINETYPE.LOOP_START:case st.db.LINETYPE.ALT_START:case st.db.LINETYPE.OPT_START:case st.db.LINETYPE.PAR_START:case st.db.LINETYPE.CRITICAL_START:case st.db.LINETYPE.BREAK_START:xt.push({id:Pt.id,msg:Pt.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case st.db.LINETYPE.ALT_ELSE:case st.db.LINETYPE.PAR_AND:case st.db.LINETYPE.CRITICAL_OPTION:Pt.message&&(Et=xt.pop(),bt[Et.id]=Et,bt[Pt.id]=Et,xt.push(Et));break;case st.db.LINETYPE.LOOP_END:case st.db.LINETYPE.ALT_END:case st.db.LINETYPE.OPT_END:case st.db.LINETYPE.PAR_END:case st.db.LINETYPE.CRITICAL_END:case st.db.LINETYPE.BREAK_END:Et=xt.pop(),bt[Et.id]=Et;break;case st.db.LINETYPE.ACTIVE_START:{const Dt=rt[Pt.from?Pt.from.actor:Pt.to.actor],Bt=actorActivations(Pt.from?Pt.from.actor:Pt.to.actor).length,Ft=Dt.x+Dt.width/2+(Bt-1)*conf$3.activationWidth/2,Yt={startx:Ft,stopx:Ft+conf$3.activationWidth,actor:Pt.from.actor,enabled:!0};bounds$1.activations.push(Yt)}break;case st.db.LINETYPE.ACTIVE_END:{const Dt=bounds$1.activations.map(Bt=>Bt.actor).lastIndexOf(Pt.from.actor);delete bounds$1.activations.splice(Dt,1)[0]}break}Pt.placement!==void 0?(kt=buildNoteModel(Pt,rt,st),Pt.noteModel=kt,xt.forEach(Dt=>{Et=Dt,Et.from=Math.min(Et.from,kt.startx),Et.to=Math.max(Et.to,kt.startx+kt.width),Et.width=Math.max(Et.width,Math.abs(Et.from-Et.to))-conf$3.labelBoxWidth})):(Lt=buildMessageModel(Pt,rt,st),Pt.msgModel=Lt,Lt.startx&&Lt.stopx&&xt.length>0&&xt.forEach(Dt=>{if(Et=Dt,Lt.startx===Lt.stopx){const Bt=rt[Pt.from],Ft=rt[Pt.to];Et.from=Math.min(Bt.x-Lt.width/2,Bt.x-Bt.width/2,Et.from),Et.to=Math.max(Ft.x+Lt.width/2,Ft.x+Bt.width/2,Et.to),Et.width=Math.max(Et.width,Math.abs(Et.to-Et.from))-conf$3.labelBoxWidth}else Et.from=Math.min(Lt.startx,Et.from),Et.to=Math.max(Lt.stopx,Et.to),Et.width=Math.max(Et.width,Lt.width)-conf$3.labelBoxWidth}))}),bounds$1.activations=[],log$1.debug("Loop type widths:",bt),bt},sequenceRenderer={bounds:bounds$1,drawActors,drawActorsPopup,setConf:setConf$4,draw:draw$4};var parser$1=function(){var nt=function(nr,dr,or,ur){for(or=or||{},ur=nr.length;ur--;or[nr[ur]]=dr);return or},rt=[1,2],it=[1,3],st=[1,5],bt=[1,7],xt=[2,5],Et=[1,15],kt=[1,17],Lt=[1,21],Pt=[1,22],Rt=[1,23],Dt=[1,24],Bt=[1,37],Ft=[1,25],Yt=[1,26],Zt=[1,27],Wt=[1,28],Qt=[1,29],Kt=[1,32],on=[1,33],nn=[1,34],mn=[1,35],gn=[1,36],Tn=[1,39],An=[1,40],kn=[1,41],Mn=[1,42],$n=[1,38],cn=[1,45],Sn=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],an=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],jn=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],hn=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],zn={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(dr,or,ur,Cr,Sr,rr,Fr){var mr=rr.length-1;switch(Sr){case 4:return Cr.setRootDoc(rr[mr]),rr[mr];case 5:this.$=[];break;case 6:rr[mr]!="nl"&&(rr[mr-1].push(rr[mr]),this.$=rr[mr-1]);break;case 7:case 8:this.$=rr[mr];break;case 9:this.$="nl";break;case 12:this.$=rr[mr];break;case 13:const Cn=rr[mr-1];Cn.description=Cr.trimColon(rr[mr]),this.$=Cn;break;case 14:this.$={stmt:"relation",state1:rr[mr-2],state2:rr[mr]};break;case 15:const rn=Cr.trimColon(rr[mr]);this.$={stmt:"relation",state1:rr[mr-3],state2:rr[mr-1],description:rn};break;case 19:this.$={stmt:"state",id:rr[mr-3],type:"default",description:"",doc:rr[mr-1]};break;case 20:var _r=rr[mr],yr=rr[mr-2].trim();if(rr[mr].match(":")){var pr=rr[mr].split(":");_r=pr[0],yr=[yr,pr[1]]}this.$={stmt:"state",id:_r,type:"default",description:yr};break;case 21:this.$={stmt:"state",id:rr[mr-3],type:"default",description:rr[mr-5],doc:rr[mr-1]};break;case 22:this.$={stmt:"state",id:rr[mr],type:"fork"};break;case 23:this.$={stmt:"state",id:rr[mr],type:"join"};break;case 24:this.$={stmt:"state",id:rr[mr],type:"choice"};break;case 25:this.$={stmt:"state",id:Cr.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:rr[mr-1].trim(),note:{position:rr[mr-2].trim(),text:rr[mr].trim()}};break;case 30:this.$=rr[mr].trim(),Cr.setAccTitle(this.$);break;case 31:case 32:this.$=rr[mr].trim(),Cr.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:rr[mr-1].trim(),classes:rr[mr].trim()};break;case 35:this.$={stmt:"applyClass",id:rr[mr-1].trim(),styleClass:rr[mr].trim()};break;case 38:Cr.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:Cr.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:Cr.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:Cr.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:rr[mr].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:rr[mr-2].trim(),classes:[rr[mr].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:rr[mr-2].trim(),classes:[rr[mr].trim()],type:"default",description:""};break;case 50:Cr.parseDirective("%%{","open_directive");break;case 51:Cr.parseDirective(rr[mr],"type_directive");break;case 52:rr[mr]=rr[mr].trim().replace(/'/g,'"'),Cr.parseDirective(rr[mr],"arg_directive");break;case 53:Cr.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:rt,5:it,6:4,7:st,45:6,60:bt},{1:[3]},{3:8,4:rt,5:it,6:4,7:st,45:6,60:bt},{3:9,4:rt,5:it,6:4,7:st,45:6,60:bt},{3:10,4:rt,5:it,6:4,7:st,45:6,60:bt},nt([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],xt,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Pt,19:Rt,22:Dt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Qt,32:31,33:Kt,35:on,37:nn,38:mn,42:gn,45:6,50:Tn,51:An,52:kn,53:Mn,56:$n,60:bt},{47:43,48:[1,44],63:cn},nt([48,63],[2,51]),nt(Sn,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:Lt,17:Pt,19:Rt,22:Dt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Qt,32:31,33:Kt,35:on,37:nn,38:mn,42:gn,45:6,50:Tn,51:An,52:kn,53:Mn,56:$n,60:bt},nt(Sn,[2,8]),nt(Sn,[2,9]),nt(Sn,[2,10]),nt(Sn,[2,11]),nt(Sn,[2,12],{14:[1,47],15:[1,48]}),nt(Sn,[2,16]),{18:[1,49]},nt(Sn,[2,18],{20:[1,50]}),{23:[1,51]},nt(Sn,[2,22]),nt(Sn,[2,23]),nt(Sn,[2,24]),nt(Sn,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},nt(Sn,[2,28]),nt(Sn,[2,29]),{34:[1,56]},{36:[1,57]},nt(Sn,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},nt(an,[2,44],{57:[1,61]}),nt(an,[2,45],{57:[1,62]}),nt(Sn,[2,38]),nt(Sn,[2,39]),nt(Sn,[2,40]),nt(Sn,[2,41]),nt(jn,[2,36]),{49:63,62:[1,64]},nt(jn,[2,53]),nt(Sn,[2,7]),nt(Sn,[2,13]),{13:65,24:Bt,56:$n},nt(Sn,[2,17]),nt(hn,xt,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},nt(Sn,[2,30]),nt(Sn,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:cn},{63:[2,52]},nt(Sn,[2,14],{14:[1,76]}),{4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Pt,19:Rt,21:[1,77],22:Dt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Qt,32:31,33:Kt,35:on,37:nn,38:mn,42:gn,45:6,50:Tn,51:An,52:kn,53:Mn,56:$n,60:bt},nt(Sn,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},nt(Sn,[2,33]),nt(Sn,[2,34]),nt(Sn,[2,35]),nt(an,[2,46]),nt(an,[2,47]),nt(jn,[2,37]),nt(Sn,[2,15]),nt(Sn,[2,19]),nt(hn,xt,{8:81}),nt(Sn,[2,26]),nt(Sn,[2,27]),{4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:Pt,19:Rt,21:[1,82],22:Dt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Qt,32:31,33:Kt,35:on,37:nn,38:mn,42:gn,45:6,50:Tn,51:An,52:kn,53:Mn,56:$n,60:bt},nt(Sn,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(dr,or){if(or.recoverable)this.trace(dr);else{var ur=new Error(dr);throw ur.hash=or,ur}},parse:function(dr){var or=this,ur=[0],Cr=[],Sr=[null],rr=[],Fr=this.table,mr="",_r=0,yr=0,pr=2,Cn=1,rn=rr.slice.call(arguments,1),dn=Object.create(this.lexer),fn={yy:{}};for(var On in this.yy)Object.prototype.hasOwnProperty.call(this.yy,On)&&(fn.yy[On]=this.yy[On]);dn.setInput(dr,fn.yy),fn.yy.lexer=dn,fn.yy.parser=this,typeof dn.yylloc>"u"&&(dn.yylloc={});var xn=dn.yylloc;rr.push(xn);var hr=dn.options&&dn.options.ranges;typeof fn.yy.parseError=="function"?this.parseError=fn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Nn(){var yi;return yi=Cr.pop()||dn.lex()||Cn,typeof yi!="number"&&(yi instanceof Array&&(Cr=yi,yi=Cr.pop()),yi=or.symbols_[yi]||yi),yi}for(var Kn,Un,sr,ar,wr={},vr,Rr,ci,mi;;){if(Un=ur[ur.length-1],this.defaultActions[Un]?sr=this.defaultActions[Un]:((Kn===null||typeof Kn>"u")&&(Kn=Nn()),sr=Fr[Un]&&Fr[Un][Kn]),typeof sr>"u"||!sr.length||!sr[0]){var si="";mi=[];for(vr in Fr[Un])this.terminals_[vr]&&vr>pr&&mi.push("'"+this.terminals_[vr]+"'");dn.showPosition?si="Parse error on line "+(_r+1)+`:
`+dn.showPosition()+`
Expecting `+mi.join(", ")+", got '"+(this.terminals_[Kn]||Kn)+"'":si="Parse error on line "+(_r+1)+": Unexpected "+(Kn==Cn?"end of input":"'"+(this.terminals_[Kn]||Kn)+"'"),this.parseError(si,{text:dn.match,token:this.terminals_[Kn]||Kn,line:dn.yylineno,loc:xn,expected:mi})}if(sr[0]instanceof Array&&sr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Un+", token: "+Kn);switch(sr[0]){case 1:ur.push(Kn),Sr.push(dn.yytext),rr.push(dn.yylloc),ur.push(sr[1]),Kn=null,yr=dn.yyleng,mr=dn.yytext,_r=dn.yylineno,xn=dn.yylloc;break;case 2:if(Rr=this.productions_[sr[1]][1],wr.$=Sr[Sr.length-Rr],wr._$={first_line:rr[rr.length-(Rr||1)].first_line,last_line:rr[rr.length-1].last_line,first_column:rr[rr.length-(Rr||1)].first_column,last_column:rr[rr.length-1].last_column},hr&&(wr._$.range=[rr[rr.length-(Rr||1)].range[0],rr[rr.length-1].range[1]]),ar=this.performAction.apply(wr,[mr,yr,_r,fn.yy,sr[1],Sr,rr].concat(rn)),typeof ar<"u")return ar;Rr&&(ur=ur.slice(0,-1*Rr*2),Sr=Sr.slice(0,-1*Rr),rr=rr.slice(0,-1*Rr)),ur.push(this.productions_[sr[1]][0]),Sr.push(wr.$),rr.push(wr._$),ci=Fr[ur[ur.length-2]][ur[ur.length-1]],ur.push(ci);break;case 3:return!0}}return!0}},ir=function(){var nr={EOF:1,parseError:function(or,ur){if(this.yy.parser)this.yy.parser.parseError(or,ur);else throw new Error(or)},setInput:function(dr,or){return this.yy=or||this.yy||{},this._input=dr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var dr=this._input[0];this.yytext+=dr,this.yyleng++,this.offset++,this.match+=dr,this.matched+=dr;var or=dr.match(/(?:\r\n?|\n).*/g);return or?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),dr},unput:function(dr){var or=dr.length,ur=dr.split(/(?:\r\n?|\n)/g);this._input=dr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-or),this.offset-=or;var Cr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ur.length-1&&(this.yylineno-=ur.length-1);var Sr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ur?(ur.length===Cr.length?this.yylloc.first_column:0)+Cr[Cr.length-ur.length].length-ur[0].length:this.yylloc.first_column-or},this.options.ranges&&(this.yylloc.range=[Sr[0],Sr[0]+this.yyleng-or]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(dr){this.unput(this.match.slice(dr))},pastInput:function(){var dr=this.matched.substr(0,this.matched.length-this.match.length);return(dr.length>20?"...":"")+dr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var dr=this.match;return dr.length<20&&(dr+=this._input.substr(0,20-dr.length)),(dr.substr(0,20)+(dr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var dr=this.pastInput(),or=new Array(dr.length+1).join("-");return dr+this.upcomingInput()+`
`+or+"^"},test_match:function(dr,or){var ur,Cr,Sr;if(this.options.backtrack_lexer&&(Sr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Sr.yylloc.range=this.yylloc.range.slice(0))),Cr=dr[0].match(/(?:\r\n?|\n).*/g),Cr&&(this.yylineno+=Cr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Cr?Cr[Cr.length-1].length-Cr[Cr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+dr[0].length},this.yytext+=dr[0],this.match+=dr[0],this.matches=dr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(dr[0].length),this.matched+=dr[0],ur=this.performAction.call(this,this.yy,this,or,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ur)return ur;if(this._backtrack){for(var rr in Sr)this[rr]=Sr[rr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var dr,or,ur,Cr;this._more||(this.yytext="",this.match="");for(var Sr=this._currentRules(),rr=0;rr<Sr.length;rr++)if(ur=this._input.match(this.rules[Sr[rr]]),ur&&(!or||ur[0].length>or[0].length)){if(or=ur,Cr=rr,this.options.backtrack_lexer){if(dr=this.test_match(ur,Sr[rr]),dr!==!1)return dr;if(this._backtrack){or=!1;continue}else return!1}else if(!this.options.flex)break}return or?(dr=this.test_match(or,Sr[Cr]),dr!==!1?dr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var or=this.next();return or||this.lex()},begin:function(or){this.conditionStack.push(or)},popState:function(){var or=this.conditionStack.length-1;return or>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(or){return or=this.conditionStack.length-1-Math.abs(or||0),or>=0?this.conditionStack[or]:"INITIAL"},pushState:function(or){this.begin(or)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(or,ur,Cr,Sr){switch(Cr){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),ur.yytext=ur.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),ur.yytext=ur.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),ur.yytext=ur.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),ur.yytext=ur.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),ur.yytext=ur.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),ur.yytext=ur.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.pushState("STATE_STRING");break;case 49:return this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),ur.yytext=ur.yytext.substr(2).trim(),31;case 69:return this.popState(),ur.yytext=ur.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return ur.yytext=ur.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return nr}();zn.lexer=ir;function tr(){this.yy={}}return tr.prototype=zn,zn.Parser=tr,new tr}();parser$1.parser=parser$1;const stateParser=parser$1,stateDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*stateDiagram/)!==null},stateDetectorV2=(nt,rt)=>{var it;return!!(nt.match(/^\s*stateDiagram-v2/)!==null||nt.match(/^\s*stateDiagram/)&&((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper")},DEFAULT_DIAGRAM_DIRECTION="LR",DEFAULT_NESTED_DOC_DIR="TB",STMT_STATE="state",STMT_RELATION="relation",STMT_CLASSDEF="classDef",STMT_APPLYCLASS="applyClass",DEFAULT_STATE_TYPE="default",DIVIDER_TYPE="divider",START_NODE="[*]",START_TYPE="start",END_NODE=START_NODE,END_TYPE="end",COLOR_KEYWORD="color",FILL_KEYWORD="fill",BG_FILL="bgFill",STYLECLASS_SEP=",";function newClassesList(){return{}}let direction=DEFAULT_DIAGRAM_DIRECTION,rootDoc=[],classes=newClassesList();const newDoc=()=>({relations:[],states:{},documents:{}});let documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,dividerCnt=0;const lineType={LINE:0,DOTTED_LINE:1},relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},clone=nt=>JSON.parse(JSON.stringify(nt)),parseDirective$1=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},setRootDoc=nt=>{log$1.info("Setting root doc",nt),rootDoc=nt},getRootDoc=()=>rootDoc,docTranslator=(nt,rt,it)=>{if(rt.stmt===STMT_RELATION)docTranslator(nt,rt.state1,!0),docTranslator(nt,rt.state2,!1);else if(rt.stmt===STMT_STATE&&(rt.id==="[*]"?(rt.id=it?nt.id+"_start":nt.id+"_end",rt.start=it):rt.id=rt.id.trim()),rt.doc){const st=[];let bt=[],xt;for(xt=0;xt<rt.doc.length;xt++)if(rt.doc[xt].type===DIVIDER_TYPE){const Et=clone(rt.doc[xt]);Et.doc=clone(bt),st.push(Et),bt=[]}else bt.push(rt.doc[xt]);if(st.length>0&&bt.length>0){const Et={stmt:STMT_STATE,id:generateId$1(),type:"divider",doc:clone(bt)};st.push(clone(Et)),rt.doc=st}rt.doc.forEach(Et=>docTranslator(rt,Et,!0))}},getRootDocV2=()=>(docTranslator({id:"root"},{id:"root",doc:rootDoc},!0),{id:"root",doc:rootDoc}),extract=nt=>{let rt;nt.doc?rt=nt.doc:rt=nt,log$1.info(rt),clear$1(!0),log$1.info("Extract",rt),rt.forEach(it=>{switch(it.stmt){case STMT_STATE:addState(it.id.trim(),it.type,it.doc,it.description,it.note,it.classes,it.styles,it.textStyles);break;case STMT_RELATION:addRelation(it.state1,it.state2,it.description);break;case STMT_CLASSDEF:addStyleClass(it.id.trim(),it.classes);break;case STMT_APPLYCLASS:setCssClass(it.id.trim(),it.styleClass);break}})},addState=function(nt,rt=DEFAULT_STATE_TYPE,it=null,st=null,bt=null,xt=null,Et=null,kt=null){const Lt=nt==null?void 0:nt.trim();currentDocument.states[Lt]===void 0?(log$1.info("Adding state ",Lt,st),currentDocument.states[Lt]={id:Lt,descriptions:[],type:rt,doc:it,note:bt,classes:[],styles:[],textStyles:[]}):(currentDocument.states[Lt].doc||(currentDocument.states[Lt].doc=it),currentDocument.states[Lt].type||(currentDocument.states[Lt].type=rt)),st&&(log$1.info("Setting state description",Lt,st),typeof st=="string"&&addDescription(Lt,st.trim()),typeof st=="object"&&st.forEach(Pt=>addDescription(Lt,Pt.trim()))),bt&&(currentDocument.states[Lt].note=bt,currentDocument.states[Lt].note.text=common$1.sanitizeText(currentDocument.states[Lt].note.text,getConfig$1())),xt&&(log$1.info("Setting state classes",Lt,xt),(typeof xt=="string"?[xt]:xt).forEach(Rt=>setCssClass(Lt,Rt.trim()))),Et&&(log$1.info("Setting state styles",Lt,Et),(typeof Et=="string"?[Et]:Et).forEach(Rt=>setStyle(Lt,Rt.trim()))),kt&&(log$1.info("Setting state styles",Lt,Et),(typeof kt=="string"?[kt]:kt).forEach(Rt=>setTextStyle(Lt,Rt.trim())))},clear$1=function(nt){documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,classes=newClassesList(),nt||clear$g()},getState=function(nt){return currentDocument.states[nt]},getStates=function(){return currentDocument.states},logDocuments=function(){log$1.info("Documents = ",documents)},getRelations=function(){return currentDocument.relations};function startIdIfNeeded(nt=""){let rt=nt;return nt===START_NODE&&(startEndCount++,rt=`${START_TYPE}${startEndCount}`),rt}function startTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===START_NODE?START_TYPE:rt}function endIdIfNeeded(nt=""){let rt=nt;return nt===END_NODE&&(startEndCount++,rt=`${END_TYPE}${startEndCount}`),rt}function endTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===END_NODE?END_TYPE:rt}function addRelationObjs(nt,rt,it){let st=startIdIfNeeded(nt.id.trim()),bt=startTypeIfNeeded(nt.id.trim(),nt.type),xt=startIdIfNeeded(rt.id.trim()),Et=startTypeIfNeeded(rt.id.trim(),rt.type);addState(st,bt,nt.doc,nt.description,nt.note,nt.classes,nt.styles,nt.textStyles),addState(xt,Et,rt.doc,rt.description,rt.note,rt.classes,rt.styles,rt.textStyles),currentDocument.relations.push({id1:st,id2:xt,relationTitle:common$1.sanitizeText(it,getConfig$1())})}const addRelation=function(nt,rt,it){if(typeof nt=="object")addRelationObjs(nt,rt,it);else{const st=startIdIfNeeded(nt.trim()),bt=startTypeIfNeeded(nt),xt=endIdIfNeeded(rt.trim()),Et=endTypeIfNeeded(rt);addState(st,bt),addState(xt,Et),currentDocument.relations.push({id1:st,id2:xt,title:common$1.sanitizeText(it,getConfig$1())})}},addDescription=function(nt,rt){const it=currentDocument.states[nt],st=rt.startsWith(":")?rt.replace(":","").trim():rt;it.descriptions.push(common$1.sanitizeText(st,getConfig$1()))},cleanupLabel=function(nt){return nt.substring(0,1)===":"?nt.substr(2).trim():nt.trim()},getDividerId=()=>(dividerCnt++,"divider-id-"+dividerCnt),addStyleClass=function(nt,rt=""){classes[nt]===void 0&&(classes[nt]={id:nt,styles:[],textStyles:[]});const it=classes[nt];rt!=null&&rt.split(STYLECLASS_SEP).forEach(st=>{const bt=st.replace(/([^;]*);/,"$1").trim();if(st.match(COLOR_KEYWORD)){const Et=bt.replace(FILL_KEYWORD,BG_FILL).replace(COLOR_KEYWORD,FILL_KEYWORD);it.textStyles.push(Et)}it.styles.push(bt)})},getClasses$1=function(){return classes},setCssClass=function(nt,rt){nt.split(",").forEach(function(it){let st=getState(it);if(st===void 0){const bt=it.trim();addState(bt),st=getState(bt)}st.classes.push(rt)})},setStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},setTextStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},getDirection=()=>direction,setDirection=nt=>{direction=nt},trimColon=nt=>nt&&nt[0]===":"?nt.substr(1).trim():nt.trim(),stateDb={parseDirective:parseDirective$1,getConfig:()=>getConfig$1().state,addState,clear:clear$1,getState,getStates,getRelations,getClasses:getClasses$1,getDirection,addRelation,getDividerId,setDirection,cleanupLabel,lineType,relationType,logDocuments,getRootDoc,setRootDoc,getRootDocV2,extract,trimColon,getAccTitle,setAccTitle,getAccDescription,setAccDescription,addStyleClass,setCssClass,addDescription,setDiagramTitle,getDiagramTitle},drawStartState=nt=>nt.append("circle").attr("class","start-state").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit),drawDivider=nt=>nt.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",getConfig$1().state.textHeight).attr("class","divider").attr("x2",getConfig$1().state.textHeight*2).attr("y1",0).attr("y2",0),drawSimpleState=(nt,rt)=>{const it=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+2*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),st=it.node().getBBox();return nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",st.width+2*getConfig$1().state.padding).attr("height",st.height+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),it},drawDescrState=(nt,rt)=>{const it=function(Bt,Ft,Yt){const Zt=Bt.append("tspan").attr("x",2*getConfig$1().state.padding).text(Ft);Yt||Zt.attr("dy",getConfig$1().state.textHeight)},bt=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+1.3*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.descriptions[0]).node().getBBox(),xt=bt.height,Et=nt.append("text").attr("x",getConfig$1().state.padding).attr("y",xt+getConfig$1().state.padding*.4+getConfig$1().state.dividerMargin+getConfig$1().state.textHeight).attr("class","state-description");let kt=!0,Lt=!0;rt.descriptions.forEach(function(Bt){kt||(it(Et,Bt,Lt),Lt=!1),kt=!1});const Pt=nt.append("line").attr("x1",getConfig$1().state.padding).attr("y1",getConfig$1().state.padding+xt+getConfig$1().state.dividerMargin/2).attr("y2",getConfig$1().state.padding+xt+getConfig$1().state.dividerMargin/2).attr("class","descr-divider"),Rt=Et.node().getBBox(),Dt=Math.max(Rt.width,bt.width);return Pt.attr("x2",Dt+3*getConfig$1().state.padding),nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",Dt+2*getConfig$1().state.padding).attr("height",Rt.height+xt+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),nt},addTitleAndBox=(nt,rt,it)=>{const st=getConfig$1().state.padding,bt=2*getConfig$1().state.padding,xt=nt.node().getBBox(),Et=xt.width,kt=xt.x,Lt=nt.append("text").attr("x",0).attr("y",getConfig$1().state.titleShift).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),Rt=Lt.node().getBBox().width+bt;let Dt=Math.max(Rt,Et);Dt===Et&&(Dt=Dt+bt);let Bt;const Ft=nt.node().getBBox();rt.doc,Bt=kt-st,Rt>Et&&(Bt=(Et-Dt)/2+st),Math.abs(kt-Ft.x)<st&&Rt>Et&&(Bt=kt-(Rt-Et)/2);const Yt=1-getConfig$1().state.textHeight;return nt.insert("rect",":first-child").attr("x",Bt).attr("y",Yt).attr("class",it?"alt-composit":"composit").attr("width",Dt).attr("height",Ft.height+getConfig$1().state.textHeight+getConfig$1().state.titleShift+1).attr("rx","0"),Lt.attr("x",Bt+st),Rt<=Et&&Lt.attr("x",kt+(Dt-bt)/2-Rt/2+st),nt.insert("rect",":first-child").attr("x",Bt).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",Dt).attr("height",getConfig$1().state.textHeight*3).attr("rx",getConfig$1().state.radius),nt.insert("rect",":first-child").attr("x",Bt).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",Dt).attr("height",Ft.height+3+2*getConfig$1().state.textHeight).attr("rx",getConfig$1().state.radius),nt},drawEndState=nt=>(nt.append("circle").attr("class","end-state-outer").attr("r",getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding),nt.append("circle").attr("class","end-state-inner").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2)),drawForkJoinState=(nt,rt)=>{let it=getConfig$1().state.forkWidth,st=getConfig$1().state.forkHeight;if(rt.parentId){let bt=it;it=st,st=bt}return nt.append("rect").style("stroke","black").style("fill","black").attr("width",it).attr("height",st).attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding)},_drawLongText=(nt,rt,it,st)=>{let bt=0;const xt=st.append("text");xt.style("text-anchor","start"),xt.attr("class","noteText");let Et=nt.replace(/\r\n/g,"<br/>");Et=Et.replace(/\n/g,"<br/>");const kt=Et.split(common$1.lineBreakRegex);let Lt=1.25*getConfig$1().state.noteMargin;for(const Pt of kt){const Rt=Pt.trim();if(Rt.length>0){const Dt=xt.append("tspan");if(Dt.text(Rt),Lt===0){const Bt=Dt.node().getBBox();Lt+=Bt.height}bt+=Lt,Dt.attr("x",rt+getConfig$1().state.noteMargin),Dt.attr("y",it+bt+1.25*getConfig$1().state.noteMargin)}}return{textWidth:xt.node().getBBox().width,textHeight:bt}},drawNote=(nt,rt)=>{rt.attr("class","state-note");const it=rt.append("rect").attr("x",0).attr("y",getConfig$1().state.padding),st=rt.append("g"),{textWidth:bt,textHeight:xt}=_drawLongText(nt,0,0,st);return it.attr("height",xt+2*getConfig$1().state.noteMargin),it.attr("width",bt+getConfig$1().state.noteMargin*2),it},drawState=function(nt,rt){const it=rt.id,st={id:it,label:rt.id,width:0,height:0},bt=nt.append("g").attr("id",it).attr("class","stateGroup");rt.type==="start"&&drawStartState(bt),rt.type==="end"&&drawEndState(bt),(rt.type==="fork"||rt.type==="join")&&drawForkJoinState(bt,rt),rt.type==="note"&&drawNote(rt.note.text,bt),rt.type==="divider"&&drawDivider(bt),rt.type==="default"&&rt.descriptions.length===0&&drawSimpleState(bt,rt),rt.type==="default"&&rt.descriptions.length>0&&drawDescrState(bt,rt);const xt=bt.node().getBBox();return st.width=xt.width+2*getConfig$1().state.padding,st.height=xt.height+2*getConfig$1().state.padding,st};let edgeCount=0;const drawEdge=function(nt,rt,it){const st=function(Lt){switch(Lt){case stateDb.relationType.AGGREGATION:return"aggregation";case stateDb.relationType.EXTENSION:return"extension";case stateDb.relationType.COMPOSITION:return"composition";case stateDb.relationType.DEPENDENCY:return"dependency"}};rt.points=rt.points.filter(Lt=>!Number.isNaN(Lt.y));const bt=rt.points,xt=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}).curve(curveBasis),Et=nt.append("path").attr("d",xt(bt)).attr("id","edge"+edgeCount).attr("class","transition");let kt="";if(getConfig$1().state.arrowMarkerAbsolute&&(kt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,kt=kt.replace(/\(/g,"\\("),kt=kt.replace(/\)/g,"\\)")),Et.attr("marker-end","url("+kt+"#"+st(stateDb.relationType.DEPENDENCY)+"End)"),it.title!==void 0){const Lt=nt.append("g").attr("class","stateLabel"),{x:Pt,y:Rt}=utils.calcLabelPosition(rt.points),Dt=common$1.getRows(it.title);let Bt=0;const Ft=[];let Yt=0,Zt=0;for(let Kt=0;Kt<=Dt.length;Kt++){const on=Lt.append("text").attr("text-anchor","middle").text(Dt[Kt]).attr("x",Pt).attr("y",Rt+Bt),nn=on.node().getBBox();Yt=Math.max(Yt,nn.width),Zt=Math.min(Zt,nn.x),log$1.info(nn.x,Pt,Rt+Bt),Bt===0&&(Bt=on.node().getBBox().height,log$1.info("Title height",Bt,Rt)),Ft.push(on)}let Wt=Bt*Dt.length;if(Dt.length>1){const Kt=(Dt.length-1)*Bt*.5;Ft.forEach((on,nn)=>on.attr("y",Rt+nn*Bt-Kt)),Wt=Bt*Dt.length}const Qt=Lt.node().getBBox();Lt.insert("rect",":first-child").attr("class","box").attr("x",Pt-Yt/2-getConfig$1().state.padding/2).attr("y",Rt-Wt/2-getConfig$1().state.padding/2-3.5).attr("width",Yt+getConfig$1().state.padding).attr("height",Wt+getConfig$1().state.padding),log$1.info(Qt)}edgeCount++};let conf$2;const transformationLog={},setConf$3=function(){},insertMarkers=function(nt){nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},draw$3=function(nt,rt,it,st){conf$2=getConfig$1().state;const bt=getConfig$1().securityLevel;let xt;bt==="sandbox"&&(xt=select("#i"+rt));const Et=select(bt==="sandbox"?xt.nodes()[0].contentDocument.body:"body"),kt=bt==="sandbox"?xt.nodes()[0].contentDocument:document;log$1.debug("Rendering diagram "+nt);const Lt=Et.select(`[id='${rt}']`);insertMarkers(Lt),new Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const Rt=st.db.getRootDoc();renderDoc(Rt,Lt,void 0,!1,Et,kt,st);const Dt=conf$2.padding,Bt=Lt.node().getBBox(),Ft=Bt.width+Dt*2,Yt=Bt.height+Dt*2,Zt=Ft*1.75;configureSvgSize(Lt,Yt,Zt,conf$2.useMaxWidth),Lt.attr("viewBox",`${Bt.x-conf$2.padding}  ${Bt.y-conf$2.padding} `+Ft+" "+Yt)},getLabelWidth=nt=>nt?nt.length*conf$2.fontSizeFactor:1,renderDoc=(nt,rt,it,st,bt,xt,Et)=>{const kt=new Graph({compound:!0,multigraph:!0});let Lt,Pt=!0;for(Lt=0;Lt<nt.length;Lt++)if(nt[Lt].stmt==="relation"){Pt=!1;break}it?kt.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:Pt?1:conf$2.edgeLengthFactor,nodeSep:Pt?1:50,isMultiGraph:!0}):kt.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:Pt?1:conf$2.edgeLengthFactor,nodeSep:Pt?1:50,ranker:"tight-tree",isMultiGraph:!0}),kt.setDefaultEdgeLabel(function(){return{}}),Et.db.extract(nt);const Rt=Et.db.getStates(),Dt=Et.db.getRelations(),Bt=Object.keys(Rt);for(const Qt of Bt){const Kt=Rt[Qt];it&&(Kt.parentId=it);let on;if(Kt.doc){let nn=rt.append("g").attr("id",Kt.id).attr("class","stateGroup");on=renderDoc(Kt.doc,nn,Kt.id,!st,bt,xt,Et);{nn=addTitleAndBox(nn,Kt,st);let mn=nn.node().getBBox();on.width=mn.width,on.height=mn.height+conf$2.padding/2,transformationLog[Kt.id]={y:conf$2.compositTitleSize}}}else on=drawState(rt,Kt);if(Kt.note){const nn={descriptions:[],id:Kt.id+"-note",note:Kt.note,type:"note"},mn=drawState(rt,nn);Kt.note.position==="left of"?(kt.setNode(on.id+"-note",mn),kt.setNode(on.id,on)):(kt.setNode(on.id,on),kt.setNode(on.id+"-note",mn)),kt.setParent(on.id,on.id+"-group"),kt.setParent(on.id+"-note",on.id+"-group")}else kt.setNode(on.id,on)}log$1.debug("Count=",kt.nodeCount(),kt);let Ft=0;Dt.forEach(function(Qt){Ft++,log$1.debug("Setting edge",Qt),kt.setEdge(Qt.id1,Qt.id2,{relation:Qt,width:getLabelWidth(Qt.title),height:conf$2.labelHeight*common$1.getRows(Qt.title).length,labelpos:"c"},"id"+Ft)}),layout(kt),log$1.debug("Graph after layout",kt.nodes());const Yt=rt.node();kt.nodes().forEach(function(Qt){Qt!==void 0&&kt.node(Qt)!==void 0?(log$1.warn("Node "+Qt+": "+JSON.stringify(kt.node(Qt))),bt.select("#"+Yt.id+" #"+Qt).attr("transform","translate("+(kt.node(Qt).x-kt.node(Qt).width/2)+","+(kt.node(Qt).y+(transformationLog[Qt]?transformationLog[Qt].y:0)-kt.node(Qt).height/2)+" )"),bt.select("#"+Yt.id+" #"+Qt).attr("data-x-shift",kt.node(Qt).x-kt.node(Qt).width/2),xt.querySelectorAll("#"+Yt.id+" #"+Qt+" .divider").forEach(on=>{const nn=on.parentElement;let mn=0,gn=0;nn&&(nn.parentElement&&(mn=nn.parentElement.getBBox().width),gn=parseInt(nn.getAttribute("data-x-shift"),10),Number.isNaN(gn)&&(gn=0)),on.setAttribute("x1",0-gn+8),on.setAttribute("x2",mn-gn-8)})):log$1.debug("No Node "+Qt+": "+JSON.stringify(kt.node(Qt)))});let Zt=Yt.getBBox();kt.edges().forEach(function(Qt){Qt!==void 0&&kt.edge(Qt)!==void 0&&(log$1.debug("Edge "+Qt.v+" -> "+Qt.w+": "+JSON.stringify(kt.edge(Qt))),drawEdge(rt,kt.edge(Qt),kt.edge(Qt).relation))}),Zt=Yt.getBBox();const Wt={id:it||"root",label:it||"root",width:0,height:0};return Wt.width=Zt.width+2*conf$2.padding,Wt.height=Zt.height+2*conf$2.padding,log$1.debug("Doc rendered",Wt,kt),Wt},stateRenderer={setConf:setConf$3,draw:draw$3},SHAPE_STATE="rect",SHAPE_STATE_WITH_DESC="rectWithTitle",SHAPE_START="start",SHAPE_END="end",SHAPE_DIVIDER="divider",SHAPE_GROUP="roundedWithTitle",SHAPE_NOTE="note",SHAPE_NOTEGROUP="noteGroup",CSS_DIAGRAM="statediagram",CSS_STATE="state",CSS_DIAGRAM_STATE=`${CSS_DIAGRAM}-${CSS_STATE}`,CSS_EDGE="transition",CSS_NOTE="note",CSS_NOTE_EDGE="note-edge",CSS_EDGE_NOTE_EDGE=`${CSS_EDGE} ${CSS_NOTE_EDGE}`,CSS_DIAGRAM_NOTE=`${CSS_DIAGRAM}-${CSS_NOTE}`,CSS_CLUSTER="cluster",CSS_DIAGRAM_CLUSTER=`${CSS_DIAGRAM}-${CSS_CLUSTER}`,CSS_CLUSTER_ALT="cluster-alt",CSS_DIAGRAM_CLUSTER_ALT=`${CSS_DIAGRAM}-${CSS_CLUSTER_ALT}`,PARENT="parent",NOTE="note",DOMID_STATE="state",DOMID_TYPE_SPACER="----",NOTE_ID=`${DOMID_TYPE_SPACER}${NOTE}`,PARENT_ID=`${DOMID_TYPE_SPACER}${PARENT}`,G_EDGE_STYLE="fill:none",G_EDGE_ARROWHEADSTYLE="fill: #333",G_EDGE_LABELPOS="c",G_EDGE_LABELTYPE="text",G_EDGE_THICKNESS="normal";let nodeDb={},graphItemCount=0;const setConf$2=function(nt){const rt=Object.keys(nt);for(const it of rt)nt[it]},getClasses=function(nt,rt){log$1.trace("Extracting classes"),rt.db.clear();try{return rt.parser.parse(nt),rt.db.extract(rt.db.getRootDocV2()),rt.db.getClasses()}catch(it){return it}};function getClassesFromDbInfo(nt){return nt==null?"":nt.classes?nt.classes.join(" "):""}function stateDomId(nt="",rt=0,it="",st=DOMID_TYPE_SPACER){const bt=it!==null&&it.length>0?`${st}${it}`:"";return`${DOMID_STATE}-${nt}${bt}-${rt}`}const setupNode=(nt,rt,it,st,bt,xt)=>{const Et=it.id,kt=getClassesFromDbInfo(st[Et]);if(Et!=="root"){let Lt=SHAPE_STATE;it.start===!0&&(Lt=SHAPE_START),it.start===!1&&(Lt=SHAPE_END),it.type!==DEFAULT_STATE_TYPE&&(Lt=it.type),nodeDb[Et]||(nodeDb[Et]={id:Et,shape:Lt,description:common$1.sanitizeText(Et,getConfig$1()),classes:`${kt} ${CSS_DIAGRAM_STATE}`});const Pt=nodeDb[Et];it.description&&(Array.isArray(Pt.description)?(Pt.shape=SHAPE_STATE_WITH_DESC,Pt.description.push(it.description)):Pt.description.length>0?(Pt.shape=SHAPE_STATE_WITH_DESC,Pt.description===Et?Pt.description=[it.description]:Pt.description=[Pt.description,it.description]):(Pt.shape=SHAPE_STATE,Pt.description=it.description),Pt.description=common$1.sanitizeTextOrArray(Pt.description,getConfig$1())),Pt.description.length===1&&Pt.shape===SHAPE_STATE_WITH_DESC&&(Pt.shape=SHAPE_STATE),!Pt.type&&it.doc&&(log$1.info("Setting cluster for ",Et,getDir(it)),Pt.type="group",Pt.dir=getDir(it),Pt.shape=it.type===DIVIDER_TYPE?SHAPE_DIVIDER:SHAPE_GROUP,Pt.classes=Pt.classes+" "+CSS_DIAGRAM_CLUSTER+" "+(xt?CSS_DIAGRAM_CLUSTER_ALT:""));const Rt={labelStyle:"",shape:Pt.shape,labelText:Pt.description,classes:Pt.classes,style:"",id:Et,dir:Pt.dir,domId:stateDomId(Et,graphItemCount),type:Pt.type,padding:15};if(it.note){const Dt={labelStyle:"",shape:SHAPE_NOTE,labelText:it.note.text,classes:CSS_DIAGRAM_NOTE,style:"",id:Et+NOTE_ID+"-"+graphItemCount,domId:stateDomId(Et,graphItemCount,NOTE),type:Pt.type,padding:15},Bt={labelStyle:"",shape:SHAPE_NOTEGROUP,labelText:it.note.text,classes:Pt.classes,style:"",id:Et+PARENT_ID,domId:stateDomId(Et,graphItemCount,PARENT),type:"group",padding:0};graphItemCount++;const Ft=Et+PARENT_ID;nt.setNode(Ft,Bt),nt.setNode(Dt.id,Dt),nt.setNode(Et,Rt),nt.setParent(Et,Ft),nt.setParent(Dt.id,Ft);let Yt=Et,Zt=Dt.id;it.note.position==="left of"&&(Yt=Dt.id,Zt=Et),nt.setEdge(Yt,Zt,{arrowhead:"none",arrowType:"",style:G_EDGE_STYLE,labelStyle:"",classes:CSS_EDGE_NOTE_EDGE,arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS})}else nt.setNode(Et,Rt)}rt&&rt.id!=="root"&&(log$1.trace("Setting node ",Et," to be child of its parent ",rt.id),nt.setParent(Et,rt.id)),it.doc&&(log$1.trace("Adding nodes children "),setupDoc(nt,it,it.doc,st,bt,!xt))},setupDoc=(nt,rt,it,st,bt,xt)=>{log$1.trace("items",it),it.forEach(Et=>{switch(Et.stmt){case STMT_STATE:setupNode(nt,rt,Et,st,bt,xt);break;case DEFAULT_STATE_TYPE:setupNode(nt,rt,Et,st,bt,xt);break;case STMT_RELATION:{setupNode(nt,rt,Et.state1,st,bt,xt),setupNode(nt,rt,Et.state2,st,bt,xt);const kt={id:"edge"+graphItemCount,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:G_EDGE_STYLE,labelStyle:"",label:common$1.sanitizeText(Et.description,getConfig$1()),arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS,classes:CSS_EDGE};nt.setEdge(Et.state1.id,Et.state2.id,kt,graphItemCount),graphItemCount++}break}})},getDir=(nt,rt=DEFAULT_NESTED_DOC_DIR)=>{let it=rt;if(nt.doc)for(let st=0;st<nt.doc.length;st++){const bt=nt.doc[st];bt.stmt==="dir"&&(it=bt.value)}return it},draw$2=function(nt,rt,it,st){log$1.info("Drawing state diagram (v2)",rt),nodeDb={},st.db.getDirection();const{securityLevel:bt,state:xt}=getConfig$1(),Et=xt.nodeSpacing||50,kt=xt.rankSpacing||50;log$1.info(st.db.getRootDocV2()),st.db.extract(st.db.getRootDocV2()),log$1.info(st.db.getRootDocV2());const Lt=st.db.getStates(),Pt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:getDir(st.db.getRootDocV2()),nodesep:Et,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});setupNode(Pt,void 0,st.db.getRootDocV2(),Lt,st.db,!0);let Rt;bt==="sandbox"&&(Rt=select("#i"+rt));const Dt=select(bt==="sandbox"?Rt.nodes()[0].contentDocument.body:"body"),Bt=Dt.select(`[id="${rt}"]`),Ft=Dt.select("#"+rt+" g");render$1(Ft,Pt,["barb"],CSS_DIAGRAM,rt);const Yt=8;utils.insertTitle(Bt,"statediagramTitleText",xt.titleTopMargin,st.db.getDiagramTitle());const Zt=Bt.node().getBBox(),Wt=Zt.width+Yt*2,Qt=Zt.height+Yt*2;Bt.attr("class",CSS_DIAGRAM);const Kt=Bt.node().getBBox();configureSvgSize(Bt,Qt,Wt,xt.useMaxWidth);const on=`${Kt.x-Yt} ${Kt.y-Yt} ${Wt} ${Qt}`;log$1.debug(`viewBox ${on}`),Bt.attr("viewBox",on);const nn=document.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const mn of nn){const gn=mn.getBBox(),Tn=document.createElementNS("http://www.w3.org/2000/svg",SHAPE_STATE);Tn.setAttribute("rx",0),Tn.setAttribute("ry",0),Tn.setAttribute("width",gn.width),Tn.setAttribute("height",gn.height),mn.insertBefore(Tn,mn.firstChild)}},stateRendererV2={setConf:setConf$2,getClasses,draw:draw$2};var parser=function(){var nt=function(Zt,Wt,Qt,Kt){for(Qt=Qt||{},Kt=Zt.length;Kt--;Qt[Zt[Kt]]=Wt);return Qt},rt=[1,2],it=[1,5],st=[6,9,11,17,18,20,22,23,24,26],bt=[1,15],xt=[1,16],Et=[1,17],kt=[1,18],Lt=[1,19],Pt=[1,20],Rt=[1,24],Dt=[4,6,9,11,17,18,20,22,23,24,26],Bt={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(Wt,Qt,Kt,on,nn,mn,gn){var Tn=mn.length-1;switch(nn){case 1:return mn[Tn-1];case 3:this.$=[];break;case 4:mn[Tn-1].push(mn[Tn]),this.$=mn[Tn-1];break;case 5:case 6:this.$=mn[Tn];break;case 7:case 8:this.$=[];break;case 11:on.setDiagramTitle(mn[Tn].substr(6)),this.$=mn[Tn].substr(6);break;case 12:this.$=mn[Tn].trim(),on.setAccTitle(this.$);break;case 13:case 14:this.$=mn[Tn].trim(),on.setAccDescription(this.$);break;case 15:on.addSection(mn[Tn].substr(8)),this.$=mn[Tn].substr(8);break;case 16:on.addTask(mn[Tn-1],mn[Tn]),this.$="task";break;case 18:on.parseDirective("%%{","open_directive");break;case 19:on.parseDirective(mn[Tn],"type_directive");break;case 20:mn[Tn]=mn[Tn].trim().replace(/'/g,'"'),on.parseDirective(mn[Tn],"arg_directive");break;case 21:on.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:rt,7:3,12:4,26:it},{1:[3]},nt(st,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,26:it},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:bt,18:xt,20:Et,22:kt,23:Lt,24:Pt,26:it},{1:[2,2]},{14:22,15:[1,23],29:Rt},nt([15,29],[2,19]),nt(st,[2,8],{1:[2,1]}),nt(st,[2,4]),{7:21,10:25,12:4,17:bt,18:xt,20:Et,22:kt,23:Lt,24:Pt,26:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,11]),{19:[1,26]},{21:[1,27]},nt(st,[2,14]),nt(st,[2,15]),{25:[1,28]},nt(st,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},nt(st,[2,5]),nt(st,[2,12]),nt(st,[2,13]),nt(st,[2,16]),nt(Dt,[2,9]),{14:32,29:Rt},{29:[2,20]},{11:[1,33]},nt(Dt,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(Wt,Qt){if(Qt.recoverable)this.trace(Wt);else{var Kt=new Error(Wt);throw Kt.hash=Qt,Kt}},parse:function(Wt){var Qt=this,Kt=[0],on=[],nn=[null],mn=[],gn=this.table,Tn="",An=0,kn=0,Mn=2,$n=1,cn=mn.slice.call(arguments,1),Sn=Object.create(this.lexer),an={yy:{}};for(var jn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,jn)&&(an.yy[jn]=this.yy[jn]);Sn.setInput(Wt,an.yy),an.yy.lexer=Sn,an.yy.parser=this,typeof Sn.yylloc>"u"&&(Sn.yylloc={});var hn=Sn.yylloc;mn.push(hn);var zn=Sn.options&&Sn.options.ranges;typeof an.yy.parseError=="function"?this.parseError=an.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ir(){var _r;return _r=on.pop()||Sn.lex()||$n,typeof _r!="number"&&(_r instanceof Array&&(on=_r,_r=on.pop()),_r=Qt.symbols_[_r]||_r),_r}for(var tr,nr,dr,or,ur={},Cr,Sr,rr,Fr;;){if(nr=Kt[Kt.length-1],this.defaultActions[nr]?dr=this.defaultActions[nr]:((tr===null||typeof tr>"u")&&(tr=ir()),dr=gn[nr]&&gn[nr][tr]),typeof dr>"u"||!dr.length||!dr[0]){var mr="";Fr=[];for(Cr in gn[nr])this.terminals_[Cr]&&Cr>Mn&&Fr.push("'"+this.terminals_[Cr]+"'");Sn.showPosition?mr="Parse error on line "+(An+1)+`:
`+Sn.showPosition()+`
Expecting `+Fr.join(", ")+", got '"+(this.terminals_[tr]||tr)+"'":mr="Parse error on line "+(An+1)+": Unexpected "+(tr==$n?"end of input":"'"+(this.terminals_[tr]||tr)+"'"),this.parseError(mr,{text:Sn.match,token:this.terminals_[tr]||tr,line:Sn.yylineno,loc:hn,expected:Fr})}if(dr[0]instanceof Array&&dr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+nr+", token: "+tr);switch(dr[0]){case 1:Kt.push(tr),nn.push(Sn.yytext),mn.push(Sn.yylloc),Kt.push(dr[1]),tr=null,kn=Sn.yyleng,Tn=Sn.yytext,An=Sn.yylineno,hn=Sn.yylloc;break;case 2:if(Sr=this.productions_[dr[1]][1],ur.$=nn[nn.length-Sr],ur._$={first_line:mn[mn.length-(Sr||1)].first_line,last_line:mn[mn.length-1].last_line,first_column:mn[mn.length-(Sr||1)].first_column,last_column:mn[mn.length-1].last_column},zn&&(ur._$.range=[mn[mn.length-(Sr||1)].range[0],mn[mn.length-1].range[1]]),or=this.performAction.apply(ur,[Tn,kn,An,an.yy,dr[1],nn,mn].concat(cn)),typeof or<"u")return or;Sr&&(Kt=Kt.slice(0,-1*Sr*2),nn=nn.slice(0,-1*Sr),mn=mn.slice(0,-1*Sr)),Kt.push(this.productions_[dr[1]][0]),nn.push(ur.$),mn.push(ur._$),rr=gn[Kt[Kt.length-2]][Kt[Kt.length-1]],Kt.push(rr);break;case 3:return!0}}return!0}},Ft=function(){var Zt={EOF:1,parseError:function(Qt,Kt){if(this.yy.parser)this.yy.parser.parseError(Qt,Kt);else throw new Error(Qt)},setInput:function(Wt,Qt){return this.yy=Qt||this.yy||{},this._input=Wt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Wt=this._input[0];this.yytext+=Wt,this.yyleng++,this.offset++,this.match+=Wt,this.matched+=Wt;var Qt=Wt.match(/(?:\r\n?|\n).*/g);return Qt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Wt},unput:function(Wt){var Qt=Wt.length,Kt=Wt.split(/(?:\r\n?|\n)/g);this._input=Wt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Qt),this.offset-=Qt;var on=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Kt.length-1&&(this.yylineno-=Kt.length-1);var nn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Kt?(Kt.length===on.length?this.yylloc.first_column:0)+on[on.length-Kt.length].length-Kt[0].length:this.yylloc.first_column-Qt},this.options.ranges&&(this.yylloc.range=[nn[0],nn[0]+this.yyleng-Qt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Wt){this.unput(this.match.slice(Wt))},pastInput:function(){var Wt=this.matched.substr(0,this.matched.length-this.match.length);return(Wt.length>20?"...":"")+Wt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Wt=this.match;return Wt.length<20&&(Wt+=this._input.substr(0,20-Wt.length)),(Wt.substr(0,20)+(Wt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Wt=this.pastInput(),Qt=new Array(Wt.length+1).join("-");return Wt+this.upcomingInput()+`
`+Qt+"^"},test_match:function(Wt,Qt){var Kt,on,nn;if(this.options.backtrack_lexer&&(nn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(nn.yylloc.range=this.yylloc.range.slice(0))),on=Wt[0].match(/(?:\r\n?|\n).*/g),on&&(this.yylineno+=on.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:on?on[on.length-1].length-on[on.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Wt[0].length},this.yytext+=Wt[0],this.match+=Wt[0],this.matches=Wt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Wt[0].length),this.matched+=Wt[0],Kt=this.performAction.call(this,this.yy,this,Qt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Kt)return Kt;if(this._backtrack){for(var mn in nn)this[mn]=nn[mn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Wt,Qt,Kt,on;this._more||(this.yytext="",this.match="");for(var nn=this._currentRules(),mn=0;mn<nn.length;mn++)if(Kt=this._input.match(this.rules[nn[mn]]),Kt&&(!Qt||Kt[0].length>Qt[0].length)){if(Qt=Kt,on=mn,this.options.backtrack_lexer){if(Wt=this.test_match(Kt,nn[mn]),Wt!==!1)return Wt;if(this._backtrack){Qt=!1;continue}else return!1}else if(!this.options.flex)break}return Qt?(Wt=this.test_match(Qt,nn[on]),Wt!==!1?Wt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Qt=this.next();return Qt||this.lex()},begin:function(Qt){this.conditionStack.push(Qt)},popState:function(){var Qt=this.conditionStack.length-1;return Qt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Qt){return Qt=this.conditionStack.length-1-Math.abs(Qt||0),Qt>=0?this.conditionStack[Qt]:"INITIAL"},pushState:function(Qt){this.begin(Qt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Qt,Kt,on,nn){switch(on){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return Zt}();Bt.lexer=Ft;function Yt(){this.yy={}}return Yt.prototype=Bt,Bt.Parser=Yt,new Yt}();parser.parser=parser;const journeyParser=parser,journeyDetector=nt=>nt.match(/^\s*journey/)!==null;let currentSection="";const sections=[],tasks=[],rawTasks=[],parseDirective=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear=function(){sections.length=0,tasks.length=0,currentSection="",rawTasks.length=0,clear$g()},addSection=function(nt){currentSection=nt,sections.push(nt)},getSections=function(){return sections},getTasks=function(){let nt=compileTasks();const rt=100;let it=0;for(;!nt&&it<rt;)nt=compileTasks(),it++;return tasks.push(...rawTasks),tasks},updateActors=function(){const nt=[];return tasks.forEach(it=>{it.people&&nt.push(...it.people)}),[...new Set(nt)].sort()},addTask=function(nt,rt){const it=rt.substr(1).split(":");let st=0,bt=[];it.length===1?(st=Number(it[0]),bt=[]):(st=Number(it[0]),bt=it[1].split(","));const xt=bt.map(kt=>kt.trim()),Et={section:currentSection,type:currentSection,people:xt,task:nt,score:st};rawTasks.push(Et)},addTaskOrg=function(nt){const rt={section:currentSection,type:currentSection,description:nt,task:nt,classes:[]};tasks.push(rt)},compileTasks=function(){const nt=function(it){return rawTasks[it].processed};let rt=!0;for(const[it,st]of rawTasks.entries())nt(it),rt=rt&&st.processed;return rt},getActors=function(){return updateActors()},journeyDb={parseDirective,getConfig:()=>getConfig$1().journey,clear,setDiagramTitle,getDiagramTitle,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addSection,getSections,getTasks,addTask,addTaskOrg,getActors},drawRect=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},drawFace=function(nt,rt){const st=nt.append("circle").attr("cx",rt.cx).attr("cy",rt.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),bt=nt.append("g");bt.append("circle").attr("cx",rt.cx-15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),bt.append("circle").attr("cx",rt.cx+15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function xt(Lt){const Pt=arc().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",Pt).attr("transform","translate("+rt.cx+","+(rt.cy+2)+")")}function Et(Lt){const Pt=arc().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",Pt).attr("transform","translate("+rt.cx+","+(rt.cy+7)+")")}function kt(Lt){Lt.append("line").attr("class","mouth").attr("stroke",2).attr("x1",rt.cx-5).attr("y1",rt.cy+7).attr("x2",rt.cx+5).attr("y2",rt.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return rt.score>3?xt(bt):rt.score<3?Et(bt):kt(bt),st},drawCircle=function(nt,rt){const it=nt.append("circle");return it.attr("cx",rt.cx),it.attr("cy",rt.cy),it.attr("class","actor-"+rt.pos),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("r",rt.r),it.class!==void 0&&it.attr("class",it.class),rt.title!==void 0&&it.append("title").text(rt.title),it},drawText=function(nt,rt){const it=rt.text.replace(/<br\s*\/?>/gi," "),st=nt.append("text");st.attr("x",rt.x),st.attr("y",rt.y),st.attr("class","legend"),st.style("text-anchor",rt.anchor),rt.class!==void 0&&st.attr("class",rt.class);const bt=st.append("tspan");return bt.attr("x",rt.x+rt.textMargin*2),bt.text(it),st},drawLabel=function(nt,rt){function it(bt,xt,Et,kt,Lt){return bt+","+xt+" "+(bt+Et)+","+xt+" "+(bt+Et)+","+(xt+kt-Lt)+" "+(bt+Et-Lt*1.2)+","+(xt+kt)+" "+bt+","+(xt+kt)}const st=nt.append("polygon");st.attr("points",it(rt.x,rt.y,50,20,7)),st.attr("class","labelBox"),rt.y=rt.y+rt.labelMargin,rt.x=rt.x+.5*rt.labelMargin,drawText(nt,rt)},drawSection=function(nt,rt,it){const st=nt.append("g"),bt=getNoteRect();bt.x=rt.x,bt.y=rt.y,bt.fill=rt.fill,bt.width=it.width,bt.height=it.height,bt.class="journey-section section-type-"+rt.num,bt.rx=3,bt.ry=3,drawRect(st,bt),_drawTextCandidateFunc(it)(rt.text,st,bt.x,bt.y,bt.width,bt.height,{class:"journey-section section-type-"+rt.num},it,rt.colour)};let taskCount=-1;const drawTask=function(nt,rt,it){const st=rt.x+it.width/2,bt=nt.append("g");taskCount++;const xt=300+5*30;bt.append("line").attr("id","task"+taskCount).attr("x1",st).attr("y1",rt.y).attr("x2",st).attr("y2",xt).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),drawFace(bt,{cx:st,cy:300+(5-rt.score)*30,score:rt.score});const Et=getNoteRect();Et.x=rt.x,Et.y=rt.y,Et.fill=rt.fill,Et.width=it.width,Et.height=it.height,Et.class="task task-type-"+rt.num,Et.rx=3,Et.ry=3,drawRect(bt,Et);let kt=rt.x+14;rt.people.forEach(Lt=>{const Pt=rt.actors[Lt].color,Rt={cx:kt,cy:rt.y,r:7,fill:Pt,stroke:"#000",title:Lt,pos:rt.actors[Lt].position};drawCircle(bt,Rt),kt+=10}),_drawTextCandidateFunc(it)(rt.task,bt,Et.x,Et.y,Et.width,Et.height,{class:"task"},it,rt.colour)},drawBackgroundRect=function(nt,rt){drawRect(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,class:"rect"}).lower()},getTextObj=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},getNoteRect=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc=function(){function nt(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const Bt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt+Pt/2+5).style("font-color",Dt).style("text-anchor","middle").text(bt);st(Bt,Rt)}function rt(bt,xt,Et,kt,Lt,Pt,Rt,Dt,Bt){const{taskFontSize:Ft,taskFontFamily:Yt}=Dt,Zt=bt.split(/<br\s*\/?>/gi);for(let Wt=0;Wt<Zt.length;Wt++){const Qt=Wt*Ft-Ft*(Zt.length-1)/2,Kt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt).attr("fill",Bt).style("text-anchor","middle").style("font-size",Ft).style("font-family",Yt);Kt.append("tspan").attr("x",Et+Lt/2).attr("dy",Qt).text(Zt[Wt]),Kt.attr("y",kt+Pt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(Kt,Rt)}}function it(bt,xt,Et,kt,Lt,Pt,Rt,Dt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",Pt).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(bt),rt(bt,Bt,Et,kt,Lt,Pt,Rt,Dt),st(Yt,Rt)}function st(bt,xt){for(const Et in xt)Et in xt&&bt.attr(Et,xt[Et])}return function(bt){return bt.textPlacement==="fo"?it:bt.textPlacement==="old"?nt:rt}}(),initGraphics=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},svgDraw={drawRect,drawCircle,drawSection,drawText,drawLabel,drawTask,drawBackgroundRect,getTextObj,getNoteRect,initGraphics},setConf$1=function(nt){Object.keys(nt).forEach(function(it){conf$1[it]=nt[it]})},actors={};function drawActorLegend(nt){const rt=getConfig$1().journey;let it=60;Object.keys(actors).forEach(st=>{const bt=actors[st].color,xt={cx:20,cy:it,r:7,fill:bt,stroke:"#000",pos:actors[st].position};svgDraw.drawCircle(nt,xt);const Et={x:40,y:it+7,fill:"#666",text:st,textMargin:rt.boxTextMargin|5};svgDraw.drawText(nt,Et),it+=20})}const conf$1=getConfig$1().journey,LEFT_MARGIN=conf$1.leftMargin,draw$1=function(nt,rt,it,st){const bt=getConfig$1().journey;st.db.clear(),st.parser.parse(nt+`
`);const xt=getConfig$1().securityLevel;let Et;xt==="sandbox"&&(Et=select("#i"+rt));const kt=select(xt==="sandbox"?Et.nodes()[0].contentDocument.body:"body");bounds.init();const Lt=kt.select("#"+rt);svgDraw.initGraphics(Lt);const Pt=st.db.getTasks(),Rt=st.db.getDiagramTitle(),Dt=st.db.getActors();for(const Qt in actors)delete actors[Qt];let Bt=0;Dt.forEach(Qt=>{actors[Qt]={color:bt.actorColours[Bt%bt.actorColours.length],position:Bt},Bt++}),drawActorLegend(Lt),bounds.insert(0,0,LEFT_MARGIN,Object.keys(actors).length*50),drawTasks(Lt,Pt,0);const Ft=bounds.getBounds();Rt&&Lt.append("text").text(Rt).attr("x",LEFT_MARGIN).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const Yt=Ft.stopy-Ft.starty+2*bt.diagramMarginY,Zt=LEFT_MARGIN+Ft.stopx+2*bt.diagramMarginX;configureSvgSize(Lt,Yt,Zt,bt.useMaxWidth),Lt.append("line").attr("x1",LEFT_MARGIN).attr("y1",bt.height*4).attr("x2",Zt-LEFT_MARGIN-4).attr("y2",bt.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const Wt=Rt?70:0;Lt.attr("viewBox",`${Ft.startx} -25 ${Zt} ${Yt+Wt}`),Lt.attr("preserveAspectRatio","xMinYMin meet"),Lt.attr("height",Yt+Wt+25)},bounds={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(nt,rt,it,st){nt[rt]===void 0?nt[rt]=it:nt[rt]=st(it,nt[rt])},updateBounds:function(nt,rt,it,st){const bt=getConfig$1().journey,xt=this;let Et=0;function kt(Lt){return function(Rt){Et++;const Dt=xt.sequenceItems.length-Et+1;xt.updateVal(Rt,"starty",rt-Dt*bt.boxMargin,Math.min),xt.updateVal(Rt,"stopy",st+Dt*bt.boxMargin,Math.max),xt.updateVal(bounds.data,"startx",nt-Dt*bt.boxMargin,Math.min),xt.updateVal(bounds.data,"stopx",it+Dt*bt.boxMargin,Math.max),Lt!=="activation"&&(xt.updateVal(Rt,"startx",nt-Dt*bt.boxMargin,Math.min),xt.updateVal(Rt,"stopx",it+Dt*bt.boxMargin,Math.max),xt.updateVal(bounds.data,"starty",rt-Dt*bt.boxMargin,Math.min),xt.updateVal(bounds.data,"stopy",st+Dt*bt.boxMargin,Math.max))}}this.sequenceItems.forEach(kt())},insert:function(nt,rt,it,st){const bt=Math.min(nt,it),xt=Math.max(nt,it),Et=Math.min(rt,st),kt=Math.max(rt,st);this.updateVal(bounds.data,"startx",bt,Math.min),this.updateVal(bounds.data,"starty",Et,Math.min),this.updateVal(bounds.data,"stopx",xt,Math.max),this.updateVal(bounds.data,"stopy",kt,Math.max),this.updateBounds(bt,Et,xt,kt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},fills=conf$1.sectionFills,textColours=conf$1.sectionColours,drawTasks=function(nt,rt,it){const st=getConfig$1().journey;let bt="";const xt=st.height*2+st.diagramMarginY,Et=it+xt;let kt=0,Lt="#CCC",Pt="black",Rt=0;for(const[Dt,Bt]of rt.entries()){if(bt!==Bt.section){Lt=fills[kt%fills.length],Rt=kt%fills.length,Pt=textColours[kt%textColours.length];const Yt={x:Dt*st.taskMargin+Dt*st.width+LEFT_MARGIN,y:50,text:Bt.section,fill:Lt,num:Rt,colour:Pt};svgDraw.drawSection(nt,Yt,st),bt=Bt.section,kt++}const Ft=Bt.people.reduce((Yt,Zt)=>(actors[Zt]&&(Yt[Zt]=actors[Zt]),Yt),{});Bt.x=Dt*st.taskMargin+Dt*st.width+LEFT_MARGIN,Bt.y=Et,Bt.width=st.diagramMarginX,Bt.height=st.diagramMarginY,Bt.colour=Pt,Bt.fill=Lt,Bt.num=Rt,Bt.actors=Ft,svgDraw.drawTask(nt,Bt,st),bounds.insert(Bt.x,Bt.y,Bt.x+Bt.width+st.taskMargin,300+5*30)}},journeyRenderer={setConf:setConf$1,draw:draw$1};let conf={};const setConf=function(nt){conf={...conf,...nt}},draw=(nt,rt,it)=>{try{log$1.debug(`Renering svg for syntax error
`);const st=select("#"+rt),bt=st.append("g");bt.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),bt.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),bt.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),bt.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),bt.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),bt.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),bt.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),bt.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+it),st.attr("height",100),st.attr("width",500),st.attr("viewBox","768 0 912 512")}catch(st){log$1.error("Error while rendering info diagram"),log$1.error(getErrorMessage(st))}},errorRenderer={setConf,draw},id$2="flowchart-elk",detector$2=(nt,rt)=>{var it;return!!(nt.match(/^\s*flowchart-elk/)||nt.match(/^\s*flowchart|graph/)&&((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="elk")},loader$2=async()=>{const{diagram:nt}=await __vitePreload(()=>import("./flowchart-elk-definition-170a3958-1d6fbc1b.js"),[]);return{id:id$2,diagram:nt}},plugin$2={id:id$2,detector:detector$2,loader:loader$2},flowchartElk=plugin$2,id$1$1="timeline",detector$1=nt=>nt.match(/^\s*timeline/)!==null,loader$1=async()=>{const{diagram:nt}=await __vitePreload(()=>import("./timeline-definition-8e5a9bc6-25c1b7f2.js"),["js/timeline-definition-8e5a9bc6-25c1b7f2.js","js/is_dark-29198c61.js"]);return{id:id$1$1,diagram:nt}},plugin$1={id:id$1$1,detector:detector$1,loader:loader$1},timelineDetector=plugin$1,id$3="mindmap",detector=nt=>nt.match(/^\s*mindmap/)!==null,loader=async()=>{const{diagram:nt}=await __vitePreload(()=>import("./mindmap-definition-44684416-d4bf0dd8.js"),["js/mindmap-definition-44684416-d4bf0dd8.js","js/is_dark-29198c61.js"]);return{id:id$3,diagram:nt}},plugin={id:id$3,detector,loader},mindmapDetector=plugin;let hasLoadedDiagrams=!1;const addDiagrams=()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerLazyLoadedDiagrams(flowchartElk,timelineDetector,mindmapDetector),registerDiagram("error",{db:{clear:()=>{}},styles:errorStyles,renderer:errorRenderer,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},nt=>nt.toLowerCase().trim()==="error"),registerDiagram("---",{db:{clear:()=>{}},styles:errorStyles,renderer:errorRenderer,parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with unindented `---` blocks")}},init:()=>null},nt=>nt.toLowerCase().trimStart().startsWith("---")),registerDiagram("c4",{parser:c4Parser,db:c4Db,renderer:c4Renderer,styles:c4Styles,init:nt=>{c4Renderer.setConf(nt.c4)}},c4Detector),registerDiagram("class",{parser:classParser,db:classDb,renderer:classRenderer,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetector),registerDiagram("classDiagram",{parser:classParser,db:classDb,renderer:classRendererV2,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetectorV2),registerDiagram("er",{parser:erParser,db:erDb,renderer:erRenderer,styles:erStyles},erDetector),registerDiagram("gantt",{parser:ganttParser,db:ganttDb,renderer:ganttRenderer,styles:ganttStyles},ganttDetector),registerDiagram("info",{parser:infoParser,db:infoDb,renderer:infoRenderer,styles:infoStyles},infoDetector),registerDiagram("pie",{parser:pieParser,db:pieDb,renderer:pieRenderer,styles:pieStyles},pieDetector),registerDiagram("requirement",{parser:requirementParser,db:requirementDb,renderer:requirementRenderer,styles:requirementStyles},requirementDetector),registerDiagram("sequence",{parser:sequenceParser,db:sequenceDb,renderer:sequenceRenderer,styles:sequenceStyles,init:nt=>{if(nt.sequence||(nt.sequence={}),nt.sequence.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,"sequenceDiagram"in nt)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");sequenceDb.setWrap(nt.wrap),sequenceRenderer.setConf(nt.sequence)}},sequenceDetector),registerDiagram("state",{parser:stateParser,db:stateDb,renderer:stateRenderer,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetector),registerDiagram("stateDiagram",{parser:stateParser,db:stateDb,renderer:stateRendererV2,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetectorV2),registerDiagram("journey",{parser:journeyParser,db:journeyDb,renderer:journeyRenderer,styles:journeyStyles,init:nt=>{journeyRenderer.setConf(nt.journey),journeyDb.clear()}},journeyDetector),registerDiagram("flowchart",{parser:parser$8,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,flowRenderer.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-1")}},flowDetector),registerDiagram("flowchart-v2",{parser:parser$8,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,setConfig({flowchart:{arrowMarkerAbsolute:nt.arrowMarkerAbsolute}}),flowRendererV2.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-2")}},flowDetectorV2),registerDiagram("gitGraph",{parser:gitGraphParser,db:gitGraphDb,renderer:gitGraphRenderer,styles:gitGraphStyles},gitGraphDetector))};class Diagram{constructor(rt,it){var st,bt;this.txt=rt,this.type="graph",this.detectTypeFailed=!1;const xt=getConfig$1();this.txt=rt;try{this.type=detectType(rt,xt)}catch(Lt){this.handleError(Lt,it),this.type="error",this.detectTypeFailed=!0}const Et=getDiagram(this.type);log$1.debug("Type "+this.type),this.db=Et.db,(bt=(st=this.db).clear)==null||bt.call(st),this.renderer=Et.renderer,this.parser=Et.parser;const kt=this.parser.parse.bind(this.parser);this.parser.parse=Lt=>kt(extractFrontMatter(Lt,this.db)),this.parser.parser.yy=this.db,Et.init&&(Et.init(xt),log$1.info("Initialized diagram "+this.type,xt)),this.txt+=`
`,this.parse(this.txt,it)}parse(rt,it){var st,bt;if(this.detectTypeFailed)return!1;try{return rt=rt+`
`,(bt=(st=this.db).clear)==null||bt.call(st),this.parser.parse(rt),!0}catch(xt){this.handleError(xt,it)}return!1}handleError(rt,it){if(it===void 0)throw rt;if(isDetailedError(rt)){it(rt.str,rt.hash);return}it(rt)}getParser(){return this.parser}getType(){return this.type}}const getDiagramFromText=(nt,rt)=>{const it=detectType(nt,getConfig$1());try{getDiagram(it)}catch{const bt=getDiagramLoader(it);if(!bt)throw new Error(`Diagram ${it} not found.`);return bt().then(({diagram:xt})=>(registerDiagram(it,xt,void 0),new Diagram(nt,rt)))}return new Diagram(nt,rt)},Diagram$1=Diagram,SVG_ROLE="graphics-document document";function setA11yDiagramInfo(nt,rt){nt.attr("role",SVG_ROLE),isEmpty(rt)||nt.attr("aria-roledescription",rt)}function addSVGa11yTitleDescription(nt,rt,it,st){if(nt.insert!==void 0)if(rt||it){if(it){const bt="chart-desc-"+st;nt.attr("aria-describedby",bt),nt.insert("desc",":first-child").attr("id",bt).text(it)}if(rt){const bt="chart-title-"+st;nt.attr("aria-labelledby",bt),nt.insert("title",":first-child").attr("id",bt).text(rt)}}else return}const CLASSDEF_DIAGRAMS=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],MAX_TEXTLENGTH_EXCEEDED_MSG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",SECURITY_LVL_SANDBOX="sandbox",SECURITY_LVL_LOOSE="loose",XMLNS_SVG_STD="http://www.w3.org/2000/svg",XMLNS_XLINK_STD="http://www.w3.org/1999/xlink",XMLNS_XHTML_STD="http://www.w3.org/1999/xhtml",IFRAME_WIDTH="100%",IFRAME_HEIGHT="100%",IFRAME_STYLES="border:0;margin:0;",IFRAME_BODY_STYLE="margin:0",IFRAME_SANDBOX_OPTS="allow-top-navigation-by-user-activation allow-popups",IFRAME_NOT_SUPPORTED_MSG='The "iframe" tag is not supported by your browser.',DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function parse$1(nt,rt){return addDiagrams(),new Diagram$1(nt,rt).parse(nt,rt)}async function parseAsync$1(nt,rt){return addDiagrams(),(await getDiagramFromText(nt,rt)).parse(nt,rt)}const encodeEntities=function(nt){let rt=nt;return rt=rt.replace(/style.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/classDef.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/#\w+;/g,function(it){const st=it.substring(1,it.length-1);return/^\+?\d+$/.test(st)?"\uFB02\xB0\xB0"+st+"\xB6\xDF":"\uFB02\xB0"+st+"\xB6\xDF"}),rt},decodeEntities=function(nt){let rt=nt;return rt=rt.replace(//g,"&#"),rt=rt.replace(//g,"&"),rt=rt.replace(//g,";"),rt},cssImportantStyles=(nt,rt,it=[])=>`
.${nt} ${rt} { ${it.join(" !important; ")} !important; }`,createCssStyles=(nt,rt,it={})=>{var st;let bt="";if(nt.themeCSS!==void 0&&(bt+=`
${nt.themeCSS}`),nt.fontFamily!==void 0&&(bt+=`
:root { --mermaid-font-family: ${nt.fontFamily}}`),nt.altFontFamily!==void 0&&(bt+=`
:root { --mermaid-alt-font-family: ${nt.altFontFamily}}`),!isEmpty(it)&&CLASSDEF_DIAGRAMS.includes(rt)){const Lt=nt.htmlLabels||((st=nt.flowchart)==null?void 0:st.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const Pt in it){const Rt=it[Pt];isEmpty(Rt.styles)||Lt.forEach(Dt=>{bt+=cssImportantStyles(Rt.id,Dt,Rt.styles)}),isEmpty(Rt.textStyles)||(bt+=cssImportantStyles(Rt.id,"tspan",Rt.textStyles))}}return bt},createUserStyles=(nt,rt,it,st)=>{const bt=createCssStyles(nt,rt,it),xt=getStyles$2(rt,bt,nt.themeVariables);return serialize(compile(`${st}{${xt}}`),stringify)},cleanUpSvgCode=(nt="",rt,it)=>{let st=nt;return!it&&!rt&&(st=st.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),st=decodeEntities(st),st=st.replace(/<br>/g,"<br/>"),st},putIntoIFrame=(nt="",rt)=>{const it=rt?rt.viewBox.baseVal.height+"px":IFRAME_HEIGHT,st=btoa('<body style="'+IFRAME_BODY_STYLE+'">'+nt+"</body>");return`<iframe style="width:${IFRAME_WIDTH};height:${it};${IFRAME_STYLES}" src="data:text/html;base64,${st}" sandbox="${IFRAME_SANDBOX_OPTS}">
  ${IFRAME_NOT_SUPPORTED_MSG}
</iframe>`},appendDivSvgG=(nt,rt,it,st,bt)=>{const xt=nt.append("div");xt.attr("id",it),st&&xt.attr("style",st);const Et=xt.append("svg").attr("id",rt).attr("width","100%").attr("xmlns",XMLNS_SVG_STD);return bt&&Et.attr("xmlns:xlink",bt),Et.append("g"),nt};function sandboxedIframe(nt,rt){return nt.append("iframe").attr("id",rt).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const removeExistingElements=(nt,rt,it,st)=>{var bt,xt,Et;(bt=nt.getElementById(rt))==null||bt.remove(),(xt=nt.getElementById(it))==null||xt.remove(),(Et=nt.getElementById(st))==null||Et.remove()},render=function(nt,rt,it,st){var ir;var bt,xt,Et,kt;addDiagrams(),reset();const Lt=utils.detectInit(rt);Lt&&(directiveSanitizer(Lt),addDirective(Lt));const Pt=getConfig$1();log$1.debug(Pt),rt.length>((ir=Pt==null?void 0:Pt.maxTextSize)!=null?ir:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const Rt="#"+nt,Dt="i"+nt,Bt="#"+Dt,Ft="d"+nt,Yt="#"+Ft;let Zt=select("body");const Wt=Pt.securityLevel===SECURITY_LVL_SANDBOX,Qt=Pt.securityLevel===SECURITY_LVL_LOOSE,Kt=Pt.fontFamily;if(st!==void 0){if(st&&(st.innerHTML=""),Wt){const tr=sandboxedIframe(select(st),Dt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select(st);appendDivSvgG(Zt,nt,Ft,`font-family: ${Kt}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Ft,Dt),Wt){const tr=sandboxedIframe(select("body"),Dt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select("body");appendDivSvgG(Zt,nt,Ft)}rt=encodeEntities(rt);let on,nn;try{if(on=getDiagramFromText(rt),"then"in on)throw new Error("Diagram is a promise. Use renderAsync.")}catch(tr){on=new Diagram$1("error"),nn=tr}const mn=Zt.select(Yt).node(),gn=on.type,Tn=mn.firstChild,An=Tn.firstChild,kn=CLASSDEF_DIAGRAMS.includes(gn)?on.renderer.getClasses(rt,on):{},Mn=createUserStyles(Pt,gn,kn,Rt),$n=document.createElement("style");$n.innerHTML=Mn,Tn.insertBefore($n,An);try{on.renderer.draw(rt,nt,version$1,on)}catch(tr){throw errorRenderer.draw(rt,nt,version$1),tr}const cn=Zt.select(`${Yt} svg`),Sn=(xt=(bt=on.db).getAccTitle)==null?void 0:xt.call(bt),an=(kt=(Et=on.db).getAccDescription)==null?void 0:kt.call(Et);addA11yInfo(gn,cn,Sn,an),Zt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let jn=Zt.select(Yt).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",Pt.arrowMarkerAbsolute),jn=cleanUpSvgCode(jn,Wt,evaluate(Pt.arrowMarkerAbsolute)),Wt){const tr=Zt.select(Yt+" svg").node();jn=putIntoIFrame(jn,tr)}else Qt||(jn=purify.sanitize(jn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(gn){case"flowchart":case"flowchart-v2":it(jn,flowDb.bindFunctions);break;case"gantt":it(jn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(jn,classDb.bindFunctions);break;default:it(jn)}else log$1.debug("CB = undefined!");attachFunctions();const zn=select(Wt?Bt:Yt).node();if(zn&&"remove"in zn&&zn.remove(),nn)throw nn;return jn},renderAsync$1=async function(nt,rt,it,st){var ir;var bt,xt,Et,kt;addDiagrams(),reset();const Lt=utils.detectInit(rt);Lt&&(directiveSanitizer(Lt),addDirective(Lt));const Pt=getConfig$1();log$1.debug(Pt),rt.length>((ir=Pt==null?void 0:Pt.maxTextSize)!=null?ir:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const Rt="#"+nt,Dt="i"+nt,Bt="#"+Dt,Ft="d"+nt,Yt="#"+Ft;let Zt=select("body");const Wt=Pt.securityLevel===SECURITY_LVL_SANDBOX,Qt=Pt.securityLevel===SECURITY_LVL_LOOSE,Kt=Pt.fontFamily;if(st!==void 0){if(st&&(st.innerHTML=""),Wt){const tr=sandboxedIframe(select(st),Dt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select(st);appendDivSvgG(Zt,nt,Ft,`font-family: ${Kt}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Ft,Dt),Wt){const tr=sandboxedIframe(select("body"),Dt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select("body");appendDivSvgG(Zt,nt,Ft)}rt=encodeEntities(rt);let on,nn;try{on=await getDiagramFromText(rt)}catch(tr){on=new Diagram$1("error"),nn=tr}const mn=Zt.select(Yt).node(),gn=on.type,Tn=mn.firstChild,An=Tn.firstChild,kn=CLASSDEF_DIAGRAMS.includes(gn)?on.renderer.getClasses(rt,on):{},Mn=createUserStyles(Pt,gn,kn,Rt),$n=document.createElement("style");$n.innerHTML=Mn,Tn.insertBefore($n,An);try{await on.renderer.draw(rt,nt,version$1,on)}catch(tr){throw errorRenderer.draw(rt,nt,version$1),tr}const cn=Zt.select(`${Yt} svg`),Sn=(xt=(bt=on.db).getAccTitle)==null?void 0:xt.call(bt),an=(kt=(Et=on.db).getAccDescription)==null?void 0:kt.call(Et);addA11yInfo(gn,cn,Sn,an),Zt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let jn=Zt.select(Yt).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",Pt.arrowMarkerAbsolute),jn=cleanUpSvgCode(jn,Wt,evaluate(Pt.arrowMarkerAbsolute)),Wt){const tr=Zt.select(Yt+" svg").node();jn=putIntoIFrame(jn,tr)}else Qt||(jn=purify.sanitize(jn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(gn){case"flowchart":case"flowchart-v2":it(jn,flowDb.bindFunctions);break;case"gantt":it(jn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(jn,classDb.bindFunctions);break;default:it(jn)}else log$1.debug("CB = undefined!");attachFunctions();const zn=select(Wt?Bt:Yt).node();if(zn&&"remove"in zn&&zn.remove(),nn)throw nn;return jn};function initialize$1(nt={}){var rt;(nt==null?void 0:nt.fontFamily)&&!((rt=nt.themeVariables)!=null&&rt.fontFamily)&&(nt.themeVariables={fontFamily:nt.fontFamily}),saveConfigFromInitialize(nt),(nt==null?void 0:nt.theme)&&nt.theme in theme?nt.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables):nt&&(nt.themeVariables=theme.default.getThemeVariables(nt.themeVariables));const it=typeof nt=="object"?setSiteConfig(nt):getSiteConfig();setLogLevel$1(it.logLevel),addDiagrams()}function addA11yInfo(nt,rt,it,st){setA11yDiagramInfo(rt,nt),addSVGa11yTitleDescription(rt,it,st,rt.attr("id"))}const mermaidAPI=Object.freeze({render,renderAsync:renderAsync$1,parse:parse$1,parseAsync:parseAsync$1,parseDirective:parseDirective$c,initialize:initialize$1,getConfig:getConfig$1,setConfig,getSiteConfig,updateSiteConfig,reset:()=>{reset()},globalReset:()=>{reset(defaultConfig)},defaultConfig});setLogLevel$1(getConfig$1().logLevel);reset(getConfig$1());const init$1=async function(nt,rt,it){try{await initThrowsErrorsAsync(nt,rt,it)}catch(st){log$1.warn("Syntax Error rendering"),isDetailedError(st)&&log$1.warn(st.str),mermaid.parseError&&mermaid.parseError(st)}},handleError=(nt,rt,it)=>{log$1.warn(nt),isDetailedError(nt)?(it&&it(nt.str,nt.hash),rt.push({...nt,message:nt.str,error:nt})):(it&&it(nt),nt instanceof Error&&rt.push({str:nt.message,message:nt.message,hash:nt.name,error:nt}))},initThrowsErrors=function(nt,rt,it){const st=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let bt;if(rt===void 0)bt=document.querySelectorAll(".mermaid");else if(typeof rt=="string")bt=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)bt=[rt];else if(rt instanceof NodeList)bt=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${bt.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const xt=new utils.initIdGenerator(st.deterministicIds,st.deterministicIDSeed);let Et;const kt=[];for(const Lt of Array.from(bt)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const Pt=`mermaid-${xt.next()}`;Et=Lt.innerHTML,Et=dedent(utils.entityDecode(Et)).trim().replace(/<br\s*\/?>/gi,"<br/>");const Rt=utils.detectInit(Et);Rt&&log$1.debug("Detected early reinit: ",Rt);try{mermaidAPI.render(Pt,Et,(Dt,Bt)=>{Lt.innerHTML=Dt,it!==void 0&&it(Pt),Bt&&Bt(Lt)},Lt)}catch(Dt){handleError(Dt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},loadExternalDiagrams=async(...nt)=>{log$1.debug(`Loading ${nt.length} external diagrams`);const it=(await Promise.allSettled(nt.map(async({id:st,detector:bt,loader:xt})=>{const{diagram:Et}=await xt();registerDiagram(st,Et,bt)}))).filter(st=>st.status==="rejected");if(it.length>0){log$1.error(`Failed to load ${it.length} external diagrams`);for(const st of it)log$1.error(st);throw new Error(`Failed to load ${it.length} external diagrams`)}},initThrowsErrorsAsync=async function(nt,rt,it){const st=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let bt;if(rt===void 0)bt=document.querySelectorAll(".mermaid");else if(typeof rt=="string")bt=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)bt=[rt];else if(rt instanceof NodeList)bt=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${bt.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const xt=new utils.initIdGenerator(st.deterministicIds,st.deterministicIDSeed);let Et;const kt=[];for(const Lt of Array.from(bt)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const Pt=`mermaid-${xt.next()}`;Et=Lt.innerHTML,Et=dedent(utils.entityDecode(Et)).trim().replace(/<br\s*\/?>/gi,"<br/>");const Rt=utils.detectInit(Et);Rt&&log$1.debug("Detected early reinit: ",Rt);try{await mermaidAPI.renderAsync(Pt,Et,(Dt,Bt)=>{Lt.innerHTML=Dt,it!==void 0&&it(Pt),Bt&&Bt(Lt)},Lt)}catch(Dt){handleError(Dt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},initialize=function(nt){mermaidAPI.initialize(nt)},registerExternalDiagrams=async(nt,{lazyLoad:rt=!0}={})=>{rt?registerLazyLoadedDiagrams(...nt):await loadExternalDiagrams(...nt)},contentLoaded=function(){if(mermaid.startOnLoad){const{startOnLoad:nt}=mermaidAPI.getConfig();nt&&mermaid.init().catch(rt=>log$1.error("Mermaid failed to initialize",rt))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",contentLoaded,!1)}const setParseErrorHandler=function(nt){mermaid.parseError=nt},parse=nt=>mermaidAPI.parse(nt,mermaid.parseError),executionQueue=[];let executionQueueRunning=!1;const executeQueue=async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const nt=executionQueue.shift();if(nt)try{await nt()}catch(rt){log$1.error("Error executing queue",rt)}}executionQueueRunning=!1}},parseAsync=nt=>new Promise((rt,it)=>{const st=()=>new Promise((bt,xt)=>{mermaidAPI.parseAsync(nt,mermaid.parseError).then(Et=>{bt(Et),rt(Et)},Et=>{log$1.error("Error parsing",Et),xt(Et),it(Et)})});executionQueue.push(st),executeQueue().catch(it)}),renderAsync=(nt,rt,it,st)=>new Promise((bt,xt)=>{const Et=()=>new Promise((kt,Lt)=>{mermaidAPI.renderAsync(nt,rt,it,st).then(Pt=>{kt(Pt),bt(Pt)},Pt=>{log$1.error("Error parsing",Pt),Lt(Pt),xt(Pt)})});executionQueue.push(Et),executeQueue().catch(xt)}),mermaid={startOnLoad:!0,diagrams:{},mermaidAPI,parse,parseAsync,render:mermaidAPI.render,renderAsync,init:init$1,initThrowsErrors,initThrowsErrorsAsync,registerExternalDiagrams,initialize,parseError:void 0,contentLoaded,setParseErrorHandler},_hoisted_1$a={class:"content"},_hoisted_2$8=createBaseVNode("div",{id:"diagram"},null,-1),_hoisted_3$7={key:0,id:"caption-bar"},_hoisted_4$6=["innerHTML"],_sfc_main$c=defineComponent({__name:"Mermaid.ce",props:{type:{type:String},caption:{type:String},width:{type:String},height:{type:String},position:{type:String},right:{type:Boolean},left:{type:Boolean},full:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Pt;return(Pt=it==null?void 0:it.value)==null?void 0:Pt.parentNode}),bt=computed(()=>{var Pt,Rt;return(Rt=(Pt=it.value)==null?void 0:Pt.getRootNode())==null?void 0:Rt.host}),xt=computed(()=>{var Pt;return(Pt=st.value)==null?void 0:Pt.querySelector(".content")});watch$1(bt,()=>kt());const Et=rt.position||(rt.right?"right":rt.left?"left":"full");function kt(){bt.value.classList.add("ve-component"),bt.value.classList.add(Et),Et==="full"?bt.value.style.width="100%":(bt.value.style.float=Et,bt.value.style.width="50%"),bt.value.style.width=window.getComputedStyle(bt.value).width,xt.value.style.width=rt.width||"100%";let Pt=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2));xt.value.style.width=`${Pt}px`,Lt()}function Lt(){let Pt=bt.value.textContent.trim();mermaid.initialize({startOnLoad:!1}),async function(){var Bt;let Rt=(Bt=st.value)==null?void 0:Bt.querySelector("#diagram");const Dt=function(Ft){Rt&&(Rt.innerHTML=Ft)};await mermaid.render("diagram",Pt,Dt)}()}return(Pt,Rt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[createBaseVNode("div",_hoisted_1$a,[_hoisted_2$8,rt.caption?(openBlock(),createElementBlock("div",_hoisted_3$7,[createBaseVNode("div",{class:"label",innerHTML:nt.caption},null,8,_hoisted_4$6)])):createCommentVNode("",!0)])],512))}}),_style_0$6=`*{box-sizing:border-box}.content{display:flex;flex-direction:column;justify-content:center;align-content:center;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#diagram{display:block;margin:auto;width:100%;padding:12px 0}#caption-bar{display:flex;align-items:center;height:32px;width:100%;background-color:#555;color:#fff;padding:0 12px}.entityBox:hover{fill:#ff0}
`,Mermaid=_export_sfc(_sfc_main$c,[["styles",[_style_0$6]]]),_hoisted_1$9=["name"],_hoisted_2$7=["label"],_hoisted_3$6=["innerHTML"],_sfc_main$b=defineComponent({__name:"Modal.ce",props:{src:{type:String},prefix:{type:String},label:{type:String},buttonLabel:{type:String,default:"Show me"},buttonIcon:{type:String},width:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ft;return(Ft=it==null?void 0:it.value)==null?void 0:Ft.parentNode}),bt=computed(()=>{var Ft,Yt;return(Yt=(Ft=it.value)==null?void 0:Ft.getRootNode())==null?void 0:Yt.host}),xt=computed(()=>{var Ft;return(Ft=st.value)==null?void 0:Ft.querySelector("#main")}),Et=ref("80vw"),kt=ref(!1);watch$1(kt,()=>{Lt.open=kt.value,Rt.value||Dt()});let Lt;const Pt=ref(),Rt=ref();watch$1(bt,()=>{Et.value=rt.width||(isMobile()?"100vw":"80vh");let Ft=bt.value.textContent.split(`
`),Yt=[];if(Ft.forEach(Zt=>{(Zt.trim().length>0||Yt.length>0)&&Yt.push(Zt)}),Yt.length>0){let Zt=(Yt[0].match(/(^\s+)/)||[""])[0].length;Pt.value=Yt.map(Wt=>(Wt.match(/(^\s+)/)||[""])[0].length>=Zt?Wt.slice(Zt):Wt).join(`
`)}}),watch$1(xt,()=>{var Ft;Lt=(Ft=st.value)==null?void 0:Ft.querySelector(".dialog"),Lt.addEventListener("sl-hide",Yt=>{Yt.target===Lt&&(kt.value=!1)})});function Dt(){if(Rt.value="",rt.src){let Ft=`/${rt.src}`,[Yt,Zt,...Wt]=rt.src.split("/");Yt==="juncture-digital"&&Zt==="juncture"&&(location.hostname==="dev.juncture-digital.org"||location.hostname==="localhost")&&(Ft+="?ref=dev"),fetch(Ft).then(Qt=>Qt.text()).then(Qt=>{var nn;let on=(nn=new DOMParser().parseFromString(Qt,"text/html").children[0].children[1].querySelector("main"))==null?void 0:nn.outerHTML;on&&(Rt.value=on),nextTick(()=>initTippy(st.value,!0))})}else fetch("/html/?inline=true",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix}`,path:"",markdown:Pt.value})}).then(Ft=>Ft.text()).then(Ft=>{var Wt;let Zt=(Wt=new DOMParser().parseFromString(Ft,"text/html").children[0].children[1].querySelector("main"))==null?void 0:Wt.outerHTML;Zt&&(Rt.value=Zt),nextTick(()=>initTippy(st.value,!0))})}function Bt(Ft){var Zt;let Yt=Pt.value;Yt&&((Zt=Ft.dataTransfer)==null||Zt.setData("text/plain",Yt))}return(Ft,Yt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[createBaseVNode("sl-button",{onClick:Yt[0]||(Yt[0]=Zt=>kt.value=!kt.value)},[rt.buttonIcon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.buttonIcon,style:{"font-size":"20px"}},null,8,_hoisted_1$9)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.buttonLabel),1)]),createBaseVNode("sl-dialog",{label:nt.label,class:"dialog",style:normalizeStyle({"--width":Et.value})},[createBaseVNode("div",{id:"content",innerHTML:Rt.value,draggable:"true",onDragstart:Bt},null,40,_hoisted_3$6),createBaseVNode("sl-button",{slot:"footer",variant:"primary",onClick:Yt[1]||(Yt[1]=Zt=>kt.value=!1)},"Close")],12,_hoisted_2$7)],512))}}),_style_1$3=`*{box-sizing:border-box}:host{display:inline-block}sl-dialog::part(body){padding-top:0}sl-dialog::part(panel){max-width:unset}
`,Modal=_export_sfc(_sfc_main$b,[["styles",[_style_0$o,_style_1$3]]]),_hoisted_1$8=["href"],_hoisted_2$6=["src"],_hoisted_3$5=["src"],_hoisted_4$5={class:"title-panel"},_hoisted_5$5=["innerHTML"],_hoisted_6$3=["innerHTML"],_hoisted_7$3={class:"controls"},_hoisted_8$3=["search-domain"],_hoisted_9$2=["background","contact","contact-form-title","contact-subject"],_hoisted_10$1=["innerHTML"],_sfc_main$a=defineComponent({__name:"Navbar.ce",props:{label:{type:String},subtitle:{type:String},background:{type:String},logo:{type:String},url:{type:String},alpha:{type:Number},contact:{type:String},contactFormTitle:{type:String},contactSubject:{type:String},sticky:{type:Boolean,default:!1},height:{type:Number,default:80},offset:{type:Number,default:0},searchDomain:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var kt,Lt;return(Lt=(kt=it.value)==null?void 0:kt.getRootNode())==null?void 0:Lt.host}),bt=computed(()=>{var kt,Lt;return(Lt=(kt=it==null?void 0:it.value)==null?void 0:kt.parentNode)==null?void 0:Lt.querySelector(".ve-navbar")}),xt=ref();onMounted(()=>{Et(),nextTick(()=>{var kt;return xt.value=(kt=st.value.querySelector("ul"))==null?void 0:kt.innerHTML})}),watch$1(rt,()=>Et());function Et(){if(bt.value.style.height=`${rt.height}px`,rt.background&&(st.value.style.backgroundColor=rt.background),rt.offset&&(bt.value.style.marginTop=`-${rt.offset}px`),rt.sticky&&(st.value.classList.add("sticky"),st.value.style.position="sticky",st.value.style.top="0",rt.alpha&&(st.value.style.background=`rgba(0, 0, 0, ${rt.alpha})`),st.value.style.marginTop=`-${rt.offset}px`),rt.label){let kt=document.querySelector("title");kt||(kt=document.createElement("title"),document.head.appendChild(kt)),kt.innerText=rt.label}}return(kt,Lt)=>(openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-navbar",style:normalizeStyle({height:`${rt.height}px`})},[rt.logo?(openBlock(),createElementBlock(Fragment,{key:0},[rt.url?(openBlock(),createElementBlock("a",{key:0,href:rt.url},[createBaseVNode("img",{src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_2$6)],8,_hoisted_1$8)):(openBlock(),createElementBlock("img",{key:1,src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_3$5))],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$5,[createBaseVNode("div",{class:"title",innerHTML:rt.label},null,8,_hoisted_5$5),rt.subtitle?(openBlock(),createElementBlock("div",{key:0,class:"subtitle",innerHTML:rt.subtitle},null,8,_hoisted_6$3)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7$3,[rt.searchDomain?(openBlock(),createElementBlock("ve-site-search",{key:0,"search-domain":rt.searchDomain},null,8,_hoisted_8$3)):createCommentVNode("",!0),xt.value?(openBlock(),createElementBlock("ve-menu",{key:1,background:rt.background,position:"right",contact:rt.contact,"contact-form-title":rt.contactFormTitle,"contact-subject":rt.contactSubject},[createBaseVNode("ul",{innerHTML:xt.value},null,8,_hoisted_10$1)],8,_hoisted_9$2)):createCommentVNode("",!0)])],4))}}),_style_0$5=`*{box-sizing:border-box}:host,ve-navbar{display:block;position:relative;width:100%;z-index:10}.ve-navbar{display:flex;width:100%;height:100%;padding:0;align-items:center;background-color:inherit}.logo{margin-left:20px;background-color:inherit}img.logo{max-height:50px}.controls{display:flex;align-items:center;margin-left:auto}.title-panel{display:flex;flex-direction:column;gap:6px;margin-left:1rem}.title,.subtitle{color:#fff}.title{font-size:2rem;line-height:1.8rem;padding-top:0;font-weight:700}.subtitle{font-size:1.4rem}@media (max-width: 480px){.title{font-size:1.6rem}}
`,Navbar=_export_sfc(_sfc_main$a,[["styles",[_style_0$5]]]),_hoisted_1$7={ref:"root",class:"pagination"},_hoisted_2$5=["disabled"],_hoisted_3$4=["innerHTML"],_hoisted_4$4=["innerHTML"],_hoisted_5$4=["disabled"],_sfc_main$9=defineComponent({__name:"Pager.ce",props:{total:{type:Number,required:!0},current:{type:Number,default:1}},emits:["image-selected"],setup(nt,{emit:rt}){const it=nt,st=ref();return st.value=it.current,watch$1(st,()=>rt("image-selected",st.value)),(bt,xt)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("span",{class:"prev",onClick:xt[0]||(xt[0]=Et=>st.value>1&&--st.value),disabled:st.value===1},"\xAB",8,_hoisted_2$5),createBaseVNode("span",{class:"current",innerHTML:st.value},null,8,_hoisted_3$4),createTextVNode(" / "),createBaseVNode("span",{class:"total",innerHTML:it.total},null,8,_hoisted_4$4),createBaseVNode("span",{class:"next",onClick:xt[1]||(xt[1]=Et=>st.value<it.total&&++st.value),disabled:st.value===it.total},"\xBB",8,_hoisted_5$4)],512))}}),_style_0$4=`.pagination{display:flex;align-items:center;justify-content:center;background-color:#eee;height:30px;color:#444}.current,.total{padding:0 12px;font-size:1.3rem}.prev[disabled=true],.next[disabled=true]{color:#ccc;cursor:unset}.prev,.next{height:100%;float:left;padding:0 8px;text-decoration:none;transition:background-color .3s;cursor:pointer;font-size:40px;margin-top:-28px}.prev[disabled=false]:hover,.next[disabled=false]:hover{color:var(--sl-color-primary-700)}
`,Pager=_export_sfc(_sfc_main$9,[["styles",[_style_0$4]]]);var rdfCanonize={exports:{}},lib={},IdentifierIssuer_1=class Kb{constructor(rt,it=new Map,st=0){this.prefix=rt,this._existing=it,this.counter=st}clone(){const{prefix:rt,_existing:it,counter:st}=this;return new Kb(rt,new Map(it),st)}getId(rt){const it=rt&&this._existing.get(rt);if(it)return it;const st=this.prefix+this.counter;return this.counter++,rt&&this._existing.set(rt,st),st}hasId(rt){return this._existing.has(rt)}getOldIds(){return[...this._existing.keys()]}};(function(nt,rt){if(nt.setImmediate)return;var it=1,st={},bt=!1,xt=nt.document,Et;function kt(Kt){typeof Kt!="function"&&(Kt=new Function(""+Kt));for(var on=new Array(arguments.length-1),nn=0;nn<on.length;nn++)on[nn]=arguments[nn+1];var mn={callback:Kt,args:on};return st[it]=mn,Et(it),it++}function Lt(Kt){delete st[Kt]}function Pt(Kt){var on=Kt.callback,nn=Kt.args;switch(nn.length){case 0:on();break;case 1:on(nn[0]);break;case 2:on(nn[0],nn[1]);break;case 3:on(nn[0],nn[1],nn[2]);break;default:on.apply(rt,nn);break}}function Rt(Kt){if(bt)setTimeout(Rt,0,Kt);else{var on=st[Kt];if(on){bt=!0;try{Pt(on)}finally{Lt(Kt),bt=!1}}}}function Dt(){Et=function(Kt){process.nextTick(function(){Rt(Kt)})}}function Bt(){if(nt.postMessage&&!nt.importScripts){var Kt=!0,on=nt.onmessage;return nt.onmessage=function(){Kt=!1},nt.postMessage("","*"),nt.onmessage=on,Kt}}function Ft(){var Kt="setImmediate$"+Math.random()+"$",on=function(nn){nn.source===nt&&typeof nn.data=="string"&&nn.data.indexOf(Kt)===0&&Rt(+nn.data.slice(Kt.length))};nt.addEventListener?nt.addEventListener("message",on,!1):nt.attachEvent("onmessage",on),Et=function(nn){nt.postMessage(Kt+nn,"*")}}function Yt(){var Kt=new MessageChannel;Kt.port1.onmessage=function(on){var nn=on.data;Rt(nn)},Et=function(on){Kt.port2.postMessage(on)}}function Zt(){var Kt=xt.documentElement;Et=function(on){var nn=xt.createElement("script");nn.onreadystatechange=function(){Rt(on),nn.onreadystatechange=null,Kt.removeChild(nn),nn=null},Kt.appendChild(nn)}}function Wt(){Et=function(Kt){setTimeout(Rt,0,Kt)}}var Qt=Object.getPrototypeOf&&Object.getPrototypeOf(nt);Qt=Qt&&Qt.setTimeout?Qt:nt,{}.toString.call(nt.process)==="[object process]"?Dt():Bt()?Ft():nt.MessageChannel?Yt():xt&&"onreadystatechange"in xt.createElement("script")?Zt():Wt(),Qt.setImmediate=kt,Qt.clearImmediate=Lt})(typeof self>"u"?commonjsGlobal$1:self);/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const crypto$1=self.crypto||self.msCrypto;var MessageDigestBrowser=class{constructor(rt){if(!(crypto$1&&crypto$1.subtle))throw new Error("crypto.subtle not found.");if(rt==="sha256")this.algorithm={name:"SHA-256"};else if(rt==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${rt}".`);this._content=""}update(rt){this._content+=rt}async digest(){const rt=new TextEncoder().encode(this._content),it=new Uint8Array(await crypto$1.subtle.digest(this.algorithm,rt));let st="";for(let bt=0;bt<it.length;++bt)st+=it[bt].toString(16).padStart(2,"0");return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Permuter_1=class{constructor(rt){this.current=rt.sort(),this.done=!1,this.dir=new Map;for(let it=0;it<rt.length;++it)this.dir.set(rt[it],!0)}hasNext(){return!this.done}next(){const{current:rt,dir:it}=this,st=rt.slice();let bt=null,xt=0;const Et=rt.length;for(let kt=0;kt<Et;++kt){const Lt=rt[kt],Pt=it.get(Lt);(bt===null||Lt>bt)&&(Pt&&kt>0&&Lt>rt[kt-1]||!Pt&&kt<Et-1&&Lt>rt[kt+1])&&(bt=Lt,xt=kt)}if(bt===null)this.done=!0;else{const kt=it.get(bt)?xt-1:xt+1;rt[xt]=rt[kt],rt[kt]=bt;for(const Lt of rt)Lt>bt&&it.set(Lt,!it.get(Lt))}return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const RDF$1="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_LANGSTRING$1=RDF$1+"langString",XSD_STRING$2="http://www.w3.org/2001/XMLSchema#string",TYPE_NAMED_NODE="NamedNode",TYPE_BLANK_NODE="BlankNode",TYPE_LITERAL="Literal",TYPE_DEFAULT_GRAPH="DefaultGraph",REGEX={};(()=>{const nt="(?:<([^:]+:[^>]*)>)",it="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD"+"_",st=it+"0-9-\xB7\u0300-\u036F\u203F-\u2040",xt="(_:(?:["+it+"0-9])(?:(?:["+st+".])*(?:["+st+"]))?)",Et='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',kt="(?:\\^\\^"+nt+")",Lt="(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))",Pt="(?:"+Et+"(?:"+kt+"|"+Lt+")?)",Rt="[ \\t]+",Dt="[ \\t]*",Bt="(?:"+nt+"|"+xt+")"+Rt,Ft=nt+Rt,Yt="(?:"+nt+"|"+xt+"|"+Pt+")"+Dt,Zt="(?:\\.|(?:(?:"+nt+"|"+xt+")"+Dt+"\\.))";REGEX.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,REGEX.empty=new RegExp("^"+Dt+"$"),REGEX.quad=new RegExp("^"+Dt+Bt+Ft+Yt+Zt+Dt+"$")})();var NQuads_1=class mv{static parse(rt){const it=[],st={},bt=rt.split(REGEX.eoln);let xt=0;for(const Et of bt){if(xt++,REGEX.empty.test(Et))continue;const kt=Et.match(REGEX.quad);if(kt===null)throw new Error("N-Quads parse error on line "+xt+".");const Lt={subject:null,predicate:null,object:null,graph:null};if(kt[1]!==void 0?Lt.subject={termType:TYPE_NAMED_NODE,value:kt[1]}:Lt.subject={termType:TYPE_BLANK_NODE,value:kt[2]},Lt.predicate={termType:TYPE_NAMED_NODE,value:kt[3]},kt[4]!==void 0?Lt.object={termType:TYPE_NAMED_NODE,value:kt[4]}:kt[5]!==void 0?Lt.object={termType:TYPE_BLANK_NODE,value:kt[5]}:(Lt.object={termType:TYPE_LITERAL,value:void 0,datatype:{termType:TYPE_NAMED_NODE}},kt[7]!==void 0?Lt.object.datatype.value=kt[7]:kt[8]!==void 0?(Lt.object.datatype.value=RDF_LANGSTRING$1,Lt.object.language=kt[8]):Lt.object.datatype.value=XSD_STRING$2,Lt.object.value=_unescape(kt[6])),kt[9]!==void 0?Lt.graph={termType:TYPE_NAMED_NODE,value:kt[9]}:kt[10]!==void 0?Lt.graph={termType:TYPE_BLANK_NODE,value:kt[10]}:Lt.graph={termType:TYPE_DEFAULT_GRAPH,value:""},!(Lt.graph.value in st))st[Lt.graph.value]=[Lt],it.push(Lt);else{let Pt=!0;const Rt=st[Lt.graph.value];for(const Dt of Rt)if(_compareTriples(Dt,Lt)){Pt=!1;break}Pt&&(Rt.push(Lt),it.push(Lt))}}return it}static serialize(rt){Array.isArray(rt)||(rt=mv.legacyDatasetToQuads(rt));const it=[];for(const st of rt)it.push(mv.serializeQuad(st));return it.sort().join("")}static serializeQuadComponents(rt,it,st,bt){let xt="";return rt.termType===TYPE_NAMED_NODE?xt+=`<${rt.value}>`:xt+=`${rt.value}`,xt+=` <${it.value}> `,st.termType===TYPE_NAMED_NODE?xt+=`<${st.value}>`:st.termType===TYPE_BLANK_NODE?xt+=st.value:(xt+=`"${_escape(st.value)}"`,st.datatype.value===RDF_LANGSTRING$1?st.language&&(xt+=`@${st.language}`):st.datatype.value!==XSD_STRING$2&&(xt+=`^^<${st.datatype.value}>`)),bt.termType===TYPE_NAMED_NODE?xt+=` <${bt.value}>`:bt.termType===TYPE_BLANK_NODE&&(xt+=` ${bt.value}`),xt+=` .
`,xt}static serializeQuad(rt){return mv.serializeQuadComponents(rt.subject,rt.predicate,rt.object,rt.graph)}static legacyDatasetToQuads(rt){const it=[],st={"blank node":TYPE_BLANK_NODE,IRI:TYPE_NAMED_NODE,literal:TYPE_LITERAL};for(const bt in rt)rt[bt].forEach(Et=>{const kt={};for(const Lt in Et){const Pt=Et[Lt],Rt={termType:st[Pt.type],value:Pt.value};Rt.termType===TYPE_LITERAL&&(Rt.datatype={termType:TYPE_NAMED_NODE},"datatype"in Pt&&(Rt.datatype.value=Pt.datatype),"language"in Pt?("datatype"in Pt||(Rt.datatype.value=RDF_LANGSTRING$1),Rt.language=Pt.language):"datatype"in Pt||(Rt.datatype.value=XSD_STRING$2)),kt[Lt]=Rt}bt==="@default"?kt.graph={termType:TYPE_DEFAULT_GRAPH,value:""}:kt.graph={termType:bt.startsWith("_:")?TYPE_BLANK_NODE:TYPE_NAMED_NODE,value:bt},it.push(kt)});return it}};function _compareTriples(nt,rt){return!(nt.subject.termType===rt.subject.termType&&nt.object.termType===rt.object.termType)||!(nt.subject.value===rt.subject.value&&nt.predicate.value===rt.predicate.value&&nt.object.value===rt.object.value)?!1:nt.object.termType!==TYPE_LITERAL?!0:nt.object.datatype.termType===rt.object.datatype.termType&&nt.object.language===rt.object.language&&nt.object.datatype.value===rt.object.datatype.value}const _escapeRegex=/["\\\n\r]/g;function _escape(nt){return nt.replace(_escapeRegex,function(rt){switch(rt){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const _unescapeRegex=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _unescape(nt){return nt.replace(_unescapeRegex,function(rt,it,st,bt){if(it)switch(it){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(st)return String.fromCharCode(parseInt(st,16));if(bt)throw new Error("Unsupported U escape")})}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const IdentifierIssuer$3=IdentifierIssuer_1,MessageDigest$3=MessageDigestBrowser,Permuter$1=Permuter_1,NQuads$3=NQuads_1;var URDNA2015_1=class{constructor({createMessageDigest:rt=()=>new MessageDigest$3("sha256"),canonicalIdMap:it=new Map,maxDeepIterations:st=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer$3("_:c14n",it),this.createMessageDigest=rt,this.maxDeepIterations=st,this.quads=null,this.deepIterations=null}async main(rt){this.deepIterations=new Map,this.quads=rt;for(const Lt of rt)this._addBlankNodeQuadInfo({quad:Lt,component:Lt.subject}),this._addBlankNodeQuadInfo({quad:Lt,component:Lt.object}),this._addBlankNodeQuadInfo({quad:Lt,component:Lt.graph});const it=new Map,st=[...this.blankNodeInfo.keys()];let bt=0;for(const Lt of st)++bt%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:Lt,hashToBlankNodes:it});const xt=[...it.keys()].sort(),Et=[];for(const Lt of xt){const Pt=it.get(Lt);if(Pt.length>1){Et.push(Pt);continue}const Rt=Pt[0];this.canonicalIssuer.getId(Rt)}for(const Lt of Et){const Pt=[];for(const Rt of Lt){if(this.canonicalIssuer.hasId(Rt))continue;const Dt=new IdentifierIssuer$3("_:b");Dt.getId(Rt);const Bt=await this.hashNDegreeQuads(Rt,Dt);Pt.push(Bt)}Pt.sort(_stringHashCompare$1);for(const Rt of Pt){const Dt=Rt.issuer.getOldIds();for(const Bt of Dt)this.canonicalIssuer.getId(Bt)}}const kt=[];for(const Lt of this.quads){const Pt=NQuads$3.serializeQuadComponents(this._componentWithCanonicalId(Lt.subject),Lt.predicate,this._componentWithCanonicalId(Lt.object),this._componentWithCanonicalId(Lt.graph));kt.push(Pt)}return kt.sort(),kt.join("")}async hashFirstDegreeQuads(rt){const it=[],st=this.blankNodeInfo.get(rt),bt=st.quads;for(const Et of bt){const kt={subject:null,predicate:Et.predicate,object:null,graph:null};kt.subject=this.modifyFirstDegreeComponent(rt,Et.subject,"subject"),kt.object=this.modifyFirstDegreeComponent(rt,Et.object,"object"),kt.graph=this.modifyFirstDegreeComponent(rt,Et.graph,"graph"),it.push(NQuads$3.serializeQuad(kt))}it.sort();const xt=this.createMessageDigest();for(const Et of it)xt.update(Et);return st.hash=await xt.digest(),st.hash}async hashRelatedBlankNode(rt,it,st,bt){let xt;this.canonicalIssuer.hasId(rt)?xt=this.canonicalIssuer.getId(rt):st.hasId(rt)?xt=st.getId(rt):xt=this.blankNodeInfo.get(rt).hash;const Et=this.createMessageDigest();return Et.update(bt),bt!=="g"&&Et.update(this.getRelatedPredicate(it)),Et.update(xt),Et.digest()}async hashNDegreeQuads(rt,it){const st=this.deepIterations.get(rt)||0;if(st>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(rt,st+1);const bt=this.createMessageDigest(),xt=await this.createHashToRelated(rt,it),Et=[...xt.keys()].sort();for(const kt of Et){bt.update(kt);let Lt="",Pt;const Rt=new Permuter$1(xt.get(kt));let Dt=0;for(;Rt.hasNext();){const Bt=Rt.next();++Dt%3===0&&await this._yield();let Ft=it.clone(),Yt="";const Zt=[];let Wt=!1;for(const Qt of Bt)if(this.canonicalIssuer.hasId(Qt)?Yt+=this.canonicalIssuer.getId(Qt):(Ft.hasId(Qt)||Zt.push(Qt),Yt+=Ft.getId(Qt)),Lt.length!==0&&Yt>Lt){Wt=!0;break}if(!Wt){for(const Qt of Zt){const Kt=await this.hashNDegreeQuads(Qt,Ft);if(Yt+=Ft.getId(Qt),Yt+=`<${Kt.hash}>`,Ft=Kt.issuer,Lt.length!==0&&Yt>Lt){Wt=!0;break}}Wt||(Lt.length===0||Yt<Lt)&&(Lt=Yt,Pt=Ft)}}bt.update(Lt),it=Pt}return{hash:await bt.digest(),issuer:it}}modifyFirstDegreeComponent(rt,it){return it.termType!=="BlankNode"?it:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return`<${rt.predicate.value}>`}async createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;let xt=0;for(const Et of bt)++xt%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:Et,component:Et.subject,position:"s",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:Et,component:Et.object,position:"o",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:Et,component:Et.graph,position:"g",id:rt,issuer:it,hashToRelated:st})]);return st}async _hashAndTrackBlankNode({id:rt,hashToBlankNodes:it}){const st=await this.hashFirstDegreeQuads(rt),bt=it.get(st);bt?bt.push(rt):it.set(st,[rt])}_addBlankNodeQuadInfo({quad:rt,component:it}){if(it.termType!=="BlankNode")return;const st=it.value,bt=this.blankNodeInfo.get(st);bt?bt.quads.add(rt):this.blankNodeInfo.set(st,{quads:new Set([rt]),hash:null})}async _addRelatedBlankNodeHash({quad:rt,component:it,position:st,id:bt,issuer:xt,hashToRelated:Et}){if(!(it.termType==="BlankNode"&&it.value!==bt))return;const kt=it.value,Lt=await this.hashRelatedBlankNode(kt,rt,xt,st),Pt=Et.get(Lt);Pt?Pt.push(kt):Et.set(Lt,[kt])}_componentWithCanonicalId(rt){return rt.termType==="BlankNode"&&!rt.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(rt.value)}:rt}async _yield(){return new Promise(rt=>setImmediate(rt))}};function _stringHashCompare$1(nt,rt){return nt.hash<rt.hash?-1:nt.hash>rt.hash?1:0}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest$2=MessageDigestBrowser,URDNA2015=URDNA2015_1;var URGNA2012=class extends URDNA2015{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest$2("sha1")}modifyFirstDegreeComponent(rt,it,st){return it.termType!=="BlankNode"?it:st==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return rt.predicate.value}async createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;let xt=0;for(const Et of bt){let kt,Lt;if(Et.subject.termType==="BlankNode"&&Et.subject.value!==rt)Lt=Et.subject.value,kt="p";else if(Et.object.termType==="BlankNode"&&Et.object.value!==rt)Lt=Et.object.value,kt="r";else continue;++xt%100===0&&await this._yield();const Pt=await this.hashRelatedBlankNode(Lt,Et,it,kt),Rt=st.get(Pt);Rt?Rt.push(Lt):st.set(Pt,[Lt])}return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const IdentifierIssuer$2=IdentifierIssuer_1,MessageDigest$1=MessageDigestBrowser,Permuter=Permuter_1,NQuads$2=NQuads_1;var URDNA2015Sync_1=class{constructor({createMessageDigest:rt=()=>new MessageDigest$1("sha256"),canonicalIdMap:it=new Map,maxDeepIterations:st=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer$2("_:c14n",it),this.createMessageDigest=rt,this.maxDeepIterations=st,this.quads=null,this.deepIterations=null}main(rt){this.deepIterations=new Map,this.quads=rt;for(const kt of rt)this._addBlankNodeQuadInfo({quad:kt,component:kt.subject}),this._addBlankNodeQuadInfo({quad:kt,component:kt.object}),this._addBlankNodeQuadInfo({quad:kt,component:kt.graph});const it=new Map,st=[...this.blankNodeInfo.keys()];for(const kt of st)this._hashAndTrackBlankNode({id:kt,hashToBlankNodes:it});const bt=[...it.keys()].sort(),xt=[];for(const kt of bt){const Lt=it.get(kt);if(Lt.length>1){xt.push(Lt);continue}const Pt=Lt[0];this.canonicalIssuer.getId(Pt)}for(const kt of xt){const Lt=[];for(const Pt of kt){if(this.canonicalIssuer.hasId(Pt))continue;const Rt=new IdentifierIssuer$2("_:b");Rt.getId(Pt);const Dt=this.hashNDegreeQuads(Pt,Rt);Lt.push(Dt)}Lt.sort(_stringHashCompare);for(const Pt of Lt){const Rt=Pt.issuer.getOldIds();for(const Dt of Rt)this.canonicalIssuer.getId(Dt)}}const Et=[];for(const kt of this.quads){const Lt=NQuads$2.serializeQuadComponents(this._componentWithCanonicalId({component:kt.subject}),kt.predicate,this._componentWithCanonicalId({component:kt.object}),this._componentWithCanonicalId({component:kt.graph}));Et.push(Lt)}return Et.sort(),Et.join("")}hashFirstDegreeQuads(rt){const it=[],st=this.blankNodeInfo.get(rt),bt=st.quads;for(const Et of bt){const kt={subject:null,predicate:Et.predicate,object:null,graph:null};kt.subject=this.modifyFirstDegreeComponent(rt,Et.subject,"subject"),kt.object=this.modifyFirstDegreeComponent(rt,Et.object,"object"),kt.graph=this.modifyFirstDegreeComponent(rt,Et.graph,"graph"),it.push(NQuads$2.serializeQuad(kt))}it.sort();const xt=this.createMessageDigest();for(const Et of it)xt.update(Et);return st.hash=xt.digest(),st.hash}hashRelatedBlankNode(rt,it,st,bt){let xt;this.canonicalIssuer.hasId(rt)?xt=this.canonicalIssuer.getId(rt):st.hasId(rt)?xt=st.getId(rt):xt=this.blankNodeInfo.get(rt).hash;const Et=this.createMessageDigest();return Et.update(bt),bt!=="g"&&Et.update(this.getRelatedPredicate(it)),Et.update(xt),Et.digest()}hashNDegreeQuads(rt,it){const st=this.deepIterations.get(rt)||0;if(st>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(rt,st+1);const bt=this.createMessageDigest(),xt=this.createHashToRelated(rt,it),Et=[...xt.keys()].sort();for(const kt of Et){bt.update(kt);let Lt="",Pt;const Rt=new Permuter(xt.get(kt));for(;Rt.hasNext();){const Dt=Rt.next();let Bt=it.clone(),Ft="";const Yt=[];let Zt=!1;for(const Wt of Dt)if(this.canonicalIssuer.hasId(Wt)?Ft+=this.canonicalIssuer.getId(Wt):(Bt.hasId(Wt)||Yt.push(Wt),Ft+=Bt.getId(Wt)),Lt.length!==0&&Ft>Lt){Zt=!0;break}if(!Zt){for(const Wt of Yt){const Qt=this.hashNDegreeQuads(Wt,Bt);if(Ft+=Bt.getId(Wt),Ft+=`<${Qt.hash}>`,Bt=Qt.issuer,Lt.length!==0&&Ft>Lt){Zt=!0;break}}Zt||(Lt.length===0||Ft<Lt)&&(Lt=Ft,Pt=Bt)}}bt.update(Lt),it=Pt}return{hash:bt.digest(),issuer:it}}modifyFirstDegreeComponent(rt,it){return it.termType!=="BlankNode"?it:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return`<${rt.predicate.value}>`}createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;for(const xt of bt)this._addRelatedBlankNodeHash({quad:xt,component:xt.subject,position:"s",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:xt,component:xt.object,position:"o",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:xt,component:xt.graph,position:"g",id:rt,issuer:it,hashToRelated:st});return st}_hashAndTrackBlankNode({id:rt,hashToBlankNodes:it}){const st=this.hashFirstDegreeQuads(rt),bt=it.get(st);bt?bt.push(rt):it.set(st,[rt])}_addBlankNodeQuadInfo({quad:rt,component:it}){if(it.termType!=="BlankNode")return;const st=it.value,bt=this.blankNodeInfo.get(st);bt?bt.quads.add(rt):this.blankNodeInfo.set(st,{quads:new Set([rt]),hash:null})}_addRelatedBlankNodeHash({quad:rt,component:it,position:st,id:bt,issuer:xt,hashToRelated:Et}){if(!(it.termType==="BlankNode"&&it.value!==bt))return;const kt=it.value,Lt=this.hashRelatedBlankNode(kt,rt,xt,st),Pt=Et.get(Lt);Pt?Pt.push(kt):Et.set(Lt,[kt])}_componentWithCanonicalId({component:rt}){return rt.termType==="BlankNode"&&!rt.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(rt.value)}:rt}};function _stringHashCompare(nt,rt){return nt.hash<rt.hash?-1:nt.hash>rt.hash?1:0}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest=MessageDigestBrowser,URDNA2015Sync=URDNA2015Sync_1;var URGNA2012Sync=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest("sha1")}modifyFirstDegreeComponent(rt,it,st){return it.termType!=="BlankNode"?it:st==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return rt.predicate.value}createHashToRelated(rt,it){const st=new Map,bt=this.blankNodeInfo.get(rt).quads;for(const xt of bt){let Et,kt;if(xt.subject.termType==="BlankNode"&&xt.subject.value!==rt)kt=xt.subject.value,Et="p";else if(xt.object.termType==="BlankNode"&&xt.object.value!==rt)kt=xt.object.value,Et="r";else continue;const Lt=this.hashRelatedBlankNode(kt,xt,it,Et),Pt=st.get(Lt);Pt?Pt.push(kt):st.set(Lt,[kt])}return st}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(nt){const rt=URDNA2015_1,it=URGNA2012,st=URDNA2015Sync_1,bt=URGNA2012Sync;let xt;try{xt=require$$4}catch{}function Et(kt){return Array.isArray(kt)?kt:nt.NQuads.legacyDatasetToQuads(kt)}nt.NQuads=NQuads_1,nt.IdentifierIssuer=IdentifierIssuer_1,nt._rdfCanonizeNative=function(kt){return kt&&(xt=kt),xt},nt.canonize=async function(kt,Lt){const Pt=Et(kt);if(Lt.useNative){if(!xt)throw new Error("rdf-canonize-native not available");if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((Rt,Dt)=>xt.canonize(Pt,Lt,(Bt,Ft)=>Bt?Dt(Bt):Rt(Ft)))}if(Lt.algorithm==="URDNA2015")return new rt(Lt).main(Pt);if(Lt.algorithm==="URGNA2012"){if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new it(Lt).main(Pt)}throw"algorithm"in Lt?new Error("Invalid RDF Dataset Canonicalization algorithm: "+Lt.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},nt._canonizeSync=function(kt,Lt){const Pt=Et(kt);if(Lt.useNative){if(!xt)throw new Error("rdf-canonize-native not available");if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return xt.canonizeSync(Pt,Lt)}if(Lt.algorithm==="URDNA2015")return new st(Lt).main(Pt);if(Lt.algorithm==="URGNA2012"){if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new bt(Lt).main(Pt)}throw"algorithm"in Lt?new Error("Invalid RDF Dataset Canonicalization algorithm: "+Lt.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}})(lib);(function(nt){nt.exports=lib})(rdfCanonize);const api$d={};var types$7=api$d;api$d.isArray=Array.isArray;api$d.isBoolean=nt=>typeof nt=="boolean"||Object.prototype.toString.call(nt)==="[object Boolean]";api$d.isDouble=nt=>api$d.isNumber(nt)&&(String(nt).indexOf(".")!==-1||Math.abs(nt)>=1e21);api$d.isEmptyObject=nt=>api$d.isObject(nt)&&Object.keys(nt).length===0;api$d.isNumber=nt=>typeof nt=="number"||Object.prototype.toString.call(nt)==="[object Number]";api$d.isNumeric=nt=>!isNaN(parseFloat(nt))&&isFinite(nt);api$d.isObject=nt=>Object.prototype.toString.call(nt)==="[object Object]";api$d.isString=nt=>typeof nt=="string"||Object.prototype.toString.call(nt)==="[object String]";api$d.isUndefined=nt=>typeof nt>"u";const types$6=types$7,api$c={};var graphTypes$5=api$c;api$c.isSubject=nt=>types$6.isObject(nt)&&!("@value"in nt||"@set"in nt||"@list"in nt)?Object.keys(nt).length>1||!("@id"in nt):!1;api$c.isSubjectReference=nt=>types$6.isObject(nt)&&Object.keys(nt).length===1&&"@id"in nt;api$c.isValue=nt=>types$6.isObject(nt)&&"@value"in nt;api$c.isList=nt=>types$6.isObject(nt)&&"@list"in nt;api$c.isGraph=nt=>types$6.isObject(nt)&&"@graph"in nt&&Object.keys(nt).filter(rt=>rt!=="@id"&&rt!=="@index").length===1;api$c.isSimpleGraph=nt=>api$c.isGraph(nt)&&!("@id"in nt);api$c.isBlankNode=nt=>{if(types$6.isObject(nt)){if("@id"in nt){const rt=nt["@id"];return!types$6.isString(rt)||rt.indexOf("_:")===0}return Object.keys(nt).length===0||!("@value"in nt||"@set"in nt||"@list"in nt)}return!1};var JsonLdError_1=class extends Error{constructor(rt="An unspecified JSON-LD error occurred.",it="jsonld.Error",st={}){super(rt),this.name=it,this.message=rt,this.details=st}};const graphTypes$4=graphTypes$5,types$5=types$7,IdentifierIssuer$1=rdfCanonize.exports.IdentifierIssuer,JsonLdError$a=JsonLdError_1,REGEX_BCP47$3=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER$1=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,REGEX_KEYWORD$3=/^@[a-zA-Z]+$/,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api$b={};var util$5=api$b;api$b.IdentifierIssuer=IdentifierIssuer$1;api$b.REGEX_BCP47=REGEX_BCP47$3;api$b.REGEX_KEYWORD=REGEX_KEYWORD$3;api$b.clone=function(nt){if(nt&&typeof nt=="object"){let rt;if(types$5.isArray(nt)){rt=[];for(let it=0;it<nt.length;++it)rt[it]=api$b.clone(nt[it])}else if(nt instanceof Map){rt=new Map;for(const[it,st]of nt)rt.set(it,api$b.clone(st))}else if(nt instanceof Set){rt=new Set;for(const it of nt)rt.add(api$b.clone(it))}else if(types$5.isObject(nt)){rt={};for(const it in nt)rt[it]=api$b.clone(nt[it])}else rt=nt.toString();return rt}return nt};api$b.asArray=function(nt){return Array.isArray(nt)?nt:[nt]};api$b.buildHeaders=(nt={})=>{if(Object.keys(nt).some(it=>it.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},nt)};api$b.parseLinkHeader=nt=>{const rt={},it=nt.match(REGEX_LINK_HEADERS);for(let st=0;st<it.length;++st){let bt=it[st].match(REGEX_LINK_HEADER$1);if(!bt)continue;const xt={target:bt[1]},Et=bt[2];for(;bt=REGEX_LINK_HEADER_PARAMS.exec(Et);)xt[bt[1]]=bt[2]===void 0?bt[3]:bt[2];const kt=xt.rel||"";Array.isArray(rt[kt])?rt[kt].push(xt):rt.hasOwnProperty(kt)?rt[kt]=[rt[kt],xt]:rt[kt]=xt}return rt};api$b.validateTypeValue=(nt,rt)=>{if(!types$5.isString(nt)&&!(types$5.isArray(nt)&&nt.every(it=>types$5.isString(it)))){if(rt&&types$5.isObject(nt))switch(Object.keys(nt).length){case 0:return;case 1:if("@default"in nt&&api$b.asArray(nt["@default"]).every(it=>types$5.isString(it)))return}throw new JsonLdError$a('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:nt})}};api$b.hasProperty=(nt,rt)=>{if(nt.hasOwnProperty(rt)){const it=nt[rt];return!types$5.isArray(it)||it.length>0}return!1};api$b.hasValue=(nt,rt,it)=>{if(api$b.hasProperty(nt,rt)){let st=nt[rt];const bt=graphTypes$4.isList(st);if(types$5.isArray(st)||bt){bt&&(st=st["@list"]);for(let xt=0;xt<st.length;++xt)if(api$b.compareValues(it,st[xt]))return!0}else if(!types$5.isArray(it))return api$b.compareValues(it,st)}return!1};api$b.addValue=(nt,rt,it,st)=>{if(st=st||{},"propertyIsArray"in st||(st.propertyIsArray=!1),"valueIsArray"in st||(st.valueIsArray=!1),"allowDuplicate"in st||(st.allowDuplicate=!0),"prependValue"in st||(st.prependValue=!1),st.valueIsArray)nt[rt]=it;else if(types$5.isArray(it)){it.length===0&&st.propertyIsArray&&!nt.hasOwnProperty(rt)&&(nt[rt]=[]),st.prependValue&&(it=it.concat(nt[rt]),nt[rt]=[]);for(let bt=0;bt<it.length;++bt)api$b.addValue(nt,rt,it[bt],st)}else if(nt.hasOwnProperty(rt)){const bt=!st.allowDuplicate&&api$b.hasValue(nt,rt,it);!types$5.isArray(nt[rt])&&(!bt||st.propertyIsArray)&&(nt[rt]=[nt[rt]]),bt||(st.prependValue?nt[rt].unshift(it):nt[rt].push(it))}else nt[rt]=st.propertyIsArray?[it]:it};api$b.getValues=(nt,rt)=>[].concat(nt[rt]||[]);api$b.removeProperty=(nt,rt)=>{delete nt[rt]};api$b.removeValue=(nt,rt,it,st)=>{st=st||{},"propertyIsArray"in st||(st.propertyIsArray=!1);const bt=api$b.getValues(nt,rt).filter(xt=>!api$b.compareValues(xt,it));bt.length===0?api$b.removeProperty(nt,rt):bt.length===1&&!st.propertyIsArray?nt[rt]=bt[0]:nt[rt]=bt};api$b.relabelBlankNodes=(nt,rt)=>{rt=rt||{};const it=rt.issuer||new IdentifierIssuer$1("_:b");return _labelBlankNodes(it,nt)};api$b.compareValues=(nt,rt)=>nt===rt||graphTypes$4.isValue(nt)&&graphTypes$4.isValue(rt)&&nt["@value"]===rt["@value"]&&nt["@type"]===rt["@type"]&&nt["@language"]===rt["@language"]&&nt["@index"]===rt["@index"]?!0:types$5.isObject(nt)&&"@id"in nt&&types$5.isObject(rt)&&"@id"in rt?nt["@id"]===rt["@id"]:!1;api$b.compareShortestLeast=(nt,rt)=>nt.length<rt.length?-1:rt.length<nt.length?1:nt===rt?0:nt<rt?-1:1;function _labelBlankNodes(nt,rt){if(types$5.isArray(rt))for(let it=0;it<rt.length;++it)rt[it]=_labelBlankNodes(nt,rt[it]);else if(graphTypes$4.isList(rt))rt["@list"]=_labelBlankNodes(nt,rt["@list"]);else if(types$5.isObject(rt)){graphTypes$4.isBlankNode(rt)&&(rt["@id"]=nt.getId(rt["@id"]));const it=Object.keys(rt).sort();for(let st=0;st<it.length;++st){const bt=it[st];bt!=="@id"&&(rt[bt]=_labelBlankNodes(nt,rt[bt]))}}return rt}const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";var constants={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"},RequestQueue_1,hasRequiredRequestQueue;function requireRequestQueue(){return hasRequiredRequestQueue||(hasRequiredRequestQueue=1,RequestQueue_1=class{constructor(){this._requests={}}wrapLoader(rt){const it=this;return it._loader=rt,function(){return it.add.apply(it,arguments)}}async add(rt){let it=this._requests[rt];if(it)return Promise.resolve(it);it=this._requests[rt]=this._loader(rt);try{return await it}finally{delete this._requests[rt]}}}),RequestQueue_1}const types$4=types$7,api$a={};var url$1=api$a;api$a.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};api$a.parse=(nt,rt)=>{const it={},st=api$a.parsers[rt||"full"],bt=st.regex.exec(nt);let xt=st.keys.length;for(;xt--;)it[st.keys[xt]]=bt[xt]===void 0?null:bt[xt];return(it.scheme==="https"&&it.port==="443"||it.scheme==="http"&&it.port==="80")&&(it.href=it.href.replace(":"+it.port,""),it.authority=it.authority.replace(":"+it.port,""),it.port=null),it.normalizedPath=api$a.removeDotSegments(it.path),it};api$a.prependBase=(nt,rt)=>{if(nt===null||api$a.isAbsolute(rt))return rt;(!nt||types$4.isString(nt))&&(nt=api$a.parse(nt||""));const it=api$a.parse(rt),st={protocol:nt.protocol||""};if(it.authority!==null)st.authority=it.authority,st.path=it.path,st.query=it.query;else if(st.authority=nt.authority,it.path==="")st.path=nt.path,it.query!==null?st.query=it.query:st.query=nt.query;else{if(it.path.indexOf("/")===0)st.path=it.path;else{let xt=nt.path;xt=xt.substr(0,xt.lastIndexOf("/")+1),(xt.length>0||nt.authority)&&xt.substr(-1)!=="/"&&(xt+="/"),xt+=it.path,st.path=xt}st.query=it.query}it.path!==""&&(st.path=api$a.removeDotSegments(st.path));let bt=st.protocol;return st.authority!==null&&(bt+="//"+st.authority),bt+=st.path,st.query!==null&&(bt+="?"+st.query),it.fragment!==null&&(bt+="#"+it.fragment),bt===""&&(bt="./"),bt};api$a.removeBase=(nt,rt)=>{if(nt===null)return rt;(!nt||types$4.isString(nt))&&(nt=api$a.parse(nt||""));let it="";if(nt.href!==""?it+=(nt.protocol||"")+"//"+(nt.authority||""):rt.indexOf("//")&&(it+="//"),rt.indexOf(it)!==0)return rt;const st=api$a.parse(rt.substr(it.length)),bt=nt.normalizedPath.split("/"),xt=st.normalizedPath.split("/"),Et=st.fragment||st.query?0:1;for(;bt.length>0&&xt.length>Et&&bt[0]===xt[0];)bt.shift(),xt.shift();let kt="";if(bt.length>0){bt.pop();for(let Lt=0;Lt<bt.length;++Lt)kt+="../"}return kt+=xt.join("/"),st.query!==null&&(kt+="?"+st.query),st.fragment!==null&&(kt+="#"+st.fragment),kt===""&&(kt="./"),kt};api$a.removeDotSegments=nt=>{if(nt.length===0)return"";const rt=nt.split("/"),it=[];for(;rt.length>0;){const st=rt.shift(),bt=rt.length===0;if(st==="."){bt&&it.push("");continue}if(st===".."){it.pop(),bt&&it.push("");continue}it.push(st)}return nt[0]==="/"&&it.length>0&&it[0]!==""&&it.unshift(""),it.length===1&&it[0]===""?"/":it.join("/")};const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;api$a.isAbsolute=nt=>types$4.isString(nt)&&isAbsoluteRegex.test(nt);api$a.isRelative=nt=>types$4.isString(nt);const{parseLinkHeader,buildHeaders}=util$5,{LINK_HEADER_CONTEXT}=constants,JsonLdError$9=JsonLdError_1,RequestQueue=requireRequestQueue(),{prependBase:prependBase$2}=url$1,REGEX_LINK_HEADER=/(^|(\r\n))link:/i;var xhr=({secure:nt,headers:rt={},xhr:it}={headers:{}})=>{return rt=buildHeaders(rt),new RequestQueue().wrapLoader(bt);async function bt(xt){if(xt.indexOf("http:")!==0&&xt.indexOf("https:")!==0)throw new JsonLdError$9('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:xt});if(nt&&xt.indexOf("https")!==0)throw new JsonLdError$9(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:xt});let Et;try{Et=await _get(it,xt,rt)}catch(Dt){throw new JsonLdError$9("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:xt,cause:Dt})}if(Et.status>=400)throw new JsonLdError$9("URL could not be dereferenced: "+Et.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:xt,httpStatusCode:Et.status});let kt={contextUrl:null,documentUrl:xt,document:Et.response},Lt=null;const Pt=Et.getResponseHeader("Content-Type");let Rt;if(REGEX_LINK_HEADER.test(Et.getAllResponseHeaders())&&(Rt=Et.getResponseHeader("Link")),Rt&&Pt!=="application/ld+json"){const Dt=parseLinkHeader(Rt),Bt=Dt[LINK_HEADER_CONTEXT];if(Array.isArray(Bt))throw new JsonLdError$9("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:xt});Bt&&(kt.contextUrl=Bt.target),Lt=Dt.alternate,Lt&&Lt.type=="application/ld+json"&&!(Pt||"").match(/^application\/(\w*\+)?json$/)&&(kt=await bt(prependBase$2(xt,Lt.target)))}return kt}};function _get(nt,rt,it){nt=nt||XMLHttpRequest;const st=new nt;return new Promise((bt,xt)=>{st.onload=()=>bt(st),st.onerror=Et=>xt(Et),st.open("GET",rt,!0);for(const Et in it)st.setRequestHeader(Et,it[Et]);st.send()})}const xhrLoader=xhr,api$9={};var platformBrowser=api$9;api$9.setupDocumentLoaders=function(nt){typeof XMLHttpRequest<"u"&&(nt.documentLoaders.xhr=xhrLoader,nt.useDocumentLoader("xhr"))};api$9.setupGlobals=function(nt){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:nt.JsonLdProcessor})};var iterator,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator=function(nt){nt.prototype[Symbol.iterator]=function*(){for(let rt=this.head;rt;rt=rt.next)yield rt.value}}),iterator}var yallist=Yallist$1;Yallist$1.Node=Node$1;Yallist$1.create=Yallist$1;function Yallist$1(nt){var rt=this;if(rt instanceof Yallist$1||(rt=new Yallist$1),rt.tail=null,rt.head=null,rt.length=0,nt&&typeof nt.forEach=="function")nt.forEach(function(bt){rt.push(bt)});else if(arguments.length>0)for(var it=0,st=arguments.length;it<st;it++)rt.push(arguments[it]);return rt}Yallist$1.prototype.removeNode=function(nt){if(nt.list!==this)throw new Error("removing node which does not belong to this list");var rt=nt.next,it=nt.prev;return rt&&(rt.prev=it),it&&(it.next=rt),nt===this.head&&(this.head=rt),nt===this.tail&&(this.tail=it),nt.list.length--,nt.next=null,nt.prev=null,nt.list=null,rt};Yallist$1.prototype.unshiftNode=function(nt){if(nt!==this.head){nt.list&&nt.list.removeNode(nt);var rt=this.head;nt.list=this,nt.next=rt,rt&&(rt.prev=nt),this.head=nt,this.tail||(this.tail=nt),this.length++}};Yallist$1.prototype.pushNode=function(nt){if(nt!==this.tail){nt.list&&nt.list.removeNode(nt);var rt=this.tail;nt.list=this,nt.prev=rt,rt&&(rt.next=nt),this.tail=nt,this.head||(this.head=nt),this.length++}};Yallist$1.prototype.push=function(){for(var nt=0,rt=arguments.length;nt<rt;nt++)push(this,arguments[nt]);return this.length};Yallist$1.prototype.unshift=function(){for(var nt=0,rt=arguments.length;nt<rt;nt++)unshift(this,arguments[nt]);return this.length};Yallist$1.prototype.pop=function(){if(!!this.tail){var nt=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,nt}};Yallist$1.prototype.shift=function(){if(!!this.head){var nt=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,nt}};Yallist$1.prototype.forEach=function(nt,rt){rt=rt||this;for(var it=this.head,st=0;it!==null;st++)nt.call(rt,it.value,st,this),it=it.next};Yallist$1.prototype.forEachReverse=function(nt,rt){rt=rt||this;for(var it=this.tail,st=this.length-1;it!==null;st--)nt.call(rt,it.value,st,this),it=it.prev};Yallist$1.prototype.get=function(nt){for(var rt=0,it=this.head;it!==null&&rt<nt;rt++)it=it.next;if(rt===nt&&it!==null)return it.value};Yallist$1.prototype.getReverse=function(nt){for(var rt=0,it=this.tail;it!==null&&rt<nt;rt++)it=it.prev;if(rt===nt&&it!==null)return it.value};Yallist$1.prototype.map=function(nt,rt){rt=rt||this;for(var it=new Yallist$1,st=this.head;st!==null;)it.push(nt.call(rt,st.value,this)),st=st.next;return it};Yallist$1.prototype.mapReverse=function(nt,rt){rt=rt||this;for(var it=new Yallist$1,st=this.tail;st!==null;)it.push(nt.call(rt,st.value,this)),st=st.prev;return it};Yallist$1.prototype.reduce=function(nt,rt){var it,st=this.head;if(arguments.length>1)it=rt;else if(this.head)st=this.head.next,it=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var bt=0;st!==null;bt++)it=nt(it,st.value,bt),st=st.next;return it};Yallist$1.prototype.reduceReverse=function(nt,rt){var it,st=this.tail;if(arguments.length>1)it=rt;else if(this.tail)st=this.tail.prev,it=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var bt=this.length-1;st!==null;bt--)it=nt(it,st.value,bt),st=st.prev;return it};Yallist$1.prototype.toArray=function(){for(var nt=new Array(this.length),rt=0,it=this.head;it!==null;rt++)nt[rt]=it.value,it=it.next;return nt};Yallist$1.prototype.toArrayReverse=function(){for(var nt=new Array(this.length),rt=0,it=this.tail;it!==null;rt++)nt[rt]=it.value,it=it.prev;return nt};Yallist$1.prototype.slice=function(nt,rt){rt=rt||this.length,rt<0&&(rt+=this.length),nt=nt||0,nt<0&&(nt+=this.length);var it=new Yallist$1;if(rt<nt||rt<0)return it;nt<0&&(nt=0),rt>this.length&&(rt=this.length);for(var st=0,bt=this.head;bt!==null&&st<nt;st++)bt=bt.next;for(;bt!==null&&st<rt;st++,bt=bt.next)it.push(bt.value);return it};Yallist$1.prototype.sliceReverse=function(nt,rt){rt=rt||this.length,rt<0&&(rt+=this.length),nt=nt||0,nt<0&&(nt+=this.length);var it=new Yallist$1;if(rt<nt||rt<0)return it;nt<0&&(nt=0),rt>this.length&&(rt=this.length);for(var st=this.length,bt=this.tail;bt!==null&&st>rt;st--)bt=bt.prev;for(;bt!==null&&st>nt;st--,bt=bt.prev)it.push(bt.value);return it};Yallist$1.prototype.splice=function(nt,rt,...it){nt>this.length&&(nt=this.length-1),nt<0&&(nt=this.length+nt);for(var st=0,bt=this.head;bt!==null&&st<nt;st++)bt=bt.next;for(var xt=[],st=0;bt&&st<rt;st++)xt.push(bt.value),bt=this.removeNode(bt);bt===null&&(bt=this.tail),bt!==this.head&&bt!==this.tail&&(bt=bt.prev);for(var st=0;st<it.length;st++)bt=insert(this,bt,it[st]);return xt};Yallist$1.prototype.reverse=function(){for(var nt=this.head,rt=this.tail,it=nt;it!==null;it=it.prev){var st=it.prev;it.prev=it.next,it.next=st}return this.head=rt,this.tail=nt,this};function insert(nt,rt,it){var st=rt===nt.head?new Node$1(it,null,rt,nt):new Node$1(it,rt,rt.next,nt);return st.next===null&&(nt.tail=st),st.prev===null&&(nt.head=st),nt.length++,st}function push(nt,rt){nt.tail=new Node$1(rt,nt.tail,null,nt),nt.head||(nt.head=nt.tail),nt.length++}function unshift(nt,rt){nt.head=new Node$1(rt,null,nt.head,nt),nt.tail||(nt.tail=nt.head),nt.length++}function Node$1(nt,rt,it,st){if(!(this instanceof Node$1))return new Node$1(nt,rt,it,st);this.list=st,this.value=nt,rt?(rt.next=this,this.prev=rt):this.prev=null,it?(it.prev=this,this.next=it):this.next=null}try{requireIterator()(Yallist$1)}catch(nt){}const Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(rt){if(typeof rt=="number"&&(rt={max:rt}),rt||(rt={}),rt.max&&(typeof rt.max!="number"||rt.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=rt.max||1/0;const it=rt.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof it!="function"?naiveLength:it,this[ALLOW_STALE]=rt.stale||!1,rt.maxAge&&typeof rt.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=rt.maxAge||0,this[DISPOSE]=rt.dispose,this[NO_DISPOSE_ON_SET]=rt.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=rt.updateAgeOnGet||!1,this.reset()}set max(rt){if(typeof rt!="number"||rt<0)throw new TypeError("max must be a non-negative number");this[MAX]=rt||1/0,trim(this)}get max(){return this[MAX]}set allowStale(rt){this[ALLOW_STALE]=!!rt}get allowStale(){return this[ALLOW_STALE]}set maxAge(rt){if(typeof rt!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=rt,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(rt){typeof rt!="function"&&(rt=naiveLength),rt!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=rt,this[LENGTH]=0,this[LRU_LIST].forEach(it=>{it.length=this[LENGTH_CALCULATOR](it.value,it.key),this[LENGTH]+=it.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(rt,it){it=it||this;for(let st=this[LRU_LIST].tail;st!==null;){const bt=st.prev;forEachStep(this,rt,st,it),st=bt}}forEach(rt,it){it=it||this;for(let st=this[LRU_LIST].head;st!==null;){const bt=st.next;forEachStep(this,rt,st,it),st=bt}}keys(){return this[LRU_LIST].toArray().map(rt=>rt.key)}values(){return this[LRU_LIST].toArray().map(rt=>rt.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(rt=>this[DISPOSE](rt.key,rt.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(rt=>isStale(this,rt)?!1:{k:rt.key,v:rt.value,e:rt.now+(rt.maxAge||0)}).toArray().filter(rt=>rt)}dumpLru(){return this[LRU_LIST]}set(rt,it,st){if(st=st||this[MAX_AGE],st&&typeof st!="number")throw new TypeError("maxAge must be a number");const bt=st?Date.now():0,xt=this[LENGTH_CALCULATOR](it,rt);if(this[CACHE].has(rt)){if(xt>this[MAX])return del(this,this[CACHE].get(rt)),!1;const Lt=this[CACHE].get(rt).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](rt,Lt.value)),Lt.now=bt,Lt.maxAge=st,Lt.value=it,this[LENGTH]+=xt-Lt.length,Lt.length=xt,this.get(rt),trim(this),!0}const Et=new Entry(rt,it,xt,bt,st);return Et.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](rt,it),!1):(this[LENGTH]+=Et.length,this[LRU_LIST].unshift(Et),this[CACHE].set(rt,this[LRU_LIST].head),trim(this),!0)}has(rt){if(!this[CACHE].has(rt))return!1;const it=this[CACHE].get(rt).value;return!isStale(this,it)}get(rt){return get(this,rt,!0)}peek(rt){return get(this,rt,!1)}pop(){const rt=this[LRU_LIST].tail;return rt?(del(this,rt),rt.value):null}del(rt){del(this,this[CACHE].get(rt))}load(rt){this.reset();const it=Date.now();for(let st=rt.length-1;st>=0;st--){const bt=rt[st],xt=bt.e||0;if(xt===0)this.set(bt.k,bt.v);else{const Et=xt-it;Et>0&&this.set(bt.k,bt.v,Et)}}}prune(){this[CACHE].forEach((rt,it)=>get(this,it,!1))}}const get=(nt,rt,it)=>{const st=nt[CACHE].get(rt);if(st){const bt=st.value;if(isStale(nt,bt)){if(del(nt,st),!nt[ALLOW_STALE])return}else it&&(nt[UPDATE_AGE_ON_GET]&&(st.value.now=Date.now()),nt[LRU_LIST].unshiftNode(st));return bt.value}},isStale=(nt,rt)=>{if(!rt||!rt.maxAge&&!nt[MAX_AGE])return!1;const it=Date.now()-rt.now;return rt.maxAge?it>rt.maxAge:nt[MAX_AGE]&&it>nt[MAX_AGE]},trim=nt=>{if(nt[LENGTH]>nt[MAX])for(let rt=nt[LRU_LIST].tail;nt[LENGTH]>nt[MAX]&&rt!==null;){const it=rt.prev;del(nt,rt),rt=it}},del=(nt,rt)=>{if(rt){const it=rt.value;nt[DISPOSE]&&nt[DISPOSE](it.key,it.value),nt[LENGTH]-=it.length,nt[CACHE].delete(it.key),nt[LRU_LIST].removeNode(rt)}};class Entry{constructor(rt,it,st,bt,xt){this.key=rt,this.value=it,this.length=st,this.now=bt,this.maxAge=xt||0}}const forEachStep=(nt,rt,it,st)=>{let bt=it.value;isStale(nt,bt)&&(del(nt,it),nt[ALLOW_STALE]||(bt=void 0)),bt&&rt.call(st,bt.value,bt.key,nt)};var lruCache=LRUCache;const LRU$1=lruCache,MAX_ACTIVE_CONTEXTS=10;var ResolvedContext_1=class{constructor({document:rt}){this.document=rt,this.cache=new LRU$1({max:MAX_ACTIVE_CONTEXTS})}getProcessed(rt){return this.cache.get(rt)}setProcessed(rt,it){this.cache.set(rt,it)}};const{isArray:_isArray$5,isObject:_isObject$4,isString:_isString$4}=types$7,{asArray:_asArray$4}=util$5,{prependBase:prependBase$1}=url$1,JsonLdError$8=JsonLdError_1,ResolvedContext=ResolvedContext_1,MAX_CONTEXT_URLS=10;var ContextResolver_1=class{constructor({sharedCache:rt}){this.perOpCache=new Map,this.sharedCache=rt}async resolve({activeCtx:rt,context:it,documentLoader:st,base:bt,cycles:xt=new Set}){it&&_isObject$4(it)&&it["@context"]&&(it=it["@context"]),it=_asArray$4(it);const Et=[];for(const kt of it){if(_isString$4(kt)){let Rt=this._get(kt);Rt||(Rt=await this._resolveRemoteContext({activeCtx:rt,url:kt,documentLoader:st,base:bt,cycles:xt})),_isArray$5(Rt)?Et.push(...Rt):Et.push(Rt);continue}if(kt===null){Et.push(new ResolvedContext({document:null}));continue}_isObject$4(kt)||_throwInvalidLocalContext(it);const Lt=JSON.stringify(kt);let Pt=this._get(Lt);Pt||(Pt=new ResolvedContext({document:kt}),this._cacheResolvedContext({key:Lt,resolved:Pt,tag:"static"})),Et.push(Pt)}return Et}_get(rt){let it=this.perOpCache.get(rt);if(!it){const st=this.sharedCache.get(rt);st&&(it=st.get("static"),it&&this.perOpCache.set(rt,it))}return it}_cacheResolvedContext({key:rt,resolved:it,tag:st}){if(this.perOpCache.set(rt,it),st!==void 0){let bt=this.sharedCache.get(rt);bt||(bt=new Map,this.sharedCache.set(rt,bt)),bt.set(st,it)}return it}async _resolveRemoteContext({activeCtx:rt,url:it,documentLoader:st,base:bt,cycles:xt}){it=prependBase$1(bt,it);const{context:Et,remoteDoc:kt}=await this._fetchContext({activeCtx:rt,url:it,documentLoader:st,cycles:xt});bt=kt.documentUrl||it,_resolveContextUrls({context:Et,base:bt});const Lt=await this.resolve({activeCtx:rt,context:Et,documentLoader:st,base:bt,cycles:xt});return this._cacheResolvedContext({key:it,resolved:Lt,tag:kt.tag}),Lt}async _fetchContext({activeCtx:rt,url:it,documentLoader:st,cycles:bt}){if(bt.size>MAX_CONTEXT_URLS)throw new JsonLdError$8("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:rt.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:MAX_CONTEXT_URLS});if(bt.has(it))throw new JsonLdError$8("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:rt.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:it});bt.add(it);let xt,Et;try{Et=await st(it),xt=Et.document||null,_isString$4(xt)&&(xt=JSON.parse(xt))}catch(kt){throw new JsonLdError$8("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:it,cause:kt})}if(!_isObject$4(xt))throw new JsonLdError$8("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:it});return"@context"in xt?xt={"@context":xt["@context"]}:xt={"@context":{}},Et.contextUrl&&(_isArray$5(xt["@context"])||(xt["@context"]=[xt["@context"]]),xt["@context"].push(Et.contextUrl)),{context:xt,remoteDoc:Et}}};function _throwInvalidLocalContext(nt){throw new JsonLdError$8("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:nt})}function _resolveContextUrls({context:nt,base:rt}){if(!nt)return;const it=nt["@context"];if(_isString$4(it)){nt["@context"]=prependBase$1(rt,it);return}if(_isArray$5(it)){for(let st=0;st<it.length;++st){const bt=it[st];if(_isString$4(bt)){it[st]=prependBase$1(rt,bt);continue}_isObject$4(bt)&&_resolveContextUrls({context:{"@context":bt},base:rt})}return}if(!!_isObject$4(it))for(const st in it)_resolveContextUrls({context:it[st],base:rt})}var NQuads$1=rdfCanonize.exports.NQuads;const JsonLdError$7=JsonLdError_1,{isArray:_isArray$4}=types$7,{asArray:_asArray$3}=util$5,api$8={};var events=api$8;api$8.defaultEventHandler=null;api$8.setupEventHandler=({options:nt={}})=>{const rt=[].concat(nt.safe?api$8.safeEventHandler:[],nt.eventHandler?_asArray$3(nt.eventHandler):[],api$8.defaultEventHandler?api$8.defaultEventHandler:[]);return rt.length===0?null:rt};api$8.handleEvent=({event:nt,options:rt})=>{_handle({event:nt,handlers:rt.eventHandler})};function _handle({event:nt,handlers:rt}){let it=!0;for(let st=0;it&&st<rt.length;++st){it=!1;const bt=rt[st];if(_isArray$4(bt))it=_handle({event:nt,handlers:bt});else if(typeof bt=="function")bt({event:nt,next:()=>{it=!0}});else if(typeof bt=="object")nt.code in bt?bt[nt.code]({event:nt,next:()=>{it=!0}}):it=!0;else throw new JsonLdError$7("Invalid event handler.","jsonld.InvalidEventHandler",{event:nt})}return it}const _notSafeEventCodes=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);api$8.safeEventHandler=function nt({event:rt,next:it}){if(rt.level==="warning"&&_notSafeEventCodes.has(rt.code))throw new JsonLdError$7("Safe mode validation error.","jsonld.ValidationError",{event:rt});it()};api$8.logEventHandler=function nt({event:rt,next:it}){console.log(`EVENT: ${rt.message}`,{event:rt}),it()};api$8.logWarningEventHandler=function nt({event:rt,next:it}){rt.level==="warning"&&console.warn(`WARNING: ${rt.message}`,{event:rt}),it()};api$8.unhandledEventHandler=function nt({event:rt}){throw new JsonLdError$7("No handler for event.","jsonld.UnhandledEvent",{event:rt})};api$8.setDefaultEventHandler=function({eventHandler:nt}={}){api$8.defaultEventHandler=nt?_asArray$3(nt):null};const util$4=util$5,JsonLdError$6=JsonLdError_1,{isArray:_isArray$3,isObject:_isObject$3,isString:_isString$3,isUndefined:_isUndefined$2}=types$7,{isAbsolute:_isAbsoluteIri$2,isRelative:_isRelativeIri,prependBase}=url$1,{handleEvent:_handleEvent$3}=events,{REGEX_BCP47:REGEX_BCP47$2,REGEX_KEYWORD:REGEX_KEYWORD$2,asArray:_asArray$2,compareShortestLeast:_compareShortestLeast$1}=util$5,INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,api$7={};var context=api$7;api$7.process=async({activeCtx:nt,localCtx:rt,options:it,propagate:st=!0,overrideProtected:bt=!1,cycles:xt=new Set})=>{if(_isObject$3(rt)&&"@context"in rt&&_isArray$3(rt["@context"])&&(rt=rt["@context"]),_asArray$2(rt).length===0)return nt;const kt=[],Lt=[({event:Bt,next:Ft})=>{kt.push(Bt),Ft()}];it.eventHandler&&Lt.push(it.eventHandler);const Pt=it;it={...it,eventHandler:Lt};const Rt=await it.contextResolver.resolve({activeCtx:nt,context:rt,documentLoader:it.documentLoader,base:it.base});_isObject$3(Rt[0].document)&&typeof Rt[0].document["@propagate"]=="boolean"&&(st=Rt[0].document["@propagate"]);let Dt=nt;!st&&!Dt.previousContext&&(Dt=Dt.clone(),Dt.previousContext=nt);for(const Bt of Rt){let{document:Ft}=Bt;if(nt=Dt,Ft===null){if(!bt&&Object.keys(nt.protected).length!==0)throw new JsonLdError$6("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Dt=nt=api$7.getInitialContext(it).clone();continue}const Yt=Bt.getProcessed(nt);if(Yt){if(Pt.eventHandler)for(const Wt of Yt.events)_handleEvent$3({event:Wt,options:Pt});Dt=nt=Yt.context;continue}if(_isObject$3(Ft)&&"@context"in Ft&&(Ft=Ft["@context"]),!_isObject$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Ft});Dt=Dt.clone();const Zt=new Map;if("@version"in Ft){if(Ft["@version"]!==1.1)throw new JsonLdError$6("Unsupported JSON-LD version: "+Ft["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Ft});if(nt.processingMode&&nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("@version: "+Ft["@version"]+" not compatible with "+nt.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Ft});Dt.processingMode="json-ld-1.1",Dt["@version"]=Ft["@version"],Zt.set("@version",!0)}if(Dt.processingMode=Dt.processingMode||nt.processingMode,"@base"in Ft){let Wt=Ft["@base"];if(!(Wt===null||_isAbsoluteIri$2(Wt)))if(_isRelativeIri(Wt))Wt=prependBase(Dt["@base"],Wt);else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Ft});Dt["@base"]=Wt,Zt.set("@base",!0)}if("@vocab"in Ft){const Wt=Ft["@vocab"];if(Wt===null)delete Dt["@vocab"];else if(_isString$3(Wt)){if(!_isAbsoluteIri$2(Wt)&&api$7.processingMode(Dt,1))throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ft});{const Qt=_expandIri$3(Dt,Wt,{vocab:!0,base:!0},void 0,void 0,it);_isAbsoluteIri$2(Qt)||it.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Qt}},options:it}),Dt["@vocab"]=Qt}}else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ft});Zt.set("@vocab",!0)}if("@language"in Ft){const Wt=Ft["@language"];if(Wt===null)delete Dt["@language"];else if(_isString$3(Wt))Wt.match(REGEX_BCP47$2)||it.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Wt}},options:it}),Dt["@language"]=Wt.toLowerCase();else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Ft});Zt.set("@language",!0)}if("@direction"in Ft){const Wt=Ft["@direction"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @direction not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Ft});if(Wt===null)delete Dt["@direction"];else{if(Wt!=="ltr"&&Wt!=="rtl")throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Ft});Dt["@direction"]=Wt}Zt.set("@direction",!0)}if("@propagate"in Ft){const Wt=Ft["@propagate"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @propagate not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ft});if(typeof Wt!="boolean")throw new JsonLdError$6("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:rt});Zt.set("@propagate",!0)}if("@import"in Ft){const Wt=Ft["@import"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @import not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ft});if(!_isString$3(Wt))throw new JsonLdError$6("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:rt});const Qt=await it.contextResolver.resolve({activeCtx:nt,context:Wt,documentLoader:it.documentLoader,base:it.base});if(Qt.length!==1)throw new JsonLdError$6("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:rt});const Kt=Qt[0].getProcessed(nt);if(Kt)Ft=Kt;else{const on=Qt[0].document;if("@import"in on)throw new JsonLdError$6("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:rt});for(const nn in on)Ft.hasOwnProperty(nn)||(Ft[nn]=on[nn]);Qt[0].setProcessed(nt,Ft)}Zt.set("@import",!0)}Zt.set("@protected",Ft["@protected"]||!1);for(const Wt in Ft)if(api$7.createTermDefinition({activeCtx:Dt,localCtx:Ft,term:Wt,defined:Zt,options:it,overrideProtected:bt}),_isObject$3(Ft[Wt])&&"@context"in Ft[Wt]){const Qt=Ft[Wt]["@context"];let Kt=!0;if(_isString$3(Qt)){const on=prependBase(it.base,Qt);xt.has(on)?Kt=!1:xt.add(on)}if(Kt)try{await api$7.process({activeCtx:Dt.clone(),localCtx:Ft[Wt]["@context"],overrideProtected:!0,options:it,cycles:xt})}catch{throw new JsonLdError$6("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Ft[Wt]["@context"],term:Wt})}}Bt.setProcessed(nt,{context:Dt,events:kt})}return Dt};api$7.createTermDefinition=({activeCtx:nt,localCtx:rt,term:it,defined:st,options:bt,overrideProtected:xt=!1})=>{if(st.has(it)){if(st.get(it))return;throw new JsonLdError$6("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:rt,term:it})}st.set(it,!1);let Et;if(rt.hasOwnProperty(it)&&(Et=rt[it]),it==="@type"&&_isObject$3(Et)&&(Et["@container"]||"@set")==="@set"&&api$7.processingMode(nt,1.1)){const Ft=["@container","@id","@protected"],Yt=Object.keys(Et);if(Yt.length===0||Yt.some(Zt=>!Ft.includes(Zt)))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:rt,term:it})}else{if(api$7.isKeyword(it))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:rt,term:it});if(it.match(REGEX_KEYWORD$2)){bt.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:it}},options:bt});return}else if(it==="")throw new JsonLdError$6("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:rt})}const kt=nt.mappings.get(it);nt.mappings.has(it)&&nt.mappings.delete(it);let Lt=!1;if((_isString$3(Et)||Et===null)&&(Lt=!0,Et={"@id":Et}),!_isObject$3(Et))throw new JsonLdError$6("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:rt});const Pt={};nt.mappings.set(it,Pt),Pt.reverse=!1;const Rt=["@container","@id","@language","@reverse","@type"];api$7.processingMode(nt,1.1)&&Rt.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ft in Et)if(!Rt.includes(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a term definition must not contain "+Ft,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});const Dt=it.indexOf(":");if(Pt._termHasColon=Dt>0,"@reverse"in Et){if("@id"in Et)throw new JsonLdError$6("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});if("@nest"in Et)throw new JsonLdError$6("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});const Ft=Et["@reverse"];if(!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(Ft.match(REGEX_KEYWORD$2)){bt.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ft}},options:bt}),kt?nt.mappings.set(it,kt):nt.mappings.delete(it);return}const Yt=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,bt);if(!_isAbsoluteIri$2(Yt))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});Pt["@id"]=Yt,Pt.reverse=!0}else if("@id"in Et){let Ft=Et["@id"];if(Ft&&!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(Ft===null)Pt["@id"]=null;else if(!api$7.isKeyword(Ft)&&Ft.match(REGEX_KEYWORD$2)){bt.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ft}},options:bt}),kt?nt.mappings.set(it,kt):nt.mappings.delete(it);return}else if(Ft!==it){if(Ft=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,bt),!_isAbsoluteIri$2(Ft)&&!api$7.isKeyword(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(it.match(/(?::[^:])|\//)){const Yt=new Map(st).set(it,!0);if(_expandIri$3(nt,it,{vocab:!0,base:!1},rt,Yt,bt)!==Ft)throw new JsonLdError$6("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt})}Pt["@id"]=Ft,Pt._prefix=Lt&&!Pt._termHasColon&&Ft.match(/[:\/\?#\[\]@]$/)}}if(!("@id"in Pt))if(Pt._termHasColon){const Ft=it.substr(0,Dt);if(rt.hasOwnProperty(Ft)&&api$7.createTermDefinition({activeCtx:nt,localCtx:rt,term:Ft,defined:st,options:bt}),nt.mappings.has(Ft)){const Yt=it.substr(Dt+1);Pt["@id"]=nt.mappings.get(Ft)["@id"]+Yt}else Pt["@id"]=it}else if(it==="@type")Pt["@id"]=it;else{if(!("@vocab"in nt))throw new JsonLdError$6("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt,term:it});Pt["@id"]=nt["@vocab"]+it}if((Et["@protected"]===!0||st.get("@protected")===!0&&Et["@protected"]!==!1)&&(nt.protected[it]=!0,Pt.protected=!0),st.set(it,!0),"@type"in Et){let Ft=Et["@type"];if(!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt});if(Ft==="@json"||Ft==="@none"){if(api$7.processingMode(nt,1))throw new JsonLdError$6(`Invalid JSON-LD syntax; an @context @type value must not be "${Ft}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}else if(Ft!=="@id"&&Ft!=="@vocab"){if(Ft=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,bt),!_isAbsoluteIri$2(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt});if(Ft.indexOf("_:")===0)throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}Pt["@type"]=Ft}if("@container"in Et){const Ft=_isString$3(Et["@container"])?[Et["@container"]]:Et["@container"]||[],Yt=["@list","@set","@index","@language"];let Zt=!0;const Wt=Ft.includes("@set");if(api$7.processingMode(nt,1.1)){if(Yt.push("@graph","@id","@type"),Ft.includes("@list")){if(Ft.length!==1)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:rt})}else if(Ft.includes("@graph")){if(Ft.some(Qt=>Qt!=="@graph"&&Qt!=="@id"&&Qt!=="@index"&&Qt!=="@set"))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:rt})}else Zt&=Ft.length<=(Wt?2:1);if(Ft.includes("@type")&&(Pt["@type"]=Pt["@type"]||"@id",!["@id","@vocab"].includes(Pt["@type"])))throw new JsonLdError$6("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}else Zt&=!_isArray$3(Et["@container"]),Zt&=Ft.length<=1;if(Zt&=Ft.every(Qt=>Yt.includes(Qt)),Zt&=!(Wt&&Ft.includes("@list")),!Zt)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Yt.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:rt});if(Pt.reverse&&!Ft.every(Qt=>["@index","@set"].includes(Qt)))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});Pt["@container"]=Ft}if("@index"in Et){if(!("@container"in Et)||!Pt["@container"].includes("@index"))throw new JsonLdError$6(`Invalid JSON-LD syntax; @index without @index in @container: "${Et["@index"]}" on term "${it}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(!_isString$3(Et["@index"])||Et["@index"].indexOf("@")===0)throw new JsonLdError$6(`Invalid JSON-LD syntax; @index must expand to an IRI: "${Et["@index"]}" on term "${it}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});Pt["@index"]=Et["@index"]}if("@context"in Et&&(Pt["@context"]=Et["@context"]),"@language"in Et&&!("@type"in Et)){let Ft=Et["@language"];if(Ft!==null&&!_isString$3(Ft))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:rt});Ft!==null&&(Ft=Ft.toLowerCase()),Pt["@language"]=Ft}if("@prefix"in Et){if(it.match(/:|\//))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(api$7.isKeyword(Pt["@id"]))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(typeof Et["@prefix"]=="boolean")Pt._prefix=Et["@prefix"]===!0;else throw new JsonLdError$6("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:rt})}if("@direction"in Et){const Ft=Et["@direction"];if(Ft!==null&&Ft!=="ltr"&&Ft!=="rtl")throw new JsonLdError$6('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:rt});Pt["@direction"]=Ft}if("@nest"in Et){const Ft=Et["@nest"];if(!_isString$3(Ft)||Ft!=="@nest"&&Ft.indexOf("@")===0)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:rt});Pt["@nest"]=Ft}// disallow aliasing @context and @preserve
const Bt=Pt["@id"];if(Bt==="@context"||Bt==="@preserve")throw new JsonLdError$6("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:rt});if(kt&&kt.protected&&!xt&&(nt.protected[it]=!0,Pt.protected=!0,!_deepCompare(kt,Pt)))throw new JsonLdError$6("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:rt,term:it})};api$7.expandIri=(nt,rt,it,st)=>_expandIri$3(nt,rt,it,void 0,void 0,st);function _expandIri$3(nt,rt,it,st,bt,xt){if(rt===null||!_isString$3(rt)||api$7.isKeyword(rt))return rt;if(rt.match(REGEX_KEYWORD$2))return null;if(st&&st.hasOwnProperty(rt)&&bt.get(rt)!==!0&&api$7.createTermDefinition({activeCtx:nt,localCtx:st,term:rt,defined:bt,options:xt}),it=it||{},it.vocab){const kt=nt.mappings.get(rt);if(kt===null)return null;if(_isObject$3(kt)&&"@id"in kt)return kt["@id"]}const Et=rt.indexOf(":");if(Et>0){const kt=rt.substr(0,Et),Lt=rt.substr(Et+1);if(kt==="_"||Lt.indexOf("//")===0)return rt;st&&st.hasOwnProperty(kt)&&api$7.createTermDefinition({activeCtx:nt,localCtx:st,term:kt,defined:bt,options:xt});const Pt=nt.mappings.get(kt);if(Pt&&Pt._prefix)return Pt["@id"]+Lt;if(_isAbsoluteIri$2(rt))return rt}if(it.vocab&&"@vocab"in nt)rt=nt["@vocab"]+rt;else if(it.base){let kt,Lt;"@base"in nt?nt["@base"]?(Lt=prependBase(xt.base,nt["@base"]),kt=prependBase(Lt,rt)):(Lt=nt["@base"],kt=rt):(Lt=xt.base,kt=prependBase(xt.base,rt)),rt=kt}return rt}api$7.getInitialContext=nt=>{const rt=JSON.stringify({processingMode:nt.processingMode}),it=INITIAL_CONTEXT_CACHE.get(rt);if(it)return it;const st={processingMode:nt.processingMode,mappings:new Map,inverse:null,getInverse:bt,clone:kt,revertToPreviousContext:Lt,protected:{}};return INITIAL_CONTEXT_CACHE.size===INITIAL_CONTEXT_CACHE_MAX_SIZE&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(rt,st),st;function bt(){const Pt=this;if(Pt.inverse)return Pt.inverse;const Rt=Pt.inverse={},Dt=Pt.fastCurieMap={},Bt={},Ft=(Pt["@language"]||"@none").toLowerCase(),Yt=Pt["@direction"],Zt=Pt.mappings,Wt=[...Zt.keys()].sort(_compareShortestLeast$1);for(const Qt of Wt){const Kt=Zt.get(Qt);if(Kt===null)continue;let on=Kt["@container"]||"@none";if(on=[].concat(on).sort().join(""),Kt["@id"]===null)continue;const nn=_asArray$2(Kt["@id"]);for(const mn of nn){let gn=Rt[mn];const Tn=api$7.isKeyword(mn);if(gn)!Tn&&!Kt._termHasColon&&Bt[mn].push(Qt);else if(Rt[mn]=gn={},!Tn&&!Kt._termHasColon){Bt[mn]=[Qt];const An={iri:mn,terms:Bt[mn]};mn[0]in Dt?Dt[mn[0]].push(An):Dt[mn[0]]=[An]}if(gn[on]||(gn[on]={"@language":{},"@type":{},"@any":{}}),gn=gn[on],Et(Qt,gn["@any"],"@none"),Kt.reverse)Et(Qt,gn["@type"],"@reverse");else if(Kt["@type"]==="@none")Et(Qt,gn["@any"],"@none"),Et(Qt,gn["@language"],"@none"),Et(Qt,gn["@type"],"@none");else if("@type"in Kt)Et(Qt,gn["@type"],Kt["@type"]);else if("@language"in Kt&&"@direction"in Kt){const An=Kt["@language"],kn=Kt["@direction"];An&&kn?Et(Qt,gn["@language"],`${An}_${kn}`.toLowerCase()):An?Et(Qt,gn["@language"],An.toLowerCase()):kn?Et(Qt,gn["@language"],`_${kn}`):Et(Qt,gn["@language"],"@null")}else"@language"in Kt?Et(Qt,gn["@language"],(Kt["@language"]||"@null").toLowerCase()):"@direction"in Kt?Kt["@direction"]?Et(Qt,gn["@language"],`_${Kt["@direction"]}`):Et(Qt,gn["@language"],"@none"):Yt?(Et(Qt,gn["@language"],`_${Yt}`),Et(Qt,gn["@language"],"@none"),Et(Qt,gn["@type"],"@none")):(Et(Qt,gn["@language"],Ft),Et(Qt,gn["@language"],"@none"),Et(Qt,gn["@type"],"@none"))}}for(const Qt in Dt)xt(Dt,Qt,1);return Rt}function xt(Pt,Rt,Dt){const Bt=Pt[Rt],Ft=Pt[Rt]={};let Yt,Zt;for(const Wt of Bt)Yt=Wt.iri,Dt>=Yt.length?Zt="":Zt=Yt[Dt],Zt in Ft?Ft[Zt].push(Wt):Ft[Zt]=[Wt];for(const Wt in Ft)Wt!==""&&xt(Ft,Wt,Dt+1)}function Et(Pt,Rt,Dt){Rt.hasOwnProperty(Dt)||(Rt[Dt]=Pt)}function kt(){const Pt={};return Pt.mappings=util$4.clone(this.mappings),Pt.clone=this.clone,Pt.inverse=null,Pt.getInverse=this.getInverse,Pt.protected=util$4.clone(this.protected),this.previousContext&&(Pt.previousContext=this.previousContext.clone()),Pt.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Pt["@base"]=this["@base"]),"@language"in this&&(Pt["@language"]=this["@language"]),"@vocab"in this&&(Pt["@vocab"]=this["@vocab"]),Pt}function Lt(){return this.previousContext?this.previousContext.clone():this}};api$7.getContextValue=(nt,rt,it)=>{if(rt===null)return it==="@context"?void 0:null;if(nt.mappings.has(rt)){const st=nt.mappings.get(rt);if(_isUndefined$2(it))return st;if(st.hasOwnProperty(it))return st[it]}if(it==="@language"&&it in nt||it==="@direction"&&it in nt)return nt[it];if(it!=="@context")return null};api$7.processingMode=(nt,rt)=>rt.toString()>="1.1"?!nt.processingMode||nt.processingMode>="json-ld-"+rt.toString():nt.processingMode==="json-ld-1.0";api$7.isKeyword=nt=>{if(!_isString$3(nt)||nt[0]!=="@")return!1;switch(nt){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function _deepCompare(nt,rt){if(!(nt&&typeof nt=="object")||!(rt&&typeof rt=="object"))return nt===rt;const it=Array.isArray(nt);if(it!==Array.isArray(rt))return!1;if(it){if(nt.length!==rt.length)return!1;for(let xt=0;xt<nt.length;++xt)if(!_deepCompare(nt[xt],rt[xt]))return!1;return!0}const st=Object.keys(nt),bt=Object.keys(rt);if(st.length!==bt.length)return!1;for(const xt in nt){let Et=nt[xt],kt=rt[xt];if(xt==="@container"&&Array.isArray(Et)&&Array.isArray(kt)&&(Et=Et.slice().sort(),kt=kt.slice().sort()),!_deepCompare(Et,kt))return!1}return!0}const JsonLdError$5=JsonLdError_1,{isArray:_isArray$2,isObject:_isObject$2,isEmptyObject:_isEmptyObject,isString:_isString$2,isUndefined:_isUndefined$1}=types$7,{isList:_isList$1,isValue:_isValue$1,isGraph:_isGraph$1,isSubject:_isSubject}=graphTypes$5,{expandIri:_expandIri$2,getContextValue:_getContextValue$1,isKeyword:_isKeyword$1,process:_processContext$2,processingMode:_processingMode$2}=context,{isAbsolute:_isAbsoluteIri$1}=url$1,{REGEX_BCP47:REGEX_BCP47$1,REGEX_KEYWORD:REGEX_KEYWORD$1,addValue:_addValue$2,asArray:_asArray$1,getValues:_getValues,validateTypeValue:_validateTypeValue}=util$5,{handleEvent:_handleEvent$2}=events,api$6={};var expand=api$6;api$6.expand=async({activeCtx:nt,activeProperty:rt=null,element:it,options:st={},insideList:bt=!1,insideIndex:xt=!1,typeScopedContext:Et=null})=>{if(it==null)return null;if(rt==="@default"&&(st=Object.assign({},st,{isFrame:!1})),!_isArray$2(it)&&!_isObject$2(it))return!bt&&(rt===null||_expandIri$2(nt,rt,{vocab:!0},st)==="@graph")?(st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:it}},options:st}),null):_expandValue({activeCtx:nt,activeProperty:rt,value:it,options:st});if(_isArray$2(it)){let Yt=[];const Zt=_getContextValue$1(nt,rt,"@container")||[];bt=bt||Zt.includes("@list");for(let Wt=0;Wt<it.length;++Wt){let Qt=await api$6.expand({activeCtx:nt,activeProperty:rt,element:it[Wt],options:st,insideIndex:xt,typeScopedContext:Et});bt&&_isArray$2(Qt)&&(Qt={"@list":Qt}),Qt!==null&&(_isArray$2(Qt)?Yt=Yt.concat(Qt):Yt.push(Qt))}return Yt}const kt=_expandIri$2(nt,rt,{vocab:!0},st),Lt=_getContextValue$1(nt,rt,"@context");Et=Et||(nt.previousContext?nt:null);let Pt=Object.keys(it).sort(),Rt=!xt;if(Rt&&Et&&Pt.length<=2&&!Pt.includes("@context"))for(const Yt of Pt){const Zt=_expandIri$2(Et,Yt,{vocab:!0},st);if(Zt==="@value"){Rt=!1,nt=Et;break}if(Zt==="@id"&&Pt.length===1){Rt=!1;break}}Rt&&(nt=nt.revertToPreviousContext()),_isUndefined$1(Lt)||(nt=await _processContext$2({activeCtx:nt,localCtx:Lt,propagate:!0,overrideProtected:!0,options:st})),"@context"in it&&(nt=await _processContext$2({activeCtx:nt,localCtx:it["@context"],options:st})),Et=nt;let Dt=null;for(const Yt of Pt)if(_expandIri$2(nt,Yt,{vocab:!0},st)==="@type"){Dt=Dt||Yt;const Wt=it[Yt],Qt=Array.isArray(Wt)?Wt.length>1?Wt.slice().sort():Wt:[Wt];for(const Kt of Qt){const on=_getContextValue$1(Et,Kt,"@context");_isUndefined$1(on)||(nt=await _processContext$2({activeCtx:nt,localCtx:on,options:st,propagate:!1}))}}let Bt={};await _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:kt,element:it,expandedParent:Bt,options:st,insideList:bt,typeKey:Dt,typeScopedContext:Et}),Pt=Object.keys(Bt);let Ft=Pt.length;if("@value"in Bt){if("@type"in Bt&&("@language"in Bt||"@direction"in Bt))throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Bt});let Yt=Ft-1;if("@type"in Bt&&(Yt-=1),"@index"in Bt&&(Yt-=1),"@language"in Bt&&(Yt-=1),"@direction"in Bt&&(Yt-=1),Yt!==0)throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Bt});const Zt=Bt["@value"]===null?[]:_asArray$1(Bt["@value"]),Wt=_getValues(Bt,"@type");if(!(_processingMode$2(nt,1.1)&&Wt.includes("@json")&&Wt.length===1))if(Zt.length===0)st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Bt}},options:st}),Bt=null;else{if(!Zt.every(Qt=>_isString$2(Qt)||_isEmptyObject(Qt))&&"@language"in Bt)throw new JsonLdError$5("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Bt});if(!Wt.every(Qt=>_isAbsoluteIri$1(Qt)&&!(_isString$2(Qt)&&Qt.indexOf("_:")===0)||_isEmptyObject(Qt)))throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Bt})}}else if("@type"in Bt&&!_isArray$2(Bt["@type"]))Bt["@type"]=[Bt["@type"]];else if("@set"in Bt||"@list"in Bt){if(Ft>1&&!(Ft===2&&"@index"in Bt))throw new JsonLdError$5('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Bt});"@set"in Bt&&(Bt=Bt["@set"],Pt=Object.keys(Bt),Ft=Pt.length)}else Ft===1&&"@language"in Bt&&(st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Bt}},options:st}),Bt=null);return _isObject$2(Bt)&&!st.keepFreeFloatingNodes&&!bt&&(rt===null||kt==="@graph"||(_getContextValue$1(nt,rt,"@container")||[]).includes("@graph"))&&(Bt=_dropUnsafeObject({value:Bt,count:Ft,options:st})),Bt};function _dropUnsafeObject({value:nt,count:rt,options:it}){if(rt===0||"@value"in nt||"@list"in nt||rt===1&&"@id"in nt){if(it.eventHandler){let st,bt;rt===0?(st="empty object",bt="Dropping empty object."):"@value"in nt?(st="object with only @value",bt="Dropping object with only @value."):"@list"in nt?(st="object with only @list",bt="Dropping object with only @list."):rt===1&&"@id"in nt&&(st="object with only @id",bt="Dropping object with only @id."),_handleEvent$2({event:{type:["JsonLdEvent"],code:st,level:"warning",message:bt,details:{value:nt}},options:it})}return null}return nt}async function _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:it,element:st,expandedParent:bt,options:xt={},insideList:Et,typeKey:kt,typeScopedContext:Lt}){const Pt=Object.keys(st).sort(),Rt=[];let Dt;const Bt=st[kt]&&_expandIri$2(nt,_isArray$2(st[kt])?st[kt][0]:st[kt],{vocab:!0},{...xt,typeExpansion:!0})==="@json";for(const Ft of Pt){let Yt=st[Ft],Zt;if(Ft==="@context")continue;const Wt=_expandIri$2(nt,Ft,{vocab:!0},xt);if(Wt===null||!(_isAbsoluteIri$1(Wt)||_isKeyword$1(Wt))){xt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Ft,expandedProperty:Wt}},options:xt});continue}if(_isKeyword$1(Wt)){if(it==="@reverse")throw new JsonLdError$5("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Yt});if(Wt in bt&&Wt!=="@included"&&Wt!=="@type")throw new JsonLdError$5("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:Wt})}if(Wt==="@id"){if(!_isString$2(Yt)){if(!xt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt});if(_isObject$2(Yt)){if(!_isEmptyObject(Yt))throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}else if(_isArray$2(Yt)){if(!Yt.every(nn=>_isString$2(nn)))throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}else throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}_addValue$2(bt,"@id",_asArray$1(Yt).map(nn=>{if(_isString$2(nn)){const mn=_expandIri$2(nt,nn,{base:!0},xt);return xt.eventHandler&&(mn===null?_handleEvent$2(nn===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:nn}},options:xt}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:nn}},options:xt}):_isAbsoluteIri$1(mn)||_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:nn,expandedId:mn}},options:xt})),mn}return nn}),{propertyIsArray:xt.isFrame});continue}if(Wt==="@type"){_isObject$2(Yt)&&(Yt=Object.fromEntries(Object.entries(Yt).map(([nn,mn])=>[_expandIri$2(Lt,nn,{vocab:!0}),_asArray$1(mn).map(gn=>_expandIri$2(Lt,gn,{base:!0,vocab:!0},{...xt,typeExpansion:!0}))]))),_validateTypeValue(Yt,xt.isFrame),_addValue$2(bt,"@type",_asArray$1(Yt).map(nn=>{if(_isString$2(nn)){const mn=_expandIri$2(Lt,nn,{base:!0,vocab:!0},{...xt,typeExpansion:!0});return mn!=="@json"&&!_isAbsoluteIri$1(mn)&&xt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:nn}},options:xt}),mn}return nn}),{propertyIsArray:!!xt.isFrame});continue}if(Wt==="@included"&&_processingMode$2(nt,1.1)){const nn=_asArray$1(await api$6.expand({activeCtx:nt,activeProperty:rt,element:Yt,options:xt}));if(!nn.every(mn=>_isSubject(mn)))throw new JsonLdError$5("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Yt});_addValue$2(bt,"@included",nn,{propertyIsArray:!0});continue}if(Wt==="@graph"&&!(_isObject$2(Yt)||_isArray$2(Yt)))throw new JsonLdError$5('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Yt});if(Wt==="@value"){Dt=Yt,Bt&&_processingMode$2(nt,1.1)?bt["@value"]=Yt:_addValue$2(bt,"@value",Yt,{propertyIsArray:xt.isFrame});continue}if(Wt==="@language"){if(Yt===null)continue;if(!_isString$2(Yt)&&!xt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Yt});Yt=_asArray$1(Yt).map(nn=>_isString$2(nn)?nn.toLowerCase():nn);for(const nn of Yt)_isString$2(nn)&&!nn.match(REGEX_BCP47$1)&&xt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nn}},options:xt});_addValue$2(bt,"@language",Yt,{propertyIsArray:xt.isFrame});continue}if(Wt==="@direction"){if(!_isString$2(Yt)&&!xt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Yt});Yt=_asArray$1(Yt);for(const nn of Yt)if(_isString$2(nn)&&nn!=="ltr"&&nn!=="rtl")throw new JsonLdError$5('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Yt});_addValue$2(bt,"@direction",Yt,{propertyIsArray:xt.isFrame});continue}if(Wt==="@index"){if(!_isString$2(Yt))throw new JsonLdError$5('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Yt});_addValue$2(bt,"@index",Yt);continue}if(Wt==="@reverse"){if(!_isObject$2(Yt))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Yt});if(Zt=await api$6.expand({activeCtx:nt,activeProperty:"@reverse",element:Yt,options:xt}),"@reverse"in Zt)for(const mn in Zt["@reverse"])_addValue$2(bt,mn,Zt["@reverse"][mn],{propertyIsArray:!0});let nn=bt["@reverse"]||null;for(const mn in Zt){if(mn==="@reverse")continue;nn===null&&(nn=bt["@reverse"]={}),_addValue$2(nn,mn,[],{propertyIsArray:!0});const gn=Zt[mn];for(let Tn=0;Tn<gn.length;++Tn){const An=gn[Tn];if(_isValue$1(An)||_isList$1(An))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Zt});_addValue$2(nn,mn,An,{propertyIsArray:!0})}}continue}if(Wt==="@nest"){Rt.push(Ft);continue}let Qt=nt;const Kt=_getContextValue$1(nt,Ft,"@context");_isUndefined$1(Kt)||(Qt=await _processContext$2({activeCtx:nt,localCtx:Kt,propagate:!0,overrideProtected:!0,options:xt}));const on=_getContextValue$1(Qt,Ft,"@container")||[];if(on.includes("@language")&&_isObject$2(Yt)){const nn=_getContextValue$1(Qt,Ft,"@direction");Zt=_expandLanguageMap(Qt,Yt,nn,xt)}else if(on.includes("@index")&&_isObject$2(Yt)){const nn=on.includes("@graph"),mn=_getContextValue$1(Qt,Ft,"@index")||"@index",gn=mn!=="@index"&&_expandIri$2(nt,mn,{vocab:!0},xt);Zt=await _expandIndexMap({activeCtx:Qt,options:xt,activeProperty:Ft,value:Yt,asGraph:nn,indexKey:mn,propertyIndex:gn})}else if(on.includes("@id")&&_isObject$2(Yt)){const nn=on.includes("@graph");Zt=await _expandIndexMap({activeCtx:Qt,options:xt,activeProperty:Ft,value:Yt,asGraph:nn,indexKey:"@id"})}else if(on.includes("@type")&&_isObject$2(Yt))Zt=await _expandIndexMap({activeCtx:Qt.revertToPreviousContext(),options:xt,activeProperty:Ft,value:Yt,asGraph:!1,indexKey:"@type"});else{const nn=Wt==="@list";if(nn||Wt==="@set"){let mn=rt;nn&&it==="@graph"&&(mn=null),Zt=await api$6.expand({activeCtx:Qt,activeProperty:mn,element:Yt,options:xt,insideList:nn})}else _getContextValue$1(nt,Ft,"@type")==="@json"?Zt={"@type":"@json","@value":Yt}:Zt=await api$6.expand({activeCtx:Qt,activeProperty:Ft,element:Yt,options:xt,insideList:!1})}if(!(Zt===null&&Wt!=="@value")){if(Wt!=="@list"&&!_isList$1(Zt)&&on.includes("@list")&&(Zt={"@list":_asArray$1(Zt)}),on.includes("@graph")&&!on.some(nn=>nn==="@id"||nn==="@index")){Zt=_asArray$1(Zt);const nn=Object.keys(Zt[0]).length;if(!xt.isFrame&&_dropUnsafeObject({value:Zt[0],count:nn,options:xt})===null)continue;Zt=Zt.map(mn=>({"@graph":_asArray$1(mn)}))}if(Qt.mappings.has(Ft)&&Qt.mappings.get(Ft).reverse){const nn=bt["@reverse"]=bt["@reverse"]||{};Zt=_asArray$1(Zt);for(let mn=0;mn<Zt.length;++mn){const gn=Zt[mn];if(_isValue$1(gn)||_isList$1(gn))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Zt});_addValue$2(nn,Wt,gn,{propertyIsArray:!0})}continue}_addValue$2(bt,Wt,Zt,{propertyIsArray:!0})}}if("@value"in bt&&!(bt["@type"]==="@json"&&_processingMode$2(nt,1.1))){if((_isObject$2(Dt)||_isArray$2(Dt))&&!xt.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Dt})}for(const Ft of Rt){const Yt=_isArray$2(st[Ft])?st[Ft]:[st[Ft]];for(const Zt of Yt){if(!_isObject$2(Zt)||Object.keys(Zt).some(Wt=>_expandIri$2(nt,Wt,{vocab:!0},xt)==="@value"))throw new JsonLdError$5("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Zt});await _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:it,element:Zt,expandedParent:bt,options:xt,insideList:Et,typeScopedContext:Lt,typeKey:kt})}}}function _expandValue({activeCtx:nt,activeProperty:rt,value:it,options:st}){if(it==null)return null;const bt=_expandIri$2(nt,rt,{vocab:!0},st);if(bt==="@id")return _expandIri$2(nt,it,{base:!0},st);if(bt==="@type")return _expandIri$2(nt,it,{vocab:!0,base:!0},{...st,typeExpansion:!0});const xt=_getContextValue$1(nt,rt,"@type");if((xt==="@id"||bt==="@graph")&&_isString$2(it)){const kt=_expandIri$2(nt,it,{base:!0},st);return kt===null&&it.match(REGEX_KEYWORD$1)&&st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:rt}},options:st}),{"@id":kt}}if(xt==="@vocab"&&_isString$2(it))return{"@id":_expandIri$2(nt,it,{vocab:!0,base:!0},st)};if(_isKeyword$1(bt))return it;const Et={};if(xt&&!["@id","@vocab","@none"].includes(xt))Et["@type"]=xt;else if(_isString$2(it)){const kt=_getContextValue$1(nt,rt,"@language");kt!==null&&(Et["@language"]=kt);const Lt=_getContextValue$1(nt,rt,"@direction");Lt!==null&&(Et["@direction"]=Lt)}return["boolean","number","string"].includes(typeof it)||(it=it.toString()),Et["@value"]=it,Et}function _expandLanguageMap(nt,rt,it,st){const bt=[],xt=Object.keys(rt).sort();for(const Et of xt){const kt=_expandIri$2(nt,Et,{vocab:!0},st);let Lt=rt[Et];_isArray$2(Lt)||(Lt=[Lt]);for(const Pt of Lt){if(Pt===null)continue;if(!_isString$2(Pt))throw new JsonLdError$5("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:rt});const Rt={"@value":Pt};kt!=="@none"&&(Et.match(REGEX_BCP47$1)||st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Et}},options:st}),Rt["@language"]=Et.toLowerCase()),it&&(Rt["@direction"]=it),bt.push(Rt)}}return bt}async function _expandIndexMap({activeCtx:nt,options:rt,activeProperty:it,value:st,asGraph:bt,indexKey:xt,propertyIndex:Et}){const kt=[],Lt=Object.keys(st).sort(),Pt=xt==="@type";for(let Rt of Lt){if(Pt){const Ft=_getContextValue$1(nt,Rt,"@context");_isUndefined$1(Ft)||(nt=await _processContext$2({activeCtx:nt,localCtx:Ft,propagate:!1,options:rt}))}let Dt=st[Rt];_isArray$2(Dt)||(Dt=[Dt]),Dt=await api$6.expand({activeCtx:nt,activeProperty:it,element:Dt,options:rt,insideList:!1,insideIndex:!0});let Bt;Et?Rt==="@none"?Bt="@none":Bt=_expandValue({activeCtx:nt,activeProperty:xt,value:Rt,options:rt}):Bt=_expandIri$2(nt,Rt,{vocab:!0},rt),xt==="@id"?Rt=_expandIri$2(nt,Rt,{base:!0},rt):Pt&&(Rt=Bt);for(let Ft of Dt){if(bt&&!_isGraph$1(Ft)&&(Ft={"@graph":[Ft]}),xt==="@type")Bt==="@none"||(Ft["@type"]?Ft["@type"]=[Rt].concat(Ft["@type"]):Ft["@type"]=[Rt]);else{if(_isValue$1(Ft)&&!["@language","@type","@index"].includes(xt))throw new JsonLdError$5(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${xt}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Ft});Et?Bt!=="@none"&&_addValue$2(Ft,Et,Bt,{propertyIsArray:!0,prependValue:!0}):Bt!=="@none"&&!(xt in Ft)&&(Ft[xt]=Rt)}kt.push(Ft)}}return kt}const{isKeyword:isKeyword$2}=context,graphTypes$3=graphTypes$5,types$3=types$7,util$3=util$5,JsonLdError$4=JsonLdError_1,api$5={};var nodeMap=api$5;api$5.createMergedNodeMap=(nt,rt)=>{rt=rt||{};const it=rt.issuer||new util$3.IdentifierIssuer("_:b"),st={"@default":{}};return api$5.createNodeMap(nt,st,"@default",it),api$5.mergeNodeMaps(st)};api$5.createNodeMap=(nt,rt,it,st,bt,xt)=>{if(types$3.isArray(nt)){for(const Pt of nt)api$5.createNodeMap(Pt,rt,it,st,void 0,xt);return}if(!types$3.isObject(nt)){xt&&xt.push(nt);return}if(graphTypes$3.isValue(nt)){if("@type"in nt){let Pt=nt["@type"];Pt.indexOf("_:")===0&&(nt["@type"]=Pt=st.getId(Pt))}xt&&xt.push(nt);return}else if(xt&&graphTypes$3.isList(nt)){const Pt=[];api$5.createNodeMap(nt["@list"],rt,it,st,bt,Pt),xt.push({"@list":Pt});return}if("@type"in nt){const Pt=nt["@type"];for(const Rt of Pt)Rt.indexOf("_:")===0&&st.getId(Rt)}types$3.isUndefined(bt)&&(bt=graphTypes$3.isBlankNode(nt)?st.getId(nt["@id"]):nt["@id"]),xt&&xt.push({"@id":bt});const Et=rt[it],kt=Et[bt]=Et[bt]||{};kt["@id"]=bt;const Lt=Object.keys(nt).sort();for(let Pt of Lt){if(Pt==="@id")continue;if(Pt==="@reverse"){const Dt={"@id":bt},Bt=nt["@reverse"];for(const Ft in Bt){const Yt=Bt[Ft];for(const Zt of Yt){let Wt=Zt["@id"];graphTypes$3.isBlankNode(Zt)&&(Wt=st.getId(Wt)),api$5.createNodeMap(Zt,rt,it,st,Wt),util$3.addValue(Et[Wt],Ft,Dt,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(Pt==="@graph"){bt in rt||(rt[bt]={}),api$5.createNodeMap(nt[Pt],rt,bt,st);continue}if(Pt==="@included"){api$5.createNodeMap(nt[Pt],rt,it,st);continue}if(Pt!=="@type"&&isKeyword$2(Pt)){if(Pt==="@index"&&Pt in kt&&(nt[Pt]!==kt[Pt]||nt[Pt]["@id"]!==kt[Pt]["@id"]))throw new JsonLdError$4("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:kt});kt[Pt]=nt[Pt];continue}const Rt=nt[Pt];if(Pt.indexOf("_:")===0&&(Pt=st.getId(Pt)),Rt.length===0){util$3.addValue(kt,Pt,[],{propertyIsArray:!0});continue}for(let Dt of Rt)if(Pt==="@type"&&(Dt=Dt.indexOf("_:")===0?st.getId(Dt):Dt),graphTypes$3.isSubject(Dt)||graphTypes$3.isSubjectReference(Dt)){if("@id"in Dt&&!Dt["@id"])continue;const Bt=graphTypes$3.isBlankNode(Dt)?st.getId(Dt["@id"]):Dt["@id"];util$3.addValue(kt,Pt,{"@id":Bt},{propertyIsArray:!0,allowDuplicate:!1}),api$5.createNodeMap(Dt,rt,it,st,Bt)}else if(graphTypes$3.isValue(Dt))util$3.addValue(kt,Pt,Dt,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes$3.isList(Dt)){const Bt=[];api$5.createNodeMap(Dt["@list"],rt,it,st,bt,Bt),Dt={"@list":Bt},util$3.addValue(kt,Pt,Dt,{propertyIsArray:!0,allowDuplicate:!1})}else api$5.createNodeMap(Dt,rt,it,st,bt),util$3.addValue(kt,Pt,Dt,{propertyIsArray:!0,allowDuplicate:!1})}};api$5.mergeNodeMapGraphs=nt=>{const rt={};for(const it of Object.keys(nt).sort())for(const st of Object.keys(nt[it]).sort()){const bt=nt[it][st];st in rt||(rt[st]={"@id":st});const xt=rt[st];for(const Et of Object.keys(bt).sort())if(isKeyword$2(Et)&&Et!=="@type")xt[Et]=util$3.clone(bt[Et]);else for(const kt of bt[Et])util$3.addValue(xt,Et,util$3.clone(kt),{propertyIsArray:!0,allowDuplicate:!1})}return rt};api$5.mergeNodeMaps=nt=>{const rt=nt["@default"],it=Object.keys(nt).sort();for(const st of it){if(st==="@default")continue;const bt=nt[st];let xt=rt[st];xt?"@graph"in xt||(xt["@graph"]=[]):rt[st]=xt={"@id":st,"@graph":[]};const Et=xt["@graph"];for(const kt of Object.keys(bt).sort()){const Lt=bt[kt];graphTypes$3.isSubjectReference(Lt)||Et.push(Lt)}}return rt};const{isSubjectReference:_isSubjectReference$2}=graphTypes$5,{createMergedNodeMap:_createMergedNodeMap$1}=nodeMap,api$4={};var flatten=api$4;api$4.flatten=nt=>{const rt=_createMergedNodeMap$1(nt),it=[],st=Object.keys(rt).sort();for(let bt=0;bt<st.length;++bt){const xt=rt[st[bt]];_isSubjectReference$2(xt)||it.push(xt)}return it};const JsonLdError$3=JsonLdError_1,graphTypes$2=graphTypes$5,types$2=types$7,{REGEX_BCP47,addValue:_addValue$1}=util$5,{handleEvent:_handleEvent$1}=events,{RDF_LIST,RDF_FIRST:RDF_FIRST$1,RDF_REST:RDF_REST$1,RDF_NIL:RDF_NIL$1,RDF_TYPE:RDF_TYPE$1,RDF_JSON_LITERAL:RDF_JSON_LITERAL$1,XSD_BOOLEAN:XSD_BOOLEAN$1,XSD_DOUBLE:XSD_DOUBLE$1,XSD_INTEGER:XSD_INTEGER$1,XSD_STRING:XSD_STRING$1}=constants,api$3={};var fromRdf=api$3;api$3.fromRDF=async(nt,rt)=>{const it={},st={"@default":it},bt={},{useRdfType:xt=!1,useNativeTypes:Et=!1,rdfDirection:kt=null}=rt;for(const Rt of nt){const Dt=Rt.graph.termType==="DefaultGraph"?"@default":Rt.graph.value;Dt in st||(st[Dt]={}),Dt!=="@default"&&!(Dt in it)&&(it[Dt]={"@id":Dt});const Bt=st[Dt],Ft=Rt.subject.value,Yt=Rt.predicate.value,Zt=Rt.object;Ft in Bt||(Bt[Ft]={"@id":Ft});const Wt=Bt[Ft],Qt=Zt.termType.endsWith("Node");if(Qt&&!(Zt.value in Bt)&&(Bt[Zt.value]={"@id":Zt.value}),Yt===RDF_TYPE$1&&!xt&&Qt){_addValue$1(Wt,"@type",Zt.value,{propertyIsArray:!0});continue}const Kt=_RDFToObject(Zt,Et,kt,rt);if(_addValue$1(Wt,Yt,Kt,{propertyIsArray:!0}),Qt)if(Zt.value===RDF_NIL$1){const on=Bt[Zt.value];"usages"in on||(on.usages=[]),on.usages.push({node:Wt,property:Yt,value:Kt})}else Zt.value in bt?bt[Zt.value]=!1:bt[Zt.value]={node:Wt,property:Yt,value:Kt}}for(const Rt in st){const Dt=st[Rt];if(!(RDF_NIL$1 in Dt))continue;const Bt=Dt[RDF_NIL$1];if(!!Bt.usages){for(let Ft of Bt.usages){let Yt=Ft.node,Zt=Ft.property,Wt=Ft.value;const Qt=[],Kt=[];let on=Object.keys(Yt).length;for(;Zt===RDF_REST$1&&types$2.isObject(bt[Yt["@id"]])&&types$2.isArray(Yt[RDF_FIRST$1])&&Yt[RDF_FIRST$1].length===1&&types$2.isArray(Yt[RDF_REST$1])&&Yt[RDF_REST$1].length===1&&(on===3||on===4&&types$2.isArray(Yt["@type"])&&Yt["@type"].length===1&&Yt["@type"][0]===RDF_LIST)&&(Qt.push(Yt[RDF_FIRST$1][0]),Kt.push(Yt["@id"]),Ft=bt[Yt["@id"]],Yt=Ft.node,Zt=Ft.property,Wt=Ft.value,on=Object.keys(Yt).length,!!graphTypes$2.isBlankNode(Yt)););delete Wt["@id"],Wt["@list"]=Qt.reverse();for(const nn of Kt)delete Dt[nn]}delete Bt.usages}}const Lt=[],Pt=Object.keys(it).sort();for(const Rt of Pt){const Dt=it[Rt];if(Rt in st){const Bt=Dt["@graph"]=[],Ft=st[Rt],Yt=Object.keys(Ft).sort();for(const Zt of Yt){const Wt=Ft[Zt];graphTypes$2.isSubjectReference(Wt)||Bt.push(Wt)}}graphTypes$2.isSubjectReference(Dt)||Lt.push(Dt)}return Lt};function _RDFToObject(nt,rt,it,st){if(nt.termType.endsWith("Node"))return{"@id":nt.value};const bt={"@value":nt.value};if(nt.language)nt.language.match(REGEX_BCP47)||st.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt.language}},options:st}),bt["@language"]=nt.language;else{let xt=nt.datatype.value;if(xt||(xt=XSD_STRING$1),xt===RDF_JSON_LITERAL$1){xt="@json";try{bt["@value"]=JSON.parse(bt["@value"])}catch(Et){throw new JsonLdError$3("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:bt["@value"],cause:Et})}}if(rt){if(xt===XSD_BOOLEAN$1)bt["@value"]==="true"?bt["@value"]=!0:bt["@value"]==="false"&&(bt["@value"]=!1);else if(types$2.isNumeric(bt["@value"]))if(xt===XSD_INTEGER$1){const Et=parseInt(bt["@value"],10);Et.toFixed(0)===bt["@value"]&&(bt["@value"]=Et)}else xt===XSD_DOUBLE$1&&(bt["@value"]=parseFloat(bt["@value"]));[XSD_BOOLEAN$1,XSD_INTEGER$1,XSD_DOUBLE$1,XSD_STRING$1].includes(xt)||(bt["@type"]=xt)}else if(it==="i18n-datatype"&&xt.startsWith("https://www.w3.org/ns/i18n#")){const[,Et,kt]=xt.split(/[#_]/);Et.length>0&&(bt["@language"]=Et,Et.match(REGEX_BCP47)||st.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Et}},options:st})),bt["@direction"]=kt}else xt!==XSD_STRING$1&&(bt["@type"]=xt)}return bt}var canonicalize=function nt(rt){return rt===null||typeof rt!="object"||rt.toJSON!=null?JSON.stringify(rt):Array.isArray(rt)?"["+rt.reduce((it,st,bt)=>{const xt=bt===0?"":",",Et=st===void 0||typeof st=="symbol"?null:st;return it+xt+nt(Et)},"")+"]":"{"+Object.keys(rt).sort().reduce((it,st,bt)=>{if(rt[st]===void 0||typeof rt[st]=="symbol")return it;const xt=it.length===0?"":",";return it+xt+nt(st)+":"+nt(rt[st])},"")+"}"};const{createNodeMap}=nodeMap,{isKeyword:isKeyword$1}=context,graphTypes$1=graphTypes$5,jsonCanonicalize=canonicalize,types$1=types$7,util$2=util$5,{handleEvent:_handleEvent}=events,{RDF_FIRST,RDF_REST,RDF_NIL,RDF_TYPE,RDF_JSON_LITERAL,RDF_LANGSTRING,XSD_BOOLEAN,XSD_DOUBLE,XSD_INTEGER,XSD_STRING}=constants,{isAbsolute:_isAbsoluteIri}=url$1,api$2={};var toRdf=api$2;api$2.toRDF=(nt,rt)=>{const it=new util$2.IdentifierIssuer("_:b"),st={"@default":{}};createNodeMap(nt,st,"@default",it);const bt=[],xt=Object.keys(st).sort();for(const Et of xt){let kt;if(Et==="@default")kt={termType:"DefaultGraph",value:""};else if(_isAbsoluteIri(Et))Et.startsWith("_:")?kt={termType:"BlankNode"}:kt={termType:"NamedNode"},kt.value=Et;else{rt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Et}},options:rt});continue}_graphToRDF(bt,st[Et],kt,it,rt)}return bt};function _graphToRDF(nt,rt,it,st,bt){const xt=Object.keys(rt).sort();for(const Et of xt){const kt=rt[Et],Lt=Object.keys(kt).sort();for(let Pt of Lt){const Rt=kt[Pt];if(Pt==="@type")Pt=RDF_TYPE;else if(isKeyword$1(Pt))continue;for(const Dt of Rt){const Bt={termType:Et.startsWith("_:")?"BlankNode":"NamedNode",value:Et};if(!_isAbsoluteIri(Et)){bt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Et}},options:bt});continue}const Ft={termType:Pt.startsWith("_:")?"BlankNode":"NamedNode",value:Pt};if(!_isAbsoluteIri(Pt)){bt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:Pt}},options:bt});continue}if(Ft.termType==="BlankNode"&&!bt.produceGeneralizedRdf){bt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:st.getOldIds().find(Zt=>st.getId(Zt)===Pt)}},options:bt});continue}const Yt=_objectToRDF(Dt,st,nt,it,bt.rdfDirection,bt);Yt&&nt.push({subject:Bt,predicate:Ft,object:Yt,graph:it})}}}}function _listToRDF(nt,rt,it,st,bt,xt){const Et={termType:"NamedNode",value:RDF_FIRST},kt={termType:"NamedNode",value:RDF_REST},Lt={termType:"NamedNode",value:RDF_NIL},Pt=nt.pop(),Rt=Pt?{termType:"BlankNode",value:rt.getId()}:Lt;let Dt=Rt;for(const Bt of nt){const Ft=_objectToRDF(Bt,rt,it,st,bt,xt),Yt={termType:"BlankNode",value:rt.getId()};it.push({subject:Dt,predicate:Et,object:Ft,graph:st}),it.push({subject:Dt,predicate:kt,object:Yt,graph:st}),Dt=Yt}if(Pt){const Bt=_objectToRDF(Pt,rt,it,st,bt,xt);it.push({subject:Dt,predicate:Et,object:Bt,graph:st}),it.push({subject:Dt,predicate:kt,object:Lt,graph:st})}return Rt}function _objectToRDF(nt,rt,it,st,bt,xt){const Et={};if(graphTypes$1.isValue(nt)){Et.termType="Literal",Et.value=void 0,Et.datatype={termType:"NamedNode"};let kt=nt["@value"];const Lt=nt["@type"]||null;if(Lt==="@json")Et.value=jsonCanonicalize(kt),Et.datatype.value=RDF_JSON_LITERAL;else if(types$1.isBoolean(kt))Et.value=kt.toString(),Et.datatype.value=Lt||XSD_BOOLEAN;else if(types$1.isDouble(kt)||Lt===XSD_DOUBLE)types$1.isDouble(kt)||(kt=parseFloat(kt)),Et.value=kt.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Et.datatype.value=Lt||XSD_DOUBLE;else if(types$1.isNumber(kt))Et.value=kt.toFixed(0),Et.datatype.value=Lt||XSD_INTEGER;else if(bt==="i18n-datatype"&&"@direction"in nt){const Pt="https://www.w3.org/ns/i18n#"+(nt["@language"]||"")+`_${nt["@direction"]}`;Et.datatype.value=Pt,Et.value=kt}else"@language"in nt?(Et.value=kt,Et.datatype.value=Lt||RDF_LANGSTRING,Et.language=nt["@language"]):(Et.value=kt,Et.datatype.value=Lt||XSD_STRING)}else if(graphTypes$1.isList(nt)){const kt=_listToRDF(nt["@list"],rt,it,st,bt,xt);Et.termType=kt.termType,Et.value=kt.value}else{const kt=types$1.isObject(nt)?nt["@id"]:nt;Et.termType=kt.startsWith("_:")?"BlankNode":"NamedNode",Et.value=kt}return Et.termType==="NamedNode"&&!_isAbsoluteIri(Et.value)?(xt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Et.value}},options:xt}),null):Et}const{isKeyword}=context,graphTypes=graphTypes$5,types=types$7,util$1=util$5,url=url$1,JsonLdError$2=JsonLdError_1,{createNodeMap:_createNodeMap$1,mergeNodeMapGraphs:_mergeNodeMapGraphs}=nodeMap,api$1={};var frame=api$1;api$1.frameMergedOrDefault=(nt,rt,it)=>{const st={options:it,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},bt=new util$1.IdentifierIssuer("_:b");_createNodeMap$1(nt,st.graphMap,"@default",bt),it.merged&&(st.graphMap["@merged"]=_mergeNodeMapGraphs(st.graphMap),st.graph="@merged"),st.subjects=st.graphMap[st.graph];const xt=[];api$1.frame(st,Object.keys(st.subjects).sort(),rt,xt),it.pruneBlankNodeIdentifiers&&(it.bnodesToClear=Object.keys(st.bnodeMap).filter(Et=>st.bnodeMap[Et].length===1));// remove @preserve from results
return it.link={},_cleanupPreserve(xt,it)};api$1.frame=(nt,rt,it,st,bt=null)=>{_validateFrame(it),it=it[0];const xt=nt.options,Et={embed:_getFrameFlag(it,xt,"embed"),explicit:_getFrameFlag(it,xt,"explicit"),requireAll:_getFrameFlag(it,xt,"requireAll")};nt.link.hasOwnProperty(nt.graph)||(nt.link[nt.graph]={});const kt=nt.link[nt.graph],Lt=_filterSubjects(nt,rt,it,Et),Pt=Object.keys(Lt).sort();for(const Rt of Pt){const Dt=Lt[Rt];if(bt===null?nt.uniqueEmbeds={[nt.graph]:{}}:nt.uniqueEmbeds[nt.graph]=nt.uniqueEmbeds[nt.graph]||{},Et.embed==="@link"&&Rt in kt){_addFrameOutput(st,bt,kt[Rt]);continue}const Bt={"@id":Rt};if(Rt.indexOf("_:")===0&&util$1.addValue(nt.bnodeMap,Rt,Bt,{propertyIsArray:!0}),kt[Rt]=Bt,(Et.embed==="@first"||Et.embed==="@last")&&nt.is11)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:it});if(!(!nt.embedded&&nt.uniqueEmbeds[nt.graph].hasOwnProperty(Rt))){if(nt.embedded&&(Et.embed==="@never"||_createsCircularReference(Dt,nt.graph,nt.subjectStack))){_addFrameOutput(st,bt,Bt);continue}if(nt.embedded&&(Et.embed=="@first"||Et.embed=="@once")&&nt.uniqueEmbeds[nt.graph].hasOwnProperty(Rt)){_addFrameOutput(st,bt,Bt);continue}if(Et.embed==="@last"&&Rt in nt.uniqueEmbeds[nt.graph]&&_removeEmbed(nt,Rt),nt.uniqueEmbeds[nt.graph][Rt]={parent:st,property:bt},nt.subjectStack.push({subject:Dt,graph:nt.graph}),Rt in nt.graphMap){let Ft=!1,Yt=null;"@graph"in it?(Yt=it["@graph"][0],Ft=!(Rt==="@merged"||Rt==="@default"),types.isObject(Yt)||(Yt={})):(Ft=nt.graph!=="@merged",Yt={}),Ft&&api$1.frame({...nt,graph:Rt,embedded:!1},Object.keys(nt.graphMap[Rt]).sort(),[Yt],Bt,"@graph")}"@included"in it&&api$1.frame({...nt,embedded:!1},rt,it["@included"],Bt,"@included");for(const Ft of Object.keys(Dt).sort()){if(isKeyword(Ft)){if(Bt[Ft]=util$1.clone(Dt[Ft]),Ft==="@type")for(const Yt of Dt["@type"])Yt.indexOf("_:")===0&&util$1.addValue(nt.bnodeMap,Yt,Bt,{propertyIsArray:!0});continue}if(!(Et.explicit&&!(Ft in it)))for(const Yt of Dt[Ft]){const Zt=Ft in it?it[Ft]:_createImplicitFrame(Et);if(graphTypes.isList(Yt)){const Wt=it[Ft]&&it[Ft][0]&&it[Ft][0]["@list"]?it[Ft][0]["@list"]:_createImplicitFrame(Et),Qt={"@list":[]};_addFrameOutput(Bt,Ft,Qt);const Kt=Yt["@list"];for(const on of Kt)graphTypes.isSubjectReference(on)?api$1.frame({...nt,embedded:!0},[on["@id"]],Wt,Qt,"@list"):_addFrameOutput(Qt,"@list",util$1.clone(on))}else graphTypes.isSubjectReference(Yt)?api$1.frame({...nt,embedded:!0},[Yt["@id"]],Zt,Bt,Ft):_valueMatch(Zt[0],Yt)&&_addFrameOutput(Bt,Ft,util$1.clone(Yt))}}for(const Ft of Object.keys(it).sort()){if(Ft==="@type"){if(!types.isObject(it[Ft][0])||!("@default"in it[Ft][0]))continue}else if(isKeyword(Ft))continue;const Yt=it[Ft][0]||{};if(!_getFrameFlag(Yt,xt,"omitDefault")&&!(Ft in Bt)){let Wt="@null";"@default"in Yt&&(Wt=util$1.clone(Yt["@default"])),types.isArray(Wt)||(Wt=[Wt]),Bt[Ft]=[{"@preserve":Wt}]}}for(const Ft of Object.keys(it["@reverse"]||{}).sort()){const Yt=it["@reverse"][Ft];for(const Zt of Object.keys(nt.subjects))util$1.getValues(nt.subjects[Zt],Ft).some(Qt=>Qt["@id"]===Rt)&&(Bt["@reverse"]=Bt["@reverse"]||{},util$1.addValue(Bt["@reverse"],Ft,[],{propertyIsArray:!0}),api$1.frame({...nt,embedded:!0},[Zt],Yt,Bt["@reverse"][Ft],bt))}_addFrameOutput(st,bt,Bt),nt.subjectStack.pop()}}};api$1.cleanupNull=(nt,rt)=>{if(types.isArray(nt))return nt.map(st=>api$1.cleanupNull(st,rt)).filter(st=>st);if(nt==="@null")return null;if(types.isObject(nt)){if("@id"in nt){const it=nt["@id"];if(rt.link.hasOwnProperty(it)){const st=rt.link[it].indexOf(nt);if(st!==-1)return rt.link[it][st];rt.link[it].push(nt)}else rt.link[it]=[nt]}for(const it in nt)nt[it]=api$1.cleanupNull(nt[it],rt)}return nt};function _createImplicitFrame(nt){const rt={};for(const it in nt)nt[it]!==void 0&&(rt["@"+it]=[nt[it]]);return[rt]}function _createsCircularReference(nt,rt,it){for(let st=it.length-1;st>=0;--st){const bt=it[st];if(bt.graph===rt&&bt.subject["@id"]===nt["@id"])return!0}return!1}function _getFrameFlag(nt,rt,it){const st="@"+it;let bt=st in nt?nt[st][0]:rt[it];if(it==="embed"){if(bt===!0)bt="@once";else if(bt===!1)bt="@never";else if(bt!=="@always"&&bt!=="@never"&&bt!=="@link"&&bt!=="@first"&&bt!=="@last"&&bt!=="@once")throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:nt})}return bt}function _validateFrame(nt){if(!types.isArray(nt)||nt.length!==1||!types.isObject(nt[0]))throw new JsonLdError$2("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:nt});if("@id"in nt[0]){for(const rt of util$1.asArray(nt[0]["@id"]))if(!(types.isObject(rt)||url.isAbsolute(rt))||types.isString(rt)&&rt.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:nt})}if("@type"in nt[0]){for(const rt of util$1.asArray(nt[0]["@type"]))if(!(types.isObject(rt)||url.isAbsolute(rt)||rt==="@json")||types.isString(rt)&&rt.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:nt})}}function _filterSubjects(nt,rt,it,st){const bt={};for(const xt of rt){const Et=nt.graphMap[nt.graph][xt];_filterSubject(nt,Et,it,st)&&(bt[xt]=Et)}return bt}function _filterSubject(nt,rt,it,st){let bt=!0,xt=!1;for(const Et in it){let kt=!1;const Lt=util$1.getValues(rt,Et),Pt=util$1.getValues(it,Et).length===0;if(Et==="@id"){if(types.isEmptyObject(it["@id"][0]||{})?kt=!0:it["@id"].length>=0&&(kt=it["@id"].includes(Lt[0])),!st.requireAll)return kt}else if(Et==="@type"){if(bt=!1,Pt){if(Lt.length>0)return!1;kt=!0}else if(it["@type"].length===1&&types.isEmptyObject(it["@type"][0]))kt=Lt.length>0;else for(const Rt of it["@type"])types.isObject(Rt)&&"@default"in Rt?kt=!0:kt=kt||Lt.some(Dt=>Dt===Rt);if(!st.requireAll)return kt}else{if(isKeyword(Et))continue;{const Rt=util$1.getValues(it,Et)[0];let Dt=!1;if(Rt&&(_validateFrame([Rt]),Dt="@default"in Rt),bt=!1,Lt.length===0&&Dt)continue;if(Lt.length>0&&Pt)return!1;if(Rt===void 0){if(Lt.length>0)return!1;kt=!0}else if(graphTypes.isList(Rt)){const Bt=Rt["@list"][0];if(graphTypes.isList(Lt[0])){const Ft=Lt[0]["@list"];graphTypes.isValue(Bt)?kt=Ft.some(Yt=>_valueMatch(Bt,Yt)):(graphTypes.isSubject(Bt)||graphTypes.isSubjectReference(Bt))&&(kt=Ft.some(Yt=>_nodeMatch(nt,Bt,Yt,st)))}}else graphTypes.isValue(Rt)?kt=Lt.some(Bt=>_valueMatch(Rt,Bt)):graphTypes.isSubjectReference(Rt)?kt=Lt.some(Bt=>_nodeMatch(nt,Rt,Bt,st)):types.isObject(Rt)?kt=Lt.length>0:kt=!1}}if(!kt&&st.requireAll)return!1;xt=xt||kt}return bt||xt}function _removeEmbed(nt,rt){const it=nt.uniqueEmbeds[nt.graph],st=it[rt],bt=st.parent,xt=st.property,Et={"@id":rt};if(types.isArray(bt)){for(let Lt=0;Lt<bt.length;++Lt)if(util$1.compareValues(bt[Lt],Et)){bt[Lt]=Et;break}}else{const Lt=types.isArray(bt[xt]);util$1.removeValue(bt,xt,Et,{propertyIsArray:Lt}),util$1.addValue(bt,xt,Et,{propertyIsArray:Lt})}const kt=Lt=>{const Pt=Object.keys(it);for(const Rt of Pt)Rt in it&&types.isObject(it[Rt].parent)&&it[Rt].parent["@id"]===Lt&&(delete it[Rt],kt(Rt))};kt(rt)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function _cleanupPreserve(nt,rt){if(types.isArray(nt))return nt.map(it=>_cleanupPreserve(it,rt));if(types.isObject(nt)){// remove @preserve
if("@preserve"in nt)return nt["@preserve"][0];if(graphTypes.isValue(nt))return nt;if(graphTypes.isList(nt))return nt["@list"]=_cleanupPreserve(nt["@list"],rt),nt;if("@id"in nt){const it=nt["@id"];if(rt.link.hasOwnProperty(it)){const st=rt.link[it].indexOf(nt);if(st!==-1)return rt.link[it][st];rt.link[it].push(nt)}else rt.link[it]=[nt]}for(const it in nt){if(it==="@id"&&rt.bnodesToClear.includes(nt[it])){delete nt["@id"];continue}nt[it]=_cleanupPreserve(nt[it],rt)}}return nt}function _addFrameOutput(nt,rt,it){types.isObject(nt)?util$1.addValue(nt,rt,it,{propertyIsArray:!0}):nt.push(it)}function _nodeMatch(nt,rt,it,st){if(!("@id"in it))return!1;const bt=nt.subjects[it["@id"]];return bt&&_filterSubject(nt,bt,rt,st)}function _valueMatch(nt,rt){const it=rt["@value"],st=rt["@type"],bt=rt["@language"],xt=nt["@value"]?types.isArray(nt["@value"])?nt["@value"]:[nt["@value"]]:[],Et=nt["@type"]?types.isArray(nt["@type"])?nt["@type"]:[nt["@type"]]:[],kt=nt["@language"]?types.isArray(nt["@language"])?nt["@language"]:[nt["@language"]]:[];return xt.length===0&&Et.length===0&&kt.length===0?!0:!(!(xt.includes(it)||types.isEmptyObject(xt[0]))||!(!st&&Et.length===0||Et.includes(st)||st&&types.isEmptyObject(Et[0]))||!(!bt&&kt.length===0||kt.includes(bt)||bt&&types.isEmptyObject(kt[0])))}const JsonLdError$1=JsonLdError_1,{isArray:_isArray$1,isObject:_isObject$1,isString:_isString$1,isUndefined:_isUndefined}=types$7,{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference$1}=graphTypes$5,{expandIri:_expandIri$1,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext$1,processingMode:_processingMode$1}=context,{removeBase:_removeBase,prependBase:_prependBase}=url$1,{REGEX_KEYWORD,addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=util$5,api={};var compact=api;api.compact=async({activeCtx:nt,activeProperty:rt=null,element:it,options:st={}})=>{if(_isArray$1(it)){let xt=[];for(let Et=0;Et<it.length;++Et){const kt=await api.compact({activeCtx:nt,activeProperty:rt,element:it[Et],options:st});kt!==null&&xt.push(kt)}return st.compactArrays&&xt.length===1&&(_getContextValue(nt,rt,"@container")||[]).length===0&&(xt=xt[0]),xt}const bt=_getContextValue(nt,rt,"@context");if(_isUndefined(bt)||(nt=await _processContext$1({activeCtx:nt,localCtx:bt,propagate:!0,overrideProtected:!0,options:st})),_isObject$1(it)){if(st.link&&"@id"in it&&st.link.hasOwnProperty(it["@id"])){const Bt=st.link[it["@id"]];for(let Ft=0;Ft<Bt.length;++Ft)if(Bt[Ft].expanded===it)return Bt[Ft].compacted}if(_isValue(it)||_isSubjectReference$1(it)){const Bt=api.compactValue({activeCtx:nt,activeProperty:rt,value:it,options:st});return st.link&&_isSubjectReference$1(it)&&(st.link.hasOwnProperty(it["@id"])||(st.link[it["@id"]]=[]),st.link[it["@id"]].push({expanded:it,compacted:Bt})),Bt}if(_isList(it)&&(_getContextValue(nt,rt,"@container")||[]).includes("@list"))return api.compact({activeCtx:nt,activeProperty:rt,element:it["@list"],options:st});const xt=rt==="@reverse",Et={},kt=nt;!_isValue(it)&&!_isSubjectReference$1(it)&&(nt=nt.revertToPreviousContext());const Lt=_getContextValue(kt,rt,"@context");_isUndefined(Lt)||(nt=await _processContext$1({activeCtx:nt,localCtx:Lt,propagate:!0,overrideProtected:!0,options:st})),st.link&&"@id"in it&&(st.link.hasOwnProperty(it["@id"])||(st.link[it["@id"]]=[]),st.link[it["@id"]].push({expanded:it,compacted:Et}));let Pt=it["@type"]||[];Pt.length>1&&(Pt=Array.from(Pt).sort());const Rt=nt;for(const Bt of Pt){const Ft=api.compactIri({activeCtx:Rt,iri:Bt,relativeTo:{vocab:!0}}),Yt=_getContextValue(kt,Ft,"@context");_isUndefined(Yt)||(nt=await _processContext$1({activeCtx:nt,localCtx:Yt,options:st,propagate:!1}))}const Dt=Object.keys(it).sort();for(const Bt of Dt){const Ft=it[Bt];if(Bt==="@id"){let Yt=_asArray(Ft).map(Wt=>api.compactIri({activeCtx:nt,iri:Wt,relativeTo:{vocab:!1},base:st.base}));Yt.length===1&&(Yt=Yt[0]);const Zt=api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}});Et[Zt]=Yt;continue}if(Bt==="@type"){let Yt=_asArray(Ft).map(on=>api.compactIri({activeCtx:kt,iri:on,relativeTo:{vocab:!0}}));Yt.length===1&&(Yt=Yt[0]);const Zt=api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}}),Kt=(_getContextValue(nt,Zt,"@container")||[]).includes("@set")&&_processingMode$1(nt,1.1)||_isArray$1(Yt)&&Ft.length===0;_addValue(Et,Zt,Yt,{propertyIsArray:Kt});continue}if(Bt==="@reverse"){const Yt=await api.compact({activeCtx:nt,activeProperty:"@reverse",element:Ft,options:st});for(const Zt in Yt)if(nt.mappings.has(Zt)&&nt.mappings.get(Zt).reverse){const Wt=Yt[Zt],Kt=(_getContextValue(nt,Zt,"@container")||[]).includes("@set")||!st.compactArrays;_addValue(Et,Zt,Wt,{propertyIsArray:Kt}),delete Yt[Zt]}if(Object.keys(Yt).length>0){const Zt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Zt,Yt)}continue}if(Bt==="@preserve"){const Yt=await api.compact({activeCtx:nt,activeProperty:rt,element:Ft,options:st});_isArray$1(Yt)&&Yt.length===0||_addValue(Et,Bt,Yt);continue}if(Bt==="@index"){if((_getContextValue(nt,rt,"@container")||[]).includes("@index"))continue;const Zt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Zt,Ft);continue}if(Bt!=="@graph"&&Bt!=="@list"&&Bt!=="@included"&&_isKeyword(Bt)){const Yt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Yt,Ft);continue}if(!_isArray$1(Ft))throw new JsonLdError$1("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(Ft.length===0){const Yt=api.compactIri({activeCtx:nt,iri:Bt,value:Ft,relativeTo:{vocab:!0},reverse:xt}),Zt=nt.mappings.has(Yt)?nt.mappings.get(Yt)["@nest"]:null;let Wt=Et;Zt&&(_checkNestProperty(nt,Zt,st),_isObject$1(Et[Zt])||(Et[Zt]={}),Wt=Et[Zt]),_addValue(Wt,Yt,Ft,{propertyIsArray:!0})}for(const Yt of Ft){const Zt=api.compactIri({activeCtx:nt,iri:Bt,value:Yt,relativeTo:{vocab:!0},reverse:xt}),Wt=nt.mappings.has(Zt)?nt.mappings.get(Zt)["@nest"]:null;let Qt=Et;Wt&&(_checkNestProperty(nt,Wt,st),_isObject$1(Et[Wt])||(Et[Wt]={}),Qt=Et[Wt]);const Kt=_getContextValue(nt,Zt,"@container")||[],on=_isGraph(Yt),nn=_isList(Yt);let mn;nn?mn=Yt["@list"]:on&&(mn=Yt["@graph"]);let gn=await api.compact({activeCtx:nt,activeProperty:Zt,element:nn||on?mn:Yt,options:st});if(nn)if(_isArray$1(gn)||(gn=[gn]),!Kt.includes("@list"))gn={[api.compactIri({activeCtx:nt,iri:"@list",relativeTo:{vocab:!0}})]:gn},"@index"in Yt&&(gn[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=Yt["@index"]);else{_addValue(Qt,Zt,gn,{valueIsArray:!0,allowDuplicate:!0});continue}if(on)if(Kt.includes("@graph")&&(Kt.includes("@id")||Kt.includes("@index")&&_isSimpleGraph(Yt))){let Tn;Qt.hasOwnProperty(Zt)?Tn=Qt[Zt]:Qt[Zt]=Tn={};const An=(Kt.includes("@id")?Yt["@id"]:Yt["@index"])||api.compactIri({activeCtx:nt,iri:"@none",relativeTo:{vocab:!0}});_addValue(Tn,An,gn,{propertyIsArray:!st.compactArrays||Kt.includes("@set")})}else Kt.includes("@graph")&&_isSimpleGraph(Yt)?(_isArray$1(gn)&&gn.length>1&&(gn={"@included":gn}),_addValue(Qt,Zt,gn,{propertyIsArray:!st.compactArrays||Kt.includes("@set")})):(_isArray$1(gn)&&gn.length===1&&st.compactArrays&&(gn=gn[0]),gn={[api.compactIri({activeCtx:nt,iri:"@graph",relativeTo:{vocab:!0}})]:gn},"@id"in Yt&&(gn[api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}})]=Yt["@id"]),"@index"in Yt&&(gn[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=Yt["@index"]),_addValue(Qt,Zt,gn,{propertyIsArray:!st.compactArrays||Kt.includes("@set")}));else if(Kt.includes("@language")||Kt.includes("@index")||Kt.includes("@id")||Kt.includes("@type")){let Tn;Qt.hasOwnProperty(Zt)?Tn=Qt[Zt]:Qt[Zt]=Tn={};let An;if(Kt.includes("@language"))_isValue(gn)&&(gn=gn["@value"]),An=Yt["@language"];else if(Kt.includes("@index")){const kn=_getContextValue(nt,Zt,"@index")||"@index",Mn=api.compactIri({activeCtx:nt,iri:kn,relativeTo:{vocab:!0}});if(kn==="@index")An=Yt["@index"],delete gn[Mn];else{let $n;if([An,...$n]=_asArray(gn[kn]||[]),!_isString$1(An))An=null;else switch($n.length){case 0:delete gn[kn];break;case 1:gn[kn]=$n[0];break;default:gn[kn]=$n;break}}}else if(Kt.includes("@id")){const kn=api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}});An=gn[kn],delete gn[kn]}else if(Kt.includes("@type")){const kn=api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}});let Mn;switch([An,...Mn]=_asArray(gn[kn]||[]),Mn.length){case 0:delete gn[kn];break;case 1:gn[kn]=Mn[0];break;default:gn[kn]=Mn;break}Object.keys(gn).length===1&&"@id"in Yt&&(gn=await api.compact({activeCtx:nt,activeProperty:Zt,element:{"@id":Yt["@id"]},options:st}))}An||(An=api.compactIri({activeCtx:nt,iri:"@none",relativeTo:{vocab:!0}})),_addValue(Tn,An,gn,{propertyIsArray:Kt.includes("@set")})}else{const Tn=!st.compactArrays||Kt.includes("@set")||Kt.includes("@list")||_isArray$1(gn)&&gn.length===0||Bt==="@list"||Bt==="@graph";_addValue(Qt,Zt,gn,{propertyIsArray:Tn})}}}return Et}return it};api.compactIri=({activeCtx:nt,iri:rt,value:it=null,relativeTo:st={vocab:!1},reverse:bt=!1,base:xt=null})=>{if(rt===null)return rt;nt.isPropertyTermScoped&&nt.previousContext&&(nt=nt.previousContext);const Et=nt.getInverse();if(_isKeyword(rt)&&rt in Et&&"@none"in Et[rt]&&"@type"in Et[rt]["@none"]&&"@none"in Et[rt]["@none"]["@type"])return Et[rt]["@none"]["@type"]["@none"];if(st.vocab&&rt in Et){const Dt=nt["@language"]||"@none",Bt=[];_isObject$1(it)&&"@index"in it&&!("@graph"in it)&&Bt.push("@index","@index@set"),_isObject$1(it)&&"@preserve"in it&&(it=it["@preserve"][0]),_isGraph(it)?("@index"in it&&Bt.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in it&&Bt.push("@graph@id","@graph@id@set"),Bt.push("@graph","@graph@set","@set"),"@index"in it||Bt.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in it||Bt.push("@graph@id","@graph@id@set")):_isObject$1(it)&&!_isValue(it)&&Bt.push("@id","@id@set","@type","@set@type");let Ft="@language",Yt="@null";if(bt)Ft="@type",Yt="@reverse",Bt.push("@set");else if(_isList(it)){"@index"in it||Bt.push("@list");const Wt=it["@list"];if(Wt.length===0)Ft="@any",Yt="@none";else{let Qt=Wt.length===0?Dt:null,Kt=null;for(let on=0;on<Wt.length;++on){const nn=Wt[on];let mn="@none",gn="@none";if(_isValue(nn))if("@direction"in nn){const Tn=(nn["@language"]||"").toLowerCase(),An=nn["@direction"];mn=`${Tn}_${An}`}else"@language"in nn?mn=nn["@language"].toLowerCase():"@type"in nn?gn=nn["@type"]:mn="@null";else gn="@id";if(Qt===null?Qt=mn:mn!==Qt&&_isValue(nn)&&(Qt="@none"),Kt===null?Kt=gn:gn!==Kt&&(Kt="@none"),Qt==="@none"&&Kt==="@none")break}Qt=Qt||"@none",Kt=Kt||"@none",Kt!=="@none"?(Ft="@type",Yt=Kt):Yt=Qt}}else{if(_isValue(it))if("@language"in it&&!("@index"in it)){Bt.push("@language","@language@set"),Yt=it["@language"];const Wt=it["@direction"];Wt&&(Yt=`${Yt}_${Wt}`)}else"@direction"in it&&!("@index"in it)?Yt=`_${it["@direction"]}`:"@type"in it&&(Ft="@type",Yt=it["@type"]);else Ft="@type",Yt="@id";Bt.push("@set")}Bt.push("@none"),_isObject$1(it)&&!("@index"in it)&&Bt.push("@index","@index@set"),_isValue(it)&&Object.keys(it).length===1&&Bt.push("@language","@language@set");const Zt=_selectTerm(nt,rt,it,Bt,Ft,Yt);if(Zt!==null)return Zt}if(st.vocab&&"@vocab"in nt){const Dt=nt["@vocab"];if(rt.indexOf(Dt)===0&&rt!==Dt){const Bt=rt.substr(Dt.length);if(!nt.mappings.has(Bt))return Bt}}let kt=null;const Lt=[];let Pt=nt.fastCurieMap;const Rt=rt.length-1;for(let Dt=0;Dt<Rt&&rt[Dt]in Pt;++Dt)Pt=Pt[rt[Dt]],""in Pt&&Lt.push(Pt[""][0]);for(let Dt=Lt.length-1;Dt>=0;--Dt){const Bt=Lt[Dt],Ft=Bt.terms;for(const Yt of Ft){const Zt=Yt+":"+rt.substr(Bt.iri.length);nt.mappings.get(Yt)._prefix&&(!nt.mappings.has(Zt)||it===null&&nt.mappings.get(Zt)["@id"]===rt)&&(kt===null||_compareShortestLeast(Zt,kt)<0)&&(kt=Zt)}}if(kt!==null)return kt;for(const[Dt,Bt]of nt.mappings)if(Bt&&Bt._prefix&&rt.startsWith(Dt+":"))throw new JsonLdError$1(`Absolute IRI "${rt}" confused with prefix "${Dt}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:nt});if(!st.vocab)if("@base"in nt)if(nt["@base"]){const Dt=_removeBase(_prependBase(xt,nt["@base"]),rt);return REGEX_KEYWORD.test(Dt)?`./${Dt}`:Dt}else return rt;else return _removeBase(xt,rt);return rt};api.compactValue=({activeCtx:nt,activeProperty:rt,value:it,options:st})=>{if(_isValue(it)){const kt=_getContextValue(nt,rt,"@type"),Lt=_getContextValue(nt,rt,"@language"),Pt=_getContextValue(nt,rt,"@direction"),Rt=_getContextValue(nt,rt,"@container")||[],Dt="@index"in it&&!Rt.includes("@index");if(!Dt&&kt!=="@none"&&(it["@type"]===kt||"@language"in it&&it["@language"]===Lt&&"@direction"in it&&it["@direction"]===Pt||"@language"in it&&it["@language"]===Lt||"@direction"in it&&it["@direction"]===Pt))return it["@value"];const Bt=Object.keys(it).length,Ft=Bt===1||Bt===2&&"@index"in it&&!Dt,Yt="@language"in nt,Zt=_isString$1(it["@value"]),Wt=nt.mappings.has(rt)&&nt.mappings.get(rt)["@language"]===null;if(Ft&&kt!=="@none"&&(!Yt||!Zt||Wt))return it["@value"];const Qt={};return Dt&&(Qt[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=it["@index"]),"@type"in it?Qt[api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx:nt,iri:it["@type"],relativeTo:{vocab:!0}}):"@language"in it&&(Qt[api.compactIri({activeCtx:nt,iri:"@language",relativeTo:{vocab:!0}})]=it["@language"]),"@direction"in it&&(Qt[api.compactIri({activeCtx:nt,iri:"@direction",relativeTo:{vocab:!0}})]=it["@direction"]),Qt[api.compactIri({activeCtx:nt,iri:"@value",relativeTo:{vocab:!0}})]=it["@value"],Qt}const bt=_expandIri$1(nt,rt,{vocab:!0},st),xt=_getContextValue(nt,rt,"@type"),Et=api.compactIri({activeCtx:nt,iri:it["@id"],relativeTo:{vocab:xt==="@vocab"},base:st.base});return xt==="@id"||xt==="@vocab"||bt==="@graph"?Et:{[api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}})]:Et}};function _selectTerm(nt,rt,it,st,bt,xt){xt===null&&(xt="@null");const Et=[];if((xt==="@id"||xt==="@reverse")&&_isObject$1(it)&&"@id"in it){xt==="@reverse"&&Et.push("@reverse");const Lt=api.compactIri({activeCtx:nt,iri:it["@id"],relativeTo:{vocab:!0}});nt.mappings.has(Lt)&&nt.mappings.get(Lt)&&nt.mappings.get(Lt)["@id"]===it["@id"]?Et.push.apply(Et,["@vocab","@id"]):Et.push.apply(Et,["@id","@vocab"])}else{Et.push(xt);const Lt=Et.find(Pt=>Pt.includes("_"));Lt&&Et.push(Lt.replace(/^[^_]+_/,"_"))}Et.push("@none");const kt=nt.inverse[rt];for(const Lt of st){if(!(Lt in kt))continue;const Pt=kt[Lt][bt];for(const Rt of Et)if(Rt in Pt)return Pt[Rt]}return null}function _checkNestProperty(nt,rt,it){if(_expandIri$1(nt,rt,{vocab:!0},it)!=="@nest")throw new JsonLdError$1("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}var JsonLdProcessor,hasRequiredJsonLdProcessor;function requireJsonLdProcessor(){return hasRequiredJsonLdProcessor||(hasRequiredJsonLdProcessor=1,JsonLdProcessor=nt=>{class rt{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(rt,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(rt.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:rt}),rt.compact=function(it,st){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):nt.compact(it,st)},rt.expand=function(it){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):nt.expand(it)},rt.flatten=function(it){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):nt.flatten(it)},rt}),JsonLdProcessor}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const canonize=rdfCanonize.exports,platform=platformBrowser,util=util$5,ContextResolver=ContextResolver_1,IdentifierIssuer=util.IdentifierIssuer,JsonLdError=JsonLdError_1,LRU=lruCache,NQuads=NQuads$1,{expand:_expand}=expand,{flatten:_flatten}=flatten,{fromRDF:_fromRDF}=fromRdf,{toRDF:_toRDF}=toRdf,{frameMergedOrDefault:_frameMergedOrDefault,cleanupNull:_cleanupNull}=frame,{isArray:_isArray,isObject:_isObject,isString:_isString}=types$7,{isSubjectReference:_isSubjectReference}=graphTypes$5,{expandIri:_expandIri,getInitialContext:_getInitialContext,process:_processContext,processingMode:_processingMode}=context,{compact:_compact,compactIri:_compactIri}=compact,{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=nodeMap,{logEventHandler:_logEventHandler,logWarningEventHandler:_logWarningEventHandler,safeEventHandler:_safeEventHandler,setDefaultEventHandler:_setDefaultEventHandler,setupEventHandler:_setupEventHandler,strictEventHandler:_strictEventHandler,unhandledEventHandler:_unhandledEventHandler}=events,wrapper=function(nt){const rt={},st=new LRU({max:100});nt.compact=async function(xt,Et,kt){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(Et===null)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(xt===null)return null;kt=bt(kt,{base:_isString(xt)?xt:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:st})}),kt.link&&(kt.skipExpansion=!0),kt.compactToRelative||delete kt.base;let Lt;kt.skipExpansion?Lt=xt:Lt=await nt.expand(xt,kt);const Pt=await nt.processContext(_getInitialContext(kt),Et,kt);let Rt=await _compact({activeCtx:Pt,element:Lt,options:kt});kt.compactArrays&&!kt.graph&&_isArray(Rt)?Rt.length===1?Rt=Rt[0]:Rt.length===0&&(Rt={}):kt.graph&&_isObject(Rt)&&(Rt=[Rt]),_isObject(Et)&&"@context"in Et&&(Et=Et["@context"]),Et=util.clone(Et),_isArray(Et)||(Et=[Et]);const Dt=Et;Et=[];for(let Ft=0;Ft<Dt.length;++Ft)(!_isObject(Dt[Ft])||Object.keys(Dt[Ft]).length>0)&&Et.push(Dt[Ft]);const Bt=Et.length>0;if(Et.length===1&&(Et=Et[0]),_isArray(Rt)){const Ft=_compactIri({activeCtx:Pt,iri:"@graph",relativeTo:{vocab:!0}}),Yt=Rt;Rt={},Bt&&(Rt["@context"]=Et),Rt[Ft]=Yt}else if(_isObject(Rt)&&Bt){const Ft=Rt;Rt={"@context":Et};for(const Yt in Ft)Rt[Yt]=Ft[Yt]}return Rt},nt.expand=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");Et=bt(Et,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:st})});const kt={},Lt=[];if("expandContext"in Et){const Bt=util.clone(Et.expandContext);_isObject(Bt)&&"@context"in Bt?kt.expandContext=Bt:kt.expandContext={"@context":Bt},Lt.push(kt.expandContext)}let Pt;if(!_isString(xt))kt.input=util.clone(xt);else{const Bt=await nt.get(xt,Et);Pt=Bt.documentUrl,kt.input=Bt.document,Bt.contextUrl&&(kt.remoteContext={"@context":Bt.contextUrl},Lt.push(kt.remoteContext))}"base"in Et||(Et.base=Pt||"");let Rt=_getInitialContext(Et);for(const Bt of Lt)Rt=await _processContext({activeCtx:Rt,localCtx:Bt,options:Et});let Dt=await _expand({activeCtx:Rt,element:kt.input,options:Et});return _isObject(Dt)&&"@graph"in Dt&&Object.keys(Dt).length===1?Dt=Dt["@graph"]:Dt===null&&(Dt=[]),_isArray(Dt)||(Dt=[Dt]),Dt},nt.flatten=async function(xt,Et,kt){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof Et=="function"?Et=null:Et=Et||null,kt=bt(kt,{base:_isString(xt)?xt:"",contextResolver:new ContextResolver({sharedCache:st})});const Lt=await nt.expand(xt,kt),Pt=_flatten(Lt);return Et===null?Pt:(kt.graph=!0,kt.skipExpansion=!0,await nt.compact(Pt,Et,kt))},nt.frame=async function(xt,Et,kt){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(kt=bt(kt,{base:_isString(xt)?xt:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:st})}),_isString(Et)){const Wt=await nt.get(Et,kt);if(Et=Wt.document,Wt.contextUrl){let Qt=Et["@context"];Qt?_isArray(Qt)?Qt.push(Wt.contextUrl):Qt=[Qt,Wt.contextUrl]:Qt=Wt.contextUrl,Et["@context"]=Qt}}const Lt=Et?Et["@context"]||{}:{},Pt=await nt.processContext(_getInitialContext(kt),Lt,kt);kt.hasOwnProperty("omitGraph")||(kt.omitGraph=_processingMode(Pt,1.1)),kt.hasOwnProperty("pruneBlankNodeIdentifiers")||(kt.pruneBlankNodeIdentifiers=_processingMode(Pt,1.1));const Rt=await nt.expand(xt,kt),Dt={...kt};Dt.isFrame=!0,Dt.keepFreeFloatingNodes=!0;const Bt=await nt.expand(Et,Dt),Ft=Object.keys(Et).map(Wt=>_expandIri(Pt,Wt,{vocab:!0}));Dt.merged=!Ft.includes("@graph"),Dt.is11=_processingMode(Pt,1.1);const Yt=_frameMergedOrDefault(Rt,Bt,Dt);Dt.graph=!kt.omitGraph,Dt.skipExpansion=!0,Dt.link={},Dt.framing=!0;let Zt=await nt.compact(Yt,Lt,Dt);return Dt.link={},Zt=_cleanupNull(Zt,Dt),Zt},nt.link=async function(xt,Et,kt){const Lt={};return Et&&(Lt["@context"]=Et),Lt["@embed"]="@link",nt.frame(xt,Lt,kt)},nt.normalize=nt.canonize=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(Et=bt(Et,{base:_isString(xt)?xt:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new ContextResolver({sharedCache:st})}),"inputFormat"in Et){if(Et.inputFormat!=="application/n-quads"&&Et.inputFormat!=="application/nquads")throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const Pt=NQuads.parse(xt);return canonize.canonize(Pt,Et)}const kt={...Et};delete kt.format,kt.produceGeneralizedRdf=!1;const Lt=await nt.toRDF(xt,kt);return canonize.canonize(Lt,Et)},nt.fromRDF=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Et=bt(Et,{format:_isString(xt)?"application/n-quads":void 0});const{format:kt}=Et;let{rdfParser:Lt}=Et;if(kt){if(Lt=Lt||rt[kt],!Lt)throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:kt})}else Lt=()=>xt;const Pt=await Lt(xt);return _fromRDF(Pt,Et)},nt.toRDF=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");Et=bt(Et,{base:_isString(xt)?xt:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:st})});let kt;Et.skipExpansion?kt=xt:kt=await nt.expand(xt,Et);const Lt=_toRDF(kt,Et);if(Et.format){if(Et.format==="application/n-quads"||Et.format==="application/nquads")return NQuads.serialize(Lt);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:Et.format})}return Lt},nt.createNodeMap=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Et=bt(Et,{base:_isString(xt)?xt:"",contextResolver:new ContextResolver({sharedCache:st})});const kt=await nt.expand(xt,Et);return _createMergedNodeMap(kt,Et)},nt.merge=async function(xt,Et,kt){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(xt))throw new TypeError('Could not merge, "docs" must be an array.');typeof Et=="function"?Et=null:Et=Et||null,kt=bt(kt,{contextResolver:new ContextResolver({sharedCache:st})});const Lt=await Promise.all(xt.map(Wt=>{const Qt={...kt};return nt.expand(Wt,Qt)}));let Pt=!0;"mergeNodes"in kt&&(Pt=kt.mergeNodes);const Rt=kt.issuer||new IdentifierIssuer("_:b"),Dt={"@default":{}};for(let Wt=0;Wt<Lt.length;++Wt){const Qt=util.relabelBlankNodes(Lt[Wt],{issuer:new IdentifierIssuer("_:b"+Wt+"-")}),Kt=Pt||Wt===0?Dt:{"@default":{}};if(_createNodeMap(Qt,Kt,"@default",Rt),Kt!==Dt)for(const on in Kt){const nn=Kt[on];if(!(on in Dt)){Dt[on]=nn;continue}const mn=Dt[on];for(const gn in nn)gn in mn||(mn[gn]=nn[gn])}}const Bt=_mergeNodeMaps(Dt),Ft=[],Yt=Object.keys(Bt).sort();for(let Wt=0;Wt<Yt.length;++Wt){const Qt=Bt[Yt[Wt]];_isSubjectReference(Qt)||Ft.push(Qt)}return Et===null?Ft:(kt.graph=!0,kt.skipExpansion=!0,await nt.compact(Ft,Et,kt))},Object.defineProperty(nt,"documentLoader",{get:()=>nt._documentLoader,set:xt=>nt._documentLoader=xt}),nt.documentLoader=async xt=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:xt})},nt.get=async function(xt,Et){let kt;typeof Et.documentLoader=="function"?kt=Et.documentLoader:kt=nt.documentLoader;const Lt=await kt(xt);try{if(!Lt.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(Lt.document)&&(Lt.document=JSON.parse(Lt.document))}catch(Pt){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Pt,remoteDoc:Lt})}return Lt},nt.processContext=async function(xt,Et,kt){return kt=bt(kt,{base:"",contextResolver:new ContextResolver({sharedCache:st})}),Et===null?_getInitialContext(kt):(Et=util.clone(Et),_isObject(Et)&&"@context"in Et||(Et={"@context":Et}),_processContext({activeCtx:xt,localCtx:Et,options:kt}))},nt.getContextValue=context.getContextValue,nt.documentLoaders={},nt.useDocumentLoader=function(xt){if(!(xt in nt.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+xt+'"',"jsonld.UnknownDocumentLoader",{type:xt});nt.documentLoader=nt.documentLoaders[xt].apply(nt,Array.prototype.slice.call(arguments,1))},nt.registerRDFParser=function(xt,Et){rt[xt]=Et},nt.unregisterRDFParser=function(xt){delete rt[xt]},nt.registerRDFParser("application/n-quads",NQuads.parse),nt.registerRDFParser("application/nquads",NQuads.parse),nt.url=url$1,nt.logEventHandler=_logEventHandler,nt.logWarningEventHandler=_logWarningEventHandler,nt.safeEventHandler=_safeEventHandler,nt.setDefaultEventHandler=_setDefaultEventHandler,nt.strictEventHandler=_strictEventHandler,nt.unhandledEventHandler=_unhandledEventHandler,nt.util=util,Object.assign(nt,util),nt.promises=nt,nt.RequestQueue=requireRequestQueue(),nt.JsonLdProcessor=requireJsonLdProcessor()(nt),platform.setupGlobals(nt),platform.setupDocumentLoaders(nt);function bt(xt,{documentLoader:Et=nt.documentLoader,...kt}){if(xt&&"compactionMap"in xt)throw new JsonLdError('"compactionMap" not supported.',"jsonld.OptionsError");if(xt&&"expansionMap"in xt)throw new JsonLdError('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:Et},kt,xt,{eventHandler:_setupEventHandler({options:xt})})}return nt},factory=function(){return wrapper(function(){return factory()})};wrapper(factory);var jsonld=factory;const _hoisted_1$6=["grid","caption","right","left","full","width","height"],_hoisted_2$4=["innerHTML"],sparqlEndpoint="https://cy9in0xsv5.execute-api.us-east-1.amazonaws.com/prod/sparql",iiifService="https://iiif.juncture-digital.org",sparql=`
    PREFIX jwd: <http://kg.jstor.org/entity/>
    PREFIX jwdt: <http://kg.jstor.org/prop/direct/>
    PREFIX jp: <http://kg.jstor.org/prop/>
    PREFIX jps: <http://kg.jstor.org/prop/statement/>
    PREFIX jpq: <http://kg.jstor.org/prop/qualifier/>
    PREFIX wd: <http://www.wikidata.org/entity/>
    PREFIX wdt: <http://www.wikidata.org/prop/direct/>
    PREFIX schema: <http://schema.org/>
    CONSTRUCT {
      ?specimen jwdt:P1660 ?specimenOf ;
                schema:description ?description ;
                rdf:type jwd:Q14316 ;
                jwdt:P1663 ?collectionDate ;
                jwdt:P1662 ?collector ;
                jwdt:P1665 ?locationCollected ;
                jwdt:P1106 ?jstorPlantsId ;
                jwdt:P1661 ?specimenType ;
                jwdt:P501 ?taxonName ;
                jwdt:P1666 ?availableAt ;
                jp:P1467 ?img .
      ?img jps:P1467 ?url ; jpq:P1669 ?imgSize .
      ?availableAt jps:P1666 ?wdID ; rdfs:label ?herbariumName .
      ?locationCollected jps:P1665 ?locId ; rdfs:label ?locationName ; wdt:P6766 ?wofId .
    } WHERE {
      ?specimen jwdt:P17 jwd:Q14316 ;
              <<SELECTOR>>
              schema:description ?description ;
              jwdt:P1106 ?jstorPlantsId ;
              jwdt:P501 ?taxonName ;
              jp:P1467 [ jps:P1467 ?img ;
                        jpq:P1669 ?imgSize ] .
      FILTER(?imgSize = 'best')
      OPTIONAL { ?specimen jwdt:P1661 ?specimenType . }
      OPTIONAL { ?specimen jwdt:P1660 ?specimenOf . }
      OPTIONAL { ?specimen jwdt:P1663 ?collectionDate . }
      OPTIONAL { ?specimen jwdt:P1662 ?collector . }
      OPTIONAL {
          ?specimen jwdt:P1665 ?locationCollected .
          SERVICE <https://query.wikidata.org/sparql> {
              ?locationCollected rdfs:label ?locationName .
              FILTER(LANG(?locationName) = 'en')
              OPTIONAL { ?locationCollected wdt:P6766 ?wofId . }
          }
      }        
      OPTIONAL {
          ?specimen jwdt:P1666 ?availableAt .
          SERVICE <https://query.wikidata.org/sparql> {
              ?availableAt rdfs:label ?herbariumName .
              FILTER(LANG(?herbariumName) = 'en')
          }
      }
    }
    LIMIT <<LIMIT>>`,_sfc_main$8=defineComponent({__name:"PlantSpecimen.ce",props:{eid:{type:String},qid:{type:String},jpid:{type:String},wdid:{type:String},taxonName:{type:String},caption:{type:String},max:{type:Number,default:1},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean},width:{type:String},height:{type:String}},setup(nt){const rt=nt,it=ref(null),st=ref([]),bt=ref([]);watch$1(st,async()=>{var Rt;bt.value=await Promise.all((((Rt=st.value)==null?void 0:Rt.length)===1?[st.value[0]]:st.value||[]).map(Dt=>fetch(`${iiifService}/manifest/`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(Pt(Dt))}).then(Bt=>Bt.json())))});const xt=computed(()=>{var Rt;return rt.caption||(((Rt=st.value)==null?void 0:Rt.length)>0?st.value[0].description:"")});onMounted(()=>kt());const Et={"@context":{jwd:"http://kg.jstor.org/entity/",jwdt:"http://kg.jstor.org/prop/direct/",jp:"http://kg.jstor.org/prop/",jps:"http://kg.jstor.org/prop/statement/",jpq:"http://kg.jstor.org/prop/qualifier/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",wd:"http://www.wikidata.org/entity/",wdt:"http://www.wikidata.org/prop/direct/",xsd:"http://www.w3.org/2001/XMLSchema#",Specimen:"jwd:Q14316",id:"@id",collectionDate:{"@id":"jwdt:P1663","@type":"xsd:dateTime"},collector:{"@id":"jwdt:P1662","@container":"@set"},description:{"@id":"schema:description","@language":"en"},herbarium:{"@id":"jwdt:P1666","@type":"@id"},images:{"@id":"jp:P1467","@type":"@id","@container":"@set"},imgSize:{"@id":"jpq:P1669"},"instance of":{"@id":"jwdt:P17","@type":"@id"},jstorPlantsId:{"@id":"jwdt:P1106"},locationCollected:{"@id":"jwdt:P1665"},label:{"@id":"rdfs:label","@language":"en"},specimenOf:{"@id":"jwdt:P1660","@type":"@id"},specimenType:{"@id":"jwdt:P1661"},taxonName:{"@id":"jwdt:P501"},wofId:{"@id":"wdt:P6766"}}};async function kt(){let Rt=rt.jpid?`jwdt:P1106 "${rt.jpid}" ;`:rt.eid||rt.qid||rt.wdid?`jwdt:P1660 <http://www.wikidata.org/entity/${rt.eid||rt.qid||rt.wdid}> ;`:`jwdt:P501 "${rt.taxonName}" ;`,Dt=sparql.replace(/<<SELECTOR>>/,Rt).replace(/<<LIMIT>>/,`${rt.max}`),Bt=await Lt(Dt);Bt["@graph"]?st.value=(await Lt(Dt))["@graph"]:(delete Bt["@context"],st.value=[Bt])}async function Lt(Rt){let Bt=await(await fetch(sparqlEndpoint,{method:"POST",body:new URLSearchParams({query:Rt}),headers:{Accept:"text/plain","Content-type":"application/x-www-form-urlencoded"}})).text(),Ft=await jsonld.fromRDF(Bt,{format:"application/n-quads"});return jsonld.frame(Ft,{"@context":Et,"@type":"Specimen"})}function Pt(Rt){let Bt=Rt.images.find(Yt=>Yt.imgSize==="best").id.match(/rft_id=([^&]*)/)[1],Ft={url:`${iiifService}/gp-proxy${Bt}`};return Rt.taxonName&&(Ft["Taxon name"]=Rt.taxonName),Rt.jstorPlantsId&&(Ft["Global Plants ID"]=Rt.jstorPlantsId),Rt.description&&(Ft.Description=Rt.description),Rt.description&&(Ft.Label=Rt.description),Rt.specimenType&&(Ft["Specimen type"]=Rt.specimenType),Rt.collector&&(Ft.Collector=Rt.collector.join("; ")),Rt.locationCollected&&(Ft["Location collected"]=Rt.locationCollected.label),Rt.collectionDate&&(Ft["Date collected"]=Rt.collectionDate),Rt.herbarium&&(Ft.Herbarium=Rt.herbarium.label),Ft}return(Rt,Dt)=>(openBlock(),createElementBlock("div",{class:"osd",id:"osd",ref_key:"root",ref:it},[st.value.length>0?(openBlock(),createElementBlock("ve-media",{key:0,grid:bt.value.length>1,caption:xt.value,right:rt.right,left:rt.left,full:rt.full,width:rt.width,height:rt.height},[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(bt.value,Bt=>(openBlock(),createElementBlock("li",{key:Bt.id||Bt["@id"],innerHTML:Bt.id||Bt["@id"]},null,8,_hoisted_2$4))),128))])],8,_hoisted_1$6)):createCommentVNode("",!0)],512))}}),_hoisted_1$5=createBaseVNode("input",{class:"search-btn",type:"checkbox",id:"search-btn"},null,-1),_hoisted_2$3={class:"wrapper"},_hoisted_3$3={class:"search-form"},_hoisted_4$3={class:"input-wrapper"},_hoisted_5$3={key:0,class:"search-results"},_hoisted_6$2=["href"],_hoisted_7$2=["innerHTML"],_hoisted_8$2=["innerHTML"],_hoisted_9$1={key:0},searchEndpoint="/search",_sfc_main$7=defineComponent({__name:"SiteSearch.ce",props:{searchDomain:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Zt;return(Zt=it==null?void 0:it.value)==null?void 0:Zt.parentNode}),bt=ref(),xt=ref(),Et=ref(""),kt=ref([]),Lt=ref(0),Pt=ref(!1);onMounted(()=>Rt());function Rt(){var Zt,Wt;bt.value=(Zt=st.value)==null?void 0:Zt.querySelector("#search-input"),bt.value.value="",xt.value=(Wt=st.value)==null?void 0:Wt.querySelector("#search-btn"),kt.value=[]}watch$1(Pt,()=>{var Zt;xt.value&&(xt.value.checked=Pt.value),Pt&&((Zt=bt.value)==null||Zt.focus())});function Dt(){var Kt;let Zt=(Kt=bt.value)==null?void 0:Kt.value.replace(/ /,"%20"),Wt=Zt===Et.value?kt.value.length+1:1,Qt=`${searchEndpoint}?domain=${rt.searchDomain}&q=${Zt}&start=${Wt}`;fetch(Qt).then(on=>on.json()).then(on=>{Lt.value=parseInt(on.searchInformation.totalResults);let nn=on.items.map(mn=>{let gn=new URL(mn.link);return mn.link=`${location.origin}${gn.pathname}`,mn});kt.value=Zt!==Et.value?nn:[...kt.value,...nn],Et.value=Zt||""})}function Bt(Zt){Zt.key==="Enter"&&Dt()}function Ft(){Pt.value=!1,bt.value&&(bt.value.value=""),Et.value="",Lt.value=0,kt.value=[]}function Yt(){Pt.value=!Pt.value}return(Zt,Wt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"search"},[_hoisted_1$5,createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("sl-icon-button",{class:"cancel",onClick:Ft,name:"x-circle",label:"Clear"}),createBaseVNode("input",{type:"text",id:"search-input",class:"search-input",onKeyup:Bt,autocomplete:"off",role:"textbox",placeholder:"Search site"},null,32)])]),kt.value.length>0?(openBlock(),createElementBlock("ul",_hoisted_5$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value,(Qt,Kt)=>(openBlock(),createElementBlock("li",{key:`sr=${Kt}`},[createBaseVNode("a",{href:Qt.link},[createBaseVNode("h3",{innerHTML:Qt.htmlTitle},null,8,_hoisted_7$2),createBaseVNode("p",{innerHTML:Qt.htmlSnippet},null,8,_hoisted_8$2)],8,_hoisted_6$2)]))),128)),Lt.value>kt.value.length?(openBlock(),createElementBlock("li",_hoisted_9$1,[createBaseVNode("div",{class:"more",onClick:Dt},"More")])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("label",{class:"search-icon",htmlFor:"search-btn"},[createBaseVNode("sl-icon-button",{onClick:Yt,name:"search",label:"Search"})])],512))}}),_style_0$3=`*{box-sizing:border-box}.search-icon{color:#fff;font-size:28px}.search-icon:hover{cursor:pointer}.search{position:relative;display:flex;align-items:center;gap:10px}.search-btn,.search-form,.wrapper{display:none}.wrapper{flex-direction:column;position:absolute;right:-4px}.search-form{display:flex;align-items:center}.search-input{height:30px;width:250px;border-radius:6px;padding:3px 10px;font-size:1rem}.search-submit{background-color:#fff;border-radius:6px;padding:8px 8px 4px;height:24px;z-index:4}.search-submit:hover{background-color:#ddd;cursor:pointer}.search-submit sl-icon{color:#00f;font-size:20px}.search-results{position:absolute;top:42px;left:0;width:326px;max-height:50vh;overflow-y:scroll;z-index:2;background-color:#fff;margin:0 0 0 2px;list-style:none;padding:6px;border-radius:6px;font-size:.9rem;box-shadow:0 6px 20px #00000030}.search-results li:nth-of-type(even){background-color:#e6e6df}.search-results li{padding:6px;margin:3px;border:1px solid #E6E6DF}.search-results li h3,.search-results li p{margin:8px 0}.search-results li a{text-decoration:none;color:#444}.search-results li a h3{font-weight:700}.search-results li a p{font-weight:300}.search-results li:hover{cursor:pointer;box-shadow:0 4px 8px #0003}.search-icon sl-icon-button::part(base){color:#fff}.search-btn:checked~.search-icon sl-icon-button::part(base){visibility:hidden}.search-btn:checked~.wrapper .search-form{display:flex;width:100%}.search-btn:checked~.wrapper{display:flex}.input-wrapper{display:inline-block;position:relative}.cancel{position:absolute;right:0;font-size:16px;cursor:pointer}
`,SiteSearch=_export_sfc(_sfc_main$7,[["styles",[_style_0$3]]]);var tab_styles_default=i$7`
  ${component_styles_default}

  :host {
    display: inline-block;
  }

  .tab {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    border-radius: var(--sl-border-radius-medium);
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-medium) var(--sl-spacing-large);
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
    transition: var(--transition-speed) box-shadow, var(--transition-speed) color;
  }

  .tab:hover:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus {
    outline: none;
  }

  .tab:focus-visible:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(-1 * var(--sl-focus-ring-width) - var(--sl-focus-ring-offset));
  }

  .tab.tab--active:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab.tab--closable {
    padding-inline-end: var(--sl-spacing-small);
  }

  .tab.tab--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .tab__close-button {
    font-size: var(--sl-font-size-small);
    margin-inline-start: var(--sl-spacing-small);
  }

  .tab__close-button::part(base) {
    padding: var(--sl-spacing-3x-small);
  }

  @media (forced-colors: active) {
    .tab.tab--active:not(.tab--disabled) {
      outline: solid 1px transparent;
      outline-offset: -3px;
    }
  }
`,id$1=0,SlTab=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.attrId=++id$1,this.componentId=`sl-tab-${this.attrId}`,this.panel="",this.active=!1,this.closable=!1,this.disabled=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tab")}handleCloseClick(nt){nt.stopPropagation(),this.emit("sl-close")}handleActiveChange(){this.setAttribute("aria-selected",this.active?"true":"false")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}focus(nt){this.tab.focus(nt)}blur(){this.tab.blur()}render(){return this.id=this.id.length>0?this.id:this.componentId,x$1`
      <div
        part="base"
        class=${o$1({tab:!0,"tab--active":this.active,"tab--closable":this.closable,"tab--disabled":this.disabled})}
        tabindex=${this.disabled?"-1":"0"}
      >
        <slot></slot>
        ${this.closable?x$1`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                class="tab__close-button"
                @click=${this.handleCloseClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </div>
    `}};SlTab.styles=tab_styles_default;SlTab.dependencies={"sl-icon-button":SlIconButton};__decorateClass([i$4(".tab")],SlTab.prototype,"tab",2);__decorateClass([n$3({reflect:!0})],SlTab.prototype,"panel",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTab.prototype,"active",2);__decorateClass([n$3({type:Boolean})],SlTab.prototype,"closable",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTab.prototype,"disabled",2);__decorateClass([watch("active")],SlTab.prototype,"handleActiveChange",1);__decorateClass([watch("disabled")],SlTab.prototype,"handleDisabledChange",1);SlTab.define("sl-tab");var tab_group_styles_default=i$7`
  ${component_styles_default}

  :host {
    --indicator-color: var(--sl-color-primary-600);
    --track-color: var(--sl-color-neutral-200);
    --track-width: 2px;

    display: block;
  }

  .tab-group {
    display: flex;
    border-radius: 0;
  }

  .tab-group__tabs {
    display: flex;
    position: relative;
  }

  .tab-group__indicator {
    position: absolute;
    transition: var(--sl-transition-fast) translate ease, var(--sl-transition-fast) width ease;
  }

  .tab-group--has-scroll-controls .tab-group__nav-container {
    position: relative;
    padding: 0 var(--sl-spacing-x-large);
  }

  .tab-group__body {
    display: block;
    overflow: auto;
  }

  .tab-group__scroll-button {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    bottom: 0;
    width: var(--sl-spacing-x-large);
  }

  .tab-group__scroll-button--start {
    left: 0;
  }

  .tab-group__scroll-button--end {
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--start {
    left: auto;
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--end {
    left: 0;
    right: auto;
  }

  /*
   * Top
   */

  .tab-group--top {
    flex-direction: column;
  }

  .tab-group--top .tab-group__nav-container {
    order: 1;
  }

  .tab-group--top .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--top .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--top .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-bottom: solid var(--track-width) var(--track-color);
  }

  .tab-group--top .tab-group__indicator {
    bottom: calc(-1 * var(--track-width));
    border-bottom: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--top .tab-group__body {
    order: 2;
  }

  .tab-group--top ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Bottom
   */

  .tab-group--bottom {
    flex-direction: column;
  }

  .tab-group--bottom .tab-group__nav-container {
    order: 2;
  }

  .tab-group--bottom .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--bottom .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-top: solid var(--track-width) var(--track-color);
  }

  .tab-group--bottom .tab-group__indicator {
    top: calc(-1 * var(--track-width));
    border-top: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--bottom .tab-group__body {
    order: 1;
  }

  .tab-group--bottom ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Start
   */

  .tab-group--start {
    flex-direction: row;
  }

  .tab-group--start .tab-group__nav-container {
    order: 1;
  }

  .tab-group--start .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-inline-end: solid var(--track-width) var(--track-color);
  }

  .tab-group--start .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    border-right: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--start.tab-group--rtl .tab-group__indicator {
    right: auto;
    left: calc(-1 * var(--track-width));
  }

  .tab-group--start .tab-group__body {
    flex: 1 1 auto;
    order: 2;
  }

  .tab-group--start ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }

  /*
   * End
   */

  .tab-group--end {
    flex-direction: row;
  }

  .tab-group--end .tab-group__nav-container {
    order: 2;
  }

  .tab-group--end .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-left: solid var(--track-width) var(--track-color);
  }

  .tab-group--end .tab-group__indicator {
    left: calc(-1 * var(--track-width));
    border-inline-start: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--end.tab-group--rtl .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    left: auto;
  }

  .tab-group--end .tab-group__body {
    flex: 1 1 auto;
    order: 1;
  }

  .tab-group--end ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }
`,SlTabGroup=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.tabs=[],this.panels=[],this.hasScrollControls=!1,this.placement="top",this.activation="auto",this.noScrollControls=!1}connectedCallback(){const nt=Promise.all([customElements.whenDefined("sl-tab"),customElements.whenDefined("sl-tab-panel")]);super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>{this.repositionIndicator(),this.updateScrollControls()}),this.mutationObserver=new MutationObserver(rt=>{rt.some(it=>!["aria-labelledby","aria-controls"].includes(it.attributeName))&&setTimeout(()=>this.setAriaLabels()),rt.some(it=>it.attributeName==="disabled")&&this.syncTabsAndPanels()}),this.updateComplete.then(()=>{this.syncTabsAndPanels(),this.mutationObserver.observe(this,{attributes:!0,childList:!0,subtree:!0}),this.resizeObserver.observe(this.nav),nt.then(()=>{new IntersectionObserver((it,st)=>{var bt;it[0].intersectionRatio>0&&(this.setAriaLabels(),this.setActiveTab((bt=this.getActiveTab())!=null?bt:this.tabs[0],{emitEvents:!1}),st.unobserve(it[0].target))}).observe(this.tabGroup)})})}disconnectedCallback(){this.mutationObserver.disconnect(),this.resizeObserver.unobserve(this.nav)}getAllTabs(nt={includeDisabled:!0}){return[...this.shadowRoot.querySelector('slot[name="nav"]').assignedElements()].filter(it=>nt.includeDisabled?it.tagName.toLowerCase()==="sl-tab":it.tagName.toLowerCase()==="sl-tab"&&!it.disabled)}getAllPanels(){return[...this.body.assignedElements()].filter(nt=>nt.tagName.toLowerCase()==="sl-tab-panel")}getActiveTab(){return this.tabs.find(nt=>nt.active)}handleClick(nt){const it=nt.target.closest("sl-tab");(it==null?void 0:it.closest("sl-tab-group"))===this&&it!==null&&this.setActiveTab(it,{scrollBehavior:"smooth"})}handleKeyDown(nt){const it=nt.target.closest("sl-tab");if((it==null?void 0:it.closest("sl-tab-group"))===this&&(["Enter"," "].includes(nt.key)&&it!==null&&(this.setActiveTab(it,{scrollBehavior:"smooth"}),nt.preventDefault()),["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(nt.key))){const bt=this.tabs.find(Et=>Et.matches(":focus")),xt=this.localize.dir()==="rtl";if((bt==null?void 0:bt.tagName.toLowerCase())==="sl-tab"){let Et=this.tabs.indexOf(bt);nt.key==="Home"?Et=0:nt.key==="End"?Et=this.tabs.length-1:["top","bottom"].includes(this.placement)&&nt.key===(xt?"ArrowRight":"ArrowLeft")||["start","end"].includes(this.placement)&&nt.key==="ArrowUp"?Et--:(["top","bottom"].includes(this.placement)&&nt.key===(xt?"ArrowLeft":"ArrowRight")||["start","end"].includes(this.placement)&&nt.key==="ArrowDown")&&Et++,Et<0&&(Et=this.tabs.length-1),Et>this.tabs.length-1&&(Et=0),this.tabs[Et].focus({preventScroll:!0}),this.activation==="auto"&&this.setActiveTab(this.tabs[Et],{scrollBehavior:"smooth"}),["top","bottom"].includes(this.placement)&&scrollIntoView(this.tabs[Et],this.nav,"horizontal"),nt.preventDefault()}}}handleScrollToStart(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft+this.nav.clientWidth:this.nav.scrollLeft-this.nav.clientWidth,behavior:"smooth"})}handleScrollToEnd(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft-this.nav.clientWidth:this.nav.scrollLeft+this.nav.clientWidth,behavior:"smooth"})}setActiveTab(nt,rt){if(rt=__spreadValues({emitEvents:!0,scrollBehavior:"auto"},rt),nt!==this.activeTab&&!nt.disabled){const it=this.activeTab;this.activeTab=nt,this.tabs.forEach(st=>st.active=st===this.activeTab),this.panels.forEach(st=>{var bt;return st.active=st.name===((bt=this.activeTab)==null?void 0:bt.panel)}),this.syncIndicator(),["top","bottom"].includes(this.placement)&&scrollIntoView(this.activeTab,this.nav,"horizontal",rt.scrollBehavior),rt.emitEvents&&(it&&this.emit("sl-tab-hide",{detail:{name:it.panel}}),this.emit("sl-tab-show",{detail:{name:this.activeTab.panel}}))}}setAriaLabels(){this.tabs.forEach(nt=>{const rt=this.panels.find(it=>it.name===nt.panel);rt&&(nt.setAttribute("aria-controls",rt.getAttribute("id")),rt.setAttribute("aria-labelledby",nt.getAttribute("id")))})}repositionIndicator(){const nt=this.getActiveTab();if(!nt)return;const rt=nt.clientWidth,it=nt.clientHeight,st=this.localize.dir()==="rtl",bt=this.getAllTabs(),Et=bt.slice(0,bt.indexOf(nt)).reduce((kt,Lt)=>({left:kt.left+Lt.clientWidth,top:kt.top+Lt.clientHeight}),{left:0,top:0});switch(this.placement){case"top":case"bottom":this.indicator.style.width=`${rt}px`,this.indicator.style.height="auto",this.indicator.style.translate=st?`${-1*Et.left}px`:`${Et.left}px`;break;case"start":case"end":this.indicator.style.width="auto",this.indicator.style.height=`${it}px`,this.indicator.style.translate=`0 ${Et.top}px`;break}}syncTabsAndPanels(){this.tabs=this.getAllTabs({includeDisabled:!1}),this.panels=this.getAllPanels(),this.syncIndicator(),this.updateComplete.then(()=>this.updateScrollControls())}updateScrollControls(){this.noScrollControls?this.hasScrollControls=!1:this.hasScrollControls=["top","bottom"].includes(this.placement)&&this.nav.scrollWidth>this.nav.clientWidth}syncIndicator(){this.getActiveTab()?(this.indicator.style.display="block",this.repositionIndicator()):this.indicator.style.display="none"}show(nt){const rt=this.tabs.find(it=>it.panel===nt);rt&&this.setActiveTab(rt,{scrollBehavior:"smooth"})}render(){const nt=this.localize.dir()==="rtl";return x$1`
      <div
        part="base"
        class=${o$1({"tab-group":!0,"tab-group--top":this.placement==="top","tab-group--bottom":this.placement==="bottom","tab-group--start":this.placement==="start","tab-group--end":this.placement==="end","tab-group--rtl":this.localize.dir()==="rtl","tab-group--has-scroll-controls":this.hasScrollControls})}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
      >
        <div class="tab-group__nav-container" part="nav">
          ${this.hasScrollControls?x$1`
                <sl-icon-button
                  part="scroll-button scroll-button--start"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--start"
                  name=${nt?"chevron-right":"chevron-left"}
                  library="system"
                  label=${this.localize.term("scrollToStart")}
                  @click=${this.handleScrollToStart}
                ></sl-icon-button>
              `:""}

          <div class="tab-group__nav">
            <div part="tabs" class="tab-group__tabs" role="tablist">
              <div part="active-tab-indicator" class="tab-group__indicator"></div>
              <slot name="nav" @slotchange=${this.syncTabsAndPanels}></slot>
            </div>
          </div>

          ${this.hasScrollControls?x$1`
                <sl-icon-button
                  part="scroll-button scroll-button--end"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--end"
                  name=${nt?"chevron-left":"chevron-right"}
                  library="system"
                  label=${this.localize.term("scrollToEnd")}
                  @click=${this.handleScrollToEnd}
                ></sl-icon-button>
              `:""}
        </div>

        <slot part="body" class="tab-group__body" @slotchange=${this.syncTabsAndPanels}></slot>
      </div>
    `}};SlTabGroup.styles=tab_group_styles_default;SlTabGroup.dependencies={"sl-icon-button":SlIconButton};__decorateClass([i$4(".tab-group")],SlTabGroup.prototype,"tabGroup",2);__decorateClass([i$4(".tab-group__body")],SlTabGroup.prototype,"body",2);__decorateClass([i$4(".tab-group__nav")],SlTabGroup.prototype,"nav",2);__decorateClass([i$4(".tab-group__indicator")],SlTabGroup.prototype,"indicator",2);__decorateClass([t$2()],SlTabGroup.prototype,"hasScrollControls",2);__decorateClass([n$3()],SlTabGroup.prototype,"placement",2);__decorateClass([n$3()],SlTabGroup.prototype,"activation",2);__decorateClass([n$3({attribute:"no-scroll-controls",type:Boolean})],SlTabGroup.prototype,"noScrollControls",2);__decorateClass([watch("noScrollControls",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"updateScrollControls",1);__decorateClass([watch("placement",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"syncIndicator",1);SlTabGroup.define("sl-tab-group");var tab_panel_styles_default=i$7`
  ${component_styles_default}

  :host {
    --padding: 0;

    display: none;
  }

  :host([active]) {
    display: block;
  }

  .tab-panel {
    display: block;
    padding: var(--padding);
  }
`,id=0,SlTabPanel=class extends ShoelaceElement{constructor(){super(...arguments),this.attrId=++id,this.componentId=`sl-tab-panel-${this.attrId}`,this.name="",this.active=!1}connectedCallback(){super.connectedCallback(),this.id=this.id.length>0?this.id:this.componentId,this.setAttribute("role","tabpanel")}handleActiveChange(){this.setAttribute("aria-hidden",this.active?"false":"true")}render(){return x$1`
      <slot
        part="base"
        class=${o$1({"tab-panel":!0,"tab-panel--active":this.active})}
      ></slot>
    `}};SlTabPanel.styles=tab_panel_styles_default;__decorateClass([n$3({reflect:!0})],SlTabPanel.prototype,"name",2);__decorateClass([n$3({type:Boolean,reflect:!0})],SlTabPanel.prototype,"active",2);__decorateClass([watch("active")],SlTabPanel.prototype,"handleActiveChange",1);SlTabPanel.define("sl-tab-panel");const _hoisted_1$4=["open","draggable"],_hoisted_2$2=createBaseVNode("sl-icon",{name:"plus-square",slot:"expand-icon"},null,-1),_hoisted_3$2=createBaseVNode("sl-icon",{name:"dash-square",slot:"collapse-icon"},null,-1),_hoisted_4$2={slot:"summary"},_hoisted_5$2={content:"Show code snippets",placement:"top"},_hoisted_6$1={style:{display:"flex",alignItems:"center",gap:"9px"}},_hoisted_7$1=createBaseVNode("sl-icon",{name:"markdown",style:{"font-size":"24px"}},null,-1),_hoisted_8$1=createBaseVNode("sl-icon",{name:"code-slash",style:{"font-size":"24px"}},null,-1),_hoisted_9=["innerHTML"],_hoisted_10=createBaseVNode("sl-tab",{slot:"nav",panel:"markdown"},[createBaseVNode("sl-icon",{name:"markdown"}),createTextVNode("Markdown")],-1),_hoisted_11=createBaseVNode("sl-tab",{slot:"nav",panel:"html"},[createBaseVNode("sl-icon",{name:"code-slash"}),createTextVNode("HTML")],-1),_hoisted_12=createBaseVNode("sl-tab",{slot:"nav",panel:"wordpress"},[createBaseVNode("sl-icon",{name:"wordpress"}),createTextVNode("Wordpress")],-1),_hoisted_13=createBaseVNode("sl-tab",{slot:"nav",panel:"preview"},[createBaseVNode("sl-icon",{name:"eye"}),createTextVNode("Rendered")],-1),_hoisted_14={name:"markdown"},_hoisted_15=["draggable"],_hoisted_16={name:"html"},_hoisted_17=["innerHTML","draggable"],_hoisted_18={name:"wordpress"},_hoisted_19=["draggable"],_hoisted_20={name:"preview"},_hoisted_21=["innerHTML","draggable"],_hoisted_22={key:1},_hoisted_23=createBaseVNode("sl-tab",{slot:"nav",panel:"markdown"},[createBaseVNode("sl-icon",{name:"markdown"}),createTextVNode("Markdown")],-1),_hoisted_24=createBaseVNode("sl-tab",{slot:"nav",panel:"html"},[createBaseVNode("sl-icon",{name:"code-slash"}),createTextVNode("HTML")],-1),_hoisted_25=createBaseVNode("sl-tab",{slot:"nav",panel:"wordpress"},[createBaseVNode("sl-icon",{name:"wordpress"}),createTextVNode("Wordpress")],-1),_hoisted_26=createBaseVNode("sl-tab",{slot:"nav",panel:"preview"},[createBaseVNode("sl-icon",{name:"eye"}),createTextVNode("Rendered")],-1),_hoisted_27={name:"markdown"},_hoisted_28=["draggable"],_hoisted_29={name:"html"},_hoisted_30=["innerHTML","draggable"],_hoisted_31={name:"wordpress"},_hoisted_32=["draggable"],_hoisted_33={name:"preview"},_hoisted_34=["innerHTML","draggable"],_sfc_main$6=defineComponent({__name:"Snippet.ce",props:{label:{type:String},tabs:{type:String,default:"markdown,html,wordpress,preview"},collapsible:{type:Boolean,default:!1},open:{type:Boolean,default:!1},prefix:{type:String},path:{type:String},right:{type:Boolean},left:{type:Boolean},width:{type:String},height:{type:String},fill:{type:Boolean},showActive:{type:Boolean},disableDrag:{type:Boolean},src:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Wt;return(Wt=it==null?void 0:it.value)==null?void 0:Wt.parentNode}),bt=computed(()=>{var Wt,Qt;return(Qt=(Wt=it.value)==null?void 0:Wt.getRootNode())==null?void 0:Qt.host}),xt=ref(),Et=ref(),kt=ref(),Lt=ref(),Pt=ref();watch$1(Et,()=>Yt()),onMounted(()=>{rt.src&&fetch(`/${rt.src}?fmt=md`).then(Wt=>Wt.text()).then(Wt=>{xt.value=Wt.replace(/>/g,"&gt;").replace(/</g,"&lt;")})}),watch$1(bt,()=>{rt.tabs?Pt.value=rt.tabs.split(","):Pt.value=["markdown","html","wordpress","preview"];let Qt=bt.value.innerHTML.replace(/<pre v-pre="" data-lang="markup"><code class="lang-markup">/,"").replace(/<\/code><\/pre>/,"").split(`
`),Kt=[];if(Qt.forEach(on=>{(on.trim().length>0||Kt.length>0)&&Kt.push(on)}),Kt.length>0){let on=(Kt[0].match(/(^\s+)/)||[""])[0].length;xt.value=Kt.map(nn=>(nn.match(/(^\s+)/)||[""])[0].length>=on?nn.slice(on):nn).join(`
`)}}),watch$1(Lt,()=>{Lt.value!=="markdown"&&Et.value===void 0&&Ft(),Lt.value==="preview"&&nextTick(()=>{initTippy(st.value,!0)}),rt.fill&&Et.value&&nextTick(()=>Bt()),rt.height&&nextTick(()=>Dt())});function Rt(){var Wt;(Wt=st.value)==null||Wt.querySelectorAll("sl-tab").forEach(Qt=>{new MutationObserver(on=>{var mn;let nn=on[0].target;nn.disabled=!((mn=Pt.value)!=null&&mn.includes(nn.panel)),nn.style.visibility=nn.disabled?"hidden":"visible",nn.active&&(Lt.value=nn.panel)}).observe(Qt,{childList:!0,subtree:!0,attributes:!0})})}watch$1(Pt,()=>Rt());function Dt(){var Qt;let Wt=(Qt=st.value)==null?void 0:Qt.querySelector('sl-tab-panel[name="preview"]');Lt.value==="preview"&&rt.height&&(Wt.style.height=rt.height)}function Bt(){var Qt,Kt;let Wt=(Qt=st.value)==null?void 0:Qt.querySelector('sl-tab-panel[name="preview"]');if(Lt.value==="preview"){let on=(Kt=st.value)==null?void 0:Kt.querySelector("#juncture"),nn=Wt.clientWidth/2,mn=document.createElement("div");mn.style.height=`${nn}px`;let gn=on.querySelector("ve-footer");gn?on.insertBefore(mn,gn):on.appendChild(mn),Wt.style.height=rt.height||`${Math.max(nn/2,500)}px`,Wt.style.overflowY="scroll"}else Wt.style.height=""}function Ft(){Et.value="",fetch("/html/",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:`${rt.path||""}`,markdown:xt.value})}).then(Wt=>Wt.text()).then(Wt=>{let Qt=new DOMParser().parseFromString(Wt,"text/html").children[0].children,Kt=Qt[1].querySelector("main");if(Kt){let on=Qt[1].querySelector("style");on&&Kt.insertBefore(on,Kt.firstChild),Et.value=Kt.innerHTML,Lt.value==="preview"&&nextTick(()=>{var nn;rt.fill&&Bt(),initTippy(st.value,!0),observeActive((nn=st.value)==null?void 0:nn.querySelector("#juncture"))})}})}function Yt(){Et.value&&(kt.value="",fetch("/wxr/",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:`${rt.path||""}`,html:Et.value})}).then(Wt=>Wt.text()).then(Wt=>kt.value=Wt))}function Zt(Wt){var Kt;let Qt=xt.value;Qt&&((Kt=Wt.dataTransfer)==null||Kt.setData("text/plain",Qt))}return(Wt,Qt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[nt.collapsible?(openBlock(),createElementBlock("sl-details",{key:0,class:"custom-icons",open:rt.open,draggable:!rt.disableDrag,onDragstart:Zt},[_hoisted_2$2,_hoisted_3$2,createBaseVNode("div",_hoisted_4$2,[createBaseVNode("sl-tooltip",_hoisted_5$2,[createBaseVNode("div",_hoisted_6$1,[_hoisted_7$1,_hoisted_8$1,createBaseVNode("span",{innerHTML:rt.label,class:"label"},null,8,_hoisted_9)])])]),createBaseVNode("sl-tab-group",null,[_hoisted_10,_hoisted_11,_hoisted_12,_hoisted_13,createBaseVNode("sl-tab-panel",_hoisted_14,[xt.value&&Lt.value==="markdown"?(openBlock(),createElementBlock("ve-source-viewer",{key:0,draggable:!rt.disableDrag},toDisplayString(xt.value),9,_hoisted_15)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_16,[Lt.value==="html"&&Et.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,innerHTML:Et.value,language:"html",draggable:!rt.disableDrag},null,8,_hoisted_17)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-pane",_hoisted_18,[Lt.value==="wordpress"&&kt.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,language:"wxr",draggable:!rt.disableDrag},toDisplayString(kt.value),9,_hoisted_19)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_20,[Lt.value==="preview"&&Et.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Et.value,draggable:!rt.disableDrag,onDragstart:Zt},null,40,_hoisted_21)):createCommentVNode("",!0)])])],40,_hoisted_1$4)):(openBlock(),createElementBlock("sl-tab-group",_hoisted_22,[_hoisted_23,_hoisted_24,_hoisted_25,_hoisted_26,createBaseVNode("sl-tab-panel",_hoisted_27,[xt.value&&Lt.value==="markdown"?(openBlock(),createElementBlock("ve-source-viewer",{key:0,draggable:!rt.disableDrag},toDisplayString(xt.value),9,_hoisted_28)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-pane",_hoisted_29,[Lt.value==="html"&&Et.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,innerHTML:Et.value,language:"html",draggable:!rt.disableDrag},null,8,_hoisted_30)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-pane",_hoisted_31,[Lt.value==="wordpress"&&kt.value?(openBlock(),createElementBlock("ve-source-viewer",{key:0,language:"wxr",draggable:!rt.disableDrag},toDisplayString(kt.value),9,_hoisted_32)):createCommentVNode("",!0)]),createBaseVNode("sl-tab-panel",_hoisted_33,[Lt.value==="preview"&&Et.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Et.value,draggable:!rt.disableDrag,onDragstart:Zt},null,40,_hoisted_34)):createCommentVNode("",!0)])]))],512))}}),_style_1$2=`*{box-sizing:border-box}:host{display:block;margin-top:1.5rem;border-radius:2px;border:.5px solid #ddd;margin-bottom:2rem}:host([collapsible]){border:none}#main{font-family:Roboto,sans-serif;margin-top:0}sl-tab-panel{--padding: 0}sl-tab::part(base){padding:12px}#juncture{padding:12px;font-size:1.2em;line-height:1.3}sl-details::part(header){background-color:#f9f9f9}sl-details::part(summary){font-size:1rem}sl-details::part(content){border-top:1px solid #ddd;padding:0}sl-details.custom-icons::part(summary-icon){rotate:none}sl-tab sl-icon{font-size:24px;margin-right:6px}.label{margin-left:12px;color:#555;font-weight:400}
`,Snippet=_export_sfc(_sfc_main$6,[["styles",[_style_0$o,_style_1$2]]]);var prism$1={exports:{}};(function(nt){var rt=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var it=function(st){var bt=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,xt=0,Et={},kt={manual:st.Prism&&st.Prism.manual,disableWorkerMessageHandler:st.Prism&&st.Prism.disableWorkerMessageHandler,util:{encode:function Kt(on){return on instanceof Lt?new Lt(on.type,Kt(on.content),on.alias):Array.isArray(on)?on.map(Kt):on.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(Kt){return Object.prototype.toString.call(Kt).slice(8,-1)},objId:function(Kt){return Kt.__id||Object.defineProperty(Kt,"__id",{value:++xt}),Kt.__id},clone:function Kt(on,nn){nn=nn||{};var mn,gn;switch(kt.util.type(on)){case"Object":if(gn=kt.util.objId(on),nn[gn])return nn[gn];mn={},nn[gn]=mn;for(var Tn in on)on.hasOwnProperty(Tn)&&(mn[Tn]=Kt(on[Tn],nn));return mn;case"Array":return gn=kt.util.objId(on),nn[gn]?nn[gn]:(mn=[],nn[gn]=mn,on.forEach(function(An,kn){mn[kn]=Kt(An,nn)}),mn);default:return on}},getLanguage:function(Kt){for(;Kt;){var on=bt.exec(Kt.className);if(on)return on[1].toLowerCase();Kt=Kt.parentElement}return"none"},setLanguage:function(Kt,on){Kt.className=Kt.className.replace(RegExp(bt,"gi"),""),Kt.classList.add("language-"+on)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(mn){var Kt=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(mn.stack)||[])[1];if(Kt){var on=document.getElementsByTagName("script");for(var nn in on)if(on[nn].src==Kt)return on[nn]}return null}},isActive:function(Kt,on,nn){for(var mn="no-"+on;Kt;){var gn=Kt.classList;if(gn.contains(on))return!0;if(gn.contains(mn))return!1;Kt=Kt.parentElement}return!!nn}},languages:{plain:Et,plaintext:Et,text:Et,txt:Et,extend:function(Kt,on){var nn=kt.util.clone(kt.languages[Kt]);for(var mn in on)nn[mn]=on[mn];return nn},insertBefore:function(Kt,on,nn,mn){mn=mn||kt.languages;var gn=mn[Kt],Tn={};for(var An in gn)if(gn.hasOwnProperty(An)){if(An==on)for(var kn in nn)nn.hasOwnProperty(kn)&&(Tn[kn]=nn[kn]);nn.hasOwnProperty(An)||(Tn[An]=gn[An])}var Mn=mn[Kt];return mn[Kt]=Tn,kt.languages.DFS(kt.languages,function($n,cn){cn===Mn&&$n!=Kt&&(this[$n]=Tn)}),Tn},DFS:function Kt(on,nn,mn,gn){gn=gn||{};var Tn=kt.util.objId;for(var An in on)if(on.hasOwnProperty(An)){nn.call(on,An,on[An],mn||An);var kn=on[An],Mn=kt.util.type(kn);Mn==="Object"&&!gn[Tn(kn)]?(gn[Tn(kn)]=!0,Kt(kn,nn,null,gn)):Mn==="Array"&&!gn[Tn(kn)]&&(gn[Tn(kn)]=!0,Kt(kn,nn,An,gn))}}},plugins:{},highlightAll:function(Kt,on){kt.highlightAllUnder(document,Kt,on)},highlightAllUnder:function(Kt,on,nn){var mn={callback:nn,container:Kt,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};kt.hooks.run("before-highlightall",mn),mn.elements=Array.prototype.slice.apply(mn.container.querySelectorAll(mn.selector)),kt.hooks.run("before-all-elements-highlight",mn);for(var gn=0,Tn;Tn=mn.elements[gn++];)kt.highlightElement(Tn,on===!0,mn.callback)},highlightElement:function(Kt,on,nn){var mn=kt.util.getLanguage(Kt),gn=kt.languages[mn];kt.util.setLanguage(Kt,mn);var Tn=Kt.parentElement;Tn&&Tn.nodeName.toLowerCase()==="pre"&&kt.util.setLanguage(Tn,mn);var An=Kt.textContent,kn={element:Kt,language:mn,grammar:gn,code:An};function Mn(cn){kn.highlightedCode=cn,kt.hooks.run("before-insert",kn),kn.element.innerHTML=kn.highlightedCode,kt.hooks.run("after-highlight",kn),kt.hooks.run("complete",kn),nn&&nn.call(kn.element)}if(kt.hooks.run("before-sanity-check",kn),Tn=kn.element.parentElement,Tn&&Tn.nodeName.toLowerCase()==="pre"&&!Tn.hasAttribute("tabindex")&&Tn.setAttribute("tabindex","0"),!kn.code){kt.hooks.run("complete",kn),nn&&nn.call(kn.element);return}if(kt.hooks.run("before-highlight",kn),!kn.grammar){Mn(kt.util.encode(kn.code));return}if(on&&st.Worker){var $n=new Worker(kt.filename);$n.onmessage=function(cn){Mn(cn.data)},$n.postMessage(JSON.stringify({language:kn.language,code:kn.code,immediateClose:!0}))}else Mn(kt.highlight(kn.code,kn.grammar,kn.language))},highlight:function(Kt,on,nn){var mn={code:Kt,grammar:on,language:nn};if(kt.hooks.run("before-tokenize",mn),!mn.grammar)throw new Error('The language "'+mn.language+'" has no grammar.');return mn.tokens=kt.tokenize(mn.code,mn.grammar),kt.hooks.run("after-tokenize",mn),Lt.stringify(kt.util.encode(mn.tokens),mn.language)},tokenize:function(Kt,on){var nn=on.rest;if(nn){for(var mn in nn)on[mn]=nn[mn];delete on.rest}var gn=new Dt;return Bt(gn,gn.head,Kt),Rt(Kt,gn,on,gn.head,0),Yt(gn)},hooks:{all:{},add:function(Kt,on){var nn=kt.hooks.all;nn[Kt]=nn[Kt]||[],nn[Kt].push(on)},run:function(Kt,on){var nn=kt.hooks.all[Kt];if(!(!nn||!nn.length))for(var mn=0,gn;gn=nn[mn++];)gn(on)}},Token:Lt};st.Prism=kt;function Lt(Kt,on,nn,mn){this.type=Kt,this.content=on,this.alias=nn,this.length=(mn||"").length|0}Lt.stringify=function Kt(on,nn){if(typeof on=="string")return on;if(Array.isArray(on)){var mn="";return on.forEach(function(Mn){mn+=Kt(Mn,nn)}),mn}var gn={type:on.type,content:Kt(on.content,nn),tag:"span",classes:["token",on.type],attributes:{},language:nn},Tn=on.alias;Tn&&(Array.isArray(Tn)?Array.prototype.push.apply(gn.classes,Tn):gn.classes.push(Tn)),kt.hooks.run("wrap",gn);var An="";for(var kn in gn.attributes)An+=" "+kn+'="'+(gn.attributes[kn]||"").replace(/"/g,"&quot;")+'"';return"<"+gn.tag+' class="'+gn.classes.join(" ")+'"'+An+">"+gn.content+"</"+gn.tag+">"};function Pt(Kt,on,nn,mn){Kt.lastIndex=on;var gn=Kt.exec(nn);if(gn&&mn&&gn[1]){var Tn=gn[1].length;gn.index+=Tn,gn[0]=gn[0].slice(Tn)}return gn}function Rt(Kt,on,nn,mn,gn,Tn){for(var An in nn)if(!(!nn.hasOwnProperty(An)||!nn[An])){var kn=nn[An];kn=Array.isArray(kn)?kn:[kn];for(var Mn=0;Mn<kn.length;++Mn){if(Tn&&Tn.cause==An+","+Mn)return;var $n=kn[Mn],cn=$n.inside,Sn=!!$n.lookbehind,an=!!$n.greedy,jn=$n.alias;if(an&&!$n.pattern.global){var hn=$n.pattern.toString().match(/[imsuy]*$/)[0];$n.pattern=RegExp($n.pattern.source,hn+"g")}for(var zn=$n.pattern||$n,ir=mn.next,tr=gn;ir!==on.tail&&!(Tn&&tr>=Tn.reach);tr+=ir.value.length,ir=ir.next){var nr=ir.value;if(on.length>Kt.length)return;if(!(nr instanceof Lt)){var dr=1,or;if(an){if(or=Pt(zn,tr,Kt,Sn),!or||or.index>=Kt.length)break;var rr=or.index,ur=or.index+or[0].length,Cr=tr;for(Cr+=ir.value.length;rr>=Cr;)ir=ir.next,Cr+=ir.value.length;if(Cr-=ir.value.length,tr=Cr,ir.value instanceof Lt)continue;for(var Sr=ir;Sr!==on.tail&&(Cr<ur||typeof Sr.value=="string");Sr=Sr.next)dr++,Cr+=Sr.value.length;dr--,nr=Kt.slice(tr,Cr),or.index-=tr}else if(or=Pt(zn,0,nr,Sn),!or)continue;var rr=or.index,Fr=or[0],mr=nr.slice(0,rr),_r=nr.slice(rr+Fr.length),yr=tr+nr.length;Tn&&yr>Tn.reach&&(Tn.reach=yr);var pr=ir.prev;mr&&(pr=Bt(on,pr,mr),tr+=mr.length),Ft(on,pr,dr);var Cn=new Lt(An,cn?kt.tokenize(Fr,cn):Fr,jn,Fr);if(ir=Bt(on,pr,Cn),_r&&Bt(on,ir,_r),dr>1){var rn={cause:An+","+Mn,reach:yr};Rt(Kt,on,nn,ir.prev,tr,rn),Tn&&rn.reach>Tn.reach&&(Tn.reach=rn.reach)}}}}}}function Dt(){var Kt={value:null,prev:null,next:null},on={value:null,prev:Kt,next:null};Kt.next=on,this.head=Kt,this.tail=on,this.length=0}function Bt(Kt,on,nn){var mn=on.next,gn={value:nn,prev:on,next:mn};return on.next=gn,mn.prev=gn,Kt.length++,gn}function Ft(Kt,on,nn){for(var mn=on.next,gn=0;gn<nn&&mn!==Kt.tail;gn++)mn=mn.next;on.next=mn,mn.prev=on,Kt.length-=gn}function Yt(Kt){for(var on=[],nn=Kt.head.next;nn!==Kt.tail;)on.push(nn.value),nn=nn.next;return on}if(!st.document)return st.addEventListener&&(kt.disableWorkerMessageHandler||st.addEventListener("message",function(Kt){var on=JSON.parse(Kt.data),nn=on.language,mn=on.code,gn=on.immediateClose;st.postMessage(kt.highlight(mn,kt.languages[nn],nn)),gn&&st.close()},!1)),kt;var Zt=kt.util.currentScript();Zt&&(kt.filename=Zt.src,Zt.hasAttribute("data-manual")&&(kt.manual=!0));function Wt(){kt.manual||kt.highlightAll()}if(!kt.manual){var Qt=document.readyState;Qt==="loading"||Qt==="interactive"&&Zt&&Zt.defer?document.addEventListener("DOMContentLoaded",Wt):window.requestAnimationFrame?window.requestAnimationFrame(Wt):window.setTimeout(Wt,16)}return kt}(rt);nt.exports&&(nt.exports=it),typeof commonjsGlobal$1<"u"&&(commonjsGlobal$1.Prism=it),it.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},it.languages.markup.tag.inside["attr-value"].inside.entity=it.languages.markup.entity,it.languages.markup.doctype.inside["internal-subset"].inside=it.languages.markup,it.hooks.add("wrap",function(st){st.type==="entity"&&(st.attributes.title=st.content.replace(/&amp;/,"&"))}),Object.defineProperty(it.languages.markup.tag,"addInlined",{value:function(bt,xt){var Et={};Et["language-"+xt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:it.languages[xt]},Et.cdata=/^<!\[CDATA\[|\]\]>$/i;var kt={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Et}};kt["language-"+xt]={pattern:/[\s\S]+/,inside:it.languages[xt]};var Lt={};Lt[bt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return bt}),"i"),lookbehind:!0,greedy:!0,inside:kt},it.languages.insertBefore("markup","cdata",Lt)}}),Object.defineProperty(it.languages.markup.tag,"addAttribute",{value:function(st,bt){it.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+st+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[bt,"language-"+bt],inside:it.languages[bt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),it.languages.html=it.languages.markup,it.languages.mathml=it.languages.markup,it.languages.svg=it.languages.markup,it.languages.xml=it.languages.extend("markup",{}),it.languages.ssml=it.languages.xml,it.languages.atom=it.languages.xml,it.languages.rss=it.languages.xml,function(st){var bt=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;st.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+bt.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+bt.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+bt.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+bt.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:bt,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},st.languages.css.atrule.inside.rest=st.languages.css;var xt=st.languages.markup;xt&&(xt.tag.addInlined("style","css"),xt.tag.addAttribute("style","css"))}(it),it.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},it.languages.javascript=it.languages.extend("clike",{"class-name":[it.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),it.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,it.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:it.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:it.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:it.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:it.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:it.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),it.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:it.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),it.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),it.languages.markup&&(it.languages.markup.tag.addInlined("script","javascript"),it.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),it.languages.js=it.languages.javascript,function(){if(typeof it>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var st="Loading\u2026",bt=function(Zt,Wt){return"\u2716 Error "+Zt+" while fetching file: "+Wt},xt="\u2716 Error: File does not exist or is empty",Et={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},kt="data-src-status",Lt="loading",Pt="loaded",Rt="failed",Dt="pre[data-src]:not(["+kt+'="'+Pt+'"]):not(['+kt+'="'+Lt+'"])';function Bt(Zt,Wt,Qt){var Kt=new XMLHttpRequest;Kt.open("GET",Zt,!0),Kt.onreadystatechange=function(){Kt.readyState==4&&(Kt.status<400&&Kt.responseText?Wt(Kt.responseText):Kt.status>=400?Qt(bt(Kt.status,Kt.statusText)):Qt(xt))},Kt.send(null)}function Ft(Zt){var Wt=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(Zt||"");if(Wt){var Qt=Number(Wt[1]),Kt=Wt[2],on=Wt[3];return Kt?on?[Qt,Number(on)]:[Qt,void 0]:[Qt,Qt]}}it.hooks.add("before-highlightall",function(Zt){Zt.selector+=", "+Dt}),it.hooks.add("before-sanity-check",function(Zt){var Wt=Zt.element;if(Wt.matches(Dt)){Zt.code="",Wt.setAttribute(kt,Lt);var Qt=Wt.appendChild(document.createElement("CODE"));Qt.textContent=st;var Kt=Wt.getAttribute("data-src"),on=Zt.language;if(on==="none"){var nn=(/\.(\w+)$/.exec(Kt)||[,"none"])[1];on=Et[nn]||nn}it.util.setLanguage(Qt,on),it.util.setLanguage(Wt,on);var mn=it.plugins.autoloader;mn&&mn.loadLanguages(on),Bt(Kt,function(gn){Wt.setAttribute(kt,Pt);var Tn=Ft(Wt.getAttribute("data-range"));if(Tn){var An=gn.split(/\r\n?|\n/g),kn=Tn[0],Mn=Tn[1]==null?An.length:Tn[1];kn<0&&(kn+=An.length),kn=Math.max(0,Math.min(kn-1,An.length)),Mn<0&&(Mn+=An.length),Mn=Math.max(0,Math.min(Mn,An.length)),gn=An.slice(kn,Mn).join(`
`),Wt.hasAttribute("data-start")||Wt.setAttribute("data-start",String(kn+1))}Qt.textContent=gn,it.highlightElement(Qt)},function(gn){Wt.setAttribute(kt,Rt),Qt.textContent=gn})}}),it.plugins.fileHighlight={highlight:function(Wt){for(var Qt=(Wt||document).querySelectorAll(Dt),Kt=0,on;on=Qt[Kt++];)it.highlightElement(on)}};var Yt=!1;it.fileHighlight=function(){Yt||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),Yt=!0),it.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(prism$1);const Prism$1=prism$1.exports;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(nt){nt.type==="entity"&&(nt.attributes.title=nt.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function nt(rt,it){var st={};st["language-"+it]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[it]},st.cdata=/^<!\[CDATA\[|\]\]>$/i;var bt={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:st}};bt["language-"+it]={pattern:/[\s\S]+/,inside:Prism.languages[it]};var xt={};xt[rt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return rt}),"i"),lookbehind:!0,greedy:!0,inside:bt},Prism.languages.insertBefore("markup","cdata",xt)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(nt,rt){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+nt+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[rt,"language-"+rt],inside:Prism.languages[rt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(nt){var rt=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function it(Rt){return Rt=Rt.replace(/<inner>/g,function(){return rt}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+Rt+")")}var st=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,bt=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return st}),xt=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;nt.languages.markdown=nt.languages.extend("markup",{}),nt.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:nt.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+bt+xt+"(?:"+bt+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+bt+xt+")(?:"+bt+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(st),inside:nt.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+bt+")"+xt+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+bt+"$"),inside:{"table-header":{pattern:RegExp(st),alias:"important",inside:nt.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:it(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:it(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:it(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:it(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(Rt){["url","bold","italic","strike","code-snippet"].forEach(function(Dt){Rt!==Dt&&(nt.languages.markdown[Rt].inside.content.inside[Dt]=nt.languages.markdown[Dt])})}),nt.hooks.add("after-tokenize",function(Rt){if(Rt.language!=="markdown"&&Rt.language!=="md")return;function Dt(Bt){if(!(!Bt||typeof Bt=="string"))for(var Ft=0,Yt=Bt.length;Ft<Yt;Ft++){var Zt=Bt[Ft];if(Zt.type!=="code"){Dt(Zt.content);continue}var Wt=Zt.content[1],Qt=Zt.content[3];if(Wt&&Qt&&Wt.type==="code-language"&&Qt.type==="code-block"&&typeof Wt.content=="string"){var Kt=Wt.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");Kt=(/[a-z][\w-]*/i.exec(Kt)||[""])[0].toLowerCase();var on="language-"+Kt;Qt.alias?typeof Qt.alias=="string"?Qt.alias=[Qt.alias,on]:Qt.alias.push(on):Qt.alias=[on]}}}Dt(Rt.tokens)}),nt.hooks.add("wrap",function(Rt){if(Rt.type==="code-block"){for(var Dt="",Bt=0,Ft=Rt.classes.length;Bt<Ft;Bt++){var Yt=Rt.classes[Bt],Zt=/language-(.+)/.exec(Yt);if(Zt){Dt=Zt[1];break}}var Wt=nt.languages[Dt];if(Wt)Rt.content=nt.highlight(Pt(Rt.content),Wt,Dt);else if(Dt&&Dt!=="none"&&nt.plugins.autoloader){var Qt="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);Rt.attributes.id=Qt,nt.plugins.autoloader.loadLanguages(Dt,function(){var Kt=document.getElementById(Qt);Kt&&(Kt.innerHTML=nt.highlight(Kt.textContent,nt.languages[Dt],Dt))})}}});var Et=RegExp(nt.languages.markup.tag.pattern.source,"gi"),kt={amp:"&",lt:"<",gt:">",quot:'"'},Lt=String.fromCodePoint||String.fromCharCode;function Pt(Rt){var Dt=Rt.replace(Et,"");return Dt=Dt.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(Bt,Ft){if(Ft=Ft.toLowerCase(),Ft[0]==="#"){var Yt;return Ft[1]==="x"?Yt=parseInt(Ft.slice(2),16):Yt=Number(Ft.slice(1)),Lt(Yt)}else{var Zt=kt[Ft];return Zt||Bt}}),Dt}nt.languages.md=nt.languages.markdown})(Prism);(function(nt){function rt(xt,Et){nt.languages[xt]&&nt.languages.insertBefore(xt,"comment",{"doc-comment":Et})}var it=nt.languages.markup.tag,st={pattern:/\/\/\/.*/,greedy:!0,alias:"comment",inside:{tag:it}},bt={pattern:/'''.*/,greedy:!0,alias:"comment",inside:{tag:it}};rt("csharp",st),rt("fsharp",st),rt("vbnet",bt)})(Prism);const prism="",_hoisted_1$3=["draggable"],_hoisted_2$1={key:0,id:"juncture",class:"language-juncture",style:{margin:"0","white-space":"pre-wrap","word-wrap":"break-word"}},_hoisted_3$1=["innerHTML"],_hoisted_4$1={key:1,id:"html",class:"language-markup",style:{margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word"}},_hoisted_5$1={key:2,id:"wxr",class:"language-xml"},_sfc_main$5=defineComponent({__name:"SourceViewer.ce",props:{src:{type:String},language:{type:String,default:"juncture"},draggable:{type:Boolean,default:!0}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Rt,Dt;return(Dt=(Rt=it.value)==null?void 0:Rt.getRootNode())==null?void 0:Dt.host}),bt=computed(()=>{var Rt;return(Rt=it==null?void 0:it.value)==null?void 0:Rt.parentNode}),xt=ref();watch$1(st,()=>{var Dt;let Rt=(Dt=st.value)==null?void 0:Dt.innerHTML.trim();Rt&&(xt.value=rt.language==="html"?kt(Rt):`
${Rt}`)}),watch$1(xt,()=>{var Dt,Bt;xt.value=(Dt=xt.value)==null?void 0:Dt.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");let Rt=(Bt=bt.value)==null?void 0:Bt.querySelector(`#${rt.language}`);Rt&&xt.value&&nextTick(()=>{Prism$1.highlightElement(Rt)})}),onMounted(()=>{rt.src&&fetch(`/${rt.src}?fmt=md`).then(Rt=>Rt.text()).then(Rt=>{Rt=Rt.replace(/>/g,"&gt;").replace(/</g,"&lt;"),xt.value=rt.language==="html"?kt(Rt):`
${Rt}`})}),Prism$1.languages.juncture=Prism$1.languages.extend("markdown",{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+.+/,greedy:!0,inside:{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+/},string:[{pattern:/[^=]\"(\\.|[^\"])*\"/,alias:"attr-value"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],"manifest-url":[{pattern:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,inside:{url:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,punctuation:/\s+/}}],position:[{pattern:/\s+(full|left|right|sticky)/,alias:"boolean"}],"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},marked:[{pattern:/==[^=]+=={[^}]+}/,alias:"class-name"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],reference:[{pattern:/\[\^[^\]]+\]:?\s*/,alias:"class-name"}]});function Et(Rt){for(var Dt="",Bt=Rt*2;Bt--;)Dt+=" ";return Dt}function kt(Rt){Rt=Rt.trim().replace(/&amp;/g,"&");let Dt="",Bt=0,Ft=Rt.split(/</);for(var Yt=0,Zt=Ft.length;Yt<Zt;Yt++){var Wt=Ft[Yt].split(/>/);Wt.length===2?(Ft[Yt][0]==="/"&&Bt--,Dt+=Et(Bt),Ft[Yt][0]!=="/"&&Bt++,Yt>0&&(Dt+="<"),Dt+=Wt[0].trim()+`>
`,Wt[1].trim()!==""&&(Dt+=Et(Bt)+Wt[1].trim().replace(/\s+/g," ")+`
`),Wt[0].match(/^(img|hr|br)/)&&Bt--):Dt+=Et(Bt)+Wt[0]+`
`}return Dt.replace(/\s+<mark([^>]*>)\s+/gm," <mark$1").replace(/\s+<\/mark>\s+/mg,"</mark> ").replace(/<a([^>]*>)\s+/gm," <a$1").replace(/\s+<\/a>/mg,"</a> ").replace(/=""/g,"").replace(/(<ve-[^>]+>)\s(<\/ve-[^>]+>\n)/g,`$1$2
`).replace(/<p>\s+/g,"<p>").replace(/\s+<\/p>\s+/g,`</p>
`).replace(/<ve-/g,`
<ve-`).replace(/ anno-base="undefined\/"/g,"").replace(/^\n\n/g,`
`)}function Lt(){var Rt,Dt;if(navigator.clipboard){let Bt=(((Rt=xt.value)==null?void 0:Rt.trim())||"").replace(/&lt;/g,"<").replace(/&gt;/g,">");navigator.clipboard.writeText(Bt);const Ft=(Dt=bt.value)==null?void 0:Dt.querySelector("sl-tooltip");Ft&&(Ft.open=!0,setTimeout(()=>Ft.open=!1,1e3))}}function Pt(Rt){var Bt;let Dt=xt.value;Dt&&((Bt=Rt.dataTransfer)==null||Bt.setData("text/plain",Dt))}return(Rt,Dt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main",style:{width:"100%",height:"100%"},draggable:rt.draggable,onDragstart:Pt},[nt.language==="juncture"?(openBlock(),createElementBlock("pre",_hoisted_2$1,[createTextVNode("    "),createBaseVNode("code",{innerHTML:xt.value},null,8,_hoisted_3$1),createTextVNode(`
  `)])):createCommentVNode("",!0),nt.language==="html"?(openBlock(),createElementBlock("pre",_hoisted_4$1,[createTextVNode("    "),createBaseVNode("code",null,toDisplayString(xt.value),1)])):createCommentVNode("",!0),nt.language==="wxr"?(openBlock(),createElementBlock("pre",_hoisted_5$1,[createBaseVNode("code",null,toDisplayString(xt.value),1)])):createCommentVNode("",!0),createBaseVNode("sl-tooltip",{content:"Text copied to clipboard",placement:"top",hoist:"",trigger:"manual",style:{"--sl-tooltip-arrow-size":"0"}},[createBaseVNode("sl-button",{class:"copy-button",onClick:Lt},"Copy Text")])],40,_hoisted_1$3))}}),_style_0$2=`code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function,.token.class-name{color:#dd4a68}.token.regex,.token.important,.token.variable{color:#e90}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
`,_style_1$1=`*{box-sizing:border-box}.main{font-size:.8em;position:relative}.main pre{background-color:#f9f9f9;font-size:1rem}.main:hover .copy-button{opacity:1}.copy-button{position:absolute;top:10px;right:10px;opacity:0;transition:all .3s ease-in}.juncture-tag{color:#905}
`,SourceViewer=_export_sfc(_sfc_main$5,[["styles",[_style_0$2,_style_1$1]]]),_sfc_main$4=defineComponent({__name:"Spacer.ce",props:{height:{type:String,default:"50vh"}},setup(nt){const rt=nt;return(it,st)=>(openBlock(),createElementBlock("div",{style:normalizeStyle({height:rt.height})},null,4))}}),_sfc_main$3=defineComponent({__name:"Starter.ce",props:{id:{type:String},numProp:{type:Number,default:0},boolProp:{type:Boolean}},emits:["custom-event"],setup(nt,{expose:rt,emit:it}){const st=nt;rt({increment:Pt});const bt=ref(st.numProp),xt=ref(null),Et=computed(()=>{var Rt;return(Rt=xt==null?void 0:xt.value)==null?void 0:Rt.parentNode}),kt=computed(()=>{var Rt,Dt;return(Dt=(Rt=xt.value)==null?void 0:Rt.getRootNode())==null?void 0:Dt.host});watch$1(kt,()=>Lt()),watch$1(bt,()=>it("custom-event",bt.value));function Lt(){var Rt;console.log(kt.value),console.log((Rt=Et.value)==null?void 0:Rt.querySelector("h1")),setTimeout(()=>Pt(),2e3)}function Pt(){++bt.value}return(Rt,Dt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:xt,class:"main"}," <ve-starter></ve-starter> ",512))}}),_style_0$1=`.main{color:red}
`,Starter=_export_sfc(_sfc_main$3,[["styles",[_style_0$1]]]),_hoisted_1$2=["innerHTML"],_sfc_main$2=defineComponent({__name:"Version.ce",setup(nt){const rt=ref("2.0.0-beta.43");return(it,st)=>(openBlock(),createElementBlock("span",{innerHTML:rt.value},null,8,_hoisted_1$2))}}),_hoisted_1$1={id:"autocompleteContainer",class:"autocomplete__container",role:"combobox"},_hoisted_2=createBaseVNode("svg",{"fill-rule":"evenodd",height:"5",viewBox:"0 0 10 5",width:"10"},[createBaseVNode("title",null,"Open drop down"),createBaseVNode("path",{d:"M10 0L5 5 0 0z"})],-1),_hoisted_3=[_hoisted_2],_hoisted_4={id:"autocompleteResults",class:"autocomplete__results",role:"listbox"},_hoisted_5=["onClick"],_hoisted_6=["innerHTML"],_hoisted_7={key:0,class:"aliases"},_hoisted_8=["innerHTML"],_sfc_main$1=defineComponent({__name:"WikidataSearch.ce",props:{language:{type:String,default:"en"}},emits:["entity-selected"],setup(nt,{emit:rt}){const it=nt,st=ref([]),bt=ref(),xt=ref(),Et=ref(),kt=ref(),Lt=ref(0),Pt=ref(!1),Rt=ref(""),Dt=ref(!1),Bt=ref(null),Ft=computed(()=>{var gn;return(gn=Bt==null?void 0:Bt.value)==null?void 0:gn.parentNode}),Yt=computed(()=>{var gn,Tn;return(Tn=(gn=Bt.value)==null?void 0:gn.getRootNode())==null?void 0:Tn.host});watch$1(Yt,()=>Zt()),watch$1(Pt,gn=>{var Tn,An,kn,Mn,$n,cn,Sn;gn?((Tn=bt.value)==null||Tn.classList.add("visible"),(An=xt.value)==null||An.classList.add("expanded"),(kn=Et.value)==null||kn.setAttribute("aria-expanded","true")):((Mn=bt.value)==null||Mn.classList.remove("visible"),($n=xt.value)==null||$n.classList.remove("expanded"),(cn=Et.value)==null||cn.setAttribute("aria-expanded","false"),(Sn=kt.value)==null||Sn.setAttribute("aria-activedescendant",""))}),watch$1(Rt,()=>{st.value=[],Lt.value=0,nn()});function Zt(){var gn,Tn,An,kn;bt.value=(gn=Ft.value)==null?void 0:gn.querySelector("#autocompleteResults"),kt.value=(Tn=Ft.value)==null?void 0:Tn.querySelector("#autocompleteInput"),xt.value=(An=Ft.value)==null?void 0:An.querySelector("#autocompleteDropdownArrow"),Et.value=(kn=Ft.value)==null?void 0:kn.querySelector("#autocompleteContainer")}function Wt(){kt.value&&(kt.value.value=""),st.value=[],Lt.value=0,Pt.value=!1}let Qt=null;function Kt(){Qt!==null&&(clearTimeout(Qt),Qt=null),Qt=window.setTimeout(()=>{kt.value&&(Rt.value=kt.value.value.trim()),Qt=null},500)}function on(){Pt.value=!Pt.value}function nn(){if(!Rt.value||Dt.value)return;Dt.value=!0;let gn=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${Rt.value}&uselang=${it.language}&language=${it.language}&format=json&origin=*&continue=${Lt.value}`;fetch(gn).then(Tn=>Tn.json()).then(Tn=>{Lt.value=Tn["search-continue"],st.value=[...st.value,...Tn.search],Pt.value=!0}).catch(Tn=>{console.log(Tn)}).finally(()=>Dt.value=!1)}function mn(gn){rt("entity-selected",gn),Wt()}return(gn,Tn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Bt,class:"wikidata-search"},[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("input",{id:"autocompleteInput",class:"autocomplete__input",onKeyup:Kt,autocomplete:"off",role:"textbox",placeholder:"Search for entity"},null,32),createBaseVNode("button",{id:"autocompleteDropdownArrow",class:"autocomplete__dropdown-arrow",style:normalizeStyle({visibility:st.value.length>0?"visible":"hidden"}),onClick:on,"aria-label":"toggle dropdown"},_hoisted_3,4),createBaseVNode("ul",_hoisted_4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(st.value,(An,kn)=>(openBlock(),createElementBlock("li",{key:`result-${kn}`,onClick:Mn=>mn(An)},[createBaseVNode("ul",null,[createBaseVNode("li",null,[createBaseVNode("span",{class:"label",innerHTML:An.label},null,8,_hoisted_6),An.aliases?(openBlock(),createElementBlock("span",_hoisted_7,"({item.aliases.join(', ')})")):createCommentVNode("",!0)]),createBaseVNode("li",{class:"description",innerHTML:An.description},null,8,_hoisted_8)])],8,_hoisted_5))),128)),Lt.value?(openBlock(),createElementBlock("li",{key:0,onClick:nn,class:"continue"},"More...")):createCommentVNode("",!0)])])],512))}}),_style_0=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}.autocomplete__container{display:flex;position:relative;align-items:center;justify-content:flex-end;float:left;width:100%;max-width:500px;height:100%}textarea:focus,input:focus{outline:none}.wikidata-search{display:inline-block;height:calc(1.5em + .75rem + 2px);margin-right:3px;border:1px solid #ccc;border-radius:3px;width:100%;background-color:#fff}.wikidata-search i{padding-left:6px;font-size:1.2rem;color:#333}.autocomplete__results.visible{visibility:visible;min-width:320px}.autocomplete__input{display:block;width:100%;min-width:220px;height:100%;border:none;padding-left:.5rem;border-radius:3px;font-size:1.1rem}.autocomplete__input:focus{border-color:#284fa4}.autocomplete__dropdown-arrow{position:absolute;right:0;top:0;background:transparent;border:none;cursor:pointer;height:100%;transition:transform .2s linear}.autocomplete__dropdown-arrow.expanded{transform:rotate(-180deg)}.autocomplete__results{visibility:hidden;position:absolute;top:100%;margin-top:0;width:100%;overflow-y:auto;border:1px solid #999;padding:0;max-height:400px;background:white;z-index:500}.autocomplete__results>li{list-style:none;padding:.3rem .5rem;cursor:pointer;color:#000}.autocomplete__results ul{list-style-type:none;padding-left:0}.autocomplete__results>li:hover{background:hsl(212,10%,60%)}.autocomplete__results>li:focus{background:hsl(212,10%,70%)}.label{font-weight:700}.aliases{font-style:italic}.description{font-size:.9rem;padding:2px 0}.continue{font-weight:700;background-color:#ddd}.search{display:grid;border-radius:0;background-color:#555;color:#fff;width:100%;align-items:center}
`,WikidataSearch=_export_sfc(_sfc_main$1,[["styles",[_style_0]]]),_hoisted_1=["name"],_sfc_main=defineComponent({__name:"Window.ce",props:{href:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},buttonLabel:{type:String,default:"Open"},buttonIcon:{type:String}},setup(nt){const rt=nt,it=window,st=ref(null);function bt(){rt.width;let xt=rt.height||Math.min(window.innerHeight,1600);it.junctureWindow&&it.junctureWindow.close();let Et=`toolbar=yes,location=yes,left=${rt.left},top=${rt.top},width=${rt.width},height=${xt},scrollbars=yes,status=yes`;it.junctureWindow=window.open(rt.href,"_blank",Et)}return(xt,Et)=>(openBlock(),createElementBlock("sl-button",{ref_key:"root",ref:st,onClick:bt},[rt.buttonIcon?(openBlock(),createElementBlock("sl-icon",{key:0,slot:"prefix",name:rt.buttonIcon},null,8,_hoisted_1)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.buttonLabel),1)],512))}}),_style_1=`:host{display:inline-block}
`,Window=_export_sfc(_sfc_main,[["styles",[_style_0$o,_style_1]]]);setBasePath("https://raw.githubusercontent.com//juncture-digital/web-components/main/src");console.log("juncture.web-components: version=2.0.0-beta.43");function init(){customElements.define("ve-add-media-resource-dialog",defineCustomElement(AddMediaResourceDialog)),customElements.define("ve-auth",defineCustomElement(Auth)),customElements.define("ve-button",defineCustomElement(Button)),customElements.define("ve-contact",defineCustomElement(Contact)),customElements.define("ve-content-selector",defineCustomElement(ContentSelector)),customElements.define("ve-entities",defineCustomElement(Entities)),customElements.define("ve-entity-card",defineCustomElement(EntityCard)),customElements.define("ve-essay",defineCustomElement(Essay)),customElements.define("ve-fab",defineCustomElement(FAB)),customElements.define("ve-footer",defineCustomElement(Footer)),customElements.define("ve-header",defineCustomElement(Header)),customElements.define("ve-gif",defineCustomElement(GIF)),customElements.define("ve-hero",defineCustomElement(Hero)),customElements.define("ve-iframe",defineCustomElement(IFrame)),customElements.define("ve-info-card",defineCustomElement(InfoCard)),customElements.define("ve-manifest",defineCustomElement(Manifest)),customElements.define("ve-manifest-popup",defineCustomElement(ManifestPopup)),customElements.define("ve-map",defineCustomElement(Map$3)),customElements.define("ve-media",defineCustomElement(MediaViewer)),customElements.define("ve-media-card",defineCustomElement(MediaCard)),customElements.define("ve-media-selector",defineCustomElement(MediaSelector)),customElements.define("ve-menu",defineCustomElement(Menu)),customElements.define("ve-mermaid",defineCustomElement(Mermaid)),customElements.define("ve-modal",defineCustomElement(Modal)),customElements.define("ve-navbar",defineCustomElement(Navbar)),customElements.define("ve-pager",defineCustomElement(Pager)),customElements.define("ve-plant-specimen",defineCustomElement(_sfc_main$8)),customElements.define("ve-snippet",defineCustomElement(Snippet)),customElements.define("ve-source-viewer",defineCustomElement(SourceViewer)),customElements.define("ve-site-search",defineCustomElement(SiteSearch)),customElements.define("ve-spacer",defineCustomElement(_sfc_main$4)),customElements.define("ve-starter",defineCustomElement(Starter)),customElements.define("ve-version",defineCustomElement(_sfc_main$2)),customElements.define("ve-wikidata-search",defineCustomElement(WikidataSearch)),customElements.define("ve-window",defineCustomElement(Window)),document.body.style.transition="opacity 0.3s linear",document.body.style.visibility="visible",document.body.style.opacity="1"}init();export{Color$1 as C,_,getConfig$1 as a,setupGraphViewbox$1 as b,commonjsGlobal$1 as c,db as d,getStylesFromArray as e,evaluate as f,getDefaultExportFromCjs as g,addHtmlLabel$1 as h,insertMarkers$3 as i,common$1 as j,insertNode as k,log$1 as l,interpolateToCurve as m,curveLinear as n,insertEdgeLabel as o,parser$8 as p,line$1 as q,commonDb$1 as r,select as s,parseDirective$c as t,clear$g as u,lighten$1 as v,darken$1 as w,arc as x,sanitizeText$5 as y};

var Cw=Object.defineProperty;var Tw=(nt,rt,it)=>rt in nt?Cw(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it;var lc=(nt,rt,it)=>(Tw(nt,typeof rt!="symbol"?rt+"":rt,it),it);(function(){const rt=document.createElement("link").relList;if(rt&&rt.supports&&rt.supports("modulepreload"))return;for(const _t of document.querySelectorAll('link[rel="modulepreload"]'))st(_t);new MutationObserver(_t=>{for(const xt of _t)if(xt.type==="childList")for(const Et of xt.addedNodes)Et.tagName==="LINK"&&Et.rel==="modulepreload"&&st(Et)}).observe(document,{childList:!0,subtree:!0});function it(_t){const xt={};return _t.integrity&&(xt.integrity=_t.integrity),_t.referrerpolicy&&(xt.referrerPolicy=_t.referrerpolicy),_t.crossorigin==="use-credentials"?xt.credentials="include":_t.crossorigin==="anonymous"?xt.credentials="omit":xt.credentials="same-origin",xt}function st(_t){if(_t.ep)return;_t.ep=!0;const xt=it(_t);fetch(_t.href,xt)}})();const style="";/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(nt){const rt=Object.create(null);for(const it of nt.split(","))rt[it]=1;return it=>it in rt}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=nt=>nt.charCodeAt(0)===111&&nt.charCodeAt(1)===110&&(nt.charCodeAt(2)>122||nt.charCodeAt(2)<97),isModelListener=nt=>nt.startsWith("onUpdate:"),extend$3=Object.assign,remove$1=(nt,rt)=>{const it=nt.indexOf(rt);it>-1&&nt.splice(it,1)},hasOwnProperty$i=Object.prototype.hasOwnProperty,hasOwn=(nt,rt)=>hasOwnProperty$i.call(nt,rt),isArray$2=Array.isArray,isMap$2=nt=>toTypeString(nt)==="[object Map]",isSet$2=nt=>toTypeString(nt)==="[object Set]",isFunction$1=nt=>typeof nt=="function",isString=nt=>typeof nt=="string",isSymbol$1=nt=>typeof nt=="symbol",isObject$3=nt=>nt!==null&&typeof nt=="object",isPromise=nt=>(isObject$3(nt)||isFunction$1(nt))&&isFunction$1(nt.then)&&isFunction$1(nt.catch),objectToString$1=Object.prototype.toString,toTypeString=nt=>objectToString$1.call(nt),toRawType=nt=>toTypeString(nt).slice(8,-1),isPlainObject$1=nt=>toTypeString(nt)==="[object Object]",isIntegerKey=nt=>isString(nt)&&nt!=="NaN"&&nt[0]!=="-"&&""+parseInt(nt,10)===nt,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=nt=>{const rt=Object.create(null);return it=>rt[it]||(rt[it]=nt(it))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(nt=>nt.replace(camelizeRE,(rt,it)=>it?it.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(nt=>nt.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(nt=>nt.charAt(0).toUpperCase()+nt.slice(1)),toHandlerKey=cacheStringFunction(nt=>nt?`on${capitalize(nt)}`:""),hasChanged=(nt,rt)=>!Object.is(nt,rt),invokeArrayFns=(nt,...rt)=>{for(let it=0;it<nt.length;it++)nt[it](...rt)},def=(nt,rt,it,st=!1)=>{Object.defineProperty(nt,rt,{configurable:!0,enumerable:!1,writable:st,value:it})},looseToNumber=nt=>{const rt=parseFloat(nt);return isNaN(rt)?nt:rt},toNumber$1=nt=>{const rt=isString(nt)?Number(nt):NaN;return isNaN(rt)?nt:rt};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++){const st=nt[it],_t=isString(st)?parseStringStyle(st):normalizeStyle(st);if(_t)for(const xt in _t)rt[xt]=_t[xt]}return rt}else if(isString(nt)||isObject$3(nt))return nt}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(nt){const rt={};return nt.replace(styleCommentRE,"").split(listDelimiterRE).forEach(it=>{if(it){const st=it.split(propertyDelimiterRE);st.length>1&&(rt[st[0].trim()]=st[1].trim())}}),rt}function normalizeClass(nt){let rt="";if(isString(nt))rt=nt;else if(isArray$2(nt))for(let it=0;it<nt.length;it++){const st=normalizeClass(nt[it]);st&&(rt+=st+" ")}else if(isObject$3(nt))for(const it in nt)nt[it]&&(rt+=it+" ");return rt.trim()}function normalizeProps(nt){if(!nt)return null;let{class:rt,style:it}=nt;return rt&&!isString(rt)&&(nt.class=normalizeClass(rt)),it&&(nt.style=normalizeStyle(it)),nt}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(nt){return!!nt||nt===""}const isRef$1=nt=>!!(nt&&nt.__v_isRef===!0),toDisplayString=nt=>isString(nt)?nt:nt==null?"":isArray$2(nt)||isObject$3(nt)&&(nt.toString===objectToString$1||!isFunction$1(nt.toString))?isRef$1(nt)?toDisplayString(nt.value):JSON.stringify(nt,replacer,2):String(nt),replacer=(nt,rt)=>isRef$1(rt)?replacer(nt,rt.value):isMap$2(rt)?{[`Map(${rt.size})`]:[...rt.entries()].reduce((it,[st,_t],xt)=>(it[stringifySymbol(st,xt)+" =>"]=_t,it),{})}:isSet$2(rt)?{[`Set(${rt.size})`]:[...rt.values()].map(it=>stringifySymbol(it))}:isSymbol$1(rt)?stringifySymbol(rt):isObject$3(rt)&&!isArray$2(rt)&&!isPlainObject$1(rt)?String(rt):rt,stringifySymbol=(nt,rt="")=>{var it;return isSymbol$1(nt)?`Symbol(${(it=nt.description)!=null?it:rt})`:nt};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(rt=!1){this.detached=rt,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!rt&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let rt,it;if(this.scopes)for(rt=0,it=this.scopes.length;rt<it;rt++)this.scopes[rt].pause();for(rt=0,it=this.effects.length;rt<it;rt++)this.effects[rt].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let rt,it;if(this.scopes)for(rt=0,it=this.scopes.length;rt<it;rt++)this.scopes[rt].resume();for(rt=0,it=this.effects.length;rt<it;rt++)this.effects[rt].resume()}}run(rt){if(this._active){const it=activeEffectScope;try{return activeEffectScope=this,rt()}finally{activeEffectScope=it}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(rt){if(this._active){this._active=!1;let it,st;for(it=0,st=this.effects.length;it<st;it++)this.effects[it].stop();for(this.effects.length=0,it=0,st=this.cleanups.length;it<st;it++)this.cleanups[it]();if(this.cleanups.length=0,this.scopes){for(it=0,st=this.scopes.length;it<st;it++)this.scopes[it].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!rt){const _t=this.parent.scopes.pop();_t&&_t!==this&&(this.parent.scopes[this.index]=_t,_t.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(rt){this.fn=rt,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const rt=activeSub,it=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=rt,shouldTrack=it,this.flags&=-3}}stop(){if(this.flags&1){for(let rt=this.deps;rt;rt=rt.nextDep)removeSub(rt);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(nt,rt=!1){if(nt.flags|=8,rt){nt.next=batchedComputed,batchedComputed=nt;return}nt.next=batchedSub,batchedSub=nt}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let rt=batchedComputed;for(batchedComputed=void 0;rt;){const it=rt.next;rt.next=void 0,rt.flags&=-9,rt=it}}let nt;for(;batchedSub;){let rt=batchedSub;for(batchedSub=void 0;rt;){const it=rt.next;if(rt.next=void 0,rt.flags&=-9,rt.flags&1)try{rt.trigger()}catch(st){nt||(nt=st)}rt=it}}if(nt)throw nt}function prepareDeps(nt){for(let rt=nt.deps;rt;rt=rt.nextDep)rt.version=-1,rt.prevActiveLink=rt.dep.activeLink,rt.dep.activeLink=rt}function cleanupDeps(nt){let rt,it=nt.depsTail,st=it;for(;st;){const _t=st.prevDep;st.version===-1?(st===it&&(it=_t),removeSub(st),removeDep(st)):rt=st,st.dep.activeLink=st.prevActiveLink,st.prevActiveLink=void 0,st=_t}nt.deps=rt,nt.depsTail=it}function isDirty(nt){for(let rt=nt.deps;rt;rt=rt.nextDep)if(rt.dep.version!==rt.version||rt.dep.computed&&(refreshComputed(rt.dep.computed)||rt.dep.version!==rt.version))return!0;return!!nt._dirty}function refreshComputed(nt){if(nt.flags&4&&!(nt.flags&16)||(nt.flags&=-17,nt.globalVersion===globalVersion)||(nt.globalVersion=globalVersion,!nt.isSSR&&nt.flags&128&&(!nt.deps&&!nt._dirty||!isDirty(nt))))return;nt.flags|=2;const rt=nt.dep,it=activeSub,st=shouldTrack;activeSub=nt,shouldTrack=!0;try{prepareDeps(nt);const _t=nt.fn(nt._value);(rt.version===0||hasChanged(_t,nt._value))&&(nt.flags|=128,nt._value=_t,rt.version++)}catch(_t){throw rt.version++,_t}finally{activeSub=it,shouldTrack=st,cleanupDeps(nt),nt.flags&=-3}}function removeSub(nt,rt=!1){const{dep:it,prevSub:st,nextSub:_t}=nt;if(st&&(st.nextSub=_t,nt.prevSub=void 0),_t&&(_t.prevSub=st,nt.nextSub=void 0),it.subs===nt&&(it.subs=st,!st&&it.computed)){it.computed.flags&=-5;for(let xt=it.computed.deps;xt;xt=xt.nextDep)removeSub(xt,!0)}!rt&&!--it.sc&&it.map&&it.map.delete(it.key)}function removeDep(nt){const{prevDep:rt,nextDep:it}=nt;rt&&(rt.nextDep=it,nt.prevDep=void 0),it&&(it.prevDep=rt,nt.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const nt=trackStack.pop();shouldTrack=nt===void 0?!0:nt}function cleanupEffect(nt){const{cleanup:rt}=nt;if(nt.cleanup=void 0,rt){const it=activeSub;activeSub=void 0;try{rt()}finally{activeSub=it}}}let globalVersion=0;class Link{constructor(rt,it){this.sub=rt,this.dep=it,this.version=it.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(rt){this.computed=rt,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(rt){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let it=this.activeLink;if(it===void 0||it.sub!==activeSub)it=this.activeLink=new Link(activeSub,this),activeSub.deps?(it.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=it,activeSub.depsTail=it):activeSub.deps=activeSub.depsTail=it,addSub(it);else if(it.version===-1&&(it.version=this.version,it.nextDep)){const st=it.nextDep;st.prevDep=it.prevDep,it.prevDep&&(it.prevDep.nextDep=st),it.prevDep=activeSub.depsTail,it.nextDep=void 0,activeSub.depsTail.nextDep=it,activeSub.depsTail=it,activeSub.deps===it&&(activeSub.deps=st)}return it}trigger(rt){this.version++,globalVersion++,this.notify(rt)}notify(rt){startBatch();try{for(let it=this.subs;it;it=it.prevSub)it.sub.notify()&&it.sub.dep.notify()}finally{endBatch()}}}function addSub(nt){if(nt.dep.sc++,nt.sub.flags&4){const rt=nt.dep.computed;if(rt&&!nt.dep.subs){rt.flags|=20;for(let st=rt.deps;st;st=st.nextDep)addSub(st)}const it=nt.dep.subs;it!==nt&&(nt.prevSub=it,it&&(it.nextSub=nt)),nt.dep.subs=nt}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(nt,rt,it){if(shouldTrack&&activeSub){let st=targetMap.get(nt);st||targetMap.set(nt,st=new Map);let _t=st.get(it);_t||(st.set(it,_t=new Dep),_t.map=st,_t.key=it),_t.track()}}function trigger(nt,rt,it,st,_t,xt){const Et=targetMap.get(nt);if(!Et){globalVersion++;return}const kt=Lt=>{Lt&&Lt.trigger()};if(startBatch(),rt==="clear")Et.forEach(kt);else{const Lt=isArray$2(nt),It=Lt&&isIntegerKey(it);if(Lt&&it==="length"){const Rt=Number(st);Et.forEach((Nt,Bt)=>{(Bt==="length"||Bt===ARRAY_ITERATE_KEY||!isSymbol$1(Bt)&&Bt>=Rt)&&kt(Nt)})}else switch((it!==void 0||Et.has(void 0))&&kt(Et.get(it)),It&&kt(Et.get(ARRAY_ITERATE_KEY)),rt){case"add":Lt?It&&kt(Et.get("length")):(kt(Et.get(ITERATE_KEY)),isMap$2(nt)&&kt(Et.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Lt||(kt(Et.get(ITERATE_KEY)),isMap$2(nt)&&kt(Et.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(nt)&&kt(Et.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(nt){const rt=toRaw(nt);return rt===nt?rt:(track(rt,"iterate",ARRAY_ITERATE_KEY),isShallow(nt)?rt:rt.map(toReactive))}function shallowReadArray(nt){return track(nt=toRaw(nt),"iterate",ARRAY_ITERATE_KEY),nt}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator$1(this,Symbol.iterator,toReactive)},concat(...nt){return reactiveReadArray(this).concat(...nt.map(rt=>isArray$2(rt)?reactiveReadArray(rt):rt))},entries(){return iterator$1(this,"entries",nt=>(nt[1]=toReactive(nt[1]),nt))},every(nt,rt){return apply$3(this,"every",nt,rt,void 0,arguments)},filter(nt,rt){return apply$3(this,"filter",nt,rt,it=>it.map(toReactive),arguments)},find(nt,rt){return apply$3(this,"find",nt,rt,toReactive,arguments)},findIndex(nt,rt){return apply$3(this,"findIndex",nt,rt,void 0,arguments)},findLast(nt,rt){return apply$3(this,"findLast",nt,rt,toReactive,arguments)},findLastIndex(nt,rt){return apply$3(this,"findLastIndex",nt,rt,void 0,arguments)},forEach(nt,rt){return apply$3(this,"forEach",nt,rt,void 0,arguments)},includes(...nt){return searchProxy(this,"includes",nt)},indexOf(...nt){return searchProxy(this,"indexOf",nt)},join(nt){return reactiveReadArray(this).join(nt)},lastIndexOf(...nt){return searchProxy(this,"lastIndexOf",nt)},map(nt,rt){return apply$3(this,"map",nt,rt,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...nt){return noTracking(this,"push",nt)},reduce(nt,...rt){return reduce$1(this,"reduce",nt,rt)},reduceRight(nt,...rt){return reduce$1(this,"reduceRight",nt,rt)},shift(){return noTracking(this,"shift")},some(nt,rt){return apply$3(this,"some",nt,rt,void 0,arguments)},splice(...nt){return noTracking(this,"splice",nt)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(nt){return reactiveReadArray(this).toSorted(nt)},toSpliced(...nt){return reactiveReadArray(this).toSpliced(...nt)},unshift(...nt){return noTracking(this,"unshift",nt)},values(){return iterator$1(this,"values",toReactive)}};function iterator$1(nt,rt,it){const st=shallowReadArray(nt),_t=st[rt]();return st!==nt&&!isShallow(nt)&&(_t._next=_t.next,_t.next=()=>{const xt=_t._next();return xt.value&&(xt.value=it(xt.value)),xt}),_t}const arrayProto$1=Array.prototype;function apply$3(nt,rt,it,st,_t,xt){const Et=shallowReadArray(nt),kt=Et!==nt&&!isShallow(nt),Lt=Et[rt];if(Lt!==arrayProto$1[rt]){const Nt=Lt.apply(nt,xt);return kt?toReactive(Nt):Nt}let It=it;Et!==nt&&(kt?It=function(Nt,Bt){return it.call(this,toReactive(Nt),Bt,nt)}:it.length>2&&(It=function(Nt,Bt){return it.call(this,Nt,Bt,nt)}));const Rt=Lt.call(Et,It,st);return kt&&_t?_t(Rt):Rt}function reduce$1(nt,rt,it,st){const _t=shallowReadArray(nt);let xt=it;return _t!==nt&&(isShallow(nt)?it.length>3&&(xt=function(Et,kt,Lt){return it.call(this,Et,kt,Lt,nt)}):xt=function(Et,kt,Lt){return it.call(this,Et,toReactive(kt),Lt,nt)}),_t[rt](xt,...st)}function searchProxy(nt,rt,it){const st=toRaw(nt);track(st,"iterate",ARRAY_ITERATE_KEY);const _t=st[rt](...it);return(_t===-1||_t===!1)&&isProxy(it[0])?(it[0]=toRaw(it[0]),st[rt](...it)):_t}function noTracking(nt,rt,it=[]){pauseTracking(),startBatch();const st=toRaw(nt)[rt].apply(nt,it);return endBatch(),resetTracking(),st}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(nt=>nt!=="arguments"&&nt!=="caller").map(nt=>Symbol[nt]).filter(isSymbol$1));function hasOwnProperty$h(nt){isSymbol$1(nt)||(nt=String(nt));const rt=toRaw(this);return track(rt,"has",nt),rt.hasOwnProperty(nt)}class BaseReactiveHandler{constructor(rt=!1,it=!1){this._isReadonly=rt,this._isShallow=it}get(rt,it,st){if(it==="__v_skip")return rt.__v_skip;const _t=this._isReadonly,xt=this._isShallow;if(it==="__v_isReactive")return!_t;if(it==="__v_isReadonly")return _t;if(it==="__v_isShallow")return xt;if(it==="__v_raw")return st===(_t?xt?shallowReadonlyMap:readonlyMap:xt?shallowReactiveMap:reactiveMap).get(rt)||Object.getPrototypeOf(rt)===Object.getPrototypeOf(st)?rt:void 0;const Et=isArray$2(rt);if(!_t){let Lt;if(Et&&(Lt=arrayInstrumentations[it]))return Lt;if(it==="hasOwnProperty")return hasOwnProperty$h}const kt=Reflect.get(rt,it,isRef(rt)?rt:st);return(isSymbol$1(it)?builtInSymbols.has(it):isNonTrackableKeys(it))||(_t||track(rt,"get",it),xt)?kt:isRef(kt)?Et&&isIntegerKey(it)?kt:kt.value:isObject$3(kt)?_t?readonly(kt):reactive(kt):kt}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(rt=!1){super(!1,rt)}set(rt,it,st,_t){let xt=rt[it];if(!this._isShallow){const Lt=isReadonly(xt);if(!isShallow(st)&&!isReadonly(st)&&(xt=toRaw(xt),st=toRaw(st)),!isArray$2(rt)&&isRef(xt)&&!isRef(st))return Lt?!1:(xt.value=st,!0)}const Et=isArray$2(rt)&&isIntegerKey(it)?Number(it)<rt.length:hasOwn(rt,it),kt=Reflect.set(rt,it,st,isRef(rt)?rt:_t);return rt===toRaw(_t)&&(Et?hasChanged(st,xt)&&trigger(rt,"set",it,st):trigger(rt,"add",it,st)),kt}deleteProperty(rt,it){const st=hasOwn(rt,it);rt[it];const _t=Reflect.deleteProperty(rt,it);return _t&&st&&trigger(rt,"delete",it,void 0),_t}has(rt,it){const st=Reflect.has(rt,it);return(!isSymbol$1(it)||!builtInSymbols.has(it))&&track(rt,"has",it),st}ownKeys(rt){return track(rt,"iterate",isArray$2(rt)?"length":ITERATE_KEY),Reflect.ownKeys(rt)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(rt=!1){super(!0,rt)}set(rt,it){return!0}deleteProperty(rt,it){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=nt=>nt,getProto=nt=>Reflect.getPrototypeOf(nt);function createIterableMethod(nt,rt,it){return function(...st){const _t=this.__v_raw,xt=toRaw(_t),Et=isMap$2(xt),kt=nt==="entries"||nt===Symbol.iterator&&Et,Lt=nt==="keys"&&Et,It=_t[nt](...st),Rt=it?toShallow:rt?toReadonly:toReactive;return!rt&&track(xt,"iterate",Lt?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Nt,done:Bt}=It.next();return Bt?{value:Nt,done:Bt}:{value:kt?[Rt(Nt[0]),Rt(Nt[1])]:Rt(Nt),done:Bt}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(nt){return function(...rt){return nt==="delete"?!1:nt==="clear"?void 0:this}}function createInstrumentations(nt,rt){const it={get(_t){const xt=this.__v_raw,Et=toRaw(xt),kt=toRaw(_t);nt||(hasChanged(_t,kt)&&track(Et,"get",_t),track(Et,"get",kt));const{has:Lt}=getProto(Et),It=rt?toShallow:nt?toReadonly:toReactive;if(Lt.call(Et,_t))return It(xt.get(_t));if(Lt.call(Et,kt))return It(xt.get(kt));xt!==Et&&xt.get(_t)},get size(){const _t=this.__v_raw;return!nt&&track(toRaw(_t),"iterate",ITERATE_KEY),Reflect.get(_t,"size",_t)},has(_t){const xt=this.__v_raw,Et=toRaw(xt),kt=toRaw(_t);return nt||(hasChanged(_t,kt)&&track(Et,"has",_t),track(Et,"has",kt)),_t===kt?xt.has(_t):xt.has(_t)||xt.has(kt)},forEach(_t,xt){const Et=this,kt=Et.__v_raw,Lt=toRaw(kt),It=rt?toShallow:nt?toReadonly:toReactive;return!nt&&track(Lt,"iterate",ITERATE_KEY),kt.forEach((Rt,Nt)=>_t.call(xt,It(Rt),It(Nt),Et))}};return extend$3(it,nt?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(_t){!rt&&!isShallow(_t)&&!isReadonly(_t)&&(_t=toRaw(_t));const xt=toRaw(this);return getProto(xt).has.call(xt,_t)||(xt.add(_t),trigger(xt,"add",_t,_t)),this},set(_t,xt){!rt&&!isShallow(xt)&&!isReadonly(xt)&&(xt=toRaw(xt));const Et=toRaw(this),{has:kt,get:Lt}=getProto(Et);let It=kt.call(Et,_t);It||(_t=toRaw(_t),It=kt.call(Et,_t));const Rt=Lt.call(Et,_t);return Et.set(_t,xt),It?hasChanged(xt,Rt)&&trigger(Et,"set",_t,xt):trigger(Et,"add",_t,xt),this},delete(_t){const xt=toRaw(this),{has:Et,get:kt}=getProto(xt);let Lt=Et.call(xt,_t);Lt||(_t=toRaw(_t),Lt=Et.call(xt,_t)),kt&&kt.call(xt,_t);const It=xt.delete(_t);return Lt&&trigger(xt,"delete",_t,void 0),It},clear(){const _t=toRaw(this),xt=_t.size!==0,Et=_t.clear();return xt&&trigger(_t,"clear",void 0,void 0),Et}}),["keys","values","entries",Symbol.iterator].forEach(_t=>{it[_t]=createIterableMethod(_t,nt,rt)}),it}function createInstrumentationGetter(nt,rt){const it=createInstrumentations(nt,rt);return(st,_t,xt)=>_t==="__v_isReactive"?!nt:_t==="__v_isReadonly"?nt:_t==="__v_raw"?st:Reflect.get(hasOwn(it,_t)&&_t in st?it:st,_t,xt)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(nt){switch(nt){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(nt){return nt.__v_skip||!Object.isExtensible(nt)?0:targetTypeMap(toRawType(nt))}function reactive(nt){return isReadonly(nt)?nt:createReactiveObject(nt,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(nt){return createReactiveObject(nt,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(nt){return createReactiveObject(nt,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(nt){return createReactiveObject(nt,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(nt,rt,it,st,_t){if(!isObject$3(nt)||nt.__v_raw&&!(rt&&nt.__v_isReactive))return nt;const xt=getTargetType(nt);if(xt===0)return nt;const Et=_t.get(nt);if(Et)return Et;const kt=new Proxy(nt,xt===2?st:it);return _t.set(nt,kt),kt}function isReactive(nt){return isReadonly(nt)?isReactive(nt.__v_raw):!!(nt&&nt.__v_isReactive)}function isReadonly(nt){return!!(nt&&nt.__v_isReadonly)}function isShallow(nt){return!!(nt&&nt.__v_isShallow)}function isProxy(nt){return nt?!!nt.__v_raw:!1}function toRaw(nt){const rt=nt&&nt.__v_raw;return rt?toRaw(rt):nt}function markRaw(nt){return!hasOwn(nt,"__v_skip")&&Object.isExtensible(nt)&&def(nt,"__v_skip",!0),nt}const toReactive=nt=>isObject$3(nt)?reactive(nt):nt,toReadonly=nt=>isObject$3(nt)?readonly(nt):nt;function isRef(nt){return nt?nt.__v_isRef===!0:!1}function ref(nt){return createRef(nt,!1)}function createRef(nt,rt){return isRef(nt)?nt:new RefImpl(nt,rt)}class RefImpl{constructor(rt,it){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=it?rt:toRaw(rt),this._value=it?rt:toReactive(rt),this.__v_isShallow=it}get value(){return this.dep.track(),this._value}set value(rt){const it=this._rawValue,st=this.__v_isShallow||isShallow(rt)||isReadonly(rt);rt=st?rt:toRaw(rt),hasChanged(rt,it)&&(this._rawValue=rt,this._value=st?rt:toReactive(rt),this.dep.trigger())}}function unref(nt){return isRef(nt)?nt.value:nt}const shallowUnwrapHandlers={get:(nt,rt,it)=>rt==="__v_raw"?nt:unref(Reflect.get(nt,rt,it)),set:(nt,rt,it,st)=>{const _t=nt[rt];return isRef(_t)&&!isRef(it)?(_t.value=it,!0):Reflect.set(nt,rt,it,st)}};function proxyRefs(nt){return isReactive(nt)?nt:new Proxy(nt,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(rt,it,st){this.fn=rt,this.setter=it,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!it,this.isSSR=st}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const rt=this.dep.track();return refreshComputed(this),rt&&(rt.version=this.dep.version),this._value}set value(rt){this.setter&&this.setter(rt)}}function computed$1(nt,rt,it=!1){let st,_t;return isFunction$1(nt)?st=nt:(st=nt.get,_t=nt.set),new ComputedRefImpl(st,_t,it)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(nt,rt=!1,it=activeWatcher){if(it){let st=cleanupMap.get(it);st||cleanupMap.set(it,st=[]),st.push(nt)}}function watch$2(nt,rt,it=EMPTY_OBJ){const{immediate:st,deep:_t,once:xt,scheduler:Et,augmentJob:kt,call:Lt}=it,It=rn=>_t?rn:isShallow(rn)||_t===!1||_t===0?traverse(rn,1):traverse(rn);let Rt,Nt,Bt,Ft,Yt=!1,Zt=!1;if(isRef(nt)?(Nt=()=>nt.value,Yt=isShallow(nt)):isReactive(nt)?(Nt=()=>It(nt),Yt=!0):isArray$2(nt)?(Zt=!0,Yt=nt.some(rn=>isReactive(rn)||isShallow(rn)),Nt=()=>nt.map(rn=>{if(isRef(rn))return rn.value;if(isReactive(rn))return It(rn);if(isFunction$1(rn))return Lt?Lt(rn,2):rn()})):isFunction$1(nt)?rt?Nt=Lt?()=>Lt(nt,2):nt:Nt=()=>{if(Bt){pauseTracking();try{Bt()}finally{resetTracking()}}const rn=activeWatcher;activeWatcher=Rt;try{return Lt?Lt(nt,3,[Ft]):nt(Ft)}finally{activeWatcher=rn}}:Nt=NOOP,rt&&_t){const rn=Nt,ln=_t===!0?1/0:_t;Nt=()=>traverse(rn(),ln)}const Wt=getCurrentScope(),Kt=()=>{Rt.stop(),Wt&&Wt.active&&remove$1(Wt.effects,Rt)};if(xt&&rt){const rn=rt;rt=(...ln)=>{rn(...ln),Kt()}}let Jt=Zt?new Array(nt.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const on=rn=>{if(!(!(Rt.flags&1)||!Rt.dirty&&!rn))if(rt){const ln=Rt.run();if(_t||Yt||(Zt?ln.some((gn,wn)=>hasChanged(gn,Jt[wn])):hasChanged(ln,Jt))){Bt&&Bt();const gn=activeWatcher;activeWatcher=Rt;try{const wn=[ln,Jt===INITIAL_WATCHER_VALUE?void 0:Zt&&Jt[0]===INITIAL_WATCHER_VALUE?[]:Jt,Ft];Lt?Lt(rt,3,wn):rt(...wn),Jt=ln}finally{activeWatcher=gn}}}else Rt.run()};return kt&&kt(on),Rt=new ReactiveEffect(Nt),Rt.scheduler=Et?()=>Et(on,!1):on,Ft=rn=>onWatcherCleanup(rn,!1,Rt),Bt=Rt.onStop=()=>{const rn=cleanupMap.get(Rt);if(rn){if(Lt)Lt(rn,4);else for(const ln of rn)ln();cleanupMap.delete(Rt)}},rt?st?on(!0):Jt=Rt.run():Et?Et(on.bind(null,!0),!0):Rt.run(),Kt.pause=Rt.pause.bind(Rt),Kt.resume=Rt.resume.bind(Rt),Kt.stop=Kt,Kt}function traverse(nt,rt=1/0,it){if(rt<=0||!isObject$3(nt)||nt.__v_skip||(it=it||new Set,it.has(nt)))return nt;if(it.add(nt),rt--,isRef(nt))traverse(nt.value,rt,it);else if(isArray$2(nt))for(let st=0;st<nt.length;st++)traverse(nt[st],rt,it);else if(isSet$2(nt)||isMap$2(nt))nt.forEach(st=>{traverse(st,rt,it)});else if(isPlainObject$1(nt)){for(const st in nt)traverse(nt[st],rt,it);for(const st of Object.getOwnPropertySymbols(nt))Object.prototype.propertyIsEnumerable.call(nt,st)&&traverse(nt[st],rt,it)}return nt}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(nt,...rt){if(isWarning)return;isWarning=!0,pauseTracking();const it=stack.length?stack[stack.length-1].component:null,st=it&&it.appContext.config.warnHandler,_t=getComponentTrace();if(st)callWithErrorHandling(st,it,11,[nt+rt.map(xt=>{var Et,kt;return(kt=(Et=xt.toString)==null?void 0:Et.call(xt))!=null?kt:JSON.stringify(xt)}).join(""),it&&it.proxy,_t.map(({vnode:xt})=>`at <${formatComponentName(it,xt.type)}>`).join(`
`),_t]);else{const xt=[`[Vue warn]: ${nt}`,...rt];_t.length&&xt.push(`
`,...formatTrace(_t)),console.warn(...xt)}resetTracking(),isWarning=!1}function getComponentTrace(){let nt=stack[stack.length-1];if(!nt)return[];const rt=[];for(;nt;){const it=rt[0];it&&it.vnode===nt?it.recurseCount++:rt.push({vnode:nt,recurseCount:0});const st=nt.component&&nt.component.parent;nt=st&&st.vnode}return rt}function formatTrace(nt){const rt=[];return nt.forEach((it,st)=>{rt.push(...st===0?[]:[`
`],...formatTraceEntry(it))}),rt}function formatTraceEntry({vnode:nt,recurseCount:rt}){const it=rt>0?`... (${rt} recursive calls)`:"",st=nt.component?nt.component.parent==null:!1,_t=` at <${formatComponentName(nt.component,nt.type,st)}`,xt=">"+it;return nt.props?[_t,...formatProps(nt.props),xt]:[_t+xt]}function formatProps(nt){const rt=[],it=Object.keys(nt);return it.slice(0,3).forEach(st=>{rt.push(...formatProp(st,nt[st]))}),it.length>3&&rt.push(" ..."),rt}function formatProp(nt,rt,it){return isString(rt)?(rt=JSON.stringify(rt),it?rt:[`${nt}=${rt}`]):typeof rt=="number"||typeof rt=="boolean"||rt==null?it?rt:[`${nt}=${rt}`]:isRef(rt)?(rt=formatProp(nt,toRaw(rt.value),!0),it?rt:[`${nt}=Ref<`,rt,">"]):isFunction$1(rt)?[`${nt}=fn${rt.name?`<${rt.name}>`:""}`]:(rt=toRaw(rt),it?rt:[`${nt}=`,rt])}function callWithErrorHandling(nt,rt,it,st){try{return st?nt(...st):nt()}catch(_t){handleError$1(_t,rt,it)}}function callWithAsyncErrorHandling(nt,rt,it,st){if(isFunction$1(nt)){const _t=callWithErrorHandling(nt,rt,it,st);return _t&&isPromise(_t)&&_t.catch(xt=>{handleError$1(xt,rt,it)}),_t}if(isArray$2(nt)){const _t=[];for(let xt=0;xt<nt.length;xt++)_t.push(callWithAsyncErrorHandling(nt[xt],rt,it,st));return _t}}function handleError$1(nt,rt,it,st=!0){const _t=rt?rt.vnode:null,{errorHandler:xt,throwUnhandledErrorInProduction:Et}=rt&&rt.appContext.config||EMPTY_OBJ;if(rt){let kt=rt.parent;const Lt=rt.proxy,It=`https://vuejs.org/error-reference/#runtime-${it}`;for(;kt;){const Rt=kt.ec;if(Rt){for(let Nt=0;Nt<Rt.length;Nt++)if(Rt[Nt](nt,Lt,It)===!1)return}kt=kt.parent}if(xt){pauseTracking(),callWithErrorHandling(xt,null,10,[nt,Lt,It]),resetTracking();return}}logError(nt,it,_t,st,Et)}function logError(nt,rt,it,st=!0,_t=!1){if(_t)throw nt;console.error(nt)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(nt){const rt=currentFlushPromise||resolvedPromise;return nt?rt.then(this?nt.bind(this):nt):rt}function findInsertionIndex(nt){let rt=flushIndex+1,it=queue.length;for(;rt<it;){const st=rt+it>>>1,_t=queue[st],xt=getId$1(_t);xt<nt||xt===nt&&_t.flags&2?rt=st+1:it=st}return rt}function queueJob(nt){if(!(nt.flags&1)){const rt=getId$1(nt),it=queue[queue.length-1];!it||!(nt.flags&2)&&rt>=getId$1(it)?queue.push(nt):queue.splice(findInsertionIndex(rt),0,nt),nt.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(nt){isArray$2(nt)?pendingPostFlushCbs.push(...nt):activePostFlushCbs&&nt.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,nt):nt.flags&1||(pendingPostFlushCbs.push(nt),nt.flags|=1),queueFlush()}function flushPreFlushCbs(nt,rt,it=flushIndex+1){for(;it<queue.length;it++){const st=queue[it];if(st&&st.flags&2){if(nt&&st.id!==nt.uid)continue;queue.splice(it,1),it--,st.flags&4&&(st.flags&=-2),st(),st.flags&4||(st.flags&=-2)}}}function flushPostFlushCbs(nt){if(pendingPostFlushCbs.length){const rt=[...new Set(pendingPostFlushCbs)].sort((it,st)=>getId$1(it)-getId$1(st));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...rt);return}for(activePostFlushCbs=rt,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const it=activePostFlushCbs[postFlushIndex];it.flags&4&&(it.flags&=-2),it.flags&8||it(),it.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId$1=nt=>nt.id==null?nt.flags&2?-1:1/0:nt.id;function flushJobs(nt){const rt=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const it=queue[flushIndex];it&&!(it.flags&8)&&(it.flags&4&&(it.flags&=-2),callWithErrorHandling(it,it.i,it.i?15:14),it.flags&4||(it.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const it=queue[flushIndex];it&&(it.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(nt){const rt=currentRenderingInstance;return currentRenderingInstance=nt,currentScopeId=nt&&nt.type.__scopeId||null,rt}function withCtx(nt,rt=currentRenderingInstance,it){if(!rt||nt._n)return nt;const st=(..._t)=>{st._d&&setBlockTracking(-1);const xt=setCurrentRenderingInstance(rt);let Et;try{Et=nt(..._t)}finally{setCurrentRenderingInstance(xt),st._d&&setBlockTracking(1)}return Et};return st._n=!0,st._c=!0,st._d=!0,st}function invokeDirectiveHook(nt,rt,it,st){const _t=nt.dirs,xt=rt&&rt.dirs;for(let Et=0;Et<_t.length;Et++){const kt=_t[Et];xt&&(kt.oldValue=xt[Et].value);let Lt=kt.dir[st];Lt&&(pauseTracking(),callWithAsyncErrorHandling(Lt,it,8,[nt.el,kt,nt,rt]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=nt=>nt.__isTeleport,TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator};function setTransitionHooks(nt,rt){nt.shapeFlag&6&&nt.component?(nt.transition=rt,setTransitionHooks(nt.component.subTree,rt)):nt.shapeFlag&128?(nt.ssContent.transition=rt.clone(nt.ssContent),nt.ssFallback.transition=rt.clone(nt.ssFallback)):nt.transition=rt}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(nt,rt){return isFunction$1(nt)?(()=>extend$3({name:nt.name},rt,{setup:nt}))():nt}function markAsyncBoundary(nt){nt.ids=[nt.ids[0]+nt.ids[2]+++"-",0,0]}function setRef(nt,rt,it,st,_t=!1){if(isArray$2(nt)){nt.forEach((Yt,Zt)=>setRef(Yt,rt&&(isArray$2(rt)?rt[Zt]:rt),it,st,_t));return}if(isAsyncWrapper(st)&&!_t){st.shapeFlag&512&&st.type.__asyncResolved&&st.component.subTree.component&&setRef(nt,rt,it,st.component.subTree);return}const xt=st.shapeFlag&4?getComponentPublicInstance(st.component):st.el,Et=_t?null:xt,{i:kt,r:Lt}=nt,It=rt&&rt.r,Rt=kt.refs===EMPTY_OBJ?kt.refs={}:kt.refs,Nt=kt.setupState,Bt=toRaw(Nt),Ft=Nt===EMPTY_OBJ?()=>!1:Yt=>hasOwn(Bt,Yt);if(It!=null&&It!==Lt&&(isString(It)?(Rt[It]=null,Ft(It)&&(Nt[It]=null)):isRef(It)&&(It.value=null)),isFunction$1(Lt))callWithErrorHandling(Lt,kt,12,[Et,Rt]);else{const Yt=isString(Lt),Zt=isRef(Lt);if(Yt||Zt){const Wt=()=>{if(nt.f){const Kt=Yt?Ft(Lt)?Nt[Lt]:Rt[Lt]:Lt.value;_t?isArray$2(Kt)&&remove$1(Kt,xt):isArray$2(Kt)?Kt.includes(xt)||Kt.push(xt):Yt?(Rt[Lt]=[xt],Ft(Lt)&&(Nt[Lt]=Rt[Lt])):(Lt.value=[xt],nt.k&&(Rt[nt.k]=Lt.value))}else Yt?(Rt[Lt]=Et,Ft(Lt)&&(Nt[Lt]=Et)):Zt&&(Lt.value=Et,nt.k&&(Rt[nt.k]=Et))};Et?(Wt.id=-1,queuePostRenderEffect(Wt,it)):Wt()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=nt=>!!nt.type.__asyncLoader,isKeepAlive=nt=>nt.type.__isKeepAlive;function onActivated(nt,rt){registerKeepAliveHook(nt,"a",rt)}function onDeactivated(nt,rt){registerKeepAliveHook(nt,"da",rt)}function registerKeepAliveHook(nt,rt,it=currentInstance){const st=nt.__wdc||(nt.__wdc=()=>{let _t=it;for(;_t;){if(_t.isDeactivated)return;_t=_t.parent}return nt()});if(injectHook(rt,st,it),it){let _t=it.parent;for(;_t&&_t.parent;)isKeepAlive(_t.parent.vnode)&&injectToKeepAliveRoot(st,rt,it,_t),_t=_t.parent}}function injectToKeepAliveRoot(nt,rt,it,st){const _t=injectHook(rt,nt,st,!0);onUnmounted(()=>{remove$1(st[rt],_t)},it)}function injectHook(nt,rt,it=currentInstance,st=!1){if(it){const _t=it[nt]||(it[nt]=[]),xt=rt.__weh||(rt.__weh=(...Et)=>{pauseTracking();const kt=setCurrentInstance(it),Lt=callWithAsyncErrorHandling(rt,it,nt,Et);return kt(),resetTracking(),Lt});return st?_t.unshift(xt):_t.push(xt),xt}}const createHook=nt=>(rt,it=currentInstance)=>{(!isInSSRComponentSetup||nt==="sp")&&injectHook(nt,(...st)=>rt(...st),it)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(nt,rt=currentInstance){injectHook("ec",nt,rt)}const COMPONENTS="components";function resolveComponent(nt,rt){return resolveAsset(COMPONENTS,nt,!0,rt)||nt}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(nt,rt,it=!0,st=!1){const _t=currentRenderingInstance||currentInstance;if(_t){const xt=_t.type;if(nt===COMPONENTS){const kt=getComponentName(xt,!1);if(kt&&(kt===rt||kt===camelize(rt)||kt===capitalize(camelize(rt))))return xt}const Et=resolve(_t[nt]||xt[nt],rt)||resolve(_t.appContext[nt],rt);return!Et&&st?xt:Et}}function resolve(nt,rt){return nt&&(nt[rt]||nt[camelize(rt)]||nt[capitalize(camelize(rt))])}function renderList(nt,rt,it,st){let _t;const xt=it&&it[st],Et=isArray$2(nt);if(Et||isString(nt)){const kt=Et&&isReactive(nt);let Lt=!1,It=!1;kt&&(Lt=!isShallow(nt),It=isReadonly(nt),nt=shallowReadArray(nt)),_t=new Array(nt.length);for(let Rt=0,Nt=nt.length;Rt<Nt;Rt++)_t[Rt]=rt(Lt?It?toReadonly(toReactive(nt[Rt])):toReactive(nt[Rt]):nt[Rt],Rt,void 0,xt&&xt[Rt])}else if(typeof nt=="number"){_t=new Array(nt);for(let kt=0;kt<nt;kt++)_t[kt]=rt(kt+1,kt,void 0,xt&&xt[kt])}else if(isObject$3(nt))if(nt[Symbol.iterator])_t=Array.from(nt,(kt,Lt)=>rt(kt,Lt,void 0,xt&&xt[Lt]));else{const kt=Object.keys(nt);_t=new Array(kt.length);for(let Lt=0,It=kt.length;Lt<It;Lt++){const Rt=kt[Lt];_t[Lt]=rt(nt[Rt],Rt,Lt,xt&&xt[Lt])}}else _t=[];return it&&(it[st]=_t),_t}const getPublicInstance=nt=>nt?isStatefulComponent(nt)?getComponentPublicInstance(nt):getPublicInstance(nt.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:nt=>nt,$el:nt=>nt.vnode.el,$data:nt=>nt.data,$props:nt=>nt.props,$attrs:nt=>nt.attrs,$slots:nt=>nt.slots,$refs:nt=>nt.refs,$parent:nt=>getPublicInstance(nt.parent),$root:nt=>getPublicInstance(nt.root),$host:nt=>nt.ce,$emit:nt=>nt.emit,$options:nt=>resolveMergedOptions(nt),$forceUpdate:nt=>nt.f||(nt.f=()=>{queueJob(nt.update)}),$nextTick:nt=>nt.n||(nt.n=nextTick.bind(nt.proxy)),$watch:nt=>instanceWatch.bind(nt)}),hasSetupBinding=(nt,rt)=>nt!==EMPTY_OBJ&&!nt.__isScriptSetup&&hasOwn(nt,rt),PublicInstanceProxyHandlers={get({_:nt},rt){if(rt==="__v_skip")return!0;const{ctx:it,setupState:st,data:_t,props:xt,accessCache:Et,type:kt,appContext:Lt}=nt;let It;if(rt[0]!=="$"){const Ft=Et[rt];if(Ft!==void 0)switch(Ft){case 1:return st[rt];case 2:return _t[rt];case 4:return it[rt];case 3:return xt[rt]}else{if(hasSetupBinding(st,rt))return Et[rt]=1,st[rt];if(_t!==EMPTY_OBJ&&hasOwn(_t,rt))return Et[rt]=2,_t[rt];if((It=nt.propsOptions[0])&&hasOwn(It,rt))return Et[rt]=3,xt[rt];if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Et[rt]=4,it[rt];shouldCacheAccess&&(Et[rt]=0)}}const Rt=publicPropertiesMap[rt];let Nt,Bt;if(Rt)return rt==="$attrs"&&track(nt.attrs,"get",""),Rt(nt);if((Nt=kt.__cssModules)&&(Nt=Nt[rt]))return Nt;if(it!==EMPTY_OBJ&&hasOwn(it,rt))return Et[rt]=4,it[rt];if(Bt=Lt.config.globalProperties,hasOwn(Bt,rt))return Bt[rt]},set({_:nt},rt,it){const{data:st,setupState:_t,ctx:xt}=nt;return hasSetupBinding(_t,rt)?(_t[rt]=it,!0):st!==EMPTY_OBJ&&hasOwn(st,rt)?(st[rt]=it,!0):hasOwn(nt.props,rt)||rt[0]==="$"&&rt.slice(1)in nt?!1:(xt[rt]=it,!0)},has({_:{data:nt,setupState:rt,accessCache:it,ctx:st,appContext:_t,propsOptions:xt}},Et){let kt;return!!it[Et]||nt!==EMPTY_OBJ&&hasOwn(nt,Et)||hasSetupBinding(rt,Et)||(kt=xt[0])&&hasOwn(kt,Et)||hasOwn(st,Et)||hasOwn(publicPropertiesMap,Et)||hasOwn(_t.config.globalProperties,Et)},defineProperty(nt,rt,it){return it.get!=null?nt._.accessCache[rt]=0:hasOwn(it,"value")&&this.set(nt,rt,it.value,null),Reflect.defineProperty(nt,rt,it)}};function normalizePropsOrEmits(nt){return isArray$2(nt)?nt.reduce((rt,it)=>(rt[it]=null,rt),{}):nt}let shouldCacheAccess=!0;function applyOptions(nt){const rt=resolveMergedOptions(nt),it=nt.proxy,st=nt.ctx;shouldCacheAccess=!1,rt.beforeCreate&&callHook(rt.beforeCreate,nt,"bc");const{data:_t,computed:xt,methods:Et,watch:kt,provide:Lt,inject:It,created:Rt,beforeMount:Nt,mounted:Bt,beforeUpdate:Ft,updated:Yt,activated:Zt,deactivated:Wt,beforeDestroy:Kt,beforeUnmount:Jt,destroyed:on,unmounted:rn,render:ln,renderTracked:gn,renderTriggered:wn,errorCaptured:kn,serverPrefetch:Cn,expose:Pn,inheritAttrs:An,components:cn,directives:Ln,filters:an}=rt;if(It&&resolveInjections(It,st,null),Et)for(const Fn in Et){const ir=Et[Fn];isFunction$1(ir)&&(st[Fn]=ir.bind(it))}if(_t){const Fn=_t.call(it,it);isObject$3(Fn)&&(nt.data=reactive(Fn))}if(shouldCacheAccess=!0,xt)for(const Fn in xt){const ir=xt[Fn],tr=isFunction$1(ir)?ir.bind(it,it):isFunction$1(ir.get)?ir.get.bind(it,it):NOOP,Jn=!isFunction$1(ir)&&isFunction$1(ir.set)?ir.set.bind(it):NOOP,hr=computed({get:tr,set:Jn});Object.defineProperty(st,Fn,{enumerable:!0,configurable:!0,get:()=>hr.value,set:lr=>hr.value=lr})}if(kt)for(const Fn in kt)createWatcher(kt[Fn],st,it,Fn);if(Lt){const Fn=isFunction$1(Lt)?Lt.call(it):Lt;Reflect.ownKeys(Fn).forEach(ir=>{provide(ir,Fn[ir])})}Rt&&callHook(Rt,nt,"c");function dn(Fn,ir){isArray$2(ir)?ir.forEach(tr=>Fn(tr.bind(it))):ir&&Fn(ir.bind(it))}if(dn(onBeforeMount,Nt),dn(onMounted,Bt),dn(onBeforeUpdate,Ft),dn(onUpdated,Yt),dn(onActivated,Zt),dn(onDeactivated,Wt),dn(onErrorCaptured,kn),dn(onRenderTracked,gn),dn(onRenderTriggered,wn),dn(onBeforeUnmount,Jt),dn(onUnmounted,rn),dn(onServerPrefetch,Cn),isArray$2(Pn))if(Pn.length){const Fn=nt.exposed||(nt.exposed={});Pn.forEach(ir=>{Object.defineProperty(Fn,ir,{get:()=>it[ir],set:tr=>it[ir]=tr})})}else nt.exposed||(nt.exposed={});ln&&nt.render===NOOP&&(nt.render=ln),An!=null&&(nt.inheritAttrs=An),cn&&(nt.components=cn),Ln&&(nt.directives=Ln),Cn&&markAsyncBoundary(nt)}function resolveInjections(nt,rt,it=NOOP){isArray$2(nt)&&(nt=normalizeInject(nt));for(const st in nt){const _t=nt[st];let xt;isObject$3(_t)?"default"in _t?xt=inject(_t.from||st,_t.default,!0):xt=inject(_t.from||st):xt=inject(_t),isRef(xt)?Object.defineProperty(rt,st,{enumerable:!0,configurable:!0,get:()=>xt.value,set:Et=>xt.value=Et}):rt[st]=xt}}function callHook(nt,rt,it){callWithAsyncErrorHandling(isArray$2(nt)?nt.map(st=>st.bind(rt.proxy)):nt.bind(rt.proxy),rt,it)}function createWatcher(nt,rt,it,st){let _t=st.includes(".")?createPathGetter(it,st):()=>it[st];if(isString(nt)){const xt=rt[nt];isFunction$1(xt)&&watch$1(_t,xt)}else if(isFunction$1(nt))watch$1(_t,nt.bind(it));else if(isObject$3(nt))if(isArray$2(nt))nt.forEach(xt=>createWatcher(xt,rt,it,st));else{const xt=isFunction$1(nt.handler)?nt.handler.bind(it):rt[nt.handler];isFunction$1(xt)&&watch$1(_t,xt,nt)}}function resolveMergedOptions(nt){const rt=nt.type,{mixins:it,extends:st}=rt,{mixins:_t,optionsCache:xt,config:{optionMergeStrategies:Et}}=nt.appContext,kt=xt.get(rt);let Lt;return kt?Lt=kt:!_t.length&&!it&&!st?Lt=rt:(Lt={},_t.length&&_t.forEach(It=>mergeOptions(Lt,It,Et,!0)),mergeOptions(Lt,rt,Et)),isObject$3(rt)&&xt.set(rt,Lt),Lt}function mergeOptions(nt,rt,it,st=!1){const{mixins:_t,extends:xt}=rt;xt&&mergeOptions(nt,xt,it,!0),_t&&_t.forEach(Et=>mergeOptions(nt,Et,it,!0));for(const Et in rt)if(!(st&&Et==="expose")){const kt=internalOptionMergeStrats[Et]||it&&it[Et];nt[Et]=kt?kt(nt[Et],rt[Et]):rt[Et]}return nt}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(nt,rt){return rt?nt?function(){return extend$3(isFunction$1(nt)?nt.call(this,this):nt,isFunction$1(rt)?rt.call(this,this):rt)}:rt:nt}function mergeInject(nt,rt){return mergeObjectOptions(normalizeInject(nt),normalizeInject(rt))}function normalizeInject(nt){if(isArray$2(nt)){const rt={};for(let it=0;it<nt.length;it++)rt[nt[it]]=nt[it];return rt}return nt}function mergeAsArray(nt,rt){return nt?[...new Set([].concat(nt,rt))]:rt}function mergeObjectOptions(nt,rt){return nt?extend$3(Object.create(null),nt,rt):rt}function mergeEmitsOrPropsOptions(nt,rt){return nt?isArray$2(nt)&&isArray$2(rt)?[...new Set([...nt,...rt])]:extend$3(Object.create(null),normalizePropsOrEmits(nt),normalizePropsOrEmits(rt!=null?rt:{})):rt}function mergeWatchOptions(nt,rt){if(!nt)return rt;if(!rt)return nt;const it=extend$3(Object.create(null),nt);for(const st in rt)it[st]=mergeAsArray(nt[st],rt[st]);return it}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(nt,rt){return function(st,_t=null){isFunction$1(st)||(st=extend$3({},st)),_t!=null&&!isObject$3(_t)&&(_t=null);const xt=createAppContext(),Et=new WeakSet,kt=[];let Lt=!1;const It=xt.app={_uid:uid$1++,_component:st,_props:_t,_container:null,_context:xt,_instance:null,version:version$2,get config(){return xt.config},set config(Rt){},use(Rt,...Nt){return Et.has(Rt)||(Rt&&isFunction$1(Rt.install)?(Et.add(Rt),Rt.install(It,...Nt)):isFunction$1(Rt)&&(Et.add(Rt),Rt(It,...Nt))),It},mixin(Rt){return xt.mixins.includes(Rt)||xt.mixins.push(Rt),It},component(Rt,Nt){return Nt?(xt.components[Rt]=Nt,It):xt.components[Rt]},directive(Rt,Nt){return Nt?(xt.directives[Rt]=Nt,It):xt.directives[Rt]},mount(Rt,Nt,Bt){if(!Lt){const Ft=It._ceVNode||createVNode(st,_t);return Ft.appContext=xt,Bt===!0?Bt="svg":Bt===!1&&(Bt=void 0),Nt&&rt?rt(Ft,Rt):nt(Ft,Rt,Bt),Lt=!0,It._container=Rt,Rt.__vue_app__=It,getComponentPublicInstance(Ft.component)}},onUnmount(Rt){kt.push(Rt)},unmount(){Lt&&(callWithAsyncErrorHandling(kt,It._instance,16),nt(null,It._container),delete It._container.__vue_app__)},provide(Rt,Nt){return xt.provides[Rt]=Nt,It},runWithContext(Rt){const Nt=currentApp;currentApp=It;try{return Rt()}finally{currentApp=Nt}}};return It}}let currentApp=null;function provide(nt,rt){if(currentInstance){let it=currentInstance.provides;const st=currentInstance.parent&&currentInstance.parent.provides;st===it&&(it=currentInstance.provides=Object.create(st)),it[nt]=rt}}function inject(nt,rt,it=!1){const st=currentInstance||currentRenderingInstance;if(st||currentApp){const _t=currentApp?currentApp._context.provides:st?st.parent==null?st.vnode.appContext&&st.vnode.appContext.provides:st.parent.provides:void 0;if(_t&&nt in _t)return _t[nt];if(arguments.length>1)return it&&isFunction$1(rt)?rt.call(st&&st.proxy):rt}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=nt=>Object.getPrototypeOf(nt)===internalObjectProto;function initProps(nt,rt,it,st=!1){const _t={},xt=createInternalObject();nt.propsDefaults=Object.create(null),setFullProps(nt,rt,_t,xt);for(const Et in nt.propsOptions[0])Et in _t||(_t[Et]=void 0);it?nt.props=st?_t:shallowReactive(_t):nt.type.props?nt.props=_t:nt.props=xt,nt.attrs=xt}function updateProps(nt,rt,it,st){const{props:_t,attrs:xt,vnode:{patchFlag:Et}}=nt,kt=toRaw(_t),[Lt]=nt.propsOptions;let It=!1;if((st||Et>0)&&!(Et&16)){if(Et&8){const Rt=nt.vnode.dynamicProps;for(let Nt=0;Nt<Rt.length;Nt++){let Bt=Rt[Nt];if(isEmitListener(nt.emitsOptions,Bt))continue;const Ft=rt[Bt];if(Lt)if(hasOwn(xt,Bt))Ft!==xt[Bt]&&(xt[Bt]=Ft,It=!0);else{const Yt=camelize(Bt);_t[Yt]=resolvePropValue(Lt,kt,Yt,Ft,nt,!1)}else Ft!==xt[Bt]&&(xt[Bt]=Ft,It=!0)}}}else{setFullProps(nt,rt,_t,xt)&&(It=!0);let Rt;for(const Nt in kt)(!rt||!hasOwn(rt,Nt)&&((Rt=hyphenate(Nt))===Nt||!hasOwn(rt,Rt)))&&(Lt?it&&(it[Nt]!==void 0||it[Rt]!==void 0)&&(_t[Nt]=resolvePropValue(Lt,kt,Nt,void 0,nt,!0)):delete _t[Nt]);if(xt!==kt)for(const Nt in xt)(!rt||!hasOwn(rt,Nt)&&!0)&&(delete xt[Nt],It=!0)}It&&trigger(nt.attrs,"set","")}function setFullProps(nt,rt,it,st){const[_t,xt]=nt.propsOptions;let Et=!1,kt;if(rt)for(let Lt in rt){if(isReservedProp(Lt))continue;const It=rt[Lt];let Rt;_t&&hasOwn(_t,Rt=camelize(Lt))?!xt||!xt.includes(Rt)?it[Rt]=It:(kt||(kt={}))[Rt]=It:isEmitListener(nt.emitsOptions,Lt)||(!(Lt in st)||It!==st[Lt])&&(st[Lt]=It,Et=!0)}if(xt){const Lt=toRaw(it),It=kt||EMPTY_OBJ;for(let Rt=0;Rt<xt.length;Rt++){const Nt=xt[Rt];it[Nt]=resolvePropValue(_t,Lt,Nt,It[Nt],nt,!hasOwn(It,Nt))}}return Et}function resolvePropValue(nt,rt,it,st,_t,xt){const Et=nt[it];if(Et!=null){const kt=hasOwn(Et,"default");if(kt&&st===void 0){const Lt=Et.default;if(Et.type!==Function&&!Et.skipFactory&&isFunction$1(Lt)){const{propsDefaults:It}=_t;if(it in It)st=It[it];else{const Rt=setCurrentInstance(_t);st=It[it]=Lt.call(null,rt),Rt()}}else st=Lt;_t.ce&&_t.ce._setProp(it,st)}Et[0]&&(xt&&!kt?st=!1:Et[1]&&(st===""||st===hyphenate(it))&&(st=!0))}return st}const mixinPropsCache=new WeakMap;function normalizePropsOptions(nt,rt,it=!1){const st=it?mixinPropsCache:rt.propsCache,_t=st.get(nt);if(_t)return _t;const xt=nt.props,Et={},kt=[];let Lt=!1;if(!isFunction$1(nt)){const Rt=Nt=>{Lt=!0;const[Bt,Ft]=normalizePropsOptions(Nt,rt,!0);extend$3(Et,Bt),Ft&&kt.push(...Ft)};!it&&rt.mixins.length&&rt.mixins.forEach(Rt),nt.extends&&Rt(nt.extends),nt.mixins&&nt.mixins.forEach(Rt)}if(!xt&&!Lt)return isObject$3(nt)&&st.set(nt,EMPTY_ARR),EMPTY_ARR;if(isArray$2(xt))for(let Rt=0;Rt<xt.length;Rt++){const Nt=camelize(xt[Rt]);validatePropName(Nt)&&(Et[Nt]=EMPTY_OBJ)}else if(xt)for(const Rt in xt){const Nt=camelize(Rt);if(validatePropName(Nt)){const Bt=xt[Rt],Ft=Et[Nt]=isArray$2(Bt)||isFunction$1(Bt)?{type:Bt}:extend$3({},Bt),Yt=Ft.type;let Zt=!1,Wt=!0;if(isArray$2(Yt))for(let Kt=0;Kt<Yt.length;++Kt){const Jt=Yt[Kt],on=isFunction$1(Jt)&&Jt.name;if(on==="Boolean"){Zt=!0;break}else on==="String"&&(Wt=!1)}else Zt=isFunction$1(Yt)&&Yt.name==="Boolean";Ft[0]=Zt,Ft[1]=Wt,(Zt||hasOwn(Ft,"default"))&&kt.push(Nt)}}const It=[Et,kt];return isObject$3(nt)&&st.set(nt,It),It}function validatePropName(nt){return nt[0]!=="$"&&!isReservedProp(nt)}const isInternalKey=nt=>nt[0]==="_"||nt==="$stable",normalizeSlotValue=nt=>isArray$2(nt)?nt.map(normalizeVNode):[normalizeVNode(nt)],normalizeSlot=(nt,rt,it)=>{if(rt._n)return rt;const st=withCtx((..._t)=>normalizeSlotValue(rt(..._t)),it);return st._c=!1,st},normalizeObjectSlots=(nt,rt,it)=>{const st=nt._ctx;for(const _t in nt){if(isInternalKey(_t))continue;const xt=nt[_t];if(isFunction$1(xt))rt[_t]=normalizeSlot(_t,xt,st);else if(xt!=null){const Et=normalizeSlotValue(xt);rt[_t]=()=>Et}}},normalizeVNodeSlots=(nt,rt)=>{const it=normalizeSlotValue(rt);nt.slots.default=()=>it},assignSlots=(nt,rt,it)=>{for(const st in rt)(it||!isInternalKey(st))&&(nt[st]=rt[st])},initSlots=(nt,rt,it)=>{const st=nt.slots=createInternalObject();if(nt.vnode.shapeFlag&32){const _t=rt._;_t?(assignSlots(st,rt,it),it&&def(st,"_",_t,!0)):normalizeObjectSlots(rt,st)}else rt&&normalizeVNodeSlots(nt,rt)},updateSlots=(nt,rt,it)=>{const{vnode:st,slots:_t}=nt;let xt=!0,Et=EMPTY_OBJ;if(st.shapeFlag&32){const kt=rt._;kt?it&&kt===1?xt=!1:assignSlots(_t,rt,it):(xt=!rt.$stable,normalizeObjectSlots(rt,_t)),Et=rt}else rt&&(normalizeVNodeSlots(nt,rt),Et={default:1});if(xt)for(const kt in _t)!isInternalKey(kt)&&Et[kt]==null&&delete _t[kt]};function initFeatureFlags(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(getGlobalThis().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(nt){return baseCreateRenderer(nt)}function baseCreateRenderer(nt,rt){initFeatureFlags();const it=getGlobalThis();it.__VUE__=!0;const{insert:st,remove:_t,patchProp:xt,createElement:Et,createText:kt,createComment:Lt,setText:It,setElementText:Rt,parentNode:Nt,nextSibling:Bt,setScopeId:Ft=NOOP,insertStaticContent:Yt}=nt,Zt=(nn,un,pn,Rn=null,_n=null,or=null,Vn=void 0,Wn=null,Hn=!!un.dynamicChildren)=>{if(nn===un)return;nn&&!isSameVNodeType(nn,un)&&(Rn=Fr(nn),lr(nn,_n,or,!0),nn=null),un.patchFlag===-2&&(Hn=!1,un.dynamicChildren=null);const{type:nr,ref:sr,shapeFlag:pr}=un;switch(nr){case Text:Wt(nn,un,pn,Rn);break;case Comment:Kt(nn,un,pn,Rn);break;case Static:nn==null&&Jt(un,pn,Rn,Vn);break;case Fragment:cn(nn,un,pn,Rn,_n,or,Vn,Wn,Hn);break;default:pr&1?ln(nn,un,pn,Rn,_n,or,Vn,Wn,Hn):pr&6?Ln(nn,un,pn,Rn,_n,or,Vn,Wn,Hn):(pr&64||pr&128)&&nr.process(nn,un,pn,Rn,_n,or,Vn,Wn,Hn,fr)}sr!=null&&_n&&setRef(sr,nn&&nn.ref,or,un||nn,!un)},Wt=(nn,un,pn,Rn)=>{if(nn==null)st(un.el=kt(un.children),pn,Rn);else{const _n=un.el=nn.el;un.children!==nn.children&&It(_n,un.children)}},Kt=(nn,un,pn,Rn)=>{nn==null?st(un.el=Lt(un.children||""),pn,Rn):un.el=nn.el},Jt=(nn,un,pn,Rn)=>{[nn.el,nn.anchor]=Yt(nn.children,un,pn,Rn,nn.el,nn.anchor)},on=({el:nn,anchor:un},pn,Rn)=>{let _n;for(;nn&&nn!==un;)_n=Bt(nn),st(nn,pn,Rn),nn=_n;st(un,pn,Rn)},rn=({el:nn,anchor:un})=>{let pn;for(;nn&&nn!==un;)pn=Bt(nn),_t(nn),nn=pn;_t(un)},ln=(nn,un,pn,Rn,_n,or,Vn,Wn,Hn)=>{un.type==="svg"?Vn="svg":un.type==="math"&&(Vn="mathml"),nn==null?gn(un,pn,Rn,_n,or,Vn,Wn,Hn):Cn(nn,un,_n,or,Vn,Wn,Hn)},gn=(nn,un,pn,Rn,_n,or,Vn,Wn)=>{let Hn,nr;const{props:sr,shapeFlag:pr,transition:vr,dirs:kr}=nn;if(Hn=nn.el=Et(nn.type,or,sr&&sr.is,sr),pr&8?Rt(Hn,nn.children):pr&16&&kn(nn.children,Hn,null,Rn,_n,resolveChildrenNamespace(nn,or),Vn,Wn),kr&&invokeDirectiveHook(nn,null,Rn,"created"),wn(Hn,nn,nn.scopeId,Vn,Rn),sr){for(const ui in sr)ui!=="value"&&!isReservedProp(ui)&&xt(Hn,ui,null,sr[ui],or,Rn);"value"in sr&&xt(Hn,"value",null,sr.value,or),(nr=sr.onVnodeBeforeMount)&&invokeVNodeHook(nr,Rn,nn)}kr&&invokeDirectiveHook(nn,null,Rn,"beforeMount");const si=needTransition(_n,vr);si&&vr.beforeEnter(Hn),st(Hn,un,pn),((nr=sr&&sr.onVnodeMounted)||si||kr)&&queuePostRenderEffect(()=>{nr&&invokeVNodeHook(nr,Rn,nn),si&&vr.enter(Hn),kr&&invokeDirectiveHook(nn,null,Rn,"mounted")},_n)},wn=(nn,un,pn,Rn,_n)=>{if(pn&&Ft(nn,pn),Rn)for(let or=0;or<Rn.length;or++)Ft(nn,Rn[or]);if(_n){let or=_n.subTree;if(un===or||isSuspense(or.type)&&(or.ssContent===un||or.ssFallback===un)){const Vn=_n.vnode;wn(nn,Vn,Vn.scopeId,Vn.slotScopeIds,_n.parent)}}},kn=(nn,un,pn,Rn,_n,or,Vn,Wn,Hn=0)=>{for(let nr=Hn;nr<nn.length;nr++){const sr=nn[nr]=Wn?cloneIfMounted(nn[nr]):normalizeVNode(nn[nr]);Zt(null,sr,un,pn,Rn,_n,or,Vn,Wn)}},Cn=(nn,un,pn,Rn,_n,or,Vn)=>{const Wn=un.el=nn.el;let{patchFlag:Hn,dynamicChildren:nr,dirs:sr}=un;Hn|=nn.patchFlag&16;const pr=nn.props||EMPTY_OBJ,vr=un.props||EMPTY_OBJ;let kr;if(pn&&toggleRecurse(pn,!1),(kr=vr.onVnodeBeforeUpdate)&&invokeVNodeHook(kr,pn,un,nn),sr&&invokeDirectiveHook(un,nn,pn,"beforeUpdate"),pn&&toggleRecurse(pn,!0),(pr.innerHTML&&vr.innerHTML==null||pr.textContent&&vr.textContent==null)&&Rt(Wn,""),nr?Pn(nn.dynamicChildren,nr,Wn,pn,Rn,resolveChildrenNamespace(un,_n),or):Vn||ir(nn,un,Wn,null,pn,Rn,resolveChildrenNamespace(un,_n),or,!1),Hn>0){if(Hn&16)An(Wn,pr,vr,pn,_n);else if(Hn&2&&pr.class!==vr.class&&xt(Wn,"class",null,vr.class,_n),Hn&4&&xt(Wn,"style",pr.style,vr.style,_n),Hn&8){const si=un.dynamicProps;for(let ui=0;ui<si.length;ui++){const ii=si[ui],li=pr[ii],Ei=vr[ii];(Ei!==li||ii==="value")&&xt(Wn,ii,li,Ei,_n,pn)}}Hn&1&&nn.children!==un.children&&Rt(Wn,un.children)}else!Vn&&nr==null&&An(Wn,pr,vr,pn,_n);((kr=vr.onVnodeUpdated)||sr)&&queuePostRenderEffect(()=>{kr&&invokeVNodeHook(kr,pn,un,nn),sr&&invokeDirectiveHook(un,nn,pn,"updated")},Rn)},Pn=(nn,un,pn,Rn,_n,or,Vn)=>{for(let Wn=0;Wn<un.length;Wn++){const Hn=nn[Wn],nr=un[Wn],sr=Hn.el&&(Hn.type===Fragment||!isSameVNodeType(Hn,nr)||Hn.shapeFlag&70)?Nt(Hn.el):pn;Zt(Hn,nr,sr,null,Rn,_n,or,Vn,!0)}},An=(nn,un,pn,Rn,_n)=>{if(un!==pn){if(un!==EMPTY_OBJ)for(const or in un)!isReservedProp(or)&&!(or in pn)&&xt(nn,or,un[or],null,_n,Rn);for(const or in pn){if(isReservedProp(or))continue;const Vn=pn[or],Wn=un[or];Vn!==Wn&&or!=="value"&&xt(nn,or,Wn,Vn,_n,Rn)}"value"in pn&&xt(nn,"value",un.value,pn.value,_n)}},cn=(nn,un,pn,Rn,_n,or,Vn,Wn,Hn)=>{const nr=un.el=nn?nn.el:kt(""),sr=un.anchor=nn?nn.anchor:kt("");let{patchFlag:pr,dynamicChildren:vr,slotScopeIds:kr}=un;kr&&(Wn=Wn?Wn.concat(kr):kr),nn==null?(st(nr,pn,Rn),st(sr,pn,Rn),kn(un.children||[],pn,sr,_n,or,Vn,Wn,Hn)):pr>0&&pr&64&&vr&&nn.dynamicChildren?(Pn(nn.dynamicChildren,vr,pn,_n,or,Vn,Wn),(un.key!=null||_n&&un===_n.subTree)&&traverseStaticChildren(nn,un,!0)):ir(nn,un,pn,sr,_n,or,Vn,Wn,Hn)},Ln=(nn,un,pn,Rn,_n,or,Vn,Wn,Hn)=>{un.slotScopeIds=Wn,nn==null?un.shapeFlag&512?_n.ctx.activate(un,pn,Rn,Vn,Hn):an(un,pn,Rn,_n,or,Vn,Hn):zn(nn,un,Hn)},an=(nn,un,pn,Rn,_n,or,Vn)=>{const Wn=nn.component=createComponentInstance(nn,Rn,_n);if(isKeepAlive(nn)&&(Wn.ctx.renderer=fr),setupComponent(Wn,!1,Vn),Wn.asyncDep){if(_n&&_n.registerDep(Wn,dn,Vn),!nn.el){const Hn=Wn.subTree=createVNode(Comment);Kt(null,Hn,un,pn)}}else dn(Wn,nn,un,pn,_n,or,Vn)},zn=(nn,un,pn)=>{const Rn=un.component=nn.component;if(shouldUpdateComponent(nn,un,pn))if(Rn.asyncDep&&!Rn.asyncResolved){Fn(Rn,un,pn);return}else Rn.next=un,Rn.update();else un.el=nn.el,Rn.vnode=un},dn=(nn,un,pn,Rn,_n,or,Vn)=>{const Wn=()=>{if(nn.isMounted){let{next:pr,bu:vr,u:kr,parent:si,vnode:ui}=nn;{const Ci=locateNonHydratedAsyncRoot(nn);if(Ci){pr&&(pr.el=ui.el,Fn(nn,pr,Vn)),Ci.asyncDep.then(()=>{nn.isUnmounted||Wn()});return}}let ii=pr,li;toggleRecurse(nn,!1),pr?(pr.el=ui.el,Fn(nn,pr,Vn)):pr=ui,vr&&invokeArrayFns(vr),(li=pr.props&&pr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(li,si,pr,ui),toggleRecurse(nn,!0);const Ei=renderComponentRoot(nn),wi=nn.subTree;nn.subTree=Ei,Zt(wi,Ei,Nt(wi.el),Fr(wi),nn,_n,or),pr.el=Ei.el,ii===null&&updateHOCHostEl(nn,Ei.el),kr&&queuePostRenderEffect(kr,_n),(li=pr.props&&pr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(li,si,pr,ui),_n)}else{let pr;const{el:vr,props:kr}=un,{bm:si,m:ui,parent:ii,root:li,type:Ei}=nn,wi=isAsyncWrapper(un);if(toggleRecurse(nn,!1),si&&invokeArrayFns(si),!wi&&(pr=kr&&kr.onVnodeBeforeMount)&&invokeVNodeHook(pr,ii,un),toggleRecurse(nn,!0),vr&&er){const Ci=()=>{nn.subTree=renderComponentRoot(nn),er(vr,nn.subTree,nn,_n,null)};wi&&Ei.__asyncHydrate?Ei.__asyncHydrate(vr,nn,Ci):Ci()}else{li.ce&&li.ce._injectChildStyle(Ei);const Ci=nn.subTree=renderComponentRoot(nn);Zt(null,Ci,pn,Rn,nn,_n,or),un.el=Ci.el}if(ui&&queuePostRenderEffect(ui,_n),!wi&&(pr=kr&&kr.onVnodeMounted)){const Ci=un;queuePostRenderEffect(()=>invokeVNodeHook(pr,ii,Ci),_n)}(un.shapeFlag&256||ii&&isAsyncWrapper(ii.vnode)&&ii.vnode.shapeFlag&256)&&nn.a&&queuePostRenderEffect(nn.a,_n),nn.isMounted=!0,un=pn=Rn=null}};nn.scope.on();const Hn=nn.effect=new ReactiveEffect(Wn);nn.scope.off();const nr=nn.update=Hn.run.bind(Hn),sr=nn.job=Hn.runIfDirty.bind(Hn);sr.i=nn,sr.id=nn.uid,Hn.scheduler=()=>queueJob(sr),toggleRecurse(nn,!0),nr()},Fn=(nn,un,pn)=>{un.component=nn;const Rn=nn.vnode.props;nn.vnode=un,nn.next=null,updateProps(nn,un.props,Rn,pn),updateSlots(nn,un.children,pn),pauseTracking(),flushPreFlushCbs(nn),resetTracking()},ir=(nn,un,pn,Rn,_n,or,Vn,Wn,Hn=!1)=>{const nr=nn&&nn.children,sr=nn?nn.shapeFlag:0,pr=un.children,{patchFlag:vr,shapeFlag:kr}=un;if(vr>0){if(vr&128){Jn(nr,pr,pn,Rn,_n,or,Vn,Wn,Hn);return}else if(vr&256){tr(nr,pr,pn,Rn,_n,or,Vn,Wn,Hn);return}}kr&8?(sr&16&&ar(nr,_n,or),pr!==nr&&Rt(pn,pr)):sr&16?kr&16?Jn(nr,pr,pn,Rn,_n,or,Vn,Wn,Hn):ar(nr,_n,or,!0):(sr&8&&Rt(pn,""),kr&16&&kn(pr,pn,Rn,_n,or,Vn,Wn,Hn))},tr=(nn,un,pn,Rn,_n,or,Vn,Wn,Hn)=>{nn=nn||EMPTY_ARR,un=un||EMPTY_ARR;const nr=nn.length,sr=un.length,pr=Math.min(nr,sr);let vr;for(vr=0;vr<pr;vr++){const kr=un[vr]=Hn?cloneIfMounted(un[vr]):normalizeVNode(un[vr]);Zt(nn[vr],kr,pn,null,_n,or,Vn,Wn,Hn)}nr>sr?ar(nn,_n,or,!0,!1,pr):kn(un,pn,Rn,_n,or,Vn,Wn,Hn,pr)},Jn=(nn,un,pn,Rn,_n,or,Vn,Wn,Hn)=>{let nr=0;const sr=un.length;let pr=nn.length-1,vr=sr-1;for(;nr<=pr&&nr<=vr;){const kr=nn[nr],si=un[nr]=Hn?cloneIfMounted(un[nr]):normalizeVNode(un[nr]);if(isSameVNodeType(kr,si))Zt(kr,si,pn,null,_n,or,Vn,Wn,Hn);else break;nr++}for(;nr<=pr&&nr<=vr;){const kr=nn[pr],si=un[vr]=Hn?cloneIfMounted(un[vr]):normalizeVNode(un[vr]);if(isSameVNodeType(kr,si))Zt(kr,si,pn,null,_n,or,Vn,Wn,Hn);else break;pr--,vr--}if(nr>pr){if(nr<=vr){const kr=vr+1,si=kr<sr?un[kr].el:Rn;for(;nr<=vr;)Zt(null,un[nr]=Hn?cloneIfMounted(un[nr]):normalizeVNode(un[nr]),pn,si,_n,or,Vn,Wn,Hn),nr++}}else if(nr>vr)for(;nr<=pr;)lr(nn[nr],_n,or,!0),nr++;else{const kr=nr,si=nr,ui=new Map;for(nr=si;nr<=vr;nr++){const En=un[nr]=Hn?cloneIfMounted(un[nr]):normalizeVNode(un[nr]);En.key!=null&&ui.set(En.key,nr)}let ii,li=0;const Ei=vr-si+1;let wi=!1,Ci=0;const Lr=new Array(Ei);for(nr=0;nr<Ei;nr++)Lr[nr]=0;for(nr=kr;nr<=pr;nr++){const En=nn[nr];if(li>=Ei){lr(En,_n,or,!0);continue}let Un;if(En.key!=null)Un=ui.get(En.key);else for(ii=si;ii<=vr;ii++)if(Lr[ii-si]===0&&isSameVNodeType(En,un[ii])){Un=ii;break}Un===void 0?lr(En,_n,or,!0):(Lr[Un-si]=nr+1,Un>=Ci?Ci=Un:wi=!0,Zt(En,un[Un],pn,null,_n,or,Vn,Wn,Hn),li++)}const Tn=wi?getSequence(Lr):EMPTY_ARR;for(ii=Tn.length-1,nr=Ei-1;nr>=0;nr--){const En=si+nr,Un=un[En],qn=En+1<sr?un[En+1].el:Rn;Lr[nr]===0?Zt(null,Un,pn,qn,_n,or,Vn,Wn,Hn):wi&&(ii<0||nr!==Tn[ii]?hr(Un,pn,qn,2):ii--)}}},hr=(nn,un,pn,Rn,_n=null)=>{const{el:or,type:Vn,transition:Wn,children:Hn,shapeFlag:nr}=nn;if(nr&6){hr(nn.component.subTree,un,pn,Rn);return}if(nr&128){nn.suspense.move(un,pn,Rn);return}if(nr&64){Vn.move(nn,un,pn,fr);return}if(Vn===Fragment){st(or,un,pn);for(let pr=0;pr<Hn.length;pr++)hr(Hn[pr],un,pn,Rn);st(nn.anchor,un,pn);return}if(Vn===Static){on(nn,un,pn);return}if(Rn!==2&&nr&1&&Wn)if(Rn===0)Wn.beforeEnter(or),st(or,un,pn),queuePostRenderEffect(()=>Wn.enter(or),_n);else{const{leave:pr,delayLeave:vr,afterLeave:kr}=Wn,si=()=>{nn.ctx.isUnmounted?_t(or):st(or,un,pn)},ui=()=>{pr(or,()=>{si(),kr&&kr()})};vr?vr(or,si,ui):ui()}else st(or,un,pn)},lr=(nn,un,pn,Rn=!1,_n=!1)=>{const{type:or,props:Vn,ref:Wn,children:Hn,dynamicChildren:nr,shapeFlag:sr,patchFlag:pr,dirs:vr,cacheIndex:kr}=nn;if(pr===-2&&(_n=!1),Wn!=null&&(pauseTracking(),setRef(Wn,null,pn,nn,!0),resetTracking()),kr!=null&&(un.renderCache[kr]=void 0),sr&256){un.ctx.deactivate(nn);return}const si=sr&1&&vr,ui=!isAsyncWrapper(nn);let ii;if(ui&&(ii=Vn&&Vn.onVnodeBeforeUnmount)&&invokeVNodeHook(ii,un,nn),sr&6)Er(nn.component,pn,Rn);else{if(sr&128){nn.suspense.unmount(pn,Rn);return}si&&invokeDirectiveHook(nn,null,un,"beforeUnmount"),sr&64?nn.type.remove(nn,un,pn,fr,Rn):nr&&!nr.hasOnce&&(or!==Fragment||pr>0&&pr&64)?ar(nr,un,pn,!1,!0):(or===Fragment&&pr&384||!_n&&sr&16)&&ar(Hn,un,pn),Rn&&cr(nn)}(ui&&(ii=Vn&&Vn.onVnodeUnmounted)||si)&&queuePostRenderEffect(()=>{ii&&invokeVNodeHook(ii,un,nn),si&&invokeDirectiveHook(nn,null,un,"unmounted")},pn)},cr=nn=>{const{type:un,el:pn,anchor:Rn,transition:_n}=nn;if(un===Fragment){Cr(pn,Rn);return}if(un===Static){rn(nn);return}const or=()=>{_t(pn),_n&&!_n.persisted&&_n.afterLeave&&_n.afterLeave()};if(nn.shapeFlag&1&&_n&&!_n.persisted){const{leave:Vn,delayLeave:Wn}=_n,Hn=()=>Vn(pn,or);Wn?Wn(nn.el,or,Hn):Hn()}else or()},Cr=(nn,un)=>{let pn;for(;nn!==un;)pn=Bt(nn),_t(nn),nn=pn;_t(un)},Er=(nn,un,pn)=>{const{bum:Rn,scope:_n,job:or,subTree:Vn,um:Wn,m:Hn,a:nr,parent:sr,slots:{__:pr}}=nn;invalidateMount(Hn),invalidateMount(nr),Rn&&invokeArrayFns(Rn),sr&&isArray$2(pr)&&pr.forEach(vr=>{sr.renderCache[vr]=void 0}),_n.stop(),or&&(or.flags|=8,lr(Vn,nn,un,pn)),Wn&&queuePostRenderEffect(Wn,un),queuePostRenderEffect(()=>{nn.isUnmounted=!0},un),un&&un.pendingBranch&&!un.isUnmounted&&nn.asyncDep&&!nn.asyncResolved&&nn.suspenseId===un.pendingId&&(un.deps--,un.deps===0&&un.resolve())},ar=(nn,un,pn,Rn=!1,_n=!1,or=0)=>{for(let Vn=or;Vn<nn.length;Vn++)lr(nn[Vn],un,pn,Rn,_n)},Fr=nn=>{if(nn.shapeFlag&6)return Fr(nn.component.subTree);if(nn.shapeFlag&128)return nn.suspense.next();const un=Bt(nn.anchor||nn.el),pn=un&&un[TeleportEndKey];return pn?Bt(pn):un};let mr=!1;const xr=(nn,un,pn)=>{nn==null?un._vnode&&lr(un._vnode,null,null,!0):Zt(un._vnode||null,nn,un,null,null,null,pn),un._vnode=nn,mr||(mr=!0,flushPreFlushCbs(),flushPostFlushCbs(),mr=!1)},fr={p:Zt,um:lr,m:hr,r:cr,mt:an,mc:kn,pc:ir,pbc:Pn,n:Fr,o:nt};let gr,er;return rt&&([gr,er]=rt(fr)),{render:xr,hydrate:gr,createApp:createAppAPI(xr,gr)}}function resolveChildrenNamespace({type:nt,props:rt},it){return it==="svg"&&nt==="foreignObject"||it==="mathml"&&nt==="annotation-xml"&&rt&&rt.encoding&&rt.encoding.includes("html")?void 0:it}function toggleRecurse({effect:nt,job:rt},it){it?(nt.flags|=32,rt.flags|=4):(nt.flags&=-33,rt.flags&=-5)}function needTransition(nt,rt){return(!nt||nt&&!nt.pendingBranch)&&rt&&!rt.persisted}function traverseStaticChildren(nt,rt,it=!1){const st=nt.children,_t=rt.children;if(isArray$2(st)&&isArray$2(_t))for(let xt=0;xt<st.length;xt++){const Et=st[xt];let kt=_t[xt];kt.shapeFlag&1&&!kt.dynamicChildren&&((kt.patchFlag<=0||kt.patchFlag===32)&&(kt=_t[xt]=cloneIfMounted(_t[xt]),kt.el=Et.el),!it&&kt.patchFlag!==-2&&traverseStaticChildren(Et,kt)),kt.type===Text&&(kt.el=Et.el),kt.type===Comment&&!kt.el&&(kt.el=Et.el)}}function getSequence(nt){const rt=nt.slice(),it=[0];let st,_t,xt,Et,kt;const Lt=nt.length;for(st=0;st<Lt;st++){const It=nt[st];if(It!==0){if(_t=it[it.length-1],nt[_t]<It){rt[st]=_t,it.push(st);continue}for(xt=0,Et=it.length-1;xt<Et;)kt=xt+Et>>1,nt[it[kt]]<It?xt=kt+1:Et=kt;It<nt[it[xt]]&&(xt>0&&(rt[st]=it[xt-1]),it[xt]=st)}}for(xt=it.length,Et=it[xt-1];xt-- >0;)it[xt]=Et,Et=rt[Et];return it}function locateNonHydratedAsyncRoot(nt){const rt=nt.subTree.component;if(rt)return rt.asyncDep&&!rt.asyncResolved?rt:locateNonHydratedAsyncRoot(rt)}function invalidateMount(nt){if(nt)for(let rt=0;rt<nt.length;rt++)nt[rt].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch$1(nt,rt,it){return doWatch(nt,rt,it)}function doWatch(nt,rt,it=EMPTY_OBJ){const{immediate:st,deep:_t,flush:xt,once:Et}=it,kt=extend$3({},it),Lt=rt&&st||!rt&&xt!=="post";let It;if(isInSSRComponentSetup){if(xt==="sync"){const Ft=useSSRContext();It=Ft.__watcherHandles||(Ft.__watcherHandles=[])}else if(!Lt){const Ft=()=>{};return Ft.stop=NOOP,Ft.resume=NOOP,Ft.pause=NOOP,Ft}}const Rt=currentInstance;kt.call=(Ft,Yt,Zt)=>callWithAsyncErrorHandling(Ft,Rt,Yt,Zt);let Nt=!1;xt==="post"?kt.scheduler=Ft=>{queuePostRenderEffect(Ft,Rt&&Rt.suspense)}:xt!=="sync"&&(Nt=!0,kt.scheduler=(Ft,Yt)=>{Yt?Ft():queueJob(Ft)}),kt.augmentJob=Ft=>{rt&&(Ft.flags|=4),Nt&&(Ft.flags|=2,Rt&&(Ft.id=Rt.uid,Ft.i=Rt))};const Bt=watch$2(nt,rt,kt);return isInSSRComponentSetup&&(It?It.push(Bt):Lt&&Bt()),Bt}function instanceWatch(nt,rt,it){const st=this.proxy,_t=isString(nt)?nt.includes(".")?createPathGetter(st,nt):()=>st[nt]:nt.bind(st,st);let xt;isFunction$1(rt)?xt=rt:(xt=rt.handler,it=rt);const Et=setCurrentInstance(this),kt=doWatch(_t,xt.bind(st),it);return Et(),kt}function createPathGetter(nt,rt){const it=rt.split(".");return()=>{let st=nt;for(let _t=0;_t<it.length&&st;_t++)st=st[it[_t]];return st}}const getModelModifiers=(nt,rt)=>rt==="modelValue"||rt==="model-value"?nt.modelModifiers:nt[`${rt}Modifiers`]||nt[`${camelize(rt)}Modifiers`]||nt[`${hyphenate(rt)}Modifiers`];function emit(nt,rt,...it){if(nt.isUnmounted)return;const st=nt.vnode.props||EMPTY_OBJ;let _t=it;const xt=rt.startsWith("update:"),Et=xt&&getModelModifiers(st,rt.slice(7));Et&&(Et.trim&&(_t=it.map(Rt=>isString(Rt)?Rt.trim():Rt)),Et.number&&(_t=it.map(looseToNumber)));let kt,Lt=st[kt=toHandlerKey(rt)]||st[kt=toHandlerKey(camelize(rt))];!Lt&&xt&&(Lt=st[kt=toHandlerKey(hyphenate(rt))]),Lt&&callWithAsyncErrorHandling(Lt,nt,6,_t);const It=st[kt+"Once"];if(It){if(!nt.emitted)nt.emitted={};else if(nt.emitted[kt])return;nt.emitted[kt]=!0,callWithAsyncErrorHandling(It,nt,6,_t)}}function normalizeEmitsOptions(nt,rt,it=!1){const st=rt.emitsCache,_t=st.get(nt);if(_t!==void 0)return _t;const xt=nt.emits;let Et={},kt=!1;if(!isFunction$1(nt)){const Lt=It=>{const Rt=normalizeEmitsOptions(It,rt,!0);Rt&&(kt=!0,extend$3(Et,Rt))};!it&&rt.mixins.length&&rt.mixins.forEach(Lt),nt.extends&&Lt(nt.extends),nt.mixins&&nt.mixins.forEach(Lt)}return!xt&&!kt?(isObject$3(nt)&&st.set(nt,null),null):(isArray$2(xt)?xt.forEach(Lt=>Et[Lt]=null):extend$3(Et,xt),isObject$3(nt)&&st.set(nt,Et),Et)}function isEmitListener(nt,rt){return!nt||!isOn(rt)?!1:(rt=rt.slice(2).replace(/Once$/,""),hasOwn(nt,rt[0].toLowerCase()+rt.slice(1))||hasOwn(nt,hyphenate(rt))||hasOwn(nt,rt))}function markAttrsAccessed(){}function renderComponentRoot(nt){const{type:rt,vnode:it,proxy:st,withProxy:_t,propsOptions:[xt],slots:Et,attrs:kt,emit:Lt,render:It,renderCache:Rt,props:Nt,data:Bt,setupState:Ft,ctx:Yt,inheritAttrs:Zt}=nt,Wt=setCurrentRenderingInstance(nt);let Kt,Jt;try{if(it.shapeFlag&4){const rn=_t||st,ln=rn;Kt=normalizeVNode(It.call(ln,rn,Rt,Nt,Ft,Bt,Yt)),Jt=kt}else{const rn=rt;Kt=normalizeVNode(rn.length>1?rn(Nt,{attrs:kt,slots:Et,emit:Lt}):rn(Nt,null)),Jt=rt.props?kt:getFunctionalFallthrough(kt)}}catch(rn){blockStack.length=0,handleError$1(rn,nt,1),Kt=createVNode(Comment)}let on=Kt;if(Jt&&Zt!==!1){const rn=Object.keys(Jt),{shapeFlag:ln}=on;rn.length&&ln&7&&(xt&&rn.some(isModelListener)&&(Jt=filterModelListeners(Jt,xt)),on=cloneVNode(on,Jt,!1,!0))}return it.dirs&&(on=cloneVNode(on,null,!1,!0),on.dirs=on.dirs?on.dirs.concat(it.dirs):it.dirs),it.transition&&setTransitionHooks(on,it.transition),Kt=on,setCurrentRenderingInstance(Wt),Kt}const getFunctionalFallthrough=nt=>{let rt;for(const it in nt)(it==="class"||it==="style"||isOn(it))&&((rt||(rt={}))[it]=nt[it]);return rt},filterModelListeners=(nt,rt)=>{const it={};for(const st in nt)(!isModelListener(st)||!(st.slice(9)in rt))&&(it[st]=nt[st]);return it};function shouldUpdateComponent(nt,rt,it){const{props:st,children:_t,component:xt}=nt,{props:Et,children:kt,patchFlag:Lt}=rt,It=xt.emitsOptions;if(rt.dirs||rt.transition)return!0;if(it&&Lt>=0){if(Lt&1024)return!0;if(Lt&16)return st?hasPropsChanged(st,Et,It):!!Et;if(Lt&8){const Rt=rt.dynamicProps;for(let Nt=0;Nt<Rt.length;Nt++){const Bt=Rt[Nt];if(Et[Bt]!==st[Bt]&&!isEmitListener(It,Bt))return!0}}}else return(_t||kt)&&(!kt||!kt.$stable)?!0:st===Et?!1:st?Et?hasPropsChanged(st,Et,It):!0:!!Et;return!1}function hasPropsChanged(nt,rt,it){const st=Object.keys(rt);if(st.length!==Object.keys(nt).length)return!0;for(let _t=0;_t<st.length;_t++){const xt=st[_t];if(rt[xt]!==nt[xt]&&!isEmitListener(it,xt))return!0}return!1}function updateHOCHostEl({vnode:nt,parent:rt},it){for(;rt;){const st=rt.subTree;if(st.suspense&&st.suspense.activeBranch===nt&&(st.el=nt.el),st===nt)(nt=rt.vnode).el=it,rt=rt.parent;else break}}const isSuspense=nt=>nt.__isSuspense;function queueEffectWithSuspense(nt,rt){rt&&rt.pendingBranch?isArray$2(nt)?rt.effects.push(...nt):rt.effects.push(nt):queuePostFlushCb(nt)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(nt=!1){blockStack.push(currentBlock=nt?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(nt,rt=!1){isBlockTreeEnabled+=nt,nt<0&&currentBlock&&rt&&(currentBlock.hasOnce=!0)}function setupBlock(nt){return nt.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(nt),nt}function createElementBlock(nt,rt,it,st,_t,xt){return setupBlock(createBaseVNode(nt,rt,it,st,_t,xt,!0))}function createBlock(nt,rt,it,st,_t){return setupBlock(createVNode(nt,rt,it,st,_t,!0))}function isVNode(nt){return nt?nt.__v_isVNode===!0:!1}function isSameVNodeType(nt,rt){return nt.type===rt.type&&nt.key===rt.key}const normalizeKey=({key:nt})=>nt!=null?nt:null,normalizeRef=({ref:nt,ref_key:rt,ref_for:it})=>(typeof nt=="number"&&(nt=""+nt),nt!=null?isString(nt)||isRef(nt)||isFunction$1(nt)?{i:currentRenderingInstance,r:nt,k:rt,f:!!it}:nt:null);function createBaseVNode(nt,rt=null,it=null,st=0,_t=null,xt=nt===Fragment?0:1,Et=!1,kt=!1){const Lt={__v_isVNode:!0,__v_skip:!0,type:nt,props:rt,key:rt&&normalizeKey(rt),ref:rt&&normalizeRef(rt),scopeId:currentScopeId,slotScopeIds:null,children:it,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:xt,patchFlag:st,dynamicProps:_t,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return kt?(normalizeChildren(Lt,it),xt&128&&nt.normalize(Lt)):it&&(Lt.shapeFlag|=isString(it)?8:16),isBlockTreeEnabled>0&&!Et&&currentBlock&&(Lt.patchFlag>0||xt&6)&&Lt.patchFlag!==32&&currentBlock.push(Lt),Lt}const createVNode=_createVNode;function _createVNode(nt,rt=null,it=null,st=0,_t=null,xt=!1){if((!nt||nt===NULL_DYNAMIC_COMPONENT)&&(nt=Comment),isVNode(nt)){const kt=cloneVNode(nt,rt,!0);return it&&normalizeChildren(kt,it),isBlockTreeEnabled>0&&!xt&&currentBlock&&(kt.shapeFlag&6?currentBlock[currentBlock.indexOf(nt)]=kt:currentBlock.push(kt)),kt.patchFlag=-2,kt}if(isClassComponent(nt)&&(nt=nt.__vccOpts),rt){rt=guardReactiveProps(rt);let{class:kt,style:Lt}=rt;kt&&!isString(kt)&&(rt.class=normalizeClass(kt)),isObject$3(Lt)&&(isProxy(Lt)&&!isArray$2(Lt)&&(Lt=extend$3({},Lt)),rt.style=normalizeStyle(Lt))}const Et=isString(nt)?1:isSuspense(nt)?128:isTeleport(nt)?64:isObject$3(nt)?4:isFunction$1(nt)?2:0;return createBaseVNode(nt,rt,it,st,_t,Et,xt,!0)}function guardReactiveProps(nt){return nt?isProxy(nt)||isInternalObject(nt)?extend$3({},nt):nt:null}function cloneVNode(nt,rt,it=!1,st=!1){const{props:_t,ref:xt,patchFlag:Et,children:kt,transition:Lt}=nt,It=rt?mergeProps(_t||{},rt):_t,Rt={__v_isVNode:!0,__v_skip:!0,type:nt.type,props:It,key:It&&normalizeKey(It),ref:rt&&rt.ref?it&&xt?isArray$2(xt)?xt.concat(normalizeRef(rt)):[xt,normalizeRef(rt)]:normalizeRef(rt):xt,scopeId:nt.scopeId,slotScopeIds:nt.slotScopeIds,children:kt,target:nt.target,targetStart:nt.targetStart,targetAnchor:nt.targetAnchor,staticCount:nt.staticCount,shapeFlag:nt.shapeFlag,patchFlag:rt&&nt.type!==Fragment?Et===-1?16:Et|16:Et,dynamicProps:nt.dynamicProps,dynamicChildren:nt.dynamicChildren,appContext:nt.appContext,dirs:nt.dirs,transition:Lt,component:nt.component,suspense:nt.suspense,ssContent:nt.ssContent&&cloneVNode(nt.ssContent),ssFallback:nt.ssFallback&&cloneVNode(nt.ssFallback),el:nt.el,anchor:nt.anchor,ctx:nt.ctx,ce:nt.ce};return Lt&&st&&setTransitionHooks(Rt,Lt.clone(Rt)),Rt}function createTextVNode(nt=" ",rt=0){return createVNode(Text,null,nt,rt)}function createCommentVNode(nt="",rt=!1){return rt?(openBlock(),createBlock(Comment,null,nt)):createVNode(Comment,null,nt)}function normalizeVNode(nt){return nt==null||typeof nt=="boolean"?createVNode(Comment):isArray$2(nt)?createVNode(Fragment,null,nt.slice()):isVNode(nt)?cloneIfMounted(nt):createVNode(Text,null,String(nt))}function cloneIfMounted(nt){return nt.el===null&&nt.patchFlag!==-1||nt.memo?nt:cloneVNode(nt)}function normalizeChildren(nt,rt){let it=0;const{shapeFlag:st}=nt;if(rt==null)rt=null;else if(isArray$2(rt))it=16;else if(typeof rt=="object")if(st&65){const _t=rt.default;_t&&(_t._c&&(_t._d=!1),normalizeChildren(nt,_t()),_t._c&&(_t._d=!0));return}else{it=32;const _t=rt._;!_t&&!isInternalObject(rt)?rt._ctx=currentRenderingInstance:_t===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?rt._=1:(rt._=2,nt.patchFlag|=1024))}else isFunction$1(rt)?(rt={default:rt,_ctx:currentRenderingInstance},it=32):(rt=String(rt),st&64?(it=16,rt=[createTextVNode(rt)]):it=8);nt.children=rt,nt.shapeFlag|=it}function mergeProps(...nt){const rt={};for(let it=0;it<nt.length;it++){const st=nt[it];for(const _t in st)if(_t==="class")rt.class!==st.class&&(rt.class=normalizeClass([rt.class,st.class]));else if(_t==="style")rt.style=normalizeStyle([rt.style,st.style]);else if(isOn(_t)){const xt=rt[_t],Et=st[_t];Et&&xt!==Et&&!(isArray$2(xt)&&xt.includes(Et))&&(rt[_t]=xt?[].concat(xt,Et):Et)}else _t!==""&&(rt[_t]=st[_t])}return rt}function invokeVNodeHook(nt,rt,it,st=null){callWithAsyncErrorHandling(nt,rt,7,[it,st])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(nt,rt,it){const st=nt.type,_t=(rt?rt.appContext:nt.appContext)||emptyAppContext,xt={uid:uid++,vnode:nt,type:st,parent:rt,appContext:_t,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:rt?rt.provides:Object.create(_t.provides),ids:rt?rt.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(st,_t),emitsOptions:normalizeEmitsOptions(st,_t),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:st.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:it,suspenseId:it?it.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return xt.ctx={_:xt},xt.root=rt?rt.root:xt,xt.emit=emit.bind(null,xt),nt.ce&&nt.ce(xt),xt}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const nt=getGlobalThis(),rt=(it,st)=>{let _t;return(_t=nt[it])||(_t=nt[it]=[]),_t.push(st),xt=>{_t.length>1?_t.forEach(Et=>Et(xt)):_t[0](xt)}};internalSetCurrentInstance=rt("__VUE_INSTANCE_SETTERS__",it=>currentInstance=it),setInSSRSetupState=rt("__VUE_SSR_SETTERS__",it=>isInSSRComponentSetup=it)}const setCurrentInstance=nt=>{const rt=currentInstance;return internalSetCurrentInstance(nt),nt.scope.on(),()=>{nt.scope.off(),internalSetCurrentInstance(rt)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(nt){return nt.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(nt,rt=!1,it=!1){rt&&setInSSRSetupState(rt);const{props:st,children:_t}=nt.vnode,xt=isStatefulComponent(nt);initProps(nt,st,xt,rt),initSlots(nt,_t,it||rt);const Et=xt?setupStatefulComponent(nt,rt):void 0;return rt&&setInSSRSetupState(!1),Et}function setupStatefulComponent(nt,rt){const it=nt.type;nt.accessCache=Object.create(null),nt.proxy=new Proxy(nt.ctx,PublicInstanceProxyHandlers);const{setup:st}=it;if(st){pauseTracking();const _t=nt.setupContext=st.length>1?createSetupContext(nt):null,xt=setCurrentInstance(nt),Et=callWithErrorHandling(st,nt,0,[nt.props,_t]),kt=isPromise(Et);if(resetTracking(),xt(),(kt||nt.sp)&&!isAsyncWrapper(nt)&&markAsyncBoundary(nt),kt){if(Et.then(unsetCurrentInstance,unsetCurrentInstance),rt)return Et.then(Lt=>{handleSetupResult(nt,Lt,rt)}).catch(Lt=>{handleError$1(Lt,nt,0)});nt.asyncDep=Et}else handleSetupResult(nt,Et,rt)}else finishComponentSetup(nt,rt)}function handleSetupResult(nt,rt,it){isFunction$1(rt)?nt.type.__ssrInlineRender?nt.ssrRender=rt:nt.render=rt:isObject$3(rt)&&(nt.setupState=proxyRefs(rt)),finishComponentSetup(nt,it)}let compile$1;function finishComponentSetup(nt,rt,it){const st=nt.type;if(!nt.render){if(!rt&&compile$1&&!st.render){const _t=st.template||resolveMergedOptions(nt).template;if(_t){const{isCustomElement:xt,compilerOptions:Et}=nt.appContext.config,{delimiters:kt,compilerOptions:Lt}=st,It=extend$3(extend$3({isCustomElement:xt,delimiters:kt},Et),Lt);st.render=compile$1(_t,It)}}nt.render=st.render||NOOP}{const _t=setCurrentInstance(nt);pauseTracking();try{applyOptions(nt)}finally{resetTracking(),_t()}}}const attrsProxyHandlers={get(nt,rt){return track(nt,"get",""),nt[rt]}};function createSetupContext(nt){const rt=it=>{nt.exposed=it||{}};return{attrs:new Proxy(nt.attrs,attrsProxyHandlers),slots:nt.slots,emit:nt.emit,expose:rt}}function getComponentPublicInstance(nt){return nt.exposed?nt.exposeProxy||(nt.exposeProxy=new Proxy(proxyRefs(markRaw(nt.exposed)),{get(rt,it){if(it in rt)return rt[it];if(it in publicPropertiesMap)return publicPropertiesMap[it](nt)},has(rt,it){return it in rt||it in publicPropertiesMap}})):nt.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=nt=>nt.replace(classifyRE,rt=>rt.toUpperCase()).replace(/[-_]/g,"");function getComponentName(nt,rt=!0){return isFunction$1(nt)?nt.displayName||nt.name:nt.name||rt&&nt.__name}function formatComponentName(nt,rt,it=!1){let st=getComponentName(rt);if(!st&&rt.__file){const _t=rt.__file.match(/([^/\\]+)\.\w+$/);_t&&(st=_t[1])}if(!st&&nt&&nt.parent){const _t=xt=>{for(const Et in xt)if(xt[Et]===rt)return Et};st=_t(nt.components||nt.parent.type.components)||_t(nt.appContext.components)}return st?classify(st):it?"App":"Anonymous"}function isClassComponent(nt){return isFunction$1(nt)&&"__vccOpts"in nt}const computed=(nt,rt)=>computed$1(nt,rt,isInSSRComponentSetup),version$2="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$1=typeof window<"u"&&window.trustedTypes;if(tt$1)try{policy=tt$1.createPolicy("vue",{createHTML:nt=>nt})}catch{}const unsafeToTrustedHTML=policy?nt=>policy.createHTML(nt):nt=>nt,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(nt,rt,it)=>{rt.insertBefore(nt,it||null)},remove:nt=>{const rt=nt.parentNode;rt&&rt.removeChild(nt)},createElement:(nt,rt,it,st)=>{const _t=rt==="svg"?doc.createElementNS(svgNS,nt):rt==="mathml"?doc.createElementNS(mathmlNS,nt):it?doc.createElement(nt,{is:it}):doc.createElement(nt);return nt==="select"&&st&&st.multiple!=null&&_t.setAttribute("multiple",st.multiple),_t},createText:nt=>doc.createTextNode(nt),createComment:nt=>doc.createComment(nt),setText:(nt,rt)=>{nt.nodeValue=rt},setElementText:(nt,rt)=>{nt.textContent=rt},parentNode:nt=>nt.parentNode,nextSibling:nt=>nt.nextSibling,querySelector:nt=>doc.querySelector(nt),setScopeId(nt,rt){nt.setAttribute(rt,"")},insertStaticContent(nt,rt,it,st,_t,xt){const Et=it?it.previousSibling:rt.lastChild;if(_t&&(_t===xt||_t.nextSibling))for(;rt.insertBefore(_t.cloneNode(!0),it),!(_t===xt||!(_t=_t.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(st==="svg"?`<svg>${nt}</svg>`:st==="mathml"?`<math>${nt}</math>`:nt);const kt=templateContainer.content;if(st==="svg"||st==="mathml"){const Lt=kt.firstChild;for(;Lt.firstChild;)kt.appendChild(Lt.firstChild);kt.removeChild(Lt)}rt.insertBefore(kt,it)}return[Et?Et.nextSibling:rt.firstChild,it?it.previousSibling:rt.lastChild]}},vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};function patchClass(nt,rt,it){const st=nt[vtcKey];st&&(rt=(rt?[rt,...st]:[...st]).join(" ")),rt==null?nt.removeAttribute("class"):it?nt.setAttribute("class",rt):nt.className=rt}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(nt,rt,it){const st=nt.style,_t=isString(it);let xt=!1;if(it&&!_t){if(rt)if(isString(rt))for(const Et of rt.split(";")){const kt=Et.slice(0,Et.indexOf(":")).trim();it[kt]==null&&setStyle$1(st,kt,"")}else for(const Et in rt)it[Et]==null&&setStyle$1(st,Et,"");for(const Et in it)Et==="display"&&(xt=!0),setStyle$1(st,Et,it[Et])}else if(_t){if(rt!==it){const Et=st[CSS_VAR_TEXT];Et&&(it+=";"+Et),st.cssText=it,xt=displayRE.test(it)}}else rt&&nt.removeAttribute("style");vShowOriginalDisplay in nt&&(nt[vShowOriginalDisplay]=xt?st.display:"",nt[vShowHidden]&&(st.display="none"))}const importantRE=/\s*!important$/;function setStyle$1(nt,rt,it){if(isArray$2(it))it.forEach(st=>setStyle$1(nt,rt,st));else if(it==null&&(it=""),rt.startsWith("--"))nt.setProperty(rt,it);else{const st=autoPrefix(nt,rt);importantRE.test(it)?nt.setProperty(hyphenate(st),it.replace(importantRE,""),"important"):nt[st]=it}}const prefixes$1=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(nt,rt){const it=prefixCache[rt];if(it)return it;let st=camelize(rt);if(st!=="filter"&&st in nt)return prefixCache[rt]=st;st=capitalize(st);for(let _t=0;_t<prefixes$1.length;_t++){const xt=prefixes$1[_t]+st;if(xt in nt)return prefixCache[rt]=xt}return rt}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(nt,rt,it,st,_t,xt=isSpecialBooleanAttr(rt)){st&&rt.startsWith("xlink:")?it==null?nt.removeAttributeNS(xlinkNS,rt.slice(6,rt.length)):nt.setAttributeNS(xlinkNS,rt,it):it==null||xt&&!includeBooleanAttr(it)?nt.removeAttribute(rt):nt.setAttribute(rt,xt?"":isSymbol$1(it)?String(it):it)}function patchDOMProp(nt,rt,it,st,_t){if(rt==="innerHTML"||rt==="textContent"){it!=null&&(nt[rt]=rt==="innerHTML"?unsafeToTrustedHTML(it):it);return}const xt=nt.tagName;if(rt==="value"&&xt!=="PROGRESS"&&!xt.includes("-")){const kt=xt==="OPTION"?nt.getAttribute("value")||"":nt.value,Lt=it==null?nt.type==="checkbox"?"on":"":String(it);(kt!==Lt||!("_value"in nt))&&(nt.value=Lt),it==null&&nt.removeAttribute(rt),nt._value=it;return}let Et=!1;if(it===""||it==null){const kt=typeof nt[rt];kt==="boolean"?it=includeBooleanAttr(it):it==null&&kt==="string"?(it="",Et=!0):kt==="number"&&(it=0,Et=!0)}try{nt[rt]=it}catch{}Et&&nt.removeAttribute(_t||rt)}function addEventListener(nt,rt,it,st){nt.addEventListener(rt,it,st)}function removeEventListener(nt,rt,it,st){nt.removeEventListener(rt,it,st)}const veiKey=Symbol("_vei");function patchEvent(nt,rt,it,st,_t=null){const xt=nt[veiKey]||(nt[veiKey]={}),Et=xt[rt];if(st&&Et)Et.value=st;else{const[kt,Lt]=parseName(rt);if(st){const It=xt[rt]=createInvoker(st,_t);addEventListener(nt,kt,It,Lt)}else Et&&(removeEventListener(nt,kt,Et,Lt),xt[rt]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(nt){let rt;if(optionsModifierRE.test(nt)){rt={};let st;for(;st=nt.match(optionsModifierRE);)nt=nt.slice(0,nt.length-st[0].length),rt[st[0].toLowerCase()]=!0}return[nt[2]===":"?nt.slice(3):hyphenate(nt.slice(2)),rt]}let cachedNow=0;const p$3=Promise.resolve(),getNow=()=>cachedNow||(p$3.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(nt,rt){const it=st=>{if(!st._vts)st._vts=Date.now();else if(st._vts<=it.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(st,it.value),rt,5,[st])};return it.value=nt,it.attached=getNow(),it}function patchStopImmediatePropagation(nt,rt){if(isArray$2(rt)){const it=nt.stopImmediatePropagation;return nt.stopImmediatePropagation=()=>{it.call(nt),nt._stopped=!0},rt.map(st=>_t=>!_t._stopped&&st&&st(_t))}else return rt}const isNativeOn=nt=>nt.charCodeAt(0)===111&&nt.charCodeAt(1)===110&&nt.charCodeAt(2)>96&&nt.charCodeAt(2)<123,patchProp=(nt,rt,it,st,_t,xt)=>{const Et=_t==="svg";rt==="class"?patchClass(nt,st,Et):rt==="style"?patchStyle(nt,it,st):isOn(rt)?isModelListener(rt)||patchEvent(nt,rt,it,st,xt):(rt[0]==="."?(rt=rt.slice(1),!0):rt[0]==="^"?(rt=rt.slice(1),!1):shouldSetAsProp(nt,rt,st,Et))?(patchDOMProp(nt,rt,st),!nt.tagName.includes("-")&&(rt==="value"||rt==="checked"||rt==="selected")&&patchAttr(nt,rt,st,Et,xt,rt!=="value")):nt._isVueCE&&(/[A-Z]/.test(rt)||!isString(st))?patchDOMProp(nt,camelize(rt),st,xt,rt):(rt==="true-value"?nt._trueValue=st:rt==="false-value"&&(nt._falseValue=st),patchAttr(nt,rt,st,Et))};function shouldSetAsProp(nt,rt,it,st){if(st)return!!(rt==="innerHTML"||rt==="textContent"||rt in nt&&isNativeOn(rt)&&isFunction$1(it));if(rt==="spellcheck"||rt==="draggable"||rt==="translate"||rt==="autocorrect"||rt==="form"||rt==="list"&&nt.tagName==="INPUT"||rt==="type"&&nt.tagName==="TEXTAREA")return!1;if(rt==="width"||rt==="height"){const _t=nt.tagName;if(_t==="IMG"||_t==="VIDEO"||_t==="CANVAS"||_t==="SOURCE")return!1}return isNativeOn(rt)&&isString(it)?!1:rt in nt}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(nt,rt,it){const st=defineComponent(nt,rt);isPlainObject$1(st)&&extend$3(st,rt);class _t extends VueElement{constructor(Et){super(st,Et,it)}}return _t.def=st,_t}const BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(rt,it={},st=createApp){super(),this._def=rt,this._props=it,this._createApp=st,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&st!==createApp?this._root=this.shadowRoot:rt.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let rt=this;for(;rt=rt&&(rt.parentNode||rt.host);)if(rt instanceof VueElement){this._parent=rt;break}this._instance||(this._resolved?(this._setParent(),this._update()):rt&&rt._pendingResolve?this._pendingResolve=rt._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(rt=this._parent){rt&&(this._instance.parent=rt._instance,this._instance.provides=rt._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let st=0;st<this.attributes.length;st++)this._setAttr(this.attributes[st].name);this._ob=new MutationObserver(st=>{for(const _t of st)this._setAttr(_t.attributeName)}),this._ob.observe(this,{attributes:!0});const rt=(st,_t=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:xt,styles:Et}=st;let kt;if(xt&&!isArray$2(xt))for(const Lt in xt){const It=xt[Lt];(It===Number||It&&It.type===Number)&&(Lt in this._props&&(this._props[Lt]=toNumber$1(this._props[Lt])),(kt||(kt=Object.create(null)))[camelize(Lt)]=!0)}this._numberProps=kt,_t&&this._resolveProps(st),this.shadowRoot&&this._applyStyles(Et),this._mount(st)},it=this._def.__asyncLoader;it?this._pendingResolve=it().then(st=>rt(this._def=st,!0)):rt(this._def)}_mount(rt){this._app=this._createApp(rt),rt.configureApp&&rt.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const it=this._instance&&this._instance.exposed;if(!!it)for(const st in it)hasOwn(this,st)||Object.defineProperty(this,st,{get:()=>unref(it[st])})}_resolveProps(rt){const{props:it}=rt,st=isArray$2(it)?it:Object.keys(it||{});for(const _t of Object.keys(this))_t[0]!=="_"&&st.includes(_t)&&this._setProp(_t,this[_t]);for(const _t of st.map(camelize))Object.defineProperty(this,_t,{get(){return this._getProp(_t)},set(xt){this._setProp(_t,xt,!0,!0)}})}_setAttr(rt){if(rt.startsWith("data-v-"))return;const it=this.hasAttribute(rt);let st=it?this.getAttribute(rt):REMOVAL;const _t=camelize(rt);it&&this._numberProps&&this._numberProps[_t]&&(st=toNumber$1(st)),this._setProp(_t,st,!1,!0)}_getProp(rt){return this._props[rt]}_setProp(rt,it,st=!0,_t=!1){if(it!==this._props[rt]&&(it===REMOVAL?delete this._props[rt]:(this._props[rt]=it,rt==="key"&&this._app&&(this._app._ceVNode.key=it)),_t&&this._instance&&this._update(),st)){const xt=this._ob;xt&&xt.disconnect(),it===!0?this.setAttribute(hyphenate(rt),""):typeof it=="string"||typeof it=="number"?this.setAttribute(hyphenate(rt),it+""):it||this.removeAttribute(hyphenate(rt)),xt&&xt.observe(this,{attributes:!0})}}_update(){render$4(this._createVNode(),this._root)}_createVNode(){const rt={};this.shadowRoot||(rt.onVnodeMounted=rt.onVnodeUpdated=this._renderSlots.bind(this));const it=createVNode(this._def,extend$3(rt,this._props));return this._instance||(it.ce=st=>{this._instance=st,st.ce=this,st.isCE=!0;const _t=(xt,Et)=>{this.dispatchEvent(new CustomEvent(xt,isPlainObject$1(Et[0])?extend$3({detail:Et},Et[0]):{detail:Et}))};st.emit=(xt,...Et)=>{_t(xt,Et),hyphenate(xt)!==xt&&_t(hyphenate(xt),Et)},this._setParent()}),it}_applyStyles(rt,it){if(!rt)return;if(it){if(it===this._def||this._styleChildren.has(it))return;this._styleChildren.add(it)}const st=this._nonce;for(let _t=rt.length-1;_t>=0;_t--){const xt=document.createElement("style");st&&xt.setAttribute("nonce",st),xt.textContent=rt[_t],this.shadowRoot.prepend(xt)}}_parseSlots(){const rt=this._slots={};let it;for(;it=this.firstChild;){const st=it.nodeType===1&&it.getAttribute("slot")||"default";(rt[st]||(rt[st]=[])).push(it),this.removeChild(it)}}_renderSlots(){const rt=(this._teleportTarget||this).querySelectorAll("slot"),it=this._instance.type.__scopeId;for(let st=0;st<rt.length;st++){const _t=rt[st],xt=_t.getAttribute("name")||"default",Et=this._slots[xt],kt=_t.parentNode;if(Et)for(const Lt of Et){if(it&&Lt.nodeType===1){const It=it+"-s",Rt=document.createTreeWalker(Lt,1);Lt.setAttribute(It,"");let Nt;for(;Nt=Rt.nextNode();)Nt.setAttribute(It,"")}kt.insertBefore(Lt,_t)}else for(;_t.firstChild;)kt.insertBefore(_t.firstChild,_t);kt.removeChild(_t)}}_injectChildStyle(rt){this._applyStyles(rt.styles,rt)}_removeChildStyle(rt){}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:nt=>nt.stopPropagation(),prevent:nt=>nt.preventDefault(),self:nt=>nt.target!==nt.currentTarget,ctrl:nt=>!nt.ctrlKey,shift:nt=>!nt.shiftKey,alt:nt=>!nt.altKey,meta:nt=>!nt.metaKey,left:nt=>"button"in nt&&nt.button!==0,middle:nt=>"button"in nt&&nt.button!==1,right:nt=>"button"in nt&&nt.button!==2,exact:(nt,rt)=>systemModifiers.some(it=>nt[`${it}Key`]&&!rt.includes(it))},withModifiers=(nt,rt)=>{const it=nt._withMods||(nt._withMods={}),st=rt.join(".");return it[st]||(it[st]=(_t,...xt)=>{for(let Et=0;Et<rt.length;Et++){const kt=modifierGuards[rt[Et]];if(kt&&kt(_t,rt))return}return nt(_t,...xt)})},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render$4=(...nt)=>{ensureRenderer().render(...nt)},createApp=(...nt)=>{const rt=ensureRenderer().createApp(...nt),{mount:it}=rt;return rt.mount=st=>{const _t=normalizeContainer(st);if(!_t)return;const xt=rt._component;!isFunction$1(xt)&&!xt.render&&!xt.template&&(xt.template=_t.innerHTML),_t.nodeType===1&&(_t.textContent="");const Et=it(_t,!1,resolveRootNamespace(_t));return _t instanceof Element&&(_t.removeAttribute("v-cloak"),_t.setAttribute("data-v-app","")),Et},rt};function resolveRootNamespace(nt){if(nt instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&nt instanceof MathMLElement)return"mathml"}function normalizeContainer(nt){return isString(nt)?document.querySelector(nt):nt}const light="";var basePath="";function setBasePath(nt){basePath=nt}function getBasePath(nt=""){if(!basePath){const rt=[...document.getElementsByTagName("script")],it=rt.find(st=>st.hasAttribute("data-shoelace"));if(it)setBasePath(it.getAttribute("data-shoelace"));else{const st=rt.find(xt=>/shoelace(\.min)?\.js($|\?)/.test(xt.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(xt.src));let _t="";st&&(_t=st.getAttribute("src")),setBasePath(_t.split("/").slice(0,-1).join("/"))}}return basePath.replace(/\/$/,"")+(nt?`/${nt.replace(/^\//,"")}`:"")}var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__knownSymbol=(nt,rt)=>(rt=Symbol[nt])?rt:Symbol.for("Symbol."+nt),__typeError=nt=>{throw TypeError(nt)},__defNormalProp=(nt,rt,it)=>rt in nt?__defProp(nt,rt,{enumerable:!0,configurable:!0,writable:!0,value:it}):nt[rt]=it,__spreadValues=(nt,rt)=>{for(var it in rt||(rt={}))__hasOwnProp.call(rt,it)&&__defNormalProp(nt,it,rt[it]);if(__getOwnPropSymbols)for(var it of __getOwnPropSymbols(rt))__propIsEnum.call(rt,it)&&__defNormalProp(nt,it,rt[it]);return nt},__spreadProps=(nt,rt)=>__defProps(nt,__getOwnPropDescs(rt)),__decorateClass=(nt,rt,it,st)=>{for(var _t=st>1?void 0:st?__getOwnPropDesc(rt,it):rt,xt=nt.length-1,Et;xt>=0;xt--)(Et=nt[xt])&&(_t=(st?Et(rt,it,_t):Et(_t))||_t);return st&&_t&&__defProp(rt,it,_t),_t},__accessCheck=(nt,rt,it)=>rt.has(nt)||__typeError("Cannot "+it),__privateGet=(nt,rt,it)=>(__accessCheck(nt,rt,"read from private field"),it?it.call(nt):rt.get(nt)),__privateAdd=(nt,rt,it)=>rt.has(nt)?__typeError("Cannot add the same private member more than once"):rt instanceof WeakSet?rt.add(nt):rt.set(nt,it),__privateSet=(nt,rt,it,st)=>(__accessCheck(nt,rt,"write to private field"),st?st.call(nt,it):rt.set(nt,it),it),__await=function(nt,rt){this[0]=nt,this[1]=rt},__yieldStar=nt=>{var rt=nt[__knownSymbol("asyncIterator")],it=!1,st,_t={};return rt==null?(rt=nt[__knownSymbol("iterator")](),st=xt=>_t[xt]=Et=>rt[xt](Et)):(rt=rt.call(nt),st=xt=>_t[xt]=Et=>{if(it){if(it=!1,xt==="throw")throw Et;return Et}return it=!0,{done:!1,value:new __await(new Promise(kt=>{var Lt=rt[xt](Et);Lt instanceof Object||__typeError("Object expected"),kt(Lt)}),1)}}),_t[__knownSymbol("iterator")]=()=>_t,st("next"),"throw"in rt?st("throw"):_t.throw=xt=>{throw xt},"return"in rt&&st("return"),_t};const scriptRel="modulepreload",assetsURL=function(nt){return"/"+nt},seen={},__vitePreload=function(rt,it,st){if(!it||it.length===0)return rt();const _t=document.getElementsByTagName("link");return Promise.all(it.map(xt=>{if(xt=assetsURL(xt),xt in seen)return;seen[xt]=!0;const Et=xt.endsWith(".css"),kt=Et?'[rel="stylesheet"]':"";if(!!st)for(let Rt=_t.length-1;Rt>=0;Rt--){const Nt=_t[Rt];if(Nt.href===xt&&(!Et||Nt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${xt}"]${kt}`))return;const It=document.createElement("link");if(It.rel=Et?"stylesheet":scriptRel,Et||(It.as="script",It.crossOrigin=""),It.href=xt,document.head.appendChild(It),Et)return new Promise((Rt,Nt)=>{It.addEventListener("load",Rt),It.addEventListener("error",()=>Nt(new Error(`Unable to preload CSS for ${xt}`)))})})).then(()=>rt())};var e$9=typeof self<"u"?self:global;const t$4=typeof navigator<"u",i$9=t$4&&typeof HTMLImageElement>"u",n$8=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),s$4=e$9.Buffer,r$6=e$9.BigInt,a$3=!!s$4,o$a=nt=>nt;function l$4(nt,rt=o$a){if(n$8)try{return typeof require=="function"?Promise.resolve(rt(require(nt))):__vitePreload(()=>import(nt),[]).then(rt)}catch{console.warn(`Couldn't load ${nt}`)}}let h$4=e$9.fetch;const u$4=nt=>h$4=nt;if(!e$9.fetch){const nt=l$4("http",st=>st),rt=l$4("https",st=>st),it=(st,{headers:_t}={})=>new Promise(async(xt,Et)=>{let{port:kt,hostname:Lt,pathname:It,protocol:Rt,search:Nt}=new URL(st);const Bt={method:"GET",hostname:Lt,path:encodeURI(It)+Nt,headers:_t};kt!==""&&(Bt.port=Number(kt));const Ft=(Rt==="https:"?await rt:await nt).request(Bt,Yt=>{if(Yt.statusCode===301||Yt.statusCode===302){let Zt=new URL(Yt.headers.location,st).toString();return it(Zt,{headers:_t}).then(xt).catch(Et)}xt({status:Yt.statusCode,arrayBuffer:()=>new Promise(Zt=>{let Wt=[];Yt.on("data",Kt=>Wt.push(Kt)),Yt.on("end",()=>Zt(Buffer.concat(Wt)))})})});Ft.on("error",Et),Ft.end()});u$4(it)}function c$5(nt,rt,it){return rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}const f$5=nt=>p$2(nt)?void 0:nt,d$2=nt=>nt!==void 0;function p$2(nt){return nt===void 0||(nt instanceof Map?nt.size===0:Object.values(nt).filter(d$2).length===0)}function g$1(nt){let rt=new Error(nt);throw delete rt.stack,rt}function m$2(nt){return(nt=function(rt){for(;rt.endsWith("\0");)rt=rt.slice(0,-1);return rt}(nt).trim())===""?void 0:nt}function S$2(nt){let rt=function(it){let st=0;return it.ifd0.enabled&&(st+=1024),it.exif.enabled&&(st+=2048),it.makerNote&&(st+=2048),it.userComment&&(st+=1024),it.gps.enabled&&(st+=512),it.interop.enabled&&(st+=100),it.ifd1.enabled&&(st+=1024),st+2048}(nt);return nt.jfif.enabled&&(rt+=50),nt.xmp.enabled&&(rt+=2e4),nt.iptc.enabled&&(rt+=14e3),nt.icc.enabled&&(rt+=6e3),rt}const C$1=nt=>String.fromCharCode.apply(null,nt),y$3=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function b$1(nt){return y$3?y$3.decode(nt):a$3?Buffer.from(nt).toString("utf8"):decodeURIComponent(escape(C$1(nt)))}class I$1{static from(rt,it){return rt instanceof this&&rt.le===it?rt:new I$1(rt,void 0,void 0,it)}constructor(rt,it=0,st,_t){if(typeof _t=="boolean"&&(this.le=_t),Array.isArray(rt)&&(rt=new Uint8Array(rt)),rt===0)this.byteOffset=0,this.byteLength=0;else if(rt instanceof ArrayBuffer){st===void 0&&(st=rt.byteLength-it);let xt=new DataView(rt,it,st);this._swapDataView(xt)}else if(rt instanceof Uint8Array||rt instanceof DataView||rt instanceof I$1){st===void 0&&(st=rt.byteLength-it),(it+=rt.byteOffset)+st>rt.byteOffset+rt.byteLength&&g$1("Creating view outside of available memory in ArrayBuffer");let xt=new DataView(rt.buffer,it,st);this._swapDataView(xt)}else if(typeof rt=="number"){let xt=new DataView(new ArrayBuffer(rt));this._swapDataView(xt)}else g$1("Invalid input argument for BufferView: "+rt)}_swapArrayBuffer(rt){this._swapDataView(new DataView(rt))}_swapBuffer(rt){this._swapDataView(new DataView(rt.buffer,rt.byteOffset,rt.byteLength))}_swapDataView(rt){this.dataView=rt,this.buffer=rt.buffer,this.byteOffset=rt.byteOffset,this.byteLength=rt.byteLength}_lengthToEnd(rt){return this.byteLength-rt}set(rt,it,st=I$1){return rt instanceof DataView||rt instanceof I$1?rt=new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength):rt instanceof ArrayBuffer&&(rt=new Uint8Array(rt)),rt instanceof Uint8Array||g$1("BufferView.set(): Invalid data argument."),this.toUint8().set(rt,it),new st(this,it,rt.byteLength)}subarray(rt,it){return it=it||this._lengthToEnd(rt),new I$1(this,rt,it)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(rt,it){return new Uint8Array(this.buffer,this.byteOffset+rt,it)}getString(rt=0,it=this.byteLength){return b$1(this.getUint8Array(rt,it))}getLatin1String(rt=0,it=this.byteLength){let st=this.getUint8Array(rt,it);return C$1(st)}getUnicodeString(rt=0,it=this.byteLength){const st=[];for(let _t=0;_t<it&&rt+_t<this.byteLength;_t+=2)st.push(this.getUint16(rt+_t));return C$1(st)}getInt8(rt){return this.dataView.getInt8(rt)}getUint8(rt){return this.dataView.getUint8(rt)}getInt16(rt,it=this.le){return this.dataView.getInt16(rt,it)}getInt32(rt,it=this.le){return this.dataView.getInt32(rt,it)}getUint16(rt,it=this.le){return this.dataView.getUint16(rt,it)}getUint32(rt,it=this.le){return this.dataView.getUint32(rt,it)}getFloat32(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getFloat64(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getFloat(rt,it=this.le){return this.dataView.getFloat32(rt,it)}getDouble(rt,it=this.le){return this.dataView.getFloat64(rt,it)}getUintBytes(rt,it,st){switch(it){case 1:return this.getUint8(rt,st);case 2:return this.getUint16(rt,st);case 4:return this.getUint32(rt,st);case 8:return this.getUint64&&this.getUint64(rt,st)}}getUint(rt,it,st){switch(it){case 8:return this.getUint8(rt,st);case 16:return this.getUint16(rt,st);case 32:return this.getUint32(rt,st);case 64:return this.getUint64&&this.getUint64(rt,st)}}toString(rt){return this.dataView.toString(rt,this.constructor.name)}ensureChunk(){}}function P$1(nt,rt){g$1(`${nt} '${rt}' was not loaded, try using full build of exifr.`)}class k$1 extends Map{constructor(rt){super(),this.kind=rt}get(rt,it){return this.has(rt)||P$1(this.kind,rt),it&&(rt in it||function(st,_t){g$1(`Unknown ${st} '${_t}'.`)}(this.kind,rt),it[rt].enabled||P$1(this.kind,rt)),super.get(rt)}keyList(){return Array.from(this.keys())}}var w$1=new k$1("file parser"),T$1=new k$1("segment parser"),A$1=new k$1("file reader");function D(nt,rt){return typeof nt=="string"?O(nt,rt):t$4&&!i$9&&nt instanceof HTMLImageElement?O(nt.src,rt):nt instanceof Uint8Array||nt instanceof ArrayBuffer||nt instanceof DataView?new I$1(nt):t$4&&nt instanceof Blob?x$2(nt,rt,"blob",R$1):void g$1("Invalid input argument")}function O(nt,rt){return(it=nt).startsWith("data:")||it.length>1e4?v$1(nt,rt,"base64"):n$8&&nt.includes("://")?x$2(nt,rt,"url",M$1):n$8?v$1(nt,rt,"fs"):t$4?x$2(nt,rt,"url",M$1):void g$1("Invalid input argument");var it}async function x$2(nt,rt,it,st){return A$1.has(it)?v$1(nt,rt,it):st?async function(_t,xt){let Et=await xt(_t);return new I$1(Et)}(nt,st):void g$1(`Parser ${it} is not loaded`)}async function v$1(nt,rt,it){let st=new(A$1.get(it))(nt,rt);return await st.read(),st}const M$1=nt=>h$4(nt).then(rt=>rt.arrayBuffer()),R$1=nt=>new Promise((rt,it)=>{let st=new FileReader;st.onloadend=()=>rt(st.result||new ArrayBuffer),st.onerror=it,st.readAsArrayBuffer(nt)});class L$3 extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function U(nt,rt,it){let st=new L$3;for(let[_t,xt]of it)st.set(_t,xt);if(Array.isArray(rt))for(let _t of rt)nt.set(_t,st);else nt.set(rt,st);return st}function F(nt,rt,it){let st,_t=nt.get(rt);for(st of it)_t.set(st[0],st[1])}const E$1=new Map,B$1=new Map,N$1=new Map,G=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],V$1=["jfif","xmp","icc","iptc","ihdr"],z$1=["tiff",...V$1],H$1=["ifd0","ifd1","exif","gps","interop"],j$1=[...z$1,...H$1],W=["makerNote","userComment"],K$1=["translateKeys","translateValues","reviveValues","multiSegment"],X=[...K$1,"sanitize","mergeOutput","silentErrors"];class _$2{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Y extends _$2{get needed(){return this.enabled||this.deps.size>0}constructor(rt,it,st,_t){if(super(),c$5(this,"enabled",!1),c$5(this,"skip",new Set),c$5(this,"pick",new Set),c$5(this,"deps",new Set),c$5(this,"translateKeys",!1),c$5(this,"translateValues",!1),c$5(this,"reviveValues",!1),this.key=rt,this.enabled=it,this.parse=this.enabled,this.applyInheritables(_t),this.canBeFiltered=H$1.includes(rt),this.canBeFiltered&&(this.dict=E$1.get(rt)),st!==void 0)if(Array.isArray(st))this.parse=this.enabled=!0,this.canBeFiltered&&st.length>0&&this.translateTagSet(st,this.pick);else if(typeof st=="object"){if(this.enabled=!0,this.parse=st.parse!==!1,this.canBeFiltered){let{pick:xt,skip:Et}=st;xt&&xt.length>0&&this.translateTagSet(xt,this.pick),Et&&Et.length>0&&this.translateTagSet(Et,this.skip)}this.applyInheritables(st)}else st===!0||st===!1?this.parse=this.enabled=st:g$1(`Invalid options argument: ${st}`)}applyInheritables(rt){let it,st;for(it of K$1)st=rt[it],st!==void 0&&(this[it]=st)}translateTagSet(rt,it){if(this.dict){let st,_t,{tagKeys:xt,tagValues:Et}=this.dict;for(st of rt)typeof st=="string"?(_t=Et.indexOf(st),_t===-1&&(_t=xt.indexOf(Number(st))),_t!==-1&&it.add(Number(xt[_t]))):it.add(st)}else for(let st of rt)it.add(st)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ee(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ee(this.pick,this.deps)}}var $$1={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},J=new Map;class q extends _$2{static useCached(rt){let it=J.get(rt);return it!==void 0||(it=new this(rt),J.set(rt,it)),it}constructor(rt){super(),rt===!0?this.setupFromTrue():rt===void 0?this.setupFromUndefined():Array.isArray(rt)?this.setupFromArray(rt):typeof rt=="object"?this.setupFromObject(rt):g$1(`Invalid options argument ${rt}`),this.firstChunkSize===void 0&&(this.firstChunkSize=t$4?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W)this[rt]=$$1[rt];for(rt of j$1)this[rt]=new Y(rt,$$1[rt],void 0,this)}setupFromTrue(){let rt;for(rt of G)this[rt]=$$1[rt];for(rt of X)this[rt]=$$1[rt];for(rt of W)this[rt]=!0;for(rt of j$1)this[rt]=new Y(rt,!0,void 0,this)}setupFromArray(rt){let it;for(it of G)this[it]=$$1[it];for(it of X)this[it]=$$1[it];for(it of W)this[it]=$$1[it];for(it of j$1)this[it]=new Y(it,!1,void 0,this);this.setupGlobalFilters(rt,void 0,H$1)}setupFromObject(rt){let it;for(it of(H$1.ifd0=H$1.ifd0||H$1.image,H$1.ifd1=H$1.ifd1||H$1.thumbnail,Object.assign(this,rt),G))this[it]=Z(rt[it],$$1[it]);for(it of X)this[it]=Z(rt[it],$$1[it]);for(it of W)this[it]=Z(rt[it],$$1[it]);for(it of z$1)this[it]=new Y(it,$$1[it],rt[it],this);for(it of H$1)this[it]=new Y(it,$$1[it],rt[it],this.tiff);this.setupGlobalFilters(rt.pick,rt.skip,H$1,j$1),rt.tiff===!0?this.batchEnableWithBool(H$1,!0):rt.tiff===!1?this.batchEnableWithUserValue(H$1,rt):Array.isArray(rt.tiff)?this.setupGlobalFilters(rt.tiff,void 0,H$1):typeof rt.tiff=="object"&&this.setupGlobalFilters(rt.tiff.pick,rt.tiff.skip,H$1)}batchEnableWithBool(rt,it){for(let st of rt)this[st].enabled=it}batchEnableWithUserValue(rt,it){for(let st of rt){let _t=it[st];this[st].enabled=_t!==!1&&_t!==void 0}}setupGlobalFilters(rt,it,st,_t=st){if(rt&&rt.length){for(let Et of _t)this[Et].enabled=!1;let xt=Q(rt,st);for(let[Et,kt]of xt)ee(this[Et].pick,kt),this[Et].enabled=!0}else if(it&&it.length){let xt=Q(it,st);for(let[Et,kt]of xt)ee(this[Et].skip,kt)}}filterNestedSegmentTags(){let{ifd0:rt,exif:it,xmp:st,iptc:_t,icc:xt}=this;this.makerNote?it.deps.add(37500):it.skip.add(37500),this.userComment?it.deps.add(37510):it.skip.add(37510),st.enabled||rt.skip.add(700),_t.enabled||rt.skip.add(33723),xt.enabled||rt.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:rt,exif:it,gps:st,interop:_t}=this;_t.needed&&(it.deps.add(40965),rt.deps.add(40965)),it.needed&&rt.deps.add(34665),st.needed&&rt.deps.add(34853),this.tiff.enabled=H$1.some(xt=>this[xt].enabled===!0)||this.makerNote||this.userComment;for(let xt of H$1)this[xt].finalizeFilters()}get onlyTiff(){return!V$1.map(rt=>this[rt].enabled).some(rt=>rt===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let rt of z$1)this[rt].enabled&&!T$1.has(rt)&&P$1("segment parser",rt)}}function Q(nt,rt){let it,st,_t,xt,Et=[];for(_t of rt){for(xt of(it=E$1.get(_t),st=[],it))(nt.includes(xt[0])||nt.includes(xt[1]))&&st.push(xt[0]);st.length&&Et.push([_t,st])}return Et}function Z(nt,rt){return nt!==void 0?nt:rt!==void 0?rt:void 0}function ee(nt,rt){for(let it of rt)nt.add(it)}c$5(q,"default",$$1);class te{constructor(rt){c$5(this,"parsers",{}),c$5(this,"output",{}),c$5(this,"errors",[]),c$5(this,"pushToErrors",it=>this.errors.push(it)),this.options=q.useCached(rt)}async read(rt){this.file=await D(rt,this.options)}setup(){if(this.fileParser)return;let{file:rt}=this,it=rt.getUint16(0);for(let[st,_t]of w$1)if(_t.canHandle(rt,it))return this.fileParser=new _t(this.options,this.file,this.parsers),rt[st]=!0;this.file.close&&this.file.close(),g$1("Unknown file format")}async parse(){let{output:rt,errors:it}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),it.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&it.length>0&&(rt.errors=it),f$5(rt)}async executeParsers(){let{output:rt}=this;await this.fileParser.parse();let it=Object.values(this.parsers).map(async st=>{let _t=await st.parse();st.assignToOutput(rt,_t)});this.options.silentErrors&&(it=it.map(st=>st.catch(this.pushToErrors))),await Promise.all(it)}async extractThumbnail(){this.setup();let{options:rt,file:it}=this,st=T$1.get("tiff",rt);var _t;if(it.tiff?_t={start:0,type:"tiff"}:it.jpeg&&(_t=await this.fileParser.getOrFindSegment("tiff")),_t===void 0)return;let xt=await this.fileParser.ensureSegmentChunk(_t),Et=this.parsers.tiff=new st(xt,rt,it),kt=await Et.extractThumbnail();return it.close&&it.close(),kt}}async function ie(nt,rt){let it=new te(rt);return await it.read(nt),it.parse()}var ne=Object.freeze({__proto__:null,parse:ie,Exifr:te,fileParsers:w$1,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j$1,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q});class se{constructor(rt,it,st){c$5(this,"errors",[]),c$5(this,"ensureSegmentChunk",async _t=>{let xt=_t.start,Et=_t.size||65536;if(this.file.chunked)if(this.file.available(xt,Et))_t.chunk=this.file.subarray(xt,Et);else try{_t.chunk=await this.file.readChunk(xt,Et)}catch(kt){g$1(`Couldn't read segment: ${JSON.stringify(_t)}. ${kt.message}`)}else this.file.byteLength>xt+Et?_t.chunk=this.file.subarray(xt,Et):_t.size===void 0?_t.chunk=this.file.subarray(xt):g$1("Segment unreachable: "+JSON.stringify(_t));return _t.chunk}),this.extendOptions&&this.extendOptions(rt),this.options=rt,this.file=it,this.parsers=st}injectSegment(rt,it){this.options[rt].enabled&&this.createParser(rt,it)}createParser(rt,it){let st=new(T$1.get(rt))(it,this.options,this.file);return this.parsers[rt]=st}createParsers(rt){for(let it of rt){let{type:st,chunk:_t}=it,xt=this.options[st];if(xt&&xt.enabled){let Et=this.parsers[st];Et&&Et.append||Et||this.createParser(st,_t)}}}async readSegments(rt){let it=rt.map(this.ensureSegmentChunk);await Promise.all(it)}}class re$1{static findPosition(rt,it){let st=rt.getUint16(it+2)+2,_t=typeof this.headerLength=="function"?this.headerLength(rt,it,st):this.headerLength,xt=it+_t,Et=st-_t;return{offset:it,length:st,headerLength:_t,start:xt,size:Et,end:xt+Et}}static parse(rt,it={}){return new this(rt,new q({[this.type]:it}),rt).parse()}normalizeInput(rt){return rt instanceof I$1?rt:new I$1(rt)}constructor(rt,it={},st){c$5(this,"errors",[]),c$5(this,"raw",new Map),c$5(this,"handleError",_t=>{if(!this.options.silentErrors)throw _t;this.errors.push(_t.message)}),this.chunk=this.normalizeInput(rt),this.file=st,this.type=this.constructor.type,this.globalOptions=this.options=it,this.localOptions=it[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(rt,it){let st=N$1.get(it),_t=B$1.get(it),xt=E$1.get(it),Et=this.options[it],kt=Et.reviveValues&&!!st,Lt=Et.translateValues&&!!_t,It=Et.translateKeys&&!!xt,Rt={};for(let[Nt,Bt]of rt)kt&&st.has(Nt)?Bt=st.get(Nt)(Bt):Lt&&_t.has(Nt)&&(Bt=this.translateValue(Bt,_t.get(Nt))),It&&xt.has(Nt)&&(Nt=xt.get(Nt)||Nt),Rt[Nt]=Bt;return Rt}translateValue(rt,it){return it[rt]||it.DEFAULT||rt}assignToOutput(rt,it){this.assignObjectToOutput(rt,this.constructor.type,it)}assignObjectToOutput(rt,it,st){if(this.globalOptions.mergeOutput)return Object.assign(rt,st);rt[it]?Object.assign(rt[it],st):rt[it]=st}}c$5(re$1,"headerLength",4),c$5(re$1,"type",void 0),c$5(re$1,"multiSegment",!1),c$5(re$1,"canHandle",()=>!1);function ae(nt){return nt===192||nt===194||nt===196||nt===219||nt===221||nt===218||nt===254}function oe(nt){return nt>=224&&nt<=239}function le(nt,rt,it){for(let[st,_t]of T$1)if(_t.canHandle(nt,rt,it))return st}class he extends se{constructor(...rt){super(...rt),c$5(this,"appSegments",[]),c$5(this,"jpegSegments",[]),c$5(this,"unknownSegments",[])}static canHandle(rt,it){return it===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(rt){rt===!0?(this.findAll=!0,this.wanted=new Set(T$1.keyList())):(rt=rt===void 0?T$1.keyList().filter(it=>this.options[it].enabled):rt.filter(it=>this.options[it].enabled&&T$1.has(it)),this.findAll=!1,this.remaining=new Set(rt),this.wanted=new Set(rt)),this.unfinishedMultiSegment=!1}async findAppSegments(rt=0,it){this.setupSegmentFinderArgs(it);let{file:st,findAll:_t,wanted:xt,remaining:Et}=this;if(!_t&&this.file.chunked&&(_t=Array.from(xt).some(kt=>{let Lt=T$1.get(kt),It=this.options[kt];return Lt.multiSegment&&It.multiSegment}),_t&&await this.file.readWhole()),rt=this.findAppSegmentsInRange(rt,st.byteLength),!this.options.onlyTiff&&st.chunked){let kt=!1;for(;Et.size>0&&!kt&&(st.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:Lt}=st,It=this.appSegments.some(Rt=>!this.file.available(Rt.offset||Rt.start,Rt.length||Rt.size));if(kt=rt>Lt&&!It?!await st.readNextChunk(rt):!await st.readNextChunk(Lt),(rt=this.findAppSegmentsInRange(rt,st.byteLength))===void 0)return}}}findAppSegmentsInRange(rt,it){it-=2;let st,_t,xt,Et,kt,Lt,{file:It,findAll:Rt,wanted:Nt,remaining:Bt,options:Ft}=this;for(;rt<it;rt++)if(It.getUint8(rt)===255){if(st=It.getUint8(rt+1),oe(st)){if(_t=It.getUint16(rt+2),xt=le(It,rt,_t),xt&&Nt.has(xt)&&(Et=T$1.get(xt),kt=Et.findPosition(It,rt),Lt=Ft[xt],kt.type=xt,this.appSegments.push(kt),!Rt&&(Et.multiSegment&&Lt.multiSegment?(this.unfinishedMultiSegment=kt.chunkNumber<kt.chunkCount,this.unfinishedMultiSegment||Bt.delete(xt)):Bt.delete(xt),Bt.size===0)))break;Ft.recordUnknownSegments&&(kt=re$1.findPosition(It,rt),kt.marker=st,this.unknownSegments.push(kt)),rt+=_t+1}else if(ae(st)){if(_t=It.getUint16(rt+2),st===218&&Ft.stopAfterSos!==!1)return;Ft.recordJpegSegments&&this.jpegSegments.push({offset:rt,length:_t,marker:st}),rt+=_t+1}}return rt}mergeMultiSegments(){if(!this.appSegments.some(it=>it.multiSegment))return;let rt=function(it,st){let _t,xt,Et,kt=new Map;for(let Lt=0;Lt<it.length;Lt++)_t=it[Lt],xt=_t[st],kt.has(xt)?Et=kt.get(xt):kt.set(xt,Et=[]),Et.push(_t);return Array.from(kt)}(this.appSegments,"type");this.mergedAppSegments=rt.map(([it,st])=>{let _t=T$1.get(it,this.options);return _t.handleMultiSegments?{type:it,chunk:_t.handleMultiSegments(st)}:st[0]})}getSegment(rt){return this.appSegments.find(it=>it.type===rt)}async getOrFindSegment(rt){let it=this.getSegment(rt);return it===void 0&&(await this.findAppSegments(0,[rt]),it=this.getSegment(rt)),it}}c$5(he,"type","jpeg"),w$1.set("jpeg",he);const ue=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ce extends re$1{parseHeader(){var rt=this.chunk.getUint16();rt===18761?this.le=!0:rt===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(rt,it,st=new Map){let{pick:_t,skip:xt}=this.options[it];_t=new Set(_t);let Et=_t.size>0,kt=xt.size===0,Lt=this.chunk.getUint16(rt);rt+=2;for(let It=0;It<Lt;It++){let Rt=this.chunk.getUint16(rt);if(Et){if(_t.has(Rt)&&(st.set(Rt,this.parseTag(rt,Rt,it)),_t.delete(Rt),_t.size===0))break}else!kt&&xt.has(Rt)||st.set(Rt,this.parseTag(rt,Rt,it));rt+=12}return st}parseTag(rt,it,st){let{chunk:_t}=this,xt=_t.getUint16(rt+2),Et=_t.getUint32(rt+4),kt=ue[xt];if(kt*Et<=4?rt+=8:rt=_t.getUint32(rt+8),(xt<1||xt>13)&&g$1(`Invalid TIFF value type. block: ${st.toUpperCase()}, tag: ${it.toString(16)}, type: ${xt}, offset ${rt}`),rt>_t.byteLength&&g$1(`Invalid TIFF value offset. block: ${st.toUpperCase()}, tag: ${it.toString(16)}, type: ${xt}, offset ${rt} is outside of chunk size ${_t.byteLength}`),xt===1)return _t.getUint8Array(rt,Et);if(xt===2)return m$2(_t.getString(rt,Et));if(xt===7)return _t.getUint8Array(rt,Et);if(Et===1)return this.parseTagValue(xt,rt);{let Lt=new(function(Rt){switch(Rt){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(xt))(Et),It=kt;for(let Rt=0;Rt<Et;Rt++)Lt[Rt]=this.parseTagValue(xt,rt),rt+=It;return Lt}}parseTagValue(rt,it){let{chunk:st}=this;switch(rt){case 1:return st.getUint8(it);case 3:return st.getUint16(it);case 4:return st.getUint32(it);case 5:return st.getUint32(it)/st.getUint32(it+4);case 6:return st.getInt8(it);case 8:return st.getInt16(it);case 9:return st.getInt32(it);case 10:return st.getInt32(it)/st.getInt32(it+4);case 11:return st.getFloat(it);case 12:return st.getDouble(it);case 13:return st.getUint32(it);default:g$1(`Invalid tiff type ${rt}`)}}}class fe extends ce{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1165519206&&rt.getUint16(it+8)===0}async parse(){this.parseHeader();let{options:rt}=this;return rt.ifd0.enabled&&await this.parseIfd0Block(),rt.exif.enabled&&await this.safeParse("parseExifBlock"),rt.gps.enabled&&await this.safeParse("parseGpsBlock"),rt.interop.enabled&&await this.safeParse("parseInteropBlock"),rt.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(rt){let it=this[rt]();return it.catch!==void 0&&(it=it.catch(this.handleError)),it}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let rt=this.chunk.getUint16(this.ifd0Offset),it=this.ifd0Offset+2+12*rt;this.ifd1Offset=this.chunk.getUint32(it)}}parseBlock(rt,it){let st=new Map;return this[it]=st,this.parseTags(rt,it,st),st}async parseIfd0Block(){if(this.ifd0)return;let{file:rt}=this;this.findIfd0Offset(),this.ifd0Offset<8&&g$1("Malformed EXIF data"),!rt.chunked&&this.ifd0Offset>rt.byteLength&&g$1(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${rt.byteLength}`),rt.tiff&&await rt.ensureChunk(this.ifd0Offset,S$2(this.options));let it=this.parseBlock(this.ifd0Offset,"ifd0");return it.size!==0?(this.exifOffset=it.get(34665),this.interopOffset=it.get(40965),this.gpsOffset=it.get(34853),this.xmp=it.get(700),this.iptc=it.get(33723),this.icc=it.get(34675),this.options.sanitize&&(it.delete(34665),it.delete(40965),it.delete(34853),it.delete(700),it.delete(33723),it.delete(34675)),it):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,S$2(this.options));let rt=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=rt.get(40965)),this.makerNote=rt.get(37500),this.userComment=rt.get(37510),this.options.sanitize&&(rt.delete(40965),rt.delete(37500),rt.delete(37510)),this.unpack(rt,41728),this.unpack(rt,41729),rt}unpack(rt,it){let st=rt.get(it);st&&st.length===1&&rt.set(it,st[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let rt=this.parseBlock(this.gpsOffset,"gps");return rt&&rt.has(2)&&rt.has(4)&&(rt.set("latitude",de(...rt.get(2),rt.get(1))),rt.set("longitude",de(...rt.get(4),rt.get(3)))),rt}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(rt=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||rt))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let rt=this.ifd1.get(513),it=this.ifd1.get(514);return this.chunk.getUint8Array(rt,it)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let rt,it,st,_t={};for(it of H$1)if(rt=this[it],!p$2(rt))if(st=this.canTranslate?this.translateBlock(rt,it):Object.fromEntries(rt),this.options.mergeOutput){if(it==="ifd1")continue;Object.assign(_t,st)}else _t[it]=st;return this.makerNote&&(_t.makerNote=this.makerNote),this.userComment&&(_t.userComment=this.userComment),_t}assignToOutput(rt,it){if(this.globalOptions.mergeOutput)Object.assign(rt,it);else for(let[st,_t]of Object.entries(it))this.assignObjectToOutput(rt,st,_t)}}function de(nt,rt,it,st){var _t=nt+rt/60+it/3600;return st!=="S"&&st!=="W"||(_t*=-1),_t}c$5(fe,"type","tiff"),c$5(fe,"headerLength",10),T$1.set("tiff",fe);var pe=Object.freeze({__proto__:null,default:ne,Exifr:te,fileParsers:w$1,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j$1,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q,parse:ie});const ge={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},me=Object.assign({},ge,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Se(nt){let rt=new te(me);await rt.read(nt);let it=await rt.parse();if(it&&it.gps){let{latitude:st,longitude:_t}=it.gps;return{latitude:st,longitude:_t}}}const Ce=Object.assign({},ge,{tiff:!1,ifd1:!0,mergeOutput:!1});async function ye(nt){let rt=new te(Ce);await rt.read(nt);let it=await rt.extractThumbnail();return it&&a$3?s$4.from(it):it}async function be(nt){let rt=await this.thumbnail(nt);if(rt!==void 0){let it=new Blob([rt]);return URL.createObjectURL(it)}}const Ie=Object.assign({},ge,{firstChunkSize:4e4,ifd0:[274]});async function Pe(nt){let rt=new te(Ie);await rt.read(nt);let it=await rt.parse();if(it&&it.ifd0)return it.ifd0[274]}const ke=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let we=!0,Te=!0;if(typeof navigator=="object"){let nt=navigator.userAgent;if(nt.includes("iPad")||nt.includes("iPhone")){let rt=nt.match(/OS (\d+)_(\d+)/);if(rt){let[,it,st]=rt;we=Number(it)+.1*Number(st)<13.4,Te=!1}}else if(nt.includes("OS X 10")){let[,rt]=nt.match(/OS X 10[_.](\d+)/);we=Te=Number(rt)<15}if(nt.includes("Chrome/")){let[,rt]=nt.match(/Chrome\/(\d+)/);we=Te=Number(rt)<81}else if(nt.includes("Firefox/")){let[,rt]=nt.match(/Firefox\/(\d+)/);we=Te=Number(rt)<77}}async function Ae(nt){let rt=await Pe(nt);return Object.assign({canvas:we,css:Te},ke[rt])}class De extends I$1{constructor(...rt){super(...rt),c$5(this,"ranges",new Oe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(rt,it,st){if(rt===0&&this.byteLength===0&&st){let _t=new DataView(st.buffer||st,st.byteOffset,st.byteLength);this._swapDataView(_t)}else{let _t=rt+it;if(_t>this.byteLength){let{dataView:xt}=this._extend(_t);this._swapDataView(xt)}}}_extend(rt){let it;it=a$3?s$4.allocUnsafe(rt):new Uint8Array(rt);let st=new DataView(it.buffer,it.byteOffset,it.byteLength);return it.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:it,dataView:st}}subarray(rt,it,st=!1){return it=it||this._lengthToEnd(rt),st&&this._tryExtend(rt,it),this.ranges.add(rt,it),super.subarray(rt,it)}set(rt,it,st=!1){st&&this._tryExtend(it,rt.byteLength,rt);let _t=super.set(rt,it);return this.ranges.add(it,_t.byteLength),_t}async ensureChunk(rt,it){this.chunked&&(this.ranges.available(rt,it)||await this.readChunk(rt,it))}available(rt,it){return this.ranges.available(rt,it)}}class Oe{constructor(){c$5(this,"list",[])}get length(){return this.list.length}add(rt,it,st=0){let _t=rt+it,xt=this.list.filter(Et=>xe(rt,Et.offset,_t)||xe(rt,Et.end,_t));if(xt.length>0){rt=Math.min(rt,...xt.map(kt=>kt.offset)),_t=Math.max(_t,...xt.map(kt=>kt.end)),it=_t-rt;let Et=xt.shift();Et.offset=rt,Et.length=it,Et.end=_t,this.list=this.list.filter(kt=>!xt.includes(kt))}else this.list.push({offset:rt,length:it,end:_t})}available(rt,it){let st=rt+it;return this.list.some(_t=>_t.offset<=rt&&st<=_t.end)}}function xe(nt,rt,it){return nt<=rt&&rt<=it}class ve extends De{constructor(rt,it){super(0),c$5(this,"chunksRead",0),this.input=rt,this.options=it}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(rt=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let it=this.options.chunkSize,st=await this.readChunk(rt,it);return!!st&&st.byteLength===it}async readChunk(rt,it){if(this.chunksRead++,(it=this.safeWrapAddress(rt,it))!==0)return this._readChunk(rt,it)}safeWrapAddress(rt,it){return this.size!==void 0&&rt+it>this.size?Math.max(0,this.size-rt):it}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}A$1.set("blob",class extends ve{async readWhole(){this.chunked=!1;let nt=await R$1(this.input);this._swapArrayBuffer(nt)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(nt,rt){let it=rt?nt+rt:void 0,st=this.input.slice(nt,it),_t=await R$1(st);return this.set(_t,nt,!0)}});var Me=Object.freeze({__proto__:null,default:pe,Exifr:te,fileParsers:w$1,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j$1,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});A$1.set("url",class extends ve{async readWhole(){this.chunked=!1;let nt=await M$1(this.input);nt instanceof ArrayBuffer?this._swapArrayBuffer(nt):nt instanceof Uint8Array&&this._swapBuffer(nt)}async _readChunk(nt,rt){let it=rt?nt+rt-1:void 0,st=this.options.httpHeaders||{};(nt||it)&&(st.range=`bytes=${[nt,it].join("-")}`);let _t=await h$4(this.input,{headers:st}),xt=await _t.arrayBuffer(),Et=xt.byteLength;if(_t.status!==416)return Et!==rt&&(this.size=nt+Et),this.set(xt,nt,!0)}});I$1.prototype.getUint64=function(nt){let rt=this.getUint32(nt),it=this.getUint32(nt+4);return rt<1048575?rt<<32|it:typeof r$6!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),r$6(rt)<<r$6(32)|r$6(it)):void g$1("Trying to read 64b value but JS can only handle 53b numbers.")};class Re extends se{parseBoxes(rt=0){let it=[];for(;rt<this.file.byteLength-4;){let st=this.parseBoxHead(rt);if(it.push(st),st.length===0)break;rt+=st.length}return it}parseSubBoxes(rt){rt.boxes=this.parseBoxes(rt.start)}findBox(rt,it){return rt.boxes===void 0&&this.parseSubBoxes(rt),rt.boxes.find(st=>st.kind===it)}parseBoxHead(rt){let it=this.file.getUint32(rt),st=this.file.getString(rt+4,4),_t=rt+8;return it===1&&(it=this.file.getUint64(rt+8),_t+=8),{offset:rt,length:it,kind:st,start:_t}}parseBoxFullHead(rt){if(rt.version!==void 0)return;let it=this.file.getUint32(rt.start);rt.version=it>>24,rt.start+=4}}class Le extends Re{static canHandle(rt,it){if(it!==0)return!1;let st=rt.getUint16(2);if(st>50)return!1;let _t=16,xt=[];for(;_t<st;)xt.push(rt.getString(_t,4)),_t+=4;return xt.includes(this.type)}async parse(){let rt=this.file.getUint32(0),it=this.parseBoxHead(rt);for(;it.kind!=="meta";)rt+=it.length,await this.file.ensureChunk(rt,16),it=this.parseBoxHead(rt);await this.file.ensureChunk(it.offset,it.length),this.parseBoxFullHead(it),this.parseSubBoxes(it),this.options.icc.enabled&&await this.findIcc(it),this.options.tiff.enabled&&await this.findExif(it)}async registerSegment(rt,it,st){await this.file.ensureChunk(it,st);let _t=this.file.subarray(it,st);this.createParser(rt,_t)}async findIcc(rt){let it=this.findBox(rt,"iprp");if(it===void 0)return;let st=this.findBox(it,"ipco");if(st===void 0)return;let _t=this.findBox(st,"colr");_t!==void 0&&await this.registerSegment("icc",_t.offset+12,_t.length)}async findExif(rt){let it=this.findBox(rt,"iinf");if(it===void 0)return;let st=this.findBox(rt,"iloc");if(st===void 0)return;let _t=this.findExifLocIdInIinf(it),xt=this.findExtentInIloc(st,_t);if(xt===void 0)return;let[Et,kt]=xt;await this.file.ensureChunk(Et,kt);let Lt=4+this.file.getUint32(Et);Et+=Lt,kt-=Lt,await this.registerSegment("tiff",Et,kt)}findExifLocIdInIinf(rt){this.parseBoxFullHead(rt);let it,st,_t,xt,Et=rt.start,kt=this.file.getUint16(Et);for(Et+=2;kt--;){if(it=this.parseBoxHead(Et),this.parseBoxFullHead(it),st=it.start,it.version>=2&&(_t=it.version===3?4:2,xt=this.file.getString(st+_t+2,4),xt==="Exif"))return this.file.getUintBytes(st,_t);Et+=it.length}}get8bits(rt){let it=this.file.getUint8(rt);return[it>>4,15&it]}findExtentInIloc(rt,it){this.parseBoxFullHead(rt);let st=rt.start,[_t,xt]=this.get8bits(st++),[Et,kt]=this.get8bits(st++),Lt=rt.version===2?4:2,It=rt.version===1||rt.version===2?2:0,Rt=kt+_t+xt,Nt=rt.version===2?4:2,Bt=this.file.getUintBytes(st,Nt);for(st+=Nt;Bt--;){let Ft=this.file.getUintBytes(st,Lt);st+=Lt+It+2+Et;let Yt=this.file.getUint16(st);if(st+=2,Ft===it)return Yt>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(st+kt,_t),this.file.getUintBytes(st+kt+_t,xt)];st+=Yt*Rt}}}class Ue extends Le{}c$5(Ue,"type","heic");class Fe extends Le{}c$5(Fe,"type","avif"),w$1.set("heic",Ue),w$1.set("avif",Fe),U(E$1,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),U(E$1,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),U(E$1,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),U(B$1,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Ee=U(B$1,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Be={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ee.set(37392,Be),Ee.set(41488,Be);const Ne={0:"Normal",1:"Low",2:"High"};function Ge(nt){return typeof nt=="object"&&nt.length!==void 0?nt[0]:nt}function Ve(nt){let rt=Array.from(nt).slice(1);return rt[1]>15&&(rt=rt.map(it=>String.fromCharCode(it))),rt[2]!=="0"&&rt[2]!==0||rt.pop(),rt.join(".")}function ze(nt){if(typeof nt=="string"){var[rt,it,st,_t,xt,Et]=nt.trim().split(/[-: ]/g).map(Number),kt=new Date(rt,it-1,st);return Number.isNaN(_t)||Number.isNaN(xt)||Number.isNaN(Et)||(kt.setHours(_t),kt.setMinutes(xt),kt.setSeconds(Et)),Number.isNaN(+kt)?nt:kt}}function He(nt){if(typeof nt=="string")return nt;let rt=[];if(nt[1]===0&&nt[nt.length-1]===0)for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it+1],nt[it]));else for(let it=0;it<nt.length;it+=2)rt.push(je(nt[it],nt[it+1]));return m$2(String.fromCodePoint(...rt))}function je(nt,rt){return nt<<8|rt}Ee.set(41992,Ne),Ee.set(41993,Ne),Ee.set(41994,Ne),U(N$1,["ifd0","ifd1"],[[50827,function(nt){return typeof nt!="string"?b$1(nt):nt}],[306,ze],[40091,He],[40092,He],[40093,He],[40094,He],[40095,He]]),U(N$1,"exif",[[40960,Ve],[36864,Ve],[36867,ze],[36868,ze],[40962,Ge],[40963,Ge]]),U(N$1,"gps",[[0,nt=>Array.from(nt).join(".")],[7,nt=>Array.from(nt).join(":")]]);class We extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===225&&rt.getUint32(it+4)===1752462448&&rt.getString(it+4,20)==="http://ns.adobe.com/"}static headerLength(rt,it){return rt.getString(it+4,34)==="http://ns.adobe.com/xmp/extension/"?79:4+28+1}static findPosition(rt,it){let st=super.findPosition(rt,it);return st.multiSegment=st.extended=st.headerLength===79,st.multiSegment?(st.chunkCount=rt.getUint8(it+72),st.chunkNumber=rt.getUint8(it+76),rt.getUint8(it+77)!==0&&st.chunkNumber++):(st.chunkCount=1/0,st.chunkNumber=-1),st}static handleMultiSegments(rt){return rt.map(it=>it.chunk.getString()).join("")}normalizeInput(rt){return typeof rt=="string"?rt:I$1.from(rt).getString()}parse(rt=this.chunk){if(!this.localOptions.parse)return rt;rt=function(xt){let Et={},kt={};for(let Lt of Ze)Et[Lt]=[],kt[Lt]=0;return xt.replace(et,(Lt,It,Rt)=>{if(It==="<"){let Nt=++kt[Rt];return Et[Rt].push(Nt),`${Lt}#${Nt}`}return`${Lt}#${Et[Rt].pop()}`})}(rt);let it=Xe.findAll(rt,"rdf","Description");it.length===0&&it.push(new Xe("rdf","Description",void 0,rt));let st,_t={};for(let xt of it)for(let Et of xt.properties)st=Je(Et.ns,_t),_e(Et,st);return function(xt){let Et;for(let kt in xt)Et=xt[kt]=f$5(xt[kt]),Et===void 0&&delete xt[kt];return f$5(xt)}(_t)}assignToOutput(rt,it){if(this.localOptions.parse)for(let[st,_t]of Object.entries(it))switch(st){case"tiff":this.assignObjectToOutput(rt,"ifd0",_t);break;case"exif":this.assignObjectToOutput(rt,"exif",_t);break;case"xmlns":break;default:this.assignObjectToOutput(rt,st,_t)}else rt.xmp=it}}c$5(We,"type","xmp"),c$5(We,"multiSegment",!0),T$1.set("xmp",We);class Ke{static findAll(rt){return qe(rt,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Ke.unpackMatch)}static unpackMatch(rt){let it=rt[1],st=rt[2],_t=rt[3].slice(1,-1);return _t=Qe(_t),new Ke(it,st,_t)}constructor(rt,it,st){this.ns=rt,this.name=it,this.value=st}serialize(){return this.value}}class Xe{static findAll(rt,it,st){if(it!==void 0||st!==void 0){it=it||"[\\w\\d-]+",st=st||"[\\w\\d-]+";var _t=new RegExp(`<(${it}):(${st})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else _t=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return qe(rt,_t).map(Xe.unpackMatch)}static unpackMatch(rt){let it=rt[1],st=rt[2],_t=rt[4],xt=rt[8];return new Xe(it,st,_t,xt)}constructor(rt,it,st,_t){this.ns=rt,this.name=it,this.attrString=st,this.innerXml=_t,this.attrs=Ke.findAll(st),this.children=Xe.findAll(_t),this.value=this.children.length===0?Qe(_t):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:rt,name:it}=this;return rt==="rdf"&&(it==="Seq"||it==="Bag"||it==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return $e(this.children.map(Ye));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let rt={};for(let it of this.properties)_e(it,rt);return this.value!==void 0&&(rt.value=this.value),f$5(rt)}}function _e(nt,rt){let it=nt.serialize();it!==void 0&&(rt[nt.name]=it)}var Ye=nt=>nt.serialize(),$e=nt=>nt.length===1?nt[0]:nt,Je=(nt,rt)=>rt[nt]?rt[nt]:rt[nt]={};function qe(nt,rt){let it,st=[];if(!nt)return st;for(;(it=rt.exec(nt))!==null;)st.push(it);return st}function Qe(nt){if(function(st){return st==null||st==="null"||st==="undefined"||st===""||st.trim()===""}(nt))return;let rt=Number(nt);if(!Number.isNaN(rt))return rt;let it=nt.toLowerCase();return it==="true"||it!=="false"&&nt.trim()}const Ze=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],et=new RegExp(`(<|\\/)(${Ze.join("|")})`,"g");var tt=Object.freeze({__proto__:null,default:Me,Exifr:te,fileParsers:w$1,segmentParsers:T$1,fileReaders:A$1,tagKeys:E$1,tagValues:B$1,tagRevivers:N$1,createDictionary:U,extendDictionary:F,fetchUrlAsArrayBuffer:M$1,readBlobAsArrayBuffer:R$1,chunkedProps:G,otherSegments:V$1,segments:z$1,tiffBlocks:H$1,segmentsAndBlocks:j$1,tiffExtractables:W,inheritables:K$1,allFormatters:X,Options:q,parse:ie,gpsOnlyOptions:me,gps:Se,thumbnailOnlyOptions:Ce,thumbnail:ye,thumbnailUrl:be,orientationOnlyOptions:Ie,orientation:Pe,rotations:ke,get rotateCanvas(){return we},get rotateCss(){return Te},rotation:Ae});let at=l$4("fs",nt=>nt.promises);A$1.set("fs",class extends ve{async readWhole(){this.chunked=!1,this.fs=await at;let nt=await this.fs.readFile(this.input);this._swapBuffer(nt)}async readChunked(){this.chunked=!0,this.fs=await at,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(nt,rt){this.fh===void 0&&await this.open(),nt+rt>this.size&&(rt=this.size-nt);var it=this.subarray(nt,rt,!0);return await this.fh.read(it.dataView,0,rt,nt),it}async close(){if(this.fh){let nt=this.fh;this.fh=void 0,await nt.close()}}});A$1.set("base64",class extends ve{constructor(...nt){super(...nt),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(nt,rt){let it,st,_t=this.input;nt===void 0?(nt=0,it=0,st=0):(it=4*Math.floor(nt/3),st=nt-it/4*3),rt===void 0&&(rt=this.size);let xt=nt+rt,Et=it+4*Math.ceil(xt/3);_t=_t.slice(it,Et);let kt=Math.min(rt,this.size-nt);if(a$3){let Lt=s$4.from(_t,"base64").slice(st,st+kt);return this.set(Lt,nt,!0)}{let Lt=this.subarray(nt,kt,!0),It=atob(_t),Rt=Lt.toUint8();for(let Nt=0;Nt<kt;Nt++)Rt[Nt]=It.charCodeAt(st+Nt);return Lt}}});class ot extends se{static canHandle(rt,it){return it===18761||it===19789}extendOptions(rt){let{ifd0:it,xmp:st,iptc:_t,icc:xt}=rt;st.enabled&&it.deps.add(700),_t.enabled&&it.deps.add(33723),xt.enabled&&it.deps.add(34675),it.finalizeFilters()}async parse(){let{tiff:rt,xmp:it,iptc:st,icc:_t}=this.options;if(rt.enabled||it.enabled||st.enabled||_t.enabled){let xt=Math.max(S$2(this.options),this.options.chunkSize);await this.file.ensureChunk(0,xt),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(rt){if(this.parsers.tiff[rt]){let it=this.parsers.tiff[rt];this.injectSegment(rt,it)}}}c$5(ot,"type","tiff"),w$1.set("tiff",ot);let lt=l$4("zlib");const ht=["ihdr","iccp","text","itxt","exif"];class ut extends se{constructor(...rt){super(...rt),c$5(this,"catchError",it=>this.errors.push(it)),c$5(this,"metaChunks",[]),c$5(this,"unknownChunks",[])}static canHandle(rt,it){return it===35152&&rt.getUint32(0)===2303741511&&rt.getUint32(4)===218765834}async parse(){let{file:rt}=this;await this.findPngChunksInRange(8,rt.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(rt,it){let{file:st}=this;for(;rt<it;){let _t=st.getUint32(rt),xt=st.getUint32(rt+4),Et=st.getString(rt+4,4).toLowerCase(),kt=_t+4+4+4,Lt={type:Et,offset:rt,length:kt,start:rt+4+4,size:_t,marker:xt};ht.includes(Et)?this.metaChunks.push(Lt):this.unknownChunks.push(Lt),rt+=kt}}parseTextChunks(){let rt=this.metaChunks.filter(it=>it.type==="text");for(let it of rt){let[st,_t]=this.file.getString(it.start,it.size).split("\0");this.injectKeyValToIhdr(st,_t)}}injectKeyValToIhdr(rt,it){let st=this.parsers.ihdr;st&&st.raw.set(rt,it)}findIhdr(){let rt=this.metaChunks.find(it=>it.type==="ihdr");rt&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",rt.chunk)}async findExif(){let rt=this.metaChunks.find(it=>it.type==="exif");rt&&this.injectSegment("tiff",rt.chunk)}async findXmp(){let rt=this.metaChunks.filter(it=>it.type==="itxt");for(let it of rt)it.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",it.chunk)}async findIcc(){let rt=this.metaChunks.find(kt=>kt.type==="iccp");if(!rt)return;let{chunk:it}=rt,st=it.getUint8Array(0,81),_t=0;for(;_t<80&&st[_t]!==0;)_t++;let xt=_t+2,Et=it.getString(0,_t);if(this.injectKeyValToIhdr("ProfileName",Et),n$8){let kt=await lt,Lt=it.getUint8Array(xt);Lt=kt.inflateSync(Lt),this.injectSegment("icc",Lt)}}}c$5(ut,"type","png"),w$1.set("png",ut),U(E$1,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),F(E$1,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let ct=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];F(E$1,"ifd0",ct),F(E$1,"exif",ct),U(B$1,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class ft extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===224&&rt.getUint32(it+4)===1246120262&&rt.getUint8(it+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}c$5(ft,"type","jfif"),c$5(ft,"headerLength",9),T$1.set("jfif",ft),U(E$1,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class dt extends re$1{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}c$5(dt,"type","ihdr"),T$1.set("ihdr",dt),U(E$1,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),U(B$1,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class pt extends re$1{static canHandle(rt,it){return rt.getUint8(it+1)===226&&rt.getUint32(it+4)===1229144927}static findPosition(rt,it){let st=super.findPosition(rt,it);return st.chunkNumber=rt.getUint8(it+16),st.chunkCount=rt.getUint8(it+17),st.multiSegment=st.chunkCount>1,st}static handleMultiSegments(rt){return function(it){let st=function(_t){let xt=_t[0].constructor,Et=0;for(let It of _t)Et+=It.length;let kt=new xt(Et),Lt=0;for(let It of _t)kt.set(It,Lt),Lt+=It.length;return kt}(it.map(_t=>_t.chunk.toUint8()));return new I$1(st)}(rt)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:rt}=this;this.chunk.byteLength<84&&g$1("ICC header is too short");for(let[it,st]of Object.entries(gt)){it=parseInt(it,10);let _t=st(this.chunk,it);_t!=="\0\0\0\0"&&rt.set(it,_t)}}parseTags(){let rt,it,st,_t,xt,{raw:Et}=this,kt=this.chunk.getUint32(128),Lt=132,It=this.chunk.byteLength;for(;kt--;){if(rt=this.chunk.getString(Lt,4),it=this.chunk.getUint32(Lt+4),st=this.chunk.getUint32(Lt+8),_t=this.chunk.getString(it,4),it+st>It)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");xt=this.parseTag(_t,it,st),xt!==void 0&&xt!=="\0\0\0\0"&&Et.set(rt,xt),Lt+=12}}parseTag(rt,it,st){switch(rt){case"desc":return this.parseDesc(it);case"mluc":return this.parseMluc(it);case"text":return this.parseText(it,st);case"sig ":return this.parseSig(it)}if(!(it+st>this.chunk.byteLength))return this.chunk.getUint8Array(it,st)}parseDesc(rt){let it=this.chunk.getUint32(rt+8)-1;return m$2(this.chunk.getString(rt+12,it))}parseText(rt,it){return m$2(this.chunk.getString(rt+8,it-8))}parseSig(rt){return m$2(this.chunk.getString(rt+8,4))}parseMluc(rt){let{chunk:it}=this,st=it.getUint32(rt+8),_t=it.getUint32(rt+12),xt=rt+16,Et=[];for(let kt=0;kt<st;kt++){let Lt=it.getString(xt+0,2),It=it.getString(xt+2,2),Rt=it.getUint32(xt+4),Nt=it.getUint32(xt+8)+rt,Bt=m$2(it.getUnicodeString(Nt,Rt));Et.push({lang:Lt,country:It,text:Bt}),xt+=_t}return st===1?Et[0].text:Et}translateValue(rt,it){return typeof rt=="string"?it[rt]||it[rt.toLowerCase()]||rt:it[rt]||rt}}c$5(pt,"type","icc"),c$5(pt,"multiSegment",!0),c$5(pt,"headerLength",18);const gt={4:mt,8:function(nt,rt){return[nt.getUint8(rt),nt.getUint8(rt+1)>>4,nt.getUint8(rt+1)%16].map(it=>it.toString(10)).join(".")},12:mt,16:mt,20:mt,24:function(nt,rt){const it=nt.getUint16(rt),st=nt.getUint16(rt+2)-1,_t=nt.getUint16(rt+4),xt=nt.getUint16(rt+6),Et=nt.getUint16(rt+8),kt=nt.getUint16(rt+10);return new Date(Date.UTC(it,st,_t,xt,Et,kt))},36:mt,40:mt,48:mt,52:mt,64:(nt,rt)=>nt.getUint32(rt),80:mt};function mt(nt,rt){return m$2(nt.getString(rt,4))}T$1.set("icc",pt),U(E$1,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const St={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Ct={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};U(B$1,"icc",[[4,St],[12,Ct],[40,Object.assign({},St,Ct)],[48,St],[80,St],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class yt extends re$1{static canHandle(rt,it,st){return rt.getUint8(it+1)===237&&rt.getString(it+4,9)==="Photoshop"&&this.containsIptc8bim(rt,it,st)!==void 0}static headerLength(rt,it,st){let _t,xt=this.containsIptc8bim(rt,it,st);if(xt!==void 0)return _t=rt.getUint8(it+xt+7),_t%2!=0&&(_t+=1),_t===0&&(_t=4),xt+8+_t}static containsIptc8bim(rt,it,st){for(let _t=0;_t<st;_t++)if(this.isIptcSegmentHead(rt,it+_t))return _t}static isIptcSegmentHead(rt,it){return rt.getUint8(it)===56&&rt.getUint32(it)===943868237&&rt.getUint16(it+4)===1028}parse(){let{raw:rt}=this,it=this.chunk.byteLength-1,st=!1;for(let _t=0;_t<it;_t++)if(this.chunk.getUint8(_t)===28&&this.chunk.getUint8(_t+1)===2){st=!0;let xt=this.chunk.getUint16(_t+3),Et=this.chunk.getUint8(_t+2),kt=this.chunk.getLatin1String(_t+5,xt);rt.set(Et,this.pluralizeValue(rt.get(Et),kt)),_t+=4+xt}else if(st)break;return this.translate(),this.output}pluralizeValue(rt,it){return rt!==void 0?rt instanceof Array?(rt.push(it),rt):[rt,it]:it}}c$5(yt,"type","iptc"),c$5(yt,"translateValues",!1),c$5(yt,"reviveValues",!1),T$1.set("iptc",yt),U(E$1,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),U(B$1,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);class GithubClient{constructor(rt){lc(this,"authToken");lc(this,"_shas",{});this.authToken=rt}b64EncodeUnicode(rt){return btoa(encodeURIComponent(rt).replace(/%([0-9A-F]{2})/g,function(it,st){return String.fromCharCode(parseInt(st,16))}))}b64DecodeUnicode(rt){return decodeURIComponent(Array.prototype.map.call(atob(rt),function(it){return"%"+("00"+it.charCodeAt(0).toString(16)).slice(-2)}).join(""))}user(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}async isCollaborator(rt,it,st){let _t=`https://api.github.com/repos/${rt}/${it}/collaborators/${st}`,xt=await fetch(_t,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}});return xt.ok&&xt.status===204}organizations(){return fetch("https://api.github.com/user/orgs",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(rt=>rt.json())}repos(rt="",it=""){let st=rt?`users/${rt}`:it?`orgs/${it}`:"user";return fetch(`https://api.github.com/${st}/repos?per_page=100`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(_t=>_t.json())}async createRepository({org:rt=null,name:it="",description:st="",auto_init:_t=!0}){let xt=rt?`https://api.github.com/orgs/${rt}/repos`:"https://api.github.com/user/repos";console.log(`createUserRepository: org=${rt} name=${it} description=${st} auto_init=${_t} url=${xt}`);let Et=await fetch(xt,{method:"POST",body:JSON.stringify({name:it,description:st,auto_init:_t}),headers:{Authorization:`Token ${this.authToken}`}});return{status:Et.status,statusText:Et.statusText}}branches(rt,it){return fetch(`https://api.github.com/repos/${rt}/${it}/branches`,{headers:{Accept:"application/vnd.github+json",Authorization:`token ${this.authToken}`}}).then(st=>st.json())}async getFile(rt,it,st,_t){let xt,Et=`https://api.github.com/repos/${rt}/${it}/contents/${st}`;_t&&(Et+=`?ref=${_t}`);let kt=await fetch(Et,{cache:"no-cache",headers:{Authorization:`Token ${this.authToken}`}});return kt.ok&&(kt=await kt.json(),xt=decodeURIComponent(escape(atob(kt.content)))),Promise.resolve({content:xt,sha:kt.sha})}async getSha(rt,it,st,_t){console.log(`getSha: acct=${rt} repo=${it} path=${st} ref=${_t}`);let xt=`https://api.github.com/repos/${rt}/${it}/contents/${st}`;_t&&(xt+=`?ref=${_t}`);let Et=await fetch(xt,{headers:{Authorization:`Token ${this.authToken}`}});return Et.ok&&(Et=await Et.json()),Et.sha}async putFile(rt,it,st,_t,xt,Et=!1,kt=""){let Lt=`https://api.github.com/repos/${rt}/${it}/contents/${st}`,It=`${rt}/${it}/${xt}/${st}`;kt=kt||this._shas[It]||await this.getSha(rt,it,st,xt),console.log(`putFile: acct=${rt} repo=${it} path=${st} ref=${xt} sha=${kt} isBinaryString=${Et}`);let Rt={message:"API commit",content:Et?btoa(_t):this.b64EncodeUnicode(_t)};xt&&(Rt.branch=xt),kt&&(Rt.sha=kt);let Nt=await fetch(Lt,{method:"PUT",body:JSON.stringify(Rt),headers:{Authorization:`Token ${this.authToken}`}});return Nt.ok?(kt=(await Nt.json()).content.sha,this._shas[It]=kt):console.log(Nt),{status:Nt.status,statusText:Nt.statusText,sha:kt}}async deleteFile(rt,it,st,_t,xt=""){console.log(`deleteFile: acct=${rt} repo=${it} path=${st} sha=${xt}`),xt=xt||await this.getSha(rt,it,st,_t);let Et=`https://api.github.com/repos/${rt}/${it}/contents/${st}`,kt={message:"API commit",sha:xt},Lt=await fetch(Et,{method:"DELETE",body:JSON.stringify(kt),headers:{Authorization:`Token ${this.authToken}`}});Lt=await Lt.json()}async defaultBranch(rt,it){let st=null,_t=`https://api.github.com/repos/${rt}/${it}`,xt=await fetch(_t,{headers:{Authorization:`Token ${this.authToken}`}});return xt.ok&&(xt=await xt.json(),st=xt.default_branch),st}async dirlist(rt,it,st,_t){var It;st=st||"",_t=_t||await this.defaultBranch(rt,it);let xt=[],Et=`https://api.github.com/repos/${rt}/${it}/git/trees/${_t}`,kt={Authorization:`Token ${this.authToken}`,Accept:"application/vnd.github.v3+json","If-None-Match":""},Lt=st.split("/").filter(Rt=>Rt);for(let Rt=0;Rt<Lt.length;Rt++){let Nt=await fetch(Et,{headers:kt}),Bt=Nt.ok?await Nt.json():{},Ft=Bt?(It=Bt.tree)==null?void 0:It.find(Yt=>Yt.path===Lt[Rt]):null;if(Et=Ft?Ft.url:null,!Et)break}if(Et){let Rt=await fetch(Et,{headers:kt});xt=((Rt.ok?await Rt.json():{}).tree||[]).map(Bt=>({name:Bt.path,sha:Bt.sha,type:Bt.type==="tree"?"dir":"file"}))}return xt}async fullPath(rt,it,st,_t,xt=!1){let Et=st.split("/").filter(Rt=>Rt),kt=Et[Et.length-1],Lt=await this.dirlist(rt,it,Et.join("/"),_t);if(Lt.length===0&&(Et.pop(),Lt=await this.dirlist(rt,it,Et.join("/"),_t)),!xt){let Rt=[kt,`${kt}.md`,"README.md"];for(let Nt=0;Nt<Rt.length;Nt++)if(Lt.find(Bt=>Bt.type==="file"&&Bt.name===Rt[Nt])){Et.push(Rt[Nt]);break}}return Et.join("/")}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing$1(nt){return typeof nt>"u"||nt===null}function isObject$2(nt){return typeof nt=="object"&&nt!==null}function toArray$1(nt){return Array.isArray(nt)?nt:isNothing$1(nt)?[]:[nt]}function extend$2(nt,rt){var it,st,_t,xt;if(rt)for(xt=Object.keys(rt),it=0,st=xt.length;it<st;it+=1)_t=xt[it],nt[_t]=rt[_t];return nt}function repeat$1(nt,rt){var it="",st;for(st=0;st<rt;st+=1)it+=nt;return it}function isNegativeZero$1(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1$1=isNothing$1,isObject_1$1=isObject$2,toArray_1$1=toArray$1,repeat_1$1=repeat$1,isNegativeZero_1$1=isNegativeZero$1,extend_1$1=extend$2,common$3={isNothing:isNothing_1$1,isObject:isObject_1$1,toArray:toArray_1$1,repeat:repeat_1$1,isNegativeZero:isNegativeZero_1$1,extend:extend_1$1};function formatError$1(nt,rt){var it="",st=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),st+" "+it):st}function YAMLException$1$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError$1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1$1.prototype=Object.create(Error.prototype);YAMLException$1$1.prototype.constructor=YAMLException$1$1;YAMLException$1$1.prototype.toString=function(rt){return this.name+": "+formatError$1(this,rt)};var exception$1=YAMLException$1$1;function getLine$1(nt,rt,it,st,_t){var xt="",Et="",kt=Math.floor(_t/2)-1;return st-rt>kt&&(xt=" ... ",rt=st-kt+xt.length),it-st>kt&&(Et=" ...",it=st+kt-Et.length),{str:xt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Et,pos:st-rt+xt.length}}function padStart$1(nt,rt){return common$3.repeat(" ",rt-nt.length)+nt}function makeSnippet$1(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,st=[0],_t=[],xt,Et=-1;xt=it.exec(nt.buffer);)_t.push(xt.index),st.push(xt.index+xt[0].length),nt.position<=xt.index&&Et<0&&(Et=st.length-2);Et<0&&(Et=st.length-1);var kt="",Lt,It,Rt=Math.min(nt.line+rt.linesAfter,_t.length).toString().length,Nt=rt.maxLength-(rt.indent+Rt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Et-Lt<0);Lt++)It=getLine$1(nt.buffer,st[Et-Lt],_t[Et-Lt],nt.position-(st[Et]-st[Et-Lt]),Nt),kt=common$3.repeat(" ",rt.indent)+padStart$1((nt.line-Lt+1).toString(),Rt)+" | "+It.str+`
`+kt;for(It=getLine$1(nt.buffer,st[Et],_t[Et],nt.position,Nt),kt+=common$3.repeat(" ",rt.indent)+padStart$1((nt.line+1).toString(),Rt)+" | "+It.str+`
`,kt+=common$3.repeat("-",rt.indent+Rt+3+It.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Et+Lt>=_t.length);Lt++)It=getLine$1(nt.buffer,st[Et+Lt],_t[Et+Lt],nt.position-(st[Et]-st[Et+Lt]),Nt),kt+=common$3.repeat(" ",rt.indent)+padStart$1((nt.line+Lt+1).toString(),Rt)+" | "+It.str+`
`;return kt.replace(/\n$/,"")}var snippet$1=makeSnippet$1,TYPE_CONSTRUCTOR_OPTIONS$1=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS$1=["scalar","sequence","mapping"];function compileStyleAliases$1(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(st){rt[String(st)]=it})}),rt}function Type$1$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS$1.indexOf(it)===-1)throw new exception$1('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases$1(rt.styleAliases||null),YAML_NODE_KINDS$1.indexOf(this.kind)===-1)throw new exception$1('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type$1=Type$1$1;function compileList$1(nt,rt){var it=[];return nt[rt].forEach(function(st){var _t=it.length;it.forEach(function(xt,Et){xt.tag===st.tag&&xt.kind===st.kind&&xt.multi===st.multi&&(_t=Et)}),it[_t]=st}),it}function compileMap$1(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function st(_t){_t.multi?(nt.multi[_t.kind].push(_t),nt.multi.fallback.push(_t)):nt[_t.kind][_t.tag]=nt.fallback[_t.tag]=_t}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(st);return nt}function Schema$1$1(nt){return this.extend(nt)}Schema$1$1.prototype.extend=function(rt){var it=[],st=[];if(rt instanceof type$1)st.push(rt);else if(Array.isArray(rt))st=st.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(st=st.concat(rt.explicit));else throw new exception$1("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(xt){if(!(xt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(xt.loadKind&&xt.loadKind!=="scalar")throw new exception$1("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(xt.multi)throw new exception$1("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(xt){if(!(xt instanceof type$1))throw new exception$1("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var _t=Object.create(Schema$1$1.prototype);return _t.implicit=(this.implicit||[]).concat(it),_t.explicit=(this.explicit||[]).concat(st),_t.compiledImplicit=compileList$1(_t,"implicit"),_t.compiledExplicit=compileList$1(_t,"explicit"),_t.compiledTypeMap=compileMap$1(_t.compiledImplicit,_t.compiledExplicit),_t};var schema$1=Schema$1$1,str$1=new type$1("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$2=new type$1("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map$3=new type$1("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe$1=new schema$1({explicit:[str$1,seq$2,map$3]});function resolveYamlNull$1(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull$1(){return null}function isNull$1(nt){return nt===null}var _null$1=new type$1("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull$1,construct:constructYamlNull$1,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean$1(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean$1(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean$1(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool$1=new type$1("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean$1,construct:constructYamlBoolean$1,predicate:isBoolean$1,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode$1(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode$1(nt){return 48<=nt&&nt<=55}function isDecCode$1(nt){return 48<=nt&&nt<=57}function resolveYamlInteger$1(nt){if(nt===null)return!1;var rt=nt.length,it=0,st=!1,_t;if(!rt)return!1;if(_t=nt[it],(_t==="-"||_t==="+")&&(_t=nt[++it]),_t==="0"){if(it+1===rt)return!0;if(_t=nt[++it],_t==="b"){for(it++;it<rt;it++)if(_t=nt[it],_t!=="_"){if(_t!=="0"&&_t!=="1")return!1;st=!0}return st&&_t!=="_"}if(_t==="x"){for(it++;it<rt;it++)if(_t=nt[it],_t!=="_"){if(!isHexCode$1(nt.charCodeAt(it)))return!1;st=!0}return st&&_t!=="_"}if(_t==="o"){for(it++;it<rt;it++)if(_t=nt[it],_t!=="_"){if(!isOctCode$1(nt.charCodeAt(it)))return!1;st=!0}return st&&_t!=="_"}}if(_t==="_")return!1;for(;it<rt;it++)if(_t=nt[it],_t!=="_"){if(!isDecCode$1(nt.charCodeAt(it)))return!1;st=!0}return!(!st||_t==="_")}function constructYamlInteger$1(nt){var rt=nt,it=1,st;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),st=rt[0],(st==="-"||st==="+")&&(st==="-"&&(it=-1),rt=rt.slice(1),st=rt[0]),rt==="0")return 0;if(st==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger$2(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common$3.isNegativeZero(nt)}var int$1=new type$1("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger$1,construct:constructYamlInteger$1,predicate:isInteger$2,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN$1=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat$1(nt){return!(nt===null||!YAML_FLOAT_PATTERN$1.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat$1(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT$1=/^[-+]?[0-9]+e/;function representYamlFloat$1(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common$3.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT$1.test(it)?it.replace("e",".e"):it}function isFloat$1(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common$3.isNegativeZero(nt))}var float$1=new type$1("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat$1,construct:constructYamlFloat$1,predicate:isFloat$1,represent:representYamlFloat$1,defaultStyle:"lowercase"}),json$1=failsafe$1.extend({implicit:[_null$1,bool$1,int$1,float$1]}),core$1=json$1,YAML_DATE_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP$1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp$1(nt){return nt===null?!1:YAML_DATE_REGEXP$1.exec(nt)!==null||YAML_TIMESTAMP_REGEXP$1.exec(nt)!==null}function constructYamlTimestamp$1(nt){var rt,it,st,_t,xt,Et,kt,Lt=0,It=null,Rt,Nt,Bt;if(rt=YAML_DATE_REGEXP$1.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP$1.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],st=+rt[2]-1,_t=+rt[3],!rt[4])return new Date(Date.UTC(it,st,_t));if(xt=+rt[4],Et=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Rt=+rt[10],Nt=+(rt[11]||0),It=(Rt*60+Nt)*6e4,rt[9]==="-"&&(It=-It)),Bt=new Date(Date.UTC(it,st,_t,xt,Et,kt,Lt)),It&&Bt.setTime(Bt.getTime()-It),Bt}function representYamlTimestamp$1(nt){return nt.toISOString()}var timestamp$1=new type$1("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp$1,construct:constructYamlTimestamp$1,instanceOf:Date,represent:representYamlTimestamp$1});function resolveYamlMerge$1(nt){return nt==="<<"||nt===null}var merge$4=new type$1("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge$1}),BASE64_MAP$1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary$1(nt){if(nt===null)return!1;var rt,it,st=0,_t=nt.length,xt=BASE64_MAP$1;for(it=0;it<_t;it++)if(rt=xt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;st+=6}return st%8===0}function constructYamlBinary$1(nt){var rt,it,st=nt.replace(/[\r\n=]/g,""),_t=st.length,xt=BASE64_MAP$1,Et=0,kt=[];for(rt=0;rt<_t;rt++)rt%4===0&&rt&&(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)),Et=Et<<6|xt.indexOf(st.charAt(rt));return it=_t%4*6,it===0?(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)):it===18?(kt.push(Et>>10&255),kt.push(Et>>2&255)):it===12&&kt.push(Et>>4&255),new Uint8Array(kt)}function representYamlBinary$1(nt){var rt="",it=0,st,_t,xt=nt.length,Et=BASE64_MAP$1;for(st=0;st<xt;st++)st%3===0&&st&&(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]),it=(it<<8)+nt[st];return _t=xt%3,_t===0?(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]):_t===2?(rt+=Et[it>>10&63],rt+=Et[it>>4&63],rt+=Et[it<<2&63],rt+=Et[64]):_t===1&&(rt+=Et[it>>2&63],rt+=Et[it<<4&63],rt+=Et[64],rt+=Et[64]),rt}function isBinary$1(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary$1=new type$1("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary$1,construct:constructYamlBinary$1,predicate:isBinary$1,represent:representYamlBinary$1}),_hasOwnProperty$3$1=Object.prototype.hasOwnProperty,_toString$2$1=Object.prototype.toString;function resolveYamlOmap$1(nt){if(nt===null)return!0;var rt=[],it,st,_t,xt,Et,kt=nt;for(it=0,st=kt.length;it<st;it+=1){if(_t=kt[it],Et=!1,_toString$2$1.call(_t)!=="[object Object]")return!1;for(xt in _t)if(_hasOwnProperty$3$1.call(_t,xt))if(!Et)Et=!0;else return!1;if(!Et)return!1;if(rt.indexOf(xt)===-1)rt.push(xt);else return!1}return!0}function constructYamlOmap$1(nt){return nt!==null?nt:[]}var omap$1=new type$1("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap$1,construct:constructYamlOmap$1}),_toString$1$1=Object.prototype.toString;function resolveYamlPairs$1(nt){if(nt===null)return!0;var rt,it,st,_t,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1){if(st=Et[rt],_toString$1$1.call(st)!=="[object Object]"||(_t=Object.keys(st),_t.length!==1))return!1;xt[rt]=[_t[0],st[_t[0]]]}return!0}function constructYamlPairs$1(nt){if(nt===null)return[];var rt,it,st,_t,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1)st=Et[rt],_t=Object.keys(st),xt[rt]=[_t[0],st[_t[0]]];return xt}var pairs$1=new type$1("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs$1,construct:constructYamlPairs$1}),_hasOwnProperty$2$1=Object.prototype.hasOwnProperty;function resolveYamlSet$1(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2$1.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet$1(nt){return nt!==null?nt:{}}var set$3=new type$1("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet$1,construct:constructYamlSet$1}),_default$1=core$1.extend({implicit:[timestamp$1,merge$4],explicit:[binary$1,omap$1,pairs$1,set$3]}),_hasOwnProperty$1$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN$1=1,CONTEXT_FLOW_OUT$1=2,CONTEXT_BLOCK_IN$1=3,CONTEXT_BLOCK_OUT$1=4,CHOMPING_CLIP$1=1,CHOMPING_STRIP$1=2,CHOMPING_KEEP$1=3,PATTERN_NON_PRINTABLE$1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS$1=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS$1=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE$1=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI$1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class$1(nt){return Object.prototype.toString.call(nt)}function is_EOL$1(nt){return nt===10||nt===13}function is_WHITE_SPACE$1(nt){return nt===9||nt===32}function is_WS_OR_EOL$1(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR$1(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode$1(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen$1(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode$1(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence$1(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint$1(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck$1=new Array(256),simpleEscapeMap$1=new Array(256);for(var i$8=0;i$8<256;i$8++)simpleEscapeCheck$1[i$8]=simpleEscapeSequence$1(i$8)?1:0,simpleEscapeMap$1[i$8]=simpleEscapeSequence$1(i$8);function State$1$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default$1,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError$1(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet$1(it),new exception$1(rt,it)}function throwError$1(nt,rt){throw generateError$1(nt,rt)}function throwWarning$1(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError$1(nt,rt))}var directiveHandlers$1={YAML:function(rt,it,st){var _t,xt,Et;rt.version!==null&&throwError$1(rt,"duplication of %YAML directive"),st.length!==1&&throwError$1(rt,"YAML directive accepts exactly one argument"),_t=/^([0-9]+)\.([0-9]+)$/.exec(st[0]),_t===null&&throwError$1(rt,"ill-formed argument of the YAML directive"),xt=parseInt(_t[1],10),Et=parseInt(_t[2],10),xt!==1&&throwError$1(rt,"unacceptable YAML version of the document"),rt.version=st[0],rt.checkLineBreaks=Et<2,Et!==1&&Et!==2&&throwWarning$1(rt,"unsupported YAML version of the document")},TAG:function(rt,it,st){var _t,xt;st.length!==2&&throwError$1(rt,"TAG directive accepts exactly two arguments"),_t=st[0],xt=st[1],PATTERN_TAG_HANDLE$1.test(_t)||throwError$1(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1$1.call(rt.tagMap,_t)&&throwError$1(rt,'there is a previously declared suffix for "'+_t+'" tag handle'),PATTERN_TAG_URI$1.test(xt)||throwError$1(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{xt=decodeURIComponent(xt)}catch{throwError$1(rt,"tag prefix is malformed: "+xt)}rt.tagMap[_t]=xt}};function captureSegment$1(nt,rt,it,st){var _t,xt,Et,kt;if(rt<it){if(kt=nt.input.slice(rt,it),st)for(_t=0,xt=kt.length;_t<xt;_t+=1)Et=kt.charCodeAt(_t),Et===9||32<=Et&&Et<=1114111||throwError$1(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE$1.test(kt)&&throwError$1(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings$1(nt,rt,it,st){var _t,xt,Et,kt;for(common$3.isObject(it)||throwError$1(nt,"cannot merge mappings; the provided source object is unacceptable"),_t=Object.keys(it),Et=0,kt=_t.length;Et<kt;Et+=1)xt=_t[Et],_hasOwnProperty$1$1.call(rt,xt)||(rt[xt]=it[xt],st[xt]=!0)}function storeMappingPair$1(nt,rt,it,st,_t,xt,Et,kt,Lt){var It,Rt;if(Array.isArray(_t))for(_t=Array.prototype.slice.call(_t),It=0,Rt=_t.length;It<Rt;It+=1)Array.isArray(_t[It])&&throwError$1(nt,"nested arrays are not supported inside keys"),typeof _t=="object"&&_class$1(_t[It])==="[object Object]"&&(_t[It]="[object Object]");if(typeof _t=="object"&&_class$1(_t)==="[object Object]"&&(_t="[object Object]"),_t=String(_t),rt===null&&(rt={}),st==="tag:yaml.org,2002:merge")if(Array.isArray(xt))for(It=0,Rt=xt.length;It<Rt;It+=1)mergeMappings$1(nt,rt,xt[It],it);else mergeMappings$1(nt,rt,xt,it);else!nt.json&&!_hasOwnProperty$1$1.call(it,_t)&&_hasOwnProperty$1$1.call(rt,_t)&&(nt.line=Et||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError$1(nt,"duplicated mapping key")),_t==="__proto__"?Object.defineProperty(rt,_t,{configurable:!0,enumerable:!0,writable:!0,value:xt}):rt[_t]=xt,delete it[_t];return rt}function readLineBreak$1(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError$1(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace$1(nt,rt,it){for(var st=0,_t=nt.input.charCodeAt(nt.position);_t!==0;){for(;is_WHITE_SPACE$1(_t);)_t===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),_t=nt.input.charCodeAt(++nt.position);if(rt&&_t===35)do _t=nt.input.charCodeAt(++nt.position);while(_t!==10&&_t!==13&&_t!==0);if(is_EOL$1(_t))for(readLineBreak$1(nt),_t=nt.input.charCodeAt(nt.position),st++,nt.lineIndent=0;_t===32;)nt.lineIndent++,_t=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&st!==0&&nt.lineIndent<it&&throwWarning$1(nt,"deficient indentation"),st}function testDocumentSeparator$1(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL$1(it)))}function writeFoldedLines$1(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common$3.repeat(`
`,rt-1))}function readPlainScalar$1(nt,rt,it){var st,_t,xt,Et,kt,Lt,It,Rt,Nt=nt.kind,Bt=nt.result,Ft;if(Ft=nt.input.charCodeAt(nt.position),is_WS_OR_EOL$1(Ft)||is_FLOW_INDICATOR$1(Ft)||Ft===35||Ft===38||Ft===42||Ft===33||Ft===124||Ft===62||Ft===39||Ft===34||Ft===37||Ft===64||Ft===96||(Ft===63||Ft===45)&&(_t=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(_t)||it&&is_FLOW_INDICATOR$1(_t)))return!1;for(nt.kind="scalar",nt.result="",xt=Et=nt.position,kt=!1;Ft!==0;){if(Ft===58){if(_t=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(_t)||it&&is_FLOW_INDICATOR$1(_t))break}else if(Ft===35){if(st=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL$1(st))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator$1(nt)||it&&is_FLOW_INDICATOR$1(Ft))break;if(is_EOL$1(Ft))if(Lt=nt.line,It=nt.lineStart,Rt=nt.lineIndent,skipSeparationSpace$1(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Ft=nt.input.charCodeAt(nt.position);continue}else{nt.position=Et,nt.line=Lt,nt.lineStart=It,nt.lineIndent=Rt;break}}kt&&(captureSegment$1(nt,xt,Et,!1),writeFoldedLines$1(nt,nt.line-Lt),xt=Et=nt.position,kt=!1),is_WHITE_SPACE$1(Ft)||(Et=nt.position+1),Ft=nt.input.charCodeAt(++nt.position)}return captureSegment$1(nt,xt,Et,!1),nt.result?!0:(nt.kind=Nt,nt.result=Bt,!1)}function readSingleQuotedScalar$1(nt,rt){var it,st,_t;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,st=_t=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment$1(nt,st,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)st=nt.position,nt.position++,_t=nt.position;else return!0;else is_EOL$1(it)?(captureSegment$1(nt,st,_t,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),st=_t=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,_t=nt.position);throwError$1(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar$1(nt,rt){var it,st,_t,xt,Et,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=st=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment$1(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment$1(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL$1(kt))skipSeparationSpace$1(nt,!1,rt);else if(kt<256&&simpleEscapeCheck$1[kt])nt.result+=simpleEscapeMap$1[kt],nt.position++;else if((Et=escapedHexLen$1(kt))>0){for(_t=Et,xt=0;_t>0;_t--)kt=nt.input.charCodeAt(++nt.position),(Et=fromHexCode$1(kt))>=0?xt=(xt<<4)+Et:throwError$1(nt,"expected hexadecimal character");nt.result+=charFromCodepoint$1(xt),nt.position++}else throwError$1(nt,"unknown escape sequence");it=st=nt.position}else is_EOL$1(kt)?(captureSegment$1(nt,it,st,!0),writeFoldedLines$1(nt,skipSeparationSpace$1(nt,!1,rt)),it=st=nt.position):nt.position===nt.lineStart&&testDocumentSeparator$1(nt)?throwError$1(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,st=nt.position)}throwError$1(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection$1(nt,rt){var it=!0,st,_t,xt,Et=nt.tag,kt,Lt=nt.anchor,It,Rt,Nt,Bt,Ft,Yt=Object.create(null),Zt,Wt,Kt,Jt;if(Jt=nt.input.charCodeAt(nt.position),Jt===91)Rt=93,Ft=!1,kt=[];else if(Jt===123)Rt=125,Ft=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),Jt=nt.input.charCodeAt(++nt.position);Jt!==0;){if(skipSeparationSpace$1(nt,!0,rt),Jt=nt.input.charCodeAt(nt.position),Jt===Rt)return nt.position++,nt.tag=Et,nt.anchor=Lt,nt.kind=Ft?"mapping":"sequence",nt.result=kt,!0;it?Jt===44&&throwError$1(nt,"expected the node content, but found ','"):throwError$1(nt,"missed comma between flow collection entries"),Wt=Zt=Kt=null,Nt=Bt=!1,Jt===63&&(It=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL$1(It)&&(Nt=Bt=!0,nt.position++,skipSeparationSpace$1(nt,!0,rt))),st=nt.line,_t=nt.lineStart,xt=nt.position,composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),Wt=nt.tag,Zt=nt.result,skipSeparationSpace$1(nt,!0,rt),Jt=nt.input.charCodeAt(nt.position),(Bt||nt.line===st)&&Jt===58&&(Nt=!0,Jt=nt.input.charCodeAt(++nt.position),skipSeparationSpace$1(nt,!0,rt),composeNode$1(nt,rt,CONTEXT_FLOW_IN$1,!1,!0),Kt=nt.result),Ft?storeMappingPair$1(nt,kt,Yt,Wt,Zt,Kt,st,_t,xt):Nt?kt.push(storeMappingPair$1(nt,null,Yt,Wt,Zt,Kt,st,_t,xt)):kt.push(Zt),skipSeparationSpace$1(nt,!0,rt),Jt=nt.input.charCodeAt(nt.position),Jt===44?(it=!0,Jt=nt.input.charCodeAt(++nt.position)):it=!1}throwError$1(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar$1(nt,rt){var it,st,_t=CHOMPING_CLIP$1,xt=!1,Et=!1,kt=rt,Lt=0,It=!1,Rt,Nt;if(Nt=nt.input.charCodeAt(nt.position),Nt===124)st=!1;else if(Nt===62)st=!0;else return!1;for(nt.kind="scalar",nt.result="";Nt!==0;)if(Nt=nt.input.charCodeAt(++nt.position),Nt===43||Nt===45)CHOMPING_CLIP$1===_t?_t=Nt===43?CHOMPING_KEEP$1:CHOMPING_STRIP$1:throwError$1(nt,"repeat of a chomping mode identifier");else if((Rt=fromDecimalCode$1(Nt))>=0)Rt===0?throwError$1(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Et?throwError$1(nt,"repeat of an indentation width identifier"):(kt=rt+Rt-1,Et=!0);else break;if(is_WHITE_SPACE$1(Nt)){do Nt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE$1(Nt));if(Nt===35)do Nt=nt.input.charCodeAt(++nt.position);while(!is_EOL$1(Nt)&&Nt!==0)}for(;Nt!==0;){for(readLineBreak$1(nt),nt.lineIndent=0,Nt=nt.input.charCodeAt(nt.position);(!Et||nt.lineIndent<kt)&&Nt===32;)nt.lineIndent++,Nt=nt.input.charCodeAt(++nt.position);if(!Et&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL$1(Nt)){Lt++;continue}if(nt.lineIndent<kt){_t===CHOMPING_KEEP$1?nt.result+=common$3.repeat(`
`,xt?1+Lt:Lt):_t===CHOMPING_CLIP$1&&xt&&(nt.result+=`
`);break}for(st?is_WHITE_SPACE$1(Nt)?(It=!0,nt.result+=common$3.repeat(`
`,xt?1+Lt:Lt)):It?(It=!1,nt.result+=common$3.repeat(`
`,Lt+1)):Lt===0?xt&&(nt.result+=" "):nt.result+=common$3.repeat(`
`,Lt):nt.result+=common$3.repeat(`
`,xt?1+Lt:Lt),xt=!0,Et=!0,Lt=0,it=nt.position;!is_EOL$1(Nt)&&Nt!==0;)Nt=nt.input.charCodeAt(++nt.position);captureSegment$1(nt,it,nt.position,!1)}return!0}function readBlockSequence$1(nt,rt){var it,st=nt.tag,_t=nt.anchor,xt=[],Et,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=xt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Et=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL$1(Et))));){if(kt=!0,nt.position++,skipSeparationSpace$1(nt,!0,-1)&&nt.lineIndent<=rt){xt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode$1(nt,rt,CONTEXT_BLOCK_IN$1,!1,!0),xt.push(nt.result),skipSeparationSpace$1(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError$1(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=st,nt.anchor=_t,nt.kind="sequence",nt.result=xt,!0):!1}function readBlockMapping$1(nt,rt,it){var st,_t,xt,Et,kt,Lt,It=nt.tag,Rt=nt.anchor,Nt={},Bt=Object.create(null),Ft=null,Yt=null,Zt=null,Wt=!1,Kt=!1,Jt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=Nt),Jt=nt.input.charCodeAt(nt.position);Jt!==0;){if(!Wt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError$1(nt,"tab characters must not be used in indentation")),st=nt.input.charCodeAt(nt.position+1),xt=nt.line,(Jt===63||Jt===58)&&is_WS_OR_EOL$1(st))Jt===63?(Wt&&(storeMappingPair$1(nt,Nt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Kt=!0,Wt=!0,_t=!0):Wt?(Wt=!1,_t=!0):throwError$1(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,Jt=st;else{if(Et=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode$1(nt,it,CONTEXT_FLOW_OUT$1,!1,!0))break;if(nt.line===xt){for(Jt=nt.input.charCodeAt(nt.position);is_WHITE_SPACE$1(Jt);)Jt=nt.input.charCodeAt(++nt.position);if(Jt===58)Jt=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL$1(Jt)||throwError$1(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Wt&&(storeMappingPair$1(nt,Nt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Kt=!0,Wt=!1,_t=!1,Ft=nt.tag,Yt=nt.result;else if(Kt)throwError$1(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=It,nt.anchor=Rt,!0}else if(Kt)throwError$1(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=It,nt.anchor=Rt,!0}if((nt.line===xt||nt.lineIndent>rt)&&(Wt&&(Et=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode$1(nt,rt,CONTEXT_BLOCK_OUT$1,!0,_t)&&(Wt?Yt=nt.result:Zt=nt.result),Wt||(storeMappingPair$1(nt,Nt,Bt,Ft,Yt,Zt,Et,kt,Lt),Ft=Yt=Zt=null),skipSeparationSpace$1(nt,!0,-1),Jt=nt.input.charCodeAt(nt.position)),(nt.line===xt||nt.lineIndent>rt)&&Jt!==0)throwError$1(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Wt&&storeMappingPair$1(nt,Nt,Bt,Ft,Yt,null,Et,kt,Lt),Kt&&(nt.tag=It,nt.anchor=Rt,nt.kind="mapping",nt.result=Nt),Kt}function readTagProperty$1(nt){var rt,it=!1,st=!1,_t,xt,Et;if(Et=nt.input.charCodeAt(nt.position),Et!==33)return!1;if(nt.tag!==null&&throwError$1(nt,"duplication of a tag property"),Et=nt.input.charCodeAt(++nt.position),Et===60?(it=!0,Et=nt.input.charCodeAt(++nt.position)):Et===33?(st=!0,_t="!!",Et=nt.input.charCodeAt(++nt.position)):_t="!",rt=nt.position,it){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&Et!==62);nt.position<nt.length?(xt=nt.input.slice(rt,nt.position),Et=nt.input.charCodeAt(++nt.position)):throwError$1(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Et!==0&&!is_WS_OR_EOL$1(Et);)Et===33&&(st?throwError$1(nt,"tag suffix cannot contain exclamation marks"):(_t=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE$1.test(_t)||throwError$1(nt,"named tag handle cannot contain such characters"),st=!0,rt=nt.position+1)),Et=nt.input.charCodeAt(++nt.position);xt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS$1.test(xt)&&throwError$1(nt,"tag suffix cannot contain flow indicator characters")}xt&&!PATTERN_TAG_URI$1.test(xt)&&throwError$1(nt,"tag name cannot contain such characters: "+xt);try{xt=decodeURIComponent(xt)}catch{throwError$1(nt,"tag name is malformed: "+xt)}return it?nt.tag=xt:_hasOwnProperty$1$1.call(nt.tagMap,_t)?nt.tag=nt.tagMap[_t]+xt:_t==="!"?nt.tag="!"+xt:_t==="!!"?nt.tag="tag:yaml.org,2002:"+xt:throwError$1(nt,'undeclared tag handle "'+_t+'"'),!0}function readAnchorProperty$1(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError$1(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL$1(it)&&!is_FLOW_INDICATOR$1(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias$1(nt){var rt,it,st;if(st=nt.input.charCodeAt(nt.position),st!==42)return!1;for(st=nt.input.charCodeAt(++nt.position),rt=nt.position;st!==0&&!is_WS_OR_EOL$1(st)&&!is_FLOW_INDICATOR$1(st);)st=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError$1(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1$1.call(nt.anchorMap,it)||throwError$1(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace$1(nt,!0,-1),!0}function composeNode$1(nt,rt,it,st,_t){var xt,Et,kt,Lt=1,It=!1,Rt=!1,Nt,Bt,Ft,Yt,Zt,Wt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,xt=Et=kt=CONTEXT_BLOCK_OUT$1===it||CONTEXT_BLOCK_IN$1===it,st&&skipSeparationSpace$1(nt,!0,-1)&&(It=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty$1(nt)||readAnchorProperty$1(nt);)skipSeparationSpace$1(nt,!0,-1)?(It=!0,kt=xt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=It||_t),(Lt===1||CONTEXT_BLOCK_OUT$1===it)&&(CONTEXT_FLOW_IN$1===it||CONTEXT_FLOW_OUT$1===it?Zt=rt:Zt=rt+1,Wt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence$1(nt,Wt)||readBlockMapping$1(nt,Wt,Zt))||readFlowCollection$1(nt,Zt)?Rt=!0:(Et&&readBlockScalar$1(nt,Zt)||readSingleQuotedScalar$1(nt,Zt)||readDoubleQuotedScalar$1(nt,Zt)?Rt=!0:readAlias$1(nt)?(Rt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError$1(nt,"alias node should not have any properties")):readPlainScalar$1(nt,Zt,CONTEXT_FLOW_IN$1===it)&&(Rt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Rt=kt&&readBlockSequence$1(nt,Wt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError$1(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),Nt=0,Bt=nt.implicitTypes.length;Nt<Bt;Nt+=1)if(Yt=nt.implicitTypes[Nt],Yt.resolve(nt.result)){nt.result=Yt.construct(nt.result),nt.tag=Yt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Yt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Yt=null,Ft=nt.typeMap.multi[nt.kind||"fallback"],Nt=0,Bt=Ft.length;Nt<Bt;Nt+=1)if(nt.tag.slice(0,Ft[Nt].tag.length)===Ft[Nt].tag){Yt=Ft[Nt];break}Yt||throwError$1(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Yt.kind!==nt.kind&&throwError$1(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Yt.kind+'", not "'+nt.kind+'"'),Yt.resolve(nt.result,nt.tag)?(nt.result=Yt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError$1(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Rt}function readDocument$1(nt){var rt=nt.position,it,st,_t,xt=!1,Et;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Et=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace$1(nt,!0,-1),Et=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Et!==37));){for(xt=!0,Et=nt.input.charCodeAt(++nt.position),it=nt.position;Et!==0&&!is_WS_OR_EOL$1(Et);)Et=nt.input.charCodeAt(++nt.position);for(st=nt.input.slice(it,nt.position),_t=[],st.length<1&&throwError$1(nt,"directive name must not be less than one character in length");Et!==0;){for(;is_WHITE_SPACE$1(Et);)Et=nt.input.charCodeAt(++nt.position);if(Et===35){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&!is_EOL$1(Et));break}if(is_EOL$1(Et))break;for(it=nt.position;Et!==0&&!is_WS_OR_EOL$1(Et);)Et=nt.input.charCodeAt(++nt.position);_t.push(nt.input.slice(it,nt.position))}Et!==0&&readLineBreak$1(nt),_hasOwnProperty$1$1.call(directiveHandlers$1,st)?directiveHandlers$1[st](nt,st,_t):throwWarning$1(nt,'unknown document directive "'+st+'"')}if(skipSeparationSpace$1(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace$1(nt,!0,-1)):xt&&throwError$1(nt,"directives end mark is expected"),composeNode$1(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT$1,!1,!0),skipSeparationSpace$1(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS$1.test(nt.input.slice(rt,nt.position))&&throwWarning$1(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator$1(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace$1(nt,!0,-1));return}if(nt.position<nt.length-1)throwError$1(nt,"end of the stream or a document separator is expected");else return}function loadDocuments$1(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1$1(nt,rt),st=nt.indexOf("\0");for(st!==-1&&(it.position=st,throwError$1(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument$1(it);return it.documents}function loadAll$1$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var st=loadDocuments$1(nt,it);if(typeof rt!="function")return st;for(var _t=0,xt=st.length;_t<xt;_t+=1)rt(st[_t])}function load$1$1(nt,rt){var it=loadDocuments$1(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception$1("expected a single document in the stream, but found more")}}var loadAll_1$1=loadAll$1$1,load_1$1=load$1$1,loader$4={loadAll:loadAll_1$1,load:load_1$1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(nt,rt){var it,st,_t,xt,Et,kt,Lt;if(rt===null)return{};for(it={},st=Object.keys(rt),_t=0,xt=st.length;_t<xt;_t+=1)Et=st[_t],kt=String(rt[Et]),Et.slice(0,2)==="!!"&&(Et="tag:yaml.org,2002:"+Et.slice(2)),Lt=nt.compiledTypeMap.fallback[Et],Lt&&_hasOwnProperty.call(Lt.styleAliases,kt)&&(kt=Lt.styleAliases[kt]),it[Et]=kt;return it}function encodeHex(nt){var rt,it,st;if(rt=nt.toString(16).toUpperCase(),nt<=255)it="x",st=2;else if(nt<=65535)it="u",st=4;else if(nt<=4294967295)it="U",st=8;else throw new exception$1("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+it+common$3.repeat("0",st-rt.length)+rt}var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(nt){this.schema=nt.schema||_default$1,this.indent=Math.max(1,nt.indent||2),this.noArrayIndent=nt.noArrayIndent||!1,this.skipInvalid=nt.skipInvalid||!1,this.flowLevel=common$3.isNothing(nt.flowLevel)?-1:nt.flowLevel,this.styleMap=compileStyleMap(this.schema,nt.styles||null),this.sortKeys=nt.sortKeys||!1,this.lineWidth=nt.lineWidth||80,this.noRefs=nt.noRefs||!1,this.noCompatMode=nt.noCompatMode||!1,this.condenseFlow=nt.condenseFlow||!1,this.quotingType=nt.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=nt.forceQuotes||!1,this.replacer=typeof nt.replacer=="function"?nt.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(nt,rt){for(var it=common$3.repeat(" ",rt),st=0,_t=-1,xt="",Et,kt=nt.length;st<kt;)_t=nt.indexOf(`
`,st),_t===-1?(Et=nt.slice(st),st=kt):(Et=nt.slice(st,_t+1),st=_t+1),Et.length&&Et!==`
`&&(xt+=it),xt+=Et;return xt}function generateNextLine(nt,rt){return`
`+common$3.repeat(" ",nt.indent*rt)}function testImplicitResolving(nt,rt){var it,st,_t;for(it=0,st=nt.implicitTypes.length;it<st;it+=1)if(_t=nt.implicitTypes[it],_t.resolve(rt))return!0;return!1}function isWhitespace(nt){return nt===CHAR_SPACE||nt===CHAR_TAB}function isPrintable(nt){return 32<=nt&&nt<=126||161<=nt&&nt<=55295&&nt!==8232&&nt!==8233||57344<=nt&&nt<=65533&&nt!==CHAR_BOM||65536<=nt&&nt<=1114111}function isNsCharOrWhitespace(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&nt!==CHAR_CARRIAGE_RETURN&&nt!==CHAR_LINE_FEED}function isPlainSafe(nt,rt,it){var st=isNsCharOrWhitespace(nt),_t=st&&!isWhitespace(nt);return(it?st:st&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET)&&nt!==CHAR_SHARP&&!(rt===CHAR_COLON&&!_t)||isNsCharOrWhitespace(rt)&&!isWhitespace(rt)&&nt===CHAR_SHARP||rt===CHAR_COLON&&_t}function isPlainSafeFirst(nt){return isPrintable(nt)&&nt!==CHAR_BOM&&!isWhitespace(nt)&&nt!==CHAR_MINUS&&nt!==CHAR_QUESTION&&nt!==CHAR_COLON&&nt!==CHAR_COMMA&&nt!==CHAR_LEFT_SQUARE_BRACKET&&nt!==CHAR_RIGHT_SQUARE_BRACKET&&nt!==CHAR_LEFT_CURLY_BRACKET&&nt!==CHAR_RIGHT_CURLY_BRACKET&&nt!==CHAR_SHARP&&nt!==CHAR_AMPERSAND&&nt!==CHAR_ASTERISK&&nt!==CHAR_EXCLAMATION&&nt!==CHAR_VERTICAL_LINE&&nt!==CHAR_EQUALS&&nt!==CHAR_GREATER_THAN&&nt!==CHAR_SINGLE_QUOTE&&nt!==CHAR_DOUBLE_QUOTE&&nt!==CHAR_PERCENT&&nt!==CHAR_COMMERCIAL_AT&&nt!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(nt){return!isWhitespace(nt)&&nt!==CHAR_COLON}function codePointAt(nt,rt){var it=nt.charCodeAt(rt),st;return it>=55296&&it<=56319&&rt+1<nt.length&&(st=nt.charCodeAt(rt+1),st>=56320&&st<=57343)?(it-55296)*1024+st-56320+65536:it}function needIndentIndicator(nt){var rt=/^\n* /;return rt.test(nt)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(nt,rt,it,st,_t,xt,Et,kt){var Lt,It=0,Rt=null,Nt=!1,Bt=!1,Ft=st!==-1,Yt=-1,Zt=isPlainSafeFirst(codePointAt(nt,0))&&isPlainSafeLast(codePointAt(nt,nt.length-1));if(rt||Et)for(Lt=0;Lt<nt.length;It>=65536?Lt+=2:Lt++){if(It=codePointAt(nt,Lt),!isPrintable(It))return STYLE_DOUBLE;Zt=Zt&&isPlainSafe(It,Rt,kt),Rt=It}else{for(Lt=0;Lt<nt.length;It>=65536?Lt+=2:Lt++){if(It=codePointAt(nt,Lt),It===CHAR_LINE_FEED)Nt=!0,Ft&&(Bt=Bt||Lt-Yt-1>st&&nt[Yt+1]!==" ",Yt=Lt);else if(!isPrintable(It))return STYLE_DOUBLE;Zt=Zt&&isPlainSafe(It,Rt,kt),Rt=It}Bt=Bt||Ft&&Lt-Yt-1>st&&nt[Yt+1]!==" "}return!Nt&&!Bt?Zt&&!Et&&!_t(nt)?STYLE_PLAIN:xt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:it>9&&needIndentIndicator(nt)?STYLE_DOUBLE:Et?xt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:Bt?STYLE_FOLDED:STYLE_LITERAL}function writeScalar(nt,rt,it,st,_t){nt.dump=function(){if(rt.length===0)return nt.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!nt.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(rt)!==-1||DEPRECATED_BASE60_SYNTAX.test(rt)))return nt.quotingType===QUOTING_TYPE_DOUBLE?'"'+rt+'"':"'"+rt+"'";var xt=nt.indent*Math.max(1,it),Et=nt.lineWidth===-1?-1:Math.max(Math.min(nt.lineWidth,40),nt.lineWidth-xt),kt=st||nt.flowLevel>-1&&it>=nt.flowLevel;function Lt(It){return testImplicitResolving(nt,It)}switch(chooseScalarStyle(rt,kt,nt.indent,Et,Lt,nt.quotingType,nt.forceQuotes&&!st,_t)){case STYLE_PLAIN:return rt;case STYLE_SINGLE:return"'"+rt.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(rt,xt));case STYLE_FOLDED:return">"+blockHeader(rt,nt.indent)+dropEndingNewline(indentString(foldString(rt,Et),xt));case STYLE_DOUBLE:return'"'+escapeString(rt)+'"';default:throw new exception$1("impossible error: invalid scalar style")}}()}function blockHeader(nt,rt){var it=needIndentIndicator(nt)?String(rt):"",st=nt[nt.length-1]===`
`,_t=st&&(nt[nt.length-2]===`
`||nt===`
`),xt=_t?"+":st?"":"-";return it+xt+`
`}function dropEndingNewline(nt){return nt[nt.length-1]===`
`?nt.slice(0,-1):nt}function foldString(nt,rt){for(var it=/(\n+)([^\n]*)/g,st=function(){var It=nt.indexOf(`
`);return It=It!==-1?It:nt.length,it.lastIndex=It,foldLine(nt.slice(0,It),rt)}(),_t=nt[0]===`
`||nt[0]===" ",xt,Et;Et=it.exec(nt);){var kt=Et[1],Lt=Et[2];xt=Lt[0]===" ",st+=kt+(!_t&&!xt&&Lt!==""?`
`:"")+foldLine(Lt,rt),_t=xt}return st}function foldLine(nt,rt){if(nt===""||nt[0]===" ")return nt;for(var it=/ [^ ]/g,st,_t=0,xt,Et=0,kt=0,Lt="";st=it.exec(nt);)kt=st.index,kt-_t>rt&&(xt=Et>_t?Et:kt,Lt+=`
`+nt.slice(_t,xt),_t=xt+1),Et=kt;return Lt+=`
`,nt.length-_t>rt&&Et>_t?Lt+=nt.slice(_t,Et)+`
`+nt.slice(Et+1):Lt+=nt.slice(_t),Lt.slice(1)}function escapeString(nt){for(var rt="",it=0,st,_t=0;_t<nt.length;it>=65536?_t+=2:_t++)it=codePointAt(nt,_t),st=ESCAPE_SEQUENCES[it],!st&&isPrintable(it)?(rt+=nt[_t],it>=65536&&(rt+=nt[_t+1])):rt+=st||encodeHex(it);return rt}function writeFlowSequence(nt,rt,it){var st="",_t=nt.tag,xt,Et,kt;for(xt=0,Et=it.length;xt<Et;xt+=1)kt=it[xt],nt.replacer&&(kt=nt.replacer.call(it,String(xt),kt)),(writeNode(nt,rt,kt,!1,!1)||typeof kt>"u"&&writeNode(nt,rt,null,!1,!1))&&(st!==""&&(st+=","+(nt.condenseFlow?"":" ")),st+=nt.dump);nt.tag=_t,nt.dump="["+st+"]"}function writeBlockSequence(nt,rt,it,st){var _t="",xt=nt.tag,Et,kt,Lt;for(Et=0,kt=it.length;Et<kt;Et+=1)Lt=it[Et],nt.replacer&&(Lt=nt.replacer.call(it,String(Et),Lt)),(writeNode(nt,rt+1,Lt,!0,!0,!1,!0)||typeof Lt>"u"&&writeNode(nt,rt+1,null,!0,!0,!1,!0))&&((!st||_t!=="")&&(_t+=generateNextLine(nt,rt)),nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?_t+="-":_t+="- ",_t+=nt.dump);nt.tag=xt,nt.dump=_t||"[]"}function writeFlowMapping(nt,rt,it){var st="",_t=nt.tag,xt=Object.keys(it),Et,kt,Lt,It,Rt;for(Et=0,kt=xt.length;Et<kt;Et+=1)Rt="",st!==""&&(Rt+=", "),nt.condenseFlow&&(Rt+='"'),Lt=xt[Et],It=it[Lt],nt.replacer&&(It=nt.replacer.call(it,Lt,It)),writeNode(nt,rt,Lt,!1,!1)&&(nt.dump.length>1024&&(Rt+="? "),Rt+=nt.dump+(nt.condenseFlow?'"':"")+":"+(nt.condenseFlow?"":" "),writeNode(nt,rt,It,!1,!1)&&(Rt+=nt.dump,st+=Rt));nt.tag=_t,nt.dump="{"+st+"}"}function writeBlockMapping(nt,rt,it,st){var _t="",xt=nt.tag,Et=Object.keys(it),kt,Lt,It,Rt,Nt,Bt;if(nt.sortKeys===!0)Et.sort();else if(typeof nt.sortKeys=="function")Et.sort(nt.sortKeys);else if(nt.sortKeys)throw new exception$1("sortKeys must be a boolean or a function");for(kt=0,Lt=Et.length;kt<Lt;kt+=1)Bt="",(!st||_t!=="")&&(Bt+=generateNextLine(nt,rt)),It=Et[kt],Rt=it[It],nt.replacer&&(Rt=nt.replacer.call(it,It,Rt)),writeNode(nt,rt+1,It,!0,!0,!0)&&(Nt=nt.tag!==null&&nt.tag!=="?"||nt.dump&&nt.dump.length>1024,Nt&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Bt+="?":Bt+="? "),Bt+=nt.dump,Nt&&(Bt+=generateNextLine(nt,rt)),writeNode(nt,rt+1,Rt,!0,Nt)&&(nt.dump&&CHAR_LINE_FEED===nt.dump.charCodeAt(0)?Bt+=":":Bt+=": ",Bt+=nt.dump,_t+=Bt));nt.tag=xt,nt.dump=_t||"{}"}function detectType$1(nt,rt,it){var st,_t,xt,Et,kt,Lt;for(_t=it?nt.explicitTypes:nt.implicitTypes,xt=0,Et=_t.length;xt<Et;xt+=1)if(kt=_t[xt],(kt.instanceOf||kt.predicate)&&(!kt.instanceOf||typeof rt=="object"&&rt instanceof kt.instanceOf)&&(!kt.predicate||kt.predicate(rt))){if(it?kt.multi&&kt.representName?nt.tag=kt.representName(rt):nt.tag=kt.tag:nt.tag="?",kt.represent){if(Lt=nt.styleMap[kt.tag]||kt.defaultStyle,_toString.call(kt.represent)==="[object Function]")st=kt.represent(rt,Lt);else if(_hasOwnProperty.call(kt.represent,Lt))st=kt.represent[Lt](rt,Lt);else throw new exception$1("!<"+kt.tag+'> tag resolver accepts not "'+Lt+'" style');nt.dump=st}return!0}return!1}function writeNode(nt,rt,it,st,_t,xt,Et){nt.tag=null,nt.dump=it,detectType$1(nt,it,!1)||detectType$1(nt,it,!0);var kt=_toString.call(nt.dump),Lt=st,It;st&&(st=nt.flowLevel<0||nt.flowLevel>rt);var Rt=kt==="[object Object]"||kt==="[object Array]",Nt,Bt;if(Rt&&(Nt=nt.duplicates.indexOf(it),Bt=Nt!==-1),(nt.tag!==null&&nt.tag!=="?"||Bt||nt.indent!==2&&rt>0)&&(_t=!1),Bt&&nt.usedDuplicates[Nt])nt.dump="*ref_"+Nt;else{if(Rt&&Bt&&!nt.usedDuplicates[Nt]&&(nt.usedDuplicates[Nt]=!0),kt==="[object Object]")st&&Object.keys(nt.dump).length!==0?(writeBlockMapping(nt,rt,nt.dump,_t),Bt&&(nt.dump="&ref_"+Nt+nt.dump)):(writeFlowMapping(nt,rt,nt.dump),Bt&&(nt.dump="&ref_"+Nt+" "+nt.dump));else if(kt==="[object Array]")st&&nt.dump.length!==0?(nt.noArrayIndent&&!Et&&rt>0?writeBlockSequence(nt,rt-1,nt.dump,_t):writeBlockSequence(nt,rt,nt.dump,_t),Bt&&(nt.dump="&ref_"+Nt+nt.dump)):(writeFlowSequence(nt,rt,nt.dump),Bt&&(nt.dump="&ref_"+Nt+" "+nt.dump));else if(kt==="[object String]")nt.tag!=="?"&&writeScalar(nt,nt.dump,rt,xt,Lt);else{if(kt==="[object Undefined]")return!1;if(nt.skipInvalid)return!1;throw new exception$1("unacceptable kind of an object to dump "+kt)}nt.tag!==null&&nt.tag!=="?"&&(It=encodeURI(nt.tag[0]==="!"?nt.tag.slice(1):nt.tag).replace(/!/g,"%21"),nt.tag[0]==="!"?It="!"+It:It.slice(0,18)==="tag:yaml.org,2002:"?It="!!"+It.slice(18):It="!<"+It+">",nt.dump=It+" "+nt.dump)}return!0}function getDuplicateReferences(nt,rt){var it=[],st=[],_t,xt;for(inspectNode(nt,it,st),_t=0,xt=st.length;_t<xt;_t+=1)rt.duplicates.push(it[st[_t]]);rt.usedDuplicates=new Array(xt)}function inspectNode(nt,rt,it){var st,_t,xt;if(nt!==null&&typeof nt=="object")if(_t=rt.indexOf(nt),_t!==-1)it.indexOf(_t)===-1&&it.push(_t);else if(rt.push(nt),Array.isArray(nt))for(_t=0,xt=nt.length;_t<xt;_t+=1)inspectNode(nt[_t],rt,it);else for(st=Object.keys(nt),_t=0,xt=st.length;_t<xt;_t+=1)inspectNode(nt[st[_t]],rt,it)}function dump$1(nt,rt){rt=rt||{};var it=new State(rt);it.noRefs||getDuplicateReferences(nt,it);var st=nt;return it.replacer&&(st=it.replacer.call({"":st},"",st)),writeNode(it,0,st,!0,!0)?it.dump+`
`:""}var dump_1=dump$1,dumper={dump:dump_1};function renamed(nt,rt){return function(){throw new Error("Function yaml."+nt+" is removed in js-yaml 4. Use yaml."+rt+" instead, which is now safe by default.")}}var Type$3=type$1,Schema=schema$1,FAILSAFE_SCHEMA$1=failsafe$1,JSON_SCHEMA=json$1,CORE_SCHEMA=core$1,DEFAULT_SCHEMA=_default$1,load$2=loader$4.load,loadAll=loader$4.loadAll,dump=dumper.dump,YAMLException=exception$1,types$8={binary:binary$1,float:float$1,map:map$3,null:_null$1,pairs:pairs$1,set:set$3,timestamp:timestamp$1,bool:bool$1,int:int$1,merge:merge$4,omap:omap$1,seq:seq$2,str:str$1},safeLoad=renamed("safeLoad","load"),safeLoadAll=renamed("safeLoadAll","loadAll"),safeDump=renamed("safeDump","dump"),jsYaml={Type:Type$3,Schema,FAILSAFE_SCHEMA:FAILSAFE_SCHEMA$1,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SCHEMA,load:load$2,loadAll,dump,YAMLException,types:types$8,safeLoad,safeLoadAll,safeDump};function*activeElements(nt=document.activeElement){nt!=null&&(yield nt,"shadowRoot"in nt&&nt.shadowRoot&&nt.shadowRoot.mode!=="closed"&&(yield*__yieldStar(activeElements(nt.shadowRoot.activeElement))))}function getDeepestActiveElement(){return[...activeElements()].pop()}var computedStyleMap=new WeakMap;function getCachedComputedStyle(nt){let rt=computedStyleMap.get(nt);return rt||(rt=window.getComputedStyle(nt,null),computedStyleMap.set(nt,rt)),rt}function isVisible(nt){if(typeof nt.checkVisibility=="function")return nt.checkVisibility({checkOpacity:!1,checkVisibilityCSS:!0});const rt=getCachedComputedStyle(nt);return rt.visibility!=="hidden"&&rt.display!=="none"}function isOverflowingAndTabbable(nt){const rt=getCachedComputedStyle(nt),{overflowY:it,overflowX:st}=rt;return it==="scroll"||st==="scroll"?!0:it!=="auto"||st!=="auto"?!1:nt.scrollHeight>nt.clientHeight&&it==="auto"||nt.scrollWidth>nt.clientWidth&&st==="auto"}function isTabbable(nt){const rt=nt.tagName.toLowerCase(),it=Number(nt.getAttribute("tabindex"));if(nt.hasAttribute("tabindex")&&(isNaN(it)||it<=-1)||nt.hasAttribute("disabled")||nt.closest("[inert]"))return!1;if(rt==="input"&&nt.getAttribute("type")==="radio"){const xt=nt.getRootNode(),Et=`input[type='radio'][name="${nt.getAttribute("name")}"]`,kt=xt.querySelector(`${Et}:checked`);return kt?kt===nt:xt.querySelector(Et)===nt}return isVisible(nt)?(rt==="audio"||rt==="video")&&nt.hasAttribute("controls")||nt.hasAttribute("tabindex")||nt.hasAttribute("contenteditable")&&nt.getAttribute("contenteditable")!=="false"||["button","input","select","textarea","a","audio","video","summary","iframe"].includes(rt)?!0:isOverflowingAndTabbable(nt):!1}function getTabbableBoundary(nt){var rt,it;const st=getTabbableElements(nt),_t=(rt=st[0])!=null?rt:null,xt=(it=st[st.length-1])!=null?it:null;return{start:_t,end:xt}}function getSlottedChildrenOutsideRootElement(nt,rt){var it;return((it=nt.getRootNode({composed:!0}))==null?void 0:it.host)!==rt}function getTabbableElements(nt){const rt=new WeakMap,it=[];function st(_t){if(_t instanceof Element){if(_t.hasAttribute("inert")||_t.closest("[inert]")||rt.has(_t))return;rt.set(_t,!0),!it.includes(_t)&&isTabbable(_t)&&it.push(_t),_t instanceof HTMLSlotElement&&getSlottedChildrenOutsideRootElement(_t,nt)&&_t.assignedElements({flatten:!0}).forEach(xt=>{st(xt)}),_t.shadowRoot!==null&&_t.shadowRoot.mode==="open"&&st(_t.shadowRoot)}for(const xt of _t.children)st(xt)}return st(nt),it.sort((_t,xt)=>{const Et=Number(_t.getAttribute("tabindex"))||0;return(Number(xt.getAttribute("tabindex"))||0)-Et})}var activeModals=[],Modal$1=class{constructor(nt){this.tabDirection="forward",this.handleFocusIn=()=>{!this.isActive()||this.checkFocus()},this.handleKeyDown=rt=>{var it;if(rt.key!=="Tab"||this.isExternalActivated||!this.isActive())return;const st=getDeepestActiveElement();if(this.previousFocus=st,this.previousFocus&&this.possiblyHasTabbableChildren(this.previousFocus))return;rt.shiftKey?this.tabDirection="backward":this.tabDirection="forward";const _t=getTabbableElements(this.element);let xt=_t.findIndex(kt=>kt===st);this.previousFocus=this.currentFocus;const Et=this.tabDirection==="forward"?1:-1;for(;;){xt+Et>=_t.length?xt=0:xt+Et<0?xt=_t.length-1:xt+=Et,this.previousFocus=this.currentFocus;const kt=_t[xt];if(this.tabDirection==="backward"&&this.previousFocus&&this.possiblyHasTabbableChildren(this.previousFocus)||kt&&this.possiblyHasTabbableChildren(kt))return;rt.preventDefault(),this.currentFocus=kt,(it=this.currentFocus)==null||it.focus({preventScroll:!1});const Lt=[...activeElements()];if(Lt.includes(this.currentFocus)||!Lt.includes(this.previousFocus))break}setTimeout(()=>this.checkFocus())},this.handleKeyUp=()=>{this.tabDirection="forward"},this.element=nt,this.elementsWithTabbableControls=["iframe"]}activate(){activeModals.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){activeModals=activeModals.filter(nt=>nt!==this.element),this.currentFocus=null,document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return activeModals[activeModals.length-1]===this.element}activateExternal(){this.isExternalActivated=!0}deactivateExternal(){this.isExternalActivated=!1}checkFocus(){if(this.isActive()&&!this.isExternalActivated){const nt=getTabbableElements(this.element);if(!this.element.matches(":focus-within")){const rt=nt[0],it=nt[nt.length-1],st=this.tabDirection==="forward"?rt:it;typeof(st==null?void 0:st.focus)=="function"&&(this.currentFocus=st,st.focus({preventScroll:!1}))}}}possiblyHasTabbableChildren(nt){return this.elementsWithTabbableControls.includes(nt.tagName.toLowerCase())||nt.hasAttribute("controls")}};function getOffset(nt,rt){return{top:Math.round(nt.getBoundingClientRect().top-rt.getBoundingClientRect().top),left:Math.round(nt.getBoundingClientRect().left-rt.getBoundingClientRect().left)}}var locks=new Set;function getScrollbarWidth(){const nt=document.documentElement.clientWidth;return Math.abs(window.innerWidth-nt)}function getExistingBodyPadding(){const nt=Number(getComputedStyle(document.body).paddingRight.replace(/px/,""));return isNaN(nt)||!nt?0:nt}function lockBodyScrolling(nt){if(locks.add(nt),!document.documentElement.classList.contains("sl-scroll-lock")){const rt=getScrollbarWidth()+getExistingBodyPadding();let it=getComputedStyle(document.documentElement).scrollbarGutter;(!it||it==="auto")&&(it="stable"),rt<2&&(it=""),document.documentElement.style.setProperty("--sl-scroll-lock-gutter",it),document.documentElement.classList.add("sl-scroll-lock"),document.documentElement.style.setProperty("--sl-scroll-lock-size",`${rt}px`)}}function unlockBodyScrolling(nt){locks.delete(nt),locks.size===0&&(document.documentElement.classList.remove("sl-scroll-lock"),document.documentElement.style.removeProperty("--sl-scroll-lock-size"))}function scrollIntoView(nt,rt,it="vertical",st="smooth"){const _t=getOffset(nt,rt),xt=_t.top+rt.scrollTop,Et=_t.left+rt.scrollLeft,kt=rt.scrollLeft,Lt=rt.scrollLeft+rt.offsetWidth,It=rt.scrollTop,Rt=rt.scrollTop+rt.offsetHeight;(it==="horizontal"||it==="both")&&(Et<kt?rt.scrollTo({left:Et,behavior:st}):Et+nt.clientWidth>Lt&&rt.scrollTo({left:Et-rt.offsetWidth+nt.clientWidth,behavior:st})),(it==="vertical"||it==="both")&&(xt<It?rt.scrollTo({top:xt,behavior:st}):xt+nt.clientHeight>Rt&&rt.scrollTo({top:xt-rt.offsetHeight+nt.clientHeight,behavior:st}))}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$3=globalThis,e$8=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$3=Symbol(),o$9=new WeakMap;class n$7{constructor(rt,it,st){if(this._$cssResult$=!0,st!==s$3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=rt,this.t=it}get styleSheet(){let rt=this.o;const it=this.t;if(e$8&&rt===void 0){const st=it!==void 0&&it.length===1;st&&(rt=o$9.get(it)),rt===void 0&&((this.o=rt=new CSSStyleSheet).replaceSync(this.cssText),st&&o$9.set(it,rt))}return rt}toString(){return this.cssText}}const r$5=nt=>new n$7(typeof nt=="string"?nt:nt+"",void 0,s$3),i$7=(nt,...rt)=>{const it=nt.length===1?nt[0]:rt.reduce((st,_t,xt)=>st+(Et=>{if(Et._$cssResult$===!0)return Et.cssText;if(typeof Et=="number")return Et;throw Error("Value passed to 'css' function must be a 'css' function result: "+Et+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(_t)+nt[xt+1],nt[0]);return new n$7(it,nt,s$3)},S$1=(nt,rt)=>{if(e$8)nt.adoptedStyleSheets=rt.map(it=>it instanceof CSSStyleSheet?it:it.styleSheet);else for(const it of rt){const st=document.createElement("style"),_t=t$3.litNonce;_t!==void 0&&st.setAttribute("nonce",_t),st.textContent=it.cssText,nt.appendChild(st)}},c$4=e$8?nt=>nt:nt=>nt instanceof CSSStyleSheet?(rt=>{let it="";for(const st of rt.cssRules)it+=st.cssText;return r$5(it)})(nt):nt;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:i$6,defineProperty:e$7,getOwnPropertyDescriptor:h$3,getOwnPropertyNames:r$4,getOwnPropertySymbols:o$8,getPrototypeOf:n$6}=Object,a$2=globalThis,c$3=a$2.trustedTypes,l$3=c$3?c$3.emptyScript:"",p$1=a$2.reactiveElementPolyfillSupport,d$1=(nt,rt)=>nt,u$3={toAttribute(nt,rt){switch(rt){case Boolean:nt=nt?l$3:null;break;case Object:case Array:nt=nt==null?nt:JSON.stringify(nt)}return nt},fromAttribute(nt,rt){let it=nt;switch(rt){case Boolean:it=nt!==null;break;case Number:it=nt===null?null:Number(nt);break;case Object:case Array:try{it=JSON.parse(nt)}catch{it=null}}return it}},f$4=(nt,rt)=>!i$6(nt,rt),b={attribute:!0,type:String,converter:u$3,reflect:!1,useDefault:!1,hasChanged:f$4};var Jb,Qb;(Jb=Symbol.metadata)!=null||(Symbol.metadata=Symbol("metadata")),(Qb=a$2.litPropertyMetadata)!=null||(a$2.litPropertyMetadata=new WeakMap);class y$2 extends HTMLElement{static addInitializer(rt){var it;this._$Ei(),((it=this.l)!=null?it:this.l=[]).push(rt)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(rt,it=b){if(it.state&&(it.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(rt)&&((it=Object.create(it)).wrapped=!0),this.elementProperties.set(rt,it),!it.noAccessor){const st=Symbol(),_t=this.getPropertyDescriptor(rt,st,it);_t!==void 0&&e$7(this.prototype,rt,_t)}}static getPropertyDescriptor(rt,it,st){var Et;const{get:_t,set:xt}=(Et=h$3(this.prototype,rt))!=null?Et:{get(){return this[it]},set(kt){this[it]=kt}};return{get:_t,set(kt){const Lt=_t==null?void 0:_t.call(this);xt==null||xt.call(this,kt),this.requestUpdate(rt,Lt,st)},configurable:!0,enumerable:!0}}static getPropertyOptions(rt){var it;return(it=this.elementProperties.get(rt))!=null?it:b}static _$Ei(){if(this.hasOwnProperty(d$1("elementProperties")))return;const rt=n$6(this);rt.finalize(),rt.l!==void 0&&(this.l=[...rt.l]),this.elementProperties=new Map(rt.elementProperties)}static finalize(){if(this.hasOwnProperty(d$1("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d$1("properties"))){const it=this.properties,st=[...r$4(it),...o$8(it)];for(const _t of st)this.createProperty(_t,it[_t])}const rt=this[Symbol.metadata];if(rt!==null){const it=litPropertyMetadata.get(rt);if(it!==void 0)for(const[st,_t]of it)this.elementProperties.set(st,_t)}this._$Eh=new Map;for(const[it,st]of this.elementProperties){const _t=this._$Eu(it,st);_t!==void 0&&this._$Eh.set(_t,it)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(rt){const it=[];if(Array.isArray(rt)){const st=new Set(rt.flat(1/0).reverse());for(const _t of st)it.unshift(c$4(_t))}else rt!==void 0&&it.push(c$4(rt));return it}static _$Eu(rt,it){const st=it.attribute;return st===!1?void 0:typeof st=="string"?st:typeof rt=="string"?rt.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var rt;this._$ES=new Promise(it=>this.enableUpdating=it),this._$AL=new Map,this._$E_(),this.requestUpdate(),(rt=this.constructor.l)==null||rt.forEach(it=>it(this))}addController(rt){var it,st;((it=this._$EO)!=null?it:this._$EO=new Set).add(rt),this.renderRoot!==void 0&&this.isConnected&&((st=rt.hostConnected)==null||st.call(rt))}removeController(rt){var it;(it=this._$EO)==null||it.delete(rt)}_$E_(){const rt=new Map,it=this.constructor.elementProperties;for(const st of it.keys())this.hasOwnProperty(st)&&(rt.set(st,this[st]),delete this[st]);rt.size>0&&(this._$Ep=rt)}createRenderRoot(){var it;const rt=(it=this.shadowRoot)!=null?it:this.attachShadow(this.constructor.shadowRootOptions);return S$1(rt,this.constructor.elementStyles),rt}connectedCallback(){var rt,it;(rt=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(it=this._$EO)==null||it.forEach(st=>{var _t;return(_t=st.hostConnected)==null?void 0:_t.call(st)})}enableUpdating(rt){}disconnectedCallback(){var rt;(rt=this._$EO)==null||rt.forEach(it=>{var st;return(st=it.hostDisconnected)==null?void 0:st.call(it)})}attributeChangedCallback(rt,it,st){this._$AK(rt,st)}_$ET(rt,it){var xt;const st=this.constructor.elementProperties.get(rt),_t=this.constructor._$Eu(rt,st);if(_t!==void 0&&st.reflect===!0){const Et=(((xt=st.converter)==null?void 0:xt.toAttribute)!==void 0?st.converter:u$3).toAttribute(it,st.type);this._$Em=rt,Et==null?this.removeAttribute(_t):this.setAttribute(_t,Et),this._$Em=null}}_$AK(rt,it){var xt,Et,kt,Lt;const st=this.constructor,_t=st._$Eh.get(rt);if(_t!==void 0&&this._$Em!==_t){const It=st.getPropertyOptions(_t),Rt=typeof It.converter=="function"?{fromAttribute:It.converter}:((xt=It.converter)==null?void 0:xt.fromAttribute)!==void 0?It.converter:u$3;this._$Em=_t,this[_t]=(Lt=(kt=Rt.fromAttribute(it,It.type))!=null?kt:(Et=this._$Ej)==null?void 0:Et.get(_t))!=null?Lt:null,this._$Em=null}}requestUpdate(rt,it,st){var _t,xt;if(rt!==void 0){const Et=this.constructor,kt=this[rt];if(st!=null||(st=Et.getPropertyOptions(rt)),!(((_t=st.hasChanged)!=null?_t:f$4)(kt,it)||st.useDefault&&st.reflect&&kt===((xt=this._$Ej)==null?void 0:xt.get(rt))&&!this.hasAttribute(Et._$Eu(rt,st))))return;this.C(rt,it,st)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(rt,it,{useDefault:st,reflect:_t,wrapped:xt},Et){var kt,Lt,It;st&&!((kt=this._$Ej)!=null?kt:this._$Ej=new Map).has(rt)&&(this._$Ej.set(rt,(Lt=Et!=null?Et:it)!=null?Lt:this[rt]),xt!==!0||Et!==void 0)||(this._$AL.has(rt)||(this.hasUpdated||st||(it=void 0),this._$AL.set(rt,it)),_t===!0&&this._$Em!==rt&&((It=this._$Eq)!=null?It:this._$Eq=new Set).add(rt))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(it){Promise.reject(it)}const rt=this.scheduleUpdate();return rt!=null&&await rt,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var st,_t;if(!this.isUpdatePending)return;if(!this.hasUpdated){if((st=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[Et,kt]of this._$Ep)this[Et]=kt;this._$Ep=void 0}const xt=this.constructor.elementProperties;if(xt.size>0)for(const[Et,kt]of xt){const{wrapped:Lt}=kt,It=this[Et];Lt!==!0||this._$AL.has(Et)||It===void 0||this.C(Et,void 0,kt,It)}}let rt=!1;const it=this._$AL;try{rt=this.shouldUpdate(it),rt?(this.willUpdate(it),(_t=this._$EO)==null||_t.forEach(xt=>{var Et;return(Et=xt.hostUpdate)==null?void 0:Et.call(xt)}),this.update(it)):this._$EM()}catch(xt){throw rt=!1,this._$EM(),xt}rt&&this._$AE(it)}willUpdate(rt){}_$AE(rt){var it;(it=this._$EO)==null||it.forEach(st=>{var _t;return(_t=st.hostUpdated)==null?void 0:_t.call(st)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(rt)),this.updated(rt)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(rt){return!0}update(rt){this._$Eq&&(this._$Eq=this._$Eq.forEach(it=>this._$ET(it,this[it]))),this._$EM()}updated(rt){}firstUpdated(rt){}}var n2;y$2.elementStyles=[],y$2.shadowRootOptions={mode:"open"},y$2[d$1("elementProperties")]=new Map,y$2[d$1("finalized")]=new Map,p$1==null||p$1({ReactiveElement:y$2}),((n2=a$2.reactiveElementVersions)!=null?n2:a$2.reactiveElementVersions=[]).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$2=globalThis,i$5=t$2.trustedTypes,s$2=i$5?i$5.createPolicy("lit-html",{createHTML:nt=>nt}):void 0,e$6="$lit$",h$2=`lit$${Math.random().toFixed(9).slice(2)}$`,o$7="?"+h$2,n$5=`<${o$7}>`,r$3=document,l$2=()=>r$3.createComment(""),c$2=nt=>nt===null||typeof nt!="object"&&typeof nt!="function",a$1=Array.isArray,u$2=nt=>a$1(nt)||typeof(nt==null?void 0:nt[Symbol.iterator])=="function",d=`[ 	
\f\r]`,f$3=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,_$1=/>/g,m$1=RegExp(`>|${d}(?:([^\\s"'>=/]+)(${d}*=${d}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),p=/'/g,g=/"/g,$=/^(?:script|style|textarea|title)$/i,y$1=nt=>(rt,...it)=>({_$litType$:nt,strings:rt,values:it}),x$1=y$1(1),T=Symbol.for("lit-noChange"),E=Symbol.for("lit-nothing"),A=new WeakMap,C=r$3.createTreeWalker(r$3,129);function P(nt,rt){if(!a$1(nt)||!nt.hasOwnProperty("raw"))throw Error("invalid template strings array");return s$2!==void 0?s$2.createHTML(rt):rt}const V=(nt,rt)=>{const it=nt.length-1,st=[];let _t,xt=rt===2?"<svg>":rt===3?"<math>":"",Et=f$3;for(let kt=0;kt<it;kt++){const Lt=nt[kt];let It,Rt,Nt=-1,Bt=0;for(;Bt<Lt.length&&(Et.lastIndex=Bt,Rt=Et.exec(Lt),Rt!==null);)Bt=Et.lastIndex,Et===f$3?Rt[1]==="!--"?Et=v:Rt[1]!==void 0?Et=_$1:Rt[2]!==void 0?($.test(Rt[2])&&(_t=RegExp("</"+Rt[2],"g")),Et=m$1):Rt[3]!==void 0&&(Et=m$1):Et===m$1?Rt[0]===">"?(Et=_t!=null?_t:f$3,Nt=-1):Rt[1]===void 0?Nt=-2:(Nt=Et.lastIndex-Rt[2].length,It=Rt[1],Et=Rt[3]===void 0?m$1:Rt[3]==='"'?g:p):Et===g||Et===p?Et=m$1:Et===v||Et===_$1?Et=f$3:(Et=m$1,_t=void 0);const Ft=Et===m$1&&nt[kt+1].startsWith("/>")?" ":"";xt+=Et===f$3?Lt+n$5:Nt>=0?(st.push(It),Lt.slice(0,Nt)+e$6+Lt.slice(Nt)+h$2+Ft):Lt+h$2+(Nt===-2?kt:Ft)}return[P(nt,xt+(nt[it]||"<?>")+(rt===2?"</svg>":rt===3?"</math>":"")),st]};class N{constructor({strings:rt,_$litType$:it},st){let _t;this.parts=[];let xt=0,Et=0;const kt=rt.length-1,Lt=this.parts,[It,Rt]=V(rt,it);if(this.el=N.createElement(It,st),C.currentNode=this.el.content,it===2||it===3){const Nt=this.el.content.firstChild;Nt.replaceWith(...Nt.childNodes)}for(;(_t=C.nextNode())!==null&&Lt.length<kt;){if(_t.nodeType===1){if(_t.hasAttributes())for(const Nt of _t.getAttributeNames())if(Nt.endsWith(e$6)){const Bt=Rt[Et++],Ft=_t.getAttribute(Nt).split(h$2),Yt=/([.?@])?(.*)/.exec(Bt);Lt.push({type:1,index:xt,name:Yt[2],strings:Ft,ctor:Yt[1]==="."?H:Yt[1]==="?"?I:Yt[1]==="@"?L$2:k}),_t.removeAttribute(Nt)}else Nt.startsWith(h$2)&&(Lt.push({type:6,index:xt}),_t.removeAttribute(Nt));if($.test(_t.tagName)){const Nt=_t.textContent.split(h$2),Bt=Nt.length-1;if(Bt>0){_t.textContent=i$5?i$5.emptyScript:"";for(let Ft=0;Ft<Bt;Ft++)_t.append(Nt[Ft],l$2()),C.nextNode(),Lt.push({type:2,index:++xt});_t.append(Nt[Bt],l$2())}}}else if(_t.nodeType===8)if(_t.data===o$7)Lt.push({type:2,index:xt});else{let Nt=-1;for(;(Nt=_t.data.indexOf(h$2,Nt+1))!==-1;)Lt.push({type:7,index:xt}),Nt+=h$2.length-1}xt++}}static createElement(rt,it){const st=r$3.createElement("template");return st.innerHTML=rt,st}}function S(nt,rt,it=nt,st){var Et,kt,Lt;if(rt===T)return rt;let _t=st!==void 0?(Et=it._$Co)==null?void 0:Et[st]:it._$Cl;const xt=c$2(rt)?void 0:rt._$litDirective$;return(_t==null?void 0:_t.constructor)!==xt&&((kt=_t==null?void 0:_t._$AO)==null||kt.call(_t,!1),xt===void 0?_t=void 0:(_t=new xt(nt),_t._$AT(nt,it,st)),st!==void 0?((Lt=it._$Co)!=null?Lt:it._$Co=[])[st]=_t:it._$Cl=_t),_t!==void 0&&(rt=S(nt,_t._$AS(nt,rt.values),_t,st)),rt}class M{constructor(rt,it){this._$AV=[],this._$AN=void 0,this._$AD=rt,this._$AM=it}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(rt){var It;const{el:{content:it},parts:st}=this._$AD,_t=((It=rt==null?void 0:rt.creationScope)!=null?It:r$3).importNode(it,!0);C.currentNode=_t;let xt=C.nextNode(),Et=0,kt=0,Lt=st[0];for(;Lt!==void 0;){if(Et===Lt.index){let Rt;Lt.type===2?Rt=new R(xt,xt.nextSibling,this,rt):Lt.type===1?Rt=new Lt.ctor(xt,Lt.name,Lt.strings,this,rt):Lt.type===6&&(Rt=new z(xt,this,rt)),this._$AV.push(Rt),Lt=st[++kt]}Et!==(Lt==null?void 0:Lt.index)&&(xt=C.nextNode(),Et++)}return C.currentNode=r$3,_t}p(rt){let it=0;for(const st of this._$AV)st!==void 0&&(st.strings!==void 0?(st._$AI(rt,st,it),it+=st.strings.length-2):st._$AI(rt[it])),it++}}class R{get _$AU(){var rt,it;return(it=(rt=this._$AM)==null?void 0:rt._$AU)!=null?it:this._$Cv}constructor(rt,it,st,_t){var xt;this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=rt,this._$AB=it,this._$AM=st,this.options=_t,this._$Cv=(xt=_t==null?void 0:_t.isConnected)!=null?xt:!0}get parentNode(){let rt=this._$AA.parentNode;const it=this._$AM;return it!==void 0&&(rt==null?void 0:rt.nodeType)===11&&(rt=it.parentNode),rt}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(rt,it=this){rt=S(this,rt,it),c$2(rt)?rt===E||rt==null||rt===""?(this._$AH!==E&&this._$AR(),this._$AH=E):rt!==this._$AH&&rt!==T&&this._(rt):rt._$litType$!==void 0?this.$(rt):rt.nodeType!==void 0?this.T(rt):u$2(rt)?this.k(rt):this._(rt)}O(rt){return this._$AA.parentNode.insertBefore(rt,this._$AB)}T(rt){this._$AH!==rt&&(this._$AR(),this._$AH=this.O(rt))}_(rt){this._$AH!==E&&c$2(this._$AH)?this._$AA.nextSibling.data=rt:this.T(r$3.createTextNode(rt)),this._$AH=rt}$(rt){var xt;const{values:it,_$litType$:st}=rt,_t=typeof st=="number"?this._$AC(rt):(st.el===void 0&&(st.el=N.createElement(P(st.h,st.h[0]),this.options)),st);if(((xt=this._$AH)==null?void 0:xt._$AD)===_t)this._$AH.p(it);else{const Et=new M(_t,this),kt=Et.u(this.options);Et.p(it),this.T(kt),this._$AH=Et}}_$AC(rt){let it=A.get(rt.strings);return it===void 0&&A.set(rt.strings,it=new N(rt)),it}k(rt){a$1(this._$AH)||(this._$AH=[],this._$AR());const it=this._$AH;let st,_t=0;for(const xt of rt)_t===it.length?it.push(st=new R(this.O(l$2()),this.O(l$2()),this,this.options)):st=it[_t],st._$AI(xt),_t++;_t<it.length&&(this._$AR(st&&st._$AB.nextSibling,_t),it.length=_t)}_$AR(rt=this._$AA.nextSibling,it){var st;for((st=this._$AP)==null?void 0:st.call(this,!1,!0,it);rt&&rt!==this._$AB;){const _t=rt.nextSibling;rt.remove(),rt=_t}}setConnected(rt){var it;this._$AM===void 0&&(this._$Cv=rt,(it=this._$AP)==null||it.call(this,rt))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(rt,it,st,_t,xt){this.type=1,this._$AH=E,this._$AN=void 0,this.element=rt,this.name=it,this._$AM=_t,this.options=xt,st.length>2||st[0]!==""||st[1]!==""?(this._$AH=Array(st.length-1).fill(new String),this.strings=st):this._$AH=E}_$AI(rt,it=this,st,_t){const xt=this.strings;let Et=!1;if(xt===void 0)rt=S(this,rt,it,0),Et=!c$2(rt)||rt!==this._$AH&&rt!==T,Et&&(this._$AH=rt);else{const kt=rt;let Lt,It;for(rt=xt[0],Lt=0;Lt<xt.length-1;Lt++)It=S(this,kt[st+Lt],it,Lt),It===T&&(It=this._$AH[Lt]),Et||(Et=!c$2(It)||It!==this._$AH[Lt]),It===E?rt=E:rt!==E&&(rt+=(It!=null?It:"")+xt[Lt+1]),this._$AH[Lt]=It}Et&&!_t&&this.j(rt)}j(rt){rt===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,rt!=null?rt:"")}}class H extends k{constructor(){super(...arguments),this.type=3}j(rt){this.element[this.name]=rt===E?void 0:rt}}class I extends k{constructor(){super(...arguments),this.type=4}j(rt){this.element.toggleAttribute(this.name,!!rt&&rt!==E)}}class L$2 extends k{constructor(rt,it,st,_t,xt){super(rt,it,st,_t,xt),this.type=5}_$AI(rt,it=this){var Et;if((rt=(Et=S(this,rt,it,0))!=null?Et:E)===T)return;const st=this._$AH,_t=rt===E&&st!==E||rt.capture!==st.capture||rt.once!==st.once||rt.passive!==st.passive,xt=rt!==E&&(st===E||_t);_t&&this.element.removeEventListener(this.name,this,st),xt&&this.element.addEventListener(this.name,this,rt),this._$AH=rt}handleEvent(rt){var it,st;typeof this._$AH=="function"?this._$AH.call((st=(it=this.options)==null?void 0:it.host)!=null?st:this.element,rt):this._$AH.handleEvent(rt)}}class z{constructor(rt,it,st){this.element=rt,this.type=6,this._$AN=void 0,this._$AM=it,this.options=st}get _$AU(){return this._$AM._$AU}_$AI(rt){S(this,rt)}}const j=t$2.litHtmlPolyfillSupport;var r2;j==null||j(N,R),((r2=t$2.litHtmlVersions)!=null?r2:t$2.litHtmlVersions=[]).push("3.3.0");const B=(nt,rt,it)=>{var xt,Et;const st=(xt=it==null?void 0:it.renderBefore)!=null?xt:rt;let _t=st._$litPart$;if(_t===void 0){const kt=(Et=it==null?void 0:it.renderBefore)!=null?Et:null;st._$litPart$=_t=new R(rt.insertBefore(l$2(),kt),kt,void 0,it!=null?it:{})}return _t._$AI(nt),_t};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const s$1=globalThis;class i$4 extends y$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var it,st;const rt=super.createRenderRoot();return(st=(it=this.renderOptions).renderBefore)!=null||(it.renderBefore=rt.firstChild),rt}update(rt){const it=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(rt),this._$Do=B(it,this.renderRoot,this.renderOptions)}connectedCallback(){var rt;super.connectedCallback(),(rt=this._$Do)==null||rt.setConnected(!0)}disconnectedCallback(){var rt;super.disconnectedCallback(),(rt=this._$Do)==null||rt.setConnected(!1)}render(){return T}}var i2;i$4._$litElement$=!0,i$4.finalized=!0,(i2=s$1.litElementHydrateSupport)==null||i2.call(s$1,{LitElement:i$4});const o$6=s$1.litElementPolyfillSupport;o$6==null||o$6({LitElement:i$4});var o2;((o2=s$1.litElementVersions)!=null?o2:s$1.litElementVersions=[]).push("4.2.0");var dialog_styles_default=i$7`
  :host {
    --width: 31rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--sl-z-index-dialog);
  }

  .dialog__panel {
    display: flex;
    flex-direction: column;
    z-index: 2;
    width: var(--width);
    max-width: calc(100% - var(--sl-spacing-2x-large));
    max-height: calc(100% - var(--sl-spacing-2x-large));
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--sl-shadow-x-large);
  }

  .dialog__panel:focus {
    outline: none;
  }

  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */
  @media screen and (max-width: 420px) {
    .dialog__panel {
      max-height: 80vh;
    }
  }

  .dialog--open .dialog__panel {
    display: flex;
    opacity: 1;
  }

  .dialog__header {
    flex: 0 0 auto;
    display: flex;
  }

  .dialog__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .dialog__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .dialog__header-actions sl-icon-button,
  .dialog__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .dialog__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .dialog__footer {
    flex: 0 0 auto;
    text-align: right;
    padding: var(--footer-spacing);
  }

  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  .dialog:not(.dialog--has-footer) .dialog__footer {
    display: none;
  }

  .dialog__overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
  }

  @media (forced-colors: active) {
    .dialog__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`,blurActiveElement=nt=>{var rt;const{activeElement:it}=document;it&&nt.contains(it)&&((rt=document.activeElement)==null||rt.blur())},icon_button_styles_default=i$7`
  :host {
    display: inline-block;
    color: var(--sl-color-neutral-600);
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: inherit;
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-x-fast) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus-visible:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .icon-button__icon {
    pointer-events: none;
  }
`,library={name:"default",resolver:nt=>getBasePath(`assets/icons/${nt}.svg`)},library_default_default=library,icons={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,copy:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},systemLibrary={name:"system",resolver:nt=>nt in icons?`data:image/svg+xml,${encodeURIComponent(icons[nt])}`:""},library_system_default=systemLibrary,registry=[library_default_default,library_system_default],watchedIcons=[];function watchIcon(nt){watchedIcons.push(nt)}function unwatchIcon(nt){watchedIcons=watchedIcons.filter(rt=>rt!==nt)}function getIconLibrary(nt){return registry.find(rt=>rt.name===nt)}var icon_styles_default=i$7`
  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`;function watch(nt,rt){const it=__spreadValues({waitUntilFirstUpdate:!1},rt);return(st,_t)=>{const{update:xt}=st,Et=Array.isArray(nt)?nt:[nt];st.update=function(kt){Et.forEach(Lt=>{const It=Lt;if(kt.has(It)){const Rt=kt.get(It),Nt=this[It];Rt!==Nt&&(!it.waitUntilFirstUpdate||this.hasUpdated)&&this[_t](Rt,Nt)}}),xt.call(this,kt)}}}var component_styles_default=i$7`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$5={attribute:!0,type:String,converter:u$3,reflect:!1,hasChanged:f$4},r$2=(nt=o$5,rt,it)=>{const{kind:st,metadata:_t}=it;let xt=globalThis.litPropertyMetadata.get(_t);if(xt===void 0&&globalThis.litPropertyMetadata.set(_t,xt=new Map),st==="setter"&&((nt=Object.create(nt)).wrapped=!0),xt.set(it.name,nt),st==="accessor"){const{name:Et}=it;return{set(kt){const Lt=rt.get.call(this);rt.set.call(this,kt),this.requestUpdate(Et,Lt,nt)},init(kt){return kt!==void 0&&this.C(Et,void 0,nt,kt),kt}}}if(st==="setter"){const{name:Et}=it;return function(kt){const Lt=this[Et];rt.call(this,kt),this.requestUpdate(Et,Lt,nt)}}throw Error("Unsupported decorator location: "+st)};function n$4(nt){return(rt,it)=>typeof it=="object"?r$2(nt,rt,it):((st,_t,xt)=>{const Et=_t.hasOwnProperty(xt);return _t.constructor.createProperty(xt,st),Et?Object.getOwnPropertyDescriptor(_t,xt):void 0})(nt,rt,it)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function r$1(nt){return n$4({...nt,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function t$1(nt){return(rt,it)=>{const st=typeof rt=="function"?rt:rt[it];Object.assign(st,nt)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e$5=(nt,rt,it)=>(it.configurable=!0,it.enumerable=!0,Reflect.decorate&&typeof rt!="object"&&Object.defineProperty(nt,rt,it),it);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function e$4(nt,rt){return(it,st,_t)=>{const xt=Et=>{var kt,Lt;return(Lt=(kt=Et.renderRoot)==null?void 0:kt.querySelector(nt))!=null?Lt:null};if(rt){const{get:Et,set:kt}=typeof st=="object"?it:_t!=null?_t:(()=>{const Lt=Symbol();return{get(){return this[Lt]},set(It){this[Lt]=It}}})();return e$5(it,st,{get(){let Lt=Et.call(this);return Lt===void 0&&(Lt=xt(this),(Lt!==null||this.hasUpdated)&&kt.call(this,Lt)),Lt}})}return e$5(it,st,{get(){return xt(this)}})}}var _hasRecordedInitialProperties,ShoelaceElement=class extends i$4{constructor(){super(),__privateAdd(this,_hasRecordedInitialProperties,!1),this.initialReflectedProperties=new Map,Object.entries(this.constructor.dependencies).forEach(([nt,rt])=>{this.constructor.define(nt,rt)})}emit(nt,rt){const it=new CustomEvent(nt,__spreadValues({bubbles:!0,cancelable:!1,composed:!0,detail:{}},rt));return this.dispatchEvent(it),it}static define(nt,rt=this,it={}){const st=customElements.get(nt);if(!st){try{customElements.define(nt,rt,it)}catch{customElements.define(nt,class extends rt{},it)}return}let _t=" (unknown version)",xt=_t;"version"in rt&&rt.version&&(_t=" v"+rt.version),"version"in st&&st.version&&(xt=" v"+st.version),!(_t&&xt&&_t===xt)&&console.warn(`Attempted to register <${nt}>${_t}, but <${nt}>${xt} has already been registered.`)}attributeChangedCallback(nt,rt,it){__privateGet(this,_hasRecordedInitialProperties)||(this.constructor.elementProperties.forEach((st,_t)=>{st.reflect&&this[_t]!=null&&this.initialReflectedProperties.set(_t,this[_t])}),__privateSet(this,_hasRecordedInitialProperties,!0)),super.attributeChangedCallback(nt,rt,it)}willUpdate(nt){super.willUpdate(nt),this.initialReflectedProperties.forEach((rt,it)=>{nt.has(it)&&this[it]==null&&(this[it]=rt)})}};_hasRecordedInitialProperties=new WeakMap;ShoelaceElement.version="2.20.1";ShoelaceElement.dependencies={};__decorateClass([n$4()],ShoelaceElement.prototype,"dir",2);__decorateClass([n$4()],ShoelaceElement.prototype,"lang",2);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e$3=(nt,rt)=>rt===void 0?(nt==null?void 0:nt._$litType$)!==void 0:(nt==null?void 0:nt._$litType$)===rt,f$2=nt=>nt.strings===void 0,u$1={},m=(nt,rt=u$1)=>nt._$AH=rt;var CACHEABLE_ERROR=Symbol(),RETRYABLE_ERROR=Symbol(),parser$e,iconCache=new Map,SlIcon=class extends ShoelaceElement{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(nt,rt){var it;let st;if(rt!=null&&rt.spriteSheet)return this.svg=x$1`<svg part="svg">
        <use part="use" href="${nt}"></use>
      </svg>`,this.svg;try{if(st=await fetch(nt,{mode:"cors"}),!st.ok)return st.status===410?CACHEABLE_ERROR:RETRYABLE_ERROR}catch{return RETRYABLE_ERROR}try{const _t=document.createElement("div");_t.innerHTML=await st.text();const xt=_t.firstElementChild;if(((it=xt==null?void 0:xt.tagName)==null?void 0:it.toLowerCase())!=="svg")return CACHEABLE_ERROR;parser$e||(parser$e=new DOMParser);const kt=parser$e.parseFromString(xt.outerHTML,"text/html").body.querySelector("svg");return kt?(kt.part.add("svg"),document.adoptNode(kt)):CACHEABLE_ERROR}catch{return CACHEABLE_ERROR}}connectedCallback(){super.connectedCallback(),watchIcon(this)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),unwatchIcon(this)}getIconSource(){const nt=getIconLibrary(this.library);return this.name&&nt?{url:nt.resolver(this.name),fromLibrary:!0}:{url:this.src,fromLibrary:!1}}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var nt;const{url:rt,fromLibrary:it}=this.getIconSource(),st=it?getIconLibrary(this.library):void 0;if(!rt){this.svg=null;return}let _t=iconCache.get(rt);if(_t||(_t=this.resolveIcon(rt,st),iconCache.set(rt,_t)),!this.initialRender)return;const xt=await _t;if(xt===RETRYABLE_ERROR&&iconCache.delete(rt),rt===this.getIconSource().url){if(e$3(xt)){if(this.svg=xt,st){await this.updateComplete;const Et=this.shadowRoot.querySelector("[part='svg']");typeof st.mutator=="function"&&Et&&st.mutator(Et)}return}switch(xt){case RETRYABLE_ERROR:case CACHEABLE_ERROR:this.svg=null,this.emit("sl-error");break;default:this.svg=xt.cloneNode(!0),(nt=st==null?void 0:st.mutator)==null||nt.call(st,this.svg),this.emit("sl-load")}}}render(){return this.svg}};SlIcon.styles=[component_styles_default,icon_styles_default];__decorateClass([r$1()],SlIcon.prototype,"svg",2);__decorateClass([n$4({reflect:!0})],SlIcon.prototype,"name",2);__decorateClass([n$4()],SlIcon.prototype,"src",2);__decorateClass([n$4()],SlIcon.prototype,"label",2);__decorateClass([n$4({reflect:!0})],SlIcon.prototype,"library",2);__decorateClass([watch("label")],SlIcon.prototype,"handleLabelChange",1);__decorateClass([watch(["name","src","library"])],SlIcon.prototype,"setIcon",1);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e$2=nt=>(...rt)=>({_$litDirective$:nt,values:rt});class i$3{constructor(rt){}get _$AU(){return this._$AM._$AU}_$AT(rt,it,st){this._$Ct=rt,this._$AM=it,this._$Ci=st}_$AS(rt,it){return this.update(rt,it)}update(rt,it){return this.render(...it)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e$1=e$2(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t.ATTRIBUTE||nt.name!=="class"||((rt=nt.strings)==null?void 0:rt.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(nt){return" "+Object.keys(nt).filter(rt=>nt[rt]).join(" ")+" "}update(nt,[rt]){var st,_t;if(this.st===void 0){this.st=new Set,nt.strings!==void 0&&(this.nt=new Set(nt.strings.join(" ").split(/\s/).filter(xt=>xt!=="")));for(const xt in rt)rt[xt]&&!((st=this.nt)!=null&&st.has(xt))&&this.st.add(xt);return this.render(rt)}const it=nt.element.classList;for(const xt of this.st)xt in rt||(it.remove(xt),this.st.delete(xt));for(const xt in rt){const Et=!!rt[xt];Et===this.st.has(xt)||((_t=this.nt)==null?void 0:_t.has(xt))||(Et?(it.add(xt),this.st.add(xt)):(it.remove(xt),this.st.delete(xt)))}return T}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const a=Symbol.for(""),o$4=nt=>{if((nt==null?void 0:nt.r)===a)return nt==null?void 0:nt._$litStatic$},i$2=(nt,...rt)=>({_$litStatic$:rt.reduce((it,st,_t)=>it+(xt=>{if(xt._$litStatic$!==void 0)return xt._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${xt}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(st)+nt[_t+1],nt[0]),r:a}),l$1=new Map,n$3=nt=>(rt,...it)=>{const st=it.length;let _t,xt;const Et=[],kt=[];let Lt,It=0,Rt=!1;for(;It<st;){for(Lt=rt[It];It<st&&(xt=it[It],(_t=o$4(xt))!==void 0);)Lt+=_t+rt[++It],Rt=!0;It!==st&&kt.push(xt),Et.push(Lt),It++}if(It===st&&Et.push(rt[st]),Rt){const Nt=Et.join("$$lit$$");(rt=l$1.get(Nt))===void 0&&(Et.raw=Et,l$1.set(Nt,rt=Et)),it=kt}return nt(rt,...it)},u=n$3(x$1);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o$3=nt=>nt!=null?nt:E;var SlIconButton=class extends ShoelaceElement{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(nt){this.disabled&&(nt.preventDefault(),nt.stopPropagation())}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}render(){const nt=!!this.href,rt=nt?i$2`a`:i$2`button`;return u`
      <${rt}
        part="base"
        class=${e$1({"icon-button":!0,"icon-button--disabled":!nt&&this.disabled,"icon-button--focused":this.hasFocus})}
        ?disabled=${o$3(nt?void 0:this.disabled)}
        type=${o$3(nt?void 0:"button")}
        href=${o$3(nt?this.href:void 0)}
        target=${o$3(nt?this.target:void 0)}
        download=${o$3(nt?this.download:void 0)}
        rel=${o$3(nt&&this.target?"noreferrer noopener":void 0)}
        role=${o$3(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        aria-label="${this.label}"
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <sl-icon
          class="icon-button__icon"
          name=${o$3(this.name)}
          library=${o$3(this.library)}
          src=${o$3(this.src)}
          aria-hidden="true"
        ></sl-icon>
      </${rt}>
    `}};SlIconButton.styles=[component_styles_default,icon_button_styles_default];SlIconButton.dependencies={"sl-icon":SlIcon};__decorateClass([e$4(".icon-button")],SlIconButton.prototype,"button",2);__decorateClass([r$1()],SlIconButton.prototype,"hasFocus",2);__decorateClass([n$4()],SlIconButton.prototype,"name",2);__decorateClass([n$4()],SlIconButton.prototype,"library",2);__decorateClass([n$4()],SlIconButton.prototype,"src",2);__decorateClass([n$4()],SlIconButton.prototype,"href",2);__decorateClass([n$4()],SlIconButton.prototype,"target",2);__decorateClass([n$4()],SlIconButton.prototype,"download",2);__decorateClass([n$4()],SlIconButton.prototype,"label",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlIconButton.prototype,"disabled",2);var defaultAnimationRegistry=new Map,customAnimationRegistry=new WeakMap;function ensureAnimation(nt){return nt!=null?nt:{keyframes:[],options:{duration:0}}}function getLogicalAnimation(nt,rt){return rt.toLowerCase()==="rtl"?{keyframes:nt.rtlKeyframes||nt.keyframes,options:nt.options}:nt}function setDefaultAnimation(nt,rt){defaultAnimationRegistry.set(nt,ensureAnimation(rt))}function getAnimation(nt,rt,it){const st=customAnimationRegistry.get(nt);if(st!=null&&st[rt])return getLogicalAnimation(st[rt],it.dir);const _t=defaultAnimationRegistry.get(rt);return _t?getLogicalAnimation(_t,it.dir):{keyframes:[],options:{duration:0}}}function waitForEvent(nt,rt){return new Promise(it=>{function st(_t){_t.target===nt&&(nt.removeEventListener(rt,st),it())}nt.addEventListener(rt,st)})}function animateTo(nt,rt,it){return new Promise(st=>{if((it==null?void 0:it.duration)===1/0)throw new Error("Promise-based animations must be finite.");const _t=nt.animate(rt,__spreadProps(__spreadValues({},it),{duration:prefersReducedMotion()?0:it.duration}));_t.addEventListener("cancel",st,{once:!0}),_t.addEventListener("finish",st,{once:!0})})}function parseDuration$1(nt){return nt=nt.toString().toLowerCase(),nt.indexOf("ms")>-1?parseFloat(nt):nt.indexOf("s")>-1?parseFloat(nt)*1e3:parseFloat(nt)}function prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function stopAnimations(nt){return Promise.all(nt.getAnimations().map(rt=>new Promise(it=>{rt.cancel(),requestAnimationFrame(it)})))}function shimKeyframesHeightAuto(nt,rt){return nt.map(it=>__spreadProps(__spreadValues({},it),{height:it.height==="auto"?`${rt}px`:it.height}))}var HasSlotController=class{constructor(nt,...rt){this.slotNames=[],this.handleSlotChange=it=>{const st=it.target;(this.slotNames.includes("[default]")&&!st.name||st.name&&this.slotNames.includes(st.name))&&this.host.requestUpdate()},(this.host=nt).addController(this),this.slotNames=rt}hasDefaultSlot(){return[...this.host.childNodes].some(nt=>{if(nt.nodeType===nt.TEXT_NODE&&nt.textContent.trim()!=="")return!0;if(nt.nodeType===nt.ELEMENT_NODE){const rt=nt;if(rt.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!rt.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(nt){return this.host.querySelector(`:scope > [slot="${nt}"]`)!==null}test(nt){return nt==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(nt)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}};function getTextContent(nt){if(!nt)return"";const rt=nt.assignedNodes({flatten:!0});let it="";return[...rt].forEach(st=>{st.nodeType===Node.TEXT_NODE&&(it+=st.textContent)}),it}const connectedElements=new Set,translations=new Map;let fallback,documentDirection="ltr",documentLanguage="en";const isClient=typeof MutationObserver<"u"&&typeof document<"u"&&typeof document.documentElement<"u";if(isClient){const nt=new MutationObserver(update);documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language,nt.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]})}function registerTranslation(...nt){nt.map(rt=>{const it=rt.$code.toLowerCase();translations.has(it)?translations.set(it,Object.assign(Object.assign({},translations.get(it)),rt)):translations.set(it,rt),fallback||(fallback=rt)}),update()}function update(){isClient&&(documentDirection=document.documentElement.dir||"ltr",documentLanguage=document.documentElement.lang||navigator.language),[...connectedElements.keys()].map(nt=>{typeof nt.requestUpdate=="function"&&nt.requestUpdate()})}class LocalizeController$1{constructor(rt){this.host=rt,this.host.addController(this)}hostConnected(){connectedElements.add(this.host)}hostDisconnected(){connectedElements.delete(this.host)}dir(){return`${this.host.dir||documentDirection}`.toLowerCase()}lang(){return`${this.host.lang||documentLanguage}`.toLowerCase()}getTranslationData(rt){var it,st;const _t=new Intl.Locale(rt.replace(/_/g,"-")),xt=_t==null?void 0:_t.language.toLowerCase(),Et=(st=(it=_t==null?void 0:_t.region)===null||it===void 0?void 0:it.toLowerCase())!==null&&st!==void 0?st:"",kt=translations.get(`${xt}-${Et}`),Lt=translations.get(xt);return{locale:_t,language:xt,region:Et,primary:kt,secondary:Lt}}exists(rt,it){var st;const{primary:_t,secondary:xt}=this.getTranslationData((st=it.lang)!==null&&st!==void 0?st:this.lang());return it=Object.assign({includeFallback:!1},it),!!(_t&&_t[rt]||xt&&xt[rt]||it.includeFallback&&fallback&&fallback[rt])}term(rt,...it){const{primary:st,secondary:_t}=this.getTranslationData(this.lang());let xt;if(st&&st[rt])xt=st[rt];else if(_t&&_t[rt])xt=_t[rt];else if(fallback&&fallback[rt])xt=fallback[rt];else return console.error(`No translation found for: ${String(rt)}`),String(rt);return typeof xt=="function"?xt(...it):xt}date(rt,it){return rt=new Date(rt),new Intl.DateTimeFormat(this.lang(),it).format(rt)}number(rt,it){return rt=Number(rt),isNaN(rt)?"":new Intl.NumberFormat(this.lang(),it).format(rt)}relativeTime(rt,it,st){return new Intl.RelativeTimeFormat(this.lang(),st).format(rt,it)}}var translation={$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copied:"Copied",copy:"Copy",currentValue:"Current value",error:"Error",goToSlide:(nt,rt)=>`Go to slide ${nt} of ${rt}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:nt=>nt===0?"No options selected":nt===1?"1 option selected":`${nt} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:nt=>`Slide ${nt}`,toggleColorFormat:"Toggle color format"};registerTranslation(translation);var en_default=translation,LocalizeController=class extends LocalizeController$1{};registerTranslation(en_default);var SlDialog=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController(this),this.modal=new Modal$1(this),this.open=!1,this.label="",this.noHeader=!1,this.handleDocumentKeyDown=nt=>{nt.key==="Escape"&&this.modal.isActive()&&this.open&&(nt.stopPropagation(),this.requestClose("keyboard"))}}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.addOpenListeners(),this.modal.activate(),lockBodyScrolling(this))}disconnectedCallback(){super.disconnectedCallback(),this.modal.deactivate(),unlockBodyScrolling(this),this.removeOpenListeners()}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"dialog.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){var nt;"CloseWatcher"in window?((nt=this.closeWatcher)==null||nt.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>this.requestClose("keyboard")):document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){var nt;(nt=this.closeWatcher)==null||nt.destroy(),document.removeEventListener("keydown",this.handleDocumentKeyDown)}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.modal.activate(),lockBodyScrolling(this);const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]),this.dialog.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,"dialog.show",{dir:this.localize.dir()}),it=getAnimation(this,"dialog.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{blurActiveElement(this),this.emit("sl-hide"),this.removeOpenListeners(),this.modal.deactivate(),await Promise.all([stopAnimations(this.dialog),stopAnimations(this.overlay)]);const nt=getAnimation(this,"dialog.hide",{dir:this.localize.dir()}),rt=getAnimation(this,"dialog.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.dialog.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1,unlockBodyScrolling(this);const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return x$1`
      <div
        part="base"
        class=${e$1({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="dialog__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${o$3(this.noHeader?this.label:void 0)}
          aria-labelledby=${o$3(this.noHeader?void 0:"title")}
          tabindex="-1"
        >
          ${this.noHeader?"":x$1`
                <header part="header" class="dialog__header">
                  <h2 part="title" class="dialog__title" id="title">
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="dialog__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="dialog__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click="${()=>this.requestClose("close-button")}"
                    ></sl-icon-button>
                  </div>
                </header>
              `}
          ${""}
          <div part="body" class="dialog__body" tabindex="-1"><slot></slot></div>

          <footer part="footer" class="dialog__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDialog.styles=[component_styles_default,dialog_styles_default];SlDialog.dependencies={"sl-icon-button":SlIconButton};__decorateClass([e$4(".dialog")],SlDialog.prototype,"dialog",2);__decorateClass([e$4(".dialog__panel")],SlDialog.prototype,"panel",2);__decorateClass([e$4(".dialog__overlay")],SlDialog.prototype,"overlay",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlDialog.prototype,"open",2);__decorateClass([n$4({reflect:!0})],SlDialog.prototype,"label",2);__decorateClass([n$4({attribute:"no-header",type:Boolean,reflect:!0})],SlDialog.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDialog.prototype,"handleOpenChange",1);setDefaultAnimation("dialog.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});setDefaultAnimation("dialog.denyClose",{keyframes:[{scale:1},{scale:1.02},{scale:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});SlDialog.define("sl-dialog");var spinner_styles_default=i$7`
  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
    flex: none;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
      stroke-dasharray: 0.05em, 3em;
    }

    50% {
      transform: rotate(450deg);
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      transform: rotate(1080deg);
      stroke-dasharray: 0.05em, 3em;
    }
  }
`,SlSpinner=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this)}render(){return x$1`
      <svg part="base" class="spinner" role="progressbar" aria-label=${this.localize.term("loading")}>
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};SlSpinner.styles=[component_styles_default,spinner_styles_default];var formCollections=new WeakMap,reportValidityOverloads=new WeakMap,checkValidityOverloads=new WeakMap,userInteractedControls=new WeakSet,interactions=new WeakMap,FormControlController=class{constructor(nt,rt){this.handleFormData=it=>{const st=this.options.disabled(this.host),_t=this.options.name(this.host),xt=this.options.value(this.host),Et=this.host.tagName.toLowerCase()==="sl-button";this.host.isConnected&&!st&&!Et&&typeof _t=="string"&&_t.length>0&&typeof xt<"u"&&(Array.isArray(xt)?xt.forEach(kt=>{it.formData.append(_t,kt.toString())}):it.formData.append(_t,xt.toString()))},this.handleFormSubmit=it=>{var st;const _t=this.options.disabled(this.host),xt=this.options.reportValidity;this.form&&!this.form.noValidate&&((st=formCollections.get(this.form))==null||st.forEach(Et=>{this.setUserInteracted(Et,!0)})),this.form&&!this.form.noValidate&&!_t&&!xt(this.host)&&(it.preventDefault(),it.stopImmediatePropagation())},this.handleFormReset=()=>{this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1),interactions.set(this.host,[])},this.handleInteraction=it=>{const st=interactions.get(this.host);st.includes(it.type)||st.push(it.type),st.length===this.options.assumeInteractionOn.length&&this.setUserInteracted(this.host,!0)},this.checkFormValidity=()=>{if(this.form&&!this.form.noValidate){const it=this.form.querySelectorAll("*");for(const st of it)if(typeof st.checkValidity=="function"&&!st.checkValidity())return!1}return!0},this.reportFormValidity=()=>{if(this.form&&!this.form.noValidate){const it=this.form.querySelectorAll("*");for(const st of it)if(typeof st.reportValidity=="function"&&!st.reportValidity())return!1}return!0},(this.host=nt).addController(this),this.options=__spreadValues({form:it=>{const st=it.form;if(st){const xt=it.getRootNode().querySelector(`#${st}`);if(xt)return xt}return it.closest("form")},name:it=>it.name,value:it=>it.value,defaultValue:it=>it.defaultValue,disabled:it=>{var st;return(st=it.disabled)!=null?st:!1},reportValidity:it=>typeof it.reportValidity=="function"?it.reportValidity():!0,checkValidity:it=>typeof it.checkValidity=="function"?it.checkValidity():!0,setValue:(it,st)=>it.value=st,assumeInteractionOn:["sl-input"]},rt)}hostConnected(){const nt=this.options.form(this.host);nt&&this.attachForm(nt),interactions.set(this.host,[]),this.options.assumeInteractionOn.forEach(rt=>{this.host.addEventListener(rt,this.handleInteraction)})}hostDisconnected(){this.detachForm(),interactions.delete(this.host),this.options.assumeInteractionOn.forEach(nt=>{this.host.removeEventListener(nt,this.handleInteraction)})}hostUpdated(){const nt=this.options.form(this.host);nt||this.detachForm(),nt&&this.form!==nt&&(this.detachForm(),this.attachForm(nt)),this.host.hasUpdated&&this.setValidity(this.host.validity.valid)}attachForm(nt){nt?(this.form=nt,formCollections.has(this.form)?formCollections.get(this.form).add(this.host):formCollections.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)||(reportValidityOverloads.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity()),checkValidityOverloads.has(this.form)||(checkValidityOverloads.set(this.form,this.form.checkValidity),this.form.checkValidity=()=>this.checkFormValidity())):this.form=void 0}detachForm(){if(!this.form)return;const nt=formCollections.get(this.form);!nt||(nt.delete(this.host),nt.size<=0&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),reportValidityOverloads.has(this.form)&&(this.form.reportValidity=reportValidityOverloads.get(this.form),reportValidityOverloads.delete(this.form)),checkValidityOverloads.has(this.form)&&(this.form.checkValidity=checkValidityOverloads.get(this.form),checkValidityOverloads.delete(this.form)),this.form=void 0))}setUserInteracted(nt,rt){rt?userInteractedControls.add(nt):userInteractedControls.delete(nt),nt.requestUpdate()}doAction(nt,rt){if(this.form){const it=document.createElement("button");it.type=nt,it.style.position="absolute",it.style.width="0",it.style.height="0",it.style.clipPath="inset(50%)",it.style.overflow="hidden",it.style.whiteSpace="nowrap",rt&&(it.name=rt.name,it.value=rt.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(st=>{rt.hasAttribute(st)&&it.setAttribute(st,rt.getAttribute(st))})),this.form.append(it),it.click(),it.remove()}}getForm(){var nt;return(nt=this.form)!=null?nt:null}reset(nt){this.doAction("reset",nt)}submit(nt){this.doAction("submit",nt)}setValidity(nt){const rt=this.host,it=Boolean(userInteractedControls.has(rt)),st=Boolean(rt.required);rt.toggleAttribute("data-required",st),rt.toggleAttribute("data-optional",!st),rt.toggleAttribute("data-invalid",!nt),rt.toggleAttribute("data-valid",nt),rt.toggleAttribute("data-user-invalid",!nt&&it),rt.toggleAttribute("data-user-valid",nt&&it)}updateValidity(){const nt=this.host;this.setValidity(nt.validity.valid)}emitInvalidEvent(nt){const rt=new CustomEvent("sl-invalid",{bubbles:!1,composed:!1,cancelable:!0,detail:{}});nt||rt.preventDefault(),this.host.dispatchEvent(rt)||nt==null||nt.preventDefault()}},validValidityState=Object.freeze({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1});Object.freeze(__spreadProps(__spreadValues({},validValidityState),{valid:!1,valueMissing:!0}));Object.freeze(__spreadProps(__spreadValues({},validValidityState),{valid:!1,customError:!0}));var button_styles_default=i$7`
  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    -webkit-user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition:
      var(--sl-transition-x-fast) background-color,
      var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border,
      var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up from children */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label {
    display: inline-block;
  }

  .button__label::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-input-border-color);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-input-border-color);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  @media (forced-colors: active) {
    .button.button--outline.button--checked:not(.button--disabled) {
      outline: solid 2px transparent;
    }
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:focus-visible:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    height: auto;
    min-height: var(--sl-input-height-small);
    font-size: var(--sl-button-font-size-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    height: auto;
    min-height: var(--sl-input-height-medium);
    font-size: var(--sl-button-font-size-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    height: auto;
    min-height: var(--sl-input-height-large);
    font-size: var(--sl-button-font-size-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    height: auto;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    translate: 50% -50%;
    pointer-events: none;
  }

  .button--rtl ::slotted(sl-badge) {
    right: auto;
    left: 0;
    translate: -50% -50%;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-inline-start: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-inline-start: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-inline-end: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-inline-end: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-inline-end: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host([data-sl-button-group__button--first]:not([data-sl-button-group__button--last])) .button {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
  }

  :host([data-sl-button-group__button--inner]) .button {
    border-radius: 0;
  }

  :host([data-sl-button-group__button--last]:not([data-sl-button-group__button--first])) .button {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
  }

  /* All except the first */
  :host([data-sl-button-group__button]:not([data-sl-button-group__button--first])) {
    margin-inline-start: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(
      [data-sl-button-group__button]:not(
          [data-sl-button-group__button--first],
          [data-sl-button-group__button--radio],
          [variant='default']
        ):not(:hover)
    )
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host([data-sl-button-group__button--hover]) {
    z-index: 1;
  }

  /* Focus and checked are always on top */
  :host([data-sl-button-group__button--focus]),
  :host([data-sl-button-group__button][checked]) {
    z-index: 2;
  }
`,SlButton=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this,{assumeInteractionOn:["click"]}),this.hasSlotController=new HasSlotController(this,"[default]","prefix","suffix"),this.localize=new LocalizeController(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href="",this.rel="noreferrer noopener"}get validity(){return this.isButton()?this.button.validity:validValidityState}get validationMessage(){return this.isButton()?this.button.validationMessage:""}firstUpdated(){this.isButton()&&this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(){this.type==="submit"&&this.formControlController.submit(this),this.type==="reset"&&this.formControlController.reset(this)}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&this.formControlController.setValidity(this.disabled)}click(){this.button.click()}focus(nt){this.button.focus(nt)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}getForm(){return this.formControlController.getForm()}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(nt){this.isButton()&&(this.button.setCustomValidity(nt),this.formControlController.updateValidity())}render(){const nt=this.isLink(),rt=nt?i$2`a`:i$2`button`;return u`
      <${rt}
        part="base"
        class=${e$1({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${o$3(nt?void 0:this.disabled)}
        type=${o$3(nt?void 0:this.type)}
        title=${this.title}
        name=${o$3(nt?void 0:this.name)}
        value=${o$3(nt?void 0:this.value)}
        href=${o$3(nt&&!this.disabled?this.href:void 0)}
        target=${o$3(nt?this.target:void 0)}
        download=${o$3(nt?this.download:void 0)}
        rel=${o$3(nt?this.rel:void 0)}
        role=${o$3(nt?void 0:"button")}
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @invalid=${this.isButton()?this.handleInvalid:null}
        @click=${this.handleClick}
      >
        <slot name="prefix" part="prefix" class="button__prefix"></slot>
        <slot part="label" class="button__label"></slot>
        <slot name="suffix" part="suffix" class="button__suffix"></slot>
        ${this.caret?u` <sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon> `:""}
        ${this.loading?u`<sl-spinner part="spinner"></sl-spinner>`:""}
      </${rt}>
    `}};SlButton.styles=[component_styles_default,button_styles_default];SlButton.dependencies={"sl-icon":SlIcon,"sl-spinner":SlSpinner};__decorateClass([e$4(".button")],SlButton.prototype,"button",2);__decorateClass([r$1()],SlButton.prototype,"hasFocus",2);__decorateClass([r$1()],SlButton.prototype,"invalid",2);__decorateClass([n$4()],SlButton.prototype,"title",2);__decorateClass([n$4({reflect:!0})],SlButton.prototype,"variant",2);__decorateClass([n$4({reflect:!0})],SlButton.prototype,"size",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlButton.prototype,"caret",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlButton.prototype,"disabled",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlButton.prototype,"loading",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlButton.prototype,"outline",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlButton.prototype,"pill",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlButton.prototype,"circle",2);__decorateClass([n$4()],SlButton.prototype,"type",2);__decorateClass([n$4()],SlButton.prototype,"name",2);__decorateClass([n$4()],SlButton.prototype,"value",2);__decorateClass([n$4()],SlButton.prototype,"href",2);__decorateClass([n$4()],SlButton.prototype,"target",2);__decorateClass([n$4()],SlButton.prototype,"rel",2);__decorateClass([n$4()],SlButton.prototype,"download",2);__decorateClass([n$4()],SlButton.prototype,"form",2);__decorateClass([n$4({attribute:"formaction"})],SlButton.prototype,"formAction",2);__decorateClass([n$4({attribute:"formenctype"})],SlButton.prototype,"formEnctype",2);__decorateClass([n$4({attribute:"formmethod"})],SlButton.prototype,"formMethod",2);__decorateClass([n$4({attribute:"formnovalidate",type:Boolean})],SlButton.prototype,"formNoValidate",2);__decorateClass([n$4({attribute:"formtarget"})],SlButton.prototype,"formTarget",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlButton.prototype,"handleDisabledChange",1);SlButton.define("sl-button");SlIconButton.define("sl-icon-button");var input_styles_default=i$7`
  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: inherit;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
    -webkit-user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix ::slotted(sl-icon),
  .input__suffix ::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix ::slotted(*) {
    margin-inline-start: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix ::slotted(*) {
    margin-inline-end: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }

  /* Hide the built-in number spinner */
  .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button,
  .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button {
    -webkit-appearance: none;
    display: none;
  }

  .input--no-spin-buttons input[type='number'] {
    -moz-appearance: textfield;
  }
`,defaultValue=(nt="value")=>(rt,it)=>{const st=rt.constructor,_t=st.prototype.attributeChangedCallback;st.prototype.attributeChangedCallback=function(xt,Et,kt){var Lt;const It=st.getPropertyOptions(nt),Rt=typeof It.attribute=="string"?It.attribute:nt;if(xt===Rt){const Nt=It.converter||u$3,Ft=(typeof Nt=="function"?Nt:(Lt=Nt==null?void 0:Nt.fromAttribute)!=null?Lt:u$3.fromAttribute)(kt,It.type);this[nt]!==Ft&&(this[it]=Ft)}_t.call(this,xt,Et,kt)}},form_control_styles_default=i$7`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control__label {
    font-size: var(--sl-input-label-font-size-large);
  }

  :host([required]) .form-control--has-label .form-control__label::after {
    content: var(--sl-input-required-content);
    margin-inline-start: var(--sl-input-required-content-offset);
    color: var(--sl-input-required-content-color);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }

  .form-control--has-help-text.form-control--radio-group .form-control__help-text {
    margin-top: var(--sl-spacing-2x-small);
  }
`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const l=e$2(class extends i$3{constructor(nt){if(super(nt),nt.type!==t.PROPERTY&&nt.type!==t.ATTRIBUTE&&nt.type!==t.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!f$2(nt))throw Error("`live` bindings can only contain a single expression")}render(nt){return nt}update(nt,[rt]){if(rt===T||rt===E)return rt;const it=nt.element,st=nt.name;if(nt.type===t.PROPERTY){if(rt===it[st])return T}else if(nt.type===t.BOOLEAN_ATTRIBUTE){if(!!rt===it.hasAttribute(st))return T}else if(nt.type===t.ATTRIBUTE&&it.getAttribute(st)===rt+"")return T;return m(nt),rt}});var SlInput=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController(this),this.hasFocus=!1,this.title="",this.__numberInput=Object.assign(document.createElement("input"),{type:"number"}),this.__dateInput=Object.assign(document.createElement("input"),{type:"date"}),this.type="text",this.name="",this.value="",this.defaultValue="",this.size="medium",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.disabled=!1,this.placeholder="",this.readonly=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.form="",this.required=!1,this.spellcheck=!0}get valueAsDate(){var nt;return this.__dateInput.type=this.type,this.__dateInput.value=this.value,((nt=this.input)==null?void 0:nt.valueAsDate)||this.__dateInput.valueAsDate}set valueAsDate(nt){this.__dateInput.type=this.type,this.__dateInput.valueAsDate=nt,this.value=this.__dateInput.value}get valueAsNumber(){var nt;return this.__numberInput.value=this.value,((nt=this.input)==null?void 0:nt.valueAsNumber)||this.__numberInput.valueAsNumber}set valueAsNumber(nt){this.__numberInput.valueAsNumber=nt,this.value=this.__numberInput.value}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(nt){nt.preventDefault(),this.value!==""&&(this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change")),this.input.focus()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.formControlController.updateValidity(),this.emit("sl-input")}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}handleKeyDown(nt){const rt=nt.metaKey||nt.ctrlKey||nt.shiftKey||nt.altKey;nt.key==="Enter"&&!rt&&setTimeout(()=>{!nt.defaultPrevented&&!nt.isComposing&&this.formControlController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleStepChange(){this.input.step=String(this.step),this.formControlController.updateValidity()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,st="preserve"){const _t=rt!=null?rt:this.input.selectionStart,xt=it!=null?it:this.input.selectionEnd;this.input.setRangeText(nt,_t,xt,st),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.formControlController.updateValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt,xt=this.clearable&&!this.disabled&&!this.readonly&&(typeof this.value=="number"||this.value.length>0);return x$1`
      <div
        part="form-control"
        class=${e$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${e$1({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--no-spin-buttons":this.noSpinButtons})}
          >
            <span part="prefix" class="input__prefix">
              <slot name="prefix"></slot>
            </span>

            <input
              part="input"
              id="input"
              class="input__control"
              type=${this.type==="password"&&this.passwordVisible?"text":this.type}
              title=${this.title}
              name=${o$3(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${o$3(this.placeholder)}
              minlength=${o$3(this.minlength)}
              maxlength=${o$3(this.maxlength)}
              min=${o$3(this.min)}
              max=${o$3(this.max)}
              step=${o$3(this.step)}
              .value=${l(this.value)}
              autocapitalize=${o$3(this.autocapitalize)}
              autocomplete=${o$3(this.autocomplete)}
              autocorrect=${o$3(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${this.spellcheck}
              pattern=${o$3(this.pattern)}
              enterkeyhint=${o$3(this.enterkeyhint)}
              inputmode=${o$3(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${xt?x$1`
                  <button
                    part="clear-button"
                    class="input__clear"
                    type="button"
                    aria-label=${this.localize.term("clearEntry")}
                    @click=${this.handleClearClick}
                    tabindex="-1"
                  >
                    <slot name="clear-icon">
                      <sl-icon name="x-circle-fill" library="system"></sl-icon>
                    </slot>
                  </button>
                `:""}
            ${this.passwordToggle&&!this.disabled?x$1`
                  <button
                    part="password-toggle-button"
                    class="input__password-toggle"
                    type="button"
                    aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")}
                    @click=${this.handlePasswordToggle}
                    tabindex="-1"
                  >
                    ${this.passwordVisible?x$1`
                          <slot name="show-password-icon">
                            <sl-icon name="eye-slash" library="system"></sl-icon>
                          </slot>
                        `:x$1`
                          <slot name="hide-password-icon">
                            <sl-icon name="eye" library="system"></sl-icon>
                          </slot>
                        `}
                  </button>
                `:""}

            <span part="suffix" class="input__suffix">
              <slot name="suffix"></slot>
            </span>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};SlInput.styles=[component_styles_default,form_control_styles_default,input_styles_default];SlInput.dependencies={"sl-icon":SlIcon};__decorateClass([e$4(".input__control")],SlInput.prototype,"input",2);__decorateClass([r$1()],SlInput.prototype,"hasFocus",2);__decorateClass([n$4()],SlInput.prototype,"title",2);__decorateClass([n$4({reflect:!0})],SlInput.prototype,"type",2);__decorateClass([n$4()],SlInput.prototype,"name",2);__decorateClass([n$4()],SlInput.prototype,"value",2);__decorateClass([defaultValue()],SlInput.prototype,"defaultValue",2);__decorateClass([n$4({reflect:!0})],SlInput.prototype,"size",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlInput.prototype,"filled",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlInput.prototype,"pill",2);__decorateClass([n$4()],SlInput.prototype,"label",2);__decorateClass([n$4({attribute:"help-text"})],SlInput.prototype,"helpText",2);__decorateClass([n$4({type:Boolean})],SlInput.prototype,"clearable",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlInput.prototype,"disabled",2);__decorateClass([n$4()],SlInput.prototype,"placeholder",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlInput.prototype,"readonly",2);__decorateClass([n$4({attribute:"password-toggle",type:Boolean})],SlInput.prototype,"passwordToggle",2);__decorateClass([n$4({attribute:"password-visible",type:Boolean})],SlInput.prototype,"passwordVisible",2);__decorateClass([n$4({attribute:"no-spin-buttons",type:Boolean})],SlInput.prototype,"noSpinButtons",2);__decorateClass([n$4({reflect:!0})],SlInput.prototype,"form",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlInput.prototype,"required",2);__decorateClass([n$4()],SlInput.prototype,"pattern",2);__decorateClass([n$4({type:Number})],SlInput.prototype,"minlength",2);__decorateClass([n$4({type:Number})],SlInput.prototype,"maxlength",2);__decorateClass([n$4()],SlInput.prototype,"min",2);__decorateClass([n$4()],SlInput.prototype,"max",2);__decorateClass([n$4()],SlInput.prototype,"step",2);__decorateClass([n$4()],SlInput.prototype,"autocapitalize",2);__decorateClass([n$4()],SlInput.prototype,"autocorrect",2);__decorateClass([n$4()],SlInput.prototype,"autocomplete",2);__decorateClass([n$4({type:Boolean})],SlInput.prototype,"autofocus",2);__decorateClass([n$4()],SlInput.prototype,"enterkeyhint",2);__decorateClass([n$4({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlInput.prototype,"spellcheck",2);__decorateClass([n$4()],SlInput.prototype,"inputmode",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleDisabledChange",1);__decorateClass([watch("step",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleStepChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlInput.prototype,"handleValueChange",1);SlInput.define("sl-input");var tooltip_styles_default=i$7`
  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip {
    --arrow-size: var(--sl-tooltip-arrow-size);
    --arrow-color: var(--sl-tooltip-background-color);
  }

  .tooltip::part(popup) {
    z-index: var(--sl-z-index-tooltip);
  }

  .tooltip[placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .tooltip[placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .tooltip[placement^='left']::part(popup) {
    transform-origin: right;
  }

  .tooltip[placement^='right']::part(popup) {
    transform-origin: left;
  }

  .tooltip__body {
    display: block;
    width: max-content;
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    text-align: start;
    white-space: normal;
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
    pointer-events: none;
    user-select: none;
    -webkit-user-select: none;
  }
`,popup_styles_default=i$7`
  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45º. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }

  /* Hover bridge */
  .popup-hover-bridge:not(.popup-hover-bridge--visible) {
    display: none;
  }

  .popup-hover-bridge {
    position: fixed;
    z-index: calc(var(--sl-z-index-dropdown) - 1);
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    clip-path: polygon(
      var(--hover-bridge-top-left-x, 0) var(--hover-bridge-top-left-y, 0),
      var(--hover-bridge-top-right-x, 0) var(--hover-bridge-top-right-y, 0),
      var(--hover-bridge-bottom-right-x, 0) var(--hover-bridge-bottom-right-y, 0),
      var(--hover-bridge-bottom-left-x, 0) var(--hover-bridge-bottom-left-y, 0)
    );
  }
`;const sides=["top","right","bottom","left"],alignments=["start","end"],placements$1=sides.reduce((nt,rt)=>nt.concat(rt,rt+"-"+alignments[0],rt+"-"+alignments[1]),[]),min$4=Math.min,max$4=Math.max,round$1=Math.round,floor=Math.floor,createCoords=nt=>({x:nt,y:nt}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(nt,rt,it){return max$4(nt,min$4(rt,it))}function evaluate$1(nt,rt){return typeof nt=="function"?nt(rt):nt}function getSide(nt){return nt.split("-")[0]}function getAlignment(nt){return nt.split("-")[1]}function getOppositeAxis(nt){return nt==="x"?"y":"x"}function getAxisLength(nt){return nt==="y"?"height":"width"}function getSideAxis(nt){return["top","bottom"].includes(getSide(nt))?"y":"x"}function getAlignmentAxis(nt){return getOppositeAxis(getSideAxis(nt))}function getAlignmentSides(nt,rt,it){it===void 0&&(it=!1);const st=getAlignment(nt),_t=getAlignmentAxis(nt),xt=getAxisLength(_t);let Et=_t==="x"?st===(it?"end":"start")?"right":"left":st==="start"?"bottom":"top";return rt.reference[xt]>rt.floating[xt]&&(Et=getOppositePlacement$1(Et)),[Et,getOppositePlacement$1(Et)]}function getExpandedPlacements(nt){const rt=getOppositePlacement$1(nt);return[getOppositeAlignmentPlacement(nt),rt,getOppositeAlignmentPlacement(rt)]}function getOppositeAlignmentPlacement(nt){return nt.replace(/start|end/g,rt=>oppositeAlignmentMap[rt])}function getSideList(nt,rt,it){const st=["left","right"],_t=["right","left"],xt=["top","bottom"],Et=["bottom","top"];switch(nt){case"top":case"bottom":return it?rt?_t:st:rt?st:_t;case"left":case"right":return rt?xt:Et;default:return[]}}function getOppositeAxisPlacements(nt,rt,it,st){const _t=getAlignment(nt);let xt=getSideList(getSide(nt),it==="start",st);return _t&&(xt=xt.map(Et=>Et+"-"+_t),rt&&(xt=xt.concat(xt.map(getOppositeAlignmentPlacement)))),xt}function getOppositePlacement$1(nt){return nt.replace(/left|right|bottom|top/g,rt=>oppositeSideMap[rt])}function expandPaddingObject(nt){return{top:0,right:0,bottom:0,left:0,...nt}}function getPaddingObject(nt){return typeof nt!="number"?expandPaddingObject(nt):{top:nt,right:nt,bottom:nt,left:nt}}function rectToClientRect$1(nt){const{x:rt,y:it,width:st,height:_t}=nt;return{width:st,height:_t,top:it,left:rt,right:rt+st,bottom:it+_t,x:rt,y:it}}function computeCoordsFromPlacement(nt,rt,it){let{reference:st,floating:_t}=nt;const xt=getSideAxis(rt),Et=getAlignmentAxis(rt),kt=getAxisLength(Et),Lt=getSide(rt),It=xt==="y",Rt=st.x+st.width/2-_t.width/2,Nt=st.y+st.height/2-_t.height/2,Bt=st[kt]/2-_t[kt]/2;let Ft;switch(Lt){case"top":Ft={x:Rt,y:st.y-_t.height};break;case"bottom":Ft={x:Rt,y:st.y+st.height};break;case"right":Ft={x:st.x+st.width,y:Nt};break;case"left":Ft={x:st.x-_t.width,y:Nt};break;default:Ft={x:st.x,y:st.y}}switch(getAlignment(rt)){case"start":Ft[Et]-=Bt*(it&&It?-1:1);break;case"end":Ft[Et]+=Bt*(it&&It?-1:1);break}return Ft}const computePosition$1=async(nt,rt,it)=>{const{placement:st="bottom",strategy:_t="absolute",middleware:xt=[],platform:Et}=it,kt=xt.filter(Boolean),Lt=await(Et.isRTL==null?void 0:Et.isRTL(rt));let It=await Et.getElementRects({reference:nt,floating:rt,strategy:_t}),{x:Rt,y:Nt}=computeCoordsFromPlacement(It,st,Lt),Bt=st,Ft={},Yt=0;for(let Zt=0;Zt<kt.length;Zt++){const{name:Wt,fn:Kt}=kt[Zt],{x:Jt,y:on,data:rn,reset:ln}=await Kt({x:Rt,y:Nt,initialPlacement:st,placement:Bt,strategy:_t,middlewareData:Ft,rects:It,platform:Et,elements:{reference:nt,floating:rt}});Rt=Jt!=null?Jt:Rt,Nt=on!=null?on:Nt,Ft={...Ft,[Wt]:{...Ft[Wt],...rn}},ln&&Yt<=50&&(Yt++,typeof ln=="object"&&(ln.placement&&(Bt=ln.placement),ln.rects&&(It=ln.rects===!0?await Et.getElementRects({reference:nt,floating:rt,strategy:_t}):ln.rects),{x:Rt,y:Nt}=computeCoordsFromPlacement(It,Bt,Lt)),Zt=-1)}return{x:Rt,y:Nt,placement:Bt,strategy:_t,middlewareData:Ft}};async function detectOverflow$1(nt,rt){var it;rt===void 0&&(rt={});const{x:st,y:_t,platform:xt,rects:Et,elements:kt,strategy:Lt}=nt,{boundary:It="clippingAncestors",rootBoundary:Rt="viewport",elementContext:Nt="floating",altBoundary:Bt=!1,padding:Ft=0}=evaluate$1(rt,nt),Yt=getPaddingObject(Ft),Wt=kt[Bt?Nt==="floating"?"reference":"floating":Nt],Kt=rectToClientRect$1(await xt.getClippingRect({element:(it=await(xt.isElement==null?void 0:xt.isElement(Wt)))==null||it?Wt:Wt.contextElement||await(xt.getDocumentElement==null?void 0:xt.getDocumentElement(kt.floating)),boundary:It,rootBoundary:Rt,strategy:Lt})),Jt=Nt==="floating"?{x:st,y:_t,width:Et.floating.width,height:Et.floating.height}:Et.reference,on=await(xt.getOffsetParent==null?void 0:xt.getOffsetParent(kt.floating)),rn=await(xt.isElement==null?void 0:xt.isElement(on))?await(xt.getScale==null?void 0:xt.getScale(on))||{x:1,y:1}:{x:1,y:1},ln=rectToClientRect$1(xt.convertOffsetParentRelativeRectToViewportRelativeRect?await xt.convertOffsetParentRelativeRectToViewportRelativeRect({elements:kt,rect:Jt,offsetParent:on,strategy:Lt}):Jt);return{top:(Kt.top-ln.top+Yt.top)/rn.y,bottom:(ln.bottom-Kt.bottom+Yt.bottom)/rn.y,left:(Kt.left-ln.left+Yt.left)/rn.x,right:(ln.right-Kt.right+Yt.right)/rn.x}}const arrow$3=nt=>({name:"arrow",options:nt,async fn(rt){const{x:it,y:st,placement:_t,rects:xt,platform:Et,elements:kt,middlewareData:Lt}=rt,{element:It,padding:Rt=0}=evaluate$1(nt,rt)||{};if(It==null)return{};const Nt=getPaddingObject(Rt),Bt={x:it,y:st},Ft=getAlignmentAxis(_t),Yt=getAxisLength(Ft),Zt=await Et.getDimensions(It),Wt=Ft==="y",Kt=Wt?"top":"left",Jt=Wt?"bottom":"right",on=Wt?"clientHeight":"clientWidth",rn=xt.reference[Yt]+xt.reference[Ft]-Bt[Ft]-xt.floating[Yt],ln=Bt[Ft]-xt.reference[Ft],gn=await(Et.getOffsetParent==null?void 0:Et.getOffsetParent(It));let wn=gn?gn[on]:0;(!wn||!await(Et.isElement==null?void 0:Et.isElement(gn)))&&(wn=kt.floating[on]||xt.floating[Yt]);const kn=rn/2-ln/2,Cn=wn/2-Zt[Yt]/2-1,Pn=min$4(Nt[Kt],Cn),An=min$4(Nt[Jt],Cn),cn=Pn,Ln=wn-Zt[Yt]-An,an=wn/2-Zt[Yt]/2+kn,zn=clamp$1(cn,an,Ln),dn=!Lt.arrow&&getAlignment(_t)!=null&&an!==zn&&xt.reference[Yt]/2-(an<cn?Pn:An)-Zt[Yt]/2<0,Fn=dn?an<cn?an-cn:an-Ln:0;return{[Ft]:Bt[Ft]+Fn,data:{[Ft]:zn,centerOffset:an-zn-Fn,...dn&&{alignmentOffset:Fn}},reset:dn}}});function getPlacementList(nt,rt,it){return(nt?[...it.filter(_t=>getAlignment(_t)===nt),...it.filter(_t=>getAlignment(_t)!==nt)]:it.filter(_t=>getSide(_t)===_t)).filter(_t=>nt?getAlignment(_t)===nt||(rt?getOppositeAlignmentPlacement(_t)!==_t:!1):!0)}const autoPlacement=function(nt){return nt===void 0&&(nt={}),{name:"autoPlacement",options:nt,async fn(rt){var it,st,_t;const{rects:xt,middlewareData:Et,placement:kt,platform:Lt,elements:It}=rt,{crossAxis:Rt=!1,alignment:Nt,allowedPlacements:Bt=placements$1,autoAlignment:Ft=!0,...Yt}=evaluate$1(nt,rt),Zt=Nt!==void 0||Bt===placements$1?getPlacementList(Nt||null,Ft,Bt):Bt,Wt=await detectOverflow$1(rt,Yt),Kt=((it=Et.autoPlacement)==null?void 0:it.index)||0,Jt=Zt[Kt];if(Jt==null)return{};const on=getAlignmentSides(Jt,xt,await(Lt.isRTL==null?void 0:Lt.isRTL(It.floating)));if(kt!==Jt)return{reset:{placement:Zt[0]}};const rn=[Wt[getSide(Jt)],Wt[on[0]],Wt[on[1]]],ln=[...((st=Et.autoPlacement)==null?void 0:st.overflows)||[],{placement:Jt,overflows:rn}],gn=Zt[Kt+1];if(gn)return{data:{index:Kt+1,overflows:ln},reset:{placement:gn}};const wn=ln.map(Pn=>{const An=getAlignment(Pn.placement);return[Pn.placement,An&&Rt?Pn.overflows.slice(0,2).reduce((cn,Ln)=>cn+Ln,0):Pn.overflows[0],Pn.overflows]}).sort((Pn,An)=>Pn[1]-An[1]),Cn=((_t=wn.filter(Pn=>Pn[2].slice(0,getAlignment(Pn[0])?2:3).every(An=>An<=0))[0])==null?void 0:_t[0])||wn[0][0];return Cn!==kt?{data:{index:Kt+1,overflows:ln},reset:{placement:Cn}}:{}}}},flip$3=function(nt){return nt===void 0&&(nt={}),{name:"flip",options:nt,async fn(rt){var it,st;const{placement:_t,middlewareData:xt,rects:Et,initialPlacement:kt,platform:Lt,elements:It}=rt,{mainAxis:Rt=!0,crossAxis:Nt=!0,fallbackPlacements:Bt,fallbackStrategy:Ft="bestFit",fallbackAxisSideDirection:Yt="none",flipAlignment:Zt=!0,...Wt}=evaluate$1(nt,rt);if((it=xt.arrow)!=null&&it.alignmentOffset)return{};const Kt=getSide(_t),Jt=getSideAxis(kt),on=getSide(kt)===kt,rn=await(Lt.isRTL==null?void 0:Lt.isRTL(It.floating)),ln=Bt||(on||!Zt?[getOppositePlacement$1(kt)]:getExpandedPlacements(kt)),gn=Yt!=="none";!Bt&&gn&&ln.push(...getOppositeAxisPlacements(kt,Zt,Yt,rn));const wn=[kt,...ln],kn=await detectOverflow$1(rt,Wt),Cn=[];let Pn=((st=xt.flip)==null?void 0:st.overflows)||[];if(Rt&&Cn.push(kn[Kt]),Nt){const zn=getAlignmentSides(_t,Et,rn);Cn.push(kn[zn[0]],kn[zn[1]])}if(Pn=[...Pn,{placement:_t,overflows:Cn}],!Cn.every(zn=>zn<=0)){var An,cn;const zn=(((An=xt.flip)==null?void 0:An.index)||0)+1,dn=wn[zn];if(dn){var Ln;const ir=Nt==="alignment"?Jt!==getSideAxis(dn):!1,tr=((Ln=Pn[0])==null?void 0:Ln.overflows[0])>0;if(!ir||tr)return{data:{index:zn,overflows:Pn},reset:{placement:dn}}}let Fn=(cn=Pn.filter(ir=>ir.overflows[0]<=0).sort((ir,tr)=>ir.overflows[1]-tr.overflows[1])[0])==null?void 0:cn.placement;if(!Fn)switch(Ft){case"bestFit":{var an;const ir=(an=Pn.filter(tr=>{if(gn){const Jn=getSideAxis(tr.placement);return Jn===Jt||Jn==="y"}return!0}).map(tr=>[tr.placement,tr.overflows.filter(Jn=>Jn>0).reduce((Jn,hr)=>Jn+hr,0)]).sort((tr,Jn)=>tr[1]-Jn[1])[0])==null?void 0:an[0];ir&&(Fn=ir);break}case"initialPlacement":Fn=kt;break}if(_t!==Fn)return{reset:{placement:Fn}}}return{}}}};function getSideOffsets$1(nt,rt){return{top:nt.top-rt.height,right:nt.right-rt.width,bottom:nt.bottom-rt.height,left:nt.left-rt.width}}function isAnySideFullyClipped$1(nt){return sides.some(rt=>nt[rt]>=0)}const hide$2=function(nt){return nt===void 0&&(nt={}),{name:"hide",options:nt,async fn(rt){const{rects:it}=rt,{strategy:st="referenceHidden",..._t}=evaluate$1(nt,rt);switch(st){case"referenceHidden":{const xt=await detectOverflow$1(rt,{..._t,elementContext:"reference"}),Et=getSideOffsets$1(xt,it.reference);return{data:{referenceHiddenOffsets:Et,referenceHidden:isAnySideFullyClipped$1(Et)}}}case"escaped":{const xt=await detectOverflow$1(rt,{..._t,altBoundary:!0}),Et=getSideOffsets$1(xt,it.floating);return{data:{escapedOffsets:Et,escaped:isAnySideFullyClipped$1(Et)}}}default:return{}}}}};function getBoundingRect(nt){const rt=min$4(...nt.map(xt=>xt.left)),it=min$4(...nt.map(xt=>xt.top)),st=max$4(...nt.map(xt=>xt.right)),_t=max$4(...nt.map(xt=>xt.bottom));return{x:rt,y:it,width:st-rt,height:_t-it}}function getRectsByLine(nt){const rt=nt.slice().sort((_t,xt)=>_t.y-xt.y),it=[];let st=null;for(let _t=0;_t<rt.length;_t++){const xt=rt[_t];!st||xt.y-st.y>st.height/2?it.push([xt]):it[it.length-1].push(xt),st=xt}return it.map(_t=>rectToClientRect$1(getBoundingRect(_t)))}const inline=function(nt){return nt===void 0&&(nt={}),{name:"inline",options:nt,async fn(rt){const{placement:it,elements:st,rects:_t,platform:xt,strategy:Et}=rt,{padding:kt=2,x:Lt,y:It}=evaluate$1(nt,rt),Rt=Array.from(await(xt.getClientRects==null?void 0:xt.getClientRects(st.reference))||[]),Nt=getRectsByLine(Rt),Bt=rectToClientRect$1(getBoundingRect(Rt)),Ft=getPaddingObject(kt);function Yt(){if(Nt.length===2&&Nt[0].left>Nt[1].right&&Lt!=null&&It!=null)return Nt.find(Wt=>Lt>Wt.left-Ft.left&&Lt<Wt.right+Ft.right&&It>Wt.top-Ft.top&&It<Wt.bottom+Ft.bottom)||Bt;if(Nt.length>=2){if(getSideAxis(it)==="y"){const Pn=Nt[0],An=Nt[Nt.length-1],cn=getSide(it)==="top",Ln=Pn.top,an=An.bottom,zn=cn?Pn.left:An.left,dn=cn?Pn.right:An.right,Fn=dn-zn,ir=an-Ln;return{top:Ln,bottom:an,left:zn,right:dn,width:Fn,height:ir,x:zn,y:Ln}}const Wt=getSide(it)==="left",Kt=max$4(...Nt.map(Pn=>Pn.right)),Jt=min$4(...Nt.map(Pn=>Pn.left)),on=Nt.filter(Pn=>Wt?Pn.left===Jt:Pn.right===Kt),rn=on[0].top,ln=on[on.length-1].bottom,gn=Jt,wn=Kt,kn=wn-gn,Cn=ln-rn;return{top:rn,bottom:ln,left:gn,right:wn,width:kn,height:Cn,x:gn,y:rn}}return Bt}const Zt=await xt.getElementRects({reference:{getBoundingClientRect:Yt},floating:st.floating,strategy:Et});return _t.reference.x!==Zt.reference.x||_t.reference.y!==Zt.reference.y||_t.reference.width!==Zt.reference.width||_t.reference.height!==Zt.reference.height?{reset:{rects:Zt}}:{}}}};async function convertValueToCoords(nt,rt){const{placement:it,platform:st,elements:_t}=nt,xt=await(st.isRTL==null?void 0:st.isRTL(_t.floating)),Et=getSide(it),kt=getAlignment(it),Lt=getSideAxis(it)==="y",It=["left","top"].includes(Et)?-1:1,Rt=xt&&Lt?-1:1,Nt=evaluate$1(rt,nt);let{mainAxis:Bt,crossAxis:Ft,alignmentAxis:Yt}=typeof Nt=="number"?{mainAxis:Nt,crossAxis:0,alignmentAxis:null}:{mainAxis:Nt.mainAxis||0,crossAxis:Nt.crossAxis||0,alignmentAxis:Nt.alignmentAxis};return kt&&typeof Yt=="number"&&(Ft=kt==="end"?Yt*-1:Yt),Lt?{x:Ft*Rt,y:Bt*It}:{x:Bt*It,y:Ft*Rt}}const offset$4=function(nt){return nt===void 0&&(nt=0),{name:"offset",options:nt,async fn(rt){var it,st;const{x:_t,y:xt,placement:Et,middlewareData:kt}=rt,Lt=await convertValueToCoords(rt,nt);return Et===((it=kt.offset)==null?void 0:it.placement)&&(st=kt.arrow)!=null&&st.alignmentOffset?{}:{x:_t+Lt.x,y:xt+Lt.y,data:{...Lt,placement:Et}}}}},shift$1=function(nt){return nt===void 0&&(nt={}),{name:"shift",options:nt,async fn(rt){const{x:it,y:st,placement:_t}=rt,{mainAxis:xt=!0,crossAxis:Et=!1,limiter:kt={fn:Wt=>{let{x:Kt,y:Jt}=Wt;return{x:Kt,y:Jt}}},...Lt}=evaluate$1(nt,rt),It={x:it,y:st},Rt=await detectOverflow$1(rt,Lt),Nt=getSideAxis(getSide(_t)),Bt=getOppositeAxis(Nt);let Ft=It[Bt],Yt=It[Nt];if(xt){const Wt=Bt==="y"?"top":"left",Kt=Bt==="y"?"bottom":"right",Jt=Ft+Rt[Wt],on=Ft-Rt[Kt];Ft=clamp$1(Jt,Ft,on)}if(Et){const Wt=Nt==="y"?"top":"left",Kt=Nt==="y"?"bottom":"right",Jt=Yt+Rt[Wt],on=Yt-Rt[Kt];Yt=clamp$1(Jt,Yt,on)}const Zt=kt.fn({...rt,[Bt]:Ft,[Nt]:Yt});return{...Zt,data:{x:Zt.x-it,y:Zt.y-st,enabled:{[Bt]:xt,[Nt]:Et}}}}}},limitShift=function(nt){return nt===void 0&&(nt={}),{options:nt,fn(rt){const{x:it,y:st,placement:_t,rects:xt,middlewareData:Et}=rt,{offset:kt=0,mainAxis:Lt=!0,crossAxis:It=!0}=evaluate$1(nt,rt),Rt={x:it,y:st},Nt=getSideAxis(_t),Bt=getOppositeAxis(Nt);let Ft=Rt[Bt],Yt=Rt[Nt];const Zt=evaluate$1(kt,rt),Wt=typeof Zt=="number"?{mainAxis:Zt,crossAxis:0}:{mainAxis:0,crossAxis:0,...Zt};if(Lt){const on=Bt==="y"?"height":"width",rn=xt.reference[Bt]-xt.floating[on]+Wt.mainAxis,ln=xt.reference[Bt]+xt.reference[on]-Wt.mainAxis;Ft<rn?Ft=rn:Ft>ln&&(Ft=ln)}if(It){var Kt,Jt;const on=Bt==="y"?"width":"height",rn=["top","left"].includes(getSide(_t)),ln=xt.reference[Nt]-xt.floating[on]+(rn&&((Kt=Et.offset)==null?void 0:Kt[Nt])||0)+(rn?0:Wt.crossAxis),gn=xt.reference[Nt]+xt.reference[on]+(rn?0:((Jt=Et.offset)==null?void 0:Jt[Nt])||0)-(rn?Wt.crossAxis:0);Yt<ln?Yt=ln:Yt>gn&&(Yt=gn)}return{[Bt]:Ft,[Nt]:Yt}}}},size$1=function(nt){return nt===void 0&&(nt={}),{name:"size",options:nt,async fn(rt){var it,st;const{placement:_t,rects:xt,platform:Et,elements:kt}=rt,{apply:Lt=()=>{},...It}=evaluate$1(nt,rt),Rt=await detectOverflow$1(rt,It),Nt=getSide(_t),Bt=getAlignment(_t),Ft=getSideAxis(_t)==="y",{width:Yt,height:Zt}=xt.floating;let Wt,Kt;Nt==="top"||Nt==="bottom"?(Wt=Nt,Kt=Bt===(await(Et.isRTL==null?void 0:Et.isRTL(kt.floating))?"start":"end")?"left":"right"):(Kt=Nt,Wt=Bt==="end"?"top":"bottom");const Jt=Zt-Rt.top-Rt.bottom,on=Yt-Rt.left-Rt.right,rn=min$4(Zt-Rt[Wt],Jt),ln=min$4(Yt-Rt[Kt],on),gn=!rt.middlewareData.shift;let wn=rn,kn=ln;if((it=rt.middlewareData.shift)!=null&&it.enabled.x&&(kn=on),(st=rt.middlewareData.shift)!=null&&st.enabled.y&&(wn=Jt),gn&&!Bt){const Pn=max$4(Rt.left,0),An=max$4(Rt.right,0),cn=max$4(Rt.top,0),Ln=max$4(Rt.bottom,0);Ft?kn=Yt-2*(Pn!==0||An!==0?Pn+An:max$4(Rt.left,Rt.right)):wn=Zt-2*(cn!==0||Ln!==0?cn+Ln:max$4(Rt.top,Rt.bottom))}await Lt({...rt,availableWidth:kn,availableHeight:wn});const Cn=await Et.getDimensions(kt.floating);return Yt!==Cn.width||Zt!==Cn.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName$1(nt){return isNode$1(nt)?(nt.nodeName||"").toLowerCase():"#document"}function getWindow$1(nt){var rt;return(nt==null||(rt=nt.ownerDocument)==null?void 0:rt.defaultView)||window}function getDocumentElement$1(nt){var rt;return(rt=(isNode$1(nt)?nt.ownerDocument:nt.document)||window.document)==null?void 0:rt.documentElement}function isNode$1(nt){return hasWindow()?nt instanceof Node||nt instanceof getWindow$1(nt).Node:!1}function isElement$2(nt){return hasWindow()?nt instanceof Element||nt instanceof getWindow$1(nt).Element:!1}function isHTMLElement$1(nt){return hasWindow()?nt instanceof HTMLElement||nt instanceof getWindow$1(nt).HTMLElement:!1}function isShadowRoot$1(nt){return!hasWindow()||typeof ShadowRoot>"u"?!1:nt instanceof ShadowRoot||nt instanceof getWindow$1(nt).ShadowRoot}function isOverflowElement(nt){const{overflow:rt,overflowX:it,overflowY:st,display:_t}=getComputedStyle$2(nt);return/auto|scroll|overlay|hidden|clip/.test(rt+st+it)&&!["inline","contents"].includes(_t)}function isTableElement$1(nt){return["table","td","th"].includes(getNodeName$1(nt))}function isTopLayer(nt){return[":popover-open",":modal"].some(rt=>{try{return nt.matches(rt)}catch{return!1}})}function isContainingBlock(nt){const rt=isWebKit(),it=isElement$2(nt)?getComputedStyle$2(nt):nt;return["transform","translate","scale","rotate","perspective"].some(st=>it[st]?it[st]!=="none":!1)||(it.containerType?it.containerType!=="normal":!1)||!rt&&(it.backdropFilter?it.backdropFilter!=="none":!1)||!rt&&(it.filter?it.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(st=>(it.willChange||"").includes(st))||["paint","layout","strict","content"].some(st=>(it.contain||"").includes(st))}function getContainingBlock$1(nt){let rt=getParentNode$1(nt);for(;isHTMLElement$1(rt)&&!isLastTraversableNode(rt);){if(isContainingBlock(rt))return rt;if(isTopLayer(rt))return null;rt=getParentNode$1(rt)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(nt){return["html","body","#document"].includes(getNodeName$1(nt))}function getComputedStyle$2(nt){return getWindow$1(nt).getComputedStyle(nt)}function getNodeScroll$1(nt){return isElement$2(nt)?{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}:{scrollLeft:nt.scrollX,scrollTop:nt.scrollY}}function getParentNode$1(nt){if(getNodeName$1(nt)==="html")return nt;const rt=nt.assignedSlot||nt.parentNode||isShadowRoot$1(nt)&&nt.host||getDocumentElement$1(nt);return isShadowRoot$1(rt)?rt.host:rt}function getNearestOverflowAncestor(nt){const rt=getParentNode$1(nt);return isLastTraversableNode(rt)?nt.ownerDocument?nt.ownerDocument.body:nt.body:isHTMLElement$1(rt)&&isOverflowElement(rt)?rt:getNearestOverflowAncestor(rt)}function getOverflowAncestors(nt,rt,it){var st;rt===void 0&&(rt=[]),it===void 0&&(it=!0);const _t=getNearestOverflowAncestor(nt),xt=_t===((st=nt.ownerDocument)==null?void 0:st.body),Et=getWindow$1(_t);if(xt){const kt=getFrameElement(Et);return rt.concat(Et,Et.visualViewport||[],isOverflowElement(_t)?_t:[],kt&&it?getOverflowAncestors(kt):[])}return rt.concat(_t,getOverflowAncestors(_t,[],it))}function getFrameElement(nt){return nt.parent&&Object.getPrototypeOf(nt.parent)?nt.frameElement:null}function getCssDimensions(nt){const rt=getComputedStyle$2(nt);let it=parseFloat(rt.width)||0,st=parseFloat(rt.height)||0;const _t=isHTMLElement$1(nt),xt=_t?nt.offsetWidth:it,Et=_t?nt.offsetHeight:st,kt=round$1(it)!==xt||round$1(st)!==Et;return kt&&(it=xt,st=Et),{width:it,height:st,$:kt}}function unwrapElement(nt){return isElement$2(nt)?nt:nt.contextElement}function getScale(nt){const rt=unwrapElement(nt);if(!isHTMLElement$1(rt))return createCoords(1);const it=rt.getBoundingClientRect(),{width:st,height:_t,$:xt}=getCssDimensions(rt);let Et=(xt?round$1(it.width):it.width)/st,kt=(xt?round$1(it.height):it.height)/_t;return(!Et||!Number.isFinite(Et))&&(Et=1),(!kt||!Number.isFinite(kt))&&(kt=1),{x:Et,y:kt}}const noOffsets=createCoords(0);function getVisualOffsets(nt){const rt=getWindow$1(nt);return!isWebKit()||!rt.visualViewport?noOffsets:{x:rt.visualViewport.offsetLeft,y:rt.visualViewport.offsetTop}}function shouldAddVisualOffsets(nt,rt,it){return rt===void 0&&(rt=!1),!it||rt&&it!==getWindow$1(nt)?!1:rt}function getBoundingClientRect$1(nt,rt,it,st){rt===void 0&&(rt=!1),it===void 0&&(it=!1);const _t=nt.getBoundingClientRect(),xt=unwrapElement(nt);let Et=createCoords(1);rt&&(st?isElement$2(st)&&(Et=getScale(st)):Et=getScale(nt));const kt=shouldAddVisualOffsets(xt,it,st)?getVisualOffsets(xt):createCoords(0);let Lt=(_t.left+kt.x)/Et.x,It=(_t.top+kt.y)/Et.y,Rt=_t.width/Et.x,Nt=_t.height/Et.y;if(xt){const Bt=getWindow$1(xt),Ft=st&&isElement$2(st)?getWindow$1(st):st;let Yt=Bt,Zt=getFrameElement(Yt);for(;Zt&&st&&Ft!==Yt;){const Wt=getScale(Zt),Kt=Zt.getBoundingClientRect(),Jt=getComputedStyle$2(Zt),on=Kt.left+(Zt.clientLeft+parseFloat(Jt.paddingLeft))*Wt.x,rn=Kt.top+(Zt.clientTop+parseFloat(Jt.paddingTop))*Wt.y;Lt*=Wt.x,It*=Wt.y,Rt*=Wt.x,Nt*=Wt.y,Lt+=on,It+=rn,Yt=getWindow$1(Zt),Zt=getFrameElement(Yt)}}return rectToClientRect$1({width:Rt,height:Nt,x:Lt,y:It})}function getWindowScrollBarX$1(nt,rt){const it=getNodeScroll$1(nt).scrollLeft;return rt?rt.left+it:getBoundingClientRect$1(getDocumentElement$1(nt)).left+it}function getHTMLOffset(nt,rt,it){it===void 0&&(it=!1);const st=nt.getBoundingClientRect(),_t=st.left+rt.scrollLeft-(it?0:getWindowScrollBarX$1(nt,st)),xt=st.top+rt.scrollTop;return{x:_t,y:xt}}function convertOffsetParentRelativeRectToViewportRelativeRect(nt){let{elements:rt,rect:it,offsetParent:st,strategy:_t}=nt;const xt=_t==="fixed",Et=getDocumentElement$1(st),kt=rt?isTopLayer(rt.floating):!1;if(st===Et||kt&&xt)return it;let Lt={scrollLeft:0,scrollTop:0},It=createCoords(1);const Rt=createCoords(0),Nt=isHTMLElement$1(st);if((Nt||!Nt&&!xt)&&((getNodeName$1(st)!=="body"||isOverflowElement(Et))&&(Lt=getNodeScroll$1(st)),isHTMLElement$1(st))){const Ft=getBoundingClientRect$1(st);It=getScale(st),Rt.x=Ft.x+st.clientLeft,Rt.y=Ft.y+st.clientTop}const Bt=Et&&!Nt&&!xt?getHTMLOffset(Et,Lt,!0):createCoords(0);return{width:it.width*It.x,height:it.height*It.y,x:it.x*It.x-Lt.scrollLeft*It.x+Rt.x+Bt.x,y:it.y*It.y-Lt.scrollTop*It.y+Rt.y+Bt.y}}function getClientRects(nt){return Array.from(nt.getClientRects())}function getDocumentRect$1(nt){const rt=getDocumentElement$1(nt),it=getNodeScroll$1(nt),st=nt.ownerDocument.body,_t=max$4(rt.scrollWidth,rt.clientWidth,st.scrollWidth,st.clientWidth),xt=max$4(rt.scrollHeight,rt.clientHeight,st.scrollHeight,st.clientHeight);let Et=-it.scrollLeft+getWindowScrollBarX$1(nt);const kt=-it.scrollTop;return getComputedStyle$2(st).direction==="rtl"&&(Et+=max$4(rt.clientWidth,st.clientWidth)-_t),{width:_t,height:xt,x:Et,y:kt}}function getViewportRect$1(nt,rt){const it=getWindow$1(nt),st=getDocumentElement$1(nt),_t=it.visualViewport;let xt=st.clientWidth,Et=st.clientHeight,kt=0,Lt=0;if(_t){xt=_t.width,Et=_t.height;const It=isWebKit();(!It||It&&rt==="fixed")&&(kt=_t.offsetLeft,Lt=_t.offsetTop)}return{width:xt,height:Et,x:kt,y:Lt}}function getInnerBoundingClientRect$1(nt,rt){const it=getBoundingClientRect$1(nt,!0,rt==="fixed"),st=it.top+nt.clientTop,_t=it.left+nt.clientLeft,xt=isHTMLElement$1(nt)?getScale(nt):createCoords(1),Et=nt.clientWidth*xt.x,kt=nt.clientHeight*xt.y,Lt=_t*xt.x,It=st*xt.y;return{width:Et,height:kt,x:Lt,y:It}}function getClientRectFromClippingAncestor(nt,rt,it){let st;if(rt==="viewport")st=getViewportRect$1(nt,it);else if(rt==="document")st=getDocumentRect$1(getDocumentElement$1(nt));else if(isElement$2(rt))st=getInnerBoundingClientRect$1(rt,it);else{const _t=getVisualOffsets(nt);st={x:rt.x-_t.x,y:rt.y-_t.y,width:rt.width,height:rt.height}}return rectToClientRect$1(st)}function hasFixedPositionAncestor(nt,rt){const it=getParentNode$1(nt);return it===rt||!isElement$2(it)||isLastTraversableNode(it)?!1:getComputedStyle$2(it).position==="fixed"||hasFixedPositionAncestor(it,rt)}function getClippingElementAncestors(nt,rt){const it=rt.get(nt);if(it)return it;let st=getOverflowAncestors(nt,[],!1).filter(kt=>isElement$2(kt)&&getNodeName$1(kt)!=="body"),_t=null;const xt=getComputedStyle$2(nt).position==="fixed";let Et=xt?getParentNode$1(nt):nt;for(;isElement$2(Et)&&!isLastTraversableNode(Et);){const kt=getComputedStyle$2(Et),Lt=isContainingBlock(Et);!Lt&&kt.position==="fixed"&&(_t=null),(xt?!Lt&&!_t:!Lt&&kt.position==="static"&&!!_t&&["absolute","fixed"].includes(_t.position)||isOverflowElement(Et)&&!Lt&&hasFixedPositionAncestor(nt,Et))?st=st.filter(Rt=>Rt!==Et):_t=kt,Et=getParentNode$1(Et)}return rt.set(nt,st),st}function getClippingRect$1(nt){let{element:rt,boundary:it,rootBoundary:st,strategy:_t}=nt;const Et=[...it==="clippingAncestors"?isTopLayer(rt)?[]:getClippingElementAncestors(rt,this._c):[].concat(it),st],kt=Et[0],Lt=Et.reduce((It,Rt)=>{const Nt=getClientRectFromClippingAncestor(rt,Rt,_t);return It.top=max$4(Nt.top,It.top),It.right=min$4(Nt.right,It.right),It.bottom=min$4(Nt.bottom,It.bottom),It.left=max$4(Nt.left,It.left),It},getClientRectFromClippingAncestor(rt,kt,_t));return{width:Lt.right-Lt.left,height:Lt.bottom-Lt.top,x:Lt.left,y:Lt.top}}function getDimensions(nt){const{width:rt,height:it}=getCssDimensions(nt);return{width:rt,height:it}}function getRectRelativeToOffsetParent(nt,rt,it){const st=isHTMLElement$1(rt),_t=getDocumentElement$1(rt),xt=it==="fixed",Et=getBoundingClientRect$1(nt,!0,xt,rt);let kt={scrollLeft:0,scrollTop:0};const Lt=createCoords(0);function It(){Lt.x=getWindowScrollBarX$1(_t)}if(st||!st&&!xt)if((getNodeName$1(rt)!=="body"||isOverflowElement(_t))&&(kt=getNodeScroll$1(rt)),st){const Ft=getBoundingClientRect$1(rt,!0,xt,rt);Lt.x=Ft.x+rt.clientLeft,Lt.y=Ft.y+rt.clientTop}else _t&&It();xt&&!st&&_t&&It();const Rt=_t&&!st&&!xt?getHTMLOffset(_t,kt):createCoords(0),Nt=Et.left+kt.scrollLeft-Lt.x-Rt.x,Bt=Et.top+kt.scrollTop-Lt.y-Rt.y;return{x:Nt,y:Bt,width:Et.width,height:Et.height}}function isStaticPositioned(nt){return getComputedStyle$2(nt).position==="static"}function getTrueOffsetParent$1(nt,rt){if(!isHTMLElement$1(nt)||getComputedStyle$2(nt).position==="fixed")return null;if(rt)return rt(nt);let it=nt.offsetParent;return getDocumentElement$1(nt)===it&&(it=it.ownerDocument.body),it}function getOffsetParent$1(nt,rt){const it=getWindow$1(nt);if(isTopLayer(nt))return it;if(!isHTMLElement$1(nt)){let _t=getParentNode$1(nt);for(;_t&&!isLastTraversableNode(_t);){if(isElement$2(_t)&&!isStaticPositioned(_t))return _t;_t=getParentNode$1(_t)}return it}let st=getTrueOffsetParent$1(nt,rt);for(;st&&isTableElement$1(st)&&isStaticPositioned(st);)st=getTrueOffsetParent$1(st,rt);return st&&isLastTraversableNode(st)&&isStaticPositioned(st)&&!isContainingBlock(st)?it:st||getContainingBlock$1(nt)||it}const getElementRects=async function(nt){const rt=this.getOffsetParent||getOffsetParent$1,it=this.getDimensions,st=await it(nt.floating);return{reference:getRectRelativeToOffsetParent(nt.reference,await rt(nt.floating),nt.strategy),floating:{x:0,y:0,width:st.width,height:st.height}}};function isRTL(nt){return getComputedStyle$2(nt).direction==="rtl"}const platform$1={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement:getDocumentElement$1,getClippingRect:getClippingRect$1,getOffsetParent:getOffsetParent$1,getElementRects,getClientRects,getDimensions,getScale,isElement:isElement$2,isRTL};function rectsAreEqual(nt,rt){return nt.x===rt.x&&nt.y===rt.y&&nt.width===rt.width&&nt.height===rt.height}function observeMove(nt,rt){let it=null,st;const _t=getDocumentElement$1(nt);function xt(){var kt;clearTimeout(st),(kt=it)==null||kt.disconnect(),it=null}function Et(kt,Lt){kt===void 0&&(kt=!1),Lt===void 0&&(Lt=1),xt();const It=nt.getBoundingClientRect(),{left:Rt,top:Nt,width:Bt,height:Ft}=It;if(kt||rt(),!Bt||!Ft)return;const Yt=floor(Nt),Zt=floor(_t.clientWidth-(Rt+Bt)),Wt=floor(_t.clientHeight-(Nt+Ft)),Kt=floor(Rt),on={rootMargin:-Yt+"px "+-Zt+"px "+-Wt+"px "+-Kt+"px",threshold:max$4(0,min$4(1,Lt))||1};let rn=!0;function ln(gn){const wn=gn[0].intersectionRatio;if(wn!==Lt){if(!rn)return Et();wn?Et(!1,wn):st=setTimeout(()=>{Et(!1,1e-7)},1e3)}wn===1&&!rectsAreEqual(It,nt.getBoundingClientRect())&&Et(),rn=!1}try{it=new IntersectionObserver(ln,{...on,root:_t.ownerDocument})}catch{it=new IntersectionObserver(ln,on)}it.observe(nt)}return Et(!0),xt}function autoUpdate(nt,rt,it,st){st===void 0&&(st={});const{ancestorScroll:_t=!0,ancestorResize:xt=!0,elementResize:Et=typeof ResizeObserver=="function",layoutShift:kt=typeof IntersectionObserver=="function",animationFrame:Lt=!1}=st,It=unwrapElement(nt),Rt=_t||xt?[...It?getOverflowAncestors(It):[],...getOverflowAncestors(rt)]:[];Rt.forEach(Kt=>{_t&&Kt.addEventListener("scroll",it,{passive:!0}),xt&&Kt.addEventListener("resize",it)});const Nt=It&&kt?observeMove(It,it):null;let Bt=-1,Ft=null;Et&&(Ft=new ResizeObserver(Kt=>{let[Jt]=Kt;Jt&&Jt.target===It&&Ft&&(Ft.unobserve(rt),cancelAnimationFrame(Bt),Bt=requestAnimationFrame(()=>{var on;(on=Ft)==null||on.observe(rt)})),it()}),It&&!Lt&&Ft.observe(It),Ft.observe(rt));let Yt,Zt=Lt?getBoundingClientRect$1(nt):null;Lt&&Wt();function Wt(){const Kt=getBoundingClientRect$1(nt);Zt&&!rectsAreEqual(Zt,Kt)&&it(),Zt=Kt,Yt=requestAnimationFrame(Wt)}return it(),()=>{var Kt;Rt.forEach(Jt=>{_t&&Jt.removeEventListener("scroll",it),xt&&Jt.removeEventListener("resize",it)}),Nt==null||Nt(),(Kt=Ft)==null||Kt.disconnect(),Ft=null,Lt&&cancelAnimationFrame(Yt)}}const offset$3=offset$4,shift=shift$1,flip$2=flip$3,size=size$1,arrow$2=arrow$3,computePosition=(nt,rt,it)=>{const st=new Map,_t={platform:platform$1,...it},xt={..._t.platform,_c:st};return computePosition$1(nt,rt,{..._t,platform:xt})};function offsetParent(nt){return offsetParentPolyfill(nt)}function flatTreeParent(nt){return nt.assignedSlot?nt.assignedSlot:nt.parentNode instanceof ShadowRoot?nt.parentNode.host:nt.parentNode}function offsetParentPolyfill(nt){for(let rt=nt;rt;rt=flatTreeParent(rt))if(rt instanceof Element&&getComputedStyle(rt).display==="none")return null;for(let rt=flatTreeParent(nt);rt;rt=flatTreeParent(rt)){if(!(rt instanceof Element))continue;const it=getComputedStyle(rt);if(it.display!=="contents"&&(it.position!=="static"||isContainingBlock(it)||rt.tagName==="BODY"))return rt}return null}function isVirtualElement(nt){return nt!==null&&typeof nt=="object"&&"getBoundingClientRect"in nt&&("contextElement"in nt?nt.contextElement instanceof Element:!0)}var SlPopup=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.hoverBridge=!1,this.updateHoverBridge=()=>{if(this.hoverBridge&&this.anchorEl){const nt=this.anchorEl.getBoundingClientRect(),rt=this.popup.getBoundingClientRect(),it=this.placement.includes("top")||this.placement.includes("bottom");let st=0,_t=0,xt=0,Et=0,kt=0,Lt=0,It=0,Rt=0;it?nt.top<rt.top?(st=nt.left,_t=nt.bottom,xt=nt.right,Et=nt.bottom,kt=rt.left,Lt=rt.top,It=rt.right,Rt=rt.top):(st=rt.left,_t=rt.bottom,xt=rt.right,Et=rt.bottom,kt=nt.left,Lt=nt.top,It=nt.right,Rt=nt.top):nt.left<rt.left?(st=nt.right,_t=nt.top,xt=rt.left,Et=rt.top,kt=nt.right,Lt=nt.bottom,It=rt.left,Rt=rt.bottom):(st=rt.right,_t=rt.top,xt=nt.left,Et=nt.top,kt=rt.right,Lt=rt.bottom,It=nt.left,Rt=nt.bottom),this.style.setProperty("--hover-bridge-top-left-x",`${st}px`),this.style.setProperty("--hover-bridge-top-left-y",`${_t}px`),this.style.setProperty("--hover-bridge-top-right-x",`${xt}px`),this.style.setProperty("--hover-bridge-top-right-y",`${Et}px`),this.style.setProperty("--hover-bridge-bottom-left-x",`${kt}px`),this.style.setProperty("--hover-bridge-bottom-left-y",`${Lt}px`),this.style.setProperty("--hover-bridge-bottom-right-x",`${It}px`),this.style.setProperty("--hover-bridge-bottom-right-y",`${Rt}px`)}}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(nt){super.updated(nt),nt.has("active")&&(this.active?this.start():this.stop()),nt.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){const nt=this.getRootNode();this.anchorEl=nt.getElementById(this.anchor)}else this.anchor instanceof Element||isVirtualElement(this.anchor)?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.active&&this.start()}start(){!this.anchorEl||!this.active||(this.cleanup=autoUpdate(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(nt=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>nt())):nt()})}reposition(){if(!this.active||!this.anchorEl)return;const nt=[offset$3({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?nt.push(size({apply:({rects:it})=>{const st=this.sync==="width"||this.sync==="both",_t=this.sync==="height"||this.sync==="both";this.popup.style.width=st?`${it.reference.width}px`:"",this.popup.style.height=_t?`${it.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&nt.push(flip$2({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&nt.push(shift({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?nt.push(size({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:it,availableHeight:st})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${st}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${it}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&nt.push(arrow$2({element:this.arrowEl,padding:this.arrowPadding}));const rt=this.strategy==="absolute"?it=>platform$1.getOffsetParent(it,offsetParent):platform$1.getOffsetParent;computePosition(this.anchorEl,this.popup,{placement:this.placement,middleware:nt,strategy:this.strategy,platform:__spreadProps(__spreadValues({},platform$1),{getOffsetParent:rt})}).then(({x:it,y:st,middlewareData:_t,placement:xt})=>{const Et=this.localize.dir()==="rtl",kt={top:"bottom",right:"left",bottom:"top",left:"right"}[xt.split("-")[0]];if(this.setAttribute("data-current-placement",xt),Object.assign(this.popup.style,{left:`${it}px`,top:`${st}px`}),this.arrow){const Lt=_t.arrow.x,It=_t.arrow.y;let Rt="",Nt="",Bt="",Ft="";if(this.arrowPlacement==="start"){const Yt=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Rt=typeof It=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",Nt=Et?Yt:"",Ft=Et?"":Yt}else if(this.arrowPlacement==="end"){const Yt=typeof Lt=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";Nt=Et?"":Yt,Ft=Et?Yt:"",Bt=typeof It=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(Ft=typeof Lt=="number"?"calc(50% - var(--arrow-size-diagonal))":"",Rt=typeof It=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(Ft=typeof Lt=="number"?`${Lt}px`:"",Rt=typeof It=="number"?`${It}px`:"");Object.assign(this.arrowEl.style,{top:Rt,right:Nt,bottom:Bt,left:Ft,[kt]:"calc(var(--arrow-size-diagonal) * -1)"})}}),requestAnimationFrame(()=>this.updateHoverBridge()),this.emit("sl-reposition")}render(){return x$1`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <span
        part="hover-bridge"
        class=${e$1({"popup-hover-bridge":!0,"popup-hover-bridge--visible":this.hoverBridge&&this.active})}
      ></span>

      <div
        part="popup"
        class=${e$1({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?x$1`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}};SlPopup.styles=[component_styles_default,popup_styles_default];__decorateClass([e$4(".popup")],SlPopup.prototype,"popup",2);__decorateClass([e$4(".popup__arrow")],SlPopup.prototype,"arrowEl",2);__decorateClass([n$4()],SlPopup.prototype,"anchor",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlPopup.prototype,"active",2);__decorateClass([n$4({reflect:!0})],SlPopup.prototype,"placement",2);__decorateClass([n$4({reflect:!0})],SlPopup.prototype,"strategy",2);__decorateClass([n$4({type:Number})],SlPopup.prototype,"distance",2);__decorateClass([n$4({type:Number})],SlPopup.prototype,"skidding",2);__decorateClass([n$4({type:Boolean})],SlPopup.prototype,"arrow",2);__decorateClass([n$4({attribute:"arrow-placement"})],SlPopup.prototype,"arrowPlacement",2);__decorateClass([n$4({attribute:"arrow-padding",type:Number})],SlPopup.prototype,"arrowPadding",2);__decorateClass([n$4({type:Boolean})],SlPopup.prototype,"flip",2);__decorateClass([n$4({attribute:"flip-fallback-placements",converter:{fromAttribute:nt=>nt.split(" ").map(rt=>rt.trim()).filter(rt=>rt!==""),toAttribute:nt=>nt.join(" ")}})],SlPopup.prototype,"flipFallbackPlacements",2);__decorateClass([n$4({attribute:"flip-fallback-strategy"})],SlPopup.prototype,"flipFallbackStrategy",2);__decorateClass([n$4({type:Object})],SlPopup.prototype,"flipBoundary",2);__decorateClass([n$4({attribute:"flip-padding",type:Number})],SlPopup.prototype,"flipPadding",2);__decorateClass([n$4({type:Boolean})],SlPopup.prototype,"shift",2);__decorateClass([n$4({type:Object})],SlPopup.prototype,"shiftBoundary",2);__decorateClass([n$4({attribute:"shift-padding",type:Number})],SlPopup.prototype,"shiftPadding",2);__decorateClass([n$4({attribute:"auto-size"})],SlPopup.prototype,"autoSize",2);__decorateClass([n$4()],SlPopup.prototype,"sync",2);__decorateClass([n$4({type:Object})],SlPopup.prototype,"autoSizeBoundary",2);__decorateClass([n$4({attribute:"auto-size-padding",type:Number})],SlPopup.prototype,"autoSizePadding",2);__decorateClass([n$4({attribute:"hover-bridge",type:Boolean})],SlPopup.prototype,"hoverBridge",2);var SlTooltip=class extends ShoelaceElement{constructor(){super(),this.localize=new LocalizeController(this),this.content="",this.placement="top",this.disabled=!1,this.distance=8,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.handleBlur=()=>{this.hasTrigger("focus")&&this.hide()},this.handleClick=()=>{this.hasTrigger("click")&&(this.open?this.hide():this.show())},this.handleFocus=()=>{this.hasTrigger("focus")&&this.show()},this.handleDocumentKeyDown=nt=>{nt.key==="Escape"&&(nt.stopPropagation(),this.hide())},this.handleMouseOver=()=>{if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.show(),nt)}},this.handleMouseOut=()=>{if(this.hasTrigger("hover")){const nt=parseDuration$1(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.hide(),nt)}},this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut)}disconnectedCallback(){var nt;super.disconnectedCallback(),(nt=this.closeWatcher)==null||nt.destroy(),document.removeEventListener("keydown",this.handleDocumentKeyDown)}firstUpdated(){this.body.hidden=!this.open,this.open&&(this.popup.active=!0,this.popup.reposition())}hasTrigger(nt){return this.trigger.split(" ").includes(nt)}async handleOpenChange(){var nt,rt;if(this.open){if(this.disabled)return;this.emit("sl-show"),"CloseWatcher"in window?((nt=this.closeWatcher)==null||nt.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.hide()}):document.addEventListener("keydown",this.handleDocumentKeyDown),await stopAnimations(this.body),this.body.hidden=!1,this.popup.active=!0;const{keyframes:it,options:st}=getAnimation(this,"tooltip.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,it,st),this.popup.reposition(),this.emit("sl-after-show")}else{this.emit("sl-hide"),(rt=this.closeWatcher)==null||rt.destroy(),document.removeEventListener("keydown",this.handleDocumentKeyDown),await stopAnimations(this.body);const{keyframes:it,options:st}=getAnimation(this,"tooltip.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,it,st),this.popup.active=!1,this.body.hidden=!0,this.emit("sl-after-hide")}}async handleOptionsChange(){this.hasUpdated&&(await this.updateComplete,this.popup.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return x$1`
      <sl-popup
        part="base"
        exportparts="
          popup:base__popup,
          arrow:base__arrow
        "
        class=${e$1({tooltip:!0,"tooltip--open":this.open})}
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        arrow
        hover-bridge
      >
        ${""}
        <slot slot="anchor" aria-describedby="tooltip"></slot>

        ${""}
        <div part="body" id="tooltip" class="tooltip__body" role="tooltip" aria-live=${this.open?"polite":"off"}>
          <slot name="content">${this.content}</slot>
        </div>
      </sl-popup>
    `}};SlTooltip.styles=[component_styles_default,tooltip_styles_default];SlTooltip.dependencies={"sl-popup":SlPopup};__decorateClass([e$4("slot:not([name])")],SlTooltip.prototype,"defaultSlot",2);__decorateClass([e$4(".tooltip__body")],SlTooltip.prototype,"body",2);__decorateClass([e$4("sl-popup")],SlTooltip.prototype,"popup",2);__decorateClass([n$4()],SlTooltip.prototype,"content",2);__decorateClass([n$4()],SlTooltip.prototype,"placement",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTooltip.prototype,"disabled",2);__decorateClass([n$4({type:Number})],SlTooltip.prototype,"distance",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTooltip.prototype,"open",2);__decorateClass([n$4({type:Number})],SlTooltip.prototype,"skidding",2);__decorateClass([n$4()],SlTooltip.prototype,"trigger",2);__decorateClass([n$4({type:Boolean})],SlTooltip.prototype,"hoist",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlTooltip.prototype,"handleOpenChange",1);__decorateClass([watch(["content","distance","hoist","placement","skidding"])],SlTooltip.prototype,"handleOptionsChange",1);__decorateClass([watch("disabled")],SlTooltip.prototype,"handleDisabledChange",1);setDefaultAnimation("tooltip.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}});setDefaultAnimation("tooltip.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});SlTooltip.define("sl-tooltip");const _hoisted_1$r={class:"fields"},_hoisted_2$h={class:"metadata"},_hoisted_3$e={class:"exif-data"},_hoisted_4$b=["innerHTML"],_hoisted_5$b=["innerHTML"],_hoisted_6$8={class:"depicted"},_hoisted_7$6={class:"search"},_hoisted_8$6=["data-entity"],_hoisted_9$5=["innerHTML"],_hoisted_10$3=["innerHTML"],_hoisted_11$3={class:"buttons"},_sfc_main$y=defineComponent({__name:"AddMediaResourceDialog.ce",props:{path:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){rt({isOpen:Ln,show:ir});const it=nt,st=ref(""),_t=ref(),xt=ref(),Et=ref(),kt=ref(),Lt=ref([]),It=ref(),Rt=ref(),Nt=ref(),Bt=ref(),Ft=ref(),Yt=ref(),Zt=ref(),Wt=ref(),Kt=ref(),Jt=ref({}),on=ref([]),rn=ref(!1),ln=ref(null),gn=computed(()=>{var tr;return(tr=ln==null?void 0:ln.value)==null?void 0:tr.parentNode});computed(()=>{var tr,Jn;return(Jn=(tr=ln.value)==null?void 0:tr.getRootNode())==null?void 0:Jn.host}),onMounted(()=>wn()),watch$1(rn,()=>{It.value&&(It.value.open=rn.value)}),watch$1(st,()=>{_t.value=new GithubClient(st.value)}),watch$1(Rt,()=>{_t.value=new GithubClient(st.value)}),watch$1(Lt,()=>{Ft.value&&(Ft.value.value=Lt.value.join("/"))}),watch$1(it,()=>{kn()});function wn(){var Jn,hr,lr,cr,Cr,Er,ar;let tr=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");tr&&(st.value=tr),it.path&&kn(),It.value=(Jn=gn.value)==null?void 0:Jn.querySelector("#add-media-resource-dialog"),It.value.addEventListener("sl-hide",()=>Cn()),Bt.value=(hr=gn.value)==null?void 0:hr.querySelector("#add-media-resource-form"),Ft.value=(lr=gn.value)==null?void 0:lr.querySelector("#resource-folder"),Ft.value.value=Lt.value.join("/"),Yt.value=(cr=gn.value)==null?void 0:cr.querySelector("#resource-name"),Zt.value=(Cr=gn.value)==null?void 0:Cr.querySelector("#resource-summary"),Wt.value=(Er=gn.value)==null?void 0:Er.querySelector("#img"),Kt.value=(ar=gn.value)==null?void 0:ar.querySelector("#filePicker"),it.show&&Pn()}function kn(){var tr;if(it.path){let[Jn,hr]=((tr=it.path.split(":").pop())==null?void 0:tr.split("?"))||[],lr=hr?Object.fromEntries(hr.split("&").map(Cr=>Cr.split("="))):{},cr=Jn.split("/").filter(Cr=>Cr);cr.length>0&&(xt.value=cr[0]),cr.length>1&&(Et.value=cr[1]),cr.length>2&&(Lt.value=cr.slice(2)),lr.ref&&(kt.value=lr.ref||"main")}}function Cn(){Ft.value&&(Ft.value.value=Lt.value.join("/")),Yt.value&&(Yt.value.value=""),Rt.value=void 0,Kt.value&&(Kt.value.value=""),rn.value=!1}async function Pn(){let tr=Bt.value;tr&&(tr.onclick||(tr.onclick=function(){},tr.addEventListener("submit",async Jn=>{var cr,Cr,Er;Jn.preventDefault(),console.log(`Add resource: folder="${(cr=Ft.value)==null?void 0:cr.value}" name="${(Cr=Yt.value)==null?void 0:Cr.value}" summary="${(Er=Zt.value)==null?void 0:Er.value}"`);let hr=await zn();const lr=new FileReader;lr.onloadend=async()=>{var mr,xr;const ar=lr.result;let Fr=(mr=Yt.value)==null?void 0:mr.value.trim().replace(/ /g,"_");if(Ft.value){let fr=[...(xr=Ft.value)==null?void 0:xr.value.split("/").filter(gr=>gr),Fr].join("/");await _t.value.putFile(xt.value,Et.value,`${fr}.${Nt.value}`,ar,kt.value,!0),Object.keys(hr).length>0&&await _t.value.putFile(xt.value,Et.value,`${fr}.yaml`,jsYaml.dump(hr),kt.value),rn.value=!1}},Rt.value&&lr.readAsBinaryString(Rt.value)})),rn.value=!0)}function An(tr){on.value=on.value.filter(Jn=>Jn.id!==tr)}function cn(tr){on.value=[...on.value,tr.detail[0]]}function Ln(){return rn.value}function an(){var tr;if(((tr=Kt.value)==null?void 0:tr.files)&&Kt.value.files.length>0){Rt.value=Kt.value.files[0];let Jn=Rt.value.name.split(".");Nt.value=Jn.slice(-1)[0].toLowerCase();let hr=window.URL||window.webkitURL;Wt.value&&(Wt.value.onload=()=>dn().then(lr=>{Jt.value=lr}),Wt.value.src=hr.createObjectURL(Rt.value)),setTimeout(()=>{var lr;return((lr=gn.value)==null?void 0:lr.querySelector("#resource-name")).focus()},100)}}async function zn(){let tr={};Zt.value&&(tr.summary=Zt.value.value.trim());let Jn=gn.value?Array.from(gn.value.querySelectorAll(".depicted [data-entity]")).map(lr=>lr.dataset.entity):[];Jn.length>0&&(tr.depicts=Jn);let hr=await dn();return hr&&(tr={...tr,...hr}),tr}async function dn(){var Jn,hr,lr;let tr={};try{let cr=await tt.parse((Jn=Wt.value)==null?void 0:Jn.src,!0);cr.CreateDate&&(tr.created=cr.CreateDate.toISOString());let Cr=await tt.orientation((hr=Wt.value)==null?void 0:hr.src);Cr&&(tr.orientation=Cr);let Er=await tt.gps((lr=Wt.value)==null?void 0:lr.src);if(Er){let{latitude:ar,longitude:Fr}=Er;ar&&(tr.location=`${ar.toFixed(7)},${Fr.toFixed(7)}`)}}catch(cr){console.log(cr)}return tr}function Fn(){rn.value=!1}function ir(tr){tr?Pn():Cn()}return(tr,Jn)=>{const hr=resolveComponent("sl-input"),lr=resolveComponent("ve-wikidata-search"),cr=resolveComponent("sl-icon-button"),Cr=resolveComponent("sl-button"),Er=resolveComponent("sl-dialog");return openBlock(),createElementBlock("div",{ref_key:"root",ref:ln,class:"main"},[createVNode(Er,{id:"add-media-resource-dialog",label:"Add Media Resource"},{default:withCtx(()=>{var ar,Fr,mr;return[createBaseVNode("form",{style:normalizeStyle({display:(ar=Rt.value)!=null&&ar.name?"grid":"none"}),id:"add-media-resource-form",class:"input-validation-pattern"},[createBaseVNode("div",{style:normalizeStyle({height:`${(Fr=Rt.value)!=null&&Fr.name?120:0}px`})},Jn[0]||(Jn[0]=[createBaseVNode("img",{id:"img",style:{paddingLeft:"16px",height:"100%"}},null,-1)]),4),createBaseVNode("div",_hoisted_1$r,[createVNode(hr,{autocomplete:"off",id:"resource-folder",placeholder:"Folder",pattern:"^[A-z0-9\\/\\-_]+$"}),createVNode(hr,{autocomplete:"off",required:"",id:"resource-name",placeholder:"Name",pattern:"^[A-z0-9\\-_ ]+$"}),createVNode(hr,{autocomplete:"off",id:"resource-summary",placeholder:"Summary"})]),createBaseVNode("div",_hoisted_2$h,[createBaseVNode("div",_hoisted_3$e,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Jt.value,(xr,fr,gr)=>(openBlock(),createElementBlock("li",{key:`exif-${gr}`},[createBaseVNode("span",{class:"label",innerHTML:fr},null,8,_hoisted_4$b),createBaseVNode("span",{class:"value",innerHTML:xr},null,8,_hoisted_5$b)]))),128))])]),createBaseVNode("div",_hoisted_6$8,[createBaseVNode("div",_hoisted_7$6,[Jn[1]||(Jn[1]=createBaseVNode("div",null,"Entities:",-1)),createVNode(lr,{onEntitySelected:cn})]),createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(on.value,xr=>(openBlock(),createElementBlock("li",{key:xr.id,"data-entity":xr.id},[createBaseVNode("span",{class:"entity-label",innerHTML:xr.label},null,8,_hoisted_9$5),createBaseVNode("span",{class:"entity-description",innerHTML:xr.description||""},null,8,_hoisted_10$3),createVNode(cr,{class:"remove-entity",onClick:fr=>An(xr.id),id:"remove-icon",name:"trash",label:"Remove entity"},null,8,["onClick"])],8,_hoisted_8$6))),128))])])]),createBaseVNode("div",_hoisted_11$3,[createVNode(Cr,{onClick:Fn},{default:withCtx(()=>Jn[2]||(Jn[2]=[createTextVNode("Cancel")])),_:1,__:[2]}),createVNode(Cr,{type:"submit",variant:"primary"},{default:withCtx(()=>Jn[3]||(Jn[3]=[createTextVNode("Add")])),_:1,__:[3]})])],4),createBaseVNode("input",{style:normalizeStyle({display:(mr=Rt.value)!=null&&mr.name?"none":"block"}),id:"filePicker",type:"file",accept:"image/x-png,image/jpeg,image/gif",onChange:an},null,36)]}),_:1})],512)}}}),_style_0$q=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}input[type=file]{font-size:1.2rem}form{margin:12px}form .buttons{display:flex;gap:12px;justify-content:center}form{display:grid;height:60vh;grid-template-columns:1fr;grid-template-rows:auto auto 1fr auto;margin:0;gap:12px}.metadata{height:100%;overflow-y:scroll;overflow-x:hidden;margin:0}.exif-data ul{list-style:none;margin:0;padding:0}.label{font-weight:700;margin-right:12px}.label:after{content:":"}.fields{display:flex;flex-direction:column;gap:6px}.search{display:flex;align-items:center;gap:12px}.search div{font-size:1.1rem;font-weight:700}ve-wikidata-search{width:100%}.depicted{margin-top:12px}.depicted ul{list-style:none;margin:12px 0;padding:0;width:95%}.depicted ul li{display:flex;align-items:flex-start;gap:6px;margin-bottom:9px;width:100%}.entity-label{width:30%}.entity-description{width:50%}.remove-entity{margin-left:auto}.value{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}
`,_export_sfc=(nt,rt)=>{const it=nt.__vccOpts||nt;for(const[st,_t]of rt)it[st]=_t;return it},AddMediaResourceDialog=_export_sfc(_sfc_main$y,[["styles",[_style_0$q]]]),_hoisted_1$q={ref:"root",class:"main"},_sfc_main$x=defineComponent({__name:"Auth.ce",setup(nt){const rt={"www.juncture-digital.org":"f7247e1e4769ba7c61e4","beta.juncture-digital.org":"f30ce4168a0bb95ecaa3","dev.juncture-digital.org":"bb290b5a738cb6fe31c7"},it=ref(""),st=ref(),_t=computed(()=>it.value!==null),xt=ref(null),Et=ref(null);onMounted(()=>{it.value=window.localStorage.getItem("gh-auth-token"),Et.value=window.localStorage.getItem("gh-username"),window.addEventListener("storage",()=>it.value=window.localStorage.getItem("gh-auth-token"));let Rt=new URL(window.location.href).searchParams.get("code");if(Rt){let Nt=`${location.pathname}${location.hash}`;window.history.replaceState({},"",Nt),fetch(`/gh-token?code=${Rt}&hostname=${window.location.hostname}`).then(Bt=>Bt.text()).then(Bt=>{Bt&&(localStorage.setItem("gh-auth-token",Bt),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),It())}).catch(Bt=>console.log("err",Bt))}});function kt(){let Rt=new URL(window.location.href).hostname,Nt=Rt==="localhost"||Rt.indexOf("192.168.")===0,Bt=`${window.location.href}`,Ft=Nt?`${window.location.pathname}?code=testing&redirect_uri=${location.pathname}${location.hash}`:rt[location.hostname]!==void 0?`https://github.com/login/oauth/authorize?client_id=${rt[location.hostname]}&scope=repo&state=juncture&redirect_uri=${Bt}`:null;Ft&&(window.location.href=Ft)}function Lt(){Object.keys(localStorage).forEach(Rt=>localStorage.removeItem(Rt)),window.dispatchEvent(new Event("storage")),it.value=window.localStorage.getItem("gh-auth-token"),xt.value=null,location.href=""}function It(){return fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`token ${it.value}`}}).then(Rt=>Rt.json()).then(Rt=>xt.value=Rt)}return watch$1(xt,()=>{xt.value&&localStorage.setItem("gh-username",xt.value.login),Et.value=window.localStorage.getItem("gh-username")}),watch$1(it,()=>{st.value=new GithubClient(it.value||"")}),watch$1(st,async()=>{if(_t.value){let Rt=await st.value.user().then(Nt=>Nt.login);await st.value.repos(Rt).then(Nt=>{Nt.find(Bt=>Bt.name==="essays")||st.value.createRepository({name:"essays",description:"Juncture visual essays"}),Nt.find(Bt=>Bt.name==="media")||st.value.createRepository({name:"media",description:"Juncture media"})})}}),(Rt,Nt)=>{const Bt=resolveComponent("sl-icon"),Ft=resolveComponent("sl-button"),Yt=resolveComponent("sl-tooltip");return openBlock(),createElementBlock("div",_hoisted_1$q,[_t.value?(openBlock(),createBlock(Yt,{key:0,content:`Logged in as ${Et.value}`,placement:"bottom"},{default:withCtx(()=>[createVNode(Ft,{variant:"default",onClick:Lt},{default:withCtx(()=>[createVNode(Bt,{slot:"prefix",name:"github",style:{"font-size":"20px"}}),Nt[0]||(Nt[0]=createTextVNode(" Logout "))]),_:1,__:[0]})]),_:1},8,["content"])):(openBlock(),createBlock(Yt,{key:1,content:"Click to Login with Github",placement:"top"},{default:withCtx(()=>[createVNode(Ft,{variant:"default",onClick:kt},{default:withCtx(()=>[createVNode(Bt,{slot:"prefix",name:"github",style:{"font-size":"20px"}}),Nt[1]||(Nt[1]=createTextVNode(" Login with Github "))]),_:1,__:[1]})]),_:1}))],512)}}}),_style_0$p=`:host{display:inline-block}div{color:#00f}div:hover{text-decoration:underline;cursor:pointer}
`,Auth=_export_sfc(_sfc_main$x,[["styles",[_style_0$p]]]);SlIcon.define("sl-icon");const _sfc_main$w=defineComponent({__name:"Button.ce",props:{href:{type:String},target:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},label:{type:String},icon:{type:String},authRequired:{type:Boolean,default:!1}},setup(nt){const rt=window,it=nt,st=ref(null),_t=computed(()=>{var Lt,It;return(It=(Lt=st.value)==null?void 0:Lt.getRootNode())==null?void 0:It.host}),xt=ref(""),Et=computed(()=>xt.value!==null);onMounted(()=>{xt.value=window.localStorage.getItem("gh-auth-token"),window.addEventListener("storage",()=>xt.value=window.localStorage.getItem("gh-auth-token"))}),watch$1(_t,()=>{var Lt;((Lt=_t.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&_t.value.parentElement.children.length===1&&(_t.value.parentElement.style.display=!it.authRequired||Et.value?"block":"none")}),watch$1(Et,()=>{var Lt;((Lt=_t.value)==null?void 0:Lt.parentElement.tagName)==="LI"&&_t.value.parentElement.children.length===1&&(_t.value.parentElement.style.display=!it.authRequired||Et.value?"block":"none")});function kt(){if(it.target==="_blank"){let Lt=it.width||1040,It=it.height||Math.max(window.innerHeight,1500);rt.junctureWindow&&rt.junctureWindow.close();let Rt=`toolbar=yes,location=yes,left=${it.left},top=${it.top},width=${Lt},height=${It},scrollbars=yes,status=yes`;rt.junctureWindow=window.open(it.href,"_blank",Rt)}else it.href&&(location.href=it.href)}return(Lt,It)=>{const Rt=resolveComponent("sl-icon"),Nt=resolveComponent("sl-button");return!it.authRequired||Et.value?(openBlock(),createBlock(Nt,{key:0,ref_key:"root",ref:st,onClick:kt},{default:withCtx(()=>[it.icon?(openBlock(),createBlock(Rt,{key:0,slot:"prefix",name:it.icon},null,8,["name"])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(it.label),1)]),_:1},512)):createCommentVNode("",!0)}}}),_style_0$o=`*{box-sizing:border-box}.ve-component{z-index:2;position:relative}ve-media-card{height:100%}.manifest-popup{border:1px solid #555;background-color:#fff;width:350px;max-height:500px;overflow-y:scroll;border-radius:6px;padding:4px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}main>p:first-of-type{padding-top:24px}.markdown-section h1,.markdown-section h2,.markdown-section h3,.markdown-section h4,.markdown-section h5,.markdown-section h6{line-height:1.2}.right{float:right;top:0;width:calc(50% - 12px)}.visible{visibility:visible;opacity:1;transition:opacity .5s linear}.hidden{visibility:hidden;opacity:0;transition:visibility 0s .5s,opacity .5s linear}#juncture section{display:flow-root;position:relative}#juncture>section{margin-top:2rem}#juncture>section>section,#juncture>section>section>section{margin-top:2rem}#juncture>section>section>section>section,#juncture>section>section>section>section>section,#juncture>section>section>section>section>section>section{margin-top:1rem;padding-top:0}#juncture section>h1,#juncture section>h2,#juncture section>h3,#juncture section>h4,#juncture section>h5,#juncture section>h6{padding-top:0;margin-top:unset;margin-bottom:1.5rem;padding-bottom:0}#juncture section ol,#juncture section ul{padding:.5em .5em .5em 1.4em}#juncture section li>p{margin:0}body{font-family:Roboto,sans-serif;margin:0;background-color:#fff}.clear{clear:both}#juncture section.sticky{position:sticky;top:0;z-index:3;background-color:#fff;padding-top:6px}ve-footer ul{display:none}#juncture section{background-color:inherit}#juncture .section1,#juncture .section2{width:100%;clear:both;background-color:inherit}.noclear{clear:none}.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.hide{display:none}.show-active p{border-left:8px solid transparent}.show-active p.active{border-left:4px solid #ccc;padding-left:4px}ve-header>ul{display:none}ve-footer{clear:both}main{background-color:inherit}:target:before{content:"";display:block;height:80px;margin:-32px 0 0}section.no-offset:target:before{display:none}#juncture section.footnote{font-size:80%;margin-top:1rem}.ve-component.sticky+div.footnote,.ve-component.sticky~div.footnote{width:100%}@media (max-width: 480px){#juncture{font-size:1.2rem;line-height:1.3;padding:0 0 40vh}#juncture h1{font-size:1.5em}#juncture h2{font-size:1.4em}#juncture h3{font-size:1.3em}#juncture>section{padding:0 6px}#juncture section.sticky.right{display:none}}@media (min-width: 481px){body{margin:0 2rem}#juncture{font-size:1.3rem;line-height:1.4;padding:0;max-width:1200px;margin:auto}.ve-component{z-index:2}.ve-component[grid]{z-index:3}ve-map.full{padding-bottom:12px}.right{margin-left:12px}.left{margin-right:12px}.sticky.right+section,.sticky.right~section,.sticky.right+div,.sticky.right~div,.sticky.right+p,.sticky.right~p,.sticky.right+ol,.sticky.right~ol .sticky.right+ul,.sticky.right~ul,.sticky.right+blockquote,.sticky.right~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.left+section,.ve-component.sticky.left~section,.ve-component.sticky.left+div,.ve-component.sticky.left~div,.ve-component.sticky.left+p,.ve-component.sticky.left~p,.ve-component.sticky.left+ol,.ve-component.sticky.left~ol .ve-component.sticky.left+ul,.ve-component.sticky.left~ul,.ve-component.sticky.left+blockquote,.ve-component.sticky.left~blockquote{margin-left:50%;padding-left:9px}.ve-component.sticky+section,.ve-component.sticky~section,#juncture section.sticky+section,#juncture section.sticky~section{clear:none}.ve-component.sticky.left.text-left+section,.ve-component.sticky.left.text-left~section{margin-left:0}.ve-component.sticky.left.text-left+div,.ve-component.sticky.left.text-left~div,.ve-component.sticky.left.text-left+p,.ve-component.sticky.left.text-left~p,.ve-component.sticky.left.text-left+ol,.ve-component.sticky.left.text-left~ol .ve-component.sticky.left.text-left+ul,.ve-component.sticky.left.text-left~ul,.ve-component.sticky.left.text-left+blockquote,.ve-component.sticky.left.text-left~blockquote{width:50%;margin-left:0;padding-right:9px}.ve-component.sticky.right.text-right+section,.ve-component.sticky.right.text-right~section,.ve-component.sticky.right.text-right+div,.ve-component.sticky.right.text-right~div,.ve-component.sticky.right.text-right+p,.ve-component.sticky.right.text-right~p,.ve-component.sticky.right.text-right+ol,.ve-component.sticky.right.text-right~ol .ve-component.sticky.right.text-right+ul,.ve-component.sticky.right.text-right~ul,.ve-component.sticky.right.text-right+blockquote,.ve-component.sticky.right.text-right~blockquote{margin-left:50%;padding-left:9px}}#juncture section.tab{height:calc(100% - 84px);overflow-y:scroll;border:1px solid #ccc}#juncture .tabs label{margin-bottom:0}#juncture input{display:none}#juncture input+label{display:inline-block}#juncture input~.tab{visibility:hidden}#juncture #tab1:checked~.tab.content1,#juncture #tab2:checked~.tab.content2,#juncture #tab3:checked~.tab.content3,#juncture #tab4:checked~.tab.content4,#juncture #tab5:checked~.tab.content5,#juncture #tab6:checked~.tab.content6{visibility:visible}#juncture input+label{border:1px solid #999;background:#EEE;padding:4px 12px;border-radius:4px 4px 0 0;position:relative;top:1px;cursor:pointer}#juncture input:checked+label{background:#FFF;border-bottom:1px solid white;z-index:2}#juncture input~.tab{border-top:1px solid #999;padding:12px}#juncture h1{margin-bottom:32px}#juncture .tab{position:absolute;visibility:hidden;width:100%;height:100%;padding:1rem 0}#juncture .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(265px,1fr));grid-auto-rows:1fr;row-gap:2rem;column-gap:2rem}#juncture .cards.wrapper>section{padding:0}#juncture .card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;padding:0;border:1px solid #ddd;border-radius:6px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#juncture .card p{border:none}#juncture .card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:300px}#juncture .card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}#juncture .card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.4rem .5rem;margin:0;font-size:1.1rem;font-weight:700;max-height:260px;overflow-y:scroll}#juncture .card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-start;min-height:110px;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:12}.clamp5{-webkit-line-clamp:5}#juncture .hero{display:flex;flex-direction:column;height:400px;margin-top:0}#juncture .hero-text{color:#fff;text-align:center;font-size:2.5rem;max-width:60%;margin:auto;font-family:Georgia;hyphens:unset}#juncture .cta{background-color:#ffe55a;border-radius:50px;font-family:Roboto;font-size:2rem;padding:16px 72px;margin:0 auto auto;text-align:center}@media (max-width: 480px){#juncture .hero-text{font-size:2rem;max-width:80%}#juncture .cta{font-size:1.5rem;padding:12px 60px}}mark{cursor:pointer;background:unset;border-bottom:1px solid #ccc;color:#444}mark:hover{border-bottom:2px solid #444;background:#eee}mark:after{color:#aaa;font-size:50%;line-height:0;position:relative;vertical-align:baseline;top:-.3em;padding-left:2px;padding-right:4px}mark.anno:after,mark.zoomto:after{content:"\\1f50e"}mark.play:after{content:"\\25b6"}mark.flyto:after{content:"\\2708";font-size:120%;top:0}#juncture a{color:#0645ad;text-decoration:none}#juncture a:visited{color:#0b0080}#juncture a:hover{color:#06e}#juncture a:active{color:#faa700}#juncture a:focus{outline:thin dotted}#juncture a:hover,#juncture a:active{outline:0}::-moz-selection{background:rgba(255,255,0,.3);color:#000}::selection{background:rgba(255,255,0,.3);color:#000}#juncture a::-moz-selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture a::selection{background:rgba(255,255,0,.3);color:#0645ad}#juncture p,#juncture li{line-height:1.4;color:#444;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}#juncture p{margin:0 0 1rem}#juncture img{max-width:100%}#juncture h1,#juncture h2,#juncture h3,#juncture h4,#juncture h5,#juncture h6{font-weight:500;color:#444;line-height:1em}#juncture h4,#juncture h5 #juncture h6{font-weight:500}#juncture h1{font-size:1.8em}#juncture h2{font-size:1.6em}#juncture h3{font-size:1.5em}#juncture h4{font-size:1.2em}#juncture h5{font-size:1em}#juncture h6{font-size:.9em}#juncture blockquote{color:#666;margin:0;padding-left:1em;border-left:.5em #EEE solid}#juncture hr{display:block;height:2px;border:0;border-top:1px solid #aaa;border-bottom:1px solid #eee;margin:1em 0;padding:0}#juncture pre,#juncture code,#juncture kbd,#juncture samp{color:#900;background-color:#eee;padding:0;font-family:monospace,monospace;_font-family:"courier new",monospace;font-size:1em}#juncture pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#juncture b,#juncture strong{font-weight:700}#juncture dfn{font-style:italic}#juncture ins{background:#ff9;color:#000;text-decoration:none}#juncture sub,#juncture sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}#juncture sup{top:-.5em}#juncture sub{bottom:-.25em}#juncture ul,#juncture ol{margin:0;padding:0 0 0 2em}#juncture li p:last-child{margin:0}#juncture dd{margin:0 0 0 2em}#juncture img{border:0;-ms-interpolation-mode:bicubic;vertical-align:middle}#juncture table{border-collapse:collapse;border-spacing:0;width:100%}#juncture th{border-bottom:1px solid black}#juncture td{vertical-align:top}#juncture table{border:1px solid #555}#juncture td,#juncture th{border:1px solid #555;padding:8px;line-height:1.2}#juncture th{background-color:#e2f0f7;font-weight:700;text-align:center}
`,_style_1$6=`:host{display:inline-block}
`,Button=_export_sfc(_sfc_main$w,[["styles",[_style_0$o,_style_1$6]]]);var alert_styles_default=i$7`
  :host {
    display: contents;

    /* For better DX, we'll reset the margin here so the base part can inherit it */
    margin: 0;
  }

  .alert {
    position: relative;
    display: flex;
    align-items: stretch;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-top-width: calc(var(--sl-panel-border-width) * 3);
    border-radius: var(--sl-border-radius-medium);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-normal);
    line-height: 1.6;
    color: var(--sl-color-neutral-700);
    margin: inherit;
    overflow: hidden;
  }

  .alert:not(.alert--has-icon) .alert__icon,
  .alert:not(.alert--closable) .alert__close-button {
    display: none;
  }

  .alert__icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-large);
    padding-inline-start: var(--sl-spacing-large);
  }

  .alert--has-countdown {
    border-bottom: none;
  }

  .alert--primary {
    border-top-color: var(--sl-color-primary-600);
  }

  .alert--primary .alert__icon {
    color: var(--sl-color-primary-600);
  }

  .alert--success {
    border-top-color: var(--sl-color-success-600);
  }

  .alert--success .alert__icon {
    color: var(--sl-color-success-600);
  }

  .alert--neutral {
    border-top-color: var(--sl-color-neutral-600);
  }

  .alert--neutral .alert__icon {
    color: var(--sl-color-neutral-600);
  }

  .alert--warning {
    border-top-color: var(--sl-color-warning-600);
  }

  .alert--warning .alert__icon {
    color: var(--sl-color-warning-600);
  }

  .alert--danger {
    border-top-color: var(--sl-color-danger-600);
  }

  .alert--danger .alert__icon {
    color: var(--sl-color-danger-600);
  }

  .alert__message {
    flex: 1 1 auto;
    display: block;
    padding: var(--sl-spacing-large);
    overflow: hidden;
  }

  .alert__close-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
    margin-inline-end: var(--sl-spacing-medium);
    align-self: center;
  }

  .alert__countdown {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: calc(var(--sl-panel-border-width) * 3);
    background-color: var(--sl-panel-border-color);
    display: flex;
  }

  .alert__countdown--ltr {
    justify-content: flex-end;
  }

  .alert__countdown .alert__countdown-elapsed {
    height: 100%;
    width: 0;
  }

  .alert--primary .alert__countdown-elapsed {
    background-color: var(--sl-color-primary-600);
  }

  .alert--success .alert__countdown-elapsed {
    background-color: var(--sl-color-success-600);
  }

  .alert--neutral .alert__countdown-elapsed {
    background-color: var(--sl-color-neutral-600);
  }

  .alert--warning .alert__countdown-elapsed {
    background-color: var(--sl-color-warning-600);
  }

  .alert--danger .alert__countdown-elapsed {
    background-color: var(--sl-color-danger-600);
  }

  .alert__timer {
    display: none;
  }
`,_SlAlert=class mg extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"icon","suffix"),this.localize=new LocalizeController(this),this.open=!1,this.closable=!1,this.variant="primary",this.duration=1/0,this.remainingTime=this.duration}static get toastStack(){return this.currentToastStack||(this.currentToastStack=Object.assign(document.createElement("div"),{className:"sl-toast-stack"})),this.currentToastStack}firstUpdated(){this.base.hidden=!this.open}restartAutoHide(){this.handleCountdownChange(),clearTimeout(this.autoHideTimeout),clearInterval(this.remainingTimeInterval),this.open&&this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.duration),this.remainingTime=this.duration,this.remainingTimeInterval=window.setInterval(()=>{this.remainingTime-=100},100))}pauseAutoHide(){var rt;(rt=this.countdownAnimation)==null||rt.pause(),clearTimeout(this.autoHideTimeout),clearInterval(this.remainingTimeInterval)}resumeAutoHide(){var rt;this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.remainingTime),this.remainingTimeInterval=window.setInterval(()=>{this.remainingTime-=100},100),(rt=this.countdownAnimation)==null||rt.play())}handleCountdownChange(){if(this.open&&this.duration<1/0&&this.countdown){const{countdownElement:rt}=this,it="100%",st="0";this.countdownAnimation=rt.animate([{width:it},{width:st}],{duration:this.duration,easing:"linear"})}}handleCloseClick(){this.hide()}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.duration<1/0&&this.restartAutoHide(),await stopAnimations(this.base),this.base.hidden=!1;const{keyframes:rt,options:it}=getAnimation(this,"alert.show",{dir:this.localize.dir()});await animateTo(this.base,rt,it),this.emit("sl-after-show")}else{blurActiveElement(this),this.emit("sl-hide"),clearTimeout(this.autoHideTimeout),clearInterval(this.remainingTimeInterval),await stopAnimations(this.base);const{keyframes:rt,options:it}=getAnimation(this,"alert.hide",{dir:this.localize.dir()});await animateTo(this.base,rt,it),this.base.hidden=!0,this.emit("sl-after-hide")}}handleDurationChange(){this.restartAutoHide()}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}async toast(){return new Promise(rt=>{this.handleCountdownChange(),mg.toastStack.parentElement===null&&document.body.append(mg.toastStack),mg.toastStack.appendChild(this),requestAnimationFrame(()=>{this.clientWidth,this.show()}),this.addEventListener("sl-after-hide",()=>{mg.toastStack.removeChild(this),rt(),mg.toastStack.querySelector("sl-alert")===null&&mg.toastStack.remove()},{once:!0})})}render(){return x$1`
      <div
        part="base"
        class=${e$1({alert:!0,"alert--open":this.open,"alert--closable":this.closable,"alert--has-countdown":!!this.countdown,"alert--has-icon":this.hasSlotController.test("icon"),"alert--primary":this.variant==="primary","alert--success":this.variant==="success","alert--neutral":this.variant==="neutral","alert--warning":this.variant==="warning","alert--danger":this.variant==="danger"})}
        role="alert"
        aria-hidden=${this.open?"false":"true"}
        @mouseenter=${this.pauseAutoHide}
        @mouseleave=${this.resumeAutoHide}
      >
        <div part="icon" class="alert__icon">
          <slot name="icon"></slot>
        </div>

        <div part="message" class="alert__message" aria-live="polite">
          <slot></slot>
        </div>

        ${this.closable?x$1`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                class="alert__close-button"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                @click=${this.handleCloseClick}
              ></sl-icon-button>
            `:""}

        <div role="timer" class="alert__timer">${this.remainingTime}</div>

        ${this.countdown?x$1`
              <div
                class=${e$1({alert__countdown:!0,"alert__countdown--ltr":this.countdown==="ltr"})}
              >
                <div class="alert__countdown-elapsed"></div>
              </div>
            `:""}
      </div>
    `}};_SlAlert.styles=[component_styles_default,alert_styles_default];_SlAlert.dependencies={"sl-icon-button":SlIconButton};__decorateClass([e$4('[part~="base"]')],_SlAlert.prototype,"base",2);__decorateClass([e$4(".alert__countdown-elapsed")],_SlAlert.prototype,"countdownElement",2);__decorateClass([n$4({type:Boolean,reflect:!0})],_SlAlert.prototype,"open",2);__decorateClass([n$4({type:Boolean,reflect:!0})],_SlAlert.prototype,"closable",2);__decorateClass([n$4({reflect:!0})],_SlAlert.prototype,"variant",2);__decorateClass([n$4({type:Number})],_SlAlert.prototype,"duration",2);__decorateClass([n$4({type:String,reflect:!0})],_SlAlert.prototype,"countdown",2);__decorateClass([r$1()],_SlAlert.prototype,"remainingTime",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],_SlAlert.prototype,"handleOpenChange",1);__decorateClass([watch("duration")],_SlAlert.prototype,"handleDurationChange",1);var SlAlert=_SlAlert;setDefaultAnimation("alert.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});setDefaultAnimation("alert.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});SlAlert.define("sl-alert");var textarea_styles_default=i$7`
  :host {
    display: block;
  }

  .textarea {
    display: grid;
    align-items: center;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    transition:
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) border,
      var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
    cursor: text;
  }

  /* Standard textareas */
  .textarea--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .textarea--standard:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }
  .textarea--standard:hover:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-hover);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    color: var(--sl-input-color-focus);
    box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color);
  }

  .textarea--standard.textarea--focused:not(.textarea--disabled) .textarea__control {
    color: var(--sl-input-color-focus);
  }

  .textarea--standard.textarea--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control,
  .textarea__size-adjuster {
    grid-area: 1 / 1 / 2 / 2;
  }

  .textarea__size-adjuster {
    visibility: hidden;
    pointer-events: none;
    opacity: 0;
  }

  .textarea--standard.textarea--disabled .textarea__control {
    color: var(--sl-input-color-disabled);
  }

  .textarea--standard.textarea--disabled .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled textareas */
  .textarea--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .textarea--filled:hover:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .textarea--filled.textarea--focused:not(.textarea--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .textarea--filled.textarea--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .textarea__control {
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: 1.4;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .textarea__control::-webkit-search-decoration,
  .textarea__control::-webkit-search-cancel-button,
  .textarea__control::-webkit-search-results-button,
  .textarea__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .textarea__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
    -webkit-user-select: none;
  }

  .textarea__control:focus {
    outline: none;
  }

  /*
   * Size modifiers
   */

  .textarea--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
  }

  .textarea--small .textarea__control {
    padding: 0.5em var(--sl-input-spacing-small);
  }

  .textarea--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
  }

  .textarea--medium .textarea__control {
    padding: 0.5em var(--sl-input-spacing-medium);
  }

  .textarea--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
  }

  .textarea--large .textarea__control {
    padding: 0.5em var(--sl-input-spacing-large);
  }

  /*
   * Resize types
   */

  .textarea--resize-none .textarea__control {
    resize: none;
  }

  .textarea--resize-vertical .textarea__control {
    resize: vertical;
  }

  .textarea--resize-auto .textarea__control {
    height: auto;
    resize: none;
    overflow-y: hidden;
  }
`,SlTextarea=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.hasFocus=!1,this.title="",this.name="",this.value="",this.size="medium",this.filled=!1,this.label="",this.helpText="",this.placeholder="",this.rows=4,this.resize="vertical",this.disabled=!1,this.readonly=!1,this.form="",this.required=!1,this.spellcheck=!0,this.defaultValue=""}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.setTextareaHeight()),this.updateComplete.then(()=>{this.setTextareaHeight(),this.resizeObserver.observe(this.input)})}firstUpdated(){this.formControlController.updateValidity()}disconnectedCallback(){var nt;super.disconnectedCallback(),this.input&&((nt=this.resizeObserver)==null||nt.unobserve(this.input))}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.setTextareaHeight(),this.emit("sl-change")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.emit("sl-input")}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}setTextareaHeight(){this.resize==="auto"?(this.sizeAdjuster.style.height=`${this.input.clientHeight}px`,this.input.style.height="auto",this.input.style.height=`${this.input.scrollHeight}px`):this.input.style.height=""}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleRowsChange(){this.setTextareaHeight()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity(),this.setTextareaHeight()}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}select(){this.input.select()}scrollPosition(nt){if(nt){typeof nt.top=="number"&&(this.input.scrollTop=nt.top),typeof nt.left=="number"&&(this.input.scrollLeft=nt.left);return}return{top:this.input.scrollTop,left:this.input.scrollTop}}setSelectionRange(nt,rt,it="none"){this.input.setSelectionRange(nt,rt,it)}setRangeText(nt,rt,it,st="preserve"){const _t=rt!=null?rt:this.input.selectionStart,xt=it!=null?it:this.input.selectionEnd;this.input.setRangeText(nt,_t,xt,st),this.value!==this.input.value&&(this.value=this.input.value,this.setTextareaHeight())}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.formControlController.updateValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt;return x$1`
      <div
        part="form-control"
        class=${e$1({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${e$1({textarea:!0,"textarea--small":this.size==="small","textarea--medium":this.size==="medium","textarea--large":this.size==="large","textarea--standard":!this.filled,"textarea--filled":this.filled,"textarea--disabled":this.disabled,"textarea--focused":this.hasFocus,"textarea--empty":!this.value,"textarea--resize-none":this.resize==="none","textarea--resize-vertical":this.resize==="vertical","textarea--resize-auto":this.resize==="auto"})}
          >
            <textarea
              part="textarea"
              id="input"
              class="textarea__control"
              title=${this.title}
              name=${o$3(this.name)}
              .value=${l(this.value)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${o$3(this.placeholder)}
              rows=${o$3(this.rows)}
              minlength=${o$3(this.minlength)}
              maxlength=${o$3(this.maxlength)}
              autocapitalize=${o$3(this.autocapitalize)}
              autocorrect=${o$3(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${o$3(this.spellcheck)}
              enterkeyhint=${o$3(this.enterkeyhint)}
              inputmode=${o$3(this.inputmode)}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            ></textarea>
            <!-- This "adjuster" exists to prevent layout shifting. https://github.com/shoelace-style/shoelace/issues/2180 -->
            <div part="textarea-adjuster" class="textarea__size-adjuster" ?hidden=${this.resize!=="auto"}></div>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};SlTextarea.styles=[component_styles_default,form_control_styles_default,textarea_styles_default];__decorateClass([e$4(".textarea__control")],SlTextarea.prototype,"input",2);__decorateClass([e$4(".textarea__size-adjuster")],SlTextarea.prototype,"sizeAdjuster",2);__decorateClass([r$1()],SlTextarea.prototype,"hasFocus",2);__decorateClass([n$4()],SlTextarea.prototype,"title",2);__decorateClass([n$4()],SlTextarea.prototype,"name",2);__decorateClass([n$4()],SlTextarea.prototype,"value",2);__decorateClass([n$4({reflect:!0})],SlTextarea.prototype,"size",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTextarea.prototype,"filled",2);__decorateClass([n$4()],SlTextarea.prototype,"label",2);__decorateClass([n$4({attribute:"help-text"})],SlTextarea.prototype,"helpText",2);__decorateClass([n$4()],SlTextarea.prototype,"placeholder",2);__decorateClass([n$4({type:Number})],SlTextarea.prototype,"rows",2);__decorateClass([n$4()],SlTextarea.prototype,"resize",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTextarea.prototype,"disabled",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTextarea.prototype,"readonly",2);__decorateClass([n$4({reflect:!0})],SlTextarea.prototype,"form",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTextarea.prototype,"required",2);__decorateClass([n$4({type:Number})],SlTextarea.prototype,"minlength",2);__decorateClass([n$4({type:Number})],SlTextarea.prototype,"maxlength",2);__decorateClass([n$4()],SlTextarea.prototype,"autocapitalize",2);__decorateClass([n$4()],SlTextarea.prototype,"autocorrect",2);__decorateClass([n$4()],SlTextarea.prototype,"autocomplete",2);__decorateClass([n$4({type:Boolean})],SlTextarea.prototype,"autofocus",2);__decorateClass([n$4()],SlTextarea.prototype,"enterkeyhint",2);__decorateClass([n$4({type:Boolean,converter:{fromAttribute:nt=>!(!nt||nt==="false"),toAttribute:nt=>nt?"true":"false"}})],SlTextarea.prototype,"spellcheck",2);__decorateClass([n$4()],SlTextarea.prototype,"inputmode",2);__decorateClass([defaultValue()],SlTextarea.prototype,"defaultValue",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleDisabledChange",1);__decorateClass([watch("rows",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleRowsChange",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlTextarea.prototype,"handleValueChange",1);SlTextarea.define("sl-textarea");const _hoisted_1$p=["innerHTML"],emailEndpoint="https://dev.juncture-digital.org/sendmail/",_sfc_main$v=defineComponent({__name:"Contact.ce",props:{contact:{type:String},title:{type:String},subject:{type:String},show:{type:Boolean}},setup(nt,{expose:rt}){const it=nt,st=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,_t=ref(null),xt=computed(()=>{var Wt,Kt;return(Kt=(Wt=_t.value)==null?void 0:Wt.getRootNode())==null?void 0:Kt.host}),Et=computed(()=>{var Wt;return(Wt=_t==null?void 0:_t.value)==null?void 0:Wt.parentNode}),kt=computed(()=>{var Wt;return(Wt=xt.value)==null?void 0:Wt.innerHTML}),Lt=ref(!1);rt({show:Lt}),watch$1(Lt,()=>It.open=Lt.value);let It,Rt,Nt,Bt,Ft;onMounted(()=>{Lt.value=it.show}),watch$1(it,()=>{Lt.value=it.show}),watch$1(xt,()=>{var Wt,Kt,Jt,on,rn;It=(Wt=Et.value)==null?void 0:Wt.querySelector(".contact-dialog"),Rt=(Kt=Et.value)==null?void 0:Kt.querySelector("#from"),Bt=(Jt=Et.value)==null?void 0:Jt.querySelector("#message"),Nt=(on=Et.value)==null?void 0:on.querySelector("#bad-email-alert"),Ft=(rn=Et.value)==null?void 0:rn.querySelector("#no-message-alert"),It.addEventListener("sl-hide",()=>Lt.value=!1)});function Yt(){It.hide(),Rt.value="",Bt.value="",Nt.hide(),Ft.hide()}async function Zt(){let Wt=st.test(Rt.value);Wt?Nt.hide():Nt.show();let Kt=Bt.value.trim().length>0;if(Kt?Ft.hide():Ft.show(),Wt&&Kt){let Jt={to:it.contact,from:Rt.value,subject:it.subject||"Contact Us",message:Bt.value};console.log(emailEndpoint,Jt),Yt();let on=await fetch(emailEndpoint,{method:"POST",body:JSON.stringify(Jt)});console.log(await on.json())}}return(Wt,Kt)=>{const Jt=resolveComponent("sl-input"),on=resolveComponent("sl-icon"),rn=resolveComponent("sl-alert"),ln=resolveComponent("sl-textarea"),gn=resolveComponent("sl-button"),wn=resolveComponent("sl-dialog");return openBlock(),createElementBlock("section",{ref_key:"root",ref:_t,class:"main"},[kt.value?(openBlock(),createElementBlock("a",{key:0,href:"#",onClick:Kt[0]||(Kt[0]=withModifiers(kn=>Lt.value=!Lt.value,["prevent"])),innerHTML:kt.value},null,8,_hoisted_1$p)):createCommentVNode("",!0),createVNode(wn,{label:it.title||"Contact Us",class:"contact-dialog"},{default:withCtx(()=>[createVNode(Jt,{id:"from",type:"email",label:"Email address"}),createVNode(rn,{id:"bad-email-alert",variant:"danger"},{default:withCtx(()=>[createVNode(on,{slot:"icon",name:"exclamation-octagon"}),Kt[1]||(Kt[1]=createBaseVNode("strong",null,"Invalid email address",-1)),Kt[2]||(Kt[2]=createBaseVNode("br",null,null,-1)),Kt[3]||(Kt[3]=createTextVNode("Please fix and resubmit "))]),_:1,__:[1,2,3]}),createVNode(ln,{id:"message",label:"Message"}),createVNode(rn,{id:"no-message-alert",variant:"danger"},{default:withCtx(()=>[createVNode(on,{slot:"icon",name:"exclamation-octagon"}),Kt[4]||(Kt[4]=createBaseVNode("strong",null,"No message entered",-1)),Kt[5]||(Kt[5]=createBaseVNode("br",null,null,-1))]),_:1,__:[4,5]}),createVNode(gn,{id:"cancel",slot:"footer",onClick:Yt},{default:withCtx(()=>Kt[6]||(Kt[6]=[createTextVNode("Cancel")])),_:1,__:[6]}),createVNode(gn,{slot:"footer",variant:"primary",onClick:Zt},{default:withCtx(()=>Kt[7]||(Kt[7]=[createTextVNode("Submit")])),_:1,__:[7]})]),_:1},8,["label"])],512)}}}),_style_0$n=`*{box-sizing:border-box}:host{display:inline-block}sl-input,sl-textarea{padding:12px 0}sl-dialog::part(title),sl-input::part(form-control),sl-textarea::part(form-control){text-align:left}
`,Contact=_export_sfc(_sfc_main$v,[["styles",[_style_0$n]]]);var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}function getAugmentedNamespace(nt){var rt=nt.default;if(typeof rt=="function"){var it=function(){return rt.apply(this,arguments)};it.prototype=rt.prototype}else it={};return Object.defineProperty(it,"__esModule",{value:!0}),Object.keys(nt).forEach(function(st){var _t=Object.getOwnPropertyDescriptor(nt,st);Object.defineProperty(it,st,_t.get?_t:{enumerable:!0,get:function(){return nt[st]}})}),it}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt,rt){return function(it){return new Sha256(rt,!0).update(it)[nt]()}},createMethod=function(nt){var rt=createOutputMethod("hex",nt);NODE_JS&&(rt=nodeWrap(rt,nt)),rt.create=function(){return new Sha256(nt)},rt.update=function(_t){return rt.create().update(_t)};for(var it=0;it<OUTPUT_TYPES.length;++it){var st=OUTPUT_TYPES[it];rt[st]=createOutputMethod(st,nt)}return rt},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash(algorithm).update(nt,"utf8").digest("hex");if(nt==null)throw new Error(ERROR);return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod},createHmacOutputMethod=function(nt,rt){return function(it,st){return new HmacSha256(it,rt,!0).update(st)[nt]()}},createHmacMethod=function(nt){var rt=createHmacOutputMethod("hex",nt);rt.create=function(_t){return new HmacSha256(_t,nt)},rt.update=function(_t,xt){return rt.create(_t).update(xt)};for(var it=0;it<OUTPUT_TYPES.length;++it){var st=OUTPUT_TYPES[it];rt[st]=createHmacOutputMethod(st,nt)}return rt};function Sha256(nt,rt){rt?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],nt?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=nt}Sha256.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);rt=!0}for(var st,_t=0,xt,Et=nt.length,kt=this.blocks;_t<Et;){if(this.hashed&&(this.hashed=!1,kt[0]=this.block,kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)for(xt=this.start;_t<Et&&xt<64;++_t)kt[xt>>2]|=nt[_t]<<SHIFT[xt++&3];else for(xt=this.start;_t<Et&&xt<64;++_t)st=nt.charCodeAt(_t),st<128?kt[xt>>2]|=st<<SHIFT[xt++&3]:st<2048?(kt[xt>>2]|=(192|st>>6)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):st<55296||st>=57344?(kt[xt>>2]|=(224|st>>12)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):(st=65536+((st&1023)<<10|nt.charCodeAt(++_t)&1023),kt[xt>>2]|=(240|st>>18)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>12&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]);this.lastByteIndex=xt,this.bytes+=xt-this.start,xt>=64?(this.block=kt[16],this.start=xt-64,this.hash(),this.hashed=!0):this.start=xt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[16]=this.block,nt[rt>>2]|=EXTRA[rt&3],this.block=nt[16],rt>=56&&(this.hashed||this.hash(),nt[0]=this.block,nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.hBytes<<3|this.bytes>>>29,nt[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,_t=this.h4,xt=this.h5,Et=this.h6,kt=this.h7,Lt=this.blocks,It,Rt,Nt,Bt,Ft,Yt,Zt,Wt,Kt,Jt,on;for(It=16;It<64;++It)Ft=Lt[It-15],Rt=(Ft>>>7|Ft<<25)^(Ft>>>18|Ft<<14)^Ft>>>3,Ft=Lt[It-2],Nt=(Ft>>>17|Ft<<15)^(Ft>>>19|Ft<<13)^Ft>>>10,Lt[It]=Lt[It-16]+Rt+Lt[It-7]+Nt<<0;for(on=rt&it,It=0;It<64;It+=4)this.first?(this.is224?(Wt=300032,Ft=Lt[0]-1413257819,kt=Ft-150054599<<0,st=Ft+24177077<<0):(Wt=704751109,Ft=Lt[0]-210244248,kt=Ft-1521486534<<0,st=Ft+143694565<<0),this.first=!1):(Rt=(nt>>>2|nt<<30)^(nt>>>13|nt<<19)^(nt>>>22|nt<<10),Nt=(_t>>>6|_t<<26)^(_t>>>11|_t<<21)^(_t>>>25|_t<<7),Wt=nt&rt,Bt=Wt^nt&it^on,Zt=_t&xt^~_t&Et,Ft=kt+Nt+Zt+K[It]+Lt[It],Yt=Rt+Bt,kt=st+Ft<<0,st=Ft+Yt<<0),Rt=(st>>>2|st<<30)^(st>>>13|st<<19)^(st>>>22|st<<10),Nt=(kt>>>6|kt<<26)^(kt>>>11|kt<<21)^(kt>>>25|kt<<7),Kt=st&nt,Bt=Kt^st&rt^Wt,Zt=kt&_t^~kt&xt,Ft=Et+Nt+Zt+K[It+1]+Lt[It+1],Yt=Rt+Bt,Et=it+Ft<<0,it=Ft+Yt<<0,Rt=(it>>>2|it<<30)^(it>>>13|it<<19)^(it>>>22|it<<10),Nt=(Et>>>6|Et<<26)^(Et>>>11|Et<<21)^(Et>>>25|Et<<7),Jt=it&st,Bt=Jt^it&nt^Kt,Zt=Et&kt^~Et&_t,Ft=xt+Nt+Zt+K[It+2]+Lt[It+2],Yt=Rt+Bt,xt=rt+Ft<<0,rt=Ft+Yt<<0,Rt=(rt>>>2|rt<<30)^(rt>>>13|rt<<19)^(rt>>>22|rt<<10),Nt=(xt>>>6|xt<<26)^(xt>>>11|xt<<21)^(xt>>>25|xt<<7),on=rt&it,Bt=on^rt&st^Jt,Zt=xt&Et^~xt&kt,Ft=_t+Nt+Zt+K[It+3]+Lt[It+3],Yt=Rt+Bt,_t=nt+Ft<<0,nt=Ft+Yt<<0;this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+st<<0,this.h4=this.h4+_t<<0,this.h5=this.h5+xt<<0,this.h6=this.h6+Et<<0,this.h7=this.h7+kt<<0},Sha256.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,_t=this.h4,xt=this.h5,Et=this.h6,kt=this.h7,Lt=HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[st>>28&15]+HEX_CHARS[st>>24&15]+HEX_CHARS[st>>20&15]+HEX_CHARS[st>>16&15]+HEX_CHARS[st>>12&15]+HEX_CHARS[st>>8&15]+HEX_CHARS[st>>4&15]+HEX_CHARS[st&15]+HEX_CHARS[_t>>28&15]+HEX_CHARS[_t>>24&15]+HEX_CHARS[_t>>20&15]+HEX_CHARS[_t>>16&15]+HEX_CHARS[_t>>12&15]+HEX_CHARS[_t>>8&15]+HEX_CHARS[_t>>4&15]+HEX_CHARS[_t&15]+HEX_CHARS[xt>>28&15]+HEX_CHARS[xt>>24&15]+HEX_CHARS[xt>>20&15]+HEX_CHARS[xt>>16&15]+HEX_CHARS[xt>>12&15]+HEX_CHARS[xt>>8&15]+HEX_CHARS[xt>>4&15]+HEX_CHARS[xt&15]+HEX_CHARS[Et>>28&15]+HEX_CHARS[Et>>24&15]+HEX_CHARS[Et>>20&15]+HEX_CHARS[Et>>16&15]+HEX_CHARS[Et>>12&15]+HEX_CHARS[Et>>8&15]+HEX_CHARS[Et>>4&15]+HEX_CHARS[Et&15];return this.is224||(Lt+=HEX_CHARS[kt>>28&15]+HEX_CHARS[kt>>24&15]+HEX_CHARS[kt>>20&15]+HEX_CHARS[kt>>16&15]+HEX_CHARS[kt>>12&15]+HEX_CHARS[kt>>8&15]+HEX_CHARS[kt>>4&15]+HEX_CHARS[kt&15]),Lt},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,_t=this.h4,xt=this.h5,Et=this.h6,kt=this.h7,Lt=[nt>>24&255,nt>>16&255,nt>>8&255,nt&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255,it>>24&255,it>>16&255,it>>8&255,it&255,st>>24&255,st>>16&255,st>>8&255,st&255,_t>>24&255,_t>>16&255,_t>>8&255,_t&255,xt>>24&255,xt>>16&255,xt>>8&255,xt&255,Et>>24&255,Et>>16&255,Et>>8&255,Et&255];return this.is224||Lt.push(kt>>24&255,kt>>16&255,kt>>8&255,kt&255),Lt},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(this.is224?28:32),rt=new DataView(nt);return rt.setUint32(0,this.h0),rt.setUint32(4,this.h1),rt.setUint32(8,this.h2),rt.setUint32(12,this.h3),rt.setUint32(16,this.h4),rt.setUint32(20,this.h5),rt.setUint32(24,this.h6),this.is224||rt.setUint32(28,this.h7),nt};function HmacSha256(nt,rt,it){var st,_t=typeof nt;if(_t==="string"){var xt=[],Et=nt.length,kt=0,Lt;for(st=0;st<Et;++st)Lt=nt.charCodeAt(st),Lt<128?xt[kt++]=Lt:Lt<2048?(xt[kt++]=192|Lt>>6,xt[kt++]=128|Lt&63):Lt<55296||Lt>=57344?(xt[kt++]=224|Lt>>12,xt[kt++]=128|Lt>>6&63,xt[kt++]=128|Lt&63):(Lt=65536+((Lt&1023)<<10|nt.charCodeAt(++st)&1023),xt[kt++]=240|Lt>>18,xt[kt++]=128|Lt>>12&63,xt[kt++]=128|Lt>>6&63,xt[kt++]=128|Lt&63);nt=xt}else if(_t==="object"){if(nt===null)throw new Error(ERROR);if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw new Error(ERROR)}else throw new Error(ERROR);nt.length>64&&(nt=new Sha256(rt,!0).update(nt).array());var It=[],Rt=[];for(st=0;st<64;++st){var Nt=nt[st]||0;It[st]=92^Nt,Rt[st]=54^Nt}Sha256.call(this,rt,it),this.update(Rt),this.oKeyPad=It,this.inner=!0,this.sharedMemory=it}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var nt=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(nt),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var md5$1={exports:{}};/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(nt){return Object.prototype.toString.call(nt)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(nt){return typeof nt=="object"&&nt.buffer&&nt.buffer.constructor===ArrayBuffer});var createOutputMethod=function(nt){return function(rt){return new Md5(!0).update(rt)[nt]()}},createMethod=function(){var nt=createOutputMethod("hex");NODE_JS&&(nt=nodeWrap(nt)),nt.create=function(){return new Md5},nt.update=function(st){return nt.create().update(st)};for(var rt=0;rt<OUTPUT_TYPES.length;++rt){var it=OUTPUT_TYPES[rt];nt[it]=createOutputMethod(it)}return nt},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(nt){if(typeof nt=="string")return crypto.createHash("md5").update(nt,"utf8").digest("hex");if(nt==null)throw ERROR;return nt.constructor===ArrayBuffer&&(nt=new Uint8Array(nt)),Array.isArray(nt)||ArrayBuffer.isView(nt)||nt.constructor===Buffer?crypto.createHash("md5").update(new Buffer(nt)).digest("hex"):method(nt)};return nodeMethod};function Md5(nt){if(nt)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var rt=new ArrayBuffer(68);this.buffer8=new Uint8Array(rt),this.blocks=new Uint32Array(rt)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(nt){if(!this.finalized){var rt,it=typeof nt;if(it!=="string"){if(it==="object"){if(nt===null)throw ERROR;if(ARRAY_BUFFER&&nt.constructor===ArrayBuffer)nt=new Uint8Array(nt);else if(!Array.isArray(nt)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(nt)))throw ERROR}else throw ERROR;rt=!0}for(var st,_t=0,xt,Et=nt.length,kt=this.blocks,Lt=this.buffer8;_t<Et;){if(this.hashed&&(this.hashed=!1,kt[0]=kt[16],kt[16]=kt[1]=kt[2]=kt[3]=kt[4]=kt[5]=kt[6]=kt[7]=kt[8]=kt[9]=kt[10]=kt[11]=kt[12]=kt[13]=kt[14]=kt[15]=0),rt)if(ARRAY_BUFFER)for(xt=this.start;_t<Et&&xt<64;++_t)Lt[xt++]=nt[_t];else for(xt=this.start;_t<Et&&xt<64;++_t)kt[xt>>2]|=nt[_t]<<SHIFT[xt++&3];else if(ARRAY_BUFFER)for(xt=this.start;_t<Et&&xt<64;++_t)st=nt.charCodeAt(_t),st<128?Lt[xt++]=st:st<2048?(Lt[xt++]=192|st>>6,Lt[xt++]=128|st&63):st<55296||st>=57344?(Lt[xt++]=224|st>>12,Lt[xt++]=128|st>>6&63,Lt[xt++]=128|st&63):(st=65536+((st&1023)<<10|nt.charCodeAt(++_t)&1023),Lt[xt++]=240|st>>18,Lt[xt++]=128|st>>12&63,Lt[xt++]=128|st>>6&63,Lt[xt++]=128|st&63);else for(xt=this.start;_t<Et&&xt<64;++_t)st=nt.charCodeAt(_t),st<128?kt[xt>>2]|=st<<SHIFT[xt++&3]:st<2048?(kt[xt>>2]|=(192|st>>6)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):st<55296||st>=57344?(kt[xt>>2]|=(224|st>>12)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]):(st=65536+((st&1023)<<10|nt.charCodeAt(++_t)&1023),kt[xt>>2]|=(240|st>>18)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>12&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st>>6&63)<<SHIFT[xt++&3],kt[xt>>2]|=(128|st&63)<<SHIFT[xt++&3]);this.lastByteIndex=xt,this.bytes+=xt-this.start,xt>=64?(this.start=xt-64,this.hash(),this.hashed=!0):this.start=xt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var nt=this.blocks,rt=this.lastByteIndex;nt[rt>>2]|=EXTRA[rt&3],rt>=56&&(this.hashed||this.hash(),nt[0]=nt[16],nt[16]=nt[1]=nt[2]=nt[3]=nt[4]=nt[5]=nt[6]=nt[7]=nt[8]=nt[9]=nt[10]=nt[11]=nt[12]=nt[13]=nt[14]=nt[15]=0),nt[14]=this.bytes<<3,nt[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var nt,rt,it,st,_t,xt,Et=this.blocks;this.first?(nt=Et[0]-680876937,nt=(nt<<7|nt>>>25)-271733879<<0,st=(-1732584194^nt&2004318071)+Et[1]-117830708,st=(st<<12|st>>>20)+nt<<0,it=(-271733879^st&(nt^-271733879))+Et[2]-1126478375,it=(it<<17|it>>>15)+st<<0,rt=(nt^it&(st^nt))+Et[3]-1316259209,rt=(rt<<22|rt>>>10)+it<<0):(nt=this.h0,rt=this.h1,it=this.h2,st=this.h3,nt+=(st^rt&(it^st))+Et[0]-680876936,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[1]-389564586,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[2]+606105819,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[3]-1044525330,rt=(rt<<22|rt>>>10)+it<<0),nt+=(st^rt&(it^st))+Et[4]-176418897,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[5]+1200080426,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[6]-1473231341,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[7]-45705983,rt=(rt<<22|rt>>>10)+it<<0,nt+=(st^rt&(it^st))+Et[8]+1770035416,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[9]-1958414417,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[10]-42063,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[11]-1990404162,rt=(rt<<22|rt>>>10)+it<<0,nt+=(st^rt&(it^st))+Et[12]+1804603682,nt=(nt<<7|nt>>>25)+rt<<0,st+=(it^nt&(rt^it))+Et[13]-40341101,st=(st<<12|st>>>20)+nt<<0,it+=(rt^st&(nt^rt))+Et[14]-1502002290,it=(it<<17|it>>>15)+st<<0,rt+=(nt^it&(st^nt))+Et[15]+1236535329,rt=(rt<<22|rt>>>10)+it<<0,nt+=(it^st&(rt^it))+Et[1]-165796510,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[6]-1069501632,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[11]+643717713,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[0]-373897302,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[5]-701558691,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[10]+38016083,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[15]-660478335,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[4]-405537848,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[9]+568446438,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[14]-1019803690,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[3]-187363961,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[8]+1163531501,rt=(rt<<20|rt>>>12)+it<<0,nt+=(it^st&(rt^it))+Et[13]-1444681467,nt=(nt<<5|nt>>>27)+rt<<0,st+=(rt^it&(nt^rt))+Et[2]-51403784,st=(st<<9|st>>>23)+nt<<0,it+=(nt^rt&(st^nt))+Et[7]+1735328473,it=(it<<14|it>>>18)+st<<0,rt+=(st^nt&(it^st))+Et[12]-1926607734,rt=(rt<<20|rt>>>12)+it<<0,_t=rt^it,nt+=(_t^st)+Et[5]-378558,nt=(nt<<4|nt>>>28)+rt<<0,st+=(_t^nt)+Et[8]-2022574463,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[11]+1839030562,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[14]-35309556,rt=(rt<<23|rt>>>9)+it<<0,_t=rt^it,nt+=(_t^st)+Et[1]-1530992060,nt=(nt<<4|nt>>>28)+rt<<0,st+=(_t^nt)+Et[4]+1272893353,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[7]-155497632,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[10]-1094730640,rt=(rt<<23|rt>>>9)+it<<0,_t=rt^it,nt+=(_t^st)+Et[13]+681279174,nt=(nt<<4|nt>>>28)+rt<<0,st+=(_t^nt)+Et[0]-358537222,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[3]-722521979,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[6]+76029189,rt=(rt<<23|rt>>>9)+it<<0,_t=rt^it,nt+=(_t^st)+Et[9]-640364487,nt=(nt<<4|nt>>>28)+rt<<0,st+=(_t^nt)+Et[12]-421815835,st=(st<<11|st>>>21)+nt<<0,xt=st^nt,it+=(xt^rt)+Et[15]+530742520,it=(it<<16|it>>>16)+st<<0,rt+=(xt^it)+Et[2]-995338651,rt=(rt<<23|rt>>>9)+it<<0,nt+=(it^(rt|~st))+Et[0]-198630844,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[7]+1126891415,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[14]-1416354905,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[5]-57434055,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[12]+1700485571,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[3]-1894986606,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[10]-1051523,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[1]-2054922799,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[8]+1873313359,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[15]-30611744,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[6]-1560198380,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[13]+1309151649,rt=(rt<<21|rt>>>11)+it<<0,nt+=(it^(rt|~st))+Et[4]-145523070,nt=(nt<<6|nt>>>26)+rt<<0,st+=(rt^(nt|~it))+Et[11]-1120210379,st=(st<<10|st>>>22)+nt<<0,it+=(nt^(st|~rt))+Et[2]+718787259,it=(it<<15|it>>>17)+st<<0,rt+=(st^(it|~nt))+Et[9]-343485551,rt=(rt<<21|rt>>>11)+it<<0,this.first?(this.h0=nt+1732584193<<0,this.h1=rt-271733879<<0,this.h2=it-1732584194<<0,this.h3=st+271733878<<0,this.first=!1):(this.h0=this.h0+nt<<0,this.h1=this.h1+rt<<0,this.h2=this.h2+it<<0,this.h3=this.h3+st<<0)},Md5.prototype.hex=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3;return HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[st>>4&15]+HEX_CHARS[st&15]+HEX_CHARS[st>>12&15]+HEX_CHARS[st>>8&15]+HEX_CHARS[st>>20&15]+HEX_CHARS[st>>16&15]+HEX_CHARS[st>>28&15]+HEX_CHARS[st>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var nt=this.h0,rt=this.h1,it=this.h2,st=this.h3;return[nt&255,nt>>8&255,nt>>16&255,nt>>24&255,rt&255,rt>>8&255,rt>>16&255,rt>>24&255,it&255,it>>8&255,it>>16&255,it>>24&255,st&255,st>>8&255,st>>16&255,st>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var nt=new ArrayBuffer(16),rt=new Uint32Array(nt);return rt[0]=this.h0,rt[1]=this.h1,rt[2]=this.h2,rt[3]=this.h3,nt},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var nt,rt,it,st="",_t=this.array(),xt=0;xt<15;)nt=_t[xt++],rt=_t[xt++],it=_t[xt++],st+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[(nt<<4|rt>>>4)&63]+BASE64_ENCODE_CHAR[(rt<<2|it>>>6)&63]+BASE64_ENCODE_CHAR[it&63];return nt=_t[xt],st+=BASE64_ENCODE_CHAR[nt>>>2]+BASE64_ENCODE_CHAR[nt<<4&63]+"==",st};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);const md5=md5$1.exports;var top$2="top",bottom$1="bottom",right$1="right",left$1="left",auto="auto",basePlacements=[top$2,bottom$1,right$1,left$1],start$2="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(nt,rt){return nt.concat([rt+"-"+start$2,rt+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(nt,rt){return nt.concat([rt,rt+"-"+start$2,rt+"-"+end$1])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write$1="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write$1,afterWrite];function getNodeName(nt){return nt?(nt.nodeName||"").toLowerCase():null}function getWindow(nt){if(nt==null)return window;if(nt.toString()!=="[object Window]"){var rt=nt.ownerDocument;return rt&&rt.defaultView||window}return nt}function isElement$1(nt){var rt=getWindow(nt).Element;return nt instanceof rt||nt instanceof Element}function isHTMLElement(nt){var rt=getWindow(nt).HTMLElement;return nt instanceof rt||nt instanceof HTMLElement}function isShadowRoot(nt){if(typeof ShadowRoot>"u")return!1;var rt=getWindow(nt).ShadowRoot;return nt instanceof rt||nt instanceof ShadowRoot}function applyStyles(nt){var rt=nt.state;Object.keys(rt.elements).forEach(function(it){var st=rt.styles[it]||{},_t=rt.attributes[it]||{},xt=rt.elements[it];!isHTMLElement(xt)||!getNodeName(xt)||(Object.assign(xt.style,st),Object.keys(_t).forEach(function(Et){var kt=_t[Et];kt===!1?xt.removeAttribute(Et):xt.setAttribute(Et,kt===!0?"":kt)}))})}function effect$2(nt){var rt=nt.state,it={popper:{position:rt.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(rt.elements.popper.style,it.popper),rt.styles=it,rt.elements.arrow&&Object.assign(rt.elements.arrow.style,it.arrow),function(){Object.keys(rt.elements).forEach(function(st){var _t=rt.elements[st],xt=rt.attributes[st]||{},Et=Object.keys(rt.styles.hasOwnProperty(st)?rt.styles[st]:it[st]),kt=Et.reduce(function(Lt,It){return Lt[It]="",Lt},{});!isHTMLElement(_t)||!getNodeName(_t)||(Object.assign(_t.style,kt),Object.keys(xt).forEach(function(Lt){_t.removeAttribute(Lt)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(nt){return nt.split("-")[0]}var max$3=Math.max,min$3=Math.min,round=Math.round;function getUAString(){var nt=navigator.userAgentData;return nt!=null&&nt.brands&&Array.isArray(nt.brands)?nt.brands.map(function(rt){return rt.brand+"/"+rt.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(nt,rt,it){rt===void 0&&(rt=!1),it===void 0&&(it=!1);var st=nt.getBoundingClientRect(),_t=1,xt=1;rt&&isHTMLElement(nt)&&(_t=nt.offsetWidth>0&&round(st.width)/nt.offsetWidth||1,xt=nt.offsetHeight>0&&round(st.height)/nt.offsetHeight||1);var Et=isElement$1(nt)?getWindow(nt):window,kt=Et.visualViewport,Lt=!isLayoutViewport()&&it,It=(st.left+(Lt&&kt?kt.offsetLeft:0))/_t,Rt=(st.top+(Lt&&kt?kt.offsetTop:0))/xt,Nt=st.width/_t,Bt=st.height/xt;return{width:Nt,height:Bt,top:Rt,right:It+Nt,bottom:Rt+Bt,left:It,x:It,y:Rt}}function getLayoutRect(nt){var rt=getBoundingClientRect(nt),it=nt.offsetWidth,st=nt.offsetHeight;return Math.abs(rt.width-it)<=1&&(it=rt.width),Math.abs(rt.height-st)<=1&&(st=rt.height),{x:nt.offsetLeft,y:nt.offsetTop,width:it,height:st}}function contains(nt,rt){var it=rt.getRootNode&&rt.getRootNode();if(nt.contains(rt))return!0;if(it&&isShadowRoot(it)){var st=rt;do{if(st&&nt.isSameNode(st))return!0;st=st.parentNode||st.host}while(st)}return!1}function getComputedStyle$1(nt){return getWindow(nt).getComputedStyle(nt)}function isTableElement(nt){return["table","td","th"].indexOf(getNodeName(nt))>=0}function getDocumentElement(nt){return((isElement$1(nt)?nt.ownerDocument:nt.document)||window.document).documentElement}function getParentNode(nt){return getNodeName(nt)==="html"?nt:nt.assignedSlot||nt.parentNode||(isShadowRoot(nt)?nt.host:null)||getDocumentElement(nt)}function getTrueOffsetParent(nt){return!isHTMLElement(nt)||getComputedStyle$1(nt).position==="fixed"?null:nt.offsetParent}function getContainingBlock(nt){var rt=/firefox/i.test(getUAString()),it=/Trident/i.test(getUAString());if(it&&isHTMLElement(nt)){var st=getComputedStyle$1(nt);if(st.position==="fixed")return null}var _t=getParentNode(nt);for(isShadowRoot(_t)&&(_t=_t.host);isHTMLElement(_t)&&["html","body"].indexOf(getNodeName(_t))<0;){var xt=getComputedStyle$1(_t);if(xt.transform!=="none"||xt.perspective!=="none"||xt.contain==="paint"||["transform","perspective"].indexOf(xt.willChange)!==-1||rt&&xt.willChange==="filter"||rt&&xt.filter&&xt.filter!=="none")return _t;_t=_t.parentNode}return null}function getOffsetParent(nt){for(var rt=getWindow(nt),it=getTrueOffsetParent(nt);it&&isTableElement(it)&&getComputedStyle$1(it).position==="static";)it=getTrueOffsetParent(it);return it&&(getNodeName(it)==="html"||getNodeName(it)==="body"&&getComputedStyle$1(it).position==="static")?rt:it||getContainingBlock(nt)||rt}function getMainAxisFromPlacement(nt){return["top","bottom"].indexOf(nt)>=0?"x":"y"}function within(nt,rt,it){return max$3(nt,min$3(rt,it))}function withinMaxClamp(nt,rt,it){var st=within(nt,rt,it);return st>it?it:st}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(nt){return Object.assign({},getFreshSideObject(),nt)}function expandToHashMap(nt,rt){return rt.reduce(function(it,st){return it[st]=nt,it},{})}var toPaddingObject=function nt(rt,it){return rt=typeof rt=="function"?rt(Object.assign({},it.rects,{placement:it.placement})):rt,mergePaddingObject(typeof rt!="number"?rt:expandToHashMap(rt,basePlacements))};function arrow(nt){var rt,it=nt.state,st=nt.name,_t=nt.options,xt=it.elements.arrow,Et=it.modifiersData.popperOffsets,kt=getBasePlacement$1(it.placement),Lt=getMainAxisFromPlacement(kt),It=[left$1,right$1].indexOf(kt)>=0,Rt=It?"height":"width";if(!(!xt||!Et)){var Nt=toPaddingObject(_t.padding,it),Bt=getLayoutRect(xt),Ft=Lt==="y"?top$2:left$1,Yt=Lt==="y"?bottom$1:right$1,Zt=it.rects.reference[Rt]+it.rects.reference[Lt]-Et[Lt]-it.rects.popper[Rt],Wt=Et[Lt]-it.rects.reference[Lt],Kt=getOffsetParent(xt),Jt=Kt?Lt==="y"?Kt.clientHeight||0:Kt.clientWidth||0:0,on=Zt/2-Wt/2,rn=Nt[Ft],ln=Jt-Bt[Rt]-Nt[Yt],gn=Jt/2-Bt[Rt]/2+on,wn=within(rn,gn,ln),kn=Lt;it.modifiersData[st]=(rt={},rt[kn]=wn,rt.centerOffset=wn-gn,rt)}}function effect$1(nt){var rt=nt.state,it=nt.options,st=it.element,_t=st===void 0?"[data-popper-arrow]":st;_t!=null&&(typeof _t=="string"&&(_t=rt.elements.popper.querySelector(_t),!_t)||!contains(rt.elements.popper,_t)||(rt.elements.arrow=_t))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(nt){return nt.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(nt,rt){var it=nt.x,st=nt.y,_t=rt.devicePixelRatio||1;return{x:round(it*_t)/_t||0,y:round(st*_t)/_t||0}}function mapToStyles(nt){var rt,it=nt.popper,st=nt.popperRect,_t=nt.placement,xt=nt.variation,Et=nt.offsets,kt=nt.position,Lt=nt.gpuAcceleration,It=nt.adaptive,Rt=nt.roundOffsets,Nt=nt.isFixed,Bt=Et.x,Ft=Bt===void 0?0:Bt,Yt=Et.y,Zt=Yt===void 0?0:Yt,Wt=typeof Rt=="function"?Rt({x:Ft,y:Zt}):{x:Ft,y:Zt};Ft=Wt.x,Zt=Wt.y;var Kt=Et.hasOwnProperty("x"),Jt=Et.hasOwnProperty("y"),on=left$1,rn=top$2,ln=window;if(It){var gn=getOffsetParent(it),wn="clientHeight",kn="clientWidth";if(gn===getWindow(it)&&(gn=getDocumentElement(it),getComputedStyle$1(gn).position!=="static"&&kt==="absolute"&&(wn="scrollHeight",kn="scrollWidth")),gn=gn,_t===top$2||(_t===left$1||_t===right$1)&&xt===end$1){rn=bottom$1;var Cn=Nt&&gn===ln&&ln.visualViewport?ln.visualViewport.height:gn[wn];Zt-=Cn-st.height,Zt*=Lt?1:-1}if(_t===left$1||(_t===top$2||_t===bottom$1)&&xt===end$1){on=right$1;var Pn=Nt&&gn===ln&&ln.visualViewport?ln.visualViewport.width:gn[kn];Ft-=Pn-st.width,Ft*=Lt?1:-1}}var An=Object.assign({position:kt},It&&unsetSides),cn=Rt===!0?roundOffsetsByDPR({x:Ft,y:Zt},getWindow(it)):{x:Ft,y:Zt};if(Ft=cn.x,Zt=cn.y,Lt){var Ln;return Object.assign({},An,(Ln={},Ln[rn]=Jt?"0":"",Ln[on]=Kt?"0":"",Ln.transform=(ln.devicePixelRatio||1)<=1?"translate("+Ft+"px, "+Zt+"px)":"translate3d("+Ft+"px, "+Zt+"px, 0)",Ln))}return Object.assign({},An,(rt={},rt[rn]=Jt?Zt+"px":"",rt[on]=Kt?Ft+"px":"",rt.transform="",rt))}function computeStyles(nt){var rt=nt.state,it=nt.options,st=it.gpuAcceleration,_t=st===void 0?!0:st,xt=it.adaptive,Et=xt===void 0?!0:xt,kt=it.roundOffsets,Lt=kt===void 0?!0:kt,It={placement:getBasePlacement$1(rt.placement),variation:getVariation(rt.placement),popper:rt.elements.popper,popperRect:rt.rects.popper,gpuAcceleration:_t,isFixed:rt.options.strategy==="fixed"};rt.modifiersData.popperOffsets!=null&&(rt.styles.popper=Object.assign({},rt.styles.popper,mapToStyles(Object.assign({},It,{offsets:rt.modifiersData.popperOffsets,position:rt.options.strategy,adaptive:Et,roundOffsets:Lt})))),rt.modifiersData.arrow!=null&&(rt.styles.arrow=Object.assign({},rt.styles.arrow,mapToStyles(Object.assign({},It,{offsets:rt.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Lt})))),rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-placement":rt.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(nt){var rt=nt.state,it=nt.instance,st=nt.options,_t=st.scroll,xt=_t===void 0?!0:_t,Et=st.resize,kt=Et===void 0?!0:Et,Lt=getWindow(rt.elements.popper),It=[].concat(rt.scrollParents.reference,rt.scrollParents.popper);return xt&&It.forEach(function(Rt){Rt.addEventListener("scroll",it.update,passive)}),kt&&Lt.addEventListener("resize",it.update,passive),function(){xt&&It.forEach(function(Rt){Rt.removeEventListener("scroll",it.update,passive)}),kt&&Lt.removeEventListener("resize",it.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function nt(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(nt){return nt.replace(/left|right|bottom|top/g,function(rt){return hash$1[rt]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(nt){return nt.replace(/start|end/g,function(rt){return hash[rt]})}function getWindowScroll(nt){var rt=getWindow(nt),it=rt.pageXOffset,st=rt.pageYOffset;return{scrollLeft:it,scrollTop:st}}function getWindowScrollBarX(nt){return getBoundingClientRect(getDocumentElement(nt)).left+getWindowScroll(nt).scrollLeft}function getViewportRect(nt,rt){var it=getWindow(nt),st=getDocumentElement(nt),_t=it.visualViewport,xt=st.clientWidth,Et=st.clientHeight,kt=0,Lt=0;if(_t){xt=_t.width,Et=_t.height;var It=isLayoutViewport();(It||!It&&rt==="fixed")&&(kt=_t.offsetLeft,Lt=_t.offsetTop)}return{width:xt,height:Et,x:kt+getWindowScrollBarX(nt),y:Lt}}function getDocumentRect(nt){var rt,it=getDocumentElement(nt),st=getWindowScroll(nt),_t=(rt=nt.ownerDocument)==null?void 0:rt.body,xt=max$3(it.scrollWidth,it.clientWidth,_t?_t.scrollWidth:0,_t?_t.clientWidth:0),Et=max$3(it.scrollHeight,it.clientHeight,_t?_t.scrollHeight:0,_t?_t.clientHeight:0),kt=-st.scrollLeft+getWindowScrollBarX(nt),Lt=-st.scrollTop;return getComputedStyle$1(_t||it).direction==="rtl"&&(kt+=max$3(it.clientWidth,_t?_t.clientWidth:0)-xt),{width:xt,height:Et,x:kt,y:Lt}}function isScrollParent(nt){var rt=getComputedStyle$1(nt),it=rt.overflow,st=rt.overflowX,_t=rt.overflowY;return/auto|scroll|overlay|hidden/.test(it+_t+st)}function getScrollParent(nt){return["html","body","#document"].indexOf(getNodeName(nt))>=0?nt.ownerDocument.body:isHTMLElement(nt)&&isScrollParent(nt)?nt:getScrollParent(getParentNode(nt))}function listScrollParents(nt,rt){var it;rt===void 0&&(rt=[]);var st=getScrollParent(nt),_t=st===((it=nt.ownerDocument)==null?void 0:it.body),xt=getWindow(st),Et=_t?[xt].concat(xt.visualViewport||[],isScrollParent(st)?st:[]):st,kt=rt.concat(Et);return _t?kt:kt.concat(listScrollParents(getParentNode(Et)))}function rectToClientRect(nt){return Object.assign({},nt,{left:nt.x,top:nt.y,right:nt.x+nt.width,bottom:nt.y+nt.height})}function getInnerBoundingClientRect(nt,rt){var it=getBoundingClientRect(nt,!1,rt==="fixed");return it.top=it.top+nt.clientTop,it.left=it.left+nt.clientLeft,it.bottom=it.top+nt.clientHeight,it.right=it.left+nt.clientWidth,it.width=nt.clientWidth,it.height=nt.clientHeight,it.x=it.left,it.y=it.top,it}function getClientRectFromMixedType(nt,rt,it){return rt===viewport?rectToClientRect(getViewportRect(nt,it)):isElement$1(rt)?getInnerBoundingClientRect(rt,it):rectToClientRect(getDocumentRect(getDocumentElement(nt)))}function getClippingParents(nt){var rt=listScrollParents(getParentNode(nt)),it=["absolute","fixed"].indexOf(getComputedStyle$1(nt).position)>=0,st=it&&isHTMLElement(nt)?getOffsetParent(nt):nt;return isElement$1(st)?rt.filter(function(_t){return isElement$1(_t)&&contains(_t,st)&&getNodeName(_t)!=="body"}):[]}function getClippingRect(nt,rt,it,st){var _t=rt==="clippingParents"?getClippingParents(nt):[].concat(rt),xt=[].concat(_t,[it]),Et=xt[0],kt=xt.reduce(function(Lt,It){var Rt=getClientRectFromMixedType(nt,It,st);return Lt.top=max$3(Rt.top,Lt.top),Lt.right=min$3(Rt.right,Lt.right),Lt.bottom=min$3(Rt.bottom,Lt.bottom),Lt.left=max$3(Rt.left,Lt.left),Lt},getClientRectFromMixedType(nt,Et,st));return kt.width=kt.right-kt.left,kt.height=kt.bottom-kt.top,kt.x=kt.left,kt.y=kt.top,kt}function computeOffsets(nt){var rt=nt.reference,it=nt.element,st=nt.placement,_t=st?getBasePlacement$1(st):null,xt=st?getVariation(st):null,Et=rt.x+rt.width/2-it.width/2,kt=rt.y+rt.height/2-it.height/2,Lt;switch(_t){case top$2:Lt={x:Et,y:rt.y-it.height};break;case bottom$1:Lt={x:Et,y:rt.y+rt.height};break;case right$1:Lt={x:rt.x+rt.width,y:kt};break;case left$1:Lt={x:rt.x-it.width,y:kt};break;default:Lt={x:rt.x,y:rt.y}}var It=_t?getMainAxisFromPlacement(_t):null;if(It!=null){var Rt=It==="y"?"height":"width";switch(xt){case start$2:Lt[It]=Lt[It]-(rt[Rt]/2-it[Rt]/2);break;case end$1:Lt[It]=Lt[It]+(rt[Rt]/2-it[Rt]/2);break}}return Lt}function detectOverflow(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,_t=st===void 0?nt.placement:st,xt=it.strategy,Et=xt===void 0?nt.strategy:xt,kt=it.boundary,Lt=kt===void 0?clippingParents:kt,It=it.rootBoundary,Rt=It===void 0?viewport:It,Nt=it.elementContext,Bt=Nt===void 0?popper:Nt,Ft=it.altBoundary,Yt=Ft===void 0?!1:Ft,Zt=it.padding,Wt=Zt===void 0?0:Zt,Kt=mergePaddingObject(typeof Wt!="number"?Wt:expandToHashMap(Wt,basePlacements)),Jt=Bt===popper?reference:popper,on=nt.rects.popper,rn=nt.elements[Yt?Jt:Bt],ln=getClippingRect(isElement$1(rn)?rn:rn.contextElement||getDocumentElement(nt.elements.popper),Lt,Rt,Et),gn=getBoundingClientRect(nt.elements.reference),wn=computeOffsets({reference:gn,element:on,strategy:"absolute",placement:_t}),kn=rectToClientRect(Object.assign({},on,wn)),Cn=Bt===popper?kn:gn,Pn={top:ln.top-Cn.top+Kt.top,bottom:Cn.bottom-ln.bottom+Kt.bottom,left:ln.left-Cn.left+Kt.left,right:Cn.right-ln.right+Kt.right},An=nt.modifiersData.offset;if(Bt===popper&&An){var cn=An[_t];Object.keys(Pn).forEach(function(Ln){var an=[right$1,bottom$1].indexOf(Ln)>=0?1:-1,zn=[top$2,bottom$1].indexOf(Ln)>=0?"y":"x";Pn[Ln]+=cn[zn]*an})}return Pn}function computeAutoPlacement(nt,rt){rt===void 0&&(rt={});var it=rt,st=it.placement,_t=it.boundary,xt=it.rootBoundary,Et=it.padding,kt=it.flipVariations,Lt=it.allowedAutoPlacements,It=Lt===void 0?placements:Lt,Rt=getVariation(st),Nt=Rt?kt?variationPlacements:variationPlacements.filter(function(Yt){return getVariation(Yt)===Rt}):basePlacements,Bt=Nt.filter(function(Yt){return It.indexOf(Yt)>=0});Bt.length===0&&(Bt=Nt);var Ft=Bt.reduce(function(Yt,Zt){return Yt[Zt]=detectOverflow(nt,{placement:Zt,boundary:_t,rootBoundary:xt,padding:Et})[getBasePlacement$1(Zt)],Yt},{});return Object.keys(Ft).sort(function(Yt,Zt){return Ft[Yt]-Ft[Zt]})}function getExpandedFallbackPlacements(nt){if(getBasePlacement$1(nt)===auto)return[];var rt=getOppositePlacement(nt);return[getOppositeVariationPlacement(nt),rt,getOppositeVariationPlacement(rt)]}function flip(nt){var rt=nt.state,it=nt.options,st=nt.name;if(!rt.modifiersData[st]._skip){for(var _t=it.mainAxis,xt=_t===void 0?!0:_t,Et=it.altAxis,kt=Et===void 0?!0:Et,Lt=it.fallbackPlacements,It=it.padding,Rt=it.boundary,Nt=it.rootBoundary,Bt=it.altBoundary,Ft=it.flipVariations,Yt=Ft===void 0?!0:Ft,Zt=it.allowedAutoPlacements,Wt=rt.options.placement,Kt=getBasePlacement$1(Wt),Jt=Kt===Wt,on=Lt||(Jt||!Yt?[getOppositePlacement(Wt)]:getExpandedFallbackPlacements(Wt)),rn=[Wt].concat(on).reduce(function(Cr,Er){return Cr.concat(getBasePlacement$1(Er)===auto?computeAutoPlacement(rt,{placement:Er,boundary:Rt,rootBoundary:Nt,padding:It,flipVariations:Yt,allowedAutoPlacements:Zt}):Er)},[]),ln=rt.rects.reference,gn=rt.rects.popper,wn=new Map,kn=!0,Cn=rn[0],Pn=0;Pn<rn.length;Pn++){var An=rn[Pn],cn=getBasePlacement$1(An),Ln=getVariation(An)===start$2,an=[top$2,bottom$1].indexOf(cn)>=0,zn=an?"width":"height",dn=detectOverflow(rt,{placement:An,boundary:Rt,rootBoundary:Nt,altBoundary:Bt,padding:It}),Fn=an?Ln?right$1:left$1:Ln?bottom$1:top$2;ln[zn]>gn[zn]&&(Fn=getOppositePlacement(Fn));var ir=getOppositePlacement(Fn),tr=[];if(xt&&tr.push(dn[cn]<=0),kt&&tr.push(dn[Fn]<=0,dn[ir]<=0),tr.every(function(Cr){return Cr})){Cn=An,kn=!1;break}wn.set(An,tr)}if(kn)for(var Jn=Yt?3:1,hr=function(Er){var ar=rn.find(function(Fr){var mr=wn.get(Fr);if(mr)return mr.slice(0,Er).every(function(xr){return xr})});if(ar)return Cn=ar,"break"},lr=Jn;lr>0;lr--){var cr=hr(lr);if(cr==="break")break}rt.placement!==Cn&&(rt.modifiersData[st]._skip=!0,rt.placement=Cn,rt.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(nt,rt,it){return it===void 0&&(it={x:0,y:0}),{top:nt.top-rt.height-it.y,right:nt.right-rt.width+it.x,bottom:nt.bottom-rt.height+it.y,left:nt.left-rt.width-it.x}}function isAnySideFullyClipped(nt){return[top$2,right$1,bottom$1,left$1].some(function(rt){return nt[rt]>=0})}function hide(nt){var rt=nt.state,it=nt.name,st=rt.rects.reference,_t=rt.rects.popper,xt=rt.modifiersData.preventOverflow,Et=detectOverflow(rt,{elementContext:"reference"}),kt=detectOverflow(rt,{altBoundary:!0}),Lt=getSideOffsets(Et,st),It=getSideOffsets(kt,_t,xt),Rt=isAnySideFullyClipped(Lt),Nt=isAnySideFullyClipped(It);rt.modifiersData[it]={referenceClippingOffsets:Lt,popperEscapeOffsets:It,isReferenceHidden:Rt,hasPopperEscaped:Nt},rt.attributes.popper=Object.assign({},rt.attributes.popper,{"data-popper-reference-hidden":Rt,"data-popper-escaped":Nt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(nt,rt,it){var st=getBasePlacement$1(nt),_t=[left$1,top$2].indexOf(st)>=0?-1:1,xt=typeof it=="function"?it(Object.assign({},rt,{placement:nt})):it,Et=xt[0],kt=xt[1];return Et=Et||0,kt=(kt||0)*_t,[left$1,right$1].indexOf(st)>=0?{x:kt,y:Et}:{x:Et,y:kt}}function offset$1(nt){var rt=nt.state,it=nt.options,st=nt.name,_t=it.offset,xt=_t===void 0?[0,0]:_t,Et=placements.reduce(function(Rt,Nt){return Rt[Nt]=distanceAndSkiddingToXY(Nt,rt.rects,xt),Rt},{}),kt=Et[rt.placement],Lt=kt.x,It=kt.y;rt.modifiersData.popperOffsets!=null&&(rt.modifiersData.popperOffsets.x+=Lt,rt.modifiersData.popperOffsets.y+=It),rt.modifiersData[st]=Et}const offset$2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset$1};function popperOffsets(nt){var rt=nt.state,it=nt.name;rt.modifiersData[it]=computeOffsets({reference:rt.rects.reference,element:rt.rects.popper,strategy:"absolute",placement:rt.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(nt){return nt==="x"?"y":"x"}function preventOverflow(nt){var rt=nt.state,it=nt.options,st=nt.name,_t=it.mainAxis,xt=_t===void 0?!0:_t,Et=it.altAxis,kt=Et===void 0?!1:Et,Lt=it.boundary,It=it.rootBoundary,Rt=it.altBoundary,Nt=it.padding,Bt=it.tether,Ft=Bt===void 0?!0:Bt,Yt=it.tetherOffset,Zt=Yt===void 0?0:Yt,Wt=detectOverflow(rt,{boundary:Lt,rootBoundary:It,padding:Nt,altBoundary:Rt}),Kt=getBasePlacement$1(rt.placement),Jt=getVariation(rt.placement),on=!Jt,rn=getMainAxisFromPlacement(Kt),ln=getAltAxis(rn),gn=rt.modifiersData.popperOffsets,wn=rt.rects.reference,kn=rt.rects.popper,Cn=typeof Zt=="function"?Zt(Object.assign({},rt.rects,{placement:rt.placement})):Zt,Pn=typeof Cn=="number"?{mainAxis:Cn,altAxis:Cn}:Object.assign({mainAxis:0,altAxis:0},Cn),An=rt.modifiersData.offset?rt.modifiersData.offset[rt.placement]:null,cn={x:0,y:0};if(!!gn){if(xt){var Ln,an=rn==="y"?top$2:left$1,zn=rn==="y"?bottom$1:right$1,dn=rn==="y"?"height":"width",Fn=gn[rn],ir=Fn+Wt[an],tr=Fn-Wt[zn],Jn=Ft?-kn[dn]/2:0,hr=Jt===start$2?wn[dn]:kn[dn],lr=Jt===start$2?-kn[dn]:-wn[dn],cr=rt.elements.arrow,Cr=Ft&&cr?getLayoutRect(cr):{width:0,height:0},Er=rt.modifiersData["arrow#persistent"]?rt.modifiersData["arrow#persistent"].padding:getFreshSideObject(),ar=Er[an],Fr=Er[zn],mr=within(0,wn[dn],Cr[dn]),xr=on?wn[dn]/2-Jn-mr-ar-Pn.mainAxis:hr-mr-ar-Pn.mainAxis,fr=on?-wn[dn]/2+Jn+mr+Fr+Pn.mainAxis:lr+mr+Fr+Pn.mainAxis,gr=rt.elements.arrow&&getOffsetParent(rt.elements.arrow),er=gr?rn==="y"?gr.clientTop||0:gr.clientLeft||0:0,nn=(Ln=An==null?void 0:An[rn])!=null?Ln:0,un=Fn+xr-nn-er,pn=Fn+fr-nn,Rn=within(Ft?min$3(ir,un):ir,Fn,Ft?max$3(tr,pn):tr);gn[rn]=Rn,cn[rn]=Rn-Fn}if(kt){var _n,or=rn==="x"?top$2:left$1,Vn=rn==="x"?bottom$1:right$1,Wn=gn[ln],Hn=ln==="y"?"height":"width",nr=Wn+Wt[or],sr=Wn-Wt[Vn],pr=[top$2,left$1].indexOf(Kt)!==-1,vr=(_n=An==null?void 0:An[ln])!=null?_n:0,kr=pr?nr:Wn-wn[Hn]-kn[Hn]-vr+Pn.altAxis,si=pr?Wn+wn[Hn]+kn[Hn]-vr-Pn.altAxis:sr,ui=Ft&&pr?withinMaxClamp(kr,Wn,si):within(Ft?kr:nr,Wn,Ft?si:sr);gn[ln]=ui,cn[ln]=ui-Wn}rt.modifiersData[st]=cn}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(nt){return{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}}function getNodeScroll(nt){return nt===getWindow(nt)||!isHTMLElement(nt)?getWindowScroll(nt):getHTMLElementScroll(nt)}function isElementScaled(nt){var rt=nt.getBoundingClientRect(),it=round(rt.width)/nt.offsetWidth||1,st=round(rt.height)/nt.offsetHeight||1;return it!==1||st!==1}function getCompositeRect(nt,rt,it){it===void 0&&(it=!1);var st=isHTMLElement(rt),_t=isHTMLElement(rt)&&isElementScaled(rt),xt=getDocumentElement(rt),Et=getBoundingClientRect(nt,_t,it),kt={scrollLeft:0,scrollTop:0},Lt={x:0,y:0};return(st||!st&&!it)&&((getNodeName(rt)!=="body"||isScrollParent(xt))&&(kt=getNodeScroll(rt)),isHTMLElement(rt)?(Lt=getBoundingClientRect(rt,!0),Lt.x+=rt.clientLeft,Lt.y+=rt.clientTop):xt&&(Lt.x=getWindowScrollBarX(xt))),{x:Et.left+kt.scrollLeft-Lt.x,y:Et.top+kt.scrollTop-Lt.y,width:Et.width,height:Et.height}}function order$1(nt){var rt=new Map,it=new Set,st=[];nt.forEach(function(xt){rt.set(xt.name,xt)});function _t(xt){it.add(xt.name);var Et=[].concat(xt.requires||[],xt.requiresIfExists||[]);Et.forEach(function(kt){if(!it.has(kt)){var Lt=rt.get(kt);Lt&&_t(Lt)}}),st.push(xt)}return nt.forEach(function(xt){it.has(xt.name)||_t(xt)}),st}function orderModifiers(nt){var rt=order$1(nt);return modifierPhases.reduce(function(it,st){return it.concat(rt.filter(function(_t){return _t.phase===st}))},[])}function debounce$2(nt){var rt;return function(){return rt||(rt=new Promise(function(it){Promise.resolve().then(function(){rt=void 0,it(nt())})})),rt}}function mergeByName(nt){var rt=nt.reduce(function(it,st){var _t=it[st.name];return it[st.name]=_t?Object.assign({},_t,st,{options:Object.assign({},_t.options,st.options),data:Object.assign({},_t.data,st.data)}):st,it},{});return Object.keys(rt).map(function(it){return rt[it]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return!rt.some(function(st){return!(st&&typeof st.getBoundingClientRect=="function")})}function popperGenerator(nt){nt===void 0&&(nt={});var rt=nt,it=rt.defaultModifiers,st=it===void 0?[]:it,_t=rt.defaultOptions,xt=_t===void 0?DEFAULT_OPTIONS:_t;return function(kt,Lt,It){It===void 0&&(It=xt);var Rt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,xt),modifiersData:{},elements:{reference:kt,popper:Lt},attributes:{},styles:{}},Nt=[],Bt=!1,Ft={state:Rt,setOptions:function(Kt){var Jt=typeof Kt=="function"?Kt(Rt.options):Kt;Zt(),Rt.options=Object.assign({},xt,Rt.options,Jt),Rt.scrollParents={reference:isElement$1(kt)?listScrollParents(kt):kt.contextElement?listScrollParents(kt.contextElement):[],popper:listScrollParents(Lt)};var on=orderModifiers(mergeByName([].concat(st,Rt.options.modifiers)));return Rt.orderedModifiers=on.filter(function(rn){return rn.enabled}),Yt(),Ft.update()},forceUpdate:function(){if(!Bt){var Kt=Rt.elements,Jt=Kt.reference,on=Kt.popper;if(!!areValidElements(Jt,on)){Rt.rects={reference:getCompositeRect(Jt,getOffsetParent(on),Rt.options.strategy==="fixed"),popper:getLayoutRect(on)},Rt.reset=!1,Rt.placement=Rt.options.placement,Rt.orderedModifiers.forEach(function(Pn){return Rt.modifiersData[Pn.name]=Object.assign({},Pn.data)});for(var rn=0;rn<Rt.orderedModifiers.length;rn++){if(Rt.reset===!0){Rt.reset=!1,rn=-1;continue}var ln=Rt.orderedModifiers[rn],gn=ln.fn,wn=ln.options,kn=wn===void 0?{}:wn,Cn=ln.name;typeof gn=="function"&&(Rt=gn({state:Rt,options:kn,name:Cn,instance:Ft})||Rt)}}}},update:debounce$2(function(){return new Promise(function(Wt){Ft.forceUpdate(),Wt(Rt)})}),destroy:function(){Zt(),Bt=!0}};if(!areValidElements(kt,Lt))return Ft;Ft.setOptions(It).then(function(Wt){!Bt&&It.onFirstUpdate&&It.onFirstUpdate(Wt)});function Yt(){Rt.orderedModifiers.forEach(function(Wt){var Kt=Wt.name,Jt=Wt.options,on=Jt===void 0?{}:Jt,rn=Wt.effect;if(typeof rn=="function"){var ln=rn({state:Rt,name:Kt,instance:Ft,options:on}),gn=function(){};Nt.push(ln||gn)}})}function Zt(){Nt.forEach(function(Wt){return Wt()}),Nt=[]}return Ft}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$2,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function nt(){return document.body};function getValueAtIndexOrReturn(nt,rt,it){if(Array.isArray(nt)){var st=nt[rt];return st==null?Array.isArray(it)?it[rt]:it:st}return nt}function isType(nt,rt){var it={}.toString.call(nt);return it.indexOf("[object")===0&&it.indexOf(rt+"]")>-1}function invokeWithArgsOrReturn(nt,rt){return typeof nt=="function"?nt.apply(void 0,rt):nt}function debounce$1(nt,rt){if(rt===0)return nt;var it;return function(st){clearTimeout(it),it=setTimeout(function(){nt(st)},rt)}}function splitBySpaces(nt){return nt.split(/\s+/).filter(Boolean)}function normalizeToArray(nt){return[].concat(nt)}function pushIfUnique(nt,rt){nt.indexOf(rt)===-1&&nt.push(rt)}function unique(nt){return nt.filter(function(rt,it){return nt.indexOf(rt)===it})}function getBasePlacement(nt){return nt.split("-")[0]}function arrayFrom(nt){return[].slice.call(nt)}function removeUndefinedProps(nt){return Object.keys(nt).reduce(function(rt,it){return nt[it]!==void 0&&(rt[it]=nt[it]),rt},{})}function div(){return document.createElement("div")}function isElement(nt){return["Element","Fragment"].some(function(rt){return isType(nt,rt)})}function isNodeList(nt){return isType(nt,"NodeList")}function isMouseEvent(nt){return isType(nt,"MouseEvent")}function isReferenceElement(nt){return!!(nt&&nt._tippy&&nt._tippy.reference===nt)}function getArrayOfElements(nt){return isElement(nt)?[nt]:isNodeList(nt)?arrayFrom(nt):Array.isArray(nt)?nt:arrayFrom(document.querySelectorAll(nt))}function setTransitionDuration(nt,rt){nt.forEach(function(it){it&&(it.style.transitionDuration=rt+"ms")})}function setVisibilityState(nt,rt){nt.forEach(function(it){it&&it.setAttribute("data-state",rt)})}function getOwnerDocument(nt){var rt,it=normalizeToArray(nt),st=it[0];return st!=null&&(rt=st.ownerDocument)!=null&&rt.body?st.ownerDocument:document}function isCursorOutsideInteractiveBorder(nt,rt){var it=rt.clientX,st=rt.clientY;return nt.every(function(_t){var xt=_t.popperRect,Et=_t.popperState,kt=_t.props,Lt=kt.interactiveBorder,It=getBasePlacement(Et.placement),Rt=Et.modifiersData.offset;if(!Rt)return!0;var Nt=It==="bottom"?Rt.top.y:0,Bt=It==="top"?Rt.bottom.y:0,Ft=It==="right"?Rt.left.x:0,Yt=It==="left"?Rt.right.x:0,Zt=xt.top-st+Nt>Lt,Wt=st-xt.bottom-Bt>Lt,Kt=xt.left-it+Ft>Lt,Jt=it-xt.right-Yt>Lt;return Zt||Wt||Kt||Jt})}function updateTransitionEndListener(nt,rt,it){var st=rt+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(_t){nt[st](_t,it)})}function actualContains(nt,rt){for(var it=rt;it;){var st;if(nt.contains(it))return!0;it=it.getRootNode==null||(st=it.getRootNode())==null?void 0:st.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var nt=performance.now();nt-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=nt}function onWindowBlur(){var nt=document.activeElement;if(isReferenceElement(nt)){var rt=nt._tippy;nt.blur&&!rt.state.isVisible&&nt.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function nt(){},onBeforeUpdate:function nt(){},onCreate:function nt(){},onDestroy:function nt(){},onHidden:function nt(){},onHide:function nt(){},onMount:function nt(){},onShow:function nt(){},onShown:function nt(){},onTrigger:function nt(){},onUntrigger:function nt(){},onClickOutside:function nt(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function nt(rt){var it=Object.keys(rt);it.forEach(function(st){defaultProps[st]=rt[st]})};function getExtendedPassedProps(nt){var rt=nt.plugins||[],it=rt.reduce(function(st,_t){var xt=_t.name,Et=_t.defaultValue;if(xt){var kt;st[xt]=nt[xt]!==void 0?nt[xt]:(kt=defaultProps[xt])!=null?kt:Et}return st},{});return Object.assign({},nt,it)}function getDataAttributeProps(nt,rt){var it=rt?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:rt}))):defaultKeys,st=it.reduce(function(_t,xt){var Et=(nt.getAttribute("data-tippy-"+xt)||"").trim();if(!Et)return _t;if(xt==="content")_t[xt]=Et;else try{_t[xt]=JSON.parse(Et)}catch{_t[xt]=Et}return _t},{});return st}function evaluateProps(nt,rt){var it=Object.assign({},rt,{content:invokeWithArgsOrReturn(rt.content,[nt])},rt.ignoreAttributes?{}:getDataAttributeProps(nt,rt.plugins));return it.aria=Object.assign({},defaultProps.aria,it.aria),it.aria={expanded:it.aria.expanded==="auto"?rt.interactive:it.aria.expanded,content:it.aria.content==="auto"?rt.interactive?null:"describedby":it.aria.content},it}var innerHTML=function nt(){return"innerHTML"};function dangerouslySetInnerHTML(nt,rt){nt[innerHTML()]=rt}function createArrowElement(nt){var rt=div();return nt===!0?rt.className=ARROW_CLASS:(rt.className=SVG_ARROW_CLASS,isElement(nt)?rt.appendChild(nt):dangerouslySetInnerHTML(rt,nt)),rt}function setContent(nt,rt){isElement(rt.content)?(dangerouslySetInnerHTML(nt,""),nt.appendChild(rt.content)):typeof rt.content!="function"&&(rt.allowHTML?dangerouslySetInnerHTML(nt,rt.content):nt.textContent=rt.content)}function getChildren(nt){var rt=nt.firstElementChild,it=arrayFrom(rt.children);return{box:rt,content:it.find(function(st){return st.classList.contains(CONTENT_CLASS)}),arrow:it.find(function(st){return st.classList.contains(ARROW_CLASS)||st.classList.contains(SVG_ARROW_CLASS)}),backdrop:it.find(function(st){return st.classList.contains(BACKDROP_CLASS)})}}function render$3(nt){var rt=div(),it=div();it.className=BOX_CLASS,it.setAttribute("data-state","hidden"),it.setAttribute("tabindex","-1");var st=div();st.className=CONTENT_CLASS,st.setAttribute("data-state","hidden"),setContent(st,nt.props),rt.appendChild(it),it.appendChild(st),_t(nt.props,nt.props);function _t(xt,Et){var kt=getChildren(rt),Lt=kt.box,It=kt.content,Rt=kt.arrow;Et.theme?Lt.setAttribute("data-theme",Et.theme):Lt.removeAttribute("data-theme"),typeof Et.animation=="string"?Lt.setAttribute("data-animation",Et.animation):Lt.removeAttribute("data-animation"),Et.inertia?Lt.setAttribute("data-inertia",""):Lt.removeAttribute("data-inertia"),Lt.style.maxWidth=typeof Et.maxWidth=="number"?Et.maxWidth+"px":Et.maxWidth,Et.role?Lt.setAttribute("role",Et.role):Lt.removeAttribute("role"),(xt.content!==Et.content||xt.allowHTML!==Et.allowHTML)&&setContent(It,nt.props),Et.arrow?Rt?xt.arrow!==Et.arrow&&(Lt.removeChild(Rt),Lt.appendChild(createArrowElement(Et.arrow))):Lt.appendChild(createArrowElement(Et.arrow)):Rt&&Lt.removeChild(Rt)}return{popper:rt,onUpdate:_t}}render$3.$$tippy=!0;var idCounter$1=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(nt,rt){var it=evaluateProps(nt,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(rt)))),st,_t,xt,Et=!1,kt=!1,Lt=!1,It=!1,Rt,Nt,Bt,Ft=[],Yt=debounce$1(un,it.interactiveDebounce),Zt,Wt=idCounter$1++,Kt=null,Jt=unique(it.plugins),on={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},rn={id:Wt,reference:nt,popper:div(),popperInstance:Kt,props:it,state:on,plugins:Jt,clearDelayTimeouts:kr,setProps:si,setContent:ui,show:ii,hide:li,hideWithInteractivity:Ei,enable:pr,disable:vr,unmount:wi,destroy:Ci};if(!it.render)return rn;var ln=it.render(rn),gn=ln.popper,wn=ln.onUpdate;gn.setAttribute("data-tippy-root",""),gn.id="tippy-"+rn.id,rn.popper=gn,nt._tippy=rn,gn._tippy=rn;var kn=Jt.map(function(Lr){return Lr.fn(rn)}),Cn=nt.hasAttribute("aria-expanded");return gr(),Jn(),Fn(),ir("onCreate",[rn]),it.showOnCreate&&nr(),gn.addEventListener("mouseenter",function(){rn.props.interactive&&rn.state.isVisible&&rn.clearDelayTimeouts()}),gn.addEventListener("mouseleave",function(){rn.props.interactive&&rn.props.trigger.indexOf("mouseenter")>=0&&an().addEventListener("mousemove",Yt)}),rn;function Pn(){var Lr=rn.props.touch;return Array.isArray(Lr)?Lr:[Lr,0]}function An(){return Pn()[0]==="hold"}function cn(){var Lr;return!!((Lr=rn.props.render)!=null&&Lr.$$tippy)}function Ln(){return Zt||nt}function an(){var Lr=Ln().parentNode;return Lr?getOwnerDocument(Lr):document}function zn(){return getChildren(gn)}function dn(Lr){return rn.state.isMounted&&!rn.state.isVisible||currentInput.isTouch||Rt&&Rt.type==="focus"?0:getValueAtIndexOrReturn(rn.props.delay,Lr?0:1,defaultProps.delay)}function Fn(Lr){Lr===void 0&&(Lr=!1),gn.style.pointerEvents=rn.props.interactive&&!Lr?"":"none",gn.style.zIndex=""+rn.props.zIndex}function ir(Lr,Tn,En){if(En===void 0&&(En=!0),kn.forEach(function(qn){qn[Lr]&&qn[Lr].apply(qn,Tn)}),En){var Un;(Un=rn.props)[Lr].apply(Un,Tn)}}function tr(){var Lr=rn.props.aria;if(!!Lr.content){var Tn="aria-"+Lr.content,En=gn.id,Un=normalizeToArray(rn.props.triggerTarget||nt);Un.forEach(function(qn){var _r=qn.getAttribute(Tn);if(rn.state.isVisible)qn.setAttribute(Tn,_r?_r+" "+En:En);else{var Zr=_r&&_r.replace(En,"").trim();Zr?qn.setAttribute(Tn,Zr):qn.removeAttribute(Tn)}})}}function Jn(){if(!(Cn||!rn.props.aria.expanded)){var Lr=normalizeToArray(rn.props.triggerTarget||nt);Lr.forEach(function(Tn){rn.props.interactive?Tn.setAttribute("aria-expanded",rn.state.isVisible&&Tn===Ln()?"true":"false"):Tn.removeAttribute("aria-expanded")})}}function hr(){an().removeEventListener("mousemove",Yt),mouseMoveListeners=mouseMoveListeners.filter(function(Lr){return Lr!==Yt})}function lr(Lr){if(!(currentInput.isTouch&&(Lt||Lr.type==="mousedown"))){var Tn=Lr.composedPath&&Lr.composedPath()[0]||Lr.target;if(!(rn.props.interactive&&actualContains(gn,Tn))){if(normalizeToArray(rn.props.triggerTarget||nt).some(function(En){return actualContains(En,Tn)})){if(currentInput.isTouch||rn.state.isVisible&&rn.props.trigger.indexOf("click")>=0)return}else ir("onClickOutside",[rn,Lr]);rn.props.hideOnClick===!0&&(rn.clearDelayTimeouts(),rn.hide(),kt=!0,setTimeout(function(){kt=!1}),rn.state.isMounted||ar())}}}function cr(){Lt=!0}function Cr(){Lt=!1}function Er(){var Lr=an();Lr.addEventListener("mousedown",lr,!0),Lr.addEventListener("touchend",lr,TOUCH_OPTIONS),Lr.addEventListener("touchstart",Cr,TOUCH_OPTIONS),Lr.addEventListener("touchmove",cr,TOUCH_OPTIONS)}function ar(){var Lr=an();Lr.removeEventListener("mousedown",lr,!0),Lr.removeEventListener("touchend",lr,TOUCH_OPTIONS),Lr.removeEventListener("touchstart",Cr,TOUCH_OPTIONS),Lr.removeEventListener("touchmove",cr,TOUCH_OPTIONS)}function Fr(Lr,Tn){xr(Lr,function(){!rn.state.isVisible&&gn.parentNode&&gn.parentNode.contains(gn)&&Tn()})}function mr(Lr,Tn){xr(Lr,Tn)}function xr(Lr,Tn){var En=zn().box;function Un(qn){qn.target===En&&(updateTransitionEndListener(En,"remove",Un),Tn())}if(Lr===0)return Tn();updateTransitionEndListener(En,"remove",Nt),updateTransitionEndListener(En,"add",Un),Nt=Un}function fr(Lr,Tn,En){En===void 0&&(En=!1);var Un=normalizeToArray(rn.props.triggerTarget||nt);Un.forEach(function(qn){qn.addEventListener(Lr,Tn,En),Ft.push({node:qn,eventType:Lr,handler:Tn,options:En})})}function gr(){An()&&(fr("touchstart",nn,{passive:!0}),fr("touchend",pn,{passive:!0})),splitBySpaces(rn.props.trigger).forEach(function(Lr){if(Lr!=="manual")switch(fr(Lr,nn),Lr){case"mouseenter":fr("mouseleave",pn);break;case"focus":fr(isIE11?"focusout":"blur",Rn);break;case"focusin":fr("focusout",Rn);break}})}function er(){Ft.forEach(function(Lr){var Tn=Lr.node,En=Lr.eventType,Un=Lr.handler,qn=Lr.options;Tn.removeEventListener(En,Un,qn)}),Ft=[]}function nn(Lr){var Tn,En=!1;if(!(!rn.state.isEnabled||_n(Lr)||kt)){var Un=((Tn=Rt)==null?void 0:Tn.type)==="focus";Rt=Lr,Zt=Lr.currentTarget,Jn(),!rn.state.isVisible&&isMouseEvent(Lr)&&mouseMoveListeners.forEach(function(qn){return qn(Lr)}),Lr.type==="click"&&(rn.props.trigger.indexOf("mouseenter")<0||Et)&&rn.props.hideOnClick!==!1&&rn.state.isVisible?En=!0:nr(Lr),Lr.type==="click"&&(Et=!En),En&&!Un&&sr(Lr)}}function un(Lr){var Tn=Lr.target,En=Ln().contains(Tn)||gn.contains(Tn);if(!(Lr.type==="mousemove"&&En)){var Un=Hn().concat(gn).map(function(qn){var _r,Zr=qn._tippy,yr=(_r=Zr.popperInstance)==null?void 0:_r.state;return yr?{popperRect:qn.getBoundingClientRect(),popperState:yr,props:it}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Un,Lr)&&(hr(),sr(Lr))}}function pn(Lr){var Tn=_n(Lr)||rn.props.trigger.indexOf("click")>=0&&Et;if(!Tn){if(rn.props.interactive){rn.hideWithInteractivity(Lr);return}sr(Lr)}}function Rn(Lr){rn.props.trigger.indexOf("focusin")<0&&Lr.target!==Ln()||rn.props.interactive&&Lr.relatedTarget&&gn.contains(Lr.relatedTarget)||sr(Lr)}function _n(Lr){return currentInput.isTouch?An()!==Lr.type.indexOf("touch")>=0:!1}function or(){Vn();var Lr=rn.props,Tn=Lr.popperOptions,En=Lr.placement,Un=Lr.offset,qn=Lr.getReferenceClientRect,_r=Lr.moveTransition,Zr=cn()?getChildren(gn).arrow:null,yr=qn?{getBoundingClientRect:qn,contextElement:qn.contextElement||Ln()}:nt,ni={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(hi){var Ti=hi.state;if(cn()){var fi=zn(),Yi=fi.box;["placement","reference-hidden","escaped"].forEach(function(Si){Si==="placement"?Yi.setAttribute("data-placement",Ti.placement):Ti.attributes.popper["data-popper-"+Si]?Yi.setAttribute("data-"+Si,""):Yi.removeAttribute("data-"+Si)}),Ti.attributes.popper={}}}},Ar=[{name:"offset",options:{offset:Un}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!_r}},ni];cn()&&Zr&&Ar.push({name:"arrow",options:{element:Zr,padding:3}}),Ar.push.apply(Ar,(Tn==null?void 0:Tn.modifiers)||[]),rn.popperInstance=createPopper(yr,gn,Object.assign({},Tn,{placement:En,onFirstUpdate:Bt,modifiers:Ar}))}function Vn(){rn.popperInstance&&(rn.popperInstance.destroy(),rn.popperInstance=null)}function Wn(){var Lr=rn.props.appendTo,Tn,En=Ln();rn.props.interactive&&Lr===TIPPY_DEFAULT_APPEND_TO||Lr==="parent"?Tn=En.parentNode:Tn=invokeWithArgsOrReturn(Lr,[En]),Tn.contains(gn)||Tn.appendChild(gn),rn.state.isMounted=!0,or()}function Hn(){return arrayFrom(gn.querySelectorAll("[data-tippy-root]"))}function nr(Lr){rn.clearDelayTimeouts(),Lr&&ir("onTrigger",[rn,Lr]),Er();var Tn=dn(!0),En=Pn(),Un=En[0],qn=En[1];currentInput.isTouch&&Un==="hold"&&qn&&(Tn=qn),Tn?st=setTimeout(function(){rn.show()},Tn):rn.show()}function sr(Lr){if(rn.clearDelayTimeouts(),ir("onUntrigger",[rn,Lr]),!rn.state.isVisible){ar();return}if(!(rn.props.trigger.indexOf("mouseenter")>=0&&rn.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Lr.type)>=0&&Et)){var Tn=dn(!1);Tn?_t=setTimeout(function(){rn.state.isVisible&&rn.hide()},Tn):xt=requestAnimationFrame(function(){rn.hide()})}}function pr(){rn.state.isEnabled=!0}function vr(){rn.hide(),rn.state.isEnabled=!1}function kr(){clearTimeout(st),clearTimeout(_t),cancelAnimationFrame(xt)}function si(Lr){if(!rn.state.isDestroyed){ir("onBeforeUpdate",[rn,Lr]),er();var Tn=rn.props,En=evaluateProps(nt,Object.assign({},Tn,removeUndefinedProps(Lr),{ignoreAttributes:!0}));rn.props=En,gr(),Tn.interactiveDebounce!==En.interactiveDebounce&&(hr(),Yt=debounce$1(un,En.interactiveDebounce)),Tn.triggerTarget&&!En.triggerTarget?normalizeToArray(Tn.triggerTarget).forEach(function(Un){Un.removeAttribute("aria-expanded")}):En.triggerTarget&&nt.removeAttribute("aria-expanded"),Jn(),Fn(),wn&&wn(Tn,En),rn.popperInstance&&(or(),Hn().forEach(function(Un){requestAnimationFrame(Un._tippy.popperInstance.forceUpdate)})),ir("onAfterUpdate",[rn,Lr])}}function ui(Lr){rn.setProps({content:Lr})}function ii(){var Lr=rn.state.isVisible,Tn=rn.state.isDestroyed,En=!rn.state.isEnabled,Un=currentInput.isTouch&&!rn.props.touch,qn=getValueAtIndexOrReturn(rn.props.duration,0,defaultProps.duration);if(!(Lr||Tn||En||Un)&&!Ln().hasAttribute("disabled")&&(ir("onShow",[rn],!1),rn.props.onShow(rn)!==!1)){if(rn.state.isVisible=!0,cn()&&(gn.style.visibility="visible"),Fn(),Er(),rn.state.isMounted||(gn.style.transition="none"),cn()){var _r=zn(),Zr=_r.box,yr=_r.content;setTransitionDuration([Zr,yr],0)}Bt=function(){var Ar;if(!(!rn.state.isVisible||It)){if(It=!0,gn.offsetHeight,gn.style.transition=rn.props.moveTransition,cn()&&rn.props.animation){var gi=zn(),hi=gi.box,Ti=gi.content;setTransitionDuration([hi,Ti],qn),setVisibilityState([hi,Ti],"visible")}tr(),Jn(),pushIfUnique(mountedInstances,rn),(Ar=rn.popperInstance)==null||Ar.forceUpdate(),ir("onMount",[rn]),rn.props.animation&&cn()&&mr(qn,function(){rn.state.isShown=!0,ir("onShown",[rn])})}},Wn()}}function li(){var Lr=!rn.state.isVisible,Tn=rn.state.isDestroyed,En=!rn.state.isEnabled,Un=getValueAtIndexOrReturn(rn.props.duration,1,defaultProps.duration);if(!(Lr||Tn||En)&&(ir("onHide",[rn],!1),rn.props.onHide(rn)!==!1)){if(rn.state.isVisible=!1,rn.state.isShown=!1,It=!1,Et=!1,cn()&&(gn.style.visibility="hidden"),hr(),ar(),Fn(!0),cn()){var qn=zn(),_r=qn.box,Zr=qn.content;rn.props.animation&&(setTransitionDuration([_r,Zr],Un),setVisibilityState([_r,Zr],"hidden"))}tr(),Jn(),rn.props.animation?cn()&&Fr(Un,rn.unmount):rn.unmount()}}function Ei(Lr){an().addEventListener("mousemove",Yt),pushIfUnique(mouseMoveListeners,Yt),Yt(Lr)}function wi(){rn.state.isVisible&&rn.hide(),rn.state.isMounted&&(Vn(),Hn().forEach(function(Lr){Lr._tippy.unmount()}),gn.parentNode&&gn.parentNode.removeChild(gn),mountedInstances=mountedInstances.filter(function(Lr){return Lr!==rn}),rn.state.isMounted=!1,ir("onHidden",[rn]))}function Ci(){rn.state.isDestroyed||(rn.clearDelayTimeouts(),rn.unmount(),er(),delete nt._tippy,rn.state.isDestroyed=!0,ir("onDestroy",[rn]))}}function tippy(nt,rt){rt===void 0&&(rt={});var it=defaultProps.plugins.concat(rt.plugins||[]);bindGlobalEventListeners();var st=Object.assign({},rt,{plugins:it}),_t=getArrayOfElements(nt),xt=_t.reduce(function(Et,kt){var Lt=kt&&createTippy(kt,st);return Lt&&Et.push(Lt),Et},[]);return isElement(nt)?xt[0]:xt}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function nt(rt){var it=rt.state,st={popper:{position:it.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(it.elements.popper.style,st.popper),it.styles=st,it.elements.arrow&&Object.assign(it.elements.arrow.style,st.arrow)}});tippy.setDefaultProps({render:render$3});const iiifServer="https://iiif.juncture-digital.org";function isURL(nt){return/^https*:\/\//.test(nt)}function sha256(nt){return sha256$1.exports.sha256(nt)}function isMobile(){return"ontouchstart"in document.documentElement&&/mobi/i.test(navigator.userAgent)}function kebabToCamel(nt){return nt.replace(/-([a-z])/g,function(rt){return rt[1].toUpperCase()})}let tippyEntities;function initTippy(nt=null,rt=!1){let it=new Set("qid label description image".split(/\s/));rt&&(tippyEntities=null),nt=nt||document;let st=Array.from(nt.querySelectorAll("mark")).filter(_t=>Array.from(_t.attributes).find(xt=>{let Et=xt.name.toLowerCase();return it.has(Et)||isQID(xt.value)&&Et!=="flyto"}));!tippyEntities&&st.length>0&&(tippyEntities=st,tippy(tippyEntities,{interactive:!0,allowHTML:!0,delay:[null,null],onShow:_t=>{let xt=Array.from(_t.reference.attributes).filter(Et=>it.has(Et.name)).map(Et=>`${Et.name}="${Et.value}"`);_t.setContent(`<ve-entity-card ${xt} style="max-width:90vw;"></ve-entity-card>`)}}))}async function getManifest(nt,rt=!1){let it=nt.indexOf("http")===0?nt:`${iiifServer}/${nt}/manifest.json`;return(await loadManifests([it],rt))[0]}function observeNavbar(nt,rt){const it=()=>{let _t=parseInt(nt.style.top.replace(/^-/,"").replace(/px$/,"")),Et=parseInt(nt.style.height.replace(/px$/,""))-_t;rt.style.top=`${Et}px`};it(),new MutationObserver(it).observe(nt,{attributes:!0})}function makeSticky(nt){var it;nt.classList.add("sticky"),nt.style.position="sticky",nt.style.marginTop="6px";let rt=document.querySelector('ve-navbar[sticky="true"]');if(rt)observeNavbar(rt,nt);else{let st=document.querySelector("ve-header[sticky]");st?(rt=(it=st==null?void 0:st.shadowRoot)==null?void 0:it.querySelector("ve-navbar"),rt?observeNavbar(rt,nt):new MutationObserver(()=>{var xt;rt=(xt=st==null?void 0:st.shadowRoot)==null?void 0:xt.querySelector("ve-navbar"),rt&&observeNavbar(rt,nt)}).observe(st,{childList:!0,subtree:!0,attributes:!0})):nt.style.top="0"}}function findItem(nt,rt,it=1){const st=_findItems(nt,rt);return st.length>=it?st[it-1]:null}function _findItems(nt,rt,it=[]){if(it=it||[],rt.items)for(let st=0;st<rt.items.length;st++){let _t=rt.items[st];!Object.entries(nt).find(([Et,kt])=>_t[Et]&&_t[Et]!==kt)?it.push(_t):_findItems(nt,_t,it)}return it}function getItemInfo(nt,rt=1){return findItem({type:"Annotation",motivation:"painting"},nt,rt).body}function imageCount(nt){return _findItems({type:"Annotation",motivation:"painting"},nt).length}const _manifestCache={};async function loadManifests(nt,rt=!1){let it=nt.map(_t=>_t.indexOf("http")===0?_t:`${iiifServer}/${_t}/manifest.json`),st=it.filter(_t=>!_manifestCache[_t]);if(st.length>0){let _t=st.map(kt=>(rt&&["localhost","iiif.juncture-digital.org"].includes(new URL(kt).hostname)&&(kt+="?refresh"),fetch(kt))),xt=await Promise.all(_t),Et=await Promise.all(xt.map(kt=>kt.json()));if(_t=Et.filter(kt=>!Array.isArray(kt["@context"])&&parseFloat(kt["@context"].split("/").slice(-2,-1).pop())<3).map(kt=>fetch("https://iiif.juncture-digital.org/prezi2to3/",{method:"POST",body:JSON.stringify(kt)})),_t.length>0){xt=await Promise.all(_t);let kt=await Promise.all(xt.map(Lt=>Lt.json()));for(let Lt=0;Lt<Et.length;Lt++){let It=Et[Lt].id||Et[Lt]["@id"],Rt=kt.find(Nt=>(Nt.id||Nt["@id"])===It);Rt&&(Et[Lt]=Rt)}}return Et.forEach((kt,Lt)=>_manifestCache[st[Lt]]=kt),it.map(kt=>_manifestCache[kt])}else return it.map(_t=>_manifestCache[_t])}function _value(nt,rt="en"){return typeof nt=="object"?nt[rt]||nt.none||nt[Object.keys(nt).sort()[0]]:nt}function label(nt,rt="en"){return nt?_value(nt.label,rt):null}function summary(nt,rt="en"){return nt?_value(nt.summary,rt):null}function staticImage(nt,rt,it=0,st=0){let _t=getItemInfo(nt),xt=rt.region||"full",Et=rt.size?rt.size:it?st?`${it},${st}`:`${it},`:st?`,${st}`:"400,",kt=rt.rotation||"0",Lt=rt.quality||"default",It=rt.format||"jpg";return`${_t.service[0].id||_t.service[0]["@id"]}/${xt}/${Et}/${kt}/${Lt}.${It}`}function thumbnail(nt,rt=400,it=1){if(!nt)return null;let st=getItemInfo(nt,it);return st.service?`${st.service[0].id||st.service[0]["@id"]}/full/${rt},/0/default.jpg`:st.type==="Video"?`https://iiif.juncture-digital.org/thumbnail?url=${st.id}`:st.id}function parseRegionString(nt,rt){let it;const st=nt.split(":");let[_t,xt,Et,kt]=st[st.length-1].split(",").map(It=>parseInt(It));const Lt=rt.world.getItemAt(0).getContentSize();return st.length===2&&(st[0]==="pct"||st[0]==="percent")&&(_t=Math.round(Lt.x*_t/100),xt=Math.round(Lt.y*xt/100),Et=Math.round(Lt.x*Et/100),kt=Math.round(Lt.y*kt/100)),it=rt.viewport.imageToViewportRectangle(_t,xt,Et,kt),it}function getMetadata(nt,rt="en"){let it=[];return nt.metadata&&nt.metadata.forEach(st=>{it.push({label:_value(st.label,rt)[0],value:_value(st.value,rt)})}),it}function metadataAsObj(nt,rt="en"){return Object.fromEntries(getMetadata(nt,rt).map(it=>[it.label,it.value]))}function top$1(){return stickyElems.length>0&&stickyElems[0].localName.toLowerCase()==="ve-navbar"?parseInt(window.getComputedStyle(stickyElems[0]).height.slice(0,-2)):0}function findStickyElems(){var it,st;initTippy();let nt=Array.from(document.querySelectorAll(".sticky")),rt=nt.findIndex(_t=>_t.localName.toLowerCase()==="ve-navbar");if(rt<0){let _t=nt.findIndex(xt=>xt.localName.toLowerCase()==="ve-header");if(_t>=0){let xt=(st=(it=nt[_t])==null?void 0:it.shadowRoot)==null?void 0:st.querySelector("ve-navbar.sticky");xt&&(nt[_t]=xt,rt=_t)}}return nt.forEach(_t=>setTop(_t)),nt}function activeRegionOffset(){let nt=stickyElems.find(it=>it.localName.toLowerCase()==="ve-navbar"),rt=nt?nt.getBoundingClientRect().top:0;return stickyElems.forEach(it=>{let st=it.getBoundingClientRect();if((st.x<st.width?0:1)===0&&st.top===rt){let xt=window.getComputedStyle(it).height;xt.length>=3&&xt.slice(-2)==="px"&&(rt+=parseInt(window.getComputedStyle(it).height.slice(0,-2)))}}),rt}function setTop(nt){if(nt.localName.toLowerCase()==="section"){let rt=stickyElems.find(st=>st.localName.toLowerCase()==="ve-navbar"),it=rt?rt.clientHeight:0;nt.style.top=`${it}px`}}let stickyElems=[];const mutationObserver=new MutationObserver(nt=>{let rt=nt.filter(it=>{let st=Array.from(it.addedNodes).filter(xt=>{var Et;return((Et=xt.id)==null?void 0:Et.indexOf("tippy"))<0}).length,_t=Array.from(it.removedNodes).filter(xt=>{var Et;return((Et=xt.id)==null?void 0:Et.indexOf("tippy"))<0}).length;return st+_t>0});(!tippyEntities||rt.length>0)&&(stickyElems=findStickyElems())});mutationObserver.observe(document,{childList:!0,subtree:!0});let targets={},active,offset=0;const intersectionObserver=new IntersectionObserver(nt=>{offset=activeRegionOffset(),nt.forEach(st=>targets[domPath(st.target)]=st);let rt=Object.values(targets).filter(st=>st.isIntersecting).filter(st=>st.target.getBoundingClientRect().y>=offset).sort((st,_t)=>st.target.getBoundingClientRect().y>_t.target.getBoundingClientRect().y?1:-1),it=rt.find(st=>st.intersectionRatio===1)||rt[0];if(it){let st=it.target;Array.from(st.classList).indexOf("active")<0&&(active&&active.classList.remove("active"),st.classList.add("active"),active=st)}},{root:null,threshold:[0,.25,.5,.75,1],rootMargin:`-${offset}px 0px 0px 0px`});Array.from(document.querySelectorAll("p")).forEach(nt=>intersectionObserver.observe(nt));function observeActive(nt){Array.from(nt.querySelectorAll("p")).forEach(rt=>intersectionObserver.observe(rt))}function domPath(nt){for(var rt=[];nt.parentNode!=null;){let st=0,_t=0;for(var it=0;it<nt.parentNode.childNodes.length;it++){let xt=nt.parentNode.childNodes[it];xt.nodeName==nt.nodeName&&(xt===nt&&(_t=st),st++)}nt.hasAttribute("id")&&nt.id!=""?rt.unshift(nt.nodeName.toLowerCase()+`#${nt.id}`):st>1?rt.unshift(nt.nodeName.toLowerCase()+(_t>0?`[${_t}]`:"")):rt.unshift(nt.nodeName.toLowerCase()),nt=nt.parentNode}return rt.join(".")}let entityData={};async function getEntityData(nt=[],rt="en"){let it=nt.filter(st=>!entityData[st]).map(st=>`(<http://www.wikidata.org/entity/${st}>)`);if(it.length>0){let st=`
      SELECT ?item ?label ?description ?alias ?image ?logoImage ?coords ?pageBanner ?whosOnFirst ?wikipedia WHERE {
        VALUES (?item) { ${it.join(" ")} }
        ?item rdfs:label ?label . 
        FILTER (LANG(?label) = "${rt}" || LANG(?label) = "en")
        OPTIONAL { ?item schema:description ?description . FILTER (LANG(?description) = "${rt}" || LANG(?description) = "en")}
        OPTIONAL { ?item skos:altLabel ?alias . FILTER (LANG(?alias) = "${rt}" || LANG(?alias) = "en")}
        OPTIONAL { ?item wdt:P625 ?coords . }
        OPTIONAL { ?item wdt:P18 ?image . }
        OPTIONAL { ?item wdt:P154 ?logoImage . }
        OPTIONAL { ?item wdt:P948 ?pageBanner . }
        OPTIONAL { ?item wdt:P6766 ?whosOnFirst . }
        OPTIONAL { ?wikipedia schema:about ?item; schema:isPartOf <https://${rt}.wikipedia.org/> . }
    }`,_t=await fetch("https://query.wikidata.org/sparql",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"},body:`query=${encodeURIComponent(st)}`});if(_t.ok)return(await _t.json()).results.bindings.forEach(Et=>{let kt=Et.item.value.split("/").pop();entityData[kt]?Et.alias&&entityData[kt].aliases.push(Et.alias.value):(entityData[kt]={id:kt,label:Et.label.value},Et.description&&(entityData[kt].description=Et.description.value),Et.alias&&(entityData[kt].aliases=[Et.alias.value]),Et.coords&&(entityData[kt].coords=Et.coords.value.slice(6,-1).split(" ").reverse().join(",")),Et.wikipedia&&(entityData[kt].wikipedia=Et.wikipedia.value),Et.pageBanner&&(entityData[kt].pageBanner=Et.pageBanner.value),Et.image&&(entityData[kt].image=Et.image.value,entityData[kt].thumbnail=mwImage(Et.image.value,300)),Et.logoImage&&(entityData[kt].logoImage=Et.logoImage.value,entityData[kt].thumbnail||(entityData[kt].thumbnail=mwImage(Et.logoImage.value,300))),Et.whosOnFirst&&(entityData[kt].geojson=whosOnFirstUrl(Et.whosOnFirst.value)))}),Object.fromEntries(nt.filter(Et=>entityData[Et]).map(Et=>[Et,entityData[Et]]))}return Object.fromEntries(nt.filter(st=>entityData[st]).map(st=>[st,entityData[st]]))}function isQID(nt){return nt[0]==="Q"&&isNum(nt.slice(1))}async function getEntity(nt,rt="en"){return(await getEntityData([nt],rt))[nt]}function mwImage(nt,rt){nt=(Array.isArray(nt)?nt[0]:nt).replace(/Special:FilePath\//,"File:").split("File:").pop(),nt=decodeURIComponent(nt).replace(/ /g,"_");const it=md5(nt),st=nt.split(".").pop();let _t=`https://upload.wikimedia.org/wikipedia/commons${rt?"/thumb":""}`;return _t+=`/${it.slice(0,1)}/${it.slice(0,2)}/${nt}`,rt&&(_t+=`/${rt}px-${nt}`,st==="svg"?_t+=".png":(st==="tif"||st==="tiff")&&(_t+=".jpg")),_t}function whosOnFirstUrl(nt){let rt=[];for(let it=0;it<nt.length;it+=3)rt.push(nt.slice(it,it+3));return`https://data.whosonfirst.org/${rt.join("/")}/${nt}.geojson`}function isNum(nt){return nt&&!isNaN(nt)}function parseImageOptions(nt){let rt=(nt==null?void 0:nt.split("/"))||[],it="full",st="full",_t="0",xt="default",Et="jpg",kt=0;return{region:rt.length>kt&&rt[kt]?rt[kt]:it,size:rt.length>kt+1&&rt[kt+1]?rt[kt+1]:st,rotation:rt.length>kt+2&&rt[kt+2]?rt[kt+2]:_t,quality:rt.length>kt+3&&rt[kt+3]?rt[kt+3]:xt,format:rt.length>kt+4&&rt[kt+4]?rt[kt+4]:Et}}async function imageDataUrl(nt,rt,it){return new Promise(st=>{let{x:_t,y:xt,w:Et,h:kt}=rt,{width:Lt,height:It}=it,Rt=new Image;Rt.crossOrigin="anonymous",_t=_t?_t/100:0,xt=xt?xt/100:0,Et=Et?Et/100:0,kt=kt?kt/100:0,Rt.onload=()=>{let Nt=Rt.width,Bt=Rt.height,Ft=Et>0?Nt*Et:Nt-Nt*_t,Yt=kt>0?Bt*kt:Bt-Bt*xt,Zt=Ft/Yt;Zt>1?It=Lt/Zt:Lt=It*Zt;const Wt=document.createElement("canvas"),Kt=Wt.getContext("2d");Wt.width=Lt,Wt.height=It,_t=_t*Nt,xt=xt*Bt,Kt==null||Kt.drawImage(Rt,_t,xt,Ft,Yt,0,0,Lt,It);let Jt=Wt.toDataURL();st(Jt)},Rt.src=nt})}let summaryText={};async function getSummaryText(nt,rt="en"){if(summaryText[rt]||(summaryText[rt]={}),!summaryText[rt][nt]&&entityData[nt]&&entityData[nt].wikipedia){let st=entityData[nt].wikipedia.replace(/\/w\//,"/wiki").split("/wiki/").pop(),_t=`https://${rt}.wikipedia.org/api/rest_v1/page/summary/${st}`,xt=await fetch(_t);return xt.ok&&(xt=await xt.json(),summaryText[rt][nt]=xt.extract_html||xt.extract),summaryText[rt][nt]}else return summaryText[rt][nt]}var breadcrumb_styles_default=i$7`
  .breadcrumb {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
  }
`,SlBreadcrumb=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.separatorDir=this.localize.dir(),this.label=""}getSeparator(){const rt=this.separatorSlot.assignedElements({flatten:!0})[0].cloneNode(!0);return[rt,...rt.querySelectorAll("[id]")].forEach(it=>it.removeAttribute("id")),rt.setAttribute("data-default",""),rt.slot="separator",rt}handleSlotChange(){const nt=[...this.defaultSlot.assignedElements({flatten:!0})].filter(rt=>rt.tagName.toLowerCase()==="sl-breadcrumb-item");nt.forEach((rt,it)=>{const st=rt.querySelector('[slot="separator"]');st===null?rt.append(this.getSeparator()):st.hasAttribute("data-default")&&st.replaceWith(this.getSeparator()),it===nt.length-1?rt.setAttribute("aria-current","page"):rt.removeAttribute("aria-current")})}render(){return this.separatorDir!==this.localize.dir()&&(this.separatorDir=this.localize.dir(),this.updateComplete.then(()=>this.handleSlotChange())),x$1`
      <nav part="base" class="breadcrumb" aria-label=${this.label}>
        <slot @slotchange=${this.handleSlotChange}></slot>
      </nav>

      <span hidden aria-hidden="true">
        <slot name="separator">
          <sl-icon name=${this.localize.dir()==="rtl"?"chevron-left":"chevron-right"} library="system"></sl-icon>
        </slot>
      </span>
    `}};SlBreadcrumb.styles=[component_styles_default,breadcrumb_styles_default];SlBreadcrumb.dependencies={"sl-icon":SlIcon};__decorateClass([e$4("slot")],SlBreadcrumb.prototype,"defaultSlot",2);__decorateClass([e$4('slot[name="separator"]')],SlBreadcrumb.prototype,"separatorSlot",2);__decorateClass([n$4()],SlBreadcrumb.prototype,"label",2);SlBreadcrumb.define("sl-breadcrumb");var breadcrumb_item_styles_default=i$7`
  :host {
    display: inline-flex;
  }

  .breadcrumb-item {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    color: var(--sl-color-neutral-600);
    line-height: var(--sl-line-height-normal);
    white-space: nowrap;
  }

  .breadcrumb-item__label {
    display: inline-block;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    line-height: inherit;
    text-decoration: none;
    color: inherit;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    padding: 0;
    margin: 0;
    cursor: pointer;
    transition: var(--sl-transition-fast) --color;
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label {
    color: var(--sl-color-primary-600);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:hover {
    color: var(--sl-color-primary-500);
  }

  :host(:not(:last-of-type)) .breadcrumb-item__label:active {
    color: var(--sl-color-primary-600);
  }

  .breadcrumb-item__label:focus {
    outline: none;
  }

  .breadcrumb-item__label:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .breadcrumb-item__prefix,
  .breadcrumb-item__suffix {
    display: none;
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .breadcrumb-item--has-prefix .breadcrumb-item__prefix {
    display: inline-flex;
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .breadcrumb-item--has-suffix .breadcrumb-item__suffix {
    display: inline-flex;
    margin-inline-start: var(--sl-spacing-x-small);
  }

  :host(:last-of-type) .breadcrumb-item__separator {
    display: none;
  }

  .breadcrumb-item__separator {
    display: inline-flex;
    align-items: center;
    margin: 0 var(--sl-spacing-x-small);
    user-select: none;
    -webkit-user-select: none;
  }
`,SlBreadcrumbItem=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"prefix","suffix"),this.renderType="button",this.rel="noreferrer noopener"}setRenderType(){const nt=this.defaultSlot.assignedElements({flatten:!0}).filter(rt=>rt.tagName.toLowerCase()==="sl-dropdown").length>0;if(this.href){this.renderType="link";return}if(nt){this.renderType="dropdown";return}this.renderType="button"}hrefChanged(){this.setRenderType()}handleSlotChange(){this.setRenderType()}render(){return x$1`
      <div
        part="base"
        class=${e$1({"breadcrumb-item":!0,"breadcrumb-item--has-prefix":this.hasSlotController.test("prefix"),"breadcrumb-item--has-suffix":this.hasSlotController.test("suffix")})}
      >
        <span part="prefix" class="breadcrumb-item__prefix">
          <slot name="prefix"></slot>
        </span>

        ${this.renderType==="link"?x$1`
              <a
                part="label"
                class="breadcrumb-item__label breadcrumb-item__label--link"
                href="${this.href}"
                target="${o$3(this.target?this.target:void 0)}"
                rel=${o$3(this.target?this.rel:void 0)}
              >
                <slot @slotchange=${this.handleSlotChange}></slot>
              </a>
            `:""}
        ${this.renderType==="button"?x$1`
              <button part="label" type="button" class="breadcrumb-item__label breadcrumb-item__label--button">
                <slot @slotchange=${this.handleSlotChange}></slot>
              </button>
            `:""}
        ${this.renderType==="dropdown"?x$1`
              <div part="label" class="breadcrumb-item__label breadcrumb-item__label--drop-down">
                <slot @slotchange=${this.handleSlotChange}></slot>
              </div>
            `:""}

        <span part="suffix" class="breadcrumb-item__suffix">
          <slot name="suffix"></slot>
        </span>

        <span part="separator" class="breadcrumb-item__separator" aria-hidden="true">
          <slot name="separator"></slot>
        </span>
      </div>
    `}};SlBreadcrumbItem.styles=[component_styles_default,breadcrumb_item_styles_default];__decorateClass([e$4("slot:not([name])")],SlBreadcrumbItem.prototype,"defaultSlot",2);__decorateClass([r$1()],SlBreadcrumbItem.prototype,"renderType",2);__decorateClass([n$4()],SlBreadcrumbItem.prototype,"href",2);__decorateClass([n$4()],SlBreadcrumbItem.prototype,"target",2);__decorateClass([n$4()],SlBreadcrumbItem.prototype,"rel",2);__decorateClass([watch("href",{waitUntilFirstUpdate:!0})],SlBreadcrumbItem.prototype,"hrefChanged",1);SlBreadcrumbItem.define("sl-breadcrumb-item");var details_styles_default=i$7`
  :host {
    display: block;
  }

  .details {
    border: solid 1px var(--sl-color-neutral-200);
    border-radius: var(--sl-border-radius-medium);
    background-color: var(--sl-color-neutral-0);
    overflow-anchor: none;
  }

  .details--disabled {
    opacity: 0.5;
  }

  .details__header {
    display: flex;
    align-items: center;
    border-radius: inherit;
    padding: var(--sl-spacing-medium);
    user-select: none;
    -webkit-user-select: none;
    cursor: pointer;
  }

  .details__header::-webkit-details-marker {
    display: none;
  }

  .details__header:focus {
    outline: none;
  }

  .details__header:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: calc(1px + var(--sl-focus-ring-offset));
  }

  .details--disabled .details__header {
    cursor: not-allowed;
  }

  .details--disabled .details__header:focus-visible {
    outline: none;
    box-shadow: none;
  }

  .details__summary {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
  }

  .details__summary-icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    transition: var(--sl-transition-medium) rotate ease;
  }

  .details--open .details__summary-icon {
    rotate: 90deg;
  }

  .details--open.details--rtl .details__summary-icon {
    rotate: -90deg;
  }

  .details--open slot[name='expand-icon'],
  .details:not(.details--open) slot[name='collapse-icon'] {
    display: none;
  }

  .details__body {
    overflow: hidden;
  }

  .details__content {
    display: block;
    padding: var(--sl-spacing-medium);
  }
`,SlDetails=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.open=!1,this.disabled=!1}firstUpdated(){this.body.style.height=this.open?"auto":"0",this.open&&(this.details.open=!0),this.detailsObserver=new MutationObserver(nt=>{for(const rt of nt)rt.type==="attributes"&&rt.attributeName==="open"&&(this.details.open?this.show():this.hide())}),this.detailsObserver.observe(this.details,{attributes:!0})}disconnectedCallback(){var nt;super.disconnectedCallback(),(nt=this.detailsObserver)==null||nt.disconnect()}handleSummaryClick(nt){nt.preventDefault(),this.disabled||(this.open?this.hide():this.show(),this.header.focus())}handleSummaryKeyDown(nt){(nt.key==="Enter"||nt.key===" ")&&(nt.preventDefault(),this.open?this.hide():this.show()),(nt.key==="ArrowUp"||nt.key==="ArrowLeft")&&(nt.preventDefault(),this.hide()),(nt.key==="ArrowDown"||nt.key==="ArrowRight")&&(nt.preventDefault(),this.show())}async handleOpenChange(){if(this.open){if(this.details.open=!0,this.emit("sl-show",{cancelable:!0}).defaultPrevented){this.open=!1,this.details.open=!1;return}await stopAnimations(this.body);const{keyframes:rt,options:it}=getAnimation(this,"details.show",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.style.height="auto",this.emit("sl-after-show")}else{if(this.emit("sl-hide",{cancelable:!0}).defaultPrevented){this.details.open=!0,this.open=!0;return}await stopAnimations(this.body);const{keyframes:rt,options:it}=getAnimation(this,"details.hide",{dir:this.localize.dir()});await animateTo(this.body,shimKeyframesHeightAuto(rt,this.body.scrollHeight),it),this.body.style.height="auto",this.details.open=!1,this.emit("sl-after-hide")}}async show(){if(!(this.open||this.disabled))return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!(!this.open||this.disabled))return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){const nt=this.localize.dir()==="rtl";return x$1`
      <details
        part="base"
        class=${e$1({details:!0,"details--open":this.open,"details--disabled":this.disabled,"details--rtl":nt})}
      >
        <summary
          part="header"
          id="header"
          class="details__header"
          role="button"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="content"
          aria-disabled=${this.disabled?"true":"false"}
          tabindex=${this.disabled?"-1":"0"}
          @click=${this.handleSummaryClick}
          @keydown=${this.handleSummaryKeyDown}
        >
          <slot name="summary" part="summary" class="details__summary">${this.summary}</slot>

          <span part="summary-icon" class="details__summary-icon">
            <slot name="expand-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
            <slot name="collapse-icon">
              <sl-icon library="system" name=${nt?"chevron-left":"chevron-right"}></sl-icon>
            </slot>
          </span>
        </summary>

        <div class="details__body" role="region" aria-labelledby="header">
          <slot part="content" id="content" class="details__content"></slot>
        </div>
      </details>
    `}};SlDetails.styles=[component_styles_default,details_styles_default];SlDetails.dependencies={"sl-icon":SlIcon};__decorateClass([e$4(".details")],SlDetails.prototype,"details",2);__decorateClass([e$4(".details__header")],SlDetails.prototype,"header",2);__decorateClass([e$4(".details__body")],SlDetails.prototype,"body",2);__decorateClass([e$4(".details__expand-icon-slot")],SlDetails.prototype,"expandIconSlot",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlDetails.prototype,"open",2);__decorateClass([n$4()],SlDetails.prototype,"summary",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlDetails.prototype,"disabled",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDetails.prototype,"handleOpenChange",1);setDefaultAnimation("details.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:250,easing:"linear"}});setDefaultAnimation("details.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:250,easing:"linear"}});SlDetails.define("sl-details");var drawer_styles_default=i$7`
  :host {
    --size: 25rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .drawer {
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
  }

  .drawer--contained {
    position: absolute;
    z-index: initial;
  }

  .drawer--fixed {
    position: fixed;
    z-index: var(--sl-z-index-drawer);
  }

  .drawer__panel {
    position: absolute;
    display: flex;
    flex-direction: column;
    z-index: 2;
    max-width: 100%;
    max-height: 100%;
    background-color: var(--sl-panel-background-color);
    box-shadow: var(--sl-shadow-x-large);
    overflow: auto;
    pointer-events: all;
  }

  .drawer__panel:focus {
    outline: none;
  }

  .drawer--top .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--end .drawer__panel {
    top: 0;
    inset-inline-end: 0;
    bottom: auto;
    inset-inline-start: auto;
    width: var(--size);
    height: 100%;
  }

  .drawer--bottom .drawer__panel {
    top: auto;
    inset-inline-end: auto;
    bottom: 0;
    inset-inline-start: 0;
    width: 100%;
    height: var(--size);
  }

  .drawer--start .drawer__panel {
    top: 0;
    inset-inline-end: auto;
    bottom: auto;
    inset-inline-start: 0;
    width: var(--size);
    height: 100%;
  }

  .drawer__header {
    display: flex;
  }

  .drawer__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .drawer__header-actions {
    flex-shrink: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: end;
    gap: var(--sl-spacing-2x-small);
    padding: 0 var(--header-spacing);
  }

  .drawer__header-actions sl-icon-button,
  .drawer__header-actions ::slotted(sl-icon-button) {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-medium);
  }

  .drawer__body {
    flex: 1 1 auto;
    display: block;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .drawer__footer {
    text-align: right;
    padding: var(--footer-spacing);
  }

  .drawer__footer ::slotted(sl-button:not(:last-of-type)) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .drawer:not(.drawer--has-footer) .drawer__footer {
    display: none;
  }

  .drawer__overlay {
    display: block;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
    pointer-events: all;
  }

  .drawer--contained .drawer__overlay {
    display: none;
  }

  @media (forced-colors: active) {
    .drawer__panel {
      border: solid 1px var(--sl-color-neutral-0);
    }
  }
`;function uppercaseFirstLetter(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)}var SlDrawer=class extends ShoelaceElement{constructor(){super(...arguments),this.hasSlotController=new HasSlotController(this,"footer"),this.localize=new LocalizeController(this),this.modal=new Modal$1(this),this.open=!1,this.label="",this.placement="end",this.contained=!1,this.noHeader=!1,this.handleDocumentKeyDown=nt=>{this.contained||nt.key==="Escape"&&this.modal.isActive()&&this.open&&(nt.stopImmediatePropagation(),this.requestClose("keyboard"))}}firstUpdated(){this.drawer.hidden=!this.open,this.open&&(this.addOpenListeners(),this.contained||(this.modal.activate(),lockBodyScrolling(this)))}disconnectedCallback(){super.disconnectedCallback(),unlockBodyScrolling(this),this.removeOpenListeners()}requestClose(nt){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:nt}}).defaultPrevented){const it=getAnimation(this,"drawer.denyClose",{dir:this.localize.dir()});animateTo(this.panel,it.keyframes,it.options);return}this.hide()}addOpenListeners(){var nt;"CloseWatcher"in window?((nt=this.closeWatcher)==null||nt.destroy(),this.contained||(this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>this.requestClose("keyboard"))):document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){var nt;document.removeEventListener("keydown",this.handleDocumentKeyDown),(nt=this.closeWatcher)==null||nt.destroy()}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.contained||(this.modal.activate(),lockBodyScrolling(this));const nt=this.querySelector("[autofocus]");nt&&nt.removeAttribute("autofocus"),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]),this.drawer.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(nt?nt.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),nt&&nt.setAttribute("autofocus","")});const rt=getAnimation(this,`drawer.show${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),it=getAnimation(this,"drawer.overlay.show",{dir:this.localize.dir()});await Promise.all([animateTo(this.panel,rt.keyframes,rt.options),animateTo(this.overlay,it.keyframes,it.options)]),this.emit("sl-after-show")}else{blurActiveElement(this),this.emit("sl-hide"),this.removeOpenListeners(),this.contained||(this.modal.deactivate(),unlockBodyScrolling(this)),await Promise.all([stopAnimations(this.drawer),stopAnimations(this.overlay)]);const nt=getAnimation(this,`drawer.hide${uppercaseFirstLetter(this.placement)}`,{dir:this.localize.dir()}),rt=getAnimation(this,"drawer.overlay.hide",{dir:this.localize.dir()});await Promise.all([animateTo(this.overlay,rt.keyframes,rt.options).then(()=>{this.overlay.hidden=!0}),animateTo(this.panel,nt.keyframes,nt.options).then(()=>{this.panel.hidden=!0})]),this.drawer.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1;const it=this.originalTrigger;typeof(it==null?void 0:it.focus)=="function"&&setTimeout(()=>it.focus()),this.emit("sl-after-hide")}}handleNoModalChange(){this.open&&!this.contained&&(this.modal.activate(),lockBodyScrolling(this)),this.open&&this.contained&&(this.modal.deactivate(),unlockBodyScrolling(this))}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}render(){return x$1`
      <div
        part="base"
        class=${e$1({drawer:!0,"drawer--open":this.open,"drawer--top":this.placement==="top","drawer--end":this.placement==="end","drawer--bottom":this.placement==="bottom","drawer--start":this.placement==="start","drawer--contained":this.contained,"drawer--fixed":!this.contained,"drawer--rtl":this.localize.dir()==="rtl","drawer--has-footer":this.hasSlotController.test("footer")})}
      >
        <div part="overlay" class="drawer__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="drawer__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${o$3(this.noHeader?this.label:void 0)}
          aria-labelledby=${o$3(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":x$1`
                <header part="header" class="drawer__header">
                  <h2 part="title" class="drawer__title" id="title">
                    <!-- If there's no label, use an invisible character to prevent the header from collapsing -->
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <div part="header-actions" class="drawer__header-actions">
                    <slot name="header-actions"></slot>
                    <sl-icon-button
                      part="close-button"
                      exportparts="base:close-button__base"
                      class="drawer__close"
                      name="x-lg"
                      label=${this.localize.term("close")}
                      library="system"
                      @click=${()=>this.requestClose("close-button")}
                    ></sl-icon-button>
                  </div>
                </header>
              `}

          <slot part="body" class="drawer__body"></slot>

          <footer part="footer" class="drawer__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};SlDrawer.styles=[component_styles_default,drawer_styles_default];SlDrawer.dependencies={"sl-icon-button":SlIconButton};__decorateClass([e$4(".drawer")],SlDrawer.prototype,"drawer",2);__decorateClass([e$4(".drawer__panel")],SlDrawer.prototype,"panel",2);__decorateClass([e$4(".drawer__overlay")],SlDrawer.prototype,"overlay",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlDrawer.prototype,"open",2);__decorateClass([n$4({reflect:!0})],SlDrawer.prototype,"label",2);__decorateClass([n$4({reflect:!0})],SlDrawer.prototype,"placement",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlDrawer.prototype,"contained",2);__decorateClass([n$4({attribute:"no-header",type:Boolean,reflect:!0})],SlDrawer.prototype,"noHeader",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleOpenChange",1);__decorateClass([watch("contained",{waitUntilFirstUpdate:!0})],SlDrawer.prototype,"handleNoModalChange",1);setDefaultAnimation("drawer.showTop",{keyframes:[{opacity:0,translate:"0 -100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideTop",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 -100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showEnd",{keyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideEnd",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showBottom",{keyframes:[{opacity:0,translate:"0 100%"},{opacity:1,translate:"0 0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideBottom",{keyframes:[{opacity:1,translate:"0 0"},{opacity:0,translate:"0 100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.showStart",{keyframes:[{opacity:0,translate:"-100%"},{opacity:1,translate:"0"}],rtlKeyframes:[{opacity:0,translate:"100%"},{opacity:1,translate:"0"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.hideStart",{keyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"-100%"}],rtlKeyframes:[{opacity:1,translate:"0"},{opacity:0,translate:"100%"}],options:{duration:250,easing:"ease"}});setDefaultAnimation("drawer.denyClose",{keyframes:[{scale:1},{scale:1.01},{scale:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});setDefaultAnimation("drawer.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});SlDrawer.define("sl-drawer");var divider_styles_default=i$7`
  :host {
    --color: var(--sl-panel-border-color);
    --width: var(--sl-panel-border-width);
    --spacing: var(--sl-spacing-medium);
  }

  :host(:not([vertical])) {
    display: block;
    border-top: solid var(--width) var(--color);
    margin: var(--spacing) 0;
  }

  :host([vertical]) {
    display: inline-block;
    height: 100%;
    border-left: solid var(--width) var(--color);
    margin: 0 var(--spacing);
  }
`,SlDivider=class extends ShoelaceElement{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}};SlDivider.styles=[component_styles_default,divider_styles_default];__decorateClass([n$4({type:Boolean,reflect:!0})],SlDivider.prototype,"vertical",2);__decorateClass([watch("vertical")],SlDivider.prototype,"handleVerticalChange",1);SlDivider.define("sl-divider");var dropdown_styles_default=i$7`
  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`,SlDropdown=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1,this.sync=void 0,this.handleKeyDown=nt=>{this.open&&nt.key==="Escape"&&(nt.stopPropagation(),this.hide(),this.focusOnTrigger())},this.handleDocumentKeyDown=nt=>{var rt;if(nt.key==="Escape"&&this.open&&!this.closeWatcher){nt.stopPropagation(),this.focusOnTrigger(),this.hide();return}if(nt.key==="Tab"){if(this.open&&((rt=document.activeElement)==null?void 0:rt.tagName.toLowerCase())==="sl-menu-item"){nt.preventDefault(),this.hide(),this.focusOnTrigger();return}const it=(st,_t)=>{if(!st)return null;const xt=st.closest(_t);if(xt)return xt;const Et=st.getRootNode();return Et instanceof ShadowRoot?it(Et.host,_t):null};setTimeout(()=>{var st;const _t=((st=this.containingElement)==null?void 0:st.getRootNode())instanceof ShadowRoot?getDeepestActiveElement():document.activeElement;(!this.containingElement||it(_t,this.containingElement.tagName.toLowerCase())!==this.containingElement)&&this.hide()})}},this.handleDocumentMouseDown=nt=>{const rt=nt.composedPath();this.containingElement&&!rt.includes(this.containingElement)&&this.hide()},this.handlePanelSelect=nt=>{const rt=nt.target;!this.stayOpenOnSelect&&rt.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}}connectedCallback(){super.connectedCallback(),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){const nt=this.trigger.assignedElements({flatten:!0})[0];typeof(nt==null?void 0:nt.focus)=="function"&&nt.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(nt=>nt.tagName.toLowerCase()==="sl-menu")}handleTriggerClick(){this.open?this.hide():(this.show(),this.focusOnTrigger())}async handleTriggerKeyDown(nt){if([" ","Enter"].includes(nt.key)){nt.preventDefault(),this.handleTriggerClick();return}const rt=this.getMenu();if(rt){const it=rt.getAllItems(),st=it[0],_t=it[it.length-1];["ArrowDown","ArrowUp","Home","End"].includes(nt.key)&&(nt.preventDefault(),this.open||(this.show(),await this.updateComplete),it.length>0&&this.updateComplete.then(()=>{(nt.key==="ArrowDown"||nt.key==="Home")&&(rt.setCurrentItem(st),st.focus()),(nt.key==="ArrowUp"||nt.key==="End")&&(rt.setCurrentItem(_t),_t.focus())}))}}handleTriggerKeyUp(nt){nt.key===" "&&nt.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const rt=this.trigger.assignedElements({flatten:!0}).find(st=>getTabbableBoundary(st).start);let it;if(rt){switch(rt.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":it=rt.button;break;default:it=rt}it.setAttribute("aria-haspopup","true"),it.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,waitForEvent(this,"sl-after-show")}async hide(){if(!!this.open)return this.open=!1,waitForEvent(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){var nt;this.panel.addEventListener("sl-select",this.handlePanelSelect),"CloseWatcher"in window?((nt=this.closeWatcher)==null||nt.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.hide(),this.focusOnTrigger()}):this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){var nt;this.panel&&(this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown),(nt=this.closeWatcher)==null||nt.destroy()}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await stopAnimations(this),this.panel.hidden=!1,this.popup.active=!0;const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.show",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await stopAnimations(this);const{keyframes:nt,options:rt}=getAnimation(this,"dropdown.hide",{dir:this.localize.dir()});await animateTo(this.popup.popup,nt,rt),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return x$1`
      <sl-popup
        part="base"
        exportparts="popup:base__popup"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        sync=${o$3(this.sync?this.sync:void 0)}
        class=${e$1({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <div aria-hidden=${this.open?"false":"true"} aria-labelledby="dropdown">
          <slot part="panel" class="dropdown__panel"></slot>
        </div>
      </sl-popup>
    `}};SlDropdown.styles=[component_styles_default,dropdown_styles_default];SlDropdown.dependencies={"sl-popup":SlPopup};__decorateClass([e$4(".dropdown")],SlDropdown.prototype,"popup",2);__decorateClass([e$4(".dropdown__trigger")],SlDropdown.prototype,"trigger",2);__decorateClass([e$4(".dropdown__panel")],SlDropdown.prototype,"panel",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlDropdown.prototype,"open",2);__decorateClass([n$4({reflect:!0})],SlDropdown.prototype,"placement",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlDropdown.prototype,"disabled",2);__decorateClass([n$4({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],SlDropdown.prototype,"stayOpenOnSelect",2);__decorateClass([n$4({attribute:!1})],SlDropdown.prototype,"containingElement",2);__decorateClass([n$4({type:Number})],SlDropdown.prototype,"distance",2);__decorateClass([n$4({type:Number})],SlDropdown.prototype,"skidding",2);__decorateClass([n$4({type:Boolean})],SlDropdown.prototype,"hoist",2);__decorateClass([n$4({reflect:!0})],SlDropdown.prototype,"sync",2);__decorateClass([watch("open",{waitUntilFirstUpdate:!0})],SlDropdown.prototype,"handleOpenChange",1);setDefaultAnimation("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});setDefaultAnimation("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});SlDropdown.define("sl-dropdown");var menu_styles_default=i$7`
  :host {
    display: block;
    position: relative;
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-x-small) 0;
    overflow: auto;
    overscroll-behavior: none;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,SlMenu=class extends ShoelaceElement{connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}handleClick(nt){const rt=["menuitem","menuitemcheckbox"],it=nt.composedPath(),st=it.find(kt=>{var Lt;return rt.includes(((Lt=kt==null?void 0:kt.getAttribute)==null?void 0:Lt.call(kt,"role"))||"")});if(!st||it.find(kt=>{var Lt;return((Lt=kt==null?void 0:kt.getAttribute)==null?void 0:Lt.call(kt,"role"))==="menu"})!==this)return;const Et=st;Et.type==="checkbox"&&(Et.checked=!Et.checked),this.emit("sl-select",{detail:{item:Et}})}handleKeyDown(nt){if(nt.key==="Enter"||nt.key===" "){const rt=this.getCurrentItem();nt.preventDefault(),nt.stopPropagation(),rt==null||rt.click()}else if(["ArrowDown","ArrowUp","Home","End"].includes(nt.key)){const rt=this.getAllItems(),it=this.getCurrentItem();let st=it?rt.indexOf(it):0;rt.length>0&&(nt.preventDefault(),nt.stopPropagation(),nt.key==="ArrowDown"?st++:nt.key==="ArrowUp"?st--:nt.key==="Home"?st=0:nt.key==="End"&&(st=rt.length-1),st<0&&(st=rt.length-1),st>rt.length-1&&(st=0),this.setCurrentItem(rt[st]),rt[st].focus())}}handleMouseDown(nt){const rt=nt.target;this.isMenuItem(rt)&&this.setCurrentItem(rt)}handleSlotChange(){const nt=this.getAllItems();nt.length>0&&this.setCurrentItem(nt[0])}isMenuItem(nt){var rt;return nt.tagName.toLowerCase()==="sl-menu-item"||["menuitem","menuitemcheckbox","menuitemradio"].includes((rt=nt.getAttribute("role"))!=null?rt:"")}getAllItems(){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(nt=>!(nt.inert||!this.isMenuItem(nt)))}getCurrentItem(){return this.getAllItems().find(nt=>nt.getAttribute("tabindex")==="0")}setCurrentItem(nt){this.getAllItems().forEach(it=>{it.setAttribute("tabindex",it===nt?"0":"-1")})}render(){return x$1`
      <slot
        @slotchange=${this.handleSlotChange}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      ></slot>
    `}};SlMenu.styles=[component_styles_default,menu_styles_default];__decorateClass([e$4("slot")],SlMenu.prototype,"defaultSlot",2);SlMenu.define("sl-menu");var menu_item_styles_default=i$7`
  :host {
    --submenu-offset: -2px;

    display: block;
  }

  :host([inert]) {
    display: none;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    -webkit-user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .menu-item.menu-item--loading {
    outline: none;
    cursor: wait;
  }

  .menu-item.menu-item--loading *:not(sl-spinner) {
    opacity: 0.5;
  }

  .menu-item--loading sl-spinner {
    --indicator-color: currentColor;
    --track-width: 1px;
    position: absolute;
    font-size: 0.75em;
    top: calc(50% - 0.5em);
    left: 0.65rem;
    opacity: 1;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
    display: inline-block;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /* Safe triangle */
  .menu-item--submenu-expanded::after {
    content: '';
    position: fixed;
    z-index: calc(var(--sl-z-index-dropdown) - 1);
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    clip-path: polygon(
      var(--safe-triangle-cursor-x, 0) var(--safe-triangle-cursor-y, 0),
      var(--safe-triangle-submenu-start-x, 0) var(--safe-triangle-submenu-start-y, 0),
      var(--safe-triangle-submenu-end-x, 0) var(--safe-triangle-submenu-end-y, 0)
    );
  }

  :host(:focus-visible) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'], :focus-visible)) .menu-item,
  .menu-item--submenu-expanded {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  :host(:focus-visible) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }

  /* Add elevation and z-index to submenus */
  sl-popup::part(popup) {
    box-shadow: var(--sl-shadow-large);
    z-index: var(--sl-z-index-dropdown);
    margin-left: var(--submenu-offset);
  }

  .menu-item--rtl sl-popup::part(popup) {
    margin-left: calc(-1 * var(--submenu-offset));
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .menu-item,
    :host(:focus-visible) .menu-item {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }

  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const s=(nt,rt)=>{var st;const it=nt._$AN;if(it===void 0)return!1;for(const _t of it)(st=_t._$AO)==null||st.call(_t,rt,!1),s(_t,rt);return!0},o$2=nt=>{let rt,it;do{if((rt=nt._$AM)===void 0)break;it=rt._$AN,it.delete(nt),nt=rt}while((it==null?void 0:it.size)===0)},r=nt=>{for(let rt;rt=nt._$AM;nt=rt){let it=rt._$AN;if(it===void 0)rt._$AN=it=new Set;else if(it.has(nt))break;it.add(nt),c$1(rt)}};function h$1(nt){this._$AN!==void 0?(o$2(this),this._$AM=nt,r(this)):this._$AM=nt}function n$2(nt,rt=!1,it=0){const st=this._$AH,_t=this._$AN;if(_t!==void 0&&_t.size!==0)if(rt)if(Array.isArray(st))for(let xt=it;xt<st.length;xt++)s(st[xt],!1),o$2(st[xt]);else st!=null&&(s(st,!1),o$2(st));else s(this,nt)}const c$1=nt=>{var rt,it;nt.type==t.CHILD&&((rt=nt._$AP)!=null||(nt._$AP=n$2),(it=nt._$AQ)!=null||(nt._$AQ=h$1))};class f$1 extends i$3{constructor(){super(...arguments),this._$AN=void 0}_$AT(rt,it,st){super._$AT(rt,it,st),r(this),this.isConnected=rt._$AU}_$AO(rt,it=!0){var st,_t;rt!==this.isConnected&&(this.isConnected=rt,rt?(st=this.reconnected)==null||st.call(this):(_t=this.disconnected)==null||_t.call(this)),it&&(s(this,rt),o$2(this))}setValue(rt){if(f$2(this._$Ct))this._$Ct._$AI(rt,this);else{const it=[...this._$Ct._$AH];it[this._$Ci]=rt,this._$Ct._$AI(it,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e=()=>new h;class h{}const o$1=new WeakMap,n$1=e$2(class extends f$1{render(nt){return E}update(nt,[rt]){var st;const it=rt!==this.G;return it&&this.G!==void 0&&this.rt(void 0),(it||this.lt!==this.ct)&&(this.G=rt,this.ht=(st=nt.options)==null?void 0:st.host,this.rt(this.ct=nt.element)),E}rt(nt){var rt;if(this.isConnected||(nt=void 0),typeof this.G=="function"){const it=(rt=this.ht)!=null?rt:globalThis;let st=o$1.get(it);st===void 0&&(st=new WeakMap,o$1.set(it,st)),st.get(this.G)!==void 0&&this.G.call(this.ht,void 0),st.set(this.G,nt),nt!==void 0&&this.G.call(this.ht,nt)}else this.G.value=nt}get lt(){var nt,rt,it;return typeof this.G=="function"?(rt=o$1.get((nt=this.ht)!=null?nt:globalThis))==null?void 0:rt.get(this.G):(it=this.G)==null?void 0:it.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var SubmenuController=class{constructor(nt,rt){this.popupRef=e(),this.enableSubmenuTimer=-1,this.isConnected=!1,this.isPopupConnected=!1,this.skidding=0,this.submenuOpenDelay=100,this.handleMouseMove=it=>{this.host.style.setProperty("--safe-triangle-cursor-x",`${it.clientX}px`),this.host.style.setProperty("--safe-triangle-cursor-y",`${it.clientY}px`)},this.handleMouseOver=()=>{this.hasSlotController.test("submenu")&&this.enableSubmenu()},this.handleKeyDown=it=>{switch(it.key){case"Escape":case"Tab":this.disableSubmenu();break;case"ArrowLeft":it.target!==this.host&&(it.preventDefault(),it.stopPropagation(),this.host.focus(),this.disableSubmenu());break;case"ArrowRight":case"Enter":case" ":this.handleSubmenuEntry(it);break}},this.handleClick=it=>{var st;it.target===this.host?(it.preventDefault(),it.stopPropagation()):it.target instanceof Element&&(it.target.tagName==="sl-menu-item"||((st=it.target.role)==null?void 0:st.startsWith("menuitem")))&&this.disableSubmenu()},this.handleFocusOut=it=>{it.relatedTarget&&it.relatedTarget instanceof Element&&this.host.contains(it.relatedTarget)||this.disableSubmenu()},this.handlePopupMouseover=it=>{it.stopPropagation()},this.handlePopupReposition=()=>{const it=this.host.renderRoot.querySelector("slot[name='submenu']"),st=it==null?void 0:it.assignedElements({flatten:!0}).filter(It=>It.localName==="sl-menu")[0],_t=getComputedStyle(this.host).direction==="rtl";if(!st)return;const{left:xt,top:Et,width:kt,height:Lt}=st.getBoundingClientRect();this.host.style.setProperty("--safe-triangle-submenu-start-x",`${_t?xt+kt:xt}px`),this.host.style.setProperty("--safe-triangle-submenu-start-y",`${Et}px`),this.host.style.setProperty("--safe-triangle-submenu-end-x",`${_t?xt+kt:xt}px`),this.host.style.setProperty("--safe-triangle-submenu-end-y",`${Et+Lt}px`)},(this.host=nt).addController(this),this.hasSlotController=rt}hostConnected(){this.hasSlotController.test("submenu")&&!this.host.disabled&&this.addListeners()}hostDisconnected(){this.removeListeners()}hostUpdated(){this.hasSlotController.test("submenu")&&!this.host.disabled?(this.addListeners(),this.updateSkidding()):this.removeListeners()}addListeners(){this.isConnected||(this.host.addEventListener("mousemove",this.handleMouseMove),this.host.addEventListener("mouseover",this.handleMouseOver),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("click",this.handleClick),this.host.addEventListener("focusout",this.handleFocusOut),this.isConnected=!0),this.isPopupConnected||this.popupRef.value&&(this.popupRef.value.addEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.addEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!0)}removeListeners(){this.isConnected&&(this.host.removeEventListener("mousemove",this.handleMouseMove),this.host.removeEventListener("mouseover",this.handleMouseOver),this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("click",this.handleClick),this.host.removeEventListener("focusout",this.handleFocusOut),this.isConnected=!1),this.isPopupConnected&&this.popupRef.value&&(this.popupRef.value.removeEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.removeEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!1)}handleSubmenuEntry(nt){const rt=this.host.renderRoot.querySelector("slot[name='submenu']");if(!rt){console.error("Cannot activate a submenu if no corresponding menuitem can be found.",this);return}let it=null;for(const st of rt.assignedElements())if(it=st.querySelectorAll("sl-menu-item, [role^='menuitem']"),it.length!==0)break;if(!(!it||it.length===0)){it[0].setAttribute("tabindex","0");for(let st=1;st!==it.length;++st)it[st].setAttribute("tabindex","-1");this.popupRef.value&&(nt.preventDefault(),nt.stopPropagation(),this.popupRef.value.active?it[0]instanceof HTMLElement&&it[0].focus():(this.enableSubmenu(!1),this.host.updateComplete.then(()=>{it[0]instanceof HTMLElement&&it[0].focus()}),this.host.requestUpdate()))}}setSubmenuState(nt){this.popupRef.value&&this.popupRef.value.active!==nt&&(this.popupRef.value.active=nt,this.host.requestUpdate())}enableSubmenu(nt=!0){nt?(window.clearTimeout(this.enableSubmenuTimer),this.enableSubmenuTimer=window.setTimeout(()=>{this.setSubmenuState(!0)},this.submenuOpenDelay)):this.setSubmenuState(!0)}disableSubmenu(){window.clearTimeout(this.enableSubmenuTimer),this.setSubmenuState(!1)}updateSkidding(){var nt;if(!((nt=this.host.parentElement)!=null&&nt.computedStyleMap))return;const rt=this.host.parentElement.computedStyleMap(),st=["padding-top","border-top-width","margin-top"].reduce((_t,xt)=>{var Et;const kt=(Et=rt.get(xt))!=null?Et:new CSSUnitValue(0,"px"),It=(kt instanceof CSSUnitValue?kt:new CSSUnitValue(0,"px")).to("px");return _t-It.value},0);this.skidding=st}isExpanded(){return this.popupRef.value?this.popupRef.value.active:!1}renderSubmenu(){const nt=getComputedStyle(this.host).direction==="rtl";return this.isConnected?x$1`
      <sl-popup
        ${n$1(this.popupRef)}
        placement=${nt?"left-start":"right-start"}
        anchor="anchor"
        flip
        flip-fallback-strategy="best-fit"
        skidding="${this.skidding}"
        strategy="fixed"
        auto-size="vertical"
        auto-size-padding="10"
      >
        <slot name="submenu"></slot>
      </sl-popup>
    `:x$1` <slot name="submenu" hidden></slot> `}},SlMenuItem=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.type="normal",this.checked=!1,this.value="",this.loading=!1,this.disabled=!1,this.hasSlotController=new HasSlotController(this,"submenu"),this.submenuController=new SubmenuController(this,this.hasSlotController),this.handleHostClick=nt=>{this.disabled&&(nt.preventDefault(),nt.stopImmediatePropagation())},this.handleMouseOver=nt=>{this.focus(),nt.stopPropagation()}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleHostClick),this.addEventListener("mouseover",this.handleMouseOver)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.handleHostClick),this.removeEventListener("mouseover",this.handleMouseOver)}handleDefaultSlotChange(){const nt=this.getTextLabel();if(typeof this.cachedTextLabel>"u"){this.cachedTextLabel=nt;return}nt!==this.cachedTextLabel&&(this.cachedTextLabel=nt,this.emit("slotchange",{bubbles:!0,composed:!1,cancelable:!1}))}handleCheckedChange(){if(this.checked&&this.type!=="checkbox"){this.checked=!1,console.error('The checked attribute can only be used on menu items with type="checkbox"',this);return}this.type==="checkbox"?this.setAttribute("aria-checked",this.checked?"true":"false"):this.removeAttribute("aria-checked")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleTypeChange(){this.type==="checkbox"?(this.setAttribute("role","menuitemcheckbox"),this.setAttribute("aria-checked",this.checked?"true":"false")):(this.setAttribute("role","menuitem"),this.removeAttribute("aria-checked"))}getTextLabel(){return getTextContent(this.defaultSlot)}isSubmenu(){return this.hasSlotController.test("submenu")}render(){const nt=this.localize.dir()==="rtl",rt=this.submenuController.isExpanded();return x$1`
      <div
        id="anchor"
        part="base"
        class=${e$1({"menu-item":!0,"menu-item--rtl":nt,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--loading":this.loading,"menu-item--has-submenu":this.isSubmenu(),"menu-item--submenu-expanded":rt})}
        ?aria-haspopup="${this.isSubmenu()}"
        ?aria-expanded="${!!rt}"
      >
        <span part="checked-icon" class="menu-item__check">
          <sl-icon name="check" library="system" aria-hidden="true"></sl-icon>
        </span>

        <slot name="prefix" part="prefix" class="menu-item__prefix"></slot>

        <slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot>

        <slot name="suffix" part="suffix" class="menu-item__suffix"></slot>

        <span part="submenu-icon" class="menu-item__chevron">
          <sl-icon name=${nt?"chevron-left":"chevron-right"} library="system" aria-hidden="true"></sl-icon>
        </span>

        ${this.submenuController.renderSubmenu()}
        ${this.loading?x$1` <sl-spinner part="spinner" exportparts="base:spinner__base"></sl-spinner> `:""}
      </div>
    `}};SlMenuItem.styles=[component_styles_default,menu_item_styles_default];SlMenuItem.dependencies={"sl-icon":SlIcon,"sl-popup":SlPopup,"sl-spinner":SlSpinner};__decorateClass([e$4("slot:not([name])")],SlMenuItem.prototype,"defaultSlot",2);__decorateClass([e$4(".menu-item")],SlMenuItem.prototype,"menuItem",2);__decorateClass([n$4()],SlMenuItem.prototype,"type",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlMenuItem.prototype,"checked",2);__decorateClass([n$4()],SlMenuItem.prototype,"value",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlMenuItem.prototype,"loading",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlMenuItem.prototype,"disabled",2);__decorateClass([watch("checked")],SlMenuItem.prototype,"handleCheckedChange",1);__decorateClass([watch("disabled")],SlMenuItem.prototype,"handleDisabledChange",1);__decorateClass([watch("type")],SlMenuItem.prototype,"handleTypeChange",1);SlMenuItem.define("sl-menu-item");var tag_styles_default=i$7`
  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
    -webkit-user-select: none;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--primary:active > sl-icon-button {
    color: var(--sl-color-primary-600);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--success:active > sl-icon-button {
    color: var(--sl-color-success-600);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--neutral:active > sl-icon-button {
    color: var(--sl-color-neutral-600);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--warning:active > sl-icon-button {
    color: var(--sl-color-warning-600);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  .tag--danger:active > sl-icon-button {
    color: var(--sl-color-danger-600);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`,SlTag=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){this.emit("sl-remove")}render(){return x$1`
      <span
        part="base"
        class=${e$1({tag:!0,"tag--primary":this.variant==="primary","tag--success":this.variant==="success","tag--neutral":this.variant==="neutral","tag--warning":this.variant==="warning","tag--danger":this.variant==="danger","tag--text":this.variant==="text","tag--small":this.size==="small","tag--medium":this.size==="medium","tag--large":this.size==="large","tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <slot part="content" class="tag__content"></slot>

        ${this.removable?x$1`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </span>
    `}};SlTag.styles=[component_styles_default,tag_styles_default];SlTag.dependencies={"sl-icon-button":SlIconButton};__decorateClass([n$4({reflect:!0})],SlTag.prototype,"variant",2);__decorateClass([n$4({reflect:!0})],SlTag.prototype,"size",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTag.prototype,"pill",2);__decorateClass([n$4({type:Boolean})],SlTag.prototype,"removable",2);SlTag.define("sl-tag");const _hoisted_1$o={class:"content-path",style:{position:"relative"}},_hoisted_2$g={class:"workspace"},_hoisted_3$d={class:"ws-path"},_hoisted_4$a={class:"breadcrumbs"},_hoisted_5$a=["innerHTML","onClick"],_hoisted_6$7=["innerHTML","onClick"],_hoisted_7$5={style:{display:"flex",height:"100%","align-items":"center"}},_hoisted_8$5={key:0,class:"github-select"},_hoisted_9$4={key:0,slot:"trigger",class:"path-elem"},_hoisted_10$2={key:0,class:"path-elem"},_hoisted_11$2={key:0,slot:"trigger",class:"path-elem"},_hoisted_12$2={key:0,class:"path-elem"},_hoisted_13$2={key:0,slot:"trigger",class:"path-elem"},_hoisted_14$2={key:0,class:"path-elem"},_hoisted_15$2={key:1,class:"dirs"},_hoisted_16$2={id:"add-repo-form",class:"input-validation-pattern"},_hoisted_17$2={id:"add-file-form",class:"input-validation-pattern"},_hoisted_18$2=["innerHTML"],_sfc_main$u=defineComponent({__name:"ContentSelector.ce",props:{contentPath:{type:String},sticky:{type:Boolean,default:!1},mode:{type:String,default:"media"},compact:{type:Boolean}},emits:["accessChanged","addMediaResource","contentPathChanged"],setup(nt,{expose:rt,emit:it}){const st=nt,_t=it;rt({getDirList:Jn,getFile:lr,putFile:cr,repositoryIsWriteable:hr});const xt=new Set(["config.yaml","CNAME","index.html","404.html",".nojekyll"]),Et=ref("");watch$1(Et,()=>{console.log(`contentPath=${toRaw(Et.value)}`),_t("contentPathChanged",Et.value)});const kt=ref(null),Lt=computed(()=>{var Wn;return(Wn=kt==null?void 0:kt.value)==null?void 0:Wn.parentNode});let It,Rt="",Nt=!0;const Bt=ref();watch$1(Bt,()=>{Bt.value&&nn()});const Ft=ref(isMobile()),Yt=ref(""),Zt=ref(),Wt=ref(!1),Kt=ref(!1);watch$1(Yt,()=>{Wt.value=window.localStorage.getItem("gh-auth-token")!==null,Zt.value=new GithubClient(Yt.value||"")}),watch$1(Wt,()=>{Wt||(Rt="",Kt.value=!1)}),watch$1(Kt,()=>{_t("accessChanged",{acct:on.value,repo:ln.value,canUpdate:Kt.value})}),watch$1(Zt,async()=>{cn(),Wt.value&&(Jt.value=await dn(),Rt=await Zt.value.user().then(Wn=>Wn.login),await Zt.value.repos(Rt).then(Wn=>{Wn.find(Hn=>Hn.name==="essays")||Zt.value.createRepository({name:"essays",description:"Juncture visual essays"}),Wn.find(Hn=>Hn.name==="media")||Zt.value.createRepository({name:"media",description:"Juncture media"})}),on.value&&ln.value&&Rt&&Zt.value.isCollaborator(on.value,ln.value,Rt).then(Wn=>Kt.value=Wn))});const Jt=ref([]),on=ref("");watch$1(Jt,()=>{on.value=on.value||(Jt.value.length>0?Jt.value[0].login:null)}),watch$1(on,(Wn,Hn)=>{Hn&&(ln.value=""),Fn().then(nr=>rn.value=nr)});const rn=ref([]),ln=ref("");watch$1(rn,()=>{if(!ln.value&&rn.value.length>0)if(rn.value.length===1)ln.value=rn.value[0].name;else{let Wn=st.mode==="media"?"media":"essays";ln.value=rn.value.find(Hn=>Hn.name===Wn)?Wn:rn.value[0].name}});const gn=ref([]),wn=ref("");watch$1(ln,(Wn,Hn)=>{Hn&&(Cn.value=[]),tr().then(nr=>Ln()),wn.value="",ln.value&&(Wt.value&&on.value&&Zt.value.user().then(nr=>nr.login).then(nr=>ln.value?Zt.value.isCollaborator(on.value,ln.value,nr):!1).then(nr=>Kt.value=nr),ir().then(nr=>gn.value=nr))});let kn;watch$1(gn,async()=>{!kn&&on.value&&ln.value&&(kn=await Zt.value.defaultBranch(on.value,ln.value)),kn&&(wn.value=kn)}),watch$1(wn,()=>{wn.value&&Cn.value&&Pn&&tr().then(Wn=>Ln())});const Cn=ref([]);watch$1(Cn,()=>{wn.value&&tr().then(Wn=>Ln())});let Pn=!0;const An=ref([]);watch$1(An,()=>{Pn=Cn.value.length===0||An.value.length>0}),onMounted(()=>{var Wn;zn(),window.addEventListener("storage",()=>zn()),It=(Wn=Lt==null?void 0:Lt.value)==null?void 0:Wn.querySelector(".workspace-selector")});function cn(Wn=""){var Hn;if(Wn=Wn||st.contentPath||"",Wn){let[nr,sr]=((Hn=Wn.split(":").pop())==null?void 0:Hn.split("?"))||[],pr=sr?Object.fromEntries(sr.split("&").map(kr=>kr.split("="))):{},vr=nr.split("/").filter(kr=>kr);vr.length>0&&(on.value=vr[0]),vr.length>1&&(ln.value=vr[1]),vr.length>2&&(Cn.value=vr.slice(2)),pr.ref&&(wn.value=pr.ref||"main")}}function Ln(){if(on.value&&ln.value){let Wn=`gh:${on.value}/${ln.value}`;Cn.value.length>0&&(Wn+=`/${Cn.value.join("/")}`),wn.value&&wn.value!==kn&&(Wn+=`?ref=${wn.value}`),Et.value=Wn}}async function an(){let Hn=await fetch("https://api.juncture-digital.org/gh-token");if(Hn.ok){let nr=await Hn.text();window.localStorage.setItem("gh-unscoped-token",nr)}}async function zn(){window.localStorage.getItem("gh-unscoped-token")||await an(),Yt.value=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token"),Wt.value=window.localStorage.getItem("gh-auth-token")!==null}async function dn(){return await Promise.all([Zt.value.user(),Zt.value.organizations()]).then(Wn=>Wn.flat())}async function Fn(){return Zt.value.repos(on.value)}async function ir(){return Zt.value.branches(on.value,ln.value)}async function tr(){An.value=[];let Wn=await Zt.value.dirlist(on.value,ln.value,Cn.value.join("/"),wn.value),Hn=Wn.filter(sr=>sr.type==="dir"),nr=Wn.filter(sr=>sr.type==="file"&&!xt.has(sr.name));Nt&&nr.find(sr=>sr.name==="README.md")&&Hn.length===0&&(Cn.value.length===0||Cn.value[Cn.value.length-1]!=="README.md")&&(Cn.value=[...Cn.value,"README.md"]),An.value=[...Hn,...nr]}function Jn(){return An.value}function hr(){return Kt.value}async function lr(Wn){var si;let[Hn,nr]=((si=Wn.split(":").pop())==null?void 0:si.split("?"))||[],sr=nr?Object.fromEntries(nr.split("&").map(ui=>ui.split("="))):{},pr=Hn.split("/").filter(ui=>ui),[vr,kr]=pr.slice(0,2);return Hn=pr.slice(2).filter(ui=>ui).join("/"),Zt.value.getFile(vr,kr,Hn,sr.ref||wn.value)}async function cr(Wn,Hn){var ii;let[nr,sr]=((ii=Wn.split(":").pop())==null?void 0:ii.split("?"))||[],pr=sr?Object.fromEntries(sr.split("&").map(li=>li.split("="))):{},vr=nr.split("/").filter(li=>li),[kr,si]=vr.slice(0,2);nr=vr.slice(2).filter(li=>li).join("/");let ui=pr.ref||wn.value;return Zt.value.putFile(kr,si,nr,Hn,ui)}function Cr(Wn){on.value=Wn.login}function Er(Wn){ln.value=Wn.name}function ar(Wn){wn.value=Wn.name}function Fr(Wn){It.hide(),Nt=!0;let Hn=[...Cn.value];Pn||(Hn=Hn.slice(0,-1)),(Hn.length===0||Hn[Hn.length-1]!==Wn.name)&&(Hn=[...Hn,Wn.name]),Cn.value=Hn}function mr(Wn){It.hide(),Nt=!1,Cn.value=Wn===0?[]:Cn.value.slice(0,Wn)}function xr(Wn){st.mode==="essays"?gr():or(Wn)}function fr(Wn){return Wn.toLowerCase().split("-").map(function(Hn){return Hn.charAt(0).toUpperCase()+Hn.slice(1)}).join(" ")}function gr(){var nr,sr;let Wn=(nr=Lt.value)==null?void 0:nr.querySelector("#add-file-form");Wn.onclick||(Wn.onclick=function(){},Wn.addEventListener("submit",async pr=>{var ii;pr.preventDefault();let vr=(ii=Lt.value)==null?void 0:ii.querySelector("#add-file-input"),kr=[...Cn.value,...vr.value.split("/").filter(li=>li)],si=kr[kr.length-1];kr[kr.length-1].indexOf(".")>0?kr[kr.length-1]=kr[kr.length-1].replace(/readme\.md/,"README.md"):kr.push("README.md");let ui=kr.join("/");si=fr(si),await Zt.value.putFile(on.value,ln.value,ui,`# ${si}

`,wn.value),Cn.value=kr,er()}));let Hn=(sr=Lt.value)==null?void 0:sr.querySelector("#add-file-dialog");Hn.addEventListener("sl-after-show",()=>{var pr;((pr=Lt.value)==null?void 0:pr.querySelector("#add-file-input")).focus()}),Hn.show()}function er(){var Wn,Hn;((Wn=Lt.value)==null?void 0:Wn.querySelector("#add-file-input")).value="",((Hn=Lt.value)==null?void 0:Hn.querySelector("#add-file-dialog")).hide()}function nn(){var Hn;((Hn=Lt.value)==null?void 0:Hn.querySelector("#delete-file-dialog")).show()}function un(){var Hn;((Hn=Lt.value)==null?void 0:Hn.querySelector("#delete-file-dialog")).hide()}async function pn(){var nr,sr;let Wn=(nr=Lt.value)==null?void 0:nr.querySelector("#add-repo-form");Wn.onclick||(Wn.onclick=function(){},Wn.addEventListener("submit",async pr=>{var ui;pr.preventDefault();let kr=((ui=Lt.value)==null?void 0:ui.querySelector("#add-repo-input")).value;(await Zt.value.createRepository({name:kr,org:Rt===on.value?null:on.value})).status===201&&Fn().then(ii=>{ln.value=kr,rn.value=ii}),Rn()}));let Hn=(sr=Lt.value)==null?void 0:sr.querySelector("#add-repo-dialog");Hn.addEventListener("sl-after-show",()=>{var pr;((pr=Lt.value)==null?void 0:pr.querySelector("#add-repo-input")).focus()}),Hn.show()}function Rn(){var Hn,nr;((Hn=Lt.value)==null?void 0:Hn.querySelector("#add-repo-dialog")).hide(),((nr=Lt.value)==null?void 0:nr.querySelector("#add-repo-input")).value=""}async function _n(){let Wn=Cn.value.join("/");await Zt.value.deleteFile(on.value,ln.value,Wn,wn.value),await tr(),mr(Cn.value.length-(An.value.length===0?2:1)),Bt.value=null,un()}function or(Wn){_t("addMediaResource",Wn)}function Vn(){It.open?It.hide():It.show()}return(Wn,Hn)=>{const nr=resolveComponent("sl-icon"),sr=resolveComponent("sl-button"),pr=resolveComponent("sl-tooltip"),vr=resolveComponent("sl-breadcrumb-item"),kr=resolveComponent("sl-icon-button"),si=resolveComponent("sl-menu-item"),ui=resolveComponent("sl-menu"),ii=resolveComponent("sl-dropdown"),li=resolveComponent("sl-breadcrumb"),Ei=resolveComponent("sl-divider"),wi=resolveComponent("sl-drawer"),Ci=resolveComponent("sl-input"),Lr=resolveComponent("sl-dialog");return openBlock(),createElementBlock("div",{ref_key:"root",ref:kt},[createBaseVNode("section",_hoisted_1$o,[createBaseVNode("div",_hoisted_2$g,[createVNode(pr,{content:`${on.value}: ${ln.value} (${wn.value})`,disabled:Ft.value,placement:"bottom"},{default:withCtx(()=>[createVNode(sr,{pill:"",size:"medium",onClick:Vn},{default:withCtx(()=>[createVNode(nr,{slot:"prefix",name:"github",style:{fontSize:"24px"}})]),_:1})]),_:1},8,["content","disabled"]),createBaseVNode("div",_hoisted_3$d,[createBaseVNode("div",_hoisted_4$a,[createVNode(li,null,{default:withCtx(()=>[createVNode(vr,null,{default:withCtx(()=>[createVNode(sr,{pill:"",size:"medium",onClick:Hn[0]||(Hn[0]=Tn=>mr(0))},{default:withCtx(()=>[Hn[1]||(Hn[1]=createTextVNode("/ ")),createVNode(nr,{slot:"prefix",name:"folder2",style:{fontSize:"24px"}})]),_:1,__:[1]})]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.value,(Tn,En)=>(openBlock(),createBlock(vr,{key:`bci-${En}`},{default:withCtx(()=>[En===Cn.value.length-1?(openBlock(),createElementBlock(Fragment,{key:0},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Tn,onClick:Un=>mr(En+1)},null,8,_hoisted_5$a)):(openBlock(),createBlock(sr,{key:1,pill:"",size:"medium",onClick:Un=>mr(En+1)},{default:withCtx(()=>[createTextVNode(toDisplayString(Tn)+" ",1),createVNode(nr,{slot:"prefix",name:"filetype-md",style:{fontSize:"24px"}})]),_:2},1032,["onClick"])),createVNode(ii,{slot:"suffix"},{default:withCtx(()=>[createVNode(kr,{slot:"trigger",name:"caret-down",label:"File actions"}),createVNode(ui,null,{default:withCtx(()=>[createVNode(si,{onClick:()=>Bt.value=Tn},{default:withCtx(()=>[Hn[2]||(Hn[2]=createTextVNode("Delete file")),createVNode(nr,{slot:"prefix",name:"trash"})]),_:2,__:[2]},1032,["onClick"])]),_:2},1024)]),_:2},1024)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",{key:0,class:"path-elem",innerHTML:Tn,onClick:Un=>mr(En+1)},null,8,_hoisted_6$7)):(openBlock(),createBlock(sr,{key:1,pill:"",size:"medium",onClick:Un=>mr(En+1)},{default:withCtx(()=>[createTextVNode(toDisplayString(Tn)+" ",1),createVNode(nr,{slot:"prefix",name:"folder2",style:{fontSize:"24px"}})]),_:2},1032,["onClick"]))],64))]),_:2},1024))),128))]),_:1}),Wt.value&&nt.mode==="media"?(openBlock(),createBlock(pr,{key:0,content:`Add ${st.mode==="media"?"resource":"file"}`,placement:"bottom"},{default:withCtx(()=>[createVNode(sr,{variant:"default",size:nt.mode==="media"?"medium":"small",class:"add-item",name:`Add ${nt.mode==="media"?"resource":"file"}`,circle:"",onClick:xr},{default:withCtx(()=>[createVNode(nr,{name:"plus-lg",label:"Add file"})]),_:1},8,["size","name"])]),_:1},8,["content"])):createCommentVNode("",!0)]),createVNode(wi,{noHeader:"",label:"Workspace",placement:"bottom",contained:"",class:"workspace-selector",style:{"--size":"100%"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$5,[nt.compact?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_8$5,"Select GitHub Repository")),nt.compact?createCommentVNode("",!0):(openBlock(),createBlock(nr,{key:1,name:"chevron-double-right",style:{fontSize:"24px"}})),createVNode(li,{style:{"margin-left":"12px"}},{default:withCtx(()=>[createVNode(vr,null,{default:withCtx(()=>[createVNode(pr,{content:"Github Account",hoist:"",disabled:Ft.value,placement:"left"},{default:withCtx(()=>[Jt.value.length>1?(openBlock(),createBlock(ii,{key:0},{default:withCtx(()=>[nt.compact?(openBlock(),createElementBlock("span",_hoisted_9$4,toDisplayString(on.value),1)):(openBlock(),createBlock(sr,{key:1,slot:"trigger",pill:"",size:"medium",class:"folder"},{default:withCtx(()=>[createTextVNode(toDisplayString(on.value)+" ",1),createVNode(nr,{slot:"prefix",name:"github",style:{fontSize:"24px"}})]),_:1})),createVNode(ui,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Jt.value,(Tn,En)=>(openBlock(),createBlock(si,{key:`acct-${En}`,checked:Tn.login===on.value,onClick:Un=>Cr(Tn),type:"checkbox",innerHTML:Tn.login},null,8,["checked","onClick","innerHTML"]))),128))]),_:1})]),_:1})):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_10$2,toDisplayString(wn.value),1)):(openBlock(),createBlock(sr,{key:1,pill:"",size:"medium",class:"folder"},{default:withCtx(()=>[createTextVNode(toDisplayString(on.value)+" ",1),createVNode(nr,{slot:"prefix",name:"github",style:{fontSize:"24px"}})]),_:1}))],64))]),_:1},8,["disabled"])]),_:1}),createVNode(vr,null,{default:withCtx(()=>[createVNode(pr,{content:"Github Repository",hoist:"",disabled:Ft.value,placement:"left"},{default:withCtx(()=>[rn.value.length>1?(openBlock(),createBlock(ii,{key:0},{default:withCtx(()=>[nt.compact?(openBlock(),createElementBlock("span",_hoisted_11$2,toDisplayString(ln.value),1)):(openBlock(),createBlock(sr,{key:1,slot:"trigger",pill:"",size:"medium"},{default:withCtx(()=>[createTextVNode(toDisplayString(ln.value)+" ",1),createVNode(nr,{slot:"prefix",name:"archive",style:{fontSize:"24px"}})]),_:1})),createVNode(ui,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(rn.value,(Tn,En)=>(openBlock(),createBlock(si,{key:`repo-${En}`,checked:Tn.name===ln.value,onClick:Un=>Er(Tn),type:"checkbox",innerHTML:Tn.name},null,8,["checked","onClick","innerHTML"]))),128)),createVNode(Ei),createVNode(si,{class:"add-repo",onClick:pn},{default:withCtx(()=>[createVNode(nr,{slot:"prefix",name:"plus-lg"}),Hn[3]||(Hn[3]=createTextVNode(" New repository "))]),_:1,__:[3]})]),_:1})]),_:1})):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_12$2,toDisplayString(ln.value),1)):(openBlock(),createBlock(sr,{key:1,pill:"",size:"medium"},{default:withCtx(()=>[createTextVNode(toDisplayString(ln.value)+" ",1),createVNode(nr,{slot:"prefix",name:"archive",style:{fontSize:"24px"}})]),_:1}))],64))]),_:1},8,["disabled"])]),_:1}),createVNode(vr,null,{default:withCtx(()=>[createVNode(pr,{content:"Github Branch",hoist:"",disabled:Ft.value,placement:"left"},{default:withCtx(()=>[gn.value.length>1?(openBlock(),createBlock(ii,{key:0},{default:withCtx(()=>[nt.compact?(openBlock(),createElementBlock("span",_hoisted_13$2,toDisplayString(wn.value),1)):(openBlock(),createBlock(sr,{key:1,slot:"trigger",pill:"",size:"medium"},{default:withCtx(()=>[createTextVNode(toDisplayString(wn.value)+" ",1),createVNode(nr,{slot:"prefix",name:"share",style:{fontSize:"24px"}})]),_:1})),createVNode(ui,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(gn.value,(Tn,En)=>(openBlock(),createBlock(si,{key:`branch-${En}`,checked:Tn.name===wn.value,onClick:Un=>ar(Tn),type:"checkbox",innerHTML:Tn.name},null,8,["checked","onClick","innerHTML"]))),128))]),_:1})]),_:1})):(openBlock(),createElementBlock(Fragment,{key:1},[nt.compact?(openBlock(),createElementBlock("span",_hoisted_14$2,toDisplayString(wn.value),1)):(openBlock(),createBlock(sr,{key:1,pill:"",size:"medium"},{default:withCtx(()=>[createTextVNode(toDisplayString(wn.value)+" ",1),createVNode(nr,{slot:"prefix",name:"share",style:{fontSize:"24px"}})]),_:1}))],64))]),_:1},8,["disabled"])]),_:1})]),_:1})])]),_:1})])]),An.value.filter(Tn=>st.mode==="essays"||Tn.type==="dir").length>0?(openBlock(),createBlock(Ei,{key:0})):createCommentVNode("",!0),An.value.length>0?(openBlock(),createElementBlock("div",_hoisted_15$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(An.value.filter(Tn=>st.mode==="essays"||Tn.type==="dir"),(Tn,En)=>(openBlock(),createBlock(sr,{key:`child-${En}`,onClick:Un=>Fr(Tn),pill:"",size:"small",class:normalizeClass(Tn.type)},{default:withCtx(()=>[createVNode(nr,{slot:"prefix",name:Tn.type==="dir"?"folder2":"file-earmark"},null,8,["name"]),createTextVNode(" "+toDisplayString(Tn.name),1)]),_:2},1032,["onClick","class"]))),128)),Cn.value&&(Cn.value.length===0||Cn.value[Cn.value.length-1].split(".").pop()!=="md")&&st.mode==="essays"?(openBlock(),createBlock(pr,{key:0,content:`Add ${nt.mode==="media"?"resource":"file"}`,placement:"bottom"},{default:withCtx(()=>[createVNode(sr,{variant:"default",size:"small",class:"add-item",name:"`Add file",circle:"",onClick:xr},{default:withCtx(()=>[createVNode(nr,{name:"plus-lg",label:"Add file"})]),_:1})]),_:1},8,["content"])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createVNode(Lr,{id:"add-repo-dialog",label:"Add Repository"},{default:withCtx(()=>[createBaseVNode("form",_hoisted_16$2,[createVNode(Ci,{autocomplete:"off",required:"",id:"add-repo-input",placeholder:"Enter name",pattern:"^[A-z0-9\\-_]+$"}),Hn[6]||(Hn[6]=createBaseVNode("br",null,null,-1)),createVNode(sr,{onClick:Rn},{default:withCtx(()=>Hn[4]||(Hn[4]=[createTextVNode("Cancel")])),_:1,__:[4]}),createVNode(sr,{type:"submit",variant:"primary"},{default:withCtx(()=>Hn[5]||(Hn[5]=[createTextVNode("Add")])),_:1,__:[5]})])]),_:1}),createVNode(Lr,{id:"add-file-dialog",label:"Add File"},{default:withCtx(()=>[createBaseVNode("form",_hoisted_17$2,[createVNode(Ci,{autocomplete:"off",required:"",id:"add-file-input",placeholder:"Enter file path",pattern:"^\\/?([A-z0-9-_+]+\\/)*([A-z0-9\\-]+(\\.(css|md|json|geojson|yaml|yml))?)$"}),Hn[10]||(Hn[10]=createBaseVNode("br",null,null,-1)),createVNode(sr,{onClick:er},{default:withCtx(()=>Hn[7]||(Hn[7]=[createTextVNode("Cancel")])),_:1,__:[7]}),createVNode(sr,{type:"reset",variant:"default"},{default:withCtx(()=>Hn[8]||(Hn[8]=[createTextVNode("Reset")])),_:1,__:[8]}),createVNode(sr,{type:"submit",variant:"primary"},{default:withCtx(()=>Hn[9]||(Hn[9]=[createTextVNode("Add")])),_:1,__:[9]})])]),_:1}),createVNode(Lr,{id:"delete-file-dialog",label:"Confirm file delete"},{default:withCtx(()=>[createBaseVNode("div",null,[Hn[11]||(Hn[11]=createTextVNode("Delete file ")),createBaseVNode("span",{innerHTML:Bt.value},null,8,_hoisted_18$2),Hn[12]||(Hn[12]=createTextVNode("?"))]),createVNode(sr,{slot:"footer",onClick:un},{default:withCtx(()=>Hn[13]||(Hn[13]=[createTextVNode("Cancel")])),_:1,__:[13]}),createVNode(sr,{slot:"footer",variant:"primary",onClick:_n},{default:withCtx(()=>Hn[14]||(Hn[14]=[createTextVNode("Confirm")])),_:1,__:[14]})]),_:1})],512)}}}),_style_1$5=`*{box-sizing:border-box}:host{display:block;width:100%;border:1px solid #444;padding:6px;z-index:9;background-color:#fff}span.path-elem{font-family:Archivo Narrow,Roboto,sans-serif;font-size:1.2rem}.workspace{display:flex;align-items:center}.workspace-selector{display:flex;gap:12px}.workspace-selector div{display:inline-flex;position:relative;padding-left:6px;font-size:1rem}.selectors{display:flex;gap:6px}.ws-path{position:relative;display:flex;align-items:center;width:100%;height:100%;margin:3px}.workspace-selector>sl-icon{vertical-align:middle;padding-right:6px}sl-drawer::part(base),sl-drawer::part(panel),sl-drawer::part(body){padding:0;overflow:visible}.github-select{font-weight:700;font-size:1.2em;color:#5a162e}sl-divider{margin:6px}.values{display:flex;flex-direction:column;gap:1rem}.values>div{display:flex;align-items:center;gap:1rem}.label{font-weight:700}.value{display:inline-block}sl-breadcrumb-item::part(label){font-size:1rem;color:var(--sl-color-primary-600)}.dir-items li{cursor:pointer}.dir-items{height:40vh;overflow-y:scroll}.dir-items li:hover{color:var(--sl-color-primary-600)}sl-icon-button::part(base){padding:0}.content-path{display:flex;flex-direction:column}sl-icon-button{align-self:start;margin-top:6px}sl-menu::part(base){max-height:300px;overflow-y:scroll}.dirs{display:flex;flex-wrap:wrap;gap:6px}.dirs sl-button::part(base){border-radius:12px;font-weight:500;font-family:Archivo Narrow,Roboto,sans-serif;font-size:1rem}sl-button.dir::part(base){background-color:#eee}sl-button.add-item::part(base){background-color:#eee;color:#000}.delete{margin-left:18px}sl-icon-button.delete::part(base){color:red}.add-repo{background-color:#ddd}sl-menu{text-align:left}sl-breadcrumb{display:inline-block}.breadcrumbs{display:flex;align-items:center;gap:12px;padding-left:12px}
`,ContentSelector=_export_sfc(_sfc_main$u,[["styles",[_style_0$o,_style_1$5]]]),_hoisted_1$n={class:"content"},_hoisted_2$f={class:"buttons"},_hoisted_3$c={key:0,class:"caption"},_sfc_main$t=defineComponent({__name:"Entities.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Yt;return(Yt=it==null?void 0:it.value)==null?void 0:Yt.parentNode}),_t=computed(()=>{var Yt,Zt;return(Zt=(Yt=it.value)==null?void 0:Yt.getRootNode())==null?void 0:Zt.host}),xt=computed(()=>{var Yt;return(Yt=st.value)==null?void 0:Yt.querySelector(".content")}),Et=ref({}),kt=ref(null),Lt=computed(()=>{var Yt,Zt;return((Zt=(Yt=kt.value)==null?void 0:Yt.getAttribute("entities"))==null?void 0:Zt.split(/\s/).filter(Wt=>Wt))||[]}),It=ref();watch$1(Lt,()=>{Lt.value.length>0?getEntityData(Lt.value).then(Yt=>{Et.value=Yt,It.value=Lt.value[0]}):(Et.value={},It.value=void 0)}),watch$1(_t,()=>Rt());function Rt(){Bt(),Ft()}const Nt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Bt(){_t.value.classList.add("ve-component"),_t.value.classList.add(Nt),Nt==="full"?_t.value.style.width="100%":(_t.value.style.float=Nt,_t.value.style.width="calc(50% - 16px)"),_t.value.style.width=window.getComputedStyle(_t.value).width,rt.sticky&&makeSticky(_t.value),xt.value.style.width=rt.width||"100%",nextTick(()=>{let Yt=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2));rt.sticky,xt.value.style.width=`${Yt}px`})}function Ft(){kt.value=document.querySelector(".active"),new MutationObserver(Zt=>{Zt.forEach(Wt=>{if(Wt.type==="attributes"){let Kt=Wt.target;Array.from(Kt.classList).indexOf("active")>=0&&(kt.value=Kt)}})}).observe(document,{subtree:!0,attributes:!0})}return(Yt,Zt)=>{const Wt=resolveComponent("sl-button"),Kt=resolveComponent("ve-entity-card");return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$n,[createBaseVNode("div",_hoisted_2$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Lt.value,Jt=>(openBlock(),createBlock(Wt,{key:Jt,onClick:on=>It.value=Jt,pill:"",size:"small",class:normalizeClass({selected:Jt===It.value})},{default:withCtx(()=>{var on;return[createTextVNode(toDisplayString((on=Et.value[Jt])==null?void 0:on.label),1)]}),_:2},1032,["onClick","class"]))),128))]),It.value?(openBlock(),createBlock(Kt,{key:0,qid:It.value},null,8,["qid"])):createCommentVNode("",!0)]),rt.caption&&It.value?(openBlock(),createElementBlock("div",_hoisted_3$c,toDisplayString(rt.caption),1)):createCommentVNode("",!0)],512)}}}),_style_0$m=`*{box-sizing:border-box}.main{margin-bottom:3rem}.buttons{display:flex;flex-wrap:wrap;gap:6px;padding:0 0 12px}.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}sl-button.selected::part(base){background-color:#ddd;font-weight:700}
`,Entities=_export_sfc(_sfc_main$t,[["styles",[_style_0$m]]]),_hoisted_1$m=["innerHTML"],_hoisted_2$e=["innerHTML"],_hoisted_3$b={class:"links"},_hoisted_4$9={key:0,class:"logo",title:"Wikipedia"},_hoisted_5$9=["href"],_hoisted_6$6=["innerHTML"],_sfc_main$s=defineComponent({__name:"EntityCard.ce",props:{qid:{type:String},label:{type:String},description:{type:String},image:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Wt,Kt;return(Kt=(Wt=it.value)==null?void 0:Wt.getRootNode())==null?void 0:Kt.host}),_t=ref(),xt=ref(),Et=ref(),kt=ref(),Lt=ref(),It=ref(),Rt=ref(),Nt=computed(()=>`${st.value.clientWidth*.33}px`);watch$1(It,()=>st.value.style.width="600px"),onMounted(()=>Bt());function Bt(){rt.qid&&_t.value!==rt.qid&&(_t.value=rt.qid),rt.label&&(Et.value=rt.label),rt.description&&(kt.value=rt.description),rt.image&&(It.value=rt.image)}watch$1(xt,()=>{var Wt;Et.value=xt.value.label,kt.value=xt.value.description,It.value=((Wt=xt.value)==null?void 0:Wt.thumbnail)&&`url('${Yt(xt.value.thumbnail)}')`,Rt.value=xt.value.wikipedia,Lt.value=xt.value.summaryText}),watch$1(_t,()=>Ft());async function Ft(){if(_t.value&&(!xt.value||xt.value.id!==rt.qid)){let Wt=await getEntity(_t.value),Kt=await getSummaryText(_t.value);Kt&&(Wt={...Wt,summaryText:Zt(Kt)}),xt.value=Wt}}function Yt(Wt){let Kt=Wt.split("/");return`${Kt.slice(0,-1).join("/")}/${encodeURIComponent(Kt[Kt.length-1])}`}function Zt(Wt){return new DOMParser().parseFromString(Wt,"text/html").children[0].children[1].children[0].innerHTML}return(Wt,Kt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:Et.value},null,8,_hoisted_1$m),createBaseVNode("div",{class:"description",innerHTML:kt.value},null,8,_hoisted_2$e),It.value?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:It.value,width:Nt.value})},null,4)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$b,[Rt.value?(openBlock(),createElementBlock("span",_hoisted_4$9,[createBaseVNode("a",{target:"_blank",href:Rt.value},Kt[0]||(Kt[0]=[createBaseVNode("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/77/Wikipedia_svg_logo.svg"},null,-1)]),8,_hoisted_5$9)])):createCommentVNode("",!0)]),Lt.value?(openBlock(),createElementBlock("p",{key:1,class:"summary",innerHTML:Lt.value},null,8,_hoisted_6$6)):createCommentVNode("",!0)],512))}}),_style_0$l=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border:1px solid #444;border-radius:6px;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;object-fit:cover;background-repeat:no-repeat;background-size:contain;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,EntityCard=_export_sfc(_sfc_main$s,[["styles",[_style_0$l]]]),_hoisted_1$l=["innerHTML"],_sfc_main$r=defineComponent({__name:"Essay.ce",props:{src:{type:String},prefix:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var It,Rt;return(Rt=(It=it.value)==null?void 0:It.getRootNode())==null?void 0:Rt.host}),_t=computed(()=>{var It;return(It=it==null?void 0:it.value)==null?void 0:It.parentNode}),xt=computed(()=>{var It,Rt;return(Rt=(It=st.value)==null?void 0:It.querySelector("pre"))==null?void 0:Rt.textContent}),Et=ref(),kt=ref();watch$1(xt,()=>{let It=xt.value.split(`
`),Rt=[];if(It.forEach(Nt=>{(Nt.trim().length>0||Rt.length>0)&&Rt.push(Nt)}),Rt.length>0){let Nt=(Rt[0].match(/(^\s+)/)||[""])[0].length;Et.value=Rt.map(Bt=>(Bt.match(/(^\s+)/)||[""])[0].length>=Nt?Bt.slice(Nt):Bt).join(`
`)}}),watch$1(Et,()=>Lt()),watch$1(st,()=>{let It=st.value.textContent.split(`
`),Rt=[];if(It.forEach(Nt=>{(Nt.trim().length>0||Rt.length>0)&&Rt.push(Nt)}),Rt.length>0){let Nt=(Rt[0].match(/(^\s+)/)||[""])[0].length;Et.value=Rt.map(Bt=>(Bt.match(/(^\s+)/)||[""])[0].length>=Nt?Bt.slice(Nt):Bt).join(`
`)}});function Lt(){kt.value="",fetch("/html/?inline=true",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:"",markdown:Et.value})}).then(Rt=>Rt.text()).then(Rt=>{let Bt=new DOMParser().parseFromString(Rt,"text/html").children[0].children[1].querySelector("main");Bt&&(Bt.id="juncture"),Bt&&(kt.value=Bt.innerHTML),nextTick(()=>{var Yt;let Ft=(Yt=_t.value)==null?void 0:Yt.querySelector("#juncture");Ft&&observeActive(Ft)})})}return(It,Rt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[kt.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",innerHTML:kt.value},null,8,_hoisted_1$l)):createCommentVNode("",!0)],512))}}),_style_1$4=`[v-cloak]{display:none}*{box-sizing:border-box}#main{font-family:Roboto,sans-serif;margin-top:0}#juncture{padding:12px;font-size:1.2em;line-height:1.3}@media (max-width: 480px){#juncture{padding:0}}
`,Essay=_export_sfc(_sfc_main$r,[["styles",[_style_0$o,_style_1$4]]]),_sfc_main$q=defineComponent({__name:"FAB.ce",props:{color:{type:String,default:"red"},label:{type:String},icon:{type:String},action:{type:String},right:{type:String,default:"35px"},bottom:{type:String,default:"35px"},disabled:{type:Boolean}},emits:["fabClicked"],setup(nt,{emit:rt}){const it=rt,st=ref(null),_t=ref(isMobile()),xt=nt;function Et(){it("fabClicked",xt.action)}return(kt,Lt)=>{const It=resolveComponent("sl-icon"),Rt=resolveComponent("sl-tooltip");return openBlock(),createElementBlock("div",{ref_key:"root",ref:st,class:"fab-wrapper",style:normalizeStyle({right:xt.right,bottom:xt.bottom})},[createVNode(Rt,{content:xt.label,placement:"top",disabled:_t.value||xt.disabled},{default:withCtx(()=>[createBaseVNode("span",{"data-action":"props.action",class:"fab-button",onClick:Et,style:normalizeStyle({visibility:xt.disabled?"hidden":"visible",backgroundColor:xt.color})},[createVNode(It,{name:xt.icon,style:{"font-size":"36px"}},null,8,["name"])],4)]),_:1},8,["content","disabled"])],4)}}}),_style_0$k=`.fab-wrapper{position:absolute;bottom:35px;right:35px}.fab-button{height:56px;width:56px;background-color:red;border-radius:50%;color:#fff;z-index:1;display:flex;align-items:center;justify-content:center;text-decoration:none;opacity:.4}.fab-button:hover{opacity:1;transition:all .4s;cursor:pointer}.fab-button i{font-size:16px;transform:rotate(0);transition:all .4s}
`,FAB=_export_sfc(_sfc_main$q,[["styles",[_style_0$k]]]),_hoisted_1$k=["innerHTML","onClick"],_sfc_main$p=defineComponent({__name:"Footer.ce",props:{sticky:{type:Boolean}},setup(nt){const rt=nt,it={"view-code":{icon:"markdown",label:"View Page Code"}},st=ref([]),_t=ref(null),xt=computed(()=>{var Zt,Wt;return(Wt=(Zt=_t.value)==null?void 0:Zt.getRootNode())==null?void 0:Wt.host}),Et=computed(()=>{var Zt;return(Zt=_t==null?void 0:_t.value)==null?void 0:Zt.parentNode}),kt=ref(!1);watch$1(kt,()=>Lt.open=kt.value);let Lt;const It=ref();watch$1(xt,()=>{var Zt;Lt=(Zt=Et.value)==null?void 0:Zt.querySelector(".page-source-dialog"),Lt.addEventListener("sl-hide",()=>kt.value=!1)}),watch$1(xt,()=>Rt());function Rt(){var Zt;xt.value.style.clear="both",rt.sticky&&Nt(),st.value=Array.from((Zt=xt.value)==null?void 0:Zt.querySelectorAll("li"))}function Nt(){xt.value.classList.add("sticky");let Zt=xt.value.offsetHeight;Zt+=parseInt(window.getComputedStyle(xt.value).getPropertyValue("margin-top")),Zt+=parseInt(window.getComputedStyle(xt.value).getPropertyValue("margin-bottom"));let Wt=document.querySelector("main");Wt&&(Wt.style.paddingBottom=`${Zt}px`),xt.value.style.width=`${xt.value.parentElement.clientWidth}px`,document.body.style.marginBottom="80px"}function Bt(Zt){return Zt?Object.fromEntries(Zt.split(";").filter(Wt=>Wt.trim()).map(Wt=>Wt.split(":").map(Kt=>Kt.trim()))):{}}function Ft(){let Zt=window.PREFIX,Wt=location.pathname.split("/").filter(Kt=>Kt).filter(Kt=>Kt!=="editor").join("/");It.value=Zt&&Wt.indexOf(Zt)!==0?`${Zt}/${Wt}`:location.pathname.split("/").filter(Kt=>Kt).filter(Kt=>Kt!=="editor").join("/"),kt.value=!0}function Yt(Zt,Wt){Zt.innerHTML==="view-code"&&(Wt.stopPropagation(),Ft())}return(Zt,Wt)=>{const Kt=resolveComponent("sl-icon"),Jt=resolveComponent("ve-snippet"),on=resolveComponent("sl-button"),rn=resolveComponent("sl-dialog");return openBlock(),createElementBlock("div",{ref_key:"root",ref:_t,class:"main"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(st.value,(ln,gn)=>(openBlock(),createElementBlock(Fragment,{key:`li-${gn}`},[it[ln.innerHTML]?(openBlock(),createBlock(Kt,{key:0,name:it[ln.innerHTML].icon,label:it[ln.innerHTML].label,onClick:wn=>Yt(ln,wn),style:{"font-size":"24px"}},null,8,["name","label","onClick"])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(ln.className),style:normalizeStyle(Bt(ln.getAttribute("style")||"")),innerHTML:ln.innerHTML,onClick:wn=>Yt(ln,wn)},null,14,_hoisted_1$k))],64))),128)),createVNode(rn,{label:"Page Source",class:"page-source-dialog",style:normalizeStyle({"--width":unref(isMobile)()?"100vw":"80vw"})},{default:withCtx(()=>[It.value?(openBlock(),createBlock(Jt,{key:0,src:It.value,tabs:"markdown,html,wordpress","disable-drag":""},null,8,["src"])):createCommentVNode("",!0),createVNode(on,{slot:"footer",variant:"primary",onClick:Wt[0]||(Wt[0]=ln=>kt.value=!1)},{default:withCtx(()=>Wt[1]||(Wt[1]=[createTextVNode("Close")])),_:1,__:[1]})]),_:1},8,["style"])],512)}}}),_style_0$j=`*{box-sizing:border-box}.main{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:9px 12px;margin:36px auto auto;font-family:Roboto,sans-serif;font-size:.9rem;z-index:100;background-color:#eee;color:#444;border-radius:3px}a,sl-icon{color:#0645ad;text-decoration:none}a:visited{color:#0b0080}a:hover,sl-icon:hover{color:#06e;cursor:pointer}a:active{color:#faa700}a:focus{outline:thin dotted}a:hover,a:active{outline:0}.main.sticky{position:fixed;bottom:0}div{display:flex;align-items:center;gap:12px}.main div{cursor:pointer}img{height:36px;vertical-align:middle}a{color:inherit;text-decoration:none}.logo,.logo img{height:20px}.push{margin-left:auto}sl-dialog::part(panel){color:#444;font-size:medium}
`,Footer=_export_sfc(_sfc_main$p,[["styles",[_style_0$j]]]),_hoisted_1$j=["src","alt"],_sfc_main$o=defineComponent({__name:"GIF.ce",props:{src:{type:String,required:!0},alt:{type:String},initiallyPaused:{type:Boolean},restartOnPlay:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Bt;return(Bt=it==null?void 0:it.value)==null?void 0:Bt.parentNode}),_t=computed(()=>{var Bt;return(Bt=st.value)==null?void 0:Bt.querySelector("#gif")}),xt=ref(!1),Et=ref(!1),kt=ref(),Lt={buttonPlayIconID:"",buttonPauseIconID:"",buttonPlayIconHTML:"",buttonPauseIconHTML:"",inheritClasses:!0,initiallyPaused:!1,restartOnPlay:!1,langPause:"Pause animation:",langPlay:"Play animation:",langPauseAllButton:"Pause all animations",langPlayAllButton:"Play all animations",langMissingAlt:"Animated GIF."};watch$1(_t,()=>{nextTick(()=>It())});function It(){kt.value={...Lt,initiallyPaused:rt.initiallyPaused,restartOnPlay:rt.restartOnPlay},Rt()}function Rt(){let Bt=()=>{xt.value=!0;let Ft;if(Ft=_t.value.src.split("."),Ft=Ft[Ft.length-1].toLowerCase(),Ft=Ft.substring(0,4),Ft==="gif"){const Yt=document.createElement("canvas");let Zt=parseFloat(getComputedStyle(_t.value,null).getPropertyValue("border-left-width")),Wt=parseFloat(getComputedStyle(_t.value,null).getPropertyValue("border-right-width")),Kt=Zt+Wt,Jt=_t.value.getAttribute("width");Jt!==null?(Yt.width=parseInt(Jt),Yt.setAttribute("style","width:"+Jt+"px !important;")):_t.value.clientWidth==0?Yt.width=_t.value.naturalWidth+.5+Kt:Yt.width=_t.value.clientWidth+.5+Kt;const on=_t.value.naturalHeight/_t.value.naturalWidth*Yt.width;if(Yt.height=on+.5,Yt.setAttribute("role","img"),kt.value.inheritClasses===!0){let kn=_t.value.getAttribute("class");kn==null&&(kn=""),Yt.setAttribute("class","gifa11y-canvas "+kn)}else Yt.setAttribute("class","gifa11y-canvas");let rn=_t.value.getAttribute("alt")||kt.value.langMissingAlt;Yt.setAttribute("aria-label",rn);const ln=_t.value.src,gn=window.matchMedia("(prefers-reduced-motion: reduce)");!gn||gn.matches||_t.value.classList.contains("gifa11y-paused")||ln.indexOf("gifa11y-paused")>-1||kt.value.initiallyPaused===!0?_t.value.style.display="none":Yt.style.display="none",Yt.getContext("2d").drawImage(_t.value,0,0,Yt.width,Yt.height),_t.value.after(Yt)}};_t.value.complete?Bt():_t.value.addEventListener("load",()=>{xt.value||nextTick(()=>Bt())})}function Nt(Bt,Ft){Et.value=!Et.value;const Yt=_t.value.nextElementSibling;Et.value?(kt.value.restartOnPlay&&(_t.value.src=rt.src),_t.value.style.display="block",Yt.style.display="none"):(kt.value.restartOnPlay&&(_t.value.src=rt.src),_t.value.style.display="none",Yt.style.display="block"),Ft.preventDefault()}return(Bt,Ft)=>{const Yt=resolveComponent("sl-icon");return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("img",{src:rt.src,i:"",id:"gif",style:{width:"100%"},alt:rt.alt||"Animated GIF",onClick:Ft[0]||(Ft[0]=Zt=>Nt("image",Zt))},null,8,_hoisted_1$j),xt.value?(openBlock(),createBlock(Yt,{key:0,id:"play-button",name:Et.value?"pause-circle":"play-circle","data-state":Et.value?"playing":"paused",style:{"font-size":"100px"},onClick:Ft[1]||(Ft[1]=Zt=>Nt("icon",Zt))},null,8,["name","data-state"])):createCommentVNode("",!0)],512)}}}),_style_0$i=`.main{position:relative}canvas.gifa11y-canvas{object-fit:contain;max-width:100%}#play-button{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);color:#fff;visibility:hidden;background-color:#0006;border-radius:50%}#play-button:hover{cursor:pointer}#play-button[data-state=paused],.main:hover #play-button{visibility:visible}
`,GIF=_export_sfc(_sfc_main$o,[["styles",[_style_0$i]]]),_hoisted_1$i=["innerHTML"],navbarHeight=80,heroHeight=400,_sfc_main$n=defineComponent({__name:"Header.ce",props:{label:{type:String},subtitle:{type:String},logo:{type:String},url:{type:String},contact:{type:String},searchDomain:{type:String},entities:{type:String},sticky:{type:Boolean},background:{type:String},options:{type:String},height:{type:Number},position:{type:String}},setup(nt){const rt=nt,it=/^\w+:/,st=ref(null),_t=computed(()=>{var Yt,Zt;return(Zt=(Yt=st.value)==null?void 0:Yt.getRootNode())==null?void 0:Zt.host}),xt=ref(),Et=ref(),kt=ref([]),Lt=ref(),It=ref(),Rt=ref(),Nt=ref(rt.height||navbarHeight);onMounted(()=>Bt()),onUpdated(()=>Bt());function Bt(){var Yt;kt.value=rt.entities?rt.entities.split(/\s+/).filter(Zt=>Zt):[],rt.background!==void 0&&(isURL(rt.background)||Ft(rt.background))?(Rt.value=rt.background,Nt.value=rt.height||heroHeight):It.value=rt.background||"#444",rt.label&&rt.label!=="static"&&(xt.value=rt.label),st.value&&(st.value.style.height=`${rt.height||navbarHeight}px`),rt.sticky&&_t.value.classList.add("sticky"),Et.value=(Yt=_t.value.querySelector("ul"))==null?void 0:Yt.innerHTML}watch$1(kt,async()=>{kt.value.length>0&&!Lt.value&&(Lt.value=await getEntity(kt.value[0]),Lt.value&&(xt.value=Lt.value.label,Lt.value.pageBanner&&(Rt.value=`https://iiif.juncture-digital.org/wc:${decodeURIComponent(Lt.value.pageBanner.split("/Special:FilePath/").pop()).replace(/\s/,"_")}/manifest.json`,Nt.value=heroHeight)))});function Ft(Yt){return it.test(Yt)}return(Yt,Zt)=>{const Wt=resolveComponent("ve-hero"),Kt=resolveComponent("ve-navbar");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",normalizeProps(guardReactiveProps(Yt.$attrs)),null,16),Rt.value?(openBlock(),createBlock(Wt,{key:0,background:Rt.value,options:rt.options,position:rt.position,sticky:rt.sticky?"":null,height:Nt.value,top:rt.sticky?Nt.value-navbarHeight:0},null,8,["background","options","position","sticky","height","top"])):createCommentVNode("",!0),createVNode(Kt,{ref_key:"navbar",ref:st,label:xt.value,subtitle:rt.subtitle,logo:rt.logo,url:rt.url,sticky:rt.sticky?"":null,"search-domain":rt.searchDomain,contact:rt.contact,height:Nt.value,background:It.value,alpha:.2,offset:Rt.value?navbarHeight:0},{default:withCtx(()=>[Et.value?(openBlock(),createElementBlock("ul",{key:0,innerHTML:Et.value},null,8,_hoisted_1$i)):createCommentVNode("",!0)]),_:1},8,["label","subtitle","logo","url","sticky","search-domain","contact","height","background","offset"])],64)}}}),_style_0$h=`.main{width:100%}
`,Header=_export_sfc(_sfc_main$n,[["styles",[_style_0$h]]]),_sfc_main$m=defineComponent({__name:"Hero.ce",props:{background:{type:String},options:{type:String},position:{type:String,default:"center"},sticky:{type:Boolean,default:!1},height:{type:Number,default:300},top:{type:Number,default:0}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var It,Rt;return(Rt=(It=it.value)==null?void 0:It.getRootNode())==null?void 0:Rt.host}),_t=ref(),xt=ref(),Et=ref(),kt=ref();watch$1(rt,()=>{rt.sticky&&(st.value.style.position="sticky",st.value.style.top="-320px")}),watch$1(st,()=>{xt.value=parseImageOptions(rt.options||""),rt.background&&getManifest(rt.background).then(It=>_t.value=It),st.value.style.height=`${rt.height}px`,rt.sticky&&(st.value.style.position="sticky"),rt.top&&(st.value.style.top=`-${rt.top}px`)}),watch$1(_t,(It,Rt)=>{It!==Rt&&(Et.value=getItemInfo(It))}),watch$1(Et,async(It,Rt)=>{It!==Rt&&(kt.value=It.service?Lt(It.service[0].id||It.service[0]["@id"],xt.value):await imageDataUrl(Et.value.id,xt.value.region,{width:st.value.clientWidth,height:rt.height}))}),watch$1(kt,()=>{st.value.style.backgroundImage=`url("${kt.value}")`,st.value.style.backgroundPosition=rt.position});function Lt(It,Rt){let Nt=Et.value;console.log(Nt);let Bt=Number((Nt.width/Nt.height).toFixed(4)),Ft=Math.min(800,st.value.clientWidth),Yt=Number(Ft/Bt).toFixed(0),Zt=`${Ft},${Yt}`;console.log(Zt);let Wt=`${It.replace(/\/info.json$/,"")}/${Rt.region}/${Zt}/${Rt.rotation}/${Rt.quality}.${Rt.format}`;return console.log(Wt),Wt}return(It,Rt)=>{var Bt;const Nt=resolveComponent("ve-manifest-popup");return openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-hero media-item"},[createVNode(Nt,{manifest:(Bt=_t.value)==null?void 0:Bt.id},null,8,["manifest"])],512)}}}),_style_0$g=`*{box-sizing:border-box}:host{display:block;position:relative;width:100%;z-index:10}.ve-hero{background-repeat:no-repeat;background-size:cover;background-position:center;z-index:8}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,Hero=_export_sfc(_sfc_main$m,[["styles",[_style_0$g]]]),_hoisted_1$h={class:"content"},_hoisted_2$d=["src","width","height"],_sfc_main$l=defineComponent({__name:"IFrame.ce",props:{allow:{type:String},allowfullscreen:{type:Boolean},allowpaymentrequest:{type:Boolean},height:{type:String},loading:{type:String},name:{type:String},referrerpolicy:{type:String},sandbox:{type:String},src:{type:String},srcdoc:{type:String},width:{type:String},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Bt;return(Bt=it==null?void 0:it.value)==null?void 0:Bt.parentNode}),_t=computed(()=>{var Bt,Ft;return(Ft=(Bt=it.value)==null?void 0:Bt.getRootNode())==null?void 0:Ft.host}),xt=computed(()=>{var Bt;return(Bt=st.value)==null?void 0:Bt.querySelector(".content")}),Et=ref(),kt=ref(0),Lt=ref(0),It=rt.position||(isMobile()?"full":rt.right?"right":rt.left?"left":"full");onMounted(()=>Rt());function Rt(){rt.src&&(Et.value=rt.src),Nt()}function Nt(){rt.sticky&&makeSticky(_t.value),_t.value.classList.add("ve-component"),_t.value.classList.add(It),It==="full"?_t.value.style.width="100%":(_t.value.style.float=It,_t.value.style.width="50%"),nextTick(()=>{_t.value.style.width=window.getComputedStyle(_t.value).width,_t.value.style.height=rt.height||window.getComputedStyle(_t.value).width,xt.value.style.width=rt.width||window.getComputedStyle(_t.value).width,xt.value.style.height=rt.height||window.getComputedStyle(_t.value).width,nextTick(()=>{kt.value=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2)),Lt.value=parseInt(window.getComputedStyle(xt.value).height.slice(0,-2))})})}return(Bt,Ft)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$h,[createBaseVNode("iframe",{src:Et.value,width:kt.value,height:Lt.value},null,8,_hoisted_2$d)])],512))}}),_style_0$f=`*{box-sizing:border-box}.main{height:500px}:host{display:block;width:100%;background-color:#fff}.content{margin:auto}iframe{border:none}
`,IFrame=_export_sfc(_sfc_main$l,[["styles",[_style_0$f]]]),_hoisted_1$g=["innerHTML"],_hoisted_2$c=["innerHTML"],_sfc_main$k=defineComponent({__name:"InfoCard.ce",props:{label:{type:String},description:{type:String},image:{type:String},href:{type:String},data:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Nt,Bt;return(Bt=(Nt=it.value)==null?void 0:Nt.getRootNode())==null?void 0:Bt.host}),_t=computed(()=>rt.data?JSON.parse(rt.data):{}),xt=computed(()=>_t.value.label||rt.label),Et=computed(()=>_t.value.description||rt.description),kt=computed(()=>_t.value.image||rt.image);computed(()=>_t.value.href||rt.href);const Lt=computed(()=>kt.value&&`url('${Rt(kt.value)}')`),It=computed(()=>{var Nt;return`${((Nt=st.value)==null?void 0:Nt.clientWidth)*.33}px`});function Rt(Nt){let Bt=Nt.split("/");return`${Bt.slice(0,-1).join("/")}/${encodeURIComponent(Bt[Bt.length-1])}`}return(Nt,Bt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"card",class:"card"},[createBaseVNode("div",{class:"label",innerHTML:xt.value},null,8,_hoisted_1$g),createBaseVNode("div",{class:"description",innerHTML:Et.value},null,8,_hoisted_2$c),kt.value?(openBlock(),createElementBlock("div",{key:0,class:"image",style:normalizeStyle({backgroundImage:Lt.value,width:It.value})},null,4)):createCommentVNode("",!0)],512))}}),_style_0$e=`*{box-sizing:border-box}:host{display:inline-block;width:100%}.card{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto auto 1fr auto;border-radius:6px;min-height:80px;max-height:100px;overflow-y:hidden;background-color:#fff;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.label,.description,.summary,.links{margin:6px;font-size:1rem}.label{grid-area:1 / 1 / 2 / 2;font-size:130%;font-weight:700}.description{grid-area:2 / 1 / 3 / 2;font-size:110%;font-weight:400;height:100%}.summary{grid-area:3 / 1 / 4 / 2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden;line-height:1.2rem;font-weight:300}.spacer{grid-area:4 / 1 / 5 / 2;height:100%}.links{grid-area:5 / 1 / 6 / 2}.image{grid-area:1 / 2 / 6 / 3;height:100%;max-height:100px;object-fit:cover;background-repeat:no-repeat;background-size:cover;background-position:center}.logo img{height:24px;margin-right:12px;cursor:pointer}
`,InfoCard=_export_sfc(_sfc_main$k,[["styles",[_style_0$e]]]),_hoisted_1$f={class:"main"},_hoisted_2$b=["src"],_hoisted_3$a=["innerHTML"],_hoisted_4$8=["innerHTML"],_hoisted_5$8=["href","innerHTML"],_hoisted_6$5={class:"links"},_hoisted_7$4={class:"detail"},_hoisted_8$4={key:0,class:"provider"},_hoisted_9$3={key:0,style:{display:"flex","align-items":"center"}},_hoisted_10$1=["src"],_hoisted_11$1=["href","innerHTML"],_hoisted_12$1={key:1},_hoisted_13$1=["src"],_hoisted_14$1=["href","innerHTML"],_hoisted_15$1={key:1,class:"requiredStatement"},_hoisted_16$1=["innerHTML"],_hoisted_17$1={key:2,class:"rights"},_hoisted_18$1=["href","innerHTML"],_hoisted_19$1={key:3,class:"metadata"},_hoisted_20$1=["innerHTML"],_hoisted_21$1=["innerHTML"],_hoisted_22={key:1},_hoisted_23=["innerHTML"],_hoisted_24={key:4,class:"navDate"},_hoisted_25=["innerHTML"],_hoisted_26={key:5,class:"homepage"},_hoisted_27=["href","innerHTML"],_hoisted_28={key:6,class:"seeAlso"},_hoisted_29=["href","innerHTML"],_hoisted_30={key:7,class:"logo"},_hoisted_31=["href","innerHTML"],_hoisted_32={key:8,class:"imageData"},_hoisted_33=["href","innerHTML"],_hoisted_34=["innerHTML"],_hoisted_35=["innerHTML"],_hoisted_36=["innerHTML"],_sfc_main$j=defineComponent({__name:"Manifest.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null);computed(()=>{var Nt,Bt;return(Bt=(Nt=it.value)==null?void 0:Nt.getRootNode())==null?void 0:Bt.host});const st=ref(null),_t=ref(null);watch$1(st,()=>_t.value=Lt(st.value));const xt=computed(()=>_t.value&&Rt(_t.value));onMounted(()=>Et());function Et(){typeof rt.manifest=="object"?st.value=rt.manifest:getManifest(rt.manifest).then(Nt=>st.value=Nt)}function kt(Nt,Bt="en"){return typeof Nt=="object"&&!Array.isArray(Nt)?Nt[Bt]||Nt.none||Nt[Object.keys(Nt).sort()[0]]:Nt}function Lt(Nt){let Bt={};if(Bt.id=kt(Nt.id),Bt.label=kt(Nt.label),Nt.summary&&(Bt.summary=kt(Nt.summary)),Nt.rights&&(Bt.rights=Nt.rights),Nt.thumbnail&&(Bt.thumbnail=Nt.thumbnail[0].id||Nt.thumbnail),Nt.metadata){Bt.metadata=Nt.metadata.map(Zt=>({label:kt(Zt.label)[0],value:kt(Zt.value)}));let Ft=Bt.metadata.find(Zt=>Zt.label=="source_url");Bt.sourceUrl=Ft?Ft.value[0]:null;let Yt=Bt.metadata.find(Zt=>Zt.label==="depicts");Yt&&(Bt.depicts=Yt.value)}if(Nt.provider&&(Bt.provider=Nt.provider.map(Ft=>{let Yt={label:kt(Ft.label),href:Ft.id};return Ft.logo&&(Yt.logo={src:Ft.logo[0].id}),Yt})),Nt.logo&&(Bt.logo=Nt.logo.map(Ft=>{let Yt={src:typeof Ft=="object"?Ft.id||Ft["@id"]:Ft};return typeof Ft=="object"&&(Ft.width&&(Yt.width=Ft.width),Ft.height&&(Yt.height=Ft.height)),Yt})),Bt.imageData=getItemInfo(Nt),Bt.service=Bt.imageData.service&&`${(Bt.imageData.service[0].id||Bt.imageData.service[0]["@id"]).replace(/\/info\.json$/,"")}/info.json`,Nt.requiredStatement){let Ft=Nt.requiredStatement;Bt.requiredStatement={label:kt(Ft.label),value:kt(Ft.value)}}return Nt.homepage&&(Bt.homepage={label:Nt.homepage.label?kt(Nt.homepage.label):Nt.homepage.id,href:Nt.homepage.id}),Nt.seeAlso&&(Bt.seeAlso=Nt.seeAlso.map(Ft=>({label:Ft.label?kt(Ft.label):Ft.id,href:Ft.id}))),Bt}function It(Nt){navigator.clipboard&&navigator.clipboard.writeText(Nt)}function Rt(Nt){let Bt={cc:{badgeWidth:88,badgeHeight:31,badgeTemplate:'https://licensebuttons.net/l/${this.rightsCode}${this.rightsCode === "publicdomain" ? "" : "/"+this.version}/${this.badgeWidth}x${this.badgeHeight}.png'},rs:{badgeTemplate:"https://rightsstatements.org/files/buttons/${this.rightsCode}.white.svg",backgroundColor:"318ac7"}};const Ft=function(rn,ln){return new Function("return `"+rn+"`;").call(ln)};let Yt=Nt.rights||"",Zt="",[Wt,Kt,Jt,on]=Yt.split("/").slice(2);return Wt==="creativecommons.org"?(Jt=Jt==="zero"?"publicdomain":Jt,Zt=`<img src="${Ft(Bt.cc.badgeTemplate,{...Bt.cc,rightsCode:Jt,version:on})}"/>`):Wt==="rightsstatements.org"&&(Zt=`<div style="display:inline-block;height:25px;padding:3px;background-color:#${Bt.rs.backgroundColor};"><img style="height:100%;" src="${Ft(Bt.rs.badgeTemplate,{...Bt.rs,rightsCode:Jt})}"/></div>`),Zt}return(Nt,Bt)=>{var Ft,Yt,Zt,Wt,Kt,Jt,on,rn,ln,gn,wn,kn,Cn,Pn,An;return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"manifest"},[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("img",{class:"thumbnail",src:(Ft=_t.value)==null?void 0:Ft.thumbnail},null,8,_hoisted_2$b),createBaseVNode("div",{class:"label",innerHTML:(Yt=_t.value)==null?void 0:Yt.label},null,8,_hoisted_3$a),(Zt=_t.value)!=null&&Zt.summary?(openBlock(),createElementBlock("div",{key:0,class:"summary",innerHTML:(Wt=_t.value)==null?void 0:Wt.summary},null,8,_hoisted_4$8)):createCommentVNode("",!0),(Kt=_t.value)!=null&&Kt.rights?(openBlock(),createElementBlock("a",{key:1,href:(Jt=_t.value)==null?void 0:Jt.rights,innerHTML:xt.value},null,8,_hoisted_5$8)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$5,[createBaseVNode("img",{src:"https://juncture-digital.io/juncture/static/images/iiif.png",class:"iiif",alt:"IIIF manifest icon",onClick:Bt[0]||(Bt[0]=cn=>It(st.value.id))})])]),createBaseVNode("div",_hoisted_7$4,[(on=_t.value)!=null&&on.provider?(openBlock(),createElementBlock("div",_hoisted_8$4,[Bt[1]||(Bt[1]=createBaseVNode("span",{class:"label"},"provider",-1)),_t.value.provider.length===1?(openBlock(),createElementBlock("div",_hoisted_9$3,[_t.value.provider[0].logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:_t.value.provider[0].logo.src},null,8,_hoisted_10$1)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:_t.value.provider[0].href,innerHTML:_t.value.provider[0].label},null,8,_hoisted_11$1)])):(openBlock(),createElementBlock("ul",_hoisted_12$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_t.value.provider,(cn,Ln)=>(openBlock(),createElementBlock("li",{key:`provider-${Ln}`},[cn.logo?(openBlock(),createElementBlock("img",{key:0,class:"logo",src:cn.logo.src},null,8,_hoisted_13$1)):createCommentVNode("",!0),createBaseVNode("a",{class:"value",href:cn.href,innerHTML:cn.label},null,8,_hoisted_14$1)]))),128))]))])):createCommentVNode("",!0),(rn=_t.value)!=null&&rn.requiredStatement?(openBlock(),createElementBlock("div",_hoisted_15$1,[createBaseVNode("span",{class:"value",innerHTML:_t.value.requiredStatement.value},null,8,_hoisted_16$1)])):createCommentVNode("",!0),(ln=_t.value)!=null&&ln.rights?(openBlock(),createElementBlock("div",_hoisted_17$1,[Bt[2]||(Bt[2]=createBaseVNode("span",{class:"label"},"Reuse rights",-1)),createBaseVNode("a",{class:"value",href:_t.value.rights,innerHTML:_t.value.rights},null,8,_hoisted_18$1)])):createCommentVNode("",!0),(gn=_t.value)!=null&&gn.metadata?(openBlock(),createElementBlock("div",_hoisted_19$1,[Bt[3]||(Bt[3]=createBaseVNode("span",{class:"label"},"metadata",-1)),createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_t.value.metadata,(cn,Ln)=>(openBlock(),createElementBlock("li",{key:`md-${Ln}`},[createBaseVNode("span",{class:"label",innerHTML:cn.label},null,8,_hoisted_20$1),cn.value.length===1?(openBlock(),createElementBlock("span",{key:0,class:"value",innerHTML:cn.value[0]},null,8,_hoisted_21$1)):(openBlock(),createElementBlock("ul",_hoisted_22,[(openBlock(!0),createElementBlock(Fragment,null,renderList(cn.value,an=>(openBlock(),createElementBlock("li",{class:"value",innerHTML:an},null,8,_hoisted_23))),256))]))]))),128))])])):createCommentVNode("",!0),(wn=_t.value)!=null&&wn.navDate?(openBlock(),createElementBlock("div",_hoisted_24,[Bt[4]||(Bt[4]=createBaseVNode("span",{class:"label"},"navDate",-1)),createBaseVNode("span",{class:"value",innerHTML:_t.value.navDate},null,8,_hoisted_25)])):createCommentVNode("",!0),(kn=_t.value)!=null&&kn.homepage?(openBlock(),createElementBlock("div",_hoisted_26,[Bt[5]||(Bt[5]=createBaseVNode("span",{class:"label"},"homepage",-1)),createBaseVNode("a",{class:"value",href:_t.value.homepage.href,innerHTML:_t.value.homepage.label},null,8,_hoisted_27)])):createCommentVNode("",!0),(Cn=_t.value)!=null&&Cn.seeAlso?(openBlock(),createElementBlock("div",_hoisted_28,[Bt[6]||(Bt[6]=createBaseVNode("span",{class:"label"},"seeAlso",-1)),createBaseVNode("a",{class:"value",href:_t.value.seeAlso[0].href,innerHTML:_t.value.seeAlso[0].label},null,8,_hoisted_29)])):createCommentVNode("",!0),(Pn=_t.value)!=null&&Pn.logo?(openBlock(),createElementBlock("div",_hoisted_30,[Bt[7]||(Bt[7]=createBaseVNode("span",{class:"label"},"logo",-1)),createBaseVNode("a",{class:"value",href:_t.value.logo[0].src,innerHTML:_t.value.logo[0].src},null,8,_hoisted_31)])):createCommentVNode("",!0),(An=_t.value)!=null&&An.imageData?(openBlock(),createElementBlock("div",_hoisted_32,[createBaseVNode("div",null,[Bt[8]||(Bt[8]=createBaseVNode("span",{class:"label"},"source",-1)),createBaseVNode("a",{class:"value",href:_t.value.imageData.id,innerHTML:_t.value.imageData.id.split("/").pop()},null,8,_hoisted_33)]),createBaseVNode("div",null,[Bt[9]||(Bt[9]=createBaseVNode("span",{class:"label"},"format",-1)),createBaseVNode("span",{class:"value",innerHTML:_t.value.imageData.format},null,8,_hoisted_34)]),createBaseVNode("div",null,[Bt[10]||(Bt[10]=createBaseVNode("span",{class:"label"},"width",-1)),createBaseVNode("span",{class:"value",innerHTML:_t.value.imageData.width},null,8,_hoisted_35)]),createBaseVNode("div",null,[Bt[11]||(Bt[11]=createBaseVNode("span",{class:"label"},"height",-1)),createBaseVNode("span",{class:"value",innerHTML:_t.value.imageData.height},null,8,_hoisted_36)])])):createCommentVNode("",!0)])],512)}}}),_style_0$d=`[data-v-57c100e0]{box-sizing:border-box}.manifest[data-v-57c100e0]{width:100%;height:100%;overflow-y:scroll;background-color:#fff}.main[data-v-57c100e0],.detail[data-v-57c100e0]{display:flow-root;margin:6px}.main[data-v-57c100e0]>*{margin-bottom:6px}.detail>div[data-v-57c100e0]{margin-top:12px}.main .label[data-v-57c100e0]{font-size:1.2em;font-weight:700}.thumbnail[data-v-57c100e0]{float:left;max-width:45%;max-height:200px;margin:0 6px 6px 0}.links[data-v-57c100e0]{margin-top:6px}img.iiif[data-v-57c100e0]{height:24px;cursor:copy}ul[data-v-57c100e0]{list-style:none;padding-left:12px;margin-top:0}.detail .label[data-v-57c100e0]{font-size:1.1em;font-weight:700;min-width:80px;margin-right:6px}.detail .label[data-v-57c100e0]:after{content:":"}.detail .value[data-v-57c100e0],.main .label[data-v-57c100e0]{white-space:pre-wrap;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.logo[data-v-57c100e0]{padding-right:6px}img.logo[data-v-57c100e0]{height:40px}.manifest-id[data-v-57c100e0],.manifest-label[data-v-57c100e0],.summary[data-v-57c100e0],.provider[data-v-57c100e0],.rights[data-v-57c100e0],.service[data-v-57c100e0],.imageData div[data-v-57c100e0],.thumbnail[data-v-57c100e0]{display:flex;align-items:flex-start}.metadata>ul[data-v-57c100e0],.requiredStatement ul[data-v-57c100e0]{padding-left:24px}.metadata ul li[data-v-57c100e0],.requiredStatement ul li[data-v-57c100e0]{display:flex}.metadata ul ul[data-v-57c100e0]{padding-left:0}a[data-v-57c100e0]:link,a[data-v-57c100e0]:visited{color:#00e}
`,Manifest=_export_sfc(_sfc_main$j,[["styles",[_style_0$d]],["__scopeId","data-v-57c100e0"]]),_sfc_main$i=defineComponent({__name:"ManifestPopup.ce",props:{manifest:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var _t,xt;return(xt=(_t=it.value)==null?void 0:_t.getRootNode())==null?void 0:xt.host});return watch$1(st,()=>{tippy(st.value,{theme:"light-border",allowHTML:!0,interactive:!0,appendTo:document.body,placement:"bottom-end",arrow:!0,delay:[null,null],onShow:_t=>_t.setContent(`<div class="manifest-popup"><ve-manifest manifest="${rt.manifest}"></ve-manifest></div>`)})}),(_t,xt)=>{const Et=resolveComponent("sl-icon");return openBlock(),createElementBlock("div",{ref_key:"root",ref:it},[createVNode(Et,{id:"tippy",name:"info-circle-fill"})],512)}}}),_style_0$c=`#tippy{width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center}
`,ManifestPopup=_export_sfc(_sfc_main$i,[["styles",[_style_0$c]]]);var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(nt,rt){(function(it,st){st(rt)})(commonjsGlobal$1,function(it){var st="1.9.4";function _t($t){var Vt,tn,mn,In;for(tn=1,mn=arguments.length;tn<mn;tn++){In=arguments[tn];for(Vt in In)$t[Vt]=In[Vt]}return $t}var xt=Object.create||function(){function $t(){}return function(Vt){return $t.prototype=Vt,new $t}}();function Et($t,Vt){var tn=Array.prototype.slice;if($t.bind)return $t.bind.apply($t,tn.call(arguments,1));var mn=tn.call(arguments,2);return function(){return $t.apply(Vt,mn.length?mn.concat(tn.call(arguments)):arguments)}}var kt=0;function Lt($t){return"_leaflet_id"in $t||($t._leaflet_id=++kt),$t._leaflet_id}function It($t,Vt,tn){var mn,In,Qn,Tr;return Tr=function(){mn=!1,In&&(Qn.apply(tn,In),In=!1)},Qn=function(){mn?In=arguments:($t.apply(tn,arguments),setTimeout(Tr,Vt),mn=!0)},Qn}function Rt($t,Vt,tn){var mn=Vt[1],In=Vt[0],Qn=mn-In;return $t===mn&&tn?$t:(($t-In)%Qn+Qn)%Qn+In}function Nt(){return!1}function Bt($t,Vt){if(Vt===!1)return $t;var tn=Math.pow(10,Vt===void 0?6:Vt);return Math.round($t*tn)/tn}function Ft($t){return $t.trim?$t.trim():$t.replace(/^\s+|\s+$/g,"")}function Yt($t){return Ft($t).split(/\s+/)}function Zt($t,Vt){Object.prototype.hasOwnProperty.call($t,"options")||($t.options=$t.options?xt($t.options):{});for(var tn in Vt)$t.options[tn]=Vt[tn];return $t.options}function Wt($t,Vt,tn){var mn=[];for(var In in $t)mn.push(encodeURIComponent(tn?In.toUpperCase():In)+"="+encodeURIComponent($t[In]));return(!Vt||Vt.indexOf("?")===-1?"?":"&")+mn.join("&")}var Kt=/\{ *([\w_ -]+) *\}/g;function Jt($t,Vt){return $t.replace(Kt,function(tn,mn){var In=Vt[mn];if(In===void 0)throw new Error("No value provided for variable "+tn);return typeof In=="function"&&(In=In(Vt)),In})}var on=Array.isArray||function($t){return Object.prototype.toString.call($t)==="[object Array]"};function rn($t,Vt){for(var tn=0;tn<$t.length;tn++)if($t[tn]===Vt)return tn;return-1}var ln="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function gn($t){return window["webkit"+$t]||window["moz"+$t]||window["ms"+$t]}var wn=0;function kn($t){var Vt=+new Date,tn=Math.max(0,16-(Vt-wn));return wn=Vt+tn,window.setTimeout($t,tn)}var Cn=window.requestAnimationFrame||gn("RequestAnimationFrame")||kn,Pn=window.cancelAnimationFrame||gn("CancelAnimationFrame")||gn("CancelRequestAnimationFrame")||function($t){window.clearTimeout($t)};function An($t,Vt,tn){if(tn&&Cn===kn)$t.call(Vt);else return Cn.call(window,Et($t,Vt))}function cn($t){$t&&Pn.call(window,$t)}var Ln={__proto__:null,extend:_t,create:xt,bind:Et,get lastId(){return kt},stamp:Lt,throttle:It,wrapNum:Rt,falseFn:Nt,formatNum:Bt,trim:Ft,splitWords:Yt,setOptions:Zt,getParamString:Wt,template:Jt,isArray:on,indexOf:rn,emptyImageUrl:ln,requestFn:Cn,cancelFn:Pn,requestAnimFrame:An,cancelAnimFrame:cn};function an(){}an.extend=function($t){var Vt=function(){Zt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},tn=Vt.__super__=this.prototype,mn=xt(tn);mn.constructor=Vt,Vt.prototype=mn;for(var In in this)Object.prototype.hasOwnProperty.call(this,In)&&In!=="prototype"&&In!=="__super__"&&(Vt[In]=this[In]);return $t.statics&&_t(Vt,$t.statics),$t.includes&&(zn($t.includes),_t.apply(null,[mn].concat($t.includes))),_t(mn,$t),delete mn.statics,delete mn.includes,mn.options&&(mn.options=tn.options?xt(tn.options):{},_t(mn.options,$t.options)),mn._initHooks=[],mn.callInitHooks=function(){if(!this._initHooksCalled){tn.callInitHooks&&tn.callInitHooks.call(this),this._initHooksCalled=!0;for(var Qn=0,Tr=mn._initHooks.length;Qn<Tr;Qn++)mn._initHooks[Qn].call(this)}},Vt},an.include=function($t){var Vt=this.prototype.options;return _t(this.prototype,$t),$t.options&&(this.prototype.options=Vt,this.mergeOptions($t.options)),this},an.mergeOptions=function($t){return _t(this.prototype.options,$t),this},an.addInitHook=function($t){var Vt=Array.prototype.slice.call(arguments,1),tn=typeof $t=="function"?$t:function(){this[$t].apply(this,Vt)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(tn),this};function zn($t){if(!(typeof L>"u"||!L||!L.Mixin)){$t=on($t)?$t:[$t];for(var Vt=0;Vt<$t.length;Vt++)$t[Vt]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dn={on:function($t,Vt,tn){if(typeof $t=="object")for(var mn in $t)this._on(mn,$t[mn],Vt);else{$t=Yt($t);for(var In=0,Qn=$t.length;In<Qn;In++)this._on($t[In],Vt,tn)}return this},off:function($t,Vt,tn){if(!arguments.length)delete this._events;else if(typeof $t=="object")for(var mn in $t)this._off(mn,$t[mn],Vt);else{$t=Yt($t);for(var In=arguments.length===1,Qn=0,Tr=$t.length;Qn<Tr;Qn++)In?this._off($t[Qn]):this._off($t[Qn],Vt,tn)}return this},_on:function($t,Vt,tn,mn){if(typeof Vt!="function"){console.warn("wrong listener type: "+typeof Vt);return}if(this._listens($t,Vt,tn)===!1){tn===this&&(tn=void 0);var In={fn:Vt,ctx:tn};mn&&(In.once=!0),this._events=this._events||{},this._events[$t]=this._events[$t]||[],this._events[$t].push(In)}},_off:function($t,Vt,tn){var mn,In,Qn;if(!!this._events&&(mn=this._events[$t],!!mn)){if(arguments.length===1){if(this._firingCount)for(In=0,Qn=mn.length;In<Qn;In++)mn[In].fn=Nt;delete this._events[$t];return}if(typeof Vt!="function"){console.warn("wrong listener type: "+typeof Vt);return}var Tr=this._listens($t,Vt,tn);if(Tr!==!1){var jr=mn[Tr];this._firingCount&&(jr.fn=Nt,this._events[$t]=mn=mn.slice()),mn.splice(Tr,1)}}},fire:function($t,Vt,tn){if(!this.listens($t,tn))return this;var mn=_t({},Vt,{type:$t,target:this,sourceTarget:Vt&&Vt.sourceTarget||this});if(this._events){var In=this._events[$t];if(In){this._firingCount=this._firingCount+1||1;for(var Qn=0,Tr=In.length;Qn<Tr;Qn++){var jr=In[Qn],Kr=jr.fn;jr.once&&this.off($t,Kr,jr.ctx),Kr.call(jr.ctx||this,mn)}this._firingCount--}}return tn&&this._propagateEvent(mn),this},listens:function($t,Vt,tn,mn){typeof $t!="string"&&console.warn('"string" type argument expected');var In=Vt;typeof Vt!="function"&&(mn=!!Vt,In=void 0,tn=void 0);var Qn=this._events&&this._events[$t];if(Qn&&Qn.length&&this._listens($t,In,tn)!==!1)return!0;if(mn){for(var Tr in this._eventParents)if(this._eventParents[Tr].listens($t,Vt,tn,mn))return!0}return!1},_listens:function($t,Vt,tn){if(!this._events)return!1;var mn=this._events[$t]||[];if(!Vt)return!!mn.length;tn===this&&(tn=void 0);for(var In=0,Qn=mn.length;In<Qn;In++)if(mn[In].fn===Vt&&mn[In].ctx===tn)return In;return!1},once:function($t,Vt,tn){if(typeof $t=="object")for(var mn in $t)this._on(mn,$t[mn],Vt,!0);else{$t=Yt($t);for(var In=0,Qn=$t.length;In<Qn;In++)this._on($t[In],Vt,tn,!0)}return this},addEventParent:function($t){return this._eventParents=this._eventParents||{},this._eventParents[Lt($t)]=$t,this},removeEventParent:function($t){return this._eventParents&&delete this._eventParents[Lt($t)],this},_propagateEvent:function($t){for(var Vt in this._eventParents)this._eventParents[Vt].fire($t.type,_t({layer:$t.target,propagatedFrom:$t.target},$t),!0)}};dn.addEventListener=dn.on,dn.removeEventListener=dn.clearAllEventListeners=dn.off,dn.addOneTimeEventListener=dn.once,dn.fireEvent=dn.fire,dn.hasEventListeners=dn.listens;var Fn=an.extend(dn);function ir($t,Vt,tn){this.x=tn?Math.round($t):$t,this.y=tn?Math.round(Vt):Vt}var tr=Math.trunc||function($t){return $t>0?Math.floor($t):Math.ceil($t)};ir.prototype={clone:function(){return new ir(this.x,this.y)},add:function($t){return this.clone()._add(Jn($t))},_add:function($t){return this.x+=$t.x,this.y+=$t.y,this},subtract:function($t){return this.clone()._subtract(Jn($t))},_subtract:function($t){return this.x-=$t.x,this.y-=$t.y,this},divideBy:function($t){return this.clone()._divideBy($t)},_divideBy:function($t){return this.x/=$t,this.y/=$t,this},multiplyBy:function($t){return this.clone()._multiplyBy($t)},_multiplyBy:function($t){return this.x*=$t,this.y*=$t,this},scaleBy:function($t){return new ir(this.x*$t.x,this.y*$t.y)},unscaleBy:function($t){return new ir(this.x/$t.x,this.y/$t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=tr(this.x),this.y=tr(this.y),this},distanceTo:function($t){$t=Jn($t);var Vt=$t.x-this.x,tn=$t.y-this.y;return Math.sqrt(Vt*Vt+tn*tn)},equals:function($t){return $t=Jn($t),$t.x===this.x&&$t.y===this.y},contains:function($t){return $t=Jn($t),Math.abs($t.x)<=Math.abs(this.x)&&Math.abs($t.y)<=Math.abs(this.y)},toString:function(){return"Point("+Bt(this.x)+", "+Bt(this.y)+")"}};function Jn($t,Vt,tn){return $t instanceof ir?$t:on($t)?new ir($t[0],$t[1]):$t==null?$t:typeof $t=="object"&&"x"in $t&&"y"in $t?new ir($t.x,$t.y):new ir($t,Vt,tn)}function hr($t,Vt){if(!!$t)for(var tn=Vt?[$t,Vt]:$t,mn=0,In=tn.length;mn<In;mn++)this.extend(tn[mn])}hr.prototype={extend:function($t){var Vt,tn;if(!$t)return this;if($t instanceof ir||typeof $t[0]=="number"||"x"in $t)Vt=tn=Jn($t);else if($t=lr($t),Vt=$t.min,tn=$t.max,!Vt||!tn)return this;return!this.min&&!this.max?(this.min=Vt.clone(),this.max=tn.clone()):(this.min.x=Math.min(Vt.x,this.min.x),this.max.x=Math.max(tn.x,this.max.x),this.min.y=Math.min(Vt.y,this.min.y),this.max.y=Math.max(tn.y,this.max.y)),this},getCenter:function($t){return Jn((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,$t)},getBottomLeft:function(){return Jn(this.min.x,this.max.y)},getTopRight:function(){return Jn(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function($t){var Vt,tn;return typeof $t[0]=="number"||$t instanceof ir?$t=Jn($t):$t=lr($t),$t instanceof hr?(Vt=$t.min,tn=$t.max):Vt=tn=$t,Vt.x>=this.min.x&&tn.x<=this.max.x&&Vt.y>=this.min.y&&tn.y<=this.max.y},intersects:function($t){$t=lr($t);var Vt=this.min,tn=this.max,mn=$t.min,In=$t.max,Qn=In.x>=Vt.x&&mn.x<=tn.x,Tr=In.y>=Vt.y&&mn.y<=tn.y;return Qn&&Tr},overlaps:function($t){$t=lr($t);var Vt=this.min,tn=this.max,mn=$t.min,In=$t.max,Qn=In.x>Vt.x&&mn.x<tn.x,Tr=In.y>Vt.y&&mn.y<tn.y;return Qn&&Tr},isValid:function(){return!!(this.min&&this.max)},pad:function($t){var Vt=this.min,tn=this.max,mn=Math.abs(Vt.x-tn.x)*$t,In=Math.abs(Vt.y-tn.y)*$t;return lr(Jn(Vt.x-mn,Vt.y-In),Jn(tn.x+mn,tn.y+In))},equals:function($t){return $t?($t=lr($t),this.min.equals($t.getTopLeft())&&this.max.equals($t.getBottomRight())):!1}};function lr($t,Vt){return!$t||$t instanceof hr?$t:new hr($t,Vt)}function cr($t,Vt){if(!!$t)for(var tn=Vt?[$t,Vt]:$t,mn=0,In=tn.length;mn<In;mn++)this.extend(tn[mn])}cr.prototype={extend:function($t){var Vt=this._southWest,tn=this._northEast,mn,In;if($t instanceof Er)mn=$t,In=$t;else if($t instanceof cr){if(mn=$t._southWest,In=$t._northEast,!mn||!In)return this}else return $t?this.extend(ar($t)||Cr($t)):this;return!Vt&&!tn?(this._southWest=new Er(mn.lat,mn.lng),this._northEast=new Er(In.lat,In.lng)):(Vt.lat=Math.min(mn.lat,Vt.lat),Vt.lng=Math.min(mn.lng,Vt.lng),tn.lat=Math.max(In.lat,tn.lat),tn.lng=Math.max(In.lng,tn.lng)),this},pad:function($t){var Vt=this._southWest,tn=this._northEast,mn=Math.abs(Vt.lat-tn.lat)*$t,In=Math.abs(Vt.lng-tn.lng)*$t;return new cr(new Er(Vt.lat-mn,Vt.lng-In),new Er(tn.lat+mn,tn.lng+In))},getCenter:function(){return new Er((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Er(this.getNorth(),this.getWest())},getSouthEast:function(){return new Er(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function($t){typeof $t[0]=="number"||$t instanceof Er||"lat"in $t?$t=ar($t):$t=Cr($t);var Vt=this._southWest,tn=this._northEast,mn,In;return $t instanceof cr?(mn=$t.getSouthWest(),In=$t.getNorthEast()):mn=In=$t,mn.lat>=Vt.lat&&In.lat<=tn.lat&&mn.lng>=Vt.lng&&In.lng<=tn.lng},intersects:function($t){$t=Cr($t);var Vt=this._southWest,tn=this._northEast,mn=$t.getSouthWest(),In=$t.getNorthEast(),Qn=In.lat>=Vt.lat&&mn.lat<=tn.lat,Tr=In.lng>=Vt.lng&&mn.lng<=tn.lng;return Qn&&Tr},overlaps:function($t){$t=Cr($t);var Vt=this._southWest,tn=this._northEast,mn=$t.getSouthWest(),In=$t.getNorthEast(),Qn=In.lat>Vt.lat&&mn.lat<tn.lat,Tr=In.lng>Vt.lng&&mn.lng<tn.lng;return Qn&&Tr},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function($t,Vt){return $t?($t=Cr($t),this._southWest.equals($t.getSouthWest(),Vt)&&this._northEast.equals($t.getNorthEast(),Vt)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Cr($t,Vt){return $t instanceof cr?$t:new cr($t,Vt)}function Er($t,Vt,tn){if(isNaN($t)||isNaN(Vt))throw new Error("Invalid LatLng object: ("+$t+", "+Vt+")");this.lat=+$t,this.lng=+Vt,tn!==void 0&&(this.alt=+tn)}Er.prototype={equals:function($t,Vt){if(!$t)return!1;$t=ar($t);var tn=Math.max(Math.abs(this.lat-$t.lat),Math.abs(this.lng-$t.lng));return tn<=(Vt===void 0?1e-9:Vt)},toString:function($t){return"LatLng("+Bt(this.lat,$t)+", "+Bt(this.lng,$t)+")"},distanceTo:function($t){return mr.distance(this,ar($t))},wrap:function(){return mr.wrapLatLng(this)},toBounds:function($t){var Vt=180*$t/40075017,tn=Vt/Math.cos(Math.PI/180*this.lat);return Cr([this.lat-Vt,this.lng-tn],[this.lat+Vt,this.lng+tn])},clone:function(){return new Er(this.lat,this.lng,this.alt)}};function ar($t,Vt,tn){return $t instanceof Er?$t:on($t)&&typeof $t[0]!="object"?$t.length===3?new Er($t[0],$t[1],$t[2]):$t.length===2?new Er($t[0],$t[1]):null:$t==null?$t:typeof $t=="object"&&"lat"in $t?new Er($t.lat,"lng"in $t?$t.lng:$t.lon,$t.alt):Vt===void 0?null:new Er($t,Vt,tn)}var Fr={latLngToPoint:function($t,Vt){var tn=this.projection.project($t),mn=this.scale(Vt);return this.transformation._transform(tn,mn)},pointToLatLng:function($t,Vt){var tn=this.scale(Vt),mn=this.transformation.untransform($t,tn);return this.projection.unproject(mn)},project:function($t){return this.projection.project($t)},unproject:function($t){return this.projection.unproject($t)},scale:function($t){return 256*Math.pow(2,$t)},zoom:function($t){return Math.log($t/256)/Math.LN2},getProjectedBounds:function($t){if(this.infinite)return null;var Vt=this.projection.bounds,tn=this.scale($t),mn=this.transformation.transform(Vt.min,tn),In=this.transformation.transform(Vt.max,tn);return new hr(mn,In)},infinite:!1,wrapLatLng:function($t){var Vt=this.wrapLng?Rt($t.lng,this.wrapLng,!0):$t.lng,tn=this.wrapLat?Rt($t.lat,this.wrapLat,!0):$t.lat,mn=$t.alt;return new Er(tn,Vt,mn)},wrapLatLngBounds:function($t){var Vt=$t.getCenter(),tn=this.wrapLatLng(Vt),mn=Vt.lat-tn.lat,In=Vt.lng-tn.lng;if(mn===0&&In===0)return $t;var Qn=$t.getSouthWest(),Tr=$t.getNorthEast(),jr=new Er(Qn.lat-mn,Qn.lng-In),Kr=new Er(Tr.lat-mn,Tr.lng-In);return new cr(jr,Kr)}},mr=_t({},Fr,{wrapLng:[-180,180],R:6371e3,distance:function($t,Vt){var tn=Math.PI/180,mn=$t.lat*tn,In=Vt.lat*tn,Qn=Math.sin((Vt.lat-$t.lat)*tn/2),Tr=Math.sin((Vt.lng-$t.lng)*tn/2),jr=Qn*Qn+Math.cos(mn)*Math.cos(In)*Tr*Tr,Kr=2*Math.atan2(Math.sqrt(jr),Math.sqrt(1-jr));return this.R*Kr}}),xr=6378137,fr={R:xr,MAX_LATITUDE:85.0511287798,project:function($t){var Vt=Math.PI/180,tn=this.MAX_LATITUDE,mn=Math.max(Math.min(tn,$t.lat),-tn),In=Math.sin(mn*Vt);return new ir(this.R*$t.lng*Vt,this.R*Math.log((1+In)/(1-In))/2)},unproject:function($t){var Vt=180/Math.PI;return new Er((2*Math.atan(Math.exp($t.y/this.R))-Math.PI/2)*Vt,$t.x*Vt/this.R)},bounds:function(){var $t=xr*Math.PI;return new hr([-$t,-$t],[$t,$t])}()};function gr($t,Vt,tn,mn){if(on($t)){this._a=$t[0],this._b=$t[1],this._c=$t[2],this._d=$t[3];return}this._a=$t,this._b=Vt,this._c=tn,this._d=mn}gr.prototype={transform:function($t,Vt){return this._transform($t.clone(),Vt)},_transform:function($t,Vt){return Vt=Vt||1,$t.x=Vt*(this._a*$t.x+this._b),$t.y=Vt*(this._c*$t.y+this._d),$t},untransform:function($t,Vt){return Vt=Vt||1,new ir(($t.x/Vt-this._b)/this._a,($t.y/Vt-this._d)/this._c)}};function er($t,Vt,tn,mn){return new gr($t,Vt,tn,mn)}var nn=_t({},mr,{code:"EPSG:3857",projection:fr,transformation:function(){var $t=.5/(Math.PI*fr.R);return er($t,.5,-$t,.5)}()}),un=_t({},nn,{code:"EPSG:900913"});function pn($t){return document.createElementNS("http://www.w3.org/2000/svg",$t)}function Rn($t,Vt){var tn="",mn,In,Qn,Tr,jr,Kr;for(mn=0,Qn=$t.length;mn<Qn;mn++){for(jr=$t[mn],In=0,Tr=jr.length;In<Tr;In++)Kr=jr[In],tn+=(In?"L":"M")+Kr.x+" "+Kr.y;tn+=Vt?bi.svg?"z":"x":""}return tn||"M0 0"}var _n=document.documentElement.style,or="ActiveXObject"in window,Vn=or&&!document.addEventListener,Wn="msLaunchUri"in navigator&&!("documentMode"in document),Hn=zs("webkit"),nr=zs("android"),sr=zs("android 2")||zs("android 3"),pr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vr=nr&&zs("Google")&&pr<537&&!("AudioNode"in window),kr=!!window.opera,si=!Wn&&zs("chrome"),ui=zs("gecko")&&!Hn&&!kr&&!or,ii=!si&&zs("safari"),li=zs("phantom"),Ei="OTransition"in _n,wi=navigator.platform.indexOf("Win")===0,Ci=or&&"transition"in _n,Lr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!sr,Tn="MozPerspective"in _n,En=!window.L_DISABLE_3D&&(Ci||Lr||Tn)&&!Ei&&!li,Un=typeof orientation<"u"||zs("mobile"),qn=Un&&Hn,_r=Un&&Lr,Zr=!window.PointerEvent&&window.MSPointerEvent,yr=!!(window.PointerEvent||Zr),ni="ontouchstart"in window||!!window.TouchEvent,Ar=!window.L_NO_TOUCH&&(ni||yr),gi=Un&&kr,hi=Un&&ui,Ti=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fi=function(){var $t=!1;try{var Vt=Object.defineProperty({},"passive",{get:function(){$t=!0}});window.addEventListener("testPassiveEventSupport",Nt,Vt),window.removeEventListener("testPassiveEventSupport",Nt,Vt)}catch{}return $t}(),Yi=function(){return!!document.createElement("canvas").getContext}(),Si=!!(document.createElementNS&&pn("svg").createSVGRect),qi=!!Si&&function(){var $t=document.createElement("div");return $t.innerHTML="<svg/>",($t.firstChild&&$t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),uo=!Si&&function(){try{var $t=document.createElement("div");$t.innerHTML='<v:shape adj="1"/>';var Vt=$t.firstChild;return Vt.style.behavior="url(#default#VML)",Vt&&typeof Vt.adj=="object"}catch{return!1}}(),Xi=navigator.platform.indexOf("Mac")===0,Na=navigator.platform.indexOf("Linux")===0;function zs($t){return navigator.userAgent.toLowerCase().indexOf($t)>=0}var bi={ie:or,ielt9:Vn,edge:Wn,webkit:Hn,android:nr,android23:sr,androidStock:vr,opera:kr,chrome:si,gecko:ui,safari:ii,phantom:li,opera12:Ei,win:wi,ie3d:Ci,webkit3d:Lr,gecko3d:Tn,any3d:En,mobile:Un,mobileWebkit:qn,mobileWebkit3d:_r,msPointer:Zr,pointer:yr,touch:Ar,touchNative:ni,mobileOpera:gi,mobileGecko:hi,retina:Ti,passiveEvents:fi,canvas:Yi,svg:Si,vml:uo,inlineSvg:qi,mac:Xi,linux:Na},Zi=bi.msPointer?"MSPointerDown":"pointerdown",$s=bi.msPointer?"MSPointerMove":"pointermove",vs=bi.msPointer?"MSPointerUp":"pointerup",ds=bi.msPointer?"MSPointerCancel":"pointercancel",Ls={touchstart:Zi,touchmove:$s,touchend:vs,touchcancel:ds},Ir={touchstart:_s,touchmove:wo,touchend:wo,touchcancel:wo},Hr={},ri=!1;function Gr($t,Vt,tn){return Vt==="touchstart"&&Oo(),Ir[Vt]?(tn=Ir[Vt].bind(this,tn),$t.addEventListener(Ls[Vt],tn,!1),tn):(console.warn("wrong event specified:",Vt),Nt)}function dr($t,Vt,tn){if(!Ls[Vt]){console.warn("wrong event specified:",Vt);return}$t.removeEventListener(Ls[Vt],tn,!1)}function ei($t){Hr[$t.pointerId]=$t}function ti($t){Hr[$t.pointerId]&&(Hr[$t.pointerId]=$t)}function Bi($t){delete Hr[$t.pointerId]}function Oo(){ri||(document.addEventListener(Zi,ei,!0),document.addEventListener($s,ti,!0),document.addEventListener(vs,Bi,!0),document.addEventListener(ds,Bi,!0),ri=!0)}function wo($t,Vt){if(Vt.pointerType!==(Vt.MSPOINTER_TYPE_MOUSE||"mouse")){Vt.touches=[];for(var tn in Hr)Vt.touches.push(Hr[tn]);Vt.changedTouches=[Vt],$t(Vt)}}function _s($t,Vt){Vt.MSPOINTER_TYPE_TOUCH&&Vt.pointerType===Vt.MSPOINTER_TYPE_TOUCH&&la(Vt),wo($t,Vt)}function fs($t){var Vt={},tn,mn;for(mn in $t)tn=$t[mn],Vt[mn]=tn&&tn.bind?tn.bind($t):tn;return $t=Vt,Vt.type="dblclick",Vt.detail=2,Vt.isTrusted=!1,Vt._simulated=!0,Vt}var zi=200;function Ps($t,Vt){$t.addEventListener("dblclick",Vt);var tn=0,mn;function In(Qn){if(Qn.detail!==1){mn=Qn.detail;return}if(!(Qn.pointerType==="mouse"||Qn.sourceCapabilities&&!Qn.sourceCapabilities.firesTouchEvents)){var Tr=cp(Qn);if(!(Tr.some(function(Kr){return Kr instanceof HTMLLabelElement&&Kr.attributes.for})&&!Tr.some(function(Kr){return Kr instanceof HTMLInputElement||Kr instanceof HTMLSelectElement}))){var jr=Date.now();jr-tn<=zi?(mn++,mn===2&&Vt(fs(Qn))):mn=1,tn=jr}}}return $t.addEventListener("click",In),{dblclick:Vt,simDblclick:In}}function Da($t,Vt){$t.removeEventListener("dblclick",Vt.dblclick),$t.removeEventListener("click",Vt.simDblclick)}var Ga=tu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Hi=tu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ji=Hi==="webkitTransition"||Hi==="OTransition"?Hi+"End":"transitionend";function xo($t){return typeof $t=="string"?document.getElementById($t):$t}function xi($t,Vt){var tn=$t.style[Vt]||$t.currentStyle&&$t.currentStyle[Vt];if((!tn||tn==="auto")&&document.defaultView){var mn=document.defaultView.getComputedStyle($t,null);tn=mn?mn[Vt]:null}return tn==="auto"?null:tn}function Ki($t,Vt,tn){var mn=document.createElement($t);return mn.className=Vt||"",tn&&tn.appendChild(mn),mn}function br($t){var Vt=$t.parentNode;Vt&&Vt.removeChild($t)}function Rl($t){for(;$t.firstChild;)$t.removeChild($t.firstChild)}function Or($t){var Vt=$t.parentNode;Vt&&Vt.lastChild!==$t&&Vt.appendChild($t)}function ea($t){var Vt=$t.parentNode;Vt&&Vt.firstChild!==$t&&Vt.insertBefore($t,Vt.firstChild)}function Oc($t,Vt){if($t.classList!==void 0)return $t.classList.contains(Vt);var tn=Ii($t);return tn.length>0&&new RegExp("(^|\\s)"+Vt+"(\\s|$)").test(tn)}function So($t,Vt){if($t.classList!==void 0)for(var tn=Yt(Vt),mn=0,In=tn.length;mn<In;mn++)$t.classList.add(tn[mn]);else if(!Oc($t,Vt)){var Qn=Ii($t);Ah($t,(Qn?Qn+" ":"")+Vt)}}function oo($t,Vt){$t.classList!==void 0?$t.classList.remove(Vt):Ah($t,Ft((" "+Ii($t)+" ").replace(" "+Vt+" "," ")))}function Ah($t,Vt){$t.className.baseVal===void 0?$t.className=Vt:$t.className.baseVal=Vt}function Ii($t){return $t.correspondingElement&&($t=$t.correspondingElement),$t.className.baseVal===void 0?$t.className:$t.className.baseVal}function ao($t,Vt){"opacity"in $t.style?$t.style.opacity=Vt:"filter"in $t.style&&Yl($t,Vt)}function Yl($t,Vt){var tn=!1,mn="DXImageTransform.Microsoft.Alpha";try{tn=$t.filters.item(mn)}catch{if(Vt===1)return}Vt=Math.round(Vt*100),tn?(tn.Enabled=Vt!==100,tn.Opacity=Vt):$t.style.filter+=" progid:"+mn+"(opacity="+Vt+")"}function tu($t){for(var Vt=document.documentElement.style,tn=0;tn<$t.length;tn++)if($t[tn]in Vt)return $t[tn];return!1}function cc($t,Vt,tn){var mn=Vt||new ir(0,0);$t.style[Ga]=(bi.ie3d?"translate("+mn.x+"px,"+mn.y+"px)":"translate3d("+mn.x+"px,"+mn.y+"px,0)")+(tn?" scale("+tn+")":"")}function Hs($t,Vt){$t._leaflet_pos=Vt,bi.any3d?cc($t,Vt):($t.style.left=Vt.x+"px",$t.style.top=Vt.y+"px")}function $o($t){return $t._leaflet_pos||new ir(0,0)}var Wa,ta,$c;if("onselectstart"in document)Wa=function(){To(window,"selectstart",la)},ta=function(){ho(window,"selectstart",la)};else{var Ba=tu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wa=function(){if(Ba){var $t=document.documentElement.style;$c=$t[Ba],$t[Ba]="none"}},ta=function(){Ba&&(document.documentElement.style[Ba]=$c,$c=void 0)}}function Xl(){To(window,"dragstart",la)}function el(){ho(window,"dragstart",la)}var Yu,nu;function Su($t){for(;$t.tabIndex===-1;)$t=$t.parentNode;!$t.style||(ll(),Yu=$t,nu=$t.style.outlineStyle,$t.style.outlineStyle="none",To(window,"keydown",ll))}function ll(){!Yu||(Yu.style.outlineStyle=nu,Yu=void 0,nu=void 0,ho(window,"keydown",ll))}function cd($t){do $t=$t.parentNode;while((!$t.offsetWidth||!$t.offsetHeight)&&$t!==document.body);return $t}function Lh($t){var Vt=$t.getBoundingClientRect();return{x:Vt.width/$t.offsetWidth||1,y:Vt.height/$t.offsetHeight||1,boundingClientRect:Vt}}var Xu={__proto__:null,TRANSFORM:Ga,TRANSITION:Hi,TRANSITION_END:Ji,get:xo,getStyle:xi,create:Ki,remove:br,empty:Rl,toFront:Or,toBack:ea,hasClass:Oc,addClass:So,removeClass:oo,setClass:Ah,getClass:Ii,setOpacity:ao,testProp:tu,setTransform:cc,setPosition:Hs,getPosition:$o,get disableTextSelection(){return Wa},get enableTextSelection(){return ta},disableImageDrag:Xl,enableImageDrag:el,preventOutline:Su,restoreOutline:ll,getSizedParentNode:cd,getScale:Lh};function To($t,Vt,tn,mn){if(Vt&&typeof Vt=="object")for(var In in Vt)ap($t,In,Vt[In],tn);else{Vt=Yt(Vt);for(var Qn=0,Tr=Vt.length;Qn<Tr;Qn++)ap($t,Vt[Qn],tn,mn)}return this}var uc="_leaflet_events";function ho($t,Vt,tn,mn){if(arguments.length===1)Ml($t),delete $t[uc];else if(Vt&&typeof Vt=="object")for(var In in Vt)ud($t,In,Vt[In],tn);else if(Vt=Yt(Vt),arguments.length===2)Ml($t,function(jr){return rn(Vt,jr)!==-1});else for(var Qn=0,Tr=Vt.length;Qn<Tr;Qn++)ud($t,Vt[Qn],tn,mn);return this}function Ml($t,Vt){for(var tn in $t[uc]){var mn=tn.split(/\d/)[0];(!Vt||Vt(mn))&&ud($t,mn,null,null,tn)}}var sp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ap($t,Vt,tn,mn){var In=Vt+Lt(tn)+(mn?"_"+Lt(mn):"");if($t[uc]&&$t[uc][In])return this;var Qn=function(jr){return tn.call(mn||$t,jr||window.event)},Tr=Qn;!bi.touchNative&&bi.pointer&&Vt.indexOf("touch")===0?Qn=Gr($t,Vt,Qn):bi.touch&&Vt==="dblclick"?Qn=Ps($t,Qn):"addEventListener"in $t?Vt==="touchstart"||Vt==="touchmove"||Vt==="wheel"||Vt==="mousewheel"?$t.addEventListener(sp[Vt]||Vt,Qn,bi.passiveEvents?{passive:!1}:!1):Vt==="mouseenter"||Vt==="mouseleave"?(Qn=function(jr){jr=jr||window.event,Kl($t,jr)&&Tr(jr)},$t.addEventListener(sp[Vt],Qn,!1)):$t.addEventListener(Vt,Tr,!1):$t.attachEvent("on"+Vt,Qn),$t[uc]=$t[uc]||{},$t[uc][In]=Qn}function ud($t,Vt,tn,mn,In){In=In||Vt+Lt(tn)+(mn?"_"+Lt(mn):"");var Qn=$t[uc]&&$t[uc][In];if(!Qn)return this;!bi.touchNative&&bi.pointer&&Vt.indexOf("touch")===0?dr($t,Vt,Qn):bi.touch&&Vt==="dblclick"?Da($t,Qn):"removeEventListener"in $t?$t.removeEventListener(sp[Vt]||Vt,Qn,!1):$t.detachEvent("on"+Vt,Qn),$t[uc][In]=null}function Zu($t){return $t.stopPropagation?$t.stopPropagation():$t.originalEvent?$t.originalEvent._stopped=!0:$t.cancelBubble=!0,this}function lp($t){return ap($t,"wheel",Zu),this}function Zl($t){return To($t,"mousedown touchstart dblclick contextmenu",Zu),$t._leaflet_disable_click=!0,this}function la($t){return $t.preventDefault?$t.preventDefault():$t.returnValue=!1,this}function Cu($t){return la($t),Zu($t),this}function cp($t){if($t.composedPath)return $t.composedPath();for(var Vt=[],tn=$t.target;tn;)Vt.push(tn),tn=tn.parentNode;return Vt}function yg($t,Vt){if(!Vt)return new ir($t.clientX,$t.clientY);var tn=Lh(Vt),mn=tn.boundingClientRect;return new ir(($t.clientX-mn.left)/tn.x-Vt.clientLeft,($t.clientY-mn.top)/tn.y-Vt.clientTop)}var Om=bi.linux&&bi.chrome?window.devicePixelRatio:bi.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function vg($t){return bi.edge?$t.wheelDeltaY/2:$t.deltaY&&$t.deltaMode===0?-$t.deltaY/Om:$t.deltaY&&$t.deltaMode===1?-$t.deltaY*20:$t.deltaY&&$t.deltaMode===2?-$t.deltaY*60:$t.deltaX||$t.deltaZ?0:$t.wheelDelta?($t.wheelDeltaY||$t.wheelDelta)/2:$t.detail&&Math.abs($t.detail)<32765?-$t.detail*20:$t.detail?$t.detail/-32765*60:0}function Kl($t,Vt){var tn=Vt.relatedTarget;if(!tn)return!0;try{for(;tn&&tn!==$t;)tn=tn.parentNode}catch{return!1}return tn!==$t}var cl={__proto__:null,on:To,off:ho,stopPropagation:Zu,disableScrollPropagation:lp,disableClickPropagation:Zl,preventDefault:la,stop:Cu,getPropagationPath:cp,getMousePosition:yg,getWheelDelta:vg,isExternalTarget:Kl,addListener:To,removeListener:ho},Qd=Fn.extend({run:function($t,Vt,tn,mn){this.stop(),this._el=$t,this._inProgress=!0,this._duration=tn||.25,this._easeOutPower=1/Math.max(mn||.5,.2),this._startPos=$o($t),this._offset=Vt.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=An(this._animate,this),this._step()},_step:function($t){var Vt=+new Date-this._startTime,tn=this._duration*1e3;Vt<tn?this._runFrame(this._easeOut(Vt/tn),$t):(this._runFrame(1),this._complete())},_runFrame:function($t,Vt){var tn=this._startPos.add(this._offset.multiplyBy($t));Vt&&tn._round(),Hs(this._el,tn),this.fire("step")},_complete:function(){cn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function($t){return 1-Math.pow(1-$t,this._easeOutPower)}}),hs=Fn.extend({options:{crs:nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function($t,Vt){Vt=Zt(this,Vt),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer($t),this._initLayout(),this._onResize=Et(this._onResize,this),this._initEvents(),Vt.maxBounds&&this.setMaxBounds(Vt.maxBounds),Vt.zoom!==void 0&&(this._zoom=this._limitZoom(Vt.zoom)),Vt.center&&Vt.zoom!==void 0&&this.setView(ar(Vt.center),Vt.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Hi&&bi.any3d&&!bi.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),To(this._proxy,Ji,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function($t,Vt,tn){if(Vt=Vt===void 0?this._zoom:this._limitZoom(Vt),$t=this._limitCenter(ar($t),Vt,this.options.maxBounds),tn=tn||{},this._stop(),this._loaded&&!tn.reset&&tn!==!0){tn.animate!==void 0&&(tn.zoom=_t({animate:tn.animate},tn.zoom),tn.pan=_t({animate:tn.animate,duration:tn.duration},tn.pan));var mn=this._zoom!==Vt?this._tryAnimatedZoom&&this._tryAnimatedZoom($t,Vt,tn.zoom):this._tryAnimatedPan($t,tn.pan);if(mn)return clearTimeout(this._sizeTimer),this}return this._resetView($t,Vt,tn.pan&&tn.pan.noMoveStart),this},setZoom:function($t,Vt){return this._loaded?this.setView(this.getCenter(),$t,{zoom:Vt}):(this._zoom=$t,this)},zoomIn:function($t,Vt){return $t=$t||(bi.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+$t,Vt)},zoomOut:function($t,Vt){return $t=$t||(bi.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-$t,Vt)},setZoomAround:function($t,Vt,tn){var mn=this.getZoomScale(Vt),In=this.getSize().divideBy(2),Qn=$t instanceof ir?$t:this.latLngToContainerPoint($t),Tr=Qn.subtract(In).multiplyBy(1-1/mn),jr=this.containerPointToLatLng(In.add(Tr));return this.setView(jr,Vt,{zoom:tn})},_getBoundsCenterZoom:function($t,Vt){Vt=Vt||{},$t=$t.getBounds?$t.getBounds():Cr($t);var tn=Jn(Vt.paddingTopLeft||Vt.padding||[0,0]),mn=Jn(Vt.paddingBottomRight||Vt.padding||[0,0]),In=this.getBoundsZoom($t,!1,tn.add(mn));if(In=typeof Vt.maxZoom=="number"?Math.min(Vt.maxZoom,In):In,In===1/0)return{center:$t.getCenter(),zoom:In};var Qn=mn.subtract(tn).divideBy(2),Tr=this.project($t.getSouthWest(),In),jr=this.project($t.getNorthEast(),In),Kr=this.unproject(Tr.add(jr).divideBy(2).add(Qn),In);return{center:Kr,zoom:In}},fitBounds:function($t,Vt){if($t=Cr($t),!$t.isValid())throw new Error("Bounds are not valid.");var tn=this._getBoundsCenterZoom($t,Vt);return this.setView(tn.center,tn.zoom,Vt)},fitWorld:function($t){return this.fitBounds([[-90,-180],[90,180]],$t)},panTo:function($t,Vt){return this.setView($t,this._zoom,{pan:Vt})},panBy:function($t,Vt){if($t=Jn($t).round(),Vt=Vt||{},!$t.x&&!$t.y)return this.fire("moveend");if(Vt.animate!==!0&&!this.getSize().contains($t))return this._resetView(this.unproject(this.project(this.getCenter()).add($t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qd,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),Vt.noMoveStart||this.fire("movestart"),Vt.animate!==!1){So(this._mapPane,"leaflet-pan-anim");var tn=this._getMapPanePos().subtract($t).round();this._panAnim.run(this._mapPane,tn,Vt.duration||.25,Vt.easeLinearity)}else this._rawPanBy($t),this.fire("move").fire("moveend");return this},flyTo:function($t,Vt,tn){if(tn=tn||{},tn.animate===!1||!bi.any3d)return this.setView($t,Vt,tn);this._stop();var mn=this.project(this.getCenter()),In=this.project($t),Qn=this.getSize(),Tr=this._zoom;$t=ar($t),Vt=Vt===void 0?Tr:Vt;var jr=Math.max(Qn.x,Qn.y),Kr=jr*this.getZoomScale(Tr,Vt),ci=In.distanceTo(mn)||1,Mi=1.42,fo=Mi*Mi;function Ro(ua){var Ed=ua?-1:1,Og=ua?Kr:jr,Vh=Kr*Kr-jr*jr+Ed*fo*fo*ci*ci,vf=2*Og*fo*ci,Sd=Vh/vf,_f=Math.sqrt(Sd*Sd+1)-Sd,sh=_f<1e-9?-18:Math.log(_f);return sh}function tl(ua){return(Math.exp(ua)-Math.exp(-ua))/2}function ca(ua){return(Math.exp(ua)+Math.exp(-ua))/2}function nl(ua){return tl(ua)/ca(ua)}var hl=Ro(0);function Lu(ua){return jr*(ca(hl)/ca(hl+Mi*ua))}function Ig(ua){return jr*(ca(hl)*nl(hl+Mi*ua)-tl(hl))/fo}function xp(ua){return 1-Math.pow(1-ua,1.5)}var ih=Date.now(),oh=(Ro(1)-hl)/Mi,wp=tn.duration?1e3*tn.duration:1e3*oh*.8;function su(){var ua=(Date.now()-ih)/wp,Ed=xp(ua)*oh;ua<=1?(this._flyToFrame=An(su,this),this._move(this.unproject(mn.add(In.subtract(mn).multiplyBy(Ig(Ed)/ci)),Tr),this.getScaleZoom(jr/Lu(Ed),Tr),{flyTo:!0})):this._move($t,Vt)._moveEnd(!0)}return this._moveStart(!0,tn.noMoveStart),su.call(this),this},flyToBounds:function($t,Vt){var tn=this._getBoundsCenterZoom($t,Vt);return this.flyTo(tn.center,tn.zoom,Vt)},setMaxBounds:function($t){return $t=Cr($t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),$t.isValid()?(this.options.maxBounds=$t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function($t){var Vt=this.options.minZoom;return this.options.minZoom=$t,this._loaded&&Vt!==$t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom($t):this},setMaxZoom:function($t){var Vt=this.options.maxZoom;return this.options.maxZoom=$t,this._loaded&&Vt!==$t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom($t):this},panInsideBounds:function($t,Vt){this._enforcingBounds=!0;var tn=this.getCenter(),mn=this._limitCenter(tn,this._zoom,Cr($t));return tn.equals(mn)||this.panTo(mn,Vt),this._enforcingBounds=!1,this},panInside:function($t,Vt){Vt=Vt||{};var tn=Jn(Vt.paddingTopLeft||Vt.padding||[0,0]),mn=Jn(Vt.paddingBottomRight||Vt.padding||[0,0]),In=this.project(this.getCenter()),Qn=this.project($t),Tr=this.getPixelBounds(),jr=lr([Tr.min.add(tn),Tr.max.subtract(mn)]),Kr=jr.getSize();if(!jr.contains(Qn)){this._enforcingBounds=!0;var ci=Qn.subtract(jr.getCenter()),Mi=jr.extend(Qn).getSize().subtract(Kr);In.x+=ci.x<0?-Mi.x:Mi.x,In.y+=ci.y<0?-Mi.y:Mi.y,this.panTo(this.unproject(In),Vt),this._enforcingBounds=!1}return this},invalidateSize:function($t){if(!this._loaded)return this;$t=_t({animate:!1,pan:!0},$t===!0?{animate:!0}:$t);var Vt=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var tn=this.getSize(),mn=Vt.divideBy(2).round(),In=tn.divideBy(2).round(),Qn=mn.subtract(In);return!Qn.x&&!Qn.y?this:($t.animate&&$t.pan?this.panBy(Qn):($t.pan&&this._rawPanBy(Qn),this.fire("move"),$t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Et(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:Vt,newSize:tn}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function($t){if($t=this._locateOptions=_t({timeout:1e4,watch:!1},$t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var Vt=Et(this._handleGeolocationResponse,this),tn=Et(this._handleGeolocationError,this);return $t.watch?this._locationWatchId=navigator.geolocation.watchPosition(Vt,tn,$t):navigator.geolocation.getCurrentPosition(Vt,tn,$t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function($t){if(!!this._container._leaflet_id){var Vt=$t.code,tn=$t.message||(Vt===1?"permission denied":Vt===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:Vt,message:"Geolocation error: "+tn+"."})}},_handleGeolocationResponse:function($t){if(!!this._container._leaflet_id){var Vt=$t.coords.latitude,tn=$t.coords.longitude,mn=new Er(Vt,tn),In=mn.toBounds($t.coords.accuracy*2),Qn=this._locateOptions;if(Qn.setView){var Tr=this.getBoundsZoom(In);this.setView(mn,Qn.maxZoom?Math.min(Tr,Qn.maxZoom):Tr)}var jr={latlng:mn,bounds:In,timestamp:$t.timestamp};for(var Kr in $t.coords)typeof $t.coords[Kr]=="number"&&(jr[Kr]=$t.coords[Kr]);this.fire("locationfound",jr)}},addHandler:function($t,Vt){if(!Vt)return this;var tn=this[$t]=new Vt(this);return this._handlers.push(tn),this.options[$t]&&tn.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),br(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(cn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var $t;for($t in this._layers)this._layers[$t].remove();for($t in this._panes)br(this._panes[$t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function($t,Vt){var tn="leaflet-pane"+($t?" leaflet-"+$t.replace("Pane","")+"-pane":""),mn=Ki("div",tn,Vt||this._mapPane);return $t&&(this._panes[$t]=mn),mn},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var $t=this.getPixelBounds(),Vt=this.unproject($t.getBottomLeft()),tn=this.unproject($t.getTopRight());return new cr(Vt,tn)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function($t,Vt,tn){$t=Cr($t),tn=Jn(tn||[0,0]);var mn=this.getZoom()||0,In=this.getMinZoom(),Qn=this.getMaxZoom(),Tr=$t.getNorthWest(),jr=$t.getSouthEast(),Kr=this.getSize().subtract(tn),ci=lr(this.project(jr,mn),this.project(Tr,mn)).getSize(),Mi=bi.any3d?this.options.zoomSnap:1,fo=Kr.x/ci.x,Ro=Kr.y/ci.y,tl=Vt?Math.max(fo,Ro):Math.min(fo,Ro);return mn=this.getScaleZoom(tl,mn),Mi&&(mn=Math.round(mn/(Mi/100))*(Mi/100),mn=Vt?Math.ceil(mn/Mi)*Mi:Math.floor(mn/Mi)*Mi),Math.max(In,Math.min(Qn,mn))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ir(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function($t,Vt){var tn=this._getTopLeftPoint($t,Vt);return new hr(tn,tn.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function($t){return this.options.crs.getProjectedBounds($t===void 0?this.getZoom():$t)},getPane:function($t){return typeof $t=="string"?this._panes[$t]:$t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function($t,Vt){var tn=this.options.crs;return Vt=Vt===void 0?this._zoom:Vt,tn.scale($t)/tn.scale(Vt)},getScaleZoom:function($t,Vt){var tn=this.options.crs;Vt=Vt===void 0?this._zoom:Vt;var mn=tn.zoom($t*tn.scale(Vt));return isNaN(mn)?1/0:mn},project:function($t,Vt){return Vt=Vt===void 0?this._zoom:Vt,this.options.crs.latLngToPoint(ar($t),Vt)},unproject:function($t,Vt){return Vt=Vt===void 0?this._zoom:Vt,this.options.crs.pointToLatLng(Jn($t),Vt)},layerPointToLatLng:function($t){var Vt=Jn($t).add(this.getPixelOrigin());return this.unproject(Vt)},latLngToLayerPoint:function($t){var Vt=this.project(ar($t))._round();return Vt._subtract(this.getPixelOrigin())},wrapLatLng:function($t){return this.options.crs.wrapLatLng(ar($t))},wrapLatLngBounds:function($t){return this.options.crs.wrapLatLngBounds(Cr($t))},distance:function($t,Vt){return this.options.crs.distance(ar($t),ar(Vt))},containerPointToLayerPoint:function($t){return Jn($t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function($t){return Jn($t).add(this._getMapPanePos())},containerPointToLatLng:function($t){var Vt=this.containerPointToLayerPoint(Jn($t));return this.layerPointToLatLng(Vt)},latLngToContainerPoint:function($t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ar($t)))},mouseEventToContainerPoint:function($t){return yg($t,this._container)},mouseEventToLayerPoint:function($t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint($t))},mouseEventToLatLng:function($t){return this.layerPointToLatLng(this.mouseEventToLayerPoint($t))},_initContainer:function($t){var Vt=this._container=xo($t);if(Vt){if(Vt._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");To(Vt,"scroll",this._onScroll,this),this._containerId=Lt(Vt)},_initLayout:function(){var $t=this._container;this._fadeAnimated=this.options.fadeAnimation&&bi.any3d,So($t,"leaflet-container"+(bi.touch?" leaflet-touch":"")+(bi.retina?" leaflet-retina":"")+(bi.ielt9?" leaflet-oldie":"")+(bi.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var Vt=xi($t,"position");Vt!=="absolute"&&Vt!=="relative"&&Vt!=="fixed"&&Vt!=="sticky"&&($t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var $t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Hs(this._mapPane,new ir(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(So($t.markerPane,"leaflet-zoom-hide"),So($t.shadowPane,"leaflet-zoom-hide"))},_resetView:function($t,Vt,tn){Hs(this._mapPane,new ir(0,0));var mn=!this._loaded;this._loaded=!0,Vt=this._limitZoom(Vt),this.fire("viewprereset");var In=this._zoom!==Vt;this._moveStart(In,tn)._move($t,Vt)._moveEnd(In),this.fire("viewreset"),mn&&this.fire("load")},_moveStart:function($t,Vt){return $t&&this.fire("zoomstart"),Vt||this.fire("movestart"),this},_move:function($t,Vt,tn,mn){Vt===void 0&&(Vt=this._zoom);var In=this._zoom!==Vt;return this._zoom=Vt,this._lastCenter=$t,this._pixelOrigin=this._getNewPixelOrigin($t),mn?tn&&tn.pinch&&this.fire("zoom",tn):((In||tn&&tn.pinch)&&this.fire("zoom",tn),this.fire("move",tn)),this},_moveEnd:function($t){return $t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return cn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function($t){Hs(this._mapPane,this._getMapPanePos().subtract($t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function($t){this._targets={},this._targets[Lt(this._container)]=this;var Vt=$t?ho:To;Vt(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&Vt(window,"resize",this._onResize,this),bi.any3d&&this.options.transform3DLimit&&($t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){cn(this._resizeRequest),this._resizeRequest=An(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var $t=this._getMapPanePos();Math.max(Math.abs($t.x),Math.abs($t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function($t,Vt){for(var tn=[],mn,In=Vt==="mouseout"||Vt==="mouseover",Qn=$t.target||$t.srcElement,Tr=!1;Qn;){if(mn=this._targets[Lt(Qn)],mn&&(Vt==="click"||Vt==="preclick")&&this._draggableMoved(mn)){Tr=!0;break}if(mn&&mn.listens(Vt,!0)&&(In&&!Kl(Qn,$t)||(tn.push(mn),In))||Qn===this._container)break;Qn=Qn.parentNode}return!tn.length&&!Tr&&!In&&this.listens(Vt,!0)&&(tn=[this]),tn},_isClickDisabled:function($t){for(;$t&&$t!==this._container;){if($t._leaflet_disable_click)return!0;$t=$t.parentNode}},_handleDOMEvent:function($t){var Vt=$t.target||$t.srcElement;if(!(!this._loaded||Vt._leaflet_disable_events||$t.type==="click"&&this._isClickDisabled(Vt))){var tn=$t.type;tn==="mousedown"&&Su(Vt),this._fireDOMEvent($t,tn)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function($t,Vt,tn){if($t.type==="click"){var mn=_t({},$t);mn.type="preclick",this._fireDOMEvent(mn,mn.type,tn)}var In=this._findEventTargets($t,Vt);if(tn){for(var Qn=[],Tr=0;Tr<tn.length;Tr++)tn[Tr].listens(Vt,!0)&&Qn.push(tn[Tr]);In=Qn.concat(In)}if(!!In.length){Vt==="contextmenu"&&la($t);var jr=In[0],Kr={originalEvent:$t};if($t.type!=="keypress"&&$t.type!=="keydown"&&$t.type!=="keyup"){var ci=jr.getLatLng&&(!jr._radius||jr._radius<=10);Kr.containerPoint=ci?this.latLngToContainerPoint(jr.getLatLng()):this.mouseEventToContainerPoint($t),Kr.layerPoint=this.containerPointToLayerPoint(Kr.containerPoint),Kr.latlng=ci?jr.getLatLng():this.layerPointToLatLng(Kr.layerPoint)}for(Tr=0;Tr<In.length;Tr++)if(In[Tr].fire(Vt,Kr,!0),Kr.originalEvent._stopped||In[Tr].options.bubblingMouseEvents===!1&&rn(this._mouseEvents,Vt)!==-1)return}},_draggableMoved:function($t){return $t=$t.dragging&&$t.dragging.enabled()?$t:this,$t.dragging&&$t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var $t=0,Vt=this._handlers.length;$t<Vt;$t++)this._handlers[$t].disable()},whenReady:function($t,Vt){return this._loaded?$t.call(Vt||this,{target:this}):this.on("load",$t,Vt),this},_getMapPanePos:function(){return $o(this._mapPane)||new ir(0,0)},_moved:function(){var $t=this._getMapPanePos();return $t&&!$t.equals([0,0])},_getTopLeftPoint:function($t,Vt){var tn=$t&&Vt!==void 0?this._getNewPixelOrigin($t,Vt):this.getPixelOrigin();return tn.subtract(this._getMapPanePos())},_getNewPixelOrigin:function($t,Vt){var tn=this.getSize()._divideBy(2);return this.project($t,Vt)._subtract(tn)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function($t,Vt,tn){var mn=this._getNewPixelOrigin(tn,Vt);return this.project($t,Vt)._subtract(mn)},_latLngBoundsToNewLayerBounds:function($t,Vt,tn){var mn=this._getNewPixelOrigin(tn,Vt);return lr([this.project($t.getSouthWest(),Vt)._subtract(mn),this.project($t.getNorthWest(),Vt)._subtract(mn),this.project($t.getSouthEast(),Vt)._subtract(mn),this.project($t.getNorthEast(),Vt)._subtract(mn)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function($t){return this.latLngToLayerPoint($t).subtract(this._getCenterLayerPoint())},_limitCenter:function($t,Vt,tn){if(!tn)return $t;var mn=this.project($t,Vt),In=this.getSize().divideBy(2),Qn=new hr(mn.subtract(In),mn.add(In)),Tr=this._getBoundsOffset(Qn,tn,Vt);return Math.abs(Tr.x)<=1&&Math.abs(Tr.y)<=1?$t:this.unproject(mn.add(Tr),Vt)},_limitOffset:function($t,Vt){if(!Vt)return $t;var tn=this.getPixelBounds(),mn=new hr(tn.min.add($t),tn.max.add($t));return $t.add(this._getBoundsOffset(mn,Vt))},_getBoundsOffset:function($t,Vt,tn){var mn=lr(this.project(Vt.getNorthEast(),tn),this.project(Vt.getSouthWest(),tn)),In=mn.min.subtract($t.min),Qn=mn.max.subtract($t.max),Tr=this._rebound(In.x,-Qn.x),jr=this._rebound(In.y,-Qn.y);return new ir(Tr,jr)},_rebound:function($t,Vt){return $t+Vt>0?Math.round($t-Vt)/2:Math.max(0,Math.ceil($t))-Math.max(0,Math.floor(Vt))},_limitZoom:function($t){var Vt=this.getMinZoom(),tn=this.getMaxZoom(),mn=bi.any3d?this.options.zoomSnap:1;return mn&&($t=Math.round($t/mn)*mn),Math.max(Vt,Math.min(tn,$t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){oo(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function($t,Vt){var tn=this._getCenterOffset($t)._trunc();return(Vt&&Vt.animate)!==!0&&!this.getSize().contains(tn)?!1:(this.panBy(tn,Vt),!0)},_createAnimProxy:function(){var $t=this._proxy=Ki("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild($t),this.on("zoomanim",function(Vt){var tn=Ga,mn=this._proxy.style[tn];cc(this._proxy,this.project(Vt.center,Vt.zoom),this.getZoomScale(Vt.zoom,1)),mn===this._proxy.style[tn]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){br(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var $t=this.getCenter(),Vt=this.getZoom();cc(this._proxy,this.project($t,Vt),this.getZoomScale(Vt,1))},_catchTransitionEnd:function($t){this._animatingZoom&&$t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function($t,Vt,tn){if(this._animatingZoom)return!0;if(tn=tn||{},!this._zoomAnimated||tn.animate===!1||this._nothingToAnimate()||Math.abs(Vt-this._zoom)>this.options.zoomAnimationThreshold)return!1;var mn=this.getZoomScale(Vt),In=this._getCenterOffset($t)._divideBy(1-1/mn);return tn.animate!==!0&&!this.getSize().contains(In)?!1:(An(function(){this._moveStart(!0,tn.noMoveStart||!1)._animateZoom($t,Vt,!0)},this),!0)},_animateZoom:function($t,Vt,tn,mn){!this._mapPane||(tn&&(this._animatingZoom=!0,this._animateToCenter=$t,this._animateToZoom=Vt,So(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:$t,zoom:Vt,noUpdate:mn}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Et(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&oo(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $m($t,Vt){return new hs($t,Vt)}var xl=an.extend({options:{position:"topright"},initialize:function($t){Zt(this,$t)},getPosition:function(){return this.options.position},setPosition:function($t){var Vt=this._map;return Vt&&Vt.removeControl(this),this.options.position=$t,Vt&&Vt.addControl(this),this},getContainer:function(){return this._container},addTo:function($t){this.remove(),this._map=$t;var Vt=this._container=this.onAdd($t),tn=this.getPosition(),mn=$t._controlCorners[tn];return So(Vt,"leaflet-control"),tn.indexOf("bottom")!==-1?mn.insertBefore(Vt,mn.firstChild):mn.appendChild(Vt),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(br(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function($t){this._map&&$t&&$t.screenX>0&&$t.screenY>0&&this._map.getContainer().focus()}}),Ph=function($t){return new xl($t)};hs.include({addControl:function($t){return $t.addTo(this),this},removeControl:function($t){return $t.remove(),this},_initControlPos:function(){var $t=this._controlCorners={},Vt="leaflet-",tn=this._controlContainer=Ki("div",Vt+"control-container",this._container);function mn(In,Qn){var Tr=Vt+In+" "+Vt+Qn;$t[In+Qn]=Ki("div",Tr,tn)}mn("top","left"),mn("top","right"),mn("bottom","left"),mn("bottom","right")},_clearControlPos:function(){for(var $t in this._controlCorners)br(this._controlCorners[$t]);br(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var hd=xl.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function($t,Vt,tn,mn){return tn<mn?-1:mn<tn?1:0}},initialize:function($t,Vt,tn){Zt(this,tn),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var mn in $t)this._addLayer($t[mn],mn);for(mn in Vt)this._addLayer(Vt[mn],mn,!0)},onAdd:function($t){this._initLayout(),this._update(),this._map=$t,$t.on("zoomend",this._checkDisabledLayers,this);for(var Vt=0;Vt<this._layers.length;Vt++)this._layers[Vt].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function($t){return xl.prototype.addTo.call(this,$t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var $t=0;$t<this._layers.length;$t++)this._layers[$t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function($t,Vt){return this._addLayer($t,Vt),this._map?this._update():this},addOverlay:function($t,Vt){return this._addLayer($t,Vt,!0),this._map?this._update():this},removeLayer:function($t){$t.off("add remove",this._onLayerChange,this);var Vt=this._getLayer(Lt($t));return Vt&&this._layers.splice(this._layers.indexOf(Vt),1),this._map?this._update():this},expand:function(){So(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var $t=this._map.getSize().y-(this._container.offsetTop+50);return $t<this._section.clientHeight?(So(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=$t+"px"):oo(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return oo(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var $t="leaflet-control-layers",Vt=this._container=Ki("div",$t),tn=this.options.collapsed;Vt.setAttribute("aria-haspopup",!0),Zl(Vt),lp(Vt);var mn=this._section=Ki("section",$t+"-list");tn&&(this._map.on("click",this.collapse,this),To(Vt,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var In=this._layersLink=Ki("a",$t+"-toggle",Vt);In.href="#",In.title="Layers",In.setAttribute("role","button"),To(In,{keydown:function(Qn){Qn.keyCode===13&&this._expandSafely()},click:function(Qn){la(Qn),this._expandSafely()}},this),tn||this.expand(),this._baseLayersList=Ki("div",$t+"-base",mn),this._separator=Ki("div",$t+"-separator",mn),this._overlaysList=Ki("div",$t+"-overlays",mn),Vt.appendChild(mn)},_getLayer:function($t){for(var Vt=0;Vt<this._layers.length;Vt++)if(this._layers[Vt]&&Lt(this._layers[Vt].layer)===$t)return this._layers[Vt]},_addLayer:function($t,Vt,tn){this._map&&$t.on("add remove",this._onLayerChange,this),this._layers.push({layer:$t,name:Vt,overlay:tn}),this.options.sortLayers&&this._layers.sort(Et(function(mn,In){return this.options.sortFunction(mn.layer,In.layer,mn.name,In.name)},this)),this.options.autoZIndex&&$t.setZIndex&&(this._lastZIndex++,$t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rl(this._baseLayersList),Rl(this._overlaysList),this._layerControlInputs=[];var $t,Vt,tn,mn,In=0;for(tn=0;tn<this._layers.length;tn++)mn=this._layers[tn],this._addItem(mn),Vt=Vt||mn.overlay,$t=$t||!mn.overlay,In+=mn.overlay?0:1;return this.options.hideSingleBase&&($t=$t&&In>1,this._baseLayersList.style.display=$t?"":"none"),this._separator.style.display=Vt&&$t?"":"none",this},_onLayerChange:function($t){this._handlingClick||this._update();var Vt=this._getLayer(Lt($t.target)),tn=Vt.overlay?$t.type==="add"?"overlayadd":"overlayremove":$t.type==="add"?"baselayerchange":null;tn&&this._map.fire(tn,Vt)},_createRadioElement:function($t,Vt){var tn='<input type="radio" class="leaflet-control-layers-selector" name="'+$t+'"'+(Vt?' checked="checked"':"")+"/>",mn=document.createElement("div");return mn.innerHTML=tn,mn.firstChild},_addItem:function($t){var Vt=document.createElement("label"),tn=this._map.hasLayer($t.layer),mn;$t.overlay?(mn=document.createElement("input"),mn.type="checkbox",mn.className="leaflet-control-layers-selector",mn.defaultChecked=tn):mn=this._createRadioElement("leaflet-base-layers_"+Lt(this),tn),this._layerControlInputs.push(mn),mn.layerId=Lt($t.layer),To(mn,"click",this._onInputClick,this);var In=document.createElement("span");In.innerHTML=" "+$t.name;var Qn=document.createElement("span");Vt.appendChild(Qn),Qn.appendChild(mn),Qn.appendChild(In);var Tr=$t.overlay?this._overlaysList:this._baseLayersList;return Tr.appendChild(Vt),this._checkDisabledLayers(),Vt},_onInputClick:function(){if(!this._preventClick){var $t=this._layerControlInputs,Vt,tn,mn=[],In=[];this._handlingClick=!0;for(var Qn=$t.length-1;Qn>=0;Qn--)Vt=$t[Qn],tn=this._getLayer(Vt.layerId).layer,Vt.checked?mn.push(tn):Vt.checked||In.push(tn);for(Qn=0;Qn<In.length;Qn++)this._map.hasLayer(In[Qn])&&this._map.removeLayer(In[Qn]);for(Qn=0;Qn<mn.length;Qn++)this._map.hasLayer(mn[Qn])||this._map.addLayer(mn[Qn]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var $t=this._layerControlInputs,Vt,tn,mn=this._map.getZoom(),In=$t.length-1;In>=0;In--)Vt=$t[In],tn=this._getLayer(Vt.layerId).layer,Vt.disabled=tn.options.minZoom!==void 0&&mn<tn.options.minZoom||tn.options.maxZoom!==void 0&&mn>tn.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var $t=this._section;this._preventClick=!0,To($t,"click",la),this.expand();var Vt=this;setTimeout(function(){ho($t,"click",la),Vt._preventClick=!1})}}),dd=function($t,Vt,tn){return new hd($t,Vt,tn)},fd=xl.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function($t){var Vt="leaflet-control-zoom",tn=Ki("div",Vt+" leaflet-bar"),mn=this.options;return this._zoomInButton=this._createButton(mn.zoomInText,mn.zoomInTitle,Vt+"-in",tn,this._zoomIn),this._zoomOutButton=this._createButton(mn.zoomOutText,mn.zoomOutTitle,Vt+"-out",tn,this._zoomOut),this._updateDisabled(),$t.on("zoomend zoomlevelschange",this._updateDisabled,this),tn},onRemove:function($t){$t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function($t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*($t.shiftKey?3:1))},_zoomOut:function($t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*($t.shiftKey?3:1))},_createButton:function($t,Vt,tn,mn,In){var Qn=Ki("a",tn,mn);return Qn.innerHTML=$t,Qn.href="#",Qn.title=Vt,Qn.setAttribute("role","button"),Qn.setAttribute("aria-label",Vt),Zl(Qn),To(Qn,"click",Cu),To(Qn,"click",In,this),To(Qn,"click",this._refocusOnMap,this),Qn},_updateDisabled:function(){var $t=this._map,Vt="leaflet-disabled";oo(this._zoomInButton,Vt),oo(this._zoomOutButton,Vt),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||$t._zoom===$t.getMinZoom())&&(So(this._zoomOutButton,Vt),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||$t._zoom===$t.getMaxZoom())&&(So(this._zoomInButton,Vt),this._zoomInButton.setAttribute("aria-disabled","true"))}});hs.mergeOptions({zoomControl:!0}),hs.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fd,this.addControl(this.zoomControl))});var Rm=function($t){return new fd($t)},_g=xl.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function($t){var Vt="leaflet-control-scale",tn=Ki("div",Vt),mn=this.options;return this._addScales(mn,Vt+"-line",tn),$t.on(mn.updateWhenIdle?"moveend":"move",this._update,this),$t.whenReady(this._update,this),tn},onRemove:function($t){$t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function($t,Vt,tn){$t.metric&&(this._mScale=Ki("div",Vt,tn)),$t.imperial&&(this._iScale=Ki("div",Vt,tn))},_update:function(){var $t=this._map,Vt=$t.getSize().y/2,tn=$t.distance($t.containerPointToLatLng([0,Vt]),$t.containerPointToLatLng([this.options.maxWidth,Vt]));this._updateScales(tn)},_updateScales:function($t){this.options.metric&&$t&&this._updateMetric($t),this.options.imperial&&$t&&this._updateImperial($t)},_updateMetric:function($t){var Vt=this._getRoundNum($t),tn=Vt<1e3?Vt+" m":Vt/1e3+" km";this._updateScale(this._mScale,tn,Vt/$t)},_updateImperial:function($t){var Vt=$t*3.2808399,tn,mn,In;Vt>5280?(tn=Vt/5280,mn=this._getRoundNum(tn),this._updateScale(this._iScale,mn+" mi",mn/tn)):(In=this._getRoundNum(Vt),this._updateScale(this._iScale,In+" ft",In/Vt))},_updateScale:function($t,Vt,tn){$t.style.width=Math.round(this.options.maxWidth*tn)+"px",$t.innerHTML=Vt},_getRoundNum:function($t){var Vt=Math.pow(10,(Math.floor($t)+"").length-1),tn=$t/Vt;return tn=tn>=10?10:tn>=5?5:tn>=3?3:tn>=2?2:1,Vt*tn}}),bg=function($t){return new _g($t)},up='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ef=xl.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(bi.inlineSvg?up+" ":"")+"Leaflet</a>"},initialize:function($t){Zt(this,$t),this._attributions={}},onAdd:function($t){$t.attributionControl=this,this._container=Ki("div","leaflet-control-attribution"),Zl(this._container);for(var Vt in $t._layers)$t._layers[Vt].getAttribution&&this.addAttribution($t._layers[Vt].getAttribution());return this._update(),$t.on("layeradd",this._addAttribution,this),this._container},onRemove:function($t){$t.off("layeradd",this._addAttribution,this)},_addAttribution:function($t){$t.layer.getAttribution&&(this.addAttribution($t.layer.getAttribution()),$t.layer.once("remove",function(){this.removeAttribution($t.layer.getAttribution())},this))},setPrefix:function($t){return this.options.prefix=$t,this._update(),this},addAttribution:function($t){return $t?(this._attributions[$t]||(this._attributions[$t]=0),this._attributions[$t]++,this._update(),this):this},removeAttribution:function($t){return $t?(this._attributions[$t]&&(this._attributions[$t]--,this._update()),this):this},_update:function(){if(!!this._map){var $t=[];for(var Vt in this._attributions)this._attributions[Vt]&&$t.push(Vt);var tn=[];this.options.prefix&&tn.push(this.options.prefix),$t.length&&tn.push($t.join(", ")),this._container.innerHTML=tn.join(' <span aria-hidden="true">|</span> ')}}});hs.mergeOptions({attributionControl:!0}),hs.addInitHook(function(){this.options.attributionControl&&new ef().addTo(this)});var xg=function($t){return new ef($t)};xl.Layers=hd,xl.Zoom=fd,xl.Scale=_g,xl.Attribution=ef,Ph.layers=dd,Ph.zoom=Rm,Ph.scale=bg,Ph.attribution=xg;var Ta=an.extend({initialize:function($t){this._map=$t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ta.addTo=function($t,Vt){return $t.addHandler(Vt,this),this};var hp={Events:dn},Rc=bi.touch?"touchstart mousedown":"mousedown",hc=Fn.extend({options:{clickTolerance:3},initialize:function($t,Vt,tn,mn){Zt(this,mn),this._element=$t,this._dragStartTarget=Vt||$t,this._preventOutline=tn},enable:function(){this._enabled||(To(this._dragStartTarget,Rc,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(hc._dragging===this&&this.finishDrag(!0),ho(this._dragStartTarget,Rc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function($t){if(!!this._enabled&&(this._moved=!1,!Oc(this._element,"leaflet-zoom-anim"))){if($t.touches&&$t.touches.length!==1){hc._dragging===this&&this.finishDrag();return}if(!(hc._dragging||$t.shiftKey||$t.which!==1&&$t.button!==1&&!$t.touches)&&(hc._dragging=this,this._preventOutline&&Su(this._element),Xl(),Wa(),!this._moving)){this.fire("down");var Vt=$t.touches?$t.touches[0]:$t,tn=cd(this._element);this._startPoint=new ir(Vt.clientX,Vt.clientY),this._startPos=$o(this._element),this._parentScale=Lh(tn);var mn=$t.type==="mousedown";To(document,mn?"mousemove":"touchmove",this._onMove,this),To(document,mn?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function($t){if(!!this._enabled){if($t.touches&&$t.touches.length>1){this._moved=!0;return}var Vt=$t.touches&&$t.touches.length===1?$t.touches[0]:$t,tn=new ir(Vt.clientX,Vt.clientY)._subtract(this._startPoint);!tn.x&&!tn.y||Math.abs(tn.x)+Math.abs(tn.y)<this.options.clickTolerance||(tn.x/=this._parentScale.x,tn.y/=this._parentScale.y,la($t),this._moved||(this.fire("dragstart"),this._moved=!0,So(document.body,"leaflet-dragging"),this._lastTarget=$t.target||$t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),So(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(tn),this._moving=!0,this._lastEvent=$t,this._updatePosition())}},_updatePosition:function(){var $t={originalEvent:this._lastEvent};this.fire("predrag",$t),Hs(this._element,this._newPos),this.fire("drag",$t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function($t){oo(document.body,"leaflet-dragging"),this._lastTarget&&(oo(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ho(document,"mousemove touchmove",this._onMove,this),ho(document,"mouseup touchend touchcancel",this._onUp,this),el(),ta();var Vt=this._moved&&this._moving;this._moving=!1,hc._dragging=!1,Vt&&this.fire("dragend",{noInertia:$t,distance:this._newPos.distanceTo(this._startPos)})}});function dc($t,Vt,tn){var mn,In=[1,4,2,8],Qn,Tr,jr,Kr,ci,Mi,fo,Ro;for(Qn=0,Mi=$t.length;Qn<Mi;Qn++)$t[Qn]._code=Ku($t[Qn],Vt);for(jr=0;jr<4;jr++){for(fo=In[jr],mn=[],Qn=0,Mi=$t.length,Tr=Mi-1;Qn<Mi;Tr=Qn++)Kr=$t[Qn],ci=$t[Tr],Kr._code&fo?ci._code&fo||(Ro=rf(ci,Kr,fo,Vt,tn),Ro._code=Ku(Ro,Vt),mn.push(Ro)):(ci._code&fo&&(Ro=rf(ci,Kr,fo,Vt,tn),Ro._code=Ku(Ro,Vt),mn.push(Ro)),mn.push(Kr));$t=mn}return $t}function pd($t,Vt){var tn,mn,In,Qn,Tr,jr,Kr,ci,Mi;if(!$t||$t.length===0)throw new Error("latlngs not passed");qa($t)||(console.warn("latlngs are not flat! Only the first ring will be used"),$t=$t[0]);var fo=ar([0,0]),Ro=Cr($t),tl=Ro.getNorthWest().distanceTo(Ro.getSouthWest())*Ro.getNorthEast().distanceTo(Ro.getNorthWest());tl<1700&&(fo=tf($t));var ca=$t.length,nl=[];for(tn=0;tn<ca;tn++){var hl=ar($t[tn]);nl.push(Vt.project(ar([hl.lat-fo.lat,hl.lng-fo.lng])))}for(jr=Kr=ci=0,tn=0,mn=ca-1;tn<ca;mn=tn++)In=nl[tn],Qn=nl[mn],Tr=In.y*Qn.x-Qn.y*In.x,Kr+=(In.x+Qn.x)*Tr,ci+=(In.y+Qn.y)*Tr,jr+=Tr*3;jr===0?Mi=nl[0]:Mi=[Kr/jr,ci/jr];var Lu=Vt.unproject(Jn(Mi));return ar([Lu.lat+fo.lat,Lu.lng+fo.lng])}function tf($t){for(var Vt=0,tn=0,mn=0,In=0;In<$t.length;In++){var Qn=ar($t[In]);Vt+=Qn.lat,tn+=Qn.lng,mn++}return ar([Vt/mn,tn/mn])}var Mm={__proto__:null,clipPolygon:dc,polygonCenter:pd,centroid:tf};function gd($t,Vt){if(!Vt||!$t.length)return $t.slice();var tn=Vt*Vt;return $t=Oh($t,tn),$t=wl($t,tn),$t}function nf($t,Vt,tn){return Math.sqrt(md($t,Vt,tn,!0))}function Ih($t,Vt,tn){return md($t,Vt,tn)}function wl($t,Vt){var tn=$t.length,mn=typeof Uint8Array!=void 0+""?Uint8Array:Array,In=new mn(tn);In[0]=In[tn-1]=1,ul($t,In,Vt,0,tn-1);var Qn,Tr=[];for(Qn=0;Qn<tn;Qn++)In[Qn]&&Tr.push($t[Qn]);return Tr}function ul($t,Vt,tn,mn,In){var Qn=0,Tr,jr,Kr;for(jr=mn+1;jr<=In-1;jr++)Kr=md($t[jr],$t[mn],$t[In],!0),Kr>Qn&&(Tr=jr,Qn=Kr);Qn>tn&&(Vt[Tr]=1,ul($t,Vt,tn,mn,Tr),ul($t,Vt,tn,Tr,In))}function Oh($t,Vt){for(var tn=[$t[0]],mn=1,In=0,Qn=$t.length;mn<Qn;mn++)dp($t[mn],$t[In])>Vt&&(tn.push($t[mn]),In=mn);return In<Qn-1&&tn.push($t[Qn-1]),tn}var wg;function Eg($t,Vt,tn,mn,In){var Qn=mn?wg:Ku($t,tn),Tr=Ku(Vt,tn),jr,Kr,ci;for(wg=Tr;;){if(!(Qn|Tr))return[$t,Vt];if(Qn&Tr)return!1;jr=Qn||Tr,Kr=rf($t,Vt,jr,tn,In),ci=Ku(Kr,tn),jr===Qn?($t=Kr,Qn=ci):(Vt=Kr,Tr=ci)}}function rf($t,Vt,tn,mn,In){var Qn=Vt.x-$t.x,Tr=Vt.y-$t.y,jr=mn.min,Kr=mn.max,ci,Mi;return tn&8?(ci=$t.x+Qn*(Kr.y-$t.y)/Tr,Mi=Kr.y):tn&4?(ci=$t.x+Qn*(jr.y-$t.y)/Tr,Mi=jr.y):tn&2?(ci=Kr.x,Mi=$t.y+Tr*(Kr.x-$t.x)/Qn):tn&1&&(ci=jr.x,Mi=$t.y+Tr*(jr.x-$t.x)/Qn),new ir(ci,Mi,In)}function Ku($t,Vt){var tn=0;return $t.x<Vt.min.x?tn|=1:$t.x>Vt.max.x&&(tn|=2),$t.y<Vt.min.y?tn|=4:$t.y>Vt.max.y&&(tn|=8),tn}function dp($t,Vt){var tn=Vt.x-$t.x,mn=Vt.y-$t.y;return tn*tn+mn*mn}function md($t,Vt,tn,mn){var In=Vt.x,Qn=Vt.y,Tr=tn.x-In,jr=tn.y-Qn,Kr=Tr*Tr+jr*jr,ci;return Kr>0&&(ci=(($t.x-In)*Tr+($t.y-Qn)*jr)/Kr,ci>1?(In=tn.x,Qn=tn.y):ci>0&&(In+=Tr*ci,Qn+=jr*ci)),Tr=$t.x-In,jr=$t.y-Qn,mn?Tr*Tr+jr*jr:new ir(In,Qn)}function qa($t){return!on($t[0])||typeof $t[0][0]!="object"&&typeof $t[0][0]<"u"}function Sg($t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),qa($t)}function xa($t,Vt){var tn,mn,In,Qn,Tr,jr,Kr,ci;if(!$t||$t.length===0)throw new Error("latlngs not passed");qa($t)||(console.warn("latlngs are not flat! Only the first ring will be used"),$t=$t[0]);var Mi=ar([0,0]),fo=Cr($t),Ro=fo.getNorthWest().distanceTo(fo.getSouthWest())*fo.getNorthEast().distanceTo(fo.getNorthWest());Ro<1700&&(Mi=tf($t));var tl=$t.length,ca=[];for(tn=0;tn<tl;tn++){var nl=ar($t[tn]);ca.push(Vt.project(ar([nl.lat-Mi.lat,nl.lng-Mi.lng])))}for(tn=0,mn=0;tn<tl-1;tn++)mn+=ca[tn].distanceTo(ca[tn+1])/2;if(mn===0)ci=ca[0];else for(tn=0,Qn=0;tn<tl-1;tn++)if(Tr=ca[tn],jr=ca[tn+1],In=Tr.distanceTo(jr),Qn+=In,Qn>mn){Kr=(Qn-mn)/In,ci=[jr.x-Kr*(jr.x-Tr.x),jr.y-Kr*(jr.y-Tr.y)];break}var hl=Vt.unproject(Jn(ci));return ar([hl.lat+Mi.lat,hl.lng+Mi.lng])}var Mc={__proto__:null,simplify:gd,pointToSegmentDistance:nf,closestPointOnSegment:Ih,clipSegment:Eg,_getEdgeIntersection:rf,_getBitCode:Ku,_sqClosestPointOnSegment:md,isFlat:qa,_flat:Sg,polylineCenter:xa},Ju={project:function($t){return new ir($t.lng,$t.lat)},unproject:function($t){return new Er($t.y,$t.x)},bounds:new hr([-180,-90],[180,90])},Qu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new hr([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function($t){var Vt=Math.PI/180,tn=this.R,mn=$t.lat*Vt,In=this.R_MINOR/tn,Qn=Math.sqrt(1-In*In),Tr=Qn*Math.sin(mn),jr=Math.tan(Math.PI/4-mn/2)/Math.pow((1-Tr)/(1+Tr),Qn/2);return mn=-tn*Math.log(Math.max(jr,1e-10)),new ir($t.lng*Vt*tn,mn)},unproject:function($t){for(var Vt=180/Math.PI,tn=this.R,mn=this.R_MINOR/tn,In=Math.sqrt(1-mn*mn),Qn=Math.exp(-$t.y/tn),Tr=Math.PI/2-2*Math.atan(Qn),jr=0,Kr=.1,ci;jr<15&&Math.abs(Kr)>1e-7;jr++)ci=In*Math.sin(Tr),ci=Math.pow((1-ci)/(1+ci),In/2),Kr=Math.PI/2-2*Math.atan(Qn*ci)-Tr,Tr+=Kr;return new Er(Tr*Vt,$t.x*Vt/tn)}},$h={__proto__:null,LonLat:Ju,Mercator:Qu,SphericalMercator:fr},of=_t({},mr,{code:"EPSG:3395",projection:Qu,transformation:function(){var $t=.5/(Math.PI*Qu.R);return er($t,.5,-$t,.5)}()}),Fa=_t({},mr,{code:"EPSG:4326",projection:Ju,transformation:er(1/180,1,-1/180,.5)}),fp=_t({},Fr,{projection:Ju,transformation:er(1,0,-1,0),scale:function($t){return Math.pow(2,$t)},zoom:function($t){return Math.log($t)/Math.LN2},distance:function($t,Vt){var tn=Vt.lng-$t.lng,mn=Vt.lat-$t.lat;return Math.sqrt(tn*tn+mn*mn)},infinite:!0});Fr.Earth=mr,Fr.EPSG3395=of,Fr.EPSG3857=nn,Fr.EPSG900913=un,Fr.EPSG4326=Fa,Fr.Simple=fp;var Is=Fn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function($t){return $t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function($t){return $t&&$t.removeLayer(this),this},getPane:function($t){return this._map.getPane($t?this.options[$t]||$t:this.options.pane)},addInteractiveTarget:function($t){return this._map._targets[Lt($t)]=this,this},removeInteractiveTarget:function($t){return delete this._map._targets[Lt($t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function($t){var Vt=$t.target;if(!!Vt.hasLayer(this)){if(this._map=Vt,this._zoomAnimated=Vt._zoomAnimated,this.getEvents){var tn=this.getEvents();Vt.on(tn,this),this.once("remove",function(){Vt.off(tn,this)},this)}this.onAdd(Vt),this.fire("add"),Vt.fire("layeradd",{layer:this})}}});hs.include({addLayer:function($t){if(!$t._layerAdd)throw new Error("The provided object is not a Layer.");var Vt=Lt($t);return this._layers[Vt]?this:(this._layers[Vt]=$t,$t._mapToAdd=this,$t.beforeAdd&&$t.beforeAdd(this),this.whenReady($t._layerAdd,$t),this)},removeLayer:function($t){var Vt=Lt($t);return this._layers[Vt]?(this._loaded&&$t.onRemove(this),delete this._layers[Vt],this._loaded&&(this.fire("layerremove",{layer:$t}),$t.fire("remove")),$t._map=$t._mapToAdd=null,this):this},hasLayer:function($t){return Lt($t)in this._layers},eachLayer:function($t,Vt){for(var tn in this._layers)$t.call(Vt,this._layers[tn]);return this},_addLayers:function($t){$t=$t?on($t)?$t:[$t]:[];for(var Vt=0,tn=$t.length;Vt<tn;Vt++)this.addLayer($t[Vt])},_addZoomLimit:function($t){(!isNaN($t.options.maxZoom)||!isNaN($t.options.minZoom))&&(this._zoomBoundLayers[Lt($t)]=$t,this._updateZoomLevels())},_removeZoomLimit:function($t){var Vt=Lt($t);this._zoomBoundLayers[Vt]&&(delete this._zoomBoundLayers[Vt],this._updateZoomLevels())},_updateZoomLevels:function(){var $t=1/0,Vt=-1/0,tn=this._getZoomSpan();for(var mn in this._zoomBoundLayers){var In=this._zoomBoundLayers[mn].options;$t=In.minZoom===void 0?$t:Math.min($t,In.minZoom),Vt=In.maxZoom===void 0?Vt:Math.max(Vt,In.maxZoom)}this._layersMaxZoom=Vt===-1/0?void 0:Vt,this._layersMinZoom=$t===1/0?void 0:$t,tn!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Nl=Is.extend({initialize:function($t,Vt){Zt(this,Vt),this._layers={};var tn,mn;if($t)for(tn=0,mn=$t.length;tn<mn;tn++)this.addLayer($t[tn])},addLayer:function($t){var Vt=this.getLayerId($t);return this._layers[Vt]=$t,this._map&&this._map.addLayer($t),this},removeLayer:function($t){var Vt=$t in this._layers?$t:this.getLayerId($t);return this._map&&this._layers[Vt]&&this._map.removeLayer(this._layers[Vt]),delete this._layers[Vt],this},hasLayer:function($t){var Vt=typeof $t=="number"?$t:this.getLayerId($t);return Vt in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function($t){var Vt=Array.prototype.slice.call(arguments,1),tn,mn;for(tn in this._layers)mn=this._layers[tn],mn[$t]&&mn[$t].apply(mn,Vt);return this},onAdd:function($t){this.eachLayer($t.addLayer,$t)},onRemove:function($t){this.eachLayer($t.removeLayer,$t)},eachLayer:function($t,Vt){for(var tn in this._layers)$t.call(Vt,this._layers[tn]);return this},getLayer:function($t){return this._layers[$t]},getLayers:function(){var $t=[];return this.eachLayer($t.push,$t),$t},setZIndex:function($t){return this.invoke("setZIndex",$t)},getLayerId:function($t){return Lt($t)}}),Rh=function($t,Vt){return new Nl($t,Vt)},ka=Nl.extend({addLayer:function($t){return this.hasLayer($t)?this:($t.addEventParent(this),Nl.prototype.addLayer.call(this,$t),this.fire("layeradd",{layer:$t}))},removeLayer:function($t){return this.hasLayer($t)?($t in this._layers&&($t=this._layers[$t]),$t.removeEventParent(this),Nl.prototype.removeLayer.call(this,$t),this.fire("layerremove",{layer:$t})):this},setStyle:function($t){return this.invoke("setStyle",$t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var $t=new cr;for(var Vt in this._layers){var tn=this._layers[Vt];$t.extend(tn.getBounds?tn.getBounds():tn.getLatLng())}return $t}}),wa=function($t,Vt){return new ka($t,Vt)},fc=an.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function($t){Zt(this,$t)},createIcon:function($t){return this._createIcon("icon",$t)},createShadow:function($t){return this._createIcon("shadow",$t)},_createIcon:function($t,Vt){var tn=this._getIconUrl($t);if(!tn){if($t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var mn=this._createImg(tn,Vt&&Vt.tagName==="IMG"?Vt:null);return this._setIconStyles(mn,$t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(mn.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),mn},_setIconStyles:function($t,Vt){var tn=this.options,mn=tn[Vt+"Size"];typeof mn=="number"&&(mn=[mn,mn]);var In=Jn(mn),Qn=Jn(Vt==="shadow"&&tn.shadowAnchor||tn.iconAnchor||In&&In.divideBy(2,!0));$t.className="leaflet-marker-"+Vt+" "+(tn.className||""),Qn&&($t.style.marginLeft=-Qn.x+"px",$t.style.marginTop=-Qn.y+"px"),In&&($t.style.width=In.x+"px",$t.style.height=In.y+"px")},_createImg:function($t,Vt){return Vt=Vt||document.createElement("img"),Vt.src=$t,Vt},_getIconUrl:function($t){return bi.retina&&this.options[$t+"RetinaUrl"]||this.options[$t+"Url"]}});function Cg($t){return new fc($t)}var Mh=fc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function($t){return typeof Mh.imagePath!="string"&&(Mh.imagePath=this._detectIconPath()),(this.options.imagePath||Mh.imagePath)+fc.prototype._getIconUrl.call(this,$t)},_stripUrl:function($t){var Vt=function(tn,mn,In){var Qn=mn.exec(tn);return Qn&&Qn[In]};return $t=Vt($t,/^url\((['"])?(.+)\1\)$/,2),$t&&Vt($t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var $t=Ki("div","leaflet-default-icon-path",document.body),Vt=xi($t,"background-image")||xi($t,"backgroundImage");if(document.body.removeChild($t),Vt=this._stripUrl(Vt),Vt)return Vt;var tn=document.querySelector('link[href$="leaflet.css"]');return tn?tn.href.substring(0,tn.href.length-11-1):""}}),sf=Ta.extend({initialize:function($t){this._marker=$t},addHooks:function(){var $t=this._marker._icon;this._draggable||(this._draggable=new hc($t,$t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),So($t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&oo(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function($t){var Vt=this._marker,tn=Vt._map,mn=this._marker.options.autoPanSpeed,In=this._marker.options.autoPanPadding,Qn=$o(Vt._icon),Tr=tn.getPixelBounds(),jr=tn.getPixelOrigin(),Kr=lr(Tr.min._subtract(jr).add(In),Tr.max._subtract(jr).subtract(In));if(!Kr.contains(Qn)){var ci=Jn((Math.max(Kr.max.x,Qn.x)-Kr.max.x)/(Tr.max.x-Kr.max.x)-(Math.min(Kr.min.x,Qn.x)-Kr.min.x)/(Tr.min.x-Kr.min.x),(Math.max(Kr.max.y,Qn.y)-Kr.max.y)/(Tr.max.y-Kr.max.y)-(Math.min(Kr.min.y,Qn.y)-Kr.min.y)/(Tr.min.y-Kr.min.y)).multiplyBy(mn);tn.panBy(ci,{animate:!1}),this._draggable._newPos._add(ci),this._draggable._startPos._add(ci),Hs(Vt._icon,this._draggable._newPos),this._onDrag($t),this._panRequest=An(this._adjustPan.bind(this,$t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function($t){this._marker.options.autoPan&&(cn(this._panRequest),this._panRequest=An(this._adjustPan.bind(this,$t)))},_onDrag:function($t){var Vt=this._marker,tn=Vt._shadow,mn=$o(Vt._icon),In=Vt._map.layerPointToLatLng(mn);tn&&Hs(tn,mn),Vt._latlng=In,$t.latlng=In,$t.oldLatLng=this._oldLatLng,Vt.fire("move",$t).fire("drag",$t)},_onDragEnd:function($t){cn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",$t)}}),eh=Is.extend({options:{icon:new Mh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function($t,Vt){Zt(this,Vt),this._latlng=ar($t)},onAdd:function($t){this._zoomAnimated=this._zoomAnimated&&$t.options.markerZoomAnimation,this._zoomAnimated&&$t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function($t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&$t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function($t){var Vt=this._latlng;return this._latlng=ar($t),this.update(),this.fire("move",{oldLatLng:Vt,latlng:this._latlng})},setZIndexOffset:function($t){return this.options.zIndexOffset=$t,this.update()},getIcon:function(){return this.options.icon},setIcon:function($t){return this.options.icon=$t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var $t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos($t)}return this},_initIcon:function(){var $t=this.options,Vt="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),tn=$t.icon.createIcon(this._icon),mn=!1;tn!==this._icon&&(this._icon&&this._removeIcon(),mn=!0,$t.title&&(tn.title=$t.title),tn.tagName==="IMG"&&(tn.alt=$t.alt||"")),So(tn,Vt),$t.keyboard&&(tn.tabIndex="0",tn.setAttribute("role","button")),this._icon=tn,$t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&To(tn,"focus",this._panOnFocus,this);var In=$t.icon.createShadow(this._shadow),Qn=!1;In!==this._shadow&&(this._removeShadow(),Qn=!0),In&&(So(In,Vt),In.alt=""),this._shadow=In,$t.opacity<1&&this._updateOpacity(),mn&&this.getPane().appendChild(this._icon),this._initInteraction(),In&&Qn&&this.getPane($t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ho(this._icon,"focus",this._panOnFocus,this),br(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&br(this._shadow),this._shadow=null},_setPos:function($t){this._icon&&Hs(this._icon,$t),this._shadow&&Hs(this._shadow,$t),this._zIndex=$t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function($t){this._icon&&(this._icon.style.zIndex=this._zIndex+$t)},_animateZoom:function($t){var Vt=this._map._latLngToNewLayerPoint(this._latlng,$t.zoom,$t.center).round();this._setPos(Vt)},_initInteraction:function(){if(!!this.options.interactive&&(So(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sf)){var $t=this.options.draggable;this.dragging&&($t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sf(this),$t&&this.dragging.enable()}},setOpacity:function($t){return this.options.opacity=$t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var $t=this.options.opacity;this._icon&&ao(this._icon,$t),this._shadow&&ao(this._shadow,$t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var $t=this._map;if(!!$t){var Vt=this.options.icon.options,tn=Vt.iconSize?Jn(Vt.iconSize):Jn(0,0),mn=Vt.iconAnchor?Jn(Vt.iconAnchor):Jn(0,0);$t.panInside(this._latlng,{paddingTopLeft:mn,paddingBottomRight:tn.subtract(mn)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pp($t,Vt){return new eh($t,Vt)}var ru=Is.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function($t){this._renderer=$t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function($t){return Zt(this,$t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&$t&&Object.prototype.hasOwnProperty.call($t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),af=ru.extend({options:{fill:!0,radius:10},initialize:function($t,Vt){Zt(this,Vt),this._latlng=ar($t),this._radius=this.options.radius},setLatLng:function($t){var Vt=this._latlng;return this._latlng=ar($t),this.redraw(),this.fire("move",{oldLatLng:Vt,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function($t){return this.options.radius=this._radius=$t,this.redraw()},getRadius:function(){return this._radius},setStyle:function($t){var Vt=$t&&$t.radius||this._radius;return ru.prototype.setStyle.call(this,$t),this.setRadius(Vt),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var $t=this._radius,Vt=this._radiusY||$t,tn=this._clickTolerance(),mn=[$t+tn,Vt+tn];this._pxBounds=new hr(this._point.subtract(mn),this._point.add(mn))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function($t){return $t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Nm($t,Vt){return new af($t,Vt)}var lf=af.extend({initialize:function($t,Vt,tn){if(typeof Vt=="number"&&(Vt=_t({},tn,{radius:Vt})),Zt(this,Vt),this._latlng=ar($t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function($t){return this._mRadius=$t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var $t=[this._radius,this._radiusY||this._radius];return new cr(this._map.layerPointToLatLng(this._point.subtract($t)),this._map.layerPointToLatLng(this._point.add($t)))},setStyle:ru.prototype.setStyle,_project:function(){var $t=this._latlng.lng,Vt=this._latlng.lat,tn=this._map,mn=tn.options.crs;if(mn.distance===mr.distance){var In=Math.PI/180,Qn=this._mRadius/mr.R/In,Tr=tn.project([Vt+Qn,$t]),jr=tn.project([Vt-Qn,$t]),Kr=Tr.add(jr).divideBy(2),ci=tn.unproject(Kr).lat,Mi=Math.acos((Math.cos(Qn*In)-Math.sin(Vt*In)*Math.sin(ci*In))/(Math.cos(Vt*In)*Math.cos(ci*In)))/In;(isNaN(Mi)||Mi===0)&&(Mi=Qn/Math.cos(Math.PI/180*Vt)),this._point=Kr.subtract(tn.getPixelOrigin()),this._radius=isNaN(Mi)?0:Kr.x-tn.project([ci,$t-Mi]).x,this._radiusY=Kr.y-Tr.y}else{var fo=mn.unproject(mn.project(this._latlng).subtract([this._mRadius,0]));this._point=tn.latLngToLayerPoint(this._latlng),this._radius=this._point.x-tn.latLngToLayerPoint(fo).x}this._updateBounds()}});function Dm($t,Vt,tn){return new lf($t,Vt,tn)}var iu=ru.extend({options:{smoothFactor:1,noClip:!1},initialize:function($t,Vt){Zt(this,Vt),this._setLatLngs($t)},getLatLngs:function(){return this._latlngs},setLatLngs:function($t){return this._setLatLngs($t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function($t){for(var Vt=1/0,tn=null,mn=md,In,Qn,Tr=0,jr=this._parts.length;Tr<jr;Tr++)for(var Kr=this._parts[Tr],ci=1,Mi=Kr.length;ci<Mi;ci++){In=Kr[ci-1],Qn=Kr[ci];var fo=mn($t,In,Qn,!0);fo<Vt&&(Vt=fo,tn=mn($t,In,Qn))}return tn&&(tn.distance=Math.sqrt(Vt)),tn},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function($t,Vt){return Vt=Vt||this._defaultShape(),$t=ar($t),Vt.push($t),this._bounds.extend($t),this.redraw()},_setLatLngs:function($t){this._bounds=new cr,this._latlngs=this._convertLatLngs($t)},_defaultShape:function(){return qa(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function($t){for(var Vt=[],tn=qa($t),mn=0,In=$t.length;mn<In;mn++)tn?(Vt[mn]=ar($t[mn]),this._bounds.extend(Vt[mn])):Vt[mn]=this._convertLatLngs($t[mn]);return Vt},_project:function(){var $t=new hr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,$t),this._bounds.isValid()&&$t.isValid()&&(this._rawPxBounds=$t,this._updateBounds())},_updateBounds:function(){var $t=this._clickTolerance(),Vt=new ir($t,$t);!this._rawPxBounds||(this._pxBounds=new hr([this._rawPxBounds.min.subtract(Vt),this._rawPxBounds.max.add(Vt)]))},_projectLatlngs:function($t,Vt,tn){var mn=$t[0]instanceof Er,In=$t.length,Qn,Tr;if(mn){for(Tr=[],Qn=0;Qn<In;Qn++)Tr[Qn]=this._map.latLngToLayerPoint($t[Qn]),tn.extend(Tr[Qn]);Vt.push(Tr)}else for(Qn=0;Qn<In;Qn++)this._projectLatlngs($t[Qn],Vt,tn)},_clipPoints:function(){var $t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects($t))){if(this.options.noClip){this._parts=this._rings;return}var Vt=this._parts,tn,mn,In,Qn,Tr,jr,Kr;for(tn=0,In=0,Qn=this._rings.length;tn<Qn;tn++)for(Kr=this._rings[tn],mn=0,Tr=Kr.length;mn<Tr-1;mn++)jr=Eg(Kr[mn],Kr[mn+1],$t,mn,!0),jr&&(Vt[In]=Vt[In]||[],Vt[In].push(jr[0]),(jr[1]!==Kr[mn+1]||mn===Tr-2)&&(Vt[In].push(jr[1]),In++))}},_simplifyPoints:function(){for(var $t=this._parts,Vt=this.options.smoothFactor,tn=0,mn=$t.length;tn<mn;tn++)$t[tn]=gd($t[tn],Vt)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function($t,Vt){var tn,mn,In,Qn,Tr,jr,Kr=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains($t))return!1;for(tn=0,Qn=this._parts.length;tn<Qn;tn++)for(jr=this._parts[tn],mn=0,Tr=jr.length,In=Tr-1;mn<Tr;In=mn++)if(!(!Vt&&mn===0)&&nf($t,jr[In],jr[mn])<=Kr)return!0;return!1}});function gp($t,Vt){return new iu($t,Vt)}iu._flat=Sg;var Nh=iu.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function($t){var Vt=iu.prototype._convertLatLngs.call(this,$t),tn=Vt.length;return tn>=2&&Vt[0]instanceof Er&&Vt[0].equals(Vt[tn-1])&&Vt.pop(),Vt},_setLatLngs:function($t){iu.prototype._setLatLngs.call(this,$t),qa(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return qa(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var $t=this._renderer._bounds,Vt=this.options.weight,tn=new ir(Vt,Vt);if($t=new hr($t.min.subtract(tn),$t.max.add(tn)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects($t))){if(this.options.noClip){this._parts=this._rings;return}for(var mn=0,In=this._rings.length,Qn;mn<In;mn++)Qn=dc(this._rings[mn],$t,!0),Qn.length&&this._parts.push(Qn)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function($t){var Vt=!1,tn,mn,In,Qn,Tr,jr,Kr,ci;if(!this._pxBounds||!this._pxBounds.contains($t))return!1;for(Qn=0,Kr=this._parts.length;Qn<Kr;Qn++)for(tn=this._parts[Qn],Tr=0,ci=tn.length,jr=ci-1;Tr<ci;jr=Tr++)mn=tn[Tr],In=tn[jr],mn.y>$t.y!=In.y>$t.y&&$t.x<(In.x-mn.x)*($t.y-mn.y)/(In.y-mn.y)+mn.x&&(Vt=!Vt);return Vt||iu.prototype._containsPoint.call(this,$t,!0)}});function Bm($t,Vt){return new Nh($t,Vt)}var js=ka.extend({initialize:function($t,Vt){Zt(this,Vt),this._layers={},$t&&this.addData($t)},addData:function($t){var Vt=on($t)?$t:$t.features,tn,mn,In;if(Vt){for(tn=0,mn=Vt.length;tn<mn;tn++)In=Vt[tn],(In.geometries||In.geometry||In.features||In.coordinates)&&this.addData(In);return this}var Qn=this.options;if(Qn.filter&&!Qn.filter($t))return this;var Tr=cf($t,Qn);return Tr?(Tr.feature=vd($t),Tr.defaultOptions=Tr.options,this.resetStyle(Tr),Qn.onEachFeature&&Qn.onEachFeature($t,Tr),this.addLayer(Tr)):this},resetStyle:function($t){return $t===void 0?this.eachLayer(this.resetStyle,this):($t.options=_t({},$t.defaultOptions),this._setLayerStyle($t,this.options.style),this)},setStyle:function($t){return this.eachLayer(function(Vt){this._setLayerStyle(Vt,$t)},this)},_setLayerStyle:function($t,Vt){$t.setStyle&&(typeof Vt=="function"&&(Vt=Vt($t.feature)),$t.setStyle(Vt))}});function cf($t,Vt){var tn=$t.type==="Feature"?$t.geometry:$t,mn=tn?tn.coordinates:null,In=[],Qn=Vt&&Vt.pointToLayer,Tr=Vt&&Vt.coordsToLatLng||El,jr,Kr,ci,Mi;if(!mn&&!tn)return null;switch(tn.type){case"Point":return jr=Tr(mn),yd(Qn,$t,jr,Vt);case"MultiPoint":for(ci=0,Mi=mn.length;ci<Mi;ci++)jr=Tr(mn[ci]),In.push(yd(Qn,$t,jr,Vt));return new ka(In);case"LineString":case"MultiLineString":return Kr=Sl(mn,tn.type==="LineString"?0:1,Tr),new iu(Kr,Vt);case"Polygon":case"MultiPolygon":return Kr=Sl(mn,tn.type==="Polygon"?1:2,Tr),new Nh(Kr,Vt);case"GeometryCollection":for(ci=0,Mi=tn.geometries.length;ci<Mi;ci++){var fo=cf({geometry:tn.geometries[ci],type:"Feature",properties:$t.properties},Vt);fo&&In.push(fo)}return new ka(In);case"FeatureCollection":for(ci=0,Mi=tn.features.length;ci<Mi;ci++){var Ro=cf(tn.features[ci],Vt);Ro&&In.push(Ro)}return new ka(In);default:throw new Error("Invalid GeoJSON object.")}}function yd($t,Vt,tn,mn){return $t?$t(Vt,tn):new eh(tn,mn&&mn.markersInheritOptions&&mn)}function El($t){return new Er($t[1],$t[0],$t[2])}function Sl($t,Vt,tn){for(var mn=[],In=0,Qn=$t.length,Tr;In<Qn;In++)Tr=Vt?Sl($t[In],Vt-1,tn):(tn||El)($t[In]),mn.push(Tr);return mn}function Nc($t,Vt){return $t=ar($t),$t.alt!==void 0?[Bt($t.lng,Vt),Bt($t.lat,Vt),Bt($t.alt,Vt)]:[Bt($t.lng,Vt),Bt($t.lat,Vt)]}function th($t,Vt,tn,mn){for(var In=[],Qn=0,Tr=$t.length;Qn<Tr;Qn++)In.push(Vt?th($t[Qn],qa($t[Qn])?0:Vt-1,tn,mn):Nc($t[Qn],mn));return!Vt&&tn&&In.length>0&&In.push(In[0].slice()),In}function nh($t,Vt){return $t.feature?_t({},$t.feature,{geometry:Vt}):vd(Vt)}function vd($t){return $t.type==="Feature"||$t.type==="FeatureCollection"?$t:{type:"Feature",properties:{},geometry:$t}}var _d={toGeoJSON:function($t){return nh(this,{type:"Point",coordinates:Nc(this.getLatLng(),$t)})}};eh.include(_d),lf.include(_d),af.include(_d),iu.include({toGeoJSON:function($t){var Vt=!qa(this._latlngs),tn=th(this._latlngs,Vt?1:0,!1,$t);return nh(this,{type:(Vt?"Multi":"")+"LineString",coordinates:tn})}}),Nh.include({toGeoJSON:function($t){var Vt=!qa(this._latlngs),tn=Vt&&!qa(this._latlngs[0]),mn=th(this._latlngs,tn?2:Vt?1:0,!0,$t);return Vt||(mn=[mn]),nh(this,{type:(tn?"Multi":"")+"Polygon",coordinates:mn})}}),Nl.include({toMultiPoint:function($t){var Vt=[];return this.eachLayer(function(tn){Vt.push(tn.toGeoJSON($t).geometry.coordinates)}),nh(this,{type:"MultiPoint",coordinates:Vt})},toGeoJSON:function($t){var Vt=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(Vt==="MultiPoint")return this.toMultiPoint($t);var tn=Vt==="GeometryCollection",mn=[];return this.eachLayer(function(In){if(In.toGeoJSON){var Qn=In.toGeoJSON($t);if(tn)mn.push(Qn.geometry);else{var Tr=vd(Qn);Tr.type==="FeatureCollection"?mn.push.apply(mn,Tr.features):mn.push(Tr)}}}),tn?nh(this,{geometries:mn,type:"GeometryCollection"}):{type:"FeatureCollection",features:mn}}});function uf($t,Vt){return new js($t,Vt)}var Fm=uf,ou=Is.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function($t,Vt,tn){this._url=$t,this._bounds=Cr(Vt),Zt(this,tn)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(So(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){br(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function($t){return this.options.opacity=$t,this._image&&this._updateOpacity(),this},setStyle:function($t){return $t.opacity&&this.setOpacity($t.opacity),this},bringToFront:function(){return this._map&&Or(this._image),this},bringToBack:function(){return this._map&&ea(this._image),this},setUrl:function($t){return this._url=$t,this._image&&(this._image.src=$t),this},setBounds:function($t){return this._bounds=Cr($t),this._map&&this._reset(),this},getEvents:function(){var $t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&($t.zoomanim=this._animateZoom),$t},setZIndex:function($t){return this.options.zIndex=$t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var $t=this._url.tagName==="IMG",Vt=this._image=$t?this._url:Ki("img");if(So(Vt,"leaflet-image-layer"),this._zoomAnimated&&So(Vt,"leaflet-zoom-animated"),this.options.className&&So(Vt,this.options.className),Vt.onselectstart=Nt,Vt.onmousemove=Nt,Vt.onload=Et(this.fire,this,"load"),Vt.onerror=Et(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Vt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),$t){this._url=Vt.src;return}Vt.src=this._url,Vt.alt=this.options.alt},_animateZoom:function($t){var Vt=this._map.getZoomScale($t.zoom),tn=this._map._latLngBoundsToNewLayerBounds(this._bounds,$t.zoom,$t.center).min;cc(this._image,tn,Vt)},_reset:function(){var $t=this._image,Vt=new hr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),tn=Vt.getSize();Hs($t,Vt.min),$t.style.width=tn.x+"px",$t.style.height=tn.y+"px"},_updateOpacity:function(){ao(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var $t=this.options.errorOverlayUrl;$t&&this._url!==$t&&(this._url=$t,this._image.src=$t)},getCenter:function(){return this._bounds.getCenter()}}),zm=function($t,Vt,tn){return new ou($t,Vt,tn)},mp=ou.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var $t=this._url.tagName==="VIDEO",Vt=this._image=$t?this._url:Ki("video");if(So(Vt,"leaflet-image-layer"),this._zoomAnimated&&So(Vt,"leaflet-zoom-animated"),this.options.className&&So(Vt,this.options.className),Vt.onselectstart=Nt,Vt.onmousemove=Nt,Vt.onloadeddata=Et(this.fire,this,"load"),$t){for(var tn=Vt.getElementsByTagName("source"),mn=[],In=0;In<tn.length;In++)mn.push(tn[In].src);this._url=tn.length>0?mn:[Vt.src];return}on(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(Vt.style,"objectFit")&&(Vt.style.objectFit="fill"),Vt.autoplay=!!this.options.autoplay,Vt.loop=!!this.options.loop,Vt.muted=!!this.options.muted,Vt.playsInline=!!this.options.playsInline;for(var Qn=0;Qn<this._url.length;Qn++){var Tr=Ki("source");Tr.src=this._url[Qn],Vt.appendChild(Tr)}}});function hf($t,Vt,tn){return new mp($t,Vt,tn)}var Ys=ou.extend({_initImage:function(){var $t=this._image=this._url;So($t,"leaflet-image-layer"),this._zoomAnimated&&So($t,"leaflet-zoom-animated"),this.options.className&&So($t,this.options.className),$t.onselectstart=Nt,$t.onmousemove=Nt}});function Tg($t,Vt,tn){return new Ys($t,Vt,tn)}var Vs=Is.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function($t,Vt){$t&&($t instanceof Er||on($t))?(this._latlng=ar($t),Zt(this,Vt)):(Zt(this,$t),this._source=Vt),this.options.content&&(this._content=this.options.content)},openOn:function($t){return $t=arguments.length?$t:this._source._map,$t.hasLayer(this)||$t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function($t){return this._map?this.close():(arguments.length?this._source=$t:$t=this._source,this._prepareOpen(),this.openOn($t._map)),this},onAdd:function($t){this._zoomAnimated=$t._zoomAnimated,this._container||this._initLayout(),$t._fadeAnimated&&ao(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),$t._fadeAnimated&&ao(this._container,1),this.bringToFront(),this.options.interactive&&(So(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function($t){$t._fadeAnimated?(ao(this._container,0),this._removeTimeout=setTimeout(Et(br,void 0,this._container),200)):br(this._container),this.options.interactive&&(oo(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function($t){return this._latlng=ar($t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function($t){return this._content=$t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var $t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&($t.zoomanim=this._animateZoom),$t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Or(this._container),this},bringToBack:function(){return this._map&&ea(this._container),this},_prepareOpen:function($t){var Vt=this._source;if(!Vt._map)return!1;if(Vt instanceof ka){Vt=null;var tn=this._source._layers;for(var mn in tn)if(tn[mn]._map){Vt=tn[mn];break}if(!Vt)return!1;this._source=Vt}if(!$t)if(Vt.getCenter)$t=Vt.getCenter();else if(Vt.getLatLng)$t=Vt.getLatLng();else if(Vt.getBounds)$t=Vt.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng($t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var $t=this._contentNode,Vt=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof Vt=="string")$t.innerHTML=Vt;else{for(;$t.hasChildNodes();)$t.removeChild($t.firstChild);$t.appendChild(Vt)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var $t=this._map.latLngToLayerPoint(this._latlng),Vt=Jn(this.options.offset),tn=this._getAnchor();this._zoomAnimated?Hs(this._container,$t.add(tn)):Vt=Vt.add($t).add(tn);var mn=this._containerBottom=-Vt.y,In=this._containerLeft=-Math.round(this._containerWidth/2)+Vt.x;this._container.style.bottom=mn+"px",this._container.style.left=In+"px"}},_getAnchor:function(){return[0,0]}});hs.include({_initOverlay:function($t,Vt,tn,mn){var In=Vt;return In instanceof $t||(In=new $t(mn).setContent(Vt)),tn&&In.setLatLng(tn),In}}),Is.include({_initOverlay:function($t,Vt,tn,mn){var In=tn;return In instanceof $t?(Zt(In,mn),In._source=this):(In=Vt&&!mn?Vt:new $t(mn,this),In.setContent(tn)),In}});var Dh=Vs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function($t){return $t=arguments.length?$t:this._source._map,!$t.hasLayer(this)&&$t._popup&&$t._popup.options.autoClose&&$t.removeLayer($t._popup),$t._popup=this,Vs.prototype.openOn.call(this,$t)},onAdd:function($t){Vs.prototype.onAdd.call(this,$t),$t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ru||this._source.on("preclick",Zu))},onRemove:function($t){Vs.prototype.onRemove.call(this,$t),$t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ru||this._source.off("preclick",Zu))},getEvents:function(){var $t=Vs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&($t.preclick=this.close),this.options.keepInView&&($t.moveend=this._adjustPan),$t},_initLayout:function(){var $t="leaflet-popup",Vt=this._container=Ki("div",$t+" "+(this.options.className||"")+" leaflet-zoom-animated"),tn=this._wrapper=Ki("div",$t+"-content-wrapper",Vt);if(this._contentNode=Ki("div",$t+"-content",tn),Zl(Vt),lp(this._contentNode),To(Vt,"contextmenu",Zu),this._tipContainer=Ki("div",$t+"-tip-container",Vt),this._tip=Ki("div",$t+"-tip",this._tipContainer),this.options.closeButton){var mn=this._closeButton=Ki("a",$t+"-close-button",Vt);mn.setAttribute("role","button"),mn.setAttribute("aria-label","Close popup"),mn.href="#close",mn.innerHTML='<span aria-hidden="true">&#215;</span>',To(mn,"click",function(In){la(In),this.close()},this)}},_updateLayout:function(){var $t=this._contentNode,Vt=$t.style;Vt.width="",Vt.whiteSpace="nowrap";var tn=$t.offsetWidth;tn=Math.min(tn,this.options.maxWidth),tn=Math.max(tn,this.options.minWidth),Vt.width=tn+1+"px",Vt.whiteSpace="",Vt.height="";var mn=$t.offsetHeight,In=this.options.maxHeight,Qn="leaflet-popup-scrolled";In&&mn>In?(Vt.height=In+"px",So($t,Qn)):oo($t,Qn),this._containerWidth=this._container.offsetWidth},_animateZoom:function($t){var Vt=this._map._latLngToNewLayerPoint(this._latlng,$t.zoom,$t.center),tn=this._getAnchor();Hs(this._container,Vt.add(tn))},_adjustPan:function(){if(!!this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var $t=this._map,Vt=parseInt(xi(this._container,"marginBottom"),10)||0,tn=this._container.offsetHeight+Vt,mn=this._containerWidth,In=new ir(this._containerLeft,-tn-this._containerBottom);In._add($o(this._container));var Qn=$t.layerPointToContainerPoint(In),Tr=Jn(this.options.autoPanPadding),jr=Jn(this.options.autoPanPaddingTopLeft||Tr),Kr=Jn(this.options.autoPanPaddingBottomRight||Tr),ci=$t.getSize(),Mi=0,fo=0;Qn.x+mn+Kr.x>ci.x&&(Mi=Qn.x+mn-ci.x+Kr.x),Qn.x-Mi-jr.x<0&&(Mi=Qn.x-jr.x),Qn.y+tn+Kr.y>ci.y&&(fo=Qn.y+tn-ci.y+Kr.y),Qn.y-fo-jr.y<0&&(fo=Qn.y-jr.y),(Mi||fo)&&(this.options.keepInView&&(this._autopanning=!0),$t.fire("autopanstart").panBy([Mi,fo]))}},_getAnchor:function(){return Jn(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Dc=function($t,Vt){return new Dh($t,Vt)};hs.mergeOptions({closePopupOnClick:!0}),hs.include({openPopup:function($t,Vt,tn){return this._initOverlay(Dh,$t,Vt,tn).openOn(this),this},closePopup:function($t){return $t=arguments.length?$t:this._popup,$t&&$t.close(),this}}),Is.include({bindPopup:function($t,Vt){return this._popup=this._initOverlay(Dh,this._popup,$t,Vt),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function($t){return this._popup&&(this instanceof ka||(this._popup._source=this),this._popup._prepareOpen($t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function($t){return this._popup&&this._popup.setContent($t),this},getPopup:function(){return this._popup},_openPopup:function($t){if(!(!this._popup||!this._map)){Cu($t);var Vt=$t.layer||$t.target;if(this._popup._source===Vt&&!(Vt instanceof ru)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup($t.latlng);return}this._popup._source=Vt,this.openPopup($t.latlng)}},_movePopup:function($t){this._popup.setLatLng($t.latlng)},_onKeyPress:function($t){$t.originalEvent.keyCode===13&&this._openPopup($t)}});var Tu=Vs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function($t){Vs.prototype.onAdd.call(this,$t),this.setOpacity(this.options.opacity),$t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function($t){Vs.prototype.onRemove.call(this,$t),$t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var $t=Vs.prototype.getEvents.call(this);return this.options.permanent||($t.preclick=this.close),$t},_initLayout:function(){var $t="leaflet-tooltip",Vt=$t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ki("div",Vt),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Lt(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function($t){var Vt,tn,mn=this._map,In=this._container,Qn=mn.latLngToContainerPoint(mn.getCenter()),Tr=mn.layerPointToContainerPoint($t),jr=this.options.direction,Kr=In.offsetWidth,ci=In.offsetHeight,Mi=Jn(this.options.offset),fo=this._getAnchor();jr==="top"?(Vt=Kr/2,tn=ci):jr==="bottom"?(Vt=Kr/2,tn=0):jr==="center"?(Vt=Kr/2,tn=ci/2):jr==="right"?(Vt=0,tn=ci/2):jr==="left"?(Vt=Kr,tn=ci/2):Tr.x<Qn.x?(jr="right",Vt=0,tn=ci/2):(jr="left",Vt=Kr+(Mi.x+fo.x)*2,tn=ci/2),$t=$t.subtract(Jn(Vt,tn,!0)).add(Mi).add(fo),oo(In,"leaflet-tooltip-right"),oo(In,"leaflet-tooltip-left"),oo(In,"leaflet-tooltip-top"),oo(In,"leaflet-tooltip-bottom"),So(In,"leaflet-tooltip-"+jr),Hs(In,$t)},_updatePosition:function(){var $t=this._map.latLngToLayerPoint(this._latlng);this._setPosition($t)},setOpacity:function($t){this.options.opacity=$t,this._container&&ao(this._container,$t)},_animateZoom:function($t){var Vt=this._map._latLngToNewLayerPoint(this._latlng,$t.zoom,$t.center);this._setPosition(Vt)},_getAnchor:function(){return Jn(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kg=function($t,Vt){return new Tu($t,Vt)};hs.include({openTooltip:function($t,Vt,tn){return this._initOverlay(Tu,$t,Vt,tn).openOn(this),this},closeTooltip:function($t){return $t.close(),this}}),Is.include({bindTooltip:function($t,Vt){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tu,this._tooltip,$t,Vt),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function($t){if(!(!$t&&this._tooltipHandlersAdded)){var Vt=$t?"off":"on",tn={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?tn.add=this._openTooltip:(tn.mouseover=this._openTooltip,tn.mouseout=this.closeTooltip,tn.click=this._openTooltip,this._map?this._addFocusListeners():tn.add=this._addFocusListeners),this._tooltip.options.sticky&&(tn.mousemove=this._moveTooltip),this[Vt](tn),this._tooltipHandlersAdded=!$t}},openTooltip:function($t){return this._tooltip&&(this instanceof ka||(this._tooltip._source=this),this._tooltip._prepareOpen($t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function($t){return this._tooltip&&this._tooltip.setContent($t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function($t){var Vt=typeof $t.getElement=="function"&&$t.getElement();Vt&&(To(Vt,"focus",function(){this._tooltip._source=$t,this.openTooltip()},this),To(Vt,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function($t){var Vt=typeof $t.getElement=="function"&&$t.getElement();Vt&&Vt.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function($t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var Vt=this;this._map.once("moveend",function(){Vt._openOnceFlag=!1,Vt._openTooltip($t)});return}this._tooltip._source=$t.layer||$t.target,this.openTooltip(this._tooltip.options.sticky?$t.latlng:void 0)}},_moveTooltip:function($t){var Vt=$t.latlng,tn,mn;this._tooltip.options.sticky&&$t.originalEvent&&(tn=this._map.mouseEventToContainerPoint($t.originalEvent),mn=this._map.containerPointToLayerPoint(tn),Vt=this._map.layerPointToLatLng(mn)),this._tooltip.setLatLng(Vt)}});var yp=fc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function($t){var Vt=$t&&$t.tagName==="DIV"?$t:document.createElement("div"),tn=this.options;if(tn.html instanceof Element?(Rl(Vt),Vt.appendChild(tn.html)):Vt.innerHTML=tn.html!==!1?tn.html:"",tn.bgPos){var mn=Jn(tn.bgPos);Vt.style.backgroundPosition=-mn.x+"px "+-mn.y+"px"}return this._setIconStyles(Vt,"icon"),Vt},createShadow:function(){return null}});function df($t){return new yp($t)}fc.Default=Mh;var bd=Is.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bi.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function($t){Zt(this,$t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function($t){$t._addZoomLimit(this)},onRemove:function($t){this._removeAllTiles(),br(this._container),$t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Or(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ea(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function($t){return this.options.opacity=$t,this._updateOpacity(),this},setZIndex:function($t){return this.options.zIndex=$t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var $t=this._clampZoom(this._map.getZoom());$t!==this._tileZoom&&(this._tileZoom=$t,this._updateLevels()),this._update()}return this},getEvents:function(){var $t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=It(this._onMoveEnd,this.options.updateInterval,this)),$t.move=this._onMove),this._zoomAnimated&&($t.zoomanim=this._animateZoom),$t},createTile:function(){return document.createElement("div")},getTileSize:function(){var $t=this.options.tileSize;return $t instanceof ir?$t:new ir($t,$t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function($t){for(var Vt=this.getPane().children,tn=-$t(-1/0,1/0),mn=0,In=Vt.length,Qn;mn<In;mn++)Qn=Vt[mn].style.zIndex,Vt[mn]!==this._container&&Qn&&(tn=$t(tn,+Qn));isFinite(tn)&&(this.options.zIndex=tn+$t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!bi.ielt9){ao(this._container,this.options.opacity);var $t=+new Date,Vt=!1,tn=!1;for(var mn in this._tiles){var In=this._tiles[mn];if(!(!In.current||!In.loaded)){var Qn=Math.min(1,($t-In.loaded)/200);ao(In.el,Qn),Qn<1?Vt=!0:(In.active?tn=!0:this._onOpaqueTile(In),In.active=!0)}}tn&&!this._noPrune&&this._pruneTiles(),Vt&&(cn(this._fadeFrame),this._fadeFrame=An(this._updateOpacity,this))}},_onOpaqueTile:Nt,_initContainer:function(){this._container||(this._container=Ki("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var $t=this._tileZoom,Vt=this.options.maxZoom;if($t!==void 0){for(var tn in this._levels)tn=Number(tn),this._levels[tn].el.children.length||tn===$t?(this._levels[tn].el.style.zIndex=Vt-Math.abs($t-tn),this._onUpdateLevel(tn)):(br(this._levels[tn].el),this._removeTilesAtZoom(tn),this._onRemoveLevel(tn),delete this._levels[tn]);var mn=this._levels[$t],In=this._map;return mn||(mn=this._levels[$t]={},mn.el=Ki("div","leaflet-tile-container leaflet-zoom-animated",this._container),mn.el.style.zIndex=Vt,mn.origin=In.project(In.unproject(In.getPixelOrigin()),$t).round(),mn.zoom=$t,this._setZoomTransform(mn,In.getCenter(),In.getZoom()),Nt(mn.el.offsetWidth),this._onCreateLevel(mn)),this._level=mn,mn}},_onUpdateLevel:Nt,_onRemoveLevel:Nt,_onCreateLevel:Nt,_pruneTiles:function(){if(!!this._map){var $t,Vt,tn=this._map.getZoom();if(tn>this.options.maxZoom||tn<this.options.minZoom){this._removeAllTiles();return}for($t in this._tiles)Vt=this._tiles[$t],Vt.retain=Vt.current;for($t in this._tiles)if(Vt=this._tiles[$t],Vt.current&&!Vt.active){var mn=Vt.coords;this._retainParent(mn.x,mn.y,mn.z,mn.z-5)||this._retainChildren(mn.x,mn.y,mn.z,mn.z+2)}for($t in this._tiles)this._tiles[$t].retain||this._removeTile($t)}},_removeTilesAtZoom:function($t){for(var Vt in this._tiles)this._tiles[Vt].coords.z===$t&&this._removeTile(Vt)},_removeAllTiles:function(){for(var $t in this._tiles)this._removeTile($t)},_invalidateAll:function(){for(var $t in this._levels)br(this._levels[$t].el),this._onRemoveLevel(Number($t)),delete this._levels[$t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function($t,Vt,tn,mn){var In=Math.floor($t/2),Qn=Math.floor(Vt/2),Tr=tn-1,jr=new ir(+In,+Qn);jr.z=+Tr;var Kr=this._tileCoordsToKey(jr),ci=this._tiles[Kr];return ci&&ci.active?(ci.retain=!0,!0):(ci&&ci.loaded&&(ci.retain=!0),Tr>mn?this._retainParent(In,Qn,Tr,mn):!1)},_retainChildren:function($t,Vt,tn,mn){for(var In=2*$t;In<2*$t+2;In++)for(var Qn=2*Vt;Qn<2*Vt+2;Qn++){var Tr=new ir(In,Qn);Tr.z=tn+1;var jr=this._tileCoordsToKey(Tr),Kr=this._tiles[jr];if(Kr&&Kr.active){Kr.retain=!0;continue}else Kr&&Kr.loaded&&(Kr.retain=!0);tn+1<mn&&this._retainChildren(In,Qn,tn+1,mn)}},_resetView:function($t){var Vt=$t&&($t.pinch||$t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),Vt,Vt)},_animateZoom:function($t){this._setView($t.center,$t.zoom,!0,$t.noUpdate)},_clampZoom:function($t){var Vt=this.options;return Vt.minNativeZoom!==void 0&&$t<Vt.minNativeZoom?Vt.minNativeZoom:Vt.maxNativeZoom!==void 0&&Vt.maxNativeZoom<$t?Vt.maxNativeZoom:$t},_setView:function($t,Vt,tn,mn){var In=Math.round(Vt);this.options.maxZoom!==void 0&&In>this.options.maxZoom||this.options.minZoom!==void 0&&In<this.options.minZoom?In=void 0:In=this._clampZoom(In);var Qn=this.options.updateWhenZooming&&In!==this._tileZoom;(!mn||Qn)&&(this._tileZoom=In,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),In!==void 0&&this._update($t),tn||this._pruneTiles(),this._noPrune=!!tn),this._setZoomTransforms($t,Vt)},_setZoomTransforms:function($t,Vt){for(var tn in this._levels)this._setZoomTransform(this._levels[tn],$t,Vt)},_setZoomTransform:function($t,Vt,tn){var mn=this._map.getZoomScale(tn,$t.zoom),In=$t.origin.multiplyBy(mn).subtract(this._map._getNewPixelOrigin(Vt,tn)).round();bi.any3d?cc($t.el,In,mn):Hs($t.el,In)},_resetGrid:function(){var $t=this._map,Vt=$t.options.crs,tn=this._tileSize=this.getTileSize(),mn=this._tileZoom,In=this._map.getPixelWorldBounds(this._tileZoom);In&&(this._globalTileRange=this._pxBoundsToTileRange(In)),this._wrapX=Vt.wrapLng&&!this.options.noWrap&&[Math.floor($t.project([0,Vt.wrapLng[0]],mn).x/tn.x),Math.ceil($t.project([0,Vt.wrapLng[1]],mn).x/tn.y)],this._wrapY=Vt.wrapLat&&!this.options.noWrap&&[Math.floor($t.project([Vt.wrapLat[0],0],mn).y/tn.x),Math.ceil($t.project([Vt.wrapLat[1],0],mn).y/tn.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function($t){var Vt=this._map,tn=Vt._animatingZoom?Math.max(Vt._animateToZoom,Vt.getZoom()):Vt.getZoom(),mn=Vt.getZoomScale(tn,this._tileZoom),In=Vt.project($t,this._tileZoom).floor(),Qn=Vt.getSize().divideBy(mn*2);return new hr(In.subtract(Qn),In.add(Qn))},_update:function($t){var Vt=this._map;if(!!Vt){var tn=this._clampZoom(Vt.getZoom());if($t===void 0&&($t=Vt.getCenter()),this._tileZoom!==void 0){var mn=this._getTiledPixelBounds($t),In=this._pxBoundsToTileRange(mn),Qn=In.getCenter(),Tr=[],jr=this.options.keepBuffer,Kr=new hr(In.getBottomLeft().subtract([jr,-jr]),In.getTopRight().add([jr,-jr]));if(!(isFinite(In.min.x)&&isFinite(In.min.y)&&isFinite(In.max.x)&&isFinite(In.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ci in this._tiles){var Mi=this._tiles[ci].coords;(Mi.z!==this._tileZoom||!Kr.contains(new ir(Mi.x,Mi.y)))&&(this._tiles[ci].current=!1)}if(Math.abs(tn-this._tileZoom)>1){this._setView($t,tn);return}for(var fo=In.min.y;fo<=In.max.y;fo++)for(var Ro=In.min.x;Ro<=In.max.x;Ro++){var tl=new ir(Ro,fo);if(tl.z=this._tileZoom,!!this._isValidTile(tl)){var ca=this._tiles[this._tileCoordsToKey(tl)];ca?ca.current=!0:Tr.push(tl)}}if(Tr.sort(function(hl,Lu){return hl.distanceTo(Qn)-Lu.distanceTo(Qn)}),Tr.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nl=document.createDocumentFragment();for(Ro=0;Ro<Tr.length;Ro++)this._addTile(Tr[Ro],nl);this._level.el.appendChild(nl)}}}},_isValidTile:function($t){var Vt=this._map.options.crs;if(!Vt.infinite){var tn=this._globalTileRange;if(!Vt.wrapLng&&($t.x<tn.min.x||$t.x>tn.max.x)||!Vt.wrapLat&&($t.y<tn.min.y||$t.y>tn.max.y))return!1}if(!this.options.bounds)return!0;var mn=this._tileCoordsToBounds($t);return Cr(this.options.bounds).overlaps(mn)},_keyToBounds:function($t){return this._tileCoordsToBounds(this._keyToTileCoords($t))},_tileCoordsToNwSe:function($t){var Vt=this._map,tn=this.getTileSize(),mn=$t.scaleBy(tn),In=mn.add(tn),Qn=Vt.unproject(mn,$t.z),Tr=Vt.unproject(In,$t.z);return[Qn,Tr]},_tileCoordsToBounds:function($t){var Vt=this._tileCoordsToNwSe($t),tn=new cr(Vt[0],Vt[1]);return this.options.noWrap||(tn=this._map.wrapLatLngBounds(tn)),tn},_tileCoordsToKey:function($t){return $t.x+":"+$t.y+":"+$t.z},_keyToTileCoords:function($t){var Vt=$t.split(":"),tn=new ir(+Vt[0],+Vt[1]);return tn.z=+Vt[2],tn},_removeTile:function($t){var Vt=this._tiles[$t];!Vt||(br(Vt.el),delete this._tiles[$t],this.fire("tileunload",{tile:Vt.el,coords:this._keyToTileCoords($t)}))},_initTile:function($t){So($t,"leaflet-tile");var Vt=this.getTileSize();$t.style.width=Vt.x+"px",$t.style.height=Vt.y+"px",$t.onselectstart=Nt,$t.onmousemove=Nt,bi.ielt9&&this.options.opacity<1&&ao($t,this.options.opacity)},_addTile:function($t,Vt){var tn=this._getTilePos($t),mn=this._tileCoordsToKey($t),In=this.createTile(this._wrapCoords($t),Et(this._tileReady,this,$t));this._initTile(In),this.createTile.length<2&&An(Et(this._tileReady,this,$t,null,In)),Hs(In,tn),this._tiles[mn]={el:In,coords:$t,current:!0},Vt.appendChild(In),this.fire("tileloadstart",{tile:In,coords:$t})},_tileReady:function($t,Vt,tn){Vt&&this.fire("tileerror",{error:Vt,tile:tn,coords:$t});var mn=this._tileCoordsToKey($t);tn=this._tiles[mn],tn&&(tn.loaded=+new Date,this._map._fadeAnimated?(ao(tn.el,0),cn(this._fadeFrame),this._fadeFrame=An(this._updateOpacity,this)):(tn.active=!0,this._pruneTiles()),Vt||(So(tn.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:tn.el,coords:$t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bi.ielt9||!this._map._fadeAnimated?An(this._pruneTiles,this):setTimeout(Et(this._pruneTiles,this),250)))},_getTilePos:function($t){return $t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function($t){var Vt=new ir(this._wrapX?Rt($t.x,this._wrapX):$t.x,this._wrapY?Rt($t.y,this._wrapY):$t.y);return Vt.z=$t.z,Vt},_pxBoundsToTileRange:function($t){var Vt=this.getTileSize();return new hr($t.min.unscaleBy(Vt).floor(),$t.max.unscaleBy(Vt).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var $t in this._tiles)if(!this._tiles[$t].loaded)return!1;return!0}});function Ag($t){return new bd($t)}var ku=bd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function($t,Vt){this._url=$t,Vt=Zt(this,Vt),Vt.detectRetina&&bi.retina&&Vt.maxZoom>0?(Vt.tileSize=Math.floor(Vt.tileSize/2),Vt.zoomReverse?(Vt.zoomOffset--,Vt.minZoom=Math.min(Vt.maxZoom,Vt.minZoom+1)):(Vt.zoomOffset++,Vt.maxZoom=Math.max(Vt.minZoom,Vt.maxZoom-1)),Vt.minZoom=Math.max(0,Vt.minZoom)):Vt.zoomReverse?Vt.minZoom=Math.min(Vt.maxZoom,Vt.minZoom):Vt.maxZoom=Math.max(Vt.minZoom,Vt.maxZoom),typeof Vt.subdomains=="string"&&(Vt.subdomains=Vt.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function($t,Vt){return this._url===$t&&Vt===void 0&&(Vt=!0),this._url=$t,Vt||this.redraw(),this},createTile:function($t,Vt){var tn=document.createElement("img");return To(tn,"load",Et(this._tileOnLoad,this,Vt,tn)),To(tn,"error",Et(this._tileOnError,this,Vt,tn)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(tn.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(tn.referrerPolicy=this.options.referrerPolicy),tn.alt="",tn.src=this.getTileUrl($t),tn},getTileUrl:function($t){var Vt={r:bi.retina?"@2x":"",s:this._getSubdomain($t),x:$t.x,y:$t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var tn=this._globalTileRange.max.y-$t.y;this.options.tms&&(Vt.y=tn),Vt["-y"]=tn}return Jt(this._url,_t(Vt,this.options))},_tileOnLoad:function($t,Vt){bi.ielt9?setTimeout(Et($t,this,null,Vt),0):$t(null,Vt)},_tileOnError:function($t,Vt,tn){var mn=this.options.errorTileUrl;mn&&Vt.getAttribute("src")!==mn&&(Vt.src=mn),$t(tn,Vt)},_onTileRemove:function($t){$t.tile.onload=null},_getZoomForUrl:function(){var $t=this._tileZoom,Vt=this.options.maxZoom,tn=this.options.zoomReverse,mn=this.options.zoomOffset;return tn&&($t=Vt-$t),$t+mn},_getSubdomain:function($t){var Vt=Math.abs($t.x+$t.y)%this.options.subdomains.length;return this.options.subdomains[Vt]},_abortLoading:function(){var $t,Vt;for($t in this._tiles)if(this._tiles[$t].coords.z!==this._tileZoom&&(Vt=this._tiles[$t].el,Vt.onload=Nt,Vt.onerror=Nt,!Vt.complete)){Vt.src=ln;var tn=this._tiles[$t].coords;br(Vt),delete this._tiles[$t],this.fire("tileabort",{tile:Vt,coords:tn})}},_removeTile:function($t){var Vt=this._tiles[$t];if(!!Vt)return Vt.el.setAttribute("src",ln),bd.prototype._removeTile.call(this,$t)},_tileReady:function($t,Vt,tn){if(!(!this._map||tn&&tn.getAttribute("src")===ln))return bd.prototype._tileReady.call(this,$t,Vt,tn)}});function xd($t,Vt){return new ku($t,Vt)}var Bh=ku.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function($t,Vt){this._url=$t;var tn=_t({},this.defaultWmsParams);for(var mn in Vt)mn in this.options||(tn[mn]=Vt[mn]);Vt=Zt(this,Vt);var In=Vt.detectRetina&&bi.retina?2:1,Qn=this.getTileSize();tn.width=Qn.x*In,tn.height=Qn.y*In,this.wmsParams=tn},onAdd:function($t){this._crs=this.options.crs||$t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var Vt=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[Vt]=this._crs.code,ku.prototype.onAdd.call(this,$t)},getTileUrl:function($t){var Vt=this._tileCoordsToNwSe($t),tn=this._crs,mn=lr(tn.project(Vt[0]),tn.project(Vt[1])),In=mn.min,Qn=mn.max,Tr=(this._wmsVersion>=1.3&&this._crs===Fa?[In.y,In.x,Qn.y,Qn.x]:[In.x,In.y,Qn.x,Qn.y]).join(","),jr=ku.prototype.getTileUrl.call(this,$t);return jr+Wt(this.wmsParams,jr,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Tr},setParams:function($t,Vt){return _t(this.wmsParams,$t),Vt||this.redraw(),this}});function vp($t,Vt){return new Bh($t,Vt)}ku.WMS=Bh,xd.wms=vp;var pc=Is.extend({options:{padding:.1},initialize:function($t){Zt(this,$t),Lt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),So(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var $t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&($t.zoomanim=this._onAnimZoom),$t},_onAnimZoom:function($t){this._updateTransform($t.center,$t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function($t,Vt){var tn=this._map.getZoomScale(Vt,this._zoom),mn=this._map.getSize().multiplyBy(.5+this.options.padding),In=this._map.project(this._center,Vt),Qn=mn.multiplyBy(-tn).add(In).subtract(this._map._getNewPixelOrigin($t,Vt));bi.any3d?cc(this._container,Qn,tn):Hs(this._container,Qn)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var $t in this._layers)this._layers[$t]._reset()},_onZoomEnd:function(){for(var $t in this._layers)this._layers[$t]._project()},_updatePaths:function(){for(var $t in this._layers)this._layers[$t]._update()},_update:function(){var $t=this.options.padding,Vt=this._map.getSize(),tn=this._map.containerPointToLayerPoint(Vt.multiplyBy(-$t)).round();this._bounds=new hr(tn,tn.add(Vt.multiplyBy(1+$t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ff=pc.extend({options:{tolerance:0},getEvents:function(){var $t=pc.prototype.getEvents.call(this);return $t.viewprereset=this._onViewPreReset,$t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var $t=this._container=document.createElement("canvas");To($t,"mousemove",this._onMouseMove,this),To($t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),To($t,"mouseout",this._handleMouseOut,this),$t._leaflet_disable_events=!0,this._ctx=$t.getContext("2d")},_destroyContainer:function(){cn(this._redrawRequest),delete this._ctx,br(this._container),ho(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var $t;this._redrawBounds=null;for(var Vt in this._layers)$t=this._layers[Vt],$t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pc.prototype._update.call(this);var $t=this._bounds,Vt=this._container,tn=$t.getSize(),mn=bi.retina?2:1;Hs(Vt,$t.min),Vt.width=mn*tn.x,Vt.height=mn*tn.y,Vt.style.width=tn.x+"px",Vt.style.height=tn.y+"px",bi.retina&&this._ctx.scale(2,2),this._ctx.translate(-$t.min.x,-$t.min.y),this.fire("update")}},_reset:function(){pc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function($t){this._updateDashArray($t),this._layers[Lt($t)]=$t;var Vt=$t._order={layer:$t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=Vt),this._drawLast=Vt,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function($t){this._requestRedraw($t)},_removePath:function($t){var Vt=$t._order,tn=Vt.next,mn=Vt.prev;tn?tn.prev=mn:this._drawLast=mn,mn?mn.next=tn:this._drawFirst=tn,delete $t._order,delete this._layers[Lt($t)],this._requestRedraw($t)},_updatePath:function($t){this._extendRedrawBounds($t),$t._project(),$t._update(),this._requestRedraw($t)},_updateStyle:function($t){this._updateDashArray($t),this._requestRedraw($t)},_updateDashArray:function($t){if(typeof $t.options.dashArray=="string"){var Vt=$t.options.dashArray.split(/[, ]+/),tn=[],mn,In;for(In=0;In<Vt.length;In++){if(mn=Number(Vt[In]),isNaN(mn))return;tn.push(mn)}$t.options._dashArray=tn}else $t.options._dashArray=$t.options.dashArray},_requestRedraw:function($t){!this._map||(this._extendRedrawBounds($t),this._redrawRequest=this._redrawRequest||An(this._redraw,this))},_extendRedrawBounds:function($t){if($t._pxBounds){var Vt=($t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new hr,this._redrawBounds.extend($t._pxBounds.min.subtract([Vt,Vt])),this._redrawBounds.extend($t._pxBounds.max.add([Vt,Vt]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var $t=this._redrawBounds;if($t){var Vt=$t.getSize();this._ctx.clearRect($t.min.x,$t.min.y,Vt.x,Vt.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var $t,Vt=this._redrawBounds;if(this._ctx.save(),Vt){var tn=Vt.getSize();this._ctx.beginPath(),this._ctx.rect(Vt.min.x,Vt.min.y,tn.x,tn.y),this._ctx.clip()}this._drawing=!0;for(var mn=this._drawFirst;mn;mn=mn.next)$t=mn.layer,(!Vt||$t._pxBounds&&$t._pxBounds.intersects(Vt))&&$t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function($t,Vt){if(!!this._drawing){var tn,mn,In,Qn,Tr=$t._parts,jr=Tr.length,Kr=this._ctx;if(!!jr){for(Kr.beginPath(),tn=0;tn<jr;tn++){for(mn=0,In=Tr[tn].length;mn<In;mn++)Qn=Tr[tn][mn],Kr[mn?"lineTo":"moveTo"](Qn.x,Qn.y);Vt&&Kr.closePath()}this._fillStroke(Kr,$t)}}},_updateCircle:function($t){if(!(!this._drawing||$t._empty())){var Vt=$t._point,tn=this._ctx,mn=Math.max(Math.round($t._radius),1),In=(Math.max(Math.round($t._radiusY),1)||mn)/mn;In!==1&&(tn.save(),tn.scale(1,In)),tn.beginPath(),tn.arc(Vt.x,Vt.y/In,mn,0,Math.PI*2,!1),In!==1&&tn.restore(),this._fillStroke(tn,$t)}},_fillStroke:function($t,Vt){var tn=Vt.options;tn.fill&&($t.globalAlpha=tn.fillOpacity,$t.fillStyle=tn.fillColor||tn.color,$t.fill(tn.fillRule||"evenodd")),tn.stroke&&tn.weight!==0&&($t.setLineDash&&$t.setLineDash(Vt.options&&Vt.options._dashArray||[]),$t.globalAlpha=tn.opacity,$t.lineWidth=tn.weight,$t.strokeStyle=tn.color,$t.lineCap=tn.lineCap,$t.lineJoin=tn.lineJoin,$t.stroke())},_onClick:function($t){for(var Vt=this._map.mouseEventToLayerPoint($t),tn,mn,In=this._drawFirst;In;In=In.next)tn=In.layer,tn.options.interactive&&tn._containsPoint(Vt)&&(!($t.type==="click"||$t.type==="preclick")||!this._map._draggableMoved(tn))&&(mn=tn);this._fireEvent(mn?[mn]:!1,$t)},_onMouseMove:function($t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var Vt=this._map.mouseEventToLayerPoint($t);this._handleMouseHover($t,Vt)}},_handleMouseOut:function($t){var Vt=this._hoveredLayer;Vt&&(oo(this._container,"leaflet-interactive"),this._fireEvent([Vt],$t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function($t,Vt){if(!this._mouseHoverThrottled){for(var tn,mn,In=this._drawFirst;In;In=In.next)tn=In.layer,tn.options.interactive&&tn._containsPoint(Vt)&&(mn=tn);mn!==this._hoveredLayer&&(this._handleMouseOut($t),mn&&(So(this._container,"leaflet-interactive"),this._fireEvent([mn],$t,"mouseover"),this._hoveredLayer=mn)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,$t),this._mouseHoverThrottled=!0,setTimeout(Et(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function($t,Vt,tn){this._map._fireDOMEvent(Vt,tn||Vt.type,$t)},_bringToFront:function($t){var Vt=$t._order;if(!!Vt){var tn=Vt.next,mn=Vt.prev;if(tn)tn.prev=mn;else return;mn?mn.next=tn:tn&&(this._drawFirst=tn),Vt.prev=this._drawLast,this._drawLast.next=Vt,Vt.next=null,this._drawLast=Vt,this._requestRedraw($t)}},_bringToBack:function($t){var Vt=$t._order;if(!!Vt){var tn=Vt.next,mn=Vt.prev;if(mn)mn.next=tn;else return;tn?tn.prev=mn:mn&&(this._drawLast=mn),Vt.prev=null,Vt.next=this._drawFirst,this._drawFirst.prev=Vt,this._drawFirst=Vt,this._requestRedraw($t)}}});function pf($t){return bi.canvas?new ff($t):null}var Au=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function($t){return document.createElement("<lvml:"+$t+' class="lvml">')}}catch{}return function($t){return document.createElement("<"+$t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Cl={_initContainer:function(){this._container=Ki("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pc.prototype._update.call(this),this.fire("update"))},_initPath:function($t){var Vt=$t._container=Au("shape");So(Vt,"leaflet-vml-shape "+(this.options.className||"")),Vt.coordsize="1 1",$t._path=Au("path"),Vt.appendChild($t._path),this._updateStyle($t),this._layers[Lt($t)]=$t},_addPath:function($t){var Vt=$t._container;this._container.appendChild(Vt),$t.options.interactive&&$t.addInteractiveTarget(Vt)},_removePath:function($t){var Vt=$t._container;br(Vt),$t.removeInteractiveTarget(Vt),delete this._layers[Lt($t)]},_updateStyle:function($t){var Vt=$t._stroke,tn=$t._fill,mn=$t.options,In=$t._container;In.stroked=!!mn.stroke,In.filled=!!mn.fill,mn.stroke?(Vt||(Vt=$t._stroke=Au("stroke")),In.appendChild(Vt),Vt.weight=mn.weight+"px",Vt.color=mn.color,Vt.opacity=mn.opacity,mn.dashArray?Vt.dashStyle=on(mn.dashArray)?mn.dashArray.join(" "):mn.dashArray.replace(/( *, *)/g," "):Vt.dashStyle="",Vt.endcap=mn.lineCap.replace("butt","flat"),Vt.joinstyle=mn.lineJoin):Vt&&(In.removeChild(Vt),$t._stroke=null),mn.fill?(tn||(tn=$t._fill=Au("fill")),In.appendChild(tn),tn.color=mn.fillColor||mn.color,tn.opacity=mn.fillOpacity):tn&&(In.removeChild(tn),$t._fill=null)},_updateCircle:function($t){var Vt=$t._point.round(),tn=Math.round($t._radius),mn=Math.round($t._radiusY||tn);this._setPath($t,$t._empty()?"M0 0":"AL "+Vt.x+","+Vt.y+" "+tn+","+mn+" 0,"+65535*360)},_setPath:function($t,Vt){$t._path.v=Vt},_bringToFront:function($t){Or($t._container)},_bringToBack:function($t){ea($t._container)}},gf=bi.vml?Au:pn,Fh=pc.extend({_initContainer:function(){this._container=gf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){br(this._container),ho(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pc.prototype._update.call(this);var $t=this._bounds,Vt=$t.getSize(),tn=this._container;(!this._svgSize||!this._svgSize.equals(Vt))&&(this._svgSize=Vt,tn.setAttribute("width",Vt.x),tn.setAttribute("height",Vt.y)),Hs(tn,$t.min),tn.setAttribute("viewBox",[$t.min.x,$t.min.y,Vt.x,Vt.y].join(" ")),this.fire("update")}},_initPath:function($t){var Vt=$t._path=gf("path");$t.options.className&&So(Vt,$t.options.className),$t.options.interactive&&So(Vt,"leaflet-interactive"),this._updateStyle($t),this._layers[Lt($t)]=$t},_addPath:function($t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild($t._path),$t.addInteractiveTarget($t._path)},_removePath:function($t){br($t._path),$t.removeInteractiveTarget($t._path),delete this._layers[Lt($t)]},_updatePath:function($t){$t._project(),$t._update()},_updateStyle:function($t){var Vt=$t._path,tn=$t.options;!Vt||(tn.stroke?(Vt.setAttribute("stroke",tn.color),Vt.setAttribute("stroke-opacity",tn.opacity),Vt.setAttribute("stroke-width",tn.weight),Vt.setAttribute("stroke-linecap",tn.lineCap),Vt.setAttribute("stroke-linejoin",tn.lineJoin),tn.dashArray?Vt.setAttribute("stroke-dasharray",tn.dashArray):Vt.removeAttribute("stroke-dasharray"),tn.dashOffset?Vt.setAttribute("stroke-dashoffset",tn.dashOffset):Vt.removeAttribute("stroke-dashoffset")):Vt.setAttribute("stroke","none"),tn.fill?(Vt.setAttribute("fill",tn.fillColor||tn.color),Vt.setAttribute("fill-opacity",tn.fillOpacity),Vt.setAttribute("fill-rule",tn.fillRule||"evenodd")):Vt.setAttribute("fill","none"))},_updatePoly:function($t,Vt){this._setPath($t,Rn($t._parts,Vt))},_updateCircle:function($t){var Vt=$t._point,tn=Math.max(Math.round($t._radius),1),mn=Math.max(Math.round($t._radiusY),1)||tn,In="a"+tn+","+mn+" 0 1,0 ",Qn=$t._empty()?"M0 0":"M"+(Vt.x-tn)+","+Vt.y+In+tn*2+",0 "+In+-tn*2+",0 ";this._setPath($t,Qn)},_setPath:function($t,Vt){$t._path.setAttribute("d",Vt)},_bringToFront:function($t){Or($t._path)},_bringToBack:function($t){ea($t._path)}});bi.vml&&Fh.include(Cl);function _p($t){return bi.svg||bi.vml?new Fh($t):null}hs.include({getRenderer:function($t){var Vt=$t.options.renderer||this._getPaneRenderer($t.options.pane)||this.options.renderer||this._renderer;return Vt||(Vt=this._renderer=this._createRenderer()),this.hasLayer(Vt)||this.addLayer(Vt),Vt},_getPaneRenderer:function($t){if($t==="overlayPane"||$t===void 0)return!1;var Vt=this._paneRenderers[$t];return Vt===void 0&&(Vt=this._createRenderer({pane:$t}),this._paneRenderers[$t]=Vt),Vt},_createRenderer:function($t){return this.options.preferCanvas&&pf($t)||_p($t)}});var mf=Nh.extend({initialize:function($t,Vt){Nh.prototype.initialize.call(this,this._boundsToLatLngs($t),Vt)},setBounds:function($t){return this.setLatLngs(this._boundsToLatLngs($t))},_boundsToLatLngs:function($t){return $t=Cr($t),[$t.getSouthWest(),$t.getNorthWest(),$t.getNorthEast(),$t.getSouthEast()]}});function Lg($t,Vt){return new mf($t,Vt)}Fh.create=gf,Fh.pointsToPath=Rn,js.geometryToLayer=cf,js.coordsToLatLng=El,js.coordsToLatLngs=Sl,js.latLngToCoords=Nc,js.latLngsToCoords=th,js.getFeature=nh,js.asFeature=vd,hs.mergeOptions({boxZoom:!0});var yf=Ta.extend({initialize:function($t){this._map=$t,this._container=$t._container,this._pane=$t._panes.overlayPane,this._resetStateTimeout=0,$t.on("unload",this._destroy,this)},addHooks:function(){To(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ho(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){br(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function($t){if(!$t.shiftKey||$t.which!==1&&$t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Wa(),Xl(),this._startPoint=this._map.mouseEventToContainerPoint($t),To(document,{contextmenu:Cu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function($t){this._moved||(this._moved=!0,this._box=Ki("div","leaflet-zoom-box",this._container),So(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint($t);var Vt=new hr(this._point,this._startPoint),tn=Vt.getSize();Hs(this._box,Vt.min),this._box.style.width=tn.x+"px",this._box.style.height=tn.y+"px"},_finish:function(){this._moved&&(br(this._box),oo(this._container,"leaflet-crosshair")),ta(),el(),ho(document,{contextmenu:Cu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function($t){if(!($t.which!==1&&$t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Et(this._resetState,this),0);var Vt=new cr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(Vt).fire("boxzoomend",{boxZoomBounds:Vt})}},_onKeyDown:function($t){$t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});hs.addInitHook("addHandler","boxZoom",yf),hs.mergeOptions({doubleClickZoom:!0});var zh=Ta.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function($t){var Vt=this._map,tn=Vt.getZoom(),mn=Vt.options.zoomDelta,In=$t.originalEvent.shiftKey?tn-mn:tn+mn;Vt.options.doubleClickZoom==="center"?Vt.setZoom(In):Vt.setZoomAround($t.containerPoint,In)}});hs.addInitHook("addHandler","doubleClickZoom",zh),hs.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var wd=Ta.extend({addHooks:function(){if(!this._draggable){var $t=this._map;this._draggable=new hc($t._mapPane,$t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),$t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),$t.on("zoomend",this._onZoomEnd,this),$t.whenReady(this._onZoomEnd,this))}So(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){oo(this._map._container,"leaflet-grab"),oo(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var $t=this._map;if($t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var Vt=Cr(this._map.options.maxBounds);this._offsetLimit=lr(this._map.latLngToContainerPoint(Vt.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(Vt.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;$t.fire("movestart").fire("dragstart"),$t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function($t){if(this._map.options.inertia){var Vt=this._lastTime=+new Date,tn=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(tn),this._times.push(Vt),this._prunePositions(Vt)}this._map.fire("move",$t).fire("drag",$t)},_prunePositions:function($t){for(;this._positions.length>1&&$t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var $t=this._map.getSize().divideBy(2),Vt=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=Vt.subtract($t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function($t,Vt){return $t-($t-Vt)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var $t=this._draggable._newPos.subtract(this._draggable._startPos),Vt=this._offsetLimit;$t.x<Vt.min.x&&($t.x=this._viscousLimit($t.x,Vt.min.x)),$t.y<Vt.min.y&&($t.y=this._viscousLimit($t.y,Vt.min.y)),$t.x>Vt.max.x&&($t.x=this._viscousLimit($t.x,Vt.max.x)),$t.y>Vt.max.y&&($t.y=this._viscousLimit($t.y,Vt.max.y)),this._draggable._newPos=this._draggable._startPos.add($t)}},_onPreDragWrap:function(){var $t=this._worldWidth,Vt=Math.round($t/2),tn=this._initialWorldOffset,mn=this._draggable._newPos.x,In=(mn-Vt+tn)%$t+Vt-tn,Qn=(mn+Vt+tn)%$t-Vt-tn,Tr=Math.abs(In+tn)<Math.abs(Qn+tn)?In:Qn;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Tr},_onDragEnd:function($t){var Vt=this._map,tn=Vt.options,mn=!tn.inertia||$t.noInertia||this._times.length<2;if(Vt.fire("dragend",$t),mn)Vt.fire("moveend");else{this._prunePositions(+new Date);var In=this._lastPos.subtract(this._positions[0]),Qn=(this._lastTime-this._times[0])/1e3,Tr=tn.easeLinearity,jr=In.multiplyBy(Tr/Qn),Kr=jr.distanceTo([0,0]),ci=Math.min(tn.inertiaMaxSpeed,Kr),Mi=jr.multiplyBy(ci/Kr),fo=ci/(tn.inertiaDeceleration*Tr),Ro=Mi.multiplyBy(-fo/2).round();!Ro.x&&!Ro.y?Vt.fire("moveend"):(Ro=Vt._limitOffset(Ro,Vt.options.maxBounds),An(function(){Vt.panBy(Ro,{duration:fo,easeLinearity:Tr,noMoveStart:!0,animate:!0})}))}}});hs.addInitHook("addHandler","dragging",wd),hs.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Pg=Ta.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function($t){this._map=$t,this._setPanDelta($t.options.keyboardPanDelta),this._setZoomDelta($t.options.zoomDelta)},addHooks:function(){var $t=this._map._container;$t.tabIndex<=0&&($t.tabIndex="0"),To($t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ho(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var $t=document.body,Vt=document.documentElement,tn=$t.scrollTop||Vt.scrollTop,mn=$t.scrollLeft||Vt.scrollLeft;this._map._container.focus(),window.scrollTo(mn,tn)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function($t){var Vt=this._panKeys={},tn=this.keyCodes,mn,In;for(mn=0,In=tn.left.length;mn<In;mn++)Vt[tn.left[mn]]=[-1*$t,0];for(mn=0,In=tn.right.length;mn<In;mn++)Vt[tn.right[mn]]=[$t,0];for(mn=0,In=tn.down.length;mn<In;mn++)Vt[tn.down[mn]]=[0,$t];for(mn=0,In=tn.up.length;mn<In;mn++)Vt[tn.up[mn]]=[0,-1*$t]},_setZoomDelta:function($t){var Vt=this._zoomKeys={},tn=this.keyCodes,mn,In;for(mn=0,In=tn.zoomIn.length;mn<In;mn++)Vt[tn.zoomIn[mn]]=$t;for(mn=0,In=tn.zoomOut.length;mn<In;mn++)Vt[tn.zoomOut[mn]]=-$t},_addHooks:function(){To(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ho(document,"keydown",this._onKeyDown,this)},_onKeyDown:function($t){if(!($t.altKey||$t.ctrlKey||$t.metaKey)){var Vt=$t.keyCode,tn=this._map,mn;if(Vt in this._panKeys){if(!tn._panAnim||!tn._panAnim._inProgress)if(mn=this._panKeys[Vt],$t.shiftKey&&(mn=Jn(mn).multiplyBy(3)),tn.options.maxBounds&&(mn=tn._limitOffset(Jn(mn),tn.options.maxBounds)),tn.options.worldCopyJump){var In=tn.wrapLatLng(tn.unproject(tn.project(tn.getCenter()).add(mn)));tn.panTo(In)}else tn.panBy(mn)}else if(Vt in this._zoomKeys)tn.setZoom(tn.getZoom()+($t.shiftKey?3:1)*this._zoomKeys[Vt]);else if(Vt===27&&tn._popup&&tn._popup.options.closeOnEscapeKey)tn.closePopup();else return;Cu($t)}}});hs.addInitHook("addHandler","keyboard",Pg),hs.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rh=Ta.extend({addHooks:function(){To(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ho(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function($t){var Vt=vg($t),tn=this._map.options.wheelDebounceTime;this._delta+=Vt,this._lastMousePos=this._map.mouseEventToContainerPoint($t),this._startTime||(this._startTime=+new Date);var mn=Math.max(tn-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Et(this._performZoom,this),mn),Cu($t)},_performZoom:function(){var $t=this._map,Vt=$t.getZoom(),tn=this._map.options.zoomSnap||0;$t._stop();var mn=this._delta/(this._map.options.wheelPxPerZoomLevel*4),In=4*Math.log(2/(1+Math.exp(-Math.abs(mn))))/Math.LN2,Qn=tn?Math.ceil(In/tn)*tn:In,Tr=$t._limitZoom(Vt+(this._delta>0?Qn:-Qn))-Vt;this._delta=0,this._startTime=null,Tr&&($t.options.scrollWheelZoom==="center"?$t.setZoom(Vt+Tr):$t.setZoomAround(this._lastMousePos,Vt+Tr))}});hs.addInitHook("addHandler","scrollWheelZoom",rh);var Hm=600;hs.mergeOptions({tapHold:bi.touchNative&&bi.safari&&bi.mobile,tapTolerance:15});var bp=Ta.extend({addHooks:function(){To(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ho(this._map._container,"touchstart",this._onDown,this)},_onDown:function($t){if(clearTimeout(this._holdTimeout),$t.touches.length===1){var Vt=$t.touches[0];this._startPos=this._newPos=new ir(Vt.clientX,Vt.clientY),this._holdTimeout=setTimeout(Et(function(){this._cancel(),this._isTapValid()&&(To(document,"touchend",la),To(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",Vt))},this),Hm),To(document,"touchend touchcancel contextmenu",this._cancel,this),To(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function $t(){ho(document,"touchend",la),ho(document,"touchend touchcancel",$t)},_cancel:function(){clearTimeout(this._holdTimeout),ho(document,"touchend touchcancel contextmenu",this._cancel,this),ho(document,"touchmove",this._onMove,this)},_onMove:function($t){var Vt=$t.touches[0];this._newPos=new ir(Vt.clientX,Vt.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function($t,Vt){var tn=new MouseEvent($t,{bubbles:!0,cancelable:!0,view:window,screenX:Vt.screenX,screenY:Vt.screenY,clientX:Vt.clientX,clientY:Vt.clientY});tn._simulated=!0,Vt.target.dispatchEvent(tn)}});hs.addInitHook("addHandler","tapHold",bp),hs.mergeOptions({touchZoom:bi.touch,bounceAtZoomLimits:!0});var Hh=Ta.extend({addHooks:function(){So(this._map._container,"leaflet-touch-zoom"),To(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){oo(this._map._container,"leaflet-touch-zoom"),ho(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function($t){var Vt=this._map;if(!(!$t.touches||$t.touches.length!==2||Vt._animatingZoom||this._zooming)){var tn=Vt.mouseEventToContainerPoint($t.touches[0]),mn=Vt.mouseEventToContainerPoint($t.touches[1]);this._centerPoint=Vt.getSize()._divideBy(2),this._startLatLng=Vt.containerPointToLatLng(this._centerPoint),Vt.options.touchZoom!=="center"&&(this._pinchStartLatLng=Vt.containerPointToLatLng(tn.add(mn)._divideBy(2))),this._startDist=tn.distanceTo(mn),this._startZoom=Vt.getZoom(),this._moved=!1,this._zooming=!0,Vt._stop(),To(document,"touchmove",this._onTouchMove,this),To(document,"touchend touchcancel",this._onTouchEnd,this),la($t)}},_onTouchMove:function($t){if(!(!$t.touches||$t.touches.length!==2||!this._zooming)){var Vt=this._map,tn=Vt.mouseEventToContainerPoint($t.touches[0]),mn=Vt.mouseEventToContainerPoint($t.touches[1]),In=tn.distanceTo(mn)/this._startDist;if(this._zoom=Vt.getScaleZoom(In,this._startZoom),!Vt.options.bounceAtZoomLimits&&(this._zoom<Vt.getMinZoom()&&In<1||this._zoom>Vt.getMaxZoom()&&In>1)&&(this._zoom=Vt._limitZoom(this._zoom)),Vt.options.touchZoom==="center"){if(this._center=this._startLatLng,In===1)return}else{var Qn=tn._add(mn)._divideBy(2)._subtract(this._centerPoint);if(In===1&&Qn.x===0&&Qn.y===0)return;this._center=Vt.unproject(Vt.project(this._pinchStartLatLng,this._zoom).subtract(Qn),this._zoom)}this._moved||(Vt._moveStart(!0,!1),this._moved=!0),cn(this._animRequest);var Tr=Et(Vt._move,Vt,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=An(Tr,this,!0),la($t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,cn(this._animRequest),ho(document,"touchmove",this._onTouchMove,this),ho(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});hs.addInitHook("addHandler","touchZoom",Hh),hs.BoxZoom=yf,hs.DoubleClickZoom=zh,hs.Drag=wd,hs.Keyboard=Pg,hs.ScrollWheelZoom=rh,hs.TapHold=bp,hs.TouchZoom=Hh,it.Bounds=hr,it.Browser=bi,it.CRS=Fr,it.Canvas=ff,it.Circle=lf,it.CircleMarker=af,it.Class=an,it.Control=xl,it.DivIcon=yp,it.DivOverlay=Vs,it.DomEvent=cl,it.DomUtil=Xu,it.Draggable=hc,it.Evented=Fn,it.FeatureGroup=ka,it.GeoJSON=js,it.GridLayer=bd,it.Handler=Ta,it.Icon=fc,it.ImageOverlay=ou,it.LatLng=Er,it.LatLngBounds=cr,it.Layer=Is,it.LayerGroup=Nl,it.LineUtil=Mc,it.Map=hs,it.Marker=eh,it.Mixin=hp,it.Path=ru,it.Point=ir,it.PolyUtil=Mm,it.Polygon=Nh,it.Polyline=iu,it.Popup=Dh,it.PosAnimation=Qd,it.Projection=$h,it.Rectangle=mf,it.Renderer=pc,it.SVG=Fh,it.SVGOverlay=Ys,it.TileLayer=ku,it.Tooltip=Tu,it.Transformation=gr,it.Util=Ln,it.VideoOverlay=mp,it.bind=Et,it.bounds=lr,it.canvas=pf,it.circle=Dm,it.circleMarker=Nm,it.control=Ph,it.divIcon=df,it.extend=_t,it.featureGroup=wa,it.geoJSON=uf,it.geoJson=Fm,it.gridLayer=Ag,it.icon=Cg,it.imageOverlay=zm,it.latLng=ar,it.latLngBounds=Cr,it.layerGroup=Rh,it.map=$m,it.marker=pp,it.point=Jn,it.polygon=Bm,it.polyline=gp,it.popup=Dc,it.rectangle=Lg,it.setOptions=Zt,it.stamp=Lt,it.svg=_p,it.svgOverlay=Tg,it.tileLayer=xd,it.tooltip=kg,it.transformation=er,it.version=st,it.videoOverlay=hf;var jh=window.L;it.noConflict=function(){return window.L=jh,this},window.L=it})})(leafletSrc,leafletSrc.exports);const L$1=leafletSrc.exports;var leafletGestureHandling_min={exports:{}};(function(nt,rt){(function(it,st){st(rt)})(commonjsGlobal$1,function(it){var st={ar:{touch:"\u0627\u0633\u062A\u062E\u062F\u0645 \u0625\u0635\u0628\u0639\u064A\u0646 \u0644\u062A\u062D\u0631\u064A\u0643 \u0627\u0644\u062E\u0631\u064A\u0637\u0629",scroll:"\u200F\u0627\u0633\u062A\u062E\u062F\u0645 ctrl + scroll \u0644\u062A\u0635\u063A\u064A\u0631/\u062A\u0643\u0628\u064A\u0631 \u0627\u0644\u062E\u0631\u064A\u0637\u0629",scrollMac:"\u064A\u0645\u0643\u0646\u0643 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u2318 + \u0627\u0644\u062A\u0645\u0631\u064A\u0631 \u0644\u062A\u0643\u0628\u064A\u0631/\u062A\u0635\u063A\u064A\u0631 \u0627\u0644\u062E\u0631\u064A\u0637\u0629"},bg:{touch:"\u0418\u0437\u043F\u043E\u043B\u0437\u0432\u0430\u0439\u0442\u0435 \u0434\u0432\u0430 \u043F\u0440\u044A\u0441\u0442\u0430, \u0437\u0430 \u0434\u0430 \u043F\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u0435 \u043A\u0430\u0440\u0442\u0430\u0442\u0430",scroll:"\u0417\u0430\u0434\u0440\u044A\u0436\u0442\u0435 \u0431\u0443\u0442\u043E\u043D\u0430 Ctrl \u043D\u0430\u0442\u0438\u0441\u043D\u0430\u0442, \u0434\u043E\u043A\u0430\u0442\u043E \u043F\u0440\u0435\u0432\u044A\u0440\u0442\u0430\u0442\u0435, \u0437\u0430 \u0434\u0430 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u043C\u0430\u0449\u0430\u0431\u0430 \u043D\u0430 \u043A\u0430\u0440\u0442\u0430\u0442\u0430",scrollMac:"\u0417\u0430\u0434\u0440\u044A\u0436\u0442\u0435 \u0431\u0443\u0442\u043E\u043D\u0430 \u2318 \u043D\u0430\u0442\u0438\u0441\u043D\u0430\u0442, \u0434\u043E\u043A\u0430\u0442\u043E \u043F\u0440\u0435\u0432\u044A\u0440\u0442\u0430\u0442\u0435, \u0437\u0430 \u0434\u0430 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u043C\u0430\u0449\u0430\u0431\u0430 \u043D\u0430 \u043A\u0430\u0440\u0442\u0430\u0442\u0430"},bn:{touch:"\u09AE\u09BE\u09A8\u099A\u09BF\u09A4\u09CD\u09B0\u099F\u09BF\u0995\u09C7 \u09B8\u09B0\u09BE\u09A4\u09C7 \u09A6\u09C1\u099F\u09BF \u0986\u0999\u09CD\u0997\u09C1\u09B2 \u09AC\u09CD\u09AF\u09AC\u09B9\u09BE\u09B0 \u0995\u09B0\u09C1\u09A8",scroll:"\u09AE\u09CD\u09AF\u09BE\u09AA \u099C\u09C1\u09AE \u0995\u09B0\u09A4\u09C7 ctrl + scroll \u09AC\u09CD\u09AF\u09AC\u09B9\u09BE\u09B0 \u0995\u09B0\u09C1\u09A8",scrollMac:"\u09AE\u09CD\u09AF\u09BE\u09AA\u09C7 \u099C\u09C1\u09AE \u0995\u09B0\u09A4\u09C7 \u2318 \u09AC\u09CB\u09A4\u09BE\u09AE \u099F\u09BF\u09AA\u09C7 \u09B8\u09CD\u0995\u09CD\u09B0\u09B2 \u0995\u09B0\u09C1\u09A8"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla \u2318 mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K\xA0posunut\xED mapy pou\u017Eijte dva prsty",scroll:"Velikost zobrazen\xED mapy zm\u011B\u0148te podr\u017Een\xEDm kl\xE1vesy Ctrl a\xA0posouv\xE1n\xEDm kole\u010Dka my\u0161i",scrollMac:"Velikost zobrazen\xED mapy zm\u011Bn\xEDte podr\u017Een\xEDm kl\xE1vesy \u2318 a\xA0posunut\xEDm kole\u010Dka my\u0161i / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud p\xE5 kortet",scrollMac:"Brug \u2318 + rullefunktionen til at zoome ind og ud p\xE5 kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"\u2318"},el:{touch:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03B4\u03CD\u03BF \u03B4\u03AC\u03C7\u03C4\u03C5\u03BB\u03B1 \u03B3\u03B9\u03B1 \u03BC\u03B5\u03C4\u03B1\u03BA\u03AF\u03BD\u03B7\u03C3\u03B7 \u03C3\u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7",scroll:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03BB\u03AE\u03BA\u03C4\u03C1\u03BF Ctrl \u03BA\u03B1\u03B9 \u03BA\u03CD\u03BB\u03B9\u03C3\u03B7, \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BC\u03B5\u03B3\u03B5\u03B8\u03CD\u03BD\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7",scrollMac:"\u03A7\u03C1\u03B7\u03C3\u03B9\u03BC\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C0\u03BB\u03AE\u03BA\u03C4\u03C1\u03BF \u2318 + \u03BA\u03CD\u03BB\u03B9\u03C3\u03B7 \u03B3\u03B9\u03B1 \u03B5\u03C3\u03C4\u03AF\u03B1\u03C3\u03B7 \u03C3\u03C4\u03BF\u03BD \u03C7\u03AC\u03C1\u03C4\u03B7"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mant\xE9n pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mant\xE9n pulsada la tecla \u2318 mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta \u2318 eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"\u0628\u0631\u0627\u06CC \u062D\u0631\u06A9\u062A \u062F\u0627\u062F\u0646 \u0646\u0642\u0634\u0647 \u0627\u0632 \u062F\u0648 \u0627\u0646\u06AF\u0634\u062A \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F.",scroll:"\u200F\u0628\u0631\u0627\u06CC \u0628\u0632\u0631\u06AF\u200C\u0646\u0645\u0627\u06CC\u06CC \u0646\u0642\u0634\u0647 \u0627\u0632 ctrl + scroll \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F",scrollMac:"\u0628\u0631\u0627\u06CC \u0628\u0632\u0631\u06AF\u200C\u0646\u0645\u0627\u06CC\u06CC \u0646\u0642\u0634\u0647\u060C \u0627\u0632 \u2318 + \u067E\u06CC\u0645\u0627\u06CC\u0634 \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F."},fi:{touch:"Siirr\xE4 karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vieritt\xE4m\xE4ll\xE4.",scrollMac:"Zoomaa karttaa pit\xE4m\xE4ll\xE4 painike \u2318 painettuna ja vieritt\xE4m\xE4ll\xE4."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang \u2318 + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux\xA0doigts pour d\xE9placer la carte",scroll:"Vous pouvez zoomer sur la carte \xE0 l'aide de CTRL+Molette de d\xE9filement",scrollMac:"Vous pouvez zoomer sur la carte \xE0 l'aide de \u2318+Molette de d\xE9filement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme \u2318 e despr\xE1zate para ampliar o mapa"},gu:{touch:"\u0AA8\u0A95\u0AB6\u0ACB \u0A96\u0AB8\u0AC7\u0AA1\u0AB5\u0ABE \u0AAC\u0AC7 \u0A86\u0A82\u0A97\u0AB3\u0AC0\u0A93\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB",scroll:"\u0AA8\u0A95\u0AB6\u0ABE\u0AA8\u0AC7 \u0A9D\u0AC2\u0AAE \u0A95\u0AB0\u0AB5\u0ABE \u0AAE\u0ABE\u0A9F\u0AC7 ctrl + \u0AB8\u0ACD\u0A95\u0ACD\u0AB0\u0ACB\u0AB2\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB",scrollMac:"\u0AA8\u0A95\u0AB6\u0ABE\u0AA8\u0AC7 \u0A9D\u0AC2\u0AAE \u0A95\u0AB0\u0AB5\u0ABE \u2318 + \u0AB8\u0ACD\u0A95\u0ACD\u0AB0\u0ACB\u0AB2\u0AA8\u0ACB \u0A89\u0AAA\u0AAF\u0ACB\u0A97 \u0A95\u0AB0\u0ACB"},hi:{touch:"\u092E\u0948\u092A \u090F\u0915 \u091C\u0917\u0939 \u0938\u0947 \u0926\u0942\u0938\u0930\u0940 \u091C\u0917\u0939 \u0932\u0947 \u091C\u093E\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u0926\u094B \u0909\u0902\u0917\u0932\u093F\u092F\u094B\u0902 \u0915\u093E \u0907\u0938\u094D\u0924\u0947\u092E\u093E\u0932 \u0915\u0930\u0947\u0902",scroll:"\u092E\u0948\u092A \u0915\u094B \u091C\u093C\u0942\u092E \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F ctrl + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0915\u093E \u0909\u092A\u092F\u094B\u0917 \u0915\u0930\u0947\u0902",scrollMac:"\u092E\u0948\u092A \u0915\u094B \u091C\u093C\u0942\u092E \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093F\u090F \u2318 + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0915\u093E \u0909\u092A\u092F\u094B\u0917 \u0915\u0930\u0947\u0902"},hr:{touch:"Pomi\u010Dite kartu pomo\u0107u dva prsta",scroll:"Upotrijebite Ctrl i kliza\u010D mi\u0161a da biste zumirali kartu",scrollMac:"Upotrijebite gumb \u2318 dok se pomi\u010Dete za zumiranje karte"},hu:{touch:"K\xE9t ujjal mozgassa a t\xE9rk\xE9pet",scroll:"A t\xE9rk\xE9p a ctrl + g\xF6rget\xE9s haszn\xE1lat\xE1val nagy\xEDthat\xF3",scrollMac:"A t\xE9rk\xE9p a \u2318 + g\xF6rget\xE9s haszn\xE1lat\xE1val nagy\xEDthat\xF3"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan \u2318 + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza \u2318 + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"\u05D4\u05D6\u05D6 \u05D0\u05EA \u05D4\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05E9\u05EA\u05D9 \u05D0\u05E6\u05D1\u05E2\u05D5\u05EA",scroll:"\u200F\u05D0\u05E4\u05E9\u05E8 \u05DC\u05E9\u05E0\u05D5\u05EA \u05D0\u05EA \u05DE\u05E8\u05D7\u05E7 \u05D4\u05EA\u05E6\u05D5\u05D2\u05D4 \u05D1\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05DE\u05E7\u05E9 ctrl \u05D5\u05D2\u05DC\u05D9\u05DC\u05D4",scrollMac:"\u05D0\u05E4\u05E9\u05E8 \u05DC\u05E9\u05E0\u05D5\u05EA \u05D0\u05EA \u05DE\u05E8\u05D7\u05E7 \u05D4\u05EA\u05E6\u05D5\u05D2\u05D4 \u05D1\u05DE\u05E4\u05D4 \u05D1\u05D0\u05DE\u05E6\u05E2\u05D5\u05EA \u05DE\u05E7\u05E9 \u2318 \u05D5\u05D2\u05DC\u05D9\u05DC\u05D4"},ja:{touch:"\u5730\u56F3\u3092\u79FB\u52D5\u3055\u305B\u308B\u306B\u306F\u6307 2 \u672C\u3067\u64CD\u4F5C\u3057\u307E\u3059",scroll:"\u5730\u56F3\u3092\u30BA\u30FC\u30E0\u3059\u308B\u306B\u306F\u3001Ctrl \u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044",scrollMac:"\u5730\u56F3\u3092\u30BA\u30FC\u30E0\u3059\u308B\u306B\u306F\u3001\u2318 \u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use \u2318 + scroll to zoom the map"},ko:{touch:"\uC9C0\uB3C4\uB97C \uC6C0\uC9C1\uC774\uB824\uBA74 \uB450 \uC190\uAC00\uB77D\uC744 \uC0AC\uC6A9\uD558\uC138\uC694.",scroll:"\uC9C0\uB3C4\uB97C \uD655\uB300/\uCD95\uC18C\uD558\uB824\uBA74 Ctrl\uC744 \uB204\uB978 \uCC44 \uC2A4\uD06C\uB864\uD558\uC138\uC694.",scrollMac:"\uC9C0\uB3C4\uB97C \uD655\uB300\uD558\uB824\uBA74 \u2318 + \uC2A4\uD06C\uB864 \uC0AC\uC6A9"},lt:{touch:"Perkelkite \u017Eem\u0117lap\u012F dviem pir\u0161tais",scroll:"Slinkite nuspaud\u0119 klavi\u0161\u0105 \u201ECtrl\u201C, kad pakeistum\u0117te \u017Eem\u0117lapio mastel\u012F",scrollMac:"Paspauskite klavi\u0161\u0105 \u2318 ir slinkite, kad priartintum\u0117te \u017Eem\u0117lap\u012F"},lv:{touch:"Lai p\u0101rvietotu karti, b\u012Bdiet to ar diviem pirkstiem",scroll:"Kartes t\u0101lummai\u0146ai izmantojiet ctrl + ritin\u0101\u0161anu",scrollMac:"Lai veiktu kartes t\u0101lummai\u0146u, izmantojiet \u2318 + ritin\u0101\u0161anu"},ml:{touch:"\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u0D28\u0D40\u0D15\u0D4D\u0D15\u0D3E\u0D7B \u0D30\u0D23\u0D4D\u0D1F\u0D4D \u0D35\u0D3F\u0D30\u0D32\u0D41\u0D15\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D15\u0D4D\u0D15\u0D41\u0D15",scroll:"\u0D15\u0D7A\u0D1F\u0D4D\u0D30\u0D4B\u0D7E + \u0D38\u0D4D\u200C\u0D15\u0D4D\u0D30\u0D4B\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D1A\u0D4D\u0D1A\u0D4D \u200C\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u200C\u0D38\u0D42\u0D02 \u0D1A\u0D46\u0D2F\u0D4D\u0D2F\u0D41\u0D15",scrollMac:"\u2318 + \u0D38\u0D4D\u200C\u0D15\u0D4D\u0D30\u0D4B\u0D7E \u0D09\u0D2A\u0D2F\u0D4B\u0D17\u0D3F\u0D1A\u0D4D\u0D1A\u0D4D \u200C\u0D2E\u0D3E\u0D2A\u0D4D\u0D2A\u0D4D \u200C\u0D38\u0D42\u0D02 \u0D1A\u0D46\u0D2F\u0D4D\u0D2F\u0D41\u0D15"},mr:{touch:"\u0928\u0915\u093E\u0936\u093E \u0939\u0932\u0935\u093F\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 \u0926\u094B\u0928 \u092C\u094B\u091F\u0947 \u0935\u093E\u092A\u0930\u093E",scroll:"\u0928\u0915\u093E\u0936\u093E \u091D\u0942\u092E \u0915\u0930\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 ctrl + scroll \u0935\u093E\u092A\u0930\u093E",scrollMac:"\u0928\u0915\u093E\u0936\u093E\u0935\u0930 \u091D\u0942\u092E \u0915\u0930\u0923\u094D\u092F\u093E\u0938\u093E\u0920\u0940 \u2318 + \u0938\u094D\u0915\u094D\u0930\u094B\u0932 \u0935\u093E\u092A\u0930\u093E"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik \u2318 + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for \xE5 flytte kartet",scroll:"Hold ctrl-tasten inne og rull for \xE5 zoome p\xE5 kartet",scrollMac:"Hold inne \u2318-tasten og rull for \xE5 zoome p\xE5 kartet"},pl:{touch:"Przesu\u0144 map\u0119 dwoma palcami",scroll:"Naci\u015Bnij CTRL i przewi\u0144, by przybli\u017Cy\u0107 map\u0119",scrollMac:"Naci\u015Bnij\xA0\u2318 i przewi\u0144, by przybli\u017Cy\u0107 map\u0119"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use \u2318 e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use \u2318 e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize \u2318 + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosi\u021Bi dou\u0103 degete pentru a deplasa harta",scroll:"Ap\u0103sa\u021Bi tasta ctrl \u0219i derula\u021Bi simultan pentru a m\u0103ri harta",scrollMac:"Folosi\u021Bi \u2318 \u0219i derula\u021Bi pentru a m\u0103ri/mic\u0219ora harta"},ru:{touch:"\u0427\u0442\u043E\u0431\u044B \u043F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u0443, \u043F\u0440\u043E\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E \u043D\u0435\u0439 \u0434\u0432\u0443\u043C\u044F \u043F\u0430\u043B\u044C\u0446\u0430\u043C\u0438",scroll:"\u0427\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043C\u0430\u0441\u0448\u0442\u0430\u0431, \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0438\u0432\u0430\u0439\u0442\u0435 \u043A\u0430\u0440\u0442\u0443, \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044F \u043A\u043B\u0430\u0432\u0438\u0448\u0443 Ctrl.",scrollMac:"\u0427\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043C\u0430\u0441\u0448\u0442\u0430\u0431, \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u2318\xA0+ \u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430"},sk:{touch:"Mapu m\xF4\u017Eete posun\xFA\u0165 dvoma prstami",scroll:"Ak chcete pribl\xED\u017Ei\u0165 mapu, stla\u010Dte kl\xE1ves ctrl a\xA0pos\xFAvajte",scrollMac:"Ak chcete pribl\xED\u017Ei\u0165 mapu, stla\u010Dte kl\xE1ves \u2318 a\xA0pos\xFAvajte kolieskom my\u0161i"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid pove\u010Date tako, da dr\u017Eite tipko Ctrl in vrtite kolesce na mi\u0161ki",scrollMac:"Uporabite \u2318 + funkcijo pomika, da pove\u010Date ali pomanj\u0161ate zemljevid"},sr:{touch:"\u041C\u0430\u043F\u0443 \u043F\u043E\u043C\u0435\u0440\u0430\u0458\u0442\u0435 \u043F\u043E\u043C\u043E\u045B\u0443 \u0434\u0432\u0430 \u043F\u0440\u0441\u0442\u0430",scroll:"\u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 ctrl \u0442\u0430\u0441\u0442\u0435\u0440 \u0434\u043E\u043A \u043F\u043E\u043C\u0435\u0440\u0430\u0442\u0435 \u0434\u0430 \u0431\u0438\u0441\u0442\u0435 \u0437\u0443\u043C\u0438\u0440\u0430\u043B\u0438 \u043C\u0430\u043F\u0443",scrollMac:"\u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 \u0442\u0430\u0441\u0442\u0435\u0440 \u2318 \u0434\u043E\u043A \u043F\u043E\u043C\u0435\u0440\u0430\u0442\u0435 \u0434\u0430 \u0431\u0438\u0441\u0442\u0435 \u0437\u0443\u043C\u0438\u0440\u0430\u043B\u0438 \u043C\u0430\u043F\u0443"},sv:{touch:"Anv\xE4nd tv\xE5 fingrar f\xF6r att flytta kartan",scroll:"Anv\xE4nd ctrl + rulla f\xF6r att zooma kartan",scrollMac:"Anv\xE4nd \u2318 + rulla f\xF6r att zooma p\xE5 kartan"},ta:{touch:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BA8\u0B95\u0BB0\u0BCD\u0BA4\u0BCD\u0BA4 \u0B87\u0BB0\u0BA3\u0BCD\u0B9F\u0BC1 \u0BB5\u0BBF\u0BB0\u0BB2\u0BCD\u0B95\u0BB3\u0BC8\u0BAA\u0BCD \u0BAA\u0BAF\u0BA9\u0BCD\u0BAA\u0B9F\u0BC1\u0BA4\u0BCD\u0BA4\u0BB5\u0BC1\u0BAE\u0BCD",scroll:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BAA\u0BC6\u0BB0\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF/\u0B9A\u0BBF\u0BB1\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF\u0BAA\u0BCD \u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95, ctrl \u0BAA\u0B9F\u0BCD\u0B9F\u0BA9\u0BC8\u0BAA\u0BCD \u0BAA\u0BBF\u0B9F\u0BBF\u0BA4\u0BCD\u0BA4\u0BAA\u0B9F\u0BBF, \u0BAE\u0BC7\u0BB2\u0BC7/\u0B95\u0BC0\u0BB4\u0BC7 \u0BB8\u0BCD\u0B95\u0BCD\u0BB0\u0BBE\u0BB2\u0BCD \u0B9A\u0BC6\u0BAF\u0BCD\u0BAF\u0BB5\u0BC1\u0BAE\u0BCD",scrollMac:"\u0BAE\u0BC7\u0BAA\u0BCD\u0BAA\u0BC8 \u0BAA\u0BC6\u0BB0\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF/\u0B9A\u0BBF\u0BB1\u0BBF\u0BA4\u0BBE\u0B95\u0BCD\u0B95\u0BBF\u0BAA\u0BCD \u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95, \u2318 \u0BAA\u0B9F\u0BCD\u0B9F\u0BA9\u0BC8\u0BAA\u0BCD \u0BAA\u0BBF\u0B9F\u0BBF\u0BA4\u0BCD\u0BA4\u0BAA\u0B9F\u0BBF, \u0BAE\u0BC7\u0BB2\u0BC7/\u0B95\u0BC0\u0BB4\u0BC7 \u0BB8\u0BCD\u0B95\u0BCD\u0BB0\u0BBE\u0BB2\u0BCD \u0B9A\u0BC6\u0BAF\u0BCD\u0BAF\u0BB5\u0BC1\u0BAE\u0BCD"},te:{touch:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D\u200C\u0C28\u0C3F \u0C24\u0C30\u0C32\u0C3F\u0C02\u0C1A\u0C21\u0C02 \u0C15\u0C4B\u0C38\u0C02 \u0C30\u0C46\u0C02\u0C21\u0C41 \u0C35\u0C47\u0C33\u0C4D\u0C32\u0C28\u0C41 \u0C09\u0C2A\u0C2F\u0C4B\u0C17\u0C3F\u0C02\u0C1A\u0C02\u0C21\u0C3F",scroll:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D\u200C\u0C28\u0C3F \u0C1C\u0C42\u0C2E\u0C4D \u0C1A\u0C47\u0C2F\u0C21\u0C3E\u0C28\u0C3F\u0C15\u0C3F ctrl \u0C2C\u0C1F\u0C28\u0C4D\u200C\u0C28\u0C41 \u0C28\u0C4A\u0C15\u0C4D\u0C15\u0C3F \u0C09\u0C02\u0C1A\u0C3F, \u0C38\u0C4D\u0C15\u0C4D\u0C30\u0C4B\u0C32\u0C4D \u0C1A\u0C47\u0C2F\u0C02\u0C21\u0C3F",scrollMac:"\u0C2E\u0C4D\u0C2F\u0C3E\u0C2A\u0C4D \u0C1C\u0C42\u0C2E\u0C4D \u0C1A\u0C47\u0C2F\u0C3E\u0C32\u0C02\u0C1F\u0C47 \u2318 + \u0C38\u0C4D\u0C15\u0C4D\u0C30\u0C4B\u0C32\u0C4D \u0C09\u0C2A\u0C2F\u0C4B\u0C17\u0C3F\u0C02\u0C1A\u0C02\u0C21\u0C3F"},th:{touch:"\u0E43\u0E0A\u0E49 2 \u0E19\u0E34\u0E49\u0E27\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48",scroll:"\u0E01\u0E14 Ctrl \u0E04\u0E49\u0E32\u0E07\u0E44\u0E27\u0E49 \u0E41\u0E25\u0E49\u0E27\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E0B\u0E39\u0E21\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48",scrollMac:"\u0E01\u0E14 \u2318 \u0E41\u0E25\u0E49\u0E27\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E0B\u0E39\u0E21\u0E41\u0E1C\u0E19\u0E17\u0E35\u0E48"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang \u2318 + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek i\xE7in iki parma\u011F\u0131n\u0131z\u0131 kullan\u0131n",scroll:"Haritay\u0131 yak\u0131nla\u015Ft\u0131rmak i\xE7in ctrl + kayd\u0131rma kombinasyonunu kullan\u0131n",scrollMac:"Haritay\u0131 yak\u0131nla\u015Ft\u0131rmak i\xE7in \u2318 tu\u015Funa bas\u0131p ekran\u0131 kayd\u0131r\u0131n"},uk:{touch:"\u041F\u0435\u0440\u0435\u043C\u0456\u0449\u0443\u0439\u0442\u0435 \u043A\u0430\u0440\u0442\u0443 \u0434\u0432\u043E\u043C\u0430 \u043F\u0430\u043B\u044C\u0446\u044F\u043C\u0438",scroll:"\u0429\u043E\u0431 \u0437\u043C\u0456\u043D\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0441\u0448\u0442\u0430\u0431 \u043A\u0430\u0440\u0442\u0438, \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0443\u0439\u0442\u0435 \u043A\u043E\u043B\u0456\u0449\u0430\u0442\u043A\u043E \u043C\u0438\u0448\u0456, \u0443\u0442\u0440\u0438\u043C\u0443\u044E\u0447\u0438 \u043A\u043B\u0430\u0432\u0456\u0448\u0443 Ctrl",scrollMac:"\u0429\u043E\u0431 \u0437\u043C\u0456\u043D\u0438\u0442\u0438 \u043C\u0430\u0441\u0448\u0442\u0430\u0431 \u043A\u0430\u0440\u0442\u0438, \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0439\u0442\u0435 \u2318 + \u043F\u0440\u043E\u043A\u0440\u0443\u0447\u0443\u0432\u0430\u043D\u043D\u044F"},vi:{touch:"S\u1EED d\u1EE5ng hai ng\xF3n tay \u0111\u1EC3 di chuy\u1EC3n b\u1EA3n \u0111\u1ED3",scroll:"S\u1EED d\u1EE5ng ctrl + cu\u1ED9n \u0111\u1EC3 thu ph\xF3ng b\u1EA3n \u0111\u1ED3",scrollMac:"S\u1EED d\u1EE5ng \u2318 + cu\u1ED9n \u0111\u1EC3 thu ph\xF3ng b\u1EA3n \u0111\u1ED3"},"zh-CN":{touch:"\u4F7F\u7528\u53CC\u6307\u79FB\u52A8\u5730\u56FE",scroll:"\u6309\u4F4F Ctrl \u5E76\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u624D\u53EF\u7F29\u653E\u5730\u56FE",scrollMac:"\u6309\u4F4F \u2318 \u5E76\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u624D\u53EF\u7F29\u653E\u5730\u56FE"},"zh-TW":{touch:"\u540C\u6642\u4EE5\u5169\u6307\u79FB\u52D5\u5730\u5716",scroll:"\u6309\u4F4F ctrl \u9375\u52A0\u4E0A\u6372\u52D5\u6ED1\u9F20\u53EF\u4EE5\u7E2E\u653E\u5730\u5716",scrollMac:"\u6309 \u2318 \u52A0\u4E0A\u6EFE\u52D5\u6372\u8EF8\u53EF\u4EE5\u7E2E\u653E\u5730\u5716"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var _t=!1,xt=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(Et){Et.type=="movestart"||Et.type=="move"?_t=!0:Et.type=="moveend"&&(_t=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var Et;if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)Et=this._map.options.gestureHandlingOptions.text;else{var kt=this._getUserLanguage();kt||(kt="en"),st[kt]&&(Et=st[kt]),Et||kt.indexOf("-")===-1||(kt=kt.split("-")[0],Et=st[kt]),Et||(Et=st[kt="en"])}var Lt=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(Lt=!0);var It=Et.scroll;Lt&&(It=Et.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",Et.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",It)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(Et){for(var kt=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],Lt=!1,It=0;It<kt.length;It++)L.DomUtil.hasClass(Et.target,kt[It])&&(Lt=!0);Lt?L.DomUtil.hasClass(Et.target,"leaflet-interactive")&&Et.type==="touchmove"&&Et.touches.length===1?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):Et.type==="touchmove"||Et.type==="touchstart"?Et.touches.length===1?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(Et.preventDefault(),this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(Et){Et.metaKey||Et.ctrlKey?(Et.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var kt=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),Lt=0;Lt<kt.length;Lt++)L.DomUtil.removeClass(kt[Lt],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(Et){this._enableInteractions()},_handleMouseOut:function(Et){_t||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",xt),it.GestureHandling=xt,it.default=xt,Object.defineProperty(it,"__esModule",{value:!0})})})(leafletGestureHandling_min,leafletGestureHandling_min.exports);L.Control.Opacity=L.Control.extend({options:{collapsed:!1,position:"topright",label:null},initialize:function(nt,rt){for(const it in L.Util.setOptions(this,rt),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,nt)this._addLayer(nt[it],it,!0)},onAdd:function(nt){return this._initLayout(),this._update(),this._container},expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var nt=this._map.getSize().y-(this._container.offsetTop+50);return nt<this._form.clientHeight?(L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=nt+"px"):L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this},collapse:function(){return L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){const nt="leaflet-control-layers",rt=this._container=L.DomUtil.create("div",nt),it=this.options.collapsed;if(rt.setAttribute("aria-haspopup",!0),L.DomEvent.disableClickPropagation(rt),L.DomEvent.disableScrollPropagation(rt),this.options.label){const xt=L.DomUtil.create("p",nt+"-label");xt.innerHTML=this.options.label,rt.appendChild(xt)}var st=this._form=L.DomUtil.create("form",nt+"-list");it&&(this._map.on("click zoom move",this.collapse,this),L.Browser.android||L.DomEvent.on(rt,{mouseenter:this.expand,mouseleave:this.collapse},this));const _t=this._layersLink=L.DomUtil.create("a",nt+"-toggle",rt);_t.href="#",_t.title="Layers",L.Browser.touch?(L.DomEvent.on(_t,"click",L.DomEvent.stop),L.DomEvent.on(_t,"click",this.expand,this)):L.DomEvent.on(_t,"focus",this.expand,this),it||this.expand(),this._baseLayersList=L.DomUtil.create("div",nt+"-base",st),this._separator=L.DomUtil.create("div",nt+"-separator",st),this._overlaysList=L.DomUtil.create("div",nt+"-overlays",st),rt.appendChild(st)},_getLayer:function(nt){for(let rt=0;rt<this._layers.length;rt++)if(this._layers[rt]&&L.Util.stamp(this._layers[rt].layer)===nt)return this._layers[rt]},_addLayer:function(nt,rt,it){this._layers.push({layer:nt,name:rt,overlay:it})},_update:function(){if(!this._container)return this;L.DomUtil.empty(this._baseLayersList),L.DomUtil.empty(this._overlaysList),this._layerControlInputs=[];let nt,rt,it,st,_t=0;for(it=0;it<this._layers.length;it++)st=this._layers[it],this._addItem(st),rt=rt||st.overlay,nt=nt||!st.overlay,_t+=st.overlay?0:1;this.options.hideSingleBase&&(nt=nt&&1<_t,this._baseLayersList.style.display=nt?"":"none"),this._separator.style.display=rt&&nt?"":"none"},_addItem:function(nt){let rt=document.createElement("label"),it=document.createElement("input");nt.overlay?(it.type="range",it.className="leaflet-control-layers-range",it.min=0,it.max=100,it.value=100*nt.layer.options.opacity):it=this._createRadioElement("leaflet-base-layers",checked),this._layerControlInputs.push(it),it.layerId=L.Util.stamp(nt.layer),it.addEventListener("input",kt=>{kt=kt.target.value;const Lt=this._getLayer(it.layerId).layer;Lt._url===void 0||Lt.setOpacity(Number(kt/100))});const st=document.createElement("span");st.innerHTML=" "+nt.name;const _t=document.createElement("div"),xt=document.createElement("div");rt.appendChild(_t),_t.appendChild(st),rt.appendChild(xt),xt.appendChild(it),(nt.overlay?this._overlaysList:this._baseLayersList).appendChild(rt)}}),L.control.opacity=function(nt,rt){return new L.Control.Opacity(nt,rt)};var range_styles_default=i$7`
  :host {
    --thumb-size: 20px;
    --tooltip-offset: 10px;
    --track-color-active: var(--sl-color-neutral-200);
    --track-color-inactive: var(--sl-color-neutral-200);
    --track-active-offset: 0%;
    --track-height: 6px;

    display: block;
  }

  .range {
    position: relative;
  }

  .range__control {
    --percent: 0%;
    -webkit-appearance: none;
    border-radius: 3px;
    width: 100%;
    height: var(--track-height);
    background: transparent;
    line-height: var(--sl-input-height-medium);
    vertical-align: middle;
    margin: 0;

    background-image: linear-gradient(
      to right,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  .range--rtl .range__control {
    background-image: linear-gradient(
      to left,
      var(--track-color-inactive) 0%,
      var(--track-color-inactive) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) min(var(--percent), var(--track-active-offset)),
      var(--track-color-active) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) max(var(--percent), var(--track-active-offset)),
      var(--track-color-inactive) 100%
    );
  }

  /* Webkit */
  .range__control::-webkit-slider-runnable-track {
    width: 100%;
    height: var(--track-height);
    border-radius: 3px;
    border: none;
  }

  .range__control::-webkit-slider-thumb {
    border: none;
    width: var(--thumb-size);
    height: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border: solid var(--sl-input-border-width) var(--sl-color-primary-600);
    -webkit-appearance: none;
    margin-top: calc(var(--thumb-size) / -2 + var(--track-height) / 2);
    cursor: pointer;
  }

  .range__control:enabled::-webkit-slider-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-webkit-slider-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-webkit-slider-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* Firefox */
  .range__control::-moz-focus-outer {
    border: 0;
  }

  .range__control::-moz-range-progress {
    background-color: var(--track-color-active);
    border-radius: 3px;
    height: var(--track-height);
  }

  .range__control::-moz-range-track {
    width: 100%;
    height: var(--track-height);
    background-color: var(--track-color-inactive);
    border-radius: 3px;
    border: none;
  }

  .range__control::-moz-range-thumb {
    border: none;
    height: var(--thumb-size);
    width: var(--thumb-size);
    border-radius: 50%;
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    transition:
      var(--sl-transition-fast) border-color,
      var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color,
      var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .range__control:enabled::-moz-range-thumb:hover {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
  }

  .range__control:enabled:focus-visible::-moz-range-thumb {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }

  .range__control:enabled::-moz-range-thumb:active {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    cursor: grabbing;
  }

  /* States */
  .range__control:focus-visible {
    outline: none;
  }

  .range__control:disabled {
    opacity: 0.5;
  }

  .range__control:disabled::-webkit-slider-thumb {
    cursor: not-allowed;
  }

  .range__control:disabled::-moz-range-thumb {
    cursor: not-allowed;
  }

  /* Tooltip output */
  .range__tooltip {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    left: 0;
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    opacity: 0;
    padding: var(--sl-tooltip-padding);
    transition: var(--sl-transition-fast) opacity;
    pointer-events: none;
  }

  .range__tooltip:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    left: 50%;
    translate: calc(-1 * var(--sl-tooltip-arrow-size));
  }

  .range--tooltip-visible .range__tooltip {
    opacity: 1;
  }

  /* Tooltip on top */
  .range--tooltip-top .range__tooltip {
    top: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-top .range__tooltip:after {
    border-top: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    top: 100%;
  }

  /* Tooltip on bottom */
  .range--tooltip-bottom .range__tooltip {
    bottom: calc(-1 * var(--thumb-size) - var(--tooltip-offset));
  }

  .range--tooltip-bottom .range__tooltip:after {
    border-bottom: var(--sl-tooltip-arrow-size) solid var(--sl-tooltip-background-color);
    border-left: var(--sl-tooltip-arrow-size) solid transparent;
    border-right: var(--sl-tooltip-arrow-size) solid transparent;
    bottom: 100%;
  }

  @media (forced-colors: active) {
    .range__control,
    .range__tooltip {
      border: solid 1px transparent;
    }

    .range__control::-webkit-slider-thumb {
      border: solid 1px transparent;
    }

    .range__control::-moz-range-thumb {
      border: solid 1px transparent;
    }

    .range__tooltip:after {
      display: none;
    }
  }
`,SlRange=class extends ShoelaceElement{constructor(){super(...arguments),this.formControlController=new FormControlController(this),this.hasSlotController=new HasSlotController(this,"help-text","label"),this.localize=new LocalizeController(this),this.hasFocus=!1,this.hasTooltip=!1,this.title="",this.name="",this.value=0,this.label="",this.helpText="",this.disabled=!1,this.min=0,this.max=100,this.step=1,this.tooltip="top",this.tooltipFormatter=nt=>nt.toString(),this.form="",this.defaultValue=0}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>this.syncRange()),this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max),this.updateComplete.then(()=>{this.syncRange(),this.resizeObserver.observe(this.input)})}disconnectedCallback(){var nt;super.disconnectedCallback(),(nt=this.resizeObserver)==null||nt.unobserve(this.input)}handleChange(){this.emit("sl-change")}handleInput(){this.value=parseFloat(this.input.value),this.emit("sl-input"),this.syncRange()}handleBlur(){this.hasFocus=!1,this.hasTooltip=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.hasTooltip=!0,this.emit("sl-focus")}handleThumbDragStart(){this.hasTooltip=!0}handleThumbDragEnd(){this.hasTooltip=!1}syncProgress(nt){this.input.style.setProperty("--percent",`${nt*100}%`)}syncTooltip(nt){if(this.output!==null){const rt=this.input.offsetWidth,it=this.output.offsetWidth,st=getComputedStyle(this.input).getPropertyValue("--thumb-size"),_t=this.localize.dir()==="rtl",xt=rt*nt;if(_t){const Et=`${rt-xt}px + ${nt} * ${st}`;this.output.style.translate=`calc((${Et} - ${it/2}px - ${st} / 2))`}else{const Et=`${xt}px - ${nt} * ${st}`;this.output.style.translate=`calc(${Et} - ${it/2}px + ${st} / 2)`}}}handleValueChange(){this.formControlController.updateValidity(),this.input.value=this.value.toString(),this.value=parseFloat(this.input.value),this.syncRange()}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}syncRange(){const nt=Math.max(0,(this.value-this.min)/(this.max-this.min));this.syncProgress(nt),this.tooltip!=="none"&&this.hasTooltip&&this.updateComplete.then(()=>this.syncTooltip(nt))}handleInvalid(nt){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(nt)}focus(nt){this.input.focus(nt)}blur(){this.input.blur()}stepUp(){this.input.stepUp(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}stepDown(){this.input.stepDown(),this.value!==Number(this.input.value)&&(this.value=Number(this.input.value))}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(nt){this.input.setCustomValidity(nt),this.formControlController.updateValidity()}render(){const nt=this.hasSlotController.test("label"),rt=this.hasSlotController.test("help-text"),it=this.label?!0:!!nt,st=this.helpText?!0:!!rt;return x$1`
      <div
        part="form-control"
        class=${e$1({"form-control":!0,"form-control--medium":!0,"form-control--has-label":it,"form-control--has-help-text":st})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${it?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${e$1({range:!0,"range--disabled":this.disabled,"range--focused":this.hasFocus,"range--rtl":this.localize.dir()==="rtl","range--tooltip-visible":this.hasTooltip,"range--tooltip-top":this.tooltip==="top","range--tooltip-bottom":this.tooltip==="bottom"})}
            @mousedown=${this.handleThumbDragStart}
            @mouseup=${this.handleThumbDragEnd}
            @touchstart=${this.handleThumbDragStart}
            @touchend=${this.handleThumbDragEnd}
          >
            <input
              part="input"
              id="input"
              class="range__control"
              title=${this.title}
              type="range"
              name=${o$3(this.name)}
              ?disabled=${this.disabled}
              min=${o$3(this.min)}
              max=${o$3(this.max)}
              step=${o$3(this.step)}
              .value=${l(this.value.toString())}
              aria-describedby="help-text"
              @change=${this.handleChange}
              @focus=${this.handleFocus}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @blur=${this.handleBlur}
            />
            ${this.tooltip!=="none"&&!this.disabled?x$1`
                  <output part="tooltip" class="range__tooltip">
                    ${typeof this.tooltipFormatter=="function"?this.tooltipFormatter(this.value):this.value}
                  </output>
                `:""}
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${st?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};SlRange.styles=[component_styles_default,form_control_styles_default,range_styles_default];__decorateClass([e$4(".range__control")],SlRange.prototype,"input",2);__decorateClass([e$4(".range__tooltip")],SlRange.prototype,"output",2);__decorateClass([r$1()],SlRange.prototype,"hasFocus",2);__decorateClass([r$1()],SlRange.prototype,"hasTooltip",2);__decorateClass([n$4()],SlRange.prototype,"title",2);__decorateClass([n$4()],SlRange.prototype,"name",2);__decorateClass([n$4({type:Number})],SlRange.prototype,"value",2);__decorateClass([n$4()],SlRange.prototype,"label",2);__decorateClass([n$4({attribute:"help-text"})],SlRange.prototype,"helpText",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlRange.prototype,"disabled",2);__decorateClass([n$4({type:Number})],SlRange.prototype,"min",2);__decorateClass([n$4({type:Number})],SlRange.prototype,"max",2);__decorateClass([n$4({type:Number})],SlRange.prototype,"step",2);__decorateClass([n$4()],SlRange.prototype,"tooltip",2);__decorateClass([n$4({attribute:!1})],SlRange.prototype,"tooltipFormatter",2);__decorateClass([n$4({reflect:!0})],SlRange.prototype,"form",2);__decorateClass([defaultValue()],SlRange.prototype,"defaultValue",2);__decorateClass([t$1({passive:!0})],SlRange.prototype,"handleThumbDragStart",1);__decorateClass([watch("value",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleValueChange",1);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlRange.prototype,"handleDisabledChange",1);__decorateClass([watch("hasTooltip",{waitUntilFirstUpdate:!0})],SlRange.prototype,"syncRange",1);SlRange.define("sl-range");(function(nt,rt){typeof exports=="object"&&typeof module<"u"?rt(exports):typeof define=="function"&&define.amd?define(["exports"],rt):rt((nt=typeof globalThis<"u"?globalThis:nt||self).turf={})})(globalThis,function(nt){var rt=63710088e-1,it={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*rt,kilometers:6371.0088,kilometres:6371.0088,meters:rt,metres:rt,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:rt/1852,radians:1,yards:6967335223679999e-9},st={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/rt,yards:1.0936133},_t={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function xt(vt,bt,wt){wt===void 0&&(wt={});var Tt={type:"Feature"};return(wt.id===0||wt.id)&&(Tt.id=wt.id),wt.bbox&&(Tt.bbox=wt.bbox),Tt.properties=bt||{},Tt.geometry=vt,Tt}function Et(vt,bt,wt){switch(vt){case"Point":return kt(bt).geometry;case"LineString":return Nt(bt).geometry;case"Polygon":return It(bt).geometry;case"MultiPoint":return Zt(bt).geometry;case"MultiLineString":return Yt(bt).geometry;case"MultiPolygon":return Wt(bt).geometry;default:throw new Error(vt+" is invalid")}}function kt(vt,bt,wt){if(wt===void 0&&(wt={}),!vt)throw new Error("coordinates is required");if(!Array.isArray(vt))throw new Error("coordinates must be an Array");if(vt.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!An(vt[0])||!An(vt[1]))throw new Error("coordinates must contain numbers");return xt({type:"Point",coordinates:vt},bt,wt)}function Lt(vt,bt,wt){return wt===void 0&&(wt={}),Ft(vt.map(function(Tt){return kt(Tt,bt)}),wt)}function It(vt,bt,wt){wt===void 0&&(wt={});for(var Tt=0,At=vt;Tt<At.length;Tt++){var Ot=At[Tt];if(Ot.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Dt=0;Dt<Ot[Ot.length-1].length;Dt++)if(Ot[Ot.length-1][Dt]!==Ot[0][Dt])throw new Error("First and last Position are not equivalent.")}return xt({type:"Polygon",coordinates:vt},bt,wt)}function Rt(vt,bt,wt){return wt===void 0&&(wt={}),Ft(vt.map(function(Tt){return It(Tt,bt)}),wt)}function Nt(vt,bt,wt){if(wt===void 0&&(wt={}),vt.length<2)throw new Error("coordinates must be an array of two or more positions");return xt({type:"LineString",coordinates:vt},bt,wt)}function Bt(vt,bt,wt){return wt===void 0&&(wt={}),Ft(vt.map(function(Tt){return Nt(Tt,bt)}),wt)}function Ft(vt,bt){bt===void 0&&(bt={});var wt={type:"FeatureCollection"};return bt.id&&(wt.id=bt.id),bt.bbox&&(wt.bbox=bt.bbox),wt.features=vt,wt}function Yt(vt,bt,wt){return wt===void 0&&(wt={}),xt({type:"MultiLineString",coordinates:vt},bt,wt)}function Zt(vt,bt,wt){return wt===void 0&&(wt={}),xt({type:"MultiPoint",coordinates:vt},bt,wt)}function Wt(vt,bt,wt){return wt===void 0&&(wt={}),xt({type:"MultiPolygon",coordinates:vt},bt,wt)}function Kt(vt,bt,wt){return wt===void 0&&(wt={}),xt({type:"GeometryCollection",geometries:vt},bt,wt)}function Jt(vt,bt){if(bt===void 0&&(bt=0),bt&&!(bt>=0))throw new Error("precision must be a positive number");var wt=Math.pow(10,bt||0);return Math.round(vt*wt)/wt}function on(vt,bt){bt===void 0&&(bt="kilometers");var wt=it[bt];if(!wt)throw new Error(bt+" units is invalid");return vt*wt}function rn(vt,bt){bt===void 0&&(bt="kilometers");var wt=it[bt];if(!wt)throw new Error(bt+" units is invalid");return vt/wt}function ln(vt,bt){return wn(rn(vt,bt))}function gn(vt){var bt=vt%360;return bt<0&&(bt+=360),bt}function wn(vt){return 180*(vt%(2*Math.PI))/Math.PI}function kn(vt){return vt%360*Math.PI/180}function Cn(vt,bt,wt){if(bt===void 0&&(bt="kilometers"),wt===void 0&&(wt="kilometers"),!(vt>=0))throw new Error("length must be a positive number");return on(rn(vt,bt),wt)}function Pn(vt,bt,wt){if(bt===void 0&&(bt="meters"),wt===void 0&&(wt="kilometers"),!(vt>=0))throw new Error("area must be a positive number");var Tt=_t[bt];if(!Tt)throw new Error("invalid original units");var At=_t[wt];if(!At)throw new Error("invalid final units");return vt/Tt*At}function An(vt){return!isNaN(vt)&&vt!==null&&!Array.isArray(vt)}function cn(vt){return!!vt&&vt.constructor===Object}function Ln(vt){if(!vt)throw new Error("bbox is required");if(!Array.isArray(vt))throw new Error("bbox must be an Array");if(vt.length!==4&&vt.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");vt.forEach(function(bt){if(!An(bt))throw new Error("bbox must only contain numbers")})}function an(vt){if(!vt)throw new Error("id is required");if(["string","number"].indexOf(typeof vt)===-1)throw new Error("id must be a number or a string")}var zn=Object.freeze({__proto__:null,earthRadius:rt,factors:it,unitsFactors:st,areaFactors:_t,feature:xt,geometry:Et,point:kt,points:Lt,polygon:It,polygons:Rt,lineString:Nt,lineStrings:Bt,featureCollection:Ft,multiLineString:Yt,multiPoint:Zt,multiPolygon:Wt,geometryCollection:Kt,round:Jt,radiansToLength:on,lengthToRadians:rn,lengthToDegrees:ln,bearingToAzimuth:gn,radiansToDegrees:wn,degreesToRadians:kn,convertLength:Cn,convertArea:Pn,isNumber:An,isObject:cn,validateBBox:Ln,validateId:an});function dn(vt,bt,wt){if(vt!==null)for(var Tt,At,Ot,Dt,jt,Gt,qt,en,Xt=0,sn=0,yn=vt.type,vn=yn==="FeatureCollection",Sn=yn==="Feature",fn=vn?vt.features.length:1,Dn=0;Dn<fn;Dn++){jt=(en=!!(qt=vn?vt.features[Dn].geometry:Sn?vt.geometry:vt)&&qt.type==="GeometryCollection")?qt.geometries.length:1;for(var rr=0;rr<jt;rr++){var bn=0,Nn=0;if((Dt=en?qt.geometries[rr]:qt)!==null){Gt=Dt.coordinates;var Bn=Dt.type;switch(Xt=!wt||Bn!=="Polygon"&&Bn!=="MultiPolygon"?0:1,Bn){case null:break;case"Point":if(bt(Gt,sn,Dn,bn,Nn)===!1)return!1;sn++,bn++;break;case"LineString":case"MultiPoint":for(Tt=0;Tt<Gt.length;Tt++){if(bt(Gt[Tt],sn,Dn,bn,Nn)===!1)return!1;sn++,Bn==="MultiPoint"&&bn++}Bn==="LineString"&&bn++;break;case"Polygon":case"MultiLineString":for(Tt=0;Tt<Gt.length;Tt++){for(At=0;At<Gt[Tt].length-Xt;At++){if(bt(Gt[Tt][At],sn,Dn,bn,Nn)===!1)return!1;sn++}Bn==="MultiLineString"&&bn++,Bn==="Polygon"&&Nn++}Bn==="Polygon"&&bn++;break;case"MultiPolygon":for(Tt=0;Tt<Gt.length;Tt++){for(Nn=0,At=0;At<Gt[Tt].length;At++){for(Ot=0;Ot<Gt[Tt][At].length-Xt;Ot++){if(bt(Gt[Tt][At][Ot],sn,Dn,bn,Nn)===!1)return!1;sn++}Nn++}bn++}break;case"GeometryCollection":for(Tt=0;Tt<Dt.geometries.length;Tt++)if(dn(Dt.geometries[Tt],bt,wt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Fn(vt,bt,wt,Tt){var At=wt;return dn(vt,function(Ot,Dt,jt,Gt,qt){At=Dt===0&&wt===void 0?Ot:bt(At,Ot,Dt,jt,Gt,qt)},Tt),At}function ir(vt,bt){var wt;switch(vt.type){case"FeatureCollection":for(wt=0;wt<vt.features.length&&bt(vt.features[wt].properties,wt)!==!1;wt++);break;case"Feature":bt(vt.properties,0)}}function tr(vt,bt,wt){var Tt=wt;return ir(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot)}),Tt}function Jn(vt,bt){if(vt.type==="Feature")bt(vt,0);else if(vt.type==="FeatureCollection")for(var wt=0;wt<vt.features.length&&bt(vt.features[wt],wt)!==!1;wt++);}function hr(vt,bt,wt){var Tt=wt;return Jn(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot)}),Tt}function lr(vt){var bt=[];return dn(vt,function(wt){bt.push(wt)}),bt}function cr(vt,bt){var wt,Tt,At,Ot,Dt,jt,Gt,qt,en,Xt,sn=0,yn=vt.type==="FeatureCollection",vn=vt.type==="Feature",Sn=yn?vt.features.length:1;for(wt=0;wt<Sn;wt++){for(jt=yn?vt.features[wt].geometry:vn?vt.geometry:vt,qt=yn?vt.features[wt].properties:vn?vt.properties:{},en=yn?vt.features[wt].bbox:vn?vt.bbox:void 0,Xt=yn?vt.features[wt].id:vn?vt.id:void 0,Dt=(Gt=!!jt&&jt.type==="GeometryCollection")?jt.geometries.length:1,At=0;At<Dt;At++)if((Ot=Gt?jt.geometries[At]:jt)!==null)switch(Ot.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(bt(Ot,sn,qt,en,Xt)===!1)return!1;break;case"GeometryCollection":for(Tt=0;Tt<Ot.geometries.length;Tt++)if(bt(Ot.geometries[Tt],sn,qt,en,Xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(bt(null,sn,qt,en,Xt)===!1)return!1;sn++}}function Cr(vt,bt,wt){var Tt=wt;return cr(vt,function(At,Ot,Dt,jt,Gt){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot,Dt,jt,Gt)}),Tt}function Er(vt,bt){cr(vt,function(wt,Tt,At,Ot,Dt){var jt,Gt=wt===null?null:wt.type;switch(Gt){case null:case"Point":case"LineString":case"Polygon":return bt(xt(wt,At,{bbox:Ot,id:Dt}),Tt,0)!==!1&&void 0}switch(Gt){case"MultiPoint":jt="Point";break;case"MultiLineString":jt="LineString";break;case"MultiPolygon":jt="Polygon"}for(var qt=0;qt<wt.coordinates.length;qt++){var en=wt.coordinates[qt];if(bt(xt({type:jt,coordinates:en},At),Tt,qt)===!1)return!1}})}function ar(vt,bt,wt){var Tt=wt;return Er(vt,function(At,Ot,Dt){Tt=Ot===0&&Dt===0&&wt===void 0?At:bt(Tt,At,Ot,Dt)}),Tt}function Fr(vt,bt){Er(vt,function(wt,Tt,At){var Ot=0;if(wt.geometry){var Dt=wt.geometry.type;if(Dt!=="Point"&&Dt!=="MultiPoint"){var jt,Gt=0,qt=0,en=0;return dn(wt,function(Xt,sn,yn,vn,Sn){if(jt===void 0||Tt>Gt||vn>qt||Sn>en)return jt=Xt,Gt=Tt,qt=vn,en=Sn,void(Ot=0);var fn=Nt([jt,Xt],wt.properties);if(bt(fn,Tt,At,Sn,Ot)===!1)return!1;Ot++,jt=Xt})!==!1&&void 0}}})}function mr(vt,bt,wt){var Tt=wt,At=!1;return Fr(vt,function(Ot,Dt,jt,Gt,qt){Tt=At===!1&&wt===void 0?Ot:bt(Tt,Ot,Dt,jt,Gt,qt),At=!0}),Tt}function xr(vt,bt){if(!vt)throw new Error("geojson is required");Er(vt,function(wt,Tt,At){if(wt.geometry!==null){var Ot=wt.geometry.type,Dt=wt.geometry.coordinates;switch(Ot){case"LineString":if(bt(wt,Tt,At,0,0)===!1)return!1;break;case"Polygon":for(var jt=0;jt<Dt.length;jt++)if(bt(Nt(Dt[jt],wt.properties),Tt,At,jt)===!1)return!1}}})}function fr(vt,bt,wt){var Tt=wt;return xr(vt,function(At,Ot,Dt,jt){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot,Dt,jt)}),Tt}function gr(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt,Tt=bt.featureIndex||0,At=bt.multiFeatureIndex||0,Ot=bt.geometryIndex||0,Dt=bt.segmentIndex||0,jt=bt.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":case"MultiPoint":return null;case"LineString":return Dt<0&&(Dt=Gt.length+Dt-1),Nt([Gt[Dt],Gt[Dt+1]],jt,bt);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Dt<0&&(Dt=Gt[Ot].length+Dt-1),Nt([Gt[Ot][Dt],Gt[Ot][Dt+1]],jt,bt);case"MultiLineString":return At<0&&(At=Gt.length+At),Dt<0&&(Dt=Gt[At].length+Dt-1),Nt([Gt[At][Dt],Gt[At][Dt+1]],jt,bt);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Dt<0&&(Dt=Gt[At][Ot].length-Dt-1),Nt([Gt[At][Ot][Dt],Gt[At][Ot][Dt+1]],jt,bt)}throw new Error("geojson is invalid")}function er(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt,Tt=bt.featureIndex||0,At=bt.multiFeatureIndex||0,Ot=bt.geometryIndex||0,Dt=bt.coordIndex||0,jt=bt.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":return kt(Gt,jt,bt);case"MultiPoint":return At<0&&(At=Gt.length+At),kt(Gt[At],jt,bt);case"LineString":return Dt<0&&(Dt=Gt.length+Dt),kt(Gt[Dt],jt,bt);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Dt<0&&(Dt=Gt[Ot].length+Dt),kt(Gt[Ot][Dt],jt,bt);case"MultiLineString":return At<0&&(At=Gt.length+At),Dt<0&&(Dt=Gt[At].length+Dt),kt(Gt[At][Dt],jt,bt);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Dt<0&&(Dt=Gt[At][Ot].length-Dt),kt(Gt[At][Ot][Dt],jt,bt)}throw new Error("geojson is invalid")}var nn=Object.freeze({__proto__:null,coordAll:lr,coordEach:dn,coordReduce:Fn,featureEach:Jn,featureReduce:hr,findPoint:er,findSegment:gr,flattenEach:Er,flattenReduce:ar,geomEach:cr,geomReduce:Cr,lineEach:xr,lineReduce:fr,propEach:ir,propReduce:tr,segmentEach:Fr,segmentReduce:mr});function un(vt){var bt=[1/0,1/0,-1/0,-1/0];return dn(vt,function(wt){bt[0]>wt[0]&&(bt[0]=wt[0]),bt[1]>wt[1]&&(bt[1]=wt[1]),bt[2]<wt[0]&&(bt[2]=wt[0]),bt[3]<wt[1]&&(bt[3]=wt[1])}),bt}function pn(vt){if(!vt)throw new Error("coord is required");if(!Array.isArray(vt)){if(vt.type==="Feature"&&vt.geometry!==null&&vt.geometry.type==="Point")return vt.geometry.coordinates;if(vt.type==="Point")return vt.coordinates}if(Array.isArray(vt)&&vt.length>=2&&!Array.isArray(vt[0])&&!Array.isArray(vt[1]))return vt;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Rn(vt){if(Array.isArray(vt))return vt;if(vt.type==="Feature"){if(vt.geometry!==null)return vt.geometry.coordinates}else if(vt.coordinates)return vt.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function _n(vt){if(vt.length>1&&An(vt[0])&&An(vt[1]))return!0;if(Array.isArray(vt[0])&&vt[0].length)return _n(vt[0]);throw new Error("coordinates must only contain numbers")}function or(vt,bt,wt){if(!bt||!wt)throw new Error("type and name required");if(!vt||vt.type!==bt)throw new Error("Invalid input to "+wt+": must be a "+bt+", given "+vt.type)}function Vn(vt,bt,wt){if(!vt)throw new Error("No feature passed");if(!wt)throw new Error(".featureOf() requires a name");if(!vt||vt.type!=="Feature"||!vt.geometry)throw new Error("Invalid input to "+wt+", Feature with geometry required");if(!vt.geometry||vt.geometry.type!==bt)throw new Error("Invalid input to "+wt+": must be a "+bt+", given "+vt.geometry.type)}function Wn(vt,bt,wt){if(!vt)throw new Error("No featureCollection passed");if(!wt)throw new Error(".collectionOf() requires a name");if(!vt||vt.type!=="FeatureCollection")throw new Error("Invalid input to "+wt+", FeatureCollection required");for(var Tt=0,At=vt.features;Tt<At.length;Tt++){var Ot=At[Tt];if(!Ot||Ot.type!=="Feature"||!Ot.geometry)throw new Error("Invalid input to "+wt+", Feature with geometry required");if(!Ot.geometry||Ot.geometry.type!==bt)throw new Error("Invalid input to "+wt+": must be a "+bt+", given "+Ot.geometry.type)}}function Hn(vt){return vt.type==="Feature"?vt.geometry:vt}function nr(vt,bt){return vt.type==="FeatureCollection"?"FeatureCollection":vt.type==="GeometryCollection"?"GeometryCollection":vt.type==="Feature"&&vt.geometry!==null?vt.geometry.type:vt.type}un.default=un;var sr=Object.freeze({__proto__:null,getCoord:pn,getCoords:Rn,containsNumber:_n,geojsonType:or,featureOf:Vn,collectionOf:Wn,getGeom:Hn,getType:nr}),pr=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable;/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function si(vt){if(vt==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(vt)}var ui=function(){try{if(!Object.assign)return!1;var vt=new String("abc");if(vt[5]="de",Object.getOwnPropertyNames(vt)[0]==="5")return!1;for(var bt={},wt=0;wt<10;wt++)bt["_"+String.fromCharCode(wt)]=wt;if(Object.getOwnPropertyNames(bt).map(function(At){return bt[At]}).join("")!=="0123456789")return!1;var Tt={};return"abcdefghijklmnopqrst".split("").forEach(function(At){Tt[At]=At}),Object.keys(Object.assign({},Tt)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(vt,bt){for(var wt,Tt,At=si(vt),Ot=1;Ot<arguments.length;Ot++){for(var Dt in wt=Object(arguments[Ot]))vr.call(wt,Dt)&&(At[Dt]=wt[Dt]);if(pr){Tt=pr(wt);for(var jt=0;jt<Tt.length;jt++)kr.call(wt,Tt[jt])&&(At[Tt[jt]]=wt[Tt[jt]])}}return At},ii={successCallback:null,verbose:!1},li={};/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function Ei(vt,bt,wt){wt=wt||{};for(var Tt=Object.keys(ii),At=0;At<Tt.length;At++){var Ot=Tt[At],Dt=wt[Ot];Dt=Dt!=null?Dt:ii[Ot],li[Ot]=Dt}li.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+bt);var jt=function(Gt){var qt=[],en=0,Xt=1e-7;return Gt.cells.forEach(function(sn,yn){sn.forEach(function(vn,Sn){if(vn!==void 0&&(Gn=vn).cval!==5&&Gn.cval!==10&&!Ci(vn)){var fn=function(jn,Vr,$r){var qr,Rr,Jr=jn.length,Br=[],Dr=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],Mr=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],Yr=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],zr=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],Qr=jn[Vr][$r],wr=Qr.cval,ji=Yr[wr],yi=Tn(Qr,ji);Br.push([$r+yi[0],Vr+yi[1]]),ji=zr[wr],yi=Tn(Qr,ji),Br.push([$r+yi[0],Vr+yi[1]]),Lr(Qr);for(var bo=$r+Dr[wr],Ri=Vr+Mr[wr],eo=wr;bo>=0&&Ri>=0&&Ri<Jr&&(bo!=$r||Ri!=Vr)&&(Qr=jn[Ri][bo])!==void 0;){if((wr=Qr.cval)===0||wr===15)return{path:Br,info:"mergeable"};ji=zr[wr],qr=Dr[wr],Rr=Mr[wr],wr!==5&&wr!==10||(wr===5?Qr.flipped?Mr[eo]===-1?(ji="left",qr=-1,Rr=0):(ji="right",qr=1,Rr=0):Dr[eo]===-1&&(ji="bottom",qr=0,Rr=-1):wr===10&&(Qr.flipped?Dr[eo]===-1?(ji="top",qr=0,Rr=1):(ji="bottom",qr=0,Rr=-1):Mr[eo]===1&&(ji="left",qr=-1,Rr=0))),yi=Tn(Qr,ji),Br.push([bo+yi[0],Ri+yi[1]]),Lr(Qr),bo+=qr,Ri+=Rr,eo=wr}return{path:Br,info:"closed"}}(Gt.cells,yn,Sn),Dn=!1;if(fn.info==="mergeable"){for(var rr=fn.path[fn.path.length-1][0],bn=fn.path[fn.path.length-1][1],Nn=en-1;Nn>=0;Nn--)if(Math.abs(qt[Nn][0][0]-rr)<=Xt&&Math.abs(qt[Nn][0][1]-bn)<=Xt){for(var Bn=fn.path.length-2;Bn>=0;--Bn)qt[Nn].unshift(fn.path[Bn]);Dn=!0;break}}Dn||(qt[en++]=fn.path)}var Gn})}),qt}(function(Gt,qt){for(var en=Gt.length-1,Xt=Gt[0].length-1,sn={rows:en,cols:Xt,cells:[]},yn=0;yn<en;++yn){sn.cells[yn]=[];for(var vn=0;vn<Xt;++vn){var Sn=0,fn=Gt[yn+1][vn],Dn=Gt[yn+1][vn+1],rr=Gt[yn][vn+1],bn=Gt[yn][vn];if(!(isNaN(fn)||isNaN(Dn)||isNaN(rr)||isNaN(bn))){Sn|=fn>=qt?8:0,Sn|=Dn>=qt?4:0,Sn|=rr>=qt?2:0;var Nn,Bn,Gn,jn,Vr=!1;if((Sn|=bn>=qt?1:0)===5||Sn===10){var $r=(fn+Dn+rr+bn)/4;Sn===5&&$r<qt?(Sn=10,Vr=!0):Sn===10&&$r<qt&&(Sn=5,Vr=!0)}Sn!==0&&Sn!==15&&(Nn=Bn=Gn=jn=.5,Sn===1?(Gn=1-wi(qt,fn,bn),Bn=1-wi(qt,rr,bn)):Sn===2?(Bn=wi(qt,bn,rr),jn=1-wi(qt,Dn,rr)):Sn===3?(Gn=1-wi(qt,fn,bn),jn=1-wi(qt,Dn,rr)):Sn===4?(Nn=wi(qt,fn,Dn),jn=wi(qt,rr,Dn)):Sn===5?(Nn=wi(qt,fn,Dn),jn=wi(qt,rr,Dn),Bn=1-wi(qt,rr,bn),Gn=1-wi(qt,fn,bn)):Sn===6?(Bn=wi(qt,bn,rr),Nn=wi(qt,fn,Dn)):Sn===7?(Gn=1-wi(qt,fn,bn),Nn=wi(qt,fn,Dn)):Sn===8?(Gn=wi(qt,bn,fn),Nn=1-wi(qt,Dn,fn)):Sn===9?(Bn=1-wi(qt,rr,bn),Nn=1-wi(qt,Dn,fn)):Sn===10?(Nn=1-wi(qt,Dn,fn),jn=1-wi(qt,Dn,rr),Bn=wi(qt,bn,rr),Gn=wi(qt,bn,fn)):Sn===11?(Nn=1-wi(qt,Dn,fn),jn=1-wi(qt,Dn,rr)):Sn===12?(Gn=wi(qt,bn,fn),jn=wi(qt,rr,Dn)):Sn===13?(Bn=1-wi(qt,rr,bn),jn=wi(qt,rr,Dn)):Sn===14?(Gn=wi(qt,bn,fn),Bn=wi(qt,bn,rr)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+Sn),sn.cells[yn][vn]={cval:Sn,flipped:Vr,top:Nn,right:jn,bottom:Bn,left:Gn})}}}return sn}(vt,bt));return typeof li.successCallback=="function"&&li.successCallback(jt),jt}function wi(vt,bt,wt){return(vt-bt)/(wt-bt)}function Ci(vt){return vt.cval===0||vt.cval===15}function Lr(vt){Ci(vt)||vt.cval===5||vt.cval===10||(vt.cval=15)}function Tn(vt,bt){return bt==="top"?[vt.top,1]:bt==="bottom"?[vt.bottom,0]:bt==="right"?[1,vt.right]:bt==="left"?[0,vt.left]:void 0}function En(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.zProperty||"elevation",Tt=bt.flip,At=bt.flags;Wn(vt,"Point","input must contain Points");for(var Ot=function(sn,yn){var vn={};return Jn(sn,function(Sn){var fn=Rn(Sn)[1];vn[fn]||(vn[fn]=[]),vn[fn].push(Sn)}),Object.keys(vn).map(function(Sn){return vn[Sn].sort(function(fn,Dn){return Rn(fn)[0]-Rn(Dn)[0]})}).sort(function(Sn,fn){return yn?Rn(Sn[0])[1]-Rn(fn[0])[1]:Rn(fn[0])[1]-Rn(Sn[0])[1]})}(vt,Tt),Dt=[],jt=0;jt<Ot.length;jt++){for(var Gt=Ot[jt],qt=[],en=0;en<Gt.length;en++){var Xt=Gt[en];Xt.properties[wt]?qt.push(Xt.properties[wt]):qt.push(0),At===!0&&(Xt.properties.matrixPosition=[jt,en])}Dt.push(qt)}return Dt}var Un=_r,qn=_r;function _r(vt,bt,wt,Tt,At){Zr(vt,bt,wt||0,Tt||vt.length-1,At||ni)}function Zr(vt,bt,wt,Tt,At){for(;Tt>wt;){if(Tt-wt>600){var Ot=Tt-wt+1,Dt=bt-wt+1,jt=Math.log(Ot),Gt=.5*Math.exp(2*jt/3),qt=.5*Math.sqrt(jt*Gt*(Ot-Gt)/Ot)*(Dt-Ot/2<0?-1:1);Zr(vt,bt,Math.max(wt,Math.floor(bt-Dt*Gt/Ot+qt)),Math.min(Tt,Math.floor(bt+(Ot-Dt)*Gt/Ot+qt)),At)}var en=vt[bt],Xt=wt,sn=Tt;for(yr(vt,wt,bt),At(vt[Tt],en)>0&&yr(vt,wt,Tt);Xt<sn;){for(yr(vt,Xt,sn),Xt++,sn--;At(vt[Xt],en)<0;)Xt++;for(;At(vt[sn],en)>0;)sn--}At(vt[wt],en)===0?yr(vt,wt,sn):yr(vt,++sn,Tt),sn<=bt&&(wt=sn+1),bt<=sn&&(Tt=sn-1)}}function yr(vt,bt,wt){var Tt=vt[bt];vt[bt]=vt[wt],vt[wt]=Tt}function ni(vt,bt){return vt<bt?-1:vt>bt?1:0}Un.default=qn;var Ar=hi,gi=hi;function hi(vt,bt){if(!(this instanceof hi))return new hi(vt,bt);this._maxEntries=Math.max(4,vt||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),bt&&this._initFormat(bt),this.clear()}function Ti(vt,bt,wt){if(!wt)return bt.indexOf(vt);for(var Tt=0;Tt<bt.length;Tt++)if(wt(vt,bt[Tt]))return Tt;return-1}function fi(vt,bt){Yi(vt,0,vt.children.length,bt,vt)}function Yi(vt,bt,wt,Tt,At){At||(At=Zi(null)),At.minX=1/0,At.minY=1/0,At.maxX=-1/0,At.maxY=-1/0;for(var Ot,Dt=bt;Dt<wt;Dt++)Ot=vt.children[Dt],Si(At,vt.leaf?Tt(Ot):Ot);return At}function Si(vt,bt){return vt.minX=Math.min(vt.minX,bt.minX),vt.minY=Math.min(vt.minY,bt.minY),vt.maxX=Math.max(vt.maxX,bt.maxX),vt.maxY=Math.max(vt.maxY,bt.maxY),vt}function qi(vt,bt){return vt.minX-bt.minX}function uo(vt,bt){return vt.minY-bt.minY}function Xi(vt){return(vt.maxX-vt.minX)*(vt.maxY-vt.minY)}function Na(vt){return vt.maxX-vt.minX+(vt.maxY-vt.minY)}function zs(vt,bt){return vt.minX<=bt.minX&&vt.minY<=bt.minY&&bt.maxX<=vt.maxX&&bt.maxY<=vt.maxY}function bi(vt,bt){return bt.minX<=vt.maxX&&bt.minY<=vt.maxY&&bt.maxX>=vt.minX&&bt.maxY>=vt.minY}function Zi(vt){return{children:vt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $s(vt,bt,wt,Tt,At){for(var Ot,Dt=[bt,wt];Dt.length;)(wt=Dt.pop())-(bt=Dt.pop())<=Tt||(Ot=bt+Math.ceil((wt-bt)/Tt/2)*Tt,Un(vt,Ot,bt,wt,At),Dt.push(bt,Ot,Ot,wt))}function vs(vt){var bt={exports:{}};return vt(bt,bt.exports),bt.exports}hi.prototype={all:function(){return this._all(this.data,[])},search:function(vt){var bt=this.data,wt=[],Tt=this.toBBox;if(!bi(vt,bt))return wt;for(var At,Ot,Dt,jt,Gt=[];bt;){for(At=0,Ot=bt.children.length;At<Ot;At++)Dt=bt.children[At],bi(vt,jt=bt.leaf?Tt(Dt):Dt)&&(bt.leaf?wt.push(Dt):zs(vt,jt)?this._all(Dt,wt):Gt.push(Dt));bt=Gt.pop()}return wt},collides:function(vt){var bt=this.data,wt=this.toBBox;if(!bi(vt,bt))return!1;for(var Tt,At,Ot,Dt,jt=[];bt;){for(Tt=0,At=bt.children.length;Tt<At;Tt++)if(Ot=bt.children[Tt],bi(vt,Dt=bt.leaf?wt(Ot):Ot)){if(bt.leaf||zs(vt,Dt))return!0;jt.push(Ot)}bt=jt.pop()}return!1},load:function(vt){if(!vt||!vt.length)return this;if(vt.length<this._minEntries){for(var bt=0,wt=vt.length;bt<wt;bt++)this.insert(vt[bt]);return this}var Tt=this._build(vt.slice(),0,vt.length-1,0);if(this.data.children.length)if(this.data.height===Tt.height)this._splitRoot(this.data,Tt);else{if(this.data.height<Tt.height){var At=this.data;this.data=Tt,Tt=At}this._insert(Tt,this.data.height-Tt.height-1,!0)}else this.data=Tt;return this},insert:function(vt){return vt&&this._insert(vt,this.data.height-1),this},clear:function(){return this.data=Zi([]),this},remove:function(vt,bt){if(!vt)return this;for(var wt,Tt,At,Ot,Dt=this.data,jt=this.toBBox(vt),Gt=[],qt=[];Dt||Gt.length;){if(Dt||(Dt=Gt.pop(),Tt=Gt[Gt.length-1],wt=qt.pop(),Ot=!0),Dt.leaf&&(At=Ti(vt,Dt.children,bt))!==-1)return Dt.children.splice(At,1),Gt.push(Dt),this._condense(Gt),this;Ot||Dt.leaf||!zs(Dt,jt)?Tt?(wt++,Dt=Tt.children[wt],Ot=!1):Dt=null:(Gt.push(Dt),qt.push(wt),wt=0,Tt=Dt,Dt=Dt.children[0])}return this},toBBox:function(vt){return vt},compareMinX:qi,compareMinY:uo,toJSON:function(){return this.data},fromJSON:function(vt){return this.data=vt,this},_all:function(vt,bt){for(var wt=[];vt;)vt.leaf?bt.push.apply(bt,vt.children):wt.push.apply(wt,vt.children),vt=wt.pop();return bt},_build:function(vt,bt,wt,Tt){var At,Ot=wt-bt+1,Dt=this._maxEntries;if(Ot<=Dt)return fi(At=Zi(vt.slice(bt,wt+1)),this.toBBox),At;Tt||(Tt=Math.ceil(Math.log(Ot)/Math.log(Dt)),Dt=Math.ceil(Ot/Math.pow(Dt,Tt-1))),(At=Zi([])).leaf=!1,At.height=Tt;var jt,Gt,qt,en,Xt=Math.ceil(Ot/Dt),sn=Xt*Math.ceil(Math.sqrt(Dt));for($s(vt,bt,wt,sn,this.compareMinX),jt=bt;jt<=wt;jt+=sn)for($s(vt,jt,qt=Math.min(jt+sn-1,wt),Xt,this.compareMinY),Gt=jt;Gt<=qt;Gt+=Xt)en=Math.min(Gt+Xt-1,qt),At.children.push(this._build(vt,Gt,en,Tt-1));return fi(At,this.toBBox),At},_chooseSubtree:function(vt,bt,wt,Tt){for(var At,Ot,Dt,jt,Gt,qt,en,Xt,sn,yn;Tt.push(bt),!bt.leaf&&Tt.length-1!==wt;){for(en=Xt=1/0,At=0,Ot=bt.children.length;At<Ot;At++)Gt=Xi(Dt=bt.children[At]),sn=vt,yn=Dt,(qt=(Math.max(yn.maxX,sn.maxX)-Math.min(yn.minX,sn.minX))*(Math.max(yn.maxY,sn.maxY)-Math.min(yn.minY,sn.minY))-Gt)<Xt?(Xt=qt,en=Gt<en?Gt:en,jt=Dt):qt===Xt&&Gt<en&&(en=Gt,jt=Dt);bt=jt||bt.children[0]}return bt},_insert:function(vt,bt,wt){var Tt=this.toBBox,At=wt?vt:Tt(vt),Ot=[],Dt=this._chooseSubtree(At,this.data,bt,Ot);for(Dt.children.push(vt),Si(Dt,At);bt>=0&&Ot[bt].children.length>this._maxEntries;)this._split(Ot,bt),bt--;this._adjustParentBBoxes(At,Ot,bt)},_split:function(vt,bt){var wt=vt[bt],Tt=wt.children.length,At=this._minEntries;this._chooseSplitAxis(wt,At,Tt);var Ot=this._chooseSplitIndex(wt,At,Tt),Dt=Zi(wt.children.splice(Ot,wt.children.length-Ot));Dt.height=wt.height,Dt.leaf=wt.leaf,fi(wt,this.toBBox),fi(Dt,this.toBBox),bt?vt[bt-1].children.push(Dt):this._splitRoot(wt,Dt)},_splitRoot:function(vt,bt){this.data=Zi([vt,bt]),this.data.height=vt.height+1,this.data.leaf=!1,fi(this.data,this.toBBox)},_chooseSplitIndex:function(vt,bt,wt){var Tt,At,Ot,Dt,jt,Gt,qt,en,Xt,sn,yn,vn,Sn,fn;for(Gt=qt=1/0,Tt=bt;Tt<=wt-bt;Tt++)At=Yi(vt,0,Tt,this.toBBox),Ot=Yi(vt,Tt,wt,this.toBBox),Xt=At,sn=Ot,yn=void 0,vn=void 0,Sn=void 0,fn=void 0,yn=Math.max(Xt.minX,sn.minX),vn=Math.max(Xt.minY,sn.minY),Sn=Math.min(Xt.maxX,sn.maxX),fn=Math.min(Xt.maxY,sn.maxY),Dt=Math.max(0,Sn-yn)*Math.max(0,fn-vn),jt=Xi(At)+Xi(Ot),Dt<Gt?(Gt=Dt,en=Tt,qt=jt<qt?jt:qt):Dt===Gt&&jt<qt&&(qt=jt,en=Tt);return en},_chooseSplitAxis:function(vt,bt,wt){var Tt=vt.leaf?this.compareMinX:qi,At=vt.leaf?this.compareMinY:uo;this._allDistMargin(vt,bt,wt,Tt)<this._allDistMargin(vt,bt,wt,At)&&vt.children.sort(Tt)},_allDistMargin:function(vt,bt,wt,Tt){vt.children.sort(Tt);var At,Ot,Dt=this.toBBox,jt=Yi(vt,0,bt,Dt),Gt=Yi(vt,wt-bt,wt,Dt),qt=Na(jt)+Na(Gt);for(At=bt;At<wt-bt;At++)Ot=vt.children[At],Si(jt,vt.leaf?Dt(Ot):Ot),qt+=Na(jt);for(At=wt-bt-1;At>=bt;At--)Ot=vt.children[At],Si(Gt,vt.leaf?Dt(Ot):Ot),qt+=Na(Gt);return qt},_adjustParentBBoxes:function(vt,bt,wt){for(var Tt=wt;Tt>=0;Tt--)Si(bt[Tt],vt)},_condense:function(vt){for(var bt,wt=vt.length-1;wt>=0;wt--)vt[wt].children.length===0?wt>0?(bt=vt[wt-1].children).splice(bt.indexOf(vt[wt]),1):this.clear():fi(vt[wt],this.toBBox)},_initFormat:function(vt){var bt=["return a"," - b",";"];this.compareMinX=new Function("a","b",bt.join(vt[0])),this.compareMinY=new Function("a","b",bt.join(vt[1])),this.toBBox=new Function("a","return {minX: a"+vt[0]+", minY: a"+vt[1]+", maxX: a"+vt[2]+", maxY: a"+vt[3]+"};")}},Ar.default=gi;var ds=function(vt,bt,wt){var Tt=vt*bt,At=Ls*vt,Ot=At-(At-vt),Dt=vt-Ot,jt=Ls*bt,Gt=jt-(jt-bt),qt=bt-Gt,en=Dt*qt-(Tt-Ot*Gt-Dt*Gt-Ot*qt);return wt?(wt[0]=en,wt[1]=Tt,wt):[en,Tt]},Ls=+(Math.pow(2,27)+1),Ir=function(vt,bt){var wt=0|vt.length,Tt=0|bt.length;if(wt===1&&Tt===1)return function(Gn,jn){var Vr=Gn+jn,$r=Vr-Gn,qr=Gn-(Vr-$r)+(jn-$r);return qr?[qr,Vr]:[Vr]}(vt[0],bt[0]);var At,Ot,Dt=new Array(wt+Tt),jt=0,Gt=0,qt=0,en=Math.abs,Xt=vt[Gt],sn=en(Xt),yn=bt[qt],vn=en(yn);sn<vn?(Ot=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(Ot=yn,(qt+=1)<Tt&&(yn=bt[qt],vn=en(yn))),Gt<wt&&sn<vn||qt>=Tt?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=bt[qt],vn=en(yn)));for(var Sn,fn,Dn=At+Ot,rr=Dn-At,bn=Ot-rr,Nn=bn,Bn=Dn;Gt<wt&&qt<Tt;)sn<vn?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=bt[qt],vn=en(yn))),(bn=(Ot=Nn)-(rr=(Dn=At+Ot)-At))&&(Dt[jt++]=bn),Nn=Bn-((Sn=Bn+Dn)-(fn=Sn-Bn))+(Dn-fn),Bn=Sn;for(;Gt<wt;)(bn=(Ot=Nn)-(rr=(Dn=(At=Xt)+Ot)-At))&&(Dt[jt++]=bn),Nn=Bn-((Sn=Bn+Dn)-(fn=Sn-Bn))+(Dn-fn),Bn=Sn,(Gt+=1)<wt&&(Xt=vt[Gt]);for(;qt<Tt;)(bn=(Ot=Nn)-(rr=(Dn=(At=yn)+Ot)-At))&&(Dt[jt++]=bn),Nn=Bn-((Sn=Bn+Dn)-(fn=Sn-Bn))+(Dn-fn),Bn=Sn,(qt+=1)<Tt&&(yn=bt[qt]);return Nn&&(Dt[jt++]=Nn),Bn&&(Dt[jt++]=Bn),jt||(Dt[jt++]=0),Dt.length=jt,Dt},Hr=function(vt,bt,wt){var Tt=vt+bt,At=Tt-vt,Ot=bt-At,Dt=vt-(Tt-At);return wt?(wt[0]=Dt+Ot,wt[1]=Tt,wt):[Dt+Ot,Tt]},ri=function(vt,bt){var wt=vt.length;if(wt===1){var Tt=ds(vt[0],bt);return Tt[0]?Tt:[Tt[1]]}var At=new Array(2*wt),Ot=[.1,.1],Dt=[.1,.1],jt=0;ds(vt[0],bt,Ot),Ot[0]&&(At[jt++]=Ot[0]);for(var Gt=1;Gt<wt;++Gt){ds(vt[Gt],bt,Dt);var qt=Ot[1];Hr(qt,Dt[0],Ot),Ot[0]&&(At[jt++]=Ot[0]);var en=Dt[1],Xt=Ot[1],sn=en+Xt,yn=Xt-(sn-en);Ot[1]=sn,yn&&(At[jt++]=yn)}return Ot[1]&&(At[jt++]=Ot[1]),jt===0&&(At[jt++]=0),At.length=jt,At},Gr=function(vt,bt){var wt=0|vt.length,Tt=0|bt.length;if(wt===1&&Tt===1)return function(Gn,jn){var Vr=Gn+jn,$r=Vr-Gn,qr=Gn-(Vr-$r)+(jn-$r);return qr?[qr,Vr]:[Vr]}(vt[0],-bt[0]);var At,Ot,Dt=new Array(wt+Tt),jt=0,Gt=0,qt=0,en=Math.abs,Xt=vt[Gt],sn=en(Xt),yn=-bt[qt],vn=en(yn);sn<vn?(Ot=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(Ot=yn,(qt+=1)<Tt&&(yn=-bt[qt],vn=en(yn))),Gt<wt&&sn<vn||qt>=Tt?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=-bt[qt],vn=en(yn)));for(var Sn,fn,Dn=At+Ot,rr=Dn-At,bn=Ot-rr,Nn=bn,Bn=Dn;Gt<wt&&qt<Tt;)sn<vn?(At=Xt,(Gt+=1)<wt&&(Xt=vt[Gt],sn=en(Xt))):(At=yn,(qt+=1)<Tt&&(yn=-bt[qt],vn=en(yn))),(bn=(Ot=Nn)-(rr=(Dn=At+Ot)-At))&&(Dt[jt++]=bn),Nn=Bn-((Sn=Bn+Dn)-(fn=Sn-Bn))+(Dn-fn),Bn=Sn;for(;Gt<wt;)(bn=(Ot=Nn)-(rr=(Dn=(At=Xt)+Ot)-At))&&(Dt[jt++]=bn),Nn=Bn-((Sn=Bn+Dn)-(fn=Sn-Bn))+(Dn-fn),Bn=Sn,(Gt+=1)<wt&&(Xt=vt[Gt]);for(;qt<Tt;)(bn=(Ot=Nn)-(rr=(Dn=(At=yn)+Ot)-At))&&(Dt[jt++]=bn),Nn=Bn-((Sn=Bn+Dn)-(fn=Sn-Bn))+(Dn-fn),Bn=Sn,(qt+=1)<Tt&&(yn=-bt[qt]);return Nn&&(Dt[jt++]=Nn),Bn&&(Dt[jt++]=Bn),jt||(Dt[jt++]=0),Dt.length=jt,Dt},dr=vs(function(vt){function bt(qt,en){for(var Xt=new Array(qt.length-1),sn=1;sn<qt.length;++sn)for(var yn=Xt[sn-1]=new Array(qt.length-1),vn=0,Sn=0;vn<qt.length;++vn)vn!==en&&(yn[Sn++]=qt[sn][vn]);return Xt}function wt(qt){if(qt.length===1)return qt[0];if(qt.length===2)return["sum(",qt[0],",",qt[1],")"].join("");var en=qt.length>>1;return["sum(",wt(qt.slice(0,en)),",",wt(qt.slice(en)),")"].join("")}function Tt(qt){if(qt.length===2)return[["sum(prod(",qt[0][0],",",qt[1][1],"),prod(-",qt[0][1],",",qt[1][0],"))"].join("")];for(var en=[],Xt=0;Xt<qt.length;++Xt)en.push(["scale(",wt(Tt(bt(qt,Xt))),",",(sn=Xt,1&sn?"-":""),qt[0][Xt],")"].join(""));return en;var sn}function At(qt){for(var en=[],Xt=[],sn=function(bn){for(var Nn=new Array(bn),Bn=0;Bn<bn;++Bn){Nn[Bn]=new Array(bn);for(var Gn=0;Gn<bn;++Gn)Nn[Bn][Gn]=["m",Gn,"[",bn-Bn-1,"]"].join("")}return Nn}(qt),yn=[],vn=0;vn<qt;++vn)(1&vn)==0?en.push.apply(en,Tt(bt(sn,vn))):Xt.push.apply(Xt,Tt(bt(sn,vn))),yn.push("m"+vn);var Sn=wt(en),fn=wt(Xt),Dn="orientation"+qt+"Exact",rr=["function ",Dn,"(",yn.join(),"){var p=",Sn,",n=",fn,",d=sub(p,n);return d[d.length-1];};return ",Dn].join("");return new Function("sum","prod","scale","sub",rr)(Ir,ds,ri,Gr)}var Ot=At(3),Dt=At(4),jt=[function(){return 0},function(){return 0},function(qt,en){return en[0]-qt[0]},function(qt,en,Xt){var sn,yn=(qt[1]-Xt[1])*(en[0]-Xt[0]),vn=(qt[0]-Xt[0])*(en[1]-Xt[1]),Sn=yn-vn;if(yn>0){if(vn<=0)return Sn;sn=yn+vn}else{if(!(yn<0)||vn>=0)return Sn;sn=-(yn+vn)}var fn=33306690738754716e-32*sn;return Sn>=fn||Sn<=-fn?Sn:Ot(qt,en,Xt)},function(qt,en,Xt,sn){var yn=qt[0]-sn[0],vn=en[0]-sn[0],Sn=Xt[0]-sn[0],fn=qt[1]-sn[1],Dn=en[1]-sn[1],rr=Xt[1]-sn[1],bn=qt[2]-sn[2],Nn=en[2]-sn[2],Bn=Xt[2]-sn[2],Gn=vn*rr,jn=Sn*Dn,Vr=Sn*fn,$r=yn*rr,qr=yn*Dn,Rr=vn*fn,Jr=bn*(Gn-jn)+Nn*(Vr-$r)+Bn*(qr-Rr),Br=7771561172376103e-31*((Math.abs(Gn)+Math.abs(jn))*Math.abs(bn)+(Math.abs(Vr)+Math.abs($r))*Math.abs(Nn)+(Math.abs(qr)+Math.abs(Rr))*Math.abs(Bn));return Jr>Br||-Jr>Br?Jr:Dt(qt,en,Xt,sn)}];function Gt(qt){var en=jt[qt.length];return en||(en=jt[qt.length]=At(qt.length)),en.apply(void 0,qt)}(function(){for(;jt.length<=5;)jt.push(At(jt.length));for(var qt=[],en=["slow"],Xt=0;Xt<=5;++Xt)qt.push("a"+Xt),en.push("o"+Xt);var sn=["function getOrientation(",qt.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(Xt=2;Xt<=5;++Xt)sn.push("case ",Xt,":return o",Xt,"(",qt.slice(0,Xt).join(),");");sn.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),en.push(sn.join(""));var yn=Function.apply(void 0,en);for(vt.exports=yn.apply(void 0,[Gt].concat(jt)),Xt=0;Xt<=5;++Xt)vt.exports[Xt]=jt[Xt]})()}),ei=function(vt){var bt=vt.length;if(bt<3){for(var wt=new Array(bt),Tt=0;Tt<bt;++Tt)wt[Tt]=Tt;return bt===2&&vt[0][0]===vt[1][0]&&vt[0][1]===vt[1][1]?[0]:wt}var At=new Array(bt);for(Tt=0;Tt<bt;++Tt)At[Tt]=Tt;At.sort(function(yn,vn){var Sn=vt[yn][0]-vt[vn][0];return Sn||vt[yn][1]-vt[vn][1]});var Ot=[At[0],At[1]],Dt=[At[0],At[1]];for(Tt=2;Tt<bt;++Tt){for(var jt=At[Tt],Gt=vt[jt],qt=Ot.length;qt>1&&ti(vt[Ot[qt-2]],vt[Ot[qt-1]],Gt)<=0;)qt-=1,Ot.pop();for(Ot.push(jt),qt=Dt.length;qt>1&&ti(vt[Dt[qt-2]],vt[Dt[qt-1]],Gt)>=0;)qt-=1,Dt.pop();Dt.push(jt)}wt=new Array(Dt.length+Ot.length-2);for(var en=0,Xt=(Tt=0,Ot.length);Tt<Xt;++Tt)wt[en++]=Ot[Tt];for(var sn=Dt.length-2;sn>0;--sn)wt[en++]=Dt[sn];return wt},ti=dr[3],Bi=wo,Oo=wo;function wo(vt,bt){if(!(this instanceof wo))return new wo(vt,bt);if(this.data=vt||[],this.length=this.data.length,this.compare=bt||_s,this.length>0)for(var wt=(this.length>>1)-1;wt>=0;wt--)this._down(wt)}function _s(vt,bt){return vt<bt?-1:vt>bt?1:0}wo.prototype={push:function(vt){this.data.push(vt),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var vt=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),vt}},peek:function(){return this.data[0]},_up:function(vt){for(var bt=this.data,wt=this.compare,Tt=bt[vt];vt>0;){var At=vt-1>>1,Ot=bt[At];if(wt(Tt,Ot)>=0)break;bt[vt]=Ot,vt=At}bt[vt]=Tt},_down:function(vt){for(var bt=this.data,wt=this.compare,Tt=this.length>>1,At=bt[vt];vt<Tt;){var Ot=1+(vt<<1),Dt=Ot+1,jt=bt[Ot];if(Dt<this.length&&wt(bt[Dt],jt)<0&&(Ot=Dt,jt=bt[Dt]),wt(jt,At)>=0)break;bt[vt]=jt,vt=Ot}bt[vt]=At}},Bi.default=Oo;var fs=function(vt,bt){for(var wt=vt[0],Tt=vt[1],At=!1,Ot=0,Dt=bt.length-1;Ot<bt.length;Dt=Ot++){var jt=bt[Ot][0],Gt=bt[Ot][1],qt=bt[Dt][0],en=bt[Dt][1];Gt>Tt!=en>Tt&&wt<(qt-jt)*(Tt-Gt)/(en-Gt)+jt&&(At=!At)}return At},zi=dr[3],Ps=Ga,Da=Ga;function Ga(vt,bt,wt){bt=Math.max(0,bt===void 0?2:bt),wt=wt||0;for(var Tt,At=function(rr){for(var bn=rr[0],Nn=rr[0],Bn=rr[0],Gn=rr[0],jn=0;jn<rr.length;jn++){var Vr=rr[jn];Vr[0]<bn[0]&&(bn=Vr),Vr[0]>Bn[0]&&(Bn=Vr),Vr[1]<Nn[1]&&(Nn=Vr),Vr[1]>Gn[1]&&(Gn=Vr)}var $r=[bn,Nn,Bn,Gn],qr=$r.slice();for(jn=0;jn<rr.length;jn++)fs(rr[jn],$r)||qr.push(rr[jn]);var Rr=ei(qr),Jr=[];for(jn=0;jn<Rr.length;jn++)Jr.push(qr[Rr[jn]]);return Jr}(vt),Ot=Ar(16,["[0]","[1]","[0]","[1]"]).load(vt),Dt=[],jt=0;jt<At.length;jt++){var Gt=At[jt];Ot.remove(Gt),Tt=Rl(Gt,Tt),Dt.push(Tt)}var qt=Ar(16);for(jt=0;jt<Dt.length;jt++)qt.insert(br(Dt[jt]));for(var en=bt*bt,Xt=wt*wt;Dt.length;){var sn=Dt.shift(),yn=sn.p,vn=sn.next.p,Sn=Or(yn,vn);if(!(Sn<Xt)){var fn=Sn/en;(Gt=Hi(Ot,sn.prev.p,yn,vn,sn.next.next.p,fn,qt))&&Math.min(Or(Gt,yn),Or(Gt,vn))<=fn&&(Dt.push(sn),Dt.push(Rl(Gt,sn)),Ot.remove(Gt),qt.remove(sn),qt.insert(br(sn)),qt.insert(br(sn.next)))}}sn=Tt;var Dn=[];do Dn.push(sn.p),sn=sn.next;while(sn!==Tt);return Dn.push(sn.p),Dn}function Hi(vt,bt,wt,Tt,At,Ot,Dt){for(var jt=new Bi(null,Ji),Gt=vt.data;Gt;){for(var qt=0;qt<Gt.children.length;qt++){var en=Gt.children[qt],Xt=Gt.leaf?ea(en,wt,Tt):xo(wt,Tt,en);Xt>Ot||jt.push({node:en,dist:Xt})}for(;jt.length&&!jt.peek().node.children;){var sn=jt.pop(),yn=sn.node,vn=ea(yn,bt,wt),Sn=ea(yn,Tt,At);if(sn.dist<vn&&sn.dist<Sn&&Ki(wt,yn,Dt)&&Ki(Tt,yn,Dt))return yn}(Gt=jt.pop())&&(Gt=Gt.node)}return null}function Ji(vt,bt){return vt.dist-bt.dist}function xo(vt,bt,wt){if(xi(vt,wt)||xi(bt,wt))return 0;var Tt=Oc(vt[0],vt[1],bt[0],bt[1],wt.minX,wt.minY,wt.maxX,wt.minY);if(Tt===0)return 0;var At=Oc(vt[0],vt[1],bt[0],bt[1],wt.minX,wt.minY,wt.minX,wt.maxY);if(At===0)return 0;var Ot=Oc(vt[0],vt[1],bt[0],bt[1],wt.maxX,wt.minY,wt.maxX,wt.maxY);if(Ot===0)return 0;var Dt=Oc(vt[0],vt[1],bt[0],bt[1],wt.minX,wt.maxY,wt.maxX,wt.maxY);return Dt===0?0:Math.min(Tt,At,Ot,Dt)}function xi(vt,bt){return vt[0]>=bt.minX&&vt[0]<=bt.maxX&&vt[1]>=bt.minY&&vt[1]<=bt.maxY}function Ki(vt,bt,wt){for(var Tt,At,Ot,Dt,jt=Math.min(vt[0],bt[0]),Gt=Math.min(vt[1],bt[1]),qt=Math.max(vt[0],bt[0]),en=Math.max(vt[1],bt[1]),Xt=wt.search({minX:jt,minY:Gt,maxX:qt,maxY:en}),sn=0;sn<Xt.length;sn++)if(Tt=Xt[sn].p,At=Xt[sn].next.p,Ot=vt,Tt!==(Dt=bt)&&At!==Ot&&zi(Tt,At,Ot)>0!=zi(Tt,At,Dt)>0&&zi(Ot,Dt,Tt)>0!=zi(Ot,Dt,At)>0)return!1;return!0}function br(vt){var bt=vt.p,wt=vt.next.p;return vt.minX=Math.min(bt[0],wt[0]),vt.minY=Math.min(bt[1],wt[1]),vt.maxX=Math.max(bt[0],wt[0]),vt.maxY=Math.max(bt[1],wt[1]),vt}function Rl(vt,bt){var wt={p:vt,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return bt?(wt.next=bt.next,wt.prev=bt,bt.next.prev=wt,bt.next=wt):(wt.prev=wt,wt.next=wt),wt}function Or(vt,bt){var wt=vt[0]-bt[0],Tt=vt[1]-bt[1];return wt*wt+Tt*Tt}function ea(vt,bt,wt){var Tt=bt[0],At=bt[1],Ot=wt[0]-Tt,Dt=wt[1]-At;if(Ot!==0||Dt!==0){var jt=((vt[0]-Tt)*Ot+(vt[1]-At)*Dt)/(Ot*Ot+Dt*Dt);jt>1?(Tt=wt[0],At=wt[1]):jt>0&&(Tt+=Ot*jt,At+=Dt*jt)}return(Ot=vt[0]-Tt)*Ot+(Dt=vt[1]-At)*Dt}function Oc(vt,bt,wt,Tt,At,Ot,Dt,jt){var Gt,qt,en,Xt,sn=wt-vt,yn=Tt-bt,vn=Dt-At,Sn=jt-Ot,fn=vt-At,Dn=bt-Ot,rr=sn*sn+yn*yn,bn=sn*vn+yn*Sn,Nn=vn*vn+Sn*Sn,Bn=sn*fn+yn*Dn,Gn=vn*fn+Sn*Dn,jn=rr*Nn-bn*bn,Vr=jn,$r=jn;jn===0?(qt=0,Vr=1,Xt=Gn,$r=Nn):(Xt=rr*Gn-bn*Bn,(qt=bn*Gn-Nn*Bn)<0?(qt=0,Xt=Gn,$r=Nn):qt>Vr&&(qt=Vr,Xt=Gn+bn,$r=Nn)),Xt<0?(Xt=0,-Bn<0?qt=0:-Bn>rr?qt=Vr:(qt=-Bn,Vr=rr)):Xt>$r&&(Xt=$r,-Bn+bn<0?qt=0:-Bn+bn>rr?qt=Vr:(qt=-Bn+bn,Vr=rr));var qr=(1-(en=Xt===0?0:Xt/$r))*At+en*Dt-((1-(Gt=qt===0?0:qt/Vr))*vt+Gt*wt),Rr=(1-en)*Ot+en*jt-((1-Gt)*bt+Gt*Tt);return qr*qr+Rr*Rr}function So(vt,bt){bt===void 0&&(bt={}),bt.concavity=bt.concavity||1/0;var wt=[];if(dn(vt,function(At){wt.push([At[0],At[1]])}),!wt.length)return null;var Tt=Ps(wt,bt.concavity);return Tt.length>3?It([Tt]):null}function oo(vt,bt,wt){if(wt===void 0&&(wt={}),!vt)throw new Error("point is required");if(!bt)throw new Error("polygon is required");var Tt=pn(vt),At=Hn(bt),Ot=At.type,Dt=bt.bbox,jt=At.coordinates;if(Dt&&function(sn,yn){return yn[0]<=sn[0]&&yn[1]<=sn[1]&&yn[2]>=sn[0]&&yn[3]>=sn[1]}(Tt,Dt)===!1)return!1;Ot==="Polygon"&&(jt=[jt]);for(var Gt=!1,qt=0;qt<jt.length&&!Gt;qt++)if(Ah(Tt,jt[qt][0],wt.ignoreBoundary)){for(var en=!1,Xt=1;Xt<jt[qt].length&&!en;)Ah(Tt,jt[qt][Xt],!wt.ignoreBoundary)&&(en=!0),Xt++;en||(Gt=!0)}return Gt}function Ah(vt,bt,wt){var Tt=!1;bt[0][0]===bt[bt.length-1][0]&&bt[0][1]===bt[bt.length-1][1]&&(bt=bt.slice(0,bt.length-1));for(var At=0,Ot=bt.length-1;At<bt.length;Ot=At++){var Dt=bt[At][0],jt=bt[At][1],Gt=bt[Ot][0],qt=bt[Ot][1];if(vt[1]*(Dt-Gt)+jt*(Gt-vt[0])+qt*(vt[0]-Dt)==0&&(Dt-vt[0])*(Gt-vt[0])<=0&&(jt-vt[1])*(qt-vt[1])<=0)return!wt;jt>vt[1]!=qt>vt[1]&&vt[0]<(Gt-Dt)*(vt[1]-jt)/(qt-jt)+Dt&&(Tt=!Tt)}return Tt}function Ii(vt,bt){var wt=[];return Jn(vt,function(Tt){var At=!1;if(Tt.geometry.type==="Point")cr(bt,function(Dt){oo(Tt,Dt)&&(At=!0)}),At&&wt.push(Tt);else{if(Tt.geometry.type!=="MultiPoint")throw new Error("Input geometry must be a Point or MultiPoint");var Ot=[];cr(bt,function(Dt){dn(Tt,function(jt){oo(jt,Dt)&&(At=!0,Ot.push(jt))})}),At&&wt.push(Zt(Ot))}}),Ft(wt)}function ao(vt,bt,wt){wt===void 0&&(wt={});var Tt=pn(vt),At=pn(bt),Ot=kn(At[1]-Tt[1]),Dt=kn(At[0]-Tt[0]),jt=kn(Tt[1]),Gt=kn(At[1]),qt=Math.pow(Math.sin(Ot/2),2)+Math.pow(Math.sin(Dt/2),2)*Math.cos(jt)*Math.cos(Gt);return on(2*Math.atan2(Math.sqrt(qt),Math.sqrt(1-qt)),wt.units)}function Yl(vt,bt){var wt=!1;return Ft(function(Tt){if(Tt.length<3)return[];Tt.sort(cc);for(var At,Ot,Dt,jt,Gt,qt,en=Tt.length-1,Xt=Tt[en].x,sn=Tt[0].x,yn=Tt[en].y,vn=yn,Sn=1e-12;en--;)Tt[en].y<yn&&(yn=Tt[en].y),Tt[en].y>vn&&(vn=Tt[en].y);var fn,Dn=sn-Xt,rr=vn-yn,bn=Dn>rr?Dn:rr,Nn=.5*(sn+Xt),Bn=.5*(vn+yn),Gn=[new tu({__sentinel:!0,x:Nn-20*bn,y:Bn-bn},{__sentinel:!0,x:Nn,y:Bn+20*bn},{__sentinel:!0,x:Nn+20*bn,y:Bn-bn})],jn=[],Vr=[];for(en=Tt.length;en--;){for(Vr.length=0,fn=Gn.length;fn--;)(Dn=Tt[en].x-Gn[fn].x)>0&&Dn*Dn>Gn[fn].r?(jn.push(Gn[fn]),Gn.splice(fn,1)):Dn*Dn+(rr=Tt[en].y-Gn[fn].y)*rr>Gn[fn].r||(Vr.push(Gn[fn].a,Gn[fn].b,Gn[fn].b,Gn[fn].c,Gn[fn].c,Gn[fn].a),Gn.splice(fn,1));for(Hs(Vr),fn=Vr.length;fn;)Ot=Vr[--fn],At=Vr[--fn],Dt=Tt[en],jt=Ot.x-At.x,Gt=Ot.y-At.y,qt=2*(jt*(Dt.y-Ot.y)-Gt*(Dt.x-Ot.x)),Math.abs(qt)>Sn&&Gn.push(new tu(At,Ot,Dt))}for(Array.prototype.push.apply(jn,Gn),en=jn.length;en--;)(jn[en].a.__sentinel||jn[en].b.__sentinel||jn[en].c.__sentinel)&&jn.splice(en,1);return jn}(vt.features.map(function(Tt){var At={x:Tt.geometry.coordinates[0],y:Tt.geometry.coordinates[1]};return bt?At.z=Tt.properties[bt]:Tt.geometry.coordinates.length===3&&(wt=!0,At.z=Tt.geometry.coordinates[2]),At})).map(function(Tt){var At=[Tt.a.x,Tt.a.y],Ot=[Tt.b.x,Tt.b.y],Dt=[Tt.c.x,Tt.c.y],jt={};return wt?(At.push(Tt.a.z),Ot.push(Tt.b.z),Dt.push(Tt.c.z)):jt={a:Tt.a.z,b:Tt.b.z,c:Tt.c.z},It([[At,Ot,Dt,At]],jt)}))}Ps.default=Da;var tu=function(vt,bt,wt){this.a=vt,this.b=bt,this.c=wt;var Tt,At,Ot=bt.x-vt.x,Dt=bt.y-vt.y,jt=wt.x-vt.x,Gt=wt.y-vt.y,qt=Ot*(vt.x+bt.x)+Dt*(vt.y+bt.y),en=jt*(vt.x+wt.x)+Gt*(vt.y+wt.y),Xt=2*(Ot*(wt.y-bt.y)-Dt*(wt.x-bt.x));this.x=(Gt*qt-Dt*en)/Xt,this.y=(Ot*en-jt*qt)/Xt,Tt=this.x-vt.x,At=this.y-vt.y,this.r=Tt*Tt+At*At};function cc(vt,bt){return bt.x-vt.x}function Hs(vt){var bt,wt,Tt,At,Ot,Dt=vt.length;e:for(;Dt;)for(wt=vt[--Dt],bt=vt[--Dt],Tt=Dt;Tt;)if(Ot=vt[--Tt],bt===(At=vt[--Tt])&&wt===Ot||bt===Ot&&wt===At){vt.splice(Dt,2),vt.splice(Tt,2),Dt-=2;continue e}}function $o(vt){if(!vt)throw new Error("geojson is required");switch(vt.type){case"Feature":return Wa(vt);case"FeatureCollection":return function(bt){var wt={type:"FeatureCollection"};return Object.keys(bt).forEach(function(Tt){switch(Tt){case"type":case"features":return;default:wt[Tt]=bt[Tt]}}),wt.features=bt.features.map(function(Tt){return Wa(Tt)}),wt}(vt);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return $c(vt);default:throw new Error("unknown GeoJSON type")}}function Wa(vt){var bt={type:"Feature"};return Object.keys(vt).forEach(function(wt){switch(wt){case"type":case"properties":case"geometry":return;default:bt[wt]=vt[wt]}}),bt.properties=ta(vt.properties),bt.geometry=$c(vt.geometry),bt}function ta(vt){var bt={};return vt&&Object.keys(vt).forEach(function(wt){var Tt=vt[wt];typeof Tt=="object"?Tt===null?bt[wt]=null:Array.isArray(Tt)?bt[wt]=Tt.map(function(At){return At}):bt[wt]=ta(Tt):bt[wt]=Tt}),bt}function $c(vt){var bt={type:vt.type};return vt.bbox&&(bt.bbox=vt.bbox),vt.type==="GeometryCollection"?(bt.geometries=vt.geometries.map(function(wt){return $c(wt)}),bt):(bt.coordinates=Ba(vt.coordinates),bt)}function Ba(vt){var bt=vt;return typeof bt[0]!="object"?bt.slice():bt.map(function(wt){return Ba(wt)})}function Xl(vt,bt){if(bt===void 0&&(bt={}),!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.mutate;if(nr(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");wt!==!1&&wt!==void 0||(vt=$o(vt));var Tt=[],At=fr(vt,function(Ot,Dt){var jt=function(Gt,qt){var en,Xt=Gt.geometry.coordinates,sn=qt.geometry.coordinates,yn=el(Xt[0]),vn=el(Xt[Xt.length-1]),Sn=el(sn[0]),fn=el(sn[sn.length-1]);if(yn===fn)en=sn.concat(Xt.slice(1));else if(Sn===vn)en=Xt.concat(sn.slice(1));else if(yn===Sn)en=Xt.slice(1).reverse().concat(sn);else{if(vn!==fn)return null;en=Xt.concat(sn.reverse().slice(1))}return Nt(en)}(Ot,Dt);return jt||(Tt.push(Ot),Dt)});return At&&Tt.push(At),Tt.length?Tt.length===1?Tt[0]:Yt(Tt.map(function(Ot){return Ot.coordinates})):null}function el(vt){return vt[0].toString()+","+vt[1].toString()}function Yu(vt){return vt}function nu(vt,bt){var wt=function(qt){if(qt==null)return Yu;var en,Xt,sn=qt.scale[0],yn=qt.scale[1],vn=qt.translate[0],Sn=qt.translate[1];return function(fn,Dn){Dn||(en=Xt=0);var rr=2,bn=fn.length,Nn=new Array(bn);for(Nn[0]=(en+=fn[0])*sn+vn,Nn[1]=(Xt+=fn[1])*yn+Sn;rr<bn;)Nn[rr]=fn[rr],++rr;return Nn}}(vt.transform),Tt=vt.arcs;function At(qt,en){en.length&&en.pop();for(var Xt=Tt[qt<0?~qt:qt],sn=0,yn=Xt.length;sn<yn;++sn)en.push(wt(Xt[sn],sn));qt<0&&function(vn,Sn){for(var fn,Dn=vn.length,rr=Dn-Sn;rr<--Dn;)fn=vn[rr],vn[rr++]=vn[Dn],vn[Dn]=fn}(en,yn)}function Ot(qt){return wt(qt)}function Dt(qt){for(var en=[],Xt=0,sn=qt.length;Xt<sn;++Xt)At(qt[Xt],en);return en.length<2&&en.push(en[0]),en}function jt(qt){for(var en=Dt(qt);en.length<4;)en.push(en[0]);return en}function Gt(qt){return qt.map(jt)}return function qt(en){var Xt,sn=en.type;switch(sn){case"GeometryCollection":return{type:sn,geometries:en.geometries.map(qt)};case"Point":Xt=Ot(en.coordinates);break;case"MultiPoint":Xt=en.coordinates.map(Ot);break;case"LineString":Xt=Dt(en.arcs);break;case"MultiLineString":Xt=en.arcs.map(Dt);break;case"Polygon":Xt=Gt(en.arcs);break;case"MultiPolygon":Xt=en.arcs.map(Gt);break;default:return null}return{type:sn,coordinates:Xt}}(bt)}function Su(vt,bt){var wt={},Tt={},At={},Ot=[],Dt=-1;function jt(Gt,qt){for(var en in Gt){var Xt=Gt[en];delete qt[Xt.start],delete Xt.start,delete Xt.end,Xt.forEach(function(sn){wt[sn<0?~sn:sn]=1}),Ot.push(Xt)}}return bt.forEach(function(Gt,qt){var en,Xt=vt.arcs[Gt<0?~Gt:Gt];Xt.length<3&&!Xt[1][0]&&!Xt[1][1]&&(en=bt[++Dt],bt[Dt]=Gt,bt[qt]=en)}),bt.forEach(function(Gt){var qt,en,Xt=function(fn){var Dn,rr=vt.arcs[fn<0?~fn:fn],bn=rr[0];return vt.transform?(Dn=[0,0],rr.forEach(function(Nn){Dn[0]+=Nn[0],Dn[1]+=Nn[1]})):Dn=rr[rr.length-1],fn<0?[Dn,bn]:[bn,Dn]}(Gt),sn=Xt[0],yn=Xt[1];if(qt=At[sn])if(delete At[qt.end],qt.push(Gt),qt.end=yn,en=Tt[yn]){delete Tt[en.start];var vn=en===qt?qt:qt.concat(en);Tt[vn.start=qt.start]=At[vn.end=en.end]=vn}else Tt[qt.start]=At[qt.end]=qt;else if(qt=Tt[yn])if(delete Tt[qt.start],qt.unshift(Gt),qt.start=sn,en=At[sn]){delete At[en.end];var Sn=en===qt?qt:en.concat(qt);Tt[Sn.start=en.start]=At[Sn.end=qt.end]=Sn}else Tt[qt.start]=At[qt.end]=qt;else Tt[(qt=[Gt]).start=sn]=At[qt.end=yn]=qt}),jt(At,Tt),jt(Tt,At),bt.forEach(function(Gt){wt[Gt<0?~Gt:Gt]||Ot.push([Gt])}),Ot}function ll(vt,bt){var wt={},Tt=[],At=[];function Ot(jt){jt.forEach(function(Gt){Gt.forEach(function(qt){(wt[qt=qt<0?~qt:qt]||(wt[qt]=[])).push(jt)})}),Tt.push(jt)}function Dt(jt){return function(Gt){for(var qt,en=-1,Xt=Gt.length,sn=Gt[Xt-1],yn=0;++en<Xt;)qt=sn,sn=Gt[en],yn+=qt[0]*sn[1]-qt[1]*sn[0];return Math.abs(yn)}(nu(vt,{type:"Polygon",arcs:[jt]}).coordinates[0])}return bt.forEach(function jt(Gt){switch(Gt.type){case"GeometryCollection":Gt.geometries.forEach(jt);break;case"Polygon":Ot(Gt.arcs);break;case"MultiPolygon":Gt.arcs.forEach(Ot)}}),Tt.forEach(function(jt){if(!jt._){var Gt=[],qt=[jt];for(jt._=1,At.push(Gt);jt=qt.pop();)Gt.push(jt),jt.forEach(function(en){en.forEach(function(Xt){wt[Xt<0?~Xt:Xt].forEach(function(sn){sn._||(sn._=1,qt.push(sn))})})})}}),Tt.forEach(function(jt){delete jt._}),{type:"MultiPolygon",arcs:At.map(function(jt){var Gt,qt=[];if(jt.forEach(function(vn){vn.forEach(function(Sn){Sn.forEach(function(fn){wt[fn<0?~fn:fn].length<2&&qt.push(fn)})})}),(Gt=(qt=Su(vt,qt)).length)>1)for(var en,Xt,sn=1,yn=Dt(qt[0]);sn<Gt;++sn)(en=Dt(qt[sn]))>yn&&(Xt=qt[0],qt[0]=qt[sn],qt[sn]=Xt,yn=en);return qt}).filter(function(jt){return jt.length>0})}}var cd=Object.prototype.hasOwnProperty;function Lh(vt,bt,wt,Tt,At,Ot){arguments.length===3&&(Tt=Ot=Array,At=null);for(var Dt=new Tt(vt=1<<Math.max(4,Math.ceil(Math.log(vt)/Math.LN2))),jt=new Ot(vt),Gt=vt-1,qt=0;qt<vt;++qt)Dt[qt]=At;function en(vn,Sn){for(var fn=bt(vn)&Gt,Dn=Dt[fn],rr=0;Dn!=At;){if(wt(Dn,vn))return jt[fn]=Sn;if(++rr>=vt)throw new Error("full hashmap");Dn=Dt[fn=fn+1&Gt]}return Dt[fn]=vn,jt[fn]=Sn,Sn}function Xt(vn,Sn){for(var fn=bt(vn)&Gt,Dn=Dt[fn],rr=0;Dn!=At;){if(wt(Dn,vn))return jt[fn];if(++rr>=vt)throw new Error("full hashmap");Dn=Dt[fn=fn+1&Gt]}return Dt[fn]=vn,jt[fn]=Sn,Sn}function sn(vn,Sn){for(var fn=bt(vn)&Gt,Dn=Dt[fn],rr=0;Dn!=At;){if(wt(Dn,vn))return jt[fn];if(++rr>=vt)break;Dn=Dt[fn=fn+1&Gt]}return Sn}function yn(){for(var vn=[],Sn=0,fn=Dt.length;Sn<fn;++Sn){var Dn=Dt[Sn];Dn!=At&&vn.push(Dn)}return vn}return{set:en,maybeSet:Xt,get:sn,keys:yn}}function Xu(vt,bt){return vt[0]===bt[0]&&vt[1]===bt[1]}var To=new ArrayBuffer(16),uc=new Float64Array(To),ho=new Uint32Array(To);function Ml(vt){uc[0]=vt[0],uc[1]=vt[1];var bt=ho[0]^ho[1];return 2147483647&(bt=bt<<5^bt>>7^ho[2]^ho[3])}function sp(vt){var bt,wt,Tt,At,Ot=vt.coordinates,Dt=vt.lines,jt=vt.rings,Gt=function(){for(var $r=Lh(1.4*Ot.length,Bn,Gn,Int32Array,-1,Int32Array),qr=new Int32Array(Ot.length),Rr=0,Jr=Ot.length;Rr<Jr;++Rr)qr[Rr]=$r.maybeSet(Rr,Rr);return qr}(),qt=new Int32Array(Ot.length),en=new Int32Array(Ot.length),Xt=new Int32Array(Ot.length),sn=new Int8Array(Ot.length),yn=0;for(bt=0,wt=Ot.length;bt<wt;++bt)qt[bt]=en[bt]=Xt[bt]=-1;for(bt=0,wt=Dt.length;bt<wt;++bt){var vn=Dt[bt],Sn=vn[0],fn=vn[1];for(Tt=Gt[Sn],At=Gt[++Sn],++yn,sn[Tt]=1;++Sn<=fn;)Nn(bt,Tt,Tt=At,At=Gt[Sn]);++yn,sn[At]=1}for(bt=0,wt=Ot.length;bt<wt;++bt)qt[bt]=-1;for(bt=0,wt=jt.length;bt<wt;++bt){var Dn=jt[bt],rr=Dn[0]+1,bn=Dn[1];for(Nn(bt,Gt[bn-1],Tt=Gt[rr-1],At=Gt[rr]);++rr<=bn;)Nn(bt,Tt,Tt=At,At=Gt[rr])}function Nn($r,qr,Rr,Jr){if(qt[Rr]!==$r){qt[Rr]=$r;var Br=en[Rr];if(Br>=0){var Dr=Xt[Rr];Br===qr&&Dr===Jr||Br===Jr&&Dr===qr||(++yn,sn[Rr]=1)}else en[Rr]=qr,Xt[Rr]=Jr}}function Bn($r){return Ml(Ot[$r])}function Gn($r,qr){return Xu(Ot[$r],Ot[qr])}qt=en=Xt=null;var jn,Vr=function($r,qr,Rr,Jr,Br){arguments.length===3&&(Jr=Array,Br=null);for(var Dr=new Jr($r=1<<Math.max(4,Math.ceil(Math.log($r)/Math.LN2))),Mr=$r-1,Yr=0;Yr<$r;++Yr)Dr[Yr]=Br;function zr(ji){for(var yi=qr(ji)&Mr,bo=Dr[yi],Ri=0;bo!=Br;){if(Rr(bo,ji))return!0;if(++Ri>=$r)throw new Error("full hashset");bo=Dr[yi=yi+1&Mr]}return Dr[yi]=ji,!0}function Qr(ji){for(var yi=qr(ji)&Mr,bo=Dr[yi],Ri=0;bo!=Br;){if(Rr(bo,ji))return!0;if(++Ri>=$r)break;bo=Dr[yi=yi+1&Mr]}return!1}function wr(){for(var ji=[],yi=0,bo=Dr.length;yi<bo;++yi){var Ri=Dr[yi];Ri!=Br&&ji.push(Ri)}return ji}return{add:zr,has:Qr,values:wr}}(1.4*yn,Ml,Xu);for(bt=0,wt=Ot.length;bt<wt;++bt)sn[jn=Gt[bt]]&&Vr.add(Ot[jn]);return Vr}function ap(vt,bt,wt,Tt){ud(vt,bt,wt),ud(vt,bt,bt+Tt),ud(vt,bt+Tt,wt)}function ud(vt,bt,wt){for(var Tt,At=bt+(wt---bt>>1);bt<At;++bt,--wt)Tt=vt[bt],vt[bt]=vt[wt],vt[wt]=Tt}function Zu(vt){var bt,wt,Tt={};for(bt in vt)Tt[bt]=(wt=vt[bt])==null?{type:null}:(wt.type==="FeatureCollection"?lp:wt.type==="Feature"?Zl:la)(wt);return Tt}function lp(vt){var bt={type:"GeometryCollection",geometries:vt.features.map(Zl)};return vt.bbox!=null&&(bt.bbox=vt.bbox),bt}function Zl(vt){var bt,wt=la(vt.geometry);for(bt in vt.id!=null&&(wt.id=vt.id),vt.bbox!=null&&(wt.bbox=vt.bbox),vt.properties){wt.properties=vt.properties;break}return wt}function la(vt){if(vt==null)return{type:null};var bt=vt.type==="GeometryCollection"?{type:"GeometryCollection",geometries:vt.geometries.map(la)}:vt.type==="Point"||vt.type==="MultiPoint"?{type:vt.type,coordinates:vt.coordinates}:{type:vt.type,arcs:vt.coordinates};return vt.bbox!=null&&(bt.bbox=vt.bbox),bt}function Cu(vt,bt){var wt=function(sn){var yn=1/0,vn=1/0,Sn=-1/0,fn=-1/0;function Dn(jn){jn!=null&&cd.call(rr,jn.type)&&rr[jn.type](jn)}var rr={GeometryCollection:function(jn){jn.geometries.forEach(Dn)},Point:function(jn){bn(jn.coordinates)},MultiPoint:function(jn){jn.coordinates.forEach(bn)},LineString:function(jn){Nn(jn.arcs)},MultiLineString:function(jn){jn.arcs.forEach(Nn)},Polygon:function(jn){jn.arcs.forEach(Nn)},MultiPolygon:function(jn){jn.arcs.forEach(Bn)}};function bn(jn){var Vr=jn[0],$r=jn[1];Vr<yn&&(yn=Vr),Vr>Sn&&(Sn=Vr),$r<vn&&(vn=$r),$r>fn&&(fn=$r)}function Nn(jn){jn.forEach(bn)}function Bn(jn){jn.forEach(Nn)}for(var Gn in sn)Dn(sn[Gn]);return Sn>=yn&&fn>=vn?[yn,vn,Sn,fn]:void 0}(vt=Zu(vt)),Tt=bt>0&&wt&&function(sn,yn,vn){var Sn=yn[0],fn=yn[1],Dn=yn[2],rr=yn[3],bn=Dn-Sn?(vn-1)/(Dn-Sn):1,Nn=rr-fn?(vn-1)/(rr-fn):1;function Bn(Br){return[Math.round((Br[0]-Sn)*bn),Math.round((Br[1]-fn)*Nn)]}function Gn(Br,Dr){for(var Mr,Yr,zr,Qr,wr,ji=-1,yi=0,bo=Br.length,Ri=new Array(bo);++ji<bo;)Mr=Br[ji],Qr=Math.round((Mr[0]-Sn)*bn),wr=Math.round((Mr[1]-fn)*Nn),Qr===Yr&&wr===zr||(Ri[yi++]=[Yr=Qr,zr=wr]);for(Ri.length=yi;yi<Dr;)yi=Ri.push([Ri[0][0],Ri[0][1]]);return Ri}function jn(Br){return Gn(Br,2)}function Vr(Br){return Gn(Br,4)}function $r(Br){return Br.map(Vr)}function qr(Br){Br!=null&&cd.call(Rr,Br.type)&&Rr[Br.type](Br)}var Rr={GeometryCollection:function(Br){Br.geometries.forEach(qr)},Point:function(Br){Br.coordinates=Bn(Br.coordinates)},MultiPoint:function(Br){Br.coordinates=Br.coordinates.map(Bn)},LineString:function(Br){Br.arcs=jn(Br.arcs)},MultiLineString:function(Br){Br.arcs=Br.arcs.map(jn)},Polygon:function(Br){Br.arcs=$r(Br.arcs)},MultiPolygon:function(Br){Br.arcs=Br.arcs.map($r)}};for(var Jr in sn)qr(sn[Jr]);return{scale:[1/bn,1/Nn],translate:[Sn,fn]}}(vt,wt,bt),At=function(sn){var yn,vn,Sn,fn,Dn=sn.coordinates,rr=sn.lines,bn=sn.rings,Nn=rr.length+bn.length;for(delete sn.lines,delete sn.rings,Sn=0,fn=rr.length;Sn<fn;++Sn)for(yn=rr[Sn];yn=yn.next;)++Nn;for(Sn=0,fn=bn.length;Sn<fn;++Sn)for(vn=bn[Sn];vn=vn.next;)++Nn;var Bn=Lh(2*Nn*1.4,Ml,Xu),Gn=sn.arcs=[];for(Sn=0,fn=rr.length;Sn<fn;++Sn){yn=rr[Sn];do jn(yn);while(yn=yn.next)}for(Sn=0,fn=bn.length;Sn<fn;++Sn)if((vn=bn[Sn]).next)do jn(vn);while(vn=vn.next);else Vr(vn);function jn(Dr){var Mr,Yr,zr,Qr,wr,ji,yi,bo;if(zr=Bn.get(Mr=Dn[Dr[0]])){for(yi=0,bo=zr.length;yi<bo;++yi)if($r(Qr=zr[yi],Dr))return Dr[0]=Qr[0],void(Dr[1]=Qr[1])}if(wr=Bn.get(Yr=Dn[Dr[1]])){for(yi=0,bo=wr.length;yi<bo;++yi)if(qr(ji=wr[yi],Dr))return Dr[1]=ji[0],void(Dr[0]=ji[1])}zr?zr.push(Dr):Bn.set(Mr,[Dr]),wr?wr.push(Dr):Bn.set(Yr,[Dr]),Gn.push(Dr)}function Vr(Dr){var Mr,Yr,zr,Qr,wr;if(Yr=Bn.get(Dn[Dr[0]]))for(Qr=0,wr=Yr.length;Qr<wr;++Qr){if(Rr(zr=Yr[Qr],Dr))return Dr[0]=zr[0],void(Dr[1]=zr[1]);if(Jr(zr,Dr))return Dr[0]=zr[1],void(Dr[1]=zr[0])}if(Yr=Bn.get(Mr=Dn[Dr[0]+Br(Dr)]))for(Qr=0,wr=Yr.length;Qr<wr;++Qr){if(Rr(zr=Yr[Qr],Dr))return Dr[0]=zr[0],void(Dr[1]=zr[1]);if(Jr(zr,Dr))return Dr[0]=zr[1],void(Dr[1]=zr[0])}Yr?Yr.push(Dr):Bn.set(Mr,[Dr]),Gn.push(Dr)}function $r(Dr,Mr){var Yr=Dr[0],zr=Mr[0],Qr=Dr[1];if(Yr-Qr!=zr-Mr[1])return!1;for(;Yr<=Qr;++Yr,++zr)if(!Xu(Dn[Yr],Dn[zr]))return!1;return!0}function qr(Dr,Mr){var Yr=Dr[0],zr=Mr[0],Qr=Dr[1],wr=Mr[1];if(Yr-Qr!=zr-wr)return!1;for(;Yr<=Qr;++Yr,--wr)if(!Xu(Dn[Yr],Dn[wr]))return!1;return!0}function Rr(Dr,Mr){var Yr=Dr[0],zr=Mr[0],Qr=Dr[1]-Yr;if(Qr!==Mr[1]-zr)return!1;for(var wr=Br(Dr),ji=Br(Mr),yi=0;yi<Qr;++yi)if(!Xu(Dn[Yr+(yi+wr)%Qr],Dn[zr+(yi+ji)%Qr]))return!1;return!0}function Jr(Dr,Mr){var Yr=Dr[0],zr=Mr[0],Qr=Dr[1],wr=Mr[1],ji=Qr-Yr;if(ji!==wr-zr)return!1;for(var yi=Br(Dr),bo=ji-Br(Mr),Ri=0;Ri<ji;++Ri)if(!Xu(Dn[Yr+(Ri+yi)%ji],Dn[wr-(Ri+bo)%ji]))return!1;return!0}function Br(Dr){for(var Mr=Dr[0],Yr=Dr[1],zr=Mr,Qr=zr,wr=Dn[zr];++zr<Yr;){var ji=Dn[zr];(ji[0]<wr[0]||ji[0]===wr[0]&&ji[1]<wr[1])&&(Qr=zr,wr=ji)}return Qr-Mr}return sn}(function(sn){var yn,vn,Sn,fn=sp(sn),Dn=sn.coordinates,rr=sn.lines,bn=sn.rings;for(vn=0,Sn=rr.length;vn<Sn;++vn)for(var Nn=rr[vn],Bn=Nn[0],Gn=Nn[1];++Bn<Gn;)fn.has(Dn[Bn])&&(yn={0:Bn,1:Nn[1]},Nn[1]=Bn,Nn=Nn.next=yn);for(vn=0,Sn=bn.length;vn<Sn;++vn)for(var jn=bn[vn],Vr=jn[0],$r=Vr,qr=jn[1],Rr=fn.has(Dn[Vr]);++$r<qr;)fn.has(Dn[$r])&&(Rr?(yn={0:$r,1:jn[1]},jn[1]=$r,jn=jn.next=yn):(ap(Dn,Vr,qr,qr-$r),Dn[qr]=Dn[Vr],Rr=!0,$r=Vr));return sn}(function(sn){var yn=-1,vn=[],Sn=[],fn=[];function Dn(jn){jn&&cd.call(rr,jn.type)&&rr[jn.type](jn)}var rr={GeometryCollection:function(jn){jn.geometries.forEach(Dn)},LineString:function(jn){jn.arcs=bn(jn.arcs)},MultiLineString:function(jn){jn.arcs=jn.arcs.map(bn)},Polygon:function(jn){jn.arcs=jn.arcs.map(Nn)},MultiPolygon:function(jn){jn.arcs=jn.arcs.map(Bn)}};function bn(jn){for(var Vr=0,$r=jn.length;Vr<$r;++Vr)fn[++yn]=jn[Vr];var qr={0:yn-$r+1,1:yn};return vn.push(qr),qr}function Nn(jn){for(var Vr=0,$r=jn.length;Vr<$r;++Vr)fn[++yn]=jn[Vr];var qr={0:yn-$r+1,1:yn};return Sn.push(qr),qr}function Bn(jn){return jn.map(Nn)}for(var Gn in sn)Dn(sn[Gn]);return{type:"Topology",coordinates:fn,lines:vn,rings:Sn,objects:sn}}(vt))),Ot=At.coordinates,Dt=Lh(1.4*At.arcs.length,cp,yg);function jt(sn){sn&&cd.call(Gt,sn.type)&&Gt[sn.type](sn)}vt=At.objects,At.bbox=wt,At.arcs=At.arcs.map(function(sn,yn){return Dt.set(sn,yn),Ot.slice(sn[0],sn[1]+1)}),delete At.coordinates,Ot=null;var Gt={GeometryCollection:function(sn){sn.geometries.forEach(jt)},LineString:function(sn){sn.arcs=qt(sn.arcs)},MultiLineString:function(sn){sn.arcs=sn.arcs.map(qt)},Polygon:function(sn){sn.arcs=sn.arcs.map(qt)},MultiPolygon:function(sn){sn.arcs=sn.arcs.map(en)}};function qt(sn){var yn=[];do{var vn=Dt.get(sn);yn.push(sn[0]<sn[1]?vn:~vn)}while(sn=sn.next);return yn}function en(sn){return sn.map(qt)}for(var Xt in vt)jt(vt[Xt]);return Tt&&(At.transform=Tt,At.arcs=function(sn){for(var yn=-1,vn=sn.length;++yn<vn;){for(var Sn,fn,Dn=sn[yn],rr=0,bn=1,Nn=Dn.length,Bn=Dn[0],Gn=Bn[0],jn=Bn[1];++rr<Nn;)Sn=(Bn=Dn[rr])[0],fn=Bn[1],Sn===Gn&&fn===jn||(Dn[bn++]=[Sn-Gn,fn-jn],Gn=Sn,jn=fn);bn===1&&(Dn[bn++]=[0,0]),Dn.length=bn}return sn}(At.arcs)),At}function cp(vt){var bt,wt=vt[0],Tt=vt[1];return Tt<wt&&(bt=wt,wt=Tt,Tt=bt),wt+31*Tt}function yg(vt,bt){var wt,Tt=vt[0],At=vt[1],Ot=bt[0],Dt=bt[1];return At<Tt&&(wt=Tt,Tt=At,At=wt),Dt<Ot&&(wt=Ot,Ot=Dt,Dt=wt),Tt===Ot&&At===Dt}function Om(vt,bt){if(bt===void 0&&(bt={}),nr(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");bt.mutate!==!1&&bt.mutate!==void 0||(vt=$o(vt));var wt=[];Er(vt,function(At){wt.push(At.geometry)});var Tt=Cu({geoms:Kt(wt).geometry});return function(At){return nu(At,ll.apply(this,arguments))}(Tt,Tt.objects.geoms.geometries)}function vg(vt,bt){if(bt===void 0&&(bt={}),!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.mutate;if(nr(vt)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!vt.features.length)throw new Error("geojson is empty");wt!==!1&&wt!==void 0||(vt=$o(vt));var Tt=function(Ot){var Dt={};Er(Ot,function(Gt){Dt[Gt.geometry.type]=!0});var jt=Object.keys(Dt);return jt.length===1?jt[0]:null}(vt);if(!Tt)throw new Error("geojson must be homogenous");var At=vt;switch(Tt){case"LineString":return Xl(At,bt);case"Polygon":return Om(At,bt);default:throw new Error(Tt+" is not supported")}}function Kl(vt,bt){bt===void 0&&(bt={});var wt=typeof bt=="object"?bt.mutate:bt;if(!vt)throw new Error("geojson is required");var Tt=nr(vt),At=[];switch(Tt){case"LineString":At=cl(vt);break;case"MultiLineString":case"Polygon":Rn(vt).forEach(function(Dt){At.push(cl(Dt))});break;case"MultiPolygon":Rn(vt).forEach(function(Dt){var jt=[];Dt.forEach(function(Gt){jt.push(cl(Gt))}),At.push(jt)});break;case"Point":return vt;case"MultiPoint":var Ot={};Rn(vt).forEach(function(Dt){var jt=Dt.join("-");Object.prototype.hasOwnProperty.call(Ot,jt)||(At.push(Dt),Ot[jt]=!0)});break;default:throw new Error(Tt+" geometry not supported")}return vt.coordinates?wt===!0?(vt.coordinates=At,vt):{type:Tt,coordinates:At}:wt===!0?(vt.geometry.coordinates=At,vt):xt({type:Tt,coordinates:At},vt.properties,{bbox:vt.bbox,id:vt.id})}function cl(vt){var bt=Rn(vt);if(bt.length===2&&!Qd(bt[0],bt[1]))return bt;var wt=[],Tt=bt.length-1,At=wt.length;wt.push(bt[0]);for(var Ot=1;Ot<Tt;Ot++){var Dt=wt[wt.length-1];bt[Ot][0]===Dt[0]&&bt[Ot][1]===Dt[1]||(wt.push(bt[Ot]),(At=wt.length)>2&&hs(wt[At-3],wt[At-1],wt[At-2])&&wt.splice(wt.length-2,1))}if(wt.push(bt[bt.length-1]),At=wt.length,Qd(bt[0],bt[bt.length-1])&&At<4)throw new Error("invalid polygon");return hs(wt[At-3],wt[At-1],wt[At-2])&&wt.splice(wt.length-2,1),wt}function Qd(vt,bt){return vt[0]===bt[0]&&vt[1]===bt[1]}function hs(vt,bt,wt){var Tt=wt[0],At=wt[1],Ot=vt[0],Dt=vt[1],jt=bt[0],Gt=bt[1],qt=jt-Ot,en=Gt-Dt;return(Tt-Ot)*en-(At-Dt)*qt===0&&(Math.abs(qt)>=Math.abs(en)?qt>0?Ot<=Tt&&Tt<=jt:jt<=Tt&&Tt<=Ot:en>0?Dt<=At&&At<=Gt:Gt<=At&&At<=Dt)}function $m(vt,bt,wt){var Tt=bt.x,At=bt.y,Ot=wt.x-Tt,Dt=wt.y-At;if(Ot!==0||Dt!==0){var jt=((vt.x-Tt)*Ot+(vt.y-At)*Dt)/(Ot*Ot+Dt*Dt);jt>1?(Tt=wt.x,At=wt.y):jt>0&&(Tt+=Ot*jt,At+=Dt*jt)}return(Ot=vt.x-Tt)*Ot+(Dt=vt.y-At)*Dt}function xl(vt,bt,wt,Tt,At){for(var Ot,Dt=Tt,jt=bt+1;jt<wt;jt++){var Gt=$m(vt[jt],vt[bt],vt[wt]);Gt>Dt&&(Ot=jt,Dt=Gt)}Dt>Tt&&(Ot-bt>1&&xl(vt,bt,Ot,Tt,At),At.push(vt[Ot]),wt-Ot>1&&xl(vt,Ot,wt,Tt,At))}function Ph(vt,bt){var wt=vt.length-1,Tt=[vt[0]];return xl(vt,0,wt,bt,Tt),Tt.push(vt[wt]),Tt}function hd(vt,bt,wt){if(vt.length<=2)return vt;var Tt=bt!==void 0?bt*bt:1;return vt=Ph(vt=wt?vt:function(At,Ot){for(var Dt,jt,Gt,qt,en,Xt=At[0],sn=[Xt],yn=1,vn=At.length;yn<vn;yn++)Dt=At[yn],Gt=Xt,qt=void 0,en=void 0,qt=(jt=Dt).x-Gt.x,en=jt.y-Gt.y,qt*qt+en*en>Ot&&(sn.push(Dt),Xt=Dt);return Xt!==Dt&&sn.push(Dt),sn}(vt,Tt),Tt)}function dd(vt,bt,wt){return hd(vt.map(function(Tt){return{x:Tt[0],y:Tt[1],z:Tt[2]}}),bt,wt).map(function(Tt){return Tt.z?[Tt.x,Tt.y,Tt.z]:[Tt.x,Tt.y]})}function fd(vt,bt,wt){return vt.map(function(Tt){var At=Tt.map(function(Dt){return{x:Dt[0],y:Dt[1]}});if(At.length<4)throw new Error("invalid polygon");for(var Ot=hd(At,bt,wt).map(function(Dt){return[Dt.x,Dt.y]});!Rm(Ot);)Ot=hd(At,bt-=.01*bt,wt).map(function(Dt){return[Dt.x,Dt.y]});return Ot[Ot.length-1][0]===Ot[0][0]&&Ot[Ot.length-1][1]===Ot[0][1]||Ot.push(Ot[0]),Ot})}function Rm(vt){return!(vt.length<3)&&!(vt.length===3&&vt[2][0]===vt[0][0]&&vt[2][1]===vt[0][1])}var _g=function(){function vt(bt){this.points=bt.points||[],this.duration=bt.duration||1e4,this.sharpness=bt.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=bt.stepLength||60,this.length=this.points.length,this.delay=0;for(var wt=0;wt<this.length;wt++)this.points[wt].z=this.points[wt].z||0;for(wt=0;wt<this.length-1;wt++){var Tt=this.points[wt],At=this.points[wt+1];this.centers.push({x:(Tt.x+At.x)/2,y:(Tt.y+At.y)/2,z:(Tt.z+At.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),wt=0;wt<this.centers.length-1;wt++){var Ot=this.points[wt+1].x-(this.centers[wt].x+this.centers[wt+1].x)/2,Dt=this.points[wt+1].y-(this.centers[wt].y+this.centers[wt+1].y)/2,jt=this.points[wt+1].z-(this.centers[wt].y+this.centers[wt+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[wt+1].x+this.sharpness*(this.centers[wt].x+Ot),y:(1-this.sharpness)*this.points[wt+1].y+this.sharpness*(this.centers[wt].y+Dt),z:(1-this.sharpness)*this.points[wt+1].z+this.sharpness*(this.centers[wt].z+jt)},{x:(1-this.sharpness)*this.points[wt+1].x+this.sharpness*(this.centers[wt+1].x+Ot),y:(1-this.sharpness)*this.points[wt+1].y+this.sharpness*(this.centers[wt+1].y+Dt),z:(1-this.sharpness)*this.points[wt+1].z+this.sharpness*(this.centers[wt+1].z+jt)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return vt.prototype.cacheSteps=function(bt){var wt=[],Tt=this.pos(0);wt.push(0);for(var At=0;At<this.duration;At+=10){var Ot=this.pos(At);Math.sqrt((Ot.x-Tt.x)*(Ot.x-Tt.x)+(Ot.y-Tt.y)*(Ot.y-Tt.y)+(Ot.z-Tt.z)*(Ot.z-Tt.z))>bt&&(wt.push(At),Tt=Ot)}return wt},vt.prototype.vector=function(bt){var wt=this.pos(bt+10),Tt=this.pos(bt-10);return{angle:180*Math.atan2(wt.y-Tt.y,wt.x-Tt.x)/3.14,speed:Math.sqrt((Tt.x-wt.x)*(Tt.x-wt.x)+(Tt.y-wt.y)*(Tt.y-wt.y)+(Tt.z-wt.z)*(Tt.z-wt.z))}},vt.prototype.pos=function(bt){var wt=bt-this.delay;wt<0&&(wt=0),wt>this.duration&&(wt=this.duration-1);var Tt=wt/this.duration;if(Tt>=1)return this.points[this.length-1];var At=Math.floor((this.points.length-1)*Tt);return function(Ot,Dt,jt,Gt,qt){var en=function(Xt){var sn=Xt*Xt;return[sn*Xt,3*sn*(1-Xt),3*Xt*(1-Xt)*(1-Xt),(1-Xt)*(1-Xt)*(1-Xt)]}(Ot);return{x:qt.x*en[0]+Gt.x*en[1]+jt.x*en[2]+Dt.x*en[3],y:qt.y*en[0]+Gt.y*en[1]+jt.y*en[2]+Dt.y*en[3],z:qt.z*en[0]+Gt.z*en[1]+jt.z*en[2]+Dt.z*en[3]}}((this.length-1)*Tt-At,this.points[At],this.controls[At][1],this.controls[At+1][0],this.points[At+1])},vt}();function bg(vt,bt){bt===void 0&&(bt={});for(var wt=bt.resolution||1e4,Tt=bt.sharpness||.85,At=[],Ot=Hn(vt).coordinates.map(function(qt){return{x:qt[0],y:qt[1]}}),Dt=new _g({duration:wt,points:Ot,sharpness:Tt}),jt=function(qt){var en=Dt.pos(qt);Math.floor(qt/100)%2==0&&At.push([en.x,en.y])},Gt=0;Gt<Dt.duration;Gt+=10)jt(Gt);return jt(Dt.duration),Nt(At,bt.properties)}function up(vt,bt){bt===void 0&&(bt={});var wt=Number(vt[0]),Tt=Number(vt[1]),At=Number(vt[2]),Ot=Number(vt[3]);if(vt.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var Dt=[wt,Tt];return It([[Dt,[At,Tt],[At,Ot],[wt,Ot],Dt]],bt.properties,{bbox:vt,id:bt.id})}function ef(vt){return up(un(vt))}function xg(vt){var bt=vt[0],wt=vt[1],Tt=vt[2],At=vt[3];if(ao(vt.slice(0,2),[Tt,wt])>=ao(vt.slice(0,2),[bt,At])){var Ot=(wt+At)/2;return[bt,Ot-(Tt-bt)/2,Tt,Ot+(Tt-bt)/2]}var Dt=(bt+Tt)/2;return[Dt-(At-wt)/2,wt,Dt+(At-wt)/2,At]}function Ta(vt,bt,wt,Tt){Tt===void 0&&(Tt={});var At=pn(vt),Ot=kn(At[0]),Dt=kn(At[1]),jt=kn(wt),Gt=rn(bt,Tt.units),qt=Math.asin(Math.sin(Dt)*Math.cos(Gt)+Math.cos(Dt)*Math.sin(Gt)*Math.cos(jt));return kt([wn(Ot+Math.atan2(Math.sin(jt)*Math.sin(Gt)*Math.cos(Dt),Math.cos(Gt)-Math.sin(Dt)*Math.sin(qt))),wn(qt)],Tt.properties)}function hp(vt,bt,wt){wt===void 0&&(wt={});for(var Tt=wt.steps||64,At=wt.properties?wt.properties:!Array.isArray(vt)&&vt.type==="Feature"&&vt.properties?vt.properties:{},Ot=[],Dt=0;Dt<Tt;Dt++)Ot.push(Ta(vt,bt,-360*Dt/Tt,wt).geometry.coordinates);return Ot.push(Ot[0]),It([Ot],At)}function Rc(vt,bt,wt){if(wt===void 0&&(wt={}),wt.final===!0)return function(Xt,sn){var yn=Rc(sn,Xt);return yn=(yn+180)%360}(vt,bt);var Tt=pn(vt),At=pn(bt),Ot=kn(Tt[0]),Dt=kn(At[0]),jt=kn(Tt[1]),Gt=kn(At[1]),qt=Math.sin(Dt-Ot)*Math.cos(Gt),en=Math.cos(jt)*Math.sin(Gt)-Math.sin(jt)*Math.cos(Gt)*Math.cos(Dt-Ot);return wn(Math.atan2(qt,en))}function hc(vt,bt){bt===void 0&&(bt={});var wt=un(vt);return kt([(wt[0]+wt[2])/2,(wt[1]+wt[3])/2],bt.properties,bt)}function dc(vt,bt){bt===void 0&&(bt={});var wt=0,Tt=0,At=0;return dn(vt,function(Ot){wt+=Ot[0],Tt+=Ot[1],At++},!0),kt([wt/At,Tt/At],bt.properties)}function pd(vt){var bt=[];return vt.type==="FeatureCollection"?Jn(vt,function(wt){dn(wt,function(Tt){bt.push(kt(Tt,wt.properties))})}):dn(vt,function(wt){bt.push(kt(wt,vt.properties))}),Ft(bt)}var tf=gd,Mm=gd;function gd(vt,bt,wt){wt=wt||2;var Tt,At,Ot,Dt,jt,Gt,qt,en=bt&&bt.length,Xt=en?bt[0]*wt:vt.length,sn=nf(vt,0,Xt,wt,!0),yn=[];if(!sn)return yn;if(en&&(sn=function(Sn,fn,Dn,rr){var bn,Nn,Bn,Gn=[];for(bn=0,Nn=fn.length;bn<Nn;bn++)(Bn=nf(Sn,fn[bn]*rr,bn<Nn-1?fn[bn+1]*rr:Sn.length,rr,!1))===Bn.next&&(Bn.steiner=!0),Gn.push(md(Bn));for(Gn.sort(rf),bn=0;bn<Gn.length;bn++)Ku(Gn[bn],Dn),Dn=Ih(Dn,Dn.next);return Dn}(vt,bt,sn,wt)),vt.length>80*wt){Tt=Ot=vt[0],At=Dt=vt[1];for(var vn=wt;vn<Xt;vn+=wt)(jt=vt[vn])<Tt&&(Tt=jt),(Gt=vt[vn+1])<At&&(At=Gt),jt>Ot&&(Ot=jt),Gt>Dt&&(Dt=Gt);qt=(qt=Math.max(Ot-Tt,Dt-At))!==0?1/qt:0}return wl(sn,yn,wt,Tt,At,qt),yn}function nf(vt,bt,wt,Tt,At){var Ot,Dt;if(At===Is(vt,bt,wt,Tt)>0)for(Ot=bt;Ot<wt;Ot+=Tt)Dt=of(Ot,vt[Ot],vt[Ot+1],Dt);else for(Ot=wt-Tt;Ot>=bt;Ot-=Tt)Dt=of(Ot,vt[Ot],vt[Ot+1],Dt);return Dt&&Mc(Dt,Dt.next)&&(Fa(Dt),Dt=Dt.next),Dt}function Ih(vt,bt){if(!vt)return vt;bt||(bt=vt);var wt,Tt=vt;do if(wt=!1,Tt.steiner||!Mc(Tt,Tt.next)&&xa(Tt.prev,Tt,Tt.next)!==0)Tt=Tt.next;else{if(Fa(Tt),(Tt=bt=Tt.prev)===Tt.next)break;wt=!0}while(wt||Tt!==bt);return bt}function wl(vt,bt,wt,Tt,At,Ot,Dt){if(vt){!Dt&&Ot&&function(en,Xt,sn,yn){var vn=en;do vn.z===null&&(vn.z=dp(vn.x,vn.y,Xt,sn,yn)),vn.prevZ=vn.prev,vn.nextZ=vn.next,vn=vn.next;while(vn!==en);vn.prevZ.nextZ=null,vn.prevZ=null,function(Sn){var fn,Dn,rr,bn,Nn,Bn,Gn,jn,Vr=1;do{for(Dn=Sn,Sn=null,Nn=null,Bn=0;Dn;){for(Bn++,rr=Dn,Gn=0,fn=0;fn<Vr&&(Gn++,rr=rr.nextZ);fn++);for(jn=Vr;Gn>0||jn>0&&rr;)Gn!==0&&(jn===0||!rr||Dn.z<=rr.z)?(bn=Dn,Dn=Dn.nextZ,Gn--):(bn=rr,rr=rr.nextZ,jn--),Nn?Nn.nextZ=bn:Sn=bn,bn.prevZ=Nn,Nn=bn;Dn=rr}Nn.nextZ=null,Vr*=2}while(Bn>1)}(vn)}(vt,Tt,At,Ot);for(var jt,Gt,qt=vt;vt.prev!==vt.next;)if(jt=vt.prev,Gt=vt.next,Ot?Oh(vt,Tt,At,Ot):ul(vt))bt.push(jt.i/wt),bt.push(vt.i/wt),bt.push(Gt.i/wt),Fa(vt),vt=Gt.next,qt=Gt.next;else if((vt=Gt)===qt){Dt?Dt===1?wl(vt=wg(vt,bt,wt),bt,wt,Tt,At,Ot,2):Dt===2&&Eg(vt,bt,wt,Tt,At,Ot):wl(Ih(vt),bt,wt,Tt,At,Ot,1);break}}}function ul(vt){var bt=vt.prev,wt=vt,Tt=vt.next;if(xa(bt,wt,Tt)>=0)return!1;for(var At=vt.next.next;At!==vt.prev;){if(qa(bt.x,bt.y,wt.x,wt.y,Tt.x,Tt.y,At.x,At.y)&&xa(At.prev,At,At.next)>=0)return!1;At=At.next}return!0}function Oh(vt,bt,wt,Tt){var At=vt.prev,Ot=vt,Dt=vt.next;if(xa(At,Ot,Dt)>=0)return!1;for(var jt=At.x<Ot.x?At.x<Dt.x?At.x:Dt.x:Ot.x<Dt.x?Ot.x:Dt.x,Gt=At.y<Ot.y?At.y<Dt.y?At.y:Dt.y:Ot.y<Dt.y?Ot.y:Dt.y,qt=At.x>Ot.x?At.x>Dt.x?At.x:Dt.x:Ot.x>Dt.x?Ot.x:Dt.x,en=At.y>Ot.y?At.y>Dt.y?At.y:Dt.y:Ot.y>Dt.y?Ot.y:Dt.y,Xt=dp(jt,Gt,bt,wt,Tt),sn=dp(qt,en,bt,wt,Tt),yn=vt.prevZ,vn=vt.nextZ;yn&&yn.z>=Xt&&vn&&vn.z<=sn;){if(yn!==vt.prev&&yn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,yn.x,yn.y)&&xa(yn.prev,yn,yn.next)>=0||(yn=yn.prevZ,vn!==vt.prev&&vn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,vn.x,vn.y)&&xa(vn.prev,vn,vn.next)>=0))return!1;vn=vn.nextZ}for(;yn&&yn.z>=Xt;){if(yn!==vt.prev&&yn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,yn.x,yn.y)&&xa(yn.prev,yn,yn.next)>=0)return!1;yn=yn.prevZ}for(;vn&&vn.z<=sn;){if(vn!==vt.prev&&vn!==vt.next&&qa(At.x,At.y,Ot.x,Ot.y,Dt.x,Dt.y,vn.x,vn.y)&&xa(vn.prev,vn,vn.next)>=0)return!1;vn=vn.nextZ}return!0}function wg(vt,bt,wt){var Tt=vt;do{var At=Tt.prev,Ot=Tt.next.next;!Mc(At,Ot)&&Ju(At,Tt,Tt.next,Ot)&&Qu(At,Ot)&&Qu(Ot,At)&&(bt.push(At.i/wt),bt.push(Tt.i/wt),bt.push(Ot.i/wt),Fa(Tt),Fa(Tt.next),Tt=vt=Ot),Tt=Tt.next}while(Tt!==vt);return Tt}function Eg(vt,bt,wt,Tt,At,Ot){var Dt=vt;do{for(var jt=Dt.next.next;jt!==Dt.prev;){if(Dt.i!==jt.i&&Sg(Dt,jt)){var Gt=$h(Dt,jt);return Dt=Ih(Dt,Dt.next),Gt=Ih(Gt,Gt.next),wl(Dt,bt,wt,Tt,At,Ot),void wl(Gt,bt,wt,Tt,At,Ot)}jt=jt.next}Dt=Dt.next}while(Dt!==vt)}function rf(vt,bt){return vt.x-bt.x}function Ku(vt,bt){if(bt=function(Tt,At){var Ot,Dt=At,jt=Tt.x,Gt=Tt.y,qt=-1/0;do{if(Gt<=Dt.y&&Gt>=Dt.next.y&&Dt.next.y!==Dt.y){var en=Dt.x+(Gt-Dt.y)*(Dt.next.x-Dt.x)/(Dt.next.y-Dt.y);if(en<=jt&&en>qt){if(qt=en,en===jt){if(Gt===Dt.y)return Dt;if(Gt===Dt.next.y)return Dt.next}Ot=Dt.x<Dt.next.x?Dt:Dt.next}}Dt=Dt.next}while(Dt!==At);if(!Ot)return null;if(jt===qt)return Ot.prev;var Xt,sn=Ot,yn=Ot.x,vn=Ot.y,Sn=1/0;for(Dt=Ot.next;Dt!==sn;)jt>=Dt.x&&Dt.x>=yn&&jt!==Dt.x&&qa(Gt<vn?jt:qt,Gt,yn,vn,Gt<vn?qt:jt,Gt,Dt.x,Dt.y)&&((Xt=Math.abs(Gt-Dt.y)/(jt-Dt.x))<Sn||Xt===Sn&&Dt.x>Ot.x)&&Qu(Dt,Tt)&&(Ot=Dt,Sn=Xt),Dt=Dt.next;return Ot}(vt,bt)){var wt=$h(bt,vt);Ih(wt,wt.next)}}function dp(vt,bt,wt,Tt,At){return(vt=1431655765&((vt=858993459&((vt=252645135&((vt=16711935&((vt=32767*(vt-wt)*At)|vt<<8))|vt<<4))|vt<<2))|vt<<1))|(bt=1431655765&((bt=858993459&((bt=252645135&((bt=16711935&((bt=32767*(bt-Tt)*At)|bt<<8))|bt<<4))|bt<<2))|bt<<1))<<1}function md(vt){var bt=vt,wt=vt;do bt.x<wt.x&&(wt=bt),bt=bt.next;while(bt!==vt);return wt}function qa(vt,bt,wt,Tt,At,Ot,Dt,jt){return(At-Dt)*(bt-jt)-(vt-Dt)*(Ot-jt)>=0&&(vt-Dt)*(Tt-jt)-(wt-Dt)*(bt-jt)>=0&&(wt-Dt)*(Ot-jt)-(At-Dt)*(Tt-jt)>=0}function Sg(vt,bt){return vt.next.i!==bt.i&&vt.prev.i!==bt.i&&!function(wt,Tt){var At=wt;do{if(At.i!==wt.i&&At.next.i!==wt.i&&At.i!==Tt.i&&At.next.i!==Tt.i&&Ju(At,At.next,wt,Tt))return!0;At=At.next}while(At!==wt);return!1}(vt,bt)&&Qu(vt,bt)&&Qu(bt,vt)&&function(wt,Tt){var At=wt,Ot=!1,Dt=(wt.x+Tt.x)/2,jt=(wt.y+Tt.y)/2;do At.y>jt!=At.next.y>jt&&At.next.y!==At.y&&Dt<(At.next.x-At.x)*(jt-At.y)/(At.next.y-At.y)+At.x&&(Ot=!Ot),At=At.next;while(At!==wt);return Ot}(vt,bt)}function xa(vt,bt,wt){return(bt.y-vt.y)*(wt.x-bt.x)-(bt.x-vt.x)*(wt.y-bt.y)}function Mc(vt,bt){return vt.x===bt.x&&vt.y===bt.y}function Ju(vt,bt,wt,Tt){return!!(Mc(vt,bt)&&Mc(wt,Tt)||Mc(vt,Tt)&&Mc(wt,bt))||xa(vt,bt,wt)>0!=xa(vt,bt,Tt)>0&&xa(wt,Tt,vt)>0!=xa(wt,Tt,bt)>0}function Qu(vt,bt){return xa(vt.prev,vt,vt.next)<0?xa(vt,bt,vt.next)>=0&&xa(vt,vt.prev,bt)>=0:xa(vt,bt,vt.prev)<0||xa(vt,vt.next,bt)<0}function $h(vt,bt){var wt=new fp(vt.i,vt.x,vt.y),Tt=new fp(bt.i,bt.x,bt.y),At=vt.next,Ot=bt.prev;return vt.next=bt,bt.prev=vt,wt.next=At,At.prev=wt,Tt.next=wt,wt.prev=Tt,Ot.next=Tt,Tt.prev=Ot,Tt}function of(vt,bt,wt,Tt){var At=new fp(vt,bt,wt);return Tt?(At.next=Tt.next,At.prev=Tt,Tt.next.prev=At,Tt.next=At):(At.prev=At,At.next=At),At}function Fa(vt){vt.next.prev=vt.prev,vt.prev.next=vt.next,vt.prevZ&&(vt.prevZ.nextZ=vt.nextZ),vt.nextZ&&(vt.nextZ.prevZ=vt.prevZ)}function fp(vt,bt,wt){this.i=vt,this.x=bt,this.y=wt,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Is(vt,bt,wt,Tt){for(var At=0,Ot=bt,Dt=wt-Tt;Ot<wt;Ot+=Tt)At+=(vt[Dt]-vt[Ot])*(vt[Ot+1]+vt[Dt+1]),Dt=Ot;return At}function Nl(vt){var bt=function(jt){for(var Gt=jt[0][0].length,qt={vertices:[],holes:[],dimensions:Gt},en=0,Xt=0;Xt<jt.length;Xt++){for(var sn=0;sn<jt[Xt].length;sn++)for(var yn=0;yn<Gt;yn++)qt.vertices.push(jt[Xt][sn][yn]);Xt>0&&(en+=jt[Xt-1].length,qt.holes.push(en))}return qt}(vt),wt=tf(bt.vertices,bt.holes,2),Tt=[],At=[];wt.forEach(function(jt,Gt){var qt=wt[Gt];At.push([bt.vertices[2*qt],bt.vertices[2*qt+1]])});for(var Ot=0;Ot<At.length;Ot+=3){var Dt=At.slice(Ot,Ot+3);Dt.push(At[Ot]),Tt.push(It([Dt]))}return Tt}function Rh(vt,bt){if(!vt)throw new Error("targetPoint is required");if(!bt)throw new Error("points is required");var wt,Tt=1/0,At=0;return Jn(bt,function(Ot,Dt){var jt=ao(vt,Ot);jt<Tt&&(At=Dt,Tt=jt)}),(wt=$o(bt.features[At])).properties.featureIndex=At,wt.properties.distanceToPoint=Tt,wt}function ka(vt){if(!vt)throw new Error("geojson is required");var bt=[];return Er(vt,function(wt){(function(Tt,At){var Ot=[],Dt=Tt.geometry;if(Dt!==null){switch(Dt.type){case"Polygon":Ot=Rn(Dt);break;case"LineString":Ot=[Rn(Dt)]}Ot.forEach(function(jt){(function(Gt,qt){var en=[];return Gt.reduce(function(Xt,sn){var yn=Nt([Xt,sn],qt);return yn.bbox=function(vn,Sn){var fn=vn[0],Dn=vn[1],rr=Sn[0],bn=Sn[1];return[fn<rr?fn:rr,Dn<bn?Dn:bn,fn>rr?fn:rr,Dn>bn?Dn:bn]}(Xt,sn),en.push(yn),sn}),en})(jt,Tt.properties).forEach(function(Gt){Gt.id=At.length,At.push(Gt)})})}})(wt,bt)}),Ft(bt)}gd.deviation=function(vt,bt,wt,Tt){var At=bt&&bt.length,Ot=At?bt[0]*wt:vt.length,Dt=Math.abs(Is(vt,0,Ot,wt));if(At)for(var jt=0,Gt=bt.length;jt<Gt;jt++){var qt=bt[jt]*wt,en=jt<Gt-1?bt[jt+1]*wt:vt.length;Dt-=Math.abs(Is(vt,qt,en,wt))}var Xt=0;for(jt=0;jt<Tt.length;jt+=3){var sn=Tt[jt]*wt,yn=Tt[jt+1]*wt,vn=Tt[jt+2]*wt;Xt+=Math.abs((vt[sn]-vt[vn])*(vt[yn+1]-vt[sn+1])-(vt[sn]-vt[yn])*(vt[vn+1]-vt[sn+1]))}return Dt===0&&Xt===0?0:Math.abs((Xt-Dt)/Dt)},gd.flatten=function(vt){for(var bt=vt[0][0].length,wt={vertices:[],holes:[],dimensions:bt},Tt=0,At=0;At<vt.length;At++){for(var Ot=0;Ot<vt[At].length;Ot++)for(var Dt=0;Dt<bt;Dt++)wt.vertices.push(vt[At][Ot][Dt]);At>0&&(Tt+=vt[At-1].length,wt.holes.push(Tt))}return wt},tf.default=Mm;var wa=vs(function(vt,bt){function wt(vn,Sn,fn){fn===void 0&&(fn={});var Dn={type:"Feature"};return(fn.id===0||fn.id)&&(Dn.id=fn.id),fn.bbox&&(Dn.bbox=fn.bbox),Dn.properties=Sn||{},Dn.geometry=vn,Dn}function Tt(vn,Sn,fn){if(fn===void 0&&(fn={}),!vn)throw new Error("coordinates is required");if(!Array.isArray(vn))throw new Error("coordinates must be an Array");if(vn.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!yn(vn[0])||!yn(vn[1]))throw new Error("coordinates must contain numbers");return wt({type:"Point",coordinates:vn},Sn,fn)}function At(vn,Sn,fn){fn===void 0&&(fn={});for(var Dn=0,rr=vn;Dn<rr.length;Dn++){var bn=rr[Dn];if(bn.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Nn=0;Nn<bn[bn.length-1].length;Nn++)if(bn[bn.length-1][Nn]!==bn[0][Nn])throw new Error("First and last Position are not equivalent.")}return wt({type:"Polygon",coordinates:vn},Sn,fn)}function Ot(vn,Sn,fn){if(fn===void 0&&(fn={}),vn.length<2)throw new Error("coordinates must be an array of two or more positions");return wt({type:"LineString",coordinates:vn},Sn,fn)}function Dt(vn,Sn){Sn===void 0&&(Sn={});var fn={type:"FeatureCollection"};return Sn.id&&(fn.id=Sn.id),Sn.bbox&&(fn.bbox=Sn.bbox),fn.features=vn,fn}function jt(vn,Sn,fn){return fn===void 0&&(fn={}),wt({type:"MultiLineString",coordinates:vn},Sn,fn)}function Gt(vn,Sn,fn){return fn===void 0&&(fn={}),wt({type:"MultiPoint",coordinates:vn},Sn,fn)}function qt(vn,Sn,fn){return fn===void 0&&(fn={}),wt({type:"MultiPolygon",coordinates:vn},Sn,fn)}function en(vn,Sn){Sn===void 0&&(Sn="kilometers");var fn=bt.factors[Sn];if(!fn)throw new Error(Sn+" units is invalid");return vn*fn}function Xt(vn,Sn){Sn===void 0&&(Sn="kilometers");var fn=bt.factors[Sn];if(!fn)throw new Error(Sn+" units is invalid");return vn/fn}function sn(vn){return 180*(vn%(2*Math.PI))/Math.PI}function yn(vn){return!isNaN(vn)&&vn!==null&&!Array.isArray(vn)}Object.defineProperty(bt,"__esModule",{value:!0}),bt.earthRadius=63710088e-1,bt.factors={centimeters:100*bt.earthRadius,centimetres:100*bt.earthRadius,degrees:bt.earthRadius/111325,feet:3.28084*bt.earthRadius,inches:39.37*bt.earthRadius,kilometers:bt.earthRadius/1e3,kilometres:bt.earthRadius/1e3,meters:bt.earthRadius,metres:bt.earthRadius,miles:bt.earthRadius/1609.344,millimeters:1e3*bt.earthRadius,millimetres:1e3*bt.earthRadius,nauticalmiles:bt.earthRadius/1852,radians:1,yards:1.0936*bt.earthRadius},bt.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/bt.earthRadius,yards:1.0936133},bt.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},bt.feature=wt,bt.geometry=function(vn,Sn,fn){switch(vn){case"Point":return Tt(Sn).geometry;case"LineString":return Ot(Sn).geometry;case"Polygon":return At(Sn).geometry;case"MultiPoint":return Gt(Sn).geometry;case"MultiLineString":return jt(Sn).geometry;case"MultiPolygon":return qt(Sn).geometry;default:throw new Error(vn+" is invalid")}},bt.point=Tt,bt.points=function(vn,Sn,fn){return fn===void 0&&(fn={}),Dt(vn.map(function(Dn){return Tt(Dn,Sn)}),fn)},bt.polygon=At,bt.polygons=function(vn,Sn,fn){return fn===void 0&&(fn={}),Dt(vn.map(function(Dn){return At(Dn,Sn)}),fn)},bt.lineString=Ot,bt.lineStrings=function(vn,Sn,fn){return fn===void 0&&(fn={}),Dt(vn.map(function(Dn){return Ot(Dn,Sn)}),fn)},bt.featureCollection=Dt,bt.multiLineString=jt,bt.multiPoint=Gt,bt.multiPolygon=qt,bt.geometryCollection=function(vn,Sn,fn){return fn===void 0&&(fn={}),wt({type:"GeometryCollection",geometries:vn},Sn,fn)},bt.round=function(vn,Sn){if(Sn===void 0&&(Sn=0),Sn&&!(Sn>=0))throw new Error("precision must be a positive number");var fn=Math.pow(10,Sn||0);return Math.round(vn*fn)/fn},bt.radiansToLength=en,bt.lengthToRadians=Xt,bt.lengthToDegrees=function(vn,Sn){return sn(Xt(vn,Sn))},bt.bearingToAzimuth=function(vn){var Sn=vn%360;return Sn<0&&(Sn+=360),Sn},bt.radiansToDegrees=sn,bt.degreesToRadians=function(vn){return vn%360*Math.PI/180},bt.convertLength=function(vn,Sn,fn){if(Sn===void 0&&(Sn="kilometers"),fn===void 0&&(fn="kilometers"),!(vn>=0))throw new Error("length must be a positive number");return en(Xt(vn,Sn),fn)},bt.convertArea=function(vn,Sn,fn){if(Sn===void 0&&(Sn="meters"),fn===void 0&&(fn="kilometers"),!(vn>=0))throw new Error("area must be a positive number");var Dn=bt.areaFactors[Sn];if(!Dn)throw new Error("invalid original units");var rr=bt.areaFactors[fn];if(!rr)throw new Error("invalid final units");return vn/Dn*rr},bt.isNumber=yn,bt.isObject=function(vn){return!!vn&&vn.constructor===Object},bt.validateBBox=function(vn){if(!vn)throw new Error("bbox is required");if(!Array.isArray(vn))throw new Error("bbox must be an Array");if(vn.length!==4&&vn.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");vn.forEach(function(Sn){if(!yn(Sn))throw new Error("bbox must only contain numbers")})},bt.validateId=function(vn){if(!vn)throw new Error("id is required");if(["string","number"].indexOf(typeof vn)===-1)throw new Error("id must be a number or a string")}});function fc(vt,bt,wt){if(vt!==null)for(var Tt,At,Ot,Dt,jt,Gt,qt,en,Xt=0,sn=0,yn=vt.type,vn=yn==="FeatureCollection",Sn=yn==="Feature",fn=vn?vt.features.length:1,Dn=0;Dn<fn;Dn++){jt=(en=!!(qt=vn?vt.features[Dn].geometry:Sn?vt.geometry:vt)&&qt.type==="GeometryCollection")?qt.geometries.length:1;for(var rr=0;rr<jt;rr++){var bn=0,Nn=0;if((Dt=en?qt.geometries[rr]:qt)!==null){Gt=Dt.coordinates;var Bn=Dt.type;switch(Xt=!wt||Bn!=="Polygon"&&Bn!=="MultiPolygon"?0:1,Bn){case null:break;case"Point":if(bt(Gt,sn,Dn,bn,Nn)===!1)return!1;sn++,bn++;break;case"LineString":case"MultiPoint":for(Tt=0;Tt<Gt.length;Tt++){if(bt(Gt[Tt],sn,Dn,bn,Nn)===!1)return!1;sn++,Bn==="MultiPoint"&&bn++}Bn==="LineString"&&bn++;break;case"Polygon":case"MultiLineString":for(Tt=0;Tt<Gt.length;Tt++){for(At=0;At<Gt[Tt].length-Xt;At++){if(bt(Gt[Tt][At],sn,Dn,bn,Nn)===!1)return!1;sn++}Bn==="MultiLineString"&&bn++,Bn==="Polygon"&&Nn++}Bn==="Polygon"&&bn++;break;case"MultiPolygon":for(Tt=0;Tt<Gt.length;Tt++){for(Nn=0,At=0;At<Gt[Tt].length;At++){for(Ot=0;Ot<Gt[Tt][At].length-Xt;Ot++){if(bt(Gt[Tt][At][Ot],sn,Dn,bn,Nn)===!1)return!1;sn++}Nn++}bn++}break;case"GeometryCollection":for(Tt=0;Tt<Dt.geometries.length;Tt++)if(fc(Dt.geometries[Tt],bt,wt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cg(vt,bt){var wt;switch(vt.type){case"FeatureCollection":for(wt=0;wt<vt.features.length&&bt(vt.features[wt].properties,wt)!==!1;wt++);break;case"Feature":bt(vt.properties,0)}}function Mh(vt,bt){if(vt.type==="Feature")bt(vt,0);else if(vt.type==="FeatureCollection")for(var wt=0;wt<vt.features.length&&bt(vt.features[wt],wt)!==!1;wt++);}function sf(vt,bt){var wt,Tt,At,Ot,Dt,jt,Gt,qt,en,Xt,sn=0,yn=vt.type==="FeatureCollection",vn=vt.type==="Feature",Sn=yn?vt.features.length:1;for(wt=0;wt<Sn;wt++){for(jt=yn?vt.features[wt].geometry:vn?vt.geometry:vt,qt=yn?vt.features[wt].properties:vn?vt.properties:{},en=yn?vt.features[wt].bbox:vn?vt.bbox:void 0,Xt=yn?vt.features[wt].id:vn?vt.id:void 0,Dt=(Gt=!!jt&&jt.type==="GeometryCollection")?jt.geometries.length:1,At=0;At<Dt;At++)if((Ot=Gt?jt.geometries[At]:jt)!==null)switch(Ot.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(bt(Ot,sn,qt,en,Xt)===!1)return!1;break;case"GeometryCollection":for(Tt=0;Tt<Ot.geometries.length;Tt++)if(bt(Ot.geometries[Tt],sn,qt,en,Xt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(bt(null,sn,qt,en,Xt)===!1)return!1;sn++}}function eh(vt,bt){sf(vt,function(wt,Tt,At,Ot,Dt){var jt,Gt=wt===null?null:wt.type;switch(Gt){case null:case"Point":case"LineString":case"Polygon":return bt(wa.feature(wt,At,{bbox:Ot,id:Dt}),Tt,0)!==!1&&void 0}switch(Gt){case"MultiPoint":jt="Point";break;case"MultiLineString":jt="LineString";break;case"MultiPolygon":jt="Polygon"}for(var qt=0;qt<wt.coordinates.length;qt++){var en={type:jt,coordinates:wt.coordinates[qt]};if(bt(wa.feature(en,At),Tt,qt)===!1)return!1}})}function pp(vt,bt){eh(vt,function(wt,Tt,At){var Ot=0;if(wt.geometry){var Dt=wt.geometry.type;if(Dt!=="Point"&&Dt!=="MultiPoint"){var jt,Gt=0,qt=0,en=0;return fc(wt,function(Xt,sn,yn,vn,Sn){if(jt===void 0||Tt>Gt||vn>qt||Sn>en)return jt=Xt,Gt=Tt,qt=vn,en=Sn,void(Ot=0);var fn=wa.lineString([jt,Xt],wt.properties);if(bt(fn,Tt,At,Sn,Ot)===!1)return!1;Ot++,jt=Xt})!==!1&&void 0}}})}function ru(vt,bt){if(!vt)throw new Error("geojson is required");eh(vt,function(wt,Tt,At){if(wt.geometry!==null){var Ot=wt.geometry.type,Dt=wt.geometry.coordinates;switch(Ot){case"LineString":if(bt(wt,Tt,At,0,0)===!1)return!1;break;case"Polygon":for(var jt=0;jt<Dt.length;jt++)if(bt(wa.lineString(Dt[jt],wt.properties),Tt,At,jt)===!1)return!1}}})}var af=function(vt){var bt=[];return fc(vt,function(wt){bt.push(wt)}),bt},Nm=fc,lf=function(vt,bt,wt,Tt){var At=wt;return fc(vt,function(Ot,Dt,jt,Gt,qt){At=Dt===0&&wt===void 0?Ot:bt(At,Ot,Dt,jt,Gt,qt)},Tt),At},Dm=Mh,iu=function(vt,bt,wt){var Tt=wt;return Mh(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot)}),Tt},gp=function(vt,bt){if(bt=bt||{},!wa.isObject(bt))throw new Error("options is invalid");var wt,Tt=bt.featureIndex||0,At=bt.multiFeatureIndex||0,Ot=bt.geometryIndex||0,Dt=bt.coordIndex||0,jt=bt.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":return wa.point(Gt,jt,bt);case"MultiPoint":return At<0&&(At=Gt.length+At),wa.point(Gt[At],jt,bt);case"LineString":return Dt<0&&(Dt=Gt.length+Dt),wa.point(Gt[Dt],jt,bt);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Dt<0&&(Dt=Gt[Ot].length+Dt),wa.point(Gt[Ot][Dt],jt,bt);case"MultiLineString":return At<0&&(At=Gt.length+At),Dt<0&&(Dt=Gt[At].length+Dt),wa.point(Gt[At][Dt],jt,bt);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Dt<0&&(Dt=Gt[At][Ot].length-Dt),wa.point(Gt[At][Ot][Dt],jt,bt)}throw new Error("geojson is invalid")},Nh=function(vt,bt){if(bt=bt||{},!wa.isObject(bt))throw new Error("options is invalid");var wt,Tt=bt.featureIndex||0,At=bt.multiFeatureIndex||0,Ot=bt.geometryIndex||0,Dt=bt.segmentIndex||0,jt=bt.properties;switch(vt.type){case"FeatureCollection":Tt<0&&(Tt=vt.features.length+Tt),jt=jt||vt.features[Tt].properties,wt=vt.features[Tt].geometry;break;case"Feature":jt=jt||vt.properties,wt=vt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":wt=vt;break;default:throw new Error("geojson is invalid")}if(wt===null)return null;var Gt=wt.coordinates;switch(wt.type){case"Point":case"MultiPoint":return null;case"LineString":return Dt<0&&(Dt=Gt.length+Dt-1),wa.lineString([Gt[Dt],Gt[Dt+1]],jt,bt);case"Polygon":return Ot<0&&(Ot=Gt.length+Ot),Dt<0&&(Dt=Gt[Ot].length+Dt-1),wa.lineString([Gt[Ot][Dt],Gt[Ot][Dt+1]],jt,bt);case"MultiLineString":return At<0&&(At=Gt.length+At),Dt<0&&(Dt=Gt[At].length+Dt-1),wa.lineString([Gt[At][Dt],Gt[At][Dt+1]],jt,bt);case"MultiPolygon":return At<0&&(At=Gt.length+At),Ot<0&&(Ot=Gt[At].length+Ot),Dt<0&&(Dt=Gt[At][Ot].length-Dt-1),wa.lineString([Gt[At][Ot][Dt],Gt[At][Ot][Dt+1]],jt,bt)}throw new Error("geojson is invalid")},Bm=eh,js=function(vt,bt,wt){var Tt=wt;return eh(vt,function(At,Ot,Dt){Tt=Ot===0&&Dt===0&&wt===void 0?At:bt(Tt,At,Ot,Dt)}),Tt},cf=sf,yd=function(vt,bt,wt){var Tt=wt;return sf(vt,function(At,Ot,Dt,jt,Gt){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot,Dt,jt,Gt)}),Tt},El=ru,Sl=function(vt,bt,wt){var Tt=wt;return ru(vt,function(At,Ot,Dt,jt){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot,Dt,jt)}),Tt},Nc=Cg,th=function(vt,bt,wt){var Tt=wt;return Cg(vt,function(At,Ot){Tt=Ot===0&&wt===void 0?At:bt(Tt,At,Ot)}),Tt},nh=pp,vd=function(vt,bt,wt){var Tt=wt,At=!1;return pp(vt,function(Ot,Dt,jt,Gt,qt){Tt=At===!1&&wt===void 0?Ot:bt(Tt,Ot,Dt,jt,Gt,qt),At=!0}),Tt},_d=Object.defineProperty({coordAll:af,coordEach:Nm,coordReduce:lf,featureEach:Dm,featureReduce:iu,findPoint:gp,findSegment:Nh,flattenEach:Bm,flattenReduce:js,geomEach:cf,geomReduce:yd,lineEach:El,lineReduce:Sl,propEach:Nc,propReduce:th,segmentEach:nh,segmentReduce:vd},"__esModule",{value:!0});function uf(vt){var bt=[1/0,1/0,-1/0,-1/0];return _d.coordEach(vt,function(wt){bt[0]>wt[0]&&(bt[0]=wt[0]),bt[1]>wt[1]&&(bt[1]=wt[1]),bt[2]<wt[0]&&(bt[2]=wt[0]),bt[3]<wt[1]&&(bt[3]=wt[1])}),bt}uf.default=uf;var Fm=uf,ou=Object.defineProperty({default:Fm},"__esModule",{value:!0}).default,zm=_d.featureEach,mp=(_d.coordEach,wa.polygon,wa.featureCollection);function hf(vt){var bt=Ar(vt);return bt.insert=function(wt){if(wt.type!=="Feature")throw new Error("invalid feature");return wt.bbox=wt.bbox?wt.bbox:ou(wt),Ar.prototype.insert.call(this,wt)},bt.load=function(wt){var Tt=[];return Array.isArray(wt)?wt.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:ou(At),Tt.push(At)}):zm(wt,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:ou(At),Tt.push(At)}),Ar.prototype.load.call(this,Tt)},bt.remove=function(wt,Tt){if(wt.type!=="Feature")throw new Error("invalid feature");return wt.bbox=wt.bbox?wt.bbox:ou(wt),Ar.prototype.remove.call(this,wt,Tt)},bt.clear=function(){return Ar.prototype.clear.call(this)},bt.search=function(wt){var Tt=Ar.prototype.search.call(this,this.toBBox(wt));return mp(Tt)},bt.collides=function(wt){return Ar.prototype.collides.call(this,this.toBBox(wt))},bt.all=function(){var wt=Ar.prototype.all.call(this);return mp(wt)},bt.toJSON=function(){return Ar.prototype.toJSON.call(this)},bt.fromJSON=function(wt){return Ar.prototype.fromJSON.call(this,wt)},bt.toBBox=function(wt){var Tt;if(wt.bbox)Tt=wt.bbox;else if(Array.isArray(wt)&&wt.length===4)Tt=wt;else if(Array.isArray(wt)&&wt.length===6)Tt=[wt[0],wt[1],wt[3],wt[4]];else if(wt.type==="Feature")Tt=ou(wt);else{if(wt.type!=="FeatureCollection")throw new Error("invalid geojson");Tt=ou(wt)}return{minX:Tt[0],minY:Tt[1],maxX:Tt[2],maxY:Tt[3]}},bt}var Ys=hf,Tg=hf;function Vs(vt,bt){var wt={},Tt=[];if(vt.type==="LineString"&&(vt=xt(vt)),bt.type==="LineString"&&(bt=xt(bt)),vt.type==="Feature"&&bt.type==="Feature"&&vt.geometry!==null&&bt.geometry!==null&&vt.geometry.type==="LineString"&&bt.geometry.type==="LineString"&&vt.geometry.coordinates.length===2&&bt.geometry.coordinates.length===2){var At=Dh(vt,bt);return At&&Tt.push(At),Ft(Tt)}var Ot=Ys();return Ot.load(ka(bt)),Jn(ka(vt),function(Dt){Jn(Ot.search(Dt),function(jt){var Gt=Dh(Dt,jt);if(Gt){var qt=Rn(Gt).join(",");wt[qt]||(wt[qt]=!0,Tt.push(Gt))}})}),Ft(Tt)}function Dh(vt,bt){var wt=Rn(vt),Tt=Rn(bt);if(wt.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(Tt.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var At=wt[0][0],Ot=wt[0][1],Dt=wt[1][0],jt=wt[1][1],Gt=Tt[0][0],qt=Tt[0][1],en=Tt[1][0],Xt=Tt[1][1],sn=(Xt-qt)*(Dt-At)-(en-Gt)*(jt-Ot),yn=(en-Gt)*(Ot-qt)-(Xt-qt)*(At-Gt),vn=(Dt-At)*(Ot-qt)-(jt-Ot)*(At-Gt);if(sn===0)return null;var Sn=yn/sn,fn=vn/sn;return Sn>=0&&Sn<=1&&fn>=0&&fn<=1?kt([At+Sn*(Dt-At),Ot+Sn*(jt-Ot)]):null}function Dc(vt,bt,wt){wt===void 0&&(wt={});var Tt=kt([1/0,1/0],{dist:1/0}),At=0;return Er(vt,function(Ot){for(var Dt=Rn(Ot),jt=0;jt<Dt.length-1;jt++){var Gt=kt(Dt[jt]);Gt.properties.dist=ao(bt,Gt,wt);var qt=kt(Dt[jt+1]);qt.properties.dist=ao(bt,qt,wt);var en=ao(Gt,qt,wt),Xt=Math.max(Gt.properties.dist,qt.properties.dist),sn=Rc(Gt,qt),yn=Ta(bt,Xt,sn+90,wt),vn=Ta(bt,Xt,sn-90,wt),Sn=Vs(Nt([yn.geometry.coordinates,vn.geometry.coordinates]),Nt([Gt.geometry.coordinates,qt.geometry.coordinates])),fn=null;Sn.features.length>0&&((fn=Sn.features[0]).properties.dist=ao(bt,fn,wt),fn.properties.location=At+ao(Gt,fn,wt)),Gt.properties.dist<Tt.properties.dist&&((Tt=Gt).properties.index=jt,Tt.properties.location=At),qt.properties.dist<Tt.properties.dist&&((Tt=qt).properties.index=jt+1,Tt.properties.location=At+en),fn&&fn.properties.dist<Tt.properties.dist&&((Tt=fn).properties.index=jt),At+=en}}),Tt}function Tu(vt,bt,wt){wt===void 0&&(wt={});var Tt=pn(vt),At=pn(bt);return At[0]+=At[0]-Tt[0]>180?-360:Tt[0]-At[0]>180?360:0,Cn(function(Ot,Dt,jt){var Gt=jt=jt===void 0?rt:Number(jt),qt=Ot[1]*Math.PI/180,en=Dt[1]*Math.PI/180,Xt=en-qt,sn=Math.abs(Dt[0]-Ot[0])*Math.PI/180;sn>Math.PI&&(sn-=2*Math.PI);var yn=Math.log(Math.tan(en/2+Math.PI/4)/Math.tan(qt/2+Math.PI/4)),vn=Math.abs(yn)>1e-11?Xt/yn:Math.cos(qt);return Math.sqrt(Xt*Xt+vn*vn*sn*sn)*Gt}(Tt,At),"meters",wt.units)}function kg(vt,bt,wt){if(wt===void 0&&(wt={}),wt.method||(wt.method="geodesic"),wt.units||(wt.units="kilometers"),!vt)throw new Error("pt is required");if(Array.isArray(vt)?vt=kt(vt):vt.type==="Point"?vt=xt(vt):Vn(vt,"Point","point"),!bt)throw new Error("line is required");Array.isArray(bt)?bt=Nt(bt):bt.type==="LineString"?bt=xt(bt):Vn(bt,"LineString","line");var Tt=1/0,At=vt.geometry.coordinates;return Fr(bt,function(Ot){var Dt=Ot.geometry.coordinates[0],jt=Ot.geometry.coordinates[1],Gt=function(qt,en,Xt,sn){var yn=[Xt[0]-en[0],Xt[1]-en[1]],vn=yp([qt[0]-en[0],qt[1]-en[1]],yn);if(vn<=0)return df(qt,en,{method:sn.method,units:"degrees"});var Sn=yp(yn,yn);if(Sn<=vn)return df(qt,Xt,{method:sn.method,units:"degrees"});var fn=vn/Sn,Dn=[en[0]+fn*yn[0],en[1]+fn*yn[1]];return df(qt,Dn,{method:sn.method,units:"degrees"})}(At,Dt,jt,wt);Gt<Tt&&(Tt=Gt)}),Cn(Tt,"degrees",wt.units)}function yp(vt,bt){return vt[0]*bt[0]+vt[1]*bt[1]}function df(vt,bt,wt){return wt.method==="planar"?Tu(vt,bt,wt):ao(vt,bt,wt)}function bd(vt,bt,wt,Tt,At,Ot,Dt,jt){var Gt,qt,en,Xt,sn={x:null,y:null,onLine1:!1,onLine2:!1};return(Gt=(jt-Ot)*(wt-vt)-(Dt-At)*(Tt-bt))===0?sn.x!==null&&sn.y!==null&&sn:(Xt=(wt-vt)*(qt=bt-Ot)-(Tt-bt)*(en=vt-At),qt=((Dt-At)*qt-(jt-Ot)*en)/Gt,en=Xt/Gt,sn.x=vt+qt*(wt-vt),sn.y=bt+qt*(Tt-bt),qt>=0&&qt<=1&&(sn.onLine1=!0),en>=0&&en<=1&&(sn.onLine2=!0),!(!sn.onLine1||!sn.onLine2)&&[sn.x,sn.y])}function Ag(vt){for(var bt=function(sn){return sn.type!=="FeatureCollection"?sn.type!=="Feature"?Ft([xt(sn)]):Ft([sn]):sn}(vt),wt=hc(bt),Tt=!1,At=0;!Tt&&At<bt.features.length;){var Ot,Dt=bt.features[At].geometry,jt=!1;if(Dt.type==="Point")wt.geometry.coordinates[0]===Dt.coordinates[0]&&wt.geometry.coordinates[1]===Dt.coordinates[1]&&(Tt=!0);else if(Dt.type==="MultiPoint"){var Gt=!1;for(Ot=0;!Gt&&Ot<Dt.coordinates.length;)wt.geometry.coordinates[0]===Dt.coordinates[Ot][0]&&wt.geometry.coordinates[1]===Dt.coordinates[Ot][1]&&(Tt=!0,Gt=!0),Ot++}else if(Dt.type==="LineString")for(Ot=0;!jt&&Ot<Dt.coordinates.length-1;)ku(wt.geometry.coordinates[0],wt.geometry.coordinates[1],Dt.coordinates[Ot][0],Dt.coordinates[Ot][1],Dt.coordinates[Ot+1][0],Dt.coordinates[Ot+1][1])&&(jt=!0,Tt=!0),Ot++;else if(Dt.type==="MultiLineString")for(var qt=0;qt<Dt.coordinates.length;){jt=!1,Ot=0;for(var en=Dt.coordinates[qt];!jt&&Ot<en.length-1;)ku(wt.geometry.coordinates[0],wt.geometry.coordinates[1],en[Ot][0],en[Ot][1],en[Ot+1][0],en[Ot+1][1])&&(jt=!0,Tt=!0),Ot++;qt++}else Dt.type!=="Polygon"&&Dt.type!=="MultiPolygon"||oo(wt,Dt)&&(Tt=!0);At++}if(Tt)return wt;var Xt=Ft([]);for(At=0;At<bt.features.length;At++)Xt.features=Xt.features.concat(pd(bt.features[At]).features);return kt(Rh(wt,Xt).geometry.coordinates)}function ku(vt,bt,wt,Tt,At,Ot){return Math.sqrt((At-wt)*(At-wt)+(Ot-Tt)*(Ot-Tt))===Math.sqrt((vt-wt)*(vt-wt)+(bt-Tt)*(bt-Tt))+Math.sqrt((At-vt)*(At-vt)+(Ot-bt)*(Ot-bt))}Ys.default=Tg;var xd=6378137;function Bh(vt){return Cr(vt,function(bt,wt){return bt+function(Tt){var At,Ot=0;switch(Tt.type){case"Polygon":return vp(Tt.coordinates);case"MultiPolygon":for(At=0;At<Tt.coordinates.length;At++)Ot+=vp(Tt.coordinates[At]);return Ot;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(wt)},0)}function vp(vt){var bt=0;if(vt&&vt.length>0){bt+=Math.abs(pc(vt[0]));for(var wt=1;wt<vt.length;wt++)bt-=Math.abs(pc(vt[wt]))}return bt}function pc(vt){var bt,wt,Tt,At,Ot,Dt,jt=0,Gt=vt.length;if(Gt>2){for(Dt=0;Dt<Gt;Dt++)Dt===Gt-2?(Tt=Gt-2,At=Gt-1,Ot=0):Dt===Gt-1?(Tt=Gt-1,At=0,Ot=1):(Tt=Dt,At=Dt+1,Ot=Dt+2),bt=vt[Tt],wt=vt[At],jt+=(ff(vt[Ot][0])-ff(bt[0]))*Math.sin(ff(wt[1]));jt=jt*xd*xd/2}return jt}function ff(vt){return vt*Math.PI/180}function pf(vt,bt){return bt===void 0&&(bt={}),mr(vt,function(wt,Tt){var At=Tt.geometry.coordinates;return wt+ao(At[0],At[1],bt)},0)}function Au(vt,bt,wt,Tt){if(!cn(Tt=Tt||{}))throw new Error("options is invalid");var At,Ot=[];if(vt.type==="Feature")At=vt.geometry.coordinates;else{if(vt.type!=="LineString")throw new Error("input must be a LineString Feature or Geometry");At=vt.coordinates}for(var Dt,jt,Gt,qt=At.length,en=0,Xt=0;Xt<At.length&&!(bt>=en&&Xt===At.length-1);Xt++){if(en>bt&&Ot.length===0){if(!(Dt=bt-en))return Ot.push(At[Xt]),Nt(Ot);jt=Rc(At[Xt],At[Xt-1])-180,Gt=Ta(At[Xt],Dt,jt,Tt),Ot.push(Gt.geometry.coordinates)}if(en>=wt)return(Dt=wt-en)?(jt=Rc(At[Xt],At[Xt-1])-180,Gt=Ta(At[Xt],Dt,jt,Tt),Ot.push(Gt.geometry.coordinates),Nt(Ot)):(Ot.push(At[Xt]),Nt(Ot));if(en>=bt&&Ot.push(At[Xt]),Xt===At.length-1)return Nt(Ot);en+=ao(At[Xt],At[Xt+1],Tt)}if(en<bt&&At.length===qt)throw new Error("Start position is beyond line");var sn=At[At.length-1];return Nt([sn,sn])}function Cl(vt,bt,wt){wt===void 0&&(wt={});for(var Tt=pn(vt),At=Rn(bt),Ot=0;Ot<At.length-1;Ot++){var Dt=!1;if(wt.ignoreEndVertices&&(Ot===0&&(Dt="start"),Ot===At.length-2&&(Dt="end"),Ot===0&&Ot+1===At.length-1&&(Dt="both")),gf(At[Ot],At[Ot+1],Tt,Dt,wt.epsilon===void 0?null:wt.epsilon))return!0}return!1}function gf(vt,bt,wt,Tt,At){var Ot=wt[0],Dt=wt[1],jt=vt[0],Gt=vt[1],qt=bt[0],en=bt[1],Xt=qt-jt,sn=en-Gt,yn=(wt[0]-jt)*sn-(wt[1]-Gt)*Xt;if(At!==null){if(Math.abs(yn)>At)return!1}else if(yn!==0)return!1;return Tt?Tt==="start"?Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<Ot&&Ot<=qt:qt<=Ot&&Ot<jt:sn>0?Gt<Dt&&Dt<=en:en<=Dt&&Dt<Gt:Tt==="end"?Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<=Ot&&Ot<qt:qt<Ot&&Ot<=jt:sn>0?Gt<=Dt&&Dt<en:en<Dt&&Dt<=Gt:Tt==="both"&&(Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<Ot&&Ot<qt:qt<Ot&&Ot<jt:sn>0?Gt<Dt&&Dt<en:en<Dt&&Dt<Gt):Math.abs(Xt)>=Math.abs(sn)?Xt>0?jt<=Ot&&Ot<=qt:qt<=Ot&&Ot<=jt:sn>0?Gt<=Dt&&Dt<=en:en<=Dt&&Dt<=Gt}function Fh(vt,bt){var wt=Hn(vt),Tt=Hn(bt),At=wt.type,Ot=Tt.type;switch(At){case"Point":switch(Ot){case"MultiPoint":return function(Dt,jt){var Gt,qt=!1;for(Gt=0;Gt<jt.coordinates.length;Gt++)if(mf(jt.coordinates[Gt],Dt.coordinates)){qt=!0;break}return qt}(wt,Tt);case"LineString":return Cl(wt,Tt,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return oo(wt,Tt,{ignoreBoundary:!0});default:throw new Error("feature2 "+Ot+" geometry not supported")}case"MultiPoint":switch(Ot){case"MultiPoint":return function(Dt,jt){for(var Gt=0;Gt<Dt.coordinates.length;Gt++){for(var qt=!1,en=0;en<jt.coordinates.length;en++)mf(Dt.coordinates[Gt],jt.coordinates[en])&&(qt=!0);if(!qt)return!1}return!0}(wt,Tt);case"LineString":return function(Dt,jt){for(var Gt=!1,qt=0;qt<Dt.coordinates.length;qt++){if(!Cl(Dt.coordinates[qt],jt))return!1;Gt||(Gt=Cl(Dt.coordinates[qt],jt,{ignoreEndVertices:!0}))}return Gt}(wt,Tt);case"Polygon":case"MultiPolygon":return function(Dt,jt){for(var Gt=!0,qt=!1,en=0;en<Dt.coordinates.length;en++){if(!(qt=oo(Dt.coordinates[1],jt))){Gt=!1;break}qt=oo(Dt.coordinates[1],jt,{ignoreBoundary:!0})}return Gt&&qt}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"LineString":return function(Dt,jt){for(var Gt=0;Gt<Dt.coordinates.length;Gt++)if(!Cl(Dt.coordinates[Gt],jt))return!1;return!0}(wt,Tt);case"Polygon":case"MultiPolygon":return function(Dt,jt){var Gt=un(jt),qt=un(Dt);if(!_p(Gt,qt))return!1;for(var en=!1,Xt=0;Xt<Dt.coordinates.length-1;Xt++){if(!oo(Dt.coordinates[Xt],jt))return!1;en||(en=oo(Dt.coordinates[Xt],jt,{ignoreBoundary:!0})),!en&&(en=oo(Lg(Dt.coordinates[Xt],Dt.coordinates[Xt+1]),jt,{ignoreBoundary:!0}))}return en}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"Polygon":case"MultiPolygon":return function(Dt,jt){var Gt=un(Dt);if(!_p(un(jt),Gt))return!1;for(var qt=0;qt<Dt.coordinates[0].length;qt++)if(!oo(Dt.coordinates[0][qt],jt))return!1;return!0}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}}function _p(vt,bt){return!(vt[0]>bt[0])&&!(vt[2]<bt[2])&&!(vt[1]>bt[1])&&!(vt[3]<bt[3])}function mf(vt,bt){return vt[0]===bt[0]&&vt[1]===bt[1]}function Lg(vt,bt){return[(vt[0]+bt[0])/2,(vt[1]+bt[1])/2]}function yf(vt,bt,wt){wt===void 0&&(wt={}),wt.mask&&!wt.units&&(wt.units="kilometers");for(var Tt=[],At=vt[0],Ot=vt[1],Dt=vt[2],jt=vt[3],Gt=bt/ao([At,Ot],[Dt,Ot],wt)*(Dt-At),qt=bt/ao([At,Ot],[At,jt],wt)*(jt-Ot),en=Dt-At,Xt=jt-Ot,sn=Math.floor(en/Gt),yn=(Xt-Math.floor(Xt/qt)*qt)/2,vn=At+(en-sn*Gt)/2;vn<=Dt;){for(var Sn=Ot+yn;Sn<=jt;){var fn=kt([vn,Sn],wt.properties);wt.mask?Fh(fn,wt.mask)&&Tt.push(fn):Tt.push(fn),Sn+=qt}vn+=Gt}return Ft(Tt)}function zh(vt,bt){bt===void 0&&(bt={});var wt=bt.precision,Tt=bt.coordinates,At=bt.mutate;if(wt=wt==null||isNaN(wt)?6:wt,Tt=Tt==null||isNaN(Tt)?3:Tt,!vt)throw new Error("<geojson> is required");if(typeof wt!="number")throw new Error("<precision> must be a number");if(typeof Tt!="number")throw new Error("<coordinates> must be a number");At!==!1&&At!==void 0||(vt=JSON.parse(JSON.stringify(vt)));var Ot=Math.pow(10,wt);return dn(vt,function(Dt){(function(jt,Gt,qt){jt.length>qt&&jt.splice(qt,jt.length);for(var en=0;en<jt.length;en++)jt[en]=Math.round(jt[en]*Gt)/Gt})(Dt,Ot,Tt)}),vt}function wd(vt){if(!vt)throw new Error("geojson is required");var bt=[];return Er(vt,function(wt){bt.push(wt)}),Ft(bt)}function Pg(vt,bt,wt){if(vt.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");wt===void 0&&(wt=1);var Tt=vt.geometry.coordinates,At=[],Ot={};if(wt){for(var Dt=[],jt=0;jt<Tt.length;jt++)for(var Gt=0;Gt<Tt[jt].length-1;Gt++)Dt.push(Sn(jt,Gt));var qt=Ar();qt.load(Dt)}for(var en=0;en<Tt.length;en++)for(var Xt=0;Xt<Tt[en].length-1;Xt++)if(wt)qt.search(Sn(en,Xt)).forEach(function(fn){var Dn=fn.ring,rr=fn.edge;vn(en,Xt,Dn,rr)});else for(var sn=0;sn<Tt.length;sn++)for(var yn=0;yn<Tt[sn].length-1;yn++)vn(en,Xt,sn,yn);return bt||(At={type:"Feature",geometry:{type:"MultiPoint",coordinates:At}}),At;function vn(fn,Dn,rr,bn){var Nn,Bn,Gn=Tt[fn][Dn],jn=Tt[fn][Dn+1],Vr=Tt[rr][bn],$r=Tt[rr][bn+1],qr=function(Br,Dr,Mr,Yr){if(rh(Br,Mr)||rh(Br,Yr)||rh(Dr,Mr)||rh(Yr,Mr))return null;var zr=Br[0],Qr=Br[1],wr=Dr[0],ji=Dr[1],yi=Mr[0],bo=Mr[1],Ri=Yr[0],eo=Yr[1],Ho=(zr-wr)*(bo-eo)-(Qr-ji)*(yi-Ri);return Ho===0?null:[((zr*ji-Qr*wr)*(yi-Ri)-(zr-wr)*(yi*eo-bo*Ri))/Ho,((zr*ji-Qr*wr)*(bo-eo)-(Qr-ji)*(yi*eo-bo*Ri))/Ho]}(Gn,jn,Vr,$r);if(qr!==null&&(Nn=jn[0]!==Gn[0]?(qr[0]-Gn[0])/(jn[0]-Gn[0]):(qr[1]-Gn[1])/(jn[1]-Gn[1]),Bn=$r[0]!==Vr[0]?(qr[0]-Vr[0])/($r[0]-Vr[0]):(qr[1]-Vr[1])/($r[1]-Vr[1]),!(Nn>=1||Nn<=0||Bn>=1||Bn<=0))){var Rr=qr,Jr=!Ot[Rr];Jr&&(Ot[Rr]=!0),bt?At.push(bt(qr,fn,Dn,Gn,jn,Nn,rr,bn,Vr,$r,Bn,Jr)):At.push(qr)}}function Sn(fn,Dn){var rr,bn,Nn,Bn,Gn=Tt[fn][Dn],jn=Tt[fn][Dn+1];return Gn[0]<jn[0]?(rr=Gn[0],bn=jn[0]):(rr=jn[0],bn=Gn[0]),Gn[1]<jn[1]?(Nn=Gn[1],Bn=jn[1]):(Nn=jn[1],Bn=Gn[1]),{minX:rr,minY:Nn,maxX:bn,maxY:Bn,ring:fn,edge:Dn}}}function rh(vt,bt){if(!vt||!bt||vt.length!==bt.length)return!1;for(var wt=0,Tt=vt.length;wt<Tt;wt++)if(vt[wt]instanceof Array&&bt[wt]instanceof Array){if(!rh(vt[wt],bt[wt]))return!1}else if(vt[wt]!==bt[wt])return!1;return!0}function Hm(vt){if(vt.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(vt.geometry===void 0||vt.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(vt.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var bt=vt.geometry.coordinates.length,wt=[],Tt=0;Tt<bt;Tt++){var At=vt.geometry.coordinates[Tt];Vt(At[0],At[At.length-1])||At.push(At[0]),wt.push.apply(wt,At.slice(0,At.length-1))}if(!function(Ri){for(var eo={},Ho=1,Ss=0,Ua=Ri.length;Ss<Ua;++Ss){if(Object.prototype.hasOwnProperty.call(eo,Ri[Ss])){Ho=0;break}eo[Ri[Ss]]=1}return Ho}(wt))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var Ot=wt.length,Dt=Pg(vt,function(Ri,eo,Ho,Ss,Ua,ag,ad,lg,cg,np,Sm,rp){return[Ri,eo,Ho,Ss,Ua,ag,ad,lg,cg,np,Sm,rp]}),jt=Dt.length;if(jt==0){var Gt=[];for(Tt=0;Tt<bt;Tt++)Gt.push(It([vt.geometry.coordinates[Tt]],{parent:-1,winding:$t(vt.geometry.coordinates[Tt])}));var qt=Ft(Gt);return ji(),yi(),qt}var en=[],Xt=[];for(Tt=0;Tt<bt;Tt++){en.push([]);for(var sn=0;sn<vt.geometry.coordinates[Tt].length-1;sn++)en[Tt].push([new bp(vt.geometry.coordinates[Tt][tn(sn+1,vt.geometry.coordinates[Tt].length-1)],1,[Tt,sn],[Tt,tn(sn+1,vt.geometry.coordinates[Tt].length-1)],void 0)]),Xt.push(new Hh(vt.geometry.coordinates[Tt][sn],[Tt,tn(sn-1,vt.geometry.coordinates[Tt].length-1)],[Tt,sn],void 0,void 0,!1,!0))}for(Tt=0;Tt<jt;Tt++)en[Dt[Tt][1]][Dt[Tt][2]].push(new bp(Dt[Tt][0],Dt[Tt][5],[Dt[Tt][1],Dt[Tt][2]],[Dt[Tt][6],Dt[Tt][7]],void 0)),Dt[Tt][11]&&Xt.push(new Hh(Dt[Tt][0],[Dt[Tt][1],Dt[Tt][2]],[Dt[Tt][6],Dt[Tt][7]],void 0,void 0,!0,!0));var yn=Xt.length;for(Tt=0;Tt<en.length;Tt++)for(sn=0;sn<en[Tt].length;sn++)en[Tt][sn].sort(function(Ri,eo){return Ri.param<eo.param?-1:1});var vn=[];for(Tt=0;Tt<yn;Tt++)vn.push({minX:Xt[Tt].coord[0],minY:Xt[Tt].coord[1],maxX:Xt[Tt].coord[0],maxY:Xt[Tt].coord[1],index:Tt});var Sn=Ar();for(Sn.load(vn),Tt=0;Tt<en.length;Tt++)for(sn=0;sn<en[Tt].length;sn++)for(var fn=0;fn<en[Tt][sn].length;fn++){rr=fn==en[Tt][sn].length-1?en[Tt][tn(sn+1,vt.geometry.coordinates[Tt].length-1)][0].coord:en[Tt][sn][fn+1].coord;var Dn=Sn.search({minX:rr[0],minY:rr[1],maxX:rr[0],maxY:rr[1]})[0];en[Tt][sn][fn].nxtIsectAlongEdgeIn=Dn.index}for(Tt=0;Tt<en.length;Tt++)for(sn=0;sn<en[Tt].length;sn++)for(fn=0;fn<en[Tt][sn].length;fn++){var rr=en[Tt][sn][fn].coord,bn=(Dn=Sn.search({minX:rr[0],minY:rr[1],maxX:rr[0],maxY:rr[1]})[0]).index;bn<Ot?Xt[bn].nxtIsectAlongRingAndEdge2=en[Tt][sn][fn].nxtIsectAlongEdgeIn:Vt(Xt[bn].ringAndEdge1,en[Tt][sn][fn].ringAndEdgeIn)?Xt[bn].nxtIsectAlongRingAndEdge1=en[Tt][sn][fn].nxtIsectAlongEdgeIn:Xt[bn].nxtIsectAlongRingAndEdge2=en[Tt][sn][fn].nxtIsectAlongEdgeIn}var Nn=[];for(Tt=0,sn=0;sn<bt;sn++){var Bn=Tt;for(fn=0;fn<vt.geometry.coordinates[sn].length-1;fn++)Xt[Tt].coord[0]<Xt[Bn].coord[0]&&(Bn=Tt),Tt++;var Gn=Xt[Bn].nxtIsectAlongRingAndEdge2;for(fn=0;fn<Xt.length;fn++)if(Xt[fn].nxtIsectAlongRingAndEdge1==Bn||Xt[fn].nxtIsectAlongRingAndEdge2==Bn){var jn=fn;break}var Vr=jh([Xt[jn].coord,Xt[Bn].coord,Xt[Gn].coord],!0)?1:-1;Nn.push({isect:Bn,parent:-1,winding:Vr})}for(Nn.sort(function(Ri,eo){return Xt[Ri.isect].coord>Xt[eo.isect].coord?-1:1}),Gt=[];Nn.length>0;){var $r=Nn.pop(),qr=$r.isect,Rr=$r.parent,Jr=$r.winding,Br=Gt.length,Dr=[Xt[qr].coord],Mr=qr;if(Xt[qr].ringAndEdge1Walkable)var Yr=Xt[qr].ringAndEdge1,zr=Xt[qr].nxtIsectAlongRingAndEdge1;else Yr=Xt[qr].ringAndEdge2,zr=Xt[qr].nxtIsectAlongRingAndEdge2;for(;!Vt(Xt[qr].coord,Xt[zr].coord);){Dr.push(Xt[zr].coord);var Qr=void 0;for(Tt=0;Tt<Nn.length;Tt++)if(Nn[Tt].isect==zr){Qr=Tt;break}if(Qr!=null&&Nn.splice(Qr,1),Vt(Yr,Xt[zr].ringAndEdge1)){if(Yr=Xt[zr].ringAndEdge2,Xt[zr].ringAndEdge2Walkable=!1,Xt[zr].ringAndEdge1Walkable){var wr={isect:zr};jh([Xt[Mr].coord,Xt[zr].coord,Xt[Xt[zr].nxtIsectAlongRingAndEdge2].coord],Jr==1)?(wr.parent=Rr,wr.winding=-Jr):(wr.parent=Br,wr.winding=Jr),Nn.push(wr)}Mr=zr,zr=Xt[zr].nxtIsectAlongRingAndEdge2}else Yr=Xt[zr].ringAndEdge1,Xt[zr].ringAndEdge1Walkable=!1,Xt[zr].ringAndEdge2Walkable&&(wr={isect:zr},jh([Xt[Mr].coord,Xt[zr].coord,Xt[Xt[zr].nxtIsectAlongRingAndEdge1].coord],Jr==1)?(wr.parent=Rr,wr.winding=-Jr):(wr.parent=Br,wr.winding=Jr),Nn.push(wr)),Mr=zr,zr=Xt[zr].nxtIsectAlongRingAndEdge1}Dr.push(Xt[zr].coord),Gt.push(It([Dr],{index:Br,parent:Rr,winding:Jr,netWinding:void 0}))}qt=Ft(Gt);function ji(){for(var Ri=[],eo=0;eo<qt.features.length;eo++)qt.features[eo].properties.parent==-1&&Ri.push(eo);if(Ri.length>1)for(eo=0;eo<Ri.length;eo++){for(var Ho=-1,Ss=0;Ss<qt.features.length;Ss++)Ri[eo]!=Ss&&oo(qt.features[Ri[eo]].geometry.coordinates[0][0],qt.features[Ss],{ignoreBoundary:!0})&&Bh(qt.features[Ss])<1/0&&(Ho=Ss);qt.features[Ri[eo]].properties.parent=Ho}}function yi(){for(var Ri=0;Ri<qt.features.length;Ri++)if(qt.features[Ri].properties.parent==-1){var eo=qt.features[Ri].properties.winding;qt.features[Ri].properties.netWinding=eo,bo(Ri,eo)}}function bo(Ri,eo){for(var Ho=0;Ho<qt.features.length;Ho++)if(qt.features[Ho].properties.parent==Ri){var Ss=eo+qt.features[Ho].properties.winding;qt.features[Ho].properties.netWinding=Ss,bo(Ho,Ss)}}return ji(),yi(),qt}var bp=function(vt,bt,wt,Tt,At){this.coord=vt,this.param=bt,this.ringAndEdgeIn=wt,this.ringAndEdgeOut=Tt,this.nxtIsectAlongEdgeIn=At},Hh=function(vt,bt,wt,Tt,At,Ot,Dt){this.coord=vt,this.ringAndEdge1=bt,this.ringAndEdge2=wt,this.nxtIsectAlongRingAndEdge1=Tt,this.nxtIsectAlongRingAndEdge2=At,this.ringAndEdge1Walkable=Ot,this.ringAndEdge2Walkable=Dt};function jh(vt,bt){if(bt===void 0&&(bt=!0),vt.length!=3)throw new Error("This function requires an array of three points [x,y]");return(vt[1][0]-vt[0][0])*(vt[2][1]-vt[0][1])-(vt[1][1]-vt[0][1])*(vt[2][0]-vt[0][0])>=0==bt}function $t(vt){for(var bt=0,wt=0;wt<vt.length-1;wt++)vt[wt][0]<vt[bt][0]&&(bt=wt);if(jh([vt[tn(bt-1,vt.length-1)],vt[bt],vt[tn(bt+1,vt.length-1)]],!0))var Tt=1;else Tt=-1;return Tt}function Vt(vt,bt){if(!vt||!bt||vt.length!=bt.length)return!1;for(var wt=0,Tt=vt.length;wt<Tt;wt++)if(vt[wt]instanceof Array&&bt[wt]instanceof Array){if(!Vt(vt[wt],bt[wt]))return!1}else if(vt[wt]!=bt[wt])return!1;return!0}function tn(vt,bt){return(vt%bt+bt)%bt}var mn=Math.PI/180,In=180/Math.PI,Qn=function(vt,bt){this.lon=vt,this.lat=bt,this.x=mn*vt,this.y=mn*bt};Qn.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Qn.prototype.antipode=function(){var vt=-1*this.lat,bt=this.lon<0?180+this.lon:-1*(180-this.lon);return new Qn(bt,vt)};var Tr=function(){this.coords=[],this.length=0};Tr.prototype.move_to=function(vt){this.length++,this.coords.push(vt)};var jr=function(vt){this.properties=vt||{},this.geometries=[]};jr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var vt=[],bt=0;bt<this.geometries.length;bt++)vt.push(this.geometries[bt].coords);return{geometry:{type:"MultiLineString",coordinates:vt},type:"Feature",properties:this.properties}},jr.prototype.wkt=function(){for(var vt="",bt="LINESTRING(",wt=function(At){bt+=At[0]+" "+At[1]+","},Tt=0;Tt<this.geometries.length;Tt++){if(this.geometries[Tt].coords.length===0)return"LINESTRING(empty)";this.geometries[Tt].coords.forEach(wt),vt+=bt.substring(0,bt.length-1)+")"}return vt};var Kr=function(vt,bt,wt){if(!vt||vt.x===void 0||vt.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!bt||bt.x===void 0||bt.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Qn(vt.x,vt.y),this.end=new Qn(bt.x,bt.y),this.properties=wt||{};var Tt=this.start.x-this.end.x,At=this.start.y-this.end.y,Ot=Math.pow(Math.sin(At/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(Tt/2),2);if(this.g=2*Math.asin(Math.sqrt(Ot)),this.g===Math.PI)throw new Error("it appears "+vt.view()+" and "+bt.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+vt+" and "+bt)};function ci(vt,bt){var wt=[],Tt=Ys();return Er(bt,function(At){if(wt.forEach(function(jt,Gt){jt.id=Gt}),wt.length){var Ot=Tt.search(At);if(Ot.features.length){var Dt=fo(At,Ot);wt=wt.filter(function(jt){return jt.id!==Dt.id}),Tt.remove(Dt),Jn(Mi(Dt,At),function(jt){wt.push(jt),Tt.insert(jt)})}}else(wt=Mi(vt,At).features).forEach(function(jt){jt.bbox||(jt.bbox=xg(un(jt)))}),Tt.load(Ft(wt))}),Ft(wt)}function Mi(vt,bt){var wt=[],Tt=Rn(vt)[0],At=Rn(vt)[vt.geometry.coordinates.length-1];if(Ro(Tt,pn(bt))||Ro(At,pn(bt)))return Ft([vt]);var Ot=Ys(),Dt=ka(vt);Ot.load(Dt);var jt=Ot.search(bt);if(!jt.features.length)return Ft([vt]);var Gt=fo(bt,jt),qt=hr(Dt,function(en,Xt,sn){var yn=Rn(Xt)[1],vn=pn(bt);return sn===Gt.id?(en.push(vn),wt.push(Nt(en)),Ro(vn,yn)?[vn]:[vn,yn]):(en.push(yn),en)},[Tt]);return qt.length>1&&wt.push(Nt(qt)),Ft(wt)}function fo(vt,bt){if(!bt.features.length)throw new Error("lines must contain features");if(bt.features.length===1)return bt.features[0];var wt,Tt=1/0;return Jn(bt,function(At){var Ot=Dc(At,vt).properties.dist;Ot<Tt&&(wt=At,Tt=Ot)}),wt}function Ro(vt,bt){return vt[0]===bt[0]&&vt[1]===bt[1]}function tl(vt,bt,wt,Tt,At){At===void 0&&(At={});var Ot=At.steps||64,Dt=ca(wt),jt=ca(Tt),Gt=Array.isArray(vt)||vt.type!=="Feature"?{}:vt.properties;if(Dt===jt)return Nt(hp(vt,bt,At).geometry.coordinates[0],Gt);for(var qt=Dt,en=Dt<jt?jt:jt+360,Xt=qt,sn=[],yn=0;Xt<en;)sn.push(Ta(vt,bt,Xt,At).geometry.coordinates),Xt=qt+360*++yn/Ot;return Xt>en&&sn.push(Ta(vt,bt,en,At).geometry.coordinates),Nt(sn,Gt)}function ca(vt){var bt=vt%360;return bt<0&&(bt+=360),bt}function nl(vt,bt){bt===void 0&&(bt={});var wt=Hn(vt);switch(bt.properties||vt.type!=="Feature"||(bt.properties=vt.properties),wt.type){case"Polygon":return hl(wt,bt);case"MultiPolygon":return function(Tt,At){At===void 0&&(At={});var Ot=Hn(Tt).coordinates,Dt=At.properties?At.properties:Tt.type==="Feature"?Tt.properties:{},jt=[];return Ot.forEach(function(Gt){jt.push(Lu(Gt,Dt))}),Ft(jt)}(wt,bt);default:throw new Error("invalid poly")}}function hl(vt,bt){return bt===void 0&&(bt={}),Lu(Hn(vt).coordinates,bt.properties?bt.properties:vt.type==="Feature"?vt.properties:{})}function Lu(vt,bt){return vt.length>1?Yt(vt,bt):Nt(vt[0],bt)}function Ig(vt,bt){var wt,Tt,At;bt===void 0&&(bt={});var Ot=bt.properties,Dt=(wt=bt.autoComplete)===null||wt===void 0||wt,jt=(Tt=bt.orderCoords)===null||Tt===void 0||Tt;switch((At=bt.mutate)!==null&&At!==void 0&&At||(vt=$o(vt)),vt.type){case"FeatureCollection":var Gt=[];return vt.features.forEach(function(qt){Gt.push(Rn(xp(qt,{},Dt,jt)))}),Wt(Gt,Ot);default:return xp(vt,Ot,Dt,jt)}}function xp(vt,bt,wt,Tt){bt=bt||(vt.type==="Feature"?vt.properties:{});var At=Hn(vt),Ot=At.coordinates,Dt=At.type;if(!Ot.length)throw new Error("line must contain coordinates");switch(Dt){case"LineString":return wt&&(Ot=ih(Ot)),It([Ot],bt);case"MultiLineString":var jt=[],Gt=0;return Ot.forEach(function(qt){if(wt&&(qt=ih(qt)),Tt){var en=function(Xt){var sn=Xt[0],yn=Xt[1],vn=Xt[2],Sn=Xt[3];return Math.abs(sn-vn)*Math.abs(yn-Sn)}(un(Nt(qt)));en>Gt?(jt.unshift(qt),Gt=en):jt.push(qt)}else jt.push(qt)}),It(jt,bt);default:throw new Error("geometry type "+Dt+" is not supported")}}function ih(vt){var bt=vt[0],wt=bt[0],Tt=bt[1],At=vt[vt.length-1],Ot=At[0],Dt=At[1];return wt===Ot&&Tt===Dt||vt.push(bt),vt}function oh(vt,bt){var wt,Tt,At,Ot,Dt,jt,Gt;for(Tt=1;Tt<=8;Tt*=2){for(wt=[],Ot=!(su(At=vt[vt.length-1],bt)&Tt),Dt=0;Dt<vt.length;Dt++)(Gt=!(su(jt=vt[Dt],bt)&Tt))!==Ot&&wt.push(wp(At,jt,Tt,bt)),Gt&&wt.push(jt),At=jt,Ot=Gt;if(!(vt=wt).length)break}return wt}function wp(vt,bt,wt,Tt){return 8&wt?[vt[0]+(bt[0]-vt[0])*(Tt[3]-vt[1])/(bt[1]-vt[1]),Tt[3]]:4&wt?[vt[0]+(bt[0]-vt[0])*(Tt[1]-vt[1])/(bt[1]-vt[1]),Tt[1]]:2&wt?[Tt[2],vt[1]+(bt[1]-vt[1])*(Tt[2]-vt[0])/(bt[0]-vt[0])]:1&wt?[Tt[0],vt[1]+(bt[1]-vt[1])*(Tt[0]-vt[0])/(bt[0]-vt[0])]:null}function su(vt,bt){var wt=0;return vt[0]<bt[0]?wt|=1:vt[0]>bt[2]&&(wt|=2),vt[1]<bt[1]?wt|=4:vt[1]>bt[3]&&(wt|=8),wt}function ua(vt,bt){for(var wt=[],Tt=0,At=vt;Tt<At.length;Tt++){var Ot=oh(At[Tt],bt);Ot.length>0&&(Ot[0][0]===Ot[Ot.length-1][0]&&Ot[0][1]===Ot[Ot.length-1][1]||Ot.push(Ot[0]),Ot.length>=4&&wt.push(Ot))}return wt}Kr.prototype.interpolate=function(vt){var bt=Math.sin((1-vt)*this.g)/Math.sin(this.g),wt=Math.sin(vt*this.g)/Math.sin(this.g),Tt=bt*Math.cos(this.start.y)*Math.cos(this.start.x)+wt*Math.cos(this.end.y)*Math.cos(this.end.x),At=bt*Math.cos(this.start.y)*Math.sin(this.start.x)+wt*Math.cos(this.end.y)*Math.sin(this.end.x),Ot=bt*Math.sin(this.start.y)+wt*Math.sin(this.end.y),Dt=In*Math.atan2(Ot,Math.sqrt(Math.pow(Tt,2)+Math.pow(At,2)));return[In*Math.atan2(At,Tt),Dt]},Kr.prototype.Arc=function(vt,bt){var wt=[];if(!vt||vt<=2)wt.push([this.start.lon,this.start.lat]),wt.push([this.end.lon,this.end.lat]);else for(var Tt=1/(vt-1),At=0;At<vt;++At){var Ot=Tt*At,Dt=this.interpolate(Ot);wt.push(Dt)}for(var jt=!1,Gt=0,qt=bt&&bt.offset?bt.offset:10,en=180-qt,Xt=-180+qt,sn=360-qt,yn=1;yn<wt.length;++yn){var vn=wt[yn-1][0],Sn=wt[yn][0],fn=Math.abs(Sn-vn);fn>sn&&(Sn>en&&vn<Xt||vn>en&&Sn<Xt)?jt=!0:fn>Gt&&(Gt=fn)}var Dn=[];if(jt&&Gt<qt){var rr=[];Dn.push(rr);for(var bn=0;bn<wt.length;++bn){var Nn=parseFloat(wt[bn][0]);if(bn>0&&Math.abs(Nn-wt[bn-1][0])>sn){var Bn=parseFloat(wt[bn-1][0]),Gn=parseFloat(wt[bn-1][1]),jn=parseFloat(wt[bn][0]),Vr=parseFloat(wt[bn][1]);if(Bn>-180&&Bn<Xt&&jn===180&&bn+1<wt.length&&wt[bn-1][0]>-180&&wt[bn-1][0]<Xt){rr.push([-180,wt[bn][1]]),bn++,rr.push([wt[bn][0],wt[bn][1]]);continue}if(Bn>en&&Bn<180&&jn===-180&&bn+1<wt.length&&wt[bn-1][0]>en&&wt[bn-1][0]<180){rr.push([180,wt[bn][1]]),bn++,rr.push([wt[bn][0],wt[bn][1]]);continue}if(Bn<Xt&&jn>en){var $r=Bn;Bn=jn,jn=$r;var qr=Gn;Gn=Vr,Vr=qr}if(Bn>en&&jn<Xt&&(jn+=360),Bn<=180&&jn>=180&&Bn<jn){var Rr=(180-Bn)/(jn-Bn),Jr=Rr*Vr+(1-Rr)*Gn;rr.push([wt[bn-1][0]>en?180:-180,Jr]),(rr=[]).push([wt[bn-1][0]>en?-180:180,Jr]),Dn.push(rr)}else rr=[],Dn.push(rr);rr.push([Nn,wt[bn][1]])}else rr.push([wt[bn][0],wt[bn][1]])}}else{var Br=[];Dn.push(Br);for(var Dr=0;Dr<wt.length;++Dr)Br.push([wt[Dr][0],wt[Dr][1]])}for(var Mr=new jr(this.properties),Yr=0;Yr<Dn.length;++Yr){var zr=new Tr;Mr.geometries.push(zr);for(var Qr=Dn[Yr],wr=0;wr<Qr.length;++wr)zr.move_to(Qr[wr])}return Mr};var Ed=vs(function(vt,bt){function wt(Tt){var At=[];for(var Ot in Tt)At.push(Ot);return At}(vt.exports=typeof Object.keys=="function"?Object.keys:wt).shim=wt}),Og=vs(function(vt,bt){var wt=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";function Tt(Ot){return Object.prototype.toString.call(Ot)=="[object Arguments]"}function At(Ot){return Ot&&typeof Ot=="object"&&typeof Ot.length=="number"&&Object.prototype.hasOwnProperty.call(Ot,"callee")&&!Object.prototype.propertyIsEnumerable.call(Ot,"callee")||!1}(bt=vt.exports=wt?Tt:At).supported=Tt,bt.unsupported=At}),Vh=vs(function(vt){var bt=Array.prototype.slice,wt=vt.exports=function(Ot,Dt,jt){return jt||(jt={}),Ot===Dt||(Ot instanceof Date&&Dt instanceof Date?Ot.getTime()===Dt.getTime():!Ot||!Dt||typeof Ot!="object"&&typeof Dt!="object"?jt.strict?Ot===Dt:Ot==Dt:function(Gt,qt,en){var Xt,sn;if(Tt(Gt)||Tt(qt)||Gt.prototype!==qt.prototype)return!1;if(Og(Gt))return!!Og(qt)&&(Gt=bt.call(Gt),qt=bt.call(qt),wt(Gt,qt,en));if(At(Gt)){if(!At(qt)||Gt.length!==qt.length)return!1;for(Xt=0;Xt<Gt.length;Xt++)if(Gt[Xt]!==qt[Xt])return!1;return!0}try{var yn=Ed(Gt),vn=Ed(qt)}catch{return!1}if(yn.length!=vn.length)return!1;for(yn.sort(),vn.sort(),Xt=yn.length-1;Xt>=0;Xt--)if(yn[Xt]!=vn[Xt])return!1;for(Xt=yn.length-1;Xt>=0;Xt--)if(sn=yn[Xt],!wt(Gt[sn],qt[sn],en))return!1;return typeof Gt==typeof qt}(Ot,Dt,jt))};function Tt(Ot){return Ot==null}function At(Ot){return!(!Ot||typeof Ot!="object"||typeof Ot.length!="number")&&typeof Ot.copy=="function"&&typeof Ot.slice=="function"&&!(Ot.length>0&&typeof Ot[0]!="number")}});function vf(vt,bt,wt){if(wt===void 0&&(wt={}),!cn(wt=wt||{}))throw new Error("options is invalid");var Tt,At=wt.tolerance||0,Ot=[],Dt=Ys(),jt=ka(vt);return Dt.load(jt),Fr(bt,function(Gt){var qt=!1;Gt&&(Jn(Dt.search(Gt),function(en){if(qt===!1){var Xt=Rn(Gt).sort(),sn=Rn(en).sort();Vh(Xt,sn)||(At===0?Cl(Xt[0],en)&&Cl(Xt[1],en):Dc(en,Xt[0]).properties.dist<=At&&Dc(en,Xt[1]).properties.dist<=At)?(qt=!0,Tt=Tt?Sd(Tt,Gt):Gt):(At===0?Cl(sn[0],Gt)&&Cl(sn[1],Gt):Dc(Gt,sn[0]).properties.dist<=At&&Dc(Gt,sn[1]).properties.dist<=At)&&(Tt=Tt?Sd(Tt,en):en)}}),qt===!1&&Tt&&(Ot.push(Tt),Tt=void 0))}),Tt&&Ot.push(Tt),Ft(Ot)}function Sd(vt,bt){var wt=Rn(bt),Tt=Rn(vt),At=Tt[0],Ot=Tt[Tt.length-1],Dt=vt.geometry.coordinates;return Vh(wt[0],At)?Dt.unshift(wt[1]):Vh(wt[0],Ot)?Dt.push(wt[1]):Vh(wt[1],At)?Dt.unshift(wt[0]):Vh(wt[1],Ot)&&Dt.push(wt[0]),vt}function _f(vt){var bt=vt%360;return bt<0&&(bt+=360),bt}function sh(vt,bt,wt){var Tt;return wt===void 0&&(wt={}),(Tt=wt.final?jm(pn(bt),pn(vt)):jm(pn(vt),pn(bt)))>180?-(360-Tt):Tt}function jm(vt,bt){var wt=kn(vt[1]),Tt=kn(bt[1]),At=kn(bt[0]-vt[0]);At>Math.PI&&(At-=2*Math.PI),At<-Math.PI&&(At+=2*Math.PI);var Ot=Math.log(Math.tan(Tt/2+Math.PI/4)/Math.tan(wt/2+Math.PI/4));return(wn(Math.atan2(At,Ot))+360)%360}function bf(vt,bt,wt,Tt){Tt===void 0&&(Tt={});var At=bt<0,Ot=Cn(Math.abs(bt),Tt.units,"meters");At&&(Ot=-Math.abs(Ot));var Dt=pn(vt),jt=function(Gt,qt,en,Xt){Xt=Xt===void 0?rt:Number(Xt);var sn=qt/Xt,yn=Gt[0]*Math.PI/180,vn=kn(Gt[1]),Sn=kn(en),fn=sn*Math.cos(Sn),Dn=vn+fn;Math.abs(Dn)>Math.PI/2&&(Dn=Dn>0?Math.PI-Dn:-Math.PI-Dn);var rr=Math.log(Math.tan(Dn/2+Math.PI/4)/Math.tan(vn/2+Math.PI/4)),bn=Math.abs(rr)>1e-11?fn/rr:Math.cos(vn),Nn=sn*Math.sin(Sn)/bn;return[(180*(yn+Nn)/Math.PI+540)%360-180,180*Dn/Math.PI]}(Dt,Ot,wt);return jt[0]+=jt[0]-Dt[0]>180?-360:Dt[0]-jt[0]>180?360:0,kt(jt,Tt.properties)}function Vm(vt,bt,wt,Tt,At,Ot){for(var Dt=0;Dt<vt.length;Dt++){var jt=vt[Dt],Gt=vt[Dt+1];Dt===vt.length-1&&(Gt=vt[0]),Tt=ah(jt,Gt,bt),wt<=0&&Tt>0?ah(bt,jt,At)<0||(At=jt):wt>0&&Tt<=0&&(Es(bt,jt,Ot)||(Ot=jt)),wt=Tt}return[At,Ot]}function Es(vt,bt,wt){return ah(vt,bt,wt)>0}function ah(vt,bt,wt){return(bt[0]-vt[0])*(wt[1]-vt[1])-(wt[0]-vt[0])*(bt[1]-vt[1])}function Ep(vt){for(var bt,wt,Tt=Rn(vt),At=0,Ot=1;Ot<Tt.length;)bt=wt||Tt[0],At+=((wt=Tt[Ot])[0]-bt[0])*(wt[1]+bt[1]),Ot++;return At>0}function lh(vt,bt){switch(vt.type==="Feature"?vt.geometry.type:vt.type){case"GeometryCollection":return cr(vt,function(wt){lh(wt,bt)}),vt;case"LineString":return $g(Rn(vt),bt),vt;case"Polygon":return Uh(Rn(vt),bt),vt;case"MultiLineString":return Rn(vt).forEach(function(wt){$g(wt,bt)}),vt;case"MultiPolygon":return Rn(vt).forEach(function(wt){Uh(wt,bt)}),vt;case"Point":case"MultiPoint":return vt}}function $g(vt,bt){Ep(vt)===bt&&vt.reverse()}function Uh(vt,bt){Ep(vt[0])!==bt&&vt[0].reverse();for(var wt=1;wt<vt.length;wt++)Ep(vt[wt])===bt&&vt[wt].reverse()}function Um(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.zProperty||"elevation",Tt=bt.flip,At=bt.flags;Wn(vt,"Point","input must contain Points");for(var Ot=function(sn,yn){var vn={};return Jn(sn,function(Sn){var fn=Rn(Sn)[1];vn[fn]||(vn[fn]=[]),vn[fn].push(Sn)}),Object.keys(vn).map(function(Sn){return vn[Sn].sort(function(fn,Dn){return Rn(fn)[0]-Rn(Dn)[0]})}).sort(function(Sn,fn){return yn?Rn(Sn[0])[1]-Rn(fn[0])[1]:Rn(fn[0])[1]-Rn(Sn[0])[1]})}(vt,Tt),Dt=[],jt=0;jt<Ot.length;jt++){for(var Gt=Ot[jt],qt=[],en=0;en<Gt.length;en++){var Xt=Gt[en];Xt.properties[wt]?qt.push(Xt.properties[wt]):qt.push(0),At===!0&&(Xt.properties.matrixPosition=[jt,en])}Dt.push(qt)}return Dt}var g1={successCallback:null,verbose:!1,polygons:!1},Bc={};function Gh(vt,bt,wt,Tt){Tt=Tt||{};for(var At=Object.keys(g1),Ot=0;Ot<At.length;Ot++){var Dt=At[Ot],jt=Tt[Dt];jt=jt!=null?jt:g1[Dt],Bc[Dt]=jt}Bc.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+bt+":"+(bt+wt)+"]");var Gt,qt=function(en,Xt,sn){for(var yn=en.length-1,vn=en[0].length-1,Sn={rows:yn,cols:vn,cells:[]},fn=Xt+Math.abs(sn),Dn=0;Dn<yn;++Dn){Sn.cells[Dn]=[];for(var rr=0;rr<vn;++rr){var bn=0,Nn=en[Dn+1][rr],Bn=en[Dn+1][rr+1],Gn=en[Dn][rr+1],jn=en[Dn][rr];if(!(isNaN(Nn)||isNaN(Bn)||isNaN(Gn)||isNaN(jn))){bn|=Nn<Xt?0:Nn>fn?128:64,bn|=Bn<Xt?0:Bn>fn?32:16,bn|=Gn<Xt?0:Gn>fn?8:4;var Vr=+(bn|=jn<Xt?0:jn>fn?2:1),$r=0;if(bn===17||bn===18||bn===33||bn===34||bn===38||bn===68||bn===72||bn===98||bn===102||bn===132||bn===136||bn===137||bn===152||bn===153){var qr=(Nn+Bn+Gn+jn)/4;$r=qr>fn?2:qr<Xt?0:1,bn===34?$r===1?bn=35:$r===0&&(bn=136):bn===136?$r===1?(bn=35,$r=4):$r===0&&(bn=34):bn===17?$r===1?(bn=155,$r=4):$r===0&&(bn=153):bn===68?$r===1?(bn=103,$r=4):$r===0&&(bn=102):bn===153?$r===1&&(bn=155):bn===102?$r===1&&(bn=103):bn===152?$r<2&&(bn=156,$r=1):bn===137?$r<2&&(bn=139,$r=1):bn===98?$r<2&&(bn=99,$r=1):bn===38?$r<2&&(bn=39,$r=1):bn===18?$r>0?(bn=156,$r=4):bn=152:bn===33?$r>0?(bn=139,$r=4):bn=137:bn===72?$r>0?(bn=99,$r=4):bn=98:bn===132&&($r>0?(bn=39,$r=4):bn=38)}if(bn!=0&&bn!=170){var Rr,Jr,Br,Dr,Mr,Yr,zr,Qr;Rr=Jr=Br=Dr=Mr=Yr=zr=Qr=.5;var wr=[];bn===1?(Br=1-Kn(Xt,Gn,jn),Qr=1-Kn(Xt,Nn,jn),wr.push(Gi[bn])):bn===169?(Br=Kn(fn,jn,Gn),Qr=Kn(fn,jn,Nn),wr.push(Gi[bn])):bn===4?(Yr=1-Kn(Xt,Bn,Gn),Dr=Kn(Xt,jn,Gn),wr.push(Ni[bn])):bn===166?(Yr=Kn(fn,Gn,Bn),Dr=1-Kn(fn,Gn,jn),wr.push(Ni[bn])):bn===16?(Mr=Kn(Xt,Gn,Bn),Jr=Kn(Xt,Nn,Bn),wr.push(Di[bn])):bn===154?(Mr=1-Kn(fn,Bn,Gn),Jr=1-Kn(fn,Bn,Nn),wr.push(Di[bn])):bn===64?(zr=Kn(Xt,jn,Nn),Rr=1-Kn(Xt,Bn,Nn),wr.push(no[bn])):bn===106?(zr=1-Kn(fn,Nn,jn),Rr=Kn(fn,Nn,Bn),wr.push(no[bn])):bn===168?(Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),wr.push(Qi[bn]),wr.push(Gi[bn])):bn===2?(Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),wr.push(Qi[bn]),wr.push(Gi[bn])):bn===162?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),wr.push(Qi[bn]),wr.push(Gi[bn])):bn===8?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===138?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===32?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===42?(Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn),wr.push(so[bn]),wr.push(no[bn])):bn===128&&(Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn),wr.push(so[bn]),wr.push(no[bn])),bn===5?(Yr=1-Kn(Xt,Bn,Gn),Qr=1-Kn(Xt,Nn,jn),wr.push(Ni[bn])):bn===165?(Yr=Kn(fn,Gn,Bn),Qr=Kn(fn,jn,Nn),wr.push(Ni[bn])):bn===20?(Dr=Kn(Xt,jn,Gn),Jr=Kn(Xt,Nn,Bn),wr.push(Qi[bn])):bn===150?(Dr=1-Kn(fn,Gn,jn),Jr=1-Kn(fn,Bn,Nn),wr.push(Qi[bn])):bn===80?(Mr=Kn(Xt,Gn,Bn),zr=Kn(Xt,jn,Nn),wr.push(Di[bn])):bn===90?(Mr=1-Kn(fn,Bn,Gn),zr=1-Kn(fn,Nn,jn),wr.push(Di[bn])):bn===65?(Br=1-Kn(Xt,Gn,jn),Rr=1-Kn(Xt,Bn,Nn),wr.push(Gi[bn])):bn===105?(Br=Kn(fn,jn,Gn),Rr=Kn(fn,Nn,Bn),wr.push(Gi[bn])):bn===160?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===10?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===130?(Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn),wr.push(Qi[bn]),wr.push(Gi[bn])):bn===40?(Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn),wr.push(Qi[bn]),wr.push(Gi[bn])):bn===101?(Yr=Kn(fn,Gn,Bn),Rr=Kn(fn,Nn,Bn),wr.push(Ni[bn])):bn===69?(Yr=1-Kn(Xt,Bn,Gn),Rr=1-Kn(Xt,Bn,Nn),wr.push(Ni[bn])):bn===149?(Qr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn),wr.push(so[bn])):bn===21?(Qr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn),wr.push(so[bn])):bn===86?(Dr=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),wr.push(Qi[bn])):bn===84?(Dr=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),wr.push(Qi[bn])):bn===89?(Mr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),wr.push(Gi[bn])):bn===81?(Mr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),wr.push(Gi[bn])):bn===96?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),zr=Kn(Xt,jn,Nn),Rr=Kn(fn,Nn,Bn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===74?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),zr=1-Kn(fn,Nn,jn),Rr=1-Kn(Xt,Bn,Nn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===24?(Mr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Jr=Kn(Xt,Nn,Bn),wr.push(Di[bn]),wr.push(Gi[bn])):bn===146?(Mr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Jr=1-Kn(fn,Bn,Nn),wr.push(Di[bn]),wr.push(Gi[bn])):bn===6?(Yr=1-Kn(Xt,Bn,Gn),Dr=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),wr.push(Ni[bn]),wr.push(Qi[bn])):bn===164?(Yr=Kn(fn,Gn,Bn),Dr=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),wr.push(Ni[bn]),wr.push(Qi[bn])):bn===129?(Br=1-Kn(Xt,Gn,jn),Qr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn),wr.push(Gi[bn]),wr.push(so[bn])):bn===41?(Br=Kn(fn,jn,Gn),Qr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn),wr.push(Gi[bn]),wr.push(so[bn])):bn===66?(Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),Rr=1-Kn(Xt,Bn,Nn),wr.push(Qi[bn]),wr.push(Gi[bn])):bn===104?(Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),Rr=Kn(fn,Nn,Bn),wr.push(Gi[bn]),wr.push(as[bn])):bn===144?(Mr=Kn(Xt,Gn,Bn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn),wr.push(Di[bn]),wr.push(no[bn])):bn===26?(Mr=1-Kn(fn,Bn,Gn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn),wr.push(Di[bn]),wr.push(no[bn])):bn===36?(Yr=Kn(fn,Gn,Bn),Dr=Kn(Xt,jn,Gn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn),wr.push(Ni[bn]),wr.push(Qi[bn])):bn===134?(Yr=1-Kn(Xt,Bn,Gn),Dr=1-Kn(fn,Gn,jn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn),wr.push(Ni[bn]),wr.push(Qi[bn])):bn===9?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),Qr=1-Kn(Xt,Nn,jn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===161?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),Qr=Kn(fn,jn,Nn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===37?(Yr=Kn(fn,Gn,Bn),Qr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn),wr.push(Ni[bn]),wr.push(so[bn])):bn===133?(Yr=1-Kn(Xt,Bn,Gn),Qr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn),wr.push(Ni[bn]),wr.push(so[bn])):bn===148?(Dr=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn),wr.push(Qi[bn]),wr.push(no[bn])):bn===22?(Dr=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn),wr.push(Qi[bn]),wr.push(no[bn])):bn===82?(Mr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),wr.push(Di[bn]),wr.push(Gi[bn])):bn===88?(Mr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),wr.push(Di[bn]),wr.push(Gi[bn])):bn===73?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),Rr=1-Kn(Xt,Bn,Nn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===97?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),Rr=Kn(fn,Nn,Bn),wr.push(Di[bn]),wr.push(Ni[bn])):bn===145?(Mr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),Qr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn),wr.push(Di[bn]),wr.push(so[bn])):bn===25?(Mr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),Qr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn),wr.push(Di[bn]),wr.push(so[bn])):bn===70?(Yr=1-Kn(Xt,Bn,Gn),Dr=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),Rr=1-Kn(Xt,Bn,Nn),wr.push(Ni[bn]),wr.push(Qi[bn])):bn===100?(Yr=Kn(fn,Gn,Bn),Dr=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),Rr=Kn(fn,Nn,Bn),wr.push(Ni[bn]),wr.push(Qi[bn])):bn===34?($r===0?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn)):(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn)),wr.push(Di[bn]),wr.push(Ni[bn]),wr.push(so[bn]),wr.push(no[bn])):bn===35?($r===4?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn)):(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn)),wr.push(Di[bn]),wr.push(Ni[bn]),wr.push(Gi[bn]),wr.push(no[bn])):bn===136?($r===0?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn)):(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn)),wr.push(Di[bn]),wr.push(Ni[bn]),wr.push(so[bn]),wr.push(no[bn])):bn===153?($r===0?(Mr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),Qr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn)):(Mr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),Qr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn)),wr.push(Di[bn]),wr.push(Gi[bn])):bn===102?($r===0?(Yr=1-Kn(Xt,Bn,Gn),Dr=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),Rr=1-Kn(Xt,Bn,Nn)):(Yr=Kn(fn,Gn,Bn),Dr=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),Rr=Kn(fn,Nn,Bn)),wr.push(Ni[bn]),wr.push(no[bn])):bn===155?($r===4?(Mr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),Qr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn)):(Mr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),Qr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn)),wr.push(Di[bn]),wr.push(so[bn])):bn===103?($r===4?(Yr=1-Kn(Xt,Bn,Gn),Dr=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),Rr=1-Kn(Xt,Bn,Nn)):(Yr=Kn(fn,Gn,Bn),Dr=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),Rr=Kn(fn,Nn,Bn)),wr.push(Ni[bn]),wr.push(Qi[bn])):bn===152?($r===0?(Mr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn)):(Mr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn)),wr.push(Di[bn]),wr.push(Qi[bn]),wr.push(Gi[bn])):bn===156?($r===4?(Mr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Jr=Kn(Xt,Nn,Bn)):(Mr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Jr=1-Kn(fn,Bn,Nn)),wr.push(Di[bn]),wr.push(Gi[bn]),wr.push(no[bn])):bn===137?($r===0?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),Qr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn)):(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),Qr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn)),wr.push(Di[bn]),wr.push(Ni[bn]),wr.push(Gi[bn])):bn===139?($r===4?(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Br=1-Kn(Xt,Gn,jn),Qr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn)):(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Br=Kn(fn,jn,Gn),Qr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn)),wr.push(Di[bn]),wr.push(Ni[bn]),wr.push(so[bn])):bn===98?($r===0?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),Rr=1-Kn(Xt,Bn,Nn)):(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),Rr=Kn(fn,Nn,Bn)),wr.push(Di[bn]),wr.push(Ni[bn]),wr.push(no[bn])):bn===99?($r===4?(Mr=1-Kn(Xt,Bn,Gn),Yr=1-Kn(fn,Bn,Gn),Dr=Kn(fn,jn,Gn),Br=Kn(Xt,jn,Gn),zr=Kn(Xt,jn,Nn),Rr=1-Kn(Xt,Bn,Nn)):(Mr=Kn(fn,Gn,Bn),Yr=Kn(Xt,Gn,Bn),Dr=1-Kn(Xt,Gn,jn),Br=1-Kn(fn,Gn,jn),zr=1-Kn(fn,Nn,jn),Rr=Kn(fn,Nn,Bn)),wr.push(Di[bn]),wr.push(Ni[bn]),wr.push(Gi[bn])):bn===38?($r===0?(Yr=1-Kn(Xt,Bn,Gn),Dr=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn)):(Yr=Kn(fn,Gn,Bn),Dr=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn)),wr.push(Ni[bn]),wr.push(so[bn]),wr.push(no[bn])):bn===39?($r===4?(Yr=1-Kn(Xt,Bn,Gn),Dr=Kn(Xt,jn,Gn),Qr=Kn(Xt,jn,Nn),zr=Kn(fn,jn,Nn),Rr=1-Kn(fn,Bn,Nn),Jr=1-Kn(Xt,Bn,Nn)):(Yr=Kn(fn,Gn,Bn),Dr=1-Kn(fn,Gn,jn),Qr=1-Kn(fn,Nn,jn),zr=1-Kn(Xt,Nn,jn),Rr=Kn(Xt,Nn,Bn),Jr=Kn(fn,Nn,Bn)),wr.push(Ni[bn]),wr.push(Qi[bn]),wr.push(no[bn])):bn===85&&(Mr=1,Yr=0,Dr=1,Br=0,Qr=0,zr=1,Rr=0,Jr=1),(Rr<0||Rr>1||Jr<0||Jr>1||Mr<0||Mr>1||Dr<0||Dr>1||Qr<0||Qr>1||zr<0||zr>1)&&console.log("MarchingSquaresJS-isoBands: "+bn+" "+Vr+" "+Nn+","+Bn+","+Gn+","+jn+" "+$r+" "+Rr+" "+Jr+" "+Mr+" "+Yr+" "+Dr+" "+Br+" "+Qr+" "+zr),Sn.cells[Dn][rr]={cval:bn,cval_real:Vr,flipped:$r,topleft:Rr,topright:Jr,righttop:Mr,rightbottom:Yr,bottomright:Dr,bottomleft:Br,leftbottom:Qr,lefttop:zr,edges:wr}}}}}return Sn}(vt,bt,wt);return Bc.polygons?(Bc.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),Gt=function(en){var Xt=[],sn=0;return en.cells.forEach(function(yn,vn){yn.forEach(function(Sn,fn){if(Sn!==void 0){var Dn=Ai[Sn.cval](Sn);typeof Dn=="object"&&Jm(Dn)?typeof Dn[0]=="object"&&Jm(Dn[0])?typeof Dn[0][0]=="object"&&Jm(Dn[0][0])?Dn.forEach(function(rr){rr.forEach(function(bn){bn[0]+=fn,bn[1]+=vn}),Xt[sn++]=rr}):(Dn.forEach(function(rr){rr[0]+=fn,rr[1]+=vn}),Xt[sn++]=Dn):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),Xt}(qt)):(Bc.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),Gt=function(en){for(var Xt=[],sn=en.rows,yn=en.cols,vn=[],Sn=0;Sn<sn;Sn++)for(var fn=0;fn<yn;fn++)if(en.cells[Sn][fn]!==void 0&&en.cells[Sn][fn].edges.length>0){var Dn=Sp(en.cells[Sn][fn]),rr=null,bn=fn,Nn=Sn;Dn!==null&&vn.push([Dn.p[0]+bn,Dn.p[1]+Nn]);do{if((rr=_v(en.cells[Nn][bn],Dn.x,Dn.y,Dn.o))===null)break;if(vn.push([rr.p[0]+bn,rr.p[1]+Nn]),bn+=rr.x,Dn=rr,(Nn+=rr.y)<0||Nn>=sn||bn<0||bn>=yn||en.cells[Nn][bn]===void 0){var Bn=vv(en,bn-=rr.x,Nn-=rr.y,rr.x,rr.y,rr.o);if(Bn===null)break;Bn.path.forEach(function(Gn){vn.push(Gn)}),bn=Bn.i,Nn=Bn.j,Dn=Bn}}while(en.cells[Nn][bn]!==void 0&&en.cells[Nn][bn].edges.length>0);Xt.push(vn),vn=[],en.cells[Sn][fn].edges.length>0&&fn--}return Xt}(qt)),typeof Bc.successCallback=="function"&&Bc.successCallback(Gt),Gt}var Ea=64,au=16,Lo=[],Xo=[],jo=[],Mo=[],No=[],Zo=[],Ko=[],Vo=[],Do=[],Jo=[],Qo=[],es=[],ts=[],co=[],Uo=[],Go=[],ns=[],ko=[],rs=[],is=[],os=[],Bo=[],ss=[],Wo=[];Ko[85]=Jo[85]=-1,Vo[85]=Qo[85]=0,Do[85]=es[85]=1,rs[85]=Bo[85]=1,is[85]=ss[85]=0,os[85]=Wo[85]=1,Lo[85]=Mo[85]=0,Xo[85]=No[85]=-1,jo[85]=Uo[85]=0,Go[85]=ts[85]=0,ns[85]=co[85]=1,Zo[85]=ko[85]=1,Bo[1]=Bo[169]=0,ss[1]=ss[169]=-1,Wo[1]=Wo[169]=0,ts[1]=ts[169]=-1,co[1]=co[169]=0,Uo[1]=Uo[169]=0,Jo[4]=Jo[166]=0,Qo[4]=Qo[166]=-1,es[4]=es[166]=1,Go[4]=Go[166]=1,ns[4]=ns[166]=0,ko[4]=ko[166]=0,Ko[16]=Ko[154]=0,Vo[16]=Vo[154]=1,Do[16]=Do[154]=1,Mo[16]=Mo[154]=1,No[16]=No[154]=0,Zo[16]=Zo[154]=1,rs[64]=rs[106]=0,is[64]=is[106]=1,os[64]=os[106]=0,Lo[64]=Lo[106]=-1,Xo[64]=Xo[106]=0,jo[64]=jo[106]=1,rs[2]=rs[168]=0,is[2]=is[168]=-1,os[2]=os[168]=1,Bo[2]=Bo[168]=0,ss[2]=ss[168]=-1,Wo[2]=Wo[168]=0,ts[2]=ts[168]=-1,co[2]=co[168]=0,Uo[2]=Uo[168]=0,Go[2]=Go[168]=-1,ns[2]=ns[168]=0,ko[2]=ko[168]=1,Ko[8]=Ko[162]=0,Vo[8]=Vo[162]=-1,Do[8]=Do[162]=0,Jo[8]=Jo[162]=0,Qo[8]=Qo[162]=-1,es[8]=es[162]=1,ts[8]=ts[162]=1,co[8]=co[162]=0,Uo[8]=Uo[162]=1,Go[8]=Go[162]=1,ns[8]=ns[162]=0,ko[8]=ko[162]=0,Ko[32]=Ko[138]=0,Vo[32]=Vo[138]=1,Do[32]=Do[138]=1,Jo[32]=Jo[138]=0,Qo[32]=Qo[138]=1,es[32]=es[138]=0,Lo[32]=Lo[138]=1,Xo[32]=Xo[138]=0,jo[32]=jo[138]=0,Mo[32]=Mo[138]=1,No[32]=No[138]=0,Zo[32]=Zo[138]=1,Bo[128]=Bo[42]=0,ss[128]=ss[42]=1,Wo[128]=Wo[42]=1,rs[128]=rs[42]=0,is[128]=is[42]=1,os[128]=os[42]=0,Lo[128]=Lo[42]=-1,Xo[128]=Xo[42]=0,jo[128]=jo[42]=1,Mo[128]=Mo[42]=-1,No[128]=No[42]=0,Zo[128]=Zo[42]=0,Jo[5]=Jo[165]=-1,Qo[5]=Qo[165]=0,es[5]=es[165]=0,Bo[5]=Bo[165]=1,ss[5]=ss[165]=0,Wo[5]=Wo[165]=0,Go[20]=Go[150]=0,ns[20]=ns[150]=1,ko[20]=ko[150]=1,Mo[20]=Mo[150]=0,No[20]=No[150]=-1,Zo[20]=Zo[150]=1,Ko[80]=Ko[90]=-1,Vo[80]=Vo[90]=0,Do[80]=Do[90]=1,rs[80]=rs[90]=1,is[80]=is[90]=0,os[80]=os[90]=1,ts[65]=ts[105]=0,co[65]=co[105]=1,Uo[65]=Uo[105]=0,Lo[65]=Lo[105]=0,Xo[65]=Xo[105]=-1,jo[65]=jo[105]=0,Ko[160]=Ko[10]=-1,Vo[160]=Vo[10]=0,Do[160]=Do[10]=1,Jo[160]=Jo[10]=-1,Qo[160]=Qo[10]=0,es[160]=es[10]=0,Bo[160]=Bo[10]=1,ss[160]=ss[10]=0,Wo[160]=Wo[10]=0,rs[160]=rs[10]=1,is[160]=is[10]=0,os[160]=os[10]=1,Go[130]=Go[40]=0,ns[130]=ns[40]=1,ko[130]=ko[40]=1,ts[130]=ts[40]=0,co[130]=co[40]=1,Uo[130]=Uo[40]=0,Lo[130]=Lo[40]=0,Xo[130]=Xo[40]=-1,jo[130]=jo[40]=0,Mo[130]=Mo[40]=0,No[130]=No[40]=-1,Zo[130]=Zo[40]=1,Jo[37]=Jo[133]=0,Qo[37]=Qo[133]=1,es[37]=es[133]=1,Bo[37]=Bo[133]=0,ss[37]=ss[133]=1,Wo[37]=Wo[133]=0,Lo[37]=Lo[133]=-1,Xo[37]=Xo[133]=0,jo[37]=jo[133]=0,Mo[37]=Mo[133]=1,No[37]=No[133]=0,Zo[37]=Zo[133]=0,Go[148]=Go[22]=-1,ns[148]=ns[22]=0,ko[148]=ko[22]=0,Bo[148]=Bo[22]=0,ss[148]=ss[22]=-1,Wo[148]=Wo[22]=1,rs[148]=rs[22]=0,is[148]=is[22]=1,os[148]=os[22]=1,Mo[148]=Mo[22]=-1,No[148]=No[22]=0,Zo[148]=Zo[22]=1,Ko[82]=Ko[88]=0,Vo[82]=Vo[88]=-1,Do[82]=Do[88]=1,Go[82]=Go[88]=1,ns[82]=ns[88]=0,ko[82]=ko[88]=1,ts[82]=ts[88]=-1,co[82]=co[88]=0,Uo[82]=Uo[88]=1,rs[82]=rs[88]=0,is[82]=is[88]=-1,os[82]=os[88]=0,Ko[73]=Ko[97]=0,Vo[73]=Vo[97]=1,Do[73]=Do[97]=0,Jo[73]=Jo[97]=0,Qo[73]=Qo[97]=-1,es[73]=es[97]=0,ts[73]=ts[97]=1,co[73]=co[97]=0,Uo[73]=Uo[97]=0,Lo[73]=Lo[97]=1,Xo[73]=Xo[97]=0,jo[73]=jo[97]=1,Ko[145]=Ko[25]=0,Vo[145]=Vo[25]=-1,Do[145]=Do[25]=0,ts[145]=ts[25]=1,co[145]=co[25]=0,Uo[145]=Uo[25]=1,Bo[145]=Bo[25]=0,ss[145]=ss[25]=1,Wo[145]=Wo[25]=1,Mo[145]=Mo[25]=-1,No[145]=No[25]=0,Zo[145]=Zo[25]=0,Jo[70]=Jo[100]=0,Qo[70]=Qo[100]=1,es[70]=es[100]=0,Go[70]=Go[100]=-1,ns[70]=ns[100]=0,ko[70]=ko[100]=1,rs[70]=rs[100]=0,is[70]=is[100]=-1,os[70]=os[100]=1,Lo[70]=Lo[100]=1,Xo[70]=Xo[100]=0,jo[70]=jo[100]=0,Jo[101]=Jo[69]=0,Qo[101]=Qo[69]=1,es[101]=es[69]=0,Lo[101]=Lo[69]=1,Xo[101]=Xo[69]=0,jo[101]=jo[69]=0,Bo[149]=Bo[21]=0,ss[149]=ss[21]=1,Wo[149]=Wo[21]=1,Mo[149]=Mo[21]=-1,No[149]=No[21]=0,Zo[149]=Zo[21]=0,Go[86]=Go[84]=-1,ns[86]=ns[84]=0,ko[86]=ko[84]=1,rs[86]=rs[84]=0,is[86]=is[84]=-1,os[86]=os[84]=1,Ko[89]=Ko[81]=0,Vo[89]=Vo[81]=-1,Do[89]=Do[81]=0,ts[89]=ts[81]=1,co[89]=co[81]=0,Uo[89]=Uo[81]=1,Ko[96]=Ko[74]=0,Vo[96]=Vo[74]=1,Do[96]=Do[74]=0,Jo[96]=Jo[74]=-1,Qo[96]=Qo[74]=0,es[96]=es[74]=1,rs[96]=rs[74]=1,is[96]=is[74]=0,os[96]=os[74]=0,Lo[96]=Lo[74]=1,Xo[96]=Xo[74]=0,jo[96]=jo[74]=1,Ko[24]=Ko[146]=0,Vo[24]=Vo[146]=-1,Do[24]=Do[146]=1,Go[24]=Go[146]=1,ns[24]=ns[146]=0,ko[24]=ko[146]=1,ts[24]=ts[146]=0,co[24]=co[146]=1,Uo[24]=Uo[146]=1,Mo[24]=Mo[146]=0,No[24]=No[146]=-1,Zo[24]=Zo[146]=0,Jo[6]=Jo[164]=-1,Qo[6]=Qo[164]=0,es[6]=es[164]=1,Go[6]=Go[164]=-1,ns[6]=ns[164]=0,ko[6]=ko[164]=0,Bo[6]=Bo[164]=0,ss[6]=ss[164]=-1,Wo[6]=Wo[164]=1,rs[6]=rs[164]=1,is[6]=is[164]=0,os[6]=os[164]=0,ts[129]=ts[41]=0,co[129]=co[41]=1,Uo[129]=Uo[41]=1,Bo[129]=Bo[41]=0,ss[129]=ss[41]=1,Wo[129]=Wo[41]=0,Lo[129]=Lo[41]=-1,Xo[129]=Xo[41]=0,jo[129]=jo[41]=0,Mo[129]=Mo[41]=0,No[129]=No[41]=-1,Zo[129]=Zo[41]=0,Go[66]=Go[104]=0,ns[66]=ns[104]=1,ko[66]=ko[104]=0,ts[66]=ts[104]=-1,co[66]=co[104]=0,Uo[66]=Uo[104]=1,rs[66]=rs[104]=0,is[66]=is[104]=-1,os[66]=os[104]=0,Lo[66]=Lo[104]=0,Xo[66]=Xo[104]=-1,jo[66]=jo[104]=1,Ko[144]=Ko[26]=-1,Vo[144]=Vo[26]=0,Do[144]=Do[26]=0,Bo[144]=Bo[26]=1,ss[144]=ss[26]=0,Wo[144]=Wo[26]=1,rs[144]=rs[26]=0,is[144]=is[26]=1,os[144]=os[26]=1,Mo[144]=Mo[26]=-1,No[144]=No[26]=0,Zo[144]=Zo[26]=1,Jo[36]=Jo[134]=0,Qo[36]=Qo[134]=1,es[36]=es[134]=1,Go[36]=Go[134]=0,ns[36]=ns[134]=1,ko[36]=ko[134]=0,Lo[36]=Lo[134]=0,Xo[36]=Xo[134]=-1,jo[36]=jo[134]=1,Mo[36]=Mo[134]=1,No[36]=No[134]=0,Zo[36]=Zo[134]=0,Ko[9]=Ko[161]=-1,Vo[9]=Vo[161]=0,Do[9]=Do[161]=0,Jo[9]=Jo[161]=0,Qo[9]=Qo[161]=-1,es[9]=es[161]=0,ts[9]=ts[161]=1,co[9]=co[161]=0,Uo[9]=Uo[161]=0,Bo[9]=Bo[161]=1,ss[9]=ss[161]=0,Wo[9]=Wo[161]=1,Ko[136]=0,Vo[136]=1,Do[136]=1,Jo[136]=0,Qo[136]=1,es[136]=0,Go[136]=-1,ns[136]=0,ko[136]=1,ts[136]=-1,co[136]=0,Uo[136]=0,Bo[136]=0,ss[136]=-1,Wo[136]=0,rs[136]=0,is[136]=-1,os[136]=1,Lo[136]=1,Xo[136]=0,jo[136]=0,Mo[136]=1,No[136]=0,Zo[136]=1,Ko[34]=0,Vo[34]=-1,Do[34]=0,Jo[34]=0,Qo[34]=-1,es[34]=1,Go[34]=1,ns[34]=0,ko[34]=0,ts[34]=1,co[34]=0,Uo[34]=1,Bo[34]=0,ss[34]=1,Wo[34]=1,rs[34]=0,is[34]=1,os[34]=0,Lo[34]=-1,Xo[34]=0,jo[34]=1,Mo[34]=-1,No[34]=0,Zo[34]=0,Ko[35]=0,Vo[35]=1,Do[35]=1,Jo[35]=0,Qo[35]=-1,es[35]=1,Go[35]=1,ns[35]=0,ko[35]=0,ts[35]=-1,co[35]=0,Uo[35]=0,Bo[35]=0,ss[35]=-1,Wo[35]=0,rs[35]=0,is[35]=1,os[35]=0,Lo[35]=-1,Xo[35]=0,jo[35]=1,Mo[35]=1,No[35]=0,Zo[35]=1,Ko[153]=0,Vo[153]=1,Do[153]=1,ts[153]=-1,co[153]=0,Uo[153]=0,Bo[153]=0,ss[153]=-1,Wo[153]=0,Mo[153]=1,No[153]=0,Zo[153]=1,Jo[102]=0,Qo[102]=-1,es[102]=1,Go[102]=1,ns[102]=0,ko[102]=0,rs[102]=0,is[102]=1,os[102]=0,Lo[102]=-1,Xo[102]=0,jo[102]=1,Ko[155]=0,Vo[155]=-1,Do[155]=0,ts[155]=1,co[155]=0,Uo[155]=1,Bo[155]=0,ss[155]=1,Wo[155]=1,Mo[155]=-1,No[155]=0,Zo[155]=0,Jo[103]=0,Qo[103]=1,es[103]=0,Go[103]=-1,ns[103]=0,ko[103]=1,rs[103]=0,is[103]=-1,os[103]=1,Lo[103]=1,Xo[103]=0,jo[103]=0,Ko[152]=0,Vo[152]=1,Do[152]=1,Go[152]=-1,ns[152]=0,ko[152]=1,ts[152]=-1,co[152]=0,Uo[152]=0,Bo[152]=0,ss[152]=-1,Wo[152]=0,rs[152]=0,is[152]=-1,os[152]=1,Mo[152]=1,No[152]=0,Zo[152]=1,Ko[156]=0,Vo[156]=-1,Do[156]=1,Go[156]=1,ns[156]=0,ko[156]=1,ts[156]=-1,co[156]=0,Uo[156]=0,Bo[156]=0,ss[156]=-1,Wo[156]=0,rs[156]=0,is[156]=1,os[156]=1,Mo[156]=-1,No[156]=0,Zo[156]=1,Ko[137]=0,Vo[137]=1,Do[137]=1,Jo[137]=0,Qo[137]=1,es[137]=0,ts[137]=-1,co[137]=0,Uo[137]=0,Bo[137]=0,ss[137]=-1,Wo[137]=0,Lo[137]=1,Xo[137]=0,jo[137]=0,Mo[137]=1,No[137]=0,Zo[137]=1,Ko[139]=0,Vo[139]=1,Do[139]=1,Jo[139]=0,Qo[139]=-1,es[139]=0,ts[139]=1,co[139]=0,Uo[139]=0,Bo[139]=0,ss[139]=1,Wo[139]=0,Lo[139]=-1,Xo[139]=0,jo[139]=0,Mo[139]=1,No[139]=0,Zo[139]=1,Ko[98]=0,Vo[98]=-1,Do[98]=0,Jo[98]=0,Qo[98]=-1,es[98]=1,Go[98]=1,ns[98]=0,ko[98]=0,ts[98]=1,co[98]=0,Uo[98]=1,rs[98]=0,is[98]=1,os[98]=0,Lo[98]=-1,Xo[98]=0,jo[98]=1,Ko[99]=0,Vo[99]=1,Do[99]=0,Jo[99]=0,Qo[99]=-1,es[99]=1,Go[99]=1,ns[99]=0,ko[99]=0,ts[99]=-1,co[99]=0,Uo[99]=1,rs[99]=0,is[99]=-1,os[99]=0,Lo[99]=1,Xo[99]=0,jo[99]=1,Jo[38]=0,Qo[38]=-1,es[38]=1,Go[38]=1,ns[38]=0,ko[38]=0,Bo[38]=0,ss[38]=1,Wo[38]=1,rs[38]=0,is[38]=1,os[38]=0,Lo[38]=-1,Xo[38]=0,jo[38]=1,Mo[38]=-1,No[38]=0,Zo[38]=0,Jo[39]=0,Qo[39]=1,es[39]=1,Go[39]=-1,ns[39]=0,ko[39]=0,Bo[39]=0,ss[39]=-1,Wo[39]=1,rs[39]=0,is[39]=1,os[39]=0,Lo[39]=-1,Xo[39]=0,jo[39]=1,Mo[39]=1,No[39]=0,Zo[39]=0;var Gm=function(vt){return[[vt.bottomleft,0],[0,0],[0,vt.leftbottom]]},Wm=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0]]},Rg=function(vt){return[[vt.topright,1],[1,1],[1,vt.righttop]]},qm=function(vt){return[[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ym=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop]]},Xm=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[1,vt.righttop],[1,vt.rightbottom]]},Zm=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.topleft,1],[vt.topright,1]]},Km=function(vt){return[[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]},Di=[],Ni=[],Qi=[],Gi=[],so=[],no=[],as=[],qo=[];Gi[1]=so[1]=18,Gi[169]=so[169]=18,Qi[4]=Ni[4]=12,Qi[166]=Ni[166]=12,Di[16]=qo[16]=4,Di[154]=qo[154]=4,no[64]=as[64]=22,no[106]=as[106]=22,Qi[2]=no[2]=17,Gi[2]=so[2]=18,Qi[168]=no[168]=17,Gi[168]=so[168]=18,Di[8]=Gi[8]=9,Ni[8]=Qi[8]=12,Di[162]=Gi[162]=9,Ni[162]=Qi[162]=12,Di[32]=qo[32]=4,Ni[32]=as[32]=1,Di[138]=qo[138]=4,Ni[138]=as[138]=1,so[128]=qo[128]=21,no[128]=as[128]=22,so[42]=qo[42]=21,no[42]=as[42]=22,Ni[5]=so[5]=14,Ni[165]=so[165]=14,Qi[20]=qo[20]=6,Qi[150]=qo[150]=6,Di[80]=no[80]=11,Di[90]=no[90]=11,Gi[65]=as[65]=3,Gi[105]=as[105]=3,Di[160]=no[160]=11,Ni[160]=so[160]=14,Di[10]=no[10]=11,Ni[10]=so[10]=14,Qi[130]=qo[130]=6,Gi[130]=as[130]=3,Qi[40]=qo[40]=6,Gi[40]=as[40]=3,Ni[101]=as[101]=1,Ni[69]=as[69]=1,so[149]=qo[149]=21,so[21]=qo[21]=21,Qi[86]=no[86]=17,Qi[84]=no[84]=17,Di[89]=Gi[89]=9,Di[81]=Gi[81]=9,Di[96]=as[96]=0,Ni[96]=no[96]=15,Di[74]=as[74]=0,Ni[74]=no[74]=15,Di[24]=Qi[24]=8,Gi[24]=qo[24]=7,Di[146]=Qi[146]=8,Gi[146]=qo[146]=7,Ni[6]=no[6]=15,Qi[6]=so[6]=16,Ni[164]=no[164]=15,Qi[164]=so[164]=16,Gi[129]=qo[129]=7,so[129]=as[129]=20,Gi[41]=qo[41]=7,so[41]=as[41]=20,Qi[66]=as[66]=2,Gi[66]=no[66]=19,Qi[104]=as[104]=2,Gi[104]=no[104]=19,Di[144]=so[144]=10,no[144]=qo[144]=23,Di[26]=so[26]=10,no[26]=qo[26]=23,Ni[36]=qo[36]=5,Qi[36]=as[36]=2,Ni[134]=qo[134]=5,Qi[134]=as[134]=2,Di[9]=so[9]=10,Ni[9]=Gi[9]=13,Di[161]=so[161]=10,Ni[161]=Gi[161]=13,Ni[37]=qo[37]=5,so[37]=as[37]=20,Ni[133]=qo[133]=5,so[133]=as[133]=20,Qi[148]=so[148]=16,no[148]=qo[148]=23,Qi[22]=so[22]=16,no[22]=qo[22]=23,Di[82]=Qi[82]=8,Gi[82]=no[82]=19,Di[88]=Qi[88]=8,Gi[88]=no[88]=19,Di[73]=as[73]=0,Ni[73]=Gi[73]=13,Di[97]=as[97]=0,Ni[97]=Gi[97]=13,Di[145]=Gi[145]=9,so[145]=qo[145]=21,Di[25]=Gi[25]=9,so[25]=qo[25]=21,Ni[70]=as[70]=1,Qi[70]=no[70]=17,Ni[100]=as[100]=1,Qi[100]=no[100]=17,Di[34]=Gi[34]=9,Ni[34]=Qi[34]=12,so[34]=qo[34]=21,no[34]=as[34]=22,Di[136]=qo[136]=4,Ni[136]=as[136]=1,Qi[136]=no[136]=17,Gi[136]=so[136]=18,Di[35]=qo[35]=4,Ni[35]=Qi[35]=12,Gi[35]=so[35]=18,no[35]=as[35]=22,Di[153]=qo[153]=4,Gi[153]=so[153]=18,Ni[102]=Qi[102]=12,no[102]=as[102]=22,Di[155]=Gi[155]=9,so[155]=qo[155]=23,Ni[103]=as[103]=1,Qi[103]=no[103]=17,Di[152]=qo[152]=4,Qi[152]=no[152]=17,Gi[152]=so[152]=18,Di[156]=Qi[156]=8,Gi[156]=so[156]=18,no[156]=qo[156]=23,Di[137]=qo[137]=4,Ni[137]=as[137]=1,Gi[137]=so[137]=18,Di[139]=qo[139]=4,Ni[139]=Gi[139]=13,so[139]=as[139]=20,Di[98]=Gi[98]=9,Ni[98]=Qi[98]=12,no[98]=as[98]=22,Di[99]=as[99]=0,Ni[99]=Qi[99]=12,Gi[99]=no[99]=19,Ni[38]=Qi[38]=12,so[38]=qo[38]=21,no[38]=as[38]=22,Ni[39]=qo[39]=5,Qi[39]=so[39]=16,no[39]=as[39]=22;var Ai=[];function Kn(vt,bt,wt){return(vt-bt)/(wt-bt)}function Jm(vt){return vt.constructor.toString().indexOf("Array")>-1}function vv(vt,bt,wt,Tt,At,Ot){for(var Dt=vt.cells[wt][bt],jt=Dt.cval_real,Gt=bt+Tt,qt=wt+At,en=[],Xt=!1;!Xt;){if(vt.cells[qt]===void 0||vt.cells[qt][Gt]===void 0)if(qt-=At,Gt-=Tt,jt=(Dt=vt.cells[qt][Gt]).cval_real,At===-1)if(Ot===0)if(1&jt)en.push([Gt,qt]),Tt=-1,At=0,Ot=0;else{if(!(4&jt)){en.push([Gt+Dt.bottomright,qt]),Tt=0,At=1,Ot=1,Xt=!0;break}en.push([Gt+1,qt]),Tt=1,At=0,Ot=0}else{if(!(1&jt)){if(4&jt){en.push([Gt+Dt.bottomright,qt]),Tt=0,At=1,Ot=1,Xt=!0;break}en.push([Gt+Dt.bottomleft,qt]),Tt=0,At=1,Ot=0,Xt=!0;break}en.push([Gt,qt]),Tt=-1,At=0,Ot=0}else if(At===1)if(Ot===0){if(!(jt&au)){if(jt&Ea){en.push([Gt+Dt.topleft,qt+1]),Tt=0,At=-1,Ot=0,Xt=!0;break}en.push([Gt+Dt.topright,qt+1]),Tt=0,At=-1,Ot=1,Xt=!0;break}en.push([Gt+1,qt+1]),Tt=1,At=0,Ot=1}else en.push([Gt+1,qt+1]),Tt=1,At=0,Ot=1;else if(Tt===-1)if(Ot===0){if(!(jt&Ea)){if(1&jt){en.push([Gt,qt+Dt.leftbottom]),Tt=1,At=0,Ot=0,Xt=!0;break}en.push([Gt,qt+Dt.lefttop]),Tt=1,At=0,Ot=1,Xt=!0;break}en.push([Gt,qt+1]),Tt=0,At=1,Ot=0}else{if(!(jt&Ea)){console.log("MarchingSquaresJS-isoBands: wtf");break}en.push([Gt,qt+1]),Tt=0,At=1,Ot=0}else{if(Tt!==1){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(Ot===0){if(!(4&jt)){en.push([Gt+1,qt+Dt.rightbottom]),Tt=-1,At=0,Ot=0,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Ot=1}else{if(!(4&jt)){if(jt&au){en.push([Gt+1,qt+Dt.righttop]),Tt=-1,At=0,Ot=1;break}en.push([Gt+1,qt+Dt.rightbottom]),Tt=-1,At=0,Ot=0,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Ot=1}}else if(jt=(Dt=vt.cells[qt][Gt]).cval_real,Tt===-1)if(Ot===0)if(vt.cells[qt-1]!==void 0&&vt.cells[qt-1][Gt]!==void 0)Tt=0,At=-1,Ot=1;else{if(!(1&jt)){en.push([Gt+Dt.bottomright,qt]),Tt=0,At=1,Ot=1,Xt=!0;break}en.push([Gt,qt])}else{if(!(jt&Ea)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+Gt+","+qt);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(Tt===1){if(Ot===0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt+1]!==void 0&&vt.cells[qt+1][Gt]!==void 0)Tt=0,At=1,Ot=0;else{if(!(jt&au)){en.push([Gt+Dt.topleft,qt+1]),Tt=0,At=-1,Ot=0,Xt=!0;break}en.push([Gt+1,qt+1]),Tt=1,At=0,Ot=1}}else if(At===-1){if(Ot!==1){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt][Gt+1]!==void 0)Tt=1,At=0,Ot=1;else{if(!(4&jt)){en.push([Gt+1,qt+Dt.righttop]),Tt=-1,At=0,Ot=1,Xt=!0;break}en.push([Gt+1,qt]),Tt=0,At=-1,Ot=1}}else{if(At!==1){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(Ot!==0){console.log("MarchingSquaresJS-isoBands: wtf");break}if(vt.cells[qt][Gt-1]!==void 0)Tt=-1,At=0,Ot=0;else{if(!(jt&Ea)){en.push([Gt,qt+Dt.leftbottom]),Tt=1,At=0,Ot=0,Xt=!0;break}en.push([Gt,qt+1]),Tt=0,At=1,Ot=0}}if(qt+=At,(Gt+=Tt)===bt&&qt===wt)break}return{path:en,i:Gt,j:qt,x:Tt,y:At,o:Ot}}function Sp(vt){if(vt.edges.length>0){var bt=vt.edges[vt.edges.length-1],wt=vt.cval_real;switch(bt){case 0:return wt&au?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.topleft,1],x:0,y:-1,o:0};case 1:return 4&wt?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 2:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[vt.topleft,1],x:0,y:-1,o:0};case 3:return 1&wt?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 4:return wt&au?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};case 5:return 4&wt?{p:[vt.topright,1],x:0,y:-1,o:1}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 6:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};case 7:return 1&wt?{p:[vt.topright,1],x:0,y:-1,o:1}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 8:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[1,vt.righttop],x:-1,y:0,o:1};case 9:return 1&wt?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 10:return 1&wt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[1,vt.righttop],x:-1,y:0,o:1};case 11:return wt&Ea?{p:[1,vt.righttop],x:-1,y:0,o:1}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 12:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 13:return 1&wt?{p:[1,vt.rightbottom],x:-1,y:0,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 14:return 1&wt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[1,vt.rightbottom],x:-1,y:0,o:0};case 15:return wt&Ea?{p:[1,vt.rightbottom],x:-1,y:0,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 16:return 4&wt?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[0,vt.leftbottom],x:1,y:0,o:0};case 17:return wt&Ea?{p:[vt.bottomright,0],x:0,y:1,o:1}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 18:return 1&wt?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[vt.bottomleft,0],x:0,y:1,o:0};case 19:return wt&Ea?{p:[vt.bottomleft,0],x:0,y:1,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 20:return wt&Ea?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[0,vt.leftbottom],x:1,y:0,o:0};case 21:return wt&au?{p:[0,vt.leftbottom],x:1,y:0,o:0}:{p:[vt.topright,1],x:0,y:-1,o:1};case 22:return wt&Ea?{p:[vt.topleft,1],x:0,y:-1,o:0}:{p:[0,vt.lefttop],x:1,y:0,o:1};case 23:return wt&au?{p:[0,vt.lefttop],x:1,y:0,o:1}:{p:[vt.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(vt)}}return null}function _v(vt,bt,wt,Tt){var At,Ot,Dt,jt,Gt,qt=vt.cval;switch(bt){case-1:switch(Tt){case 0:At=Ni[qt],Dt=Jo[qt],jt=Qo[qt],Gt=es[qt];break;default:At=Di[qt],Dt=Ko[qt],jt=Vo[qt],Gt=Do[qt]}break;case 1:switch(Tt){case 0:At=so[qt],Dt=Bo[qt],jt=ss[qt],Gt=Wo[qt];break;default:At=no[qt],Dt=rs[qt],jt=is[qt],Gt=os[qt]}break;default:switch(wt){case-1:switch(Tt){case 0:At=as[qt],Dt=Lo[qt],jt=Xo[qt],Gt=jo[qt];break;default:At=qo[qt],Dt=Mo[qt],jt=No[qt],Gt=Zo[qt]}break;case 1:switch(Tt){case 0:At=Gi[qt],Dt=ts[qt],jt=co[qt],Gt=Uo[qt];break;default:At=Qi[qt],Dt=Go[qt],jt=ns[qt],Gt=ko[qt]}}}if(Ot=vt.edges.indexOf(At),vt.edges[Ot]===void 0)return null;switch(function(en,Xt){delete en.edges[Xt];for(var sn=Xt+1;sn<en.edges.length;sn++)en.edges[sn-1]=en.edges[sn];en.edges.pop()}(vt,Ot),qt=vt.cval_real,At){case 0:qt&au?(bt=vt.topleft,wt=1):(bt=1,wt=vt.righttop);break;case 1:4&qt?(bt=1,wt=vt.rightbottom):(bt=vt.topleft,wt=1);break;case 2:4&qt?(bt=vt.topleft,wt=1):(bt=vt.bottomright,wt=0);break;case 3:1&qt?(bt=vt.bottomleft,wt=0):(bt=vt.topleft,wt=1);break;case 4:qt&au?(bt=vt.topright,wt=1):(bt=1,wt=vt.righttop);break;case 5:4&qt?(bt=1,wt=vt.rightbottom):(bt=vt.topright,wt=1);break;case 6:4&qt?(bt=vt.topright,wt=1):(bt=vt.bottomright,wt=0);break;case 7:1&qt?(bt=vt.bottomleft,wt=0):(bt=vt.topright,wt=1);break;case 8:4&qt?(bt=1,wt=vt.righttop):(bt=vt.bottomright,wt=0);break;case 9:1&qt?(bt=vt.bottomleft,wt=0):(bt=1,wt=vt.righttop);break;case 10:1&qt?(bt=1,wt=vt.righttop):(bt=0,wt=vt.leftbottom);break;case 11:qt&Ea?(bt=0,wt=vt.lefttop):(bt=1,wt=vt.righttop);break;case 12:4&qt?(bt=1,wt=vt.rightbottom):(bt=vt.bottomright,wt=0);break;case 13:1&qt?(bt=vt.bottomleft,wt=0):(bt=1,wt=vt.rightbottom);break;case 14:1&qt?(bt=1,wt=vt.rightbottom):(bt=0,wt=vt.leftbottom);break;case 15:qt&Ea?(bt=0,wt=vt.lefttop):(bt=1,wt=vt.rightbottom);break;case 16:4&qt?(bt=0,wt=vt.leftbottom):(bt=vt.bottomright,wt=0);break;case 17:qt&Ea?(bt=0,wt=vt.lefttop):(bt=vt.bottomright,wt=0);break;case 18:1&qt?(bt=vt.bottomleft,wt=0):(bt=0,wt=vt.leftbottom);break;case 19:qt&Ea?(bt=0,wt=vt.lefttop):(bt=vt.bottomleft,wt=0);break;case 20:qt&Ea?(bt=0,wt=vt.leftbottom):(bt=vt.topleft,wt=1);break;case 21:qt&au?(bt=vt.topright,wt=1):(bt=0,wt=vt.leftbottom);break;case 22:qt&Ea?(bt=0,wt=vt.lefttop):(bt=vt.topleft,wt=1);break;case 23:qt&au?(bt=vt.topright,wt=1):(bt=0,wt=vt.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(vt),null}return bt!==void 0&&wt!==void 0&&Dt!==void 0&&jt!==void 0&&Gt!==void 0||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(vt),console.log(bt+" "+wt+" "+Dt+" "+jt+" "+Gt)),{p:[bt,wt],x:Dt,y:jt,o:Gt}}function Cp(vt){var bt=[],wt=[];vt.forEach(function(At){var Ot=Bh(It([At]));wt.push(Ot),bt.push({ring:At,area:Ot})}),wt.sort(function(At,Ot){return Ot-At});var Tt=[];return wt.forEach(function(At){for(var Ot=0;Ot<bt.length;Ot++)if(bt[Ot].area===At){Tt.push(bt[Ot].ring),bt.splice(Ot,1);break}}),Tt}function bv(vt){for(var bt=vt.map(function(jt){return{lrCoordinates:jt,grouped:!1}}),wt=[];!xv(bt);)for(var Tt=0;Tt<bt.length;Tt++)if(!bt[Tt].grouped){var At=[];At.push(bt[Tt].lrCoordinates),bt[Tt].grouped=!0;for(var Ot=It([bt[Tt].lrCoordinates]),Dt=Tt+1;Dt<bt.length;Dt++)bt[Dt].grouped||m1(It([bt[Dt].lrCoordinates]),Ot)&&(At.push(bt[Dt].lrCoordinates),bt[Dt].grouped=!0);wt.push(At)}return wt}function m1(vt,bt){for(var wt=pd(vt),Tt=0;Tt<wt.features.length;Tt++)if(!oo(wt.features[Tt],bt))return!1;return!0}function xv(vt){for(var bt=0;bt<vt.length;bt++)if(vt[bt].grouped===!1)return!1;return!0}function y1(vt,bt,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.pivot,At=wt.mutate;if(!vt)throw new Error("geojson is required");if(bt==null||isNaN(bt))throw new Error("angle is required");return bt===0||(Tt||(Tt=dc(vt)),At!==!1&&At!==void 0||(vt=$o(vt)),dn(vt,function(Ot){var Dt=sh(Tt,Ot)+bt,jt=Tu(Tt,Ot),Gt=Rn(bf(Tt,jt,Dt));Ot[0]=Gt[0],Ot[1]=Gt[1]})),vt}function v1(vt,bt,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.origin,At=wt.mutate;if(!vt)throw new Error("geojson required");if(typeof bt!="number"||bt===0)throw new Error("invalid factor");var Ot=Array.isArray(Tt)||typeof Tt=="object";return At!==!0&&(vt=$o(vt)),vt.type!=="FeatureCollection"||Ot?_1(vt,bt,Tt):(Jn(vt,function(Dt,jt){vt.features[jt]=_1(Dt,bt,Tt)}),vt)}function _1(vt,bt,wt){var Tt=nr(vt)==="Point";return wt=function(At,Ot){if(Ot==null&&(Ot="centroid"),Array.isArray(Ot)||typeof Ot=="object")return pn(Ot);var Dt=At.bbox?At.bbox:un(At),jt=Dt[0],Gt=Dt[1],qt=Dt[2],en=Dt[3];switch(Ot){case"sw":case"southwest":case"westsouth":case"bottomleft":return kt([jt,Gt]);case"se":case"southeast":case"eastsouth":case"bottomright":return kt([qt,Gt]);case"nw":case"northwest":case"westnorth":case"topleft":return kt([jt,en]);case"ne":case"northeast":case"eastnorth":case"topright":return kt([qt,en]);case"center":return hc(At);case void 0:case null:case"centroid":return dc(At);default:throw new Error("invalid origin")}}(vt,wt),bt===1||Tt||dn(vt,function(At){var Ot=Tu(wt,At),Dt=sh(wt,At),jt=Rn(bf(wt,Ot*bt,Dt));At[0]=jt[0],At[1]=jt[1],At.length===3&&(At[2]*=bt)}),vt}function xf(vt){var bt=vt[0],wt=vt[1];return[wt[0]-bt[0],wt[1]-bt[1]]}function Tp(vt,bt){return vt[0]*bt[1]-bt[0]*vt[1]}function Qm(vt,bt){return!function(wt,Tt){return Tp(xf(wt),xf(Tt))===0}(vt,bt)&&function(wt,Tt){var At,Ot,Dt=wt[0],jt=xf(wt),Gt=Tt[0],qt=xf(Tt),en=Tp(jt,qt);return function(Xt,sn){return[Xt[0]+sn[0],Xt[1]+sn[1]]}(Dt,function(Xt,sn){return[Xt*sn[0],Xt*sn[1]]}(Tp((Ot=Dt,[(At=Gt)[0]-Ot[0],At[1]-Ot[1]]),qt)/en,jt))}(vt,bt)}function wf(vt,bt,wt){var Tt=[],At=ln(bt,wt),Ot=Rn(vt),Dt=[];return Ot.forEach(function(jt,Gt){if(Gt!==Ot.length-1){var qt=(sn=jt,yn=Ot[Gt+1],vn=At,Sn=Math.sqrt((sn[0]-yn[0])*(sn[0]-yn[0])+(sn[1]-yn[1])*(sn[1]-yn[1])),fn=sn[0]+vn*(yn[1]-sn[1])/Sn,Dn=yn[0]+vn*(yn[1]-sn[1])/Sn,rr=sn[1]+vn*(sn[0]-yn[0])/Sn,bn=yn[1]+vn*(sn[0]-yn[0])/Sn,[[fn,rr],[Dn,bn]]);if(Tt.push(qt),Gt>0){var en=Tt[Gt-1],Xt=Qm(qt,en);Xt!==!1&&(en[1]=Xt,qt[0]=Xt),Dt.push(en[0]),Gt===Ot.length-2&&(Dt.push(qt[0]),Dt.push(qt[1]))}Ot.length===2&&(Dt.push(qt[0]),Dt.push(qt[1]))}var sn,yn,vn,Sn,fn,Dn,rr,bn}),Nt(Dt,vt.properties)}function e0(vt,bt,wt){var Tt=bt[0]-vt[0],At=bt[1]-vt[1],Ot=wt[0]-bt[0];return function(Dt){return(Dt>0)-(Dt<0)||+Dt}(Tt*(wt[1]-bt[1])-Ot*At)}function n0(vt,bt){return bt.geometry.coordinates[0].every(function(wt){return oo(kt(wt),vt)})}Ai[1]=Ai[169]=Gm,Ai[4]=Ai[166]=Wm,Ai[16]=Ai[154]=Rg,Ai[64]=Ai[106]=qm,Ai[168]=Ai[2]=Ym,Ai[162]=Ai[8]=Xm,Ai[138]=Ai[32]=Zm,Ai[42]=Ai[128]=Km,Ai[5]=Ai[165]=function(vt){return[[0,0],[0,vt.leftbottom],[1,vt.rightbottom],[1,0]]},Ai[20]=Ai[150]=function(vt){return[[1,0],[vt.bottomright,0],[vt.topright,1],[1,1]]},Ai[80]=Ai[90]=function(vt){return[[1,1],[1,vt.righttop],[0,vt.lefttop],[0,1]]},Ai[65]=Ai[105]=function(vt){return[[vt.bottomleft,0],[0,0],[0,1],[vt.topleft,1]]},Ai[160]=Ai[10]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[0,vt.leftbottom],[0,vt.lefttop]]},Ai[130]=Ai[40]=function(vt){return[[vt.topleft,1],[vt.topright,1],[vt.bottomright,0],[vt.bottomleft,0]]},Ai[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ai[101]=Ai[69]=function(vt){return[[1,vt.rightbottom],[1,0],[0,0],[0,1],[vt.topleft,1]]},Ai[149]=Ai[21]=function(vt){return[[vt.topright,1],[1,1],[1,0],[0,0],[0,vt.leftbottom]]},Ai[86]=Ai[84]=function(vt){return[[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[1,1]]},Ai[89]=Ai[81]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,1]]},Ai[96]=Ai[74]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ai[24]=Ai[146]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[vt.topright,1]]},Ai[6]=Ai[164]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop]]},Ai[129]=Ai[41]=function(vt){return[[vt.topright,1],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topleft,1]]},Ai[66]=Ai[104]=function(vt){return[[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ai[144]=Ai[26]=function(vt){return[[1,1],[1,vt.righttop],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Ai[36]=Ai[134]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[vt.topleft,1],[vt.topright,1]]},Ai[9]=Ai[161]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,vt.leftbottom]]},Ai[37]=Ai[133]=function(vt){return[[1,vt.rightbottom],[1,0],[0,0],[0,vt.leftbottom],[vt.topleft,1],[vt.topright,1]]},Ai[148]=Ai[22]=function(vt){return[[1,1],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Ai[82]=Ai[88]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1]]},Ai[73]=Ai[97]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,1],[vt.topleft,1]]},Ai[145]=Ai[25]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topright,1]]},Ai[70]=Ai[100]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ai[34]=function(vt){return[Km(vt),Xm(vt)]},Ai[35]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]},Ai[136]=function(vt){return[Zm(vt),Ym(vt)]},Ai[153]=function(vt){return[Rg(vt),Gm(vt)]},Ai[102]=function(vt){return[Wm(vt),qm(vt)]},Ai[155]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topright,1]]},Ai[103]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ai[152]=function(vt){return[Rg(vt),Ym(vt)]},Ai[156]=function(vt){return[[1,1],[1,vt.righttop],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topright,1]]},Ai[137]=function(vt){return[Zm(vt),Gm(vt)]},Ai[139]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomleft,0],[0,0],[0,vt.leftbottom],[vt.topleft,1],[vt.topright,1]]},Ai[98]=function(vt){return[Xm(vt),qm(vt)]},Ai[99]=function(vt){return[[1,vt.righttop],[1,vt.rightbottom],[vt.bottomright,0],[vt.bottomleft,0],[0,vt.lefttop],[0,1],[vt.topleft,1]]},Ai[38]=function(vt){return[Wm(vt),Km(vt)]},Ai[39]=function(vt){return[[1,vt.rightbottom],[1,0],[vt.bottomright,0],[0,vt.leftbottom],[0,vt.lefttop],[vt.topleft,1],[vt.topright,1]]};var Mg=function(){function vt(bt){this.id=vt.buildId(bt),this.coordinates=bt,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return vt.buildId=function(bt){return bt.join(",")},vt.prototype.removeInnerEdge=function(bt){this.innerEdges=this.innerEdges.filter(function(wt){return wt.from.id!==bt.from.id})},vt.prototype.removeOuterEdge=function(bt){this.outerEdges=this.outerEdges.filter(function(wt){return wt.to.id!==bt.to.id})},vt.prototype.addOuterEdge=function(bt){this.outerEdges.push(bt),this.outerEdgesSorted=!1},vt.prototype.sortOuterEdges=function(){var bt=this;this.outerEdgesSorted||(this.outerEdges.sort(function(wt,Tt){var At=wt.to,Ot=Tt.to;if(At.coordinates[0]-bt.coordinates[0]>=0&&Ot.coordinates[0]-bt.coordinates[0]<0)return 1;if(At.coordinates[0]-bt.coordinates[0]<0&&Ot.coordinates[0]-bt.coordinates[0]>=0)return-1;if(At.coordinates[0]-bt.coordinates[0]==0&&Ot.coordinates[0]-bt.coordinates[0]==0)return At.coordinates[1]-bt.coordinates[1]>=0||Ot.coordinates[1]-bt.coordinates[1]>=0?At.coordinates[1]-Ot.coordinates[1]:Ot.coordinates[1]-At.coordinates[1];var Dt=e0(bt.coordinates,At.coordinates,Ot.coordinates);return Dt<0?1:Dt>0?-1:Math.pow(At.coordinates[0]-bt.coordinates[0],2)+Math.pow(At.coordinates[1]-bt.coordinates[1],2)-(Math.pow(Ot.coordinates[0]-bt.coordinates[0],2)+Math.pow(Ot.coordinates[1]-bt.coordinates[1],2))}),this.outerEdgesSorted=!0)},vt.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},vt.prototype.getOuterEdge=function(bt){return this.sortOuterEdges(),this.outerEdges[bt]},vt.prototype.addInnerEdge=function(bt){this.innerEdges.push(bt)},vt}(),r0=function(){function vt(bt,wt){this.from=bt,this.to=wt,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return vt.prototype.getSymetric=function(){return this.symetric||(this.symetric=new vt(this.to,this.from),this.symetric.symetric=this),this.symetric},vt.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},vt.prototype.isEqual=function(bt){return this.from.id===bt.from.id&&this.to.id===bt.to.id},vt.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},vt.prototype.toLineString=function(){return Nt([this.from.coordinates,this.to.coordinates])},vt.prototype.compareTo=function(bt){return e0(bt.from.coordinates,bt.to.coordinates,this.to.coordinates)},vt}(),dl=function(){function vt(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return vt.prototype.push=function(bt){this.edges.push(bt),this.polygon=this.envelope=void 0},vt.prototype.get=function(bt){return this.edges[bt]},Object.defineProperty(vt.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),vt.prototype.forEach=function(bt){this.edges.forEach(bt)},vt.prototype.map=function(bt){return this.edges.map(bt)},vt.prototype.some=function(bt){return this.edges.some(bt)},vt.prototype.isValid=function(){return!0},vt.prototype.isHole=function(){var bt=this,wt=this.edges.reduce(function(Dt,jt,Gt){return jt.from.coordinates[1]>bt.edges[Dt].from.coordinates[1]&&(Dt=Gt),Dt},0),Tt=(wt===0?this.length:wt)-1,At=(wt+1)%this.length,Ot=e0(this.edges[Tt].from.coordinates,this.edges[wt].from.coordinates,this.edges[At].from.coordinates);return Ot===0?this.edges[Tt].from.coordinates[0]>this.edges[At].from.coordinates[0]:Ot>0},vt.prototype.toMultiPoint=function(){return Zt(this.edges.map(function(bt){return bt.from.coordinates}))},vt.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var bt=this.edges.map(function(wt){return wt.from.coordinates});return bt.push(this.edges[0].from.coordinates),this.polygon=It([bt])},vt.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ef(this.toPolygon())},vt.findEdgeRingContaining=function(bt,wt){var Tt,At,Ot=bt.getEnvelope();return wt.forEach(function(Dt){var jt,Gt,qt,en,Xt,sn,yn=Dt.getEnvelope();if(At&&(Tt=At.getEnvelope()),Gt=Ot,qt=(jt=yn).geometry.coordinates[0].map(function(bn){return bn[0]}),en=jt.geometry.coordinates[0].map(function(bn){return bn[1]}),Xt=Gt.geometry.coordinates[0].map(function(bn){return bn[0]}),sn=Gt.geometry.coordinates[0].map(function(bn){return bn[1]}),(Math.max.apply(null,qt)!==Math.max.apply(null,Xt)||Math.max.apply(null,en)!==Math.max.apply(null,sn)||Math.min.apply(null,qt)!==Math.min.apply(null,Xt)||Math.min.apply(null,en)!==Math.min.apply(null,sn))&&n0(yn,Ot)){for(var vn=bt.map(function(bn){return bn.from.coordinates}),Sn=void 0,fn=function(bn){Dt.some(function(Nn){return Bn=bn,Gn=Nn.from.coordinates,Bn[0]===Gn[0]&&Bn[1]===Gn[1];var Bn,Gn})||(Sn=bn)},Dn=0,rr=vn;Dn<rr.length;Dn++)fn(rr[Dn]);Sn&&Dt.inside(kt(Sn))&&(At&&!n0(Tt,yn)||(At=Dt))}}),At},vt.prototype.inside=function(bt){return oo(bt,this.toPolygon())},vt}(),wv=function(){function vt(){this.edges=[],this.nodes={}}return vt.fromGeoJson=function(bt){(function(Tt){if(!Tt)throw new Error("No geojson passed");if(Tt.type!=="FeatureCollection"&&Tt.type!=="GeometryCollection"&&Tt.type!=="MultiLineString"&&Tt.type!=="LineString"&&Tt.type!=="Feature")throw new Error("Invalid input type '"+Tt.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")})(bt);var wt=new vt;return Er(bt,function(Tt){Vn(Tt,"LineString","Graph::fromGeoJson"),Fn(Tt,function(At,Ot){if(At){var Dt=wt.getNode(At),jt=wt.getNode(Ot);wt.addEdge(Dt,jt)}return Ot})}),wt},vt.prototype.getNode=function(bt){var wt=Mg.buildId(bt),Tt=this.nodes[wt];return Tt||(Tt=this.nodes[wt]=new Mg(bt)),Tt},vt.prototype.addEdge=function(bt,wt){var Tt=new r0(bt,wt),At=Tt.getSymetric();this.edges.push(Tt),this.edges.push(At)},vt.prototype.deleteDangles=function(){var bt=this;Object.keys(this.nodes).map(function(wt){return bt.nodes[wt]}).forEach(function(wt){return bt._removeIfDangle(wt)})},vt.prototype._removeIfDangle=function(bt){var wt=this;if(bt.innerEdges.length<=1){var Tt=bt.getOuterEdges().map(function(At){return At.to});this.removeNode(bt),Tt.forEach(function(At){return wt._removeIfDangle(At)})}},vt.prototype.deleteCutEdges=function(){var bt=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(wt){wt.label===wt.symetric.label&&(bt.removeEdge(wt.symetric),bt.removeEdge(wt))})},vt.prototype._computeNextCWEdges=function(bt){var wt=this;bt===void 0?Object.keys(this.nodes).forEach(function(Tt){return wt._computeNextCWEdges(wt.nodes[Tt])}):bt.getOuterEdges().forEach(function(Tt,At){bt.getOuterEdge((At===0?bt.getOuterEdges().length:At)-1).symetric.next=Tt})},vt.prototype._computeNextCCWEdges=function(bt,wt){for(var Tt,At,Ot=bt.getOuterEdges(),Dt=Ot.length-1;Dt>=0;--Dt){var jt=Ot[Dt],Gt=jt.symetric,qt=void 0,en=void 0;jt.label===wt&&(qt=jt),Gt.label===wt&&(en=Gt),qt&&en&&(en&&(At=en),qt&&(At&&(At.next=qt,At=void 0),Tt||(Tt=qt)))}At&&(At.next=Tt)},vt.prototype._findLabeledEdgeRings=function(){var bt=[],wt=0;return this.edges.forEach(function(Tt){if(!(Tt.label>=0)){bt.push(Tt);var At=Tt;do At.label=wt,At=At.next;while(!Tt.isEqual(At));wt++}}),bt},vt.prototype.getEdgeRings=function(){var bt=this;this._computeNextCWEdges(),this.edges.forEach(function(Tt){Tt.label=void 0}),this._findLabeledEdgeRings().forEach(function(Tt){bt._findIntersectionNodes(Tt).forEach(function(At){bt._computeNextCCWEdges(At,Tt.label)})});var wt=[];return this.edges.forEach(function(Tt){Tt.ring||wt.push(bt._findEdgeRing(Tt))}),wt},vt.prototype._findIntersectionNodes=function(bt){var wt=[],Tt=bt,At=function(){var Ot=0;Tt.from.getOuterEdges().forEach(function(Dt){Dt.label===bt.label&&++Ot}),Ot>1&&wt.push(Tt.from),Tt=Tt.next};do At();while(!bt.isEqual(Tt));return wt},vt.prototype._findEdgeRing=function(bt){var wt=bt,Tt=new dl;do Tt.push(wt),wt.ring=Tt,wt=wt.next;while(!bt.isEqual(wt));return Tt},vt.prototype.removeNode=function(bt){var wt=this;bt.getOuterEdges().forEach(function(Tt){return wt.removeEdge(Tt)}),bt.innerEdges.forEach(function(Tt){return wt.removeEdge(Tt)}),delete this.nodes[bt.id]},vt.prototype.removeEdge=function(bt){this.edges=this.edges.filter(function(wt){return!wt.isEqual(bt)}),bt.deleteEdge()},vt}();function i0(vt,bt){var wt=!0;return Er(vt,function(Tt){Er(bt,function(At){if(wt===!1)return!1;wt=function(Ot,Dt){switch(Ot.type){case"Point":switch(Dt.type){case"Point":return jt=Ot.coordinates,Gt=Dt.coordinates,!(jt[0]===Gt[0]&&jt[1]===Gt[1]);case"LineString":return!b1(Dt,Ot);case"Polygon":return!oo(Ot,Dt)}break;case"LineString":switch(Dt.type){case"Point":return!b1(Ot,Dt);case"LineString":return!function(qt,en){return Vs(qt,en).features.length>0}(Ot,Dt);case"Polygon":return!Ng(Dt,Ot)}break;case"Polygon":switch(Dt.type){case"Point":return!oo(Dt,Ot);case"LineString":return!Ng(Ot,Dt);case"Polygon":return!function(qt,en){for(var Xt=0,sn=qt.coordinates[0];Xt<sn.length;Xt++)if(oo(sn[Xt],en))return!0;for(var yn=0,vn=en.coordinates[0];yn<vn.length;yn++)if(oo(vn[yn],qt))return!0;return Vs(nl(qt),nl(en)).features.length>0}(Dt,Ot)}}var jt,Gt;return!1}(Tt.geometry,At.geometry)})}),wt}function b1(vt,bt){for(var wt=0;wt<vt.coordinates.length-1;wt++)if(Ev(vt.coordinates[wt],vt.coordinates[wt+1],bt.coordinates))return!0;return!1}function Ng(vt,bt){for(var wt=0,Tt=bt.coordinates;wt<Tt.length;wt++)if(oo(Tt[wt],vt))return!0;return Vs(bt,nl(vt)).features.length>0}function Ev(vt,bt,wt){var Tt=wt[0]-vt[0],At=wt[1]-vt[1],Ot=bt[0]-vt[0],Dt=bt[1]-vt[1];return Tt*Dt-At*Ot==0&&(Math.abs(Ot)>=Math.abs(Dt)?Ot>0?vt[0]<=wt[0]&&wt[0]<=bt[0]:bt[0]<=wt[0]&&wt[0]<=vt[0]:Dt>0?vt[1]<=wt[1]&&wt[1]<=bt[1]:bt[1]<=wt[1]&&wt[1]<=vt[1])}function x1(vt,bt){return!(vt[0]>bt[0])&&!(vt[2]<bt[2])&&!(vt[1]>bt[1])&&!(vt[3]<bt[3])}function o0(vt,bt){return vt[0]===bt[0]&&vt[1]===bt[1]}function Sv(vt,bt){return[(vt[0]+bt[0])/2,(vt[1]+bt[1])/2]}function w1(vt,bt){for(var wt=!1,Tt=!1,At=vt.coordinates.length,Ot=0;Ot<At&&!wt&&!Tt;){for(var Dt=0;Dt<bt.coordinates.length-1;Dt++){var jt=!0;Dt!==0&&Dt!==bt.coordinates.length-2||(jt=!1),S1(bt.coordinates[Dt],bt.coordinates[Dt+1],vt.coordinates[Ot],jt)?wt=!0:Tt=!0}Ot++}return wt&&Tt}function E1(vt,bt){return Vs(vt,hl(bt)).features.length>0}function s0(vt,bt){for(var wt=!1,Tt=!1,At=vt.coordinates.length,Ot=0;Ot<At&&(!wt||!Tt);Ot++)oo(kt(vt.coordinates[Ot]),bt)?wt=!0:Tt=!0;return Tt&&wt}function S1(vt,bt,wt,Tt){var At=wt[0]-vt[0],Ot=wt[1]-vt[1],Dt=bt[0]-vt[0],jt=bt[1]-vt[1];return At*jt-Ot*Dt==0&&(Tt?Math.abs(Dt)>=Math.abs(jt)?Dt>0?vt[0]<=wt[0]&&wt[0]<=bt[0]:bt[0]<=wt[0]&&wt[0]<=vt[0]:jt>0?vt[1]<=wt[1]&&wt[1]<=bt[1]:bt[1]<=wt[1]&&wt[1]<=vt[1]:Math.abs(Dt)>=Math.abs(jt)?Dt>0?vt[0]<wt[0]&&wt[0]<bt[0]:bt[0]<wt[0]&&wt[0]<vt[0]:jt>0?vt[1]<wt[1]&&wt[1]<bt[1]:bt[1]<wt[1]&&wt[1]<vt[1])}var Pu=function(vt){this.precision=vt&&vt.precision?vt.precision:17,this.direction=!(!vt||!vt.direction)&&vt.direction,this.pseudoNode=!(!vt||!vt.pseudoNode)&&vt.pseudoNode,this.objectComparator=vt&&vt.objectComparator?vt.objectComparator:Cv};function Wh(vt){return vt.coordinates.map(function(bt){return{type:vt.type.replace("Multi",""),coordinates:bt}})}function ch(vt,bt){return vt.hasOwnProperty("coordinates")?vt.coordinates.length===bt.coordinates.length:vt.length===bt.length}function Cv(vt,bt){return Vh(vt,bt,{strict:!0})}Pu.prototype.compare=function(vt,bt){if(vt.type!==bt.type||!ch(vt,bt))return!1;switch(vt.type){case"Point":return this.compareCoord(vt.coordinates,bt.coordinates);case"LineString":return this.compareLine(vt.coordinates,bt.coordinates,0,!1);case"Polygon":return this.comparePolygon(vt,bt);case"Feature":return this.compareFeature(vt,bt);default:if(vt.type.indexOf("Multi")===0){var wt=this,Tt=Wh(vt),At=Wh(bt);return Tt.every(function(Ot){return this.some(function(Dt){return wt.compare(Ot,Dt)})},At)}}return!1},Pu.prototype.compareCoord=function(vt,bt){if(vt.length!==bt.length)return!1;for(var wt=0;wt<vt.length;wt++)if(vt[wt].toFixed(this.precision)!==bt[wt].toFixed(this.precision))return!1;return!0},Pu.prototype.compareLine=function(vt,bt,wt,Tt){if(!ch(vt,bt))return!1;var At=this.pseudoNode?vt:this.removePseudo(vt),Ot=this.pseudoNode?bt:this.removePseudo(bt);if(!Tt||this.compareCoord(At[0],Ot[0])||(Ot=this.fixStartIndex(Ot,At))){var Dt=this.compareCoord(At[wt],Ot[wt]);return this.direction||Dt?this.comparePath(At,Ot):!!this.compareCoord(At[wt],Ot[Ot.length-(1+wt)])&&this.comparePath(At.slice().reverse(),Ot)}},Pu.prototype.fixStartIndex=function(vt,bt){for(var wt,Tt=-1,At=0;At<vt.length;At++)if(this.compareCoord(vt[At],bt[0])){Tt=At;break}return Tt>=0&&(wt=[].concat(vt.slice(Tt,vt.length),vt.slice(1,Tt+1))),wt},Pu.prototype.comparePath=function(vt,bt){var wt=this;return vt.every(function(Tt,At){return wt.compareCoord(Tt,this[At])},bt)},Pu.prototype.comparePolygon=function(vt,bt){if(this.compareLine(vt.coordinates[0],bt.coordinates[0],1,!0)){var wt=vt.coordinates.slice(1,vt.coordinates.length),Tt=bt.coordinates.slice(1,bt.coordinates.length),At=this;return wt.every(function(Ot){return this.some(function(Dt){return At.compareLine(Ot,Dt,1,!0)})},Tt)}return!1},Pu.prototype.compareFeature=function(vt,bt){return!(vt.id!==bt.id||!this.objectComparator(vt.properties,bt.properties)||!this.compareBBox(vt,bt))&&this.compare(vt.geometry,bt.geometry)},Pu.prototype.compareBBox=function(vt,bt){return!!(!vt.bbox&&!bt.bbox||vt.bbox&&bt.bbox&&this.compareCoord(vt.bbox,bt.bbox))},Pu.prototype.removePseudo=function(vt){return vt};var a0=Pu;function C1(vt,bt){var wt=!1;return Er(vt,function(Tt){Er(bt,function(At){if(wt===!0)return!0;wt=!i0(Tt.geometry,At.geometry)})}),wt}var Tv=vs(function(vt){function bt(wt,Tt,At,Ot){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(wt,Tt,At,Ot)}bt.prototype.run=function(wt,Tt,At,Ot){this._init(wt,Tt,At,Ot);for(var Dt=0;Dt<this._datasetLength;Dt++)if(this._visited[Dt]!==1){this._visited[Dt]=1;var jt=this._regionQuery(Dt);if(jt.length<this.minPts)this.noise.push(Dt);else{var Gt=this.clusters.length;this.clusters.push([]),this._addToCluster(Dt,Gt),this._expandCluster(Gt,jt)}}return this.clusters},bt.prototype._init=function(wt,Tt,At,Ot){if(wt){if(!(wt instanceof Array))throw Error("Dataset must be of type array, "+typeof wt+" given");this.dataset=wt,this.clusters=[],this.noise=[],this._datasetLength=wt.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}Tt&&(this.epsilon=Tt),At&&(this.minPts=At),Ot&&(this.distance=Ot)},bt.prototype._expandCluster=function(wt,Tt){for(var At=0;At<Tt.length;At++){var Ot=Tt[At];if(this._visited[Ot]!==1){this._visited[Ot]=1;var Dt=this._regionQuery(Ot);Dt.length>=this.minPts&&(Tt=this._mergeArrays(Tt,Dt))}this._assigned[Ot]!==1&&this._addToCluster(Ot,wt)}},bt.prototype._addToCluster=function(wt,Tt){this.clusters[Tt].push(wt),this._assigned[wt]=1},bt.prototype._regionQuery=function(wt){for(var Tt=[],At=0;At<this._datasetLength;At++)this.distance(this.dataset[wt],this.dataset[At])<this.epsilon&&Tt.push(At);return Tt},bt.prototype._mergeArrays=function(wt,Tt){for(var At=Tt.length,Ot=0;Ot<At;Ot++){var Dt=Tt[Ot];wt.indexOf(Dt)<0&&wt.push(Dt)}return wt},bt.prototype._euclideanDistance=function(wt,Tt){for(var At=0,Ot=Math.min(wt.length,Tt.length);Ot--;)At+=(wt[Ot]-Tt[Ot])*(wt[Ot]-Tt[Ot]);return Math.sqrt(At)},vt.exports&&(vt.exports=bt)}),kv=vs(function(vt){function bt(wt,Tt,At){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(wt,Tt,At)}bt.prototype.init=function(wt,Tt,At){this.assignments=[],this.centroids=[],wt!==void 0&&(this.dataset=wt),Tt!==void 0&&(this.k=Tt),At!==void 0&&(this.distance=At)},bt.prototype.run=function(wt,Tt){this.init(wt,Tt);for(var At=this.dataset.length,Ot=0;Ot<this.k;Ot++)this.centroids[Ot]=this.randomCentroid();for(var Dt=!0;Dt;){Dt=this.assign();for(var jt=0;jt<this.k;jt++){for(var Gt=new Array(sn),qt=0,en=0;en<sn;en++)Gt[en]=0;for(var Xt=0;Xt<At;Xt++){var sn=this.dataset[Xt].length;if(jt===this.assignments[Xt]){for(en=0;en<sn;en++)Gt[en]+=this.dataset[Xt][en];qt++}}if(qt>0){for(en=0;en<sn;en++)Gt[en]/=qt;this.centroids[jt]=Gt}else this.centroids[jt]=this.randomCentroid(),Dt=!0}}return this.getClusters()},bt.prototype.randomCentroid=function(){var wt,Tt,At=this.dataset.length-1;do Tt=Math.round(Math.random()*At),wt=this.dataset[Tt];while(this.centroids.indexOf(wt)>=0);return wt},bt.prototype.assign=function(){for(var wt,Tt=!1,At=this.dataset.length,Ot=0;Ot<At;Ot++)(wt=this.argmin(this.dataset[Ot],this.centroids,this.distance))!=this.assignments[Ot]&&(this.assignments[Ot]=wt,Tt=!0);return Tt},bt.prototype.getClusters=function(){for(var wt,Tt=new Array(this.k),At=0;At<this.assignments.length;At++)Tt[wt=this.assignments[At]]===void 0&&(Tt[wt]=[]),Tt[wt].push(At);return Tt},bt.prototype.argmin=function(wt,Tt,At){for(var Ot,Dt=Number.MAX_VALUE,jt=0,Gt=Tt.length,qt=0;qt<Gt;qt++)(Ot=At(wt,Tt[qt]))<Dt&&(Dt=Ot,jt=qt);return jt},bt.prototype.distance=function(wt,Tt){for(var At=0,Ot=Math.min(wt.length,Tt.length);Ot--;){var Dt=wt[Ot]-Tt[Ot];At+=Dt*Dt}return Math.sqrt(At)},vt.exports&&(vt.exports=bt)}),T1=vs(function(vt){function bt(wt,Tt,At){this._queue=[],this._priorities=[],this._sorting="desc",this._init(wt,Tt,At)}bt.prototype.insert=function(wt,Tt){for(var At=this._queue.length,Ot=At;Ot--;){var Dt=this._priorities[Ot];this._sorting==="desc"?Tt>Dt&&(At=Ot):Tt<Dt&&(At=Ot)}this._insertAt(wt,Tt,At)},bt.prototype.remove=function(wt){for(var Tt=this._queue.length;Tt--;)if(wt===this._queue[Tt]){this._queue.splice(Tt,1),this._priorities.splice(Tt,1);break}},bt.prototype.forEach=function(wt){this._queue.forEach(wt)},bt.prototype.getElements=function(){return this._queue},bt.prototype.getElementPriority=function(wt){return this._priorities[wt]},bt.prototype.getPriorities=function(){return this._priorities},bt.prototype.getElementsWithPriorities=function(){for(var wt=[],Tt=0,At=this._queue.length;Tt<At;Tt++)wt.push([this._queue[Tt],this._priorities[Tt]]);return wt},bt.prototype._init=function(wt,Tt,At){if(wt&&Tt){if(this._queue=[],this._priorities=[],wt.length!==Tt.length)throw new Error("Arrays must have the same length");for(var Ot=0;Ot<wt.length;Ot++)this.insert(wt[Ot],Tt[Ot])}At&&(this._sorting=At)},bt.prototype._insertAt=function(wt,Tt,At){this._queue.length===At?(this._queue.push(wt),this._priorities.push(Tt)):(this._queue.splice(At,0,wt),this._priorities.splice(At,0,Tt))},vt.exports&&(vt.exports=bt)}),Av=vs(function(vt){if(vt.exports)var bt=T1;function wt(Tt,At,Ot,Dt){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Tt,At,Ot,Dt)}wt.prototype.run=function(Tt,At,Ot,Dt){this._init(Tt,At,Ot,Dt);for(var jt=0,Gt=this.dataset.length;jt<Gt;jt++)if(this._processed[jt]!==1){this._processed[jt]=1,this.clusters.push([jt]);var qt=this.clusters.length-1;this._orderedList.push(jt);var en=new bt(null,null,"asc"),Xt=this._regionQuery(jt);this._distanceToCore(jt)!==void 0&&(this._updateQueue(jt,Xt,en),this._expandCluster(qt,en))}return this.clusters},wt.prototype.getReachabilityPlot=function(){for(var Tt=[],At=0,Ot=this._orderedList.length;At<Ot;At++){var Dt=this._orderedList[At],jt=this._reachability[Dt];Tt.push([Dt,jt])}return Tt},wt.prototype._init=function(Tt,At,Ot,Dt){if(Tt){if(!(Tt instanceof Array))throw Error("Dataset must be of type array, "+typeof Tt+" given");this.dataset=Tt,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}At&&(this.epsilon=At),Ot&&(this.minPts=Ot),Dt&&(this.distance=Dt)},wt.prototype._updateQueue=function(Tt,At,Ot){var Dt=this;this._coreDistance=this._distanceToCore(Tt),At.forEach(function(jt){if(Dt._processed[jt]===void 0){var Gt=Dt.distance(Dt.dataset[Tt],Dt.dataset[jt]),qt=Math.max(Dt._coreDistance,Gt);Dt._reachability[jt]===void 0?(Dt._reachability[jt]=qt,Ot.insert(jt,qt)):qt<Dt._reachability[jt]&&(Dt._reachability[jt]=qt,Ot.remove(jt),Ot.insert(jt,qt))}})},wt.prototype._expandCluster=function(Tt,At){for(var Ot=At.getElements(),Dt=0,jt=Ot.length;Dt<jt;Dt++){var Gt=Ot[Dt];if(this._processed[Gt]===void 0){var qt=this._regionQuery(Gt);this._processed[Gt]=1,this.clusters[Tt].push(Gt),this._orderedList.push(Gt),this._distanceToCore(Gt)!==void 0&&(this._updateQueue(Gt,qt,At),this._expandCluster(Tt,At))}}},wt.prototype._distanceToCore=function(Tt){for(var At=this.epsilon,Ot=0;Ot<At;Ot++)if(this._regionQuery(Tt,Ot).length>=this.minPts)return Ot},wt.prototype._regionQuery=function(Tt,At){At=At||this.epsilon;for(var Ot=[],Dt=0,jt=this.dataset.length;Dt<jt;Dt++)this.distance(this.dataset[Tt],this.dataset[Dt])<At&&Ot.push(Dt);return Ot},wt.prototype._euclideanDistance=function(Tt,At){for(var Ot=0,Dt=Math.min(Tt.length,At.length);Dt--;)Ot+=(Tt[Dt]-At[Dt])*(Tt[Dt]-At[Dt]);return Math.sqrt(Ot)},vt.exports&&(vt.exports=wt)}),Lv=vs(function(vt){vt.exports&&(vt.exports={DBSCAN:Tv,KMEANS:kv,OPTICS:Av,PriorityQueue:T1})}),l0=function(vt,bt,wt){for(var Tt=vt.length,At=0,Ot=0;Ot<Tt;Ot++){var Dt=(vt[Ot]||0)-(bt[Ot]||0);At+=Dt*Dt}return wt?Math.sqrt(At):At},Pv=l0,kp=function(vt,bt,wt){var Tt=Math.abs(vt-bt);return wt?Tt:Tt*Tt},c0=l0,k1=function(vt,bt){for(var wt={},Tt=[],At=bt<<2,Ot=vt.length,Dt=vt[0].length>0;Tt.length<bt&&At-- >0;){var jt=vt[Math.floor(Math.random()*Ot)],Gt=Dt?jt.join("_"):""+jt;wt[Gt]||(wt[Gt]=!0,Tt.push(jt))}if(Tt.length<bt)throw new Error("Error initializating clusters");return Tt},Iv=function(vt,bt){var wt=vt[0].length?Pv:kp,Tt=[],At=vt.length,Ot=vt[0].length>0,Dt=vt[Math.floor(Math.random()*At)];for(Ot&&Dt.join("_"),Tt.push(Dt);Tt.length<bt;){for(var jt=[],Gt=Tt.length,qt=0,en=[],Xt=0;Xt<At;Xt++){for(var sn=1/0,yn=0;yn<Gt;yn++){var vn=wt(vt[Xt],Tt[yn]);vn<=sn&&(sn=vn)}jt[Xt]=sn}for(var Sn=0;Sn<At;Sn++)qt+=jt[Sn];for(var fn=0;fn<At;fn++)en[fn]={i:fn,v:vt[fn],pr:jt[fn]/qt,cs:0};en.sort(function(Nn,Bn){return Nn.pr-Bn.pr}),en[0].cs=en[0].pr;for(var Dn=1;Dn<At;Dn++)en[Dn].cs=en[Dn-1].cs+en[Dn].pr;for(var rr=Math.random(),bn=0;bn<At-1&&en[bn++].cs<rr;);Tt.push(en[bn-1].v)}return Tt};function A1(vt,bt,wt){wt=wt||[];for(var Tt=0;Tt<vt;Tt++)wt[Tt]=bt;return wt}var u0=function(vt,bt,wt,Tt){var At=[],Ot=[],Dt=[],jt=[],Gt=!1,qt=Tt||1e4,en=vt.length,Xt=vt[0].length,sn=Xt>0,yn=[];if(wt)At=wt=="kmrand"?k1(vt,bt):wt=="kmpp"?Iv(vt,bt):wt;else for(var vn={};At.length<bt;){var Sn=Math.floor(Math.random()*en);vn[Sn]||(vn[Sn]=!0,At.push(vt[Sn]))}do{A1(bt,0,yn);for(var fn=0;fn<en;fn++){for(var Dn=1/0,rr=0,bn=0;bn<bt;bn++)(jt=sn?c0(vt[fn],At[bn]):Math.abs(vt[fn]-At[bn]))<=Dn&&(Dn=jt,rr=bn);Dt[fn]=rr,yn[rr]++}for(var Nn=[],Bn=(Ot=[],0);Bn<bt;Bn++)Nn[Bn]=sn?A1(Xt,0,Nn[Bn]):0,Ot[Bn]=At[Bn];if(sn){for(var Gn=0;Gn<bt;Gn++)At[Gn]=[];for(var jn=0;jn<en;jn++)for(var Vr=Nn[Dt[jn]],$r=vt[jn],qr=0;qr<Xt;qr++)Vr[qr]+=$r[qr];Gt=!0;for(var Rr=0;Rr<bt;Rr++){for(var Jr=At[Rr],Br=Nn[Rr],Dr=Ot[Rr],Mr=yn[Rr],Yr=0;Yr<Xt;Yr++)Jr[Yr]=Br[Yr]/Mr||0;if(Gt){for(var zr=0;zr<Xt;zr++)if(Dr[zr]!=Jr[zr]){Gt=!1;break}}}}else{for(var Qr=0;Qr<en;Qr++)Nn[Dt[Qr]]+=vt[Qr];for(var wr=0;wr<bt;wr++)At[wr]=Nn[wr]/yn[wr]||0;Gt=!0;for(var ji=0;ji<bt;ji++)if(Ot[ji]!=At[ji]){Gt=!1;break}}Gt=Gt||--qt<=0}while(!Gt);return{it:1e4-qt,k:bt,idxs:Dt,centroids:At}};function Dg(vt,bt){return gn(sh(vt[0],vt[1]))===gn(sh(bt[0],bt[1]))}function h0(vt,bt){if(vt.geometry&&vt.geometry.type)return vt.geometry.type;if(vt.type)return vt.type;throw new Error("Invalid GeoJSON object for "+bt)}function L1(vt){for(var bt=vt,wt=[];bt.parent;)wt.unshift(bt),bt=bt.parent;return wt}var Bg={search:function(vt,bt,wt,Tt){vt.cleanDirty();var At=(Tt=Tt||{}).heuristic||Bg.heuristics.manhattan,Ot=Tt.closest||!1,Dt=new d0(function(Sn){return Sn.f}),jt=bt;for(bt.h=At(bt,wt),Dt.push(bt);Dt.size()>0;){var Gt=Dt.pop();if(Gt===wt)return L1(Gt);Gt.closed=!0;for(var qt=vt.neighbors(Gt),en=0,Xt=qt.length;en<Xt;++en){var sn=qt[en];if(!sn.closed&&!sn.isWall()){var yn=Gt.g+sn.getCost(Gt),vn=sn.visited;(!vn||yn<sn.g)&&(sn.visited=!0,sn.parent=Gt,sn.h=sn.h||At(sn,wt),sn.g=yn,sn.f=sn.g+sn.h,vt.markDirty(sn),Ot&&(sn.h<jt.h||sn.h===jt.h&&sn.g<jt.g)&&(jt=sn),vn?Dt.rescoreElement(sn):Dt.push(sn))}}}return Ot?L1(jt):[]},heuristics:{manhattan:function(vt,bt){return Math.abs(bt.x-vt.x)+Math.abs(bt.y-vt.y)},diagonal:function(vt,bt){var wt=Math.sqrt(2),Tt=Math.abs(bt.x-vt.x),At=Math.abs(bt.y-vt.y);return 1*(Tt+At)+(wt-2)*Math.min(Tt,At)}},cleanNode:function(vt){vt.f=0,vt.g=0,vt.h=0,vt.visited=!1,vt.closed=!1,vt.parent=null}};function qh(vt,bt){bt=bt||{},this.nodes=[],this.diagonal=!!bt.diagonal,this.grid=[];for(var wt=0;wt<vt.length;wt++){this.grid[wt]=[];for(var Tt=0,At=vt[wt];Tt<At.length;Tt++){var Ot=new Fg(wt,Tt,At[Tt]);this.grid[wt][Tt]=Ot,this.nodes.push(Ot)}}this.init()}function Fg(vt,bt,wt){this.x=vt,this.y=bt,this.weight=wt}function d0(vt){this.content=[],this.scoreFunction=vt}function Ov(vt,bt){for(var wt=0;wt<bt.features.length;wt++)if(oo(vt,bt.features[wt]))return!0;return!1}function P1(vt){return function(){return vt}}function $v(vt){return vt[0]}function I1(vt){return vt[1]}function zg(){this._=null}function Ap(vt){vt.U=vt.C=vt.L=vt.R=vt.P=vt.N=null}function Lp(vt,bt){var wt=bt,Tt=bt.R,At=wt.U;At?At.L===wt?At.L=Tt:At.R=Tt:vt._=Tt,Tt.U=At,wt.U=Tt,wt.R=Tt.L,wt.R&&(wt.R.U=wt),Tt.L=wt}function Pp(vt,bt){var wt=bt,Tt=bt.L,At=wt.U;At?At.L===wt?At.L=Tt:At.R=Tt:vt._=Tt,Tt.U=At,wt.U=Tt,wt.L=Tt.R,wt.L&&(wt.L.U=wt),Tt.R=wt}function O1(vt){for(;vt.L;)vt=vt.L;return vt}function Ef(vt,bt,wt,Tt){var At=[null,null],Ot=Tl.push(At)-1;return At.left=vt,At.right=bt,wt&&Sf(At,vt,bt,wt),Tt&&Sf(At,bt,vt,Tt),gc[vt.index].halfedges.push(Ot),gc[bt.index].halfedges.push(Ot),At}function Iu(vt,bt,wt){var Tt=[bt,wt];return Tt.left=vt,Tt}function Sf(vt,bt,wt,Tt){vt[0]||vt[1]?vt.left===wt?vt[1]=Tt:vt[0]=Tt:(vt[0]=Tt,vt.left=bt,vt.right=wt)}function Hg(vt,bt,wt,Tt,At){var Ot,Dt=vt[0],jt=vt[1],Gt=Dt[0],qt=Dt[1],en=0,Xt=1,sn=jt[0]-Gt,yn=jt[1]-qt;if(Ot=bt-Gt,sn||!(Ot>0)){if(Ot/=sn,sn<0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}else if(sn>0){if(Ot>Xt)return;Ot>en&&(en=Ot)}if(Ot=Tt-Gt,sn||!(Ot<0)){if(Ot/=sn,sn<0){if(Ot>Xt)return;Ot>en&&(en=Ot)}else if(sn>0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}if(Ot=wt-qt,yn||!(Ot>0)){if(Ot/=yn,yn<0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}else if(yn>0){if(Ot>Xt)return;Ot>en&&(en=Ot)}if(Ot=At-qt,yn||!(Ot<0)){if(Ot/=yn,yn<0){if(Ot>Xt)return;Ot>en&&(en=Ot)}else if(yn>0){if(Ot<en)return;Ot<Xt&&(Xt=Ot)}return!(en>0||Xt<1)||(en>0&&(vt[0]=[Gt+en*sn,qt+en*yn]),Xt<1&&(vt[1]=[Gt+Xt*sn,qt+Xt*yn]),!0)}}}}}function Rv(vt,bt,wt,Tt,At){var Ot=vt[1];if(Ot)return!0;var Dt,jt,Gt=vt[0],qt=vt.left,en=vt.right,Xt=qt[0],sn=qt[1],yn=en[0],vn=en[1],Sn=(Xt+yn)/2,fn=(sn+vn)/2;if(vn===sn){if(Sn<bt||Sn>=Tt)return;if(Xt>yn){if(Gt){if(Gt[1]>=At)return}else Gt=[Sn,wt];Ot=[Sn,At]}else{if(Gt){if(Gt[1]<wt)return}else Gt=[Sn,At];Ot=[Sn,wt]}}else if(jt=fn-(Dt=(Xt-yn)/(vn-sn))*Sn,Dt<-1||Dt>1)if(Xt>yn){if(Gt){if(Gt[1]>=At)return}else Gt=[(wt-jt)/Dt,wt];Ot=[(At-jt)/Dt,At]}else{if(Gt){if(Gt[1]<wt)return}else Gt=[(At-jt)/Dt,At];Ot=[(wt-jt)/Dt,wt]}else if(sn<vn){if(Gt){if(Gt[0]>=Tt)return}else Gt=[bt,Dt*bt+jt];Ot=[Tt,Dt*Tt+jt]}else{if(Gt){if(Gt[0]<bt)return}else Gt=[Tt,Dt*Tt+jt];Ot=[bt,Dt*bt+jt]}return vt[0]=Gt,vt[1]=Ot,!0}function f0(vt,bt){var wt=vt.site,Tt=bt.left,At=bt.right;return wt===At&&(At=Tt,Tt=wt),At?Math.atan2(At[1]-Tt[1],At[0]-Tt[0]):(wt===Tt?(Tt=bt[1],At=bt[0]):(Tt=bt[0],At=bt[1]),Math.atan2(Tt[0]-At[0],At[1]-Tt[1]))}function $1(vt,bt){return bt[+(bt.left!==vt.site)]}function Mv(vt,bt){return bt[+(bt.left===vt.site)]}qh.prototype.init=function(){this.dirtyNodes=[];for(var vt=0;vt<this.nodes.length;vt++)Bg.cleanNode(this.nodes[vt])},qh.prototype.cleanDirty=function(){for(var vt=0;vt<this.dirtyNodes.length;vt++)Bg.cleanNode(this.dirtyNodes[vt]);this.dirtyNodes=[]},qh.prototype.markDirty=function(vt){this.dirtyNodes.push(vt)},qh.prototype.neighbors=function(vt){var bt=[],wt=vt.x,Tt=vt.y,At=this.grid;return At[wt-1]&&At[wt-1][Tt]&&bt.push(At[wt-1][Tt]),At[wt+1]&&At[wt+1][Tt]&&bt.push(At[wt+1][Tt]),At[wt]&&At[wt][Tt-1]&&bt.push(At[wt][Tt-1]),At[wt]&&At[wt][Tt+1]&&bt.push(At[wt][Tt+1]),this.diagonal&&(At[wt-1]&&At[wt-1][Tt-1]&&bt.push(At[wt-1][Tt-1]),At[wt+1]&&At[wt+1][Tt-1]&&bt.push(At[wt+1][Tt-1]),At[wt-1]&&At[wt-1][Tt+1]&&bt.push(At[wt-1][Tt+1]),At[wt+1]&&At[wt+1][Tt+1]&&bt.push(At[wt+1][Tt+1])),bt},qh.prototype.toString=function(){for(var vt,bt,wt,Tt,At=[],Ot=this.grid,Dt=0,jt=Ot.length;Dt<jt;Dt++){for(vt=[],wt=0,Tt=(bt=Ot[Dt]).length;wt<Tt;wt++)vt.push(bt[wt].weight);At.push(vt.join(" "))}return At.join(`
`)},Fg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Fg.prototype.getCost=function(vt){return vt&&vt.x!==this.x&&vt.y!==this.y?1.41421*this.weight:this.weight},Fg.prototype.isWall=function(){return this.weight===0},d0.prototype={push:function(vt){this.content.push(vt),this.sinkDown(this.content.length-1)},pop:function(){var vt=this.content[0],bt=this.content.pop();return this.content.length>0&&(this.content[0]=bt,this.bubbleUp(0)),vt},remove:function(vt){var bt=this.content.indexOf(vt),wt=this.content.pop();bt!==this.content.length-1&&(this.content[bt]=wt,this.scoreFunction(wt)<this.scoreFunction(vt)?this.sinkDown(bt):this.bubbleUp(bt))},size:function(){return this.content.length},rescoreElement:function(vt){this.sinkDown(this.content.indexOf(vt))},sinkDown:function(vt){for(var bt=this.content[vt];vt>0;){var wt=(vt+1>>1)-1,Tt=this.content[wt];if(!(this.scoreFunction(bt)<this.scoreFunction(Tt)))break;this.content[wt]=bt,this.content[vt]=Tt,vt=wt}},bubbleUp:function(vt){for(var bt=this.content.length,wt=this.content[vt],Tt=this.scoreFunction(wt);;){var At,Ot=vt+1<<1,Dt=Ot-1,jt=null;if(Dt<bt){var Gt=this.content[Dt];(At=this.scoreFunction(Gt))<Tt&&(jt=Dt)}if(Ot<bt){var qt=this.content[Ot];this.scoreFunction(qt)<(jt===null?Tt:At)&&(jt=Ot)}if(jt===null)break;this.content[vt]=this.content[jt],this.content[jt]=wt,vt=jt}}},zg.prototype={constructor:zg,insert:function(vt,bt){var wt,Tt,At;if(vt){if(bt.P=vt,bt.N=vt.N,vt.N&&(vt.N.P=bt),vt.N=bt,vt.R){for(vt=vt.R;vt.L;)vt=vt.L;vt.L=bt}else vt.R=bt;wt=vt}else this._?(vt=O1(this._),bt.P=null,bt.N=vt,vt.P=vt.L=bt,wt=vt):(bt.P=bt.N=null,this._=bt,wt=null);for(bt.L=bt.R=null,bt.U=wt,bt.C=!0,vt=bt;wt&&wt.C;)wt===(Tt=wt.U).L?(At=Tt.R)&&At.C?(wt.C=At.C=!1,Tt.C=!0,vt=Tt):(vt===wt.R&&(Lp(this,wt),wt=(vt=wt).U),wt.C=!1,Tt.C=!0,Pp(this,Tt)):(At=Tt.L)&&At.C?(wt.C=At.C=!1,Tt.C=!0,vt=Tt):(vt===wt.L&&(Pp(this,wt),wt=(vt=wt).U),wt.C=!1,Tt.C=!0,Lp(this,Tt)),wt=vt.U;this._.C=!1},remove:function(vt){vt.N&&(vt.N.P=vt.P),vt.P&&(vt.P.N=vt.N),vt.N=vt.P=null;var bt,wt,Tt,At=vt.U,Ot=vt.L,Dt=vt.R;if(wt=Ot?Dt?O1(Dt):Ot:Dt,At?At.L===vt?At.L=wt:At.R=wt:this._=wt,Ot&&Dt?(Tt=wt.C,wt.C=vt.C,wt.L=Ot,Ot.U=wt,wt!==Dt?(At=wt.U,wt.U=vt.U,vt=wt.R,At.L=vt,wt.R=Dt,Dt.U=wt):(wt.U=At,At=wt,vt=wt.R)):(Tt=vt.C,vt=wt),vt&&(vt.U=At),!Tt)if(vt&&vt.C)vt.C=!1;else{do{if(vt===this._)break;if(vt===At.L){if((bt=At.R).C&&(bt.C=!1,At.C=!0,Lp(this,At),bt=At.R),bt.L&&bt.L.C||bt.R&&bt.R.C){bt.R&&bt.R.C||(bt.L.C=!1,bt.C=!0,Pp(this,bt),bt=At.R),bt.C=At.C,At.C=bt.R.C=!1,Lp(this,At),vt=this._;break}}else if((bt=At.L).C&&(bt.C=!1,At.C=!0,Pp(this,At),bt=At.L),bt.L&&bt.L.C||bt.R&&bt.R.C){bt.L&&bt.L.C||(bt.R.C=!1,bt.C=!0,Lp(this,bt),bt=At.L),bt.C=At.C,At.C=bt.L.C=!1,Pp(this,At),vt=this._;break}bt.C=!0,vt=At,At=At.U}while(!vt.C);vt&&(vt.C=!1)}}};var p0,R1=[];function Nv(){Ap(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cd(vt){var bt=vt.P,wt=vt.N;if(bt&&wt){var Tt=bt.site,At=vt.site,Ot=wt.site;if(Tt!==Ot){var Dt=At[0],jt=At[1],Gt=Tt[0]-Dt,qt=Tt[1]-jt,en=Ot[0]-Dt,Xt=Ot[1]-jt,sn=2*(Gt*Xt-qt*en);if(!(sn>=-zv)){var yn=Gt*Gt+qt*qt,vn=en*en+Xt*Xt,Sn=(Xt*yn-qt*vn)/sn,fn=(Gt*vn-en*yn)/sn,Dn=R1.pop()||new Nv;Dn.arc=vt,Dn.site=At,Dn.x=Sn+Dt,Dn.y=(Dn.cy=fn+jt)+Math.sqrt(Sn*Sn+fn*fn),vt.circle=Dn;for(var rr=null,bn=Tf._;bn;)if(Dn.y<bn.y||Dn.y===bn.y&&Dn.x<=bn.x){if(!bn.L){rr=bn.P;break}bn=bn.L}else{if(!bn.R){rr=bn;break}bn=bn.R}Tf.insert(rr,Dn),rr||(p0=Dn)}}}}function Yh(vt){var bt=vt.circle;bt&&(bt.P||(p0=bt.N),Tf.remove(bt),R1.push(bt),Ap(bt),vt.circle=null)}var M1=[];function N1(){Ap(this),this.edge=this.site=this.circle=null}function D1(vt){var bt=M1.pop()||new N1;return bt.site=vt,bt}function g0(vt){Yh(vt),Cf.remove(vt),M1.push(vt),Ap(vt)}function Dv(vt){var bt=vt.circle,wt=bt.x,Tt=bt.cy,At=[wt,Tt],Ot=vt.P,Dt=vt.N,jt=[vt];g0(vt);for(var Gt=Ot;Gt.circle&&Math.abs(wt-Gt.circle.x)<Rs&&Math.abs(Tt-Gt.circle.cy)<Rs;)Ot=Gt.P,jt.unshift(Gt),g0(Gt),Gt=Ot;jt.unshift(Gt),Yh(Gt);for(var qt=Dt;qt.circle&&Math.abs(wt-qt.circle.x)<Rs&&Math.abs(Tt-qt.circle.cy)<Rs;)Dt=qt.N,jt.push(qt),g0(qt),qt=Dt;jt.push(qt),Yh(qt);var en,Xt=jt.length;for(en=1;en<Xt;++en)qt=jt[en],Gt=jt[en-1],Sf(qt.edge,Gt.site,qt.site,At);Gt=jt[0],(qt=jt[Xt-1]).edge=Ef(Gt.site,qt.site,null,At),Cd(Gt),Cd(qt)}function Bv(vt){for(var bt,wt,Tt,At,Ot=vt[0],Dt=vt[1],jt=Cf._;jt;)if((Tt=B1(jt,Dt)-Ot)>Rs)jt=jt.L;else{if(!((At=Ot-Fv(jt,Dt))>Rs)){Tt>-Rs?(bt=jt.P,wt=jt):At>-Rs?(bt=jt,wt=jt.N):bt=wt=jt;break}if(!jt.R){bt=jt;break}jt=jt.R}(function(Bn){gc[Bn.index]={site:Bn,halfedges:[]}})(vt);var Gt=D1(vt);if(Cf.insert(bt,Gt),bt||wt){if(bt===wt)return Yh(bt),wt=D1(bt.site),Cf.insert(Gt,wt),Gt.edge=wt.edge=Ef(bt.site,Gt.site),Cd(bt),void Cd(wt);if(wt){Yh(bt),Yh(wt);var qt=bt.site,en=qt[0],Xt=qt[1],sn=vt[0]-en,yn=vt[1]-Xt,vn=wt.site,Sn=vn[0]-en,fn=vn[1]-Xt,Dn=2*(sn*fn-yn*Sn),rr=sn*sn+yn*yn,bn=Sn*Sn+fn*fn,Nn=[(fn*rr-yn*bn)/Dn+en,(sn*bn-Sn*rr)/Dn+Xt];Sf(wt.edge,qt,vn,Nn),Gt.edge=Ef(qt,vt,null,Nn),wt.edge=Ef(vt,vn,null,Nn),Cd(bt),Cd(wt)}else Gt.edge=Ef(bt.site,Gt.site)}}function B1(vt,bt){var wt=vt.site,Tt=wt[0],At=wt[1],Ot=At-bt;if(!Ot)return Tt;var Dt=vt.P;if(!Dt)return-1/0;var jt=(wt=Dt.site)[0],Gt=wt[1],qt=Gt-bt;if(!qt)return jt;var en=jt-Tt,Xt=1/Ot-1/qt,sn=en/qt;return Xt?(-sn+Math.sqrt(sn*sn-2*Xt*(en*en/(-2*qt)-Gt+qt/2+At-Ot/2)))/Xt+Tt:(Tt+jt)/2}function Fv(vt,bt){var wt=vt.N;if(wt)return B1(wt,bt);var Tt=vt.site;return Tt[1]===bt?Tt[0]:1/0}var Cf,gc,Tf,Tl,Rs=1e-6,zv=1e-12;function F1(vt,bt){return bt[1]-vt[1]||bt[0]-vt[0]}function m0(vt,bt){var wt,Tt,At,Ot=vt.sort(F1).pop();for(Tl=[],gc=new Array(vt.length),Cf=new zg,Tf=new zg;;)if(At=p0,Ot&&(!At||Ot[1]<At.y||Ot[1]===At.y&&Ot[0]<At.x))Ot[0]===wt&&Ot[1]===Tt||(Bv(Ot),wt=Ot[0],Tt=Ot[1]),Ot=vt.pop();else{if(!At)break;Dv(At.arc)}if(function(){for(var en,Xt,sn,yn,vn=0,Sn=gc.length;vn<Sn;++vn)if((en=gc[vn])&&(yn=(Xt=en.halfedges).length)){var fn=new Array(yn),Dn=new Array(yn);for(sn=0;sn<yn;++sn)fn[sn]=sn,Dn[sn]=f0(en,Tl[Xt[sn]]);for(fn.sort(function(rr,bn){return Dn[bn]-Dn[rr]}),sn=0;sn<yn;++sn)Dn[sn]=Xt[fn[sn]];for(sn=0;sn<yn;++sn)Xt[sn]=Dn[sn]}}(),bt){var Dt=+bt[0][0],jt=+bt[0][1],Gt=+bt[1][0],qt=+bt[1][1];(function(en,Xt,sn,yn){for(var vn,Sn=Tl.length;Sn--;)Rv(vn=Tl[Sn],en,Xt,sn,yn)&&Hg(vn,en,Xt,sn,yn)&&(Math.abs(vn[0][0]-vn[1][0])>Rs||Math.abs(vn[0][1]-vn[1][1])>Rs)||delete Tl[Sn]})(Dt,jt,Gt,qt),function(en,Xt,sn,yn){var vn,Sn,fn,Dn,rr,bn,Nn,Bn,Gn,jn,Vr,$r,qr=gc.length,Rr=!0;for(vn=0;vn<qr;++vn)if(Sn=gc[vn]){for(fn=Sn.site,Dn=(rr=Sn.halfedges).length;Dn--;)Tl[rr[Dn]]||rr.splice(Dn,1);for(Dn=0,bn=rr.length;Dn<bn;)Vr=(jn=Mv(Sn,Tl[rr[Dn]]))[0],$r=jn[1],Bn=(Nn=$1(Sn,Tl[rr[++Dn%bn]]))[0],Gn=Nn[1],(Math.abs(Vr-Bn)>Rs||Math.abs($r-Gn)>Rs)&&(rr.splice(Dn,0,Tl.push(Iu(fn,jn,Math.abs(Vr-en)<Rs&&yn-$r>Rs?[en,Math.abs(Bn-en)<Rs?Gn:yn]:Math.abs($r-yn)<Rs&&sn-Vr>Rs?[Math.abs(Gn-yn)<Rs?Bn:sn,yn]:Math.abs(Vr-sn)<Rs&&$r-Xt>Rs?[sn,Math.abs(Bn-sn)<Rs?Gn:Xt]:Math.abs($r-Xt)<Rs&&Vr-en>Rs?[Math.abs(Gn-Xt)<Rs?Bn:en,Xt]:null))-1),++bn);bn&&(Rr=!1)}if(Rr){var Jr,Br,Dr,Mr=1/0;for(vn=0,Rr=null;vn<qr;++vn)(Sn=gc[vn])&&(Dr=(Jr=(fn=Sn.site)[0]-en)*Jr+(Br=fn[1]-Xt)*Br)<Mr&&(Mr=Dr,Rr=Sn);if(Rr){var Yr=[en,Xt],zr=[en,yn],Qr=[sn,yn],wr=[sn,Xt];Rr.halfedges.push(Tl.push(Iu(fn=Rr.site,Yr,zr))-1,Tl.push(Iu(fn,zr,Qr))-1,Tl.push(Iu(fn,Qr,wr))-1,Tl.push(Iu(fn,wr,Yr))-1)}}for(vn=0;vn<qr;++vn)(Sn=gc[vn])&&(Sn.halfedges.length||delete gc[vn])}(Dt,jt,Gt,qt)}this.edges=Tl,this.cells=gc,Cf=Tf=Tl=gc=null}function Hv(vt){return(vt=vt.slice()).push(vt[0]),It([vt])}function z1(vt,bt,wt,Tt){var At=(Tt=Tt||{}).steps||64,Ot=Tt.units||"kilometers",Dt=Tt.angle||0,jt=Tt.pivot||vt,Gt=Tt.properties||vt.properties||{};if(!vt)throw new Error("center is required");if(!bt)throw new Error("xSemiAxis is required");if(!wt)throw new Error("ySemiAxis is required");if(!cn(Tt))throw new Error("options must be an object");if(!An(At))throw new Error("steps must be a number");if(!An(Dt))throw new Error("angle must be a number");var qt=pn(vt);if(Ot==="degrees")var en=kn(Dt);else bt=bf(vt,bt,90,{units:Ot}),wt=bf(vt,wt,0,{units:Ot}),bt=pn(bt)[0]-qt[0],wt=pn(wt)[1]-qt[1];for(var Xt=[],sn=0;sn<At;sn+=1){var yn=-360*sn/At,vn=bt*wt/Math.sqrt(Math.pow(wt,2)+Math.pow(bt,2)*Math.pow(H1(yn),2)),Sn=bt*wt/Math.sqrt(Math.pow(bt,2)+Math.pow(wt,2)/Math.pow(H1(yn),2));if(yn<-90&&yn>=-270&&(vn=-vn),yn<-180&&yn>=-360&&(Sn=-Sn),Ot==="degrees"){var fn=vn*Math.cos(en)+Sn*Math.sin(en),Dn=Sn*Math.cos(en)-vn*Math.sin(en);vn=fn,Sn=Dn}Xt.push([vn+qt[0],Sn+qt[1]])}return Xt.push(Xt[0]),Ot==="degrees"?It([Xt],Gt):y1(It([Xt],Gt),Dt,{pivot:jt})}function H1(vt){var bt=vt*Math.PI/180;return Math.tan(bt)}function y0(vt,bt){bt===void 0&&(bt={});var wt=0,Tt=0,At=0;return cr(vt,function(Ot,Dt,jt){var Gt=bt.weight?jt==null?void 0:jt[bt.weight]:void 0;if(!An(Gt=Gt==null?1:Gt))throw new Error("weight value must be a number for feature index "+Dt);(Gt=Number(Gt))>0&&dn(Ot,function(qt){wt+=qt[0]*Gt,Tt+=qt[1]*Gt,At+=Gt})}),kt([wt/At,Tt/At],bt.properties,bt)}function j1(vt,bt,wt,Tt,At){var Ot=Tt.tolerance||.001,Dt=0,jt=0,Gt=0,qt=0;if(Jn(wt,function(sn){var yn,vn=(yn=sn.properties)===null||yn===void 0?void 0:yn.weight,Sn=vn==null?1:vn;if(!An(Sn=Number(Sn)))throw new Error("weight value must be a number");if(Sn>0){qt+=1;var fn=Sn*ao(sn,vt);fn===0&&(fn=1);var Dn=Sn/fn;Dt+=sn.geometry.coordinates[0]*Dn,jt+=sn.geometry.coordinates[1]*Dn,Gt+=Dn}}),qt<1)throw new Error("no features to measure");var en=Dt/Gt,Xt=jt/Gt;return qt===1||At===0||Math.abs(en-bt[0])<Ot&&Math.abs(Xt-bt[1])<Ot?kt([en,Xt],{medianCandidates:Tt.medianCandidates}):(Tt.medianCandidates.push([en,Xt]),j1([en,Xt],vt,wt,Tt,At-1))}function V1(vt,bt){return{x:vt[0]-bt[0],y:vt[1]-bt[1]}}function jv(vt,bt){var wt=0,Tt=0;dn(vt,function(At,Ot,Dt,jt,Gt){Gt>wt&&(wt=Gt,Tt=Ot,bt.push([]));var qt=Ot-Tt,en=vt.coordinates[Gt][qt+1],Xt=At[0],sn=At[1],yn=en[0],vn=en[1];bt[Gt].push([.75*Xt+.25*yn,.75*sn+.25*vn]),bt[Gt].push([.25*Xt+.75*yn,.25*sn+.75*vn])},!0),bt.forEach(function(At){At.push(At[0])})}function Vv(vt,bt){var wt=0,Tt=0,At=0;dn(vt,function(Ot,Dt,jt,Gt,qt){Gt>At&&(At=Gt,Tt=Dt,bt.push([[]])),qt>wt&&(wt=qt,Tt=Dt,bt[Gt].push([]));var en=Dt-Tt,Xt=vt.coordinates[Gt][qt][en+1],sn=Ot[0],yn=Ot[1],vn=Xt[0],Sn=Xt[1];bt[Gt][qt].push([.75*sn+.25*vn,.75*yn+.25*Sn]),bt[Gt][qt].push([.25*sn+.75*vn,.25*yn+.75*Sn])},!0),bt.forEach(function(Ot){Ot.forEach(function(Dt){Dt.push(Dt[0])})})}function Uv(vt,bt,wt){wt===void 0&&(wt=2);var Tt=pn(vt),At=pn(bt),Ot=Tt[0]-At[0],Dt=Tt[1]-At[1];return wt===1?Math.abs(Ot)+Math.abs(Dt):Math.pow(Math.pow(Ot,wt)+Math.pow(Dt,wt),1/wt)}function U1(vt,bt){var wt=(bt=bt||{}).threshold||1e4,Tt=bt.p||2,At=bt.binary||!1,Ot=bt.alpha||-1,Dt=bt.standardization||!1,jt=[];Jn(vt,function(yn){jt.push(dc(yn))});for(var Gt=[],qt=0;qt<jt.length;qt++)Gt[qt]=[];for(qt=0;qt<jt.length;qt++)for(var en=qt;en<jt.length;en++){qt===en&&(Gt[qt][en]=0);var Xt=Uv(jt[qt],jt[en],Tt);Gt[qt][en]=Xt,Gt[en][qt]=Xt}for(qt=0;qt<jt.length;qt++)for(en=0;en<jt.length;en++)(Xt=Gt[qt][en])!==0&&(Gt[qt][en]=At?Xt<=wt?1:0:Xt<=wt?Math.pow(Xt,Ot):0);if(Dt)for(qt=0;qt<jt.length;qt++){var sn=Gt[qt].reduce(function(yn,vn){return yn+vn},0);for(en=0;en<jt.length;en++)Gt[qt][en]=Gt[qt][en]/sn}return Gt}function G1(vt){for(var bt=0,wt=0,Tt=vt;wt<Tt.length;wt++)bt+=Tt[wt];return bt/vt.length}function W1(vt,bt){return bt===void 0&&(bt={}),Y1(vt,"mercator",bt)}function q1(vt,bt){return bt===void 0&&(bt={}),Y1(vt,"wgs84",bt)}function Y1(vt,bt,wt){wt===void 0&&(wt={});var Tt=(wt=wt||{}).mutate;if(!vt)throw new Error("geojson is required");return Array.isArray(vt)&&An(vt[0])?vt=bt==="mercator"?X1(vt):Z1(vt):(Tt!==!0&&(vt=$o(vt)),dn(vt,function(At){var Ot=bt==="mercator"?X1(At):Z1(At);At[0]=Ot[0],At[1]=Ot[1]})),vt}function X1(vt){var bt=Math.PI/180,wt=6378137,Tt=20037508342789244e-9,At=[wt*(Math.abs(vt[0])<=180?vt[0]:vt[0]-360*function(Ot){return Ot<0?-1:Ot>0?1:0}(vt[0]))*bt,wt*Math.log(Math.tan(.25*Math.PI+.5*vt[1]*bt))];return At[0]>Tt&&(At[0]=Tt),At[0]<-Tt&&(At[0]=-Tt),At[1]>Tt&&(At[1]=Tt),At[1]<-Tt&&(At[1]=-Tt),At}function Z1(vt){var bt=180/Math.PI,wt=6378137;return[vt[0]*bt/wt,(.5*Math.PI-2*Math.atan(Math.exp(-vt[1]/wt)))*bt]}m0.prototype={constructor:m0,polygons:function(){var vt=this.edges;return this.cells.map(function(bt){var wt=bt.halfedges.map(function(Tt){return $1(bt,vt[Tt])});return wt.data=bt.site.data,wt})},triangles:function(){var vt=[],bt=this.edges;return this.cells.forEach(function(wt,Tt){if(Ot=(At=wt.halfedges).length)for(var At,Ot,Dt,jt,Gt,qt,en=wt.site,Xt=-1,sn=bt[At[Ot-1]],yn=sn.left===en?sn.right:sn.left;++Xt<Ot;)Dt=yn,yn=(sn=bt[At[Xt]]).left===en?sn.right:sn.left,Dt&&yn&&Tt<Dt.index&&Tt<yn.index&&(Gt=Dt,qt=yn,((jt=en)[0]-qt[0])*(Gt[1]-jt[1])-(jt[0]-Gt[0])*(qt[1]-jt[1])<0)&&vt.push([en.data,Dt.data,yn.data])}),vt},links:function(){return this.edges.filter(function(vt){return vt.right}).map(function(vt){return{source:vt.left.data,target:vt.right.data}})},find:function(vt,bt,wt){for(var Tt,At,Ot=this,Dt=Ot._found||0,jt=Ot.cells.length;!(At=Ot.cells[Dt]);)if(++Dt>=jt)return null;var Gt=vt-At.site[0],qt=bt-At.site[1],en=Gt*Gt+qt*qt;do At=Ot.cells[Tt=Dt],Dt=null,At.halfedges.forEach(function(Xt){var sn=Ot.edges[Xt],yn=sn.left;if(yn!==At.site&&yn||(yn=sn.right)){var vn=vt-yn[0],Sn=bt-yn[1],fn=vn*vn+Sn*Sn;fn<en&&(en=fn,Dt=yn.index)}});while(Dt!==null);return Ot._found=Tt,wt==null||en<=wt*wt?At.site:null}};var Gv=Object.freeze({__proto__:null,toMercator:W1,toWgs84:q1}),Wv=function(){for(var vt=0,bt=0,wt=arguments.length;bt<wt;bt++)vt+=arguments[bt].length;var Tt=Array(vt),At=0;for(bt=0;bt<wt;bt++)for(var Ot=arguments[bt],Dt=0,jt=Ot.length;Dt<jt;Dt++,At++)Tt[At]=Ot[Dt];return Tt};function Ip(vt){return Array.isArray(vt)?ey(vt):vt&&vt.bbox?ey(vt.bbox):[360*Q1(),180*Q1()]}function K1(vt,bt){bt===void 0&&(bt={}),vt==null&&(vt=1);for(var wt=[],Tt=0;Tt<vt;Tt++)wt.push(kt(Ip(bt.bbox)));return Ft(wt)}function v0(vt,bt){bt===void 0&&(bt={}),vt==null&&(vt=1),An(bt.num_vertices)&&bt.num_vertices!==void 0||(bt.num_vertices=10),An(bt.max_radial_length)&&bt.max_radial_length!==void 0||(bt.max_radial_length=10);for(var wt=[],Tt=function(Ot){var Dt,jt=[],Gt=Wv(Array(bt.num_vertices+1)).map(Math.random);Gt.forEach(function(qt,en,Xt){Xt[en]=en>0?qt+Xt[en-1]:qt}),Gt.forEach(function(qt){qt=2*qt*Math.PI/Gt[Gt.length-1];var en=Math.random();jt.push([en*(bt.max_radial_length||10)*Math.sin(qt),en*(bt.max_radial_length||10)*Math.cos(qt)])}),jt[jt.length-1]=jt[0],jt=jt.map((Dt=Ip(bt.bbox),function(qt){return[qt[0]+Dt[0],qt[1]+Dt[1]]})),wt.push(It([jt]))},At=0;At<vt;At++)Tt();return Ft(wt)}function J1(vt,bt){if(bt===void 0&&(bt={}),!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.bbox,Tt=bt.num_vertices,At=bt.max_length,Ot=bt.max_rotation;vt==null&&(vt=1),(!An(Tt)||Tt===void 0||Tt<2)&&(Tt=10),An(At)&&At!==void 0||(At=1e-4),An(Ot)&&Ot!==void 0||(Ot=Math.PI/8);for(var Dt=[],jt=0;jt<vt;jt++){for(var Gt=[Ip(wt)],qt=0;qt<Tt-1;qt++){var en=(qt===0?2*Math.random()*Math.PI:Math.tan((Gt[qt][1]-Gt[qt-1][1])/(Gt[qt][0]-Gt[qt-1][0])))+(Math.random()-.5)*Ot*2,Xt=Math.random()*At;Gt.push([Gt[qt][0]+Xt*Math.cos(en),Gt[qt][1]+Xt*Math.sin(en)])}Dt.push(Nt(Gt))}return Ft(Dt)}function Q1(){return Math.random()-.5}function ey(vt){return[Math.random()*(vt[2]-vt[0])+vt[0],Math.random()*(vt[3]-vt[1])+vt[1]]}var qv=Object.freeze({__proto__:null,randomPosition:Ip,randomPoint:K1,randomPolygon:v0,randomLineString:J1});function ty(vt,bt){if(!vt)throw new Error("geojson is required");if(vt.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(bt==null)throw new Error("filter is required");var wt=[];return Jn(vt,function(Tt){Vg(Tt.properties,bt)&&wt.push(Tt)}),Ft(wt)}function _0(vt,bt,wt){if(!vt)throw new Error("geojson is required");if(vt.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(bt==null)throw new Error("property is required");for(var Tt=b0(vt,bt),At=Object.keys(Tt),Ot=0;Ot<At.length;Ot++){for(var Dt=At[Ot],jt=Tt[Dt],Gt=[],qt=0;qt<jt.length;qt++)Gt.push(vt.features[jt[qt]]);wt(Ft(Gt),Dt,Ot)}}function jg(vt,bt,wt,Tt){var At=Tt;return _0(vt,bt,function(Ot,Dt,jt){At=jt===0&&Tt===void 0?Ot:wt(At,Ot,Dt,jt)}),At}function b0(vt,bt){var wt={};return Jn(vt,function(Tt,At){var Ot=Tt.properties||{};if(Object.prototype.hasOwnProperty.call(Ot,String(bt))){var Dt=Ot[bt];Object.prototype.hasOwnProperty.call(wt,Dt)?wt[Dt].push(At):wt[Dt]=[At]}}),wt}function Vg(vt,bt){if(vt===void 0)return!1;var wt=typeof bt;if(wt==="number"||wt==="string")return Object.prototype.hasOwnProperty.call(vt,bt);if(Array.isArray(bt)){for(var Tt=0;Tt<bt.length;Tt++)if(!Vg(vt,bt[Tt]))return!1;return!0}return x0(vt,bt)}function x0(vt,bt){for(var wt=Object.keys(bt),Tt=0;Tt<wt.length;Tt++){var At=wt[Tt];if(vt[At]!==bt[At])return!1}return!0}function ny(vt,bt){if(!bt)return{};if(!bt.length)return{};for(var wt={},Tt=0;Tt<bt.length;Tt++){var At=bt[Tt];Object.prototype.hasOwnProperty.call(vt,At)&&(wt[At]=vt[At])}return wt}var Yv=Object.freeze({__proto__:null,getCluster:ty,clusterEach:_0,clusterReduce:jg,createBins:b0,applyFilter:Vg,propertiesContainsFilter:x0,filterProperties:ny}),Xh=function(vt,bt){this.next=null,this.key=vt,this.data=bt,this.left=null,this.right=null};/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */function w0(vt,bt){return vt>bt?1:vt<bt?-1:0}function uh(vt,bt,wt){for(var Tt=new Xh(null,null),At=Tt,Ot=Tt;;){var Dt=wt(vt,bt.key);if(Dt<0){if(bt.left===null)break;if(wt(vt,bt.left.key)<0){var jt=bt.left;if(bt.left=jt.right,jt.right=bt,(bt=jt).left===null)break}Ot.left=bt,Ot=bt,bt=bt.left}else{if(!(Dt>0)||bt.right===null||wt(vt,bt.right.key)>0&&(jt=bt.right,bt.right=jt.left,jt.left=bt,(bt=jt).right===null))break;At.right=bt,At=bt,bt=bt.right}}return At.right=bt.left,Ot.left=bt.right,bt.left=Tt.right,bt.right=Tt.left,bt}function E0(vt,bt,wt,Tt){var At=new Xh(vt,bt);if(wt===null)return At.left=At.right=null,At;var Ot=Tt(vt,(wt=uh(vt,wt,Tt)).key);return Ot<0?(At.left=wt.left,At.right=wt,wt.left=null):Ot>=0&&(At.right=wt.right,At.left=wt,wt.right=null),At}function S0(vt,bt,wt){var Tt=null,At=null;if(bt){var Ot=wt((bt=uh(vt,bt,wt)).key,vt);Ot===0?(Tt=bt.left,At=bt.right):Ot<0?(At=bt.right,bt.right=null,Tt=bt):(Tt=bt.left,bt.left=null,At=bt)}return{left:Tt,right:At}}function C0(vt,bt,wt,Tt,At){if(vt){Tt(bt+(wt?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+At(vt)+`
`);var Ot=bt+(wt?"    ":"\u2502   ");vt.left&&C0(vt.left,Ot,!1,Tt,At),vt.right&&C0(vt.right,Ot,!0,Tt,At)}}var T0=function(){function vt(bt){bt===void 0&&(bt=w0),this._root=null,this._size=0,this._comparator=bt}return vt.prototype.insert=function(bt,wt){return this._size++,this._root=E0(bt,wt,this._root,this._comparator)},vt.prototype.add=function(bt,wt){var Tt=new Xh(bt,wt);this._root===null&&(Tt.left=Tt.right=null,this._size++,this._root=Tt);var At=this._comparator,Ot=uh(bt,this._root,At),Dt=At(bt,Ot.key);return Dt===0?this._root=Ot:(Dt<0?(Tt.left=Ot.left,Tt.right=Ot,Ot.left=null):Dt>0&&(Tt.right=Ot.right,Tt.left=Ot,Ot.right=null),this._size++,this._root=Tt),this._root},vt.prototype.remove=function(bt){this._root=this._remove(bt,this._root,this._comparator)},vt.prototype._remove=function(bt,wt,Tt){var At;return wt===null?null:Tt(bt,(wt=uh(bt,wt,Tt)).key)===0?(wt.left===null?At=wt.right:(At=uh(bt,wt.left,Tt)).right=wt.right,this._size--,At):wt},vt.prototype.pop=function(){var bt=this._root;if(bt){for(;bt.left;)bt=bt.left;return this._root=uh(bt.key,this._root,this._comparator),this._root=this._remove(bt.key,this._root,this._comparator),{key:bt.key,data:bt.data}}return null},vt.prototype.findStatic=function(bt){for(var wt=this._root,Tt=this._comparator;wt;){var At=Tt(bt,wt.key);if(At===0)return wt;wt=At<0?wt.left:wt.right}return null},vt.prototype.find=function(bt){return this._root&&(this._root=uh(bt,this._root,this._comparator),this._comparator(bt,this._root.key)!==0)?null:this._root},vt.prototype.contains=function(bt){for(var wt=this._root,Tt=this._comparator;wt;){var At=Tt(bt,wt.key);if(At===0)return!0;wt=At<0?wt.left:wt.right}return!1},vt.prototype.forEach=function(bt,wt){for(var Tt=this._root,At=[],Ot=!1;!Ot;)Tt!==null?(At.push(Tt),Tt=Tt.left):At.length!==0?(Tt=At.pop(),bt.call(wt,Tt),Tt=Tt.right):Ot=!0;return this},vt.prototype.range=function(bt,wt,Tt,At){for(var Ot=[],Dt=this._comparator,jt=this._root;Ot.length!==0||jt;)if(jt)Ot.push(jt),jt=jt.left;else{if(Dt((jt=Ot.pop()).key,wt)>0)break;if(Dt(jt.key,bt)>=0&&Tt.call(At,jt))return this;jt=jt.right}return this},vt.prototype.keys=function(){var bt=[];return this.forEach(function(wt){var Tt=wt.key;return bt.push(Tt)}),bt},vt.prototype.values=function(){var bt=[];return this.forEach(function(wt){var Tt=wt.data;return bt.push(Tt)}),bt},vt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},vt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},vt.prototype.minNode=function(bt){if(bt===void 0&&(bt=this._root),bt)for(;bt.left;)bt=bt.left;return bt},vt.prototype.maxNode=function(bt){if(bt===void 0&&(bt=this._root),bt)for(;bt.right;)bt=bt.right;return bt},vt.prototype.at=function(bt){for(var wt=this._root,Tt=!1,At=0,Ot=[];!Tt;)if(wt)Ot.push(wt),wt=wt.left;else if(Ot.length>0){if(wt=Ot.pop(),At===bt)return wt;At++,wt=wt.right}else Tt=!0;return null},vt.prototype.next=function(bt){var wt=this._root,Tt=null;if(bt.right){for(Tt=bt.right;Tt.left;)Tt=Tt.left;return Tt}for(var At=this._comparator;wt;){var Ot=At(bt.key,wt.key);if(Ot===0)break;Ot<0?(Tt=wt,wt=wt.left):wt=wt.right}return Tt},vt.prototype.prev=function(bt){var wt=this._root,Tt=null;if(bt.left!==null){for(Tt=bt.left;Tt.right;)Tt=Tt.right;return Tt}for(var At=this._comparator;wt;){var Ot=At(bt.key,wt.key);if(Ot===0)break;Ot<0?wt=wt.left:(Tt=wt,wt=wt.right)}return Tt},vt.prototype.clear=function(){return this._root=null,this._size=0,this},vt.prototype.toList=function(){return function(bt){for(var wt=bt,Tt=[],At=!1,Ot=new Xh(null,null),Dt=Ot;!At;)wt?(Tt.push(wt),wt=wt.left):Tt.length>0?wt=(wt=Dt=Dt.next=Tt.pop()).right:At=!0;return Dt.next=null,Ot.next}(this._root)},vt.prototype.load=function(bt,wt,Tt){wt===void 0&&(wt=[]),Tt===void 0&&(Tt=!1);var At=bt.length,Ot=this._comparator;if(Tt&&A0(bt,wt,0,At-1,Ot),this._root===null)this._root=k0(bt,wt,0,At),this._size=At;else{var Dt=function(jt,Gt,qt){for(var en=new Xh(null,null),Xt=en,sn=jt,yn=Gt;sn!==null&&yn!==null;)qt(sn.key,yn.key)<0?(Xt.next=sn,sn=sn.next):(Xt.next=yn,yn=yn.next),Xt=Xt.next;return sn!==null?Xt.next=sn:yn!==null&&(Xt.next=yn),en.next}(this.toList(),function(jt,Gt){for(var qt=new Xh(null,null),en=qt,Xt=0;Xt<jt.length;Xt++)en=en.next=new Xh(jt[Xt],Gt[Xt]);return en.next=null,qt.next}(bt,wt),Ot);At=this._size+At,this._root=Ug({head:Dt},0,At)}return this},vt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(vt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(vt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),vt.prototype.toString=function(bt){bt===void 0&&(bt=function(Tt){return String(Tt.key)});var wt=[];return C0(this._root,"",!0,function(Tt){return wt.push(Tt)},bt),wt.join("")},vt.prototype.update=function(bt,wt,Tt){var At=this._comparator,Ot=S0(bt,this._root,At),Dt=Ot.left,jt=Ot.right;At(bt,wt)<0?jt=E0(wt,Tt,jt,At):Dt=E0(wt,Tt,Dt,At),this._root=function(Gt,qt,en){return qt===null?Gt:(Gt===null||((qt=uh(Gt.key,qt,en)).left=Gt),qt)}(Dt,jt,At)},vt.prototype.split=function(bt){return S0(bt,this._root,this._comparator)},vt}();function k0(vt,bt,wt,Tt){var At=Tt-wt;if(At>0){var Ot=wt+Math.floor(At/2),Dt=vt[Ot],jt=bt[Ot],Gt=new Xh(Dt,jt);return Gt.left=k0(vt,bt,wt,Ot),Gt.right=k0(vt,bt,Ot+1,Tt),Gt}return null}function Ug(vt,bt,wt){var Tt=wt-bt;if(Tt>0){var At=bt+Math.floor(Tt/2),Ot=Ug(vt,bt,At),Dt=vt.head;return Dt.left=Ot,vt.head=vt.head.next,Dt.right=Ug(vt,At+1,wt),Dt}return null}function A0(vt,bt,wt,Tt,At){if(!(wt>=Tt)){for(var Ot=vt[wt+Tt>>1],Dt=wt-1,jt=Tt+1;;){do Dt++;while(At(vt[Dt],Ot)<0);do jt--;while(At(vt[jt],Ot)>0);if(Dt>=jt)break;var Gt=vt[Dt];vt[Dt]=vt[jt],vt[jt]=Gt,Gt=bt[Dt],bt[Dt]=bt[jt],bt[jt]=Gt}A0(vt,bt,wt,jt,At),A0(vt,bt,jt+1,Tt,At)}}function Dl(vt,bt){if(!(vt instanceof bt))throw new TypeError("Cannot call a class as a function")}function L0(vt,bt){for(var wt=0;wt<bt.length;wt++){var Tt=bt[wt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(vt,Tt.key,Tt)}}function kl(vt,bt,wt){return bt&&L0(vt.prototype,bt),wt&&L0(vt,wt),vt}var Op=function(vt,bt){return vt.ll.x<=bt.x&&bt.x<=vt.ur.x&&vt.ll.y<=bt.y&&bt.y<=vt.ur.y},Gg=function(vt,bt){if(bt.ur.x<vt.ll.x||vt.ur.x<bt.ll.x||bt.ur.y<vt.ll.y||vt.ur.y<bt.ll.y)return null;var wt=vt.ll.x<bt.ll.x?bt.ll.x:vt.ll.x,Tt=vt.ur.x<bt.ur.x?vt.ur.x:bt.ur.x;return{ll:{x:wt,y:vt.ll.y<bt.ll.y?bt.ll.y:vt.ll.y},ur:{x:Tt,y:vt.ur.y<bt.ur.y?vt.ur.y:bt.ur.y}}},hh=Number.EPSILON;hh===void 0&&(hh=Math.pow(2,-52));var Wg=hh*hh,P0=function(vt,bt){if(-hh<vt&&vt<hh&&-hh<bt&&bt<hh)return 0;var wt=vt-bt;return wt*wt<Wg*vt*bt?0:vt<bt?-1:1},ry=function(){function vt(){Dl(this,vt),this.reset()}return kl(vt,[{key:"reset",value:function(){this.xRounder=new iy,this.yRounder=new iy}},{key:"round",value:function(bt,wt){return{x:this.xRounder.round(bt),y:this.yRounder.round(wt)}}}]),vt}(),iy=function(){function vt(){Dl(this,vt),this.tree=new T0,this.round(0)}return kl(vt,[{key:"round",value:function(bt){var wt=this.tree.add(bt),Tt=this.tree.prev(wt);if(Tt!==null&&P0(wt.key,Tt.key)===0)return this.tree.remove(bt),Tt.key;var At=this.tree.next(wt);return At!==null&&P0(wt.key,At.key)===0?(this.tree.remove(bt),At.key):bt}}]),vt}(),$p=new ry,Rp=function(vt,bt){return vt.x*bt.y-vt.y*bt.x},oy=function(vt,bt){return vt.x*bt.x+vt.y*bt.y},sy=function(vt,bt,wt){var Tt={x:bt.x-vt.x,y:bt.y-vt.y},At={x:wt.x-vt.x,y:wt.y-vt.y},Ot=Rp(Tt,At);return P0(Ot,0)},qg=function(vt){return Math.sqrt(oy(vt,vt))},ay=function(vt,bt,wt){var Tt={x:bt.x-vt.x,y:bt.y-vt.y},At={x:wt.x-vt.x,y:wt.y-vt.y};return oy(At,Tt)/qg(At)/qg(Tt)},ly=function(vt,bt,wt){return bt.y===0?null:{x:vt.x+bt.x/bt.y*(wt-vt.y),y:wt}},cy=function(vt,bt,wt){return bt.x===0?null:{x:wt,y:vt.y+bt.y/bt.x*(wt-vt.x)}},Ou=function(){function vt(bt,wt){Dl(this,vt),bt.events===void 0?bt.events=[this]:bt.events.push(this),this.point=bt,this.isLeft=wt}return kl(vt,null,[{key:"compare",value:function(bt,wt){var Tt=vt.comparePoints(bt.point,wt.point);return Tt!==0?Tt:(bt.point!==wt.point&&bt.link(wt),bt.isLeft!==wt.isLeft?bt.isLeft?1:-1:Yg.compare(bt.segment,wt.segment))}},{key:"comparePoints",value:function(bt,wt){return bt.x<wt.x?-1:bt.x>wt.x?1:bt.y<wt.y?-1:bt.y>wt.y?1:0}}]),kl(vt,[{key:"link",value:function(bt){if(bt.point===this.point)throw new Error("Tried to link already linked events");for(var wt=bt.point.events,Tt=0,At=wt.length;Tt<At;Tt++){var Ot=wt[Tt];this.point.events.push(Ot),Ot.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var bt=this.point.events.length,wt=0;wt<bt;wt++){var Tt=this.point.events[wt];if(Tt.segment.consumedBy===void 0)for(var At=wt+1;At<bt;At++){var Ot=this.point.events[At];Ot.consumedBy===void 0&&Tt.otherSE.point.events===Ot.otherSE.point.events&&Tt.segment.consume(Ot.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var bt=[],wt=0,Tt=this.point.events.length;wt<Tt;wt++){var At=this.point.events[wt];At!==this&&!At.segment.ringOut&&At.segment.isInResult()&&bt.push(At)}return bt}},{key:"getLeftmostComparator",value:function(bt){var wt=this,Tt=new Map,At=function(Ot){var Dt,jt,Gt,qt,en,Xt=Ot.otherSE;Tt.set(Ot,{sine:(Dt=wt.point,jt=bt.point,Gt=Xt.point,qt={x:jt.x-Dt.x,y:jt.y-Dt.y},en={x:Gt.x-Dt.x,y:Gt.y-Dt.y},Rp(en,qt)/qg(en)/qg(qt)),cosine:ay(wt.point,bt.point,Xt.point)})};return function(Ot,Dt){Tt.has(Ot)||At(Ot),Tt.has(Dt)||At(Dt);var jt=Tt.get(Ot),Gt=jt.sine,qt=jt.cosine,en=Tt.get(Dt),Xt=en.sine,sn=en.cosine;return Gt>=0&&Xt>=0?qt<sn?1:qt>sn?-1:0:Gt<0&&Xt<0?qt<sn?-1:qt>sn?1:0:Xt<Gt?-1:Xt>Gt?1:0}}}]),vt}(),Xv=0,Yg=function(){function vt(bt,wt,Tt,At){Dl(this,vt),this.id=++Xv,this.leftSE=bt,bt.segment=this,bt.otherSE=wt,this.rightSE=wt,wt.segment=this,wt.otherSE=bt,this.rings=Tt,this.windings=At}return kl(vt,null,[{key:"compare",value:function(bt,wt){var Tt=bt.leftSE.point.x,At=wt.leftSE.point.x,Ot=bt.rightSE.point.x,Dt=wt.rightSE.point.x;if(Dt<Tt)return 1;if(Ot<At)return-1;var jt=bt.leftSE.point.y,Gt=wt.leftSE.point.y,qt=bt.rightSE.point.y,en=wt.rightSE.point.y;if(Tt<At){if(Gt<jt&&Gt<qt)return 1;if(Gt>jt&&Gt>qt)return-1;var Xt=bt.comparePoint(wt.leftSE.point);if(Xt<0)return 1;if(Xt>0)return-1;var sn=wt.comparePoint(bt.rightSE.point);return sn!==0?sn:-1}if(Tt>At){if(jt<Gt&&jt<en)return-1;if(jt>Gt&&jt>en)return 1;var yn=wt.comparePoint(bt.leftSE.point);if(yn!==0)return yn;var vn=bt.comparePoint(wt.rightSE.point);return vn<0?1:vn>0?-1:1}if(jt<Gt)return-1;if(jt>Gt)return 1;if(Ot<Dt){var Sn=wt.comparePoint(bt.rightSE.point);if(Sn!==0)return Sn}if(Ot>Dt){var fn=bt.comparePoint(wt.rightSE.point);if(fn<0)return 1;if(fn>0)return-1}if(Ot!==Dt){var Dn=qt-jt,rr=Ot-Tt,bn=en-Gt,Nn=Dt-At;if(Dn>rr&&bn<Nn)return 1;if(Dn<rr&&bn>Nn)return-1}return Ot>Dt?1:Ot<Dt||qt<en?-1:qt>en?1:bt.id<wt.id?-1:bt.id>wt.id?1:0}}]),kl(vt,[{key:"replaceRightSE",value:function(bt){this.rightSE=bt,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var bt=this.leftSE.point.y,wt=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:bt<wt?bt:wt},ur:{x:this.rightSE.point.x,y:bt>wt?bt:wt}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(bt){return bt.x===this.leftSE.point.x&&bt.y===this.leftSE.point.y||bt.x===this.rightSE.point.x&&bt.y===this.rightSE.point.y}},{key:"comparePoint",value:function(bt){if(this.isAnEndpoint(bt))return 0;var wt=this.leftSE.point,Tt=this.rightSE.point,At=this.vector();if(wt.x===Tt.x)return bt.x===wt.x?0:bt.x<wt.x?1:-1;var Ot=(bt.y-wt.y)/At.y,Dt=wt.x+Ot*At.x;if(bt.x===Dt)return 0;var jt=(bt.x-wt.x)/At.x,Gt=wt.y+jt*At.y;return bt.y===Gt?0:bt.y<Gt?-1:1}},{key:"getIntersection",value:function(bt){var wt=this.bbox(),Tt=bt.bbox(),At=Gg(wt,Tt);if(At===null)return null;var Ot=this.leftSE.point,Dt=this.rightSE.point,jt=bt.leftSE.point,Gt=bt.rightSE.point,qt=Op(wt,jt)&&this.comparePoint(jt)===0,en=Op(Tt,Ot)&&bt.comparePoint(Ot)===0,Xt=Op(wt,Gt)&&this.comparePoint(Gt)===0,sn=Op(Tt,Dt)&&bt.comparePoint(Dt)===0;if(en&&qt)return sn&&!Xt?Dt:!sn&&Xt?Gt:null;if(en)return Xt&&Ot.x===Gt.x&&Ot.y===Gt.y?null:Ot;if(qt)return sn&&Dt.x===jt.x&&Dt.y===jt.y?null:jt;if(sn&&Xt)return null;if(sn)return Dt;if(Xt)return Gt;var yn=function(vn,Sn,fn,Dn){if(Sn.x===0)return cy(fn,Dn,vn.x);if(Dn.x===0)return cy(vn,Sn,fn.x);if(Sn.y===0)return ly(fn,Dn,vn.y);if(Dn.y===0)return ly(vn,Sn,fn.y);var rr=Rp(Sn,Dn);if(rr==0)return null;var bn={x:fn.x-vn.x,y:fn.y-vn.y},Nn=Rp(bn,Sn)/rr,Bn=Rp(bn,Dn)/rr;return{x:(vn.x+Bn*Sn.x+(fn.x+Nn*Dn.x))/2,y:(vn.y+Bn*Sn.y+(fn.y+Nn*Dn.y))/2}}(Ot,this.vector(),jt,bt.vector());return yn===null?null:Op(At,yn)?$p.round(yn.x,yn.y):null}},{key:"split",value:function(bt){var wt=[],Tt=bt.events!==void 0,At=new Ou(bt,!0),Ot=new Ou(bt,!1),Dt=this.rightSE;this.replaceRightSE(Ot),wt.push(Ot),wt.push(At);var jt=new vt(At,Dt,this.rings.slice(),this.windings.slice());return Ou.comparePoints(jt.leftSE.point,jt.rightSE.point)>0&&jt.swapEvents(),Ou.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Tt&&(At.checkForConsuming(),Ot.checkForConsuming()),wt}},{key:"swapEvents",value:function(){var bt=this.rightSE;this.rightSE=this.leftSE,this.leftSE=bt,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var wt=0,Tt=this.windings.length;wt<Tt;wt++)this.windings[wt]*=-1}},{key:"consume",value:function(bt){for(var wt=this,Tt=bt;wt.consumedBy;)wt=wt.consumedBy;for(;Tt.consumedBy;)Tt=Tt.consumedBy;var At=vt.compare(wt,Tt);if(At!==0){if(At>0){var Ot=wt;wt=Tt,Tt=Ot}if(wt.prev===Tt){var Dt=wt;wt=Tt,Tt=Dt}for(var jt=0,Gt=Tt.rings.length;jt<Gt;jt++){var qt=Tt.rings[jt],en=Tt.windings[jt],Xt=wt.rings.indexOf(qt);Xt===-1?(wt.rings.push(qt),wt.windings.push(en)):wt.windings[Xt]+=en}Tt.rings=null,Tt.windings=null,Tt.consumedBy=wt,Tt.leftSE.consumedBy=wt.leftSE,Tt.rightSE.consumedBy=wt.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var bt=this.prev.consumedBy||this.prev;this._beforeState=bt.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var bt=this.beforeState();this._afterState={rings:bt.rings.slice(0),windings:bt.windings.slice(0),multiPolys:[]};for(var wt=this._afterState.rings,Tt=this._afterState.windings,At=this._afterState.multiPolys,Ot=0,Dt=this.rings.length;Ot<Dt;Ot++){var jt=this.rings[Ot],Gt=this.windings[Ot],qt=wt.indexOf(jt);qt===-1?(wt.push(jt),Tt.push(Gt)):Tt[qt]+=Gt}for(var en=[],Xt=[],sn=0,yn=wt.length;sn<yn;sn++)if(Tt[sn]!==0){var vn=wt[sn],Sn=vn.poly;if(Xt.indexOf(Sn)===-1)if(vn.isExterior)en.push(Sn);else{Xt.indexOf(Sn)===-1&&Xt.push(Sn);var fn=en.indexOf(vn.poly);fn!==-1&&en.splice(fn,1)}}for(var Dn=0,rr=en.length;Dn<rr;Dn++){var bn=en[Dn].multiPoly;At.indexOf(bn)===-1&&At.push(bn)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var bt=this.beforeState().multiPolys,wt=this.afterState().multiPolys;switch(lu.type){case"union":var Tt=bt.length===0,At=wt.length===0;this._isInResult=Tt!==At;break;case"intersection":var Ot,Dt;bt.length<wt.length?(Ot=bt.length,Dt=wt.length):(Ot=wt.length,Dt=bt.length),this._isInResult=Dt===lu.numMultiPolys&&Ot<Dt;break;case"xor":var jt=Math.abs(bt.length-wt.length);this._isInResult=jt%2==1;break;case"difference":var Gt=function(qt){return qt.length===1&&qt[0].isSubject};this._isInResult=Gt(bt)!==Gt(wt);break;default:throw new Error("Unrecognized operation type found ".concat(lu.type))}return this._isInResult}}],[{key:"fromRing",value:function(bt,wt,Tt){var At,Ot,Dt,jt=Ou.comparePoints(bt,wt);if(jt<0)At=bt,Ot=wt,Dt=1;else{if(!(jt>0))throw new Error("Tried to create degenerate segment at [".concat(bt.x,", ").concat(bt.y,"]"));At=wt,Ot=bt,Dt=-1}return new vt(new Ou(At,!0),new Ou(Ot,!1),[Tt],[Dt])}}]),vt}(),uy=function(){function vt(bt,wt,Tt){if(Dl(this,vt),!Array.isArray(bt)||bt.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=wt,this.isExterior=Tt,this.segments=[],typeof bt[0][0]!="number"||typeof bt[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var At=$p.round(bt[0][0],bt[0][1]);this.bbox={ll:{x:At.x,y:At.y},ur:{x:At.x,y:At.y}};for(var Ot=At,Dt=1,jt=bt.length;Dt<jt;Dt++){if(typeof bt[Dt][0]!="number"||typeof bt[Dt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Gt=$p.round(bt[Dt][0],bt[Dt][1]);Gt.x===Ot.x&&Gt.y===Ot.y||(this.segments.push(Yg.fromRing(Ot,Gt,this)),Gt.x<this.bbox.ll.x&&(this.bbox.ll.x=Gt.x),Gt.y<this.bbox.ll.y&&(this.bbox.ll.y=Gt.y),Gt.x>this.bbox.ur.x&&(this.bbox.ur.x=Gt.x),Gt.y>this.bbox.ur.y&&(this.bbox.ur.y=Gt.y),Ot=Gt)}At.x===Ot.x&&At.y===Ot.y||this.segments.push(Yg.fromRing(Ot,At,this))}return kl(vt,[{key:"getSweepEvents",value:function(){for(var bt=[],wt=0,Tt=this.segments.length;wt<Tt;wt++){var At=this.segments[wt];bt.push(At.leftSE),bt.push(At.rightSE)}return bt}}]),vt}(),Zv=function(){function vt(bt,wt){if(Dl(this,vt),!Array.isArray(bt))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new uy(bt[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Tt=1,At=bt.length;Tt<At;Tt++){var Ot=new uy(bt[Tt],this,!1);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.interiorRings.push(Ot)}this.multiPoly=wt}return kl(vt,[{key:"getSweepEvents",value:function(){for(var bt=this.exteriorRing.getSweepEvents(),wt=0,Tt=this.interiorRings.length;wt<Tt;wt++)for(var At=this.interiorRings[wt].getSweepEvents(),Ot=0,Dt=At.length;Ot<Dt;Ot++)bt.push(At[Ot]);return bt}}]),vt}(),hy=function(){function vt(bt,wt){if(Dl(this,vt),!Array.isArray(bt))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof bt[0][0][0]=="number"&&(bt=[bt])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Tt=0,At=bt.length;Tt<At;Tt++){var Ot=new Zv(bt[Tt],this);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.polys.push(Ot)}this.isSubject=wt}return kl(vt,[{key:"getSweepEvents",value:function(){for(var bt=[],wt=0,Tt=this.polys.length;wt<Tt;wt++)for(var At=this.polys[wt].getSweepEvents(),Ot=0,Dt=At.length;Ot<Dt;Ot++)bt.push(At[Ot]);return bt}}]),vt}(),dy=function(){function vt(bt){Dl(this,vt),this.events=bt;for(var wt=0,Tt=bt.length;wt<Tt;wt++)bt[wt].segment.ringOut=this;this.poly=null}return kl(vt,null,[{key:"factory",value:function(bt){for(var wt=[],Tt=0,At=bt.length;Tt<At;Tt++){var Ot=bt[Tt];if(Ot.isInResult()&&!Ot.ringOut){for(var Dt=null,jt=Ot.leftSE,Gt=Ot.rightSE,qt=[jt],en=jt.point,Xt=[];Dt=jt,jt=Gt,qt.push(jt),jt.point!==en;)for(;;){var sn=jt.getAvailableLinkedEvents();if(sn.length===0){var yn=qt[0].point,vn=qt[qt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(yn.x,",")+" ".concat(yn.y,"]. Last matching segment found ends at")+" [".concat(vn.x,", ").concat(vn.y,"]."))}if(sn.length===1){Gt=sn[0].otherSE;break}for(var Sn=null,fn=0,Dn=Xt.length;fn<Dn;fn++)if(Xt[fn].point===jt.point){Sn=fn;break}if(Sn===null){Xt.push({index:qt.length,point:jt.point});var rr=jt.getLeftmostComparator(Dt);Gt=sn.sort(rr)[0].otherSE;break}var bn=Xt.splice(Sn)[0],Nn=qt.splice(bn.index);Nn.unshift(Nn[0].otherSE),wt.push(new vt(Nn.reverse()))}wt.push(new vt(qt))}}return wt}}]),kl(vt,[{key:"getGeom",value:function(){for(var bt=this.events[0].point,wt=[bt],Tt=1,At=this.events.length-1;Tt<At;Tt++){var Ot=this.events[Tt].point,Dt=this.events[Tt+1].point;sy(Ot,bt,Dt)!==0&&(wt.push(Ot),bt=Ot)}if(wt.length===1)return null;var jt=wt[0],Gt=wt[1];sy(jt,bt,Gt)===0&&wt.shift(),wt.push(wt[0]);for(var qt=this.isExteriorRing()?1:-1,en=this.isExteriorRing()?0:wt.length-1,Xt=this.isExteriorRing()?wt.length:-1,sn=[],yn=en;yn!=Xt;yn+=qt)sn.push([wt[yn].x,wt[yn].y]);return sn}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var bt=this.enclosingRing();this._isExteriorRing=!bt||!bt.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var bt=this.events[0],wt=1,Tt=this.events.length;wt<Tt;wt++){var At=this.events[wt];Ou.compare(bt,At)>0&&(bt=At)}for(var Ot=bt.segment.prevInResult(),Dt=Ot?Ot.prevInResult():null;;){if(!Ot)return null;if(!Dt)return Ot.ringOut;if(Dt.ringOut!==Ot.ringOut)return Dt.ringOut.enclosingRing()!==Ot.ringOut?Ot.ringOut:Ot.ringOut.enclosingRing();Ot=Dt.prevInResult(),Dt=Ot?Ot.prevInResult():null}}}]),vt}(),fy=function(){function vt(bt){Dl(this,vt),this.exteriorRing=bt,bt.poly=this,this.interiorRings=[]}return kl(vt,[{key:"addInterior",value:function(bt){this.interiorRings.push(bt),bt.poly=this}},{key:"getGeom",value:function(){var bt=[this.exteriorRing.getGeom()];if(bt[0]===null)return null;for(var wt=0,Tt=this.interiorRings.length;wt<Tt;wt++){var At=this.interiorRings[wt].getGeom();At!==null&&bt.push(At)}return bt}}]),vt}(),Kv=function(){function vt(bt){Dl(this,vt),this.rings=bt,this.polys=this._composePolys(bt)}return kl(vt,[{key:"getGeom",value:function(){for(var bt=[],wt=0,Tt=this.polys.length;wt<Tt;wt++){var At=this.polys[wt].getGeom();At!==null&&bt.push(At)}return bt}},{key:"_composePolys",value:function(bt){for(var wt=[],Tt=0,At=bt.length;Tt<At;Tt++){var Ot=bt[Tt];if(!Ot.poly)if(Ot.isExteriorRing())wt.push(new fy(Ot));else{var Dt=Ot.enclosingRing();Dt.poly||wt.push(new fy(Dt)),Dt.poly.addInterior(Ot)}}return wt}}]),vt}(),Jv=function(){function vt(bt){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yg.compare;Dl(this,vt),this.queue=bt,this.tree=new T0(wt),this.segments=[]}return kl(vt,[{key:"process",value:function(bt){var wt=bt.segment,Tt=[];if(bt.consumedBy)return bt.isLeft?this.queue.remove(bt.otherSE):this.tree.remove(wt),Tt;var At=bt.isLeft?this.tree.insert(wt):this.tree.find(wt);if(!At)throw new Error("Unable to find segment #".concat(wt.id," ")+"[".concat(wt.leftSE.point.x,", ").concat(wt.leftSE.point.y,"] -> ")+"[".concat(wt.rightSE.point.x,", ").concat(wt.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Ot=At,Dt=At,jt=void 0,Gt=void 0;jt===void 0;)(Ot=this.tree.prev(Ot))===null?jt=null:Ot.key.consumedBy===void 0&&(jt=Ot.key);for(;Gt===void 0;)(Dt=this.tree.next(Dt))===null?Gt=null:Dt.key.consumedBy===void 0&&(Gt=Dt.key);if(bt.isLeft){var qt=null;if(jt){var en=jt.getIntersection(wt);if(en!==null&&(wt.isAnEndpoint(en)||(qt=en),!jt.isAnEndpoint(en)))for(var Xt=this._splitSafely(jt,en),sn=0,yn=Xt.length;sn<yn;sn++)Tt.push(Xt[sn])}var vn=null;if(Gt){var Sn=Gt.getIntersection(wt);if(Sn!==null&&(wt.isAnEndpoint(Sn)||(vn=Sn),!Gt.isAnEndpoint(Sn)))for(var fn=this._splitSafely(Gt,Sn),Dn=0,rr=fn.length;Dn<rr;Dn++)Tt.push(fn[Dn])}if(qt!==null||vn!==null){var bn=null;qt===null?bn=vn:vn===null?bn=qt:bn=Ou.comparePoints(qt,vn)<=0?qt:vn,this.queue.remove(wt.rightSE),Tt.push(wt.rightSE);for(var Nn=wt.split(bn),Bn=0,Gn=Nn.length;Bn<Gn;Bn++)Tt.push(Nn[Bn])}Tt.length>0?(this.tree.remove(wt),Tt.push(bt)):(this.segments.push(wt),wt.prev=jt)}else{if(jt&&Gt){var jn=jt.getIntersection(Gt);if(jn!==null){if(!jt.isAnEndpoint(jn))for(var Vr=this._splitSafely(jt,jn),$r=0,qr=Vr.length;$r<qr;$r++)Tt.push(Vr[$r]);if(!Gt.isAnEndpoint(jn))for(var Rr=this._splitSafely(Gt,jn),Jr=0,Br=Rr.length;Jr<Br;Jr++)Tt.push(Rr[Jr])}}this.tree.remove(wt)}return Tt}},{key:"_splitSafely",value:function(bt,wt){this.tree.remove(bt);var Tt=bt.rightSE;this.queue.remove(Tt);var At=bt.split(wt);return At.push(Tt),bt.consumedBy===void 0&&this.tree.insert(bt),At}}]),vt}(),py=typeof process<"u"&&{version:"2.0.0-beta.31"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Qv=typeof process<"u"&&{version:"2.0.0-beta.31"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,lu=new(function(){function vt(){Dl(this,vt)}return kl(vt,[{key:"run",value:function(bt,wt,Tt){lu.type=bt,$p.reset();for(var At=[new hy(wt,!0)],Ot=0,Dt=Tt.length;Ot<Dt;Ot++)At.push(new hy(Tt[Ot],!1));if(lu.numMultiPolys=At.length,lu.type==="difference")for(var jt=At[0],Gt=1;Gt<At.length;)Gg(At[Gt].bbox,jt.bbox)!==null?Gt++:At.splice(Gt,1);if(lu.type==="intersection"){for(var qt=0,en=At.length;qt<en;qt++)for(var Xt=At[qt],sn=qt+1,yn=At.length;sn<yn;sn++)if(Gg(Xt.bbox,At[sn].bbox)===null)return[]}for(var vn=new T0(Ou.compare),Sn=0,fn=At.length;Sn<fn;Sn++)for(var Dn=At[Sn].getSweepEvents(),rr=0,bn=Dn.length;rr<bn;rr++)if(vn.insert(Dn[rr]),vn.size>py)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Nn=new Jv(vn),Bn=vn.size,Gn=vn.pop();Gn;){var jn=Gn.key;if(vn.size===Bn){var Vr=jn.segment;throw new Error("Unable to pop() ".concat(jn.isLeft?"left":"right"," SweepEvent ")+"[".concat(jn.point.x,", ").concat(jn.point.y,"] from segment #").concat(Vr.id," ")+"[".concat(Vr.leftSE.point.x,", ").concat(Vr.leftSE.point.y,"] -> ")+"[".concat(Vr.rightSE.point.x,", ").concat(Vr.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(vn.size>py)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Nn.segments.length>Qv)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var $r=Nn.process(jn),qr=0,Rr=$r.length;qr<Rr;qr++){var Jr=$r[qr];Jr.consumedBy===void 0&&vn.insert(Jr)}Bn=vn.size,Gn=vn.pop()}$p.reset();var Br=dy.factory(Nn.segments);return new Kv(Br).getGeom()}}]),vt}()),dh={union:function(vt){for(var bt=arguments.length,wt=new Array(bt>1?bt-1:0),Tt=1;Tt<bt;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("union",vt,wt)},intersection:function(vt){for(var bt=arguments.length,wt=new Array(bt>1?bt-1:0),Tt=1;Tt<bt;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("intersection",vt,wt)},xor:function(vt){for(var bt=arguments.length,wt=new Array(bt>1?bt-1:0),Tt=1;Tt<bt;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("xor",vt,wt)},difference:function(vt){for(var bt=arguments.length,wt=new Array(bt>1?bt-1:0),Tt=1;Tt<bt;Tt++)wt[Tt-1]=arguments[Tt];return lu.run("difference",vt,wt)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(vt){if(this==null)throw new TypeError(this+" is not an object");var bt=Object(this),wt=Math.max(Math.min(bt.length,9007199254740991),0)||0,Tt=1 in arguments&&parseInt(Number(arguments[1]),10)||0;Tt=Tt<0?Math.max(wt+Tt,0):Math.min(Tt,wt);var At=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:wt;for(At=At<0?Math.max(wt+arguments[2],0):Math.min(At,wt);Tt<At;)bt[Tt]=vt,++Tt;return bt},writable:!0}),Number.isFinite=Number.isFinite||function(vt){return typeof vt=="number"&&isFinite(vt)},Number.isInteger=Number.isInteger||function(vt){return typeof vt=="number"&&isFinite(vt)&&Math.floor(vt)===vt},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(vt){return vt!=vt},Math.trunc=Math.trunc||function(vt){return vt<0?Math.ceil(vt):Math.floor(vt)};var Td=function(){};Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.prototype.equalsWithTolerance=function(vt,bt,wt){return Math.abs(vt-bt)<=wt};var Ns=function(vt){function bt(wt){vt.call(this,wt),this.name="IllegalArgumentException",this.message=wt,this.stack=new vt().stack}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt}(Error),po=function(){},gy={MAX_VALUE:{configurable:!0}};po.isNaN=function(vt){return Number.isNaN(vt)},po.doubleToLongBits=function(vt){return vt},po.longBitsToDouble=function(vt){return vt},po.isInfinite=function(vt){return!Number.isFinite(vt)},gy.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(po,gy);var Jl=function(){},Mp=function(){},kf=function(){};function Ql(){}var Nr=function vt(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=vt.NULL_ORDINATE;else if(arguments.length===1){var bt=arguments[0];this.x=bt.x,this.y=bt.y,this.z=bt.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=vt.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},kd={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Nr.prototype.setOrdinate=function(vt,bt){switch(vt){case Nr.X:this.x=bt;break;case Nr.Y:this.y=bt;break;case Nr.Z:this.z=bt;break;default:throw new Ns("Invalid ordinate index: "+vt)}},Nr.prototype.equals2D=function(){if(arguments.length===1){var vt=arguments[0];return this.x===vt.x&&this.y===vt.y}if(arguments.length===2){var bt=arguments[0],wt=arguments[1];return!!Td.equalsWithTolerance(this.x,bt.x,wt)&&!!Td.equalsWithTolerance(this.y,bt.y,wt)}},Nr.prototype.getOrdinate=function(vt){switch(vt){case Nr.X:return this.x;case Nr.Y:return this.y;case Nr.Z:return this.z}throw new Ns("Invalid ordinate index: "+vt)},Nr.prototype.equals3D=function(vt){return this.x===vt.x&&this.y===vt.y&&(this.z===vt.z||po.isNaN(this.z))&&po.isNaN(vt.z)},Nr.prototype.equals=function(vt){return vt instanceof Nr&&this.equals2D(vt)},Nr.prototype.equalInZ=function(vt,bt){return Td.equalsWithTolerance(this.z,vt.z,bt)},Nr.prototype.compareTo=function(vt){var bt=vt;return this.x<bt.x?-1:this.x>bt.x?1:this.y<bt.y?-1:this.y>bt.y?1:0},Nr.prototype.clone=function(){},Nr.prototype.copy=function(){return new Nr(this)},Nr.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Nr.prototype.distance3D=function(vt){var bt=this.x-vt.x,wt=this.y-vt.y,Tt=this.z-vt.z;return Math.sqrt(bt*bt+wt*wt+Tt*Tt)},Nr.prototype.distance=function(vt){var bt=this.x-vt.x,wt=this.y-vt.y;return Math.sqrt(bt*bt+wt*wt)},Nr.prototype.hashCode=function(){var vt=17;return vt=37*(vt=37*vt+Nr.hashCode(this.x))+Nr.hashCode(this.y)},Nr.prototype.setCoordinate=function(vt){this.x=vt.x,this.y=vt.y,this.z=vt.z},Nr.prototype.interfaces_=function(){return[Jl,Mp,Ql]},Nr.prototype.getClass=function(){return Nr},Nr.hashCode=function(){if(arguments.length===1){var vt=arguments[0],bt=po.doubleToLongBits(vt);return Math.trunc((bt^bt)>>>32)}},kd.DimensionalComparator.get=function(){return fh},kd.serialVersionUID.get=function(){return 6683108902428367e3},kd.NULL_ORDINATE.get=function(){return po.NaN},kd.X.get=function(){return 0},kd.Y.get=function(){return 1},kd.Z.get=function(){return 2},Object.defineProperties(Nr,kd);var fh=function(vt){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var bt=arguments[0];if(bt!==2&&bt!==3)throw new Ns("only 2 or 3 dimensions may be specified");this._dimensionsToTest=bt}}};fh.prototype.compare=function(vt,bt){var wt=vt,Tt=bt,At=fh.compare(wt.x,Tt.x);if(At!==0)return At;var Ot=fh.compare(wt.y,Tt.y);return Ot!==0?Ot:this._dimensionsToTest<=2?0:fh.compare(wt.z,Tt.z)},fh.prototype.interfaces_=function(){return[kf]},fh.prototype.getClass=function(){return fh},fh.compare=function(vt,bt){return vt<bt?-1:vt>bt?1:po.isNaN(vt)?po.isNaN(bt)?0:-1:po.isNaN(bt)?1:0};var Af=function(){};Af.prototype.create=function(){},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af};var Ur=function(){},Np={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.toLocationSymbol=function(vt){switch(vt){case Ur.EXTERIOR:return"e";case Ur.BOUNDARY:return"b";case Ur.INTERIOR:return"i";case Ur.NONE:return"-"}throw new Ns("Unknown location value: "+vt)},Np.INTERIOR.get=function(){return 0},Np.BOUNDARY.get=function(){return 1},Np.EXTERIOR.get=function(){return 2},Np.NONE.get=function(){return-1},Object.defineProperties(Ur,Np);var ro=function(vt,bt){return vt.interfaces_&&vt.interfaces_().indexOf(bt)>-1},Bl=function(){},my={LOG_10:{configurable:!0}};Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Bl.log10=function(vt){var bt=Math.log(vt);return po.isInfinite(bt)||po.isNaN(bt)?bt:bt/Bl.LOG_10},Bl.min=function(vt,bt,wt,Tt){var At=vt;return bt<At&&(At=bt),wt<At&&(At=wt),Tt<At&&(At=Tt),At},Bl.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],bt=arguments[1],wt=arguments[2];return vt<bt?bt:vt>wt?wt:vt}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];return Tt<At?At:Tt>Ot?Ot:Tt}},Bl.wrap=function(vt,bt){return vt<0?bt- -vt%bt:vt%bt},Bl.max=function(){if(arguments.length===3){var vt=arguments[0],bt=arguments[1],wt=arguments[2],Tt=vt;return bt>Tt&&(Tt=bt),wt>Tt&&(Tt=wt),Tt}if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],jt=arguments[3],Gt=At;return Ot>Gt&&(Gt=Ot),Dt>Gt&&(Gt=Dt),jt>Gt&&(Gt=jt),Gt}},Bl.average=function(vt,bt){return(vt+bt)/2},my.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Bl,my);var Fc=function(vt){this.str=vt};Fc.prototype.append=function(vt){this.str+=vt},Fc.prototype.setCharAt=function(vt,bt){this.str=this.str.substr(0,vt)+bt+this.str.substr(vt+1)},Fc.prototype.toString=function(vt){return this.str};var zc=function(vt){this.value=vt};zc.prototype.intValue=function(){return this.value},zc.prototype.compareTo=function(vt){return this.value<vt?-1:this.value>vt?1:0},zc.isNaN=function(vt){return Number.isNaN(vt)};var Dp=function(){};Dp.isWhitespace=function(vt){return vt<=32&&vt>=0||vt===127},Dp.toUpperCase=function(vt){return vt.toUpperCase()};var Xr=function vt(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var bt=arguments[0];this.init(bt)}else if(arguments[0]instanceof vt){var wt=arguments[0];this.init(wt)}else if(typeof arguments[0]=="string"){var Tt=arguments[0];vt.call(this,vt.parse(Tt))}}else if(arguments.length===2){var At=arguments[0],Ot=arguments[1];this.init(At,Ot)}},mc={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Xr.prototype.le=function(vt){return(this._hi<vt._hi||this._hi===vt._hi)&&this._lo<=vt._lo},Xr.prototype.extractSignificantDigits=function(vt,bt){var wt=this.abs(),Tt=Xr.magnitude(wt._hi),At=Xr.TEN.pow(Tt);(wt=wt.divide(At)).gt(Xr.TEN)?(wt=wt.divide(Xr.TEN),Tt+=1):wt.lt(Xr.ONE)&&(wt=wt.multiply(Xr.TEN),Tt-=1);for(var Ot=Tt+1,Dt=new Fc,jt=Xr.MAX_PRINT_DIGITS-1,Gt=0;Gt<=jt;Gt++){vt&&Gt===Ot&&Dt.append(".");var qt=Math.trunc(wt._hi);if(qt<0)break;var en=!1,Xt=0;qt>9?(en=!0,Xt="9"):Xt="0"+qt,Dt.append(Xt),wt=wt.subtract(Xr.valueOf(qt)).multiply(Xr.TEN),en&&wt.selfAdd(Xr.TEN);var sn=!0,yn=Xr.magnitude(wt._hi);if(yn<0&&Math.abs(yn)>=jt-Gt&&(sn=!1),!sn)break}return bt[0]=Tt,Dt.toString()},Xr.prototype.sqr=function(){return this.multiply(this)},Xr.prototype.doubleValue=function(){return this._hi+this._lo},Xr.prototype.subtract=function(){if(arguments[0]instanceof Xr){var vt=arguments[0];return this.add(vt.negate())}if(typeof arguments[0]=="number"){var bt=arguments[0];return this.add(-bt)}},Xr.prototype.equals=function(){if(arguments.length===1){var vt=arguments[0];return this._hi===vt._hi&&this._lo===vt._lo}},Xr.prototype.isZero=function(){return this._hi===0&&this._lo===0},Xr.prototype.selfSubtract=function(){if(arguments[0]instanceof Xr){var vt=arguments[0];return this.isNaN()?this:this.selfAdd(-vt._hi,-vt._lo)}if(typeof arguments[0]=="number"){var bt=arguments[0];return this.isNaN()?this:this.selfAdd(-bt,0)}},Xr.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Xr.prototype.min=function(vt){return this.le(vt)?this:vt},Xr.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof Xr){var vt=arguments[0];return this.selfDivide(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var bt=arguments[0];return this.selfDivide(bt,0)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=null,Ot=null,Dt=null,jt=null,Gt=null,qt=null,en=null,Xt=null;return Gt=this._hi/wt,Xt=(At=(qt=Xr.SPLIT*Gt)-(At=qt-Gt))*(Dt=(Xt=Xr.SPLIT*wt)-(Dt=Xt-wt))-(en=Gt*wt)+At*(jt=wt-Dt)+(Ot=Gt-At)*Dt+Ot*jt,Xt=Gt+(qt=(this._hi-en-Xt+this._lo-Gt*Tt)/wt),this._hi=Xt,this._lo=Gt-Xt+qt,this}},Xr.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Xr.prototype.divide=function(){if(arguments[0]instanceof Xr){var vt=arguments[0],bt=null,wt=null,Tt=null,At=null,Ot=null,Dt=null,jt=null,Gt=null;wt=(Ot=this._hi/vt._hi)-(bt=(Dt=Xr.SPLIT*Ot)-(bt=Dt-Ot)),Gt=bt*(Tt=(Gt=Xr.SPLIT*vt._hi)-(Tt=Gt-vt._hi))-(jt=Ot*vt._hi)+bt*(At=vt._hi-Tt)+wt*Tt+wt*At;var qt=Gt=Ot+(Dt=(this._hi-jt-Gt+this._lo-Ot*vt._lo)/vt._hi),en=Ot-Gt+Dt;return new Xr(qt,en)}if(typeof arguments[0]=="number"){var Xt=arguments[0];return po.isNaN(Xt)?Xr.createNaN():Xr.copy(this).selfDivide(Xt,0)}},Xr.prototype.ge=function(vt){return(this._hi>vt._hi||this._hi===vt._hi)&&this._lo>=vt._lo},Xr.prototype.pow=function(vt){if(vt===0)return Xr.valueOf(1);var bt=new Xr(this),wt=Xr.valueOf(1),Tt=Math.abs(vt);if(Tt>1)for(;Tt>0;)Tt%2==1&&wt.selfMultiply(bt),(Tt/=2)>0&&(bt=bt.sqr());else wt=bt;return vt<0?wt.reciprocal():wt},Xr.prototype.ceil=function(){if(this.isNaN())return Xr.NaN;var vt=Math.ceil(this._hi),bt=0;return vt===this._hi&&(bt=Math.ceil(this._lo)),new Xr(vt,bt)},Xr.prototype.compareTo=function(vt){var bt=vt;return this._hi<bt._hi?-1:this._hi>bt._hi?1:this._lo<bt._lo?-1:this._lo>bt._lo?1:0},Xr.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Xr.prototype.setValue=function(){if(arguments[0]instanceof Xr){var vt=arguments[0];return this.init(vt),this}if(typeof arguments[0]=="number"){var bt=arguments[0];return this.init(bt),this}},Xr.prototype.max=function(vt){return this.ge(vt)?this:vt},Xr.prototype.sqrt=function(){if(this.isZero())return Xr.valueOf(0);if(this.isNegative())return Xr.NaN;var vt=1/Math.sqrt(this._hi),bt=this._hi*vt,wt=Xr.valueOf(bt),Tt=this.subtract(wt.sqr())._hi*(.5*vt);return wt.add(Tt)},Xr.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof Xr){var vt=arguments[0];return this.selfAdd(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var bt=arguments[0],wt=null,Tt=null,At=null,Ot=null,Dt=null,jt=null;return Ot=(At=this._hi+bt)-(Dt=At-this._hi),Tt=(jt=(Ot=bt-Dt+(this._hi-Ot))+this._lo)+(At-(wt=At+jt)),this._hi=wt+Tt,this._lo=Tt+(wt-this._hi),this}}else if(arguments.length===2){var Gt=arguments[0],qt=arguments[1],en=null,Xt=null,sn=null,yn=null,vn=null,Sn=null,fn=null;yn=this._hi+Gt,Xt=this._lo+qt,vn=yn-(Sn=yn-this._hi),sn=Xt-(fn=Xt-this._lo);var Dn=(en=yn+(Sn=(vn=Gt-Sn+(this._hi-vn))+Xt))+(Sn=(sn=qt-fn+(this._lo-sn))+(Sn+(yn-en))),rr=Sn+(en-Dn);return this._hi=Dn,this._lo=rr,this}},Xr.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof Xr){var vt=arguments[0];return this.selfMultiply(vt._hi,vt._lo)}if(typeof arguments[0]=="number"){var bt=arguments[0];return this.selfMultiply(bt,0)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=null,Ot=null,Dt=null,jt=null,Gt=null,qt=null;At=(Gt=Xr.SPLIT*this._hi)-this._hi,qt=Xr.SPLIT*wt,At=Gt-At,Ot=this._hi-At,Dt=qt-wt;var en=(Gt=this._hi*wt)+(qt=At*(Dt=qt-Dt)-Gt+At*(jt=wt-Dt)+Ot*Dt+Ot*jt+(this._hi*Tt+this._lo*wt)),Xt=qt+(At=Gt-en);return this._hi=en,this._lo=Xt,this}},Xr.prototype.selfSqr=function(){return this.selfMultiply(this)},Xr.prototype.floor=function(){if(this.isNaN())return Xr.NaN;var vt=Math.floor(this._hi),bt=0;return vt===this._hi&&(bt=Math.floor(this._lo)),new Xr(vt,bt)},Xr.prototype.negate=function(){return this.isNaN()?this:new Xr(-this._hi,-this._lo)},Xr.prototype.clone=function(){},Xr.prototype.multiply=function(){if(arguments[0]instanceof Xr){var vt=arguments[0];return vt.isNaN()?Xr.createNaN():Xr.copy(this).selfMultiply(vt)}if(typeof arguments[0]=="number"){var bt=arguments[0];return po.isNaN(bt)?Xr.createNaN():Xr.copy(this).selfMultiply(bt,0)}},Xr.prototype.isNaN=function(){return po.isNaN(this._hi)},Xr.prototype.intValue=function(){return Math.trunc(this._hi)},Xr.prototype.toString=function(){var vt=Xr.magnitude(this._hi);return vt>=-3&&vt<=20?this.toStandardNotation():this.toSciNotation()},Xr.prototype.toStandardNotation=function(){var vt=this.getSpecialNumberString();if(vt!==null)return vt;var bt=new Array(1).fill(null),wt=this.extractSignificantDigits(!0,bt),Tt=bt[0]+1,At=wt;if(wt.charAt(0)===".")At="0"+wt;else if(Tt<0)At="0."+Xr.stringOfChar("0",-Tt)+wt;else if(wt.indexOf(".")===-1){var Ot=Tt-wt.length;At=wt+Xr.stringOfChar("0",Ot)+".0"}return this.isNegative()?"-"+At:At},Xr.prototype.reciprocal=function(){var vt,bt,wt,Tt,At=null,Ot=null,Dt=null,jt=null;vt=(wt=1/this._hi)-(At=(Dt=Xr.SPLIT*wt)-(At=Dt-wt)),Ot=(jt=Xr.SPLIT*this._hi)-this._hi;var Gt=wt+(Dt=(1-(Tt=wt*this._hi)-(jt=At*(Ot=jt-Ot)-Tt+At*(bt=this._hi-Ot)+vt*Ot+vt*bt)-wt*this._lo)/this._hi);return new Xr(Gt,wt-Gt+Dt)},Xr.prototype.toSciNotation=function(){if(this.isZero())return Xr.SCI_NOT_ZERO;var vt=this.getSpecialNumberString();if(vt!==null)return vt;var bt=new Array(1).fill(null),wt=this.extractSignificantDigits(!1,bt),Tt=Xr.SCI_NOT_EXPONENT_CHAR+bt[0];if(wt.charAt(0)==="0")throw new Error("Found leading zero: "+wt);var At="";wt.length>1&&(At=wt.substring(1));var Ot=wt.charAt(0)+"."+At;return this.isNegative()?"-"+Ot+Tt:Ot+Tt},Xr.prototype.abs=function(){return this.isNaN()?Xr.NaN:this.isNegative()?this.negate():new Xr(this)},Xr.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},Xr.prototype.lt=function(vt){return(this._hi<vt._hi||this._hi===vt._hi)&&this._lo<vt._lo},Xr.prototype.add=function(){if(arguments[0]instanceof Xr){var vt=arguments[0];return Xr.copy(this).selfAdd(vt)}if(typeof arguments[0]=="number"){var bt=arguments[0];return Xr.copy(this).selfAdd(bt)}},Xr.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var vt=arguments[0];this._hi=vt,this._lo=0}else if(arguments[0]instanceof Xr){var bt=arguments[0];this._hi=bt._hi,this._lo=bt._lo}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this._hi=wt,this._lo=Tt}},Xr.prototype.gt=function(vt){return(this._hi>vt._hi||this._hi===vt._hi)&&this._lo>vt._lo},Xr.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},Xr.prototype.trunc=function(){return this.isNaN()?Xr.NaN:this.isPositive()?this.floor():this.ceil()},Xr.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Xr.prototype.interfaces_=function(){return[Ql,Jl,Mp]},Xr.prototype.getClass=function(){return Xr},Xr.sqr=function(vt){return Xr.valueOf(vt).selfMultiply(vt)},Xr.valueOf=function(){if(typeof arguments[0]=="string"){var vt=arguments[0];return Xr.parse(vt)}if(typeof arguments[0]=="number"){var bt=arguments[0];return new Xr(bt)}},Xr.sqrt=function(vt){return Xr.valueOf(vt).sqrt()},Xr.parse=function(vt){for(var bt=0,wt=vt.length;Dp.isWhitespace(vt.charAt(bt));)bt++;var Tt=!1;if(bt<wt){var At=vt.charAt(bt);At!=="-"&&At!=="+"||(bt++,At==="-"&&(Tt=!0))}for(var Ot=new Xr,Dt=0,jt=0,Gt=0;!(bt>=wt);){var qt=vt.charAt(bt);if(bt++,Dp.isDigit(qt)){var en=qt-"0";Ot.selfMultiply(Xr.TEN),Ot.selfAdd(en),Dt++}else{if(qt!=="."){if(qt==="e"||qt==="E"){var Xt=vt.substring(bt);try{Gt=zc.parseInt(Xt)}catch(fn){throw fn instanceof Error?new Error("Invalid exponent "+Xt+" in string "+vt):fn}break}throw new Error("Unexpected character '"+qt+"' at position "+bt+" in string "+vt)}jt=Dt}}var sn=Ot,yn=Dt-jt-Gt;if(yn===0)sn=Ot;else if(yn>0){var vn=Xr.TEN.pow(yn);sn=Ot.divide(vn)}else if(yn<0){var Sn=Xr.TEN.pow(-yn);sn=Ot.multiply(Sn)}return Tt?sn.negate():sn},Xr.createNaN=function(){return new Xr(po.NaN,po.NaN)},Xr.copy=function(vt){return new Xr(vt)},Xr.magnitude=function(vt){var bt=Math.abs(vt),wt=Math.log(bt)/Math.log(10),Tt=Math.trunc(Math.floor(wt));return 10*Math.pow(10,Tt)<=bt&&(Tt+=1),Tt},Xr.stringOfChar=function(vt,bt){for(var wt=new Fc,Tt=0;Tt<bt;Tt++)wt.append(vt);return wt.toString()},mc.PI.get=function(){return new Xr(3.141592653589793,12246467991473532e-32)},mc.TWO_PI.get=function(){return new Xr(6.283185307179586,24492935982947064e-32)},mc.PI_2.get=function(){return new Xr(1.5707963267948966,6123233995736766e-32)},mc.E.get=function(){return new Xr(2.718281828459045,14456468917292502e-32)},mc.NaN.get=function(){return new Xr(po.NaN,po.NaN)},mc.EPS.get=function(){return 123259516440783e-46},mc.SPLIT.get=function(){return 134217729},mc.MAX_PRINT_DIGITS.get=function(){return 32},mc.TEN.get=function(){return Xr.valueOf(10)},mc.ONE.get=function(){return Xr.valueOf(1)},mc.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},mc.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Xr,mc);var fl=function(){},yy={DP_SAFE_EPSILON:{configurable:!0}};fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.orientationIndex=function(vt,bt,wt){var Tt=fl.orientationIndexFilter(vt,bt,wt);if(Tt<=1)return Tt;var At=Xr.valueOf(bt.x).selfAdd(-vt.x),Ot=Xr.valueOf(bt.y).selfAdd(-vt.y),Dt=Xr.valueOf(wt.x).selfAdd(-bt.x),jt=Xr.valueOf(wt.y).selfAdd(-bt.y);return At.selfMultiply(jt).selfSubtract(Ot.selfMultiply(Dt)).signum()},fl.signOfDet2x2=function(vt,bt,wt,Tt){return vt.multiply(Tt).selfSubtract(bt.multiply(wt)).signum()},fl.intersection=function(vt,bt,wt,Tt){var At=Xr.valueOf(Tt.y).selfSubtract(wt.y).selfMultiply(Xr.valueOf(bt.x).selfSubtract(vt.x)),Ot=Xr.valueOf(Tt.x).selfSubtract(wt.x).selfMultiply(Xr.valueOf(bt.y).selfSubtract(vt.y)),Dt=At.subtract(Ot),jt=Xr.valueOf(Tt.x).selfSubtract(wt.x).selfMultiply(Xr.valueOf(vt.y).selfSubtract(wt.y)),Gt=Xr.valueOf(Tt.y).selfSubtract(wt.y).selfMultiply(Xr.valueOf(vt.x).selfSubtract(wt.x)),qt=jt.subtract(Gt).selfDivide(Dt).doubleValue(),en=Xr.valueOf(vt.x).selfAdd(Xr.valueOf(bt.x).selfSubtract(vt.x).selfMultiply(qt)).doubleValue(),Xt=Xr.valueOf(bt.x).selfSubtract(vt.x).selfMultiply(Xr.valueOf(vt.y).selfSubtract(wt.y)),sn=Xr.valueOf(bt.y).selfSubtract(vt.y).selfMultiply(Xr.valueOf(vt.x).selfSubtract(wt.x)),yn=Xt.subtract(sn).selfDivide(Dt).doubleValue(),vn=Xr.valueOf(wt.y).selfAdd(Xr.valueOf(Tt.y).selfSubtract(wt.y).selfMultiply(yn)).doubleValue();return new Nr(en,vn)},fl.orientationIndexFilter=function(vt,bt,wt){var Tt=null,At=(vt.x-wt.x)*(bt.y-wt.y),Ot=(vt.y-wt.y)*(bt.x-wt.x),Dt=At-Ot;if(At>0){if(Ot<=0)return fl.signum(Dt);Tt=At+Ot}else{if(!(At<0)||Ot>=0)return fl.signum(Dt);Tt=-At-Ot}var jt=fl.DP_SAFE_EPSILON*Tt;return Dt>=jt||-Dt>=jt?fl.signum(Dt):2},fl.signum=function(vt){return vt>0?1:vt<0?-1:0},yy.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(fl,yy);var Yo=function(){},Bp={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Bp.X.get=function(){return 0},Bp.Y.get=function(){return 1},Bp.Z.get=function(){return 2},Bp.M.get=function(){return 3},Yo.prototype.setOrdinate=function(vt,bt,wt){},Yo.prototype.size=function(){},Yo.prototype.getOrdinate=function(vt,bt){},Yo.prototype.getCoordinate=function(){},Yo.prototype.getCoordinateCopy=function(vt){},Yo.prototype.getDimension=function(){},Yo.prototype.getX=function(vt){},Yo.prototype.clone=function(){},Yo.prototype.expandEnvelope=function(vt){},Yo.prototype.copy=function(){},Yo.prototype.getY=function(vt){},Yo.prototype.toCoordinateArray=function(){},Yo.prototype.interfaces_=function(){return[Mp]},Yo.prototype.getClass=function(){return Yo},Object.defineProperties(Yo,Bp);var vy=function(){},Ad=function(vt){function bt(){vt.call(this,"Projective point not representable on the Cartesian plane.")}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(vy),za=function(){};za.arraycopy=function(vt,bt,wt,Tt,At){for(var Ot=0,Dt=bt;Dt<bt+At;Dt++)wt[Tt+Ot]=vt[Dt],Ot++},za.getProperty=function(vt){return{"line.separator":`
`}[vt]};var ec=function vt(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var bt=arguments[0];this.x=bt.x,this.y=bt.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var wt=arguments[0],Tt=arguments[1];this.x=wt,this.y=Tt,this.w=1}else if(arguments[0]instanceof vt&&arguments[1]instanceof vt){var At=arguments[0],Ot=arguments[1];this.x=At.y*Ot.w-Ot.y*At.w,this.y=Ot.x*At.w-At.x*Ot.w,this.w=At.x*Ot.y-Ot.x*At.y}else if(arguments[0]instanceof Nr&&arguments[1]instanceof Nr){var Dt=arguments[0],jt=arguments[1];this.x=Dt.y-jt.y,this.y=jt.x-Dt.x,this.w=Dt.x*jt.y-jt.x*Dt.y}}else if(arguments.length===3){var Gt=arguments[0],qt=arguments[1],en=arguments[2];this.x=Gt,this.y=qt,this.w=en}else if(arguments.length===4){var Xt=arguments[0],sn=arguments[1],yn=arguments[2],vn=arguments[3],Sn=Xt.y-sn.y,fn=sn.x-Xt.x,Dn=Xt.x*sn.y-sn.x*Xt.y,rr=yn.y-vn.y,bn=vn.x-yn.x,Nn=yn.x*vn.y-vn.x*yn.y;this.x=fn*Nn-bn*Dn,this.y=rr*Dn-Sn*Nn,this.w=Sn*bn-rr*fn}};ec.prototype.getY=function(){var vt=this.y/this.w;if(po.isNaN(vt)||po.isInfinite(vt))throw new Ad;return vt},ec.prototype.getX=function(){var vt=this.x/this.w;if(po.isNaN(vt)||po.isInfinite(vt))throw new Ad;return vt},ec.prototype.getCoordinate=function(){var vt=new Nr;return vt.x=this.getX(),vt.y=this.getY(),vt},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.intersection=function(vt,bt,wt,Tt){var At=vt.y-bt.y,Ot=bt.x-vt.x,Dt=vt.x*bt.y-bt.x*vt.y,jt=wt.y-Tt.y,Gt=Tt.x-wt.x,qt=wt.x*Tt.y-Tt.x*wt.y,en=At*Gt-jt*Ot,Xt=(Ot*qt-Gt*Dt)/en,sn=(jt*Dt-At*qt)/en;if(po.isNaN(Xt)||po.isInfinite(Xt)||po.isNaN(sn)||po.isInfinite(sn))throw new Ad;return new Nr(Xt,sn)};var Ui=function vt(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Nr){var bt=arguments[0];this.init(bt.x,bt.x,bt.y,bt.y)}else if(arguments[0]instanceof vt){var wt=arguments[0];this.init(wt)}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.init(Tt.x,At.x,Tt.y,At.y)}else if(arguments.length===4){var Ot=arguments[0],Dt=arguments[1],jt=arguments[2],Gt=arguments[3];this.init(Ot,Dt,jt,Gt)}},_y={serialVersionUID:{configurable:!0}};Ui.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ui.prototype.equals=function(vt){if(!(vt instanceof Ui))return!1;var bt=vt;return this.isNull()?bt.isNull():this._maxx===bt.getMaxX()&&this._maxy===bt.getMaxY()&&this._minx===bt.getMinX()&&this._miny===bt.getMinY()},Ui.prototype.intersection=function(vt){if(this.isNull()||vt.isNull()||!this.intersects(vt))return new Ui;var bt=this._minx>vt._minx?this._minx:vt._minx,wt=this._miny>vt._miny?this._miny:vt._miny,Tt=this._maxx<vt._maxx?this._maxx:vt._maxx,At=this._maxy<vt._maxy?this._maxy:vt._maxy;return new Ui(bt,Tt,wt,At)},Ui.prototype.isNull=function(){return this._maxx<this._minx},Ui.prototype.getMaxX=function(){return this._maxx},Ui.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Nr){var vt=arguments[0];return this.covers(vt.x,vt.y)}if(arguments[0]instanceof Ui){var bt=arguments[0];return!this.isNull()&&!bt.isNull()&&bt.getMinX()>=this._minx&&bt.getMaxX()<=this._maxx&&bt.getMinY()>=this._miny&&bt.getMaxY()<=this._maxy}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return!this.isNull()&&wt>=this._minx&&wt<=this._maxx&&Tt>=this._miny&&Tt<=this._maxy}},Ui.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Ui){var vt=arguments[0];return!this.isNull()&&!vt.isNull()&&!(vt._minx>this._maxx||vt._maxx<this._minx||vt._miny>this._maxy||vt._maxy<this._miny)}if(arguments[0]instanceof Nr){var bt=arguments[0];return this.intersects(bt.x,bt.y)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return!this.isNull()&&!(wt>this._maxx||wt<this._minx||Tt>this._maxy||Tt<this._miny)}},Ui.prototype.getMinY=function(){return this._miny},Ui.prototype.getMinX=function(){return this._minx},Ui.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Nr){var vt=arguments[0];this.expandToInclude(vt.x,vt.y)}else if(arguments[0]instanceof Ui){var bt=arguments[0];if(bt.isNull())return null;this.isNull()?(this._minx=bt.getMinX(),this._maxx=bt.getMaxX(),this._miny=bt.getMinY(),this._maxy=bt.getMaxY()):(bt._minx<this._minx&&(this._minx=bt._minx),bt._maxx>this._maxx&&(this._maxx=bt._maxx),bt._miny<this._miny&&(this._miny=bt._miny),bt._maxy>this._maxy&&(this._maxy=bt._maxy))}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this.isNull()?(this._minx=wt,this._maxx=wt,this._miny=Tt,this._maxy=Tt):(wt<this._minx&&(this._minx=wt),wt>this._maxx&&(this._maxx=wt),Tt<this._miny&&(this._miny=Tt),Tt>this._maxy&&(this._maxy=Tt))}},Ui.prototype.minExtent=function(){if(this.isNull())return 0;var vt=this.getWidth(),bt=this.getHeight();return vt<bt?vt:bt},Ui.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ui.prototype.compareTo=function(vt){var bt=vt;return this.isNull()?bt.isNull()?0:-1:bt.isNull()?1:this._minx<bt._minx?-1:this._minx>bt._minx?1:this._miny<bt._miny?-1:this._miny>bt._miny?1:this._maxx<bt._maxx?-1:this._maxx>bt._maxx?1:this._maxy<bt._maxy?-1:this._maxy>bt._maxy?1:0},Ui.prototype.translate=function(vt,bt){if(this.isNull())return null;this.init(this.getMinX()+vt,this.getMaxX()+vt,this.getMinY()+bt,this.getMaxY()+bt)},Ui.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ui.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ui.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ui.prototype.maxExtent=function(){if(this.isNull())return 0;var vt=this.getWidth(),bt=this.getHeight();return vt>bt?vt:bt},Ui.prototype.expandBy=function(){if(arguments.length===1){var vt=arguments[0];this.expandBy(vt,vt)}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];if(this.isNull())return null;this._minx-=bt,this._maxx+=bt,this._miny-=wt,this._maxy+=wt,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ui.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Ui){var vt=arguments[0];return this.covers(vt)}if(arguments[0]instanceof Nr){var bt=arguments[0];return this.covers(bt)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return this.covers(wt,Tt)}},Ui.prototype.centre=function(){return this.isNull()?null:new Nr((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ui.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Nr){var vt=arguments[0];this.init(vt.x,vt.x,vt.y,vt.y)}else if(arguments[0]instanceof Ui){var bt=arguments[0];this._minx=bt._minx,this._maxx=bt._maxx,this._miny=bt._miny,this._maxy=bt._maxy}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this.init(wt.x,Tt.x,wt.y,Tt.y)}else if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],jt=arguments[3];At<Ot?(this._minx=At,this._maxx=Ot):(this._minx=Ot,this._maxx=At),Dt<jt?(this._miny=Dt,this._maxy=jt):(this._miny=jt,this._maxy=Dt)}},Ui.prototype.getMaxY=function(){return this._maxy},Ui.prototype.distance=function(vt){if(this.intersects(vt))return 0;var bt=0;this._maxx<vt._minx?bt=vt._minx-this._maxx:this._minx>vt._maxx&&(bt=this._minx-vt._maxx);var wt=0;return this._maxy<vt._miny?wt=vt._miny-this._maxy:this._miny>vt._maxy&&(wt=this._miny-vt._maxy),bt===0?wt:wt===0?bt:Math.sqrt(bt*bt+wt*wt)},Ui.prototype.hashCode=function(){var vt=17;return vt=37*(vt=37*(vt=37*(vt=37*vt+Nr.hashCode(this._minx))+Nr.hashCode(this._maxx))+Nr.hashCode(this._miny))+Nr.hashCode(this._maxy)},Ui.prototype.interfaces_=function(){return[Jl,Ql]},Ui.prototype.getClass=function(){return Ui},Ui.intersects=function(){if(arguments.length===3){var vt=arguments[0],bt=arguments[1],wt=arguments[2];return wt.x>=(vt.x<bt.x?vt.x:bt.x)&&wt.x<=(vt.x>bt.x?vt.x:bt.x)&&wt.y>=(vt.y<bt.y?vt.y:bt.y)&&wt.y<=(vt.y>bt.y?vt.y:bt.y)}if(arguments.length===4){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Dt=arguments[3],jt=Math.min(Ot.x,Dt.x),Gt=Math.max(Ot.x,Dt.x),qt=Math.min(Tt.x,At.x),en=Math.max(Tt.x,At.x);return!(qt>Gt)&&!(en<jt)&&(jt=Math.min(Ot.y,Dt.y),Gt=Math.max(Ot.y,Dt.y),qt=Math.min(Tt.y,At.y),en=Math.max(Tt.y,At.y),!(qt>Gt)&&!(en<jt))}},_y.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(Ui,_y);var Hc={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Fp=function(vt){this.geometryFactory=vt||new Io};Fp.prototype.read=function(vt){var bt,wt,Tt;vt=vt.replace(/[\n\r]/g," ");var At=Hc.typeStr.exec(vt);if(vt.search("EMPTY")!==-1&&((At=Hc.emptyTypeStr.exec(vt))[2]=void 0),At&&(wt=At[1].toLowerCase(),Tt=At[2],Lf[wt]&&(bt=Lf[wt].apply(this,[Tt]))),bt===void 0)throw new Error("Could not parse WKT "+vt);return bt},Fp.prototype.write=function(vt){return this.extractGeometry(vt)},Fp.prototype.extractGeometry=function(vt){var bt=vt.getGeometryType().toLowerCase();if(!$u[bt])return null;var wt=bt.toUpperCase();return vt.isEmpty()?wt+" EMPTY":wt+"("+$u[bt].apply(this,[vt])+")"};var $u={coordinate:function(vt){return vt.x+" "+vt.y},point:function(vt){return $u.coordinate.call(this,vt._coordinates._coordinates[0])},multipoint:function(vt){for(var bt=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)bt.push("("+$u.point.apply(this,[vt._geometries[wt]])+")");return bt.join(",")},linestring:function(vt){for(var bt=[],wt=0,Tt=vt._points._coordinates.length;wt<Tt;++wt)bt.push($u.coordinate.apply(this,[vt._points._coordinates[wt]]));return bt.join(",")},linearring:function(vt){for(var bt=[],wt=0,Tt=vt._points._coordinates.length;wt<Tt;++wt)bt.push($u.coordinate.apply(this,[vt._points._coordinates[wt]]));return bt.join(",")},multilinestring:function(vt){for(var bt=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)bt.push("("+$u.linestring.apply(this,[vt._geometries[wt]])+")");return bt.join(",")},polygon:function(vt){var bt=[];bt.push("("+$u.linestring.apply(this,[vt._shell])+")");for(var wt=0,Tt=vt._holes.length;wt<Tt;++wt)bt.push("("+$u.linestring.apply(this,[vt._holes[wt]])+")");return bt.join(",")},multipolygon:function(vt){for(var bt=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)bt.push("("+$u.polygon.apply(this,[vt._geometries[wt]])+")");return bt.join(",")},geometrycollection:function(vt){for(var bt=[],wt=0,Tt=vt._geometries.length;wt<Tt;++wt)bt.push(this.extractGeometry(vt._geometries[wt]));return bt.join(",")}},Lf={point:function(vt){if(vt===void 0)return this.geometryFactory.createPoint();var bt=vt.trim().split(Hc.spaces);return this.geometryFactory.createPoint(new Nr(Number.parseFloat(bt[0]),Number.parseFloat(bt[1])))},multipoint:function(vt){var bt;if(vt===void 0)return this.geometryFactory.createMultiPoint();for(var wt=vt.trim().split(","),Tt=[],At=0,Ot=wt.length;At<Ot;++At)bt=wt[At].replace(Hc.trimParens,"$1"),Tt.push(Lf.point.apply(this,[bt]));return this.geometryFactory.createMultiPoint(Tt)},linestring:function(vt){if(vt===void 0)return this.geometryFactory.createLineString();for(var bt,wt=vt.trim().split(","),Tt=[],At=0,Ot=wt.length;At<Ot;++At)bt=wt[At].trim().split(Hc.spaces),Tt.push(new Nr(Number.parseFloat(bt[0]),Number.parseFloat(bt[1])));return this.geometryFactory.createLineString(Tt)},linearring:function(vt){if(vt===void 0)return this.geometryFactory.createLinearRing();for(var bt,wt=vt.trim().split(","),Tt=[],At=0,Ot=wt.length;At<Ot;++At)bt=wt[At].trim().split(Hc.spaces),Tt.push(new Nr(Number.parseFloat(bt[0]),Number.parseFloat(bt[1])));return this.geometryFactory.createLinearRing(Tt)},multilinestring:function(vt){var bt;if(vt===void 0)return this.geometryFactory.createMultiLineString();for(var wt=vt.trim().split(Hc.parenComma),Tt=[],At=0,Ot=wt.length;At<Ot;++At)bt=wt[At].replace(Hc.trimParens,"$1"),Tt.push(Lf.linestring.apply(this,[bt]));return this.geometryFactory.createMultiLineString(Tt)},polygon:function(vt){var bt,wt,Tt;if(vt===void 0)return this.geometryFactory.createPolygon();for(var At,Ot=vt.trim().split(Hc.parenComma),Dt=[],jt=0,Gt=Ot.length;jt<Gt;++jt)bt=Ot[jt].replace(Hc.trimParens,"$1"),wt=Lf.linestring.apply(this,[bt]),Tt=this.geometryFactory.createLinearRing(wt._points),jt===0?At=Tt:Dt.push(Tt);return this.geometryFactory.createPolygon(At,Dt)},multipolygon:function(vt){var bt;if(vt===void 0)return this.geometryFactory.createMultiPolygon();for(var wt=vt.trim().split(Hc.doubleParenComma),Tt=[],At=0,Ot=wt.length;At<Ot;++At)bt=wt[At].replace(Hc.trimParens,"$1"),Tt.push(Lf.polygon.apply(this,[bt]));return this.geometryFactory.createMultiPolygon(Tt)},geometrycollection:function(vt){if(vt===void 0)return this.geometryFactory.createGeometryCollection();for(var bt=(vt=vt.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),wt=[],Tt=0,At=bt.length;Tt<At;++Tt)wt.push(this.read(bt[Tt]));return this.geometryFactory.createGeometryCollection(wt)}},yc=function(vt){this.parser=new Fp(vt)};yc.prototype.write=function(vt){return this.parser.write(vt)},yc.toLineString=function(vt,bt){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+vt.x+" "+vt.y+", "+bt.x+" "+bt.y+" )"};var Ru=function(vt){function bt(wt){vt.call(this,wt),this.name="RuntimeException",this.message=wt,this.stack=new vt().stack}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt}(Error),Xg=function(vt){function bt(){if(vt.call(this),arguments.length===0)vt.call(this);else if(arguments.length===1){var wt=arguments[0];vt.call(this,wt)}}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Ru),_o=function(){};_o.prototype.interfaces_=function(){return[]},_o.prototype.getClass=function(){return _o},_o.shouldNeverReachHere=function(){if(arguments.length===0)_o.shouldNeverReachHere(null);else if(arguments.length===1){var vt=arguments[0];throw new Xg("Should never reach here"+(vt!==null?": "+vt:""))}},_o.isTrue=function(){var vt;if(arguments.length===1)_o.isTrue(arguments[0],null);else if(arguments.length===2&&(vt=arguments[1],!arguments[0]))throw vt===null?new Xg:new Xg(vt)},_o.equals=function(){var vt,bt,wt;if(arguments.length===2)_o.equals(vt=arguments[0],bt=arguments[1],null);else if(arguments.length===3&&(vt=arguments[0],wt=arguments[2],!(bt=arguments[1]).equals(vt)))throw new Xg("Expected "+vt+" but encountered "+bt+(wt!==null?": "+wt:""))};var Bs=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Nr,this._intPt[1]=new Nr,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Ld={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Bs.prototype.getIndexAlongSegment=function(vt,bt){return this.computeIntLineIndex(),this._intLineIndex[vt][bt]},Bs.prototype.getTopologySummary=function(){var vt=new Fc;return this.isEndPoint()&&vt.append(" endpoint"),this._isProper&&vt.append(" proper"),this.isCollinear()&&vt.append(" collinear"),vt.toString()},Bs.prototype.computeIntersection=function(vt,bt,wt,Tt){this._inputLines[0][0]=vt,this._inputLines[0][1]=bt,this._inputLines[1][0]=wt,this._inputLines[1][1]=Tt,this._result=this.computeIntersect(vt,bt,wt,Tt)},Bs.prototype.getIntersectionNum=function(){return this._result},Bs.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var vt=arguments[0],bt=this.getEdgeDistance(vt,0),wt=this.getEdgeDistance(vt,1);bt>wt?(this._intLineIndex[vt][0]=0,this._intLineIndex[vt][1]=1):(this._intLineIndex[vt][0]=1,this._intLineIndex[vt][1]=0)}},Bs.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Bs.prototype.setPrecisionModel=function(vt){this._precisionModel=vt},Bs.prototype.isInteriorIntersection=function(){var vt=this;if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var bt=arguments[0],wt=0;wt<this._result;wt++)if(!vt._intPt[wt].equals2D(vt._inputLines[bt][0])&&!vt._intPt[wt].equals2D(vt._inputLines[bt][1]))return!0;return!1}},Bs.prototype.getIntersection=function(vt){return this._intPt[vt]},Bs.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Bs.prototype.hasIntersection=function(){return this._result!==Bs.NO_INTERSECTION},Bs.prototype.getEdgeDistance=function(vt,bt){return Bs.computeEdgeDistance(this._intPt[bt],this._inputLines[vt][0],this._inputLines[vt][1])},Bs.prototype.isCollinear=function(){return this._result===Bs.COLLINEAR_INTERSECTION},Bs.prototype.toString=function(){return yc.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+yc.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Bs.prototype.getEndpoint=function(vt,bt){return this._inputLines[vt][bt]},Bs.prototype.isIntersection=function(vt){for(var bt=0;bt<this._result;bt++)if(this._intPt[bt].equals2D(vt))return!0;return!1},Bs.prototype.getIntersectionAlongSegment=function(vt,bt){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[vt][bt]]},Bs.prototype.interfaces_=function(){return[]},Bs.prototype.getClass=function(){return Bs},Bs.computeEdgeDistance=function(vt,bt,wt){var Tt=Math.abs(wt.x-bt.x),At=Math.abs(wt.y-bt.y),Ot=-1;if(vt.equals(bt))Ot=0;else if(vt.equals(wt))Ot=Tt>At?Tt:At;else{var Dt=Math.abs(vt.x-bt.x),jt=Math.abs(vt.y-bt.y);(Ot=Tt>At?Dt:jt)!==0||vt.equals(bt)||(Ot=Math.max(Dt,jt))}return _o.isTrue(!(Ot===0&&!vt.equals(bt)),"Bad distance calculation"),Ot},Bs.nonRobustComputeEdgeDistance=function(vt,bt,wt){var Tt=vt.x-bt.x,At=vt.y-bt.y,Ot=Math.sqrt(Tt*Tt+At*At);return _o.isTrue(!(Ot===0&&!vt.equals(bt)),"Invalid distance calculation"),Ot},Ld.DONT_INTERSECT.get=function(){return 0},Ld.DO_INTERSECT.get=function(){return 1},Ld.COLLINEAR.get=function(){return 2},Ld.NO_INTERSECTION.get=function(){return 0},Ld.POINT_INTERSECTION.get=function(){return 1},Ld.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Bs,Ld);var ph=function(vt){function bt(){vt.apply(this,arguments)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.isInSegmentEnvelopes=function(wt){var Tt=new Ui(this._inputLines[0][0],this._inputLines[0][1]),At=new Ui(this._inputLines[1][0],this._inputLines[1][1]);return Tt.contains(wt)&&At.contains(wt)},bt.prototype.computeIntersection=function(){if(arguments.length!==3)return vt.prototype.computeIntersection.apply(this,arguments);var wt=arguments[0],Tt=arguments[1],At=arguments[2];if(this._isProper=!1,Ui.intersects(Tt,At,wt)&&ki.orientationIndex(Tt,At,wt)===0&&ki.orientationIndex(At,Tt,wt)===0)return this._isProper=!0,(wt.equals(Tt)||wt.equals(At))&&(this._isProper=!1),this._result=vt.POINT_INTERSECTION,null;this._result=vt.NO_INTERSECTION},bt.prototype.normalizeToMinimum=function(wt,Tt,At,Ot,Dt){Dt.x=this.smallestInAbsValue(wt.x,Tt.x,At.x,Ot.x),Dt.y=this.smallestInAbsValue(wt.y,Tt.y,At.y,Ot.y),wt.x-=Dt.x,wt.y-=Dt.y,Tt.x-=Dt.x,Tt.y-=Dt.y,At.x-=Dt.x,At.y-=Dt.y,Ot.x-=Dt.x,Ot.y-=Dt.y},bt.prototype.safeHCoordinateIntersection=function(wt,Tt,At,Ot){var Dt=null;try{Dt=ec.intersection(wt,Tt,At,Ot)}catch(jt){if(!(jt instanceof Ad))throw jt;Dt=bt.nearestEndpoint(wt,Tt,At,Ot)}return Dt},bt.prototype.intersection=function(wt,Tt,At,Ot){var Dt=this.intersectionWithNormalization(wt,Tt,At,Ot);return this.isInSegmentEnvelopes(Dt)||(Dt=new Nr(bt.nearestEndpoint(wt,Tt,At,Ot))),this._precisionModel!==null&&this._precisionModel.makePrecise(Dt),Dt},bt.prototype.smallestInAbsValue=function(wt,Tt,At,Ot){var Dt=wt,jt=Math.abs(Dt);return Math.abs(Tt)<jt&&(Dt=Tt,jt=Math.abs(Tt)),Math.abs(At)<jt&&(Dt=At,jt=Math.abs(At)),Math.abs(Ot)<jt&&(Dt=Ot),Dt},bt.prototype.checkDD=function(wt,Tt,At,Ot,Dt){var jt=fl.intersection(wt,Tt,At,Ot),Gt=this.isInSegmentEnvelopes(jt);za.out.println("DD in env = "+Gt+"  --------------------- "+jt),Dt.distance(jt)>1e-4&&za.out.println("Distance = "+Dt.distance(jt))},bt.prototype.intersectionWithNormalization=function(wt,Tt,At,Ot){var Dt=new Nr(wt),jt=new Nr(Tt),Gt=new Nr(At),qt=new Nr(Ot),en=new Nr;this.normalizeToEnvCentre(Dt,jt,Gt,qt,en);var Xt=this.safeHCoordinateIntersection(Dt,jt,Gt,qt);return Xt.x+=en.x,Xt.y+=en.y,Xt},bt.prototype.computeCollinearIntersection=function(wt,Tt,At,Ot){var Dt=Ui.intersects(wt,Tt,At),jt=Ui.intersects(wt,Tt,Ot),Gt=Ui.intersects(At,Ot,wt),qt=Ui.intersects(At,Ot,Tt);return Dt&&jt?(this._intPt[0]=At,this._intPt[1]=Ot,vt.COLLINEAR_INTERSECTION):Gt&&qt?(this._intPt[0]=wt,this._intPt[1]=Tt,vt.COLLINEAR_INTERSECTION):Dt&&Gt?(this._intPt[0]=At,this._intPt[1]=wt,!At.equals(wt)||jt||qt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):Dt&&qt?(this._intPt[0]=At,this._intPt[1]=Tt,!At.equals(Tt)||jt||Gt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):jt&&Gt?(this._intPt[0]=Ot,this._intPt[1]=wt,!Ot.equals(wt)||Dt||qt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):jt&&qt?(this._intPt[0]=Ot,this._intPt[1]=Tt,!Ot.equals(Tt)||Dt||Gt?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):vt.NO_INTERSECTION},bt.prototype.normalizeToEnvCentre=function(wt,Tt,At,Ot,Dt){var jt=wt.x<Tt.x?wt.x:Tt.x,Gt=wt.y<Tt.y?wt.y:Tt.y,qt=wt.x>Tt.x?wt.x:Tt.x,en=wt.y>Tt.y?wt.y:Tt.y,Xt=At.x<Ot.x?At.x:Ot.x,sn=At.y<Ot.y?At.y:Ot.y,yn=At.x>Ot.x?At.x:Ot.x,vn=At.y>Ot.y?At.y:Ot.y,Sn=((jt>Xt?jt:Xt)+(qt<yn?qt:yn))/2,fn=((Gt>sn?Gt:sn)+(en<vn?en:vn))/2;Dt.x=Sn,Dt.y=fn,wt.x-=Dt.x,wt.y-=Dt.y,Tt.x-=Dt.x,Tt.y-=Dt.y,At.x-=Dt.x,At.y-=Dt.y,Ot.x-=Dt.x,Ot.y-=Dt.y},bt.prototype.computeIntersect=function(wt,Tt,At,Ot){if(this._isProper=!1,!Ui.intersects(wt,Tt,At,Ot))return vt.NO_INTERSECTION;var Dt=ki.orientationIndex(wt,Tt,At),jt=ki.orientationIndex(wt,Tt,Ot);if(Dt>0&&jt>0||Dt<0&&jt<0)return vt.NO_INTERSECTION;var Gt=ki.orientationIndex(At,Ot,wt),qt=ki.orientationIndex(At,Ot,Tt);return Gt>0&&qt>0||Gt<0&&qt<0?vt.NO_INTERSECTION:Dt===0&&jt===0&&Gt===0&&qt===0?this.computeCollinearIntersection(wt,Tt,At,Ot):(Dt===0||jt===0||Gt===0||qt===0?(this._isProper=!1,wt.equals2D(At)||wt.equals2D(Ot)?this._intPt[0]=wt:Tt.equals2D(At)||Tt.equals2D(Ot)?this._intPt[0]=Tt:Dt===0?this._intPt[0]=new Nr(At):jt===0?this._intPt[0]=new Nr(Ot):Gt===0?this._intPt[0]=new Nr(wt):qt===0&&(this._intPt[0]=new Nr(Tt))):(this._isProper=!0,this._intPt[0]=this.intersection(wt,Tt,At,Ot)),vt.POINT_INTERSECTION)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.nearestEndpoint=function(wt,Tt,At,Ot){var Dt=wt,jt=ki.distancePointLine(wt,At,Ot),Gt=ki.distancePointLine(Tt,At,Ot);return Gt<jt&&(jt=Gt,Dt=Tt),(Gt=ki.distancePointLine(At,wt,Tt))<jt&&(jt=Gt,Dt=At),(Gt=ki.distancePointLine(Ot,wt,Tt))<jt&&(jt=Gt,Dt=Ot),Dt},bt}(Bs),Pd=function(){};Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd},Pd.orientationIndex=function(vt,bt,wt){var Tt=bt.x-vt.x,At=bt.y-vt.y,Ot=wt.x-bt.x,Dt=wt.y-bt.y;return Pd.signOfDet2x2(Tt,At,Ot,Dt)},Pd.signOfDet2x2=function(vt,bt,wt,Tt){var At=null,Ot=null,Dt=null;if(At=1,vt===0||Tt===0)return bt===0||wt===0?0:bt>0?wt>0?-At:At:wt>0?At:-At;if(bt===0||wt===0)return Tt>0?vt>0?At:-At:vt>0?-At:At;if(bt>0?Tt>0?bt<=Tt||(At=-At,Ot=vt,vt=wt,wt=Ot,Ot=bt,bt=Tt,Tt=Ot):bt<=-Tt?(At=-At,wt=-wt,Tt=-Tt):(Ot=vt,vt=-wt,wt=Ot,Ot=bt,bt=-Tt,Tt=Ot):Tt>0?-bt<=Tt?(At=-At,vt=-vt,bt=-bt):(Ot=-vt,vt=wt,wt=Ot,Ot=-bt,bt=Tt,Tt=Ot):bt>=Tt?(vt=-vt,bt=-bt,wt=-wt,Tt=-Tt):(At=-At,Ot=-vt,vt=-wt,wt=Ot,Ot=-bt,bt=-Tt,Tt=Ot),vt>0){if(!(wt>0)||!(vt<=wt))return At}else{if(wt>0||!(vt>=wt))return-At;At=-At,vt=-vt,wt=-wt}for(;;){if((Tt-=(Dt=Math.floor(wt/vt))*bt)<0)return-At;if(Tt>bt)return At;if(vt>(wt-=Dt*vt)+wt){if(bt<Tt+Tt)return At}else{if(bt>Tt+Tt)return-At;wt=vt-wt,Tt=bt-Tt,At=-At}if(Tt===0)return wt===0?0:-At;if(wt===0||(bt-=(Dt=Math.floor(vt/wt))*Tt)<0)return At;if(bt>Tt)return-At;if(wt>(vt-=Dt*wt)+vt){if(Tt<bt+bt)return-At}else{if(Tt>bt+bt)return At;vt=wt-vt,bt=Tt-bt,At=-At}if(bt===0)return vt===0?0:At;if(vt===0)return-At}};var jc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var vt=arguments[0];this._p=vt};jc.prototype.countSegment=function(vt,bt){if(vt.x<this._p.x&&bt.x<this._p.x)return null;if(this._p.x===bt.x&&this._p.y===bt.y)return this._isPointOnSegment=!0,null;if(vt.y===this._p.y&&bt.y===this._p.y){var wt=vt.x,Tt=bt.x;return wt>Tt&&(wt=bt.x,Tt=vt.x),this._p.x>=wt&&this._p.x<=Tt&&(this._isPointOnSegment=!0),null}if(vt.y>this._p.y&&bt.y<=this._p.y||bt.y>this._p.y&&vt.y<=this._p.y){var At=vt.x-this._p.x,Ot=vt.y-this._p.y,Dt=bt.x-this._p.x,jt=bt.y-this._p.y,Gt=Pd.signOfDet2x2(At,Ot,Dt,jt);if(Gt===0)return this._isPointOnSegment=!0,null;jt<Ot&&(Gt=-Gt),Gt>0&&this._crossingCount++}},jc.prototype.isPointInPolygon=function(){return this.getLocation()!==Ur.EXTERIOR},jc.prototype.getLocation=function(){return this._isPointOnSegment?Ur.BOUNDARY:this._crossingCount%2==1?Ur.INTERIOR:Ur.EXTERIOR},jc.prototype.isOnSegment=function(){return this._isPointOnSegment},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.locatePointInRing=function(){if(arguments[0]instanceof Nr&&ro(arguments[1],Yo)){for(var vt=arguments[0],bt=arguments[1],wt=new jc(vt),Tt=new Nr,At=new Nr,Ot=1;Ot<bt.size();Ot++)if(bt.getCoordinate(Ot,Tt),bt.getCoordinate(Ot-1,At),wt.countSegment(Tt,At),wt.isOnSegment())return wt.getLocation();return wt.getLocation()}if(arguments[0]instanceof Nr&&arguments[1]instanceof Array){for(var Dt=arguments[0],jt=arguments[1],Gt=new jc(Dt),qt=1;qt<jt.length;qt++){var en=jt[qt],Xt=jt[qt-1];if(Gt.countSegment(en,Xt),Gt.isOnSegment())return Gt.getLocation()}return Gt.getLocation()}};var ki=function(){},Id={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.orientationIndex=function(vt,bt,wt){return fl.orientationIndex(vt,bt,wt)},ki.signedArea=function(){if(arguments[0]instanceof Array){var vt=arguments[0];if(vt.length<3)return 0;for(var bt=0,wt=vt[0].x,Tt=1;Tt<vt.length-1;Tt++){var At=vt[Tt].x-wt,Ot=vt[Tt+1].y,Dt=vt[Tt-1].y;bt+=At*(Dt-Ot)}return bt/2}if(ro(arguments[0],Yo)){var jt=arguments[0],Gt=jt.size();if(Gt<3)return 0;var qt=new Nr,en=new Nr,Xt=new Nr;jt.getCoordinate(0,en),jt.getCoordinate(1,Xt);var sn=en.x;Xt.x-=sn;for(var yn=0,vn=1;vn<Gt-1;vn++)qt.y=en.y,en.x=Xt.x,en.y=Xt.y,jt.getCoordinate(vn+1,Xt),Xt.x-=sn,yn+=en.x*(qt.y-Xt.y);return yn/2}},ki.distanceLineLine=function(vt,bt,wt,Tt){if(vt.equals(bt))return ki.distancePointLine(vt,wt,Tt);if(wt.equals(Tt))return ki.distancePointLine(Tt,vt,bt);var At=!1;if(Ui.intersects(vt,bt,wt,Tt)){var Ot=(bt.x-vt.x)*(Tt.y-wt.y)-(bt.y-vt.y)*(Tt.x-wt.x);if(Ot===0)At=!0;else{var Dt=(vt.y-wt.y)*(Tt.x-wt.x)-(vt.x-wt.x)*(Tt.y-wt.y),jt=((vt.y-wt.y)*(bt.x-vt.x)-(vt.x-wt.x)*(bt.y-vt.y))/Ot,Gt=Dt/Ot;(Gt<0||Gt>1||jt<0||jt>1)&&(At=!0)}}else At=!0;return At?Bl.min(ki.distancePointLine(vt,wt,Tt),ki.distancePointLine(bt,wt,Tt),ki.distancePointLine(wt,vt,bt),ki.distancePointLine(Tt,vt,bt)):0},ki.isPointInRing=function(vt,bt){return ki.locatePointInRing(vt,bt)!==Ur.EXTERIOR},ki.computeLength=function(vt){var bt=vt.size();if(bt<=1)return 0;var wt=0,Tt=new Nr;vt.getCoordinate(0,Tt);for(var At=Tt.x,Ot=Tt.y,Dt=1;Dt<bt;Dt++){vt.getCoordinate(Dt,Tt);var jt=Tt.x,Gt=Tt.y,qt=jt-At,en=Gt-Ot;wt+=Math.sqrt(qt*qt+en*en),At=jt,Ot=Gt}return wt},ki.isCCW=function(vt){var bt=vt.length-1;if(bt<3)throw new Ns("Ring has fewer than 4 points, so orientation cannot be determined");for(var wt=vt[0],Tt=0,At=1;At<=bt;At++){var Ot=vt[At];Ot.y>wt.y&&(wt=Ot,Tt=At)}var Dt=Tt;do(Dt-=1)<0&&(Dt=bt);while(vt[Dt].equals2D(wt)&&Dt!==Tt);var jt=Tt;do jt=(jt+1)%bt;while(vt[jt].equals2D(wt)&&jt!==Tt);var Gt=vt[Dt],qt=vt[jt];if(Gt.equals2D(wt)||qt.equals2D(wt)||Gt.equals2D(qt))return!1;var en=ki.computeOrientation(Gt,wt,qt),Xt=!1;return Xt=en===0?Gt.x>qt.x:en>0,Xt},ki.locatePointInRing=function(vt,bt){return jc.locatePointInRing(vt,bt)},ki.distancePointLinePerpendicular=function(vt,bt,wt){var Tt=(wt.x-bt.x)*(wt.x-bt.x)+(wt.y-bt.y)*(wt.y-bt.y),At=((bt.y-vt.y)*(wt.x-bt.x)-(bt.x-vt.x)*(wt.y-bt.y))/Tt;return Math.abs(At)*Math.sqrt(Tt)},ki.computeOrientation=function(vt,bt,wt){return ki.orientationIndex(vt,bt,wt)},ki.distancePointLine=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1];if(bt.length===0)throw new Ns("Line array must contain at least one vertex");for(var wt=vt.distance(bt[0]),Tt=0;Tt<bt.length-1;Tt++){var At=ki.distancePointLine(vt,bt[Tt],bt[Tt+1]);At<wt&&(wt=At)}return wt}if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],jt=arguments[2];if(Dt.x===jt.x&&Dt.y===jt.y)return Ot.distance(Dt);var Gt=(jt.x-Dt.x)*(jt.x-Dt.x)+(jt.y-Dt.y)*(jt.y-Dt.y),qt=((Ot.x-Dt.x)*(jt.x-Dt.x)+(Ot.y-Dt.y)*(jt.y-Dt.y))/Gt;if(qt<=0)return Ot.distance(Dt);if(qt>=1)return Ot.distance(jt);var en=((Dt.y-Ot.y)*(jt.x-Dt.x)-(Dt.x-Ot.x)*(jt.y-Dt.y))/Gt;return Math.abs(en)*Math.sqrt(Gt)}},ki.isOnLine=function(vt,bt){for(var wt=new ph,Tt=1;Tt<bt.length;Tt++){var At=bt[Tt-1],Ot=bt[Tt];if(wt.computeIntersection(vt,At,Ot),wt.hasIntersection())return!0}return!1},Id.CLOCKWISE.get=function(){return-1},Id.RIGHT.get=function(){return ki.CLOCKWISE},Id.COUNTERCLOCKWISE.get=function(){return 1},Id.LEFT.get=function(){return ki.COUNTERCLOCKWISE},Id.COLLINEAR.get=function(){return 0},Id.STRAIGHT.get=function(){return ki.COLLINEAR},Object.defineProperties(ki,Id);var cu=function(){};cu.prototype.filter=function(vt){},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu};var to=function(){var vt=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=vt,this._SRID=vt.getSRID()},uu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};to.prototype.isGeometryCollection=function(){return this.getSortIndex()===to.SORTINDEX_GEOMETRYCOLLECTION},to.prototype.getFactory=function(){return this._factory},to.prototype.getGeometryN=function(vt){return this},to.prototype.getArea=function(){return 0},to.prototype.isRectangle=function(){return!1},to.prototype.equals=function(){if(arguments[0]instanceof to){var vt=arguments[0];return vt!==null&&this.equalsTopo(vt)}if(arguments[0]instanceof Object){var bt=arguments[0];if(!(bt instanceof to))return!1;var wt=bt;return this.equalsExact(wt)}},to.prototype.equalsExact=function(vt){return this===vt||this.equalsExact(vt,0)},to.prototype.geometryChanged=function(){this.apply(to.geometryChangedFilter)},to.prototype.geometryChangedAction=function(){this._envelope=null},to.prototype.equalsNorm=function(vt){return vt!==null&&this.norm().equalsExact(vt.norm())},to.prototype.getLength=function(){return 0},to.prototype.getNumGeometries=function(){return 1},to.prototype.compareTo=function(){if(arguments.length===1){var vt=arguments[0],bt=vt;return this.getSortIndex()!==bt.getSortIndex()?this.getSortIndex()-bt.getSortIndex():this.isEmpty()&&bt.isEmpty()?0:this.isEmpty()?-1:bt.isEmpty()?1:this.compareToSameClass(vt)}if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return this.getSortIndex()!==wt.getSortIndex()?this.getSortIndex()-wt.getSortIndex():this.isEmpty()&&wt.isEmpty()?0:this.isEmpty()?-1:wt.isEmpty()?1:this.compareToSameClass(wt,Tt)}},to.prototype.getUserData=function(){return this._userData},to.prototype.getSRID=function(){return this._SRID},to.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},to.prototype.checkNotGeometryCollection=function(vt){if(vt.getSortIndex()===to.SORTINDEX_GEOMETRYCOLLECTION)throw new Ns("This method does not support GeometryCollection arguments")},to.prototype.equal=function(vt,bt,wt){return wt===0?vt.equals(bt):vt.distance(bt)<=wt},to.prototype.norm=function(){var vt=this.copy();return vt.normalize(),vt},to.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},to.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Ui(this._envelope)},to.prototype.setSRID=function(vt){this._SRID=vt},to.prototype.setUserData=function(vt){this._userData=vt},to.prototype.compare=function(vt,bt){for(var wt=vt.iterator(),Tt=bt.iterator();wt.hasNext()&&Tt.hasNext();){var At=wt.next(),Ot=Tt.next(),Dt=At.compareTo(Ot);if(Dt!==0)return Dt}return wt.hasNext()?1:Tt.hasNext()?-1:0},to.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},to.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===to.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===to.SORTINDEX_MULTIPOINT||this.getSortIndex()===to.SORTINDEX_MULTILINESTRING||this.getSortIndex()===to.SORTINDEX_MULTIPOLYGON},to.prototype.interfaces_=function(){return[Mp,Jl,Ql]},to.prototype.getClass=function(){return to},to.hasNonEmptyElements=function(vt){for(var bt=0;bt<vt.length;bt++)if(!vt[bt].isEmpty())return!0;return!1},to.hasNullElements=function(vt){for(var bt=0;bt<vt.length;bt++)if(vt[bt]===null)return!0;return!1},uu.serialVersionUID.get=function(){return 8763622679187377e3},uu.SORTINDEX_POINT.get=function(){return 0},uu.SORTINDEX_MULTIPOINT.get=function(){return 1},uu.SORTINDEX_LINESTRING.get=function(){return 2},uu.SORTINDEX_LINEARRING.get=function(){return 3},uu.SORTINDEX_MULTILINESTRING.get=function(){return 4},uu.SORTINDEX_POLYGON.get=function(){return 5},uu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},uu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},uu.geometryChangedFilter.get=function(){return Zg},Object.defineProperties(to,uu);var Zg=function(){};Zg.interfaces_=function(){return[cu]},Zg.filter=function(vt){vt.geometryChangedAction()};var hu=function(){};hu.prototype.filter=function(vt){},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu};var tc=function(){},du={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};tc.prototype.isInBoundary=function(vt){},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},du.Mod2BoundaryNodeRule.get=function(){return Pf},du.EndPointBoundaryNodeRule.get=function(){return Od},du.MultiValentEndPointBoundaryNodeRule.get=function(){return If},du.MonoValentEndPointBoundaryNodeRule.get=function(){return Of},du.MOD2_BOUNDARY_RULE.get=function(){return new Pf},du.ENDPOINT_BOUNDARY_RULE.get=function(){return new Od},du.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new If},du.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Of},du.OGC_SFS_BOUNDARY_RULE.get=function(){return tc.MOD2_BOUNDARY_RULE},Object.defineProperties(tc,du);var Pf=function(){};Pf.prototype.isInBoundary=function(vt){return vt%2==1},Pf.prototype.interfaces_=function(){return[tc]},Pf.prototype.getClass=function(){return Pf};var Od=function(){};Od.prototype.isInBoundary=function(vt){return vt>0},Od.prototype.interfaces_=function(){return[tc]},Od.prototype.getClass=function(){return Od};var If=function(){};If.prototype.isInBoundary=function(vt){return vt>1},If.prototype.interfaces_=function(){return[tc]},If.prototype.getClass=function(){return If};var Of=function(){};Of.prototype.isInBoundary=function(vt){return vt===1},Of.prototype.interfaces_=function(){return[tc]},Of.prototype.getClass=function(){return Of};var ha=function(){};function I0(vt){this.message=vt||""}ha.prototype.add=function(){},ha.prototype.addAll=function(){},ha.prototype.isEmpty=function(){},ha.prototype.iterator=function(){},ha.prototype.size=function(){},ha.prototype.toArray=function(){},ha.prototype.remove=function(){},I0.prototype=new Error,I0.prototype.name="IndexOutOfBoundsException";var $f=function(){};$f.prototype.hasNext=function(){},$f.prototype.next=function(){},$f.prototype.remove=function(){};var vc=function(vt){function bt(){vt.apply(this,arguments)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.get=function(){},bt.prototype.set=function(){},bt.prototype.isEmpty=function(){},bt}(ha);function $d(vt){this.message=vt||""}$d.prototype=new Error,$d.prototype.name="NoSuchElementException";var vi=function(vt){function bt(){vt.call(this),this.array_=[],arguments[0]instanceof ha&&this.addAll(arguments[0])}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.ensureCapacity=function(){},bt.prototype.interfaces_=function(){return[vt,ha]},bt.prototype.add=function(wt){return arguments.length===1?this.array_.push(wt):this.array_.splice(arguments[0],arguments[1]),!0},bt.prototype.clear=function(){this.array_=[]},bt.prototype.addAll=function(wt){for(var Tt=wt.iterator();Tt.hasNext();)this.add(Tt.next());return!0},bt.prototype.set=function(wt,Tt){var At=this.array_[wt];return this.array_[wt]=Tt,At},bt.prototype.iterator=function(){return new by(this)},bt.prototype.get=function(wt){if(wt<0||wt>=this.size())throw new I0;return this.array_[wt]},bt.prototype.isEmpty=function(){return this.array_.length===0},bt.prototype.size=function(){return this.array_.length},bt.prototype.toArray=function(){for(var wt=[],Tt=0,At=this.array_.length;Tt<At;Tt++)wt.push(this.array_[Tt]);return wt},bt.prototype.remove=function(wt){for(var Tt=!1,At=0,Ot=this.array_.length;At<Ot;At++)if(this.array_[At]===wt){this.array_.splice(At,1),Tt=!0;break}return Tt},bt}(vc),by=function(vt){function bt(wt){vt.call(this),this.arrayList_=wt,this.position_=0}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new $d;return this.arrayList_.get(this.position_++)},bt.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},bt.prototype.set=function(wt){return this.arrayList_.set(this.position_-1,wt)},bt.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},bt}($f),zp=function(vt){function bt(){if(vt.call(this),arguments.length!==0){if(arguments.length===1){var Tt=arguments[0];this.ensureCapacity(Tt.length),this.add(Tt,!0)}else if(arguments.length===2){var At=arguments[0],Ot=arguments[1];this.ensureCapacity(At.length),this.add(At,Ot)}}}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={coordArrayType:{configurable:!0}};return wt.coordArrayType.get=function(){return new Array(0).fill(null)},bt.prototype.getCoordinate=function(Tt){return this.get(Tt)},bt.prototype.addAll=function(){var Tt=this;if(arguments.length===2){for(var At=arguments[0],Ot=arguments[1],Dt=!1,jt=At.iterator();jt.hasNext();)Tt.add(jt.next(),Ot),Dt=!0;return Dt}return vt.prototype.addAll.apply(this,arguments)},bt.prototype.clone=function(){for(var Tt=vt.prototype.clone.call(this),At=0;At<this.size();At++)Tt.add(At,this.get(At).copy());return Tt},bt.prototype.toCoordinateArray=function(){return this.toArray(bt.coordArrayType)},bt.prototype.add=function(){var Tt=this;if(arguments.length===1){var At=arguments[0];vt.prototype.add.call(this,At)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Ot=arguments[0],Dt=arguments[1];return this.add(Ot,Dt,!0),!0}if(arguments[0]instanceof Nr&&typeof arguments[1]=="boolean"){var jt=arguments[0],Gt=arguments[1];if(!Gt&&this.size()>=1){var qt=this.get(this.size()-1);if(qt.equals2D(jt))return null}vt.prototype.add.call(this,jt)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var en=arguments[0],Xt=arguments[1];return this.add(en,Xt),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var sn=arguments[0],yn=arguments[1],vn=arguments[2];if(vn)for(var Sn=0;Sn<sn.length;Sn++)Tt.add(sn[Sn],yn);else for(var fn=sn.length-1;fn>=0;fn--)Tt.add(sn[fn],yn);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Nr){var Dn=arguments[0],rr=arguments[1],bn=arguments[2];if(!bn){var Nn=this.size();if(Nn>0){if(Dn>0){var Bn=this.get(Dn-1);if(Bn.equals2D(rr))return null}if(Dn<Nn){var Gn=this.get(Dn);if(Gn.equals2D(rr))return null}}}vt.prototype.add.call(this,Dn,rr)}}else if(arguments.length===4){var jn=arguments[0],Vr=arguments[1],$r=arguments[2],qr=arguments[3],Rr=1;$r>qr&&(Rr=-1);for(var Jr=$r;Jr!==qr;Jr+=Rr)Tt.add(jn[Jr],Vr);return!0}},bt.prototype.closeRing=function(){this.size()>0&&this.add(new Nr(this.get(0)),!1)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},Object.defineProperties(bt,wt),bt}(vi),Po=function(){},Kg={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Kg.ForwardComparator.get=function(){return Hp},Kg.BidirectionalComparator.get=function(){return Rd},Kg.coordArrayType.get=function(){return new Array(0).fill(null)},Po.prototype.interfaces_=function(){return[]},Po.prototype.getClass=function(){return Po},Po.isRing=function(vt){return!(vt.length<4)&&!!vt[0].equals2D(vt[vt.length-1])},Po.ptNotInList=function(vt,bt){for(var wt=0;wt<vt.length;wt++){var Tt=vt[wt];if(Po.indexOf(Tt,bt)<0)return Tt}return null},Po.scroll=function(vt,bt){var wt=Po.indexOf(bt,vt);if(wt<0)return null;var Tt=new Array(vt.length).fill(null);za.arraycopy(vt,wt,Tt,0,vt.length-wt),za.arraycopy(vt,0,Tt,vt.length-wt,wt),za.arraycopy(Tt,0,vt,0,vt.length)},Po.equals=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1];if(vt===bt)return!0;if(vt===null||bt===null||vt.length!==bt.length)return!1;for(var wt=0;wt<vt.length;wt++)if(!vt[wt].equals(bt[wt]))return!1;return!0}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];if(Tt===At)return!0;if(Tt===null||At===null||Tt.length!==At.length)return!1;for(var Dt=0;Dt<Tt.length;Dt++)if(Ot.compare(Tt[Dt],At[Dt])!==0)return!1;return!0}},Po.intersection=function(vt,bt){for(var wt=new zp,Tt=0;Tt<vt.length;Tt++)bt.intersects(vt[Tt])&&wt.add(vt[Tt],!0);return wt.toCoordinateArray()},Po.hasRepeatedPoints=function(vt){for(var bt=1;bt<vt.length;bt++)if(vt[bt-1].equals(vt[bt]))return!0;return!1},Po.removeRepeatedPoints=function(vt){return Po.hasRepeatedPoints(vt)?new zp(vt,!1).toCoordinateArray():vt},Po.reverse=function(vt){for(var bt=vt.length-1,wt=Math.trunc(bt/2),Tt=0;Tt<=wt;Tt++){var At=vt[Tt];vt[Tt]=vt[bt-Tt],vt[bt-Tt]=At}},Po.removeNull=function(vt){for(var bt=0,wt=0;wt<vt.length;wt++)vt[wt]!==null&&bt++;var Tt=new Array(bt).fill(null);if(bt===0)return Tt;for(var At=0,Ot=0;Ot<vt.length;Ot++)vt[Ot]!==null&&(Tt[At++]=vt[Ot]);return Tt},Po.copyDeep=function(){if(arguments.length===1){for(var vt=arguments[0],bt=new Array(vt.length).fill(null),wt=0;wt<vt.length;wt++)bt[wt]=new Nr(vt[wt]);return bt}if(arguments.length===5)for(var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Dt=arguments[3],jt=arguments[4],Gt=0;Gt<jt;Gt++)Ot[Dt+Gt]=new Nr(Tt[At+Gt])},Po.isEqualReversed=function(vt,bt){for(var wt=0;wt<vt.length;wt++){var Tt=vt[wt],At=bt[vt.length-wt-1];if(Tt.compareTo(At)!==0)return!1}return!0},Po.envelope=function(vt){for(var bt=new Ui,wt=0;wt<vt.length;wt++)bt.expandToInclude(vt[wt]);return bt},Po.toCoordinateArray=function(vt){return vt.toArray(Po.coordArrayType)},Po.atLeastNCoordinatesOrNothing=function(vt,bt){return bt.length>=vt?bt:[]},Po.indexOf=function(vt,bt){for(var wt=0;wt<bt.length;wt++)if(vt.equals(bt[wt]))return wt;return-1},Po.increasingDirection=function(vt){for(var bt=0;bt<Math.trunc(vt.length/2);bt++){var wt=vt.length-1-bt,Tt=vt[bt].compareTo(vt[wt]);if(Tt!==0)return Tt}return 1},Po.compare=function(vt,bt){for(var wt=0;wt<vt.length&&wt<bt.length;){var Tt=vt[wt].compareTo(bt[wt]);if(Tt!==0)return Tt;wt++}return wt<bt.length?-1:wt<vt.length?1:0},Po.minCoordinate=function(vt){for(var bt=null,wt=0;wt<vt.length;wt++)(bt===null||bt.compareTo(vt[wt])>0)&&(bt=vt[wt]);return bt},Po.extract=function(vt,bt,wt){bt=Bl.clamp(bt,0,vt.length);var Tt=(wt=Bl.clamp(wt,-1,vt.length))-bt+1;wt<0&&(Tt=0),bt>=vt.length&&(Tt=0),wt<bt&&(Tt=0);var At=new Array(Tt).fill(null);if(Tt===0)return At;for(var Ot=0,Dt=bt;Dt<=wt;Dt++)At[Ot++]=vt[Dt];return At},Object.defineProperties(Po,Kg);var Hp=function(){};Hp.prototype.compare=function(vt,bt){return Po.compare(vt,bt)},Hp.prototype.interfaces_=function(){return[kf]},Hp.prototype.getClass=function(){return Hp};var Rd=function(){};Rd.prototype.compare=function(vt,bt){var wt=vt,Tt=bt;if(wt.length<Tt.length)return-1;if(wt.length>Tt.length)return 1;if(wt.length===0)return 0;var At=Po.compare(wt,Tt);return Po.isEqualReversed(wt,Tt)?0:At},Rd.prototype.OLDcompare=function(vt,bt){var wt=vt,Tt=bt;if(wt.length<Tt.length)return-1;if(wt.length>Tt.length)return 1;if(wt.length===0)return 0;for(var At=Po.increasingDirection(wt),Ot=Po.increasingDirection(Tt),Dt=At>0?0:wt.length-1,jt=Ot>0?0:wt.length-1,Gt=0;Gt<wt.length;Gt++){var qt=wt[Dt].compareTo(Tt[jt]);if(qt!==0)return qt;Dt+=At,jt+=Ot}return 0},Rd.prototype.interfaces_=function(){return[kf]},Rd.prototype.getClass=function(){return Rd};var Md=function(){};Md.prototype.get=function(){},Md.prototype.put=function(){},Md.prototype.size=function(){},Md.prototype.values=function(){},Md.prototype.entrySet=function(){};var e_=function(vt){function bt(){vt.apply(this,arguments)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt}(Md);function Rf(vt){this.message=vt||""}function Jg(){}Rf.prototype=new Error,Rf.prototype.name="OperationNotSupported",Jg.prototype=new ha,Jg.prototype.contains=function(){};var Qg=function(vt){function bt(){vt.call(this),this.array_=[],arguments[0]instanceof ha&&this.addAll(arguments[0])}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.contains=function(wt){for(var Tt=0,At=this.array_.length;Tt<At;Tt++)if(this.array_[Tt]===wt)return!0;return!1},bt.prototype.add=function(wt){return!this.contains(wt)&&(this.array_.push(wt),!0)},bt.prototype.addAll=function(wt){for(var Tt=wt.iterator();Tt.hasNext();)this.add(Tt.next());return!0},bt.prototype.remove=function(wt){throw new Error},bt.prototype.size=function(){return this.array_.length},bt.prototype.isEmpty=function(){return this.array_.length===0},bt.prototype.toArray=function(){for(var wt=[],Tt=0,At=this.array_.length;Tt<At;Tt++)wt.push(this.array_[Tt]);return wt},bt.prototype.iterator=function(){return new xy(this)},bt}(Jg),xy=function(vt){function bt(wt){vt.call(this),this.hashSet_=wt,this.position_=0}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new $d;return this.hashSet_.array_[this.position_++]},bt.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},bt.prototype.remove=function(){throw new Rf},bt}($f);function wy(vt){return vt===null?0:vt.color}function Ts(vt){return vt===null?null:vt.parent}function Mu(vt,bt){vt!==null&&(vt.color=bt)}function O0(vt){return vt===null?null:vt.left}function Ey(vt){return vt===null?null:vt.right}function Ya(){this.root_=null,this.size_=0}Ya.prototype=new e_,Ya.prototype.get=function(vt){for(var bt=this.root_;bt!==null;){var wt=vt.compareTo(bt.key);if(wt<0)bt=bt.left;else{if(!(wt>0))return bt.value;bt=bt.right}}return null},Ya.prototype.put=function(vt,bt){if(this.root_===null)return this.root_={key:vt,value:bt,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var wt,Tt,At=this.root_;do if(wt=At,(Tt=vt.compareTo(At.key))<0)At=At.left;else{if(!(Tt>0)){var Ot=At.value;return At.value=bt,Ot}At=At.right}while(At!==null);var Dt={key:vt,left:null,right:null,value:bt,parent:wt,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return Tt<0?wt.left=Dt:wt.right=Dt,this.fixAfterInsertion(Dt),this.size_++,null},Ya.prototype.fixAfterInsertion=function(vt){var bt=this;for(vt.color=1;vt!=null&&vt!==this.root_&&vt.parent.color===1;)if(Ts(vt)===O0(Ts(Ts(vt)))){var wt=Ey(Ts(Ts(vt)));wy(wt)===1?(Mu(Ts(vt),0),Mu(wt,0),Mu(Ts(Ts(vt)),1),vt=Ts(Ts(vt))):(vt===Ey(Ts(vt))&&(vt=Ts(vt),bt.rotateLeft(vt)),Mu(Ts(vt),0),Mu(Ts(Ts(vt)),1),bt.rotateRight(Ts(Ts(vt))))}else{var Tt=O0(Ts(Ts(vt)));wy(Tt)===1?(Mu(Ts(vt),0),Mu(Tt,0),Mu(Ts(Ts(vt)),1),vt=Ts(Ts(vt))):(vt===O0(Ts(vt))&&(vt=Ts(vt),bt.rotateRight(vt)),Mu(Ts(vt),0),Mu(Ts(Ts(vt)),1),bt.rotateLeft(Ts(Ts(vt))))}this.root_.color=0},Ya.prototype.values=function(){var vt=new vi,bt=this.getFirstEntry();if(bt!==null)for(vt.add(bt.value);(bt=Ya.successor(bt))!==null;)vt.add(bt.value);return vt},Ya.prototype.entrySet=function(){var vt=new Qg,bt=this.getFirstEntry();if(bt!==null)for(vt.add(bt);(bt=Ya.successor(bt))!==null;)vt.add(bt);return vt},Ya.prototype.rotateLeft=function(vt){if(vt!=null){var bt=vt.right;vt.right=bt.left,bt.left!=null&&(bt.left.parent=vt),bt.parent=vt.parent,vt.parent===null?this.root_=bt:vt.parent.left===vt?vt.parent.left=bt:vt.parent.right=bt,bt.left=vt,vt.parent=bt}},Ya.prototype.rotateRight=function(vt){if(vt!=null){var bt=vt.left;vt.left=bt.right,bt.right!=null&&(bt.right.parent=vt),bt.parent=vt.parent,vt.parent===null?this.root_=bt:vt.parent.right===vt?vt.parent.right=bt:vt.parent.left=bt,bt.right=vt,vt.parent=bt}},Ya.prototype.getFirstEntry=function(){var vt=this.root_;if(vt!=null)for(;vt.left!=null;)vt=vt.left;return vt},Ya.successor=function(vt){if(vt===null)return null;if(vt.right!==null){for(var bt=vt.right;bt.left!==null;)bt=bt.left;return bt}for(var wt=vt.parent,Tt=vt;wt!==null&&Tt===wt.right;)Tt=wt,wt=wt.parent;return wt},Ya.prototype.size=function(){return this.size_};var Mf=function(){};function Sy(){}function _c(){this.array_=[],arguments[0]instanceof ha&&this.addAll(arguments[0])}Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Sy.prototype=new Jg,_c.prototype=new Sy,_c.prototype.contains=function(vt){for(var bt=0,wt=this.array_.length;bt<wt;bt++)if(this.array_[bt].compareTo(vt)===0)return!0;return!1},_c.prototype.add=function(vt){if(this.contains(vt))return!1;for(var bt=0,wt=this.array_.length;bt<wt;bt++)if(this.array_[bt].compareTo(vt)===1)return this.array_.splice(bt,0,vt),!0;return this.array_.push(vt),!0},_c.prototype.addAll=function(vt){for(var bt=vt.iterator();bt.hasNext();)this.add(bt.next());return!0},_c.prototype.remove=function(vt){throw new Rf},_c.prototype.size=function(){return this.array_.length},_c.prototype.isEmpty=function(){return this.array_.length===0},_c.prototype.toArray=function(){for(var vt=[],bt=0,wt=this.array_.length;bt<wt;bt++)vt.push(this.array_[bt]);return vt},_c.prototype.iterator=function(){return new em(this)};var em=function(vt){this.treeSet_=vt,this.position_=0};em.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new $d;return this.treeSet_.array_[this.position_++]},em.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},em.prototype.remove=function(){throw new Rf};var fu=function(){};fu.sort=function(){var vt,bt,wt,Tt,At=arguments[0];if(arguments.length===1)Tt=function(Dt,jt){return Dt.compareTo(jt)},At.sort(Tt);else if(arguments.length===2)wt=arguments[1],Tt=function(Dt,jt){return wt.compare(Dt,jt)},At.sort(Tt);else if(arguments.length===3){(bt=At.slice(arguments[1],arguments[2])).sort();var Ot=At.slice(0,arguments[1]).concat(bt,At.slice(arguments[2],At.length));for(At.splice(0,At.length),vt=0;vt<Ot.length;vt++)At.push(Ot[vt])}else if(arguments.length===4)for(bt=At.slice(arguments[1],arguments[2]),wt=arguments[3],Tt=function(Dt,jt){return wt.compare(Dt,jt)},bt.sort(Tt),Ot=At.slice(0,arguments[1]).concat(bt,At.slice(arguments[2],At.length)),At.splice(0,At.length),vt=0;vt<Ot.length;vt++)At.push(Ot[vt])},fu.asList=function(vt){for(var bt=new vi,wt=0,Tt=vt.length;wt<Tt;wt++)bt.add(vt[wt]);return bt};var ls=function(){},nc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};nc.P.get=function(){return 0},nc.L.get=function(){return 1},nc.A.get=function(){return 2},nc.FALSE.get=function(){return-1},nc.TRUE.get=function(){return-2},nc.DONTCARE.get=function(){return-3},nc.SYM_FALSE.get=function(){return"F"},nc.SYM_TRUE.get=function(){return"T"},nc.SYM_DONTCARE.get=function(){return"*"},nc.SYM_P.get=function(){return"0"},nc.SYM_L.get=function(){return"1"},nc.SYM_A.get=function(){return"2"},ls.prototype.interfaces_=function(){return[]},ls.prototype.getClass=function(){return ls},ls.toDimensionSymbol=function(vt){switch(vt){case ls.FALSE:return ls.SYM_FALSE;case ls.TRUE:return ls.SYM_TRUE;case ls.DONTCARE:return ls.SYM_DONTCARE;case ls.P:return ls.SYM_P;case ls.L:return ls.SYM_L;case ls.A:return ls.SYM_A}throw new Ns("Unknown dimension value: "+vt)},ls.toDimensionValue=function(vt){switch(Dp.toUpperCase(vt)){case ls.SYM_FALSE:return ls.FALSE;case ls.SYM_TRUE:return ls.TRUE;case ls.SYM_DONTCARE:return ls.DONTCARE;case ls.SYM_P:return ls.P;case ls.SYM_L:return ls.L;case ls.SYM_A:return ls.A}throw new Ns("Unknown dimension symbol: "+vt)},Object.defineProperties(ls,nc);var Vc=function(){};Vc.prototype.filter=function(vt){},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc};var bc=function(){};bc.prototype.filter=function(vt,bt){},bc.prototype.isDone=function(){},bc.prototype.isGeometryChanged=function(){},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc};var rl=function(vt){function bt(Tt,At){if(vt.call(this,At),this._geometries=Tt||[],vt.hasNullElements(this._geometries))throw new Ns("geometries must not contain null elements")}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={serialVersionUID:{configurable:!0}};return bt.prototype.computeEnvelopeInternal=function(){for(var Tt=new Ui,At=0;At<this._geometries.length;At++)Tt.expandToInclude(this._geometries[At].getEnvelopeInternal());return Tt},bt.prototype.getGeometryN=function(Tt){return this._geometries[Tt]},bt.prototype.getSortIndex=function(){return vt.SORTINDEX_GEOMETRYCOLLECTION},bt.prototype.getCoordinates=function(){for(var Tt=new Array(this.getNumPoints()).fill(null),At=-1,Ot=0;Ot<this._geometries.length;Ot++)for(var Dt=this._geometries[Ot].getCoordinates(),jt=0;jt<Dt.length;jt++)Tt[++At]=Dt[jt];return Tt},bt.prototype.getArea=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getArea();return Tt},bt.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Dt=At;if(this._geometries.length!==Dt._geometries.length)return!1;for(var jt=0;jt<this._geometries.length;jt++)if(!Tt._geometries[jt].equalsExact(Dt._geometries[jt],Ot))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},bt.prototype.normalize=function(){for(var Tt=0;Tt<this._geometries.length;Tt++)this._geometries[Tt].normalize();fu.sort(this._geometries)},bt.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},bt.prototype.getBoundaryDimension=function(){for(var Tt=ls.FALSE,At=0;At<this._geometries.length;At++)Tt=Math.max(Tt,this._geometries[At].getBoundaryDimension());return Tt},bt.prototype.getDimension=function(){for(var Tt=ls.FALSE,At=0;At<this._geometries.length;At++)Tt=Math.max(Tt,this._geometries[At].getDimension());return Tt},bt.prototype.getLength=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getLength();return Tt},bt.prototype.getNumPoints=function(){for(var Tt=0,At=0;At<this._geometries.length;At++)Tt+=this._geometries[At].getNumPoints();return Tt},bt.prototype.getNumGeometries=function(){return this._geometries.length},bt.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Ot]=this._geometries[Ot].reverse();return this.getFactory().createGeometryCollection(At)},bt.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){var At=arguments[0],Ot=new _c(fu.asList(this._geometries)),Dt=new _c(fu.asList(At._geometries));return this.compare(Ot,Dt)}if(arguments.length===2){for(var jt=arguments[0],Gt=arguments[1],qt=jt,en=this.getNumGeometries(),Xt=qt.getNumGeometries(),sn=0;sn<en&&sn<Xt;){var yn=Tt.getGeometryN(sn),vn=qt.getGeometryN(sn),Sn=yn.compareToSameClass(vn,Gt);if(Sn!==0)return Sn;sn++}return sn<en?1:sn<Xt?-1:0}},bt.prototype.apply=function(){var Tt=this;if(ro(arguments[0],hu))for(var At=arguments[0],Ot=0;Ot<this._geometries.length;Ot++)Tt._geometries[Ot].apply(At);else if(ro(arguments[0],bc)){var Dt=arguments[0];if(this._geometries.length===0)return null;for(var jt=0;jt<this._geometries.length&&(Tt._geometries[jt].apply(Dt),!Dt.isDone());jt++);Dt.isGeometryChanged()&&this.geometryChanged()}else if(ro(arguments[0],Vc)){var Gt=arguments[0];Gt.filter(this);for(var qt=0;qt<this._geometries.length;qt++)Tt._geometries[qt].apply(Gt)}else if(ro(arguments[0],cu)){var en=arguments[0];en.filter(this);for(var Xt=0;Xt<this._geometries.length;Xt++)Tt._geometries[Xt].apply(en)}},bt.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),_o.shouldNeverReachHere(),null},bt.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);Tt._geometries=new Array(this._geometries.length).fill(null);for(var At=0;At<this._geometries.length;At++)Tt._geometries[At]=this._geometries[At].clone();return Tt},bt.prototype.getGeometryType=function(){return"GeometryCollection"},bt.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new bt(Tt,this._factory)},bt.prototype.isEmpty=function(){for(var Tt=0;Tt<this._geometries.length;Tt++)if(!this._geometries[Tt].isEmpty())return!1;return!0},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},wt.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(bt,wt),bt}(to),gh=function(vt){function bt(){vt.apply(this,arguments)}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={serialVersionUID:{configurable:!0}};return bt.prototype.getSortIndex=function(){return to.SORTINDEX_MULTILINESTRING},bt.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},bt.prototype.getBoundaryDimension=function(){return this.isClosed()?ls.FALSE:0},bt.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var Tt=0;Tt<this._geometries.length;Tt++)if(!this._geometries[Tt].isClosed())return!1;return!0},bt.prototype.getDimension=function(){return 1},bt.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Tt-1-Ot]=this._geometries[Ot].reverse();return this.getFactory().createMultiLineString(At)},bt.prototype.getBoundary=function(){return new pl(this).getBoundary()},bt.prototype.getGeometryType=function(){return"MultiLineString"},bt.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new bt(Tt,this._factory)},bt.prototype.interfaces_=function(){return[Mf]},bt.prototype.getClass=function(){return bt},wt.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(bt,wt),bt}(rl),pl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var vt=arguments[0],bt=tc.MOD2_BOUNDARY_RULE;this._geom=vt,this._geomFact=vt.getFactory(),this._bnRule=bt}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this._geom=wt,this._geomFact=wt.getFactory(),this._bnRule=Tt}};pl.prototype.boundaryMultiLineString=function(vt){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var bt=this.computeBoundaryCoordinates(vt);return bt.length===1?this._geomFact.createPoint(bt[0]):this._geomFact.createMultiPointFromCoords(bt)},pl.prototype.getBoundary=function(){return this._geom instanceof Ds?this.boundaryLineString(this._geom):this._geom instanceof gh?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},pl.prototype.boundaryLineString=function(vt){return this._geom.isEmpty()?this.getEmptyMultiPoint():vt.isClosed()?this._bnRule.isInBoundary(2)?vt.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([vt.getStartPoint(),vt.getEndPoint()])},pl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},pl.prototype.computeBoundaryCoordinates=function(vt){var bt=this,wt=new vi;this._endpointMap=new Ya;for(var Tt=0;Tt<vt.getNumGeometries();Tt++){var At=vt.getGeometryN(Tt);At.getNumPoints()!==0&&(bt.addEndpoint(At.getCoordinateN(0)),bt.addEndpoint(At.getCoordinateN(At.getNumPoints()-1)))}for(var Ot=this._endpointMap.entrySet().iterator();Ot.hasNext();){var Dt=Ot.next(),jt=Dt.getValue().count;bt._bnRule.isInBoundary(jt)&&wt.add(Dt.getKey())}return Po.toCoordinateArray(wt)},pl.prototype.addEndpoint=function(vt){var bt=this._endpointMap.get(vt);bt===null&&(bt=new Nf,this._endpointMap.put(vt,bt)),bt.count++},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.getBoundary=function(){if(arguments.length===1){var vt=arguments[0],bt=new pl(vt);return bt.getBoundary()}if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=new pl(wt,Tt);return At.getBoundary()}};var Nf=function(){this.count=null};function Cy(){}function t_(){}Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf};var n_=function(){};function r_(){}function i_(){}function Ty(){}var rc=function(){},$0={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},rc.chars=function(vt,bt){for(var wt=new Array(bt).fill(null),Tt=0;Tt<bt;Tt++)wt[Tt]=vt;return String(wt)},rc.getStackTrace=function(){if(arguments.length===1){var vt=arguments[0],bt=new r_,wt=new Cy;return vt.printStackTrace(wt),bt.toString()}if(arguments.length===2){for(var Tt=arguments[0],At=arguments[1],Ot="",Dt=new t_(rc.getStackTrace(Tt)),jt=new Ty,Gt=0;Gt<At;Gt++)try{Ot+=jt.readLine()+rc.NEWLINE}catch(qt){if(!(qt instanceof i_))throw qt;_o.shouldNeverReachHere()}return Ot}},rc.split=function(vt,bt){for(var wt=bt.length,Tt=new vi,At=""+vt,Ot=At.indexOf(bt);Ot>=0;){var Dt=At.substring(0,Ot);Tt.add(Dt),Ot=(At=At.substring(Ot+wt)).indexOf(bt)}At.length>0&&Tt.add(At);for(var jt=new Array(Tt.size()).fill(null),Gt=0;Gt<jt.length;Gt++)jt[Gt]=Tt.get(Gt);return jt},rc.toString=function(){if(arguments.length===1){var vt=arguments[0];return rc.SIMPLE_ORDINATE_FORMAT.format(vt)}},rc.spaces=function(vt){return rc.chars(" ",vt)},$0.NEWLINE.get=function(){return za.getProperty("line.separator")},$0.SIMPLE_ORDINATE_FORMAT.get=function(){return new n_},Object.defineProperties(rc,$0);var Xs=function(){};Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs},Xs.copyCoord=function(vt,bt,wt,Tt){for(var At=Math.min(vt.getDimension(),wt.getDimension()),Ot=0;Ot<At;Ot++)wt.setOrdinate(Tt,Ot,vt.getOrdinate(bt,Ot))},Xs.isRing=function(vt){var bt=vt.size();return bt===0||!(bt<=3)&&vt.getOrdinate(0,Yo.X)===vt.getOrdinate(bt-1,Yo.X)&&vt.getOrdinate(0,Yo.Y)===vt.getOrdinate(bt-1,Yo.Y)},Xs.isEqual=function(vt,bt){var wt=vt.size();if(wt!==bt.size())return!1;for(var Tt=Math.min(vt.getDimension(),bt.getDimension()),At=0;At<wt;At++)for(var Ot=0;Ot<Tt;Ot++){var Dt=vt.getOrdinate(At,Ot),jt=bt.getOrdinate(At,Ot);if(vt.getOrdinate(At,Ot)!==bt.getOrdinate(At,Ot)&&(!po.isNaN(Dt)||!po.isNaN(jt)))return!1}return!0},Xs.extend=function(vt,bt,wt){var Tt=vt.create(wt,bt.getDimension()),At=bt.size();if(Xs.copy(bt,0,Tt,0,At),At>0)for(var Ot=At;Ot<wt;Ot++)Xs.copy(bt,At-1,Tt,Ot,1);return Tt},Xs.reverse=function(vt){for(var bt=vt.size()-1,wt=Math.trunc(bt/2),Tt=0;Tt<=wt;Tt++)Xs.swap(vt,Tt,bt-Tt)},Xs.swap=function(vt,bt,wt){if(bt===wt)return null;for(var Tt=0;Tt<vt.getDimension();Tt++){var At=vt.getOrdinate(bt,Tt);vt.setOrdinate(bt,Tt,vt.getOrdinate(wt,Tt)),vt.setOrdinate(wt,Tt,At)}},Xs.copy=function(vt,bt,wt,Tt,At){for(var Ot=0;Ot<At;Ot++)Xs.copyCoord(vt,bt+Ot,wt,Tt+Ot)},Xs.toString=function(){if(arguments.length===1){var vt=arguments[0],bt=vt.size();if(bt===0)return"()";var wt=vt.getDimension(),Tt=new Fc;Tt.append("(");for(var At=0;At<bt;At++){At>0&&Tt.append(" ");for(var Ot=0;Ot<wt;Ot++)Ot>0&&Tt.append(","),Tt.append(rc.toString(vt.getOrdinate(At,Ot)))}return Tt.append(")"),Tt.toString()}},Xs.ensureValidRing=function(vt,bt){var wt=bt.size();return wt===0?bt:wt<=3?Xs.createClosedRing(vt,bt,4):bt.getOrdinate(0,Yo.X)===bt.getOrdinate(wt-1,Yo.X)&&bt.getOrdinate(0,Yo.Y)===bt.getOrdinate(wt-1,Yo.Y)?bt:Xs.createClosedRing(vt,bt,wt+1)},Xs.createClosedRing=function(vt,bt,wt){var Tt=vt.create(wt,bt.getDimension()),At=bt.size();Xs.copy(bt,0,Tt,0,At);for(var Ot=At;Ot<wt;Ot++)Xs.copy(bt,0,Tt,Ot,1);return Tt};var Ds=function(vt){function bt(Tt,At){vt.call(this,At),this._points=null,this.init(Tt)}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={serialVersionUID:{configurable:!0}};return bt.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ui:this._points.expandEnvelope(new Ui)},bt.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},bt.prototype.getSortIndex=function(){return vt.SORTINDEX_LINESTRING},bt.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},bt.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Dt=At;if(this._points.size()!==Dt._points.size())return!1;for(var jt=0;jt<this._points.size();jt++)if(!Tt.equal(Tt._points.getCoordinate(jt),Dt._points.getCoordinate(jt),Ot))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},bt.prototype.normalize=function(){for(var Tt=this,At=0;At<Math.trunc(this._points.size()/2);At++){var Ot=Tt._points.size()-1-At;if(!Tt._points.getCoordinate(At).equals(Tt._points.getCoordinate(Ot)))return Tt._points.getCoordinate(At).compareTo(Tt._points.getCoordinate(Ot))>0&&Xs.reverse(Tt._points),null}},bt.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},bt.prototype.getBoundaryDimension=function(){return this.isClosed()?ls.FALSE:0},bt.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},bt.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},bt.prototype.getDimension=function(){return 1},bt.prototype.getLength=function(){return ki.computeLength(this._points)},bt.prototype.getNumPoints=function(){return this._points.size()},bt.prototype.reverse=function(){var Tt=this._points.copy();return Xs.reverse(Tt),this.getFactory().createLineString(Tt)},bt.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){for(var At=arguments[0],Ot=At,Dt=0,jt=0;Dt<this._points.size()&&jt<Ot._points.size();){var Gt=Tt._points.getCoordinate(Dt).compareTo(Ot._points.getCoordinate(jt));if(Gt!==0)return Gt;Dt++,jt++}return Dt<this._points.size()?1:jt<Ot._points.size()?-1:0}if(arguments.length===2){var qt=arguments[0],en=arguments[1],Xt=qt;return en.compare(this._points,Xt._points)}},bt.prototype.apply=function(){var Tt=this;if(ro(arguments[0],hu))for(var At=arguments[0],Ot=0;Ot<this._points.size();Ot++)At.filter(Tt._points.getCoordinate(Ot));else if(ro(arguments[0],bc)){var Dt=arguments[0];if(this._points.size()===0)return null;for(var jt=0;jt<this._points.size()&&(Dt.filter(Tt._points,jt),!Dt.isDone());jt++);Dt.isGeometryChanged()&&this.geometryChanged()}else if(ro(arguments[0],Vc)){var Gt=arguments[0];Gt.filter(this)}else if(ro(arguments[0],cu)){var qt=arguments[0];qt.filter(this)}},bt.prototype.getBoundary=function(){return new pl(this).getBoundary()},bt.prototype.isEquivalentClass=function(Tt){return Tt instanceof bt},bt.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);return Tt._points=this._points.clone(),Tt},bt.prototype.getCoordinateN=function(Tt){return this._points.getCoordinate(Tt)},bt.prototype.getGeometryType=function(){return"LineString"},bt.prototype.copy=function(){return new bt(this._points.copy(),this._factory)},bt.prototype.getCoordinateSequence=function(){return this._points},bt.prototype.isEmpty=function(){return this._points.size()===0},bt.prototype.init=function(Tt){if(Tt===null&&(Tt=this.getFactory().getCoordinateSequenceFactory().create([])),Tt.size()===1)throw new Ns("Invalid number of points in LineString (found "+Tt.size()+" - must be 0 or >= 2)");this._points=Tt},bt.prototype.isCoordinate=function(Tt){for(var At=0;At<this._points.size();At++)if(this._points.getCoordinate(At).equals(Tt))return!0;return!1},bt.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},bt.prototype.getPointN=function(Tt){return this.getFactory().createPoint(this._points.getCoordinate(Tt))},bt.prototype.interfaces_=function(){return[Mf]},bt.prototype.getClass=function(){return bt},wt.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(bt,wt),bt}(to),xc=function(){};xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var Al=function(vt){function bt(Tt,At){vt.call(this,At),this._coordinates=Tt||null,this.init(this._coordinates)}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={serialVersionUID:{configurable:!0}};return bt.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ui;var Tt=new Ui;return Tt.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),Tt},bt.prototype.getSortIndex=function(){return vt.SORTINDEX_POINT},bt.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},bt.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&(!(!this.isEmpty()||!Tt.isEmpty())||this.isEmpty()===Tt.isEmpty()&&this.equal(Tt.getCoordinate(),this.getCoordinate(),At))}return vt.prototype.equalsExact.apply(this,arguments)},bt.prototype.normalize=function(){},bt.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},bt.prototype.getBoundaryDimension=function(){return ls.FALSE},bt.prototype.getDimension=function(){return 0},bt.prototype.getNumPoints=function(){return this.isEmpty()?0:1},bt.prototype.reverse=function(){return this.copy()},bt.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},bt.prototype.compareToSameClass=function(){if(arguments.length===1){var Tt=arguments[0],At=Tt;return this.getCoordinate().compareTo(At.getCoordinate())}if(arguments.length===2){var Ot=arguments[0],Dt=arguments[1],jt=Ot;return Dt.compare(this._coordinates,jt._coordinates)}},bt.prototype.apply=function(){if(ro(arguments[0],hu)){var Tt=arguments[0];if(this.isEmpty())return null;Tt.filter(this.getCoordinate())}else if(ro(arguments[0],bc)){var At=arguments[0];if(this.isEmpty())return null;At.filter(this._coordinates,0),At.isGeometryChanged()&&this.geometryChanged()}else if(ro(arguments[0],Vc)){var Ot=arguments[0];Ot.filter(this)}else if(ro(arguments[0],cu)){var Dt=arguments[0];Dt.filter(this)}},bt.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},bt.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);return Tt._coordinates=this._coordinates.clone(),Tt},bt.prototype.getGeometryType=function(){return"Point"},bt.prototype.copy=function(){return new bt(this._coordinates.copy(),this._factory)},bt.prototype.getCoordinateSequence=function(){return this._coordinates},bt.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},bt.prototype.isEmpty=function(){return this._coordinates.size()===0},bt.prototype.init=function(Tt){Tt===null&&(Tt=this.getFactory().getCoordinateSequenceFactory().create([])),_o.isTrue(Tt.size()<=1),this._coordinates=Tt},bt.prototype.isSimple=function(){return!0},bt.prototype.interfaces_=function(){return[xc]},bt.prototype.getClass=function(){return bt},wt.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(bt,wt),bt}(to),mh=function(){};mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var da=function(vt){function bt(Tt,At,Ot){if(vt.call(this,Ot),this._shell=null,this._holes=null,Tt===null&&(Tt=this.getFactory().createLinearRing()),At===null&&(At=[]),vt.hasNullElements(At))throw new Ns("holes must not contain null elements");if(Tt.isEmpty()&&vt.hasNonEmptyElements(At))throw new Ns("shell is empty but holes are not");this._shell=Tt,this._holes=At}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={serialVersionUID:{configurable:!0}};return bt.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},bt.prototype.getSortIndex=function(){return vt.SORTINDEX_POLYGON},bt.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var Tt=new Array(this.getNumPoints()).fill(null),At=-1,Ot=this._shell.getCoordinates(),Dt=0;Dt<Ot.length;Dt++)Tt[++At]=Ot[Dt];for(var jt=0;jt<this._holes.length;jt++)for(var Gt=this._holes[jt].getCoordinates(),qt=0;qt<Gt.length;qt++)Tt[++At]=Gt[qt];return Tt},bt.prototype.getArea=function(){var Tt=0;Tt+=Math.abs(ki.signedArea(this._shell.getCoordinateSequence()));for(var At=0;At<this._holes.length;At++)Tt-=Math.abs(ki.signedArea(this._holes[At].getCoordinateSequence()));return Tt},bt.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var Tt=this._shell.getCoordinateSequence(),At=this.getEnvelopeInternal(),Ot=0;Ot<5;Ot++){var Dt=Tt.getX(Ot);if(Dt!==At.getMinX()&&Dt!==At.getMaxX())return!1;var jt=Tt.getY(Ot);if(jt!==At.getMinY()&&jt!==At.getMaxY())return!1}for(var Gt=Tt.getX(0),qt=Tt.getY(0),en=1;en<=4;en++){var Xt=Tt.getX(en),sn=Tt.getY(en);if(Xt!==Gt==(sn!==qt))return!1;Gt=Xt,qt=sn}return!0},bt.prototype.equalsExact=function(){var Tt=this;if(arguments.length===2){var At=arguments[0],Ot=arguments[1];if(!this.isEquivalentClass(At))return!1;var Dt=At,jt=this._shell,Gt=Dt._shell;if(!jt.equalsExact(Gt,Ot)||this._holes.length!==Dt._holes.length)return!1;for(var qt=0;qt<this._holes.length;qt++)if(!Tt._holes[qt].equalsExact(Dt._holes[qt],Ot))return!1;return!0}return vt.prototype.equalsExact.apply(this,arguments)},bt.prototype.normalize=function(){var Tt=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var At=0;At<this._holes.length;At++)Tt.normalize(Tt._holes[At],!1);fu.sort(this._holes)}else if(arguments.length===2){var Ot=arguments[0],Dt=arguments[1];if(Ot.isEmpty())return null;var jt=new Array(Ot.getCoordinates().length-1).fill(null);za.arraycopy(Ot.getCoordinates(),0,jt,0,jt.length);var Gt=Po.minCoordinate(Ot.getCoordinates());Po.scroll(jt,Gt),za.arraycopy(jt,0,Ot.getCoordinates(),0,jt.length),Ot.getCoordinates()[jt.length]=jt[0],ki.isCCW(Ot.getCoordinates())===Dt&&Po.reverse(Ot.getCoordinates())}},bt.prototype.getCoordinate=function(){return this._shell.getCoordinate()},bt.prototype.getNumInteriorRing=function(){return this._holes.length},bt.prototype.getBoundaryDimension=function(){return 1},bt.prototype.getDimension=function(){return 2},bt.prototype.getLength=function(){var Tt=0;Tt+=this._shell.getLength();for(var At=0;At<this._holes.length;At++)Tt+=this._holes[At].getLength();return Tt},bt.prototype.getNumPoints=function(){for(var Tt=this._shell.getNumPoints(),At=0;At<this._holes.length;At++)Tt+=this._holes[At].getNumPoints();return Tt},bt.prototype.reverse=function(){var Tt=this.copy();Tt._shell=this._shell.copy().reverse(),Tt._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Tt._holes[At]=this._holes[At].copy().reverse();return Tt},bt.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},bt.prototype.compareToSameClass=function(){var Tt=this;if(arguments.length===1){var At=arguments[0],Ot=this._shell,Dt=At._shell;return Ot.compareToSameClass(Dt)}if(arguments.length===2){var jt=arguments[0],Gt=arguments[1],qt=jt,en=this._shell,Xt=qt._shell,sn=en.compareToSameClass(Xt,Gt);if(sn!==0)return sn;for(var yn=this.getNumInteriorRing(),vn=qt.getNumInteriorRing(),Sn=0;Sn<yn&&Sn<vn;){var fn=Tt.getInteriorRingN(Sn),Dn=qt.getInteriorRingN(Sn),rr=fn.compareToSameClass(Dn,Gt);if(rr!==0)return rr;Sn++}return Sn<yn?1:Sn<vn?-1:0}},bt.prototype.apply=function(Tt){var At=this;if(ro(Tt,hu)){this._shell.apply(Tt);for(var Ot=0;Ot<this._holes.length;Ot++)At._holes[Ot].apply(Tt)}else if(ro(Tt,bc)){if(this._shell.apply(Tt),!Tt.isDone())for(var Dt=0;Dt<this._holes.length&&(At._holes[Dt].apply(Tt),!Tt.isDone());Dt++);Tt.isGeometryChanged()&&this.geometryChanged()}else if(ro(Tt,Vc))Tt.filter(this);else if(ro(Tt,cu)){Tt.filter(this),this._shell.apply(Tt);for(var jt=0;jt<this._holes.length;jt++)At._holes[jt].apply(Tt)}},bt.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var Tt=new Array(this._holes.length+1).fill(null);Tt[0]=this._shell;for(var At=0;At<this._holes.length;At++)Tt[At+1]=this._holes[At];return Tt.length<=1?this.getFactory().createLinearRing(Tt[0].getCoordinateSequence()):this.getFactory().createMultiLineString(Tt)},bt.prototype.clone=function(){var Tt=vt.prototype.clone.call(this);Tt._shell=this._shell.clone(),Tt._holes=new Array(this._holes.length).fill(null);for(var At=0;At<this._holes.length;At++)Tt._holes[At]=this._holes[At].clone();return Tt},bt.prototype.getGeometryType=function(){return"Polygon"},bt.prototype.copy=function(){for(var Tt=this._shell.copy(),At=new Array(this._holes.length).fill(null),Ot=0;Ot<At.length;Ot++)At[Ot]=this._holes[Ot].copy();return new bt(Tt,At,this._factory)},bt.prototype.getExteriorRing=function(){return this._shell},bt.prototype.isEmpty=function(){return this._shell.isEmpty()},bt.prototype.getInteriorRingN=function(Tt){return this._holes[Tt]},bt.prototype.interfaces_=function(){return[mh]},bt.prototype.getClass=function(){return bt},wt.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(bt,wt),bt}(to),Df=function(vt){function bt(){vt.apply(this,arguments)}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={serialVersionUID:{configurable:!0}};return bt.prototype.getSortIndex=function(){return to.SORTINDEX_MULTIPOINT},bt.prototype.isValid=function(){return!0},bt.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},bt.prototype.getCoordinate=function(){if(arguments.length===1){var Tt=arguments[0];return this._geometries[Tt].getCoordinate()}return vt.prototype.getCoordinate.apply(this,arguments)},bt.prototype.getBoundaryDimension=function(){return ls.FALSE},bt.prototype.getDimension=function(){return 0},bt.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},bt.prototype.getGeometryType=function(){return"MultiPoint"},bt.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new bt(Tt,this._factory)},bt.prototype.interfaces_=function(){return[xc]},bt.prototype.getClass=function(){return bt},wt.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(bt,wt),bt}(rl),pu=function(vt){function bt(Tt,At){Tt instanceof Nr&&At instanceof Io&&(Tt=At.getCoordinateSequenceFactory().create(Tt)),vt.call(this,Tt,At),this.validateConstruction()}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return bt.prototype.getSortIndex=function(){return to.SORTINDEX_LINEARRING},bt.prototype.getBoundaryDimension=function(){return ls.FALSE},bt.prototype.isClosed=function(){return!!this.isEmpty()||vt.prototype.isClosed.call(this)},bt.prototype.reverse=function(){var Tt=this._points.copy();return Xs.reverse(Tt),this.getFactory().createLinearRing(Tt)},bt.prototype.validateConstruction=function(){if(!this.isEmpty()&&!vt.prototype.isClosed.call(this))throw new Ns("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<bt.MINIMUM_VALID_SIZE)throw new Ns("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},bt.prototype.getGeometryType=function(){return"LinearRing"},bt.prototype.copy=function(){return new bt(this._points.copy(),this._factory)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},wt.MINIMUM_VALID_SIZE.get=function(){return 4},wt.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(bt,wt),bt}(Ds),gu=function(vt){function bt(){vt.apply(this,arguments)}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={serialVersionUID:{configurable:!0}};return bt.prototype.getSortIndex=function(){return to.SORTINDEX_MULTIPOLYGON},bt.prototype.equalsExact=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return!!this.isEquivalentClass(Tt)&&vt.prototype.equalsExact.call(this,Tt,At)}return vt.prototype.equalsExact.apply(this,arguments)},bt.prototype.getBoundaryDimension=function(){return 1},bt.prototype.getDimension=function(){return 2},bt.prototype.reverse=function(){for(var Tt=this._geometries.length,At=new Array(Tt).fill(null),Ot=0;Ot<this._geometries.length;Ot++)At[Ot]=this._geometries[Ot].reverse();return this.getFactory().createMultiPolygon(At)},bt.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var Tt=new vi,At=0;At<this._geometries.length;At++)for(var Ot=this._geometries[At].getBoundary(),Dt=0;Dt<Ot.getNumGeometries();Dt++)Tt.add(Ot.getGeometryN(Dt));var jt=new Array(Tt.size()).fill(null);return this.getFactory().createMultiLineString(Tt.toArray(jt))},bt.prototype.getGeometryType=function(){return"MultiPolygon"},bt.prototype.copy=function(){for(var Tt=new Array(this._geometries.length).fill(null),At=0;At<Tt.length;At++)Tt[At]=this._geometries[At].copy();return new bt(Tt,this._factory)},bt.prototype.interfaces_=function(){return[mh]},bt.prototype.getClass=function(){return bt},wt.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(bt,wt),bt}(rl),ic=function(vt){this._factory=vt||null,this._isUserDataCopied=!1},tm={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ic.prototype.setCopyUserData=function(vt){this._isUserDataCopied=vt},ic.prototype.edit=function(vt,bt){if(vt===null)return null;var wt=this.editInternal(vt,bt);return this._isUserDataCopied&&wt.setUserData(vt.getUserData()),wt},ic.prototype.editInternal=function(vt,bt){return this._factory===null&&(this._factory=vt.getFactory()),vt instanceof rl?this.editGeometryCollection(vt,bt):vt instanceof da?this.editPolygon(vt,bt):vt instanceof Al||vt instanceof Ds?bt.edit(vt,this._factory):(_o.shouldNeverReachHere("Unsupported Geometry class: "+vt.getClass().getName()),null)},ic.prototype.editGeometryCollection=function(vt,bt){for(var wt=bt.edit(vt,this._factory),Tt=new vi,At=0;At<wt.getNumGeometries();At++){var Ot=this.edit(wt.getGeometryN(At),bt);Ot===null||Ot.isEmpty()||Tt.add(Ot)}return wt.getClass()===Df?this._factory.createMultiPoint(Tt.toArray([])):wt.getClass()===gh?this._factory.createMultiLineString(Tt.toArray([])):wt.getClass()===gu?this._factory.createMultiPolygon(Tt.toArray([])):this._factory.createGeometryCollection(Tt.toArray([]))},ic.prototype.editPolygon=function(vt,bt){var wt=bt.edit(vt,this._factory);if(wt===null&&(wt=this._factory.createPolygon(null)),wt.isEmpty())return wt;var Tt=this.edit(wt.getExteriorRing(),bt);if(Tt===null||Tt.isEmpty())return this._factory.createPolygon();for(var At=new vi,Ot=0;Ot<wt.getNumInteriorRing();Ot++){var Dt=this.edit(wt.getInteriorRingN(Ot),bt);Dt===null||Dt.isEmpty()||At.add(Dt)}return this._factory.createPolygon(Tt,At.toArray([]))},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.GeometryEditorOperation=function(){},tm.NoOpGeometryOperation.get=function(){return jp},tm.CoordinateOperation.get=function(){return Vp},tm.CoordinateSequenceOperation.get=function(){return Up},Object.defineProperties(ic,tm);var jp=function(){};jp.prototype.edit=function(vt,bt){return vt},jp.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},jp.prototype.getClass=function(){return jp};var Vp=function(){};Vp.prototype.edit=function(vt,bt){var wt=this.editCoordinates(vt.getCoordinates(),vt);return wt===null?vt:vt instanceof pu?bt.createLinearRing(wt):vt instanceof Ds?bt.createLineString(wt):vt instanceof Al?wt.length>0?bt.createPoint(wt[0]):bt.createPoint():vt},Vp.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},Vp.prototype.getClass=function(){return Vp};var Up=function(){};Up.prototype.edit=function(vt,bt){return vt instanceof pu?bt.createLinearRing(this.edit(vt.getCoordinateSequence(),vt)):vt instanceof Ds?bt.createLineString(this.edit(vt.getCoordinateSequence(),vt)):vt instanceof Al?bt.createPoint(this.edit(vt.getCoordinateSequence(),vt)):vt},Up.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},Up.prototype.getClass=function(){return Up};var Zs=function(){var vt=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var bt=arguments[0];this._coordinates=new Array(bt).fill(null);for(var wt=0;wt<bt;wt++)vt._coordinates[wt]=new Nr}else if(ro(arguments[0],Yo)){var Tt=arguments[0];if(Tt===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=Tt.getDimension(),this._coordinates=new Array(Tt.size()).fill(null);for(var At=0;At<this._coordinates.length;At++)vt._coordinates[At]=Tt.getCoordinateCopy(At)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Ot=arguments[0],Dt=arguments[1];this._coordinates=Ot,this._dimension=Dt,Ot===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var jt=arguments[0],Gt=arguments[1];this._coordinates=new Array(jt).fill(null),this._dimension=Gt;for(var qt=0;qt<jt;qt++)vt._coordinates[qt]=new Nr}}},ky={serialVersionUID:{configurable:!0}};Zs.prototype.setOrdinate=function(vt,bt,wt){switch(bt){case Yo.X:this._coordinates[vt].x=wt;break;case Yo.Y:this._coordinates[vt].y=wt;break;case Yo.Z:this._coordinates[vt].z=wt;break;default:throw new Ns("invalid ordinateIndex")}},Zs.prototype.size=function(){return this._coordinates.length},Zs.prototype.getOrdinate=function(vt,bt){switch(bt){case Yo.X:return this._coordinates[vt].x;case Yo.Y:return this._coordinates[vt].y;case Yo.Z:return this._coordinates[vt].z}return po.NaN},Zs.prototype.getCoordinate=function(){if(arguments.length===1){var vt=arguments[0];return this._coordinates[vt]}if(arguments.length===2){var bt=arguments[0],wt=arguments[1];wt.x=this._coordinates[bt].x,wt.y=this._coordinates[bt].y,wt.z=this._coordinates[bt].z}},Zs.prototype.getCoordinateCopy=function(vt){return new Nr(this._coordinates[vt])},Zs.prototype.getDimension=function(){return this._dimension},Zs.prototype.getX=function(vt){return this._coordinates[vt].x},Zs.prototype.clone=function(){for(var vt=new Array(this.size()).fill(null),bt=0;bt<this._coordinates.length;bt++)vt[bt]=this._coordinates[bt].clone();return new Zs(vt,this._dimension)},Zs.prototype.expandEnvelope=function(vt){for(var bt=0;bt<this._coordinates.length;bt++)vt.expandToInclude(this._coordinates[bt]);return vt},Zs.prototype.copy=function(){for(var vt=new Array(this.size()).fill(null),bt=0;bt<this._coordinates.length;bt++)vt[bt]=this._coordinates[bt].copy();return new Zs(vt,this._dimension)},Zs.prototype.toString=function(){if(this._coordinates.length>0){var vt=new Fc(17*this._coordinates.length);vt.append("("),vt.append(this._coordinates[0]);for(var bt=1;bt<this._coordinates.length;bt++)vt.append(", "),vt.append(this._coordinates[bt]);return vt.append(")"),vt.toString()}return"()"},Zs.prototype.getY=function(vt){return this._coordinates[vt].y},Zs.prototype.toCoordinateArray=function(){return this._coordinates},Zs.prototype.interfaces_=function(){return[Yo,Ql]},Zs.prototype.getClass=function(){return Zs},ky.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Zs,ky);var mu=function(){},R0={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};mu.prototype.readResolve=function(){return mu.instance()},mu.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var vt=arguments[0];return new Zs(vt)}if(ro(arguments[0],Yo)){var bt=arguments[0];return new Zs(bt)}}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return Tt>3&&(Tt=3),Tt<2?new Zs(wt):new Zs(wt,Tt)}},mu.prototype.interfaces_=function(){return[Af,Ql]},mu.prototype.getClass=function(){return mu},mu.instance=function(){return mu.instanceObject},R0.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},R0.instanceObject.get=function(){return new mu},Object.defineProperties(mu,R0);var Ay=function(vt){function bt(){vt.call(this),this.map_=new Map}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.get=function(wt){return this.map_.get(wt)||null},bt.prototype.put=function(wt,Tt){return this.map_.set(wt,Tt),Tt},bt.prototype.values=function(){for(var wt=new vi,Tt=this.map_.values(),At=Tt.next();!At.done;)wt.add(At.value),At=Tt.next();return wt},bt.prototype.entrySet=function(){var wt=new Qg;return this.map_.entries().forEach(function(Tt){return wt.add(Tt)}),wt},bt.prototype.size=function(){return this.map_.size()},bt}(Md),ps=function vt(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=vt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof wc){var bt=arguments[0];this._modelType=bt,bt===vt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var wt=arguments[0];this._modelType=vt.FIXED,this.setScale(wt)}else if(arguments[0]instanceof vt){var Tt=arguments[0];this._modelType=Tt._modelType,this._scale=Tt._scale}}},M0={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ps.prototype.equals=function(vt){if(!(vt instanceof ps))return!1;var bt=vt;return this._modelType===bt._modelType&&this._scale===bt._scale},ps.prototype.compareTo=function(vt){var bt=vt,wt=this.getMaximumSignificantDigits(),Tt=bt.getMaximumSignificantDigits();return new zc(wt).compareTo(new zc(Tt))},ps.prototype.getScale=function(){return this._scale},ps.prototype.isFloating=function(){return this._modelType===ps.FLOATING||this._modelType===ps.FLOATING_SINGLE},ps.prototype.getType=function(){return this._modelType},ps.prototype.toString=function(){var vt="UNKNOWN";return this._modelType===ps.FLOATING?vt="Floating":this._modelType===ps.FLOATING_SINGLE?vt="Floating-Single":this._modelType===ps.FIXED&&(vt="Fixed (Scale="+this.getScale()+")"),vt},ps.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var vt=arguments[0];return po.isNaN(vt)||this._modelType===ps.FLOATING_SINGLE?vt:this._modelType===ps.FIXED?Math.round(vt*this._scale)/this._scale:vt}if(arguments[0]instanceof Nr){var bt=arguments[0];if(this._modelType===ps.FLOATING)return null;bt.x=this.makePrecise(bt.x),bt.y=this.makePrecise(bt.y)}},ps.prototype.getMaximumSignificantDigits=function(){var vt=16;return this._modelType===ps.FLOATING?vt=16:this._modelType===ps.FLOATING_SINGLE?vt=6:this._modelType===ps.FIXED&&(vt=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),vt},ps.prototype.setScale=function(vt){this._scale=Math.abs(vt)},ps.prototype.interfaces_=function(){return[Ql,Jl]},ps.prototype.getClass=function(){return ps},ps.mostPrecise=function(vt,bt){return vt.compareTo(bt)>=0?vt:bt},M0.serialVersionUID.get=function(){return 7777263578777804e3},M0.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(ps,M0);var wc=function vt(bt){this._name=bt||null,vt.nameToTypeMap.put(bt,this)},Gp={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};wc.prototype.readResolve=function(){return wc.nameToTypeMap.get(this._name)},wc.prototype.toString=function(){return this._name},wc.prototype.interfaces_=function(){return[Ql]},wc.prototype.getClass=function(){return wc},Gp.serialVersionUID.get=function(){return-552860263173159e4},Gp.nameToTypeMap.get=function(){return new Ay},Object.defineProperties(wc,Gp),ps.Type=wc,ps.FIXED=new wc("FIXED"),ps.FLOATING=new wc("FLOATING"),ps.FLOATING_SINGLE=new wc("FLOATING SINGLE");var Io=function vt(){this._precisionModel=new ps,this._SRID=0,this._coordinateSequenceFactory=vt.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?ro(arguments[0],Af)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ps&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ly={serialVersionUID:{configurable:!0}};Io.prototype.toGeometry=function(vt){return vt.isNull()?this.createPoint(null):vt.getMinX()===vt.getMaxX()&&vt.getMinY()===vt.getMaxY()?this.createPoint(new Nr(vt.getMinX(),vt.getMinY())):vt.getMinX()===vt.getMaxX()||vt.getMinY()===vt.getMaxY()?this.createLineString([new Nr(vt.getMinX(),vt.getMinY()),new Nr(vt.getMaxX(),vt.getMaxY())]):this.createPolygon(this.createLinearRing([new Nr(vt.getMinX(),vt.getMinY()),new Nr(vt.getMinX(),vt.getMaxY()),new Nr(vt.getMaxX(),vt.getMaxY()),new Nr(vt.getMaxX(),vt.getMinY()),new Nr(vt.getMinX(),vt.getMinY())]),null)},Io.prototype.createLineString=function(vt){return vt?vt instanceof Array?new Ds(this.getCoordinateSequenceFactory().create(vt),this):ro(vt,Yo)?new Ds(vt,this):void 0:new Ds(this.getCoordinateSequenceFactory().create([]),this)},Io.prototype.createMultiLineString=function(){if(arguments.length===0)return new gh(null,this);if(arguments.length===1){var vt=arguments[0];return new gh(vt,this)}},Io.prototype.buildGeometry=function(vt){for(var bt=null,wt=!1,Tt=!1,At=vt.iterator();At.hasNext();){var Ot=At.next(),Dt=Ot.getClass();bt===null&&(bt=Dt),Dt!==bt&&(wt=!0),Ot.isGeometryCollectionOrDerived()&&(Tt=!0)}if(bt===null)return this.createGeometryCollection();if(wt||Tt)return this.createGeometryCollection(Io.toGeometryArray(vt));var jt=vt.iterator().next();if(vt.size()>1){if(jt instanceof da)return this.createMultiPolygon(Io.toPolygonArray(vt));if(jt instanceof Ds)return this.createMultiLineString(Io.toLineStringArray(vt));if(jt instanceof Al)return this.createMultiPoint(Io.toPointArray(vt));_o.shouldNeverReachHere("Unhandled class: "+jt.getClass().getName())}return jt},Io.prototype.createMultiPointFromCoords=function(vt){return this.createMultiPoint(vt!==null?this.getCoordinateSequenceFactory().create(vt):null)},Io.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Nr){var vt=arguments[0];return this.createPoint(vt!==null?this.getCoordinateSequenceFactory().create([vt]):null)}if(ro(arguments[0],Yo)){var bt=arguments[0];return new Al(bt,this)}}},Io.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Io.prototype.createPolygon=function(){if(arguments.length===0)return new da(null,null,this);if(arguments.length===1){if(ro(arguments[0],Yo)){var vt=arguments[0];return this.createPolygon(this.createLinearRing(vt))}if(arguments[0]instanceof Array){var bt=arguments[0];return this.createPolygon(this.createLinearRing(bt))}if(arguments[0]instanceof pu){var wt=arguments[0];return this.createPolygon(wt,null)}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return new da(Tt,At,this)}},Io.prototype.getSRID=function(){return this._SRID},Io.prototype.createGeometryCollection=function(){if(arguments.length===0)return new rl(null,this);if(arguments.length===1){var vt=arguments[0];return new rl(vt,this)}},Io.prototype.createGeometry=function(vt){return new ic(this).edit(vt,{edit:function(){if(arguments.length===2){var bt=arguments[0];return this._coordinateSequenceFactory.create(bt)}}})},Io.prototype.getPrecisionModel=function(){return this._precisionModel},Io.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var vt=arguments[0];return this.createLinearRing(vt!==null?this.getCoordinateSequenceFactory().create(vt):null)}if(ro(arguments[0],Yo)){var bt=arguments[0];return new pu(bt,this)}}},Io.prototype.createMultiPolygon=function(){if(arguments.length===0)return new gu(null,this);if(arguments.length===1){var vt=arguments[0];return new gu(vt,this)}},Io.prototype.createMultiPoint=function(){var vt=this;if(arguments.length===0)return new Df(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var bt=arguments[0];return new Df(bt,this)}if(arguments[0]instanceof Array){var wt=arguments[0];return this.createMultiPoint(wt!==null?this.getCoordinateSequenceFactory().create(wt):null)}if(ro(arguments[0],Yo)){var Tt=arguments[0];if(Tt===null)return this.createMultiPoint(new Array(0).fill(null));for(var At=new Array(Tt.size()).fill(null),Ot=0;Ot<Tt.size();Ot++){var Dt=vt.getCoordinateSequenceFactory().create(1,Tt.getDimension());Xs.copy(Tt,Ot,Dt,0,1),At[Ot]=vt.createPoint(Dt)}return this.createMultiPoint(At)}}},Io.prototype.interfaces_=function(){return[Ql]},Io.prototype.getClass=function(){return Io},Io.toMultiPolygonArray=function(vt){var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.toGeometryArray=function(vt){if(vt===null)return null;var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.getDefaultCoordinateSequenceFactory=function(){return mu.instance()},Io.toMultiLineStringArray=function(vt){var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.toLineStringArray=function(vt){var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.toMultiPointArray=function(vt){var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.toLinearRingArray=function(vt){var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.toPointArray=function(vt){var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.toPolygonArray=function(vt){var bt=new Array(vt.size()).fill(null);return vt.toArray(bt)},Io.createPointFromInternalCoord=function(vt,bt){return bt.getPrecisionModel().makePrecise(vt),bt.getFactory().createPoint(vt)},Ly.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(Io,Ly);var o_=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Wp=function(vt){this.geometryFactory=vt||new Io};Wp.prototype.read=function(vt){var bt,wt=(bt=typeof vt=="string"?JSON.parse(vt):vt).type;if(!Uc[wt])throw new Error("Unknown GeoJSON type: "+bt.type);return o_.indexOf(wt)!==-1?Uc[wt].apply(this,[bt.coordinates]):wt==="GeometryCollection"?Uc[wt].apply(this,[bt.geometries]):Uc[wt].apply(this,[bt])},Wp.prototype.write=function(vt){var bt=vt.getGeometryType();if(!Nu[bt])throw new Error("Geometry is not supported");return Nu[bt].apply(this,[vt])};var Uc={Feature:function(vt){var bt={};for(var wt in vt)bt[wt]=vt[wt];if(vt.geometry){var Tt=vt.geometry.type;if(!Uc[Tt])throw new Error("Unknown GeoJSON type: "+vt.type);bt.geometry=this.read(vt.geometry)}return vt.bbox&&(bt.bbox=Uc.bbox.apply(this,[vt.bbox])),bt},FeatureCollection:function(vt){var bt={};if(vt.features){bt.features=[];for(var wt=0;wt<vt.features.length;++wt)bt.features.push(this.read(vt.features[wt]))}return vt.bbox&&(bt.bbox=this.parse.bbox.apply(this,[vt.bbox])),bt},coordinates:function(vt){for(var bt=[],wt=0;wt<vt.length;++wt){var Tt=vt[wt];bt.push(new Nr(Tt[0],Tt[1]))}return bt},bbox:function(vt){return this.geometryFactory.createLinearRing([new Nr(vt[0],vt[1]),new Nr(vt[2],vt[1]),new Nr(vt[2],vt[3]),new Nr(vt[0],vt[3]),new Nr(vt[0],vt[1])])},Point:function(vt){var bt=new Nr(vt[0],vt[1]);return this.geometryFactory.createPoint(bt)},MultiPoint:function(vt){for(var bt=[],wt=0;wt<vt.length;++wt)bt.push(Uc.Point.apply(this,[vt[wt]]));return this.geometryFactory.createMultiPoint(bt)},LineString:function(vt){var bt=Uc.coordinates.apply(this,[vt]);return this.geometryFactory.createLineString(bt)},MultiLineString:function(vt){for(var bt=[],wt=0;wt<vt.length;++wt)bt.push(Uc.LineString.apply(this,[vt[wt]]));return this.geometryFactory.createMultiLineString(bt)},Polygon:function(vt){for(var bt=Uc.coordinates.apply(this,[vt[0]]),wt=this.geometryFactory.createLinearRing(bt),Tt=[],At=1;At<vt.length;++At){var Ot=vt[At],Dt=Uc.coordinates.apply(this,[Ot]),jt=this.geometryFactory.createLinearRing(Dt);Tt.push(jt)}return this.geometryFactory.createPolygon(wt,Tt)},MultiPolygon:function(vt){for(var bt=[],wt=0;wt<vt.length;++wt){var Tt=vt[wt];bt.push(Uc.Polygon.apply(this,[Tt]))}return this.geometryFactory.createMultiPolygon(bt)},GeometryCollection:function(vt){for(var bt=[],wt=0;wt<vt.length;++wt){var Tt=vt[wt];bt.push(this.read(Tt))}return this.geometryFactory.createGeometryCollection(bt)}},Nu={coordinate:function(vt){return[vt.x,vt.y]},Point:function(vt){return{type:"Point",coordinates:Nu.coordinate.apply(this,[vt.getCoordinate()])}},MultiPoint:function(vt){for(var bt=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Nu.Point.apply(this,[Tt]);bt.push(At.coordinates)}return{type:"MultiPoint",coordinates:bt}},LineString:function(vt){for(var bt=[],wt=vt.getCoordinates(),Tt=0;Tt<wt.length;++Tt){var At=wt[Tt];bt.push(Nu.coordinate.apply(this,[At]))}return{type:"LineString",coordinates:bt}},MultiLineString:function(vt){for(var bt=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Nu.LineString.apply(this,[Tt]);bt.push(At.coordinates)}return{type:"MultiLineString",coordinates:bt}},Polygon:function(vt){var bt=[],wt=Nu.LineString.apply(this,[vt._shell]);bt.push(wt.coordinates);for(var Tt=0;Tt<vt._holes.length;++Tt){var At=vt._holes[Tt],Ot=Nu.LineString.apply(this,[At]);bt.push(Ot.coordinates)}return{type:"Polygon",coordinates:bt}},MultiPolygon:function(vt){for(var bt=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Nu.Polygon.apply(this,[Tt]);bt.push(At.coordinates)}return{type:"MultiPolygon",coordinates:bt}},GeometryCollection:function(vt){for(var bt=[],wt=0;wt<vt._geometries.length;++wt){var Tt=vt._geometries[wt],At=Tt.getGeometryType();bt.push(Nu[At].apply(this,[Tt]))}return{type:"GeometryCollection",geometries:bt}}},nm=function(vt){this.geometryFactory=vt||new Io,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Wp(this.geometryFactory)};nm.prototype.read=function(vt){var bt=this.parser.read(vt);return this.precisionModel.getType()===ps.FIXED&&this.reducePrecision(bt),bt},nm.prototype.reducePrecision=function(vt){var bt,wt;if(vt.coordinate)this.precisionModel.makePrecise(vt.coordinate);else if(vt.points)for(bt=0,wt=vt.points.length;bt<wt;bt++)this.precisionModel.makePrecise(vt.points[bt]);else if(vt.geometries)for(bt=0,wt=vt.geometries.length;bt<wt;bt++)this.reducePrecision(vt.geometries[bt])};var Py=function(){this.parser=new Wp(this.geometryFactory)};Py.prototype.write=function(vt){return this.parser.write(vt)};var mi=function(){},qp={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function rm(vt){this.message=vt||""}function Gc(){this.array_=[]}mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.opposite=function(vt){return vt===mi.LEFT?mi.RIGHT:vt===mi.RIGHT?mi.LEFT:vt},qp.ON.get=function(){return 0},qp.LEFT.get=function(){return 1},qp.RIGHT.get=function(){return 2},Object.defineProperties(mi,qp),rm.prototype=new Error,rm.prototype.name="EmptyStackException",Gc.prototype=new vc,Gc.prototype.add=function(vt){return this.array_.push(vt),!0},Gc.prototype.get=function(vt){if(vt<0||vt>=this.size())throw new Error;return this.array_[vt]},Gc.prototype.push=function(vt){return this.array_.push(vt),vt},Gc.prototype.pop=function(vt){if(this.array_.length===0)throw new rm;return this.array_.pop()},Gc.prototype.peek=function(){if(this.array_.length===0)throw new rm;return this.array_[this.array_.length-1]},Gc.prototype.empty=function(){return this.array_.length===0},Gc.prototype.isEmpty=function(){return this.empty()},Gc.prototype.search=function(vt){return this.array_.indexOf(vt)},Gc.prototype.size=function(){return this.array_.length},Gc.prototype.toArray=function(){for(var vt=[],bt=0,wt=this.array_.length;bt<wt;bt++)vt.push(this.array_[bt]);return vt};var Ec=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ec.prototype.getCoordinate=function(){return this._minCoord},Ec.prototype.getRightmostSide=function(vt,bt){var wt=this.getRightmostSideOfSegment(vt,bt);return wt<0&&(wt=this.getRightmostSideOfSegment(vt,bt-1)),wt<0&&(this._minCoord=null,this.checkForRightmostCoordinate(vt)),wt},Ec.prototype.findRightmostEdgeAtVertex=function(){var vt=this._minDe.getEdge().getCoordinates();_o.isTrue(this._minIndex>0&&this._minIndex<vt.length,"rightmost point expected to be interior vertex of edge");var bt=vt[this._minIndex-1],wt=vt[this._minIndex+1],Tt=ki.computeOrientation(this._minCoord,wt,bt),At=!1;(bt.y<this._minCoord.y&&wt.y<this._minCoord.y&&Tt===ki.COUNTERCLOCKWISE||bt.y>this._minCoord.y&&wt.y>this._minCoord.y&&Tt===ki.CLOCKWISE)&&(At=!0),At&&(this._minIndex=this._minIndex-1)},Ec.prototype.getRightmostSideOfSegment=function(vt,bt){var wt=vt.getEdge().getCoordinates();if(bt<0||bt+1>=wt.length||wt[bt].y===wt[bt+1].y)return-1;var Tt=mi.LEFT;return wt[bt].y<wt[bt+1].y&&(Tt=mi.RIGHT),Tt},Ec.prototype.getEdge=function(){return this._orientedDe},Ec.prototype.checkForRightmostCoordinate=function(vt){for(var bt=this,wt=vt.getEdge().getCoordinates(),Tt=0;Tt<wt.length-1;Tt++)(bt._minCoord===null||wt[Tt].x>bt._minCoord.x)&&(bt._minDe=vt,bt._minIndex=Tt,bt._minCoord=wt[Tt])},Ec.prototype.findRightmostEdgeAtNode=function(){var vt=this._minDe.getNode().getEdges();this._minDe=vt.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ec.prototype.findEdge=function(vt){for(var bt=vt.iterator();bt.hasNext();){var wt=bt.next();wt.isForward()&&this.checkForRightmostCoordinate(wt)}_o.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===mi.LEFT&&(this._orientedDe=this._minDe.getSym())},Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec};var Du=function(vt){function bt(wt,Tt){vt.call(this,bt.msgWithCoord(wt,Tt)),this.pt=Tt?new Nr(Tt):null,this.name="TopologyException"}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.getCoordinate=function(){return this.pt},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.msgWithCoord=function(wt,Tt){return Tt?wt:wt+" [ "+Tt+" ]"},bt}(Ru),im=function(){this.array_=[]};im.prototype.addLast=function(vt){this.array_.push(vt)},im.prototype.removeFirst=function(){return this.array_.shift()},im.prototype.isEmpty=function(){return this.array_.length===0};var Xa=function(){this._finder=null,this._dirEdgeList=new vi,this._nodes=new vi,this._rightMostCoord=null,this._env=null,this._finder=new Ec};Xa.prototype.clearVisitedEdges=function(){for(var vt=this._dirEdgeList.iterator();vt.hasNext();)vt.next().setVisited(!1)},Xa.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Xa.prototype.computeNodeDepth=function(vt){for(var bt=null,wt=vt.getEdges().iterator();wt.hasNext();){var Tt=wt.next();if(Tt.isVisited()||Tt.getSym().isVisited()){bt=Tt;break}}if(bt===null)throw new Du("unable to find edge to compute depths at "+vt.getCoordinate());vt.getEdges().computeDepths(bt);for(var At=vt.getEdges().iterator();At.hasNext();){var Ot=At.next();Ot.setVisited(!0),this.copySymDepths(Ot)}},Xa.prototype.computeDepth=function(vt){this.clearVisitedEdges();var bt=this._finder.getEdge();bt.setEdgeDepths(mi.RIGHT,vt),this.copySymDepths(bt),this.computeDepths(bt)},Xa.prototype.create=function(vt){this.addReachable(vt),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Xa.prototype.findResultEdges=function(){for(var vt=this._dirEdgeList.iterator();vt.hasNext();){var bt=vt.next();bt.getDepth(mi.RIGHT)>=1&&bt.getDepth(mi.LEFT)<=0&&!bt.isInteriorAreaEdge()&&bt.setInResult(!0)}},Xa.prototype.computeDepths=function(vt){var bt=new Qg,wt=new im,Tt=vt.getNode();for(wt.addLast(Tt),bt.add(Tt),vt.setVisited(!0);!wt.isEmpty();){var At=wt.removeFirst();bt.add(At),this.computeNodeDepth(At);for(var Ot=At.getEdges().iterator();Ot.hasNext();){var Dt=Ot.next().getSym();if(!Dt.isVisited()){var jt=Dt.getNode();bt.contains(jt)||(wt.addLast(jt),bt.add(jt))}}}},Xa.prototype.compareTo=function(vt){var bt=vt;return this._rightMostCoord.x<bt._rightMostCoord.x?-1:this._rightMostCoord.x>bt._rightMostCoord.x?1:0},Xa.prototype.getEnvelope=function(){if(this._env===null){for(var vt=new Ui,bt=this._dirEdgeList.iterator();bt.hasNext();)for(var wt=bt.next().getEdge().getCoordinates(),Tt=0;Tt<wt.length-1;Tt++)vt.expandToInclude(wt[Tt]);this._env=vt}return this._env},Xa.prototype.addReachable=function(vt){var bt=new Gc;for(bt.add(vt);!bt.empty();){var wt=bt.pop();this.add(wt,bt)}},Xa.prototype.copySymDepths=function(vt){var bt=vt.getSym();bt.setDepth(mi.LEFT,vt.getDepth(mi.RIGHT)),bt.setDepth(mi.RIGHT,vt.getDepth(mi.LEFT))},Xa.prototype.add=function(vt,bt){vt.setVisited(!0),this._nodes.add(vt);for(var wt=vt.getEdges().iterator();wt.hasNext();){var Tt=wt.next();this._dirEdgeList.add(Tt);var At=Tt.getSym().getNode();At.isVisited()||bt.push(At)}},Xa.prototype.getNodes=function(){return this._nodes},Xa.prototype.getDirectedEdges=function(){return this._dirEdgeList},Xa.prototype.interfaces_=function(){return[Jl]},Xa.prototype.getClass=function(){return Xa};var ks=function vt(){var bt=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var wt=arguments[0];this.init(wt.length)}else if(Number.isInteger(arguments[0])){var Tt=arguments[0];this.init(1),this.location[mi.ON]=Tt}else if(arguments[0]instanceof vt){var At=arguments[0];if(this.init(At.location.length),At!==null)for(var Ot=0;Ot<this.location.length;Ot++)bt.location[Ot]=At.location[Ot]}}else if(arguments.length===3){var Dt=arguments[0],jt=arguments[1],Gt=arguments[2];this.init(3),this.location[mi.ON]=Dt,this.location[mi.LEFT]=jt,this.location[mi.RIGHT]=Gt}};ks.prototype.setAllLocations=function(vt){for(var bt=0;bt<this.location.length;bt++)this.location[bt]=vt},ks.prototype.isNull=function(){for(var vt=0;vt<this.location.length;vt++)if(this.location[vt]!==Ur.NONE)return!1;return!0},ks.prototype.setAllLocationsIfNull=function(vt){for(var bt=0;bt<this.location.length;bt++)this.location[bt]===Ur.NONE&&(this.location[bt]=vt)},ks.prototype.isLine=function(){return this.location.length===1},ks.prototype.merge=function(vt){if(vt.location.length>this.location.length){var bt=new Array(3).fill(null);bt[mi.ON]=this.location[mi.ON],bt[mi.LEFT]=Ur.NONE,bt[mi.RIGHT]=Ur.NONE,this.location=bt}for(var wt=0;wt<this.location.length;wt++)this.location[wt]===Ur.NONE&&wt<vt.location.length&&(this.location[wt]=vt.location[wt])},ks.prototype.getLocations=function(){return this.location},ks.prototype.flip=function(){if(this.location.length<=1)return null;var vt=this.location[mi.LEFT];this.location[mi.LEFT]=this.location[mi.RIGHT],this.location[mi.RIGHT]=vt},ks.prototype.toString=function(){var vt=new Fc;return this.location.length>1&&vt.append(Ur.toLocationSymbol(this.location[mi.LEFT])),vt.append(Ur.toLocationSymbol(this.location[mi.ON])),this.location.length>1&&vt.append(Ur.toLocationSymbol(this.location[mi.RIGHT])),vt.toString()},ks.prototype.setLocations=function(vt,bt,wt){this.location[mi.ON]=vt,this.location[mi.LEFT]=bt,this.location[mi.RIGHT]=wt},ks.prototype.get=function(vt){return vt<this.location.length?this.location[vt]:Ur.NONE},ks.prototype.isArea=function(){return this.location.length>1},ks.prototype.isAnyNull=function(){for(var vt=0;vt<this.location.length;vt++)if(this.location[vt]===Ur.NONE)return!0;return!1},ks.prototype.setLocation=function(){if(arguments.length===1){var vt=arguments[0];this.setLocation(mi.ON,vt)}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];this.location[bt]=wt}},ks.prototype.init=function(vt){this.location=new Array(vt).fill(null),this.setAllLocations(Ur.NONE)},ks.prototype.isEqualOnSide=function(vt,bt){return this.location[bt]===vt.location[bt]},ks.prototype.allPositionsEqual=function(vt){for(var bt=0;bt<this.location.length;bt++)if(this.location[bt]!==vt)return!1;return!0},ks.prototype.interfaces_=function(){return[]},ks.prototype.getClass=function(){return ks};var bs=function vt(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var bt=arguments[0];this.elt[0]=new ks(bt),this.elt[1]=new ks(bt)}else if(arguments[0]instanceof vt){var wt=arguments[0];this.elt[0]=new ks(wt.elt[0]),this.elt[1]=new ks(wt.elt[1])}}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.elt[0]=new ks(Ur.NONE),this.elt[1]=new ks(Ur.NONE),this.elt[Tt].setLocation(At)}else if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],jt=arguments[2];this.elt[0]=new ks(Ot,Dt,jt),this.elt[1]=new ks(Ot,Dt,jt)}else if(arguments.length===4){var Gt=arguments[0],qt=arguments[1],en=arguments[2],Xt=arguments[3];this.elt[0]=new ks(Ur.NONE,Ur.NONE,Ur.NONE),this.elt[1]=new ks(Ur.NONE,Ur.NONE,Ur.NONE),this.elt[Gt].setLocations(qt,en,Xt)}};bs.prototype.getGeometryCount=function(){var vt=0;return this.elt[0].isNull()||vt++,this.elt[1].isNull()||vt++,vt},bs.prototype.setAllLocations=function(vt,bt){this.elt[vt].setAllLocations(bt)},bs.prototype.isNull=function(vt){return this.elt[vt].isNull()},bs.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var vt=arguments[0];this.setAllLocationsIfNull(0,vt),this.setAllLocationsIfNull(1,vt)}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];this.elt[bt].setAllLocationsIfNull(wt)}},bs.prototype.isLine=function(vt){return this.elt[vt].isLine()},bs.prototype.merge=function(vt){for(var bt=this,wt=0;wt<2;wt++)bt.elt[wt]===null&&vt.elt[wt]!==null?bt.elt[wt]=new ks(vt.elt[wt]):bt.elt[wt].merge(vt.elt[wt])},bs.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},bs.prototype.getLocation=function(){if(arguments.length===1){var vt=arguments[0];return this.elt[vt].get(mi.ON)}if(arguments.length===2){var bt=arguments[0],wt=arguments[1];return this.elt[bt].get(wt)}},bs.prototype.toString=function(){var vt=new Fc;return this.elt[0]!==null&&(vt.append("A:"),vt.append(this.elt[0].toString())),this.elt[1]!==null&&(vt.append(" B:"),vt.append(this.elt[1].toString())),vt.toString()},bs.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var vt=arguments[0];return this.elt[vt].isArea()}},bs.prototype.isAnyNull=function(vt){return this.elt[vt].isAnyNull()},bs.prototype.setLocation=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1];this.elt[vt].setLocation(mi.ON,bt)}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this.elt[wt].setLocation(Tt,At)}},bs.prototype.isEqualOnSide=function(vt,bt){return this.elt[0].isEqualOnSide(vt.elt[0],bt)&&this.elt[1].isEqualOnSide(vt.elt[1],bt)},bs.prototype.allPositionsEqual=function(vt,bt){return this.elt[vt].allPositionsEqual(bt)},bs.prototype.toLine=function(vt){this.elt[vt].isArea()&&(this.elt[vt]=new ks(this.elt[vt].location[0]))},bs.prototype.interfaces_=function(){return[]},bs.prototype.getClass=function(){return bs},bs.toLineLabel=function(vt){for(var bt=new bs(Ur.NONE),wt=0;wt<2;wt++)bt.setLocation(wt,vt.getLocation(wt));return bt};var Ks=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new vi,this._pts=new vi,this._label=new bs(Ur.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new vi,this._geometryFactory=null;var vt=arguments[0],bt=arguments[1];this._geometryFactory=bt,this.computePoints(vt),this.computeRing()};Ks.prototype.computeRing=function(){if(this._ring!==null)return null;for(var vt=new Array(this._pts.size()).fill(null),bt=0;bt<this._pts.size();bt++)vt[bt]=this._pts.get(bt);this._ring=this._geometryFactory.createLinearRing(vt),this._isHole=ki.isCCW(this._ring.getCoordinates())},Ks.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Ks.prototype.computePoints=function(vt){var bt=this;this._startDe=vt;var wt=vt,Tt=!0;do{if(wt===null)throw new Du("Found null DirectedEdge");if(wt.getEdgeRing()===bt)throw new Du("Directed Edge visited twice during ring-building at "+wt.getCoordinate());bt._edges.add(wt);var At=wt.getLabel();_o.isTrue(At.isArea()),bt.mergeLabel(At),bt.addPoints(wt.getEdge(),wt.isForward(),Tt),Tt=!1,bt.setEdgeRing(wt,bt),wt=bt.getNext(wt)}while(wt!==this._startDe)},Ks.prototype.getLinearRing=function(){return this._ring},Ks.prototype.getCoordinate=function(vt){return this._pts.get(vt)},Ks.prototype.computeMaxNodeDegree=function(){var vt=this;this._maxNodeDegree=0;var bt=this._startDe;do{var wt=bt.getNode().getEdges().getOutgoingDegree(vt);wt>vt._maxNodeDegree&&(vt._maxNodeDegree=wt),bt=vt.getNext(bt)}while(bt!==this._startDe);this._maxNodeDegree*=2},Ks.prototype.addPoints=function(vt,bt,wt){var Tt=vt.getCoordinates();if(bt){var At=1;wt&&(At=0);for(var Ot=At;Ot<Tt.length;Ot++)this._pts.add(Tt[Ot])}else{var Dt=Tt.length-2;wt&&(Dt=Tt.length-1);for(var jt=Dt;jt>=0;jt--)this._pts.add(Tt[jt])}},Ks.prototype.isHole=function(){return this._isHole},Ks.prototype.setInResult=function(){var vt=this._startDe;do vt.getEdge().setInResult(!0),vt=vt.getNext();while(vt!==this._startDe)},Ks.prototype.containsPoint=function(vt){var bt=this.getLinearRing();if(!bt.getEnvelopeInternal().contains(vt)||!ki.isPointInRing(vt,bt.getCoordinates()))return!1;for(var wt=this._holes.iterator();wt.hasNext();)if(wt.next().containsPoint(vt))return!1;return!0},Ks.prototype.addHole=function(vt){this._holes.add(vt)},Ks.prototype.isShell=function(){return this._shell===null},Ks.prototype.getLabel=function(){return this._label},Ks.prototype.getEdges=function(){return this._edges},Ks.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ks.prototype.getShell=function(){return this._shell},Ks.prototype.mergeLabel=function(){if(arguments.length===1){var vt=arguments[0];this.mergeLabel(vt,0),this.mergeLabel(vt,1)}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1],Tt=bt.getLocation(wt,mi.RIGHT);if(Tt===Ur.NONE)return null;if(this._label.getLocation(wt)===Ur.NONE)return this._label.setLocation(wt,Tt),null}},Ks.prototype.setShell=function(vt){this._shell=vt,vt!==null&&vt.addHole(this)},Ks.prototype.toPolygon=function(vt){for(var bt=new Array(this._holes.size()).fill(null),wt=0;wt<this._holes.size();wt++)bt[wt]=this._holes.get(wt).getLinearRing();return vt.createPolygon(this.getLinearRing(),bt)},Ks.prototype.interfaces_=function(){return[]},Ks.prototype.getClass=function(){return Ks};var s_=function(vt){function bt(){var wt=arguments[0],Tt=arguments[1];vt.call(this,wt,Tt)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.setEdgeRing=function(wt,Tt){wt.setMinEdgeRing(Tt)},bt.prototype.getNext=function(wt){return wt.getNextMin()},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Ks),a_=function(vt){function bt(){var wt=arguments[0],Tt=arguments[1];vt.call(this,wt,Tt)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.buildMinimalRings=function(){var wt=new vi,Tt=this._startDe;do{if(Tt.getMinEdgeRing()===null){var At=new s_(Tt,this._geometryFactory);wt.add(At)}Tt=Tt.getNext()}while(Tt!==this._startDe);return wt},bt.prototype.setEdgeRing=function(wt,Tt){wt.setEdgeRing(Tt)},bt.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var wt=this._startDe;do wt.getNode().getEdges().linkMinimalDirectedEdges(this),wt=wt.getNext();while(wt!==this._startDe)},bt.prototype.getNext=function(wt){return wt.getNext()},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Ks),Ll=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this._label=vt}}};Ll.prototype.setVisited=function(vt){this._isVisited=vt},Ll.prototype.setInResult=function(vt){this._isInResult=vt},Ll.prototype.isCovered=function(){return this._isCovered},Ll.prototype.isCoveredSet=function(){return this._isCoveredSet},Ll.prototype.setLabel=function(vt){this._label=vt},Ll.prototype.getLabel=function(){return this._label},Ll.prototype.setCovered=function(vt){this._isCovered=vt,this._isCoveredSet=!0},Ll.prototype.updateIM=function(vt){_o.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(vt)},Ll.prototype.isInResult=function(){return this._isInResult},Ll.prototype.isVisited=function(){return this._isVisited},Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll};var om=function(vt){function bt(){vt.call(this),this._coord=null,this._edges=null;var wt=arguments[0],Tt=arguments[1];this._coord=wt,this._edges=Tt,this._label=new bs(0,Ur.NONE)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.isIncidentEdgeInResult=function(){for(var wt=this.getEdges().getEdges().iterator();wt.hasNext();)if(wt.next().getEdge().isInResult())return!0;return!1},bt.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},bt.prototype.getCoordinate=function(){return this._coord},bt.prototype.print=function(wt){wt.println("node "+this._coord+" lbl: "+this._label)},bt.prototype.computeIM=function(wt){},bt.prototype.computeMergedLocation=function(wt,Tt){var At=Ur.NONE;if(At=this._label.getLocation(Tt),!wt.isNull(Tt)){var Ot=wt.getLocation(Tt);At!==Ur.BOUNDARY&&(At=Ot)}return At},bt.prototype.setLabel=function(){if(arguments.length!==2)return vt.prototype.setLabel.apply(this,arguments);var wt=arguments[0],Tt=arguments[1];this._label===null?this._label=new bs(wt,Tt):this._label.setLocation(wt,Tt)},bt.prototype.getEdges=function(){return this._edges},bt.prototype.mergeLabel=function(){var wt=this;if(arguments[0]instanceof bt){var Tt=arguments[0];this.mergeLabel(Tt._label)}else if(arguments[0]instanceof bs)for(var At=arguments[0],Ot=0;Ot<2;Ot++){var Dt=wt.computeMergedLocation(At,Ot),jt=wt._label.getLocation(Ot);jt===Ur.NONE&&wt._label.setLocation(Ot,Dt)}},bt.prototype.add=function(wt){this._edges.insert(wt),wt.setNode(this)},bt.prototype.setLabelBoundary=function(wt){if(this._label===null)return null;var Tt=Ur.NONE;this._label!==null&&(Tt=this._label.getLocation(wt));var At=null;switch(Tt){case Ur.BOUNDARY:At=Ur.INTERIOR;break;case Ur.INTERIOR:default:At=Ur.BOUNDARY}this._label.setLocation(wt,At)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Ll),Wc=function(){this.nodeMap=new Ya,this.nodeFact=null;var vt=arguments[0];this.nodeFact=vt};Wc.prototype.find=function(vt){return this.nodeMap.get(vt)},Wc.prototype.addNode=function(){if(arguments[0]instanceof Nr){var vt=arguments[0],bt=this.nodeMap.get(vt);return bt===null&&(bt=this.nodeFact.createNode(vt),this.nodeMap.put(vt,bt)),bt}if(arguments[0]instanceof om){var wt=arguments[0],Tt=this.nodeMap.get(wt.getCoordinate());return Tt===null?(this.nodeMap.put(wt.getCoordinate(),wt),wt):(Tt.mergeLabel(wt),Tt)}},Wc.prototype.print=function(vt){for(var bt=this.iterator();bt.hasNext();)bt.next().print(vt)},Wc.prototype.iterator=function(){return this.nodeMap.values().iterator()},Wc.prototype.values=function(){return this.nodeMap.values()},Wc.prototype.getBoundaryNodes=function(vt){for(var bt=new vi,wt=this.iterator();wt.hasNext();){var Tt=wt.next();Tt.getLabel().getLocation(vt)===Ur.BOUNDARY&&bt.add(Tt)}return bt},Wc.prototype.add=function(vt){var bt=vt.getCoordinate();this.addNode(bt).add(vt)},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var xs=function(){},Yp={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};xs.prototype.interfaces_=function(){return[]},xs.prototype.getClass=function(){return xs},xs.isNorthern=function(vt){return vt===xs.NE||vt===xs.NW},xs.isOpposite=function(vt,bt){return vt!==bt&&(vt-bt+4)%4===2},xs.commonHalfPlane=function(vt,bt){if(vt===bt)return vt;if((vt-bt+4)%4===2)return-1;var wt=vt<bt?vt:bt;return wt===0&&(vt>bt?vt:bt)===3?3:wt},xs.isInHalfPlane=function(vt,bt){return bt===xs.SE?vt===xs.SE||vt===xs.SW:vt===bt||vt===bt+1},xs.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],bt=arguments[1];if(vt===0&&bt===0)throw new Ns("Cannot compute the quadrant for point ( "+vt+", "+bt+" )");return vt>=0?bt>=0?xs.NE:xs.SE:bt>=0?xs.NW:xs.SW}if(arguments[0]instanceof Nr&&arguments[1]instanceof Nr){var wt=arguments[0],Tt=arguments[1];if(Tt.x===wt.x&&Tt.y===wt.y)throw new Ns("Cannot compute the quadrant for two identical points "+wt);return Tt.x>=wt.x?Tt.y>=wt.y?xs.NE:xs.SE:Tt.y>=wt.y?xs.NW:xs.SW}},Yp.NE.get=function(){return 0},Yp.NW.get=function(){return 1},Yp.SW.get=function(){return 2},Yp.SE.get=function(){return 3},Object.defineProperties(xs,Yp);var Za=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var vt=arguments[0];this._edge=vt}else if(arguments.length===3){var bt=arguments[0],wt=arguments[1],Tt=arguments[2],At=null;this._edge=bt,this.init(wt,Tt),this._label=At}else if(arguments.length===4){var Ot=arguments[0],Dt=arguments[1],jt=arguments[2],Gt=arguments[3];this._edge=Ot,this.init(Dt,jt),this._label=Gt}};Za.prototype.compareDirection=function(vt){return this._dx===vt._dx&&this._dy===vt._dy?0:this._quadrant>vt._quadrant?1:this._quadrant<vt._quadrant?-1:ki.computeOrientation(vt._p0,vt._p1,this._p1)},Za.prototype.getDy=function(){return this._dy},Za.prototype.getCoordinate=function(){return this._p0},Za.prototype.setNode=function(vt){this._node=vt},Za.prototype.print=function(vt){var bt=Math.atan2(this._dy,this._dx),wt=this.getClass().getName(),Tt=wt.lastIndexOf("."),At=wt.substring(Tt+1);vt.print("  "+At+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+bt+"   "+this._label)},Za.prototype.compareTo=function(vt){var bt=vt;return this.compareDirection(bt)},Za.prototype.getDirectedCoordinate=function(){return this._p1},Za.prototype.getDx=function(){return this._dx},Za.prototype.getLabel=function(){return this._label},Za.prototype.getEdge=function(){return this._edge},Za.prototype.getQuadrant=function(){return this._quadrant},Za.prototype.getNode=function(){return this._node},Za.prototype.toString=function(){var vt=Math.atan2(this._dy,this._dx),bt=this.getClass().getName(),wt=bt.lastIndexOf(".");return"  "+bt.substring(wt+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+vt+"   "+this._label},Za.prototype.computeLabel=function(vt){},Za.prototype.init=function(vt,bt){this._p0=vt,this._p1=bt,this._dx=bt.x-vt.x,this._dy=bt.y-vt.y,this._quadrant=xs.quadrant(this._dx,this._dy),_o.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},Za.prototype.interfaces_=function(){return[Jl]},Za.prototype.getClass=function(){return Za};var sm=function(vt){function bt(){var wt=arguments[0],Tt=arguments[1];if(vt.call(this,wt),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=Tt,Tt)this.init(wt.getCoordinate(0),wt.getCoordinate(1));else{var At=wt.getNumPoints()-1;this.init(wt.getCoordinate(At),wt.getCoordinate(At-1))}this.computeDirectedLabel()}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.getNextMin=function(){return this._nextMin},bt.prototype.getDepth=function(wt){return this._depth[wt]},bt.prototype.setVisited=function(wt){this._isVisited=wt},bt.prototype.computeDirectedLabel=function(){this._label=new bs(this._edge.getLabel()),this._isForward||this._label.flip()},bt.prototype.getNext=function(){return this._next},bt.prototype.setDepth=function(wt,Tt){if(this._depth[wt]!==-999&&this._depth[wt]!==Tt)throw new Du("assigned depths do not match",this.getCoordinate());this._depth[wt]=Tt},bt.prototype.isInteriorAreaEdge=function(){for(var wt=this,Tt=!0,At=0;At<2;At++)wt._label.isArea(At)&&wt._label.getLocation(At,mi.LEFT)===Ur.INTERIOR&&wt._label.getLocation(At,mi.RIGHT)===Ur.INTERIOR||(Tt=!1);return Tt},bt.prototype.setNextMin=function(wt){this._nextMin=wt},bt.prototype.print=function(wt){vt.prototype.print.call(this,wt),wt.print(" "+this._depth[mi.LEFT]+"/"+this._depth[mi.RIGHT]),wt.print(" ("+this.getDepthDelta()+")"),this._isInResult&&wt.print(" inResult")},bt.prototype.setMinEdgeRing=function(wt){this._minEdgeRing=wt},bt.prototype.isLineEdge=function(){var wt=this._label.isLine(0)||this._label.isLine(1),Tt=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ur.EXTERIOR),At=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ur.EXTERIOR);return wt&&Tt&&At},bt.prototype.setEdgeRing=function(wt){this._edgeRing=wt},bt.prototype.getMinEdgeRing=function(){return this._minEdgeRing},bt.prototype.getDepthDelta=function(){var wt=this._edge.getDepthDelta();return this._isForward||(wt=-wt),wt},bt.prototype.setInResult=function(wt){this._isInResult=wt},bt.prototype.getSym=function(){return this._sym},bt.prototype.isForward=function(){return this._isForward},bt.prototype.getEdge=function(){return this._edge},bt.prototype.printEdge=function(wt){this.print(wt),wt.print(" "),this._isForward?this._edge.print(wt):this._edge.printReverse(wt)},bt.prototype.setSym=function(wt){this._sym=wt},bt.prototype.setVisitedEdge=function(wt){this.setVisited(wt),this._sym.setVisited(wt)},bt.prototype.setEdgeDepths=function(wt,Tt){var At=this.getEdge().getDepthDelta();this._isForward||(At=-At);var Ot=1;wt===mi.LEFT&&(Ot=-1);var Dt=mi.opposite(wt),jt=Tt+At*Ot;this.setDepth(wt,Tt),this.setDepth(Dt,jt)},bt.prototype.getEdgeRing=function(){return this._edgeRing},bt.prototype.isInResult=function(){return this._isInResult},bt.prototype.setNext=function(wt){this._next=wt},bt.prototype.isVisited=function(){return this._isVisited},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.depthFactor=function(wt,Tt){return wt===Ur.EXTERIOR&&Tt===Ur.INTERIOR?1:wt===Ur.INTERIOR&&Tt===Ur.EXTERIOR?-1:0},bt}(Za),Bf=function(){};Bf.prototype.createNode=function(vt){return new om(vt,null)},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var Fs=function(){if(this._edges=new vi,this._nodes=null,this._edgeEndList=new vi,arguments.length===0)this._nodes=new Wc(new Bf);else if(arguments.length===1){var vt=arguments[0];this._nodes=new Wc(vt)}};Fs.prototype.printEdges=function(vt){vt.println("Edges:");for(var bt=0;bt<this._edges.size();bt++){vt.println("edge "+bt+":");var wt=this._edges.get(bt);wt.print(vt),wt.eiList.print(vt)}},Fs.prototype.find=function(vt){return this._nodes.find(vt)},Fs.prototype.addNode=function(){if(arguments[0]instanceof om){var vt=arguments[0];return this._nodes.addNode(vt)}if(arguments[0]instanceof Nr){var bt=arguments[0];return this._nodes.addNode(bt)}},Fs.prototype.getNodeIterator=function(){return this._nodes.iterator()},Fs.prototype.linkResultDirectedEdges=function(){for(var vt=this._nodes.iterator();vt.hasNext();)vt.next().getEdges().linkResultDirectedEdges()},Fs.prototype.debugPrintln=function(vt){za.out.println(vt)},Fs.prototype.isBoundaryNode=function(vt,bt){var wt=this._nodes.find(bt);if(wt===null)return!1;var Tt=wt.getLabel();return Tt!==null&&Tt.getLocation(vt)===Ur.BOUNDARY},Fs.prototype.linkAllDirectedEdges=function(){for(var vt=this._nodes.iterator();vt.hasNext();)vt.next().getEdges().linkAllDirectedEdges()},Fs.prototype.matchInSameDirection=function(vt,bt,wt,Tt){return!!vt.equals(wt)&&ki.computeOrientation(vt,bt,Tt)===ki.COLLINEAR&&xs.quadrant(vt,bt)===xs.quadrant(wt,Tt)},Fs.prototype.getEdgeEnds=function(){return this._edgeEndList},Fs.prototype.debugPrint=function(vt){za.out.print(vt)},Fs.prototype.getEdgeIterator=function(){return this._edges.iterator()},Fs.prototype.findEdgeInSameDirection=function(vt,bt){for(var wt=this,Tt=0;Tt<this._edges.size();Tt++){var At=wt._edges.get(Tt),Ot=At.getCoordinates();if(wt.matchInSameDirection(vt,bt,Ot[0],Ot[1])||wt.matchInSameDirection(vt,bt,Ot[Ot.length-1],Ot[Ot.length-2]))return At}return null},Fs.prototype.insertEdge=function(vt){this._edges.add(vt)},Fs.prototype.findEdgeEnd=function(vt){for(var bt=this.getEdgeEnds().iterator();bt.hasNext();){var wt=bt.next();if(wt.getEdge()===vt)return wt}return null},Fs.prototype.addEdges=function(vt){for(var bt=this,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();bt._edges.add(Tt);var At=new sm(Tt,!0),Ot=new sm(Tt,!1);At.setSym(Ot),Ot.setSym(At),bt.add(At),bt.add(Ot)}},Fs.prototype.add=function(vt){this._nodes.add(vt),this._edgeEndList.add(vt)},Fs.prototype.getNodes=function(){return this._nodes.values()},Fs.prototype.findEdge=function(vt,bt){for(var wt=0;wt<this._edges.size();wt++){var Tt=this._edges.get(wt),At=Tt.getCoordinates();if(vt.equals(At[0])&&bt.equals(At[1]))return Tt}return null},Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs},Fs.linkResultDirectedEdges=function(vt){for(var bt=vt.iterator();bt.hasNext();)bt.next().getEdges().linkResultDirectedEdges()};var gl=function(){this._geometryFactory=null,this._shellList=new vi;var vt=arguments[0];this._geometryFactory=vt};gl.prototype.sortShellsAndHoles=function(vt,bt,wt){for(var Tt=vt.iterator();Tt.hasNext();){var At=Tt.next();At.isHole()?wt.add(At):bt.add(At)}},gl.prototype.computePolygons=function(vt){for(var bt=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next().toPolygon(this._geometryFactory);bt.add(Tt)}return bt},gl.prototype.placeFreeHoles=function(vt,bt){for(var wt=bt.iterator();wt.hasNext();){var Tt=wt.next();if(Tt.getShell()===null){var At=this.findEdgeRingContaining(Tt,vt);if(At===null)throw new Du("unable to assign hole to a shell",Tt.getCoordinate(0));Tt.setShell(At)}}},gl.prototype.buildMinimalEdgeRings=function(vt,bt,wt){for(var Tt=new vi,At=vt.iterator();At.hasNext();){var Ot=At.next();if(Ot.getMaxNodeDegree()>2){Ot.linkDirectedEdgesForMinimalEdgeRings();var Dt=Ot.buildMinimalRings(),jt=this.findShell(Dt);jt!==null?(this.placePolygonHoles(jt,Dt),bt.add(jt)):wt.addAll(Dt)}else Tt.add(Ot)}return Tt},gl.prototype.containsPoint=function(vt){for(var bt=this._shellList.iterator();bt.hasNext();)if(bt.next().containsPoint(vt))return!0;return!1},gl.prototype.buildMaximalEdgeRings=function(vt){for(var bt=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();if(Tt.isInResult()&&Tt.getLabel().isArea()&&Tt.getEdgeRing()===null){var At=new a_(Tt,this._geometryFactory);bt.add(At),At.setInResult()}}return bt},gl.prototype.placePolygonHoles=function(vt,bt){for(var wt=bt.iterator();wt.hasNext();){var Tt=wt.next();Tt.isHole()&&Tt.setShell(vt)}},gl.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},gl.prototype.findEdgeRingContaining=function(vt,bt){for(var wt=vt.getLinearRing(),Tt=wt.getEnvelopeInternal(),At=wt.getCoordinateN(0),Ot=null,Dt=null,jt=bt.iterator();jt.hasNext();){var Gt=jt.next(),qt=Gt.getLinearRing(),en=qt.getEnvelopeInternal();Ot!==null&&(Dt=Ot.getLinearRing().getEnvelopeInternal());var Xt=!1;en.contains(Tt)&&ki.isPointInRing(At,qt.getCoordinates())&&(Xt=!0),Xt&&(Ot===null||Dt.contains(en))&&(Ot=Gt)}return Ot},gl.prototype.findShell=function(vt){for(var bt=0,wt=null,Tt=vt.iterator();Tt.hasNext();){var At=Tt.next();At.isHole()||(wt=At,bt++)}return _o.isTrue(bt<=1,"found two shells in MinimalEdgeRing list"),wt},gl.prototype.add=function(){if(arguments.length===1){var vt=arguments[0];this.add(vt.getEdgeEnds(),vt.getNodes())}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];Fs.linkResultDirectedEdges(wt);var Tt=this.buildMaximalEdgeRings(bt),At=new vi,Ot=this.buildMinimalEdgeRings(Tt,this._shellList,At);this.sortShellsAndHoles(Ot,this._shellList,At),this.placeFreeHoles(this._shellList,At)}},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl};var Ff=function(){};Ff.prototype.getBounds=function(){},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff};var Sc=function(){this._bounds=null,this._item=null;var vt=arguments[0],bt=arguments[1];this._bounds=vt,this._item=bt};Sc.prototype.getItem=function(){return this._item},Sc.prototype.getBounds=function(){return this._bounds},Sc.prototype.interfaces_=function(){return[Ff,Ql]},Sc.prototype.getClass=function(){return Sc};var yu=function(){this._size=null,this._items=null,this._size=0,this._items=new vi,this._items.add(null)};yu.prototype.poll=function(){if(this.isEmpty())return null;var vt=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),vt},yu.prototype.size=function(){return this._size},yu.prototype.reorder=function(vt){for(var bt=this,wt=null,Tt=this._items.get(vt);2*vt<=this._size&&((wt=2*vt)!==bt._size&&bt._items.get(wt+1).compareTo(bt._items.get(wt))<0&&wt++,bt._items.get(wt).compareTo(Tt)<0);vt=wt)bt._items.set(vt,bt._items.get(wt));this._items.set(vt,Tt)},yu.prototype.clear=function(){this._size=0,this._items.clear()},yu.prototype.isEmpty=function(){return this._size===0},yu.prototype.add=function(vt){this._items.add(null),this._size+=1;var bt=this._size;for(this._items.set(0,vt);vt.compareTo(this._items.get(Math.trunc(bt/2)))<0;bt/=2)this._items.set(bt,this._items.get(Math.trunc(bt/2)));this._items.set(bt,vt)},yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu};var yh=function(){};yh.prototype.visitItem=function(vt){},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var Nd=function(){};Nd.prototype.insert=function(vt,bt){},Nd.prototype.remove=function(vt,bt){},Nd.prototype.query=function(){},Nd.prototype.interfaces_=function(){return[]},Nd.prototype.getClass=function(){return Nd};var na=function(){if(this._childBoundables=new vi,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this._level=vt}}},Iy={serialVersionUID:{configurable:!0}};na.prototype.getLevel=function(){return this._level},na.prototype.size=function(){return this._childBoundables.size()},na.prototype.getChildBoundables=function(){return this._childBoundables},na.prototype.addChildBoundable=function(vt){_o.isTrue(this._bounds===null),this._childBoundables.add(vt)},na.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},na.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},na.prototype.interfaces_=function(){return[Ff,Ql]},na.prototype.getClass=function(){return na},Iy.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(na,Iy);var Cc=function(){};Cc.reverseOrder=function(){return{compare:function(vt,bt){return bt.compareTo(vt)}}},Cc.min=function(vt){return Cc.sort(vt),vt.get(0)},Cc.sort=function(vt,bt){var wt=vt.toArray();bt?fu.sort(wt,bt):fu.sort(wt);for(var Tt=vt.iterator(),At=0,Ot=wt.length;At<Ot;At++)Tt.next(),Tt.set(wt[At])},Cc.singletonList=function(vt){var bt=new vi;return bt.add(vt),bt};var Js=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var vt=arguments[0],bt=arguments[1],wt=arguments[2];this._boundable1=vt,this._boundable2=bt,this._itemDistance=wt,this._distance=this.distance()};Js.prototype.expandToQueue=function(vt,bt){var wt=Js.isComposite(this._boundable1),Tt=Js.isComposite(this._boundable2);if(wt&&Tt)return Js.area(this._boundable1)>Js.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,vt,bt),null):(this.expand(this._boundable2,this._boundable1,vt,bt),null);if(wt)return this.expand(this._boundable1,this._boundable2,vt,bt),null;if(Tt)return this.expand(this._boundable2,this._boundable1,vt,bt),null;throw new Ns("neither boundable is composite")},Js.prototype.isLeaves=function(){return!(Js.isComposite(this._boundable1)||Js.isComposite(this._boundable2))},Js.prototype.compareTo=function(vt){var bt=vt;return this._distance<bt._distance?-1:this._distance>bt._distance?1:0},Js.prototype.expand=function(vt,bt,wt,Tt){for(var At=vt.getChildBoundables().iterator();At.hasNext();){var Ot=At.next(),Dt=new Js(Ot,bt,this._itemDistance);Dt.getDistance()<Tt&&wt.add(Dt)}},Js.prototype.getBoundable=function(vt){return vt===0?this._boundable1:this._boundable2},Js.prototype.getDistance=function(){return this._distance},Js.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Js.prototype.interfaces_=function(){return[Jl]},Js.prototype.getClass=function(){return Js},Js.area=function(vt){return vt.getBounds().getArea()},Js.isComposite=function(vt){return vt instanceof na};var Aa=function vt(){if(this._root=null,this._built=!1,this._itemBoundables=new vi,this._nodeCapacity=null,arguments.length===0){var bt=vt.DEFAULT_NODE_CAPACITY;this._nodeCapacity=bt}else if(arguments.length===1){var wt=arguments[0];_o.isTrue(wt>1,"Node capacity must be greater than 1"),this._nodeCapacity=wt}},am={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Aa.prototype.getNodeCapacity=function(){return this._nodeCapacity},Aa.prototype.lastNode=function(vt){return vt.get(vt.size()-1)},Aa.prototype.size=function(){var vt=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var bt=arguments[0],wt=0,Tt=bt.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();At instanceof na?wt+=vt.size(At):At instanceof Sc&&(wt+=1)}return wt}},Aa.prototype.removeItem=function(vt,bt){for(var wt=null,Tt=vt.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();At instanceof Sc&&At.getItem()===bt&&(wt=At)}return wt!==null&&(vt.getChildBoundables().remove(wt),!0)},Aa.prototype.itemsTree=function(){var vt=this;if(arguments.length===0){this.build();var bt=this.itemsTree(this._root);return bt===null?new vi:bt}if(arguments.length===1){for(var wt=arguments[0],Tt=new vi,At=wt.getChildBoundables().iterator();At.hasNext();){var Ot=At.next();if(Ot instanceof na){var Dt=vt.itemsTree(Ot);Dt!==null&&Tt.add(Dt)}else Ot instanceof Sc?Tt.add(Ot.getItem()):_o.shouldNeverReachHere()}return Tt.size()<=0?null:Tt}},Aa.prototype.insert=function(vt,bt){_o.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Sc(vt,bt))},Aa.prototype.boundablesAtLevel=function(){var vt=this;if(arguments.length===1){var bt=arguments[0],wt=new vi;return this.boundablesAtLevel(bt,this._root,wt),wt}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];if(_o.isTrue(Tt>-2),At.getLevel()===Tt)return Ot.add(At),null;for(var Dt=At.getChildBoundables().iterator();Dt.hasNext();){var jt=Dt.next();jt instanceof na?vt.boundablesAtLevel(Tt,jt,Ot):(_o.isTrue(jt instanceof Sc),Tt===-1&&Ot.add(jt))}return null}},Aa.prototype.query=function(){var vt=this;if(arguments.length===1){var bt=arguments[0];this.build();var wt=new vi;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),bt)&&this.query(bt,this._root,wt),wt}if(arguments.length===2){var Tt=arguments[0],At=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),Tt)&&this.query(Tt,this._root,At)}else if(arguments.length===3){if(ro(arguments[2],yh)&&arguments[0]instanceof Object&&arguments[1]instanceof na)for(var Ot=arguments[0],Dt=arguments[1],jt=arguments[2],Gt=Dt.getChildBoundables(),qt=0;qt<Gt.size();qt++){var en=Gt.get(qt);vt.getIntersectsOp().intersects(en.getBounds(),Ot)&&(en instanceof na?vt.query(Ot,en,jt):en instanceof Sc?jt.visitItem(en.getItem()):_o.shouldNeverReachHere())}else if(ro(arguments[2],vc)&&arguments[0]instanceof Object&&arguments[1]instanceof na)for(var Xt=arguments[0],sn=arguments[1],yn=arguments[2],vn=sn.getChildBoundables(),Sn=0;Sn<vn.size();Sn++){var fn=vn.get(Sn);vt.getIntersectsOp().intersects(fn.getBounds(),Xt)&&(fn instanceof na?vt.query(Xt,fn,yn):fn instanceof Sc?yn.add(fn.getItem()):_o.shouldNeverReachHere())}}},Aa.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Aa.prototype.getRoot=function(){return this.build(),this._root},Aa.prototype.remove=function(){var vt=this;if(arguments.length===2){var bt=arguments[0],wt=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),bt)&&this.remove(bt,this._root,wt)}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Dt=this.removeItem(At,Ot);if(Dt)return!0;for(var jt=null,Gt=At.getChildBoundables().iterator();Gt.hasNext();){var qt=Gt.next();if(vt.getIntersectsOp().intersects(qt.getBounds(),Tt)&&qt instanceof na&&(Dt=vt.remove(Tt,qt,Ot))){jt=qt;break}}return jt!==null&&jt.getChildBoundables().isEmpty()&&At.getChildBoundables().remove(jt),Dt}},Aa.prototype.createHigherLevels=function(vt,bt){_o.isTrue(!vt.isEmpty());var wt=this.createParentBoundables(vt,bt+1);return wt.size()===1?wt.get(0):this.createHigherLevels(wt,bt+1)},Aa.prototype.depth=function(){var vt=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var bt=arguments[0],wt=0,Tt=bt.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();if(At instanceof na){var Ot=vt.depth(At);Ot>wt&&(wt=Ot)}}return wt+1}},Aa.prototype.createParentBoundables=function(vt,bt){var wt=this;_o.isTrue(!vt.isEmpty());var Tt=new vi;Tt.add(this.createNode(bt));var At=new vi(vt);Cc.sort(At,this.getComparator());for(var Ot=At.iterator();Ot.hasNext();){var Dt=Ot.next();wt.lastNode(Tt).getChildBoundables().size()===wt.getNodeCapacity()&&Tt.add(wt.createNode(bt)),wt.lastNode(Tt).addChildBoundable(Dt)}return Tt},Aa.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Aa.prototype.interfaces_=function(){return[Ql]},Aa.prototype.getClass=function(){return Aa},Aa.compareDoubles=function(vt,bt){return vt>bt?1:vt<bt?-1:0},am.IntersectsOp.get=function(){return Oy},am.serialVersionUID.get=function(){return-3886435814360241e3},am.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Aa,am);var Oy=function(){},zf=function(){};zf.prototype.distance=function(vt,bt){},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var $y=function(vt){function bt(Tt){Tt=Tt||bt.DEFAULT_NODE_CAPACITY,vt.call(this,Tt)}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return bt.prototype.createParentBoundablesFromVerticalSlices=function(Tt,At){_o.isTrue(Tt.length>0);for(var Ot=new vi,Dt=0;Dt<Tt.length;Dt++)Ot.addAll(this.createParentBoundablesFromVerticalSlice(Tt[Dt],At));return Ot},bt.prototype.createNode=function(Tt){return new N0(Tt)},bt.prototype.size=function(){return arguments.length===0?vt.prototype.size.call(this):vt.prototype.size.apply(this,arguments)},bt.prototype.insert=function(){if(arguments.length!==2)return vt.prototype.insert.apply(this,arguments);var Tt=arguments[0],At=arguments[1];if(Tt.isNull())return null;vt.prototype.insert.call(this,Tt,At)},bt.prototype.getIntersectsOp=function(){return bt.intersectsOp},bt.prototype.verticalSlices=function(Tt,At){for(var Ot=Math.trunc(Math.ceil(Tt.size()/At)),Dt=new Array(At).fill(null),jt=Tt.iterator(),Gt=0;Gt<At;Gt++){Dt[Gt]=new vi;for(var qt=0;jt.hasNext()&&qt<Ot;){var en=jt.next();Dt[Gt].add(en),qt++}}return Dt},bt.prototype.query=function(){if(arguments.length===1){var Tt=arguments[0];return vt.prototype.query.call(this,Tt)}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];vt.prototype.query.call(this,At,Ot)}else if(arguments.length===3){if(ro(arguments[2],yh)&&arguments[0]instanceof Object&&arguments[1]instanceof na){var Dt=arguments[0],jt=arguments[1],Gt=arguments[2];vt.prototype.query.call(this,Dt,jt,Gt)}else if(ro(arguments[2],vc)&&arguments[0]instanceof Object&&arguments[1]instanceof na){var qt=arguments[0],en=arguments[1],Xt=arguments[2];vt.prototype.query.call(this,qt,en,Xt)}}},bt.prototype.getComparator=function(){return bt.yComparator},bt.prototype.createParentBoundablesFromVerticalSlice=function(Tt,At){return vt.prototype.createParentBoundables.call(this,Tt,At)},bt.prototype.remove=function(){if(arguments.length===2){var Tt=arguments[0],At=arguments[1];return vt.prototype.remove.call(this,Tt,At)}return vt.prototype.remove.apply(this,arguments)},bt.prototype.depth=function(){return arguments.length===0?vt.prototype.depth.call(this):vt.prototype.depth.apply(this,arguments)},bt.prototype.createParentBoundables=function(Tt,At){_o.isTrue(!Tt.isEmpty());var Ot=Math.trunc(Math.ceil(Tt.size()/this.getNodeCapacity())),Dt=new vi(Tt);Cc.sort(Dt,bt.xComparator);var jt=this.verticalSlices(Dt,Math.trunc(Math.ceil(Math.sqrt(Ot))));return this.createParentBoundablesFromVerticalSlices(jt,At)},bt.prototype.nearestNeighbour=function(){if(arguments.length===1){if(ro(arguments[0],zf)){var Tt=arguments[0],At=new Js(this.getRoot(),this.getRoot(),Tt);return this.nearestNeighbour(At)}if(arguments[0]instanceof Js){var Ot=arguments[0];return this.nearestNeighbour(Ot,po.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof bt&&ro(arguments[1],zf)){var Dt=arguments[0],jt=arguments[1],Gt=new Js(this.getRoot(),Dt.getRoot(),jt);return this.nearestNeighbour(Gt)}if(arguments[0]instanceof Js&&typeof arguments[1]=="number"){var qt=arguments[0],en=arguments[1],Xt=en,sn=null,yn=new yu;for(yn.add(qt);!yn.isEmpty()&&Xt>0;){var vn=yn.poll(),Sn=vn.getDistance();if(Sn>=Xt)break;vn.isLeaves()?(Xt=Sn,sn=vn):vn.expandToQueue(yn,Xt)}return[sn.getBoundable(0).getItem(),sn.getBoundable(1).getItem()]}}else if(arguments.length===3){var fn=arguments[0],Dn=arguments[1],rr=arguments[2],bn=new Sc(fn,Dn),Nn=new Js(this.getRoot(),bn,rr);return this.nearestNeighbour(Nn)[0]}},bt.prototype.interfaces_=function(){return[Nd,Ql]},bt.prototype.getClass=function(){return bt},bt.centreX=function(Tt){return bt.avg(Tt.getMinX(),Tt.getMaxX())},bt.avg=function(Tt,At){return(Tt+At)/2},bt.centreY=function(Tt){return bt.avg(Tt.getMinY(),Tt.getMaxY())},wt.STRtreeNode.get=function(){return N0},wt.serialVersionUID.get=function(){return 0x39920f7d5f261e0},wt.xComparator.get=function(){return{interfaces_:function(){return[kf]},compare:function(Tt,At){return vt.compareDoubles(bt.centreX(Tt.getBounds()),bt.centreX(At.getBounds()))}}},wt.yComparator.get=function(){return{interfaces_:function(){return[kf]},compare:function(Tt,At){return vt.compareDoubles(bt.centreY(Tt.getBounds()),bt.centreY(At.getBounds()))}}},wt.intersectsOp.get=function(){return{interfaces_:function(){return[vt.IntersectsOp]},intersects:function(Tt,At){return Tt.intersects(At)}}},wt.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(bt,wt),bt}(Aa),N0=function(vt){function bt(){var wt=arguments[0];vt.call(this,wt)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.computeBounds=function(){for(var wt=null,Tt=this.getChildBoundables().iterator();Tt.hasNext();){var At=Tt.next();wt===null?wt=new Ui(At.getBounds()):wt.expandToInclude(At.getBounds())}return wt},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(na),ml=function(){};ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml},ml.relativeSign=function(vt,bt){return vt<bt?-1:vt>bt?1:0},ml.compare=function(vt,bt,wt){if(bt.equals2D(wt))return 0;var Tt=ml.relativeSign(bt.x,wt.x),At=ml.relativeSign(bt.y,wt.y);switch(vt){case 0:return ml.compareValue(Tt,At);case 1:return ml.compareValue(At,Tt);case 2:return ml.compareValue(At,-Tt);case 3:return ml.compareValue(-Tt,At);case 4:return ml.compareValue(-Tt,-At);case 5:return ml.compareValue(-At,-Tt);case 6:return ml.compareValue(-At,Tt);case 7:return ml.compareValue(Tt,-At)}return _o.shouldNeverReachHere("invalid octant value"),0},ml.compareValue=function(vt,bt){return vt<0?-1:vt>0?1:bt<0?-1:bt>0?1:0};var vh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var vt=arguments[0],bt=arguments[1],wt=arguments[2],Tt=arguments[3];this._segString=vt,this.coord=new Nr(bt),this.segmentIndex=wt,this._segmentOctant=Tt,this._isInterior=!bt.equals2D(vt.getCoordinate(wt))};vh.prototype.getCoordinate=function(){return this.coord},vh.prototype.print=function(vt){vt.print(this.coord),vt.print(" seg # = "+this.segmentIndex)},vh.prototype.compareTo=function(vt){var bt=vt;return this.segmentIndex<bt.segmentIndex?-1:this.segmentIndex>bt.segmentIndex?1:this.coord.equals2D(bt.coord)?0:ml.compare(this._segmentOctant,this.coord,bt.coord)},vh.prototype.isEndPoint=function(vt){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===vt},vh.prototype.isInterior=function(){return this._isInterior},vh.prototype.interfaces_=function(){return[Jl]},vh.prototype.getClass=function(){return vh};var Sa=function(){this._nodeMap=new Ya,this._edge=null;var vt=arguments[0];this._edge=vt};Sa.prototype.getSplitCoordinates=function(){var vt=new zp;this.addEndpoints();for(var bt=this.iterator(),wt=bt.next();bt.hasNext();){var Tt=bt.next();this.addEdgeCoordinates(wt,Tt,vt),wt=Tt}return vt.toCoordinateArray()},Sa.prototype.addCollapsedNodes=function(){var vt=new vi;this.findCollapsesFromInsertedNodes(vt),this.findCollapsesFromExistingVertices(vt);for(var bt=vt.iterator();bt.hasNext();){var wt=bt.next().intValue();this.add(this._edge.getCoordinate(wt),wt)}},Sa.prototype.print=function(vt){vt.println("Intersections:");for(var bt=this.iterator();bt.hasNext();)bt.next().print(vt)},Sa.prototype.findCollapsesFromExistingVertices=function(vt){for(var bt=0;bt<this._edge.size()-2;bt++){var wt=this._edge.getCoordinate(bt),Tt=this._edge.getCoordinate(bt+2);wt.equals2D(Tt)&&vt.add(new zc(bt+1))}},Sa.prototype.addEdgeCoordinates=function(vt,bt,wt){var Tt=this._edge.getCoordinate(bt.segmentIndex),At=bt.isInterior()||!bt.coord.equals2D(Tt);wt.add(new Nr(vt.coord),!1);for(var Ot=vt.segmentIndex+1;Ot<=bt.segmentIndex;Ot++)wt.add(this._edge.getCoordinate(Ot));At&&wt.add(new Nr(bt.coord))},Sa.prototype.iterator=function(){return this._nodeMap.values().iterator()},Sa.prototype.addSplitEdges=function(vt){this.addEndpoints(),this.addCollapsedNodes();for(var bt=this.iterator(),wt=bt.next();bt.hasNext();){var Tt=bt.next(),At=this.createSplitEdge(wt,Tt);vt.add(At),wt=Tt}},Sa.prototype.findCollapseIndex=function(vt,bt,wt){if(!vt.coord.equals2D(bt.coord))return!1;var Tt=bt.segmentIndex-vt.segmentIndex;return bt.isInterior()||Tt--,Tt===1&&(wt[0]=vt.segmentIndex+1,!0)},Sa.prototype.findCollapsesFromInsertedNodes=function(vt){for(var bt=new Array(1).fill(null),wt=this.iterator(),Tt=wt.next();wt.hasNext();){var At=wt.next();this.findCollapseIndex(Tt,At,bt)&&vt.add(new zc(bt[0])),Tt=At}},Sa.prototype.getEdge=function(){return this._edge},Sa.prototype.addEndpoints=function(){var vt=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(vt),vt)},Sa.prototype.createSplitEdge=function(vt,bt){var wt=bt.segmentIndex-vt.segmentIndex+2,Tt=this._edge.getCoordinate(bt.segmentIndex),At=bt.isInterior()||!bt.coord.equals2D(Tt);At||wt--;var Ot=new Array(wt).fill(null),Dt=0;Ot[Dt++]=new Nr(vt.coord);for(var jt=vt.segmentIndex+1;jt<=bt.segmentIndex;jt++)Ot[Dt++]=this._edge.getCoordinate(jt);return At&&(Ot[Dt]=new Nr(bt.coord)),new Us(Ot,this._edge.getData())},Sa.prototype.add=function(vt,bt){var wt=new vh(this._edge,vt,bt,this._edge.getSegmentOctant(bt)),Tt=this._nodeMap.get(wt);return Tt!==null?(_o.isTrue(Tt.coord.equals2D(vt),"Found equal nodes with different coordinates"),Tt):(this._nodeMap.put(wt,wt),wt)},Sa.prototype.checkSplitEdgesCorrectness=function(vt){var bt=this._edge.getCoordinates(),wt=vt.get(0).getCoordinate(0);if(!wt.equals2D(bt[0]))throw new Ru("bad split edge start point at "+wt);var Tt=vt.get(vt.size()-1).getCoordinates(),At=Tt[Tt.length-1];if(!At.equals2D(bt[bt.length-1]))throw new Ru("bad split edge end point at "+At)},Sa.prototype.interfaces_=function(){return[]},Sa.prototype.getClass=function(){return Sa};var Tc=function(){};Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var vt=arguments[0],bt=arguments[1];if(vt===0&&bt===0)throw new Ns("Cannot compute the octant for point ( "+vt+", "+bt+" )");var wt=Math.abs(vt),Tt=Math.abs(bt);return vt>=0?bt>=0?wt>=Tt?0:1:wt>=Tt?7:6:bt>=0?wt>=Tt?3:2:wt>=Tt?4:5}if(arguments[0]instanceof Nr&&arguments[1]instanceof Nr){var At=arguments[0],Ot=arguments[1],Dt=Ot.x-At.x,jt=Ot.y-At.y;if(Dt===0&&jt===0)throw new Ns("Cannot compute the octant for two identical points "+At);return Tc.octant(Dt,jt)}};var fa=function(){};fa.prototype.getCoordinates=function(){},fa.prototype.size=function(){},fa.prototype.getCoordinate=function(vt){},fa.prototype.isClosed=function(){},fa.prototype.setData=function(vt){},fa.prototype.getData=function(){},fa.prototype.interfaces_=function(){return[]},fa.prototype.getClass=function(){return fa};var Xp=function(){};Xp.prototype.addIntersection=function(vt,bt){},Xp.prototype.interfaces_=function(){return[fa]},Xp.prototype.getClass=function(){return Xp};var Us=function(){this._nodeList=new Sa(this),this._pts=null,this._data=null;var vt=arguments[0],bt=arguments[1];this._pts=vt,this._data=bt};Us.prototype.getCoordinates=function(){return this._pts},Us.prototype.size=function(){return this._pts.length},Us.prototype.getCoordinate=function(vt){return this._pts[vt]},Us.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Us.prototype.getSegmentOctant=function(vt){return vt===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(vt),this.getCoordinate(vt+1))},Us.prototype.setData=function(vt){this._data=vt},Us.prototype.safeOctant=function(vt,bt){return vt.equals2D(bt)?0:Tc.octant(vt,bt)},Us.prototype.getData=function(){return this._data},Us.prototype.addIntersection=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1];this.addIntersectionNode(vt,bt)}else if(arguments.length===4){var wt=arguments[0],Tt=arguments[1],At=arguments[3],Ot=new Nr(wt.getIntersection(At));this.addIntersection(Ot,Tt)}},Us.prototype.toString=function(){return yc.toLineString(new Zs(this._pts))},Us.prototype.getNodeList=function(){return this._nodeList},Us.prototype.addIntersectionNode=function(vt,bt){var wt=bt,Tt=wt+1;if(Tt<this._pts.length){var At=this._pts[Tt];vt.equals2D(At)&&(wt=Tt)}return this._nodeList.add(vt,wt)},Us.prototype.addIntersections=function(vt,bt,wt){for(var Tt=0;Tt<vt.getIntersectionNum();Tt++)this.addIntersection(vt,bt,wt,Tt)},Us.prototype.interfaces_=function(){return[Xp]},Us.prototype.getClass=function(){return Us},Us.getNodedSubstrings=function(){if(arguments.length===1){var vt=arguments[0],bt=new vi;return Us.getNodedSubstrings(vt,bt),bt}if(arguments.length===2)for(var wt=arguments[0],Tt=arguments[1],At=wt.iterator();At.hasNext();){var Ot=At.next();Ot.getNodeList().addSplitEdges(Tt)}};var Vi=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Nr,this.p1=new Nr;else if(arguments.length===1){var vt=arguments[0];this.p0=new Nr(vt.p0),this.p1=new Nr(vt.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var bt=arguments[0],wt=arguments[1],Tt=arguments[2],At=arguments[3];this.p0=new Nr(bt,wt),this.p1=new Nr(Tt,At)}},lm={serialVersionUID:{configurable:!0}};Vi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Vi.prototype.orientationIndex=function(){if(arguments[0]instanceof Vi){var vt=arguments[0],bt=ki.orientationIndex(this.p0,this.p1,vt.p0),wt=ki.orientationIndex(this.p0,this.p1,vt.p1);return bt>=0&&wt>=0||bt<=0&&wt<=0?Math.max(bt,wt):0}if(arguments[0]instanceof Nr){var Tt=arguments[0];return ki.orientationIndex(this.p0,this.p1,Tt)}},Vi.prototype.toGeometry=function(vt){return vt.createLineString([this.p0,this.p1])},Vi.prototype.isVertical=function(){return this.p0.x===this.p1.x},Vi.prototype.equals=function(vt){if(!(vt instanceof Vi))return!1;var bt=vt;return this.p0.equals(bt.p0)&&this.p1.equals(bt.p1)},Vi.prototype.intersection=function(vt){var bt=new ph;return bt.computeIntersection(this.p0,this.p1,vt.p0,vt.p1),bt.hasIntersection()?bt.getIntersection(0):null},Vi.prototype.project=function(){if(arguments[0]instanceof Nr){var vt=arguments[0];if(vt.equals(this.p0)||vt.equals(this.p1))return new Nr(vt);var bt=this.projectionFactor(vt),wt=new Nr;return wt.x=this.p0.x+bt*(this.p1.x-this.p0.x),wt.y=this.p0.y+bt*(this.p1.y-this.p0.y),wt}if(arguments[0]instanceof Vi){var Tt=arguments[0],At=this.projectionFactor(Tt.p0),Ot=this.projectionFactor(Tt.p1);if(At>=1&&Ot>=1||At<=0&&Ot<=0)return null;var Dt=this.project(Tt.p0);At<0&&(Dt=this.p0),At>1&&(Dt=this.p1);var jt=this.project(Tt.p1);return Ot<0&&(jt=this.p0),Ot>1&&(jt=this.p1),new Vi(Dt,jt)}},Vi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Vi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Vi.prototype.getCoordinate=function(vt){return vt===0?this.p0:this.p1},Vi.prototype.distancePerpendicular=function(vt){return ki.distancePointLinePerpendicular(vt,this.p0,this.p1)},Vi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Vi.prototype.midPoint=function(){return Vi.midPoint(this.p0,this.p1)},Vi.prototype.projectionFactor=function(vt){if(vt.equals(this.p0))return 0;if(vt.equals(this.p1))return 1;var bt=this.p1.x-this.p0.x,wt=this.p1.y-this.p0.y,Tt=bt*bt+wt*wt;return Tt<=0?po.NaN:((vt.x-this.p0.x)*bt+(vt.y-this.p0.y)*wt)/Tt},Vi.prototype.closestPoints=function(vt){var bt=this.intersection(vt);if(bt!==null)return[bt,bt];var wt=new Array(2).fill(null),Tt=po.MAX_VALUE,At=null,Ot=this.closestPoint(vt.p0);Tt=Ot.distance(vt.p0),wt[0]=Ot,wt[1]=vt.p0;var Dt=this.closestPoint(vt.p1);(At=Dt.distance(vt.p1))<Tt&&(Tt=At,wt[0]=Dt,wt[1]=vt.p1);var jt=vt.closestPoint(this.p0);(At=jt.distance(this.p0))<Tt&&(Tt=At,wt[0]=this.p0,wt[1]=jt);var Gt=vt.closestPoint(this.p1);return(At=Gt.distance(this.p1))<Tt&&(Tt=At,wt[0]=this.p1,wt[1]=Gt),wt},Vi.prototype.closestPoint=function(vt){var bt=this.projectionFactor(vt);return bt>0&&bt<1?this.project(vt):this.p0.distance(vt)<this.p1.distance(vt)?this.p0:this.p1},Vi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Vi.prototype.getLength=function(){return this.p0.distance(this.p1)},Vi.prototype.compareTo=function(vt){var bt=vt,wt=this.p0.compareTo(bt.p0);return wt!==0?wt:this.p1.compareTo(bt.p1)},Vi.prototype.reverse=function(){var vt=this.p0;this.p0=this.p1,this.p1=vt},Vi.prototype.equalsTopo=function(vt){return this.p0.equals(vt.p0)&&(this.p1.equals(vt.p1)||this.p0.equals(vt.p1))&&this.p1.equals(vt.p0)},Vi.prototype.lineIntersection=function(vt){try{return ec.intersection(this.p0,this.p1,vt.p0,vt.p1)}catch(bt){if(!(bt instanceof Ad))throw bt}return null},Vi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Vi.prototype.pointAlongOffset=function(vt,bt){var wt=this.p0.x+vt*(this.p1.x-this.p0.x),Tt=this.p0.y+vt*(this.p1.y-this.p0.y),At=this.p1.x-this.p0.x,Ot=this.p1.y-this.p0.y,Dt=Math.sqrt(At*At+Ot*Ot),jt=0,Gt=0;if(bt!==0){if(Dt<=0)throw new Error("Cannot compute offset from zero-length line segment");jt=bt*At/Dt,Gt=bt*Ot/Dt}return new Nr(wt-Gt,Tt+jt)},Vi.prototype.setCoordinates=function(){if(arguments.length===1){var vt=arguments[0];this.setCoordinates(vt.p0,vt.p1)}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];this.p0.x=bt.x,this.p0.y=bt.y,this.p1.x=wt.x,this.p1.y=wt.y}},Vi.prototype.segmentFraction=function(vt){var bt=this.projectionFactor(vt);return bt<0?bt=0:(bt>1||po.isNaN(bt))&&(bt=1),bt},Vi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Vi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Vi.prototype.distance=function(){if(arguments[0]instanceof Vi){var vt=arguments[0];return ki.distanceLineLine(this.p0,this.p1,vt.p0,vt.p1)}if(arguments[0]instanceof Nr){var bt=arguments[0];return ki.distancePointLine(bt,this.p0,this.p1)}},Vi.prototype.pointAlong=function(vt){var bt=new Nr;return bt.x=this.p0.x+vt*(this.p1.x-this.p0.x),bt.y=this.p0.y+vt*(this.p1.y-this.p0.y),bt},Vi.prototype.hashCode=function(){var vt=po.doubleToLongBits(this.p0.x);vt^=31*po.doubleToLongBits(this.p0.y);var bt=Math.trunc(vt)^Math.trunc(vt>>32),wt=po.doubleToLongBits(this.p1.x);return wt^=31*po.doubleToLongBits(this.p1.y),bt^(Math.trunc(wt)^Math.trunc(wt>>32))},Vi.prototype.interfaces_=function(){return[Jl,Ql]},Vi.prototype.getClass=function(){return Vi},Vi.midPoint=function(vt,bt){return new Nr((vt.x+bt.x)/2,(vt.y+bt.y)/2)},lm.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Vi,lm);var Zp=function(){this.tempEnv1=new Ui,this.tempEnv2=new Ui,this._overlapSeg1=new Vi,this._overlapSeg2=new Vi};Zp.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var vt=arguments[0],bt=arguments[1],wt=arguments[2],Tt=arguments[3];vt.getLineSegment(bt,this._overlapSeg1),wt.getLineSegment(Tt,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Pl=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var vt=arguments[0],bt=arguments[1],wt=arguments[2],Tt=arguments[3];this._pts=vt,this._start=bt,this._end=wt,this._context=Tt};Pl.prototype.getLineSegment=function(vt,bt){bt.p0=this._pts[vt],bt.p1=this._pts[vt+1]},Pl.prototype.computeSelect=function(vt,bt,wt,Tt){var At=this._pts[bt],Ot=this._pts[wt];if(Tt.tempEnv1.init(At,Ot),wt-bt==1)return Tt.select(this,bt),null;if(!vt.intersects(Tt.tempEnv1))return null;var Dt=Math.trunc((bt+wt)/2);bt<Dt&&this.computeSelect(vt,bt,Dt,Tt),Dt<wt&&this.computeSelect(vt,Dt,wt,Tt)},Pl.prototype.getCoordinates=function(){for(var vt=new Array(this._end-this._start+1).fill(null),bt=0,wt=this._start;wt<=this._end;wt++)vt[bt++]=this._pts[wt];return vt},Pl.prototype.computeOverlaps=function(vt,bt){this.computeOverlapsInternal(this._start,this._end,vt,vt._start,vt._end,bt)},Pl.prototype.setId=function(vt){this._id=vt},Pl.prototype.select=function(vt,bt){this.computeSelect(vt,this._start,this._end,bt)},Pl.prototype.getEnvelope=function(){if(this._env===null){var vt=this._pts[this._start],bt=this._pts[this._end];this._env=new Ui(vt,bt)}return this._env},Pl.prototype.getEndIndex=function(){return this._end},Pl.prototype.getStartIndex=function(){return this._start},Pl.prototype.getContext=function(){return this._context},Pl.prototype.getId=function(){return this._id},Pl.prototype.computeOverlapsInternal=function(vt,bt,wt,Tt,At,Ot){var Dt=this._pts[vt],jt=this._pts[bt],Gt=wt._pts[Tt],qt=wt._pts[At];if(bt-vt==1&&At-Tt==1)return Ot.overlap(this,vt,wt,Tt),null;if(Ot.tempEnv1.init(Dt,jt),Ot.tempEnv2.init(Gt,qt),!Ot.tempEnv1.intersects(Ot.tempEnv2))return null;var en=Math.trunc((vt+bt)/2),Xt=Math.trunc((Tt+At)/2);vt<en&&(Tt<Xt&&this.computeOverlapsInternal(vt,en,wt,Tt,Xt,Ot),Xt<At&&this.computeOverlapsInternal(vt,en,wt,Xt,At,Ot)),en<bt&&(Tt<Xt&&this.computeOverlapsInternal(en,bt,wt,Tt,Xt,Ot),Xt<At&&this.computeOverlapsInternal(en,bt,wt,Xt,At,Ot))},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var oc=function(){};oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.getChainStartIndices=function(vt){var bt=0,wt=new vi;wt.add(new zc(bt));do{var Tt=oc.findChainEnd(vt,bt);wt.add(new zc(Tt)),bt=Tt}while(bt<vt.length-1);return oc.toIntArray(wt)},oc.findChainEnd=function(vt,bt){for(var wt=bt;wt<vt.length-1&&vt[wt].equals2D(vt[wt+1]);)wt++;if(wt>=vt.length-1)return vt.length-1;for(var Tt=xs.quadrant(vt[wt],vt[wt+1]),At=bt+1;At<vt.length&&!(!vt[At-1].equals2D(vt[At])&&xs.quadrant(vt[At-1],vt[At])!==Tt);)At++;return At-1},oc.getChains=function(){if(arguments.length===1){var vt=arguments[0];return oc.getChains(vt,null)}if(arguments.length===2){for(var bt=arguments[0],wt=arguments[1],Tt=new vi,At=oc.getChainStartIndices(bt),Ot=0;Ot<At.length-1;Ot++){var Dt=new Pl(bt,At[Ot],At[Ot+1],wt);Tt.add(Dt)}return Tt}},oc.toIntArray=function(vt){for(var bt=new Array(vt.size()).fill(null),wt=0;wt<bt.length;wt++)bt[wt]=vt.get(wt).intValue();return bt};var Zh=function(){};Zh.prototype.computeNodes=function(vt){},Zh.prototype.getNodedSubstrings=function(){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Kp=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];this.setSegmentIntersector(vt)}}};Kp.prototype.setSegmentIntersector=function(vt){this._segInt=vt},Kp.prototype.interfaces_=function(){return[Zh]},Kp.prototype.getClass=function(){return Kp};var D0=function(vt){function bt(Tt){Tt?vt.call(this,Tt):vt.call(this),this._monoChains=new vi,this._index=new $y,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt;var wt={SegmentOverlapAction:{configurable:!0}};return bt.prototype.getMonotoneChains=function(){return this._monoChains},bt.prototype.getNodedSubstrings=function(){return Us.getNodedSubstrings(this._nodedSegStrings)},bt.prototype.getIndex=function(){return this._index},bt.prototype.add=function(Tt){for(var At=this,Ot=oc.getChains(Tt.getCoordinates(),Tt).iterator();Ot.hasNext();){var Dt=Ot.next();Dt.setId(At._idCounter++),At._index.insert(Dt.getEnvelope(),Dt),At._monoChains.add(Dt)}},bt.prototype.computeNodes=function(Tt){this._nodedSegStrings=Tt;for(var At=Tt.iterator();At.hasNext();)this.add(At.next());this.intersectChains()},bt.prototype.intersectChains=function(){for(var Tt=this,At=new cm(this._segInt),Ot=this._monoChains.iterator();Ot.hasNext();)for(var Dt=Ot.next(),jt=Tt._index.query(Dt.getEnvelope()).iterator();jt.hasNext();){var Gt=jt.next();if(Gt.getId()>Dt.getId()&&(Dt.computeOverlaps(Gt,At),Tt._nOverlaps++),Tt._segInt.isDone())return null}},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},wt.SegmentOverlapAction.get=function(){return cm},Object.defineProperties(bt,wt),bt}(Kp),cm=function(vt){function bt(){vt.call(this),this._si=null;var wt=arguments[0];this._si=wt}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.overlap=function(){if(arguments.length!==4)return vt.prototype.overlap.apply(this,arguments);var wt=arguments[0],Tt=arguments[1],At=arguments[2],Ot=arguments[3],Dt=wt.getContext(),jt=At.getContext();this._si.processIntersections(Dt,Tt,jt,Ot)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Zp),gs=function vt(){if(this._quadrantSegments=vt.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=vt.CAP_ROUND,this._joinStyle=vt.JOIN_ROUND,this._mitreLimit=vt.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=vt.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var bt=arguments[0];this.setQuadrantSegments(bt)}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];this.setQuadrantSegments(wt),this.setEndCapStyle(Tt)}else if(arguments.length===4){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],jt=arguments[3];this.setQuadrantSegments(At),this.setEndCapStyle(Ot),this.setJoinStyle(Dt),this.setMitreLimit(jt)}}},kc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};gs.prototype.getEndCapStyle=function(){return this._endCapStyle},gs.prototype.isSingleSided=function(){return this._isSingleSided},gs.prototype.setQuadrantSegments=function(vt){this._quadrantSegments=vt,this._quadrantSegments===0&&(this._joinStyle=gs.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=gs.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),vt<=0&&(this._quadrantSegments=1),this._joinStyle!==gs.JOIN_ROUND&&(this._quadrantSegments=gs.DEFAULT_QUADRANT_SEGMENTS)},gs.prototype.getJoinStyle=function(){return this._joinStyle},gs.prototype.setJoinStyle=function(vt){this._joinStyle=vt},gs.prototype.setSimplifyFactor=function(vt){this._simplifyFactor=vt<0?0:vt},gs.prototype.getSimplifyFactor=function(){return this._simplifyFactor},gs.prototype.getQuadrantSegments=function(){return this._quadrantSegments},gs.prototype.setEndCapStyle=function(vt){this._endCapStyle=vt},gs.prototype.getMitreLimit=function(){return this._mitreLimit},gs.prototype.setMitreLimit=function(vt){this._mitreLimit=vt},gs.prototype.setSingleSided=function(vt){this._isSingleSided=vt},gs.prototype.interfaces_=function(){return[]},gs.prototype.getClass=function(){return gs},gs.bufferDistanceError=function(vt){var bt=Math.PI/2/vt;return 1-Math.cos(bt/2)},kc.CAP_ROUND.get=function(){return 1},kc.CAP_FLAT.get=function(){return 2},kc.CAP_SQUARE.get=function(){return 3},kc.JOIN_ROUND.get=function(){return 1},kc.JOIN_MITRE.get=function(){return 2},kc.JOIN_BEVEL.get=function(){return 3},kc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},kc.DEFAULT_MITRE_LIMIT.get=function(){return 5},kc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(gs,kc);var Os=function(vt){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ki.COUNTERCLOCKWISE,this._inputLine=vt||null},Kh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Os.prototype.isDeletable=function(vt,bt,wt,Tt){var At=this._inputLine[vt],Ot=this._inputLine[bt],Dt=this._inputLine[wt];return!!this.isConcave(At,Ot,Dt)&&!!this.isShallow(At,Ot,Dt,Tt)&&this.isShallowSampled(At,Ot,vt,wt,Tt)},Os.prototype.deleteShallowConcavities=function(){for(var vt=this,bt=1,wt=this.findNextNonDeletedIndex(bt),Tt=this.findNextNonDeletedIndex(wt),At=!1;Tt<this._inputLine.length;){var Ot=!1;vt.isDeletable(bt,wt,Tt,vt._distanceTol)&&(vt._isDeleted[wt]=Os.DELETE,Ot=!0,At=!0),bt=Ot?Tt:wt,wt=vt.findNextNonDeletedIndex(bt),Tt=vt.findNextNonDeletedIndex(wt)}return At},Os.prototype.isShallowConcavity=function(vt,bt,wt,Tt){return ki.computeOrientation(vt,bt,wt)===this._angleOrientation&&ki.distancePointLine(bt,vt,wt)<Tt},Os.prototype.isShallowSampled=function(vt,bt,wt,Tt,At){var Ot=Math.trunc((Tt-wt)/Os.NUM_PTS_TO_CHECK);Ot<=0&&(Ot=1);for(var Dt=wt;Dt<Tt;Dt+=Ot)if(!this.isShallow(vt,bt,this._inputLine[Dt],At))return!1;return!0},Os.prototype.isConcave=function(vt,bt,wt){var Tt=ki.computeOrientation(vt,bt,wt)===this._angleOrientation;return Tt},Os.prototype.simplify=function(vt){this._distanceTol=Math.abs(vt),vt<0&&(this._angleOrientation=ki.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var bt=!1;do bt=this.deleteShallowConcavities();while(bt);return this.collapseLine()},Os.prototype.findNextNonDeletedIndex=function(vt){for(var bt=vt+1;bt<this._inputLine.length&&this._isDeleted[bt]===Os.DELETE;)bt++;return bt},Os.prototype.isShallow=function(vt,bt,wt,Tt){return ki.distancePointLine(bt,vt,wt)<Tt},Os.prototype.collapseLine=function(){for(var vt=new zp,bt=0;bt<this._inputLine.length;bt++)this._isDeleted[bt]!==Os.DELETE&&vt.add(this._inputLine[bt]);return vt.toCoordinateArray()},Os.prototype.interfaces_=function(){return[]},Os.prototype.getClass=function(){return Os},Os.simplify=function(vt,bt){return new Os(vt).simplify(bt)},Kh.INIT.get=function(){return 0},Kh.DELETE.get=function(){return 1},Kh.KEEP.get=function(){return 1},Kh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Os,Kh);var Fl=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new vi},Ry={COORDINATE_ARRAY_TYPE:{configurable:!0}};Fl.prototype.getCoordinates=function(){return this._ptList.toArray(Fl.COORDINATE_ARRAY_TYPE)},Fl.prototype.setPrecisionModel=function(vt){this._precisionModel=vt},Fl.prototype.addPt=function(vt){var bt=new Nr(vt);if(this._precisionModel.makePrecise(bt),this.isRedundant(bt))return null;this._ptList.add(bt)},Fl.prototype.revere=function(){},Fl.prototype.addPts=function(vt,bt){if(bt)for(var wt=0;wt<vt.length;wt++)this.addPt(vt[wt]);else for(var Tt=vt.length-1;Tt>=0;Tt--)this.addPt(vt[Tt])},Fl.prototype.isRedundant=function(vt){if(this._ptList.size()<1)return!1;var bt=this._ptList.get(this._ptList.size()-1);return vt.distance(bt)<this._minimimVertexDistance},Fl.prototype.toString=function(){return new Io().createLineString(this.getCoordinates()).toString()},Fl.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var vt=new Nr(this._ptList.get(0)),bt=this._ptList.get(this._ptList.size()-1);if(vt.equals(bt))return null;this._ptList.add(vt)},Fl.prototype.setMinimumVertexDistance=function(vt){this._minimimVertexDistance=vt},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl},Ry.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Fl,Ry);var Fo=function(){},Dd={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Fo.prototype.interfaces_=function(){return[]},Fo.prototype.getClass=function(){return Fo},Fo.toDegrees=function(vt){return 180*vt/Math.PI},Fo.normalize=function(vt){for(;vt>Math.PI;)vt-=Fo.PI_TIMES_2;for(;vt<=-Math.PI;)vt+=Fo.PI_TIMES_2;return vt},Fo.angle=function(){if(arguments.length===1){var vt=arguments[0];return Math.atan2(vt.y,vt.x)}if(arguments.length===2){var bt=arguments[0],wt=arguments[1],Tt=wt.x-bt.x,At=wt.y-bt.y;return Math.atan2(At,Tt)}},Fo.isAcute=function(vt,bt,wt){var Tt=vt.x-bt.x,At=vt.y-bt.y;return Tt*(wt.x-bt.x)+At*(wt.y-bt.y)>0},Fo.isObtuse=function(vt,bt,wt){var Tt=vt.x-bt.x,At=vt.y-bt.y;return Tt*(wt.x-bt.x)+At*(wt.y-bt.y)<0},Fo.interiorAngle=function(vt,bt,wt){var Tt=Fo.angle(bt,vt),At=Fo.angle(bt,wt);return Math.abs(At-Tt)},Fo.normalizePositive=function(vt){if(vt<0){for(;vt<0;)vt+=Fo.PI_TIMES_2;vt>=Fo.PI_TIMES_2&&(vt=0)}else{for(;vt>=Fo.PI_TIMES_2;)vt-=Fo.PI_TIMES_2;vt<0&&(vt=0)}return vt},Fo.angleBetween=function(vt,bt,wt){var Tt=Fo.angle(bt,vt),At=Fo.angle(bt,wt);return Fo.diff(Tt,At)},Fo.diff=function(vt,bt){var wt=null;return(wt=vt<bt?bt-vt:vt-bt)>Math.PI&&(wt=2*Math.PI-wt),wt},Fo.toRadians=function(vt){return vt*Math.PI/180},Fo.getTurn=function(vt,bt){var wt=Math.sin(bt-vt);return wt>0?Fo.COUNTERCLOCKWISE:wt<0?Fo.CLOCKWISE:Fo.NONE},Fo.angleBetweenOriented=function(vt,bt,wt){var Tt=Fo.angle(bt,vt),At=Fo.angle(bt,wt)-Tt;return At<=-Math.PI?At+Fo.PI_TIMES_2:At>Math.PI?At-Fo.PI_TIMES_2:At},Dd.PI_TIMES_2.get=function(){return 2*Math.PI},Dd.PI_OVER_2.get=function(){return Math.PI/2},Dd.PI_OVER_4.get=function(){return Math.PI/4},Dd.COUNTERCLOCKWISE.get=function(){return ki.COUNTERCLOCKWISE},Dd.CLOCKWISE.get=function(){return ki.CLOCKWISE},Dd.NONE.get=function(){return ki.COLLINEAR},Object.defineProperties(Fo,Dd);var Ms=function vt(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Vi,this._seg1=new Vi,this._offset0=new Vi,this._offset1=new Vi,this._side=0,this._hasNarrowConcaveAngle=!1;var bt=arguments[0],wt=arguments[1],Tt=arguments[2];this._precisionModel=bt,this._bufParams=wt,this._li=new ph,this._filletAngleQuantum=Math.PI/2/wt.getQuadrantSegments(),wt.getQuadrantSegments()>=8&&wt.getJoinStyle()===gs.JOIN_ROUND&&(this._closingSegLengthFactor=vt.MAX_CLOSING_SEG_LEN_FACTOR),this.init(Tt)},Hf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ms.prototype.addNextSegment=function(vt,bt){if(this._s0=this._s1,this._s1=this._s2,this._s2=vt,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var wt=ki.computeOrientation(this._s0,this._s1,this._s2),Tt=wt===ki.CLOCKWISE&&this._side===mi.LEFT||wt===ki.COUNTERCLOCKWISE&&this._side===mi.RIGHT;wt===0?this.addCollinear(bt):Tt?this.addOutsideTurn(wt,bt):this.addInsideTurn(wt,bt)},Ms.prototype.addLineEndCap=function(vt,bt){var wt=new Vi(vt,bt),Tt=new Vi;this.computeOffsetSegment(wt,mi.LEFT,this._distance,Tt);var At=new Vi;this.computeOffsetSegment(wt,mi.RIGHT,this._distance,At);var Ot=bt.x-vt.x,Dt=bt.y-vt.y,jt=Math.atan2(Dt,Ot);switch(this._bufParams.getEndCapStyle()){case gs.CAP_ROUND:this._segList.addPt(Tt.p1),this.addFilletArc(bt,jt+Math.PI/2,jt-Math.PI/2,ki.CLOCKWISE,this._distance),this._segList.addPt(At.p1);break;case gs.CAP_FLAT:this._segList.addPt(Tt.p1),this._segList.addPt(At.p1);break;case gs.CAP_SQUARE:var Gt=new Nr;Gt.x=Math.abs(this._distance)*Math.cos(jt),Gt.y=Math.abs(this._distance)*Math.sin(jt);var qt=new Nr(Tt.p1.x+Gt.x,Tt.p1.y+Gt.y),en=new Nr(At.p1.x+Gt.x,At.p1.y+Gt.y);this._segList.addPt(qt),this._segList.addPt(en)}},Ms.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ms.prototype.addMitreJoin=function(vt,bt,wt,Tt){var At=!0,Ot=null;try{Ot=ec.intersection(bt.p0,bt.p1,wt.p0,wt.p1),(Tt<=0?1:Ot.distance(vt)/Math.abs(Tt))>this._bufParams.getMitreLimit()&&(At=!1)}catch(Dt){if(!(Dt instanceof Ad))throw Dt;Ot=new Nr(0,0),At=!1}At?this._segList.addPt(Ot):this.addLimitedMitreJoin(bt,wt,Tt,this._bufParams.getMitreLimit())},Ms.prototype.addFilletCorner=function(vt,bt,wt,Tt,At){var Ot=bt.x-vt.x,Dt=bt.y-vt.y,jt=Math.atan2(Dt,Ot),Gt=wt.x-vt.x,qt=wt.y-vt.y,en=Math.atan2(qt,Gt);Tt===ki.CLOCKWISE?jt<=en&&(jt+=2*Math.PI):jt>=en&&(jt-=2*Math.PI),this._segList.addPt(bt),this.addFilletArc(vt,jt,en,Tt,At),this._segList.addPt(wt)},Ms.prototype.addOutsideTurn=function(vt,bt){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ms.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===gs.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===gs.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(bt&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,vt,this._distance),this._segList.addPt(this._offset1.p0))},Ms.prototype.createSquare=function(vt){this._segList.addPt(new Nr(vt.x+this._distance,vt.y+this._distance)),this._segList.addPt(new Nr(vt.x+this._distance,vt.y-this._distance)),this._segList.addPt(new Nr(vt.x-this._distance,vt.y-this._distance)),this._segList.addPt(new Nr(vt.x-this._distance,vt.y+this._distance)),this._segList.closeRing()},Ms.prototype.addSegments=function(vt,bt){this._segList.addPts(vt,bt)},Ms.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ms.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ms.prototype.initSideSegments=function(vt,bt,wt){this._s1=vt,this._s2=bt,this._side=wt,this._seg1.setCoordinates(vt,bt),this.computeOffsetSegment(this._seg1,wt,this._distance,this._offset1)},Ms.prototype.addLimitedMitreJoin=function(vt,bt,wt,Tt){var At=this._seg0.p1,Ot=Fo.angle(At,this._seg0.p0),Dt=Fo.angleBetweenOriented(this._seg0.p0,At,this._seg1.p1)/2,jt=Fo.normalize(Ot+Dt),Gt=Fo.normalize(jt+Math.PI),qt=Tt*wt,en=wt-qt*Math.abs(Math.sin(Dt)),Xt=At.x+qt*Math.cos(Gt),sn=At.y+qt*Math.sin(Gt),yn=new Nr(Xt,sn),vn=new Vi(At,yn),Sn=vn.pointAlongOffset(1,en),fn=vn.pointAlongOffset(1,-en);this._side===mi.LEFT?(this._segList.addPt(Sn),this._segList.addPt(fn)):(this._segList.addPt(fn),this._segList.addPt(Sn))},Ms.prototype.computeOffsetSegment=function(vt,bt,wt,Tt){var At=bt===mi.LEFT?1:-1,Ot=vt.p1.x-vt.p0.x,Dt=vt.p1.y-vt.p0.y,jt=Math.sqrt(Ot*Ot+Dt*Dt),Gt=At*wt*Ot/jt,qt=At*wt*Dt/jt;Tt.p0.x=vt.p0.x-qt,Tt.p0.y=vt.p0.y+Gt,Tt.p1.x=vt.p1.x-qt,Tt.p1.y=vt.p1.y+Gt},Ms.prototype.addFilletArc=function(vt,bt,wt,Tt,At){var Ot=Tt===ki.CLOCKWISE?-1:1,Dt=Math.abs(bt-wt),jt=Math.trunc(Dt/this._filletAngleQuantum+.5);if(jt<1)return null;for(var Gt=Dt/jt,qt=0,en=new Nr;qt<Dt;){var Xt=bt+Ot*qt;en.x=vt.x+At*Math.cos(Xt),en.y=vt.y+At*Math.sin(Xt),this._segList.addPt(en),qt+=Gt}},Ms.prototype.addInsideTurn=function(vt,bt){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ms.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var wt=new Nr((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(wt);var Tt=new Nr((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(Tt)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ms.prototype.createCircle=function(vt){var bt=new Nr(vt.x+this._distance,vt.y);this._segList.addPt(bt),this.addFilletArc(vt,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ms.prototype.addBevelJoin=function(vt,bt){this._segList.addPt(vt.p1),this._segList.addPt(bt.p0)},Ms.prototype.init=function(vt){this._distance=vt,this._maxCurveSegmentError=vt*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Fl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(vt*Ms.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ms.prototype.addCollinear=function(vt){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===gs.JOIN_BEVEL||this._bufParams.getJoinStyle()===gs.JOIN_MITRE?(vt&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ki.CLOCKWISE,this._distance))},Ms.prototype.closeRing=function(){this._segList.closeRing()},Ms.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ms.prototype.interfaces_=function(){return[]},Ms.prototype.getClass=function(){return Ms},Hf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},Hf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},Hf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Hf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ms,Hf);var Wi=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var vt=arguments[0],bt=arguments[1];this._precisionModel=vt,this._bufParams=bt};Wi.prototype.getOffsetCurve=function(vt,bt){if(this._distance=bt,bt===0)return null;var wt=bt<0,Tt=Math.abs(bt),At=this.getSegGen(Tt);vt.length<=1?this.computePointCurve(vt[0],At):this.computeOffsetCurve(vt,wt,At);var Ot=At.getCoordinates();return wt&&Po.reverse(Ot),Ot},Wi.prototype.computeSingleSidedBufferCurve=function(vt,bt,wt){var Tt=this.simplifyTolerance(this._distance);if(bt){wt.addSegments(vt,!0);var At=Os.simplify(vt,-Tt),Ot=At.length-1;wt.initSideSegments(At[Ot],At[Ot-1],mi.LEFT),wt.addFirstSegment();for(var Dt=Ot-2;Dt>=0;Dt--)wt.addNextSegment(At[Dt],!0)}else{wt.addSegments(vt,!1);var jt=Os.simplify(vt,Tt),Gt=jt.length-1;wt.initSideSegments(jt[0],jt[1],mi.LEFT),wt.addFirstSegment();for(var qt=2;qt<=Gt;qt++)wt.addNextSegment(jt[qt],!0)}wt.addLastSegment(),wt.closeRing()},Wi.prototype.computeRingBufferCurve=function(vt,bt,wt){var Tt=this.simplifyTolerance(this._distance);bt===mi.RIGHT&&(Tt=-Tt);var At=Os.simplify(vt,Tt),Ot=At.length-1;wt.initSideSegments(At[Ot-1],At[0],bt);for(var Dt=1;Dt<=Ot;Dt++){var jt=Dt!==1;wt.addNextSegment(At[Dt],jt)}wt.closeRing()},Wi.prototype.computeLineBufferCurve=function(vt,bt){var wt=this.simplifyTolerance(this._distance),Tt=Os.simplify(vt,wt),At=Tt.length-1;bt.initSideSegments(Tt[0],Tt[1],mi.LEFT);for(var Ot=2;Ot<=At;Ot++)bt.addNextSegment(Tt[Ot],!0);bt.addLastSegment(),bt.addLineEndCap(Tt[At-1],Tt[At]);var Dt=Os.simplify(vt,-wt),jt=Dt.length-1;bt.initSideSegments(Dt[jt],Dt[jt-1],mi.LEFT);for(var Gt=jt-2;Gt>=0;Gt--)bt.addNextSegment(Dt[Gt],!0);bt.addLastSegment(),bt.addLineEndCap(Dt[1],Dt[0]),bt.closeRing()},Wi.prototype.computePointCurve=function(vt,bt){switch(this._bufParams.getEndCapStyle()){case gs.CAP_ROUND:bt.createCircle(vt);break;case gs.CAP_SQUARE:bt.createSquare(vt)}},Wi.prototype.getLineCurve=function(vt,bt){if(this._distance=bt,bt<0&&!this._bufParams.isSingleSided()||bt===0)return null;var wt=Math.abs(bt),Tt=this.getSegGen(wt);if(vt.length<=1)this.computePointCurve(vt[0],Tt);else if(this._bufParams.isSingleSided()){var At=bt<0;this.computeSingleSidedBufferCurve(vt,At,Tt)}else this.computeLineBufferCurve(vt,Tt);return Tt.getCoordinates()},Wi.prototype.getBufferParameters=function(){return this._bufParams},Wi.prototype.simplifyTolerance=function(vt){return vt*this._bufParams.getSimplifyFactor()},Wi.prototype.getRingCurve=function(vt,bt,wt){if(this._distance=wt,vt.length<=2)return this.getLineCurve(vt,wt);if(wt===0)return Wi.copyCoordinates(vt);var Tt=this.getSegGen(wt);return this.computeRingBufferCurve(vt,bt,Tt),Tt.getCoordinates()},Wi.prototype.computeOffsetCurve=function(vt,bt,wt){var Tt=this.simplifyTolerance(this._distance);if(bt){var At=Os.simplify(vt,-Tt),Ot=At.length-1;wt.initSideSegments(At[Ot],At[Ot-1],mi.LEFT),wt.addFirstSegment();for(var Dt=Ot-2;Dt>=0;Dt--)wt.addNextSegment(At[Dt],!0)}else{var jt=Os.simplify(vt,Tt),Gt=jt.length-1;wt.initSideSegments(jt[0],jt[1],mi.LEFT),wt.addFirstSegment();for(var qt=2;qt<=Gt;qt++)wt.addNextSegment(jt[qt],!0)}wt.addLastSegment()},Wi.prototype.getSegGen=function(vt){return new Ms(this._precisionModel,this._bufParams,vt)},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.copyCoordinates=function(vt){for(var bt=new Array(vt.length).fill(null),wt=0;wt<bt.length;wt++)bt[wt]=new Nr(vt[wt]);return bt};var Bd=function(){this._subgraphs=null,this._seg=new Vi,this._cga=new ki;var vt=arguments[0];this._subgraphs=vt},My={DepthSegment:{configurable:!0}};Bd.prototype.findStabbedSegments=function(){var vt=this;if(arguments.length===1){for(var bt=arguments[0],wt=new vi,Tt=this._subgraphs.iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getEnvelope();bt.y<Ot.getMinY()||bt.y>Ot.getMaxY()||vt.findStabbedSegments(bt,At.getDirectedEdges(),wt)}return wt}if(arguments.length===3){if(ro(arguments[2],vc)&&arguments[0]instanceof Nr&&arguments[1]instanceof sm)for(var Dt=arguments[0],jt=arguments[1],Gt=arguments[2],qt=jt.getEdge().getCoordinates(),en=0;en<qt.length-1;en++){vt._seg.p0=qt[en],vt._seg.p1=qt[en+1],vt._seg.p0.y>vt._seg.p1.y&&vt._seg.reverse();var Xt=Math.max(vt._seg.p0.x,vt._seg.p1.x);if(!(Xt<Dt.x)&&!(vt._seg.isHorizontal()||Dt.y<vt._seg.p0.y||Dt.y>vt._seg.p1.y||ki.computeOrientation(vt._seg.p0,vt._seg.p1,Dt)===ki.RIGHT)){var sn=jt.getDepth(mi.LEFT);vt._seg.p0.equals(qt[en])||(sn=jt.getDepth(mi.RIGHT));var yn=new Jh(vt._seg,sn);Gt.add(yn)}}else if(ro(arguments[2],vc)&&arguments[0]instanceof Nr&&ro(arguments[1],vc))for(var vn=arguments[0],Sn=arguments[1],fn=arguments[2],Dn=Sn.iterator();Dn.hasNext();){var rr=Dn.next();rr.isForward()&&vt.findStabbedSegments(vn,rr,fn)}}},Bd.prototype.getDepth=function(vt){var bt=this.findStabbedSegments(vt);return bt.size()===0?0:Cc.min(bt)._leftDepth},Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd},My.DepthSegment.get=function(){return Jh},Object.defineProperties(Bd,My);var Jh=function(){this._upwardSeg=null,this._leftDepth=null;var vt=arguments[0],bt=arguments[1];this._upwardSeg=new Vi(vt),this._leftDepth=bt};Jh.prototype.compareTo=function(vt){var bt=vt;if(this._upwardSeg.minX()>=bt._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=bt._upwardSeg.minX())return-1;var wt=this._upwardSeg.orientationIndex(bt._upwardSeg);return wt!==0||(wt=-1*bt._upwardSeg.orientationIndex(this._upwardSeg))!==0?wt:this._upwardSeg.compareTo(bt._upwardSeg)},Jh.prototype.compareX=function(vt,bt){var wt=vt.p0.compareTo(bt.p0);return wt!==0?wt:vt.p1.compareTo(bt.p1)},Jh.prototype.toString=function(){return this._upwardSeg.toString()},Jh.prototype.interfaces_=function(){return[Jl]},Jh.prototype.getClass=function(){return Jh};var go=function(vt,bt,wt){this.p0=vt||null,this.p1=bt||null,this.p2=wt||null};go.prototype.area=function(){return go.area(this.p0,this.p1,this.p2)},go.prototype.signedArea=function(){return go.signedArea(this.p0,this.p1,this.p2)},go.prototype.interpolateZ=function(vt){if(vt===null)throw new Ns("Supplied point is null.");return go.interpolateZ(vt,this.p0,this.p1,this.p2)},go.prototype.longestSideLength=function(){return go.longestSideLength(this.p0,this.p1,this.p2)},go.prototype.isAcute=function(){return go.isAcute(this.p0,this.p1,this.p2)},go.prototype.circumcentre=function(){return go.circumcentre(this.p0,this.p1,this.p2)},go.prototype.area3D=function(){return go.area3D(this.p0,this.p1,this.p2)},go.prototype.centroid=function(){return go.centroid(this.p0,this.p1,this.p2)},go.prototype.inCentre=function(){return go.inCentre(this.p0,this.p1,this.p2)},go.prototype.interfaces_=function(){return[]},go.prototype.getClass=function(){return go},go.area=function(vt,bt,wt){return Math.abs(((wt.x-vt.x)*(bt.y-vt.y)-(bt.x-vt.x)*(wt.y-vt.y))/2)},go.signedArea=function(vt,bt,wt){return((wt.x-vt.x)*(bt.y-vt.y)-(bt.x-vt.x)*(wt.y-vt.y))/2},go.det=function(vt,bt,wt,Tt){return vt*Tt-bt*wt},go.interpolateZ=function(vt,bt,wt,Tt){var At=bt.x,Ot=bt.y,Dt=wt.x-At,jt=Tt.x-At,Gt=wt.y-Ot,qt=Tt.y-Ot,en=Dt*qt-jt*Gt,Xt=vt.x-At,sn=vt.y-Ot,yn=(qt*Xt-jt*sn)/en,vn=(-Gt*Xt+Dt*sn)/en;return bt.z+yn*(wt.z-bt.z)+vn*(Tt.z-bt.z)},go.longestSideLength=function(vt,bt,wt){var Tt=vt.distance(bt),At=bt.distance(wt),Ot=wt.distance(vt),Dt=Tt;return At>Dt&&(Dt=At),Ot>Dt&&(Dt=Ot),Dt},go.isAcute=function(vt,bt,wt){return!!Fo.isAcute(vt,bt,wt)&&!!Fo.isAcute(bt,wt,vt)&&!!Fo.isAcute(wt,vt,bt)},go.circumcentre=function(vt,bt,wt){var Tt=wt.x,At=wt.y,Ot=vt.x-Tt,Dt=vt.y-At,jt=bt.x-Tt,Gt=bt.y-At,qt=2*go.det(Ot,Dt,jt,Gt),en=go.det(Dt,Ot*Ot+Dt*Dt,Gt,jt*jt+Gt*Gt),Xt=go.det(Ot,Ot*Ot+Dt*Dt,jt,jt*jt+Gt*Gt);return new Nr(Tt-en/qt,At+Xt/qt)},go.perpendicularBisector=function(vt,bt){var wt=bt.x-vt.x,Tt=bt.y-vt.y,At=new ec(vt.x+wt/2,vt.y+Tt/2,1),Ot=new ec(vt.x-Tt+wt/2,vt.y+wt+Tt/2,1);return new ec(At,Ot)},go.angleBisector=function(vt,bt,wt){var Tt=bt.distance(vt),At=Tt/(Tt+bt.distance(wt)),Ot=wt.x-vt.x,Dt=wt.y-vt.y;return new Nr(vt.x+At*Ot,vt.y+At*Dt)},go.area3D=function(vt,bt,wt){var Tt=bt.x-vt.x,At=bt.y-vt.y,Ot=bt.z-vt.z,Dt=wt.x-vt.x,jt=wt.y-vt.y,Gt=wt.z-vt.z,qt=At*Gt-Ot*jt,en=Ot*Dt-Tt*Gt,Xt=Tt*jt-At*Dt,sn=qt*qt+en*en+Xt*Xt,yn=Math.sqrt(sn)/2;return yn},go.centroid=function(vt,bt,wt){var Tt=(vt.x+bt.x+wt.x)/3,At=(vt.y+bt.y+wt.y)/3;return new Nr(Tt,At)},go.inCentre=function(vt,bt,wt){var Tt=bt.distance(wt),At=vt.distance(wt),Ot=vt.distance(bt),Dt=Tt+At+Ot,jt=(Tt*vt.x+At*bt.x+Ot*wt.x)/Dt,Gt=(Tt*vt.y+At*bt.y+Ot*wt.y)/Dt;return new Nr(jt,Gt)};var yl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new vi;var vt=arguments[0],bt=arguments[1],wt=arguments[2];this._inputGeom=vt,this._distance=bt,this._curveBuilder=wt};yl.prototype.addPoint=function(vt){if(this._distance<=0)return null;var bt=vt.getCoordinates(),wt=this._curveBuilder.getLineCurve(bt,this._distance);this.addCurve(wt,Ur.EXTERIOR,Ur.INTERIOR)},yl.prototype.addPolygon=function(vt){var bt=this,wt=this._distance,Tt=mi.LEFT;this._distance<0&&(wt=-this._distance,Tt=mi.RIGHT);var At=vt.getExteriorRing(),Ot=Po.removeRepeatedPoints(At.getCoordinates());if(this._distance<0&&this.isErodedCompletely(At,this._distance)||this._distance<=0&&Ot.length<3)return null;this.addPolygonRing(Ot,wt,Tt,Ur.EXTERIOR,Ur.INTERIOR);for(var Dt=0;Dt<vt.getNumInteriorRing();Dt++){var jt=vt.getInteriorRingN(Dt),Gt=Po.removeRepeatedPoints(jt.getCoordinates());bt._distance>0&&bt.isErodedCompletely(jt,-bt._distance)||bt.addPolygonRing(Gt,wt,mi.opposite(Tt),Ur.INTERIOR,Ur.EXTERIOR)}},yl.prototype.isTriangleErodedCompletely=function(vt,bt){var wt=new go(vt[0],vt[1],vt[2]),Tt=wt.inCentre();return ki.distancePointLine(Tt,wt.p0,wt.p1)<Math.abs(bt)},yl.prototype.addLineString=function(vt){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var bt=Po.removeRepeatedPoints(vt.getCoordinates()),wt=this._curveBuilder.getLineCurve(bt,this._distance);this.addCurve(wt,Ur.EXTERIOR,Ur.INTERIOR)},yl.prototype.addCurve=function(vt,bt,wt){if(vt===null||vt.length<2)return null;var Tt=new Us(vt,new bs(0,Ur.BOUNDARY,bt,wt));this._curveList.add(Tt)},yl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},yl.prototype.addPolygonRing=function(vt,bt,wt,Tt,At){if(bt===0&&vt.length<pu.MINIMUM_VALID_SIZE)return null;var Ot=Tt,Dt=At;vt.length>=pu.MINIMUM_VALID_SIZE&&ki.isCCW(vt)&&(Ot=At,Dt=Tt,wt=mi.opposite(wt));var jt=this._curveBuilder.getRingCurve(vt,wt,bt);this.addCurve(jt,Ot,Dt)},yl.prototype.add=function(vt){if(vt.isEmpty())return null;vt instanceof da?this.addPolygon(vt):vt instanceof Ds?this.addLineString(vt):vt instanceof Al?this.addPoint(vt):(vt instanceof Df||vt instanceof gh||vt instanceof gu||vt instanceof rl)&&this.addCollection(vt)},yl.prototype.isErodedCompletely=function(vt,bt){var wt=vt.getCoordinates();if(wt.length<4)return bt<0;if(wt.length===4)return this.isTriangleErodedCompletely(wt,bt);var Tt=vt.getEnvelopeInternal(),At=Math.min(Tt.getHeight(),Tt.getWidth());return bt<0&&2*Math.abs(bt)>At},yl.prototype.addCollection=function(vt){for(var bt=0;bt<vt.getNumGeometries();bt++){var wt=vt.getGeometryN(bt);this.add(wt)}},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl};var ys=function(){};ys.prototype.locate=function(vt){},ys.prototype.interfaces_=function(){return[]},ys.prototype.getClass=function(){return ys};var qc=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var vt=arguments[0];this._parent=vt,this._atStart=!0,this._index=0,this._max=vt.getNumGeometries()};qc.prototype.next=function(){if(this._atStart)return this._atStart=!1,qc.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new $d;var vt=this._parent.getGeometryN(this._index++);return vt instanceof rl?(this._subcollectionIterator=new qc(vt),this._subcollectionIterator.next()):vt},qc.prototype.remove=function(){throw new Error(this.getClass().getName())},qc.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},qc.prototype.interfaces_=function(){return[$f]},qc.prototype.getClass=function(){return qc},qc.isAtomic=function(vt){return!(vt instanceof rl)};var vl=function(){this._geom=null;var vt=arguments[0];this._geom=vt};vl.prototype.locate=function(vt){return vl.locate(vt,this._geom)},vl.prototype.interfaces_=function(){return[ys]},vl.prototype.getClass=function(){return vl},vl.isPointInRing=function(vt,bt){return!!bt.getEnvelopeInternal().intersects(vt)&&ki.isPointInRing(vt,bt.getCoordinates())},vl.containsPointInPolygon=function(vt,bt){if(bt.isEmpty())return!1;var wt=bt.getExteriorRing();if(!vl.isPointInRing(vt,wt))return!1;for(var Tt=0;Tt<bt.getNumInteriorRing();Tt++){var At=bt.getInteriorRingN(Tt);if(vl.isPointInRing(vt,At))return!1}return!0},vl.containsPoint=function(vt,bt){if(bt instanceof da)return vl.containsPointInPolygon(vt,bt);if(bt instanceof rl)for(var wt=new qc(bt);wt.hasNext();){var Tt=wt.next();if(Tt!==bt&&vl.containsPoint(vt,Tt))return!0}return!1},vl.locate=function(vt,bt){return bt.isEmpty()?Ur.EXTERIOR:vl.containsPoint(vt,bt)?Ur.INTERIOR:Ur.EXTERIOR};var La=function(){this._edgeMap=new Ya,this._edgeList=null,this._ptInAreaLocation=[Ur.NONE,Ur.NONE]};La.prototype.getNextCW=function(vt){this.getEdges();var bt=this._edgeList.indexOf(vt),wt=bt-1;return bt===0&&(wt=this._edgeList.size()-1),this._edgeList.get(wt)},La.prototype.propagateSideLabels=function(vt){for(var bt=Ur.NONE,wt=this.iterator();wt.hasNext();){var Tt=wt.next().getLabel();Tt.isArea(vt)&&Tt.getLocation(vt,mi.LEFT)!==Ur.NONE&&(bt=Tt.getLocation(vt,mi.LEFT))}if(bt===Ur.NONE)return null;for(var At=bt,Ot=this.iterator();Ot.hasNext();){var Dt=Ot.next(),jt=Dt.getLabel();if(jt.getLocation(vt,mi.ON)===Ur.NONE&&jt.setLocation(vt,mi.ON,At),jt.isArea(vt)){var Gt=jt.getLocation(vt,mi.LEFT),qt=jt.getLocation(vt,mi.RIGHT);if(qt!==Ur.NONE){if(qt!==At)throw new Du("side location conflict",Dt.getCoordinate());Gt===Ur.NONE&&_o.shouldNeverReachHere("found single null side (at "+Dt.getCoordinate()+")"),At=Gt}else _o.isTrue(jt.getLocation(vt,mi.LEFT)===Ur.NONE,"found single null side"),jt.setLocation(vt,mi.RIGHT,At),jt.setLocation(vt,mi.LEFT,At)}}},La.prototype.getCoordinate=function(){var vt=this.iterator();return vt.hasNext()?vt.next().getCoordinate():null},La.prototype.print=function(vt){za.out.println("EdgeEndStar:   "+this.getCoordinate());for(var bt=this.iterator();bt.hasNext();)bt.next().print(vt)},La.prototype.isAreaLabelsConsistent=function(vt){return this.computeEdgeEndLabels(vt.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},La.prototype.checkAreaLabelsConsistent=function(vt){var bt=this.getEdges();if(bt.size()<=0)return!0;var wt=bt.size()-1,Tt=bt.get(wt).getLabel().getLocation(vt,mi.LEFT);_o.isTrue(Tt!==Ur.NONE,"Found unlabelled area edge");for(var At=Tt,Ot=this.iterator();Ot.hasNext();){var Dt=Ot.next().getLabel();_o.isTrue(Dt.isArea(vt),"Found non-area edge");var jt=Dt.getLocation(vt,mi.LEFT),Gt=Dt.getLocation(vt,mi.RIGHT);if(jt===Gt||Gt!==At)return!1;At=jt}return!0},La.prototype.findIndex=function(vt){this.iterator();for(var bt=0;bt<this._edgeList.size();bt++)if(this._edgeList.get(bt)===vt)return bt;return-1},La.prototype.iterator=function(){return this.getEdges().iterator()},La.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new vi(this._edgeMap.values())),this._edgeList},La.prototype.getLocation=function(vt,bt,wt){return this._ptInAreaLocation[vt]===Ur.NONE&&(this._ptInAreaLocation[vt]=vl.locate(bt,wt[vt].getGeometry())),this._ptInAreaLocation[vt]},La.prototype.toString=function(){var vt=new Fc;vt.append("EdgeEndStar:   "+this.getCoordinate()),vt.append(`
`);for(var bt=this.iterator();bt.hasNext();){var wt=bt.next();vt.append(wt),vt.append(`
`)}return vt.toString()},La.prototype.computeEdgeEndLabels=function(vt){for(var bt=this.iterator();bt.hasNext();)bt.next().computeLabel(vt)},La.prototype.computeLabelling=function(vt){this.computeEdgeEndLabels(vt[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var bt=[!1,!1],wt=this.iterator();wt.hasNext();)for(var Tt=wt.next().getLabel(),At=0;At<2;At++)Tt.isLine(At)&&Tt.getLocation(At)===Ur.BOUNDARY&&(bt[At]=!0);for(var Ot=this.iterator();Ot.hasNext();)for(var Dt=Ot.next(),jt=Dt.getLabel(),Gt=0;Gt<2;Gt++)if(jt.isAnyNull(Gt)){var qt=Ur.NONE;if(bt[Gt])qt=Ur.EXTERIOR;else{var en=Dt.getCoordinate();qt=this.getLocation(Gt,en,vt)}jt.setAllLocationsIfNull(Gt,qt)}},La.prototype.getDegree=function(){return this._edgeMap.size()},La.prototype.insertEdgeEnd=function(vt,bt){this._edgeMap.put(vt,bt),this._edgeList=null},La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La};var l_=function(vt){function bt(){vt.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.linkResultDirectedEdges=function(){var wt=this;this.getResultAreaEdges();for(var Tt=null,At=null,Ot=this._SCANNING_FOR_INCOMING,Dt=0;Dt<this._resultAreaEdgeList.size();Dt++){var jt=wt._resultAreaEdgeList.get(Dt),Gt=jt.getSym();if(jt.getLabel().isArea())switch(Tt===null&&jt.isInResult()&&(Tt=jt),Ot){case wt._SCANNING_FOR_INCOMING:if(!Gt.isInResult())continue;At=Gt,Ot=wt._LINKING_TO_OUTGOING;break;case wt._LINKING_TO_OUTGOING:if(!jt.isInResult())continue;At.setNext(jt),Ot=wt._SCANNING_FOR_INCOMING}}if(Ot===this._LINKING_TO_OUTGOING){if(Tt===null)throw new Du("no outgoing dirEdge found",this.getCoordinate());_o.isTrue(Tt.isInResult(),"unable to link last incoming dirEdge"),At.setNext(Tt)}},bt.prototype.insert=function(wt){var Tt=wt;this.insertEdgeEnd(Tt,Tt)},bt.prototype.getRightmostEdge=function(){var wt=this.getEdges(),Tt=wt.size();if(Tt<1)return null;var At=wt.get(0);if(Tt===1)return At;var Ot=wt.get(Tt-1),Dt=At.getQuadrant(),jt=Ot.getQuadrant();return xs.isNorthern(Dt)&&xs.isNorthern(jt)?At:xs.isNorthern(Dt)||xs.isNorthern(jt)?At.getDy()!==0?At:Ot.getDy()!==0?Ot:(_o.shouldNeverReachHere("found two horizontal edges incident on node"),null):Ot},bt.prototype.print=function(wt){za.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var Tt=this.iterator();Tt.hasNext();){var At=Tt.next();wt.print("out "),At.print(wt),wt.println(),wt.print("in "),At.getSym().print(wt),wt.println()}},bt.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new vi;for(var wt=this.iterator();wt.hasNext();){var Tt=wt.next();(Tt.isInResult()||Tt.getSym().isInResult())&&this._resultAreaEdgeList.add(Tt)}return this._resultAreaEdgeList},bt.prototype.updateLabelling=function(wt){for(var Tt=this.iterator();Tt.hasNext();){var At=Tt.next().getLabel();At.setAllLocationsIfNull(0,wt.getLocation(0)),At.setAllLocationsIfNull(1,wt.getLocation(1))}},bt.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var wt=null,Tt=null,At=this._edgeList.size()-1;At>=0;At--){var Ot=this._edgeList.get(At),Dt=Ot.getSym();Tt===null&&(Tt=Dt),wt!==null&&Dt.setNext(wt),wt=Ot}Tt.setNext(wt)},bt.prototype.computeDepths=function(){var wt=this;if(arguments.length===1){var Tt=arguments[0],At=this.findIndex(Tt),Ot=Tt.getDepth(mi.LEFT),Dt=Tt.getDepth(mi.RIGHT),jt=this.computeDepths(At+1,this._edgeList.size(),Ot),Gt=this.computeDepths(0,At,jt);if(Gt!==Dt)throw new Du("depth mismatch at "+Tt.getCoordinate())}else if(arguments.length===3){for(var qt=arguments[0],en=arguments[1],Xt=arguments[2],sn=Xt,yn=qt;yn<en;yn++){var vn=wt._edgeList.get(yn);vn.setEdgeDepths(mi.RIGHT,sn),sn=vn.getDepth(mi.LEFT)}return sn}},bt.prototype.mergeSymLabels=function(){for(var wt=this.iterator();wt.hasNext();){var Tt=wt.next();Tt.getLabel().merge(Tt.getSym().getLabel())}},bt.prototype.linkMinimalDirectedEdges=function(wt){for(var Tt=this,At=null,Ot=null,Dt=this._SCANNING_FOR_INCOMING,jt=this._resultAreaEdgeList.size()-1;jt>=0;jt--){var Gt=Tt._resultAreaEdgeList.get(jt),qt=Gt.getSym();switch(At===null&&Gt.getEdgeRing()===wt&&(At=Gt),Dt){case Tt._SCANNING_FOR_INCOMING:if(qt.getEdgeRing()!==wt)continue;Ot=qt,Dt=Tt._LINKING_TO_OUTGOING;break;case Tt._LINKING_TO_OUTGOING:if(Gt.getEdgeRing()!==wt)continue;Ot.setNextMin(Gt),Dt=Tt._SCANNING_FOR_INCOMING}}Dt===this._LINKING_TO_OUTGOING&&(_o.isTrue(At!==null,"found null for first outgoing dirEdge"),_o.isTrue(At.getEdgeRing()===wt,"unable to link last incoming dirEdge"),Ot.setNextMin(At))},bt.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var wt=0,Tt=this.iterator();Tt.hasNext();){var At=Tt.next();At.isInResult()&&wt++}return wt}if(arguments.length===1){for(var Ot=arguments[0],Dt=0,jt=this.iterator();jt.hasNext();){var Gt=jt.next();Gt.getEdgeRing()===Ot&&Dt++}return Dt}},bt.prototype.getLabel=function(){return this._label},bt.prototype.findCoveredLineEdges=function(){for(var wt=Ur.NONE,Tt=this.iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getSym();if(!At.isLineEdge()){if(At.isInResult()){wt=Ur.INTERIOR;break}if(Ot.isInResult()){wt=Ur.EXTERIOR;break}}}if(wt===Ur.NONE)return null;for(var Dt=wt,jt=this.iterator();jt.hasNext();){var Gt=jt.next(),qt=Gt.getSym();Gt.isLineEdge()?Gt.getEdge().setCovered(Dt===Ur.INTERIOR):(Gt.isInResult()&&(Dt=Ur.EXTERIOR),qt.isInResult()&&(Dt=Ur.INTERIOR))}},bt.prototype.computeLabelling=function(wt){vt.prototype.computeLabelling.call(this,wt),this._label=new bs(Ur.NONE);for(var Tt=this.iterator();Tt.hasNext();)for(var At=Tt.next().getEdge().getLabel(),Ot=0;Ot<2;Ot++){var Dt=At.getLocation(Ot);Dt!==Ur.INTERIOR&&Dt!==Ur.BOUNDARY||this._label.setLocation(Ot,Ur.INTERIOR)}},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(La),Ny=function(vt){function bt(){vt.apply(this,arguments)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.createNode=function(wt){return new om(wt,new l_)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Bf),_h=function vt(){this._pts=null,this._orientation=null;var bt=arguments[0];this._pts=bt,this._orientation=vt.orientation(bt)};_h.prototype.compareTo=function(vt){var bt=vt;return _h.compareOriented(this._pts,this._orientation,bt._pts,bt._orientation)},_h.prototype.interfaces_=function(){return[Jl]},_h.prototype.getClass=function(){return _h},_h.orientation=function(vt){return Po.increasingDirection(vt)===1},_h.compareOriented=function(vt,bt,wt,Tt){for(var At=bt?1:-1,Ot=Tt?1:-1,Dt=bt?vt.length:-1,jt=Tt?wt.length:-1,Gt=bt?0:vt.length-1,qt=Tt?0:wt.length-1;;){var en=vt[Gt].compareTo(wt[qt]);if(en!==0)return en;var Xt=(Gt+=At)===Dt,sn=(qt+=Ot)===jt;if(Xt&&!sn)return-1;if(!Xt&&sn)return 1;if(Xt&&sn)return 0}};var Il=function(){this._edges=new vi,this._ocaMap=new Ya};Il.prototype.print=function(vt){vt.print("MULTILINESTRING ( ");for(var bt=0;bt<this._edges.size();bt++){var wt=this._edges.get(bt);bt>0&&vt.print(","),vt.print("(");for(var Tt=wt.getCoordinates(),At=0;At<Tt.length;At++)At>0&&vt.print(","),vt.print(Tt[At].x+" "+Tt[At].y);vt.println(")")}vt.print(")  ")},Il.prototype.addAll=function(vt){for(var bt=vt.iterator();bt.hasNext();)this.add(bt.next())},Il.prototype.findEdgeIndex=function(vt){for(var bt=0;bt<this._edges.size();bt++)if(this._edges.get(bt).equals(vt))return bt;return-1},Il.prototype.iterator=function(){return this._edges.iterator()},Il.prototype.getEdges=function(){return this._edges},Il.prototype.get=function(vt){return this._edges.get(vt)},Il.prototype.findEqualEdge=function(vt){var bt=new _h(vt.getCoordinates());return this._ocaMap.get(bt)},Il.prototype.add=function(vt){this._edges.add(vt);var bt=new _h(vt.getCoordinates());this._ocaMap.put(bt,vt)},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il};var Qh=function(){};Qh.prototype.processIntersections=function(vt,bt,wt,Tt){},Qh.prototype.isDone=function(){},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var Ol=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var vt=arguments[0];this._li=vt};Ol.prototype.isTrivialIntersection=function(vt,bt,wt,Tt){if(vt===wt&&this._li.getIntersectionNum()===1){if(Ol.isAdjacentSegments(bt,Tt))return!0;if(vt.isClosed()){var At=vt.size()-1;if(bt===0&&Tt===At||Tt===0&&bt===At)return!0}}return!1},Ol.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ol.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ol.prototype.getLineIntersector=function(){return this._li},Ol.prototype.hasProperIntersection=function(){return this._hasProper},Ol.prototype.processIntersections=function(vt,bt,wt,Tt){if(vt===wt&&bt===Tt)return null;this.numTests++;var At=vt.getCoordinates()[bt],Ot=vt.getCoordinates()[bt+1],Dt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Ot,Dt,jt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(vt,bt,wt,Tt)||(this._hasIntersection=!0,vt.addIntersections(this._li,bt,0),wt.addIntersections(this._li,Tt,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Ol.prototype.hasIntersection=function(){return this._hasIntersection},Ol.prototype.isDone=function(){return!1},Ol.prototype.hasInteriorIntersection=function(){return this._hasInterior},Ol.prototype.interfaces_=function(){return[Qh]},Ol.prototype.getClass=function(){return Ol},Ol.isAdjacentSegments=function(vt,bt){return Math.abs(vt-bt)===1};var Yc=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var vt=arguments[0],bt=arguments[1],wt=arguments[2];this.coord=new Nr(vt),this.segmentIndex=bt,this.dist=wt};Yc.prototype.getSegmentIndex=function(){return this.segmentIndex},Yc.prototype.getCoordinate=function(){return this.coord},Yc.prototype.print=function(vt){vt.print(this.coord),vt.print(" seg # = "+this.segmentIndex),vt.println(" dist = "+this.dist)},Yc.prototype.compareTo=function(vt){var bt=vt;return this.compare(bt.segmentIndex,bt.dist)},Yc.prototype.isEndPoint=function(vt){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===vt},Yc.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Yc.prototype.getDistance=function(){return this.dist},Yc.prototype.compare=function(vt,bt){return this.segmentIndex<vt?-1:this.segmentIndex>vt?1:this.dist<bt?-1:this.dist>bt?1:0},Yc.prototype.interfaces_=function(){return[Jl]},Yc.prototype.getClass=function(){return Yc};var cs=function(){this._nodeMap=new Ya,this.edge=null;var vt=arguments[0];this.edge=vt};cs.prototype.print=function(vt){vt.println("Intersections:");for(var bt=this.iterator();bt.hasNext();)bt.next().print(vt)},cs.prototype.iterator=function(){return this._nodeMap.values().iterator()},cs.prototype.addSplitEdges=function(vt){this.addEndpoints();for(var bt=this.iterator(),wt=bt.next();bt.hasNext();){var Tt=bt.next(),At=this.createSplitEdge(wt,Tt);vt.add(At),wt=Tt}},cs.prototype.addEndpoints=function(){var vt=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[vt],vt,0)},cs.prototype.createSplitEdge=function(vt,bt){var wt=bt.segmentIndex-vt.segmentIndex+2,Tt=this.edge.pts[bt.segmentIndex],At=bt.dist>0||!bt.coord.equals2D(Tt);At||wt--;var Ot=new Array(wt).fill(null),Dt=0;Ot[Dt++]=new Nr(vt.coord);for(var jt=vt.segmentIndex+1;jt<=bt.segmentIndex;jt++)Ot[Dt++]=this.edge.pts[jt];return At&&(Ot[Dt]=bt.coord),new jf(Ot,new bs(this.edge._label))},cs.prototype.add=function(vt,bt,wt){var Tt=new Yc(vt,bt,wt),At=this._nodeMap.get(Tt);return At!==null?At:(this._nodeMap.put(Tt,Tt),Tt)},cs.prototype.isIntersection=function(vt){for(var bt=this.iterator();bt.hasNext();)if(bt.next().coord.equals(vt))return!0;return!1},cs.prototype.interfaces_=function(){return[]},cs.prototype.getClass=function(){return cs};var bh=function(){};bh.prototype.getChainStartIndices=function(vt){var bt=0,wt=new vi;wt.add(new zc(bt));do{var Tt=this.findChainEnd(vt,bt);wt.add(new zc(Tt)),bt=Tt}while(bt<vt.length-1);return bh.toIntArray(wt)},bh.prototype.findChainEnd=function(vt,bt){for(var wt=xs.quadrant(vt[bt],vt[bt+1]),Tt=bt+1;Tt<vt.length&&xs.quadrant(vt[Tt-1],vt[Tt])===wt;)Tt++;return Tt-1},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh},bh.toIntArray=function(vt){for(var bt=new Array(vt.size()).fill(null),wt=0;wt<bt.length;wt++)bt[wt]=vt.get(wt).intValue();return bt};var pa=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ui,this.env2=new Ui;var vt=arguments[0];this.e=vt,this.pts=vt.getCoordinates();var bt=new bh;this.startIndex=bt.getChainStartIndices(this.pts)};pa.prototype.getCoordinates=function(){return this.pts},pa.prototype.getMaxX=function(vt){var bt=this.pts[this.startIndex[vt]].x,wt=this.pts[this.startIndex[vt+1]].x;return bt>wt?bt:wt},pa.prototype.getMinX=function(vt){var bt=this.pts[this.startIndex[vt]].x,wt=this.pts[this.startIndex[vt+1]].x;return bt<wt?bt:wt},pa.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var vt=arguments[0],bt=arguments[1],wt=arguments[2],Tt=arguments[3];this.computeIntersectsForChain(this.startIndex[vt],this.startIndex[vt+1],bt,bt.startIndex[wt],bt.startIndex[wt+1],Tt)}else if(arguments.length===6){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],jt=arguments[3],Gt=arguments[4],qt=arguments[5],en=this.pts[At],Xt=this.pts[Ot],sn=Dt.pts[jt],yn=Dt.pts[Gt];if(Ot-At==1&&Gt-jt==1)return qt.addIntersections(this.e,At,Dt.e,jt),null;if(this.env1.init(en,Xt),this.env2.init(sn,yn),!this.env1.intersects(this.env2))return null;var vn=Math.trunc((At+Ot)/2),Sn=Math.trunc((jt+Gt)/2);At<vn&&(jt<Sn&&this.computeIntersectsForChain(At,vn,Dt,jt,Sn,qt),Sn<Gt&&this.computeIntersectsForChain(At,vn,Dt,Sn,Gt,qt)),vn<Ot&&(jt<Sn&&this.computeIntersectsForChain(vn,Ot,Dt,jt,Sn,qt),Sn<Gt&&this.computeIntersectsForChain(vn,Ot,Dt,Sn,Gt,qt))}},pa.prototype.getStartIndexes=function(){return this.startIndex},pa.prototype.computeIntersects=function(vt,bt){for(var wt=0;wt<this.startIndex.length-1;wt++)for(var Tt=0;Tt<vt.startIndex.length-1;Tt++)this.computeIntersectsForChain(wt,vt,Tt,bt)},pa.prototype.interfaces_=function(){return[]},pa.prototype.getClass=function(){return pa};var ra=function vt(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var bt=0;bt<2;bt++)for(var wt=0;wt<3;wt++)this._depth[bt][wt]=vt.NULL_VALUE},vu={NULL_VALUE:{configurable:!0}};ra.prototype.getDepth=function(vt,bt){return this._depth[vt][bt]},ra.prototype.setDepth=function(vt,bt,wt){this._depth[vt][bt]=wt},ra.prototype.isNull=function(){var vt=this;if(arguments.length===0){for(var bt=0;bt<2;bt++)for(var wt=0;wt<3;wt++)if(vt._depth[bt][wt]!==ra.NULL_VALUE)return!1;return!0}if(arguments.length===1){var Tt=arguments[0];return this._depth[Tt][1]===ra.NULL_VALUE}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return this._depth[At][Ot]===ra.NULL_VALUE}},ra.prototype.normalize=function(){for(var vt=this,bt=0;bt<2;bt++)if(!vt.isNull(bt)){var wt=vt._depth[bt][1];vt._depth[bt][2]<wt&&(wt=vt._depth[bt][2]),wt<0&&(wt=0);for(var Tt=1;Tt<3;Tt++){var At=0;vt._depth[bt][Tt]>wt&&(At=1),vt._depth[bt][Tt]=At}}},ra.prototype.getDelta=function(vt){return this._depth[vt][mi.RIGHT]-this._depth[vt][mi.LEFT]},ra.prototype.getLocation=function(vt,bt){return this._depth[vt][bt]<=0?Ur.EXTERIOR:Ur.INTERIOR},ra.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ra.prototype.add=function(){var vt=this;if(arguments.length===1)for(var bt=arguments[0],wt=0;wt<2;wt++)for(var Tt=1;Tt<3;Tt++){var At=bt.getLocation(wt,Tt);At!==Ur.EXTERIOR&&At!==Ur.INTERIOR||(vt.isNull(wt,Tt)?vt._depth[wt][Tt]=ra.depthAtLocation(At):vt._depth[wt][Tt]+=ra.depthAtLocation(At))}else if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],jt=arguments[2];jt===Ur.INTERIOR&&this._depth[Ot][Dt]++}},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra},ra.depthAtLocation=function(vt){return vt===Ur.EXTERIOR?0:vt===Ur.INTERIOR?1:ra.NULL_VALUE},vu.NULL_VALUE.get=function(){return-1},Object.defineProperties(ra,vu);var jf=function(vt){function bt(){if(vt.call(this),this.pts=null,this._env=null,this.eiList=new cs(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ra,this._depthDelta=0,arguments.length===1){var wt=arguments[0];bt.call(this,wt,null)}else if(arguments.length===2){var Tt=arguments[0],At=arguments[1];this.pts=Tt,this._label=At}}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.getDepth=function(){return this._depth},bt.prototype.getCollapsedEdge=function(){var wt=new Array(2).fill(null);return wt[0]=this.pts[0],wt[1]=this.pts[1],new bt(wt,bs.toLineLabel(this._label))},bt.prototype.isIsolated=function(){return this._isIsolated},bt.prototype.getCoordinates=function(){return this.pts},bt.prototype.setIsolated=function(wt){this._isIsolated=wt},bt.prototype.setName=function(wt){this._name=wt},bt.prototype.equals=function(wt){if(!(wt instanceof bt))return!1;var Tt=wt;if(this.pts.length!==Tt.pts.length)return!1;for(var At=!0,Ot=!0,Dt=this.pts.length,jt=0;jt<this.pts.length;jt++)if(this.pts[jt].equals2D(Tt.pts[jt])||(At=!1),this.pts[jt].equals2D(Tt.pts[--Dt])||(Ot=!1),!At&&!Ot)return!1;return!0},bt.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var wt=arguments[0];return this.pts[wt]}},bt.prototype.print=function(wt){wt.print("edge "+this._name+": "),wt.print("LINESTRING (");for(var Tt=0;Tt<this.pts.length;Tt++)Tt>0&&wt.print(","),wt.print(this.pts[Tt].x+" "+this.pts[Tt].y);wt.print(")  "+this._label+" "+this._depthDelta)},bt.prototype.computeIM=function(wt){bt.updateIM(this._label,wt)},bt.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},bt.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},bt.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},bt.prototype.getDepthDelta=function(){return this._depthDelta},bt.prototype.getNumPoints=function(){return this.pts.length},bt.prototype.printReverse=function(wt){wt.print("edge "+this._name+": ");for(var Tt=this.pts.length-1;Tt>=0;Tt--)wt.print(this.pts[Tt]+" ");wt.println("")},bt.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new pa(this)),this._mce},bt.prototype.getEnvelope=function(){if(this._env===null){this._env=new Ui;for(var wt=0;wt<this.pts.length;wt++)this._env.expandToInclude(this.pts[wt])}return this._env},bt.prototype.addIntersection=function(wt,Tt,At,Ot){var Dt=new Nr(wt.getIntersection(Ot)),jt=Tt,Gt=wt.getEdgeDistance(At,Ot),qt=jt+1;if(qt<this.pts.length){var en=this.pts[qt];Dt.equals2D(en)&&(jt=qt,Gt=0)}this.eiList.add(Dt,jt,Gt)},bt.prototype.toString=function(){var wt=new Fc;wt.append("edge "+this._name+": "),wt.append("LINESTRING (");for(var Tt=0;Tt<this.pts.length;Tt++)Tt>0&&wt.append(","),wt.append(this.pts[Tt].x+" "+this.pts[Tt].y);return wt.append(")  "+this._label+" "+this._depthDelta),wt.toString()},bt.prototype.isPointwiseEqual=function(wt){if(this.pts.length!==wt.pts.length)return!1;for(var Tt=0;Tt<this.pts.length;Tt++)if(!this.pts[Tt].equals2D(wt.pts[Tt]))return!1;return!0},bt.prototype.setDepthDelta=function(wt){this._depthDelta=wt},bt.prototype.getEdgeIntersectionList=function(){return this.eiList},bt.prototype.addIntersections=function(wt,Tt,At){for(var Ot=0;Ot<wt.getIntersectionNum();Ot++)this.addIntersection(wt,Tt,At,Ot)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.updateIM=function(){if(arguments.length!==2)return vt.prototype.updateIM.apply(this,arguments);var wt=arguments[0],Tt=arguments[1];Tt.setAtLeastIfValid(wt.getLocation(0,mi.ON),wt.getLocation(1,mi.ON),1),wt.isArea()&&(Tt.setAtLeastIfValid(wt.getLocation(0,mi.LEFT),wt.getLocation(1,mi.LEFT),2),Tt.setAtLeastIfValid(wt.getLocation(0,mi.RIGHT),wt.getLocation(1,mi.RIGHT),2))},bt}(Ll),Pa=function(vt){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Il,this._bufParams=vt||null};Pa.prototype.setWorkingPrecisionModel=function(vt){this._workingPrecisionModel=vt},Pa.prototype.insertUniqueEdge=function(vt){var bt=this._edgeList.findEqualEdge(vt);if(bt!==null){var wt=bt.getLabel(),Tt=vt.getLabel();bt.isPointwiseEqual(vt)||(Tt=new bs(vt.getLabel())).flip(),wt.merge(Tt);var At=Pa.depthDelta(Tt),Ot=bt.getDepthDelta()+At;bt.setDepthDelta(Ot)}else this._edgeList.add(vt),vt.setDepthDelta(Pa.depthDelta(vt.getLabel()))},Pa.prototype.buildSubgraphs=function(vt,bt){for(var wt=new vi,Tt=vt.iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getRightmostCoordinate(),Dt=new Bd(wt).getDepth(Ot);At.computeDepth(Dt),At.findResultEdges(),wt.add(At),bt.add(At.getDirectedEdges(),At.getNodes())}},Pa.prototype.createSubgraphs=function(vt){for(var bt=new vi,wt=vt.getNodes().iterator();wt.hasNext();){var Tt=wt.next();if(!Tt.isVisited()){var At=new Xa;At.create(Tt),bt.add(At)}}return Cc.sort(bt,Cc.reverseOrder()),bt},Pa.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Pa.prototype.getNoder=function(vt){if(this._workingNoder!==null)return this._workingNoder;var bt=new D0,wt=new ph;return wt.setPrecisionModel(vt),bt.setSegmentIntersector(new Ol(wt)),bt},Pa.prototype.buffer=function(vt,bt){var wt=this._workingPrecisionModel;wt===null&&(wt=vt.getPrecisionModel()),this._geomFact=vt.getFactory();var Tt=new Wi(wt,this._bufParams),At=new yl(vt,bt,Tt).getCurves();if(At.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(At,wt),this._graph=new Fs(new Ny),this._graph.addEdges(this._edgeList.getEdges());var Ot=this.createSubgraphs(this._graph),Dt=new gl(this._geomFact);this.buildSubgraphs(Ot,Dt);var jt=Dt.getPolygons();return jt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(jt)},Pa.prototype.computeNodedEdges=function(vt,bt){var wt=this.getNoder(bt);wt.computeNodes(vt);for(var Tt=wt.getNodedSubstrings().iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getCoordinates();if(Ot.length!==2||!Ot[0].equals2D(Ot[1])){var Dt=At.getData(),jt=new jf(At.getCoordinates(),new bs(Dt));this.insertUniqueEdge(jt)}}},Pa.prototype.setNoder=function(vt){this._workingNoder=vt},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa},Pa.depthDelta=function(vt){var bt=vt.getLocation(0,mi.LEFT),wt=vt.getLocation(0,mi.RIGHT);return bt===Ur.INTERIOR&&wt===Ur.EXTERIOR?1:bt===Ur.EXTERIOR&&wt===Ur.INTERIOR?-1:0},Pa.convertSegStrings=function(vt){for(var bt=new Io,wt=new vi;vt.hasNext();){var Tt=vt.next(),At=bt.createLineString(Tt.getCoordinates());wt.add(At)}return bt.buildGeometry(wt)};var xh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var vt=arguments[0],bt=arguments[1];this._noder=vt,this._scaleFactor=bt,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var wt=arguments[0],Tt=arguments[1],At=arguments[2],Ot=arguments[3];this._noder=wt,this._scaleFactor=Tt,this._offsetX=At,this._offsetY=Ot,this._isScaled=!this.isIntegerPrecision()}};xh.prototype.rescale=function(){var vt=this;if(ro(arguments[0],ha))for(var bt=arguments[0],wt=bt.iterator();wt.hasNext();){var Tt=wt.next();vt.rescale(Tt.getCoordinates())}else if(arguments[0]instanceof Array){for(var At=arguments[0],Ot=0;Ot<At.length;Ot++)At[Ot].x=At[Ot].x/vt._scaleFactor+vt._offsetX,At[Ot].y=At[Ot].y/vt._scaleFactor+vt._offsetY;At.length===2&&At[0].equals2D(At[1])&&za.out.println(At)}},xh.prototype.scale=function(){var vt=this;if(ro(arguments[0],ha)){for(var bt=arguments[0],wt=new vi,Tt=bt.iterator();Tt.hasNext();){var At=Tt.next();wt.add(new Us(vt.scale(At.getCoordinates()),At.getData()))}return wt}if(arguments[0]instanceof Array){for(var Ot=arguments[0],Dt=new Array(Ot.length).fill(null),jt=0;jt<Ot.length;jt++)Dt[jt]=new Nr(Math.round((Ot[jt].x-vt._offsetX)*vt._scaleFactor),Math.round((Ot[jt].y-vt._offsetY)*vt._scaleFactor),Ot[jt].z);var Gt=Po.removeRepeatedPoints(Dt);return Gt}},xh.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},xh.prototype.getNodedSubstrings=function(){var vt=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(vt),vt},xh.prototype.computeNodes=function(vt){var bt=vt;this._isScaled&&(bt=this.scale(vt)),this._noder.computeNodes(bt)},xh.prototype.interfaces_=function(){return[Zh]},xh.prototype.getClass=function(){return xh};var zl=function(){this._li=new ph,this._segStrings=null;var vt=arguments[0];this._segStrings=vt},Fd={fact:{configurable:!0}};zl.prototype.checkEndPtVertexIntersections=function(){var vt=this;if(arguments.length===0)for(var bt=this._segStrings.iterator();bt.hasNext();){var wt=bt.next(),Tt=wt.getCoordinates();vt.checkEndPtVertexIntersections(Tt[0],vt._segStrings),vt.checkEndPtVertexIntersections(Tt[Tt.length-1],vt._segStrings)}else if(arguments.length===2){for(var At=arguments[0],Ot=arguments[1],Dt=Ot.iterator();Dt.hasNext();)for(var jt=Dt.next(),Gt=jt.getCoordinates(),qt=1;qt<Gt.length-1;qt++)if(Gt[qt].equals(At))throw new Ru("found endpt/interior pt intersection at index "+qt+" :pt "+At)}},zl.prototype.checkInteriorIntersections=function(){var vt=this;if(arguments.length===0)for(var bt=this._segStrings.iterator();bt.hasNext();)for(var wt=bt.next(),Tt=this._segStrings.iterator();Tt.hasNext();){var At=Tt.next();vt.checkInteriorIntersections(wt,At)}else if(arguments.length===2)for(var Ot=arguments[0],Dt=arguments[1],jt=Ot.getCoordinates(),Gt=Dt.getCoordinates(),qt=0;qt<jt.length-1;qt++)for(var en=0;en<Gt.length-1;en++)vt.checkInteriorIntersections(Ot,qt,Dt,en);else if(arguments.length===4){var Xt=arguments[0],sn=arguments[1],yn=arguments[2],vn=arguments[3];if(Xt===yn&&sn===vn)return null;var Sn=Xt.getCoordinates()[sn],fn=Xt.getCoordinates()[sn+1],Dn=yn.getCoordinates()[vn],rr=yn.getCoordinates()[vn+1];if(this._li.computeIntersection(Sn,fn,Dn,rr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Sn,fn)||this.hasInteriorIntersection(this._li,Dn,rr)))throw new Ru("found non-noded intersection at "+Sn+"-"+fn+" and "+Dn+"-"+rr)}},zl.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},zl.prototype.checkCollapses=function(){var vt=this;if(arguments.length===0)for(var bt=this._segStrings.iterator();bt.hasNext();){var wt=bt.next();vt.checkCollapses(wt)}else if(arguments.length===1)for(var Tt=arguments[0],At=Tt.getCoordinates(),Ot=0;Ot<At.length-2;Ot++)vt.checkCollapse(At[Ot],At[Ot+1],At[Ot+2])},zl.prototype.hasInteriorIntersection=function(vt,bt,wt){for(var Tt=0;Tt<vt.getIntersectionNum();Tt++){var At=vt.getIntersection(Tt);if(!At.equals(bt)&&!At.equals(wt))return!0}return!1},zl.prototype.checkCollapse=function(vt,bt,wt){if(vt.equals(wt))throw new Ru("found non-noded collapse at "+zl.fact.createLineString([vt,bt,wt]))},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},Fd.fact.get=function(){return new Io},Object.defineProperties(zl,Fd);var il=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var vt=arguments[0],bt=arguments[1],wt=arguments[2];if(this._originalPt=vt,this._pt=vt,this._scaleFactor=bt,this._li=wt,bt<=0)throw new Ns("Scale factor must be non-zero");bt!==1&&(this._pt=new Nr(this.scale(vt.x),this.scale(vt.y)),this._p0Scaled=new Nr,this._p1Scaled=new Nr),this.initCorners(this._pt)},Hl={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};il.prototype.intersectsScaled=function(vt,bt){var wt=Math.min(vt.x,bt.x),Tt=Math.max(vt.x,bt.x),At=Math.min(vt.y,bt.y),Ot=Math.max(vt.y,bt.y),Dt=this._maxx<wt||this._minx>Tt||this._maxy<At||this._miny>Ot;if(Dt)return!1;var jt=this.intersectsToleranceSquare(vt,bt);return _o.isTrue(!(Dt&&jt),"Found bad envelope test"),jt},il.prototype.initCorners=function(vt){var bt=.5;this._minx=vt.x-bt,this._maxx=vt.x+bt,this._miny=vt.y-bt,this._maxy=vt.y+bt,this._corner[0]=new Nr(this._maxx,this._maxy),this._corner[1]=new Nr(this._minx,this._maxy),this._corner[2]=new Nr(this._minx,this._miny),this._corner[3]=new Nr(this._maxx,this._miny)},il.prototype.intersects=function(vt,bt){return this._scaleFactor===1?this.intersectsScaled(vt,bt):(this.copyScaled(vt,this._p0Scaled),this.copyScaled(bt,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},il.prototype.scale=function(vt){return Math.round(vt*this._scaleFactor)},il.prototype.getCoordinate=function(){return this._originalPt},il.prototype.copyScaled=function(vt,bt){bt.x=this.scale(vt.x),bt.y=this.scale(vt.y)},il.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var vt=il.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ui(this._originalPt.x-vt,this._originalPt.x+vt,this._originalPt.y-vt,this._originalPt.y+vt)}return this._safeEnv},il.prototype.intersectsPixelClosure=function(vt,bt){return this._li.computeIntersection(vt,bt,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,bt,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,bt,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(vt,bt,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},il.prototype.intersectsToleranceSquare=function(vt,bt){var wt=!1,Tt=!1;return this._li.computeIntersection(vt,bt,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(vt,bt,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(wt=!0),this._li.computeIntersection(vt,bt,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(Tt=!0),this._li.computeIntersection(vt,bt,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!wt||!Tt)||!!vt.equals(this._pt)||!!bt.equals(this._pt))))},il.prototype.addSnappedNode=function(vt,bt){var wt=vt.getCoordinate(bt),Tt=vt.getCoordinate(bt+1);return!!this.intersects(wt,Tt)&&(vt.addIntersection(this.getCoordinate(),bt),!0)},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},Hl.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(il,Hl);var ia=function(){this.tempEnv1=new Ui,this.selectedSegment=new Vi};ia.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var vt=arguments[0],bt=arguments[1];vt.getLineSegment(bt,this.selectedSegment),this.select(this.selectedSegment)}}},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia};var _u=function(){this._index=null;var vt=arguments[0];this._index=vt},Jp={HotPixelSnapAction:{configurable:!0}};_u.prototype.snap=function(){if(arguments.length===1){var vt=arguments[0];return this.snap(vt,null,-1)}if(arguments.length===3){var bt=arguments[0],wt=arguments[1],Tt=arguments[2],At=bt.getSafeEnvelope(),Ot=new Vf(bt,wt,Tt);return this._index.query(At,{interfaces_:function(){return[yh]},visitItem:function(Dt){Dt.select(At,Ot)}}),Ot.isNodeAdded()}},_u.prototype.interfaces_=function(){return[]},_u.prototype.getClass=function(){return _u},Jp.HotPixelSnapAction.get=function(){return Vf},Object.defineProperties(_u,Jp);var Vf=function(vt){function bt(){vt.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._hotPixel=wt,this._parentEdge=Tt,this._hotPixelVertexIndex=At}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.isNodeAdded=function(){return this._isNodeAdded},bt.prototype.select=function(){if(arguments.length!==2)return vt.prototype.select.apply(this,arguments);var wt=arguments[0],Tt=arguments[1],At=wt.getContext();if(this._parentEdge!==null&&At===this._parentEdge&&Tt===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(At,Tt)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(ia),zd=function(){this._li=null,this._interiorIntersections=null;var vt=arguments[0];this._li=vt,this._interiorIntersections=new vi};zd.prototype.processIntersections=function(vt,bt,wt,Tt){if(vt===wt&&bt===Tt)return null;var At=vt.getCoordinates()[bt],Ot=vt.getCoordinates()[bt+1],Dt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];if(this._li.computeIntersection(At,Ot,Dt,jt),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Gt=0;Gt<this._li.getIntersectionNum();Gt++)this._interiorIntersections.add(this._li.getIntersection(Gt));vt.addIntersections(this._li,bt,0),wt.addIntersections(this._li,Tt,1)}},zd.prototype.isDone=function(){return!1},zd.prototype.getInteriorIntersections=function(){return this._interiorIntersections},zd.prototype.interfaces_=function(){return[Qh]},zd.prototype.getClass=function(){return zd};var bu=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var vt=arguments[0];this._pm=vt,this._li=new ph,this._li.setPrecisionModel(vt),this._scaleFactor=vt.getScale()};bu.prototype.checkCorrectness=function(vt){var bt=Us.getNodedSubstrings(vt),wt=new zl(bt);try{wt.checkValid()}catch(Tt){if(!(Tt instanceof vy))throw Tt;Tt.printStackTrace()}},bu.prototype.getNodedSubstrings=function(){return Us.getNodedSubstrings(this._nodedSegStrings)},bu.prototype.snapRound=function(vt,bt){var wt=this.findInteriorIntersections(vt,bt);this.computeIntersectionSnaps(wt),this.computeVertexSnaps(vt)},bu.prototype.findInteriorIntersections=function(vt,bt){var wt=new zd(bt);return this._noder.setSegmentIntersector(wt),this._noder.computeNodes(vt),wt.getInteriorIntersections()},bu.prototype.computeVertexSnaps=function(){var vt=this;if(ro(arguments[0],ha))for(var bt=arguments[0],wt=bt.iterator();wt.hasNext();){var Tt=wt.next();vt.computeVertexSnaps(Tt)}else if(arguments[0]instanceof Us)for(var At=arguments[0],Ot=At.getCoordinates(),Dt=0;Dt<Ot.length;Dt++){var jt=new il(Ot[Dt],vt._scaleFactor,vt._li),Gt=vt._pointSnapper.snap(jt,At,Dt);Gt&&At.addIntersection(Ot[Dt],Dt)}},bu.prototype.computeNodes=function(vt){this._nodedSegStrings=vt,this._noder=new D0,this._pointSnapper=new _u(this._noder.getIndex()),this.snapRound(vt,this._li)},bu.prototype.computeIntersectionSnaps=function(vt){for(var bt=this,wt=vt.iterator();wt.hasNext();){var Tt=wt.next(),At=new il(Tt,bt._scaleFactor,bt._li);bt._pointSnapper.snap(At)}},bu.prototype.interfaces_=function(){return[Zh]},bu.prototype.getClass=function(){return bu};var Cs=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new gs,this._resultGeometry=null,this._saveException=null,arguments.length===1){var vt=arguments[0];this._argGeom=vt}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];this._argGeom=bt,this._bufParams=wt}},jl={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Cs.prototype.bufferFixedPrecision=function(vt){var bt=new xh(new bu(new ps(1)),vt.getScale()),wt=new Pa(this._bufParams);wt.setWorkingPrecisionModel(vt),wt.setNoder(bt),this._resultGeometry=wt.buffer(this._argGeom,this._distance)},Cs.prototype.bufferReducedPrecision=function(){var vt=this;if(arguments.length===0){for(var bt=Cs.MAX_PRECISION_DIGITS;bt>=0;bt--){try{vt.bufferReducedPrecision(bt)}catch(Ot){if(!(Ot instanceof Du))throw Ot;vt._saveException=Ot}if(vt._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var wt=arguments[0],Tt=Cs.precisionScaleFactor(this._argGeom,this._distance,wt),At=new ps(Tt);this.bufferFixedPrecision(At)}},Cs.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var vt=this._argGeom.getFactory().getPrecisionModel();vt.getType()===ps.FIXED?this.bufferFixedPrecision(vt):this.bufferReducedPrecision()},Cs.prototype.setQuadrantSegments=function(vt){this._bufParams.setQuadrantSegments(vt)},Cs.prototype.bufferOriginalPrecision=function(){try{var vt=new Pa(this._bufParams);this._resultGeometry=vt.buffer(this._argGeom,this._distance)}catch(bt){if(!(bt instanceof Ru))throw bt;this._saveException=bt}},Cs.prototype.getResultGeometry=function(vt){return this._distance=vt,this.computeGeometry(),this._resultGeometry},Cs.prototype.setEndCapStyle=function(vt){this._bufParams.setEndCapStyle(vt)},Cs.prototype.interfaces_=function(){return[]},Cs.prototype.getClass=function(){return Cs},Cs.bufferOp=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1],wt=new Cs(vt),Tt=wt.getResultGeometry(bt);return Tt}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof to&&typeof arguments[1]=="number"){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],jt=new Cs(At);jt.setQuadrantSegments(Dt);var Gt=jt.getResultGeometry(Ot);return Gt}if(arguments[2]instanceof gs&&arguments[0]instanceof to&&typeof arguments[1]=="number"){var qt=arguments[0],en=arguments[1],Xt=arguments[2],sn=new Cs(qt,Xt),yn=sn.getResultGeometry(en);return yn}}else if(arguments.length===4){var vn=arguments[0],Sn=arguments[1],fn=arguments[2],Dn=arguments[3],rr=new Cs(vn);rr.setQuadrantSegments(fn),rr.setEndCapStyle(Dn);var bn=rr.getResultGeometry(Sn);return bn}},Cs.precisionScaleFactor=function(vt,bt,wt){var Tt=vt.getEnvelopeInternal(),At=Bl.max(Math.abs(Tt.getMaxX()),Math.abs(Tt.getMaxY()),Math.abs(Tt.getMinX()),Math.abs(Tt.getMinY()))+2*(bt>0?bt:0),Ot=wt-Math.trunc(Math.log(At)/Math.log(10)+1);return Math.pow(10,Ot)},jl.CAP_ROUND.get=function(){return gs.CAP_ROUND},jl.CAP_BUTT.get=function(){return gs.CAP_FLAT},jl.CAP_FLAT.get=function(){return gs.CAP_FLAT},jl.CAP_SQUARE.get=function(){return gs.CAP_SQUARE},jl.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Cs,jl);var Ia=function(){this._pt=[new Nr,new Nr],this._distance=po.NaN,this._isNull=!0};Ia.prototype.getCoordinates=function(){return this._pt},Ia.prototype.getCoordinate=function(vt){return this._pt[vt]},Ia.prototype.setMinimum=function(){if(arguments.length===1){var vt=arguments[0];this.setMinimum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(bt,wt),null;var Tt=bt.distance(wt);Tt<this._distance&&this.initialize(bt,wt,Tt)}},Ia.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var vt=arguments[0],bt=arguments[1];this._pt[0].setCoordinate(vt),this._pt[1].setCoordinate(bt),this._distance=vt.distance(bt),this._isNull=!1}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._pt[0].setCoordinate(wt),this._pt[1].setCoordinate(Tt),this._distance=At,this._isNull=!1}},Ia.prototype.getDistance=function(){return this._distance},Ia.prototype.setMaximum=function(){if(arguments.length===1){var vt=arguments[0];this.setMaximum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(bt,wt),null;var Tt=bt.distance(wt);Tt>this._distance&&this.initialize(bt,wt,Tt)}},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia};var Vl=function(){};Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.computeDistance=function(){if(arguments[2]instanceof Ia&&arguments[0]instanceof Ds&&arguments[1]instanceof Nr)for(var vt=arguments[0],bt=arguments[1],wt=arguments[2],Tt=vt.getCoordinates(),At=new Vi,Ot=0;Ot<Tt.length-1;Ot++){At.setCoordinates(Tt[Ot],Tt[Ot+1]);var Dt=At.closestPoint(bt);wt.setMinimum(Dt,bt)}else if(arguments[2]instanceof Ia&&arguments[0]instanceof da&&arguments[1]instanceof Nr){var jt=arguments[0],Gt=arguments[1],qt=arguments[2];Vl.computeDistance(jt.getExteriorRing(),Gt,qt);for(var en=0;en<jt.getNumInteriorRing();en++)Vl.computeDistance(jt.getInteriorRingN(en),Gt,qt)}else if(arguments[2]instanceof Ia&&arguments[0]instanceof to&&arguments[1]instanceof Nr){var Xt=arguments[0],sn=arguments[1],yn=arguments[2];if(Xt instanceof Ds)Vl.computeDistance(Xt,sn,yn);else if(Xt instanceof da)Vl.computeDistance(Xt,sn,yn);else if(Xt instanceof rl)for(var vn=Xt,Sn=0;Sn<vn.getNumGeometries();Sn++){var fn=vn.getGeometryN(Sn);Vl.computeDistance(fn,sn,yn)}else yn.setMinimum(Xt.getCoordinate(),sn)}else if(arguments[2]instanceof Ia&&arguments[0]instanceof Vi&&arguments[1]instanceof Nr){var Dn=arguments[0],rr=arguments[1],bn=arguments[2],Nn=Dn.closestPoint(rr);bn.setMinimum(Nn,rr)}};var Xc=function(vt){this._maxPtDist=new Ia,this._inputGeom=vt||null},um={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Xc.prototype.computeMaxMidpointDistance=function(vt){var bt=new xu(this._inputGeom);vt.apply(bt),this._maxPtDist.setMaximum(bt.getMaxPointDistance())},Xc.prototype.computeMaxVertexDistance=function(vt){var bt=new ed(this._inputGeom);vt.apply(bt),this._maxPtDist.setMaximum(bt.getMaxPointDistance())},Xc.prototype.findDistance=function(vt){return this.computeMaxVertexDistance(vt),this.computeMaxMidpointDistance(vt),this._maxPtDist.getDistance()},Xc.prototype.getDistancePoints=function(){return this._maxPtDist},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc},um.MaxPointDistanceFilter.get=function(){return ed},um.MaxMidpointDistanceFilter.get=function(){return xu},Object.defineProperties(Xc,um);var ed=function(vt){this._maxPtDist=new Ia,this._minPtDist=new Ia,this._geom=vt||null};ed.prototype.filter=function(vt){this._minPtDist.initialize(),Vl.computeDistance(this._geom,vt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ed.prototype.getMaxPointDistance=function(){return this._maxPtDist},ed.prototype.interfaces_=function(){return[hu]},ed.prototype.getClass=function(){return ed};var xu=function(vt){this._maxPtDist=new Ia,this._minPtDist=new Ia,this._geom=vt||null};xu.prototype.filter=function(vt,bt){if(bt===0)return null;var wt=vt.getCoordinate(bt-1),Tt=vt.getCoordinate(bt),At=new Nr((wt.x+Tt.x)/2,(wt.y+Tt.y)/2);this._minPtDist.initialize(),Vl.computeDistance(this._geom,At,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xu.prototype.isDone=function(){return!1},xu.prototype.isGeometryChanged=function(){return!1},xu.prototype.getMaxPointDistance=function(){return this._maxPtDist},xu.prototype.interfaces_=function(){return[bc]},xu.prototype.getClass=function(){return xu};var Bu=function(vt){this._comps=vt||null};Bu.prototype.filter=function(vt){vt instanceof da&&this._comps.add(vt)},Bu.prototype.interfaces_=function(){return[Vc]},Bu.prototype.getClass=function(){return Bu},Bu.getPolygons=function(){if(arguments.length===1){var vt=arguments[0];return Bu.getPolygons(vt,new vi)}if(arguments.length===2){var bt=arguments[0],wt=arguments[1];return bt instanceof da?wt.add(bt):bt instanceof rl&&bt.apply(new Bu(wt)),wt}};var Ha=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var vt=arguments[0];this._lines=vt}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];this._lines=bt,this._isForcedToLineString=wt}};Ha.prototype.filter=function(vt){if(this._isForcedToLineString&&vt instanceof pu){var bt=vt.getFactory().createLineString(vt.getCoordinateSequence());return this._lines.add(bt),null}vt instanceof Ds&&this._lines.add(vt)},Ha.prototype.setForceToLineString=function(vt){this._isForcedToLineString=vt},Ha.prototype.interfaces_=function(){return[cu]},Ha.prototype.getClass=function(){return Ha},Ha.getGeometry=function(){if(arguments.length===1){var vt=arguments[0];return vt.getFactory().buildGeometry(Ha.getLines(vt))}if(arguments.length===2){var bt=arguments[0],wt=arguments[1];return bt.getFactory().buildGeometry(Ha.getLines(bt,wt))}},Ha.getLines=function(){if(arguments.length===1){var vt=arguments[0];return Ha.getLines(vt,!1)}if(arguments.length===2){if(ro(arguments[0],ha)&&ro(arguments[1],ha)){for(var bt=arguments[0],wt=arguments[1],Tt=bt.iterator();Tt.hasNext();){var At=Tt.next();Ha.getLines(At,wt)}return wt}if(arguments[0]instanceof to&&typeof arguments[1]=="boolean"){var Ot=arguments[0],Dt=arguments[1],jt=new vi;return Ot.apply(new Ha(jt,Dt)),jt}if(arguments[0]instanceof to&&ro(arguments[1],ha)){var Gt=arguments[0],qt=arguments[1];return Gt instanceof Ds?qt.add(Gt):Gt.apply(new Ha(qt)),qt}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&ro(arguments[0],ha)&&ro(arguments[1],ha)){for(var en=arguments[0],Xt=arguments[1],sn=arguments[2],yn=en.iterator();yn.hasNext();){var vn=yn.next();Ha.getLines(vn,Xt,sn)}return Xt}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof to&&ro(arguments[1],ha)){var Sn=arguments[0],fn=arguments[1],Dn=arguments[2];return Sn.apply(new Ha(fn,Dn)),fn}}};var Ul=function(){if(this._boundaryRule=tc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var vt=arguments[0];if(vt===null)throw new Ns("Rule must be non-null");this._boundaryRule=vt}}};Ul.prototype.locateInternal=function(){var vt=this;if(arguments[0]instanceof Nr&&arguments[1]instanceof da){var bt=arguments[0],wt=arguments[1];if(wt.isEmpty())return Ur.EXTERIOR;var Tt=wt.getExteriorRing(),At=this.locateInPolygonRing(bt,Tt);if(At===Ur.EXTERIOR)return Ur.EXTERIOR;if(At===Ur.BOUNDARY)return Ur.BOUNDARY;for(var Ot=0;Ot<wt.getNumInteriorRing();Ot++){var Dt=wt.getInteriorRingN(Ot),jt=vt.locateInPolygonRing(bt,Dt);if(jt===Ur.INTERIOR)return Ur.EXTERIOR;if(jt===Ur.BOUNDARY)return Ur.BOUNDARY}return Ur.INTERIOR}if(arguments[0]instanceof Nr&&arguments[1]instanceof Ds){var Gt=arguments[0],qt=arguments[1];if(!qt.getEnvelopeInternal().intersects(Gt))return Ur.EXTERIOR;var en=qt.getCoordinates();return qt.isClosed()||!Gt.equals(en[0])&&!Gt.equals(en[en.length-1])?ki.isOnLine(Gt,en)?Ur.INTERIOR:Ur.EXTERIOR:Ur.BOUNDARY}if(arguments[0]instanceof Nr&&arguments[1]instanceof Al){var Xt=arguments[0],sn=arguments[1],yn=sn.getCoordinate();return yn.equals2D(Xt)?Ur.INTERIOR:Ur.EXTERIOR}},Ul.prototype.locateInPolygonRing=function(vt,bt){return bt.getEnvelopeInternal().intersects(vt)?ki.locatePointInRing(vt,bt.getCoordinates()):Ur.EXTERIOR},Ul.prototype.intersects=function(vt,bt){return this.locate(vt,bt)!==Ur.EXTERIOR},Ul.prototype.updateLocationInfo=function(vt){vt===Ur.INTERIOR&&(this._isIn=!0),vt===Ur.BOUNDARY&&this._numBoundaries++},Ul.prototype.computeLocation=function(vt,bt){var wt=this;if(bt instanceof Al&&this.updateLocationInfo(this.locateInternal(vt,bt)),bt instanceof Ds)this.updateLocationInfo(this.locateInternal(vt,bt));else if(bt instanceof da)this.updateLocationInfo(this.locateInternal(vt,bt));else if(bt instanceof gh)for(var Tt=bt,At=0;At<Tt.getNumGeometries();At++){var Ot=Tt.getGeometryN(At);wt.updateLocationInfo(wt.locateInternal(vt,Ot))}else if(bt instanceof gu)for(var Dt=bt,jt=0;jt<Dt.getNumGeometries();jt++){var Gt=Dt.getGeometryN(jt);wt.updateLocationInfo(wt.locateInternal(vt,Gt))}else if(bt instanceof rl)for(var qt=new qc(bt);qt.hasNext();){var en=qt.next();en!==bt&&wt.computeLocation(vt,en)}},Ul.prototype.locate=function(vt,bt){return bt.isEmpty()?Ur.EXTERIOR:bt instanceof Ds||bt instanceof da?this.locateInternal(vt,bt):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(vt,bt),this._boundaryRule.isInBoundary(this._numBoundaries)?Ur.BOUNDARY:this._numBoundaries>0||this._isIn?Ur.INTERIOR:Ur.EXTERIOR)},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul};var ol=function vt(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var bt=arguments[0],wt=arguments[1];vt.call(this,bt,vt.INSIDE_AREA,wt)}else if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];this._component=Tt,this._segIndex=At,this._pt=Ot}},Dy={INSIDE_AREA:{configurable:!0}};ol.prototype.isInsideArea=function(){return this._segIndex===ol.INSIDE_AREA},ol.prototype.getCoordinate=function(){return this._pt},ol.prototype.getGeometryComponent=function(){return this._component},ol.prototype.getSegmentIndex=function(){return this._segIndex},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},Dy.INSIDE_AREA.get=function(){return-1},Object.defineProperties(ol,Dy);var wh=function(vt){this._pts=vt||null};wh.prototype.filter=function(vt){vt instanceof Al&&this._pts.add(vt)},wh.prototype.interfaces_=function(){return[Vc]},wh.prototype.getClass=function(){return wh},wh.getPoints=function(){if(arguments.length===1){var vt=arguments[0];return vt instanceof Al?Cc.singletonList(vt):wh.getPoints(vt,new vi)}if(arguments.length===2){var bt=arguments[0],wt=arguments[1];return bt instanceof Al?wt.add(bt):bt instanceof rl&&bt.apply(new wh(wt)),wt}};var Fu=function(){this._locations=null;var vt=arguments[0];this._locations=vt};Fu.prototype.filter=function(vt){(vt instanceof Al||vt instanceof Ds||vt instanceof da)&&this._locations.add(new ol(vt,0,vt.getCoordinate()))},Fu.prototype.interfaces_=function(){return[Vc]},Fu.prototype.getClass=function(){return Fu},Fu.getLocations=function(vt){var bt=new vi;return vt.apply(new Fu(bt)),bt};var Oa=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ul,this._minDistanceLocation=null,this._minDistance=po.MAX_VALUE,arguments.length===2){var vt=arguments[0],bt=arguments[1];this._geom=[vt,bt],this._terminateDistance=0}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=wt,this._geom[1]=Tt,this._terminateDistance=At}};Oa.prototype.computeContainmentDistance=function(){var vt=this;if(arguments.length===0){var bt=new Array(2).fill(null);if(this.computeContainmentDistance(0,bt),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,bt)}else if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=1-wt,Ot=Bu.getPolygons(this._geom[wt]);if(Ot.size()>0){var Dt=Fu.getLocations(this._geom[At]);if(this.computeContainmentDistance(Dt,Ot,Tt),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[At]=Tt[0],this._minDistanceLocation[wt]=Tt[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&ro(arguments[0],vc)&&ro(arguments[1],vc)){for(var jt=arguments[0],Gt=arguments[1],qt=arguments[2],en=0;en<jt.size();en++)for(var Xt=jt.get(en),sn=0;sn<Gt.size();sn++)if(vt.computeContainmentDistance(Xt,Gt.get(sn),qt),vt._minDistance<=vt._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ol&&arguments[1]instanceof da){var yn=arguments[0],vn=arguments[1],Sn=arguments[2],fn=yn.getCoordinate();if(Ur.EXTERIOR!==this._ptLocator.locate(fn,vn))return this._minDistance=0,Sn[0]=yn,Sn[1]=new ol(vn,fn),null}}},Oa.prototype.computeMinDistanceLinesPoints=function(vt,bt,wt){for(var Tt=this,At=0;At<vt.size();At++)for(var Ot=vt.get(At),Dt=0;Dt<bt.size();Dt++){var jt=bt.get(Dt);if(Tt.computeMinDistance(Ot,jt,wt),Tt._minDistance<=Tt._terminateDistance)return null}},Oa.prototype.computeFacetDistance=function(){var vt=new Array(2).fill(null),bt=Ha.getLines(this._geom[0]),wt=Ha.getLines(this._geom[1]),Tt=wh.getPoints(this._geom[0]),At=wh.getPoints(this._geom[1]);return this.computeMinDistanceLines(bt,wt,vt),this.updateMinDistance(vt,!1),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistanceLinesPoints(bt,At,vt),this.updateMinDistance(vt,!1),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistanceLinesPoints(wt,Tt,vt),this.updateMinDistance(vt,!0),this._minDistance<=this._terminateDistance?null:(vt[0]=null,vt[1]=null,this.computeMinDistancePoints(Tt,At,vt),void this.updateMinDistance(vt,!1))))},Oa.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Oa.prototype.updateMinDistance=function(vt,bt){if(vt[0]===null)return null;bt?(this._minDistanceLocation[0]=vt[1],this._minDistanceLocation[1]=vt[0]):(this._minDistanceLocation[0]=vt[0],this._minDistanceLocation[1]=vt[1])},Oa.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Oa.prototype.computeMinDistance=function(){var vt=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Ds&&arguments[1]instanceof Al){var bt=arguments[0],wt=arguments[1],Tt=arguments[2];if(bt.getEnvelopeInternal().distance(wt.getEnvelopeInternal())>this._minDistance)return null;for(var At=bt.getCoordinates(),Ot=wt.getCoordinate(),Dt=0;Dt<At.length-1;Dt++){var jt=ki.distancePointLine(Ot,At[Dt],At[Dt+1]);if(jt<vt._minDistance){vt._minDistance=jt;var Gt=new Vi(At[Dt],At[Dt+1]),qt=Gt.closestPoint(Ot);Tt[0]=new ol(bt,Dt,qt),Tt[1]=new ol(wt,0,Ot)}if(vt._minDistance<=vt._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ds&&arguments[1]instanceof Ds){var en=arguments[0],Xt=arguments[1],sn=arguments[2];if(en.getEnvelopeInternal().distance(Xt.getEnvelopeInternal())>this._minDistance)return null;for(var yn=en.getCoordinates(),vn=Xt.getCoordinates(),Sn=0;Sn<yn.length-1;Sn++)for(var fn=0;fn<vn.length-1;fn++){var Dn=ki.distanceLineLine(yn[Sn],yn[Sn+1],vn[fn],vn[fn+1]);if(Dn<vt._minDistance){vt._minDistance=Dn;var rr=new Vi(yn[Sn],yn[Sn+1]),bn=new Vi(vn[fn],vn[fn+1]),Nn=rr.closestPoints(bn);sn[0]=new ol(en,Sn,Nn[0]),sn[1]=new ol(Xt,fn,Nn[1])}if(vt._minDistance<=vt._terminateDistance)return null}}}},Oa.prototype.computeMinDistancePoints=function(vt,bt,wt){for(var Tt=this,At=0;At<vt.size();At++)for(var Ot=vt.get(At),Dt=0;Dt<bt.size();Dt++){var jt=bt.get(Dt),Gt=Ot.getCoordinate().distance(jt.getCoordinate());if(Gt<Tt._minDistance&&(Tt._minDistance=Gt,wt[0]=new ol(Ot,0,Ot.getCoordinate()),wt[1]=new ol(jt,0,jt.getCoordinate())),Tt._minDistance<=Tt._terminateDistance)return null}},Oa.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new Ns("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Oa.prototype.computeMinDistanceLines=function(vt,bt,wt){for(var Tt=this,At=0;At<vt.size();At++)for(var Ot=vt.get(At),Dt=0;Dt<bt.size();Dt++){var jt=bt.get(Dt);if(Tt.computeMinDistance(Ot,jt,wt),Tt._minDistance<=Tt._terminateDistance)return null}},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Oa.distance=function(vt,bt){return new Oa(vt,bt).distance()},Oa.isWithinDistance=function(vt,bt,wt){return new Oa(vt,bt,wt).distance()<=wt},Oa.nearestPoints=function(vt,bt){return new Oa(vt,bt).nearestPoints()};var Ka=function(){this._pt=[new Nr,new Nr],this._distance=po.NaN,this._isNull=!0};Ka.prototype.getCoordinates=function(){return this._pt},Ka.prototype.getCoordinate=function(vt){return this._pt[vt]},Ka.prototype.setMinimum=function(){if(arguments.length===1){var vt=arguments[0];this.setMinimum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(bt,wt),null;var Tt=bt.distance(wt);Tt<this._distance&&this.initialize(bt,wt,Tt)}},Ka.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var vt=arguments[0],bt=arguments[1];this._pt[0].setCoordinate(vt),this._pt[1].setCoordinate(bt),this._distance=vt.distance(bt),this._isNull=!1}else if(arguments.length===3){var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._pt[0].setCoordinate(wt),this._pt[1].setCoordinate(Tt),this._distance=At,this._isNull=!1}},Ka.prototype.toString=function(){return yc.toLineString(this._pt[0],this._pt[1])},Ka.prototype.getDistance=function(){return this._distance},Ka.prototype.setMaximum=function(){if(arguments.length===1){var vt=arguments[0];this.setMaximum(vt._pt[0],vt._pt[1])}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1];if(this._isNull)return this.initialize(bt,wt),null;var Tt=bt.distance(wt);Tt>this._distance&&this.initialize(bt,wt,Tt)}},Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka};var Ac=function(){};Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.computeDistance=function(){if(arguments[2]instanceof Ka&&arguments[0]instanceof Ds&&arguments[1]instanceof Nr)for(var vt=arguments[0],bt=arguments[1],wt=arguments[2],Tt=new Vi,At=vt.getCoordinates(),Ot=0;Ot<At.length-1;Ot++){Tt.setCoordinates(At[Ot],At[Ot+1]);var Dt=Tt.closestPoint(bt);wt.setMinimum(Dt,bt)}else if(arguments[2]instanceof Ka&&arguments[0]instanceof da&&arguments[1]instanceof Nr){var jt=arguments[0],Gt=arguments[1],qt=arguments[2];Ac.computeDistance(jt.getExteriorRing(),Gt,qt);for(var en=0;en<jt.getNumInteriorRing();en++)Ac.computeDistance(jt.getInteriorRingN(en),Gt,qt)}else if(arguments[2]instanceof Ka&&arguments[0]instanceof to&&arguments[1]instanceof Nr){var Xt=arguments[0],sn=arguments[1],yn=arguments[2];if(Xt instanceof Ds)Ac.computeDistance(Xt,sn,yn);else if(Xt instanceof da)Ac.computeDistance(Xt,sn,yn);else if(Xt instanceof rl)for(var vn=Xt,Sn=0;Sn<vn.getNumGeometries();Sn++){var fn=vn.getGeometryN(Sn);Ac.computeDistance(fn,sn,yn)}else yn.setMinimum(Xt.getCoordinate(),sn)}else if(arguments[2]instanceof Ka&&arguments[0]instanceof Vi&&arguments[1]instanceof Nr){var Dn=arguments[0],rr=arguments[1],bn=arguments[2],Nn=Dn.closestPoint(rr);bn.setMinimum(Nn,rr)}};var Gl=function(){this._g0=null,this._g1=null,this._ptDist=new Ka,this._densifyFrac=0;var vt=arguments[0],bt=arguments[1];this._g0=vt,this._g1=bt},Hd={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Gl.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Gl.prototype.setDensifyFraction=function(vt){if(vt>1||vt<=0)throw new Ns("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=vt},Gl.prototype.compute=function(vt,bt){this.computeOrientedDistance(vt,bt,this._ptDist),this.computeOrientedDistance(bt,vt,this._ptDist)},Gl.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Gl.prototype.computeOrientedDistance=function(vt,bt,wt){var Tt=new jd(bt);if(vt.apply(Tt),wt.setMaximum(Tt.getMaxPointDistance()),this._densifyFrac>0){var At=new Eh(bt,this._densifyFrac);vt.apply(At),wt.setMaximum(At.getMaxPointDistance())}},Gl.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.distance=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1],wt=new Gl(vt,bt);return wt.distance()}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Dt=new Gl(Tt,At);return Dt.setDensifyFraction(Ot),Dt.distance()}},Hd.MaxPointDistanceFilter.get=function(){return jd},Hd.MaxDensifiedByFractionDistanceFilter.get=function(){return Eh},Object.defineProperties(Gl,Hd);var jd=function(){this._maxPtDist=new Ka,this._minPtDist=new Ka,this._euclideanDist=new Ac,this._geom=null;var vt=arguments[0];this._geom=vt};jd.prototype.filter=function(vt){this._minPtDist.initialize(),Ac.computeDistance(this._geom,vt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},jd.prototype.getMaxPointDistance=function(){return this._maxPtDist},jd.prototype.interfaces_=function(){return[hu]},jd.prototype.getClass=function(){return jd};var Eh=function(){this._maxPtDist=new Ka,this._minPtDist=new Ka,this._geom=null,this._numSubSegs=0;var vt=arguments[0],bt=arguments[1];this._geom=vt,this._numSubSegs=Math.trunc(Math.round(1/bt))};Eh.prototype.filter=function(vt,bt){var wt=this;if(bt===0)return null;for(var Tt=vt.getCoordinate(bt-1),At=vt.getCoordinate(bt),Ot=(At.x-Tt.x)/this._numSubSegs,Dt=(At.y-Tt.y)/this._numSubSegs,jt=0;jt<this._numSubSegs;jt++){var Gt=Tt.x+jt*Ot,qt=Tt.y+jt*Dt,en=new Nr(Gt,qt);wt._minPtDist.initialize(),Ac.computeDistance(wt._geom,en,wt._minPtDist),wt._maxPtDist.setMaximum(wt._minPtDist)}},Eh.prototype.isDone=function(){return!1},Eh.prototype.isGeometryChanged=function(){return!1},Eh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Eh.prototype.interfaces_=function(){return[bc]},Eh.prototype.getClass=function(){return Eh};var $l=function(vt,bt,wt){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=vt||null,this._bufDistance=bt||null,this._result=wt||null},B0={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};$l.prototype.checkMaximumDistance=function(vt,bt,wt){var Tt=new Gl(bt,vt);if(Tt.setDensifyFraction(.25),this._maxDistanceFound=Tt.orientedDistance(),this._maxDistanceFound>wt){this._isValid=!1;var At=Tt.getCoordinates();this._errorLocation=At[1],this._errorIndicator=vt.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+yc.toLineString(At[0],At[1])+")"}},$l.prototype.isValid=function(){var vt=Math.abs(this._bufDistance),bt=$l.MAX_DISTANCE_DIFF_FRAC*vt;return this._minValidDistance=vt-bt,this._maxValidDistance=vt+bt,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),$l.VERBOSE&&za.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},$l.prototype.checkNegativeValid=function(){if(!(this._input instanceof da||this._input instanceof gu||this._input instanceof rl))return null;var vt=this.getPolygonLines(this._input);if(this.checkMinimumDistance(vt,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(vt,this._result,this._maxValidDistance)},$l.prototype.getErrorIndicator=function(){return this._errorIndicator},$l.prototype.checkMinimumDistance=function(vt,bt,wt){var Tt=new Oa(vt,bt,wt);if(this._minDistanceFound=Tt.distance(),this._minDistanceFound<wt){this._isValid=!1;var At=Tt.nearestPoints();this._errorLocation=Tt.nearestPoints()[1],this._errorIndicator=vt.getFactory().createLineString(At),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+yc.toLineString(At[0],At[1])+" )"}},$l.prototype.checkPositiveValid=function(){var vt=this._result.getBoundary();if(this.checkMinimumDistance(this._input,vt,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,vt,this._maxValidDistance)},$l.prototype.getErrorLocation=function(){return this._errorLocation},$l.prototype.getPolygonLines=function(vt){for(var bt=new vi,wt=new Ha(bt),Tt=Bu.getPolygons(vt).iterator();Tt.hasNext();)Tt.next().apply(wt);return vt.getFactory().buildGeometry(bt)},$l.prototype.getErrorMessage=function(){return this._errMsg},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},B0.VERBOSE.get=function(){return!1},B0.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties($l,B0);var ja=function(vt,bt,wt){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=vt||null,this._distance=bt||null,this._result=wt||null},F0={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ja.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ja.prototype.checkEnvelope=function(){if(this._distance<0)return null;var vt=this._distance*ja.MAX_ENV_DIFF_FRAC;vt===0&&(vt=.001);var bt=new Ui(this._input.getEnvelopeInternal());bt.expandBy(this._distance);var wt=new Ui(this._result.getEnvelopeInternal());wt.expandBy(vt),wt.contains(bt)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(wt)),this.report("Envelope")},ja.prototype.checkDistance=function(){var vt=new $l(this._input,this._distance,this._result);vt.isValid()||(this._isValid=!1,this._errorMsg=vt.getErrorMessage(),this._errorLocation=vt.getErrorLocation(),this._errorIndicator=vt.getErrorIndicator()),this.report("Distance")},ja.prototype.checkArea=function(){var vt=this._input.getArea(),bt=this._result.getArea();this._distance>0&&vt>bt&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&vt<bt&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ja.prototype.checkPolygonal=function(){this._result instanceof da||this._result instanceof gu||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ja.prototype.getErrorIndicator=function(){return this._errorIndicator},ja.prototype.getErrorLocation=function(){return this._errorLocation},ja.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ja.prototype.report=function(vt){if(!ja.VERBOSE)return null;za.out.println("Check "+vt+": "+(this._isValid?"passed":"FAILED"))},ja.prototype.getErrorMessage=function(){return this._errorMsg},ja.prototype.interfaces_=function(){return[]},ja.prototype.getClass=function(){return ja},ja.isValidMsg=function(vt,bt,wt){var Tt=new ja(vt,bt,wt);return Tt.isValid()?null:Tt.getErrorMessage()},ja.isValid=function(vt,bt,wt){return!!new ja(vt,bt,wt).isValid()},F0.VERBOSE.get=function(){return!1},F0.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(ja,F0);var Zc=function(){this._pts=null,this._data=null;var vt=arguments[0],bt=arguments[1];this._pts=vt,this._data=bt};Zc.prototype.getCoordinates=function(){return this._pts},Zc.prototype.size=function(){return this._pts.length},Zc.prototype.getCoordinate=function(vt){return this._pts[vt]},Zc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zc.prototype.getSegmentOctant=function(vt){return vt===this._pts.length-1?-1:Tc.octant(this.getCoordinate(vt),this.getCoordinate(vt+1))},Zc.prototype.setData=function(vt){this._data=vt},Zc.prototype.getData=function(){return this._data},Zc.prototype.toString=function(){return yc.toLineString(new Zs(this._pts))},Zc.prototype.interfaces_=function(){return[fa]},Zc.prototype.getClass=function(){return Zc};var $a=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new vi,this._intersectionCount=0,this._keepIntersections=!0;var vt=arguments[0];this._li=vt,this._interiorIntersection=null};$a.prototype.getInteriorIntersection=function(){return this._interiorIntersection},$a.prototype.setCheckEndSegmentsOnly=function(vt){this._isCheckEndSegmentsOnly=vt},$a.prototype.getIntersectionSegments=function(){return this._intSegments},$a.prototype.count=function(){return this._intersectionCount},$a.prototype.getIntersections=function(){return this._intersections},$a.prototype.setFindAllIntersections=function(vt){this._findAllIntersections=vt},$a.prototype.setKeepIntersections=function(vt){this._keepIntersections=vt},$a.prototype.processIntersections=function(vt,bt,wt,Tt){if(!this._findAllIntersections&&this.hasIntersection()||vt===wt&&bt===Tt||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(vt,bt)||this.isEndSegment(wt,Tt)))return null;var At=vt.getCoordinates()[bt],Ot=vt.getCoordinates()[bt+1],Dt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Ot,Dt,jt),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=At,this._intSegments[1]=Ot,this._intSegments[2]=Dt,this._intSegments[3]=jt,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},$a.prototype.isEndSegment=function(vt,bt){return bt===0||bt>=vt.size()-2},$a.prototype.hasIntersection=function(){return this._interiorIntersection!==null},$a.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},$a.prototype.interfaces_=function(){return[Qh]},$a.prototype.getClass=function(){return $a},$a.createAllIntersectionsFinder=function(vt){var bt=new $a(vt);return bt.setFindAllIntersections(!0),bt},$a.createAnyIntersectionFinder=function(vt){return new $a(vt)},$a.createIntersectionCounter=function(vt){var bt=new $a(vt);return bt.setFindAllIntersections(!0),bt.setKeepIntersections(!1),bt};var sc=function(){this._li=new ph,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var vt=arguments[0];this._segStrings=vt};sc.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},sc.prototype.getIntersections=function(){return this._segInt.getIntersections()},sc.prototype.isValid=function(){return this.execute(),this._isValid},sc.prototype.setFindAllIntersections=function(vt){this._findAllIntersections=vt},sc.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new $a(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var vt=new D0;if(vt.setSegmentIntersector(this._segInt),vt.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},sc.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Du(this.getErrorMessage(),this._segInt.getInteriorIntersection())},sc.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var vt=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+yc.toLineString(vt[0],vt[1])+" and "+yc.toLineString(vt[2],vt[3])},sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.computeIntersections=function(vt){var bt=new sc(vt);return bt.setFindAllIntersections(!0),bt.isValid(),bt.getIntersections()};var td=function vt(){this._nv=null;var bt=arguments[0];this._nv=new sc(vt.toSegmentStrings(bt))};td.prototype.checkValid=function(){this._nv.checkValid()},td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td},td.toSegmentStrings=function(vt){for(var bt=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();bt.add(new Zc(Tt.getCoordinates(),Tt))}return bt},td.checkValid=function(vt){new td(vt).checkValid()};var Vd=function(vt){this._mapOp=vt};Vd.prototype.map=function(vt){for(var bt=new vi,wt=0;wt<vt.getNumGeometries();wt++){var Tt=this._mapOp.map(vt.getGeometryN(wt));Tt.isEmpty()||bt.add(Tt)}return vt.getFactory().createGeometryCollection(Io.toGeometryArray(bt))},Vd.prototype.interfaces_=function(){return[]},Vd.prototype.getClass=function(){return Vd},Vd.map=function(vt,bt){return new Vd(bt).map(vt)};var Kc=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new vi,this._resultLineList=new vi;var vt=arguments[0],bt=arguments[1],wt=arguments[2];this._op=vt,this._geometryFactory=bt,this._ptLocator=wt};Kc.prototype.collectLines=function(vt){for(var bt=this,wt=this._op.getGraph().getEdgeEnds().iterator();wt.hasNext();){var Tt=wt.next();bt.collectLineEdge(Tt,vt,bt._lineEdgesList),bt.collectBoundaryTouchEdge(Tt,vt,bt._lineEdgesList)}},Kc.prototype.labelIsolatedLine=function(vt,bt){var wt=this._ptLocator.locate(vt.getCoordinate(),this._op.getArgGeometry(bt));vt.getLabel().setLocation(bt,wt)},Kc.prototype.build=function(vt){return this.findCoveredLineEdges(),this.collectLines(vt),this.buildLines(vt),this._resultLineList},Kc.prototype.collectLineEdge=function(vt,bt,wt){var Tt=vt.getLabel(),At=vt.getEdge();vt.isLineEdge()&&(vt.isVisited()||!vo.isResultOfOp(Tt,bt)||At.isCovered()||(wt.add(At),vt.setVisitedEdge(!0)))},Kc.prototype.findCoveredLineEdges=function(){for(var vt=this._op.getGraph().getNodes().iterator();vt.hasNext();)vt.next().getEdges().findCoveredLineEdges();for(var bt=this._op.getGraph().getEdgeEnds().iterator();bt.hasNext();){var wt=bt.next(),Tt=wt.getEdge();if(wt.isLineEdge()&&!Tt.isCoveredSet()){var At=this._op.isCoveredByA(wt.getCoordinate());Tt.setCovered(At)}}},Kc.prototype.labelIsolatedLines=function(vt){for(var bt=vt.iterator();bt.hasNext();){var wt=bt.next(),Tt=wt.getLabel();wt.isIsolated()&&(Tt.isNull(0)?this.labelIsolatedLine(wt,0):this.labelIsolatedLine(wt,1))}},Kc.prototype.buildLines=function(vt){for(var bt=this._lineEdgesList.iterator();bt.hasNext();){var wt=bt.next(),Tt=this._geometryFactory.createLineString(wt.getCoordinates());this._resultLineList.add(Tt),wt.setInResult(!0)}},Kc.prototype.collectBoundaryTouchEdge=function(vt,bt,wt){var Tt=vt.getLabel();return vt.isLineEdge()||vt.isVisited()||vt.isInteriorAreaEdge()||vt.getEdge().isInResult()?null:(_o.isTrue(!(vt.isInResult()||vt.getSym().isInResult())||!vt.getEdge().isInResult()),void(vo.isResultOfOp(Tt,bt)&&bt===vo.INTERSECTION&&(wt.add(vt.getEdge()),vt.setVisitedEdge(!0))))},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Ud=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new vi;var vt=arguments[0],bt=arguments[1];this._op=vt,this._geometryFactory=bt};Ud.prototype.filterCoveredNodeToPoint=function(vt){var bt=vt.getCoordinate();if(!this._op.isCoveredByLA(bt)){var wt=this._geometryFactory.createPoint(bt);this._resultPointList.add(wt)}},Ud.prototype.extractNonCoveredResultNodes=function(vt){for(var bt=this._op.getGraph().getNodes().iterator();bt.hasNext();){var wt=bt.next();if(!wt.isInResult()&&!wt.isIncidentEdgeInResult()&&(wt.getEdges().getDegree()===0||vt===vo.INTERSECTION)){var Tt=wt.getLabel();vo.isResultOfOp(Tt,vt)&&this.filterCoveredNodeToPoint(wt)}}},Ud.prototype.build=function(vt){return this.extractNonCoveredResultNodes(vt),this._resultPointList},Ud.prototype.interfaces_=function(){return[]},Ud.prototype.getClass=function(){return Ud};var sl=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};sl.prototype.transformPoint=function(vt,bt){return this._factory.createPoint(this.transformCoordinates(vt.getCoordinateSequence(),vt))},sl.prototype.transformPolygon=function(vt,bt){var wt=!0,Tt=this.transformLinearRing(vt.getExteriorRing(),vt);Tt!==null&&Tt instanceof pu&&!Tt.isEmpty()||(wt=!1);for(var At=new vi,Ot=0;Ot<vt.getNumInteriorRing();Ot++){var Dt=this.transformLinearRing(vt.getInteriorRingN(Ot),vt);Dt===null||Dt.isEmpty()||(Dt instanceof pu||(wt=!1),At.add(Dt))}if(wt)return this._factory.createPolygon(Tt,At.toArray([]));var jt=new vi;return Tt!==null&&jt.add(Tt),jt.addAll(At),this._factory.buildGeometry(jt)},sl.prototype.createCoordinateSequence=function(vt){return this._factory.getCoordinateSequenceFactory().create(vt)},sl.prototype.getInputGeometry=function(){return this._inputGeom},sl.prototype.transformMultiLineString=function(vt,bt){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformLineString(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||wt.add(At))}return this._factory.buildGeometry(wt)},sl.prototype.transformCoordinates=function(vt,bt){return this.copy(vt)},sl.prototype.transformLineString=function(vt,bt){return this._factory.createLineString(this.transformCoordinates(vt.getCoordinateSequence(),vt))},sl.prototype.transformMultiPoint=function(vt,bt){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformPoint(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||wt.add(At))}return this._factory.buildGeometry(wt)},sl.prototype.transformMultiPolygon=function(vt,bt){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transformPolygon(vt.getGeometryN(Tt),vt);At!==null&&(At.isEmpty()||wt.add(At))}return this._factory.buildGeometry(wt)},sl.prototype.copy=function(vt){return vt.copy()},sl.prototype.transformGeometryCollection=function(vt,bt){for(var wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=this.transform(vt.getGeometryN(Tt));At!==null&&(this._pruneEmptyGeometry&&At.isEmpty()||wt.add(At))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Io.toGeometryArray(wt)):this._factory.buildGeometry(wt)},sl.prototype.transform=function(vt){if(this._inputGeom=vt,this._factory=vt.getFactory(),vt instanceof Al)return this.transformPoint(vt,null);if(vt instanceof Df)return this.transformMultiPoint(vt,null);if(vt instanceof pu)return this.transformLinearRing(vt,null);if(vt instanceof Ds)return this.transformLineString(vt,null);if(vt instanceof gh)return this.transformMultiLineString(vt,null);if(vt instanceof da)return this.transformPolygon(vt,null);if(vt instanceof gu)return this.transformMultiPolygon(vt,null);if(vt instanceof rl)return this.transformGeometryCollection(vt,null);throw new Ns("Unknown Geometry subtype: "+vt.getClass().getName())},sl.prototype.transformLinearRing=function(vt,bt){var wt=this.transformCoordinates(vt.getCoordinateSequence(),vt);if(wt===null)return this._factory.createLinearRing(null);var Tt=wt.size();return Tt>0&&Tt<4&&!this._preserveType?this._factory.createLineString(wt):this._factory.createLinearRing(wt)},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl};var us=function vt(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Vi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ds&&typeof arguments[1]=="number"){var bt=arguments[0],wt=arguments[1];vt.call(this,bt.getCoordinates(),wt)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var Tt=arguments[0],At=arguments[1];this._srcPts=Tt,this._isClosed=vt.isClosed(Tt),this._snapTolerance=At}};us.prototype.snapVertices=function(vt,bt){for(var wt=this._isClosed?vt.size()-1:vt.size(),Tt=0;Tt<wt;Tt++){var At=vt.get(Tt),Ot=this.findSnapForVertex(At,bt);Ot!==null&&(vt.set(Tt,new Nr(Ot)),Tt===0&&this._isClosed&&vt.set(vt.size()-1,new Nr(Ot)))}},us.prototype.findSnapForVertex=function(vt,bt){for(var wt=0;wt<bt.length;wt++){if(vt.equals2D(bt[wt]))return null;if(vt.distance(bt[wt])<this._snapTolerance)return bt[wt]}return null},us.prototype.snapTo=function(vt){var bt=new zp(this._srcPts);return this.snapVertices(bt,vt),this.snapSegments(bt,vt),bt.toCoordinateArray()},us.prototype.snapSegments=function(vt,bt){if(bt.length===0)return null;var wt=bt.length;bt[0].equals2D(bt[bt.length-1])&&(wt=bt.length-1);for(var Tt=0;Tt<wt;Tt++){var At=bt[Tt],Ot=this.findSegmentIndexToSnap(At,vt);Ot>=0&&vt.add(Ot+1,new Nr(At),!1)}},us.prototype.findSegmentIndexToSnap=function(vt,bt){for(var wt=this,Tt=po.MAX_VALUE,At=-1,Ot=0;Ot<bt.size()-1;Ot++){if(wt._seg.p0=bt.get(Ot),wt._seg.p1=bt.get(Ot+1),wt._seg.p0.equals2D(vt)||wt._seg.p1.equals2D(vt)){if(wt._allowSnappingToSourceVertices)continue;return-1}var Dt=wt._seg.distance(vt);Dt<wt._snapTolerance&&Dt<Tt&&(Tt=Dt,At=Ot)}return At},us.prototype.setAllowSnappingToSourceVertices=function(vt){this._allowSnappingToSourceVertices=vt},us.prototype.interfaces_=function(){return[]},us.prototype.getClass=function(){return us},us.isClosed=function(vt){return!(vt.length<=1)&&vt[0].equals2D(vt[vt.length-1])};var zo=function(vt){this._srcGeom=vt||null},hm={SNAP_PRECISION_FACTOR:{configurable:!0}};zo.prototype.snapTo=function(vt,bt){var wt=this.extractTargetCoordinates(vt);return new dm(bt,wt).transform(this._srcGeom)},zo.prototype.snapToSelf=function(vt,bt){var wt=this.extractTargetCoordinates(this._srcGeom),Tt=new dm(vt,wt,!0).transform(this._srcGeom),At=Tt;return bt&&ro(At,mh)&&(At=Tt.buffer(0)),At},zo.prototype.computeSnapTolerance=function(vt){return this.computeMinimumSegmentLength(vt)/10},zo.prototype.extractTargetCoordinates=function(vt){for(var bt=new _c,wt=vt.getCoordinates(),Tt=0;Tt<wt.length;Tt++)bt.add(wt[Tt]);return bt.toArray(new Array(0).fill(null))},zo.prototype.computeMinimumSegmentLength=function(vt){for(var bt=po.MAX_VALUE,wt=0;wt<vt.length-1;wt++){var Tt=vt[wt].distance(vt[wt+1]);Tt<bt&&(bt=Tt)}return bt},zo.prototype.interfaces_=function(){return[]},zo.prototype.getClass=function(){return zo},zo.snap=function(vt,bt,wt){var Tt=new Array(2).fill(null),At=new zo(vt);Tt[0]=At.snapTo(bt,wt);var Ot=new zo(bt);return Tt[1]=Ot.snapTo(Tt[0],wt),Tt},zo.computeOverlaySnapTolerance=function(){if(arguments.length===1){var vt=arguments[0],bt=zo.computeSizeBasedSnapTolerance(vt),wt=vt.getPrecisionModel();if(wt.getType()===ps.FIXED){var Tt=1/wt.getScale()*2/1.415;Tt>bt&&(bt=Tt)}return bt}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return Math.min(zo.computeOverlaySnapTolerance(At),zo.computeOverlaySnapTolerance(Ot))}},zo.computeSizeBasedSnapTolerance=function(vt){var bt=vt.getEnvelopeInternal();return Math.min(bt.getHeight(),bt.getWidth())*zo.SNAP_PRECISION_FACTOR},zo.snapToSelf=function(vt,bt,wt){return new zo(vt).snapToSelf(bt,wt)},hm.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(zo,hm);var dm=function(vt){function bt(wt,Tt,At){vt.call(this),this._snapTolerance=wt||null,this._snapPts=Tt||null,this._isSelfSnap=At!==void 0&&At}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.snapLine=function(wt,Tt){var At=new us(wt,this._snapTolerance);return At.setAllowSnappingToSourceVertices(this._isSelfSnap),At.snapTo(Tt)},bt.prototype.transformCoordinates=function(wt,Tt){var At=wt.toCoordinateArray(),Ot=this.snapLine(At,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(Ot)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(sl),Ra=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Ra.prototype.getCommon=function(){return po.longBitsToDouble(this._commonBits)},Ra.prototype.add=function(vt){var bt=po.doubleToLongBits(vt);return this._isFirst?(this._commonBits=bt,this._commonSignExp=Ra.signExpBits(this._commonBits),this._isFirst=!1,null):Ra.signExpBits(bt)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Ra.numCommonMostSigMantissaBits(this._commonBits,bt),void(this._commonBits=Ra.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Ra.prototype.toString=function(){if(arguments.length===1){var vt=arguments[0],bt=po.longBitsToDouble(vt),wt=po.toBinaryString(vt),Tt="0000000000000000000000000000000000000000000000000000000000000000"+wt,At=Tt.substring(Tt.length-64),Ot=At.substring(0,1)+"  "+At.substring(1,12)+"(exp) "+At.substring(12)+" [ "+bt+" ]";return Ot}},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra},Ra.getBit=function(vt,bt){return(vt&1<<bt)!=0?1:0},Ra.signExpBits=function(vt){return vt>>52},Ra.zeroLowerBits=function(vt,bt){return vt&~((1<<bt)-1)},Ra.numCommonMostSigMantissaBits=function(vt,bt){for(var wt=0,Tt=52;Tt>=0;Tt--){if(Ra.getBit(vt,Tt)!==Ra.getBit(bt,Tt))return wt;wt++}return 52};var Jc=function(){this._commonCoord=null,this._ccFilter=new zu},Uf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Jc.prototype.addCommonBits=function(vt){var bt=new Qc(this._commonCoord);vt.apply(bt),vt.geometryChanged()},Jc.prototype.removeCommonBits=function(vt){if(this._commonCoord.x===0&&this._commonCoord.y===0)return vt;var bt=new Nr(this._commonCoord);bt.x=-bt.x,bt.y=-bt.y;var wt=new Qc(bt);return vt.apply(wt),vt.geometryChanged(),vt},Jc.prototype.getCommonCoordinate=function(){return this._commonCoord},Jc.prototype.add=function(vt){vt.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Uf.CommonCoordinateFilter.get=function(){return zu},Uf.Translater.get=function(){return Qc},Object.defineProperties(Jc,Uf);var zu=function(){this._commonBitsX=new Ra,this._commonBitsY=new Ra};zu.prototype.filter=function(vt){this._commonBitsX.add(vt.x),this._commonBitsY.add(vt.y)},zu.prototype.getCommonCoordinate=function(){return new Nr(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},zu.prototype.interfaces_=function(){return[hu]},zu.prototype.getClass=function(){return zu};var Qc=function(){this.trans=null;var vt=arguments[0];this.trans=vt};Qc.prototype.filter=function(vt,bt){var wt=vt.getOrdinate(bt,0)+this.trans.x,Tt=vt.getOrdinate(bt,1)+this.trans.y;vt.setOrdinate(bt,0,wt),vt.setOrdinate(bt,1,Tt)},Qc.prototype.isDone=function(){return!1},Qc.prototype.isGeometryChanged=function(){return!0},Qc.prototype.interfaces_=function(){return[bc]},Qc.prototype.getClass=function(){return Qc};var ga=function(vt,bt){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=vt,this._geom[1]=bt,this.computeSnapTolerance()};ga.prototype.selfSnap=function(vt){return new zo(vt).snapTo(vt,this._snapTolerance)},ga.prototype.removeCommonBits=function(vt){this._cbr=new Jc,this._cbr.add(vt[0]),this._cbr.add(vt[1]);var bt=new Array(2).fill(null);return bt[0]=this._cbr.removeCommonBits(vt[0].copy()),bt[1]=this._cbr.removeCommonBits(vt[1].copy()),bt},ga.prototype.prepareResult=function(vt){return this._cbr.addCommonBits(vt),vt},ga.prototype.getResultGeometry=function(vt){var bt=this.snap(this._geom),wt=vo.overlayOp(bt[0],bt[1],vt);return this.prepareResult(wt)},ga.prototype.checkValid=function(vt){vt.isValid()||za.out.println("Snapped geometry is invalid")},ga.prototype.computeSnapTolerance=function(){this._snapTolerance=zo.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ga.prototype.snap=function(vt){var bt=this.removeCommonBits(vt);return zo.snap(bt[0],bt[1],this._snapTolerance)},ga.prototype.interfaces_=function(){return[]},ga.prototype.getClass=function(){return ga},ga.overlayOp=function(vt,bt,wt){return new ga(vt,bt).getResultGeometry(wt)},ga.union=function(vt,bt){return ga.overlayOp(vt,bt,vo.UNION)},ga.intersection=function(vt,bt){return ga.overlayOp(vt,bt,vo.INTERSECTION)},ga.symDifference=function(vt,bt){return ga.overlayOp(vt,bt,vo.SYMDIFFERENCE)},ga.difference=function(vt,bt){return ga.overlayOp(vt,bt,vo.DIFFERENCE)};var Ma=function(vt,bt){this._geom=new Array(2).fill(null),this._geom[0]=vt,this._geom[1]=bt};Ma.prototype.getResultGeometry=function(vt){var bt=null,wt=!1,Tt=null;try{bt=vo.overlayOp(this._geom[0],this._geom[1],vt),wt=!0}catch(At){if(!(At instanceof Ru))throw At;Tt=At}if(!wt)try{bt=ga.overlayOp(this._geom[0],this._geom[1],vt)}catch(At){throw At instanceof Ru?Tt:At}return bt},Ma.prototype.interfaces_=function(){return[]},Ma.prototype.getClass=function(){return Ma},Ma.overlayOp=function(vt,bt,wt){return new Ma(vt,bt).getResultGeometry(wt)},Ma.union=function(vt,bt){return Ma.overlayOp(vt,bt,vo.UNION)},Ma.intersection=function(vt,bt){return Ma.overlayOp(vt,bt,vo.INTERSECTION)},Ma.symDifference=function(vt,bt){return Ma.overlayOp(vt,bt,vo.SYMDIFFERENCE)},Ma.difference=function(vt,bt){return Ma.overlayOp(vt,bt,vo.DIFFERENCE)};var nd=function(){this.mce=null,this.chainIndex=null;var vt=arguments[0],bt=arguments[1];this.mce=vt,this.chainIndex=bt};nd.prototype.computeIntersections=function(vt,bt){this.mce.computeIntersectsForChain(this.chainIndex,vt.mce,vt.chainIndex,bt)},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd};var Ja=function vt(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var bt=arguments[0],wt=arguments[1];this._eventType=vt.DELETE,this._xValue=bt,this._insertEvent=wt}else if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];this._eventType=vt.INSERT,this._label=Tt,this._xValue=At,this._obj=Ot}},z0={INSERT:{configurable:!0},DELETE:{configurable:!0}};Ja.prototype.isDelete=function(){return this._eventType===Ja.DELETE},Ja.prototype.setDeleteEventIndex=function(vt){this._deleteEventIndex=vt},Ja.prototype.getObject=function(){return this._obj},Ja.prototype.compareTo=function(vt){var bt=vt;return this._xValue<bt._xValue?-1:this._xValue>bt._xValue?1:this._eventType<bt._eventType?-1:this._eventType>bt._eventType?1:0},Ja.prototype.getInsertEvent=function(){return this._insertEvent},Ja.prototype.isInsert=function(){return this._eventType===Ja.INSERT},Ja.prototype.isSameLabel=function(vt){return this._label!==null&&this._label===vt._label},Ja.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Ja.prototype.interfaces_=function(){return[Jl]},Ja.prototype.getClass=function(){return Ja},z0.INSERT.get=function(){return 1},z0.DELETE.get=function(){return 2},Object.defineProperties(Ja,z0);var Gd=function(){};Gd.prototype.interfaces_=function(){return[]},Gd.prototype.getClass=function(){return Gd};var ma=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var vt=arguments[0],bt=arguments[1],wt=arguments[2];this._li=vt,this._includeProper=bt,this._recordIsolated=wt};ma.prototype.isTrivialIntersection=function(vt,bt,wt,Tt){if(vt===wt&&this._li.getIntersectionNum()===1){if(ma.isAdjacentSegments(bt,Tt))return!0;if(vt.isClosed()){var At=vt.getNumPoints()-1;if(bt===0&&Tt===At||Tt===0&&bt===At)return!0}}return!1},ma.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ma.prototype.setIsDoneIfProperInt=function(vt){this._isDoneWhenProperInt=vt},ma.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ma.prototype.isBoundaryPointInternal=function(vt,bt){for(var wt=bt.iterator();wt.hasNext();){var Tt=wt.next().getCoordinate();if(vt.isIntersection(Tt))return!0}return!1},ma.prototype.hasProperIntersection=function(){return this._hasProper},ma.prototype.hasIntersection=function(){return this._hasIntersection},ma.prototype.isDone=function(){return this._isDone},ma.prototype.isBoundaryPoint=function(vt,bt){return bt!==null&&(!!this.isBoundaryPointInternal(vt,bt[0])||!!this.isBoundaryPointInternal(vt,bt[1]))},ma.prototype.setBoundaryNodes=function(vt,bt){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=vt,this._bdyNodes[1]=bt},ma.prototype.addIntersections=function(vt,bt,wt,Tt){if(vt===wt&&bt===Tt)return null;this.numTests++;var At=vt.getCoordinates()[bt],Ot=vt.getCoordinates()[bt+1],Dt=wt.getCoordinates()[Tt],jt=wt.getCoordinates()[Tt+1];this._li.computeIntersection(At,Ot,Dt,jt),this._li.hasIntersection()&&(this._recordIsolated&&(vt.setIsolated(!1),wt.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(vt,bt,wt,Tt)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(vt.addIntersections(this._li,bt,0),wt.addIntersections(this._li,Tt,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma},ma.isAdjacentSegments=function(vt,bt){return Math.abs(vt-bt)===1};var c_=function(vt){function bt(){vt.call(this),this.events=new vi,this.nOverlaps=null}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.prepareEvents=function(){Cc.sort(this.events);for(var wt=0;wt<this.events.size();wt++){var Tt=this.events.get(wt);Tt.isDelete()&&Tt.getInsertEvent().setDeleteEventIndex(wt)}},bt.prototype.computeIntersections=function(){var wt=this;if(arguments.length===1){var Tt=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var At=0;At<this.events.size();At++){var Ot=wt.events.get(At);if(Ot.isInsert()&&wt.processOverlaps(At,Ot.getDeleteEventIndex(),Ot,Tt),Tt.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof ma&&ro(arguments[0],vc)&&ro(arguments[1],vc)){var Dt=arguments[0],jt=arguments[1],Gt=arguments[2];this.addEdges(Dt,Dt),this.addEdges(jt,jt),this.computeIntersections(Gt)}else if(typeof arguments[2]=="boolean"&&ro(arguments[0],vc)&&arguments[1]instanceof ma){var qt=arguments[0],en=arguments[1],Xt=arguments[2];Xt?this.addEdges(qt,null):this.addEdges(qt),this.computeIntersections(en)}}},bt.prototype.addEdge=function(wt,Tt){for(var At=wt.getMonotoneChainEdge(),Ot=At.getStartIndexes(),Dt=0;Dt<Ot.length-1;Dt++){var jt=new nd(At,Dt),Gt=new Ja(Tt,At.getMinX(Dt),jt);this.events.add(Gt),this.events.add(new Ja(At.getMaxX(Dt),Gt))}},bt.prototype.processOverlaps=function(wt,Tt,At,Ot){for(var Dt=At.getObject(),jt=wt;jt<Tt;jt++){var Gt=this.events.get(jt);if(Gt.isInsert()){var qt=Gt.getObject();At.isSameLabel(Gt)||(Dt.computeIntersections(qt,Ot),this.nOverlaps++)}}},bt.prototype.addEdges=function(){var wt=this;if(arguments.length===1)for(var Tt=arguments[0],At=Tt.iterator();At.hasNext();){var Ot=At.next();wt.addEdge(Ot,Ot)}else if(arguments.length===2)for(var Dt=arguments[0],jt=arguments[1],Gt=Dt.iterator();Gt.hasNext();){var qt=Gt.next();wt.addEdge(qt,jt)}},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Gd),wu=function(){this._min=po.POSITIVE_INFINITY,this._max=po.NEGATIVE_INFINITY},By={NodeComparator:{configurable:!0}};wu.prototype.getMin=function(){return this._min},wu.prototype.intersects=function(vt,bt){return!(this._min>bt||this._max<vt)},wu.prototype.getMax=function(){return this._max},wu.prototype.toString=function(){return yc.toLineString(new Nr(this._min,0),new Nr(this._max,0))},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},By.NodeComparator.get=function(){return Qp},Object.defineProperties(wu,By);var Qp=function(){};Qp.prototype.compare=function(vt,bt){var wt=vt,Tt=bt,At=(wt._min+wt._max)/2,Ot=(Tt._min+Tt._max)/2;return At<Ot?-1:At>Ot?1:0},Qp.prototype.interfaces_=function(){return[kf]},Qp.prototype.getClass=function(){return Qp};var Lc=function(vt){function bt(){vt.call(this),this._item=null;var wt=arguments[0],Tt=arguments[1],At=arguments[2];this._min=wt,this._max=Tt,this._item=At}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.query=function(wt,Tt,At){if(!this.intersects(wt,Tt))return null;At.visitItem(this._item)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(wu),Fy=function(vt){function bt(){vt.call(this),this._node1=null,this._node2=null;var wt=arguments[0],Tt=arguments[1];this._node1=wt,this._node2=Tt,this.buildExtent(this._node1,this._node2)}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.buildExtent=function(wt,Tt){this._min=Math.min(wt._min,Tt._min),this._max=Math.max(wt._max,Tt._max)},bt.prototype.query=function(wt,Tt,At){if(!this.intersects(wt,Tt))return null;this._node1!==null&&this._node1.query(wt,Tt,At),this._node2!==null&&this._node2.query(wt,Tt,At)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(wu),eu=function(){this._leaves=new vi,this._root=null,this._level=0};eu.prototype.buildTree=function(){Cc.sort(this._leaves,new wu.NodeComparator);for(var vt=this._leaves,bt=null,wt=new vi;;){if(this.buildLevel(vt,wt),wt.size()===1)return wt.get(0);bt=vt,vt=wt,wt=bt}},eu.prototype.insert=function(vt,bt,wt){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Lc(vt,bt,wt))},eu.prototype.query=function(vt,bt,wt){this.init(),this._root.query(vt,bt,wt)},eu.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},eu.prototype.printNode=function(vt){za.out.println(yc.toLineString(new Nr(vt._min,this._level),new Nr(vt._max,this._level)))},eu.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},eu.prototype.buildLevel=function(vt,bt){this._level++,bt.clear();for(var wt=0;wt<vt.size();wt+=2){var Tt=vt.get(wt);if((wt+1<vt.size()?vt.get(wt):null)===null)bt.add(Tt);else{var At=new Fy(vt.get(wt),vt.get(wt+1));bt.add(At)}}},eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu};var Gf=function(){this._items=new vi};Gf.prototype.visitItem=function(vt){this._items.add(vt)},Gf.prototype.getItems=function(){return this._items},Gf.prototype.interfaces_=function(){return[yh]},Gf.prototype.getClass=function(){return Gf};var Wf=function(){this._index=null;var vt=arguments[0];if(!ro(vt,mh))throw new Ns("Argument must be Polygonal");this._index=new Sh(vt)},fm={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Wf.prototype.locate=function(vt){var bt=new jc(vt),wt=new qf(bt);return this._index.query(vt.y,vt.y,wt),bt.getLocation()},Wf.prototype.interfaces_=function(){return[ys]},Wf.prototype.getClass=function(){return Wf},fm.SegmentVisitor.get=function(){return qf},fm.IntervalIndexedGeometry.get=function(){return Sh},Object.defineProperties(Wf,fm);var qf=function(){this._counter=null;var vt=arguments[0];this._counter=vt};qf.prototype.visitItem=function(vt){var bt=vt;this._counter.countSegment(bt.getCoordinate(0),bt.getCoordinate(1))},qf.prototype.interfaces_=function(){return[yh]},qf.prototype.getClass=function(){return qf};var Sh=function(){this._index=new eu;var vt=arguments[0];this.init(vt)};Sh.prototype.init=function(vt){for(var bt=Ha.getLines(vt).iterator();bt.hasNext();){var wt=bt.next().getCoordinates();this.addLine(wt)}},Sh.prototype.addLine=function(vt){for(var bt=1;bt<vt.length;bt++){var wt=new Vi(vt[bt-1],vt[bt]),Tt=Math.min(wt.p0.y,wt.p1.y),At=Math.max(wt.p0.y,wt.p1.y);this._index.insert(Tt,At,wt)}},Sh.prototype.query=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1],wt=new Gf;return this._index.query(vt,bt,wt),wt.getItems()}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2];this._index.query(Tt,At,Ot)}},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var Yf=function(vt){function bt(){if(vt.call(this),this._parentGeom=null,this._lineEdgeMap=new Ay,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ul,arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=tc.OGC_SFS_BOUNDARY_RULE;this._argIndex=wt,this._parentGeom=Tt,this._boundaryNodeRule=At,Tt!==null&&this.add(Tt)}else if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],jt=arguments[2];this._argIndex=Ot,this._parentGeom=Dt,this._boundaryNodeRule=jt,Dt!==null&&this.add(Dt)}}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.insertBoundaryPoint=function(wt,Tt){var At=this._nodes.addNode(Tt).getLabel(),Ot=1;At.getLocation(wt,mi.ON)===Ur.BOUNDARY&&Ot++;var Dt=bt.determineBoundary(this._boundaryNodeRule,Ot);At.setLocation(wt,Dt)},bt.prototype.computeSelfNodes=function(){if(arguments.length===2){var wt=arguments[0],Tt=arguments[1];return this.computeSelfNodes(wt,Tt,!1)}if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Dt=arguments[2],jt=new ma(At,!0,!1);jt.setIsDoneIfProperInt(Dt);var Gt=this.createEdgeSetIntersector(),qt=this._parentGeom instanceof pu||this._parentGeom instanceof da||this._parentGeom instanceof gu,en=Ot||!qt;return Gt.computeIntersections(this._edges,jt,en),this.addSelfIntersectionNodes(this._argIndex),jt}},bt.prototype.computeSplitEdges=function(wt){for(var Tt=this._edges.iterator();Tt.hasNext();)Tt.next().eiList.addSplitEdges(wt)},bt.prototype.computeEdgeIntersections=function(wt,Tt,At){var Ot=new ma(Tt,At,!0);return Ot.setBoundaryNodes(this.getBoundaryNodes(),wt.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,wt._edges,Ot),Ot},bt.prototype.getGeometry=function(){return this._parentGeom},bt.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},bt.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},bt.prototype.addPoint=function(){if(arguments[0]instanceof Al){var wt=arguments[0],Tt=wt.getCoordinate();this.insertPoint(this._argIndex,Tt,Ur.INTERIOR)}else if(arguments[0]instanceof Nr){var At=arguments[0];this.insertPoint(this._argIndex,At,Ur.INTERIOR)}},bt.prototype.addPolygon=function(wt){this.addPolygonRing(wt.getExteriorRing(),Ur.EXTERIOR,Ur.INTERIOR);for(var Tt=0;Tt<wt.getNumInteriorRing();Tt++){var At=wt.getInteriorRingN(Tt);this.addPolygonRing(At,Ur.INTERIOR,Ur.EXTERIOR)}},bt.prototype.addEdge=function(wt){this.insertEdge(wt);var Tt=wt.getCoordinates();this.insertPoint(this._argIndex,Tt[0],Ur.BOUNDARY),this.insertPoint(this._argIndex,Tt[Tt.length-1],Ur.BOUNDARY)},bt.prototype.addLineString=function(wt){var Tt=Po.removeRepeatedPoints(wt.getCoordinates());if(Tt.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=Tt[0],null;var At=new jf(Tt,new bs(this._argIndex,Ur.INTERIOR));this._lineEdgeMap.put(wt,At),this.insertEdge(At),_o.isTrue(Tt.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,Tt[0]),this.insertBoundaryPoint(this._argIndex,Tt[Tt.length-1])},bt.prototype.getInvalidPoint=function(){return this._invalidPoint},bt.prototype.getBoundaryPoints=function(){for(var wt=this.getBoundaryNodes(),Tt=new Array(wt.size()).fill(null),At=0,Ot=wt.iterator();Ot.hasNext();){var Dt=Ot.next();Tt[At++]=Dt.getCoordinate().copy()}return Tt},bt.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},bt.prototype.addSelfIntersectionNode=function(wt,Tt,At){if(this.isBoundaryNode(wt,Tt))return null;At===Ur.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(wt,Tt):this.insertPoint(wt,Tt,At)},bt.prototype.addPolygonRing=function(wt,Tt,At){if(wt.isEmpty())return null;var Ot=Po.removeRepeatedPoints(wt.getCoordinates());if(Ot.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=Ot[0],null;var Dt=Tt,jt=At;ki.isCCW(Ot)&&(Dt=At,jt=Tt);var Gt=new jf(Ot,new bs(this._argIndex,Ur.BOUNDARY,Dt,jt));this._lineEdgeMap.put(wt,Gt),this.insertEdge(Gt),this.insertPoint(this._argIndex,Ot[0],Ur.BOUNDARY)},bt.prototype.insertPoint=function(wt,Tt,At){var Ot=this._nodes.addNode(Tt),Dt=Ot.getLabel();Dt===null?Ot._label=new bs(wt,At):Dt.setLocation(wt,At)},bt.prototype.createEdgeSetIntersector=function(){return new c_},bt.prototype.addSelfIntersectionNodes=function(wt){for(var Tt=this._edges.iterator();Tt.hasNext();)for(var At=Tt.next(),Ot=At.getLabel().getLocation(wt),Dt=At.eiList.iterator();Dt.hasNext();){var jt=Dt.next();this.addSelfIntersectionNode(wt,jt.coord,Ot)}},bt.prototype.add=function(){if(arguments.length!==1)return vt.prototype.add.apply(this,arguments);var wt=arguments[0];if(wt.isEmpty())return null;if(wt instanceof gu&&(this._useBoundaryDeterminationRule=!1),wt instanceof da)this.addPolygon(wt);else if(wt instanceof Ds)this.addLineString(wt);else if(wt instanceof Al)this.addPoint(wt);else if(wt instanceof Df)this.addCollection(wt);else if(wt instanceof gh)this.addCollection(wt);else if(wt instanceof gu)this.addCollection(wt);else{if(!(wt instanceof rl))throw new Error(wt.getClass().getName());this.addCollection(wt)}},bt.prototype.addCollection=function(wt){for(var Tt=0;Tt<wt.getNumGeometries();Tt++){var At=wt.getGeometryN(Tt);this.add(At)}},bt.prototype.locate=function(wt){return ro(this._parentGeom,mh)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Wf(this._parentGeom)),this._areaPtLocator.locate(wt)):this._ptLocator.locate(wt,this._parentGeom)},bt.prototype.findEdge=function(){if(arguments.length===1){var wt=arguments[0];return this._lineEdgeMap.get(wt)}return vt.prototype.findEdge.apply(this,arguments)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.determineBoundary=function(wt,Tt){return wt.isInBoundary(Tt)?Ur.BOUNDARY:Ur.INTERIOR},bt}(Fs),Xf=function(){if(this._li=new ph,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var vt=arguments[0];this.setComputationPrecision(vt.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Yf(0,vt)}else if(arguments.length===2){var bt=arguments[0],wt=arguments[1],Tt=tc.OGC_SFS_BOUNDARY_RULE;bt.getPrecisionModel().compareTo(wt.getPrecisionModel())>=0?this.setComputationPrecision(bt.getPrecisionModel()):this.setComputationPrecision(wt.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yf(0,bt,Tt),this._arg[1]=new Yf(1,wt,Tt)}else if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Dt=arguments[2];At.getPrecisionModel().compareTo(Ot.getPrecisionModel())>=0?this.setComputationPrecision(At.getPrecisionModel()):this.setComputationPrecision(Ot.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yf(0,At,Dt),this._arg[1]=new Yf(1,Ot,Dt)}};Xf.prototype.getArgGeometry=function(vt){return this._arg[vt].getGeometry()},Xf.prototype.setComputationPrecision=function(vt){this._resultPrecisionModel=vt,this._li.setPrecisionModel(this._resultPrecisionModel)},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var rd=function(){};rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},rd.map=function(){if(arguments[0]instanceof to&&ro(arguments[1],rd.MapOp)){for(var vt=arguments[0],bt=arguments[1],wt=new vi,Tt=0;Tt<vt.getNumGeometries();Tt++){var At=bt.map(vt.getGeometryN(Tt));At!==null&&wt.add(At)}return vt.getFactory().buildGeometry(wt)}if(ro(arguments[0],ha)&&ro(arguments[1],rd.MapOp)){for(var Ot=arguments[0],Dt=arguments[1],jt=new vi,Gt=Ot.iterator();Gt.hasNext();){var qt=Gt.next(),en=Dt.map(qt);en!==null&&jt.add(en)}return jt}},rd.MapOp=function(){};var vo=function(vt){function bt(){var wt=arguments[0],Tt=arguments[1];vt.call(this,wt,Tt),this._ptLocator=new Ul,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Il,this._resultPolyList=new vi,this._resultLineList=new vi,this._resultPointList=new vi,this._graph=new Fs(new Ny),this._geomFact=wt.getFactory()}return vt&&(bt.__proto__=vt),bt.prototype=Object.create(vt&&vt.prototype),bt.prototype.constructor=bt,bt.prototype.insertUniqueEdge=function(wt){var Tt=this._edgeList.findEqualEdge(wt);if(Tt!==null){var At=Tt.getLabel(),Ot=wt.getLabel();Tt.isPointwiseEqual(wt)||(Ot=new bs(wt.getLabel())).flip();var Dt=Tt.getDepth();Dt.isNull()&&Dt.add(At),Dt.add(Ot),At.merge(Ot)}else this._edgeList.add(wt)},bt.prototype.getGraph=function(){return this._graph},bt.prototype.cancelDuplicateResultEdges=function(){for(var wt=this._graph.getEdgeEnds().iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getSym();Tt.isInResult()&&At.isInResult()&&(Tt.setInResult(!1),At.setInResult(!1))}},bt.prototype.isCoveredByLA=function(wt){return!!this.isCovered(wt,this._resultLineList)||!!this.isCovered(wt,this._resultPolyList)},bt.prototype.computeGeometry=function(wt,Tt,At,Ot){var Dt=new vi;return Dt.addAll(wt),Dt.addAll(Tt),Dt.addAll(At),Dt.isEmpty()?bt.createEmptyResult(Ot,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(Dt)},bt.prototype.mergeSymLabels=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();)wt.next().getEdges().mergeSymLabels()},bt.prototype.isCovered=function(wt,Tt){for(var At=Tt.iterator();At.hasNext();){var Ot=At.next();if(this._ptLocator.locate(wt,Ot)!==Ur.EXTERIOR)return!0}return!1},bt.prototype.replaceCollapsedEdges=function(){for(var wt=new vi,Tt=this._edgeList.iterator();Tt.hasNext();){var At=Tt.next();At.isCollapsed()&&(Tt.remove(),wt.add(At.getCollapsedEdge()))}this._edgeList.addAll(wt)},bt.prototype.updateNodeLabelling=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getEdges().getLabel();Tt.getLabel().merge(At)}},bt.prototype.getResultGeometry=function(wt){return this.computeOverlay(wt),this._resultGeom},bt.prototype.insertUniqueEdges=function(wt){for(var Tt=wt.iterator();Tt.hasNext();){var At=Tt.next();this.insertUniqueEdge(At)}},bt.prototype.computeOverlay=function(wt){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var Tt=new vi;this._arg[0].computeSplitEdges(Tt),this._arg[1].computeSplitEdges(Tt),this.insertUniqueEdges(Tt),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),td.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(wt),this.cancelDuplicateResultEdges();var At=new gl(this._geomFact);At.add(this._graph),this._resultPolyList=At.getPolygons();var Ot=new Kc(this,this._geomFact,this._ptLocator);this._resultLineList=Ot.build(wt);var Dt=new Ud(this,this._geomFact,this._ptLocator);this._resultPointList=Dt.build(wt),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,wt)},bt.prototype.labelIncompleteNode=function(wt,Tt){var At=this._ptLocator.locate(wt.getCoordinate(),this._arg[Tt].getGeometry());wt.getLabel().setLocation(Tt,At)},bt.prototype.copyPoints=function(wt){for(var Tt=this._arg[wt].getNodeIterator();Tt.hasNext();){var At=Tt.next();this._graph.addNode(At.getCoordinate()).setLabel(wt,At.getLabel().getLocation(wt))}},bt.prototype.findResultAreaEdges=function(wt){for(var Tt=this._graph.getEdgeEnds().iterator();Tt.hasNext();){var At=Tt.next(),Ot=At.getLabel();Ot.isArea()&&!At.isInteriorAreaEdge()&&bt.isResultOfOp(Ot.getLocation(0,mi.RIGHT),Ot.getLocation(1,mi.RIGHT),wt)&&At.setInResult(!0)}},bt.prototype.computeLabelsFromDepths=function(){for(var wt=this._edgeList.iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getLabel(),Ot=Tt.getDepth();if(!Ot.isNull()){Ot.normalize();for(var Dt=0;Dt<2;Dt++)At.isNull(Dt)||!At.isArea()||Ot.isNull(Dt)||(Ot.getDelta(Dt)===0?At.toLine(Dt):(_o.isTrue(!Ot.isNull(Dt,mi.LEFT),"depth of LEFT side has not been initialized"),At.setLocation(Dt,mi.LEFT,Ot.getLocation(Dt,mi.LEFT)),_o.isTrue(!Ot.isNull(Dt,mi.RIGHT),"depth of RIGHT side has not been initialized"),At.setLocation(Dt,mi.RIGHT,Ot.getLocation(Dt,mi.RIGHT))))}}},bt.prototype.computeLabelling=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();)wt.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},bt.prototype.labelIncompleteNodes=function(){for(var wt=this._graph.getNodes().iterator();wt.hasNext();){var Tt=wt.next(),At=Tt.getLabel();Tt.isIsolated()&&(At.isNull(0)?this.labelIncompleteNode(Tt,0):this.labelIncompleteNode(Tt,1)),Tt.getEdges().updateLabelling(At)}},bt.prototype.isCoveredByA=function(wt){return!!this.isCovered(wt,this._resultPolyList)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt}(Xf);vo.overlayOp=function(vt,bt,wt){return new vo(vt,bt).getResultGeometry(wt)},vo.intersection=function(vt,bt){if(vt.isEmpty()||bt.isEmpty())return vo.createEmptyResult(vo.INTERSECTION,vt,bt,vt.getFactory());if(vt.isGeometryCollection()){var wt=bt;return Vd.map(vt,{interfaces_:function(){return[rd.MapOp]},map:function(Tt){return Tt.intersection(wt)}})}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(bt),Ma.overlayOp(vt,bt,vo.INTERSECTION)},vo.symDifference=function(vt,bt){if(vt.isEmpty()||bt.isEmpty()){if(vt.isEmpty()&&bt.isEmpty())return vo.createEmptyResult(vo.SYMDIFFERENCE,vt,bt,vt.getFactory());if(vt.isEmpty())return bt.copy();if(bt.isEmpty())return vt.copy()}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(bt),Ma.overlayOp(vt,bt,vo.SYMDIFFERENCE)},vo.resultDimension=function(vt,bt,wt){var Tt=bt.getDimension(),At=wt.getDimension(),Ot=-1;switch(vt){case vo.INTERSECTION:Ot=Math.min(Tt,At);break;case vo.UNION:Ot=Math.max(Tt,At);break;case vo.DIFFERENCE:Ot=Tt;break;case vo.SYMDIFFERENCE:Ot=Math.max(Tt,At)}return Ot},vo.createEmptyResult=function(vt,bt,wt,Tt){var At=null;switch(vo.resultDimension(vt,bt,wt)){case-1:At=Tt.createGeometryCollection(new Array(0).fill(null));break;case 0:At=Tt.createPoint();break;case 1:At=Tt.createLineString();break;case 2:At=Tt.createPolygon()}return At},vo.difference=function(vt,bt){return vt.isEmpty()?vo.createEmptyResult(vo.DIFFERENCE,vt,bt,vt.getFactory()):bt.isEmpty()?vt.copy():(vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(bt),Ma.overlayOp(vt,bt,vo.DIFFERENCE))},vo.isResultOfOp=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1],wt=vt.getLocation(0),Tt=vt.getLocation(1);return vo.isResultOfOp(wt,Tt,bt)}if(arguments.length===3){var At=arguments[0],Ot=arguments[1],Dt=arguments[2];switch(At===Ur.BOUNDARY&&(At=Ur.INTERIOR),Ot===Ur.BOUNDARY&&(Ot=Ur.INTERIOR),Dt){case vo.INTERSECTION:return At===Ur.INTERIOR&&Ot===Ur.INTERIOR;case vo.UNION:return At===Ur.INTERIOR||Ot===Ur.INTERIOR;case vo.DIFFERENCE:return At===Ur.INTERIOR&&Ot!==Ur.INTERIOR;case vo.SYMDIFFERENCE:return At===Ur.INTERIOR&&Ot!==Ur.INTERIOR||At!==Ur.INTERIOR&&Ot===Ur.INTERIOR}return!1}},vo.INTERSECTION=1,vo.UNION=2,vo.DIFFERENCE=3,vo.SYMDIFFERENCE=4;var Ch=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ul,this._seg=new Vi;var vt=arguments[0],bt=arguments[1];this._g=vt,this._boundaryDistanceTolerance=bt,this._linework=this.extractLinework(vt)};Ch.prototype.isWithinToleranceOfBoundary=function(vt){for(var bt=this,wt=0;wt<this._linework.getNumGeometries();wt++)for(var Tt=bt._linework.getGeometryN(wt).getCoordinateSequence(),At=0;At<Tt.size()-1;At++)if(Tt.getCoordinate(At,bt._seg.p0),Tt.getCoordinate(At+1,bt._seg.p1),bt._seg.distance(vt)<=bt._boundaryDistanceTolerance)return!0;return!1},Ch.prototype.getLocation=function(vt){return this.isWithinToleranceOfBoundary(vt)?Ur.BOUNDARY:this._ptLocator.locate(vt,this._g)},Ch.prototype.extractLinework=function(vt){var bt=new Wd;vt.apply(bt);var wt=bt.getLinework(),Tt=Io.toLineStringArray(wt);return vt.getFactory().createMultiLineString(Tt)},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var Wd=function(){this._linework=null,this._linework=new vi};Wd.prototype.getLinework=function(){return this._linework},Wd.prototype.filter=function(vt){if(vt instanceof da){var bt=vt;this._linework.add(bt.getExteriorRing());for(var wt=0;wt<bt.getNumInteriorRing();wt++)this._linework.add(bt.getInteriorRingN(wt))}},Wd.prototype.interfaces_=function(){return[Vc]},Wd.prototype.getClass=function(){return Wd};var Th=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var vt=arguments[0];this._g=vt};Th.prototype.extractPoints=function(vt,bt,wt){for(var Tt=vt.getCoordinates(),At=0;At<Tt.length-1;At++)this.computeOffsetPoints(Tt[At],Tt[At+1],bt,wt)},Th.prototype.setSidesToGenerate=function(vt,bt){this._doLeft=vt,this._doRight=bt},Th.prototype.getPoints=function(vt){for(var bt=new vi,wt=Ha.getLines(this._g).iterator();wt.hasNext();){var Tt=wt.next();this.extractPoints(Tt,vt,bt)}return bt},Th.prototype.computeOffsetPoints=function(vt,bt,wt,Tt){var At=bt.x-vt.x,Ot=bt.y-vt.y,Dt=Math.sqrt(At*At+Ot*Ot),jt=wt*At/Dt,Gt=wt*Ot/Dt,qt=(bt.x+vt.x)/2,en=(bt.y+vt.y)/2;if(this._doLeft){var Xt=new Nr(qt-Gt,en+jt);Tt.add(Xt)}if(this._doRight){var sn=new Nr(qt+Gt,en-jt);Tt.add(sn)}},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var _l=function vt(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=vt.TOLERANCE,this._testCoords=new vi;var bt=arguments[0],wt=arguments[1],Tt=arguments[2];this._boundaryDistanceTolerance=vt.computeBoundaryDistanceTolerance(bt,wt),this._geom=[bt,wt,Tt],this._locFinder=[new Ch(this._geom[0],this._boundaryDistanceTolerance),new Ch(this._geom[1],this._boundaryDistanceTolerance),new Ch(this._geom[2],this._boundaryDistanceTolerance)]},H0={TOLERANCE:{configurable:!0}};_l.prototype.reportResult=function(vt,bt,wt){za.out.println("Overlay result invalid - A:"+Ur.toLocationSymbol(bt[0])+" B:"+Ur.toLocationSymbol(bt[1])+" expected:"+(wt?"i":"e")+" actual:"+Ur.toLocationSymbol(bt[2]))},_l.prototype.isValid=function(vt){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var bt=this.checkValid(vt);return bt},_l.prototype.checkValid=function(){var vt=this;if(arguments.length===1){for(var bt=arguments[0],wt=0;wt<this._testCoords.size();wt++){var Tt=vt._testCoords.get(wt);if(!vt.checkValid(bt,Tt))return vt._invalidLocation=Tt,!1}return!0}if(arguments.length===2){var At=arguments[0],Ot=arguments[1];return this._location[0]=this._locFinder[0].getLocation(Ot),this._location[1]=this._locFinder[1].getLocation(Ot),this._location[2]=this._locFinder[2].getLocation(Ot),!!_l.hasLocation(this._location,Ur.BOUNDARY)||this.isValidResult(At,this._location)}},_l.prototype.addTestPts=function(vt){var bt=new Th(vt);this._testCoords.addAll(bt.getPoints(5*this._boundaryDistanceTolerance))},_l.prototype.isValidResult=function(vt,bt){var wt=vo.isResultOfOp(bt[0],bt[1],vt),Tt=!(wt^bt[2]===Ur.INTERIOR);return Tt||this.reportResult(vt,bt,wt),Tt},_l.prototype.getInvalidLocation=function(){return this._invalidLocation},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l},_l.hasLocation=function(vt,bt){for(var wt=0;wt<3;wt++)if(vt[wt]===bt)return!0;return!1},_l.computeBoundaryDistanceTolerance=function(vt,bt){return Math.min(zo.computeSizeBasedSnapTolerance(vt),zo.computeSizeBasedSnapTolerance(bt))},_l.isValid=function(vt,bt,wt,Tt){return new _l(vt,bt,Tt).isValid(wt)},H0.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(_l,H0);var Qa=function vt(bt){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=vt.extractFactory(bt),this._inputGeoms=bt};Qa.prototype.extractElements=function(vt,bt){if(vt===null)return null;for(var wt=0;wt<vt.getNumGeometries();wt++){var Tt=vt.getGeometryN(wt);this._skipEmpty&&Tt.isEmpty()||bt.add(Tt)}},Qa.prototype.combine=function(){for(var vt=new vi,bt=this._inputGeoms.iterator();bt.hasNext();){var wt=bt.next();this.extractElements(wt,vt)}return vt.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(vt)},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa},Qa.combine=function(){if(arguments.length===1){var vt=arguments[0],bt=new Qa(vt);return bt.combine()}if(arguments.length===2){var wt=arguments[0],Tt=arguments[1],At=new Qa(Qa.createList(wt,Tt));return At.combine()}if(arguments.length===3){var Ot=arguments[0],Dt=arguments[1],jt=arguments[2],Gt=new Qa(Qa.createList(Ot,Dt,jt));return Gt.combine()}},Qa.extractFactory=function(vt){return vt.isEmpty()?null:vt.iterator().next().getFactory()},Qa.createList=function(){if(arguments.length===2){var vt=arguments[0],bt=arguments[1],wt=new vi;return wt.add(vt),wt.add(bt),wt}if(arguments.length===3){var Tt=arguments[0],At=arguments[1],Ot=arguments[2],Dt=new vi;return Dt.add(Tt),Dt.add(At),Dt.add(Ot),Dt}};var oa=function(){this._inputPolys=null,this._geomFactory=null;var vt=arguments[0];this._inputPolys=vt,this._inputPolys===null&&(this._inputPolys=new vi)},j0={STRTREE_NODE_CAPACITY:{configurable:!0}};oa.prototype.reduceToGeometries=function(vt){for(var bt=new vi,wt=vt.iterator();wt.hasNext();){var Tt=wt.next(),At=null;ro(Tt,vc)?At=this.unionTree(Tt):Tt instanceof to&&(At=Tt),bt.add(At)}return bt},oa.prototype.extractByEnvelope=function(vt,bt,wt){for(var Tt=new vi,At=0;At<bt.getNumGeometries();At++){var Ot=bt.getGeometryN(At);Ot.getEnvelopeInternal().intersects(vt)?Tt.add(Ot):wt.add(Ot)}return this._geomFactory.buildGeometry(Tt)},oa.prototype.unionOptimized=function(vt,bt){var wt=vt.getEnvelopeInternal(),Tt=bt.getEnvelopeInternal();if(!wt.intersects(Tt))return Qa.combine(vt,bt);if(vt.getNumGeometries()<=1&&bt.getNumGeometries()<=1)return this.unionActual(vt,bt);var At=wt.intersection(Tt);return this.unionUsingEnvelopeIntersection(vt,bt,At)},oa.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var vt=new $y(oa.STRTREE_NODE_CAPACITY),bt=this._inputPolys.iterator();bt.hasNext();){var wt=bt.next();vt.insert(wt.getEnvelopeInternal(),wt)}this._inputPolys=null;var Tt=vt.itemsTree();return this.unionTree(Tt)},oa.prototype.binaryUnion=function(){if(arguments.length===1){var vt=arguments[0];return this.binaryUnion(vt,0,vt.size())}if(arguments.length===3){var bt=arguments[0],wt=arguments[1],Tt=arguments[2];if(Tt-wt<=1){var At=oa.getGeometry(bt,wt);return this.unionSafe(At,null)}if(Tt-wt==2)return this.unionSafe(oa.getGeometry(bt,wt),oa.getGeometry(bt,wt+1));var Ot=Math.trunc((Tt+wt)/2),Dt=this.binaryUnion(bt,wt,Ot),jt=this.binaryUnion(bt,Ot,Tt);return this.unionSafe(Dt,jt)}},oa.prototype.repeatedUnion=function(vt){for(var bt=null,wt=vt.iterator();wt.hasNext();){var Tt=wt.next();bt=bt===null?Tt.copy():bt.union(Tt)}return bt},oa.prototype.unionSafe=function(vt,bt){return vt===null&&bt===null?null:vt===null?bt.copy():bt===null?vt.copy():this.unionOptimized(vt,bt)},oa.prototype.unionActual=function(vt,bt){return oa.restrictToPolygons(vt.union(bt))},oa.prototype.unionTree=function(vt){var bt=this.reduceToGeometries(vt);return this.binaryUnion(bt)},oa.prototype.unionUsingEnvelopeIntersection=function(vt,bt,wt){var Tt=new vi,At=this.extractByEnvelope(wt,vt,Tt),Ot=this.extractByEnvelope(wt,bt,Tt),Dt=this.unionActual(At,Ot);return Tt.add(Dt),Qa.combine(Tt)},oa.prototype.bufferUnion=function(){if(arguments.length===1){var vt=arguments[0],bt=vt.get(0).getFactory(),wt=bt.buildGeometry(vt),Tt=wt.buffer(0);return Tt}if(arguments.length===2){var At=arguments[0],Ot=arguments[1],Dt=At.getFactory(),jt=Dt.createGeometryCollection([At,Ot]),Gt=jt.buffer(0);return Gt}},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa},oa.restrictToPolygons=function(vt){if(ro(vt,mh))return vt;var bt=Bu.getPolygons(vt);return bt.size()===1?bt.get(0):vt.getFactory().createMultiPolygon(Io.toPolygonArray(bt))},oa.getGeometry=function(vt,bt){return bt>=vt.size()?null:vt.get(bt)},oa.union=function(vt){return new oa(vt).union()},j0.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(oa,j0);var Pc=function(){};function Hu(){return new Zf}function Zf(){this.reset()}Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.union=function(vt,bt){if(vt.isEmpty()||bt.isEmpty()){if(vt.isEmpty()&&bt.isEmpty())return vo.createEmptyResult(vo.UNION,vt,bt,vt.getFactory());if(vt.isEmpty())return bt.copy();if(bt.isEmpty())return vt.copy()}return vt.checkNotGeometryCollection(vt),vt.checkNotGeometryCollection(bt),Ma.overlayOp(vt,bt,vo.UNION)},Zf.prototype={constructor:Zf,reset:function(){this.s=this.t=0},add:function(vt){V0(eg,vt,this.t),V0(this,eg.s,this.s),this.s?this.t+=eg.t:this.s=eg.t},valueOf:function(){return this.s}};var eg=new Zf;function V0(vt,bt,wt){var Tt=vt.s=bt+wt,At=Tt-bt,Ot=Tt-At;vt.t=bt-Ot+(wt-At)}var Qs=1e-6,ws=Math.PI,ju=ws/2,zy=ws/4,Vu=2*ws,io=180/ws,ac=ws/180,al=Math.abs,u_=Math.atan,Kf=Math.atan2,ya=Math.cos,va=Math.sin,tg=Math.sqrt;function pm(vt){return vt>1?0:vt<-1?ws:Math.acos(vt)}function Eu(vt){return vt>1?ju:vt<-1?-ju:Math.asin(vt)}function od(){}function ng(vt,bt){vt&&U0.hasOwnProperty(vt.type)&&U0[vt.type](vt,bt)}var gm={Feature:function(vt,bt){ng(vt.geometry,bt)},FeatureCollection:function(vt,bt){for(var wt=vt.features,Tt=-1,At=wt.length;++Tt<At;)ng(wt[Tt].geometry,bt)}},U0={Sphere:function(vt,bt){bt.sphere()},Point:function(vt,bt){vt=vt.coordinates,bt.point(vt[0],vt[1],vt[2])},MultiPoint:function(vt,bt){for(var wt=vt.coordinates,Tt=-1,At=wt.length;++Tt<At;)vt=wt[Tt],bt.point(vt[0],vt[1],vt[2])},LineString:function(vt,bt){mm(vt.coordinates,bt,0)},MultiLineString:function(vt,bt){for(var wt=vt.coordinates,Tt=-1,At=wt.length;++Tt<At;)mm(wt[Tt],bt,0)},Polygon:function(vt,bt){Jf(vt.coordinates,bt)},MultiPolygon:function(vt,bt){for(var wt=vt.coordinates,Tt=-1,At=wt.length;++Tt<At;)Jf(wt[Tt],bt)},GeometryCollection:function(vt,bt){for(var wt=vt.geometries,Tt=-1,At=wt.length;++Tt<At;)ng(wt[Tt],bt)}};function mm(vt,bt,wt){var Tt,At=-1,Ot=vt.length-wt;for(bt.lineStart();++At<Ot;)Tt=vt[At],bt.point(Tt[0],Tt[1],Tt[2]);bt.lineEnd()}function Jf(vt,bt){var wt=-1,Tt=vt.length;for(bt.polygonStart();++wt<Tt;)mm(vt[wt],bt,1);bt.polygonEnd()}Hu(),Hu();function G0(vt){return[Kf(vt[1],vt[0]),Eu(vt[2])]}function sa(vt){var bt=vt[0],wt=vt[1],Tt=ya(wt);return[Tt*ya(bt),Tt*va(bt),va(wt)]}function rg(vt,bt){return vt[0]*bt[0]+vt[1]*bt[1]+vt[2]*bt[2]}function ym(vt,bt){return[vt[1]*bt[2]-vt[2]*bt[1],vt[2]*bt[0]-vt[0]*bt[2],vt[0]*bt[1]-vt[1]*bt[0]]}function W0(vt,bt){vt[0]+=bt[0],vt[1]+=bt[1],vt[2]+=bt[2]}function vm(vt,bt){return[vt[0]*bt,vt[1]*bt,vt[2]*bt]}function q0(vt){var bt=tg(vt[0]*vt[0]+vt[1]*vt[1]+vt[2]*vt[2]);vt[0]/=bt,vt[1]/=bt,vt[2]/=bt}Hu();function Y0(vt,bt){function wt(Tt,At){return Tt=vt(Tt,At),bt(Tt[0],Tt[1])}return vt.invert&&bt.invert&&(wt.invert=function(Tt,At){return(Tt=bt.invert(Tt,At))&&vt.invert(Tt[0],Tt[1])}),wt}function X0(vt,bt){return[vt>ws?vt-Vu:vt<-ws?vt+Vu:vt,bt]}function Hy(vt){return function(bt,wt){return[(bt+=vt)>ws?bt-Vu:bt<-ws?bt+Vu:bt,wt]}}function Z0(vt){var bt=Hy(vt);return bt.invert=Hy(-vt),bt}function K0(vt,bt){var wt=ya(vt),Tt=va(vt),At=ya(bt),Ot=va(bt);function Dt(jt,Gt){var qt=ya(Gt),en=ya(jt)*qt,Xt=va(jt)*qt,sn=va(Gt),yn=sn*wt+en*Tt;return[Kf(Xt*At-yn*Ot,en*wt-sn*Tt),Eu(yn*At+Xt*Ot)]}return Dt.invert=function(jt,Gt){var qt=ya(Gt),en=ya(jt)*qt,Xt=va(jt)*qt,sn=va(Gt),yn=sn*At-Xt*Ot;return[Kf(Xt*At+sn*Ot,en*wt+yn*Tt),Eu(yn*wt-en*Tt)]},Dt}function J0(vt,bt){(bt=sa(bt))[0]-=vt,q0(bt);var wt=pm(-bt[1]);return((-bt[2]<0?-wt:wt)+Vu-Qs)%Vu}function _m(){var vt,bt=[];return{point:function(wt,Tt){vt.push([wt,Tt])},lineStart:function(){bt.push(vt=[])},lineEnd:od,rejoin:function(){bt.length>1&&bt.push(bt.pop().concat(bt.shift()))},result:function(){var wt=bt;return bt=[],vt=null,wt}}}function bm(vt,bt){return al(vt[0]-bt[0])<Qs&&al(vt[1]-bt[1])<Qs}function qd(vt,bt,wt,Tt){this.x=vt,this.z=bt,this.o=wt,this.e=Tt,this.v=!1,this.n=this.p=null}function Q0(vt,bt,wt,Tt,At){var Ot,Dt,jt=[],Gt=[];if(vt.forEach(function(vn){if(!((Sn=vn.length-1)<=0)){var Sn,fn,Dn=vn[0],rr=vn[Sn];if(bm(Dn,rr)){for(At.lineStart(),Ot=0;Ot<Sn;++Ot)At.point((Dn=vn[Ot])[0],Dn[1]);At.lineEnd()}else jt.push(fn=new qd(Dn,vn,null,!0)),Gt.push(fn.o=new qd(Dn,null,fn,!1)),jt.push(fn=new qd(rr,vn,null,!1)),Gt.push(fn.o=new qd(rr,null,fn,!0))}}),jt.length){for(Gt.sort(bt),ig(jt),ig(Gt),Ot=0,Dt=Gt.length;Ot<Dt;++Ot)Gt[Ot].e=wt=!wt;for(var qt,en,Xt=jt[0];;){for(var sn=Xt,yn=!0;sn.v;)if((sn=sn.n)===Xt)return;qt=sn.z,At.lineStart();do{if(sn.v=sn.o.v=!0,sn.e){if(yn)for(Ot=0,Dt=qt.length;Ot<Dt;++Ot)At.point((en=qt[Ot])[0],en[1]);else Tt(sn.x,sn.n.x,1,At);sn=sn.n}else{if(yn)for(qt=sn.p.z,Ot=qt.length-1;Ot>=0;--Ot)At.point((en=qt[Ot])[0],en[1]);else Tt(sn.x,sn.p.x,-1,At);sn=sn.p}qt=(sn=sn.o).z,yn=!yn}while(!sn.v);At.lineEnd()}}}function ig(vt){if(bt=vt.length){for(var bt,wt,Tt=0,At=vt[0];++Tt<bt;)At.n=wt=vt[Tt],wt.p=At,At=wt;At.n=wt=vt[0],wt.p=At}}function og(vt,bt){return vt<bt?-1:vt>bt?1:vt>=bt?0:NaN}X0.invert=X0;var Qf,Uu;(Qf=og).length===1&&(Uu=Qf,Qf=function(vt,bt){return og(Uu(vt),bt)});function jy(vt){for(var bt,wt,Tt,At=vt.length,Ot=-1,Dt=0;++Ot<At;)Dt+=vt[Ot].length;for(wt=new Array(Dt);--At>=0;)for(bt=(Tt=vt[At]).length;--bt>=0;)wt[--Dt]=Tt[bt];return wt}var ep=1e9,Va=-ep;function xm(vt,bt,wt,Tt){function At(qt,en){return vt<=qt&&qt<=wt&&bt<=en&&en<=Tt}function Ot(qt,en,Xt,sn){var yn=0,vn=0;if(qt==null||(yn=Dt(qt,Xt))!==(vn=Dt(en,Xt))||Gt(qt,en)<0^Xt>0)do sn.point(yn===0||yn===3?vt:wt,yn>1?Tt:bt);while((yn=(yn+Xt+4)%4)!==vn);else sn.point(en[0],en[1])}function Dt(qt,en){return al(qt[0]-vt)<Qs?en>0?0:3:al(qt[0]-wt)<Qs?en>0?2:1:al(qt[1]-bt)<Qs?en>0?1:0:en>0?3:2}function jt(qt,en){return Gt(qt.x,en.x)}function Gt(qt,en){var Xt=Dt(qt,1),sn=Dt(en,1);return Xt!==sn?Xt-sn:Xt===0?en[1]-qt[1]:Xt===1?qt[0]-en[0]:Xt===2?qt[1]-en[1]:en[0]-qt[0]}return function(qt){var en,Xt,sn,yn,vn,Sn,fn,Dn,rr,bn,Nn,Bn=qt,Gn=_m(),jn={point:Vr,lineStart:function(){jn.point=$r,Xt&&Xt.push(sn=[]),bn=!0,rr=!1,fn=Dn=NaN},lineEnd:function(){en&&($r(yn,vn),Sn&&rr&&Gn.rejoin(),en.push(Gn.result())),jn.point=Vr,rr&&Bn.lineEnd()},polygonStart:function(){Bn=Gn,en=[],Xt=[],Nn=!0},polygonEnd:function(){var qr=function(){for(var Br=0,Dr=0,Mr=Xt.length;Dr<Mr;++Dr)for(var Yr,zr,Qr=Xt[Dr],wr=1,ji=Qr.length,yi=Qr[0],bo=yi[0],Ri=yi[1];wr<ji;++wr)Yr=bo,zr=Ri,bo=(yi=Qr[wr])[0],Ri=yi[1],zr<=Tt?Ri>Tt&&(bo-Yr)*(Tt-zr)>(Ri-zr)*(vt-Yr)&&++Br:Ri<=Tt&&(bo-Yr)*(Tt-zr)<(Ri-zr)*(vt-Yr)&&--Br;return Br}(),Rr=Nn&&qr,Jr=(en=jy(en)).length;(Rr||Jr)&&(qt.polygonStart(),Rr&&(qt.lineStart(),Ot(null,null,1,qt),qt.lineEnd()),Jr&&Q0(en,jt,qr,Ot,qt),qt.polygonEnd()),Bn=qt,en=Xt=sn=null}};function Vr(qr,Rr){At(qr,Rr)&&Bn.point(qr,Rr)}function $r(qr,Rr){var Jr=At(qr,Rr);if(Xt&&sn.push([qr,Rr]),bn)yn=qr,vn=Rr,Sn=Jr,bn=!1,Jr&&(Bn.lineStart(),Bn.point(qr,Rr));else if(Jr&&rr)Bn.point(qr,Rr);else{var Br=[fn=Math.max(Va,Math.min(ep,fn)),Dn=Math.max(Va,Math.min(ep,Dn))],Dr=[qr=Math.max(Va,Math.min(ep,qr)),Rr=Math.max(Va,Math.min(ep,Rr))];(function(Mr,Yr,zr,Qr,wr,ji){var yi,bo=Mr[0],Ri=Mr[1],eo=0,Ho=1,Ss=Yr[0]-bo,Ua=Yr[1]-Ri;if(yi=zr-bo,Ss||!(yi>0)){if(yi/=Ss,Ss<0){if(yi<eo)return;yi<Ho&&(Ho=yi)}else if(Ss>0){if(yi>Ho)return;yi>eo&&(eo=yi)}if(yi=wr-bo,Ss||!(yi<0)){if(yi/=Ss,Ss<0){if(yi>Ho)return;yi>eo&&(eo=yi)}else if(Ss>0){if(yi<eo)return;yi<Ho&&(Ho=yi)}if(yi=Qr-Ri,Ua||!(yi>0)){if(yi/=Ua,Ua<0){if(yi<eo)return;yi<Ho&&(Ho=yi)}else if(Ua>0){if(yi>Ho)return;yi>eo&&(eo=yi)}if(yi=ji-Ri,Ua||!(yi<0)){if(yi/=Ua,Ua<0){if(yi>Ho)return;yi>eo&&(eo=yi)}else if(Ua>0){if(yi<eo)return;yi<Ho&&(Ho=yi)}return eo>0&&(Mr[0]=bo+eo*Ss,Mr[1]=Ri+eo*Ua),Ho<1&&(Yr[0]=bo+Ho*Ss,Yr[1]=Ri+Ho*Ua),!0}}}}})(Br,Dr,vt,bt,wt,Tt)?(rr||(Bn.lineStart(),Bn.point(Br[0],Br[1])),Bn.point(Dr[0],Dr[1]),Jr||Bn.lineEnd(),Nn=!1):Jr&&(Bn.lineStart(),Bn.point(qr,Rr),Nn=!1)}fn=qr,Dn=Rr,rr=Jr}return jn}}var e1=Hu();Hu();function Vy(vt){return vt}Hu(),Hu();var tp=1/0,Yd=tp,sd=-tp,wm=sd,Uy={point:function(vt,bt){vt<tp&&(tp=vt),vt>sd&&(sd=vt),bt<Yd&&(Yd=bt),bt>wm&&(wm=bt)},lineStart:od,lineEnd:od,polygonStart:od,polygonEnd:od,result:function(){var vt=[[tp,Yd],[sd,wm]];return sd=wm=-(Yd=tp=1/0),vt}};Hu();function n1(vt,bt,wt,Tt){return function(At,Ot){var Dt,jt,Gt,qt=bt(Ot),en=At.invert(Tt[0],Tt[1]),Xt=_m(),sn=bt(Xt),yn=!1,vn={point:Sn,lineStart:Dn,lineEnd:rr,polygonStart:function(){vn.point=bn,vn.lineStart=Nn,vn.lineEnd=Bn,jt=[],Dt=[]},polygonEnd:function(){vn.point=Sn,vn.lineStart=Dn,vn.lineEnd=rr,jt=jy(jt);var Gn=function(jn,Vr){var $r=Vr[0],qr=Vr[1],Rr=[va($r),-ya($r),0],Jr=0,Br=0;e1.reset();for(var Dr=0,Mr=jn.length;Dr<Mr;++Dr)if(zr=(Yr=jn[Dr]).length)for(var Yr,zr,Qr=Yr[zr-1],wr=Qr[0],ji=Qr[1]/2+zy,yi=va(ji),bo=ya(ji),Ri=0;Ri<zr;++Ri,wr=Ho,yi=Ua,bo=ag,Qr=eo){var eo=Yr[Ri],Ho=eo[0],Ss=eo[1]/2+zy,Ua=va(Ss),ag=ya(Ss),ad=Ho-wr,lg=ad>=0?1:-1,cg=lg*ad,np=cg>ws,Sm=yi*Ua;if(e1.add(Kf(Sm*lg*va(cg),bo*ag+Sm*ya(cg))),Jr+=np?ad+lg*Vu:ad,np^wr>=$r^Ho>=$r){var rp=ym(sa(Qr),sa(eo));q0(rp);var rv=ym(Rr,rp);q0(rv);var iv=(np^ad>=0?-1:1)*Eu(rv[2]);(qr>iv||qr===iv&&(rp[0]||rp[1]))&&(Br+=np^ad>=0?1:-1)}}return(Jr<-1e-6||Jr<Qs&&e1<-1e-6)^1&Br}(Dt,en);jt.length?(yn||(Ot.polygonStart(),yn=!0),Q0(jt,r1,Gn,wt,Ot)):Gn&&(yn||(Ot.polygonStart(),yn=!0),Ot.lineStart(),wt(null,null,1,Ot),Ot.lineEnd()),yn&&(Ot.polygonEnd(),yn=!1),jt=Dt=null},sphere:function(){Ot.polygonStart(),Ot.lineStart(),wt(null,null,1,Ot),Ot.lineEnd(),Ot.polygonEnd()}};function Sn(Gn,jn){var Vr=At(Gn,jn);vt(Gn=Vr[0],jn=Vr[1])&&Ot.point(Gn,jn)}function fn(Gn,jn){var Vr=At(Gn,jn);qt.point(Vr[0],Vr[1])}function Dn(){vn.point=fn,qt.lineStart()}function rr(){vn.point=Sn,qt.lineEnd()}function bn(Gn,jn){Gt.push([Gn,jn]);var Vr=At(Gn,jn);sn.point(Vr[0],Vr[1])}function Nn(){sn.lineStart(),Gt=[]}function Bn(){bn(Gt[0][0],Gt[0][1]),sn.lineEnd();var Gn,jn,Vr,$r,qr=sn.clean(),Rr=Xt.result(),Jr=Rr.length;if(Gt.pop(),Dt.push(Gt),Gt=null,Jr)if(1&qr){if((jn=(Vr=Rr[0]).length-1)>0){for(yn||(Ot.polygonStart(),yn=!0),Ot.lineStart(),Gn=0;Gn<jn;++Gn)Ot.point(($r=Vr[Gn])[0],$r[1]);Ot.lineEnd()}}else Jr>1&&2&qr&&Rr.push(Rr.pop().concat(Rr.shift())),jt.push(Rr.filter(Gy))}return vn}}function Gy(vt){return vt.length>1}function r1(vt,bt){return((vt=vt.x)[0]<0?vt[1]-ju-Qs:ju-vt[1])-((bt=bt.x)[0]<0?bt[1]-ju-Qs:ju-bt[1])}var i1=n1(function(){return!0},function(vt){var bt,wt=NaN,Tt=NaN,At=NaN;return{lineStart:function(){vt.lineStart(),bt=1},point:function(Ot,Dt){var jt=Ot>0?ws:-ws,Gt=al(Ot-wt);al(Gt-ws)<Qs?(vt.point(wt,Tt=(Tt+Dt)/2>0?ju:-ju),vt.point(At,Tt),vt.lineEnd(),vt.lineStart(),vt.point(jt,Tt),vt.point(Ot,Tt),bt=0):At!==jt&&Gt>=ws&&(al(wt-At)<Qs&&(wt-=At*Qs),al(Ot-jt)<Qs&&(Ot-=jt*Qs),Tt=function(qt,en,Xt,sn){var yn,vn,Sn=va(qt-Xt);return al(Sn)>Qs?u_((va(en)*(vn=ya(sn))*va(Xt)-va(sn)*(yn=ya(en))*va(qt))/(yn*vn*Sn)):(en+sn)/2}(wt,Tt,Ot,Dt),vt.point(At,Tt),vt.lineEnd(),vt.lineStart(),vt.point(jt,Tt),bt=0),vt.point(wt=Ot,Tt=Dt),At=jt},lineEnd:function(){vt.lineEnd(),wt=Tt=NaN},clean:function(){return 2-bt}}},function(vt,bt,wt,Tt){var At;if(vt==null)At=wt*ju,Tt.point(-ws,At),Tt.point(0,At),Tt.point(ws,At),Tt.point(ws,0),Tt.point(ws,-At),Tt.point(0,-At),Tt.point(-ws,-At),Tt.point(-ws,0),Tt.point(-ws,At);else if(al(vt[0]-bt[0])>Qs){var Ot=vt[0]<bt[0]?ws:-ws;At=wt*Ot/2,Tt.point(-Ot,At),Tt.point(0,At),Tt.point(Ot,At)}else Tt.point(bt[0],bt[1])},[-ws,-ju]);function Em(vt,bt){var wt=ya(vt),Tt=wt>0,At=al(wt)>Qs;function Ot(Gt,qt){return ya(Gt)*ya(qt)>wt}function Dt(Gt,qt,en){var Xt=[1,0,0],sn=ym(sa(Gt),sa(qt)),yn=rg(sn,sn),vn=sn[0],Sn=yn-vn*vn;if(!Sn)return!en&&Gt;var fn=wt*yn/Sn,Dn=-wt*vn/Sn,rr=ym(Xt,sn),bn=vm(Xt,fn);W0(bn,vm(sn,Dn));var Nn=rr,Bn=rg(bn,Nn),Gn=rg(Nn,Nn),jn=Bn*Bn-Gn*(rg(bn,bn)-1);if(!(jn<0)){var Vr=tg(jn),$r=vm(Nn,(-Bn-Vr)/Gn);if(W0($r,bn),$r=G0($r),!en)return $r;var qr,Rr=Gt[0],Jr=qt[0],Br=Gt[1],Dr=qt[1];Jr<Rr&&(qr=Rr,Rr=Jr,Jr=qr);var Mr=Jr-Rr,Yr=al(Mr-ws)<Qs;if(!Yr&&Dr<Br&&(qr=Br,Br=Dr,Dr=qr),Yr||Mr<Qs?Yr?Br+Dr>0^$r[1]<(al($r[0]-Rr)<Qs?Br:Dr):Br<=$r[1]&&$r[1]<=Dr:Mr>ws^(Rr<=$r[0]&&$r[0]<=Jr)){var zr=vm(Nn,(-Bn+Vr)/Gn);return W0(zr,bn),[$r,G0(zr)]}}}function jt(Gt,qt){var en=Tt?vt:ws-vt,Xt=0;return Gt<-en?Xt|=1:Gt>en&&(Xt|=2),qt<-en?Xt|=4:qt>en&&(Xt|=8),Xt}return n1(Ot,function(Gt){var qt,en,Xt,sn,yn;return{lineStart:function(){sn=Xt=!1,yn=1},point:function(vn,Sn){var fn,Dn=[vn,Sn],rr=Ot(vn,Sn),bn=Tt?rr?0:jt(vn,Sn):rr?jt(vn+(vn<0?ws:-ws),Sn):0;if(!qt&&(sn=Xt=rr)&&Gt.lineStart(),rr!==Xt&&(!(fn=Dt(qt,Dn))||bm(qt,fn)||bm(Dn,fn))&&(Dn[0]+=Qs,Dn[1]+=Qs,rr=Ot(Dn[0],Dn[1])),rr!==Xt)yn=0,rr?(Gt.lineStart(),fn=Dt(Dn,qt),Gt.point(fn[0],fn[1])):(fn=Dt(qt,Dn),Gt.point(fn[0],fn[1]),Gt.lineEnd()),qt=fn;else if(At&&qt&&Tt^rr){var Nn;bn&en||!(Nn=Dt(Dn,qt,!0))||(yn=0,Tt?(Gt.lineStart(),Gt.point(Nn[0][0],Nn[0][1]),Gt.point(Nn[1][0],Nn[1][1]),Gt.lineEnd()):(Gt.point(Nn[1][0],Nn[1][1]),Gt.lineEnd(),Gt.lineStart(),Gt.point(Nn[0][0],Nn[0][1])))}!rr||qt&&bm(qt,Dn)||Gt.point(Dn[0],Dn[1]),qt=Dn,Xt=rr,en=bn},lineEnd:function(){Xt&&Gt.lineEnd(),qt=null},clean:function(){return yn|(sn&&Xt)<<1}}},function(Gt,qt,en,Xt){(function(sn,yn,vn,Sn,fn,Dn){if(vn){var rr=ya(yn),bn=va(yn),Nn=Sn*vn;fn==null?(fn=yn+Sn*Vu,Dn=yn-Nn/2):(fn=J0(rr,fn),Dn=J0(rr,Dn),(Sn>0?fn<Dn:fn>Dn)&&(fn+=Sn*Vu));for(var Bn,Gn=fn;Sn>0?Gn>Dn:Gn<Dn;Gn-=Nn)Bn=G0([rr,-bn*ya(Gn),-bn*va(Gn)]),sn.point(Bn[0],Bn[1])}})(Xt,vt,bt,en,Gt,qt)},Tt?[0,-vt]:[-ws,vt-ws])}function Wy(vt){return function(bt){var wt=new o1;for(var Tt in vt)wt[Tt]=vt[Tt];return wt.stream=bt,wt}}function o1(){}function sg(vt,bt,wt){var Tt=bt[1][0]-bt[0][0],At=bt[1][1]-bt[0][1],Ot=vt.clipExtent&&vt.clipExtent();vt.scale(150).translate([0,0]),Ot!=null&&vt.clipExtent(null),function(en,Xt){en&&gm.hasOwnProperty(en.type)?gm[en.type](en,Xt):ng(en,Xt)}(wt,vt.stream(Uy));var Dt=Uy.result(),jt=Math.min(Tt/(Dt[1][0]-Dt[0][0]),At/(Dt[1][1]-Dt[0][1])),Gt=+bt[0][0]+(Tt-jt*(Dt[1][0]+Dt[0][0]))/2,qt=+bt[0][1]+(At-jt*(Dt[1][1]+Dt[0][1]))/2;return Ot!=null&&vt.clipExtent(Ot),vt.scale(150*jt).translate([Gt,qt])}o1.prototype={constructor:o1,point:function(vt,bt){this.stream.point(vt,bt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var h_=ya(30*ac);function qy(vt,bt){return+bt?function(wt,Tt){function At(Ot,Dt,jt,Gt,qt,en,Xt,sn,yn,vn,Sn,fn,Dn,rr){var bn=Xt-Ot,Nn=sn-Dt,Bn=bn*bn+Nn*Nn;if(Bn>4*Tt&&Dn--){var Gn=Gt+vn,jn=qt+Sn,Vr=en+fn,$r=tg(Gn*Gn+jn*jn+Vr*Vr),qr=Eu(Vr/=$r),Rr=al(al(Vr)-1)<Qs||al(jt-yn)<Qs?(jt+yn)/2:Kf(jn,Gn),Jr=wt(Rr,qr),Br=Jr[0],Dr=Jr[1],Mr=Br-Ot,Yr=Dr-Dt,zr=Nn*Mr-bn*Yr;(zr*zr/Bn>Tt||al((bn*Mr+Nn*Yr)/Bn-.5)>.3||Gt*vn+qt*Sn+en*fn<h_)&&(At(Ot,Dt,jt,Gt,qt,en,Br,Dr,Rr,Gn/=$r,jn/=$r,Vr,Dn,rr),rr.point(Br,Dr),At(Br,Dr,Rr,Gn,jn,Vr,Xt,sn,yn,vn,Sn,fn,Dn,rr))}}return function(Ot){var Dt,jt,Gt,qt,en,Xt,sn,yn,vn,Sn,fn,Dn,rr={point:bn,lineStart:Nn,lineEnd:Gn,polygonStart:function(){Ot.polygonStart(),rr.lineStart=jn},polygonEnd:function(){Ot.polygonEnd(),rr.lineStart=Nn}};function bn(qr,Rr){qr=wt(qr,Rr),Ot.point(qr[0],qr[1])}function Nn(){yn=NaN,rr.point=Bn,Ot.lineStart()}function Bn(qr,Rr){var Jr=sa([qr,Rr]),Br=wt(qr,Rr);At(yn,vn,sn,Sn,fn,Dn,yn=Br[0],vn=Br[1],sn=qr,Sn=Jr[0],fn=Jr[1],Dn=Jr[2],16,Ot),Ot.point(yn,vn)}function Gn(){rr.point=bn,Ot.lineEnd()}function jn(){Nn(),rr.point=Vr,rr.lineEnd=$r}function Vr(qr,Rr){Bn(Dt=qr,Rr),jt=yn,Gt=vn,qt=Sn,en=fn,Xt=Dn,rr.point=Bn}function $r(){At(yn,vn,sn,Sn,fn,Dn,jt,Gt,Dt,qt,en,Xt,16,Ot),rr.lineEnd=Gn,Gn()}return rr}}(vt,bt):function(wt){return Wy({point:function(Tt,At){Tt=wt(Tt,At),this.stream.point(Tt[0],Tt[1])}})}(vt)}var Yy=Wy({point:function(vt,bt){this.stream.point(vt*ac,bt*ac)}});function d_(vt){return function(bt){var wt,Tt,At,Ot,Dt,jt,Gt,qt,en,Xt,sn=150,yn=480,vn=250,Sn=0,fn=0,Dn=0,rr=0,bn=0,Nn=null,Bn=i1,Gn=null,jn=Vy,Vr=.5,$r=qy(Jr,Vr);function qr(Mr){return[(Mr=Dt(Mr[0]*ac,Mr[1]*ac))[0]*sn+Tt,At-Mr[1]*sn]}function Rr(Mr){return(Mr=Dt.invert((Mr[0]-Tt)/sn,(At-Mr[1])/sn))&&[Mr[0]*io,Mr[1]*io]}function Jr(Mr,Yr){return[(Mr=wt(Mr,Yr))[0]*sn+Tt,At-Mr[1]*sn]}function Br(){Dt=Y0(Ot=function(Yr,zr,Qr){return(Yr%=Vu)?zr||Qr?Y0(Z0(Yr),K0(zr,Qr)):Z0(Yr):zr||Qr?K0(zr,Qr):X0}(Dn,rr,bn),wt);var Mr=wt(Sn,fn);return Tt=yn-Mr[0]*sn,At=vn+Mr[1]*sn,Dr()}function Dr(){return en=Xt=null,qr}return qr.stream=function(Mr){return en&&Xt===Mr?en:en=Yy(Bn(Ot,$r(jn(Xt=Mr))))},qr.clipAngle=function(Mr){return arguments.length?(Bn=+Mr?Em(Nn=Mr*ac,6*ac):(Nn=null,i1),Dr()):Nn*io},qr.clipExtent=function(Mr){return arguments.length?(jn=Mr==null?(Gn=jt=Gt=qt=null,Vy):xm(Gn=+Mr[0][0],jt=+Mr[0][1],Gt=+Mr[1][0],qt=+Mr[1][1]),Dr()):Gn==null?null:[[Gn,jt],[Gt,qt]]},qr.scale=function(Mr){return arguments.length?(sn=+Mr,Br()):sn},qr.translate=function(Mr){return arguments.length?(yn=+Mr[0],vn=+Mr[1],Br()):[yn,vn]},qr.center=function(Mr){return arguments.length?(Sn=Mr[0]%360*ac,fn=Mr[1]%360*ac,Br()):[Sn*io,fn*io]},qr.rotate=function(Mr){return arguments.length?(Dn=Mr[0]%360*ac,rr=Mr[1]%360*ac,bn=Mr.length>2?Mr[2]%360*ac:0,Br()):[Dn*io,rr*io,bn*io]},qr.precision=function(Mr){return arguments.length?($r=qy(Jr,Vr=Mr*Mr),Dr()):tg(Vr)},qr.fitExtent=function(Mr,Yr){return sg(qr,Mr,Yr)},qr.fitSize=function(Mr,Yr){return function(zr,Qr,wr){return sg(zr,[[0,0],Qr],wr)}(qr,Mr,Yr)},function(){return wt=bt.apply(this,arguments),qr.invert=wt.invert&&Rr,Br()}}(function(){return vt})()}var s1=function(vt){return function(bt,wt){var Tt=ya(bt),At=ya(wt),Ot=vt(Tt*At);return[Ot*At*va(bt),Ot*va(wt)]}}(function(vt){return(vt=pm(vt))&&vt/va(vt)});function f_(){return d_(s1).scale(79.4188).clipAngle(179.999)}function Xd(vt,bt,wt,Tt){var At=vt.properties||{},Ot=vt.type==="Feature"?vt.geometry:vt;if(Ot.type==="GeometryCollection"){var Dt=[];return cr(vt,function(sn){var yn=Xd(sn,bt,wt,Tt);yn&&Dt.push(yn)}),Ft(Dt)}var jt=function(sn){var yn=hc(sn).geometry.coordinates,vn=[-yn[0],-yn[1]];return f_().rotate(vn).scale(rt)}(Ot),Gt={type:Ot.type,coordinates:Zy(Ot.coordinates,jt)},qt=new nm().read(Gt),en=on(rn(bt,wt),"meters"),Xt=Cs.bufferOp(qt,en,Tt);if(!Xy((Xt=new Py().write(Xt)).coordinates))return xt({type:Xt.type,coordinates:Ky(Xt.coordinates,jt)},At)}function Xy(vt){return Array.isArray(vt[0])?Xy(vt[0]):isNaN(vt[0])}function Zy(vt,bt){return typeof vt[0]!="object"?bt(vt):vt.map(function(wt){return Zy(wt,bt)})}function Ky(vt,bt){return typeof vt[0]!="object"?bt.invert(vt):vt.map(function(wt){return Ky(wt,bt)})}function Zd(vt,bt,wt){wt===void 0&&(wt={});var Tt=Hn(vt),At=Hn(bt),Ot=dh.intersection(Tt.coordinates,At.coordinates);return Ot.length===0?null:Ot.length===1?It(Ot[0],wt.properties):Wt(Ot,wt.properties)}function Jy(vt,bt,wt){wt===void 0&&(wt={});var Tt=JSON.stringify(wt.properties||{}),At=vt[0],Ot=vt[1],Dt=vt[2],jt=vt[3],Gt=(Ot+jt)/2,qt=(At+Dt)/2,en=2*bt/ao([At,Gt],[Dt,Gt],wt)*(Dt-At),Xt=2*bt/ao([qt,Ot],[qt,jt],wt)*(jt-Ot),sn=en/2,yn=2*sn,vn=Math.sqrt(3)/2*Xt,Sn=Dt-At,fn=jt-Ot,Dn=3/4*yn,rr=vn,bn=(Sn-yn)/(yn-sn/2),Nn=Math.floor(bn),Bn=(Nn*Dn-sn/2-Sn)/2-sn/2+Dn/2,Gn=Math.floor((fn-vn)/vn),jn=(fn-Gn*vn)/2,Vr=Gn*vn-fn>vn/2;Vr&&(jn-=vn/4);for(var $r=[],qr=[],Rr=0;Rr<6;Rr++){var Jr=2*Math.PI/6*Rr;$r.push(Math.cos(Jr)),qr.push(Math.sin(Jr))}for(var Br=[],Dr=0;Dr<=Nn;Dr++)for(var Mr=0;Mr<=Gn;Mr++){var Yr=Dr%2==1;if((Mr!==0||!Yr)&&(Mr!==0||!Vr)){var zr=Dr*Dn+At-Bn,Qr=Mr*rr+Ot+jn;if(Yr&&(Qr-=vn/2),wt.triangles===!0)ev([zr,Qr],en/2,Xt/2,JSON.parse(Tt),$r,qr).forEach(function(ji){wt.mask?Zd(wt.mask,ji)&&Br.push(ji):Br.push(ji)});else{var wr=Qy([zr,Qr],en/2,Xt/2,JSON.parse(Tt),$r,qr);wt.mask?Zd(wt.mask,wr)&&Br.push(wr):Br.push(wr)}}}return Ft(Br)}function Qy(vt,bt,wt,Tt,At,Ot){for(var Dt=[],jt=0;jt<6;jt++){var Gt=vt[0]+bt*At[jt],qt=vt[1]+wt*Ot[jt];Dt.push([Gt,qt])}return Dt.push(Dt[0].slice()),It([Dt],Tt)}function ev(vt,bt,wt,Tt,At,Ot){for(var Dt=[],jt=0;jt<6;jt++){var Gt=[];Gt.push(vt),Gt.push([vt[0]+bt*At[jt],vt[1]+wt*Ot[jt]]),Gt.push([vt[0]+bt*At[(jt+1)%6],vt[1]+wt*Ot[(jt+1)%6]]),Gt.push(vt),Dt.push(It([Gt],Tt))}return Dt}function tv(vt){return Wt(vt)}function p_(vt){return It(vt&&vt.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function nv(vt,bt,wt){return wt===void 0&&(wt={}),function(Tt,At,Ot,Dt){Dt===void 0&&(Dt={});for(var jt=[],Gt=Tt[0],qt=Tt[1],en=Tt[2],Xt=Tt[3],sn=At/ao([Gt,qt],[en,qt],Dt)*(en-Gt),yn=Ot/ao([Gt,qt],[Gt,Xt],Dt)*(Xt-qt),vn=en-Gt,Sn=Xt-qt,fn=Math.floor(vn/sn),Dn=Math.floor(Sn/yn),rr=(Sn-Dn*yn)/2,bn=Gt+(vn-fn*sn)/2,Nn=0;Nn<fn;Nn++){for(var Bn=qt+rr,Gn=0;Gn<Dn;Gn++){var jn=It([[[bn,Bn],[bn,Bn+yn],[bn+sn,Bn+yn],[bn+sn,Bn],[bn,Bn]]],Dt.properties);Dt.mask?C1(Dt.mask,jn)&&jt.push(jn):jt.push(jn),Bn+=yn}bn+=sn}return Ft(jt)}(vt,bt,bt,wt)}function a1(vt,bt,wt){wt===void 0&&(wt={});for(var Tt=[],At=bt/ao([vt[0],vt[1]],[vt[2],vt[1]],wt)*(vt[2]-vt[0]),Ot=bt/ao([vt[0],vt[1]],[vt[0],vt[3]],wt)*(vt[3]-vt[1]),Dt=0,jt=vt[0];jt<=vt[2];){for(var Gt=0,qt=vt[1];qt<=vt[3];){var en=null,Xt=null;Dt%2==0&&Gt%2==0?(en=It([[[jt,qt],[jt,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties),Xt=It([[[jt,qt+Ot],[jt+At,qt+Ot],[jt+At,qt],[jt,qt+Ot]]],wt.properties)):Dt%2==0&&Gt%2==1?(en=It([[[jt,qt],[jt+At,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties),Xt=It([[[jt,qt],[jt,qt+Ot],[jt+At,qt+Ot],[jt,qt]]],wt.properties)):Gt%2==0&&Dt%2==1?(en=It([[[jt,qt],[jt,qt+Ot],[jt+At,qt+Ot],[jt,qt]]],wt.properties),Xt=It([[[jt,qt],[jt+At,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties)):Gt%2==1&&Dt%2==1&&(en=It([[[jt,qt],[jt,qt+Ot],[jt+At,qt],[jt,qt]]],wt.properties),Xt=It([[[jt,qt+Ot],[jt+At,qt+Ot],[jt+At,qt],[jt,qt+Ot]]],wt.properties)),wt.mask?(Zd(wt.mask,en)&&Tt.push(en),Zd(wt.mask,Xt)&&Tt.push(Xt)):(Tt.push(en),Tt.push(Xt)),qt+=Ot,Gt++}Dt++,jt+=At}return Ft(Tt)}s1.invert=function(vt){return function(bt,wt){var Tt=tg(bt*bt+wt*wt),At=vt(Tt),Ot=va(At),Dt=ya(At);return[Kf(bt*Ot,Tt*Dt),Eu(Tt&&wt*Ot/Tt)]}}(function(vt){return vt}),nt.along=function(vt,bt,wt){wt===void 0&&(wt={});for(var Tt=Hn(vt).coordinates,At=0,Ot=0;Ot<Tt.length&&!(bt>=At&&Ot===Tt.length-1);Ot++){if(At>=bt){var Dt=bt-At;if(Dt){var jt=Rc(Tt[Ot],Tt[Ot-1])-180;return Ta(Tt[Ot],Dt,jt,wt)}return kt(Tt[Ot])}At+=ao(Tt[Ot],Tt[Ot+1],wt)}return kt(Tt[Tt.length-1])},nt.angle=function(vt,bt,wt,Tt){if(Tt===void 0&&(Tt={}),!cn(Tt))throw new Error("options is invalid");if(!vt)throw new Error("startPoint is required");if(!bt)throw new Error("midPoint is required");if(!wt)throw new Error("endPoint is required");var At=vt,Ot=bt,Dt=wt,jt=gn(Tt.mercator!==!0?Rc(At,Ot):sh(At,Ot)),Gt=gn(Tt.mercator!==!0?Rc(Dt,Ot):sh(Dt,Ot)),qt=Math.abs(jt-Gt);return Tt.explementary===!0?360-qt:qt},nt.applyFilter=Vg,nt.area=Bh,nt.areaFactors=_t,nt.bbox=un,nt.bboxClip=function(vt,bt){var wt=Hn(vt),Tt=wt.type,At=vt.type==="Feature"?vt.properties:{},Ot=wt.coordinates;switch(Tt){case"LineString":case"MultiLineString":var Dt=[];return Tt==="LineString"&&(Ot=[Ot]),Ot.forEach(function(jt){(function(Gt,qt,en){var Xt,sn,yn,vn,Sn,fn=Gt.length,Dn=su(Gt[0],qt),rr=[];for(en||(en=[]),Xt=1;Xt<fn;Xt++){for(vn=Gt[Xt-1],sn=yn=su(Sn=Gt[Xt],qt);;){if(!(Dn|sn)){rr.push(vn),sn!==yn?(rr.push(Sn),Xt<fn-1&&(en.push(rr),rr=[])):Xt===fn-1&&rr.push(Sn);break}if(Dn&sn)break;Dn?Dn=su(vn=wp(vn,Sn,Dn,qt),qt):sn=su(Sn=wp(vn,Sn,sn,qt),qt)}Dn=yn}rr.length&&en.push(rr)})(jt,bt,Dt)}),Dt.length===1?Nt(Dt[0],At):Yt(Dt,At);case"Polygon":return It(ua(Ot,bt),At);case"MultiPolygon":return Wt(Ot.map(function(jt){return ua(jt,bt)}),At);default:throw new Error("geometry "+Tt+" not supported")}},nt.bboxPolygon=up,nt.bearing=Rc,nt.bearingToAngle=gn,nt.bearingToAzimuth=gn,nt.bezier=bg,nt.bezierSpline=bg,nt.booleanClockwise=Ep,nt.booleanContains=function(vt,bt){var wt=Hn(vt),Tt=Hn(bt),At=wt.type,Ot=Tt.type,Dt=wt.coordinates,jt=Tt.coordinates;switch(At){case"Point":switch(Ot){case"Point":return o0(Dt,jt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"MultiPoint":switch(Ot){case"Point":return function(Gt,qt){var en,Xt=!1;for(en=0;en<Gt.coordinates.length;en++)if(o0(Gt.coordinates[en],qt.coordinates)){Xt=!0;break}return Xt}(wt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=0,Xt=qt.coordinates;en<Xt.length;en++){for(var sn=Xt[en],yn=!1,vn=0,Sn=Gt.coordinates;vn<Sn.length;vn++)if(o0(sn,Sn[vn])){yn=!0;break}if(!yn)return!1}return!0}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"Point":return Cl(Tt,wt,{ignoreEndVertices:!0});case"LineString":return function(Gt,qt){for(var en=!1,Xt=0,sn=qt.coordinates;Xt<sn.length;Xt++){var yn=sn[Xt];if(Cl({type:"Point",coordinates:yn},Gt,{ignoreEndVertices:!0})&&(en=!0),!Cl({type:"Point",coordinates:yn},Gt,{ignoreEndVertices:!1}))return!1}return en}(wt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=!1,Xt=0,sn=qt.coordinates;Xt<sn.length;Xt++){var yn=sn[Xt];if(Cl(yn,Gt,{ignoreEndVertices:!0})&&(en=!0),!Cl(yn,Gt))return!1}return!!en}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"Point":return oo(Tt,wt,{ignoreBoundary:!0});case"LineString":return function(Gt,qt){var en=!1,Xt=0,sn=un(Gt),yn=un(qt);if(!x1(sn,yn))return!1;for(;Xt<qt.coordinates.length-1;Xt++)if(oo({type:"Point",coordinates:Sv(qt.coordinates[Xt],qt.coordinates[Xt+1])},Gt,{ignoreBoundary:!0})){en=!0;break}return en}(wt,Tt);case"Polygon":return function(Gt,qt){if(Gt.type==="Feature"&&Gt.geometry===null||qt.type==="Feature"&&qt.geometry===null)return!1;var en=un(Gt),Xt=un(qt);if(!x1(en,Xt))return!1;for(var sn=Hn(qt).coordinates,yn=0,vn=sn;yn<vn.length;yn++)for(var Sn=0,fn=vn[yn];Sn<fn.length;Sn++)if(!oo(fn[Sn],Gt))return!1;return!0}(wt,Tt);case"MultiPoint":return function(Gt,qt){for(var en=0,Xt=qt.coordinates;en<Xt.length;en++)if(!oo(Xt[en],Gt,{ignoreBoundary:!0}))return!1;return!0}(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanCrosses=function(vt,bt){var wt=Hn(vt),Tt=Hn(bt),At=wt.type,Ot=Tt.type;switch(At){case"MultiPoint":switch(Ot){case"LineString":return w1(wt,Tt);case"Polygon":return s0(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"LineString":switch(Ot){case"MultiPoint":return w1(Tt,wt);case"LineString":return function(Dt,jt){if(Vs(Dt,jt).features.length>0)for(var Gt=0;Gt<Dt.coordinates.length-1;Gt++)for(var qt=0;qt<jt.coordinates.length-1;qt++){var en=!0;if(qt!==0&&qt!==jt.coordinates.length-2||(en=!1),S1(Dt.coordinates[Gt],Dt.coordinates[Gt+1],jt.coordinates[qt],en))return!0}return!1}(wt,Tt);case"Polygon":return E1(wt,Tt);default:throw new Error("feature2 "+Ot+" geometry not supported")}case"Polygon":switch(Ot){case"MultiPoint":return s0(Tt,wt);case"LineString":return E1(Tt,wt);default:throw new Error("feature2 "+Ot+" geometry not supported")}default:throw new Error("feature1 "+At+" geometry not supported")}},nt.booleanDisjoint=i0,nt.booleanEqual=function(vt,bt){return Hn(vt).type===Hn(bt).type&&new a0({precision:6}).compare(Kl(vt),Kl(bt))},nt.booleanIntersects=C1,nt.booleanOverlap=function(vt,bt){var wt=Hn(vt),Tt=Hn(bt),At=wt.type,Ot=Tt.type;if(At==="MultiPoint"&&Ot!=="MultiPoint"||(At==="LineString"||At==="MultiLineString")&&Ot!=="LineString"&&Ot!=="MultiLineString"||(At==="Polygon"||At==="MultiPolygon")&&Ot!=="Polygon"&&Ot!=="MultiPolygon")throw new Error("features must be of the same type");if(At==="Point")throw new Error("Point geometry not supported");if(new a0({precision:6}).compare(vt,bt))return!1;var Dt=0;switch(At){case"MultiPoint":for(var jt=0;jt<wt.coordinates.length;jt++)for(var Gt=0;Gt<Tt.coordinates.length;Gt++){var qt=wt.coordinates[jt],en=Tt.coordinates[Gt];if(qt[0]===en[0]&&qt[1]===en[1])return!0}return!1;case"LineString":case"MultiLineString":Fr(vt,function(Xt){Fr(bt,function(sn){vf(Xt,sn).features.length&&Dt++})});break;case"Polygon":case"MultiPolygon":Fr(vt,function(Xt){Fr(bt,function(sn){Vs(Xt,sn).features.length&&Dt++})})}return Dt>0},nt.booleanParallel=function(vt,bt){if(!vt)throw new Error("line1 is required");if(!bt)throw new Error("line2 is required");if(h0(vt,"line1")!=="LineString")throw new Error("line1 must be a LineString");if(h0(bt,"line2")!=="LineString")throw new Error("line2 must be a LineString");for(var wt=ka(Kl(vt)).features,Tt=ka(Kl(bt)).features,At=0;At<wt.length;At++){var Ot=wt[At].geometry.coordinates;if(!Tt[At])break;if(!Dg(Ot,Tt[At].geometry.coordinates))return!1}return!0},nt.booleanPointInPolygon=oo,nt.booleanPointOnLine=Cl,nt.booleanWithin=Fh,nt.buffer=function(vt,bt,wt){var Tt=(wt=wt||{}).units||"kilometers",At=wt.steps||8;if(!vt)throw new Error("geojson is required");if(typeof wt!="object")throw new Error("options must be an object");if(typeof At!="number")throw new Error("steps must be an number");if(bt===void 0)throw new Error("radius is required");if(At<=0)throw new Error("steps must be greater than 0");var Ot=[];switch(vt.type){case"GeometryCollection":return cr(vt,function(Dt){var jt=Xd(Dt,bt,Tt,At);jt&&Ot.push(jt)}),Ft(Ot);case"FeatureCollection":return Jn(vt,function(Dt){var jt=Xd(Dt,bt,Tt,At);jt&&Jn(jt,function(Gt){Gt&&Ot.push(Gt)})}),Ft(Ot)}return Xd(vt,bt,Tt,At)},nt.center=hc,nt.centerMean=y0,nt.centerMedian=function(vt,bt){if(bt===void 0&&(bt={}),!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.counter||10;if(!An(wt))throw new Error("counter must be a number");var Tt=bt.weight,At=y0(vt,{weight:bt.weight}),Ot=Ft([]);Jn(vt,function(jt){var Gt;Ot.features.push(dc(jt,{properties:{weight:(Gt=jt.properties)===null||Gt===void 0?void 0:Gt[Tt]}}))});var Dt={tolerance:bt.tolerance,medianCandidates:[]};return j1(At.geometry.coordinates,[0,0],Ot,Dt,wt)},nt.centerOfMass=function vt(bt,wt){switch(wt===void 0&&(wt={}),nr(bt)){case"Point":return kt(pn(bt),wt.properties);case"Polygon":var Tt=[];dn(bt,function(Nn){Tt.push(Nn)});var At,Ot,Dt,jt,Gt,qt,en,Xt,sn=dc(bt,{properties:wt.properties}),yn=sn.geometry.coordinates,vn=0,Sn=0,fn=0,Dn=Tt.map(function(Nn){return[Nn[0]-yn[0],Nn[1]-yn[1]]});for(At=0;At<Tt.length-1;At++)jt=(Ot=Dn[At])[0],qt=Ot[1],Gt=(Dt=Dn[At+1])[0],fn+=Xt=jt*(en=Dt[1])-Gt*qt,vn+=(jt+Gt)*Xt,Sn+=(qt+en)*Xt;if(fn===0)return sn;var rr=1/(6*(.5*fn));return kt([yn[0]+rr*vn,yn[1]+rr*Sn],wt.properties);default:var bn=So(bt);return bn?vt(bn,{properties:wt.properties}):dc(bt,{properties:wt.properties})}},nt.centroid=dc,nt.circle=hp,nt.cleanCoords=Kl,nt.clone=$o,nt.clusterEach=_0,nt.clusterReduce=jg,nt.clusters=Yv,nt.clustersDbscan=function(vt,bt,wt){wt===void 0&&(wt={}),wt.mutate!==!0&&(vt=$o(vt)),wt.minPoints=wt.minPoints||3;var Tt=new Lv.DBSCAN,At=Tt.run(lr(vt),Cn(bt,wt.units),wt.minPoints,ao),Ot=-1;return At.forEach(function(Dt){Ot++,Dt.forEach(function(jt){var Gt=vt.features[jt];Gt.properties||(Gt.properties={}),Gt.properties.cluster=Ot,Gt.properties.dbscan="core"})}),Tt.noise.forEach(function(Dt){var jt=vt.features[Dt];jt.properties||(jt.properties={}),jt.properties.cluster?jt.properties.dbscan="edge":jt.properties.dbscan="noise"}),vt},nt.clustersKmeans=function(vt,bt){bt===void 0&&(bt={});var wt=vt.features.length;bt.numberOfClusters=bt.numberOfClusters||Math.round(Math.sqrt(wt/2)),bt.numberOfClusters>wt&&(bt.numberOfClusters=wt),bt.mutate!==!0&&(vt=$o(vt));var Tt=lr(vt),At=Tt.slice(0,bt.numberOfClusters),Ot=u0(Tt,bt.numberOfClusters,At),Dt={};return Ot.centroids.forEach(function(jt,Gt){Dt[Gt]=jt}),Jn(vt,function(jt,Gt){var qt=Ot.idxs[Gt];jt.properties.cluster=qt,jt.properties.centroid=Dt[qt]}),vt},nt.collect=function(vt,bt,wt,Tt){var At=Ar(6),Ot=bt.features.map(function(Dt){var jt;return{minX:Dt.geometry.coordinates[0],minY:Dt.geometry.coordinates[1],maxX:Dt.geometry.coordinates[0],maxY:Dt.geometry.coordinates[1],property:(jt=Dt.properties)===null||jt===void 0?void 0:jt[wt]}});return At.load(Ot),vt.features.forEach(function(Dt){Dt.properties||(Dt.properties={});var jt=un(Dt),Gt=At.search({minX:jt[0],minY:jt[1],maxX:jt[2],maxY:jt[3]}),qt=[];Gt.forEach(function(en){oo([en.minX,en.minY],Dt)&&qt.push(en.property)}),Dt.properties[Tt]=qt}),vt},nt.collectionOf=Wn,nt.combine=function(vt){var bt={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return Jn(vt,function(wt){var Tt,At,Ot,Dt;switch((Dt=wt.geometry)===null||Dt===void 0?void 0:Dt.type){case"Point":bt.MultiPoint.coordinates.push(wt.geometry.coordinates),bt.MultiPoint.properties.push(wt.properties);break;case"MultiPoint":(Tt=bt.MultiPoint.coordinates).push.apply(Tt,wt.geometry.coordinates),bt.MultiPoint.properties.push(wt.properties);break;case"LineString":bt.MultiLineString.coordinates.push(wt.geometry.coordinates),bt.MultiLineString.properties.push(wt.properties);break;case"MultiLineString":(At=bt.MultiLineString.coordinates).push.apply(At,wt.geometry.coordinates),bt.MultiLineString.properties.push(wt.properties);break;case"Polygon":bt.MultiPolygon.coordinates.push(wt.geometry.coordinates),bt.MultiPolygon.properties.push(wt.properties);break;case"MultiPolygon":(Ot=bt.MultiPolygon.coordinates).push.apply(Ot,wt.geometry.coordinates),bt.MultiPolygon.properties.push(wt.properties)}}),Ft(Object.keys(bt).filter(function(wt){return bt[wt].coordinates.length}).sort().map(function(wt){return xt({type:wt,coordinates:bt[wt].coordinates},{collectedProperties:bt[wt].properties})}))},nt.concave=function(vt,bt){bt===void 0&&(bt={});var wt=bt.maxEdge||1/0,Tt=Yl(function(Ot){var Dt=[],jt={};return Jn(Ot,function(Gt){if(Gt.geometry){var qt=Gt.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(jt,qt)||(Dt.push(Gt),jt[qt]=!0)}}),Ft(Dt)}(vt));if(Tt.features=Tt.features.filter(function(Ot){var Dt=Ot.geometry.coordinates[0][0],jt=Ot.geometry.coordinates[0][1],Gt=Ot.geometry.coordinates[0][2],qt=ao(Dt,jt,bt),en=ao(jt,Gt,bt),Xt=ao(Dt,Gt,bt);return qt<=wt&&en<=wt&&Xt<=wt}),Tt.features.length<1)return null;var At=vg(Tt);return At.coordinates.length===1&&(At.coordinates=At.coordinates[0],At.type="Polygon"),xt(At)},nt.containsNumber=_n,nt.convertArea=Pn,nt.convertDistance=Cn,nt.convertLength=Cn,nt.convex=So,nt.coordAll=lr,nt.coordEach=dn,nt.coordReduce=Fn,nt.createBins=b0,nt.degrees2radians=kn,nt.degreesToRadians=kn,nt.destination=Ta,nt.difference=function(vt,bt){var wt=Hn(vt),Tt=Hn(bt),At=vt.properties||{},Ot=dh.difference(wt.coordinates,Tt.coordinates);return Ot.length===0?null:Ot.length===1?It(Ot[0],At):Wt(Ot,At)},nt.dissolve=function(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.propertyName;Wn(vt,"Polygon","dissolve");var Tt=[];if(!bt.propertyName)return wd(Wt(dh.union.apply(null,vt.features.map(function(Gt){return Gt.geometry.coordinates}))));var At={};Jn(vt,function(Gt){Object.prototype.hasOwnProperty.call(At,Gt.properties[wt])||(At[Gt.properties[wt]]=[]),At[Gt.properties[wt]].push(Gt)});for(var Ot=Object.keys(At),Dt=0;Dt<Ot.length;Dt++){var jt=Wt(dh.union.apply(null,At[Ot[Dt]].map(function(Gt){return Gt.geometry.coordinates})));jt.properties[wt]=Ot[Dt],Tt.push(jt)}return wd(Ft(Tt))},nt.distance=ao,nt.distanceToDegrees=ln,nt.distanceToRadians=rn,nt.distanceWeight=U1,nt.earthRadius=rt,nt.ellipse=z1,nt.envelope=ef,nt.explode=pd,nt.factors=it,nt.feature=xt,nt.featureCollection=Ft,nt.featureEach=Jn,nt.featureOf=Vn,nt.featureReduce=hr,nt.filterProperties=ny,nt.findPoint=er,nt.findSegment=gr,nt.flatten=wd,nt.flattenEach=Er,nt.flattenReduce=ar,nt.flip=function(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.mutate;if(!vt)throw new Error("geojson is required");return wt!==!1&&wt!==void 0||(vt=$o(vt)),dn(vt,function(Tt){var At=Tt[0],Ot=Tt[1];Tt[0]=Ot,Tt[1]=At}),vt},nt.geojsonType=or,nt.geomEach=cr,nt.geomReduce=Cr,nt.geometry=Et,nt.geometryCollection=Kt,nt.getCluster=ty,nt.getCoord=pn,nt.getCoords=Rn,nt.getGeom=Hn,nt.getType=nr,nt.greatCircle=function(vt,bt,wt){if(typeof(wt=wt||{})!="object")throw new Error("options is invalid");var Tt=wt.properties,At=wt.npoints,Ot=wt.offset;return vt=pn(vt),bt=pn(bt),Tt=Tt||{},At=At||100,Ot=Ot||10,new Kr({x:vt[0],y:vt[1]},{x:bt[0],y:bt[1]},Tt).Arc(At,{offset:Ot}).json()},nt.helpers=zn,nt.hexGrid=Jy,nt.inside=oo,nt.interpolate=function(vt,bt,wt){if(typeof(wt=wt||{})!="object")throw new Error("options is invalid");var Tt=wt.gridType,At=wt.property,Ot=wt.weight;if(!vt)throw new Error("points is required");if(Wn(vt,"Point","input must contain Points"),!bt)throw new Error("cellSize is required");if(Ot!==void 0&&typeof Ot!="number")throw new Error("weight must be a number");At=At||"elevation",Tt=Tt||"square",Ot=Ot||1;var Dt,jt=un(vt);switch(Tt){case"point":case"points":Dt=yf(jt,bt,wt);break;case"square":case"squares":Dt=nv(jt,bt,wt);break;case"hex":case"hexes":Dt=Jy(jt,bt,wt);break;case"triangle":case"triangles":Dt=a1(jt,bt,wt);break;default:throw new Error("invalid gridType")}var Gt=[];return Jn(Dt,function(qt){var en=0,Xt=0;Jn(vt,function(yn){var vn,Sn=ao(Tt==="point"?qt:dc(qt),yn,wt);if(At!==void 0&&(vn=yn.properties[At]),vn===void 0&&(vn=yn.geometry.coordinates[2]),vn===void 0)throw new Error("zValue is missing");Sn===0&&(en=vn);var fn=1/Math.pow(Sn,Ot);Xt+=fn,en+=fn*vn});var sn=$o(qt);sn.properties[At]=en/Xt,Gt.push(sn)}),Ft(Gt)},nt.intersect=Zd,nt.invariant=sr,nt.isNumber=An,nt.isObject=cn,nt.isobands=function(vt,bt,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.zProperty||"elevation",At=wt.commonProperties||{},Ot=wt.breaksProperties||[];if(Wn(vt,"Point","Input must contain Points"),!bt)throw new Error("breaks is required");if(!Array.isArray(bt))throw new Error("breaks is not an Array");if(!cn(At))throw new Error("commonProperties is not an Object");if(!Array.isArray(Ot))throw new Error("breaksProperties is not an Array");var Dt=Um(vt,{zProperty:Tt,flip:!0}),jt=function(Gt,qt,en){for(var Xt=[],sn=1;sn<qt.length;sn++){var yn=+qt[sn-1],vn=+qt[sn],Sn=bv(Cp(Gh(Gt,yn,vn-yn))),fn={};fn.groupedRings=Sn,fn[en]=yn+"-"+vn,Xt.push(fn)}return Xt}(Dt,bt,Tt);return Ft((jt=function(Gt,qt,en){var Xt=un(en),sn=Xt[2]-Xt[0],yn=Xt[3]-Xt[1],vn=Xt[0],Sn=Xt[1],fn=qt[0].length-1,Dn=qt.length-1,rr=sn/fn,bn=yn/Dn,Nn=function(Bn){Bn[0]=Bn[0]*rr+vn,Bn[1]=Bn[1]*bn+Sn};return Gt.forEach(function(Bn){Bn.groupedRings.forEach(function(Gn){Gn.forEach(function(jn){jn.forEach(Nn)})})}),Gt}(jt,Dt,vt)).map(function(Gt,qt){if(Ot[qt]&&!cn(Ot[qt]))throw new Error("Each mappedProperty is required to be an Object");var en=ui({},At,Ot[qt]);return en[Tt]=Gt[Tt],Wt(Gt.groupedRings,en)}))},nt.isolines=function(vt,bt,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.zProperty||"elevation",At=wt.commonProperties||{},Ot=wt.breaksProperties||[];if(Wn(vt,"Point","Input must contain Points"),!bt)throw new Error("breaks is required");if(!Array.isArray(bt))throw new Error("breaks must be an Array");if(!cn(At))throw new Error("commonProperties must be an Object");if(!Array.isArray(Ot))throw new Error("breaksProperties must be an Array");var Dt=En(vt,{zProperty:Tt,flip:!0});return Ft(function(jt,Gt,qt){var en=un(qt),Xt=en[2]-en[0],sn=en[3]-en[1],yn=en[0],vn=en[1],Sn=Gt[0].length-1,fn=Gt.length-1,Dn=Xt/Sn,rr=sn/fn,bn=function(Nn){Nn[0]=Nn[0]*Dn+yn,Nn[1]=Nn[1]*rr+vn};return jt.forEach(function(Nn){dn(Nn,bn)}),jt}(function(jt,Gt,qt,en,Xt){for(var sn=[],yn=1;yn<Gt.length;yn++){var vn=+Gt[yn],Sn=ui({},en,Xt[yn]);Sn[qt]=vn;var fn=Yt(Ei(jt,vn),Sn);sn.push(fn)}return sn}(Dt,bt,Tt,At,Ot),Dt,vt))},nt.kinks=function(vt){var bt,wt,Tt={type:"FeatureCollection",features:[]};if((wt=vt.type==="Feature"?vt.geometry:vt).type==="LineString")bt=[wt.coordinates];else if(wt.type==="MultiLineString")bt=wt.coordinates;else if(wt.type==="MultiPolygon")bt=[].concat.apply([],wt.coordinates);else{if(wt.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");bt=wt.coordinates}return bt.forEach(function(At){bt.forEach(function(Ot){for(var Dt=0;Dt<At.length-1;Dt++)for(var jt=Dt;jt<Ot.length-1;jt++)if(!(At===Ot&&(Math.abs(Dt-jt)===1||Dt===0&&jt===At.length-2&&At[Dt][0]===At[At.length-1][0]&&At[Dt][1]===At[At.length-1][1]))){var Gt=bd(At[Dt][0],At[Dt][1],At[Dt+1][0],At[Dt+1][1],Ot[jt][0],Ot[jt][1],Ot[jt+1][0],Ot[jt+1][1]);Gt&&Tt.features.push(kt([Gt[0],Gt[1]]))}})}),Tt},nt.length=pf,nt.lengthToDegrees=ln,nt.lengthToRadians=rn,nt.lineArc=tl,nt.lineChunk=function(vt,bt,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.units,At=wt.reverse;if(!vt)throw new Error("geojson is required");if(bt<=0)throw new Error("segmentLength must be greater than 0");var Ot=[];return Er(vt,function(Dt){At&&(Dt.geometry.coordinates=Dt.geometry.coordinates.reverse()),function(jt,Gt,qt,en){var Xt=pf(jt,{units:qt});if(Xt<=Gt)return en(jt);var sn=Xt/Gt;Number.isInteger(sn)||(sn=Math.floor(sn)+1);for(var yn=0;yn<sn;yn++)en(Au(jt,Gt*yn,Gt*(yn+1),{units:qt}),yn)}(Dt,bt,Tt,function(jt){Ot.push(jt)})}),Ft(Ot)},nt.lineDistance=pf,nt.lineEach=xr,nt.lineIntersect=Vs,nt.lineOffset=function(vt,bt,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.units;if(!vt)throw new Error("geojson is required");if(bt==null||isNaN(bt))throw new Error("distance is required");var At=nr(vt),Ot=vt.properties;switch(At){case"LineString":return wf(vt,bt,Tt);case"MultiLineString":var Dt=[];return Er(vt,function(jt){Dt.push(wf(jt,bt,Tt).geometry.coordinates)}),Yt(Dt,Ot);default:throw new Error("geometry "+At+" is not supported")}},nt.lineOverlap=vf,nt.lineReduce=fr,nt.lineSegment=ka,nt.lineSlice=function(vt,bt,wt){var Tt=Rn(wt);if(nr(wt)!=="LineString")throw new Error("line must be a LineString");for(var At,Ot=Dc(wt,vt),Dt=Dc(wt,bt),jt=[(At=Ot.properties.index<=Dt.properties.index?[Ot,Dt]:[Dt,Ot])[0].geometry.coordinates],Gt=At[0].properties.index+1;Gt<At[1].properties.index+1;Gt++)jt.push(Tt[Gt]);return jt.push(At[1].geometry.coordinates),Nt(jt,wt.properties)},nt.lineSliceAlong=Au,nt.lineSplit=function(vt,bt){if(!vt)throw new Error("line is required");if(!bt)throw new Error("splitter is required");var wt=nr(vt),Tt=nr(bt);if(wt!=="LineString")throw new Error("line must be LineString");if(Tt==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(Tt==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var At=zh(bt,{precision:7});switch(Tt){case"Point":return Mi(vt,At);case"MultiPoint":return ci(vt,At);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return ci(vt,Vs(vt,At))}},nt.lineString=Nt,nt.lineStringToPolygon=Ig,nt.lineStrings=Bt,nt.lineToPolygon=Ig,nt.mask=function(vt,bt){var wt,Tt=p_(bt),At=null;return vt.type==="FeatureCollection"?At=tv((wt=vt).features.length===2?dh.union(wt.features[0].geometry.coordinates,wt.features[1].geometry.coordinates):dh.union.apply(dh,wt.features.map(function(Ot){return Ot.geometry.coordinates}))):At=tv(dh.union(vt.geometry.coordinates)),At.geometry.coordinates.forEach(function(Ot){Tt.geometry.coordinates.push(Ot[0])}),Tt},nt.meta=nn,nt.midpoint=function(vt,bt){return Ta(vt,ao(vt,bt)/2,Rc(vt,bt))},nt.moranIndex=function(vt,bt){var wt=bt.inputField,Tt=bt.threshold||1e5,At=bt.p||2,Ot=bt.binary||!1,Dt=U1(vt,{alpha:bt.alpha||-1,binary:Ot,p:At,standardization:bt.standardization||!0,threshold:Tt}),jt=[];Jn(vt,function(Gn){var jn=Gn.properties||{};jt.push(jn[wt])});for(var Gt=G1(jt),qt=function(Gn){for(var jn=G1(Gn),Vr=0,$r=0,qr=Gn;$r<qr.length;$r++){var Rr=qr[$r];Vr+=Math.pow(Rr-jn,2)}return Vr/Gn.length}(jt),en=0,Xt=0,sn=0,yn=0,vn=Dt.length,Sn=0;Sn<vn;Sn++){for(var fn=0,Dn=0;Dn<vn;Dn++)en+=Dt[Sn][Dn]*(jt[Sn]-Gt)*(jt[Dn]-Gt),Xt+=Dt[Sn][Dn],sn+=Math.pow(Dt[Sn][Dn]+Dt[Dn][Sn],2),fn+=Dt[Sn][Dn]+Dt[Dn][Sn];yn+=Math.pow(fn,2)}var rr=en/Xt/qt,bn=-1/(vn-1),Nn=(vn*vn*(sn*=.5)-vn*yn+Xt*Xt*3)/((vn-1)*(vn+1)*(Xt*Xt))-bn*bn,Bn=Math.sqrt(Nn);return{expectedMoranIndex:bn,moranIndex:rr,stdNorm:Bn,zNorm:(rr-bn)/Bn}},nt.multiLineString=Yt,nt.multiPoint=Zt,nt.multiPolygon=Wt,nt.nearest=Rh,nt.nearestPoint=Rh,nt.nearestPointOnLine=Dc,nt.nearestPointToLine=function(vt,bt,wt){wt===void 0&&(wt={});var Tt=wt.units,At=wt.properties||{},Ot=function(Gt){var qt=[];switch(Gt.geometry?Gt.geometry.type:Gt.type){case"GeometryCollection":return cr(Gt,function(en){en.type==="Point"&&qt.push({type:"Feature",properties:{},geometry:en})}),{type:"FeatureCollection",features:qt};case"FeatureCollection":return Gt.features=Gt.features.filter(function(en){return en.geometry.type==="Point"}),Gt;default:throw new Error("points must be a Point Collection")}}(vt);if(!Ot.features.length)throw new Error("points must contain features");if(!bt)throw new Error("line is required");if(nr(bt)!=="LineString")throw new Error("line must be a LineString");var Dt=1/0,jt=null;return Jn(Ot,function(Gt){var qt=kg(Gt,bt,{units:Tt});qt<Dt&&(Dt=qt,jt=Gt)}),jt&&(jt.properties=ui({dist:Dt},jt.properties,At)),jt},nt.planepoint=function(vt,bt){var wt=pn(vt),Tt=Hn(bt).coordinates[0];if(Tt.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var At=bt.properties||{},Ot=At.a,Dt=At.b,jt=At.c,Gt=wt[0],qt=wt[1],en=Tt[0][0],Xt=Tt[0][1],sn=Ot!==void 0?Ot:Tt[0][2],yn=Tt[1][0],vn=Tt[1][1],Sn=Dt!==void 0?Dt:Tt[1][2],fn=Tt[2][0],Dn=Tt[2][1],rr=jt!==void 0?jt:Tt[2][2];return(rr*(Gt-en)*(qt-vn)+sn*(Gt-yn)*(qt-Dn)+Sn*(Gt-fn)*(qt-Xt)-Sn*(Gt-en)*(qt-Dn)-rr*(Gt-yn)*(qt-Xt)-sn*(Gt-fn)*(qt-vn))/((Gt-en)*(qt-vn)+(Gt-yn)*(qt-Dn)+(Gt-fn)*(qt-Xt)-(Gt-en)*(qt-Dn)-(Gt-yn)*(qt-Xt)-(Gt-fn)*(qt-vn))},nt.point=kt,nt.pointGrid=yf,nt.pointOnFeature=Ag,nt.pointOnLine=Dc,nt.pointOnSurface=Ag,nt.pointToLineDistance=kg,nt.points=Lt,nt.pointsWithinPolygon=Ii,nt.polygon=It,nt.polygonSmooth=function(vt,bt){var wt=[],Tt=bt.iterations||1;if(!vt)throw new Error("inputPolys is required");return cr(vt,function(At,Ot,Dt){var jt,Gt,qt;switch(At.type){case"Polygon":jt=[[]];for(var en=0;en<Tt;en++)qt=[[]],Gt=At,en>0&&(Gt=It(jt).geometry),jv(Gt,qt),jt=qt.slice(0);wt.push(It(jt,Dt));break;case"MultiPolygon":jt=[[[]]];for(var Xt=0;Xt<Tt;Xt++)qt=[[[]]],Gt=At,Xt>0&&(Gt=Wt(jt).geometry),Vv(Gt,qt),jt=qt.slice(0);wt.push(Wt(jt,Dt));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),Ft(wt)},nt.polygonTangents=function(vt,bt){var wt,Tt,At,Ot,Dt=Rn(vt),jt=Rn(bt),Gt=un(bt),qt=0,en=null;switch(Dt[0]>Gt[0]&&Dt[0]<Gt[2]&&Dt[1]>Gt[1]&&Dt[1]<Gt[3]&&(qt=(en=Rh(vt,pd(bt))).properties.featureIndex),nr(bt)){case"Polygon":wt=jt[0][qt],Tt=jt[0][0],en!==null&&en.geometry.coordinates[1]<Dt[1]&&(Tt=jt[0][qt]),Ot=ah(jt[0][0],jt[0][jt[0].length-1],Dt);var Xt=Vm(jt[0],Dt,Ot,At,wt,Tt);wt=Xt[0],Tt=Xt[1];break;case"MultiPolygon":for(var sn=0,yn=0,vn=0,Sn=0;Sn<jt[0].length;Sn++){sn=Sn;for(var fn=!1,Dn=0;Dn<jt[0][Sn].length;Dn++){if(yn=Dn,vn===qt){fn=!0;break}vn++}if(fn)break}wt=jt[0][sn][yn],Tt=jt[0][sn][yn],Ot=ah(jt[0][0][0],jt[0][0][jt[0][0].length-1],Dt),jt.forEach(function(rr){var bn=Vm(rr[0],Dt,Ot,At,wt,Tt);wt=bn[0],Tt=bn[1]})}return Ft([kt(wt),kt(Tt)])},nt.polygonToLine=nl,nt.polygonToLineString=nl,nt.polygonize=function(vt){var bt=wv.fromGeoJson(vt);bt.deleteDangles(),bt.deleteCutEdges();var wt=[],Tt=[];return bt.getEdgeRings().filter(function(At){return At.isValid()}).forEach(function(At){At.isHole()?wt.push(At):Tt.push(At)}),wt.forEach(function(At){dl.findEdgeRingContaining(At,Tt)&&Tt.push(At)}),Ft(Tt.map(function(At){return At.toPolygon()}))},nt.polygons=Rt,nt.projection=Gv,nt.propEach=ir,nt.propReduce=tr,nt.propertiesContainsFilter=x0,nt.radians2degrees=wn,nt.radiansToDegrees=wn,nt.radiansToDistance=on,nt.radiansToLength=on,nt.random=qv,nt.randomLineString=J1,nt.randomPoint=K1,nt.randomPolygon=v0,nt.randomPosition=Ip,nt.rewind=function(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.reverse||!1,Tt=bt.mutate||!1;if(!vt)throw new Error("<geojson> is required");if(typeof wt!="boolean")throw new Error("<reverse> must be a boolean");if(typeof Tt!="boolean")throw new Error("<mutate> must be a boolean");Tt===!1&&(vt=$o(vt));var At=[];switch(vt.type){case"GeometryCollection":return cr(vt,function(Ot){lh(Ot,wt)}),vt;case"FeatureCollection":return Jn(vt,function(Ot){Jn(lh(Ot,wt),function(Dt){At.push(Dt)})}),Ft(At)}return lh(vt,wt)},nt.rhumbBearing=sh,nt.rhumbDestination=bf,nt.rhumbDistance=Tu,nt.round=Jt,nt.sample=function(vt,bt){if(!vt)throw new Error("featurecollection is required");if(bt==null)throw new Error("num is required");if(typeof bt!="number")throw new Error("num must be a number");return Ft(function(wt,Tt){for(var At,Ot,Dt=wt.slice(0),jt=wt.length,Gt=jt-Tt;jt-- >Gt;)At=Dt[Ot=Math.floor((jt+1)*Math.random())],Dt[Ot]=Dt[jt],Dt[jt]=At;return Dt.slice(Gt)}(vt.features,bt))},nt.sector=function(vt,bt,wt,Tt,At){if(!cn(At=At||{}))throw new Error("options is invalid");var Ot=At.properties;if(!vt)throw new Error("center is required");if(wt==null)throw new Error("bearing1 is required");if(Tt==null)throw new Error("bearing2 is required");if(!bt)throw new Error("radius is required");if(typeof At!="object")throw new Error("options must be an object");if(_f(wt)===_f(Tt))return hp(vt,bt,At);var Dt=Rn(vt),jt=tl(vt,bt,wt,Tt,At),Gt=[[Dt]];return dn(jt,function(qt){Gt[0].push(qt)}),Gt[0].push(Dt),It(Gt,Ot)},nt.segmentEach=Fr,nt.segmentReduce=mr,nt.shortestPath=function(vt,bt,wt){if(!cn(wt=wt||{}))throw new Error("options is invalid");var Tt=wt.resolution,At=wt.minDistance,Ot=wt.obstacles||Ft([]);if(!vt)throw new Error("start is required");if(!bt)throw new Error("end is required");if(Tt&&!An(Tt)||Tt<=0)throw new Error("options.resolution must be a number, greater than 0");if(At)throw new Error("options.minDistance is not yet implemented");var Dt=pn(vt),jt=pn(bt);switch(vt=kt(Dt),bt=kt(jt),nr(Ot)){case"FeatureCollection":if(Ot.features.length===0)return Nt([Dt,jt]);break;case"Polygon":Ot=Ft([xt(Hn(Ot))]);break;default:throw new Error("invalid obstacles")}var Gt=Ot;Gt.features.push(vt),Gt.features.push(bt);var qt=un(v1(up(un(Gt)),1.15));Tt||(Tt=ao([qt[0],qt[1]],[qt[2],qt[1]],wt)/100),Gt.features.pop(),Gt.features.pop();for(var en=qt[0],Xt=qt[1],sn=qt[2],yn=qt[3],vn=Tt/ao([en,Xt],[sn,Xt],wt)*(sn-en),Sn=Tt/ao([en,Xt],[en,yn],wt)*(yn-Xt),fn=sn-en,Dn=yn-Xt,rr=Math.floor(fn/vn),bn=Math.floor(Dn/Sn),Nn=(fn-rr*vn)/2,Bn=[],Gn=[],jn=[],Vr=[],$r=1/0,qr=1/0,Rr=yn-(Dn-bn*Sn)/2,Jr=0;Rr>=Xt;){for(var Br=[],Dr=[],Mr=en+Nn,Yr=0;Mr<=sn;){var zr=kt([Mr,Rr]),Qr=Ov(zr,Ot);Br.push(Qr?0:1),Dr.push(Mr+"|"+Rr);var wr=ao(zr,vt);!Qr&&wr<$r&&($r=wr,jn={x:Yr,y:Jr});var ji=ao(zr,bt);!Qr&&ji<qr&&(qr=ji,Vr={x:Yr,y:Jr}),Mr+=vn,Yr++}Gn.push(Br),Bn.push(Dr),Rr-=Sn,Jr++}var yi=new qh(Gn,{diagonal:!0}),bo=yi.grid[jn.y][jn.x],Ri=yi.grid[Vr.y][Vr.x],eo=Bg.search(yi,bo,Ri),Ho=[Dt];return eo.forEach(function(Ss){var Ua=Bn[Ss.x][Ss.y].split("|");Ho.push([+Ua[0],+Ua[1]])}),Ho.push(jt),Kl(Nt(Ho))},nt.simplify=function(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.tolerance!==void 0?bt.tolerance:1,Tt=bt.highQuality||!1,At=bt.mutate||!1;if(!vt)throw new Error("geojson is required");if(wt&&wt<0)throw new Error("invalid tolerance");return At!==!0&&(vt=$o(vt)),cr(vt,function(Ot){(function(Dt,jt,Gt){var qt=Dt.type;if(qt==="Point"||qt==="MultiPoint")return Dt;Kl(Dt,!0);var en=Dt.coordinates;switch(qt){case"LineString":Dt.coordinates=dd(en,jt,Gt);break;case"MultiLineString":Dt.coordinates=en.map(function(Xt){return dd(Xt,jt,Gt)});break;case"Polygon":Dt.coordinates=fd(en,jt,Gt);break;case"MultiPolygon":Dt.coordinates=en.map(function(Xt){return fd(Xt,jt,Gt)})}})(Ot,wt,Tt)}),vt},nt.square=xg,nt.squareGrid=nv,nt.standardDeviationalEllipse=function(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.steps||64,Tt=bt.weight,At=bt.properties||{};if(!An(wt))throw new Error("steps must be a number");if(!cn(At))throw new Error("properties must be a number");var Ot=lr(vt).length,Dt=y0(vt,{weight:Tt}),jt=0,Gt=0,qt=0;Jn(vt,function(jn){var Vr=jn.properties[Tt]||1,$r=V1(Rn(jn),Rn(Dt));jt+=Math.pow($r.x,2)*Vr,Gt+=Math.pow($r.y,2)*Vr,qt+=$r.x*$r.y*Vr});var en=jt-Gt,Xt=Math.sqrt(Math.pow(en,2)+4*Math.pow(qt,2)),sn=2*qt,yn=Math.atan((en+Xt)/sn),vn=180*yn/Math.PI,Sn=0,fn=0,Dn=0;Jn(vt,function(jn){var Vr=jn.properties[Tt]||1,$r=V1(Rn(jn),Rn(Dt));Sn+=Math.pow($r.x*Math.cos(yn)-$r.y*Math.sin(yn),2)*Vr,fn+=Math.pow($r.x*Math.sin(yn)+$r.y*Math.cos(yn),2)*Vr,Dn+=Vr});var rr=Math.sqrt(2*Sn/Dn),bn=Math.sqrt(2*fn/Dn),Nn=z1(Dt,rr,bn,{units:"degrees",angle:vn,steps:wt,properties:At}),Bn=Ii(vt,Ft([Nn])),Gn={meanCenterCoordinates:Rn(Dt),semiMajorAxis:rr,semiMinorAxis:bn,numberOfFeatures:Ot,angle:vn,percentageWithinEllipse:100*lr(Bn).length/Ot};return Nn.properties.standardDeviationalEllipse=Gn,Nn},nt.tag=function(vt,bt,wt,Tt){return vt=$o(vt),bt=$o(bt),Jn(vt,function(At){At.properties||(At.properties={}),Jn(bt,function(Ot){At.properties[Tt]===void 0&&oo(At,Ot)&&(At.properties[Tt]=Ot.properties[wt])})}),vt},nt.tesselate=function(vt){if(!vt.geometry||vt.geometry.type!=="Polygon"&&vt.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var bt={type:"FeatureCollection",features:[]};return vt.geometry.type==="Polygon"?bt.features=Nl(vt.geometry.coordinates):vt.geometry.coordinates.forEach(function(wt){bt.features=bt.features.concat(Nl(wt))}),bt},nt.tin=Yl,nt.toMercator=W1,nt.toWgs84=q1,nt.transformRotate=y1,nt.transformScale=v1,nt.transformTranslate=function(vt,bt,wt,Tt){if(!cn(Tt=Tt||{}))throw new Error("options is invalid");var At=Tt.units,Ot=Tt.zTranslation,Dt=Tt.mutate;if(!vt)throw new Error("geojson is required");if(bt==null||isNaN(bt))throw new Error("distance is required");if(Ot&&typeof Ot!="number"&&isNaN(Ot))throw new Error("zTranslation is not a number");if(Ot=Ot!==void 0?Ot:0,bt===0&&Ot===0)return vt;if(wt==null||isNaN(wt))throw new Error("direction is required");return bt<0&&(bt=-bt,wt+=180),Dt!==!1&&Dt!==void 0||(vt=$o(vt)),dn(vt,function(jt){var Gt=Rn(bf(jt,bt,wt,{units:At}));jt[0]=Gt[0],jt[1]=Gt[1],Ot&&jt.length===3&&(jt[2]+=Ot)}),vt},nt.triangleGrid=a1,nt.truncate=zh,nt.union=function(vt,bt,wt){wt===void 0&&(wt={});var Tt=Hn(vt),At=Hn(bt),Ot=dh.union(Tt.coordinates,At.coordinates);return Ot.length===0?null:Ot.length===1?It(Ot[0],wt.properties):Wt(Ot,wt.properties)},nt.unitsFactors=st,nt.unkinkPolygon=function(vt){var bt=[];return Er(vt,function(wt){wt.geometry.type==="Polygon"&&Jn(Hm(wt),function(Tt){bt.push(It(Tt.geometry.coordinates,wt.properties))})}),Ft(bt)},nt.validateBBox=Ln,nt.validateId=an,nt.voronoi=function(vt,bt){if(!cn(bt=bt||{}))throw new Error("options is invalid");var wt=bt.bbox||[-180,-85,180,85];if(!vt)throw new Error("points is required");if(!Array.isArray(wt))throw new Error("bbox is invalid");return Wn(vt,"Point","points"),Ft(function(){var Tt=$v,At=I1,Ot=null;function Dt(jt){return new m0(jt.map(function(Gt,qt){var en=[Math.round(Tt(Gt,qt,jt)/Rs)*Rs,Math.round(At(Gt,qt,jt)/Rs)*Rs];return en.index=qt,en.data=Gt,en}),Ot)}return Dt.polygons=function(jt){return Dt(jt).polygons()},Dt.links=function(jt){return Dt(jt).links()},Dt.triangles=function(jt){return Dt(jt).triangles()},Dt.x=function(jt){return arguments.length?(Tt=typeof jt=="function"?jt:P1(+jt),Dt):Tt},Dt.y=function(jt){return arguments.length?(At=typeof jt=="function"?jt:P1(+jt),Dt):At},Dt.extent=function(jt){return arguments.length?(Ot=jt==null?null:[[+jt[0][0],+jt[0][1]],[+jt[1][0],+jt[1][1]]],Dt):Ot&&[[Ot[0][0],Ot[0][1]],[Ot[1][0],Ot[1][1]]]},Dt.size=function(jt){return arguments.length?(Ot=jt==null?null:[[0,0],[+jt[0],+jt[1]]],Dt):Ot&&[Ot[1][0]-Ot[0][0],Ot[1][1]-Ot[0][1]]},Dt}().x(function(Tt){return Tt.geometry.coordinates[0]}).y(function(Tt){return Tt.geometry.coordinates[1]}).extent([[wt[0],wt[1]],[wt[2],wt[3]]]).polygons(vt.features).map(Hv))},nt.within=Ii,Object.defineProperty(nt,"__esModule",{value:!0})});const _hoisted_1$e={class:"content"},_hoisted_2$a=["innerHTML"],_hoisted_3$9=["innerHTML"],_sfc_main$h=defineComponent({__name:"Map.ce",props:{overlay:{type:String},zoom:{type:Number,default:2},center:{type:String,default:"55.4,6.7"},marker:{type:Boolean},basemaps:{type:String,default:"OpenStreetMap"},caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},entities:{type:String},preferGeojson:{type:Boolean},popupOnHover:{type:Boolean},zoomOnClick:{type:Boolean},scrollWheelZoom:{type:Boolean},cards:{type:String},essayBase:{type:String}},setup(nt){const rt=window.turf,it={iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon.png",iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",shadowSize:[41,41]},st=nt,_t={CartoDB_DarkMatter:["https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterNoLabels:["https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_DarkMatterOnlyLabels:["https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Positron:["https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronNoLabels:["https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_PositronOnlyLabels:["https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_Voyager:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerNoLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerOnlyLabels:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],CartoDB_VoyagerLabelsUnder:["https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}],Esri_DeLorme:["https://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Copyright: &copy;2012 DeLorme",minZoom:1,maxZoom:11}],Esri_NatGeoWorldMap:["https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC",maxZoom:16}],Esri_OceanBasemap:["https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri",maxZoom:13}],Esri_WorldGrayCanvas:["https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}],Esri_WorldImagery:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}],Esri_WorldPhysical:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",{maxZoom:8,attribution:"Tiles &copy; Esri &mdash; Source: US National Park Service"}],Esri_WorldShadedRelief:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri",maxZoom:13}],Esri_WorldStreetMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}],Esri_WorldTerrain:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS",maxZoom:13}],Esri_WorldTopoMap:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}],MtbMap:["http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &amp; USGS'}],OpenStreetMap:["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}],OpenStreetMap_DE:["https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_France:["https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",{maxZoom:20,attribution:'&copy; OpenStreetMap France | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],OpenStreetMap_HOT:["https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>',maxZoom:19}],OpenStreetMap_Mapnik:["https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}],OpenTopoMap:["https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}],OPNVKarte:["https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",{attribution:'Map <a href="https://memomaps.de/">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}],Stadia_AlidadeSmooth:["https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_AlidadeSmoothDark:["https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_OSMBright:["https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}],Stadia_Outdoors:["https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}],Stamen_Terrain:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_TerrainLabels:["https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-labels/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png"}],Stamen_Toner:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerBackground:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_TonerLite:["https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}],Stamen_Watercolor:["https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}",{subdomains:"abcd",minZoom:1,maxZoom:16,ext:"jpg",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],USGS_USTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImagery:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}],USGS_USImageryTopo:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}]},xt=ref(null),Et=computed(()=>{var un,pn;return(pn=(un=xt.value)==null?void 0:un.getRootNode())==null?void 0:pn.host}),kt=computed(()=>{var un;return(un=xt==null?void 0:xt.value)==null?void 0:un.parentNode}),Lt=computed(()=>{var un;return(un=kt.value)==null?void 0:un.querySelector(".content")}),It=ref(),Rt=ref(),Nt=ref([]),Bt=ref(),Ft=ref([]),Yt=ref(),Zt=ref(),Wt=ref(),Kt=ref(10),Jt=ref(),on=ref(!1),rn=ref(),ln=ref();watch$1(Et,()=>wn()),onMounted(()=>{let un=window.localStorage.getItem("gh-auth-token")||window.localStorage.getItem("gh-unscoped-token");un&&(It.value=new GithubClient(un)),kn(),wn()});const gn=isMobile()?"full":st.right?"right":st.left?"left":"full";function wn(){Et.value.classList.add("ve-component"),Et.value.classList.add(gn),gn==="full"?Et.value.style.width="100%":(Et.value.style.float=gn,Et.value.style.width="calc(50% - 16px)"),Et.value.style.width=window.getComputedStyle(Et.value).width,st.sticky&&makeSticky(Et.value),Lt.value.style.width=isMobile()?"100%":st.width||"100%",nextTick(()=>{let un=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),pn=un;if(st.sticky&&gn==="full"){let Rn=Math.round(window.innerHeight*.4);pn=Math.min(Rn,un)}Lt.value.style.width=`${un}px`,Lt.value.style.height=`${pn}px`,Et.value.style.height=`${st.caption?pn+32:pn}px`,Pn()})}watch$1(st,()=>kn());function kn(){Kt.value=st.zoom,st.cards&&Cn()}function Cn(){let un=[];if(st.cards){let pn=document.getElementById(st.cards);pn&&pn.querySelectorAll(".card").forEach(async Rn=>{var or;let _n=Array.from(Rn.querySelectorAll("li")).filter(Vn=>Vn.innerHTML.trim().indexOf("coords:")===0).map(Vn=>Vn.innerHTML.split(":")[1].trim()).pop()||"";if(_n){let Vn=Rn.querySelector("ul.card-metadata");Vn&&((or=Vn.parentElement)==null||or.removeChild(Vn)),un.push({coords:Er(_n),caption:Rn.innerHTML})}})}un.length>0&&(Ft.value=[...Ft.value,...un])}watch$1(Ft,async()=>{let un=await Promise.all(Ft.value),pn=un.filter(Wn=>Wn.geojson&&Wn.preferGeojson).map(Wn=>{if(Wn.geojson.indexOf("http")!==0)if(Wn.geojson[0]==="/"){let[Hn,nr,...sr]=Wn.geojson.split("/").filter(kr=>kr),pr=sr.join("/"),vr="main";Wn.geojson=`https://raw.githubusercontent.com/${Hn}/${nr}/${vr}/${pr}`}else Wn.geojson=`https://raw.githubusercontent.com/${st.essayBase}/${Wn.geojson}`;return Wn}).map(Wn=>({url:Wn.geojson,item:Wn})),Rn=await Promise.all(pn.map(Wn=>fetch(Wn.url))),_n=await Promise.all(Rn.map(Wn=>Wn.json())),or={};for(let Wn=0;Wn<pn.length;Wn++){pn[Wn].item.id&&/^Q[0-9]+$/.test(pn[Wn].item.id)&&(pn[Wn].item.qid=pn[Wn].item.id,delete pn[Wn].item.id),_n[Wn].type==="FeatureCollection"?_n[Wn].features.forEach(nr=>nr.properties={...nr.properties,...pn[Wn].item}):_n[Wn].properties={..._n[Wn].properties,...pn[Wn].item};let Hn=pn[Wn].item.layer||"Locations";or[Hn]||(or[Hn]=[]),or[Hn].push(_n[Wn])}let Vn={};un.filter(Wn=>!Wn.geojson||!Wn.preferGeojson).filter(Wn=>!Wn.allmaps).forEach(Wn=>{let Hn=Wn.layer||"Locations";Vn[Hn]||(Vn[Hn]=[]),Vn[Hn].push(Wn)}),un.filter(Wn=>!Wn.allmaps).forEach(Wn=>{let Hn=Wn.layer||"Locations";or[Hn]?Vn[Hn]&&(or[Hn].push(dn(Vn[Hn])),delete Vn[Hn]):(or[Hn]=[dn(Vn[Hn])],delete Vn[Hn])}),Zt.value=un.filter(Wn=>Wn.allmaps).map(Wn=>({name:Wn.layer||"Image layer",disabled:Wn.disabled,layer:L$1.tileLayer(`https://allmaps.xyz/maps/${Wn.allmaps}/{z}/{x}/{y}.png`,{maxZoom:19,attribution:'<a href="https://allmaps.org">Allmaps</a>'})})),Wt.value=or}),watch$1(Zt,()=>zn()),watch$1(Wt,()=>zn()),watch$1(Rt,()=>zn());function Pn(){var Rn;if(on.value)return;if(on.value=!0,Nt.value=st.entities?st.entities.split(/\s+/).filter(_n=>_n):[],st.cards){let _n=[],or=document.getElementById(st.cards);or&&or.querySelectorAll(".card").forEach(async Vn=>{var Hn;let Wn=Array.from(Vn.querySelectorAll("li")).filter(nr=>nr.innerHTML.trim().indexOf("coords:")===0).map(nr=>nr.innerHTML.split(":")[1].trim()).pop()||"";if(Wn){let nr=Vn.querySelector("ul.card-metadata");nr&&((Hn=nr.parentElement)==null||Hn.removeChild(nr)),_n.push({coords:Er(Wn),caption:Vn.innerHTML})}}),Ft.value=[...Ft.value,..._n]}Fn(),ir();const un=new ResizeObserver(()=>An());let pn=(Rn=kt.value)==null?void 0:Rn.querySelector("#map");pn&&un.observe(pn),xr()}async function An(){var Rn,_n;let un;if(st.center)if(isQID(st.center)){let or=await getEntity(st.center);un=Er(or.coords)}else un=Er(st.center);else if(st.entities){let or=await getEntity(Nt.value[0]);un=Er(or.coords),Kt.value=9}else un=new L$1.LatLng(0,0),Kt.value=6;if(Rt.value){Rt.value.off(),Rt.value.remove();let or=(Rn=kt.value)==null?void 0:Rn.querySelector("#map"),Vn=document.createElement("div");Vn.id="map",or==null||or.replaceWith(Vn)}let pn=(_n=kt.value)==null?void 0:_n.querySelector("#map");if(pn){isMobile()&&L$1.Map.addInitHook("addHandler","gestureHandling",leafletGestureHandling_min.exports.GestureHandling),pn.style.cursor="default";let or=st.basemaps.split(",").map(Wn=>{let[Hn,nr]=_t[Wn];return[Wn.replace(/_/," "),L$1.tileLayer(Hn,nr)]}),Vn={preferCanvas:!1,zoomSnap:.1,center:un,zoom:Kt.value,zoomAnimation:!0,gestureHandling:isMobile(),layers:[or[0][1]]};Rt.value=L$1.map(pn,Vn),(or.length>1||Object.keys(Wt.value||{}).length>1)&&(Yt.value=L$1.control.layers(Object.fromEntries(or),{}).addTo(Rt.value)),Rt.value.on("click",Wn=>{var Hn;cn(Wn),Bt.value&&ar((Hn=Bt.value)==null?void 0:Hn.split(" ")[0]),st.zoomOnClick&&nn()}),Rt.value.on("zoomend",Wn=>{cn(Wn),ln.value&&ln.value.layer.openPopup()}),Rt.value.on("movestart",()=>pn.style.cursor="move"),Rt.value.on("moveend",Wn=>{pn.style.cursor="default",cn(Wn)}),Rt.value.on("layeradd",Wn=>{var Hn,nr;if(Wn.layer.feature){let sr=Wn.layer;((Hn=sr.feature)==null?void 0:Hn.type)=="Feature"&&((nr=sr.feature)==null?void 0:nr.properties.qid)&&sr.feature}}),Bt.value=`${Number(un.lat.toFixed(5))},${Number(un.lng.toFixed(5))} ${Kt.value}`,Jt.value=`${Number(un.lat.toFixed(5))},${Number(un.lng.toFixed(5))},${Kt.value}`}}function cn(un){let pn=un.type==="click"?un.latlng:un.target.getCenter(),Rn=un.target.getZoom(),_n=[pn.lat,pn.lng,Rn];return Bt.value=`${Number(pn.lat.toFixed(5))},${Number(pn.lng.toFixed(5))} ${Rn}`,rn.value||(Jt.value=`${Number(pn.lat.toFixed(5))},${Number(pn.lng.toFixed(5))},${Rn}`),_n}function Ln(un){return L$1.geoJSON(un,{pointToLayer:(pn,Rn)=>{const _n=pn.properties;let or={...it};return pn.properties.icon&&(or.iconUrl=pn.properties.icon),pn.properties.shadowUrl&&(or.shadowUrl=pn.properties.shadowUrl),pn.properties.iconRetinaUrl&&(or.iconRetinaUrl=pn.properties.iconRetinaUrl),_n.markerType==="circle"?L$1.circleMarker(Rn,{radius:_n.radius||4}):L$1.marker(Rn,{icon:new L$1.Icon(or)})},onEachFeature:async(pn,Rn)=>{var or;let _n=Rn;if(!pn.properties.coords){if((or=_n.feature)!=null&&or.bbox){let Vn=_n.getBounds().getCenter();pn.properties.coords=`${Vn.lat},${Vn.lng}`}else if(pn.geometry.type==="Polygon"){let Vn=rt.centroid(pn);pn.properties.coords=`${Vn.geometry.coordinates[1]},${Vn.geometry.coordinates[0]}`}}if(pn.properties.qid){let Vn=await getEntity(pn.properties.qid);pn.properties.entityData=Vn;let Hn=`<ve-info-card data="${JSON.stringify(Vn).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;Rn.bindPopup(Hn)}else{let Wn=`<ve-info-card data="${JSON.stringify(pn.properties).replace(/"/g,"&quot;")}" style="width:100%;"></ve-info-card>`;Rn.bindPopup(Wn)}st.popupOnHover&&(Rn.on("mouseover",()=>Rn.openPopup()),Rn.on("mouseout",()=>Rn.closePopup())),Rn.on("click",()=>{rn.value?(Rn.closePopup(),rn.value=void 0):(Rn.openPopup(),rn.value={},st.zoomOnClick&&er(pn.properties.coords))})},style:pn=>{const Rn=pn==null?void 0:pn.properties,_n=pn==null?void 0:pn.geometry.type;for(let[Vn,Wn]of Object.entries(Rn))Wn==="null"&&(Rn[Vn]=null);return{color:Rn.color||"#FB683F",weight:Rn.weight||(_n==="Polygon"||_n==="MultiPolygon"?0:4),opacity:Rn.opacity||1,fillColor:Rn.fillColor||"#32C125",fillOpacity:Rn.fillOpacity||.5}}})}let an=!1;function zn(){var un;if(Rt.value&&Wt.value&&Zt.value&&!an){an=!0;let pn=Object.keys(Wt.value||{}),Rn=Zt.value?Zt.value.length:0;!Yt.value&&(pn.length>1||pn.length===1&&pn[0]!=="Locations"||Rn>0)&&(Yt.value=L$1.control.layers(Object.fromEntries([]),{}).addTo(Rt.value)),Object.keys(Wt.value||{}).forEach(or=>{var Hn;let Vn=new L$1.LayerGroup,Wn=!1;Wt.value[or].forEach(nr=>{var pr;let sr=Ln(nr);Vn.addLayer(sr),(pr=nr.properties)!=null&&pr.disabled&&(Wn=!0)}),Wn||(Hn=Rt.value)==null||Hn.addLayer(Vn),Yt.value&&Yt.value.addOverlay(Vn,or)});let _n={};(un=Zt.value)==null||un.forEach(or=>{var Vn;Yt.value&&Yt.value.addOverlay(or.layer,or.name),or.disabled||(Vn=Rt.value)==null||Vn.addLayer(or.layer),_n[or.name]=or.layer}),Object.keys(_n).length>0&&L$1.control.opacity(_n,{label:null,collapsed:!0,position:"topright"}).addTo(Rt.value)}}function dn(un){const pn={type:"FeatureCollection",features:[]};return un.filter(Rn=>Rn.coords).forEach(Rn=>{let[_n,or]=Rn.coords.split(",").map(Vn=>parseFloat(Vn.trim()));pn.features.push({type:"Feature",properties:Rn,geometry:{type:"Point",coordinates:[or,_n]}})}),pn}async function Fn(){let un=Array.from(Et.value.querySelectorAll("li")).map(pn=>{var Rn;return Cr((Rn=pn.firstChild)==null?void 0:Rn.textContent)});if(st.marker&&st.center)if(isQID(st.center)){let pn=await getEntity(st.center);un.push(Promise.resolve(cr(pn)))}else un.push(Promise.resolve({coords:st.center,zoom:st.zoom||10}));Ft.value=[...Ft.value,...un]}function ir(){const un=Rn=>{for(let _n of Rn)_n.type==="childList"&&Array.from(_n.target.classList).indexOf("hydrated")>=0&&Fn()};new MutationObserver(un).observe(Et.value,{childList:!0,subtree:!0,characterData:!0})}function tr(un){return/^[+-]?\d+(.\d*|\d*),{1}[+-]?\d+(.\d*|\d*)$/.test(un)}function Jn(un){return/^\d{1,2}(\.\d{1})?$/.test(un)}function hr(un){un=un||"";let pn=[];un=un.replace(/“/,'"').replace(/”/,'"').replace(/’/,"'");let Rn=un.match(/[^\s"]+|"([^"]*)"/gmi);return Rn&&Rn.forEach(_n=>{pn.length>0&&pn[pn.length-1].indexOf("=")===pn[pn.length-1].length-1?pn[pn.length-1]=`${pn[pn.length-1]}${_n}`:pn.push(_n)}),pn}function lr(un,pn){let Rn={id:pn},_n=metadataAsObj(un);return _n.location&&(Rn.coords=_n.location[0]),_n.coordinates_of_the_point_of_view&&(Rn.coords=_n.coordinates_of_the_point_of_view[0]),un.label&&(Rn.label=un.label.en),un.summary&&(Rn.description=un.summary.en[0]),un.thumbnail&&(Rn.image=un.thumbnail[0].id),Rn}function cr(un,pn=""){let Rn={id:pn||un.id};return un.coords&&(Rn.coords=un.coords),un.geojson&&(Rn.geojson=un.geojson),un.label&&(Rn.label=un.label),un.description&&(Rn.description=un.description),un.thumbnail&&(Rn.image=un.thumbnail),Rn}async function Cr(un){let pn=hr(un),Rn=/\.(geo)?json$/i,_n=/^[a-z0-9\-]+:.+/,or={},Vn=new Set(["disabled","prefer-geojson"]);for(let Wn=0;Wn<pn.length;Wn++){let Hn=pn[Wn];if(Hn.indexOf("=")>0){let[nr,...sr]=Hn.split("="),pr=sr.join("=");if(pr=pr[pr.length-1]==='"'?pr.slice(1,-1):pr,nr==="qid"){let vr=await getEntity(Hn);or={...cr(vr,Hn),...or}}else if(nr==="iiif"){let vr=await getManifest(Hn);or={...lr(vr,Hn),...or}}else or[nr]=pr}else if(Jn(Hn))or.zoom=parseInt(Hn);else if(tr(Hn))or.coords=Hn,or.id=Hn;else if(isQID(Hn)){let nr=await getEntity(Hn);or={...cr(nr,Hn),...or}}else if(Rn.test(Hn))or.geojson=Hn;else if(_n.test(Hn)){let nr=await getManifest(Hn);or={...lr(nr,Hn),...or}}else if(Vn.has(Hn))or[kebabToCamel(Hn)]=!0;else{let nr=Hn[0]==='"'&&Hn[Hn.length-1]==='"'?Hn.slice(1,-1):Hn;or.label?or.description=nr:or.label=nr}}return or.preferGeojson=or.preferGeojson||st.preferGeojson&&or.geojson||or.geojson&&!or.coords,or}function Er(un){let[pn,Rn]=un.split(",").map(_n=>parseFloat(_n.trim()));return new leafletSrc.exports.LatLng(pn,Rn)}function ar(un){navigator.clipboard&&navigator.clipboard.writeText(un)}function Fr(un="",pn=""){return Object.values(Wt.value).map(_n=>{let or=_n[0];return or.type==="FeatureCollection"?or.features:[or]}).flat().find(_n=>{var or,Vn;return _n.id===un||((or=_n.properties)==null?void 0:or.id)===un||((Vn=_n.properties)==null?void 0:Vn.coords)===pn})}function mr(un=""){var Vn,Wn,Hn,nr;un=un.replace(/^flyto\|/i,"");let pn="",Rn=10,_n=un.split(",");if(_n.length===1){pn=_n[0];let sr=Fr(pn);Rn=((Vn=sr==null?void 0:sr.properties)==null?void 0:Vn.zoom)||Rn}else if(_n.length===2)if(/^[+-]?\d+(.\d*|\d*)$/.test(_n[0])){pn=_n.join(",");let sr=Fr("",pn);Rn=((Wn=sr==null?void 0:sr.properties)==null?void 0:Wn.zoom)||Rn}else pn=_n[0],Rn=parseFloat(_n[1]);else pn=_n.slice(0,2).join(","),Rn=parseFloat(_n[2]);let or;return(Hn=Rt.value)==null||Hn.eachLayer(sr=>{var pr,vr,kr,si;(((vr=(pr=sr==null?void 0:sr.feature)==null?void 0:pr.properties)==null?void 0:vr.id)===pn||((si=(kr=sr==null?void 0:sr.feature)==null?void 0:kr.properties)==null?void 0:si.coords)===pn)&&(or=sr)}),or||(nr=Rt.value)==null||nr.eachLayer(sr=>or=sr),{id:pn,zoom:Rn,layer:or}}function xr(){let un=Et.value.parentElement,pn=new Set;for(;un.parentElement&&un.tagName!=="MAIN";)un=un.parentElement,Array.from(un.querySelectorAll("[enter],[exit]")).forEach(_n=>{gr(_n)&&!pn.has(_n)&&(fr(_n),pn.add(_n))});let Rn=Et.value.parentElement;for(;(Rn==null?void 0:Rn.parentElement)&&Rn.tagName!=="BODY";)Rn=Rn.parentElement;Rn&&Array.from(Rn.querySelectorAll("mark")).forEach(_n=>{let or=Array.from(_n.attributes).find(Vn=>Vn.name==="flyto");if(or&&gr(_n.parentElement)){let Wn=or==null?void 0:or.value;_n.classList.add(or.name),_n.addEventListener("click",()=>er(Wn)),st.popupOnHover&&(_n.addEventListener("mouseover",()=>{let Hn=mr(Wn).layer;Hn.openPopup(),isMobile()&&setTimeout(()=>Hn.closePopup(),2e3)}),_n.addEventListener("mouseleave",()=>{var Hn;ln.value=mr(Wn),ln.value.id!==rn.value&&((Hn=ln.value.layer)==null||Hn.closePopup())}))}})}function fr(un){let pn=un.classList.contains("active");new MutationObserver(_n=>{_n.forEach(or=>{if(or.attributeName=="class"){let Vn=or.target.classList.contains("active");if(pn!==Vn){pn=Vn;let Wn=un.attributes.getNamedItem(Vn?"enter":"exit");if(Wn){const[Hn,...nr]=Wn.value.split(":");let sr=nr.join(":");Hn==="flyto"&&er(sr,!0),Wn.name==="exit"&&nn()}}}})}).observe(un,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}function gr(un){let pn=un.previousSibling;for(;pn;){if(pn.nodeName==="VE-MAP")return pn===Et.value?pn:null;pn=pn.previousSibling}for(;un.parentElement&&un.tagName!=="MAIN";){un=un.parentElement;let Rn=un.querySelector(":scope > ve-map, :scope > p > ve-map, :scope > section > ve-map");if(Rn)return Rn===Et.value?Rn:null}}async function er(un,pn=!1){var Rn,_n;if(ln.value=mr(un),ln.value.layer){if(ln.value.id===rn.value&&!pn)ln.value.layer.closePopup(),nn();else if(rn.value=ln.value.id,(Rn=ln.value.layer.feature)!=null&&Rn.properties){let or=Er(ln.value.layer.feature.properties.coords);(_n=Rt.value)==null||_n.flyTo(or,ln.value.zoom)}}else nn()}function nn(){var un,pn;if(ln.value=null,Jt.value){let[Rn,_n,or]=Jt.value.split(",").map(Wn=>parseFloat(Wn)),Vn=new L$1.LatLng(Rn,_n);(un=Rt.value)==null||un.flyTo(Vn,or),(pn=Rt.value)==null||pn.closePopup()}rn.value=void 0}return(un,pn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:xt,style:{width:"100%",height:"100%"}},[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("div",{id:"lat-lng-zoom",innerHTML:Bt.value,onClick:pn[0]||(pn[0]=Rn=>ar(`${Bt.value}`))},null,8,_hoisted_2$a),pn[1]||(pn[1]=createBaseVNode("div",{id:"map"},null,-1)),nt.caption?(openBlock(),createElementBlock("div",{key:0,id:"caption",innerHTML:nt.caption},null,8,_hoisted_3$9)):createCommentVNode("",!0)])],512))}}),_style_0$b=`.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,.5)}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255,255,255,.8);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:rgba(255,255,255,.8);text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:white;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}input[type=range]{-webkit-appearance:none;-webkit-tap-highlight-color:rgba(255,255,255,0);width:110px;height:10px;margin:0;border:none;padding:1px 2px;border-radius:30px;background:#f1f0ee;outline:none}input[type=range]::-ms-track{border:inherit;color:transparent;background:transparent}input[type=range]::-ms-fill-lower,input[type=range]::-ms-fill-upper{background:transparent}input[type=range]::-ms-tooltip{display:none}input[type=range]::-ms-thumb{width:15px;height:18px;border-radius:12px;border:0;background-image:linear-gradient(to bottom,#1253a4 0,#1253a4 100%)}.leaflet-control-layers-label{margin:0 0 8px 1px}@-webkit-keyframes leaflet-gestures-fadein{0%{opacity:0}to{opacity:1}}@keyframes leaflet-gestures-fadein{0%{opacity:0}to{opacity:1}}.leaflet-container:after{-webkit-animation:leaflet-gestures-fadein .8s backwards;animation:leaflet-gestures-fadein .8s backwards;color:#fff;font-family:Roboto,Arial,sans-serif;font-size:22px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:15px;position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:461;pointer-events:none}.leaflet-gesture-handling-touch-warning:after,.leaflet-gesture-handling-scroll-warning:after{-webkit-animation:leaflet-gestures-fadein .8s forwards;animation:leaflet-gestures-fadein .8s forwards}.leaflet-gesture-handling-touch-warning:after{content:attr(data-gesture-handling-touch-content)}.leaflet-gesture-handling-scroll-warning:after{content:attr(data-gesture-handling-scroll-content)}*{box-sizing:border-box}:host{display:flex;align-content:center;justify-content:center;position:relative;font-family:Roboto,sans-serif;background-color:#fff;margin-bottom:1rem}.content{margin:auto}#map{border:1px solid #ccc;width:100%;height:100%}#caption{font-family:sans-serif;width:100%;white-space:nowrap;background-color:#555;color:#fff;padding:4px 6px;bottom:0;height:32px;text-overflow:ellipsis;overflow:hidden}#lat-lng-zoom{position:absolute;font-family:sans-serif;bottom:24px;right:0;width:150px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#lat-lng-zoom:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy;z-index:1000}.card{display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border-radius:4px;padding:0}.card p{border:none}.card-image{grid-area:1 / 1 / 2 / 2;width:100%;height:190px}.card-title{grid-area:2 / 1 / 3 / 2;font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none}.card-metadata{grid-area:3 / 1 / 4 / 2;list-style:none;padding:.2rem .5rem;margin:0;font-size:.9rem;font-weight:400}.card-abstract{grid-area:4 / 1 / 5 / 2;align-self:flex-end;height:110px;line-height:1.4;font-size:1rem;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;margin:0 0 .5rem}.leaflet-popup-content{width:280px;margin:0}.leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers.png)}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(https://unpkg.com/leaflet@1.9.3/dist/images/layers-2x.png)}
`,Map$3=_export_sfc(_sfc_main$h,[["styles",[_style_0$b]]]),_hoisted_1$d=["innerHTML"],_hoisted_2$9=["innerHTML"],_hoisted_3$8={class:"card-metadata"},_hoisted_4$7=["innerHTML"],_hoisted_5$7=["innerHTML","onClick"],_hoisted_6$4={key:1},_hoisted_7$3=["innerHTML","onClick"],_hoisted_8$3={class:"card-links",style:{"margin-top":"auto"}},_hoisted_9$2={key:0},_sfc_main$g=defineComponent({__name:"MediaCard.ce",props:{manifest:{type:String,required:!0}},setup(nt){const rt=nt,it=computed(()=>`"${thumbnail(_t.value)}"`),st=ref(null);computed(()=>{var ln;return(ln=st==null?void 0:st.value)==null?void 0:ln.parentNode}),computed(()=>{var ln,gn;return(gn=(ln=st.value)==null?void 0:ln.getRootNode())==null?void 0:gn.host});const _t=ref(),xt=computed(()=>_t.value&&getItemInfo(_t.value)),Et=computed(()=>xt.value&&`${xt.value.width.toLocaleString()} x ${xt.value.height.toLocaleString()}`),kt=computed(()=>_t.value&&Nt()),Lt=computed(()=>{let ln=kt.value.find(gn=>gn.label.toLowerCase()==="location");return ln?`${ln.value}`:null}),It=computed(()=>{let ln=kt.value.find(gn=>gn.label.toLowerCase()==="allmapsid");return ln?`${ln.value}`:null}),Rt=computed(()=>{let ln=kt.value.find(gn=>gn.label.toLowerCase()==="zoom");return ln?`${parseFloat(ln.value)}`:9});onUpdated(()=>{getManifest(rt.manifest).then(ln=>_t.value=ln)});function Nt(){let ln=new Set(["created","updated"]),gn=new Set(["image_url","size"]),wn=getMetadata(_t.value).filter(kn=>!gn.has(kn.label));return _t.value.navDate&&wn.push({label:"navDate",value:[_t.value.navDate]}),wn.push({label:"dimensions",value:[Et.value]}),wn=wn.map(kn=>ln.has(kn.label)?{label:kn.label,value:[kn.value[0].split("T")[0]]}:kn).map(kn=>{if(kn.label==="source_url"){let Cn=kn.value[0].split("/").pop();kn={label:"source",value:[`<a href="${kn.value[0]}" target="_blank">${Cn}</a>`]}}return kn}),wn.sort()}getManifest(rt.manifest).then(ln=>_t.value=ln);function Bt(ln){navigator.clipboard&&navigator.clipboard.writeText(ln)}const Ft=ref();watch$1(Ft,ln=>{ln==null||ln.addEventListener("sl-show",()=>{Ft.value&&(Ft.value.panel.style.width=`${on()}px`)})});const Yt=ref(!1);watch$1(Yt,()=>{var ln,gn;Yt.value?(ln=Ft.value)==null||ln.show():(gn=Ft.value)==null||gn.hide()});function Zt(){Yt.value=!Yt.value}const Wt=ref();watch$1(Wt,ln=>{ln==null||ln.addEventListener("sl-show",()=>{Wt.value&&(Wt.value.panel.style.width=`${on()}px`)})});const Kt=ref(!1);watch$1(Kt,()=>{var ln,gn;Kt.value?(ln=Wt.value)==null||ln.show():(gn=Wt.value)==null||gn.hide()});function Jt(){Kt.value=!Kt.value}function on(){let ln=Math.round(window.innerWidth-(isMobile()?0:100)),gn=Math.round(window.innerHeight-150),wn=_t.value;if(wn){let kn=getItemInfo(wn),Cn=Number((kn.width/kn.height).toFixed(4));ln=Cn>=1?ln/Cn>gn?ln=gn*Cn:ln:Math.round(gn*Cn)}return ln}function rn(ln){var wn;ln.stopPropagation();let gn=`https://iiif.juncture-digital.org/?manifest=${_t.value.id}`;(wn=ln.dataTransfer)==null||wn.setData("text/uri-list",gn)}return(ln,gn)=>{const wn=resolveComponent("sl-icon-button"),kn=resolveComponent("ve-media"),Cn=resolveComponent("sl-button"),Pn=resolveComponent("sl-dialog"),An=resolveComponent("ve-map");return _t.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"root",ref:st},[createBaseVNode("div",{class:"card",draggable:"true",onDragstart:rn},[createBaseVNode("div",{class:"card-image",style:normalizeStyle({backgroundImage:`url(${it.value})`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"top"}),onClick:Zt},null,4),createBaseVNode("div",{class:"card-title",innerHTML:unref(label)(_t.value)},null,8,_hoisted_1$d),createBaseVNode("div",{class:"card-abstract",innerHTML:unref(summary)(_t.value)},null,8,_hoisted_2$9),createBaseVNode("ul",_hoisted_3$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value,cn=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-label",innerHTML:cn.label},null,8,_hoisted_4$7),cn.value.length===1?(openBlock(),createElementBlock(Fragment,{key:0},[cn.label==="location"?(openBlock(),createBlock(wn,{key:0,name:"chat-square-text",label:"Show Location",onClick:Jt})):createCommentVNode("",!0),createBaseVNode("span",{class:"md-value",innerHTML:cn.value[0],onClick:Ln=>Bt(cn.value)},null,8,_hoisted_5$7)],64)):(openBlock(),createElementBlock("ul",_hoisted_6$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(cn.value,Ln=>(openBlock(),createElementBlock("li",null,[createBaseVNode("span",{class:"md-value",innerHTML:Ln,onClick:an=>Bt(Ln)},null,8,_hoisted_7$3)]))),256))]))]))),256))]),createBaseVNode("div",_hoisted_8$3,[createBaseVNode("img",{src:"https://juncture-digital.io/juncture/static/images/iiif.png",class:"draggable-iiif",alt:"IIIF manifest icon",onClick:gn[0]||(gn[0]=cn=>Bt(_t.value.id)),onDragstart:rn},null,32)])],32),createVNode(Pn,{ref_key:"imageDialog",ref:Ft,id:"image-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},{default:withCtx(()=>[Yt.value?(openBlock(),createBlock(kn,{key:0,manifest:_t.value.id,"zoom-on-scroll":""},null,8,["manifest"])):createCommentVNode("",!0),createVNode(Cn,{slot:"footer",class:"close",onClick:Zt,variant:"primary"},{default:withCtx(()=>gn[1]||(gn[1]=[createTextVNode("Close")])),_:1,__:[1]})]),_:1},512),createVNode(Pn,{ref_key:"mapDialog",ref:Wt,id:"map-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},{default:withCtx(()=>[Kt.value?(openBlock(),createBlock(An,{key:0,center:Lt.value,zoom:Rt.value},{default:withCtx(()=>[createBaseVNode("ul",null,[createBaseVNode("li",null,toDisplayString(Lt.value),1),It.value?(openBlock(),createElementBlock("li",_hoisted_9$2,"allmaps="+toDisplayString(It.value),1)):createCommentVNode("",!0)])]),_:1},8,["center","zoom"])):createCommentVNode("",!0),createVNode(Cn,{slot:"footer",class:"close",onClick:Jt,variant:"primary"},{default:withCtx(()=>gn[2]||(gn[2]=[createTextVNode("Close")])),_:1,__:[2]})]),_:1},512)],512)):createCommentVNode("",!0)}}}),_style_0$a=`*{box-sizing:border-box}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.md-label{font-weight:700;margin-right:6px;color:#444}.md-value{display:inline;line-height:1.2rem;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;color:#444;cursor:copy}.md-value:hover{text-decoration:underline}.md-label:after{content:":"}.card-metadata ul ul{margin-left:18px}@media (max-width: 480px){.card-image{height:72vw}}.card{display:flex;flex-flow:column nowrap;grid-template-columns:1fr;grid-template-rows:auto auto auto 1fr 0px;border:1px solid #ccc;border-radius:4px;padding:0;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}.card p{border:none}.card-image{align-self:flex-start;width:100%;height:300px;cursor:pointer}.card-title{font-weight:700;font-size:1.5rem;line-height:1;padding:1.3rem .5rem .2rem;text-decoration:none;color:#444}.card-metadata{list-style:none;padding:.2rem .5rem;margin:12px 0 0;font-size:.9em;font-weight:400;max-height:260px;overflow-y:scroll}.card-abstract{align-self:flex-start;line-height:1.4;font-size:.9em;padding:.5rem .5rem 0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;margin:0 0 .5rem;-webkit-line-clamp:8}.card-links{padding:6px}.card-links img{height:24px}.draggable-iiif{cursor:grab}.clamp5{-webkit-line-clamp:5}
`,MediaCard=_export_sfc(_sfc_main$g,[["styles",[_style_0$a]]]),_hoisted_1$c={class:"content"},_sfc_main$f=defineComponent({__name:"MediaSelector.ce",props:{caption:{type:String},width:{type:String},height:{type:String},sticky:{type:Boolean},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ft;return(Ft=it==null?void 0:it.value)==null?void 0:Ft.parentNode}),_t=computed(()=>{var Ft,Yt;return(Yt=(Ft=it.value)==null?void 0:Ft.getRootNode())==null?void 0:Yt.host}),xt=computed(()=>{var Ft;return(Ft=st.value)==null?void 0:Ft.querySelector(".content")}),Et=ref(null),kt=computed(()=>{var Ft,Yt;return((Yt=(Ft=Et.value)==null?void 0:Ft.getAttribute("data-media"))==null?void 0:Yt.split(/\s/).filter(Zt=>Zt))||[]}),Lt=ref();watch$1(_t,()=>It()),watch$1(Lt,()=>console.log(`selected=${toRaw(Lt.value)}`));function It(){Nt(),Bt()}const Rt=isMobile()?"full":rt.right?"right":rt.left?"left":"full";function Nt(){_t.value.classList.add("ve-component"),_t.value.classList.add(Rt),Rt==="full"?_t.value.style.width="100%":(_t.value.style.float=Rt,_t.value.style.width="calc(50% - 16px)"),_t.value.style.width=window.getComputedStyle(_t.value).width,rt.sticky&&makeSticky(_t.value),xt.value.style.width=rt.width||"100%",nextTick(()=>{let Ft=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2)),Yt=Ft;if(rt.sticky&&Rt==="full"){let Zt=Math.round(window.innerHeight*.4);Yt=Math.min(Zt,Ft)}xt.value.style.width=`${Ft}px`,xt.value.style.height=`${Yt}px`})}function Bt(){Et.value=document.querySelector(".active"),new MutationObserver(Yt=>{Yt.forEach(Zt=>{if(Zt.type==="attributes"){let Wt=Zt.target;Array.from(Wt.classList).indexOf("active")>=0&&(Et.value=Wt)}})}).observe(document,{subtree:!0,attributes:!0})}return(Ft,Yt)=>{const Zt=resolveComponent("ve-media");return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"main"},[createBaseVNode("div",_hoisted_1$c,[kt.value.length>0?(openBlock(),createBlock(Zt,{key:0,grid:"",small:"",caption:Ft.$props.caption},{default:withCtx(()=>[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value,(Wt,Kt)=>(openBlock(),createElementBlock("li",{key:`item-${Kt}`},toDisplayString(Wt),1))),128))])]),_:1},8,["caption"])):createCommentVNode("",!0)])],512)}}}),_style_0$9=`sl-button{margin:6px 3px}
`,MediaSelector=_export_sfc(_sfc_main$f,[["styles",[_style_0$9]]]);var dist$1={exports:{}},Sister;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/Sister=function(){var nt={},rt={};return nt.on=function(it,st){var _t={name:it,handler:st};return rt[it]=rt[it]||[],rt[it].unshift(_t),_t},nt.off=function(it){var st=rt[it.name].indexOf(it);st!==-1&&rt[it.name].splice(st,1)},nt.trigger=function(it,st){var _t=rt[it],xt;if(_t)for(xt=_t.length;xt--;)_t[xt].handler(st)},nt};var sister=Sister,YouTubePlayer$1={exports:{}},browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var nt=1e3,rt=nt*60,it=rt*60,st=it*24,_t=st*7,xt=st*365.25;ms=function(Rt,Nt){Nt=Nt||{};var Bt=typeof Rt;if(Bt==="string"&&Rt.length>0)return Et(Rt);if(Bt==="number"&&isFinite(Rt))return Nt.long?Lt(Rt):kt(Rt);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Rt))};function Et(Rt){if(Rt=String(Rt),!(Rt.length>100)){var Nt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Rt);if(!!Nt){var Bt=parseFloat(Nt[1]),Ft=(Nt[2]||"ms").toLowerCase();switch(Ft){case"years":case"year":case"yrs":case"yr":case"y":return Bt*xt;case"weeks":case"week":case"w":return Bt*_t;case"days":case"day":case"d":return Bt*st;case"hours":case"hour":case"hrs":case"hr":case"h":return Bt*it;case"minutes":case"minute":case"mins":case"min":case"m":return Bt*rt;case"seconds":case"second":case"secs":case"sec":case"s":return Bt*nt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Bt;default:return}}}}function kt(Rt){var Nt=Math.abs(Rt);return Nt>=st?Math.round(Rt/st)+"d":Nt>=it?Math.round(Rt/it)+"h":Nt>=rt?Math.round(Rt/rt)+"m":Nt>=nt?Math.round(Rt/nt)+"s":Rt+"ms"}function Lt(Rt){var Nt=Math.abs(Rt);return Nt>=st?It(Rt,Nt,st,"day"):Nt>=it?It(Rt,Nt,it,"hour"):Nt>=rt?It(Rt,Nt,rt,"minute"):Nt>=nt?It(Rt,Nt,nt,"second"):Rt+" ms"}function It(Rt,Nt,Bt,Ft){var Yt=Nt>=Bt*1.5;return Math.round(Rt/Bt)+" "+Ft+(Yt?"s":"")}return ms}function setup(nt){it.debug=it,it.default=it,it.coerce=Lt,it.disable=Et,it.enable=_t,it.enabled=kt,it.humanize=requireMs(),it.destroy=It,Object.keys(nt).forEach(Rt=>{it[Rt]=nt[Rt]}),it.names=[],it.skips=[],it.formatters={};function rt(Rt){let Nt=0;for(let Bt=0;Bt<Rt.length;Bt++)Nt=(Nt<<5)-Nt+Rt.charCodeAt(Bt),Nt|=0;return it.colors[Math.abs(Nt)%it.colors.length]}it.selectColor=rt;function it(Rt){let Nt,Bt=null,Ft,Yt;function Zt(...Wt){if(!Zt.enabled)return;const Kt=Zt,Jt=Number(new Date),on=Jt-(Nt||Jt);Kt.diff=on,Kt.prev=Nt,Kt.curr=Jt,Nt=Jt,Wt[0]=it.coerce(Wt[0]),typeof Wt[0]!="string"&&Wt.unshift("%O");let rn=0;Wt[0]=Wt[0].replace(/%([a-zA-Z%])/g,(gn,wn)=>{if(gn==="%%")return"%";rn++;const kn=it.formatters[wn];if(typeof kn=="function"){const Cn=Wt[rn];gn=kn.call(Kt,Cn),Wt.splice(rn,1),rn--}return gn}),it.formatArgs.call(Kt,Wt),(Kt.log||it.log).apply(Kt,Wt)}return Zt.namespace=Rt,Zt.useColors=it.useColors(),Zt.color=it.selectColor(Rt),Zt.extend=st,Zt.destroy=it.destroy,Object.defineProperty(Zt,"enabled",{enumerable:!0,configurable:!1,get:()=>Bt!==null?Bt:(Ft!==it.namespaces&&(Ft=it.namespaces,Yt=it.enabled(Rt)),Yt),set:Wt=>{Bt=Wt}}),typeof it.init=="function"&&it.init(Zt),Zt}function st(Rt,Nt){const Bt=it(this.namespace+(typeof Nt>"u"?":":Nt)+Rt);return Bt.log=this.log,Bt}function _t(Rt){it.save(Rt),it.namespaces=Rt,it.names=[],it.skips=[];const Nt=(typeof Rt=="string"?Rt:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const Bt of Nt)Bt[0]==="-"?it.skips.push(Bt.slice(1)):it.names.push(Bt)}function xt(Rt,Nt){let Bt=0,Ft=0,Yt=-1,Zt=0;for(;Bt<Rt.length;)if(Ft<Nt.length&&(Nt[Ft]===Rt[Bt]||Nt[Ft]==="*"))Nt[Ft]==="*"?(Yt=Ft,Zt=Bt,Ft++):(Bt++,Ft++);else if(Yt!==-1)Ft=Yt+1,Zt++,Bt=Zt;else return!1;for(;Ft<Nt.length&&Nt[Ft]==="*";)Ft++;return Ft===Nt.length}function Et(){const Rt=[...it.names,...it.skips.map(Nt=>"-"+Nt)].join(",");return it.enable(""),Rt}function kt(Rt){for(const Nt of it.skips)if(xt(Rt,Nt))return!1;for(const Nt of it.names)if(xt(Rt,Nt))return!0;return!1}function Lt(Rt){return Rt instanceof Error?Rt.stack||Rt.message:Rt}function It(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return it.enable(it.load()),it}var common$2=setup;(function(nt,rt){rt.formatArgs=st,rt.save=_t,rt.load=xt,rt.useColors=it,rt.storage=Et(),rt.destroy=(()=>{let Lt=!1;return()=>{Lt||(Lt=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),rt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function it(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let Lt;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(Lt=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(Lt[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function st(Lt){if(Lt[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Lt[0]+(this.useColors?"%c ":" ")+"+"+nt.exports.humanize(this.diff),!this.useColors)return;const It="color: "+this.color;Lt.splice(1,0,It,"color: inherit");let Rt=0,Nt=0;Lt[0].replace(/%[a-zA-Z%]/g,Bt=>{Bt!=="%%"&&(Rt++,Bt==="%c"&&(Nt=Rt))}),Lt.splice(Nt,0,It)}rt.log=console.debug||console.log||(()=>{});function _t(Lt){try{Lt?rt.storage.setItem("debug",Lt):rt.storage.removeItem("debug")}catch{}}function xt(){let Lt;try{Lt=rt.storage.getItem("debug")||rt.storage.getItem("DEBUG")}catch{}return!Lt&&typeof process<"u"&&"env"in process&&(Lt={version:"2.0.0-beta.31"}.DEBUG),Lt}function Et(){try{return localStorage}catch{}}nt.exports=common$2(rt);const{formatters:kt}=nt.exports;kt.j=function(Lt){try{return JSON.stringify(Lt)}catch(It){return"[UnexpectedJSONParseError]: "+It.message}}})(browser,browser.exports);var FunctionStateMap={exports:{}},PlayerStates={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},nt.exports=rt.default})(PlayerStates,PlayerStates.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=PlayerStates.exports,st=_t(it);function _t(xt){return xt&&xt.__esModule?xt:{default:xt}}rt.default={pauseVideo:{acceptableStates:[st.default.ENDED,st.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[st.default.ENDED,st.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[st.default.ENDED,st.default.PLAYING,st.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},nt.exports=rt.default})(FunctionStateMap,FunctionStateMap.exports);var eventNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],nt.exports=rt.default})(eventNames,eventNames.exports);var functionNames={exports:{}};(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe","getSphericalProperties","setSphericalProperties"],nt.exports=rt.default})(functionNames,functionNames.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=browser.exports,st=Rt(it),_t=FunctionStateMap.exports,xt=Rt(_t),Et=eventNames.exports,kt=Rt(Et),Lt=functionNames.exports,It=Rt(Lt);function Rt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}const Nt=(0,st.default)("youtube-player"),Bt={};Bt.proxyEvents=Ft=>{const Yt={};for(const Zt of kt.default){const Wt="on"+Zt.slice(0,1).toUpperCase()+Zt.slice(1);Yt[Wt]=Kt=>{Nt('event "%s"',Wt,Kt),Ft.trigger(Zt,Kt)}}return Yt},Bt.promisifyPlayer=(Ft,Yt=!1)=>{const Zt={};for(const Wt of It.default)Yt&&xt.default[Wt]?Zt[Wt]=(...Kt)=>Ft.then(Jt=>{const on=xt.default[Wt],rn=Jt.getPlayerState(),ln=Jt[Wt].apply(Jt,Kt);return on.stateChangeRequired||Array.isArray(on.acceptableStates)&&!on.acceptableStates.includes(rn)?new Promise(gn=>{const wn=()=>{const kn=Jt.getPlayerState();let Cn;typeof on.timeout=="number"&&(Cn=setTimeout(()=>{Jt.removeEventListener("onStateChange",wn),gn()},on.timeout)),Array.isArray(on.acceptableStates)&&on.acceptableStates.includes(kn)&&(Jt.removeEventListener("onStateChange",wn),clearTimeout(Cn),gn())};Jt.addEventListener("onStateChange",wn)}).then(()=>ln):ln}):Zt[Wt]=(...Kt)=>Ft.then(Jt=>Jt[Wt].apply(Jt,Kt));return Zt},rt.default=Bt,nt.exports=rt.default})(YouTubePlayer$1,YouTubePlayer$1.exports);var loadYouTubeIframeApi={exports:{}},loadScript=function nt(rt,it,st){var _t=document.head||document.getElementsByTagName("head")[0],xt=document.createElement("script");typeof it=="function"&&(st=it,it={}),it=it||{},st=st||function(){},xt.type=it.type||"text/javascript",xt.charset=it.charset||"utf8",xt.async="async"in it?!!it.async:!0,xt.src=rt,it.attrs&&setAttributes(xt,it.attrs),it.text&&(xt.text=""+it.text);var Et="onload"in xt?stdOnEnd:ieOnEnd;Et(xt,st),xt.onload||stdOnEnd(xt,st),_t.appendChild(xt)};function setAttributes(nt,rt){for(var it in rt)nt.setAttribute(it,rt[it])}function stdOnEnd(nt,rt){nt.onload=function(){this.onerror=this.onload=null,rt(null,nt)},nt.onerror=function(){this.onerror=this.onload=null,rt(new Error("Failed to load "+this.src),nt)}}function ieOnEnd(nt,rt){nt.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,rt(null,nt))}}(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=loadScript,st=_t(it);function _t(xt){return xt&&xt.__esModule?xt:{default:xt}}rt.default=xt=>new Promise(kt=>{if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){kt(window.YT);return}else{const It=window.location.protocol==="http:"?"http:":"https:";(0,st.default)(It+"//www.youtube.com/iframe_api",Rt=>{Rt&&xt.trigger("error",Rt)})}const Lt=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{Lt&&Lt(),kt(window.YT)}}),nt.exports=rt.default})(loadYouTubeIframeApi,loadYouTubeIframeApi.exports);(function(nt,rt){Object.defineProperty(rt,"__esModule",{value:!0});var it=sister,st=Lt(it),_t=YouTubePlayer$1.exports,xt=Lt(_t),Et=loadYouTubeIframeApi.exports,kt=Lt(Et);function Lt(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}let It;rt.default=(Rt,Nt={},Bt=!1)=>{const Ft=(0,st.default)();if(It||(It=(0,kt.default)(Ft)),Nt.events)throw new Error("Event handlers cannot be overwritten.");if(typeof Rt=="string"&&!document.getElementById(Rt))throw new Error('Element "'+Rt+'" does not exist.');Nt.events=xt.default.proxyEvents(Ft);const Yt=new Promise(Wt=>{typeof Rt=="object"&&Rt.playVideo instanceof Function?Wt(Rt):It.then(Kt=>{const Jt=new Kt.Player(Rt,Nt);return Ft.on("ready",()=>{Wt(Jt)}),null})}),Zt=xt.default.promisifyPlayer(Yt,Bt);return Zt.on=Ft.on,Zt.off=Ft.off,Zt},nt.exports=rt.default})(dist$1,dist$1.exports);const YouTubePlayer=getDefaultExportFromCjs(dist$1.exports);/*! @vimeo/player v2.27.1 | (c) 2025 Vimeo | MIT License | https://github.com/vimeo/player.js */function ownKeys(nt,rt){var it=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);rt&&(st=st.filter(function(_t){return Object.getOwnPropertyDescriptor(nt,_t).enumerable})),it.push.apply(it,st)}return it}function _objectSpread2(nt){for(var rt=1;rt<arguments.length;rt++){var it=arguments[rt]!=null?arguments[rt]:{};rt%2?ownKeys(Object(it),!0).forEach(function(st){_defineProperty(nt,st,it[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(it)):ownKeys(Object(it)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(it,st))})}return nt}function _regeneratorRuntime(){_regeneratorRuntime=function(){return nt};var nt={},rt=Object.prototype,it=rt.hasOwnProperty,st=Object.defineProperty||function(cn,Ln,an){cn[Ln]=an.value},_t=typeof Symbol=="function"?Symbol:{},xt=_t.iterator||"@@iterator",Et=_t.asyncIterator||"@@asyncIterator",kt=_t.toStringTag||"@@toStringTag";function Lt(cn,Ln,an){return Object.defineProperty(cn,Ln,{value:an,enumerable:!0,configurable:!0,writable:!0}),cn[Ln]}try{Lt({},"")}catch{Lt=function(Ln,an,zn){return Ln[an]=zn}}function It(cn,Ln,an,zn){var dn=Ln&&Ln.prototype instanceof Bt?Ln:Bt,Fn=Object.create(dn.prototype),ir=new Cn(zn||[]);return st(Fn,"_invoke",{value:ln(cn,an,ir)}),Fn}function Rt(cn,Ln,an){try{return{type:"normal",arg:cn.call(Ln,an)}}catch(zn){return{type:"throw",arg:zn}}}nt.wrap=It;var Nt={};function Bt(){}function Ft(){}function Yt(){}var Zt={};Lt(Zt,xt,function(){return this});var Wt=Object.getPrototypeOf,Kt=Wt&&Wt(Wt(Pn([])));Kt&&Kt!==rt&&it.call(Kt,xt)&&(Zt=Kt);var Jt=Yt.prototype=Bt.prototype=Object.create(Zt);function on(cn){["next","throw","return"].forEach(function(Ln){Lt(cn,Ln,function(an){return this._invoke(Ln,an)})})}function rn(cn,Ln){function an(dn,Fn,ir,tr){var Jn=Rt(cn[dn],cn,Fn);if(Jn.type!=="throw"){var hr=Jn.arg,lr=hr.value;return lr&&typeof lr=="object"&&it.call(lr,"__await")?Ln.resolve(lr.__await).then(function(cr){an("next",cr,ir,tr)},function(cr){an("throw",cr,ir,tr)}):Ln.resolve(lr).then(function(cr){hr.value=cr,ir(hr)},function(cr){return an("throw",cr,ir,tr)})}tr(Jn.arg)}var zn;st(this,"_invoke",{value:function(dn,Fn){function ir(){return new Ln(function(tr,Jn){an(dn,Fn,tr,Jn)})}return zn=zn?zn.then(ir,ir):ir()}})}function ln(cn,Ln,an){var zn="suspendedStart";return function(dn,Fn){if(zn==="executing")throw new Error("Generator is already running");if(zn==="completed"){if(dn==="throw")throw Fn;return An()}for(an.method=dn,an.arg=Fn;;){var ir=an.delegate;if(ir){var tr=gn(ir,an);if(tr){if(tr===Nt)continue;return tr}}if(an.method==="next")an.sent=an._sent=an.arg;else if(an.method==="throw"){if(zn==="suspendedStart")throw zn="completed",an.arg;an.dispatchException(an.arg)}else an.method==="return"&&an.abrupt("return",an.arg);zn="executing";var Jn=Rt(cn,Ln,an);if(Jn.type==="normal"){if(zn=an.done?"completed":"suspendedYield",Jn.arg===Nt)continue;return{value:Jn.arg,done:an.done}}Jn.type==="throw"&&(zn="completed",an.method="throw",an.arg=Jn.arg)}}}function gn(cn,Ln){var an=Ln.method,zn=cn.iterator[an];if(zn===void 0)return Ln.delegate=null,an==="throw"&&cn.iterator.return&&(Ln.method="return",Ln.arg=void 0,gn(cn,Ln),Ln.method==="throw")||an!=="return"&&(Ln.method="throw",Ln.arg=new TypeError("The iterator does not provide a '"+an+"' method")),Nt;var dn=Rt(zn,cn.iterator,Ln.arg);if(dn.type==="throw")return Ln.method="throw",Ln.arg=dn.arg,Ln.delegate=null,Nt;var Fn=dn.arg;return Fn?Fn.done?(Ln[cn.resultName]=Fn.value,Ln.next=cn.nextLoc,Ln.method!=="return"&&(Ln.method="next",Ln.arg=void 0),Ln.delegate=null,Nt):Fn:(Ln.method="throw",Ln.arg=new TypeError("iterator result is not an object"),Ln.delegate=null,Nt)}function wn(cn){var Ln={tryLoc:cn[0]};1 in cn&&(Ln.catchLoc=cn[1]),2 in cn&&(Ln.finallyLoc=cn[2],Ln.afterLoc=cn[3]),this.tryEntries.push(Ln)}function kn(cn){var Ln=cn.completion||{};Ln.type="normal",delete Ln.arg,cn.completion=Ln}function Cn(cn){this.tryEntries=[{tryLoc:"root"}],cn.forEach(wn,this),this.reset(!0)}function Pn(cn){if(cn){var Ln=cn[xt];if(Ln)return Ln.call(cn);if(typeof cn.next=="function")return cn;if(!isNaN(cn.length)){var an=-1,zn=function dn(){for(;++an<cn.length;)if(it.call(cn,an))return dn.value=cn[an],dn.done=!1,dn;return dn.value=void 0,dn.done=!0,dn};return zn.next=zn}}return{next:An}}function An(){return{value:void 0,done:!0}}return Ft.prototype=Yt,st(Jt,"constructor",{value:Yt,configurable:!0}),st(Yt,"constructor",{value:Ft,configurable:!0}),Ft.displayName=Lt(Yt,kt,"GeneratorFunction"),nt.isGeneratorFunction=function(cn){var Ln=typeof cn=="function"&&cn.constructor;return!!Ln&&(Ln===Ft||(Ln.displayName||Ln.name)==="GeneratorFunction")},nt.mark=function(cn){return Object.setPrototypeOf?Object.setPrototypeOf(cn,Yt):(cn.__proto__=Yt,Lt(cn,kt,"GeneratorFunction")),cn.prototype=Object.create(Jt),cn},nt.awrap=function(cn){return{__await:cn}},on(rn.prototype),Lt(rn.prototype,Et,function(){return this}),nt.AsyncIterator=rn,nt.async=function(cn,Ln,an,zn,dn){dn===void 0&&(dn=Promise);var Fn=new rn(It(cn,Ln,an,zn),dn);return nt.isGeneratorFunction(Ln)?Fn:Fn.next().then(function(ir){return ir.done?ir.value:Fn.next()})},on(Jt),Lt(Jt,kt,"Generator"),Lt(Jt,xt,function(){return this}),Lt(Jt,"toString",function(){return"[object Generator]"}),nt.keys=function(cn){var Ln=Object(cn),an=[];for(var zn in Ln)an.push(zn);return an.reverse(),function dn(){for(;an.length;){var Fn=an.pop();if(Fn in Ln)return dn.value=Fn,dn.done=!1,dn}return dn.done=!0,dn}},nt.values=Pn,Cn.prototype={constructor:Cn,reset:function(cn){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(kn),!cn)for(var Ln in this)Ln.charAt(0)==="t"&&it.call(this,Ln)&&!isNaN(+Ln.slice(1))&&(this[Ln]=void 0)},stop:function(){this.done=!0;var cn=this.tryEntries[0].completion;if(cn.type==="throw")throw cn.arg;return this.rval},dispatchException:function(cn){if(this.done)throw cn;var Ln=this;function an(Jn,hr){return Fn.type="throw",Fn.arg=cn,Ln.next=Jn,hr&&(Ln.method="next",Ln.arg=void 0),!!hr}for(var zn=this.tryEntries.length-1;zn>=0;--zn){var dn=this.tryEntries[zn],Fn=dn.completion;if(dn.tryLoc==="root")return an("end");if(dn.tryLoc<=this.prev){var ir=it.call(dn,"catchLoc"),tr=it.call(dn,"finallyLoc");if(ir&&tr){if(this.prev<dn.catchLoc)return an(dn.catchLoc,!0);if(this.prev<dn.finallyLoc)return an(dn.finallyLoc)}else if(ir){if(this.prev<dn.catchLoc)return an(dn.catchLoc,!0)}else{if(!tr)throw new Error("try statement without catch or finally");if(this.prev<dn.finallyLoc)return an(dn.finallyLoc)}}}},abrupt:function(cn,Ln){for(var an=this.tryEntries.length-1;an>=0;--an){var zn=this.tryEntries[an];if(zn.tryLoc<=this.prev&&it.call(zn,"finallyLoc")&&this.prev<zn.finallyLoc){var dn=zn;break}}dn&&(cn==="break"||cn==="continue")&&dn.tryLoc<=Ln&&Ln<=dn.finallyLoc&&(dn=null);var Fn=dn?dn.completion:{};return Fn.type=cn,Fn.arg=Ln,dn?(this.method="next",this.next=dn.finallyLoc,Nt):this.complete(Fn)},complete:function(cn,Ln){if(cn.type==="throw")throw cn.arg;return cn.type==="break"||cn.type==="continue"?this.next=cn.arg:cn.type==="return"?(this.rval=this.arg=cn.arg,this.method="return",this.next="end"):cn.type==="normal"&&Ln&&(this.next=Ln),Nt},finish:function(cn){for(var Ln=this.tryEntries.length-1;Ln>=0;--Ln){var an=this.tryEntries[Ln];if(an.finallyLoc===cn)return this.complete(an.completion,an.afterLoc),kn(an),Nt}},catch:function(cn){for(var Ln=this.tryEntries.length-1;Ln>=0;--Ln){var an=this.tryEntries[Ln];if(an.tryLoc===cn){var zn=an.completion;if(zn.type==="throw"){var dn=zn.arg;kn(an)}return dn}}throw new Error("illegal catch attempt")},delegateYield:function(cn,Ln,an){return this.delegate={iterator:Pn(cn),resultName:Ln,nextLoc:an},this.method==="next"&&(this.arg=void 0),Nt}},nt}function asyncGeneratorStep(nt,rt,it,st,_t,xt,Et){try{var kt=nt[xt](Et),Lt=kt.value}catch(It){it(It);return}kt.done?rt(Lt):Promise.resolve(Lt).then(st,_t)}function _asyncToGenerator(nt){return function(){var rt=this,it=arguments;return new Promise(function(st,_t){var xt=nt.apply(rt,it);function Et(Lt){asyncGeneratorStep(xt,st,_t,Et,kt,"next",Lt)}function kt(Lt){asyncGeneratorStep(xt,st,_t,Et,kt,"throw",Lt)}Et(void 0)})}}function _classCallCheck(nt,rt){if(!(nt instanceof rt))throw new TypeError("Cannot call a class as a function")}function _defineProperties(nt,rt){for(var it=0;it<rt.length;it++){var st=rt[it];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(nt,_toPropertyKey(st.key),st)}}function _createClass(nt,rt,it){return rt&&_defineProperties(nt.prototype,rt),it&&_defineProperties(nt,it),Object.defineProperty(nt,"prototype",{writable:!1}),nt}function _defineProperty(nt,rt,it){return rt=_toPropertyKey(rt),rt in nt?Object.defineProperty(nt,rt,{value:it,enumerable:!0,configurable:!0,writable:!0}):nt[rt]=it,nt}function _inherits(nt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(rt&&rt.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),rt&&_setPrototypeOf$1(nt,rt)}function _getPrototypeOf(nt){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(it){return it.__proto__||Object.getPrototypeOf(it)},_getPrototypeOf(nt)}function _setPrototypeOf$1(nt,rt){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(st,_t){return st.__proto__=_t,st},_setPrototypeOf$1(nt,rt)}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct$1(nt,rt,it){return _isNativeReflectConstruct$1()?_construct$1=Reflect.construct.bind():_construct$1=function(_t,xt,Et){var kt=[null];kt.push.apply(kt,xt);var Lt=Function.bind.apply(_t,kt),It=new Lt;return Et&&_setPrototypeOf$1(It,Et.prototype),It},_construct$1.apply(null,arguments)}function _isNativeFunction(nt){return Function.toString.call(nt).indexOf("[native code]")!==-1}function _wrapNativeSuper(nt){var rt=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(st){if(st===null||!_isNativeFunction(st))return st;if(typeof st!="function")throw new TypeError("Super expression must either be null or a function");if(typeof rt<"u"){if(rt.has(st))return rt.get(st);rt.set(st,_t)}function _t(){return _construct$1(st,arguments,_getPrototypeOf(this).constructor)}return _t.prototype=Object.create(st.prototype,{constructor:{value:_t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(_t,st)},_wrapNativeSuper(nt)}function _assertThisInitialized(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function _possibleConstructorReturn(nt,rt){if(rt&&(typeof rt=="object"||typeof rt=="function"))return rt;if(rt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(nt)}function _createSuper(nt){var rt=_isNativeReflectConstruct$1();return function(){var st=_getPrototypeOf(nt),_t;if(rt){var xt=_getPrototypeOf(this).constructor;_t=Reflect.construct(st,arguments,xt)}else _t=st.apply(this,arguments);return _possibleConstructorReturn(this,_t)}}function _toPrimitive(nt,rt){if(typeof nt!="object"||nt===null)return nt;var it=nt[Symbol.toPrimitive];if(it!==void 0){var st=it.call(nt,rt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(nt)}function _toPropertyKey(nt){var rt=_toPrimitive(nt,"string");return typeof rt=="symbol"?rt:String(rt)}var isNode=typeof global<"u"&&{}.toString.call(global)==="[object global]";function getMethodName(nt,rt){return nt.indexOf(rt.toLowerCase())===0?nt:"".concat(rt.toLowerCase()).concat(nt.substr(0,1).toUpperCase()).concat(nt.substr(1))}function isDomElement(nt){return Boolean(nt&&nt.nodeType===1&&"nodeName"in nt&&nt.ownerDocument&&nt.ownerDocument.defaultView)}function isInteger$1(nt){return!isNaN(parseFloat(nt))&&isFinite(nt)&&Math.floor(nt)==nt}function isVimeoUrl(nt){return/^(https?:)?\/\/((((player|www)\.)?vimeo\.com)|((player\.)?[a-zA-Z0-9-]+\.(videoji\.(hk|cn)|vimeo\.work)))(?=$|\/)/.test(nt)}function isVimeoEmbed(nt){var rt=/^https:\/\/player\.((vimeo\.com)|([a-zA-Z0-9-]+\.(videoji\.(hk|cn)|vimeo\.work)))\/video\/\d+/;return rt.test(nt)}function getOembedDomain(nt){for(var rt=(nt||"").match(/^(?:https?:)?(?:\/\/)?([^/?]+)/),it=(rt&&rt[1]||"").replace("player.",""),st=[".videoji.hk",".vimeo.work",".videoji.cn"],_t=0,xt=st;_t<xt.length;_t++){var Et=xt[_t];if(it.endsWith(Et))return it}return"vimeo.com"}function getVimeoUrl(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=nt.id,it=nt.url,st=rt||it;if(!st)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(isInteger$1(st))return"https://vimeo.com/".concat(st);if(isVimeoUrl(st))return st.replace("http:","https:");throw rt?new TypeError("\u201C".concat(rt,"\u201D is not a valid video id.")):new TypeError("\u201C".concat(st,"\u201D is not a vimeo.com url."))}var subscribe=function nt(rt,it,st){var _t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"addEventListener",xt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"removeEventListener",Et=typeof it=="string"?[it]:it;return Et.forEach(function(kt){rt[_t](kt,st)}),{cancel:function(){return Et.forEach(function(Lt){return rt[xt](Lt,st)})}}},arrayIndexOfSupport=typeof Array.prototype.indexOf<"u",postMessageSupport=typeof window<"u"&&typeof window.postMessage<"u";if(!isNode&&(!arrayIndexOfSupport||!postMessageSupport))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule(nt,rt){return rt={exports:{}},nt(rt,rt.exports),rt.exports}/*!
 * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */(function(nt){if(nt.WeakMap)return;var rt=Object.prototype.hasOwnProperty,it=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),st=function(xt,Et,kt){it?Object.defineProperty(xt,Et,{configurable:!0,writable:!0,value:kt}):xt[Et]=kt};nt.WeakMap=function(){function xt(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(st(this,"_id",kt("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}st(xt.prototype,"delete",function(It){if(Et(this,"delete"),!_t(It))return!1;var Rt=It[this._id];return Rt&&Rt[0]===It?(delete It[this._id],!0):!1}),st(xt.prototype,"get",function(It){if(Et(this,"get"),!!_t(It)){var Rt=It[this._id];if(Rt&&Rt[0]===It)return Rt[1]}}),st(xt.prototype,"has",function(It){if(Et(this,"has"),!_t(It))return!1;var Rt=It[this._id];return!!(Rt&&Rt[0]===It)}),st(xt.prototype,"set",function(It,Rt){if(Et(this,"set"),!_t(It))throw new TypeError("Invalid value used as weak map key");var Nt=It[this._id];return Nt&&Nt[0]===It?(Nt[1]=Rt,this):(st(It,this._id,[It,Rt]),this)});function Et(It,Rt){if(!_t(It)||!rt.call(It,"_id"))throw new TypeError(Rt+" method called on incompatible receiver "+typeof It)}function kt(It){return It+"_"+Lt()+"."+Lt()}function Lt(){return Math.random().toString().substring(2)}return st(xt,"_polyfill",!0),xt}();function _t(xt){return Object(xt)===xt}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal);var npo_src=createCommonjsModule(function(nt){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(it,st,_t){st[it]=st[it]||_t(),nt.exports&&(nt.exports=st[it])})("Promise",commonjsGlobal,function(){var it,st,_t,xt=Object.prototype.toString,Et=typeof setImmediate<"u"?function(on){return setImmediate(on)}:setTimeout;try{Object.defineProperty({},"x",{}),it=function(on,rn,ln,gn){return Object.defineProperty(on,rn,{value:ln,writable:!0,configurable:gn!==!1})}}catch{it=function(rn,ln,gn){return rn[ln]=gn,rn}}_t=function(){var on,rn,ln;function gn(wn,kn){this.fn=wn,this.self=kn,this.next=void 0}return{add:function(kn,Cn){ln=new gn(kn,Cn),rn?rn.next=ln:on=ln,rn=ln,ln=void 0},drain:function(){var kn=on;for(on=rn=st=void 0;kn;)kn.fn.call(kn.self),kn=kn.next}}}();function kt(Jt,on){_t.add(Jt,on),st||(st=Et(_t.drain))}function Lt(Jt){var on,rn=typeof Jt;return Jt!=null&&(rn=="object"||rn=="function")&&(on=Jt.then),typeof on=="function"?on:!1}function It(){for(var Jt=0;Jt<this.chain.length;Jt++)Rt(this,this.state===1?this.chain[Jt].success:this.chain[Jt].failure,this.chain[Jt]);this.chain.length=0}function Rt(Jt,on,rn){var ln,gn;try{on===!1?rn.reject(Jt.msg):(on===!0?ln=Jt.msg:ln=on.call(void 0,Jt.msg),ln===rn.promise?rn.reject(TypeError("Promise-chain cycle")):(gn=Lt(ln))?gn.call(ln,rn.resolve,rn.reject):rn.resolve(ln))}catch(wn){rn.reject(wn)}}function Nt(Jt){var on,rn=this;if(!rn.triggered){rn.triggered=!0,rn.def&&(rn=rn.def);try{(on=Lt(Jt))?kt(function(){var ln=new Yt(rn);try{on.call(Jt,function(){Nt.apply(ln,arguments)},function(){Bt.apply(ln,arguments)})}catch(gn){Bt.call(ln,gn)}}):(rn.msg=Jt,rn.state=1,rn.chain.length>0&&kt(It,rn))}catch(ln){Bt.call(new Yt(rn),ln)}}}function Bt(Jt){var on=this;on.triggered||(on.triggered=!0,on.def&&(on=on.def),on.msg=Jt,on.state=2,on.chain.length>0&&kt(It,on))}function Ft(Jt,on,rn,ln){for(var gn=0;gn<on.length;gn++)(function(kn){Jt.resolve(on[kn]).then(function(Pn){rn(kn,Pn)},ln)})(gn)}function Yt(Jt){this.def=Jt,this.triggered=!1}function Zt(Jt){this.promise=Jt,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Wt(Jt){if(typeof Jt!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var on=new Zt(this);this.then=function(ln,gn){var wn={success:typeof ln=="function"?ln:!0,failure:typeof gn=="function"?gn:!1};return wn.promise=new this.constructor(function(Cn,Pn){if(typeof Cn!="function"||typeof Pn!="function")throw TypeError("Not a function");wn.resolve=Cn,wn.reject=Pn}),on.chain.push(wn),on.state!==0&&kt(It,on),wn.promise},this.catch=function(ln){return this.then(void 0,ln)};try{Jt.call(void 0,function(ln){Nt.call(on,ln)},function(ln){Bt.call(on,ln)})}catch(rn){Bt.call(on,rn)}}var Kt=it({},"constructor",Wt,!1);return Wt.prototype=Kt,it(Kt,"__NPO__",0,!1),it(Wt,"resolve",function(on){var rn=this;return on&&typeof on=="object"&&on.__NPO__===1?on:new rn(function(gn,wn){if(typeof gn!="function"||typeof wn!="function")throw TypeError("Not a function");gn(on)})}),it(Wt,"reject",function(on){return new this(function(ln,gn){if(typeof ln!="function"||typeof gn!="function")throw TypeError("Not a function");gn(on)})}),it(Wt,"all",function(on){var rn=this;return xt.call(on)!="[object Array]"?rn.reject(TypeError("Not an array")):on.length===0?rn.resolve([]):new rn(function(gn,wn){if(typeof gn!="function"||typeof wn!="function")throw TypeError("Not a function");var kn=on.length,Cn=Array(kn),Pn=0;Ft(rn,on,function(cn,Ln){Cn[cn]=Ln,++Pn===kn&&gn(Cn)},wn)})}),it(Wt,"race",function(on){var rn=this;return xt.call(on)!="[object Array]"?rn.reject(TypeError("Not an array")):new rn(function(gn,wn){if(typeof gn!="function"||typeof wn!="function")throw TypeError("Not a function");Ft(rn,on,function(Cn,Pn){gn(Pn)},wn)})}),Wt})}),callbackMap=new WeakMap;function storeCallback(nt,rt,it){var st=callbackMap.get(nt.element)||{};rt in st||(st[rt]=[]),st[rt].push(it),callbackMap.set(nt.element,st)}function getCallbacks(nt,rt){var it=callbackMap.get(nt.element)||{};return it[rt]||[]}function removeCallback(nt,rt,it){var st=callbackMap.get(nt.element)||{};if(!st[rt])return!0;if(!it)return st[rt]=[],callbackMap.set(nt.element,st),!0;var _t=st[rt].indexOf(it);return _t!==-1&&st[rt].splice(_t,1),callbackMap.set(nt.element,st),st[rt]&&st[rt].length===0}function shiftCallbacks(nt,rt){var it=getCallbacks(nt,rt);if(it.length<1)return!1;var st=it.shift();return removeCallback(nt,rt,st),st}function swapCallbacks(nt,rt){var it=callbackMap.get(nt);callbackMap.set(rt,it),callbackMap.delete(nt)}function parseMessageData(nt){if(typeof nt=="string")try{nt=JSON.parse(nt)}catch(rt){return console.warn(rt),{}}return nt}function postMessage(nt,rt,it){if(!(!nt.element.contentWindow||!nt.element.contentWindow.postMessage)){var st={method:rt};it!==void 0&&(st.value=it);var _t=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));_t>=8&&_t<10&&(st=JSON.stringify(st)),nt.element.contentWindow.postMessage(st,nt.origin)}}function processData(nt,rt){rt=parseMessageData(rt);var it=[],st;if(rt.event){if(rt.event==="error"){var _t=getCallbacks(nt,rt.data.method);_t.forEach(function(Et){var kt=new Error(rt.data.message);kt.name=rt.data.name,Et.reject(kt),removeCallback(nt,rt.data.method,Et)})}it=getCallbacks(nt,"event:".concat(rt.event)),st=rt.data}else if(rt.method){var xt=shiftCallbacks(nt,rt.method);xt&&(it.push(xt),st=rt.value)}it.forEach(function(Et){try{if(typeof Et=="function"){Et.call(nt,st);return}Et.resolve(st)}catch{}})}var oEmbedParameters=["airplay","audio_tracks","audiotrack","autopause","autoplay","background","byline","cc","chapter_id","chapters","chromecast","color","colors","controls","dnt","end_time","fullscreen","height","id","initial_quality","interactive_params","keyboard","loop","maxheight","max_quality","maxwidth","min_quality","muted","play_button_position","playsinline","portrait","progress_bar","quality","quality_selector","responsive","skipping_forward","speed","start_time","texttrack","title","transcript","transparent","unmute_button","url","vimeo_logo","volume","watch_full_video","width"];function getOEmbedParameters(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oEmbedParameters.reduce(function(it,st){var _t=nt.getAttribute("data-vimeo-".concat(st));return(_t||_t==="")&&(it[st]=_t===""?1:_t),it},rt)}function createEmbed(nt,rt){var it=nt.html;if(!rt)throw new TypeError("An element must be provided");if(rt.getAttribute("data-vimeo-initialized")!==null)return rt.querySelector("iframe");var st=document.createElement("div");return st.innerHTML=it,rt.appendChild(st.firstChild),rt.setAttribute("data-vimeo-initialized","true"),rt.querySelector("iframe")}function getOEmbedData(nt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=arguments.length>2?arguments[2]:void 0;return new Promise(function(st,_t){if(!isVimeoUrl(nt))throw new TypeError("\u201C".concat(nt,"\u201D is not a vimeo.com url."));var xt=getOembedDomain(nt),Et="https://".concat(xt,"/api/oembed.json?url=").concat(encodeURIComponent(nt));for(var kt in rt)rt.hasOwnProperty(kt)&&(Et+="&".concat(kt,"=").concat(encodeURIComponent(rt[kt])));var Lt="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;Lt.open("GET",Et,!0),Lt.onload=function(){if(Lt.status===404){_t(new Error("\u201C".concat(nt,"\u201D was not found.")));return}if(Lt.status===403){_t(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}try{var It=JSON.parse(Lt.responseText);if(It.domain_status_code===403){createEmbed(It,it),_t(new Error("\u201C".concat(nt,"\u201D is not embeddable.")));return}st(It)}catch(Rt){_t(Rt)}},Lt.onerror=function(){var It=Lt.status?" (".concat(Lt.status,")"):"";_t(new Error("There was an error fetching the embed code from Vimeo".concat(It,".")))},Lt.send()})}function initializeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,rt=[].slice.call(nt.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),it=function(_t){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(_t))};rt.forEach(function(st){try{if(st.getAttribute("data-vimeo-defer")!==null)return;var _t=getOEmbedParameters(st),xt=getVimeoUrl(_t);getOEmbedData(xt,_t,st).then(function(Et){return createEmbed(Et,st)}).catch(it)}catch(Et){it(Et)}})}function resizeEmbeds(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var rt=function(st){if(!!isVimeoUrl(st.origin)&&!(!st.data||st.data.event!=="spacechange")){for(var _t=nt.querySelectorAll("iframe"),xt=0;xt<_t.length;xt++)if(_t[xt].contentWindow===st.source){var Et=_t[xt].parentElement;Et.style.paddingBottom="".concat(st.data.data[0].bottom,"px");break}}};window.addEventListener("message",rt)}}function initAppendVideoMetadata(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var rt=function(st){if(!!isVimeoUrl(st.origin)){var _t=parseMessageData(st.data);if(!(!_t||_t.event!=="ready"))for(var xt=nt.querySelectorAll("iframe"),Et=0;Et<xt.length;Et++){var kt=xt[Et],Lt=kt.contentWindow===st.source;if(isVimeoEmbed(kt.src)&&Lt){var It=new Player(kt);It.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",rt)}}function checkUrlTimeParam(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var rt=function(_t){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(_t))},it=function(_t){if(!!isVimeoUrl(_t.origin)){var xt=parseMessageData(_t.data);if(!(!xt||xt.event!=="ready"))for(var Et=nt.querySelectorAll("iframe"),kt=function(){var Rt=Et[Lt],Nt=Rt.contentWindow===_t.source;if(isVimeoEmbed(Rt.src)&&Nt){var Bt=new Player(Rt);Bt.getVideoId().then(function(Ft){var Yt=new RegExp("[?&]vimeo_t_".concat(Ft,"=([^&#]*)")).exec(window.location.href);if(Yt&&Yt[1]){var Zt=decodeURI(Yt[1]);Bt.setCurrentTime(Zt)}}).catch(rt)}},Lt=0;Lt<Et.length;Lt++)kt()}};window.addEventListener("message",it)}}function initializeScreenfull(){var nt=function(){for(var st,_t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],xt=0,Et=_t.length,kt={};xt<Et;xt++)if(st=_t[xt],st&&st[1]in document){for(xt=0;xt<st.length;xt++)kt[_t[0][xt]]=st[xt];return kt}return!1}(),rt={fullscreenchange:nt.fullscreenchange,fullscreenerror:nt.fullscreenerror},it={request:function(_t){return new Promise(function(xt,Et){var kt=function It(){it.off("fullscreenchange",It),xt()};it.on("fullscreenchange",kt),_t=_t||document.documentElement;var Lt=_t[nt.requestFullscreen]();Lt instanceof Promise&&Lt.then(kt).catch(Et)})},exit:function(){return new Promise(function(_t,xt){if(!it.isFullscreen){_t();return}var Et=function Lt(){it.off("fullscreenchange",Lt),_t()};it.on("fullscreenchange",Et);var kt=document[nt.exitFullscreen]();kt instanceof Promise&&kt.then(Et).catch(xt)})},on:function(_t,xt){var Et=rt[_t];Et&&document.addEventListener(Et,xt)},off:function(_t,xt){var Et=rt[_t];Et&&document.removeEventListener(Et,xt)}};return Object.defineProperties(it,{isFullscreen:{get:function(){return Boolean(document[nt.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[nt.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[nt.fullscreenEnabled])}}}),it}var defaultOptions={role:"viewer",autoPlayMuted:!0,allowedDrift:.3,maxAllowedDrift:1,minCheckInterval:.1,maxRateAdjustment:.2,maxTimeToCatchUp:1},TimingSrcConnector=function(nt){_inherits(it,nt);var rt=_createSuper(it);function it(st,_t){var xt,Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},kt=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,it),xt=rt.call(this),_defineProperty(_assertThisInitialized(xt),"logger",void 0),_defineProperty(_assertThisInitialized(xt),"speedAdjustment",0),_defineProperty(_assertThisInitialized(xt),"adjustSpeed",function(){var Lt=_asyncToGenerator(_regeneratorRuntime().mark(function It(Rt,Nt){var Bt;return _regeneratorRuntime().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:if(xt.speedAdjustment!==Nt){Yt.next=2;break}return Yt.abrupt("return");case 2:return Yt.next=4,Rt.getPlaybackRate();case 4:return Yt.t0=Yt.sent,Yt.t1=xt.speedAdjustment,Yt.t2=Yt.t0-Yt.t1,Yt.t3=Nt,Bt=Yt.t2+Yt.t3,xt.log("New playbackRate:  ".concat(Bt)),Yt.next=12,Rt.setPlaybackRate(Bt);case 12:xt.speedAdjustment=Nt;case 13:case"end":return Yt.stop()}},It)}));return function(It,Rt){return Lt.apply(this,arguments)}}()),xt.logger=kt,xt.init(_t,st,_objectSpread2(_objectSpread2({},defaultOptions),Et)),xt}return _createClass(it,[{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnect"))}},{key:"init",value:function(){var st=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Et,kt,Lt){var It=this,Rt,Nt,Bt;return _regeneratorRuntime().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Yt.next=2,this.waitForTOReadyState(Et,"open");case 2:if(Lt.role!=="viewer"){Yt.next=10;break}return Yt.next=5,this.updatePlayer(Et,kt,Lt);case 5:Rt=subscribe(Et,"change",function(){return It.updatePlayer(Et,kt,Lt)}),Nt=this.maintainPlaybackPosition(Et,kt,Lt),this.addEventListener("disconnect",function(){Nt.cancel(),Rt.cancel()}),Yt.next=14;break;case 10:return Yt.next=12,this.updateTimingObject(Et,kt);case 12:Bt=subscribe(kt,["seeked","play","pause","ratechange"],function(){return It.updateTimingObject(Et,kt)},"on","off"),this.addEventListener("disconnect",function(){return Bt.cancel()});case 14:case"end":return Yt.stop()}},xt,this)}));function _t(xt,Et,kt){return st.apply(this,arguments)}return _t}()},{key:"updateTimingObject",value:function(){var st=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Et,kt){return _regeneratorRuntime().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return It.t0=Et,It.next=3,kt.getCurrentTime();case 3:return It.t1=It.sent,It.next=6,kt.getPaused();case 6:if(!It.sent){It.next=10;break}It.t2=0,It.next=13;break;case 10:return It.next=12,kt.getPlaybackRate();case 12:It.t2=It.sent;case 13:It.t3=It.t2,It.t4={position:It.t1,velocity:It.t3},It.t0.update.call(It.t0,It.t4);case 16:case"end":return It.stop()}},xt)}));function _t(xt,Et){return st.apply(this,arguments)}return _t}()},{key:"updatePlayer",value:function(){var st=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Et,kt,Lt){var It,Rt,Nt;return _regeneratorRuntime().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:if(It=Et.query(),Rt=It.position,Nt=It.velocity,typeof Rt=="number"&&kt.setCurrentTime(Rt),typeof Nt!="number"){Ft.next=25;break}if(Nt!==0){Ft.next=11;break}return Ft.next=6,kt.getPaused();case 6:if(Ft.t0=Ft.sent,Ft.t0!==!1){Ft.next=9;break}kt.pause();case 9:Ft.next=25;break;case 11:if(!(Nt>0)){Ft.next=25;break}return Ft.next=14,kt.getPaused();case 14:if(Ft.t1=Ft.sent,Ft.t1!==!0){Ft.next=19;break}return Ft.next=18,kt.play().catch(function(){var Yt=_asyncToGenerator(_regeneratorRuntime().mark(function Zt(Wt){return _regeneratorRuntime().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(!(Wt.name==="NotAllowedError"&&Lt.autoPlayMuted)){Jt.next=5;break}return Jt.next=3,kt.setMuted(!0);case 3:return Jt.next=5,kt.play().catch(function(on){return console.error("Couldn't play the video from TimingSrcConnector. Error:",on)});case 5:case"end":return Jt.stop()}},Zt)}));return function(Zt){return Yt.apply(this,arguments)}}());case 18:this.updatePlayer(Et,kt,Lt);case 19:return Ft.next=21,kt.getPlaybackRate();case 21:if(Ft.t2=Ft.sent,Ft.t3=Nt,Ft.t2===Ft.t3){Ft.next=25;break}kt.setPlaybackRate(Nt);case 25:case"end":return Ft.stop()}},xt,this)}));function _t(xt,Et,kt){return st.apply(this,arguments)}return _t}()},{key:"maintainPlaybackPosition",value:function(_t,xt,Et){var kt=this,Lt=Et.allowedDrift,It=Et.maxAllowedDrift,Rt=Et.minCheckInterval,Nt=Et.maxRateAdjustment,Bt=Et.maxTimeToCatchUp,Ft=Math.min(Bt,Math.max(Rt,It))*1e3,Yt=function(){var Wt=_asyncToGenerator(_regeneratorRuntime().mark(function Kt(){var Jt,on,rn,ln,gn;return _regeneratorRuntime().wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:if(kn.t0=_t.query().velocity===0,kn.t0){kn.next=6;break}return kn.next=4,xt.getPaused();case 4:kn.t1=kn.sent,kn.t0=kn.t1===!0;case 6:if(!kn.t0){kn.next=8;break}return kn.abrupt("return");case 8:return kn.t2=_t.query().position,kn.next=11,xt.getCurrentTime();case 11:if(kn.t3=kn.sent,Jt=kn.t2-kn.t3,on=Math.abs(Jt),kt.log("Drift: ".concat(Jt)),!(on>It)){kn.next=22;break}return kn.next=18,kt.adjustSpeed(xt,0);case 18:xt.setCurrentTime(_t.query().position),kt.log("Resync by currentTime"),kn.next=29;break;case 22:if(!(on>Lt)){kn.next=29;break}return rn=on/Bt,ln=Nt,gn=rn<ln?(ln-rn)/2:ln,kn.next=28,kt.adjustSpeed(xt,gn*Math.sign(Jt));case 28:kt.log("Resync by playbackRate");case 29:case"end":return kn.stop()}},Kt)}));return function(){return Wt.apply(this,arguments)}}(),Zt=setInterval(function(){return Yt()},Ft);return{cancel:function(){return clearInterval(Zt)}}}},{key:"log",value:function(_t){var xt;(xt=this.logger)===null||xt===void 0||xt.call(this,"TimingSrcConnector: ".concat(_t))}},{key:"waitForTOReadyState",value:function(_t,xt){return new Promise(function(Et){var kt=function Lt(){_t.readyState===xt?Et():_t.addEventListener("readystatechange",Lt,{once:!0})};kt()})}}]),it}(_wrapNativeSuper(EventTarget)),playerMap=new WeakMap,readyMap=new WeakMap,screenfull={},Player=function(){function nt(rt){var it=this,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,nt),window.jQuery&&rt instanceof jQuery&&(rt.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),rt=rt[0]),typeof document<"u"&&typeof rt=="string"&&(rt=document.getElementById(rt)),!isDomElement(rt))throw new TypeError("You must pass either a valid element or a valid id.");if(rt.nodeName!=="IFRAME"){var _t=rt.querySelector("iframe");_t&&(rt=_t)}if(rt.nodeName==="IFRAME"&&!isVimeoUrl(rt.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(playerMap.has(rt))return playerMap.get(rt);this._window=rt.ownerDocument.defaultView,this.element=rt,this.origin="*";var xt=new npo_src(function(kt,Lt){if(it._onMessage=function(Nt){if(!(!isVimeoUrl(Nt.origin)||it.element.contentWindow!==Nt.source)){it.origin==="*"&&(it.origin=Nt.origin);var Bt=parseMessageData(Nt.data),Ft=Bt&&Bt.event==="error",Yt=Ft&&Bt.data&&Bt.data.method==="ready";if(Yt){var Zt=new Error(Bt.data.message);Zt.name=Bt.data.name,Lt(Zt);return}var Wt=Bt&&Bt.event==="ready",Kt=Bt&&Bt.method==="ping";if(Wt||Kt){it.element.setAttribute("data-ready","true"),kt();return}processData(it,Bt)}},it._window.addEventListener("message",it._onMessage),it.element.nodeName!=="IFRAME"){var It=getOEmbedParameters(rt,st),Rt=getVimeoUrl(It);getOEmbedData(Rt,It,rt).then(function(Nt){var Bt=createEmbed(Nt,rt);return it.element=Bt,it._originalElement=rt,swapCallbacks(rt,Bt),playerMap.set(it.element,it),Nt}).catch(Lt)}});if(readyMap.set(this,xt),playerMap.set(this.element,this),this.element.nodeName==="IFRAME"&&postMessage(this,"ping"),screenfull.isEnabled){var Et=function(){return screenfull.exit()};this.fullscreenchangeHandler=function(){screenfull.isFullscreen?storeCallback(it,"event:exitFullscreen",Et):removeCallback(it,"event:exitFullscreen",Et),it.ready().then(function(){postMessage(it,"fullscreenchange",screenfull.isFullscreen)})},screenfull.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return _createClass(nt,[{key:"callMethod",value:function(it){for(var st=this,_t=arguments.length,xt=new Array(_t>1?_t-1:0),Et=1;Et<_t;Et++)xt[Et-1]=arguments[Et];if(it==null)throw new TypeError("You must pass a method name.");return new npo_src(function(kt,Lt){return st.ready().then(function(){storeCallback(st,it,{resolve:kt,reject:Lt}),postMessage(st,it,xt)}).catch(Lt)})}},{key:"get",value:function(it){var st=this;return new npo_src(function(_t,xt){return it=getMethodName(it,"get"),st.ready().then(function(){storeCallback(st,it,{resolve:_t,reject:xt}),postMessage(st,it)}).catch(xt)})}},{key:"set",value:function(it,st){var _t=this;return new npo_src(function(xt,Et){if(it=getMethodName(it,"set"),st==null)throw new TypeError("There must be a value to set.");return _t.ready().then(function(){storeCallback(_t,it,{resolve:xt,reject:Et}),postMessage(_t,it,st)}).catch(Et)})}},{key:"on",value:function(it,st){if(!it)throw new TypeError("You must pass an event name.");if(!st)throw new TypeError("You must pass a callback function.");if(typeof st!="function")throw new TypeError("The callback must be a function.");var _t=getCallbacks(this,"event:".concat(it));_t.length===0&&this.callMethod("addEventListener",it).catch(function(){}),storeCallback(this,"event:".concat(it),st)}},{key:"off",value:function(it,st){if(!it)throw new TypeError("You must pass an event name.");if(st&&typeof st!="function")throw new TypeError("The callback must be a function.");var _t=removeCallback(this,"event:".concat(it),st);_t&&this.callMethod("removeEventListener",it).catch(function(xt){})}},{key:"loadVideo",value:function(it){return this.callMethod("loadVideo",it)}},{key:"ready",value:function(){var it=readyMap.get(this)||new npo_src(function(st,_t){_t(new Error("Unknown player. Probably unloaded."))});return npo_src.resolve(it)}},{key:"addCuePoint",value:function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:it,data:st})}},{key:"removeCuePoint",value:function(it){return this.callMethod("removeCuePoint",it)}},{key:"enableTextTrack",value:function(it,st){if(!it)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:it,kind:st})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return screenfull.isEnabled?screenfull.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return screenfull.isEnabled?screenfull.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return screenfull.isEnabled?npo_src.resolve(screenfull.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"remotePlaybackPrompt",value:function(){return this.callMethod("remotePlaybackPrompt")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var it=this;return new npo_src(function(st){if(readyMap.delete(it),playerMap.delete(it.element),it._originalElement&&(playerMap.delete(it._originalElement),it._originalElement.removeAttribute("data-vimeo-initialized")),it.element&&it.element.nodeName==="IFRAME"&&it.element.parentNode&&(it.element.parentNode.parentNode&&it._originalElement&&it._originalElement!==it.element.parentNode?it.element.parentNode.parentNode.removeChild(it.element.parentNode):it.element.parentNode.removeChild(it.element)),it.element&&it.element.nodeName==="DIV"&&it.element.parentNode){it.element.removeAttribute("data-vimeo-initialized");var _t=it.element.querySelector("iframe");_t&&_t.parentNode&&(_t.parentNode.parentNode&&it._originalElement&&it._originalElement!==_t.parentNode?_t.parentNode.parentNode.removeChild(_t.parentNode):_t.parentNode.removeChild(_t))}it._window.removeEventListener("message",it._onMessage),screenfull.isEnabled&&screenfull.off("fullscreenchange",it.fullscreenchangeHandler),st()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(it){return this.set("autopause",it)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(it){return this.set("cameraProps",it)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"getColors",value:function(){return npo_src.all([this.get("colorOne"),this.get("colorTwo"),this.get("colorThree"),this.get("colorFour")])}},{key:"setColor",value:function(it){return this.set("color",it)}},{key:"setColors",value:function(it){if(!Array.isArray(it))return new npo_src(function(xt,Et){return Et(new TypeError("Argument must be an array."))});var st=new npo_src(function(xt){return xt(null)}),_t=[it[0]?this.set("colorOne",it[0]):st,it[1]?this.set("colorTwo",it[1]):st,it[2]?this.set("colorThree",it[2]):st,it[3]?this.set("colorFour",it[3]):st];return npo_src.all(_t)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(it){return this.set("currentTime",it)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(it){return this.set("loop",it)}},{key:"setMuted",value:function(it){return this.set("muted",it)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(it){return this.set("playbackRate",it)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(it){return this.set("quality",it)}},{key:"getRemotePlaybackAvailability",value:function(){return this.get("remotePlaybackAvailability")}},{key:"getRemotePlaybackState",value:function(){return this.get("remotePlaybackState")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(it){return this.set("volume",it)}},{key:"setTimingSrc",value:function(){var rt=_asyncToGenerator(_regeneratorRuntime().mark(function st(_t,xt){var Et=this,kt;return _regeneratorRuntime().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(_t){It.next=2;break}throw new TypeError("A Timing Object must be provided.");case 2:return It.next=4,this.ready();case 4:return kt=new TimingSrcConnector(this,_t,xt),postMessage(this,"notifyTimingObjectConnect"),kt.addEventListener("disconnect",function(){return postMessage(Et,"notifyTimingObjectDisconnect")}),It.abrupt("return",kt);case 8:case"end":return It.stop()}},st,this)}));function it(st,_t){return rt.apply(this,arguments)}return it}()}]),nt}();isNode||(screenfull=initializeScreenfull(),initializeEmbeds(),resizeEmbeds(),initAppendVideoMetadata(),checkUrlTimeParam());var openseadragon={exports:{}},hasRequiredOpenseadragon;function requireOpenseadragon(){return hasRequiredOpenseadragon||(hasRequiredOpenseadragon=1,function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(nt){return new OpenSeadragon.Viewer(nt)}(function(nt){nt.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var rt={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},it=Object.prototype.toString,st=Object.prototype.hasOwnProperty;nt.isFunction=function(_t){return nt.type(_t)==="function"},nt.isArray=Array.isArray||function(_t){return nt.type(_t)==="array"},nt.isWindow=function(_t){return _t&&typeof _t=="object"&&"setInterval"in _t},nt.type=function(_t){return _t==null?String(_t):rt[it.call(_t)]||"object"},nt.isPlainObject=function(_t){if(!_t||OpenSeadragon.type(_t)!=="object"||_t.nodeType||nt.isWindow(_t)||_t.constructor&&!st.call(_t,"constructor")&&!st.call(_t.constructor.prototype,"isPrototypeOf"))return!1;var xt;for(var Et in _t)xt=Et;return xt===void 0||st.call(_t,xt)},nt.isEmptyObject=function(_t){for(var xt in _t)return!1;return!0},nt.freezeObject=function(_t){return Object.freeze?nt.freezeObject=Object.freeze:nt.freezeObject=function(xt){return xt},nt.freezeObject(_t)},nt.supportsCanvas=function(){var _t=document.createElement("canvas");return!!(nt.isFunction(_t.getContext)&&_t.getContext("2d"))}(),nt.isCanvasTainted=function(_t){var xt=!1;try{_t.getContext("2d").getImageData(0,0,1,1)}catch{xt=!0}return xt},nt.pixelDensityRatio=function(){if(nt.supportsCanvas){var _t=document.createElement("canvas").getContext("2d"),xt=window.devicePixelRatio||1,Et=_t.webkitBackingStorePixelRatio||_t.mozBackingStorePixelRatio||_t.msBackingStorePixelRatio||_t.oBackingStorePixelRatio||_t.backingStorePixelRatio||1;return Math.max(xt,1)/Et}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var nt,rt,it,st,_t,xt,Et=arguments[0]||{},kt=arguments.length,Lt=!1,It=1;for(typeof Et=="boolean"&&(Lt=Et,Et=arguments[1]||{},It=2),typeof Et!="object"&&!OpenSeadragon.isFunction(Et)&&(Et={}),kt===It&&(Et=this,--It);It<kt;It++)if(nt=arguments[It],nt!==null||nt!==void 0)for(rt in nt)it=Et[rt],st=nt[rt],Et!==st&&(Lt&&st&&(OpenSeadragon.isPlainObject(st)||(_t=OpenSeadragon.isArray(st)))?(_t?(_t=!1,xt=it&&OpenSeadragon.isArray(it)?it:[]):xt=it&&OpenSeadragon.isPlainObject(it)?it:{},Et[rt]=OpenSeadragon.extend(Lt,xt,st)):st!==void 0&&(Et[rt]=st));return Et};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var nt=navigator.userAgent;return typeof nt!="string"?!1:nt.indexOf("iPhone")!==-1||nt.indexOf("iPad")!==-1||nt.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(nt,rt){return function(){var it=arguments;return it===void 0&&(it=[]),rt.apply(nt,it)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(nt){return typeof nt=="string"&&(nt=document.getElementById(nt)),nt},getElementPosition:function(nt){var rt=new $.Point,it,st;for(nt=$.getElement(nt),it=$.getElementStyle(nt).position=="fixed",st=getOffsetParent(nt,it);st;)rt.x+=nt.offsetLeft,rt.y+=nt.offsetTop,it&&(rt=rt.plus($.getPageScroll())),nt=st,it=$.getElementStyle(nt).position=="fixed",st=getOffsetParent(nt,it);return rt},getElementOffset:function(nt){nt=$.getElement(nt);var rt=nt&&nt.ownerDocument,it,st,_t={top:0,left:0};return rt?(it=rt.documentElement,typeof nt.getBoundingClientRect<"u"&&(_t=nt.getBoundingClientRect()),st=rt==rt.window?rt:rt.nodeType===9?rt.defaultView||rt.parentWindow:!1,new $.Point(_t.left+(st.pageXOffset||it.scrollLeft)-(it.clientLeft||0),_t.top+(st.pageYOffset||it.scrollTop)-(it.clientTop||0))):new $.Point},getElementSize:function(nt){return nt=$.getElement(nt),new $.Point(nt.clientWidth,nt.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(nt){return nt=$.getElement(nt),nt.currentStyle}:function(nt){return nt=$.getElement(nt),window.getComputedStyle(nt,"")},getCssPropertyWithVendorPrefix:function(nt){var rt={};return $.getCssPropertyWithVendorPrefix=function(it){if(rt[it]!==void 0)return rt[it];var st=document.createElement("div").style,_t=null;if(st[it]!==void 0)_t=it;else for(var xt=["Webkit","Moz","MS","O","webkit","moz","ms","o"],Et=$.capitalizeFirstLetter(it),kt=0;kt<xt.length;kt++){var Lt=xt[kt]+Et;if(st[Lt]!==void 0){_t=Lt;break}}return rt[it]=_t,_t},$.getCssPropertyWithVendorPrefix(nt)},capitalizeFirstLetter:function(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)},positiveModulo:function(nt,rt){var it=nt%rt;return it<0&&(it+=rt),it},pointInElement:function(nt,rt){nt=$.getElement(nt);var it=$.getElementOffset(nt),st=$.getElementSize(nt);return rt.x>=it.x&&rt.x<it.x+st.x&&rt.y<it.y+st.y&&rt.y>=it.y},getEvent:function(nt){return nt?$.getEvent=function(rt){return rt}:$.getEvent=function(){return window.event},$.getEvent(nt)},getMousePosition:function(nt){if(typeof nt.pageX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.pageX,it.y=rt.pageY,it};else if(typeof nt.clientX=="number")$.getMousePosition=function(rt){var it=new $.Point;return rt=$.getEvent(rt),it.x=rt.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,it.y=rt.clientY+document.body.scrollTop+document.documentElement.scrollTop,it};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(nt)},getPageScroll:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(rt.scrollLeft||rt.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(nt.scrollLeft||nt.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(nt){if(typeof window.scrollTo<"u")$.setPageScroll=function(st){window.scrollTo(st.x,st.y)};else{var rt=$.getPageScroll();if(rt.x===nt.x&&rt.y===nt.y)return;document.body.scrollLeft=nt.x,document.body.scrollTop=nt.y;var it=$.getPageScroll();if(it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(st){document.body.scrollLeft=st.x,document.body.scrollTop=st.y};return}if(document.documentElement.scrollLeft=nt.x,document.documentElement.scrollTop=nt.y,it=$.getPageScroll(),it.x!==rt.x&&it.y!==rt.y){$.setPageScroll=function(st){document.documentElement.scrollLeft=st.x,document.documentElement.scrollTop=st.y};return}$.setPageScroll=function(st){}}return $.setPageScroll(nt)},getWindowSize:function(){var nt=document.documentElement||{},rt=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(nt.clientWidth||nt.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(rt.clientWidth||rt.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(nt){nt=$.getElement(nt);var rt=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(rt[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(rt[1].style,{display:"table-row"}),$.extend(rt[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),rt[0].appendChild(rt[1]),rt[1].appendChild(rt[2]),rt[2].appendChild(nt),rt[0]},makeNeutralElement:function(nt){var rt=document.createElement(nt),it=rt.style;return it.background="transparent none",it.border="none",it.margin="0px",it.padding="0px",it.position="static",rt},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(nt){return $.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img");return it.src=rt,it},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(rt){var it=$.makeNeutralElement("img"),st=null;return st=$.makeNeutralElement("span"),st.style.display="inline-block",it.onload=function(){st.style.width=st.style.width||it.width+"px",st.style.height=st.style.height||it.height+"px",it.onload=null,it=null},it.src=rt,st.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+rt+"', sizingMethod='scale')",st}),$.makeTransparentImage(nt)},setElementOpacity:function(nt,rt,it){var st,_t;nt=$.getElement(nt),it&&!$.Browser.alpha&&(rt=Math.round(rt)),$.Browser.opacity?nt.style.opacity=rt<1?rt:"":rt<1?(st=Math.round(100*rt),_t="alpha(opacity="+st+")",nt.style.filter=_t):nt.style.filter=""},setElementTouchActionNone:function(nt){nt=$.getElement(nt),typeof nt.style.touchAction<"u"?nt.style.touchAction="none":typeof nt.style.msTouchAction<"u"&&(nt.style.msTouchAction="none")},addClass:function(nt,rt){nt=$.getElement(nt),nt.className?(" "+nt.className+" ").indexOf(" "+rt+" ")===-1&&(nt.className+=" "+rt):nt.className=rt},indexOf:function(nt,rt,it){return Array.prototype.indexOf?this.indexOf=function(st,_t,xt){return st.indexOf(_t,xt)}:this.indexOf=function(st,_t,xt){var Et,kt=xt||0,Lt;if(!st)throw new TypeError;if(Lt=st.length,Lt===0||kt>=Lt)return-1;for(kt<0&&(kt=Lt-Math.abs(kt)),Et=kt;Et<Lt;Et++)if(st[Et]===_t)return Et;return-1},this.indexOf(nt,rt,it)},removeClass:function(nt,rt){var it,st=[],_t;for(nt=$.getElement(nt),it=nt.className.split(/\s+/),_t=0;_t<it.length;_t++)it[_t]&&it[_t]!==rt&&st.push(it[_t]);nt.className=st.join(" ")},addEvent:function(){if(window.addEventListener)return function(nt,rt,it,st){nt=$.getElement(nt),nt.addEventListener(rt,it,st)};if(window.attachEvent)return function(nt,rt,it,st){nt=$.getElement(nt),nt.attachEvent("on"+rt,it)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(nt,rt,it,st){nt=$.getElement(nt),nt.removeEventListener(rt,it,st)};if(window.detachEvent)return function(nt,rt,it,st){nt=$.getElement(nt),nt.detachEvent("on"+rt,it)};throw new Error("No known event model.")}(),cancelEvent:function(nt){nt=$.getEvent(nt),nt.preventDefault?$.cancelEvent=function(rt){rt.preventDefault()}:$.cancelEvent=function(rt){rt=$.getEvent(rt),rt.cancel=!0,rt.returnValue=!1},$.cancelEvent(nt)},stopEvent:function(nt){nt=$.getEvent(nt),nt.stopPropagation?$.stopEvent=function(rt){rt.stopPropagation()}:$.stopEvent=function(rt){rt=$.getEvent(rt),rt.cancelBubble=!0},$.stopEvent(nt)},createCallback:function(nt,rt){var it=[],st;for(st=2;st<arguments.length;st++)it.push(arguments[st]);return function(){var _t=it.concat([]),xt;for(xt=0;xt<arguments.length;xt++)_t.push(arguments[xt]);return rt.apply(nt,_t)}},getUrlParameter:function(nt){var rt=URLPARAMS[nt];return rt||null},getUrlProtocol:function(nt){var rt=nt.match(/^([a-z]+:)\/\//i);return rt===null?window.location.protocol:rt[1].toLowerCase()},createAjaxRequest:function(nt){var rt;try{rt=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{rt=!1}if(rt)window.XMLHttpRequest?$.createAjaxRequest=function(it){return it?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(nt)},makeAjaxRequest:function(nt,rt,it){var st,_t,xt;$.isPlainObject(nt)&&(rt=nt.success,it=nt.error,st=nt.withCredentials,_t=nt.headers,xt=nt.responseType||null,nt=nt.url);var Et=$.getUrlProtocol(nt),kt=$.createAjaxRequest(Et==="file:");if(!$.isFunction(rt))throw new Error("makeAjaxRequest requires a success callback");kt.onreadystatechange=function(){kt.readyState==4&&(kt.onreadystatechange=function(){},kt.status>=200&&kt.status<300||kt.status===0&&Et!=="http:"&&Et!=="https:"?rt(kt):($.console.log("AJAX request returned %d: %s",kt.status,nt),$.isFunction(it)&&it(kt)))};try{if(kt.open("GET",nt,!0),xt&&(kt.responseType=xt),_t)for(var Lt in _t)Object.prototype.hasOwnProperty.call(_t,Lt)&&_t[Lt]&&kt.setRequestHeader(Lt,_t[Lt]);st&&(kt.withCredentials=!0),kt.send(null)}catch(Bt){var It=Bt.message,Rt=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(Rt&&typeof Bt.number<"u"&&Bt.number==-2147024891&&(It+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",Bt.name,It),kt.onreadystatechange=function(){},window.XDomainRequest){var Nt=new window.XDomainRequest;if(Nt){Nt.onload=function(Ft){$.isFunction(rt)&&rt({responseText:Nt.responseText,status:200,statusText:"OK"})},Nt.onerror=function(Ft){$.isFunction(it)&&it({responseText:Nt.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{Nt.open("GET",nt),Nt.send()}catch{$.isFunction(it)&&it(kt,Bt)}}}else $.isFunction(it)&&it(kt,Bt)}return kt},jsonp:function(nt){var rt,it=nt.url,st=document.head||document.getElementsByTagName("head")[0]||document.documentElement,_t=nt.callbackName||"openseadragon"+$.now(),xt=window[_t],Et="$1"+_t+"$2",kt=nt.param||"callback",Lt=nt.callback;it=it.replace(/(\=)\?(&|$)|\?\?/i,Et),it+=(/\?/.test(it)?"&":"?")+kt+"="+_t,window[_t]=function(It){if(xt)window[_t]=xt;else try{delete window[_t]}catch{}Lt&&$.isFunction(Lt)&&Lt(It)},rt=document.createElement("script"),(nt.async!==void 0||nt.async!==!1)&&(rt.async="async"),nt.scriptCharset&&(rt.charset=nt.scriptCharset),rt.src=it,rt.onload=rt.onreadystatechange=function(It,Rt){(Rt||!rt.readyState||/loaded|complete/.test(rt.readyState))&&(rt.onload=rt.onreadystatechange=null,st&&rt.parentNode&&st.removeChild(rt),rt=void 0)},st.insertBefore(rt,st.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(nt){if(window.DOMParser)$.parseXml=function(rt){var it=null,st;return st=new DOMParser,it=st.parseFromString(rt,"text/xml"),it};else if(window.ActiveXObject)$.parseXml=function(rt){var it=null;return it=new ActiveXObject("Microsoft.XMLDOM"),it.async=!1,it.loadXML(rt),it};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(nt)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(nt){return nt=nt||"",!!FILEFORMATS[nt.toLowerCase()]}});var nullfunction=function(nt){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var nt=navigator.appVersion,rt=navigator.userAgent,it;switch(navigator.appName){case"Microsoft Internet Explorer":!!window.attachEvent&&!!window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(rt.substring(rt.indexOf("MSIE")+5,rt.indexOf(";",rt.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(rt.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(rt.substring(rt.indexOf("Firefox")+8))):rt.indexOf("Safari")>=0?($.Browser.vendor=rt.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(rt.substring(rt.substring(0,rt.indexOf("Safari")).lastIndexOf("/")+1,rt.indexOf("Safari")))):(it=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),it.exec(rt)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(nt);break}var st=window.location.search.substring(1),_t=st.split("&"),xt,Et,kt;for(kt=0;kt<_t.length;kt++)if(xt=_t[kt],Et=xt.indexOf("="),Et>0){var Lt=xt.substring(0,Et),It=xt.substring(Et+1);try{URLPARAMS[Lt]=decodeURIComponent(It)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",Lt,It)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(nt){var rt=nt.requestAnimationFrame||nt.mozRequestAnimationFrame||nt.webkitRequestAnimationFrame||nt.msRequestAnimationFrame,it=nt.cancelAnimationFrame||nt.mozCancelAnimationFrame||nt.webkitCancelAnimationFrame||nt.msCancelAnimationFrame;if(rt&&it)$.requestAnimationFrame=function(){return rt.apply(nt,arguments)},$.cancelAnimationFrame=function(){return it.apply(nt,arguments)};else{var st=[],_t=[],xt=0,Et;$.requestAnimationFrame=function(kt){return st.push([++xt,kt]),Et||(Et=setInterval(function(){if(st.length){var Lt=$.now(),It=_t;for(_t=st,st=It;_t.length;)_t.shift()[1](Lt)}else clearInterval(Et),Et=void 0},1e3/50)),xt},$.cancelAnimationFrame=function(kt){var Lt,It;for(Lt=0,It=st.length;Lt<It;Lt+=1)if(st[Lt][0]===kt){st.splice(Lt,1);return}for(Lt=0,It=_t.length;Lt<It;Lt+=1)if(_t[Lt][0]===kt){_t.splice(Lt,1);return}}}}(window);function getOffsetParent(nt,rt){return rt&&nt!=document.body?document.body:nt.offsetParent}}(OpenSeadragon),function(nt,rt){module.exports?module.exports=rt():nt.OpenSeadragon=rt()}(commonjsGlobal$1,function(){return OpenSeadragon}),function(nt){var rt={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.fullscreenElement},rt.requestFullScreen=function(it){return it.requestFullscreen()},rt.exitFullScreen=function(){document.exitFullscreen()},rt.fullScreenEventName="fullscreenchange",rt.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.msFullscreenElement},rt.requestFullScreen=function(it){return it.msRequestFullscreen()},rt.exitFullScreen=function(){document.msExitFullscreen()},rt.fullScreenEventName="MSFullscreenChange",rt.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitFullscreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullscreen()},rt.exitFullScreen=function(){document.webkitExitFullscreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},rt.requestFullScreen=function(it){return it.webkitRequestFullScreen()},rt.exitFullScreen=function(){document.webkitCancelFullScreen()},rt.fullScreenEventName="webkitfullscreenchange",rt.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(rt.supportsFullScreen=!0,rt.getFullScreenElement=function(){return document.mozFullScreenElement},rt.requestFullScreen=function(it){return it.mozRequestFullScreen()},rt.exitFullScreen=function(){document.mozCancelFullScreen()},rt.fullScreenEventName="mozfullscreenchange",rt.fullScreenErrorEventName="mozfullscreenerror"),rt.isFullScreen=function(){return rt.getFullScreenElement()!==null},rt.cancelFullScreen=function(){nt.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),rt.exitFullScreen()},nt.extend(nt,rt)}(OpenSeadragon),function(nt){nt.EventSource=function(){this.events={}},nt.EventSource.prototype={addOnceHandler:function(rt,it,st,_t){var xt=this;_t=_t||1;var Et=0,kt=function(Lt){Et++,Et===_t&&xt.removeHandler(rt,kt),it(Lt)};this.addHandler(rt,kt,st)},addHandler:function(rt,it,st){var _t=this.events[rt];_t||(this.events[rt]=_t=[]),it&&nt.isFunction(it)&&(_t[_t.length]={handler:it,userData:st||null})},removeHandler:function(rt,it){var st=this.events[rt],_t=[],xt;if(!!st&&nt.isArray(st)){for(xt=0;xt<st.length;xt++)st[xt].handler!==it&&_t.push(st[xt]);this.events[rt]=_t}},removeAllHandlers:function(rt){if(rt)this.events[rt]=[];else for(var it in this.events)this.events[it]=[]},getHandler:function(rt){var it=this.events[rt];return!it||!it.length?null:(it=it.length===1?[it[0]]:Array.apply(null,it),function(st,_t){var xt,Et=it.length;for(xt=0;xt<Et;xt++)it[xt]&&(_t.eventSource=st,_t.userData=it[xt].userData,it[xt].handler(_t))})},raiseEvent:function(rt,it){var st=this.getHandler(rt);st&&(it||(it={}),st(this,it))}}}(OpenSeadragon),function(nt){var rt=[],it={};nt.MouseTracker=function(Tn){rt.push(this);var En=arguments;nt.isPlainObject(Tn)||(Tn={element:En[0],clickTimeThreshold:En[1],clickDistThreshold:En[2]}),this.hash=Math.random(),this.element=nt.getElement(Tn.element),this.clickTimeThreshold=Tn.clickTimeThreshold||nt.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=Tn.clickDistThreshold||nt.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=Tn.dblClickTimeThreshold||nt.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=Tn.dblClickDistThreshold||nt.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=Tn.userData||null,this.stopDelay=Tn.stopDelay||50,this.enterHandler=Tn.enterHandler||null,this.exitHandler=Tn.exitHandler||null,this.pressHandler=Tn.pressHandler||null,this.nonPrimaryPressHandler=Tn.nonPrimaryPressHandler||null,this.releaseHandler=Tn.releaseHandler||null,this.nonPrimaryReleaseHandler=Tn.nonPrimaryReleaseHandler||null,this.moveHandler=Tn.moveHandler||null,this.scrollHandler=Tn.scrollHandler||null,this.clickHandler=Tn.clickHandler||null,this.dblClickHandler=Tn.dblClickHandler||null,this.dragHandler=Tn.dragHandler||null,this.dragEndHandler=Tn.dragEndHandler||null,this.pinchHandler=Tn.pinchHandler||null,this.stopHandler=Tn.stopHandler||null,this.keyDownHandler=Tn.keyDownHandler||null,this.keyUpHandler=Tn.keyUpHandler||null,this.keyHandler=Tn.keyHandler||null,this.focusHandler=Tn.focusHandler||null,this.blurHandler=Tn.blurHandler||null;var Un=this;it[this.hash]={click:function(qn){Yt(Un,qn)},dblclick:function(qn){Zt(Un,qn)},keydown:function(qn){Wt(Un,qn)},keyup:function(qn){Kt(Un,qn)},keypress:function(qn){Jt(Un,qn)},focus:function(qn){on(Un,qn)},blur:function(qn){rn(Un,qn)},wheel:function(qn){ln(Un,qn)},mousewheel:function(qn){gn(Un,qn)},DOMMouseScroll:function(qn){gn(Un,qn)},MozMousePixelScroll:function(qn){gn(Un,qn)},mouseenter:function(qn){Cn(Un,qn)},mouseleave:function(qn){cn(Un,qn)},mouseover:function(qn){Pn(Un,qn)},mouseout:function(qn){Ln(Un,qn)},mousedown:function(qn){dn(Un,qn)},mouseup:function(qn){Fn(Un,qn)},mouseupcaptured:function(qn){ir(Un,qn)},mousemove:function(qn){Jn(Un,qn)},mousemovecaptured:function(qn){hr(Un,qn)},touchstart:function(qn){Cr(Un,qn)},touchend:function(qn){Er(Un,qn)},touchendcaptured:function(qn){ar(Un,qn)},touchmove:function(qn){mr(Un,qn)},touchmovecaptured:function(qn){xr(Un,qn)},touchcancel:function(qn){gr(Un,qn)},gesturestart:function(qn){er(Un,qn)},gesturechange:function(qn){nn(Un,qn)},pointerover:function(qn){un(Un,qn)},MSPointerOver:function(qn){un(Un,qn)},pointerout:function(qn){pn(Un,qn)},MSPointerOut:function(qn){pn(Un,qn)},pointerdown:function(qn){Rn(Un,qn)},MSPointerDown:function(qn){Rn(Un,qn)},pointerup:function(qn){_n(Un,qn)},MSPointerUp:function(qn){_n(Un,qn)},pointermove:function(qn){Wn(Un,qn)},MSPointerMove:function(qn){Wn(Un,qn)},pointercancel:function(qn){sr(Un,qn)},MSPointerCancel:function(qn){sr(Un,qn)},pointerupcaptured:function(qn){or(Un,qn)},pointermovecaptured:function(qn){Hn(Un,qn)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},Tn.startDisabled||this.setTracking(!0)},nt.MouseTracker.prototype={destroy:function(){var Tn;for(xt(this),this.element=null,Tn=0;Tn<rt.length;Tn++)if(rt[Tn]===this){rt.splice(Tn,1);break}it[this.hash]=null,delete it[this.hash]},isTracking:function(){return it[this.hash].tracking},setTracking:function(Tn){return Tn?_t(this):xt(this),this},getActivePointersListsExceptType:function(Tn){for(var En=it[this.hash],Un=[],qn=0;qn<En.activePointersLists.length;++qn)En.activePointersLists[qn].type!==Tn&&Un.push(En.activePointersLists[qn]);return Un},getActivePointersListByType:function(Tn){var En=it[this.hash],Un,qn=En.activePointersLists.length,_r;for(Un=0;Un<qn;Un++)if(En.activePointersLists[Un].type===Tn)return En.activePointersLists[Un];return _r=new nt.MouseTracker.GesturePointList(Tn),En.activePointersLists.push(_r),_r},getActivePointerCount:function(){var Tn=it[this.hash],En,Un=Tn.activePointersLists.length,qn=0;for(En=0;En<Un;En++)qn+=Tn.activePointersLists[En].getLength();return qn},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},nt.MouseTracker.resetAllMouseTrackers=function(){for(var Tn=0;Tn<rt.length;Tn++)rt[Tn].isTracking()&&(rt[Tn].setTracking(!1),rt[Tn].setTracking(!0))},nt.MouseTracker.gesturePointVelocityTracker=function(){var Tn=[],En=0,Un=0,qn=function(ni,Ar){return ni.hash.toString()+Ar.type+Ar.id.toString()},_r=function(){var ni,Ar=Tn.length,gi,hi,Ti=nt.now(),fi,Yi,Si;for(fi=Ti-Un,Un=Ti,ni=0;ni<Ar;ni++)gi=Tn[ni],hi=gi.gPoint,hi.direction=Math.atan2(hi.currentPos.y-gi.lastPos.y,hi.currentPos.x-gi.lastPos.x),Yi=gi.lastPos.distanceTo(hi.currentPos),gi.lastPos=hi.currentPos,Si=1e3*Yi/(fi+1),hi.speed=.75*Si+.25*hi.speed},Zr=function(ni,Ar){var gi=qn(ni,Ar);Tn.push({guid:gi,gPoint:Ar,lastPos:Ar.currentPos}),Tn.length===1&&(Un=nt.now(),En=window.setInterval(_r,50))},yr=function(ni,Ar){var gi=qn(ni,Ar),hi,Ti=Tn.length;for(hi=0;hi<Ti;hi++)if(Tn[hi].guid===gi){Tn.splice(hi,1),Ti--,Ti===0&&window.clearInterval(En);break}};return{addPoint:Zr,removePoint:yr}}(),nt.MouseTracker.captureElement=document,nt.MouseTracker.wheelEventName=nt.Browser.vendor==nt.BROWSERS.IE&&nt.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",nt.MouseTracker.supportsMouseCapture=function(){var Tn=document.createElement("div");return nt.isFunction(Tn.setCapture)&&nt.isFunction(Tn.releaseCapture)}(),nt.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",nt.MouseTracker.wheelEventName],nt.MouseTracker.wheelEventName=="DOMMouseScroll"&&nt.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||nt.Browser.vendor!==nt.BROWSERS.IE)?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),nt.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(nt.MouseTracker.havePointerEvents=!0,nt.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),nt.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?nt.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:nt.MouseTracker.maxTouchPoints=0,nt.MouseTracker.haveMouseEnter=!1):(nt.MouseTracker.havePointerEvents=!1,nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?(nt.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),nt.MouseTracker.haveMouseEnter=!0):(nt.MouseTracker.subscribeEvents.push("mouseover","mouseout"),nt.MouseTracker.haveMouseEnter=!1),nt.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&nt.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&nt.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),nt.MouseTracker.mousePointerId="legacy-mouse",nt.MouseTracker.maxTouchPoints=10),nt.MouseTracker.GesturePointList=function(Tn){this._gPoints=[],this.type=Tn,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},nt.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(Tn){return this._gPoints.push(Tn)},removeById:function(Tn){var En,Un=this._gPoints.length;for(En=0;En<Un;En++)if(this._gPoints[En].id===Tn){this._gPoints.splice(En,1);break}return this._gPoints.length},getByIndex:function(Tn){return Tn<this._gPoints.length?this._gPoints[Tn]:null},getById:function(Tn){var En,Un=this._gPoints.length;for(En=0;En<Un;En++)if(this._gPoints[En].id===Tn)return this._gPoints[En];return null},getPrimary:function(Tn){var En,Un=this._gPoints.length;for(En=0;En<Un;En++)if(this._gPoints[En].isPrimary)return this._gPoints[En];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function st(Tn){var En=it[Tn.hash],Un,qn=En.activePointersLists.length;for(Un=0;Un<qn;Un++)En.activePointersLists[Un].captureCount>0&&(nt.removeEvent(nt.MouseTracker.captureElement,"mousemove",En.mousemovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"mouseup",En.mouseupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",En.pointermovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",En.pointerupcaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchmove",En.touchmovecaptured,!0),nt.removeEvent(nt.MouseTracker.captureElement,"touchend",En.touchendcaptured,!0),En.activePointersLists[Un].captureCount=0);for(Un=0;Un<qn;Un++)En.activePointersLists.pop()}function _t(Tn){var En=it[Tn.hash],Un,qn;if(!En.tracking){for(qn=0;qn<nt.MouseTracker.subscribeEvents.length;qn++)Un=nt.MouseTracker.subscribeEvents[qn],nt.addEvent(Tn.element,Un,En[Un],!1);st(Tn),En.tracking=!0}}function xt(Tn){var En=it[Tn.hash],Un,qn;if(En.tracking){for(qn=0;qn<nt.MouseTracker.subscribeEvents.length;qn++)Un=nt.MouseTracker.subscribeEvents[qn],nt.removeEvent(Tn.element,Un,En[Un],!1);st(Tn),En.tracking=!1}}function Et(Tn,En){var Un=it[Tn.hash];if(En==="pointerevent")return{upName:nt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:Un.pointerupcaptured,moveName:nt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:Un.pointermovecaptured};if(En==="mouse")return{upName:"mouseup",upHandler:Un.mouseupcaptured,moveName:"mousemove",moveHandler:Un.mousemovecaptured};if(En==="touch")return{upName:"touchend",upHandler:Un.touchendcaptured,moveName:"touchmove",moveHandler:Un.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function kt(Tn,En,Un){var qn=Tn.getActivePointersListByType(En),_r;qn.captureCount+=Un||1,qn.captureCount===1&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Tn.element.setCapture(!0):(_r=Et(Tn,nt.MouseTracker.havePointerEvents?"pointerevent":En),Ci&&Lr(window.top)&&nt.addEvent(window.top,_r.upName,_r.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,_r.upName,_r.upHandler,!0),nt.addEvent(nt.MouseTracker.captureElement,_r.moveName,_r.moveHandler,!0)))}function Lt(Tn,En,Un){var qn=Tn.getActivePointersListByType(En),_r;qn.captureCount-=Un||1,qn.captureCount===0&&(nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Tn.element.releaseCapture():(_r=Et(Tn,nt.MouseTracker.havePointerEvents?"pointerevent":En),Ci&&Lr(window.top)&&nt.removeEvent(window.top,_r.upName,_r.upHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,_r.moveName,_r.moveHandler,!0),nt.removeEvent(nt.MouseTracker.captureElement,_r.upName,_r.upHandler,!0)))}function It(Tn){var En;if(nt.MouseTracker.unprefixedPointerEvents)En=Tn.pointerType;else switch(Tn.pointerType){case 2:En="touch";break;case 3:En="pen";break;case 4:En="mouse";break;default:En=""}return En}function Rt(Tn){return nt.getMousePosition(Tn)}function Nt(Tn,En){return Bt(Rt(Tn),En)}function Bt(Tn,En){var Un=nt.getElementOffset(En);return Tn.minus(Un)}function Ft(Tn,En){return new nt.Point((Tn.x+En.x)/2,(Tn.y+En.y)/2)}function Yt(Tn,En){Tn.clickHandler&&nt.cancelEvent(En)}function Zt(Tn,En){Tn.dblClickHandler&&nt.cancelEvent(En)}function Wt(Tn,En){var Un;Tn.keyDownHandler&&(En=nt.getEvent(En),Un=Tn.keyDownHandler({eventSource:Tn,keyCode:En.keyCode?En.keyCode:En.charCode,ctrl:En.ctrlKey,shift:En.shiftKey,alt:En.altKey,meta:En.metaKey,originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Un||nt.cancelEvent(En))}function Kt(Tn,En){var Un;Tn.keyUpHandler&&(En=nt.getEvent(En),Un=Tn.keyUpHandler({eventSource:Tn,keyCode:En.keyCode?En.keyCode:En.charCode,ctrl:En.ctrlKey,shift:En.shiftKey,alt:En.altKey,meta:En.metaKey,originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Un||nt.cancelEvent(En))}function Jt(Tn,En){var Un;Tn.keyHandler&&(En=nt.getEvent(En),Un=Tn.keyHandler({eventSource:Tn,keyCode:En.keyCode?En.keyCode:En.charCode,ctrl:En.ctrlKey,shift:En.shiftKey,alt:En.altKey,meta:En.metaKey,originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Un||nt.cancelEvent(En))}function on(Tn,En){var Un;Tn.focusHandler&&(En=nt.getEvent(En),Un=Tn.focusHandler({eventSource:Tn,originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Un===!1&&nt.cancelEvent(En))}function rn(Tn,En){var Un;Tn.blurHandler&&(En=nt.getEvent(En),Un=Tn.blurHandler({eventSource:Tn,originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Un===!1&&nt.cancelEvent(En))}function ln(Tn,En){wn(Tn,En,En)}function gn(Tn,En){En=nt.getEvent(En);var Un={target:En.target||En.srcElement,type:"wheel",shiftKey:En.shiftKey||!1,clientX:En.clientX,clientY:En.clientY,pageX:En.pageX?En.pageX:En.clientX,pageY:En.pageY?En.pageY:En.clientY,deltaMode:En.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};nt.MouseTracker.wheelEventName=="mousewheel"?Un.deltaY=-En.wheelDelta/nt.DEFAULT_SETTINGS.pixelsPerWheelLine:Un.deltaY=En.detail,wn(Tn,Un,En)}function wn(Tn,En,Un){var qn=0,_r;qn=En.deltaY<0?1:-1,Tn.scrollHandler&&(_r=Tn.scrollHandler({eventSource:Tn,pointerType:"mouse",position:Nt(En,Tn.element),scroll:qn,shift:En.shiftKey,isTouchEvent:!1,originalEvent:Un,preventDefaultAction:!1,userData:Tn.userData}),_r===!1&&nt.cancelEvent(Un))}function kn(Tn,En){if(Tn===En)return!1;for(;En&&En!==Tn;)En=En.parentNode;return En===Tn}function Cn(Tn,En){En=nt.getEvent(En),An(Tn,En)}function Pn(Tn,En){En=nt.getEvent(En),!(En.currentTarget===En.relatedTarget||kn(En.currentTarget,En.relatedTarget))&&An(Tn,En)}function An(Tn,En){var Un={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()};kr(Tn,En,[Un])}function cn(Tn,En){En=nt.getEvent(En),an(Tn,En)}function Ln(Tn,En){En=nt.getEvent(En),!(En.currentTarget===En.relatedTarget||kn(En.currentTarget,En.relatedTarget))&&an(Tn,En)}function an(Tn,En){var Un={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()};si(Tn,En,[Un])}function zn(Tn){return nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?Tn===1?0:Tn===2?2:Tn===4?1:-1:Tn}function dn(Tn,En){var Un;En=nt.getEvent(En),Un={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()},ui(Tn,En,[Un],zn(En.button))&&(nt.stopEvent(En),kt(Tn,"mouse")),(Tn.clickHandler||Tn.dblClickHandler||Tn.pressHandler||Tn.dragHandler||Tn.dragEndHandler)&&nt.cancelEvent(En)}function Fn(Tn,En){tr(Tn,En)}function ir(Tn,En){tr(Tn,En),nt.stopEvent(En)}function tr(Tn,En){var Un;En=nt.getEvent(En),Un={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()},ii(Tn,En,[Un],zn(En.button))&&Lt(Tn,"mouse")}function Jn(Tn,En){lr(Tn,En)}function hr(Tn,En){lr(Tn,En),nt.stopEvent(En)}function lr(Tn,En){var Un;En=nt.getEvent(En),Un={id:nt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:Rt(En),currentTime:nt.now()},li(Tn,En,[Un])}function cr(Tn,En,Un){var qn,_r=Un.getLength(),Zr=[];if(Un.type==="touch"||Un.contacts>0){for(qn=0;qn<_r;qn++)Zr.push(Un.getByIndex(qn));Zr.length>0&&(ii(Tn,En,Zr,0),Un.captureCount=1,Lt(Tn,Un.type),si(Tn,En,Zr))}}function Cr(Tn,En){var Un,qn,_r,Zr=En.changedTouches.length,yr=[],ni,Ar=Tn.getActivePointersListByType("touch");for(Un=nt.now(),Ar.getLength()>En.touches.length-Zr&&(nt.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),cr(Tn,En,Ar)),qn=0;qn<Zr;qn++)yr.push({id:En.changedTouches[qn].identifier,type:"touch",currentPos:Rt(En.changedTouches[qn]),currentTime:Un});for(kr(Tn,En,yr),qn=0;qn<rt.length;qn++)if(rt[qn]!==Tn&&rt[qn].isTracking()&&kn(rt[qn].element,Tn.element)){for(ni=[],_r=0;_r<Zr;_r++)ni.push({id:En.changedTouches[_r].identifier,type:"touch",currentPos:Rt(En.changedTouches[_r]),currentTime:Un});kr(rt[qn],En,ni)}ui(Tn,En,yr,0)&&(nt.stopEvent(En),kt(Tn,"touch",Zr)),nt.cancelEvent(En)}function Er(Tn,En){Fr(Tn,En)}function ar(Tn,En){Fr(Tn,En),nt.stopEvent(En)}function Fr(Tn,En){var Un,qn,_r,Zr=En.changedTouches.length,yr=[],ni;for(Un=nt.now(),qn=0;qn<Zr;qn++)yr.push({id:En.changedTouches[qn].identifier,type:"touch",currentPos:Rt(En.changedTouches[qn]),currentTime:Un});for(ii(Tn,En,yr,0)&&Lt(Tn,"touch",Zr),si(Tn,En,yr),qn=0;qn<rt.length;qn++)if(rt[qn]!==Tn&&rt[qn].isTracking()&&kn(rt[qn].element,Tn.element)){for(ni=[],_r=0;_r<Zr;_r++)ni.push({id:En.changedTouches[_r].identifier,type:"touch",currentPos:Rt(En.changedTouches[_r]),currentTime:Un});si(rt[qn],En,ni)}nt.cancelEvent(En)}function mr(Tn,En){fr(Tn,En)}function xr(Tn,En){fr(Tn,En),nt.stopEvent(En)}function fr(Tn,En){var Un,qn=En.changedTouches.length,_r=[];for(Un=0;Un<qn;Un++)_r.push({id:En.changedTouches[Un].identifier,type:"touch",currentPos:Rt(En.changedTouches[Un]),currentTime:nt.now()});li(Tn,En,_r),nt.cancelEvent(En)}function gr(Tn,En){var Un=Tn.getActivePointersListByType("touch");cr(Tn,En,Un)}function er(Tn,En){return En.stopPropagation(),En.preventDefault(),!1}function nn(Tn,En){return En.stopPropagation(),En.preventDefault(),!1}function un(Tn,En){var Un;En.currentTarget===En.relatedTarget||kn(En.currentTarget,En.relatedTarget)||(Un={id:En.pointerId,type:It(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},kr(Tn,En,[Un]))}function pn(Tn,En){var Un;En.currentTarget===En.relatedTarget||kn(En.currentTarget,En.relatedTarget)||(Un={id:En.pointerId,type:It(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},si(Tn,En,[Un]))}function Rn(Tn,En){var Un;Un={id:En.pointerId,type:It(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},ui(Tn,En,[Un],En.button)&&(nt.stopEvent(En),kt(Tn,Un.type)),(Tn.clickHandler||Tn.dblClickHandler||Tn.pressHandler||Tn.dragHandler||Tn.dragEndHandler||Tn.pinchHandler)&&nt.cancelEvent(En)}function _n(Tn,En){Vn(Tn,En)}function or(Tn,En){var Un=Tn.getActivePointersListByType(It(En));Un.getById(En.pointerId)&&Vn(Tn,En),nt.stopEvent(En)}function Vn(Tn,En){var Un;Un={id:En.pointerId,type:It(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},ii(Tn,En,[Un],En.button)&&Lt(Tn,Un.type)}function Wn(Tn,En){nr(Tn,En)}function Hn(Tn,En){var Un=Tn.getActivePointersListByType(It(En));Un.getById(En.pointerId)&&nr(Tn,En),nt.stopEvent(En)}function nr(Tn,En){var Un;Un={id:En.pointerId,type:It(En),isPrimary:En.isPrimary,currentPos:Rt(En),currentTime:nt.now()},li(Tn,En,[Un])}function sr(Tn,En){var Un;Un={id:En.pointerId,type:It(En)},Ei(Tn,En,[Un])}function pr(Tn,En){return Object.prototype.hasOwnProperty.call(En,"isPrimary")||(Tn.getLength()===0?En.isPrimary=!0:En.isPrimary=!1),En.speed=0,En.direction=0,En.contactPos=En.currentPos,En.contactTime=En.currentTime,En.lastPos=En.currentPos,En.lastTime=En.currentTime,Tn.add(En)}function vr(Tn,En){var Un,qn;return Tn.getById(En.id)?(Un=Tn.removeById(En.id),Object.prototype.hasOwnProperty.call(En,"isPrimary")||(qn=Tn.getPrimary(),qn||(qn=Tn.getByIndex(0),qn&&(qn.isPrimary=!0)))):Un=Tn.getLength(),Un}function kr(Tn,En,Un){var qn=Tn.getActivePointersListByType(Un[0].type),_r,Zr=Un.length,yr,ni,Ar;for(_r=0;_r<Zr;_r++)yr=Un[_r],ni=qn.getById(yr.id),ni?(ni.insideElement=!0,ni.lastPos=ni.currentPos,ni.lastTime=ni.currentTime,ni.currentPos=yr.currentPos,ni.currentTime=yr.currentTime,yr=ni):(yr.captured=!1,yr.insideElementPressed=!1,yr.insideElement=!0,pr(qn,yr)),Tn.enterHandler&&(Ar=Tn.enterHandler({eventSource:Tn,pointerType:yr.type,position:Bt(yr.currentPos,Tn.element),buttons:qn.buttons,pointers:Tn.getActivePointerCount(),insideElementPressed:yr.insideElementPressed,buttonDownAny:qn.buttons!==0,isTouchEvent:yr.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Ar===!1&&nt.cancelEvent(En))}function si(Tn,En,Un){var qn=Tn.getActivePointersListByType(Un[0].type),_r,Zr=Un.length,yr,ni,Ar;for(_r=0;_r<Zr;_r++)yr=Un[_r],ni=qn.getById(yr.id),ni&&(ni.captured?(ni.insideElement=!1,ni.lastPos=ni.currentPos,ni.lastTime=ni.currentTime,ni.currentPos=yr.currentPos,ni.currentTime=yr.currentTime):vr(qn,ni),yr=ni),Tn.exitHandler&&(Ar=Tn.exitHandler({eventSource:Tn,pointerType:yr.type,position:yr.currentPos&&Bt(yr.currentPos,Tn.element),buttons:qn.buttons,pointers:Tn.getActivePointerCount(),insideElementPressed:ni?ni.insideElementPressed:!1,buttonDownAny:qn.buttons!==0,isTouchEvent:yr.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Ar===!1&&nt.cancelEvent(En))}function ui(Tn,En,Un,qn){var _r=it[Tn.hash],Zr,yr=Tn.getActivePointersListByType(Un[0].type),ni,Ar=Un.length,gi,hi;typeof En.buttons<"u"?yr.buttons=En.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?qn===0?yr.buttons+=1:qn===1?yr.buttons+=4:qn===2?yr.buttons+=2:qn===3?yr.buttons+=8:qn===4?yr.buttons+=16:qn===5&&(yr.buttons+=32):qn===0?yr.buttons|=1:qn===1?yr.buttons|=4:qn===2?yr.buttons|=2:qn===3?yr.buttons|=8:qn===4?yr.buttons|=16:qn===5&&(yr.buttons|=32);var Ti=Tn.getActivePointersListsExceptType(Un[0].type);for(ni=0;ni<Ti.length;ni++)cr(Tn,En,Ti[ni]);if(qn!==0)return Tn.nonPrimaryPressHandler&&(Zr=Tn.nonPrimaryPressHandler({eventSource:Tn,pointerType:Un[0].type,position:Bt(Un[0].currentPos,Tn.element),button:qn,buttons:yr.buttons,isTouchEvent:Un[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Zr===!1&&nt.cancelEvent(En)),!1;for(ni=0;ni<Ar;ni++)gi=Un[ni],hi=yr.getById(gi.id),hi?(hi.captured=!0,hi.insideElementPressed=!0,hi.insideElement=!0,hi.contactPos=gi.currentPos,hi.contactTime=gi.currentTime,hi.lastPos=hi.currentPos,hi.lastTime=hi.currentTime,hi.currentPos=gi.currentPos,hi.currentTime=gi.currentTime,gi=hi):(gi.captured=!0,gi.insideElementPressed=!0,gi.insideElement=!0,pr(yr,gi)),yr.addContact(),(Tn.dragHandler||Tn.dragEndHandler||Tn.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.addPoint(Tn,gi),yr.contacts===1?Tn.pressHandler&&(Zr=Tn.pressHandler({eventSource:Tn,pointerType:gi.type,position:Bt(gi.contactPos,Tn.element),buttons:yr.buttons,isTouchEvent:gi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Zr===!1&&nt.cancelEvent(En)):yr.contacts===2&&Tn.pinchHandler&&gi.type==="touch"&&(_r.pinchGPoints=yr.asArray(),_r.lastPinchDist=_r.currentPinchDist=_r.pinchGPoints[0].currentPos.distanceTo(_r.pinchGPoints[1].currentPos),_r.lastPinchCenter=_r.currentPinchCenter=Ft(_r.pinchGPoints[0].currentPos,_r.pinchGPoints[1].currentPos));return!0}function ii(Tn,En,Un,qn){var _r=it[Tn.hash],Zr=Tn.getActivePointersListByType(Un[0].type),yr,ni,Ar,gi,hi=Un.length,Ti,fi,Yi=!1,Si=!1,qi;if(typeof En.buttons<"u"?Zr.buttons=En.buttons:nt.Browser.vendor===nt.BROWSERS.IE&&nt.Browser.version<9?qn===0?Zr.buttons-=1:qn===1?Zr.buttons-=4:qn===2?Zr.buttons-=2:qn===3?Zr.buttons-=8:qn===4?Zr.buttons-=16:qn===5&&(Zr.buttons-=32):qn===0?Zr.buttons^=-2:qn===1?Zr.buttons^=-5:qn===2?Zr.buttons^=-3:qn===3?Zr.buttons^=-9:qn===4?Zr.buttons^=-17:qn===5&&(Zr.buttons^=-33),qn!==0){Tn.nonPrimaryReleaseHandler&&(yr=Tn.nonPrimaryReleaseHandler({eventSource:Tn,pointerType:Un[0].type,position:Bt(Un[0].currentPos,Tn.element),button:qn,buttons:Zr.buttons,isTouchEvent:Un[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(En));var uo=Tn.getActivePointersListByType("mouse");return cr(Tn,En,uo),!1}if(typeof Un[0].currentPos>"u")return cr(Tn,En,Zr),!1;for(gi=0;gi<hi;gi++)Ti=Un[gi],fi=Zr.getById(Ti.id),fi&&(fi.captured&&(fi.captured=!1,Yi=!0,Si=!0),fi.lastPos=fi.currentPos,fi.lastTime=fi.currentTime,fi.currentPos=Ti.currentPos,fi.currentTime=Ti.currentTime,fi.insideElement||vr(Zr,fi),ni=fi.currentPos,Ar=fi.currentTime,Si?(Zr.removeContact(),(Tn.dragHandler||Tn.dragEndHandler||Tn.pinchHandler)&&nt.MouseTracker.gesturePointVelocityTracker.removePoint(Tn,fi),Zr.contacts===0?(Tn.releaseHandler&&(yr=Tn.releaseHandler({eventSource:Tn,pointerType:fi.type,position:Bt(ni,Tn.element),buttons:Zr.buttons,insideElementPressed:fi.insideElementPressed,insideElementReleased:fi.insideElement,isTouchEvent:fi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(En)),Tn.dragEndHandler&&!fi.currentPos.equals(fi.contactPos)&&(yr=Tn.dragEndHandler({eventSource:Tn,pointerType:fi.type,position:Bt(fi.currentPos,Tn.element),speed:fi.speed,direction:fi.direction,shift:En.shiftKey,isTouchEvent:fi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(En)),(Tn.clickHandler||Tn.dblClickHandler)&&fi.insideElement&&(qi=Ar-fi.contactTime<=Tn.clickTimeThreshold&&fi.contactPos.distanceTo(ni)<=Tn.clickDistThreshold,Tn.clickHandler&&(yr=Tn.clickHandler({eventSource:Tn,pointerType:fi.type,position:Bt(fi.currentPos,Tn.element),quick:qi,shift:En.shiftKey,isTouchEvent:fi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(En)),Tn.dblClickHandler&&qi&&(Zr.clicks++,Zr.clicks===1?(_r.lastClickPos=ni,_r.dblClickTimeOut=setTimeout(function(){Zr.clicks=0},Tn.dblClickTimeThreshold)):Zr.clicks===2&&(clearTimeout(_r.dblClickTimeOut),Zr.clicks=0,_r.lastClickPos.distanceTo(ni)<=Tn.dblClickDistThreshold&&(yr=Tn.dblClickHandler({eventSource:Tn,pointerType:fi.type,position:Bt(fi.currentPos,Tn.element),shift:En.shiftKey,isTouchEvent:fi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(En)),_r.lastClickPos=null)))):Zr.contacts===2&&Tn.pinchHandler&&fi.type==="touch"&&(_r.pinchGPoints=Zr.asArray(),_r.lastPinchDist=_r.currentPinchDist=_r.pinchGPoints[0].currentPos.distanceTo(_r.pinchGPoints[1].currentPos),_r.lastPinchCenter=_r.currentPinchCenter=Ft(_r.pinchGPoints[0].currentPos,_r.pinchGPoints[1].currentPos))):Tn.releaseHandler&&(yr=Tn.releaseHandler({eventSource:Tn,pointerType:fi.type,position:Bt(ni,Tn.element),buttons:Zr.buttons,insideElementPressed:fi.insideElementPressed,insideElementReleased:fi.insideElement,isTouchEvent:fi.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),yr===!1&&nt.cancelEvent(En)));return Yi}function li(Tn,En,Un){var qn=it[Tn.hash],_r=Tn.getActivePointersListByType(Un[0].type),Zr,yr=Un.length,ni,Ar,gi,hi,Ti;for(typeof En.buttons<"u"&&(_r.buttons=En.buttons),Zr=0;Zr<yr;Zr++)ni=Un[Zr],Ar=_r.getById(ni.id),Ar?(Object.prototype.hasOwnProperty.call(ni,"isPrimary")&&(Ar.isPrimary=ni.isPrimary),Ar.lastPos=Ar.currentPos,Ar.lastTime=Ar.currentTime,Ar.currentPos=ni.currentPos,Ar.currentTime=ni.currentTime):(ni.captured=!1,ni.insideElementPressed=!1,ni.insideElement=!0,pr(_r,ni));Tn.stopHandler&&Un[0].type==="mouse"&&(clearTimeout(Tn.stopTimeOut),Tn.stopTimeOut=setTimeout(function(){wi(Tn,En,Un[0].type)},Tn.stopDelay)),_r.contacts===0?Tn.moveHandler&&(Ti=Tn.moveHandler({eventSource:Tn,pointerType:Un[0].type,position:Bt(Un[0].currentPos,Tn.element),buttons:_r.buttons,isTouchEvent:Un[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Ti===!1&&nt.cancelEvent(En)):_r.contacts===1?(Tn.moveHandler&&(Ar=_r.asArray()[0],Ti=Tn.moveHandler({eventSource:Tn,pointerType:Ar.type,position:Bt(Ar.currentPos,Tn.element),buttons:_r.buttons,isTouchEvent:Ar.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Ti===!1&&nt.cancelEvent(En)),Tn.dragHandler&&(Ar=_r.asArray()[0],hi=Ar.currentPos.minus(Ar.lastPos),Ti=Tn.dragHandler({eventSource:Tn,pointerType:Ar.type,position:Bt(Ar.currentPos,Tn.element),buttons:_r.buttons,delta:hi,speed:Ar.speed,direction:Ar.direction,shift:En.shiftKey,isTouchEvent:Ar.type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Ti===!1&&nt.cancelEvent(En))):_r.contacts===2&&(Tn.moveHandler&&(gi=_r.asArray(),Ti=Tn.moveHandler({eventSource:Tn,pointerType:gi[0].type,position:Bt(Ft(gi[0].currentPos,gi[1].currentPos),Tn.element),buttons:_r.buttons,isTouchEvent:gi[0].type==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Ti===!1&&nt.cancelEvent(En)),Tn.pinchHandler&&Un[0].type==="touch"&&(hi=qn.pinchGPoints[0].currentPos.distanceTo(qn.pinchGPoints[1].currentPos),hi!=qn.currentPinchDist&&(qn.lastPinchDist=qn.currentPinchDist,qn.currentPinchDist=hi,qn.lastPinchCenter=qn.currentPinchCenter,qn.currentPinchCenter=Ft(qn.pinchGPoints[0].currentPos,qn.pinchGPoints[1].currentPos),Ti=Tn.pinchHandler({eventSource:Tn,pointerType:"touch",gesturePoints:qn.pinchGPoints,lastCenter:Bt(qn.lastPinchCenter,Tn.element),center:Bt(qn.currentPinchCenter,Tn.element),lastDistance:qn.lastPinchDist,distance:qn.currentPinchDist,shift:En.shiftKey,originalEvent:En,preventDefaultAction:!1,userData:Tn.userData}),Ti===!1&&nt.cancelEvent(En))))}function Ei(Tn,En,Un){ii(Tn,En,Un,0),si(Tn,En,Un)}function wi(Tn,En,Un){Tn.stopHandler&&Tn.stopHandler({eventSource:Tn,pointerType:Un,position:Nt(En,Tn.element),buttons:Tn.getActivePointersListByType(Un).buttons,isTouchEvent:Un==="touch",originalEvent:En,preventDefaultAction:!1,userData:Tn.userData})}var Ci=function(){try{return window.self!==window.top}catch{return!0}}();function Lr(Tn){try{return Tn.addEventListener&&Tn.removeEventListener}catch{return!1}}}(OpenSeadragon),function(nt){nt.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},nt.Control=function(rt,it,st){var _t=rt.parentNode;typeof it=="number"&&(nt.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),it={anchor:it}),it.attachToViewer=typeof it.attachToViewer>"u"?!0:it.attachToViewer,this.autoFade=typeof it.autoFade>"u"?!0:it.autoFade,this.element=rt,this.anchor=it.anchor,this.container=st,this.anchor==nt.ControlAnchor.ABSOLUTE?(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof it.top=="number"?it.top+"px":it.top,this.wrapper.style.left=typeof it.left=="number"?it.left+"px":it.left,this.wrapper.style.height=typeof it.height=="number"?it.height+"px":it.height,this.wrapper.style.width=typeof it.width=="number"?it.width+"px":it.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=nt.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==nt.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),it.attachToViewer?this.anchor==nt.ControlAnchor.TOP_RIGHT||this.anchor==nt.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):_t.appendChild(this.wrapper)},nt.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(rt){this.wrapper.style.display=rt?this.anchor==nt.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(rt){this.element[nt.SIGNAL]&&nt.Browser.vendor==nt.BROWSERS.IE?nt.setElementOpacity(this.element,rt,!0):nt.setElementOpacity(this.wrapper,rt,!0)}}}(OpenSeadragon),function(nt){nt.ControlDock=function(it){var st=["topleft","topright","bottomright","bottomleft"],_t,xt;for(nt.extend(!0,this,{id:"controldock-"+nt.now()+"-"+Math.floor(Math.random()*1e6),container:nt.makeNeutralElement("div"),controls:[]},it),this.container.onsubmit=function(){return!1},this.element&&(this.element=nt.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),xt=0;xt<st.length;xt++)_t=st[xt],this.controls[_t]=nt.makeNeutralElement("div"),this.controls[_t].style.position="absolute",_t.match("left")&&(this.controls[_t].style.left="0px"),_t.match("right")&&(this.controls[_t].style.right="0px"),_t.match("top")&&(this.controls[_t].style.top="0px"),_t.match("bottom")&&(this.controls[_t].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},nt.ControlDock.prototype={addControl:function(it,st){it=nt.getElement(it);var _t=null;if(!(rt(this,it)>=0)){switch(st.anchor){case nt.ControlAnchor.TOP_RIGHT:_t=this.controls.topright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.BOTTOM_RIGHT:_t=this.controls.bottomright,it.style.position="relative",it.style.paddingRight="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.BOTTOM_LEFT:_t=this.controls.bottomleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingBottom="0px";break;case nt.ControlAnchor.TOP_LEFT:_t=this.controls.topleft,it.style.position="relative",it.style.paddingLeft="0px",it.style.paddingTop="0px";break;case nt.ControlAnchor.ABSOLUTE:_t=this.container,it.style.margin="0px",it.style.padding="0px";break;default:case nt.ControlAnchor.NONE:_t=this.container,it.style.margin="0px",it.style.padding="0px";break}this.controls.push(new nt.Control(it,st,_t)),it.style.display="inline-block"}},removeControl:function(it){it=nt.getElement(it);var st=rt(this,it);return st>=0&&(this.controls[st].destroy(),this.controls.splice(st,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var it;for(it=this.controls.length-1;it>=0;it--)if(this.controls[it].isVisible())return!0;return!1},setControlsEnabled:function(it){var st;for(st=this.controls.length-1;st>=0;st--)this.controls[st].setVisible(it);return this}};function rt(it,st){var _t=it.controls,xt;for(xt=_t.length-1;xt>=0;xt--)if(_t[xt].element==st)return xt;return-1}}(OpenSeadragon),function(nt){nt.Placement=nt.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(nt){var rt={},it=1;nt.Viewer=function(nn){var un=arguments,pn=this,Rn;if(nt.isPlainObject(nn)||(nn={id:un[0],xmlPath:un.length>1?un[1]:void 0,prefixUrl:un.length>2?un[2]:void 0,controls:un.length>3?un[3]:void 0,overlays:un.length>4?un[4]:void 0}),nn.config&&(nt.extend(!0,nn,nn.config),delete nn.config),nt.extend(!0,this,{id:nn.id,hash:nn.hash||it++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},nt.DEFAULT_SETTINGS,nn),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof rt[this.hash]<"u"&&nt.console.warn("Hash "+this.hash+" has already been used."),rt[this.hash]={fsBoundsDelta:new nt.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=nt.now(),nt.EventSource.call(this),this.addHandler("open-failed",function(_n){var or=nt.getString("Errors.OpenFailed",_n.eventSource,_n.message);pn._showMessage(or)}),nt.ControlDock.call(this,nn),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=nt.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(_n){_n.width="100%",_n.height="100%",_n.overflow="hidden",_n.position="absolute",_n.top="0px",_n.left="0px"}(this.canvas.style),nt.setElementTouchActionNone(this.canvas),nn.tabIndex!==""&&(this.canvas.tabIndex=nn.tabIndex===void 0?0:nn.tabIndex),this.container.className="openseadragon-container",function(_n){_n.width="100%",_n.height="100%",_n.position="relative",_n.overflow="hidden",_n.left="0px",_n.top="0px",_n.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new nt.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:nt.delegate(this,Yt),keyHandler:nt.delegate(this,Zt),clickHandler:nt.delegate(this,Wt),dblClickHandler:nt.delegate(this,Kt),dragHandler:nt.delegate(this,Jt),dragEndHandler:nt.delegate(this,on),enterHandler:nt.delegate(this,rn),exitHandler:nt.delegate(this,ln),pressHandler:nt.delegate(this,gn),releaseHandler:nt.delegate(this,wn),nonPrimaryPressHandler:nt.delegate(this,kn),nonPrimaryReleaseHandler:nt.delegate(this,Cn),scrollHandler:nt.delegate(this,An),pinchHandler:nt.delegate(this,Pn)}),this.outerTracker=new nt.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:nt.delegate(this,cn),exitHandler:nt.delegate(this,Ln)}),this.toolbar&&(this.toolbar=new nt.ControlDock({element:this.toolbar})),this.bindStandardControls(),rt[this.hash].prevContainerSize=st(this.container),this.world=new nt.World({viewer:this}),this.world.addHandler("add-item",function(_n){pn.source=pn.world.getItemAt(0).source,rt[pn.hash].forceRedraw=!0,pn._updateRequestId||(pn._updateRequestId=kt(pn,an))}),this.world.addHandler("remove-item",function(_n){pn.world.getItemCount()?pn.source=pn.world.getItemAt(0).source:pn.source=null,rt[pn.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(_n){pn.viewport&&pn.viewport._setContentBounds(pn.world.getHomeBounds(),pn.world.getContentFactor())}),this.world.addHandler("item-index-change",function(_n){pn.source=pn.world.getItemAt(0).source}),this.viewport=new nt.Viewport({containerSize:rt[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new nt.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:nn.timeout}),this.tileCache=new nt.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new nt.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=nt.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(Rn=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(Rn,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(Rn=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(Rn,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new nt.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),Rn=0;Rn<this.customControls.length;Rn++)this.addControl(this.customControls[Rn].id,{anchor:this.customControls[Rn].anchor});nt.requestAnimationFrame(function(){It(pn)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},nt.extend(nt.Viewer.prototype,nt.EventSource.prototype,nt.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(nn){return nt.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(nn)},openTileSource:function(nn){return nt.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(nn)},open:function(nn,un){var pn=this;if(this.close(),!!nn){if(this.sequenceMode&&nt.isArray(nn)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof un<"u"&&!isNaN(un)&&(this.initialPage=un),this.tileSources=nn,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(nt.isArray(nn)||(nn=[nn]),!!nn.length){this._opening=!0;for(var Rn=nn.length,_n=0,or=0,Vn,Wn=function(){if(_n+or===Rn)if(_n){(pn._firstOpen||!pn.preserveViewport)&&(pn.viewport.goHome(!0),pn.viewport.update()),pn._firstOpen=!1;var sr=nn[0];if(sr.tileSource&&(sr=sr.tileSource),pn.overlays&&!pn.preserveOverlays)for(var pr=0;pr<pn.overlays.length;pr++)pn.currentOverlays[pr]=xt(pn,pn.overlays[pr]);pn._drawOverlays(),pn._opening=!1,pn.raiseEvent("open",{source:sr})}else pn._opening=!1,pn.raiseEvent("open-failed",Vn)},Hn=function(sr){(!nt.isPlainObject(sr)||!sr.tileSource)&&(sr={tileSource:sr}),sr.index!==void 0&&(nt.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete sr.index),sr.collectionImmediately===void 0&&(sr.collectionImmediately=!0);var pr=sr.success;sr.success=function(kr){if(_n++,sr.tileSource.overlays)for(var si=0;si<sr.tileSource.overlays.length;si++)pn.addOverlay(sr.tileSource.overlays[si]);pr&&pr(kr),Wn()};var vr=sr.error;sr.error=function(kr){or++,Vn||(Vn=kr),vr&&vr(kr),Wn()},pn.addTiledImage(sr)},nr=0;nr<nn.length;nr++)Hn(nn[nr]);return this}}},close:function(){return rt[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),rt[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(!!rt[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(nt.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),rt[this.hash]=null,delete rt[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(nn){return this.innerTracker.setTracking(nn),this.outerTracker.setTracking(nn),this.raiseEvent("mouse-enabled",{enabled:nn}),this},areControlsEnabled:function(){var nn=this.controls.length,un;for(un=0;un<this.controls.length;un++)nn=nn&&this.controls[un].isVisible();return nn},setControlsEnabled:function(nn){return nn?Nt(this):It(this),this.raiseEvent("controls-enabled",{enabled:nn}),this},setDebugMode:function(nn){for(var un=0;un<this.world.getItemCount();un++)this.world.getItemAt(un).debugMode=nn;this.debugMode=nn,this.forceRedraw()},isFullPage:function(){return rt[this.hash].fullPage},setFullPage:function(nn){var un=document.body,pn=un.style,Rn=document.documentElement.style,_n=this,or,Vn;if(nn==this.isFullPage())return this;var Wn={fullPage:nn,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Wn),Wn.preventDefaultAction)return this;if(nn){for(this.elementSize=nt.getElementSize(this.element),this.pageScroll=nt.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=pn.margin,this.docMargin=Rn.margin,pn.margin="0",Rn.margin="0",this.bodyPadding=pn.padding,this.docPadding=Rn.padding,pn.padding="0",Rn.padding="0",this.bodyWidth=pn.width,this.docWidth=Rn.width,pn.width="100%",Rn.width="100%",this.bodyHeight=pn.height,this.docHeight=Rn.height,pn.height="100%",Rn.height="100%",this.previousBody=[],rt[this.hash].prevElementParent=this.element.parentNode,rt[this.hash].prevNextSibling=this.element.nextSibling,rt[this.hash].prevElementWidth=this.element.style.width,rt[this.hash].prevElementHeight=this.element.style.height,or=un.childNodes.length,Vn=0;Vn<or;Vn++)this.previousBody.push(un.childNodes[0]),un.removeChild(un.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,un.appendChild(this.toolbar.element),nt.addClass(this.toolbar.element,"fullpage")),nt.addClass(this.element,"fullpage"),un.appendChild(this.element),this.element.style.height=nt.getWindowSize().y+"px",this.element.style.width=nt.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=nt.getElementSize(this.element).y-nt.getElementSize(this.toolbar.element).y+"px"),rt[this.hash].fullPage=!0,nt.delegate(this,cn)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,pn.margin=this.bodyMargin,Rn.margin=this.docMargin,pn.padding=this.bodyPadding,Rn.padding=this.docPadding,pn.width=this.bodyWidth,Rn.width=this.docWidth,pn.height=this.bodyHeight,Rn.height=this.docHeight,un.removeChild(this.element),or=this.previousBody.length,Vn=0;Vn<or;Vn++)un.appendChild(this.previousBody.shift());nt.removeClass(this.element,"fullpage"),rt[this.hash].prevElementParent.insertBefore(this.element,rt[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(un.removeChild(this.toolbar.element),nt.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=rt[this.hash].prevElementWidth,this.element.style.height=rt[this.hash].prevElementHeight;var Hn=0,nr=function(){nt.setPageScroll(_n.pageScroll);var sr=nt.getPageScroll();Hn++,Hn<10&&(sr.x!==_n.pageScroll.x||sr.y!==_n.pageScroll.y)&&nt.requestAnimationFrame(nr)};nt.requestAnimationFrame(nr),rt[this.hash].fullPage=!1,nt.delegate(this,Ln)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:nn}),this},setFullScreen:function(nn){var un=this;if(!nt.supportsFullScreen)return this.setFullPage(nn);if(nt.isFullScreen()===nn)return this;var pn={fullScreen:nn,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",pn),pn.preventDefaultAction)return this;if(nn){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var Rn=function(){var _n=nt.isFullScreen();_n||(nt.removeEvent(document,nt.fullScreenEventName,Rn),nt.removeEvent(document,nt.fullScreenErrorEventName,Rn),un.setFullPage(!1),un.isFullPage()&&(un.element.style.width=un.fullPageStyleWidth,un.element.style.height=un.fullPageStyleHeight)),un.navigator&&un.viewport&&setTimeout(function(){un.navigator.update(un.viewport)}),un.raiseEvent("full-screen",{fullScreen:_n})};nt.addEvent(document,nt.fullScreenEventName,Rn),nt.addEvent(document,nt.fullScreenErrorEventName,Rn),nt.requestFullScreen(document.body)}else nt.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(nn){return this.container.style.visibility=nn?"":"hidden",this.raiseEvent("visible",{visible:nn}),this},addTiledImage:function(nn){nt.console.assert(nn,"[Viewer.addTiledImage] options is required"),nt.console.assert(nn.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),nt.console.assert(!nn.replace||nn.index>-1&&nn.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var un=this;nn.replace&&(nn.replaceItem=un.world.getItemAt(nn.index)),this._hideMessage(),nn.placeholderFillStyle===void 0&&(nn.placeholderFillStyle=this.placeholderFillStyle),nn.opacity===void 0&&(nn.opacity=this.opacity),nn.preload===void 0&&(nn.preload=this.preload),nn.compositeOperation===void 0&&(nn.compositeOperation=this.compositeOperation),nn.crossOriginPolicy===void 0&&(nn.crossOriginPolicy=nn.tileSource.crossOriginPolicy!==void 0?nn.tileSource.crossOriginPolicy:this.crossOriginPolicy),nn.ajaxWithCredentials===void 0&&(nn.ajaxWithCredentials=this.ajaxWithCredentials),nn.loadTilesWithAjax===void 0&&(nn.loadTilesWithAjax=this.loadTilesWithAjax),nn.ajaxHeaders===void 0||nn.ajaxHeaders===null?nn.ajaxHeaders=this.ajaxHeaders:nt.isPlainObject(nn.ajaxHeaders)&&nt.isPlainObject(this.ajaxHeaders)&&(nn.ajaxHeaders=nt.extend({},this.ajaxHeaders,nn.ajaxHeaders));var pn={options:nn};function Rn(Vn){for(var Wn=0;Wn<un._loadQueue.length;Wn++)if(un._loadQueue[Wn]===pn){un._loadQueue.splice(Wn,1);break}un._loadQueue.length===0&&_n(pn),un.raiseEvent("add-item-failed",Vn),nn.error&&nn.error(Vn)}function _n(Vn){un.collectionMode&&(un.world.arrange({immediately:Vn.options.collectionImmediately,rows:un.collectionRows,columns:un.collectionColumns,layout:un.collectionLayout,tileSize:un.collectionTileSize,tileMargin:un.collectionTileMargin}),un.world.setAutoRefigureSizes(!0))}if(nt.isArray(nn.tileSource)){setTimeout(function(){Rn({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:nn.tileSource,options:nn})});return}this._loadQueue.push(pn);function or(){for(var Vn,Wn,Hn;un._loadQueue.length&&(Vn=un._loadQueue[0],!!Vn.tileSource);){if(un._loadQueue.splice(0,1),Vn.options.replace){var nr=un.world.getIndexOfItem(Vn.options.replaceItem);nr!=-1&&(Vn.options.index=nr),un.world.removeItem(Vn.options.replaceItem)}Wn=new nt.TiledImage({viewer:un,source:Vn.tileSource,viewport:un.viewport,drawer:un.drawer,tileCache:un.tileCache,imageLoader:un.imageLoader,x:Vn.options.x,y:Vn.options.y,width:Vn.options.width,height:Vn.options.height,fitBounds:Vn.options.fitBounds,fitBoundsPlacement:Vn.options.fitBoundsPlacement,clip:Vn.options.clip,placeholderFillStyle:Vn.options.placeholderFillStyle,opacity:Vn.options.opacity,preload:Vn.options.preload,degrees:Vn.options.degrees,compositeOperation:Vn.options.compositeOperation,springStiffness:un.springStiffness,animationTime:un.animationTime,minZoomImageRatio:un.minZoomImageRatio,wrapHorizontal:un.wrapHorizontal,wrapVertical:un.wrapVertical,immediateRender:un.immediateRender,blendTime:un.blendTime,alwaysBlend:un.alwaysBlend,minPixelRatio:un.minPixelRatio,smoothTileEdgesMinZoom:un.smoothTileEdgesMinZoom,iOSDevice:un.iOSDevice,crossOriginPolicy:Vn.options.crossOriginPolicy,ajaxWithCredentials:Vn.options.ajaxWithCredentials,loadTilesWithAjax:Vn.options.loadTilesWithAjax,ajaxHeaders:Vn.options.ajaxHeaders,debugMode:un.debugMode}),un.collectionMode&&un.world.setAutoRefigureSizes(!1),un.world.addItem(Wn,{index:Vn.options.index}),un._loadQueue.length===0&&_n(Vn),un.world.getItemCount()===1&&!un.preserveViewport&&un.viewport.goHome(!0),un.navigator&&(Hn=nt.extend({},Vn.options,{replace:!1,originalTiledImage:Wn,tileSource:Vn.tileSource}),un.navigator.addTiledImage(Hn)),Vn.options.success&&Vn.options.success({item:Wn})}}_t(this,nn.tileSource,nn,function(Vn){pn.tileSource=Vn,or()},function(Vn){Vn.options=nn,Rn(Vn),or()})},addSimpleImage:function(nn){nt.console.assert(nn,"[Viewer.addSimpleImage] options is required"),nt.console.assert(nn.url,"[Viewer.addSimpleImage] options.url is required");var un=nt.extend({},nn,{tileSource:{type:"image",url:nn.url}});delete un.url,this.addTiledImage(un)},addLayer:function(nn){var un=this;nt.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var pn=nt.extend({},nn,{success:function(Rn){un.raiseEvent("add-layer",{options:nn,drawer:Rn.item})},error:function(Rn){un.raiseEvent("add-layer-failed",Rn)}});return this.addTiledImage(pn),this},getLayerAtLevel:function(nn){return nt.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(nn)},getLevelOfLayer:function(nn){return nt.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(nn)},getLayersCount:function(){return nt.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(nn,un){return nt.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(nn,un)},removeLayer:function(nn){return nt.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(nn)},forceRedraw:function(){return rt[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var nn=nt.delegate(this,Bt),un=nt.delegate(this,Ft),pn=nt.delegate(this,er),Rn=nt.delegate(this,gr),_n=this.navImages,or=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(or=!1),this.previousButton=new nt.Button({element:this.previousButton?nt.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.PreviousPage"),srcRest:Fn(this.prefixUrl,_n.previous.REST),srcGroup:Fn(this.prefixUrl,_n.previous.GROUP),srcHover:Fn(this.prefixUrl,_n.previous.HOVER),srcDown:Fn(this.prefixUrl,_n.previous.DOWN),onRelease:Rn,onFocus:nn,onBlur:un}),this.nextButton=new nt.Button({element:this.nextButton?nt.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.NextPage"),srcRest:Fn(this.prefixUrl,_n.next.REST),srcGroup:Fn(this.prefixUrl,_n.next.GROUP),srcHover:Fn(this.prefixUrl,_n.next.HOVER),srcDown:Fn(this.prefixUrl,_n.next.DOWN),onRelease:pn,onFocus:nn,onBlur:un}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),or&&(this.paging=new nt.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:nt.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var nn=nt.delegate(this,ir),un=nt.delegate(this,Jn),pn=nt.delegate(this,cr),Rn=nt.delegate(this,tr),_n=nt.delegate(this,Cr),or=nt.delegate(this,ar),Vn=nt.delegate(this,Fr),Wn=nt.delegate(this,mr),Hn=nt.delegate(this,xr),nr=nt.delegate(this,fr),sr=nt.delegate(this,Bt),pr=nt.delegate(this,Ft),vr=this.navImages,kr=[],si=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(si=!1),this.showZoomControl&&(kr.push(this.zoomInButton=new nt.Button({element:this.zoomInButton?nt.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomIn"),srcRest:Fn(this.prefixUrl,vr.zoomIn.REST),srcGroup:Fn(this.prefixUrl,vr.zoomIn.GROUP),srcHover:Fn(this.prefixUrl,vr.zoomIn.HOVER),srcDown:Fn(this.prefixUrl,vr.zoomIn.DOWN),onPress:nn,onRelease:un,onClick:pn,onEnter:nn,onExit:un,onFocus:sr,onBlur:pr})),kr.push(this.zoomOutButton=new nt.Button({element:this.zoomOutButton?nt.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.ZoomOut"),srcRest:Fn(this.prefixUrl,vr.zoomOut.REST),srcGroup:Fn(this.prefixUrl,vr.zoomOut.GROUP),srcHover:Fn(this.prefixUrl,vr.zoomOut.HOVER),srcDown:Fn(this.prefixUrl,vr.zoomOut.DOWN),onPress:Rn,onRelease:un,onClick:_n,onEnter:Rn,onExit:un,onFocus:sr,onBlur:pr}))),this.showHomeControl&&kr.push(this.homeButton=new nt.Button({element:this.homeButton?nt.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Home"),srcRest:Fn(this.prefixUrl,vr.home.REST),srcGroup:Fn(this.prefixUrl,vr.home.GROUP),srcHover:Fn(this.prefixUrl,vr.home.HOVER),srcDown:Fn(this.prefixUrl,vr.home.DOWN),onRelease:or,onFocus:sr,onBlur:pr})),this.showFullPageControl&&kr.push(this.fullPageButton=new nt.Button({element:this.fullPageButton?nt.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.FullPage"),srcRest:Fn(this.prefixUrl,vr.fullpage.REST),srcGroup:Fn(this.prefixUrl,vr.fullpage.GROUP),srcHover:Fn(this.prefixUrl,vr.fullpage.HOVER),srcDown:Fn(this.prefixUrl,vr.fullpage.DOWN),onRelease:Vn,onFocus:sr,onBlur:pr})),this.showRotationControl&&(kr.push(this.rotateLeftButton=new nt.Button({element:this.rotateLeftButton?nt.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateLeft"),srcRest:Fn(this.prefixUrl,vr.rotateleft.REST),srcGroup:Fn(this.prefixUrl,vr.rotateleft.GROUP),srcHover:Fn(this.prefixUrl,vr.rotateleft.HOVER),srcDown:Fn(this.prefixUrl,vr.rotateleft.DOWN),onRelease:Wn,onFocus:sr,onBlur:pr})),kr.push(this.rotateRightButton=new nt.Button({element:this.rotateRightButton?nt.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.RotateRight"),srcRest:Fn(this.prefixUrl,vr.rotateright.REST),srcGroup:Fn(this.prefixUrl,vr.rotateright.GROUP),srcHover:Fn(this.prefixUrl,vr.rotateright.HOVER),srcDown:Fn(this.prefixUrl,vr.rotateright.DOWN),onRelease:Hn,onFocus:sr,onBlur:pr}))),this.showFlipControl&&kr.push(this.flipButton=new nt.Button({element:this.flipButton?nt.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:nt.getString("Tooltips.Flip"),srcRest:Fn(this.prefixUrl,vr.flip.REST),srcGroup:Fn(this.prefixUrl,vr.flip.GROUP),srcHover:Fn(this.prefixUrl,vr.flip.HOVER),srcDown:Fn(this.prefixUrl,vr.flip.DOWN),onRelease:nr,onFocus:sr,onBlur:pr})),si&&(this.buttons=new nt.ButtonGroup({buttons:kr,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",nt.delegate(this,Er)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||nt.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(nn){return this.tileSources&&nn>=0&&nn<this.tileSources.length&&(this._sequenceIndex=nn,this._updateSequenceButtons(nn),this.open(this.tileSources[nn]),this.referenceStrip&&this.referenceStrip.setFocus(nn),this.raiseEvent("page",{page:nn})),this},addOverlay:function(nn,un,pn,Rn){var _n;if(nt.isPlainObject(nn)?_n=nn:_n={element:nn,location:un,placement:pn,onDraw:Rn},nn=nt.getElement(_n.element),Et(this.currentOverlays,nn)>=0)return this;var or=xt(this,_n);return this.currentOverlays.push(or),or.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:nn,location:_n.location,placement:_n.placement}),this},updateOverlay:function(nn,un,pn){var Rn;return nn=nt.getElement(nn),Rn=Et(this.currentOverlays,nn),Rn>=0&&(this.currentOverlays[Rn].update(un,pn),rt[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:nn,location:un,placement:pn})),this},removeOverlay:function(nn){var un;return nn=nt.getElement(nn),un=Et(this.currentOverlays,nn),un>=0&&(this.currentOverlays[un].destroy(),this.currentOverlays.splice(un,1),rt[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:nn})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return rt[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(nn){var un;return nn=nt.getElement(nn),un=Et(this.currentOverlays,nn),un>=0?this.currentOverlays[un]:null},_updateSequenceButtons:function(nn){this.nextButton&&(!this.tileSources||this.tileSources.length-1===nn?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(nn>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(nn){this._hideMessage();var un=nt.makeNeutralElement("div");un.appendChild(document.createTextNode(nn)),this.messageDiv=nt.makeCenteredNode(un),nt.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var nn=this.messageDiv;nn&&(nn.parentNode.removeChild(nn),delete this.messageDiv)},gestureSettingsByDeviceType:function(nn){switch(nn){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var nn,un=this.currentOverlays.length;for(nn=0;nn<un;nn++)this.currentOverlays[nn].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new nt.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else nt.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function st(nn){return nn=nt.getElement(nn),new nt.Point(nn.clientWidth===0?1:nn.clientWidth,nn.clientHeight===0?1:nn.clientHeight)}function _t(nn,un,pn,Rn,_n){var or=nn;if(nt.type(un)=="string"){if(un.match(/^\s*<.*>\s*$/))un=nt.parseXml(un);else if(un.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var Vn=nt.parseJSON(un);un=Vn}catch{}}function Wn(Hn,nr){Hn.ready?Rn(Hn):(Hn.addHandler("ready",function(){Rn(Hn)}),Hn.addHandler("open-failed",function(sr){_n({message:sr.message,source:nr})}))}setTimeout(function(){if(nt.type(un)=="string")un=new nt.TileSource({url:un,crossOriginPolicy:pn.crossOriginPolicy!==void 0?pn.crossOriginPolicy:nn.crossOriginPolicy,ajaxWithCredentials:nn.ajaxWithCredentials,ajaxHeaders:nn.ajaxHeaders,useCanvas:nn.useCanvas,success:function(pr){Rn(pr.tileSource)}}),un.addHandler("open-failed",function(pr){_n(pr)});else if(nt.isPlainObject(un)||un.nodeType)if(un.crossOriginPolicy===void 0&&(pn.crossOriginPolicy!==void 0||nn.crossOriginPolicy!==void 0)&&(un.crossOriginPolicy=pn.crossOriginPolicy!==void 0?pn.crossOriginPolicy:nn.crossOriginPolicy),un.ajaxWithCredentials===void 0&&(un.ajaxWithCredentials=nn.ajaxWithCredentials),un.useCanvas===void 0&&(un.useCanvas=nn.useCanvas),nt.isFunction(un.getTileUrl)){var Hn=new nt.TileSource(un);Hn.getTileUrl=un.getTileUrl,Rn(Hn)}else{var nr=nt.TileSource.determineType(or,un);if(!nr){_n({message:"Unable to load TileSource",source:un});return}var sr=nr.prototype.configure.apply(or,[un]);Wn(new nr(sr),un)}else Wn(un,un)})}function xt(nn,un){if(un instanceof nt.Overlay)return un;var pn=null;if(un.element)pn=nt.getElement(un.element);else{var Rn=un.id?un.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);pn=nt.getElement(un.id),pn||(pn=document.createElement("a"),pn.href="#/overlay/"+Rn),pn.id=Rn,nt.addClass(pn,un.className?un.className:"openseadragon-overlay")}var _n=un.location,or=un.width,Vn=un.height;if(!_n){var Wn=un.x,Hn=un.y;if(un.px!==void 0){var nr=nn.viewport.imageToViewportRectangle(new nt.Rect(un.px,un.py,or||0,Vn||0));Wn=nr.x,Hn=nr.y,or=or!==void 0?nr.width:void 0,Vn=Vn!==void 0?nr.height:void 0}_n=new nt.Point(Wn,Hn)}var sr=un.placement;return sr&&nt.type(sr)==="string"&&(sr=nt.Placement[un.placement.toUpperCase()]),new nt.Overlay({element:pn,location:_n,placement:sr,onDraw:un.onDraw,checkResize:un.checkResize,width:or,height:Vn,rotationMode:un.rotationMode})}function Et(nn,un){var pn;for(pn=nn.length-1;pn>=0;pn--)if(nn[pn].element===un)return pn;return-1}function kt(nn,un){return nt.requestAnimationFrame(function(){un(nn)})}function Lt(nn){nt.requestAnimationFrame(function(){Rt(nn)})}function It(nn){!nn.autoHideControls||(nn.controlsShouldFade=!0,nn.controlsFadeBeginTime=nt.now()+nn.controlsFadeDelay,window.setTimeout(function(){Lt(nn)},nn.controlsFadeDelay))}function Rt(nn){var un,pn,Rn,_n;if(nn.controlsShouldFade){for(un=nt.now(),pn=un-nn.controlsFadeBeginTime,Rn=1-pn/nn.controlsFadeLength,Rn=Math.min(1,Rn),Rn=Math.max(0,Rn),_n=nn.controls.length-1;_n>=0;_n--)nn.controls[_n].autoFade&&nn.controls[_n].setOpacity(Rn);Rn>0&&Lt(nn)}}function Nt(nn){var un;for(nn.controlsShouldFade=!1,un=nn.controls.length-1;un>=0;un--)nn.controls[un].setOpacity(1)}function Bt(){Nt(this)}function Ft(){It(this)}function Yt(nn){var un={originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction,preventVerticalPan:nn.preventVerticalPan,preventHorizontalPan:nn.preventHorizontalPan};if(this.raiseEvent("canvas-key",un),!un.preventDefaultAction&&!nn.ctrl&&!nn.alt&&!nn.meta)switch(nn.keyCode){case 38:return un.preventVerticalPan||(nn.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return un.preventVerticalPan||(nn.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return un.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return un.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function Zt(nn){var un={originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction,preventVerticalPan:nn.preventVerticalPan,preventHorizontalPan:nn.preventHorizontalPan};if(this.raiseEvent("canvas-key",un),!un.preventDefaultAction&&!nn.ctrl&&!nn.alt&&!nn.meta)switch(nn.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return un.preventVerticalPan||(nn.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return un.preventVerticalPan||(nn.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return un.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return un.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new nt.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(nt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function Wt(nn){var un,pn=document.activeElement==this.canvas;pn||this.canvas.focus(),this.viewport.flipped&&(nn.position.x=this.viewport.getContainerSize().x-nn.position.x);var Rn={tracker:nn.eventSource,position:nn.position,quick:nn.quick,shift:nn.shift,originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction};this.raiseEvent("canvas-click",Rn),!Rn.preventDefaultAction&&this.viewport&&nn.quick&&(un=this.gestureSettingsByDeviceType(nn.pointerType),un.clickToZoom&&(this.viewport.zoomBy(nn.shift?1/this.zoomPerClick:this.zoomPerClick,un.zoomToRefPoint?this.viewport.pointFromPixel(nn.position,!0):null),this.viewport.applyConstraints()))}function Kt(nn){var un,pn={tracker:nn.eventSource,position:nn.position,shift:nn.shift,originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction};this.raiseEvent("canvas-double-click",pn),!pn.preventDefaultAction&&this.viewport&&(un=this.gestureSettingsByDeviceType(nn.pointerType),un.dblClickToZoom&&(this.viewport.zoomBy(nn.shift?1/this.zoomPerClick:this.zoomPerClick,un.zoomToRefPoint?this.viewport.pointFromPixel(nn.position,!0):null),this.viewport.applyConstraints()))}function Jt(nn){var un,pn={tracker:nn.eventSource,position:nn.position,delta:nn.delta,speed:nn.speed,direction:nn.direction,shift:nn.shift,originalEvent:nn.originalEvent,preventDefaultAction:nn.preventDefaultAction};if(this.raiseEvent("canvas-drag",pn),!pn.preventDefaultAction&&this.viewport){if(un=this.gestureSettingsByDeviceType(nn.pointerType),this.panHorizontal||(nn.delta.x=0),this.panVertical||(nn.delta.y=0),this.viewport.flipped&&(nn.delta.x=-nn.delta.x),this.constrainDuringPan){var Rn=this.viewport.deltaPointsFromPixels(nn.delta.negate());this.viewport.centerSpringX.target.value+=Rn.x,this.viewport.centerSpringY.target.value+=Rn.y;var _n=this.viewport.getBounds(),or=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Rn.x,this.viewport.centerSpringY.target.value-=Rn.y,_n.x!=or.x&&(nn.delta.x=0),_n.y!=or.y&&(nn.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(nn.delta.negate()),un.flickEnabled&&!this.constrainDuringPan)}}function on(nn){if(!nn.preventDefaultAction&&this.viewport){var un=this.gestureSettingsByDeviceType(nn.pointerType);if(un.flickEnabled&&nn.speed>=un.flickMinSpeed){var pn=0;this.panHorizontal&&(pn=un.flickMomentum*nn.speed*Math.cos(nn.direction));var Rn=0;this.panVertical&&(Rn=un.flickMomentum*nn.speed*Math.sin(nn.direction));var _n=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),or=this.viewport.pointFromPixel(new nt.Point(_n.x-pn,_n.y-Rn));this.viewport.panTo(or,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:nn.eventSource,position:nn.position,speed:nn.speed,direction:nn.direction,shift:nn.shift,originalEvent:nn.originalEvent})}function rn(nn){this.raiseEvent("canvas-enter",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function ln(nn){window.location!=window.parent.location&&nt.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function gn(nn){this.raiseEvent("canvas-press",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,insideElementPressed:nn.insideElementPressed,insideElementReleased:nn.insideElementReleased,originalEvent:nn.originalEvent})}function wn(nn){this.raiseEvent("canvas-release",{tracker:nn.eventSource,pointerType:nn.pointerType,position:nn.position,insideElementPressed:nn.insideElementPressed,insideElementReleased:nn.insideElementReleased,originalEvent:nn.originalEvent})}function kn(nn){this.raiseEvent("canvas-nonprimary-press",{tracker:nn.eventSource,position:nn.position,pointerType:nn.pointerType,button:nn.button,buttons:nn.buttons,originalEvent:nn.originalEvent})}function Cn(nn){this.raiseEvent("canvas-nonprimary-release",{tracker:nn.eventSource,position:nn.position,pointerType:nn.pointerType,button:nn.button,buttons:nn.buttons,originalEvent:nn.originalEvent})}function Pn(nn){var un,pn,Rn,_n;if(!nn.preventDefaultAction&&this.viewport&&(un=this.gestureSettingsByDeviceType(nn.pointerType),un.pinchToZoom&&(pn=this.viewport.pointFromPixel(nn.center,!0),Rn=this.viewport.pointFromPixel(nn.lastCenter,!0),_n=Rn.minus(pn),this.panHorizontal||(_n.x=0),this.panVertical||(_n.y=0),this.viewport.zoomBy(nn.distance/nn.lastDistance,pn,!0),un.zoomToRefPoint&&this.viewport.panBy(_n,!0),this.viewport.applyConstraints()),un.pinchRotate)){var or=Math.atan2(nn.gesturePoints[0].currentPos.y-nn.gesturePoints[1].currentPos.y,nn.gesturePoints[0].currentPos.x-nn.gesturePoints[1].currentPos.x),Vn=Math.atan2(nn.gesturePoints[0].lastPos.y-nn.gesturePoints[1].lastPos.y,nn.gesturePoints[0].lastPos.x-nn.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(or-Vn)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:nn.eventSource,gesturePoints:nn.gesturePoints,lastCenter:nn.lastCenter,center:nn.center,lastDistance:nn.lastDistance,distance:nn.distance,shift:nn.shift,originalEvent:nn.originalEvent}),!1}function An(nn){var un,pn,Rn,_n;if(Rn=nt.now(),_n=Rn-this._lastScrollTime,_n>this.minScrollDeltaTime){if(this._lastScrollTime=Rn,this.viewport.flipped&&(nn.position.x=this.viewport.getContainerSize().x-nn.position.x),!nn.preventDefaultAction&&this.viewport&&(un=this.gestureSettingsByDeviceType(nn.pointerType),un.scrollToZoom&&(pn=Math.pow(this.zoomPerScroll,nn.scroll),this.viewport.zoomBy(pn,un.zoomToRefPoint?this.viewport.pointFromPixel(nn.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:nn.eventSource,position:nn.position,scroll:nn.scroll,shift:nn.shift,originalEvent:nn.originalEvent}),un&&un.scrollToZoom)return!1}else if(un=this.gestureSettingsByDeviceType(nn.pointerType),un&&un.scrollToZoom)return!1}function cn(nn){rt[this.hash].mouseInside=!0,Nt(this),this.raiseEvent("container-enter",{tracker:nn.eventSource,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function Ln(nn){nn.pointers<1&&(rt[this.hash].mouseInside=!1,rt[this.hash].animating||It(this)),this.raiseEvent("container-exit",{tracker:nn.eventSource,position:nn.position,buttons:nn.buttons,pointers:nn.pointers,insideElementPressed:nn.insideElementPressed,buttonDownAny:nn.buttonDownAny,originalEvent:nn.originalEvent})}function an(nn){zn(nn),nn.isOpen()?nn._updateRequestId=kt(nn,an):nn._updateRequestId=!1}function zn(nn){if(!nn._opening){if(nn.autoResize){var un=st(nn.container),pn=rt[nn.hash].prevContainerSize;if(!un.equals(pn)){var Rn=nn.viewport;if(nn.preserveImageSizeOnResize){var _n=pn.x/un.x,or=Rn.getZoom()*_n,Vn=Rn.getCenter();Rn.resize(un,!1),Rn.zoomTo(or,null,!0),Rn.panTo(Vn,!0)}else{var Wn=Rn.getBounds();Rn.resize(un,!0),Rn.fitBoundsWithConstraints(Wn,!0)}rt[nn.hash].prevContainerSize=un,rt[nn.hash].forceRedraw=!0}}var Hn=nn.viewport.update(),nr=nn.world.update()||Hn;Hn&&nn.raiseEvent("viewport-change"),nn.referenceStrip&&(nr=nn.referenceStrip.update(nn.viewport)||nr),!rt[nn.hash].animating&&nr&&(nn.raiseEvent("animation-start"),Nt(nn)),(nr||rt[nn.hash].forceRedraw||nn.world.needsDraw())&&(dn(nn),nn._drawOverlays(),nn.navigator&&nn.navigator.update(nn.viewport),rt[nn.hash].forceRedraw=!1,nr&&nn.raiseEvent("animation")),rt[nn.hash].animating&&!nr&&(nn.raiseEvent("animation-finish"),rt[nn.hash].mouseInside||It(nn)),rt[nn.hash].animating=nr}}function dn(nn){nn.imageLoader.clear(),nn.drawer.clear(),nn.world.draw(),nn.raiseEvent("update-viewport",{})}function Fn(nn,un){return nn?nn+un:un}function ir(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=this.zoomPerSecond,rt[this.hash].zooming=!0,hr(this)}function tr(){rt[this.hash].lastZoomTime=nt.now(),rt[this.hash].zoomFactor=1/this.zoomPerSecond,rt[this.hash].zooming=!0,hr(this)}function Jn(){rt[this.hash].zooming=!1}function hr(nn){nt.requestAnimationFrame(nt.delegate(nn,lr))}function lr(){var nn,un,pn;rt[this.hash].zooming&&this.viewport&&(nn=nt.now(),un=nn-rt[this.hash].lastZoomTime,pn=Math.pow(rt[this.hash].zoomFactor,un/1e3),this.viewport.zoomBy(pn),this.viewport.applyConstraints(),rt[this.hash].lastZoomTime=nn,hr(this))}function cr(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Cr(){this.viewport&&(rt[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Er(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function ar(){this.viewport&&this.viewport.goHome()}function Fr(){this.isFullPage()&&!nt.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function mr(){if(this.viewport){var nn=this.viewport.getRotation();this.viewport.flipped?nn=nt.positiveModulo(nn+this.rotationIncrement,360):nn=nt.positiveModulo(nn-this.rotationIncrement,360),this.viewport.setRotation(nn)}}function xr(){if(this.viewport){var nn=this.viewport.getRotation();this.viewport.flipped?nn=nt.positiveModulo(nn-this.rotationIncrement,360):nn=nt.positiveModulo(nn+this.rotationIncrement,360),this.viewport.setRotation(nn)}}function fr(){this.viewport.toggleFlip()}function gr(){var nn=this._sequenceIndex-1;this.navPrevNextWrap&&nn<0&&(nn+=this.tileSources.length),this.goToPage(nn)}function er(){var nn=this._sequenceIndex+1;this.navPrevNextWrap&&nn>=this.tileSources.length&&(nn=0),this.goToPage(nn)}}(OpenSeadragon),function(nt){nt.Navigator=function(kt){var Lt=kt.viewer,It=this,Rt,Nt;kt.id?(this.element=document.getElementById(kt.id),kt.controlOptions={anchor:nt.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(kt.id="navigator-"+nt.now(),this.element=nt.makeNeutralElement("div"),kt.controlOptions={anchor:nt.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:kt.autoFade},kt.position&&(kt.position=="BOTTOM_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_RIGHT:kt.position=="BOTTOM_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.BOTTOM_LEFT:kt.position=="TOP_RIGHT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_RIGHT:kt.position=="TOP_LEFT"?kt.controlOptions.anchor=nt.ControlAnchor.TOP_LEFT:kt.position=="ABSOLUTE"&&(kt.controlOptions.anchor=nt.ControlAnchor.ABSOLUTE,kt.controlOptions.top=kt.top,kt.controlOptions.left=kt.left,kt.controlOptions.height=kt.height,kt.controlOptions.width=kt.width))),this.element.id=kt.id,this.element.className+=" navigator",kt=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.navigatorSizeRatio},kt,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:kt.autoResize,minZoomImageRatio:1,background:kt.background,opacity:kt.opacity,borderColor:kt.borderColor,displayRegionColor:kt.displayRegionColor}),kt.minPixelRatio=this.minPixelRatio=Lt.minPixelRatio,nt.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new nt.Point(1,1),this.totalBorderWidths=new nt.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),kt.controlOptions.anchor!=nt.ControlAnchor.NONE&&function(Yt,Zt){Yt.margin="0px",Yt.border=Zt+"px solid "+kt.borderColor,Yt.padding="0px",Yt.background=kt.background,Yt.opacity=kt.opacity,Yt.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=nt.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(Yt,Zt){Yt.position="relative",Yt.top="0px",Yt.left="0px",Yt.fontSize="0px",Yt.overflow="hidden",Yt.border=Zt+"px solid "+kt.displayRegionColor,Yt.margin="0px",Yt.padding="0px",Yt.background="transparent",Yt.float="left",Yt.cssFloat="left",Yt.styleFloat="left",Yt.zIndex=999999999,Yt.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=nt.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",Lt.addControl(this.element,kt.controlOptions),this._resizeWithViewer=kt.controlOptions.anchor!=nt.ControlAnchor.ABSOLUTE&&kt.controlOptions.anchor!=nt.ControlAnchor.NONE,kt.width&&kt.height?(this.setWidth(kt.width),this.setHeight(kt.height)):this._resizeWithViewer&&(Rt=nt.getElementSize(Lt.element),this.element.style.height=Math.round(Rt.y*kt.sizeRatio)+"px",this.element.style.width=Math.round(Rt.x*kt.sizeRatio)+"px",this.oldViewerSize=Rt,Nt=nt.getElementSize(this.element),this.elementArea=Nt.x*Nt.y),this.oldContainerSize=new nt.Point(0,0),nt.Viewer.apply(this,[kt]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function Bt(Yt){xt(It.displayRegionContainer,Yt),xt(It.displayRegion,-Yt),It.viewport.setRotation(Yt)}if(kt.navigatorRotate){var Ft=kt.viewer.viewport?kt.viewer.viewport.getRotation():kt.viewer.degrees||0;Bt(Ft),kt.viewer.addHandler("rotate",function(Yt){Bt(Yt.degrees)})}this.innerTracker.destroy(),this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),clickHandler:nt.delegate(this,rt),releaseHandler:nt.delegate(this,st),scrollHandler:nt.delegate(this,_t)}),this.addHandler("reset-size",function(){It.viewport&&It.viewport.goHome(!0)}),Lt.world.addHandler("item-index-change",function(Yt){window.setTimeout(function(){var Zt=It.world.getItemAt(Yt.previousIndex);It.world.setItemIndex(Zt,Yt.newIndex)},1)}),Lt.world.addHandler("remove-item",function(Yt){var Zt=Yt.item,Wt=It._getMatchingItem(Zt);Wt&&It.world.removeItem(Wt)}),this.update(Lt.viewport)},nt.extend(nt.Navigator.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{updateSize:function(){if(this.viewport){var kt=new nt.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);kt.equals(this.oldContainerSize)||(this.viewport.resize(kt,!0),this.viewport.goHome(!0),this.oldContainerSize=kt,this.drawer.clear(),this.world.draw())}},setWidth:function(kt){this.width=kt,this.element.style.width=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setHeight:function(kt){this.height=kt,this.element.style.height=typeof kt=="number"?kt+"px":kt,this._resizeWithViewer=!1},setFlip:function(kt){return this.viewport.setFlip(kt),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(kt){Et(this.displayRegion,kt),Et(this.canvas,kt),Et(this.element,kt)},update:function(kt){var Lt,It,Rt,Nt,Bt,Ft;if(Lt=nt.getElementSize(this.viewer.element),this._resizeWithViewer&&Lt.x&&Lt.y&&!Lt.equals(this.oldViewerSize)&&(this.oldViewerSize=Lt,this.maintainSizeRatio||!this.elementArea?(It=Lt.x*this.sizeRatio,Rt=Lt.y*this.sizeRatio):(It=Math.sqrt(this.elementArea*(Lt.x/Lt.y)),Rt=this.elementArea/It),this.element.style.width=Math.round(It)+"px",this.element.style.height=Math.round(Rt)+"px",this.elementArea||(this.elementArea=It*Rt),this.updateSize()),kt&&this.viewport){Nt=kt.getBoundsNoRotate(!0),Bt=this.viewport.pixelFromPointNoRotate(Nt.getTopLeft(),!1),Ft=this.viewport.pixelFromPointNoRotate(Nt.getBottomRight(),!1).minus(this.totalBorderWidths);var Yt=this.displayRegion.style;Yt.display=this.world.getItemCount()?"block":"none",Yt.top=Math.round(Bt.y)+"px",Yt.left=Math.round(Bt.x)+"px";var Zt=Math.abs(Bt.x-Ft.x),Wt=Math.abs(Bt.y-Ft.y);Yt.width=Math.round(Math.max(Zt,0))+"px",Yt.height=Math.round(Math.max(Wt,0))+"px"}},addTiledImage:function(kt){var Lt=this,It=kt.originalTiledImage;delete kt.original;var Rt=nt.extend({},kt,{success:function(Nt){var Bt=Nt.item;Bt._originalForNavigator=It,Lt._matchBounds(Bt,It,!0);function Ft(){Lt._matchBounds(Bt,It)}function Yt(){Lt._matchOpacity(Bt,It)}function Zt(){Lt._matchCompositeOperation(Bt,It)}It.addHandler("bounds-change",Ft),It.addHandler("clip-change",Ft),It.addHandler("opacity-change",Yt),It.addHandler("composite-operation-change",Zt)}});return nt.Viewer.prototype.addTiledImage.apply(this,[Rt])},_getMatchingItem:function(kt){for(var Lt=this.world.getItemCount(),It,Rt=0;Rt<Lt;Rt++)if(It=this.world.getItemAt(Rt),It._originalForNavigator===kt)return It;return null},_matchBounds:function(kt,Lt,It){var Rt=Lt.getBoundsNoRotate();kt.setPosition(Rt.getTopLeft(),It),kt.setWidth(Rt.width,It),kt.setRotation(Lt.getRotation(),It),kt.setClip(Lt.getClip())},_matchOpacity:function(kt,Lt){kt.setOpacity(Lt.opacity)},_matchCompositeOperation:function(kt,Lt){kt.setCompositeOperation(Lt.compositeOperation)}});function rt(kt){var Lt={tracker:kt.eventSource,position:kt.position,quick:kt.quick,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",Lt),!Lt.preventDefaultAction&&kt.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(kt.position.x=this.viewport.getContainerSize().x-kt.position.x);var It=this.viewport.pointFromPixel(kt.position);this.panVertical?this.panHorizontal||(It.x=this.viewer.viewport.getCenter(!0).x):It.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(It),this.viewer.viewport.applyConstraints()}}function it(kt){var Lt={tracker:kt.eventSource,position:kt.position,delta:kt.delta,speed:kt.speed,direction:kt.direction,shift:kt.shift,originalEvent:kt.originalEvent,preventDefaultAction:kt.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",Lt),!Lt.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(kt.delta.x=0),this.panVertical||(kt.delta.y=0),this.viewer.viewport.flipped&&(kt.delta.x=-kt.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(kt.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function st(kt){kt.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function _t(kt){return this.viewer.raiseEvent("navigator-scroll",{tracker:kt.eventSource,position:kt.position,scroll:kt.scroll,shift:kt.shift,originalEvent:kt.originalEvent}),!1}function xt(kt,Lt){Et(kt,"rotate("+Lt+"deg)")}function Et(kt,Lt){kt.style.webkitTransform=Lt,kt.style.mozTransform=Lt,kt.style.msTransform=Lt,kt.style.oTransform=Lt,kt.style.transform=Lt}}(OpenSeadragon),function(nt){var rt={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};nt.extend(nt,{getString:function(it){var st=it.split("."),_t=null,xt=arguments,Et=rt,kt;for(kt=0;kt<st.length-1;kt++)Et=Et[st[kt]]||{};return _t=Et[st[kt]],typeof _t!="string"&&(nt.console.log("Untranslated source string:",it),_t=""),_t.replace(/\{\d+\}/g,function(Lt){var It=parseInt(Lt.match(/\d+/),10)+1;return It<xt.length?xt[It]:""})},setString:function(it,st){var _t=it.split("."),xt=rt,Et;for(Et=0;Et<_t.length-1;Et++)xt[_t[Et]]||(xt[_t[Et]]={}),xt=xt[_t[Et]];xt[_t[Et]]=st}})}(OpenSeadragon),function(nt){nt.Point=function(rt,it){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0},nt.Point.prototype={clone:function(){return new nt.Point(this.x,this.y)},plus:function(rt){return new nt.Point(this.x+rt.x,this.y+rt.y)},minus:function(rt){return new nt.Point(this.x-rt.x,this.y-rt.y)},times:function(rt){return new nt.Point(this.x*rt,this.y*rt)},divide:function(rt){return new nt.Point(this.x/rt,this.y/rt)},negate:function(){return new nt.Point(-this.x,-this.y)},distanceTo:function(rt){return Math.sqrt(Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2))},squaredDistanceTo:function(rt){return Math.pow(this.x-rt.x,2)+Math.pow(this.y-rt.y,2)},apply:function(rt){return new nt.Point(rt(this.x),rt(this.y))},equals:function(rt){return rt instanceof nt.Point&&this.x===rt.x&&this.y===rt.y},rotate:function(rt,it){it=it||new nt.Point(0,0);var st,_t;if(rt%90===0){var xt=nt.positiveModulo(rt,360);switch(xt){case 0:st=1,_t=0;break;case 90:st=0,_t=1;break;case 180:st=-1,_t=0;break;case 270:st=0,_t=-1;break}}else{var Et=rt*Math.PI/180;st=Math.cos(Et),_t=Math.sin(Et)}var kt=st*(this.x-it.x)-_t*(this.y-it.y)+it.x,Lt=_t*(this.x-it.x)+st*(this.y-it.y)+it.y;return new nt.Point(kt,Lt)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(nt){nt.TileSource=function(it,st,_t,xt,Et,kt){var Lt=this,It=arguments,Rt,Nt;if(nt.isPlainObject(it)?Rt=it:Rt={width:It[0],height:It[1],tileSize:It[2],tileOverlap:It[3],minLevel:It[4],maxLevel:It[5]},nt.EventSource.call(this),nt.extend(!0,this,Rt),!this.success){for(Nt=0;Nt<arguments.length;Nt++)if(nt.isFunction(arguments[Nt])){this.success=arguments[Nt];break}}this.success&&this.addHandler("ready",function(Bt){Lt.success(Bt)}),nt.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new nt.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=Rt.width&&Rt.height?Rt.width/Rt.height:1,this.dimensions=new nt.Point(Rt.width,Rt.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=Rt.tileOverlap?Rt.tileOverlap:0,this.minLevel=Rt.minLevel?Rt.minLevel:0,this.maxLevel=Rt.maxLevel!==void 0&&Rt.maxLevel!==null?Rt.maxLevel:Rt.width&&Rt.height?Math.ceil(Math.log(Math.max(Rt.width,Rt.height))/Math.log(2)):0,this.success&&nt.isFunction(this.success)&&this.success(this))},nt.TileSource.prototype={getTileSize:function(it){return nt.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(it){return this._tileWidth?this._tileWidth:this.getTileSize(it)},getTileHeight:function(it){return this._tileHeight?this._tileHeight:this.getTileSize(it)},getLevelScale:function(it){var st={},_t;for(_t=0;_t<=this.maxLevel;_t++)st[_t]=1/Math.pow(2,this.maxLevel-_t);return this.getLevelScale=function(xt){return st[xt]},this.getLevelScale(it)},getNumTiles:function(it){var st=this.getLevelScale(it),_t=Math.ceil(st*this.dimensions.x/this.getTileWidth(it)),xt=Math.ceil(st*this.dimensions.y/this.getTileHeight(it));return new nt.Point(_t,xt)},getPixelRatio:function(it){var st=this.dimensions.times(this.getLevelScale(it)),_t=1/st.x,xt=1/st.y;return new nt.Point(_t,xt)},getClosestLevel:function(){var it,st;for(it=this.minLevel+1;it<=this.maxLevel&&(st=this.getNumTiles(it),!(st.x>1||st.y>1));it++);return it-1},getTileAtPoint:function(it,st){var _t=st.x>=0&&st.x<=1&&st.y>=0&&st.y<=1/this.aspectRatio;nt.console.assert(_t,"[TileSource.getTileAtPoint] must be called with a valid point.");var xt=this.dimensions.x*this.getLevelScale(it),Et=st.x*xt,kt=st.y*xt,Lt=Math.floor(Et/this.getTileWidth(it)),It=Math.floor(kt/this.getTileHeight(it));st.x>=1&&(Lt=this.getNumTiles(it).x-1);var Rt=1e-15;return st.y>=1/this.aspectRatio-Rt&&(It=this.getNumTiles(it).y-1),new nt.Point(Lt,It)},getTileBounds:function(it,st,_t,xt){var Et=this.dimensions.times(this.getLevelScale(it)),kt=this.getTileWidth(it),Lt=this.getTileHeight(it),It=st===0?0:kt*st-this.tileOverlap,Rt=_t===0?0:Lt*_t-this.tileOverlap,Nt=kt+(st===0?1:2)*this.tileOverlap,Bt=Lt+(_t===0?1:2)*this.tileOverlap,Ft=1/Et.x;return Nt=Math.min(Nt,Et.x-It),Bt=Math.min(Bt,Et.y-Rt),xt?new nt.Rect(0,0,Nt,Bt):new nt.Rect(It*Ft,Rt*Ft,Nt*Ft,Bt*Ft)},getImageInfo:function(it){var st=this,_t,xt,Et,kt,Lt,It,Rt;it&&(Lt=it.split("/"),It=Lt[Lt.length-1],Rt=It.lastIndexOf("."),Rt>-1&&(Lt[Lt.length-1]=It.slice(0,Rt))),xt=function(Nt){typeof Nt=="string"&&(Nt=nt.parseXml(Nt));var Bt=nt.TileSource.determineType(st,Nt,it);if(!Bt){st.raiseEvent("open-failed",{message:"Unable to load TileSource",source:it});return}kt=Bt.prototype.configure.apply(st,[Nt,it]),kt.ajaxWithCredentials===void 0&&(kt.ajaxWithCredentials=st.ajaxWithCredentials),Et=new Bt(kt),st.ready=!0,st.raiseEvent("ready",{tileSource:Et})},it.match(/\.js$/)?(_t=it.split("/").pop().replace(".js",""),nt.jsonp({url:it,async:!1,callbackName:_t,callback:xt})):nt.makeAjaxRequest({url:it,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(Nt){var Bt=rt(Nt);xt(Bt)},error:function(Nt,Bt){var Ft;try{Ft="HTTP "+Nt.status+" attempting to load TileSource"}catch{var Yt;typeof Bt>"u"||!Bt.toString?Yt="Unknown error":Yt=Bt.toString(),Ft=Yt+" attempting to load TileSource"}st.raiseEvent("open-failed",{message:Ft,source:it})}})},supports:function(it,st){return!1},configure:function(it,st){throw new Error("Method not implemented.")},getTileUrl:function(it,st,_t){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(it,st,_t){return{}},tileExists:function(it,st,_t){var xt=this.getNumTiles(it);return it>=this.minLevel&&it<=this.maxLevel&&st>=0&&_t>=0&&st<xt.x&&_t<xt.y}},nt.extend(!0,nt.TileSource.prototype,nt.EventSource.prototype);function rt(it){var st=it.responseText,_t=it.status,xt,Et;if(it){if(it.status!==200&&it.status!==0)throw _t=it.status,xt=_t==404?"Not Found":it.statusText,new Error(nt.getString("Errors.Status",_t,xt))}else throw new Error(nt.getString("Errors.Security"));if(st.match(/\s*<.*/))try{Et=it.responseXML&&it.responseXML.documentElement?it.responseXML:nt.parseXml(st)}catch{Et=it.responseText}else if(st.match(/\s*[\{\[].*/))try{Et=nt.parseJSON(st)}catch{Et=st}else Et=st;return Et}nt.TileSource.determineType=function(it,st,_t){var xt;for(xt in OpenSeadragon)if(xt.match(/.+TileSource$/)&&nt.isFunction(OpenSeadragon[xt])&&nt.isFunction(OpenSeadragon[xt].prototype.supports)&&OpenSeadragon[xt].prototype.supports.call(it,st,_t))return OpenSeadragon[xt];nt.console.error("No TileSource was able to open %s %s",_t,st)}}(OpenSeadragon),function(nt){nt.DziTileSource=function(st,_t,xt,Et,kt,Lt,It,Rt,Nt){var Bt,Ft,Yt,Zt;if(nt.isPlainObject(st)?Zt=st:Zt={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=Zt.tilesUrl,this.fileFormat=Zt.fileFormat,this.displayRects=Zt.displayRects,this.displayRects)for(Bt=this.displayRects.length-1;Bt>=0;Bt--)for(Ft=this.displayRects[Bt],Yt=Ft.minLevel;Yt<=Ft.maxLevel;Yt++)this._levelRects[Yt]||(this._levelRects[Yt]=[]),this._levelRects[Yt].push(Ft);nt.TileSource.apply(this,[Zt])},nt.extend(nt.DziTileSource.prototype,nt.TileSource.prototype,{supports:function(st,_t){var xt;return st.Image?xt=st.Image.xmlns:st.documentElement&&(st.documentElement.localName=="Image"||st.documentElement.tagName=="Image")&&(xt=st.documentElement.namespaceURI),xt=(xt||"").toLowerCase(),xt.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||xt.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(st,_t){var xt;return nt.isPlainObject(st)?xt=it(this,st):xt=rt(this,st),_t&&!xt.tilesUrl&&(xt.tilesUrl=_t.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),_t.search(/\.(dzi|xml|js)\?/)!=-1?xt.queryParams=_t.match(/\?.*/):xt.queryParams=""),xt},getTileUrl:function(st,_t,xt){return[this.tilesUrl,st,"/",_t,"_",xt,".",this.fileFormat,this.queryParams].join("")},tileExists:function(st,_t,xt){var Et=this._levelRects[st],kt,Lt,It,Rt,Nt,Bt,Ft;if(this.minLevel&&st<this.minLevel||this.maxLevel&&st>this.maxLevel)return!1;if(!Et||!Et.length)return!0;for(Ft=Et.length-1;Ft>=0;Ft--)if(kt=Et[Ft],!(st<kt.minLevel||st>kt.maxLevel)&&(Lt=this.getLevelScale(st),It=kt.x*Lt,Rt=kt.y*Lt,Nt=It+kt.width*Lt,Bt=Rt+kt.height*Lt,It=Math.floor(It/this._tileWidth),Rt=Math.floor(Rt/this._tileWidth),Nt=Math.ceil(Nt/this._tileWidth),Bt=Math.ceil(Bt/this._tileWidth),It<=_t&&_t<Nt&&Rt<=xt&&xt<Bt))return!0;return!1}});function rt(st,_t){if(!_t||!_t.documentElement)throw new Error(nt.getString("Errors.Xml"));var xt=_t.documentElement,Et=xt.localName||xt.tagName,kt=_t.documentElement.namespaceURI,Lt=null,It=[],Rt,Nt,Bt,Ft,Yt;if(Et=="Image")try{if(Ft=xt.getElementsByTagName("Size")[0],Ft===void 0&&(Ft=xt.getElementsByTagNameNS(kt,"Size")[0]),Lt={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:xt.getAttribute("Url"),Format:xt.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(xt.getAttribute("Overlap"),10),TileSize:parseInt(xt.getAttribute("TileSize"),10),Size:{Height:parseInt(Ft.getAttribute("Height"),10),Width:parseInt(Ft.getAttribute("Width"),10)}}},!nt.imageFormatSupported(Lt.Image.Format))throw new Error(nt.getString("Errors.ImageFormat",Lt.Image.Format.toUpperCase()));for(Rt=xt.getElementsByTagName("DisplayRect"),Rt===void 0&&(Rt=xt.getElementsByTagNameNS(kt,"DisplayRect")[0]),Yt=0;Yt<Rt.length;Yt++)Nt=Rt[Yt],Bt=Nt.getElementsByTagName("Rect")[0],Bt===void 0&&(Bt=Nt.getElementsByTagNameNS(kt,"Rect")[0]),It.push({Rect:{X:parseInt(Bt.getAttribute("X"),10),Y:parseInt(Bt.getAttribute("Y"),10),Width:parseInt(Bt.getAttribute("Width"),10),Height:parseInt(Bt.getAttribute("Height"),10),MinLevel:parseInt(Nt.getAttribute("MinLevel"),10),MaxLevel:parseInt(Nt.getAttribute("MaxLevel"),10)}});return It.length&&(Lt.Image.DisplayRect=It),it(st,Lt)}catch(Kt){throw Kt instanceof Error?Kt:new Error(nt.getString("Errors.Dzi"))}else{if(Et=="Collection")throw new Error(nt.getString("Errors.Dzc"));if(Et=="Error"){var Zt=xt.getElementsByTagName("Message")[0],Wt=Zt.firstChild.nodeValue;throw new Error(Wt)}}throw new Error(nt.getString("Errors.Dzi"))}function it(st,_t){var xt=_t.Image,Et=xt.Url,kt=xt.Format,Lt=xt.Size,It=xt.DisplayRect||[],Rt=parseInt(Lt.Width,10),Nt=parseInt(Lt.Height,10),Bt=parseInt(xt.TileSize,10),Ft=parseInt(xt.Overlap,10),Yt=[],Zt,Wt;for(Wt=0;Wt<It.length;Wt++)Zt=It[Wt].Rect,Yt.push(new nt.DisplayRect(parseInt(Zt.X,10),parseInt(Zt.Y,10),parseInt(Zt.Width,10),parseInt(Zt.Height,10),parseInt(Zt.MinLevel,10),parseInt(Zt.MaxLevel,10)));return nt.extend(!0,{width:Rt,height:Nt,tileSize:Bt,tileOverlap:Ft,minLevel:null,maxLevel:null,tilesUrl:Et,fileFormat:kt,displayRects:Yt},_t)}}(OpenSeadragon),function(nt){nt.IIIFTileSource=function(xt){if(nt.extend(!0,this,xt),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(xt.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=xt.version,this.tile_width&&this.tile_height)xt.tileWidth=this.tile_width,xt.tileHeight=this.tile_height;else if(this.tile_width)xt.tileSize=this.tile_width;else if(this.tile_height)xt.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)xt.tileWidth=this.tiles[0].width,xt.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var Et=0;Et<this.tiles.length;Et++)for(var kt=0;kt<this.tiles[Et].scaleFactors.length;kt++){var Lt=this.tiles[Et].scaleFactors[kt];this.scale_factors.push(Lt),xt.tileSizePerScaleFactor[Lt]={width:this.tiles[Et].width,height:this.tiles[Et].height||this.tiles[Et].width}}}else if(rt(xt)){for(var It=Math.min(this.height,this.width),Rt=[256,512,1024],Nt=[],Bt=0;Bt<Rt.length;Bt++)Rt[Bt]<=It&&Nt.push(Rt[Bt]);Nt.length>0?xt.tileSize=Math.max.apply(null,Nt):xt.tileSize=It}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,xt.levels=it(this),nt.extend(!0,xt,{width:xt.levels[xt.levels.length-1].width,height:xt.levels[xt.levels.length-1].height,tileSize:Math.max(xt.height,xt.width),tileOverlap:0,minLevel:0,maxLevel:xt.levels.length-1}),this.levels=xt.levels):nt.console.error("Nothing in the info.json to construct image pyramids from");if(!xt.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)xt.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var Ft=Math.max.apply(null,this.scale_factors);xt.maxLevel=Math.round(Math.log(Ft)*Math.LOG2E)}nt.TileSource.apply(this,[xt])},nt.extend(nt.IIIFTileSource.prototype,nt.TileSource.prototype,{supports:function(xt,Et){return xt.protocol&&xt.protocol=="http://iiif.io/api/image"||xt["@context"]&&(xt["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||xt["@context"]=="http://iiif.io/api/image/1/context.json")||xt.profile&&xt.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||xt.identifier&&xt.width&&xt.height?!0:!!(xt.documentElement&&xt.documentElement.tagName=="info"&&xt.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(xt,Et){if(nt.isPlainObject(xt)){if(!xt["@context"])xt["@context"]="http://iiif.io/api/image/1.0/context.json",xt["@id"]=Et.replace("/info.json",""),xt.version=1;else{var Lt=xt["@context"];if(Array.isArray(Lt)){for(var It=0;It<Lt.length;It++)if(typeof Lt[It]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(Lt[It])||Lt[It]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){Lt=Lt[It];break}}switch(Lt){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":xt.version=1;break;case"http://iiif.io/api/image/2/context.json":xt.version=2;break;case"http://iiif.io/api/image/3/context.json":xt.version=3;break;default:nt.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!xt["@id"]&&xt.id&&(xt["@id"]=xt.id),xt.preferredFormats){for(var Rt=0;Rt<xt.preferredFormats.length;Rt++)if(OpenSeadragon.imageFormatSupported(xt.preferredFormats[Rt])){xt.tileFormat=xt.preferredFormats[Rt];break}}return xt}else{var kt=st(xt);return kt["@context"]="http://iiif.io/api/image/1.0/context.json",kt["@id"]=Et.replace("/info.xml",""),kt.version=1,kt}},getTileWidth:function(xt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileWidth.call(this,xt);var Et=Math.pow(2,this.maxLevel-xt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Et]?this.tileSizePerScaleFactor[Et].width:this._tileWidth},getTileHeight:function(xt){if(this.emulateLegacyImagePyramid)return nt.TileSource.prototype.getTileHeight.call(this,xt);var Et=Math.pow(2,this.maxLevel-xt);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[Et]?this.tileSizePerScaleFactor[Et].height:this._tileHeight},getLevelScale:function(xt){if(this.emulateLegacyImagePyramid){var Et=NaN;return this.levels.length>0&&xt>=this.minLevel&&xt<=this.maxLevel&&(Et=this.levels[xt].width/this.levels[this.maxLevel].width),Et}return nt.TileSource.prototype.getLevelScale.call(this,xt)},getNumTiles:function(xt){if(this.emulateLegacyImagePyramid){var Et=this.getLevelScale(xt);return Et?new nt.Point(1,1):new nt.Point(0,0)}return nt.TileSource.prototype.getNumTiles.call(this,xt)},getTileAtPoint:function(xt,Et){return this.emulateLegacyImagePyramid?new nt.Point(0,0):nt.TileSource.prototype.getTileAtPoint.call(this,xt,Et)},getTileUrl:function(xt,Et,kt){if(this.emulateLegacyImagePyramid){var Lt=null;return this.levels.length>0&&xt>=this.minLevel&&xt<=this.maxLevel&&(Lt=this.levels[xt].url),Lt}var It="0",Rt=Math.pow(.5,this.maxLevel-xt),Nt=Math.ceil(this.width*Rt),Bt=Math.ceil(this.height*Rt),Ft,Yt,Zt,Wt,Kt,Jt,on,rn,ln,gn,wn,kn,Cn,Pn;return Ft=this.getTileWidth(xt),Yt=this.getTileHeight(xt),Zt=Math.ceil(Ft/Rt),Wt=Math.ceil(Yt/Rt),this.version===1?Cn="native."+this.tileFormat:Cn="default."+this.tileFormat,Nt<Ft&&Bt<Yt?(this.version===2&&Nt===this.width||this.version===3&&Nt===this.width&&Bt===this.height?gn="max":this.version===3?gn=Nt+","+Bt:gn=Nt+",",Kt="full"):(Jt=Et*Zt,on=kt*Wt,rn=Math.min(Zt,this.width-Jt),ln=Math.min(Wt,this.height-on),Et===0&&kt===0&&rn===this.width&&ln===this.height?Kt="full":Kt=[Jt,on,rn,ln].join(","),wn=Math.ceil(rn*Rt),kn=Math.ceil(ln*Rt),this.version===2&&wn===this.width||this.version===3&&wn===this.width&&kn===this.height?gn="max":this.version===3?gn=wn+","+kn:gn=wn+","),Pn=[this["@id"],Kt,gn,It,Cn].join("/"),Pn},__testonly__:{canBeTiled:rt,constructLevels:it}});function rt(xt){var Et=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],kt=Array.isArray(xt.profile)?xt.profile[0]:xt.profile,Lt=Et.indexOf(kt)!==-1,It=!1;return xt.version===2&&xt.profile.length>1&&xt.profile[1].supports&&(It=xt.profile[1].supports.indexOf("sizeByW")!==-1),xt.version===3&&xt.extraFeatures&&(It=xt.extraFeatures.indexOf("sizeByWh")!==-1),!Lt||It}function it(xt){for(var Et=[],kt=0;kt<xt.sizes.length;kt++)Et.push({url:xt["@id"]+"/full/"+xt.sizes[kt].width+","+(xt.version===3?xt.sizes[kt].height:"")+"/0/default."+xt.tileFormat,width:xt.sizes[kt].width,height:xt.sizes[kt].height});return Et.sort(function(Lt,It){return Lt.width-It.width})}function st(xt){if(!xt||!xt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Et=xt.documentElement,kt=Et.tagName,Lt=null;if(kt=="info")try{return Lt={},_t(Et,Lt),Lt}catch(It){throw It instanceof Error?It:new Error(nt.getString("Errors.IIIF"))}throw new Error(nt.getString("Errors.IIIF"))}function _t(xt,Et,kt){var Lt,It;if(xt.nodeType==3&&kt)It=xt.nodeValue.trim(),It.match(/^\d*$/)&&(It=Number(It)),Et[kt]?(nt.isArray(Et[kt])||(Et[kt]=[Et[kt]]),Et[kt].push(It)):Et[kt]=It;else if(xt.nodeType==1)for(Lt=0;Lt<xt.childNodes.length;Lt++)_t(xt.childNodes[Lt],Et,xt.nodeName)}}(OpenSeadragon),function(nt){nt.OsmTileSource=function(rt,it,st,_t,xt){var Et;nt.isPlainObject(rt)?Et=rt:Et={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!Et.width||!Et.height)&&(Et.width=65572864,Et.height=65572864),Et.tileSize||(Et.tileSize=256,Et.tileOverlap=0),Et.tilesUrl||(Et.tilesUrl="http://tile.openstreetmap.org/"),Et.minLevel=8,nt.TileSource.apply(this,[Et])},nt.extend(nt.OsmTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="openstreetmaps"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){return this.tilesUrl+(rt-8)+"/"+it+"/"+st+".png"}})}(OpenSeadragon),function(nt){nt.TmsTileSource=function(rt,it,st,_t,xt){var Et;nt.isPlainObject(rt)?Et=rt:Et={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var kt=Math.ceil(Et.width/256)*256,Lt=Math.ceil(Et.height/256)*256,It;kt>Lt?It=kt/256:It=Lt/256,Et.maxLevel=Math.ceil(Math.log(It)/Math.log(2))-1,Et.tileSize=256,Et.width=kt,Et.height=Lt,nt.TileSource.apply(this,[Et])},nt.extend(nt.TmsTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type=="tiledmapservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){var _t=this.getNumTiles(rt).y-1;return this.tilesUrl+rt+"/"+it+"/"+(_t-st)+".png"}})}(OpenSeadragon),function(nt){nt.ZoomifyTileSource=function(rt){rt.tileSize=256;var it={x:rt.width,y:rt.height};for(rt.imageSizes=[{x:rt.width,y:rt.height}],rt.gridSize=[this._getGridSize(rt.width,rt.height,rt.tileSize)];parseInt(it.x,10)>rt.tileSize||parseInt(it.y,10)>rt.tileSize;)it.x=Math.floor(it.x/2),it.y=Math.floor(it.y/2),rt.imageSizes.push({x:it.x,y:it.y}),rt.gridSize.push(this._getGridSize(it.x,it.y,rt.tileSize));rt.imageSizes.reverse(),rt.gridSize.reverse(),rt.minLevel=0,rt.maxLevel=rt.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[rt])},nt.extend(nt.ZoomifyTileSource.prototype,nt.TileSource.prototype,{_getGridSize:function(rt,it,st){return{x:Math.ceil(rt/st),y:Math.ceil(it/st)}},_calculateAbsoluteTileNumber:function(rt,it,st){for(var _t=0,xt={},Et=0;Et<rt;Et++)xt=this.gridSize[Et],_t+=xt.x*xt.y;return xt=this.gridSize[rt],_t+=xt.x*st+it,_t},supports:function(rt,it){return rt.type&&rt.type=="zoomifytileservice"},configure:function(rt,it){return rt},getTileUrl:function(rt,it,st){var _t=0,xt=this._calculateAbsoluteTileNumber(rt,it,st);return _t=Math.floor(xt/256),this.tilesUrl+"TileGroup"+_t+"/"+rt+"-"+it+"-"+st+".jpg"}})}(OpenSeadragon),function(nt){nt.LegacyTileSource=function(_t){var xt,Et,kt;nt.isArray(_t)&&(xt={type:"legacy-image-pyramid",levels:_t}),xt.levels=rt(xt.levels),xt.levels.length>0?(Et=xt.levels[xt.levels.length-1].width,kt=xt.levels[xt.levels.length-1].height):(Et=0,kt=0,nt.console.error("No supported image formats found")),nt.extend(!0,xt,{width:Et,height:kt,tileSize:Math.max(kt,Et),tileOverlap:0,minLevel:0,maxLevel:xt.levels.length>0?xt.levels.length-1:0}),nt.TileSource.apply(this,[xt]),this.levels=xt.levels},nt.extend(nt.LegacyTileSource.prototype,nt.TileSource.prototype,{supports:function(_t,xt){return _t.type&&_t.type=="legacy-image-pyramid"||_t.documentElement&&_t.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(_t,xt){var Et;return nt.isPlainObject(_t)?Et=st(this,_t):Et=it(this,_t),Et},getLevelScale:function(_t){var xt=NaN;return this.levels.length>0&&_t>=this.minLevel&&_t<=this.maxLevel&&(xt=this.levels[_t].width/this.levels[this.maxLevel].width),xt},getNumTiles:function(_t){var xt=this.getLevelScale(_t);return xt?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(_t,xt,Et){var kt=null;return this.levels.length>0&&_t>=this.minLevel&&_t<=this.maxLevel&&(kt=this.levels[_t].url),kt}});function rt(_t){var xt=[],Et,kt;for(kt=0;kt<_t.length;kt++)Et=_t[kt],Et.height&&Et.width&&Et.url?xt.push({url:Et.url,width:Number(Et.width),height:Number(Et.height)}):nt.console.error("Unsupported image format: %s",Et.url?Et.url:"<no URL>");return xt.sort(function(Lt,It){return Lt.height-It.height})}function it(_t,xt){if(!xt||!xt.documentElement)throw new Error(nt.getString("Errors.Xml"));var Et=xt.documentElement,kt=Et.tagName,Lt=null,It=[],Rt,Nt;if(kt=="image")try{for(Lt={type:Et.getAttribute("type"),levels:[]},It=Et.getElementsByTagName("level"),Nt=0;Nt<It.length;Nt++)Rt=It[Nt],Lt.levels.push({url:Rt.getAttribute("url"),width:parseInt(Rt.getAttribute("width"),10),height:parseInt(Rt.getAttribute("height"),10)});return st(_t,Lt)}catch(Bt){throw Bt instanceof Error?Bt:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(kt=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(kt=="error")throw new Error("Error: "+xt)}throw new Error("Unknown element "+kt)}function st(_t,xt){return xt.levels}}(OpenSeadragon),function(nt){nt.ImageTileSource=function(rt){rt=nt.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},rt),nt.TileSource.apply(this,[rt])},nt.extend(nt.ImageTileSource.prototype,nt.TileSource.prototype,{supports:function(rt,it){return rt.type&&rt.type==="image"},configure:function(rt,it){return rt},getImageInfo:function(rt){var it=this._image=new Image,st=this;this.crossOriginPolicy&&(it.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(it.useCredentials=this.ajaxWithCredentials),nt.addEvent(it,"load",function(){st.width=Object.prototype.hasOwnProperty.call(it,"naturalWidth")?it.naturalWidth:it.width,st.height=Object.prototype.hasOwnProperty.call(it,"naturalHeight")?it.naturalHeight:it.height,st.aspectRatio=st.width/st.height,st.dimensions=new nt.Point(st.width,st.height),st._tileWidth=st.width,st._tileHeight=st.height,st.tileOverlap=0,st.minLevel=0,st.levels=st._buildLevels(),st.maxLevel=st.levels.length-1,st.ready=!0,st.raiseEvent("ready",{tileSource:st})}),nt.addEvent(it,"error",function(){st.raiseEvent("open-failed",{message:"Error loading image at "+rt,source:rt})}),it.src=rt},getLevelScale:function(rt){var it=NaN;return rt>=this.minLevel&&rt<=this.maxLevel&&(it=this.levels[rt].width/this.levels[this.maxLevel].width),it},getNumTiles:function(rt){var it=this.getLevelScale(rt);return it?new nt.Point(1,1):new nt.Point(0,0)},getTileUrl:function(rt,it,st){var _t=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(_t=this.levels[rt].url),_t},getContext2D:function(rt,it,st){var _t=null;return rt>=this.minLevel&&rt<=this.maxLevel&&(_t=this.levels[rt].context2D),_t},_buildLevels:function(){var rt=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!nt.supportsCanvas||!this.useCanvas)return delete this._image,rt;var it=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,st=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,_t=document.createElement("canvas"),xt=_t.getContext("2d");if(_t.width=it,_t.height=st,xt.drawImage(this._image,0,0,it,st),rt[0].context2D=xt,delete this._image,nt.isCanvasTainted(_t))return rt;for(;it>=2&&st>=2;){it=Math.floor(it/2),st=Math.floor(st/2);var Et=document.createElement("canvas"),kt=Et.getContext("2d");Et.width=it,Et.height=st,kt.drawImage(_t,0,0,it,st),rt.splice(0,0,{context2D:kt,width:it,height:st}),_t=Et,xt=kt}return rt}})}(OpenSeadragon),function(nt){nt.TileSourceCollection=function(rt,it,st,_t){nt.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(nt){nt.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},nt.Button=function(kt){var Lt=this;nt.EventSource.call(this),nt.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},kt),this.element=kt.element||nt.makeNeutralElement("div"),kt.element||(this.imgRest=nt.makeTransparentImage(this.srcRest),this.imgGroup=nt.makeTransparentImage(this.srcGroup),this.imgHover=nt.makeTransparentImage(this.srcHover),this.imgDown=nt.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",nt.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",nt.Browser.vendor==nt.BROWSERS.FIREFOX&&nt.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=nt.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(It){It.insideElementPressed?(xt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("enter",{originalEvent:It.originalEvent})):It.buttonDownAny||xt(Lt,nt.ButtonState.HOVER)},focusHandler:function(It){this.enterHandler(It),Lt.raiseEvent("focus",{originalEvent:It.originalEvent})},exitHandler:function(It){Et(Lt,nt.ButtonState.GROUP),It.insideElementPressed&&Lt.raiseEvent("exit",{originalEvent:It.originalEvent})},blurHandler:function(It){this.exitHandler(It),Lt.raiseEvent("blur",{originalEvent:It.originalEvent})},pressHandler:function(It){xt(Lt,nt.ButtonState.DOWN),Lt.raiseEvent("press",{originalEvent:It.originalEvent})},releaseHandler:function(It){It.insideElementPressed&&It.insideElementReleased?(Et(Lt,nt.ButtonState.HOVER),Lt.raiseEvent("release",{originalEvent:It.originalEvent})):It.insideElementPressed?Et(Lt,nt.ButtonState.GROUP):xt(Lt,nt.ButtonState.HOVER)},clickHandler:function(It){It.quick&&Lt.raiseEvent("click",{originalEvent:It.originalEvent})},keyHandler:function(It){return It.keyCode===13?(Lt.raiseEvent("click",{originalEvent:It.originalEvent}),Lt.raiseEvent("release",{originalEvent:It.originalEvent}),!1):!0}}),Et(this,nt.ButtonState.REST)},nt.extend(nt.Button.prototype,nt.EventSource.prototype,{notifyGroupEnter:function(){xt(this,nt.ButtonState.GROUP)},notifyGroupExit:function(){Et(this,nt.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,nt.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,nt.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function rt(kt){nt.requestAnimationFrame(function(){it(kt)})}function it(kt){var Lt,It,Rt;kt.shouldFade&&(Lt=nt.now(),It=Lt-kt.fadeBeginTime,Rt=1-It/kt.fadeLength,Rt=Math.min(1,Rt),Rt=Math.max(0,Rt),kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,Rt,!0),Rt>0&&rt(kt))}function st(kt){kt.shouldFade=!0,kt.fadeBeginTime=nt.now()+kt.fadeDelay,window.setTimeout(function(){rt(kt)},kt.fadeDelay)}function _t(kt){kt.shouldFade=!1,kt.imgGroup&&nt.setElementOpacity(kt.imgGroup,1,!0)}function xt(kt,Lt){kt.element.disabled||(Lt>=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.REST&&(_t(kt),kt.currentState=nt.ButtonState.GROUP),Lt>=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.GROUP&&(kt.imgHover&&(kt.imgHover.style.visibility=""),kt.currentState=nt.ButtonState.HOVER),Lt>=nt.ButtonState.DOWN&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgDown&&(kt.imgDown.style.visibility=""),kt.currentState=nt.ButtonState.DOWN))}function Et(kt,Lt){kt.element.disabled||(Lt<=nt.ButtonState.HOVER&&kt.currentState==nt.ButtonState.DOWN&&(kt.imgDown&&(kt.imgDown.style.visibility="hidden"),kt.currentState=nt.ButtonState.HOVER),Lt<=nt.ButtonState.GROUP&&kt.currentState==nt.ButtonState.HOVER&&(kt.imgHover&&(kt.imgHover.style.visibility="hidden"),kt.currentState=nt.ButtonState.GROUP),Lt<=nt.ButtonState.REST&&kt.currentState==nt.ButtonState.GROUP&&(st(kt),kt.currentState=nt.ButtonState.REST))}}(OpenSeadragon),function(nt){nt.ButtonGroup=function(rt){nt.extend(!0,this,{buttons:[],clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:nt.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},rt);var it=this.buttons.concat([]),st=this,_t;if(this.element=rt.element||nt.makeNeutralElement("div"),!rt.group)for(this.element.style.display="inline-block",_t=0;_t<it.length;_t++)this.element.appendChild(it[_t].element);nt.setElementTouchActionNone(this.element),this.tracker=new nt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(xt){var Et;for(Et=0;Et<st.buttons.length;Et++)st.buttons[Et].notifyGroupEnter()},exitHandler:function(xt){var Et;if(!xt.insideElementPressed)for(Et=0;Et<st.buttons.length;Et++)st.buttons[Et].notifyGroupExit()}})},nt.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(nt){nt.Rect=function(rt,it,st,_t,xt){this.x=typeof rt=="number"?rt:0,this.y=typeof it=="number"?it:0,this.width=typeof st=="number"?st:0,this.height=typeof _t=="number"?_t:0,this.degrees=typeof xt=="number"?xt:0,this.degrees=nt.positiveModulo(this.degrees,360);var Et,kt;this.degrees>=270?(Et=this.getTopRight(),this.x=Et.x,this.y=Et.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=270):this.degrees>=180?(Et=this.getBottomRight(),this.x=Et.x,this.y=Et.y,this.degrees-=180):this.degrees>=90&&(Et=this.getBottomLeft(),this.x=Et.x,this.y=Et.y,kt=this.height,this.height=this.width,this.width=kt,this.degrees-=90)},nt.Rect.fromSummits=function(rt,it,st){var _t=rt.distanceTo(it),xt=rt.distanceTo(st),Et=it.minus(rt),kt=Math.atan(Et.y/Et.x);return Et.x<0?kt+=Math.PI:Et.y<0&&(kt+=2*Math.PI),new nt.Rect(rt.x,rt.y,_t,xt,kt/Math.PI*180)},nt.Rect.prototype={clone:function(){return new nt.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new nt.Point(this.x,this.y)},getBottomRight:function(){return new nt.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new nt.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new nt.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new nt.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new nt.Point(this.width,this.height)},equals:function(rt){return rt instanceof nt.Rect&&this.x===rt.x&&this.y===rt.y&&this.width===rt.width&&this.height===rt.height&&this.degrees===rt.degrees},times:function(rt){return new nt.Rect(this.x*rt,this.y*rt,this.width*rt,this.height*rt,this.degrees)},translate:function(rt){return new nt.Rect(this.x+rt.x,this.y+rt.y,this.width,this.height,this.degrees)},union:function(rt){var it=this.getBoundingBox(),st=rt.getBoundingBox(),_t=Math.min(it.x,st.x),xt=Math.min(it.y,st.y),Et=Math.max(it.x+it.width,st.x+st.width),kt=Math.max(it.y+it.height,st.y+st.height);return new nt.Rect(_t,xt,Et-_t,kt-xt)},intersection:function(rt){var it=1e-10,st=[],_t=this.getTopLeft();rt.containsPoint(_t,it)&&st.push(_t);var xt=this.getTopRight();rt.containsPoint(xt,it)&&st.push(xt);var Et=this.getBottomLeft();rt.containsPoint(Et,it)&&st.push(Et);var kt=this.getBottomRight();rt.containsPoint(kt,it)&&st.push(kt);var Lt=rt.getTopLeft();this.containsPoint(Lt,it)&&st.push(Lt);var It=rt.getTopRight();this.containsPoint(It,it)&&st.push(It);var Rt=rt.getBottomLeft();this.containsPoint(Rt,it)&&st.push(Rt);var Nt=rt.getBottomRight();this.containsPoint(Nt,it)&&st.push(Nt);for(var Bt=this._getSegments(),Ft=rt._getSegments(),Yt=0;Yt<Bt.length;Yt++)for(var Zt=Bt[Yt],Wt=0;Wt<Ft.length;Wt++){var Kt=Ft[Wt],Jt=on(Zt[0],Zt[1],Kt[0],Kt[1]);Jt&&st.push(Jt)}function on(Pn,An,cn,Ln){var an=An.minus(Pn),zn=Ln.minus(cn),dn=-zn.x*an.y+an.x*zn.y;if(dn===0)return null;var Fn=(an.x*(Pn.y-cn.y)-an.y*(Pn.x-cn.x))/dn,ir=(zn.x*(Pn.y-cn.y)-zn.y*(Pn.x-cn.x))/dn;return-it<=Fn&&Fn<=1-it&&-it<=ir&&ir<=1-it?new nt.Point(Pn.x+ir*an.x,Pn.y+ir*an.y):null}if(st.length===0)return null;for(var rn=st[0].x,ln=st[0].x,gn=st[0].y,wn=st[0].y,kn=1;kn<st.length;kn++){var Cn=st[kn];Cn.x<rn&&(rn=Cn.x),Cn.x>ln&&(ln=Cn.x),Cn.y<gn&&(gn=Cn.y),Cn.y>wn&&(wn=Cn.y)}return new nt.Rect(rn,gn,ln-rn,wn-gn)},_getSegments:function(){var rt=this.getTopLeft(),it=this.getTopRight(),st=this.getBottomLeft(),_t=this.getBottomRight();return[[rt,it],[it,_t],[_t,st],[st,rt]]},rotate:function(rt,it){if(rt=nt.positiveModulo(rt,360),rt===0)return this.clone();it=it||this.getCenter();var st=this.getTopLeft().rotate(rt,it),_t=this.getTopRight().rotate(rt,it),xt=_t.minus(st);xt=xt.apply(function(kt){var Lt=1e-15;return Math.abs(kt)<Lt?0:kt});var Et=Math.atan(xt.y/xt.x);return xt.x<0?Et+=Math.PI:xt.y<0&&(Et+=2*Math.PI),new nt.Rect(st.x,st.y,this.width,this.height,Et/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var rt=this.getTopLeft(),it=this.getTopRight(),st=this.getBottomLeft(),_t=this.getBottomRight(),xt=Math.min(rt.x,it.x,st.x,_t.x),Et=Math.max(rt.x,it.x,st.x,_t.x),kt=Math.min(rt.y,it.y,st.y,_t.y),Lt=Math.max(rt.y,it.y,st.y,_t.y);return new nt.Rect(xt,kt,Et-xt,Lt-kt)},getIntegerBoundingBox:function(){var rt=this.getBoundingBox(),it=Math.floor(rt.x),st=Math.floor(rt.y),_t=Math.ceil(rt.width+rt.x-it),xt=Math.ceil(rt.height+rt.y-st);return new nt.Rect(it,st,_t,xt)},containsPoint:function(rt,it){it=it||0;var st=this.getTopLeft(),_t=this.getTopRight(),xt=this.getBottomLeft(),Et=_t.minus(st),kt=xt.minus(st);return(rt.x-st.x)*Et.x+(rt.y-st.y)*Et.y>=-it&&(rt.x-_t.x)*Et.x+(rt.y-_t.y)*Et.y<=it&&(rt.x-st.x)*kt.x+(rt.y-st.y)*kt.y>=-it&&(rt.x-xt.x)*kt.x+(rt.y-xt.y)*kt.y<=it},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(nt){var rt={};nt.ReferenceStrip=function(It){var Rt=this,Nt=It.viewer,Bt=nt.getElementSize(Nt.element),Ft,Yt,Zt;for(It.id||(It.id="referencestrip-"+nt.now(),this.element=nt.makeNeutralElement("div"),this.element.id=It.id,this.element.className="referencestrip"),It=nt.extend(!0,{sizeRatio:nt.DEFAULT_SETTINGS.referenceStripSizeRatio,position:nt.DEFAULT_SETTINGS.referenceStripPosition,scroll:nt.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:nt.DEFAULT_SETTINGS.clickTimeThreshold},It,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),nt.extend(this,It),rt[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,Yt=this.element.style,Yt.marginTop="0px",Yt.marginRight="0px",Yt.marginBottom="0px",Yt.marginLeft="0px",Yt.left="0px",Yt.bottom="0px",Yt.border="0px",Yt.background="#000",Yt.position="relative",nt.setElementTouchActionNone(this.element),nt.setElementOpacity(this.element,.8),this.viewer=Nt,this.innerTracker=new nt.MouseTracker({element:this.element,dragHandler:nt.delegate(this,it),scrollHandler:nt.delegate(this,st),enterHandler:nt.delegate(this,xt),exitHandler:nt.delegate(this,Et),keyDownHandler:nt.delegate(this,kt),keyHandler:nt.delegate(this,Lt)}),It.width&&It.height?(this.element.style.width=It.width+"px",this.element.style.height=It.height+"px",Nt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):It.scroll=="horizontal"?(this.element.style.width=Bt.x*It.sizeRatio*Nt.tileSources.length+12*Nt.tileSources.length+"px",this.element.style.height=Bt.y*It.sizeRatio+"px",Nt.addControl(this.element,{anchor:nt.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=Bt.y*It.sizeRatio*Nt.tileSources.length+12*Nt.tileSources.length+"px",this.element.style.width=Bt.x*It.sizeRatio+"px",Nt.addControl(this.element,{anchor:nt.ControlAnchor.TOP_LEFT})),this.panelWidth=Bt.x*this.sizeRatio+8,this.panelHeight=Bt.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},Zt=0;Zt<Nt.tileSources.length;Zt++)Ft=nt.makeNeutralElement("div"),Ft.id=this.element.id+"-"+Zt,Ft.style.width=Rt.panelWidth+"px",Ft.style.height=Rt.panelHeight+"px",Ft.style.display="inline",Ft.style.float="left",Ft.style.cssFloat="left",Ft.style.styleFloat="left",Ft.style.padding="2px",nt.setElementTouchActionNone(Ft),Ft.innerTracker=new nt.MouseTracker({element:Ft,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(Wt){Wt.eventSource.dragging=nt.now()},releaseHandler:function(Wt){var Kt=Wt.eventSource,Jt=Kt.element.id,on=Number(Jt.split("-")[2]),rn=nt.now();Wt.insideElementPressed&&Wt.insideElementReleased&&Kt.dragging&&rn-Kt.dragging<Kt.clickTimeThreshold&&(Kt.dragging=null,Nt.goToPage(on))}}),this.element.appendChild(Ft),Ft.activePanel=!1,this.panels.push(Ft);_t(this,this.scroll=="vertical"?Bt.y:Bt.x,0),this.setFocus(0)},nt.extend(nt.ReferenceStrip.prototype,nt.EventSource.prototype,nt.Viewer.prototype,{setFocus:function(It){var Rt=this.element.querySelector("#"+this.element.id+"-"+It),Nt=nt.getElementSize(this.viewer.canvas),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=-Number(this.element.style.marginLeft.replace("px","")),Zt=-Number(this.element.style.marginTop.replace("px","")),Wt;this.currentSelected!==Rt&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=Rt,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(Wt=Number(It)*(this.panelWidth+3),Wt>Yt+Nt.x-this.panelWidth?(Wt=Math.min(Wt,Bt-Nt.x),this.element.style.marginLeft=-Wt+"px",_t(this,Nt.x,-Wt)):Wt<Yt&&(Wt=Math.max(0,Wt-Nt.x/2),this.element.style.marginLeft=-Wt+"px",_t(this,Nt.x,-Wt))):(Wt=Number(It)*(this.panelHeight+3),Wt>Zt+Nt.y-this.panelHeight?(Wt=Math.min(Wt,Ft-Nt.y),this.element.style.marginTop=-Wt+"px",_t(this,Nt.y,-Wt)):Wt<Zt&&(Wt=Math.max(0,Wt-Nt.y/2),this.element.style.marginTop=-Wt+"px",_t(this,Nt.y,-Wt))),this.currentPage=It,xt.call(this,{eventSource:this.innerTracker}))},update:function(){return rt[this.id].animating?(nt.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var It in this.miniViewers)this.miniViewers[It].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function it(It){var Rt=Number(this.element.style.marginLeft.replace("px","")),Nt=Number(this.element.style.marginTop.replace("px","")),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=nt.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-It.delta.x>0?Rt>-(Bt-Yt.x)&&(this.element.style.marginLeft=Rt+It.delta.x*2+"px",_t(this,Yt.x,Rt+It.delta.x*2)):-It.delta.x<0&&Rt<0&&(this.element.style.marginLeft=Rt+It.delta.x*2+"px",_t(this,Yt.x,Rt+It.delta.x*2)):-It.delta.y>0?Nt>-(Ft-Yt.y)&&(this.element.style.marginTop=Nt+It.delta.y*2+"px",_t(this,Yt.y,Nt+It.delta.y*2)):-It.delta.y<0&&Nt<0&&(this.element.style.marginTop=Nt+It.delta.y*2+"px",_t(this,Yt.y,Nt+It.delta.y*2))),!1}function st(It){var Rt=Number(this.element.style.marginLeft.replace("px","")),Nt=Number(this.element.style.marginTop.replace("px","")),Bt=Number(this.element.style.width.replace("px","")),Ft=Number(this.element.style.height.replace("px","")),Yt=nt.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?It.scroll>0?Rt>-(Bt-Yt.x)&&(this.element.style.marginLeft=Rt-It.scroll*60+"px",_t(this,Yt.x,Rt-It.scroll*60)):It.scroll<0&&Rt<0&&(this.element.style.marginLeft=Rt-It.scroll*60+"px",_t(this,Yt.x,Rt-It.scroll*60)):It.scroll<0?Nt>Yt.y-Ft&&(this.element.style.marginTop=Nt+It.scroll*60+"px",_t(this,Yt.y,Nt+It.scroll*60)):It.scroll>0&&Nt<0&&(this.element.style.marginTop=Nt+It.scroll*60+"px",_t(this,Yt.y,Nt+It.scroll*60))),!1}function _t(It,Rt,Nt){var Bt,Ft,Yt,Zt,Wt,Kt,Jt;for(It.scroll=="horizontal"?Bt=It.panelWidth:Bt=It.panelHeight,Ft=Math.ceil(Rt/Bt)+5,Yt=Math.ceil((Math.abs(Nt)+Rt)/Bt)+1,Ft=Yt-Ft,Ft=Ft<0?0:Ft,Kt=Ft;Kt<Yt&&Kt<It.panels.length;Kt++)if(Jt=It.panels[Kt],!Jt.activePanel){var on,rn=It.viewer.tileSources[Kt];rn.referenceStripThumbnailUrl?on={type:"image",url:rn.referenceStripThumbnailUrl}:on=rn,Zt=new nt.Viewer({id:Jt.id,tileSources:[on],element:Jt,navigatorSizeRatio:It.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:It.viewer.loadTilesWithAjax,ajaxHeaders:It.viewer.ajaxHeaders,useCanvas:It.useCanvas}),Zt.displayRegion=nt.makeNeutralElement("div"),Zt.displayRegion.id=Jt.id+"-displayregion",Zt.displayRegion.className="displayregion",Wt=Zt.displayRegion.style,Wt.position="relative",Wt.top="0px",Wt.left="0px",Wt.fontSize="0px",Wt.overflow="hidden",Wt.float="left",Wt.cssFloat="left",Wt.styleFloat="left",Wt.zIndex=999999999,Wt.cursor="default",Wt.width=It.panelWidth-4+"px",Wt.height=It.panelHeight-4+"px",Zt.displayRegion.innerTracker=new nt.MouseTracker({element:Zt.displayRegion,startDisabled:!0}),Jt.getElementsByTagName("div")[0].appendChild(Zt.displayRegion),It.miniViewers[Jt.id]=Zt,Jt.activePanel=!0}}function xt(It){var Rt=It.eventSource.element;return this.scroll=="horizontal"?Rt.style.marginBottom="0px":Rt.style.marginLeft="0px",!1}function Et(It){var Rt=It.eventSource.element;return this.scroll=="horizontal"?Rt.style.marginBottom="-"+nt.getElementSize(Rt).y/2+"px":Rt.style.marginLeft="-"+nt.getElementSize(Rt).x/2+"px",!1}function kt(It){if(!It.preventDefaultAction&&!It.ctrl&&!It.alt&&!It.meta)switch(It.keyCode){case 38:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function Lt(It){if(!It.preventDefaultAction&&!It.ctrl&&!It.alt&&!It.meta)switch(It.keyCode){case 61:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return st.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return st.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(nt){nt.DisplayRect=function(rt,it,st,_t,xt,Et){nt.Rect.apply(this,[rt,it,st,_t]),this.minLevel=xt,this.maxLevel=Et},nt.extend(nt.DisplayRect.prototype,nt.Rect.prototype)}(OpenSeadragon),function(nt){nt.Spring=function(it){var st=arguments;typeof it!="object"&&(it={initial:st.length&&typeof st[0]=="number"?st[0]:void 0,springStiffness:st.length>1?st[1].springStiffness:5,animationTime:st.length>1?st[1].animationTime:1.5}),nt.console.assert(typeof it.springStiffness=="number"&&it.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),nt.console.assert(typeof it.animationTime=="number"&&it.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),it.exponential&&(this._exponential=!0,delete it.exponential),nt.extend(!0,this,it),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:nt.now()},nt.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},nt.Spring.prototype={resetTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=it,this.start.time=this.target.time=this.current.time=nt.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(it){nt.console.assert(!this._exponential||it!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=it,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(it){this.start.value+=it,this.target.value+=it,this._exponential&&(nt.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(it){this._exponential=it,this._exponential&&(nt.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=nt.now();var it,st;this._exponential?(it=this.start._logValue,st=this.target._logValue):(it=this.start.value,st=this.target.value);var _t=this.current.time>=this.target.time?st:it+(st-it)*rt(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),xt=this.current.value;return this._exponential?this.current.value=Math.exp(_t):this.current.value=_t,xt!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function rt(it,st){return(1-Math.exp(it*-st))/(1-Math.exp(-it))}}(OpenSeadragon),function(nt){function rt(st){nt.extend(!0,this,{timeout:nt.DEFAULT_SETTINGS.timeout,jobId:null},st),this.image=null}rt.prototype={errorMsg:null,start:function(){var st=this,_t=this.abort;this.image=new Image,this.image.onload=function(){st.finish(!0)},this.image.onabort=this.image.onerror=function(){st.errorMsg="Image load aborted",st.finish(!1)},this.jobId=window.setTimeout(function(){st.errorMsg="Image load exceeded timeout ("+st.timeout+" ms)",st.finish(!1)},this.timeout),this.loadWithAjax?(this.request=nt.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(xt){var Et;try{Et=new window.Blob([xt.response])}catch(Rt){var kt=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(Rt.name==="TypeError"&&kt){var Lt=new kt;Lt.append(xt.response),Et=Lt.getBlob()}}Et.size===0&&(st.errorMsg="Empty image response.",st.finish(!1));var It=(window.URL||window.webkitURL).createObjectURL(Et);st.image.src=It},error:function(xt){st.errorMsg="Image load aborted - XHR error",st.finish(!1)}}),this.abort=function(){st.request.abort(),typeof _t=="function"&&_t()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(st){this.image.onload=this.image.onerror=this.image.onabort=null,st||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},nt.ImageLoader=function(st){nt.extend(!0,this,{jobLimit:nt.DEFAULT_SETTINGS.imageLoaderLimit,timeout:nt.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},st)},nt.ImageLoader.prototype={addJob:function(st){var _t=this,xt=function(Lt){it(_t,Lt,st.callback)},Et={src:st.src,loadWithAjax:st.loadWithAjax,ajaxHeaders:st.loadWithAjax?st.ajaxHeaders:null,crossOriginPolicy:st.crossOriginPolicy,ajaxWithCredentials:st.ajaxWithCredentials,callback:xt,abort:st.abort,timeout:this.timeout},kt=new rt(Et);!this.jobLimit||this.jobsInProgress<this.jobLimit?(kt.start(),this.jobsInProgress++):this.jobQueue.push(kt)},clear:function(){for(var st=0;st<this.jobQueue.length;st++){var _t=this.jobQueue[st];typeof _t.abort=="function"&&_t.abort()}this.jobQueue=[]}};function it(st,_t,xt){var Et;st.jobsInProgress--,(!st.jobLimit||st.jobsInProgress<st.jobLimit)&&st.jobQueue.length>0&&(Et=st.jobQueue.shift(),Et.start(),st.jobsInProgress++),xt(_t.image,_t.errorMsg,_t.request)}}(OpenSeadragon),function(nt){nt.Tile=function(rt,it,st,_t,xt,Et,kt,Lt,It,Rt){this.level=rt,this.x=it,this.y=st,this.bounds=_t,this.sourceBounds=Rt,this.exists=xt,this.url=Et,this.context2D=kt,this.loadWithAjax=Lt,this.ajaxHeaders=It,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},nt.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(rt){if(!this.cacheImageRecord){nt.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=nt.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=rt&&rt.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",nt.setElementOpacity(this.element,this.opacity)},drawCanvas:function(rt,it,st,_t){var xt=this.position.times(nt.pixelDensityRatio),Et=this.size.times(nt.pixelDensityRatio),kt;if(!this.context2D&&!this.cacheImageRecord){nt.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(kt=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!kt){nt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}rt.save(),rt.globalAlpha=this.opacity,typeof st=="number"&&st!==1&&(xt=xt.times(st),Et=Et.times(st)),_t instanceof nt.Point&&(xt=xt.plus(_t)),rt.globalAlpha===1&&this._hasTransparencyChannel()&&rt.clearRect(xt.x,xt.y,Et.x,Et.y),it({context:rt,tile:this,rendered:kt});var Lt,It;this.sourceBounds?(Lt=Math.min(this.sourceBounds.width,kt.canvas.width),It=Math.min(this.sourceBounds.height,kt.canvas.height)):(Lt=kt.canvas.width,It=kt.canvas.height),rt.drawImage(kt.canvas,0,0,Lt,It,xt.x,xt.y,Et.x,Et.y),rt.restore()},getScaleForEdgeSmoothing:function(){var rt;if(this.cacheImageRecord)rt=this.cacheImageRecord.getRenderedContext();else if(this.context2D)rt=this.context2D;else return nt.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return rt.canvas.width/(this.size.x*nt.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(rt,it,st){var _t=Math.max(1,Math.ceil((st.x-it.x)/2)),xt=Math.max(1,Math.ceil((st.y-it.y)/2));return new nt.Point(_t,xt).minus(this.position.times(nt.pixelDensityRatio).times(rt||1).apply(function(Et){return Et%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(nt){nt.OverlayPlacement=nt.Placement,nt.OverlayRotationMode=nt.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),nt.Overlay=function(rt,it,st){var _t;nt.isPlainObject(rt)?_t=rt:_t={element:rt,location:it,placement:st},this.element=_t.element,this.style=_t.element.style,this._init(_t)},nt.Overlay.prototype={_init:function(rt){this.location=rt.location,this.placement=rt.placement===void 0?nt.Placement.TOP_LEFT:rt.placement,this.onDraw=rt.onDraw,this.checkResize=rt.checkResize===void 0?!0:rt.checkResize,this.width=rt.width===void 0?null:rt.width,this.height=rt.height===void 0?null:rt.height,this.rotationMode=rt.rotationMode||nt.OverlayRotationMode.EXACT,this.location instanceof nt.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=nt.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new nt.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(rt,it){var st=nt.Placement.properties[this.placement];!st||(st.isHorizontallyCentered?rt.x-=it.x/2:st.isRight&&(rt.x-=it.x),st.isVerticallyCentered?rt.y-=it.y/2:st.isBottom&&(rt.y-=it.y))},destroy:function(){var rt=this.element,it=this.style;rt.parentNode&&(rt.parentNode.removeChild(rt),rt.prevElementParent&&(it.display="none",document.body.appendChild(rt))),this.onDraw=null,it.top="",it.left="",it.position="",this.width!==null&&(it.width=""),this.height!==null&&(it.height="");var st=nt.getCssPropertyWithVendorPrefix("transformOrigin"),_t=nt.getCssPropertyWithVendorPrefix("transform");st&&_t&&(it[st]="",it[_t]="")},drawHTML:function(rt,it){var st=this.element;st.parentNode!==rt&&(st.prevElementParent=st.parentNode,st.prevNextSibling=st.nextSibling,rt.appendChild(st),this.style.position="absolute",this.size=nt.getElementSize(st));var _t=this._getOverlayPositionAndSize(it),xt=_t.position,Et=this.size=_t.size,kt=_t.rotate;if(this.onDraw)this.onDraw(xt,Et,this.element);else{var Lt=this.style;Lt.left=xt.x+"px",Lt.top=xt.y+"px",this.width!==null&&(Lt.width=Et.x+"px"),this.height!==null&&(Lt.height=Et.y+"px");var It=nt.getCssPropertyWithVendorPrefix("transformOrigin"),Rt=nt.getCssPropertyWithVendorPrefix("transform");It&&Rt&&(kt?(Lt[It]=this._getTransformOrigin(),Lt[Rt]="rotate("+kt+"deg)"):(Lt[It]="",Lt[Rt]="")),Lt.display!=="none"&&(Lt.display="block")}},_getOverlayPositionAndSize:function(rt){var it=rt.pixelFromPoint(this.location,!0),st=this._getSizeInPixels(rt);this.adjust(it,st);var _t=0;if(rt.degrees&&this.rotationMode!==nt.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var xt=new nt.Rect(it.x,it.y,st.x,st.y),Et=this._getBoundingBox(xt,rt.degrees);it=Et.getTopLeft(),st=Et.getSize()}else _t=rt.degrees;return{position:it,size:st,rotate:_t}},_getSizeInPixels:function(rt){var it=this.size.x,st=this.size.y;if(this.width!==null||this.height!==null){var _t=rt.deltaPixelsFromPointsNoRotate(new nt.Point(this.width||0,this.height||0),!0);this.width!==null&&(it=_t.x),this.height!==null&&(st=_t.y)}if(this.checkResize&&(this.width===null||this.height===null)){var xt=this.size=nt.getElementSize(this.element);this.width===null&&(it=xt.x),this.height===null&&(st=xt.y)}return new nt.Point(it,st)},_getBoundingBox:function(rt,it){var st=this._getPlacementPoint(rt);return rt.rotate(it,st).getBoundingBox()},_getPlacementPoint:function(rt){var it=new nt.Point(rt.x,rt.y),st=nt.Placement.properties[this.placement];return st&&(st.isHorizontallyCentered?it.x+=rt.width/2:st.isRight&&(it.x+=rt.width),st.isVerticallyCentered?it.y+=rt.height/2:st.isBottom&&(it.y+=rt.height)),it},_getTransformOrigin:function(){var rt="",it=nt.Placement.properties[this.placement];return it&&(it.isLeft?rt="left":it.isRight&&(rt="right"),it.isTop?rt+=" top":it.isBottom&&(rt+=" bottom")),rt},update:function(rt,it){var st=nt.isPlainObject(rt)?rt:{location:rt,placement:it};this._init({location:st.location||this.location,placement:st.placement!==void 0?st.placement:this.placement,onDraw:st.onDraw||this.onDraw,checkResize:st.checkResize||this.checkResize,width:st.width!==void 0?st.width:this.width,height:st.height!==void 0?st.height:this.height,rotationMode:st.rotationMode||this.rotationMode})},getBounds:function(rt){nt.console.assert(rt,"A viewport must now be passed to Overlay.getBounds.");var it=this.width,st=this.height;if(it===null||st===null){var _t=rt.deltaPointsFromPixelsNoRotate(this.size,!0);it===null&&(it=_t.x),st===null&&(st=_t.y)}var xt=this.location.clone();return this.adjust(xt,new nt.Point(it,st)),this._adjustBoundsForRotation(rt,new nt.Rect(xt.x,xt.y,it,st))},_adjustBoundsForRotation:function(rt,it){if(!rt||rt.degrees===0||this.rotationMode===nt.OverlayRotationMode.EXACT)return it;if(this.rotationMode===nt.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return it;var st=this._getOverlayPositionAndSize(rt);return rt.viewerElementToViewportRectangle(new nt.Rect(st.position.x,st.position.y,st.size.x,st.size.y))}return it.rotate(-rt.degrees,this._getPlacementPoint(it))}}}(OpenSeadragon),function(nt){nt.Drawer=function(rt){nt.console.assert(rt.viewer,"[Drawer] options.viewer is required");var it=arguments;if(nt.isPlainObject(rt)||(rt={source:it[0],viewport:it[1],element:it[2]}),nt.console.assert(rt.viewport,"[Drawer] options.viewport is required"),nt.console.assert(rt.element,"[Drawer] options.element is required"),rt.source&&nt.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=rt.viewer,this.viewport=rt.viewport,this.debugGridColor=typeof rt.debugGridColor=="string"?[rt.debugGridColor]:rt.debugGridColor||nt.DEFAULT_SETTINGS.debugGridColor,rt.opacity&&nt.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=nt.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=nt.getElement(rt.element),this.canvas=nt.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var st=this._calculateCanvasSize();this.canvas.width=st.x,this.canvas.height=st.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",nt.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},nt.Drawer.prototype={addOverlay:function(rt,it,st,_t){return nt.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(rt,it,st,_t),this},updateOverlay:function(rt,it,st){return nt.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(rt,it,st),this},removeOverlay:function(rt){return nt.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(rt),this},clearOverlays:function(){return nt.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt,!0);return new nt.Point(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio)},clipWithPolygons:function(rt,it){if(!!this.useCanvas){var st=this._getContext(it);st.beginPath(),rt.forEach(function(_t){_t.forEach(function(xt,Et){st[Et===0?"moveTo":"lineTo"](xt.x,xt.y)})}),st.clip()}},setOpacity:function(rt){nt.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var it=this.viewer.world,st=0;st<it.getItemCount();st++)it.getItemAt(st).setOpacity(rt);return this},getOpacity:function(){nt.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var rt=this.viewer.world,it=0,st=0;st<rt.getItemCount();st++){var _t=rt.getItemAt(st).getOpacity();_t>it&&(it=_t)}return it},needsUpdate:function(){return nt.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return nt.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return nt.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return nt.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var rt=this._calculateCanvasSize();if((this.canvas.width!=rt.x||this.canvas.height!=rt.y)&&(this.canvas.width=rt.x,this.canvas.height=rt.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var it=this._calculateSketchCanvasSize();this.sketchCanvas.width=it.x,this.sketchCanvas.height=it.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(rt,it){if(!!this.useCanvas){var st=this._getContext(rt);if(it)st.clearRect(it.x,it.y,it.width,it.height);else{var _t=st.canvas;st.clearRect(0,0,_t.width,_t.height)}}},viewportToDrawerRectangle:function(rt){var it=this.viewport.pixelFromPointNoRotate(rt.getTopLeft(),!0),st=this.viewport.deltaPixelsFromPointsNoRotate(rt.getSize(),!0);return new nt.Rect(it.x*nt.pixelDensityRatio,it.y*nt.pixelDensityRatio,st.x*nt.pixelDensityRatio,st.y*nt.pixelDensityRatio)},drawTile:function(rt,it,st,_t,xt){if(nt.console.assert(rt,"[Drawer.drawTile] tile is required"),nt.console.assert(it,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var Et=this._getContext(st);_t=_t||1,rt.drawCanvas(Et,it,_t,xt)}else rt.drawHTML(this.canvas)},_getContext:function(rt){var it=this.context;if(rt){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var st=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=st.x,this.sketchCanvas.height=st.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var _t=this;this.viewer.addHandler("rotate",function xt(){if(_t.viewport.getRotation()!==0){_t.viewer.removeHandler("rotate",xt);var Et=_t._calculateSketchCanvasSize();_t.sketchCanvas.width=Et.x,_t.sketchCanvas.height=Et.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}it=this.sketchContext}return it},saveContext:function(rt){!this.useCanvas||this._getContext(rt).save()},restoreContext:function(rt){!this.useCanvas||this._getContext(rt).restore()},setClip:function(rt,it){if(!!this.useCanvas){var st=this._getContext(it);st.beginPath(),st.rect(rt.x,rt.y,rt.width,rt.height),st.clip()}},drawRectangle:function(rt,it,st){if(!!this.useCanvas){var _t=this._getContext(st);_t.save(),_t.fillStyle=it,_t.fillRect(rt.x,rt.y,rt.width,rt.height),_t.restore()}},blendSketch:function(rt,it,st,_t){var xt=rt;if(nt.isPlainObject(xt)||(xt={opacity:rt,scale:it,translate:st,compositeOperation:_t}),!(!this.useCanvas||!this.sketchCanvas)){rt=xt.opacity,_t=xt.compositeOperation;var Et=xt.bounds;if(this.context.save(),this.context.globalAlpha=rt,_t&&(this.context.globalCompositeOperation=_t),Et)Et.x<0&&(Et.width+=Et.x,Et.x=0),Et.x+Et.width>this.canvas.width&&(Et.width=this.canvas.width-Et.x),Et.y<0&&(Et.height+=Et.y,Et.y=0),Et.y+Et.height>this.canvas.height&&(Et.height=this.canvas.height-Et.y),this.context.drawImage(this.sketchCanvas,Et.x,Et.y,Et.width,Et.height,Et.x,Et.y,Et.width,Et.height);else{it=xt.scale||1,st=xt.translate;var kt=st instanceof nt.Point?st:new nt.Point(0,0),Lt=0,It=0;if(st){var Rt=this.sketchCanvas.width-this.canvas.width,Nt=this.sketchCanvas.height-this.canvas.height;Lt=Math.round(Rt/2),It=Math.round(Nt/2)}this.context.drawImage(this.sketchCanvas,kt.x-Lt*it,kt.y-It*it,(this.canvas.width+2*Lt)*it,(this.canvas.height+2*It)*it,-Lt,-It,this.canvas.width+2*Lt,this.canvas.height+2*It)}this.context.restore()}},drawDebugInfo:function(rt,it,st,_t){if(!!this.useCanvas){var xt=this.viewer.world.getIndexOfItem(_t)%this.debugGridColor.length,Et=this.context;Et.save(),Et.lineWidth=2*nt.pixelDensityRatio,Et.font="small-caps bold "+13*nt.pixelDensityRatio+"px arial",Et.strokeStyle=this.debugGridColor[xt],Et.fillStyle=this.debugGridColor[xt],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),_t.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:_t.getRotation(!0),point:_t.viewport.pixelFromPointNoRotate(_t._getRotationPoint(!0),!0)}),_t.viewport.degrees===0&&_t.getRotation(!0)%360===0&&_t._drawer.viewer.viewport.getFlip()&&_t._drawer._flip(),Et.strokeRect(rt.position.x*nt.pixelDensityRatio,rt.position.y*nt.pixelDensityRatio,rt.size.x*nt.pixelDensityRatio,rt.size.y*nt.pixelDensityRatio);var kt=(rt.position.x+rt.size.x/2)*nt.pixelDensityRatio,Lt=(rt.position.y+rt.size.y/2)*nt.pixelDensityRatio;Et.translate(kt,Lt),Et.rotate(Math.PI/180*-this.viewport.degrees),Et.translate(-kt,-Lt),rt.x===0&&rt.y===0&&(Et.fillText("Zoom: "+this.viewport.getZoom(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-30)*nt.pixelDensityRatio),Et.fillText("Pan: "+this.viewport.getBounds().toString(),rt.position.x*nt.pixelDensityRatio,(rt.position.y-20)*nt.pixelDensityRatio)),Et.fillText("Level: "+rt.level,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+20)*nt.pixelDensityRatio),Et.fillText("Column: "+rt.x,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+30)*nt.pixelDensityRatio),Et.fillText("Row: "+rt.y,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+40)*nt.pixelDensityRatio),Et.fillText("Order: "+st+" of "+it,(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+50)*nt.pixelDensityRatio),Et.fillText("Size: "+rt.size.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+60)*nt.pixelDensityRatio),Et.fillText("Position: "+rt.position.toString(),(rt.position.x+10)*nt.pixelDensityRatio,(rt.position.y+70)*nt.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),_t.getRotation(!0)%360!==0&&this._restoreRotationChanges(),_t.viewport.degrees===0&&_t.getRotation(!0)%360===0&&_t._drawer.viewer.viewport.getFlip()&&_t._drawer._flip(),Et.restore()}},debugRect:function(rt){if(this.useCanvas){var it=this.context;it.save(),it.lineWidth=2*nt.pixelDensityRatio,it.strokeStyle=this.debugGridColor[0],it.fillStyle=this.debugGridColor[0],it.strokeRect(rt.x*nt.pixelDensityRatio,rt.y*nt.pixelDensityRatio,rt.width*nt.pixelDensityRatio,rt.height*nt.pixelDensityRatio),it.restore()}},setImageSmoothingEnabled:function(rt){this.useCanvas&&(this._imageSmoothingEnabled=rt,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(rt){rt.msImageSmoothingEnabled=this._imageSmoothingEnabled,rt.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(rt){var it=this._getContext(rt).canvas;return new nt.Point(it.width,it.height)},getCanvasCenter:function(){return new nt.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(rt){var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),st=this._getContext(rt.useSketch);st.save(),st.translate(it.x,it.y),this.viewer.viewport.flipped?(st.rotate(Math.PI/180*-rt.degrees),st.scale(-1,1)):st.rotate(Math.PI/180*rt.degrees),st.translate(-it.x,-it.y)},_flip:function(rt){rt=rt||{};var it=rt.point?rt.point.times(nt.pixelDensityRatio):this.getCanvasCenter(),st=this._getContext(rt.useSketch);st.translate(it.x,0),st.scale(-1,1),st.translate(-it.x,0)},_restoreRotationChanges:function(rt){var it=this._getContext(rt);it.restore()},_calculateCanvasSize:function(){var rt=nt.pixelDensityRatio,it=this.viewport.getContainerSize();return{x:Math.round(it.x*rt),y:Math.round(it.y*rt)}},_calculateSketchCanvasSize:function(){var rt=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return rt;var it=Math.ceil(Math.sqrt(rt.x*rt.x+rt.y*rt.y));return{x:it,y:it}}}}(OpenSeadragon),function(nt){nt.Viewport=function(rt){var it=arguments;it.length&&it[0]instanceof nt.Point&&(rt={containerSize:it[0],contentSize:it[1],config:it[2]}),rt.config&&(nt.extend(!0,rt,rt.config),delete rt.config),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt.margins||{}),delete rt.margins,nt.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:nt.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:nt.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:nt.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:nt.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:nt.DEFAULT_SETTINGS.maxZoomLevel,degrees:nt.DEFAULT_SETTINGS.degrees,flipped:nt.DEFAULT_SETTINGS.flipped,homeFillsViewer:nt.DEFAULT_SETTINGS.homeFillsViewer},rt),this._updateContainerInnerSize(),this.centerSpringX=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new nt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new nt.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new nt.Rect(0,0,1,1),1),this.goHome(!0),this.update()},nt.Viewport.prototype={resetContentSize:function(rt){return nt.console.assert(rt,"[Viewport.resetContentSize] contentSize is required"),nt.console.assert(rt instanceof nt.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),nt.console.assert(rt.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),nt.console.assert(rt.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new nt.Rect(0,0,1,rt.y/rt.x),rt.x),this},setHomeBounds:function(rt,it){nt.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(rt,it)},_setContentBounds:function(rt,it){nt.console.assert(rt,"[Viewport._setContentBounds] bounds is required"),nt.console.assert(rt instanceof nt.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),nt.console.assert(rt.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),nt.console.assert(rt.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=rt.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(it),this._contentBounds=rt.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(it),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:it,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var rt=this._contentAspectRatio/this.getAspectRatio(),it;return this.homeFillsViewer?it=rt>=1?rt:1:it=rt>=1?1:rt,it/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var rt=this._contentBounds.getCenter(),it=1/this.getHomeZoom(),st=it/this.getAspectRatio();return new nt.Rect(rt.x-it/2,rt.y-st/2,it,st)},goHome:function(rt){return this.viewer&&this.viewer.raiseEvent("home",{immediately:rt}),this.fitBounds(this.getHomeBounds(),rt)},getMinZoom:function(){var rt=this.getHomeZoom(),it=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*rt;return it},getMaxZoom:function(){var rt=this.maxZoomLevel;return rt||(rt=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,rt/=this._contentBounds.width),Math.max(rt,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new nt.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return nt.extend({},this._margins)},setMargins:function(rt){nt.console.assert(nt.type(rt)==="object","[Viewport.setMargins] margins must be an object"),this._margins=nt.extend({left:0,top:0,right:0,bottom:0},rt),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(rt){return this.getBoundsNoRotate(rt).rotate(-this.getRotation())},getBoundsNoRotate:function(rt){var it=this.getCenter(rt),st=1/this.getZoom(rt),_t=st/this.getAspectRatio();return new nt.Rect(it.x-st/2,it.y-_t/2,st,_t)},getBoundsWithMargins:function(rt){return this.getBoundsNoRotateWithMargins(rt).rotate(-this.getRotation(),this.getCenter(rt))},getBoundsNoRotateWithMargins:function(rt){var it=this.getBoundsNoRotate(rt),st=this._containerInnerSize.x*this.getZoom(rt);return it.x-=this._margins.left/st,it.y-=this._margins.top/st,it.width+=(this._margins.left+this._margins.right)/st,it.height+=(this._margins.top+this._margins.bottom)/st,it},getCenter:function(rt){var it=new nt.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),st=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),_t,xt,Et,kt,Lt,It,Rt,Nt;return rt?it:this.zoomPoint?(_t=this.pixelFromPoint(this.zoomPoint,!0),xt=this.getZoom(),Et=1/xt,kt=Et/this.getAspectRatio(),Lt=new nt.Rect(it.x-Et/2,it.y-kt/2,Et,kt),It=this._pixelFromPoint(this.zoomPoint,Lt),Rt=It.minus(_t),Nt=Rt.divide(this._containerInnerSize.x*xt),st.plus(Nt)):st},getZoom:function(rt){return rt?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(rt){return Math.max(Math.min(rt,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(rt){var it=new nt.Rect(rt.x,rt.y,rt.width,rt.height);if(!this.wrapHorizontal){var st=this.visibilityRatio*it.width,_t=it.x+it.width,xt=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,Et=this._contentBoundsNoRotate.x-_t+st,kt=xt-it.x-st;st>this._contentBoundsNoRotate.width?it.x+=(Et+kt)/2:kt<0?it.x+=kt:Et>0&&(it.x+=Et)}if(!this.wrapVertical){var Lt=this.visibilityRatio*it.height,It=it.y+it.height,Rt=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,Nt=this._contentBoundsNoRotate.y-It+Lt,Bt=Rt-it.y-Lt;Lt>this._contentBoundsNoRotate.height?it.y+=(Nt+Bt)/2:Bt<0?it.y+=Bt:Nt>0&&(it.y+=Nt)}return it},_raiseConstraintsEvent:function(rt){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:rt})},applyConstraints:function(rt){var it=this.getZoom(),st=this._applyZoomConstraints(it);it!==st&&this.zoomTo(st,this.zoomPoint,rt);var _t=this.getBoundsNoRotate(),xt=this._applyBoundaryConstraints(_t);return this._raiseConstraintsEvent(rt),(_t.x!==xt.x||_t.y!==xt.y||rt)&&this.fitBounds(xt.rotate(-this.getRotation()),rt),this},ensureVisible:function(rt){return this.applyConstraints(rt)},_fitBounds:function(rt,it){it=it||{};var st=it.immediately||!1,_t=it.constraints||!1,xt=this.getAspectRatio(),Et=rt.getCenter(),kt=new nt.Rect(rt.x,rt.y,rt.width,rt.height,rt.degrees+this.getRotation()).getBoundingBox();kt.getAspectRatio()>=xt?kt.height=kt.width/xt:kt.width=kt.height*xt,kt.x=Et.x-kt.width/2,kt.y=Et.y-kt.height/2;var Lt=1/kt.width;if(_t){var It=kt.getAspectRatio(),Rt=this._applyZoomConstraints(Lt);Lt!==Rt&&(Lt=Rt,kt.width=1/Lt,kt.x=Et.x-kt.width/2,kt.height=kt.width/It,kt.y=Et.y-kt.height/2),kt=this._applyBoundaryConstraints(kt),Et=kt.getCenter(),this._raiseConstraintsEvent(st)}if(st)return this.panTo(Et,!0),this.zoomTo(Lt,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var Nt=this.getBounds(),Bt=this.getZoom();if(Bt===0||Math.abs(Lt/Bt-1)<1e-8)return this.zoomTo(Lt,!0),this.panTo(Et,st);kt=kt.rotate(-this.getRotation());var Ft=kt.getTopLeft().times(Lt).minus(Nt.getTopLeft().times(Bt)).divide(Lt-Bt);return this.zoomTo(Lt,Ft,st)},fitBounds:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!1})},fitBoundsWithConstraints:function(rt,it){return this._fitBounds(rt,{immediately:it,constraints:!0})},fitVertically:function(rt){var it=new nt.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(it,rt)},fitHorizontally:function(rt){var it=new nt.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(it,rt)},getConstrainedBounds:function(rt){var it,st;return it=this.getBounds(rt),st=this._applyBoundaryConstraints(it),st},panBy:function(rt,it){var st=new nt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(st.plus(rt),it)},panTo:function(rt,it){return it?(this.centerSpringX.resetTo(rt.x),this.centerSpringY.resetTo(rt.y)):(this.centerSpringX.springTo(rt.x),this.centerSpringY.springTo(rt.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:rt,immediately:it}),this},zoomBy:function(rt,it,st){return this.zoomTo(this.zoomSpring.target.value*rt,it,st)},zoomTo:function(rt,it,st){var _t=this;return this.zoomPoint=it instanceof nt.Point&&!isNaN(it.x)&&!isNaN(it.y)?it:null,st?this._adjustCenterSpringsForZoomPoint(function(){_t.zoomSpring.resetTo(rt)}):this.zoomSpring.springTo(rt),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:rt,refPoint:it,immediately:st}),this},setRotation:function(rt){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=nt.positiveModulo(rt,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:rt}),this)},getRotation:function(){return this.degrees},resize:function(rt,it){var st=this.getBoundsNoRotate(),_t=st,xt;return this.containerSize.x=rt.x,this.containerSize.y=rt.y,this._updateContainerInnerSize(),it&&(xt=rt.x/this.containerSize.x,_t.width=st.width*xt,_t.height=_t.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:rt,maintain:it}),this.fitBounds(_t,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new nt.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var rt=this;this._adjustCenterSpringsForZoomPoint(function(){rt.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var it=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,it},_adjustCenterSpringsForZoomPoint:function(rt){if(this.zoomPoint){var it=this.pixelFromPoint(this.zoomPoint,!0);rt();var st=this.pixelFromPoint(this.zoomPoint,!0),_t=st.minus(it),xt=this.deltaPointsFromPixels(_t,!0);this.centerSpringX.shiftBy(xt.x),this.centerSpringY.shiftBy(xt.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else rt()},deltaPixelsFromPointsNoRotate:function(rt,it){return rt.times(this._containerInnerSize.x*this.getZoom(it))},deltaPixelsFromPoints:function(rt,it){return this.deltaPixelsFromPointsNoRotate(rt.rotate(this.getRotation()),it)},deltaPointsFromPixelsNoRotate:function(rt,it){return rt.divide(this._containerInnerSize.x*this.getZoom(it))},deltaPointsFromPixels:function(rt,it){return this.deltaPointsFromPixelsNoRotate(rt,it).rotate(-this.getRotation())},pixelFromPointNoRotate:function(rt,it){return this._pixelFromPointNoRotate(rt,this.getBoundsNoRotate(it))},pixelFromPoint:function(rt,it){return this._pixelFromPoint(rt,this.getBoundsNoRotate(it))},_pixelFromPointNoRotate:function(rt,it){return rt.minus(it.getTopLeft()).times(this._containerInnerSize.x/it.width).plus(new nt.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(rt,it){return this._pixelFromPointNoRotate(rt.rotate(this.getRotation(),this.getCenter(!0)),it)},pointFromPixelNoRotate:function(rt,it){var st=this.getBoundsNoRotate(it);return rt.minus(new nt.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/st.width).plus(st.getTopLeft())},pointFromPixel:function(rt,it){return this.pointFromPixelNoRotate(rt,it).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(rt,it){var st=this._contentBoundsNoRotate.width;return new nt.Point(rt*this._contentSizeNoRotate.x/st,it*this._contentSizeNoRotate.x/st)},viewportToImageCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.viewportToImageCoordinates(rt.x,rt.y);if(this.viewer){var st=this.viewer.world.getItemCount();if(st>1)nt.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(st===1){var _t=this.viewer.world.getItemAt(0);return _t.viewportToImageCoordinates(rt,it,!0)}}return this._viewportToImageDelta(rt-this._contentBoundsNoRotate.x,it-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(rt,it){var st=this._contentBoundsNoRotate.width;return new nt.Point(rt/this._contentSizeNoRotate.x*st,it/this._contentSizeNoRotate.x*st)},imageToViewportCoordinates:function(rt,it){if(rt instanceof nt.Point)return this.imageToViewportCoordinates(rt.x,rt.y);if(this.viewer){var st=this.viewer.world.getItemCount();if(st>1)nt.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(st===1){var _t=this.viewer.world.getItemAt(0);return _t.imageToViewportCoordinates(rt,it,!0)}}var xt=this._imageToViewportDelta(rt,it);return xt.x+=this._contentBoundsNoRotate.x,xt.y+=this._contentBoundsNoRotate.y,xt},imageToViewportRectangle:function(rt,it,st,_t){var xt=rt;if(xt instanceof nt.Rect||(xt=new nt.Rect(rt,it,st,_t)),this.viewer){var Et=this.viewer.world.getItemCount();if(Et>1)nt.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(Et===1){var kt=this.viewer.world.getItemAt(0);return kt.imageToViewportRectangle(rt,it,st,_t,!0)}}var Lt=this.imageToViewportCoordinates(xt.x,xt.y),It=this._imageToViewportDelta(xt.width,xt.height);return new nt.Rect(Lt.x,Lt.y,It.x,It.y,xt.degrees)},viewportToImageRectangle:function(rt,it,st,_t){var xt=rt;if(xt instanceof nt.Rect||(xt=new nt.Rect(rt,it,st,_t)),this.viewer){var Et=this.viewer.world.getItemCount();if(Et>1)nt.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(Et===1){var kt=this.viewer.world.getItemAt(0);return kt.viewportToImageRectangle(rt,it,st,_t,!0)}}var Lt=this.viewportToImageCoordinates(xt.x,xt.y),It=this._viewportToImageDelta(xt.width,xt.height);return new nt.Rect(Lt.x,Lt.y,It.x,It.y,xt.degrees)},viewerElementToImageCoordinates:function(rt){var it=this.pointFromPixel(rt,!0);return this.viewportToImageCoordinates(it)},imageToViewerElementCoordinates:function(rt){var it=this.imageToViewportCoordinates(rt);return this.pixelFromPoint(it,!0)},windowToImageCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(it)},imageToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var it=this.imageToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(rt){return this.pointFromPixel(rt,!0)},viewportToViewerElementCoordinates:function(rt){return this.pixelFromPoint(rt,!0)},viewerElementToViewportRectangle:function(rt){return nt.Rect.fromSummits(this.pointFromPixel(rt.getTopLeft(),!0),this.pointFromPixel(rt.getTopRight(),!0),this.pointFromPixel(rt.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(rt){return nt.Rect.fromSummits(this.pixelFromPoint(rt.getTopLeft(),!0),this.pixelFromPoint(rt.getTopRight(),!0),this.pixelFromPoint(rt.getBottomLeft(),!0))},windowToViewportCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var it=rt.minus(nt.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(it)},viewportToWindowCoordinates:function(rt){nt.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var it=this.viewportToViewerElementCoordinates(rt);return it.plus(nt.getElementPosition(this.viewer.element))},viewportToImageZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(it===1){var st=this.viewer.world.getItemAt(0);return st.viewportToImageZoom(rt)}}var _t=this._contentSizeNoRotate.x,xt=this._containerInnerSize.x,Et=this._contentBoundsNoRotate.width,kt=xt/_t*Et;return rt*kt},imageToViewportZoom:function(rt){if(this.viewer){var it=this.viewer.world.getItemCount();if(it>1)nt.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(it===1){var st=this.viewer.world.getItemAt(0);return st.imageToViewportZoom(rt)}}var _t=this._contentSizeNoRotate.x,xt=this._containerInnerSize.x,Et=this._contentBoundsNoRotate.width,kt=_t/xt/Et;return rt*kt},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(rt){return this.flipped===rt?this:(this.flipped=rt,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:rt}),this)}}}(OpenSeadragon),function(nt){nt.TiledImage=function(Wt){var Kt=this;nt.console.assert(Wt.tileCache,"[TiledImage] options.tileCache is required"),nt.console.assert(Wt.drawer,"[TiledImage] options.drawer is required"),nt.console.assert(Wt.viewer,"[TiledImage] options.viewer is required"),nt.console.assert(Wt.imageLoader,"[TiledImage] options.imageLoader is required"),nt.console.assert(Wt.source,"[TiledImage] options.source is required"),nt.console.assert(!Wt.clip||Wt.clip instanceof nt.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),nt.EventSource.call(this),this._tileCache=Wt.tileCache,delete Wt.tileCache,this._drawer=Wt.drawer,delete Wt.drawer,this._imageLoader=Wt.imageLoader,delete Wt.imageLoader,Wt.clip instanceof nt.Rect&&(this._clip=Wt.clip.clone()),delete Wt.clip;var Jt=Wt.x||0;delete Wt.x;var on=Wt.y||0;delete Wt.y,this.normHeight=Wt.source.dimensions.y/Wt.source.dimensions.x,this.contentAspectX=Wt.source.dimensions.x/Wt.source.dimensions.y;var rn=1;Wt.width?(rn=Wt.width,delete Wt.width,Wt.height&&(nt.console.error("specifying both width and height to a tiledImage is not supported"),delete Wt.height)):Wt.height&&(rn=Wt.height/this.normHeight,delete Wt.height);var ln=Wt.fitBounds;delete Wt.fitBounds;var gn=Wt.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete Wt.fitBoundsPlacement;var wn=Wt.degrees||0;delete Wt.degrees,nt.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:nt.DEFAULT_SETTINGS.springStiffness,animationTime:nt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:nt.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:nt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:nt.DEFAULT_SETTINGS.wrapVertical,immediateRender:nt.DEFAULT_SETTINGS.immediateRender,blendTime:nt.DEFAULT_SETTINGS.blendTime,alwaysBlend:nt.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:nt.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:nt.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:nt.DEFAULT_SETTINGS.iOSDevice,debugMode:nt.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:nt.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:nt.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:nt.DEFAULT_SETTINGS.placeholderFillStyle,opacity:nt.DEFAULT_SETTINGS.opacity,preload:nt.DEFAULT_SETTINGS.preload,compositeOperation:nt.DEFAULT_SETTINGS.compositeOperation},Wt),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new nt.Spring({initial:Jt,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new nt.Spring({initial:on,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new nt.Spring({initial:rn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new nt.Spring({initial:wn,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),ln&&this.fitBounds(ln,gn,!0),this._drawingHandler=function(kn){Kt.viewer.raiseEvent("tile-drawing",nt.extend({tiledImage:Kt},kn))}},nt.extend(nt.TiledImage.prototype,nt.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(Wt){Wt!==this._fullyLoaded&&(this._fullyLoaded=Wt,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=nt.now(),this._needsDraw=!0},update:function(){var Wt=this._xSpring.update(),Kt=this._ySpring.update(),Jt=this._scaleSpring.update(),on=this._degreesSpring.update();return Wt||Kt||Jt||on?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(Wt){return this.getBoundsNoRotate(Wt).rotate(this.getRotation(Wt),this._getRotationPoint(Wt))},getBoundsNoRotate:function(Wt){return Wt?new nt.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new nt.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return nt.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(Wt){var Kt=this.getBoundsNoRotate(Wt);if(this._clip){var Jt=Wt?this._worldWidthCurrent:this._worldWidthTarget,on=Jt/this.source.dimensions.x,rn=this._clip.times(on);Kt=new nt.Rect(Kt.x+rn.x,Kt.y+rn.y,rn.width,rn.height)}return Kt.rotate(this.getRotation(Wt),this._getRotationPoint(Wt))},getContentSize:function(){return new nt.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(Wt,Kt,Jt){var on=Jt?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Wt*(this.source.dimensions.x/on),Kt*(this.source.dimensions.y*this.contentAspectX/on))},viewportToImageCoordinates:function(Wt,Kt,Jt){var on;return Wt instanceof nt.Point?(Jt=Kt,on=Wt):on=new nt.Point(Wt,Kt),on=on.rotate(-this.getRotation(Jt),this._getRotationPoint(Jt)),Jt?this._viewportToImageDelta(on.x-this._xSpring.current.value,on.y-this._ySpring.current.value):this._viewportToImageDelta(on.x-this._xSpring.target.value,on.y-this._ySpring.target.value)},_imageToViewportDelta:function(Wt,Kt,Jt){var on=Jt?this._scaleSpring.current.value:this._scaleSpring.target.value;return new nt.Point(Wt/this.source.dimensions.x*on,Kt/this.source.dimensions.y/this.contentAspectX*on)},imageToViewportCoordinates:function(Wt,Kt,Jt){Wt instanceof nt.Point&&(Jt=Kt,Kt=Wt.y,Wt=Wt.x);var on=this._imageToViewportDelta(Wt,Kt);return Jt?(on.x+=this._xSpring.current.value,on.y+=this._ySpring.current.value):(on.x+=this._xSpring.target.value,on.y+=this._ySpring.target.value),on.rotate(this.getRotation(Jt),this._getRotationPoint(Jt))},imageToViewportRectangle:function(Wt,Kt,Jt,on,rn){var ln=Wt;ln instanceof nt.Rect?rn=Kt:ln=new nt.Rect(Wt,Kt,Jt,on);var gn=this.imageToViewportCoordinates(ln.getTopLeft(),rn),wn=this._imageToViewportDelta(ln.width,ln.height,rn);return new nt.Rect(gn.x,gn.y,wn.x,wn.y,ln.degrees+this.getRotation(rn))},viewportToImageRectangle:function(Wt,Kt,Jt,on,rn){var ln=Wt;Wt instanceof nt.Rect?rn=Kt:ln=new nt.Rect(Wt,Kt,Jt,on);var gn=this.viewportToImageCoordinates(ln.getTopLeft(),rn),wn=this._viewportToImageDelta(ln.width,ln.height,rn);return new nt.Rect(gn.x,gn.y,wn.x,wn.y,ln.degrees-this.getRotation(rn))},viewerElementToImageCoordinates:function(Wt){var Kt=this.viewport.pointFromPixel(Wt,!0);return this.viewportToImageCoordinates(Kt)},imageToViewerElementCoordinates:function(Wt){var Kt=this.imageToViewportCoordinates(Wt);return this.viewport.pixelFromPoint(Kt,!0)},windowToImageCoordinates:function(Wt){var Kt=Wt.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Kt)},imageToWindowCoordinates:function(Wt){var Kt=this.imageToViewerElementCoordinates(Wt);return Kt.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(Wt){var Kt=this._scaleSpring.current.value;return Wt=Wt.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new nt.Rect((Wt.x-this._xSpring.current.value)/Kt,(Wt.y-this._ySpring.current.value)/Kt,Wt.width/Kt,Wt.height/Kt,Wt.degrees)},viewportToImageZoom:function(Wt){var Kt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Kt*Wt},imageToViewportZoom:function(Wt){var Kt=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Wt/Kt},setPosition:function(Wt,Kt){var Jt=this._xSpring.target.value===Wt.x&&this._ySpring.target.value===Wt.y;if(Kt){if(Jt&&this._xSpring.current.value===Wt.x&&this._ySpring.current.value===Wt.y)return;this._xSpring.resetTo(Wt.x),this._ySpring.resetTo(Wt.y),this._needsDraw=!0}else{if(Jt)return;this._xSpring.springTo(Wt.x),this._ySpring.springTo(Wt.y),this._needsDraw=!0}Jt||this._raiseBoundsChange()},setWidth:function(Wt,Kt){this._setScale(Wt,Kt)},setHeight:function(Wt,Kt){this._setScale(Wt/this.normHeight,Kt)},setCroppingPolygons:function(Wt){var Kt=function(on){return on instanceof nt.Point||typeof on.x=="number"&&typeof on.y=="number"},Jt=function(on){return on.map(function(rn){try{if(Kt(rn))return{x:rn.x,y:rn.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!nt.isArray(Wt))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=Wt.map(function(on){return Jt(on)})}catch(on){nt.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),nt.console.error(on),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(Wt,Kt,Jt){Kt=Kt||nt.Placement.CENTER;var on=nt.Placement.properties[Kt],rn=this.contentAspectX,ln=0,gn=0,wn=1,kn=1;if(this._clip&&(rn=this._clip.getAspectRatio(),wn=this._clip.width/this.source.dimensions.x,kn=this._clip.height/this.source.dimensions.y,Wt.getAspectRatio()>rn?(ln=this._clip.x/this._clip.height*Wt.height,gn=this._clip.y/this._clip.height*Wt.height):(ln=this._clip.x/this._clip.width*Wt.width,gn=this._clip.y/this._clip.width*Wt.width)),Wt.getAspectRatio()>rn){var Cn=Wt.height/kn,Pn=0;on.isHorizontallyCentered?Pn=(Wt.width-Wt.height*rn)/2:on.isRight&&(Pn=Wt.width-Wt.height*rn),this.setPosition(new nt.Point(Wt.x-ln+Pn,Wt.y-gn),Jt),this.setHeight(Cn,Jt)}else{var An=Wt.width/wn,cn=0;on.isVerticallyCentered?cn=(Wt.height-Wt.width/rn)/2:on.isBottom&&(cn=Wt.height-Wt.width/rn),this.setPosition(new nt.Point(Wt.x-ln,Wt.y-gn+cn),Jt),this.setWidth(An,Jt)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(Wt){nt.console.assert(!Wt||Wt instanceof nt.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),Wt instanceof nt.Rect?this._clip=Wt.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(Wt){Wt!==this.opacity&&(this.opacity=Wt,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(Wt){this._preload=!!Wt,this._needsDraw=!0},getRotation:function(Wt){return Wt?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(Wt,Kt){this._degreesSpring.target.value===Wt&&this._degreesSpring.isAtTargetValue()||(Kt?this._degreesSpring.resetTo(Wt):this._degreesSpring.springTo(Wt),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(Wt){return this.getBoundsNoRotate(Wt).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(Wt){Wt!==this.compositeOperation&&(this.compositeOperation=Wt,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(Wt,Kt){var Jt=this._scaleSpring.target.value===Wt;if(Kt){if(Jt&&this._scaleSpring.current.value===Wt)return;this._scaleSpring.resetTo(Wt),this._updateForScale(),this._needsDraw=!0}else{if(Jt)return;this._scaleSpring.springTo(Wt),this._updateForScale(),this._needsDraw=!0}Jt||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var Wt=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),Kt=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,Jt=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(Kt/this.minPixelRatio)/Math.log(2))));return Jt=Math.max(Jt,this.source.minLevel||0),Wt=Math.min(Wt,Jt),{lowestLevel:Wt,highestLevel:Jt}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var Wt=this.lastDrawn.pop();Wt.beingDrawn=!1}var Kt=this.viewport,Jt=this._viewportToTiledImageRectangle(Kt.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var on=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(Jt=Jt.intersection(on),Jt===null)return}for(var rn=this._getLevelsInterval(),ln=rn.lowestLevel,gn=rn.highestLevel,wn=null,kn=!1,Cn=nt.now(),Pn=gn;Pn>=ln;Pn--){var An=!1,cn=Kt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Pn),!0).x*this._scaleSpring.current.value;if(Pn===ln||!kn&&cn>=this.minPixelRatio)An=!0,kn=!0;else if(!kn)continue;var Ln=Kt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Pn),!1).x*this._scaleSpring.current.value,an=Kt.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,zn=this.immediateRender?1:an,dn=Math.min(1,(cn-.5)/.5),Fn=zn/Math.abs(zn-Ln);if(wn=rt(this,kn,An,Pn,dn,Fn,Jt,Cn,wn),It(this.coverage,Pn))break}Yt(this,this.lastDrawn),wn&&!wn.context2D?(_t(this,wn,Cn),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(Wt,Kt,Jt){var on,rn;this.wrapHorizontal?(on=nt.positiveModulo(Kt.x,1),rn=nt.positiveModulo(Jt.x,1)):(on=Math.max(0,Kt.x),rn=Math.min(1,Jt.x));var ln,gn,wn=1/this.source.aspectRatio;this.wrapVertical?(ln=nt.positiveModulo(Kt.y,wn),gn=nt.positiveModulo(Jt.y,wn)):(ln=Math.max(0,Kt.y),gn=Math.min(wn,Jt.y));var kn=this.source.getTileAtPoint(Wt,new nt.Point(on,ln)),Cn=this.source.getTileAtPoint(Wt,new nt.Point(rn,gn)),Pn=this.source.getNumTiles(Wt);return this.wrapHorizontal&&(kn.x+=Pn.x*Math.floor(Kt.x),Cn.x+=Pn.x*Math.floor(Jt.x)),this.wrapVertical&&(kn.y+=Pn.y*Math.floor(Kt.y/wn),Cn.y+=Pn.y*Math.floor(Jt.y/wn)),{topLeft:kn,bottomRight:Cn}}});function rt(Wt,Kt,Jt,on,rn,ln,gn,wn,kn){var Cn=gn.getBoundingBox().getTopLeft(),Pn=gn.getBoundingBox().getBottomRight();Wt.viewer&&Wt.viewer.raiseEvent("update-level",{tiledImage:Wt,havedrawn:Kt,level:on,opacity:rn,visibility:ln,drawArea:gn,topleft:Cn,bottomright:Pn,currenttime:wn,best:kn}),Bt(Wt.coverage,on),Bt(Wt.loadingCoverage,on);for(var An=Wt._getCornerTiles(on,Cn,Pn),cn=An.topLeft,Ln=An.bottomRight,an=Wt.source.getNumTiles(on),zn=Wt.viewport.pixelFromPoint(Wt.viewport.getCenter()),dn=cn.x;dn<=Ln.x;dn++)for(var Fn=cn.y;Fn<=Ln.y;Fn++){if(!Wt.wrapHorizontal&&!Wt.wrapVertical){var ir=Wt.source.getTileBounds(on,dn,Fn);if(gn.intersection(ir)===null)continue}kn=it(Wt,Jt,Kt,dn,Fn,on,rn,ln,zn,an,wn,kn)}return kn}function it(Wt,Kt,Jt,on,rn,ln,gn,wn,kn,Cn,Pn,An){var cn=st(on,rn,ln,Wt,Wt.source,Wt.tilesMatrix,Pn,Cn,Wt._worldWidthCurrent,Wt._worldHeightCurrent),Ln=Jt;Wt.viewer&&Wt.viewer.raiseEvent("update-tile",{tiledImage:Wt,tile:cn}),Nt(Wt.coverage,ln,on,rn,!1);var an=cn.loaded||cn.loading||Rt(Wt.loadingCoverage,ln,on,rn);if(Nt(Wt.loadingCoverage,ln,on,rn,an),!cn.exists||(Kt&&!Ln&&(Rt(Wt.coverage,ln,on,rn)?Nt(Wt.coverage,ln,on,rn,!0):Ln=!0),!Ln))return An;if(kt(cn,Wt.source.tileOverlap,Wt.viewport,kn,wn,Wt),!cn.loaded)if(cn.context2D)Et(Wt,cn);else{var zn=Wt._tileCache.getImageRecord(cn.cacheKey);if(zn){var dn=zn.getImage();Et(Wt,cn,dn)}}if(cn.loaded){var Fn=Lt(Wt,cn,on,rn,ln,gn,Pn);Fn&&(Wt._needsDraw=!0)}else cn.loading?Wt._tilesLoading++:an||(An=Ft(An,cn));return An}function st(Wt,Kt,Jt,on,rn,ln,gn,wn,kn,Cn){var Pn,An,cn,Ln,an,zn,dn,Fn,ir;return ln[Jt]||(ln[Jt]={}),ln[Jt][Wt]||(ln[Jt][Wt]={}),ln[Jt][Wt][Kt]||(Pn=(wn.x+Wt%wn.x)%wn.x,An=(wn.y+Kt%wn.y)%wn.y,cn=rn.getTileBounds(Jt,Pn,An),Ln=rn.getTileBounds(Jt,Pn,An,!0),an=rn.tileExists(Jt,Pn,An),zn=rn.getTileUrl(Jt,Pn,An),on.loadTilesWithAjax?(dn=rn.getTileAjaxHeaders(Jt,Pn,An),nt.isPlainObject(on.ajaxHeaders)&&(dn=nt.extend({},on.ajaxHeaders,dn))):dn=null,Fn=rn.getContext2D?rn.getContext2D(Jt,Pn,An):void 0,cn.x+=(Wt-Pn)/wn.x,cn.y+=Cn/kn*((Kt-An)/wn.y),ir=new nt.Tile(Jt,Wt,Kt,cn,an,zn,Fn,on.loadTilesWithAjax,dn,Ln),Pn===wn.x-1&&(ir.isRightMost=!0),An===wn.y-1&&(ir.isBottomMost=!0),ln[Jt][Wt][Kt]=ir),ir=ln[Jt][Wt][Kt],ir.lastTouchTime=gn,ir}function _t(Wt,Kt,Jt){Kt.loading=!0,Wt._imageLoader.addJob({src:Kt.url,loadWithAjax:Kt.loadWithAjax,ajaxHeaders:Kt.ajaxHeaders,crossOriginPolicy:Wt.crossOriginPolicy,ajaxWithCredentials:Wt.ajaxWithCredentials,callback:function(on,rn,ln){xt(Wt,Kt,Jt,on,rn,ln)},abort:function(){Kt.loading=!1}})}function xt(Wt,Kt,Jt,on,rn,ln){if(!on){nt.console.log("Tile %s failed to load: %s - error: %s",Kt,Kt.url,rn),Wt.viewer.raiseEvent("tile-load-failed",{tile:Kt,tiledImage:Wt,time:Jt,message:rn,tileRequest:ln}),Kt.loading=!1,Kt.exists=!1;return}if(Jt<Wt.lastResetTime){nt.console.log("Ignoring tile %s loaded before reset: %s",Kt,Kt.url),Kt.loading=!1;return}var gn=function(){var wn=Wt.source.getClosestLevel();Et(Wt,Kt,on,wn,ln)};Wt._midDraw?window.setTimeout(gn,1):gn()}function Et(Wt,Kt,Jt,on,rn){var ln=0;function gn(){return ln++,wn}function wn(){ln--,ln===0&&(Kt.loading=!1,Kt.loaded=!0,Kt.context2D||Wt._tileCache.cacheTile({image:Jt,tile:Kt,cutoff:on,tiledImage:Wt}),Wt._needsDraw=!0)}Wt.viewer.raiseEvent("tile-loaded",{tile:Kt,tiledImage:Wt,tileRequest:rn,image:Jt,getCompletionCallback:gn}),gn()()}function kt(Wt,Kt,Jt,on,rn,ln){var gn=Wt.bounds.getTopLeft();gn.x*=ln._scaleSpring.current.value,gn.y*=ln._scaleSpring.current.value,gn.x+=ln._xSpring.current.value,gn.y+=ln._ySpring.current.value;var wn=Wt.bounds.getSize();wn.x*=ln._scaleSpring.current.value,wn.y*=ln._scaleSpring.current.value;var kn=Jt.pixelFromPointNoRotate(gn,!0),Cn=Jt.pixelFromPointNoRotate(gn,!1),Pn=Jt.deltaPixelsFromPointsNoRotate(wn,!0),An=Jt.deltaPixelsFromPointsNoRotate(wn,!1),cn=Cn.plus(An.divide(2)),Ln=on.squaredDistanceTo(cn);Kt||(Pn=Pn.plus(new nt.Point(1,1))),Wt.isRightMost&&ln.wrapHorizontal&&(Pn.x+=.75),Wt.isBottomMost&&ln.wrapVertical&&(Pn.y+=.75),Wt.position=kn,Wt.size=Pn,Wt.squaredDistance=Ln,Wt.visibility=rn}function Lt(Wt,Kt,Jt,on,rn,ln,gn){var wn=1e3*Wt.blendTime,kn,Cn;if(Kt.blendStart||(Kt.blendStart=gn),kn=gn-Kt.blendStart,Cn=wn?Math.min(1,kn/wn):1,Wt.alwaysBlend&&(Cn*=ln),Kt.opacity=Cn,Wt.lastDrawn.push(Kt),Cn===1)Nt(Wt.coverage,rn,Jt,on,!0),Wt._hasOpaqueTile=!0;else if(kn<wn)return!0;return!1}function It(Wt,Kt,Jt,on){var rn,ln,gn,wn;if(!Wt[Kt])return!1;if(Jt===void 0||on===void 0){rn=Wt[Kt];for(gn in rn)if(Object.prototype.hasOwnProperty.call(rn,gn)){ln=rn[gn];for(wn in ln)if(Object.prototype.hasOwnProperty.call(ln,wn)&&!ln[wn])return!1}return!0}return Wt[Kt][Jt]===void 0||Wt[Kt][Jt][on]===void 0||Wt[Kt][Jt][on]===!0}function Rt(Wt,Kt,Jt,on){return Jt===void 0||on===void 0?It(Wt,Kt+1):It(Wt,Kt+1,2*Jt,2*on)&&It(Wt,Kt+1,2*Jt,2*on+1)&&It(Wt,Kt+1,2*Jt+1,2*on)&&It(Wt,Kt+1,2*Jt+1,2*on+1)}function Nt(Wt,Kt,Jt,on,rn){if(!Wt[Kt]){nt.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",Kt);return}Wt[Kt][Jt]||(Wt[Kt][Jt]={}),Wt[Kt][Jt][on]=rn}function Bt(Wt,Kt){Wt[Kt]={}}function Ft(Wt,Kt){return!Wt||Kt.visibility>Wt.visibility||Kt.visibility==Wt.visibility&&Kt.squaredDistance<Wt.squaredDistance?Kt:Wt}function Yt(Wt,Kt){if(!(Wt.opacity===0||Kt.length===0&&!Wt.placeholderFillStyle)){var Jt=Kt[0],on;Jt&&(on=Wt.opacity<1||Wt.compositeOperation&&Wt.compositeOperation!=="source-over"||!Wt._isBottomItem()&&Jt._hasTransparencyChannel());var rn,ln,gn=Wt.viewport.getZoom(!0),wn=Wt.viewportToImageZoom(gn);Kt.length>1&&wn>Wt.smoothTileEdgesMinZoom&&!Wt.iOSDevice&&Wt.getRotation(!0)%360===0&&nt.supportsCanvas&&(on=!0,rn=Jt.getScaleForEdgeSmoothing(),ln=Jt.getTranslationForEdgeSmoothing(rn,Wt._drawer.getCanvasSize(!1),Wt._drawer.getCanvasSize(!0)));var kn;on&&(rn||(kn=Wt.viewport.viewportToViewerElementRectangle(Wt.getClippedBounds(!0)).getIntegerBoundingBox(),Wt._drawer.viewer.viewport.getFlip()&&(Wt.viewport.degrees!==0||Wt.getRotation(!0)%360!==0)&&(kn.x=Wt._drawer.viewer.container.clientWidth-(kn.x+kn.width)),kn=kn.times(nt.pixelDensityRatio)),Wt._drawer._clear(!0,kn)),rn||(Wt.viewport.degrees!==0&&Wt._drawer._offsetForRotation({degrees:Wt.viewport.degrees,useSketch:on}),Wt.getRotation(!0)%360!==0&&Wt._drawer._offsetForRotation({degrees:Wt.getRotation(!0),point:Wt.viewport.pixelFromPointNoRotate(Wt._getRotationPoint(!0),!0),useSketch:on}),Wt.viewport.degrees===0&&Wt.getRotation(!0)%360===0&&Wt._drawer.viewer.viewport.getFlip()&&Wt._drawer._flip());var Cn=!1;if(Wt._clip){Wt._drawer.saveContext(on);var Pn=Wt.imageToViewportRectangle(Wt._clip,!0);Pn=Pn.rotate(-Wt.getRotation(!0),Wt._getRotationPoint(!0));var An=Wt._drawer.viewportToDrawerRectangle(Pn);rn&&(An=An.times(rn)),ln&&(An=An.translate(ln)),Wt._drawer.setClip(An,on),Cn=!0}if(Wt._croppingPolygons){Wt._drawer.saveContext(on);try{var cn=Wt._croppingPolygons.map(function(dn){return dn.map(function(Fn){var ir=Wt.imageToViewportCoordinates(Fn.x,Fn.y,!0).rotate(-Wt.getRotation(!0),Wt._getRotationPoint(!0)),tr=Wt._drawer.viewportCoordToDrawerCoord(ir);return rn&&(tr=tr.times(rn)),tr})});Wt._drawer.clipWithPolygons(cn,on)}catch(dn){nt.console.error(dn)}Cn=!0}if(Wt.placeholderFillStyle&&Wt._hasOpaqueTile===!1){var Ln=Wt._drawer.viewportToDrawerRectangle(Wt.getBounds(!0));rn&&(Ln=Ln.times(rn)),ln&&(Ln=Ln.translate(ln));var an=null;typeof Wt.placeholderFillStyle=="function"?an=Wt.placeholderFillStyle(Wt,Wt._drawer.context):an=Wt.placeholderFillStyle,Wt._drawer.drawRectangle(Ln,an,on)}for(var zn=Kt.length-1;zn>=0;zn--)Jt=Kt[zn],Wt._drawer.drawTile(Jt,Wt._drawingHandler,on,rn,ln),Jt.beingDrawn=!0,Wt.viewer&&Wt.viewer.raiseEvent("tile-drawn",{tiledImage:Wt,tile:Jt});Cn&&Wt._drawer.restoreContext(on),rn||(Wt.getRotation(!0)%360!==0&&Wt._drawer._restoreRotationChanges(on),Wt.viewport.degrees!==0&&Wt._drawer._restoreRotationChanges(on)),on&&(rn&&(Wt.viewport.degrees!==0&&Wt._drawer._offsetForRotation({degrees:Wt.viewport.degrees,useSketch:!1}),Wt.getRotation(!0)%360!==0&&Wt._drawer._offsetForRotation({degrees:Wt.getRotation(!0),point:Wt.viewport.pixelFromPointNoRotate(Wt._getRotationPoint(!0),!0),useSketch:!1})),Wt._drawer.blendSketch({opacity:Wt.opacity,scale:rn,translate:ln,compositeOperation:Wt.compositeOperation,bounds:kn}),rn&&(Wt.getRotation(!0)%360!==0&&Wt._drawer._restoreRotationChanges(!1),Wt.viewport.degrees!==0&&Wt._drawer._restoreRotationChanges(!1))),rn||Wt.viewport.degrees===0&&Wt.getRotation(!0)%360===0&&Wt._drawer.viewer.viewport.getFlip()&&Wt._drawer._flip(),Zt(Wt,Kt)}}function Zt(Wt,Kt){if(Wt.debugMode)for(var Jt=Kt.length-1;Jt>=0;Jt--){var on=Kt[Jt];try{Wt._drawer.drawDebugInfo(on,Kt.length,Jt,Wt)}catch(rn){nt.console.error(rn)}}}}(OpenSeadragon),function(nt){var rt=function(st){nt.console.assert(st,"[TileCache.cacheTile] options is required"),nt.console.assert(st.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(st.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=st.tile,this.tiledImage=st.tiledImage},it=function(st){nt.console.assert(st,"[ImageRecord] options is required"),nt.console.assert(st.image,"[ImageRecord] options.image is required"),this._image=st.image,this._tiles=[]};it.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var st=document.createElement("canvas");st.width=this._image.width,st.height=this._image.height,this._renderedContext=st.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(st){nt.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=st},addTile:function(st){nt.console.assert(st,"[ImageRecord.addTile] tile is required"),this._tiles.push(st)},removeTile:function(st){for(var _t=0;_t<this._tiles.length;_t++)if(this._tiles[_t]===st){this._tiles.splice(_t,1);return}nt.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",st)},getTileCount:function(){return this._tiles.length}},nt.TileCache=function(st){st=st||{},this._maxImageCacheCount=st.maxImageCacheCount||nt.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},nt.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(st){nt.console.assert(st,"[TileCache.cacheTile] options is required"),nt.console.assert(st.tile,"[TileCache.cacheTile] options.tile is required"),nt.console.assert(st.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),nt.console.assert(st.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var _t=st.cutoff||0,xt=this._tilesLoaded.length,Et=this._imagesLoaded[st.tile.cacheKey];if(Et||(nt.console.assert(st.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),Et=this._imagesLoaded[st.tile.cacheKey]=new it({image:st.image}),this._imagesLoadedCount++),Et.addTile(st.tile),st.tile.cacheImageRecord=Et,this._imagesLoadedCount>this._maxImageCacheCount){for(var kt=null,Lt=-1,It=null,Rt,Nt,Bt,Ft,Yt,Zt,Wt=this._tilesLoaded.length-1;Wt>=0;Wt--)if(Zt=this._tilesLoaded[Wt],Rt=Zt.tile,!(Rt.level<=_t||Rt.beingDrawn)){if(!kt){kt=Rt,Lt=Wt,It=Zt;continue}Ft=Rt.lastTouchTime,Nt=kt.lastTouchTime,Yt=Rt.level,Bt=kt.level,(Ft<Nt||Ft==Nt&&Yt>Bt)&&(kt=Rt,Lt=Wt,It=Zt)}kt&&Lt>=0&&(this._unloadTile(It),xt=Lt)}this._tilesLoaded[xt]=new rt({tile:st.tile,tiledImage:st.tiledImage})},clearTilesFor:function(st){nt.console.assert(st,"[TileCache.clearTilesFor] tiledImage is required");for(var _t,xt=0;xt<this._tilesLoaded.length;++xt)_t=this._tilesLoaded[xt],_t.tiledImage===st&&(this._unloadTile(_t),this._tilesLoaded.splice(xt,1),xt--)},getImageRecord:function(st){return nt.console.assert(st,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[st]},_unloadTile:function(st){nt.console.assert(st,"[TileCache._unloadTile] tileRecord is required");var _t=st.tile,xt=st.tiledImage;_t.unload(),_t.cacheImageRecord=null;var Et=this._imagesLoaded[_t.cacheKey];Et.removeTile(_t),Et.getTileCount()||(Et.destroy(),delete this._imagesLoaded[_t.cacheKey],this._imagesLoadedCount--),xt.viewer.raiseEvent("tile-unloaded",{tile:_t,tiledImage:xt})}}}(OpenSeadragon),function(nt){nt.World=function(rt){var it=this;nt.console.assert(rt.viewer,"[World] options.viewer is required"),nt.EventSource.call(this),this.viewer=rt.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(st){it._autoRefigureSizes?it._figureSizes():it._needsSizesFigured=!0},this._figureSizes()},nt.extend(nt.World.prototype,nt.EventSource.prototype,{addItem:function(rt,it){if(nt.console.assert(rt,"[World.addItem] item is required"),nt.console.assert(rt instanceof nt.TiledImage,"[World.addItem] only TiledImages supported at this time"),it=it||{},it.index!==void 0){var st=Math.max(0,Math.min(this._items.length,it.index));this._items.splice(st,0,rt)}else this._items.push(rt);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,rt.addHandler("bounds-change",this._delegatedFigureSizes),rt.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:rt})},getItemAt:function(rt){return nt.console.assert(rt!==void 0,"[World.getItemAt] index is required"),this._items[rt]},getIndexOfItem:function(rt){return nt.console.assert(rt,"[World.getIndexOfItem] item is required"),nt.indexOf(this._items,rt)},getItemCount:function(){return this._items.length},setItemIndex:function(rt,it){nt.console.assert(rt,"[World.setItemIndex] item is required"),nt.console.assert(it!==void 0,"[World.setItemIndex] index is required");var st=this.getIndexOfItem(rt);if(it>=this._items.length)throw new Error("Index bigger than number of layers.");it===st||st===-1||(this._items.splice(st,1),this._items.splice(it,0,rt),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:rt,previousIndex:st,newIndex:it}))},removeItem:function(rt){nt.console.assert(rt,"[World.removeItem] item is required");var it=nt.indexOf(this._items,rt);it!==-1&&(rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy(),this._items.splice(it,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(rt))},removeAll:function(){this.viewer._cancelPendingImages();var rt,it;for(it=0;it<this._items.length;it++)rt=this._items[it],rt.removeHandler("bounds-change",this._delegatedFigureSizes),rt.removeHandler("clip-change",this._delegatedFigureSizes),rt.destroy();var st=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,it=0;it<st.length;it++)rt=st[it],this._raiseRemoveItem(rt)},resetItems:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].reset()},update:function(){for(var rt=!1,it=0;it<this._items.length;it++)rt=this._items[it].update()||rt;return rt},draw:function(){for(var rt=0;rt<this._items.length;rt++)this._items[rt].draw();this._needsDraw=!1},needsDraw:function(){for(var rt=0;rt<this._items.length;rt++)if(this._items[rt].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(rt){this._autoRefigureSizes=rt,rt&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(rt){rt=rt||{};var it=rt.immediately||!1,st=rt.layout||nt.DEFAULT_SETTINGS.collectionLayout,_t=rt.rows||nt.DEFAULT_SETTINGS.collectionRows,xt=rt.columns||nt.DEFAULT_SETTINGS.collectionColumns,Et=rt.tileSize||nt.DEFAULT_SETTINGS.collectionTileSize,kt=rt.tileMargin||nt.DEFAULT_SETTINGS.collectionTileMargin,Lt=Et+kt,It;!rt.rows&&xt?It=xt:It=Math.ceil(this._items.length/_t);var Rt=0,Nt=0,Bt,Ft,Yt,Zt,Wt;this.setAutoRefigureSizes(!1);for(var Kt=0;Kt<this._items.length;Kt++)Kt&&Kt%It===0&&(st==="horizontal"?(Nt+=Lt,Rt=0):(Rt+=Lt,Nt=0)),Bt=this._items[Kt],Ft=Bt.getBounds(),Ft.width>Ft.height?Yt=Et:Yt=Et*(Ft.width/Ft.height),Zt=Yt*(Ft.height/Ft.width),Wt=new nt.Point(Rt+(Et-Yt)/2,Nt+(Et-Zt)/2),Bt.setPosition(Wt,it),Bt.setWidth(Yt,it),st==="horizontal"?Rt+=Lt:Nt+=Lt;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var rt=this._homeBounds?this._homeBounds.clone():null,it=this._contentSize?this._contentSize.clone():null,st=this._contentFactor||0;if(!this._items.length)this._homeBounds=new nt.Rect(0,0,1,1),this._contentSize=new nt.Point(1,1),this._contentFactor=1;else{var _t=this._items[0],xt=_t.getBounds();this._contentFactor=_t.getContentSize().x/xt.width;for(var Et=_t.getClippedBounds().getBoundingBox(),kt=Et.x,Lt=Et.y,It=Et.x+Et.width,Rt=Et.y+Et.height,Nt=1;Nt<this._items.length;Nt++)_t=this._items[Nt],xt=_t.getBounds(),this._contentFactor=Math.max(this._contentFactor,_t.getContentSize().x/xt.width),Et=_t.getClippedBounds().getBoundingBox(),kt=Math.min(kt,Et.x),Lt=Math.min(Lt,Et.y),It=Math.max(It,Et.x+Et.width),Rt=Math.max(Rt,Et.y+Et.height);this._homeBounds=new nt.Rect(kt,Lt,It-kt,Rt-Lt),this._contentSize=new nt.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==st||!this._homeBounds.equals(rt)||!this._contentSize.equals(it))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(rt){this.raiseEvent("remove-item",{item:rt})}})}(OpenSeadragon)}(openseadragon)),openseadragon.exports}var openseadragonExports=requireOpenseadragon(),openseadragonViewerinputhook={exports:{}};/*! @openseadragon-imaging/openseadragon-viewerinputhook 2.2.1 ab9b394 (clean)  @license MIT */(function(nt,rt){(function(it,st){nt.exports=st(requireOpenseadragon())})(window,function(it){return function(st){function _t(Et){if(xt[Et])return xt[Et].exports;var kt=xt[Et]={i:Et,l:!1,exports:{}};return st[Et].call(kt.exports,kt,kt.exports,_t),kt.l=!0,kt.exports}var xt={};return _t.m=st,_t.c=xt,_t.d=function(Et,kt,Lt){_t.o(Et,kt)||Object.defineProperty(Et,kt,{enumerable:!0,get:Lt})},_t.r=function(Et){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Et,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Et,"__esModule",{value:!0})},_t.t=function(Et,kt){if(1&kt&&(Et=_t(Et)),8&kt||4&kt&&typeof Et=="object"&&Et&&Et.__esModule)return Et;var Lt=Object.create(null);if(_t.r(Lt),Object.defineProperty(Lt,"default",{enumerable:!0,value:Et}),2&kt&&typeof Et!="string")for(var It in Et)_t.d(Lt,It,function(Rt){return Et[Rt]}.bind(null,It));return Lt},_t.n=function(Et){var kt=Et&&Et.__esModule?function(){return Et.default}:function(){return Et};return _t.d(kt,"a",kt),kt},_t.o=function(Et,kt){return Object.prototype.hasOwnProperty.call(Et,kt)},_t.p="",_t(_t.s=1)}([function(st){st.exports=it},function(st,_t,xt){xt.r(_t);var Et=xt(0),kt=xt.n(Et);_t.default=function(Lt,It){if(!Lt.version||1>Lt.version.major)throw new Error("OpenSeadragonViewerInputHook requires OpenSeadragon version 1.0.0+");return Lt.Viewer.prototype.addViewerInputHook=function(Rt){return(Rt=Rt||{}).viewer=this,new It.ViewerInputHook(Rt)},It.ViewerInputHook=function(Rt){var Nt,Bt;for((Rt=Rt||{}).hooks=Rt.hooks||[],this.viewer=Rt.viewer||null,this.viewerTrackers={},this.hooks=[],this.viewer&&(this.viewerTrackers.viewer=this.viewer.innerTracker,this.viewerTrackers.viewer_outer=this.viewer.outerTracker),Nt=0;Nt<Rt.hooks.length;Nt++){if(typeof Rt.hooks[Nt].tracker=="string"){if(!this.viewer)throw new Error("A viewer must be specified.");if((Bt=this.viewerTrackers[Rt.hooks[Nt].tracker])===void 0)throw new Error("Unknown tracker specified: "+Rt.hooks[Nt].tracker)}else Bt=Rt.hooks[Nt].tracker;this.hooks.push({tracker:Bt,handlerName:Rt.hooks[Nt].handler,origHandler:Bt[Rt.hooks[Nt].handler],hookHandler:Rt.hooks[Nt].hookHandler}),function(Ft,Yt,Zt,Wt){var Kt=Yt[Zt];Yt[Zt]=function(Jt){return Ft._callHandlers(Wt,Kt,Jt)}}(this,Bt,Rt.hooks[Nt].handler,Rt.hooks[Nt].hookHandler)}},It.ViewerInputHook.version={versionStr:"2.2.1",major:2,minor:2,revision:1},It.ViewerInputHook.prototype._callHandlers=function(Rt,Nt,Bt){var Ft=Rt(Bt);return Nt&&!Bt.stopHandlers&&(Ft=Nt(Bt)),!Bt.stopBubbling&&Ft},It.ViewerInputHook.prototype.destroy=function(){for(;0<this.hooks.length;){var Rt=this.hooks.pop();Rt.tracker[Rt.handlerName]=Rt.origHandler}this.viewer&&(delete this.viewerTrackers.viewer,delete this.viewerTrackers.viewer_outer,this.viewer=null)},It.ViewerInputHook}(kt.a||window.OpenSeadragon,window.OpenSeadragonImaging=window.OpenSeadragonImaging||{})}]).default})})(openseadragonViewerinputhook);const OpenSeadragonViewerInputHook=getDefaultExportFromCjs(openseadragonViewerinputhook.exports);var openseadragonAnnotorious_min={exports:{}};(function(nt,rt){var it=Object.defineProperty,st=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,Lt=(Ft,Yt,Zt)=>Yt in Ft?it(Ft,Yt,{enumerable:!0,configurable:!0,writable:!0,value:Zt}):Ft[Yt]=Zt,It=(Ft,Yt)=>{for(var Zt in Yt||(Yt={}))Et.call(Yt,Zt)&&Lt(Ft,Zt,Yt[Zt]);if(xt)for(var Zt of xt(Yt))kt.call(Yt,Zt)&&Lt(Ft,Zt,Yt[Zt]);return Ft},Rt=(Ft,Yt)=>st(Ft,_t(Yt)),Nt=(Ft,Yt)=>{var Zt={};for(var Wt in Ft)Et.call(Ft,Wt)&&Yt.indexOf(Wt)<0&&(Zt[Wt]=Ft[Wt]);if(Ft!=null&&xt)for(var Wt of xt(Ft))Yt.indexOf(Wt)<0&&kt.call(Ft,Wt)&&(Zt[Wt]=Ft[Wt]);return Zt},Bt=(Ft,Yt,Zt)=>(Lt(Ft,typeof Yt!="symbol"?Yt+"":Yt,Zt),Zt);(function(Ft,Yt){nt.exports=Yt(requireOpenseadragon())})(commonjsGlobal$1,function(Ft){function Yt(Pt){return Pt&&typeof Pt=="object"&&"default"in Pt?Pt:{default:Pt}}var Zt=Yt(Ft),Wt,Kt,Jt,on,rn,ln,gn,wn={},kn=[],Cn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Pn(Pt,Mt){for(var zt in Mt)Pt[zt]=Mt[zt];return Pt}function An(Pt){var Mt=Pt.parentNode;Mt&&Mt.removeChild(Pt)}function cn(Pt,Mt,zt){var Ht,Ut,Qt,hn={};for(Qt in Mt)Qt=="key"?Ht=Mt[Qt]:Qt=="ref"?Ut=Mt[Qt]:hn[Qt]=Mt[Qt];if(arguments.length>2&&(hn.children=arguments.length>3?Wt.call(arguments,2):zt),typeof Pt=="function"&&Pt.defaultProps!=null)for(Qt in Pt.defaultProps)hn[Qt]===void 0&&(hn[Qt]=Pt.defaultProps[Qt]);return Ln(Pt,hn,Ht,Ut,null)}function Ln(Pt,Mt,zt,Ht,Ut){var Qt={type:Pt,props:Mt,key:zt,ref:Ht,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ut==null?++Jt:Ut};return Kt.vnode!=null&&Kt.vnode(Qt),Qt}function an(){return{current:null}}function zn(Pt){return Pt.children}function dn(Pt,Mt){this.props=Pt,this.context=Mt}function Fn(Pt,Mt){if(Mt==null)return Pt.__?Fn(Pt.__,Pt.__.__k.indexOf(Pt)+1):null;for(var zt;Mt<Pt.__k.length;Mt++)if((zt=Pt.__k[Mt])!=null&&zt.__e!=null)return zt.__e;return typeof Pt.type=="function"?Fn(Pt):null}function ir(Pt){var Mt,zt;if((Pt=Pt.__)!=null&&Pt.__c!=null){for(Pt.__e=Pt.__c.base=null,Mt=0;Mt<Pt.__k.length;Mt++)if((zt=Pt.__k[Mt])!=null&&zt.__e!=null){Pt.__e=Pt.__c.base=zt.__e;break}return ir(Pt)}}function tr(Pt){(!Pt.__d&&(Pt.__d=!0)&&on.push(Pt)&&!Jn.__r++||ln!==Kt.debounceRendering)&&((ln=Kt.debounceRendering)||rn)(Jn)}function Jn(){for(var Pt;Jn.__r=on.length;)Pt=on.sort(function(Mt,zt){return Mt.__v.__b-zt.__v.__b}),on=[],Pt.some(function(Mt){var zt,Ht,Ut,Qt,hn,xn;Mt.__d&&(hn=(Qt=(zt=Mt).__v).__e,(xn=zt.__P)&&(Ht=[],(Ut=Pn({},Qt)).__v=Qt.__v+1,fr(xn,Qt,Ut,zt.__n,xn.ownerSVGElement!==void 0,Qt.__h!=null?[hn]:null,Ht,hn==null?Fn(Qt):hn,Qt.__h),gr(Ht,Qt),Qt.__e!=hn&&ir(Qt)))})}function hr(Pt,Mt,zt,Ht,Ut,Qt,hn,xn,$n,Mn){var On,ur,Sr,Pr,Wr,ai,oi,_i=Ht&&Ht.__k||kn,Oi=_i.length;for(zt.__k=[],On=0;On<Mt.length;On++)if((Pr=zt.__k[On]=(Pr=Mt[On])==null||typeof Pr=="boolean"?null:typeof Pr=="string"||typeof Pr=="number"||typeof Pr=="bigint"?Ln(null,Pr,null,null,Pr):Array.isArray(Pr)?Ln(zn,{children:Pr},null,null,null):Pr.__b>0?Ln(Pr.type,Pr.props,Pr.key,null,Pr.__v):Pr)!=null){if(Pr.__=zt,Pr.__b=zt.__b+1,(Sr=_i[On])===null||Sr&&Pr.key==Sr.key&&Pr.type===Sr.type)_i[On]=void 0;else for(ur=0;ur<Oi;ur++){if((Sr=_i[ur])&&Pr.key==Sr.key&&Pr.type===Sr.type){_i[ur]=void 0;break}Sr=null}fr(Pt,Pr,Sr=Sr||wn,Ut,Qt,hn,xn,$n,Mn),Wr=Pr.__e,(ur=Pr.ref)&&Sr.ref!=ur&&(oi||(oi=[]),Sr.ref&&oi.push(Sr.ref,null,Pr),oi.push(ur,Pr.__c||Wr,Pr)),Wr!=null?(ai==null&&(ai=Wr),typeof Pr.type=="function"&&Pr.__k!=null&&Pr.__k===Sr.__k?Pr.__d=$n=lr(Pr,$n,Pt):$n=Cr(Pt,Pr,Sr,_i,Wr,$n),Mn||zt.type!=="option"?typeof zt.type=="function"&&(zt.__d=$n):Pt.value=""):$n&&Sr.__e==$n&&$n.parentNode!=Pt&&($n=Fn(Sr))}for(zt.__e=ai,On=Oi;On--;)_i[On]!=null&&(typeof zt.type=="function"&&_i[On].__e!=null&&_i[On].__e==zt.__d&&(zt.__d=Fn(Ht,On+1)),un(_i[On],_i[On]));if(oi)for(On=0;On<oi.length;On++)nn(oi[On],oi[++On],oi[++On])}function lr(Pt,Mt,zt){var Ht,Ut;for(Ht=0;Ht<Pt.__k.length;Ht++)(Ut=Pt.__k[Ht])&&(Ut.__=Pt,Mt=typeof Ut.type=="function"?lr(Ut,Mt,zt):Cr(zt,Ut,Ut,Pt.__k,Ut.__e,Mt));return Mt}function cr(Pt,Mt){return Mt=Mt||[],Pt==null||typeof Pt=="boolean"||(Array.isArray(Pt)?Pt.some(function(zt){cr(zt,Mt)}):Mt.push(Pt)),Mt}function Cr(Pt,Mt,zt,Ht,Ut,Qt){var hn,xn,$n;if(Mt.__d!==void 0)hn=Mt.__d,Mt.__d=void 0;else if(zt==null||Ut!=Qt||Ut.parentNode==null)e:if(Qt==null||Qt.parentNode!==Pt)Pt.appendChild(Ut),hn=null;else{for(xn=Qt,$n=0;(xn=xn.nextSibling)&&$n<Ht.length;$n+=2)if(xn==Ut)break e;Pt.insertBefore(Ut,Qt),hn=Qt}return hn!==void 0?hn:Ut.nextSibling}function Er(Pt,Mt,zt,Ht,Ut){var Qt;for(Qt in zt)Qt==="children"||Qt==="key"||Qt in Mt||Fr(Pt,Qt,null,zt[Qt],Ht);for(Qt in Mt)Ut&&typeof Mt[Qt]!="function"||Qt==="children"||Qt==="key"||Qt==="value"||Qt==="checked"||zt[Qt]===Mt[Qt]||Fr(Pt,Qt,Mt[Qt],zt[Qt],Ht)}function ar(Pt,Mt,zt){Mt[0]==="-"?Pt.setProperty(Mt,zt):Pt[Mt]=zt==null?"":typeof zt!="number"||Cn.test(Mt)?zt:zt+"px"}function Fr(Pt,Mt,zt,Ht,Ut){var Qt;e:if(Mt==="style")if(typeof zt=="string")Pt.style.cssText=zt;else{if(typeof Ht=="string"&&(Pt.style.cssText=Ht=""),Ht)for(Mt in Ht)zt&&Mt in zt||ar(Pt.style,Mt,"");if(zt)for(Mt in zt)Ht&&zt[Mt]===Ht[Mt]||ar(Pt.style,Mt,zt[Mt])}else if(Mt[0]==="o"&&Mt[1]==="n")Qt=Mt!==(Mt=Mt.replace(/Capture$/,"")),Mt=Mt.toLowerCase()in Pt?Mt.toLowerCase().slice(2):Mt.slice(2),Pt.l||(Pt.l={}),Pt.l[Mt+Qt]=zt,zt?Ht||Pt.addEventListener(Mt,Qt?xr:mr,Qt):Pt.removeEventListener(Mt,Qt?xr:mr,Qt);else if(Mt!=="dangerouslySetInnerHTML"){if(Ut)Mt=Mt.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(Mt!=="href"&&Mt!=="list"&&Mt!=="form"&&Mt!=="tabIndex"&&Mt!=="download"&&Mt in Pt)try{Pt[Mt]=zt==null?"":zt;break e}catch{}typeof zt=="function"||(zt!=null&&(zt!==!1||Mt[0]==="a"&&Mt[1]==="r")?Pt.setAttribute(Mt,zt):Pt.removeAttribute(Mt))}}function mr(Pt){this.l[Pt.type+!1](Kt.event?Kt.event(Pt):Pt)}function xr(Pt){this.l[Pt.type+!0](Kt.event?Kt.event(Pt):Pt)}function fr(Pt,Mt,zt,Ht,Ut,Qt,hn,xn,$n){var Mn,On,ur,Sr,Pr,Wr,ai,oi,_i,Oi,Eo,mo=Mt.type;if(Mt.constructor!==void 0)return null;zt.__h!=null&&($n=zt.__h,xn=Mt.__e=zt.__e,Mt.__h=null,Qt=[xn]),(Mn=Kt.__b)&&Mn(Mt);try{e:if(typeof mo=="function"){if(oi=Mt.props,_i=(Mn=mo.contextType)&&Ht[Mn.__c],Oi=Mn?_i?_i.props.value:Mn.__:Ht,zt.__c?ai=(On=Mt.__c=zt.__c).__=On.__E:("prototype"in mo&&mo.prototype.render?Mt.__c=On=new mo(oi,Oi):(Mt.__c=On=new dn(oi,Oi),On.constructor=mo,On.render=pn),_i&&_i.sub(On),On.props=oi,On.state||(On.state={}),On.context=Oi,On.__n=Ht,ur=On.__d=!0,On.__h=[]),On.__s==null&&(On.__s=On.state),mo.getDerivedStateFromProps!=null&&(On.__s==On.state&&(On.__s=Pn({},On.__s)),Pn(On.__s,mo.getDerivedStateFromProps(oi,On.__s))),Sr=On.props,Pr=On.state,ur)mo.getDerivedStateFromProps==null&&On.componentWillMount!=null&&On.componentWillMount(),On.componentDidMount!=null&&On.__h.push(On.componentDidMount);else{if(mo.getDerivedStateFromProps==null&&oi!==Sr&&On.componentWillReceiveProps!=null&&On.componentWillReceiveProps(oi,Oi),!On.__e&&On.shouldComponentUpdate!=null&&On.shouldComponentUpdate(oi,On.__s,Oi)===!1||Mt.__v===zt.__v){On.props=oi,On.state=On.__s,Mt.__v!==zt.__v&&(On.__d=!1),On.__v=Mt,Mt.__e=zt.__e,Mt.__k=zt.__k,Mt.__k.forEach(function(lo){lo&&(lo.__=Mt)}),On.__h.length&&hn.push(On);break e}On.componentWillUpdate!=null&&On.componentWillUpdate(oi,On.__s,Oi),On.componentDidUpdate!=null&&On.__h.push(function(){On.componentDidUpdate(Sr,Pr,Wr)})}On.context=Oi,On.props=oi,On.state=On.__s,(Mn=Kt.__r)&&Mn(Mt),On.__d=!1,On.__v=Mt,On.__P=Pt,Mn=On.render(On.props,On.state,On.context),On.state=On.__s,On.getChildContext!=null&&(Ht=Pn(Pn({},Ht),On.getChildContext())),ur||On.getSnapshotBeforeUpdate==null||(Wr=On.getSnapshotBeforeUpdate(Sr,Pr)),Eo=Mn!=null&&Mn.type===zn&&Mn.key==null?Mn.props.children:Mn,hr(Pt,Array.isArray(Eo)?Eo:[Eo],Mt,zt,Ht,Ut,Qt,hn,xn,$n),On.base=Mt.__e,Mt.__h=null,On.__h.length&&hn.push(On),ai&&(On.__E=On.__=null),On.__e=!1}else Qt==null&&Mt.__v===zt.__v?(Mt.__k=zt.__k,Mt.__e=zt.__e):Mt.__e=er(zt.__e,Mt,zt,Ht,Ut,Qt,hn,$n);(Mn=Kt.diffed)&&Mn(Mt)}catch(lo){Mt.__v=null,($n||Qt!=null)&&(Mt.__e=xn,Mt.__h=!!$n,Qt[Qt.indexOf(xn)]=null),Kt.__e(lo,Mt,zt)}}function gr(Pt,Mt){Kt.__c&&Kt.__c(Mt,Pt),Pt.some(function(zt){try{Pt=zt.__h,zt.__h=[],Pt.some(function(Ht){Ht.call(zt)})}catch(Ht){Kt.__e(Ht,zt.__v)}})}function er(Pt,Mt,zt,Ht,Ut,Qt,hn,xn){var $n,Mn,On,ur=zt.props,Sr=Mt.props,Pr=Mt.type,Wr=0;if(Pr==="svg"&&(Ut=!0),Qt!=null){for(;Wr<Qt.length;Wr++)if(($n=Qt[Wr])&&($n===Pt||(Pr?$n.localName==Pr:$n.nodeType==3))){Pt=$n,Qt[Wr]=null;break}}if(Pt==null){if(Pr===null)return document.createTextNode(Sr);Pt=Ut?document.createElementNS("http://www.w3.org/2000/svg",Pr):document.createElement(Pr,Sr.is&&Sr),Qt=null,xn=!1}if(Pr===null)ur===Sr||xn&&Pt.data===Sr||(Pt.data=Sr);else{if(Qt=Qt&&Wt.call(Pt.childNodes),Mn=(ur=zt.props||wn).dangerouslySetInnerHTML,On=Sr.dangerouslySetInnerHTML,!xn){if(Qt!=null)for(ur={},Wr=0;Wr<Pt.attributes.length;Wr++)ur[Pt.attributes[Wr].name]=Pt.attributes[Wr].value;(On||Mn)&&(On&&(Mn&&On.__html==Mn.__html||On.__html===Pt.innerHTML)||(Pt.innerHTML=On&&On.__html||""))}if(Er(Pt,Sr,ur,Ut,xn),On)Mt.__k=[];else if(Wr=Mt.props.children,hr(Pt,Array.isArray(Wr)?Wr:[Wr],Mt,zt,Ht,Ut&&Pr!=="foreignObject",Qt,hn,Qt?Qt[0]:zt.__k&&Fn(zt,0),xn),Qt!=null)for(Wr=Qt.length;Wr--;)Qt[Wr]!=null&&An(Qt[Wr]);xn||("value"in Sr&&(Wr=Sr.value)!==void 0&&(Wr!==Pt.value||Pr==="progress"&&!Wr)&&Fr(Pt,"value",Wr,ur.value,!1),"checked"in Sr&&(Wr=Sr.checked)!==void 0&&Wr!==Pt.checked&&Fr(Pt,"checked",Wr,ur.checked,!1))}return Pt}function nn(Pt,Mt,zt){try{typeof Pt=="function"?Pt(Mt):Pt.current=Mt}catch(Ht){Kt.__e(Ht,zt)}}function un(Pt,Mt,zt){var Ht,Ut;if(Kt.unmount&&Kt.unmount(Pt),(Ht=Pt.ref)&&(Ht.current&&Ht.current!==Pt.__e||nn(Ht,null,Mt)),(Ht=Pt.__c)!=null){if(Ht.componentWillUnmount)try{Ht.componentWillUnmount()}catch(Qt){Kt.__e(Qt,Mt)}Ht.base=Ht.__P=null}if(Ht=Pt.__k)for(Ut=0;Ut<Ht.length;Ut++)Ht[Ut]&&un(Ht[Ut],Mt,typeof Pt.type!="function");zt||Pt.__e==null||An(Pt.__e),Pt.__e=Pt.__d=void 0}function pn(Pt,Mt,zt){return this.constructor(Pt,zt)}function Rn(Pt,Mt,zt){var Ht,Ut,Qt;Kt.__&&Kt.__(Pt,Mt),Ut=(Ht=typeof zt=="function")?null:zt&&zt.__k||Mt.__k,Qt=[],fr(Mt,Pt=(!Ht&&zt||Mt).__k=cn(zn,null,[Pt]),Ut||wn,wn,Mt.ownerSVGElement!==void 0,!Ht&&zt?[zt]:Ut?null:Mt.firstChild?Wt.call(Mt.childNodes):null,Qt,!Ht&&zt?zt:Ut?Ut.__e:Mt.firstChild,Ht),gr(Qt,Pt)}function _n(Pt,Mt){Rn(Pt,Mt,_n)}function or(Pt,Mt,zt){var Ht,Ut,Qt,hn=Pn({},Pt.props);for(Qt in Mt)Qt=="key"?Ht=Mt[Qt]:Qt=="ref"?Ut=Mt[Qt]:hn[Qt]=Mt[Qt];return arguments.length>2&&(hn.children=arguments.length>3?Wt.call(arguments,2):zt),Ln(Pt.type,hn,Ht||Pt.key,Ut||Pt.ref,null)}function Vn(Pt,Mt){var zt={__c:Mt="__cC"+gn++,__:Pt,Consumer:function(Ht,Ut){return Ht.children(Ut)},Provider:function(Ht){var Ut,Qt;return this.getChildContext||(Ut=[],(Qt={})[Mt]=this,this.getChildContext=function(){return Qt},this.shouldComponentUpdate=function(hn){this.props.value!==hn.value&&Ut.some(tr)},this.sub=function(hn){Ut.push(hn);var xn=hn.componentWillUnmount;hn.componentWillUnmount=function(){Ut.splice(Ut.indexOf(hn),1),xn&&xn.call(hn)}}),Ht.children}};return zt.Provider.__=zt.Consumer.contextType=zt}Wt=kn.slice,Kt={__e:function(Pt,Mt){for(var zt,Ht,Ut;Mt=Mt.__;)if((zt=Mt.__c)&&!zt.__)try{if((Ht=zt.constructor)&&Ht.getDerivedStateFromError!=null&&(zt.setState(Ht.getDerivedStateFromError(Pt)),Ut=zt.__d),zt.componentDidCatch!=null&&(zt.componentDidCatch(Pt),Ut=zt.__d),Ut)return zt.__E=zt}catch(Qt){Pt=Qt}throw Pt}},Jt=0,dn.prototype.setState=function(Pt,Mt){var zt;zt=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Pn({},this.state),typeof Pt=="function"&&(Pt=Pt(Pn({},zt),this.props)),Pt&&Pn(zt,Pt),Pt!=null&&this.__v&&(Mt&&this.__h.push(Mt),tr(this))},dn.prototype.forceUpdate=function(Pt){this.__v&&(this.__e=!0,Pt&&this.__h.push(Pt),tr(this))},dn.prototype.render=zn,on=[],rn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Jn.__r=0,gn=0;var Wn,Hn,nr,sr=0,pr=[],vr=Kt.__b,kr=Kt.__r,si=Kt.diffed,ui=Kt.__c,ii=Kt.unmount;function li(Pt,Mt){Kt.__h&&Kt.__h(Hn,Pt,sr||Mt),sr=0;var zt=Hn.__H||(Hn.__H={__:[],__h:[]});return Pt>=zt.__.length&&zt.__.push({}),zt.__[Pt]}function Ei(Pt){return sr=1,wi(fi,Pt)}function wi(Pt,Mt,zt){var Ht=li(Wn++,2);return Ht.t=Pt,Ht.__c||(Ht.__=[zt?zt(Mt):fi(void 0,Mt),function(Ut){var Qt=Ht.t(Ht.__[0],Ut);Ht.__[0]!==Qt&&(Ht.__=[Qt,Ht.__[1]],Ht.__c.setState({}))}],Ht.__c=Hn),Ht.__}function Ci(Pt,Mt){var zt=li(Wn++,3);!Kt.__s&&Ti(zt.__H,Mt)&&(zt.__=Pt,zt.__H=Mt,Hn.__H.__h.push(zt))}function Lr(Pt,Mt){var zt=li(Wn++,4);!Kt.__s&&Ti(zt.__H,Mt)&&(zt.__=Pt,zt.__H=Mt,Hn.__h.push(zt))}function Tn(Pt){return sr=5,Un(function(){return{current:Pt}},[])}function En(Pt,Mt,zt){sr=6,Lr(function(){typeof Pt=="function"?Pt(Mt()):Pt&&(Pt.current=Mt())},zt==null?zt:zt.concat(Pt))}function Un(Pt,Mt){var zt=li(Wn++,7);return Ti(zt.__H,Mt)&&(zt.__=Pt(),zt.__H=Mt,zt.__h=Pt),zt.__}function qn(Pt,Mt){return sr=8,Un(function(){return Pt},Mt)}function _r(Pt){var Mt=Hn.context[Pt.__c],zt=li(Wn++,9);return zt.c=Pt,Mt?(zt.__==null&&(zt.__=!0,Mt.sub(Hn)),Mt.props.value):Pt.__}function Zr(Pt,Mt){Kt.useDebugValue&&Kt.useDebugValue(Mt?Mt(Pt):Pt)}function yr(Pt){var Mt=li(Wn++,10),zt=Ei();return Mt.__=Pt,Hn.componentDidCatch||(Hn.componentDidCatch=function(Ht){Mt.__&&Mt.__(Ht),zt[1](Ht)}),[zt[0],function(){zt[1](void 0)}]}function ni(){pr.forEach(function(Pt){if(Pt.__P)try{Pt.__H.__h.forEach(gi),Pt.__H.__h.forEach(hi),Pt.__H.__h=[]}catch(Mt){Pt.__H.__h=[],Kt.__e(Mt,Pt.__v)}}),pr=[]}Kt.__b=function(Pt){Hn=null,vr&&vr(Pt)},Kt.__r=function(Pt){kr&&kr(Pt),Wn=0;var Mt=(Hn=Pt.__c).__H;Mt&&(Mt.__h.forEach(gi),Mt.__h.forEach(hi),Mt.__h=[])},Kt.diffed=function(Pt){si&&si(Pt);var Mt=Pt.__c;Mt&&Mt.__H&&Mt.__H.__h.length&&(pr.push(Mt)!==1&&nr===Kt.requestAnimationFrame||((nr=Kt.requestAnimationFrame)||function(zt){var Ht,Ut=function(){clearTimeout(Qt),Ar&&cancelAnimationFrame(Ht),setTimeout(zt)},Qt=setTimeout(Ut,100);Ar&&(Ht=requestAnimationFrame(Ut))})(ni)),Hn=void 0},Kt.__c=function(Pt,Mt){Mt.some(function(zt){try{zt.__h.forEach(gi),zt.__h=zt.__h.filter(function(Ht){return!Ht.__||hi(Ht)})}catch(Ht){Mt.some(function(Ut){Ut.__h&&(Ut.__h=[])}),Mt=[],Kt.__e(Ht,zt.__v)}}),ui&&ui(Pt,Mt)},Kt.unmount=function(Pt){ii&&ii(Pt);var Mt=Pt.__c;if(Mt&&Mt.__H)try{Mt.__H.__.forEach(gi)}catch(zt){Kt.__e(zt,Mt.__v)}};var Ar=typeof requestAnimationFrame=="function";function gi(Pt){var Mt=Hn;typeof Pt.__c=="function"&&Pt.__c(),Hn=Mt}function hi(Pt){var Mt=Hn;Pt.__c=Pt.__(),Hn=Mt}function Ti(Pt,Mt){return!Pt||Pt.length!==Mt.length||Mt.some(function(zt,Ht){return zt!==Pt[Ht]})}function fi(Pt,Mt){return typeof Mt=="function"?Mt(Pt):Mt}function Yi(Pt,Mt){for(var zt in Mt)Pt[zt]=Mt[zt];return Pt}function Si(Pt,Mt){for(var zt in Pt)if(zt!=="__source"&&!(zt in Mt))return!0;for(var Ht in Mt)if(Ht!=="__source"&&Pt[Ht]!==Mt[Ht])return!0;return!1}function qi(Pt){this.props=Pt}function uo(Pt,Mt){function zt(Ut){var Qt=this.props.ref,hn=Qt==Ut.ref;return!hn&&Qt&&(Qt.call?Qt(null):Qt.current=null),Mt?!Mt(this.props,Ut)||!hn:Si(this.props,Ut)}function Ht(Ut){return this.shouldComponentUpdate=zt,cn(Pt,Ut)}return Ht.displayName="Memo("+(Pt.displayName||Pt.name)+")",Ht.prototype.isReactComponent=!0,Ht.__f=!0,Ht}(qi.prototype=new dn).isPureReactComponent=!0,qi.prototype.shouldComponentUpdate=function(Pt,Mt){return Si(this.props,Pt)||Si(this.state,Mt)};var Xi=Kt.__b;Kt.__b=function(Pt){Pt.type&&Pt.type.__f&&Pt.ref&&(Pt.props.ref=Pt.ref,Pt.ref=null),Xi&&Xi(Pt)};var Na=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function zs(Pt){function Mt(zt,Ht){var Ut=Yi({},zt);return delete Ut.ref,Pt(Ut,(Ht=zt.ref||Ht)&&(typeof Ht!="object"||"current"in Ht)?Ht:null)}return Mt.$$typeof=Na,Mt.render=Mt,Mt.prototype.isReactComponent=Mt.__f=!0,Mt.displayName="ForwardRef("+(Pt.displayName||Pt.name)+")",Mt}var bi=function(Pt,Mt){return Pt==null?null:cr(cr(Pt).map(Mt))},Zi={map:bi,forEach:bi,count:function(Pt){return Pt?cr(Pt).length:0},only:function(Pt){var Mt=cr(Pt);if(Mt.length!==1)throw"Children.only";return Mt[0]},toArray:cr},$s=Kt.__e;Kt.__e=function(Pt,Mt,zt){if(Pt.then){for(var Ht,Ut=Mt;Ut=Ut.__;)if((Ht=Ut.__c)&&Ht.__c)return Mt.__e==null&&(Mt.__e=zt.__e,Mt.__k=zt.__k),Ht.__c(Pt,Mt)}$s(Pt,Mt,zt)};var vs=Kt.unmount;function ds(){this.__u=0,this.t=null,this.__b=null}function Ls(Pt){var Mt=Pt.__.__c;return Mt&&Mt.__e&&Mt.__e(Pt)}function Ir(Pt){var Mt,zt,Ht;function Ut(Qt){if(Mt||(Mt=Pt()).then(function(hn){zt=hn.default||hn},function(hn){Ht=hn}),Ht)throw Ht;if(!zt)throw Mt;return cn(zt,Qt)}return Ut.displayName="Lazy",Ut.__f=!0,Ut}function Hr(){this.u=null,this.o=null}Kt.unmount=function(Pt){var Mt=Pt.__c;Mt&&Mt.__R&&Mt.__R(),Mt&&Pt.__h===!0&&(Pt.type=null),vs&&vs(Pt)},(ds.prototype=new dn).__c=function(Pt,Mt){var zt=Mt.__c,Ht=this;Ht.t==null&&(Ht.t=[]),Ht.t.push(zt);var Ut=Ls(Ht.__v),Qt=!1,hn=function(){Qt||(Qt=!0,zt.__R=null,Ut?Ut(xn):xn())};zt.__R=hn;var xn=function(){if(!--Ht.__u){if(Ht.state.__e){var Mn=Ht.state.__e;Ht.__v.__k[0]=function ur(Sr,Pr,Wr){return Sr&&(Sr.__v=null,Sr.__k=Sr.__k&&Sr.__k.map(function(ai){return ur(ai,Pr,Wr)}),Sr.__c&&Sr.__c.__P===Pr&&(Sr.__e&&Wr.insertBefore(Sr.__e,Sr.__d),Sr.__c.__e=!0,Sr.__c.__P=Wr)),Sr}(Mn,Mn.__c.__P,Mn.__c.__O)}var On;for(Ht.setState({__e:Ht.__b=null});On=Ht.t.pop();)On.forceUpdate()}},$n=Mt.__h===!0;Ht.__u++||$n||Ht.setState({__e:Ht.__b=Ht.__v.__k[0]}),Pt.then(hn,hn)},ds.prototype.componentWillUnmount=function(){this.t=[]},ds.prototype.render=function(Pt,Mt){if(this.__b){if(this.__v.__k){var zt=document.createElement("div"),Ht=this.__v.__k[0].__c;this.__v.__k[0]=function Qt(hn,xn,$n){return hn&&(hn.__c&&hn.__c.__H&&(hn.__c.__H.__.forEach(function(Mn){typeof Mn.__c=="function"&&Mn.__c()}),hn.__c.__H=null),(hn=Yi({},hn)).__c!=null&&(hn.__c.__P===$n&&(hn.__c.__P=xn),hn.__c=null),hn.__k=hn.__k&&hn.__k.map(function(Mn){return Qt(Mn,xn,$n)})),hn}(this.__b,zt,Ht.__O=Ht.__P)}this.__b=null}var Ut=Mt.__e&&cn(zn,null,Pt.fallback);return Ut&&(Ut.__h=null),[cn(zn,null,Mt.__e?null:Pt.children),Ut]};var ri=function(Pt,Mt,zt){if(++zt[1]===zt[0]&&Pt.o.delete(Mt),Pt.props.revealOrder&&(Pt.props.revealOrder[0]!=="t"||!Pt.o.size))for(zt=Pt.u;zt;){for(;zt.length>3;)zt.pop()();if(zt[1]<zt[0])break;Pt.u=zt=zt[2]}};function Gr(Pt){return this.getChildContext=function(){return Pt.context},Pt.children}function dr(Pt){var Mt=this,zt=Pt.i;Mt.componentWillUnmount=function(){Rn(null,Mt.l),Mt.l=null,Mt.i=null},Mt.i&&Mt.i!==zt&&Mt.componentWillUnmount(),Pt.__v?(Mt.l||(Mt.i=zt,Mt.l={nodeType:1,parentNode:zt,childNodes:[],appendChild:function(Ht){this.childNodes.push(Ht),Mt.i.appendChild(Ht)},insertBefore:function(Ht,Ut){this.childNodes.push(Ht),Mt.i.appendChild(Ht)},removeChild:function(Ht){this.childNodes.splice(this.childNodes.indexOf(Ht)>>>1,1),Mt.i.removeChild(Ht)}}),Rn(cn(Gr,{context:Mt.context},Pt.__v),Mt.l)):Mt.l&&Mt.componentWillUnmount()}function ei(Pt,Mt){return cn(dr,{__v:Pt,i:Mt})}(Hr.prototype=new dn).__e=function(Pt){var Mt=this,zt=Ls(Mt.__v),Ht=Mt.o.get(Pt);return Ht[0]++,function(Ut){var Qt=function(){Mt.props.revealOrder?(Ht.push(Ut),ri(Mt,Pt,Ht)):Ut()};zt?zt(Qt):Qt()}},Hr.prototype.render=function(Pt){this.u=null,this.o=new Map;var Mt=cr(Pt.children);Pt.revealOrder&&Pt.revealOrder[0]==="b"&&Mt.reverse();for(var zt=Mt.length;zt--;)this.o.set(Mt[zt],this.u=[1,0,this.u]);return Pt.children},Hr.prototype.componentDidUpdate=Hr.prototype.componentDidMount=function(){var Pt=this;this.o.forEach(function(Mt,zt){ri(Pt,zt,Mt)})};var ti=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Bi=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Oo=function(Pt){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Pt)};function wo(Pt,Mt,zt){return Mt.__k==null&&(Mt.textContent=""),Rn(Pt,Mt),typeof zt=="function"&&zt(),Pt?Pt.__c:null}function _s(Pt,Mt,zt){return _n(Pt,Mt),typeof zt=="function"&&zt(),Pt?Pt.__c:null}dn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Pt){Object.defineProperty(dn.prototype,Pt,{configurable:!0,get:function(){return this["UNSAFE_"+Pt]},set:function(Mt){Object.defineProperty(this,Pt,{configurable:!0,writable:!0,value:Mt})}})});var fs=Kt.event;function zi(){}function Ps(){return this.cancelBubble}function Da(){return this.defaultPrevented}Kt.event=function(Pt){return fs&&(Pt=fs(Pt)),Pt.persist=zi,Pt.isPropagationStopped=Ps,Pt.isDefaultPrevented=Da,Pt.nativeEvent=Pt};var Ga,Hi={configurable:!0,get:function(){return this.class}},Ji=Kt.vnode;Kt.vnode=function(Pt){var Mt=Pt.type,zt=Pt.props,Ht=zt;if(typeof Mt=="string"){for(var Ut in Ht={},zt){var Qt=zt[Ut];Ut==="value"&&"defaultValue"in zt&&Qt==null||(Ut==="defaultValue"&&"value"in zt&&zt.value==null?Ut="value":Ut==="download"&&Qt===!0?Qt="":/ondoubleclick/i.test(Ut)?Ut="ondblclick":/^onchange(textarea|input)/i.test(Ut+Mt)&&!Oo(zt.type)?Ut="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(Ut)?Ut=Ut.toLowerCase():Bi.test(Ut)?Ut=Ut.replace(/[A-Z0-9]/,"-$&").toLowerCase():Qt===null&&(Qt=void 0),Ht[Ut]=Qt)}Mt=="select"&&Ht.multiple&&Array.isArray(Ht.value)&&(Ht.value=cr(zt.children).forEach(function(hn){hn.props.selected=Ht.value.indexOf(hn.props.value)!=-1})),Mt=="select"&&Ht.defaultValue!=null&&(Ht.value=cr(zt.children).forEach(function(hn){hn.props.selected=Ht.multiple?Ht.defaultValue.indexOf(hn.props.value)!=-1:Ht.defaultValue==hn.props.value})),Pt.props=Ht}Mt&&zt.class!=zt.className&&(Hi.enumerable="className"in zt,zt.className!=null&&(Ht.class=zt.className),Object.defineProperty(Ht,"className",Hi)),Pt.$$typeof=ti,Ji&&Ji(Pt)};var xo=Kt.__r;Kt.__r=function(Pt){xo&&xo(Pt),Ga=Pt.__c};var xi={ReactCurrentDispatcher:{current:{readContext:function(Pt){return Ga.__n[Pt.__c].props.value}}}},Ki="17.0.2";function br(Pt){return cn.bind(null,Pt)}function Rl(Pt){return!!Pt&&Pt.$$typeof===ti}function Or(Pt){return Rl(Pt)?or.apply(null,arguments):Pt}function ea(Pt){return!!Pt.__k&&(Rn(null,Pt),!0)}function Oc(Pt){return Pt&&(Pt.base||Pt.nodeType===1&&Pt)||null}var So=function(Pt,Mt){return Pt(Mt)},oo=function(Pt,Mt){return Pt(Mt)},Ah=zn,Ii={useState:Ei,useReducer:wi,useEffect:Ci,useLayoutEffect:Lr,useRef:Tn,useImperativeHandle:En,useMemo:Un,useCallback:qn,useContext:_r,useDebugValue:Zr,version:"17.0.2",Children:Zi,render:wo,hydrate:_s,unmountComponentAtNode:ea,createPortal:ei,createElement:cn,createContext:Vn,createFactory:br,cloneElement:Or,createRef:an,Fragment:zn,isValidElement:Rl,findDOMNode:Oc,Component:dn,PureComponent:qi,memo:uo,forwardRef:zs,flushSync:oo,unstable_batchedUpdates:So,StrictMode:zn,Suspense:ds,SuspenseList:Hr,lazy:Ir,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:xi},ao=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ii,version:Ki,Children:Zi,render:wo,hydrate:_s,unmountComponentAtNode:ea,createPortal:ei,createFactory:br,cloneElement:Or,isValidElement:Rl,findDOMNode:Oc,PureComponent:qi,memo:uo,forwardRef:zs,flushSync:oo,unstable_batchedUpdates:So,StrictMode:Ah,Suspense:ds,SuspenseList:Hr,lazy:Ir,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:xi,createElement:cn,createContext:Vn,createRef:an,Fragment:zn,Component:dn,useState:Ei,useReducer:wi,useEffect:Ci,useLayoutEffect:Lr,useRef:Tn,useImperativeHandle:En,useMemo:Un,useCallback:qn,useContext:_r,useDebugValue:Zr,useErrorBoundary:yr}),Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:{};function tu(Pt){return Pt&&Pt.__esModule&&Object.prototype.hasOwnProperty.call(Pt,"default")?Pt.default:Pt}function cc(Pt){if(Pt.__esModule)return Pt;var Mt=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(Pt).forEach(function(zt){var Ht=Object.getOwnPropertyDescriptor(Pt,zt);Object.defineProperty(Mt,zt,Ht.get?Ht:{enumerable:!0,get:function(){return Pt[zt]}})}),Mt}var Hs={exports:{}};function $o(){}$o.prototype={on:function(Pt,Mt,zt){var Ht=this.e||(this.e={});return(Ht[Pt]||(Ht[Pt]=[])).push({fn:Mt,ctx:zt}),this},once:function(Pt,Mt,zt){var Ht=this;function Ut(){Ht.off(Pt,Ut),Mt.apply(zt,arguments)}return Ut._=Mt,this.on(Pt,Ut,zt)},emit:function(Pt){var Mt=[].slice.call(arguments,1),zt=((this.e||(this.e={}))[Pt]||[]).slice(),Ht=0,Ut=zt.length;for(Ht;Ht<Ut;Ht++)zt[Ht].fn.apply(zt[Ht].ctx,Mt);return this},off:function(Pt,Mt){var zt=this.e||(this.e={}),Ht=zt[Pt],Ut=[];if(Ht&&Mt)for(var Qt=0,hn=Ht.length;Qt<hn;Qt++)Ht[Qt].fn!==Mt&&Ht[Qt].fn._!==Mt&&Ut.push(Ht[Qt]);return Ut.length?zt[Pt]=Ut:delete zt[Pt],this}},Hs.exports=$o,Hs.exports.TinyEmitter=$o;var Wa=Hs.exports,ta={exports:{}},$c={},Ba=cc(ao),Xl={exports:{}},el="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Yu=el,nu=Yu;function Su(){}function ll(){}ll.resetWarningCache=Su;var cd=function(){function Pt(Ht,Ut,Qt,hn,xn,$n){if($n!==nu){var Mn=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Mn.name="Invariant Violation",Mn}}Pt.isRequired=Pt;function Mt(){return Pt}var zt={array:Pt,bool:Pt,func:Pt,number:Pt,object:Pt,string:Pt,symbol:Pt,any:Pt,arrayOf:Mt,element:Pt,elementType:Pt,instanceOf:Mt,node:Pt,objectOf:Mt,oneOf:Mt,oneOfType:Mt,shape:Mt,exact:Mt,checkPropTypes:ll,resetWarningCache:Su};return zt.PropTypes=zt,zt};Xl.exports=cd();function Lh(Pt){var Mt,zt,Ht="";if(typeof Pt=="string"||typeof Pt=="number")Ht+=Pt;else if(typeof Pt=="object")if(Array.isArray(Pt))for(Mt=0;Mt<Pt.length;Mt++)Pt[Mt]&&(zt=Lh(Pt[Mt]))&&(Ht&&(Ht+=" "),Ht+=zt);else for(Mt in Pt)Pt[Mt]&&(Ht&&(Ht+=" "),Ht+=Mt);return Ht}function Xu(){for(var Pt=0,Mt,zt,Ht="";Pt<arguments.length;)(Mt=arguments[Pt++])&&(zt=Lh(Mt))&&(Ht&&(Ht+=" "),Ht+=zt);return Ht}var To=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xu}),uc=cc(To),ho={},Ml={};Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.findInArray=sp,Ml.isFunction=ap,Ml.isNum=ud,Ml.int=Zu,Ml.dontSetMe=lp;function sp(Pt,Mt){for(var zt=0,Ht=Pt.length;zt<Ht;zt++)if(Mt.apply(Mt,[Pt[zt],zt,Pt]))return Pt[zt]}function ap(Pt){return typeof Pt=="function"||Object.prototype.toString.call(Pt)==="[object Function]"}function ud(Pt){return typeof Pt=="number"&&!isNaN(Pt)}function Zu(Pt){return parseInt(Pt,10)}function lp(Pt,Mt,zt){if(Pt[Mt])return new Error("Invalid prop ".concat(Mt," passed to ").concat(zt," - do not set this, set it on the child."))}var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.getPrefix=Cu,Zl.browserPrefixToKey=cp,Zl.browserPrefixToStyle=yg,Zl.default=void 0;var la=["Moz","Webkit","O","ms"];function Cu(){var Pt,Mt,zt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var Ht=(Pt=window.document)===null||Pt===void 0||(Mt=Pt.documentElement)===null||Mt===void 0?void 0:Mt.style;if(!Ht||zt in Ht)return"";for(var Ut=0;Ut<la.length;Ut++)if(cp(zt,la[Ut])in Ht)return la[Ut];return""}function cp(Pt,Mt){return Mt?"".concat(Mt).concat(Om(Pt)):Pt}function yg(Pt,Mt){return Mt?"-".concat(Mt.toLowerCase(),"-").concat(Pt):Pt}function Om(Pt){for(var Mt="",zt=!0,Ht=0;Ht<Pt.length;Ht++)zt?(Mt+=Pt[Ht].toUpperCase(),zt=!1):Pt[Ht]==="-"?zt=!0:Mt+=Pt[Ht];return Mt}var vg=Cu();Zl.default=vg;function Kl(Pt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kl=function(Mt){return typeof Mt}:Kl=function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},Kl(Pt)}Object.defineProperty(ho,"__esModule",{value:!0}),ho.matchesSelector=fd,ho.matchesSelectorAndParentsTo=Rm,ho.addEvent=_g,ho.removeEvent=bg,ho.outerHeight=up,ho.outerWidth=ef,ho.innerHeight=xg,ho.innerWidth=Ta,ho.offsetXYFromParent=hp,ho.createCSSTransform=Rc,ho.createSVGTransform=hc,ho.getTranslation=dc,ho.getTouch=pd,ho.getTouchIdentifier=tf,ho.addUserSelectStyles=Mm,ho.removeUserSelectStyles=gd,ho.addClassName=nf,ho.removeClassName=Ih;var cl=Ml,Qd=$m(Zl);function hs(Pt){if(typeof WeakMap!="function")return null;var Mt=new WeakMap,zt=new WeakMap;return(hs=function(Ht){return Ht?zt:Mt})(Pt)}function $m(Pt,Mt){if(!Mt&&Pt&&Pt.__esModule)return Pt;if(Pt===null||Kl(Pt)!=="object"&&typeof Pt!="function")return{default:Pt};var zt=hs(Mt);if(zt&&zt.has(Pt))return zt.get(Pt);var Ht={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Qt in Pt)if(Qt!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Qt)){var hn=Ut?Object.getOwnPropertyDescriptor(Pt,Qt):null;hn&&(hn.get||hn.set)?Object.defineProperty(Ht,Qt,hn):Ht[Qt]=Pt[Qt]}return Ht.default=Pt,zt&&zt.set(Pt,Ht),Ht}function xl(Pt,Mt){var zt=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(Pt);Mt&&(Ht=Ht.filter(function(Ut){return Object.getOwnPropertyDescriptor(Pt,Ut).enumerable})),zt.push.apply(zt,Ht)}return zt}function Ph(Pt){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt]!=null?arguments[Mt]:{};Mt%2?xl(Object(zt),!0).forEach(function(Ht){hd(Pt,Ht,zt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors(zt)):xl(Object(zt)).forEach(function(Ht){Object.defineProperty(Pt,Ht,Object.getOwnPropertyDescriptor(zt,Ht))})}return Pt}function hd(Pt,Mt,zt){return Mt in Pt?Object.defineProperty(Pt,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):Pt[Mt]=zt,Pt}var dd="";function fd(Pt,Mt){return dd||(dd=(0,cl.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(zt){return(0,cl.isFunction)(Pt[zt])})),(0,cl.isFunction)(Pt[dd])?Pt[dd](Mt):!1}function Rm(Pt,Mt,zt){var Ht=Pt;do{if(fd(Ht,Mt))return!0;if(Ht===zt)return!1;Ht=Ht.parentNode}while(Ht);return!1}function _g(Pt,Mt,zt,Ht){if(Pt){var Ut=Ph({capture:!0},Ht);Pt.addEventListener?Pt.addEventListener(Mt,zt,Ut):Pt.attachEvent?Pt.attachEvent("on"+Mt,zt):Pt["on"+Mt]=zt}}function bg(Pt,Mt,zt,Ht){if(Pt){var Ut=Ph({capture:!0},Ht);Pt.removeEventListener?Pt.removeEventListener(Mt,zt,Ut):Pt.detachEvent?Pt.detachEvent("on"+Mt,zt):Pt["on"+Mt]=null}}function up(Pt){var Mt=Pt.clientHeight,zt=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Mt+=(0,cl.int)(zt.borderTopWidth),Mt+=(0,cl.int)(zt.borderBottomWidth),Mt}function ef(Pt){var Mt=Pt.clientWidth,zt=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Mt+=(0,cl.int)(zt.borderLeftWidth),Mt+=(0,cl.int)(zt.borderRightWidth),Mt}function xg(Pt){var Mt=Pt.clientHeight,zt=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Mt-=(0,cl.int)(zt.paddingTop),Mt-=(0,cl.int)(zt.paddingBottom),Mt}function Ta(Pt){var Mt=Pt.clientWidth,zt=Pt.ownerDocument.defaultView.getComputedStyle(Pt);return Mt-=(0,cl.int)(zt.paddingLeft),Mt-=(0,cl.int)(zt.paddingRight),Mt}function hp(Pt,Mt,zt){var Ht=Mt===Mt.ownerDocument.body,Ut=Ht?{left:0,top:0}:Mt.getBoundingClientRect(),Qt=(Pt.clientX+Mt.scrollLeft-Ut.left)/zt,hn=(Pt.clientY+Mt.scrollTop-Ut.top)/zt;return{x:Qt,y:hn}}function Rc(Pt,Mt){var zt=dc(Pt,Mt,"px");return hd({},(0,Qd.browserPrefixToKey)("transform",Qd.default),zt)}function hc(Pt,Mt){var zt=dc(Pt,Mt,"");return zt}function dc(Pt,Mt,zt){var Ht=Pt.x,Ut=Pt.y,Qt="translate(".concat(Ht).concat(zt,",").concat(Ut).concat(zt,")");if(Mt){var hn="".concat(typeof Mt.x=="string"?Mt.x:Mt.x+zt),xn="".concat(typeof Mt.y=="string"?Mt.y:Mt.y+zt);Qt="translate(".concat(hn,", ").concat(xn,")")+Qt}return Qt}function pd(Pt,Mt){return Pt.targetTouches&&(0,cl.findInArray)(Pt.targetTouches,function(zt){return Mt===zt.identifier})||Pt.changedTouches&&(0,cl.findInArray)(Pt.changedTouches,function(zt){return Mt===zt.identifier})}function tf(Pt){if(Pt.targetTouches&&Pt.targetTouches[0])return Pt.targetTouches[0].identifier;if(Pt.changedTouches&&Pt.changedTouches[0])return Pt.changedTouches[0].identifier}function Mm(Pt){if(Pt){var Mt=Pt.getElementById("react-draggable-style-el");Mt||(Mt=Pt.createElement("style"),Mt.type="text/css",Mt.id="react-draggable-style-el",Mt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,Mt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,Pt.getElementsByTagName("head")[0].appendChild(Mt)),Pt.body&&nf(Pt.body,"react-draggable-transparent-selection")}}function gd(Pt){if(Pt)try{if(Pt.body&&Ih(Pt.body,"react-draggable-transparent-selection"),Pt.selection)Pt.selection.empty();else{var Mt=(Pt.defaultView||window).getSelection();Mt&&Mt.type!=="Caret"&&Mt.removeAllRanges()}}catch{}}function nf(Pt,Mt){Pt.classList?Pt.classList.add(Mt):Pt.className.match(new RegExp("(?:^|\\s)".concat(Mt,"(?!\\S)")))||(Pt.className+=" ".concat(Mt))}function Ih(Pt,Mt){Pt.classList?Pt.classList.remove(Mt):Pt.className=Pt.className.replace(new RegExp("(?:^|\\s)".concat(Mt,"(?!\\S)"),"g"),"")}var wl={};Object.defineProperty(wl,"__esModule",{value:!0}),wl.getBoundPosition=wg,wl.snapToGrid=Eg,wl.canDragX=rf,wl.canDragY=Ku,wl.getControlPosition=dp,wl.createCoreData=md,wl.createDraggableData=qa;var ul=Ml,Oh=ho;function wg(Pt,Mt,zt){if(!Pt.props.bounds)return[Mt,zt];var Ht=Pt.props.bounds;Ht=typeof Ht=="string"?Ht:Sg(Ht);var Ut=xa(Pt);if(typeof Ht=="string"){var Qt=Ut.ownerDocument,hn=Qt.defaultView,xn;if(Ht==="parent"?xn=Ut.parentNode:xn=Qt.querySelector(Ht),!(xn instanceof hn.HTMLElement))throw new Error('Bounds selector "'+Ht+'" could not find an element.');var $n=xn,Mn=hn.getComputedStyle(Ut),On=hn.getComputedStyle($n);Ht={left:-Ut.offsetLeft+(0,ul.int)(On.paddingLeft)+(0,ul.int)(Mn.marginLeft),top:-Ut.offsetTop+(0,ul.int)(On.paddingTop)+(0,ul.int)(Mn.marginTop),right:(0,Oh.innerWidth)($n)-(0,Oh.outerWidth)(Ut)-Ut.offsetLeft+(0,ul.int)(On.paddingRight)-(0,ul.int)(Mn.marginRight),bottom:(0,Oh.innerHeight)($n)-(0,Oh.outerHeight)(Ut)-Ut.offsetTop+(0,ul.int)(On.paddingBottom)-(0,ul.int)(Mn.marginBottom)}}return(0,ul.isNum)(Ht.right)&&(Mt=Math.min(Mt,Ht.right)),(0,ul.isNum)(Ht.bottom)&&(zt=Math.min(zt,Ht.bottom)),(0,ul.isNum)(Ht.left)&&(Mt=Math.max(Mt,Ht.left)),(0,ul.isNum)(Ht.top)&&(zt=Math.max(zt,Ht.top)),[Mt,zt]}function Eg(Pt,Mt,zt){var Ht=Math.round(Mt/Pt[0])*Pt[0],Ut=Math.round(zt/Pt[1])*Pt[1];return[Ht,Ut]}function rf(Pt){return Pt.props.axis==="both"||Pt.props.axis==="x"}function Ku(Pt){return Pt.props.axis==="both"||Pt.props.axis==="y"}function dp(Pt,Mt,zt){var Ht=typeof Mt=="number"?(0,Oh.getTouch)(Pt,Mt):null;if(typeof Mt=="number"&&!Ht)return null;var Ut=xa(zt),Qt=zt.props.offsetParent||Ut.offsetParent||Ut.ownerDocument.body;return(0,Oh.offsetXYFromParent)(Ht||Pt,Qt,zt.props.scale)}function md(Pt,Mt,zt){var Ht=Pt.state,Ut=!(0,ul.isNum)(Ht.lastX),Qt=xa(Pt);return Ut?{node:Qt,deltaX:0,deltaY:0,lastX:Mt,lastY:zt,x:Mt,y:zt}:{node:Qt,deltaX:Mt-Ht.lastX,deltaY:zt-Ht.lastY,lastX:Ht.lastX,lastY:Ht.lastY,x:Mt,y:zt}}function qa(Pt,Mt){var zt=Pt.props.scale;return{node:Mt.node,x:Pt.state.x+Mt.deltaX/zt,y:Pt.state.y+Mt.deltaY/zt,deltaX:Mt.deltaX/zt,deltaY:Mt.deltaY/zt,lastX:Pt.state.x,lastY:Pt.state.y}}function Sg(Pt){return{left:Pt.left,top:Pt.top,right:Pt.right,bottom:Pt.bottom}}function xa(Pt){var Mt=Pt.findDOMNode();if(!Mt)throw new Error("<DraggableCore>: Unmounted during event!");return Mt}var Mc={},Ju={};Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.default=Qu;function Qu(){}function $h(Pt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$h=function(Mt){return typeof Mt}:$h=function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},$h(Pt)}Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.default=void 0;var of=Cg(Ba),Fa=wa(Xl.exports),fp=wa(Ba),Is=ho,Nl=wl,Rh=Ml,ka=wa(Ju);function wa(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function fc(Pt){if(typeof WeakMap!="function")return null;var Mt=new WeakMap,zt=new WeakMap;return(fc=function(Ht){return Ht?zt:Mt})(Pt)}function Cg(Pt,Mt){if(!Mt&&Pt&&Pt.__esModule)return Pt;if(Pt===null||$h(Pt)!=="object"&&typeof Pt!="function")return{default:Pt};var zt=fc(Mt);if(zt&&zt.has(Pt))return zt.get(Pt);var Ht={},Ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Qt in Pt)if(Qt!=="default"&&Object.prototype.hasOwnProperty.call(Pt,Qt)){var hn=Ut?Object.getOwnPropertyDescriptor(Pt,Qt):null;hn&&(hn.get||hn.set)?Object.defineProperty(Ht,Qt,hn):Ht[Qt]=Pt[Qt]}return Ht.default=Pt,zt&&zt.set(Pt,Ht),Ht}function Mh(Pt,Mt){return af(Pt)||ru(Pt,Mt)||eh(Pt,Mt)||sf()}function sf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eh(Pt,Mt){if(Pt){if(typeof Pt=="string")return pp(Pt,Mt);var zt=Object.prototype.toString.call(Pt).slice(8,-1);if(zt==="Object"&&Pt.constructor&&(zt=Pt.constructor.name),zt==="Map"||zt==="Set")return Array.from(Pt);if(zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt))return pp(Pt,Mt)}}function pp(Pt,Mt){(Mt==null||Mt>Pt.length)&&(Mt=Pt.length);for(var zt=0,Ht=new Array(Mt);zt<Mt;zt++)Ht[zt]=Pt[zt];return Ht}function ru(Pt,Mt){var zt=Pt==null?null:typeof Symbol<"u"&&Pt[Symbol.iterator]||Pt["@@iterator"];if(zt!=null){var Ht=[],Ut=!0,Qt=!1,hn,xn;try{for(zt=zt.call(Pt);!(Ut=(hn=zt.next()).done)&&(Ht.push(hn.value),!(Mt&&Ht.length===Mt));Ut=!0);}catch($n){Qt=!0,xn=$n}finally{try{!Ut&&zt.return!=null&&zt.return()}finally{if(Qt)throw xn}}return Ht}}function af(Pt){if(Array.isArray(Pt))return Pt}function Nm(Pt,Mt){if(!(Pt instanceof Mt))throw new TypeError("Cannot call a class as a function")}function lf(Pt,Mt){for(var zt=0;zt<Mt.length;zt++){var Ht=Mt[zt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(Pt,Ht.key,Ht)}}function Dm(Pt,Mt,zt){return Mt&&lf(Pt.prototype,Mt),zt&&lf(Pt,zt),Pt}function iu(Pt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Mt&&Mt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Mt&&gp(Pt,Mt)}function gp(Pt,Mt){return gp=Object.setPrototypeOf||function(zt,Ht){return zt.__proto__=Ht,zt},gp(Pt,Mt)}function Nh(Pt){var Mt=cf();return function(){var zt=yd(Pt),Ht;if(Mt){var Ut=yd(this).constructor;Ht=Reflect.construct(zt,arguments,Ut)}else Ht=zt.apply(this,arguments);return Bm(this,Ht)}}function Bm(Pt,Mt){if(Mt&&($h(Mt)==="object"||typeof Mt=="function"))return Mt;if(Mt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return js(Pt)}function js(Pt){if(Pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pt}function cf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yd(Pt){return yd=Object.setPrototypeOf?Object.getPrototypeOf:function(Mt){return Mt.__proto__||Object.getPrototypeOf(Mt)},yd(Pt)}function El(Pt,Mt,zt){return Mt in Pt?Object.defineProperty(Pt,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):Pt[Mt]=zt,Pt}var Sl={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Nc=Sl.mouse,th=function(Pt){iu(zt,Pt);var Mt=Nh(zt);function zt(){var Ht;Nm(this,zt);for(var Ut=arguments.length,Qt=new Array(Ut),hn=0;hn<Ut;hn++)Qt[hn]=arguments[hn];return Ht=Mt.call.apply(Mt,[this].concat(Qt)),El(js(Ht),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),El(js(Ht),"mounted",!1),El(js(Ht),"handleDragStart",function(xn){if(Ht.props.onMouseDown(xn),!Ht.props.allowAnyClick&&typeof xn.button=="number"&&xn.button!==0)return!1;var $n=Ht.findDOMNode();if(!$n||!$n.ownerDocument||!$n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Mn=$n.ownerDocument;if(!(Ht.props.disabled||!(xn.target instanceof Mn.defaultView.Node)||Ht.props.handle&&!(0,Is.matchesSelectorAndParentsTo)(xn.target,Ht.props.handle,$n)||Ht.props.cancel&&(0,Is.matchesSelectorAndParentsTo)(xn.target,Ht.props.cancel,$n))){xn.type==="touchstart"&&xn.preventDefault();var On=(0,Is.getTouchIdentifier)(xn);Ht.setState({touchIdentifier:On});var ur=(0,Nl.getControlPosition)(xn,On,js(Ht));if(ur!=null){var Sr=ur.x,Pr=ur.y,Wr=(0,Nl.createCoreData)(js(Ht),Sr,Pr);(0,ka.default)("DraggableCore: handleDragStart: %j",Wr),(0,ka.default)("calling",Ht.props.onStart);var ai=Ht.props.onStart(xn,Wr);ai===!1||Ht.mounted===!1||(Ht.props.enableUserSelectHack&&(0,Is.addUserSelectStyles)(Mn),Ht.setState({dragging:!0,lastX:Sr,lastY:Pr}),(0,Is.addEvent)(Mn,Nc.move,Ht.handleDrag),(0,Is.addEvent)(Mn,Nc.stop,Ht.handleDragStop))}}}),El(js(Ht),"handleDrag",function(xn){var $n=(0,Nl.getControlPosition)(xn,Ht.state.touchIdentifier,js(Ht));if($n!=null){var Mn=$n.x,On=$n.y;if(Array.isArray(Ht.props.grid)){var ur=Mn-Ht.state.lastX,Sr=On-Ht.state.lastY,Pr=(0,Nl.snapToGrid)(Ht.props.grid,ur,Sr),Wr=Mh(Pr,2);if(ur=Wr[0],Sr=Wr[1],!ur&&!Sr)return;Mn=Ht.state.lastX+ur,On=Ht.state.lastY+Sr}var ai=(0,Nl.createCoreData)(js(Ht),Mn,On);(0,ka.default)("DraggableCore: handleDrag: %j",ai);var oi=Ht.props.onDrag(xn,ai);if(oi===!1||Ht.mounted===!1){try{Ht.handleDragStop(new MouseEvent("mouseup"))}catch{var _i=document.createEvent("MouseEvents");_i.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Ht.handleDragStop(_i)}return}Ht.setState({lastX:Mn,lastY:On})}}),El(js(Ht),"handleDragStop",function(xn){if(Ht.state.dragging){var $n=(0,Nl.getControlPosition)(xn,Ht.state.touchIdentifier,js(Ht));if($n!=null){var Mn=$n.x,On=$n.y,ur=(0,Nl.createCoreData)(js(Ht),Mn,On),Sr=Ht.props.onStop(xn,ur);if(Sr===!1||Ht.mounted===!1)return!1;var Pr=Ht.findDOMNode();Pr&&Ht.props.enableUserSelectHack&&(0,Is.removeUserSelectStyles)(Pr.ownerDocument),(0,ka.default)("DraggableCore: handleDragStop: %j",ur),Ht.setState({dragging:!1,lastX:NaN,lastY:NaN}),Pr&&((0,ka.default)("DraggableCore: Removing handlers"),(0,Is.removeEvent)(Pr.ownerDocument,Nc.move,Ht.handleDrag),(0,Is.removeEvent)(Pr.ownerDocument,Nc.stop,Ht.handleDragStop))}}}),El(js(Ht),"onMouseDown",function(xn){return Nc=Sl.mouse,Ht.handleDragStart(xn)}),El(js(Ht),"onMouseUp",function(xn){return Nc=Sl.mouse,Ht.handleDragStop(xn)}),El(js(Ht),"onTouchStart",function(xn){return Nc=Sl.touch,Ht.handleDragStart(xn)}),El(js(Ht),"onTouchEnd",function(xn){return Nc=Sl.touch,Ht.handleDragStop(xn)}),Ht}return Dm(zt,[{key:"componentDidMount",value:function(){this.mounted=!0;var Ht=this.findDOMNode();Ht&&(0,Is.addEvent)(Ht,Sl.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Ht=this.findDOMNode();if(Ht){var Ut=Ht.ownerDocument;(0,Is.removeEvent)(Ut,Sl.mouse.move,this.handleDrag),(0,Is.removeEvent)(Ut,Sl.touch.move,this.handleDrag),(0,Is.removeEvent)(Ut,Sl.mouse.stop,this.handleDragStop),(0,Is.removeEvent)(Ut,Sl.touch.stop,this.handleDragStop),(0,Is.removeEvent)(Ht,Sl.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Is.removeUserSelectStyles)(Ut)}}},{key:"findDOMNode",value:function(){var Ht,Ut,Qt;return(Ht=(Ut=this.props)===null||Ut===void 0||(Qt=Ut.nodeRef)===null||Qt===void 0?void 0:Qt.current)!==null&&Ht!==void 0?Ht:fp.default.findDOMNode(this)}},{key:"render",value:function(){return of.cloneElement(of.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),zt}(of.Component);Mc.default=th,El(th,"displayName","DraggableCore"),El(th,"propTypes",{allowAnyClick:Fa.default.bool,disabled:Fa.default.bool,enableUserSelectHack:Fa.default.bool,offsetParent:function(Pt,Mt){if(Pt[Mt]&&Pt[Mt].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Fa.default.arrayOf(Fa.default.number),handle:Fa.default.string,cancel:Fa.default.string,nodeRef:Fa.default.object,onStart:Fa.default.func,onDrag:Fa.default.func,onStop:Fa.default.func,onMouseDown:Fa.default.func,scale:Fa.default.number,className:Rh.dontSetMe,style:Rh.dontSetMe,transform:Rh.dontSetMe}),El(th,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(Pt){function Mt(di){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mt=function(Li){return typeof Li}:Mt=function(Li){return Li&&typeof Symbol=="function"&&Li.constructor===Symbol&&Li!==Symbol.prototype?"symbol":typeof Li},Mt(di)}Object.defineProperty(Pt,"__esModule",{value:!0}),Object.defineProperty(Pt,"DraggableCore",{enumerable:!0,get:function(){return Mn.default}}),Pt.default=void 0;var zt=Wr(Ba),Ht=Sr(Xl.exports),Ut=Sr(Ba),Qt=Sr(uc),hn=ho,xn=wl,$n=Ml,Mn=Sr(Mc),On=Sr(Ju),ur=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function Sr(di){return di&&di.__esModule?di:{default:di}}function Pr(di){if(typeof WeakMap!="function")return null;var Li=new WeakMap,$i=new WeakMap;return(Pr=function(Pi){return Pi?$i:Li})(di)}function Wr(di,Li){if(!Li&&di&&di.__esModule)return di;if(di===null||Mt(di)!=="object"&&typeof di!="function")return{default:di};var $i=Pr(Li);if($i&&$i.has(di))return $i.get(di);var Pi={},Fi=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ao in di)if(Ao!=="default"&&Object.prototype.hasOwnProperty.call(di,Ao)){var ba=Fi?Object.getOwnPropertyDescriptor(di,Ao):null;ba&&(ba.get||ba.set)?Object.defineProperty(Pi,Ao,ba):Pi[Ao]=di[Ao]}return Pi.default=di,$i&&$i.set(di,Pi),Pi}function ai(){return ai=Object.assign||function(di){for(var Li=1;Li<arguments.length;Li++){var $i=arguments[Li];for(var Pi in $i)Object.prototype.hasOwnProperty.call($i,Pi)&&(di[Pi]=$i[Pi])}return di},ai.apply(this,arguments)}function oi(di,Li){if(di==null)return{};var $i=_i(di,Li),Pi,Fi;if(Object.getOwnPropertySymbols){var Ao=Object.getOwnPropertySymbols(di);for(Fi=0;Fi<Ao.length;Fi++)Pi=Ao[Fi],!(Li.indexOf(Pi)>=0)&&(!Object.prototype.propertyIsEnumerable.call(di,Pi)||($i[Pi]=di[Pi]))}return $i}function _i(di,Li){if(di==null)return{};var $i={},Pi=Object.keys(di),Fi,Ao;for(Ao=0;Ao<Pi.length;Ao++)Fi=Pi[Ao],!(Li.indexOf(Fi)>=0)&&($i[Fi]=di[Fi]);return $i}function Oi(di,Li){var $i=Object.keys(di);if(Object.getOwnPropertySymbols){var Pi=Object.getOwnPropertySymbols(di);Li&&(Pi=Pi.filter(function(Fi){return Object.getOwnPropertyDescriptor(di,Fi).enumerable})),$i.push.apply($i,Pi)}return $i}function Eo(di){for(var Li=1;Li<arguments.length;Li++){var $i=arguments[Li]!=null?arguments[Li]:{};Li%2?Oi(Object($i),!0).forEach(function(Pi){qu(di,Pi,$i[Pi])}):Object.getOwnPropertyDescriptors?Object.defineProperties(di,Object.getOwnPropertyDescriptors($i)):Oi(Object($i)).forEach(function(Pi){Object.defineProperty(di,Pi,Object.getOwnPropertyDescriptor($i,Pi))})}return di}function mo(di,Li){return Ca(di)||_a(di,Li)||Co(di,Li)||lo()}function lo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Co(di,Li){if(di){if(typeof di=="string")return yo(di,Li);var $i=Object.prototype.toString.call(di).slice(8,-1);if($i==="Object"&&di.constructor&&($i=di.constructor.name),$i==="Map"||$i==="Set")return Array.from(di);if($i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($i))return yo(di,Li)}}function yo(di,Li){(Li==null||Li>di.length)&&(Li=di.length);for(var $i=0,Pi=new Array(Li);$i<Li;$i++)Pi[$i]=di[$i];return Pi}function _a(di,Li){var $i=di==null?null:typeof Symbol<"u"&&di[Symbol.iterator]||di["@@iterator"];if($i!=null){var Pi=[],Fi=!0,Ao=!1,ba,bl;try{for($i=$i.call(di);!(Fi=(ba=$i.next()).done)&&(Pi.push(ba.value),!(Li&&Pi.length===Li));Fi=!0);}catch(qs){Ao=!0,bl=qs}finally{try{!Fi&&$i.return!=null&&$i.return()}finally{if(Ao)throw bl}}return Pi}}function Ca(di){if(Array.isArray(di))return di}function Gs(di,Li){if(!(di instanceof Li))throw new TypeError("Cannot call a class as a function")}function Ws(di,Li){for(var $i=0;$i<Li.length;$i++){var Pi=Li[$i];Pi.enumerable=Pi.enumerable||!1,Pi.configurable=!0,"value"in Pi&&(Pi.writable=!0),Object.defineProperty(di,Pi.key,Pi)}}function Gu(di,Li,$i){return Li&&Ws(di.prototype,Li),$i&&Ws(di,$i),di}function Ic(di,Li){if(typeof Li!="function"&&Li!==null)throw new TypeError("Super expression must either be null or a function");di.prototype=Object.create(Li&&Li.prototype,{constructor:{value:di,writable:!0,configurable:!0}}),Li&&Jd(di,Li)}function Jd(di,Li){return Jd=Object.setPrototypeOf||function($i,Pi){return $i.__proto__=Pi,$i},Jd(di,Li)}function Wu(di){var Li=pv();return function(){var $i=pg(di),Pi;if(Li){var Fi=pg(this).constructor;Pi=Reflect.construct($i,arguments,Fi)}else Pi=$i.apply(this,arguments);return kh(this,Pi)}}function kh(di,Li){if(Li&&(Mt(Li)==="object"||typeof Li=="function"))return Li;if(Li!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ql(di)}function ql(di){if(di===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return di}function pv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pg(di){return pg=Object.setPrototypeOf?Object.getPrototypeOf:function(Li){return Li.__proto__||Object.getPrototypeOf(Li)},pg(di)}function qu(di,Li,$i){return Li in di?Object.defineProperty(di,Li,{value:$i,enumerable:!0,configurable:!0,writable:!0}):di[Li]=$i,di}var aa=function(di){Ic($i,di);var Li=Wu($i);function $i(Pi){var Fi;return Gs(this,$i),Fi=Li.call(this,Pi),qu(ql(Fi),"onDragStart",function(Ao,ba){(0,On.default)("Draggable: onDragStart: %j",ba);var bl=Fi.props.onStart(Ao,(0,xn.createDraggableData)(ql(Fi),ba));if(bl===!1)return!1;Fi.setState({dragging:!0,dragged:!0})}),qu(ql(Fi),"onDrag",function(Ao,ba){if(!Fi.state.dragging)return!1;(0,On.default)("Draggable: onDrag: %j",ba);var bl=(0,xn.createDraggableData)(ql(Fi),ba),qs={x:bl.x,y:bl.y};if(Fi.props.bounds){var gg=qs.x,ld=qs.y;qs.x+=Fi.state.slackX,qs.y+=Fi.state.slackY;var op=(0,xn.getBoundPosition)(ql(Fi),qs.x,qs.y),Im=mo(op,2),gv=Im[0],mv=Im[1];qs.x=gv,qs.y=mv,qs.slackX=Fi.state.slackX+(gg-qs.x),qs.slackY=Fi.state.slackY+(ld-qs.y),bl.x=qs.x,bl.y=qs.y,bl.deltaX=qs.x-Fi.state.x,bl.deltaY=qs.y-Fi.state.y}var V_=Fi.props.onDrag(Ao,bl);if(V_===!1)return!1;Fi.setState(qs)}),qu(ql(Fi),"onDragStop",function(Ao,ba){if(!Fi.state.dragging)return!1;var bl=Fi.props.onStop(Ao,(0,xn.createDraggableData)(ql(Fi),ba));if(bl===!1)return!1;(0,On.default)("Draggable: onDragStop: %j",ba);var qs={dragging:!1,slackX:0,slackY:0},gg=Boolean(Fi.props.position);if(gg){var ld=Fi.props.position,op=ld.x,Im=ld.y;qs.x=op,qs.y=Im}Fi.setState(qs)}),Fi.state={dragging:!1,dragged:!1,x:Pi.position?Pi.position.x:Pi.defaultPosition.x,y:Pi.position?Pi.position.y:Pi.defaultPosition.y,prevPropsPosition:Eo({},Pi.position),slackX:0,slackY:0,isElementSVG:!1},Pi.position&&!(Pi.onDrag||Pi.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Fi}return Gu($i,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Pi,Fi,Ao;return(Pi=(Fi=this.props)===null||Fi===void 0||(Ao=Fi.nodeRef)===null||Ao===void 0?void 0:Ao.current)!==null&&Pi!==void 0?Pi:Ut.default.findDOMNode(this)}},{key:"render",value:function(){var Pi,Fi=this.props;Fi.axis,Fi.bounds;var Ao=Fi.children,ba=Fi.defaultPosition,bl=Fi.defaultClassName,qs=Fi.defaultClassNameDragging,gg=Fi.defaultClassNameDragged,ld=Fi.position,op=Fi.positionOffset;Fi.scale;var Im=oi(Fi,ur),gv={},mv=null,V_=Boolean(ld),Xb=!V_||this.state.dragging,Zb=ld||ba,Kb={x:(0,xn.canDragX)(this)&&Xb?this.state.x:Zb.x,y:(0,xn.canDragY)(this)&&Xb?this.state.y:Zb.y};this.state.isElementSVG?mv=(0,hn.createSVGTransform)(Kb,op):gv=(0,hn.createCSSTransform)(Kb,op);var Sw=(0,Qt.default)(Ao.props.className||"",bl,(Pi={},qu(Pi,qs,this.state.dragging),qu(Pi,gg,this.state.dragged),Pi));return zt.createElement(Mn.default,ai({},Im,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),zt.cloneElement(zt.Children.only(Ao),{className:Sw,style:Eo(Eo({},Ao.props.style),gv),transform:mv}))}}],[{key:"getDerivedStateFromProps",value:function(Pi,Fi){var Ao=Pi.position,ba=Fi.prevPropsPosition;return Ao&&(!ba||Ao.x!==ba.x||Ao.y!==ba.y)?((0,On.default)("Draggable: getDerivedStateFromProps %j",{position:Ao,prevPropsPosition:ba}),{x:Ao.x,y:Ao.y,prevPropsPosition:Eo({},Ao)}):null}}]),$i}(zt.Component);Pt.default=aa,qu(aa,"displayName","Draggable"),qu(aa,"propTypes",Eo(Eo({},Mn.default.propTypes),{},{axis:Ht.default.oneOf(["both","x","y","none"]),bounds:Ht.default.oneOfType([Ht.default.shape({left:Ht.default.number,right:Ht.default.number,top:Ht.default.number,bottom:Ht.default.number}),Ht.default.string,Ht.default.oneOf([!1])]),defaultClassName:Ht.default.string,defaultClassNameDragging:Ht.default.string,defaultClassNameDragged:Ht.default.string,defaultPosition:Ht.default.shape({x:Ht.default.number,y:Ht.default.number}),positionOffset:Ht.default.shape({x:Ht.default.oneOfType([Ht.default.number,Ht.default.string]),y:Ht.default.oneOfType([Ht.default.number,Ht.default.string])}),position:Ht.default.shape({x:Ht.default.number,y:Ht.default.number}),className:$n.dontSetMe,style:$n.dontSetMe,transform:$n.dontSetMe})),qu(aa,"defaultProps",Eo(Eo({},Mn.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}($c);var nh=$c,vd=nh.default,_d=nh.DraggableCore;ta.exports=vd,ta.exports.default=vd,ta.exports.DraggableCore=_d;var uf=ta.exports,Fm=["second","minute","hour","day","week","month","year"];function ou(Pt,Mt){if(Mt===0)return["just now","right now"];var zt=Fm[Math.floor(Mt/2)];return Pt>1&&(zt+="s"),[Pt+" "+zt+" ago","in "+Pt+" "+zt]}var zm=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"];function mp(Pt,Mt){if(Mt===0)return["\u521A\u521A","\u7247\u523B\u540E"];var zt=zm[~~(Mt/2)];return[Pt+" "+zt+"\u524D",Pt+" "+zt+"\u540E"]}var hf={},Ys=function(Pt,Mt){hf[Pt]=Mt},Tg=function(Pt){return hf[Pt]||hf.en_US},Vs=[60,60,24,7,365/7/12,12];function Dh(Pt){return Pt instanceof Date?Pt:!isNaN(Pt)||/^\d+$/.test(Pt)?new Date(parseInt(Pt)):(Pt=(Pt||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(Pt))}function Dc(Pt,Mt){var zt=Pt<0?1:0;Pt=Math.abs(Pt);for(var Ht=Pt,Ut=0;Pt>=Vs[Ut]&&Ut<Vs.length;Ut++)Pt/=Vs[Ut];return Pt=Math.floor(Pt),Ut*=2,Pt>(Ut===0?9:1)&&(Ut+=1),Mt(Pt,Ut,Ht)[zt].replace("%s",Pt.toString())}function Tu(Pt,Mt){var zt=Mt?Dh(Mt):new Date;return(+zt-+Dh(Pt))/1e3}function kg(Pt){for(var Mt=1,zt=0,Ht=Math.abs(Pt);Pt>=Vs[zt]&&zt<Vs.length;zt++)Pt/=Vs[zt],Mt*=Vs[zt];return Ht=Ht%Mt,Ht=Ht?Mt-Ht:Mt,Math.ceil(Ht)}var yp=function(Pt,Mt,zt){var Ht=Tu(Pt,zt&&zt.relativeDate);return Dc(Ht,Tg(Mt))},df="timeago-id";function bd(Pt){return Pt.getAttribute("datetime")}function Ag(Pt,Mt){Pt.setAttribute(df,Mt)}function ku(Pt){return parseInt(Pt.getAttribute(df))}var xd={},Bh=function(Pt){clearTimeout(Pt),delete xd[Pt]};function vp(Pt,Mt,zt,Ht){Bh(ku(Pt));var Ut=Ht.relativeDate,Qt=Ht.minInterval,hn=Tu(Mt,Ut);Pt.innerText=Dc(hn,zt);var xn=setTimeout(function(){vp(Pt,Mt,zt,Ht)},Math.min(Math.max(kg(hn),Qt||1)*1e3,2147483647));xd[xn]=0,Ag(Pt,xn)}function pc(Pt){Pt?Bh(ku(Pt)):Object.keys(xd).forEach(Bh)}function ff(Pt,Mt,zt){var Ht=Pt.length?Pt:[Pt];return Ht.forEach(function(Ut){vp(Ut,bd(Ut),Tg(Mt),zt||{})}),Ht}Ys("en_US",ou),Ys("zh_CN",mp);var pf=function(){var Pt=function(Mt,zt){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ht,Ut){Ht.__proto__=Ut}||function(Ht,Ut){for(var Qt in Ut)Ut.hasOwnProperty(Qt)&&(Ht[Qt]=Ut[Qt])},Pt(Mt,zt)};return function(Mt,zt){Pt(Mt,zt);function Ht(){this.constructor=Mt}Mt.prototype=zt===null?Object.create(zt):(Ht.prototype=zt.prototype,new Ht)}}(),Au=function(){return Au=Object.assign||function(Pt){for(var Mt,zt=1,Ht=arguments.length;zt<Ht;zt++){Mt=arguments[zt];for(var Ut in Mt)Object.prototype.hasOwnProperty.call(Mt,Ut)&&(Pt[Ut]=Mt[Ut])}return Pt},Au.apply(this,arguments)},Cl=function(Pt,Mt){var zt={};for(var Ht in Pt)Object.prototype.hasOwnProperty.call(Pt,Ht)&&Mt.indexOf(Ht)<0&&(zt[Ht]=Pt[Ht]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Ht=Object.getOwnPropertySymbols(Pt);Ut<Ht.length;Ut++)Mt.indexOf(Ht[Ut])<0&&Object.prototype.propertyIsEnumerable.call(Pt,Ht[Ut])&&(zt[Ht[Ut]]=Pt[Ht[Ut]]);return zt},gf=function(Pt){return""+(Pt instanceof Date?Pt.getTime():Pt)},Fh=function(Pt){pf(Mt,Pt);function Mt(){var zt=Pt!==null&&Pt.apply(this,arguments)||this;return zt.dom=null,zt}return Mt.prototype.componentDidMount=function(){this.renderTimeAgo()},Mt.prototype.componentDidUpdate=function(){this.renderTimeAgo()},Mt.prototype.renderTimeAgo=function(){var zt=this.props,Ht=zt.live,Ut=zt.datetime,Qt=zt.locale,hn=zt.opts;pc(this.dom),Ht!==!1&&(this.dom.setAttribute("datetime",gf(Ut)),ff(this.dom,Qt,hn))},Mt.prototype.componentWillUnmount=function(){pc(this.dom)},Mt.prototype.render=function(){var zt=this,Ht=this.props,Ut=Ht.datetime;Ht.live;var Qt=Ht.locale,hn=Ht.opts,xn=Cl(Ht,["datetime","live","locale","opts"]);return cn("time",Au({ref:function($n){zt.dom=$n}},xn),yp(Ut,Qt,hn))},Mt.defaultProps={live:!0,className:""},Mt}(qi);function _p(Pt,Mt){const zt=Ht=>{Pt.current&&!Pt.current.contains(event.target)&&Mt()};Ci(()=>(document.addEventListener("mousedown",zt),()=>document.removeEventListener("mousedown",zt)))}var mf=Object.prototype.toString,Lg=function(Pt){var Mt=mf.call(Pt),zt=Mt==="[object Arguments]";return zt||(zt=Mt!=="[object Array]"&&Pt!==null&&typeof Pt=="object"&&typeof Pt.length=="number"&&Pt.length>=0&&mf.call(Pt.callee)==="[object Function]"),zt},yf;if(!Object.keys){var zh=Object.prototype.hasOwnProperty,wd=Object.prototype.toString,Pg=Lg,rh=Object.prototype.propertyIsEnumerable,Hm=!rh.call({toString:null},"toString"),bp=rh.call(function(){},"prototype"),Hh=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],jh=function(Pt){var Mt=Pt.constructor;return Mt&&Mt.prototype===Pt},$t={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Vt=function(){if(typeof window>"u")return!1;for(var Pt in window)try{if(!$t["$"+Pt]&&zh.call(window,Pt)&&window[Pt]!==null&&typeof window[Pt]=="object")try{jh(window[Pt])}catch{return!0}}catch{return!0}return!1}(),tn=function(Pt){if(typeof window>"u"||!Vt)return jh(Pt);try{return jh(Pt)}catch{return!1}};yf=function(Pt){var Mt=Pt!==null&&typeof Pt=="object",zt=wd.call(Pt)==="[object Function]",Ht=Pg(Pt),Ut=Mt&&wd.call(Pt)==="[object String]",Qt=[];if(!Mt&&!zt&&!Ht)throw new TypeError("Object.keys called on a non-object");var hn=bp&&zt;if(Ut&&Pt.length>0&&!zh.call(Pt,0))for(var xn=0;xn<Pt.length;++xn)Qt.push(String(xn));if(Ht&&Pt.length>0)for(var $n=0;$n<Pt.length;++$n)Qt.push(String($n));else for(var Mn in Pt)!(hn&&Mn==="prototype")&&zh.call(Pt,Mn)&&Qt.push(String(Mn));if(Hm)for(var On=tn(Pt),ur=0;ur<Hh.length;++ur)!(On&&Hh[ur]==="constructor")&&zh.call(Pt,Hh[ur])&&Qt.push(Hh[ur]);return Qt}}var mn=yf,In=Array.prototype.slice,Qn=Lg,Tr=Object.keys,jr=Tr?function(Pt){return Tr(Pt)}:mn,Kr=Object.keys;jr.shim=function(){if(Object.keys){var Pt=function(){var Mt=Object.keys(arguments);return Mt&&Mt.length===arguments.length}(1,2);Pt||(Object.keys=function(Mt){return Qn(Mt)?Kr(In.call(Mt)):Kr(Mt)})}else Object.keys=jr;return Object.keys||jr};var ci=jr,Mi=ci,fo=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Ro=Object.prototype.toString,tl=Array.prototype.concat,ca=Object.defineProperty,nl=function(Pt){return typeof Pt=="function"&&Ro.call(Pt)==="[object Function]"},hl=function(){var Pt={};try{ca(Pt,"x",{enumerable:!1,value:Pt});for(var Mt in Pt)return!1;return Pt.x===Pt}catch{return!1}},Lu=ca&&hl(),Ig=function(Pt,Mt,zt,Ht){Mt in Pt&&(!nl(Ht)||!Ht())||(Lu?ca(Pt,Mt,{configurable:!0,enumerable:!1,value:zt,writable:!0}):Pt[Mt]=zt)},xp=function(Pt,Mt){var zt=arguments.length>2?arguments[2]:{},Ht=Mi(Mt);fo&&(Ht=tl.call(Ht,Object.getOwnPropertySymbols(Mt)));for(var Ut=0;Ut<Ht.length;Ut+=1)Ig(Pt,Ht[Ut],Mt[Ht[Ut]],zt[Ht[Ut]])};xp.supportsDescriptors=!!Lu;var ih=xp,oh={exports:{}},wp="Function.prototype.bind called on incompatible ",su=Array.prototype.slice,ua=Object.prototype.toString,Ed="[object Function]",Og=function(Pt){var Mt=this;if(typeof Mt!="function"||ua.call(Mt)!==Ed)throw new TypeError(wp+Mt);for(var zt=su.call(arguments,1),Ht,Ut=function(){if(this instanceof Ht){var Mn=Mt.apply(this,zt.concat(su.call(arguments)));return Object(Mn)===Mn?Mn:this}else return Mt.apply(Pt,zt.concat(su.call(arguments)))},Qt=Math.max(0,Mt.length-zt.length),hn=[],xn=0;xn<Qt;xn++)hn.push("$"+xn);if(Ht=Function("binder","return function ("+hn.join(",")+"){ return binder.apply(this,arguments); }")(Ut),Mt.prototype){var $n=function(){};$n.prototype=Mt.prototype,Ht.prototype=new $n,$n.prototype=null}return Ht},Vh=Og,vf=Function.prototype.bind||Vh,Sd=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var Pt={},Mt=Symbol("test"),zt=Object(Mt);if(typeof Mt=="string"||Object.prototype.toString.call(Mt)!=="[object Symbol]"||Object.prototype.toString.call(zt)!=="[object Symbol]")return!1;var Ht=42;Pt[Mt]=Ht;for(Mt in Pt)return!1;if(typeof Object.keys=="function"&&Object.keys(Pt).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(Pt).length!==0)return!1;var Ut=Object.getOwnPropertySymbols(Pt);if(Ut.length!==1||Ut[0]!==Mt||!Object.prototype.propertyIsEnumerable.call(Pt,Mt))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var Qt=Object.getOwnPropertyDescriptor(Pt,Mt);if(Qt.value!==Ht||Qt.enumerable!==!0)return!1}return!0},_f=typeof Symbol<"u"&&Symbol,sh=Sd,jm=function(){return typeof _f!="function"||typeof Symbol!="function"||typeof _f("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:sh()},bf=vf,Vm=bf.call(Function.call,Object.prototype.hasOwnProperty),Es,ah=SyntaxError,Ep=Function,lh=TypeError,$g=function(Pt){try{return Ep('"use strict"; return ('+Pt+").constructor;")()}catch{}},Uh=Object.getOwnPropertyDescriptor;if(Uh)try{Uh({},"")}catch{Uh=null}var Um=function(){throw new lh},g1=Uh?function(){try{return arguments.callee,Um}catch{try{return Uh(arguments,"callee").get}catch{return Um}}}():Um,Bc=jm(),Gh=Object.getPrototypeOf||function(Pt){return Pt.__proto__},Ea={},au=typeof Uint8Array>"u"?Es:Gh(Uint8Array),Lo={"%AggregateError%":typeof AggregateError>"u"?Es:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Es:ArrayBuffer,"%ArrayIteratorPrototype%":Bc?Gh([][Symbol.iterator]()):Es,"%AsyncFromSyncIteratorPrototype%":Es,"%AsyncFunction%":Ea,"%AsyncGenerator%":Ea,"%AsyncGeneratorFunction%":Ea,"%AsyncIteratorPrototype%":Ea,"%Atomics%":typeof Atomics>"u"?Es:Atomics,"%BigInt%":typeof BigInt>"u"?Es:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Es:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Es:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Es:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Es:FinalizationRegistry,"%Function%":Ep,"%GeneratorFunction%":Ea,"%Int8Array%":typeof Int8Array>"u"?Es:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Es:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Es:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bc?Gh(Gh([][Symbol.iterator]())):Es,"%JSON%":typeof JSON=="object"?JSON:Es,"%Map%":typeof Map>"u"?Es:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Bc?Es:Gh(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Es:Promise,"%Proxy%":typeof Proxy>"u"?Es:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Es:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Es:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Bc?Es:Gh(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Es:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bc?Gh(""[Symbol.iterator]()):Es,"%Symbol%":Bc?Symbol:Es,"%SyntaxError%":ah,"%ThrowTypeError%":g1,"%TypedArray%":au,"%TypeError%":lh,"%Uint8Array%":typeof Uint8Array>"u"?Es:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Es:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Es:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Es:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Es:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Es:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Es:WeakSet},Xo=function Pt(Mt){var zt;if(Mt==="%AsyncFunction%")zt=$g("async function () {}");else if(Mt==="%GeneratorFunction%")zt=$g("function* () {}");else if(Mt==="%AsyncGeneratorFunction%")zt=$g("async function* () {}");else if(Mt==="%AsyncGenerator%"){var Ht=Pt("%AsyncGeneratorFunction%");Ht&&(zt=Ht.prototype)}else if(Mt==="%AsyncIteratorPrototype%"){var Ut=Pt("%AsyncGenerator%");Ut&&(zt=Gh(Ut.prototype))}return Lo[Mt]=zt,zt},jo={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Mo=vf,No=Vm,Zo=Mo.call(Function.call,Array.prototype.concat),Ko=Mo.call(Function.apply,Array.prototype.splice),Vo=Mo.call(Function.call,String.prototype.replace),Do=Mo.call(Function.call,String.prototype.slice),Jo=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Qo=/\\(\\)?/g,es=function(Pt){var Mt=Do(Pt,0,1),zt=Do(Pt,-1);if(Mt==="%"&&zt!=="%")throw new ah("invalid intrinsic syntax, expected closing `%`");if(zt==="%"&&Mt!=="%")throw new ah("invalid intrinsic syntax, expected opening `%`");var Ht=[];return Vo(Pt,Jo,function(Ut,Qt,hn,xn){Ht[Ht.length]=hn?Vo(xn,Qo,"$1"):Qt||Ut}),Ht},ts=function(Pt,Mt){var zt=Pt,Ht;if(No(jo,zt)&&(Ht=jo[zt],zt="%"+Ht[0]+"%"),No(Lo,zt)){var Ut=Lo[zt];if(Ut===Ea&&(Ut=Xo(zt)),typeof Ut>"u"&&!Mt)throw new lh("intrinsic "+Pt+" exists, but is not available. Please file an issue!");return{alias:Ht,name:zt,value:Ut}}throw new ah("intrinsic "+Pt+" does not exist!")},co=function(Pt,Mt){if(typeof Pt!="string"||Pt.length===0)throw new lh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Mt!="boolean")throw new lh('"allowMissing" argument must be a boolean');var zt=es(Pt),Ht=zt.length>0?zt[0]:"",Ut=ts("%"+Ht+"%",Mt),Qt=Ut.name,hn=Ut.value,xn=!1,$n=Ut.alias;$n&&(Ht=$n[0],Ko(zt,Zo([0,1],$n)));for(var Mn=1,On=!0;Mn<zt.length;Mn+=1){var ur=zt[Mn],Sr=Do(ur,0,1),Pr=Do(ur,-1);if((Sr==='"'||Sr==="'"||Sr==="`"||Pr==='"'||Pr==="'"||Pr==="`")&&Sr!==Pr)throw new ah("property names with quotes must have matching quotes");if((ur==="constructor"||!On)&&(xn=!0),Ht+="."+ur,Qt="%"+Ht+"%",No(Lo,Qt))hn=Lo[Qt];else if(hn!=null){if(!(ur in hn)){if(!Mt)throw new lh("base intrinsic for "+Pt+" exists, but the property is not available.");return}if(Uh&&Mn+1>=zt.length){var Wr=Uh(hn,ur);On=!!Wr,On&&"get"in Wr&&!("originalValue"in Wr.get)?hn=Wr.get:hn=hn[ur]}else On=No(hn,ur),hn=hn[ur];On&&!xn&&(Lo[Qt]=hn)}}return hn};(function(Pt){var Mt=vf,zt=co,Ht=zt("%Function.prototype.apply%"),Ut=zt("%Function.prototype.call%"),Qt=zt("%Reflect.apply%",!0)||Mt.call(Ut,Ht),hn=zt("%Object.getOwnPropertyDescriptor%",!0),xn=zt("%Object.defineProperty%",!0),$n=zt("%Math.max%");if(xn)try{xn({},"a",{value:1})}catch{xn=null}Pt.exports=function(On){var ur=Qt(Mt,Ut,arguments);if(hn&&xn){var Sr=hn(ur,"length");Sr.configurable&&xn(ur,"length",{value:1+$n(0,On.length-(arguments.length-1))})}return ur};var Mn=function(){return Qt(Mt,Ht,arguments)};xn?xn(Pt.exports,"apply",{value:Mn}):Pt.exports.apply=Mn})(oh);var Uo=co,Go=oh.exports,ns=Go(Uo("String.prototype.indexOf")),ko=function(Pt,Mt){var zt=Uo(Pt,!!Mt);return typeof zt=="function"&&ns(Pt,".prototype.")>-1?Go(zt):zt},rs=co,is=rs("%TypeError%"),os=function(Pt,Mt){if(Pt==null)throw new is(Mt||"Cannot call method on "+Pt);return Pt},Bo=os,ss=co,Wo=ss("%Array%"),Gm=!Wo.isArray&&ko("Object.prototype.toString"),Wm=Wo.isArray||function(Pt){return Gm(Pt)==="[object Array]"},Rg=co,qm=ko,Ym=Rg("%TypeError%"),Xm=Wm,Zm=Rg("%Reflect.apply%",!0)||qm("%Function.prototype.apply%"),Km=function(Pt,Mt){var zt=arguments.length>2?arguments[2]:[];if(!Xm(zt))throw new Ym("Assertion failed: optional `argumentsList`, if provided, must be a List");return Zm(Pt,Mt,zt)},Di={},Ni=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Di}),Qi=cc(Ni),Gi=typeof Map=="function"&&Map.prototype,so=Object.getOwnPropertyDescriptor&&Gi?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,no=Gi&&so&&typeof so.get=="function"?so.get:null,as=Gi&&Map.prototype.forEach,qo=typeof Set=="function"&&Set.prototype,Ai=Object.getOwnPropertyDescriptor&&qo?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Kn=qo&&Ai&&typeof Ai.get=="function"?Ai.get:null,Jm=qo&&Set.prototype.forEach,vv=typeof WeakMap=="function"&&WeakMap.prototype,Sp=vv?WeakMap.prototype.has:null,_v=typeof WeakSet=="function"&&WeakSet.prototype,Cp=_v?WeakSet.prototype.has:null,bv=typeof WeakRef=="function"&&WeakRef.prototype,m1=bv?WeakRef.prototype.deref:null,xv=Boolean.prototype.valueOf,y1=Object.prototype.toString,v1=Function.prototype.toString,_1=String.prototype.match,xf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Tp=Object.getOwnPropertySymbols,Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,wf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",e0=Object.prototype.propertyIsEnumerable,n0=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Pt){return Pt.__proto__}:null),Mg=Qi.custom,r0=Mg&&s0(Mg)?Mg:null,dl=typeof Symbol=="function"&&typeof Symbol.toStringTag<"u"?Symbol.toStringTag:null,wv=function Pt(Mt,zt,Ht,Ut){var Qt=zt||{};if(Wh(Qt,"quoteStyle")&&Qt.quoteStyle!=="single"&&Qt.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Wh(Qt,"maxStringLength")&&(typeof Qt.maxStringLength=="number"?Qt.maxStringLength<0&&Qt.maxStringLength!==1/0:Qt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var hn=Wh(Qt,"customInspect")?Qt.customInspect:!0;if(typeof hn!="boolean"&&hn!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Wh(Qt,"indent")&&Qt.indent!==null&&Qt.indent!=="	"&&!(parseInt(Qt.indent,10)===Qt.indent&&Qt.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(typeof Mt>"u")return"undefined";if(Mt===null)return"null";if(typeof Mt=="boolean")return Mt?"true":"false";if(typeof Mt=="string")return l0(Mt,Qt);if(typeof Mt=="number")return Mt===0?1/0/Mt>0?"0":"-0":String(Mt);if(typeof Mt=="bigint")return String(Mt)+"n";var xn=typeof Qt.depth>"u"?5:Qt.depth;if(typeof Ht>"u"&&(Ht=0),Ht>=xn&&xn>0&&typeof Mt=="object")return Ng(Mt)?"[Array]":"[Object]";var $n=A1(Qt,Ht);if(typeof Ut>"u")Ut=[];else if(a0(Ut,Mt)>=0)return"[Circular]";function Mn(Gs,Ws,Gu){if(Ws&&(Ut=Ut.slice(),Ut.push(Ws)),Gu){var Ic={depth:Qt.depth};return Wh(Qt,"quoteStyle")&&(Ic.quoteStyle=Qt.quoteStyle),Pt(Gs,Ic,Ht+1,Ut)}return Pt(Gs,Qt,Ht+1,Ut)}if(typeof Mt=="function"){var On=Cv(Mt),ur=Dg(Mt,Mn);return"[Function"+(On?": "+On:" (anonymous)")+"]"+(ur.length>0?" { "+ur.join(", ")+" }":"")}if(s0(Mt)){var Sr=wf?String(Mt).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Qm.call(Mt);return typeof Mt=="object"&&!wf?kp(Sr):Sr}if(Lv(Mt)){for(var Pr="<"+String(Mt.nodeName).toLowerCase(),Wr=Mt.attributes||[],ai=0;ai<Wr.length;ai++)Pr+=" "+Wr[ai].name+"="+i0(b1(Wr[ai].value),"double",Qt);return Pr+=">",Mt.childNodes&&Mt.childNodes.length&&(Pr+="..."),Pr+="</"+String(Mt.nodeName).toLowerCase()+">",Pr}if(Ng(Mt)){if(Mt.length===0)return"[]";var oi=Dg(Mt,Mn);return $n&&!Iv(oi)?"["+u0(oi,$n)+"]":"[ "+oi.join(", ")+" ]"}if(o0(Mt)){var _i=Dg(Mt,Mn);return _i.length===0?"["+String(Mt)+"]":"{ ["+String(Mt)+"] "+_i.join(", ")+" }"}if(typeof Mt=="object"&&hn){if(r0&&typeof Mt[r0]=="function")return Mt[r0]();if(hn!=="symbol"&&typeof Mt.inspect=="function")return Mt.inspect()}if(C1(Mt)){var Oi=[];return as.call(Mt,function(Gs,Ws){Oi.push(Mn(Ws,Mt,!0)+" => "+Mn(Gs,Mt))}),k1("Map",no.call(Mt),Oi,$n)}if(T1(Mt)){var Eo=[];return Jm.call(Mt,function(Gs){Eo.push(Mn(Gs,Mt))}),k1("Set",Kn.call(Mt),Eo,$n)}if(Tv(Mt))return c0("WeakMap");if(Av(Mt))return c0("WeakSet");if(kv(Mt))return c0("WeakRef");if(w1(Mt))return kp(Mn(Number(Mt)));if(S1(Mt))return kp(Mn(xf.call(Mt)));if(E1(Mt))return kp(xv.call(Mt));if(Sv(Mt))return kp(Mn(String(Mt)));if(!Ev(Mt)&&!x1(Mt)){var mo=Dg(Mt,Mn),lo=n0?n0(Mt)===Object.prototype:Mt instanceof Object||Mt.constructor===Object,Co=Mt instanceof Object?"":"null prototype",yo=!lo&&dl&&Object(Mt)===Mt&&dl in Mt?ch(Mt).slice(8,-1):Co?"Object":"",_a=lo||typeof Mt.constructor!="function"?"":Mt.constructor.name?Mt.constructor.name+" ":"",Ca=_a+(yo||Co?"["+[].concat(yo||[],Co||[]).join(": ")+"] ":"");return mo.length===0?Ca+"{}":$n?Ca+"{"+u0(mo,$n)+"}":Ca+"{ "+mo.join(", ")+" }"}return String(Mt)};function i0(Pt,Mt,zt){var Ht=(zt.quoteStyle||Mt)==="double"?'"':"'";return Ht+Pt+Ht}function b1(Pt){return String(Pt).replace(/"/g,"&quot;")}function Ng(Pt){return ch(Pt)==="[object Array]"&&(!dl||!(typeof Pt=="object"&&dl in Pt))}function Ev(Pt){return ch(Pt)==="[object Date]"&&(!dl||!(typeof Pt=="object"&&dl in Pt))}function x1(Pt){return ch(Pt)==="[object RegExp]"&&(!dl||!(typeof Pt=="object"&&dl in Pt))}function o0(Pt){return ch(Pt)==="[object Error]"&&(!dl||!(typeof Pt=="object"&&dl in Pt))}function Sv(Pt){return ch(Pt)==="[object String]"&&(!dl||!(typeof Pt=="object"&&dl in Pt))}function w1(Pt){return ch(Pt)==="[object Number]"&&(!dl||!(typeof Pt=="object"&&dl in Pt))}function E1(Pt){return ch(Pt)==="[object Boolean]"&&(!dl||!(typeof Pt=="object"&&dl in Pt))}function s0(Pt){if(wf)return Pt&&typeof Pt=="object"&&Pt instanceof Symbol;if(typeof Pt=="symbol")return!0;if(!Pt||typeof Pt!="object"||!Qm)return!1;try{return Qm.call(Pt),!0}catch{}return!1}function S1(Pt){if(!Pt||typeof Pt!="object"||!xf)return!1;try{return xf.call(Pt),!0}catch{}return!1}var Pu=Object.prototype.hasOwnProperty||function(Pt){return Pt in this};function Wh(Pt,Mt){return Pu.call(Pt,Mt)}function ch(Pt){return y1.call(Pt)}function Cv(Pt){if(Pt.name)return Pt.name;var Mt=_1.call(v1.call(Pt),/^function\s*([\w$]+)/);return Mt?Mt[1]:null}function a0(Pt,Mt){if(Pt.indexOf)return Pt.indexOf(Mt);for(var zt=0,Ht=Pt.length;zt<Ht;zt++)if(Pt[zt]===Mt)return zt;return-1}function C1(Pt){if(!no||!Pt||typeof Pt!="object")return!1;try{no.call(Pt);try{Kn.call(Pt)}catch{return!0}return Pt instanceof Map}catch{}return!1}function Tv(Pt){if(!Sp||!Pt||typeof Pt!="object")return!1;try{Sp.call(Pt,Sp);try{Cp.call(Pt,Cp)}catch{return!0}return Pt instanceof WeakMap}catch{}return!1}function kv(Pt){if(!m1||!Pt||typeof Pt!="object")return!1;try{return m1.call(Pt),!0}catch{}return!1}function T1(Pt){if(!Kn||!Pt||typeof Pt!="object")return!1;try{Kn.call(Pt);try{no.call(Pt)}catch{return!0}return Pt instanceof Set}catch{}return!1}function Av(Pt){if(!Cp||!Pt||typeof Pt!="object")return!1;try{Cp.call(Pt,Cp);try{Sp.call(Pt,Sp)}catch{return!0}return Pt instanceof WeakSet}catch{}return!1}function Lv(Pt){return!Pt||typeof Pt!="object"?!1:typeof HTMLElement<"u"&&Pt instanceof HTMLElement?!0:typeof Pt.nodeName=="string"&&typeof Pt.getAttribute=="function"}function l0(Pt,Mt){if(Pt.length>Mt.maxStringLength){var zt=Pt.length-Mt.maxStringLength,Ht="... "+zt+" more character"+(zt>1?"s":"");return l0(Pt.slice(0,Mt.maxStringLength),Mt)+Ht}var Ut=Pt.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Pv);return i0(Ut,"single",Mt)}function Pv(Pt){var Mt=Pt.charCodeAt(0),zt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Mt];return zt?"\\"+zt:"\\x"+(Mt<16?"0":"")+Mt.toString(16).toUpperCase()}function kp(Pt){return"Object("+Pt+")"}function c0(Pt){return Pt+" { ? }"}function k1(Pt,Mt,zt,Ht){var Ut=Ht?u0(zt,Ht):zt.join(", ");return Pt+" ("+Mt+") {"+Ut+"}"}function Iv(Pt){for(var Mt=0;Mt<Pt.length;Mt++)if(a0(Pt[Mt],`
`)>=0)return!1;return!0}function A1(Pt,Mt){var zt;if(Pt.indent==="	")zt="	";else if(typeof Pt.indent=="number"&&Pt.indent>0)zt=Array(Pt.indent+1).join(" ");else return null;return{base:zt,prev:Array(Mt+1).join(zt)}}function u0(Pt,Mt){if(Pt.length===0)return"";var zt=`
`+Mt.prev+Mt.base;return zt+Pt.join(","+zt)+`
`+Mt.prev}function Dg(Pt,Mt){var zt=Ng(Pt),Ht=[];if(zt){Ht.length=Pt.length;for(var Ut=0;Ut<Pt.length;Ut++)Ht[Ut]=Wh(Pt,Ut)?Mt(Pt[Ut],Pt):""}var Qt=typeof Tp=="function"?Tp(Pt):[],hn;if(wf){hn={};for(var xn=0;xn<Qt.length;xn++)hn["$"+Qt[xn]]=Qt[xn]}for(var $n in Pt)!Wh(Pt,$n)||zt&&String(Number($n))===$n&&$n<Pt.length||wf&&hn["$"+$n]instanceof Symbol||(/[^\w$]/.test($n)?Ht.push(Mt($n,Pt)+": "+Mt(Pt[$n],Pt)):Ht.push($n+": "+Mt(Pt[$n],Pt)));if(typeof Tp=="function")for(var Mn=0;Mn<Qt.length;Mn++)e0.call(Pt,Qt[Mn])&&Ht.push("["+Mt(Qt[Mn])+"]: "+Mt(Pt[Qt[Mn]],Pt));return Ht}var h0=function(Pt){return typeof Pt=="string"||typeof Pt=="symbol"},L1=function(Pt){if(Pt===null)return"Null";if(typeof Pt>"u")return"Undefined";if(typeof Pt=="function"||typeof Pt=="object")return"Object";if(typeof Pt=="number")return"Number";if(typeof Pt=="boolean")return"Boolean";if(typeof Pt=="string")return"String"},Bg=L1,qh=function(Pt){return typeof Pt=="symbol"?"Symbol":typeof Pt=="bigint"?"BigInt":Bg(Pt)},Fg=co,d0=Fg("%TypeError%"),Ov=wv,P1=h0,$v=qh,I1=function(Pt,Mt){if($v(Pt)!=="Object")throw new d0("Assertion failed: Type(O) is not Object");if(!P1(Mt))throw new d0("Assertion failed: IsPropertyKey(P) is not true, got "+Ov(Mt));return Pt[Mt]},zg=co,Ap=zg("%TypeError%"),Lp=h0,Pp=qh,O1=function(Pt,Mt){if(Pp(Pt)!=="Object")throw new Ap("Assertion failed: `O` must be an Object");if(!Lp(Mt))throw new Ap("Assertion failed: `P` must be a Property Key");return Mt in Pt},Ef=Function.prototype.toString,Iu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Sf,Hg;if(typeof Iu=="function"&&typeof Object.defineProperty=="function")try{Sf=Object.defineProperty({},"length",{get:function(){throw Hg}}),Hg={},Iu(function(){throw 42},null,Sf)}catch(Pt){Pt!==Hg&&(Iu=null)}else Iu=null;var Rv=/^\s*class\b/,f0=function(Pt){try{var Mt=Ef.call(Pt);return Rv.test(Mt)}catch{return!1}},$1=function(Pt){try{return f0(Pt)?!1:(Ef.call(Pt),!0)}catch{return!1}},Mv=Object.prototype.toString,p0="[object Function]",R1="[object GeneratorFunction]",Nv=typeof Symbol=="function"&&!!Symbol.toStringTag,Cd=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{},Yh=Iu?function(Pt){if(Pt===Cd)return!0;if(!Pt||typeof Pt!="function"&&typeof Pt!="object")return!1;if(typeof Pt=="function"&&!Pt.prototype)return!0;try{Iu(Pt,null,Sf)}catch(Mt){if(Mt!==Hg)return!1}return!f0(Pt)}:function(Pt){if(Pt===Cd)return!0;if(!Pt||typeof Pt!="function"&&typeof Pt!="object")return!1;if(typeof Pt=="function"&&!Pt.prototype)return!0;if(Nv)return $1(Pt);if(f0(Pt))return!1;var Mt=Mv.call(Pt);return Mt===p0||Mt===R1},M1=Yh,N1=co,D1=N1("%Math%"),g0=N1("%Number%"),Dv=g0.MAX_SAFE_INTEGER||D1.pow(2,53)-1,Bv=co,B1=Bv("%Math.abs%"),Fv=function(Pt){return B1(Pt)},Cf=Math.floor,gc=function(Pt){return Cf(Pt)},Tf=function(Pt){return Pt===null||typeof Pt!="function"&&typeof Pt!="object"},Tl=Object.prototype.toString,Rs=Tf,zv=Yh,F1={"[[DefaultValue]]":function(Pt){var Mt;if(arguments.length>1?Mt=arguments[1]:Mt=Tl.call(Pt)==="[object Date]"?String:Number,Mt===String||Mt===Number){var zt=Mt===String?["toString","valueOf"]:["valueOf","toString"],Ht,Ut;for(Ut=0;Ut<zt.length;++Ut)if(zv(Pt[zt[Ut]])&&(Ht=Pt[zt[Ut]](),Rs(Ht)))return Ht;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}},m0=function(Pt){return Rs(Pt)?Pt:arguments.length>1?F1["[[DefaultValue]]"](Pt,arguments[1]):F1["[[DefaultValue]]"](Pt)},Hv=m0,z1=Hv,H1=function(Pt){var Mt=z1(Pt,Number);if(typeof Mt!="string")return+Mt;var zt=Mt.replace(/^[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+|[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+$/g,"");return/^0[ob]|^[+-]0x/.test(zt)?NaN:+zt},y0=Number.isNaN||function(Pt){return Pt!==Pt},j1=Number.isNaN||function(Pt){return Pt!==Pt},V1=Number.isFinite||function(Pt){return typeof Pt=="number"&&!j1(Pt)&&Pt!==1/0&&Pt!==-1/0},jv=function(Pt){return Pt>=0?1:-1},Vv=Fv,Uv=gc,U1=H1,G1=y0,W1=V1,q1=jv,Y1=function(Pt){var Mt=U1(Pt);return G1(Mt)?0:Mt===0||!W1(Mt)?Mt:q1(Mt)*Uv(Vv(Mt))},X1=co,Z1=X1("RegExp.prototype.test"),Gv=oh.exports,Wv=function(Pt){return Gv(Z1,Pt)},Ip=function(Pt){return Pt===null||typeof Pt!="function"&&typeof Pt!="object"},K1=Sd,v0=function(){return K1()&&!!Symbol.toStringTag},J1=Date.prototype.getDay,Q1=function(Pt){try{return J1.call(Pt),!0}catch{return!1}},ey=Object.prototype.toString,qv="[object Date]",ty=v0(),_0=function(Pt){return typeof Pt!="object"||Pt===null?!1:ty?Q1(Pt):ey.call(Pt)===qv},jg={exports:{}},b0=Object.prototype.toString,Vg=jm();if(Vg){var x0=Symbol.prototype.toString,ny=/^Symbol\(.*\)$/,Yv=function(Pt){return typeof Pt.valueOf()!="symbol"?!1:ny.test(x0.call(Pt))};jg.exports=function(Pt){if(typeof Pt=="symbol")return!0;if(b0.call(Pt)!=="[object Symbol]")return!1;try{return Yv(Pt)}catch{return!1}}}else jg.exports=function(Pt){return!1};var Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",w0=Tf,uh=Yh,E0=_0,S0=jg.exports,C0=function(Pt,Mt){if(typeof Pt>"u"||Pt===null)throw new TypeError("Cannot call method on "+Pt);if(typeof Mt!="string"||Mt!=="number"&&Mt!=="string")throw new TypeError('hint must be "string" or "number"');var zt=Mt==="string"?["toString","valueOf"]:["valueOf","toString"],Ht,Ut,Qt;for(Qt=0;Qt<zt.length;++Qt)if(Ht=Pt[zt[Qt]],uh(Ht)&&(Ut=Ht.call(Pt),w0(Ut)))return Ut;throw new TypeError("No default value")},T0=function(Pt,Mt){var zt=Pt[Mt];if(zt!==null&&typeof zt<"u"){if(!uh(zt))throw new TypeError(zt+" returned for property "+Mt+" of object "+Pt+" is not a function");return zt}},k0=function(Pt){if(w0(Pt))return Pt;var Mt="default";arguments.length>1&&(arguments[1]===String?Mt="string":arguments[1]===Number&&(Mt="number"));var zt;if(Xh&&(Symbol.toPrimitive?zt=T0(Pt,Symbol.toPrimitive):S0(Pt)&&(zt=Symbol.prototype.valueOf)),typeof zt<"u"){var Ht=zt.call(Pt,Mt);if(w0(Ht))return Ht;throw new TypeError("unable to convert exotic object to primitive")}return Mt==="default"&&(E0(Pt)||S0(Pt))&&(Mt="string"),C0(Pt,Mt==="default"?"number":Mt)},Ug=k0,A0=function(Pt){return arguments.length>1?Ug(Pt,arguments[1]):Ug(Pt)},Dl=co,L0=Dl("%TypeError%"),kl=Dl("%Number%"),Op=Dl("%RegExp%"),Gg=Dl("%parseInt%"),hh=ko,Wg=Wv,P0=Ip,ry=hh("String.prototype.slice"),iy=Wg(/^0b[01]+$/i),$p=Wg(/^0o[0-7]+$/i),Rp=Wg(/^[-+]0x[0-9a-f]+$/i),oy=["\x85","\u200B","\uFFFE"].join(""),sy=new Op("["+oy+"]","g"),qg=Wg(sy),ay=[`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003`,"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),ly=new RegExp("(^["+ay+"]+)|(["+ay+"]+$)","g"),cy=hh("String.prototype.replace"),Ou=function(Pt){return cy(Pt,ly,"")},Xv=A0,Yg=function Pt(Mt){var zt=P0(Mt)?Mt:Xv(Mt,kl);if(typeof zt=="symbol")throw new L0("Cannot convert a Symbol value to a number");if(typeof zt=="bigint")throw new L0("Conversion from 'BigInt' to 'number' is not allowed.");if(typeof zt=="string"){if(iy(zt))return Pt(Gg(ry(zt,2),2));if($p(zt))return Pt(Gg(ry(zt,2),8));if(qg(zt)||Rp(zt))return NaN;var Ht=Ou(zt);if(Ht!==zt)return Pt(Ht)}return kl(zt)},uy=Y1,Zv=Yg,hy=function(Pt){var Mt=Zv(Pt);return Mt!==0&&(Mt=uy(Mt)),Mt===0?0:Mt},dy=Dv,fy=hy,Kv=function(Pt){var Mt=fy(Pt);return Mt<=0?0:Mt>dy?dy:Mt},Jv=co,py=Jv("%TypeError%"),Qv=I1,lu=Kv,dh=qh,Td=function(Pt){if(dh(Pt)!=="Object")throw new py("Assertion failed: `obj` must be an Object");return lu(Qv(Pt,"length"))},Ns=co,po=Ns("%Object%"),gy=Bo,Jl=function(Pt){return gy(Pt),po(Pt)},Mp=co,kf=Mp("%String%"),Ql=Mp("%TypeError%"),Nr=function(Pt){if(typeof Pt=="symbol")throw new Ql("Cannot convert a Symbol value to a string");return kf(Pt)},kd=String.prototype.valueOf,fh=function(Pt){try{return kd.call(Pt),!0}catch{return!1}},Af=Object.prototype.toString,Ur="[object String]",Np=v0(),ro=function(Pt){return typeof Pt=="string"?!0:typeof Pt!="object"?!1:Np?fh(Pt):Af.call(Pt)===Ur},Bl=co,my=ko,Fc=Bl("%TypeError%"),zc=Km,Dp=I1,Xr=O1,mc=M1,fl=Td,yy=Jl,Yo=Nr,Bp=ro,vy=my("String.prototype.split"),Ad=Object("a"),za=Ad[0]!=="a"||!(0 in Ad),ec=function(Pt){var Mt=yy(this),zt=za&&Bp(this)?vy(this,""):Mt,Ht=fl(zt);if(!mc(Pt))throw new Fc("Array.prototype.forEach callback must be a function");var Ut;arguments.length>1&&(Ut=arguments[1]);for(var Qt=0;Qt<Ht;){var hn=Yo(Qt),xn=Xr(zt,hn);if(xn){var $n=Dp(zt,hn);zc(Pt,Ut,[$n,Qt,zt])}Qt+=1}},Ui=function(Pt){var Mt=!0,zt=!0,Ht=!1;if(typeof Pt=="function"){try{Pt.call("f",function(Ut,Qt,hn){typeof hn!="object"&&(Mt=!1)}),Pt.call([null],function(){"use strict";zt=typeof this=="string"},"x")}catch{Ht=!0}return!Ht&&Mt&&zt}return!1},_y=Ui,Hc=ec,Fp=function(){var Pt=Array.prototype.forEach;return _y(Pt)?Pt:Hc},$u=ih,Lf=Fp,yc=function(){var Pt=Lf();return $u(Array.prototype,{forEach:Pt},{forEach:function(){return Array.prototype.forEach!==Pt}}),Pt},Ru=ih,Xg=oh.exports,_o=ko,Bs=Bo,Ld=ec,ph=Fp,Pd=ph(),jc=yc,ki=_o("Array.prototype.slice"),Id=Xg.apply(Pd),cu=function(Pt,Mt){return Bs(Pt),Id(Pt,ki(arguments,1))};Ru(cu,{getPolyfill:ph,implementation:Ld,shim:jc});var to=cu,uu=Bo,Zg=ko,hu=Zg("Object.prototype.propertyIsEnumerable"),tc=Zg("Array.prototype.push"),du=function(Pt){var Mt=uu(Pt),zt=[];for(var Ht in Mt)hu(Mt,Ht)&&tc(zt,[Ht,Mt[Ht]]);return zt},Pf=du,Od=function(){return typeof Object.entries=="function"?Object.entries:Pf},If=Od,Of=ih,ha=function(){var Pt=If();return Of(Object,{entries:Pt},{entries:function(){return Object.entries!==Pt}}),Pt},I0=ih,$f=oh.exports,vc=du,$d=Od,vi=ha,by=$f($d(),Object);I0(by,{getPolyfill:$d,implementation:vc,shim:vi});var zp=by,Po=Bo,Kg=Nr,Hp=ko,Rd=Hp("String.prototype.replace"),Md=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,e_=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,Rf=function(){var Pt=Kg(Po(this));return Rd(Rd(Pt,Md,""),e_,"")},Jg=Rf,Qg="\u200B",xy=function(){return String.prototype.trim&&Qg.trim()===Qg?String.prototype.trim:Jg},wy=ih,Ts=xy,Mu=function(){var Pt=Ts();return wy(String.prototype,{trim:Pt},{trim:function(){return String.prototype.trim!==Pt}}),Pt},O0=oh.exports,Ey=ih,Ya=Rf,Mf=xy,Sy=Mu,_c=O0(Mf());Ey(_c,{getPolyfill:Mf,implementation:Ya,shim:Sy});var em=_c,fu=to,ls=zp,nc=Vm,Vc=em,bc=function(Pt){},rl=String.prototype.replace,gh=String.prototype.split,pl="||||",Nf=function(Pt){var Mt=Pt%100,zt=Mt%10;return Mt!==11&&zt===1?0:2<=zt&&zt<=4&&!(Mt>=12&&Mt<=14)?1:2},Cy={pluralTypes:{arabic:function(Pt){if(Pt<3)return Pt;var Mt=Pt%100;return Mt>=3&&Mt<=10?3:Mt>=11?4:5},bosnian_serbian:Nf,chinese:function(){return 0},croatian:Nf,french:function(Pt){return Pt>=2?1:0},german:function(Pt){return Pt!==1?1:0},russian:Nf,lithuanian:function(Pt){return Pt%10==1&&Pt%100!=11?0:Pt%10>=2&&Pt%10<=9&&(Pt%100<11||Pt%100>19)?1:2},czech:function(Pt){return Pt===1?0:Pt>=2&&Pt<=4?1:2},polish:function(Pt){if(Pt===1)return 0;var Mt=Pt%10;return 2<=Mt&&Mt<=4&&(Pt%100<10||Pt%100>=20)?1:2},icelandic:function(Pt){return Pt%10!=1||Pt%100==11?1:0},slovenian:function(Pt){var Mt=Pt%100;return Mt===1?0:Mt===2?1:Mt===3||Mt===4?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function t_(Pt){var Mt={};return fu(ls(Pt),function(zt){var Ht=zt[0],Ut=zt[1];fu(Ut,function(Qt){Mt[Qt]=Ht})}),Mt}function n_(Pt,Mt){var zt=t_(Pt.pluralTypeToLanguages);return zt[Mt]||zt[gh.call(Mt,/-/,1)[0]]||zt.en}function r_(Pt,Mt,zt){return Pt.pluralTypes[Mt](zt)}function i_(){var Pt={};return function(Mt,zt){var Ht=Pt[zt];return Ht&&!Mt.pluralTypes[Ht]&&(Ht=null,Pt[zt]=Ht),Ht||(Ht=n_(Mt,zt),Ht&&(Pt[zt]=Ht)),Ht}}function Ty(Pt){return Pt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rc(Pt){var Mt=Pt&&Pt.prefix||"%{",zt=Pt&&Pt.suffix||"}";if(Mt===pl||zt===pl)throw new RangeError('"'+pl+'" token is reserved for pluralization');return new RegExp(Ty(Mt)+"(.*?)"+Ty(zt),"g")}var $0=i_(),Xs=/%\{(.*?)\}/g;function Ds(Pt,Mt,zt,Ht,Ut){if(typeof Pt!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(Mt==null)return Pt;var Qt=Pt,hn=Ht||Xs,xn=typeof Mt=="number"?{smart_count:Mt}:Mt;if(xn.smart_count!=null&&Pt){var $n=Ut||Cy,Mn=gh.call(Pt,pl),On=zt||"en",ur=$0($n,On),Sr=r_($n,ur,xn.smart_count);Qt=Vc(Mn[Sr]||Mn[0])}return Qt=rl.call(Qt,hn,function(Pr,Wr){return!nc(xn,Wr)||xn[Wr]==null?Pr:xn[Wr]}),Qt}function xc(Pt){var Mt=Pt||{};this.phrases={},this.extend(Mt.phrases||{}),this.currentLocale=Mt.locale||"en";var zt=Mt.allowMissing?Ds:null;this.onMissingKey=typeof Mt.onMissingKey=="function"?Mt.onMissingKey:zt,this.warn=Mt.warn||bc,this.tokenRegex=rc(Mt.interpolation),this.pluralRules=Mt.pluralRules||Cy}xc.prototype.locale=function(Pt){return Pt&&(this.currentLocale=Pt),this.currentLocale},xc.prototype.extend=function(Pt,Mt){fu(ls(Pt||{}),function(zt){var Ht=zt[0],Ut=zt[1],Qt=Mt?Mt+"."+Ht:Ht;typeof Ut=="object"?this.extend(Ut,Qt):this.phrases[Qt]=Ut},this)},xc.prototype.unset=function(Pt,Mt){typeof Pt=="string"?delete this.phrases[Pt]:fu(ls(Pt||{}),function(zt){var Ht=zt[0],Ut=zt[1],Qt=Mt?Mt+"."+Ht:Ht;typeof Ut=="object"?this.unset(Ut,Qt):delete this.phrases[Qt]},this)},xc.prototype.clear=function(){this.phrases={}},xc.prototype.replace=function(Pt){this.clear(),this.extend(Pt)},xc.prototype.t=function(Pt,Mt){var zt,Ht,Ut=Mt==null?{}:Mt;if(typeof this.phrases[Pt]=="string")zt=this.phrases[Pt];else if(typeof Ut._=="string")zt=Ut._;else if(this.onMissingKey){var Qt=this.onMissingKey;Ht=Qt(Pt,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+Pt+'"'),Ht=Pt;return typeof zt=="string"&&(Ht=Ds(zt,Ut,this.currentLocale,this.tokenRegex,this.pluralRules)),Ht},xc.prototype.has=function(Pt){return nc(this.phrases,Pt)},xc.transformPhrase=function(Pt,Mt,zt){return Ds(Pt,Mt,zt)};var Al=xc,mh={"Add a comment...":"\u0625\u0636\u0627\u0641\u0629 \u062A\u0639\u0644\u064A\u0642","Add a reply...":"\u0625\u0636\u0627\u0641\u0629 \u0631\u062F","Add tag...":"\u0625\u0636\u0627\u0641\u0629 \u0639\u0644\u0627\u0645\u0629",Cancel:"\u0625\u0644\u063A\u0627\u0621",Close:"\u0625\u063A\u0644\u0627\u0642",Edit:"Edit",Delete:"Delete",Ok:"\u062A\u0645"},da={"Add a comment...":"Napsat koment\xE1\u0159...","Add a reply...":"Odpov\u011Bd\u011Bt...","Add tag...":"P\u0159idat \u0161t\xEDtek...",Cancel:"Zru\u0161it",Close:"Zav\u0159\xEDt",Edit:"Upravit",Delete:"Smazat",Ok:"Ok"},Df={"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...",Cancel:"Abbrechen",Close:"Schliessen",Edit:"Bearbeiten",Delete:"L\xF6schen",Ok:"Ok"},pu={"Add a comment...":"\u03A3\u03C7\u03BF\u03BB\u03AF\u03B1\u03C3\u03B5...","Add a reply...":"\u0391\u03C0\u03AC\u03BD\u03C4\u03B7\u03C3\u03B5...","Add tag...":"\u03A0\u03C1\u03CC\u03C3\u03B8\u03B5\u03C3\u03B5 tag...",Cancel:"\u0386\u03BA\u03C5\u03C1\u03BF",Close:"\u039A\u03BB\u03B5\u03AF\u03C3\u03B9\u03BC\u03BF",Edit:"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1",Delete:"\u0394\u03B9\u03B1\u03B3\u03C1\u03B1\u03C6\u03AE",Ok:"Ok"},gu={"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Cerrar",Edit:"Editar",Delete:"Eliminar",Ok:"Ok"},ic={"Add a comment...":"Lis\xE4\xE4 kommentti","Add a reply...":"Lis\xE4\xE4 vastaus","Add tag...":"Lis\xE4\xE4 tunniste",Cancel:"Peruuta",Close:"Sulje",Edit:"Muokkaa",Delete:"Poista",Ok:"Ok"},tm={"Add a comment...":"Ajouter un commentaire...","Add a reply...":"Ajouter une r\xE9ponse...","Add tag...":"Ajouter une \xE9tiquette...",Cancel:"Annuler",Close:"Fermer",Edit:"\xC9diter",Delete:"Supprimer",Ok:"Ok"},jp={"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Pechar",Edit:"Edit",Delete:"Delete",Ok:"Ok"},Vp={"Add a comment...":"\u091F\u093F\u092A\u094D\u092A\u0923\u0940 \u091C\u094B\u0921\u093C\u0947\u0902","Add a reply...":"\u091C\u0935\u093E\u092C \u0926\u0947\u0902","Add tag...":"\u091F\u0948\u0917 \u0932\u0917\u093E\u090F\u0901",Cancel:"\u0930\u0926\u094D\u0926 \u0915\u0930\u0947\u0902",Close:"\u092C\u0902\u0926 \u0915\u0930\u0947\u0902",Edit:"\u0938\u0902\u092A\u093E\u0926\u093F\u0924 \u0915\u0930\u0947\u0902",Delete:"\u0939\u091F\u093E\u090F\u0901",Ok:"\u0920\u0940\u0915 \u0939\u0948"},Up={"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...",Cancel:"Annulla",Close:"Chiudi",Edit:"Edit",Delete:"Delete",Ok:"Ok"},Zs={"Add a comment...":"\uB313\uAE00 \uCD94\uAC00","Add a reply...":"\uB2F5\uAE00 \uCD94\uAC00","Add tag...":"\uD0DC\uADF8 \uCD94\uAC00",Cancel:"\uCDE8\uC18C",Close:"\uB2EB\uAE30",Edit:"\uC218\uC815",Delete:"\uC0AD\uC81C",Ok:"\uD655\uC778"},ky={"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...",Cancel:"Afbreken",Close:"Sluiten",Edit:"Bewerken",Delete:"Verwijderen",Ok:"Ok"},mu={"Add a comment...":"Adicionar um coment\xE1rio...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...",Cancel:"Cancelar",Close:"Fechar",Edit:"Editar",Delete:"Apagar",Ok:"Ok"},R0={"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...",Cancel:"Cancel",Close:"St\xE4ng",Edit:"Edit",Delete:"Delete",Ok:"Ok"},Ay={"Add a comment...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E2D\u0E21\u0E40\u0E21\u0E19\u0E15\u0E4C...","Add a reply...":"\u0E15\u0E2D\u0E1A\u0E01\u0E25\u0E31\u0E1A...","Add tag...":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E41\u0E17\u0E47\u0E01...",Cancel:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",Close:"\u0E1B\u0E34\u0E14",Edit:"\u0E41\u0E01\u0E49\u0E44\u0E02",Delete:"\u0E25\u0E1A",Ok:"\u0E15\u0E01\u0E25\u0E07"},ps={"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...",Cancel:"\u0130ptal",Close:"Kapat",Edit:"D\xFCzenle",Delete:"Sil",Ok:"Tamam"},M0={"Add a comment...":"\u062A\u0628\u0635\u0631\u06C1 \u06A9\u0631\u06CC\u06BA","Add a reply...":"\u062C\u0648\u0627\u0628 \u062F\u06CC\u06BA","Add tag...":"\u0679\u06CC\u06AF \u0644\u06AF\u0627\u0626\u06CC\u06BA",Cancel:"\u0645\u0646\u0633\u0648\u062E \u06A9\u0631\u06CC\u06BA",Close:"\u0628\u0646\u062F \u06A9\u0631\u06CC\u06BA",Edit:"\u062A\u0631\u0645\u06CC\u0645 \u06A9\u0631\u06CC\u06BA",Delete:"\u06C1\u0679\u0627\u0626\u06CC\u06BA",Ok:"\u0679\u06BE\u06CC\u06A9 \u06C1\u06D2"},wc={};Object.defineProperty(wc,"__esModule",{value:!0});var Gp=[["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u064A\u0646","%s \u062B\u0648\u0627\u0646","%s \u062B\u0627\u0646\u064A\u0629"],["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u064A\u0646","%s \u062F\u0642\u0627\u0626\u0642","%s \u062F\u0642\u064A\u0642\u0629"],["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","%s \u0633\u0627\u0639\u0627\u062A","%s \u0633\u0627\u0639\u0629"],["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","%s \u0623\u064A\u0627\u0645","%s \u064A\u0648\u0645\u0627\u064B"],["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","%s \u0623\u0633\u0627\u0628\u064A\u0639","%s \u0623\u0633\u0628\u0648\u0639\u0627\u064B"],["\u0634\u0647\u0631","\u0634\u0647\u0631\u064A\u0646","%s \u0623\u0634\u0647\u0631","%s \u0634\u0647\u0631\u0627\u064B"],["\u0639\u0627\u0645","\u0639\u0627\u0645\u064A\u0646","%s \u0623\u0639\u0648\u0627\u0645","%s \u0639\u0627\u0645\u0627\u064B"]];function Io(Pt,Mt){return Mt<3?Gp[Pt][Mt-1]:Mt>=3&&Mt<=10?Gp[Pt][2]:Gp[Pt][3]}function Ly(Pt,Mt){if(Mt===0)return["\u0645\u0646\u0630 \u0644\u062D\u0638\u0627\u062A","\u0628\u0639\u062F \u0644\u062D\u0638\u0627\u062A"];var zt=Io(Math.floor(Mt/2),Pt);return["\u0645\u0646\u0630 "+zt,"\u0628\u0639\u062F "+zt]}var o_=wc.default=Ly,Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});function Uc(Pt,Mt){var zt=0,Ht=Mt==1||Mt==3||Mt==5||Mt==7||Mt==9||Mt==11||Mt==13;return Ht&&Pt>=5&&(zt=1),[[["pr\xE1v\u011B te\u010F","pr\xE1v\u011B te\u010F"]],[["p\u0159ed %s vte\u0159inami","za %s vte\u0159iny"],["p\u0159ed %s vte\u0159inami","za %s vte\u0159in"]],[["p\u0159ed minutou","za minutu"]],[["p\u0159ed %s minutami","za %s minuty"],["p\u0159ed %s minutami","za %s minut"]],[["p\u0159ed hodinou","za hodinu"]],[["p\u0159ed %s hodinami","za %s hodiny"],["p\u0159ed %s hodinami","za %s hodin"]],[["v\u010Dera","z\xEDtra"]],[["p\u0159ed %s dny","za %s dny"],["p\u0159ed %s dny","za %s dn\u016F"]],[["minul\xFD t\xFDden","p\u0159\xED\u0161t\xED t\xFDden"]],[["p\u0159ed %s t\xFDdny","za %s t\xFDdny"],["p\u0159ed %s t\xFDdny","za %s t\xFDdn\u016F"]],[["minul\xFD m\u011Bs\xEDc","p\u0159\xEDst\xED m\u011Bs\xEDc"]],[["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDce"],["p\u0159ed %s m\u011Bs\xEDci","za %s m\u011Bs\xEDc\u016F"]],[["p\u0159ed rokem","p\u0159\xEDst\xED rok"]],[["p\u0159ed %s lety","za %s roky"],["p\u0159ed %s lety","za %s let"]]][Mt][zt]}var Nu=Wp.default=Uc,nm={};Object.defineProperty(nm,"__esModule",{value:!0});function Py(Pt,Mt){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][Mt]}var mi=nm.default=Py,qp={};Object.defineProperty(qp,"__esModule",{value:!0});function rm(Pt,Mt){return[["\u03BC\u03CC\u03BB\u03B9\u03C2 \u03C4\u03CE\u03C1\u03B1","\u03C3\u03B5 \u03BB\u03AF\u03B3\u03BF"],["%s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"],["1 \u03BB\u03B5\u03C0\u03C4\u03CC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BB\u03B5\u03C0\u03C4\u03CC"],["%s \u03BB\u03B5\u03C0\u03C4\u03AC \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BB\u03B5\u03C0\u03C4\u03AC"],["1 \u03CE\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03CE\u03C1\u03B1"],["%s \u03CE\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03CE\u03C1\u03B5\u03C2"],["1 \u03BC\u03AD\u03C1\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AD\u03C1\u03B1"],["%s \u03BC\u03AD\u03C1\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AD\u03C1\u03B5\u03C2"],["1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1"],["%s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"],["1 \u03BC\u03AE\u03BD\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03BC\u03AE\u03BD\u03B1"],["%s \u03BC\u03AE\u03BD\u03B5\u03C2 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03BC\u03AE\u03BD\u03B5\u03C2"],["1 \u03C7\u03C1\u03CC\u03BD\u03BF \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 1 \u03C7\u03C1\u03CC\u03BD\u03BF"],["%s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1 \u03C0\u03C1\u03B9\u03BD","\u03C3\u03B5 %s \u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"]][Mt]}var Gc=qp.default=rm,Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});function Du(Pt,Mt){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xEDa","en 1 d\xEDa"],["hace %s d\xEDas","en %s d\xEDas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xF1o","en 1 a\xF1o"],["hace %s a\xF1os","en %s a\xF1os"]][Mt]}var im=Ec.default=Du,Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});function ks(Pt,Mt){return[["juuri \xE4sken","juuri nyt"],["%s sekuntia sitten","%s sekunnin p\xE4\xE4st\xE4"],["minuutti sitten","minuutin p\xE4\xE4st\xE4"],["%s minuuttia sitten","%s minuutin p\xE4\xE4st\xE4"],["tunti sitten","tunnin p\xE4\xE4st\xE4"],["%s tuntia sitten","%s tunnin p\xE4\xE4st\xE4"],["p\xE4iv\xE4 sitten","p\xE4iv\xE4n p\xE4\xE4st\xE4"],["%s p\xE4iv\xE4\xE4 sitten","%s p\xE4iv\xE4n p\xE4\xE4st\xE4"],["viikko sitten","viikon p\xE4\xE4st\xE4"],["%s viikkoa sitten","%s viikon p\xE4\xE4st\xE4"],["kuukausi sitten","kuukauden p\xE4\xE4st\xE4"],["%s kuukautta sitten","%s kuukauden p\xE4\xE4st\xE4"],["vuosi sitten","vuoden p\xE4\xE4st\xE4"],["%s vuotta sitten","%s vuoden p\xE4\xE4st\xE4"]][Mt]}var bs=Xa.default=ks,Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});function s_(Pt,Mt){return[["\xE0 l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][Mt]}var a_=Ks.default=s_,Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});function om(Pt,Mt){return[["xusto agora","daqu\xED a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 d\xEDa","nun d\xEDa"],["hai %s d\xEDas","en %s d\xEDas"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][Mt]}var Wc=Ll.default=om,xs={};Object.defineProperty(xs,"__esModule",{value:!0});function Yp(Pt,Mt){return[["\u0905\u092D\u0940","\u0915\u0941\u091B \u0938\u092E\u092F"],["%s \u0938\u0947\u0915\u0902\u0921 \u092A\u0939\u0932\u0947","%s \u0938\u0947\u0915\u0902\u0921 \u092E\u0947\u0902"],["1 \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","1 \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["%s \u092E\u093F\u0928\u091F \u092A\u0939\u0932\u0947","%s \u092E\u093F\u0928\u091F \u092E\u0947\u0902"],["1 \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","1 \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["%s \u0918\u0902\u091F\u0947 \u092A\u0939\u0932\u0947","%s \u0918\u0902\u091F\u0947 \u092E\u0947\u0902"],["1 \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","1 \u0926\u093F\u0928 \u092E\u0947\u0902"],["%s \u0926\u093F\u0928 \u092A\u0939\u0932\u0947","%s \u0926\u093F\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092A\u0939\u0932\u0947","1 \u0938\u092A\u094D\u0924\u093E\u0939 \u092E\u0947\u0902"],["%s \u0939\u092B\u094D\u0924\u0947 \u092A\u0939\u0932\u0947","%s \u0939\u092B\u094D\u0924\u094B\u0902 \u092E\u0947\u0902"],["1 \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","1 \u092E\u0939\u0940\u0928\u0947 \u092E\u0947\u0902"],["%s \u092E\u0939\u0940\u0928\u0947 \u092A\u0939\u0932\u0947","%s \u092E\u0939\u0940\u0928\u094B\u0902 \u092E\u0947\u0902"],["1 \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","1 \u0938\u093E\u0932 \u092E\u0947\u0902"],["%s \u0938\u093E\u0932 \u092A\u0939\u0932\u0947","%s \u0938\u093E\u0932 \u092E\u0947\u0902"]][Mt]}var Za=xs.default=Yp,sm={};Object.defineProperty(sm,"__esModule",{value:!0});function Bf(Pt,Mt){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][Mt]}var Fs=sm.default=Bf,gl={};Object.defineProperty(gl,"__esModule",{value:!0});function Ff(Pt,Mt){return[["\uBC29\uAE08","\uACE7"],["%s\uCD08 \uC804","%s\uCD08 \uD6C4"],["1\uBD84 \uC804","1\uBD84 \uD6C4"],["%s\uBD84 \uC804","%s\uBD84 \uD6C4"],["1\uC2DC\uAC04 \uC804","1\uC2DC\uAC04 \uD6C4"],["%s\uC2DC\uAC04 \uC804","%s\uC2DC\uAC04 \uD6C4"],["1\uC77C \uC804","1\uC77C \uD6C4"],["%s\uC77C \uC804","%s\uC77C \uD6C4"],["1\uC8FC\uC77C \uC804","1\uC8FC\uC77C \uD6C4"],["%s\uC8FC\uC77C \uC804","%s\uC8FC\uC77C \uD6C4"],["1\uAC1C\uC6D4 \uC804","1\uAC1C\uC6D4 \uD6C4"],["%s\uAC1C\uC6D4 \uC804","%s\uAC1C\uC6D4 \uD6C4"],["1\uB144 \uC804","1\uB144 \uD6C4"],["%s\uB144 \uC804","%s\uB144 \uD6C4"]][Mt]}var Sc=gl.default=Ff,yu={};Object.defineProperty(yu,"__esModule",{value:!0});function yh(Pt,Mt){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][Mt]}var Nd=yu.default=yh,na={};Object.defineProperty(na,"__esModule",{value:!0});function Iy(Pt,Mt){return[["agora mesmo","agora"],["h\xE1 %s segundos","em %s segundos"],["h\xE1 um minuto","em um minuto"],["h\xE1 %s minutos","em %s minutos"],["h\xE1 uma hora","em uma hora"],["h\xE1 %s horas","em %s horas"],["h\xE1 um dia","em um dia"],["h\xE1 %s dias","em %s dias"],["h\xE1 uma semana","em uma semana"],["h\xE1 %s semanas","em %s semanas"],["h\xE1 um m\xEAs","em um m\xEAs"],["h\xE1 %s meses","em %s meses"],["h\xE1 um ano","em um ano"],["h\xE1 %s anos","em %s anos"]][Mt]}var Cc=na.default=Iy,Js={};Object.defineProperty(Js,"__esModule",{value:!0});function Aa(Pt,Mt){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 m\xE5nad sedan","om 1 m\xE5nad"],["%s m\xE5nader sedan","om %s m\xE5nader"],["1 \xE5r sedan","om 1 \xE5r"],["%s \xE5r sedan","om %s \xE5r"]][Mt]}var am=Js.default=Aa,Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});function zf(Pt,Mt){return[["\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48\u0E19\u0E35\u0E49","\u0E2D\u0E35\u0E01\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48"],["%s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"],["1 \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E19\u0E32\u0E17\u0E35"],["%s \u0E19\u0E32\u0E17\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E19\u0E32\u0E17\u0E35"],["1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["%s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07"],["1 \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E27\u0E31\u0E19"],["%s \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E27\u0E31\u0E19"],["1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["%s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],["1 \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E40\u0E14\u0E37\u0E2D\u0E19"],["%s \u0E40\u0E14\u0E37\u0E2D\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E40\u0E14\u0E37\u0E2D\u0E19"],["1 \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 1 \u0E1B\u0E35"],["%s \u0E1B\u0E35\u0E17\u0E35\u0E48\u0E41\u0E25\u0E49\u0E27","\u0E43\u0E19 %s \u0E1B\u0E35"]][Mt]}var $y=Oy.default=zf,N0={};Object.defineProperty(N0,"__esModule",{value:!0});function ml(Pt,Mt){return[["az \xF6nce","\u015Fimdi"],["%s saniye \xF6nce","%s saniye i\xE7inde"],["1 dakika \xF6nce","1 dakika i\xE7inde"],["%s dakika \xF6nce","%s dakika i\xE7inde"],["1 saat \xF6nce","1 saat i\xE7inde"],["%s saat \xF6nce","%s saat i\xE7inde"],["1 g\xFCn \xF6nce","1 g\xFCn i\xE7inde"],["%s g\xFCn \xF6nce","%s g\xFCn i\xE7inde"],["1 hafta \xF6nce","1 hafta i\xE7inde"],["%s hafta \xF6nce","%s hafta i\xE7inde"],["1 ay \xF6nce","1 ay i\xE7inde"],["%s ay \xF6nce","%s ay i\xE7inde"],["1 y\u0131l \xF6nce","1 y\u0131l i\xE7inde"],["%s y\u0131l \xF6nce","%s y\u0131l i\xE7inde"]][Mt]}var vh=N0.default=ml;const Sa={ar:mh,cs:da,de:Df,el:pu,es:gu,fi:ic,fr:tm,gl:jp,hi:Vp,it:Up,ko:Zs,nl:ky,pt:mu,sv:R0,th:Ay,tr:ps,ur:M0},Tc=new Al({allowMissing:!0});Tc.init=(Pt,Mt)=>{Tc.clear(),Pt&&(Tc.locale(Pt),Tc.extend(Sa[Pt])),Mt&&Tc.extend(Mt)},Ys("ar",o_),Ys("cs",Nu),Ys("de",mi),Ys("el",Gc),Ys("es",im),Ys("fi",bs),Ys("fr",a_),Ys("gl",Wc),Ys("hi",Za),Ys("it",Fs),Ys("ko",Sc),Ys("nl",Nd),Ys("pt",Cc),Ys("sv",am),Ys("th",$y),Ys("tr",vh),Tc.registerMessages=(Pt,Mt)=>{Sa[Pt]?Sa[Pt]=It(It({},Sa[Pt]),Mt):Sa[Pt]=Mt};var fa=Tc,Xp=Pt=>{const Mt=Tn();return _p(Mt,()=>Pt.onClickOutside()),cn("ul",{ref:Mt,className:"r6o-comment-dropdown-menu"},cn("li",{onClick:Pt.onEdit},fa.t("Edit")),cn("li",{onClick:Pt.onDelete},fa.t("Delete")))},Us={},Vi={},lm={exports:{}};/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/(function(Pt,Mt){(function(zt,Ht){Ht(Pt,Mt)})(Yl,function(zt,Ht){var Ut=typeof Map=="function"?new Map:function(){var On=[],ur=[];return{has:function(Sr){return On.indexOf(Sr)>-1},get:function(Sr){return ur[On.indexOf(Sr)]},set:function(Sr,Pr){On.indexOf(Sr)===-1&&(On.push(Sr),ur.push(Pr))},delete:function(Sr){var Pr=On.indexOf(Sr);Pr>-1&&(On.splice(Pr,1),ur.splice(Pr,1))}}}(),Qt=function(On){return new Event(On,{bubbles:!0})};try{new Event("test")}catch{Qt=function(ur){var Sr=document.createEvent("Event");return Sr.initEvent(ur,!0,!1),Sr}}function hn(On){if(!On||!On.nodeName||On.nodeName!=="TEXTAREA"||Ut.has(On))return;var ur=null,Sr=null,Pr=null;function Wr(){var lo=window.getComputedStyle(On,null);lo.resize==="vertical"?On.style.resize="none":lo.resize==="both"&&(On.style.resize="horizontal"),lo.boxSizing==="content-box"?ur=-(parseFloat(lo.paddingTop)+parseFloat(lo.paddingBottom)):ur=parseFloat(lo.borderTopWidth)+parseFloat(lo.borderBottomWidth),isNaN(ur)&&(ur=0),Oi()}function ai(lo){{var Co=On.style.width;On.style.width="0px",On.offsetWidth,On.style.width=Co}On.style.overflowY=lo}function oi(lo){for(var Co=[];lo&&lo.parentNode&&lo.parentNode instanceof Element;)lo.parentNode.scrollTop&&Co.push({node:lo.parentNode,scrollTop:lo.parentNode.scrollTop}),lo=lo.parentNode;return Co}function _i(){if(On.scrollHeight!==0){var lo=oi(On),Co=document.documentElement&&document.documentElement.scrollTop;On.style.height="",On.style.height=On.scrollHeight+ur+"px",Sr=On.clientWidth,lo.forEach(function(yo){yo.node.scrollTop=yo.scrollTop}),Co&&(document.documentElement.scrollTop=Co)}}function Oi(){_i();var lo=Math.round(parseFloat(On.style.height)),Co=window.getComputedStyle(On,null),yo=Co.boxSizing==="content-box"?Math.round(parseFloat(Co.height)):On.offsetHeight;if(yo<lo?Co.overflowY==="hidden"&&(ai("scroll"),_i(),yo=Co.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(On,null).height)):On.offsetHeight):Co.overflowY!=="hidden"&&(ai("hidden"),_i(),yo=Co.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(On,null).height)):On.offsetHeight),Pr!==yo){Pr=yo;var _a=Qt("autosize:resized");try{On.dispatchEvent(_a)}catch{}}}var Eo=function(){On.clientWidth!==Sr&&Oi()},mo=function(lo){window.removeEventListener("resize",Eo,!1),On.removeEventListener("input",Oi,!1),On.removeEventListener("keyup",Oi,!1),On.removeEventListener("autosize:destroy",mo,!1),On.removeEventListener("autosize:update",Oi,!1),Object.keys(lo).forEach(function(Co){On.style[Co]=lo[Co]}),Ut.delete(On)}.bind(On,{height:On.style.height,resize:On.style.resize,overflowY:On.style.overflowY,overflowX:On.style.overflowX,wordWrap:On.style.wordWrap});On.addEventListener("autosize:destroy",mo,!1),"onpropertychange"in On&&"oninput"in On&&On.addEventListener("keyup",Oi,!1),window.addEventListener("resize",Eo,!1),On.addEventListener("input",Oi,!1),On.addEventListener("autosize:update",Oi,!1),On.style.overflowX="hidden",On.style.wordWrap="break-word",Ut.set(On,{destroy:mo,update:Oi}),Wr()}function xn(On){var ur=Ut.get(On);ur&&ur.destroy()}function $n(On){var ur=Ut.get(On);ur&&ur.update()}var Mn=null;typeof window>"u"||typeof window.getComputedStyle!="function"?(Mn=function(On){return On},Mn.destroy=function(On){return On},Mn.update=function(On){return On}):(Mn=function(On,ur){return On&&Array.prototype.forEach.call(On.length?On:[On],function(Sr){return hn(Sr)}),On},Mn.destroy=function(On){return On&&Array.prototype.forEach.call(On.length?On:[On],xn),On},Mn.update=function(On){return On&&Array.prototype.forEach.call(On.length?On:[On],$n),On}),Ht.default=Mn,zt.exports=Ht.default})})(lm,lm.exports);var Zp=function(Pt,Mt,zt){return zt=window.getComputedStyle,(zt?zt(Pt):Pt.currentStyle)[Mt.replace(/-(\w)/gi,function(Ht,Ut){return Ut.toUpperCase()})]},Pl=Zp,oc=Pl;function Zh(Pt){var Mt=oc(Pt,"line-height"),zt=parseFloat(Mt,10);if(Mt===zt+""){var Ht=Pt.style.lineHeight;Pt.style.lineHeight=Mt+"em",Mt=oc(Pt,"line-height"),zt=parseFloat(Mt,10),Ht?Pt.style.lineHeight=Ht:delete Pt.style.lineHeight}if(Mt.indexOf("pt")!==-1?(zt*=4,zt/=3):Mt.indexOf("mm")!==-1?(zt*=96,zt/=25.4):Mt.indexOf("cm")!==-1?(zt*=96,zt/=2.54):Mt.indexOf("in")!==-1?zt*=96:Mt.indexOf("pc")!==-1&&(zt*=16),zt=Math.round(zt),Mt==="normal"){var Ut=Pt.nodeName,Qt=document.createElement(Ut);Qt.innerHTML="&nbsp;",Ut.toUpperCase()==="TEXTAREA"&&Qt.setAttribute("rows","1");var hn=oc(Pt,"font-size");Qt.style.fontSize=hn,Qt.style.padding="0px",Qt.style.border="0px";var xn=document.body;xn.appendChild(Qt);var $n=Qt.offsetHeight;zt=$n,xn.removeChild(Qt)}return zt}var Kp=Zh,D0=Yl&&Yl.__extends||function(){var Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,zt){Mt.__proto__=zt}||function(Mt,zt){for(var Ht in zt)zt.hasOwnProperty(Ht)&&(Mt[Ht]=zt[Ht])};return function(Mt,zt){Pt(Mt,zt);function Ht(){this.constructor=Mt}Mt.prototype=zt===null?Object.create(zt):(Ht.prototype=zt.prototype,new Ht)}}(),cm=Yl&&Yl.__assign||Object.assign||function(Pt){for(var Mt,zt=1,Ht=arguments.length;zt<Ht;zt++){Mt=arguments[zt];for(var Ut in Mt)Object.prototype.hasOwnProperty.call(Mt,Ut)&&(Pt[Ut]=Mt[Ut])}return Pt},gs=Yl&&Yl.__rest||function(Pt,Mt){var zt={};for(var Ht in Pt)Object.prototype.hasOwnProperty.call(Pt,Ht)&&Mt.indexOf(Ht)<0&&(zt[Ht]=Pt[Ht]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,Ht=Object.getOwnPropertySymbols(Pt);Ut<Ht.length;Ut++)Mt.indexOf(Ht[Ut])<0&&(zt[Ht[Ut]]=Pt[Ht[Ut]]);return zt};Vi.__esModule=!0;var kc=Ba,Os=Xl.exports,Kh=lm.exports,Fl=Kp,Ry=Fl,Fo="autosize:resized",Dd=function(Pt){D0(Mt,Pt);function Mt(){var zt=Pt!==null&&Pt.apply(this,arguments)||this;return zt.state={lineHeight:null},zt.textarea=null,zt.onResize=function(Ht){zt.props.onResize&&zt.props.onResize(Ht)},zt.updateLineHeight=function(){zt.textarea&&zt.setState({lineHeight:Ry(zt.textarea)})},zt.onChange=function(Ht){var Ut=zt.props.onChange;zt.currentValue=Ht.currentTarget.value,Ut&&Ut(Ht)},zt}return Mt.prototype.componentDidMount=function(){var zt=this,Ht=this.props,Ut=Ht.maxRows,Qt=Ht.async;typeof Ut=="number"&&this.updateLineHeight(),typeof Ut=="number"||Qt?setTimeout(function(){return zt.textarea&&Kh(zt.textarea)}):this.textarea&&Kh(this.textarea),this.textarea&&this.textarea.addEventListener(Fo,this.onResize)},Mt.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(Fo,this.onResize),Kh.destroy(this.textarea))},Mt.prototype.render=function(){var zt=this,Ht=this,Ut=Ht.props;Ut.onResize;var Qt=Ut.maxRows;Ut.onChange;var hn=Ut.style;Ut.innerRef;var xn=Ut.children,$n=gs(Ut,["onResize","maxRows","onChange","style","innerRef","children"]),Mn=Ht.state.lineHeight,On=Qt&&Mn?Mn*Qt:null;return kc.createElement("textarea",cm({},$n,{onChange:this.onChange,style:On?cm({},hn,{maxHeight:On}):hn,ref:function(ur){zt.textarea=ur,typeof zt.props.innerRef=="function"?zt.props.innerRef(ur):zt.props.innerRef&&(zt.props.innerRef.current=ur)}}),xn)},Mt.prototype.componentDidUpdate=function(){this.textarea&&Kh.update(this.textarea)},Mt.defaultProps={rows:1,async:!1},Mt.propTypes={rows:Os.number,maxRows:Os.number,onResize:Os.func,innerRef:Os.any,async:Os.bool},Mt}(kc.Component);Vi.TextareaAutosize=kc.forwardRef(function(Pt,Mt){return kc.createElement(Dd,cm({},Pt,{innerRef:Mt}))}),function(Pt){Pt.__esModule=!0;var Mt=Vi;Pt.default=Mt.TextareaAutosize}(Us);var Ms=tu(Us);class Hf extends dn{constructor(Mt){super(Mt),Bt(this,"onKeyDown",zt=>{zt.which===13&&zt.ctrlKey&&this.props.onSaveAndClose()}),this.element=an()}componentDidMount(){this.props.focus&&this.element.current&&this.element.current.focus({preventScroll:!0})}render(){return cn(Ms,{ref:this.element,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||fa.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}function Wi(){return Wi=Object.assign||function(Pt){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt];for(var Ht in zt)Object.prototype.hasOwnProperty.call(zt,Ht)&&(Pt[Ht]=zt[Ht])}return Pt},Wi.apply(this,arguments)}function Bd(Pt){if(Pt.sheet)return Pt.sheet;for(var Mt=0;Mt<document.styleSheets.length;Mt++)if(document.styleSheets[Mt].ownerNode===Pt)return document.styleSheets[Mt]}function My(Pt){var Mt=document.createElement("style");return Mt.setAttribute("data-emotion",Pt.key),Pt.nonce!==void 0&&Mt.setAttribute("nonce",Pt.nonce),Mt.appendChild(document.createTextNode("")),Mt.setAttribute("data-s",""),Mt}var Jh=function(){function Pt(zt){var Ht=this;this._insertTag=function(Ut){var Qt;Ht.tags.length===0?Ht.insertionPoint?Qt=Ht.insertionPoint.nextSibling:Ht.prepend?Qt=Ht.container.firstChild:Qt=Ht.before:Qt=Ht.tags[Ht.tags.length-1].nextSibling,Ht.container.insertBefore(Ut,Qt),Ht.tags.push(Ut)},this.isSpeedy=zt.speedy===void 0?!0:zt.speedy,this.tags=[],this.ctr=0,this.nonce=zt.nonce,this.key=zt.key,this.container=zt.container,this.prepend=zt.prepend,this.insertionPoint=zt.insertionPoint,this.before=null}var Mt=Pt.prototype;return Mt.hydrate=function(zt){zt.forEach(this._insertTag)},Mt.insert=function(zt){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(My(this));var Ht=this.tags[this.tags.length-1];if(this.isSpeedy){var Ut=Bd(Ht);try{Ut.insertRule(zt,Ut.cssRules.length)}catch{}}else Ht.appendChild(document.createTextNode(zt));this.ctr++},Mt.flush=function(){this.tags.forEach(function(zt){return zt.parentNode&&zt.parentNode.removeChild(zt)}),this.tags=[],this.ctr=0},Pt}(),go="-ms-",yl="-moz-",ys="-webkit-",qc="comm",vl="rule",La="decl",l_="@import",Ny="@keyframes",_h=Math.abs,Il=String.fromCharCode;function Qh(Pt,Mt){return(((Mt<<2^pa(Pt,0))<<2^pa(Pt,1))<<2^pa(Pt,2))<<2^pa(Pt,3)}function Ol(Pt){return Pt.trim()}function Yc(Pt,Mt){return(Pt=Mt.exec(Pt))?Pt[0]:Pt}function cs(Pt,Mt,zt){return Pt.replace(Mt,zt)}function bh(Pt,Mt){return Pt.indexOf(Mt)}function pa(Pt,Mt){return Pt.charCodeAt(Mt)|0}function ra(Pt,Mt,zt){return Pt.slice(Mt,zt)}function vu(Pt){return Pt.length}function jf(Pt){return Pt.length}function Pa(Pt,Mt){return Mt.push(Pt),Pt}function xh(Pt,Mt){return Pt.map(Mt).join("")}var zl=1,Fd=1,il=0,Hl=0,ia=0,_u="";function Jp(Pt,Mt,zt,Ht,Ut,Qt,hn){return{value:Pt,root:Mt,parent:zt,type:Ht,props:Ut,children:Qt,line:zl,column:Fd,length:hn,return:""}}function Vf(Pt,Mt,zt){return Jp(Pt,Mt.root,Mt.parent,zt,Mt.props,Mt.children,0)}function zd(){return ia}function bu(){return ia=Hl>0?pa(_u,--Hl):0,Fd--,ia===10&&(Fd=1,zl--),ia}function Cs(){return ia=Hl<il?pa(_u,Hl++):0,Fd++,ia===10&&(Fd=1,zl++),ia}function jl(){return pa(_u,Hl)}function Ia(){return Hl}function Vl(Pt,Mt){return ra(_u,Pt,Mt)}function Xc(Pt){switch(Pt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function um(Pt){return zl=Fd=1,il=vu(_u=Pt),Hl=0,[]}function ed(Pt){return _u="",Pt}function xu(Pt){return Ol(Vl(Hl-1,Ul(Pt===91?Pt+2:Pt===40?Pt+1:Pt)))}function Bu(Pt){for(;(ia=jl())&&ia<33;)Cs();return Xc(Pt)>2||Xc(ia)>3?"":" "}function Ha(Pt,Mt){for(;--Mt&&Cs()&&!(ia<48||ia>102||ia>57&&ia<65||ia>70&&ia<97););return Vl(Pt,Ia()+(Mt<6&&jl()==32&&Cs()==32))}function Ul(Pt){for(;Cs();)switch(ia){case Pt:return Hl;case 34:case 39:return Ul(Pt===34||Pt===39?Pt:ia);case 40:Pt===41&&Ul(Pt);break;case 92:Cs();break}return Hl}function ol(Pt,Mt){for(;Cs()&&Pt+ia!==47+10&&!(Pt+ia===42+42&&jl()===47););return"/*"+Vl(Mt,Hl-1)+"*"+Il(Pt===47?Pt:Cs())}function Dy(Pt){for(;!Xc(jl());)Cs();return Vl(Pt,Hl)}function wh(Pt){return ed(Fu("",null,null,null,[""],Pt=um(Pt),0,[0],Pt))}function Fu(Pt,Mt,zt,Ht,Ut,Qt,hn,xn,$n){for(var Mn=0,On=0,ur=hn,Sr=0,Pr=0,Wr=0,ai=1,oi=1,_i=1,Oi=0,Eo="",mo=Ut,lo=Qt,Co=Ht,yo=Eo;oi;)switch(Wr=Oi,Oi=Cs()){case 34:case 39:case 91:case 40:yo+=xu(Oi);break;case 9:case 10:case 13:case 32:yo+=Bu(Wr);break;case 92:yo+=Ha(Ia()-1,7);continue;case 47:switch(jl()){case 42:case 47:Pa(Ka(ol(Cs(),Ia()),Mt,zt),$n);break;default:yo+="/"}break;case 123*ai:xn[Mn++]=vu(yo)*_i;case 125*ai:case 59:case 0:switch(Oi){case 0:case 125:oi=0;case 59+On:Pr>0&&vu(yo)-ur&&Pa(Pr>32?Ac(yo+";",Ht,zt,ur-1):Ac(cs(yo," ","")+";",Ht,zt,ur-2),$n);break;case 59:yo+=";";default:if(Pa(Co=Oa(yo,Mt,zt,Mn,On,Ut,xn,Eo,mo=[],lo=[],ur),Qt),Oi===123)if(On===0)Fu(yo,Mt,Co,Co,mo,Qt,ur,xn,lo);else switch(Sr){case 100:case 109:case 115:Fu(Pt,Co,Co,Ht&&Pa(Oa(Pt,Co,Co,0,0,Ut,xn,Eo,Ut,mo=[],ur),lo),Ut,lo,ur,xn,Ht?mo:lo);break;default:Fu(yo,Co,Co,Co,[""],lo,ur,xn,lo)}}Mn=On=Pr=0,ai=_i=1,Eo=yo="",ur=hn;break;case 58:ur=1+vu(yo),Pr=Wr;default:if(ai<1){if(Oi==123)--ai;else if(Oi==125&&ai++==0&&bu()==125)continue}switch(yo+=Il(Oi),Oi*ai){case 38:_i=On>0?1:(yo+="\f",-1);break;case 44:xn[Mn++]=(vu(yo)-1)*_i,_i=1;break;case 64:jl()===45&&(yo+=xu(Cs())),Sr=jl(),On=vu(Eo=yo+=Dy(Ia())),Oi++;break;case 45:Wr===45&&vu(yo)==2&&(ai=0)}}return Qt}function Oa(Pt,Mt,zt,Ht,Ut,Qt,hn,xn,$n,Mn,On){for(var ur=Ut-1,Sr=Ut===0?Qt:[""],Pr=jf(Sr),Wr=0,ai=0,oi=0;Wr<Ht;++Wr)for(var _i=0,Oi=ra(Pt,ur+1,ur=_h(ai=hn[Wr])),Eo=Pt;_i<Pr;++_i)(Eo=Ol(ai>0?Sr[_i]+" "+Oi:cs(Oi,/&\f/g,Sr[_i])))&&($n[oi++]=Eo);return Jp(Pt,Mt,zt,Ut===0?vl:xn,$n,Mn,On)}function Ka(Pt,Mt,zt){return Jp(Pt,Mt,zt,qc,Il(zd()),ra(Pt,2,-2),0)}function Ac(Pt,Mt,zt,Ht){return Jp(Pt,Mt,zt,La,ra(Pt,0,Ht),ra(Pt,Ht+1,-1),Ht)}function Gl(Pt,Mt){switch(Qh(Pt,Mt)){case 5103:return ys+"print-"+Pt+Pt;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ys+Pt+Pt;case 5349:case 4246:case 4810:case 6968:case 2756:return ys+Pt+yl+Pt+go+Pt+Pt;case 6828:case 4268:return ys+Pt+go+Pt+Pt;case 6165:return ys+Pt+go+"flex-"+Pt+Pt;case 5187:return ys+Pt+cs(Pt,/(\w+).+(:[^]+)/,ys+"box-$1$2"+go+"flex-$1$2")+Pt;case 5443:return ys+Pt+go+"flex-item-"+cs(Pt,/flex-|-self/,"")+Pt;case 4675:return ys+Pt+go+"flex-line-pack"+cs(Pt,/align-content|flex-|-self/,"")+Pt;case 5548:return ys+Pt+go+cs(Pt,"shrink","negative")+Pt;case 5292:return ys+Pt+go+cs(Pt,"basis","preferred-size")+Pt;case 6060:return ys+"box-"+cs(Pt,"-grow","")+ys+Pt+go+cs(Pt,"grow","positive")+Pt;case 4554:return ys+cs(Pt,/([^-])(transform)/g,"$1"+ys+"$2")+Pt;case 6187:return cs(cs(cs(Pt,/(zoom-|grab)/,ys+"$1"),/(image-set)/,ys+"$1"),Pt,"")+Pt;case 5495:case 3959:return cs(Pt,/(image-set\([^]*)/,ys+"$1$`$1");case 4968:return cs(cs(Pt,/(.+:)(flex-)?(.*)/,ys+"box-pack:$3"+go+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ys+Pt+Pt;case 4095:case 3583:case 4068:case 2532:return cs(Pt,/(.+)-inline(.+)/,ys+"$1$2")+Pt;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vu(Pt)-1-Mt>6)switch(pa(Pt,Mt+1)){case 109:if(pa(Pt,Mt+4)!==45)break;case 102:return cs(Pt,/(.+:)(.+)-([^]+)/,"$1"+ys+"$2-$3$1"+yl+(pa(Pt,Mt+3)==108?"$3":"$2-$3"))+Pt;case 115:return~bh(Pt,"stretch")?Gl(cs(Pt,"stretch","fill-available"),Mt)+Pt:Pt}break;case 4949:if(pa(Pt,Mt+1)!==115)break;case 6444:switch(pa(Pt,vu(Pt)-3-(~bh(Pt,"!important")&&10))){case 107:return cs(Pt,":",":"+ys)+Pt;case 101:return cs(Pt,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ys+(pa(Pt,14)===45?"inline-":"")+"box$3$1"+ys+"$2$3$1"+go+"$2box$3")+Pt}break;case 5936:switch(pa(Pt,Mt+11)){case 114:return ys+Pt+go+cs(Pt,/[svh]\w+-[tblr]{2}/,"tb")+Pt;case 108:return ys+Pt+go+cs(Pt,/[svh]\w+-[tblr]{2}/,"tb-rl")+Pt;case 45:return ys+Pt+go+cs(Pt,/[svh]\w+-[tblr]{2}/,"lr")+Pt}return ys+Pt+go+Pt+Pt}return Pt}function Hd(Pt,Mt){for(var zt="",Ht=jf(Pt),Ut=0;Ut<Ht;Ut++)zt+=Mt(Pt[Ut],Ut,Pt,Mt)||"";return zt}function jd(Pt,Mt,zt,Ht){switch(Pt.type){case l_:case La:return Pt.return=Pt.return||Pt.value;case qc:return"";case vl:Pt.value=Pt.props.join(",")}return vu(zt=Hd(Pt.children,Ht))?Pt.return=Pt.value+"{"+zt+"}":""}function Eh(Pt){var Mt=jf(Pt);return function(zt,Ht,Ut,Qt){for(var hn="",xn=0;xn<Mt;xn++)hn+=Pt[xn](zt,Ht,Ut,Qt)||"";return hn}}function $l(Pt){return function(Mt){Mt.root||(Mt=Mt.return)&&Pt(Mt)}}function B0(Pt,Mt,zt,Ht){if(!Pt.return)switch(Pt.type){case La:Pt.return=Gl(Pt.value,Pt.length);break;case Ny:return Hd([Vf(cs(Pt.value,"@","@"+ys),Pt,"")],Ht);case vl:if(Pt.length)return xh(Pt.props,function(Ut){switch(Yc(Ut,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hd([Vf(cs(Ut,/:(read-\w+)/,":"+yl+"$1"),Pt,"")],Ht);case"::placeholder":return Hd([Vf(cs(Ut,/:(plac\w+)/,":"+ys+"input-$1"),Pt,""),Vf(cs(Ut,/:(plac\w+)/,":"+yl+"$1"),Pt,""),Vf(cs(Ut,/:(plac\w+)/,go+"input-$1"),Pt,"")],Ht)}return""})}}function ja(Pt){var Mt=Object.create(null);return function(zt){return Mt[zt]===void 0&&(Mt[zt]=Pt(zt)),Mt[zt]}}var F0=function(Pt,Mt,zt){for(var Ht=0,Ut=0;Ht=Ut,Ut=jl(),Ht===38&&Ut===12&&(Mt[zt]=1),!Xc(Ut);)Cs();return Vl(Pt,Hl)},Zc=function(Pt,Mt){var zt=-1,Ht=44;do switch(Xc(Ht)){case 0:Ht===38&&jl()===12&&(Mt[zt]=1),Pt[zt]+=F0(Hl-1,Mt,zt);break;case 2:Pt[zt]+=xu(Ht);break;case 4:if(Ht===44){Pt[++zt]=jl()===58?"&\f":"",Mt[zt]=Pt[zt].length;break}default:Pt[zt]+=Il(Ht)}while(Ht=Cs());return Pt},$a=function(Pt,Mt){return ed(Zc(um(Pt),Mt))},sc=new WeakMap,td=function(Pt){if(!(Pt.type!=="rule"||!Pt.parent||!Pt.length)){for(var Mt=Pt.value,zt=Pt.parent,Ht=Pt.column===zt.column&&Pt.line===zt.line;zt.type!=="rule";)if(zt=zt.parent,!zt)return;if(!(Pt.props.length===1&&Mt.charCodeAt(0)!==58&&!sc.get(zt))&&!Ht){sc.set(Pt,!0);for(var Ut=[],Qt=$a(Mt,Ut),hn=zt.props,xn=0,$n=0;xn<Qt.length;xn++)for(var Mn=0;Mn<hn.length;Mn++,$n++)Pt.props[$n]=Ut[xn]?Qt[xn].replace(/&\f/g,hn[Mn]):hn[Mn]+" "+Qt[xn]}}},Vd=function(Pt){if(Pt.type==="decl"){var Mt=Pt.value;Mt.charCodeAt(0)===108&&Mt.charCodeAt(2)===98&&(Pt.return="",Pt.value="")}},Kc=[B0],Ud=function(Pt){var Mt=Pt.key;if(Mt==="css"){var zt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(zt,function(Wr){var ai=Wr.getAttribute("data-emotion");ai.indexOf(" ")!==-1&&(document.head.appendChild(Wr),Wr.setAttribute("data-s",""))})}var Ht=Pt.stylisPlugins||Kc,Ut={},Qt,hn=[];Qt=Pt.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+Mt+' "]'),function(Wr){for(var ai=Wr.getAttribute("data-emotion").split(" "),oi=1;oi<ai.length;oi++)Ut[ai[oi]]=!0;hn.push(Wr)});var xn,$n=[td,Vd];{var Mn,On=[jd,$l(function(Wr){Mn.insert(Wr)})],ur=Eh($n.concat(Ht,On)),Sr=function(Wr){return Hd(wh(Wr),ur)};xn=function(Wr,ai,oi,_i){Mn=oi,Sr(Wr?Wr+"{"+ai.styles+"}":ai.styles),_i&&(Pr.inserted[ai.name]=!0)}}var Pr={key:Mt,sheet:new Jh({key:Mt,container:Qt,nonce:Pt.nonce,speedy:Pt.speedy,prepend:Pt.prepend,insertionPoint:Pt.insertionPoint}),nonce:Pt.nonce,inserted:Ut,registered:{},insert:xn};return Pr.sheet.hydrate(hn),Pr},sl={exports:{}},us={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var zo=typeof Symbol=="function"&&Symbol.for,hm=zo?Symbol.for("react.element"):60103,dm=zo?Symbol.for("react.portal"):60106,Ra=zo?Symbol.for("react.fragment"):60107,Jc=zo?Symbol.for("react.strict_mode"):60108,Uf=zo?Symbol.for("react.profiler"):60114,zu=zo?Symbol.for("react.provider"):60109,Qc=zo?Symbol.for("react.context"):60110,ga=zo?Symbol.for("react.async_mode"):60111,Ma=zo?Symbol.for("react.concurrent_mode"):60111,nd=zo?Symbol.for("react.forward_ref"):60112,Ja=zo?Symbol.for("react.suspense"):60113,z0=zo?Symbol.for("react.suspense_list"):60120,Gd=zo?Symbol.for("react.memo"):60115,ma=zo?Symbol.for("react.lazy"):60116,c_=zo?Symbol.for("react.block"):60121,wu=zo?Symbol.for("react.fundamental"):60117,By=zo?Symbol.for("react.responder"):60118,Qp=zo?Symbol.for("react.scope"):60119;function Lc(Pt){if(typeof Pt=="object"&&Pt!==null){var Mt=Pt.$$typeof;switch(Mt){case hm:switch(Pt=Pt.type,Pt){case ga:case Ma:case Ra:case Uf:case Jc:case Ja:return Pt;default:switch(Pt=Pt&&Pt.$$typeof,Pt){case Qc:case nd:case ma:case Gd:case zu:return Pt;default:return Mt}}case dm:return Mt}}}function Fy(Pt){return Lc(Pt)===Ma}us.AsyncMode=ga,us.ConcurrentMode=Ma,us.ContextConsumer=Qc,us.ContextProvider=zu,us.Element=hm,us.ForwardRef=nd,us.Fragment=Ra,us.Lazy=ma,us.Memo=Gd,us.Portal=dm,us.Profiler=Uf,us.StrictMode=Jc,us.Suspense=Ja,us.isAsyncMode=function(Pt){return Fy(Pt)||Lc(Pt)===ga},us.isConcurrentMode=Fy,us.isContextConsumer=function(Pt){return Lc(Pt)===Qc},us.isContextProvider=function(Pt){return Lc(Pt)===zu},us.isElement=function(Pt){return typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===hm},us.isForwardRef=function(Pt){return Lc(Pt)===nd},us.isFragment=function(Pt){return Lc(Pt)===Ra},us.isLazy=function(Pt){return Lc(Pt)===ma},us.isMemo=function(Pt){return Lc(Pt)===Gd},us.isPortal=function(Pt){return Lc(Pt)===dm},us.isProfiler=function(Pt){return Lc(Pt)===Uf},us.isStrictMode=function(Pt){return Lc(Pt)===Jc},us.isSuspense=function(Pt){return Lc(Pt)===Ja},us.isValidElementType=function(Pt){return typeof Pt=="string"||typeof Pt=="function"||Pt===Ra||Pt===Ma||Pt===Uf||Pt===Jc||Pt===Ja||Pt===z0||typeof Pt=="object"&&Pt!==null&&(Pt.$$typeof===ma||Pt.$$typeof===Gd||Pt.$$typeof===zu||Pt.$$typeof===Qc||Pt.$$typeof===nd||Pt.$$typeof===wu||Pt.$$typeof===By||Pt.$$typeof===Qp||Pt.$$typeof===c_)},us.typeOf=Lc,sl.exports=us;var eu=sl.exports,Gf={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Wf={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fm={};fm[eu.ForwardRef]=Gf,fm[eu.Memo]=Wf;var qf=!0;function Sh(Pt,Mt,zt){var Ht="";return zt.split(" ").forEach(function(Ut){Pt[Ut]!==void 0?Mt.push(Pt[Ut]+";"):Ht+=Ut+" "}),Ht}var Yf=function(Pt,Mt,zt){var Ht=Pt.key+"-"+Mt.name;if((zt===!1||qf===!1)&&Pt.registered[Ht]===void 0&&(Pt.registered[Ht]=Mt.styles),Pt.inserted[Mt.name]===void 0){var Ut=Mt;do Pt.insert(Mt===Ut?"."+Ht:"",Ut,Pt.sheet,!0),Ut=Ut.next;while(Ut!==void 0)}};function Xf(Pt){for(var Mt=0,zt,Ht=0,Ut=Pt.length;Ut>=4;++Ht,Ut-=4)zt=Pt.charCodeAt(Ht)&255|(Pt.charCodeAt(++Ht)&255)<<8|(Pt.charCodeAt(++Ht)&255)<<16|(Pt.charCodeAt(++Ht)&255)<<24,zt=(zt&65535)*1540483477+((zt>>>16)*59797<<16),zt^=zt>>>24,Mt=(zt&65535)*1540483477+((zt>>>16)*59797<<16)^(Mt&65535)*1540483477+((Mt>>>16)*59797<<16);switch(Ut){case 3:Mt^=(Pt.charCodeAt(Ht+2)&255)<<16;case 2:Mt^=(Pt.charCodeAt(Ht+1)&255)<<8;case 1:Mt^=Pt.charCodeAt(Ht)&255,Mt=(Mt&65535)*1540483477+((Mt>>>16)*59797<<16)}return Mt^=Mt>>>13,Mt=(Mt&65535)*1540483477+((Mt>>>16)*59797<<16),((Mt^Mt>>>15)>>>0).toString(36)}var rd={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vo=/[A-Z]|^ms/g,Ch=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wd=function(Pt){return Pt.charCodeAt(1)===45},Th=function(Pt){return Pt!=null&&typeof Pt!="boolean"},_l=ja(function(Pt){return Wd(Pt)?Pt:Pt.replace(vo,"-$&").toLowerCase()}),H0=function(Pt,Mt){switch(Pt){case"animation":case"animationName":if(typeof Mt=="string")return Mt.replace(Ch,function(zt,Ht,Ut){return Pc={name:Ht,styles:Ut,next:Pc},Ht})}return rd[Pt]!==1&&!Wd(Pt)&&typeof Mt=="number"&&Mt!==0?Mt+"px":Mt};function Qa(Pt,Mt,zt){if(zt==null)return"";if(zt.__emotion_styles!==void 0)return zt;switch(typeof zt){case"boolean":return"";case"object":{if(zt.anim===1)return Pc={name:zt.name,styles:zt.styles,next:Pc},zt.name;if(zt.styles!==void 0){var Ht=zt.next;if(Ht!==void 0)for(;Ht!==void 0;)Pc={name:Ht.name,styles:Ht.styles,next:Pc},Ht=Ht.next;var Ut=zt.styles+";";return Ut}return oa(Pt,Mt,zt)}case"function":{if(Pt!==void 0){var Qt=Pc,hn=zt(Pt);return Pc=Qt,Qa(Pt,Mt,hn)}break}}if(Mt==null)return zt;var xn=Mt[zt];return xn!==void 0?xn:zt}function oa(Pt,Mt,zt){var Ht="";if(Array.isArray(zt))for(var Ut=0;Ut<zt.length;Ut++)Ht+=Qa(Pt,Mt,zt[Ut])+";";else for(var Qt in zt){var hn=zt[Qt];if(typeof hn!="object")Mt!=null&&Mt[hn]!==void 0?Ht+=Qt+"{"+Mt[hn]+"}":Th(hn)&&(Ht+=_l(Qt)+":"+H0(Qt,hn)+";");else if(Array.isArray(hn)&&typeof hn[0]=="string"&&(Mt==null||Mt[hn[0]]===void 0))for(var xn=0;xn<hn.length;xn++)Th(hn[xn])&&(Ht+=_l(Qt)+":"+H0(Qt,hn[xn])+";");else{var $n=Qa(Pt,Mt,hn);switch(Qt){case"animation":case"animationName":{Ht+=_l(Qt)+":"+$n+";";break}default:Ht+=Qt+"{"+$n+"}"}}}return Ht}var j0=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Pc,Hu=function(Pt,Mt,zt){if(Pt.length===1&&typeof Pt[0]=="object"&&Pt[0]!==null&&Pt[0].styles!==void 0)return Pt[0];var Ht=!0,Ut="";Pc=void 0;var Qt=Pt[0];Qt==null||Qt.raw===void 0?(Ht=!1,Ut+=Qa(zt,Mt,Qt)):Ut+=Qt[0];for(var hn=1;hn<Pt.length;hn++)Ut+=Qa(zt,Mt,Pt[hn]),Ht&&(Ut+=Qt[hn]);j0.lastIndex=0;for(var xn="",$n;($n=j0.exec(Ut))!==null;)xn+="-"+$n[1];var Mn=Xf(Ut)+xn;return{name:Mn,styles:Ut,next:Pc}},Zf={}.hasOwnProperty,eg=Vn(typeof HTMLElement<"u"?Ud({key:"css"}):null);eg.Provider;var V0=function(Pt){return zs(function(Mt,zt){var Ht=_r(eg);return Pt(Mt,Ht,zt)})},Qs=Vn({}),ws="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ju=function(Pt,Mt){var zt={};for(var Ht in Mt)Zf.call(Mt,Ht)&&(zt[Ht]=Mt[Ht]);return zt[ws]=Pt,zt},zy=function(){return null},Vu=V0(function(Pt,Mt,zt){var Ht=Pt.css;typeof Ht=="string"&&Mt.registered[Ht]!==void 0&&(Ht=Mt.registered[Ht]);var Ut=Pt[ws],Qt=[Ht],hn="";typeof Pt.className=="string"?hn=Sh(Mt.registered,Qt,Pt.className):Pt.className!=null&&(hn=Pt.className+" ");var xn=Hu(Qt,void 0,_r(Qs));Yf(Mt,xn,typeof Ut=="string"),hn+=Mt.key+"-"+xn.name;var $n={};for(var Mn in Pt)Zf.call(Pt,Mn)&&Mn!=="css"&&Mn!==ws&&($n[Mn]=Pt[Mn]);$n.ref=zt,$n.className=hn;var On=cn(Ut,$n),ur=cn(zy,null);return cn(zn,null,ur,On)}),io=function(Pt,Mt){var zt=arguments;if(Mt==null||!Zf.call(Mt,"css"))return cn.apply(void 0,zt);var Ht=zt.length,Ut=new Array(Ht);Ut[0]=Vu,Ut[1]=ju(Pt,Mt);for(var Qt=2;Qt<Ht;Qt++)Ut[Qt]=zt[Qt];return cn.apply(null,Ut)};function ac(){for(var Pt=arguments.length,Mt=new Array(Pt),zt=0;zt<Pt;zt++)Mt[zt]=arguments[zt];return Hu(Mt)}var al=function(){var Pt=ac.apply(void 0,arguments),Mt="animation-"+Pt.name;return{name:Mt,styles:"@keyframes "+Mt+"{"+Pt.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},u_=function Pt(Mt){for(var zt=Mt.length,Ht=0,Ut="";Ht<zt;Ht++){var Qt=Mt[Ht];if(Qt!=null){var hn=void 0;switch(typeof Qt){case"boolean":break;case"object":{if(Array.isArray(Qt))hn=Pt(Qt);else{hn="";for(var xn in Qt)Qt[xn]&&xn&&(hn&&(hn+=" "),hn+=xn)}break}default:hn=Qt}hn&&(Ut&&(Ut+=" "),Ut+=hn)}}return Ut};function Kf(Pt,Mt,zt){var Ht=[],Ut=Sh(Pt,Ht,zt);return Ht.length<2?zt:Ut+Mt(Ht)}var ya=function(){return null},va=V0(function(Pt,Mt){var zt=function(){for(var xn=arguments.length,$n=new Array(xn),Mn=0;Mn<xn;Mn++)$n[Mn]=arguments[Mn];var On=Hu($n,Mt.registered);return Yf(Mt,On,!1),Mt.key+"-"+On.name},Ht=function(){for(var xn=arguments.length,$n=new Array(xn),Mn=0;Mn<xn;Mn++)$n[Mn]=arguments[Mn];return Kf(Mt.registered,zt,u_($n))},Ut={css:zt,cx:Ht,theme:_r(Qs)},Qt=Pt.children(Ut),hn=cn(ya,null);return cn(zn,null,hn,Qt)});function tg(Pt,Mt){return Mt||(Mt=Pt.slice(0)),Object.freeze(Object.defineProperties(Pt,{raw:{value:Object.freeze(Mt)}}))}function pm(Pt,Mt){if(Pt==null)return{};var zt={},Ht=Object.keys(Pt),Ut,Qt;for(Qt=0;Qt<Ht.length;Qt++)Ut=Ht[Qt],!(Mt.indexOf(Ut)>=0)&&(zt[Ut]=Pt[Ut]);return zt}function Eu(Pt,Mt){if(Pt==null)return{};var zt=pm(Pt,Mt),Ht,Ut;if(Object.getOwnPropertySymbols){var Qt=Object.getOwnPropertySymbols(Pt);for(Ut=0;Ut<Qt.length;Ut++)Ht=Qt[Ut],!(Mt.indexOf(Ht)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Pt,Ht)||(zt[Ht]=Pt[Ht]))}return zt}function od(Pt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?od=function(Mt){return typeof Mt}:od=function(Mt){return Mt&&typeof Symbol=="function"&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},od(Pt)}var ng={};Object.defineProperty(ng,"__esModule",{value:!0});var gm=Object.assign||function(Pt){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt];for(var Ht in zt)Object.prototype.hasOwnProperty.call(zt,Ht)&&(Pt[Ht]=zt[Ht])}return Pt},U0=function(){function Pt(Mt,zt){for(var Ht=0;Ht<zt.length;Ht++){var Ut=zt[Ht];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Mt,Ut.key,Ut)}}return function(Mt,zt,Ht){return zt&&Pt(Mt.prototype,zt),Ht&&Pt(Mt,Ht),Mt}}(),mm=Ba,Jf=rg(mm),G0=Xl.exports,sa=rg(G0);function rg(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function ym(Pt,Mt){var zt={};for(var Ht in Pt)Mt.indexOf(Ht)>=0||!Object.prototype.hasOwnProperty.call(Pt,Ht)||(zt[Ht]=Pt[Ht]);return zt}function W0(Pt,Mt){if(!(Pt instanceof Mt))throw new TypeError("Cannot call a class as a function")}function vm(Pt,Mt){if(!Pt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Mt&&(typeof Mt=="object"||typeof Mt=="function")?Mt:Pt}function q0(Pt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Mt);Pt.prototype=Object.create(Mt&&Mt.prototype,{constructor:{value:Pt,enumerable:!1,writable:!0,configurable:!0}}),Mt&&(Object.setPrototypeOf?Object.setPrototypeOf(Pt,Mt):Pt.__proto__=Mt)}var Y0={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},X0=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],Hy=function(Pt){return X0.forEach(function(Mt){return delete Pt[Mt]}),Pt},Z0=function(Pt,Mt){Mt.style.fontSize=Pt.fontSize,Mt.style.fontFamily=Pt.fontFamily,Mt.style.fontWeight=Pt.fontWeight,Mt.style.fontStyle=Pt.fontStyle,Mt.style.letterSpacing=Pt.letterSpacing,Mt.style.textTransform=Pt.textTransform},K0=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,J0=function(){return K0?"_"+Math.random().toString(36).substr(2,12):void 0},_m=function(Pt){q0(Mt,Pt),U0(Mt,null,[{key:"getDerivedStateFromProps",value:function(zt,Ht){var Ut=zt.id;return Ut!==Ht.prevId?{inputId:Ut||J0(),prevId:Ut}:null}}]);function Mt(zt){W0(this,Mt);var Ht=vm(this,(Mt.__proto__||Object.getPrototypeOf(Mt)).call(this,zt));return Ht.inputRef=function(Ut){Ht.input=Ut,typeof Ht.props.inputRef=="function"&&Ht.props.inputRef(Ut)},Ht.placeHolderSizerRef=function(Ut){Ht.placeHolderSizer=Ut},Ht.sizerRef=function(Ut){Ht.sizer=Ut},Ht.state={inputWidth:zt.minWidth,inputId:zt.id||J0(),prevId:zt.id},Ht}return U0(Mt,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(zt,Ht){Ht.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var zt=this.input&&window.getComputedStyle(this.input);!zt||(Z0(zt,this.sizer),this.placeHolderSizer&&Z0(zt,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var zt=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?zt=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:zt=this.sizer.scrollWidth+2;var Ht=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;zt+=Ht,zt<this.props.minWidth&&(zt=this.props.minWidth),zt!==this.state.inputWidth&&this.setState({inputWidth:zt})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var zt=this.props.injectStyles;return K0&&zt?Jf.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var zt=[this.props.defaultValue,this.props.value,""].reduce(function(hn,xn){return hn!=null?hn:xn}),Ht=gm({},this.props.style);Ht.display||(Ht.display="inline-block");var Ut=gm({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),Qt=ym(this.props,[]);return Hy(Qt),Qt.className=this.props.inputClassName,Qt.id=this.state.inputId,Qt.style=Ut,Jf.default.createElement("div",{className:this.props.className,style:Ht},this.renderStyles(),Jf.default.createElement("input",gm({},Qt,{ref:this.inputRef})),Jf.default.createElement("div",{ref:this.sizerRef,style:Y0},zt),this.props.placeholder?Jf.default.createElement("div",{ref:this.placeHolderSizerRef,style:Y0},this.props.placeholder):null)}}]),Mt}(mm.Component);_m.propTypes={className:sa.default.string,defaultValue:sa.default.any,extraWidth:sa.default.oneOfType([sa.default.number,sa.default.string]),id:sa.default.string,injectStyles:sa.default.bool,inputClassName:sa.default.string,inputRef:sa.default.func,inputStyle:sa.default.object,minWidth:sa.default.oneOfType([sa.default.number,sa.default.string]),onAutosize:sa.default.func,onChange:sa.default.func,placeholder:sa.default.string,placeholderIsMinWidth:sa.default.bool,style:sa.default.object,value:sa.default.any},_m.defaultProps={minWidth:1,injectStyles:!0};var bm=ng.default=_m;function qd(Pt,Mt){if(!(Pt instanceof Mt))throw new TypeError("Cannot call a class as a function")}function Q0(Pt,Mt){for(var zt=0;zt<Mt.length;zt++){var Ht=Mt[zt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(Pt,Ht.key,Ht)}}function ig(Pt,Mt,zt){return Mt&&Q0(Pt.prototype,Mt),zt&&Q0(Pt,zt),Pt}function og(Pt,Mt){return og=Object.setPrototypeOf||function(zt,Ht){return zt.__proto__=Ht,zt},og(Pt,Mt)}function Qf(Pt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Mt&&Mt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Mt&&og(Pt,Mt)}function Uu(Pt,Mt,zt){return Mt in Pt?Object.defineProperty(Pt,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):Pt[Mt]=zt,Pt}function jy(Pt,Mt,zt){return Mt in Pt?Object.defineProperty(Pt,Mt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):Pt[Mt]=zt,Pt}function ep(Pt,Mt){var zt=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(Pt);Mt&&(Ht=Ht.filter(function(Ut){return Object.getOwnPropertyDescriptor(Pt,Ut).enumerable})),zt.push.apply(zt,Ht)}return zt}function Va(Pt){for(var Mt=1;Mt<arguments.length;Mt++){var zt=arguments[Mt]!=null?arguments[Mt]:{};Mt%2?ep(Object(zt),!0).forEach(function(Ht){jy(Pt,Ht,zt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors(zt)):ep(Object(zt)).forEach(function(Ht){Object.defineProperty(Pt,Ht,Object.getOwnPropertyDescriptor(zt,Ht))})}return Pt}function xm(Pt){return xm=Object.setPrototypeOf?Object.getPrototypeOf:function(Mt){return Mt.__proto__||Object.getPrototypeOf(Mt)},xm(Pt)}function e1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Vy(Pt){if(Pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pt}function tp(Pt,Mt){return Mt&&(typeof Mt=="object"||typeof Mt=="function")?Mt:Vy(Pt)}function Yd(Pt){var Mt=e1();return function(){var zt=xm(Pt),Ht;if(Mt){var Ut=xm(this).constructor;Ht=Reflect.construct(zt,arguments,Ut)}else Ht=zt.apply(this,arguments);return tp(this,Ht)}}var sd=function(){};function wm(Pt,Mt){return Mt?Mt[0]==="-"?Pt+Mt:Pt+"__"+Mt:Pt}function Uy(Pt,Mt,zt){var Ht=[zt];if(Mt&&Pt)for(var Ut in Mt)Mt.hasOwnProperty(Ut)&&Mt[Ut]&&Ht.push("".concat(wm(Pt,Ut)));return Ht.filter(function(Qt){return Qt}).map(function(Qt){return String(Qt).trim()}).join(" ")}var n1=function(Pt){return Array.isArray(Pt)?Pt.filter(Boolean):od(Pt)==="object"&&Pt!==null?[Pt]:[]},Gy=function(Pt){Pt.className,Pt.clearValue,Pt.cx,Pt.getStyles,Pt.getValue,Pt.hasValue,Pt.isMulti,Pt.isRtl,Pt.options,Pt.selectOption,Pt.selectProps,Pt.setValue,Pt.theme;var Mt=Eu(Pt,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]);return Va({},Mt)};function r1(Pt){return[document.documentElement,document.body,window].indexOf(Pt)>-1}function i1(Pt){return r1(Pt)?window.pageYOffset:Pt.scrollTop}function Em(Pt,Mt){if(r1(Pt)){window.scrollTo(0,Mt);return}Pt.scrollTop=Mt}function Wy(Pt){var Mt=getComputedStyle(Pt),zt=Mt.position==="absolute",Ht=/(auto|scroll)/,Ut=document.documentElement;if(Mt.position==="fixed")return Ut;for(var Qt=Pt;Qt=Qt.parentElement;)if(Mt=getComputedStyle(Qt),!(zt&&Mt.position==="static")&&Ht.test(Mt.overflow+Mt.overflowY+Mt.overflowX))return Qt;return Ut}function o1(Pt,Mt,zt,Ht){return zt*((Pt=Pt/Ht-1)*Pt*Pt+1)+Mt}function sg(Pt,Mt){var zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,Ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:sd,Ut=i1(Pt),Qt=Mt-Ut,hn=10,xn=0;function $n(){xn+=hn;var Mn=o1(xn,Ut,Qt,zt);Em(Pt,Mn),xn<zt?window.requestAnimationFrame($n):Ht(Pt)}$n()}function h_(Pt,Mt){var zt=Pt.getBoundingClientRect(),Ht=Mt.getBoundingClientRect(),Ut=Mt.offsetHeight/3;Ht.bottom+Ut>zt.bottom?Em(Pt,Math.min(Mt.offsetTop+Mt.clientHeight-Pt.offsetHeight+Ut,Pt.scrollHeight)):Ht.top-Ut<zt.top&&Em(Pt,Math.max(Mt.offsetTop-Ut,0))}function qy(Pt){var Mt=Pt.getBoundingClientRect();return{bottom:Mt.bottom,height:Mt.height,left:Mt.left,right:Mt.right,top:Mt.top,width:Mt.width}}function Yy(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function d_(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var s1=!1,f_={get passive(){return s1=!0}},Xd=typeof window<"u"?window:{};Xd.addEventListener&&Xd.removeEventListener&&(Xd.addEventListener("p",sd,f_),Xd.removeEventListener("p",sd,!1));var Xy=s1;function Zy(Pt){var Mt=Pt.maxHeight,zt=Pt.menuEl,Ht=Pt.minHeight,Ut=Pt.placement,Qt=Pt.shouldScroll,hn=Pt.isFixedPosition,xn=Pt.theme,$n=xn.spacing,Mn=Wy(zt),On={placement:"bottom",maxHeight:Mt};if(!zt||!zt.offsetParent)return On;var ur=Mn.getBoundingClientRect(),Sr=ur.height,Pr=zt.getBoundingClientRect(),Wr=Pr.bottom,ai=Pr.height,oi=Pr.top,_i=zt.offsetParent.getBoundingClientRect(),Oi=_i.top,Eo=window.innerHeight,mo=i1(Mn),lo=parseInt(getComputedStyle(zt).marginBottom,10),Co=parseInt(getComputedStyle(zt).marginTop,10),yo=Oi-Co,_a=Eo-oi,Ca=yo+mo,Gs=Sr-mo-oi,Ws=Wr-Eo+mo+lo,Gu=mo+oi-Co,Ic=160;switch(Ut){case"auto":case"bottom":if(_a>=ai)return{placement:"bottom",maxHeight:Mt};if(Gs>=ai&&!hn)return Qt&&sg(Mn,Ws,Ic),{placement:"bottom",maxHeight:Mt};if(!hn&&Gs>=Ht||hn&&_a>=Ht){Qt&&sg(Mn,Ws,Ic);var Jd=hn?_a-lo:Gs-lo;return{placement:"bottom",maxHeight:Jd}}if(Ut==="auto"||hn){var Wu=Mt,kh=hn?yo:Ca;return kh>=Ht&&(Wu=Math.min(kh-lo-$n.controlHeight,Mt)),{placement:"top",maxHeight:Wu}}if(Ut==="bottom")return Qt&&Em(Mn,Ws),{placement:"bottom",maxHeight:Mt};break;case"top":if(yo>=ai)return{placement:"top",maxHeight:Mt};if(Ca>=ai&&!hn)return Qt&&sg(Mn,Gu,Ic),{placement:"top",maxHeight:Mt};if(!hn&&Ca>=Ht||hn&&yo>=Ht){var ql=Mt;return(!hn&&Ca>=Ht||hn&&yo>=Ht)&&(ql=hn?yo-Co:Ca-Co),Qt&&sg(Mn,Gu,Ic),{placement:"top",maxHeight:ql}}return{placement:"bottom",maxHeight:Mt};default:throw new Error('Invalid placement provided "'.concat(Ut,'".'))}return On}function Ky(Pt){var Mt={bottom:"top",top:"bottom"};return Pt?Mt[Pt]:"bottom"}var Zd=function(Pt){return Pt==="auto"?"bottom":Pt},Jy=function(Pt){var Mt,zt=Pt.placement,Ht=Pt.theme,Ut=Ht.borderRadius,Qt=Ht.spacing,hn=Ht.colors;return Mt={label:"menu"},Uu(Mt,Ky(zt),"100%"),Uu(Mt,"backgroundColor",hn.neutral0),Uu(Mt,"borderRadius",Ut),Uu(Mt,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Uu(Mt,"marginBottom",Qt.menuGutter),Uu(Mt,"marginTop",Qt.menuGutter),Uu(Mt,"position","absolute"),Uu(Mt,"width","100%"),Uu(Mt,"zIndex",1),Mt},Qy=Vn({getPortalPlacement:null}),ev=function(Pt){Qf(zt,Pt);var Mt=Yd(zt);function zt(){var Ht;qd(this,zt);for(var Ut=arguments.length,Qt=new Array(Ut),hn=0;hn<Ut;hn++)Qt[hn]=arguments[hn];return Ht=Mt.call.apply(Mt,[this].concat(Qt)),Ht.state={maxHeight:Ht.props.maxMenuHeight,placement:null},Ht.getPlacement=function(xn){var $n=Ht.props,Mn=$n.minMenuHeight,On=$n.maxMenuHeight,ur=$n.menuPlacement,Sr=$n.menuPosition,Pr=$n.menuShouldScrollIntoView,Wr=$n.theme;if(xn){var ai=Sr==="fixed",oi=Pr&&!ai,_i=Zy({maxHeight:On,menuEl:xn,minHeight:Mn,placement:ur,shouldScroll:oi,isFixedPosition:ai,theme:Wr}),Oi=Ht.context.getPortalPlacement;Oi&&Oi(_i),Ht.setState(_i)}},Ht.getUpdatedProps=function(){var xn=Ht.props.menuPlacement,$n=Ht.state.placement||Zd(xn);return Va(Va({},Ht.props),{},{placement:$n,maxHeight:Ht.state.maxHeight})},Ht}return ig(zt,[{key:"render",value:function(){var Ht=this.props.children;return Ht({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),zt}(dn);ev.contextType=Qy;var tv=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerRef,hn=Pt.innerProps;return io("div",Wi({css:Ut("menu",Pt),className:Ht({menu:!0},zt),ref:Qt},hn),Mt)},p_=function(Pt){var Mt=Pt.maxHeight,zt=Pt.theme.spacing.baseUnit;return{maxHeight:Mt,overflowY:"auto",paddingBottom:zt,paddingTop:zt,position:"relative",WebkitOverflowScrolling:"touch"}},nv=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerProps,hn=Pt.innerRef,xn=Pt.isMulti;return io("div",Wi({css:Ut("menuList",Pt),className:Ht({"menu-list":!0,"menu-list--is-multi":xn},zt),ref:hn},Qt),Mt)},a1=function(Pt){var Mt=Pt.theme,zt=Mt.spacing.baseUnit,Ht=Mt.colors;return{color:Ht.neutral40,padding:"".concat(zt*2,"px ").concat(zt*3,"px"),textAlign:"center"}},vt=a1,bt=a1,wt=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerProps;return io("div",Wi({css:Ut("noOptionsMessage",Pt),className:Ht({"menu-notice":!0,"menu-notice--no-options":!0},zt)},Qt),Mt)};wt.defaultProps={children:"No options"};var Tt=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerProps;return io("div",Wi({css:Ut("loadingMessage",Pt),className:Ht({"menu-notice":!0,"menu-notice--loading":!0},zt)},Qt),Mt)};Tt.defaultProps={children:"Loading..."};var At=function(Pt){var Mt=Pt.rect,zt=Pt.offset,Ht=Pt.position;return{left:Mt.left,position:Ht,top:zt,width:Mt.width,zIndex:1}},Ot=function(Pt){Qf(zt,Pt);var Mt=Yd(zt);function zt(){var Ht;qd(this,zt);for(var Ut=arguments.length,Qt=new Array(Ut),hn=0;hn<Ut;hn++)Qt[hn]=arguments[hn];return Ht=Mt.call.apply(Mt,[this].concat(Qt)),Ht.state={placement:null},Ht.getPortalPlacement=function(xn){var $n=xn.placement,Mn=Zd(Ht.props.menuPlacement);$n!==Mn&&Ht.setState({placement:$n})},Ht}return ig(zt,[{key:"render",value:function(){var Ht=this.props,Ut=Ht.appendTo,Qt=Ht.children,hn=Ht.className,xn=Ht.controlElement,$n=Ht.cx,Mn=Ht.innerProps,On=Ht.menuPlacement,ur=Ht.menuPosition,Sr=Ht.getStyles,Pr=ur==="fixed";if(!Ut&&!Pr||!xn)return null;var Wr=this.state.placement||Zd(On),ai=qy(xn),oi=Pr?0:window.pageYOffset,_i=ai[Wr]+oi,Oi={offset:_i,position:ur,rect:ai},Eo=io("div",Wi({css:Sr("menuPortal",Oi),className:$n({"menu-portal":!0},hn)},Mn),Qt);return io(Qy.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},Ut?ei(Eo,Ut):Eo)}}]),zt}(dn),Dt=function(Pt){var Mt=Pt.isDisabled,zt=Pt.isRtl;return{label:"container",direction:zt?"rtl":null,pointerEvents:Mt?"none":null,position:"relative"}},jt=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerProps,hn=Pt.isDisabled,xn=Pt.isRtl;return io("div",Wi({css:Ut("container",Pt),className:Ht({"--is-disabled":hn,"--is-rtl":xn},zt)},Qt),Mt)},Gt=function(Pt){var Mt=Pt.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(Mt.baseUnit/2,"px ").concat(Mt.baseUnit*2,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},qt=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.innerProps,Qt=Pt.isMulti,hn=Pt.getStyles,xn=Pt.hasValue;return io("div",Wi({css:hn("valueContainer",Pt),className:Ht({"value-container":!0,"value-container--is-multi":Qt,"value-container--has-value":xn},zt)},Ut),Mt)},en=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Xt=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.innerProps,Qt=Pt.getStyles;return io("div",Wi({css:Qt("indicatorsContainer",Pt),className:Ht({indicators:!0},zt)},Ut),Mt)},sn,yn={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},vn=function(Pt){var Mt=Pt.size,zt=Eu(Pt,["size"]);return io("svg",Wi({height:Mt,width:Mt,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:yn},zt))},Sn=function(Pt){return io(vn,Wi({size:20},Pt),io("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fn=function(Pt){return io(vn,Wi({size:20},Pt),io("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Dn=function(Pt){var Mt=Pt.isFocused,zt=Pt.theme,Ht=zt.spacing.baseUnit,Ut=zt.colors;return{label:"indicatorContainer",color:Mt?Ut.neutral60:Ut.neutral20,display:"flex",padding:Ht*2,transition:"color 150ms",":hover":{color:Mt?Ut.neutral80:Ut.neutral40}}},rr=Dn,bn=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerProps;return io("div",Wi({css:Ut("dropdownIndicator",Pt),className:Ht({indicator:!0,"dropdown-indicator":!0},zt)},Qt),Mt||io(fn,null))},Nn=Dn,Bn=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerProps;return io("div",Wi({css:Ut("clearIndicator",Pt),className:Ht({indicator:!0,"clear-indicator":!0},zt)},Qt),Mt||io(Sn,null))},Gn=function(Pt){var Mt=Pt.isDisabled,zt=Pt.theme,Ht=zt.spacing.baseUnit,Ut=zt.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:Mt?Ut.neutral10:Ut.neutral20,marginBottom:Ht*2,marginTop:Ht*2,width:1}},jn=function(Pt){var Mt=Pt.className,zt=Pt.cx,Ht=Pt.getStyles,Ut=Pt.innerProps;return io("span",Wi({},Ut,{css:Ht("indicatorSeparator",Pt),className:zt({"indicator-separator":!0},Mt)}))},Vr=al(sn||(sn=tg([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),$r=function(Pt){var Mt=Pt.isFocused,zt=Pt.size,Ht=Pt.theme,Ut=Ht.colors,Qt=Ht.spacing.baseUnit;return{label:"loadingIndicator",color:Mt?Ut.neutral60:Ut.neutral20,display:"flex",padding:Qt*2,transition:"color 150ms",alignSelf:"center",fontSize:zt,lineHeight:1,marginRight:zt,textAlign:"center",verticalAlign:"middle"}},qr=function(Pt){var Mt=Pt.delay,zt=Pt.offset;return io("span",{css:ac({animation:"".concat(Vr," 1s ease-in-out ").concat(Mt,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:zt?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Rr=function(Pt){var Mt=Pt.className,zt=Pt.cx,Ht=Pt.getStyles,Ut=Pt.innerProps,Qt=Pt.isRtl;return io("div",Wi({css:Ht("loadingIndicator",Pt),className:zt({indicator:!0,"loading-indicator":!0},Mt)},Ut),io(qr,{delay:0,offset:Qt}),io(qr,{delay:160,offset:!0}),io(qr,{delay:320,offset:!Qt}))};Rr.defaultProps={size:4};var Jr=function(Pt){var Mt=Pt.isDisabled,zt=Pt.isFocused,Ht=Pt.theme,Ut=Ht.colors,Qt=Ht.borderRadius,hn=Ht.spacing;return{label:"control",alignItems:"center",backgroundColor:Mt?Ut.neutral5:Ut.neutral0,borderColor:Mt?Ut.neutral10:zt?Ut.primary:Ut.neutral20,borderRadius:Qt,borderStyle:"solid",borderWidth:1,boxShadow:zt?"0 0 0 1px ".concat(Ut.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:hn.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:zt?Ut.primary:Ut.neutral30}}},Br=function(Pt){var Mt=Pt.children,zt=Pt.cx,Ht=Pt.getStyles,Ut=Pt.className,Qt=Pt.isDisabled,hn=Pt.isFocused,xn=Pt.innerRef,$n=Pt.innerProps,Mn=Pt.menuIsOpen;return io("div",Wi({ref:xn,css:Ht("control",Pt),className:zt({control:!0,"control--is-disabled":Qt,"control--is-focused":hn,"control--menu-is-open":Mn},Ut)},$n),Mt)},Dr=function(Pt){var Mt=Pt.theme.spacing;return{paddingBottom:Mt.baseUnit*2,paddingTop:Mt.baseUnit*2}},Mr=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.Heading,hn=Pt.headingProps,xn=Pt.innerProps,$n=Pt.label,Mn=Pt.theme,On=Pt.selectProps;return io("div",Wi({css:Ut("group",Pt),className:Ht({group:!0},zt)},xn),io(Qt,Wi({},hn,{selectProps:On,theme:Mn,getStyles:Ut,cx:Ht}),$n),io("div",null,Mt))},Yr=function(Pt){var Mt=Pt.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:Mt.baseUnit*3,paddingRight:Mt.baseUnit*3,textTransform:"uppercase"}},zr=function(Pt){var Mt=Pt.getStyles,zt=Pt.cx,Ht=Pt.className,Ut=Gy(Pt);Ut.data;var Qt=Eu(Ut,["data"]);return io("div",Wi({css:Mt("groupHeading",Pt),className:zt({"group-heading":!0},Ht)},Qt))},Qr=function(Pt){var Mt=Pt.isDisabled,zt=Pt.theme,Ht=zt.spacing,Ut=zt.colors;return{margin:Ht.baseUnit/2,paddingBottom:Ht.baseUnit/2,paddingTop:Ht.baseUnit/2,visibility:Mt?"hidden":"visible",color:Ut.neutral80}},wr=function(Pt){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:Pt?0:1,outline:0,padding:0,color:"inherit"}},ji=function(Pt){var Mt=Pt.className,zt=Pt.cx,Ht=Pt.getStyles,Ut=Gy(Pt),Qt=Ut.innerRef,hn=Ut.isDisabled,xn=Ut.isHidden,$n=Eu(Ut,["innerRef","isDisabled","isHidden"]);return io("div",{css:Ht("input",Pt)},io(bm,Wi({className:zt({input:!0},Mt),inputRef:Qt,inputStyle:wr(xn),disabled:hn},$n)))},yi=function(Pt){var Mt=Pt.theme,zt=Mt.spacing,Ht=Mt.borderRadius,Ut=Mt.colors;return{label:"multiValue",backgroundColor:Ut.neutral10,borderRadius:Ht/2,display:"flex",margin:zt.baseUnit/2,minWidth:0}},bo=function(Pt){var Mt=Pt.theme,zt=Mt.borderRadius,Ht=Mt.colors,Ut=Pt.cropWithEllipsis;return{borderRadius:zt/2,color:Ht.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:Ut?"ellipsis":null,whiteSpace:"nowrap"}},Ri=function(Pt){var Mt=Pt.theme,zt=Mt.spacing,Ht=Mt.borderRadius,Ut=Mt.colors,Qt=Pt.isFocused;return{alignItems:"center",borderRadius:Ht/2,backgroundColor:Qt&&Ut.dangerLight,display:"flex",paddingLeft:zt.baseUnit,paddingRight:zt.baseUnit,":hover":{backgroundColor:Ut.dangerLight,color:Ut.danger}}},eo=function(Pt){var Mt=Pt.children,zt=Pt.innerProps;return io("div",zt,Mt)},Ho=eo,Ss=eo;function Ua(Pt){var Mt=Pt.children,zt=Pt.innerProps;return io("div",zt,Mt||io(Sn,{size:14}))}var ag=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.components,Ut=Pt.cx,Qt=Pt.data,hn=Pt.getStyles,xn=Pt.innerProps,$n=Pt.isDisabled,Mn=Pt.removeProps,On=Pt.selectProps,ur=Ht.Container,Sr=Ht.Label,Pr=Ht.Remove;return io(va,null,function(Wr){var ai=Wr.css,oi=Wr.cx;return io(ur,{data:Qt,innerProps:Va({className:oi(ai(hn("multiValue",Pt)),Ut({"multi-value":!0,"multi-value--is-disabled":$n},zt))},xn),selectProps:On},io(Sr,{data:Qt,innerProps:{className:oi(ai(hn("multiValueLabel",Pt)),Ut({"multi-value__label":!0},zt))},selectProps:On},Mt),io(Pr,{data:Qt,innerProps:Va({className:oi(ai(hn("multiValueRemove",Pt)),Ut({"multi-value__remove":!0},zt))},Mn),selectProps:On}))})};ag.defaultProps={cropWithEllipsis:!0};var ad=function(Pt){var Mt=Pt.isDisabled,zt=Pt.isFocused,Ht=Pt.isSelected,Ut=Pt.theme,Qt=Ut.spacing,hn=Ut.colors;return{label:"option",backgroundColor:Ht?hn.primary:zt?hn.primary25:"transparent",color:Mt?hn.neutral20:Ht?hn.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(Qt.baseUnit*2,"px ").concat(Qt.baseUnit*3,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!Mt&&(Ht?hn.primary:hn.primary50)}}},lg=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.isDisabled,hn=Pt.isFocused,xn=Pt.isSelected,$n=Pt.innerRef,Mn=Pt.innerProps;return io("div",Wi({css:Ut("option",Pt),className:Ht({option:!0,"option--is-disabled":Qt,"option--is-focused":hn,"option--is-selected":xn},zt),ref:$n},Mn),Mt)},cg=function(Pt){var Mt=Pt.theme,zt=Mt.spacing,Ht=Mt.colors;return{label:"placeholder",color:Ht.neutral50,marginLeft:zt.baseUnit/2,marginRight:zt.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},np=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.innerProps;return io("div",Wi({css:Ut("placeholder",Pt),className:Ht({placeholder:!0},zt)},Qt),Mt)},Sm=function(Pt){var Mt=Pt.isDisabled,zt=Pt.theme,Ht=zt.spacing,Ut=zt.colors;return{label:"singleValue",color:Mt?Ut.neutral40:Ut.neutral80,marginLeft:Ht.baseUnit/2,marginRight:Ht.baseUnit/2,maxWidth:"calc(100% - ".concat(Ht.baseUnit*2,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},rp=function(Pt){var Mt=Pt.children,zt=Pt.className,Ht=Pt.cx,Ut=Pt.getStyles,Qt=Pt.isDisabled,hn=Pt.innerProps;return io("div",Wi({css:Ut("singleValue",Pt),className:Ht({"single-value":!0,"single-value--is-disabled":Qt},zt)},hn),Mt)},rv={ClearIndicator:Bn,Control:Br,DropdownIndicator:bn,DownChevron:fn,CrossIcon:Sn,Group:Mr,GroupHeading:zr,IndicatorsContainer:Xt,IndicatorSeparator:jn,Input:ji,LoadingIndicator:Rr,Menu:tv,MenuList:nv,MenuPortal:Ot,LoadingMessage:Tt,NoOptionsMessage:wt,MultiValue:ag,MultiValueContainer:Ho,MultiValueLabel:Ss,MultiValueRemove:Ua,Option:lg,Placeholder:np,SelectContainer:jt,SingleValue:rp,ValueContainer:qt},iv=function(Pt){return Va(Va({},rv),Pt.components)};function g_(Pt,Mt){(Mt==null||Mt>Pt.length)&&(Mt=Pt.length);for(var zt=0,Ht=new Array(Mt);zt<Mt;zt++)Ht[zt]=Pt[zt];return Ht}function a2(Pt){if(Array.isArray(Pt))return g_(Pt)}function l2(Pt){if(typeof Symbol<"u"&&Pt[Symbol.iterator]!=null||Pt["@@iterator"]!=null)return Array.from(Pt)}function c2(Pt,Mt){if(Pt){if(typeof Pt=="string")return g_(Pt,Mt);var zt=Object.prototype.toString.call(Pt).slice(8,-1);if(zt==="Object"&&Pt.constructor&&(zt=Pt.constructor.name),zt==="Map"||zt==="Set")return Array.from(Pt);if(zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt))return g_(Pt,Mt)}}function u2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U_(Pt){return a2(Pt)||l2(Pt)||c2(Pt)||u2()}var G_=Number.isNaN||function(Pt){return typeof Pt=="number"&&Pt!==Pt};function h2(Pt,Mt){return!!(Pt===Mt||G_(Pt)&&G_(Mt))}function d2(Pt,Mt){if(Pt.length!==Mt.length)return!1;for(var zt=0;zt<Pt.length;zt++)if(!h2(Pt[zt],Mt[zt]))return!1;return!0}function f2(Pt,Mt){Mt===void 0&&(Mt=d2);var zt,Ht=[],Ut,Qt=!1;function hn(){for(var xn=[],$n=0;$n<arguments.length;$n++)xn[$n]=arguments[$n];return Qt&&zt===this&&Mt(xn,Ht)||(Ut=Pt.apply(this,xn),Qt=!0,zt=this,Ht=xn),Ut}return hn}for(var p2={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},g2=function(Pt){return io("span",Wi({css:p2},Pt))},m2={guidance:function(Pt){var Mt=Pt.isSearchable,zt=Pt.isMulti,Ht=Pt.isDisabled,Ut=Pt.tabSelectsValue,Qt=Pt.context;switch(Qt){case"menu":return"Use Up and Down to choose options".concat(Ht?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(Ut?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(Pt["aria-label"]||"Select"," is focused ").concat(Mt?",type to refine list":"",", press Down to open the menu, ").concat(zt?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(Pt){var Mt=Pt.action,zt=Pt.label,Ht=zt===void 0?"":zt,Ut=Pt.isDisabled;switch(Mt){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(Ht,", deselected.");case"select-option":return Ut?"option ".concat(Ht," is disabled. Select another option."):"option ".concat(Ht,", selected.");default:return""}},onFocus:function(Pt){var Mt=Pt.context,zt=Pt.focused,Ht=zt===void 0?{}:zt,Ut=Pt.options,Qt=Pt.label,hn=Qt===void 0?"":Qt,xn=Pt.selectValue,$n=Pt.isDisabled,Mn=Pt.isSelected,On=function(Pr,Wr){return Pr&&Pr.length?"".concat(Pr.indexOf(Wr)+1," of ").concat(Pr.length):""};if(Mt==="value"&&xn)return"value ".concat(hn," focused, ").concat(On(xn,Ht),".");if(Mt==="menu"){var ur=$n?" disabled":"",Sr="".concat(Mn?"selected":"focused").concat(ur);return"option ".concat(hn," ").concat(Sr,", ").concat(On(Ut,Ht),".")}return""},onFilter:function(Pt){var Mt=Pt.inputValue,zt=Pt.resultsMessage;return"".concat(zt).concat(Mt?" for search term "+Mt:"",".")}},y2=function(Pt){var Mt=Pt.ariaSelection,zt=Pt.focusedOption,Ht=Pt.focusedValue,Ut=Pt.focusableOptions,Qt=Pt.isFocused,hn=Pt.selectValue,xn=Pt.selectProps,$n=xn.ariaLiveMessages,Mn=xn.getOptionLabel,On=xn.inputValue,ur=xn.isMulti,Sr=xn.isOptionDisabled,Pr=xn.isSearchable,Wr=xn.menuIsOpen,ai=xn.options,oi=xn.screenReaderStatus,_i=xn.tabSelectsValue,Oi=xn["aria-label"],Eo=xn["aria-live"],mo=Un(function(){return Va(Va({},m2),$n||{})},[$n]),lo=Un(function(){var Gs="";if(Mt&&mo.onChange){var Ws=Mt.option,Gu=Mt.removedValue,Ic=Mt.value,Jd=function(ql){return Array.isArray(ql)?null:ql},Wu=Gu||Ws||Jd(Ic),kh=Va({isDisabled:Wu&&Sr(Wu),label:Wu?Mn(Wu):""},Mt);Gs=mo.onChange(kh)}return Gs},[Mt,Sr,Mn,mo]),Co=Un(function(){var Gs="",Ws=zt||Ht,Gu=!!(zt&&hn&&hn.includes(zt));if(Ws&&mo.onFocus){var Ic={focused:Ws,label:Mn(Ws),isDisabled:Sr(Ws),isSelected:Gu,options:ai,context:Ws===zt?"menu":"value",selectValue:hn};Gs=mo.onFocus(Ic)}return Gs},[zt,Ht,Mn,Sr,mo,ai,hn]),yo=Un(function(){var Gs="";if(Wr&&ai.length&&mo.onFilter){var Ws=oi({count:Ut.length});Gs=mo.onFilter({inputValue:On,resultsMessage:Ws})}return Gs},[Ut,On,Wr,mo,ai,oi]),_a=Un(function(){var Gs="";if(mo.guidance){var Ws=Ht?"value":Wr?"menu":"input";Gs=mo.guidance({"aria-label":Oi,context:Ws,isDisabled:zt&&Sr(zt),isMulti:ur,isSearchable:Pr,tabSelectsValue:_i})}return Gs},[Oi,zt,Ht,ur,Sr,Pr,Wr,mo,_i]),Ca="".concat(Co," ").concat(yo," ").concat(_a);return io(g2,{"aria-live":Eo,"aria-atomic":"false","aria-relevant":"additions text"},Qt&&io(Ii.Fragment,null,io("span",{id:"aria-selection"},lo),io("span",{id:"aria-context"},Ca)))},m_=[{base:"A",letters:"A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xC6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xE6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],v2=new RegExp("["+m_.map(function(Pt){return Pt.letters}).join("")+"]","g"),W_={},y_=0;y_<m_.length;y_++)for(var v_=m_[y_],__=0;__<v_.letters.length;__++)W_[v_.letters[__]]=v_.base;var q_=function(Pt){return Pt.replace(v2,function(Mt){return W_[Mt]})},_2=f2(q_),Y_=function(Pt){return Pt.replace(/^\s+|\s+$/g,"")},b2=function(Pt){return"".concat(Pt.label," ").concat(Pt.value)},x2=function(Pt){return function(Mt,zt){var Ht=Va({ignoreCase:!0,ignoreAccents:!0,stringify:b2,trim:!0,matchFrom:"any"},Pt),Ut=Ht.ignoreCase,Qt=Ht.ignoreAccents,hn=Ht.stringify,xn=Ht.trim,$n=Ht.matchFrom,Mn=xn?Y_(zt):zt,On=xn?Y_(hn(Mt)):hn(Mt);return Ut&&(Mn=Mn.toLowerCase(),On=On.toLowerCase()),Qt&&(Mn=_2(Mn),On=q_(On)),$n==="start"?On.substr(0,Mn.length)===Mn:On.indexOf(Mn)>-1}};function w2(Pt){Pt.in,Pt.out,Pt.onExited,Pt.appear,Pt.enter,Pt.exit;var Mt=Pt.innerRef;Pt.emotion;var zt=Eu(Pt,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return io("input",Wi({ref:Mt},zt,{css:ac({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"","")}))}var E2=function(Pt){Pt.preventDefault(),Pt.stopPropagation()};function S2(Pt){var Mt=Pt.isEnabled,zt=Pt.onBottomArrive,Ht=Pt.onBottomLeave,Ut=Pt.onTopArrive,Qt=Pt.onTopLeave,hn=Tn(!1),xn=Tn(!1),$n=Tn(0),Mn=Tn(null),On=qn(function(oi,_i){if(Mn.current!==null){var Oi=Mn.current,Eo=Oi.scrollTop,mo=Oi.scrollHeight,lo=Oi.clientHeight,Co=Mn.current,yo=_i>0,_a=mo-lo-Eo,Ca=!1;_a>_i&&hn.current&&(Ht&&Ht(oi),hn.current=!1),yo&&xn.current&&(Qt&&Qt(oi),xn.current=!1),yo&&_i>_a?(zt&&!hn.current&&zt(oi),Co.scrollTop=mo,Ca=!0,hn.current=!0):!yo&&-_i>Eo&&(Ut&&!xn.current&&Ut(oi),Co.scrollTop=0,Ca=!0,xn.current=!0),Ca&&E2(oi)}},[]),ur=qn(function(oi){On(oi,oi.deltaY)},[On]),Sr=qn(function(oi){$n.current=oi.changedTouches[0].clientY},[]),Pr=qn(function(oi){var _i=$n.current-oi.changedTouches[0].clientY;On(oi,_i)},[On]),Wr=qn(function(oi){if(oi){var _i=Xy?{passive:!1}:!1;typeof oi.addEventListener=="function"&&oi.addEventListener("wheel",ur,_i),typeof oi.addEventListener=="function"&&oi.addEventListener("touchstart",Sr,_i),typeof oi.addEventListener=="function"&&oi.addEventListener("touchmove",Pr,_i)}},[Pr,Sr,ur]),ai=qn(function(oi){!oi||(typeof oi.removeEventListener=="function"&&oi.removeEventListener("wheel",ur,!1),typeof oi.removeEventListener=="function"&&oi.removeEventListener("touchstart",Sr,!1),typeof oi.removeEventListener=="function"&&oi.removeEventListener("touchmove",Pr,!1))},[Pr,Sr,ur]);return Ci(function(){if(Mt){var oi=Mn.current;return Wr(oi),function(){ai(oi)}}},[Mt,Wr,ai]),function(oi){Mn.current=oi}}var X_=["boxSizing","height","overflow","paddingRight","position"],Z_={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function K_(Pt){Pt.preventDefault()}function J_(Pt){Pt.stopPropagation()}function Q_(){var Pt=this.scrollTop,Mt=this.scrollHeight,zt=Pt+this.offsetHeight;Pt===0?this.scrollTop=1:zt===Mt&&(this.scrollTop=Pt-1)}function eb(){return"ontouchstart"in window||navigator.maxTouchPoints}var tb=!!(typeof window<"u"&&window.document&&window.document.createElement),l1=0,Cm={capture:!1,passive:!1};function C2(Pt){var Mt=Pt.isEnabled,zt=Pt.accountForScrollbars,Ht=zt===void 0?!0:zt,Ut=Tn({}),Qt=Tn(null),hn=qn(function($n){if(tb){var Mn=document.body,On=Mn&&Mn.style;if(Ht&&X_.forEach(function(Wr){var ai=On&&On[Wr];Ut.current[Wr]=ai}),Ht&&l1<1){var ur=parseInt(Ut.current.paddingRight,10)||0,Sr=document.body?document.body.clientWidth:0,Pr=window.innerWidth-Sr+ur||0;Object.keys(Z_).forEach(function(Wr){var ai=Z_[Wr];On&&(On[Wr]=ai)}),On&&(On.paddingRight="".concat(Pr,"px"))}Mn&&eb()&&(Mn.addEventListener("touchmove",K_,Cm),$n&&($n.addEventListener("touchstart",Q_,Cm),$n.addEventListener("touchmove",J_,Cm))),l1+=1}},[]),xn=qn(function($n){if(tb){var Mn=document.body,On=Mn&&Mn.style;l1=Math.max(l1-1,0),Ht&&l1<1&&X_.forEach(function(ur){var Sr=Ut.current[ur];On&&(On[ur]=Sr)}),Mn&&eb()&&(Mn.removeEventListener("touchmove",K_,Cm),$n&&($n.removeEventListener("touchstart",Q_,Cm),$n.removeEventListener("touchmove",J_,Cm)))}},[]);return Ci(function(){if(Mt){var $n=Qt.current;return hn($n),function(){xn($n)}}},[Mt,hn,xn]),function($n){Qt.current=$n}}var T2=function(){return document.activeElement&&document.activeElement.blur()},k2={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function A2(Pt){var Mt=Pt.children,zt=Pt.lockEnabled,Ht=Pt.captureEnabled,Ut=Ht===void 0?!0:Ht,Qt=Pt.onBottomArrive,hn=Pt.onBottomLeave,xn=Pt.onTopArrive,$n=Pt.onTopLeave,Mn=S2({isEnabled:Ut,onBottomArrive:Qt,onBottomLeave:hn,onTopArrive:xn,onTopLeave:$n}),On=C2({isEnabled:zt}),ur=function(Sr){Mn(Sr),On(Sr)};return io(Ii.Fragment,null,zt&&io("div",{onClick:T2,css:k2}),Mt(ur))}var L2=function(Pt){return Pt.label},P2=function(Pt){return Pt.label},I2=function(Pt){return Pt.value},O2=function(Pt){return!!Pt.isDisabled},$2={clearIndicator:Nn,container:Dt,control:Jr,dropdownIndicator:rr,group:Dr,groupHeading:Yr,indicatorsContainer:en,indicatorSeparator:Gn,input:Qr,loadingIndicator:$r,loadingMessage:bt,menu:Jy,menuList:p_,menuPortal:At,multiValue:yi,multiValueLabel:bo,multiValueRemove:Ri,noOptionsMessage:vt,option:ad,placeholder:cg,singleValue:Sm,valueContainer:Gt},R2={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},M2=4,nb=4,N2=38,D2=nb*2,B2={baseUnit:nb,controlHeight:N2,menuGutter:D2},b_={borderRadius:M2,colors:R2,spacing:B2},F2={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Yy(),captureMenuScroll:!Yy(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:x2(),formatGroupLabel:L2,getOptionLabel:P2,getOptionValue:I2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:O2,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!d_(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(Pt){var Mt=Pt.count;return"".concat(Mt," result").concat(Mt!==1?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};function rb(Pt,Mt,zt,Ht){var Ut=lb(Pt,Mt,zt),Qt=cb(Pt,Mt,zt),hn=ab(Pt,Mt),xn=ov(Pt,Mt);return{type:"option",data:Mt,isDisabled:Ut,isSelected:Qt,label:hn,value:xn,index:Ht}}function ib(Pt,Mt){return Pt.options.map(function(zt,Ht){if(zt.options){var Ut=zt.options.map(function(hn,xn){return rb(Pt,hn,Mt,xn)}).filter(function(hn){return sb(Pt,hn)});return Ut.length>0?{type:"group",data:zt,options:Ut,index:Ht}:void 0}var Qt=rb(Pt,zt,Mt,Ht);return sb(Pt,Qt)?Qt:void 0}).filter(function(zt){return!!zt})}function ob(Pt){return Pt.reduce(function(Mt,zt){return zt.type==="group"?Mt.push.apply(Mt,U_(zt.options.map(function(Ht){return Ht.data}))):Mt.push(zt.data),Mt},[])}function z2(Pt,Mt){return ob(ib(Pt,Mt))}function sb(Pt,Mt){var zt=Pt.inputValue,Ht=zt===void 0?"":zt,Ut=Mt.data,Qt=Mt.isSelected,hn=Mt.label,xn=Mt.value;return(!hb(Pt)||!Qt)&&ub(Pt,{label:hn,value:xn,data:Ut},Ht)}function H2(Pt,Mt){var zt=Pt.focusedValue,Ht=Pt.selectValue,Ut=Ht.indexOf(zt);if(Ut>-1){var Qt=Mt.indexOf(zt);if(Qt>-1)return zt;if(Ut<Mt.length)return Mt[Ut]}return null}function j2(Pt,Mt){var zt=Pt.focusedOption;return zt&&Mt.indexOf(zt)>-1?zt:Mt[0]}var ab=function(Pt,Mt){return Pt.getOptionLabel(Mt)},ov=function(Pt,Mt){return Pt.getOptionValue(Mt)};function lb(Pt,Mt,zt){return typeof Pt.isOptionDisabled=="function"?Pt.isOptionDisabled(Mt,zt):!1}function cb(Pt,Mt,zt){if(zt.indexOf(Mt)>-1)return!0;if(typeof Pt.isOptionSelected=="function")return Pt.isOptionSelected(Mt,zt);var Ht=ov(Pt,Mt);return zt.some(function(Ut){return ov(Pt,Ut)===Ht})}function ub(Pt,Mt,zt){return Pt.filterOption?Pt.filterOption(Mt,zt):!0}var hb=function(Pt){var Mt=Pt.hideSelectedOptions,zt=Pt.isMulti;return Mt===void 0?zt:Mt},V2=1,fb=function(Pt){Qf(zt,Pt);var Mt=Yd(zt);function zt(Ht){var Ut;return qd(this,zt),Ut=Mt.call(this,Ht),Ut.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},Ut.blockOptionHover=!1,Ut.isComposing=!1,Ut.commonProps=void 0,Ut.initialTouchX=0,Ut.initialTouchY=0,Ut.instancePrefix="",Ut.openAfterFocus=!1,Ut.scrollToFocusedOptionOnUpdate=!1,Ut.userIsDragging=void 0,Ut.controlRef=null,Ut.getControlRef=function(Qt){Ut.controlRef=Qt},Ut.focusedOptionRef=null,Ut.getFocusedOptionRef=function(Qt){Ut.focusedOptionRef=Qt},Ut.menuListRef=null,Ut.getMenuListRef=function(Qt){Ut.menuListRef=Qt},Ut.inputRef=null,Ut.getInputRef=function(Qt){Ut.inputRef=Qt},Ut.focus=Ut.focusInput,Ut.blur=Ut.blurInput,Ut.onChange=function(Qt,hn){var xn=Ut.props,$n=xn.onChange,Mn=xn.name;hn.name=Mn,Ut.ariaOnChange(Qt,hn),$n(Qt,hn)},Ut.setValue=function(Qt){var hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"set-value",xn=arguments.length>2?arguments[2]:void 0,$n=Ut.props,Mn=$n.closeMenuOnSelect,On=$n.isMulti;Ut.onInputChange("",{action:"set-value"}),Mn&&(Ut.setState({inputIsHiddenAfterUpdate:!On}),Ut.onMenuClose()),Ut.setState({clearFocusValueOnUpdate:!0}),Ut.onChange(Qt,{action:hn,option:xn})},Ut.selectOption=function(Qt){var hn=Ut.props,xn=hn.blurInputOnSelect,$n=hn.isMulti,Mn=hn.name,On=Ut.state.selectValue,ur=$n&&Ut.isOptionSelected(Qt,On),Sr=Ut.isOptionDisabled(Qt,On);if(ur){var Pr=Ut.getOptionValue(Qt);Ut.setValue(On.filter(function(Wr){return Ut.getOptionValue(Wr)!==Pr}),"deselect-option",Qt)}else if(!Sr)$n?Ut.setValue([].concat(U_(On),[Qt]),"select-option",Qt):Ut.setValue(Qt,"select-option");else{Ut.ariaOnChange(Qt,{action:"select-option",name:Mn});return}xn&&Ut.blurInput()},Ut.removeValue=function(Qt){var hn=Ut.props.isMulti,xn=Ut.state.selectValue,$n=Ut.getOptionValue(Qt),Mn=xn.filter(function(ur){return Ut.getOptionValue(ur)!==$n}),On=hn?Mn:Mn[0]||null;Ut.onChange(On,{action:"remove-value",removedValue:Qt}),Ut.focusInput()},Ut.clearValue=function(){var Qt=Ut.state.selectValue;Ut.onChange(Ut.props.isMulti?[]:null,{action:"clear",removedValues:Qt})},Ut.popValue=function(){var Qt=Ut.props.isMulti,hn=Ut.state.selectValue,xn=hn[hn.length-1],$n=hn.slice(0,hn.length-1),Mn=Qt?$n:$n[0]||null;Ut.onChange(Mn,{action:"pop-value",removedValue:xn})},Ut.getValue=function(){return Ut.state.selectValue},Ut.cx=function(){for(var Qt=arguments.length,hn=new Array(Qt),xn=0;xn<Qt;xn++)hn[xn]=arguments[xn];return Uy.apply(void 0,[Ut.props.classNamePrefix].concat(hn))},Ut.getOptionLabel=function(Qt){return ab(Ut.props,Qt)},Ut.getOptionValue=function(Qt){return ov(Ut.props,Qt)},Ut.getStyles=function(Qt,hn){var xn=$2[Qt](hn);xn.boxSizing="border-box";var $n=Ut.props.styles[Qt];return $n?$n(xn,hn):xn},Ut.getElementId=function(Qt){return"".concat(Ut.instancePrefix,"-").concat(Qt)},Ut.getComponents=function(){return iv(Ut.props)},Ut.buildCategorizedOptions=function(){return ib(Ut.props,Ut.state.selectValue)},Ut.getCategorizedOptions=function(){return Ut.props.menuIsOpen?Ut.buildCategorizedOptions():[]},Ut.buildFocusableOptions=function(){return ob(Ut.buildCategorizedOptions())},Ut.getFocusableOptions=function(){return Ut.props.menuIsOpen?Ut.buildFocusableOptions():[]},Ut.ariaOnChange=function(Qt,hn){Ut.setState({ariaSelection:Va({value:Qt},hn)})},Ut.onMenuMouseDown=function(Qt){Qt.button===0&&(Qt.stopPropagation(),Qt.preventDefault(),Ut.focusInput())},Ut.onMenuMouseMove=function(Qt){Ut.blockOptionHover=!1},Ut.onControlMouseDown=function(Qt){var hn=Ut.props.openMenuOnClick;Ut.state.isFocused?Ut.props.menuIsOpen?Qt.target.tagName!=="INPUT"&&Qt.target.tagName!=="TEXTAREA"&&Ut.onMenuClose():hn&&Ut.openMenu("first"):(hn&&(Ut.openAfterFocus=!0),Ut.focusInput()),Qt.target.tagName!=="INPUT"&&Qt.target.tagName!=="TEXTAREA"&&Qt.preventDefault()},Ut.onDropdownIndicatorMouseDown=function(Qt){if(!(Qt&&Qt.type==="mousedown"&&Qt.button!==0)&&!Ut.props.isDisabled){var hn=Ut.props,xn=hn.isMulti,$n=hn.menuIsOpen;Ut.focusInput(),$n?(Ut.setState({inputIsHiddenAfterUpdate:!xn}),Ut.onMenuClose()):Ut.openMenu("first"),Qt.preventDefault(),Qt.stopPropagation()}},Ut.onClearIndicatorMouseDown=function(Qt){Qt&&Qt.type==="mousedown"&&Qt.button!==0||(Ut.clearValue(),Qt.stopPropagation(),Ut.openAfterFocus=!1,Qt.type==="touchend"?Ut.focusInput():setTimeout(function(){return Ut.focusInput()}))},Ut.onScroll=function(Qt){typeof Ut.props.closeMenuOnScroll=="boolean"?Qt.target instanceof HTMLElement&&r1(Qt.target)&&Ut.props.onMenuClose():typeof Ut.props.closeMenuOnScroll=="function"&&Ut.props.closeMenuOnScroll(Qt)&&Ut.props.onMenuClose()},Ut.onCompositionStart=function(){Ut.isComposing=!0},Ut.onCompositionEnd=function(){Ut.isComposing=!1},Ut.onTouchStart=function(Qt){var hn=Qt.touches,xn=hn&&hn.item(0);!xn||(Ut.initialTouchX=xn.clientX,Ut.initialTouchY=xn.clientY,Ut.userIsDragging=!1)},Ut.onTouchMove=function(Qt){var hn=Qt.touches,xn=hn&&hn.item(0);if(xn){var $n=Math.abs(xn.clientX-Ut.initialTouchX),Mn=Math.abs(xn.clientY-Ut.initialTouchY),On=5;Ut.userIsDragging=$n>On||Mn>On}},Ut.onTouchEnd=function(Qt){Ut.userIsDragging||(Ut.controlRef&&!Ut.controlRef.contains(Qt.target)&&Ut.menuListRef&&!Ut.menuListRef.contains(Qt.target)&&Ut.blurInput(),Ut.initialTouchX=0,Ut.initialTouchY=0)},Ut.onControlTouchEnd=function(Qt){Ut.userIsDragging||Ut.onControlMouseDown(Qt)},Ut.onClearIndicatorTouchEnd=function(Qt){Ut.userIsDragging||Ut.onClearIndicatorMouseDown(Qt)},Ut.onDropdownIndicatorTouchEnd=function(Qt){Ut.userIsDragging||Ut.onDropdownIndicatorMouseDown(Qt)},Ut.handleInputChange=function(Qt){var hn=Qt.currentTarget.value;Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange(hn,{action:"input-change"}),Ut.props.menuIsOpen||Ut.onMenuOpen()},Ut.onInputFocus=function(Qt){Ut.props.onFocus&&Ut.props.onFocus(Qt),Ut.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(Ut.openAfterFocus||Ut.props.openMenuOnFocus)&&Ut.openMenu("first"),Ut.openAfterFocus=!1},Ut.onInputBlur=function(Qt){if(Ut.menuListRef&&Ut.menuListRef.contains(document.activeElement)){Ut.inputRef.focus();return}Ut.props.onBlur&&Ut.props.onBlur(Qt),Ut.onInputChange("",{action:"input-blur"}),Ut.onMenuClose(),Ut.setState({focusedValue:null,isFocused:!1})},Ut.onOptionHover=function(Qt){Ut.blockOptionHover||Ut.state.focusedOption===Qt||Ut.setState({focusedOption:Qt})},Ut.shouldHideSelectedOptions=function(){return hb(Ut.props)},Ut.onKeyDown=function(Qt){var hn=Ut.props,xn=hn.isMulti,$n=hn.backspaceRemovesValue,Mn=hn.escapeClearsValue,On=hn.inputValue,ur=hn.isClearable,Sr=hn.isDisabled,Pr=hn.menuIsOpen,Wr=hn.onKeyDown,ai=hn.tabSelectsValue,oi=hn.openMenuOnFocus,_i=Ut.state,Oi=_i.focusedOption,Eo=_i.focusedValue,mo=_i.selectValue;if(!Sr&&!(typeof Wr=="function"&&(Wr(Qt),Qt.defaultPrevented))){switch(Ut.blockOptionHover=!0,Qt.key){case"ArrowLeft":if(!xn||On)return;Ut.focusValue("previous");break;case"ArrowRight":if(!xn||On)return;Ut.focusValue("next");break;case"Delete":case"Backspace":if(On)return;if(Eo)Ut.removeValue(Eo);else{if(!$n)return;xn?Ut.popValue():ur&&Ut.clearValue()}break;case"Tab":if(Ut.isComposing||Qt.shiftKey||!Pr||!ai||!Oi||oi&&Ut.isOptionSelected(Oi,mo))return;Ut.selectOption(Oi);break;case"Enter":if(Qt.keyCode===229)break;if(Pr){if(!Oi||Ut.isComposing)return;Ut.selectOption(Oi);break}return;case"Escape":Pr?(Ut.setState({inputIsHiddenAfterUpdate:!1}),Ut.onInputChange("",{action:"menu-close"}),Ut.onMenuClose()):ur&&Mn&&Ut.clearValue();break;case" ":if(On)return;if(!Pr){Ut.openMenu("first");break}if(!Oi)return;Ut.selectOption(Oi);break;case"ArrowUp":Pr?Ut.focusOption("up"):Ut.openMenu("last");break;case"ArrowDown":Pr?Ut.focusOption("down"):Ut.openMenu("first");break;case"PageUp":if(!Pr)return;Ut.focusOption("pageup");break;case"PageDown":if(!Pr)return;Ut.focusOption("pagedown");break;case"Home":if(!Pr)return;Ut.focusOption("first");break;case"End":if(!Pr)return;Ut.focusOption("last");break;default:return}Qt.preventDefault()}},Ut.instancePrefix="react-select-"+(Ut.props.instanceId||++V2),Ut.state.selectValue=n1(Ht.value),Ut}return ig(zt,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(Ht){var Ut=this.props,Qt=Ut.isDisabled,hn=Ut.menuIsOpen,xn=this.state.isFocused;(xn&&!Qt&&Ht.isDisabled||xn&&hn&&!Ht.menuIsOpen)&&this.focusInput(),xn&&Qt&&!Ht.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(h_(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(Ht,Ut){this.props.onInputChange(Ht,Ut)}},{key:"focusInput",value:function(){!this.inputRef||this.inputRef.focus()}},{key:"blurInput",value:function(){!this.inputRef||this.inputRef.blur()}},{key:"openMenu",value:function(Ht){var Ut=this,Qt=this.state,hn=Qt.selectValue,xn=Qt.isFocused,$n=this.buildFocusableOptions(),Mn=Ht==="first"?0:$n.length-1;if(!this.props.isMulti){var On=$n.indexOf(hn[0]);On>-1&&(Mn=On)}this.scrollToFocusedOptionOnUpdate=!(xn&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:$n[Mn]},function(){return Ut.onMenuOpen()})}},{key:"focusValue",value:function(Ht){var Ut=this.state,Qt=Ut.selectValue,hn=Ut.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var xn=Qt.indexOf(hn);hn||(xn=-1);var $n=Qt.length-1,Mn=-1;if(Qt.length){switch(Ht){case"previous":xn===0?Mn=0:xn===-1?Mn=$n:Mn=xn-1;break;case"next":xn>-1&&xn<$n&&(Mn=xn+1);break}this.setState({inputIsHidden:Mn!==-1,focusedValue:Qt[Mn]})}}}},{key:"focusOption",value:function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",Ut=this.props.pageSize,Qt=this.state.focusedOption,hn=this.getFocusableOptions();if(hn.length){var xn=0,$n=hn.indexOf(Qt);Qt||($n=-1),Ht==="up"?xn=$n>0?$n-1:hn.length-1:Ht==="down"?xn=($n+1)%hn.length:Ht==="pageup"?(xn=$n-Ut,xn<0&&(xn=0)):Ht==="pagedown"?(xn=$n+Ut,xn>hn.length-1&&(xn=hn.length-1)):Ht==="last"&&(xn=hn.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:hn[xn],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(b_):Va(Va({},b_),this.props.theme):b_}},{key:"getCommonProps",value:function(){var Ht=this.clearValue,Ut=this.cx,Qt=this.getStyles,hn=this.getValue,xn=this.selectOption,$n=this.setValue,Mn=this.props,On=Mn.isMulti,ur=Mn.isRtl,Sr=Mn.options,Pr=this.hasValue();return{clearValue:Ht,cx:Ut,getStyles:Qt,getValue:hn,hasValue:Pr,isMulti:On,isRtl:ur,options:Sr,selectOption:xn,selectProps:Mn,setValue:$n,theme:this.getTheme()}}},{key:"hasValue",value:function(){var Ht=this.state.selectValue;return Ht.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var Ht=this.props,Ut=Ht.isClearable,Qt=Ht.isMulti;return Ut===void 0?Qt:Ut}},{key:"isOptionDisabled",value:function(Ht,Ut){return lb(this.props,Ht,Ut)}},{key:"isOptionSelected",value:function(Ht,Ut){return cb(this.props,Ht,Ut)}},{key:"filterOption",value:function(Ht,Ut){return ub(this.props,Ht,Ut)}},{key:"formatOptionLabel",value:function(Ht,Ut){if(typeof this.props.formatOptionLabel=="function"){var Qt=this.props.inputValue,hn=this.state.selectValue;return this.props.formatOptionLabel(Ht,{context:Ut,inputValue:Qt,selectValue:hn})}else return this.getOptionLabel(Ht)}},{key:"formatGroupLabel",value:function(Ht){return this.props.formatGroupLabel(Ht)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var Ht=this.props,Ut=Ht.isDisabled,Qt=Ht.isSearchable,hn=Ht.inputId,xn=Ht.inputValue,$n=Ht.tabIndex,Mn=Ht.form,On=this.getComponents(),ur=On.Input,Sr=this.state.inputIsHidden,Pr=this.commonProps,Wr=hn||this.getElementId("input"),ai={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};return Qt?Ii.createElement(ur,Wi({},Pr,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Wr,innerRef:this.getInputRef,isDisabled:Ut,isHidden:Sr,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:$n,form:Mn,type:"text",value:xn},ai)):Ii.createElement(w2,Wi({id:Wr,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:sd,onFocus:this.onInputFocus,readOnly:!0,disabled:Ut,tabIndex:$n,form:Mn,value:""},ai))}},{key:"renderPlaceholderOrValue",value:function(){var Ht=this,Ut=this.getComponents(),Qt=Ut.MultiValue,hn=Ut.MultiValueContainer,xn=Ut.MultiValueLabel,$n=Ut.MultiValueRemove,Mn=Ut.SingleValue,On=Ut.Placeholder,ur=this.commonProps,Sr=this.props,Pr=Sr.controlShouldRenderValue,Wr=Sr.isDisabled,ai=Sr.isMulti,oi=Sr.inputValue,_i=Sr.placeholder,Oi=this.state,Eo=Oi.selectValue,mo=Oi.focusedValue,lo=Oi.isFocused;if(!this.hasValue()||!Pr)return oi?null:Ii.createElement(On,Wi({},ur,{key:"placeholder",isDisabled:Wr,isFocused:lo}),_i);if(ai){var Co=Eo.map(function(_a,Ca){var Gs=_a===mo;return Ii.createElement(Qt,Wi({},ur,{components:{Container:hn,Label:xn,Remove:$n},isFocused:Gs,isDisabled:Wr,key:"".concat(Ht.getOptionValue(_a)).concat(Ca),index:Ca,removeProps:{onClick:function(){return Ht.removeValue(_a)},onTouchEnd:function(){return Ht.removeValue(_a)},onMouseDown:function(Ws){Ws.preventDefault(),Ws.stopPropagation()}},data:_a}),Ht.formatOptionLabel(_a,"value"))});return Co}if(oi)return null;var yo=Eo[0];return Ii.createElement(Mn,Wi({},ur,{data:yo,isDisabled:Wr}),this.formatOptionLabel(yo,"value"))}},{key:"renderClearIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.ClearIndicator,Qt=this.commonProps,hn=this.props,xn=hn.isDisabled,$n=hn.isLoading,Mn=this.state.isFocused;if(!this.isClearable()||!Ut||xn||!this.hasValue()||$n)return null;var On={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Ii.createElement(Ut,Wi({},Qt,{innerProps:On,isFocused:Mn}))}},{key:"renderLoadingIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.LoadingIndicator,Qt=this.commonProps,hn=this.props,xn=hn.isDisabled,$n=hn.isLoading,Mn=this.state.isFocused;if(!Ut||!$n)return null;var On={"aria-hidden":"true"};return Ii.createElement(Ut,Wi({},Qt,{innerProps:On,isDisabled:xn,isFocused:Mn}))}},{key:"renderIndicatorSeparator",value:function(){var Ht=this.getComponents(),Ut=Ht.DropdownIndicator,Qt=Ht.IndicatorSeparator;if(!Ut||!Qt)return null;var hn=this.commonProps,xn=this.props.isDisabled,$n=this.state.isFocused;return Ii.createElement(Qt,Wi({},hn,{isDisabled:xn,isFocused:$n}))}},{key:"renderDropdownIndicator",value:function(){var Ht=this.getComponents(),Ut=Ht.DropdownIndicator;if(!Ut)return null;var Qt=this.commonProps,hn=this.props.isDisabled,xn=this.state.isFocused,$n={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Ii.createElement(Ut,Wi({},Qt,{innerProps:$n,isDisabled:hn,isFocused:xn}))}},{key:"renderMenu",value:function(){var Ht=this,Ut=this.getComponents(),Qt=Ut.Group,hn=Ut.GroupHeading,xn=Ut.Menu,$n=Ut.MenuList,Mn=Ut.MenuPortal,On=Ut.LoadingMessage,ur=Ut.NoOptionsMessage,Sr=Ut.Option,Pr=this.commonProps,Wr=this.state.focusedOption,ai=this.props,oi=ai.captureMenuScroll,_i=ai.inputValue,Oi=ai.isLoading,Eo=ai.loadingMessage,mo=ai.minMenuHeight,lo=ai.maxMenuHeight,Co=ai.menuIsOpen,yo=ai.menuPlacement,_a=ai.menuPosition,Ca=ai.menuPortalTarget,Gs=ai.menuShouldBlockScroll,Ws=ai.menuShouldScrollIntoView,Gu=ai.noOptionsMessage,Ic=ai.onMenuScrollToTop,Jd=ai.onMenuScrollToBottom;if(!Co)return null;var Wu=function(aa,di){var Li=aa.type,$i=aa.data,Pi=aa.isDisabled,Fi=aa.isSelected,Ao=aa.label,ba=aa.value,bl=Wr===$i,qs=Pi?void 0:function(){return Ht.onOptionHover($i)},gg=Pi?void 0:function(){return Ht.selectOption($i)},ld="".concat(Ht.getElementId("option"),"-").concat(di),op={id:ld,onClick:gg,onMouseMove:qs,onMouseOver:qs,tabIndex:-1};return Ii.createElement(Sr,Wi({},Pr,{innerProps:op,data:$i,isDisabled:Pi,isSelected:Fi,key:ld,label:Ao,type:Li,value:ba,isFocused:bl,innerRef:bl?Ht.getFocusedOptionRef:void 0}),Ht.formatOptionLabel(aa.data,"menu"))},kh;if(this.hasOptions())kh=this.getCategorizedOptions().map(function(aa){if(aa.type==="group"){var di=aa.data,Li=aa.options,$i=aa.index,Pi="".concat(Ht.getElementId("group"),"-").concat($i),Fi="".concat(Pi,"-heading");return Ii.createElement(Qt,Wi({},Pr,{key:Pi,data:di,options:Li,Heading:hn,headingProps:{id:Fi,data:aa.data},label:Ht.formatGroupLabel(aa.data)}),aa.options.map(function(Ao){return Wu(Ao,"".concat($i,"-").concat(Ao.index))}))}else if(aa.type==="option")return Wu(aa,"".concat(aa.index))});else if(Oi){var ql=Eo({inputValue:_i});if(ql===null)return null;kh=Ii.createElement(On,Pr,ql)}else{var pv=Gu({inputValue:_i});if(pv===null)return null;kh=Ii.createElement(ur,Pr,pv)}var pg={minMenuHeight:mo,maxMenuHeight:lo,menuPlacement:yo,menuPosition:_a,menuShouldScrollIntoView:Ws},qu=Ii.createElement(ev,Wi({},Pr,pg),function(aa){var di=aa.ref,Li=aa.placerProps,$i=Li.placement,Pi=Li.maxHeight;return Ii.createElement(xn,Wi({},Pr,pg,{innerRef:di,innerProps:{onMouseDown:Ht.onMenuMouseDown,onMouseMove:Ht.onMenuMouseMove},isLoading:Oi,placement:$i}),Ii.createElement(A2,{captureEnabled:oi,onTopArrive:Ic,onBottomArrive:Jd,lockEnabled:Gs},function(Fi){return Ii.createElement($n,Wi({},Pr,{innerRef:function(Ao){Ht.getMenuListRef(Ao),Fi(Ao)},isLoading:Oi,maxHeight:Pi,focusedOption:Wr}),kh)}))});return Ca||_a==="fixed"?Ii.createElement(Mn,Wi({},Pr,{appendTo:Ca,controlElement:this.controlRef,menuPlacement:yo,menuPosition:_a}),qu):qu}},{key:"renderFormField",value:function(){var Ht=this,Ut=this.props,Qt=Ut.delimiter,hn=Ut.isDisabled,xn=Ut.isMulti,$n=Ut.name,Mn=this.state.selectValue;if(!(!$n||hn))if(xn)if(Qt){var On=Mn.map(function(Pr){return Ht.getOptionValue(Pr)}).join(Qt);return Ii.createElement("input",{name:$n,type:"hidden",value:On})}else{var ur=Mn.length>0?Mn.map(function(Pr,Wr){return Ii.createElement("input",{key:"i-".concat(Wr),name:$n,type:"hidden",value:Ht.getOptionValue(Pr)})}):Ii.createElement("input",{name:$n,type:"hidden"});return Ii.createElement("div",null,ur)}else{var Sr=Mn[0]?this.getOptionValue(Mn[0]):"";return Ii.createElement("input",{name:$n,type:"hidden",value:Sr})}}},{key:"renderLiveRegion",value:function(){var Ht=this.commonProps,Ut=this.state,Qt=Ut.ariaSelection,hn=Ut.focusedOption,xn=Ut.focusedValue,$n=Ut.isFocused,Mn=Ut.selectValue,On=this.getFocusableOptions();return Ii.createElement(y2,Wi({},Ht,{ariaSelection:Qt,focusedOption:hn,focusedValue:xn,isFocused:$n,selectValue:Mn,focusableOptions:On}))}},{key:"render",value:function(){var Ht=this.getComponents(),Ut=Ht.Control,Qt=Ht.IndicatorsContainer,hn=Ht.SelectContainer,xn=Ht.ValueContainer,$n=this.props,Mn=$n.className,On=$n.id,ur=$n.isDisabled,Sr=$n.menuIsOpen,Pr=this.state.isFocused,Wr=this.commonProps=this.getCommonProps();return Ii.createElement(hn,Wi({},Wr,{className:Mn,innerProps:{id:On,onKeyDown:this.onKeyDown},isDisabled:ur,isFocused:Pr}),this.renderLiveRegion(),Ii.createElement(Ut,Wi({},Wr,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:ur,isFocused:Pr,menuIsOpen:Sr}),Ii.createElement(xn,Wi({},Wr,{isDisabled:ur}),this.renderPlaceholderOrValue(),this.renderInput()),Ii.createElement(Qt,Wi({},Wr,{isDisabled:ur}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(Ht,Ut){var Qt=Ut.prevProps,hn=Ut.clearFocusValueOnUpdate,xn=Ut.inputIsHiddenAfterUpdate,$n=Ht.options,Mn=Ht.value,On=Ht.menuIsOpen,ur=Ht.inputValue,Sr={};if(Qt&&(Mn!==Qt.value||$n!==Qt.options||On!==Qt.menuIsOpen||ur!==Qt.inputValue)){var Pr=n1(Mn),Wr=On?z2(Ht,Pr):[],ai=hn?H2(Ut,Pr):null,oi=j2(Ut,Wr);Sr={selectValue:Pr,focusedOption:oi,focusedValue:ai,clearFocusValueOnUpdate:!1}}var _i=xn!=null&&Ht!==Qt?{inputIsHidden:xn,inputIsHiddenAfterUpdate:void 0}:{};return Va(Va(Va({},Sr),_i),{},{prevProps:Ht})}}]),zt}(dn);fb.defaultProps=F2;var U2={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},G2=function(Pt){var Mt,zt;return zt=Mt=function(Ht){Qf(Qt,Ht);var Ut=Yd(Qt);function Qt(){var hn;qd(this,Qt);for(var xn=arguments.length,$n=new Array(xn),Mn=0;Mn<xn;Mn++)$n[Mn]=arguments[Mn];return hn=Ut.call.apply(Ut,[this].concat($n)),hn.select=void 0,hn.state={inputValue:hn.props.inputValue!==void 0?hn.props.inputValue:hn.props.defaultInputValue,menuIsOpen:hn.props.menuIsOpen!==void 0?hn.props.menuIsOpen:hn.props.defaultMenuIsOpen,value:hn.props.value!==void 0?hn.props.value:hn.props.defaultValue},hn.onChange=function(On,ur){hn.callProp("onChange",On,ur),hn.setState({value:On})},hn.onInputChange=function(On,ur){var Sr=hn.callProp("onInputChange",On,ur);hn.setState({inputValue:Sr!==void 0?Sr:On})},hn.onMenuOpen=function(){hn.callProp("onMenuOpen"),hn.setState({menuIsOpen:!0})},hn.onMenuClose=function(){hn.callProp("onMenuClose"),hn.setState({menuIsOpen:!1})},hn}return ig(Qt,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(hn){return this.props[hn]!==void 0?this.props[hn]:this.state[hn]}},{key:"callProp",value:function(hn){if(typeof this.props[hn]=="function"){for(var xn,$n=arguments.length,Mn=new Array($n>1?$n-1:0),On=1;On<$n;On++)Mn[On-1]=arguments[On];return(xn=this.props)[hn].apply(xn,Mn)}}},{key:"render",value:function(){var hn=this,xn=this.props;xn.defaultInputValue,xn.defaultMenuIsOpen,xn.defaultValue;var $n=Eu(xn,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return Ii.createElement(Pt,Wi({},$n,{ref:function(Mn){hn.select=Mn},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),Qt}(dn),Mt.defaultProps=U2,zt},W2=G2(fb),q2=W2;const x_=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"},{value:"supplementing",label:"Transcription"}];var pb=Pt=>{const Mt=Pt.content?x_.find(zt=>zt.value===Pt.content):null;return cn("div",{className:"r6o-purposedropdown"},cn(q2,{value:Mt,onChange:Pt.onChange,options:x_,isDisabled:!Pt.editable}))};const Y2=Pt=>cn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:Pt.width},cn("metadata",null,"IcoFont Icons"),cn("title",null,"simple-down"),cn("glyph",{glyphName:"simple-down",unicode:"\uEAB2",horizAdvX:"1000"}),cn("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"})),X2=Pt=>cn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:Pt.width},cn("metadata",null,"IcoFont Icons"),cn("title",null,"close"),cn("glyph",{glyphName:"close",unicode:"\uEEE4",horizAdvX:"1000"}),cn("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"})),Z2=Pt=>cn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:Pt.width},cn("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}));var K2=Pt=>{const[Mt,zt]=Ei(!1),[Ht,Ut]=Ei(!1),Qt=ur=>{zt(!0),Ut(!1)},hn=ur=>{Pt.onDelete(Pt.body),Ut(!1)},xn=ur=>Pt.onUpdate(Pt.body,Rt(It({},Pt.body),{value:ur.target.value})),$n=ur=>Pt.onUpdate(Pt.body,Rt(It({},Pt.body),{purpose:ur.value})),Mn=Pt.body.modified||Pt.body.created,On=Pt.body.creator&&cn("div",{className:"r6o-lastmodified"},cn("span",{className:"r6o-lastmodified-by"},Pt.body.creator.name||Pt.body.creator.id),Pt.body.created&&cn("span",{className:"r6o-lastmodified-at"},cn(Fh,{datetime:Pt.env.toClientTime(Mn),locale:fa.locale()})));return Pt.readOnly?cn("div",{className:"r6o-widget comment"},cn("div",{className:"r6o-readonly-comment"},Pt.body.value),On):cn("div",{className:Mt?"r6o-widget comment editable":"r6o-widget comment"},cn(Hf,{editable:Mt,content:Pt.body.value,onChange:xn,onSaveAndClose:Pt.onSaveAndClose}),!Mt&&On,Pt.purposeSelector&&cn(pb,{editable:Mt,content:Pt.body.purpose,onChange:$n,onSaveAndClose:Pt.onSaveAndClose}),cn("div",{className:Ht?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:()=>Ut(!Ht)},cn(Y2,{width:12})),Ht&&cn(Xp,{onEdit:Qt,onDelete:hn,onClickOutside:()=>Ut(!1)}))};const J2=x_.map(Pt=>Pt.value),gb=(Pt,Mt)=>{const zt=Mt?J2.indexOf(Pt.purpose)>-1:Pt.purpose=="commenting"||Pt.purpose=="replying";return Pt.type==="TextualBody"&&(!Pt.hasOwnProperty("purpose")||zt)},mb=(Pt,Mt)=>{var zt,Ht;if(Mt.editable===!0)return!1;if(Mt.editable===!1)return!0;if(Mt.editable==="MINE_ONLY"){const Ut=(zt=Pt.creator)==null?void 0:zt.id;return((Ht=Mt.env.user)==null?void 0:Ht.id)!==Ut}return Mt.readOnly},Q2=(Pt,Mt)=>Pt||{type:"TextualBody",value:"",purpose:Mt?"replying":"commenting",draft:!0},yb=Pt=>{const Mt=Pt.annotation?Pt.annotation.bodies.filter(hn=>gb(hn,Pt.purposeSelector)):[],zt=Q2(Mt.find(hn=>hn.draft==!0),Mt.length>1),Ht=Mt.filter(hn=>hn!=zt),Ut=hn=>{const xn=zt.value,$n=hn.target.value;xn.length===0&&$n.length>0?Pt.onAppendBody(Rt(It({},zt),{value:$n})):xn.length>0&&$n.length===0?Pt.onRemoveBody(zt):Pt.onUpdateBody(zt,Rt(It({},zt),{value:$n}))},Qt=hn=>Pt.onUpdateBody(zt,Rt(It({},zt),{purpose:hn.value}));return cn(zn,null,Ht.map((hn,xn)=>cn(K2,{key:xn,env:Pt.env,purposeSelector:Pt.purposeSelector,readOnly:mb(hn,Pt),body:hn,onUpdate:Pt.onUpdateBody,onDelete:Pt.onRemoveBody,onSaveAndClose:Pt.onSaveAndClose})),!Pt.readOnly&&Pt.annotation&&cn("div",{className:"r6o-widget comment editable"},cn(Hf,{focus:Pt.focus,content:zt.value,editable:!0,placeholder:Ht.length>0?fa.t("Add a reply..."):fa.t("Add a comment..."),onChange:Ut,onSaveAndClose:()=>Pt.onSaveAndClose()}),Pt.purposeSelector&&zt.value.length>0&&cn(pb,{editable:!0,content:zt.purpose,onChange:Qt,onSaveAndClose:()=>Pt.onSaveAndClose()})))};yb.disableDelete=(Pt,Mt)=>Pt.bodies.filter(zt=>gb(zt,Mt.purposeSelector)).some(zt=>mb(zt,Mt));var vb=yb;function _b(Pt,Mt){Pt.prototype=Object.create(Mt.prototype),Pt.prototype.constructor=Pt,og(Pt,Mt)}function ex(Pt,Mt){return Pt.classList?!!Mt&&Pt.classList.contains(Mt):(" "+(Pt.className.baseVal||Pt.className)+" ").indexOf(" "+Mt+" ")!==-1}function tx(Pt,Mt){Pt.classList?Pt.classList.add(Mt):ex(Pt,Mt)||(typeof Pt.className=="string"?Pt.className=Pt.className+" "+Mt:Pt.setAttribute("class",(Pt.className&&Pt.className.baseVal||"")+" "+Mt))}function bb(Pt,Mt){return Pt.replace(new RegExp("(^|\\s)"+Mt+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function nx(Pt,Mt){Pt.classList?Pt.classList.remove(Mt):typeof Pt.className=="string"?Pt.className=bb(Pt.className,Mt):Pt.setAttribute("class",bb(Pt.className&&Pt.className.baseVal||"",Mt))}var xb={disabled:!1},wb=Ii.createContext(null),c1="unmounted",ug="exited",hg="entering",Tm="entered",w_="exiting",Kd=function(Pt){_b(Mt,Pt);function Mt(Ht,Ut){var Qt;Qt=Pt.call(this,Ht,Ut)||this;var hn=Ut,xn=hn&&!hn.isMounting?Ht.enter:Ht.appear,$n;return Qt.appearStatus=null,Ht.in?xn?($n=ug,Qt.appearStatus=hg):$n=Tm:Ht.unmountOnExit||Ht.mountOnEnter?$n=c1:$n=ug,Qt.state={status:$n},Qt.nextCallback=null,Qt}Mt.getDerivedStateFromProps=function(Ht,Ut){var Qt=Ht.in;return Qt&&Ut.status===c1?{status:ug}:null};var zt=Mt.prototype;return zt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},zt.componentDidUpdate=function(Ht){var Ut=null;if(Ht!==this.props){var Qt=this.state.status;this.props.in?Qt!==hg&&Qt!==Tm&&(Ut=hg):(Qt===hg||Qt===Tm)&&(Ut=w_)}this.updateStatus(!1,Ut)},zt.componentWillUnmount=function(){this.cancelNextCallback()},zt.getTimeouts=function(){var Ht=this.props.timeout,Ut,Qt,hn;return Ut=Qt=hn=Ht,Ht!=null&&typeof Ht!="number"&&(Ut=Ht.exit,Qt=Ht.enter,hn=Ht.appear!==void 0?Ht.appear:Qt),{exit:Ut,enter:Qt,appear:hn}},zt.updateStatus=function(Ht,Ut){Ht===void 0&&(Ht=!1),Ut!==null?(this.cancelNextCallback(),Ut===hg?this.performEnter(Ht):this.performExit()):this.props.unmountOnExit&&this.state.status===ug&&this.setState({status:c1})},zt.performEnter=function(Ht){var Ut=this,Qt=this.props.enter,hn=this.context?this.context.isMounting:Ht,xn=this.props.nodeRef?[hn]:[Ii.findDOMNode(this),hn],$n=xn[0],Mn=xn[1],On=this.getTimeouts(),ur=hn?On.appear:On.enter;if(!Ht&&!Qt||xb.disabled){this.safeSetState({status:Tm},function(){Ut.props.onEntered($n)});return}this.props.onEnter($n,Mn),this.safeSetState({status:hg},function(){Ut.props.onEntering($n,Mn),Ut.onTransitionEnd(ur,function(){Ut.safeSetState({status:Tm},function(){Ut.props.onEntered($n,Mn)})})})},zt.performExit=function(){var Ht=this,Ut=this.props.exit,Qt=this.getTimeouts(),hn=this.props.nodeRef?void 0:Ii.findDOMNode(this);if(!Ut||xb.disabled){this.safeSetState({status:ug},function(){Ht.props.onExited(hn)});return}this.props.onExit(hn),this.safeSetState({status:w_},function(){Ht.props.onExiting(hn),Ht.onTransitionEnd(Qt.exit,function(){Ht.safeSetState({status:ug},function(){Ht.props.onExited(hn)})})})},zt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},zt.safeSetState=function(Ht,Ut){Ut=this.setNextCallback(Ut),this.setState(Ht,Ut)},zt.setNextCallback=function(Ht){var Ut=this,Qt=!0;return this.nextCallback=function(hn){Qt&&(Qt=!1,Ut.nextCallback=null,Ht(hn))},this.nextCallback.cancel=function(){Qt=!1},this.nextCallback},zt.onTransitionEnd=function(Ht,Ut){this.setNextCallback(Ut);var Qt=this.props.nodeRef?this.props.nodeRef.current:Ii.findDOMNode(this),hn=Ht==null&&!this.props.addEndListener;if(!Qt||hn){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var xn=this.props.nodeRef?[this.nextCallback]:[Qt,this.nextCallback],$n=xn[0],Mn=xn[1];this.props.addEndListener($n,Mn)}Ht!=null&&setTimeout(this.nextCallback,Ht)},zt.render=function(){var Ht=this.state.status;if(Ht===c1)return null;var Ut=this.props,Qt=Ut.children;Ut.in,Ut.mountOnEnter,Ut.unmountOnExit,Ut.appear,Ut.enter,Ut.exit,Ut.timeout,Ut.addEndListener,Ut.onEnter,Ut.onEntering,Ut.onEntered,Ut.onExit,Ut.onExiting,Ut.onExited,Ut.nodeRef;var hn=pm(Ut,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ii.createElement(wb.Provider,{value:null},typeof Qt=="function"?Qt(Ht,hn):Ii.cloneElement(Ii.Children.only(Qt),hn))},Mt}(Ii.Component);Kd.contextType=wb,Kd.propTypes={};function km(){}Kd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:km,onEntering:km,onEntered:km,onExit:km,onExiting:km,onExited:km},Kd.UNMOUNTED=c1,Kd.EXITED=ug,Kd.ENTERING=hg,Kd.ENTERED=Tm,Kd.EXITING=w_;var rx=Kd,ix=function(Pt,Mt){return Pt&&Mt&&Mt.split(" ").forEach(function(zt){return tx(Pt,zt)})},E_=function(Pt,Mt){return Pt&&Mt&&Mt.split(" ").forEach(function(zt){return nx(Pt,zt)})},S_=function(Pt){_b(Mt,Pt);function Mt(){for(var Ht,Ut=arguments.length,Qt=new Array(Ut),hn=0;hn<Ut;hn++)Qt[hn]=arguments[hn];return Ht=Pt.call.apply(Pt,[this].concat(Qt))||this,Ht.appliedClasses={appear:{},enter:{},exit:{}},Ht.onEnter=function(xn,$n){var Mn=Ht.resolveArguments(xn,$n),On=Mn[0],ur=Mn[1];Ht.removeClasses(On,"exit"),Ht.addClass(On,ur?"appear":"enter","base"),Ht.props.onEnter&&Ht.props.onEnter(xn,$n)},Ht.onEntering=function(xn,$n){var Mn=Ht.resolveArguments(xn,$n),On=Mn[0],ur=Mn[1],Sr=ur?"appear":"enter";Ht.addClass(On,Sr,"active"),Ht.props.onEntering&&Ht.props.onEntering(xn,$n)},Ht.onEntered=function(xn,$n){var Mn=Ht.resolveArguments(xn,$n),On=Mn[0],ur=Mn[1],Sr=ur?"appear":"enter";Ht.removeClasses(On,Sr),Ht.addClass(On,Sr,"done"),Ht.props.onEntered&&Ht.props.onEntered(xn,$n)},Ht.onExit=function(xn){var $n=Ht.resolveArguments(xn),Mn=$n[0];Ht.removeClasses(Mn,"appear"),Ht.removeClasses(Mn,"enter"),Ht.addClass(Mn,"exit","base"),Ht.props.onExit&&Ht.props.onExit(xn)},Ht.onExiting=function(xn){var $n=Ht.resolveArguments(xn),Mn=$n[0];Ht.addClass(Mn,"exit","active"),Ht.props.onExiting&&Ht.props.onExiting(xn)},Ht.onExited=function(xn){var $n=Ht.resolveArguments(xn),Mn=$n[0];Ht.removeClasses(Mn,"exit"),Ht.addClass(Mn,"exit","done"),Ht.props.onExited&&Ht.props.onExited(xn)},Ht.resolveArguments=function(xn,$n){return Ht.props.nodeRef?[Ht.props.nodeRef.current,xn]:[xn,$n]},Ht.getClassNames=function(xn){var $n=Ht.props.classNames,Mn=typeof $n=="string",On=Mn&&$n?$n+"-":"",ur=Mn?""+On+xn:$n[xn],Sr=Mn?ur+"-active":$n[xn+"Active"],Pr=Mn?ur+"-done":$n[xn+"Done"];return{baseClassName:ur,activeClassName:Sr,doneClassName:Pr}},Ht}var zt=Mt.prototype;return zt.addClass=function(Ht,Ut,Qt){var hn=this.getClassNames(Ut)[Qt+"ClassName"],xn=this.getClassNames("enter"),$n=xn.doneClassName;Ut==="appear"&&Qt==="done"&&$n&&(hn+=" "+$n),Qt==="active"&&Ht&&Ht.scrollTop,hn&&(this.appliedClasses[Ut][Qt]=hn,ix(Ht,hn))},zt.removeClasses=function(Ht,Ut){var Qt=this.appliedClasses[Ut],hn=Qt.base,xn=Qt.active,$n=Qt.done;this.appliedClasses[Ut]={},hn&&E_(Ht,hn),xn&&E_(Ht,xn),$n&&E_(Ht,$n)},zt.render=function(){var Ht=this.props;Ht.classNames;var Ut=pm(Ht,["classNames"]);return Ii.createElement(rx,Wi({},Ut,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},Mt}(Ii.Component);S_.defaultProps={classNames:""},S_.propTypes={};var ox=S_;const sx=(Pt,Mt)=>Mt.filter(zt=>(zt.label?zt.label:zt).toLowerCase().startsWith(Pt.toLowerCase())),ax=(Pt,Mt)=>Mt(Pt);var lx=Pt=>{const Mt=Tn(),[zt,Ht]=Ei(Pt.initialValue||""),[Ut,Qt]=Ei([]),[hn,xn]=Ei(null);Ci(()=>{Pt.focus&&Mt.current.querySelector("input").focus({preventScroll:!0})},[]),Ci(()=>{Pt.onChange&&Pt.onChange(zt)},[zt]);const $n=On=>{if(typeof Pt.vocabulary=="function"){const ur=ax(On,Pt.vocabulary);ur.then?ur.then(Qt):Qt(ur)}else{const ur=sx(On,Pt.vocabulary);Qt(ur)}},Mn=()=>{if(hn!==null)Pt.onSubmit(Ut[hn]);else{const On=zt.trim();if(On){const ur=Array.isArray(Pt.vocabulary)?Pt.vocabulary.find(Sr=>(Sr.label||Sr).toLowerCase()===On.toLowerCase()):null;ur?Pt.onSubmit(ur):Pt.onSubmit(On)}}Ht(""),Qt([]),xn(null)};return cn("div",{ref:Mt,className:"r6o-autocomplete"},cn("div",null,cn("input",{onKeyDown:On=>{if(On.which===13)Mn();else if(On.which===27)Pt.onCancel&&Pt.onCancel();else if(Ut.length>0){if(On.which===38)if(hn===null)xn(0);else{const ur=Math.max(0,hn-1);xn(ur)}else if(On.which===40)if(hn===null)xn(0);else{const ur=Math.min(Ut.length-1,hn+1);xn(ur)}}else On.which===40&&Array.isArray(Pt.vocabulary)&&Qt(Pt.vocabulary)},onChange:On=>{const{value:ur}=On.target;Ht(ur),xn(null),ur?$n(ur):Qt([])},value:zt,placeholder:Pt.placeholder})),cn("ul",null,Ut.length>0&&Ut.map((On,ur)=>cn("li",{key:`${On.label?On.label:On}${ur}`,onClick:Mn,onMouseEnter:()=>xn(ur),style:hn===ur?{backgroundColor:"#bde4ff"}:{}},On.label?On.label:On))))};const cx=Pt=>Pt||{type:"TextualBody",value:"",purpose:"tagging",draft:!0};var Eb=Pt=>{const Mt=Pt.annotation?Pt.annotation.bodies.filter(On=>On.type==="TextualBody"&&On.purpose==="tagging"):[],zt=cx(Mt.slice().reverse().find(On=>On.draft)),Ht=Mt.filter(On=>On!=zt),[Ut,Qt]=Ei(!1),hn=On=>ur=>{Qt(Ut===On?!1:On)},xn=On=>{const ur=zt.value.trim(),Sr=On.trim();ur.length===0&&Sr.length>0?Pt.onAppendBody(Rt(It({},zt),{value:Sr})):ur.length>0&&Sr.length===0?Pt.onRemoveBody(zt):Pt.onUpdateBody(zt,Rt(It({},zt),{value:Sr}))},$n=On=>ur=>{ur.stopPropagation(),Pt.onRemoveBody(On)},Mn=On=>{const ur=On.label?Rt(It({},zt),{value:On.label,source:On.uri}):Rt(It({},zt),{value:On}),Sr=Nt(ur,["draft"]);zt.value.trim().length===0?Pt.onAppendBody(Sr):Pt.onUpdateBody(zt,Sr)};return cn("div",{className:"r6o-widget r6o-tag"},Ht.length>0&&cn("ul",{className:"r6o-taglist"},Ht.map(On=>cn("li",{key:On.value,onClick:hn(On.value)},cn("span",{className:"r6o-label"},On.value),!Pt.readOnly&&cn(ox,{in:Ut===On.value,timeout:200,classNames:"r6o-delete"},cn("span",{className:"r6o-delete-wrapper",onClick:$n(On)},cn("span",{className:"r6o-delete"},cn(X2,{width:12}))))))),!Pt.readOnly&&cn(lx,{focus:Pt.focus,placeholder:fa.t("Add tag..."),vocabulary:Pt.vocabulary||[],onChange:xn,onSubmit:Mn}))};class Sb extends dn{constructor(Mt){super(Mt),this.element=Ii.createRef()}renderWidget(Mt){const zt=this.props.widget(Rt(It({annotation:Mt.annotation,readOnly:Mt.readOnly},Mt.config),{onAppendBody:(Ht,Ut)=>Mt.onAppendBody(Ht,Ut),onUpdateBody:(Ht,Ut,Qt)=>Mt.onUpdateBody(Ht,Ut,Qt),onUpsertBody:(Ht,Ut,Qt)=>Mt.onUpsertBody(Ht,Ut,Qt),onRemoveBody:(Ht,Ut)=>Mt.onRemoveBody(Ht,Ut),onBatchModify:(Ht,Ut)=>Mt.onBatchModify(Ht,Ut),onSetProperty:(Ht,Ut)=>Mt.onSetProperty(Ht,Ut),onSaveAndClose:()=>Mt.onSaveAndClose()}));for(;this.element.current.firstChild;)this.element.current.removeChild(this.element.current.lastChild);this.element.current.appendChild(zt)}componentDidMount(){this.renderWidget(this.props)}componentWillReceiveProps(Mt){this.element.current&&this.props.annotation!==Mt.annotation&&this.renderWidget(Mt)}render(){return cn("div",{ref:this.element,className:"widget"})}}window.React=Ii,window.ReactDOM=Ii;const ux={COMMENT:vb,TAG:Eb},hx=[cn(vb,null),cn(Eb,null)],dx=Pt=>{const Mt=Ht=>{var Ut;return typeof Ht=="function"&&!!((Ut=Ht.prototype)!=null&&Ut.isReactComponent)},zt=Ht=>typeof Ht=="function"&&(String(Ht).match(/return .+\(['|"].+['|"],\s*\{/g)||String(Ht).match(/return .+preact_compat/)||String(Ht).match(/return .+\.createElement/g));return Mt(Pt)||zt(Pt)},fx=Pt=>{const Mt=(zt,Ht,Ut)=>{if(typeof zt=="string"||zt instanceof String)return Ii.createElement(ux[zt],Ht);if((Ut==null?void 0:Ut.toLowerCase())==="react")return Ii.createElement(zt,Ht);if((Ut==null?void 0:Ut.toLowerCase())==="plainjs")return cn(Sb,{widget:zt,config:Ht});if(dx(zt))return Ii.createElement(zt,Ht);if(typeof zt=="function"||zt instanceof Function)return cn(Sb,{widget:zt,config:Ht});throw`${zt} is not a valid plugin`};if(Pt.widget){const zt=Pt,{widget:Ht,force:Ut}=zt,Qt=Nt(zt,["widget","force"]);return Mt(Ht,Qt,Ut)}else return Mt(Pt)},Cb=14;var Tb=(Pt,Mt,zt,Ht)=>{const Ut=Pt.getBoundingClientRect();Mt.className="r6o-editor r6o-arrow-top r6o-arrow-left";const{left:Qt,top:hn,right:xn,bottom:$n}=zt.getBoundingClientRect();if(Mt.style.top=`${$n-Ut.top+Cb}px`,Mt.style.left=`${Qt-Ut.left}px`,Ht){const Mn=Mt.children[1].getBoundingClientRect();if(Mn.right>window.innerWidth&&(Mt.classList.remove("r6o-arrow-left"),Mt.classList.add("r6o-arrow-right"),Mt.style.left=`${xn-Mn.width-Ut.left}px`),Mn.bottom>window.innerHeight){Mt.classList.remove("r6o-arrow-top"),Mt.classList.add("r6o-arrow-bottom");const ur=Mt.children[1].getBoundingClientRect().height;Mt.style.top=`${hn-Ut.top-ur-Cb}px`}const On=Mt.children[1].getBoundingClientRect();if(On.top<0){Mt.classList.add("pushed","down"),Mt.style.top=`${-Ut.top}px`;const ur=$n-Ut.top;On.height-Ut.top>ur&&Mt.classList.remove("r6o-arrow-bottom")}On.left<0&&(Mt.classList.add("pushed","right"),Mt.style.left=`${-Ut.left}px`),requestAnimationFrame(()=>Mt.style.opacity=1)}};const kb=Pt=>{const{top:Mt,left:zt,width:Ht,height:Ut}=Pt.getBoundingClientRect();return`${Mt}, ${zt}, ${Ht}, ${Ut}`};class px extends dn{constructor(Mt){super(Mt),Bt(this,"initResizeObserver",()=>{const zt=this.props.autoPosition===void 0?!0:this.props.autoPosition;if(window!=null&&window.ResizeObserver){const Ht=new ResizeObserver(()=>{this.state.dragged||Tb(this.props.wrapperEl,this.element.current,this.props.selectedElement,zt)});return Ht.observe(this.props.wrapperEl),()=>Ht.disconnect()}else this.state.dragged||Tb(this.props.wrapperEl,this.element.current,this.props.selectedElement,zt)}),Bt(this,"creationMeta",zt=>{const Ht={},{user:Ut}=this.props.env;return Ut&&(Ht.creator={},Ut.id&&(Ht.creator.id=Ut.id),Ut.displayName&&(Ht.creator.name=Ut.displayName),Ht[zt.created?"modified":"created"]=this.props.env.getCurrentTimeAdjusted()),Ht}),Bt(this,"getCurrentAnnotation",()=>this.state.currentAnnotation.clone()),Bt(this,"updateCurrentAnnotation",(zt,Ht)=>this.setState({currentAnnotation:this.state.currentAnnotation.clone(zt)},()=>{Ht&&this.onOk()})),Bt(this,"onAppendBody",(zt,Ht)=>this.updateCurrentAnnotation({body:[...this.state.currentAnnotation.bodies,It(It({},zt),this.creationMeta(zt))]},Ht)),Bt(this,"onUpdateBody",(zt,Ht,Ut)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.map(Qt=>Qt===zt?It(It({},Ht),this.creationMeta(Ht)):Qt)},Ut)),Bt(this,"onRemoveBody",(zt,Ht)=>this.updateCurrentAnnotation({body:this.state.currentAnnotation.bodies.filter(Ut=>Ut!==zt)},Ht)),Bt(this,"onUpsertBody",(zt,Ht,Ut)=>{if(zt==null&&Ht!=null)this.onAppendBody(Ht,Ut);else if(zt!=null&&Ht!=null)this.onUpdateBody(zt,Ht,Ut);else if(zt!=null&&Ht==null){const Qt=this.state.currentAnnotation.bodies.find(hn=>hn.purpose===zt.purpose);Qt?this.onUpdateBody(Qt,zt,Ut):this.onAppendBody(zt,Ut)}}),Bt(this,"onBatchModify",(zt,Ht)=>{const Ut=zt.filter(Mn=>Mn.action==="upsert"&&Mn.body).map(Mn=>({previous:this.state.currentAnnotation.bodies.find(On=>On.purpose===Mn.body.purpose),updated:It(It({},Mn.body),this.creationMeta(Mn.body))})),Qt=zt.filter(Mn=>Mn.action==="remove").map(Mn=>Mn.body),hn=[...zt.filter(Mn=>Mn.action==="append"||Mn.action==="upsert"&&Mn.updated&&!Mn.previous).map(Mn=>It(It({},Mn.body),this.creationMeta(Mn.body))),...Ut.filter(Mn=>!Mn.previous).map(Mn=>Mn.updated)],xn=[...zt.filter(Mn=>Mn.action==="update"||Mn.action==="upsert"&&Mn.updated&&Mn.previous).map(Mn=>({previous:Mn.previous,updated:It(It({},Mn.updated),this.creationMeta(Mn.updated))})),...Ut.filter(Mn=>Mn.previous)],$n=[...this.state.currentAnnotation.bodies.filter(Mn=>!Qt.includes(Mn)).map(Mn=>{const On=xn.find(ur=>ur.previous===Mn);return On?On.updated:Mn}),...hn];this.updateCurrentAnnotation({body:$n},Ht)}),Bt(this,"onSetProperty",(zt,Ht)=>{if(["@context","id","type","body","target"].includes(zt))throw new Exception(`Cannot set ${zt} - not allowed`);if(Ht)this.updateCurrentAnnotation({[zt]:Ht});else{const Ut=this.currentAnnotation.clone();delete Ut[zt],this.setState({currentAnnotation:Ut})}}),Bt(this,"onCancel",()=>this.props.onCancel(this.props.annotation)),Bt(this,"onOk",()=>{const zt=Ut=>Ut.clone({body:Ut.bodies.map(Qt=>{var hn=Qt,xn=Nt(hn,["draft"]);return xn})}),{currentAnnotation:Ht}=this.state;Ht.bodies.length===0&&!this.props.allowEmpty?Ht.isSelection?this.onCancel():this.props.onAnnotationDeleted(this.props.annotation):Ht.isSelection?this.props.onAnnotationCreated(zt(Ht).toAnnotation()):this.props.onAnnotationUpdated(zt(Ht),this.props.annotation)}),Bt(this,"onDelete",()=>this.props.onAnnotationDeleted(this.props.annotation)),this.element=Ii.createRef(),this.state={currentAnnotation:Mt.annotation,dragged:!1,selectionBounds:kb(Mt.selectedElement)}}componentWillReceiveProps(Mt){var zt;const{selectionBounds:Ht}=this.state,Ut=kb(Mt.selectedElement);(zt=this.props.annotation)!=null&&zt.isEqual(Mt.annotation)?this.setState({selectionBounds:Ut}):this.setState({currentAnnotation:Mt.annotation,selectionBounds:Ut}),this.props.modifiedTarget!=Mt.modifiedTarget&&this.state.currentAnnotation&&this.updateCurrentAnnotation({target:this.props.modifiedTarget}),Ht!=Ut&&this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}componentDidMount(){this.removeObserver=this.initResizeObserver(),new MutationObserver(()=>{this.element.current&&(this.removeObserver&&this.removeObserver(),this.removeObserver=this.initResizeObserver())}).observe(this.element.current,{childList:!0,subtree:!0})}componentWillUnmount(){this.removeObserver&&this.removeObserver()}render(){const{currentAnnotation:Mt}=this.state,zt=this.props.widgets?this.props.widgets.map(fx):hx,Ht=Qt=>Qt.type.disableDelete?Qt.type.disableDelete(Mt,Rt(It({},Qt.props),{readOnly:this.props.readOnly,env:this.props.env})):!1,Ut=Mt&&(Mt.bodies.length>0||this.props.allowEmpty)&&!this.props.readOnly&&!Mt.isSelection&&!zt.some(Ht);return cn(uf,{disabled:!this.props.detachable,handle:".r6o-draggable",cancel:".r6o-btn, .r6o-btn *",onDrag:()=>this.setState({dragged:!0})},cn("div",{ref:this.element,className:this.state.dragged?"r6o-editor dragged":"r6o-editor"},cn("div",{className:"r6o-arrow"}),cn("div",{className:"r6o-editor-inner"},zt.map((Qt,hn)=>Ii.cloneElement(Qt,{key:`${hn}`,focus:hn===0,annotation:Mt,readOnly:this.props.readOnly,env:this.props.env,onAppendBody:this.onAppendBody,onUpdateBody:this.onUpdateBody,onRemoveBody:this.onRemoveBody,onUpsertBody:this.onUpsertBody,onBatchModify:this.onBatchModify,onSetProperty:this.onSetProperty,onSaveAndClose:this.onOk})),this.props.readOnly?cn("div",{className:"r6o-footer"},cn("button",{className:"r6o-btn",onClick:this.onCancel},fa.t("Close"))):cn("div",{className:this.props.detachable?"r6o-footer r6o-draggable":"r6o-footer"},Ut&&cn("button",{className:"r6o-btn left delete-annotation",title:fa.t("Delete"),onClick:this.onDelete},cn(Z2,{width:12})),cn("button",{className:"r6o-btn outline",onClick:this.onCancel},fa.t("Cancel")),cn("button",{className:"r6o-btn ",onClick:this.onOk},fa.t("Ok"))))))}}var sv,gx=new Uint8Array(16);function mx(){if(!sv&&(sv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sv(gx)}var yx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vx(Pt){return typeof Pt=="string"&&yx.test(Pt)}for(var Wl=[],C_=0;C_<256;++C_)Wl.push((C_+256).toString(16).substr(1));function _x(Pt){var Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,zt=(Wl[Pt[Mt+0]]+Wl[Pt[Mt+1]]+Wl[Pt[Mt+2]]+Wl[Pt[Mt+3]]+"-"+Wl[Pt[Mt+4]]+Wl[Pt[Mt+5]]+"-"+Wl[Pt[Mt+6]]+Wl[Pt[Mt+7]]+"-"+Wl[Pt[Mt+8]]+Wl[Pt[Mt+9]]+"-"+Wl[Pt[Mt+10]]+Wl[Pt[Mt+11]]+Wl[Pt[Mt+12]]+Wl[Pt[Mt+13]]+Wl[Pt[Mt+14]]+Wl[Pt[Mt+15]]).toLowerCase();if(!vx(zt))throw TypeError("Stringified UUID is invalid");return zt}function Ab(Pt,Mt,zt){Pt=Pt||{};var Ht=Pt.random||(Pt.rng||mx)();if(Ht[6]=Ht[6]&15|64,Ht[8]=Ht[8]&63|128,Mt){zt=zt||0;for(var Ut=0;Ut<16;++Ut)Mt[zt+Ut]=Ht[Ut];return Mt}return _x(Ht)}var bx=function Pt(Mt,zt){if(Mt===zt)return!0;if(Mt&&zt&&typeof Mt=="object"&&typeof zt=="object"){if(Mt.constructor!==zt.constructor)return!1;var Ht,Ut,Qt;if(Array.isArray(Mt)){if(Ht=Mt.length,Ht!=zt.length)return!1;for(Ut=Ht;Ut--!=0;)if(!Pt(Mt[Ut],zt[Ut]))return!1;return!0}if(Mt.constructor===RegExp)return Mt.source===zt.source&&Mt.flags===zt.flags;if(Mt.valueOf!==Object.prototype.valueOf)return Mt.valueOf()===zt.valueOf();if(Mt.toString!==Object.prototype.toString)return Mt.toString()===zt.toString();if(Qt=Object.keys(Mt),Ht=Qt.length,Ht!==Object.keys(zt).length)return!1;for(Ut=Ht;Ut--!=0;)if(!Object.prototype.hasOwnProperty.call(zt,Qt[Ut]))return!1;for(Ut=Ht;Ut--!=0;){var hn=Qt[Ut];if(!Pt(Mt[hn],zt[hn]))return!1}return!0}return Mt!==Mt&&zt!==zt},Lb=bx;const T_=class{constructor(Pt,Mt){Bt(this,"clone",(zt,Ht)=>new T_(It(It({},this.underlying),zt),It(It({},this.opts),Ht))),Bt(this,"selector",zt=>{const{target:Ht}=this.underlying;if(Ht.selector)return(Array.isArray(Ht.selector)?Ht.selector:[Ht.selector]).find(Ut=>Ut.type===zt)}),this.underlying=Pt,this.opts=Mt}isEqual(Pt){return(Pt==null?void 0:Pt.type)!=="Annotation"?!1:this.underlying===Pt.underlying?!0:!this.underlying.id||!Pt.underlying.id?!1:Lb(this.underlying,Pt.underlying)}get readOnly(){var Pt;return(Pt=this.opts)==null?void 0:Pt.readOnly}get id(){return this.underlying.id}get type(){return this.underlying.type}get motivation(){return this.underlying.motivation}get body(){return this.underlying.body}get target(){return this.underlying.target}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}set bodies(Pt){this.underlying.body=Pt}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}get quote(){return this.selector("TextQuoteSelector").exact}get start(){return this.selector("TextPositionSelector").start}get end(){return this.selector("TextPositionSelector").end}};let dg=T_;Bt(dg,"create",Pt=>{const Mt={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${Ab()}`,body:[]};return new T_(It(It({},Mt),Pt))});class u1{constructor(Mt,zt){Bt(this,"clone",Ht=>{const Ut=new u1;return Ut.underlying=JSON.parse(JSON.stringify(this.underlying)),Ht&&(Ut.underlying=It(It({},Ut.underlying),Ht)),Ut}),Bt(this,"selector",Ht=>{const{target:Ut}=this.underlying;if(Ut.selector)return(Array.isArray(Ut.selector)?Ut.selector:[Ut.selector]).find(Qt=>Qt.type===Ht)}),Bt(this,"toAnnotation",()=>{const Ht=Object.assign({},this.underlying,{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:`#${Ab()}`});return new dg(Ht)}),this.underlying={type:"Selection",body:zt||[],target:Mt}}get type(){return this.underlying.type}get body(){return this.underlying.body}get target(){return this.underlying.target}get targets(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}isEqual(Mt){return Mt?Lb(this.underlying,Mt.underlying):!1}get bodies(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}get quote(){return this.selector("TextQuoteSelector").exact}get isSelection(){return!0}}let k_=0;var xx=()=>({setServerTime:Pt=>{const Mt=Date.now();k_=Pt-Mt},getCurrentTimeAdjusted:()=>new Date(Date.now()+k_).toISOString(),toClientTime:Pt=>Date.parse(Pt)-k_});const wx=(Pt,Mt)=>{if(Pt){const zt=Pt==="auto"?window.navigator.userLanguage||window.navigator.language:Pt;try{fa.init(zt.split("-")[0].toLowerCase(),Mt)}catch{console.warn(`Unsupported locale '${zt}'. Falling back to default en.`)}}else fa.init(null,Mt)},As="http://www.w3.org/2000/svg",A_=Pt=>{const Mt=Pt.getAttribute("class");return Mt?new Set(Mt.split(" ")):new Set},ip=(Pt,Mt)=>{const zt=A_(Pt);zt.add(Mt),Pt.setAttribute("class",Array.from(zt).join(" "))},Ex=(Pt,Mt)=>{const zt=A_(Pt);zt.delete(Mt),zt.size===0?Pt.removeAttribute("class"):Pt.setAttribute("class",Array.from(zt).join(" "))},L_=(Pt,Mt)=>A_(Pt).has(Mt),fg=(Pt,Mt)=>{const zt=Pt.selector("FragmentSelector");if(zt!=null&&zt.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){const{value:Ht}=zt,Ut=Ht.includes(":")?Ht.substring(Ht.indexOf("=")+1,Ht.indexOf(":")):"pixel",Qt=Ht.includes(":")?Ht.substring(Ht.indexOf(":")+1):Ht.substring(Ht.indexOf("=")+1);let[hn,xn,$n,Mn]=Qt.split(",").map(parseFloat);return Ut.toLowerCase()==="percent"&&(hn=hn*Mt.naturalWidth/100,xn=xn*Mt.naturalHeight/100,$n=$n*Mt.naturalWidth/100,Mn=Mn*Mt.naturalHeight/100),{x:hn,y:xn,w:$n,h:Mn}}},Sx=(Pt,Mt,zt,Ht,Ut)=>({source:Ut==null?void 0:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${Pt},${Mt},${zt},${Ht}`}}),Cx=(Pt,Mt,zt,Ht,Ut)=>{const Qt=Pt/Ut.naturalWidth*100,hn=Mt/Ut.naturalHeight*100,xn=zt/Ut.naturalWidth*100,$n=Ht/Ut.naturalHeight*100;return{source:Ut.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=percent:${Qt},${hn},${xn},${$n}`}}},h1=(Pt,Mt,zt,Ht,Ut,Qt)=>(Qt==null?void 0:Qt.toLowerCase())==="percent"?Cx(Pt,Mt,zt,Ht,Ut):Sx(Pt,Mt,zt,Ht,Ut),av=(Pt,Mt,zt,Ht,Ut)=>{Pt.setAttribute("x",Mt),Pt.setAttribute("y",zt),Pt.setAttribute("width",Ht),Pt.setAttribute("height",Ut)},lv=(Pt,Mt,zt)=>{Pt.setAttribute("cx",Mt),Pt.setAttribute("cy",zt),Pt.setAttribute("r",7)},Pb=(Pt,Mt,zt,Ht,Ut)=>{const Qt=document.createElementNS(As,"path");Qt.setAttribute("fill-rule","evenodd");const{naturalWidth:hn,naturalHeight:xn}=Pt;return Qt.setAttribute("d",`M0 0 h${hn} v${xn} h-${hn} z M${Mt} ${zt} h${Ht} v${Ut} h-${Ht} z`),Qt},P_=(Pt,Mt,zt,Ht,Ut,Qt)=>{const{naturalWidth:hn,naturalHeight:xn}=Mt;Pt.setAttribute("d",`M0 0 h${hn} v${xn} h-${hn} z M${zt} ${Ht} h${Ut} v${Qt} h-${Ut} z`)},I_=(Pt,Mt,zt,Ht)=>{const{x:Ut,y:Qt,w:hn,h:xn}=Pt.type==="Annotation"||Pt.type==="Selection"?fg(Pt,Mt):{x:Pt,y:Mt,w:zt,h:Ht},$n=document.createElementNS(As,"g");if(hn===0&&xn===0){ip($n,"a9s-point"),ip($n,"a9s-non-scaling"),$n.setAttribute("transform-origin",`${Ut} ${Qt}`);const Mn=document.createElementNS(As,"circle"),On=document.createElementNS(As,"circle");On.setAttribute("class","a9s-inner"),lv(On,Ut,Qt),Mn.setAttribute("class","a9s-outer"),lv(Mn,Ut,Qt),$n.appendChild(Mn),$n.appendChild(On)}else{const Mn=document.createElementNS(As,"rect"),On=document.createElementNS(As,"rect");On.setAttribute("class","a9s-inner"),av(On,Ut,Qt,hn,xn),Mn.setAttribute("class","a9s-outer"),av(Mn,Ut,Qt,hn,xn),$n.appendChild(Mn),$n.appendChild(On)}return $n},Ib=Pt=>{const Mt=Pt.querySelector(".a9s-outer");if(Mt.nodeName==="rect"){const zt=parseFloat(Mt.getAttribute("x")),Ht=parseFloat(Mt.getAttribute("y")),Ut=parseFloat(Mt.getAttribute("width")),Qt=parseFloat(Mt.getAttribute("height"));return{x:zt,y:Ht,w:Ut,h:Qt}}else{const zt=parseFloat(Mt.getAttribute("cx")),Ht=parseFloat(Mt.getAttribute("cy"));return{x:zt,y:Ht,w:0,h:0}}},O_=(Pt,Mt,zt,Ht,Ut)=>{const Qt=Pt.querySelector(".a9s-inner"),hn=Pt.querySelector(".a9s-outer");hn.nodeName==="rect"?(av(Qt,Mt,zt,Ht,Ut),av(hn,Mt,zt,Ht,Ut)):(lv(Qt,Mt,zt),lv(hn,Mt,zt))},Tx=(Pt,Mt)=>{const{w:zt,h:Ht}=fg(Pt,Mt);return zt*Ht};class kx{constructor(Mt,zt,Ht,Ut,Qt){Bt(this,"dragTo",(hn,xn)=>{this.group.style.display=null,this.opposite=[hn,xn];const{x:$n,y:Mn,w:On,h:ur}=this.bbox;P_(this.mask,this.env.image,$n,Mn,On,ur),O_(this.rect,$n,Mn,On,ur)}),Bt(this,"getBoundingClientRect",()=>this.rect.getBoundingClientRect()),Bt(this,"toSelection",()=>{const{x:hn,y:xn,w:$n,h:Mn}=this.bbox;return new u1(h1(hn,xn,$n,Mn,this.env.image,this.config.fragmentUnit))}),Bt(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.mask=null,this.rect=null,this.group=null}),this.anchor=[Mt,zt],this.opposite=[Mt,zt],this.config=Ut,this.env=Qt,this.group=document.createElementNS(As,"g"),this.mask=Pb(Qt.image,Mt,zt,2,2),this.mask.setAttribute("class","a9s-selection-mask"),this.rect=I_(Mt,zt,2,2),this.rect.setAttribute("class","a9s-selection"),this.group.style.pointerEvents="none",this.group.style.display="none",this.group.appendChild(this.mask),this.group.appendChild(this.rect),Ht.appendChild(this.group)}get bbox(){const Mt=this.opposite[0]-this.anchor[0],zt=this.opposite[1]-this.anchor[1];return{x:Mt>0?this.anchor[0]:this.opposite[0],y:zt>0?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs(Mt)),h:Math.max(1,Math.abs(zt))}}get element(){return this.rect}}const Ax={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},$_=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Lx=Pt=>{let Mt=null;const zt=(Ut,Qt)=>new MouseEvent(Ut,{screenX:Qt.screenX,screenY:Qt.screenY,clientX:Qt.clientX,clientY:Qt.clientY,pageX:Qt.pageX,pageY:Qt.pageY,bubbles:!0}),Ht=Ut=>{const Qt=Ut.changedTouches[0],hn=zt(Ax[Ut.type],Qt);Qt.target.dispatchEvent(hn),Ut.preventDefault(),(Ut.type==="touchstart"||Ut.type==="touchmove")&&(Mt&&clearTimeout(Mt),Mt=setTimeout(()=>{const xn=zt("dblclick",Qt);Qt.target.dispatchEvent(xn)},800)),Ut.type==="touchend"&&Mt&&clearTimeout(Mt)};Pt.addEventListener("touchstart",Ht,!0),Pt.addEventListener("touchmove",Ht,!0),Pt.addEventListener("touchend",Ht,!0),Pt.addEventListener("touchcancel",Ht,!0)},cv="An implementation is missing",Px=$_();class Ob extends Wa{constructor(Mt,zt,Ht){super(),Bt(this,"enableResponsive",()=>{window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>{const Qt=this.svg.getBoundingClientRect(),{width:hn,height:xn}=this.svg.viewBox.baseVal;this.scale=Math.max(hn/Qt.width,xn/Qt.height),this.onScaleChanged&&this.onScaleChanged(this.scale)}),this.resizeObserver.observe(this.svg.parentNode))}),Bt(this,"getSVGPoint",Qt=>{const hn=this.svg.createSVGPoint();if(Px){const xn=this.svg.getBoundingClientRect(),$n=Qt.clientX-xn.x,Mn=Qt.clientY-xn.y,{left:On,top:ur}=this.svg.getBoundingClientRect();return hn.x=$n+On,hn.y=Mn+ur,hn.matrixTransform(this.g.getScreenCTM().inverse())}else return hn.x=Qt.offsetX,hn.y=Qt.offsetY,hn.matrixTransform(this.g.getCTM().inverse())}),Bt(this,"drawHandle",(Qt,hn)=>{const xn=document.createElementNS(As,"g");xn.setAttribute("class","a9s-handle");const $n=document.createElementNS(As,"g"),Mn=Pr=>{const Wr=document.createElementNS(As,"circle");return Wr.setAttribute("cx",Qt),Wr.setAttribute("cy",hn),Wr.setAttribute("r",Pr),Wr},On=this.config.handleRadius||6,ur=Mn(On);ur.setAttribute("class","a9s-handle-inner");const Sr=Mn(On+1);return Sr.setAttribute("class","a9s-handle-outer"),$n.appendChild(Sr),$n.appendChild(ur),xn.appendChild($n),xn}),Bt(this,"setHandleXY",(Qt,hn,xn)=>{const $n=Qt.querySelector(".a9s-handle-inner");$n.setAttribute("cx",hn),$n.setAttribute("cy",xn);const Mn=Qt.querySelector(".a9s-handle-outer");Mn.setAttribute("cx",hn),Mn.setAttribute("cy",xn)}),Bt(this,"getHandleXY",Qt=>{const hn=Qt.querySelector(".a9s-handle-outer");return{x:parseFloat(hn.getAttribute("cx")),y:parseFloat(hn.getAttribute("cy"))}}),Bt(this,"scaleHandle",Qt=>{const hn=Qt.querySelector(".a9s-handle-inner"),xn=Qt.querySelector(".a9s-handle-outer"),$n=this.scale*(this.config.handleRadius||6);hn.setAttribute("r",$n),xn.setAttribute("r",$n)}),this.svg=Mt.closest("svg"),this.g=Mt,this.config=zt,this.env=Ht,this.scale=1;const{image:Ut}=Ht;(Ut instanceof Element||Ut instanceof HTMLDocument)&&this.enableResponsive()}destroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null}}class R_ extends Ob{constructor(Mt,zt,Ht){super(Mt,zt,Ht),Bt(this,"attachListeners",({mouseMove:Ut,mouseUp:Qt,dblClick:hn})=>{Ut&&(this.mouseMove=xn=>{const{x:$n,y:Mn}=this.getSVGPoint(xn);this.started||(this.emit("startSelection",{x:$n,y:Mn}),this.started=!0),Ut($n,Mn,xn)},this.svg.addEventListener("mousemove",this.mouseMove)),Qt&&(this.mouseUp=xn=>{if(xn.button!==0)return;const{x:$n,y:Mn}=this.getSVGPoint(xn);Qt($n,Mn,xn)},document.addEventListener("mouseup",this.mouseUp)),hn&&(this.dblClick=xn=>{const{x:$n,y:Mn}=this.getSVGPoint(xn);hn($n,Mn,xn)},document.addEventListener("dblclick",this.dblClick))}),Bt(this,"detachListeners",()=>{this.mouseMove&&this.svg.removeEventListener("mousemove",this.mouseMove),this.mouseUp&&document.removeEventListener("mouseup",this.mouseUp),this.dblClick&&document.removeEventListener("dblclick",this.dblClick)}),Bt(this,"start",(Ut,Qt)=>{const{x:hn,y:xn}=this.getSVGPoint(Ut);this.startDrawing(hn,xn,Qt,Ut)}),Bt(this,"startDrawing",Ut=>{throw new Error(cv)}),Bt(this,"createEditableShape",Ut=>{throw new Error(cv)}),this.started=!1}get isDrawing(){throw new Error(cv)}}R_.supports=Pt=>{throw new Error(cv)};const $b="An implementation is missing";class Rb extends Ob{constructor(Mt,zt,Ht,Ut){super(zt,Ht,Ut),Bt(this,"updateState",Qt=>{throw new Error($b)}),this.annotation=Mt}get element(){throw new Error($b)}}const Ix=/firefox/i.test(navigator.userAgent),Mb=(Pt,Mt,zt,Ht,Ut)=>{Pt.setAttribute("width",Ht),Pt.setAttribute("height",Ut),Ix?(Pt.setAttribute("x",0),Pt.setAttribute("y",0),Pt.setAttribute("transform",`translate(${Mt}, ${zt})`)):(Pt.setAttribute("x",Mt),Pt.setAttribute("y",zt))},Nb=(Pt,Mt)=>{const{x:zt,y:Ht,width:Ut,height:Qt}=Mt.getBBox(),hn=document.createElementNS(As,"svg");hn.setAttribute("class","a9s-formatter-el"),Mb(hn,zt,Ht,Ut,Qt);const xn=document.createElementNS(As,"g");xn.appendChild(Pt),hn.appendChild(xn),Mt.append(hn)},uv=(Pt,Mt,zt)=>{if(!zt)return Pt;const Ht=zt(Mt);if(!Ht)return Pt;if(typeof Ht=="string"||Ht instanceof String)ip(Pt,Ht);else if(Ht.nodeType===Node.ELEMENT_NODE)Nb(Ht,Pt);else{const{className:Ut,style:Qt,element:hn}=Ht;if(Ut&&ip(Pt,Ut),Qt){const xn=Pt.querySelector(".a9s-outer"),$n=Pt.querySelector(".a9s-inner");xn&&$n?(xn.setAttribute("style","display:none"),$n.setAttribute("style",Qt)):Pt.setAttribute("style",Qt)}hn&&Nb(hn,Pt);for(const xn in Ht)Ht.hasOwnProperty(xn)&&xn.startsWith("data-")&&Pt.setAttribute(xn,Ht[xn])}},M_=(Pt,Mt,zt,Ht,Ut)=>{const Qt=Pt.querySelector(".a9s-formatter-el");Qt&&Mb(Qt,Mt,zt,Ht,Ut)};class Ox extends Rb{constructor(Mt,zt,Ht,Ut){super(Mt,zt,Ht,Ut),Bt(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Bt(this,"setSize",(Mn,On,ur,Sr)=>{O_(this.rectangle,Mn,On,ur,Sr),P_(this.mask,this.env.image,Mn,On,ur,Sr),M_(this.elementGroup,Mn,On,ur,Sr);const[Pr,Wr,ai,oi]=this.handles;this.setHandleXY(Pr,Mn,On),this.setHandleXY(Wr,Mn+ur,On),this.setHandleXY(ai,Mn+ur,On+Sr),this.setHandleXY(oi,Mn,On+Sr)}),Bt(this,"stretchCorners",(Mn,On,ur)=>{const Sr=this.getHandleXY(On),Pr=ur.x-Sr.x,Wr=ur.y-Sr.y,ai=Pr>0?Sr.x:ur.x,oi=Wr>0?Sr.y:ur.y,_i=Math.abs(Pr),Oi=Math.abs(Wr);O_(this.rectangle,ai,oi,_i,Oi),P_(this.mask,this.env.image,ai,oi,_i,Oi),M_(this.elementGroup,ai,oi,_i,Oi),this.setHandleXY(this.handles[Mn],ur.x,ur.y);const Eo=this.handles[(Mn+3)%4];this.setHandleXY(Eo,Sr.x,ur.y);const mo=this.handles[(Mn+5)%4];return this.setHandleXY(mo,ur.x,Sr.y),{x:ai,y:oi,w:_i,h:Oi}}),Bt(this,"onGrab",Mn=>On=>{if(On.button!==0)return;this.grabbedElem=Mn;const ur=this.getSVGPoint(On),{x:Sr,y:Pr}=Ib(this.rectangle);this.mouseOffset={x:ur.x-Sr,y:ur.y-Pr}}),Bt(this,"onMouseMove",Mn=>{if(Mn.button!==0)return;const On=(ur,Sr)=>ur<0?0:ur>Sr?Sr:ur;if(this.grabbedElem){const ur=this.getSVGPoint(Mn);if(this.grabbedElem===this.rectangle){const{w:Sr,h:Pr}=Ib(this.rectangle),{naturalWidth:Wr,naturalHeight:ai}=this.env.image,oi=On(ur.x-this.mouseOffset.x,Wr-Sr),_i=On(ur.y-this.mouseOffset.y,ai-Pr);this.setSize(oi,_i,Sr,Pr),this.emit("update",h1(oi,_i,Sr,Pr,this.env.image,this.config.fragmentUnit))}else{const Sr=this.handles.indexOf(this.grabbedElem),Pr=Sr<2?this.handles[Sr+2]:this.handles[Sr-2],{x:Wr,y:ai,w:oi,h:_i}=this.stretchCorners(Sr,Pr,ur);this.emit("update",h1(Wr,ai,oi,_i,this.env.image,this.config.fragmentUnit))}}}),Bt(this,"onMouseUp",Mn=>{this.grabbedElem=null,this.mouseOffset=null}),Bt(this,"updateState",Mn=>{const{x:On,y:ur,w:Sr,h:Pr}=fg(Mn,this.env.image);this.setSize(On,ur,Sr,Pr)}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp);const{x:Qt,y:hn,w:xn,h:$n}=fg(Mt,Ut.image);this.containerGroup=document.createElementNS(As,"g"),this.mask=Pb(Ut.image,Qt,hn,xn,$n),this.mask.setAttribute("class","a9s-selection-mask"),this.containerGroup.appendChild(this.mask),this.elementGroup=document.createElementNS(As,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.rectangle=I_(Qt,hn,xn,$n),this.rectangle.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.rectangle)),this.elementGroup.appendChild(this.rectangle),this.handles=[[Qt,hn],[Qt+xn,hn],[Qt+xn,hn+$n],[Qt,hn+$n]].map(Mn=>{const[On,ur]=Mn,Sr=this.drawHandle(On,ur);return Sr.addEventListener("mousedown",this.onGrab(Sr)),this.elementGroup.appendChild(Sr),Sr}),this.containerGroup.appendChild(this.elementGroup),zt.appendChild(this.containerGroup),uv(this.rectangle,Mt,Ht.formatter),this.grabbedElem=null,this.mouseOffset=null}get element(){return this.elementGroup}destroy(){this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}}class hv extends R_{constructor(Mt,zt,Ht){super(Mt,zt,Ht),Bt(this,"startDrawing",(Ut,Qt)=>{this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp}),this.rubberband=new kx(Ut,Qt,this.g,this.config,this.env)}),Bt(this,"stop",()=>{this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Bt(this,"onMouseMove",(Ut,Qt)=>this.rubberband.dragTo(Ut,Qt)),Bt(this,"onMouseUp",()=>{this.detachListeners(),this.started=!1;const{width:Ut,height:Qt}=this.rubberband.getBoundingClientRect(),hn=this.config.minSelectionWidth||4,xn=this.config.minSelectionHeight||4;if(Ut>=hn&&Qt>=xn){const{element:$n}=this.rubberband;$n.annotation=this.rubberband.toSelection(),this.emit("complete",$n)}else this.emit("cancel");this.stop()}),Bt(this,"createEditableShape",Ut=>new Ox(Ut,this.g,this.config,this.env)),this.rubberband=null}get isDrawing(){return this.rubberband!=null}}hv.identifier="rect",hv.supports=Pt=>{const Mt=Pt.selector("FragmentSelector");return Mt==null?void 0:Mt.conformsTo.startsWith("http://www.w3.org/TR/media-frags")};const $x=Pt=>{const Mt=new XMLSerializer().serializeToString(Pt.documentElement).replace("<svg>",`<svg xmlns="${As}">`);return new DOMParser().parseFromString(Mt,"image/svg+xml").documentElement},Db=Pt=>{const Mt=Ht=>{Array.from(Ht.attributes).forEach(Ut=>{Ut.name.startsWith("on")&&Ht.removeAttribute(Ut.name)})},zt=Pt.getElementsByTagName("script");return Array.from(zt).reverse().forEach(Ht=>Ht.parentNode.removeChild(Ht)),Mt(Pt),Array.from(Pt.querySelectorAll("*")).forEach(Mt),Pt},Am=Pt=>{const Mt=Pt.selector("SvgSelector");if(Mt){const zt=new DOMParser,{value:Ht}=Mt,Ut=zt.parseFromString(Ht,"image/svg+xml"),Qt=Ut.lookupPrefix(As),hn=Ut.lookupNamespaceURI(null);return Qt||hn?Db(Ut).firstChild:Db($x(Ut)).firstChild}},Bb=Pt=>{const Mt=Am(Pt),zt=document.createElementNS(As,"g"),Ht=Mt.cloneNode(!0);Ht.setAttribute("class","a9s-inner");const Ut=Mt.cloneNode(!0);return Ut.setAttribute("class","a9s-outer"),zt.appendChild(Ut),zt.appendChild(Ht),zt},N_=(Pt,Mt)=>{const zt=Pt.querySelector(".a9s-inner").cloneNode(!0);zt.removeAttribute("class"),zt.removeAttribute("xmlns");let Ht=zt.outerHTML||new XMLSerializer().serializeToString(zt);return Ht=Ht.replace(` xmlns="${As}"`,""),{source:Mt==null?void 0:Mt.src,selector:{type:"SvgSelector",value:`<svg>${Ht}</svg>`}}},Rx=Pt=>{const Mt=Am(Pt),zt=Mt.nodeName.toLowerCase();if(zt==="polygon")return Mx(Mt);if(zt==="circle")return Nx(Mt);if(zt==="ellipse")return Dx(Mt);if(zt=="path")return Bx(Mt);throw`Unsupported SVG shape type: ${zt}`},Mx=Pt=>{const Mt=Pt.getAttribute("points").split(" ").map(Ut=>Ut.split(",").map(Qt=>parseFloat(Qt.trim())));let zt=0,Ht=Mt.length-1;for(let Ut=0;Ut<Mt.length;Ut++)zt+=(Mt[Ht][0]+Mt[Ut][0])*(Mt[Ht][1]-Mt[Ut][1]),Ht=Ut;return Math.abs(.5*zt)},Nx=Pt=>{const Mt=Pt.getAttribute("r");return Mt*Mt*Math.PI},Dx=Pt=>{const Mt=Pt.getAttribute("rx"),zt=Pt.getAttribute("ry");return Mt*zt*Math.PI},Bx=Pt=>{const Mt=Pt.getAttribute("d").split("L");let zt=0;if(Mt.length>1){var Ht=Mt[Mt.length-1].trim().split(" ");let Ut=parseFloat(Ht[0]),Qt=parseFloat(Ht[1]);Ht=Mt[0].substring(1).trim().split(" ");let hn=parseFloat(Ht[0]),xn=parseFloat(Ht[1]);zt+=(Ut+hn)*(Qt-xn),Ut=hn,Qt=xn;for(let $n=1;$n<Mt.length;$n++)Ht=Mt[$n].trim().split(" "),hn=parseFloat(Ht[0]),xn=parseFloat(Ht[1]),zt+=(Ut+hn)*(Qt-xn),Ut=hn,Qt=xn}return Math.abs(.5*zt)};class Fb{constructor(Mt,zt){Bt(this,"redraw",()=>{this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}),Bt(this,"destroy",()=>this.mask.parentNode.removeChild(this.mask)),this.w=Mt.naturalWidth,this.h=Mt.naturalHeight,this.polygon=zt,this.mask=document.createElementNS(As,"path"),this.mask.setAttribute("fill-rule","evenodd"),this.mask.setAttribute("class","a9s-selection-mask"),this.mask.setAttribute("d",`M0 0 h${this.w} v${this.h} h-${this.w} z M${this.polygon.getAttribute("points")} z`)}get element(){return this.mask}}class Fx{constructor(Mt,zt,Ht){Bt(this,"setPoints",Ut=>{const Qt=Ut.map(hn=>`${hn[0]},${hn[1]}`).join(" ");this.outer.setAttribute("points",Qt),this.inner.setAttribute("points",Qt)}),Bt(this,"getBoundingClientRect",()=>this.outer.getBoundingClientRect()),Bt(this,"dragTo",Ut=>{this.group.style.display=null,this.mousepos=Ut;const Qt=[...this.points,Ut];this.setPoints(Qt),this.mask.redraw()}),Bt(this,"addPoint",()=>{const[Ut,Qt]=this.mousepos,hn=this.points[this.points.length-1];Math.pow(Ut-hn[0],2)+Math.pow(Qt-hn[1],2)>4&&(this.points=[...this.points,this.mousepos],this.setPoints(this.points),this.mask.redraw())}),Bt(this,"destroy",()=>{this.group.parentNode.removeChild(this.group),this.polygon=null,this.group=null}),Bt(this,"toSelection",()=>new u1(N_(this.group,this.env.image))),this.points=[Mt],this.env=Ht,this.mousepos=Mt,this.group=document.createElementNS(As,"g"),this.polygon=document.createElementNS(As,"g"),this.polygon.setAttribute("class","a9s-selection"),this.outer=document.createElementNS(As,"polygon"),this.outer.setAttribute("class","a9s-outer"),this.inner=document.createElementNS(As,"polygon"),this.inner.setAttribute("class","a9s-inner"),this.setPoints(this.points),this.mask=new Fb(Ht.image,this.inner),this.polygon.appendChild(this.outer),this.polygon.appendChild(this.inner),this.group.style.display="none",this.group.appendChild(this.mask.element),this.group.appendChild(this.polygon),zt.appendChild(this.group)}get element(){return this.polygon}}const D_=Pt=>{const Mt=Pt.querySelector(".a9s-inner").points,zt=[];for(let Ht=0;Ht<Mt.numberOfItems;Ht++)zt.push(Mt.getItem(Ht));return zt},zx=Pt=>Pt.querySelector(".a9s-inner").getBBox();class Hx extends Rb{constructor(Mt,zt,Ht,Ut){super(Mt,zt,Ht,Ut),Bt(this,"onScaleChanged",()=>this.handles.map(this.scaleHandle)),Bt(this,"setPoints",Qt=>{const hn=Pr=>Math.round(10*Pr)/10,xn=Qt.map(Pr=>`${hn(Pr.x)},${hn(Pr.y)}`).join(" ");this.shape.querySelector(".a9s-inner").setAttribute("points",xn);const $n=this.shape.querySelector(".a9s-outer");$n.setAttribute("points",xn),this.mask.redraw();const{x:Mn,y:On,width:ur,height:Sr}=$n.getBBox();M_(this.elementGroup,Mn,On,ur,Sr)}),Bt(this,"onGrab",Qt=>hn=>{hn.button===0&&(this.grabbedElem=Qt,this.grabbedAt=this.getSVGPoint(hn))}),Bt(this,"onMouseMove",Qt=>{const hn=(xn,$n,Mn)=>xn+$n<0?-xn:xn+$n>Mn?Mn-xn:$n;if(this.grabbedElem){const xn=this.getSVGPoint(Qt);if(this.grabbedElem===this.shape){const{x:$n,y:Mn,width:On,height:ur}=zx(this.shape),{naturalWidth:Sr,naturalHeight:Pr}=this.env.image,Wr=hn($n,xn.x-this.grabbedAt.x,Sr-On),ai=hn(Mn,xn.y-this.grabbedAt.y,Pr-ur),oi=D_(this.shape).map(_i=>({x:_i.x+Wr,y:_i.y+ai}));this.grabbedAt=xn,this.setPoints(oi),oi.forEach((_i,Oi)=>this.setHandleXY(this.handles[Oi],_i.x,_i.y)),this.emit("update",N_(this.shape,this.env.image))}else{const $n=this.handles.indexOf(this.grabbedElem),Mn=D_(this.shape).map((On,ur)=>ur===$n?xn:On);this.setPoints(Mn),this.setHandleXY(this.handles[$n],xn.x,xn.y),this.emit("update",N_(this.shape,this.env.image))}}}),Bt(this,"onMouseUp",Qt=>{this.grabbedElem=null,this.grabbedAt=null}),Bt(this,"updateState",Qt=>{const hn=Am(Qt).getAttribute("points").split(" ").map(xn=>{const[$n,Mn]=xn.split(",").map(On=>parseFloat(On.trim()));return{x:$n,y:Mn}});this.setPoints(hn),hn.forEach((xn,$n)=>this.setHandleXY(this.handles[$n],xn.x,xn.y))}),Bt(this,"destroy",()=>{this.containerGroup.parentNode.removeChild(this.containerGroup),super.destroy()}),this.svg.addEventListener("mousemove",this.onMouseMove),this.svg.addEventListener("mouseup",this.onMouseUp),this.containerGroup=document.createElementNS(As,"g"),this.shape=Bb(Mt),this.shape.querySelector(".a9s-inner").addEventListener("mousedown",this.onGrab(this.shape)),this.mask=new Fb(Ut.image,this.shape.querySelector(".a9s-inner")),this.containerGroup.appendChild(this.mask.element),this.elementGroup=document.createElementNS(As,"g"),this.elementGroup.setAttribute("class","a9s-annotation editable selected"),this.elementGroup.appendChild(this.shape),this.handles=D_(this.shape).map(Qt=>{const hn=this.drawHandle(Qt.x,Qt.y);return hn.addEventListener("mousedown",this.onGrab(hn)),this.elementGroup.appendChild(hn),hn}),this.containerGroup.appendChild(this.elementGroup),zt.appendChild(this.containerGroup),uv(this.shape,Mt,Ht.formatter),this.grabbedElem=null,this.grabbedAt=null}get element(){return this.elementGroup}}class B_ extends R_{constructor(Mt,zt,Ht){super(Mt,zt,Ht),Bt(this,"startDrawing",(Ut,Qt,hn)=>{this._isDrawing=!0,this._startOnSingleClick=hn,this.attachListeners({mouseMove:this.onMouseMove,mouseUp:this.onMouseUp,dblClick:this.onDblClick}),this.rubberband=new Fx([Ut,Qt],this.g,this.env)}),Bt(this,"stop",()=>{this.detachListeners(),this._isDrawing=!1,this.rubberband&&(this.rubberband.destroy(),this.rubberband=null)}),Bt(this,"onMouseMove",(Ut,Qt)=>this.rubberband.dragTo([Ut,Qt])),Bt(this,"onMouseUp",()=>{const{width:Ut,height:Qt}=this.rubberband.getBoundingClientRect(),hn=this.config.minSelectionWidth||4,xn=this.config.minSelectionHeight||4;Ut>=hn||Qt>=xn?this.rubberband.addPoint():this._startOnSingleClick||(this.emit("cancel"),this.stop())}),Bt(this,"onDblClick",()=>{this._isDrawing=!1;const Ut=this.rubberband.element;Ut.annotation=this.rubberband.toSelection(),this.emit("complete",Ut),this.stop()}),Bt(this,"createEditableShape",Ut=>new Hx(Ut,this.g,this.config,this.env)),this._isDrawing=!1,this._startOnSingleClick=!1}get isDrawing(){return this._isDrawing}}B_.identifier="polygon",B_.supports=Pt=>{var Mt;const zt=Pt.selector("SvgSelector");if(zt)return(Mt=zt.value)==null?void 0:Mt.match(/^<svg.*<polygon/g)};class jx extends Wa{constructor(Mt,zt,Ht){super(),Bt(this,"listTools",()=>this._registered.map(Ut=>Ut.identifier)),Bt(this,"registerTool",Ut=>{const Qt=Ut.identifier;this.listTools().includes(Qt)&&this.unregisterTool(Qt),this._registered.push(Ut)}),Bt(this,"unregisterTool",Ut=>this._registered=this._registered.filter(Qt=>Qt.identifier!==Ut)),Bt(this,"setCurrent",Ut=>{const Qt=typeof Ut=="string"||Ut instanceof String?this._registered.find(hn=>hn.identifier===Ut):Ut;this._current=new Qt(this._g,this._config,this._env),this._current.on("startSelection",hn=>this.emit("startSelection",hn)),this._current.on("complete",hn=>this.emit("complete",hn)),this._current.on("cancel",hn=>this.emit("cancel",hn))}),Bt(this,"forAnnotation",Ut=>{var Qt;const[hn,...xn]=Ut.targets,$n=(Qt=hn.renderedVia)==null?void 0:Qt.name,Mn=$n?this._registered.find(On=>On.identifier===$n):this._registered.find(On=>On.supports(Ut));return Mn?new Mn(this._g,this._config,this._env):null}),this._g=Mt,this._config=zt,this._env=Ht,this._registered=[hv,B_],this.setCurrent(hv)}get current(){return this._current}}class Vx{constructor(Mt,zt,Ht){this.svg=Mt.closest("svg"),this.g=document.createElementNS(As,"g"),this.g.setAttribute("class","a9s-crosshair");const Ut=document.createElementNS(As,"line"),Qt=document.createElementNS(As,"line");this.g.appendChild(Ut),this.g.appendChild(Qt),Mt.appendChild(this.g);const hn=xn=>{const $n=this.svg.getBoundingClientRect(),Mn=xn.clientX-$n.x,On=xn.clientY-$n.y,ur=this.svg.createSVGPoint(),{left:Sr,top:Pr}=this.svg.getBoundingClientRect();return ur.x=Mn+Sr,ur.y=On+Pr,ur.matrixTransform(Mt.getScreenCTM().inverse())};this.svg.addEventListener("mousemove",xn=>{const{x:$n,y:Mn}=hn(xn);Ut.setAttribute("x1",0),Ut.setAttribute("y1",Mn),Ut.setAttribute("x2",zt),Ut.setAttribute("y2",Mn),Qt.setAttribute("x1",$n),Qt.setAttribute("y1",0),Qt.setAttribute("x2",$n),Qt.setAttribute("y2",Ht)})}}const Ux={FragmentSelector:I_,SvgSelector:Bb},Gx={FragmentSelector:Tx,SvgSelector:Rx},zb=Pt=>{const Mt=Pt.targets[0];if(Mt)return Array.isArray(Mt.selector)?Mt.selector[0]:Mt.selector},F_=(Pt,Mt)=>Ux[zb(Pt).type](Pt,Mt),Hb=(Pt,Mt)=>Gx[zb(Pt).type](Pt,Mt);function Wx(Pt,Mt,zt,Ht,Ut){jb(Pt,Mt,zt||0,Ht||Pt.length-1,Ut||qx)}function jb(Pt,Mt,zt,Ht,Ut){for(;Ht>zt;){if(Ht-zt>600){var Qt=Ht-zt+1,hn=Mt-zt+1,xn=Math.log(Qt),$n=.5*Math.exp(2*xn/3),Mn=.5*Math.sqrt(xn*$n*(Qt-$n)/Qt)*(hn-Qt/2<0?-1:1),On=Math.max(zt,Math.floor(Mt-hn*$n/Qt+Mn)),ur=Math.min(Ht,Math.floor(Mt+(Qt-hn)*$n/Qt+Mn));jb(Pt,Mt,On,ur,Ut)}var Sr=Pt[Mt],Pr=zt,Wr=Ht;for(d1(Pt,zt,Mt),Ut(Pt[Ht],Sr)>0&&d1(Pt,zt,Ht);Pr<Wr;){for(d1(Pt,Pr,Wr),Pr++,Wr--;Ut(Pt[Pr],Sr)<0;)Pr++;for(;Ut(Pt[Wr],Sr)>0;)Wr--}Ut(Pt[zt],Sr)===0?d1(Pt,zt,Wr):(Wr++,d1(Pt,Wr,Ht)),Wr<=Mt&&(zt=Wr+1),Mt<=Wr&&(Ht=Wr-1)}}function d1(Pt,Mt,zt){var Ht=Pt[Mt];Pt[Mt]=Pt[zt],Pt[zt]=Ht}function qx(Pt,Mt){return Pt<Mt?-1:Pt>Mt?1:0}class Yx{constructor(Mt=9){this._maxEntries=Math.max(4,Mt),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(Mt){let zt=this.data;const Ht=[];if(!fv(Mt,zt))return Ht;const Ut=this.toBBox,Qt=[];for(;zt;){for(let hn=0;hn<zt.children.length;hn++){const xn=zt.children[hn],$n=zt.leaf?Ut(xn):xn;fv(Mt,$n)&&(zt.leaf?Ht.push(xn):H_(Mt,$n)?this._all(xn,Ht):Qt.push(xn))}zt=Qt.pop()}return Ht}collides(Mt){let zt=this.data;if(!fv(Mt,zt))return!1;const Ht=[];for(;zt;){for(let Ut=0;Ut<zt.children.length;Ut++){const Qt=zt.children[Ut],hn=zt.leaf?this.toBBox(Qt):Qt;if(fv(Mt,hn)){if(zt.leaf||H_(Mt,hn))return!0;Ht.push(Qt)}}zt=Ht.pop()}return!1}load(Mt){if(!(Mt&&Mt.length))return this;if(Mt.length<this._minEntries){for(let Ht=0;Ht<Mt.length;Ht++)this.insert(Mt[Ht]);return this}let zt=this._build(Mt.slice(),0,Mt.length-1,0);if(!this.data.children.length)this.data=zt;else if(this.data.height===zt.height)this._splitRoot(this.data,zt);else{if(this.data.height<zt.height){const Ht=this.data;this.data=zt,zt=Ht}this._insert(zt,this.data.height-zt.height-1,!0)}return this}insert(Mt){return Mt&&this._insert(Mt,this.data.height-1),this}clear(){return this.data=Pm([]),this}remove(Mt,zt){if(!Mt)return this;let Ht=this.data;const Ut=this.toBBox(Mt),Qt=[],hn=[];let xn,$n,Mn;for(;Ht||Qt.length;){if(Ht||(Ht=Qt.pop(),$n=Qt[Qt.length-1],xn=hn.pop(),Mn=!0),Ht.leaf){const On=Xx(Mt,Ht.children,zt);if(On!==-1)return Ht.children.splice(On,1),Qt.push(Ht),this._condense(Qt),this}!Mn&&!Ht.leaf&&H_(Ht,Ut)?(Qt.push(Ht),hn.push(xn),xn=0,$n=Ht,Ht=Ht.children[0]):$n?(xn++,Ht=$n.children[xn],Mn=!1):Ht=null}return this}toBBox(Mt){return Mt}compareMinX(Mt,zt){return Mt.minX-zt.minX}compareMinY(Mt,zt){return Mt.minY-zt.minY}toJSON(){return this.data}fromJSON(Mt){return this.data=Mt,this}_all(Mt,zt){const Ht=[];for(;Mt;)Mt.leaf?zt.push(...Mt.children):Ht.push(...Mt.children),Mt=Ht.pop();return zt}_build(Mt,zt,Ht,Ut){const Qt=Ht-zt+1;let hn=this._maxEntries,xn;if(Qt<=hn)return xn=Pm(Mt.slice(zt,Ht+1)),Lm(xn,this.toBBox),xn;Ut||(Ut=Math.ceil(Math.log(Qt)/Math.log(hn)),hn=Math.ceil(Qt/Math.pow(hn,Ut-1))),xn=Pm([]),xn.leaf=!1,xn.height=Ut;const $n=Math.ceil(Qt/hn),Mn=$n*Math.ceil(Math.sqrt(hn));Vb(Mt,zt,Ht,Mn,this.compareMinX);for(let On=zt;On<=Ht;On+=Mn){const ur=Math.min(On+Mn-1,Ht);Vb(Mt,On,ur,$n,this.compareMinY);for(let Sr=On;Sr<=ur;Sr+=$n){const Pr=Math.min(Sr+$n-1,ur);xn.children.push(this._build(Mt,Sr,Pr,Ut-1))}}return Lm(xn,this.toBBox),xn}_chooseSubtree(Mt,zt,Ht,Ut){for(;Ut.push(zt),!(zt.leaf||Ut.length-1===Ht);){let Qt=1/0,hn=1/0,xn;for(let $n=0;$n<zt.children.length;$n++){const Mn=zt.children[$n],On=z_(Mn),ur=Jx(Mt,Mn)-On;ur<hn?(hn=ur,Qt=On<Qt?On:Qt,xn=Mn):ur===hn&&On<Qt&&(Qt=On,xn=Mn)}zt=xn||zt.children[0]}return zt}_insert(Mt,zt,Ht){const Ut=Ht?Mt:this.toBBox(Mt),Qt=[],hn=this._chooseSubtree(Ut,this.data,zt,Qt);for(hn.children.push(Mt),p1(hn,Ut);zt>=0&&Qt[zt].children.length>this._maxEntries;)this._split(Qt,zt),zt--;this._adjustParentBBoxes(Ut,Qt,zt)}_split(Mt,zt){const Ht=Mt[zt],Ut=Ht.children.length,Qt=this._minEntries;this._chooseSplitAxis(Ht,Qt,Ut);const hn=this._chooseSplitIndex(Ht,Qt,Ut),xn=Pm(Ht.children.splice(hn,Ht.children.length-hn));xn.height=Ht.height,xn.leaf=Ht.leaf,Lm(Ht,this.toBBox),Lm(xn,this.toBBox),zt?Mt[zt-1].children.push(xn):this._splitRoot(Ht,xn)}_splitRoot(Mt,zt){this.data=Pm([Mt,zt]),this.data.height=Mt.height+1,this.data.leaf=!1,Lm(this.data,this.toBBox)}_chooseSplitIndex(Mt,zt,Ht){let Ut,Qt=1/0,hn=1/0;for(let xn=zt;xn<=Ht-zt;xn++){const $n=f1(Mt,0,xn,this.toBBox),Mn=f1(Mt,xn,Ht,this.toBBox),On=Qx($n,Mn),ur=z_($n)+z_(Mn);On<Qt?(Qt=On,Ut=xn,hn=ur<hn?ur:hn):On===Qt&&ur<hn&&(hn=ur,Ut=xn)}return Ut||Ht-zt}_chooseSplitAxis(Mt,zt,Ht){const Ut=Mt.leaf?this.compareMinX:Zx,Qt=Mt.leaf?this.compareMinY:Kx,hn=this._allDistMargin(Mt,zt,Ht,Ut),xn=this._allDistMargin(Mt,zt,Ht,Qt);hn<xn&&Mt.children.sort(Ut)}_allDistMargin(Mt,zt,Ht,Ut){Mt.children.sort(Ut);const Qt=this.toBBox,hn=f1(Mt,0,zt,Qt),xn=f1(Mt,Ht-zt,Ht,Qt);let $n=dv(hn)+dv(xn);for(let Mn=zt;Mn<Ht-zt;Mn++){const On=Mt.children[Mn];p1(hn,Mt.leaf?Qt(On):On),$n+=dv(hn)}for(let Mn=Ht-zt-1;Mn>=zt;Mn--){const On=Mt.children[Mn];p1(xn,Mt.leaf?Qt(On):On),$n+=dv(xn)}return $n}_adjustParentBBoxes(Mt,zt,Ht){for(let Ut=Ht;Ut>=0;Ut--)p1(zt[Ut],Mt)}_condense(Mt){for(let zt=Mt.length-1,Ht;zt>=0;zt--)Mt[zt].children.length===0?zt>0?(Ht=Mt[zt-1].children,Ht.splice(Ht.indexOf(Mt[zt]),1)):this.clear():Lm(Mt[zt],this.toBBox)}}function Xx(Pt,Mt,zt){if(!zt)return Mt.indexOf(Pt);for(let Ht=0;Ht<Mt.length;Ht++)if(zt(Pt,Mt[Ht]))return Ht;return-1}function Lm(Pt,Mt){f1(Pt,0,Pt.children.length,Mt,Pt)}function f1(Pt,Mt,zt,Ht,Ut){Ut||(Ut=Pm(null)),Ut.minX=1/0,Ut.minY=1/0,Ut.maxX=-1/0,Ut.maxY=-1/0;for(let Qt=Mt;Qt<zt;Qt++){const hn=Pt.children[Qt];p1(Ut,Pt.leaf?Ht(hn):hn)}return Ut}function p1(Pt,Mt){return Pt.minX=Math.min(Pt.minX,Mt.minX),Pt.minY=Math.min(Pt.minY,Mt.minY),Pt.maxX=Math.max(Pt.maxX,Mt.maxX),Pt.maxY=Math.max(Pt.maxY,Mt.maxY),Pt}function Zx(Pt,Mt){return Pt.minX-Mt.minX}function Kx(Pt,Mt){return Pt.minY-Mt.minY}function z_(Pt){return(Pt.maxX-Pt.minX)*(Pt.maxY-Pt.minY)}function dv(Pt){return Pt.maxX-Pt.minX+(Pt.maxY-Pt.minY)}function Jx(Pt,Mt){return(Math.max(Mt.maxX,Pt.maxX)-Math.min(Mt.minX,Pt.minX))*(Math.max(Mt.maxY,Pt.maxY)-Math.min(Mt.minY,Pt.minY))}function Qx(Pt,Mt){const zt=Math.max(Pt.minX,Mt.minX),Ht=Math.max(Pt.minY,Mt.minY),Ut=Math.min(Pt.maxX,Mt.maxX),Qt=Math.min(Pt.maxY,Mt.maxY);return Math.max(0,Ut-zt)*Math.max(0,Qt-Ht)}function H_(Pt,Mt){return Pt.minX<=Mt.minX&&Pt.minY<=Mt.minY&&Mt.maxX<=Pt.maxX&&Mt.maxY<=Pt.maxY}function fv(Pt,Mt){return Mt.minX<=Pt.maxX&&Mt.minY<=Pt.maxY&&Mt.maxX>=Pt.minX&&Mt.maxY>=Pt.minY}function Pm(Pt){return{children:Pt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Vb(Pt,Mt,zt,Ht,Ut){const Qt=[Mt,zt];for(;Qt.length;){if(zt=Qt.pop(),Mt=Qt.pop(),zt-Mt<=Ht)continue;const hn=Mt+Math.ceil((zt-Mt)/Ht/2)*Ht;Wx(Pt,hn,Mt,zt,Ut),Qt.push(Mt,hn,hn,zt)}}const Ub=Pt=>{const Mt=F_(Pt),zt=document.createElementNS(As,"svg");zt.style.position="absolute",zt.style.opacity=0,zt.style.top=0,zt.style.left=0,zt.appendChild(Mt),document.body.appendChild(zt);const{x:Ht,y:Ut,width:Qt,height:hn}=Mt.getBBox();return document.body.removeChild(zt),{minX:Ht,minY:Ut,maxX:Ht+Qt,maxY:Ut+hn}};class ew{constructor(Mt){Bt(this,"getAnnotationAt",(zt,Ht,Ut)=>{const Qt=Ut?5/Ut:5,hn=this.spatial_index.search({minX:zt-Qt,minY:Ht-Qt,maxX:zt+Qt,maxY:Ht+Qt}).map(xn=>xn.annotation);if(hn.length>0)return hn.sort((xn,$n)=>Hb(xn,this.env.image)-Hb($n,this.env.image)),hn[0]}),Bt(this,"getAnnotationsIntersecting",zt=>this.spatial_index.search(zt).map(Ht=>Ht.annotation)),Bt(this,"insert",zt=>{(Array.isArray(zt)?zt:[zt]).forEach(Ht=>{this.spatial_index.insert(Rt(It({},Ub(Ht)),{annotation:Ht}))})}),Bt(this,"remove",zt=>{const Ht=Rt(It({},Ub(zt)),{annotation:zt});this.spatial_index.remove(Ht,(Ut,Qt)=>Ut.annotation.id===Qt.annotation.id)}),this.env=Mt,this.spatial_index=new Yx}}const tw=(Pt,Mt)=>{const zt=L_(Mt,".a9s-annotation")?Mt:Mt.querySelector(".a9s-annotation"),{canvas:Ht}=Pt.drawer,Ut=Ht.getBoundingClientRect(),Qt=Ht.width/Ut.width,hn=Ht.height/Ut.height,xn=zt.getBoundingClientRect(),$n=xn.x-Ut.x,Mn=xn.y-Ut.y,{width:On,height:ur}=xn,Sr=document.createElement("CANVAS"),Pr=Sr.getContext("2d");Sr.width=On,Sr.height=ur,Pr.drawImage(Ht,$n*Qt,Mn*hn,On*Qt,ur*hn,0,0,On,ur);const Wr=Pt.viewport.viewportToImageCoordinates(xn.x,xn.y),ai=Pt.viewport.viewportToImageZoom(Pt.viewport.getZoom());return{snippet:Sr,transform:oi=>{const _i=Wr.x+oi[0]/Qt/ai,Oi=Wr.y+oi[1]/hn/ai;return[_i,Oi]}}},nw=$_();class Gb extends Wa{constructor(Mt){super(),Bt(this,"_getShapeAt",Ht=>{const Ut=$n=>{const Mn=this.svg.createSVGPoint();if(window.TouchEvent&&$n instanceof TouchEvent){const On=this.svg.getBoundingClientRect(),ur=$n.touches[0],Sr=ur.clientX-On.x,Pr=ur.clientY-On.y,{left:Wr,top:ai}=this.svg.getBoundingClientRect();return Mn.x=Sr+Wr,Mn.y=Pr+ai,Mn.matrixTransform(this.g.getScreenCTM().inverse())}else return Mn.x=$n.offsetX,Mn.y=$n.offsetY,Mn.matrixTransform(this.g.getCTM().inverse())},{x:Qt,y:hn}=Ut(Ht),xn=this.store.getAnnotationAt(Qt,hn,this.currentScale());if(xn)return this.findShape(xn)}),Bt(this,"_initDrawingTools",Ht=>{this.tools=new jx(this.g,this.config,this.env),this.tools.on("complete",this.onDrawingComplete);let Ut=!1;this.mouseTracker=new Zt.default.MouseTracker({element:this.svg,pressHandler:Qt=>{this.tools.current.isDrawing||(this.tools.current.start(Qt.originalEvent,this.drawOnSingleClick&&!this.hoveredShape),Ht||this.scaleTool(this.tools.current))},moveHandler:Qt=>{if(this.tools.current.isDrawing){const{x:hn,y:xn}=this.tools.current.getSVGPoint(Qt.originalEvent);this.tools.current.onMouseMove(hn,xn,Qt.originalEvent),Ut||(this.emit("startSelection",{x:hn,y:xn}),Ut=!0)}},releaseHandler:Qt=>{if(this.tools.current.isDrawing){const{x:hn,y:xn}=this.tools.current.getSVGPoint(Qt.originalEvent);this.tools.current.onMouseUp(hn,xn,Qt.originalEvent)}Ut=!1}}).setTracking(!1),this.onKeyDown&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyUp&&document.removeEventListener("keydown",this.onKeyDown),this.onKeyDown=Qt=>{Qt.which===16&&!this.selectedShape&&this.mouseTracker.setTracking(!this.readOnly)},this.onKeyUp=Qt=>{Qt.which===16&&!this.tools.current.isDrawing&&this.mouseTracker.setTracking(!1)},document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)}),Bt(this,"_initMouseEvents",()=>{let Ht=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom;this.svg.addEventListener("mousemove",hn=>{var xn,$n;if(!((xn=this.tools)!=null&&xn.current.isDrawing)&&!hn.target.closest(".a9s-annotation.editable.selected")){const Mn=this._getShapeAt(hn);if((Mn==null?void 0:Mn.annotation)!==(($n=this.hoveredShape)==null?void 0:$n.annotation)){if(this.hoveredShape){this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=Ht;const On=this.hoveredShape.element||this.hoveredShape;Ex(On,"hover"),this.emit("mouseLeaveAnnotation",this.hoveredShape.annotation,this.hoveredShape)}Mn&&(Ht=this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom,this.viewer.gestureSettingsByDeviceType("mouse").clickToZoom=!1,ip(Mn,"hover"),this.emit("mouseEnterAnnotation",Mn.annotation,Mn))}this.hoveredShape=Mn}});let Ut=null;new Zt.default.MouseTracker({element:this.viewer.canvas,pressHandler:()=>{Ut=new Date().getTime()}}),this.svg.addEventListener("mousedown",()=>{Ut=new Date().getTime()});const Qt=hn=>{var xn;if(!(((xn=this.tools.current)==null?void 0:xn.isDrawing)||this.disableSelect)&&new Date().getTime()-Ut<250){const $n=hn.target.closest(".a9s-annotation.editable.selected")?this.selectedShape:this._getShapeAt(hn);$n?this.selectShape($n):$n||(this.deselect(),this.emit("select",{}))}this.disableSelect&&this.emit("clickAnnotation",this.hoveredShape.annotation,this.hoveredShape)};this.svg.addEventListener("click",Qt),this.svg.addEventListener("touchstart",Qt)}),Bt(this,"_refreshNonScalingAnnotations",()=>{const Ht=this.currentScale();Array.from(this.svg.querySelectorAll(".a9s-non-scaling")).forEach(Ut=>Ut.setAttribute("transform",`scale(${1/Ht})`))}),Bt(this,"addAnnotation",(Ht,Ut)=>{const Qt=Ut||this.g,hn=F_(Ht,this.env.image);return ip(hn,"a9s-annotation"),hn.setAttribute("data-id",Ht.id),hn.annotation=Ht,Qt.appendChild(hn),uv(hn,Ht,this.formatter),this.scaleFormatterElements(hn),hn}),Bt(this,"addDrawingTool",Ht=>this.tools.registerTool(Ht)),Bt(this,"addOrUpdateAnnotation",(Ht,Ut)=>{var Qt,hn;(((Qt=this.selectedShape)==null?void 0:Qt.annotation)===Ht||((hn=this.selectedShape)==null?void 0:hn.annotation)==Ut)&&this.deselect(),Ut&&this.removeAnnotation(Ht),this.removeAnnotation(Ht);const xn=this.addAnnotation(Ht);L_(xn,"a9s-non-scaling")&&xn.setAttribute("transform",`scale(${1/this.currentScale()})`),this.store.insert(Ht)}),Bt(this,"currentScale",()=>{const Ht=this.viewer.viewport.getContainerSize().x;return this.viewer.viewport.getZoom(!0)*Ht/this.viewer.world.getContentFactor()}),Bt(this,"deselect",()=>{var Ht;if((Ht=this.tools)==null||Ht.current.stop(),this.selectedShape){const{annotation:Ut}=this.selectedShape;if(this.selectedShape.destroy&&(this.selectedShape.mouseTracker.destroy(),this.selectedShape.destroy(),!Ut.isSelection)){const Qt=this.addAnnotation(Ut);L_(Qt,"a9s-non-scaling")&&Qt.setAttribute("transform",`scale(${1/this.currentScale()})`)}this.selectedShape=null}}),Bt(this,"destroy",()=>{this.deselect(),this.svg.parentNode.removeChild(this.svg)}),Bt(this,"findShape",Ht=>{const Ut=Ht!=null&&Ht.id?Ht.id:Ht;return this.g.querySelector(`.a9s-annotation[data-id="${Ut}"]`)}),Bt(this,"fitBounds",(Ht,Ut)=>{const Qt=this.findShape(Ht);if(Qt){const{x:hn,y:xn,width:$n,height:Mn}=Qt.getBBox(),On=this.viewer.viewport.imageToViewportRectangle(hn,xn,$n,Mn);this.viewer.viewport.fitBounds(On,Ut)}}),Bt(this,"getAnnotations",()=>Array.from(this.g.querySelectorAll(".a9s-annotation")).map(Ht=>Ht.annotation)),Bt(this,"getSelectedImageSnippet",()=>{var Ht;if(this.selectedShape){const Ut=(Ht=this.selectedShape.element)!=null?Ht:this.selectedShape;return tw(this.viewer,Ut)}}),Bt(this,"init",Ht=>{this.deselect(),Array.from(this.g.querySelectorAll(".a9s-annotation")).forEach(Ut=>this.g.removeChild(Ut)),console.time("Took"),console.log("Drawing..."),this.loaded||(this.g.style.display="none"),Ht.forEach(Ut=>this.addAnnotation(Ut)),console.log("Indexing..."),this.store.insert(Ht),console.timeEnd("Took"),this.resize()}),Bt(this,"listDrawingTools",()=>this.tools.listTools()),Bt(this,"overrideId",(Ht,Ut)=>{const Qt=this.findShape(Ht);Qt.setAttribute("data-id",Ut);const{annotation:hn}=Qt,xn=hn.clone({id:Ut});return Qt.annotation=xn,this.store.remove(hn),this.store.insert(xn),xn}),Bt(this,"panTo",(Ht,Ut)=>{const Qt=this.findShape(Ht);if(Qt){const{top:hn,left:xn,width:$n,height:Mn}=Qt.getBoundingClientRect(),On=xn+$n/2+window.scrollX,ur=hn+Mn/2+window.scrollY,Sr=this.viewer.viewport.windowToViewportCoordinates(new Zt.default.Point(On,ur));this.viewer.viewport.panTo(Sr,Ut)}}),Bt(this,"removeAnnotation",Ht=>{var Ut,Qt;const hn=Ht.type?Ht.id:Ht;((Ut=this.selectedShape)==null?void 0:Ut.annotation.id)===hn&&this.deselect();const xn=this.findShape(Ht);if(xn){const{annotation:$n}=xn;((Qt=this.selectedShape)==null?void 0:Qt.annotation)===$n&&this.deselect(),xn.parentNode.removeChild(xn),this.store.remove($n)}}),Bt(this,"removeDrawingTool",Ht=>{var Ut;return(Ut=this.tools)==null?void 0:Ut.unregisterTool(Ht)}),Bt(this,"scaleFormatterElements",Ht=>{const Ut=1/this.currentScale();if(Ht){const Qt=Ht.querySelector(".a9s-formatter-el");Qt&&Qt.firstChild.setAttribute("transform",`scale(${Ut})`)}else Array.from(this.g.querySelectorAll(".a9s-formatter-el")).forEach(Qt=>Qt.firstChild.setAttribute("transform",`scale(${Ut})`))}),Bt(this,"scaleTool",Ht=>{if(Ht){const Ut=1/this.currentScale();Ht.scale=Ut,Ht.onScaleChanged&&Ht.onScaleChanged(Ut)}}),Bt(this,"selectAnnotation",(Ht,Ut)=>{this.selectedShape&&this.deselect();const Qt=this.findShape(Ht);if(Qt){this.selectShape(Qt,Ut);const hn=this.selectedShape.element?this.selectedShape.element:this.selectedShape;return{annotation:Qt.annotation,element:hn}}else this.deselect()}),Bt(this,"selectShape",(Ht,Ut)=>{var Qt;if(!Ut&&!Ht.annotation.isSelection&&this.emit("clickAnnotation",Ht.annotation,Ht),((Qt=this.selectedShape)==null?void 0:Qt.annotation)===Ht.annotation)return;this.selectedShape&&this.selectedShape.annotation!==Ht.annotation&&this.deselect();const{annotation:hn}=Ht;if(this.readOnly||hn.readOnly||this.headless)this.selectedShape=Ht,Ut||this.emit("select",{annotation:hn,element:Ht,skipEvent:Ut});else{const xn=this.tools.forAnnotation(hn);if(xn){setTimeout(()=>{Ht.parentNode.removeChild(Ht),Ut||this.emit("select",{annotation:hn,element:this.selectedShape.element})},1),this.selectedShape=xn.createEditableShape(hn),this.scaleTool(this.selectedShape),this.scaleFormatterElements(this.selectedShape.element),this.selectedShape.element.annotation=hn;const $n=new Zt.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",()=>{this.hoveredShape=this.selectedShape,$n.setTracking(!0)}),this.selectedShape.element.addEventListener("mouseleave",()=>{this.hoveredShape=null,$n.setTracking(!1)}),this.selectedShape.mouseTracker=$n,this.selectedShape.on("update",Mn=>this.emit("updateTarget",this.selectedShape.element,Mn))}else this.selectedShape=Ht,Ut||this.emit("select",{annotation:hn,element:this.selectedShape})}}),Bt(this,"setDrawingEnabled",Ht=>{var Ut;return(Ut=this.mouseTracker)==null?void 0:Ut.setTracking(Ht&&!this.readOnly)}),Bt(this,"setDrawingTool",Ht=>{var Ut;this.tools&&((Ut=this.tools.current)==null||Ut.stop(),this.tools.setCurrent(Ht))}),Bt(this,"setVisible",Ht=>{Ht?this.svg.style.display=null:(this.deselect(),this.svg.style.display="none")}),Bt(this,"stopDrawing",()=>{var Ht,Ut;return(Ut=(Ht=this.tools)==null?void 0:Ht.current)==null?void 0:Ut.stop()}),this.viewer=Mt.viewer,this.config=Mt.config,this.env=Mt.env,this.readOnly=Mt.config.readOnly,this.headless=Mt.config.headless,this.formatter=Mt.config.formatter,this.disableSelect=Mt.disableSelect,this.drawOnSingleClick=Mt.config.drawOnSingleClick,this.svg=document.createElementNS(As,"svg"),nw?(this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer touch"),Lx(this.svg)):this.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer"),this.g=document.createElementNS(As,"g"),this.svg.appendChild(this.g),this.viewer.canvas.appendChild(this.svg),this.viewer.addHandler("animation",()=>this.resize()),this.viewer.addHandler("rotate",()=>this.resize()),this.viewer.addHandler("resize",()=>this.resize()),this.viewer.addHandler("flip",()=>this.resize()),this.loaded=!1;const zt=()=>{const{x:Ht,y:Ut}=this.viewer.world.getItemAt(0).source.dimensions;this.env.image={src:this.viewer.world.getItemAt(0).source["@id"]||new URL(this.viewer.world.getItemAt(0).source.url,document.baseURI).href,naturalWidth:Ht,naturalHeight:Ut},Mt.config.crosshair&&(this.crosshair=new Vx(this.g,Ht,Ut),ip(this.svg,"has-crosshair")),this.loaded=!0,this.g.style.display="inline",this.resize()};this.viewer.addHandler("open",zt),this.viewer.world.addHandler("add-item",zt),this.viewer.world.getItemAt(0)&&zt(),this.store=new ew(this.env),this.selectedShape=null,this.hoveredShape=null,this._initMouseEvents()}resize(){var Mt;const zt=this.viewer.viewport.getFlip(),Ht=this.viewer.viewport.pixelFromPoint(new Zt.default.Point(0,0),!0);zt&&(Ht.x=this.viewer.viewport._containerInnerSize.x-Ht.x);const Ut=this.currentScale(),Qt=zt?-Ut:Ut,hn=this.viewer.viewport.getRotation();this.g.setAttribute("transform",`translate(${Ht.x}, ${Ht.y}) scale(${Qt}, ${Ut}) rotate(${hn})`),this._refreshNonScalingAnnotations(),this.scaleFormatterElements(),this.selectedShape&&(this.selectedShape.element?(this.scaleTool(this.selectedShape),this.emit("viewportChange",this.selectedShape.element)):this.emit("viewportChange",this.selectedShape)),(Mt=this.tools)!=null&&Mt.current.isDrawing&&this.scaleTool(this.tools.current)}}class rw extends Gb{constructor(Mt){super(Mt),Bt(this,"onDrawingComplete",zt=>{this.selectShape(zt),this.emit("createSelection",zt.annotation),this.mouseTracker.setTracking(!1)}),this._initDrawingTools()}}const j_=Pt=>{const Mt=Pt.viewport.viewportToImageRectangle(Pt.viewport.getBounds(!0)),zt=Pt.viewport.getContainerSize().x,Ht=Pt.viewport.getZoom(!0)*zt/Pt.world.getContentFactor();return{extent:Mt,scale:Ht}},iw=Pt=>{var Mt;const zt=Pt.targets[0];return zt?Array.isArray(zt.selector)?zt.selector[0].type:(Mt=zt.selector)==null?void 0:Mt.type:null},Wb=(Pt,Mt)=>{const{extent:zt,scale:Ht}=j_(Pt),{selector:Ut}=Mt,Qt=dg.create({target:Mt});if(Ut.type==="SvgSelector"){const hn=Am(Qt),xn=hn.nodeName.toLowerCase();let $n=null;if(xn==="polygon")$n=ow(hn,zt,Ht);else if(xn==="circle")$n=sw(hn,zt,Ht);else if(xn==="ellipse")$n=aw(hn,zt,Ht);else if(xn==="path")$n=lw(hn,zt,Ht);else throw`Unsupported SVG shape type: ${xn}`;let Mn=$n.outerHTML||new XMLSerializer().serializeToString($n);return Mn=Mn.replace(` xmlns="${As}"`,""),Rt(It({},Mt),{selector:{type:"SvgSelector",value:`<svg>${Mn}</svg>`}})}else if(Ut.type==="FragmentSelector"){const{x:hn,y:xn,w:$n,h:Mn}=fg(Qt),On=zt.x+hn/Ht,ur=zt.y+xn/Ht,Sr=$n/Ht,Pr=Mn/Ht;return h1(On,ur,Sr,Pr)}else throw`Unsupported selector type: ${Ut.type}`},ow=(Pt,Mt,zt)=>{const Ht=Array.from(Pt.points).map(Ut=>{const Qt=Mt.x+Ut.x/zt,hn=Mt.y+Ut.y/zt;return Qt+","+hn}).join(" ");return Pt.setAttribute("points",Ht),Pt},sw=(Pt,Mt,zt)=>{const Ht=parseFloat(Pt.getAttribute("cx")),Ut=parseFloat(Pt.getAttribute("cy")),Qt=parseFloat(Pt.getAttribute("r"));return Pt.setAttribute("cx",Mt.x+Ht/zt),Pt.setAttribute("cy",Mt.y+Ut/zt),Pt.setAttribute("r",Qt/zt),Pt},aw=(Pt,Mt,zt)=>{const Ht=parseFloat(Pt.getAttribute("cx")),Ut=parseFloat(Pt.getAttribute("cy")),Qt=parseFloat(Pt.getAttribute("rx")),hn=parseFloat(Pt.getAttribute("ry"));return Pt.setAttribute("cx",Mt.x+Ht/zt),Pt.setAttribute("cy",Mt.y+Ut/zt),Pt.setAttribute("rx",Qt/zt),Pt.setAttribute("ry",hn/zt),Pt},lw=(Pt,Mt,zt)=>{const Ht=Pt.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Qt=Ut.substring(0,1);if(Qt.toLowerCase()==="z")return Qt;{const hn=Ut.substring(1).split(" ").map(On=>parseFloat(On.trim())),xn=Qt===Qt.toUpperCase(),$n=xn?Mt.x+hn[0]/zt:hn[0]/zt,Mn=xn?Mt.y+hn[1]/zt:hn[1]/zt;return Qt+" "+$n+" "+Mn}}).join(" ");return Pt.setAttribute("d",Ht),Pt},qb=(Pt,Mt)=>{const{extent:zt,scale:Ht}=j_(Pt),Ut=Mt.selector("FragmentSelector");if(Mt.selector("SvgSelector")){const Qt=Am(Mt),hn=Qt.nodeName.toLowerCase();let xn=null;if(hn==="polygon")xn=cw(Qt,zt,Ht);else if(hn==="circle")xn=uw(Qt,zt,Ht);else if(hn==="ellipse")xn=hw(Qt,zt,Ht);else if(hn==="path")xn=dw(Qt,zt,Ht);else throw`Unsupported SVG shape type: ${hn}`;let $n=xn.outerHTML||new XMLSerializer().serializeToString(xn);$n=$n.replace(` xmlns="${As}"`,"");const Mn={selector:{type:"SvgSelector",value:`<svg>${$n}</svg>`}};return Mt.clone({target:Mn})}else if(Ut){const{x:Qt,y:hn,w:xn,h:$n}=fg(Mt),Mn=(Qt-zt.x)*Ht,On=(hn-zt.y)*Ht,ur=h1(Mn,On,xn*Ht,$n*Ht);return Mt.clone({target:ur})}},cw=(Pt,Mt,zt)=>{const Ht=Array.from(Pt.points).map(Ut=>{const Qt=zt*(Ut.x-Mt.x),hn=zt*(Ut.y-Mt.y);return Qt+","+hn}).join(" ");return Pt.setAttribute("points",Ht),Pt},uw=(Pt,Mt,zt)=>{const Ht=Pt.getAttribute("cx"),Ut=Pt.getAttribute("cy"),Qt=Pt.getAttribute("r");return Pt.setAttribute("cx",zt*(Ht-Mt.x)),Pt.setAttribute("cy",zt*(Ut-Mt.y)),Pt.setAttribute("r",Qt*zt),Pt},hw=(Pt,Mt,zt)=>{const Ht=Pt.getAttribute("cx"),Ut=Pt.getAttribute("cy"),Qt=Pt.getAttribute("rx"),hn=Pt.getAttribute("ry");return Pt.setAttribute("cx",zt*(Ht-Mt.x)),Pt.setAttribute("cy",zt*(Ut-Mt.y)),Pt.setAttribute("rx",Qt*zt),Pt.setAttribute("ry",hn*zt),Pt},dw=(Pt,Mt,zt)=>{const Ht=Pt.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Ut=>Ut.trim()).map(Ut=>{const Qt=Ut.substring(0,1);if(Qt.toLowerCase()==="z")return Qt;{const hn=Ut.substring(1).split(" ").filter(On=>On).map(On=>parseFloat(On.trim())),xn=Qt===Qt.toUpperCase(),$n=xn?zt*(hn[0]-Mt.x):zt*hn[0],Mn=xn?zt*(hn[1]-Mt.y):zt*hn[1];return Qt+" "+$n+" "+Mn}}).join(" ");return Pt.setAttribute("d",Ht),Pt},Yb=(Pt,Mt)=>{const{extent:zt,scale:Ht}=j_(Pt),Ut=iw(Mt.annotation);if(Ut==="FragmentSelector")fw(Mt,zt,Ht);else if(Ut==="SvgSelector")pw(Mt,zt,Ht);else throw`Unsupported selector type type: ${Ut}`},fw=(Pt,Mt,zt)=>{const{x:Ht,y:Ut,w:Qt,h:hn}=fg(Pt.annotation),xn=Pt.querySelector(".a9s-outer"),$n=Pt.querySelector(".a9s-inner"),Mn=zt*(Ht-Mt.x),On=zt*(Ut-Mt.y);Qt===0&&hn===0?[xn,$n].forEach(ur=>{ur.setAttribute("cx",Mn),ur.setAttribute("cy",On)}):[xn,$n].forEach(ur=>{ur.setAttribute("x",Mn),ur.setAttribute("y",On),ur.setAttribute("width",Qt*zt),ur.setAttribute("height",hn*zt)})},pw=(Pt,Mt,zt)=>{const Ht=Am(Pt.annotation),Ut=Ht.nodeName.toLowerCase();if(Ut==="polygon")gw(Pt,Ht,Mt,zt);else if(Ut==="circle")mw(Pt,Ht,Mt,zt);else if(Ut==="ellipse")yw(Pt,Ht,Mt,zt);else if(Ut==="path")vw(Pt,Ht,Mt,zt);else throw`Unsupported SVG shape type: ${Ut}`},gw=(Pt,Mt,zt,Ht)=>{const Ut=Array.from(Mt.points).map(Qt=>{const hn=Ht*(Qt.x-zt.x),xn=Ht*(Qt.y-zt.y);return hn+","+xn}).join(" ");Pt.querySelector(".a9s-outer").setAttribute("points",Ut),Pt.querySelector(".a9s-inner").setAttribute("points",Ut)},mw=(Pt,Mt,zt,Ht)=>{const Ut=Ht*(Mt.getAttribute("cx")-zt.x),Qt=Ht*(Mt.getAttribute("cy")-zt.y),hn=Ht*Mt.getAttribute("r"),xn=Pt.querySelector(".a9s-outer");xn.setAttribute("cx",Ut),xn.setAttribute("cy",Qt),xn.setAttribute("r",hn);const $n=Pt.querySelector(".a9s-inner");$n.setAttribute("cx",Ut),$n.setAttribute("cy",Qt),$n.setAttribute("r",hn)},yw=(Pt,Mt,zt,Ht)=>{const Ut=Ht*(Mt.getAttribute("cx")-zt.x),Qt=Ht*(Mt.getAttribute("cy")-zt.y),hn=Ht*Mt.getAttribute("rx"),xn=Ht*Mt.getAttribute("ry"),$n=Pt.querySelector(".a9s-outer");$n.setAttribute("cx",Ut),$n.setAttribute("cy",Qt),$n.setAttribute("rx",hn),$n.setAttribute("ry",xn);const Mn=Pt.querySelector(".a9s-inner");Mn.setAttribute("cx",Ut),Mn.setAttribute("cy",Qt),Mn.setAttribute("rx",hn),Mn.setAttribute("ry",xn)},vw=(Pt,Mt,zt,Ht)=>{const Ut=Mt.getAttribute("d").split(/(?=M|m|L|l|H|h|V|v|Z|z)/g).map(Qt=>Qt.trim()).map(Qt=>{const hn=Qt.substring(0,1);if(hn.toLowerCase()==="z")return hn;{const xn=Qt.substring(1).split(" ").filter(ur=>ur).map(ur=>parseFloat(ur.trim())),$n=hn===hn.toUpperCase(),Mn=$n?Ht*(xn[0]-zt.x):Ht*xn[0],On=$n?Ht*(xn[1]-zt.y):Ht*xn[1];return hn+" "+Mn+" "+On}}).join(" ");Pt.querySelector(".a9s-inner").setAttribute("d",Ut),Pt.querySelector(".a9s-outer").setAttribute("d",Ut)},_w=$_();class bw extends Gb{constructor(Mt){super(Mt),Bt(this,"onDrawingComplete",zt=>{const Ht=zt.annotation.clone({target:Wb(this.viewer,zt.annotation.target)});zt.annotation=Ht,this.selectShape(zt),this.emit("createSelection",zt.annotation),this.mouseTracker.setTracking(!1)}),Bt(this,"addAnnotation",(zt,Ht)=>{const Ut=Ht||this.g,Qt=F_(zt,this.env.image);return ip(Qt,"a9s-annotation"),Qt.setAttribute("data-id",zt.id),Qt.annotation=zt,Yb(this.viewer,Qt),Ut.appendChild(Qt),uv(Qt,zt,this.formatter),Qt}),Bt(this,"_getShapeAt",zt=>{const Ht=$n=>{if(_w){const Mn=this.svg.getBoundingClientRect(),On=$n.clientX-Mn.x,ur=$n.clientY-Mn.y;return new Zt.default.Point(On,ur)}else return new Zt.default.Point($n.offsetX,$n.offsetY)},Ut=this.viewer.viewport.viewerElementToViewportCoordinates(Ht(zt)),{x:Qt,y:hn}=this.viewer.viewport.viewportToImageCoordinates(Ut.x,Ut.y),xn=this.store.getAnnotationAt(Qt,hn,this.currentScale());if(xn)return this.findShape(xn)}),Bt(this,"selectShape",(zt,Ht)=>{var Ut;if(!Ht&&!zt.annotation.isSelection&&this.emit("clickAnnotation",zt.annotation,zt),((Ut=this.selectedShape)==null?void 0:Ut.annotation)===zt.annotation)return;this.selectedShape&&this.selectedShape.annotation!==zt.annotation&&this.deselect(!0);const{annotation:Qt}=zt;if(this.readOnly||Qt.readOnly||this.headless)this.selectedShape=zt,Ht||this.emit("select",{annotation:Qt,element:zt,skipEvent:Ht});else{setTimeout(()=>{zt.parentNode.removeChild(zt),Ht||this.emit("select",{annotation:Qt,element:this.selectedShape.element})},1);const hn=this.tools.forAnnotation(Qt);this.selectedShape=hn.createEditableShape(Qt),this.selectedShape.element.annotation=Qt;const xn=qb(this.viewer,Qt);this.selectedShape.updateState(xn);const $n=new Zt.default.MouseTracker({element:this.svg}).setTracking(!0);this.selectedShape.element.addEventListener("mouseenter",Mn=>$n.setTracking(!0)),this.selectedShape.element.addEventListener("mouseleave",Mn=>$n.setTracking(!1)),this.selectedShape.mouseTracker=$n,this.selectedShape.on("update",Mn=>{const On=Wb(this.viewer,Mn);this.selectedShape.element.annotation=this.selectedShape.annotation.clone({target:On}),this.emit("updateTarget",this.selectedShape.element,On)})}}),this._initDrawingTools(!0)}resize(){const Mt=this.viewer.viewport.getBounds(!0),{x:zt,y:Ht,width:Ut,height:Qt}=this.viewer.viewport.viewportToImageRectangle(Mt),hn={minX:zt,minY:Ht,maxX:zt+Ut,maxY:Ht+Qt},xn=new Set(this.store.getAnnotationsIntersecting(hn).map($n=>$n.id));if(xn.size>0&&Array.from(this.g.querySelectorAll(".a9s-annotation:not(.selected)")).forEach($n=>{xn.has($n.annotation.id)?($n.removeAttribute("visibility"),Yb(this.viewer,$n)):$n.hasAttribute("visibility")||$n.setAttribute("visibility","hidden")}),this.selectedShape)if(this.selectedShape.element){const $n=qb(this.viewer,this.selectedShape.element.annotation);this.selectedShape.updateState&&this.selectedShape.updateState($n),this.emit("viewportChange",this.selectedShape.element)}else this.emit("viewportChange",this.selectedShape)}}class xw extends dn{constructor(Mt){super(Mt),Bt(this,"clearState",zt=>this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,beforeHeadlessModify:null},zt)),Bt(this,"forwardEvent",(zt,Ht)=>{this.annotationLayer.on(zt,(Ut,Qt)=>{this.props[Ht](Ut.clone(),Qt)})}),Bt(this,"escapeKeyCancel",zt=>{if(zt.which===27){this.annotationLayer.stopDrawing();const{selectedAnnotation:Ht}=this.state;Ht&&(this.cancelSelected(),this.props.onCancelSelected(Ht))}}),Bt(this,"handleStartSelect",zt=>this.props.onSelectionStarted(zt)),Bt(this,"handleSelect",(zt,Ht)=>{this.state.editorDisabled?this.onHeadlessSelect(zt,Ht):this.onNormalSelect(zt,Ht)}),Bt(this,"onNormalSelect",(zt,Ht)=>{const{annotation:Ut,element:Qt}=zt;if(Ut){const hn=()=>{this.setState({selectedAnnotation:Ut,selectedDOMElement:Qt,modifiedTarget:null},()=>{Ht||(Ut.isSelection?this.props.onSelectionCreated(Ut.clone()):this.props.onAnnotationSelected(Ut.clone(),Qt))})},{selectedAnnotation:xn}=this.state;xn&&!xn.isEqual(Ut)?this.clearState(()=>{this.props.onCancelSelected(xn),hn()}):hn()}else{const{selectedAnnotation:hn}=this.state;hn?this.clearState(()=>this.props.onCancelSelected(hn)):this.clearState()}}),Bt(this,"onHeadlessSelect",(zt,Ht)=>{this.saveSelected().then(()=>{this.onNormalSelect(zt,Ht)})}),Bt(this,"handleUpdateTarget",(zt,Ht)=>{this.setState({selectedDOMElement:zt,modifiedTarget:Ht});const Ut=JSON.parse(JSON.stringify(Ht));this.props.onSelectionTargetChanged(Ut)}),Bt(this,"handleViewportChange",zt=>this.setState({selectedDOMElement:zt})),Bt(this,"overrideAnnotationId",zt=>Ht=>{const{id:Ut}=zt;this.state.selectedAnnotation?this.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null},()=>{this.annotationLayer.overrideId(Ut,Ht)}):this.annotationLayer.overrideId(Ut,Ht)}),Bt(this,"onCreateOrUpdateAnnotation",(zt,Ht)=>(Ut,Qt)=>{let hn=Ut.isSelection?Ut.toAnnotation():Ut;hn=this.state.modifiedTarget?hn.clone({target:this.state.modifiedTarget}):hn.clone(),this.clearState(()=>{this.annotationLayer.deselect(),this.annotationLayer.addOrUpdateAnnotation(hn,Qt),Qt?this.props[zt](hn,Qt.clone()):this.props[zt](hn,this.overrideAnnotationId(Ut)),Ht&&Ht()})}),Bt(this,"onDeleteAnnotation",zt=>{this.clearState(),this.annotationLayer.removeAnnotation(zt),this.props.onAnnotationDeleted(zt)}),Bt(this,"onCancelAnnotation",(zt,Ht)=>{this.state.editorDisabled||this.annotationLayer.deselect(),this.props.onCancelSelected(zt),this.clearState(Ht)}),Bt(this,"addAnnotation",zt=>{var Ht;zt.id===((Ht=this.state.selectedAnnotation)==null?void 0:Ht.id)&&(this.annotationLayer.deselect(),this.clearState()),this.annotationLayer.addOrUpdateAnnotation(zt.clone())}),Bt(this,"addDrawingTool",zt=>this.annotationLayer.addDrawingTool(zt)),Bt(this,"cancelSelected",()=>new Promise(zt=>{this.annotationLayer.deselect(),this.state.selectedAnnotation?this.clearState(zt):zt()})),Bt(this,"fitBounds",(zt,Ht)=>this.annotationLayer.fitBounds(zt,Ht)),Bt(this,"getAnnotationById",zt=>{var Ht;return(Ht=this.annotationLayer.findShape(zt))==null?void 0:Ht.annotation}),Bt(this,"getAnnotations",()=>this.annotationLayer.getAnnotations().map(zt=>zt.clone())),Bt(this,"getSelected",()=>{var zt;if(this.state.selectedAnnotation)return this.state.editorDisabled?this.state.selectedAnnotation:(zt=this._editor.current)==null?void 0:zt.getCurrentAnnotation()}),Bt(this,"getSelectedImageSnippet",()=>this.annotationLayer.getSelectedImageSnippet()),Bt(this,"listDrawingTools",()=>this.annotationLayer.listDrawingTools()),Bt(this,"panTo",(zt,Ht)=>this.annotationLayer.panTo(zt,Ht)),Bt(this,"removeAnnotation",zt=>this.annotationLayer.removeAnnotation(zt)),Bt(this,"removeDrawingTool",zt=>this.annotationLayer.removeDrawingTool(zt)),Bt(this,"saveSelected",()=>new Promise(zt=>{const Ht=this.state.selectedAnnotation;if(Ht)if(Ht.isSelection)Ht.bodies.length>0||this.props.config.allowEmpty?this.onCreateOrUpdateAnnotation("onAnnotationCreated",zt)(Ht,Ht):(this.annotationLayer.deselect(),zt());else{const{beforeHeadlessModify:Ut,modifiedTarget:Qt}=this.state;Ut?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",zt)(Ht,Ut):Qt?this.onCreateOrUpdateAnnotation("onAnnotationUpdated",zt)(Ht,Ht):this.onCancelAnnotation(Ht,zt)}else zt()})),Bt(this,"selectAnnotation",zt=>{const Ht=this.annotationLayer.selectAnnotation(zt,!0);if(Ht)return this.handleSelect(Ht,!0),Ht.annotation.clone();this.clearState()}),Bt(this,"setAnnotations",zt=>this.annotationLayer.init(zt.map(Ht=>Ht.clone()))),Bt(this,"setDrawingEnabled",zt=>this.annotationLayer.setDrawingEnabled(zt)),Bt(this,"setDrawingTool",zt=>this.annotationLayer.setDrawingTool(zt)),Bt(this,"setVisible",zt=>{this.annotationLayer.setVisible(zt),zt||this.clearState()}),Bt(this,"updateSelected",(zt,Ht)=>new Promise(Ut=>{this.state.selectedAnnotation&&(Ht?this.state.selectedAnnotation.isSelection?this.onCreateOrUpdateAnnotation("onAnnotationCreated",Ut)(zt):this.onCreateOrUpdateAnnotation("onAnnotationUpdated",Ut)(zt,this.state.selectedAnnotation):this.setState({selectedAnnotation:zt,beforeHeadlessModify:this.state.beforeHeadlessModify||this.state.selectedAnnotation},Ut))})),this.state={selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,readOnly:Mt.config.readOnly,editorDisabled:Mt.config.disableEditor,widgets:Mt.config.widgets,beforeHeadlessModify:null},this._editor=Ii.createRef()}componentDidMount(){this.annotationLayer=this.props.config.gigapixelMode?new bw(this.props):new rw(this.props),this.annotationLayer.on("startSelection",this.handleStartSelect),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget),this.annotationLayer.on("viewportChange",this.handleViewportChange),this.forwardEvent("mouseEnterAnnotation","onMouseEnterAnnotation"),this.forwardEvent("mouseLeaveAnnotation","onMouseLeaveAnnotation"),this.forwardEvent("clickAnnotation","onClickAnnotation"),document.addEventListener("keyup",this.escapeKeyCancel)}componentWillUnmount(){this.annotationLayer.destroy(),document.removeEventListener("keyup",this.escapeKeyCancel)}get disableEditor(){return this.state.editorDisabled}set disableEditor(Mt){this.setState({editorDisabled:Mt},()=>{Mt?document.addEventListener("keyup",this.escapeKeyCancel):document.removeEventListener("keyup",this.escapeKeyCancel)})}get disableSelect(){return this.annotationLayer.disableSelect}set disableSelect(Mt){this.annotationLayer.disableSelect=Mt}get readOnly(){return this.state.readOnly}set readOnly(Mt){this.annotationLayer.readOnly=Mt,this.setState({readOnly:Mt})}get widgets(){return this.state.widgets}set widgets(Mt){this.setState({widgets:Mt})}render(){var Mt;const zt=this.state.selectedAnnotation&&!this.state.editorDisabled,Ht=this.state.readOnly||((Mt=this.state.selectedAnnotation)==null?void 0:Mt.readOnly);return zt&&cn(px,{ref:this._editor,detachable:!0,wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,modifiedTarget:this.state.modifiedTarget,selectedElement:this.state.selectedDOMElement,readOnly:Ht,allowEmpty:this.props.config.allowEmpty,widgets:this.state.widgets,env:this.props.env,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation})}}class ww{constructor(Mt,zt){Bt(this,"handleAnnotationCreated",(Ut,Qt)=>this._emitter.emit("createAnnotation",Ut.underlying,Qt)),Bt(this,"handleAnnotationDeleted",Ut=>this._emitter.emit("deleteAnnotation",Ut.underlying)),Bt(this,"handleAnnotationSelected",(Ut,Qt)=>this._emitter.emit("selectAnnotation",Ut.underlying,Qt)),Bt(this,"handleAnnotationUpdated",(Ut,Qt)=>this._emitter.emit("updateAnnotation",Ut.underlying,Qt.underlying)),Bt(this,"handleCancelSelected",Ut=>this._emitter.emit("cancelSelected",Ut.underlying)),Bt(this,"handleClickAnnotation",(Ut,Qt)=>this._emitter.emit("clickAnnotation",Ut.underlying,Qt)),Bt(this,"handleSelectionCreated",Ut=>this._emitter.emit("createSelection",Ut.underlying)),Bt(this,"handleSelectionStarted",Ut=>this._emitter.emit("startSelection",Ut)),Bt(this,"handleSelectionTargetChanged",Ut=>this._emitter.emit("changeSelectionTarget",Ut)),Bt(this,"handleMouseEnterAnnotation",(Ut,Qt)=>this._emitter.emit("mouseEnterAnnotation",Ut.underlying,Qt)),Bt(this,"handleMouseLeaveAnnotation",(Ut,Qt)=>this._emitter.emit("mouseLeaveAnnotation",Ut.underlying,Qt)),Bt(this,"_wrap",Ut=>(Ut==null?void 0:Ut.type)==="Annotation"?new dg(Ut):Ut),Bt(this,"addAnnotation",Ut=>this._app.current.addAnnotation(new dg(Ut))),Bt(this,"addDrawingTool",Ut=>this._app.current.addDrawingTool(Ut)),Bt(this,"cancelSelected",()=>this._app.current.cancelSelected()),Bt(this,"clearAnnotations",()=>this.setAnnotations([])),Bt(this,"clearAuthInfo",()=>this._env.user=null),Bt(this,"destroy",()=>Ii.unmountComponentAtNode(this.appContainerEl)),Bt(this,"fitBounds",(Ut,Qt)=>this._app.current.fitBounds(this._wrap(Ut),Qt)),Bt(this,"getAnnotationById",Ut=>{const Qt=this._app.current.getAnnotationById(Ut);return Qt==null?void 0:Qt.underlying}),Bt(this,"getAnnotations",()=>this._app.current.getAnnotations().map(Ut=>Ut.underlying)),Bt(this,"getSelected",()=>{const Ut=this._app.current.getSelected();return Ut==null?void 0:Ut.underlying}),Bt(this,"getSelectedImageSnippet",()=>this._app.current.getSelectedImageSnippet()),Bt(this,"listDrawingTools",()=>this._app.current.listDrawingTools()),Bt(this,"loadAnnotations",Ut=>fetch(Ut).then(Qt=>Qt.json()).then(Qt=>(this.setAnnotations(Qt),Qt))),Bt(this,"off",(Ut,Qt)=>this._emitter.off(Ut,Qt)),Bt(this,"on",(Ut,Qt)=>this._emitter.on(Ut,Qt)),Bt(this,"once",(Ut,Qt)=>this._emitter.once(Ut,Qt)),Bt(this,"panTo",(Ut,Qt)=>this._app.current.panTo(this._wrap(Ut),Qt)),Bt(this,"removeAnnotation",Ut=>this._app.current.removeAnnotation(this._wrap(Ut))),Bt(this,"removeDrawingTool",Ut=>this._app.current.removeDrawingTool(Ut)),Bt(this,"saveSelected",()=>this._app.current.saveSelected()),Bt(this,"selectAnnotation",Ut=>{const Qt=this._app.current.selectAnnotation(this._wrap(Ut));return Qt==null?void 0:Qt.underlying}),Bt(this,"setAnnotations",Ut=>{const Qt=(Ut||[]).map(hn=>new dg(hn));this._app.current.setAnnotations(Qt)}),Bt(this,"setAuthInfo",Ut=>this._env.user=Ut),Bt(this,"setDrawingEnabled",Ut=>this._app.current.setDrawingEnabled(Ut)),Bt(this,"setDrawingTool",Ut=>this._app.current.setDrawingTool(Ut)),Bt(this,"setServerTime",Ut=>this._env.setServerTime(Ut)),Bt(this,"setVisible",Ut=>this._app.current.setVisible(Ut)),Bt(this,"updateSelected",(Ut,Qt)=>{let hn=null;Ut.type==="Annotation"?hn=new dg(Ut):Ut.type==="Selection"&&(hn=new u1(Ut.target,Ut.body)),hn&&this._app.current.updateSelected(hn,Qt)});const Ht=zt||{};this._app=Ii.createRef(),this._emitter=new Wa,this._env=xx(),this._element=Mt.element,window.getComputedStyle(this._element).getPropertyValue("position")==="static"&&(this._element.style.position="relative"),wx(Ht.locale,Ht.messages),this.appContainerEl=document.createElement("DIV"),this._element.appendChild(this.appContainerEl),Ii.render(cn(xw,{ref:this._app,viewer:Mt,wrapperEl:this._element,config:Ht,env:this._env,onSelectionStarted:this.handleSelectionStarted,onSelectionCreated:this.handleSelectionCreated,onSelectionTargetChanged:this.handleSelectionTargetChanged,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onCancelSelected:this.handleCancelSelected,onClickAnnotation:this.handleClickAnnotation,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}get disableEditor(){return this._app.current.disableEditor}set disableEditor(Mt){this._app.current.disableEditor=Mt}get disableSelect(){return this._app.current.disableSelect}set disableSelect(Mt){this._app.current.disableSelect=Mt}get readOnly(){return this._app.current.readOnly}set readOnly(Mt){this._app.current.readOnly=Mt}get widgets(){return this._app.current.widgets}set widgets(Mt){this._app.current.widgets=Mt}}var Ew=(Pt,Mt)=>new ww(Pt,Mt);return Ew})})(openseadragonAnnotorious_min);const Annotorious=getDefaultExportFromCjs(openseadragonAnnotorious_min.exports);class Annotator{constructor(rt,it="",st=!0){lc(this,"ghClient");lc(this,"osd");lc(this,"base");lc(this,"acct");lc(this,"repo");lc(this,"ref","main");lc(this,"basePath");lc(this,"imageId","");lc(this,"sha","");lc(this,"annotorious");lc(this,"visible",!1);lc(this,"ghAuthToken","");lc(this,"selected",null);this.osd=rt,this.base=it;let[_t,xt,...Et]=this.base.split("/");this.acct=_t,this.repo=xt,this.basePath=Et.join("/"),this.annotorious=Annotorious(rt,{readOnly:!st}),this.annotorious.on("createAnnotation",async kt=>this.createAnnotation(kt)),this.annotorious.on("updateAnnotation",async kt=>this.updateAnnotation(kt)),this.annotorious.on("deleteAnnotation",async kt=>this.deleteAnnotation(kt)),this.annotorious.on("selectAnnotation",async kt=>this.onSelect(kt)),this.setVisible(!0),this.ghAuthToken=localStorage.getItem("gh-auth-token")||"",this.ghAuthToken&&(this.ghClient=new GithubClient(this.ghAuthToken))}async loadAnnotations(rt){this.imageId=rt,this.setVisible(!1);let it=[],st=await this.ghClient.getFile(this.acct,this.repo,`${this.basePath}/${this.imageId}.json`,this.ref);return st.content&&(it=JSON.parse(st.content),this.sha=st.sha),console.log(`Adding ${it.length} annotations`),this.annotorious.setAnnotations(it),this.annotorious.readOnly&&it.forEach(_t=>{let xt=this.annoEl(_t.id);xt&&(xt.addEventListener("mouseenter",()=>this.select(_t.id)),xt.addEventListener("mouseleave",()=>this.deselect()),xt.addEventListener("click",()=>navigator.clipboard.writeText(_t.id)))}),it}setVisible(rt){if(this.selected)this.deselect();else{this.visible=rt;let it=this.osd.element.querySelector(".a9s-annotationlayer");it&&(it.style.visibility=this.visible?"visible":"hidden"),Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(st=>st.style.visibility=this.visible?"visible":"hidden")}}toggleVisibility(rt){rt&&rt.stopPropagation(),this.setVisible(!this.visible)}onSelect(rt){this.selected=rt.id,navigator.clipboard&&navigator.clipboard.writeText(this.selected)}annoEl(rt){return this.osd.element.querySelector(`[data-id="${rt}"]`)}select(rt){var it;if(rt!==((it=this.selected)==null?void 0:it.id)){if(this.deselect(),this.selected=this.annotorious.selectAnnotation(rt),this.selected){let st=this.annoEl(rt);st&&(st.style.visibility="visible")}}else this.deselect()}deselect(){Array.from(this.osd.element.querySelectorAll(".a9s-annotation")).forEach(rt=>rt.style.visibility=this.visible?"visible":"hidden"),this.annotorious.selectAnnotation(),this.selected=void 0}async saveAnnotations(){let rt=JSON.stringify(this.annotorious.getAnnotations(),null,2),it=await this.ghClient.putFile(this.acct,this.repo,`${this.basePath}/${this.imageId}.json`,rt,this.ref,!1,this.sha);console.log(it)}async createAnnotation(rt){rt.id=sha256(rt.id).slice(0,8),rt.target.id=this.imageId}async updateAnnotation(rt){rt.target.id=this.imageId,this.saveAnnotations()}async deleteAnnotation(rt){this.saveAnnotations()}}var badge_styles_default=i$7`
  :host {
    display: inline-flex;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: max(12px, 0.75em);
    font-weight: var(--sl-font-weight-semibold);
    letter-spacing: var(--sl-letter-spacing-normal);
    line-height: 1;
    border-radius: var(--sl-border-radius-small);
    border: solid 1px var(--sl-color-neutral-0);
    white-space: nowrap;
    padding: 0.35em 0.6em;
    user-select: none;
    -webkit-user-select: none;
    cursor: inherit;
  }

  /* Variant modifiers */
  .badge--primary {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--success {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--neutral {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--warning {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--danger {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /* Pill modifier */
  .badge--pill {
    border-radius: var(--sl-border-radius-pill);
  }

  /* Pulse modifier */
  .badge--pulse {
    animation: pulse 1.5s infinite;
  }

  .badge--pulse.badge--primary {
    --pulse-color: var(--sl-color-primary-600);
  }

  .badge--pulse.badge--success {
    --pulse-color: var(--sl-color-success-600);
  }

  .badge--pulse.badge--neutral {
    --pulse-color: var(--sl-color-neutral-600);
  }

  .badge--pulse.badge--warning {
    --pulse-color: var(--sl-color-warning-600);
  }

  .badge--pulse.badge--danger {
    --pulse-color: var(--sl-color-danger-600);
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--pulse-color);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }
`,SlBadge=class extends ShoelaceElement{constructor(){super(...arguments),this.variant="primary",this.pill=!1,this.pulse=!1}render(){return x$1`
      <span
        part="base"
        class=${e$1({badge:!0,"badge--primary":this.variant==="primary","badge--success":this.variant==="success","badge--neutral":this.variant==="neutral","badge--warning":this.variant==="warning","badge--danger":this.variant==="danger","badge--pill":this.pill,"badge--pulse":this.pulse})}
        role="status"
      >
        <slot></slot>
      </span>
    `}};SlBadge.styles=[component_styles_default,badge_styles_default];__decorateClass([n$4({reflect:!0})],SlBadge.prototype,"variant",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlBadge.prototype,"pill",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlBadge.prototype,"pulse",2);SlBadge.define("sl-badge");var image_comparer_styles_default=i$7`
  :host {
    --divider-width: 2px;
    --handle-size: 2.5rem;

    display: inline-block;
    position: relative;
  }

  .image-comparer {
    max-width: 100%;
    max-height: 100%;
    overflow: hidden;
  }

  .image-comparer__before,
  .image-comparer__after {
    display: block;
    pointer-events: none;
  }

  .image-comparer__before::slotted(img),
  .image-comparer__after::slotted(img),
  .image-comparer__before::slotted(svg),
  .image-comparer__after::slotted(svg) {
    display: block;
    max-width: 100% !important;
    height: auto;
  }

  .image-comparer__after {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
  }

  .image-comparer__divider {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    width: var(--divider-width);
    height: 100%;
    background-color: var(--sl-color-neutral-0);
    translate: calc(var(--divider-width) / -2);
    cursor: ew-resize;
  }

  .image-comparer__handle {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: calc(50% - (var(--handle-size) / 2));
    width: var(--handle-size);
    height: var(--handle-size);
    background-color: var(--sl-color-neutral-0);
    border-radius: var(--sl-border-radius-circle);
    font-size: calc(var(--handle-size) * 0.5);
    color: var(--sl-color-neutral-700);
    cursor: inherit;
    z-index: 10;
  }

  .image-comparer__handle:focus-visible {
    outline: var(--sl-focus-ring);
    outline-offset: var(--sl-focus-ring-offset);
  }
`;function drag(nt,rt){function it(_t){const xt=nt.getBoundingClientRect(),Et=nt.ownerDocument.defaultView,kt=xt.left+Et.scrollX,Lt=xt.top+Et.scrollY,It=_t.pageX-kt,Rt=_t.pageY-Lt;rt!=null&&rt.onMove&&rt.onMove(It,Rt)}function st(){document.removeEventListener("pointermove",it),document.removeEventListener("pointerup",st),rt!=null&&rt.onStop&&rt.onStop()}document.addEventListener("pointermove",it,{passive:!0}),document.addEventListener("pointerup",st),(rt==null?void 0:rt.initialEvent)instanceof PointerEvent&&it(rt.initialEvent)}function clamp(nt,rt,it){const st=_t=>Object.is(_t,-0)?0:_t;return nt<rt?st(rt):nt>it?st(it):st(nt)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const n="important",i$1=" !"+n,o=e$2(class extends i$3{constructor(nt){var rt;if(super(nt),nt.type!==t.ATTRIBUTE||nt.name!=="style"||((rt=nt.strings)==null?void 0:rt.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(nt){return Object.keys(nt).reduce((rt,it)=>{const st=nt[it];return st==null?rt:rt+`${it=it.includes("-")?it:it.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${st};`},"")}update(nt,[rt]){const{style:it}=nt.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(rt)),this.render(rt);for(const st of this.ft)rt[st]==null&&(this.ft.delete(st),st.includes("-")?it.removeProperty(st):it[st]=null);for(const st in rt){const _t=rt[st];if(_t!=null){this.ft.add(st);const xt=typeof _t=="string"&&_t.endsWith(i$1);st.includes("-")||xt?it.setProperty(st,xt?_t.slice(0,-11):_t,xt?n:""):it[st]=_t}}return T}});var SlImageComparer=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.position=50}handleDrag(nt){const{width:rt}=this.base.getBoundingClientRect(),it=this.localize.dir()==="rtl";nt.preventDefault(),drag(this.base,{onMove:st=>{this.position=parseFloat(clamp(st/rt*100,0,100).toFixed(2)),it&&(this.position=100-this.position)},initialEvent:nt})}handleKeyDown(nt){const rt=this.localize.dir()==="ltr",it=this.localize.dir()==="rtl";if(["ArrowLeft","ArrowRight","Home","End"].includes(nt.key)){const st=nt.shiftKey?10:1;let _t=this.position;nt.preventDefault(),(rt&&nt.key==="ArrowLeft"||it&&nt.key==="ArrowRight")&&(_t-=st),(rt&&nt.key==="ArrowRight"||it&&nt.key==="ArrowLeft")&&(_t+=st),nt.key==="Home"&&(_t=0),nt.key==="End"&&(_t=100),_t=clamp(_t,0,100),this.position=_t}}handlePositionChange(){this.emit("sl-change")}render(){const nt=this.localize.dir()==="rtl";return x$1`
      <div
        part="base"
        id="image-comparer"
        class=${e$1({"image-comparer":!0,"image-comparer--rtl":nt})}
        @keydown=${this.handleKeyDown}
      >
        <div class="image-comparer__image">
          <div part="before" class="image-comparer__before">
            <slot name="before"></slot>
          </div>

          <div
            part="after"
            class="image-comparer__after"
            style=${o({clipPath:nt?`inset(0 0 0 ${100-this.position}%)`:`inset(0 ${100-this.position}% 0 0)`})}
          >
            <slot name="after"></slot>
          </div>
        </div>

        <div
          part="divider"
          class="image-comparer__divider"
          style=${o({left:nt?`${100-this.position}%`:`${this.position}%`})}
          @mousedown=${this.handleDrag}
          @touchstart=${this.handleDrag}
        >
          <div
            part="handle"
            class="image-comparer__handle"
            role="scrollbar"
            aria-valuenow=${this.position}
            aria-valuemin="0"
            aria-valuemax="100"
            aria-controls="image-comparer"
            tabindex="0"
          >
            <slot name="handle">
              <sl-icon library="system" name="grip-vertical"></sl-icon>
            </slot>
          </div>
        </div>
      </div>
    `}};SlImageComparer.styles=[component_styles_default,image_comparer_styles_default];SlImageComparer.scopedElement={"sl-icon":SlIcon};__decorateClass([e$4(".image-comparer")],SlImageComparer.prototype,"base",2);__decorateClass([e$4(".image-comparer__handle")],SlImageComparer.prototype,"handle",2);__decorateClass([n$4({type:Number,reflect:!0})],SlImageComparer.prototype,"position",2);__decorateClass([watch("position",{waitUntilFirstUpdate:!0})],SlImageComparer.prototype,"handlePositionChange",1);SlImageComparer.define("sl-image-comparer");SlPopup.define("sl-popup");const _hoisted_1$b=["draggable"],_hoisted_2$8={id:"content"},_hoisted_3$7={key:0,class:"image-wrapper media-item"},_hoisted_4$6=["src"],_hoisted_5$6={key:2,id:"osd"},_hoisted_6$3={key:1},_hoisted_7$2=["draggable","onDragstart"],_hoisted_8$2=["data-id","src","onClick"],_hoisted_9$1=["src","onClick"],_hoisted_10={key:2},_hoisted_11=["slot","src","alt"],_hoisted_12={key:3,class:"media-item"},_hoisted_13={id:"html5-player",controls:""},_hoisted_14=["src","type"],_hoisted_15={key:4,class:"media-item"},_hoisted_16={key:0,id:"youtube-placeholder"},_hoisted_17={key:1,id:"ve-video-vimeo","data-vimeo-playsinline":"true"},_hoisted_18=["muted","autoplay","poster"],_hoisted_19=["src","type"],_hoisted_20=["innerHTML"],_hoisted_21=["innerHTML"],_sfc_main$e=defineComponent({__name:"MediaViewer.ce",props:{manifest:{type:String},src:{type:String},seq:{type:Number,default:1},annoBase:{type:String},base:{type:String},region:{type:String},size:{type:String},rotation:{type:String},quality:{type:String},format:{type:String},options:{type:String},alt:{type:String},caption:{type:String},fit:{type:String},entities:{type:String},zoomOnScroll:{type:Boolean},noCaption:{type:Boolean},noInfoIcon:{type:Boolean},editable:{type:Boolean},static:{type:Boolean},grid:{type:Boolean},cards:{type:Boolean},compare:{type:Boolean},small:{type:Boolean},position:{type:String},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean},width:{type:String},height:{type:String},autoplay:{type:Boolean,default:!1},muted:{type:Boolean,default:!0},start:{type:Number},end:{type:Number},poster:{type:String},class:{type:String}},setup(nt){function rt(Ir,Hr){var Gr;Hr.stopPropagation();let ri=`https://iiif.juncture-digital.org/?manifest=${Ir.id}`;(Gr=Hr.dataTransfer)==null||Gr.setData("text/uri-list",ri)}const it=nt,st=ref(null),_t=computed(()=>{var Ir;return(Ir=st==null?void 0:st.value)==null?void 0:Ir.parentNode}),xt=computed(()=>{var Ir,Hr;return(Hr=(Ir=st.value)==null?void 0:Ir.getRootNode())==null?void 0:Hr.host}),Et=computed(()=>{var Ir;return(Ir=_t.value)==null?void 0:Ir.querySelector("#content")}),kt=computed(()=>{var Ir;return(Ir=_t.value)==null?void 0:Ir.querySelector("#outer")}),Lt=computed(()=>{var Ir;return(Ir=_t.value)==null?void 0:Ir.querySelector("#inner")}),It=ref([]);onMounted(()=>Bt());const Rt=it.position||(isMobile()?"full":it.right?"right":it.left?"left":"full");function Nt(Ir=16/9){it.sticky&&(makeSticky(xt.value),Lt.value.style.paddingTop="6px",kt.value.style.paddingBottom="6px"),hr.value=ar.value?Number((ar.value.width/ar.value.height).toFixed(4)):Ir,xt.value.classList.add("ve-component"),xt.value.classList.add(Rt),Rt==="full"||(xt.value.style.float=Rt,xt.value.style.width="calc(50% - 12px)"),xt.value.style.width=window.getComputedStyle(xt.value).width,Et.value&&(Lt.value.style.width=isMobile()?"100%":it.width||"100%"),nextTick(()=>{if(tr.value=parseInt(window.getComputedStyle(Et.value).width.slice(0,-2)),Et.value.style.width=`${tr.value}px`,Et.value.style.height=it.height||(Fr.value==="image-grid"?"":Fr.value==="audio"?"80px":`${Math.round((tr==null?void 0:tr.value)/hr.value)}px`),Jn.value=parseInt(window.getComputedStyle(Et.value).height.slice(0,-2)),it.sticky&&Rt==="full"&&!(it.width||it.height)){let Hr=Math.round(window.innerHeight*.4),ri=Math.ceil(Hr*hr.value);Fr.value==="image"&&(Et.value.style.height=`${Hr}px`),Fr.value!=="image-grid"&&Lt.value.classList.add("drop-shadow"),Lt.value.style.width=`${ri}px`}nextTick(()=>{tr.value=parseInt(window.getComputedStyle(Lt.value).width.slice(0,-2)),Jn.value=parseInt(window.getComputedStyle(Et.value).height.slice(0,-2))})})}function Bt(){var Ir;if(It.value=it.entities?it.entities.split(/\s+/).filter(Hr=>Hr):[],it.src)if(((Ir=it.src)==null?void 0:Ir.indexOf("http"))===0){let Hr=new URL(it.src),ri=Hr.hostname.replace(/^www\./,"");En.has(ri)?(Fr.value="video",ni=!0,_r.value=Hr.searchParams.get("v"),nextTick(()=>qi())):Un.has(ri)?(Fr.value="video",Ar=!0,_r.value=Hr.pathname.slice(1),nextTick(()=>uo())):lr.value=Vn()}else lr.value=Vn();else lr.value=Vn();nn()}function Ft(Ir){const Hr=Ir.target.parentElement;Hr&&(Hr.active=!Hr.active)}const Yt=ref();watch$1(Yt,()=>{if(Yt.value){let Ir=Yt.value;setTimeout(()=>Pn(),100),Ir.addHandler("viewport-change",()=>Cn()),(it.base||it.annoBase)&&(Jt.value=new Annotator(Ir,it.base||it.annoBase,ln.value));let Hr=Ir.world.getItemAt(0);Hr?(it.rotation&&Hr.setRotation(parseInt(it.rotation),!0),Hr.getFullyLoaded()?Wt():Hr.addHandler("fully-loaded-change",ri=>{ri.fullyLoaded&&Wt()})):Ir.world.addHandler("add-item",()=>{let ri=Ir.world.getItemAt(0);it.rotation&&ri.setRotation(parseInt(it.rotation),!0),ri.getFullyLoaded()?Wt():ri.addHandler("fully-loaded-change",Gr=>{Gr.fullyLoaded&&Wt()})})}});let Zt;function Wt(Ir){var Gr;let Hr=lr.value[0],ri=sha256(ar.value.id||ar.value["@id"]).slice(0,8);ri!==Zt&&(Jt.value&&Jt.value.loadAnnotations(ri).then(dr=>on.value=dr),!Zt&&Hr.seq===dn.value&&Hr.region&&((Gr=Yt.value)==null||Gr.viewport.fitBounds(parseRegionString(Hr.region,Yt.value),!0)),Zt=ri)}function Kt(Ir){return getItemInfo(Ir).format==="image/gif"}const Jt=ref(),on=ref([]),rn=ref(!1),ln=ref(window.location.pathname.split("/")[1]==="editor"||it.editable);function gn(){rn.value=!rn.value}watch$1(rn,()=>{var Hr;Jt.value.setVisible(rn.value);let Ir=(Hr=_t.value)==null?void 0:Hr.querySelector("#annotations-icon");ln.value&&rn.value?Ir==null||Ir.classList.add("editable"):Ir==null||Ir.classList.remove("editable")});const wn=ref();let kn=null;function Cn(){kn!==null&&(clearTimeout(kn),kn=null),kn=window.setTimeout(()=>Pn(),100)}function Pn(){var Hr,ri;const Ir=Yt&&((Hr=Yt.value)==null?void 0:Hr.world.getItemAt(0));if(Ir){let Gr=(ri=Yt.value)==null?void 0:ri.viewport.getBounds();const dr=Gr?Ir.viewportToImageRectangle(Gr):null;wn.value=dr?`${Math.ceil(dr.x)},${Math.ceil(dr.y)},${Math.ceil(dr.width)},${Math.ceil(dr.height)}`:""}}const An=ref();watch$1(_t,()=>{var Ir;An.value=(Ir=_t.value)==null?void 0:Ir.querySelector("#media-dialog")}),watch$1(An,Ir=>{Ir==null||Ir.addEventListener("sl-after-hide",()=>cn.value=null),Ir==null||Ir.addEventListener("sl-show",()=>{An.value&&(An.value.panel.style.width=isMobile()?"100%":`${an()}px`)})});const cn=ref();watch$1(cn,Ir=>{var Hr,ri;Ir?(Hr=An.value)==null||Hr.show():(ri=An.value)==null||ri.hide()});function Ln(Ir=null){cn.value=cn.value?null:Ir.src||Ir.id}function an(){var dr;let Ir=Math.round(window.innerWidth-100),Hr=Math.round(window.innerHeight-150),ri=((dr=cn.value)==null?void 0:dr.indexOf("http"))===0?cn.value:`https://iiif.juncture-digital.org/${cn.value}/manifest.json`,Gr=cr.value.find(ei=>decodeURIComponent(ei.id)===ri);if(Gr){let ei=getItemInfo(Gr),ti=Number((ei.width/ei.height).toFixed(4));Ir=ti>=1?Ir/ti>Hr?Ir=Hr*ti:Ir:Math.round(Hr*ti)}return Ir}const zn=ref(it.caption),dn=ref(it.seq),Fn=ref(it.seq);function ir(Ir){dn.value=Ir.detail}const tr=ref(0),Jn=ref(0),hr=ref(0),lr=ref([]),cr=ref([]),Cr=ref(null),Er=ref(null),ar=ref(null),Fr=ref(null),mr=ref(null),xr=computed(()=>Object.fromEntries(cr.value.map(Ir=>[sha256(decodeURIComponent(Ir.id)).slice(0,8),Ir])));watch$1(lr,()=>{let Ir=lr.value.filter(Hr=>Hr.iiif).map(Hr=>Hr.src);loadManifests(Ir).then(Hr=>{cr.value=Hr,it.grid?Fr.value="image-grid":cr.value.length>1&&(Fr.value=cr.value.length===2?"image-compare":"image-grid")})}),watch$1(cr,()=>{Cr.value=cr.value.length>0&&cr.value[0],Er.value=lr.value[0]}),watch$1(Cr,()=>{Fn.value=imageCount(Cr.value),ar.value=Cr.value?getItemInfo(Cr.value,dn.value):null}),watch$1(dn,()=>ar.value=Cr.value?getItemInfo(Cr.value,dn.value):null);const fr=ref([]),gr=computed(()=>{var Ir;return(Ir=ar.value)==null?void 0:Ir.id}),er=computed(()=>{var Hr;let Ir=(Hr=gr.value)==null?void 0:Hr.split("#")[0].split(".").pop();return Ir==="mp4"?"video/mp4":Ir==="webm"?"video/webm":"application/ogg"});watch$1(ar,()=>{var Ir,Hr;Fr.value=Fr.value||((Hr=(Ir=ar.value)==null?void 0:Ir.type)==null?void 0:Hr.split(":").pop().toLowerCase()),mr.value=(Fr==null?void 0:Fr.value.indexOf("image"))===0?ar.value.service?`${ar.value.service[0].id||ar.value.service[0]["@id"]}/info.json`:{url:ar.value.id,type:"image",buildPyramid:!0}:null,Yt.value&&Yt.value.open(mr.value),tr.value||nextTick(()=>Nt())}),watch$1(Fr,()=>{ii(),nextTick(()=>{Fr.value==="image"&&!Kt(Cr.value)&&!it.static?Hn():(Fr.value==="video"&&lr.value.length>0||Fr.value==="audio")&&Xi(),!zn.value&&Fr.value==="image"&&(zn.value=label(Cr.value))})}),watch$1(Jn,()=>{Fr.value==="image-compare"&&(fr.value=Wn())});function nn(){let Ir=xt.value.parentElement.querySelector("ve-media > ul, ve-media > span");if(Ir){const Hr=Gr=>{for(let dr of Gr)dr.type==="childList"||dr.type;lr.value=Vn()};new MutationObserver(Hr).observe(Ir,{childList:!0,subtree:!0,characterData:!0})}}const un=RegExp(/^(?<region>(pct:)?([0-9.]+,[0-9.]+,[0-9.]+,[0-9.]+)|full|square)(\/(?<size>full|max|((pct:)?[\d,.!]+)))?(\/(?<rotation>!?\d+))?(\/(?<quality>color|gray|bitonal|default))?(\/(?<format>jpg|tif|png|gif|jp2|pdf|webp))?/),pn=RegExp(/^(?<mirror>!?)(?<rotation>0|90|180|270){1}/);function Rn(Ir){return un.test(Ir)}function _n(Ir){return/^[0-9]+$/.test(Ir)}function or(Ir){return pn.test(Ir)}function Vn(){let Ir=[],Hr=it.manifest||it.src,ri=Array.from(xt.value.querySelectorAll("li"));if(!Hr&&ri.length===0&&It.value.length>0&&(Hr=`wd:${It.value[0]}`),Hr){let Gr={};Gr.src=Hr,Gr.src=Gr.src.indexOf("http")===0?Gr.src:`https://iiif.juncture-digital.org/${Gr.src}/manifest.json`,Gr.id=sha256(Gr.src).slice(0,8);let ei=new URL(Gr.src).hostname.replace(/^www\./,"");if(Gr.iiif=!En.has(ei)&&!Un.has(ei),it.options&&Rn(it.options)){let ti=it.options.match(un);ti&&(Gr={...Gr,...ti.groups})}Gr.seq=it.seq,Gr.region=it.region||Gr.region,Gr.size=it.size||Gr.size,Gr.rotation=it.rotation||Gr.rotation,Gr.quality=it.quality||Gr.quality,Gr.format=it.format||Gr.format,Gr.fit=it.fit,Ir.push(Gr)}else Ir=ri.map(Gr=>{var wo,_s;let dr=[],ei=(wo=Gr.textContent)==null?void 0:wo.replace(/“/,'"').replace(/”/,'"').replace(/’/,"'").trim();(_s=ei==null?void 0:ei.match(/[^\s"]+|"([^"]*)"/gmi))==null||_s.forEach(fs=>{dr.length>0&&dr[dr.length-1].indexOf("=")===dr[dr.length-1].length-1?dr[dr.length-1]=`${dr[dr.length-1]}${fs}`:dr.push(fs)});let ti={};dr.length>0&&(ti.src=dr[0].indexOf("http")===0?dr[0]:dr[0].indexOf("manifest")===0?`https://iiif.juncture-digital.org/${dr[0]}`:`https://iiif.juncture-digital.org/${dr[0]}/manifest.json`),ti.id=sha256(decodeURIComponent(ti.src)).slice(0,8);let Bi=new URL(ti.src),Oo=Bi.hostname.replace(/^www\./,"");En.has(Oo)?(ti.youtube=!0,ti.videoid=Bi.searchParams.get("v")):Un.has(Oo)?ti.vimeo=!0:ti.iiif=!0,ti.iiif=!En.has(Oo)&&!Un.has(Oo);for(let fs=1;fs<dr.length;fs++){let zi=dr[fs];if(zi.indexOf("=")>0){let Ps=zi.split("=");ti[Ps[0]]=Ps[1]}else if(_n(zi))ti.seq=zi;else if(Rn(zi)){let Ps=zi.match(un);Ps&&(ti={...ti,...Ps.groups})}else if(zi==="cover"||zi==="contain")ti.fit=zi;else if(or(zi)){let Ps=zi.match(pn);Ps&&(ti={...ti,...Ps.groups})}else zi==="mirror"?ti.mirror=!0:ti.caption=zi[0]==='"'&&zi[zi.length-1]==='"'?zi.slice(1,-1):zi}return ti});return Ir}function Wn(){let Ir=tr.value,Hr=Jn.value,ri=hr.value;return lr.value.map((Gr,dr)=>{let ei=getItemInfo(cr.value[dr],Gr.seq),ti,Bi,Oo,wo;Gr.region&&([ti,Bi,Oo,wo]=Gr.region.split(":").pop().split(",").map(br=>parseFloat(br)),Gr.region.split(":")[0]==="pct"&&(ti=Math.round(ti*ei.width/100),Bi=Math.round(Bi*ei.height/100),Oo=Math.round(Oo*ei.width/100),wo=Math.round(wo*ei.height/100)));const _s=Oo||ei.width,fs=wo||ei.height,zi=Number((_s/fs).toFixed(4));let Ps=_s,Da=fs;zi>ri?(Ps=Math.round(fs*ri),Da=Math.round(Ps/ri)):(Da=Math.round(_s/ri),Ps=Math.round(Da*ri));let Ga=ei.service[0].id||ei.service[0]["@id"];const Hi=(ti||0)+Math.abs(Math.round((Ps-_s)*.5)),Ji=(Bi||0)+Math.abs(Math.round((Da-fs)*.5));let xo=`${Hi},${Ji},${Ps},${Da}`;return`${Ga}/${xo}/${Ir},${Hr}/${Gr.mirror?"!":""}${Gr.rotation||0}/${Gr.quality||"default"}.${Gr.format||"jpg"}`})}function Hn(){Yt.value=nr(),sr(),mr.value&&Yt.value.open(mr.value)}function nr(){var Gr;const ri={element:((Gr=st.value)==null?void 0:Gr.parentNode).querySelector("#osd"),prefixUrl:"https://openseadragon.github.io/openseadragon/images/",homeFillsViewer:it.fit==="cover",showNavigationControl:!0,minZoomImageRatio:1,maxZoomPixelRatio:10,showRotationControl:!0,showHomeControl:!0,showZoomControl:!0,showFullPageControl:!0,showNavigator:!1,sequenceMode:!0,showReferenceStrip:!0,animationTime:.5,springStiffness:10,visibilityRatio:1,constrainDuringPan:!0};return openseadragonExports(ri)}function sr(){it.zoomOnScroll||new OpenSeadragonViewerInputHook({viewer:Yt.value,hooks:[{tracker:"viewer",handler:"scrollHandler",hookHandler:Ir=>{var Hr;return!((Hr=Yt.value)!=null&&Hr.isFullPage())&&!Ir.originalEvent.ctrlKey&&(Ir.preventDefaultAction=!0,Ir.stopHandlers=!0),!0}}]})}function pr(Ir){navigator.clipboard&&navigator.clipboard.writeText(Ir)}function vr(Ir){let Hr=Ir.name.toLowerCase(),ri=Ir.value;return(Hr==="enter"||Hr==="exit")&&ri.indexOf("|")>0&&([Hr,ri]=ri.split("|")),["zoom","zoomto"].indexOf(Hr.toLowerCase())===0||/^((pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?\|?([0-9a-f]{8})?$/.test(ri)}function kr(Ir){let Hr=Ir.name.toLowerCase(),ri=Ir.value;return(Hr==="enter"||Hr==="exit")&&ri.indexOf("|")>0&&([Hr,ri]=ri.split("|")),Hr.toLowerCase()==="play"||/^([0-9:]+)+,?([0-9:]+)?$/.test(ri)}function si(Ir){let Hr=Ir.name.toLowerCase(),ri=Ir.value.toLowerCase();return Hr==="pause"||ri==="pause"}const ui=new Set(["anno","play","start","zoomto"]);function ii(){Array.from(xt.value.querySelectorAll("[enter],[exit]")).forEach(Hr=>{li(Hr)&&Ei(Hr)});let Ir=xt.value.parentElement;for(;Ir.parentElement&&Ir.tagName!=="BODY";)Ir=Ir.parentElement;Array.from(Ir.querySelectorAll("mark, ve-trigger")).forEach(Hr=>{let ri=Array.from(Hr.attributes).find(Gr=>ui.has(Gr.name));ri&&li(Hr.parentElement)&&(Hr.classList.add(ri.name),Hr.addEventListener("click",()=>{(ri==null?void 0:ri.name)==="anno"?Tn(ri.value):(ri==null?void 0:ri.name)==="zoomto"?Lr(ri.value):(ri==null?void 0:ri.name)==="play"?wi(ri.value):Ci()}))})}function li(Ir){let Hr=Ir.previousSibling;for(;Hr;){if(Hr.nodeName==="VE-MEDIA")return Hr===xt.value?Hr:null;Hr=Hr.previousSibling}for(;Ir.parentElement&&Ir.tagName!=="MAIN";){Ir=Ir.parentElement;let ri=Ir.querySelector(":scope > ve-media, :scope > p > ve-media");if(ri)return ri===xt.value?ri:null}}function Ei(Ir){let Hr=Ir.classList.contains("active");new MutationObserver(Gr=>{Gr.forEach(dr=>{if(dr.attributeName=="class"){let ei=dr.target.classList.contains("active");if(Hr!==ei){Hr=ei;let ti=Ir.attributes.getNamedItem(ei?"enter":"exit");ti&&(Fr.value==="image"&&vr(ti)&&Lr(ti.value),Fr.value!=="image"&&(kr(ti)?wi(ti.value):si(ti)&&Ci()))}}})}).observe(Ir,{attributes:!0})}function wi(Ir){Ir=Ir.replace(/^play\|/i,"");const Hr=Ir.match(/^([0-9:]+)+,?([0-9:]+)?$/);Hr&&Ls(Hr[1],Hr[2])}function Ci(){zs()}function Lr(Ir){var ri,Gr,dr,ei;Ir=Ir.replace(/^zoomto\|/i,"");const Hr=Ir==null?void 0:Ir.match(/^(?<region>(pct:|pixel:|px:)?[\d.]+,[\d.]+,[\d.]+,[\d.]+)?,?(?<annoid>[0-9a-f]{8})?$/);if(Hr){let ti=(ri=Hr==null?void 0:Hr.groups)==null?void 0:ri.region,Bi=(Gr=Hr==null?void 0:Hr.groups)==null?void 0:Gr.annoid;Bi&&Jt.value.selected&&Jt.value.selected.id===Bi?(dr=Yt.value)==null||dr.viewport.goHome():ti&&((ei=Yt.value)==null||ei.viewport.fitBounds(parseRegionString(ti,Yt.value),!1)),Bi&&Jt.value.select(Bi)}}function Tn(Ir){var ri,Gr;const Hr=Ir==null?void 0:Ir.match(/^(?<annoid>[0-9a-f]{8})$/);if(Hr){let dr=(ri=Hr==null?void 0:Hr.groups)==null?void 0:ri.annoid;dr&&Jt.value.selected&&Jt.value.selected.id===dr?(Gr=Yt.value)==null||Gr.viewport.goHome():Jt.value.select(dr)}}const En=new Set(["youtube.com","youtube.co.uk","youtu.be"]),Un=new Set(["vimeo.com"]);let qn=null;const _r=ref(),Zr=ref(!0),yr=ref(!1);let ni=!1,Ar=!1,gi=!1,hi=null,Ti=!0,fi={};function Yi(){fi.value=Object.fromEntries(Array.from(xt.value.parentElement.querySelectorAll("p[data-start]")).map(Ir=>[ds(Ir.dataset.start||"0"),Ir]))}async function Si(Ir){let ri=`https://youtube.com/oembed?url=${encodeURI(`https://www.youtube.com/watch?v=${Ir}`)}&format=json`,dr=await(await fetch(ri)).json();return dr.aspect=dr.width/dr.height,dr}async function qi(){let Ir=await Si(_r.value);Yi(),nextTick(()=>{Nt(Ir.aspect),nextTick(()=>{var dr;let Hr=(dr=_t.value)==null?void 0:dr.querySelector("#youtube-placeholder"),ri=parseInt(window.getComputedStyle(Hr).width.slice(0,-2));Hr.style.height=`${ri/Ir.aspect}px`;let Gr={color:"white",rel:0,modestbranding:1,playsinline:1};qn=YouTubePlayer(Hr,{videoId:_r.value,width:ri,playerVars:Gr}),qn.on("ready",ei=>{Na(),it.autoplay&&Ls(`${it.start||""}`,`${it.end||""}`)})})})}async function uo(){var Hr;Nt();let Ir=(Hr=_t.value)==null?void 0:Hr.querySelector("#ve-video-vimeo");qn=new Player(Ir,{id:_r.value,width:parseInt(window.getComputedStyle(Ir).width.slice(0,-2))}),qn.on("loaded",()=>{Nt(Ir.clientWidth/Ir.clientHeight-5),Na()})}function Xi(){Yi(),gi=!0,nextTick(()=>{var Ir;qn=(Ir=_t.value)==null?void 0:Ir.querySelector("#html5-player"),Na()}),Nt()}async function Na(){let Ir=xt.value.parentElement.querySelector("ve-media"),Hr=!1;setInterval(async()=>{if(Zr.value=await $s(),yr.value=await Zi(),yr.value&&it.sticky&&Object.keys(fi.value).length>0&&!Hr){let ri=Ir.getBoundingClientRect().top+window.scrollY-top$1();window.scrollTo(0,ri),Hr=!0}yr.value&&bi().then(ri=>{if(ri=Math.round(ri),fi.value[ri]){let dr=fi.value[ri].getBoundingClientRect();window.scrollTo(0,dr.top+window.scrollY-Ir.getBoundingClientRect().bottom)}})},1e3)}function zs(){ni?qn.pauseVideo():(Ar||gi)&&qn.pause()}async function bi(){if(ni)return qn.getCurrentTime();if(Ar)return await qn.getCurrentTime();if(gi)return qn.currentTime}async function Zi(){return ni?await qn.getPlayerState()===1:Ar?!(await qn.getEnded()||await qn.getPaused()):gi?!(qn.ended||qn.paused):!1}async function $s(){return ni?await qn.isMuted():Ar?await qn.getMuted():await it.muted}function vs(Ir){ni?Ir?qn.mute():qn.unMute():Ar?qn.setMuted(Ir):gi&&(qn.muted=Ir)}function ds(Ir){var Hr=Ir.split(":").slice(0,3).map(dr=>parseInt(dr,10));let ri=0,Gr=1;for(;Hr.length>0;){let dr=Hr.pop()||0;ri+=Gr*dr,Gr*=60}return ri}function Ls(Ir,Hr=""){let ri=ds(Ir),Gr=Hr?ds(Hr)+1:-1;hi&&(clearTimeout(hi),hi=null);let dr=Zr.value;if(ni?(qn.playVideo(),qn.seekTo(ri).then(ei=>{Gr>=ri&&(hi=setTimeout(()=>{qn.pauseVideo().then(ti=>{hi=null,!dr&&Ti&&vs(!1)})},Gr===ri?200:(Gr-ri)*1e3))})):Ar?(qn.setCurrentTime(ri),qn.play().then(ei=>{Gr>=ri&&(hi=setTimeout(()=>{qn.pause().then(ti=>{hi=null,!dr&&Ti&&vs(!1)})},Gr===ri?200:(Gr-ri)*1e3))})):gi&&setTimeout(()=>{qn.play(),qn.currentTime=ri,Gr>=ri&&(hi=setTimeout(()=>{hi=null,qn.pause(),!dr&&Ti&&vs(!1)},Gr===ri?200:(Gr-ri)*1e3))},200),fi.value[ri]){let ti=fi.value[ri].getBoundingClientRect(),Bi=xt.value.parentElement.querySelector("ve-media");window.scrollTo(0,ti.top+window.scrollY-Bi.getBoundingClientRect().bottom)}}return(Ir,Hr)=>{const ri=resolveComponent("ve-gif"),Gr=resolveComponent("ve-manifest-popup"),dr=resolveComponent("ve-media-card"),ei=resolveComponent("sl-image-comparer"),ti=resolveComponent("ve-pager"),Bi=resolveComponent("sl-icon-button"),Oo=resolveComponent("sl-badge"),wo=resolveComponent("ve-media"),_s=resolveComponent("sl-button"),fs=resolveComponent("sl-dialog");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",mergeProps({ref_key:"root",ref:st},Ir.$attrs),null,16),createBaseVNode("div",{id:"outer",class:normalizeClass(ln.value?"edit":"view"),draggable:Fr.value==="image",onDragstart:Hr[2]||(Hr[2]=zi=>rt(Cr.value,zi))},[createBaseVNode("div",{id:"inner",class:normalizeClass(Fr.value)},[createBaseVNode("div",_hoisted_2$8,[Fr.value==="image"?(openBlock(),createElementBlock("div",_hoisted_3$7,[Kt(cr.value[0])?(openBlock(),createBlock(ri,{key:0,src:ar.value.id,alt:"Animated GIF","initially-paused":"","restart-on-play":""},null,8,["src"])):nt.static?(openBlock(),createElementBlock("img",{key:1,src:unref(staticImage)(Cr.value,Er.value,tr.value),style:{width:"100%"},onClick:Hr[0]||(Hr[0]=zi=>Ln(Cr.value))},null,8,_hoisted_4$6)):(openBlock(),createElementBlock("div",_hoisted_5$6)),it.noInfoIcon?createCommentVNode("",!0):(openBlock(),createBlock(Gr,{key:3,manifest:cr.value[0].id},null,8,["manifest"]))])):Fr.value==="image-grid"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`grid-wrapper${it.small?" small":""}`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(lr.value,(zi,Ps)=>(openBlock(),createElementBlock(Fragment,null,[it.cards?(openBlock(),createBlock(dr,{key:0,style:{width:"100%",height:"100%"},manifest:zi.src},null,8,["manifest"])):(openBlock(),createElementBlock("div",_hoisted_6$3,[createBaseVNode("div",{class:"media-item",draggable:Fr.value==="image",onDragstart:Da=>rt(xr.value[zi.id],Da)},[zi.iiif?(openBlock(),createElementBlock("img",{key:0,"data-id":zi.id,src:unref(thumbnail)(xr.value[zi.id],400,zi.seq||1),onClick:Da=>Ln(zi)},null,8,_hoisted_8$2)):zi.youtube?(openBlock(),createElementBlock("img",{key:1,src:`https://img.youtube.com/vi/${zi.videoid}/0.jpg`,onClick:Da=>Ln(zi)},null,8,_hoisted_9$1)):createCommentVNode("",!0),zi.iiif?(openBlock(),createBlock(Gr,{key:2,manifest:zi.src},null,8,["manifest"])):createCommentVNode("",!0)],40,_hoisted_7$2)]))],64))),256))],2)):Fr.value==="image-compare"?(openBlock(),createElementBlock("div",_hoisted_10,[createVNode(ei,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(fr.value,(zi,Ps)=>(openBlock(),createElementBlock("img",{key:`img-${Ps}`,slot:Ps===0?"before":"after",src:zi,alt:unref(label)(cr.value[Ps])},null,8,_hoisted_11))),128))]),_:1})])):Fr.value==="audio"?(openBlock(),createElementBlock("div",_hoisted_12,[createBaseVNode("audio",_hoisted_13,[createBaseVNode("source",{src:gr.value,type:er.value},null,8,_hoisted_14)]),it.noInfoIcon?createCommentVNode("",!0):(openBlock(),createBlock(Gr,{key:0,manifest:cr.value[0].id},null,8,["manifest"]))])):Fr.value==="video"?(openBlock(),createElementBlock("div",_hoisted_15,[unref(ni)?(openBlock(),createElementBlock("div",_hoisted_16)):unref(Ar)?(openBlock(),createElementBlock("div",_hoisted_17)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("video",{id:"html5-player",controls:"",playsinline:"",muted:it.muted,autoplay:it.autoplay,poster:it.poster},[createBaseVNode("source",{src:gr.value,type:er.value},null,8,_hoisted_19)],8,_hoisted_18),it.noInfoIcon?createCommentVNode("",!0):(openBlock(),createBlock(Gr,{key:0,manifest:cr.value[0].id},null,8,["manifest"]))],64))])):createCommentVNode("",!0)]),Fr.value==="image"&&Fn.value>1?(openBlock(),createBlock(ti,{key:0,total:Fn.value,current:dn.value,onImageSelected:ir},null,8,["total","current"])):createCommentVNode("",!0),zn.value&&!it.noCaption?(openBlock(),createElementBlock("div",{key:1,id:"caption-bar",onClick:Ft},[Fr.value==="image"?(openBlock(),createElementBlock("div",{key:0,id:"annotations-icon",class:"button-icon-with-badge",onClick:gn},[ln.value?(openBlock(),createElementBlock(Fragment,{key:0},[rn.value?(openBlock(),createBlock(Bi,{key:0,name:"chat-square",label:"Hide annotations"})):(openBlock(),createBlock(Bi,{key:1,name:"pencil",label:"Edit annotations"})),!rn.value&&on.value.length>0?(openBlock(),createBlock(Oo,{key:2,variant:"danger",pill:""},{default:withCtx(()=>[createTextVNode(toDisplayString(on.value.length),1)]),_:1})):createCommentVNode("",!0)],64)):on.value.length>0?(openBlock(),createElementBlock(Fragment,{key:1},[rn.value?(openBlock(),createBlock(Bi,{key:0,name:"chat-square",label:"Hide annotations"})):(openBlock(),createBlock(Bi,{key:1,name:"chat-square-text",label:"Show annotations"})),rn.value?createCommentVNode("",!0):(openBlock(),createBlock(Oo,{key:2,variant:"danger",pill:""},{default:withCtx(()=>[createTextVNode(toDisplayString(on.value.length),1)]),_:1}))],64)):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",{class:"label",innerHTML:zn.value},null,8,_hoisted_20)])):createCommentVNode("",!0),wn.value?(openBlock(),createElementBlock("div",{key:2,id:"coords",innerHTML:wn.value,onClick:Hr[1]||(Hr[1]=zi=>pr(wn.value||""))},null,8,_hoisted_21)):createCommentVNode("",!0)],2),createVNode(fs,{id:"media-dialog","no-header":"",style:{"--body-spacing":"0","--footer-spacing":"0"}},{default:withCtx(()=>[cn.value?(openBlock(),createBlock(wo,{key:0,src:cn.value,"zoom-on-scroll":""},null,8,["src"])):createCommentVNode("",!0),createVNode(_s,{slot:"footer",class:"close",onClick:Ln,variant:"primary"},{default:withCtx(()=>Hr[3]||(Hr[3]=[createTextVNode("Close")])),_:1,__:[3]})]),_:1})],42,_hoisted_1$b)],64)}}}),_style_0$8=`.r6o-editor{top:0;left:0;margin-left:-19px}.a9s-annotationlayer{position:absolute;top:0;left:0;width:100%;height:100%;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.a9s-annotationlayer.no-cursor,.a9s-annotationlayer.no-cursor *{cursor:none!important}.a9s-crosshair line{stroke-width:1px;stroke:#00000080;pointer-events:none;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.a9s-selection-mask{stroke:none;fill:transparent;pointer-events:none}.a9s-annotation rect,.a9s-annotation circle,.a9s-annotation ellipse,.a9s-annotation path,.a9s-annotation polygon,.a9s-annotation line,.a9s-selection rect,.a9s-selection circle,.a9s-selection ellipse,.a9s-selection path,.a9s-selection polygon,.a9s-selection line{fill:transparent;cursor:pointer;vector-effect:non-scaling-stroke}.a9s-annotation .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff;stroke-width:1px;fill:transparent}.a9s-annotation .a9s-inner:hover,.a9s-selection .a9s-inner:hover{stroke:#fff000}.a9s-annotation .a9s-outer,.a9s-selection .a9s-outer{stroke:#000000b3;stroke-width:3px;fill:none}.a9s-annotation .a9s-formatter-el,.a9s-selection .a9s-formatter-el{overflow:visible}.a9s-annotation.a9s-point .a9s-inner{display:none}.a9s-annotation.a9s-point .a9s-outer{stroke:#5a5a5a;stroke-width:1.5px;fill:#ffffff80}.a9s-annotation.a9s-point .a9s-outer:hover{fill:#fff000}.a9s-annotation.selected .a9s-inner,.a9s-selection .a9s-inner{stroke:#fff000}.a9s-annotation.editable .a9s-inner{stroke:#fff000;cursor:move!important}.a9s-annotation.editable .a9s-inner:hover{fill:#fff0001a}.a9s-handle{cursor:move}.a9s-handle .a9s-handle-inner{stroke:#fff000;fill:#000}.a9s-handle .a9s-handle-outer{stroke:#000;fill:#fff}.a9s-handle:hover .a9s-handle-inner{fill:#fff000}.r6o-btn{background-color:#4483c4;border:1px solid #4483c4;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-size:14px;margin:0;outline:none;text-decoration:none;white-space:nowrap;padding:6px 18px;min-width:70px;vertical-align:middle;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.r6o-btn *{vertical-align:middle;cursor:pointer}.r6o-btn .r6o-icon{margin-right:4px}.r6o-btn:disabled{border-color:#a3c2e2!important;background-color:#a3c2e2!important}.r6o-btn:hover{background-color:#4f92d7;border-color:#4f92d7}.r6o-btn.outline{border:1px solid #4483c4;color:#4483c4;background-color:transparent;text-shadow:none}.r6o-autocomplete{display:inline;position:relative}.r6o-autocomplete div[role=combobox]{display:inline}.r6o-autocomplete input{outline:none;border:none;width:80px;height:100%;line-height:14px;white-space:pre;box-sizing:border-box;background-color:transparent;font-size:14px;color:#3f3f3f}.r6o-autocomplete ul{position:absolute;margin:0;padding:0;list-style-type:none;background-color:#fff;border-radius:3px;border:1px solid #d6d7d9;box-sizing:border-box;box-shadow:0 0 20px #00000040}.r6o-autocomplete ul:empty{display:none}.r6o-autocomplete li{box-sizing:border-box;padding:2px 12px;width:100%;cursor:pointer}.r6o-editable-text{max-height:120px;overflow:auto;outline:none;min-height:2em;font-size:14px;font-family:Lato,sans-serif}.r6o-editable-text:empty:not(:focus):before{content:attr(data-placeholder);color:#c2c2c2}.r6o-widget.comment{font-size:14px;min-height:3em;background-color:#fff;position:relative}.r6o-widget.comment .r6o-editable-text,.r6o-widget.comment .r6o-readonly-comment{padding:10px;width:100%;box-sizing:border-box;outline:none;border:none;background-color:transparent;resize:none}.r6o-widget.comment .r6o-readonly-comment{white-space:pre-line}.r6o-widget.comment .r6o-editable-text::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text::-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-moz-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-editable-text:-ms-input-placeholder{color:#c2c2c2}.r6o-widget.comment .r6o-lastmodified{border:1px solid #e5e5e5;display:inline-block;border-radius:2px;margin:0 10px 8px;padding:4px 5px;line-height:100%;font-size:12px}.r6o-widget.comment .r6o-lastmodified .r6o-lastmodified-at{color:#757575;padding-left:3px}.r6o-widget.comment .r6o-arrow-down{position:absolute;height:20px;width:20px;top:9px;right:9px;line-height:22px;background-color:#fff;text-align:center;-webkit-font-smoothing:antialiased;border:1px solid #e5e5e5;cursor:pointer;-webkit-border-radius:1px;-khtml-border-radius:1px;-moz-border-radius:1px;border-radius:1px}.r6o-widget.comment .r6o-arrow-down.r6o-menu-open{border-color:#4483c4}.r6o-widget.comment .r6o-comment-dropdown-menu{position:absolute;top:32px;right:8px;background-color:#fff;border:1px solid #e5e5e5;list-style-type:none;margin:0;padding:5px 0;z-index:9999;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px #0003}.r6o-widget.comment .r6o-comment-dropdown-menu li{padding:0 15px;cursor:pointer}.r6o-widget.comment .r6o-comment-dropdown-menu li:hover{background-color:#ecf0f1}.r6o-widget.comment .r6o-purposedropdown{position:relative;z-index:2}.r6o-widget.comment.editable{background-color:#ecf0f1}.r6o-widget.r6o-tag:empty{display:none}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.r6o-widget.tag .r6o-taglist li{height:27px}.r6o-widget.tag .r6o-taglist li .r6o-delete-wrapper .r6o-delete{position:relative;top:-4px}}.r6o-widget.r6o-tag{background-color:#ecf0f1;border-bottom:1px solid #e5e5e5;padding:1px 3px;display:flex}.r6o-widget.r6o-tag ul{margin:0;padding:0;list-style-type:none;z-index:1}.r6o-widget.r6o-tag ul.r6o-taglist{flex:0;white-space:nowrap}.r6o-widget.r6o-tag ul.r6o-taglist li{display:inline-block;margin:1px 1px 1px 0;padding:0;vertical-align:middle;overflow:hidden;font-size:12px;background-color:#fff;border:1px solid #d6d7d9;cursor:pointer;position:relative;line-height:180%;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 4px rgba(0,0,0,.1);-moz-box-shadow:0 0 4px rgba(0,0,0,.1);box-shadow:0 0 4px #0000001a}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-label{padding:2px 8px;display:inline-block}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper{display:inline-block;padding:2px 0;color:#fff;width:0;height:100%;background-color:#4483c4;-webkit-border-top-right-radius:2px;-webkit-border-bottom-right-radius:2px;-khtml-border-radius-topright:2px;-khtml-border-radius-bottomright:2px;-moz-border-radius-topright:2px;-moz-border-radius-bottomright:2px;border-top-right-radius:2px;border-bottom-right-radius:2px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper .r6o-delete{padding:2px 6px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-wrapper svg{vertical-align:text-top}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-active{width:24px;transition:width .2s}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-enter-done,.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit{width:24px}.r6o-widget.r6o-tag ul.r6o-taglist li .r6o-delete-exit-active{width:0;transition:width .2s}.r6o-widget.r6o-tag .r6o-autocomplete{flex:1;position:relative}.r6o-widget.r6o-tag .r6o-autocomplete li{font-size:14px}.r6o-widget.r6o-tag input{width:100%;padding:0 3px;min-width:80px;outline:none;border:none;line-height:170%;background-color:transparent;color:#3f3f3f}.r6o-widget.r6o-tag input::-webkit-input-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input::-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-moz-placeholder{color:#c2c2c2}.r6o-widget.r6o-tag input:-ms-input-placeholder{color:#c2c2c2}.r6o-editor{position:absolute;z-index:99999;width:400px;color:#3f3f3f;opacity:0;font-family:Lato,sans-serif;font-size:17px;line-height:27px;-webkit-transition:opacity .2s ease-in;-moz-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.r6o-editor .r6o-arrow{position:absolute;overflow:hidden;top:-12px;left:12px;width:28px;height:12px;display:none}.r6o-editor .r6o-arrow:after{content:"";position:absolute;top:5px;left:5px;width:18px;height:18px;background-color:#fff;-webkit-backface-visibility:hidden;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.r6o-editor .r6o-editor-inner{background-color:#fff;-webkit-border-radius:2px;-khtml-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:2px 2px 42px rgba(0,0,0,.4);-moz-box-shadow:2px 2px 42px rgba(0,0,0,.4);box-shadow:2px 2px 42px #0006}.r6o-editor .r6o-editor-inner .r6o-widget:first-child{-webkit-border-top-left-radius:2px;-webkit-border-top-right-radius:2px;-khtml-border-radius-topleft:2px;-khtml-border-radius-topright:2px;-moz-border-radius-topleft:2px;-moz-border-radius-topright:2px;border-top-left-radius:2px;border-top-right-radius:2px}.r6o-editor .r6o-editor-inner .r6o-widget{border-bottom:1px solid #e5e5e5}.r6o-editor .r6o-footer{position:relative;text-align:right;padding:8px 0}.r6o-editor .r6o-footer .r6o-btn{margin-right:8px}.r6o-editor .r6o-footer .r6o-btn.delete-annotation{position:absolute;top:7px;left:7px;background-color:transparent;border:none;color:#4483c4;width:32px;height:32px;min-width:0;border-radius:100%;padding:0;display:flex;justify-content:center;align-items:center;-webkit-transition:all .1s ease-in;-moz-transition:all .1s ease-in;-o-transition:all .1s ease-in;transition:all .1s ease-in}.r6o-editor .r6o-footer .r6o-btn.delete-annotation:hover{color:#fff;background-color:#ef352c}@media (max-width: 640px){.r6o-editor{width:260px}}.r6o-editor.r6o-arrow-top .r6o-arrow{display:block}.r6o-editor.r6o-arrow-right{margin-left:8px}.r6o-editor.r6o-arrow-right .r6o-arrow{left:auto;right:12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow{display:block;top:auto;bottom:-12px}.r6o-editor.r6o-arrow-bottom .r6o-arrow:after{top:-11px;box-shadow:none}.r6o-editor.pushed .r6o-arrow,.r6o-editor.dragged .r6o-arrow{display:none}.r6o-editor .r6o-draggable{cursor:move}.r6o-purposedropdown{width:150px;display:inline-block}.r6o-noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.a9s-annotation.hover .a9s-inner{stroke:#fff000}.a9s-annotation:not(.hover):hover .a9s-inner{stroke:#fff}*{box-sizing:border-box}:host{display:block;padding-bottom:6px}.info-icon{position:absolute;top:12px;right:12px;width:24px;height:24px;font-size:20px;border:2px solid rgba(255,255,255,.8);border-radius:50%;background-color:#fff;display:flex;justify-content:center;visibility:hidden}.media-item:hover .info-icon{visibility:visible;transition:all .3s ease-in}.manifest-popover{background-color:#fff;border-radius:6px;width:300px;height:400px;overflow-y:scroll;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#outer{position:relative;width:100%;background-color:#fff;display:flex;justify-items:center}#outer{margin-bottom:12px}#inner{margin:auto;width:100%}#inner.image,.drop-shadow{box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#content{width:100%}#osd,video{width:100%;height:100%}#caption-bar{display:flex;gap:6px;width:100%;align-items:center;height:32px;background-color:#555}#caption-bar .label{color:#fff;padding:0 9px;font-size:1.1rem;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;cursor:pointer}.image-wrapper{position:relative;height:100%;width:100%}.grid-wrapper{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper.small{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));grid-auto-rows:1fr;grid-gap:18px;align-items:flex-start;justify-items:center}.grid-wrapper>.caption{display:flex;align-items:center;font-family:sans-serif;width:100%;background:rgba(0,0,0,.7);color:#fff;padding:4px 6px;bottom:0;height:32px;margin-top:6px}.grid-wrapper img{border:1px solid #ccc;box-shadow:2px 2px 6px #0000004d;max-width:100%;cursor:pointer}#coords{position:absolute;display:flex;align-items:center;justify-content:flex-end;font-family:sans-serif;bottom:0;right:0;width:130px;height:32px;padding:3px 6px;font-size:.8rem;background-color:#ffffff80;color:#000;z-index:2;opacity:0;text-align:right}#coords:hover{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:copy}.info-icon span{position:absolute;top:20px;right:20px;font-size:24px;z-index:2;opacity:0;border-radius:50%;border:1px solid white;background-color:#0003}.media-item{position:relative}.media-item:hover .info-icon span{visibility:visible;opacity:1;transition:all .3s ease-in;cursor:pointer;color:#fff}.info-icon:hover svg{fill:#000}.view .r6o-footer{display:none}.r6o-readonly-comment{display:inline}.view .r6o-editor,.view .r6o-editor-inner,.view .r6o-widget{display:inline-block;min-height:unset!important;line-height:1.4;padding:9px;border-bottom:none}.r6o-tag,.comment.editable:nth-of-type(2){display:none!important}.edit .r6o-editor{width:216px}svg.a9s-annotationlayer .a9s-selection .a9s-inner,svg.a9s-annotationlayer .a9s-annotation .a9s-inner{stroke-width:3;stroke:#ff0}ul.annotations{list-style:none;padding-left:0}.annotations li{display:flex;align-items:center;gap:6px;padding:6px 0}.annotations li:hover{background-color:#fff3;cursor:pointer}.compare{height:100%;width:100%;position:relative;overflow:hidden;border:5px solid #bfc0c1;box-shadow:-3px 5px 15px #000}.compare img{width:100%;height:100%;position:absolute}#compare-img-2{clip-path:polygon(0 0,50% 0,50% 100%,0 100%)}#slider{position:relative;-webkit-appearance:none;width:calc(100% + 40px);height:100%;margin-left:-20px;background-color:transparent;outline:none}#slider::-webkit-slider-thumb{-webkit-appearance:none;height:45px;width:45px;background:rgba(255,255,255,.3);border:4px solid white;border-radius:50%;background-size:contain;cursor:pointer}audio#html5-player{width:calc(100% - 60px);max-width:50vh}.buttons{display:flex;align-items:center;justify-content:center;padding:12px}.close{font-size:14px;font-weight:700;padding:6px}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer}.popup-overview sl-popup{--arrow-color: var(--sl-color-primary-600)}.popup-overview span[slot=anchor]{display:inline-block;width:150px;height:150px;border:dashed 2px var(--sl-color-neutral-600);margin:50px}.popup-overview .box{width:100px;height:50px;background:var(--sl-color-primary-600);border-radius:var(--sl-border-radius-medium)}.popup-overview-options{display:flex;flex-wrap:wrap;align-items:end;gap:1rem}.popup-overview-options sl-select{width:160px}.popup-overview-options sl-input{width:100px}.popup-overview-options+.popup-overview-options{margin-top:1rem}sl-popup{--arrow-color: var(--sl-color-primary-600)}.media-item .box{width:300px;height:600px;background:white;border-radius:var(--sl-border-radius-medium)}#annotations-icon{position:relative;cursor:pointer}#annotations-icon sl-icon-button::part(base){color:#fff;font-size:1.2rem;padding:3px}.button-icon-with-badge{display:inline-block;position:relative;margin:0 6px}.button-icon-with-badge sl-badge{position:absolute;left:70%;top:0;cursor:pointer}.button-icon-with-badge sl-badge::part(base){font-size:.7rem;background-color:#ff0;color:#000;font-weight:700;padding:4px 5px 1px;border:unset}#youtube-placeholder,#ve-video-vimeo{width:100%}ve-manifest-popup{position:absolute;top:12px;right:12px;visibility:hidden;opacity:0;cursor:pointer}.media-item:hover ve-manifest-popup{visibility:visible;opacity:.8;transition:all .5s ease-in}
`,MediaViewer=_export_sfc(_sfc_main$e,[["styles",[_style_0$8]]]),_hoisted_1$a={key:0,class:"wrapper"},_hoisted_2$7=["data-item","onClick"],_sfc_main$d=defineComponent({__name:"Menu.ce",props:{background:{type:String},position:{type:String,default:"left"},contact:{type:String}},setup(nt){const rt=nt,it={"www.juncture-digital.org":"f7247e1e4769ba7c61e4","beta.juncture-digital.org":"f30ce4168a0bb95ecaa3","dev.juncture-digital.org":"bb290b5a738cb6fe31c7","tools.juncture-digital.org":"0b40086fe912d97c03e6"},st={about:{icon:"info-circle-fill"},contact:{icon:"envelope-fill"},documentation:{icon:"book"},docs:{icon:"book"},editor:{icon:"pencil",loginRequired:!0},essays:{icon:"pencil"},help:{icon:"question-circle"},home:{icon:"house-fill"},"how to":{icon:"book-fill"},link:{icon:"link-45deg"},login:{icon:"person-circle"},logout:{icon:"person-circle"},markdown:{icon:"markdown"},media:{icon:"images",loginRequired:!0},showcase:{icon:"easel2"},tools:{icon:"tools",loginRequired:!0}},_t=ref(null),xt=computed(()=>{var ln,gn;return(gn=(ln=_t.value)==null?void 0:ln.getRootNode())==null?void 0:gn.host}),Et=computed(()=>{var ln;return(ln=_t==null?void 0:_t.value)==null?void 0:ln.parentNode}),kt=ref(!1),Lt=ref([]),It=ref();watch$1(It,()=>console.log("menu.navItems",toRaw(It.value)));let Rt,Nt;onMounted(()=>{Bt(),nextTick(()=>{var gn;let ln=Array.from(((gn=xt.value.children[0])==null?void 0:gn.children)||[]);ln.length>0&&(Lt.value=ln.map(wn=>{if(wn.firstChild.nodeName==="A"){let kn=wn.firstChild;return{label:kn.textContent,href:kn.href,newWindow:kn.getAttribute("target")==="_blank"}}else{let kn=wn.firstChild.textContent;return kn.toLowerCase()==="auth"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:{label:kn}}}).filter(wn=>wn.label.toLowerCase().indexOf("contact")!==0||rt.contact))})});function Bt(){kt.value=Ft()!==null;let ln=new URL(window.location.href).searchParams.get("code");ln&&(window.history.replaceState({},"",window.location.pathname),fetch(`/gh-token?code=${ln}&hostname=${window.location.hostname}`).then(gn=>gn.text()).then(gn=>{gn&&(kt.value=!0,localStorage.setItem("gh-auth-token",gn),window.dispatchEvent(new Event("storage")))}).catch(gn=>console.log("err",gn))),xt.value.classList.add(rt.position)}watch$1(Lt,()=>{It.value=Lt.value.filter(ln=>{var wn;let gn=ln.href?ln.href.split("/").filter(kn=>kn).pop().toLowerCase():"link";return!st[gn]||!((wn=st[gn])!=null&&wn.loginRequired)||kt.value}).map(ln=>ln.label==="Login"||ln.label==="Logout"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:ln)}),watch$1(kt,()=>{It.value=Lt.value.filter(ln=>{var wn;let gn=ln.href?ln.href.split("/").filter(kn=>kn).pop().toLowerCase():"link";return!st[gn]||!((wn=st[gn])!=null&&wn.loginRequired)||kt.value}).map(ln=>ln.label==="Login"||ln.label==="Logout"?{label:kt.value?"Logout":"Login",href:kt.value?"logout":"login"}:ln)});function Ft(){return localStorage.getItem("gh-auth-token")}function Yt(){var gn;let ln=(gn=Et.value)==null?void 0:gn.querySelector("ve-contact");ln._instance.exposed.show.value=!0}function Zt(){Rt&&Rt.close();let ln="toolbar=yes,location=yes,left=0,top=0,width=1040,height=1200,scrollbars=yes,status=yes";Rt=window.open("/help","_blank",ln)}function Wt(){var gn;let ln=(gn=Et.value)==null?void 0:gn.querySelector("#markdown");ln.show=!ln.show}function Kt(){let ln=new URL(window.location.href).hostname,gn=ln==="localhost"||ln.indexOf("192.168.")===0,wn=gn?`${window.location.pathname}?code=testing`:it[location.hostname]!==void 0?`https://github.com/login/oauth/authorize?client_id=${it[location.hostname]}&scope=repo&state=juncture&redirect_uri=${location.href}`:null;console.log(`login: hostname=${ln} isDev=${gn} href=${wn}`),wn&&(window.location.href=wn)}function Jt(){console.log("logout"),Object.keys(localStorage).forEach(ln=>localStorage.removeItem(ln)),window.dispatchEvent(new Event("storage")),kt.value=!1}function on(ln){let gn="",wn=ln.label.toLowerCase();return Object.keys(st).forEach(kn=>{wn.indexOf(kn)>=0&&(gn=st[kn].icon)}),gn||"link"}function rn(ln){var wn;let gn=ln.href?ln.href.split("/").pop().toLowerCase():"";if((gn.indexOf("contact")===0||ln.label.toLowerCase().indexOf("contact")===0)&&rt.contact)Yt();else if(gn==="login")Kt();else if(gn==="logout")Jt();else if(gn==="help")Zt();else if(gn==="markdown")Wt();else if(ln.href)if(ln.newWindow)Nt&&Nt.close(),Nt=window.open(ln.href,"_blank","toolbar=yes,location=yes,left=0,top=0,width=1024,height=1200,scrollbars=yes,status=yes");else if(ln.href.indexOf("/window.")>0){let kn=ln.href.split("/window.").pop();window[kn]()}else location.href=ln.href;((wn=Et.value)==null?void 0:wn.querySelector("#menu-btn")).checked=!1}return(ln,gn)=>{const wn=resolveComponent("sl-icon"),kn=resolveComponent("ve-contact");return openBlock(),createElementBlock("div",{ref_key:"root",ref:_t},[createBaseVNode("div",{class:"nav",style:normalizeStyle({backgroundColor:rt.background})},[gn[1]||(gn[1]=createBaseVNode("input",{class:"menu-btn",type:"checkbox",id:"menu-btn"},null,-1)),It.value?(openBlock(),createElementBlock("div",_hoisted_1$a,[gn[0]||(gn[0]=createBaseVNode("label",{class:"menu-icon",htmlFor:"menu-btn"},[createBaseVNode("span",{class:"navicon"})],-1)),createBaseVNode("ul",{class:"menu",style:normalizeStyle({backgroundColor:rt.background||"#444"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(It.value,(Cn,Pn)=>(openBlock(),createElementBlock("li",{"data-item":JSON.stringify(Cn),key:`nav-${Pn}`,onClick:An=>rn(Cn)},[createVNode(wn,{slot:"prefix",name:on(Cn),label:Cn.label},null,8,["name","label"]),createTextVNode(" "+toDisplayString(Cn.label),1)],8,_hoisted_2$7))),128))],4)])):createCommentVNode("",!0)],4),createVNode(kn,{contact:rt.contact},null,8,["contact"])],512)}}}),_style_0$7=`:host,ve-menu{height:100%}:host(.right) .menu,ve-menu.right .menu{right:0}.hydrated ul{display:none}.nav{display:inline-block;position:relative;z-index:10;height:100%;background-color:inherit}.menu{display:none;clear:both;max-height:0;transition:max-height .2s ease-out;position:absolute;top:58px;width:200px;background-color:#0009;color:#fff}ul.menu{padding:0;list-style:none}.menu li{display:flex;padding:10px 20px;text-decoration:none;cursor:pointer;font-size:1rem}.menu li:hover{text-decoration:underline;background-color:inherit;filter:brightness(150%)}.menu-icon{cursor:pointer;display:inline-block;padding:34px 20px;position:relative;user-select:none}.menu-icon .navicon,.menu-icon .navicon:before,.menu-icon .navicon:after{background:#fff}.menu-icon .navicon{display:block;height:4px;border-radius:2px;position:relative;transition:background .2s ease-out;width:32px}.menu-icon .navicon:before,.menu-icon .navicon:after{content:"";display:block;height:100%;position:absolute;transition:all .2s ease-out;width:100%;border-radius:2px}.menu-icon .navicon:before{top:10px}.menu-icon .navicon:after{top:-10px}.menu sl-icon{padding-right:12px}.menu-btn{display:none}.menu-btn:checked~.wrapper{filter:brightness(150%);background-color:inherit}.menu-btn:checked~.wrapper .menu{max-height:unset;display:block}.menu-btn:checked~.wrapper .menu-icon .navicon{background:transparent}.menu-btn:checked~.wrapper .menu-icon .navicon:before{transform:rotate(-45deg)}.menu-btn:checked~.wrapper .menu-icon .navicon:after{transform:rotate(45deg)}.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:before,.menu-btn:checked~.wrapper .menu-icon:not(.steps) .navicon:after{top:0}
`,Menu=_export_sfc(_sfc_main$d,[["styles",[_style_0$7]]]);function dedent(nt){for(var rt=[],it=1;it<arguments.length;it++)rt[it-1]=arguments[it];var st=Array.from(typeof nt=="string"?[nt]:nt);st[st.length-1]=st[st.length-1].replace(/\r?\n([\t ]*)$/,"");var _t=st.reduce(function(kt,Lt){var It=Lt.match(/\n([\t ]+|(?!\s).)/g);return It?kt.concat(It.map(function(Rt){var Nt,Bt;return(Bt=(Nt=Rt.match(/[\t ]/g))===null||Nt===void 0?void 0:Nt.length)!==null&&Bt!==void 0?Bt:0})):kt},[]);if(_t.length){var xt=new RegExp(`
[	 ]{`+Math.min.apply(Math,_t)+"}","g");st=st.map(function(kt){return kt.replace(xt,`
`)})}st[0]=st[0].replace(/^\r?\n/,"");var Et=st[0];return rt.forEach(function(kt,Lt){var It=Et.match(/(?:^|\n)( *)$/),Rt=It?It[1]:"",Nt=kt;typeof kt=="string"&&kt.includes(`
`)&&(Nt=String(kt).split(`
`).map(function(Bt,Ft){return Ft===0?Bt:""+Rt+Bt}).join(`
`)),Et+=Nt+st[Lt+1]}),Et}var dayjs_min={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){var it=1e3,st=6e4,_t=36e5,xt="millisecond",Et="second",kt="minute",Lt="hour",It="day",Rt="week",Nt="month",Bt="quarter",Ft="year",Yt="date",Zt="Invalid Date",Wt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Kt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Jt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(an){var zn=["th","st","nd","rd"],dn=an%100;return"["+an+(zn[(dn-20)%10]||zn[dn]||zn[0])+"]"}},on=function(an,zn,dn){var Fn=String(an);return!Fn||Fn.length>=zn?an:""+Array(zn+1-Fn.length).join(dn)+an},rn={s:on,z:function(an){var zn=-an.utcOffset(),dn=Math.abs(zn),Fn=Math.floor(dn/60),ir=dn%60;return(zn<=0?"+":"-")+on(Fn,2,"0")+":"+on(ir,2,"0")},m:function an(zn,dn){if(zn.date()<dn.date())return-an(dn,zn);var Fn=12*(dn.year()-zn.year())+(dn.month()-zn.month()),ir=zn.clone().add(Fn,Nt),tr=dn-ir<0,Jn=zn.clone().add(Fn+(tr?-1:1),Nt);return+(-(Fn+(dn-ir)/(tr?ir-Jn:Jn-ir))||0)},a:function(an){return an<0?Math.ceil(an)||0:Math.floor(an)},p:function(an){return{M:Nt,y:Ft,w:Rt,d:It,D:Yt,h:Lt,m:kt,s:Et,ms:xt,Q:Bt}[an]||String(an||"").toLowerCase().replace(/s$/,"")},u:function(an){return an===void 0}},ln="en",gn={};gn[ln]=Jt;var wn="$isDayjsObject",kn=function(an){return an instanceof cn||!(!an||!an[wn])},Cn=function an(zn,dn,Fn){var ir;if(!zn)return ln;if(typeof zn=="string"){var tr=zn.toLowerCase();gn[tr]&&(ir=tr),dn&&(gn[tr]=dn,ir=tr);var Jn=zn.split("-");if(!ir&&Jn.length>1)return an(Jn[0])}else{var hr=zn.name;gn[hr]=zn,ir=hr}return!Fn&&ir&&(ln=ir),ir||!Fn&&ln},Pn=function(an,zn){if(kn(an))return an.clone();var dn=typeof zn=="object"?zn:{};return dn.date=an,dn.args=arguments,new cn(dn)},An=rn;An.l=Cn,An.i=kn,An.w=function(an,zn){return Pn(an,{locale:zn.$L,utc:zn.$u,x:zn.$x,$offset:zn.$offset})};var cn=function(){function an(dn){this.$L=Cn(dn.locale,null,!0),this.parse(dn),this.$x=this.$x||dn.x||{},this[wn]=!0}var zn=an.prototype;return zn.parse=function(dn){this.$d=function(Fn){var ir=Fn.date,tr=Fn.utc;if(ir===null)return new Date(NaN);if(An.u(ir))return new Date;if(ir instanceof Date)return new Date(ir);if(typeof ir=="string"&&!/Z$/i.test(ir)){var Jn=ir.match(Wt);if(Jn){var hr=Jn[2]-1||0,lr=(Jn[7]||"0").substring(0,3);return tr?new Date(Date.UTC(Jn[1],hr,Jn[3]||1,Jn[4]||0,Jn[5]||0,Jn[6]||0,lr)):new Date(Jn[1],hr,Jn[3]||1,Jn[4]||0,Jn[5]||0,Jn[6]||0,lr)}}return new Date(ir)}(dn),this.init()},zn.init=function(){var dn=this.$d;this.$y=dn.getFullYear(),this.$M=dn.getMonth(),this.$D=dn.getDate(),this.$W=dn.getDay(),this.$H=dn.getHours(),this.$m=dn.getMinutes(),this.$s=dn.getSeconds(),this.$ms=dn.getMilliseconds()},zn.$utils=function(){return An},zn.isValid=function(){return this.$d.toString()!==Zt},zn.isSame=function(dn,Fn){var ir=Pn(dn);return this.startOf(Fn)<=ir&&ir<=this.endOf(Fn)},zn.isAfter=function(dn,Fn){return Pn(dn)<this.startOf(Fn)},zn.isBefore=function(dn,Fn){return this.endOf(Fn)<Pn(dn)},zn.$g=function(dn,Fn,ir){return An.u(dn)?this[Fn]:this.set(ir,dn)},zn.unix=function(){return Math.floor(this.valueOf()/1e3)},zn.valueOf=function(){return this.$d.getTime()},zn.startOf=function(dn,Fn){var ir=this,tr=!!An.u(Fn)||Fn,Jn=An.p(dn),hr=function(xr,fr){var gr=An.w(ir.$u?Date.UTC(ir.$y,fr,xr):new Date(ir.$y,fr,xr),ir);return tr?gr:gr.endOf(It)},lr=function(xr,fr){return An.w(ir.toDate()[xr].apply(ir.toDate("s"),(tr?[0,0,0,0]:[23,59,59,999]).slice(fr)),ir)},cr=this.$W,Cr=this.$M,Er=this.$D,ar="set"+(this.$u?"UTC":"");switch(Jn){case Ft:return tr?hr(1,0):hr(31,11);case Nt:return tr?hr(1,Cr):hr(0,Cr+1);case Rt:var Fr=this.$locale().weekStart||0,mr=(cr<Fr?cr+7:cr)-Fr;return hr(tr?Er-mr:Er+(6-mr),Cr);case It:case Yt:return lr(ar+"Hours",0);case Lt:return lr(ar+"Minutes",1);case kt:return lr(ar+"Seconds",2);case Et:return lr(ar+"Milliseconds",3);default:return this.clone()}},zn.endOf=function(dn){return this.startOf(dn,!1)},zn.$set=function(dn,Fn){var ir,tr=An.p(dn),Jn="set"+(this.$u?"UTC":""),hr=(ir={},ir[It]=Jn+"Date",ir[Yt]=Jn+"Date",ir[Nt]=Jn+"Month",ir[Ft]=Jn+"FullYear",ir[Lt]=Jn+"Hours",ir[kt]=Jn+"Minutes",ir[Et]=Jn+"Seconds",ir[xt]=Jn+"Milliseconds",ir)[tr],lr=tr===It?this.$D+(Fn-this.$W):Fn;if(tr===Nt||tr===Ft){var cr=this.clone().set(Yt,1);cr.$d[hr](lr),cr.init(),this.$d=cr.set(Yt,Math.min(this.$D,cr.daysInMonth())).$d}else hr&&this.$d[hr](lr);return this.init(),this},zn.set=function(dn,Fn){return this.clone().$set(dn,Fn)},zn.get=function(dn){return this[An.p(dn)]()},zn.add=function(dn,Fn){var ir,tr=this;dn=Number(dn);var Jn=An.p(Fn),hr=function(Cr){var Er=Pn(tr);return An.w(Er.date(Er.date()+Math.round(Cr*dn)),tr)};if(Jn===Nt)return this.set(Nt,this.$M+dn);if(Jn===Ft)return this.set(Ft,this.$y+dn);if(Jn===It)return hr(1);if(Jn===Rt)return hr(7);var lr=(ir={},ir[kt]=st,ir[Lt]=_t,ir[Et]=it,ir)[Jn]||1,cr=this.$d.getTime()+dn*lr;return An.w(cr,this)},zn.subtract=function(dn,Fn){return this.add(-1*dn,Fn)},zn.format=function(dn){var Fn=this,ir=this.$locale();if(!this.isValid())return ir.invalidDate||Zt;var tr=dn||"YYYY-MM-DDTHH:mm:ssZ",Jn=An.z(this),hr=this.$H,lr=this.$m,cr=this.$M,Cr=ir.weekdays,Er=ir.months,ar=ir.meridiem,Fr=function(fr,gr,er,nn){return fr&&(fr[gr]||fr(Fn,tr))||er[gr].slice(0,nn)},mr=function(fr){return An.s(hr%12||12,fr,"0")},xr=ar||function(fr,gr,er){var nn=fr<12?"AM":"PM";return er?nn.toLowerCase():nn};return tr.replace(Kt,function(fr,gr){return gr||function(er){switch(er){case"YY":return String(Fn.$y).slice(-2);case"YYYY":return An.s(Fn.$y,4,"0");case"M":return cr+1;case"MM":return An.s(cr+1,2,"0");case"MMM":return Fr(ir.monthsShort,cr,Er,3);case"MMMM":return Fr(Er,cr);case"D":return Fn.$D;case"DD":return An.s(Fn.$D,2,"0");case"d":return String(Fn.$W);case"dd":return Fr(ir.weekdaysMin,Fn.$W,Cr,2);case"ddd":return Fr(ir.weekdaysShort,Fn.$W,Cr,3);case"dddd":return Cr[Fn.$W];case"H":return String(hr);case"HH":return An.s(hr,2,"0");case"h":return mr(1);case"hh":return mr(2);case"a":return xr(hr,lr,!0);case"A":return xr(hr,lr,!1);case"m":return String(lr);case"mm":return An.s(lr,2,"0");case"s":return String(Fn.$s);case"ss":return An.s(Fn.$s,2,"0");case"SSS":return An.s(Fn.$ms,3,"0");case"Z":return Jn}return null}(fr)||Jn.replace(":","")})},zn.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},zn.diff=function(dn,Fn,ir){var tr,Jn=this,hr=An.p(Fn),lr=Pn(dn),cr=(lr.utcOffset()-this.utcOffset())*st,Cr=this-lr,Er=function(){return An.m(Jn,lr)};switch(hr){case Ft:tr=Er()/12;break;case Nt:tr=Er();break;case Bt:tr=Er()/3;break;case Rt:tr=(Cr-cr)/6048e5;break;case It:tr=(Cr-cr)/864e5;break;case Lt:tr=Cr/_t;break;case kt:tr=Cr/st;break;case Et:tr=Cr/it;break;default:tr=Cr}return ir?tr:An.a(tr)},zn.daysInMonth=function(){return this.endOf(Nt).$D},zn.$locale=function(){return gn[this.$L]},zn.locale=function(dn,Fn){if(!dn)return this.$L;var ir=this.clone(),tr=Cn(dn,Fn,!0);return tr&&(ir.$L=tr),ir},zn.clone=function(){return An.w(this.$d,this)},zn.toDate=function(){return new Date(this.valueOf())},zn.toJSON=function(){return this.isValid()?this.toISOString():null},zn.toISOString=function(){return this.$d.toISOString()},zn.toString=function(){return this.$d.toUTCString()},an}(),Ln=cn.prototype;return Pn.prototype=Ln,[["$ms",xt],["$s",Et],["$m",kt],["$H",Lt],["$W",It],["$M",Nt],["$y",Ft],["$D",Yt]].forEach(function(an){Ln[an[1]]=function(zn){return this.$g(zn,an[0],an[1])}}),Pn.extend=function(an,zn){return an.$i||(an(zn,cn,Pn),an.$i=!0),Pn},Pn.locale=Cn,Pn.isDayjs=kn,Pn.unix=function(an){return Pn(1e3*an)},Pn.en=gn[ln],Pn.Ls=gn,Pn.p={},Pn})})(dayjs_min);const dayjs=dayjs_min.exports;var dist={};(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.sanitizeUrl=nt.BLANK_URL=void 0;var rt=/^([^\w]*)(javascript|data|vbscript)/im,it=/&#(\w+)(^\w|;)?/g,st=/&(newline|tab);/gi,_t=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,xt=/^.+(:|&colon;)/gim,Et=[".","/"];nt.BLANK_URL="about:blank";function kt(Rt){return Et.indexOf(Rt[0])>-1}function Lt(Rt){var Nt=Rt.replace(_t,"");return Nt.replace(it,function(Bt,Ft){return String.fromCharCode(Ft)})}function It(Rt){if(!Rt)return nt.BLANK_URL;var Nt=Lt(Rt).replace(st,"").replace(_t,"").trim();if(!Nt)return nt.BLANK_URL;if(kt(Nt))return Nt;var Bt=Nt.match(xt);if(!Bt)return Nt;var Ft=Bt[0];return rt.test(Ft)?nt.BLANK_URL:Nt}nt.sanitizeUrl=It})(dist);function ascending$1(nt,rt){return nt==null||rt==null?NaN:nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function descending$1(nt,rt){return nt==null||rt==null?NaN:rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function bisector(nt){let rt,it,st;nt.length!==2?(rt=ascending$1,it=(kt,Lt)=>ascending$1(nt(kt),Lt),st=(kt,Lt)=>nt(kt)-Lt):(rt=nt===ascending$1||nt===descending$1?nt:zero$1,it=nt,st=nt);function _t(kt,Lt,It=0,Rt=kt.length){if(It<Rt){if(rt(Lt,Lt)!==0)return Rt;do{const Nt=It+Rt>>>1;it(kt[Nt],Lt)<0?It=Nt+1:Rt=Nt}while(It<Rt)}return It}function xt(kt,Lt,It=0,Rt=kt.length){if(It<Rt){if(rt(Lt,Lt)!==0)return Rt;do{const Nt=It+Rt>>>1;it(kt[Nt],Lt)<=0?It=Nt+1:Rt=Nt}while(It<Rt)}return It}function Et(kt,Lt,It=0,Rt=kt.length){const Nt=_t(kt,Lt,It,Rt-1);return Nt>It&&st(kt[Nt-1],Lt)>-st(kt[Nt],Lt)?Nt-1:Nt}return{left:_t,center:Et,right:xt}}function zero$1(){return 0}function number$3(nt){return nt===null?NaN:+nt}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$3).center;const bisect=bisectRight;class InternMap extends Map{constructor(rt,it=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:it}}),rt!=null)for(const[st,_t]of rt)this.set(st,_t)}get(rt){return super.get(intern_get(this,rt))}has(rt){return super.has(intern_get(this,rt))}set(rt,it){return super.set(intern_set(this,rt),it)}delete(rt){return super.delete(intern_delete(this,rt))}}function intern_get({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)?nt.get(st):it}function intern_set({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)?nt.get(st):(nt.set(st,it),it)}function intern_delete({_intern:nt,_key:rt},it){const st=rt(it);return nt.has(st)&&(it=nt.get(st),nt.delete(st)),it}function keyof(nt){return nt!==null&&typeof nt=="object"?nt.valueOf():nt}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(nt,rt,it){const st=(rt-nt)/Math.max(0,it),_t=Math.floor(Math.log10(st)),xt=st/Math.pow(10,_t),Et=xt>=e10?10:xt>=e5?5:xt>=e2?2:1;let kt,Lt,It;return _t<0?(It=Math.pow(10,-_t)/Et,kt=Math.round(nt*It),Lt=Math.round(rt*It),kt/It<nt&&++kt,Lt/It>rt&&--Lt,It=-It):(It=Math.pow(10,_t)*Et,kt=Math.round(nt/It),Lt=Math.round(rt/It),kt*It<nt&&++kt,Lt*It>rt&&--Lt),Lt<kt&&.5<=it&&it<2?tickSpec(nt,rt,it*2):[kt,Lt,It]}function ticks(nt,rt,it){if(rt=+rt,nt=+nt,it=+it,!(it>0))return[];if(nt===rt)return[nt];const st=rt<nt,[_t,xt,Et]=st?tickSpec(rt,nt,it):tickSpec(nt,rt,it);if(!(xt>=_t))return[];const kt=xt-_t+1,Lt=new Array(kt);if(st)if(Et<0)for(let It=0;It<kt;++It)Lt[It]=(xt-It)/-Et;else for(let It=0;It<kt;++It)Lt[It]=(xt-It)*Et;else if(Et<0)for(let It=0;It<kt;++It)Lt[It]=(_t+It)/-Et;else for(let It=0;It<kt;++It)Lt[It]=(_t+It)*Et;return Lt}function tickIncrement(nt,rt,it){return rt=+rt,nt=+nt,it=+it,tickSpec(nt,rt,it)[2]}function tickStep(nt,rt,it){rt=+rt,nt=+nt,it=+it;const st=rt<nt,_t=st?tickIncrement(rt,nt,it):tickIncrement(nt,rt,it);return(st?-1:1)*(_t<0?1/-_t:_t)}function max$2(nt,rt){let it;if(rt===void 0)for(const st of nt)st!=null&&(it<st||it===void 0&&st>=st)&&(it=st);else{let st=-1;for(let _t of nt)(_t=rt(_t,++st,nt))!=null&&(it<_t||it===void 0&&_t>=_t)&&(it=_t)}return it}function min$2(nt,rt){let it;if(rt===void 0)for(const st of nt)st!=null&&(it>st||it===void 0&&st>=st)&&(it=st);else{let st=-1;for(let _t of nt)(_t=rt(_t,++st,nt))!=null&&(it>_t||it===void 0&&_t>=_t)&&(it=_t)}return it}function identity$5(nt){return nt}var top=1,right=2,bottom=3,left=4,epsilon$2=1e-6;function translateX(nt){return"translate("+nt+",0)"}function translateY(nt){return"translate(0,"+nt+")"}function number$2(nt){return rt=>+nt(rt)}function center(nt,rt){return rt=Math.max(0,nt.bandwidth()-rt*2)/2,nt.round()&&(rt=Math.round(rt)),it=>+nt(it)+rt}function entering(){return!this.__axis}function axis(nt,rt){var it=[],st=null,_t=null,xt=6,Et=6,kt=3,Lt=typeof window<"u"&&window.devicePixelRatio>1?0:.5,It=nt===top||nt===left?-1:1,Rt=nt===left||nt===right?"x":"y",Nt=nt===top||nt===bottom?translateX:translateY;function Bt(Ft){var Yt=st==null?rt.ticks?rt.ticks.apply(rt,it):rt.domain():st,Zt=_t==null?rt.tickFormat?rt.tickFormat.apply(rt,it):identity$5:_t,Wt=Math.max(xt,0)+kt,Kt=rt.range(),Jt=+Kt[0]+Lt,on=+Kt[Kt.length-1]+Lt,rn=(rt.bandwidth?center:number$2)(rt.copy(),Lt),ln=Ft.selection?Ft.selection():Ft,gn=ln.selectAll(".domain").data([null]),wn=ln.selectAll(".tick").data(Yt,rt).order(),kn=wn.exit(),Cn=wn.enter().append("g").attr("class","tick"),Pn=wn.select("line"),An=wn.select("text");gn=gn.merge(gn.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),wn=wn.merge(Cn),Pn=Pn.merge(Cn.append("line").attr("stroke","currentColor").attr(Rt+"2",It*xt)),An=An.merge(Cn.append("text").attr("fill","currentColor").attr(Rt,It*Wt).attr("dy",nt===top?"0em":nt===bottom?"0.71em":"0.32em")),Ft!==ln&&(gn=gn.transition(Ft),wn=wn.transition(Ft),Pn=Pn.transition(Ft),An=An.transition(Ft),kn=kn.transition(Ft).attr("opacity",epsilon$2).attr("transform",function(cn){return isFinite(cn=rn(cn))?Nt(cn+Lt):this.getAttribute("transform")}),Cn.attr("opacity",epsilon$2).attr("transform",function(cn){var Ln=this.parentNode.__axis;return Nt((Ln&&isFinite(Ln=Ln(cn))?Ln:rn(cn))+Lt)})),kn.remove(),gn.attr("d",nt===left||nt===right?Et?"M"+It*Et+","+Jt+"H"+Lt+"V"+on+"H"+It*Et:"M"+Lt+","+Jt+"V"+on:Et?"M"+Jt+","+It*Et+"V"+Lt+"H"+on+"V"+It*Et:"M"+Jt+","+Lt+"H"+on),wn.attr("opacity",1).attr("transform",function(cn){return Nt(rn(cn)+Lt)}),Pn.attr(Rt+"2",It*xt),An.attr(Rt,It*Wt).text(Zt),ln.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",nt===right?"start":nt===left?"end":"middle"),ln.each(function(){this.__axis=rn})}return Bt.scale=function(Ft){return arguments.length?(rt=Ft,Bt):rt},Bt.ticks=function(){return it=Array.from(arguments),Bt},Bt.tickArguments=function(Ft){return arguments.length?(it=Ft==null?[]:Array.from(Ft),Bt):it.slice()},Bt.tickValues=function(Ft){return arguments.length?(st=Ft==null?null:Array.from(Ft),Bt):st&&st.slice()},Bt.tickFormat=function(Ft){return arguments.length?(_t=Ft,Bt):_t},Bt.tickSize=function(Ft){return arguments.length?(xt=Et=+Ft,Bt):xt},Bt.tickSizeInner=function(Ft){return arguments.length?(xt=+Ft,Bt):xt},Bt.tickSizeOuter=function(Ft){return arguments.length?(Et=+Ft,Bt):Et},Bt.tickPadding=function(Ft){return arguments.length?(kt=+Ft,Bt):kt},Bt.offset=function(Ft){return arguments.length?(Lt=+Ft,Bt):Lt},Bt}function axisTop(nt){return axis(top,nt)}function axisBottom(nt){return axis(bottom,nt)}var noop$2={value:()=>{}};function dispatch(){for(var nt=0,rt=arguments.length,it={},st;nt<rt;++nt){if(!(st=arguments[nt]+"")||st in it||/[\s.]/.test(st))throw new Error("illegal type: "+st);it[st]=[]}return new Dispatch(it)}function Dispatch(nt){this._=nt}function parseTypenames$1(nt,rt){return nt.trim().split(/^|\s+/).map(function(it){var st="",_t=it.indexOf(".");if(_t>=0&&(st=it.slice(_t+1),it=it.slice(0,_t)),it&&!rt.hasOwnProperty(it))throw new Error("unknown type: "+it);return{type:it,name:st}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(nt,rt){var it=this._,st=parseTypenames$1(nt+"",it),_t,xt=-1,Et=st.length;if(arguments.length<2){for(;++xt<Et;)if((_t=(nt=st[xt]).type)&&(_t=get$3(it[_t],nt.name)))return _t;return}if(rt!=null&&typeof rt!="function")throw new Error("invalid callback: "+rt);for(;++xt<Et;)if(_t=(nt=st[xt]).type)it[_t]=set$2(it[_t],nt.name,rt);else if(rt==null)for(_t in it)it[_t]=set$2(it[_t],nt.name,null);return this},copy:function(){var nt={},rt=this._;for(var it in rt)nt[it]=rt[it].slice();return new Dispatch(nt)},call:function(nt,rt){if((_t=arguments.length-2)>0)for(var it=new Array(_t),st=0,_t,xt;st<_t;++st)it[st]=arguments[st+2];if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(xt=this._[nt],st=0,_t=xt.length;st<_t;++st)xt[st].value.apply(rt,it)},apply:function(nt,rt,it){if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(var st=this._[nt],_t=0,xt=st.length;_t<xt;++_t)st[_t].value.apply(rt,it)}};function get$3(nt,rt){for(var it=0,st=nt.length,_t;it<st;++it)if((_t=nt[it]).name===rt)return _t.value}function set$2(nt,rt,it){for(var st=0,_t=nt.length;st<_t;++st)if(nt[st].name===rt){nt[st]=noop$2,nt=nt.slice(0,st).concat(nt.slice(st+1));break}return it!=null&&nt.push({name:rt,value:it}),nt}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(nt){var rt=nt+="",it=rt.indexOf(":");return it>=0&&(rt=nt.slice(0,it))!=="xmlns"&&(nt=nt.slice(it+1)),namespaces.hasOwnProperty(rt)?{space:namespaces[rt],local:nt}:nt}function creatorInherit(nt){return function(){var rt=this.ownerDocument,it=this.namespaceURI;return it===xhtml&&rt.documentElement.namespaceURI===xhtml?rt.createElement(nt):rt.createElementNS(it,nt)}}function creatorFixed(nt){return function(){return this.ownerDocument.createElementNS(nt.space,nt.local)}}function creator(nt){var rt=namespace(nt);return(rt.local?creatorFixed:creatorInherit)(rt)}function none(){}function selector(nt){return nt==null?none:function(){return this.querySelector(nt)}}function selection_select(nt){typeof nt!="function"&&(nt=selector(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),_t=0;_t<it;++_t)for(var xt=rt[_t],Et=xt.length,kt=st[_t]=new Array(Et),Lt,It,Rt=0;Rt<Et;++Rt)(Lt=xt[Rt])&&(It=nt.call(Lt,Lt.__data__,Rt,xt))&&("__data__"in Lt&&(It.__data__=Lt.__data__),kt[Rt]=It);return new Selection$1(st,this._parents)}function array$1(nt){return nt==null?[]:Array.isArray(nt)?nt:Array.from(nt)}function empty(){return[]}function selectorAll(nt){return nt==null?empty:function(){return this.querySelectorAll(nt)}}function arrayAll(nt){return function(){return array$1(nt.apply(this,arguments))}}function selection_selectAll(nt){typeof nt=="function"?nt=arrayAll(nt):nt=selectorAll(nt);for(var rt=this._groups,it=rt.length,st=[],_t=[],xt=0;xt<it;++xt)for(var Et=rt[xt],kt=Et.length,Lt,It=0;It<kt;++It)(Lt=Et[It])&&(st.push(nt.call(Lt,Lt.__data__,It,Et)),_t.push(Lt));return new Selection$1(st,_t)}function matcher(nt){return function(){return this.matches(nt)}}function childMatcher(nt){return function(rt){return rt.matches(nt)}}var find$2=Array.prototype.find;function childFind(nt){return function(){return find$2.call(this.children,nt)}}function childFirst(){return this.firstElementChild}function selection_selectChild(nt){return this.select(nt==null?childFirst:childFind(typeof nt=="function"?nt:childMatcher(nt)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(nt){return function(){return filter$1.call(this.children,nt)}}function selection_selectChildren(nt){return this.selectAll(nt==null?children:childrenFilter(typeof nt=="function"?nt:childMatcher(nt)))}function selection_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),_t=0;_t<it;++_t)for(var xt=rt[_t],Et=xt.length,kt=st[_t]=[],Lt,It=0;It<Et;++It)(Lt=xt[It])&&nt.call(Lt,Lt.__data__,It,xt)&&kt.push(Lt);return new Selection$1(st,this._parents)}function sparse(nt){return new Array(nt.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(nt,rt){this.ownerDocument=nt.ownerDocument,this.namespaceURI=nt.namespaceURI,this._next=null,this._parent=nt,this.__data__=rt}EnterNode.prototype={constructor:EnterNode,appendChild:function(nt){return this._parent.insertBefore(nt,this._next)},insertBefore:function(nt,rt){return this._parent.insertBefore(nt,rt)},querySelector:function(nt){return this._parent.querySelector(nt)},querySelectorAll:function(nt){return this._parent.querySelectorAll(nt)}};function constant$3(nt){return function(){return nt}}function bindIndex(nt,rt,it,st,_t,xt){for(var Et=0,kt,Lt=rt.length,It=xt.length;Et<It;++Et)(kt=rt[Et])?(kt.__data__=xt[Et],st[Et]=kt):it[Et]=new EnterNode(nt,xt[Et]);for(;Et<Lt;++Et)(kt=rt[Et])&&(_t[Et]=kt)}function bindKey(nt,rt,it,st,_t,xt,Et){var kt,Lt,It=new Map,Rt=rt.length,Nt=xt.length,Bt=new Array(Rt),Ft;for(kt=0;kt<Rt;++kt)(Lt=rt[kt])&&(Bt[kt]=Ft=Et.call(Lt,Lt.__data__,kt,rt)+"",It.has(Ft)?_t[kt]=Lt:It.set(Ft,Lt));for(kt=0;kt<Nt;++kt)Ft=Et.call(nt,xt[kt],kt,xt)+"",(Lt=It.get(Ft))?(st[kt]=Lt,Lt.__data__=xt[kt],It.delete(Ft)):it[kt]=new EnterNode(nt,xt[kt]);for(kt=0;kt<Rt;++kt)(Lt=rt[kt])&&It.get(Bt[kt])===Lt&&(_t[kt]=Lt)}function datum(nt){return nt.__data__}function selection_data(nt,rt){if(!arguments.length)return Array.from(this,datum);var it=rt?bindKey:bindIndex,st=this._parents,_t=this._groups;typeof nt!="function"&&(nt=constant$3(nt));for(var xt=_t.length,Et=new Array(xt),kt=new Array(xt),Lt=new Array(xt),It=0;It<xt;++It){var Rt=st[It],Nt=_t[It],Bt=Nt.length,Ft=arraylike(nt.call(Rt,Rt&&Rt.__data__,It,st)),Yt=Ft.length,Zt=kt[It]=new Array(Yt),Wt=Et[It]=new Array(Yt),Kt=Lt[It]=new Array(Bt);it(Rt,Nt,Zt,Wt,Kt,Ft,rt);for(var Jt=0,on=0,rn,ln;Jt<Yt;++Jt)if(rn=Zt[Jt]){for(Jt>=on&&(on=Jt+1);!(ln=Wt[on])&&++on<Yt;);rn._next=ln||null}}return Et=new Selection$1(Et,st),Et._enter=kt,Et._exit=Lt,Et}function arraylike(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(nt,rt,it){var st=this.enter(),_t=this,xt=this.exit();return typeof nt=="function"?(st=nt(st),st&&(st=st.selection())):st=st.append(nt+""),rt!=null&&(_t=rt(_t),_t&&(_t=_t.selection())),it==null?xt.remove():it(xt),st&&_t?st.merge(_t).order():_t}function selection_merge(nt){for(var rt=nt.selection?nt.selection():nt,it=this._groups,st=rt._groups,_t=it.length,xt=st.length,Et=Math.min(_t,xt),kt=new Array(_t),Lt=0;Lt<Et;++Lt)for(var It=it[Lt],Rt=st[Lt],Nt=It.length,Bt=kt[Lt]=new Array(Nt),Ft,Yt=0;Yt<Nt;++Yt)(Ft=It[Yt]||Rt[Yt])&&(Bt[Yt]=Ft);for(;Lt<_t;++Lt)kt[Lt]=it[Lt];return new Selection$1(kt,this._parents)}function selection_order(){for(var nt=this._groups,rt=-1,it=nt.length;++rt<it;)for(var st=nt[rt],_t=st.length-1,xt=st[_t],Et;--_t>=0;)(Et=st[_t])&&(xt&&Et.compareDocumentPosition(xt)^4&&xt.parentNode.insertBefore(Et,xt),xt=Et);return this}function selection_sort(nt){nt||(nt=ascending);function rt(Nt,Bt){return Nt&&Bt?nt(Nt.__data__,Bt.__data__):!Nt-!Bt}for(var it=this._groups,st=it.length,_t=new Array(st),xt=0;xt<st;++xt){for(var Et=it[xt],kt=Et.length,Lt=_t[xt]=new Array(kt),It,Rt=0;Rt<kt;++Rt)(It=Et[Rt])&&(Lt[Rt]=It);Lt.sort(rt)}return new Selection$1(_t,this._parents).order()}function ascending(nt,rt){return nt<rt?-1:nt>rt?1:nt>=rt?0:NaN}function selection_call(){var nt=arguments[0];return arguments[0]=this,nt.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var st=nt[rt],_t=0,xt=st.length;_t<xt;++_t){var Et=st[_t];if(Et)return Et}return null}function selection_size(){let nt=0;for(const rt of this)++nt;return nt}function selection_empty(){return!this.node()}function selection_each(nt){for(var rt=this._groups,it=0,st=rt.length;it<st;++it)for(var _t=rt[it],xt=0,Et=_t.length,kt;xt<Et;++xt)(kt=_t[xt])&&nt.call(kt,kt.__data__,xt,_t);return this}function attrRemove$1(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS$1(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant$1(nt,rt){return function(){this.setAttribute(nt,rt)}}function attrConstantNS$1(nt,rt){return function(){this.setAttributeNS(nt.space,nt.local,rt)}}function attrFunction$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttribute(nt):this.setAttribute(nt,it)}}function attrFunctionNS$1(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?this.removeAttributeNS(nt.space,nt.local):this.setAttributeNS(nt.space,nt.local,it)}}function selection_attr(nt,rt){var it=namespace(nt);if(arguments.length<2){var st=this.node();return it.local?st.getAttributeNS(it.space,it.local):st.getAttribute(it)}return this.each((rt==null?it.local?attrRemoveNS$1:attrRemove$1:typeof rt=="function"?it.local?attrFunctionNS$1:attrFunction$1:it.local?attrConstantNS$1:attrConstant$1)(it,rt))}function defaultView(nt){return nt.ownerDocument&&nt.ownerDocument.defaultView||nt.document&&nt||nt.defaultView}function styleRemove$1(nt){return function(){this.style.removeProperty(nt)}}function styleConstant$1(nt,rt,it){return function(){this.style.setProperty(nt,rt,it)}}function styleFunction$1(nt,rt,it){return function(){var st=rt.apply(this,arguments);st==null?this.style.removeProperty(nt):this.style.setProperty(nt,st,it)}}function selection_style(nt,rt,it){return arguments.length>1?this.each((rt==null?styleRemove$1:typeof rt=="function"?styleFunction$1:styleConstant$1)(nt,rt,it==null?"":it)):styleValue(this.node(),nt)}function styleValue(nt,rt){return nt.style.getPropertyValue(rt)||defaultView(nt).getComputedStyle(nt,null).getPropertyValue(rt)}function propertyRemove(nt){return function(){delete this[nt]}}function propertyConstant(nt,rt){return function(){this[nt]=rt}}function propertyFunction(nt,rt){return function(){var it=rt.apply(this,arguments);it==null?delete this[nt]:this[nt]=it}}function selection_property(nt,rt){return arguments.length>1?this.each((rt==null?propertyRemove:typeof rt=="function"?propertyFunction:propertyConstant)(nt,rt)):this.node()[nt]}function classArray(nt){return nt.trim().split(/^|\s+/)}function classList(nt){return nt.classList||new ClassList(nt)}function ClassList(nt){this._node=nt,this._names=classArray(nt.getAttribute("class")||"")}ClassList.prototype={add:function(nt){var rt=this._names.indexOf(nt);rt<0&&(this._names.push(nt),this._node.setAttribute("class",this._names.join(" ")))},remove:function(nt){var rt=this._names.indexOf(nt);rt>=0&&(this._names.splice(rt,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(nt){return this._names.indexOf(nt)>=0}};function classedAdd(nt,rt){for(var it=classList(nt),st=-1,_t=rt.length;++st<_t;)it.add(rt[st])}function classedRemove(nt,rt){for(var it=classList(nt),st=-1,_t=rt.length;++st<_t;)it.remove(rt[st])}function classedTrue(nt){return function(){classedAdd(this,nt)}}function classedFalse(nt){return function(){classedRemove(this,nt)}}function classedFunction(nt,rt){return function(){(rt.apply(this,arguments)?classedAdd:classedRemove)(this,nt)}}function selection_classed(nt,rt){var it=classArray(nt+"");if(arguments.length<2){for(var st=classList(this.node()),_t=-1,xt=it.length;++_t<xt;)if(!st.contains(it[_t]))return!1;return!0}return this.each((typeof rt=="function"?classedFunction:rt?classedTrue:classedFalse)(it,rt))}function textRemove(){this.textContent=""}function textConstant$1(nt){return function(){this.textContent=nt}}function textFunction$1(nt){return function(){var rt=nt.apply(this,arguments);this.textContent=rt==null?"":rt}}function selection_text(nt){return arguments.length?this.each(nt==null?textRemove:(typeof nt=="function"?textFunction$1:textConstant$1)(nt)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(nt){return function(){this.innerHTML=nt}}function htmlFunction(nt){return function(){var rt=nt.apply(this,arguments);this.innerHTML=rt==null?"":rt}}function selection_html(nt){return arguments.length?this.each(nt==null?htmlRemove:(typeof nt=="function"?htmlFunction:htmlConstant)(nt)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(nt){var rt=typeof nt=="function"?nt:creator(nt);return this.select(function(){return this.appendChild(rt.apply(this,arguments))})}function constantNull(){return null}function selection_insert(nt,rt){var it=typeof nt=="function"?nt:creator(nt),st=rt==null?constantNull:typeof rt=="function"?rt:selector(rt);return this.select(function(){return this.insertBefore(it.apply(this,arguments),st.apply(this,arguments)||null)})}function remove(){var nt=this.parentNode;nt&&nt.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var nt=this.cloneNode(!1),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_cloneDeep(){var nt=this.cloneNode(!0),rt=this.parentNode;return rt?rt.insertBefore(nt,this.nextSibling):nt}function selection_clone(nt){return this.select(nt?selection_cloneDeep:selection_cloneShallow)}function selection_datum(nt){return arguments.length?this.property("__data__",nt):this.node().__data__}function contextListener(nt){return function(rt){nt.call(this,rt,this.__data__)}}function parseTypenames(nt){return nt.trim().split(/^|\s+/).map(function(rt){var it="",st=rt.indexOf(".");return st>=0&&(it=rt.slice(st+1),rt=rt.slice(0,st)),{type:rt,name:it}})}function onRemove(nt){return function(){var rt=this.__on;if(!!rt){for(var it=0,st=-1,_t=rt.length,xt;it<_t;++it)xt=rt[it],(!nt.type||xt.type===nt.type)&&xt.name===nt.name?this.removeEventListener(xt.type,xt.listener,xt.options):rt[++st]=xt;++st?rt.length=st:delete this.__on}}}function onAdd(nt,rt,it){return function(){var st=this.__on,_t,xt=contextListener(rt);if(st){for(var Et=0,kt=st.length;Et<kt;++Et)if((_t=st[Et]).type===nt.type&&_t.name===nt.name){this.removeEventListener(_t.type,_t.listener,_t.options),this.addEventListener(_t.type,_t.listener=xt,_t.options=it),_t.value=rt;return}}this.addEventListener(nt.type,xt,it),_t={type:nt.type,name:nt.name,value:rt,listener:xt,options:it},st?st.push(_t):this.__on=[_t]}}function selection_on(nt,rt,it){var st=parseTypenames(nt+""),_t,xt=st.length,Et;if(arguments.length<2){var kt=this.node().__on;if(kt){for(var Lt=0,It=kt.length,Rt;Lt<It;++Lt)for(_t=0,Rt=kt[Lt];_t<xt;++_t)if((Et=st[_t]).type===Rt.type&&Et.name===Rt.name)return Rt.value}return}for(kt=rt?onAdd:onRemove,_t=0;_t<xt;++_t)this.each(kt(st[_t],rt,it));return this}function dispatchEvent(nt,rt,it){var st=defaultView(nt),_t=st.CustomEvent;typeof _t=="function"?_t=new _t(rt,it):(_t=st.document.createEvent("Event"),it?(_t.initEvent(rt,it.bubbles,it.cancelable),_t.detail=it.detail):_t.initEvent(rt,!1,!1)),nt.dispatchEvent(_t)}function dispatchConstant(nt,rt){return function(){return dispatchEvent(this,nt,rt)}}function dispatchFunction(nt,rt){return function(){return dispatchEvent(this,nt,rt.apply(this,arguments))}}function selection_dispatch(nt,rt){return this.each((typeof rt=="function"?dispatchFunction:dispatchConstant)(nt,rt))}function*selection_iterator(){for(var nt=this._groups,rt=0,it=nt.length;rt<it;++rt)for(var st=nt[rt],_t=0,xt=st.length,Et;_t<xt;++_t)(Et=st[_t])&&(yield Et)}var root$2=[null];function Selection$1(nt,rt){this._groups=nt,this._parents=rt}function selection(){return new Selection$1([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(nt){return typeof nt=="string"?new Selection$1([[document.querySelector(nt)]],[document.documentElement]):new Selection$1([[nt]],root$2)}function selectAll(nt){return typeof nt=="string"?new Selection$1([document.querySelectorAll(nt)],[document.documentElement]):new Selection$1([array$1(nt)],root$2)}function define$1(nt,rt,it){nt.prototype=rt.prototype=it,it.constructor=nt}function extend$1(nt,rt){var it=Object.create(nt.prototype);for(var st in rt)it[st]=rt[st];return it}function Color$2(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color$2,color,{copy(nt){return Object.assign(new this.constructor,this,nt)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(nt){var rt,it;return nt=(nt+"").trim().toLowerCase(),(rt=reHex.exec(nt))?(it=rt[1].length,rt=parseInt(rt[1],16),it===6?rgbn(rt):it===3?new Rgb(rt>>8&15|rt>>4&240,rt>>4&15|rt&240,(rt&15)<<4|rt&15,1):it===8?rgba$2(rt>>24&255,rt>>16&255,rt>>8&255,(rt&255)/255):it===4?rgba$2(rt>>12&15|rt>>8&240,rt>>8&15|rt>>4&240,rt>>4&15|rt&240,((rt&15)<<4|rt&15)/255):null):(rt=reRgbInteger.exec(nt))?new Rgb(rt[1],rt[2],rt[3],1):(rt=reRgbPercent.exec(nt))?new Rgb(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,1):(rt=reRgbaInteger.exec(nt))?rgba$2(rt[1],rt[2],rt[3],rt[4]):(rt=reRgbaPercent.exec(nt))?rgba$2(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,rt[4]):(rt=reHslPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,1):(rt=reHslaPercent.exec(nt))?hsla(rt[1],rt[2]/100,rt[3]/100,rt[4]):named.hasOwnProperty(nt)?rgbn(named[nt]):nt==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(nt){return new Rgb(nt>>16&255,nt>>8&255,nt&255,1)}function rgba$2(nt,rt,it,st){return st<=0&&(nt=rt=it=NaN),new Rgb(nt,rt,it,st)}function rgbConvert(nt){return nt instanceof Color$2||(nt=color(nt)),nt?(nt=nt.rgb(),new Rgb(nt.r,nt.g,nt.b,nt.opacity)):new Rgb}function rgb(nt,rt,it,st){return arguments.length===1?rgbConvert(nt):new Rgb(nt,rt,it,st==null?1:st)}function Rgb(nt,rt,it,st){this.r=+nt,this.g=+rt,this.b=+it,this.opacity=+st}define$1(Rgb,rgb,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const nt=clampa(this.opacity);return`${nt===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${nt===1?")":`, ${nt})`}`}function clampa(nt){return isNaN(nt)?1:Math.max(0,Math.min(1,nt))}function clampi(nt){return Math.max(0,Math.min(255,Math.round(nt)||0))}function hex(nt){return nt=clampi(nt),(nt<16?"0":"")+nt.toString(16)}function hsla(nt,rt,it,st){return st<=0?nt=rt=it=NaN:it<=0||it>=1?nt=rt=NaN:rt<=0&&(nt=NaN),new Hsl(nt,rt,it,st)}function hslConvert(nt){if(nt instanceof Hsl)return new Hsl(nt.h,nt.s,nt.l,nt.opacity);if(nt instanceof Color$2||(nt=color(nt)),!nt)return new Hsl;if(nt instanceof Hsl)return nt;nt=nt.rgb();var rt=nt.r/255,it=nt.g/255,st=nt.b/255,_t=Math.min(rt,it,st),xt=Math.max(rt,it,st),Et=NaN,kt=xt-_t,Lt=(xt+_t)/2;return kt?(rt===xt?Et=(it-st)/kt+(it<st)*6:it===xt?Et=(st-rt)/kt+2:Et=(rt-it)/kt+4,kt/=Lt<.5?xt+_t:2-xt-_t,Et*=60):kt=Lt>0&&Lt<1?0:Et,new Hsl(Et,kt,Lt,nt.opacity)}function hsl(nt,rt,it,st){return arguments.length===1?hslConvert(nt):new Hsl(nt,rt,it,st==null?1:st)}function Hsl(nt,rt,it,st){this.h=+nt,this.s=+rt,this.l=+it,this.opacity=+st}define$1(Hsl,hsl,extend$1(Color$2,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},rgb(){var nt=this.h%360+(this.h<0)*360,rt=isNaN(nt)||isNaN(this.s)?0:this.s,it=this.l,st=it+(it<.5?it:1-it)*rt,_t=2*it-st;return new Rgb(hsl2rgb(nt>=240?nt-240:nt+120,_t,st),hsl2rgb(nt,_t,st),hsl2rgb(nt<120?nt+240:nt-120,_t,st),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const nt=clampa(this.opacity);return`${nt===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${nt===1?")":`, ${nt})`}`}}));function clamph(nt){return nt=(nt||0)%360,nt<0?nt+360:nt}function clampt(nt){return Math.max(0,Math.min(1,nt||0))}function hsl2rgb(nt,rt,it){return(nt<60?rt+(it-rt)*nt/60:nt<180?it:nt<240?rt+(it-rt)*(240-nt)/60:rt)*255}const radians=Math.PI/180,degrees$1=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(nt){if(nt instanceof Lab)return new Lab(nt.l,nt.a,nt.b,nt.opacity);if(nt instanceof Hcl)return hcl2lab(nt);nt instanceof Rgb||(nt=rgbConvert(nt));var rt=rgb2lrgb(nt.r),it=rgb2lrgb(nt.g),st=rgb2lrgb(nt.b),_t=xyz2lab((.2225045*rt+.7168786*it+.0606169*st)/Yn),xt,Et;return rt===it&&it===st?xt=Et=_t:(xt=xyz2lab((.4360747*rt+.3850649*it+.1430804*st)/Xn),Et=xyz2lab((.0139322*rt+.0971045*it+.7141733*st)/Zn)),new Lab(116*_t-16,500*(xt-_t),200*(_t-Et),nt.opacity)}function lab(nt,rt,it,st){return arguments.length===1?labConvert(nt):new Lab(nt,rt,it,st==null?1:st)}function Lab(nt,rt,it,st){this.l=+nt,this.a=+rt,this.b=+it,this.opacity=+st}define$1(Lab,lab,extend$1(Color$2,{brighter(nt){return new Lab(this.l+K*(nt==null?1:nt),this.a,this.b,this.opacity)},darker(nt){return new Lab(this.l-K*(nt==null?1:nt),this.a,this.b,this.opacity)},rgb(){var nt=(this.l+16)/116,rt=isNaN(this.a)?nt:nt+this.a/500,it=isNaN(this.b)?nt:nt-this.b/200;return rt=Xn*lab2xyz(rt),nt=Yn*lab2xyz(nt),it=Zn*lab2xyz(it),new Rgb(lrgb2rgb(3.1338561*rt-1.6168667*nt-.4906146*it),lrgb2rgb(-.9787684*rt+1.9161415*nt+.033454*it),lrgb2rgb(.0719453*rt-.2289914*nt+1.4052427*it),this.opacity)}}));function xyz2lab(nt){return nt>t3?Math.pow(nt,1/3):nt/t2+t0$1}function lab2xyz(nt){return nt>t1$1?nt*nt*nt:t2*(nt-t0$1)}function lrgb2rgb(nt){return 255*(nt<=.0031308?12.92*nt:1.055*Math.pow(nt,1/2.4)-.055)}function rgb2lrgb(nt){return(nt/=255)<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)}function hclConvert(nt){if(nt instanceof Hcl)return new Hcl(nt.h,nt.c,nt.l,nt.opacity);if(nt instanceof Lab||(nt=labConvert(nt)),nt.a===0&&nt.b===0)return new Hcl(NaN,0<nt.l&&nt.l<100?0:NaN,nt.l,nt.opacity);var rt=Math.atan2(nt.b,nt.a)*degrees$1;return new Hcl(rt<0?rt+360:rt,Math.sqrt(nt.a*nt.a+nt.b*nt.b),nt.l,nt.opacity)}function hcl$1(nt,rt,it,st){return arguments.length===1?hclConvert(nt):new Hcl(nt,rt,it,st==null?1:st)}function Hcl(nt,rt,it,st){this.h=+nt,this.c=+rt,this.l=+it,this.opacity=+st}function hcl2lab(nt){if(isNaN(nt.h))return new Lab(nt.l,0,0,nt.opacity);var rt=nt.h*radians;return new Lab(nt.l,Math.cos(rt)*nt.c,Math.sin(rt)*nt.c,nt.opacity)}define$1(Hcl,hcl$1,extend$1(Color$2,{brighter(nt){return new Hcl(this.h,this.c,this.l+K*(nt==null?1:nt),this.opacity)},darker(nt){return new Hcl(this.h,this.c,this.l-K*(nt==null?1:nt),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));const constant$2=nt=>()=>nt;function linear$1(nt,rt){return function(it){return nt+it*rt}}function exponential(nt,rt,it){return nt=Math.pow(nt,it),rt=Math.pow(rt,it)-nt,it=1/it,function(st){return Math.pow(nt+st*rt,it)}}function hue(nt,rt){var it=rt-nt;return it?linear$1(nt,it>180||it<-180?it-360*Math.round(it/360):it):constant$2(isNaN(nt)?rt:nt)}function gamma(nt){return(nt=+nt)==1?nogamma:function(rt,it){return it-rt?exponential(rt,it,nt):constant$2(isNaN(rt)?it:rt)}}function nogamma(nt,rt){var it=rt-nt;return it?linear$1(nt,it):constant$2(isNaN(nt)?rt:nt)}const interpolateRgb=function nt(rt){var it=gamma(rt);function st(_t,xt){var Et=it((_t=rgb(_t)).r,(xt=rgb(xt)).r),kt=it(_t.g,xt.g),Lt=it(_t.b,xt.b),It=nogamma(_t.opacity,xt.opacity);return function(Rt){return _t.r=Et(Rt),_t.g=kt(Rt),_t.b=Lt(Rt),_t.opacity=It(Rt),_t+""}}return st.gamma=nt,st}(1);function numberArray(nt,rt){rt||(rt=[]);var it=nt?Math.min(rt.length,nt.length):0,st=rt.slice(),_t;return function(xt){for(_t=0;_t<it;++_t)st[_t]=nt[_t]*(1-xt)+rt[_t]*xt;return st}}function isNumberArray(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function genericArray(nt,rt){var it=rt?rt.length:0,st=nt?Math.min(it,nt.length):0,_t=new Array(st),xt=new Array(it),Et;for(Et=0;Et<st;++Et)_t[Et]=interpolate$1(nt[Et],rt[Et]);for(;Et<it;++Et)xt[Et]=rt[Et];return function(kt){for(Et=0;Et<st;++Et)xt[Et]=_t[Et](kt);return xt}}function date$1(nt,rt){var it=new Date;return nt=+nt,rt=+rt,function(st){return it.setTime(nt*(1-st)+rt*st),it}}function interpolateNumber(nt,rt){return nt=+nt,rt=+rt,function(it){return nt*(1-it)+rt*it}}function object(nt,rt){var it={},st={},_t;(nt===null||typeof nt!="object")&&(nt={}),(rt===null||typeof rt!="object")&&(rt={});for(_t in rt)_t in nt?it[_t]=interpolate$1(nt[_t],rt[_t]):st[_t]=rt[_t];return function(xt){for(_t in it)st[_t]=it[_t](xt);return st}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(nt){return function(){return nt}}function one(nt){return function(rt){return nt(rt)+""}}function interpolateString(nt,rt){var it=reA.lastIndex=reB.lastIndex=0,st,_t,xt,Et=-1,kt=[],Lt=[];for(nt=nt+"",rt=rt+"";(st=reA.exec(nt))&&(_t=reB.exec(rt));)(xt=_t.index)>it&&(xt=rt.slice(it,xt),kt[Et]?kt[Et]+=xt:kt[++Et]=xt),(st=st[0])===(_t=_t[0])?kt[Et]?kt[Et]+=_t:kt[++Et]=_t:(kt[++Et]=null,Lt.push({i:Et,x:interpolateNumber(st,_t)})),it=reB.lastIndex;return it<rt.length&&(xt=rt.slice(it),kt[Et]?kt[Et]+=xt:kt[++Et]=xt),kt.length<2?Lt[0]?one(Lt[0].x):zero(rt):(rt=Lt.length,function(It){for(var Rt=0,Nt;Rt<rt;++Rt)kt[(Nt=Lt[Rt]).i]=Nt.x(It);return kt.join("")})}function interpolate$1(nt,rt){var it=typeof rt,st;return rt==null||it==="boolean"?constant$2(rt):(it==="number"?interpolateNumber:it==="string"?(st=color(rt))?(rt=st,interpolateRgb):interpolateString:rt instanceof color?interpolateRgb:rt instanceof Date?date$1:isNumberArray(rt)?numberArray:Array.isArray(rt)?genericArray:typeof rt.valueOf!="function"&&typeof rt.toString!="function"||isNaN(rt)?object:interpolateNumber)(nt,rt)}function interpolateRound(nt,rt){return nt=+nt,rt=+rt,function(it){return Math.round(nt*(1-it)+rt*it)}}var degrees=180/Math.PI,identity$4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(nt,rt,it,st,_t,xt){var Et,kt,Lt;return(Et=Math.sqrt(nt*nt+rt*rt))&&(nt/=Et,rt/=Et),(Lt=nt*it+rt*st)&&(it-=nt*Lt,st-=rt*Lt),(kt=Math.sqrt(it*it+st*st))&&(it/=kt,st/=kt,Lt/=kt),nt*st<rt*it&&(nt=-nt,rt=-rt,Lt=-Lt,Et=-Et),{translateX:_t,translateY:xt,rotate:Math.atan2(rt,nt)*degrees,skewX:Math.atan(Lt)*degrees,scaleX:Et,scaleY:kt}}var svgNode;function parseCss(nt){const rt=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(nt+"");return rt.isIdentity?identity$4:decompose(rt.a,rt.b,rt.c,rt.d,rt.e,rt.f)}function parseSvg(nt){return nt==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",nt),!(nt=svgNode.transform.baseVal.consolidate()))?identity$4:(nt=nt.matrix,decompose(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f))}function interpolateTransform(nt,rt,it,st){function _t(It){return It.length?It.pop()+" ":""}function xt(It,Rt,Nt,Bt,Ft,Yt){if(It!==Nt||Rt!==Bt){var Zt=Ft.push("translate(",null,rt,null,it);Yt.push({i:Zt-4,x:interpolateNumber(It,Nt)},{i:Zt-2,x:interpolateNumber(Rt,Bt)})}else(Nt||Bt)&&Ft.push("translate("+Nt+rt+Bt+it)}function Et(It,Rt,Nt,Bt){It!==Rt?(It-Rt>180?Rt+=360:Rt-It>180&&(It+=360),Bt.push({i:Nt.push(_t(Nt)+"rotate(",null,st)-2,x:interpolateNumber(It,Rt)})):Rt&&Nt.push(_t(Nt)+"rotate("+Rt+st)}function kt(It,Rt,Nt,Bt){It!==Rt?Bt.push({i:Nt.push(_t(Nt)+"skewX(",null,st)-2,x:interpolateNumber(It,Rt)}):Rt&&Nt.push(_t(Nt)+"skewX("+Rt+st)}function Lt(It,Rt,Nt,Bt,Ft,Yt){if(It!==Nt||Rt!==Bt){var Zt=Ft.push(_t(Ft)+"scale(",null,",",null,")");Yt.push({i:Zt-4,x:interpolateNumber(It,Nt)},{i:Zt-2,x:interpolateNumber(Rt,Bt)})}else(Nt!==1||Bt!==1)&&Ft.push(_t(Ft)+"scale("+Nt+","+Bt+")")}return function(It,Rt){var Nt=[],Bt=[];return It=nt(It),Rt=nt(Rt),xt(It.translateX,It.translateY,Rt.translateX,Rt.translateY,Nt,Bt),Et(It.rotate,Rt.rotate,Nt,Bt),kt(It.skewX,Rt.skewX,Nt,Bt),Lt(It.scaleX,It.scaleY,Rt.scaleX,Rt.scaleY,Nt,Bt),It=Rt=null,function(Ft){for(var Yt=-1,Zt=Bt.length,Wt;++Yt<Zt;)Nt[(Wt=Bt[Yt]).i]=Wt.x(Ft);return Nt.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function hcl(nt){return function(rt,it){var st=nt((rt=hcl$1(rt)).h,(it=hcl$1(it)).h),_t=nogamma(rt.c,it.c),xt=nogamma(rt.l,it.l),Et=nogamma(rt.opacity,it.opacity);return function(kt){return rt.h=st(kt),rt.c=_t(kt),rt.l=xt(kt),rt.opacity=Et(kt),rt+""}}}const interpolateHcl=hcl(hue);var frame$1=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(nt){setTimeout(nt,17)};function now$2(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(nt,rt,it){if(typeof nt!="function")throw new TypeError("callback is not a function");it=(it==null?now$2():+it)+(rt==null?0:+rt),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=nt,this._time=it,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(nt,rt,it){var st=new Timer;return st.restart(nt,rt,it),st}function timerFlush(){now$2(),++frame$1;for(var nt=taskHead,rt;nt;)(rt=clockNow-nt._time)>=0&&nt._call.call(void 0,rt),nt=nt._next;--frame$1}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame$1=timeout$1=0;try{timerFlush()}finally{frame$1=0,nap(),clockNow=0}}function poke(){var nt=clock.now(),rt=nt-clockLast;rt>pokeDelay&&(clockSkew-=rt,clockLast=nt)}function nap(){for(var nt,rt=taskHead,it,st=1/0;rt;)rt._call?(st>rt._time&&(st=rt._time),nt=rt,rt=rt._next):(it=rt._next,rt._next=null,rt=nt?nt._next=it:taskHead=it);taskTail=nt,sleep(st)}function sleep(nt){if(!frame$1){timeout$1&&(timeout$1=clearTimeout(timeout$1));var rt=nt-clockNow;rt>24?(nt<1/0&&(timeout$1=setTimeout(wake,nt-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame$1=1,setFrame(wake))}}function timeout(nt,rt,it){var st=new Timer;return rt=rt==null?0:+rt,st.restart(_t=>{st.stop(),nt(_t+rt)},rt,it),st}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(nt,rt,it,st,_t,xt){var Et=nt.__transition;if(!Et)nt.__transition={};else if(it in Et)return;create$1(nt,it,{name:rt,index:st,group:_t,on:emptyOn,tween:emptyTween,time:xt.time,delay:xt.delay,duration:xt.duration,ease:xt.ease,timer:null,state:CREATED})}function init$2(nt,rt){var it=get$2(nt,rt);if(it.state>CREATED)throw new Error("too late; already scheduled");return it}function set(nt,rt){var it=get$2(nt,rt);if(it.state>STARTED)throw new Error("too late; already running");return it}function get$2(nt,rt){var it=nt.__transition;if(!it||!(it=it[rt]))throw new Error("transition not found");return it}function create$1(nt,rt,it){var st=nt.__transition,_t;st[rt]=it,it.timer=timer(xt,0,it.time);function xt(It){it.state=SCHEDULED,it.timer.restart(Et,it.delay,it.time),it.delay<=It&&Et(It-it.delay)}function Et(It){var Rt,Nt,Bt,Ft;if(it.state!==SCHEDULED)return Lt();for(Rt in st)if(Ft=st[Rt],Ft.name===it.name){if(Ft.state===STARTED)return timeout(Et);Ft.state===RUNNING?(Ft.state=ENDED,Ft.timer.stop(),Ft.on.call("interrupt",nt,nt.__data__,Ft.index,Ft.group),delete st[Rt]):+Rt<rt&&(Ft.state=ENDED,Ft.timer.stop(),Ft.on.call("cancel",nt,nt.__data__,Ft.index,Ft.group),delete st[Rt])}if(timeout(function(){it.state===STARTED&&(it.state=RUNNING,it.timer.restart(kt,it.delay,it.time),kt(It))}),it.state=STARTING,it.on.call("start",nt,nt.__data__,it.index,it.group),it.state===STARTING){for(it.state=STARTED,_t=new Array(Bt=it.tween.length),Rt=0,Nt=-1;Rt<Bt;++Rt)(Ft=it.tween[Rt].value.call(nt,nt.__data__,it.index,it.group))&&(_t[++Nt]=Ft);_t.length=Nt+1}}function kt(It){for(var Rt=It<it.duration?it.ease.call(null,It/it.duration):(it.timer.restart(Lt),it.state=ENDING,1),Nt=-1,Bt=_t.length;++Nt<Bt;)_t[Nt].call(nt,Rt);it.state===ENDING&&(it.on.call("end",nt,nt.__data__,it.index,it.group),Lt())}function Lt(){it.state=ENDED,it.timer.stop(),delete st[rt];for(var It in st)return;delete nt.__transition}}function interrupt(nt,rt){var it=nt.__transition,st,_t,xt=!0,Et;if(!!it){rt=rt==null?null:rt+"";for(Et in it){if((st=it[Et]).name!==rt){xt=!1;continue}_t=st.state>STARTING&&st.state<ENDING,st.state=ENDED,st.timer.stop(),st.on.call(_t?"interrupt":"cancel",nt,nt.__data__,st.index,st.group),delete it[Et]}xt&&delete nt.__transition}}function selection_interrupt(nt){return this.each(function(){interrupt(this,nt)})}function tweenRemove(nt,rt){var it,st;return function(){var _t=set(this,nt),xt=_t.tween;if(xt!==it){st=it=xt;for(var Et=0,kt=st.length;Et<kt;++Et)if(st[Et].name===rt){st=st.slice(),st.splice(Et,1);break}}_t.tween=st}}function tweenFunction(nt,rt,it){var st,_t;if(typeof it!="function")throw new Error;return function(){var xt=set(this,nt),Et=xt.tween;if(Et!==st){_t=(st=Et).slice();for(var kt={name:rt,value:it},Lt=0,It=_t.length;Lt<It;++Lt)if(_t[Lt].name===rt){_t[Lt]=kt;break}Lt===It&&_t.push(kt)}xt.tween=_t}}function transition_tween(nt,rt){var it=this._id;if(nt+="",arguments.length<2){for(var st=get$2(this.node(),it).tween,_t=0,xt=st.length,Et;_t<xt;++_t)if((Et=st[_t]).name===nt)return Et.value;return null}return this.each((rt==null?tweenRemove:tweenFunction)(it,nt,rt))}function tweenValue(nt,rt,it){var st=nt._id;return nt.each(function(){var _t=set(this,st);(_t.value||(_t.value={}))[rt]=it.apply(this,arguments)}),function(_t){return get$2(_t,st).value[rt]}}function interpolate(nt,rt){var it;return(typeof rt=="number"?interpolateNumber:rt instanceof color?interpolateRgb:(it=color(rt))?(rt=it,interpolateRgb):interpolateString)(nt,rt)}function attrRemove(nt){return function(){this.removeAttribute(nt)}}function attrRemoveNS(nt){return function(){this.removeAttributeNS(nt.space,nt.local)}}function attrConstant(nt,rt,it){var st,_t=it+"",xt;return function(){var Et=this.getAttribute(nt);return Et===_t?null:Et===st?xt:xt=rt(st=Et,it)}}function attrConstantNS(nt,rt,it){var st,_t=it+"",xt;return function(){var Et=this.getAttributeNS(nt.space,nt.local);return Et===_t?null:Et===st?xt:xt=rt(st=Et,it)}}function attrFunction(nt,rt,it){var st,_t,xt;return function(){var Et,kt=it(this),Lt;return kt==null?void this.removeAttribute(nt):(Et=this.getAttribute(nt),Lt=kt+"",Et===Lt?null:Et===st&&Lt===_t?xt:(_t=Lt,xt=rt(st=Et,kt)))}}function attrFunctionNS(nt,rt,it){var st,_t,xt;return function(){var Et,kt=it(this),Lt;return kt==null?void this.removeAttributeNS(nt.space,nt.local):(Et=this.getAttributeNS(nt.space,nt.local),Lt=kt+"",Et===Lt?null:Et===st&&Lt===_t?xt:(_t=Lt,xt=rt(st=Et,kt)))}}function transition_attr(nt,rt){var it=namespace(nt),st=it==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(nt,typeof rt=="function"?(it.local?attrFunctionNS:attrFunction)(it,st,tweenValue(this,"attr."+nt,rt)):rt==null?(it.local?attrRemoveNS:attrRemove)(it):(it.local?attrConstantNS:attrConstant)(it,st,rt))}function attrInterpolate(nt,rt){return function(it){this.setAttribute(nt,rt.call(this,it))}}function attrInterpolateNS(nt,rt){return function(it){this.setAttributeNS(nt.space,nt.local,rt.call(this,it))}}function attrTweenNS(nt,rt){var it,st;function _t(){var xt=rt.apply(this,arguments);return xt!==st&&(it=(st=xt)&&attrInterpolateNS(nt,xt)),it}return _t._value=rt,_t}function attrTween(nt,rt){var it,st;function _t(){var xt=rt.apply(this,arguments);return xt!==st&&(it=(st=xt)&&attrInterpolate(nt,xt)),it}return _t._value=rt,_t}function transition_attrTween(nt,rt){var it="attr."+nt;if(arguments.length<2)return(it=this.tween(it))&&it._value;if(rt==null)return this.tween(it,null);if(typeof rt!="function")throw new Error;var st=namespace(nt);return this.tween(it,(st.local?attrTweenNS:attrTween)(st,rt))}function delayFunction(nt,rt){return function(){init$2(this,nt).delay=+rt.apply(this,arguments)}}function delayConstant(nt,rt){return rt=+rt,function(){init$2(this,nt).delay=rt}}function transition_delay(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?delayFunction:delayConstant)(rt,nt)):get$2(this.node(),rt).delay}function durationFunction(nt,rt){return function(){set(this,nt).duration=+rt.apply(this,arguments)}}function durationConstant(nt,rt){return rt=+rt,function(){set(this,nt).duration=rt}}function transition_duration(nt){var rt=this._id;return arguments.length?this.each((typeof nt=="function"?durationFunction:durationConstant)(rt,nt)):get$2(this.node(),rt).duration}function easeConstant(nt,rt){if(typeof rt!="function")throw new Error;return function(){set(this,nt).ease=rt}}function transition_ease(nt){var rt=this._id;return arguments.length?this.each(easeConstant(rt,nt)):get$2(this.node(),rt).ease}function easeVarying(nt,rt){return function(){var it=rt.apply(this,arguments);if(typeof it!="function")throw new Error;set(this,nt).ease=it}}function transition_easeVarying(nt){if(typeof nt!="function")throw new Error;return this.each(easeVarying(this._id,nt))}function transition_filter(nt){typeof nt!="function"&&(nt=matcher(nt));for(var rt=this._groups,it=rt.length,st=new Array(it),_t=0;_t<it;++_t)for(var xt=rt[_t],Et=xt.length,kt=st[_t]=[],Lt,It=0;It<Et;++It)(Lt=xt[It])&&nt.call(Lt,Lt.__data__,It,xt)&&kt.push(Lt);return new Transition(st,this._parents,this._name,this._id)}function transition_merge(nt){if(nt._id!==this._id)throw new Error;for(var rt=this._groups,it=nt._groups,st=rt.length,_t=it.length,xt=Math.min(st,_t),Et=new Array(st),kt=0;kt<xt;++kt)for(var Lt=rt[kt],It=it[kt],Rt=Lt.length,Nt=Et[kt]=new Array(Rt),Bt,Ft=0;Ft<Rt;++Ft)(Bt=Lt[Ft]||It[Ft])&&(Nt[Ft]=Bt);for(;kt<st;++kt)Et[kt]=rt[kt];return new Transition(Et,this._parents,this._name,this._id)}function start$1(nt){return(nt+"").trim().split(/^|\s+/).every(function(rt){var it=rt.indexOf(".");return it>=0&&(rt=rt.slice(0,it)),!rt||rt==="start"})}function onFunction(nt,rt,it){var st,_t,xt=start$1(rt)?init$2:set;return function(){var Et=xt(this,nt),kt=Et.on;kt!==st&&(_t=(st=kt).copy()).on(rt,it),Et.on=_t}}function transition_on(nt,rt){var it=this._id;return arguments.length<2?get$2(this.node(),it).on.on(nt):this.each(onFunction(it,nt,rt))}function removeFunction(nt){return function(){var rt=this.parentNode;for(var it in this.__transition)if(+it!==nt)return;rt&&rt.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selector(nt));for(var st=this._groups,_t=st.length,xt=new Array(_t),Et=0;Et<_t;++Et)for(var kt=st[Et],Lt=kt.length,It=xt[Et]=new Array(Lt),Rt,Nt,Bt=0;Bt<Lt;++Bt)(Rt=kt[Bt])&&(Nt=nt.call(Rt,Rt.__data__,Bt,kt))&&("__data__"in Rt&&(Nt.__data__=Rt.__data__),It[Bt]=Nt,schedule(It[Bt],rt,it,Bt,It,get$2(Rt,it)));return new Transition(xt,this._parents,rt,it)}function transition_selectAll(nt){var rt=this._name,it=this._id;typeof nt!="function"&&(nt=selectorAll(nt));for(var st=this._groups,_t=st.length,xt=[],Et=[],kt=0;kt<_t;++kt)for(var Lt=st[kt],It=Lt.length,Rt,Nt=0;Nt<It;++Nt)if(Rt=Lt[Nt]){for(var Bt=nt.call(Rt,Rt.__data__,Nt,Lt),Ft,Yt=get$2(Rt,it),Zt=0,Wt=Bt.length;Zt<Wt;++Zt)(Ft=Bt[Zt])&&schedule(Ft,rt,it,Zt,Bt,Yt);xt.push(Bt),Et.push(Rt)}return new Transition(xt,Et,rt,it)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(nt,rt){var it,st,_t;return function(){var xt=styleValue(this,nt),Et=(this.style.removeProperty(nt),styleValue(this,nt));return xt===Et?null:xt===it&&Et===st?_t:_t=rt(it=xt,st=Et)}}function styleRemove(nt){return function(){this.style.removeProperty(nt)}}function styleConstant(nt,rt,it){var st,_t=it+"",xt;return function(){var Et=styleValue(this,nt);return Et===_t?null:Et===st?xt:xt=rt(st=Et,it)}}function styleFunction(nt,rt,it){var st,_t,xt;return function(){var Et=styleValue(this,nt),kt=it(this),Lt=kt+"";return kt==null&&(Lt=kt=(this.style.removeProperty(nt),styleValue(this,nt))),Et===Lt?null:Et===st&&Lt===_t?xt:(_t=Lt,xt=rt(st=Et,kt))}}function styleMaybeRemove(nt,rt){var it,st,_t,xt="style."+rt,Et="end."+xt,kt;return function(){var Lt=set(this,nt),It=Lt.on,Rt=Lt.value[xt]==null?kt||(kt=styleRemove(rt)):void 0;(It!==it||_t!==Rt)&&(st=(it=It).copy()).on(Et,_t=Rt),Lt.on=st}}function transition_style(nt,rt,it){var st=(nt+="")=="transform"?interpolateTransformCss:interpolate;return rt==null?this.styleTween(nt,styleNull(nt,st)).on("end.style."+nt,styleRemove(nt)):typeof rt=="function"?this.styleTween(nt,styleFunction(nt,st,tweenValue(this,"style."+nt,rt))).each(styleMaybeRemove(this._id,nt)):this.styleTween(nt,styleConstant(nt,st,rt),it).on("end.style."+nt,null)}function styleInterpolate(nt,rt,it){return function(st){this.style.setProperty(nt,rt.call(this,st),it)}}function styleTween(nt,rt,it){var st,_t;function xt(){var Et=rt.apply(this,arguments);return Et!==_t&&(st=(_t=Et)&&styleInterpolate(nt,Et,it)),st}return xt._value=rt,xt}function transition_styleTween(nt,rt,it){var st="style."+(nt+="");if(arguments.length<2)return(st=this.tween(st))&&st._value;if(rt==null)return this.tween(st,null);if(typeof rt!="function")throw new Error;return this.tween(st,styleTween(nt,rt,it==null?"":it))}function textConstant(nt){return function(){this.textContent=nt}}function textFunction(nt){return function(){var rt=nt(this);this.textContent=rt==null?"":rt}}function transition_text(nt){return this.tween("text",typeof nt=="function"?textFunction(tweenValue(this,"text",nt)):textConstant(nt==null?"":nt+""))}function textInterpolate(nt){return function(rt){this.textContent=nt.call(this,rt)}}function textTween(nt){var rt,it;function st(){var _t=nt.apply(this,arguments);return _t!==it&&(rt=(it=_t)&&textInterpolate(_t)),rt}return st._value=nt,st}function transition_textTween(nt){var rt="text";if(arguments.length<1)return(rt=this.tween(rt))&&rt._value;if(nt==null)return this.tween(rt,null);if(typeof nt!="function")throw new Error;return this.tween(rt,textTween(nt))}function transition_transition(){for(var nt=this._name,rt=this._id,it=newId(),st=this._groups,_t=st.length,xt=0;xt<_t;++xt)for(var Et=st[xt],kt=Et.length,Lt,It=0;It<kt;++It)if(Lt=Et[It]){var Rt=get$2(Lt,rt);schedule(Lt,nt,it,It,Et,{time:Rt.time+Rt.delay+Rt.duration,delay:0,duration:Rt.duration,ease:Rt.ease})}return new Transition(st,this._parents,nt,it)}function transition_end(){var nt,rt,it=this,st=it._id,_t=it.size();return new Promise(function(xt,Et){var kt={value:Et},Lt={value:function(){--_t===0&&xt()}};it.each(function(){var It=set(this,st),Rt=It.on;Rt!==nt&&(rt=(nt=Rt).copy(),rt._.cancel.push(kt),rt._.interrupt.push(kt),rt._.end.push(Lt)),It.on=rt}),_t===0&&xt()})}var id$4=0;function Transition(nt,rt,it,st){this._groups=nt,this._parents=rt,this._name=it,this._id=st}function newId(){return++id$4}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(nt){return((nt*=2)<=1?nt*nt*nt:(nt-=2)*nt*nt+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(nt,rt){for(var it;!(it=nt.__transition)||!(it=it[rt]);)if(!(nt=nt.parentNode))throw new Error(`transition ${rt} not found`);return it}function selection_transition(nt){var rt,it;nt instanceof Transition?(rt=nt._id,nt=nt._name):(rt=newId(),(it=defaultTiming).time=now$2(),nt=nt==null?null:nt+"");for(var st=this._groups,_t=st.length,xt=0;xt<_t;++xt)for(var Et=st[xt],kt=Et.length,Lt,It=0;It<kt;++It)(Lt=Et[It])&&schedule(Lt,nt,rt,It,Et,it||inherit(Lt,rt));return new Transition(st,this._parents,nt,rt)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon=tau$1-epsilon$1;function append$1(nt){this._+=nt[0];for(let rt=1,it=nt.length;rt<it;++rt)this._+=arguments[rt]+nt[rt]}function appendRound(nt){let rt=Math.floor(nt);if(!(rt>=0))throw new Error(`invalid digits: ${nt}`);if(rt>15)return append$1;const it=10**rt;return function(st){this._+=st[0];for(let _t=1,xt=st.length;_t<xt;++_t)this._+=Math.round(arguments[_t]*it)/it+st[_t]}}class Path{constructor(rt){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=rt==null?append$1:appendRound(rt)}moveTo(rt,it){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(rt,it){this._append`L${this._x1=+rt},${this._y1=+it}`}quadraticCurveTo(rt,it,st,_t){this._append`Q${+rt},${+it},${this._x1=+st},${this._y1=+_t}`}bezierCurveTo(rt,it,st,_t,xt,Et){this._append`C${+rt},${+it},${+st},${+_t},${this._x1=+xt},${this._y1=+Et}`}arcTo(rt,it,st,_t,xt){if(rt=+rt,it=+it,st=+st,_t=+_t,xt=+xt,xt<0)throw new Error(`negative radius: ${xt}`);let Et=this._x1,kt=this._y1,Lt=st-rt,It=_t-it,Rt=Et-rt,Nt=kt-it,Bt=Rt*Rt+Nt*Nt;if(this._x1===null)this._append`M${this._x1=rt},${this._y1=it}`;else if(Bt>epsilon$1)if(!(Math.abs(Nt*Lt-It*Rt)>epsilon$1)||!xt)this._append`L${this._x1=rt},${this._y1=it}`;else{let Ft=st-Et,Yt=_t-kt,Zt=Lt*Lt+It*It,Wt=Ft*Ft+Yt*Yt,Kt=Math.sqrt(Zt),Jt=Math.sqrt(Bt),on=xt*Math.tan((pi$1-Math.acos((Zt+Bt-Wt)/(2*Kt*Jt)))/2),rn=on/Jt,ln=on/Kt;Math.abs(rn-1)>epsilon$1&&this._append`L${rt+rn*Rt},${it+rn*Nt}`,this._append`A${xt},${xt},0,0,${+(Nt*Ft>Rt*Yt)},${this._x1=rt+ln*Lt},${this._y1=it+ln*It}`}}arc(rt,it,st,_t,xt,Et){if(rt=+rt,it=+it,st=+st,Et=!!Et,st<0)throw new Error(`negative radius: ${st}`);let kt=st*Math.cos(_t),Lt=st*Math.sin(_t),It=rt+kt,Rt=it+Lt,Nt=1^Et,Bt=Et?_t-xt:xt-_t;this._x1===null?this._append`M${It},${Rt}`:(Math.abs(this._x1-It)>epsilon$1||Math.abs(this._y1-Rt)>epsilon$1)&&this._append`L${It},${Rt}`,st&&(Bt<0&&(Bt=Bt%tau$1+tau$1),Bt>tauEpsilon?this._append`A${st},${st},0,1,${Nt},${rt-kt},${it-Lt}A${st},${st},0,1,${Nt},${this._x1=It},${this._y1=Rt}`:Bt>epsilon$1&&this._append`A${st},${st},0,${+(Bt>=pi$1)},${Nt},${this._x1=rt+st*Math.cos(xt)},${this._y1=it+st*Math.sin(xt)}`)}rect(rt,it,st,_t){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+it}h${st=+st}v${+_t}h${-st}Z`}toString(){return this._}}function responseText(nt){if(!nt.ok)throw new Error(nt.status+" "+nt.statusText);return nt.text()}function text$1(nt,rt){return fetch(nt,rt).then(responseText)}function parser$d(nt){return(rt,it)=>text$1(rt,it).then(st=>new DOMParser().parseFromString(st,nt))}var svg$2=parser$d("image/svg+xml");function formatDecimal(nt){return Math.abs(nt=Math.round(nt))>=1e21?nt.toLocaleString("en").replace(/,/g,""):nt.toString(10)}function formatDecimalParts(nt,rt){if((it=(nt=rt?nt.toExponential(rt-1):nt.toExponential()).indexOf("e"))<0)return null;var it,st=nt.slice(0,it);return[st.length>1?st[0]+st.slice(2):st,+nt.slice(it+1)]}function exponent(nt){return nt=formatDecimalParts(Math.abs(nt)),nt?nt[1]:NaN}function formatGroup(nt,rt){return function(it,st){for(var _t=it.length,xt=[],Et=0,kt=nt[0],Lt=0;_t>0&&kt>0&&(Lt+kt+1>st&&(kt=Math.max(1,st-Lt)),xt.push(it.substring(_t-=kt,_t+kt)),!((Lt+=kt+1)>st));)kt=nt[Et=(Et+1)%nt.length];return xt.reverse().join(rt)}}function formatNumerals(nt){return function(rt){return rt.replace(/[0-9]/g,function(it){return nt[+it]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(nt){if(!(rt=re.exec(nt)))throw new Error("invalid format: "+nt);var rt;return new FormatSpecifier({fill:rt[1],align:rt[2],sign:rt[3],symbol:rt[4],zero:rt[5],width:rt[6],comma:rt[7],precision:rt[8]&&rt[8].slice(1),trim:rt[9],type:rt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(nt){this.fill=nt.fill===void 0?" ":nt.fill+"",this.align=nt.align===void 0?">":nt.align+"",this.sign=nt.sign===void 0?"-":nt.sign+"",this.symbol=nt.symbol===void 0?"":nt.symbol+"",this.zero=!!nt.zero,this.width=nt.width===void 0?void 0:+nt.width,this.comma=!!nt.comma,this.precision=nt.precision===void 0?void 0:+nt.precision,this.trim=!!nt.trim,this.type=nt.type===void 0?"":nt.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(nt){e:for(var rt=nt.length,it=1,st=-1,_t;it<rt;++it)switch(nt[it]){case".":st=_t=it;break;case"0":st===0&&(st=it),_t=it;break;default:if(!+nt[it])break e;st>0&&(st=0);break}return st>0?nt.slice(0,st)+nt.slice(_t+1):nt}var prefixExponent;function formatPrefixAuto(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var st=it[0],_t=it[1],xt=_t-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(_t/3)))*3)+1,Et=st.length;return xt===Et?st:xt>Et?st+new Array(xt-Et+1).join("0"):xt>0?st.slice(0,xt)+"."+st.slice(xt):"0."+new Array(1-xt).join("0")+formatDecimalParts(nt,Math.max(0,rt+xt-1))[0]}function formatRounded(nt,rt){var it=formatDecimalParts(nt,rt);if(!it)return nt+"";var st=it[0],_t=it[1];return _t<0?"0."+new Array(-_t).join("0")+st:st.length>_t+1?st.slice(0,_t+1)+"."+st.slice(_t+1):st+new Array(_t-st.length+2).join("0")}const formatTypes={"%":(nt,rt)=>(nt*100).toFixed(rt),b:nt=>Math.round(nt).toString(2),c:nt=>nt+"",d:formatDecimal,e:(nt,rt)=>nt.toExponential(rt),f:(nt,rt)=>nt.toFixed(rt),g:(nt,rt)=>nt.toPrecision(rt),o:nt=>Math.round(nt).toString(8),p:(nt,rt)=>formatRounded(nt*100,rt),r:formatRounded,s:formatPrefixAuto,X:nt=>Math.round(nt).toString(16).toUpperCase(),x:nt=>Math.round(nt).toString(16)};function identity$3(nt){return nt}var map$2=Array.prototype.map,prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(nt){var rt=nt.grouping===void 0||nt.thousands===void 0?identity$3:formatGroup(map$2.call(nt.grouping,Number),nt.thousands+""),it=nt.currency===void 0?"":nt.currency[0]+"",st=nt.currency===void 0?"":nt.currency[1]+"",_t=nt.decimal===void 0?".":nt.decimal+"",xt=nt.numerals===void 0?identity$3:formatNumerals(map$2.call(nt.numerals,String)),Et=nt.percent===void 0?"%":nt.percent+"",kt=nt.minus===void 0?"\u2212":nt.minus+"",Lt=nt.nan===void 0?"NaN":nt.nan+"";function It(Nt){Nt=formatSpecifier(Nt);var Bt=Nt.fill,Ft=Nt.align,Yt=Nt.sign,Zt=Nt.symbol,Wt=Nt.zero,Kt=Nt.width,Jt=Nt.comma,on=Nt.precision,rn=Nt.trim,ln=Nt.type;ln==="n"?(Jt=!0,ln="g"):formatTypes[ln]||(on===void 0&&(on=12),rn=!0,ln="g"),(Wt||Bt==="0"&&Ft==="=")&&(Wt=!0,Bt="0",Ft="=");var gn=Zt==="$"?it:Zt==="#"&&/[boxX]/.test(ln)?"0"+ln.toLowerCase():"",wn=Zt==="$"?st:/[%p]/.test(ln)?Et:"",kn=formatTypes[ln],Cn=/[defgprs%]/.test(ln);on=on===void 0?6:/[gprs]/.test(ln)?Math.max(1,Math.min(21,on)):Math.max(0,Math.min(20,on));function Pn(An){var cn=gn,Ln=wn,an,zn,dn;if(ln==="c")Ln=kn(An)+Ln,An="";else{An=+An;var Fn=An<0||1/An<0;if(An=isNaN(An)?Lt:kn(Math.abs(An),on),rn&&(An=formatTrim(An)),Fn&&+An==0&&Yt!=="+"&&(Fn=!1),cn=(Fn?Yt==="("?Yt:kt:Yt==="-"||Yt==="("?"":Yt)+cn,Ln=(ln==="s"?prefixes[8+prefixExponent/3]:"")+Ln+(Fn&&Yt==="("?")":""),Cn){for(an=-1,zn=An.length;++an<zn;)if(dn=An.charCodeAt(an),48>dn||dn>57){Ln=(dn===46?_t+An.slice(an+1):An.slice(an))+Ln,An=An.slice(0,an);break}}}Jt&&!Wt&&(An=rt(An,1/0));var ir=cn.length+An.length+Ln.length,tr=ir<Kt?new Array(Kt-ir+1).join(Bt):"";switch(Jt&&Wt&&(An=rt(tr+An,tr.length?Kt-Ln.length:1/0),tr=""),Ft){case"<":An=cn+An+Ln+tr;break;case"=":An=cn+tr+An+Ln;break;case"^":An=tr.slice(0,ir=tr.length>>1)+cn+An+Ln+tr.slice(ir);break;default:An=tr+cn+An+Ln;break}return xt(An)}return Pn.toString=function(){return Nt+""},Pn}function Rt(Nt,Bt){var Ft=It((Nt=formatSpecifier(Nt),Nt.type="f",Nt)),Yt=Math.max(-8,Math.min(8,Math.floor(exponent(Bt)/3)))*3,Zt=Math.pow(10,-Yt),Wt=prefixes[8+Yt/3];return function(Kt){return Ft(Zt*Kt)+Wt}}return{format:It,formatPrefix:Rt}}var locale$1,format$1,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(nt){return locale$1=formatLocale$1(nt),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(nt){return Math.max(0,-exponent(Math.abs(nt)))}function precisionPrefix(nt,rt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(rt)/3)))*3-exponent(Math.abs(nt)))}function precisionRound(nt,rt){return nt=Math.abs(nt),rt=Math.abs(rt)-nt,Math.max(0,exponent(rt)-exponent(nt))+1}function initRange(nt,rt){switch(arguments.length){case 0:break;case 1:this.range(nt);break;default:this.range(rt).domain(nt);break}return this}const implicit=Symbol("implicit");function ordinal(){var nt=new InternMap,rt=[],it=[],st=implicit;function _t(xt){let Et=nt.get(xt);if(Et===void 0){if(st!==implicit)return st;nt.set(xt,Et=rt.push(xt)-1)}return it[Et%it.length]}return _t.domain=function(xt){if(!arguments.length)return rt.slice();rt=[],nt=new InternMap;for(const Et of xt)nt.has(Et)||nt.set(Et,rt.push(Et)-1);return _t},_t.range=function(xt){return arguments.length?(it=Array.from(xt),_t):it.slice()},_t.unknown=function(xt){return arguments.length?(st=xt,_t):st},_t.copy=function(){return ordinal(rt,it).unknown(st)},initRange.apply(_t,arguments),_t}function constants$1(nt){return function(){return nt}}function number$1(nt){return+nt}var unit$1=[0,1];function identity$2(nt){return nt}function normalize(nt,rt){return(rt-=nt=+nt)?function(it){return(it-nt)/rt}:constants$1(isNaN(rt)?NaN:.5)}function clamper(nt,rt){var it;return nt>rt&&(it=nt,nt=rt,rt=it),function(st){return Math.max(nt,Math.min(rt,st))}}function bimap(nt,rt,it){var st=nt[0],_t=nt[1],xt=rt[0],Et=rt[1];return _t<st?(st=normalize(_t,st),xt=it(Et,xt)):(st=normalize(st,_t),xt=it(xt,Et)),function(kt){return xt(st(kt))}}function polymap(nt,rt,it){var st=Math.min(nt.length,rt.length)-1,_t=new Array(st),xt=new Array(st),Et=-1;for(nt[st]<nt[0]&&(nt=nt.slice().reverse(),rt=rt.slice().reverse());++Et<st;)_t[Et]=normalize(nt[Et],nt[Et+1]),xt[Et]=it(rt[Et],rt[Et+1]);return function(kt){var Lt=bisect(nt,kt,1,st)-1;return xt[Lt](_t[Lt](kt))}}function copy$1(nt,rt){return rt.domain(nt.domain()).range(nt.range()).interpolate(nt.interpolate()).clamp(nt.clamp()).unknown(nt.unknown())}function transformer(){var nt=unit$1,rt=unit$1,it=interpolate$1,st,_t,xt,Et=identity$2,kt,Lt,It;function Rt(){var Bt=Math.min(nt.length,rt.length);return Et!==identity$2&&(Et=clamper(nt[0],nt[Bt-1])),kt=Bt>2?polymap:bimap,Lt=It=null,Nt}function Nt(Bt){return Bt==null||isNaN(Bt=+Bt)?xt:(Lt||(Lt=kt(nt.map(st),rt,it)))(st(Et(Bt)))}return Nt.invert=function(Bt){return Et(_t((It||(It=kt(rt,nt.map(st),interpolateNumber)))(Bt)))},Nt.domain=function(Bt){return arguments.length?(nt=Array.from(Bt,number$1),Rt()):nt.slice()},Nt.range=function(Bt){return arguments.length?(rt=Array.from(Bt),Rt()):rt.slice()},Nt.rangeRound=function(Bt){return rt=Array.from(Bt),it=interpolateRound,Rt()},Nt.clamp=function(Bt){return arguments.length?(Et=Bt?!0:identity$2,Rt()):Et!==identity$2},Nt.interpolate=function(Bt){return arguments.length?(it=Bt,Rt()):it},Nt.unknown=function(Bt){return arguments.length?(xt=Bt,Nt):xt},function(Bt,Ft){return st=Bt,_t=Ft,Rt()}}function continuous(){return transformer()(identity$2,identity$2)}function tickFormat(nt,rt,it,st){var _t=tickStep(nt,rt,it),xt;switch(st=formatSpecifier(st==null?",f":st),st.type){case"s":{var Et=Math.max(Math.abs(nt),Math.abs(rt));return st.precision==null&&!isNaN(xt=precisionPrefix(_t,Et))&&(st.precision=xt),formatPrefix(st,Et)}case"":case"e":case"g":case"p":case"r":{st.precision==null&&!isNaN(xt=precisionRound(_t,Math.max(Math.abs(nt),Math.abs(rt))))&&(st.precision=xt-(st.type==="e"));break}case"f":case"%":{st.precision==null&&!isNaN(xt=precisionFixed(_t))&&(st.precision=xt-(st.type==="%")*2);break}}return format$1(st)}function linearish(nt){var rt=nt.domain;return nt.ticks=function(it){var st=rt();return ticks(st[0],st[st.length-1],it==null?10:it)},nt.tickFormat=function(it,st){var _t=rt();return tickFormat(_t[0],_t[_t.length-1],it==null?10:it,st)},nt.nice=function(it){it==null&&(it=10);var st=rt(),_t=0,xt=st.length-1,Et=st[_t],kt=st[xt],Lt,It,Rt=10;for(kt<Et&&(It=Et,Et=kt,kt=It,It=_t,_t=xt,xt=It);Rt-- >0;){if(It=tickIncrement(Et,kt,it),It===Lt)return st[_t]=Et,st[xt]=kt,rt(st);if(It>0)Et=Math.floor(Et/It)*It,kt=Math.ceil(kt/It)*It;else if(It<0)Et=Math.ceil(Et*It)/It,kt=Math.floor(kt*It)/It;else break;Lt=It}return nt},nt}function linear(){var nt=continuous();return nt.copy=function(){return copy$1(nt,linear())},initRange.apply(nt,arguments),linearish(nt)}function nice(nt,rt){nt=nt.slice();var it=0,st=nt.length-1,_t=nt[it],xt=nt[st],Et;return xt<_t&&(Et=it,it=st,st=Et,Et=_t,_t=xt,xt=Et),nt[it]=rt.floor(_t),nt[st]=rt.ceil(xt),nt}const t0=new Date,t1=new Date;function timeInterval(nt,rt,it,st){function _t(xt){return nt(xt=arguments.length===0?new Date:new Date(+xt)),xt}return _t.floor=xt=>(nt(xt=new Date(+xt)),xt),_t.ceil=xt=>(nt(xt=new Date(xt-1)),rt(xt,1),nt(xt),xt),_t.round=xt=>{const Et=_t(xt),kt=_t.ceil(xt);return xt-Et<kt-xt?Et:kt},_t.offset=(xt,Et)=>(rt(xt=new Date(+xt),Et==null?1:Math.floor(Et)),xt),_t.range=(xt,Et,kt)=>{const Lt=[];if(xt=_t.ceil(xt),kt=kt==null?1:Math.floor(kt),!(xt<Et)||!(kt>0))return Lt;let It;do Lt.push(It=new Date(+xt)),rt(xt,kt),nt(xt);while(It<xt&&xt<Et);return Lt},_t.filter=xt=>timeInterval(Et=>{if(Et>=Et)for(;nt(Et),!xt(Et);)Et.setTime(Et-1)},(Et,kt)=>{if(Et>=Et)if(kt<0)for(;++kt<=0;)for(;rt(Et,-1),!xt(Et););else for(;--kt>=0;)for(;rt(Et,1),!xt(Et););}),it&&(_t.count=(xt,Et)=>(t0.setTime(+xt),t1.setTime(+Et),nt(t0),nt(t1),Math.floor(it(t0,t1))),_t.every=xt=>(xt=Math.floor(xt),!isFinite(xt)||!(xt>0)?null:xt>1?_t.filter(st?Et=>st(Et)%xt===0:Et=>_t.count(0,Et)%xt===0):_t)),_t}const millisecond=timeInterval(()=>{},(nt,rt)=>{nt.setTime(+nt+rt)},(nt,rt)=>rt-nt);millisecond.every=nt=>(nt=Math.floor(nt),!isFinite(nt)||!(nt>0)?null:nt>1?timeInterval(rt=>{rt.setTime(Math.floor(rt/nt)*nt)},(rt,it)=>{rt.setTime(+rt+it*nt)},(rt,it)=>(it-rt)/nt):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds())},(nt,rt)=>{nt.setTime(+nt+rt*durationSecond)},(nt,rt)=>(rt-nt)/durationSecond,nt=>nt.getUTCSeconds());second.range;const timeMinute=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getMinutes());timeMinute.range;const utcMinute=timeInterval(nt=>{nt.setUTCSeconds(0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationMinute)},(nt,rt)=>(rt-nt)/durationMinute,nt=>nt.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond-nt.getMinutes()*durationMinute)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getHours());timeHour.range;const utcHour=timeInterval(nt=>{nt.setUTCMinutes(0,0,0)},(nt,rt)=>{nt.setTime(+nt+rt*durationHour)},(nt,rt)=>(rt-nt)/durationHour,nt=>nt.getUTCHours());utcHour.range;const timeDay=timeInterval(nt=>nt.setHours(0,0,0,0),(nt,rt)=>nt.setDate(nt.getDate()+rt),(nt,rt)=>(rt-nt-(rt.getTimezoneOffset()-nt.getTimezoneOffset())*durationMinute)/durationDay,nt=>nt.getDate()-1);timeDay.range;const utcDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>nt.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCDate(nt.getUTCDate()+rt)},(nt,rt)=>(rt-nt)/durationDay,nt=>Math.floor(nt/durationDay));unixDay.range;function timeWeekday(nt){return timeInterval(rt=>{rt.setDate(rt.getDate()-(rt.getDay()+7-nt)%7),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setDate(rt.getDate()+it*7)},(rt,it)=>(it-rt-(it.getTimezoneOffset()-rt.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(nt){return timeInterval(rt=>{rt.setUTCDate(rt.getUTCDate()-(rt.getUTCDay()+7-nt)%7),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCDate(rt.getUTCDate()+it*7)},(rt,it)=>(it-rt)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(nt=>{nt.setDate(1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setMonth(nt.getMonth()+rt)},(nt,rt)=>rt.getMonth()-nt.getMonth()+(rt.getFullYear()-nt.getFullYear())*12,nt=>nt.getMonth());timeMonth.range;const utcMonth=timeInterval(nt=>{nt.setUTCDate(1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCMonth(nt.getUTCMonth()+rt)},(nt,rt)=>rt.getUTCMonth()-nt.getUTCMonth()+(rt.getUTCFullYear()-nt.getUTCFullYear())*12,nt=>nt.getUTCMonth());utcMonth.range;const timeYear=timeInterval(nt=>{nt.setMonth(0,1),nt.setHours(0,0,0,0)},(nt,rt)=>{nt.setFullYear(nt.getFullYear()+rt)},(nt,rt)=>rt.getFullYear()-nt.getFullYear(),nt=>nt.getFullYear());timeYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setFullYear(Math.floor(rt.getFullYear()/nt)*nt),rt.setMonth(0,1),rt.setHours(0,0,0,0)},(rt,it)=>{rt.setFullYear(rt.getFullYear()+it*nt)});timeYear.range;const utcYear=timeInterval(nt=>{nt.setUTCMonth(0,1),nt.setUTCHours(0,0,0,0)},(nt,rt)=>{nt.setUTCFullYear(nt.getUTCFullYear()+rt)},(nt,rt)=>rt.getUTCFullYear()-nt.getUTCFullYear(),nt=>nt.getUTCFullYear());utcYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(rt=>{rt.setUTCFullYear(Math.floor(rt.getUTCFullYear()/nt)*nt),rt.setUTCMonth(0,1),rt.setUTCHours(0,0,0,0)},(rt,it)=>{rt.setUTCFullYear(rt.getUTCFullYear()+it*nt)});utcYear.range;function ticker(nt,rt,it,st,_t,xt){const Et=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[xt,1,durationMinute],[xt,5,5*durationMinute],[xt,15,15*durationMinute],[xt,30,30*durationMinute],[_t,1,durationHour],[_t,3,3*durationHour],[_t,6,6*durationHour],[_t,12,12*durationHour],[st,1,durationDay],[st,2,2*durationDay],[it,1,durationWeek],[rt,1,durationMonth],[rt,3,3*durationMonth],[nt,1,durationYear]];function kt(It,Rt,Nt){const Bt=Rt<It;Bt&&([It,Rt]=[Rt,It]);const Ft=Nt&&typeof Nt.range=="function"?Nt:Lt(It,Rt,Nt),Yt=Ft?Ft.range(It,+Rt+1):[];return Bt?Yt.reverse():Yt}function Lt(It,Rt,Nt){const Bt=Math.abs(Rt-It)/Nt,Ft=bisector(([,,Wt])=>Wt).right(Et,Bt);if(Ft===Et.length)return nt.every(tickStep(It/durationYear,Rt/durationYear,Nt));if(Ft===0)return millisecond.every(Math.max(tickStep(It,Rt,Nt),1));const[Yt,Zt]=Et[Bt/Et[Ft-1][2]<Et[Ft][2]/Bt?Ft-1:Ft];return Yt.every(Zt)}return[kt,Lt]}ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute);const[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L);return rt.setFullYear(nt.y),rt}return new Date(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L)}function utcDate(nt){if(0<=nt.y&&nt.y<100){var rt=new Date(Date.UTC(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L));return rt.setUTCFullYear(nt.y),rt}return new Date(Date.UTC(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L))}function newDate(nt,rt,it){return{y:nt,m:rt,d:it,H:0,M:0,S:0,L:0}}function formatLocale(nt){var rt=nt.dateTime,it=nt.date,st=nt.time,_t=nt.periods,xt=nt.days,Et=nt.shortDays,kt=nt.months,Lt=nt.shortMonths,It=formatRe(_t),Rt=formatLookup(_t),Nt=formatRe(xt),Bt=formatLookup(xt),Ft=formatRe(Et),Yt=formatLookup(Et),Zt=formatRe(kt),Wt=formatLookup(kt),Kt=formatRe(Lt),Jt=formatLookup(Lt),on={a:Fn,A:ir,b:tr,B:Jn,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:hr,q:lr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},rn={a:cr,A:Cr,b:Er,B:ar,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Fr,q:mr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},ln={a:Pn,A:An,b:cn,B:Ln,c:an,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:Cn,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:zn,X:dn,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};on.x=gn(it,on),on.X=gn(st,on),on.c=gn(rt,on),rn.x=gn(it,rn),rn.X=gn(st,rn),rn.c=gn(rt,rn);function gn(xr,fr){return function(gr){var er=[],nn=-1,un=0,pn=xr.length,Rn,_n,or;for(gr instanceof Date||(gr=new Date(+gr));++nn<pn;)xr.charCodeAt(nn)===37&&(er.push(xr.slice(un,nn)),(_n=pads[Rn=xr.charAt(++nn)])!=null?Rn=xr.charAt(++nn):_n=Rn==="e"?" ":"0",(or=fr[Rn])&&(Rn=or(gr,_n)),er.push(Rn),un=nn+1);return er.push(xr.slice(un,nn)),er.join("")}}function wn(xr,fr){return function(gr){var er=newDate(1900,void 0,1),nn=kn(er,xr,gr+="",0),un,pn;if(nn!=gr.length)return null;if("Q"in er)return new Date(er.Q);if("s"in er)return new Date(er.s*1e3+("L"in er?er.L:0));if(fr&&!("Z"in er)&&(er.Z=0),"p"in er&&(er.H=er.H%12+er.p*12),er.m===void 0&&(er.m="q"in er?er.q:0),"V"in er){if(er.V<1||er.V>53)return null;"w"in er||(er.w=1),"Z"in er?(un=utcDate(newDate(er.y,0,1)),pn=un.getUTCDay(),un=pn>4||pn===0?utcMonday.ceil(un):utcMonday(un),un=utcDay.offset(un,(er.V-1)*7),er.y=un.getUTCFullYear(),er.m=un.getUTCMonth(),er.d=un.getUTCDate()+(er.w+6)%7):(un=localDate(newDate(er.y,0,1)),pn=un.getDay(),un=pn>4||pn===0?timeMonday.ceil(un):timeMonday(un),un=timeDay.offset(un,(er.V-1)*7),er.y=un.getFullYear(),er.m=un.getMonth(),er.d=un.getDate()+(er.w+6)%7)}else("W"in er||"U"in er)&&("w"in er||(er.w="u"in er?er.u%7:"W"in er?1:0),pn="Z"in er?utcDate(newDate(er.y,0,1)).getUTCDay():localDate(newDate(er.y,0,1)).getDay(),er.m=0,er.d="W"in er?(er.w+6)%7+er.W*7-(pn+5)%7:er.w+er.U*7-(pn+6)%7);return"Z"in er?(er.H+=er.Z/100|0,er.M+=er.Z%100,utcDate(er)):localDate(er)}}function kn(xr,fr,gr,er){for(var nn=0,un=fr.length,pn=gr.length,Rn,_n;nn<un;){if(er>=pn)return-1;if(Rn=fr.charCodeAt(nn++),Rn===37){if(Rn=fr.charAt(nn++),_n=ln[Rn in pads?fr.charAt(nn++):Rn],!_n||(er=_n(xr,gr,er))<0)return-1}else if(Rn!=gr.charCodeAt(er++))return-1}return er}function Cn(xr,fr,gr){var er=It.exec(fr.slice(gr));return er?(xr.p=Rt.get(er[0].toLowerCase()),gr+er[0].length):-1}function Pn(xr,fr,gr){var er=Ft.exec(fr.slice(gr));return er?(xr.w=Yt.get(er[0].toLowerCase()),gr+er[0].length):-1}function An(xr,fr,gr){var er=Nt.exec(fr.slice(gr));return er?(xr.w=Bt.get(er[0].toLowerCase()),gr+er[0].length):-1}function cn(xr,fr,gr){var er=Kt.exec(fr.slice(gr));return er?(xr.m=Jt.get(er[0].toLowerCase()),gr+er[0].length):-1}function Ln(xr,fr,gr){var er=Zt.exec(fr.slice(gr));return er?(xr.m=Wt.get(er[0].toLowerCase()),gr+er[0].length):-1}function an(xr,fr,gr){return kn(xr,rt,fr,gr)}function zn(xr,fr,gr){return kn(xr,it,fr,gr)}function dn(xr,fr,gr){return kn(xr,st,fr,gr)}function Fn(xr){return Et[xr.getDay()]}function ir(xr){return xt[xr.getDay()]}function tr(xr){return Lt[xr.getMonth()]}function Jn(xr){return kt[xr.getMonth()]}function hr(xr){return _t[+(xr.getHours()>=12)]}function lr(xr){return 1+~~(xr.getMonth()/3)}function cr(xr){return Et[xr.getUTCDay()]}function Cr(xr){return xt[xr.getUTCDay()]}function Er(xr){return Lt[xr.getUTCMonth()]}function ar(xr){return kt[xr.getUTCMonth()]}function Fr(xr){return _t[+(xr.getUTCHours()>=12)]}function mr(xr){return 1+~~(xr.getUTCMonth()/3)}return{format:function(xr){var fr=gn(xr+="",on);return fr.toString=function(){return xr},fr},parse:function(xr){var fr=wn(xr+="",!1);return fr.toString=function(){return xr},fr},utcFormat:function(xr){var fr=gn(xr+="",rn);return fr.toString=function(){return xr},fr},utcParse:function(xr){var fr=wn(xr+="",!0);return fr.toString=function(){return xr},fr}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(nt,rt,it){var st=nt<0?"-":"",_t=(st?-nt:nt)+"",xt=_t.length;return st+(xt<it?new Array(it-xt+1).join(rt)+_t:_t)}function requote(nt){return nt.replace(requoteRe,"\\$&")}function formatRe(nt){return new RegExp("^(?:"+nt.map(requote).join("|")+")","i")}function formatLookup(nt){return new Map(nt.map((rt,it)=>[rt.toLowerCase(),it]))}function parseWeekdayNumberSunday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.w=+st[0],it+st[0].length):-1}function parseWeekdayNumberMonday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.u=+st[0],it+st[0].length):-1}function parseWeekNumberSunday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.U=+st[0],it+st[0].length):-1}function parseWeekNumberISO(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.V=+st[0],it+st[0].length):-1}function parseWeekNumberMonday(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.W=+st[0],it+st[0].length):-1}function parseFullYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+4));return st?(nt.y=+st[0],it+st[0].length):-1}function parseYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.y=+st[0]+(+st[0]>68?1900:2e3),it+st[0].length):-1}function parseZone(nt,rt,it){var st=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(rt.slice(it,it+6));return st?(nt.Z=st[1]?0:-(st[2]+(st[3]||"00")),it+st[0].length):-1}function parseQuarter(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+1));return st?(nt.q=st[0]*3-3,it+st[0].length):-1}function parseMonthNumber(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.m=st[0]-1,it+st[0].length):-1}function parseDayOfMonth(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.d=+st[0],it+st[0].length):-1}function parseDayOfYear(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+3));return st?(nt.m=0,nt.d=+st[0],it+st[0].length):-1}function parseHour24(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.H=+st[0],it+st[0].length):-1}function parseMinutes(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.M=+st[0],it+st[0].length):-1}function parseSeconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+2));return st?(nt.S=+st[0],it+st[0].length):-1}function parseMilliseconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+3));return st?(nt.L=+st[0],it+st[0].length):-1}function parseMicroseconds(nt,rt,it){var st=numberRe.exec(rt.slice(it,it+6));return st?(nt.L=Math.floor(st[0]/1e3),it+st[0].length):-1}function parseLiteralPercent(nt,rt,it){var st=percentRe.exec(rt.slice(it,it+1));return st?it+st[0].length:-1}function parseUnixTimestamp(nt,rt,it){var st=numberRe.exec(rt.slice(it));return st?(nt.Q=+st[0],it+st[0].length):-1}function parseUnixTimestampSeconds(nt,rt,it){var st=numberRe.exec(rt.slice(it));return st?(nt.s=+st[0],it+st[0].length):-1}function formatDayOfMonth(nt,rt){return pad(nt.getDate(),rt,2)}function formatHour24(nt,rt){return pad(nt.getHours(),rt,2)}function formatHour12(nt,rt){return pad(nt.getHours()%12||12,rt,2)}function formatDayOfYear(nt,rt){return pad(1+timeDay.count(timeYear(nt),nt),rt,3)}function formatMilliseconds(nt,rt){return pad(nt.getMilliseconds(),rt,3)}function formatMicroseconds(nt,rt){return formatMilliseconds(nt,rt)+"000"}function formatMonthNumber(nt,rt){return pad(nt.getMonth()+1,rt,2)}function formatMinutes(nt,rt){return pad(nt.getMinutes(),rt,2)}function formatSeconds(nt,rt){return pad(nt.getSeconds(),rt,2)}function formatWeekdayNumberMonday(nt){var rt=nt.getDay();return rt===0?7:rt}function formatWeekNumberSunday(nt,rt){return pad(timeSunday.count(timeYear(nt)-1,nt),rt,2)}function dISO(nt){var rt=nt.getDay();return rt>=4||rt===0?timeThursday(nt):timeThursday.ceil(nt)}function formatWeekNumberISO(nt,rt){return nt=dISO(nt),pad(timeThursday.count(timeYear(nt),nt)+(timeYear(nt).getDay()===4),rt,2)}function formatWeekdayNumberSunday(nt){return nt.getDay()}function formatWeekNumberMonday(nt,rt){return pad(timeMonday.count(timeYear(nt)-1,nt),rt,2)}function formatYear(nt,rt){return pad(nt.getFullYear()%100,rt,2)}function formatYearISO(nt,rt){return nt=dISO(nt),pad(nt.getFullYear()%100,rt,2)}function formatFullYear(nt,rt){return pad(nt.getFullYear()%1e4,rt,4)}function formatFullYearISO(nt,rt){var it=nt.getDay();return nt=it>=4||it===0?timeThursday(nt):timeThursday.ceil(nt),pad(nt.getFullYear()%1e4,rt,4)}function formatZone(nt){var rt=nt.getTimezoneOffset();return(rt>0?"-":(rt*=-1,"+"))+pad(rt/60|0,"0",2)+pad(rt%60,"0",2)}function formatUTCDayOfMonth(nt,rt){return pad(nt.getUTCDate(),rt,2)}function formatUTCHour24(nt,rt){return pad(nt.getUTCHours(),rt,2)}function formatUTCHour12(nt,rt){return pad(nt.getUTCHours()%12||12,rt,2)}function formatUTCDayOfYear(nt,rt){return pad(1+utcDay.count(utcYear(nt),nt),rt,3)}function formatUTCMilliseconds(nt,rt){return pad(nt.getUTCMilliseconds(),rt,3)}function formatUTCMicroseconds(nt,rt){return formatUTCMilliseconds(nt,rt)+"000"}function formatUTCMonthNumber(nt,rt){return pad(nt.getUTCMonth()+1,rt,2)}function formatUTCMinutes(nt,rt){return pad(nt.getUTCMinutes(),rt,2)}function formatUTCSeconds(nt,rt){return pad(nt.getUTCSeconds(),rt,2)}function formatUTCWeekdayNumberMonday(nt){var rt=nt.getUTCDay();return rt===0?7:rt}function formatUTCWeekNumberSunday(nt,rt){return pad(utcSunday.count(utcYear(nt)-1,nt),rt,2)}function UTCdISO(nt){var rt=nt.getUTCDay();return rt>=4||rt===0?utcThursday(nt):utcThursday.ceil(nt)}function formatUTCWeekNumberISO(nt,rt){return nt=UTCdISO(nt),pad(utcThursday.count(utcYear(nt),nt)+(utcYear(nt).getUTCDay()===4),rt,2)}function formatUTCWeekdayNumberSunday(nt){return nt.getUTCDay()}function formatUTCWeekNumberMonday(nt,rt){return pad(utcMonday.count(utcYear(nt)-1,nt),rt,2)}function formatUTCYear(nt,rt){return pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCYearISO(nt,rt){return nt=UTCdISO(nt),pad(nt.getUTCFullYear()%100,rt,2)}function formatUTCFullYear(nt,rt){return pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCFullYearISO(nt,rt){var it=nt.getUTCDay();return nt=it>=4||it===0?utcThursday(nt):utcThursday.ceil(nt),pad(nt.getUTCFullYear()%1e4,rt,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(nt){return+nt}function formatUnixTimestampSeconds(nt){return Math.floor(+nt/1e3)}var locale,timeFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(nt){return locale=formatLocale(nt),timeFormat=locale.format,locale.parse,locale.utcFormat,locale.utcParse,locale}function date(nt){return new Date(nt)}function number(nt){return nt instanceof Date?+nt:+new Date(+nt)}function calendar(nt,rt,it,st,_t,xt,Et,kt,Lt,It){var Rt=continuous(),Nt=Rt.invert,Bt=Rt.domain,Ft=It(".%L"),Yt=It(":%S"),Zt=It("%I:%M"),Wt=It("%I %p"),Kt=It("%a %d"),Jt=It("%b %d"),on=It("%B"),rn=It("%Y");function ln(gn){return(Lt(gn)<gn?Ft:kt(gn)<gn?Yt:Et(gn)<gn?Zt:xt(gn)<gn?Wt:st(gn)<gn?_t(gn)<gn?Kt:Jt:it(gn)<gn?on:rn)(gn)}return Rt.invert=function(gn){return new Date(Nt(gn))},Rt.domain=function(gn){return arguments.length?Bt(Array.from(gn,number)):Bt().map(date)},Rt.ticks=function(gn){var wn=Bt();return nt(wn[0],wn[wn.length-1],gn==null?10:gn)},Rt.tickFormat=function(gn,wn){return wn==null?ln:It(wn)},Rt.nice=function(gn){var wn=Bt();return(!gn||typeof gn.range!="function")&&(gn=rt(wn[0],wn[wn.length-1],gn==null?10:gn)),gn?Bt(nice(wn,gn)):Rt},Rt.copy=function(){return copy$1(Rt,calendar(nt,rt,it,st,_t,xt,Et,kt,Lt,It))},Rt}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function constant$1(nt){return function(){return nt}}const abs$1=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(nt){return nt>1?0:nt<-1?pi:Math.acos(nt)}function asin(nt){return nt>=1?halfPi:nt<=-1?-halfPi:Math.asin(nt)}function withPath(nt){let rt=3;return nt.digits=function(it){if(!arguments.length)return rt;if(it==null)rt=null;else{const st=Math.floor(it);if(!(st>=0))throw new RangeError(`invalid digits: ${it}`);rt=st}return nt},()=>new Path(rt)}function arcInnerRadius(nt){return nt.innerRadius}function arcOuterRadius(nt){return nt.outerRadius}function arcStartAngle(nt){return nt.startAngle}function arcEndAngle(nt){return nt.endAngle}function arcPadAngle(nt){return nt&&nt.padAngle}function intersect$1(nt,rt,it,st,_t,xt,Et,kt){var Lt=it-nt,It=st-rt,Rt=Et-_t,Nt=kt-xt,Bt=Nt*Lt-Rt*It;if(!(Bt*Bt<epsilon))return Bt=(Rt*(rt-xt)-Nt*(nt-_t))/Bt,[nt+Bt*Lt,rt+Bt*It]}function cornerTangents(nt,rt,it,st,_t,xt,Et){var kt=nt-it,Lt=rt-st,It=(Et?xt:-xt)/sqrt(kt*kt+Lt*Lt),Rt=It*Lt,Nt=-It*kt,Bt=nt+Rt,Ft=rt+Nt,Yt=it+Rt,Zt=st+Nt,Wt=(Bt+Yt)/2,Kt=(Ft+Zt)/2,Jt=Yt-Bt,on=Zt-Ft,rn=Jt*Jt+on*on,ln=_t-xt,gn=Bt*Zt-Yt*Ft,wn=(on<0?-1:1)*sqrt(max$1(0,ln*ln*rn-gn*gn)),kn=(gn*on-Jt*wn)/rn,Cn=(-gn*Jt-on*wn)/rn,Pn=(gn*on+Jt*wn)/rn,An=(-gn*Jt+on*wn)/rn,cn=kn-Wt,Ln=Cn-Kt,an=Pn-Wt,zn=An-Kt;return cn*cn+Ln*Ln>an*an+zn*zn&&(kn=Pn,Cn=An),{cx:kn,cy:Cn,x01:-Rt,y01:-Nt,x11:kn*(_t/ln-1),y11:Cn*(_t/ln-1)}}function arc(){var nt=arcInnerRadius,rt=arcOuterRadius,it=constant$1(0),st=null,_t=arcStartAngle,xt=arcEndAngle,Et=arcPadAngle,kt=null,Lt=withPath(It);function It(){var Rt,Nt,Bt=+nt.apply(this,arguments),Ft=+rt.apply(this,arguments),Yt=_t.apply(this,arguments)-halfPi,Zt=xt.apply(this,arguments)-halfPi,Wt=abs$1(Zt-Yt),Kt=Zt>Yt;if(kt||(kt=Rt=Lt()),Ft<Bt&&(Nt=Ft,Ft=Bt,Bt=Nt),!(Ft>epsilon))kt.moveTo(0,0);else if(Wt>tau-epsilon)kt.moveTo(Ft*cos(Yt),Ft*sin(Yt)),kt.arc(0,0,Ft,Yt,Zt,!Kt),Bt>epsilon&&(kt.moveTo(Bt*cos(Zt),Bt*sin(Zt)),kt.arc(0,0,Bt,Zt,Yt,Kt));else{var Jt=Yt,on=Zt,rn=Yt,ln=Zt,gn=Wt,wn=Wt,kn=Et.apply(this,arguments)/2,Cn=kn>epsilon&&(st?+st.apply(this,arguments):sqrt(Bt*Bt+Ft*Ft)),Pn=min$1(abs$1(Ft-Bt)/2,+it.apply(this,arguments)),An=Pn,cn=Pn,Ln,an;if(Cn>epsilon){var zn=asin(Cn/Bt*sin(kn)),dn=asin(Cn/Ft*sin(kn));(gn-=zn*2)>epsilon?(zn*=Kt?1:-1,rn+=zn,ln-=zn):(gn=0,rn=ln=(Yt+Zt)/2),(wn-=dn*2)>epsilon?(dn*=Kt?1:-1,Jt+=dn,on-=dn):(wn=0,Jt=on=(Yt+Zt)/2)}var Fn=Ft*cos(Jt),ir=Ft*sin(Jt),tr=Bt*cos(ln),Jn=Bt*sin(ln);if(Pn>epsilon){var hr=Ft*cos(on),lr=Ft*sin(on),cr=Bt*cos(rn),Cr=Bt*sin(rn),Er;if(Wt<pi)if(Er=intersect$1(Fn,ir,cr,Cr,hr,lr,tr,Jn)){var ar=Fn-Er[0],Fr=ir-Er[1],mr=hr-Er[0],xr=lr-Er[1],fr=1/sin(acos((ar*mr+Fr*xr)/(sqrt(ar*ar+Fr*Fr)*sqrt(mr*mr+xr*xr)))/2),gr=sqrt(Er[0]*Er[0]+Er[1]*Er[1]);An=min$1(Pn,(Bt-gr)/(fr-1)),cn=min$1(Pn,(Ft-gr)/(fr+1))}else An=cn=0}wn>epsilon?cn>epsilon?(Ln=cornerTangents(cr,Cr,Fn,ir,Ft,cn,Kt),an=cornerTangents(hr,lr,tr,Jn,Ft,cn,Kt),kt.moveTo(Ln.cx+Ln.x01,Ln.cy+Ln.y01),cn<Pn?kt.arc(Ln.cx,Ln.cy,cn,atan2(Ln.y01,Ln.x01),atan2(an.y01,an.x01),!Kt):(kt.arc(Ln.cx,Ln.cy,cn,atan2(Ln.y01,Ln.x01),atan2(Ln.y11,Ln.x11),!Kt),kt.arc(0,0,Ft,atan2(Ln.cy+Ln.y11,Ln.cx+Ln.x11),atan2(an.cy+an.y11,an.cx+an.x11),!Kt),kt.arc(an.cx,an.cy,cn,atan2(an.y11,an.x11),atan2(an.y01,an.x01),!Kt))):(kt.moveTo(Fn,ir),kt.arc(0,0,Ft,Jt,on,!Kt)):kt.moveTo(Fn,ir),!(Bt>epsilon)||!(gn>epsilon)?kt.lineTo(tr,Jn):An>epsilon?(Ln=cornerTangents(tr,Jn,hr,lr,Bt,-An,Kt),an=cornerTangents(Fn,ir,cr,Cr,Bt,-An,Kt),kt.lineTo(Ln.cx+Ln.x01,Ln.cy+Ln.y01),An<Pn?kt.arc(Ln.cx,Ln.cy,An,atan2(Ln.y01,Ln.x01),atan2(an.y01,an.x01),!Kt):(kt.arc(Ln.cx,Ln.cy,An,atan2(Ln.y01,Ln.x01),atan2(Ln.y11,Ln.x11),!Kt),kt.arc(0,0,Bt,atan2(Ln.cy+Ln.y11,Ln.cx+Ln.x11),atan2(an.cy+an.y11,an.cx+an.x11),Kt),kt.arc(an.cx,an.cy,An,atan2(an.y11,an.x11),atan2(an.y01,an.x01),!Kt))):kt.arc(0,0,Bt,ln,rn,Kt)}if(kt.closePath(),Rt)return kt=null,Rt+""||null}return It.centroid=function(){var Rt=(+nt.apply(this,arguments)+ +rt.apply(this,arguments))/2,Nt=(+_t.apply(this,arguments)+ +xt.apply(this,arguments))/2-pi/2;return[cos(Nt)*Rt,sin(Nt)*Rt]},It.innerRadius=function(Rt){return arguments.length?(nt=typeof Rt=="function"?Rt:constant$1(+Rt),It):nt},It.outerRadius=function(Rt){return arguments.length?(rt=typeof Rt=="function"?Rt:constant$1(+Rt),It):rt},It.cornerRadius=function(Rt){return arguments.length?(it=typeof Rt=="function"?Rt:constant$1(+Rt),It):it},It.padRadius=function(Rt){return arguments.length?(st=Rt==null?null:typeof Rt=="function"?Rt:constant$1(+Rt),It):st},It.startAngle=function(Rt){return arguments.length?(_t=typeof Rt=="function"?Rt:constant$1(+Rt),It):_t},It.endAngle=function(Rt){return arguments.length?(xt=typeof Rt=="function"?Rt:constant$1(+Rt),It):xt},It.padAngle=function(Rt){return arguments.length?(Et=typeof Rt=="function"?Rt:constant$1(+Rt),It):Et},It.context=function(Rt){return arguments.length?(kt=Rt==null?null:Rt,It):kt},It}function array(nt){return typeof nt=="object"&&"length"in nt?nt:Array.from(nt)}function Linear(nt){this._context=nt}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:this._context.lineTo(nt,rt);break}}};function curveLinear(nt){return new Linear(nt)}function x(nt){return nt[0]}function y(nt){return nt[1]}function line$1(nt,rt){var it=constant$1(!0),st=null,_t=curveLinear,xt=null,Et=withPath(kt);nt=typeof nt=="function"?nt:nt===void 0?x:constant$1(nt),rt=typeof rt=="function"?rt:rt===void 0?y:constant$1(rt);function kt(Lt){var It,Rt=(Lt=array(Lt)).length,Nt,Bt=!1,Ft;for(st==null&&(xt=_t(Ft=Et())),It=0;It<=Rt;++It)!(It<Rt&&it(Nt=Lt[It],It,Lt))===Bt&&((Bt=!Bt)?xt.lineStart():xt.lineEnd()),Bt&&xt.point(+nt(Nt,It,Lt),+rt(Nt,It,Lt));if(Ft)return xt=null,Ft+""||null}return kt.x=function(Lt){return arguments.length?(nt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):nt},kt.y=function(Lt){return arguments.length?(rt=typeof Lt=="function"?Lt:constant$1(+Lt),kt):rt},kt.defined=function(Lt){return arguments.length?(it=typeof Lt=="function"?Lt:constant$1(!!Lt),kt):it},kt.curve=function(Lt){return arguments.length?(_t=Lt,st!=null&&(xt=_t(st)),kt):_t},kt.context=function(Lt){return arguments.length?(Lt==null?st=xt=null:xt=_t(st=Lt),kt):st},kt}function descending(nt,rt){return rt<nt?-1:rt>nt?1:rt>=nt?0:NaN}function identity$1(nt){return nt}function pie(){var nt=identity$1,rt=descending,it=null,st=constant$1(0),_t=constant$1(tau),xt=constant$1(0);function Et(kt){var Lt,It=(kt=array(kt)).length,Rt,Nt,Bt=0,Ft=new Array(It),Yt=new Array(It),Zt=+st.apply(this,arguments),Wt=Math.min(tau,Math.max(-tau,_t.apply(this,arguments)-Zt)),Kt,Jt=Math.min(Math.abs(Wt)/It,xt.apply(this,arguments)),on=Jt*(Wt<0?-1:1),rn;for(Lt=0;Lt<It;++Lt)(rn=Yt[Ft[Lt]=Lt]=+nt(kt[Lt],Lt,kt))>0&&(Bt+=rn);for(rt!=null?Ft.sort(function(ln,gn){return rt(Yt[ln],Yt[gn])}):it!=null&&Ft.sort(function(ln,gn){return it(kt[ln],kt[gn])}),Lt=0,Nt=Bt?(Wt-It*on)/Bt:0;Lt<It;++Lt,Zt=Kt)Rt=Ft[Lt],rn=Yt[Rt],Kt=Zt+(rn>0?rn*Nt:0)+on,Yt[Rt]={data:kt[Rt],index:Lt,value:rn,startAngle:Zt,endAngle:Kt,padAngle:Jt};return Yt}return Et.value=function(kt){return arguments.length?(nt=typeof kt=="function"?kt:constant$1(+kt),Et):nt},Et.sortValues=function(kt){return arguments.length?(rt=kt,it=null,Et):rt},Et.sort=function(kt){return arguments.length?(it=kt,rt=null,Et):it},Et.startAngle=function(kt){return arguments.length?(st=typeof kt=="function"?kt:constant$1(+kt),Et):st},Et.endAngle=function(kt){return arguments.length?(_t=typeof kt=="function"?kt:constant$1(+kt),Et):_t},Et.padAngle=function(kt){return arguments.length?(xt=typeof kt=="function"?kt:constant$1(+kt),Et):xt},Et}class Bump{constructor(rt,it){this._context=rt,this._x=it}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(rt,it){switch(rt=+rt,it=+it,this._point){case 0:{this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+rt)/2,this._y0,this._x0,it,rt,it):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+it)/2,rt,this._y0,rt,it);break}}this._x0=rt,this._y0=it}}function bumpX(nt){return new Bump(nt,!0)}function bumpY(nt){return new Bump(nt,!1)}function noop$1(){}function point$4(nt,rt,it){nt._context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+rt)/6,(nt._y0+4*nt._y1+it)/6)}function Basis(nt){this._context=nt}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$4(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasis(nt){return new Basis(nt)}function BasisClosed(nt){this._context=nt}BasisClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._x2=nt,this._y2=rt;break;case 1:this._point=2,this._x3=nt,this._y3=rt;break;case 2:this._point=3,this._x4=nt,this._y4=rt,this._context.moveTo((this._x0+4*this._x1+nt)/6,(this._y0+4*this._y1+rt)/6);break;default:point$4(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisClosed(nt){return new BasisClosed(nt)}function BasisOpen(nt){this._context=nt}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var it=(this._x0+4*this._x1+nt)/6,st=(this._y0+4*this._y1+rt)/6;this._line?this._context.lineTo(it,st):this._context.moveTo(it,st);break;case 3:this._point=4;default:point$4(this,nt,rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt}};function curveBasisOpen(nt){return new BasisOpen(nt)}function Bundle(nt,rt){this._basis=new Basis(nt),this._beta=rt}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var nt=this._x,rt=this._y,it=nt.length-1;if(it>0)for(var st=nt[0],_t=rt[0],xt=nt[it]-st,Et=rt[it]-_t,kt=-1,Lt;++kt<=it;)Lt=kt/it,this._basis.point(this._beta*nt[kt]+(1-this._beta)*(st+Lt*xt),this._beta*rt[kt]+(1-this._beta)*(_t+Lt*Et));this._x=this._y=null,this._basis.lineEnd()},point:function(nt,rt){this._x.push(+nt),this._y.push(+rt)}};const curveBundle=function nt(rt){function it(st){return rt===1?new Basis(st):new Bundle(st,rt)}return it.beta=function(st){return nt(+st)},it}(.85);function point$3(nt,rt,it){nt._context.bezierCurveTo(nt._x1+nt._k*(nt._x2-nt._x0),nt._y1+nt._k*(nt._y2-nt._y0),nt._x2+nt._k*(nt._x1-rt),nt._y2+nt._k*(nt._y1-it),nt._x2,nt._y2)}function Cardinal(nt,rt){this._context=nt,this._k=(1-rt)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2,this._x1=nt,this._y1=rt;break;case 2:this._point=3;default:point$3(this,nt,rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCardinal=function nt(rt){function it(st){return new Cardinal(st,rt)}return it.tension=function(st){return nt(+st)},it}(0);function CardinalClosed(nt,rt){this._context=nt,this._k=(1-rt)/6}CardinalClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._x3=nt,this._y3=rt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=rt);break;case 2:this._point=3,this._x5=nt,this._y5=rt;break;default:point$3(this,nt,rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCardinalClosed=function nt(rt){function it(st){return new CardinalClosed(st,rt)}return it.tension=function(st){return nt(+st)},it}(0);function CardinalOpen(nt,rt){this._context=nt,this._k=(1-rt)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,nt,rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCardinalOpen=function nt(rt){function it(st){return new CardinalOpen(st,rt)}return it.tension=function(st){return nt(+st)},it}(0);function point$2(nt,rt,it){var st=nt._x1,_t=nt._y1,xt=nt._x2,Et=nt._y2;if(nt._l01_a>epsilon){var kt=2*nt._l01_2a+3*nt._l01_a*nt._l12_a+nt._l12_2a,Lt=3*nt._l01_a*(nt._l01_a+nt._l12_a);st=(st*kt-nt._x0*nt._l12_2a+nt._x2*nt._l01_2a)/Lt,_t=(_t*kt-nt._y0*nt._l12_2a+nt._y2*nt._l01_2a)/Lt}if(nt._l23_a>epsilon){var It=2*nt._l23_2a+3*nt._l23_a*nt._l12_a+nt._l12_2a,Rt=3*nt._l23_a*(nt._l23_a+nt._l12_a);xt=(xt*It+nt._x1*nt._l23_2a-rt*nt._l12_2a)/Rt,Et=(Et*It+nt._y1*nt._l23_2a-it*nt._l12_2a)/Rt}nt._context.bezierCurveTo(st,_t,xt,Et,nt._x2,nt._y2)}function CatmullRom(nt,rt){this._context=nt,this._alpha=rt}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){if(nt=+nt,rt=+rt,this._point){var it=this._x2-nt,st=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+st*st,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,nt,rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCatmullRom=function nt(rt){function it(st){return rt?new CatmullRom(st,rt):new Cardinal(st,0)}return it.alpha=function(st){return nt(+st)},it}(.5);function CatmullRomClosed(nt,rt){this._context=nt,this._alpha=rt}CatmullRomClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,rt){if(nt=+nt,rt=+rt,this._point){var it=this._x2-nt,st=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+st*st,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=nt,this._y3=rt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=rt);break;case 2:this._point=3,this._x5=nt,this._y5=rt;break;default:point$2(this,nt,rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCatmullRomClosed=function nt(rt){function it(st){return rt?new CatmullRomClosed(st,rt):new CardinalClosed(st,0)}return it.alpha=function(st){return nt(+st)},it}(.5);function CatmullRomOpen(nt,rt){this._context=nt,this._alpha=rt}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){if(nt=+nt,rt=+rt,this._point){var it=this._x2-nt,st=this._y2-rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+st*st,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,nt,rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=rt}};const curveCatmullRomOpen=function nt(rt){function it(st){return rt?new CatmullRomOpen(st,rt):new CardinalOpen(st,0)}return it.alpha=function(st){return nt(+st)},it}(.5);function LinearClosed(nt){this._context=nt}LinearClosed.prototype={areaStart:noop$1,areaEnd:noop$1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(nt,rt){nt=+nt,rt=+rt,this._point?this._context.lineTo(nt,rt):(this._point=1,this._context.moveTo(nt,rt))}};function curveLinearClosed(nt){return new LinearClosed(nt)}function sign(nt){return nt<0?-1:1}function slope3(nt,rt,it){var st=nt._x1-nt._x0,_t=rt-nt._x1,xt=(nt._y1-nt._y0)/(st||_t<0&&-0),Et=(it-nt._y1)/(_t||st<0&&-0),kt=(xt*_t+Et*st)/(st+_t);return(sign(xt)+sign(Et))*Math.min(Math.abs(xt),Math.abs(Et),.5*Math.abs(kt))||0}function slope2(nt,rt){var it=nt._x1-nt._x0;return it?(3*(nt._y1-nt._y0)/it-rt)/2:rt}function point$1(nt,rt,it){var st=nt._x0,_t=nt._y0,xt=nt._x1,Et=nt._y1,kt=(xt-st)/3;nt._context.bezierCurveTo(st+kt,_t+kt*rt,xt-kt,Et-kt*it,xt,Et)}function MonotoneX(nt){this._context=nt}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,rt){var it=NaN;if(nt=+nt,rt=+rt,!(nt===this._x1&&rt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,it=slope3(this,nt,rt)),it);break;default:point$1(this,this._t0,it=slope3(this,nt,rt));break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=rt,this._t0=it}}};function MonotoneY(nt){this._context=new ReflectContext(nt)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(nt,rt){MonotoneX.prototype.point.call(this,rt,nt)};function ReflectContext(nt){this._context=nt}ReflectContext.prototype={moveTo:function(nt,rt){this._context.moveTo(rt,nt)},closePath:function(){this._context.closePath()},lineTo:function(nt,rt){this._context.lineTo(rt,nt)},bezierCurveTo:function(nt,rt,it,st,_t,xt){this._context.bezierCurveTo(rt,nt,st,it,xt,_t)}};function monotoneX(nt){return new MonotoneX(nt)}function monotoneY(nt){return new MonotoneY(nt)}function Natural(nt){this._context=nt}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var nt=this._x,rt=this._y,it=nt.length;if(it)if(this._line?this._context.lineTo(nt[0],rt[0]):this._context.moveTo(nt[0],rt[0]),it===2)this._context.lineTo(nt[1],rt[1]);else for(var st=controlPoints(nt),_t=controlPoints(rt),xt=0,Et=1;Et<it;++xt,++Et)this._context.bezierCurveTo(st[0][xt],_t[0][xt],st[1][xt],_t[1][xt],nt[Et],rt[Et]);(this._line||this._line!==0&&it===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(nt,rt){this._x.push(+nt),this._y.push(+rt)}};function controlPoints(nt){var rt,it=nt.length-1,st,_t=new Array(it),xt=new Array(it),Et=new Array(it);for(_t[0]=0,xt[0]=2,Et[0]=nt[0]+2*nt[1],rt=1;rt<it-1;++rt)_t[rt]=1,xt[rt]=4,Et[rt]=4*nt[rt]+2*nt[rt+1];for(_t[it-1]=2,xt[it-1]=7,Et[it-1]=8*nt[it-1]+nt[it],rt=1;rt<it;++rt)st=_t[rt]/xt[rt-1],xt[rt]-=st,Et[rt]-=st*Et[rt-1];for(_t[it-1]=Et[it-1]/xt[it-1],rt=it-2;rt>=0;--rt)_t[rt]=(Et[rt]-_t[rt+1])/xt[rt];for(xt[it-1]=(nt[it]+_t[it-1])/2,rt=0;rt<it-1;++rt)xt[rt]=2*nt[rt+1]-_t[rt+1];return[_t,xt]}function curveNatural(nt){return new Natural(nt)}function Step(nt,rt){this._context=nt,this._t=rt}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(nt,rt){switch(nt=+nt,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,rt):this._context.moveTo(nt,rt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,rt),this._context.lineTo(nt,rt);else{var it=this._x*(1-this._t)+nt*this._t;this._context.lineTo(it,this._y),this._context.lineTo(it,rt)}break}}this._x=nt,this._y=rt}};function curveStep(nt){return new Step(nt,.5)}function stepBefore(nt){return new Step(nt,0)}function stepAfter(nt){return new Step(nt,1)}function Transform(nt,rt,it){this.k=nt,this.x=rt,this.y=it}Transform.prototype={constructor:Transform,scale:function(nt){return nt===1?this:new Transform(this.k*nt,this.x,this.y)},translate:function(nt,rt){return nt===0&rt===0?this:new Transform(this.k,this.x+this.k*nt,this.y+this.k*rt)},apply:function(nt){return[nt[0]*this.k+this.x,nt[1]*this.k+this.y]},applyX:function(nt){return nt*this.k+this.x},applyY:function(nt){return nt*this.k+this.y},invert:function(nt){return[(nt[0]-this.x)/this.k,(nt[1]-this.y)/this.k]},invertX:function(nt){return(nt-this.x)/this.k},invertY:function(nt){return(nt-this.y)/this.k},rescaleX:function(nt){return nt.copy().domain(nt.range().map(this.invertX,this).map(nt.invert,nt))},rescaleY:function(nt){return nt.copy().domain(nt.range().map(this.invertY,this).map(nt.invert,nt))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Transform(1,0,0);Transform.prototype;/*! @license DOMPurify 2.4.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.3/LICENSE */function _typeof(nt){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof(nt)}function _setPrototypeOf(nt,rt){return _setPrototypeOf=Object.setPrototypeOf||function(st,_t){return st.__proto__=_t,st},_setPrototypeOf(nt,rt)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(nt,rt,it){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(_t,xt,Et){var kt=[null];kt.push.apply(kt,xt);var Lt=Function.bind.apply(_t,kt),It=new Lt;return Et&&_setPrototypeOf(It,Et.prototype),It},_construct.apply(null,arguments)}function _toConsumableArray(nt){return _arrayWithoutHoles(nt)||_iterableToArray(nt)||_unsupportedIterableToArray(nt)||_nonIterableSpread()}function _arrayWithoutHoles(nt){if(Array.isArray(nt))return _arrayLikeToArray(nt)}function _iterableToArray(nt){if(typeof Symbol<"u"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)}function _unsupportedIterableToArray(nt,rt){if(!!nt){if(typeof nt=="string")return _arrayLikeToArray(nt,rt);var it=Object.prototype.toString.call(nt).slice(8,-1);if(it==="Object"&&nt.constructor&&(it=nt.constructor.name),it==="Map"||it==="Set")return Array.from(nt);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return _arrayLikeToArray(nt,rt)}}function _arrayLikeToArray(nt,rt){(rt==null||rt>nt.length)&&(rt=nt.length);for(var it=0,st=new Array(rt);it<rt;it++)st[it]=nt[it];return st}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hasOwnProperty$g=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply$2=_ref.apply,construct=_ref.construct;apply$2||(apply$2=function(rt,it,st){return rt.apply(it,st)});freeze||(freeze=function(rt){return rt});seal||(seal=function(rt){return rt});construct||(construct=function(rt,it){return _construct(rt,_toConsumableArray(it))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush$1=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(nt){return function(rt){for(var it=arguments.length,st=new Array(it>1?it-1:0),_t=1;_t<it;_t++)st[_t-1]=arguments[_t];return apply$2(nt,rt,st)}}function unconstruct(nt){return function(){for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return construct(nt,it)}}function addToSet(nt,rt,it){it=it||stringToLowerCase,setPrototypeOf&&setPrototypeOf(nt,null);for(var st=rt.length;st--;){var _t=rt[st];if(typeof _t=="string"){var xt=it(_t);xt!==_t&&(isFrozen(rt)||(rt[st]=xt),_t=xt)}nt[_t]=!0}return nt}function clone$2(nt){var rt=create(null),it;for(it in nt)apply$2(hasOwnProperty$g,nt,[it])===!0&&(rt[it]=nt[it]);return rt}function lookupGetter(nt,rt){for(;nt!==null;){var it=getOwnPropertyDescriptor(nt,rt);if(it){if(it.get)return unapply(it.get);if(typeof it.value=="function")return unapply(it.value)}nt=getPrototypeOf(nt)}function st(_t){return console.warn("fallback value for",_t),null}return st}var html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),getGlobal=function nt(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function nt(rt,it){if(_typeof(rt)!=="object"||typeof rt.createPolicy!="function")return null;var st=null,_t="data-tt-policy-suffix";it.currentScript&&it.currentScript.hasAttribute(_t)&&(st=it.currentScript.getAttribute(_t));var xt="dompurify"+(st?"#"+st:"");try{return rt.createPolicy(xt,{createHTML:function(kt){return kt},createScriptURL:function(kt){return kt}})}catch{return console.warn("TrustedTypes policy "+xt+" could not be created."),null}};function createDOMPurify(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),rt=function(dr){return createDOMPurify(dr)};if(rt.version="2.4.3",rt.removed=[],!nt||!nt.document||nt.document.nodeType!==9)return rt.isSupported=!1,rt;var it=nt.document,st=nt.document,_t=nt.DocumentFragment,xt=nt.HTMLTemplateElement,Et=nt.Node,kt=nt.Element,Lt=nt.NodeFilter,It=nt.NamedNodeMap,Rt=It===void 0?nt.NamedNodeMap||nt.MozNamedAttrMap:It,Nt=nt.HTMLFormElement,Bt=nt.DOMParser,Ft=nt.trustedTypes,Yt=kt.prototype,Zt=lookupGetter(Yt,"cloneNode"),Wt=lookupGetter(Yt,"nextSibling"),Kt=lookupGetter(Yt,"childNodes"),Jt=lookupGetter(Yt,"parentNode");if(typeof xt=="function"){var on=st.createElement("template");on.content&&on.content.ownerDocument&&(st=on.content.ownerDocument)}var rn=_createTrustedTypesPolicy(Ft,it),ln=rn?rn.createHTML(""):"",gn=st,wn=gn.implementation,kn=gn.createNodeIterator,Cn=gn.createDocumentFragment,Pn=gn.getElementsByTagName,An=it.importNode,cn={};try{cn=clone$2(st).documentMode?st.documentMode:{}}catch{}var Ln={};rt.isSupported=typeof Jt=="function"&&wn&&typeof wn.createHTMLDocument<"u"&&cn!==9;var an=MUSTACHE_EXPR,zn=ERB_EXPR,dn=TMPLIT_EXPR,Fn=DATA_ATTR,ir=ARIA_ATTR,tr=IS_SCRIPT_OR_DATA,Jn=ATTR_WHITESPACE,hr=IS_ALLOWED_URI,lr=null,cr=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),Cr=null,Er=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),ar=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Fr=null,mr=null,xr=!0,fr=!0,gr=!1,er=!1,nn=!1,un=!1,pn=!1,Rn=!1,_n=!1,or=!1,Vn=!0,Wn=!1,Hn="user-content-",nr=!0,sr=!1,pr={},vr=null,kr=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),si=null,ui=addToSet({},["audio","video","img","source","image","track"]),ii=null,li=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ei="http://www.w3.org/1998/Math/MathML",wi="http://www.w3.org/2000/svg",Ci="http://www.w3.org/1999/xhtml",Lr=Ci,Tn=!1,En=null,Un=addToSet({},[Ei,wi,Ci],stringToString),qn,_r=["application/xhtml+xml","text/html"],Zr="text/html",yr,ni=null,Ar=st.createElement("form"),gi=function(dr){return dr instanceof RegExp||dr instanceof Function},hi=function(dr){ni&&ni===dr||((!dr||_typeof(dr)!=="object")&&(dr={}),dr=clone$2(dr),qn=_r.indexOf(dr.PARSER_MEDIA_TYPE)===-1?qn=Zr:qn=dr.PARSER_MEDIA_TYPE,yr=qn==="application/xhtml+xml"?stringToString:stringToLowerCase,lr="ALLOWED_TAGS"in dr?addToSet({},dr.ALLOWED_TAGS,yr):cr,Cr="ALLOWED_ATTR"in dr?addToSet({},dr.ALLOWED_ATTR,yr):Er,En="ALLOWED_NAMESPACES"in dr?addToSet({},dr.ALLOWED_NAMESPACES,stringToString):Un,ii="ADD_URI_SAFE_ATTR"in dr?addToSet(clone$2(li),dr.ADD_URI_SAFE_ATTR,yr):li,si="ADD_DATA_URI_TAGS"in dr?addToSet(clone$2(ui),dr.ADD_DATA_URI_TAGS,yr):ui,vr="FORBID_CONTENTS"in dr?addToSet({},dr.FORBID_CONTENTS,yr):kr,Fr="FORBID_TAGS"in dr?addToSet({},dr.FORBID_TAGS,yr):{},mr="FORBID_ATTR"in dr?addToSet({},dr.FORBID_ATTR,yr):{},pr="USE_PROFILES"in dr?dr.USE_PROFILES:!1,xr=dr.ALLOW_ARIA_ATTR!==!1,fr=dr.ALLOW_DATA_ATTR!==!1,gr=dr.ALLOW_UNKNOWN_PROTOCOLS||!1,er=dr.SAFE_FOR_TEMPLATES||!1,nn=dr.WHOLE_DOCUMENT||!1,Rn=dr.RETURN_DOM||!1,_n=dr.RETURN_DOM_FRAGMENT||!1,or=dr.RETURN_TRUSTED_TYPE||!1,pn=dr.FORCE_BODY||!1,Vn=dr.SANITIZE_DOM!==!1,Wn=dr.SANITIZE_NAMED_PROPS||!1,nr=dr.KEEP_CONTENT!==!1,sr=dr.IN_PLACE||!1,hr=dr.ALLOWED_URI_REGEXP||hr,Lr=dr.NAMESPACE||Ci,dr.CUSTOM_ELEMENT_HANDLING&&gi(dr.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ar.tagNameCheck=dr.CUSTOM_ELEMENT_HANDLING.tagNameCheck),dr.CUSTOM_ELEMENT_HANDLING&&gi(dr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ar.attributeNameCheck=dr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),dr.CUSTOM_ELEMENT_HANDLING&&typeof dr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ar.allowCustomizedBuiltInElements=dr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),er&&(fr=!1),_n&&(Rn=!0),pr&&(lr=addToSet({},_toConsumableArray(text)),Cr=[],pr.html===!0&&(addToSet(lr,html$1),addToSet(Cr,html)),pr.svg===!0&&(addToSet(lr,svg$1),addToSet(Cr,svg),addToSet(Cr,xml)),pr.svgFilters===!0&&(addToSet(lr,svgFilters),addToSet(Cr,svg),addToSet(Cr,xml)),pr.mathMl===!0&&(addToSet(lr,mathMl$1),addToSet(Cr,mathMl),addToSet(Cr,xml))),dr.ADD_TAGS&&(lr===cr&&(lr=clone$2(lr)),addToSet(lr,dr.ADD_TAGS,yr)),dr.ADD_ATTR&&(Cr===Er&&(Cr=clone$2(Cr)),addToSet(Cr,dr.ADD_ATTR,yr)),dr.ADD_URI_SAFE_ATTR&&addToSet(ii,dr.ADD_URI_SAFE_ATTR,yr),dr.FORBID_CONTENTS&&(vr===kr&&(vr=clone$2(vr)),addToSet(vr,dr.FORBID_CONTENTS,yr)),nr&&(lr["#text"]=!0),nn&&addToSet(lr,["html","head","body"]),lr.table&&(addToSet(lr,["tbody"]),delete Fr.tbody),freeze&&freeze(dr),ni=dr)},Ti=addToSet({},["mi","mo","mn","ms","mtext"]),fi=addToSet({},["foreignobject","desc","title","annotation-xml"]),Yi=addToSet({},["title","style","font","a","script"]),Si=addToSet({},svg$1);addToSet(Si,svgFilters),addToSet(Si,svgDisallowed);var qi=addToSet({},mathMl$1);addToSet(qi,mathMlDisallowed);var uo=function(dr){var ei=Jt(dr);(!ei||!ei.tagName)&&(ei={namespaceURI:Lr,tagName:"template"});var ti=stringToLowerCase(dr.tagName),Bi=stringToLowerCase(ei.tagName);return En[dr.namespaceURI]?dr.namespaceURI===wi?ei.namespaceURI===Ci?ti==="svg":ei.namespaceURI===Ei?ti==="svg"&&(Bi==="annotation-xml"||Ti[Bi]):Boolean(Si[ti]):dr.namespaceURI===Ei?ei.namespaceURI===Ci?ti==="math":ei.namespaceURI===wi?ti==="math"&&fi[Bi]:Boolean(qi[ti]):dr.namespaceURI===Ci?ei.namespaceURI===wi&&!fi[Bi]||ei.namespaceURI===Ei&&!Ti[Bi]?!1:!qi[ti]&&(Yi[ti]||!Si[ti]):!!(qn==="application/xhtml+xml"&&En[dr.namespaceURI]):!1},Xi=function(dr){arrayPush$1(rt.removed,{element:dr});try{dr.parentNode.removeChild(dr)}catch{try{dr.outerHTML=ln}catch{dr.remove()}}},Na=function(dr,ei){try{arrayPush$1(rt.removed,{attribute:ei.getAttributeNode(dr),from:ei})}catch{arrayPush$1(rt.removed,{attribute:null,from:ei})}if(ei.removeAttribute(dr),dr==="is"&&!Cr[dr])if(Rn||_n)try{Xi(ei)}catch{}else try{ei.setAttribute(dr,"")}catch{}},zs=function(dr){var ei,ti;if(pn)dr="<remove></remove>"+dr;else{var Bi=stringMatch(dr,/^[\r\n\t ]+/);ti=Bi&&Bi[0]}qn==="application/xhtml+xml"&&Lr===Ci&&(dr='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+dr+"</body></html>");var Oo=rn?rn.createHTML(dr):dr;if(Lr===Ci)try{ei=new Bt().parseFromString(Oo,qn)}catch{}if(!ei||!ei.documentElement){ei=wn.createDocument(Lr,"template",null);try{ei.documentElement.innerHTML=Tn?ln:Oo}catch{}}var wo=ei.body||ei.documentElement;return dr&&ti&&wo.insertBefore(st.createTextNode(ti),wo.childNodes[0]||null),Lr===Ci?Pn.call(ei,nn?"html":"body")[0]:nn?ei.documentElement:wo},bi=function(dr){return kn.call(dr.ownerDocument||dr,dr,Lt.SHOW_ELEMENT|Lt.SHOW_COMMENT|Lt.SHOW_TEXT,null,!1)},Zi=function(dr){return dr instanceof Nt&&(typeof dr.nodeName!="string"||typeof dr.textContent!="string"||typeof dr.removeChild!="function"||!(dr.attributes instanceof Rt)||typeof dr.removeAttribute!="function"||typeof dr.setAttribute!="function"||typeof dr.namespaceURI!="string"||typeof dr.insertBefore!="function"||typeof dr.hasChildNodes!="function")},$s=function(dr){return _typeof(Et)==="object"?dr instanceof Et:dr&&_typeof(dr)==="object"&&typeof dr.nodeType=="number"&&typeof dr.nodeName=="string"},vs=function(dr,ei,ti){!Ln[dr]||arrayForEach(Ln[dr],function(Bi){Bi.call(rt,ei,ti,ni)})},ds=function(dr){var ei;if(vs("beforeSanitizeElements",dr,null),Zi(dr)||regExpTest(/[\u0080-\uFFFF]/,dr.nodeName))return Xi(dr),!0;var ti=yr(dr.nodeName);if(vs("uponSanitizeElement",dr,{tagName:ti,allowedTags:lr}),dr.hasChildNodes()&&!$s(dr.firstElementChild)&&(!$s(dr.content)||!$s(dr.content.firstElementChild))&&regExpTest(/<[/\w]/g,dr.innerHTML)&&regExpTest(/<[/\w]/g,dr.textContent)||ti==="select"&&regExpTest(/<template/i,dr.innerHTML))return Xi(dr),!0;if(!lr[ti]||Fr[ti]){if(!Fr[ti]&&Ir(ti)&&(ar.tagNameCheck instanceof RegExp&&regExpTest(ar.tagNameCheck,ti)||ar.tagNameCheck instanceof Function&&ar.tagNameCheck(ti)))return!1;if(nr&&!vr[ti]){var Bi=Jt(dr)||dr.parentNode,Oo=Kt(dr)||dr.childNodes;if(Oo&&Bi)for(var wo=Oo.length,_s=wo-1;_s>=0;--_s)Bi.insertBefore(Zt(Oo[_s],!0),Wt(dr))}return Xi(dr),!0}return dr instanceof kt&&!uo(dr)||(ti==="noscript"||ti==="noembed")&&regExpTest(/<\/no(script|embed)/i,dr.innerHTML)?(Xi(dr),!0):(er&&dr.nodeType===3&&(ei=dr.textContent,ei=stringReplace(ei,an," "),ei=stringReplace(ei,zn," "),ei=stringReplace(ei,dn," "),dr.textContent!==ei&&(arrayPush$1(rt.removed,{element:dr.cloneNode()}),dr.textContent=ei)),vs("afterSanitizeElements",dr,null),!1)},Ls=function(dr,ei,ti){if(Vn&&(ei==="id"||ei==="name")&&(ti in st||ti in Ar))return!1;if(!(fr&&!mr[ei]&&regExpTest(Fn,ei))){if(!(xr&&regExpTest(ir,ei))){if(!Cr[ei]||mr[ei]){if(!(Ir(dr)&&(ar.tagNameCheck instanceof RegExp&&regExpTest(ar.tagNameCheck,dr)||ar.tagNameCheck instanceof Function&&ar.tagNameCheck(dr))&&(ar.attributeNameCheck instanceof RegExp&&regExpTest(ar.attributeNameCheck,ei)||ar.attributeNameCheck instanceof Function&&ar.attributeNameCheck(ei))||ei==="is"&&ar.allowCustomizedBuiltInElements&&(ar.tagNameCheck instanceof RegExp&&regExpTest(ar.tagNameCheck,ti)||ar.tagNameCheck instanceof Function&&ar.tagNameCheck(ti))))return!1}else if(!ii[ei]){if(!regExpTest(hr,stringReplace(ti,Jn,""))){if(!((ei==="src"||ei==="xlink:href"||ei==="href")&&dr!=="script"&&stringIndexOf(ti,"data:")===0&&si[dr])){if(!(gr&&!regExpTest(tr,stringReplace(ti,Jn,"")))){if(ti)return!1}}}}}}return!0},Ir=function(dr){return dr.indexOf("-")>0},Hr=function(dr){var ei,ti,Bi,Oo;vs("beforeSanitizeAttributes",dr,null);var wo=dr.attributes;if(!!wo){var _s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Cr};for(Oo=wo.length;Oo--;){ei=wo[Oo];var fs=ei,zi=fs.name,Ps=fs.namespaceURI;if(ti=zi==="value"?ei.value:stringTrim(ei.value),Bi=yr(zi),_s.attrName=Bi,_s.attrValue=ti,_s.keepAttr=!0,_s.forceKeepAttr=void 0,vs("uponSanitizeAttribute",dr,_s),ti=_s.attrValue,!_s.forceKeepAttr&&(Na(zi,dr),!!_s.keepAttr)){if(regExpTest(/\/>/i,ti)){Na(zi,dr);continue}er&&(ti=stringReplace(ti,an," "),ti=stringReplace(ti,zn," "),ti=stringReplace(ti,dn," "));var Da=yr(dr.nodeName);if(!!Ls(Da,Bi,ti)){if(Wn&&(Bi==="id"||Bi==="name")&&(Na(zi,dr),ti=Hn+ti),rn&&_typeof(Ft)==="object"&&typeof Ft.getAttributeType=="function"&&!Ps)switch(Ft.getAttributeType(Da,Bi)){case"TrustedHTML":ti=rn.createHTML(ti);break;case"TrustedScriptURL":ti=rn.createScriptURL(ti);break}try{Ps?dr.setAttributeNS(Ps,zi,ti):dr.setAttribute(zi,ti),arrayPop(rt.removed)}catch{}}}}vs("afterSanitizeAttributes",dr,null)}},ri=function Gr(dr){var ei,ti=bi(dr);for(vs("beforeSanitizeShadowDOM",dr,null);ei=ti.nextNode();)vs("uponSanitizeShadowNode",ei,null),!ds(ei)&&(ei.content instanceof _t&&Gr(ei.content),Hr(ei));vs("afterSanitizeShadowDOM",dr,null)};return rt.sanitize=function(Gr){var dr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ei,ti,Bi,Oo,wo;if(Tn=!Gr,Tn&&(Gr="<!-->"),typeof Gr!="string"&&!$s(Gr)){if(typeof Gr.toString!="function")throw typeErrorCreate("toString is not a function");if(Gr=Gr.toString(),typeof Gr!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!rt.isSupported){if(_typeof(nt.toStaticHTML)==="object"||typeof nt.toStaticHTML=="function"){if(typeof Gr=="string")return nt.toStaticHTML(Gr);if($s(Gr))return nt.toStaticHTML(Gr.outerHTML)}return Gr}if(un||hi(dr),rt.removed=[],typeof Gr=="string"&&(sr=!1),sr){if(Gr.nodeName){var _s=yr(Gr.nodeName);if(!lr[_s]||Fr[_s])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(Gr instanceof Et)ei=zs("<!---->"),ti=ei.ownerDocument.importNode(Gr,!0),ti.nodeType===1&&ti.nodeName==="BODY"||ti.nodeName==="HTML"?ei=ti:ei.appendChild(ti);else{if(!Rn&&!er&&!nn&&Gr.indexOf("<")===-1)return rn&&or?rn.createHTML(Gr):Gr;if(ei=zs(Gr),!ei)return Rn?null:or?ln:""}ei&&pn&&Xi(ei.firstChild);for(var fs=bi(sr?Gr:ei);Bi=fs.nextNode();)Bi.nodeType===3&&Bi===Oo||ds(Bi)||(Bi.content instanceof _t&&ri(Bi.content),Hr(Bi),Oo=Bi);if(Oo=null,sr)return Gr;if(Rn){if(_n)for(wo=Cn.call(ei.ownerDocument);ei.firstChild;)wo.appendChild(ei.firstChild);else wo=ei;return Cr.shadowroot&&(wo=An.call(it,wo,!0)),wo}var zi=nn?ei.outerHTML:ei.innerHTML;return nn&&lr["!doctype"]&&ei.ownerDocument&&ei.ownerDocument.doctype&&ei.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,ei.ownerDocument.doctype.name)&&(zi="<!DOCTYPE "+ei.ownerDocument.doctype.name+`>
`+zi),er&&(zi=stringReplace(zi,an," "),zi=stringReplace(zi,zn," "),zi=stringReplace(zi,dn," ")),rn&&or?rn.createHTML(zi):zi},rt.setConfig=function(Gr){hi(Gr),un=!0},rt.clearConfig=function(){ni=null,un=!1},rt.isValidAttribute=function(Gr,dr,ei){ni||hi({});var ti=yr(Gr),Bi=yr(dr);return Ls(ti,Bi,ei)},rt.addHook=function(Gr,dr){typeof dr=="function"&&(Ln[Gr]=Ln[Gr]||[],arrayPush$1(Ln[Gr],dr))},rt.removeHook=function(Gr){if(Ln[Gr])return arrayPop(Ln[Gr])},rt.removeHooks=function(Gr){Ln[Gr]&&(Ln[Gr]=[])},rt.removeAllHooks=function(){Ln={}},rt}var purify=createDOMPurify();const Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:nt=>nt>=255?255:nt<0?0:nt,g:nt=>nt>=255?255:nt<0?0:nt,b:nt=>nt>=255?255:nt<0?0:nt,h:nt=>nt%360,s:nt=>nt>=100?100:nt<0?0:nt,l:nt=>nt>=100?100:nt<0?0:nt,a:nt=>nt>=1?1:nt<0?0:nt},toLinear:nt=>{const rt=nt/255;return nt>.03928?Math.pow((rt+.055)/1.055,2.4):rt/12.92},hue2rgb:(nt,rt,it)=>(it<0&&(it+=1),it>1&&(it-=1),it<1/6?nt+(rt-nt)*6*it:it<1/2?rt:it<2/3?nt+(rt-nt)*(2/3-it)*6:nt),hsl2rgb:({h:nt,s:rt,l:it},st)=>{if(!rt)return it*2.55;nt/=360,rt/=100,it/=100;const _t=it<.5?it*(1+rt):it+rt-it*rt,xt=2*it-_t;switch(st){case"r":return Channel.hue2rgb(xt,_t,nt+1/3)*255;case"g":return Channel.hue2rgb(xt,_t,nt)*255;case"b":return Channel.hue2rgb(xt,_t,nt-1/3)*255}},rgb2hsl:({r:nt,g:rt,b:it},st)=>{nt/=255,rt/=255,it/=255;const _t=Math.max(nt,rt,it),xt=Math.min(nt,rt,it),Et=(_t+xt)/2;if(st==="l")return Et*100;if(_t===xt)return 0;const kt=_t-xt,Lt=Et>.5?kt/(2-_t-xt):kt/(_t+xt);if(st==="s")return Lt*100;switch(_t){case nt:return((rt-it)/kt+(rt<it?6:0))*60;case rt:return((it-nt)/kt+2)*60;case it:return((nt-rt)/kt+4)*60;default:return-1}}},channel=Channel,Lang={clamp:(nt,rt,it)=>rt>it?Math.min(rt,Math.max(it,nt)):Math.min(it,Math.max(rt,nt)),round:nt=>Math.round(nt*1e10)/1e10},lang=Lang,Unit={dec2hex:nt=>{const rt=Math.round(nt).toString(16);return rt.length>1?rt:`0${rt}`}},unit=Unit,Utils={channel,lang,unit},_=Utils,DEC2HEX={};for(let nt=0;nt<=255;nt++)DEC2HEX[nt]=_.unit.dec2hex(nt);const TYPE={ALL:0,RGB:1,HSL:2};class Type{constructor(){this.type=TYPE.ALL}get(){return this.type}set(rt){if(this.type&&this.type!==rt)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=rt}reset(){this.type=TYPE.ALL}is(rt){return this.type===rt}}const Type$2=Type;class Channels{constructor(rt,it){this.color=it,this.changed=!1,this.data=rt,this.type=new Type$2}set(rt,it){return this.color=it,this.changed=!1,this.data=rt,this.type.type=TYPE.ALL,this}_ensureHSL(){const rt=this.data,{h:it,s:st,l:_t}=rt;it===void 0&&(rt.h=_.channel.rgb2hsl(rt,"h")),st===void 0&&(rt.s=_.channel.rgb2hsl(rt,"s")),_t===void 0&&(rt.l=_.channel.rgb2hsl(rt,"l"))}_ensureRGB(){const rt=this.data,{r:it,g:st,b:_t}=rt;it===void 0&&(rt.r=_.channel.hsl2rgb(rt,"r")),st===void 0&&(rt.g=_.channel.hsl2rgb(rt,"g")),_t===void 0&&(rt.b=_.channel.hsl2rgb(rt,"b"))}get r(){const rt=this.data,it=rt.r;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"r"))}get g(){const rt=this.data,it=rt.g;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"g"))}get b(){const rt=this.data,it=rt.b;return!this.type.is(TYPE.HSL)&&it!==void 0?it:(this._ensureHSL(),_.channel.hsl2rgb(rt,"b"))}get h(){const rt=this.data,it=rt.h;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"h"))}get s(){const rt=this.data,it=rt.s;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"s"))}get l(){const rt=this.data,it=rt.l;return!this.type.is(TYPE.RGB)&&it!==void 0?it:(this._ensureRGB(),_.channel.rgb2hsl(rt,"l"))}get a(){return this.data.a}set r(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.r=rt}set g(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.g=rt}set b(rt){this.type.set(TYPE.RGB),this.changed=!0,this.data.b=rt}set h(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.h=rt}set s(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.s=rt}set l(rt){this.type.set(TYPE.HSL),this.changed=!0,this.data.l=rt}set a(rt){this.changed=!0,this.data.a=rt}}const Channels$1=Channels,channels=new Channels$1({r:0,g:0,b:0,a:0},"transparent"),ChannelsReusable=channels,Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:nt=>{if(nt.charCodeAt(0)!==35)return;const rt=nt.match(Hex.re);if(!rt)return;const it=rt[1],st=parseInt(it,16),_t=it.length,xt=_t%4===0,Et=_t>4,kt=Et?1:17,Lt=Et?8:4,It=xt?0:-1,Rt=Et?255:15;return ChannelsReusable.set({r:(st>>Lt*(It+3)&Rt)*kt,g:(st>>Lt*(It+2)&Rt)*kt,b:(st>>Lt*(It+1)&Rt)*kt,a:xt?(st&Rt)*kt/255:1},nt)},stringify:nt=>{const{r:rt,g:it,b:st,a:_t}=nt;return _t<1?`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(st)]}${DEC2HEX[Math.round(_t*255)]}`:`#${DEC2HEX[Math.round(rt)]}${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(st)]}`}},Hex$1=Hex,HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:nt=>{const rt=nt.match(HSL.hueRe);if(rt){const[,it,st]=rt;switch(st){case"grad":return _.channel.clamp.h(parseFloat(it)*.9);case"rad":return _.channel.clamp.h(parseFloat(it)*180/Math.PI);case"turn":return _.channel.clamp.h(parseFloat(it)*360)}}return _.channel.clamp.h(parseFloat(nt))},parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==104&&rt!==72)return;const it=nt.match(HSL.re);if(!it)return;const[,st,_t,xt,Et,kt]=it;return ChannelsReusable.set({h:HSL._hue2deg(st),s:_.channel.clamp.s(parseFloat(_t)),l:_.channel.clamp.l(parseFloat(xt)),a:Et?_.channel.clamp.a(kt?parseFloat(Et)/100:parseFloat(Et)):1},nt)},stringify:nt=>{const{h:rt,s:it,l:st,a:_t}=nt;return _t<1?`hsla(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(st)}%, ${_t})`:`hsl(${_.lang.round(rt)}, ${_.lang.round(it)}%, ${_.lang.round(st)}%)`}},HSL$1=HSL,Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:nt=>{nt=nt.toLowerCase();const rt=Keyword.colors[nt];if(!!rt)return Hex$1.parse(rt)},stringify:nt=>{const rt=Hex$1.stringify(nt);for(const it in Keyword.colors)if(Keyword.colors[it]===rt)return it}},Keyword$1=Keyword,RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:nt=>{const rt=nt.charCodeAt(0);if(rt!==114&&rt!==82)return;const it=nt.match(RGB.re);if(!it)return;const[,st,_t,xt,Et,kt,Lt,It,Rt]=it;return ChannelsReusable.set({r:_.channel.clamp.r(_t?parseFloat(st)*2.55:parseFloat(st)),g:_.channel.clamp.g(Et?parseFloat(xt)*2.55:parseFloat(xt)),b:_.channel.clamp.b(Lt?parseFloat(kt)*2.55:parseFloat(kt)),a:It?_.channel.clamp.a(Rt?parseFloat(It)/100:parseFloat(It)):1},nt)},stringify:nt=>{const{r:rt,g:it,b:st,a:_t}=nt;return _t<1?`rgba(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(st)}, ${_.lang.round(_t)})`:`rgb(${_.lang.round(rt)}, ${_.lang.round(it)}, ${_.lang.round(st)})`}},RGB$1=RGB,Color={format:{keyword:Keyword$1,hex:Hex$1,rgb:RGB$1,rgba:RGB$1,hsl:HSL$1,hsla:HSL$1},parse:nt=>{if(typeof nt!="string")return nt;const rt=Hex$1.parse(nt)||RGB$1.parse(nt)||HSL$1.parse(nt)||Keyword$1.parse(nt);if(rt)return rt;throw new Error(`Unsupported color format: "${nt}"`)},stringify:nt=>!nt.changed&&nt.color?nt.color:nt.type.is(TYPE.HSL)||nt.data.r===void 0?HSL$1.stringify(nt):nt.a<1||!Number.isInteger(nt.r)||!Number.isInteger(nt.g)||!Number.isInteger(nt.b)?RGB$1.stringify(nt):Hex$1.stringify(nt)},Color$1=Color,change=(nt,rt)=>{const it=Color$1.parse(nt);for(const st in rt)it[st]=_.channel.clamp[st](rt[st]);return Color$1.stringify(it)},change$1=change,rgba=(nt,rt,it=0,st=1)=>{if(typeof nt!="number")return change$1(nt,{a:rt});const _t=ChannelsReusable.set({r:_.channel.clamp.r(nt),g:_.channel.clamp.g(rt),b:_.channel.clamp.b(it),a:_.channel.clamp.a(st)});return Color$1.stringify(_t)},rgba$1=rgba,adjustChannel=(nt,rt,it)=>{const st=Color$1.parse(nt),_t=st[rt],xt=_.channel.clamp[rt](_t+it);return _t!==xt&&(st[rt]=xt),Color$1.stringify(st)},adjustChannel$1=adjustChannel,lighten=(nt,rt)=>adjustChannel$1(nt,"l",rt),lighten$1=lighten,darken=(nt,rt)=>adjustChannel$1(nt,"l",-rt),darken$1=darken,adjust$1=(nt,rt)=>{const it=Color$1.parse(nt),st={};for(const _t in rt)!rt[_t]||(st[_t]=it[_t]+rt[_t]);return change$1(nt,st)},adjust$2=adjust$1,mix=(nt,rt,it=50)=>{const{r:st,g:_t,b:xt,a:Et}=Color$1.parse(nt),{r:kt,g:Lt,b:It,a:Rt}=Color$1.parse(rt),Nt=it/100,Bt=Nt*2-1,Ft=Et-Rt,Zt=((Bt*Ft===-1?Bt:(Bt+Ft)/(1+Bt*Ft))+1)/2,Wt=1-Zt,Kt=st*Zt+kt*Wt,Jt=_t*Zt+Lt*Wt,on=xt*Zt+It*Wt,rn=Et*Nt+Rt*(1-Nt);return rgba$1(Kt,Jt,on,rn)},mix$1=mix,invert=(nt,rt=100)=>{const it=Color$1.parse(nt);return it.r=255-it.r,it.g=255-it.g,it.b=255-it.b,mix$1(it,nt,rt)},invert$1=invert;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$i=Object.prototype,hasOwnProperty$f=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(nt){var rt=hasOwnProperty$f.call(nt,symToStringTag$1),it=nt[symToStringTag$1];try{nt[symToStringTag$1]=void 0;var st=!0}catch{}var _t=nativeObjectToString$1.call(nt);return st&&(rt?nt[symToStringTag$1]=it:delete nt[symToStringTag$1]),_t}var objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString(nt){return nativeObjectToString.call(nt)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(nt){return nt==null?nt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(nt)?getRawTag(nt):objectToString(nt)}function isObject$1(nt){var rt=typeof nt;return nt!=null&&(rt=="object"||rt=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(nt){if(!isObject$1(nt))return!1;var rt=baseGetTag(nt);return rt==funcTag$2||rt==genTag$1||rt==asyncTag||rt==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var nt=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return nt?"Symbol(src)_1."+nt:""}();function isMasked(nt){return!!maskSrcKey&&maskSrcKey in nt}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(nt){if(nt!=null){try{return funcToString$2.call(nt)}catch{}try{return nt+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$g=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$e=objectProto$g.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(nt){if(!isObject$1(nt)||isMasked(nt))return!1;var rt=isFunction(nt)?reIsNative:reIsHostCtor;return rt.test(toSource(nt))}function getValue(nt,rt){return nt==null?void 0:nt[rt]}function getNative(nt,rt){var it=getValue(nt,rt);return baseIsNative(it)?it:void 0}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(nt){var rt=this.has(nt)&&delete this.__data__[nt];return this.size-=rt?1:0,rt}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty;function hashGet(nt){var rt=this.__data__;if(nativeCreate$1){var it=rt[nt];return it===HASH_UNDEFINED$2?void 0:it}return hasOwnProperty$d.call(rt,nt)?rt[nt]:void 0}var objectProto$e=Object.prototype,hasOwnProperty$c=objectProto$e.hasOwnProperty;function hashHas(nt){var rt=this.__data__;return nativeCreate$1?rt[nt]!==void 0:hasOwnProperty$c.call(rt,nt)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(nt,rt){var it=this.__data__;return this.size+=this.has(nt)?0:1,it[nt]=nativeCreate$1&&rt===void 0?HASH_UNDEFINED$1:rt,this}function Hash(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function eq(nt,rt){return nt===rt||nt!==nt&&rt!==rt}function assocIndexOf(nt,rt){for(var it=nt.length;it--;)if(eq(nt[it][0],rt))return it;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);if(it<0)return!1;var st=rt.length-1;return it==st?rt.pop():splice.call(rt,it,1),--this.size,!0}function listCacheGet(nt){var rt=this.__data__,it=assocIndexOf(rt,nt);return it<0?void 0:rt[it][1]}function listCacheHas(nt){return assocIndexOf(this.__data__,nt)>-1}function listCacheSet(nt,rt){var it=this.__data__,st=assocIndexOf(it,nt);return st<0?(++this.size,it.push([nt,rt])):it[st][1]=rt,this}function ListCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(nt){var rt=typeof nt;return rt=="string"||rt=="number"||rt=="symbol"||rt=="boolean"?nt!=="__proto__":nt===null}function getMapData(nt,rt){var it=nt.__data__;return isKeyable(rt)?it[typeof rt=="string"?"string":"hash"]:it.map}function mapCacheDelete(nt){var rt=getMapData(this,nt).delete(nt);return this.size-=rt?1:0,rt}function mapCacheGet(nt){return getMapData(this,nt).get(nt)}function mapCacheHas(nt){return getMapData(this,nt).has(nt)}function mapCacheSet(nt,rt){var it=getMapData(this,nt),st=it.size;return it.set(nt,rt),this.size+=it.size==st?0:1,this}function MapCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.clear();++rt<it;){var st=nt[rt];this.set(st[0],st[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(nt,rt){if(typeof nt!="function"||rt!=null&&typeof rt!="function")throw new TypeError(FUNC_ERROR_TEXT);var it=function(){var st=arguments,_t=rt?rt.apply(this,st):st[0],xt=it.cache;if(xt.has(_t))return xt.get(_t);var Et=nt.apply(this,st);return it.cache=xt.set(_t,Et)||xt,Et};return it.cache=new(memoize.Cache||MapCache),it}memoize.Cache=MapCache;var COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",NAMESPACE="@namespace",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode;function trim$1(nt){return nt.trim()}function replace(nt,rt,it){return nt.replace(rt,it)}function indexof(nt,rt,it){return nt.indexOf(rt,it)}function charat(nt,rt){return nt.charCodeAt(rt)|0}function substr(nt,rt,it){return nt.slice(rt,it)}function strlen(nt){return nt.length}function sizeof(nt){return nt.length}function append(nt,rt){return rt.push(nt),nt}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(nt,rt,it,st,_t,xt,Et,kt){return{value:nt,root:rt,parent:it,type:st,props:_t,children:xt,line,column,length:Et,return:"",siblings:kt}}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(nt,rt){return substr(characters,nt,rt)}function token(nt){switch(nt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(nt){return line=column=1,length=strlen(characters=nt),position$1=0,[]}function dealloc(nt){return characters="",nt}function delimit(nt){return trim$1(slice(position$1-1,delimiter(nt===91?nt+2:nt===40?nt+1:nt)))}function whitespace(nt){for(;(character=peek())&&character<33;)next();return token(nt)>2||token(character)>3?"":" "}function escaping(nt,rt){for(;--rt&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(nt,caret()+(rt<6&&peek()==32&&next()==32))}function delimiter(nt){for(;next();)switch(character){case nt:return position$1;case 34:case 39:nt!==34&&nt!==39&&delimiter(character);break;case 40:nt===41&&delimiter(nt);break;case 92:next();break}return position$1}function commenter(nt,rt){for(;next()&&nt+character!==47+10;)if(nt+character===42+42&&peek()===47)break;return"/*"+slice(rt,position$1-1)+"*"+from(nt===47?nt:next())}function identifier(nt){for(;!token(peek());)next();return slice(nt,position$1)}function compile(nt){return dealloc(parse$3("",null,null,null,[""],nt=alloc(nt),0,[0],nt))}function parse$3(nt,rt,it,st,_t,xt,Et,kt,Lt){for(var It=0,Rt=0,Nt=Et,Bt=0,Ft=0,Yt=0,Zt=1,Wt=1,Kt=1,Jt=0,on="",rn=_t,ln=xt,gn=st,wn=on;Wt;)switch(Yt=Jt,Jt=next()){case 40:if(Yt!=108&&charat(wn,Nt-1)==58){indexof(wn+=replace(delimit(Jt),"&","&\f"),"&\f",abs(It?kt[It-1]:0))!=-1&&(Kt=-1);break}case 34:case 39:case 91:wn+=delimit(Jt);break;case 9:case 10:case 13:case 32:wn+=whitespace(Yt);break;case 92:wn+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),rt,it,Lt),Lt),(token(Yt||1)==5||token(peek()||1)==5)&&strlen(wn)&&substr(wn,-1,void 0)!==" "&&(wn+=" ");break;default:wn+="/"}break;case 123*Zt:kt[It++]=strlen(wn)*Kt;case 125*Zt:case 59:case 0:switch(Jt){case 0:case 125:Wt=0;case 59+Rt:Kt==-1&&(wn=replace(wn,/\f/g,"")),Ft>0&&(strlen(wn)-Nt||Zt===0&&Yt===47)&&append(Ft>32?declaration(wn+";",st,it,Nt-1,Lt):declaration(replace(wn," ","")+";",st,it,Nt-2,Lt),Lt);break;case 59:wn+=";";default:if(append(gn=ruleset(wn,rt,it,It,Rt,_t,kt,on,rn=[],ln=[],Nt,xt),xt),Jt===123)if(Rt===0)parse$3(wn,rt,gn,gn,rn,xt,Nt,kt,ln);else{switch(Bt){case 99:if(charat(wn,3)===110)break;case 108:if(charat(wn,2)===97)break;default:Rt=0;case 100:case 109:case 115:}Rt?parse$3(nt,gn,gn,st&&append(ruleset(nt,gn,gn,0,0,_t,kt,on,_t,rn=[],Nt,ln),ln),_t,ln,Nt,kt,st?rn:ln):parse$3(wn,gn,gn,gn,[""],ln,0,kt,ln)}}It=Rt=Ft=0,Zt=Kt=1,on=wn="",Nt=Et;break;case 58:Nt=1+strlen(wn),Ft=Yt;default:if(Zt<1){if(Jt==123)--Zt;else if(Jt==125&&Zt++==0&&prev()==125)continue}switch(wn+=from(Jt),Jt*Zt){case 38:Kt=Rt>0?1:(wn+="\f",-1);break;case 44:kt[It++]=(strlen(wn)-1)*Kt,Kt=1;break;case 64:peek()===45&&(wn+=delimit(next())),Bt=peek(),Rt=Nt=strlen(on=wn+=identifier(caret())),Jt++;break;case 45:Yt===45&&strlen(wn)==2&&(Zt=0)}}return xt}function ruleset(nt,rt,it,st,_t,xt,Et,kt,Lt,It,Rt,Nt){for(var Bt=_t-1,Ft=_t===0?xt:[""],Yt=sizeof(Ft),Zt=0,Wt=0,Kt=0;Zt<st;++Zt)for(var Jt=0,on=substr(nt,Bt+1,Bt=abs(Wt=Et[Zt])),rn=nt;Jt<Yt;++Jt)(rn=trim$1(Wt>0?Ft[Jt]+" "+on:replace(on,/&\f/g,Ft[Jt])))&&(Lt[Kt++]=rn);return node(nt,rt,it,_t===0?RULESET:kt,Lt,It,Rt,Nt)}function comment(nt,rt,it,st){return node(nt,rt,it,COMMENT,from(char()),substr(nt,2,-2),0,st)}function declaration(nt,rt,it,st,_t){return node(nt,rt,it,DECLARATION,substr(nt,0,st),substr(nt,st+1,-1),st,_t)}function serialize(nt,rt){for(var it="",st=0;st<nt.length;st++)it+=rt(nt[st],st,nt,rt)||"";return it}function stringify(nt,rt,it,st){switch(nt.type){case LAYER:if(nt.children.length)break;case IMPORT:case NAMESPACE:case DECLARATION:return nt.return=nt.return||nt.value;case COMMENT:return"";case KEYFRAMES:return nt.return=nt.value+"{"+serialize(nt.children,st)+"}";case RULESET:if(!strlen(nt.value=nt.props.join(",")))return""}return strlen(it=serialize(nt.children,st))?nt.return=nt.value+"{"+it+"}":""}function isObjectLike(nt){return nt!=null&&typeof nt=="object"}var symbolTag$3="[object Symbol]";function isSymbol(nt){return typeof nt=="symbol"||isObjectLike(nt)&&baseGetTag(nt)==symbolTag$3}function arrayMap(nt,rt){for(var it=-1,st=nt==null?0:nt.length,_t=Array(st);++it<st;)_t[it]=rt(nt[it],it,nt);return _t}var isArray=Array.isArray;const isArray$1=isArray;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(nt){if(typeof nt=="string")return nt;if(isArray$1(nt))return arrayMap(nt,baseToString)+"";if(isSymbol(nt))return symbolToString?symbolToString.call(nt):"";var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$3?"-0":rt}var reWhitespace=/\s/;function trimmedEndIndex(nt){for(var rt=nt.length;rt--&&reWhitespace.test(nt.charAt(rt)););return rt}var reTrimStart=/^\s+/;function baseTrim(nt){return nt&&nt.slice(0,trimmedEndIndex(nt)+1).replace(reTrimStart,"")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(nt){if(typeof nt=="number")return nt;if(isSymbol(nt))return NAN;if(isObject$1(nt)){var rt=typeof nt.valueOf=="function"?nt.valueOf():nt;nt=isObject$1(rt)?rt+"":rt}if(typeof nt!="string")return nt===0?nt:+nt;nt=baseTrim(nt);var it=reIsBinary.test(nt);return it||reIsOctal.test(nt)?freeParseInt(nt.slice(2),it?2:8):reIsBadHex.test(nt)?NAN:+nt}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(nt){if(!nt)return nt===0?nt:0;if(nt=toNumber(nt),nt===INFINITY$2||nt===-INFINITY$2){var rt=nt<0?-1:1;return rt*MAX_INTEGER}return nt===nt?nt:0}function toInteger(nt){var rt=toFinite(nt),it=rt%1;return rt===rt?it?rt-it:rt:0}function identity(nt){return nt}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function nt(){}return function(rt){if(!isObject$1(rt))return{};if(objectCreate)return objectCreate(rt);nt.prototype=rt;var it=new nt;return nt.prototype=void 0,it}}();const baseCreate$1=baseCreate;function apply$1(nt,rt,it){switch(it.length){case 0:return nt.call(rt);case 1:return nt.call(rt,it[0]);case 2:return nt.call(rt,it[0],it[1]);case 3:return nt.call(rt,it[0],it[1],it[2])}return nt.apply(rt,it)}function noop(){}function copyArray(nt,rt){var it=-1,st=nt.length;for(rt||(rt=Array(st));++it<st;)rt[it]=nt[it];return rt}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(nt){var rt=0,it=0;return function(){var st=nativeNow(),_t=HOT_SPAN-(st-it);if(it=st,_t>0){if(++rt>=HOT_COUNT)return arguments[0]}else rt=0;return nt.apply(void 0,arguments)}}function constant(nt){return function(){return nt}}var defineProperty=function(){try{var nt=getNative(Object,"defineProperty");return nt({},"",{}),nt}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(nt,rt){return defineProperty$1(nt,"toString",{configurable:!0,enumerable:!1,value:constant(rt),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(nt,rt){for(var it=-1,st=nt==null?0:nt.length;++it<st&&rt(nt[it],it,nt)!==!1;);return nt}function baseFindIndex(nt,rt,it,st){for(var _t=nt.length,xt=it+(st?1:-1);st?xt--:++xt<_t;)if(rt(nt[xt],xt,nt))return xt;return-1}function baseIsNaN(nt){return nt!==nt}function strictIndexOf(nt,rt,it){for(var st=it-1,_t=nt.length;++st<_t;)if(nt[st]===rt)return st;return-1}function baseIndexOf(nt,rt,it){return rt===rt?strictIndexOf(nt,rt,it):baseFindIndex(nt,baseIsNaN,it)}function arrayIncludes(nt,rt){var it=nt==null?0:nt.length;return!!it&&baseIndexOf(nt,rt,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(nt,rt){var it=typeof nt;return rt=rt==null?MAX_SAFE_INTEGER$1:rt,!!rt&&(it=="number"||it!="symbol"&&reIsUint.test(nt))&&nt>-1&&nt%1==0&&nt<rt}function baseAssignValue(nt,rt,it){rt=="__proto__"&&defineProperty$1?defineProperty$1(nt,rt,{configurable:!0,enumerable:!0,value:it,writable:!0}):nt[rt]=it}var objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function assignValue(nt,rt,it){var st=nt[rt];(!(hasOwnProperty$b.call(nt,rt)&&eq(st,it))||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function copyObject(nt,rt,it,st){var _t=!it;it||(it={});for(var xt=-1,Et=rt.length;++xt<Et;){var kt=rt[xt],Lt=st?st(it[kt],nt[kt],kt,it,nt):void 0;Lt===void 0&&(Lt=nt[kt]),_t?baseAssignValue(it,kt,Lt):assignValue(it,kt,Lt)}return it}var nativeMax$2=Math.max;function overRest(nt,rt,it){return rt=nativeMax$2(rt===void 0?nt.length-1:rt,0),function(){for(var st=arguments,_t=-1,xt=nativeMax$2(st.length-rt,0),Et=Array(xt);++_t<xt;)Et[_t]=st[rt+_t];_t=-1;for(var kt=Array(rt+1);++_t<rt;)kt[_t]=st[_t];return kt[rt]=it(Et),apply$1(nt,this,kt)}}function baseRest(nt,rt){return setToString$1(overRest(nt,rt,identity),nt+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(nt){return typeof nt=="number"&&nt>-1&&nt%1==0&&nt<=MAX_SAFE_INTEGER}function isArrayLike(nt){return nt!=null&&isLength(nt.length)&&!isFunction(nt)}function isIterateeCall(nt,rt,it){if(!isObject$1(it))return!1;var st=typeof rt;return(st=="number"?isArrayLike(it)&&isIndex(rt,it.length):st=="string"&&rt in it)?eq(it[rt],nt):!1}function createAssigner(nt){return baseRest(function(rt,it){var st=-1,_t=it.length,xt=_t>1?it[_t-1]:void 0,Et=_t>2?it[2]:void 0;for(xt=nt.length>3&&typeof xt=="function"?(_t--,xt):void 0,Et&&isIterateeCall(it[0],it[1],Et)&&(xt=_t<3?void 0:xt,_t=1),rt=Object(rt);++st<_t;){var kt=it[st];kt&&nt(rt,kt,st,xt)}return rt})}var objectProto$c=Object.prototype;function isPrototype(nt){var rt=nt&&nt.constructor,it=typeof rt=="function"&&rt.prototype||objectProto$c;return nt===it}function baseTimes(nt,rt){for(var it=-1,st=Array(nt);++it<nt;)st[it]=rt(it);return st}var argsTag$3="[object Arguments]";function baseIsArguments(nt){return isObjectLike(nt)&&baseGetTag(nt)==argsTag$3}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty,propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(nt){return isObjectLike(nt)&&hasOwnProperty$a.call(nt,"callee")&&!propertyIsEnumerable$1.call(nt,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(nt){return isObjectLike(nt)&&isLength(nt.length)&&!!typedArrayTags[baseGetTag(nt)]}function baseUnary(nt){return function(rt){return nt(rt)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var nt=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return nt||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function arrayLikeKeys(nt,rt){var it=isArray$1(nt),st=!it&&isArguments$1(nt),_t=!it&&!st&&isBuffer$1(nt),xt=!it&&!st&&!_t&&isTypedArray$1(nt),Et=it||st||_t||xt,kt=Et?baseTimes(nt.length,String):[],Lt=kt.length;for(var It in nt)(rt||hasOwnProperty$9.call(nt,It))&&!(Et&&(It=="length"||_t&&(It=="offset"||It=="parent")||xt&&(It=="buffer"||It=="byteLength"||It=="byteOffset")||isIndex(It,Lt)))&&kt.push(It);return kt}function overArg(nt,rt){return function(it){return nt(rt(it))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function baseKeys(nt){if(!isPrototype(nt))return nativeKeys$1(nt);var rt=[];for(var it in Object(nt))hasOwnProperty$8.call(nt,it)&&it!="constructor"&&rt.push(it);return rt}function keys(nt){return isArrayLike(nt)?arrayLikeKeys(nt):baseKeys(nt)}function nativeKeysIn(nt){var rt=[];if(nt!=null)for(var it in Object(nt))rt.push(it);return rt}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeysIn(nt){if(!isObject$1(nt))return nativeKeysIn(nt);var rt=isPrototype(nt),it=[];for(var st in nt)st=="constructor"&&(rt||!hasOwnProperty$7.call(nt,st))||it.push(st);return it}function keysIn(nt){return isArrayLike(nt)?arrayLikeKeys(nt,!0):baseKeysIn(nt)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(nt,rt){if(isArray$1(nt))return!1;var it=typeof nt;return it=="number"||it=="symbol"||it=="boolean"||nt==null||isSymbol(nt)?!0:reIsPlainProp.test(nt)||!reIsDeepProp.test(nt)||rt!=null&&nt in Object(rt)}var MAX_MEMOIZE_SIZE=500;function memoizeCapped(nt){var rt=memoize(nt,function(st){return it.size===MAX_MEMOIZE_SIZE&&it.clear(),st}),it=rt.cache;return rt}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(nt){var rt=[];return nt.charCodeAt(0)===46&&rt.push(""),nt.replace(rePropName,function(it,st,_t,xt){rt.push(_t?xt.replace(reEscapeChar,"$1"):st||it)}),rt});const stringToPath$1=stringToPath;function toString(nt){return nt==null?"":baseToString(nt)}function castPath(nt,rt){return isArray$1(nt)?nt:isKey(nt,rt)?[nt]:stringToPath$1(toString(nt))}var INFINITY$1=1/0;function toKey(nt){if(typeof nt=="string"||isSymbol(nt))return nt;var rt=nt+"";return rt=="0"&&1/nt==-INFINITY$1?"-0":rt}function baseGet(nt,rt){rt=castPath(rt,nt);for(var it=0,st=rt.length;nt!=null&&it<st;)nt=nt[toKey(rt[it++])];return it&&it==st?nt:void 0}function get$1(nt,rt,it){var st=nt==null?void 0:baseGet(nt,rt);return st===void 0?it:st}function arrayPush(nt,rt){for(var it=-1,st=rt.length,_t=nt.length;++it<st;)nt[_t+it]=rt[it];return nt}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(nt){return isArray$1(nt)||isArguments$1(nt)||!!(spreadableSymbol&&nt&&nt[spreadableSymbol])}function baseFlatten(nt,rt,it,st,_t){var xt=-1,Et=nt.length;for(it||(it=isFlattenable),_t||(_t=[]);++xt<Et;){var kt=nt[xt];rt>0&&it(kt)?rt>1?baseFlatten(kt,rt-1,it,st,_t):arrayPush(_t,kt):st||(_t[_t.length]=kt)}return _t}function flatten$1(nt){var rt=nt==null?0:nt.length;return rt?baseFlatten(nt,1):[]}function flatRest(nt){return setToString$1(overRest(nt,void 0,flatten$1),nt+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(nt){if(!isObjectLike(nt)||baseGetTag(nt)!=objectTag$3)return!1;var rt=getPrototype$1(nt);if(rt===null)return!0;var it=hasOwnProperty$6.call(rt,"constructor")&&rt.constructor;return typeof it=="function"&&it instanceof it&&funcToString.call(it)==objectCtorString}function arrayReduce(nt,rt,it,st){var _t=-1,xt=nt==null?0:nt.length;for(st&&xt&&(it=nt[++_t]);++_t<xt;)it=rt(it,nt[_t],_t,nt);return it}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(nt){var rt=this.__data__,it=rt.delete(nt);return this.size=rt.size,it}function stackGet(nt){return this.__data__.get(nt)}function stackHas(nt){return this.__data__.has(nt)}var LARGE_ARRAY_SIZE$1=200;function stackSet(nt,rt){var it=this.__data__;if(it instanceof ListCache){var st=it.__data__;if(!Map$2||st.length<LARGE_ARRAY_SIZE$1-1)return st.push([nt,rt]),this.size=++it.size,this;it=this.__data__=new MapCache(st)}return it.set(nt,rt),this.size=it.size,this}function Stack(nt){var rt=this.__data__=new ListCache(nt);this.size=rt.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(nt,rt){return nt&&copyObject(rt,keys(rt),nt)}function baseAssignIn(nt,rt){return nt&&copyObject(rt,keysIn(rt),nt)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(nt,rt){if(rt)return nt.slice();var it=nt.length,st=allocUnsafe?allocUnsafe(it):new nt.constructor(it);return nt.copy(st),st}function arrayFilter(nt,rt){for(var it=-1,st=nt==null?0:nt.length,_t=0,xt=[];++it<st;){var Et=nt[it];rt(Et,it,nt)&&(xt[_t++]=Et)}return xt}function stubArray(){return[]}var objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(nt){return nt==null?[]:(nt=Object(nt),arrayFilter(nativeGetSymbols$1(nt),function(rt){return propertyIsEnumerable.call(nt,rt)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(nt,rt){return copyObject(nt,getSymbols$1(nt),rt)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(nt){for(var rt=[];nt;)arrayPush(rt,getSymbols$1(nt)),nt=getPrototype$1(nt);return rt}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(nt,rt){return copyObject(nt,getSymbolsIn$1(nt),rt)}function baseGetAllKeys(nt,rt,it){var st=rt(nt);return isArray$1(nt)?st:arrayPush(st,it(nt))}function getAllKeys(nt){return baseGetAllKeys(nt,keys,getSymbols$1)}function getAllKeysIn(nt){return baseGetAllKeys(nt,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(nt){var rt=baseGetTag(nt),it=rt==objectTag$2?nt.constructor:void 0,st=it?toSource(it):"";if(st)switch(st){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return rt});const getTag$1=getTag;var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function initCloneArray(nt){var rt=nt.length,it=new nt.constructor(rt);return rt&&typeof nt[0]=="string"&&hasOwnProperty$5.call(nt,"index")&&(it.index=nt.index,it.input=nt.input),it}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(nt){var rt=new nt.constructor(nt.byteLength);return new Uint8Array$2(rt).set(new Uint8Array$2(nt)),rt}function cloneDataView(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.byteLength)}var reFlags=/\w*$/;function cloneRegExp(nt){var rt=new nt.constructor(nt.source,reFlags.exec(nt));return rt.lastIndex=nt.lastIndex,rt}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(nt){return symbolValueOf$1?Object(symbolValueOf$1.call(nt)):{}}function cloneTypedArray(nt,rt){var it=rt?cloneArrayBuffer(nt.buffer):nt.buffer;return new nt.constructor(it,nt.byteOffset,nt.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(nt,rt,it){var st=nt.constructor;switch(rt){case arrayBufferTag$2:return cloneArrayBuffer(nt);case boolTag$2:case dateTag$2:return new st(+nt);case dataViewTag$2:return cloneDataView(nt,it);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(nt,it);case mapTag$4:return new st;case numberTag$2:case stringTag$2:return new st(nt);case regexpTag$2:return cloneRegExp(nt);case setTag$4:return new st;case symbolTag$2:return cloneSymbol(nt)}}function initCloneObject(nt){return typeof nt.constructor=="function"&&!isPrototype(nt)?baseCreate$1(getPrototype$1(nt)):{}}var mapTag$3="[object Map]";function baseIsMap(nt){return isObjectLike(nt)&&getTag$1(nt)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(nt){return isObjectLike(nt)&&getTag$1(nt)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(nt,rt,it,st,_t,xt){var Et,kt=rt&CLONE_DEEP_FLAG$1,Lt=rt&CLONE_FLAT_FLAG,It=rt&CLONE_SYMBOLS_FLAG$2;if(it&&(Et=_t?it(nt,st,_t,xt):it(nt)),Et!==void 0)return Et;if(!isObject$1(nt))return nt;var Rt=isArray$1(nt);if(Rt){if(Et=initCloneArray(nt),!kt)return copyArray(nt,Et)}else{var Nt=getTag$1(nt),Bt=Nt==funcTag||Nt==genTag;if(isBuffer$1(nt))return cloneBuffer(nt,kt);if(Nt==objectTag$1||Nt==argsTag$1||Bt&&!_t){if(Et=Lt||Bt?{}:initCloneObject(nt),!kt)return Lt?copySymbolsIn(nt,baseAssignIn(Et,nt)):copySymbols(nt,baseAssign(Et,nt))}else{if(!cloneableTags[Nt])return _t?nt:{};Et=initCloneByTag(nt,Nt,kt)}}xt||(xt=new Stack);var Ft=xt.get(nt);if(Ft)return Ft;xt.set(nt,Et),isSet$1(nt)?nt.forEach(function(Wt){Et.add(baseClone(Wt,rt,it,Wt,nt,xt))}):isMap$1(nt)&&nt.forEach(function(Wt,Kt){Et.set(Kt,baseClone(Wt,rt,it,Kt,nt,xt))});var Yt=It?Lt?getAllKeysIn:getAllKeys:Lt?keysIn:keys,Zt=Rt?void 0:Yt(nt);return arrayEach(Zt||nt,function(Wt,Kt){Zt&&(Kt=Wt,Wt=nt[Kt]),assignValue(Et,Kt,baseClone(Wt,rt,it,Kt,nt,xt))}),Et}var CLONE_SYMBOLS_FLAG$1=4;function clone$1(nt){return baseClone(nt,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(nt){return baseClone(nt,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(nt){return this.__data__.set(nt,HASH_UNDEFINED),this}function setCacheHas(nt){return this.__data__.has(nt)}function SetCache(nt){var rt=-1,it=nt==null?0:nt.length;for(this.__data__=new MapCache;++rt<it;)this.add(nt[rt])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(nt,rt){for(var it=-1,st=nt==null?0:nt.length;++it<st;)if(rt(nt[it],it,nt))return!0;return!1}function cacheHas(nt,rt){return nt.has(rt)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(nt,rt,it,st,_t,xt){var Et=it&COMPARE_PARTIAL_FLAG$5,kt=nt.length,Lt=rt.length;if(kt!=Lt&&!(Et&&Lt>kt))return!1;var It=xt.get(nt),Rt=xt.get(rt);if(It&&Rt)return It==rt&&Rt==nt;var Nt=-1,Bt=!0,Ft=it&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(xt.set(nt,rt),xt.set(rt,nt);++Nt<kt;){var Yt=nt[Nt],Zt=rt[Nt];if(st)var Wt=Et?st(Zt,Yt,Nt,rt,nt,xt):st(Yt,Zt,Nt,nt,rt,xt);if(Wt!==void 0){if(Wt)continue;Bt=!1;break}if(Ft){if(!arraySome(rt,function(Kt,Jt){if(!cacheHas(Ft,Jt)&&(Yt===Kt||_t(Yt,Kt,it,st,xt)))return Ft.push(Jt)})){Bt=!1;break}}else if(!(Yt===Zt||_t(Yt,Zt,it,st,xt))){Bt=!1;break}}return xt.delete(nt),xt.delete(rt),Bt}function mapToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(st,_t){it[++rt]=[_t,st]}),it}function setToArray(nt){var rt=-1,it=Array(nt.size);return nt.forEach(function(st){it[++rt]=st}),it}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(nt,rt,it,st,_t,xt,Et){switch(it){case dataViewTag:if(nt.byteLength!=rt.byteLength||nt.byteOffset!=rt.byteOffset)return!1;nt=nt.buffer,rt=rt.buffer;case arrayBufferTag:return!(nt.byteLength!=rt.byteLength||!xt(new Uint8Array$2(nt),new Uint8Array$2(rt)));case boolTag:case dateTag:case numberTag:return eq(+nt,+rt);case errorTag:return nt.name==rt.name&&nt.message==rt.message;case regexpTag:case stringTag:return nt==rt+"";case mapTag$1:var kt=mapToArray;case setTag$1:var Lt=st&COMPARE_PARTIAL_FLAG$4;if(kt||(kt=setToArray),nt.size!=rt.size&&!Lt)return!1;var It=Et.get(nt);if(It)return It==rt;st|=COMPARE_UNORDERED_FLAG$2,Et.set(nt,rt);var Rt=equalArrays(kt(nt),kt(rt),st,_t,xt,Et);return Et.delete(nt),Rt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(nt)==symbolValueOf.call(rt)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function equalObjects(nt,rt,it,st,_t,xt){var Et=it&COMPARE_PARTIAL_FLAG$3,kt=getAllKeys(nt),Lt=kt.length,It=getAllKeys(rt),Rt=It.length;if(Lt!=Rt&&!Et)return!1;for(var Nt=Lt;Nt--;){var Bt=kt[Nt];if(!(Et?Bt in rt:hasOwnProperty$4.call(rt,Bt)))return!1}var Ft=xt.get(nt),Yt=xt.get(rt);if(Ft&&Yt)return Ft==rt&&Yt==nt;var Zt=!0;xt.set(nt,rt),xt.set(rt,nt);for(var Wt=Et;++Nt<Lt;){Bt=kt[Nt];var Kt=nt[Bt],Jt=rt[Bt];if(st)var on=Et?st(Jt,Kt,Bt,rt,nt,xt):st(Kt,Jt,Bt,nt,rt,xt);if(!(on===void 0?Kt===Jt||_t(Kt,Jt,it,st,xt):on)){Zt=!1;break}Wt||(Wt=Bt=="constructor")}if(Zt&&!Wt){var rn=nt.constructor,ln=rt.constructor;rn!=ln&&"constructor"in nt&&"constructor"in rt&&!(typeof rn=="function"&&rn instanceof rn&&typeof ln=="function"&&ln instanceof ln)&&(Zt=!1)}return xt.delete(nt),xt.delete(rt),Zt}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseIsEqualDeep(nt,rt,it,st,_t,xt){var Et=isArray$1(nt),kt=isArray$1(rt),Lt=Et?arrayTag:getTag$1(nt),It=kt?arrayTag:getTag$1(rt);Lt=Lt==argsTag?objectTag:Lt,It=It==argsTag?objectTag:It;var Rt=Lt==objectTag,Nt=It==objectTag,Bt=Lt==It;if(Bt&&isBuffer$1(nt)){if(!isBuffer$1(rt))return!1;Et=!0,Rt=!1}if(Bt&&!Rt)return xt||(xt=new Stack),Et||isTypedArray$1(nt)?equalArrays(nt,rt,it,st,_t,xt):equalByTag(nt,rt,Lt,it,st,_t,xt);if(!(it&COMPARE_PARTIAL_FLAG$2)){var Ft=Rt&&hasOwnProperty$3.call(nt,"__wrapped__"),Yt=Nt&&hasOwnProperty$3.call(rt,"__wrapped__");if(Ft||Yt){var Zt=Ft?nt.value():nt,Wt=Yt?rt.value():rt;return xt||(xt=new Stack),_t(Zt,Wt,it,st,xt)}}return Bt?(xt||(xt=new Stack),equalObjects(nt,rt,it,st,_t,xt)):!1}function baseIsEqual(nt,rt,it,st,_t){return nt===rt?!0:nt==null||rt==null||!isObjectLike(nt)&&!isObjectLike(rt)?nt!==nt&&rt!==rt:baseIsEqualDeep(nt,rt,it,st,baseIsEqual,_t)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(nt,rt,it,st){var _t=it.length,xt=_t,Et=!st;if(nt==null)return!xt;for(nt=Object(nt);_t--;){var kt=it[_t];if(Et&&kt[2]?kt[1]!==nt[kt[0]]:!(kt[0]in nt))return!1}for(;++_t<xt;){kt=it[_t];var Lt=kt[0],It=nt[Lt],Rt=kt[1];if(Et&&kt[2]){if(It===void 0&&!(Lt in nt))return!1}else{var Nt=new Stack;if(st)var Bt=st(It,Rt,Lt,nt,rt,Nt);if(!(Bt===void 0?baseIsEqual(Rt,It,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,st,Nt):Bt))return!1}}return!0}function isStrictComparable(nt){return nt===nt&&!isObject$1(nt)}function getMatchData(nt){for(var rt=keys(nt),it=rt.length;it--;){var st=rt[it],_t=nt[st];rt[it]=[st,_t,isStrictComparable(_t)]}return rt}function matchesStrictComparable(nt,rt){return function(it){return it==null?!1:it[nt]===rt&&(rt!==void 0||nt in Object(it))}}function baseMatches(nt){var rt=getMatchData(nt);return rt.length==1&&rt[0][2]?matchesStrictComparable(rt[0][0],rt[0][1]):function(it){return it===nt||baseIsMatch(it,nt,rt)}}function baseHasIn(nt,rt){return nt!=null&&rt in Object(nt)}function hasPath(nt,rt,it){rt=castPath(rt,nt);for(var st=-1,_t=rt.length,xt=!1;++st<_t;){var Et=toKey(rt[st]);if(!(xt=nt!=null&&it(nt,Et)))break;nt=nt[Et]}return xt||++st!=_t?xt:(_t=nt==null?0:nt.length,!!_t&&isLength(_t)&&isIndex(Et,_t)&&(isArray$1(nt)||isArguments$1(nt)))}function hasIn(nt,rt){return nt!=null&&hasPath(nt,rt,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(nt,rt){return isKey(nt)&&isStrictComparable(rt)?matchesStrictComparable(toKey(nt),rt):function(it){var st=get$1(it,nt);return st===void 0&&st===rt?hasIn(it,nt):baseIsEqual(rt,st,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(nt){return function(rt){return rt==null?void 0:rt[nt]}}function basePropertyDeep(nt){return function(rt){return baseGet(rt,nt)}}function property(nt){return isKey(nt)?baseProperty(toKey(nt)):basePropertyDeep(nt)}function baseIteratee(nt){return typeof nt=="function"?nt:nt==null?identity:typeof nt=="object"?isArray$1(nt)?baseMatchesProperty(nt[0],nt[1]):baseMatches(nt):property(nt)}function createBaseFor(nt){return function(rt,it,st){for(var _t=-1,xt=Object(rt),Et=st(rt),kt=Et.length;kt--;){var Lt=Et[nt?kt:++_t];if(it(xt[Lt],Lt,xt)===!1)break}return rt}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(nt,rt){return nt&&baseFor$1(nt,rt,keys)}function createBaseEach(nt,rt){return function(it,st){if(it==null)return it;if(!isArrayLike(it))return nt(it,st);for(var _t=it.length,xt=rt?_t:-1,Et=Object(it);(rt?xt--:++xt<_t)&&st(Et[xt],xt,Et)!==!1;);return it}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now=function(){return root$1.Date.now()};const now$1=now;var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,defaults=baseRest(function(nt,rt){nt=Object(nt);var it=-1,st=rt.length,_t=st>2?rt[2]:void 0;for(_t&&isIterateeCall(rt[0],rt[1],_t)&&(st=1);++it<st;)for(var xt=rt[it],Et=keysIn(xt),kt=-1,Lt=Et.length;++kt<Lt;){var It=Et[kt],Rt=nt[It];(Rt===void 0||eq(Rt,objectProto$2[It])&&!hasOwnProperty$2.call(nt,It))&&(nt[It]=xt[It])}return nt});const defaults$1=defaults;function assignMergeValue(nt,rt,it){(it!==void 0&&!eq(nt[rt],it)||it===void 0&&!(rt in nt))&&baseAssignValue(nt,rt,it)}function isArrayLikeObject(nt){return isObjectLike(nt)&&isArrayLike(nt)}function safeGet(nt,rt){if(!(rt==="constructor"&&typeof nt[rt]=="function")&&rt!="__proto__")return nt[rt]}function toPlainObject(nt){return copyObject(nt,keysIn(nt))}function baseMergeDeep(nt,rt,it,st,_t,xt,Et){var kt=safeGet(nt,it),Lt=safeGet(rt,it),It=Et.get(Lt);if(It){assignMergeValue(nt,it,It);return}var Rt=xt?xt(kt,Lt,it+"",nt,rt,Et):void 0,Nt=Rt===void 0;if(Nt){var Bt=isArray$1(Lt),Ft=!Bt&&isBuffer$1(Lt),Yt=!Bt&&!Ft&&isTypedArray$1(Lt);Rt=Lt,Bt||Ft||Yt?isArray$1(kt)?Rt=kt:isArrayLikeObject(kt)?Rt=copyArray(kt):Ft?(Nt=!1,Rt=cloneBuffer(Lt,!0)):Yt?(Nt=!1,Rt=cloneTypedArray(Lt,!0)):Rt=[]:isPlainObject(Lt)||isArguments$1(Lt)?(Rt=kt,isArguments$1(kt)?Rt=toPlainObject(kt):(!isObject$1(kt)||isFunction(kt))&&(Rt=initCloneObject(Lt))):Nt=!1}Nt&&(Et.set(Lt,Rt),_t(Rt,Lt,st,xt,Et),Et.delete(Lt)),assignMergeValue(nt,it,Rt)}function baseMerge(nt,rt,it,st,_t){nt!==rt&&baseFor$1(rt,function(xt,Et){if(_t||(_t=new Stack),isObject$1(xt))baseMergeDeep(nt,rt,Et,it,baseMerge,st,_t);else{var kt=st?st(safeGet(nt,Et),xt,Et+"",nt,rt,_t):void 0;kt===void 0&&(kt=xt),assignMergeValue(nt,Et,kt)}},keysIn)}function arrayIncludesWith(nt,rt,it){for(var st=-1,_t=nt==null?0:nt.length;++st<_t;)if(it(rt,nt[st]))return!0;return!1}function last(nt){var rt=nt==null?0:nt.length;return rt?nt[rt-1]:void 0}function castFunction(nt){return typeof nt=="function"?nt:identity}function forEach(nt,rt){var it=isArray$1(nt)?arrayEach:baseEach$1;return it(nt,castFunction(rt))}function baseFilter(nt,rt){var it=[];return baseEach$1(nt,function(st,_t,xt){rt(st,_t,xt)&&it.push(st)}),it}function filter(nt,rt){var it=isArray$1(nt)?arrayFilter:baseFilter;return it(nt,baseIteratee(rt))}function createFind(nt){return function(rt,it,st){var _t=Object(rt);if(!isArrayLike(rt)){var xt=baseIteratee(it);rt=keys(rt),it=function(kt){return xt(_t[kt],kt,_t)}}var Et=nt(rt,it,st);return Et>-1?_t[xt?rt[Et]:Et]:void 0}}var nativeMax$1=Math.max;function findIndex(nt,rt,it){var st=nt==null?0:nt.length;if(!st)return-1;var _t=it==null?0:toInteger(it);return _t<0&&(_t=nativeMax$1(st+_t,0)),baseFindIndex(nt,baseIteratee(rt),_t)}var find=createFind(findIndex);const find$1=find;function baseMap(nt,rt){var it=-1,st=isArrayLike(nt)?Array(nt.length):[];return baseEach$1(nt,function(_t,xt,Et){st[++it]=rt(_t,xt,Et)}),st}function map$1(nt,rt){var it=isArray$1(nt)?arrayMap:baseMap;return it(nt,baseIteratee(rt))}function forIn(nt,rt){return nt==null?nt:baseFor$1(nt,castFunction(rt),keysIn)}function baseGt(nt,rt){return nt>rt}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseHas(nt,rt){return nt!=null&&hasOwnProperty$1.call(nt,rt)}function has(nt,rt){return nt!=null&&hasPath(nt,rt,baseHas)}function baseValues(nt,rt){return arrayMap(rt,function(it){return nt[it]})}function values(nt){return nt==null?[]:baseValues(nt,keys(nt))}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(nt){if(nt==null)return!0;if(isArrayLike(nt)&&(isArray$1(nt)||typeof nt=="string"||typeof nt.splice=="function"||isBuffer$1(nt)||isTypedArray$1(nt)||isArguments$1(nt)))return!nt.length;var rt=getTag$1(nt);if(rt==mapTag||rt==setTag)return!nt.size;if(isPrototype(nt))return!baseKeys(nt).length;for(var it in nt)if(hasOwnProperty.call(nt,it))return!1;return!0}function isUndefined(nt){return nt===void 0}function baseLt(nt,rt){return nt<rt}function mapValues(nt,rt){var it={};return rt=baseIteratee(rt),baseForOwn(nt,function(st,_t,xt){baseAssignValue(it,_t,rt(st,_t,xt))}),it}function baseExtremum(nt,rt,it){for(var st=-1,_t=nt.length;++st<_t;){var xt=nt[st],Et=rt(xt);if(Et!=null&&(kt===void 0?Et===Et&&!isSymbol(Et):it(Et,kt)))var kt=Et,Lt=xt}return Lt}function max(nt){return nt&&nt.length?baseExtremum(nt,identity,baseGt):void 0}var merge$2=createAssigner(function(nt,rt,it){baseMerge(nt,rt,it)});const merge$3=merge$2;function min(nt){return nt&&nt.length?baseExtremum(nt,identity,baseLt):void 0}function minBy(nt,rt){return nt&&nt.length?baseExtremum(nt,baseIteratee(rt),baseLt):void 0}function baseSet(nt,rt,it,st){if(!isObject$1(nt))return nt;rt=castPath(rt,nt);for(var _t=-1,xt=rt.length,Et=xt-1,kt=nt;kt!=null&&++_t<xt;){var Lt=toKey(rt[_t]),It=it;if(Lt==="__proto__"||Lt==="constructor"||Lt==="prototype")return nt;if(_t!=Et){var Rt=kt[Lt];It=st?st(Rt,Lt,kt):void 0,It===void 0&&(It=isObject$1(Rt)?Rt:isIndex(rt[_t+1])?[]:{})}assignValue(kt,Lt,It),kt=kt[Lt]}return nt}function basePickBy(nt,rt,it){for(var st=-1,_t=rt.length,xt={};++st<_t;){var Et=rt[st],kt=baseGet(nt,Et);it(kt,Et)&&baseSet(xt,castPath(Et,nt),kt)}return xt}function baseSortBy(nt,rt){var it=nt.length;for(nt.sort(rt);it--;)nt[it]=nt[it].value;return nt}function compareAscending(nt,rt){if(nt!==rt){var it=nt!==void 0,st=nt===null,_t=nt===nt,xt=isSymbol(nt),Et=rt!==void 0,kt=rt===null,Lt=rt===rt,It=isSymbol(rt);if(!kt&&!It&&!xt&&nt>rt||xt&&Et&&Lt&&!kt&&!It||st&&Et&&Lt||!it&&Lt||!_t)return 1;if(!st&&!xt&&!It&&nt<rt||It&&it&&_t&&!st&&!xt||kt&&it&&_t||!Et&&_t||!Lt)return-1}return 0}function compareMultiple(nt,rt,it){for(var st=-1,_t=nt.criteria,xt=rt.criteria,Et=_t.length,kt=it.length;++st<Et;){var Lt=compareAscending(_t[st],xt[st]);if(Lt){if(st>=kt)return Lt;var It=it[st];return Lt*(It=="desc"?-1:1)}}return nt.index-rt.index}function baseOrderBy(nt,rt,it){rt.length?rt=arrayMap(rt,function(xt){return isArray$1(xt)?function(Et){return baseGet(Et,xt.length===1?xt[0]:xt)}:xt}):rt=[identity];var st=-1;rt=arrayMap(rt,baseUnary(baseIteratee));var _t=baseMap(nt,function(xt,Et,kt){var Lt=arrayMap(rt,function(It){return It(xt)});return{criteria:Lt,index:++st,value:xt}});return baseSortBy(_t,function(xt,Et){return compareMultiple(xt,Et,it)})}function basePick(nt,rt){return basePickBy(nt,rt,function(it,st){return hasIn(nt,st)})}var pick=flatRest(function(nt,rt){return nt==null?{}:basePick(nt,rt)});const pick$1=pick;var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(nt,rt,it,st){for(var _t=-1,xt=nativeMax(nativeCeil((rt-nt)/(it||1)),0),Et=Array(xt);xt--;)Et[st?xt:++_t]=nt,nt+=it;return Et}function createRange(nt){return function(rt,it,st){return st&&typeof st!="number"&&isIterateeCall(rt,it,st)&&(it=st=void 0),rt=toFinite(rt),it===void 0?(it=rt,rt=0):it=toFinite(it),st=st===void 0?rt<it?1:-1:toFinite(st),baseRange(rt,it,st,nt)}}var range=createRange();const range$1=range;function baseReduce(nt,rt,it,st,_t){return _t(nt,function(xt,Et,kt){it=st?(st=!1,xt):rt(it,xt,Et,kt)}),it}function reduce(nt,rt,it){var st=isArray$1(nt)?arrayReduce:baseReduce,_t=arguments.length<3;return st(nt,baseIteratee(rt),it,_t,baseEach$1)}var sortBy=baseRest(function(nt,rt){if(nt==null)return[];var it=rt.length;return it>1&&isIterateeCall(nt,rt[0],rt[1])?rt=[]:it>2&&isIterateeCall(rt[0],rt[1],rt[2])&&(rt=[rt[0]]),baseOrderBy(nt,baseFlatten(rt,1),[])});const sortBy$1=sortBy;var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(nt){return new Set$2(nt)}:noop;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq(nt,rt,it){var st=-1,_t=arrayIncludes,xt=nt.length,Et=!0,kt=[],Lt=kt;if(it)Et=!1,_t=arrayIncludesWith;else if(xt>=LARGE_ARRAY_SIZE){var It=rt?null:createSet$1(nt);if(It)return setToArray(It);Et=!1,_t=cacheHas,Lt=new SetCache}else Lt=rt?[]:kt;e:for(;++st<xt;){var Rt=nt[st],Nt=rt?rt(Rt):Rt;if(Rt=it||Rt!==0?Rt:0,Et&&Nt===Nt){for(var Bt=Lt.length;Bt--;)if(Lt[Bt]===Nt)continue e;rt&&Lt.push(Nt),kt.push(Rt)}else _t(Lt,Nt,it)||(Lt!==kt&&Lt.push(Nt),kt.push(Rt))}return kt}var union=baseRest(function(nt){return baseUniq(baseFlatten(nt,1,isArrayLikeObject,!0))});const union$1=union;var idCounter=0;function uniqueId(nt){var rt=++idCounter;return toString(nt)+rt}function baseZipObject(nt,rt,it){for(var st=-1,_t=nt.length,xt=rt.length,Et={};++st<_t;){var kt=st<xt?rt[st]:void 0;it(Et,nt[st],kt)}return Et}function zipObject(nt,rt){return baseZipObject(nt||[],rt||[],assignValue)}var DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";class Graph{constructor(rt={}){this._isDirected=has(rt,"directed")?rt.directed:!0,this._isMultigraph=has(rt,"multigraph")?rt.multigraph:!1,this._isCompound=has(rt,"compound")?rt.compound:!1,this._label=void 0,this._defaultNodeLabelFn=constant(void 0),this._defaultEdgeLabelFn=constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(rt){return this._label=rt,this}graph(){return this._label}setDefaultNodeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultNodeLabelFn=rt,this}nodeCount(){return this._nodeCount}nodes(){return keys(this._nodes)}sources(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._in[it])})}sinks(){var rt=this;return filter(this.nodes(),function(it){return isEmpty(rt._out[it])})}setNodes(rt,it){var st=arguments,_t=this;return forEach(rt,function(xt){st.length>1?_t.setNode(xt,it):_t.setNode(xt)}),this}setNode(rt,it){return has(this._nodes,rt)?(arguments.length>1&&(this._nodes[rt]=it),this):(this._nodes[rt]=arguments.length>1?it:this._defaultNodeLabelFn(rt),this._isCompound&&(this._parent[rt]=GRAPH_NODE,this._children[rt]={},this._children[GRAPH_NODE][rt]=!0),this._in[rt]={},this._preds[rt]={},this._out[rt]={},this._sucs[rt]={},++this._nodeCount,this)}node(rt){return this._nodes[rt]}hasNode(rt){return has(this._nodes,rt)}removeNode(rt){var it=this;if(has(this._nodes,rt)){var st=function(_t){it.removeEdge(it._edgeObjs[_t])};delete this._nodes[rt],this._isCompound&&(this._removeFromParentsChildList(rt),delete this._parent[rt],forEach(this.children(rt),function(_t){it.setParent(_t)}),delete this._children[rt]),forEach(keys(this._in[rt]),st),delete this._in[rt],delete this._preds[rt],forEach(keys(this._out[rt]),st),delete this._out[rt],delete this._sucs[rt],--this._nodeCount}return this}setParent(rt,it){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(isUndefined(it))it=GRAPH_NODE;else{it+="";for(var st=it;!isUndefined(st);st=this.parent(st))if(st===rt)throw new Error("Setting "+it+" as parent of "+rt+" would create a cycle");this.setNode(it)}return this.setNode(rt),this._removeFromParentsChildList(rt),this._parent[rt]=it,this._children[it][rt]=!0,this}_removeFromParentsChildList(rt){delete this._children[this._parent[rt]][rt]}parent(rt){if(this._isCompound){var it=this._parent[rt];if(it!==GRAPH_NODE)return it}}children(rt){if(isUndefined(rt)&&(rt=GRAPH_NODE),this._isCompound){var it=this._children[rt];if(it)return keys(it)}else{if(rt===GRAPH_NODE)return this.nodes();if(this.hasNode(rt))return[]}}predecessors(rt){var it=this._preds[rt];if(it)return keys(it)}successors(rt){var it=this._sucs[rt];if(it)return keys(it)}neighbors(rt){var it=this.predecessors(rt);if(it)return union$1(it,this.successors(rt))}isLeaf(rt){var it;return this.isDirected()?it=this.successors(rt):it=this.neighbors(rt),it.length===0}filterNodes(rt){var it=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});it.setGraph(this.graph());var st=this;forEach(this._nodes,function(Et,kt){rt(kt)&&it.setNode(kt,Et)}),forEach(this._edgeObjs,function(Et){it.hasNode(Et.v)&&it.hasNode(Et.w)&&it.setEdge(Et,st.edge(Et))});var _t={};function xt(Et){var kt=st.parent(Et);return kt===void 0||it.hasNode(kt)?(_t[Et]=kt,kt):kt in _t?_t[kt]:xt(kt)}return this._isCompound&&forEach(it.nodes(),function(Et){it.setParent(Et,xt(Et))}),it}setDefaultEdgeLabel(rt){return isFunction(rt)||(rt=constant(rt)),this._defaultEdgeLabelFn=rt,this}edgeCount(){return this._edgeCount}edges(){return values(this._edgeObjs)}setPath(rt,it){var st=this,_t=arguments;return reduce(rt,function(xt,Et){return _t.length>1?st.setEdge(xt,Et,it):st.setEdge(xt,Et),Et}),this}setEdge(){var rt,it,st,_t,xt=!1,Et=arguments[0];typeof Et=="object"&&Et!==null&&"v"in Et?(rt=Et.v,it=Et.w,st=Et.name,arguments.length===2&&(_t=arguments[1],xt=!0)):(rt=Et,it=arguments[1],st=arguments[3],arguments.length>2&&(_t=arguments[2],xt=!0)),rt=""+rt,it=""+it,isUndefined(st)||(st=""+st);var kt=edgeArgsToId(this._isDirected,rt,it,st);if(has(this._edgeLabels,kt))return xt&&(this._edgeLabels[kt]=_t),this;if(!isUndefined(st)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(rt),this.setNode(it),this._edgeLabels[kt]=xt?_t:this._defaultEdgeLabelFn(rt,it,st);var Lt=edgeArgsToObj(this._isDirected,rt,it,st);return rt=Lt.v,it=Lt.w,Object.freeze(Lt),this._edgeObjs[kt]=Lt,incrementOrInitEntry(this._preds[it],rt),incrementOrInitEntry(this._sucs[rt],it),this._in[it][kt]=Lt,this._out[rt][kt]=Lt,this._edgeCount++,this}edge(rt,it,st){var _t=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st);return this._edgeLabels[_t]}hasEdge(rt,it,st){var _t=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st);return has(this._edgeLabels,_t)}removeEdge(rt,it,st){var _t=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,rt,it,st),xt=this._edgeObjs[_t];return xt&&(rt=xt.v,it=xt.w,delete this._edgeLabels[_t],delete this._edgeObjs[_t],decrementOrRemoveEntry(this._preds[it],rt),decrementOrRemoveEntry(this._sucs[rt],it),delete this._in[it][_t],delete this._out[rt][_t],this._edgeCount--),this}inEdges(rt,it){var st=this._in[rt];if(st){var _t=values(st);return it?filter(_t,function(xt){return xt.v===it}):_t}}outEdges(rt,it){var st=this._out[rt];if(st){var _t=values(st);return it?filter(_t,function(xt){return xt.w===it}):_t}}nodeEdges(rt,it){var st=this.inEdges(rt,it);if(st)return st.concat(this.outEdges(rt,it))}}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;function incrementOrInitEntry(nt,rt){nt[rt]?nt[rt]++:nt[rt]=1}function decrementOrRemoveEntry(nt,rt){--nt[rt]||delete nt[rt]}function edgeArgsToId(nt,rt,it,st){var _t=""+rt,xt=""+it;if(!nt&&_t>xt){var Et=_t;_t=xt,xt=Et}return _t+EDGE_KEY_DELIM+xt+EDGE_KEY_DELIM+(isUndefined(st)?DEFAULT_EDGE_NAME:st)}function edgeArgsToObj(nt,rt,it,st){var _t=""+rt,xt=""+it;if(!nt&&_t>xt){var Et=_t;_t=xt,xt=Et}var kt={v:_t,w:xt};return st&&(kt.name=st),kt}function edgeObjToId(nt,rt){return edgeArgsToId(nt,rt.v,rt.w,rt.name)}class List{constructor(){var rt={};rt._next=rt._prev=rt,this._sentinel=rt}dequeue(){var rt=this._sentinel,it=rt._prev;if(it!==rt)return unlink(it),it}enqueue(rt){var it=this._sentinel;rt._prev&&rt._next&&unlink(rt),rt._next=it._next,it._next._prev=rt,it._next=rt,rt._prev=it}toString(){for(var rt=[],it=this._sentinel,st=it._prev;st!==it;)rt.push(JSON.stringify(st,filterOutLinks)),st=st._prev;return"["+rt.join(", ")+"]"}}function unlink(nt){nt._prev._next=nt._next,nt._next._prev=nt._prev,delete nt._next,delete nt._prev}function filterOutLinks(nt,rt){if(nt!=="_next"&&nt!=="_prev")return rt}var DEFAULT_WEIGHT_FN=constant(1);function greedyFAS(nt,rt){if(nt.nodeCount()<=1)return[];var it=buildState(nt,rt||DEFAULT_WEIGHT_FN),st=doGreedyFAS(it.graph,it.buckets,it.zeroIdx);return flatten$1(map$1(st,function(_t){return nt.outEdges(_t.v,_t.w)}))}function doGreedyFAS(nt,rt,it){for(var st=[],_t=rt[rt.length-1],xt=rt[0],Et;nt.nodeCount();){for(;Et=xt.dequeue();)removeNode(nt,rt,it,Et);for(;Et=_t.dequeue();)removeNode(nt,rt,it,Et);if(nt.nodeCount()){for(var kt=rt.length-2;kt>0;--kt)if(Et=rt[kt].dequeue(),Et){st=st.concat(removeNode(nt,rt,it,Et,!0));break}}}return st}function removeNode(nt,rt,it,st,_t){var xt=_t?[]:void 0;return forEach(nt.inEdges(st.v),function(Et){var kt=nt.edge(Et),Lt=nt.node(Et.v);_t&&xt.push({v:Et.v,w:Et.w}),Lt.out-=kt,assignBucket(rt,it,Lt)}),forEach(nt.outEdges(st.v),function(Et){var kt=nt.edge(Et),Lt=Et.w,It=nt.node(Lt);It.in-=kt,assignBucket(rt,it,It)}),nt.removeNode(st.v),xt}function buildState(nt,rt){var it=new Graph,st=0,_t=0;forEach(nt.nodes(),function(kt){it.setNode(kt,{v:kt,in:0,out:0})}),forEach(nt.edges(),function(kt){var Lt=it.edge(kt.v,kt.w)||0,It=rt(kt),Rt=Lt+It;it.setEdge(kt.v,kt.w,Rt),_t=Math.max(_t,it.node(kt.v).out+=It),st=Math.max(st,it.node(kt.w).in+=It)});var xt=range$1(_t+st+3).map(function(){return new List}),Et=st+1;return forEach(it.nodes(),function(kt){assignBucket(xt,Et,it.node(kt))}),{graph:it,buckets:xt,zeroIdx:Et}}function assignBucket(nt,rt,it){it.out?it.in?nt[it.out-it.in+rt].enqueue(it):nt[nt.length-1].enqueue(it):nt[0].enqueue(it)}function run$2(nt){var rt=nt.graph().acyclicer==="greedy"?greedyFAS(nt,it(nt)):dfsFAS(nt);forEach(rt,function(st){var _t=nt.edge(st);nt.removeEdge(st),_t.forwardName=st.name,_t.reversed=!0,nt.setEdge(st.w,st.v,_t,uniqueId("rev"))});function it(st){return function(_t){return st.edge(_t).weight}}}function dfsFAS(nt){var rt=[],it={},st={};function _t(xt){has(st,xt)||(st[xt]=!0,it[xt]=!0,forEach(nt.outEdges(xt),function(Et){has(it,Et.w)?rt.push(Et):_t(Et.w)}),delete it[xt])}return forEach(nt.nodes(),_t),rt}function undo$2(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.reversed){nt.removeEdge(rt);var st=it.forwardName;delete it.reversed,delete it.forwardName,nt.setEdge(rt.w,rt.v,it,st)}})}function addDummyNode(nt,rt,it,st){var _t;do _t=uniqueId(st);while(nt.hasNode(_t));return it.dummy=rt,nt.setNode(_t,it),_t}function simplify(nt){var rt=new Graph().setGraph(nt.graph());return forEach(nt.nodes(),function(it){rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){var st=rt.edge(it.v,it.w)||{weight:0,minlen:1},_t=nt.edge(it);rt.setEdge(it.v,it.w,{weight:st.weight+_t.weight,minlen:Math.max(st.minlen,_t.minlen)})}),rt}function asNonCompoundGraph(nt){var rt=new Graph({multigraph:nt.isMultigraph()}).setGraph(nt.graph());return forEach(nt.nodes(),function(it){nt.children(it).length||rt.setNode(it,nt.node(it))}),forEach(nt.edges(),function(it){rt.setEdge(it,nt.edge(it))}),rt}function intersectRect$3(nt,rt){var it=nt.x,st=nt.y,_t=rt.x-it,xt=rt.y-st,Et=nt.width/2,kt=nt.height/2;if(!_t&&!xt)throw new Error("Not possible to find intersection inside of the rectangle");var Lt,It;return Math.abs(xt)*Et>Math.abs(_t)*kt?(xt<0&&(kt=-kt),Lt=kt*_t/xt,It=kt):(_t<0&&(Et=-Et),Lt=Et,It=Et*xt/_t),{x:it+Lt,y:st+It}}function buildLayerMatrix(nt){var rt=map$1(range$1(maxRank(nt)+1),function(){return[]});return forEach(nt.nodes(),function(it){var st=nt.node(it),_t=st.rank;isUndefined(_t)||(rt[_t][st.order]=it)}),rt}function normalizeRanks(nt){var rt=min(map$1(nt.nodes(),function(it){return nt.node(it).rank}));forEach(nt.nodes(),function(it){var st=nt.node(it);has(st,"rank")&&(st.rank-=rt)})}function removeEmptyRanks(nt){var rt=min(map$1(nt.nodes(),function(xt){return nt.node(xt).rank})),it=[];forEach(nt.nodes(),function(xt){var Et=nt.node(xt).rank-rt;it[Et]||(it[Et]=[]),it[Et].push(xt)});var st=0,_t=nt.graph().nodeRankFactor;forEach(it,function(xt,Et){isUndefined(xt)&&Et%_t!==0?--st:st&&forEach(xt,function(kt){nt.node(kt).rank+=st})})}function addBorderNode$1(nt,rt,it,st){var _t={width:0,height:0};return arguments.length>=4&&(_t.rank=it,_t.order=st),addDummyNode(nt,"border",_t,rt)}function maxRank(nt){return max(map$1(nt.nodes(),function(rt){var it=nt.node(rt).rank;if(!isUndefined(it))return it}))}function partition(nt,rt){var it={lhs:[],rhs:[]};return forEach(nt,function(st){rt(st)?it.lhs.push(st):it.rhs.push(st)}),it}function time(nt,rt){var it=now$1();try{return rt()}finally{console.log(nt+" time: "+(now$1()-it)+"ms")}}function notime(nt,rt){return rt()}function addBorderSegments(nt){function rt(it){var st=nt.children(it),_t=nt.node(it);if(st.length&&forEach(st,rt),has(_t,"minRank")){_t.borderLeft=[],_t.borderRight=[];for(var xt=_t.minRank,Et=_t.maxRank+1;xt<Et;++xt)addBorderNode(nt,"borderLeft","_bl",it,_t,xt),addBorderNode(nt,"borderRight","_br",it,_t,xt)}}forEach(nt.children(),rt)}function addBorderNode(nt,rt,it,st,_t,xt){var Et={width:0,height:0,rank:xt,borderType:rt},kt=_t[rt][xt-1],Lt=addDummyNode(nt,"border",Et,it);_t[rt][xt]=Lt,nt.setParent(Lt,st),kt&&nt.setEdge(kt,Lt,{weight:1})}function adjust(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="lr"||rt==="rl")&&swapWidthHeight(nt)}function undo$1(nt){var rt=nt.graph().rankdir.toLowerCase();(rt==="bt"||rt==="rl")&&reverseY(nt),(rt==="lr"||rt==="rl")&&(swapXY(nt),swapWidthHeight(nt))}function swapWidthHeight(nt){forEach(nt.nodes(),function(rt){swapWidthHeightOne(nt.node(rt))}),forEach(nt.edges(),function(rt){swapWidthHeightOne(nt.edge(rt))})}function swapWidthHeightOne(nt){var rt=nt.width;nt.width=nt.height,nt.height=rt}function reverseY(nt){forEach(nt.nodes(),function(rt){reverseYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,reverseYOne),has(it,"y")&&reverseYOne(it)})}function reverseYOne(nt){nt.y=-nt.y}function swapXY(nt){forEach(nt.nodes(),function(rt){swapXYOne(nt.node(rt))}),forEach(nt.edges(),function(rt){var it=nt.edge(rt);forEach(it.points,swapXYOne),has(it,"x")&&swapXYOne(it)})}function swapXYOne(nt){var rt=nt.x;nt.x=nt.y,nt.y=rt}function run$1(nt){nt.graph().dummyChains=[],forEach(nt.edges(),function(rt){normalizeEdge(nt,rt)})}function normalizeEdge(nt,rt){var it=rt.v,st=nt.node(it).rank,_t=rt.w,xt=nt.node(_t).rank,Et=rt.name,kt=nt.edge(rt),Lt=kt.labelRank;if(xt!==st+1){nt.removeEdge(rt);var It,Rt,Nt;for(Nt=0,++st;st<xt;++Nt,++st)kt.points=[],Rt={width:0,height:0,edgeLabel:kt,edgeObj:rt,rank:st},It=addDummyNode(nt,"edge",Rt,"_d"),st===Lt&&(Rt.width=kt.width,Rt.height=kt.height,Rt.dummy="edge-label",Rt.labelpos=kt.labelpos),nt.setEdge(it,It,{weight:kt.weight},Et),Nt===0&&nt.graph().dummyChains.push(It),it=It;nt.setEdge(it,_t,{weight:kt.weight},Et)}}function undo(nt){forEach(nt.graph().dummyChains,function(rt){var it=nt.node(rt),st=it.edgeLabel,_t;for(nt.setEdge(it.edgeObj,st);it.dummy;)_t=nt.successors(rt)[0],nt.removeNode(rt),st.points.push({x:it.x,y:it.y}),it.dummy==="edge-label"&&(st.x=it.x,st.y=it.y,st.width=it.width,st.height=it.height),rt=_t,it=nt.node(rt)})}function longestPath(nt){var rt={};function it(st){var _t=nt.node(st);if(has(rt,st))return _t.rank;rt[st]=!0;var xt=min(map$1(nt.outEdges(st),function(Et){return it(Et.w)-nt.edge(Et).minlen}));return(xt===Number.POSITIVE_INFINITY||xt===void 0||xt===null)&&(xt=0),_t.rank=xt}forEach(nt.sources(),it)}function slack(nt,rt){return nt.node(rt.w).rank-nt.node(rt.v).rank-nt.edge(rt).minlen}function feasibleTree(nt){var rt=new Graph({directed:!1}),it=nt.nodes()[0],st=nt.nodeCount();rt.setNode(it,{});for(var _t,xt;tightTree(rt,nt)<st;)_t=findMinSlackEdge(rt,nt),xt=rt.hasNode(_t.v)?slack(nt,_t):-slack(nt,_t),shiftRanks(rt,nt,xt);return rt}function tightTree(nt,rt){function it(st){forEach(rt.nodeEdges(st),function(_t){var xt=_t.v,Et=st===xt?_t.w:xt;!nt.hasNode(Et)&&!slack(rt,_t)&&(nt.setNode(Et,{}),nt.setEdge(st,Et,{}),it(Et))})}return forEach(nt.nodes(),it),nt.nodeCount()}function findMinSlackEdge(nt,rt){return minBy(rt.edges(),function(it){if(nt.hasNode(it.v)!==nt.hasNode(it.w))return slack(rt,it)})}function shiftRanks(nt,rt,it){forEach(nt.nodes(),function(st){rt.node(st).rank+=it})}function CycleException(){}CycleException.prototype=new Error;function dfs$1(nt,rt,it){isArray$1(rt)||(rt=[rt]);var st=(nt.isDirected()?nt.successors:nt.neighbors).bind(nt),_t=[],xt={};return forEach(rt,function(Et){if(!nt.hasNode(Et))throw new Error("Graph does not have node: "+Et);doDfs(nt,Et,it==="post",xt,st,_t)}),_t}function doDfs(nt,rt,it,st,_t,xt){has(st,rt)||(st[rt]=!0,it||xt.push(rt),forEach(_t(rt),function(Et){doDfs(nt,Et,it,st,_t,xt)}),it&&xt.push(rt))}function postorder$1(nt,rt){return dfs$1(nt,rt,"post")}function preorder(nt,rt){return dfs$1(nt,rt,"pre")}networkSimplex.initLowLimValues=initLowLimValues;networkSimplex.initCutValues=initCutValues;networkSimplex.calcCutValue=calcCutValue;networkSimplex.leaveEdge=leaveEdge;networkSimplex.enterEdge=enterEdge;networkSimplex.exchangeEdges=exchangeEdges;function networkSimplex(nt){nt=simplify(nt),longestPath(nt);var rt=feasibleTree(nt);initLowLimValues(rt),initCutValues(rt,nt);for(var it,st;it=leaveEdge(rt);)st=enterEdge(rt,nt,it),exchangeEdges(rt,nt,it,st)}function initCutValues(nt,rt){var it=postorder$1(nt,nt.nodes());it=it.slice(0,it.length-1),forEach(it,function(st){assignCutValue(nt,rt,st)})}function assignCutValue(nt,rt,it){var st=nt.node(it),_t=st.parent;nt.edge(it,_t).cutvalue=calcCutValue(nt,rt,it)}function calcCutValue(nt,rt,it){var st=nt.node(it),_t=st.parent,xt=!0,Et=rt.edge(it,_t),kt=0;return Et||(xt=!1,Et=rt.edge(_t,it)),kt=Et.weight,forEach(rt.nodeEdges(it),function(Lt){var It=Lt.v===it,Rt=It?Lt.w:Lt.v;if(Rt!==_t){var Nt=It===xt,Bt=rt.edge(Lt).weight;if(kt+=Nt?Bt:-Bt,isTreeEdge(nt,it,Rt)){var Ft=nt.edge(it,Rt).cutvalue;kt+=Nt?-Ft:Ft}}}),kt}function initLowLimValues(nt,rt){arguments.length<2&&(rt=nt.nodes()[0]),dfsAssignLowLim(nt,{},1,rt)}function dfsAssignLowLim(nt,rt,it,st,_t){var xt=it,Et=nt.node(st);return rt[st]=!0,forEach(nt.neighbors(st),function(kt){has(rt,kt)||(it=dfsAssignLowLim(nt,rt,it,kt,st))}),Et.low=xt,Et.lim=it++,_t?Et.parent=_t:delete Et.parent,it}function leaveEdge(nt){return find$1(nt.edges(),function(rt){return nt.edge(rt).cutvalue<0})}function enterEdge(nt,rt,it){var st=it.v,_t=it.w;rt.hasEdge(st,_t)||(st=it.w,_t=it.v);var xt=nt.node(st),Et=nt.node(_t),kt=xt,Lt=!1;xt.lim>Et.lim&&(kt=Et,Lt=!0);var It=filter(rt.edges(),function(Rt){return Lt===isDescendant$1(nt,nt.node(Rt.v),kt)&&Lt!==isDescendant$1(nt,nt.node(Rt.w),kt)});return minBy(It,function(Rt){return slack(rt,Rt)})}function exchangeEdges(nt,rt,it,st){var _t=it.v,xt=it.w;nt.removeEdge(_t,xt),nt.setEdge(st.v,st.w,{}),initLowLimValues(nt),initCutValues(nt,rt),updateRanks(nt,rt)}function updateRanks(nt,rt){var it=find$1(nt.nodes(),function(_t){return!rt.node(_t).parent}),st=preorder(nt,it);st=st.slice(1),forEach(st,function(_t){var xt=nt.node(_t).parent,Et=rt.edge(_t,xt),kt=!1;Et||(Et=rt.edge(xt,_t),kt=!0),rt.node(_t).rank=rt.node(xt).rank+(kt?Et.minlen:-Et.minlen)})}function isTreeEdge(nt,rt,it){return nt.hasEdge(rt,it)}function isDescendant$1(nt,rt,it){return it.low<=rt.lim&&rt.lim<=it.lim}function rank(nt){switch(nt.graph().ranker){case"network-simplex":networkSimplexRanker(nt);break;case"tight-tree":tightTreeRanker(nt);break;case"longest-path":longestPathRanker(nt);break;default:networkSimplexRanker(nt)}}var longestPathRanker=longestPath;function tightTreeRanker(nt){longestPath(nt),feasibleTree(nt)}function networkSimplexRanker(nt){networkSimplex(nt)}function run(nt){var rt=addDummyNode(nt,"root",{},"_root"),it=treeDepths(nt),st=max(values(it))-1,_t=2*st+1;nt.graph().nestingRoot=rt,forEach(nt.edges(),function(Et){nt.edge(Et).minlen*=_t});var xt=sumWeights(nt)+1;forEach(nt.children(),function(Et){dfs(nt,rt,_t,xt,st,it,Et)}),nt.graph().nodeRankFactor=_t}function dfs(nt,rt,it,st,_t,xt,Et){var kt=nt.children(Et);if(!kt.length){Et!==rt&&nt.setEdge(rt,Et,{weight:0,minlen:it});return}var Lt=addBorderNode$1(nt,"_bt"),It=addBorderNode$1(nt,"_bb"),Rt=nt.node(Et);nt.setParent(Lt,Et),Rt.borderTop=Lt,nt.setParent(It,Et),Rt.borderBottom=It,forEach(kt,function(Nt){dfs(nt,rt,it,st,_t,xt,Nt);var Bt=nt.node(Nt),Ft=Bt.borderTop?Bt.borderTop:Nt,Yt=Bt.borderBottom?Bt.borderBottom:Nt,Zt=Bt.borderTop?st:2*st,Wt=Ft!==Yt?1:_t-xt[Et]+1;nt.setEdge(Lt,Ft,{weight:Zt,minlen:Wt,nestingEdge:!0}),nt.setEdge(Yt,It,{weight:Zt,minlen:Wt,nestingEdge:!0})}),nt.parent(Et)||nt.setEdge(rt,Lt,{weight:0,minlen:_t+xt[Et]})}function treeDepths(nt){var rt={};function it(st,_t){var xt=nt.children(st);xt&&xt.length&&forEach(xt,function(Et){it(Et,_t+1)}),rt[st]=_t}return forEach(nt.children(),function(st){it(st,1)}),rt}function sumWeights(nt){return reduce(nt.edges(),function(rt,it){return rt+nt.edge(it).weight},0)}function cleanup(nt){var rt=nt.graph();nt.removeNode(rt.nestingRoot),delete rt.nestingRoot,forEach(nt.edges(),function(it){var st=nt.edge(it);st.nestingEdge&&nt.removeEdge(it)})}function addSubgraphConstraints(nt,rt,it){var st={},_t;forEach(it,function(xt){for(var Et=nt.parent(xt),kt,Lt;Et;){if(kt=nt.parent(Et),kt?(Lt=st[kt],st[kt]=Et):(Lt=_t,_t=Et),Lt&&Lt!==Et){rt.setEdge(Lt,Et);return}Et=kt}})}function buildLayerGraph(nt,rt,it){var st=createRootNode(nt),_t=new Graph({compound:!0}).setGraph({root:st}).setDefaultNodeLabel(function(xt){return nt.node(xt)});return forEach(nt.nodes(),function(xt){var Et=nt.node(xt),kt=nt.parent(xt);(Et.rank===rt||Et.minRank<=rt&&rt<=Et.maxRank)&&(_t.setNode(xt),_t.setParent(xt,kt||st),forEach(nt[it](xt),function(Lt){var It=Lt.v===xt?Lt.w:Lt.v,Rt=_t.edge(It,xt),Nt=isUndefined(Rt)?0:Rt.weight;_t.setEdge(It,xt,{weight:nt.edge(Lt).weight+Nt})}),has(Et,"minRank")&&_t.setNode(xt,{borderLeft:Et.borderLeft[rt],borderRight:Et.borderRight[rt]}))}),_t}function createRootNode(nt){for(var rt;nt.hasNode(rt=uniqueId("_root")););return rt}function crossCount(nt,rt){for(var it=0,st=1;st<rt.length;++st)it+=twoLayerCrossCount(nt,rt[st-1],rt[st]);return it}function twoLayerCrossCount(nt,rt,it){for(var st=zipObject(it,map$1(it,function(It,Rt){return Rt})),_t=flatten$1(map$1(rt,function(It){return sortBy$1(map$1(nt.outEdges(It),function(Rt){return{pos:st[Rt.w],weight:nt.edge(Rt).weight}}),"pos")})),xt=1;xt<it.length;)xt<<=1;var Et=2*xt-1;xt-=1;var kt=map$1(new Array(Et),function(){return 0}),Lt=0;return forEach(_t.forEach(function(It){var Rt=It.pos+xt;kt[Rt]+=It.weight;for(var Nt=0;Rt>0;)Rt%2&&(Nt+=kt[Rt+1]),Rt=Rt-1>>1,kt[Rt]+=It.weight;Lt+=It.weight*Nt})),Lt}function initOrder(nt){var rt={},it=filter(nt.nodes(),function(kt){return!nt.children(kt).length}),st=max(map$1(it,function(kt){return nt.node(kt).rank})),_t=map$1(range$1(st+1),function(){return[]});function xt(kt){if(!has(rt,kt)){rt[kt]=!0;var Lt=nt.node(kt);_t[Lt.rank].push(kt),forEach(nt.successors(kt),xt)}}var Et=sortBy$1(it,function(kt){return nt.node(kt).rank});return forEach(Et,xt),_t}function barycenter(nt,rt){return map$1(rt,function(it){var st=nt.inEdges(it);if(st.length){var _t=reduce(st,function(xt,Et){var kt=nt.edge(Et),Lt=nt.node(Et.v);return{sum:xt.sum+kt.weight*Lt.order,weight:xt.weight+kt.weight}},{sum:0,weight:0});return{v:it,barycenter:_t.sum/_t.weight,weight:_t.weight}}else return{v:it}})}function resolveConflicts(nt,rt){var it={};forEach(nt,function(_t,xt){var Et=it[_t.v]={indegree:0,in:[],out:[],vs:[_t.v],i:xt};isUndefined(_t.barycenter)||(Et.barycenter=_t.barycenter,Et.weight=_t.weight)}),forEach(rt.edges(),function(_t){var xt=it[_t.v],Et=it[_t.w];!isUndefined(xt)&&!isUndefined(Et)&&(Et.indegree++,xt.out.push(it[_t.w]))});var st=filter(it,function(_t){return!_t.indegree});return doResolveConflicts(st)}function doResolveConflicts(nt){var rt=[];function it(xt){return function(Et){Et.merged||(isUndefined(Et.barycenter)||isUndefined(xt.barycenter)||Et.barycenter>=xt.barycenter)&&mergeEntries(xt,Et)}}function st(xt){return function(Et){Et.in.push(xt),--Et.indegree===0&&nt.push(Et)}}for(;nt.length;){var _t=nt.pop();rt.push(_t),forEach(_t.in.reverse(),it(_t)),forEach(_t.out,st(_t))}return map$1(filter(rt,function(xt){return!xt.merged}),function(xt){return pick$1(xt,["vs","i","barycenter","weight"])})}function mergeEntries(nt,rt){var it=0,st=0;nt.weight&&(it+=nt.barycenter*nt.weight,st+=nt.weight),rt.weight&&(it+=rt.barycenter*rt.weight,st+=rt.weight),nt.vs=rt.vs.concat(nt.vs),nt.barycenter=it/st,nt.weight=st,nt.i=Math.min(rt.i,nt.i),rt.merged=!0}function sort(nt,rt){var it=partition(nt,function(Rt){return has(Rt,"barycenter")}),st=it.lhs,_t=sortBy$1(it.rhs,function(Rt){return-Rt.i}),xt=[],Et=0,kt=0,Lt=0;st.sort(compareWithBias(!!rt)),Lt=consumeUnsortable(xt,_t,Lt),forEach(st,function(Rt){Lt+=Rt.vs.length,xt.push(Rt.vs),Et+=Rt.barycenter*Rt.weight,kt+=Rt.weight,Lt=consumeUnsortable(xt,_t,Lt)});var It={vs:flatten$1(xt)};return kt&&(It.barycenter=Et/kt,It.weight=kt),It}function consumeUnsortable(nt,rt,it){for(var st;rt.length&&(st=last(rt)).i<=it;)rt.pop(),nt.push(st.vs),it++;return it}function compareWithBias(nt){return function(rt,it){return rt.barycenter<it.barycenter?-1:rt.barycenter>it.barycenter?1:nt?it.i-rt.i:rt.i-it.i}}function sortSubgraph(nt,rt,it,st){var _t=nt.children(rt),xt=nt.node(rt),Et=xt?xt.borderLeft:void 0,kt=xt?xt.borderRight:void 0,Lt={};Et&&(_t=filter(_t,function(Yt){return Yt!==Et&&Yt!==kt}));var It=barycenter(nt,_t);forEach(It,function(Yt){if(nt.children(Yt.v).length){var Zt=sortSubgraph(nt,Yt.v,it,st);Lt[Yt.v]=Zt,has(Zt,"barycenter")&&mergeBarycenters(Yt,Zt)}});var Rt=resolveConflicts(It,it);expandSubgraphs(Rt,Lt);var Nt=sort(Rt,st);if(Et&&(Nt.vs=flatten$1([Et,Nt.vs,kt]),nt.predecessors(Et).length)){var Bt=nt.node(nt.predecessors(Et)[0]),Ft=nt.node(nt.predecessors(kt)[0]);has(Nt,"barycenter")||(Nt.barycenter=0,Nt.weight=0),Nt.barycenter=(Nt.barycenter*Nt.weight+Bt.order+Ft.order)/(Nt.weight+2),Nt.weight+=2}return Nt}function expandSubgraphs(nt,rt){forEach(nt,function(it){it.vs=flatten$1(it.vs.map(function(st){return rt[st]?rt[st].vs:st}))})}function mergeBarycenters(nt,rt){isUndefined(nt.barycenter)?(nt.barycenter=rt.barycenter,nt.weight=rt.weight):(nt.barycenter=(nt.barycenter*nt.weight+rt.barycenter*rt.weight)/(nt.weight+rt.weight),nt.weight+=rt.weight)}function order(nt){var rt=maxRank(nt),it=buildLayerGraphs(nt,range$1(1,rt+1),"inEdges"),st=buildLayerGraphs(nt,range$1(rt-1,-1,-1),"outEdges"),_t=initOrder(nt);assignOrder(nt,_t);for(var xt=Number.POSITIVE_INFINITY,Et,kt=0,Lt=0;Lt<4;++kt,++Lt){sweepLayerGraphs(kt%2?it:st,kt%4>=2),_t=buildLayerMatrix(nt);var It=crossCount(nt,_t);It<xt&&(Lt=0,Et=cloneDeep(_t),xt=It)}assignOrder(nt,Et)}function buildLayerGraphs(nt,rt,it){return map$1(rt,function(st){return buildLayerGraph(nt,st,it)})}function sweepLayerGraphs(nt,rt){var it=new Graph;forEach(nt,function(st){var _t=st.graph().root,xt=sortSubgraph(st,_t,it,rt);forEach(xt.vs,function(Et,kt){st.node(Et).order=kt}),addSubgraphConstraints(st,it,xt.vs)})}function assignOrder(nt,rt){forEach(rt,function(it){forEach(it,function(st,_t){nt.node(st).order=_t})})}function parentDummyChains(nt){var rt=postorder(nt);forEach(nt.graph().dummyChains,function(it){for(var st=nt.node(it),_t=st.edgeObj,xt=findPath(nt,rt,_t.v,_t.w),Et=xt.path,kt=xt.lca,Lt=0,It=Et[Lt],Rt=!0;it!==_t.w;){if(st=nt.node(it),Rt){for(;(It=Et[Lt])!==kt&&nt.node(It).maxRank<st.rank;)Lt++;It===kt&&(Rt=!1)}if(!Rt){for(;Lt<Et.length-1&&nt.node(It=Et[Lt+1]).minRank<=st.rank;)Lt++;It=Et[Lt]}nt.setParent(it,It),it=nt.successors(it)[0]}})}function findPath(nt,rt,it,st){var _t=[],xt=[],Et=Math.min(rt[it].low,rt[st].low),kt=Math.max(rt[it].lim,rt[st].lim),Lt,It;Lt=it;do Lt=nt.parent(Lt),_t.push(Lt);while(Lt&&(rt[Lt].low>Et||kt>rt[Lt].lim));for(It=Lt,Lt=st;(Lt=nt.parent(Lt))!==It;)xt.push(Lt);return{path:_t.concat(xt.reverse()),lca:It}}function postorder(nt){var rt={},it=0;function st(_t){var xt=it;forEach(nt.children(_t),st),rt[_t]={low:xt,lim:it++}}return forEach(nt.children(),st),rt}function findType1Conflicts(nt,rt){var it={};function st(_t,xt){var Et=0,kt=0,Lt=_t.length,It=last(xt);return forEach(xt,function(Rt,Nt){var Bt=findOtherInnerSegmentNode(nt,Rt),Ft=Bt?nt.node(Bt).order:Lt;(Bt||Rt===It)&&(forEach(xt.slice(kt,Nt+1),function(Yt){forEach(nt.predecessors(Yt),function(Zt){var Wt=nt.node(Zt),Kt=Wt.order;(Kt<Et||Ft<Kt)&&!(Wt.dummy&&nt.node(Yt).dummy)&&addConflict(it,Zt,Yt)})}),kt=Nt+1,Et=Ft)}),xt}return reduce(rt,st),it}function findType2Conflicts(nt,rt){var it={};function st(xt,Et,kt,Lt,It){var Rt;forEach(range$1(Et,kt),function(Nt){Rt=xt[Nt],nt.node(Rt).dummy&&forEach(nt.predecessors(Rt),function(Bt){var Ft=nt.node(Bt);Ft.dummy&&(Ft.order<Lt||Ft.order>It)&&addConflict(it,Bt,Rt)})})}function _t(xt,Et){var kt=-1,Lt,It=0;return forEach(Et,function(Rt,Nt){if(nt.node(Rt).dummy==="border"){var Bt=nt.predecessors(Rt);Bt.length&&(Lt=nt.node(Bt[0]).order,st(Et,It,Nt,kt,Lt),It=Nt,kt=Lt)}st(Et,It,Et.length,Lt,xt.length)}),Et}return reduce(rt,_t),it}function findOtherInnerSegmentNode(nt,rt){if(nt.node(rt).dummy)return find$1(nt.predecessors(rt),function(it){return nt.node(it).dummy})}function addConflict(nt,rt,it){if(rt>it){var st=rt;rt=it,it=st}var _t=nt[rt];_t||(nt[rt]=_t={}),_t[it]=!0}function hasConflict(nt,rt,it){if(rt>it){var st=rt;rt=it,it=st}return has(nt[rt],it)}function verticalAlignment(nt,rt,it,st){var _t={},xt={},Et={};return forEach(rt,function(kt){forEach(kt,function(Lt,It){_t[Lt]=Lt,xt[Lt]=Lt,Et[Lt]=It})}),forEach(rt,function(kt){var Lt=-1;forEach(kt,function(It){var Rt=st(It);if(Rt.length){Rt=sortBy$1(Rt,function(Zt){return Et[Zt]});for(var Nt=(Rt.length-1)/2,Bt=Math.floor(Nt),Ft=Math.ceil(Nt);Bt<=Ft;++Bt){var Yt=Rt[Bt];xt[It]===It&&Lt<Et[Yt]&&!hasConflict(it,It,Yt)&&(xt[Yt]=It,xt[It]=_t[It]=_t[Yt],Lt=Et[Yt])}}})}),{root:_t,align:xt}}function horizontalCompaction(nt,rt,it,st,_t){var xt={},Et=buildBlockGraph(nt,rt,it,_t),kt=_t?"borderLeft":"borderRight";function Lt(Nt,Bt){for(var Ft=Et.nodes(),Yt=Ft.pop(),Zt={};Yt;)Zt[Yt]?Nt(Yt):(Zt[Yt]=!0,Ft.push(Yt),Ft=Ft.concat(Bt(Yt))),Yt=Ft.pop()}function It(Nt){xt[Nt]=Et.inEdges(Nt).reduce(function(Bt,Ft){return Math.max(Bt,xt[Ft.v]+Et.edge(Ft))},0)}function Rt(Nt){var Bt=Et.outEdges(Nt).reduce(function(Yt,Zt){return Math.min(Yt,xt[Zt.w]-Et.edge(Zt))},Number.POSITIVE_INFINITY),Ft=nt.node(Nt);Bt!==Number.POSITIVE_INFINITY&&Ft.borderType!==kt&&(xt[Nt]=Math.max(xt[Nt],Bt))}return Lt(It,Et.predecessors.bind(Et)),Lt(Rt,Et.successors.bind(Et)),forEach(st,function(Nt){xt[Nt]=xt[it[Nt]]}),xt}function buildBlockGraph(nt,rt,it,st){var _t=new Graph,xt=nt.graph(),Et=sep(xt.nodesep,xt.edgesep,st);return forEach(rt,function(kt){var Lt;forEach(kt,function(It){var Rt=it[It];if(_t.setNode(Rt),Lt){var Nt=it[Lt],Bt=_t.edge(Nt,Rt);_t.setEdge(Nt,Rt,Math.max(Et(nt,It,Lt),Bt||0))}Lt=It})}),_t}function findSmallestWidthAlignment(nt,rt){return minBy(values(rt),function(it){var st=Number.NEGATIVE_INFINITY,_t=Number.POSITIVE_INFINITY;return forIn(it,function(xt,Et){var kt=width$1(nt,Et)/2;st=Math.max(xt+kt,st),_t=Math.min(xt-kt,_t)}),st-_t})}function alignCoordinates(nt,rt){var it=values(rt),st=min(it),_t=max(it);forEach(["u","d"],function(xt){forEach(["l","r"],function(Et){var kt=xt+Et,Lt=nt[kt],It;if(Lt!==rt){var Rt=values(Lt);It=Et==="l"?st-min(Rt):_t-max(Rt),It&&(nt[kt]=mapValues(Lt,function(Nt){return Nt+It}))}})})}function balance(nt,rt){return mapValues(nt.ul,function(it,st){if(rt)return nt[rt.toLowerCase()][st];var _t=sortBy$1(map$1(nt,st));return(_t[1]+_t[2])/2})}function positionX(nt){var rt=buildLayerMatrix(nt),it=merge$3(findType1Conflicts(nt,rt),findType2Conflicts(nt,rt)),st={},_t;forEach(["u","d"],function(Et){_t=Et==="u"?rt:values(rt).reverse(),forEach(["l","r"],function(kt){kt==="r"&&(_t=map$1(_t,function(Nt){return values(Nt).reverse()}));var Lt=(Et==="u"?nt.predecessors:nt.successors).bind(nt),It=verticalAlignment(nt,_t,it,Lt),Rt=horizontalCompaction(nt,_t,It.root,It.align,kt==="r");kt==="r"&&(Rt=mapValues(Rt,function(Nt){return-Nt})),st[Et+kt]=Rt})});var xt=findSmallestWidthAlignment(nt,st);return alignCoordinates(st,xt),balance(st,nt.graph().align)}function sep(nt,rt,it){return function(st,_t,xt){var Et=st.node(_t),kt=st.node(xt),Lt=0,It;if(Lt+=Et.width/2,has(Et,"labelpos"))switch(Et.labelpos.toLowerCase()){case"l":It=-Et.width/2;break;case"r":It=Et.width/2;break}if(It&&(Lt+=it?It:-It),It=0,Lt+=(Et.dummy?rt:nt)/2,Lt+=(kt.dummy?rt:nt)/2,Lt+=kt.width/2,has(kt,"labelpos"))switch(kt.labelpos.toLowerCase()){case"l":It=kt.width/2;break;case"r":It=-kt.width/2;break}return It&&(Lt+=it?It:-It),It=0,Lt}}function width$1(nt,rt){return nt.node(rt).width}function position(nt){nt=asNonCompoundGraph(nt),positionY(nt),forEach(positionX(nt),function(rt,it){nt.node(it).x=rt})}function positionY(nt){var rt=buildLayerMatrix(nt),it=nt.graph().ranksep,st=0;forEach(rt,function(_t){var xt=max(map$1(_t,function(Et){return nt.node(Et).height}));forEach(_t,function(Et){nt.node(Et).y=st+xt/2}),st+=xt+it})}function layout(nt,rt){var it=rt&&rt.debugTiming?time:notime;it("layout",function(){var st=it("  buildLayoutGraph",function(){return buildLayoutGraph(nt)});it("  runLayout",function(){runLayout(st,it)}),it("  updateInputGraph",function(){updateInputGraph(nt,st)})})}function runLayout(nt,rt){rt("    makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels(nt)}),rt("    removeSelfEdges",function(){removeSelfEdges(nt)}),rt("    acyclic",function(){run$2(nt)}),rt("    nestingGraph.run",function(){run(nt)}),rt("    rank",function(){rank(asNonCompoundGraph(nt))}),rt("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies(nt)}),rt("    removeEmptyRanks",function(){removeEmptyRanks(nt)}),rt("    nestingGraph.cleanup",function(){cleanup(nt)}),rt("    normalizeRanks",function(){normalizeRanks(nt)}),rt("    assignRankMinMax",function(){assignRankMinMax(nt)}),rt("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies(nt)}),rt("    normalize.run",function(){run$1(nt)}),rt("    parentDummyChains",function(){parentDummyChains(nt)}),rt("    addBorderSegments",function(){addBorderSegments(nt)}),rt("    order",function(){order(nt)}),rt("    insertSelfEdges",function(){insertSelfEdges(nt)}),rt("    adjustCoordinateSystem",function(){adjust(nt)}),rt("    position",function(){position(nt)}),rt("    positionSelfEdges",function(){positionSelfEdges(nt)}),rt("    removeBorderNodes",function(){removeBorderNodes(nt)}),rt("    normalize.undo",function(){undo(nt)}),rt("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords(nt)}),rt("    undoCoordinateSystem",function(){undo$1(nt)}),rt("    translateGraph",function(){translateGraph(nt)}),rt("    assignNodeIntersects",function(){assignNodeIntersects(nt)}),rt("    reversePoints",function(){reversePointsForReversedEdges(nt)}),rt("    acyclic.undo",function(){undo$2(nt)})}function updateInputGraph(nt,rt){forEach(nt.nodes(),function(it){var st=nt.node(it),_t=rt.node(it);st&&(st.x=_t.x,st.y=_t.y,rt.children(it).length&&(st.width=_t.width,st.height=_t.height))}),forEach(nt.edges(),function(it){var st=nt.edge(it),_t=rt.edge(it);st.points=_t.points,has(_t,"x")&&(st.x=_t.x,st.y=_t.y)}),nt.graph().width=rt.graph().width,nt.graph().height=rt.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph(nt){var rt=new Graph({multigraph:!0,compound:!0}),it=canonicalize$1(nt.graph());return rt.setGraph(merge$3({},graphDefaults,selectNumberAttrs(it,graphNumAttrs),pick$1(it,graphAttrs))),forEach(nt.nodes(),function(st){var _t=canonicalize$1(nt.node(st));rt.setNode(st,defaults$1(selectNumberAttrs(_t,nodeNumAttrs),nodeDefaults)),rt.setParent(st,nt.parent(st))}),forEach(nt.edges(),function(st){var _t=canonicalize$1(nt.edge(st));rt.setEdge(st,merge$3({},edgeDefaults,selectNumberAttrs(_t,edgeNumAttrs),pick$1(_t,edgeAttrs)))}),rt}function makeSpaceForEdgeLabels(nt){var rt=nt.graph();rt.ranksep/=2,forEach(nt.edges(),function(it){var st=nt.edge(it);st.minlen*=2,st.labelpos.toLowerCase()!=="c"&&(rt.rankdir==="TB"||rt.rankdir==="BT"?st.width+=st.labeloffset:st.height+=st.labeloffset)})}function injectEdgeLabelProxies(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(it.width&&it.height){var st=nt.node(rt.v),_t=nt.node(rt.w),xt={rank:(_t.rank-st.rank)/2+st.rank,e:rt};addDummyNode(nt,"edge-proxy",xt,"_ep")}})}function assignRankMinMax(nt){var rt=0;forEach(nt.nodes(),function(it){var st=nt.node(it);st.borderTop&&(st.minRank=nt.node(st.borderTop).rank,st.maxRank=nt.node(st.borderBottom).rank,rt=max(rt,st.maxRank))}),nt.graph().maxRank=rt}function removeEdgeLabelProxies(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);it.dummy==="edge-proxy"&&(nt.edge(it.e).labelRank=it.rank,nt.removeNode(rt))})}function translateGraph(nt){var rt=Number.POSITIVE_INFINITY,it=0,st=Number.POSITIVE_INFINITY,_t=0,xt=nt.graph(),Et=xt.marginx||0,kt=xt.marginy||0;function Lt(It){var Rt=It.x,Nt=It.y,Bt=It.width,Ft=It.height;rt=Math.min(rt,Rt-Bt/2),it=Math.max(it,Rt+Bt/2),st=Math.min(st,Nt-Ft/2),_t=Math.max(_t,Nt+Ft/2)}forEach(nt.nodes(),function(It){Lt(nt.node(It))}),forEach(nt.edges(),function(It){var Rt=nt.edge(It);has(Rt,"x")&&Lt(Rt)}),rt-=Et,st-=kt,forEach(nt.nodes(),function(It){var Rt=nt.node(It);Rt.x-=rt,Rt.y-=st}),forEach(nt.edges(),function(It){var Rt=nt.edge(It);forEach(Rt.points,function(Nt){Nt.x-=rt,Nt.y-=st}),has(Rt,"x")&&(Rt.x-=rt),has(Rt,"y")&&(Rt.y-=st)}),xt.width=it-rt+Et,xt.height=_t-st+kt}function assignNodeIntersects(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt),st=nt.node(rt.v),_t=nt.node(rt.w),xt,Et;it.points?(xt=it.points[0],Et=it.points[it.points.length-1]):(it.points=[],xt=_t,Et=st),it.points.unshift(intersectRect$3(st,xt)),it.points.push(intersectRect$3(_t,Et))})}function fixupEdgeLabelCoords(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);if(has(it,"x"))switch((it.labelpos==="l"||it.labelpos==="r")&&(it.width-=it.labeloffset),it.labelpos){case"l":it.x-=it.width/2+it.labeloffset;break;case"r":it.x+=it.width/2+it.labeloffset;break}})}function reversePointsForReversedEdges(nt){forEach(nt.edges(),function(rt){var it=nt.edge(rt);it.reversed&&it.points.reverse()})}function removeBorderNodes(nt){forEach(nt.nodes(),function(rt){if(nt.children(rt).length){var it=nt.node(rt),st=nt.node(it.borderTop),_t=nt.node(it.borderBottom),xt=nt.node(last(it.borderLeft)),Et=nt.node(last(it.borderRight));it.width=Math.abs(Et.x-xt.x),it.height=Math.abs(_t.y-st.y),it.x=xt.x+it.width/2,it.y=st.y+it.height/2}}),forEach(nt.nodes(),function(rt){nt.node(rt).dummy==="border"&&nt.removeNode(rt)})}function removeSelfEdges(nt){forEach(nt.edges(),function(rt){if(rt.v===rt.w){var it=nt.node(rt.v);it.selfEdges||(it.selfEdges=[]),it.selfEdges.push({e:rt,label:nt.edge(rt)}),nt.removeEdge(rt)}})}function insertSelfEdges(nt){var rt=buildLayerMatrix(nt);forEach(rt,function(it){var st=0;forEach(it,function(_t,xt){var Et=nt.node(_t);Et.order=xt+st,forEach(Et.selfEdges,function(kt){addDummyNode(nt,"selfedge",{width:kt.label.width,height:kt.label.height,rank:Et.rank,order:xt+ ++st,e:kt.e,label:kt.label},"_se")}),delete Et.selfEdges})})}function positionSelfEdges(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);if(it.dummy==="selfedge"){var st=nt.node(it.e.v),_t=st.x+st.width/2,xt=st.y,Et=it.x-_t,kt=st.height/2;nt.setEdge(it.e,it.label),nt.removeNode(rt),it.label.points=[{x:_t+2*Et/3,y:xt-kt},{x:_t+5*Et/6,y:xt-kt},{x:_t+Et,y:xt},{x:_t+5*Et/6,y:xt+kt},{x:_t+2*Et/3,y:xt+kt}],it.label.x=it.x,it.label.y=it.y}})}function selectNumberAttrs(nt,rt){return mapValues(pick$1(nt,rt),Number)}function canonicalize$1(nt){var rt={};return forEach(nt,function(it,st){rt[st.toLowerCase()]=it}),rt}function write(nt){var rt={options:{directed:nt.isDirected(),multigraph:nt.isMultigraph(),compound:nt.isCompound()},nodes:writeNodes(nt),edges:writeEdges(nt)};return isUndefined(nt.graph())||(rt.value=clone$1(nt.graph())),rt}function writeNodes(nt){return map$1(nt.nodes(),function(rt){var it=nt.node(rt),st=nt.parent(rt),_t={v:rt};return isUndefined(it)||(_t.value=it),isUndefined(st)||(_t.parent=st),_t})}function writeEdges(nt){return map$1(nt.edges(),function(rt){var it=nt.edge(rt),st={v:rt.v,w:rt.w};return isUndefined(rt.name)||(st.name=rt.name),isUndefined(it)||(st.value=it),st})}const REGEX$1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(nt){return typeof nt=="string"&&REGEX$1.test(nt)}const byteToHex=[];for(let nt=0;nt<256;++nt)byteToHex.push((nt+256).toString(16).slice(1));function unsafeStringify(nt,rt=0){return byteToHex[nt[rt+0]]+byteToHex[nt[rt+1]]+byteToHex[nt[rt+2]]+byteToHex[nt[rt+3]]+"-"+byteToHex[nt[rt+4]]+byteToHex[nt[rt+5]]+"-"+byteToHex[nt[rt+6]]+byteToHex[nt[rt+7]]+"-"+byteToHex[nt[rt+8]]+byteToHex[nt[rt+9]]+"-"+byteToHex[nt[rt+10]]+byteToHex[nt[rt+11]]+byteToHex[nt[rt+12]]+byteToHex[nt[rt+13]]+byteToHex[nt[rt+14]]+byteToHex[nt[rt+15]]}function parse$2(nt){if(!validate(nt))throw TypeError("Invalid UUID");let rt;const it=new Uint8Array(16);return it[0]=(rt=parseInt(nt.slice(0,8),16))>>>24,it[1]=rt>>>16&255,it[2]=rt>>>8&255,it[3]=rt&255,it[4]=(rt=parseInt(nt.slice(9,13),16))>>>8,it[5]=rt&255,it[6]=(rt=parseInt(nt.slice(14,18),16))>>>8,it[7]=rt&255,it[8]=(rt=parseInt(nt.slice(19,23),16))>>>8,it[9]=rt&255,it[10]=(rt=parseInt(nt.slice(24,36),16))/1099511627776&255,it[11]=rt/4294967296&255,it[12]=rt>>>24&255,it[13]=rt>>>16&255,it[14]=rt>>>8&255,it[15]=rt&255,it}function stringToBytes(nt){nt=unescape(encodeURIComponent(nt));const rt=[];for(let it=0;it<nt.length;++it)rt.push(nt.charCodeAt(it));return rt}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(nt,rt,it){function st(_t,xt,Et,kt){var Lt;if(typeof _t=="string"&&(_t=stringToBytes(_t)),typeof xt=="string"&&(xt=parse$2(xt)),((Lt=xt)===null||Lt===void 0?void 0:Lt.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let It=new Uint8Array(16+_t.length);if(It.set(xt),It.set(_t,xt.length),It=it(It),It[6]=It[6]&15|rt,It[8]=It[8]&63|128,Et){kt=kt||0;for(let Rt=0;Rt<16;++Rt)Et[kt+Rt]=It[Rt];return Et}return unsafeStringify(It)}try{st.name=nt}catch{}return st.DNS=DNS,st.URL=URL$1,st}function f(nt,rt,it,st){switch(nt){case 0:return rt&it^~rt&st;case 1:return rt^it^st;case 2:return rt&it^rt&st^it&st;case 3:return rt^it^st}}function ROTL(nt,rt){return nt<<rt|nt>>>32-rt}function sha1(nt){const rt=[1518500249,1859775393,2400959708,3395469782],it=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof nt=="string"){const Et=unescape(encodeURIComponent(nt));nt=[];for(let kt=0;kt<Et.length;++kt)nt.push(Et.charCodeAt(kt))}else Array.isArray(nt)||(nt=Array.prototype.slice.call(nt));nt.push(128);const st=nt.length/4+2,_t=Math.ceil(st/16),xt=new Array(_t);for(let Et=0;Et<_t;++Et){const kt=new Uint32Array(16);for(let Lt=0;Lt<16;++Lt)kt[Lt]=nt[Et*64+Lt*4]<<24|nt[Et*64+Lt*4+1]<<16|nt[Et*64+Lt*4+2]<<8|nt[Et*64+Lt*4+3];xt[Et]=kt}xt[_t-1][14]=(nt.length-1)*8/Math.pow(2,32),xt[_t-1][14]=Math.floor(xt[_t-1][14]),xt[_t-1][15]=(nt.length-1)*8&4294967295;for(let Et=0;Et<_t;++Et){const kt=new Uint32Array(80);for(let Ft=0;Ft<16;++Ft)kt[Ft]=xt[Et][Ft];for(let Ft=16;Ft<80;++Ft)kt[Ft]=ROTL(kt[Ft-3]^kt[Ft-8]^kt[Ft-14]^kt[Ft-16],1);let Lt=it[0],It=it[1],Rt=it[2],Nt=it[3],Bt=it[4];for(let Ft=0;Ft<80;++Ft){const Yt=Math.floor(Ft/20),Zt=ROTL(Lt,5)+f(Yt,It,Rt,Nt)+Bt+rt[Yt]+kt[Ft]>>>0;Bt=Nt,Nt=Rt,Rt=ROTL(It,30)>>>0,It=Lt,Lt=Zt}it[0]=it[0]+Lt>>>0,it[1]=it[1]+It>>>0,it[2]=it[2]+Rt>>>0,it[3]=it[3]+Nt>>>0,it[4]=it[4]+Bt>>>0}return[it[0]>>24&255,it[0]>>16&255,it[0]>>8&255,it[0]&255,it[1]>>24&255,it[1]>>16&255,it[1]>>8&255,it[1]&255,it[2]>>24&255,it[2]>>16&255,it[2]>>8&255,it[2]&255,it[3]>>24&255,it[3]>>16&255,it[3]>>8&255,it[3]&255,it[4]>>24&255,it[4]>>16&255,it[4]>>8&255,it[4]&255]}const v5=v35("v5",80,sha1),v5$1=v5;function isSubgraph(nt,rt){return!!nt.children(rt).length}function edgeToId(nt){return escapeId(nt.v)+":"+escapeId(nt.w)+":"+escapeId(nt.name)}var ID_DELIM=/:/g;function escapeId(nt){return nt?String(nt).replace(ID_DELIM,"\\:"):""}function applyStyle$1(nt,rt){rt&&nt.attr("style",rt)}function applyClass(nt,rt,it){rt&&nt.attr("class",rt).attr("class",it+" "+nt.attr("class"))}function applyTransition(nt,rt){var it=rt.graph();if(isPlainObject(it)){var st=it.transition;if(isFunction(st))return st(nt)}return nt}var arrows={normal,vee,undirected};function setArrows(nt){arrows=nt}function normal(nt,rt,it,st){var _t=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),xt=_t.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(xt,it[st+"Style"]),it[st+"Class"]&&xt.attr("class",it[st+"Class"])}function vee(nt,rt,it,st){var _t=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),xt=_t.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(xt,it[st+"Style"]),it[st+"Class"]&&xt.attr("class",it[st+"Class"])}function undirected(nt,rt,it,st){var _t=nt.append("marker").attr("id",rt).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),xt=_t.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle$1(xt,it[st+"Style"]),it[st+"Class"]&&xt.attr("class",it[st+"Class"])}function addHtmlLabel$1(nt,rt){var it=nt.append("foreignObject").attr("width","100000"),st=it.append("xhtml:div");st.attr("xmlns","http://www.w3.org/1999/xhtml");var _t=rt.label;switch(typeof _t){case"function":st.insert(_t);break;case"object":st.insert(function(){return _t});break;default:st.html(_t)}applyStyle$1(st,rt.labelStyle),st.style("display","inline-block"),st.style("white-space","nowrap");var xt=st.node().getBoundingClientRect();return it.attr("width",xt.width).attr("height",xt.height),it}function addSVGLabel(nt,rt){var it=nt;return it.node().appendChild(rt.label),applyStyle$1(it,rt.labelStyle),it}function addTextLabel(nt,rt){for(var it=nt.append("text"),st=processEscapeSequences(rt.label).split(`
`),_t=0;_t<st.length;_t++)it.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(st[_t]);return applyStyle$1(it,rt.labelStyle),it}function processEscapeSequences(nt){for(var rt="",it=!1,st,_t=0;_t<nt.length;++_t)if(st=nt[_t],it){switch(st){case"n":rt+=`
`;break;default:rt+=st}it=!1}else st==="\\"?it=!0:rt+=st;return rt}function addLabel(nt,rt,it){var st=rt.label,_t=nt.append("g");rt.labelType==="svg"?addSVGLabel(_t,rt):typeof st!="string"||rt.labelType==="html"?addHtmlLabel$1(_t,rt):addTextLabel(_t,rt);var xt=_t.node().getBBox(),Et;switch(it){case"top":Et=-rt.height/2;break;case"bottom":Et=rt.height/2-xt.height;break;default:Et=-xt.height/2}return _t.attr("transform","translate("+-xt.width/2+","+Et+")"),_t}var createClusters=function(nt,rt){var it=rt.nodes().filter(function(xt){return isSubgraph(rt,xt)}),st=nt.selectAll("g.cluster").data(it,function(xt){return xt});applyTransition(st.exit(),rt).style("opacity",0).remove();var _t=st.enter().append("g").attr("class","cluster").attr("id",function(xt){var Et=rt.node(xt);return Et.id}).style("opacity",0).each(function(xt){var Et=rt.node(xt),kt=select(this);select(this).append("rect");var Lt=kt.append("g").attr("class","label");addLabel(Lt,Et,Et.clusterLabelPos)});return st=st.merge(_t),st=applyTransition(st,rt).style("opacity",1),st.selectAll("rect").each(function(xt){var Et=rt.node(xt),kt=select(this);applyStyle$1(kt,Et.style)}),st};function setCreateClusters(nt){createClusters=nt}let createEdgeLabels=function(nt,rt){var it=nt.selectAll("g.edgeLabel").data(rt.edges(),function(_t){return edgeToId(_t)}).classed("update",!0);it.exit().remove(),it.enter().append("g").classed("edgeLabel",!0).style("opacity",0),it=nt.selectAll("g.edgeLabel"),it.each(function(_t){var xt=select(this);xt.select(".label").remove();var Et=rt.edge(_t),kt=addLabel(xt,rt.edge(_t),0).classed("label",!0),Lt=kt.node().getBBox();Et.labelId&&kt.attr("id",Et.labelId),has(Et,"width")||(Et.width=Lt.width),has(Et,"height")||(Et.height=Lt.height)});var st;return it.exit?st=it.exit():st=it.selectAll(null),applyTransition(st,rt).style("opacity",0).remove(),it};function setCreateEdgeLabels(nt){createEdgeLabels=nt}function intersectNode$1(nt,rt){return nt.intersect(rt)}var createEdgePaths=function(nt,rt,it){var st=nt.selectAll("g.edgePath").data(rt.edges(),function(Et){return edgeToId(Et)}).classed("update",!0),_t=enter(st,rt);exit(st,rt);var xt=st.merge!==void 0?st.merge(_t):st;return applyTransition(xt,rt).style("opacity",1),xt.each(function(Et){var kt=select(this),Lt=rt.edge(Et);Lt.elem=this,Lt.id&&kt.attr("id",Lt.id),applyClass(kt,Lt.class,(kt.classed("update")?"update ":"")+"edgePath")}),xt.selectAll("path.path").each(function(Et){var kt=rt.edge(Et);kt.arrowheadId=uniqueId("arrowhead");var Lt=select(this).attr("marker-end",function(){return"url("+makeFragmentRef(location.href,kt.arrowheadId)+")"}).style("fill","none");applyTransition(Lt,rt).attr("d",function(It){return calcPoints(rt,It)}),applyStyle$1(Lt,kt.style)}),xt.selectAll("defs *").remove(),xt.selectAll("defs").each(function(Et){var kt=rt.edge(Et),Lt=it[kt.arrowhead];Lt(select(this),kt.arrowheadId,kt,"arrowhead")}),xt};function setCreateEdgePaths(nt){createEdgePaths=nt}function makeFragmentRef(nt,rt){var it=nt.split("#")[0];return it+"#"+rt}function calcPoints(nt,rt){var it=nt.edge(rt),st=nt.node(rt.v),_t=nt.node(rt.w),xt=it.points.slice(1,it.points.length-1);return xt.unshift(intersectNode$1(st,xt[0])),xt.push(intersectNode$1(_t,xt[xt.length-1])),createLine(it,xt)}function createLine(nt,rt){var it=(line$1||svg$2.line)().x(function(st){return st.x}).y(function(st){return st.y});return(it.curve||it.interpolate)(nt.curve),it(rt)}function getCoords(nt){var rt=nt.getBBox(),it=nt.ownerSVGElement.getScreenCTM().inverse().multiply(nt.getScreenCTM()).translate(rt.width/2,rt.height/2);return{x:it.e,y:it.f}}function enter(nt,rt){var it=nt.enter().append("g").attr("class","edgePath").style("opacity",0);return it.append("path").attr("class","path").attr("d",function(st){var _t=rt.edge(st),xt=rt.node(st.v).elem,Et=range$1(_t.points.length).map(function(){return getCoords(xt)});return createLine(_t,Et)}),it.append("defs"),it}function exit(nt,rt){var it=nt.exit();applyTransition(it,rt).style("opacity",0).remove()}var createNodes=function(nt,rt,it){var st=rt.nodes().filter(function(Et){return!isSubgraph(rt,Et)}),_t=nt.selectAll("g.node").data(st,function(Et){return Et}).classed("update",!0);_t.exit().remove(),_t.enter().append("g").attr("class","node").style("opacity",0),_t=nt.selectAll("g.node"),_t.each(function(Et){var kt=rt.node(Et),Lt=select(this);applyClass(Lt,kt.class,(Lt.classed("update")?"update ":"")+"node"),Lt.select("g.label").remove();var It=Lt.append("g").attr("class","label"),Rt=addLabel(It,kt),Nt=it[kt.shape],Bt=pick$1(Rt.node().getBBox(),"width","height");kt.elem=this,kt.id&&Lt.attr("id",kt.id),kt.labelId&&It.attr("id",kt.labelId),has(kt,"width")&&(Bt.width=kt.width),has(kt,"height")&&(Bt.height=kt.height),Bt.width+=kt.paddingLeft+kt.paddingRight,Bt.height+=kt.paddingTop+kt.paddingBottom,It.attr("transform","translate("+(kt.paddingLeft-kt.paddingRight)/2+","+(kt.paddingTop-kt.paddingBottom)/2+")");var Ft=select(this);Ft.select(".label-container").remove();var Yt=Nt(Ft,Bt,kt).classed("label-container",!0);applyStyle$1(Yt,kt.style);var Zt=Yt.node().getBBox();kt.width=Zt.width,kt.height=Zt.height});var xt;return _t.exit?xt=_t.exit():xt=_t.selectAll(null),applyTransition(xt,rt).style("opacity",0).remove(),_t};function setCreateNodes(nt){createNodes=nt}function positionClusters(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(_t){var xt=rt.node(_t);return"translate("+xt.x+","+xt.y+")"}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st),applyTransition(it.selectAll("rect"),rt).attr("width",function(_t){return rt.node(_t).width}).attr("height",function(_t){return rt.node(_t).height}).attr("x",function(_t){var xt=rt.node(_t);return-xt.width/2}).attr("y",function(_t){var xt=rt.node(_t);return-xt.height/2})}function positionEdgeLabels(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(_t){var xt=rt.edge(_t);return has(xt,"x")?"translate("+xt.x+","+xt.y+")":""}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st)}function positionNodes(nt,rt){var it=nt.filter(function(){return!select(this).classed("update")});function st(_t){var xt=rt.node(_t);return"translate("+xt.x+","+xt.y+")"}it.attr("transform",st),applyTransition(nt,rt).style("opacity",1).attr("transform",st)}function intersectEllipse$1(nt,rt,it,st){var _t=nt.x,xt=nt.y,Et=_t-st.x,kt=xt-st.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Et*Et),It=Math.abs(rt*it*Et/Lt);st.x<_t&&(It=-It);var Rt=Math.abs(rt*it*kt/Lt);return st.y<xt&&(Rt=-Rt),{x:_t+It,y:xt+Rt}}function intersectCircle$1(nt,rt,it){return intersectEllipse$1(nt,rt,rt,it)}function intersectLine$1(nt,rt,it,st){var _t,xt,Et,kt,Lt,It,Rt,Nt,Bt,Ft,Yt,Zt,Wt,Kt,Jt;if(_t=rt.y-nt.y,Et=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Bt=_t*it.x+Et*it.y+Lt,Ft=_t*st.x+Et*st.y+Lt,!(Bt!==0&&Ft!==0&&sameSign$1(Bt,Ft))&&(xt=st.y-it.y,kt=it.x-st.x,It=st.x*it.y-it.x*st.y,Rt=xt*nt.x+kt*nt.y+It,Nt=xt*rt.x+kt*rt.y+It,!(Rt!==0&&Nt!==0&&sameSign$1(Rt,Nt))&&(Yt=_t*kt-xt*Et,Yt!==0)))return Zt=Math.abs(Yt/2),Wt=Et*It-kt*Lt,Kt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,Wt=xt*Lt-_t*It,Jt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,{x:Kt,y:Jt}}function sameSign$1(nt,rt){return nt*rt>0}function intersectPolygon$1(nt,rt,it){var st=nt.x,_t=nt.y,xt=[],Et=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;rt.forEach(function(Yt){Et=Math.min(Et,Yt.x),kt=Math.min(kt,Yt.y)});for(var Lt=st-nt.width/2-Et,It=_t-nt.height/2-kt,Rt=0;Rt<rt.length;Rt++){var Nt=rt[Rt],Bt=rt[Rt<rt.length-1?Rt+1:0],Ft=intersectLine$1(nt,it,{x:Lt+Nt.x,y:It+Nt.y},{x:Lt+Bt.x,y:It+Bt.y});Ft&&xt.push(Ft)}return xt.length?(xt.length>1&&xt.sort(function(Yt,Zt){var Wt=Yt.x-it.x,Kt=Yt.y-it.y,Jt=Math.sqrt(Wt*Wt+Kt*Kt),on=Zt.x-it.x,rn=Zt.y-it.y,ln=Math.sqrt(on*on+rn*rn);return Jt<ln?-1:Jt===ln?0:1}),xt[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",nt),nt)}function intersectRect$2(nt,rt){var it=nt.x,st=nt.y,_t=rt.x-it,xt=rt.y-st,Et=nt.width/2,kt=nt.height/2,Lt,It;return Math.abs(xt)*Et>Math.abs(_t)*kt?(xt<0&&(kt=-kt),Lt=xt===0?0:kt*_t/xt,It=kt):(_t<0&&(Et=-Et),Lt=Et,It=_t===0?0:Et*xt/_t),{x:it+Lt,y:st+It}}var shapes$2={rect:rect$2,ellipse,circle:circle$2,diamond};function setShapes(nt){shapes$2=nt}function rect$2(nt,rt,it){var st=nt.insert("rect",":first-child").attr("rx",it.rx).attr("ry",it.ry).attr("x",-rt.width/2).attr("y",-rt.height/2).attr("width",rt.width).attr("height",rt.height);return it.intersect=function(_t){return intersectRect$2(it,_t)},st}function ellipse(nt,rt,it){var st=rt.width/2,_t=rt.height/2,xt=nt.insert("ellipse",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("rx",st).attr("ry",_t);return it.intersect=function(Et){return intersectEllipse$1(it,st,_t,Et)},xt}function circle$2(nt,rt,it){var st=Math.max(rt.width,rt.height)/2,_t=nt.insert("circle",":first-child").attr("x",-rt.width/2).attr("y",-rt.height/2).attr("r",st);return it.intersect=function(xt){return intersectCircle$1(it,st,xt)},_t}function diamond(nt,rt,it){var st=rt.width*Math.SQRT2/2,_t=rt.height*Math.SQRT2/2,xt=[{x:0,y:-_t},{x:-st,y:0},{x:0,y:_t},{x:st,y:0}],Et=nt.insert("polygon",":first-child").attr("points",xt.map(function(kt){return kt.x+","+kt.y}).join(" "));return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function render$2(){var nt=function(rt,it){preProcessGraph(it);var st=createOrSelectGroup(rt,"output"),_t=createOrSelectGroup(st,"clusters"),xt=createOrSelectGroup(st,"edgePaths"),Et=createEdgeLabels(createOrSelectGroup(st,"edgeLabels"),it),kt=createNodes(createOrSelectGroup(st,"nodes"),it,shapes$2);layout(it),positionNodes(kt,it),positionEdgeLabels(Et,it),createEdgePaths(xt,it,arrows);var Lt=createClusters(_t,it);positionClusters(Lt,it),postProcessGraph(it)};return nt.createNodes=function(rt){return arguments.length?(setCreateNodes(rt),nt):createNodes},nt.createClusters=function(rt){return arguments.length?(setCreateClusters(rt),nt):createClusters},nt.createEdgeLabels=function(rt){return arguments.length?(setCreateEdgeLabels(rt),nt):createEdgeLabels},nt.createEdgePaths=function(rt){return arguments.length?(setCreateEdgePaths(rt),nt):createEdgePaths},nt.shapes=function(rt){return arguments.length?(setShapes(rt),nt):shapes$2},nt.arrows=function(rt){return arguments.length?(setArrows(rt),nt):arrows},nt}var NODE_DEFAULT_ATTRS={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},EDGE_DEFAULT_ATTRS={arrowhead:"normal",curve:curveLinear};function preProcessGraph(nt){nt.nodes().forEach(function(rt){var it=nt.node(rt);!has(it,"label")&&!nt.children(rt).length&&(it.label=rt),has(it,"paddingX")&&defaults$1(it,{paddingLeft:it.paddingX,paddingRight:it.paddingX}),has(it,"paddingY")&&defaults$1(it,{paddingTop:it.paddingY,paddingBottom:it.paddingY}),has(it,"padding")&&defaults$1(it,{paddingLeft:it.padding,paddingRight:it.padding,paddingTop:it.padding,paddingBottom:it.padding}),defaults$1(it,NODE_DEFAULT_ATTRS),forEach(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(st){it[st]=Number(it[st])}),has(it,"width")&&(it._prevWidth=it.width),has(it,"height")&&(it._prevHeight=it.height)}),nt.edges().forEach(function(rt){var it=nt.edge(rt);has(it,"label")||(it.label=""),defaults$1(it,EDGE_DEFAULT_ATTRS)})}function postProcessGraph(nt){forEach(nt.nodes(),function(rt){var it=nt.node(rt);has(it,"_prevWidth")?it.width=it._prevWidth:delete it.width,has(it,"_prevHeight")?it.height=it._prevHeight:delete it.height,delete it._prevWidth,delete it._prevHeight})}function createOrSelectGroup(nt,rt){var it=nt.select("g."+rt);return it.empty()&&(it=nt.append("g").attr("class",rt)),it}var isoWeek={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){var it="day";return function(st,_t,xt){var Et=function(It){return It.add(4-It.isoWeekday(),it)},kt=_t.prototype;kt.isoWeekYear=function(){return Et(this).year()},kt.isoWeek=function(It){if(!this.$utils().u(It))return this.add(7*(It-this.isoWeek()),it);var Rt,Nt,Bt,Ft,Yt=Et(this),Zt=(Rt=this.isoWeekYear(),Nt=this.$u,Bt=(Nt?xt.utc:xt)().year(Rt).startOf("year"),Ft=4-Bt.isoWeekday(),Bt.isoWeekday()>4&&(Ft+=7),Bt.add(Ft,it));return Yt.diff(Zt,"week")+1},kt.isoWeekday=function(It){return this.$utils().u(It)?this.day()||7:this.day(this.day()%7?It:It-7)};var Lt=kt.startOf;kt.startOf=function(It,Rt){var Nt=this.$utils(),Bt=!!Nt.u(Rt)||Rt;return Nt.p(It)==="isoweek"?Bt?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):Lt.bind(this)(It,Rt)}}})})(isoWeek);const dayjsIsoWeek=isoWeek.exports;var customParseFormat={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){var it={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},st=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,_t=/\d/,xt=/\d\d/,Et=/\d\d?/,kt=/\d*[^-_:/,()\s\d]+/,Lt={},It=function(Wt){return(Wt=+Wt)+(Wt>68?1900:2e3)},Rt=function(Wt){return function(Kt){this[Wt]=+Kt}},Nt=[/[+-]\d\d:?(\d\d)?|Z/,function(Wt){(this.zone||(this.zone={})).offset=function(Kt){if(!Kt||Kt==="Z")return 0;var Jt=Kt.match(/([+-]|\d\d)/g),on=60*Jt[1]+(+Jt[2]||0);return on===0?0:Jt[0]==="+"?-on:on}(Wt)}],Bt=function(Wt){var Kt=Lt[Wt];return Kt&&(Kt.indexOf?Kt:Kt.s.concat(Kt.f))},Ft=function(Wt,Kt){var Jt,on=Lt.meridiem;if(on){for(var rn=1;rn<=24;rn+=1)if(Wt.indexOf(on(rn,0,Kt))>-1){Jt=rn>12;break}}else Jt=Wt===(Kt?"pm":"PM");return Jt},Yt={A:[kt,function(Wt){this.afternoon=Ft(Wt,!1)}],a:[kt,function(Wt){this.afternoon=Ft(Wt,!0)}],Q:[_t,function(Wt){this.month=3*(Wt-1)+1}],S:[_t,function(Wt){this.milliseconds=100*+Wt}],SS:[xt,function(Wt){this.milliseconds=10*+Wt}],SSS:[/\d{3}/,function(Wt){this.milliseconds=+Wt}],s:[Et,Rt("seconds")],ss:[Et,Rt("seconds")],m:[Et,Rt("minutes")],mm:[Et,Rt("minutes")],H:[Et,Rt("hours")],h:[Et,Rt("hours")],HH:[Et,Rt("hours")],hh:[Et,Rt("hours")],D:[Et,Rt("day")],DD:[xt,Rt("day")],Do:[kt,function(Wt){var Kt=Lt.ordinal,Jt=Wt.match(/\d+/);if(this.day=Jt[0],Kt)for(var on=1;on<=31;on+=1)Kt(on).replace(/\[|\]/g,"")===Wt&&(this.day=on)}],w:[Et,Rt("week")],ww:[xt,Rt("week")],M:[Et,Rt("month")],MM:[xt,Rt("month")],MMM:[kt,function(Wt){var Kt=Bt("months"),Jt=(Bt("monthsShort")||Kt.map(function(on){return on.slice(0,3)})).indexOf(Wt)+1;if(Jt<1)throw new Error;this.month=Jt%12||Jt}],MMMM:[kt,function(Wt){var Kt=Bt("months").indexOf(Wt)+1;if(Kt<1)throw new Error;this.month=Kt%12||Kt}],Y:[/[+-]?\d+/,Rt("year")],YY:[xt,function(Wt){this.year=It(Wt)}],YYYY:[/\d{4}/,Rt("year")],Z:Nt,ZZ:Nt};function Zt(Wt){var Kt,Jt;Kt=Wt,Jt=Lt&&Lt.formats;for(var on=(Wt=Kt.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Pn,An,cn){var Ln=cn&&cn.toUpperCase();return An||Jt[cn]||it[cn]||Jt[Ln].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(an,zn,dn){return zn||dn.slice(1)})})).match(st),rn=on.length,ln=0;ln<rn;ln+=1){var gn=on[ln],wn=Yt[gn],kn=wn&&wn[0],Cn=wn&&wn[1];on[ln]=Cn?{regex:kn,parser:Cn}:gn.replace(/^\[|\]$/g,"")}return function(Pn){for(var An={},cn=0,Ln=0;cn<rn;cn+=1){var an=on[cn];if(typeof an=="string")Ln+=an.length;else{var zn=an.regex,dn=an.parser,Fn=Pn.slice(Ln),ir=zn.exec(Fn)[0];dn.call(An,ir),Pn=Pn.replace(ir,"")}}return function(tr){var Jn=tr.afternoon;if(Jn!==void 0){var hr=tr.hours;Jn?hr<12&&(tr.hours+=12):hr===12&&(tr.hours=0),delete tr.afternoon}}(An),An}}return function(Wt,Kt,Jt){Jt.p.customParseFormat=!0,Wt&&Wt.parseTwoDigitYear&&(It=Wt.parseTwoDigitYear);var on=Kt.prototype,rn=on.parse;on.parse=function(ln){var gn=ln.date,wn=ln.utc,kn=ln.args;this.$u=wn;var Cn=kn[1];if(typeof Cn=="string"){var Pn=kn[2]===!0,An=kn[3]===!0,cn=Pn||An,Ln=kn[2];An&&(Ln=kn[2]),Lt=this.$locale(),!Pn&&Ln&&(Lt=Jt.Ls[Ln]),this.$d=function(Fn,ir,tr,Jn){try{if(["x","X"].indexOf(ir)>-1)return new Date((ir==="X"?1e3:1)*Fn);var hr=Zt(ir)(Fn),lr=hr.year,cr=hr.month,Cr=hr.day,Er=hr.hours,ar=hr.minutes,Fr=hr.seconds,mr=hr.milliseconds,xr=hr.zone,fr=hr.week,gr=new Date,er=Cr||(lr||cr?1:gr.getDate()),nn=lr||gr.getFullYear(),un=0;lr&&!cr||(un=cr>0?cr-1:gr.getMonth());var pn,Rn=Er||0,_n=ar||0,or=Fr||0,Vn=mr||0;return xr?new Date(Date.UTC(nn,un,er,Rn,_n,or,Vn+60*xr.offset*1e3)):tr?new Date(Date.UTC(nn,un,er,Rn,_n,or,Vn)):(pn=new Date(nn,un,er,Rn,_n,or,Vn),fr&&(pn=Jn(pn).week(fr).toDate()),pn)}catch{return new Date("")}}(gn,Cn,wn,Jt),this.init(),Ln&&Ln!==!0&&(this.$L=this.locale(Ln).$L),cn&&gn!=this.format(Cn)&&(this.$d=new Date("")),Lt={}}else if(Cn instanceof Array)for(var an=Cn.length,zn=1;zn<=an;zn+=1){kn[1]=Cn[zn-1];var dn=Jt.apply(this,kn);if(dn.isValid()){this.$d=dn.$d,this.$L=dn.$L,this.init();break}zn===an&&(this.$d=new Date(""))}else rn.call(this,ln)}}})})(customParseFormat);const dayjsCustomParseFormat=customParseFormat.exports;var advancedFormat={exports:{}};(function(nt,rt){(function(it,st){nt.exports=st()})(commonjsGlobal$1,function(){return function(it,st){var _t=st.prototype,xt=_t.format;_t.format=function(Et){var kt=this,Lt=this.$locale();if(!this.isValid())return xt.bind(this)(Et);var It=this.$utils(),Rt=(Et||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(Nt){switch(Nt){case"Q":return Math.ceil((kt.$M+1)/3);case"Do":return Lt.ordinal(kt.$D);case"gggg":return kt.weekYear();case"GGGG":return kt.isoWeekYear();case"wo":return Lt.ordinal(kt.week(),"W");case"w":case"ww":return It.s(kt.week(),Nt==="w"?1:2,"0");case"W":case"WW":return It.s(kt.isoWeek(),Nt==="W"?1:2,"0");case"k":case"kk":return It.s(String(kt.$H===0?24:kt.$H),Nt==="k"?1:2,"0");case"X":return Math.floor(kt.$d.getTime()/1e3);case"x":return kt.$d.getTime();case"z":return"["+kt.offsetName()+"]";case"zzz":return"["+kt.offsetName("long")+"]";default:return Nt}});return xt.bind(this)(Rt)}}})})(advancedFormat);const dayjsAdvancedFormat=advancedFormat.exports,LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log$1={trace:(...nt)=>{},debug:(...nt)=>{},info:(...nt)=>{},warn:(...nt)=>{},error:(...nt)=>{},fatal:(...nt)=>{}},setLogLevel$1=function(nt="fatal"){let rt=LEVELS.fatal;typeof nt=="string"?(nt=nt.toLowerCase(),nt in LEVELS&&(rt=LEVELS[nt])):typeof nt=="number"&&(rt=nt),log$1.trace=()=>{},log$1.debug=()=>{},log$1.info=()=>{},log$1.warn=()=>{},log$1.error=()=>{},log$1.fatal=()=>{},rt<=LEVELS.fatal&&(log$1.fatal=console.error?console.error.bind(console,format("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",format("FATAL"))),rt<=LEVELS.error&&(log$1.error=console.error?console.error.bind(console,format("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",format("ERROR"))),rt<=LEVELS.warn&&(log$1.warn=console.warn?console.warn.bind(console,format("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",format("WARN"))),rt<=LEVELS.info&&(log$1.info=console.info?console.info.bind(console,format("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",format("INFO"))),rt<=LEVELS.debug&&(log$1.debug=console.debug?console.debug.bind(console,format("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("DEBUG"))),rt<=LEVELS.trace&&(log$1.trace=console.debug?console.debug.bind(console,format("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("TRACE")))},format=nt=>`%c${dayjs().format("ss.SSS")} : ${nt} : `,getRows=nt=>nt?breakToPlaceholder(nt).replace(/\\n/g,"#br#").split("#br#"):[""],removeScript=nt=>purify.sanitize(nt),sanitizeMore=(nt,rt)=>{var it;if(((it=rt.flowchart)==null?void 0:it.htmlLabels)!==!1){const st=rt.securityLevel;st==="antiscript"||st==="strict"?nt=removeScript(nt):st!=="loose"&&(nt=breakToPlaceholder(nt),nt=nt.replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=nt.replace(/=/g,"&equals;"),nt=placeholderToBreak(nt))}return nt},sanitizeText$5=(nt,rt)=>nt&&(rt.dompurifyConfig?nt=purify.sanitize(sanitizeMore(nt,rt),rt.dompurifyConfig).toString():nt=purify.sanitize(sanitizeMore(nt,rt),{FORBID_TAGS:["style"]}).toString(),nt),sanitizeTextOrArray=(nt,rt)=>typeof nt=="string"?sanitizeText$5(nt,rt):nt.flat().map(it=>sanitizeText$5(it,rt)),lineBreakRegex=/<br\s*\/?>/gi,hasBreaks=nt=>lineBreakRegex.test(nt),splitBreaks=nt=>nt.split(lineBreakRegex),placeholderToBreak=nt=>nt.replace(/#br#/g,"<br/>"),breakToPlaceholder=nt=>nt.replace(lineBreakRegex,"#br#"),getUrl=nt=>{let rt="";return nt&&(rt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,rt=rt.replaceAll(/\(/g,"\\("),rt=rt.replaceAll(/\)/g,"\\)")),rt},evaluate=nt=>!(nt===!1||["false","null","0"].includes(String(nt).trim().toLowerCase())),parseGenericTypes=function(nt){let rt=nt;if(nt.split("~").length-1>=2){let it=rt;do rt=it,it=rt.replace(/~([^\s,:;]+)~/,"<$1>");while(it!=rt);return parseGenericTypes(it)}else return rt},common$1={getRows,sanitizeText:sanitizeText$5,sanitizeTextOrArray,hasBreaks,splitBreaks,lineBreakRegex,removeScript,getUrl,evaluate},mkBorder=(nt,rt)=>rt?adjust$2(nt,{s:-40,l:10}):adjust$2(nt,{s:-40,l:-10}),oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2";let Theme$4=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust$2(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust$2(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert$1(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert$1(this.tertiaryColor),this.lineColor=this.lineColor||invert$1(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken$1(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert$1(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten$1(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this.darkMode)for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScale"+it]=darken$1(this["cScale"+it],75);else for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScale"+it]=darken$1(this["cScale"+it],25);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleInv"+it]=this["cScaleInv"+it]||invert$1(this["cScale"+it]);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this.darkMode?this["cScalePeer"+it]=this["cScalePeer"+it]||lighten$1(this["cScale"+it],10):this["cScalePeer"+it]=this["cScalePeer"+it]||darken$1(this["cScale"+it],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleLabel"+it]=this["cScaleLabel"+it]||this.scaleLabelColor;const rt=this.darkMode?-4:-1;for(let it=0;it<5;it++)this["surface"+it]=this["surface"+it]||adjust$2(this.mainBkg,{h:180,s:-15,l:rt*(5+it*3)}),this["surfacePeer"+it]=this["surfacePeer"+it]||adjust$2(this.mainBkg,{h:180,s:-15,l:rt*(8+it*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust$2(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust$2(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust$2(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust$2(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust$2(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$4=nt=>{const rt=new Theme$4;return rt.calculate(nt),rt};let Theme$3=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten$1(this.primaryColor,16),this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=invert$1(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten$1(invert$1("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=rgba$1(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken$1("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=rgba$1(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba$1(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=lighten$1(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten$1(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten$1(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10);for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(-10+rt*4)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(-7+rt*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken$1(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten$1(this.secondaryColor,20),this.git1=lighten$1(this.pie2||this.secondaryColor,20),this.git2=lighten$1(this.pie3||this.tertiaryColor,20),this.git3=lighten$1(this.pie4||adjust$2(this.primaryColor,{h:-30}),20),this.git4=lighten$1(this.pie5||adjust$2(this.primaryColor,{h:-60}),20),this.git5=lighten$1(this.pie6||adjust$2(this.primaryColor,{h:-90}),10),this.git6=lighten$1(this.pie7||adjust$2(this.primaryColor,{h:60}),10),this.git7=lighten$1(this.pie8||adjust$2(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten$1(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten$1(this.background,2)}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$3=nt=>{const rt=new Theme$3;return rt.calculate(nt),rt};let Theme$2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust$2(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=rgba$1(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{h:30,l:-(5+rt*5)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{h:30,l:-(7+rt*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||invert$1(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert$1(this.labelTextColor);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust$2(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||darken$1(invert$1(this.git0),25),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert$1(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert$1(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$2=nt=>{const rt=new Theme$2;return rt.calculate(nt),rt};let Theme$1=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten$1("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.primaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust$2(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust$2(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust$2(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust$2(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust$2(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust$2(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust$2(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust$2(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust$2(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||darken$1(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||darken$1(this.tertiaryColor,40);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScale"+rt]=darken$1(this["cScale"+rt],10),this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],25);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||adjust$2(this["cScale"+rt],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(5+rt*5)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{h:30,s:-30,l:-(8+rt*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=darken$1(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust$2(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust$2(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust$2(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust$2(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust$2(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust$2(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust$2(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust$2(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust$2(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust$2(this.primaryColor,{h:-30}),this.git4=this.git4||adjust$2(this.primaryColor,{h:-60}),this.git5=this.git5||adjust$2(this.primaryColor,{h:-90}),this.git6=this.git6||adjust$2(this.primaryColor,{h:60}),this.git7=this.git7||adjust$2(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten$1(this.git0,25),this.git1=lighten$1(this.git1,25),this.git2=lighten$1(this.git2,25),this.git3=lighten$1(this.git3,25),this.git4=lighten$1(this.git4,25),this.git5=lighten$1(this.git5,25),this.git6=lighten$1(this.git6,25),this.git7=lighten$1(this.git7,25)):(this.git0=darken$1(this.git0,25),this.git1=darken$1(this.git1,25),this.git2=darken$1(this.git2,25),this.git3=darken$1(this.git3,25),this.git4=darken$1(this.git4,25),this.git5=darken$1(this.git5,25),this.git6=darken$1(this.git6,25),this.git7=darken$1(this.git7,25)),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}};const getThemeVariables$1=nt=>{const rt=new Theme$1;return rt.calculate(nt),rt};class Theme5{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten$1(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust$2(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert$1(this.primaryColor),this.secondaryTextColor=invert$1(this.secondaryColor),this.tertiaryTextColor=invert$1(this.tertiaryColor),this.lineColor=invert$1(this.background),this.textColor=invert$1(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=lighten$1(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleInv"+rt]=this["cScaleInv"+rt]||invert$1(this["cScale"+rt]);for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this.darkMode?this["cScalePeer"+rt]=this["cScalePeer"+rt]||lighten$1(this["cScale"+rt],10):this["cScalePeer"+rt]=this["cScalePeer"+rt]||darken$1(this["cScale"+rt],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["cScaleLabel"+rt]=this["cScaleLabel"+rt]||this.scaleLabelColor;for(let rt=0;rt<5;rt++)this["surface"+rt]=this["surface"+rt]||adjust$2(this.mainBkg,{l:-(5+rt*5)}),this["surfacePeer"+rt]=this["surfacePeer"+rt]||adjust$2(this.mainBkg,{l:-(8+rt*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=lighten$1(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=lighten$1(this.contrast,30),this.sectionBkgColor2=lighten$1(this.contrast,30),this.taskBorderColor=darken$1(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten$1(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken$1(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust$2(this.primaryColor,{h:64}),this.fillType3=adjust$2(this.secondaryColor,{h:64}),this.fillType4=adjust$2(this.primaryColor,{h:-64}),this.fillType5=adjust$2(this.secondaryColor,{h:-64}),this.fillType6=adjust$2(this.primaryColor,{h:128}),this.fillType7=adjust$2(this.secondaryColor,{h:128});for(let rt=0;rt<this.THEME_COLOR_LIMIT;rt++)this["pie"+rt]=this["cScale"+rt];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken$1(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust$2(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust$2(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust$2(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust$2(this.primaryColor,{h:60}),this.git7=this.pie8||adjust$2(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert$1(this.git0),this.gitInv1=this.gitInv1||invert$1(this.git1),this.gitInv2=this.gitInv2||invert$1(this.git2),this.gitInv3=this.gitInv3||invert$1(this.git3),this.gitInv4=this.gitInv4||invert$1(this.git4),this.gitInv5=this.gitInv5||invert$1(this.git5),this.gitInv6=this.gitInv6||invert$1(this.git6),this.gitInv7=this.gitInv7||invert$1(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(rt){if(typeof rt!="object"){this.updateColors();return}const it=Object.keys(rt);it.forEach(st=>{this[st]=rt[st]}),this.updateColors(),it.forEach(st=>{this[st]=rt[st]})}}const getThemeVariables=nt=>{const rt=new Theme5;return rt.calculate(nt),rt},theme={base:{getThemeVariables:getThemeVariables$4},dark:{getThemeVariables:getThemeVariables$3},default:{getThemeVariables:getThemeVariables$2},forest:{getThemeVariables:getThemeVariables$1},neutral:{getThemeVariables}},config$1={theme:"default",themeVariables:theme.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},timeline:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};config$1.class&&(config$1.class.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);config$1.gitGraph&&(config$1.gitGraph.arrowMarkerAbsolute=config$1.arrowMarkerAbsolute);const keyify=(nt,rt="")=>Object.keys(nt).reduce((it,st)=>Array.isArray(nt[st])?it:typeof nt[st]=="object"&&nt[st]!==null?[...it,rt+st,...keyify(nt[st],"")]:[...it,rt+st],[]),configKeys=keyify(config$1,""),config$2=config$1;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing(nt){return typeof nt>"u"||nt===null}function isObject(nt){return typeof nt=="object"&&nt!==null}function toArray(nt){return Array.isArray(nt)?nt:isNothing(nt)?[]:[nt]}function extend(nt,rt){var it,st,_t,xt;if(rt)for(xt=Object.keys(rt),it=0,st=xt.length;it<st;it+=1)_t=xt[it],nt[_t]=rt[_t];return nt}function repeat(nt,rt){var it="",st;for(st=0;st<rt;st+=1)it+=nt;return it}function isNegativeZero(nt){return nt===0&&Number.NEGATIVE_INFINITY===1/nt}var isNothing_1=isNothing,isObject_1=isObject,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(nt,rt){var it="",st=nt.reason||"(unknown reason)";return nt.mark?(nt.mark.name&&(it+='in "'+nt.mark.name+'" '),it+="("+(nt.mark.line+1)+":"+(nt.mark.column+1)+")",!rt&&nt.mark.snippet&&(it+=`

`+nt.mark.snippet),st+" "+it):st}function YAMLException$1(nt,rt){Error.call(this),this.name="YAMLException",this.reason=nt,this.mark=rt,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=function nt(rt){return this.name+": "+formatError(this,rt)};var exception=YAMLException$1;function getLine(nt,rt,it,st,_t){var xt="",Et="",kt=Math.floor(_t/2)-1;return st-rt>kt&&(xt=" ... ",rt=st-kt+xt.length),it-st>kt&&(Et=" ...",it=st+kt-Et.length),{str:xt+nt.slice(rt,it).replace(/\t/g,"\u2192")+Et,pos:st-rt+xt.length}}function padStart(nt,rt){return common.repeat(" ",rt-nt.length)+nt}function makeSnippet(nt,rt){if(rt=Object.create(rt||null),!nt.buffer)return null;rt.maxLength||(rt.maxLength=79),typeof rt.indent!="number"&&(rt.indent=1),typeof rt.linesBefore!="number"&&(rt.linesBefore=3),typeof rt.linesAfter!="number"&&(rt.linesAfter=2);for(var it=/\r?\n|\r|\0/g,st=[0],_t=[],xt,Et=-1;xt=it.exec(nt.buffer);)_t.push(xt.index),st.push(xt.index+xt[0].length),nt.position<=xt.index&&Et<0&&(Et=st.length-2);Et<0&&(Et=st.length-1);var kt="",Lt,It,Rt=Math.min(nt.line+rt.linesAfter,_t.length).toString().length,Nt=rt.maxLength-(rt.indent+Rt+3);for(Lt=1;Lt<=rt.linesBefore&&!(Et-Lt<0);Lt++)It=getLine(nt.buffer,st[Et-Lt],_t[Et-Lt],nt.position-(st[Et]-st[Et-Lt]),Nt),kt=common.repeat(" ",rt.indent)+padStart((nt.line-Lt+1).toString(),Rt)+" | "+It.str+`
`+kt;for(It=getLine(nt.buffer,st[Et],_t[Et],nt.position,Nt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+1).toString(),Rt)+" | "+It.str+`
`,kt+=common.repeat("-",rt.indent+Rt+3+It.pos)+`^
`,Lt=1;Lt<=rt.linesAfter&&!(Et+Lt>=_t.length);Lt++)It=getLine(nt.buffer,st[Et+Lt],_t[Et+Lt],nt.position-(st[Et]-st[Et+Lt]),Nt),kt+=common.repeat(" ",rt.indent)+padStart((nt.line+Lt+1).toString(),Rt)+" | "+It.str+`
`;return kt.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(nt){var rt={};return nt!==null&&Object.keys(nt).forEach(function(it){nt[it].forEach(function(st){rt[String(st)]=it})}),rt}function Type$1(nt,rt){if(rt=rt||{},Object.keys(rt).forEach(function(it){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(it)===-1)throw new exception('Unknown option "'+it+'" is met in definition of "'+nt+'" YAML type.')}),this.options=rt,this.tag=nt,this.kind=rt.kind||null,this.resolve=rt.resolve||function(){return!0},this.construct=rt.construct||function(it){return it},this.instanceOf=rt.instanceOf||null,this.predicate=rt.predicate||null,this.represent=rt.represent||null,this.representName=rt.representName||null,this.defaultStyle=rt.defaultStyle||null,this.multi=rt.multi||!1,this.styleAliases=compileStyleAliases(rt.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+nt+'" YAML type.')}var type=Type$1;function compileList(nt,rt){var it=[];return nt[rt].forEach(function(st){var _t=it.length;it.forEach(function(xt,Et){xt.tag===st.tag&&xt.kind===st.kind&&xt.multi===st.multi&&(_t=Et)}),it[_t]=st}),it}function compileMap(){var nt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},rt,it;function st(_t){_t.multi?(nt.multi[_t.kind].push(_t),nt.multi.fallback.push(_t)):nt[_t.kind][_t.tag]=nt.fallback[_t.tag]=_t}for(rt=0,it=arguments.length;rt<it;rt+=1)arguments[rt].forEach(st);return nt}function Schema$1(nt){return this.extend(nt)}Schema$1.prototype.extend=function nt(rt){var it=[],st=[];if(rt instanceof type)st.push(rt);else if(Array.isArray(rt))st=st.concat(rt);else if(rt&&(Array.isArray(rt.implicit)||Array.isArray(rt.explicit)))rt.implicit&&(it=it.concat(rt.implicit)),rt.explicit&&(st=st.concat(rt.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");it.forEach(function(xt){if(!(xt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(xt.loadKind&&xt.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(xt.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(xt){if(!(xt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var _t=Object.create(Schema$1.prototype);return _t.implicit=(this.implicit||[]).concat(it),_t.explicit=(this.explicit||[]).concat(st),_t.compiledImplicit=compileList(_t,"implicit"),_t.compiledExplicit=compileList(_t,"explicit"),_t.compiledTypeMap=compileMap(_t.compiledImplicit,_t.compiledExplicit),_t};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(nt){return nt!==null?nt:""}}),seq$1=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(nt){return nt!==null?nt:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(nt){return nt!==null?nt:{}}}),failsafe=new schema({explicit:[str,seq$1,map]});function resolveYamlNull(nt){if(nt===null)return!0;var rt=nt.length;return rt===1&&nt==="~"||rt===4&&(nt==="null"||nt==="Null"||nt==="NULL")}function constructYamlNull(){return null}function isNull(nt){return nt===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(nt){if(nt===null)return!1;var rt=nt.length;return rt===4&&(nt==="true"||nt==="True"||nt==="TRUE")||rt===5&&(nt==="false"||nt==="False"||nt==="FALSE")}function constructYamlBoolean(nt){return nt==="true"||nt==="True"||nt==="TRUE"}function isBoolean(nt){return Object.prototype.toString.call(nt)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(nt){return nt?"true":"false"},uppercase:function(nt){return nt?"TRUE":"FALSE"},camelcase:function(nt){return nt?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(nt){return 48<=nt&&nt<=57||65<=nt&&nt<=70||97<=nt&&nt<=102}function isOctCode(nt){return 48<=nt&&nt<=55}function isDecCode(nt){return 48<=nt&&nt<=57}function resolveYamlInteger(nt){if(nt===null)return!1;var rt=nt.length,it=0,st=!1,_t;if(!rt)return!1;if(_t=nt[it],(_t==="-"||_t==="+")&&(_t=nt[++it]),_t==="0"){if(it+1===rt)return!0;if(_t=nt[++it],_t==="b"){for(it++;it<rt;it++)if(_t=nt[it],_t!=="_"){if(_t!=="0"&&_t!=="1")return!1;st=!0}return st&&_t!=="_"}if(_t==="x"){for(it++;it<rt;it++)if(_t=nt[it],_t!=="_"){if(!isHexCode(nt.charCodeAt(it)))return!1;st=!0}return st&&_t!=="_"}if(_t==="o"){for(it++;it<rt;it++)if(_t=nt[it],_t!=="_"){if(!isOctCode(nt.charCodeAt(it)))return!1;st=!0}return st&&_t!=="_"}}if(_t==="_")return!1;for(;it<rt;it++)if(_t=nt[it],_t!=="_"){if(!isDecCode(nt.charCodeAt(it)))return!1;st=!0}return!(!st||_t==="_")}function constructYamlInteger(nt){var rt=nt,it=1,st;if(rt.indexOf("_")!==-1&&(rt=rt.replace(/_/g,"")),st=rt[0],(st==="-"||st==="+")&&(st==="-"&&(it=-1),rt=rt.slice(1),st=rt[0]),rt==="0")return 0;if(st==="0"){if(rt[1]==="b")return it*parseInt(rt.slice(2),2);if(rt[1]==="x")return it*parseInt(rt.slice(2),16);if(rt[1]==="o")return it*parseInt(rt.slice(2),8)}return it*parseInt(rt,10)}function isInteger(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&nt%1===0&&!common.isNegativeZero(nt)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(nt){return nt>=0?"0b"+nt.toString(2):"-0b"+nt.toString(2).slice(1)},octal:function(nt){return nt>=0?"0o"+nt.toString(8):"-0o"+nt.toString(8).slice(1)},decimal:function(nt){return nt.toString(10)},hexadecimal:function(nt){return nt>=0?"0x"+nt.toString(16).toUpperCase():"-0x"+nt.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(nt){return!(nt===null||!YAML_FLOAT_PATTERN.test(nt)||nt[nt.length-1]==="_")}function constructYamlFloat(nt){var rt,it;return rt=nt.replace(/_/g,"").toLowerCase(),it=rt[0]==="-"?-1:1,"+-".indexOf(rt[0])>=0&&(rt=rt.slice(1)),rt===".inf"?it===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:rt===".nan"?NaN:it*parseFloat(rt,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(nt,rt){var it;if(isNaN(nt))switch(rt){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===nt)switch(rt){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===nt)switch(rt){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(nt))return"-0.0";return it=nt.toString(10),SCIENTIFIC_WITHOUT_DOT.test(it)?it.replace("e",".e"):it}function isFloat(nt){return Object.prototype.toString.call(nt)==="[object Number]"&&(nt%1!==0||common.isNegativeZero(nt))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(nt){return nt===null?!1:YAML_DATE_REGEXP.exec(nt)!==null||YAML_TIMESTAMP_REGEXP.exec(nt)!==null}function constructYamlTimestamp(nt){var rt,it,st,_t,xt,Et,kt,Lt=0,It=null,Rt,Nt,Bt;if(rt=YAML_DATE_REGEXP.exec(nt),rt===null&&(rt=YAML_TIMESTAMP_REGEXP.exec(nt)),rt===null)throw new Error("Date resolve error");if(it=+rt[1],st=+rt[2]-1,_t=+rt[3],!rt[4])return new Date(Date.UTC(it,st,_t));if(xt=+rt[4],Et=+rt[5],kt=+rt[6],rt[7]){for(Lt=rt[7].slice(0,3);Lt.length<3;)Lt+="0";Lt=+Lt}return rt[9]&&(Rt=+rt[10],Nt=+(rt[11]||0),It=(Rt*60+Nt)*6e4,rt[9]==="-"&&(It=-It)),Bt=new Date(Date.UTC(it,st,_t,xt,Et,kt,Lt)),It&&Bt.setTime(Bt.getTime()-It),Bt}function representYamlTimestamp(nt){return nt.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(nt){return nt==="<<"||nt===null}var merge$1=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(nt){if(nt===null)return!1;var rt,it,st=0,_t=nt.length,xt=BASE64_MAP;for(it=0;it<_t;it++)if(rt=xt.indexOf(nt.charAt(it)),!(rt>64)){if(rt<0)return!1;st+=6}return st%8===0}function constructYamlBinary(nt){var rt,it,st=nt.replace(/[\r\n=]/g,""),_t=st.length,xt=BASE64_MAP,Et=0,kt=[];for(rt=0;rt<_t;rt++)rt%4===0&&rt&&(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)),Et=Et<<6|xt.indexOf(st.charAt(rt));return it=_t%4*6,it===0?(kt.push(Et>>16&255),kt.push(Et>>8&255),kt.push(Et&255)):it===18?(kt.push(Et>>10&255),kt.push(Et>>2&255)):it===12&&kt.push(Et>>4&255),new Uint8Array(kt)}function representYamlBinary(nt){var rt="",it=0,st,_t,xt=nt.length,Et=BASE64_MAP;for(st=0;st<xt;st++)st%3===0&&st&&(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]),it=(it<<8)+nt[st];return _t=xt%3,_t===0?(rt+=Et[it>>18&63],rt+=Et[it>>12&63],rt+=Et[it>>6&63],rt+=Et[it&63]):_t===2?(rt+=Et[it>>10&63],rt+=Et[it>>4&63],rt+=Et[it<<2&63],rt+=Et[64]):_t===1&&(rt+=Et[it>>2&63],rt+=Et[it<<4&63],rt+=Et[64],rt+=Et[64]),rt}function isBinary(nt){return Object.prototype.toString.call(nt)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(nt){if(nt===null)return!0;var rt=[],it,st,_t,xt,Et,kt=nt;for(it=0,st=kt.length;it<st;it+=1){if(_t=kt[it],Et=!1,_toString$2.call(_t)!=="[object Object]")return!1;for(xt in _t)if(_hasOwnProperty$3.call(_t,xt))if(!Et)Et=!0;else return!1;if(!Et)return!1;if(rt.indexOf(xt)===-1)rt.push(xt);else return!1}return!0}function constructYamlOmap(nt){return nt!==null?nt:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(nt){if(nt===null)return!0;var rt,it,st,_t,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1){if(st=Et[rt],_toString$1.call(st)!=="[object Object]"||(_t=Object.keys(st),_t.length!==1))return!1;xt[rt]=[_t[0],st[_t[0]]]}return!0}function constructYamlPairs(nt){if(nt===null)return[];var rt,it,st,_t,xt,Et=nt;for(xt=new Array(Et.length),rt=0,it=Et.length;rt<it;rt+=1)st=Et[rt],_t=Object.keys(st),xt[rt]=[_t[0],st[_t[0]]];return xt}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(nt){if(nt===null)return!0;var rt,it=nt;for(rt in it)if(_hasOwnProperty$2.call(it,rt)&&it[rt]!==null)return!1;return!0}function constructYamlSet(nt){return nt!==null?nt:{}}var set$1=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge$1],explicit:[binary,omap,pairs,set$1]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(nt){return Object.prototype.toString.call(nt)}function is_EOL(nt){return nt===10||nt===13}function is_WHITE_SPACE(nt){return nt===9||nt===32}function is_WS_OR_EOL(nt){return nt===9||nt===32||nt===10||nt===13}function is_FLOW_INDICATOR(nt){return nt===44||nt===91||nt===93||nt===123||nt===125}function fromHexCode(nt){var rt;return 48<=nt&&nt<=57?nt-48:(rt=nt|32,97<=rt&&rt<=102?rt-97+10:-1)}function escapedHexLen(nt){return nt===120?2:nt===117?4:nt===85?8:0}function fromDecimalCode(nt){return 48<=nt&&nt<=57?nt-48:-1}function simpleEscapeSequence(nt){return nt===48?"\0":nt===97?"\x07":nt===98?"\b":nt===116||nt===9?"	":nt===110?`
`:nt===118?"\v":nt===102?"\f":nt===114?"\r":nt===101?"\x1B":nt===32?" ":nt===34?'"':nt===47?"/":nt===92?"\\":nt===78?"\x85":nt===95?"\xA0":nt===76?"\u2028":nt===80?"\u2029":""}function charFromCodepoint(nt){return nt<=65535?String.fromCharCode(nt):String.fromCharCode((nt-65536>>10)+55296,(nt-65536&1023)+56320)}var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(var i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(nt,rt){this.input=nt,this.filename=rt.filename||null,this.schema=rt.schema||_default,this.onWarning=rt.onWarning||null,this.legacy=rt.legacy||!1,this.json=rt.json||!1,this.listener=rt.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=nt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(nt,rt){var it={name:nt.filename,buffer:nt.input.slice(0,-1),position:nt.position,line:nt.line,column:nt.position-nt.lineStart};return it.snippet=snippet(it),new exception(rt,it)}function throwError(nt,rt){throw generateError(nt,rt)}function throwWarning(nt,rt){nt.onWarning&&nt.onWarning.call(null,generateError(nt,rt))}var directiveHandlers={YAML:function nt(rt,it,st){var _t,xt,Et;rt.version!==null&&throwError(rt,"duplication of %YAML directive"),st.length!==1&&throwError(rt,"YAML directive accepts exactly one argument"),_t=/^([0-9]+)\.([0-9]+)$/.exec(st[0]),_t===null&&throwError(rt,"ill-formed argument of the YAML directive"),xt=parseInt(_t[1],10),Et=parseInt(_t[2],10),xt!==1&&throwError(rt,"unacceptable YAML version of the document"),rt.version=st[0],rt.checkLineBreaks=Et<2,Et!==1&&Et!==2&&throwWarning(rt,"unsupported YAML version of the document")},TAG:function nt(rt,it,st){var _t,xt;st.length!==2&&throwError(rt,"TAG directive accepts exactly two arguments"),_t=st[0],xt=st[1],PATTERN_TAG_HANDLE.test(_t)||throwError(rt,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(rt.tagMap,_t)&&throwError(rt,'there is a previously declared suffix for "'+_t+'" tag handle'),PATTERN_TAG_URI.test(xt)||throwError(rt,"ill-formed tag prefix (second argument) of the TAG directive");try{xt=decodeURIComponent(xt)}catch{throwError(rt,"tag prefix is malformed: "+xt)}rt.tagMap[_t]=xt}};function captureSegment(nt,rt,it,st){var _t,xt,Et,kt;if(rt<it){if(kt=nt.input.slice(rt,it),st)for(_t=0,xt=kt.length;_t<xt;_t+=1)Et=kt.charCodeAt(_t),Et===9||32<=Et&&Et<=1114111||throwError(nt,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(kt)&&throwError(nt,"the stream contains non-printable characters");nt.result+=kt}}function mergeMappings(nt,rt,it,st){var _t,xt,Et,kt;for(common.isObject(it)||throwError(nt,"cannot merge mappings; the provided source object is unacceptable"),_t=Object.keys(it),Et=0,kt=_t.length;Et<kt;Et+=1)xt=_t[Et],_hasOwnProperty$1.call(rt,xt)||(rt[xt]=it[xt],st[xt]=!0)}function storeMappingPair(nt,rt,it,st,_t,xt,Et,kt,Lt){var It,Rt;if(Array.isArray(_t))for(_t=Array.prototype.slice.call(_t),It=0,Rt=_t.length;It<Rt;It+=1)Array.isArray(_t[It])&&throwError(nt,"nested arrays are not supported inside keys"),typeof _t=="object"&&_class(_t[It])==="[object Object]"&&(_t[It]="[object Object]");if(typeof _t=="object"&&_class(_t)==="[object Object]"&&(_t="[object Object]"),_t=String(_t),rt===null&&(rt={}),st==="tag:yaml.org,2002:merge")if(Array.isArray(xt))for(It=0,Rt=xt.length;It<Rt;It+=1)mergeMappings(nt,rt,xt[It],it);else mergeMappings(nt,rt,xt,it);else!nt.json&&!_hasOwnProperty$1.call(it,_t)&&_hasOwnProperty$1.call(rt,_t)&&(nt.line=Et||nt.line,nt.lineStart=kt||nt.lineStart,nt.position=Lt||nt.position,throwError(nt,"duplicated mapping key")),_t==="__proto__"?Object.defineProperty(rt,_t,{configurable:!0,enumerable:!0,writable:!0,value:xt}):rt[_t]=xt,delete it[_t];return rt}function readLineBreak(nt){var rt;rt=nt.input.charCodeAt(nt.position),rt===10?nt.position++:rt===13?(nt.position++,nt.input.charCodeAt(nt.position)===10&&nt.position++):throwError(nt,"a line break is expected"),nt.line+=1,nt.lineStart=nt.position,nt.firstTabInLine=-1}function skipSeparationSpace(nt,rt,it){for(var st=0,_t=nt.input.charCodeAt(nt.position);_t!==0;){for(;is_WHITE_SPACE(_t);)_t===9&&nt.firstTabInLine===-1&&(nt.firstTabInLine=nt.position),_t=nt.input.charCodeAt(++nt.position);if(rt&&_t===35)do _t=nt.input.charCodeAt(++nt.position);while(_t!==10&&_t!==13&&_t!==0);if(is_EOL(_t))for(readLineBreak(nt),_t=nt.input.charCodeAt(nt.position),st++,nt.lineIndent=0;_t===32;)nt.lineIndent++,_t=nt.input.charCodeAt(++nt.position);else break}return it!==-1&&st!==0&&nt.lineIndent<it&&throwWarning(nt,"deficient indentation"),st}function testDocumentSeparator(nt){var rt=nt.position,it;return it=nt.input.charCodeAt(rt),!!((it===45||it===46)&&it===nt.input.charCodeAt(rt+1)&&it===nt.input.charCodeAt(rt+2)&&(rt+=3,it=nt.input.charCodeAt(rt),it===0||is_WS_OR_EOL(it)))}function writeFoldedLines(nt,rt){rt===1?nt.result+=" ":rt>1&&(nt.result+=common.repeat(`
`,rt-1))}function readPlainScalar(nt,rt,it){var st,_t,xt,Et,kt,Lt,It,Rt,Nt=nt.kind,Bt=nt.result,Ft;if(Ft=nt.input.charCodeAt(nt.position),is_WS_OR_EOL(Ft)||is_FLOW_INDICATOR(Ft)||Ft===35||Ft===38||Ft===42||Ft===33||Ft===124||Ft===62||Ft===39||Ft===34||Ft===37||Ft===64||Ft===96||(Ft===63||Ft===45)&&(_t=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(_t)||it&&is_FLOW_INDICATOR(_t)))return!1;for(nt.kind="scalar",nt.result="",xt=Et=nt.position,kt=!1;Ft!==0;){if(Ft===58){if(_t=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(_t)||it&&is_FLOW_INDICATOR(_t))break}else if(Ft===35){if(st=nt.input.charCodeAt(nt.position-1),is_WS_OR_EOL(st))break}else{if(nt.position===nt.lineStart&&testDocumentSeparator(nt)||it&&is_FLOW_INDICATOR(Ft))break;if(is_EOL(Ft))if(Lt=nt.line,It=nt.lineStart,Rt=nt.lineIndent,skipSeparationSpace(nt,!1,-1),nt.lineIndent>=rt){kt=!0,Ft=nt.input.charCodeAt(nt.position);continue}else{nt.position=Et,nt.line=Lt,nt.lineStart=It,nt.lineIndent=Rt;break}}kt&&(captureSegment(nt,xt,Et,!1),writeFoldedLines(nt,nt.line-Lt),xt=Et=nt.position,kt=!1),is_WHITE_SPACE(Ft)||(Et=nt.position+1),Ft=nt.input.charCodeAt(++nt.position)}return captureSegment(nt,xt,Et,!1),nt.result?!0:(nt.kind=Nt,nt.result=Bt,!1)}function readSingleQuotedScalar(nt,rt){var it,st,_t;if(it=nt.input.charCodeAt(nt.position),it!==39)return!1;for(nt.kind="scalar",nt.result="",nt.position++,st=_t=nt.position;(it=nt.input.charCodeAt(nt.position))!==0;)if(it===39)if(captureSegment(nt,st,nt.position,!0),it=nt.input.charCodeAt(++nt.position),it===39)st=nt.position,nt.position++,_t=nt.position;else return!0;else is_EOL(it)?(captureSegment(nt,st,_t,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),st=_t=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a single quoted scalar"):(nt.position++,_t=nt.position);throwError(nt,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(nt,rt){var it,st,_t,xt,Et,kt;if(kt=nt.input.charCodeAt(nt.position),kt!==34)return!1;for(nt.kind="scalar",nt.result="",nt.position++,it=st=nt.position;(kt=nt.input.charCodeAt(nt.position))!==0;){if(kt===34)return captureSegment(nt,it,nt.position,!0),nt.position++,!0;if(kt===92){if(captureSegment(nt,it,nt.position,!0),kt=nt.input.charCodeAt(++nt.position),is_EOL(kt))skipSeparationSpace(nt,!1,rt);else if(kt<256&&simpleEscapeCheck[kt])nt.result+=simpleEscapeMap[kt],nt.position++;else if((Et=escapedHexLen(kt))>0){for(_t=Et,xt=0;_t>0;_t--)kt=nt.input.charCodeAt(++nt.position),(Et=fromHexCode(kt))>=0?xt=(xt<<4)+Et:throwError(nt,"expected hexadecimal character");nt.result+=charFromCodepoint(xt),nt.position++}else throwError(nt,"unknown escape sequence");it=st=nt.position}else is_EOL(kt)?(captureSegment(nt,it,st,!0),writeFoldedLines(nt,skipSeparationSpace(nt,!1,rt)),it=st=nt.position):nt.position===nt.lineStart&&testDocumentSeparator(nt)?throwError(nt,"unexpected end of the document within a double quoted scalar"):(nt.position++,st=nt.position)}throwError(nt,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(nt,rt){var it=!0,st,_t,xt,Et=nt.tag,kt,Lt=nt.anchor,It,Rt,Nt,Bt,Ft,Yt=Object.create(null),Zt,Wt,Kt,Jt;if(Jt=nt.input.charCodeAt(nt.position),Jt===91)Rt=93,Ft=!1,kt=[];else if(Jt===123)Rt=125,Ft=!0,kt={};else return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=kt),Jt=nt.input.charCodeAt(++nt.position);Jt!==0;){if(skipSeparationSpace(nt,!0,rt),Jt=nt.input.charCodeAt(nt.position),Jt===Rt)return nt.position++,nt.tag=Et,nt.anchor=Lt,nt.kind=Ft?"mapping":"sequence",nt.result=kt,!0;it?Jt===44&&throwError(nt,"expected the node content, but found ','"):throwError(nt,"missed comma between flow collection entries"),Wt=Zt=Kt=null,Nt=Bt=!1,Jt===63&&(It=nt.input.charCodeAt(nt.position+1),is_WS_OR_EOL(It)&&(Nt=Bt=!0,nt.position++,skipSeparationSpace(nt,!0,rt))),st=nt.line,_t=nt.lineStart,xt=nt.position,composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),Wt=nt.tag,Zt=nt.result,skipSeparationSpace(nt,!0,rt),Jt=nt.input.charCodeAt(nt.position),(Bt||nt.line===st)&&Jt===58&&(Nt=!0,Jt=nt.input.charCodeAt(++nt.position),skipSeparationSpace(nt,!0,rt),composeNode(nt,rt,CONTEXT_FLOW_IN,!1,!0),Kt=nt.result),Ft?storeMappingPair(nt,kt,Yt,Wt,Zt,Kt,st,_t,xt):Nt?kt.push(storeMappingPair(nt,null,Yt,Wt,Zt,Kt,st,_t,xt)):kt.push(Zt),skipSeparationSpace(nt,!0,rt),Jt=nt.input.charCodeAt(nt.position),Jt===44?(it=!0,Jt=nt.input.charCodeAt(++nt.position)):it=!1}throwError(nt,"unexpected end of the stream within a flow collection")}function readBlockScalar(nt,rt){var it,st,_t=CHOMPING_CLIP,xt=!1,Et=!1,kt=rt,Lt=0,It=!1,Rt,Nt;if(Nt=nt.input.charCodeAt(nt.position),Nt===124)st=!1;else if(Nt===62)st=!0;else return!1;for(nt.kind="scalar",nt.result="";Nt!==0;)if(Nt=nt.input.charCodeAt(++nt.position),Nt===43||Nt===45)CHOMPING_CLIP===_t?_t=Nt===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(nt,"repeat of a chomping mode identifier");else if((Rt=fromDecimalCode(Nt))>=0)Rt===0?throwError(nt,"bad explicit indentation width of a block scalar; it cannot be less than one"):Et?throwError(nt,"repeat of an indentation width identifier"):(kt=rt+Rt-1,Et=!0);else break;if(is_WHITE_SPACE(Nt)){do Nt=nt.input.charCodeAt(++nt.position);while(is_WHITE_SPACE(Nt));if(Nt===35)do Nt=nt.input.charCodeAt(++nt.position);while(!is_EOL(Nt)&&Nt!==0)}for(;Nt!==0;){for(readLineBreak(nt),nt.lineIndent=0,Nt=nt.input.charCodeAt(nt.position);(!Et||nt.lineIndent<kt)&&Nt===32;)nt.lineIndent++,Nt=nt.input.charCodeAt(++nt.position);if(!Et&&nt.lineIndent>kt&&(kt=nt.lineIndent),is_EOL(Nt)){Lt++;continue}if(nt.lineIndent<kt){_t===CHOMPING_KEEP?nt.result+=common.repeat(`
`,xt?1+Lt:Lt):_t===CHOMPING_CLIP&&xt&&(nt.result+=`
`);break}for(st?is_WHITE_SPACE(Nt)?(It=!0,nt.result+=common.repeat(`
`,xt?1+Lt:Lt)):It?(It=!1,nt.result+=common.repeat(`
`,Lt+1)):Lt===0?xt&&(nt.result+=" "):nt.result+=common.repeat(`
`,Lt):nt.result+=common.repeat(`
`,xt?1+Lt:Lt),xt=!0,Et=!0,Lt=0,it=nt.position;!is_EOL(Nt)&&Nt!==0;)Nt=nt.input.charCodeAt(++nt.position);captureSegment(nt,it,nt.position,!1)}return!0}function readBlockSequence(nt,rt){var it,st=nt.tag,_t=nt.anchor,xt=[],Et,kt=!1,Lt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=xt),Lt=nt.input.charCodeAt(nt.position);Lt!==0&&(nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),!(Lt!==45||(Et=nt.input.charCodeAt(nt.position+1),!is_WS_OR_EOL(Et))));){if(kt=!0,nt.position++,skipSeparationSpace(nt,!0,-1)&&nt.lineIndent<=rt){xt.push(null),Lt=nt.input.charCodeAt(nt.position);continue}if(it=nt.line,composeNode(nt,rt,CONTEXT_BLOCK_IN,!1,!0),xt.push(nt.result),skipSeparationSpace(nt,!0,-1),Lt=nt.input.charCodeAt(nt.position),(nt.line===it||nt.lineIndent>rt)&&Lt!==0)throwError(nt,"bad indentation of a sequence entry");else if(nt.lineIndent<rt)break}return kt?(nt.tag=st,nt.anchor=_t,nt.kind="sequence",nt.result=xt,!0):!1}function readBlockMapping(nt,rt,it){var st,_t,xt,Et,kt,Lt,It=nt.tag,Rt=nt.anchor,Nt={},Bt=Object.create(null),Ft=null,Yt=null,Zt=null,Wt=!1,Kt=!1,Jt;if(nt.firstTabInLine!==-1)return!1;for(nt.anchor!==null&&(nt.anchorMap[nt.anchor]=Nt),Jt=nt.input.charCodeAt(nt.position);Jt!==0;){if(!Wt&&nt.firstTabInLine!==-1&&(nt.position=nt.firstTabInLine,throwError(nt,"tab characters must not be used in indentation")),st=nt.input.charCodeAt(nt.position+1),xt=nt.line,(Jt===63||Jt===58)&&is_WS_OR_EOL(st))Jt===63?(Wt&&(storeMappingPair(nt,Nt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Kt=!0,Wt=!0,_t=!0):Wt?(Wt=!1,_t=!0):throwError(nt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),nt.position+=1,Jt=st;else{if(Et=nt.line,kt=nt.lineStart,Lt=nt.position,!composeNode(nt,it,CONTEXT_FLOW_OUT,!1,!0))break;if(nt.line===xt){for(Jt=nt.input.charCodeAt(nt.position);is_WHITE_SPACE(Jt);)Jt=nt.input.charCodeAt(++nt.position);if(Jt===58)Jt=nt.input.charCodeAt(++nt.position),is_WS_OR_EOL(Jt)||throwError(nt,"a whitespace character is expected after the key-value separator within a block mapping"),Wt&&(storeMappingPair(nt,Nt,Bt,Ft,Yt,null,Et,kt,Lt),Ft=Yt=Zt=null),Kt=!0,Wt=!1,_t=!1,Ft=nt.tag,Yt=nt.result;else if(Kt)throwError(nt,"can not read an implicit mapping pair; a colon is missed");else return nt.tag=It,nt.anchor=Rt,!0}else if(Kt)throwError(nt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return nt.tag=It,nt.anchor=Rt,!0}if((nt.line===xt||nt.lineIndent>rt)&&(Wt&&(Et=nt.line,kt=nt.lineStart,Lt=nt.position),composeNode(nt,rt,CONTEXT_BLOCK_OUT,!0,_t)&&(Wt?Yt=nt.result:Zt=nt.result),Wt||(storeMappingPair(nt,Nt,Bt,Ft,Yt,Zt,Et,kt,Lt),Ft=Yt=Zt=null),skipSeparationSpace(nt,!0,-1),Jt=nt.input.charCodeAt(nt.position)),(nt.line===xt||nt.lineIndent>rt)&&Jt!==0)throwError(nt,"bad indentation of a mapping entry");else if(nt.lineIndent<rt)break}return Wt&&storeMappingPair(nt,Nt,Bt,Ft,Yt,null,Et,kt,Lt),Kt&&(nt.tag=It,nt.anchor=Rt,nt.kind="mapping",nt.result=Nt),Kt}function readTagProperty(nt){var rt,it=!1,st=!1,_t,xt,Et;if(Et=nt.input.charCodeAt(nt.position),Et!==33)return!1;if(nt.tag!==null&&throwError(nt,"duplication of a tag property"),Et=nt.input.charCodeAt(++nt.position),Et===60?(it=!0,Et=nt.input.charCodeAt(++nt.position)):Et===33?(st=!0,_t="!!",Et=nt.input.charCodeAt(++nt.position)):_t="!",rt=nt.position,it){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&Et!==62);nt.position<nt.length?(xt=nt.input.slice(rt,nt.position),Et=nt.input.charCodeAt(++nt.position)):throwError(nt,"unexpected end of the stream within a verbatim tag")}else{for(;Et!==0&&!is_WS_OR_EOL(Et);)Et===33&&(st?throwError(nt,"tag suffix cannot contain exclamation marks"):(_t=nt.input.slice(rt-1,nt.position+1),PATTERN_TAG_HANDLE.test(_t)||throwError(nt,"named tag handle cannot contain such characters"),st=!0,rt=nt.position+1)),Et=nt.input.charCodeAt(++nt.position);xt=nt.input.slice(rt,nt.position),PATTERN_FLOW_INDICATORS.test(xt)&&throwError(nt,"tag suffix cannot contain flow indicator characters")}xt&&!PATTERN_TAG_URI.test(xt)&&throwError(nt,"tag name cannot contain such characters: "+xt);try{xt=decodeURIComponent(xt)}catch{throwError(nt,"tag name is malformed: "+xt)}return it?nt.tag=xt:_hasOwnProperty$1.call(nt.tagMap,_t)?nt.tag=nt.tagMap[_t]+xt:_t==="!"?nt.tag="!"+xt:_t==="!!"?nt.tag="tag:yaml.org,2002:"+xt:throwError(nt,'undeclared tag handle "'+_t+'"'),!0}function readAnchorProperty(nt){var rt,it;if(it=nt.input.charCodeAt(nt.position),it!==38)return!1;for(nt.anchor!==null&&throwError(nt,"duplication of an anchor property"),it=nt.input.charCodeAt(++nt.position),rt=nt.position;it!==0&&!is_WS_OR_EOL(it)&&!is_FLOW_INDICATOR(it);)it=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an anchor node must contain at least one character"),nt.anchor=nt.input.slice(rt,nt.position),!0}function readAlias(nt){var rt,it,st;if(st=nt.input.charCodeAt(nt.position),st!==42)return!1;for(st=nt.input.charCodeAt(++nt.position),rt=nt.position;st!==0&&!is_WS_OR_EOL(st)&&!is_FLOW_INDICATOR(st);)st=nt.input.charCodeAt(++nt.position);return nt.position===rt&&throwError(nt,"name of an alias node must contain at least one character"),it=nt.input.slice(rt,nt.position),_hasOwnProperty$1.call(nt.anchorMap,it)||throwError(nt,'unidentified alias "'+it+'"'),nt.result=nt.anchorMap[it],skipSeparationSpace(nt,!0,-1),!0}function composeNode(nt,rt,it,st,_t){var xt,Et,kt,Lt=1,It=!1,Rt=!1,Nt,Bt,Ft,Yt,Zt,Wt;if(nt.listener!==null&&nt.listener("open",nt),nt.tag=null,nt.anchor=null,nt.kind=null,nt.result=null,xt=Et=kt=CONTEXT_BLOCK_OUT===it||CONTEXT_BLOCK_IN===it,st&&skipSeparationSpace(nt,!0,-1)&&(It=!0,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)),Lt===1)for(;readTagProperty(nt)||readAnchorProperty(nt);)skipSeparationSpace(nt,!0,-1)?(It=!0,kt=xt,nt.lineIndent>rt?Lt=1:nt.lineIndent===rt?Lt=0:nt.lineIndent<rt&&(Lt=-1)):kt=!1;if(kt&&(kt=It||_t),(Lt===1||CONTEXT_BLOCK_OUT===it)&&(CONTEXT_FLOW_IN===it||CONTEXT_FLOW_OUT===it?Zt=rt:Zt=rt+1,Wt=nt.position-nt.lineStart,Lt===1?kt&&(readBlockSequence(nt,Wt)||readBlockMapping(nt,Wt,Zt))||readFlowCollection(nt,Zt)?Rt=!0:(Et&&readBlockScalar(nt,Zt)||readSingleQuotedScalar(nt,Zt)||readDoubleQuotedScalar(nt,Zt)?Rt=!0:readAlias(nt)?(Rt=!0,(nt.tag!==null||nt.anchor!==null)&&throwError(nt,"alias node should not have any properties")):readPlainScalar(nt,Zt,CONTEXT_FLOW_IN===it)&&(Rt=!0,nt.tag===null&&(nt.tag="?")),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):Lt===0&&(Rt=kt&&readBlockSequence(nt,Wt))),nt.tag===null)nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);else if(nt.tag==="?"){for(nt.result!==null&&nt.kind!=="scalar"&&throwError(nt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+nt.kind+'"'),Nt=0,Bt=nt.implicitTypes.length;Nt<Bt;Nt+=1)if(Yt=nt.implicitTypes[Nt],Yt.resolve(nt.result)){nt.result=Yt.construct(nt.result),nt.tag=Yt.tag,nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result);break}}else if(nt.tag!=="!"){if(_hasOwnProperty$1.call(nt.typeMap[nt.kind||"fallback"],nt.tag))Yt=nt.typeMap[nt.kind||"fallback"][nt.tag];else for(Yt=null,Ft=nt.typeMap.multi[nt.kind||"fallback"],Nt=0,Bt=Ft.length;Nt<Bt;Nt+=1)if(nt.tag.slice(0,Ft[Nt].tag.length)===Ft[Nt].tag){Yt=Ft[Nt];break}Yt||throwError(nt,"unknown tag !<"+nt.tag+">"),nt.result!==null&&Yt.kind!==nt.kind&&throwError(nt,"unacceptable node kind for !<"+nt.tag+'> tag; it should be "'+Yt.kind+'", not "'+nt.kind+'"'),Yt.resolve(nt.result,nt.tag)?(nt.result=Yt.construct(nt.result,nt.tag),nt.anchor!==null&&(nt.anchorMap[nt.anchor]=nt.result)):throwError(nt,"cannot resolve a node with !<"+nt.tag+"> explicit tag")}return nt.listener!==null&&nt.listener("close",nt),nt.tag!==null||nt.anchor!==null||Rt}function readDocument(nt){var rt=nt.position,it,st,_t,xt=!1,Et;for(nt.version=null,nt.checkLineBreaks=nt.legacy,nt.tagMap=Object.create(null),nt.anchorMap=Object.create(null);(Et=nt.input.charCodeAt(nt.position))!==0&&(skipSeparationSpace(nt,!0,-1),Et=nt.input.charCodeAt(nt.position),!(nt.lineIndent>0||Et!==37));){for(xt=!0,Et=nt.input.charCodeAt(++nt.position),it=nt.position;Et!==0&&!is_WS_OR_EOL(Et);)Et=nt.input.charCodeAt(++nt.position);for(st=nt.input.slice(it,nt.position),_t=[],st.length<1&&throwError(nt,"directive name must not be less than one character in length");Et!==0;){for(;is_WHITE_SPACE(Et);)Et=nt.input.charCodeAt(++nt.position);if(Et===35){do Et=nt.input.charCodeAt(++nt.position);while(Et!==0&&!is_EOL(Et));break}if(is_EOL(Et))break;for(it=nt.position;Et!==0&&!is_WS_OR_EOL(Et);)Et=nt.input.charCodeAt(++nt.position);_t.push(nt.input.slice(it,nt.position))}Et!==0&&readLineBreak(nt),_hasOwnProperty$1.call(directiveHandlers,st)?directiveHandlers[st](nt,st,_t):throwWarning(nt,'unknown document directive "'+st+'"')}if(skipSeparationSpace(nt,!0,-1),nt.lineIndent===0&&nt.input.charCodeAt(nt.position)===45&&nt.input.charCodeAt(nt.position+1)===45&&nt.input.charCodeAt(nt.position+2)===45?(nt.position+=3,skipSeparationSpace(nt,!0,-1)):xt&&throwError(nt,"directives end mark is expected"),composeNode(nt,nt.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(nt,!0,-1),nt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(nt.input.slice(rt,nt.position))&&throwWarning(nt,"non-ASCII line breaks are interpreted as content"),nt.documents.push(nt.result),nt.position===nt.lineStart&&testDocumentSeparator(nt)){nt.input.charCodeAt(nt.position)===46&&(nt.position+=3,skipSeparationSpace(nt,!0,-1));return}if(nt.position<nt.length-1)throwError(nt,"end of the stream or a document separator is expected");else return}function loadDocuments(nt,rt){nt=String(nt),rt=rt||{},nt.length!==0&&(nt.charCodeAt(nt.length-1)!==10&&nt.charCodeAt(nt.length-1)!==13&&(nt+=`
`),nt.charCodeAt(0)===65279&&(nt=nt.slice(1)));var it=new State$1(nt,rt),st=nt.indexOf("\0");for(st!==-1&&(it.position=st,throwError(it,"null byte is not allowed in input")),it.input+="\0";it.input.charCodeAt(it.position)===32;)it.lineIndent+=1,it.position+=1;for(;it.position<it.length-1;)readDocument(it);return it.documents}function loadAll$1(nt,rt,it){rt!==null&&typeof rt=="object"&&typeof it>"u"&&(it=rt,rt=null);var st=loadDocuments(nt,it);if(typeof rt!="function")return st;for(var _t=0,xt=st.length;_t<xt;_t+=1)rt(st[_t])}function load$1(nt,rt){var it=loadDocuments(nt,rt);if(it.length!==0){if(it.length===1)return it[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader$3={loadAll:loadAll_1,load:load_1},FAILSAFE_SCHEMA=failsafe,load=loader$3.load;const frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function extractFrontMatter(nt,rt){var it;const st=nt.match(frontMatterRegex);if(st){const _t=load(st[1],{schema:FAILSAFE_SCHEMA});return _t!=null&&_t.title&&((it=rt.setDiagramTitle)==null||it.call(rt,_t.title)),nt.slice(st[0].length)}else return nt}const directive$1=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyComment=/\s*%%.*\n/gm,detectors={},detectType=function(nt,rt){nt=nt.replace(frontMatterRegex,"").replace(directive$1,"").replace(anyComment,`
`);for(const[it,{detector:st}]of Object.entries(detectors))if(st(nt,rt))return it;throw new Error(`No diagram type detected for text: ${nt}`)},registerLazyLoadedDiagrams=(...nt)=>{for(const{id:rt,detector:it,loader:st}of nt)addDetector(rt,it,st)},addDetector=(nt,rt,it)=>{detectors[nt]?log$1.error(`Detector with key ${nt} already exists`):detectors[nt]={detector:rt,loader:it},log$1.debug(`Detector with key ${nt} added${it?" with loader":""}`)},getDiagramLoader=nt=>detectors[nt].loader,assignWithDepth=function(nt,rt,it){const{depth:st,clobber:_t}=Object.assign({depth:2,clobber:!1},it);return Array.isArray(rt)&&!Array.isArray(nt)?(rt.forEach(xt=>assignWithDepth(nt,xt,it)),nt):Array.isArray(rt)&&Array.isArray(nt)?(rt.forEach(xt=>{nt.includes(xt)||nt.push(xt)}),nt):nt===void 0||st<=0?nt!=null&&typeof nt=="object"&&typeof rt=="object"?Object.assign(nt,rt):rt:(rt!==void 0&&typeof nt=="object"&&typeof rt=="object"&&Object.keys(rt).forEach(xt=>{typeof rt[xt]=="object"&&(nt[xt]===void 0||typeof nt[xt]=="object")?(nt[xt]===void 0&&(nt[xt]=Array.isArray(rt[xt])?[]:{}),nt[xt]=assignWithDepth(nt[xt],rt[xt],{depth:st-1,clobber:_t})):(_t||typeof nt[xt]!="object"&&typeof rt[xt]!="object")&&(nt[xt]=rt[xt])}),nt)},assignWithDepth$1=assignWithDepth,d3CurveTypes={curveBasis,curveBasisClosed,curveBasisOpen,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle,curveCardinalClosed,curveCardinalOpen,curveCardinal,curveCatmullRomClosed,curveCatmullRomOpen,curveCatmullRom,curveLinear,curveLinearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directive=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=function(nt,rt){const it=detectDirective(nt,/(?:init\b)|(?:initialize\b)/);let st={};if(Array.isArray(it)){const _t=it.map(xt=>xt.args);directiveSanitizer(_t),st=assignWithDepth$1(st,[..._t])}else st=it.args;if(st){let _t=detectType(nt,rt);["config"].forEach(xt=>{st[xt]!==void 0&&(_t==="flowchart-v2"&&(_t="flowchart"),st[_t]=st[xt],delete st[xt])})}return st},detectDirective=function(nt,rt=null){try{const it=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*
`,"ig");nt=nt.trim().replace(it,"").replace(/'/gm,'"'),log$1.debug(`Detecting diagram directive${rt!==null?" type:"+rt:""} based on the text:${nt}`);let st;const _t=[];for(;(st=directive.exec(nt))!==null;)if(st.index===directive.lastIndex&&directive.lastIndex++,st&&!rt||rt&&st[1]&&st[1].match(rt)||rt&&st[2]&&st[2].match(rt)){const xt=st[1]?st[1]:st[2],Et=st[3]?st[3].trim():st[4]?JSON.parse(st[4].trim()):null;_t.push({type:xt,args:Et})}return _t.length===0&&_t.push({type:nt,args:null}),_t.length===1?_t[0]:_t}catch(it){return log$1.error(`ERROR: ${it.message} - Unable to parse directive
      ${rt!==null?" type:"+rt:""} based on the text:${nt}`),{type:null,args:null}}},isSubstringInArray=function(nt,rt){for(const[it,st]of rt.entries())if(st.match(nt))return it;return-1};function interpolateToCurve(nt,rt){if(!nt)return rt;const it=`curve${nt.charAt(0).toUpperCase()+nt.slice(1)}`;return d3CurveTypes[it]||rt}function formatUrl(nt,rt){const it=nt.trim();if(it)return rt.securityLevel!=="loose"?dist.sanitizeUrl(it):it}const runFunc=(nt,...rt)=>{const it=nt.split("."),st=it.length-1,_t=it[st];let xt=window;for(let Et=0;Et<st;Et++)if(xt=xt[it[Et]],!xt)return;xt[_t](...rt)};function distance(nt,rt){return nt&&rt?Math.sqrt(Math.pow(rt.x-nt.x,2)+Math.pow(rt.y-nt.y,2)):0}function traverseEdge(nt){let rt,it=0;nt.forEach(xt=>{it+=distance(xt,rt),rt=xt});let st=it/2,_t;return rt=void 0,nt.forEach(xt=>{if(rt&&!_t){const Et=distance(xt,rt);if(Et<st)st-=Et;else{const kt=st/Et;kt<=0&&(_t=rt),kt>=1&&(_t={x:xt.x,y:xt.y}),kt>0&&kt<1&&(_t={x:(1-kt)*rt.x+kt*xt.x,y:(1-kt)*rt.y+kt*xt.y})}}rt=xt}),_t}function calcLabelPosition(nt){return nt.length===1?nt[0]:traverseEdge(nt)}const calcCardinalityPosition=(nt,rt,it)=>{let st;log$1.info(`our points ${JSON.stringify(rt)}`),rt[0]!==it&&(rt=rt.reverse());let xt=25,Et;st=void 0,rt.forEach(Rt=>{if(st&&!Et){const Nt=distance(Rt,st);if(Nt<xt)xt-=Nt;else{const Bt=xt/Nt;Bt<=0&&(Et=st),Bt>=1&&(Et={x:Rt.x,y:Rt.y}),Bt>0&&Bt<1&&(Et={x:(1-Bt)*st.x+Bt*Rt.x,y:(1-Bt)*st.y+Bt*Rt.y})}}st=Rt});const kt=nt?10:5,Lt=Math.atan2(rt[0].y-Et.y,rt[0].x-Et.x),It={x:0,y:0};return It.x=Math.sin(Lt)*kt+(rt[0].x+Et.x)/2,It.y=-Math.cos(Lt)*kt+(rt[0].y+Et.y)/2,It};function calcTerminalLabelPosition(nt,rt,it){let st=JSON.parse(JSON.stringify(it)),_t;log$1.info("our points",st),rt!=="start_left"&&rt!=="start_right"&&(st=st.reverse()),st.forEach(Nt=>{_t=Nt});let Et=25+nt,kt;_t=void 0,st.forEach(Nt=>{if(_t&&!kt){const Bt=distance(Nt,_t);if(Bt<Et)Et-=Bt;else{const Ft=Et/Bt;Ft<=0&&(kt=_t),Ft>=1&&(kt={x:Nt.x,y:Nt.y}),Ft>0&&Ft<1&&(kt={x:(1-Ft)*_t.x+Ft*Nt.x,y:(1-Ft)*_t.y+Ft*Nt.y})}}_t=Nt});const Lt=10+nt*.5,It=Math.atan2(st[0].y-kt.y,st[0].x-kt.x),Rt={x:0,y:0};return Rt.x=Math.sin(It)*Lt+(st[0].x+kt.x)/2,Rt.y=-Math.cos(It)*Lt+(st[0].y+kt.y)/2,rt==="start_left"&&(Rt.x=Math.sin(It+Math.PI)*Lt+(st[0].x+kt.x)/2,Rt.y=-Math.cos(It+Math.PI)*Lt+(st[0].y+kt.y)/2),rt==="end_right"&&(Rt.x=Math.sin(It-Math.PI)*Lt+(st[0].x+kt.x)/2-5,Rt.y=-Math.cos(It-Math.PI)*Lt+(st[0].y+kt.y)/2-5),rt==="end_left"&&(Rt.x=Math.sin(It)*Lt+(st[0].x+kt.x)/2-5,Rt.y=-Math.cos(It)*Lt+(st[0].y+kt.y)/2-5),Rt}function getStylesFromArray(nt){let rt="",it="";for(const st of nt)st!==void 0&&(st.startsWith("color:")||st.startsWith("text-align:")?it=it+st+";":rt=rt+st+";");return{style:rt,labelStyle:it}}let cnt=0;const generateId$1=()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt);function makeid(nt){let rt="";const it="0123456789abcdef",st=it.length;for(let _t=0;_t<nt;_t++)rt+=it.charAt(Math.floor(Math.random()*st));return rt}const random=nt=>makeid(nt.length),getTextObj$2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},drawSimpleText=function(nt,rt){const it=rt.text.replace(common$1.lineBreakRegex," "),[,st]=parseFontSize(rt.fontSize),_t=nt.append("text");_t.attr("x",rt.x),_t.attr("y",rt.y),_t.style("text-anchor",rt.anchor),_t.style("font-family",rt.fontFamily),_t.style("font-size",st),_t.style("font-weight",rt.fontWeight),_t.attr("fill",rt.fill),rt.class!==void 0&&_t.attr("class",rt.class);const xt=_t.append("tspan");return xt.attr("x",rt.x+rt.textMargin*2),xt.attr("fill",rt.fill),xt.text(it),_t},wrapLabel=memoize((nt,rt,it)=>{if(!nt||(it=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},it),common$1.lineBreakRegex.test(nt)))return nt;const st=nt.split(" "),_t=[];let xt="";return st.forEach((Et,kt)=>{const Lt=calculateTextWidth(`${Et} `,it),It=calculateTextWidth(xt,it);if(Lt>rt){const{hyphenatedStrings:Bt,remainingWord:Ft}=breakString(Et,rt,"-",it);_t.push(xt,...Bt),xt=Ft}else It+Lt>=rt?(_t.push(xt),xt=Et):xt=[xt,Et].filter(Boolean).join(" ");kt+1===st.length&&_t.push(xt)}),_t.filter(Et=>Et!=="").join(it.joinWith)},(nt,rt,it)=>`${nt}${rt}${it.fontSize}${it.fontWeight}${it.fontFamily}${it.joinWith}`),breakString=memoize((nt,rt,it="-",st)=>{st=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},st);const _t=[...nt],xt=[];let Et="";return _t.forEach((kt,Lt)=>{const It=`${Et}${kt}`;if(calculateTextWidth(It,st)>=rt){const Nt=Lt+1,Bt=_t.length===Nt,Ft=`${It}${it}`;xt.push(Bt?It:Ft),Et=""}else Et=It}),{hyphenatedStrings:xt,remainingWord:Et}},(nt,rt,it="-",st)=>`${nt}${rt}${it}${st.fontSize}${st.fontWeight}${st.fontFamily}`);function calculateTextHeight(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},rt),calculateTextDimensions(nt,rt).height}function calculateTextWidth(nt,rt){return rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt),calculateTextDimensions(nt,rt).width}const calculateTextDimensions=memoize((nt,rt)=>{rt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},rt);const{fontSize:it,fontFamily:st,fontWeight:_t}=rt;if(!nt)return{width:0,height:0};const[,xt]=parseFontSize(it),Et=["sans-serif",st],kt=nt.split(common$1.lineBreakRegex),Lt=[],It=select("body");if(!It.remove)return{width:0,height:0,lineHeight:0};const Rt=It.append("svg");for(const Bt of Et){let Ft=0;const Yt={width:0,height:0,lineHeight:0};for(const Zt of kt){const Wt=getTextObj$2();Wt.text=Zt;const Kt=drawSimpleText(Rt,Wt).style("font-size",xt).style("font-weight",_t).style("font-family",Bt),Jt=(Kt._groups||Kt)[0][0].getBBox();Yt.width=Math.round(Math.max(Yt.width,Jt.width)),Ft=Math.round(Jt.height),Yt.height+=Ft,Yt.lineHeight=Math.round(Math.max(Yt.lineHeight,Ft))}Lt.push(Yt)}Rt.remove();const Nt=isNaN(Lt[1].height)||isNaN(Lt[1].width)||isNaN(Lt[1].lineHeight)||Lt[0].height>Lt[1].height&&Lt[0].width>Lt[1].width&&Lt[0].lineHeight>Lt[1].lineHeight?0:1;return Lt[Nt]},(nt,rt)=>`${nt}${rt.fontSize}${rt.fontWeight}${rt.fontFamily}`),initIdGenerator=class{constructor(rt,it){this.deterministic=rt,this.seed=it,this.count=it?it.length:0}next(){return this.deterministic?this.count++:Date.now()}};let decoder;const entityDecode=function(nt){return decoder=decoder||document.createElement("div"),nt=escape(nt).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=nt,unescape(decoder.textContent)},directiveSanitizer=nt=>{if(log$1.debug("directiveSanitizer called with",nt),typeof nt=="object"&&(nt.length?nt.forEach(rt=>directiveSanitizer(rt)):Object.keys(nt).forEach(rt=>{log$1.debug("Checking key",rt),rt.startsWith("__")&&(log$1.debug("sanitize deleting __ option",rt),delete nt[rt]),rt.includes("proto")&&(log$1.debug("sanitize deleting proto option",rt),delete nt[rt]),rt.includes("constr")&&(log$1.debug("sanitize deleting constr option",rt),delete nt[rt]),rt.includes("themeCSS")&&(log$1.debug("sanitizing themeCss option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("fontFamily")&&(log$1.debug("sanitizing fontFamily option"),nt[rt]=sanitizeCss(nt[rt])),rt.includes("altFontFamily")&&(log$1.debug("sanitizing altFontFamily option"),nt[rt]=sanitizeCss(nt[rt])),configKeys.includes(rt)?typeof nt[rt]=="object"&&(log$1.debug("sanitize deleting object",rt),directiveSanitizer(nt[rt])):(log$1.debug("sanitize deleting option",rt),delete nt[rt])})),nt.themeVariables){const rt=Object.keys(nt.themeVariables);for(const it of rt){const st=nt.themeVariables[it];st&&st.match&&!st.match(/^[\d "#%(),.;A-Za-z]+$/)&&(nt.themeVariables[it]="")}}log$1.debug("After sanitization",nt)},sanitizeCss=nt=>{let rt=0,it=0;for(const st of nt){if(rt<it)return"{ /* ERROR: Unbalanced CSS */ }";st==="{"?rt++:st==="}"&&it++}return rt!==it?"{ /* ERROR: Unbalanced CSS */ }":nt};function isDetailedError(nt){return"str"in nt}function getErrorMessage(nt){return nt instanceof Error?nt.message:String(nt)}const insertTitle=(nt,rt,it,st)=>{if(!st)return;const _t=nt.node().getBBox();nt.append("text").text(st).attr("x",_t.x+_t.width/2).attr("y",-it).attr("class",rt)},parseFontSize=nt=>{if(typeof nt=="number")return[nt,nt+"px"];const rt=parseInt(nt,10);return Number.isNaN(rt)?[void 0,void 0]:nt===String(rt)?[rt,nt+"px"]:[rt,nt]},utils={assignWithDepth:assignWithDepth$1,wrapLabel,calculateTextHeight,calculateTextWidth,calculateTextDimensions,detectInit,detectDirective,isSubstringInArray,interpolateToCurve,calcLabelPosition,calcCardinalityPosition,calcTerminalLabelPosition,formatUrl,getStylesFromArray,generateId:generateId$1,random,runFunc,entityDecode,initIdGenerator,directiveSanitizer,sanitizeCss,insertTitle,parseFontSize},version$1="9.4.3",defaultConfig=Object.freeze(config$2);let siteConfig=assignWithDepth$1({},defaultConfig),configFromInitialize,directives=[],currentConfig=assignWithDepth$1({},defaultConfig);const updateCurrentConfig=(nt,rt)=>{let it=assignWithDepth$1({},nt),st={};for(const _t of rt)sanitize(_t),st=assignWithDepth$1(st,_t);if(it=assignWithDepth$1(it,st),st.theme&&st.theme in theme){const _t=assignWithDepth$1({},configFromInitialize),xt=assignWithDepth$1(_t.themeVariables||{},st.themeVariables);it.theme&&it.theme in theme&&(it.themeVariables=theme[it.theme].getThemeVariables(xt))}return currentConfig=it,checkConfig(currentConfig),currentConfig},setSiteConfig=nt=>(siteConfig=assignWithDepth$1({},defaultConfig),siteConfig=assignWithDepth$1(siteConfig,nt),nt.theme&&theme[nt.theme]&&(siteConfig.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),saveConfigFromInitialize=nt=>{configFromInitialize=assignWithDepth$1({},nt)},updateSiteConfig=nt=>(siteConfig=assignWithDepth$1(siteConfig,nt),updateCurrentConfig(siteConfig,directives),siteConfig),getSiteConfig=()=>assignWithDepth$1({},siteConfig),setConfig=nt=>(checkConfig(nt),assignWithDepth$1(currentConfig,nt),getConfig$1()),getConfig$1=()=>assignWithDepth$1({},currentConfig),sanitize=nt=>{var rt;["secure",...(rt=siteConfig.secure)!=null?rt:[]].forEach(it=>{nt[it]!==void 0&&(log$1.debug(`Denied attempt to modify a secure key ${it}`,nt[it]),delete nt[it])}),Object.keys(nt).forEach(it=>{it.indexOf("__")===0&&delete nt[it]}),Object.keys(nt).forEach(it=>{typeof nt[it]=="string"&&(nt[it].includes("<")||nt[it].includes(">")||nt[it].includes("url(data:"))&&delete nt[it],typeof nt[it]=="object"&&sanitize(nt[it])})},addDirective=nt=>{nt.fontFamily&&(nt.themeVariables?nt.themeVariables.fontFamily||(nt.themeVariables={fontFamily:nt.fontFamily}):nt.themeVariables={fontFamily:nt.fontFamily}),directives.push(nt),updateCurrentConfig(siteConfig,directives)},reset=(nt=siteConfig)=>{directives=[],updateCurrentConfig(nt,directives)};var ConfigWarning=(nt=>(nt.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",nt))(ConfigWarning||{});const issuedWarnings={},issueWarning=nt=>{issuedWarnings[nt]||(log$1.warn(ConfigWarning[nt]),issuedWarnings[nt]=!0)},checkConfig=nt=>{!nt||(nt.lazyLoadedDiagrams||nt.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},d3Attrs=function(nt,rt){for(let it of rt)nt.attr(it[0],it[1])},calculateSvgSizeAttrs=function(nt,rt,it){let st=new Map;return it?(st.set("width","100%"),st.set("style",`max-width: ${rt}px;`)):(st.set("height",nt),st.set("width",rt)),st},configureSvgSize=function(nt,rt,it,st){const _t=calculateSvgSizeAttrs(rt,it,st);d3Attrs(nt,_t)},setupGraphViewbox$1=function(nt,rt,it,st){const _t=rt.node().getBBox(),xt=_t.width,Et=_t.height;log$1.info(`SVG bounds: ${xt}x${Et}`,_t);let kt=0,Lt=0;log$1.info(`Graph bounds: ${kt}x${Lt}`,nt),kt=xt+it*2,Lt=Et+it*2,log$1.info(`Calculated bounds: ${kt}x${Lt}`),configureSvgSize(rt,Lt,kt,st);const It=`${_t.x-it} ${_t.y-it} ${_t.width+2*it} ${_t.height+2*it}`;rt.attr("viewBox",It)},getStyles$e=nt=>`g.classGroup text {
  fill: ${nt.nodeBorder};
  fill: ${nt.classText};
  stroke: none;
  font-family: ${nt.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${nt.classText};
}
.edgeLabel .label rect {
  fill: ${nt.mainBkg};
}
.label text {
  fill: ${nt.classText};
}
.edgeLabel .label span {
  background: ${nt.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${nt.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.classGroup line {
  stroke: ${nt.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${nt.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${nt.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${nt.lineColor} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${nt.mainBkg} !important;
  stroke: ${nt.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,classStyles=getStyles$e,getStyles$d=nt=>`
  .entityBox {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${nt.attributeBackgroundColorOdd};
    stroke: ${nt.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${nt.attributeBackgroundColorEven};
    stroke: ${nt.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${nt.tertiaryColor};
    opacity: 0.7;
    background-color: ${nt.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${nt.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }    
`,erStyles=getStyles$d,getStyles$c=()=>"",errorStyles=getStyles$c,getStyles$b=nt=>`.label {
    font-family: ${nt.fontFamily};
    color: ${nt.nodeTextColor||nt.textColor};
  }
  .cluster-label text {
    fill: ${nt.titleColor};
  }
  .cluster-label span {
    color: ${nt.titleColor};
  }

  .label text,span {
    fill: ${nt.nodeTextColor||nt.textColor};
    color: ${nt.nodeTextColor||nt.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${nt.edgeLabelBackground};
      fill: ${nt.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${nt.clusterBkg};
    stroke: ${nt.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  .cluster span {
    color: ${nt.titleColor};
  }
  /* .cluster div {
    color: ${nt.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${nt.fontFamily};
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
`,flowStyles=getStyles$b,getStyles$a=nt=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${nt.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${nt.sectionBkgColor};
  }

  .section2 {
    fill: ${nt.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${nt.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${nt.titleColor};
  }

  .sectionTitle1 {
    fill: ${nt.titleColor};
  }

  .sectionTitle2 {
    fill: ${nt.titleColor};
  }

  .sectionTitle3 {
    fill: ${nt.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${nt.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${nt.fontFamily};
      fill: ${nt.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${nt.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${nt.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${nt.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${nt.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${nt.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${nt.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${nt.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${nt.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${nt.taskBkgColor};
    stroke: ${nt.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${nt.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${nt.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${nt.activeTaskBkgColor};
    stroke: ${nt.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${nt.doneTaskBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${nt.critBorderColor};
    fill: ${nt.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${nt.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,ganttStyles=getStyles$a,getStyles$9=()=>"",infoStyles=getStyles$9,getStyles$8=nt=>`
  .pieCircle{
    stroke: ${nt.pieStrokeColor};
    stroke-width : ${nt.pieStrokeWidth};
    opacity : ${nt.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${nt.pieTitleTextSize};
    fill: ${nt.pieTitleTextColor};
    font-family: ${nt.fontFamily};
  }
  .slice {
    font-family: ${nt.fontFamily};
    fill: ${nt.pieSectionTextColor};
    font-size:${nt.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${nt.pieLegendTextColor};
    font-family: ${nt.fontFamily};
    font-size: ${nt.pieLegendTextSize};
  }
`,pieStyles=getStyles$8,getStyles$7=nt=>`

  marker {
    fill: ${nt.relationColor};
    stroke: ${nt.relationColor};
  }

  marker.cross {
    stroke: ${nt.lineColor};
  }

  svg {
    font-family: ${nt.fontFamily};
    font-size: ${nt.fontSize};
  }

  .reqBox {
    fill: ${nt.requirementBackground};
    fill-opacity: 100%;
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${nt.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${nt.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${nt.requirementBorderColor};
    stroke-width: ${nt.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${nt.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${nt.relationLabelColor};
  }

`,requirementStyles=getStyles$7,getStyles$6=nt=>`.actor {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }

  text.actor > tspan {
    fill: ${nt.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${nt.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${nt.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${nt.signalColor};
  }

  #arrowhead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .sequenceNumber {
    fill: ${nt.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${nt.signalColor};
  }

  #crosshead path {
    fill: ${nt.signalColor};
    stroke: ${nt.signalColor};
  }

  .messageText {
    fill: ${nt.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${nt.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${nt.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${nt.labelBoxBorderColor};
    fill: ${nt.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${nt.noteBorderColor};
    fill: ${nt.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${nt.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation1 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .activation2 {
    fill: ${nt.activationBkgColor};
    stroke: ${nt.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${nt.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${nt.actorBorder};
    fill: ${nt.actorBkg};
    stroke-width: 2px;
  }
`,sequenceStyles=getStyles$6,getStyles$5=nt=>`
defs #statediagram-barbEnd {
    fill: ${nt.transitionColor};
    stroke: ${nt.transitionColor};
  }
g.stateGroup text {
  fill: ${nt.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${nt.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${nt.stateLabelColor};
}

g.stateGroup rect {
  fill: ${nt.mainBkg};
  stroke: ${nt.nodeBorder};
}

g.stateGroup line {
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${nt.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${nt.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${nt.noteBorderColor};
  fill: ${nt.noteBkgColor};

  text {
    fill: ${nt.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${nt.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${nt.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${nt.transitionLabelColor||nt.tertiaryTextColor};
}

.stateLabel text {
  fill: ${nt.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node .fork-join {
  fill: ${nt.specialStateColor};
  stroke: ${nt.specialStateColor};
}

.node circle.state-end {
  fill: ${nt.innerEndBackground};
  stroke: ${nt.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${nt.compositeBackground||nt.background};
  // stroke: ${nt.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${nt.stateBkg||nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${nt.mainBkg};
  stroke: ${nt.stateBorder||nt.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${nt.lineColor};
}

.statediagram-cluster rect {
  fill: ${nt.compositeTitleBackground};
  stroke: ${nt.stateBorder||nt.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${nt.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${nt.stateBorder||nt.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${nt.compositeBackground||nt.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${nt.altBackground?nt.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${nt.noteBkgColor};
  stroke: ${nt.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${nt.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${nt.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${nt.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${nt.lineColor};
  stroke: ${nt.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${nt.textColor};
}
`,stateStyles=getStyles$5,getStyles$4=nt=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${nt.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${nt.textColor}
  }

  .legend {
    fill: ${nt.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${nt.textColor}
  }

  .face {
    ${nt.faceColor?`fill: ${nt.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${nt.mainBkg};
    stroke: ${nt.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${nt.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${nt.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${nt.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${nt.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${nt.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${nt.tertiaryColor};
    border: 1px solid ${nt.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${nt.fillType0?`fill: ${nt.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${nt.fillType0?`fill: ${nt.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${nt.fillType0?`fill: ${nt.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${nt.fillType0?`fill: ${nt.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${nt.fillType0?`fill: ${nt.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${nt.fillType0?`fill: ${nt.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${nt.fillType0?`fill: ${nt.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${nt.fillType0?`fill: ${nt.fillType7}`:""};
  }

  .actor-0 {
    ${nt.actor0?`fill: ${nt.actor0}`:""};
  }
  .actor-1 {
    ${nt.actor1?`fill: ${nt.actor1}`:""};
  }
  .actor-2 {
    ${nt.actor2?`fill: ${nt.actor2}`:""};
  }
  .actor-3 {
    ${nt.actor3?`fill: ${nt.actor3}`:""};
  }
  .actor-4 {
    ${nt.actor4?`fill: ${nt.actor4}`:""};
  }
  .actor-5 {
    ${nt.actor5?`fill: ${nt.actor5}`:""};
  }
`,journeyStyles=getStyles$4,getStyles$3=nt=>`.person {
    stroke: ${nt.personBorder};
    fill: ${nt.personBkg};
  }
`,c4Styles=getStyles$3,themes={flowchart:flowStyles,"flowchart-v2":flowStyles,sequence:sequenceStyles,gantt:ganttStyles,classDiagram:classStyles,"classDiagram-v2":classStyles,class:classStyles,stateDiagram:stateStyles,state:stateStyles,info:infoStyles,pie:pieStyles,er:erStyles,error:errorStyles,journey:journeyStyles,requirement:requirementStyles,c4:c4Styles},getStyles$1=(nt,rt,it)=>{let st="";return nt in themes&&themes[nt]?st=themes[nt](it):log$1.warn(`No theme found for ${nt}`),` & {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
    fill: ${it.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${it.errorBkgColor};
  }
  & .error-text {
    fill: ${it.errorTextColor};
    stroke: ${it.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${it.lineColor};
    stroke: ${it.lineColor};
  }
  & .marker.cross {
    stroke: ${it.lineColor};
  }

  & svg {
    font-family: ${it.fontFamily};
    font-size: ${it.fontSize};
  }

  ${st}

  ${rt}
`},addStylesForDiagram=(nt,rt)=>{themes[nt]=rt},getStyles$2=getStyles$1;let title$1="",diagramTitle="",description="";const sanitizeText$4=nt=>sanitizeText$5(nt,getConfig$1()),clear$g=function(){title$1="",description="",diagramTitle=""},setAccTitle=function(nt){title$1=sanitizeText$4(nt).replace(/^\s+/g,"")},getAccTitle=function(){return title$1||diagramTitle},setAccDescription=function(nt){description=sanitizeText$4(nt).replace(/\n\s+/g,`
`)},getAccDescription=function(){return description},setDiagramTitle=function(nt){diagramTitle=sanitizeText$4(nt)},getDiagramTitle=function(){return diagramTitle},commonDb={setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,getAccDescription,setAccDescription,clear:clear$g},commonDb$1=Object.freeze(Object.defineProperty({__proto__:null,clear:clear$g,default:commonDb,getAccDescription,getAccTitle,getDiagramTitle,setAccDescription,setAccTitle,setDiagramTitle},Symbol.toStringTag,{value:"Module"}));let currentDirective={};const parseDirective$c=function(nt,rt,it,st){log$1.debug("parseDirective is being called",rt,it,st);try{if(rt!==void 0)switch(rt=rt.trim(),it){case"open_directive":currentDirective={};break;case"type_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.type=rt.toLowerCase();break;case"arg_directive":if(!currentDirective)throw new Error("currentDirective is undefined");currentDirective.args=JSON.parse(rt);break;case"close_directive":handleDirective(nt,currentDirective,st),currentDirective=void 0;break}}catch(_t){log$1.error(`Error while rendering sequenceDiagram directive: ${rt} jison context: ${it}`),log$1.error(_t.message)}},handleDirective=function(nt,rt,it){switch(log$1.info(`Directive type=${rt.type} with args:`,rt.args),rt.type){case"init":case"initialize":{["config"].forEach(st=>{rt.args[st]!==void 0&&(it==="flowchart-v2"&&(it="flowchart"),rt.args[it]=rt.args[st],delete rt.args[st])}),log$1.info("sanitize in handleDirective",rt.args),directiveSanitizer(rt.args),log$1.info("sanitize in handleDirective (done)",rt.args),addDirective(rt.args);break}case"wrap":case"nowrap":nt&&nt.setWrap&&nt.setWrap(rt.type==="wrap");break;case"themeCss":log$1.warn("themeCss encountered");break;default:log$1.warn(`Unhandled directive: source: '%%{${rt.type}: ${JSON.stringify(rt.args?rt.args:{})}}%%`,rt);break}},log=log$1,setLogLevel=setLogLevel$1,getConfig=getConfig$1,sanitizeText$3=nt=>sanitizeText$5(nt,getConfig()),setupGraphViewbox=setupGraphViewbox$1,getCommonDb=()=>commonDb$1,parseDirective$b=(nt,rt,it,st)=>parseDirective$c(nt,rt,it,st),diagrams={},registerDiagram=(nt,rt,it)=>{if(diagrams[nt])throw new Error(`Diagram ${nt} already registered.`);diagrams[nt]=rt,it&&addDetector(nt,it),addStylesForDiagram(nt,rt.styles),rt.injectUtils&&rt.injectUtils(log,setLogLevel,getConfig,sanitizeText$3,setupGraphViewbox,getCommonDb(),parseDirective$b)},getDiagram=nt=>{if(nt in diagrams)return diagrams[nt];throw new Error(`Diagram ${nt} not found.`)};var parser$c=function(){var nt=function(kn,Cn,Pn,An){for(Pn=Pn||{},An=kn.length;An--;Pn[kn[An]]=Cn);return Pn},rt=[1,4],it=[1,7],st=[1,5],_t=[1,9],xt=[1,6],Et=[2,6],kt=[1,16],Lt=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],It=[8,14,20,22,24,25,27,29,32,37,40],Rt=[8,13,14,20,22,24,25,27,29,32,37,40],Nt=[1,26],Bt=[6,8,14,50,55],Ft=[8,14,55],Yt=[1,53],Zt=[1,52],Wt=[8,14,30,33,35,38,55],Kt=[1,67],Jt=[1,68],on=[1,69],rn=[8,14,33,35,42,55],ln={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(Cn,Pn,An,cn,Ln,an,zn){var dn=an.length-1;switch(Ln){case 3:return an[dn];case 4:return an[dn-1];case 5:return cn.setDirection(an[dn-3]),an[dn-1];case 7:cn.setOptions(an[dn-1]),this.$=an[dn];break;case 8:an[dn-1]+=an[dn],this.$=an[dn-1];break;case 10:this.$=[];break;case 11:an[dn-1].push(an[dn]),this.$=an[dn-1];break;case 12:this.$=an[dn-1];break;case 17:this.$=an[dn].trim(),cn.setAccTitle(this.$);break;case 18:case 19:this.$=an[dn].trim(),cn.setAccDescription(this.$);break;case 20:cn.addSection(an[dn].substr(8)),this.$=an[dn].substr(8);break;case 22:cn.checkout(an[dn]);break;case 23:cn.branch(an[dn]);break;case 24:cn.branch(an[dn-2],an[dn]);break;case 25:cn.cherryPick(an[dn],"",void 0);break;case 26:cn.cherryPick(an[dn-2],"",an[dn]);break;case 27:case 29:cn.cherryPick(an[dn-2],"","");break;case 28:cn.cherryPick(an[dn],"",an[dn-2]);break;case 30:cn.merge(an[dn],"","","");break;case 31:cn.merge(an[dn-2],an[dn],"","");break;case 32:cn.merge(an[dn-2],"",an[dn],"");break;case 33:cn.merge(an[dn-2],"","",an[dn]);break;case 34:cn.merge(an[dn-4],an[dn],"",an[dn-2]);break;case 35:cn.merge(an[dn-4],"",an[dn],an[dn-2]);break;case 36:cn.merge(an[dn-4],"",an[dn-2],an[dn]);break;case 37:cn.merge(an[dn-4],an[dn-2],an[dn],"");break;case 38:cn.merge(an[dn-4],an[dn-2],"",an[dn]);break;case 39:cn.merge(an[dn-4],an[dn],an[dn-2],"");break;case 40:cn.merge(an[dn-6],an[dn-4],an[dn-2],an[dn]);break;case 41:cn.merge(an[dn-6],an[dn],an[dn-4],an[dn-2]);break;case 42:cn.merge(an[dn-6],an[dn-4],an[dn],an[dn-2]);break;case 43:cn.merge(an[dn-6],an[dn-2],an[dn-4],an[dn]);break;case 44:cn.merge(an[dn-6],an[dn],an[dn-2],an[dn-4]);break;case 45:cn.merge(an[dn-6],an[dn-2],an[dn],an[dn-4]);break;case 46:cn.commit(an[dn]);break;case 47:cn.commit("","",cn.commitType.NORMAL,an[dn]);break;case 48:cn.commit("","",an[dn],"");break;case 49:cn.commit("","",an[dn],an[dn-2]);break;case 50:cn.commit("","",an[dn-2],an[dn]);break;case 51:cn.commit("",an[dn],cn.commitType.NORMAL,"");break;case 52:cn.commit("",an[dn-2],cn.commitType.NORMAL,an[dn]);break;case 53:cn.commit("",an[dn],cn.commitType.NORMAL,an[dn-2]);break;case 54:cn.commit("",an[dn-2],an[dn],"");break;case 55:cn.commit("",an[dn],an[dn-2],"");break;case 56:cn.commit("",an[dn-4],an[dn-2],an[dn]);break;case 57:cn.commit("",an[dn-4],an[dn],an[dn-2]);break;case 58:cn.commit("",an[dn-2],an[dn-4],an[dn]);break;case 59:cn.commit("",an[dn],an[dn-4],an[dn-2]);break;case 60:cn.commit("",an[dn],an[dn-2],an[dn-4]);break;case 61:cn.commit("",an[dn-2],an[dn],an[dn-4]);break;case 62:cn.commit(an[dn],"",cn.commitType.NORMAL,"");break;case 63:cn.commit(an[dn],"",cn.commitType.NORMAL,an[dn-2]);break;case 64:cn.commit(an[dn-2],"",cn.commitType.NORMAL,an[dn]);break;case 65:cn.commit(an[dn-2],"",an[dn],"");break;case 66:cn.commit(an[dn],"",an[dn-2],"");break;case 67:cn.commit(an[dn],an[dn-2],cn.commitType.NORMAL,"");break;case 68:cn.commit(an[dn-2],an[dn],cn.commitType.NORMAL,"");break;case 69:cn.commit(an[dn-4],"",an[dn-2],an[dn]);break;case 70:cn.commit(an[dn-4],"",an[dn],an[dn-2]);break;case 71:cn.commit(an[dn-2],"",an[dn-4],an[dn]);break;case 72:cn.commit(an[dn],"",an[dn-4],an[dn-2]);break;case 73:cn.commit(an[dn],"",an[dn-2],an[dn-4]);break;case 74:cn.commit(an[dn-2],"",an[dn],an[dn-4]);break;case 75:cn.commit(an[dn-4],an[dn],an[dn-2],"");break;case 76:cn.commit(an[dn-4],an[dn-2],an[dn],"");break;case 77:cn.commit(an[dn-2],an[dn],an[dn-4],"");break;case 78:cn.commit(an[dn],an[dn-2],an[dn-4],"");break;case 79:cn.commit(an[dn],an[dn-4],an[dn-2],"");break;case 80:cn.commit(an[dn-2],an[dn-4],an[dn],"");break;case 81:cn.commit(an[dn-4],an[dn],cn.commitType.NORMAL,an[dn-2]);break;case 82:cn.commit(an[dn-4],an[dn-2],cn.commitType.NORMAL,an[dn]);break;case 83:cn.commit(an[dn-2],an[dn],cn.commitType.NORMAL,an[dn-4]);break;case 84:cn.commit(an[dn],an[dn-2],cn.commitType.NORMAL,an[dn-4]);break;case 85:cn.commit(an[dn],an[dn-4],cn.commitType.NORMAL,an[dn-2]);break;case 86:cn.commit(an[dn-2],an[dn-4],cn.commitType.NORMAL,an[dn]);break;case 87:cn.commit(an[dn-6],an[dn-4],an[dn-2],an[dn]);break;case 88:cn.commit(an[dn-6],an[dn-4],an[dn],an[dn-2]);break;case 89:cn.commit(an[dn-6],an[dn-2],an[dn-4],an[dn]);break;case 90:cn.commit(an[dn-6],an[dn],an[dn-4],an[dn-2]);break;case 91:cn.commit(an[dn-6],an[dn-2],an[dn],an[dn-4]);break;case 92:cn.commit(an[dn-6],an[dn],an[dn-2],an[dn-4]);break;case 93:cn.commit(an[dn-4],an[dn-6],an[dn-2],an[dn]);break;case 94:cn.commit(an[dn-4],an[dn-6],an[dn],an[dn-2]);break;case 95:cn.commit(an[dn-2],an[dn-6],an[dn-4],an[dn]);break;case 96:cn.commit(an[dn],an[dn-6],an[dn-4],an[dn-2]);break;case 97:cn.commit(an[dn-2],an[dn-6],an[dn],an[dn-4]);break;case 98:cn.commit(an[dn],an[dn-6],an[dn-2],an[dn-4]);break;case 99:cn.commit(an[dn],an[dn-4],an[dn-2],an[dn-6]);break;case 100:cn.commit(an[dn-2],an[dn-4],an[dn],an[dn-6]);break;case 101:cn.commit(an[dn],an[dn-2],an[dn-4],an[dn-6]);break;case 102:cn.commit(an[dn-2],an[dn],an[dn-4],an[dn-6]);break;case 103:cn.commit(an[dn-4],an[dn-2],an[dn],an[dn-6]);break;case 104:cn.commit(an[dn-4],an[dn],an[dn-2],an[dn-6]);break;case 105:cn.commit(an[dn-2],an[dn-4],an[dn-6],an[dn]);break;case 106:cn.commit(an[dn],an[dn-4],an[dn-6],an[dn-2]);break;case 107:cn.commit(an[dn-2],an[dn],an[dn-6],an[dn-4]);break;case 108:cn.commit(an[dn],an[dn-2],an[dn-6],an[dn-4]);break;case 109:cn.commit(an[dn-4],an[dn-2],an[dn-6],an[dn]);break;case 110:cn.commit(an[dn-4],an[dn],an[dn-6],an[dn-2]);break;case 111:this.$="";break;case 112:this.$=an[dn];break;case 113:this.$=cn.commitType.NORMAL;break;case 114:this.$=cn.commitType.REVERSE;break;case 115:this.$=cn.commitType.HIGHLIGHT;break;case 118:cn.parseDirective("%%{","open_directive");break;case 119:cn.parseDirective(an[dn],"type_directive");break;case 120:an[dn]=an[dn].trim().replace(/'/g,'"'),cn.parseDirective(an[dn],"arg_directive");break;case 121:cn.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:rt,8:it,14:st,46:8,50:_t,55:xt},{1:[3]},{3:10,4:2,5:3,6:rt,8:it,14:st,46:8,50:_t,55:xt},{3:11,4:2,5:3,6:rt,8:it,14:st,46:8,50:_t,55:xt},{7:12,8:Et,9:[1,13],10:[1,14],11:15,14:kt},nt(Lt,[2,124]),nt(Lt,[2,125]),nt(Lt,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:Et,11:15,14:kt},{9:[1,21]},nt(It,[2,10],{12:22,13:[1,23]}),nt(Rt,[2,9]),{9:[1,25],48:24,53:Nt},nt([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:Et,11:15,14:kt},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},nt(Rt,[2,8]),nt(Bt,[2,116]),{49:45,52:[1,46]},nt(Bt,[2,121]),{1:[2,4]},{8:[1,47]},nt(It,[2,11]),{4:48,8:it,14:st,55:xt},nt(It,[2,13]),nt(Ft,[2,14]),nt(Ft,[2,15]),nt(Ft,[2,16]),{21:[1,49]},{23:[1,50]},nt(Ft,[2,19]),nt(Ft,[2,20]),nt(Ft,[2,21]),{28:51,34:Yt,54:Zt},nt(Ft,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:Yt,54:Zt},{33:[1,61],35:[1,62]},{28:63,34:Yt,54:Zt},{48:64,53:Nt},{53:[2,120]},{1:[2,5]},nt(It,[2,12]),nt(Ft,[2,17]),nt(Ft,[2,18]),nt(Ft,[2,22]),nt(Wt,[2,122]),nt(Wt,[2,123]),nt(Ft,[2,46]),{34:[1,65]},{39:66,43:Kt,44:Jt,45:on},{34:[1,70]},{34:[1,71]},nt(Ft,[2,112]),nt(Ft,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},nt(Ft,[2,23],{30:[1,78]}),nt(Bt,[2,117]),nt(Ft,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),nt(Ft,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),nt(rn,[2,113]),nt(rn,[2,114]),nt(rn,[2,115]),nt(Ft,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),nt(Ft,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:Kt,44:Jt,45:on},{34:[1,93]},nt(Ft,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:Kt,44:Jt,45:on},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:Kt,44:Jt,45:on},{34:[1,106]},{34:[1,107]},{39:108,43:Kt,44:Jt,45:on},{34:[1,109]},nt(Ft,[2,31],{35:[1,111],38:[1,110]}),nt(Ft,[2,32],{33:[1,113],35:[1,112]}),nt(Ft,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},nt(Ft,[2,24]),nt(Ft,[2,49],{33:[1,120],42:[1,121]}),nt(Ft,[2,53],{38:[1,122],42:[1,123]}),nt(Ft,[2,63],{33:[1,125],38:[1,124]}),nt(Ft,[2,50],{33:[1,126],42:[1,127]}),nt(Ft,[2,55],{35:[1,128],42:[1,129]}),nt(Ft,[2,66],{33:[1,131],35:[1,130]}),nt(Ft,[2,52],{38:[1,132],42:[1,133]}),nt(Ft,[2,54],{35:[1,134],42:[1,135]}),nt(Ft,[2,67],{35:[1,137],38:[1,136]}),nt(Ft,[2,64],{33:[1,139],38:[1,138]}),nt(Ft,[2,65],{33:[1,141],35:[1,140]}),nt(Ft,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:Kt,44:Jt,45:on},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:Kt,44:Jt,45:on},nt(Ft,[2,26]),nt(Ft,[2,27]),nt(Ft,[2,28]),nt(Ft,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:Kt,44:Jt,45:on},{34:[1,153]},{39:154,43:Kt,44:Jt,45:on},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:Kt,44:Jt,45:on},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:Kt,44:Jt,45:on},{34:[1,167]},{39:168,43:Kt,44:Jt,45:on},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:Kt,44:Jt,45:on},{34:[1,173]},nt(Ft,[2,37],{35:[1,174]}),nt(Ft,[2,38],{38:[1,175]}),nt(Ft,[2,36],{33:[1,176]}),nt(Ft,[2,39],{35:[1,177]}),nt(Ft,[2,34],{38:[1,178]}),nt(Ft,[2,35],{33:[1,179]}),nt(Ft,[2,60],{42:[1,180]}),nt(Ft,[2,73],{33:[1,181]}),nt(Ft,[2,61],{42:[1,182]}),nt(Ft,[2,84],{38:[1,183]}),nt(Ft,[2,74],{33:[1,184]}),nt(Ft,[2,83],{38:[1,185]}),nt(Ft,[2,59],{42:[1,186]}),nt(Ft,[2,72],{33:[1,187]}),nt(Ft,[2,58],{42:[1,188]}),nt(Ft,[2,78],{35:[1,189]}),nt(Ft,[2,71],{33:[1,190]}),nt(Ft,[2,77],{35:[1,191]}),nt(Ft,[2,57],{42:[1,192]}),nt(Ft,[2,85],{38:[1,193]}),nt(Ft,[2,56],{42:[1,194]}),nt(Ft,[2,79],{35:[1,195]}),nt(Ft,[2,80],{35:[1,196]}),nt(Ft,[2,86],{38:[1,197]}),nt(Ft,[2,70],{33:[1,198]}),nt(Ft,[2,81],{38:[1,199]}),nt(Ft,[2,69],{33:[1,200]}),nt(Ft,[2,75],{35:[1,201]}),nt(Ft,[2,76],{35:[1,202]}),nt(Ft,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:Kt,44:Jt,45:on},{34:[1,206]},{34:[1,207]},{39:208,43:Kt,44:Jt,45:on},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:Kt,44:Jt,45:on},{34:[1,214]},{39:215,43:Kt,44:Jt,45:on},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:Kt,44:Jt,45:on},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:Kt,44:Jt,45:on},{34:[1,228]},{39:229,43:Kt,44:Jt,45:on},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:Kt,44:Jt,45:on},nt(Ft,[2,40]),nt(Ft,[2,42]),nt(Ft,[2,41]),nt(Ft,[2,43]),nt(Ft,[2,45]),nt(Ft,[2,44]),nt(Ft,[2,101]),nt(Ft,[2,102]),nt(Ft,[2,99]),nt(Ft,[2,100]),nt(Ft,[2,104]),nt(Ft,[2,103]),nt(Ft,[2,108]),nt(Ft,[2,107]),nt(Ft,[2,106]),nt(Ft,[2,105]),nt(Ft,[2,110]),nt(Ft,[2,109]),nt(Ft,[2,98]),nt(Ft,[2,97]),nt(Ft,[2,96]),nt(Ft,[2,95]),nt(Ft,[2,93]),nt(Ft,[2,94]),nt(Ft,[2,92]),nt(Ft,[2,91]),nt(Ft,[2,90]),nt(Ft,[2,89]),nt(Ft,[2,87]),nt(Ft,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(Cn,Pn){if(Pn.recoverable)this.trace(Cn);else{var An=new Error(Cn);throw An.hash=Pn,An}},parse:function(Cn){var Pn=this,An=[0],cn=[],Ln=[null],an=[],zn=this.table,dn="",Fn=0,ir=0,tr=2,Jn=1,hr=an.slice.call(arguments,1),lr=Object.create(this.lexer),cr={yy:{}};for(var Cr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Cr)&&(cr.yy[Cr]=this.yy[Cr]);lr.setInput(Cn,cr.yy),cr.yy.lexer=lr,cr.yy.parser=this,typeof lr.yylloc>"u"&&(lr.yylloc={});var Er=lr.yylloc;an.push(Er);var ar=lr.options&&lr.options.ranges;typeof cr.yy.parseError=="function"?this.parseError=cr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Fr(){var or;return or=cn.pop()||lr.lex()||Jn,typeof or!="number"&&(or instanceof Array&&(cn=or,or=cn.pop()),or=Pn.symbols_[or]||or),or}for(var mr,xr,fr,gr,er={},nn,un,pn,Rn;;){if(xr=An[An.length-1],this.defaultActions[xr]?fr=this.defaultActions[xr]:((mr===null||typeof mr>"u")&&(mr=Fr()),fr=zn[xr]&&zn[xr][mr]),typeof fr>"u"||!fr.length||!fr[0]){var _n="";Rn=[];for(nn in zn[xr])this.terminals_[nn]&&nn>tr&&Rn.push("'"+this.terminals_[nn]+"'");lr.showPosition?_n="Parse error on line "+(Fn+1)+`:
`+lr.showPosition()+`
Expecting `+Rn.join(", ")+", got '"+(this.terminals_[mr]||mr)+"'":_n="Parse error on line "+(Fn+1)+": Unexpected "+(mr==Jn?"end of input":"'"+(this.terminals_[mr]||mr)+"'"),this.parseError(_n,{text:lr.match,token:this.terminals_[mr]||mr,line:lr.yylineno,loc:Er,expected:Rn})}if(fr[0]instanceof Array&&fr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xr+", token: "+mr);switch(fr[0]){case 1:An.push(mr),Ln.push(lr.yytext),an.push(lr.yylloc),An.push(fr[1]),mr=null,ir=lr.yyleng,dn=lr.yytext,Fn=lr.yylineno,Er=lr.yylloc;break;case 2:if(un=this.productions_[fr[1]][1],er.$=Ln[Ln.length-un],er._$={first_line:an[an.length-(un||1)].first_line,last_line:an[an.length-1].last_line,first_column:an[an.length-(un||1)].first_column,last_column:an[an.length-1].last_column},ar&&(er._$.range=[an[an.length-(un||1)].range[0],an[an.length-1].range[1]]),gr=this.performAction.apply(er,[dn,ir,Fn,cr.yy,fr[1],Ln,an].concat(hr)),typeof gr<"u")return gr;un&&(An=An.slice(0,-1*un*2),Ln=Ln.slice(0,-1*un),an=an.slice(0,-1*un)),An.push(this.productions_[fr[1]][0]),Ln.push(er.$),an.push(er._$),pn=zn[An[An.length-2]][An[An.length-1]],An.push(pn);break;case 3:return!0}}return!0}},gn=function(){var kn={EOF:1,parseError:function(Pn,An){if(this.yy.parser)this.yy.parser.parseError(Pn,An);else throw new Error(Pn)},setInput:function(Cn,Pn){return this.yy=Pn||this.yy||{},this._input=Cn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Cn=this._input[0];this.yytext+=Cn,this.yyleng++,this.offset++,this.match+=Cn,this.matched+=Cn;var Pn=Cn.match(/(?:\r\n?|\n).*/g);return Pn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Cn},unput:function(Cn){var Pn=Cn.length,An=Cn.split(/(?:\r\n?|\n)/g);this._input=Cn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Pn),this.offset-=Pn;var cn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),An.length-1&&(this.yylineno-=An.length-1);var Ln=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:An?(An.length===cn.length?this.yylloc.first_column:0)+cn[cn.length-An.length].length-An[0].length:this.yylloc.first_column-Pn},this.options.ranges&&(this.yylloc.range=[Ln[0],Ln[0]+this.yyleng-Pn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Cn){this.unput(this.match.slice(Cn))},pastInput:function(){var Cn=this.matched.substr(0,this.matched.length-this.match.length);return(Cn.length>20?"...":"")+Cn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Cn=this.match;return Cn.length<20&&(Cn+=this._input.substr(0,20-Cn.length)),(Cn.substr(0,20)+(Cn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Cn=this.pastInput(),Pn=new Array(Cn.length+1).join("-");return Cn+this.upcomingInput()+`
`+Pn+"^"},test_match:function(Cn,Pn){var An,cn,Ln;if(this.options.backtrack_lexer&&(Ln={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ln.yylloc.range=this.yylloc.range.slice(0))),cn=Cn[0].match(/(?:\r\n?|\n).*/g),cn&&(this.yylineno+=cn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:cn?cn[cn.length-1].length-cn[cn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Cn[0].length},this.yytext+=Cn[0],this.match+=Cn[0],this.matches=Cn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Cn[0].length),this.matched+=Cn[0],An=this.performAction.call(this,this.yy,this,Pn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),An)return An;if(this._backtrack){for(var an in Ln)this[an]=Ln[an];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Cn,Pn,An,cn;this._more||(this.yytext="",this.match="");for(var Ln=this._currentRules(),an=0;an<Ln.length;an++)if(An=this._input.match(this.rules[Ln[an]]),An&&(!Pn||An[0].length>Pn[0].length)){if(Pn=An,cn=an,this.options.backtrack_lexer){if(Cn=this.test_match(An,Ln[an]),Cn!==!1)return Cn;if(this._backtrack){Pn=!1;continue}else return!1}else if(!this.options.flex)break}return Pn?(Cn=this.test_match(Pn,Ln[cn]),Cn!==!1?Cn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Pn=this.next();return Pn||this.lex()},begin:function(Pn){this.conditionStack.push(Pn)},popState:function(){var Pn=this.conditionStack.length-1;return Pn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Pn){return Pn=this.conditionStack.length-1-Math.abs(Pn||0),Pn>=0?this.conditionStack[Pn]:"INITIAL"},pushState:function(Pn){this.begin(Pn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Pn,An,cn,Ln){switch(cn){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return kn}();ln.lexer=gn;function wn(){this.yy={}}return wn.prototype=ln,ln.Parser=wn,new wn}();parser$c.parser=parser$c;const gitGraphParser=parser$c,gitGraphDetector=nt=>nt.match(/^\s*gitGraph/)!==null;let mainBranchName=getConfig$1().gitGraph.mainBranchName,mainBranchOrder=getConfig$1().gitGraph.mainBranchOrder,commits={},head=null,branchesConfig={};branchesConfig[mainBranchName]={name:mainBranchName,order:mainBranchOrder};let branches={};branches[mainBranchName]=head;let curBranch=mainBranchName,direction$3="LR",seq=0;function getId(){return random({length:7})}const parseDirective$a=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)};function uniqBy(nt,rt){const it=Object.create(null);return nt.reduce((st,_t)=>{const xt=rt(_t);return it[xt]||(it[xt]=!0,st.push(_t)),st},[])}const setDirection$3=function(nt){direction$3=nt};let options={};const setOptions=function(nt){log$1.debug("options str",nt),nt=nt&&nt.trim(),nt=nt||"{}";try{options=JSON.parse(nt)}catch(rt){log$1.error("error while parsing gitGraph options",rt.message)}},getOptions=function(){return options},commit=function(nt,rt,it,st){log$1.debug("Entering commit:",nt,rt,it,st),rt=common$1.sanitizeText(rt,getConfig$1()),nt=common$1.sanitizeText(nt,getConfig$1()),st=common$1.sanitizeText(st,getConfig$1());const _t={id:rt||seq+"-"+getId(),message:nt,seq:seq++,type:it||commitType$1.NORMAL,tag:st||"",parents:head==null?[]:[head.id],branch:curBranch};head=_t,commits[_t.id]=_t,branches[curBranch]=_t.id,log$1.debug("in pushCommit "+_t.id)},branch=function(nt,rt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0)branches[nt]=head!=null?head.id:null,branchesConfig[nt]={name:nt,order:rt?parseInt(rt,10):null},checkout(nt),log$1.debug("in createBranch");else{let it=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+nt+'")');throw it.hash={text:"branch "+nt,token:"branch "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+nt+'"']},it}},merge=function(nt,rt,it,st){nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1());const _t=commits[branches[curBranch]],xt=commits[branches[nt]];if(curBranch===nt){let kt=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(_t===void 0||!_t){let kt=new Error('Incorrect usage of "merge". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},kt}else if(branches[nt]===void 0){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") does not exist");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+nt]},kt}else if(xt===void 0||!xt){let kt=new Error('Incorrect usage of "merge". Branch to be merged ('+nt+") has no commits");throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},kt}else if(_t===xt){let kt=new Error('Incorrect usage of "merge". Both branches have same head');throw kt.hash={text:"merge "+nt,token:"merge "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},kt}else if(rt&&commits[rt]!==void 0){let kt=new Error('Incorrect usage of "merge". Commit with id:'+rt+" already exists, use different custom Id");throw kt.hash={text:"merge "+nt+rt+it+st,token:"merge "+nt+rt+it+st,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+nt+" "+rt+"_UNIQUE "+it+" "+st]},kt}const Et={id:rt||seq+"-"+getId(),message:"merged branch "+nt+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,branches[nt]],branch:curBranch,type:commitType$1.MERGE,customType:it,customId:!!rt,tag:st||""};head=Et,commits[Et.id]=Et,branches[curBranch]=Et.id,log$1.debug(branches),log$1.debug("in mergeBranch")},cherryPick=function(nt,rt,it){if(log$1.debug("Entering cherryPick:",nt,rt,it),nt=common$1.sanitizeText(nt,getConfig$1()),rt=common$1.sanitizeText(rt,getConfig$1()),it=common$1.sanitizeText(it,getConfig$1()),!nt||commits[nt]===void 0){let xt=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw xt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},xt}let st=commits[nt],_t=st.branch;if(st.type===commitType$1.MERGE){let xt=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw xt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},xt}if(!rt||commits[rt]===void 0){if(_t===curBranch){let kt=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const xt=commits[branches[curBranch]];if(xt===void 0||!xt){let kt=new Error('Incorrect usage of "cherry-pick". Current branch ('+curBranch+")has no commits");throw kt.hash={text:"cherryPick "+nt+" "+rt,token:"cherryPick "+nt+" "+rt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},kt}const Et={id:seq+"-"+getId(),message:"cherry-picked "+st+" into "+curBranch,seq:seq++,parents:[head==null?null:head.id,st.id],branch:curBranch,type:commitType$1.CHERRY_PICK,tag:it!=null?it:"cherry-pick:"+st.id};head=Et,commits[Et.id]=Et,branches[curBranch]=Et.id,log$1.debug(branches),log$1.debug("in cherryPick")}},checkout=function(nt){if(nt=common$1.sanitizeText(nt,getConfig$1()),branches[nt]===void 0){let rt=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+nt+'")');throw rt.hash={text:"checkout "+nt,token:"checkout "+nt,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+nt+'"']},rt}else{curBranch=nt;const rt=branches[curBranch];head=commits[rt]}};function upsert(nt,rt,it){const st=nt.indexOf(rt);st===-1?nt.push(it):nt.splice(st,1,it)}function prettyPrintCommitHistory(nt){const rt=nt.reduce((_t,xt)=>_t.seq>xt.seq?_t:xt,nt[0]);let it="";nt.forEach(function(_t){_t===rt?it+="	*":it+="	|"});const st=[it,rt.id,rt.seq];for(let _t in branches)branches[_t]===rt.id&&st.push(_t);if(log$1.debug(st.join(" ")),rt.parents&&rt.parents.length==2){const _t=commits[rt.parents[0]];upsert(nt,rt,_t),nt.push(commits[rt.parents[1]])}else{if(rt.parents.length==0)return;{const _t=commits[rt.parents];upsert(nt,rt,_t)}}nt=uniqBy(nt,_t=>_t.id),prettyPrintCommitHistory(nt)}const prettyPrint=function(){log$1.debug(commits);const nt=getCommitsArray()[0];prettyPrintCommitHistory([nt])},clear$f=function(){commits={},head=null;let nt=getConfig$1().gitGraph.mainBranchName,rt=getConfig$1().gitGraph.mainBranchOrder;branches={},branches[nt]=null,branchesConfig={},branchesConfig[nt]={name:nt,order:rt},curBranch=nt,seq=0,clear$g()},getBranchesAsObjArray=function(){return Object.values(branchesConfig).map((rt,it)=>rt.order!==null?rt:{...rt,order:parseFloat(`0.${it}`,10)}).sort((rt,it)=>rt.order-it.order).map(({name:rt})=>({name:rt}))},getBranches=function(){return branches},getCommits=function(){return commits},getCommitsArray=function(){const nt=Object.keys(commits).map(function(rt){return commits[rt]});return nt.forEach(function(rt){log$1.debug(rt.id)}),nt.sort((rt,it)=>rt.seq-it.seq),nt},getCurrentBranch=function(){return curBranch},getDirection$3=function(){return direction$3},getHead=function(){return head},commitType$1={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},gitGraphDb={parseDirective:parseDirective$a,getConfig:()=>getConfig$1().gitGraph,setDirection:setDirection$3,setOptions,getOptions,commit,branch,merge,cherryPick,checkout,prettyPrint,clear:clear$f,getBranchesAsObjArray,getBranches,getCommits,getCommitsArray,getCurrentBranch,getDirection:getDirection$3,getHead,setAccTitle,getAccTitle,getAccDescription,setAccDescription,setDiagramTitle,getDiagramTitle,commitType:commitType$1};let allCommitsDict={};const commitType={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},THEME_COLOR_LIMIT=8;let branchPos={},commitPos={},lanes=[],maxPos=0;const clear$e=()=>{branchPos={},commitPos={},allCommitsDict={},maxPos=0,lanes=[]},drawText$2=nt=>{const rt=document.createElementNS("http://www.w3.org/2000/svg","text");let it=[];typeof nt=="string"?it=nt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(nt)?it=nt:it=[];for(const st of it){const _t=document.createElementNS("http://www.w3.org/2000/svg","tspan");_t.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),_t.setAttribute("dy","1em"),_t.setAttribute("x","0"),_t.setAttribute("class","row"),_t.textContent=st.trim(),rt.appendChild(_t)}return rt},drawCommits=(nt,rt,it)=>{const st=getConfig().gitGraph,_t=nt.append("g").attr("class","commit-bullets"),xt=nt.append("g").attr("class","commit-labels");let Et=0;Object.keys(rt).sort((It,Rt)=>rt[It].seq-rt[Rt].seq).forEach(It=>{const Rt=rt[It],Nt=branchPos[Rt.branch].pos,Bt=Et+10;if(it){let Ft,Yt=Rt.customType!==void 0&&Rt.customType!==""?Rt.customType:Rt.type;switch(Yt){case commitType.NORMAL:Ft="commit-normal";break;case commitType.REVERSE:Ft="commit-reverse";break;case commitType.HIGHLIGHT:Ft="commit-highlight";break;case commitType.MERGE:Ft="commit-merge";break;case commitType.CHERRY_PICK:Ft="commit-cherry-pick";break;default:Ft="commit-normal"}if(Yt===commitType.HIGHLIGHT){const Zt=_t.append("rect");Zt.attr("x",Bt-10),Zt.attr("y",Nt-10),Zt.attr("height",20),Zt.attr("width",20),Zt.attr("class",`commit ${Rt.id} commit-highlight${branchPos[Rt.branch].index%THEME_COLOR_LIMIT} ${Ft}-outer`),_t.append("rect").attr("x",Bt-6).attr("y",Nt-6).attr("height",12).attr("width",12).attr("class",`commit ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT} ${Ft}-inner`)}else if(Yt===commitType.CHERRY_PICK)_t.append("circle").attr("cx",Bt).attr("cy",Nt).attr("r",10).attr("class",`commit ${Rt.id} ${Ft}`),_t.append("circle").attr("cx",Bt-3).attr("cy",Nt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Rt.id} ${Ft}`),_t.append("circle").attr("cx",Bt+3).attr("cy",Nt+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${Rt.id} ${Ft}`),_t.append("line").attr("x1",Bt+3).attr("y1",Nt+1).attr("x2",Bt).attr("y2",Nt-5).attr("stroke","#fff").attr("class",`commit ${Rt.id} ${Ft}`),_t.append("line").attr("x1",Bt-3).attr("y1",Nt+1).attr("x2",Bt).attr("y2",Nt-5).attr("stroke","#fff").attr("class",`commit ${Rt.id} ${Ft}`);else{const Zt=_t.append("circle");if(Zt.attr("cx",Bt),Zt.attr("cy",Nt),Zt.attr("r",Rt.type===commitType.MERGE?9:10),Zt.attr("class",`commit ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`),Yt===commitType.MERGE){const Wt=_t.append("circle");Wt.attr("cx",Bt),Wt.attr("cy",Nt),Wt.attr("r",6),Wt.attr("class",`commit ${Ft} ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`)}Yt===commitType.REVERSE&&_t.append("path").attr("d",`M ${Bt-5},${Nt-5}L${Bt+5},${Nt+5}M${Bt-5},${Nt+5}L${Bt+5},${Nt-5}`).attr("class",`commit ${Ft} ${Rt.id} commit${branchPos[Rt.branch].index%THEME_COLOR_LIMIT}`)}}if(commitPos[Rt.id]={x:Et+10,y:Nt},it){if(Rt.type!==commitType.CHERRY_PICK&&(Rt.customId&&Rt.type===commitType.MERGE||Rt.type!==commitType.MERGE)&&st.showCommitLabel){const Zt=xt.append("g"),Wt=Zt.insert("rect").attr("class","commit-label-bkg"),Kt=Zt.append("text").attr("x",Et).attr("y",Nt+25).attr("class","commit-label").text(Rt.id);let Jt=Kt.node().getBBox();if(Wt.attr("x",Et+10-Jt.width/2-2).attr("y",Nt+13.5).attr("width",Jt.width+2*2).attr("height",Jt.height+2*2),Kt.attr("x",Et+10-Jt.width/2),st.rotateCommitLabel){let on=-7.5-(Jt.width+10)/25*9.5,rn=10+Jt.width/25*8.5;Zt.attr("transform","translate("+on+", "+rn+") rotate("+-45+", "+Et+", "+Nt+")")}}if(Rt.tag){const Zt=xt.insert("polygon"),Wt=xt.append("circle"),Kt=xt.append("text").attr("y",Nt-16).attr("class","tag-label").text(Rt.tag);let Jt=Kt.node().getBBox();Kt.attr("x",Et+10-Jt.width/2);const on=Jt.height/2,rn=Nt-19.2;Zt.attr("class","tag-label-bkg").attr("points",`
          ${Et-Jt.width/2-4/2},${rn+2}
          ${Et-Jt.width/2-4/2},${rn-2}
          ${Et+10-Jt.width/2-4},${rn-on-2}
          ${Et+10+Jt.width/2+4},${rn-on-2}
          ${Et+10+Jt.width/2+4},${rn+on+2}
          ${Et+10-Jt.width/2-4},${rn+on+2}`),Wt.attr("cx",Et-Jt.width/2+4/2).attr("cy",rn).attr("r",1.5).attr("class","tag-hole")}}Et+=50,Et>maxPos&&(maxPos=Et)})},hasOverlappingCommits=(nt,rt,it)=>Object.keys(it).filter(xt=>it[xt].branch===rt.branch&&it[xt].seq>nt.seq&&it[xt].seq<rt.seq).length>0,findLane=(nt,rt,it=0)=>{const st=nt+Math.abs(nt-rt)/2;if(it>5)return st;if(lanes.every(Et=>Math.abs(Et-st)>=10))return lanes.push(st),st;const xt=Math.abs(nt-rt);return findLane(nt,rt-xt/5,it+1)},drawArrow=(nt,rt,it,st)=>{const _t=commitPos[rt.id],xt=commitPos[it.id],Et=hasOverlappingCommits(rt,it,st);let kt="",Lt="",It=0,Rt=0,Nt=branchPos[it.branch].index,Bt;if(Et){kt="A 10 10, 0, 0, 0,",Lt="A 10 10, 0, 0, 1,",It=10,Rt=10,Nt=branchPos[it.branch].index;const Ft=_t.y<xt.y?findLane(_t.y,xt.y):findLane(xt.y,_t.y);_t.y<xt.y?Bt=`M ${_t.x} ${_t.y} L ${_t.x} ${Ft-It} ${kt} ${_t.x+Rt} ${Ft} L ${xt.x-It} ${Ft} ${Lt} ${xt.x} ${Ft+Rt} L ${xt.x} ${xt.y}`:Bt=`M ${_t.x} ${_t.y} L ${_t.x} ${Ft+It} ${Lt} ${_t.x+Rt} ${Ft} L ${xt.x-It} ${Ft} ${kt} ${xt.x} ${Ft-Rt} L ${xt.x} ${xt.y}`}else _t.y<xt.y&&(kt="A 20 20, 0, 0, 0,",It=20,Rt=20,Nt=branchPos[it.branch].index,Bt=`M ${_t.x} ${_t.y} L ${_t.x} ${xt.y-It} ${kt} ${_t.x+Rt} ${xt.y} L ${xt.x} ${xt.y}`),_t.y>xt.y&&(kt="A 20 20, 0, 0, 0,",It=20,Rt=20,Nt=branchPos[rt.branch].index,Bt=`M ${_t.x} ${_t.y} L ${xt.x-It} ${_t.y} ${kt} ${xt.x} ${_t.y-Rt} L ${xt.x} ${xt.y}`),_t.y===xt.y&&(Nt=branchPos[rt.branch].index,Bt=`M ${_t.x} ${_t.y} L ${_t.x} ${xt.y-It} ${kt} ${_t.x+Rt} ${xt.y} L ${xt.x} ${xt.y}`);nt.append("path").attr("d",Bt).attr("class","arrow arrow"+Nt%THEME_COLOR_LIMIT)},drawArrows=(nt,rt)=>{const it=nt.append("g").attr("class","commit-arrows");Object.keys(rt).forEach(st=>{const _t=rt[st];_t.parents&&_t.parents.length>0&&_t.parents.forEach(xt=>{drawArrow(it,rt[xt],_t,rt)})})},drawBranches=(nt,rt)=>{const it=getConfig().gitGraph,st=nt.append("g");rt.forEach((_t,xt)=>{const Et=xt%THEME_COLOR_LIMIT,kt=branchPos[_t.name].pos,Lt=st.append("line");Lt.attr("x1",0),Lt.attr("y1",kt),Lt.attr("x2",maxPos),Lt.attr("y2",kt),Lt.attr("class","branch branch"+Et),lanes.push(kt);let It=_t.name;const Rt=drawText$2(It),Nt=st.insert("rect"),Ft=st.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+Et);Ft.node().appendChild(Rt);let Yt=Rt.getBBox();Nt.attr("class","branchLabelBkg label"+Et).attr("rx",4).attr("ry",4).attr("x",-Yt.width-4-(it.rotateCommitLabel===!0?30:0)).attr("y",-Yt.height/2+8).attr("width",Yt.width+18).attr("height",Yt.height+4),Ft.attr("transform","translate("+(-Yt.width-14-(it.rotateCommitLabel===!0?30:0))+", "+(kt-Yt.height/2-1)+")"),Nt.attr("transform","translate("+-19+", "+(kt-Yt.height/2)+")")})},draw$f=function(nt,rt,it,st){var It;clear$e();const _t=getConfig(),xt=_t.gitGraph;log$1.debug("in gitgraph renderer",nt+`
`,"id:",rt,it),allCommitsDict=st.db.getCommits();const Et=st.db.getBranchesAsObjArray();let kt=0;Et.forEach((Rt,Nt)=>{branchPos[Rt.name]={pos:kt,index:Nt},kt+=50+(xt.rotateCommitLabel?40:0)});const Lt=select(`[id="${rt}"]`);drawCommits(Lt,allCommitsDict,!1),xt.showBranches&&drawBranches(Lt,Et),drawArrows(Lt,allCommitsDict),drawCommits(Lt,allCommitsDict,!0),utils.insertTitle(Lt,"gitTitleText",xt.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox(void 0,Lt,xt.diagramPadding,(It=xt.useMaxWidth)!=null?It:_t.useMaxWidth)},gitGraphRenderer={draw:draw$f},getStyles=nt=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(rt=>`
        .branch-label${rt} { fill: ${nt["gitBranchLabel"+rt]}; }
        .commit${rt} { stroke: ${nt["git"+rt]}; fill: ${nt["git"+rt]}; }
        .commit-highlight${rt} { stroke: ${nt["gitInv"+rt]}; fill: ${nt["gitInv"+rt]}; }
        .label${rt}  { fill: ${nt["git"+rt]}; }
        .arrow${rt} { stroke: ${nt["git"+rt]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${nt.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelColor};}
  .commit-label-bkg { font-size: ${nt.commitLabelFontSize}; fill: ${nt.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${nt.tagLabelFontSize}; fill: ${nt.tagLabelColor};}
  .tag-label-bkg { fill: ${nt.tagLabelBackground}; stroke: ${nt.tagLabelBorder}; }
  .tag-hole { fill: ${nt.textColor}; }

  .commit-merge {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }
  .commit-reverse {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${nt.primaryColor};
    fill: ${nt.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${nt.textColor};
  }
  }
`,gitGraphStyles=getStyles;var parser$b=function(){var nt=function(Tn,En,Un,qn){for(Un=Un||{},qn=Tn.length;qn--;Un[Tn[qn]]=En);return Un},rt=[1,6],it=[1,7],st=[1,8],_t=[1,9],xt=[1,16],Et=[1,11],kt=[1,12],Lt=[1,13],It=[1,14],Rt=[1,15],Nt=[1,27],Bt=[1,33],Ft=[1,34],Yt=[1,35],Zt=[1,36],Wt=[1,37],Kt=[1,72],Jt=[1,73],on=[1,74],rn=[1,75],ln=[1,76],gn=[1,77],wn=[1,78],kn=[1,38],Cn=[1,39],Pn=[1,40],An=[1,41],cn=[1,42],Ln=[1,43],an=[1,44],zn=[1,45],dn=[1,46],Fn=[1,47],ir=[1,48],tr=[1,49],Jn=[1,50],hr=[1,51],lr=[1,52],cr=[1,53],Cr=[1,54],Er=[1,55],ar=[1,56],Fr=[1,57],mr=[1,59],xr=[1,60],fr=[1,61],gr=[1,62],er=[1,63],nn=[1,64],un=[1,65],pn=[1,66],Rn=[1,67],_n=[1,68],or=[1,69],Vn=[24,52],Wn=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Hn=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],nr=[1,94],sr=[1,95],pr=[1,96],vr=[1,97],kr=[15,24,52],si=[7,8,9,10,18,22,25,26,27,28],ui=[15,24,43,52],ii=[15,24,43,52,86,87,89,90],li=[15,43],Ei=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],wi={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(En,Un,qn,_r,Zr,yr,ni){var Ar=yr.length-1;switch(Zr){case 4:_r.setDirection("TB");break;case 5:_r.setDirection("BT");break;case 6:_r.setDirection("RL");break;case 7:_r.setDirection("LR");break;case 11:_r.parseDirective("%%{","open_directive");break;case 12:break;case 13:yr[Ar]=yr[Ar].trim().replace(/'/g,'"'),_r.parseDirective(yr[Ar],"arg_directive");break;case 14:_r.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:_r.setC4Type(yr[Ar-3]);break;case 26:_r.setTitle(yr[Ar].substring(6)),this.$=yr[Ar].substring(6);break;case 27:_r.setAccDescription(yr[Ar].substring(15)),this.$=yr[Ar].substring(15);break;case 28:this.$=yr[Ar].trim(),_r.setTitle(this.$);break;case 29:case 30:this.$=yr[Ar].trim(),_r.setAccDescription(this.$);break;case 35:case 36:yr[Ar].splice(2,0,"ENTERPRISE"),_r.addPersonOrSystemBoundary(...yr[Ar]),this.$=yr[Ar];break;case 37:_r.addPersonOrSystemBoundary(...yr[Ar]),this.$=yr[Ar];break;case 38:yr[Ar].splice(2,0,"CONTAINER"),_r.addContainerBoundary(...yr[Ar]),this.$=yr[Ar];break;case 39:_r.addDeploymentNode("node",...yr[Ar]),this.$=yr[Ar];break;case 40:_r.addDeploymentNode("nodeL",...yr[Ar]),this.$=yr[Ar];break;case 41:_r.addDeploymentNode("nodeR",...yr[Ar]),this.$=yr[Ar];break;case 42:_r.popBoundaryParseStack();break;case 46:_r.addPersonOrSystem("person",...yr[Ar]),this.$=yr[Ar];break;case 47:_r.addPersonOrSystem("external_person",...yr[Ar]),this.$=yr[Ar];break;case 48:_r.addPersonOrSystem("system",...yr[Ar]),this.$=yr[Ar];break;case 49:_r.addPersonOrSystem("system_db",...yr[Ar]),this.$=yr[Ar];break;case 50:_r.addPersonOrSystem("system_queue",...yr[Ar]),this.$=yr[Ar];break;case 51:_r.addPersonOrSystem("external_system",...yr[Ar]),this.$=yr[Ar];break;case 52:_r.addPersonOrSystem("external_system_db",...yr[Ar]),this.$=yr[Ar];break;case 53:_r.addPersonOrSystem("external_system_queue",...yr[Ar]),this.$=yr[Ar];break;case 54:_r.addContainer("container",...yr[Ar]),this.$=yr[Ar];break;case 55:_r.addContainer("container_db",...yr[Ar]),this.$=yr[Ar];break;case 56:_r.addContainer("container_queue",...yr[Ar]),this.$=yr[Ar];break;case 57:_r.addContainer("external_container",...yr[Ar]),this.$=yr[Ar];break;case 58:_r.addContainer("external_container_db",...yr[Ar]),this.$=yr[Ar];break;case 59:_r.addContainer("external_container_queue",...yr[Ar]),this.$=yr[Ar];break;case 60:_r.addComponent("component",...yr[Ar]),this.$=yr[Ar];break;case 61:_r.addComponent("component_db",...yr[Ar]),this.$=yr[Ar];break;case 62:_r.addComponent("component_queue",...yr[Ar]),this.$=yr[Ar];break;case 63:_r.addComponent("external_component",...yr[Ar]),this.$=yr[Ar];break;case 64:_r.addComponent("external_component_db",...yr[Ar]),this.$=yr[Ar];break;case 65:_r.addComponent("external_component_queue",...yr[Ar]),this.$=yr[Ar];break;case 67:_r.addRel("rel",...yr[Ar]),this.$=yr[Ar];break;case 68:_r.addRel("birel",...yr[Ar]),this.$=yr[Ar];break;case 69:_r.addRel("rel_u",...yr[Ar]),this.$=yr[Ar];break;case 70:_r.addRel("rel_d",...yr[Ar]),this.$=yr[Ar];break;case 71:_r.addRel("rel_l",...yr[Ar]),this.$=yr[Ar];break;case 72:_r.addRel("rel_r",...yr[Ar]),this.$=yr[Ar];break;case 73:_r.addRel("rel_b",...yr[Ar]),this.$=yr[Ar];break;case 74:yr[Ar].splice(0,1),_r.addRel("rel",...yr[Ar]),this.$=yr[Ar];break;case 75:_r.updateElStyle("update_el_style",...yr[Ar]),this.$=yr[Ar];break;case 76:_r.updateRelStyle("update_rel_style",...yr[Ar]),this.$=yr[Ar];break;case 77:_r.updateLayoutConfig("update_layout_config",...yr[Ar]),this.$=yr[Ar];break;case 78:this.$=[yr[Ar]];break;case 79:yr[Ar].unshift(yr[Ar-1]),this.$=yr[Ar];break;case 80:case 82:this.$=yr[Ar].trim();break;case 81:let gi={};gi[yr[Ar-1].trim()]=yr[Ar].trim(),this.$=gi;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:rt,8:it,9:st,10:_t,11:5,12:10,18:xt,22:Et,25:kt,26:Lt,27:It,28:Rt},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:rt,8:it,9:st,10:_t,11:5,12:10,18:xt,22:Et,25:kt,26:Lt,27:It,28:Rt},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:Nt},nt([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,53:32,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or},{23:79,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,53:32,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or},{23:80,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,53:32,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or},{23:81,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,53:32,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or},{23:82,29:29,30:30,31:31,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,39:58,40:70,42:71,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,53:32,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},nt(Vn,[2,20],{53:32,39:58,40:70,42:71,30:87,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or}),nt(Vn,[2,21]),nt(Wn,[2,23],{15:[1,88]}),nt(Vn,[2,43],{15:[1,89]}),nt(Hn,[2,26]),nt(Hn,[2,27]),{35:[1,90]},{37:[1,91]},nt(Hn,[2,30]),{45:92,85:93,86:nr,87:sr,89:pr,90:vr},{45:98,85:93,86:nr,87:sr,89:pr,90:vr},{45:99,85:93,86:nr,87:sr,89:pr,90:vr},{45:100,85:93,86:nr,87:sr,89:pr,90:vr},{45:101,85:93,86:nr,87:sr,89:pr,90:vr},{45:102,85:93,86:nr,87:sr,89:pr,90:vr},{45:103,85:93,86:nr,87:sr,89:pr,90:vr},{45:104,85:93,86:nr,87:sr,89:pr,90:vr},{45:105,85:93,86:nr,87:sr,89:pr,90:vr},{45:106,85:93,86:nr,87:sr,89:pr,90:vr},{45:107,85:93,86:nr,87:sr,89:pr,90:vr},{45:108,85:93,86:nr,87:sr,89:pr,90:vr},{45:109,85:93,86:nr,87:sr,89:pr,90:vr},{45:110,85:93,86:nr,87:sr,89:pr,90:vr},{45:111,85:93,86:nr,87:sr,89:pr,90:vr},{45:112,85:93,86:nr,87:sr,89:pr,90:vr},{45:113,85:93,86:nr,87:sr,89:pr,90:vr},{45:114,85:93,86:nr,87:sr,89:pr,90:vr},{45:115,85:93,86:nr,87:sr,89:pr,90:vr},{45:116,85:93,86:nr,87:sr,89:pr,90:vr},nt(kr,[2,66]),{45:117,85:93,86:nr,87:sr,89:pr,90:vr},{45:118,85:93,86:nr,87:sr,89:pr,90:vr},{45:119,85:93,86:nr,87:sr,89:pr,90:vr},{45:120,85:93,86:nr,87:sr,89:pr,90:vr},{45:121,85:93,86:nr,87:sr,89:pr,90:vr},{45:122,85:93,86:nr,87:sr,89:pr,90:vr},{45:123,85:93,86:nr,87:sr,89:pr,90:vr},{45:124,85:93,86:nr,87:sr,89:pr,90:vr},{45:125,85:93,86:nr,87:sr,89:pr,90:vr},{45:126,85:93,86:nr,87:sr,89:pr,90:vr},{45:127,85:93,86:nr,87:sr,89:pr,90:vr},{30:128,39:58,40:70,42:71,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,53:32,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or},{15:[1,130],43:[1,129]},{45:131,85:93,86:nr,87:sr,89:pr,90:vr},{45:132,85:93,86:nr,87:sr,89:pr,90:vr},{45:133,85:93,86:nr,87:sr,89:pr,90:vr},{45:134,85:93,86:nr,87:sr,89:pr,90:vr},{45:135,85:93,86:nr,87:sr,89:pr,90:vr},{45:136,85:93,86:nr,87:sr,89:pr,90:vr},{45:137,85:93,86:nr,87:sr,89:pr,90:vr},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},nt(si,[2,9]),{14:142,21:Nt},{21:[2,13]},{1:[2,15]},nt(Vn,[2,22]),nt(Wn,[2,24],{31:31,29:143,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt}),nt(Vn,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:Bt,33:Ft,34:Yt,36:Zt,38:Wt,44:Kt,46:Jt,47:on,48:rn,49:ln,50:gn,51:wn,54:kn,55:Cn,56:Pn,57:An,58:cn,59:Ln,60:an,61:zn,62:dn,63:Fn,64:ir,65:tr,66:Jn,67:hr,68:lr,69:cr,70:Cr,71:Er,72:ar,73:Fr,74:mr,75:xr,76:fr,77:gr,78:er,79:nn,80:un,81:pn,82:Rn,83:_n,84:or}),nt(Hn,[2,28]),nt(Hn,[2,29]),nt(kr,[2,46]),nt(ui,[2,78],{85:93,45:145,86:nr,87:sr,89:pr,90:vr}),nt(ii,[2,80]),{88:[1,146]},nt(ii,[2,82]),nt(ii,[2,83]),nt(kr,[2,47]),nt(kr,[2,48]),nt(kr,[2,49]),nt(kr,[2,50]),nt(kr,[2,51]),nt(kr,[2,52]),nt(kr,[2,53]),nt(kr,[2,54]),nt(kr,[2,55]),nt(kr,[2,56]),nt(kr,[2,57]),nt(kr,[2,58]),nt(kr,[2,59]),nt(kr,[2,60]),nt(kr,[2,61]),nt(kr,[2,62]),nt(kr,[2,63]),nt(kr,[2,64]),nt(kr,[2,65]),nt(kr,[2,67]),nt(kr,[2,68]),nt(kr,[2,69]),nt(kr,[2,70]),nt(kr,[2,71]),nt(kr,[2,72]),nt(kr,[2,73]),nt(kr,[2,74]),nt(kr,[2,75]),nt(kr,[2,76]),nt(kr,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},nt(li,[2,35]),nt(li,[2,36]),nt(li,[2,37]),nt(li,[2,38]),nt(li,[2,39]),nt(li,[2,40]),nt(li,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},nt(Wn,[2,25]),nt(Vn,[2,45]),nt(ui,[2,79]),nt(ii,[2,81]),nt(kr,[2,31]),nt(kr,[2,42]),nt(Ei,[2,32]),nt(Ei,[2,33],{15:[1,152]}),nt(si,[2,10]),nt(Ei,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(En,Un){if(Un.recoverable)this.trace(En);else{var qn=new Error(En);throw qn.hash=Un,qn}},parse:function(En){var Un=this,qn=[0],_r=[],Zr=[null],yr=[],ni=this.table,Ar="",gi=0,hi=0,Ti=2,fi=1,Yi=yr.slice.call(arguments,1),Si=Object.create(this.lexer),qi={yy:{}};for(var uo in this.yy)Object.prototype.hasOwnProperty.call(this.yy,uo)&&(qi.yy[uo]=this.yy[uo]);Si.setInput(En,qi.yy),qi.yy.lexer=Si,qi.yy.parser=this,typeof Si.yylloc>"u"&&(Si.yylloc={});var Xi=Si.yylloc;yr.push(Xi);var Na=Si.options&&Si.options.ranges;typeof qi.yy.parseError=="function"?this.parseError=qi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function zs(){var dr;return dr=_r.pop()||Si.lex()||fi,typeof dr!="number"&&(dr instanceof Array&&(_r=dr,dr=_r.pop()),dr=Un.symbols_[dr]||dr),dr}for(var bi,Zi,$s,vs,ds={},Ls,Ir,Hr,ri;;){if(Zi=qn[qn.length-1],this.defaultActions[Zi]?$s=this.defaultActions[Zi]:((bi===null||typeof bi>"u")&&(bi=zs()),$s=ni[Zi]&&ni[Zi][bi]),typeof $s>"u"||!$s.length||!$s[0]){var Gr="";ri=[];for(Ls in ni[Zi])this.terminals_[Ls]&&Ls>Ti&&ri.push("'"+this.terminals_[Ls]+"'");Si.showPosition?Gr="Parse error on line "+(gi+1)+`:
`+Si.showPosition()+`
Expecting `+ri.join(", ")+", got '"+(this.terminals_[bi]||bi)+"'":Gr="Parse error on line "+(gi+1)+": Unexpected "+(bi==fi?"end of input":"'"+(this.terminals_[bi]||bi)+"'"),this.parseError(Gr,{text:Si.match,token:this.terminals_[bi]||bi,line:Si.yylineno,loc:Xi,expected:ri})}if($s[0]instanceof Array&&$s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Zi+", token: "+bi);switch($s[0]){case 1:qn.push(bi),Zr.push(Si.yytext),yr.push(Si.yylloc),qn.push($s[1]),bi=null,hi=Si.yyleng,Ar=Si.yytext,gi=Si.yylineno,Xi=Si.yylloc;break;case 2:if(Ir=this.productions_[$s[1]][1],ds.$=Zr[Zr.length-Ir],ds._$={first_line:yr[yr.length-(Ir||1)].first_line,last_line:yr[yr.length-1].last_line,first_column:yr[yr.length-(Ir||1)].first_column,last_column:yr[yr.length-1].last_column},Na&&(ds._$.range=[yr[yr.length-(Ir||1)].range[0],yr[yr.length-1].range[1]]),vs=this.performAction.apply(ds,[Ar,hi,gi,qi.yy,$s[1],Zr,yr].concat(Yi)),typeof vs<"u")return vs;Ir&&(qn=qn.slice(0,-1*Ir*2),Zr=Zr.slice(0,-1*Ir),yr=yr.slice(0,-1*Ir)),qn.push(this.productions_[$s[1]][0]),Zr.push(ds.$),yr.push(ds._$),Hr=ni[qn[qn.length-2]][qn[qn.length-1]],qn.push(Hr);break;case 3:return!0}}return!0}},Ci=function(){var Tn={EOF:1,parseError:function(Un,qn){if(this.yy.parser)this.yy.parser.parseError(Un,qn);else throw new Error(Un)},setInput:function(En,Un){return this.yy=Un||this.yy||{},this._input=En,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var En=this._input[0];this.yytext+=En,this.yyleng++,this.offset++,this.match+=En,this.matched+=En;var Un=En.match(/(?:\r\n?|\n).*/g);return Un?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),En},unput:function(En){var Un=En.length,qn=En.split(/(?:\r\n?|\n)/g);this._input=En+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Un),this.offset-=Un;var _r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),qn.length-1&&(this.yylineno-=qn.length-1);var Zr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:qn?(qn.length===_r.length?this.yylloc.first_column:0)+_r[_r.length-qn.length].length-qn[0].length:this.yylloc.first_column-Un},this.options.ranges&&(this.yylloc.range=[Zr[0],Zr[0]+this.yyleng-Un]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(En){this.unput(this.match.slice(En))},pastInput:function(){var En=this.matched.substr(0,this.matched.length-this.match.length);return(En.length>20?"...":"")+En.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var En=this.match;return En.length<20&&(En+=this._input.substr(0,20-En.length)),(En.substr(0,20)+(En.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var En=this.pastInput(),Un=new Array(En.length+1).join("-");return En+this.upcomingInput()+`
`+Un+"^"},test_match:function(En,Un){var qn,_r,Zr;if(this.options.backtrack_lexer&&(Zr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Zr.yylloc.range=this.yylloc.range.slice(0))),_r=En[0].match(/(?:\r\n?|\n).*/g),_r&&(this.yylineno+=_r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_r?_r[_r.length-1].length-_r[_r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+En[0].length},this.yytext+=En[0],this.match+=En[0],this.matches=En,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(En[0].length),this.matched+=En[0],qn=this.performAction.call(this,this.yy,this,Un,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),qn)return qn;if(this._backtrack){for(var yr in Zr)this[yr]=Zr[yr];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var En,Un,qn,_r;this._more||(this.yytext="",this.match="");for(var Zr=this._currentRules(),yr=0;yr<Zr.length;yr++)if(qn=this._input.match(this.rules[Zr[yr]]),qn&&(!Un||qn[0].length>Un[0].length)){if(Un=qn,_r=yr,this.options.backtrack_lexer){if(En=this.test_match(qn,Zr[yr]),En!==!1)return En;if(this._backtrack){Un=!1;continue}else return!1}else if(!this.options.flex)break}return Un?(En=this.test_match(Un,Zr[_r]),En!==!1?En:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Un=this.next();return Un||this.lex()},begin:function(Un){this.conditionStack.push(Un)},popState:function(){var Un=this.conditionStack.length-1;return Un>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Un){return Un=this.conditionStack.length-1-Math.abs(Un||0),Un>=0?this.conditionStack[Un]:"INITIAL"},pushState:function(Un){this.begin(Un)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Un,qn,_r,Zr){switch(_r){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return Tn}();wi.lexer=Ci;function Lr(){this.yy={}}return Lr.prototype=wi,wi.Parser=Lr,new Lr}();parser$b.parser=parser$b;const c4Parser=parser$b,c4Detector=nt=>nt.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let c4ShapeArray=[],boundaryParseStack=[""],currentBoundaryParse="global",parentBoundaryParse="",boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],rels=[],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2;var c4Type;const getC4Type=function(){return c4Type},setC4Type=function(nt){c4Type=sanitizeText$5(nt,getConfig$1())},parseDirective$9=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRel=function(nt,rt,it,st,_t,xt,Et,kt,Lt){if(nt==null||rt===void 0||rt===null||it===void 0||it===null||st===void 0||st===null)return;let It={};const Rt=rels.find(Nt=>Nt.from===rt&&Nt.to===it);if(Rt?It=Rt:rels.push(It),It.type=nt,It.from=rt,It.to=it,It.label={text:st},_t==null)It.techn={text:""};else if(typeof _t=="object"){let[Nt,Bt]=Object.entries(_t)[0];It[Nt]={text:Bt}}else It.techn={text:_t};if(xt==null)It.descr={text:""};else if(typeof xt=="object"){let[Nt,Bt]=Object.entries(xt)[0];It[Nt]={text:Bt}}else It.descr={text:xt};if(typeof Et=="object"){let[Nt,Bt]=Object.entries(Et)[0];It[Nt]=Bt}else It.sprite=Et;if(typeof kt=="object"){let[Nt,Bt]=Object.entries(kt)[0];It[Nt]=Bt}else It.tags=kt;if(typeof Lt=="object"){let[Nt,Bt]=Object.entries(Lt)[0];It[Nt]=Bt}else It.link=Lt;It.wrap=autoWrap$1()},addPersonOrSystem=function(nt,rt,it,st,_t,xt,Et){if(rt===null||it===null)return;let kt={};const Lt=c4ShapeArray.find(It=>It.alias===rt);if(Lt&&rt===Lt.alias?kt=Lt:(kt.alias=rt,c4ShapeArray.push(kt)),it==null?kt.label={text:""}:kt.label={text:it},st==null)kt.descr={text:""};else if(typeof st=="object"){let[It,Rt]=Object.entries(st)[0];kt[It]={text:Rt}}else kt.descr={text:st};if(typeof _t=="object"){let[It,Rt]=Object.entries(_t)[0];kt[It]=Rt}else kt.sprite=_t;if(typeof xt=="object"){let[It,Rt]=Object.entries(xt)[0];kt[It]=Rt}else kt.tags=xt;if(typeof Et=="object"){let[It,Rt]=Object.entries(Et)[0];kt[It]=Rt}else kt.link=Et;kt.typeC4Shape={text:nt},kt.parentBoundary=currentBoundaryParse,kt.wrap=autoWrap$1()},addContainer=function(nt,rt,it,st,_t,xt,Et,kt){if(rt===null||it===null)return;let Lt={};const It=c4ShapeArray.find(Rt=>Rt.alias===rt);if(It&&rt===It.alias?Lt=It:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.techn={text:""};else if(typeof st=="object"){let[Rt,Nt]=Object.entries(st)[0];Lt[Rt]={text:Nt}}else Lt.techn={text:st};if(_t==null)Lt.descr={text:""};else if(typeof _t=="object"){let[Rt,Nt]=Object.entries(_t)[0];Lt[Rt]={text:Nt}}else Lt.descr={text:_t};if(typeof xt=="object"){let[Rt,Nt]=Object.entries(xt)[0];Lt[Rt]=Nt}else Lt.sprite=xt;if(typeof Et=="object"){let[Rt,Nt]=Object.entries(Et)[0];Lt[Rt]=Nt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Nt]=Object.entries(kt)[0];Lt[Rt]=Nt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addComponent=function(nt,rt,it,st,_t,xt,Et,kt){if(rt===null||it===null)return;let Lt={};const It=c4ShapeArray.find(Rt=>Rt.alias===rt);if(It&&rt===It.alias?Lt=It:(Lt.alias=rt,c4ShapeArray.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.techn={text:""};else if(typeof st=="object"){let[Rt,Nt]=Object.entries(st)[0];Lt[Rt]={text:Nt}}else Lt.techn={text:st};if(_t==null)Lt.descr={text:""};else if(typeof _t=="object"){let[Rt,Nt]=Object.entries(_t)[0];Lt[Rt]={text:Nt}}else Lt.descr={text:_t};if(typeof xt=="object"){let[Rt,Nt]=Object.entries(xt)[0];Lt[Rt]=Nt}else Lt.sprite=xt;if(typeof Et=="object"){let[Rt,Nt]=Object.entries(Et)[0];Lt[Rt]=Nt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Nt]=Object.entries(kt)[0];Lt[Rt]=Nt}else Lt.link=kt;Lt.wrap=autoWrap$1(),Lt.typeC4Shape={text:nt},Lt.parentBoundary=currentBoundaryParse},addPersonOrSystemBoundary=function(nt,rt,it,st,_t){if(nt===null||rt===null)return;let xt={};const Et=boundarys.find(kt=>kt.alias===nt);if(Et&&nt===Et.alias?xt=Et:(xt.alias=nt,boundarys.push(xt)),rt==null?xt.label={text:""}:xt.label={text:rt},it==null)xt.type={text:"system"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];xt[kt]={text:Lt}}else xt.type={text:it};if(typeof st=="object"){let[kt,Lt]=Object.entries(st)[0];xt[kt]=Lt}else xt.tags=st;if(typeof _t=="object"){let[kt,Lt]=Object.entries(_t)[0];xt[kt]=Lt}else xt.link=_t;xt.parentBoundary=currentBoundaryParse,xt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addContainerBoundary=function(nt,rt,it,st,_t){if(nt===null||rt===null)return;let xt={};const Et=boundarys.find(kt=>kt.alias===nt);if(Et&&nt===Et.alias?xt=Et:(xt.alias=nt,boundarys.push(xt)),rt==null?xt.label={text:""}:xt.label={text:rt},it==null)xt.type={text:"container"};else if(typeof it=="object"){let[kt,Lt]=Object.entries(it)[0];xt[kt]={text:Lt}}else xt.type={text:it};if(typeof st=="object"){let[kt,Lt]=Object.entries(st)[0];xt[kt]=Lt}else xt.tags=st;if(typeof _t=="object"){let[kt,Lt]=Object.entries(_t)[0];xt[kt]=Lt}else xt.link=_t;xt.parentBoundary=currentBoundaryParse,xt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=nt,boundaryParseStack.push(parentBoundaryParse)},addDeploymentNode=function(nt,rt,it,st,_t,xt,Et,kt){if(rt===null||it===null)return;let Lt={};const It=boundarys.find(Rt=>Rt.alias===rt);if(It&&rt===It.alias?Lt=It:(Lt.alias=rt,boundarys.push(Lt)),it==null?Lt.label={text:""}:Lt.label={text:it},st==null)Lt.type={text:"node"};else if(typeof st=="object"){let[Rt,Nt]=Object.entries(st)[0];Lt[Rt]={text:Nt}}else Lt.type={text:st};if(_t==null)Lt.descr={text:""};else if(typeof _t=="object"){let[Rt,Nt]=Object.entries(_t)[0];Lt[Rt]={text:Nt}}else Lt.descr={text:_t};if(typeof Et=="object"){let[Rt,Nt]=Object.entries(Et)[0];Lt[Rt]=Nt}else Lt.tags=Et;if(typeof kt=="object"){let[Rt,Nt]=Object.entries(kt)[0];Lt[Rt]=Nt}else Lt.link=kt;Lt.nodeType=nt,Lt.parentBoundary=currentBoundaryParse,Lt.wrap=autoWrap$1(),parentBoundaryParse=currentBoundaryParse,currentBoundaryParse=rt,boundaryParseStack.push(parentBoundaryParse)},popBoundaryParseStack=function(){currentBoundaryParse=parentBoundaryParse,boundaryParseStack.pop(),parentBoundaryParse=boundaryParseStack.pop(),boundaryParseStack.push(parentBoundaryParse)},updateElStyle=function(nt,rt,it,st,_t,xt,Et,kt,Lt,It,Rt){let Nt=c4ShapeArray.find(Bt=>Bt.alias===rt);if(!(Nt===void 0&&(Nt=boundarys.find(Bt=>Bt.alias===rt),Nt===void 0))){if(it!=null)if(typeof it=="object"){let[Bt,Ft]=Object.entries(it)[0];Nt[Bt]=Ft}else Nt.bgColor=it;if(st!=null)if(typeof st=="object"){let[Bt,Ft]=Object.entries(st)[0];Nt[Bt]=Ft}else Nt.fontColor=st;if(_t!=null)if(typeof _t=="object"){let[Bt,Ft]=Object.entries(_t)[0];Nt[Bt]=Ft}else Nt.borderColor=_t;if(xt!=null)if(typeof xt=="object"){let[Bt,Ft]=Object.entries(xt)[0];Nt[Bt]=Ft}else Nt.shadowing=xt;if(Et!=null)if(typeof Et=="object"){let[Bt,Ft]=Object.entries(Et)[0];Nt[Bt]=Ft}else Nt.shape=Et;if(kt!=null)if(typeof kt=="object"){let[Bt,Ft]=Object.entries(kt)[0];Nt[Bt]=Ft}else Nt.sprite=kt;if(Lt!=null)if(typeof Lt=="object"){let[Bt,Ft]=Object.entries(Lt)[0];Nt[Bt]=Ft}else Nt.techn=Lt;if(It!=null)if(typeof It=="object"){let[Bt,Ft]=Object.entries(It)[0];Nt[Bt]=Ft}else Nt.legendText=It;if(Rt!=null)if(typeof Rt=="object"){let[Bt,Ft]=Object.entries(Rt)[0];Nt[Bt]=Ft}else Nt.legendSprite=Rt}},updateRelStyle=function(nt,rt,it,st,_t,xt,Et){const kt=rels.find(Lt=>Lt.from===rt&&Lt.to===it);if(kt!==void 0){if(st!=null)if(typeof st=="object"){let[Lt,It]=Object.entries(st)[0];kt[Lt]=It}else kt.textColor=st;if(_t!=null)if(typeof _t=="object"){let[Lt,It]=Object.entries(_t)[0];kt[Lt]=It}else kt.lineColor=_t;if(xt!=null)if(typeof xt=="object"){let[Lt,It]=Object.entries(xt)[0];kt[Lt]=parseInt(It)}else kt.offsetX=parseInt(xt);if(Et!=null)if(typeof Et=="object"){let[Lt,It]=Object.entries(Et)[0];kt[Lt]=parseInt(It)}else kt.offsetY=parseInt(Et)}},updateLayoutConfig=function(nt,rt,it){let st=c4ShapeInRow$1,_t=c4BoundaryInRow$1;if(typeof rt=="object"){const xt=Object.values(rt)[0];st=parseInt(xt)}else st=parseInt(rt);if(typeof it=="object"){const xt=Object.values(it)[0];_t=parseInt(xt)}else _t=parseInt(it);st>=1&&(c4ShapeInRow$1=st),_t>=1&&(c4BoundaryInRow$1=_t)},getC4ShapeInRow=function(){return c4ShapeInRow$1},getC4BoundaryInRow=function(){return c4BoundaryInRow$1},getCurrentBoundaryParse=function(){return currentBoundaryParse},getParentBoundaryParse=function(){return parentBoundaryParse},getC4ShapeArray=function(nt){return nt==null?c4ShapeArray:c4ShapeArray.filter(rt=>rt.parentBoundary===nt)},getC4Shape=function(nt){return c4ShapeArray.find(rt=>rt.alias===nt)},getC4ShapeKeys=function(nt){return Object.keys(getC4ShapeArray(nt))},getBoundarys=function(nt){return nt==null?boundarys:boundarys.filter(rt=>rt.parentBoundary===nt)},getRels=function(){return rels},getTitle=function(){return title},setWrap$1=function(nt){wrapEnabled$1=nt},autoWrap$1=function(){return wrapEnabled$1},clear$d=function(){c4ShapeArray=[],boundarys=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],parentBoundaryParse="",currentBoundaryParse="global",boundaryParseStack=[""],rels=[],boundaryParseStack=[""],title="",wrapEnabled$1=!1,c4ShapeInRow$1=4,c4BoundaryInRow$1=2},LINETYPE$1={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE$1={FILLED:0,OPEN:1},PLACEMENT$1={LEFTOF:0,RIGHTOF:1,OVER:2},setTitle=function(nt){title=sanitizeText$5(nt,getConfig$1())},c4Db={addPersonOrSystem,addPersonOrSystemBoundary,addContainer,addContainerBoundary,addComponent,addDeploymentNode,popBoundaryParseStack,addRel,updateElStyle,updateRelStyle,updateLayoutConfig,autoWrap:autoWrap$1,setWrap:setWrap$1,getC4ShapeArray,getC4Shape,getC4ShapeKeys,getBoundarys,getCurrentBoundaryParse,getParentBoundaryParse,getRels,getTitle,getC4Type,getC4ShapeInRow,getC4BoundaryInRow,setAccTitle,getAccTitle,getAccDescription,setAccDescription,parseDirective:parseDirective$9,getConfig:()=>getConfig$1().c4,clear:clear$d,LINETYPE:LINETYPE$1,ARROWTYPE:ARROWTYPE$1,PLACEMENT:PLACEMENT$1,setTitle,setC4Type},drawRect$2=function(nt,rt){const it=nt.append("rect");if(it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.attrs!=="undefined"&&rt.attrs!==null)for(let st in rt.attrs)it.attr(st,rt.attrs[st]);return rt.class!=="undefined"&&it.attr("class",rt.class),it},drawImage$1=function(nt,rt,it,st,_t,xt){const Et=nt.append("image");Et.attr("width",rt),Et.attr("height",it),Et.attr("x",st),Et.attr("y",_t);let kt=xt.startsWith("data:image/png;base64")?xt:dist.sanitizeUrl(xt);Et.attr("xlink:href",kt)},drawRels$1=(nt,rt,it)=>{const st=nt.append("g");let _t=0;for(let xt of rt){let Et=xt.textColor?xt.textColor:"#444444",kt=xt.lineColor?xt.lineColor:"#444444",Lt=xt.offsetX?parseInt(xt.offsetX):0,It=xt.offsetY?parseInt(xt.offsetY):0,Rt="";if(_t===0){let Bt=st.append("line");Bt.attr("x1",xt.startPoint.x),Bt.attr("y1",xt.startPoint.y),Bt.attr("x2",xt.endPoint.x),Bt.attr("y2",xt.endPoint.y),Bt.attr("stroke-width","1"),Bt.attr("stroke",kt),Bt.style("fill","none"),xt.type!=="rel_b"&&Bt.attr("marker-end","url("+Rt+"#arrowhead)"),(xt.type==="birel"||xt.type==="rel_b")&&Bt.attr("marker-start","url("+Rt+"#arrowend)"),_t=-1}else{let Bt=st.append("path");Bt.attr("fill","none").attr("stroke-width","1").attr("stroke",kt).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",xt.startPoint.x).replaceAll("starty",xt.startPoint.y).replaceAll("controlx",xt.startPoint.x+(xt.endPoint.x-xt.startPoint.x)/2-(xt.endPoint.x-xt.startPoint.x)/4).replaceAll("controly",xt.startPoint.y+(xt.endPoint.y-xt.startPoint.y)/2).replaceAll("stopx",xt.endPoint.x).replaceAll("stopy",xt.endPoint.y)),xt.type!=="rel_b"&&Bt.attr("marker-end","url("+Rt+"#arrowhead)"),(xt.type==="birel"||xt.type==="rel_b")&&Bt.attr("marker-start","url("+Rt+"#arrowend)")}let Nt=it.messageFont();_drawTextCandidateFunc$2(it)(xt.label.text,st,Math.min(xt.startPoint.x,xt.endPoint.x)+Math.abs(xt.endPoint.x-xt.startPoint.x)/2+Lt,Math.min(xt.startPoint.y,xt.endPoint.y)+Math.abs(xt.endPoint.y-xt.startPoint.y)/2+It,xt.label.width,xt.label.height,{fill:Et},Nt),xt.techn&&xt.techn.text!==""&&(Nt=it.messageFont(),_drawTextCandidateFunc$2(it)("["+xt.techn.text+"]",st,Math.min(xt.startPoint.x,xt.endPoint.x)+Math.abs(xt.endPoint.x-xt.startPoint.x)/2+Lt,Math.min(xt.startPoint.y,xt.endPoint.y)+Math.abs(xt.endPoint.y-xt.startPoint.y)/2+it.messageFontSize+5+It,Math.max(xt.label.width,xt.techn.width),xt.techn.height,{fill:Et,"font-style":"italic"},Nt))}},drawBoundary$1=function(nt,rt,it){const st=nt.append("g");let _t=rt.bgColor?rt.bgColor:"none",xt=rt.borderColor?rt.borderColor:"#444444",Et=rt.fontColor?rt.fontColor:"black",kt={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};rt.nodeType&&(kt={"stroke-width":1});let Lt={x:rt.x,y:rt.y,fill:_t,stroke:xt,width:rt.width,height:rt.height,rx:2.5,ry:2.5,attrs:kt};drawRect$2(st,Lt);let It=it.boundaryFont();It.fontWeight="bold",It.fontSize=It.fontSize+2,It.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.label.text,st,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:"#444444"},It),rt.type&&rt.type.text!==""&&(It=it.boundaryFont(),It.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.type.text,st,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:"#444444"},It)),rt.descr&&rt.descr.text!==""&&(It=it.boundaryFont(),It.fontSize=It.fontSize-2,It.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.descr.text,st,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:"#444444"},It))},drawC4Shape=function(nt,rt,it){var st;let _t=rt.bgColor?rt.bgColor:it[rt.typeC4Shape.text+"_bg_color"],xt=rt.borderColor?rt.borderColor:it[rt.typeC4Shape.text+"_border_color"],Et=rt.fontColor?rt.fontColor:"#FFFFFF",kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(rt.typeC4Shape.text){case"person":kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const Lt=nt.append("g");Lt.attr("class","person-man");const It=getNoteRect$2();switch(rt.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":It.x=rt.x,It.y=rt.y,It.fill=_t,It.width=rt.width,It.height=rt.height,It.stroke=xt,It.rx=2.5,It.ry=2.5,It.attrs={"stroke-width":.5},drawRect$2(Lt,It);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":Lt.append("path").attr("fill",_t).attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2).replaceAll("height",rt.height)),Lt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("half",rt.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":Lt.append("path").attr("fill",_t).attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",rt.x).replaceAll("starty",rt.y).replaceAll("width",rt.width).replaceAll("half",rt.height/2)),Lt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",xt).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",rt.x+rt.width).replaceAll("starty",rt.y).replaceAll("half",rt.height/2));break}let Rt=getC4ShapeFont(it,rt.typeC4Shape.text);switch(Lt.append("text").attr("fill",Et).attr("font-family",Rt.fontFamily).attr("font-size",Rt.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",rt.typeC4Shape.width).attr("x",rt.x+rt.width/2-rt.typeC4Shape.width/2).attr("y",rt.y+rt.typeC4Shape.Y).text("<<"+rt.typeC4Shape.text+">>"),rt.typeC4Shape.text){case"person":case"external_person":drawImage$1(Lt,48,48,rt.x+rt.width/2-24,rt.y+rt.image.Y,kt);break}let Nt=it[rt.typeC4Shape.text+"Font"]();return Nt.fontWeight="bold",Nt.fontSize=Nt.fontSize+2,Nt.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.label.text,Lt,rt.x,rt.y+rt.label.Y,rt.width,rt.height,{fill:Et},Nt),Nt=it[rt.typeC4Shape.text+"Font"](),Nt.fontColor=Et,rt.techn&&((st=rt.techn)==null?void 0:st.text)!==""?_drawTextCandidateFunc$2(it)(rt.techn.text,Lt,rt.x,rt.y+rt.techn.Y,rt.width,rt.height,{fill:Et,"font-style":"italic"},Nt):rt.type&&rt.type.text!==""&&_drawTextCandidateFunc$2(it)(rt.type.text,Lt,rt.x,rt.y+rt.type.Y,rt.width,rt.height,{fill:Et,"font-style":"italic"},Nt),rt.descr&&rt.descr.text!==""&&(Nt=it.personFont(),Nt.fontColor=Et,_drawTextCandidateFunc$2(it)(rt.descr.text,Lt,rt.x,rt.y+rt.descr.Y,rt.width,rt.height,{fill:Et},Nt)),rt.height},insertDatabaseIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon$1=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead$1=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowEnd=function(nt){nt.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},insertArrowFilledHead$1=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertDynamicNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead$1=function(nt){const it=nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);it.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),it.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},getNoteRect$2=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},getC4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),_drawTextCandidateFunc$2=function(){function nt(_t,xt,Et,kt,Lt,It,Rt){const Nt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt+It/2+5).style("text-anchor","middle").text(_t);st(Nt,Rt)}function rt(_t,xt,Et,kt,Lt,It,Rt,Nt){const{fontSize:Bt,fontFamily:Ft,fontWeight:Yt}=Nt,Zt=_t.split(common$1.lineBreakRegex);for(let Wt=0;Wt<Zt.length;Wt++){const Kt=Wt*Bt-Bt*(Zt.length-1)/2,Jt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",Bt).style("font-weight",Yt).style("font-family",Ft);Jt.append("tspan").attr("dy",Kt).text(Zt[Wt]).attr("alignment-baseline","mathematical"),st(Jt,Rt)}}function it(_t,xt,Et,kt,Lt,It,Rt,Nt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",It).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(_t),rt(_t,Bt,Et,kt,Lt,It,Rt,Nt),st(Yt,Rt)}function st(_t,xt){for(const Et in xt)xt.hasOwnProperty(Et)&&_t.attr(Et,xt[Et])}return function(_t){return _t.textPlacement==="fo"?it:_t.textPlacement==="old"?nt:rt}}(),svgDraw$3={drawRect:drawRect$2,drawBoundary:drawBoundary$1,drawC4Shape,drawRels:drawRels$1,drawImage:drawImage$1,insertArrowHead:insertArrowHead$1,insertArrowEnd,insertArrowFilledHead:insertArrowFilledHead$1,insertDynamicNumber,insertArrowCrossHead:insertArrowCrossHead$1,insertDatabaseIcon:insertDatabaseIcon$1,insertComputerIcon:insertComputerIcon$1,insertClockIcon:insertClockIcon$1,getNoteRect:getNoteRect$2,sanitizeUrl:dist.sanitizeUrl};let globalBoundaryMaxX=0,globalBoundaryMaxY=0,c4ShapeInRow=4,c4BoundaryInRow=2;parser$b.yy=c4Db;let conf$a={};class Bounds{constructor(rt){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,setConf$a(rt.db.getConfig())}setData(rt,it,st,_t){this.nextData.startx=this.data.startx=rt,this.nextData.stopx=this.data.stopx=it,this.nextData.starty=this.data.starty=st,this.nextData.stopy=this.data.stopy=_t}updateVal(rt,it,st,_t){rt[it]===void 0?rt[it]=st:rt[it]=_t(st,rt[it])}insert(rt){this.nextData.cnt=this.nextData.cnt+1;let it=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+rt.margin:this.nextData.stopx+rt.margin*2,st=it+rt.width,_t=this.nextData.starty+rt.margin*2,xt=_t+rt.height;(it>=this.data.widthLimit||st>=this.data.widthLimit||this.nextData.cnt>c4ShapeInRow)&&(it=this.nextData.startx+rt.margin+conf$a.nextLinePaddingX,_t=this.nextData.stopy+rt.margin*2,this.nextData.stopx=st=it+rt.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=xt=_t+rt.height,this.nextData.cnt=1),rt.x=it,rt.y=_t,this.updateVal(this.data,"startx",it,Math.min),this.updateVal(this.data,"starty",_t,Math.min),this.updateVal(this.data,"stopx",st,Math.max),this.updateVal(this.data,"stopy",xt,Math.max),this.updateVal(this.nextData,"startx",it,Math.min),this.updateVal(this.nextData,"starty",_t,Math.min),this.updateVal(this.nextData,"stopx",st,Math.max),this.updateVal(this.nextData,"stopy",xt,Math.max)}init(rt){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},setConf$a(rt.db.getConfig())}bumpLastMargin(rt){this.data.stopx+=rt,this.data.stopy+=rt}}const setConf$a=function(nt){assignWithDepth$1(conf$a,nt),nt.fontFamily&&(conf$a.personFontFamily=conf$a.systemFontFamily=conf$a.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$a.personFontSize=conf$a.systemFontSize=conf$a.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$a.personFontWeight=conf$a.systemFontWeight=conf$a.messageFontWeight=nt.fontWeight)},c4ShapeFont=(nt,rt)=>({fontFamily:nt[rt+"FontFamily"],fontSize:nt[rt+"FontSize"],fontWeight:nt[rt+"FontWeight"]}),boundaryFont=nt=>({fontFamily:nt.boundaryFontFamily,fontSize:nt.boundaryFontSize,fontWeight:nt.boundaryFontWeight}),messageFont$1=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight});function calcC4ShapeTextWH(nt,rt,it,st,_t){if(!rt[nt].width)if(it)rt[nt].text=wrapLabel(rt[nt].text,_t,st),rt[nt].textLines=rt[nt].text.split(common$1.lineBreakRegex).length,rt[nt].width=_t,rt[nt].height=calculateTextHeight(rt[nt].text,st);else{let xt=rt[nt].text.split(common$1.lineBreakRegex);rt[nt].textLines=xt.length;let Et=0;rt[nt].height=0,rt[nt].width=0;for(const kt of xt)rt[nt].width=Math.max(calculateTextWidth(kt,st),rt[nt].width),Et=calculateTextHeight(kt,st),rt[nt].height=rt[nt].height+Et}}const drawBoundary=function(nt,rt,it){rt.x=it.data.startx,rt.y=it.data.starty,rt.width=it.data.stopx-it.data.startx,rt.height=it.data.stopy-it.data.starty,rt.label.y=conf$a.c4ShapeMargin-35;let st=rt.wrap&&conf$a.wrap,_t=boundaryFont(conf$a);_t.fontSize=_t.fontSize+2,_t.fontWeight="bold";let xt=calculateTextWidth(rt.label.text,_t);calcC4ShapeTextWH("label",rt,st,_t,xt),svgDraw$3.drawBoundary(nt,rt,conf$a)},drawC4ShapeArray=function(nt,rt,it,st){let _t=0;for(const xt of st){_t=0;const Et=it[xt];let kt=c4ShapeFont(conf$a,Et.typeC4Shape.text);switch(kt.fontSize=kt.fontSize-2,Et.typeC4Shape.width=calculateTextWidth("<<"+Et.typeC4Shape.text+">>",kt),Et.typeC4Shape.height=kt.fontSize+2,Et.typeC4Shape.Y=conf$a.c4ShapePadding,_t=Et.typeC4Shape.Y+Et.typeC4Shape.height-4,Et.image={width:0,height:0,Y:0},Et.typeC4Shape.text){case"person":case"external_person":Et.image.width=48,Et.image.height=48,Et.image.Y=_t,_t=Et.image.Y+Et.image.height;break}Et.sprite&&(Et.image.width=48,Et.image.height=48,Et.image.Y=_t,_t=Et.image.Y+Et.image.height);let Lt=Et.wrap&&conf$a.wrap,It=conf$a.width-conf$a.c4ShapePadding*2,Rt=c4ShapeFont(conf$a,Et.typeC4Shape.text);if(Rt.fontSize=Rt.fontSize+2,Rt.fontWeight="bold",calcC4ShapeTextWH("label",Et,Lt,Rt,It),Et.label.Y=_t+8,_t=Et.label.Y+Et.label.height,Et.type&&Et.type.text!==""){Et.type.text="["+Et.type.text+"]";let Ft=c4ShapeFont(conf$a,Et.typeC4Shape.text);calcC4ShapeTextWH("type",Et,Lt,Ft,It),Et.type.Y=_t+5,_t=Et.type.Y+Et.type.height}else if(Et.techn&&Et.techn.text!==""){Et.techn.text="["+Et.techn.text+"]";let Ft=c4ShapeFont(conf$a,Et.techn.text);calcC4ShapeTextWH("techn",Et,Lt,Ft,It),Et.techn.Y=_t+5,_t=Et.techn.Y+Et.techn.height}let Nt=_t,Bt=Et.label.width;if(Et.descr&&Et.descr.text!==""){let Ft=c4ShapeFont(conf$a,Et.typeC4Shape.text);calcC4ShapeTextWH("descr",Et,Lt,Ft,It),Et.descr.Y=_t+20,_t=Et.descr.Y+Et.descr.height,Bt=Math.max(Et.label.width,Et.descr.width),Nt=_t-Et.descr.textLines*5}Bt=Bt+conf$a.c4ShapePadding,Et.width=Math.max(Et.width||conf$a.width,Bt,conf$a.width),Et.height=Math.max(Et.height||conf$a.height,Nt,conf$a.height),Et.margin=Et.margin||conf$a.c4ShapeMargin,nt.insert(Et),svgDraw$3.drawC4Shape(rt,Et,conf$a)}nt.bumpLastMargin(conf$a.c4ShapeMargin)};class Point{constructor(rt,it){this.x=rt,this.y=it}}let getIntersectPoint=function(nt,rt){let it=nt.x,st=nt.y,_t=rt.x,xt=rt.y,Et=it+nt.width/2,kt=st+nt.height/2,Lt=Math.abs(it-_t),It=Math.abs(st-xt),Rt=It/Lt,Nt=nt.height/nt.width,Bt=null;return st==xt&&it<_t?Bt=new Point(it+nt.width,kt):st==xt&&it>_t?Bt=new Point(it,kt):it==_t&&st<xt?Bt=new Point(Et,st+nt.height):it==_t&&st>xt&&(Bt=new Point(Et,st)),it>_t&&st<xt?Nt>=Rt?Bt=new Point(it,kt+Rt*nt.width/2):Bt=new Point(Et-Lt/It*nt.height/2,st+nt.height):it<_t&&st<xt?Nt>=Rt?Bt=new Point(it+nt.width,kt+Rt*nt.width/2):Bt=new Point(Et+Lt/It*nt.height/2,st+nt.height):it<_t&&st>xt?Nt>=Rt?Bt=new Point(it+nt.width,kt-Rt*nt.width/2):Bt=new Point(Et+nt.height/2*Lt/It,st):it>_t&&st>xt&&(Nt>=Rt?Bt=new Point(it,kt-nt.width/2*Rt):Bt=new Point(Et-nt.height/2*Lt/It,st)),Bt},getIntersectPoints=function(nt,rt){let it={x:0,y:0};it.x=rt.x+rt.width/2,it.y=rt.y+rt.height/2;let st=getIntersectPoint(nt,it);it.x=nt.x+nt.width/2,it.y=nt.y+nt.height/2;let _t=getIntersectPoint(rt,it);return{startPoint:st,endPoint:_t}};const drawRels=function(nt,rt,it,st){let _t=0;for(let xt of rt){_t=_t+1;let Et=xt.wrap&&conf$a.wrap,kt=messageFont$1(conf$a);st.db.getC4Type()==="C4Dynamic"&&(xt.label.text=_t+": "+xt.label.text);let It=calculateTextWidth(xt.label.text,kt);calcC4ShapeTextWH("label",xt,Et,kt,It),xt.techn&&xt.techn.text!==""&&(It=calculateTextWidth(xt.techn.text,kt),calcC4ShapeTextWH("techn",xt,Et,kt,It)),xt.descr&&xt.descr.text!==""&&(It=calculateTextWidth(xt.descr.text,kt),calcC4ShapeTextWH("descr",xt,Et,kt,It));let Rt=it(xt.from),Nt=it(xt.to),Bt=getIntersectPoints(Rt,Nt);xt.startPoint=Bt.startPoint,xt.endPoint=Bt.endPoint}svgDraw$3.drawRels(nt,rt,conf$a)};function drawInsideBoundary(nt,rt,it,st,_t){let xt=new Bounds(_t);xt.data.widthLimit=it.data.widthLimit/Math.min(c4BoundaryInRow,st.length);for(let[Et,kt]of st.entries()){let Lt=0;kt.image={width:0,height:0,Y:0},kt.sprite&&(kt.image.width=48,kt.image.height=48,kt.image.Y=Lt,Lt=kt.image.Y+kt.image.height);let It=kt.wrap&&conf$a.wrap,Rt=boundaryFont(conf$a);if(Rt.fontSize=Rt.fontSize+2,Rt.fontWeight="bold",calcC4ShapeTextWH("label",kt,It,Rt,xt.data.widthLimit),kt.label.Y=Lt+8,Lt=kt.label.Y+kt.label.height,kt.type&&kt.type.text!==""){kt.type.text="["+kt.type.text+"]";let Yt=boundaryFont(conf$a);calcC4ShapeTextWH("type",kt,It,Yt,xt.data.widthLimit),kt.type.Y=Lt+5,Lt=kt.type.Y+kt.type.height}if(kt.descr&&kt.descr.text!==""){let Yt=boundaryFont(conf$a);Yt.fontSize=Yt.fontSize-2,calcC4ShapeTextWH("descr",kt,It,Yt,xt.data.widthLimit),kt.descr.Y=Lt+20,Lt=kt.descr.Y+kt.descr.height}if(Et==0||Et%c4BoundaryInRow===0){let Yt=it.data.startx+conf$a.diagramMarginX,Zt=it.data.stopy+conf$a.diagramMarginY+Lt;xt.setData(Yt,Yt,Zt,Zt)}else{let Yt=xt.data.stopx!==xt.data.startx?xt.data.stopx+conf$a.diagramMarginX:xt.data.startx,Zt=xt.data.starty;xt.setData(Yt,Yt,Zt,Zt)}xt.name=kt.alias;let Nt=_t.db.getC4ShapeArray(kt.alias),Bt=_t.db.getC4ShapeKeys(kt.alias);Bt.length>0&&drawC4ShapeArray(xt,nt,Nt,Bt),rt=kt.alias;let Ft=_t.db.getBoundarys(rt);Ft.length>0&&drawInsideBoundary(nt,rt,xt,Ft,_t),kt.alias!=="global"&&drawBoundary(nt,kt,xt),it.data.stopy=Math.max(xt.data.stopy+conf$a.c4ShapeMargin,it.data.stopy),it.data.stopx=Math.max(xt.data.stopx+conf$a.c4ShapeMargin,it.data.stopx),globalBoundaryMaxX=Math.max(globalBoundaryMaxX,it.data.stopx),globalBoundaryMaxY=Math.max(globalBoundaryMaxY,it.data.stopy)}}const draw$e=function(nt,rt,it,st){conf$a=getConfig$1().c4;const _t=getConfig$1().securityLevel;let xt;_t==="sandbox"&&(xt=select("#i"+rt));const Et=select(_t==="sandbox"?xt.nodes()[0].contentDocument.body:"body");let kt=st.db;st.db.setWrap(conf$a.wrap),c4ShapeInRow=kt.getC4ShapeInRow(),c4BoundaryInRow=kt.getC4BoundaryInRow(),log$1.debug(`C:${JSON.stringify(conf$a,null,2)}`);const Lt=_t==="sandbox"?Et.select(`[id="${rt}"]`):select(`[id="${rt}"]`);svgDraw$3.insertComputerIcon(Lt),svgDraw$3.insertDatabaseIcon(Lt),svgDraw$3.insertClockIcon(Lt);let It=new Bounds(st);It.setData(conf$a.diagramMarginX,conf$a.diagramMarginX,conf$a.diagramMarginY,conf$a.diagramMarginY),It.data.widthLimit=screen.availWidth,globalBoundaryMaxX=conf$a.diagramMarginX,globalBoundaryMaxY=conf$a.diagramMarginY;const Rt=st.db.getTitle();let Nt=st.db.getBoundarys("");drawInsideBoundary(Lt,"",It,Nt,st),svgDraw$3.insertArrowHead(Lt),svgDraw$3.insertArrowEnd(Lt),svgDraw$3.insertArrowCrossHead(Lt),svgDraw$3.insertArrowFilledHead(Lt),drawRels(Lt,st.db.getRels(),st.db.getC4Shape,st),It.data.stopx=globalBoundaryMaxX,It.data.stopy=globalBoundaryMaxY;const Bt=It.data;let Yt=Bt.stopy-Bt.starty+2*conf$a.diagramMarginY;const Wt=Bt.stopx-Bt.startx+2*conf$a.diagramMarginX;Rt&&Lt.append("text").text(Rt).attr("x",(Bt.stopx-Bt.startx)/2-4*conf$a.diagramMarginX).attr("y",Bt.starty+conf$a.diagramMarginY),configureSvgSize(Lt,Yt,Wt,conf$a.useMaxWidth);const Kt=Rt?60:0;Lt.attr("viewBox",Bt.startx-conf$a.diagramMarginX+" -"+(conf$a.diagramMarginY+Kt)+" "+Wt+" "+(Yt+Kt)),log$1.debug("models:",Bt)},c4Renderer={drawPersonOrSystemArray:drawC4ShapeArray,drawBoundary,setConf:setConf$a,draw:draw$e};var parser$a=function(){var nt=function(gr,er,nn,un){for(nn=nn||{},un=gr.length;un--;nn[gr[un]]=er);return nn},rt=[1,3],it=[1,7],st=[1,8],_t=[1,9],xt=[1,10],Et=[1,13],kt=[1,12],Lt=[1,16,25],It=[1,20],Rt=[1,32],Nt=[1,33],Bt=[1,34],Ft=[1,36],Yt=[1,39],Zt=[1,37],Wt=[1,38],Kt=[1,44],Jt=[1,45],on=[1,40],rn=[1,41],ln=[1,42],gn=[1,43],wn=[1,48],kn=[1,49],Cn=[1,50],Pn=[1,51],An=[16,25],cn=[1,65],Ln=[1,66],an=[1,67],zn=[1,68],dn=[1,69],Fn=[1,70],ir=[1,71],tr=[1,80],Jn=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],hr=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],lr=[5,8,9,10,11,16,19,23,25],cr=[54,88,89,90,91],Cr=[54,65,66,88,89,90,91],Er=[54,60,61,62,63,64,88,89,90,91],ar=[16,25,32],Fr=[1,107],mr={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(er,nn,un,pn,Rn,_n,or){var Vn=_n.length-1;switch(Rn){case 5:pn.setDirection("TB");break;case 6:pn.setDirection("BT");break;case 7:pn.setDirection("RL");break;case 8:pn.setDirection("LR");break;case 12:pn.parseDirective("%%{","open_directive");break;case 13:pn.parseDirective(_n[Vn],"type_directive");break;case 14:_n[Vn]=_n[Vn].trim().replace(/'/g,'"'),pn.parseDirective(_n[Vn],"arg_directive");break;case 15:pn.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=_n[Vn];break;case 22:this.$=_n[Vn-1]+_n[Vn];break;case 23:case 24:this.$=_n[Vn-1]+"~"+_n[Vn];break;case 25:pn.addRelation(_n[Vn]);break;case 26:_n[Vn-1].title=pn.cleanupLabel(_n[Vn]),pn.addRelation(_n[Vn-1]);break;case 35:this.$=_n[Vn].trim(),pn.setAccTitle(this.$);break;case 36:case 37:this.$=_n[Vn].trim(),pn.setAccDescription(this.$);break;case 38:pn.addClass(_n[Vn]);break;case 39:pn.addClass(_n[Vn-2]),pn.setCssClass(_n[Vn-2],_n[Vn]);break;case 40:pn.addClass(_n[Vn-3]),pn.addMembers(_n[Vn-3],_n[Vn-1]);break;case 41:pn.addClass(_n[Vn-5]),pn.setCssClass(_n[Vn-5],_n[Vn-3]),pn.addMembers(_n[Vn-5],_n[Vn-1]);break;case 42:pn.addAnnotation(_n[Vn],_n[Vn-2]);break;case 43:this.$=[_n[Vn]];break;case 44:_n[Vn].push(_n[Vn-1]),this.$=_n[Vn];break;case 45:break;case 46:pn.addMember(_n[Vn-1],pn.cleanupLabel(_n[Vn]));break;case 47:break;case 48:break;case 49:this.$={id1:_n[Vn-2],id2:_n[Vn],relation:_n[Vn-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:_n[Vn-3],id2:_n[Vn],relation:_n[Vn-1],relationTitle1:_n[Vn-2],relationTitle2:"none"};break;case 51:this.$={id1:_n[Vn-3],id2:_n[Vn],relation:_n[Vn-2],relationTitle1:"none",relationTitle2:_n[Vn-1]};break;case 52:this.$={id1:_n[Vn-4],id2:_n[Vn],relation:_n[Vn-2],relationTitle1:_n[Vn-3],relationTitle2:_n[Vn-1]};break;case 53:pn.addNote(_n[Vn],_n[Vn-1]);break;case 54:pn.addNote(_n[Vn]);break;case 55:this.$={type1:_n[Vn-2],type2:_n[Vn],lineType:_n[Vn-1]};break;case 56:this.$={type1:"none",type2:_n[Vn],lineType:_n[Vn-1]};break;case 57:this.$={type1:_n[Vn-1],type2:"none",lineType:_n[Vn]};break;case 58:this.$={type1:"none",type2:"none",lineType:_n[Vn]};break;case 59:this.$=pn.relationType.AGGREGATION;break;case 60:this.$=pn.relationType.EXTENSION;break;case 61:this.$=pn.relationType.COMPOSITION;break;case 62:this.$=pn.relationType.DEPENDENCY;break;case 63:this.$=pn.relationType.LOLLIPOP;break;case 64:this.$=pn.lineType.LINE;break;case 65:this.$=pn.lineType.DOTTED_LINE;break;case 66:case 72:this.$=_n[Vn-2],pn.setClickEvent(_n[Vn-1],_n[Vn]);break;case 67:case 73:this.$=_n[Vn-3],pn.setClickEvent(_n[Vn-2],_n[Vn-1]),pn.setTooltip(_n[Vn-2],_n[Vn]);break;case 68:case 76:this.$=_n[Vn-2],pn.setLink(_n[Vn-1],_n[Vn]);break;case 69:this.$=_n[Vn-3],pn.setLink(_n[Vn-2],_n[Vn-1],_n[Vn]);break;case 70:case 78:this.$=_n[Vn-3],pn.setLink(_n[Vn-2],_n[Vn-1]),pn.setTooltip(_n[Vn-2],_n[Vn]);break;case 71:case 79:this.$=_n[Vn-4],pn.setLink(_n[Vn-3],_n[Vn-2],_n[Vn]),pn.setTooltip(_n[Vn-3],_n[Vn-1]);break;case 74:this.$=_n[Vn-3],pn.setClickEvent(_n[Vn-2],_n[Vn-1],_n[Vn]);break;case 75:this.$=_n[Vn-4],pn.setClickEvent(_n[Vn-3],_n[Vn-2],_n[Vn-1]),pn.setTooltip(_n[Vn-3],_n[Vn]);break;case 77:this.$=_n[Vn-3],pn.setLink(_n[Vn-2],_n[Vn-1],_n[Vn]);break;case 80:pn.setCssClass(_n[Vn-1],_n[Vn]);break}},table:[{3:1,4:2,5:rt,6:4,7:5,8:it,9:st,10:_t,11:xt,12:6,13:11,19:Et,23:kt},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:rt,6:4,7:5,8:it,9:st,10:_t,11:xt,12:6,13:11,19:Et,23:kt},{1:[2,9]},nt(Lt,[2,5]),nt(Lt,[2,6]),nt(Lt,[2,7]),nt(Lt,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:It},nt([17,22],[2,13]),{6:31,7:30,8:it,9:st,10:_t,11:xt,13:11,19:Et,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Rt,41:Nt,43:Bt,44:Ft,49:Yt,51:Zt,52:Wt,55:Kt,57:Jt,67:on,68:rn,70:ln,74:gn,88:wn,89:kn,90:Cn,91:Pn},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},nt(An,[2,25],{32:[1,57]}),nt(An,[2,27]),nt(An,[2,28]),nt(An,[2,29]),nt(An,[2,30]),nt(An,[2,31]),nt(An,[2,32]),nt(An,[2,33]),nt(An,[2,34]),{40:[1,58]},{42:[1,59]},nt(An,[2,37]),nt(An,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:cn,61:Ln,62:an,63:zn,64:dn,65:Fn,66:ir}),{27:72,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},nt(An,[2,47]),nt(An,[2,48]),{28:73,88:wn,89:kn,90:Cn},{27:74,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},{27:75,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},{27:76,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},{54:[1,77]},{27:78,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},{54:tr,56:79},nt(Jn,[2,20],{28:46,29:47,27:81,30:[1,82],88:wn,89:kn,90:Cn,91:Pn}),nt(Jn,[2,21],{30:[1,83]}),nt(hr,[2,94]),nt(hr,[2,95]),nt(hr,[2,96]),nt([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),nt(lr,[2,10]),{15:84,22:It},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:it,9:st,10:_t,11:xt,13:11,19:Et,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Rt,41:Nt,43:Bt,44:Ft,49:Yt,51:Zt,52:Wt,55:Kt,57:Jt,67:on,68:rn,70:ln,74:gn,88:wn,89:kn,90:Cn,91:Pn},nt(An,[2,26]),nt(An,[2,35]),nt(An,[2,36]),{27:86,28:46,29:47,54:[1,87],88:wn,89:kn,90:Cn,91:Pn},{53:88,58:63,59:64,60:cn,61:Ln,62:an,63:zn,64:dn,65:Fn,66:ir},nt(An,[2,46]),{59:89,65:Fn,66:ir},nt(cr,[2,58],{58:90,60:cn,61:Ln,62:an,63:zn,64:dn}),nt(Cr,[2,59]),nt(Cr,[2,60]),nt(Cr,[2,61]),nt(Cr,[2,62]),nt(Cr,[2,63]),nt(Er,[2,64]),nt(Er,[2,65]),nt(An,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:wn,89:kn,90:Cn},{54:tr,56:99},nt(An,[2,54]),nt(An,[2,98]),nt(Jn,[2,22]),nt(Jn,[2,23]),nt(Jn,[2,24]),{16:[1,100]},{25:[2,19]},nt(ar,[2,49]),{27:101,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},{27:102,28:46,29:47,54:[1,103],88:wn,89:kn,90:Cn,91:Pn},nt(cr,[2,57],{58:104,60:cn,61:Ln,62:an,63:zn,64:dn}),nt(cr,[2,56]),{28:105,88:wn,89:kn,90:Cn},{47:106,51:Fr},{27:108,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},nt(An,[2,66],{54:[1,109]}),nt(An,[2,68],{54:[1,111],69:[1,110]}),nt(An,[2,72],{54:[1,112],72:[1,113]}),nt(An,[2,76],{54:[1,115],69:[1,114]}),nt(An,[2,80]),nt(An,[2,53]),nt(lr,[2,11]),nt(ar,[2,51]),nt(ar,[2,50]),{27:116,28:46,29:47,88:wn,89:kn,90:Cn,91:Pn},nt(cr,[2,55]),nt(An,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:Fr},nt(An,[2,42]),nt(An,[2,67]),nt(An,[2,69]),nt(An,[2,70],{69:[1,120]}),nt(An,[2,73]),nt(An,[2,74],{54:[1,121]}),nt(An,[2,77]),nt(An,[2,78],{69:[1,122]}),nt(ar,[2,52]),{47:123,51:Fr},nt(An,[2,40]),{48:[2,44]},nt(An,[2,71]),nt(An,[2,75]),nt(An,[2,79]),{48:[1,124]},nt(An,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(er,nn){if(nn.recoverable)this.trace(er);else{var un=new Error(er);throw un.hash=nn,un}},parse:function(er){var nn=this,un=[0],pn=[],Rn=[null],_n=[],or=this.table,Vn="",Wn=0,Hn=0,nr=2,sr=1,pr=_n.slice.call(arguments,1),vr=Object.create(this.lexer),kr={yy:{}};for(var si in this.yy)Object.prototype.hasOwnProperty.call(this.yy,si)&&(kr.yy[si]=this.yy[si]);vr.setInput(er,kr.yy),kr.yy.lexer=vr,kr.yy.parser=this,typeof vr.yylloc>"u"&&(vr.yylloc={});var ui=vr.yylloc;_n.push(ui);var ii=vr.options&&vr.options.ranges;typeof kr.yy.parseError=="function"?this.parseError=kr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function li(){var yr;return yr=pn.pop()||vr.lex()||sr,typeof yr!="number"&&(yr instanceof Array&&(pn=yr,yr=pn.pop()),yr=nn.symbols_[yr]||yr),yr}for(var Ei,wi,Ci,Lr,Tn={},En,Un,qn,_r;;){if(wi=un[un.length-1],this.defaultActions[wi]?Ci=this.defaultActions[wi]:((Ei===null||typeof Ei>"u")&&(Ei=li()),Ci=or[wi]&&or[wi][Ei]),typeof Ci>"u"||!Ci.length||!Ci[0]){var Zr="";_r=[];for(En in or[wi])this.terminals_[En]&&En>nr&&_r.push("'"+this.terminals_[En]+"'");vr.showPosition?Zr="Parse error on line "+(Wn+1)+`:
`+vr.showPosition()+`
Expecting `+_r.join(", ")+", got '"+(this.terminals_[Ei]||Ei)+"'":Zr="Parse error on line "+(Wn+1)+": Unexpected "+(Ei==sr?"end of input":"'"+(this.terminals_[Ei]||Ei)+"'"),this.parseError(Zr,{text:vr.match,token:this.terminals_[Ei]||Ei,line:vr.yylineno,loc:ui,expected:_r})}if(Ci[0]instanceof Array&&Ci.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wi+", token: "+Ei);switch(Ci[0]){case 1:un.push(Ei),Rn.push(vr.yytext),_n.push(vr.yylloc),un.push(Ci[1]),Ei=null,Hn=vr.yyleng,Vn=vr.yytext,Wn=vr.yylineno,ui=vr.yylloc;break;case 2:if(Un=this.productions_[Ci[1]][1],Tn.$=Rn[Rn.length-Un],Tn._$={first_line:_n[_n.length-(Un||1)].first_line,last_line:_n[_n.length-1].last_line,first_column:_n[_n.length-(Un||1)].first_column,last_column:_n[_n.length-1].last_column},ii&&(Tn._$.range=[_n[_n.length-(Un||1)].range[0],_n[_n.length-1].range[1]]),Lr=this.performAction.apply(Tn,[Vn,Hn,Wn,kr.yy,Ci[1],Rn,_n].concat(pr)),typeof Lr<"u")return Lr;Un&&(un=un.slice(0,-1*Un*2),Rn=Rn.slice(0,-1*Un),_n=_n.slice(0,-1*Un)),un.push(this.productions_[Ci[1]][0]),Rn.push(Tn.$),_n.push(Tn._$),qn=or[un[un.length-2]][un[un.length-1]],un.push(qn);break;case 3:return!0}}return!0}},xr=function(){var gr={EOF:1,parseError:function(nn,un){if(this.yy.parser)this.yy.parser.parseError(nn,un);else throw new Error(nn)},setInput:function(er,nn){return this.yy=nn||this.yy||{},this._input=er,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var er=this._input[0];this.yytext+=er,this.yyleng++,this.offset++,this.match+=er,this.matched+=er;var nn=er.match(/(?:\r\n?|\n).*/g);return nn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),er},unput:function(er){var nn=er.length,un=er.split(/(?:\r\n?|\n)/g);this._input=er+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-nn),this.offset-=nn;var pn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),un.length-1&&(this.yylineno-=un.length-1);var Rn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:un?(un.length===pn.length?this.yylloc.first_column:0)+pn[pn.length-un.length].length-un[0].length:this.yylloc.first_column-nn},this.options.ranges&&(this.yylloc.range=[Rn[0],Rn[0]+this.yyleng-nn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(er){this.unput(this.match.slice(er))},pastInput:function(){var er=this.matched.substr(0,this.matched.length-this.match.length);return(er.length>20?"...":"")+er.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var er=this.match;return er.length<20&&(er+=this._input.substr(0,20-er.length)),(er.substr(0,20)+(er.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var er=this.pastInput(),nn=new Array(er.length+1).join("-");return er+this.upcomingInput()+`
`+nn+"^"},test_match:function(er,nn){var un,pn,Rn;if(this.options.backtrack_lexer&&(Rn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Rn.yylloc.range=this.yylloc.range.slice(0))),pn=er[0].match(/(?:\r\n?|\n).*/g),pn&&(this.yylineno+=pn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pn?pn[pn.length-1].length-pn[pn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+er[0].length},this.yytext+=er[0],this.match+=er[0],this.matches=er,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(er[0].length),this.matched+=er[0],un=this.performAction.call(this,this.yy,this,nn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),un)return un;if(this._backtrack){for(var _n in Rn)this[_n]=Rn[_n];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var er,nn,un,pn;this._more||(this.yytext="",this.match="");for(var Rn=this._currentRules(),_n=0;_n<Rn.length;_n++)if(un=this._input.match(this.rules[Rn[_n]]),un&&(!nn||un[0].length>nn[0].length)){if(nn=un,pn=_n,this.options.backtrack_lexer){if(er=this.test_match(un,Rn[_n]),er!==!1)return er;if(this._backtrack){nn=!1;continue}else return!1}else if(!this.options.flex)break}return nn?(er=this.test_match(nn,Rn[pn]),er!==!1?er:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var nn=this.next();return nn||this.lex()},begin:function(nn){this.conditionStack.push(nn)},popState:function(){var nn=this.conditionStack.length-1;return nn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(nn){return nn=this.conditionStack.length-1-Math.abs(nn||0),nn>=0?this.conditionStack[nn]:"INITIAL"},pushState:function(nn){this.begin(nn)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(nn,un,pn,Rn){switch(pn){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return gr}();mr.lexer=xr;function fr(){this.yy={}}return fr.prototype=mr,mr.Parser=fr,new fr}();parser$a.parser=parser$a;const classParser=parser$a,classDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*classDiagram/)!==null},classDetectorV2=(nt,rt)=>{var it;return nt.match(/^\s*classDiagram/)!==null&&((it=rt==null?void 0:rt.class)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!0:nt.match(/^\s*classDiagram-v2/)!==null},MERMAID_DOM_ID_PREFIX$1="classid-";let relations$1=[],classes$2={},notes=[],classCounter=0,funs$2=[];const sanitizeText$2=nt=>common$1.sanitizeText(nt,getConfig$1()),parseDirective$8=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},splitClassNameAndType=function(nt){let rt="",it=nt;if(nt.indexOf("~")>0){let st=nt.split("~");it=st[0],rt=common$1.sanitizeText(st[1],getConfig$1())}return{className:it,type:rt}},addClass$1=function(nt){let rt=splitClassNameAndType(nt);classes$2[rt.className]===void 0&&(classes$2[rt.className]={id:rt.className,type:rt.type,cssClasses:[],methods:[],members:[],annotations:[],domId:MERMAID_DOM_ID_PREFIX$1+rt.className+"-"+classCounter},classCounter++)},lookUpDomId$1=function(nt){const rt=Object.keys(classes$2);for(const it of rt)if(classes$2[it].id===nt)return classes$2[it].domId},clear$c=function(){relations$1=[],classes$2={},notes=[],funs$2=[],funs$2.push(setupToolTips$1),clear$g()},getClass=function(nt){return classes$2[nt]},getClasses$5=function(){return classes$2},getRelations$1=function(){return relations$1},getNotes=function(){return notes},addRelation$1=function(nt){log$1.debug("Adding relation: "+JSON.stringify(nt)),addClass$1(nt.id1),addClass$1(nt.id2),nt.id1=splitClassNameAndType(nt.id1).className,nt.id2=splitClassNameAndType(nt.id2).className,nt.relationTitle1=common$1.sanitizeText(nt.relationTitle1.trim(),getConfig$1()),nt.relationTitle2=common$1.sanitizeText(nt.relationTitle2.trim(),getConfig$1()),relations$1.push(nt)},addAnnotation=function(nt,rt){const it=splitClassNameAndType(nt).className;classes$2[it].annotations.push(rt)},addMember=function(nt,rt){const it=splitClassNameAndType(nt).className,st=classes$2[it];if(typeof rt=="string"){const _t=rt.trim();_t.startsWith("<<")&&_t.endsWith(">>")?st.annotations.push(sanitizeText$2(_t.substring(2,_t.length-2))):_t.indexOf(")")>0?st.methods.push(sanitizeText$2(_t)):_t&&st.members.push(sanitizeText$2(_t))}},addMembers=function(nt,rt){Array.isArray(rt)&&(rt.reverse(),rt.forEach(it=>addMember(nt,it)))},addNote$1=function(nt,rt){const it={id:`note${notes.length}`,class:rt,text:nt};notes.push(it)},cleanupLabel$1=function(nt){return nt.substring(0,1)===":"?common$1.sanitizeText(nt.substr(1).trim(),getConfig$1()):sanitizeText$2(nt.trim())},setCssClass$1=function(nt,rt){nt.split(",").forEach(function(it){let st=it;it[0].match(/\d/)&&(st=MERMAID_DOM_ID_PREFIX$1+st),classes$2[st]!==void 0&&classes$2[st].cssClasses.push(rt)})},setTooltip$1=function(nt,rt){const it=getConfig$1();nt.split(",").forEach(function(st){rt!==void 0&&(classes$2[st].tooltip=common$1.sanitizeText(rt,it))})},getTooltip$1=function(nt){return classes$2[nt].tooltip},setLink$2=function(nt,rt,it){const st=getConfig$1();nt.split(",").forEach(function(_t){let xt=_t;_t[0].match(/\d/)&&(xt=MERMAID_DOM_ID_PREFIX$1+xt),classes$2[xt]!==void 0&&(classes$2[xt].link=utils.formatUrl(rt,st),st.securityLevel==="sandbox"?classes$2[xt].linkTarget="_top":typeof it=="string"?classes$2[xt].linkTarget=sanitizeText$2(it):classes$2[xt].linkTarget="_blank")}),setCssClass$1(nt,"clickable")},setClickEvent$2=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFunc(st,rt,it),classes$2[st].haveCallback=!0}),setCssClass$1(nt,"clickable")},setClickFunc=function(nt,rt,it){const st=getConfig$1();let _t=nt,xt=lookUpDomId$1(_t);if(st.securityLevel==="loose"&&rt!==void 0&&classes$2[_t]!==void 0){let Et=[];if(typeof it=="string"){Et=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let kt=0;kt<Et.length;kt++){let Lt=Et[kt].trim();Lt.charAt(0)==='"'&&Lt.charAt(Lt.length-1)==='"'&&(Lt=Lt.substr(1,Lt.length-2)),Et[kt]=Lt}}Et.length===0&&Et.push(xt),funs$2.push(function(){const kt=document.querySelector(`[id="${xt}"]`);kt!==null&&kt.addEventListener("click",function(){utils.runFunc(rt,...Et)},!1)})}},bindFunctions$2=function(nt){funs$2.forEach(function(rt){rt(nt)})},lineType$1={LINE:0,DOTTED_LINE:1},relationType$1={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setupToolTips$1=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const _t=select(this);if(_t.attr("title")===null)return;const Et=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(_t.attr("title")).style("left",window.scrollX+Et.left+(Et.right-Et.left)/2+"px").style("top",window.scrollY+Et.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),_t.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$2.push(setupToolTips$1);let direction$2="TB";const getDirection$2=()=>direction$2,setDirection$2=nt=>{direction$2=nt},classDb={parseDirective:parseDirective$8,setAccTitle,getAccTitle,getAccDescription,setAccDescription,getConfig:()=>getConfig$1().class,addClass:addClass$1,bindFunctions:bindFunctions$2,clear:clear$c,getClass,getClasses:getClasses$5,getNotes,addAnnotation,addNote:addNote$1,getRelations:getRelations$1,addRelation:addRelation$1,getDirection:getDirection$2,setDirection:setDirection$2,addMember,addMembers,cleanupLabel:cleanupLabel$1,lineType:lineType$1,relationType:relationType$1,setClickEvent:setClickEvent$2,setCssClass:setCssClass$1,setLink:setLink$2,getTooltip:getTooltip$1,setTooltip:setTooltip$1,lookUpDomId:lookUpDomId$1,setDiagramTitle,getDiagramTitle};let edgeCount$1=0;const drawEdge$1=function(nt,rt,it,st,_t){const xt=function(Jt){switch(Jt){case _t.db.relationType.AGGREGATION:return"aggregation";case _t.db.relationType.EXTENSION:return"extension";case _t.db.relationType.COMPOSITION:return"composition";case _t.db.relationType.DEPENDENCY:return"dependency";case _t.db.relationType.LOLLIPOP:return"lollipop"}};rt.points=rt.points.filter(Jt=>!Number.isNaN(Jt.y));const Et=rt.points,kt=line$1().x(function(Jt){return Jt.x}).y(function(Jt){return Jt.y}).curve(curveBasis),Lt=nt.append("path").attr("d",kt(Et)).attr("id","edge"+edgeCount$1).attr("class","relation");let It="";st.arrowMarkerAbsolute&&(It=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,It=It.replace(/\(/g,"\\("),It=It.replace(/\)/g,"\\)")),it.relation.lineType==1&&Lt.attr("class","relation dashed-line"),it.relation.lineType==10&&Lt.attr("class","relation dotted-line"),it.relation.type1!=="none"&&Lt.attr("marker-start","url("+It+"#"+xt(it.relation.type1)+"Start)"),it.relation.type2!=="none"&&Lt.attr("marker-end","url("+It+"#"+xt(it.relation.type2)+"End)");let Rt,Nt;const Bt=rt.points.length;let Ft=utils.calcLabelPosition(rt.points);Rt=Ft.x,Nt=Ft.y;let Yt,Zt,Wt,Kt;if(Bt%2!==0&&Bt>1){let Jt=utils.calcCardinalityPosition(it.relation.type1!=="none",rt.points,rt.points[0]),on=utils.calcCardinalityPosition(it.relation.type2!=="none",rt.points,rt.points[Bt-1]);log$1.debug("cardinality_1_point "+JSON.stringify(Jt)),log$1.debug("cardinality_2_point "+JSON.stringify(on)),Yt=Jt.x,Zt=Jt.y,Wt=on.x,Kt=on.y}if(it.title!==void 0){const Jt=nt.append("g").attr("class","classLabel"),on=Jt.append("text").attr("class","label").attr("x",Rt).attr("y",Nt).attr("fill","red").attr("text-anchor","middle").text(it.title);window.label=on;const rn=on.node().getBBox();Jt.insert("rect",":first-child").attr("class","box").attr("x",rn.x-st.padding/2).attr("y",rn.y-st.padding/2).attr("width",rn.width+st.padding).attr("height",rn.height+st.padding)}log$1.info("Rendering relation "+JSON.stringify(it)),it.relationTitle1!==void 0&&it.relationTitle1!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",Yt).attr("y",Zt).attr("fill","black").attr("font-size","6").text(it.relationTitle1),it.relationTitle2!==void 0&&it.relationTitle2!=="none"&&nt.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",Wt).attr("y",Kt).attr("fill","black").attr("font-size","6").text(it.relationTitle2),edgeCount$1++},drawClass=function(nt,rt,it,st){log$1.debug("Rendering class ",rt,it);const _t=rt.id,xt={id:_t,label:rt.id,width:0,height:0},Et=nt.append("g").attr("id",st.db.lookUpDomId(_t)).attr("class","classGroup");let kt;rt.link?kt=Et.append("svg:a").attr("xlink:href",rt.link).attr("target",rt.linkTarget).append("text").attr("y",it.textHeight+it.padding).attr("x",0):kt=Et.append("text").attr("y",it.textHeight+it.padding).attr("x",0);let Lt=!0;rt.annotations.forEach(function(ln){const gn=kt.append("tspan").text("\xAB"+ln+"\xBB");Lt||gn.attr("dy",it.textHeight),Lt=!1});let It=rt.id;rt.type!==void 0&&rt.type!==""&&(It+="<"+rt.type+">");const Rt=kt.append("tspan").text(It).attr("class","title");Lt||Rt.attr("dy",it.textHeight);const Nt=kt.node().getBBox().height,Bt=Et.append("line").attr("x1",0).attr("y1",it.padding+Nt+it.dividerMargin/2).attr("y2",it.padding+Nt+it.dividerMargin/2),Ft=Et.append("text").attr("x",it.padding).attr("y",Nt+it.dividerMargin+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.members.forEach(function(ln){addTspan(Ft,ln,Lt,it),Lt=!1});const Yt=Ft.node().getBBox(),Zt=Et.append("line").attr("x1",0).attr("y1",it.padding+Nt+it.dividerMargin+Yt.height).attr("y2",it.padding+Nt+it.dividerMargin+Yt.height),Wt=Et.append("text").attr("x",it.padding).attr("y",Nt+2*it.dividerMargin+Yt.height+it.textHeight).attr("fill","white").attr("class","classText");Lt=!0,rt.methods.forEach(function(ln){addTspan(Wt,ln,Lt,it),Lt=!1});const Kt=Et.node().getBBox();var Jt=" ";rt.cssClasses.length>0&&(Jt=Jt+rt.cssClasses.join(" "));const rn=Et.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",Kt.width+2*it.padding).attr("height",Kt.height+it.padding+.5*it.dividerMargin).attr("class",Jt).node().getBBox().width;return kt.node().childNodes.forEach(function(ln){ln.setAttribute("x",(rn-ln.getBBox().width)/2)}),rt.tooltip&&kt.insert("title").text(rt.tooltip),Bt.attr("x2",rn),Zt.attr("x2",rn),xt.width=rn,xt.height=Kt.height+it.padding+.5*it.dividerMargin,xt},drawNote$2=function(nt,rt,it,st){log$1.debug("Rendering note ",rt,it);const _t=rt.id,xt={id:_t,text:rt.text,width:0,height:0},Et=nt.append("g").attr("id",_t).attr("class","classGroup");let kt=Et.append("text").attr("y",it.textHeight+it.padding).attr("x",0);const Lt=JSON.parse(`"${rt.text}"`).split(`
`);Lt.forEach(function(Bt){log$1.debug(`Adding line: ${Bt}`),kt.append("tspan").text(Bt).attr("class","title").attr("dy",it.textHeight)});const It=Et.node().getBBox(),Nt=Et.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",It.width+2*it.padding).attr("height",It.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin).node().getBBox().width;return kt.node().childNodes.forEach(function(Bt){Bt.setAttribute("x",(Nt-Bt.getBBox().width)/2)}),xt.width=Nt,xt.height=It.height+Lt.length*it.textHeight+it.padding+.5*it.dividerMargin,xt},parseMember=function(nt){const rt=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,it=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let st=nt.match(rt),_t=nt.match(it);return st&&!_t?buildFieldDisplay(st):_t?buildMethodDisplay(_t):buildLegacyDisplay(nt)},buildFieldDisplay=function(nt){let rt="",it="";try{let st=nt[1]?nt[1].trim():"",_t=nt[2]?nt[2].trim():"",xt=nt[3]?parseGenericTypes(nt[3].trim()):"",Et=nt[4]?nt[4].trim():"",kt=nt[5]?nt[5].trim():"";it=st+_t+xt+" "+Et,rt=parseClassifier(kt)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildMethodDisplay=function(nt){let rt="",it="";try{let st=nt[1]?nt[1].trim():"",_t=nt[2]?nt[2].trim():"",xt=nt[3]?parseGenericTypes(nt[3].trim()):"",Et=nt[4]?nt[4].trim():"",kt=nt[5]?" : "+parseGenericTypes(nt[5]).trim():"";it=st+_t+"("+xt+")"+kt,rt=parseClassifier(Et)}catch{it=nt}return{displayText:it,cssStyle:rt}},buildLegacyDisplay=function(nt){let rt="",it="",st="",_t=nt.indexOf("("),xt=nt.indexOf(")");if(_t>1&&xt>_t&&xt<=nt.length){let Et="",kt="",Lt=nt.substring(0,1);Lt.match(/\w/)?kt=nt.substring(0,_t).trim():(Lt.match(/[#+~-]/)&&(Et=Lt),kt=nt.substring(1,_t).trim());const It=nt.substring(_t+1,xt);nt.substring(xt+1,1),it=parseClassifier(nt.substring(xt+1,xt+2)),rt=Et+kt+"("+parseGenericTypes(It.trim())+")",xt<nt.length&&(st=nt.substring(xt+2).trim(),st!==""&&(st=" : "+parseGenericTypes(st),rt+=st))}else rt=parseGenericTypes(nt);return{displayText:rt,cssStyle:it}},addTspan=function(nt,rt,it,st){let _t=parseMember(rt);const xt=nt.append("tspan").attr("x",st.padding).text(_t.displayText);_t.cssStyle!==""&&xt.attr("style",_t.cssStyle),it||xt.attr("dy",st.textHeight)},parseClassifier=function(nt){switch(nt){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},svgDraw$2={drawClass,drawEdge:drawEdge$1,drawNote:drawNote$2,parseMember};let idCache$2={};const padding=20,getGraphId=function(nt){const rt=Object.entries(idCache$2).find(it=>it[1].label===nt);if(rt)return rt[0]},insertMarkers$4=function(nt){nt.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),nt.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},draw$d=function(nt,rt,it,st){const _t=getConfig$1().class;idCache$2={},log$1.info("Rendering diagram "+nt);const xt=getConfig$1().securityLevel;let Et;xt==="sandbox"&&(Et=select("#i"+rt));const kt=select(xt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=kt.select(`[id='${rt}']`);insertMarkers$4(Lt);const It=new Graph({multigraph:!0});It.setGraph({isMultiGraph:!0}),It.setDefaultEdgeLabel(function(){return{}});const Rt=st.db.getClasses(),Nt=Object.keys(Rt);for(const Jt of Nt){const on=Rt[Jt],rn=svgDraw$2.drawClass(Lt,on,_t,st);idCache$2[rn.id]=rn,It.setNode(rn.id,rn),log$1.info("Org height: "+rn.height)}st.db.getRelations().forEach(function(Jt){log$1.info("tjoho"+getGraphId(Jt.id1)+getGraphId(Jt.id2)+JSON.stringify(Jt)),It.setEdge(getGraphId(Jt.id1),getGraphId(Jt.id2),{relation:Jt},Jt.title||"DEFAULT")}),st.db.getNotes().forEach(function(Jt){log$1.debug(`Adding note: ${JSON.stringify(Jt)}`);const on=svgDraw$2.drawNote(Lt,Jt,_t,st);idCache$2[on.id]=on,It.setNode(on.id,on),Jt.class&&Jt.class in Rt&&It.setEdge(Jt.id,getGraphId(Jt.class),{relation:{id1:Jt.id,id2:Jt.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),layout(It),It.nodes().forEach(function(Jt){Jt!==void 0&&It.node(Jt)!==void 0&&(log$1.debug("Node "+Jt+": "+JSON.stringify(It.node(Jt))),kt.select("#"+(st.db.lookUpDomId(Jt)||Jt)).attr("transform","translate("+(It.node(Jt).x-It.node(Jt).width/2)+","+(It.node(Jt).y-It.node(Jt).height/2)+" )"))}),It.edges().forEach(function(Jt){Jt!==void 0&&It.edge(Jt)!==void 0&&(log$1.debug("Edge "+Jt.v+" -> "+Jt.w+": "+JSON.stringify(It.edge(Jt))),svgDraw$2.drawEdge(Lt,It.edge(Jt),It.edge(Jt).relation,_t,st))});const Yt=Lt.node().getBBox(),Zt=Yt.width+padding*2,Wt=Yt.height+padding*2;configureSvgSize(Lt,Wt,Zt,_t.useMaxWidth);const Kt=`${Yt.x-padding} ${Yt.y-padding} ${Zt} ${Wt}`;log$1.debug(`viewBox ${Kt}`),Lt.attr("viewBox",Kt)},classRenderer={draw:draw$d},insertMarkers$2=(nt,rt,it,st)=>{rt.forEach(_t=>{markers$1[_t](nt,it,st)})},extension=(nt,rt,it)=>{log$1.trace("Making markers for ",it),nt.append("defs").append("marker").attr("id",rt+"-extensionStart").attr("class","marker extension "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),nt.append("defs").append("marker").attr("id",rt+"-extensionEnd").attr("class","marker extension "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-compositionStart").attr("class","marker composition "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-compositionEnd").attr("class","marker composition "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-aggregationStart").attr("class","marker aggregation "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-aggregationEnd").attr("class","marker aggregation "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-dependencyStart").attr("class","marker dependency "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),nt.append("defs").append("marker").attr("id",rt+"-dependencyEnd").attr("class","marker dependency "+rt).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-lollipopStart").attr("class","marker lollipop "+rt).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point=(nt,rt)=>{nt.append("marker").attr("id",rt+"-pointEnd").attr("class","marker "+rt).attr("viewBox","0 0 12 20").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-pointStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle$1=(nt,rt)=>{nt.append("marker").attr("id",rt+"-circleEnd").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-circleStart").attr("class","marker "+rt).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross=(nt,rt)=>{nt.append("marker").attr("id",rt+"-crossEnd").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),nt.append("marker").attr("id",rt+"-crossStart").attr("class","marker cross "+rt).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb=(nt,rt)=>{nt.append("defs").append("marker").attr("id",rt+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},markers$1={extension,composition,aggregation,dependency,lollipop,point,circle:circle$1,cross,barb},insertMarkers$3=insertMarkers$2;function applyStyle(nt,rt){rt&&nt.attr("style",rt)}function addHtmlLabel(nt){const rt=select(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),it=rt.append("xhtml:div"),st=nt.label,_t=nt.isNode?"nodeLabel":"edgeLabel";return it.html('<span class="'+_t+'" '+(nt.labelStyle?'style="'+nt.labelStyle+'"':"")+">"+st+"</span>"),applyStyle(it,nt.labelStyle),it.style("display","inline-block"),it.style("white-space","nowrap"),it.attr("xmlns","http://www.w3.org/1999/xhtml"),rt.node()}const createLabel=(nt,rt,it,st)=>{let _t=nt||"";if(typeof _t=="object"&&(_t=_t[0]),evaluate(getConfig$1().flowchart.htmlLabels)){_t=_t.replace(/\\n|\n/g,"<br />"),log$1.info("vertexText"+_t);const xt={isNode:st,label:decodeEntities(_t).replace(/fa[blrs]?:fa-[\w-]+/g,kt=>`<i class='${kt.replace(":"," ")}'></i>`),labelStyle:rt.replace("fill:","color:")};return addHtmlLabel(xt)}else{const xt=document.createElementNS("http://www.w3.org/2000/svg","text");xt.setAttribute("style",rt.replace("color:","fill:"));let Et=[];typeof _t=="string"?Et=_t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(_t)?Et=_t:Et=[];for(const kt of Et){const Lt=document.createElementNS("http://www.w3.org/2000/svg","tspan");Lt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Lt.setAttribute("dy","1em"),Lt.setAttribute("x","0"),it?Lt.setAttribute("class","title-row"):Lt.setAttribute("class","row"),Lt.textContent=kt.trim(),xt.appendChild(Lt)}return xt}},createLabel$1=createLabel,labelHelper=(nt,rt,it,st)=>{let _t;it?_t=it:_t="node default";const xt=nt.insert("g").attr("class",_t).attr("id",rt.domId||rt.id),Et=xt.insert("g").attr("class","label").attr("style",rt.labelStyle);let kt;rt.labelText===void 0?kt="":kt=typeof rt.labelText=="string"?rt.labelText:rt.labelText[0];const Lt=Et.node().appendChild(createLabel$1(sanitizeText$5(decodeEntities(kt),getConfig$1()),rt.labelStyle,!1,st));let It=Lt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Nt=Lt.children[0],Bt=select(Lt);It=Nt.getBoundingClientRect(),Bt.attr("width",It.width),Bt.attr("height",It.height)}const Rt=rt.padding/2;return Et.attr("transform","translate("+-It.width/2+", "+-It.height/2+")"),{shapeSvg:xt,bbox:It,halfPadding:Rt,label:Et}},updateNodeBounds=(nt,rt)=>{const it=rt.node().getBBox();nt.width=it.width,nt.height=it.height};function insertPolygonShape$1(nt,rt,it,st){return nt.insert("polygon",":first-child").attr("points",st.map(function(_t){return _t.x+","+_t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-rt/2+","+it/2+")")}let clusterDb={},descendants={},parents={};const clear$b=()=>{descendants={},parents={},clusterDb={}},isDescendant=(nt,rt)=>(log$1.trace("In isDecendant",rt," ",nt," = ",descendants[rt].includes(nt)),!!descendants[rt].includes(nt)),edgeInCluster=(nt,rt)=>(log$1.info("Decendants of ",rt," is ",descendants[rt]),log$1.info("Edge is ",nt),nt.v===rt||nt.w===rt?!1:descendants[rt]?descendants[rt].includes(nt.v)||isDescendant(nt.v,rt)||isDescendant(nt.w,rt)||descendants[rt].includes(nt.w):(log$1.debug("Tilt, ",rt,",not in decendants"),!1)),copy=(nt,rt,it,st)=>{log$1.warn("Copying children of ",nt,"root",st,"data",rt.node(nt),st);const _t=rt.children(nt)||[];nt!==st&&_t.push(nt),log$1.warn("Copying (nodes) clusterId",nt,"nodes",_t),_t.forEach(xt=>{if(rt.children(xt).length>0)copy(xt,rt,it,st);else{const Et=rt.node(xt);log$1.info("cp ",xt," to ",st," with parent ",nt),it.setNode(xt,Et),st!==rt.parent(xt)&&(log$1.warn("Setting parent",xt,rt.parent(xt)),it.setParent(xt,rt.parent(xt))),nt!==st&&xt!==nt?(log$1.debug("Setting parent",xt,nt),it.setParent(xt,nt)):(log$1.info("In copy ",nt,"root",st,"data",rt.node(nt),st),log$1.debug("Not Setting parent for node=",xt,"cluster!==rootId",nt!==st,"node!==clusterId",xt!==nt));const kt=rt.edges(xt);log$1.debug("Copying Edges",kt),kt.forEach(Lt=>{log$1.info("Edge",Lt);const It=rt.edge(Lt.v,Lt.w,Lt.name);log$1.info("Edge data",It,st);try{edgeInCluster(Lt,st)?(log$1.info("Copying as ",Lt.v,Lt.w,It,Lt.name),it.setEdge(Lt.v,Lt.w,It,Lt.name),log$1.info("newGraph edges ",it.edges(),it.edge(it.edges()[0]))):log$1.info("Skipping copy of edge ",Lt.v,"-->",Lt.w," rootId: ",st," clusterId:",nt)}catch(Rt){log$1.error(Rt)}})}log$1.debug("Removing node",xt),rt.removeNode(xt)})},extractDescendants=(nt,rt)=>{const it=rt.children(nt);let st=[...it];for(const _t of it)parents[_t]=nt,st=[...st,...extractDescendants(_t,rt)];return st},findNonClusterChild=(nt,rt)=>{log$1.trace("Searching",nt);const it=rt.children(nt);if(log$1.trace("Searching children of id ",nt,it),it.length<1)return log$1.trace("This is a valid node",nt),nt;for(const st of it){const _t=findNonClusterChild(st,rt);if(_t)return log$1.trace("Found replacement for",nt," => ",_t),_t}},getAnchorId=nt=>!clusterDb[nt]||!clusterDb[nt].externalConnections?nt:clusterDb[nt]?clusterDb[nt].id:nt,adjustClustersAndEdges=(nt,rt)=>{if(!nt||rt>10){log$1.debug("Opting out, no graph ");return}else log$1.debug("Opting in, graph ");nt.nodes().forEach(function(it){nt.children(it).length>0&&(log$1.warn("Cluster identified",it," Replacement id in edges: ",findNonClusterChild(it,nt)),descendants[it]=extractDescendants(it,nt),clusterDb[it]={id:findNonClusterChild(it,nt),clusterData:nt.node(it)})}),nt.nodes().forEach(function(it){const st=nt.children(it),_t=nt.edges();st.length>0?(log$1.debug("Cluster identified",it,descendants),_t.forEach(xt=>{if(xt.v!==it&&xt.w!==it){const Et=isDescendant(xt.v,it),kt=isDescendant(xt.w,it);Et^kt&&(log$1.warn("Edge: ",xt," leaves cluster ",it),log$1.warn("Decendants of XXX ",it,": ",descendants[it]),clusterDb[it].externalConnections=!0)}})):log$1.debug("Not a cluster ",it,descendants)}),nt.edges().forEach(function(it){const st=nt.edge(it);log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(it)),log$1.warn("Edge "+it.v+" -> "+it.w+": "+JSON.stringify(nt.edge(it)));let _t=it.v,xt=it.w;if(log$1.warn("Fix XXX",clusterDb,"ids:",it.v,it.w,"Translating: ",clusterDb[it.v]," --- ",clusterDb[it.w]),clusterDb[it.v]&&clusterDb[it.w]&&clusterDb[it.v]===clusterDb[it.w]){log$1.warn("Fixing and trixing link to self - removing XXX",it.v,it.w,it.name),log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),_t=getAnchorId(it.v),xt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name);const Et=it.w+"---"+it.v;nt.setNode(Et,{domId:Et,id:Et,labelStyle:"",labelText:st.label,padding:0,shape:"labelRect",style:""});const kt=JSON.parse(JSON.stringify(st)),Lt=JSON.parse(JSON.stringify(st));kt.label="",kt.arrowTypeEnd="none",Lt.label="",kt.fromCluster=it.v,Lt.toCluster=it.v,nt.setEdge(_t,Et,kt,it.name+"-cyclic-special"),nt.setEdge(Et,xt,Lt,it.name+"-cyclic-special")}else(clusterDb[it.v]||clusterDb[it.w])&&(log$1.warn("Fixing and trixing - removing XXX",it.v,it.w,it.name),_t=getAnchorId(it.v),xt=getAnchorId(it.w),nt.removeEdge(it.v,it.w,it.name),_t!==it.v&&(st.fromCluster=it.v),xt!==it.w&&(st.toCluster=it.w),log$1.warn("Fix Replacing with XXX",_t,xt,it.name),nt.setEdge(_t,xt,st,it.name))}),log$1.warn("Adjusted Graph",write(nt)),extractor(nt,0),log$1.trace(clusterDb)},extractor=(nt,rt)=>{if(log$1.warn("extractor - ",rt,write(nt),nt.children("D")),rt>10){log$1.error("Bailing out");return}let it=nt.nodes(),st=!1;for(const _t of it){const xt=nt.children(_t);st=st||xt.length>0}if(!st){log$1.debug("Done, no node has children",nt.nodes());return}log$1.debug("Nodes = ",it,rt);for(const _t of it)if(log$1.debug("Extracting node",_t,clusterDb,clusterDb[_t]&&!clusterDb[_t].externalConnections,!nt.parent(_t),nt.node(_t),nt.children("D")," Depth ",rt),!clusterDb[_t])log$1.debug("Not a cluster",_t,rt);else if(!clusterDb[_t].externalConnections&&nt.children(_t)&&nt.children(_t).length>0){log$1.warn("Cluster without external connections, without a parent and with children",_t,rt);let Et=nt.graph().rankdir==="TB"?"LR":"TB";clusterDb[_t]&&clusterDb[_t].clusterData&&clusterDb[_t].clusterData.dir&&(Et=clusterDb[_t].clusterData.dir,log$1.warn("Fixing dir",clusterDb[_t].clusterData.dir,Et));const kt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Et,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});log$1.warn("Old graph before copy",write(nt)),copy(_t,nt,kt,_t),nt.setNode(_t,{clusterNode:!0,id:_t,clusterData:clusterDb[_t].clusterData,labelText:clusterDb[_t].labelText,graph:kt}),log$1.warn("New graph after copy node: (",_t,")",write(kt)),log$1.debug("Old graph after copy",write(nt))}else log$1.warn("Cluster ** ",_t," **not meeting the criteria !externalConnections:",!clusterDb[_t].externalConnections," no parent: ",!nt.parent(_t)," children ",nt.children(_t)&&nt.children(_t).length>0,nt.children("D"),rt),log$1.debug(clusterDb);it=nt.nodes(),log$1.warn("New list of nodes",it);for(const _t of it){const xt=nt.node(_t);log$1.warn(" Now next level",_t,xt),xt.clusterNode&&extractor(xt.graph,rt+1)}},sorter=(nt,rt)=>{if(rt.length===0)return[];let it=Object.assign(rt);return rt.forEach(st=>{const _t=nt.children(st),xt=sorter(nt,_t);it=[...it,...xt]}),it},sortNodesByHierarchy=nt=>sorter(nt,nt.children());function intersectNode(nt,rt){return nt.intersect(rt)}function intersectEllipse(nt,rt,it,st){var _t=nt.x,xt=nt.y,Et=_t-st.x,kt=xt-st.y,Lt=Math.sqrt(rt*rt*kt*kt+it*it*Et*Et),It=Math.abs(rt*it*Et/Lt);st.x<_t&&(It=-It);var Rt=Math.abs(rt*it*kt/Lt);return st.y<xt&&(Rt=-Rt),{x:_t+It,y:xt+Rt}}function intersectCircle(nt,rt,it){return intersectEllipse(nt,rt,rt,it)}function intersectLine(nt,rt,it,st){var _t,xt,Et,kt,Lt,It,Rt,Nt,Bt,Ft,Yt,Zt,Wt,Kt,Jt;if(_t=rt.y-nt.y,Et=nt.x-rt.x,Lt=rt.x*nt.y-nt.x*rt.y,Bt=_t*it.x+Et*it.y+Lt,Ft=_t*st.x+Et*st.y+Lt,!(Bt!==0&&Ft!==0&&sameSign(Bt,Ft))&&(xt=st.y-it.y,kt=it.x-st.x,It=st.x*it.y-it.x*st.y,Rt=xt*nt.x+kt*nt.y+It,Nt=xt*rt.x+kt*rt.y+It,!(Rt!==0&&Nt!==0&&sameSign(Rt,Nt))&&(Yt=_t*kt-xt*Et,Yt!==0)))return Zt=Math.abs(Yt/2),Wt=Et*It-kt*Lt,Kt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,Wt=xt*Lt-_t*It,Jt=Wt<0?(Wt-Zt)/Yt:(Wt+Zt)/Yt,{x:Kt,y:Jt}}function sameSign(nt,rt){return nt*rt>0}function intersectPolygon(nt,rt,it){var st=nt.x,_t=nt.y,xt=[],Et=Number.POSITIVE_INFINITY,kt=Number.POSITIVE_INFINITY;typeof rt.forEach=="function"?rt.forEach(function(Yt){Et=Math.min(Et,Yt.x),kt=Math.min(kt,Yt.y)}):(Et=Math.min(Et,rt.x),kt=Math.min(kt,rt.y));for(var Lt=st-nt.width/2-Et,It=_t-nt.height/2-kt,Rt=0;Rt<rt.length;Rt++){var Nt=rt[Rt],Bt=rt[Rt<rt.length-1?Rt+1:0],Ft=intersectLine(nt,it,{x:Lt+Nt.x,y:It+Nt.y},{x:Lt+Bt.x,y:It+Bt.y});Ft&&xt.push(Ft)}return xt.length?(xt.length>1&&xt.sort(function(Yt,Zt){var Wt=Yt.x-it.x,Kt=Yt.y-it.y,Jt=Math.sqrt(Wt*Wt+Kt*Kt),on=Zt.x-it.x,rn=Zt.y-it.y,ln=Math.sqrt(on*on+rn*rn);return Jt<ln?-1:Jt===ln?0:1}),xt[0]):nt}const intersectRect=(nt,rt)=>{var it=nt.x,st=nt.y,_t=rt.x-it,xt=rt.y-st,Et=nt.width/2,kt=nt.height/2,Lt,It;return Math.abs(xt)*Et>Math.abs(_t)*kt?(xt<0&&(kt=-kt),Lt=xt===0?0:kt*_t/xt,It=kt):(_t<0&&(Et=-Et),Lt=Et,It=_t===0?0:Et*xt/_t),{x:it+Lt,y:st+It}},intersectRect$1=intersectRect,intersect={node:intersectNode,circle:intersectCircle,ellipse:intersectEllipse,polygon:intersectPolygon,rect:intersectRect$1},note=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:_t}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.info("Classes = ",rt.classes);const xt=it.insert("rect",":first-child");return xt.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-st.width/2-_t).attr("y",-st.height/2-_t).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),updateNodeBounds(rt,xt),rt.intersect=function(Et){return intersect.rect(rt,Et)},it},note$1=note,question$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=_t+xt,kt=[{x:Et/2,y:0},{x:Et,y:-Et/2},{x:Et/2,y:-Et},{x:0,y:-Et/2}];log$1.info("Question main (Circle)");const Lt=insertPolygonShape$1(it,Et,Et,kt);return Lt.attr("style",rt.style),updateNodeBounds(rt,Lt),rt.intersect=function(It){return log$1.warn("Intersect called"),intersect.polygon(rt,kt,It)},it},choice=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=28,_t=[{x:0,y:st/2},{x:st/2,y:0},{x:0,y:-st/2},{x:-st/2,y:0}];return it.insert("polygon",":first-child").attr("points",_t.map(function(Et){return Et.x+","+Et.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),rt.width=28,rt.height=28,rt.intersect=function(Et){return intersect.circle(rt,14,Et)},it},hexagon$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=4,xt=st.height+rt.padding,Et=xt/_t,kt=st.width+2*Et+rt.padding,Lt=[{x:Et,y:0},{x:kt-Et,y:0},{x:kt,y:-xt/2},{x:kt-Et,y:-xt},{x:Et,y:-xt},{x:0,y:-xt/2}],It=insertPolygonShape$1(it,kt,xt,Lt);return It.attr("style",rt.style),updateNodeBounds(rt,It),rt.intersect=function(Rt){return intersect.polygon(rt,Lt,Rt)},it},rect_left_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:-xt/2,y:0},{x:_t,y:0},{x:_t,y:-xt},{x:-xt/2,y:-xt},{x:0,y:-xt/2}];return insertPolygonShape$1(it,_t,xt,Et).attr("style",rt.style),rt.width=_t+xt,rt.height=xt,rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},lean_right$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:-2*xt/6,y:0},{x:_t-xt/6,y:0},{x:_t+2*xt/6,y:-xt},{x:xt/6,y:-xt}],kt=insertPolygonShape$1(it,_t,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},lean_left$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:2*xt/6,y:0},{x:_t+xt/6,y:0},{x:_t-2*xt/6,y:-xt},{x:-xt/6,y:-xt}],kt=insertPolygonShape$1(it,_t,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:-2*xt/6,y:0},{x:_t+2*xt/6,y:0},{x:_t-xt/6,y:-xt},{x:xt/6,y:-xt}],kt=insertPolygonShape$1(it,_t,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},inv_trapezoid$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:xt/6,y:0},{x:_t-xt/6,y:0},{x:_t+2*xt/6,y:-xt},{x:-2*xt/6,y:-xt}],kt=insertPolygonShape$1(it,_t,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},rect_right_inv_arrow$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:0,y:0},{x:_t+xt/2,y:0},{x:_t,y:-xt/2},{x:_t+xt/2,y:-xt},{x:0,y:-xt}],kt=insertPolygonShape$1(it,_t,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},cylinder$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=_t/2,Et=xt/(2.5+_t/50),kt=st.height+Et+rt.padding,Lt="M 0,"+Et+" a "+xt+","+Et+" 0,0,0 "+_t+" 0 a "+xt+","+Et+" 0,0,0 "+-_t+" 0 l 0,"+kt+" a "+xt+","+Et+" 0,0,0 "+_t+" 0 l 0,"+-kt,It=it.attr("label-offset-y",Et).insert("path",":first-child").attr("style",rt.style).attr("d",Lt).attr("transform","translate("+-_t/2+","+-(kt/2+Et)+")");return updateNodeBounds(rt,It),rt.intersect=function(Rt){const Nt=intersect.rect(rt,Rt),Bt=Nt.x-rt.x;if(xt!=0&&(Math.abs(Bt)<rt.width/2||Math.abs(Bt)==rt.width/2&&Math.abs(Nt.y-rt.y)>rt.height/2-Et)){let Ft=Et*Et*(1-Bt*Bt/(xt*xt));Ft!=0&&(Ft=Math.sqrt(Ft)),Ft=Et-Ft,Rt.y-rt.y>0&&(Ft=-Ft),Nt.y+=Ft}return Nt},it},rect$1=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:_t}=labelHelper(nt,rt,"node "+rt.classes,!0);log$1.trace("Classes = ",rt.classes);const xt=it.insert("rect",":first-child"),Et=st.width+rt.padding,kt=st.height+rt.padding;if(xt.attr("class","basic label-container").attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",-st.width/2-_t).attr("y",-st.height/2-_t).attr("width",Et).attr("height",kt),rt.props){const Lt=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(xt,rt.props.borders,Et,kt),Lt.delete("borders")),Lt.forEach(It=>{log$1.warn(`Unknown node property ${It}`)})}return updateNodeBounds(rt,xt),rt.intersect=function(Lt){return intersect.rect(rt,Lt)},it},labelRect=(nt,rt)=>{const{shapeSvg:it}=labelHelper(nt,rt,"label",!0);log$1.trace("Classes = ",rt.classes);const st=it.insert("rect",":first-child"),_t=0,xt=0;if(st.attr("width",_t).attr("height",xt),it.attr("class","label edgeLabel"),rt.props){const Et=new Set(Object.keys(rt.props));rt.props.borders&&(applyNodePropertyBorders(st,rt.props.borders,_t,xt),Et.delete("borders")),Et.forEach(kt=>{log$1.warn(`Unknown node property ${kt}`)})}return updateNodeBounds(rt,st),rt.intersect=function(Et){return intersect.rect(rt,Et)},it};function applyNodePropertyBorders(nt,rt,it,st){const _t=[],xt=kt=>{_t.push(kt,0)},Et=kt=>{_t.push(0,kt)};rt.includes("t")?(log$1.debug("add top border"),xt(it)):Et(it),rt.includes("r")?(log$1.debug("add right border"),xt(st)):Et(st),rt.includes("b")?(log$1.debug("add bottom border"),xt(it)):Et(it),rt.includes("l")?(log$1.debug("add left border"),xt(st)):Et(st),nt.attr("stroke-dasharray",_t.join(" "))}const rectWithTitle=(nt,rt)=>{let it;rt.classes?it="node "+rt.classes:it="node default";const st=nt.insert("g").attr("class",it).attr("id",rt.domId||rt.id),_t=st.insert("rect",":first-child"),xt=st.insert("line"),Et=st.insert("g").attr("class","label"),kt=rt.labelText.flat?rt.labelText.flat():rt.labelText;let Lt="";typeof kt=="object"?Lt=kt[0]:Lt=kt,log$1.info("Label text abc79",Lt,kt,typeof kt=="object");const It=Et.node().appendChild(createLabel$1(Lt,rt.labelStyle,!0,!0));let Rt={width:0,height:0};if(evaluate(getConfig$1().flowchart.htmlLabels)){const Zt=It.children[0],Wt=select(It);Rt=Zt.getBoundingClientRect(),Wt.attr("width",Rt.width),Wt.attr("height",Rt.height)}log$1.info("Text 2",kt);const Nt=kt.slice(1,kt.length);let Bt=It.getBBox();const Ft=Et.node().appendChild(createLabel$1(Nt.join?Nt.join("<br/>"):Nt,rt.labelStyle,!0,!0));if(evaluate(getConfig$1().flowchart.htmlLabels)){const Zt=Ft.children[0],Wt=select(Ft);Rt=Zt.getBoundingClientRect(),Wt.attr("width",Rt.width),Wt.attr("height",Rt.height)}const Yt=rt.padding/2;return select(Ft).attr("transform","translate( "+(Rt.width>Bt.width?0:(Bt.width-Rt.width)/2)+", "+(Bt.height+Yt+5)+")"),select(It).attr("transform","translate( "+(Rt.width<Bt.width?0:-(Bt.width-Rt.width)/2)+", "+0+")"),Rt=Et.node().getBBox(),Et.attr("transform","translate("+-Rt.width/2+", "+(-Rt.height/2-Yt+3)+")"),_t.attr("class","outer title-state").attr("x",-Rt.width/2-Yt).attr("y",-Rt.height/2-Yt).attr("width",Rt.width+rt.padding).attr("height",Rt.height+rt.padding),xt.attr("class","divider").attr("x1",-Rt.width/2-Yt).attr("x2",Rt.width/2+Yt).attr("y1",-Rt.height/2-Yt+Bt.height+Yt).attr("y2",-Rt.height/2-Yt+Bt.height+Yt),updateNodeBounds(rt,_t),rt.intersect=function(Zt){return intersect.rect(rt,Zt)},st},stadium$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.height+rt.padding,xt=st.width+_t/4+rt.padding,Et=it.insert("rect",":first-child").attr("style",rt.style).attr("rx",_t/2).attr("ry",_t/2).attr("x",-xt/2).attr("y",-_t/2).attr("width",xt).attr("height",_t);return updateNodeBounds(rt,Et),rt.intersect=function(kt){return intersect.rect(rt,kt)},it},circle=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:_t}=labelHelper(nt,rt,void 0,!0),xt=it.insert("circle",":first-child");return xt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+_t).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),log$1.info("Circle main"),updateNodeBounds(rt,xt),rt.intersect=function(Et){return log$1.info("Circle intersect",rt,st.width/2+_t,Et),intersect.circle(rt,st.width/2+_t,Et)},it},doublecircle=(nt,rt)=>{const{shapeSvg:it,bbox:st,halfPadding:_t}=labelHelper(nt,rt,void 0,!0),xt=5,Et=it.insert("g",":first-child"),kt=Et.insert("circle"),Lt=Et.insert("circle");return kt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+_t+xt).attr("width",st.width+rt.padding+xt*2).attr("height",st.height+rt.padding+xt*2),Lt.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("r",st.width/2+_t).attr("width",st.width+rt.padding).attr("height",st.height+rt.padding),log$1.info("DoubleCircle main"),updateNodeBounds(rt,kt),rt.intersect=function(It){return log$1.info("DoubleCircle intersect",rt,st.width/2+_t+xt,It),intersect.circle(rt,st.width/2+_t+xt,It)},it},subroutine$1=(nt,rt)=>{const{shapeSvg:it,bbox:st}=labelHelper(nt,rt,void 0,!0),_t=st.width+rt.padding,xt=st.height+rt.padding,Et=[{x:0,y:0},{x:_t,y:0},{x:_t,y:-xt},{x:0,y:-xt},{x:0,y:0},{x:-8,y:0},{x:_t+8,y:0},{x:_t+8,y:-xt},{x:-8,y:-xt},{x:-8,y:0}],kt=insertPolygonShape$1(it,_t,xt,Et);return kt.attr("style",rt.style),updateNodeBounds(rt,kt),rt.intersect=function(Lt){return intersect.polygon(rt,Et,Lt)},it},start=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=it.insert("circle",":first-child");return st.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),updateNodeBounds(rt,st),rt.intersect=function(_t){return intersect.circle(rt,7,_t)},it},forkJoin=(nt,rt,it)=>{const st=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id);let _t=70,xt=10;it==="LR"&&(_t=10,xt=70);const Et=st.append("rect").attr("x",-1*_t/2).attr("y",-1*xt/2).attr("width",_t).attr("height",xt).attr("class","fork-join");return updateNodeBounds(rt,Et),rt.height=rt.height+rt.padding/2,rt.width=rt.width+rt.padding/2,rt.intersect=function(kt){return intersect.rect(rt,kt)},st},end=(nt,rt)=>{const it=nt.insert("g").attr("class","node default").attr("id",rt.domId||rt.id),st=it.insert("circle",":first-child"),_t=it.insert("circle",":first-child");return _t.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),st.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),updateNodeBounds(rt,_t),rt.intersect=function(xt){return intersect.circle(rt,7,xt)},it},class_box=(nt,rt)=>{const it=rt.padding/2,st=4,_t=8;let xt;rt.classes?xt="node "+rt.classes:xt="node default";const Et=nt.insert("g").attr("class",xt).attr("id",rt.domId||rt.id),kt=Et.insert("rect",":first-child"),Lt=Et.insert("line"),It=Et.insert("line");let Rt=0,Nt=st;const Bt=Et.insert("g").attr("class","label");let Ft=0;const Yt=rt.classData.annotations&&rt.classData.annotations[0],Zt=rt.classData.annotations[0]?"\xAB"+rt.classData.annotations[0]+"\xBB":"",Wt=Bt.node().appendChild(createLabel$1(Zt,rt.labelStyle,!0,!0));let Kt=Wt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const kn=Wt.children[0],Cn=select(Wt);Kt=kn.getBoundingClientRect(),Cn.attr("width",Kt.width),Cn.attr("height",Kt.height)}rt.classData.annotations[0]&&(Nt+=Kt.height+st,Rt+=Kt.width);let Jt=rt.classData.id;rt.classData.type!==void 0&&rt.classData.type!==""&&(getConfig$1().flowchart.htmlLabels?Jt+="&lt;"+rt.classData.type+"&gt;":Jt+="<"+rt.classData.type+">");const on=Bt.node().appendChild(createLabel$1(Jt,rt.labelStyle,!0,!0));select(on).attr("class","classTitle");let rn=on.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const kn=on.children[0],Cn=select(on);rn=kn.getBoundingClientRect(),Cn.attr("width",rn.width),Cn.attr("height",rn.height)}Nt+=rn.height+st,rn.width>Rt&&(Rt=rn.width);const ln=[];rt.classData.members.forEach(kn=>{const Cn=parseMember(kn);let Pn=Cn.displayText;getConfig$1().flowchart.htmlLabels&&(Pn=Pn.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const An=Bt.node().appendChild(createLabel$1(Pn,Cn.cssStyle?Cn.cssStyle:rt.labelStyle,!0,!0));let cn=An.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Ln=An.children[0],an=select(An);cn=Ln.getBoundingClientRect(),an.attr("width",cn.width),an.attr("height",cn.height)}cn.width>Rt&&(Rt=cn.width),Nt+=cn.height+st,ln.push(An)}),Nt+=_t;const gn=[];if(rt.classData.methods.forEach(kn=>{const Cn=parseMember(kn);let Pn=Cn.displayText;getConfig$1().flowchart.htmlLabels&&(Pn=Pn.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const An=Bt.node().appendChild(createLabel$1(Pn,Cn.cssStyle?Cn.cssStyle:rt.labelStyle,!0,!0));let cn=An.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Ln=An.children[0],an=select(An);cn=Ln.getBoundingClientRect(),an.attr("width",cn.width),an.attr("height",cn.height)}cn.width>Rt&&(Rt=cn.width),Nt+=cn.height+st,gn.push(An)}),Nt+=_t,Yt){let kn=(Rt-Kt.width)/2;select(Wt).attr("transform","translate( "+(-1*Rt/2+kn)+", "+-1*Nt/2+")"),Ft=Kt.height+st}let wn=(Rt-rn.width)/2;return select(on).attr("transform","translate( "+(-1*Rt/2+wn)+", "+(-1*Nt/2+Ft)+")"),Ft+=rn.height+st,Lt.attr("class","divider").attr("x1",-Rt/2-it).attr("x2",Rt/2+it).attr("y1",-Nt/2-it+_t+Ft).attr("y2",-Nt/2-it+_t+Ft),Ft+=_t,ln.forEach(kn=>{select(kn).attr("transform","translate( "+-Rt/2+", "+(-1*Nt/2+Ft+_t/2)+")"),Ft+=rn.height+st}),Ft+=_t,It.attr("class","divider").attr("x1",-Rt/2-it).attr("x2",Rt/2+it).attr("y1",-Nt/2-it+_t+Ft).attr("y2",-Nt/2-it+_t+Ft),Ft+=_t,gn.forEach(kn=>{select(kn).attr("transform","translate( "+-Rt/2+", "+(-1*Nt/2+Ft)+")"),Ft+=rn.height+st}),kt.attr("class","outer title-state").attr("x",-Rt/2-it).attr("y",-(Nt/2)-it).attr("width",Rt+rt.padding).attr("height",Nt+rt.padding),updateNodeBounds(rt,kt),rt.intersect=function(kn){return intersect.rect(rt,kn)},Et},shapes$1={rhombus:question$1,question:question$1,rect:rect$1,labelRect,rectWithTitle,choice,circle,doublecircle,stadium:stadium$1,hexagon:hexagon$1,rect_left_inv_arrow:rect_left_inv_arrow$1,lean_right:lean_right$1,lean_left:lean_left$1,trapezoid:trapezoid$1,inv_trapezoid:inv_trapezoid$1,rect_right_inv_arrow:rect_right_inv_arrow$1,cylinder:cylinder$1,start,end,note:note$1,subroutine:subroutine$1,fork:forkJoin,join:forkJoin,class_box};let nodeElems={};const insertNode=(nt,rt,it)=>{let st,_t;if(rt.link){let xt;getConfig$1().securityLevel==="sandbox"?xt="_top":rt.linkTarget&&(xt=rt.linkTarget||"_blank"),st=nt.insert("svg:a").attr("xlink:href",rt.link).attr("target",xt),_t=shapes$1[rt.shape](st,rt,it)}else _t=shapes$1[rt.shape](nt,rt,it),st=_t;return rt.tooltip&&_t.attr("title",rt.tooltip),rt.class&&_t.attr("class","node default "+rt.class),nodeElems[rt.id]=st,rt.haveCallback&&nodeElems[rt.id].attr("class",nodeElems[rt.id].attr("class")+" clickable"),st},setNodeElem=(nt,rt)=>{nodeElems[rt.id]=nt},clear$a=()=>{nodeElems={}},positionNode=nt=>{const rt=nodeElems[nt.id];log$1.trace("Transforming node",nt.diff,nt,"translate("+(nt.x-nt.width/2-5)+", "+nt.width/2+")");const it=8,st=nt.diff||0;return nt.clusterNode?rt.attr("transform","translate("+(nt.x+st-nt.width/2)+", "+(nt.y-nt.height/2-it)+")"):rt.attr("transform","translate("+nt.x+", "+nt.y+")"),st},rect=(nt,rt)=>{log$1.trace("Creating subgraph rect for ",rt.id,rt);const it=nt.insert("g").attr("class","cluster"+(rt.class?" "+rt.class:"")).attr("id",rt.id),st=it.insert("rect",":first-child"),_t=it.insert("g").attr("class","cluster-label"),xt=_t.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let Et=xt.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Nt=xt.children[0],Bt=select(xt);Et=Nt.getBoundingClientRect(),Bt.attr("width",Et.width),Bt.attr("height",Et.height)}const kt=0*rt.padding,Lt=kt/2,It=rt.width<=Et.width+kt?Et.width+kt:rt.width;rt.width<=Et.width+kt?rt.diff=(Et.width-rt.width)/2-rt.padding/2:rt.diff=-rt.padding/2,log$1.trace("Data ",rt,JSON.stringify(rt)),st.attr("style",rt.style).attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-It/2).attr("y",rt.y-rt.height/2-Lt).attr("width",It).attr("height",rt.height+kt),_t.attr("transform","translate("+(rt.x-Et.width/2)+", "+(rt.y-rt.height/2)+")");const Rt=st.node().getBBox();return rt.width=Rt.width,rt.height=Rt.height,rt.intersect=function(Nt){return intersectRect$1(rt,Nt)},it},noteGroup=(nt,rt)=>{const it=nt.insert("g").attr("class","note-cluster").attr("id",rt.id),st=it.insert("rect",":first-child"),_t=0*rt.padding,xt=_t/2;st.attr("rx",rt.rx).attr("ry",rt.ry).attr("x",rt.x-rt.width/2-xt).attr("y",rt.y-rt.height/2-xt).attr("width",rt.width+_t).attr("height",rt.height+_t).attr("fill","none");const Et=st.node().getBBox();return rt.width=Et.width,rt.height=Et.height,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},roundedWithTitle=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),st=it.insert("rect",":first-child"),_t=it.insert("g").attr("class","cluster-label"),xt=it.append("rect"),Et=_t.node().appendChild(createLabel$1(rt.labelText,rt.labelStyle,void 0,!0));let kt=Et.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const Bt=Et.children[0],Ft=select(Et);kt=Bt.getBoundingClientRect(),Ft.attr("width",kt.width),Ft.attr("height",kt.height)}kt=Et.getBBox();const Lt=0*rt.padding,It=Lt/2,Rt=rt.width<=kt.width+rt.padding?kt.width+rt.padding:rt.width;rt.width<=kt.width+rt.padding?rt.diff=(kt.width+rt.padding*0-rt.width)/2:rt.diff=-rt.padding/2,st.attr("class","outer").attr("x",rt.x-Rt/2-It).attr("y",rt.y-rt.height/2-It).attr("width",Rt+Lt).attr("height",rt.height+Lt),xt.attr("class","inner").attr("x",rt.x-Rt/2-It).attr("y",rt.y-rt.height/2-It+kt.height-1).attr("width",Rt+Lt).attr("height",rt.height+Lt-kt.height-3),_t.attr("transform","translate("+(rt.x-kt.width/2)+", "+(rt.y-rt.height/2-rt.padding/3+(evaluate(getConfig$1().flowchart.htmlLabels)?5:3))+")");const Nt=st.node().getBBox();return rt.height=Nt.height,rt.intersect=function(Bt){return intersectRect$1(rt,Bt)},it},divider=(nt,rt)=>{const it=nt.insert("g").attr("class",rt.classes).attr("id",rt.id),st=it.insert("rect",":first-child"),_t=0*rt.padding,xt=_t/2;st.attr("class","divider").attr("x",rt.x-rt.width/2-xt).attr("y",rt.y-rt.height/2).attr("width",rt.width+_t).attr("height",rt.height+_t);const Et=st.node().getBBox();return rt.width=Et.width,rt.height=Et.height,rt.diff=-rt.padding/2,rt.intersect=function(kt){return intersectRect$1(rt,kt)},it},shapes={rect,roundedWithTitle,noteGroup,divider};let clusterElems={};const insertCluster=(nt,rt)=>{log$1.trace("Inserting cluster");const it=rt.shape||"rect";clusterElems[rt.id]=shapes[it](nt,rt)},clear$9=()=>{clusterElems={}};let edgeLabels={},terminalLabels={};const clear$8=()=>{edgeLabels={},terminalLabels={}},insertEdgeLabel=(nt,rt)=>{const it=createLabel$1(rt.label,rt.labelStyle),st=nt.insert("g").attr("class","edgeLabel"),_t=st.insert("g").attr("class","label");_t.node().appendChild(it);let xt=it.getBBox();if(evaluate(getConfig$1().flowchart.htmlLabels)){const kt=it.children[0],Lt=select(it);xt=kt.getBoundingClientRect(),Lt.attr("width",xt.width),Lt.attr("height",xt.height)}_t.attr("transform","translate("+-xt.width/2+", "+-xt.height/2+")"),edgeLabels[rt.id]=st,rt.width=xt.width,rt.height=xt.height;let Et;if(rt.startLabelLeft){const kt=createLabel$1(rt.startLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),It=Lt.insert("g").attr("class","inner");Et=It.node().appendChild(kt);const Rt=kt.getBBox();It.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startLeft=Lt,setTerminalWidth(Et,rt.startLabelLeft)}if(rt.startLabelRight){const kt=createLabel$1(rt.startLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),It=Lt.insert("g").attr("class","inner");Et=Lt.node().appendChild(kt),It.node().appendChild(kt);const Rt=kt.getBBox();It.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].startRight=Lt,setTerminalWidth(Et,rt.startLabelRight)}if(rt.endLabelLeft){const kt=createLabel$1(rt.endLabelLeft,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),It=Lt.insert("g").attr("class","inner");Et=It.node().appendChild(kt);const Rt=kt.getBBox();It.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endLeft=Lt,setTerminalWidth(Et,rt.endLabelLeft)}if(rt.endLabelRight){const kt=createLabel$1(rt.endLabelRight,rt.labelStyle),Lt=nt.insert("g").attr("class","edgeTerminals"),It=Lt.insert("g").attr("class","inner");Et=It.node().appendChild(kt);const Rt=kt.getBBox();It.attr("transform","translate("+-Rt.width/2+", "+-Rt.height/2+")"),Lt.node().appendChild(kt),terminalLabels[rt.id]||(terminalLabels[rt.id]={}),terminalLabels[rt.id].endRight=Lt,setTerminalWidth(Et,rt.endLabelRight)}return it};function setTerminalWidth(nt,rt){getConfig$1().flowchart.htmlLabels&&nt&&(nt.style.width=rt.length*9+"px",nt.style.height="12px")}const positionEdgeLabel=(nt,rt)=>{log$1.info("Moving label abc78 ",nt.id,nt.label,edgeLabels[nt.id]);let it=rt.updatedPath?rt.updatedPath:rt.originalPath;if(nt.label){const st=edgeLabels[nt.id];let _t=nt.x,xt=nt.y;if(it){const Et=utils.calcLabelPosition(it);log$1.info("Moving label "+nt.label+" from (",_t,",",xt,") to (",Et.x,",",Et.y,") abc78"),rt.updatedPath&&(_t=Et.x,xt=Et.y)}st.attr("transform","translate("+_t+", "+xt+")")}if(nt.startLabelLeft){const st=terminalLabels[nt.id].startLeft;let _t=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_left",it);_t=Et.x,xt=Et.y}st.attr("transform","translate("+_t+", "+xt+")")}if(nt.startLabelRight){const st=terminalLabels[nt.id].startRight;let _t=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeStart?10:0,"start_right",it);_t=Et.x,xt=Et.y}st.attr("transform","translate("+_t+", "+xt+")")}if(nt.endLabelLeft){const st=terminalLabels[nt.id].endLeft;let _t=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_left",it);_t=Et.x,xt=Et.y}st.attr("transform","translate("+_t+", "+xt+")")}if(nt.endLabelRight){const st=terminalLabels[nt.id].endRight;let _t=nt.x,xt=nt.y;if(it){const Et=utils.calcTerminalLabelPosition(nt.arrowTypeEnd?10:0,"end_right",it);_t=Et.x,xt=Et.y}st.attr("transform","translate("+_t+", "+xt+")")}},outsideNode=(nt,rt)=>{const it=nt.x,st=nt.y,_t=Math.abs(rt.x-it),xt=Math.abs(rt.y-st),Et=nt.width/2,kt=nt.height/2;return _t>=Et||xt>=kt},intersection=(nt,rt,it)=>{log$1.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(rt)}
  insidePoint : ${JSON.stringify(it)}
  node        : x:${nt.x} y:${nt.y} w:${nt.width} h:${nt.height}`);const st=nt.x,_t=nt.y,xt=Math.abs(st-it.x),Et=nt.width/2;let kt=it.x<rt.x?Et-xt:Et+xt;const Lt=nt.height/2,It=Math.abs(rt.y-it.y),Rt=Math.abs(rt.x-it.x);if(Math.abs(_t-rt.y)*Et>Math.abs(st-rt.x)*Lt){let Nt=it.y<rt.y?rt.y-Lt-_t:_t-Lt-rt.y;kt=Rt*Nt/It;const Bt={x:it.x<rt.x?it.x+kt:it.x-Rt+kt,y:it.y<rt.y?it.y+It-Nt:it.y-It+Nt};return kt===0&&(Bt.x=rt.x,Bt.y=rt.y),Rt===0&&(Bt.x=rt.x),It===0&&(Bt.y=rt.y),log$1.warn(`abc89 topp/bott calc, Q ${It}, q ${Nt}, R ${Rt}, r ${kt}`,Bt),Bt}else{it.x<rt.x?kt=rt.x-Et-st:kt=st-Et-rt.x;let Nt=It*kt/Rt,Bt=it.x<rt.x?it.x+Rt-kt:it.x-Rt+kt,Ft=it.y<rt.y?it.y+Nt:it.y-Nt;return log$1.warn(`sides calc abc89, Q ${It}, q ${Nt}, R ${Rt}, r ${kt}`,{_x:Bt,_y:Ft}),kt===0&&(Bt=rt.x,Ft=rt.y),Rt===0&&(Bt=rt.x),It===0&&(Ft=rt.y),{x:Bt,y:Ft}}},cutPathAtIntersect=(nt,rt)=>{log$1.warn("abc88 cutPathAtIntersect",nt,rt);let it=[],st=nt[0],_t=!1;return nt.forEach(xt=>{if(log$1.info("abc88 checking point",xt,rt),!outsideNode(rt,xt)&&!_t){const Et=intersection(rt,st,xt);log$1.warn("abc88 inside",xt,st,Et),log$1.warn("abc88 intersection",Et);let kt=!1;it.forEach(Lt=>{kt=kt||Lt.x===Et.x&&Lt.y===Et.y}),it.some(Lt=>Lt.x===Et.x&&Lt.y===Et.y)?log$1.warn("abc88 no intersect",Et,it):it.push(Et),_t=!0}else log$1.warn("abc88 outside",xt,st),st=xt,_t||it.push(xt)}),log$1.warn("abc88 returning points",it),it},insertEdge=function(nt,rt,it,st,_t,xt){let Et=it.points,kt=!1;const Lt=xt.node(rt.v);var It=xt.node(rt.w);log$1.info("abc88 InsertEdge: ",it),It.intersect&&Lt.intersect&&(Et=Et.slice(1,it.points.length-1),Et.unshift(Lt.intersect(Et[0])),log$1.info("Last point",Et[Et.length-1],It,It.intersect(Et[Et.length-1])),Et.push(It.intersect(Et[Et.length-1]))),it.toCluster&&(log$1.info("to cluster abc88",st[it.toCluster]),Et=cutPathAtIntersect(it.points,st[it.toCluster].node),kt=!0),it.fromCluster&&(log$1.info("from cluster abc88",st[it.fromCluster]),Et=cutPathAtIntersect(Et.reverse(),st[it.fromCluster].node).reverse(),kt=!0);const Rt=Et.filter(Kt=>!Number.isNaN(Kt.y));let Nt;_t==="graph"||_t==="flowchart"?Nt=it.curve||curveBasis:Nt=curveBasis;const Bt=line$1().x(function(Kt){return Kt.x}).y(function(Kt){return Kt.y}).curve(Nt);let Ft;switch(it.thickness){case"normal":Ft="edge-thickness-normal";break;case"thick":Ft="edge-thickness-thick";break;default:Ft=""}switch(it.pattern){case"solid":Ft+=" edge-pattern-solid";break;case"dotted":Ft+=" edge-pattern-dotted";break;case"dashed":Ft+=" edge-pattern-dashed";break}const Yt=nt.append("path").attr("d",Bt(Rt)).attr("id",it.id).attr("class"," "+Ft+(it.classes?" "+it.classes:"")).attr("style",it.style);let Zt="";switch((getConfig$1().flowchart.arrowMarkerAbsolute||getConfig$1().state.arrowMarkerAbsolute)&&(Zt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Zt=Zt.replace(/\(/g,"\\("),Zt=Zt.replace(/\)/g,"\\)")),log$1.info("arrowTypeStart",it.arrowTypeStart),log$1.info("arrowTypeEnd",it.arrowTypeEnd),it.arrowTypeStart){case"arrow_cross":Yt.attr("marker-start","url("+Zt+"#"+_t+"-crossStart)");break;case"arrow_point":Yt.attr("marker-start","url("+Zt+"#"+_t+"-pointStart)");break;case"arrow_barb":Yt.attr("marker-start","url("+Zt+"#"+_t+"-barbStart)");break;case"arrow_circle":Yt.attr("marker-start","url("+Zt+"#"+_t+"-circleStart)");break;case"aggregation":Yt.attr("marker-start","url("+Zt+"#"+_t+"-aggregationStart)");break;case"extension":Yt.attr("marker-start","url("+Zt+"#"+_t+"-extensionStart)");break;case"composition":Yt.attr("marker-start","url("+Zt+"#"+_t+"-compositionStart)");break;case"dependency":Yt.attr("marker-start","url("+Zt+"#"+_t+"-dependencyStart)");break;case"lollipop":Yt.attr("marker-start","url("+Zt+"#"+_t+"-lollipopStart)");break}switch(it.arrowTypeEnd){case"arrow_cross":Yt.attr("marker-end","url("+Zt+"#"+_t+"-crossEnd)");break;case"arrow_point":Yt.attr("marker-end","url("+Zt+"#"+_t+"-pointEnd)");break;case"arrow_barb":Yt.attr("marker-end","url("+Zt+"#"+_t+"-barbEnd)");break;case"arrow_circle":Yt.attr("marker-end","url("+Zt+"#"+_t+"-circleEnd)");break;case"aggregation":Yt.attr("marker-end","url("+Zt+"#"+_t+"-aggregationEnd)");break;case"extension":Yt.attr("marker-end","url("+Zt+"#"+_t+"-extensionEnd)");break;case"composition":Yt.attr("marker-end","url("+Zt+"#"+_t+"-compositionEnd)");break;case"dependency":Yt.attr("marker-end","url("+Zt+"#"+_t+"-dependencyEnd)");break;case"lollipop":Yt.attr("marker-end","url("+Zt+"#"+_t+"-lollipopEnd)");break}let Wt={};return kt&&(Wt.updatedPath=Et),Wt.originalPath=it.points,Wt},recursiveRender=(nt,rt,it,st)=>{log$1.info("Graph in recursive render: XXX",write(rt),st);const _t=rt.graph().rankdir;log$1.trace("Dir in recursive render - dir:",_t);const xt=nt.insert("g").attr("class","root");rt.nodes()?log$1.info("Recursive render XXX",rt.nodes()):log$1.info("No nodes found for",rt),rt.edges().length>0&&log$1.trace("Recursive edges",rt.edge(rt.edges()[0]));const Et=xt.insert("g").attr("class","clusters"),kt=xt.insert("g").attr("class","edgePaths"),Lt=xt.insert("g").attr("class","edgeLabels"),It=xt.insert("g").attr("class","nodes");rt.nodes().forEach(function(Nt){const Bt=rt.node(Nt);if(st!==void 0){const Ft=JSON.parse(JSON.stringify(st.clusterData));log$1.info("Setting data for cluster XXX (",Nt,") ",Ft,st),rt.setNode(st.id,Ft),rt.parent(Nt)||(log$1.trace("Setting parent",Nt,st.id),rt.setParent(Nt,st.id,Ft))}if(log$1.info("(Insert) Node XXX"+Nt+": "+JSON.stringify(rt.node(Nt))),Bt&&Bt.clusterNode){log$1.info("Cluster identified",Nt,Bt.width,rt.node(Nt));const Ft=recursiveRender(It,Bt.graph,it,rt.node(Nt)),Yt=Ft.elem;updateNodeBounds(Bt,Yt),Bt.diff=Ft.diff||0,log$1.info("Node bounds (abc123)",Nt,Bt,Bt.width,Bt.x,Bt.y),setNodeElem(Yt,Bt),log$1.warn("Recursive render complete ",Yt,Bt)}else rt.children(Nt).length>0?(log$1.info("Cluster - the non recursive path XXX",Nt,Bt.id,Bt,rt),log$1.info(findNonClusterChild(Bt.id,rt)),clusterDb[Bt.id]={id:findNonClusterChild(Bt.id,rt),node:Bt}):(log$1.info("Node - the non recursive path",Nt,Bt.id,Bt),insertNode(It,rt.node(Nt),_t))}),rt.edges().forEach(function(Nt){const Bt=rt.edge(Nt.v,Nt.w,Nt.name);log$1.info("Edge "+Nt.v+" -> "+Nt.w+": "+JSON.stringify(Nt)),log$1.info("Edge "+Nt.v+" -> "+Nt.w+": ",Nt," ",JSON.stringify(rt.edge(Nt))),log$1.info("Fix",clusterDb,"ids:",Nt.v,Nt.w,"Translateing: ",clusterDb[Nt.v],clusterDb[Nt.w]),insertEdgeLabel(Lt,Bt)}),rt.edges().forEach(function(Nt){log$1.info("Edge "+Nt.v+" -> "+Nt.w+": "+JSON.stringify(Nt))}),log$1.info("#############################################"),log$1.info("###                Layout                 ###"),log$1.info("#############################################"),log$1.info(rt),layout(rt),log$1.info("Graph after layout:",write(rt));let Rt=0;return sortNodesByHierarchy(rt).forEach(function(Nt){const Bt=rt.node(Nt);log$1.info("Position "+Nt+": "+JSON.stringify(rt.node(Nt))),log$1.info("Position "+Nt+": ("+Bt.x,","+Bt.y,") width: ",Bt.width," height: ",Bt.height),Bt&&Bt.clusterNode?positionNode(Bt):rt.children(Nt).length>0?(insertCluster(Et,Bt),clusterDb[Bt.id].node=Bt):positionNode(Bt)}),rt.edges().forEach(function(Nt){const Bt=rt.edge(Nt);log$1.info("Edge "+Nt.v+" -> "+Nt.w+": "+JSON.stringify(Bt),Bt);const Ft=insertEdge(kt,Nt,Bt,clusterDb,it,rt);positionEdgeLabel(Bt,Ft)}),rt.nodes().forEach(function(Nt){const Bt=rt.node(Nt);log$1.info(Nt,Bt.type,Bt.diff),Bt.type==="group"&&(Rt=Bt.diff)}),{elem:xt,diff:Rt}},render$1=(nt,rt,it,st,_t)=>{insertMarkers$3(nt,it,st,_t),clear$a(),clear$8(),clear$9(),clear$b(),log$1.warn("Graph at first:",write(rt)),adjustClustersAndEdges(rt),log$1.warn("Graph after:",write(rt)),recursiveRender(nt,rt,st)},sanitizeText$1=nt=>common$1.sanitizeText(nt,getConfig$1());let conf$9={dividerMargin:10,padding:5,textHeight:10};const addClasses=function(nt,rt,it,st){const _t=Object.keys(nt);log$1.info("keys:",_t),log$1.info(nt),_t.forEach(function(xt){const Et=nt[xt];let kt="";Et.cssClasses.length>0&&(kt=kt+" "+Et.cssClasses.join(" "));const Lt={labelStyle:""};let It=Et.text!==void 0?Et.text:Et.id,Rt=0,Nt="";switch(Et.type){case"class":Nt="class_box";break;default:Nt="class_box"}rt.setNode(Et.id,{labelStyle:Lt.labelStyle,shape:Nt,labelText:sanitizeText$1(It),classData:Et,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,domId:Et.domId,tooltip:st.db.getTooltip(Et.id)||"",haveCallback:Et.haveCallback,link:Et.link,width:Et.type==="group"?500:void 0,type:Et.type,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:Nt,labelText:It,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,width:Et.type==="group"?500:void 0,type:Et.type,padding:getConfig$1().flowchart.padding})})},addNotes=function(nt,rt,it,st){log$1.info(nt),nt.forEach(function(_t,xt){const Et=_t;let kt="";const Lt={labelStyle:"",style:""};let It=Et.text,Rt=0,Nt="note";if(rt.setNode(Et.id,{labelStyle:Lt.labelStyle,shape:Nt,labelText:sanitizeText$1(It),noteData:Et,rx:Rt,ry:Rt,class:kt,style:Lt.style,id:Et.id,domId:Et.id,tooltip:"",type:"note",padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Lt.labelStyle,shape:Nt,labelText:It,rx:Rt,ry:Rt,style:Lt.style,id:Et.id,type:"note",padding:getConfig$1().flowchart.padding}),!Et.class||!(Et.class in st))return;const Bt=it+xt,Ft={};Ft.classes="relation",Ft.pattern="dotted",Ft.id=`edgeNote${Bt}`,Ft.arrowhead="none",log$1.info(`Note edge: ${JSON.stringify(Ft)}, ${JSON.stringify(Et)}`),Ft.startLabelRight="",Ft.endLabelLeft="",Ft.arrowTypeStart="none",Ft.arrowTypeEnd="none";let Yt="fill:none",Zt="";Ft.style=Yt,Ft.labelStyle=Zt,Ft.curve=interpolateToCurve(conf$9.curve,curveLinear),rt.setEdge(Et.id,Et.class,Ft,Bt)})},addRelations=function(nt,rt){const it=getConfig$1().flowchart;let st=0;nt.forEach(function(_t){st++;const xt={};xt.classes="relation",xt.pattern=_t.relation.lineType==1?"dashed":"solid",xt.id="id"+st,_t.type==="arrow_open"?xt.arrowhead="none":xt.arrowhead="normal",log$1.info(xt,_t),xt.startLabelRight=_t.relationTitle1==="none"?"":_t.relationTitle1,xt.endLabelLeft=_t.relationTitle2==="none"?"":_t.relationTitle2,xt.arrowTypeStart=getArrowMarker(_t.relation.type1),xt.arrowTypeEnd=getArrowMarker(_t.relation.type2);let Et="",kt="";if(_t.style!==void 0){const Lt=getStylesFromArray(_t.style);Et=Lt.style,kt=Lt.labelStyle}else Et="fill:none";xt.style=Et,xt.labelStyle=kt,_t.interpolate!==void 0?xt.curve=interpolateToCurve(_t.interpolate,curveLinear):nt.defaultInterpolate!==void 0?xt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):xt.curve=interpolateToCurve(it.curve,curveLinear),_t.text=_t.title,_t.text===void 0?_t.style!==void 0&&(xt.arrowheadStyle="fill: #333"):(xt.arrowheadStyle="fill: #333",xt.labelpos="c",getConfig$1().flowchart.htmlLabels?(xt.labelType="html",xt.label='<span class="edgeLabel">'+_t.text+"</span>"):(xt.labelType="text",xt.label=_t.text.replace(common$1.lineBreakRegex,`
`),_t.style===void 0&&(xt.style=xt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),xt.labelStyle=xt.labelStyle.replace("color:","fill:"))),rt.setEdge(_t.id1,_t.id2,xt,st)})},setConf$9=function(nt){Object.keys(nt).forEach(function(it){conf$9[it]=nt[it]})},draw$c=function(nt,rt,it,st){log$1.info("Drawing class - ",rt);const _t=getConfig$1().flowchart,xt=getConfig$1().securityLevel;log$1.info("config:",_t);const Et=_t.nodeSpacing||50,kt=_t.rankSpacing||50,Lt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:st.db.getDirection(),nodesep:Et,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),It=st.db.getClasses(),Rt=st.db.getRelations(),Nt=st.db.getNotes();log$1.info(Rt),addClasses(It,Lt,rt,st),addRelations(Rt,Lt),addNotes(Nt,Lt,Rt.length+1,It);let Bt;xt==="sandbox"&&(Bt=select("#i"+rt));const Ft=select(xt==="sandbox"?Bt.nodes()[0].contentDocument.body:"body"),Yt=Ft.select(`[id="${rt}"]`),Zt=Ft.select("#"+rt+" g");if(render$1(Zt,Lt,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",rt),utils.insertTitle(Yt,"classTitleText",_t.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox$1(Lt,Yt,_t.diagramPadding,_t.useMaxWidth),!_t.htmlLabels){const Wt=xt==="sandbox"?Bt.nodes()[0].contentDocument:document,Kt=Wt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const Jt of Kt){const on=Jt.getBBox(),rn=Wt.createElementNS("http://www.w3.org/2000/svg","rect");rn.setAttribute("rx",0),rn.setAttribute("ry",0),rn.setAttribute("width",on.width),rn.setAttribute("height",on.height),Jt.insertBefore(rn,Jt.firstChild)}}};function getArrowMarker(nt){let rt;switch(nt){case 0:rt="aggregation";break;case 1:rt="extension";break;case 2:rt="composition";break;case 3:rt="dependency";break;case 4:rt="lollipop";break;default:rt="none"}return rt}const classRendererV2={setConf:setConf$9,draw:draw$c};var parser$9=function(){var nt=function(An,cn,Ln,an){for(Ln=Ln||{},an=An.length;an--;Ln[An[an]]=cn);return Ln},rt=[1,2],it=[1,5],st=[6,9,11,23,25,27,29,30,31,51],_t=[1,17],xt=[1,18],Et=[1,19],kt=[1,20],Lt=[1,21],It=[1,22],Rt=[1,25],Nt=[1,30],Bt=[1,31],Ft=[1,32],Yt=[1,33],Zt=[6,9,11,15,20,23,25,27,29,30,31,44,45,46,47,51],Wt=[1,45],Kt=[30,31,48,49],Jt=[4,6,9,11,23,25,27,29,30,31,51],on=[44,45,46,47],rn=[22,37],ln=[1,65],gn=[1,64],wn=[22,37,39,41],kn={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyTypeList:35,attributeComment:36,ATTRIBUTE_WORD:37,attributeKeyType:38,COMMA:39,ATTRIBUTE_KEY:40,COMMENT:41,cardinality:42,relType:43,ZERO_OR_ONE:44,ZERO_OR_MORE:45,ONE_OR_MORE:46,ONLY_ONE:47,NON_IDENTIFYING:48,IDENTIFYING:49,WORD:50,open_directive:51,type_directive:52,arg_directive:53,close_directive:54,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",39:"COMMA",40:"ATTRIBUTE_KEY",41:"COMMENT",44:"ZERO_OR_ONE",45:"ZERO_OR_MORE",46:"ONE_OR_MORE",47:"ONLY_ONE",48:"NON_IDENTIFYING",49:"IDENTIFYING",50:"WORD",51:"open_directive",52:"type_directive",53:"arg_directive",54:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[35,3],[38,1],[36,1],[18,3],[42,1],[42,1],[42,1],[42,1],[43,1],[43,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(cn,Ln,an,zn,dn,Fn,ir){var tr=Fn.length-1;switch(dn){case 1:break;case 3:this.$=[];break;case 4:Fn[tr-1].push(Fn[tr]),this.$=Fn[tr-1];break;case 5:case 6:this.$=Fn[tr];break;case 7:case 8:this.$=[];break;case 12:zn.addEntity(Fn[tr-4]),zn.addEntity(Fn[tr-2]),zn.addRelationship(Fn[tr-4],Fn[tr],Fn[tr-2],Fn[tr-3]);break;case 13:zn.addEntity(Fn[tr-3]),zn.addAttributes(Fn[tr-3],Fn[tr-1]);break;case 14:zn.addEntity(Fn[tr-2]);break;case 15:zn.addEntity(Fn[tr]);break;case 16:case 17:this.$=Fn[tr].trim(),zn.setAccTitle(this.$);break;case 18:case 19:this.$=Fn[tr].trim(),zn.setAccDescription(this.$);break;case 20:case 43:this.$=Fn[tr];break;case 21:case 41:case 42:this.$=Fn[tr].replace(/"/g,"");break;case 22:case 30:this.$=[Fn[tr]];break;case 23:Fn[tr].push(Fn[tr-1]),this.$=Fn[tr];break;case 24:this.$={attributeType:Fn[tr-1],attributeName:Fn[tr]};break;case 25:this.$={attributeType:Fn[tr-2],attributeName:Fn[tr-1],attributeKeyTypeList:Fn[tr]};break;case 26:this.$={attributeType:Fn[tr-2],attributeName:Fn[tr-1],attributeComment:Fn[tr]};break;case 27:this.$={attributeType:Fn[tr-3],attributeName:Fn[tr-2],attributeKeyTypeList:Fn[tr-1],attributeComment:Fn[tr]};break;case 28:case 29:case 32:this.$=Fn[tr];break;case 31:Fn[tr-2].push(Fn[tr]),this.$=Fn[tr-2];break;case 33:this.$=Fn[tr].replace(/"/g,"");break;case 34:this.$={cardA:Fn[tr],relType:Fn[tr-1],cardB:Fn[tr-2]};break;case 35:this.$=zn.Cardinality.ZERO_OR_ONE;break;case 36:this.$=zn.Cardinality.ZERO_OR_MORE;break;case 37:this.$=zn.Cardinality.ONE_OR_MORE;break;case 38:this.$=zn.Cardinality.ONLY_ONE;break;case 39:this.$=zn.Identification.NON_IDENTIFYING;break;case 40:this.$=zn.Identification.IDENTIFYING;break;case 44:zn.parseDirective("%%{","open_directive");break;case 45:zn.parseDirective(Fn[tr],"type_directive");break;case 46:Fn[tr]=Fn[tr].trim().replace(/'/g,'"'),zn.parseDirective(Fn[tr],"arg_directive");break;case 47:zn.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:rt,7:3,12:4,51:it},{1:[3]},nt(st,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,51:it},{13:8,52:[1,9]},{52:[2,44]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:_t,25:xt,27:Et,29:kt,30:Lt,31:It,51:it},{1:[2,2]},{14:23,15:[1,24],54:Rt},nt([15,54],[2,45]),nt(st,[2,8],{1:[2,1]}),nt(st,[2,4]),{7:15,10:26,12:4,17:16,23:_t,25:xt,27:Et,29:kt,30:Lt,31:It,51:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,11]),nt(st,[2,15],{18:27,42:29,20:[1,28],44:Nt,45:Bt,46:Ft,47:Yt}),{24:[1,34]},{26:[1,35]},{28:[1,36]},nt(st,[2,19]),nt(Zt,[2,20]),nt(Zt,[2,21]),{11:[1,37]},{16:38,53:[1,39]},{11:[2,47]},nt(st,[2,5]),{17:40,30:Lt,31:It},{21:41,22:[1,42],32:43,33:44,37:Wt},{43:46,48:[1,47],49:[1,48]},nt(Kt,[2,35]),nt(Kt,[2,36]),nt(Kt,[2,37]),nt(Kt,[2,38]),nt(st,[2,16]),nt(st,[2,17]),nt(st,[2,18]),nt(Jt,[2,9]),{14:49,54:Rt},{54:[2,46]},{15:[1,50]},{22:[1,51]},nt(st,[2,14]),{21:52,22:[2,22],32:43,33:44,37:Wt},{34:53,37:[1,54]},{37:[2,28]},{42:55,44:Nt,45:Bt,46:Ft,47:Yt},nt(on,[2,39]),nt(on,[2,40]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],50:[1,58]},nt(st,[2,13]),{22:[2,23]},nt(rn,[2,24],{35:61,36:62,38:63,40:ln,41:gn}),nt([22,37,40,41],[2,29]),nt([30,31],[2,34]),nt(Jt,[2,10]),nt(st,[2,12]),nt(st,[2,41]),nt(st,[2,42]),nt(st,[2,43]),nt(rn,[2,25],{36:66,39:[1,67],41:gn}),nt(rn,[2,26]),nt(wn,[2,30]),nt(rn,[2,33]),nt(wn,[2,32]),nt(rn,[2,27]),{38:68,40:ln},nt(wn,[2,31])],defaultActions:{5:[2,44],7:[2,2],25:[2,47],39:[2,46],45:[2,28],52:[2,23]},parseError:function(cn,Ln){if(Ln.recoverable)this.trace(cn);else{var an=new Error(cn);throw an.hash=Ln,an}},parse:function(cn){var Ln=this,an=[0],zn=[],dn=[null],Fn=[],ir=this.table,tr="",Jn=0,hr=0,lr=2,cr=1,Cr=Fn.slice.call(arguments,1),Er=Object.create(this.lexer),ar={yy:{}};for(var Fr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Fr)&&(ar.yy[Fr]=this.yy[Fr]);Er.setInput(cn,ar.yy),ar.yy.lexer=Er,ar.yy.parser=this,typeof Er.yylloc>"u"&&(Er.yylloc={});var mr=Er.yylloc;Fn.push(mr);var xr=Er.options&&Er.options.ranges;typeof ar.yy.parseError=="function"?this.parseError=ar.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function fr(){var Hn;return Hn=zn.pop()||Er.lex()||cr,typeof Hn!="number"&&(Hn instanceof Array&&(zn=Hn,Hn=zn.pop()),Hn=Ln.symbols_[Hn]||Hn),Hn}for(var gr,er,nn,un,pn={},Rn,_n,or,Vn;;){if(er=an[an.length-1],this.defaultActions[er]?nn=this.defaultActions[er]:((gr===null||typeof gr>"u")&&(gr=fr()),nn=ir[er]&&ir[er][gr]),typeof nn>"u"||!nn.length||!nn[0]){var Wn="";Vn=[];for(Rn in ir[er])this.terminals_[Rn]&&Rn>lr&&Vn.push("'"+this.terminals_[Rn]+"'");Er.showPosition?Wn="Parse error on line "+(Jn+1)+`:
`+Er.showPosition()+`
Expecting `+Vn.join(", ")+", got '"+(this.terminals_[gr]||gr)+"'":Wn="Parse error on line "+(Jn+1)+": Unexpected "+(gr==cr?"end of input":"'"+(this.terminals_[gr]||gr)+"'"),this.parseError(Wn,{text:Er.match,token:this.terminals_[gr]||gr,line:Er.yylineno,loc:mr,expected:Vn})}if(nn[0]instanceof Array&&nn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+er+", token: "+gr);switch(nn[0]){case 1:an.push(gr),dn.push(Er.yytext),Fn.push(Er.yylloc),an.push(nn[1]),gr=null,hr=Er.yyleng,tr=Er.yytext,Jn=Er.yylineno,mr=Er.yylloc;break;case 2:if(_n=this.productions_[nn[1]][1],pn.$=dn[dn.length-_n],pn._$={first_line:Fn[Fn.length-(_n||1)].first_line,last_line:Fn[Fn.length-1].last_line,first_column:Fn[Fn.length-(_n||1)].first_column,last_column:Fn[Fn.length-1].last_column},xr&&(pn._$.range=[Fn[Fn.length-(_n||1)].range[0],Fn[Fn.length-1].range[1]]),un=this.performAction.apply(pn,[tr,hr,Jn,ar.yy,nn[1],dn,Fn].concat(Cr)),typeof un<"u")return un;_n&&(an=an.slice(0,-1*_n*2),dn=dn.slice(0,-1*_n),Fn=Fn.slice(0,-1*_n)),an.push(this.productions_[nn[1]][0]),dn.push(pn.$),Fn.push(pn._$),or=ir[an[an.length-2]][an[an.length-1]],an.push(or);break;case 3:return!0}}return!0}},Cn=function(){var An={EOF:1,parseError:function(Ln,an){if(this.yy.parser)this.yy.parser.parseError(Ln,an);else throw new Error(Ln)},setInput:function(cn,Ln){return this.yy=Ln||this.yy||{},this._input=cn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var cn=this._input[0];this.yytext+=cn,this.yyleng++,this.offset++,this.match+=cn,this.matched+=cn;var Ln=cn.match(/(?:\r\n?|\n).*/g);return Ln?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),cn},unput:function(cn){var Ln=cn.length,an=cn.split(/(?:\r\n?|\n)/g);this._input=cn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ln),this.offset-=Ln;var zn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),an.length-1&&(this.yylineno-=an.length-1);var dn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:an?(an.length===zn.length?this.yylloc.first_column:0)+zn[zn.length-an.length].length-an[0].length:this.yylloc.first_column-Ln},this.options.ranges&&(this.yylloc.range=[dn[0],dn[0]+this.yyleng-Ln]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(cn){this.unput(this.match.slice(cn))},pastInput:function(){var cn=this.matched.substr(0,this.matched.length-this.match.length);return(cn.length>20?"...":"")+cn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var cn=this.match;return cn.length<20&&(cn+=this._input.substr(0,20-cn.length)),(cn.substr(0,20)+(cn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var cn=this.pastInput(),Ln=new Array(cn.length+1).join("-");return cn+this.upcomingInput()+`
`+Ln+"^"},test_match:function(cn,Ln){var an,zn,dn;if(this.options.backtrack_lexer&&(dn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(dn.yylloc.range=this.yylloc.range.slice(0))),zn=cn[0].match(/(?:\r\n?|\n).*/g),zn&&(this.yylineno+=zn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:zn?zn[zn.length-1].length-zn[zn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+cn[0].length},this.yytext+=cn[0],this.match+=cn[0],this.matches=cn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(cn[0].length),this.matched+=cn[0],an=this.performAction.call(this,this.yy,this,Ln,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),an)return an;if(this._backtrack){for(var Fn in dn)this[Fn]=dn[Fn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var cn,Ln,an,zn;this._more||(this.yytext="",this.match="");for(var dn=this._currentRules(),Fn=0;Fn<dn.length;Fn++)if(an=this._input.match(this.rules[dn[Fn]]),an&&(!Ln||an[0].length>Ln[0].length)){if(Ln=an,zn=Fn,this.options.backtrack_lexer){if(cn=this.test_match(an,dn[Fn]),cn!==!1)return cn;if(this._backtrack){Ln=!1;continue}else return!1}else if(!this.options.flex)break}return Ln?(cn=this.test_match(Ln,dn[zn]),cn!==!1?cn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ln=this.next();return Ln||this.lex()},begin:function(Ln){this.conditionStack.push(Ln)},popState:function(){var Ln=this.conditionStack.length-1;return Ln>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ln){return Ln=this.conditionStack.length-1-Math.abs(Ln||0),Ln>=0?this.conditionStack[Ln]:"INITIAL"},pushState:function(Ln){this.begin(Ln)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Ln,an,zn,dn){switch(zn){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),51;case 8:return this.begin("type_directive"),52;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),54;case 11:return 53;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 50;case 19:return 4;case 20:return this.begin("block"),20;case 21:return 39;case 22:break;case 23:return 40;case 24:return 37;case 25:return 37;case 26:return 41;case 27:break;case 28:return this.popState(),22;case 29:return an.yytext[0];case 30:return 44;case 31:return 46;case 32:return 46;case 33:return 46;case 34:return 44;case 35:return 44;case 36:return 45;case 37:return 45;case 38:return 45;case 39:return 45;case 40:return 45;case 41:return 46;case 42:return 45;case 43:return 46;case 44:return 47;case 45:return 47;case 46:return 47;case 47:return 47;case 48:return 44;case 49:return 45;case 50:return 46;case 51:return 48;case 52:return 49;case 53:return 49;case 54:return 48;case 55:return 48;case 56:return 48;case 57:return 30;case 58:return an.yytext[0];case 59:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28,29],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:!0}}};return An}();kn.lexer=Cn;function Pn(){this.yy={}}return Pn.prototype=kn,kn.Parser=Pn,new Pn}();parser$9.parser=parser$9;const erParser=parser$9,erDetector=nt=>nt.match(/^\s*erDiagram/)!==null;let entities={},relationships=[];const Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective$7=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addEntity=function(nt){return entities[nt]===void 0&&(entities[nt]={attributes:[]},log$1.info("Added new entity :",nt)),entities[nt]},getEntities=()=>entities,addAttributes=function(nt,rt){let it=addEntity(nt),st;for(st=rt.length-1;st>=0;st--)it.attributes.push(rt[st]),log$1.debug("Added attribute ",rt[st].attributeName)},addRelationship$1=function(nt,rt,it,st){let _t={entityA:nt,roleA:rt,entityB:it,relSpec:st};relationships.push(_t),log$1.debug("Added new relationship :",_t)},getRelationships$1=()=>relationships,clear$7=function(){entities={},relationships=[],clear$g()},erDb={Cardinality,Identification,parseDirective:parseDirective$7,getConfig:()=>getConfig$1().er,addEntity,addAttributes,getEntities,addRelationship:addRelationship$1,getRelationships:getRelationships$1,clear:clear$7,setAccTitle,getAccTitle,setAccDescription,getAccDescription,setDiagramTitle,getDiagramTitle},ERMarkers={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},insertMarkers$1=function(nt,rt){let it;nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M9,0 L9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,0 L21,18"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),nt.append("defs").append("marker").attr("id",ERMarkers.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),it=nt.append("defs").append("marker").attr("id",ERMarkers.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),it.append("circle").attr("stroke",rt.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),it.append("path").attr("stroke",rt.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},erMarkers={ERMarkers,insertMarkers:insertMarkers$1},BAD_ID_CHARS_REGEXP=/[^\dA-Za-z](\W)*/g;let conf$8={},entityNameIds=new Map;const setConf$8=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$8[it]=nt[it]},drawAttributes=(nt,rt,it)=>{const st=conf$8.entityPadding/3,_t=conf$8.entityPadding/3,xt=conf$8.fontSize*.85,Et=rt.node().getBBox(),kt=[];let Lt=!1,It=!1,Rt=0,Nt=0,Bt=0,Ft=0,Yt=Et.height+st*2,Zt=1;it.forEach(on=>{on.attributeKeyTypeList!==void 0&&on.attributeKeyTypeList.length>0&&(Lt=!0),on.attributeComment!==void 0&&(It=!0)}),it.forEach(on=>{const rn=`${rt.node().id}-attr-${Zt}`;let ln=0;const gn=parseGenericTypes(on.attributeType),wn=nt.append("text").classed("er entityLabel",!0).attr("id",`${rn}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(gn),kn=nt.append("text").classed("er entityLabel",!0).attr("id",`${rn}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(on.attributeName),Cn={};Cn.tn=wn,Cn.nn=kn;const Pn=wn.node().getBBox(),An=kn.node().getBBox();if(Rt=Math.max(Rt,Pn.width),Nt=Math.max(Nt,An.width),ln=Math.max(Pn.height,An.height),Lt){const cn=on.attributeKeyTypeList!==void 0?on.attributeKeyTypeList.join(","):"",Ln=nt.append("text").classed("er entityLabel",!0).attr("id",`${rn}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(cn);Cn.kn=Ln;const an=Ln.node().getBBox();Bt=Math.max(Bt,an.width),ln=Math.max(ln,an.height)}if(It){const cn=nt.append("text").classed("er entityLabel",!0).attr("id",`${rn}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",getConfig$1().fontFamily).style("font-size",xt+"px").text(on.attributeComment||"");Cn.cn=cn;const Ln=cn.node().getBBox();Ft=Math.max(Ft,Ln.width),ln=Math.max(ln,Ln.height)}Cn.height=ln,kt.push(Cn),Yt+=ln+st*2,Zt+=1});let Wt=4;Lt&&(Wt+=2),It&&(Wt+=2);const Kt=Rt+Nt+Bt+Ft,Jt={width:Math.max(conf$8.minEntityWidth,Math.max(Et.width+conf$8.entityPadding*2,Kt+_t*Wt)),height:it.length>0?Yt:Math.max(conf$8.minEntityHeight,Et.height+conf$8.entityPadding*2)};if(it.length>0){const on=Math.max(0,(Jt.width-Kt-_t*Wt)/(Wt/2));rt.attr("transform","translate("+Jt.width/2+","+(st+Et.height/2)+")");let rn=Et.height+st*2,ln="attributeBoxOdd";kt.forEach(gn=>{const wn=rn+st+gn.height/2;gn.tn.attr("transform","translate("+_t+","+wn+")");const kn=nt.insert("rect","#"+gn.tn.node().id).classed(`er ${ln}`,!0).attr("x",0).attr("y",rn).attr("width",Rt+_t*2+on).attr("height",gn.height+st*2),Cn=parseFloat(kn.attr("x"))+parseFloat(kn.attr("width"));gn.nn.attr("transform","translate("+(Cn+_t)+","+wn+")");const Pn=nt.insert("rect","#"+gn.nn.node().id).classed(`er ${ln}`,!0).attr("x",Cn).attr("y",rn).attr("width",Nt+_t*2+on).attr("height",gn.height+st*2);let An=parseFloat(Pn.attr("x"))+parseFloat(Pn.attr("width"));if(Lt){gn.kn.attr("transform","translate("+(An+_t)+","+wn+")");const cn=nt.insert("rect","#"+gn.kn.node().id).classed(`er ${ln}`,!0).attr("x",An).attr("y",rn).attr("width",Bt+_t*2+on).attr("height",gn.height+st*2);An=parseFloat(cn.attr("x"))+parseFloat(cn.attr("width"))}It&&(gn.cn.attr("transform","translate("+(An+_t)+","+wn+")"),nt.insert("rect","#"+gn.cn.node().id).classed(`er ${ln}`,"true").attr("x",An).attr("y",rn).attr("width",Ft+_t*2+on).attr("height",gn.height+st*2)),rn+=gn.height+st*2,ln=ln==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else Jt.height=Math.max(conf$8.minEntityHeight,Yt),rt.attr("transform","translate("+Jt.width/2+","+Jt.height/2+")");return Jt},drawEntities=function(nt,rt,it){const st=Object.keys(rt);let _t;return st.forEach(function(xt){const Et=generateId(xt,"entity");entityNameIds.set(xt,Et);const kt=nt.append("g").attr("id",Et);_t=_t===void 0?Et:_t;const Lt="text-"+Et,It=kt.append("text").classed("er entityLabel",!0).attr("id",Lt).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(xt),{width:Rt,height:Nt}=drawAttributes(kt,It,rt[xt].attributes),Ft=kt.insert("rect","#"+Lt).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",Rt).attr("height",Nt).node().getBBox();it.setNode(Et,{width:Ft.width,height:Ft.height,shape:"rect",id:Et})}),_t},adjustEntities$1=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )")})},getEdgeName=function(nt){return(nt.entityA+nt.roleA+nt.entityB).replace(/\s/g,"")},addRelationships$1=function(nt,rt){return nt.forEach(function(it){rt.setEdge(entityNameIds.get(it.entityA),entityNameIds.get(it.entityB),{relationship:it},getEdgeName(it))}),nt};let relCnt$1=0;const drawRelationshipFromLayout$1=function(nt,rt,it,st,_t){relCnt$1++;const xt=it.edge(entityNameIds.get(rt.entityA),entityNameIds.get(rt.entityB),getEdgeName(rt)),Et=line$1().x(function(Yt){return Yt.x}).y(function(Yt){return Yt.y}).curve(curveBasis),kt=nt.insert("path","#"+st).classed("er relationshipLine",!0).attr("d",Et(xt.points)).style("stroke",conf$8.stroke).style("fill","none");rt.relSpec.relType===_t.db.Identification.NON_IDENTIFYING&&kt.attr("stroke-dasharray","8,8");let Lt="";switch(conf$8.arrowMarkerAbsolute&&(Lt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Lt=Lt.replace(/\(/g,"\\("),Lt=Lt.replace(/\)/g,"\\)")),rt.relSpec.cardA){case _t.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_END+")");break;case _t.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_END+")");break;case _t.db.Cardinality.ONE_OR_MORE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_END+")");break;case _t.db.Cardinality.ONLY_ONE:kt.attr("marker-end","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_END+")");break}switch(rt.relSpec.cardB){case _t.db.Cardinality.ZERO_OR_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_ONE_START+")");break;case _t.db.Cardinality.ZERO_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ZERO_OR_MORE_START+")");break;case _t.db.Cardinality.ONE_OR_MORE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONE_OR_MORE_START+")");break;case _t.db.Cardinality.ONLY_ONE:kt.attr("marker-start","url("+Lt+"#"+erMarkers.ERMarkers.ONLY_ONE_START+")");break}const It=kt.node().getTotalLength(),Rt=kt.node().getPointAtLength(It*.5),Nt="rel"+relCnt$1,Ft=nt.append("text").classed("er relationshipLabel",!0).attr("id",Nt).attr("x",Rt.x).attr("y",Rt.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",getConfig$1().fontFamily).style("font-size",conf$8.fontSize+"px").text(rt.roleA).node().getBBox();nt.insert("rect","#"+Nt).classed("er relationshipLabelBox",!0).attr("x",Rt.x-Ft.width/2).attr("y",Rt.y-Ft.height/2).attr("width",Ft.width).attr("height",Ft.height)},draw$b=function(nt,rt,it,st){conf$8=getConfig$1().er,log$1.info("Drawing ER diagram");const _t=getConfig$1().securityLevel;let xt;_t==="sandbox"&&(xt=select("#i"+rt));const kt=select(_t==="sandbox"?xt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);erMarkers.insertMarkers(kt,conf$8);let Lt;Lt=new Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:conf$8.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const It=drawEntities(kt,st.db.getEntities(),Lt),Rt=addRelationships$1(st.db.getRelationships(),Lt);layout(Lt),adjustEntities$1(kt,Lt),Rt.forEach(function(Zt){drawRelationshipFromLayout$1(kt,Zt,Lt,It,st)});const Nt=conf$8.diagramPadding;utils.insertTitle(kt,"entityTitleText",conf$8.titleTopMargin,st.db.getDiagramTitle());const Bt=kt.node().getBBox(),Ft=Bt.width+Nt*2,Yt=Bt.height+Nt*2;configureSvgSize(kt,Yt,Ft,conf$8.useMaxWidth),kt.attr("viewBox",`${Bt.x-Nt} ${Bt.y-Nt} ${Ft} ${Yt}`)},MERMAID_ERDIAGRAM_UUID="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function generateId(nt="",rt=""){const it=nt.replace(BAD_ID_CHARS_REGEXP,"");return`${strWithHyphen(rt)}${strWithHyphen(it)}${v5$1(nt,MERMAID_ERDIAGRAM_UUID)}`}function strWithHyphen(nt=""){return nt.length>0?`${nt}-`:""}const erRenderer={setConf:setConf$8,draw:draw$b};var parser$7=function(){var nt=function(Ga,Hi,Ji,xo){for(Ji=Ji||{},xo=Ga.length;xo--;Ji[Ga[xo]]=Hi);return Ji},rt=[1,9],it=[1,7],st=[1,6],_t=[1,8],xt=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Et=[2,10],kt=[1,20],Lt=[1,21],It=[1,22],Rt=[1,23],Nt=[1,30],Bt=[1,32],Ft=[1,33],Yt=[1,34],Zt=[1,62],Wt=[1,48],Kt=[1,52],Jt=[1,36],on=[1,37],rn=[1,38],ln=[1,39],gn=[1,40],wn=[1,56],kn=[1,63],Cn=[1,51],Pn=[1,53],An=[1,55],cn=[1,59],Ln=[1,60],an=[1,41],zn=[1,42],dn=[1,43],Fn=[1,44],ir=[1,61],tr=[1,50],Jn=[1,54],hr=[1,57],lr=[1,58],cr=[1,49],Cr=[1,66],Er=[1,71],ar=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Fr=[1,75],mr=[1,74],xr=[1,76],fr=[20,21,23,81,82],gr=[1,99],er=[1,104],nn=[1,107],un=[1,108],pn=[1,101],Rn=[1,106],_n=[1,109],or=[1,102],Vn=[1,114],Wn=[1,113],Hn=[1,103],nr=[1,105],sr=[1,110],pr=[1,111],vr=[1,112],kr=[1,115],si=[20,21,22,23,81,82],ui=[20,21,22,23,53,81,82],ii=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],li=[20,21,23],Ei=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],wi=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ci=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],Lr=[1,149],Tn=[1,157],En=[1,158],Un=[1,159],qn=[1,160],_r=[1,144],Zr=[1,145],yr=[1,141],ni=[1,152],Ar=[1,153],gi=[1,154],hi=[1,155],Ti=[1,156],fi=[1,161],Yi=[1,162],Si=[1,147],qi=[1,150],uo=[1,146],Xi=[1,143],Na=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],zs=[1,165],bi=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],Zi=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],$s=[12,21,22,24],vs=[22,106],ds=[1,250],Ls=[1,245],Ir=[1,246],Hr=[1,254],ri=[1,251],Gr=[1,248],dr=[1,247],ei=[1,249],ti=[1,252],Bi=[1,253],Oo=[1,255],wo=[1,273],_s=[20,21,23,106],fs=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],zi={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(Hi,Ji,xo,xi,Ki,br,Rl){var Or=br.length-1;switch(Ki){case 5:xi.parseDirective("%%{","open_directive");break;case 6:xi.parseDirective(br[Or],"type_directive");break;case 7:br[Or]=br[Or].trim().replace(/'/g,'"'),xi.parseDirective(br[Or],"arg_directive");break;case 8:xi.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(br[Or])||br[Or].length>0)&&br[Or-1].push(br[Or]),this.$=br[Or-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=br[Or];break;case 19:xi.setDirection("TB"),this.$="TB";break;case 20:xi.setDirection(br[Or-1]),this.$=br[Or-1];break;case 35:this.$=br[Or-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=xi.addSubGraph(br[Or-6],br[Or-1],br[Or-4]);break;case 42:this.$=xi.addSubGraph(br[Or-3],br[Or-1],br[Or-3]);break;case 43:this.$=xi.addSubGraph(void 0,br[Or-1],void 0);break;case 45:this.$=br[Or].trim(),xi.setAccTitle(this.$);break;case 46:case 47:this.$=br[Or].trim(),xi.setAccDescription(this.$);break;case 51:xi.addLink(br[Or-2].stmt,br[Or],br[Or-1]),this.$={stmt:br[Or],nodes:br[Or].concat(br[Or-2].nodes)};break;case 52:xi.addLink(br[Or-3].stmt,br[Or-1],br[Or-2]),this.$={stmt:br[Or-1],nodes:br[Or-1].concat(br[Or-3].nodes)};break;case 53:this.$={stmt:br[Or-1],nodes:br[Or-1]};break;case 54:this.$={stmt:br[Or],nodes:br[Or]};break;case 55:this.$=[br[Or]];break;case 56:this.$=br[Or-4].concat(br[Or]);break;case 57:this.$=[br[Or-2]],xi.setClass(br[Or-2],br[Or]);break;case 58:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"square");break;case 59:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"doublecircle");break;case 60:this.$=br[Or-5],xi.addVertex(br[Or-5],br[Or-2],"circle");break;case 61:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"ellipse");break;case 62:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"stadium");break;case 63:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"subroutine");break;case 64:this.$=br[Or-7],xi.addVertex(br[Or-7],br[Or-1],"rect",void 0,void 0,void 0,Object.fromEntries([[br[Or-5],br[Or-3]]]));break;case 65:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"cylinder");break;case 66:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"round");break;case 67:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"diamond");break;case 68:this.$=br[Or-5],xi.addVertex(br[Or-5],br[Or-2],"hexagon");break;case 69:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"odd");break;case 70:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"trapezoid");break;case 71:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"inv_trapezoid");break;case 72:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"lean_right");break;case 73:this.$=br[Or-3],xi.addVertex(br[Or-3],br[Or-1],"lean_left");break;case 74:this.$=br[Or],xi.addVertex(br[Or]);break;case 75:br[Or-1].text=br[Or],this.$=br[Or-1];break;case 76:case 77:br[Or-2].text=br[Or-1],this.$=br[Or-2];break;case 78:this.$=br[Or];break;case 79:var ea=xi.destructLink(br[Or],br[Or-2]);this.$={type:ea.type,stroke:ea.stroke,length:ea.length,text:br[Or-1]};break;case 80:var ea=xi.destructLink(br[Or]);this.$={type:ea.type,stroke:ea.stroke,length:ea.length};break;case 81:this.$=br[Or-1];break;case 83:case 97:case 153:this.$=br[Or-1]+""+br[Or];break;case 98:case 99:this.$=br[Or-4],xi.addClass(br[Or-2],br[Or]);break;case 100:this.$=br[Or-4],xi.setClass(br[Or-2],br[Or]);break;case 101:case 109:this.$=br[Or-1],xi.setClickEvent(br[Or-1],br[Or]);break;case 102:case 110:this.$=br[Or-3],xi.setClickEvent(br[Or-3],br[Or-2]),xi.setTooltip(br[Or-3],br[Or]);break;case 103:this.$=br[Or-2],xi.setClickEvent(br[Or-2],br[Or-1],br[Or]);break;case 104:this.$=br[Or-4],xi.setClickEvent(br[Or-4],br[Or-3],br[Or-2]),xi.setTooltip(br[Or-4],br[Or]);break;case 105:case 111:this.$=br[Or-1],xi.setLink(br[Or-1],br[Or]);break;case 106:case 112:this.$=br[Or-3],xi.setLink(br[Or-3],br[Or-2]),xi.setTooltip(br[Or-3],br[Or]);break;case 107:case 113:this.$=br[Or-3],xi.setLink(br[Or-3],br[Or-2],br[Or]);break;case 108:case 114:this.$=br[Or-5],xi.setLink(br[Or-5],br[Or-4],br[Or]),xi.setTooltip(br[Or-5],br[Or-2]);break;case 115:this.$=br[Or-4],xi.addVertex(br[Or-2],void 0,void 0,br[Or]);break;case 116:case 118:this.$=br[Or-4],xi.updateLink(br[Or-2],br[Or]);break;case 117:this.$=br[Or-4],xi.updateLink([br[Or-2]],br[Or]);break;case 119:this.$=br[Or-8],xi.updateLinkInterpolate([br[Or-6]],br[Or-2]),xi.updateLink([br[Or-6]],br[Or]);break;case 120:this.$=br[Or-8],xi.updateLinkInterpolate(br[Or-6],br[Or-2]),xi.updateLink(br[Or-6],br[Or]);break;case 121:this.$=br[Or-6],xi.updateLinkInterpolate([br[Or-4]],br[Or]);break;case 122:this.$=br[Or-6],xi.updateLinkInterpolate(br[Or-4],br[Or]);break;case 123:case 125:this.$=[br[Or]];break;case 124:case 126:br[Or-2].push(br[Or]),this.$=br[Or-2];break;case 128:this.$=br[Or-1]+br[Or];break;case 150:this.$=br[Or];break;case 151:this.$=br[Or-1]+""+br[Or];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:rt,16:4,21:it,22:st,24:_t},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:rt,16:4,21:it,22:st,24:_t},nt(xt,Et,{17:11}),{7:12,13:[1,13]},{16:14,21:it,22:st,24:_t},{16:15,21:it,22:st,24:_t},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:kt,21:Lt,22:It,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Nt,43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Kt,86:Jt,87:on,88:rn,89:ln,90:gn,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,116:47,118:an,119:zn,120:dn,121:Fn,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr},{8:64,10:[1,65],15:Cr},nt([10,15],[2,6]),nt(xt,[2,17]),nt(xt,[2,18]),nt(xt,[2,19]),{20:[1,68],21:[1,69],22:Er,27:67,30:70},nt(ar,[2,11]),nt(ar,[2,12]),nt(ar,[2,13]),nt(ar,[2,14]),nt(ar,[2,15]),nt(ar,[2,16]),{9:72,20:Fr,21:mr,23:xr,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:Fr,21:mr,23:xr},{9:81,20:Fr,21:mr,23:xr},{9:82,20:Fr,21:mr,23:xr},{9:83,20:Fr,21:mr,23:xr},{9:84,20:Fr,21:mr,23:xr},{9:86,20:Fr,21:mr,22:[1,85],23:xr},nt(ar,[2,44]),{45:[1,87]},{47:[1,88]},nt(ar,[2,47]),nt(fr,[2,54],{30:89,22:Er}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:gr,52:er,66:nn,67:un,84:[1,97],91:pn,97:96,98:[1,94],100:[1,95],105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:98,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(ar,[2,158]),nt(ar,[2,159]),nt(ar,[2,160]),nt(ar,[2,161]),nt(si,[2,55],{53:[1,116]}),nt(ui,[2,74],{116:129,40:[1,117],52:Zt,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:Wt,67:Kt,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr}),nt(ii,[2,150]),nt(ii,[2,175]),nt(ii,[2,176]),nt(ii,[2,177]),nt(ii,[2,178]),nt(ii,[2,179]),nt(ii,[2,180]),nt(ii,[2,181]),nt(ii,[2,182]),nt(ii,[2,183]),nt(ii,[2,184]),nt(ii,[2,185]),nt(ii,[2,186]),nt(ii,[2,187]),nt(ii,[2,188]),nt(ii,[2,189]),nt(ii,[2,190]),{9:130,20:Fr,21:mr,23:xr},{11:131,14:[1,132]},nt(li,[2,8]),nt(xt,[2,20]),nt(xt,[2,26]),nt(xt,[2,27]),{21:[1,133]},nt(Ei,[2,34],{30:134,22:Er}),nt(ar,[2,35]),{50:135,51:45,52:Zt,54:46,66:Wt,67:Kt,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,116:47,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr},nt(wi,[2,48]),nt(wi,[2,49]),nt(wi,[2,50]),nt(Ci,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:Lr,24:Tn,26:En,38:Un,39:139,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),nt(ar,[2,36]),nt(ar,[2,37]),nt(ar,[2,38]),nt(ar,[2,39]),nt(ar,[2,40]),{22:Lr,24:Tn,26:En,38:Un,39:163,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(Na,Et,{17:164}),nt(ar,[2,45]),nt(ar,[2,46]),nt(fr,[2,53],{52:zs}),{26:gr,52:er,66:nn,67:un,91:pn,97:166,102:[1,167],105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:98,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{95:[1,168],103:169,105:[1,170]},{26:gr,52:er,66:nn,67:un,91:pn,95:[1,171],97:172,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:98,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{26:gr,52:er,66:nn,67:un,91:pn,97:173,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:98,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(li,[2,101],{22:[1,174],99:[1,175]}),nt(li,[2,105],{22:[1,176]}),nt(li,[2,109],{115:100,117:178,22:[1,177],26:gr,52:er,66:nn,67:un,91:pn,105:Rn,106:_n,109:or,111:Vn,112:Wn,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr}),nt(li,[2,111],{22:[1,179]}),nt(bi,[2,152]),nt(bi,[2,154]),nt(bi,[2,155]),nt(bi,[2,156]),nt(bi,[2,157]),nt(Zi,[2,162]),nt(Zi,[2,163]),nt(Zi,[2,164]),nt(Zi,[2,165]),nt(Zi,[2,166]),nt(Zi,[2,167]),nt(Zi,[2,168]),nt(Zi,[2,169]),nt(Zi,[2,170]),nt(Zi,[2,171]),nt(Zi,[2,172]),nt(Zi,[2,173]),nt(Zi,[2,174]),{52:Zt,54:180,66:Wt,67:Kt,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,116:47,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr},{22:Lr,24:Tn,26:En,38:Un,39:181,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:182,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:184,42:qn,52:er,57:[1,183],66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:185,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:186,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:187,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{66:[1,188]},{22:Lr,24:Tn,26:En,38:Un,39:189,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:190,42:qn,52:er,66:nn,67:un,71:[1,191],73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:192,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:193,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:194,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(ii,[2,151]),nt($s,[2,3]),{8:195,15:Cr},{15:[2,7]},nt(xt,[2,28]),nt(Ei,[2,33]),nt(fr,[2,51],{30:196,22:Er}),nt(Ci,[2,75],{22:[1,197]}),{22:[1,198]},{22:Lr,24:Tn,26:En,38:Un,39:199,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,82:[1,200],83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(Zi,[2,82]),nt(Zi,[2,84]),nt(Zi,[2,140]),nt(Zi,[2,141]),nt(Zi,[2,142]),nt(Zi,[2,143]),nt(Zi,[2,144]),nt(Zi,[2,145]),nt(Zi,[2,146]),nt(Zi,[2,147]),nt(Zi,[2,148]),nt(Zi,[2,149]),nt(Zi,[2,85]),nt(Zi,[2,86]),nt(Zi,[2,87]),nt(Zi,[2,88]),nt(Zi,[2,89]),nt(Zi,[2,90]),nt(Zi,[2,91]),nt(Zi,[2,92]),nt(Zi,[2,93]),nt(Zi,[2,94]),nt(Zi,[2,95]),{9:203,20:Fr,21:mr,22:Lr,23:xr,24:Tn,26:En,38:Un,40:[1,202],42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{18:18,19:19,20:kt,21:Lt,22:It,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Nt,42:[1,204],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Kt,86:Jt,87:on,88:rn,89:ln,90:gn,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,116:47,118:an,119:zn,120:dn,121:Fn,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr},{22:Er,30:205},{22:[1,206],26:gr,52:er,66:nn,67:un,91:pn,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:178,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},nt(vs,[2,123]),{22:[1,211]},{22:[1,212],26:gr,52:er,66:nn,67:un,91:pn,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:178,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:[1,213],26:gr,52:er,66:nn,67:un,91:pn,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:178,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{84:[1,214]},nt(li,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},nt(bi,[2,153]),{84:[1,219],101:[1,220]},nt(si,[2,57],{116:129,52:Zt,66:Wt,67:Kt,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr}),{22:Lr,24:Tn,26:En,38:Un,41:[1,221],42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,56:[1,222],66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:223,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,58:[1,224],66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,60:[1,225],66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,62:[1,226],66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,64:[1,227],66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{67:[1,228]},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,66:nn,67:un,70:[1,229],73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,66:nn,67:un,72:[1,230],73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,39:231,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,41:[1,232],42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,66:nn,67:un,73:_r,75:[1,233],77:[1,234],81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,66:nn,67:un,73:_r,75:[1,236],77:[1,235],81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{9:237,20:Fr,21:mr,23:xr},nt(fr,[2,52],{52:zs}),nt(Ci,[2,77]),nt(Ci,[2,76]),{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,66:nn,67:un,68:[1,238],73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(Ci,[2,79]),nt(Zi,[2,83]),{22:Lr,24:Tn,26:En,38:Un,39:239,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(Na,Et,{17:240}),nt(ar,[2,43]),{51:241,52:Zt,54:46,66:Wt,67:Kt,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,116:47,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr},{22:ds,66:Ls,67:Ir,86:Hr,96:242,102:ri,105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},{22:ds,66:Ls,67:Ir,86:Hr,96:256,102:ri,105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},{22:ds,66:Ls,67:Ir,86:Hr,96:257,102:ri,104:[1,258],105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},{22:ds,66:Ls,67:Ir,86:Hr,96:259,102:ri,104:[1,260],105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},{105:[1,261]},{22:ds,66:Ls,67:Ir,86:Hr,96:262,102:ri,105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},{22:ds,66:Ls,67:Ir,86:Hr,96:263,102:ri,105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},{26:gr,52:er,66:nn,67:un,91:pn,97:264,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:98,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(li,[2,102]),{84:[1,265]},nt(li,[2,106],{22:[1,266]}),nt(li,[2,107]),nt(li,[2,110]),nt(li,[2,112],{22:[1,267]}),nt(li,[2,113]),nt(ui,[2,58]),nt(ui,[2,59]),{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,58:[1,268],66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(ui,[2,66]),nt(ui,[2,61]),nt(ui,[2,62]),nt(ui,[2,63]),{66:[1,269]},nt(ui,[2,65]),nt(ui,[2,67]),{22:Lr,24:Tn,26:En,38:Un,42:qn,52:er,66:nn,67:un,72:[1,270],73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(ui,[2,69]),nt(ui,[2,70]),nt(ui,[2,72]),nt(ui,[2,71]),nt(ui,[2,73]),nt($s,[2,4]),nt([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:Lr,24:Tn,26:En,38:Un,41:[1,271],42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{18:18,19:19,20:kt,21:Lt,22:It,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Nt,42:[1,272],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Kt,86:Jt,87:on,88:rn,89:ln,90:gn,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,116:47,118:an,119:zn,120:dn,121:Fn,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr},nt(si,[2,56]),nt(li,[2,115],{106:wo}),nt(_s,[2,125],{108:274,22:ds,66:Ls,67:Ir,86:Hr,102:ri,105:Gr,109:dr,110:ei,111:ti,112:Bi,113:Oo}),nt(fs,[2,127]),nt(fs,[2,129]),nt(fs,[2,130]),nt(fs,[2,131]),nt(fs,[2,132]),nt(fs,[2,133]),nt(fs,[2,134]),nt(fs,[2,135]),nt(fs,[2,136]),nt(fs,[2,137]),nt(fs,[2,138]),nt(fs,[2,139]),nt(li,[2,116],{106:wo}),nt(li,[2,117],{106:wo}),{22:[1,275]},nt(li,[2,118],{106:wo}),{22:[1,276]},nt(vs,[2,124]),nt(li,[2,98],{106:wo}),nt(li,[2,99],{106:wo}),nt(li,[2,100],{115:100,117:178,26:gr,52:er,66:nn,67:un,91:pn,105:Rn,106:_n,109:or,111:Vn,112:Wn,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr}),nt(li,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:Fr,21:mr,23:xr},nt(ar,[2,42]),{22:ds,66:Ls,67:Ir,86:Hr,102:ri,105:Gr,107:283,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},nt(fs,[2,128]),{26:gr,52:er,66:nn,67:un,91:pn,97:284,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:98,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{26:gr,52:er,66:nn,67:un,91:pn,97:285,105:Rn,106:_n,109:or,111:Vn,112:Wn,115:100,117:98,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(li,[2,108]),nt(li,[2,114]),nt(ui,[2,60]),{22:Lr,24:Tn,26:En,38:Un,39:286,42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:140,84:yr,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},nt(ui,[2,68]),nt(Na,Et,{17:287}),nt(_s,[2,126],{108:274,22:ds,66:Ls,67:Ir,86:Hr,102:ri,105:Gr,109:dr,110:ei,111:ti,112:Bi,113:Oo}),nt(li,[2,121],{115:100,117:178,22:[1,288],26:gr,52:er,66:nn,67:un,91:pn,105:Rn,106:_n,109:or,111:Vn,112:Wn,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr}),nt(li,[2,122],{115:100,117:178,22:[1,289],26:gr,52:er,66:nn,67:un,91:pn,105:Rn,106:_n,109:or,111:Vn,112:Wn,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr}),{22:Lr,24:Tn,26:En,38:Un,41:[1,290],42:qn,52:er,66:nn,67:un,73:_r,81:Zr,83:201,85:151,86:ni,87:Ar,88:gi,89:hi,90:Ti,91:fi,92:Yi,94:142,95:Si,105:Rn,106:_n,109:qi,111:Vn,112:Wn,113:uo,114:Xi,115:148,122:Hn,123:nr,124:sr,125:pr,126:vr,127:kr},{18:18,19:19,20:kt,21:Lt,22:It,23:Rt,32:24,33:25,34:26,35:27,36:28,37:29,38:Nt,42:[1,291],43:31,44:Bt,46:Ft,48:Yt,50:35,51:45,52:Zt,54:46,66:Wt,67:Kt,86:Jt,87:on,88:rn,89:ln,90:gn,91:wn,95:kn,105:Cn,106:Pn,109:An,111:cn,112:Ln,116:47,118:an,119:zn,120:dn,121:Fn,122:ir,123:tr,124:Jn,125:hr,126:lr,127:cr},{22:ds,66:Ls,67:Ir,86:Hr,96:292,102:ri,105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},{22:ds,66:Ls,67:Ir,86:Hr,96:293,102:ri,105:Gr,107:243,108:244,109:dr,110:ei,111:ti,112:Bi,113:Oo},nt(ui,[2,64]),nt(ar,[2,41]),nt(li,[2,119],{106:wo}),nt(li,[2,120],{106:wo})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(Hi,Ji){if(Ji.recoverable)this.trace(Hi);else{var xo=new Error(Hi);throw xo.hash=Ji,xo}},parse:function(Hi){var Ji=this,xo=[0],xi=[],Ki=[null],br=[],Rl=this.table,Or="",ea=0,Oc=0,So=2,oo=1,Ah=br.slice.call(arguments,1),Ii=Object.create(this.lexer),ao={yy:{}};for(var Yl in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Yl)&&(ao.yy[Yl]=this.yy[Yl]);Ii.setInput(Hi,ao.yy),ao.yy.lexer=Ii,ao.yy.parser=this,typeof Ii.yylloc>"u"&&(Ii.yylloc={});var tu=Ii.yylloc;br.push(tu);var cc=Ii.options&&Ii.options.ranges;typeof ao.yy.parseError=="function"?this.parseError=ao.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Hs(){var ll;return ll=xi.pop()||Ii.lex()||oo,typeof ll!="number"&&(ll instanceof Array&&(xi=ll,ll=xi.pop()),ll=Ji.symbols_[ll]||ll),ll}for(var $o,Wa,ta,$c,Ba={},Xl,el,Yu,nu;;){if(Wa=xo[xo.length-1],this.defaultActions[Wa]?ta=this.defaultActions[Wa]:(($o===null||typeof $o>"u")&&($o=Hs()),ta=Rl[Wa]&&Rl[Wa][$o]),typeof ta>"u"||!ta.length||!ta[0]){var Su="";nu=[];for(Xl in Rl[Wa])this.terminals_[Xl]&&Xl>So&&nu.push("'"+this.terminals_[Xl]+"'");Ii.showPosition?Su="Parse error on line "+(ea+1)+`:
`+Ii.showPosition()+`
Expecting `+nu.join(", ")+", got '"+(this.terminals_[$o]||$o)+"'":Su="Parse error on line "+(ea+1)+": Unexpected "+($o==oo?"end of input":"'"+(this.terminals_[$o]||$o)+"'"),this.parseError(Su,{text:Ii.match,token:this.terminals_[$o]||$o,line:Ii.yylineno,loc:tu,expected:nu})}if(ta[0]instanceof Array&&ta.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Wa+", token: "+$o);switch(ta[0]){case 1:xo.push($o),Ki.push(Ii.yytext),br.push(Ii.yylloc),xo.push(ta[1]),$o=null,Oc=Ii.yyleng,Or=Ii.yytext,ea=Ii.yylineno,tu=Ii.yylloc;break;case 2:if(el=this.productions_[ta[1]][1],Ba.$=Ki[Ki.length-el],Ba._$={first_line:br[br.length-(el||1)].first_line,last_line:br[br.length-1].last_line,first_column:br[br.length-(el||1)].first_column,last_column:br[br.length-1].last_column},cc&&(Ba._$.range=[br[br.length-(el||1)].range[0],br[br.length-1].range[1]]),$c=this.performAction.apply(Ba,[Or,Oc,ea,ao.yy,ta[1],Ki,br].concat(Ah)),typeof $c<"u")return $c;el&&(xo=xo.slice(0,-1*el*2),Ki=Ki.slice(0,-1*el),br=br.slice(0,-1*el)),xo.push(this.productions_[ta[1]][0]),Ki.push(Ba.$),br.push(Ba._$),Yu=Rl[xo[xo.length-2]][xo[xo.length-1]],xo.push(Yu);break;case 3:return!0}}return!0}},Ps=function(){var Ga={EOF:1,parseError:function(Ji,xo){if(this.yy.parser)this.yy.parser.parseError(Ji,xo);else throw new Error(Ji)},setInput:function(Hi,Ji){return this.yy=Ji||this.yy||{},this._input=Hi,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Hi=this._input[0];this.yytext+=Hi,this.yyleng++,this.offset++,this.match+=Hi,this.matched+=Hi;var Ji=Hi.match(/(?:\r\n?|\n).*/g);return Ji?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Hi},unput:function(Hi){var Ji=Hi.length,xo=Hi.split(/(?:\r\n?|\n)/g);this._input=Hi+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ji),this.offset-=Ji;var xi=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),xo.length-1&&(this.yylineno-=xo.length-1);var Ki=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:xo?(xo.length===xi.length?this.yylloc.first_column:0)+xi[xi.length-xo.length].length-xo[0].length:this.yylloc.first_column-Ji},this.options.ranges&&(this.yylloc.range=[Ki[0],Ki[0]+this.yyleng-Ji]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Hi){this.unput(this.match.slice(Hi))},pastInput:function(){var Hi=this.matched.substr(0,this.matched.length-this.match.length);return(Hi.length>20?"...":"")+Hi.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Hi=this.match;return Hi.length<20&&(Hi+=this._input.substr(0,20-Hi.length)),(Hi.substr(0,20)+(Hi.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Hi=this.pastInput(),Ji=new Array(Hi.length+1).join("-");return Hi+this.upcomingInput()+`
`+Ji+"^"},test_match:function(Hi,Ji){var xo,xi,Ki;if(this.options.backtrack_lexer&&(Ki={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ki.yylloc.range=this.yylloc.range.slice(0))),xi=Hi[0].match(/(?:\r\n?|\n).*/g),xi&&(this.yylineno+=xi.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xi?xi[xi.length-1].length-xi[xi.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Hi[0].length},this.yytext+=Hi[0],this.match+=Hi[0],this.matches=Hi,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Hi[0].length),this.matched+=Hi[0],xo=this.performAction.call(this,this.yy,this,Ji,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),xo)return xo;if(this._backtrack){for(var br in Ki)this[br]=Ki[br];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Hi,Ji,xo,xi;this._more||(this.yytext="",this.match="");for(var Ki=this._currentRules(),br=0;br<Ki.length;br++)if(xo=this._input.match(this.rules[Ki[br]]),xo&&(!Ji||xo[0].length>Ji[0].length)){if(Ji=xo,xi=br,this.options.backtrack_lexer){if(Hi=this.test_match(xo,Ki[br]),Hi!==!1)return Hi;if(this._backtrack){Ji=!1;continue}else return!1}else if(!this.options.flex)break}return Ji?(Hi=this.test_match(Ji,Ki[xi]),Hi!==!1?Hi:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ji=this.next();return Ji||this.lex()},begin:function(Ji){this.conditionStack.push(Ji)},popState:function(){var Ji=this.conditionStack.length-1;return Ji>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ji){return Ji=this.conditionStack.length-1-Math.abs(Ji||0),Ji>=0?this.conditionStack[Ji]:"INITIAL"},pushState:function(Ji){this.begin(Ji)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ji,xo,xi,Ki){switch(xi){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return Ji.lex.firstGraph()&&this.begin("dir"),24;case 36:return Ji.lex.firstGraph()&&this.begin("dir"),24;case 37:return Ji.lex.firstGraph()&&this.begin("dir"),24;case 38:return 38;case 39:return 42;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return 101;case 44:return this.popState(),25;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return this.popState(),26;case 55:return 118;case 56:return 119;case 57:return 120;case 58:return 121;case 59:return 105;case 60:return 111;case 61:return 53;case 62:return 67;case 63:return 52;case 64:return 20;case 65:return 106;case 66:return 126;case 67:return 82;case 68:return 82;case 69:return 82;case 70:return 81;case 71:return 81;case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:return 125;case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[44,45,46,47,48,49,50,51,52,53,54],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};return Ga}();zi.lexer=Ps;function Da(){this.yy={}}return Da.prototype=zi,zi.Parser=Da,new Da}();parser$7.parser=parser$7;const parser$8=parser$7,flowDetector=(nt,rt)=>{var it,st;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-wrapper"||((st=rt==null?void 0:rt.flowchart)==null?void 0:st.defaultRenderer)==="elk"?!1:nt.match(/^\s*graph/)!==null},flowDetectorV2=(nt,rt)=>{var it,st;return((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="dagre-d3"||((st=rt==null?void 0:rt.flowchart)==null?void 0:st.defaultRenderer)==="elk"?!1:nt.match(/^\s*graph/)!==null?!0:nt.match(/^\s*flowchart/)!==null},MERMAID_DOM_ID_PREFIX="flowchart-";let vertexCounter=0,config=getConfig$1(),vertices={},edges=[],classes$1={},subGraphs=[],subGraphLookup={},tooltips={},subCount=0,firstGraphFlag=!0,direction$1,version,funs$1=[];const sanitizeText=nt=>common$1.sanitizeText(nt,config),parseDirective$6=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},lookUpDomId=function(nt){const rt=Object.keys(vertices);for(const it of rt)if(vertices[it].id===nt)return vertices[it].domId;return nt},addVertex=function(nt,rt,it,st,_t,xt,Et={}){let kt,Lt=nt;Lt!==void 0&&Lt.trim().length!==0&&(vertices[Lt]===void 0&&(vertices[Lt]={id:Lt,domId:MERMAID_DOM_ID_PREFIX+Lt+"-"+vertexCounter,styles:[],classes:[]}),vertexCounter++,rt!==void 0?(config=getConfig$1(),kt=sanitizeText(rt.trim()),kt[0]==='"'&&kt[kt.length-1]==='"'&&(kt=kt.substring(1,kt.length-1)),vertices[Lt].text=kt):vertices[Lt].text===void 0&&(vertices[Lt].text=nt),it!==void 0&&(vertices[Lt].type=it),st!=null&&st.forEach(function(It){vertices[Lt].styles.push(It)}),_t!=null&&_t.forEach(function(It){vertices[Lt].classes.push(It)}),xt!==void 0&&(vertices[Lt].dir=xt),vertices[Lt].props===void 0?vertices[Lt].props=Et:Et!==void 0&&Object.assign(vertices[Lt].props,Et))},addSingleLink=function(nt,rt,it,st){const Et={start:nt,end:rt,type:void 0,text:""};st=it.text,st!==void 0&&(Et.text=sanitizeText(st.trim()),Et.text[0]==='"'&&Et.text[Et.text.length-1]==='"'&&(Et.text=Et.text.substring(1,Et.text.length-1))),it!==void 0&&(Et.type=it.type,Et.stroke=it.stroke,Et.length=it.length),edges.push(Et)},addLink=function(nt,rt,it,st){let _t,xt;for(_t=0;_t<nt.length;_t++)for(xt=0;xt<rt.length;xt++)addSingleLink(nt[_t],rt[xt],it,st)},updateLinkInterpolate=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultInterpolate=rt:edges[it].interpolate=rt})},updateLink=function(nt,rt){nt.forEach(function(it){it==="default"?edges.defaultStyle=rt:(utils.isSubstringInArray("fill",rt)===-1&&rt.push("fill:none"),edges[it].style=rt)})},addClass=function(nt,rt){classes$1[nt]===void 0&&(classes$1[nt]={id:nt,styles:[],textStyles:[]}),rt!=null&&rt.forEach(function(it){if(it.match("color")){const _t=it.replace("fill","bgFill").replace("color","fill");classes$1[nt].textStyles.push(_t)}classes$1[nt].styles.push(it)})},setDirection$1=function(nt){direction$1=nt,direction$1.match(/.*</)&&(direction$1="RL"),direction$1.match(/.*\^/)&&(direction$1="BT"),direction$1.match(/.*>/)&&(direction$1="LR"),direction$1.match(/.*v/)&&(direction$1="TB"),direction$1==="TD"&&(direction$1="TB")},setClass$1=function(nt,rt){nt.split(",").forEach(function(it){let st=it;vertices[st]!==void 0&&vertices[st].classes.push(rt),subGraphLookup[st]!==void 0&&subGraphLookup[st].classes.push(rt)})},setTooltip=function(nt,rt){nt.split(",").forEach(function(it){rt!==void 0&&(tooltips[version==="gen-1"?lookUpDomId(it):it]=sanitizeText(rt))})},setClickFun$1=function(nt,rt,it){let st=lookUpDomId(nt);if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let _t=[];if(typeof it=="string"){_t=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let xt=0;xt<_t.length;xt++){let Et=_t[xt].trim();Et.charAt(0)==='"'&&Et.charAt(Et.length-1)==='"'&&(Et=Et.substr(1,Et.length-2)),_t[xt]=Et}}_t.length===0&&_t.push(nt),vertices[nt]!==void 0&&(vertices[nt].haveCallback=!0,funs$1.push(function(){const xt=document.querySelector(`[id="${st}"]`);xt!==null&&xt.addEventListener("click",function(){utils.runFunc(rt,..._t)},!1)}))},setLink$1=function(nt,rt,it){nt.split(",").forEach(function(st){vertices[st]!==void 0&&(vertices[st].link=utils.formatUrl(rt,config),vertices[st].linkTarget=it)}),setClass$1(nt,"clickable")},getTooltip=function(nt){return tooltips[nt]},setClickEvent$1=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFun$1(st,rt,it)}),setClass$1(nt,"clickable")},bindFunctions$1=function(nt){funs$1.forEach(function(rt){rt(nt)})},getDirection$1=function(){return direction$1.trim()},getVertices=function(){return vertices},getEdges=function(){return edges},getClasses$4=function(){return classes$1},setupToolTips=function(nt){let rt=select(".mermaidTooltip");(rt._groups||rt)[0][0]===null&&(rt=select("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),select(nt).select("svg").selectAll("g.node").on("mouseover",function(){const _t=select(this);if(_t.attr("title")===null)return;const Et=this.getBoundingClientRect();rt.transition().duration(200).style("opacity",".9"),rt.text(_t.attr("title")).style("left",window.scrollX+Et.left+(Et.right-Et.left)/2+"px").style("top",window.scrollY+Et.top-14+document.body.scrollTop+"px"),rt.html(rt.html().replace(/&lt;br\/&gt;/g,"<br/>")),_t.classed("hover",!0)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),select(this).classed("hover",!1)})};funs$1.push(setupToolTips);const clear$6=function(nt="gen-1"){vertices={},classes$1={},edges=[],funs$1=[setupToolTips],subGraphs=[],subGraphLookup={},subCount=0,tooltips=[],firstGraphFlag=!0,version=nt,clear$g()},setGen=nt=>{version=nt||"gen-2"},defaultStyle=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph=function(nt,rt,it){let st=nt.trim(),_t=it;nt===it&&it.match(/\s/)&&(st=void 0);function xt(Rt){const Nt={boolean:{},number:{},string:{}},Bt=[];let Ft;return{nodeList:Rt.filter(function(Zt){const Wt=typeof Zt;return Zt.stmt&&Zt.stmt==="dir"?(Ft=Zt.value,!1):Zt.trim()===""?!1:Wt in Nt?Nt[Wt].hasOwnProperty(Zt)?!1:Nt[Wt][Zt]=!0:Bt.includes(Zt)?!1:Bt.push(Zt)}),dir:Ft}}let Et=[];const{nodeList:kt,dir:Lt}=xt(Et.concat.apply(Et,rt));if(Et=kt,version==="gen-1")for(let Rt=0;Rt<Et.length;Rt++)Et[Rt]=lookUpDomId(Et[Rt]);st=st||"subGraph"+subCount,_t=_t||"",_t=sanitizeText(_t),subCount=subCount+1;const It={id:st,nodes:Et,title:_t.trim(),classes:[],dir:Lt};return log$1.info("Adding",It.id,It.nodes,It.dir),It.nodes=makeUniq(It,subGraphs).nodes,subGraphs.push(It),subGraphLookup[st]=It,st},getPosForId=function(nt){for(const[rt,it]of subGraphs.entries())if(it.id===nt)return rt;return-1};let secCount=-1;const posCrossRef=[],indexNodes2=function(nt,rt){const it=subGraphs[rt].nodes;if(secCount=secCount+1,secCount>2e3)return;if(posCrossRef[secCount]=rt,subGraphs[rt].id===nt)return{result:!0,count:0};let st=0,_t=1;for(;st<it.length;){const xt=getPosForId(it[st]);if(xt>=0){const Et=indexNodes2(nt,xt);if(Et.result)return{result:!0,count:_t+Et.count};_t=_t+Et.count}st=st+1}return{result:!1,count:_t}},getDepthFirstPos=function(nt){return posCrossRef[nt]},indexNodes=function(){secCount=-1,subGraphs.length>0&&indexNodes2("none",subGraphs.length-1)},getSubGraphs=function(){return subGraphs},firstGraph=()=>firstGraphFlag?(firstGraphFlag=!1,!0):!1,destructStartLink=nt=>{let rt=nt.trim(),it="arrow_open";switch(rt[0]){case"<":it="arrow_point",rt=rt.slice(1);break;case"x":it="arrow_cross",rt=rt.slice(1);break;case"o":it="arrow_circle",rt=rt.slice(1);break}let st="normal";return rt.includes("=")&&(st="thick"),rt.includes(".")&&(st="dotted"),{type:it,stroke:st}},countChar=(nt,rt)=>{const it=rt.length;let st=0;for(let _t=0;_t<it;++_t)rt[_t]===nt&&++st;return st},destructEndLink=nt=>{const rt=nt.trim();let it=rt.slice(0,-1),st="arrow_open";switch(rt.slice(-1)){case"x":st="arrow_cross",rt[0]==="x"&&(st="double_"+st,it=it.slice(1));break;case">":st="arrow_point",rt[0]==="<"&&(st="double_"+st,it=it.slice(1));break;case"o":st="arrow_circle",rt[0]==="o"&&(st="double_"+st,it=it.slice(1));break}let _t="normal",xt=it.length-1;it[0]==="="&&(_t="thick");let Et=countChar(".",it);return Et&&(_t="dotted",xt=Et),{type:st,stroke:_t,length:xt}},destructLink=(nt,rt)=>{const it=destructEndLink(nt);let st;if(rt){if(st=destructStartLink(rt),st.stroke!==it.stroke)return{type:"INVALID",stroke:"INVALID"};if(st.type==="arrow_open")st.type=it.type;else{if(st.type!==it.type)return{type:"INVALID",stroke:"INVALID"};st.type="double_"+st.type}return st.type==="double_arrow"&&(st.type="double_arrow_point"),st.length=it.length,st}return it},exists=(nt,rt)=>{let it=!1;return nt.forEach(st=>{st.nodes.indexOf(rt)>=0&&(it=!0)}),it},makeUniq=(nt,rt)=>{const it=[];return nt.nodes.forEach((st,_t)=>{exists(rt,st)||it.push(nt.nodes[_t])}),{nodes:it}},lex={firstGraph},flowDb={parseDirective:parseDirective$6,defaultConfig:()=>defaultConfig.flowchart,setAccTitle,getAccTitle,getAccDescription,setAccDescription,addVertex,lookUpDomId,addLink,updateLinkInterpolate,updateLink,addClass,setDirection:setDirection$1,setClass:setClass$1,setTooltip,getTooltip,setClickEvent:setClickEvent$1,setLink:setLink$1,bindFunctions:bindFunctions$1,getDirection:getDirection$1,getVertices,getEdges,getClasses:getClasses$4,clear:clear$6,setGen,defaultStyle,addSubGraph,getDepthFirstPos,indexNodes,getSubGraphs,destructLink,lex,exists,makeUniq,setDiagramTitle,getDiagramTitle},db=Object.freeze(Object.defineProperty({__proto__:null,addClass,addLink,addSingleLink,addSubGraph,addVertex,bindFunctions:bindFunctions$1,clear:clear$6,default:flowDb,defaultStyle,destructLink,firstGraph,getClasses:getClasses$4,getDepthFirstPos,getDirection:getDirection$1,getEdges,getSubGraphs,getTooltip,getVertices,indexNodes,lex,lookUpDomId,parseDirective:parseDirective$6,setClass:setClass$1,setClickEvent:setClickEvent$1,setDirection:setDirection$1,setGen,setLink:setLink$1,updateLink,updateLinkInterpolate},Symbol.toStringTag,{value:"Module"}));function question(nt,rt,it){const st=rt.width,_t=rt.height,xt=(st+_t)*.9,Et=[{x:xt/2,y:0},{x:xt,y:-xt/2},{x:xt/2,y:-xt},{x:0,y:-xt/2}],kt=insertPolygonShape(nt,xt,xt,Et);return it.intersect=function(Lt){return intersectPolygon$1(it,Et,Lt)},kt}function hexagon(nt,rt,it){const _t=rt.height,xt=_t/4,Et=rt.width+2*xt,kt=[{x:xt,y:0},{x:Et-xt,y:0},{x:Et,y:-_t/2},{x:Et-xt,y:-_t},{x:xt,y:-_t},{x:0,y:-_t/2}],Lt=insertPolygonShape(nt,Et,_t,kt);return it.intersect=function(It){return intersectPolygon$1(it,kt,It)},Lt}function rect_left_inv_arrow(nt,rt,it){const st=rt.width,_t=rt.height,xt=[{x:-_t/2,y:0},{x:st,y:0},{x:st,y:-_t},{x:-_t/2,y:-_t},{x:0,y:-_t/2}],Et=insertPolygonShape(nt,st,_t,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function lean_right(nt,rt,it){const st=rt.width,_t=rt.height,xt=[{x:-2*_t/6,y:0},{x:st-_t/6,y:0},{x:st+2*_t/6,y:-_t},{x:_t/6,y:-_t}],Et=insertPolygonShape(nt,st,_t,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function lean_left(nt,rt,it){const st=rt.width,_t=rt.height,xt=[{x:2*_t/6,y:0},{x:st+_t/6,y:0},{x:st-2*_t/6,y:-_t},{x:-_t/6,y:-_t}],Et=insertPolygonShape(nt,st,_t,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function trapezoid(nt,rt,it){const st=rt.width,_t=rt.height,xt=[{x:-2*_t/6,y:0},{x:st+2*_t/6,y:0},{x:st-_t/6,y:-_t},{x:_t/6,y:-_t}],Et=insertPolygonShape(nt,st,_t,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function inv_trapezoid(nt,rt,it){const st=rt.width,_t=rt.height,xt=[{x:_t/6,y:0},{x:st-_t/6,y:0},{x:st+2*_t/6,y:-_t},{x:-2*_t/6,y:-_t}],Et=insertPolygonShape(nt,st,_t,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function rect_right_inv_arrow(nt,rt,it){const st=rt.width,_t=rt.height,xt=[{x:0,y:0},{x:st+_t/2,y:0},{x:st,y:-_t/2},{x:st+_t/2,y:-_t},{x:0,y:-_t}],Et=insertPolygonShape(nt,st,_t,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function stadium(nt,rt,it){const st=rt.height,_t=rt.width+st/4,xt=nt.insert("rect",":first-child").attr("rx",st/2).attr("ry",st/2).attr("x",-_t/2).attr("y",-st/2).attr("width",_t).attr("height",st);return it.intersect=function(Et){return intersectRect$2(it,Et)},xt}function subroutine(nt,rt,it){const st=rt.width,_t=rt.height,xt=[{x:0,y:0},{x:st,y:0},{x:st,y:-_t},{x:0,y:-_t},{x:0,y:0},{x:-8,y:0},{x:st+8,y:0},{x:st+8,y:-_t},{x:-8,y:-_t},{x:-8,y:0}],Et=insertPolygonShape(nt,st,_t,xt);return it.intersect=function(kt){return intersectPolygon$1(it,xt,kt)},Et}function cylinder(nt,rt,it){const st=rt.width,_t=st/2,xt=_t/(2.5+st/50),Et=rt.height+xt,kt="M 0,"+xt+" a "+_t+","+xt+" 0,0,0 "+st+" 0 a "+_t+","+xt+" 0,0,0 "+-st+" 0 l 0,"+Et+" a "+_t+","+xt+" 0,0,0 "+st+" 0 l 0,"+-Et,Lt=nt.attr("label-offset-y",xt).insert("path",":first-child").attr("d",kt).attr("transform","translate("+-st/2+","+-(Et/2+xt)+")");return it.intersect=function(It){const Rt=intersectRect$2(it,It),Nt=Rt.x-it.x;if(_t!=0&&(Math.abs(Nt)<it.width/2||Math.abs(Nt)==it.width/2&&Math.abs(Rt.y-it.y)>it.height/2-xt)){let Bt=xt*xt*(1-Nt*Nt/(_t*_t));Bt!=0&&(Bt=Math.sqrt(Bt)),Bt=xt-Bt,It.y-it.y>0&&(Bt=-Bt),Rt.y+=Bt}return Rt},Lt}function addToRender(nt){nt.shapes().question=question,nt.shapes().hexagon=hexagon,nt.shapes().stadium=stadium,nt.shapes().subroutine=subroutine,nt.shapes().cylinder=cylinder,nt.shapes().rect_left_inv_arrow=rect_left_inv_arrow,nt.shapes().lean_right=lean_right,nt.shapes().lean_left=lean_left,nt.shapes().trapezoid=trapezoid,nt.shapes().inv_trapezoid=inv_trapezoid,nt.shapes().rect_right_inv_arrow=rect_right_inv_arrow}function addToRenderV2(nt){nt({question}),nt({hexagon}),nt({stadium}),nt({subroutine}),nt({cylinder}),nt({rect_left_inv_arrow}),nt({lean_right}),nt({lean_left}),nt({trapezoid}),nt({inv_trapezoid}),nt({rect_right_inv_arrow})}function insertPolygonShape(nt,rt,it,st){return nt.insert("polygon",":first-child").attr("points",st.map(function(_t){return _t.x+","+_t.y}).join(" ")).attr("transform","translate("+-rt/2+","+it/2+")")}const flowChartShapes={addToRender,addToRenderV2},conf$7={},setConf$7=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$7[it]=nt[it]},addVertices$1=function(nt,rt,it,st,_t,xt){const Et=st?st.select(`[id="${it}"]`):select(`[id="${it}"]`),kt=_t||document;Object.keys(nt).forEach(function(It){const Rt=nt[It];let Nt="default";Rt.classes.length>0&&(Nt=Rt.classes.join(" "));const Bt=getStylesFromArray(Rt.styles);let Ft=Rt.text!==void 0?Rt.text:Rt.id,Yt;if(evaluate(getConfig$1().flowchart.htmlLabels)){const Kt={label:Ft.replace(/fa[blrs]?:fa-[\w-]+/g,Jt=>`<i class='${Jt.replace(":"," ")}'></i>`)};Yt=addHtmlLabel$1(Et,Kt).node(),Yt.parentNode.removeChild(Yt)}else{const Kt=kt.createElementNS("http://www.w3.org/2000/svg","text");Kt.setAttribute("style",Bt.labelStyle.replace("color:","fill:"));const Jt=Ft.split(common$1.lineBreakRegex);for(const on of Jt){const rn=kt.createElementNS("http://www.w3.org/2000/svg","tspan");rn.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),rn.setAttribute("dy","1em"),rn.setAttribute("x","1"),rn.textContent=on,Kt.appendChild(rn)}Yt=Kt}let Zt=0,Wt="";switch(Rt.type){case"round":Zt=5,Wt="rect";break;case"square":Wt="rect";break;case"diamond":Wt="question";break;case"hexagon":Wt="hexagon";break;case"odd":Wt="rect_left_inv_arrow";break;case"lean_right":Wt="lean_right";break;case"lean_left":Wt="lean_left";break;case"trapezoid":Wt="trapezoid";break;case"inv_trapezoid":Wt="inv_trapezoid";break;case"odd_right":Wt="rect_left_inv_arrow";break;case"circle":Wt="circle";break;case"ellipse":Wt="ellipse";break;case"stadium":Wt="stadium";break;case"subroutine":Wt="subroutine";break;case"cylinder":Wt="cylinder";break;case"group":Wt="rect";break;default:Wt="rect"}log$1.warn("Adding node",Rt.id,Rt.domId),rt.setNode(xt.db.lookUpDomId(Rt.id),{labelType:"svg",labelStyle:Bt.labelStyle,shape:Wt,label:Yt,rx:Zt,ry:Zt,class:Nt,style:Bt.style,id:xt.db.lookUpDomId(Rt.id)})})},addEdges$1=function(nt,rt,it){let st=0,_t,xt;if(nt.defaultStyle!==void 0){const Et=getStylesFromArray(nt.defaultStyle);_t=Et.style,xt=Et.labelStyle}nt.forEach(function(Et){st++;var kt="L-"+Et.start+"-"+Et.end,Lt="LS-"+Et.start,It="LE-"+Et.end;const Rt={};Et.type==="arrow_open"?Rt.arrowhead="none":Rt.arrowhead="normal";let Nt="",Bt="";if(Et.style!==void 0){const Ft=getStylesFromArray(Et.style);Nt=Ft.style,Bt=Ft.labelStyle}else switch(Et.stroke){case"normal":Nt="fill:none",_t!==void 0&&(Nt=_t),xt!==void 0&&(Bt=xt);break;case"dotted":Nt="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":Nt=" stroke-width: 3.5px;fill:none";break}Rt.style=Nt,Rt.labelStyle=Bt,Et.interpolate!==void 0?Rt.curve=interpolateToCurve(Et.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Rt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Rt.curve=interpolateToCurve(conf$7.curve,curveLinear),Et.text===void 0?Et.style!==void 0&&(Rt.arrowheadStyle="fill: #333"):(Rt.arrowheadStyle="fill: #333",Rt.labelpos="c",evaluate(getConfig$1().flowchart.htmlLabels)?(Rt.labelType="html",Rt.label=`<span id="L-${kt}" class="edgeLabel L-${Lt}' L-${It}" style="${Rt.labelStyle}">${Et.text.replace(/fa[blrs]?:fa-[\w-]+/g,Ft=>`<i class='${Ft.replace(":"," ")}'></i>`)}</span>`):(Rt.labelType="text",Rt.label=Et.text.replace(common$1.lineBreakRegex,`
`),Et.style===void 0&&(Rt.style=Rt.style||"stroke: #333; stroke-width: 1.5px;fill:none"),Rt.labelStyle=Rt.labelStyle.replace("color:","fill:"))),Rt.id=kt,Rt.class=Lt+" "+It,Rt.minlen=Et.length||1,rt.setEdge(it.db.lookUpDomId(Et.start),it.db.lookUpDomId(Et.end),Rt,st)})},getClasses$3=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch(it){return log$1.error(it),{}}},draw$a=function(nt,rt,it,st){log$1.info("Drawing flowchart"),st.db.clear();const{securityLevel:_t,flowchart:xt}=getConfig$1();let Et;_t==="sandbox"&&(Et=select("#i"+rt));const kt=select(_t==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=_t==="sandbox"?Et.nodes()[0].contentDocument:document;try{st.parser.parse(nt)}catch{log$1.debug("Parsing failed")}let It=st.db.getDirection();It===void 0&&(It="TD");const Rt=xt.nodeSpacing||50,Nt=xt.rankSpacing||50,Bt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:It,nodesep:Rt,ranksep:Nt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let Ft;const Yt=st.db.getSubGraphs();for(let gn=Yt.length-1;gn>=0;gn--)Ft=Yt[gn],st.db.addVertex(Ft.id,Ft.title,"group",void 0,Ft.classes);const Zt=st.db.getVertices();log$1.warn("Get vertices",Zt);const Wt=st.db.getEdges();let Kt=0;for(Kt=Yt.length-1;Kt>=0;Kt--){Ft=Yt[Kt],selectAll("cluster").append("text");for(let gn=0;gn<Ft.nodes.length;gn++)log$1.warn("Setting subgraph",Ft.nodes[gn],st.db.lookUpDomId(Ft.nodes[gn]),st.db.lookUpDomId(Ft.id)),Bt.setParent(st.db.lookUpDomId(Ft.nodes[gn]),st.db.lookUpDomId(Ft.id))}addVertices$1(Zt,Bt,rt,kt,Lt,st),addEdges$1(Wt,Bt,st);const Jt=new render$2;flowChartShapes.addToRender(Jt),Jt.arrows().none=function(wn,kn,Cn,Pn){const cn=wn.append("marker").attr("id",kn).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");applyStyle$1(cn,Cn[Pn+"Style"])},Jt.arrows().normal=function(wn,kn){wn.append("marker").attr("id",kn).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const on=kt.select(`[id="${rt}"]`),rn=kt.select("#"+rt+" g");for(Jt(rn,Bt),rn.selectAll("g.node").attr("title",function(){return st.db.getTooltip(this.id)}),st.db.indexNodes("subGraph"+Kt),Kt=0;Kt<Yt.length;Kt++)if(Ft=Yt[Kt],Ft.title!=="undefined"){const gn=Lt.querySelectorAll("#"+rt+' [id="'+st.db.lookUpDomId(Ft.id)+'"] rect'),wn=Lt.querySelectorAll("#"+rt+' [id="'+st.db.lookUpDomId(Ft.id)+'"]'),kn=gn[0].x.baseVal.value,Cn=gn[0].y.baseVal.value,Pn=gn[0].width.baseVal.value,cn=select(wn[0]).select(".label");cn.attr("transform",`translate(${kn+Pn/2}, ${Cn+14})`),cn.attr("id",rt+"Text");for(let Ln=0;Ln<Ft.classes.length;Ln++)wn[0].classList.add(Ft.classes[Ln])}if(!xt.htmlLabels){const gn=Lt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const wn of gn){const kn=wn.getBBox(),Cn=Lt.createElementNS("http://www.w3.org/2000/svg","rect");Cn.setAttribute("rx",0),Cn.setAttribute("ry",0),Cn.setAttribute("width",kn.width),Cn.setAttribute("height",kn.height),wn.insertBefore(Cn,wn.firstChild)}}setupGraphViewbox$1(Bt,on,xt.diagramPadding,xt.useMaxWidth),Object.keys(Zt).forEach(function(gn){const wn=Zt[gn];if(wn.link){const kn=kt.select("#"+rt+' [id="'+st.db.lookUpDomId(gn)+'"]');if(kn){const Cn=Lt.createElementNS("http://www.w3.org/2000/svg","a");Cn.setAttributeNS("http://www.w3.org/2000/svg","class",wn.classes.join(" ")),Cn.setAttributeNS("http://www.w3.org/2000/svg","href",wn.link),Cn.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),_t==="sandbox"?Cn.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):wn.linkTarget&&Cn.setAttributeNS("http://www.w3.org/2000/svg","target",wn.linkTarget);const Pn=kn.insert(function(){return Cn},":first-child"),An=kn.select(".label-container");An&&Pn.append(function(){return An.node()});const cn=kn.select(".label");cn&&Pn.append(function(){return cn.node()})}}})},flowRenderer={setConf:setConf$7,addVertices:addVertices$1,addEdges:addEdges$1,getClasses:getClasses$3,draw:draw$a},conf$6={},setConf$6=function(nt){const rt=Object.keys(nt);for(const it of rt)conf$6[it]=nt[it]},addVertices=function(nt,rt,it,st,_t,xt){const Et=st.select(`[id="${it}"]`);Object.keys(nt).forEach(function(Lt){const It=nt[Lt];let Rt="default";It.classes.length>0&&(Rt=It.classes.join(" "));const Nt=getStylesFromArray(It.styles);let Bt=It.text!==void 0?It.text:It.id,Ft;if(evaluate(getConfig$1().flowchart.htmlLabels)){const Wt={label:Bt.replace(/fa[blrs]?:fa-[\w-]+/g,Kt=>`<i class='${Kt.replace(":"," ")}'></i>`)};Ft=addHtmlLabel$1(Et,Wt).node(),Ft.parentNode.removeChild(Ft)}else{const Wt=_t.createElementNS("http://www.w3.org/2000/svg","text");Wt.setAttribute("style",Nt.labelStyle.replace("color:","fill:"));const Kt=Bt.split(common$1.lineBreakRegex);for(const Jt of Kt){const on=_t.createElementNS("http://www.w3.org/2000/svg","tspan");on.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),on.setAttribute("dy","1em"),on.setAttribute("x","1"),on.textContent=Jt,Wt.appendChild(on)}Ft=Wt}let Yt=0,Zt="";switch(It.type){case"round":Yt=5,Zt="rect";break;case"square":Zt="rect";break;case"diamond":Zt="question";break;case"hexagon":Zt="hexagon";break;case"odd":Zt="rect_left_inv_arrow";break;case"lean_right":Zt="lean_right";break;case"lean_left":Zt="lean_left";break;case"trapezoid":Zt="trapezoid";break;case"inv_trapezoid":Zt="inv_trapezoid";break;case"odd_right":Zt="rect_left_inv_arrow";break;case"circle":Zt="circle";break;case"ellipse":Zt="ellipse";break;case"stadium":Zt="stadium";break;case"subroutine":Zt="subroutine";break;case"cylinder":Zt="cylinder";break;case"group":Zt="rect";break;case"doublecircle":Zt="doublecircle";break;default:Zt="rect"}rt.setNode(It.id,{labelStyle:Nt.labelStyle,shape:Zt,labelText:Bt,rx:Yt,ry:Yt,class:Rt,style:Nt.style,id:It.id,link:It.link,linkTarget:It.linkTarget,tooltip:xt.db.getTooltip(It.id)||"",domId:xt.db.lookUpDomId(It.id),haveCallback:It.haveCallback,width:It.type==="group"?500:void 0,dir:It.dir,type:It.type,props:It.props,padding:getConfig$1().flowchart.padding}),log$1.info("setNode",{labelStyle:Nt.labelStyle,shape:Zt,labelText:Bt,rx:Yt,ry:Yt,class:Rt,style:Nt.style,id:It.id,domId:xt.db.lookUpDomId(It.id),width:It.type==="group"?500:void 0,type:It.type,dir:It.dir,props:It.props,padding:getConfig$1().flowchart.padding})})},addEdges=function(nt,rt,it){log$1.info("abc78 edges = ",nt);let st=0,_t={},xt,Et;if(nt.defaultStyle!==void 0){const kt=getStylesFromArray(nt.defaultStyle);xt=kt.style,Et=kt.labelStyle}nt.forEach(function(kt){st++;var Lt="L-"+kt.start+"-"+kt.end;_t[Lt]===void 0?(_t[Lt]=0,log$1.info("abc78 new entry",Lt,_t[Lt])):(_t[Lt]++,log$1.info("abc78 new entry",Lt,_t[Lt]));let It=Lt+"-"+_t[Lt];log$1.info("abc78 new link id to be used is",Lt,It,_t[Lt]);var Rt="LS-"+kt.start,Nt="LE-"+kt.end;const Bt={style:"",labelStyle:""};switch(Bt.minlen=kt.length||1,kt.type==="arrow_open"?Bt.arrowhead="none":Bt.arrowhead="normal",Bt.arrowTypeStart="arrow_open",Bt.arrowTypeEnd="arrow_open",kt.type){case"double_arrow_cross":Bt.arrowTypeStart="arrow_cross";case"arrow_cross":Bt.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":Bt.arrowTypeStart="arrow_point";case"arrow_point":Bt.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":Bt.arrowTypeStart="arrow_circle";case"arrow_circle":Bt.arrowTypeEnd="arrow_circle";break}let Ft="",Yt="";switch(kt.stroke){case"normal":Ft="fill:none;",xt!==void 0&&(Ft=xt),Et!==void 0&&(Yt=Et),Bt.thickness="normal",Bt.pattern="solid";break;case"dotted":Bt.thickness="normal",Bt.pattern="dotted",Bt.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":Bt.thickness="thick",Bt.pattern="solid",Bt.style="stroke-width: 3.5px;fill:none;";break}if(kt.style!==void 0){const Zt=getStylesFromArray(kt.style);Ft=Zt.style,Yt=Zt.labelStyle}Bt.style=Bt.style+=Ft,Bt.labelStyle=Bt.labelStyle+=Yt,kt.interpolate!==void 0?Bt.curve=interpolateToCurve(kt.interpolate,curveLinear):nt.defaultInterpolate!==void 0?Bt.curve=interpolateToCurve(nt.defaultInterpolate,curveLinear):Bt.curve=interpolateToCurve(conf$6.curve,curveLinear),kt.text===void 0?kt.style!==void 0&&(Bt.arrowheadStyle="fill: #333"):(Bt.arrowheadStyle="fill: #333",Bt.labelpos="c"),Bt.labelType="text",Bt.label=kt.text.replace(common$1.lineBreakRegex,`
`),kt.style===void 0&&(Bt.style=Bt.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),Bt.labelStyle=Bt.labelStyle.replace("color:","fill:"),Bt.id=It,Bt.classes="flowchart-link "+Rt+" "+Nt,rt.setEdge(kt.start,kt.end,Bt,st)})},getClasses$2=function(nt,rt){log$1.info("Extracting classes"),rt.db.clear();try{return rt.parse(nt),rt.db.getClasses()}catch{return}},draw$9=function(nt,rt,it,st){log$1.info("Drawing flowchart"),st.db.clear(),flowDb.setGen("gen-2"),st.parser.parse(nt);let _t=st.db.getDirection();_t===void 0&&(_t="TD");const{securityLevel:xt,flowchart:Et}=getConfig$1(),kt=Et.nodeSpacing||50,Lt=Et.rankSpacing||50;let It;xt==="sandbox"&&(It=select("#i"+rt));const Rt=select(xt==="sandbox"?It.nodes()[0].contentDocument.body:"body"),Nt=xt==="sandbox"?It.nodes()[0].contentDocument:document,Bt=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:_t,nodesep:kt,ranksep:Lt,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let Ft;const Yt=st.db.getSubGraphs();log$1.info("Subgraphs - ",Yt);for(let ln=Yt.length-1;ln>=0;ln--)Ft=Yt[ln],log$1.info("Subgraph - ",Ft),st.db.addVertex(Ft.id,Ft.title,"group",void 0,Ft.classes,Ft.dir);const Zt=st.db.getVertices(),Wt=st.db.getEdges();log$1.info("Edges",Wt);let Kt=0;for(Kt=Yt.length-1;Kt>=0;Kt--){Ft=Yt[Kt],selectAll("cluster").append("text");for(let ln=0;ln<Ft.nodes.length;ln++)log$1.info("Setting up subgraphs",Ft.nodes[ln],Ft.id),Bt.setParent(Ft.nodes[ln],Ft.id)}addVertices(Zt,Bt,rt,Rt,Nt,st),addEdges(Wt,Bt);const Jt=Rt.select(`[id="${rt}"]`),on=Rt.select("#"+rt+" g");if(render$1(on,Bt,["point","circle","cross"],"flowchart",rt),utils.insertTitle(Jt,"flowchartTitleText",Et.titleTopMargin,st.db.getDiagramTitle()),setupGraphViewbox$1(Bt,Jt,Et.diagramPadding,Et.useMaxWidth),st.db.indexNodes("subGraph"+Kt),!Et.htmlLabels){const ln=Nt.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const gn of ln){const wn=gn.getBBox(),kn=Nt.createElementNS("http://www.w3.org/2000/svg","rect");kn.setAttribute("rx",0),kn.setAttribute("ry",0),kn.setAttribute("width",wn.width),kn.setAttribute("height",wn.height),gn.insertBefore(kn,gn.firstChild)}}Object.keys(Zt).forEach(function(ln){const gn=Zt[ln];if(gn.link){const wn=select("#"+rt+' [id="'+ln+'"]');if(wn){const kn=Nt.createElementNS("http://www.w3.org/2000/svg","a");kn.setAttributeNS("http://www.w3.org/2000/svg","class",gn.classes.join(" ")),kn.setAttributeNS("http://www.w3.org/2000/svg","href",gn.link),kn.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),xt==="sandbox"?kn.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):gn.linkTarget&&kn.setAttributeNS("http://www.w3.org/2000/svg","target",gn.linkTarget);const Cn=wn.insert(function(){return kn},":first-child"),Pn=wn.select(".label-container");Pn&&Cn.append(function(){return Pn.node()});const An=wn.select(".label");An&&Cn.append(function(){return An.node()})}}})},flowRendererV2={setConf:setConf$6,addVertices,addEdges,getClasses:getClasses$2,draw:draw$9};var parser$6=function(){var nt=function(kn,Cn,Pn,An){for(Pn=Pn||{},An=kn.length;An--;Pn[kn[An]]=Cn);return Pn},rt=[1,3],it=[1,5],st=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],_t=[1,15],xt=[1,16],Et=[1,17],kt=[1,18],Lt=[1,19],It=[1,20],Rt=[1,21],Nt=[1,22],Bt=[1,23],Ft=[1,24],Yt=[1,25],Zt=[1,26],Wt=[1,27],Kt=[1,29],Jt=[1,31],on=[1,34],rn=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],ln={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(Cn,Pn,An,cn,Ln,an,zn){var dn=an.length-1;switch(Ln){case 2:return an[dn-1];case 3:this.$=[];break;case 4:an[dn-1].push(an[dn]),this.$=an[dn-1];break;case 5:case 6:this.$=an[dn];break;case 7:case 8:this.$=[];break;case 9:cn.setDateFormat(an[dn].substr(11)),this.$=an[dn].substr(11);break;case 10:cn.enableInclusiveEndDates(),this.$=an[dn].substr(18);break;case 11:cn.TopAxis(),this.$=an[dn].substr(8);break;case 12:cn.setAxisFormat(an[dn].substr(11)),this.$=an[dn].substr(11);break;case 13:cn.setTickInterval(an[dn].substr(13)),this.$=an[dn].substr(13);break;case 14:cn.setExcludes(an[dn].substr(9)),this.$=an[dn].substr(9);break;case 15:cn.setIncludes(an[dn].substr(9)),this.$=an[dn].substr(9);break;case 16:cn.setTodayMarker(an[dn].substr(12)),this.$=an[dn].substr(12);break;case 17:cn.setDiagramTitle(an[dn].substr(6)),this.$=an[dn].substr(6);break;case 18:this.$=an[dn].trim(),cn.setAccTitle(this.$);break;case 19:case 20:this.$=an[dn].trim(),cn.setAccDescription(this.$);break;case 21:cn.addSection(an[dn].substr(8)),this.$=an[dn].substr(8);break;case 23:cn.addTask(an[dn-1],an[dn]),this.$="task";break;case 27:this.$=an[dn-1],cn.setClickEvent(an[dn-1],an[dn],null);break;case 28:this.$=an[dn-2],cn.setClickEvent(an[dn-2],an[dn-1],an[dn]);break;case 29:this.$=an[dn-2],cn.setClickEvent(an[dn-2],an[dn-1],null),cn.setLink(an[dn-2],an[dn]);break;case 30:this.$=an[dn-3],cn.setClickEvent(an[dn-3],an[dn-2],an[dn-1]),cn.setLink(an[dn-3],an[dn]);break;case 31:this.$=an[dn-2],cn.setClickEvent(an[dn-2],an[dn],null),cn.setLink(an[dn-2],an[dn-1]);break;case 32:this.$=an[dn-3],cn.setClickEvent(an[dn-3],an[dn-1],an[dn]),cn.setLink(an[dn-3],an[dn-2]);break;case 33:this.$=an[dn-1],cn.setLink(an[dn-1],an[dn]);break;case 34:case 40:this.$=an[dn-1]+" "+an[dn];break;case 35:case 36:case 38:this.$=an[dn-2]+" "+an[dn-1]+" "+an[dn];break;case 37:case 39:this.$=an[dn-3]+" "+an[dn-2]+" "+an[dn-1]+" "+an[dn];break;case 41:cn.parseDirective("%%{","open_directive");break;case 42:cn.parseDirective(an[dn],"type_directive");break;case 43:an[dn]=an[dn].trim().replace(/'/g,'"'),cn.parseDirective(an[dn],"arg_directive");break;case 44:cn.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:rt,30:4,40:it},{1:[3]},{3:6,4:2,5:rt,30:4,40:it},nt(st,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:_t,13:xt,14:Et,15:kt,16:Lt,17:It,18:Rt,19:Nt,20:Bt,21:Ft,23:Yt,25:Zt,26:Wt,27:28,28:Kt,30:4,35:Jt,40:it},{32:32,33:[1,33],43:on},nt([33,43],[2,42]),nt(st,[2,8],{1:[2,2]}),nt(st,[2,4]),{4:30,10:35,12:_t,13:xt,14:Et,15:kt,16:Lt,17:It,18:Rt,19:Nt,20:Bt,21:Ft,23:Yt,25:Zt,26:Wt,27:28,28:Kt,30:4,35:Jt,40:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,9]),nt(st,[2,10]),nt(st,[2,11]),nt(st,[2,12]),nt(st,[2,13]),nt(st,[2,14]),nt(st,[2,15]),nt(st,[2,16]),nt(st,[2,17]),{22:[1,36]},{24:[1,37]},nt(st,[2,20]),nt(st,[2,21]),nt(st,[2,22]),{29:[1,38]},nt(st,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},nt(st,[2,5]),nt(st,[2,18]),nt(st,[2,19]),nt(st,[2,23]),nt(st,[2,27],{37:[1,44],38:[1,45]}),nt(st,[2,33],{36:[1,46]}),nt(rn,[2,25]),{32:47,43:on},{43:[2,43]},nt(st,[2,28],{38:[1,48]}),nt(st,[2,29]),nt(st,[2,31],{37:[1,49]}),{11:[1,50]},nt(st,[2,30]),nt(st,[2,32]),nt(rn,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(Cn,Pn){if(Pn.recoverable)this.trace(Cn);else{var An=new Error(Cn);throw An.hash=Pn,An}},parse:function(Cn){var Pn=this,An=[0],cn=[],Ln=[null],an=[],zn=this.table,dn="",Fn=0,ir=0,tr=2,Jn=1,hr=an.slice.call(arguments,1),lr=Object.create(this.lexer),cr={yy:{}};for(var Cr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Cr)&&(cr.yy[Cr]=this.yy[Cr]);lr.setInput(Cn,cr.yy),cr.yy.lexer=lr,cr.yy.parser=this,typeof lr.yylloc>"u"&&(lr.yylloc={});var Er=lr.yylloc;an.push(Er);var ar=lr.options&&lr.options.ranges;typeof cr.yy.parseError=="function"?this.parseError=cr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Fr(){var or;return or=cn.pop()||lr.lex()||Jn,typeof or!="number"&&(or instanceof Array&&(cn=or,or=cn.pop()),or=Pn.symbols_[or]||or),or}for(var mr,xr,fr,gr,er={},nn,un,pn,Rn;;){if(xr=An[An.length-1],this.defaultActions[xr]?fr=this.defaultActions[xr]:((mr===null||typeof mr>"u")&&(mr=Fr()),fr=zn[xr]&&zn[xr][mr]),typeof fr>"u"||!fr.length||!fr[0]){var _n="";Rn=[];for(nn in zn[xr])this.terminals_[nn]&&nn>tr&&Rn.push("'"+this.terminals_[nn]+"'");lr.showPosition?_n="Parse error on line "+(Fn+1)+`:
`+lr.showPosition()+`
Expecting `+Rn.join(", ")+", got '"+(this.terminals_[mr]||mr)+"'":_n="Parse error on line "+(Fn+1)+": Unexpected "+(mr==Jn?"end of input":"'"+(this.terminals_[mr]||mr)+"'"),this.parseError(_n,{text:lr.match,token:this.terminals_[mr]||mr,line:lr.yylineno,loc:Er,expected:Rn})}if(fr[0]instanceof Array&&fr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xr+", token: "+mr);switch(fr[0]){case 1:An.push(mr),Ln.push(lr.yytext),an.push(lr.yylloc),An.push(fr[1]),mr=null,ir=lr.yyleng,dn=lr.yytext,Fn=lr.yylineno,Er=lr.yylloc;break;case 2:if(un=this.productions_[fr[1]][1],er.$=Ln[Ln.length-un],er._$={first_line:an[an.length-(un||1)].first_line,last_line:an[an.length-1].last_line,first_column:an[an.length-(un||1)].first_column,last_column:an[an.length-1].last_column},ar&&(er._$.range=[an[an.length-(un||1)].range[0],an[an.length-1].range[1]]),gr=this.performAction.apply(er,[dn,ir,Fn,cr.yy,fr[1],Ln,an].concat(hr)),typeof gr<"u")return gr;un&&(An=An.slice(0,-1*un*2),Ln=Ln.slice(0,-1*un),an=an.slice(0,-1*un)),An.push(this.productions_[fr[1]][0]),Ln.push(er.$),an.push(er._$),pn=zn[An[An.length-2]][An[An.length-1]],An.push(pn);break;case 3:return!0}}return!0}},gn=function(){var kn={EOF:1,parseError:function(Pn,An){if(this.yy.parser)this.yy.parser.parseError(Pn,An);else throw new Error(Pn)},setInput:function(Cn,Pn){return this.yy=Pn||this.yy||{},this._input=Cn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Cn=this._input[0];this.yytext+=Cn,this.yyleng++,this.offset++,this.match+=Cn,this.matched+=Cn;var Pn=Cn.match(/(?:\r\n?|\n).*/g);return Pn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Cn},unput:function(Cn){var Pn=Cn.length,An=Cn.split(/(?:\r\n?|\n)/g);this._input=Cn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Pn),this.offset-=Pn;var cn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),An.length-1&&(this.yylineno-=An.length-1);var Ln=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:An?(An.length===cn.length?this.yylloc.first_column:0)+cn[cn.length-An.length].length-An[0].length:this.yylloc.first_column-Pn},this.options.ranges&&(this.yylloc.range=[Ln[0],Ln[0]+this.yyleng-Pn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Cn){this.unput(this.match.slice(Cn))},pastInput:function(){var Cn=this.matched.substr(0,this.matched.length-this.match.length);return(Cn.length>20?"...":"")+Cn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Cn=this.match;return Cn.length<20&&(Cn+=this._input.substr(0,20-Cn.length)),(Cn.substr(0,20)+(Cn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Cn=this.pastInput(),Pn=new Array(Cn.length+1).join("-");return Cn+this.upcomingInput()+`
`+Pn+"^"},test_match:function(Cn,Pn){var An,cn,Ln;if(this.options.backtrack_lexer&&(Ln={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ln.yylloc.range=this.yylloc.range.slice(0))),cn=Cn[0].match(/(?:\r\n?|\n).*/g),cn&&(this.yylineno+=cn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:cn?cn[cn.length-1].length-cn[cn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Cn[0].length},this.yytext+=Cn[0],this.match+=Cn[0],this.matches=Cn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Cn[0].length),this.matched+=Cn[0],An=this.performAction.call(this,this.yy,this,Pn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),An)return An;if(this._backtrack){for(var an in Ln)this[an]=Ln[an];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Cn,Pn,An,cn;this._more||(this.yytext="",this.match="");for(var Ln=this._currentRules(),an=0;an<Ln.length;an++)if(An=this._input.match(this.rules[Ln[an]]),An&&(!Pn||An[0].length>Pn[0].length)){if(Pn=An,cn=an,this.options.backtrack_lexer){if(Cn=this.test_match(An,Ln[an]),Cn!==!1)return Cn;if(this._backtrack){Pn=!1;continue}else return!1}else if(!this.options.flex)break}return Pn?(Cn=this.test_match(Pn,Ln[cn]),Cn!==!1?Cn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Pn=this.next();return Pn||this.lex()},begin:function(Pn){this.conditionStack.push(Pn)},popState:function(){var Pn=this.conditionStack.length-1;return Pn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Pn){return Pn=this.conditionStack.length-1-Math.abs(Pn||0),Pn>=0?this.conditionStack[Pn]:"INITIAL"},pushState:function(Pn){this.begin(Pn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Pn,An,cn,Ln){switch(cn){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return kn}();ln.lexer=gn;function wn(){this.yy={}}return wn.prototype=ln,ln.Parser=wn,new wn}();parser$6.parser=parser$6;const ganttParser=parser$6,ganttDetector=nt=>nt.match(/^\s*gantt/)!==null;dayjs.extend(dayjsIsoWeek);dayjs.extend(dayjsCustomParseFormat);dayjs.extend(dayjsAdvancedFormat);let dateFormat="",axisFormat="",tickInterval,todayMarker="",includes=[],excludes=[],links={},sections$2=[],tasks$1=[],currentSection$1="";const tags=["active","done","crit","milestone"];let funs=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0;const parseDirective$5=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear$5=function(){sections$2=[],tasks$1=[],currentSection$1="",funs=[],taskCnt=0,lastTask=void 0,lastTaskID=void 0,rawTasks$1=[],dateFormat="",axisFormat="",tickInterval=void 0,todayMarker="",includes=[],excludes=[],inclusiveEndDates=!1,topAxis=!1,lastOrder=0,links={},clear$g()},setAxisFormat=function(nt){axisFormat=nt},getAxisFormat=function(){return axisFormat},setTickInterval=function(nt){tickInterval=nt},getTickInterval=function(){return tickInterval},setTodayMarker=function(nt){todayMarker=nt},getTodayMarker=function(){return todayMarker},setDateFormat=function(nt){dateFormat=nt},enableInclusiveEndDates=function(){inclusiveEndDates=!0},endDatesAreInclusive=function(){return inclusiveEndDates},enableTopAxis=function(){topAxis=!0},topAxisEnabled=function(){return topAxis},getDateFormat=function(){return dateFormat},setIncludes=function(nt){includes=nt.toLowerCase().split(/[\s,]+/)},getIncludes=function(){return includes},setExcludes=function(nt){excludes=nt.toLowerCase().split(/[\s,]+/)},getExcludes=function(){return excludes},getLinks=function(){return links},addSection$2=function(nt){currentSection$1=nt,sections$2.push(nt)},getSections$2=function(){return sections$2},getTasks$1=function(){let nt=compileTasks$1();const rt=10;let it=0;for(;!nt&&it<rt;)nt=compileTasks$1(),it++;return tasks$1=rawTasks$1,tasks$1},isInvalidDate=function(nt,rt,it,st){return st.includes(nt.format(rt.trim()))?!1:nt.isoWeekday()>=6&&it.includes("weekends")||it.includes(nt.format("dddd").toLowerCase())?!0:it.includes(nt.format(rt.trim()))},checkTaskDates=function(nt,rt,it,st){if(!it.length||nt.manualEndTime)return;let _t;nt.startTime instanceof Date?_t=dayjs(nt.startTime):_t=dayjs(nt.startTime,rt,!0),_t=_t.add(1,"d");let xt;nt.endTime instanceof Date?xt=dayjs(nt.endTime):xt=dayjs(nt.endTime,rt,!0);const[Et,kt]=fixTaskDates(_t,xt,rt,it,st);nt.endTime=Et.toDate(),nt.renderEndTime=kt},fixTaskDates=function(nt,rt,it,st,_t){let xt=!1,Et=null;for(;nt<=rt;)xt||(Et=rt.toDate()),xt=isInvalidDate(nt,it,st,_t),xt&&(rt=rt.add(1,"d")),nt=nt.add(1,"d");return[rt,Et]},getStartDate=function(nt,rt,it){it=it.trim();const _t=/^after\s+([\d\w- ]+)/.exec(it.trim());if(_t!==null){let Et=null;if(_t[1].split(" ").forEach(function(kt){let Lt=findTaskById(kt);Lt!==void 0&&(Et?Lt.endTime>Et.endTime&&(Et=Lt):Et=Lt)}),Et)return Et.endTime;{const kt=new Date;return kt.setHours(0,0,0,0),kt}}let xt=dayjs(it,rt.trim(),!0);if(xt.isValid())return xt.toDate();{log$1.debug("Invalid date:"+it),log$1.debug("With date format:"+rt.trim());const Et=new Date(it);if(Et===void 0||isNaN(Et.getTime()))throw new Error("Invalid date:"+it);return Et}},parseDuration=function(nt){const rt=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(nt.trim());return rt!==null?[Number.parseFloat(rt[1]),rt[2]]:[NaN,"ms"]},getEndDate=function(nt,rt,it,st=!1){it=it.trim();let _t=dayjs(it,rt.trim(),!0);if(_t.isValid())return st&&(_t=_t.add(1,"d")),_t.toDate();let xt=dayjs(nt);const[Et,kt]=parseDuration(it);if(!Number.isNaN(Et)){const Lt=xt.add(Et,kt);Lt.isValid()&&(xt=Lt)}return xt.toDate()};let taskCnt=0;const parseId=function(nt){return nt===void 0?(taskCnt=taskCnt+1,"task"+taskCnt):nt},compileData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const st=it.split(","),_t={};getTaskTags(st,_t,tags);for(let Et=0;Et<st.length;Et++)st[Et]=st[Et].trim();let xt="";switch(st.length){case 1:_t.id=parseId(),_t.startTime=nt.endTime,xt=st[0];break;case 2:_t.id=parseId(),_t.startTime=getStartDate(void 0,dateFormat,st[0]),xt=st[1];break;case 3:_t.id=parseId(st[0]),_t.startTime=getStartDate(void 0,dateFormat,st[1]),xt=st[2];break}return xt&&(_t.endTime=getEndDate(_t.startTime,dateFormat,xt,inclusiveEndDates),_t.manualEndTime=dayjs(xt,"YYYY-MM-DD",!0).isValid(),checkTaskDates(_t,dateFormat,excludes,includes)),_t},parseData=function(nt,rt){let it;rt.substr(0,1)===":"?it=rt.substr(1,rt.length):it=rt;const st=it.split(","),_t={};getTaskTags(st,_t,tags);for(let xt=0;xt<st.length;xt++)st[xt]=st[xt].trim();switch(st.length){case 1:_t.id=parseId(),_t.startTime={type:"prevTaskEnd",id:nt},_t.endTime={data:st[0]};break;case 2:_t.id=parseId(),_t.startTime={type:"getStartDate",startData:st[0]},_t.endTime={data:st[1]};break;case 3:_t.id=parseId(st[0]),_t.startTime={type:"getStartDate",startData:st[1]},_t.endTime={data:st[2]};break}return _t};let lastTask,lastTaskID,rawTasks$1=[];const taskDb={},addTask$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:rt},task:nt,classes:[]},st=parseData(lastTaskID,rt);it.raw.startTime=st.startTime,it.raw.endTime=st.endTime,it.id=st.id,it.prevTaskId=lastTaskID,it.active=st.active,it.done=st.done,it.crit=st.crit,it.milestone=st.milestone,it.order=lastOrder,lastOrder++;const _t=rawTasks$1.push(it);lastTaskID=it.id,taskDb[it.id]=_t-1},findTaskById=function(nt){const rt=taskDb[nt];return rawTasks$1[rt]},addTaskOrg$1=function(nt,rt){const it={section:currentSection$1,type:currentSection$1,description:nt,task:nt,classes:[]},st=compileData(lastTask,rt);it.startTime=st.startTime,it.endTime=st.endTime,it.id=st.id,it.active=st.active,it.done=st.done,it.crit=st.crit,it.milestone=st.milestone,lastTask=it,tasks$1.push(it)},compileTasks$1=function(){const nt=function(it){const st=rawTasks$1[it];let _t="";switch(rawTasks$1[it].raw.startTime.type){case"prevTaskEnd":{const xt=findTaskById(st.prevTaskId);st.startTime=xt.endTime;break}case"getStartDate":_t=getStartDate(void 0,dateFormat,rawTasks$1[it].raw.startTime.startData),_t&&(rawTasks$1[it].startTime=_t);break}return rawTasks$1[it].startTime&&(rawTasks$1[it].endTime=getEndDate(rawTasks$1[it].startTime,dateFormat,rawTasks$1[it].raw.endTime.data,inclusiveEndDates),rawTasks$1[it].endTime&&(rawTasks$1[it].processed=!0,rawTasks$1[it].manualEndTime=dayjs(rawTasks$1[it].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),checkTaskDates(rawTasks$1[it],dateFormat,excludes,includes))),rawTasks$1[it].processed};let rt=!0;for(const[it,st]of rawTasks$1.entries())nt(it),rt=rt&&st.processed;return rt},setLink=function(nt,rt){let it=rt;getConfig$1().securityLevel!=="loose"&&(it=dist.sanitizeUrl(rt)),nt.split(",").forEach(function(st){findTaskById(st)!==void 0&&(pushFun(st,()=>{window.open(it,"_self")}),links[st]=it)}),setClass(nt,"clickable")},setClass=function(nt,rt){nt.split(",").forEach(function(it){let st=findTaskById(it);st!==void 0&&st.classes.push(rt)})},setClickFun=function(nt,rt,it){if(getConfig$1().securityLevel!=="loose"||rt===void 0)return;let st=[];if(typeof it=="string"){st=it.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let xt=0;xt<st.length;xt++){let Et=st[xt].trim();Et.charAt(0)==='"'&&Et.charAt(Et.length-1)==='"'&&(Et=Et.substr(1,Et.length-2)),st[xt]=Et}}st.length===0&&st.push(nt),findTaskById(nt)!==void 0&&pushFun(nt,()=>{utils.runFunc(rt,...st)})},pushFun=function(nt,rt){funs.push(function(){const it=document.querySelector(`[id="${nt}"]`);it!==null&&it.addEventListener("click",function(){rt()})},function(){const it=document.querySelector(`[id="${nt}-text"]`);it!==null&&it.addEventListener("click",function(){rt()})})},setClickEvent=function(nt,rt,it){nt.split(",").forEach(function(st){setClickFun(st,rt,it)}),setClass(nt,"clickable")},bindFunctions=function(nt){funs.forEach(function(rt){rt(nt)})},ganttDb={parseDirective:parseDirective$5,getConfig:()=>getConfig$1().gantt,clear:clear$5,setDateFormat,getDateFormat,enableInclusiveEndDates,endDatesAreInclusive,enableTopAxis,topAxisEnabled,setAxisFormat,getAxisFormat,setTickInterval,getTickInterval,setTodayMarker,getTodayMarker,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setAccDescription,getAccDescription,addSection:addSection$2,getSections:getSections$2,getTasks:getTasks$1,addTask:addTask$1,findTaskById,addTaskOrg:addTaskOrg$1,setIncludes,getIncludes,setExcludes,getExcludes,setClickEvent,setLink,getLinks,bindFunctions,parseDuration,isInvalidDate};function getTaskTags(nt,rt,it){let st=!0;for(;st;)st=!1,it.forEach(function(_t){const xt="^\\s*"+_t+"\\s*$",Et=new RegExp(xt);nt[0].match(Et)&&(rt[_t]=!0,nt.shift(1),st=!0)})}const setConf$5=function(){log$1.debug("Something is calling, setConf, remove the call")};let w;const draw$8=function(nt,rt,it,st){const _t=getConfig$1().gantt,xt=getConfig$1().securityLevel;let Et;xt==="sandbox"&&(Et=select("#i"+rt));const kt=select(xt==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=xt==="sandbox"?Et.nodes()[0].contentDocument:document,It=Lt.getElementById(rt);w=It.parentElement.offsetWidth,w===void 0&&(w=1200),_t.useWidth!==void 0&&(w=_t.useWidth);const Rt=st.db.getTasks(),Nt=Rt.length*(_t.barHeight+_t.barGap)+2*_t.topPadding;It.setAttribute("viewBox","0 0 "+w+" "+Nt);const Bt=kt.select(`[id="${rt}"]`),Ft=time$1().domain([min$2(Rt,function(Pn){return Pn.startTime}),max$2(Rt,function(Pn){return Pn.endTime})]).rangeRound([0,w-_t.leftPadding-_t.rightPadding]);let Yt=[];for(const Pn of Rt)Yt.push(Pn.type);const Zt=Yt;Yt=wn(Yt);function Wt(Pn,An){const cn=Pn.startTime,Ln=An.startTime;let an=0;return cn>Ln?an=1:cn<Ln&&(an=-1),an}Rt.sort(Wt),Kt(Rt,w,Nt),configureSvgSize(Bt,Nt,w,_t.useMaxWidth),Bt.append("text").text(st.db.getDiagramTitle()).attr("x",w/2).attr("y",_t.titleTopMargin).attr("class","titleText");function Kt(Pn,An,cn){const Ln=_t.barHeight,an=Ln+_t.barGap,zn=_t.topPadding,dn=_t.leftPadding,Fn=linear().domain([0,Yt.length]).range(["#00B9FA","#F95002"]).interpolate(interpolateHcl);on(an,zn,dn,An,cn,Pn,st.db.getExcludes(),st.db.getIncludes()),rn(dn,zn,An,cn),Jt(Pn,an,zn,dn,Ln,Fn,An),ln(an,zn),gn(dn,zn,An,cn)}function Jt(Pn,An,cn,Ln,an,zn,dn){Bt.append("g").selectAll("rect").data(Pn).enter().append("rect").attr("x",0).attr("y",function(Jn,hr){return hr=Jn.order,hr*An+cn-2}).attr("width",function(){return dn-_t.rightPadding/2}).attr("height",An).attr("class",function(Jn){for(const[hr,lr]of Yt.entries())if(Jn.type===lr)return"section section"+hr%_t.numberSectionStyles;return"section section0"});const Fn=Bt.append("g").selectAll("rect").data(Pn).enter(),ir=st.db.getLinks();if(Fn.append("rect").attr("id",function(Jn){return Jn.id}).attr("rx",3).attr("ry",3).attr("x",function(Jn){return Jn.milestone?Ft(Jn.startTime)+Ln+.5*(Ft(Jn.endTime)-Ft(Jn.startTime))-.5*an:Ft(Jn.startTime)+Ln}).attr("y",function(Jn,hr){return hr=Jn.order,hr*An+cn}).attr("width",function(Jn){return Jn.milestone?an:Ft(Jn.renderEndTime||Jn.endTime)-Ft(Jn.startTime)}).attr("height",an).attr("transform-origin",function(Jn,hr){return hr=Jn.order,(Ft(Jn.startTime)+Ln+.5*(Ft(Jn.endTime)-Ft(Jn.startTime))).toString()+"px "+(hr*An+cn+.5*an).toString()+"px"}).attr("class",function(Jn){const hr="task";let lr="";Jn.classes.length>0&&(lr=Jn.classes.join(" "));let cr=0;for(const[Er,ar]of Yt.entries())Jn.type===ar&&(cr=Er%_t.numberSectionStyles);let Cr="";return Jn.active?Jn.crit?Cr+=" activeCrit":Cr=" active":Jn.done?Jn.crit?Cr=" doneCrit":Cr=" done":Jn.crit&&(Cr+=" crit"),Cr.length===0&&(Cr=" task"),Jn.milestone&&(Cr=" milestone "+Cr),Cr+=cr,Cr+=" "+lr,hr+Cr}),Fn.append("text").attr("id",function(Jn){return Jn.id+"-text"}).text(function(Jn){return Jn.task}).attr("font-size",_t.fontSize).attr("x",function(Jn){let hr=Ft(Jn.startTime),lr=Ft(Jn.renderEndTime||Jn.endTime);Jn.milestone&&(hr+=.5*(Ft(Jn.endTime)-Ft(Jn.startTime))-.5*an),Jn.milestone&&(lr=hr+an);const cr=this.getBBox().width;return cr>lr-hr?lr+cr+1.5*_t.leftPadding>dn?hr+Ln-5:lr+Ln+5:(lr-hr)/2+hr+Ln}).attr("y",function(Jn,hr){return hr=Jn.order,hr*An+_t.barHeight/2+(_t.fontSize/2-2)+cn}).attr("text-height",an).attr("class",function(Jn){const hr=Ft(Jn.startTime);let lr=Ft(Jn.endTime);Jn.milestone&&(lr=hr+an);const cr=this.getBBox().width;let Cr="";Jn.classes.length>0&&(Cr=Jn.classes.join(" "));let Er=0;for(const[Fr,mr]of Yt.entries())Jn.type===mr&&(Er=Fr%_t.numberSectionStyles);let ar="";return Jn.active&&(Jn.crit?ar="activeCritText"+Er:ar="activeText"+Er),Jn.done?Jn.crit?ar=ar+" doneCritText"+Er:ar=ar+" doneText"+Er:Jn.crit&&(ar=ar+" critText"+Er),Jn.milestone&&(ar+=" milestoneText"),cr>lr-hr?lr+cr+1.5*_t.leftPadding>dn?Cr+" taskTextOutsideLeft taskTextOutside"+Er+" "+ar:Cr+" taskTextOutsideRight taskTextOutside"+Er+" "+ar+" width-"+cr:Cr+" taskText taskText"+Er+" "+ar+" width-"+cr}),getConfig$1().securityLevel==="sandbox"){let Jn;Jn=select("#i"+rt);const hr=Jn.nodes()[0].contentDocument;Fn.filter(function(lr){return ir[lr.id]!==void 0}).each(function(lr){var cr=hr.querySelector("#"+lr.id),Cr=hr.querySelector("#"+lr.id+"-text");const Er=cr.parentNode;var ar=hr.createElement("a");ar.setAttribute("xlink:href",ir[lr.id]),ar.setAttribute("target","_top"),Er.appendChild(ar),ar.appendChild(cr),ar.appendChild(Cr)})}}function on(Pn,An,cn,Ln,an,zn,dn,Fn){const ir=zn.reduce((Er,{startTime:ar})=>Er?Math.min(Er,ar):ar,0),tr=zn.reduce((Er,{endTime:ar})=>Er?Math.max(Er,ar):ar,0),Jn=st.db.getDateFormat();if(!ir||!tr)return;const hr=[];let lr=null,cr=dayjs(ir);for(;cr.valueOf()<=tr;)st.db.isInvalidDate(cr,Jn,dn,Fn)?lr?lr.end=cr:lr={start:cr,end:cr}:lr&&(hr.push(lr),lr=null),cr=cr.add(1,"d");Bt.append("g").selectAll("rect").data(hr).enter().append("rect").attr("id",function(Er){return"exclude-"+Er.start.format("YYYY-MM-DD")}).attr("x",function(Er){return Ft(Er.start)+cn}).attr("y",_t.gridLineStartPadding).attr("width",function(Er){const ar=Er.end.add(1,"day");return Ft(ar)-Ft(Er.start)}).attr("height",an-An-_t.gridLineStartPadding).attr("transform-origin",function(Er,ar){return(Ft(Er.start)+cn+.5*(Ft(Er.end)-Ft(Er.start))).toString()+"px "+(ar*Pn+.5*an).toString()+"px"}).attr("class","exclude-range")}function rn(Pn,An,cn,Ln){let an=axisBottom(Ft).tickSize(-Ln+An+_t.gridLineStartPadding).tickFormat(timeFormat(st.db.getAxisFormat()||_t.axisFormat||"%Y-%m-%d"));const dn=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(st.db.getTickInterval()||_t.tickInterval);if(dn!==null){const Fn=dn[1];switch(dn[2]){case"minute":an.ticks(timeMinute.every(Fn));break;case"hour":an.ticks(timeHour.every(Fn));break;case"day":an.ticks(timeDay.every(Fn));break;case"week":an.ticks(timeSunday.every(Fn));break;case"month":an.ticks(timeMonth.every(Fn));break}}if(Bt.append("g").attr("class","grid").attr("transform","translate("+Pn+", "+(Ln-50)+")").call(an).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),st.db.topAxisEnabled()||_t.topAxis){let Fn=axisTop(Ft).tickSize(-Ln+An+_t.gridLineStartPadding).tickFormat(timeFormat(st.db.getAxisFormat()||_t.axisFormat||"%Y-%m-%d"));if(dn!==null){const ir=dn[1];switch(dn[2]){case"minute":Fn.ticks(timeMinute.every(ir));break;case"hour":Fn.ticks(timeHour.every(ir));break;case"day":Fn.ticks(timeDay.every(ir));break;case"week":Fn.ticks(timeSunday.every(ir));break;case"month":Fn.ticks(timeMonth.every(ir));break}}Bt.append("g").attr("class","grid").attr("transform","translate("+Pn+", "+An+")").call(Fn).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function ln(Pn,An){const cn=[];let Ln=0;for(const[an,zn]of Yt.entries())cn[an]=[zn,Cn(zn,Zt)];Bt.append("g").selectAll("text").data(cn).enter().append(function(an){const zn=an[0].split(common$1.lineBreakRegex),dn=-(zn.length-1)/2,Fn=Lt.createElementNS("http://www.w3.org/2000/svg","text");Fn.setAttribute("dy",dn+"em");for(const[ir,tr]of zn.entries()){const Jn=Lt.createElementNS("http://www.w3.org/2000/svg","tspan");Jn.setAttribute("alignment-baseline","central"),Jn.setAttribute("x","10"),ir>0&&Jn.setAttribute("dy","1em"),Jn.textContent=tr,Fn.appendChild(Jn)}return Fn}).attr("x",10).attr("y",function(an,zn){if(zn>0)for(let dn=0;dn<zn;dn++)return Ln+=cn[zn-1][1],an[1]*Pn/2+Ln*Pn+An;else return an[1]*Pn/2+An}).attr("font-size",_t.sectionFontSize).attr("font-size",_t.sectionFontSize).attr("class",function(an){for(const[zn,dn]of Yt.entries())if(an[0]===dn)return"sectionTitle sectionTitle"+zn%_t.numberSectionStyles;return"sectionTitle"})}function gn(Pn,An,cn,Ln){const an=st.db.getTodayMarker();if(an==="off")return;const zn=Bt.append("g").attr("class","today"),dn=new Date,Fn=zn.append("line");Fn.attr("x1",Ft(dn)+Pn).attr("x2",Ft(dn)+Pn).attr("y1",_t.titleTopMargin).attr("y2",Ln-_t.titleTopMargin).attr("class","today"),an!==""&&Fn.attr("style",an.replace(/,/g,";"))}function wn(Pn){const An={},cn=[];for(let Ln=0,an=Pn.length;Ln<an;++Ln)Object.prototype.hasOwnProperty.call(An,Pn[Ln])||(An[Pn[Ln]]=!0,cn.push(Pn[Ln]));return cn}function kn(Pn){let An=Pn.length;const cn={};for(;An;)cn[Pn[--An]]=(cn[Pn[An]]||0)+1;return cn}function Cn(Pn,An){return kn(An)[Pn]||0}},ganttRenderer={setConf:setConf$5,draw:draw$8};var parser$5=function(){var nt=function(xt,Et,kt,Lt){for(kt=kt||{},Lt=xt.length;Lt--;kt[xt[Lt]]=Et);return kt},rt=[6,9,10],it={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(Et,kt,Lt,It,Rt,Nt,Bt){switch(Nt.length-1,Rt){case 1:return It;case 4:break;case 6:It.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},nt(rt,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},nt(rt,[2,3]),nt(rt,[2,4]),nt(rt,[2,5]),nt(rt,[2,6])],defaultActions:{4:[2,1]},parseError:function(Et,kt){if(kt.recoverable)this.trace(Et);else{var Lt=new Error(Et);throw Lt.hash=kt,Lt}},parse:function(Et){var kt=this,Lt=[0],It=[],Rt=[null],Nt=[],Bt=this.table,Ft="",Yt=0,Zt=0,Wt=2,Kt=1,Jt=Nt.slice.call(arguments,1),on=Object.create(this.lexer),rn={yy:{}};for(var ln in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ln)&&(rn.yy[ln]=this.yy[ln]);on.setInput(Et,rn.yy),rn.yy.lexer=on,rn.yy.parser=this,typeof on.yylloc>"u"&&(on.yylloc={});var gn=on.yylloc;Nt.push(gn);var wn=on.options&&on.options.ranges;typeof rn.yy.parseError=="function"?this.parseError=rn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function kn(){var tr;return tr=It.pop()||on.lex()||Kt,typeof tr!="number"&&(tr instanceof Array&&(It=tr,tr=It.pop()),tr=kt.symbols_[tr]||tr),tr}for(var Cn,Pn,An,cn,Ln={},an,zn,dn,Fn;;){if(Pn=Lt[Lt.length-1],this.defaultActions[Pn]?An=this.defaultActions[Pn]:((Cn===null||typeof Cn>"u")&&(Cn=kn()),An=Bt[Pn]&&Bt[Pn][Cn]),typeof An>"u"||!An.length||!An[0]){var ir="";Fn=[];for(an in Bt[Pn])this.terminals_[an]&&an>Wt&&Fn.push("'"+this.terminals_[an]+"'");on.showPosition?ir="Parse error on line "+(Yt+1)+`:
`+on.showPosition()+`
Expecting `+Fn.join(", ")+", got '"+(this.terminals_[Cn]||Cn)+"'":ir="Parse error on line "+(Yt+1)+": Unexpected "+(Cn==Kt?"end of input":"'"+(this.terminals_[Cn]||Cn)+"'"),this.parseError(ir,{text:on.match,token:this.terminals_[Cn]||Cn,line:on.yylineno,loc:gn,expected:Fn})}if(An[0]instanceof Array&&An.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Pn+", token: "+Cn);switch(An[0]){case 1:Lt.push(Cn),Rt.push(on.yytext),Nt.push(on.yylloc),Lt.push(An[1]),Cn=null,Zt=on.yyleng,Ft=on.yytext,Yt=on.yylineno,gn=on.yylloc;break;case 2:if(zn=this.productions_[An[1]][1],Ln.$=Rt[Rt.length-zn],Ln._$={first_line:Nt[Nt.length-(zn||1)].first_line,last_line:Nt[Nt.length-1].last_line,first_column:Nt[Nt.length-(zn||1)].first_column,last_column:Nt[Nt.length-1].last_column},wn&&(Ln._$.range=[Nt[Nt.length-(zn||1)].range[0],Nt[Nt.length-1].range[1]]),cn=this.performAction.apply(Ln,[Ft,Zt,Yt,rn.yy,An[1],Rt,Nt].concat(Jt)),typeof cn<"u")return cn;zn&&(Lt=Lt.slice(0,-1*zn*2),Rt=Rt.slice(0,-1*zn),Nt=Nt.slice(0,-1*zn)),Lt.push(this.productions_[An[1]][0]),Rt.push(Ln.$),Nt.push(Ln._$),dn=Bt[Lt[Lt.length-2]][Lt[Lt.length-1]],Lt.push(dn);break;case 3:return!0}}return!0}},st=function(){var xt={EOF:1,parseError:function(kt,Lt){if(this.yy.parser)this.yy.parser.parseError(kt,Lt);else throw new Error(kt)},setInput:function(Et,kt){return this.yy=kt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var kt=Et.match(/(?:\r\n?|\n).*/g);return kt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var kt=Et.length,Lt=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-kt),this.offset-=kt;var It=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Lt.length-1&&(this.yylineno-=Lt.length-1);var Rt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Lt?(Lt.length===It.length?this.yylloc.first_column:0)+It[It.length-Lt.length].length-Lt[0].length:this.yylloc.first_column-kt},this.options.ranges&&(this.yylloc.range=[Rt[0],Rt[0]+this.yyleng-kt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),kt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+kt+"^"},test_match:function(Et,kt){var Lt,It,Rt;if(this.options.backtrack_lexer&&(Rt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Rt.yylloc.range=this.yylloc.range.slice(0))),It=Et[0].match(/(?:\r\n?|\n).*/g),It&&(this.yylineno+=It.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:It?It[It.length-1].length-It[It.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Lt=this.performAction.call(this,this.yy,this,kt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Lt)return Lt;if(this._backtrack){for(var Nt in Rt)this[Nt]=Rt[Nt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,kt,Lt,It;this._more||(this.yytext="",this.match="");for(var Rt=this._currentRules(),Nt=0;Nt<Rt.length;Nt++)if(Lt=this._input.match(this.rules[Rt[Nt]]),Lt&&(!kt||Lt[0].length>kt[0].length)){if(kt=Lt,It=Nt,this.options.backtrack_lexer){if(Et=this.test_match(Lt,Rt[Nt]),Et!==!1)return Et;if(this._backtrack){kt=!1;continue}else return!1}else if(!this.options.flex)break}return kt?(Et=this.test_match(kt,Rt[It]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var kt=this.next();return kt||this.lex()},begin:function(kt){this.conditionStack.push(kt)},popState:function(){var kt=this.conditionStack.length-1;return kt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(kt){return kt=this.conditionStack.length-1-Math.abs(kt||0),kt>=0?this.conditionStack[kt]:"INITIAL"},pushState:function(kt){this.begin(kt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(kt,Lt,It,Rt){switch(It){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return xt}();it.lexer=st;function _t(){this.yy={}}return _t.prototype=it,it.Parser=_t,new _t}();parser$5.parser=parser$5;const infoParser=parser$5;var message="",info=!1;const setMessage=nt=>{log$1.debug("Setting message to: "+nt),message=nt},getMessage=()=>message,setInfo=nt=>{info=nt},getInfo=()=>info,infoDb={setMessage,getMessage,setInfo,getInfo,clear:clear$g},draw$7=(nt,rt,it)=>{try{log$1.debug(`Rendering info diagram
`+nt);const st=getConfig$1().securityLevel;let _t;st==="sandbox"&&(_t=select("#i"+rt));const Et=select(st==="sandbox"?_t.nodes()[0].contentDocument.body:"body").select("#"+rt);Et.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+it),Et.attr("height",100),Et.attr("width",400)}catch(st){log$1.error("Error while rendering info diagram"),log$1.error(st.message)}},infoRenderer={draw:draw$7},infoDetector=nt=>nt.match(/^\s*info/)!==null;var parser$4=function(){var nt=function(gn,wn,kn,Cn){for(kn=kn||{},Cn=gn.length;Cn--;kn[gn[Cn]]=wn);return kn},rt=[1,4],it=[1,5],st=[1,6],_t=[1,7],xt=[1,9],Et=[1,11,13,15,17,19,20,26,27,28,29],kt=[2,5],Lt=[1,6,11,13,15,17,19,20,26,27,28,29],It=[26,27,28],Rt=[2,8],Nt=[1,18],Bt=[1,19],Ft=[1,20],Yt=[1,21],Zt=[1,22],Wt=[1,23],Kt=[1,28],Jt=[6,26,27,28,29],on={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(wn,kn,Cn,Pn,An,cn,Ln){var an=cn.length-1;switch(An){case 4:Pn.setShowData(!0);break;case 7:this.$=cn[an-1];break;case 9:Pn.addSection(cn[an-1],Pn.cleanupValue(cn[an]));break;case 10:this.$=cn[an].trim(),Pn.setDiagramTitle(this.$);break;case 11:this.$=cn[an].trim(),Pn.setAccTitle(this.$);break;case 12:case 13:this.$=cn[an].trim(),Pn.setAccDescription(this.$);break;case 14:Pn.addSection(cn[an].substr(8)),this.$=cn[an].substr(8);break;case 21:Pn.parseDirective("%%{","open_directive");break;case 22:Pn.parseDirective(cn[an],"type_directive");break;case 23:cn[an]=cn[an].trim().replace(/'/g,'"'),Pn.parseDirective(cn[an],"arg_directive");break;case 24:Pn.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:rt,21:8,26:it,27:st,28:_t,29:xt},{1:[3]},{3:10,4:2,5:3,6:rt,21:8,26:it,27:st,28:_t,29:xt},{3:11,4:2,5:3,6:rt,21:8,26:it,27:st,28:_t,29:xt},nt(Et,kt,{7:12,8:[1,13]}),nt(Lt,[2,18]),nt(Lt,[2,19]),nt(Lt,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},nt(It,Rt,{21:8,9:16,10:17,5:24,1:[2,3],11:Nt,13:Bt,15:Ft,17:Yt,19:Zt,20:Wt,29:xt}),nt(Et,kt,{7:25}),{23:26,24:[1,27],32:Kt},nt([24,32],[2,22]),nt(Et,[2,6]),{4:29,26:it,27:st,28:_t},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},nt(It,[2,13]),nt(It,[2,14]),nt(It,[2,15]),nt(It,Rt,{21:8,9:16,10:17,5:24,1:[2,4],11:Nt,13:Bt,15:Ft,17:Yt,19:Zt,20:Wt,29:xt}),nt(Jt,[2,16]),{25:34,31:[1,35]},nt(Jt,[2,24]),nt(Et,[2,7]),nt(It,[2,9]),nt(It,[2,10]),nt(It,[2,11]),nt(It,[2,12]),{23:36,32:Kt},{32:[2,23]},nt(Jt,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(wn,kn){if(kn.recoverable)this.trace(wn);else{var Cn=new Error(wn);throw Cn.hash=kn,Cn}},parse:function(wn){var kn=this,Cn=[0],Pn=[],An=[null],cn=[],Ln=this.table,an="",zn=0,dn=0,Fn=2,ir=1,tr=cn.slice.call(arguments,1),Jn=Object.create(this.lexer),hr={yy:{}};for(var lr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lr)&&(hr.yy[lr]=this.yy[lr]);Jn.setInput(wn,hr.yy),hr.yy.lexer=Jn,hr.yy.parser=this,typeof Jn.yylloc>"u"&&(Jn.yylloc={});var cr=Jn.yylloc;cn.push(cr);var Cr=Jn.options&&Jn.options.ranges;typeof hr.yy.parseError=="function"?this.parseError=hr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Er(){var Rn;return Rn=Pn.pop()||Jn.lex()||ir,typeof Rn!="number"&&(Rn instanceof Array&&(Pn=Rn,Rn=Pn.pop()),Rn=kn.symbols_[Rn]||Rn),Rn}for(var ar,Fr,mr,xr,fr={},gr,er,nn,un;;){if(Fr=Cn[Cn.length-1],this.defaultActions[Fr]?mr=this.defaultActions[Fr]:((ar===null||typeof ar>"u")&&(ar=Er()),mr=Ln[Fr]&&Ln[Fr][ar]),typeof mr>"u"||!mr.length||!mr[0]){var pn="";un=[];for(gr in Ln[Fr])this.terminals_[gr]&&gr>Fn&&un.push("'"+this.terminals_[gr]+"'");Jn.showPosition?pn="Parse error on line "+(zn+1)+`:
`+Jn.showPosition()+`
Expecting `+un.join(", ")+", got '"+(this.terminals_[ar]||ar)+"'":pn="Parse error on line "+(zn+1)+": Unexpected "+(ar==ir?"end of input":"'"+(this.terminals_[ar]||ar)+"'"),this.parseError(pn,{text:Jn.match,token:this.terminals_[ar]||ar,line:Jn.yylineno,loc:cr,expected:un})}if(mr[0]instanceof Array&&mr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Fr+", token: "+ar);switch(mr[0]){case 1:Cn.push(ar),An.push(Jn.yytext),cn.push(Jn.yylloc),Cn.push(mr[1]),ar=null,dn=Jn.yyleng,an=Jn.yytext,zn=Jn.yylineno,cr=Jn.yylloc;break;case 2:if(er=this.productions_[mr[1]][1],fr.$=An[An.length-er],fr._$={first_line:cn[cn.length-(er||1)].first_line,last_line:cn[cn.length-1].last_line,first_column:cn[cn.length-(er||1)].first_column,last_column:cn[cn.length-1].last_column},Cr&&(fr._$.range=[cn[cn.length-(er||1)].range[0],cn[cn.length-1].range[1]]),xr=this.performAction.apply(fr,[an,dn,zn,hr.yy,mr[1],An,cn].concat(tr)),typeof xr<"u")return xr;er&&(Cn=Cn.slice(0,-1*er*2),An=An.slice(0,-1*er),cn=cn.slice(0,-1*er)),Cn.push(this.productions_[mr[1]][0]),An.push(fr.$),cn.push(fr._$),nn=Ln[Cn[Cn.length-2]][Cn[Cn.length-1]],Cn.push(nn);break;case 3:return!0}}return!0}},rn=function(){var gn={EOF:1,parseError:function(kn,Cn){if(this.yy.parser)this.yy.parser.parseError(kn,Cn);else throw new Error(kn)},setInput:function(wn,kn){return this.yy=kn||this.yy||{},this._input=wn,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var wn=this._input[0];this.yytext+=wn,this.yyleng++,this.offset++,this.match+=wn,this.matched+=wn;var kn=wn.match(/(?:\r\n?|\n).*/g);return kn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),wn},unput:function(wn){var kn=wn.length,Cn=wn.split(/(?:\r\n?|\n)/g);this._input=wn+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-kn),this.offset-=kn;var Pn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Cn.length-1&&(this.yylineno-=Cn.length-1);var An=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Cn?(Cn.length===Pn.length?this.yylloc.first_column:0)+Pn[Pn.length-Cn.length].length-Cn[0].length:this.yylloc.first_column-kn},this.options.ranges&&(this.yylloc.range=[An[0],An[0]+this.yyleng-kn]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(wn){this.unput(this.match.slice(wn))},pastInput:function(){var wn=this.matched.substr(0,this.matched.length-this.match.length);return(wn.length>20?"...":"")+wn.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var wn=this.match;return wn.length<20&&(wn+=this._input.substr(0,20-wn.length)),(wn.substr(0,20)+(wn.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var wn=this.pastInput(),kn=new Array(wn.length+1).join("-");return wn+this.upcomingInput()+`
`+kn+"^"},test_match:function(wn,kn){var Cn,Pn,An;if(this.options.backtrack_lexer&&(An={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(An.yylloc.range=this.yylloc.range.slice(0))),Pn=wn[0].match(/(?:\r\n?|\n).*/g),Pn&&(this.yylineno+=Pn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pn?Pn[Pn.length-1].length-Pn[Pn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+wn[0].length},this.yytext+=wn[0],this.match+=wn[0],this.matches=wn,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(wn[0].length),this.matched+=wn[0],Cn=this.performAction.call(this,this.yy,this,kn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Cn)return Cn;if(this._backtrack){for(var cn in An)this[cn]=An[cn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var wn,kn,Cn,Pn;this._more||(this.yytext="",this.match="");for(var An=this._currentRules(),cn=0;cn<An.length;cn++)if(Cn=this._input.match(this.rules[An[cn]]),Cn&&(!kn||Cn[0].length>kn[0].length)){if(kn=Cn,Pn=cn,this.options.backtrack_lexer){if(wn=this.test_match(Cn,An[cn]),wn!==!1)return wn;if(this._backtrack){kn=!1;continue}else return!1}else if(!this.options.flex)break}return kn?(wn=this.test_match(kn,An[Pn]),wn!==!1?wn:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var kn=this.next();return kn||this.lex()},begin:function(kn){this.conditionStack.push(kn)},popState:function(){var kn=this.conditionStack.length-1;return kn>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(kn){return kn=this.conditionStack.length-1-Math.abs(kn||0),kn>=0?this.conditionStack[kn]:"INITIAL"},pushState:function(kn){this.begin(kn)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(kn,Cn,Pn,An){switch(Pn){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return gn}();on.lexer=rn;function ln(){this.yy={}}return ln.prototype=on,on.Parser=ln,new ln}();parser$4.parser=parser$4;const pieParser=parser$4,pieDetector=nt=>nt.match(/^\s*pie/)!==null||nt.match(/^\s*bar/)!==null;let sections$1={},showData=!1;const parseDirective$4=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addSection$1=function(nt,rt){nt=common$1.sanitizeText(nt,getConfig$1()),sections$1[nt]===void 0&&(sections$1[nt]=rt,log$1.debug("Added new section :",nt))},getSections$1=()=>sections$1,setShowData=function(nt){showData=nt},getShowData=function(){return showData},cleanupValue=function(nt){return nt.substring(0,1)===":"&&(nt=nt.substring(1).trim()),Number(nt.trim())},clear$4=function(){sections$1={},showData=!1,clear$g()},pieDb={parseDirective:parseDirective$4,getConfig:()=>getConfig$1().pie,addSection:addSection$1,getSections:getSections$1,cleanupValue,clear:clear$4,setAccTitle,getAccTitle,setDiagramTitle,getDiagramTitle,setShowData,getShowData,getAccDescription,setAccDescription};let conf$5=getConfig$1(),width;const height=450,draw$6=(nt,rt,it,st)=>{try{conf$5=getConfig$1(),log$1.debug(`Rendering info diagram
`+nt);const Jt=getConfig$1().securityLevel;let on;Jt==="sandbox"&&(on=select("#i"+rt));const rn=select(Jt==="sandbox"?on.nodes()[0].contentDocument.body:"body"),ln=Jt==="sandbox"?on.nodes()[0].contentDocument:document;st.db.clear(),st.parser.parse(nt),log$1.debug("Parsed info diagram");const gn=ln.getElementById(rt);width=gn.parentElement.offsetWidth,width===void 0&&(width=1200),conf$5.useWidth!==void 0&&(width=conf$5.useWidth),conf$5.pie.useWidth!==void 0&&(width=conf$5.pie.useWidth);const wn=rn.select("#"+rt);configureSvgSize(wn,height,width,conf$5.pie.useMaxWidth),gn.setAttribute("viewBox","0 0 "+width+" "+height);var _t=40,xt=18,Et=4,kt=Math.min(width,height)/2-_t,Lt=wn.append("g").attr("transform","translate("+width/2+","+height/2+")"),It=st.db.getSections(),Rt=0;Object.keys(It).forEach(function(Cn){Rt+=It[Cn]});const kn=conf$5.themeVariables;var Nt=[kn.pie1,kn.pie2,kn.pie3,kn.pie4,kn.pie5,kn.pie6,kn.pie7,kn.pie8,kn.pie9,kn.pie10,kn.pie11,kn.pie12],Bt=ordinal().range(Nt),Ft=Object.entries(It).map(function(Cn,Pn){return{order:Pn,name:Cn[0],value:Cn[1]}}),Yt=pie().value(function(Cn){return Cn.value}).sort(function(Cn,Pn){return Cn.order-Pn.order}),Zt=Yt(Ft),Wt=arc().innerRadius(0).outerRadius(kt);Lt.selectAll("mySlices").data(Zt).enter().append("path").attr("d",Wt).attr("fill",function(Cn){return Bt(Cn.data.name)}).attr("class","pieCircle"),Lt.selectAll("mySlices").data(Zt).enter().append("text").text(function(Cn){return(Cn.data.value/Rt*100).toFixed(0)+"%"}).attr("transform",function(Cn){return"translate("+Wt.centroid(Cn)+")"}).style("text-anchor","middle").attr("class","slice"),Lt.append("text").text(st.db.getDiagramTitle()).attr("x",0).attr("y",-(height-50)/2).attr("class","pieTitleText");var Kt=Lt.selectAll(".legend").data(Bt.domain()).enter().append("g").attr("class","legend").attr("transform",function(Cn,Pn){const An=xt+Et,cn=An*Bt.domain().length/2,Ln=12*xt,an=Pn*An-cn;return"translate("+Ln+","+an+")"});Kt.append("rect").attr("width",xt).attr("height",xt).style("fill",Bt).style("stroke",Bt),Kt.data(Zt).append("text").attr("x",xt+Et).attr("y",xt-Et).text(function(Cn){return st.db.getShowData()||conf$5.showData||conf$5.pie.showData?Cn.data.name+" ["+Cn.data.value+"]":Cn.data.name})}catch(Jt){log$1.error("Error while rendering info diagram"),log$1.error(Jt)}},pieRenderer={draw:draw$6};var parser$3=function(){var nt=function(Fr,mr,xr,fr){for(xr=xr||{},fr=Fr.length;fr--;xr[Fr[fr]]=mr);return xr},rt=[1,3],it=[1,5],st=[1,6],_t=[1,7],xt=[1,8],Et=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],kt=[1,22],Lt=[2,13],It=[1,26],Rt=[1,27],Nt=[1,28],Bt=[1,29],Ft=[1,30],Yt=[1,31],Zt=[1,24],Wt=[1,32],Kt=[1,33],Jt=[1,36],on=[71,72],rn=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],ln=[1,56],gn=[1,57],wn=[1,58],kn=[1,59],Cn=[1,60],Pn=[1,61],An=[1,62],cn=[62,63],Ln=[1,74],an=[1,70],zn=[1,71],dn=[1,72],Fn=[1,73],ir=[1,75],tr=[1,79],Jn=[1,80],hr=[1,77],lr=[1,78],cr=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Cr={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(mr,xr,fr,gr,er,nn,un){var pn=nn.length-1;switch(er){case 6:this.$=nn[pn].trim(),gr.setAccTitle(this.$);break;case 7:case 8:this.$=nn[pn].trim(),gr.setAccDescription(this.$);break;case 9:gr.parseDirective("%%{","open_directive");break;case 10:gr.parseDirective(nn[pn],"type_directive");break;case 11:nn[pn]=nn[pn].trim().replace(/'/g,'"'),gr.parseDirective(nn[pn],"arg_directive");break;case 12:gr.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:gr.addRequirement(nn[pn-3],nn[pn-4]);break;case 20:gr.setNewReqId(nn[pn-2]);break;case 21:gr.setNewReqText(nn[pn-2]);break;case 22:gr.setNewReqRisk(nn[pn-2]);break;case 23:gr.setNewReqVerifyMethod(nn[pn-2]);break;case 26:this.$=gr.RequirementType.REQUIREMENT;break;case 27:this.$=gr.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=gr.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=gr.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=gr.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=gr.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=gr.RiskLevel.LOW_RISK;break;case 33:this.$=gr.RiskLevel.MED_RISK;break;case 34:this.$=gr.RiskLevel.HIGH_RISK;break;case 35:this.$=gr.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=gr.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=gr.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=gr.VerifyType.VERIFY_TEST;break;case 39:gr.addElement(nn[pn-3]);break;case 40:gr.setNewElementType(nn[pn-2]);break;case 41:gr.setNewElementDocRef(nn[pn-2]);break;case 44:gr.addRelationship(nn[pn-2],nn[pn],nn[pn-4]);break;case 45:gr.addRelationship(nn[pn-2],nn[pn-4],nn[pn]);break;case 46:this.$=gr.Relationships.CONTAINS;break;case 47:this.$=gr.Relationships.COPIES;break;case 48:this.$=gr.Relationships.DERIVES;break;case 49:this.$=gr.Relationships.SATISFIES;break;case 50:this.$=gr.Relationships.VERIFIES;break;case 51:this.$=gr.Relationships.REFINES;break;case 52:this.$=gr.Relationships.TRACES;break}},table:[{3:1,4:2,6:rt,9:4,14:it,16:st,18:_t,19:xt},{1:[3]},{3:10,4:2,5:[1,9],6:rt,9:4,14:it,16:st,18:_t,19:xt},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},nt(Et,[2,8]),{20:[2,9]},{3:16,4:2,6:rt,9:4,14:it,16:st,18:_t,19:xt},{1:[2,2]},{4:21,5:kt,7:17,8:Lt,9:4,14:it,16:st,18:_t,19:xt,23:18,24:19,25:20,26:23,32:25,40:It,41:Rt,42:Nt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Kt},{11:34,12:[1,35],22:Jt},nt([12,22],[2,10]),nt(Et,[2,6]),nt(Et,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:kt,7:38,8:Lt,9:4,14:it,16:st,18:_t,19:xt,23:18,24:19,25:20,26:23,32:25,40:It,41:Rt,42:Nt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Kt},{4:21,5:kt,7:39,8:Lt,9:4,14:it,16:st,18:_t,19:xt,23:18,24:19,25:20,26:23,32:25,40:It,41:Rt,42:Nt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Kt},{4:21,5:kt,7:40,8:Lt,9:4,14:it,16:st,18:_t,19:xt,23:18,24:19,25:20,26:23,32:25,40:It,41:Rt,42:Nt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Kt},{4:21,5:kt,7:41,8:Lt,9:4,14:it,16:st,18:_t,19:xt,23:18,24:19,25:20,26:23,32:25,40:It,41:Rt,42:Nt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Kt},{4:21,5:kt,7:42,8:Lt,9:4,14:it,16:st,18:_t,19:xt,23:18,24:19,25:20,26:23,32:25,40:It,41:Rt,42:Nt,43:Bt,44:Ft,45:Yt,53:Zt,71:Wt,72:Kt},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},nt(on,[2,26]),nt(on,[2,27]),nt(on,[2,28]),nt(on,[2,29]),nt(on,[2,30]),nt(on,[2,31]),nt(rn,[2,55]),nt(rn,[2,56]),nt(Et,[2,4]),{13:51,21:[1,52]},nt(Et,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:ln,65:gn,66:wn,67:kn,68:Cn,69:Pn,70:An},{61:63,64:ln,65:gn,66:wn,67:kn,68:Cn,69:Pn,70:An},{11:64,22:Jt},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},nt(cn,[2,46]),nt(cn,[2,47]),nt(cn,[2,48]),nt(cn,[2,49]),nt(cn,[2,50]),nt(cn,[2,51]),nt(cn,[2,52]),{63:[1,68]},nt(Et,[2,5]),{5:Ln,29:69,30:an,33:zn,35:dn,37:Fn,39:ir},{5:tr,39:Jn,55:76,56:hr,58:lr},{32:81,71:Wt,72:Kt},{32:82,71:Wt,72:Kt},nt(cr,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:Ln,29:87,30:an,33:zn,35:dn,37:Fn,39:ir},nt(cr,[2,25]),nt(cr,[2,39]),{31:[1,88]},{31:[1,89]},{5:tr,39:Jn,55:90,56:hr,58:lr},nt(cr,[2,43]),nt(cr,[2,44]),nt(cr,[2,45]),{32:91,71:Wt,72:Kt},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},nt(cr,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},nt(cr,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:Ln,29:116,30:an,33:zn,35:dn,37:Fn,39:ir},{5:Ln,29:117,30:an,33:zn,35:dn,37:Fn,39:ir},{5:Ln,29:118,30:an,33:zn,35:dn,37:Fn,39:ir},{5:Ln,29:119,30:an,33:zn,35:dn,37:Fn,39:ir},{5:tr,39:Jn,55:120,56:hr,58:lr},{5:tr,39:Jn,55:121,56:hr,58:lr},nt(cr,[2,20]),nt(cr,[2,21]),nt(cr,[2,22]),nt(cr,[2,23]),nt(cr,[2,40]),nt(cr,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(mr,xr){if(xr.recoverable)this.trace(mr);else{var fr=new Error(mr);throw fr.hash=xr,fr}},parse:function(mr){var xr=this,fr=[0],gr=[],er=[null],nn=[],un=this.table,pn="",Rn=0,_n=0,or=2,Vn=1,Wn=nn.slice.call(arguments,1),Hn=Object.create(this.lexer),nr={yy:{}};for(var sr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,sr)&&(nr.yy[sr]=this.yy[sr]);Hn.setInput(mr,nr.yy),nr.yy.lexer=Hn,nr.yy.parser=this,typeof Hn.yylloc>"u"&&(Hn.yylloc={});var pr=Hn.yylloc;nn.push(pr);var vr=Hn.options&&Hn.options.ranges;typeof nr.yy.parseError=="function"?this.parseError=nr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function kr(){var Un;return Un=gr.pop()||Hn.lex()||Vn,typeof Un!="number"&&(Un instanceof Array&&(gr=Un,Un=gr.pop()),Un=xr.symbols_[Un]||Un),Un}for(var si,ui,ii,li,Ei={},wi,Ci,Lr,Tn;;){if(ui=fr[fr.length-1],this.defaultActions[ui]?ii=this.defaultActions[ui]:((si===null||typeof si>"u")&&(si=kr()),ii=un[ui]&&un[ui][si]),typeof ii>"u"||!ii.length||!ii[0]){var En="";Tn=[];for(wi in un[ui])this.terminals_[wi]&&wi>or&&Tn.push("'"+this.terminals_[wi]+"'");Hn.showPosition?En="Parse error on line "+(Rn+1)+`:
`+Hn.showPosition()+`
Expecting `+Tn.join(", ")+", got '"+(this.terminals_[si]||si)+"'":En="Parse error on line "+(Rn+1)+": Unexpected "+(si==Vn?"end of input":"'"+(this.terminals_[si]||si)+"'"),this.parseError(En,{text:Hn.match,token:this.terminals_[si]||si,line:Hn.yylineno,loc:pr,expected:Tn})}if(ii[0]instanceof Array&&ii.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ui+", token: "+si);switch(ii[0]){case 1:fr.push(si),er.push(Hn.yytext),nn.push(Hn.yylloc),fr.push(ii[1]),si=null,_n=Hn.yyleng,pn=Hn.yytext,Rn=Hn.yylineno,pr=Hn.yylloc;break;case 2:if(Ci=this.productions_[ii[1]][1],Ei.$=er[er.length-Ci],Ei._$={first_line:nn[nn.length-(Ci||1)].first_line,last_line:nn[nn.length-1].last_line,first_column:nn[nn.length-(Ci||1)].first_column,last_column:nn[nn.length-1].last_column},vr&&(Ei._$.range=[nn[nn.length-(Ci||1)].range[0],nn[nn.length-1].range[1]]),li=this.performAction.apply(Ei,[pn,_n,Rn,nr.yy,ii[1],er,nn].concat(Wn)),typeof li<"u")return li;Ci&&(fr=fr.slice(0,-1*Ci*2),er=er.slice(0,-1*Ci),nn=nn.slice(0,-1*Ci)),fr.push(this.productions_[ii[1]][0]),er.push(Ei.$),nn.push(Ei._$),Lr=un[fr[fr.length-2]][fr[fr.length-1]],fr.push(Lr);break;case 3:return!0}}return!0}},Er=function(){var Fr={EOF:1,parseError:function(xr,fr){if(this.yy.parser)this.yy.parser.parseError(xr,fr);else throw new Error(xr)},setInput:function(mr,xr){return this.yy=xr||this.yy||{},this._input=mr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var mr=this._input[0];this.yytext+=mr,this.yyleng++,this.offset++,this.match+=mr,this.matched+=mr;var xr=mr.match(/(?:\r\n?|\n).*/g);return xr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),mr},unput:function(mr){var xr=mr.length,fr=mr.split(/(?:\r\n?|\n)/g);this._input=mr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-xr),this.offset-=xr;var gr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),fr.length-1&&(this.yylineno-=fr.length-1);var er=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:fr?(fr.length===gr.length?this.yylloc.first_column:0)+gr[gr.length-fr.length].length-fr[0].length:this.yylloc.first_column-xr},this.options.ranges&&(this.yylloc.range=[er[0],er[0]+this.yyleng-xr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(mr){this.unput(this.match.slice(mr))},pastInput:function(){var mr=this.matched.substr(0,this.matched.length-this.match.length);return(mr.length>20?"...":"")+mr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var mr=this.match;return mr.length<20&&(mr+=this._input.substr(0,20-mr.length)),(mr.substr(0,20)+(mr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var mr=this.pastInput(),xr=new Array(mr.length+1).join("-");return mr+this.upcomingInput()+`
`+xr+"^"},test_match:function(mr,xr){var fr,gr,er;if(this.options.backtrack_lexer&&(er={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(er.yylloc.range=this.yylloc.range.slice(0))),gr=mr[0].match(/(?:\r\n?|\n).*/g),gr&&(this.yylineno+=gr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:gr?gr[gr.length-1].length-gr[gr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+mr[0].length},this.yytext+=mr[0],this.match+=mr[0],this.matches=mr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(mr[0].length),this.matched+=mr[0],fr=this.performAction.call(this,this.yy,this,xr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),fr)return fr;if(this._backtrack){for(var nn in er)this[nn]=er[nn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var mr,xr,fr,gr;this._more||(this.yytext="",this.match="");for(var er=this._currentRules(),nn=0;nn<er.length;nn++)if(fr=this._input.match(this.rules[er[nn]]),fr&&(!xr||fr[0].length>xr[0].length)){if(xr=fr,gr=nn,this.options.backtrack_lexer){if(mr=this.test_match(fr,er[nn]),mr!==!1)return mr;if(this._backtrack){xr=!1;continue}else return!1}else if(!this.options.flex)break}return xr?(mr=this.test_match(xr,er[gr]),mr!==!1?mr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var xr=this.next();return xr||this.lex()},begin:function(xr){this.conditionStack.push(xr)},popState:function(){var xr=this.conditionStack.length-1;return xr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(xr){return xr=this.conditionStack.length-1-Math.abs(xr||0),xr>=0?this.conditionStack[xr]:"INITIAL"},pushState:function(xr){this.begin(xr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(xr,fr,gr,er){switch(gr){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return fr.yytext=fr.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return Fr}();Cr.lexer=Er;function ar(){this.yy={}}return ar.prototype=Cr,Cr.Parser=ar,new ar}();parser$3.parser=parser$3;const requirementParser=parser$3,requirementDetector=nt=>nt.match(/^\s*requirement(Diagram)?/)!==null;let relations=[],latestRequirement={},requirements={},latestElement={},elements={};const RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective$3=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addRequirement=(nt,rt)=>(requirements[nt]===void 0&&(requirements[nt]={name:nt,type:rt,id:latestRequirement.id,text:latestRequirement.text,risk:latestRequirement.risk,verifyMethod:latestRequirement.verifyMethod}),latestRequirement={},requirements[nt]),getRequirements=()=>requirements,setNewReqId=nt=>{latestRequirement!==void 0&&(latestRequirement.id=nt)},setNewReqText=nt=>{latestRequirement!==void 0&&(latestRequirement.text=nt)},setNewReqRisk=nt=>{latestRequirement!==void 0&&(latestRequirement.risk=nt)},setNewReqVerifyMethod=nt=>{latestRequirement!==void 0&&(latestRequirement.verifyMethod=nt)},addElement=nt=>(elements[nt]===void 0&&(elements[nt]={name:nt,type:latestElement.type,docRef:latestElement.docRef},log$1.info("Added new requirement: ",nt)),latestElement={},elements[nt]),getElements=()=>elements,setNewElementType=nt=>{latestElement!==void 0&&(latestElement.type=nt)},setNewElementDocRef=nt=>{latestElement!==void 0&&(latestElement.docRef=nt)},addRelationship=(nt,rt,it)=>{relations.push({type:nt,src:rt,dst:it})},getRelationships=()=>relations,clear$3=()=>{relations=[],latestRequirement={},requirements={},latestElement={},elements={},clear$g()},requirementDb={RequirementType,RiskLevel,VerifyType,Relationships,parseDirective:parseDirective$3,getConfig:()=>getConfig$1().req,addRequirement,getRequirements,setNewReqId,setNewReqText,setNewReqRisk,setNewReqVerifyMethod,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addElement,getElements,setNewElementType,setNewElementDocRef,addRelationship,getRelationships,clear:clear$3},ReqMarkers={CONTAINS:"contains",ARROW:"arrow"},insertLineEndings=(nt,rt)=>{let it=nt.append("defs").append("marker").attr("id",ReqMarkers.CONTAINS+"_line_ending").attr("refX",0).attr("refY",rt.line_height/2).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("g");it.append("circle").attr("cx",rt.line_height/2).attr("cy",rt.line_height/2).attr("r",rt.line_height/2).attr("fill","none"),it.append("line").attr("x1",0).attr("x2",rt.line_height).attr("y1",rt.line_height/2).attr("y2",rt.line_height/2).attr("stroke-width",1),it.append("line").attr("y1",0).attr("y2",rt.line_height).attr("x1",rt.line_height/2).attr("x2",rt.line_height/2).attr("stroke-width",1),nt.append("defs").append("marker").attr("id",ReqMarkers.ARROW+"_line_ending").attr("refX",rt.line_height).attr("refY",.5*rt.line_height).attr("markerWidth",rt.line_height).attr("markerHeight",rt.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${rt.line_height},${rt.line_height/2}
      M${rt.line_height},${rt.line_height/2}
      L0,${rt.line_height}`).attr("stroke-width",1)},markers={ReqMarkers,insertLineEndings};let conf$4={},relCnt=0;const newRectNode=(nt,rt)=>nt.insert("rect","#"+rt).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",conf$4.rect_min_width+"px").attr("height",conf$4.rect_min_height+"px"),newTitleNode=(nt,rt,it)=>{let st=conf$4.rect_min_width/2,_t=nt.append("text").attr("class","req reqLabel reqTitle").attr("id",rt).attr("x",st).attr("y",conf$4.rect_padding).attr("dominant-baseline","hanging"),xt=0;it.forEach(It=>{xt==0?_t.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",0).text(It):_t.append("tspan").attr("text-anchor","middle").attr("x",conf$4.rect_min_width/2).attr("dy",conf$4.line_height*.75).text(It),xt++});let Et=1.5*conf$4.rect_padding,kt=xt*conf$4.line_height*.75,Lt=Et+kt;return nt.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",conf$4.rect_min_width).attr("y1",Lt).attr("y2",Lt),{titleNode:_t,y:Lt}},newBodyNode=(nt,rt,it,st)=>{let _t=nt.append("text").attr("class","req reqLabel").attr("id",rt).attr("x",conf$4.rect_padding).attr("y",st).attr("dominant-baseline","hanging"),xt=0;const Et=30;let kt=[];return it.forEach(Lt=>{let It=Lt.length;for(;It>Et&&xt<3;){let Rt=Lt.substring(0,Et);Lt=Lt.substring(Et,Lt.length),It=Lt.length,kt[kt.length]=Rt,xt++}if(xt==3){let Rt=kt[kt.length-1];kt[kt.length-1]=Rt.substring(0,Rt.length-4)+"..."}else kt[kt.length]=Lt;xt=0}),kt.forEach(Lt=>{_t.append("tspan").attr("x",conf$4.rect_padding).attr("dy",conf$4.line_height).text(Lt)}),_t},addEdgeLabel=(nt,rt,it,st)=>{const _t=rt.node().getTotalLength(),xt=rt.node().getPointAtLength(_t*.5),Et="rel"+relCnt;relCnt++;const Lt=nt.append("text").attr("class","req relationshipLabel").attr("id",Et).attr("x",xt.x).attr("y",xt.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(st).node().getBBox();nt.insert("rect","#"+Et).attr("class","req reqLabelBox").attr("x",xt.x-Lt.width/2).attr("y",xt.y-Lt.height/2).attr("width",Lt.width).attr("height",Lt.height).attr("fill","white").attr("fill-opacity","85%")},drawRelationshipFromLayout=function(nt,rt,it,st,_t){const xt=it.edge(elementString(rt.src),elementString(rt.dst)),Et=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}),kt=nt.insert("path","#"+st).attr("class","er relationshipLine").attr("d",Et(xt.points)).attr("fill","none");rt.type==_t.db.Relationships.CONTAINS?kt.attr("marker-start","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+rt.type+"_line_ending)"):(kt.attr("stroke-dasharray","10,7"),kt.attr("marker-end","url("+common$1.getUrl(conf$4.arrowMarkerAbsolute)+"#"+markers.ReqMarkers.ARROW+"_line_ending)")),addEdgeLabel(nt,kt,conf$4,`<<${rt.type}>>`)},drawReqs=(nt,rt,it)=>{Object.keys(nt).forEach(st=>{let _t=nt[st];st=elementString(st),log$1.info("Added new requirement: ",st);const xt=it.append("g").attr("id",st),Et="req-"+st,kt=newRectNode(xt,Et);let Lt=newTitleNode(xt,st+"_title",[`<<${_t.type}>>`,`${_t.name}`]);newBodyNode(xt,st+"_body",[`Id: ${_t.id}`,`Text: ${_t.text}`,`Risk: ${_t.risk}`,`Verification: ${_t.verifyMethod}`],Lt.y);const It=kt.node().getBBox();rt.setNode(st,{width:It.width,height:It.height,shape:"rect",id:st})})},drawElements=(nt,rt,it)=>{Object.keys(nt).forEach(st=>{let _t=nt[st];const xt=elementString(st),Et=it.append("g").attr("id",xt),kt="element-"+xt,Lt=newRectNode(Et,kt);let It=newTitleNode(Et,kt+"_title",["<<Element>>",`${st}`]);newBodyNode(Et,kt+"_body",[`Type: ${_t.type||"Not Specified"}`,`Doc Ref: ${_t.docRef||"None"}`],It.y);const Rt=Lt.node().getBBox();rt.setNode(xt,{width:Rt.width,height:Rt.height,shape:"rect",id:xt})})},addRelationships=(nt,rt)=>(nt.forEach(function(it){let st=elementString(it.src),_t=elementString(it.dst);rt.setEdge(st,_t,{relationship:it})}),nt),adjustEntities=function(nt,rt){rt.nodes().forEach(function(it){it!==void 0&&rt.node(it)!==void 0&&(nt.select("#"+it),nt.select("#"+it).attr("transform","translate("+(rt.node(it).x-rt.node(it).width/2)+","+(rt.node(it).y-rt.node(it).height/2)+" )"))})},elementString=nt=>nt.replace(/\s/g,"").replace(/\./g,"_"),draw$5=(nt,rt,it,st)=>{conf$4=getConfig$1().requirement,st.db.clear(),st.parser.parse(nt);const _t=conf$4.securityLevel;let xt;_t==="sandbox"&&(xt=select("#i"+rt));const kt=select(_t==="sandbox"?xt.nodes()[0].contentDocument.body:"body").select(`[id='${rt}']`);markers.insertLineEndings(kt,conf$4);const Lt=new Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:conf$4.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let It=st.db.getRequirements(),Rt=st.db.getElements(),Nt=st.db.getRelationships();drawReqs(It,Lt,kt),drawElements(Rt,Lt,kt),addRelationships(Nt,Lt),layout(Lt),adjustEntities(kt,Lt),Nt.forEach(function(Wt){drawRelationshipFromLayout(kt,Wt,Lt,rt,st)});const Bt=conf$4.rect_padding,Ft=kt.node().getBBox(),Yt=Ft.width+Bt*2,Zt=Ft.height+Bt*2;configureSvgSize(kt,Zt,Yt,conf$4.useMaxWidth),kt.attr("viewBox",`${Ft.x-Bt} ${Ft.y-Bt} ${Yt} ${Zt}`)},requirementRenderer={draw:draw$5};var parser$2=function(){var nt=function(xr,fr,gr,er){for(gr=gr||{},er=xr.length;er--;gr[xr[er]]=fr);return gr},rt=[1,2],it=[1,3],st=[1,5],_t=[1,7],xt=[2,5],Et=[1,15],kt=[1,17],Lt=[1,19],It=[1,21],Rt=[1,22],Nt=[1,23],Bt=[1,29],Ft=[1,30],Yt=[1,31],Zt=[1,32],Wt=[1,33],Kt=[1,34],Jt=[1,35],on=[1,36],rn=[1,37],ln=[1,38],gn=[1,39],wn=[1,40],kn=[1,42],Cn=[1,43],Pn=[1,45],An=[1,46],cn=[1,47],Ln=[1,48],an=[1,49],zn=[1,50],dn=[1,53],Fn=[1,4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],ir=[4,5,21,54,56],tr=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],Jn=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,53,54,56,57,62,63,64,65,73,83],hr=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,52,54,56,57,62,63,64,65,73,83],lr=[4,5,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,54,56,57,62,63,64,65,73,83],cr=[71,72,73],Cr=[1,125],Er=[1,4,5,7,19,21,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,51,52,53,54,56,57,62,63,64,65,73,83],ar={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,box_section:11,box_line:12,participant_statement:13,openDirective:14,typeDirective:15,closeDirective:16,":":17,argDirective:18,box:19,restOfLine:20,end:21,signal:22,autonumber:23,NUM:24,off:25,activate:26,actor:27,deactivate:28,note_statement:29,links_statement:30,link_statement:31,properties_statement:32,details_statement:33,title:34,legacy_title:35,acc_title:36,acc_title_value:37,acc_descr:38,acc_descr_value:39,acc_descr_multiline_value:40,loop:41,rect:42,opt:43,alt:44,else_sections:45,par:46,par_sections:47,critical:48,option_sections:49,break:50,option:51,and:52,else:53,participant:54,AS:55,participant_actor:56,note:57,placement:58,text2:59,over:60,actor_pair:61,links:62,link:63,properties:64,details:65,spaceList:66,",":67,left_of:68,right_of:69,signaltype:70,"+":71,"-":72,ACTOR:73,SOLID_OPEN_ARROW:74,DOTTED_OPEN_ARROW:75,SOLID_ARROW:76,DOTTED_ARROW:77,SOLID_CROSS:78,DOTTED_CROSS:79,SOLID_POINT:80,DOTTED_POINT:81,TXT:82,open_directive:83,type_directive:84,arg_directive:85,close_directive:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",17:":",19:"box",20:"restOfLine",21:"end",23:"autonumber",24:"NUM",25:"off",26:"activate",28:"deactivate",34:"title",35:"legacy_title",36:"acc_title",37:"acc_title_value",38:"acc_descr",39:"acc_descr_value",40:"acc_descr_multiline_value",41:"loop",42:"rect",43:"opt",44:"alt",46:"par",48:"critical",50:"break",51:"option",52:"and",53:"else",54:"participant",55:"AS",56:"participant_actor",57:"note",60:"over",62:"links",63:"link",64:"properties",65:"details",67:",",68:"left_of",69:"right_of",71:"+",72:"-",73:"ACTOR",74:"SOLID_OPEN_ARROW",75:"DOTTED_OPEN_ARROW",76:"SOLID_ARROW",77:"DOTTED_ARROW",78:"SOLID_CROSS",79:"DOTTED_CROSS",80:"SOLID_POINT",81:"DOTTED_POINT",82:"TXT",83:"open_directive",84:"type_directive",85:"arg_directive",86:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[11,0],[11,2],[12,2],[12,1],[12,1],[6,4],[6,6],[10,1],[10,4],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[49,1],[49,4],[47,1],[47,4],[45,1],[45,4],[13,5],[13,3],[13,5],[13,3],[29,4],[29,4],[30,3],[31,3],[32,3],[33,3],[66,2],[66,1],[61,3],[61,1],[58,1],[58,1],[22,5],[22,5],[22,4],[27,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[70,1],[59,1],[14,1],[15,1],[18,1],[16,1]],performAction:function(fr,gr,er,nn,un,pn,Rn){var _n=pn.length-1;switch(un){case 4:return nn.apply(pn[_n]),pn[_n];case 5:case 10:this.$=[];break;case 6:case 11:pn[_n-1].push(pn[_n]),this.$=pn[_n-1];break;case 7:case 8:case 12:case 13:this.$=pn[_n];break;case 9:case 14:this.$=[];break;case 18:pn[_n-1].unshift({type:"boxStart",boxData:nn.parseBoxData(pn[_n-2])}),pn[_n-1].push({type:"boxEnd",boxText:pn[_n-2]}),this.$=pn[_n-1];break;case 20:this.$={type:"sequenceIndex",sequenceIndex:Number(pn[_n-2]),sequenceIndexStep:Number(pn[_n-1]),sequenceVisible:!0,signalType:nn.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceIndex:Number(pn[_n-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:nn.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:nn.LINETYPE.AUTONUMBER};break;case 23:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:nn.LINETYPE.AUTONUMBER};break;case 24:this.$={type:"activeStart",signalType:nn.LINETYPE.ACTIVE_START,actor:pn[_n-1]};break;case 25:this.$={type:"activeEnd",signalType:nn.LINETYPE.ACTIVE_END,actor:pn[_n-1]};break;case 31:nn.setDiagramTitle(pn[_n].substring(6)),this.$=pn[_n].substring(6);break;case 32:nn.setDiagramTitle(pn[_n].substring(7)),this.$=pn[_n].substring(7);break;case 33:this.$=pn[_n].trim(),nn.setAccTitle(this.$);break;case 34:case 35:this.$=pn[_n].trim(),nn.setAccDescription(this.$);break;case 36:pn[_n-1].unshift({type:"loopStart",loopText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.LOOP_START}),pn[_n-1].push({type:"loopEnd",loopText:pn[_n-2],signalType:nn.LINETYPE.LOOP_END}),this.$=pn[_n-1];break;case 37:pn[_n-1].unshift({type:"rectStart",color:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.RECT_START}),pn[_n-1].push({type:"rectEnd",color:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.RECT_END}),this.$=pn[_n-1];break;case 38:pn[_n-1].unshift({type:"optStart",optText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.OPT_START}),pn[_n-1].push({type:"optEnd",optText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.OPT_END}),this.$=pn[_n-1];break;case 39:pn[_n-1].unshift({type:"altStart",altText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.ALT_START}),pn[_n-1].push({type:"altEnd",signalType:nn.LINETYPE.ALT_END}),this.$=pn[_n-1];break;case 40:pn[_n-1].unshift({type:"parStart",parText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.PAR_START}),pn[_n-1].push({type:"parEnd",signalType:nn.LINETYPE.PAR_END}),this.$=pn[_n-1];break;case 41:pn[_n-1].unshift({type:"criticalStart",criticalText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.CRITICAL_START}),pn[_n-1].push({type:"criticalEnd",signalType:nn.LINETYPE.CRITICAL_END}),this.$=pn[_n-1];break;case 42:pn[_n-1].unshift({type:"breakStart",breakText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.BREAK_START}),pn[_n-1].push({type:"breakEnd",optText:nn.parseMessage(pn[_n-2]),signalType:nn.LINETYPE.BREAK_END}),this.$=pn[_n-1];break;case 45:this.$=pn[_n-3].concat([{type:"option",optionText:nn.parseMessage(pn[_n-1]),signalType:nn.LINETYPE.CRITICAL_OPTION},pn[_n]]);break;case 47:this.$=pn[_n-3].concat([{type:"and",parText:nn.parseMessage(pn[_n-1]),signalType:nn.LINETYPE.PAR_AND},pn[_n]]);break;case 49:this.$=pn[_n-3].concat([{type:"else",altText:nn.parseMessage(pn[_n-1]),signalType:nn.LINETYPE.ALT_ELSE},pn[_n]]);break;case 50:pn[_n-3].type="addParticipant",pn[_n-3].description=nn.parseMessage(pn[_n-1]),this.$=pn[_n-3];break;case 51:pn[_n-1].type="addParticipant",this.$=pn[_n-1];break;case 52:pn[_n-3].type="addActor",pn[_n-3].description=nn.parseMessage(pn[_n-1]),this.$=pn[_n-3];break;case 53:pn[_n-1].type="addActor",this.$=pn[_n-1];break;case 54:this.$=[pn[_n-1],{type:"addNote",placement:pn[_n-2],actor:pn[_n-1].actor,text:pn[_n]}];break;case 55:pn[_n-2]=[].concat(pn[_n-1],pn[_n-1]).slice(0,2),pn[_n-2][0]=pn[_n-2][0].actor,pn[_n-2][1]=pn[_n-2][1].actor,this.$=[pn[_n-1],{type:"addNote",placement:nn.PLACEMENT.OVER,actor:pn[_n-2].slice(0,2),text:pn[_n]}];break;case 56:this.$=[pn[_n-1],{type:"addLinks",actor:pn[_n-1].actor,text:pn[_n]}];break;case 57:this.$=[pn[_n-1],{type:"addALink",actor:pn[_n-1].actor,text:pn[_n]}];break;case 58:this.$=[pn[_n-1],{type:"addProperties",actor:pn[_n-1].actor,text:pn[_n]}];break;case 59:this.$=[pn[_n-1],{type:"addDetails",actor:pn[_n-1].actor,text:pn[_n]}];break;case 62:this.$=[pn[_n-2],pn[_n]];break;case 63:this.$=pn[_n];break;case 64:this.$=nn.PLACEMENT.LEFTOF;break;case 65:this.$=nn.PLACEMENT.RIGHTOF;break;case 66:this.$=[pn[_n-4],pn[_n-1],{type:"addMessage",from:pn[_n-4].actor,to:pn[_n-1].actor,signalType:pn[_n-3],msg:pn[_n]},{type:"activeStart",signalType:nn.LINETYPE.ACTIVE_START,actor:pn[_n-1]}];break;case 67:this.$=[pn[_n-4],pn[_n-1],{type:"addMessage",from:pn[_n-4].actor,to:pn[_n-1].actor,signalType:pn[_n-3],msg:pn[_n]},{type:"activeEnd",signalType:nn.LINETYPE.ACTIVE_END,actor:pn[_n-4]}];break;case 68:this.$=[pn[_n-3],pn[_n-1],{type:"addMessage",from:pn[_n-3].actor,to:pn[_n-1].actor,signalType:pn[_n-2],msg:pn[_n]}];break;case 69:this.$={type:"addParticipant",actor:pn[_n]};break;case 70:this.$=nn.LINETYPE.SOLID_OPEN;break;case 71:this.$=nn.LINETYPE.DOTTED_OPEN;break;case 72:this.$=nn.LINETYPE.SOLID;break;case 73:this.$=nn.LINETYPE.DOTTED;break;case 74:this.$=nn.LINETYPE.SOLID_CROSS;break;case 75:this.$=nn.LINETYPE.DOTTED_CROSS;break;case 76:this.$=nn.LINETYPE.SOLID_POINT;break;case 77:this.$=nn.LINETYPE.DOTTED_POINT;break;case 78:this.$=nn.parseMessage(pn[_n].trim().substring(1));break;case 79:nn.parseDirective("%%{","open_directive");break;case 80:nn.parseDirective(pn[_n],"type_directive");break;case 81:pn[_n]=pn[_n].trim().replace(/'/g,'"'),nn.parseDirective(pn[_n],"arg_directive");break;case 82:nn.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:rt,5:it,6:4,7:st,14:6,83:_t},{1:[3]},{3:8,4:rt,5:it,6:4,7:st,14:6,83:_t},{3:9,4:rt,5:it,6:4,7:st,14:6,83:_t},{3:10,4:rt,5:it,6:4,7:st,14:6,83:_t},nt([1,4,5,19,23,26,28,34,35,36,38,40,41,42,43,44,46,48,50,54,56,57,62,63,64,65,73,83],xt,{8:11}),{15:12,84:[1,13]},{84:[2,79]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{16:51,17:[1,52],86:dn},nt([17,86],[2,80]),nt(Fn,[2,6]),{6:41,10:54,13:18,14:6,19:Lt,22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},nt(Fn,[2,8]),nt(Fn,[2,9]),nt(Fn,[2,17]),{20:[1,55]},{5:[1,56]},{5:[1,59],24:[1,57],25:[1,58]},{27:60,73:zn},{27:61,73:zn},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},{5:[1,66]},nt(Fn,[2,31]),nt(Fn,[2,32]),{37:[1,67]},{39:[1,68]},nt(Fn,[2,35]),{20:[1,69]},{20:[1,70]},{20:[1,71]},{20:[1,72]},{20:[1,73]},{20:[1,74]},{20:[1,75]},nt(Fn,[2,43]),{27:76,73:zn},{27:77,73:zn},{70:78,74:[1,79],75:[1,80],76:[1,81],77:[1,82],78:[1,83],79:[1,84],80:[1,85],81:[1,86]},{58:87,60:[1,88],68:[1,89],69:[1,90]},{27:91,73:zn},{27:92,73:zn},{27:93,73:zn},{27:94,73:zn},nt([5,55,67,74,75,76,77,78,79,80,81,82],[2,69]),{5:[1,95]},{18:96,85:[1,97]},{5:[2,82]},nt(Fn,[2,7]),nt(ir,[2,10],{11:98}),nt(Fn,[2,19]),{5:[1,100],24:[1,99]},{5:[1,101]},nt(Fn,[2,23]),{5:[1,102]},{5:[1,103]},nt(Fn,[2,26]),nt(Fn,[2,27]),nt(Fn,[2,28]),nt(Fn,[2,29]),nt(Fn,[2,30]),nt(Fn,[2,33]),nt(Fn,[2,34]),nt(tr,xt,{8:104}),nt(tr,xt,{8:105}),nt(tr,xt,{8:106}),nt(Jn,xt,{45:107,8:108}),nt(hr,xt,{47:109,8:110}),nt(lr,xt,{49:111,8:112}),nt(tr,xt,{8:113}),{5:[1,115],55:[1,114]},{5:[1,117],55:[1,116]},{27:120,71:[1,118],72:[1,119],73:zn},nt(cr,[2,70]),nt(cr,[2,71]),nt(cr,[2,72]),nt(cr,[2,73]),nt(cr,[2,74]),nt(cr,[2,75]),nt(cr,[2,76]),nt(cr,[2,77]),{27:121,73:zn},{27:123,61:122,73:zn},{73:[2,64]},{73:[2,65]},{59:124,82:Cr},{59:126,82:Cr},{59:127,82:Cr},{59:128,82:Cr},nt(Er,[2,15]),{16:129,86:dn},{86:[2,81]},{4:[1,132],5:[1,134],12:131,13:133,21:[1,130],54:kn,56:Cn},{5:[1,135]},nt(Fn,[2,21]),nt(Fn,[2,22]),nt(Fn,[2,24]),nt(Fn,[2,25]),{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,136],22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,137],22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,138],22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{21:[1,139]},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[2,48],22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,53:[1,140],54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{21:[1,141]},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[2,46],22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,52:[1,142],54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{21:[1,143]},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[2,44],22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,51:[1,144],54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{4:Et,5:kt,6:41,9:14,10:16,13:18,14:6,19:Lt,21:[1,145],22:20,23:It,26:Rt,27:44,28:Nt,29:24,30:25,31:26,32:27,33:28,34:Bt,35:Ft,36:Yt,38:Zt,40:Wt,41:Kt,42:Jt,43:on,44:rn,46:ln,48:gn,50:wn,54:kn,56:Cn,57:Pn,62:An,63:cn,64:Ln,65:an,73:zn,83:_t},{20:[1,146]},nt(Fn,[2,51]),{20:[1,147]},nt(Fn,[2,53]),{27:148,73:zn},{27:149,73:zn},{59:150,82:Cr},{59:151,82:Cr},{59:152,82:Cr},{67:[1,153],82:[2,63]},{5:[2,56]},{5:[2,78]},{5:[2,57]},{5:[2,58]},{5:[2,59]},{5:[1,154]},nt(Fn,[2,18]),nt(ir,[2,11]),{13:155,54:kn,56:Cn},nt(ir,[2,13]),nt(ir,[2,14]),nt(Fn,[2,20]),nt(Fn,[2,36]),nt(Fn,[2,37]),nt(Fn,[2,38]),nt(Fn,[2,39]),{20:[1,156]},nt(Fn,[2,40]),{20:[1,157]},nt(Fn,[2,41]),{20:[1,158]},nt(Fn,[2,42]),{5:[1,159]},{5:[1,160]},{59:161,82:Cr},{59:162,82:Cr},{5:[2,68]},{5:[2,54]},{5:[2,55]},{27:163,73:zn},nt(Er,[2,16]),nt(ir,[2,12]),nt(Jn,xt,{8:108,45:164}),nt(hr,xt,{8:110,47:165}),nt(lr,xt,{8:112,49:166}),nt(Fn,[2,50]),nt(Fn,[2,52]),{5:[2,66]},{5:[2,67]},{82:[2,62]},{21:[2,49]},{21:[2,47]},{21:[2,45]}],defaultActions:{7:[2,79],8:[2,1],9:[2,2],10:[2,3],53:[2,82],89:[2,64],90:[2,65],97:[2,81],124:[2,56],125:[2,78],126:[2,57],127:[2,58],128:[2,59],150:[2,68],151:[2,54],152:[2,55],161:[2,66],162:[2,67],163:[2,62],164:[2,49],165:[2,47],166:[2,45]},parseError:function(fr,gr){if(gr.recoverable)this.trace(fr);else{var er=new Error(fr);throw er.hash=gr,er}},parse:function(fr){var gr=this,er=[0],nn=[],un=[null],pn=[],Rn=this.table,_n="",or=0,Vn=0,Wn=2,Hn=1,nr=pn.slice.call(arguments,1),sr=Object.create(this.lexer),pr={yy:{}};for(var vr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,vr)&&(pr.yy[vr]=this.yy[vr]);sr.setInput(fr,pr.yy),pr.yy.lexer=sr,pr.yy.parser=this,typeof sr.yylloc>"u"&&(sr.yylloc={});var kr=sr.yylloc;pn.push(kr);var si=sr.options&&sr.options.ranges;typeof pr.yy.parseError=="function"?this.parseError=pr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ui(){var _r;return _r=nn.pop()||sr.lex()||Hn,typeof _r!="number"&&(_r instanceof Array&&(nn=_r,_r=nn.pop()),_r=gr.symbols_[_r]||_r),_r}for(var ii,li,Ei,wi,Ci={},Lr,Tn,En,Un;;){if(li=er[er.length-1],this.defaultActions[li]?Ei=this.defaultActions[li]:((ii===null||typeof ii>"u")&&(ii=ui()),Ei=Rn[li]&&Rn[li][ii]),typeof Ei>"u"||!Ei.length||!Ei[0]){var qn="";Un=[];for(Lr in Rn[li])this.terminals_[Lr]&&Lr>Wn&&Un.push("'"+this.terminals_[Lr]+"'");sr.showPosition?qn="Parse error on line "+(or+1)+`:
`+sr.showPosition()+`
Expecting `+Un.join(", ")+", got '"+(this.terminals_[ii]||ii)+"'":qn="Parse error on line "+(or+1)+": Unexpected "+(ii==Hn?"end of input":"'"+(this.terminals_[ii]||ii)+"'"),this.parseError(qn,{text:sr.match,token:this.terminals_[ii]||ii,line:sr.yylineno,loc:kr,expected:Un})}if(Ei[0]instanceof Array&&Ei.length>1)throw new Error("Parse Error: multiple actions possible at state: "+li+", token: "+ii);switch(Ei[0]){case 1:er.push(ii),un.push(sr.yytext),pn.push(sr.yylloc),er.push(Ei[1]),ii=null,Vn=sr.yyleng,_n=sr.yytext,or=sr.yylineno,kr=sr.yylloc;break;case 2:if(Tn=this.productions_[Ei[1]][1],Ci.$=un[un.length-Tn],Ci._$={first_line:pn[pn.length-(Tn||1)].first_line,last_line:pn[pn.length-1].last_line,first_column:pn[pn.length-(Tn||1)].first_column,last_column:pn[pn.length-1].last_column},si&&(Ci._$.range=[pn[pn.length-(Tn||1)].range[0],pn[pn.length-1].range[1]]),wi=this.performAction.apply(Ci,[_n,Vn,or,pr.yy,Ei[1],un,pn].concat(nr)),typeof wi<"u")return wi;Tn&&(er=er.slice(0,-1*Tn*2),un=un.slice(0,-1*Tn),pn=pn.slice(0,-1*Tn)),er.push(this.productions_[Ei[1]][0]),un.push(Ci.$),pn.push(Ci._$),En=Rn[er[er.length-2]][er[er.length-1]],er.push(En);break;case 3:return!0}}return!0}},Fr=function(){var xr={EOF:1,parseError:function(gr,er){if(this.yy.parser)this.yy.parser.parseError(gr,er);else throw new Error(gr)},setInput:function(fr,gr){return this.yy=gr||this.yy||{},this._input=fr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var fr=this._input[0];this.yytext+=fr,this.yyleng++,this.offset++,this.match+=fr,this.matched+=fr;var gr=fr.match(/(?:\r\n?|\n).*/g);return gr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),fr},unput:function(fr){var gr=fr.length,er=fr.split(/(?:\r\n?|\n)/g);this._input=fr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-gr),this.offset-=gr;var nn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),er.length-1&&(this.yylineno-=er.length-1);var un=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:er?(er.length===nn.length?this.yylloc.first_column:0)+nn[nn.length-er.length].length-er[0].length:this.yylloc.first_column-gr},this.options.ranges&&(this.yylloc.range=[un[0],un[0]+this.yyleng-gr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(fr){this.unput(this.match.slice(fr))},pastInput:function(){var fr=this.matched.substr(0,this.matched.length-this.match.length);return(fr.length>20?"...":"")+fr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var fr=this.match;return fr.length<20&&(fr+=this._input.substr(0,20-fr.length)),(fr.substr(0,20)+(fr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var fr=this.pastInput(),gr=new Array(fr.length+1).join("-");return fr+this.upcomingInput()+`
`+gr+"^"},test_match:function(fr,gr){var er,nn,un;if(this.options.backtrack_lexer&&(un={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(un.yylloc.range=this.yylloc.range.slice(0))),nn=fr[0].match(/(?:\r\n?|\n).*/g),nn&&(this.yylineno+=nn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:nn?nn[nn.length-1].length-nn[nn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+fr[0].length},this.yytext+=fr[0],this.match+=fr[0],this.matches=fr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(fr[0].length),this.matched+=fr[0],er=this.performAction.call(this,this.yy,this,gr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),er)return er;if(this._backtrack){for(var pn in un)this[pn]=un[pn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var fr,gr,er,nn;this._more||(this.yytext="",this.match="");for(var un=this._currentRules(),pn=0;pn<un.length;pn++)if(er=this._input.match(this.rules[un[pn]]),er&&(!gr||er[0].length>gr[0].length)){if(gr=er,nn=pn,this.options.backtrack_lexer){if(fr=this.test_match(er,un[pn]),fr!==!1)return fr;if(this._backtrack){gr=!1;continue}else return!1}else if(!this.options.flex)break}return gr?(fr=this.test_match(gr,un[nn]),fr!==!1?fr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var gr=this.next();return gr||this.lex()},begin:function(gr){this.conditionStack.push(gr)},popState:function(){var gr=this.conditionStack.length-1;return gr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(gr){return gr=this.conditionStack.length-1-Math.abs(gr||0),gr>=0?this.conditionStack[gr]:"INITIAL"},pushState:function(gr){this.begin(gr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(gr,er,nn,un){switch(nn){case 0:return this.begin("open_directive"),83;case 1:return this.begin("type_directive"),84;case 2:return this.popState(),this.begin("arg_directive"),17;case 3:return this.popState(),this.popState(),86;case 4:return 85;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 24;case 12:return this.begin("LINE"),19;case 13:return this.begin("ID"),54;case 14:return this.begin("ID"),56;case 15:return er.yytext=er.yytext.trim(),this.begin("ALIAS"),73;case 16:return this.popState(),this.popState(),this.begin("LINE"),55;case 17:return this.popState(),this.popState(),5;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),44;case 22:return this.begin("LINE"),53;case 23:return this.begin("LINE"),46;case 24:return this.begin("LINE"),52;case 25:return this.begin("LINE"),48;case 26:return this.begin("LINE"),51;case 27:return this.begin("LINE"),50;case 28:return this.popState(),20;case 29:return 21;case 30:return 68;case 31:return 69;case 32:return 62;case 33:return 63;case 34:return 64;case 35:return 65;case 36:return 60;case 37:return 57;case 38:return this.begin("ID"),26;case 39:return this.begin("ID"),28;case 40:return 34;case 41:return 35;case 42:return this.begin("acc_title"),36;case 43:return this.popState(),"acc_title_value";case 44:return this.begin("acc_descr"),38;case 45:return this.popState(),"acc_descr_value";case 46:this.begin("acc_descr_multiline");break;case 47:this.popState();break;case 48:return"acc_descr_multiline_value";case 49:return 7;case 50:return 23;case 51:return 25;case 52:return 67;case 53:return 5;case 54:return er.yytext=er.yytext.trim(),73;case 55:return 76;case 56:return 77;case 57:return 74;case 58:return 75;case 59:return 78;case 60:return 79;case 61:return 80;case 62:return 81;case 63:return 82;case 64:return 71;case 65:return 72;case 66:return 5;case 67:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[47,48],inclusive:!1},acc_descr:{rules:[45],inclusive:!1},acc_title:{rules:[43],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,15],inclusive:!1},ALIAS:{rules:[7,8,16,17],inclusive:!1},LINE:{rules:[7,8,28],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,14,18,19,20,21,22,23,24,25,26,27,29,30,31,32,33,34,35,36,37,38,39,40,41,42,44,46,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return xr}();ar.lexer=Fr;function mr(){this.yy={}}return mr.prototype=ar,ar.Parser=mr,new mr}();parser$2.parser=parser$2;const sequenceParser=parser$2,sequenceDetector=nt=>nt.match(/^\s*sequenceDiagram/)!==null;let prevActor,actors$1={},boxes=[],messages=[],sequenceNumbersEnabled=!1,wrapEnabled,currentBox;const parseDirective$2=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},addBox=function(nt){boxes.push({name:nt.text,wrap:nt.wrap===void 0&&autoWrap()||!!nt.wrap,fill:nt.color,actorKeys:[]}),currentBox=boxes.slice(-1)[0]},addActor=function(nt,rt,it,st){let _t=currentBox;const xt=actors$1[nt];if(xt){if(currentBox&&xt.box&&currentBox!==xt.box)throw new Error("A same participant should only be defined in one Box: "+xt.name+" can't be in '"+xt.box.name+"' and in '"+currentBox.name+"' at the same time.");if(_t=xt.box?xt.box:currentBox,xt.box=_t,xt&&rt===xt.name&&it==null)return}(it==null||it.text==null)&&(it={text:rt,wrap:null,type:st}),(st==null||it.text==null)&&(it={text:rt,wrap:null,type:st}),actors$1[nt]={box:_t,name:rt,description:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:st||"participant"},prevActor&&actors$1[prevActor]&&(actors$1[prevActor].nextActor=nt),currentBox&&currentBox.actorKeys.push(nt),prevActor=nt},activationCount=nt=>{let rt,it=0;for(rt=0;rt<messages.length;rt++)messages[rt].type===LINETYPE.ACTIVE_START&&messages[rt].from.actor===nt&&it++,messages[rt].type===LINETYPE.ACTIVE_END&&messages[rt].from.actor===nt&&it--;return it},addMessage=function(nt,rt,it,st){messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,answer:st})},addSignal=function(nt,rt,it={text:void 0,wrap:void 0},st){if(st===LINETYPE.ACTIVE_END&&activationCount(nt.actor)<1){let xt=new Error("Trying to inactivate an inactive participant ("+nt.actor+")");throw xt.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},xt}return messages.push({from:nt,to:rt,message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:st}),!0},hasAtLeastOneBox=function(){return boxes.length>0},hasAtLeastOneBoxWithTitle=function(){return boxes.some(nt=>nt.name)},getMessages=function(){return messages},getBoxes=function(){return boxes},getActors$1=function(){return actors$1},getActor=function(nt){return actors$1[nt]},getActorKeys=function(){return Object.keys(actors$1)},enableSequenceNumbers=function(){sequenceNumbersEnabled=!0},disableSequenceNumbers=function(){sequenceNumbersEnabled=!1},showSequenceNumbers=()=>sequenceNumbersEnabled,setWrap=function(nt){wrapEnabled=nt},autoWrap=()=>wrapEnabled!==void 0?wrapEnabled:getConfig$1().sequence.wrap,clear$2=function(){actors$1={},boxes=[],messages=[],sequenceNumbersEnabled=!1,clear$g()},parseMessage=function(nt){const rt=nt.trim(),it={text:rt.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:rt.match(/^:?wrap:/)!==null?!0:rt.match(/^:?nowrap:/)!==null?!1:void 0};return log$1.debug("parseMessage:",it),it},parseBoxData=function(nt){const rt=nt.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let it=rt!=null&&rt[1]?rt[1].trim():"transparent",st=rt!=null&&rt[2]?rt[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",it)||(it="transparent",st=nt.trim());else{const xt=new Option().style;xt.color=it,xt.color!==it&&(it="transparent",st=nt.trim())}return{color:it,text:st!==void 0?sanitizeText$5(st.replace(/^:?(?:no)?wrap:/,""),getConfig$1()):void 0,wrap:st!==void 0?st.match(/^:?wrap:/)!==null?!0:st.match(/^:?nowrap:/)!==null?!1:void 0:void 0}},LINETYPE={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},ARROWTYPE={FILLED:0,OPEN:1},PLACEMENT={LEFTOF:0,RIGHTOF:1,OVER:2},addNote=function(nt,rt,it){it.text,it.wrap===void 0&&autoWrap()||it.wrap;const st=[].concat(nt,nt);messages.push({from:st[0],to:st[1],message:it.text,wrap:it.wrap===void 0&&autoWrap()||!!it.wrap,type:LINETYPE.NOTE,placement:rt})},addLinks=function(nt,rt){const it=getActor(nt);try{let st=sanitizeText$5(rt.text,getConfig$1());st=st.replace(/&amp;/g,"&"),st=st.replace(/&equals;/g,"=");const _t=JSON.parse(st);insertLinks(it,_t)}catch(st){log$1.error("error while parsing actor link text",st)}},addALink=function(nt,rt){const it=getActor(nt);try{const Et={};let kt=sanitizeText$5(rt.text,getConfig$1());var st=kt.indexOf("@");kt=kt.replace(/&amp;/g,"&"),kt=kt.replace(/&equals;/g,"=");var _t=kt.slice(0,st-1).trim(),xt=kt.slice(st+1).trim();Et[_t]=xt,insertLinks(it,Et)}catch(Et){log$1.error("error while parsing actor link text",Et)}};function insertLinks(nt,rt){if(nt.links==null)nt.links=rt;else for(let it in rt)nt.links[it]=rt[it]}const addProperties=function(nt,rt){const it=getActor(nt);try{let st=sanitizeText$5(rt.text,getConfig$1());const _t=JSON.parse(st);insertProperties(it,_t)}catch(st){log$1.error("error while parsing actor properties text",st)}};function insertProperties(nt,rt){if(nt.properties==null)nt.properties=rt;else for(let it in rt)nt.properties[it]=rt[it]}function boxEnd(){currentBox=void 0}const addDetails=function(nt,rt){const it=getActor(nt),st=document.getElementById(rt.text);try{const _t=st.innerHTML,xt=JSON.parse(_t);xt.properties&&insertProperties(it,xt.properties),xt.links&&insertLinks(it,xt.links)}catch(_t){log$1.error("error while parsing actor details text",_t)}},getActorProperty=function(nt,rt){if(nt!==void 0&&nt.properties!==void 0)return nt.properties[rt]},apply=function(nt){if(Array.isArray(nt))nt.forEach(function(rt){apply(rt)});else switch(nt.type){case"sequenceIndex":messages.push({from:void 0,to:void 0,message:{start:nt.sequenceIndex,step:nt.sequenceIndexStep,visible:nt.sequenceVisible},wrap:!1,type:nt.signalType});break;case"addParticipant":addActor(nt.actor,nt.actor,nt.description,"participant");break;case"addActor":addActor(nt.actor,nt.actor,nt.description,"actor");break;case"activeStart":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"activeEnd":addSignal(nt.actor,void 0,void 0,nt.signalType);break;case"addNote":addNote(nt.actor,nt.placement,nt.text);break;case"addLinks":addLinks(nt.actor,nt.text);break;case"addALink":addALink(nt.actor,nt.text);break;case"addProperties":addProperties(nt.actor,nt.text);break;case"addDetails":addDetails(nt.actor,nt.text);break;case"addMessage":addSignal(nt.from,nt.to,nt.msg,nt.signalType);break;case"boxStart":addBox(nt.boxData);break;case"boxEnd":boxEnd();break;case"loopStart":addSignal(void 0,void 0,nt.loopText,nt.signalType);break;case"loopEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"rectStart":addSignal(void 0,void 0,nt.color,nt.signalType);break;case"rectEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"optStart":addSignal(void 0,void 0,nt.optText,nt.signalType);break;case"optEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"altStart":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"else":addSignal(void 0,void 0,nt.altText,nt.signalType);break;case"altEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"setAccTitle":setAccTitle(nt.text);break;case"parStart":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"and":addSignal(void 0,void 0,nt.parText,nt.signalType);break;case"parEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"criticalStart":addSignal(void 0,void 0,nt.criticalText,nt.signalType);break;case"option":addSignal(void 0,void 0,nt.optionText,nt.signalType);break;case"criticalEnd":addSignal(void 0,void 0,void 0,nt.signalType);break;case"breakStart":addSignal(void 0,void 0,nt.breakText,nt.signalType);break;case"breakEnd":addSignal(void 0,void 0,void 0,nt.signalType);break}},sequenceDb={addActor,addMessage,addSignal,addLinks,addDetails,addProperties,autoWrap,setWrap,enableSequenceNumbers,disableSequenceNumbers,showSequenceNumbers,getMessages,getActors:getActors$1,getActor,getActorKeys,getActorProperty,getAccTitle,getBoxes,getDiagramTitle,setDiagramTitle,parseDirective:parseDirective$2,getConfig:()=>getConfig$1().sequence,clear:clear$2,parseMessage,parseBoxData,LINETYPE,ARROWTYPE,PLACEMENT,addNote,setAccTitle,apply,setAccDescription,getAccDescription,hasAtLeastOneBox,hasAtLeastOneBoxWithTitle};let interactionFunctions=[];const addFunction=nt=>{interactionFunctions.push(nt)},attachFunctions=()=>{interactionFunctions.forEach(nt=>{nt()}),interactionFunctions=[]},drawRect$1=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},addPopupInteraction=(nt,rt)=>{addFunction(()=>{const it=document.querySelectorAll(nt);it.length!==0&&(it[0].addEventListener("mouseover",function(){popupMenuUpFunc("actor"+rt+"_popup")}),it[0].addEventListener("mouseout",function(){popupMenuDownFunc("actor"+rt+"_popup")}))})},drawPopup=function(nt,rt,it,st,_t){if(rt.links===void 0||rt.links===null||Object.keys(rt.links).length===0)return{height:0,width:0};const xt=rt.links,Et=rt.actorCnt,kt=rt.rectData;var Lt="none";_t&&(Lt="block !important");const It=nt.append("g");It.attr("id","actor"+Et+"_popup"),It.attr("class","actorPopupMenu"),It.attr("display",Lt),addPopupInteraction("#actor"+Et+"_popup",Et);var Rt="";kt.class!==void 0&&(Rt=" "+kt.class);let Nt=kt.width>it?kt.width:it;const Bt=It.append("rect");if(Bt.attr("class","actorPopupMenuPanel"+Rt),Bt.attr("x",kt.x),Bt.attr("y",kt.height),Bt.attr("fill",kt.fill),Bt.attr("stroke",kt.stroke),Bt.attr("width",Nt),Bt.attr("height",kt.height),Bt.attr("rx",kt.rx),Bt.attr("ry",kt.ry),xt!=null){var Ft=20;for(let Wt in xt){var Yt=It.append("a"),Zt=dist.sanitizeUrl(xt[Wt]);Yt.attr("xlink:href",Zt),Yt.attr("target","_blank"),_drawMenuItemTextCandidateFunc(st)(Wt,Yt,kt.x+10,kt.height+Ft,Nt,20,{class:"actor"},st),Ft+=30}}return Bt.attr("height",Ft),{height:kt.height+Ft,width:Nt}},drawImage=function(nt,rt,it,st){const _t=nt.append("image");_t.attr("x",rt),_t.attr("y",it);var xt=dist.sanitizeUrl(st);_t.attr("xlink:href",xt)},drawEmbeddedImage=function(nt,rt,it,st){const _t=nt.append("use");_t.attr("x",rt),_t.attr("y",it);var xt=dist.sanitizeUrl(st);_t.attr("xlink:href","#"+xt)},popupMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'block'; }"},popdownMenu=function(nt){return"var pu = document.getElementById('"+nt+"'); if (pu != null) { pu.style.display = 'none'; }"},popupMenuUpFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="block")},popupMenuDownFunc=function(nt){var rt=document.getElementById(nt);rt!=null&&(rt.style.display="none")},drawText$1=function(nt,rt){let it=0,st=0;const _t=rt.text.split(common$1.lineBreakRegex),[xt,Et]=parseFontSize(rt.fontSize);let kt=[],Lt=0,It=()=>rt.y;if(rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0)switch(rt.valign){case"top":case"start":It=()=>Math.round(rt.y+rt.textMargin);break;case"middle":case"center":It=()=>Math.round(rt.y+(it+st+rt.textMargin)/2);break;case"bottom":case"end":It=()=>Math.round(rt.y+(it+st+2*rt.textMargin)-rt.textMargin);break}if(rt.anchor!==void 0&&rt.textMargin!==void 0&&rt.width!==void 0)switch(rt.anchor){case"left":case"start":rt.x=Math.round(rt.x+rt.textMargin),rt.anchor="start",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"middle":case"center":rt.x=Math.round(rt.x+rt.width/2),rt.anchor="middle",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break;case"right":case"end":rt.x=Math.round(rt.x+rt.width-rt.textMargin),rt.anchor="end",rt.dominantBaseline="middle",rt.alignmentBaseline="middle";break}for(let[Rt,Nt]of _t.entries()){rt.textMargin!==void 0&&rt.textMargin===0&&xt!==void 0&&(Lt=Rt*xt);const Bt=nt.append("text");if(Bt.attr("x",rt.x),Bt.attr("y",It()),rt.anchor!==void 0&&Bt.attr("text-anchor",rt.anchor).attr("dominant-baseline",rt.dominantBaseline).attr("alignment-baseline",rt.alignmentBaseline),rt.fontFamily!==void 0&&Bt.style("font-family",rt.fontFamily),Et!==void 0&&Bt.style("font-size",Et),rt.fontWeight!==void 0&&Bt.style("font-weight",rt.fontWeight),rt.fill!==void 0&&Bt.attr("fill",rt.fill),rt.class!==void 0&&Bt.attr("class",rt.class),rt.dy!==void 0?Bt.attr("dy",rt.dy):Lt!==0&&Bt.attr("dy",Lt),rt.tspan){const Ft=Bt.append("tspan");Ft.attr("x",rt.x),rt.fill!==void 0&&Ft.attr("fill",rt.fill),Ft.text(Nt)}else Bt.text(Nt);rt.valign!==void 0&&rt.textMargin!==void 0&&rt.textMargin>0&&(st+=(Bt._groups||Bt)[0][0].getBBox().height,it=st),kt.push(Bt)}return kt},drawLabel$1=function(nt,rt){function it(_t,xt,Et,kt,Lt){return _t+","+xt+" "+(_t+Et)+","+xt+" "+(_t+Et)+","+(xt+kt-Lt)+" "+(_t+Et-Lt*1.2)+","+(xt+kt)+" "+_t+","+(xt+kt)}const st=nt.append("polygon");return st.attr("points",it(rt.x,rt.y,rt.width,rt.height,7)),st.attr("class","labelBox"),rt.y=rt.y+rt.height/2,drawText$1(nt,rt),st};let actorCnt=-1;const fixLifeLineHeights=(nt,rt)=>{!nt.selectAll||nt.selectAll(".actor-line").attr("class","200").attr("y2",rt-55)},drawActorTypeParticipant=function(nt,rt,it,st){const _t=rt.x+rt.width/2,xt=rt.y+5,Et=nt.append("g");var kt=Et;st||(actorCnt++,kt.append("line").attr("id","actor"+actorCnt).attr("x1",_t).attr("y1",xt).attr("x2",_t).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),kt=Et.append("g"),rt.actorCnt=actorCnt,rt.links!=null&&(kt.attr("id","root-"+actorCnt),addPopupInteraction("#root-"+actorCnt,actorCnt)));const Lt=getNoteRect$1();var It="actor";rt.properties!=null&&rt.properties.class?It=rt.properties.class:Lt.fill="#eaeaea",Lt.x=rt.x,Lt.y=rt.y,Lt.width=rt.width,Lt.height=rt.height,Lt.class=It,Lt.rx=3,Lt.ry=3;const Rt=drawRect$1(kt,Lt);if(rt.rectData=Lt,rt.properties!=null&&rt.properties.icon){const Bt=rt.properties.icon.trim();Bt.charAt(0)==="@"?drawEmbeddedImage(kt,Lt.x+Lt.width-20,Lt.y+10,Bt.substr(1)):drawImage(kt,Lt.x+Lt.width-20,Lt.y+10,Bt)}_drawTextCandidateFunc$1(it)(rt.description,kt,Lt.x,Lt.y,Lt.width,Lt.height,{class:"actor"},it);let Nt=rt.height;if(Rt.node){const Bt=Rt.node().getBBox();rt.height=Bt.height,Nt=Bt.height}return Nt},drawActorTypeActor=function(nt,rt,it,st){const _t=rt.x+rt.width/2,xt=rt.y+80;st||(actorCnt++,nt.append("line").attr("id","actor"+actorCnt).attr("x1",_t).attr("y1",xt).attr("x2",_t).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const Et=nt.append("g");Et.attr("class","actor-man");const kt=getNoteRect$1();kt.x=rt.x,kt.y=rt.y,kt.fill="#eaeaea",kt.width=rt.width,kt.height=rt.height,kt.class="actor",kt.rx=3,kt.ry=3,Et.append("line").attr("id","actor-man-torso"+actorCnt).attr("x1",_t).attr("y1",rt.y+25).attr("x2",_t).attr("y2",rt.y+45),Et.append("line").attr("id","actor-man-arms"+actorCnt).attr("x1",_t-18).attr("y1",rt.y+33).attr("x2",_t+18).attr("y2",rt.y+33),Et.append("line").attr("x1",_t-18).attr("y1",rt.y+60).attr("x2",_t).attr("y2",rt.y+45),Et.append("line").attr("x1",_t).attr("y1",rt.y+45).attr("x2",_t+16).attr("y2",rt.y+60);const Lt=Et.append("circle");Lt.attr("cx",rt.x+rt.width/2),Lt.attr("cy",rt.y+10),Lt.attr("r",15),Lt.attr("width",rt.width),Lt.attr("height",rt.height);const It=Et.node().getBBox();return rt.height=It.height,_drawTextCandidateFunc$1(it)(rt.description,Et,kt.x,kt.y+35,kt.width,kt.height,{class:"actor"},it),rt.height},drawActor=function(nt,rt,it,st){switch(rt.type){case"actor":return drawActorTypeActor(nt,rt,it,st);case"participant":return drawActorTypeParticipant(nt,rt,it,st)}},drawBox=function(nt,rt,it){const _t=nt.append("g");drawBackgroundRect$1(_t,rt),rt.name&&_drawTextCandidateFunc$1(it)(rt.name,_t,rt.x,rt.y+(rt.textMaxHeight||0)/2,rt.width,0,{class:"text"},it),_t.lower()},anchorElement=function(nt){return nt.append("g")},drawActivation=function(nt,rt,it,st,_t){const xt=getNoteRect$1(),Et=rt.anchored;xt.x=rt.startx,xt.y=rt.starty,xt.class="activation"+_t%3,xt.width=rt.stopx-rt.startx,xt.height=it-rt.starty,drawRect$1(Et,xt)},drawLoop=function(nt,rt,it,st){const{boxMargin:_t,boxTextMargin:xt,labelBoxHeight:Et,labelBoxWidth:kt,messageFontFamily:Lt,messageFontSize:It,messageFontWeight:Rt}=st,Nt=nt.append("g"),Bt=function(Zt,Wt,Kt,Jt){return Nt.append("line").attr("x1",Zt).attr("y1",Wt).attr("x2",Kt).attr("y2",Jt).attr("class","loopLine")};Bt(rt.startx,rt.starty,rt.stopx,rt.starty),Bt(rt.stopx,rt.starty,rt.stopx,rt.stopy),Bt(rt.startx,rt.stopy,rt.stopx,rt.stopy),Bt(rt.startx,rt.starty,rt.startx,rt.stopy),rt.sections!==void 0&&rt.sections.forEach(function(Zt){Bt(rt.startx,Zt.y,rt.stopx,Zt.y).style("stroke-dasharray","3, 3")});let Ft=getTextObj$1();Ft.text=it,Ft.x=rt.startx,Ft.y=rt.starty,Ft.fontFamily=Lt,Ft.fontSize=It,Ft.fontWeight=Rt,Ft.anchor="middle",Ft.valign="middle",Ft.tspan=!1,Ft.width=kt||50,Ft.height=Et||20,Ft.textMargin=xt,Ft.class="labelText",drawLabel$1(Nt,Ft),Ft=getTextObj$1(),Ft.text=rt.title,Ft.x=rt.startx+kt/2+(rt.stopx-rt.startx)/2,Ft.y=rt.starty+_t+xt,Ft.anchor="middle",Ft.valign="middle",Ft.textMargin=xt,Ft.class="loopText",Ft.fontFamily=Lt,Ft.fontSize=It,Ft.fontWeight=Rt,Ft.wrap=!0;let Yt=drawText$1(Nt,Ft);return rt.sectionTitles!==void 0&&rt.sectionTitles.forEach(function(Zt,Wt){if(Zt.message){Ft.text=Zt.message,Ft.x=rt.startx+(rt.stopx-rt.startx)/2,Ft.y=rt.sections[Wt].y+_t+xt,Ft.class="loopText",Ft.anchor="middle",Ft.valign="middle",Ft.tspan=!1,Ft.fontFamily=Lt,Ft.fontSize=It,Ft.fontWeight=Rt,Ft.wrap=rt.wrap,Yt=drawText$1(Nt,Ft);let Kt=Math.round(Yt.map(Jt=>(Jt._groups||Jt)[0][0].getBBox().height).reduce((Jt,on)=>Jt+on));rt.sections[Wt].height+=Kt-(_t+xt)}}),rt.height=Math.round(rt.stopy-rt.starty),Nt},drawBackgroundRect$1=function(nt,rt){drawRect$1(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,stroke:rt.stroke,class:"rect"}).lower()},insertDatabaseIcon=function(nt){nt.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon=function(nt){nt.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon=function(nt){nt.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},insertArrowHead=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowFilledHead=function(nt){nt.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertSequenceNumber=function(nt){nt.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead=function(nt){nt.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},getTextObj$1=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},getNoteRect$1=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc$1=function(){function nt(_t,xt,Et,kt,Lt,It,Rt){const Nt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt+It/2+5).style("text-anchor","middle").text(_t);st(Nt,Rt)}function rt(_t,xt,Et,kt,Lt,It,Rt,Nt){const{actorFontSize:Bt,actorFontFamily:Ft,actorFontWeight:Yt}=Nt,[Zt,Wt]=parseFontSize(Bt),Kt=_t.split(common$1.lineBreakRegex);for(let Jt=0;Jt<Kt.length;Jt++){const on=Jt*Zt-Zt*(Kt.length-1)/2,rn=xt.append("text").attr("x",Et+Lt/2).attr("y",kt).style("text-anchor","middle").style("font-size",Wt).style("font-weight",Yt).style("font-family",Ft);rn.append("tspan").attr("x",Et+Lt/2).attr("dy",on).text(Kt[Jt]),rn.attr("y",kt+It/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(rn,Rt)}}function it(_t,xt,Et,kt,Lt,It,Rt,Nt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",It).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(_t),rt(_t,Bt,Et,kt,Lt,It,Rt,Nt),st(Yt,Rt)}function st(_t,xt){for(const Et in xt)xt.hasOwnProperty(Et)&&_t.attr(Et,xt[Et])}return function(_t){return _t.textPlacement==="fo"?it:_t.textPlacement==="old"?nt:rt}}(),_drawMenuItemTextCandidateFunc=function(){function nt(_t,xt,Et,kt,Lt,It,Rt){const Nt=xt.append("text").attr("x",Et).attr("y",kt).style("text-anchor","start").text(_t);st(Nt,Rt)}function rt(_t,xt,Et,kt,Lt,It,Rt,Nt){const{actorFontSize:Bt,actorFontFamily:Ft,actorFontWeight:Yt}=Nt,Zt=_t.split(common$1.lineBreakRegex);for(let Wt=0;Wt<Zt.length;Wt++){const Kt=Wt*Bt-Bt*(Zt.length-1)/2,Jt=xt.append("text").attr("x",Et).attr("y",kt).style("text-anchor","start").style("font-size",Bt).style("font-weight",Yt).style("font-family",Ft);Jt.append("tspan").attr("x",Et).attr("dy",Kt).text(Zt[Wt]),Jt.attr("y",kt+It/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(Jt,Rt)}}function it(_t,xt,Et,kt,Lt,It,Rt,Nt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",It).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(_t),rt(_t,Bt,Et,kt,Lt,It,Rt,Nt),st(Yt,Rt)}function st(_t,xt){for(const Et in xt)xt.hasOwnProperty(Et)&&_t.attr(Et,xt[Et])}return function(_t){return _t.textPlacement==="fo"?it:_t.textPlacement==="old"?nt:rt}}(),svgDraw$1={drawRect:drawRect$1,drawText:drawText$1,drawLabel:drawLabel$1,drawActor,drawBox,drawPopup,drawImage,drawEmbeddedImage,anchorElement,drawActivation,drawLoop,drawBackgroundRect:drawBackgroundRect$1,insertArrowHead,insertArrowFilledHead,insertSequenceNumber,insertArrowCrossHead,insertDatabaseIcon,insertComputerIcon,insertClockIcon,getTextObj:getTextObj$1,getNoteRect:getNoteRect$1,popupMenu,popdownMenu,fixLifeLineHeights,sanitizeUrl:dist.sanitizeUrl};let conf$3={};const bounds$1={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(nt=>nt.height||0))+(this.loops.length===0?0:this.loops.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.messages.length===0?0:this.messages.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))+(this.notes.length===0?0:this.notes.map(nt=>nt.height||0).reduce((nt,rt)=>nt+rt))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(nt){this.boxes.push(nt)},addActor:function(nt){this.actors.push(nt)},addLoop:function(nt){this.loops.push(nt)},addMessage:function(nt){this.messages.push(nt)},addNote:function(nt){this.notes.push(nt)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,setConf$4(getConfig$1())},updateVal:function(nt,rt,it,st){nt[rt]===void 0?nt[rt]=it:nt[rt]=st(it,nt[rt])},updateBounds:function(nt,rt,it,st){const _t=this;let xt=0;function Et(kt){return function(It){xt++;const Rt=_t.sequenceItems.length-xt+1;_t.updateVal(It,"starty",rt-Rt*conf$3.boxMargin,Math.min),_t.updateVal(It,"stopy",st+Rt*conf$3.boxMargin,Math.max),_t.updateVal(bounds$1.data,"startx",nt-Rt*conf$3.boxMargin,Math.min),_t.updateVal(bounds$1.data,"stopx",it+Rt*conf$3.boxMargin,Math.max),kt!=="activation"&&(_t.updateVal(It,"startx",nt-Rt*conf$3.boxMargin,Math.min),_t.updateVal(It,"stopx",it+Rt*conf$3.boxMargin,Math.max),_t.updateVal(bounds$1.data,"starty",rt-Rt*conf$3.boxMargin,Math.min),_t.updateVal(bounds$1.data,"stopy",st+Rt*conf$3.boxMargin,Math.max))}}this.sequenceItems.forEach(Et()),this.activations.forEach(Et("activation"))},insert:function(nt,rt,it,st){const _t=Math.min(nt,it),xt=Math.max(nt,it),Et=Math.min(rt,st),kt=Math.max(rt,st);this.updateVal(bounds$1.data,"startx",_t,Math.min),this.updateVal(bounds$1.data,"starty",Et,Math.min),this.updateVal(bounds$1.data,"stopx",xt,Math.max),this.updateVal(bounds$1.data,"stopy",kt,Math.max),this.updateBounds(_t,Et,xt,kt)},newActivation:function(nt,rt,it){const st=it[nt.from.actor],_t=actorActivations(nt.from.actor).length||0,xt=st.x+st.width/2+(_t-1)*conf$3.activationWidth/2;this.activations.push({startx:xt,starty:this.verticalPos+2,stopx:xt+conf$3.activationWidth,stopy:void 0,actor:nt.from.actor,anchored:svgDraw$1.anchorElement(rt)})},endActivation:function(nt){const rt=this.activations.map(function(it){return it.actor}).lastIndexOf(nt.from.actor);return this.activations.splice(rt,1)[0]},createLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:nt.message,wrap:nt.wrap,width:nt.width,height:0,fill:rt}},newLoop:function(nt={message:void 0,wrap:!1,width:void 0},rt){this.sequenceItems.push(this.createLoop(nt,rt))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(nt){const rt=this.sequenceItems.pop();rt.sections=rt.sections||[],rt.sectionTitles=rt.sectionTitles||[],rt.sections.push({y:bounds$1.getVerticalPos(),height:0}),rt.sectionTitles.push(nt),this.sequenceItems.push(rt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},drawNote$1=function(nt,rt){bounds$1.bumpVerticalPos(conf$3.boxMargin),rt.height=conf$3.boxMargin,rt.starty=bounds$1.getVerticalPos();const it=svgDraw$1.getNoteRect();it.x=rt.startx,it.y=rt.starty,it.width=rt.width||conf$3.width,it.class="note";const st=nt.append("g"),_t=svgDraw$1.drawRect(st,it),xt=svgDraw$1.getTextObj();xt.x=rt.startx,xt.y=rt.starty,xt.width=it.width,xt.dy="1em",xt.text=rt.message,xt.class="noteText",xt.fontFamily=conf$3.noteFontFamily,xt.fontSize=conf$3.noteFontSize,xt.fontWeight=conf$3.noteFontWeight,xt.anchor=conf$3.noteAlign,xt.textMargin=conf$3.noteMargin,xt.valign="center";const Et=drawText$1(st,xt),kt=Math.round(Et.map(Lt=>(Lt._groups||Lt)[0][0].getBBox().height).reduce((Lt,It)=>Lt+It));_t.attr("height",kt+2*conf$3.noteMargin),rt.height+=kt+2*conf$3.noteMargin,bounds$1.bumpVerticalPos(kt+2*conf$3.noteMargin),rt.stopy=rt.starty+kt+2*conf$3.noteMargin,rt.stopx=rt.startx+it.width,bounds$1.insert(rt.startx,rt.starty,rt.stopx,rt.stopy),bounds$1.models.addNote(rt)},messageFont=nt=>({fontFamily:nt.messageFontFamily,fontSize:nt.messageFontSize,fontWeight:nt.messageFontWeight}),noteFont=nt=>({fontFamily:nt.noteFontFamily,fontSize:nt.noteFontSize,fontWeight:nt.noteFontWeight}),actorFont=nt=>({fontFamily:nt.actorFontFamily,fontSize:nt.actorFontSize,fontWeight:nt.actorFontWeight});function boundMessage(nt,rt){bounds$1.bumpVerticalPos(10);const{startx:it,stopx:st,message:_t}=rt,xt=common$1.splitBreaks(_t).length,Et=utils.calculateTextDimensions(_t,messageFont(conf$3)),kt=Et.height/xt;rt.height+=kt,bounds$1.bumpVerticalPos(kt);let Lt,It=Et.height-10;const Rt=Et.width;if(it===st){Lt=bounds$1.getVerticalPos()+It,conf$3.rightAngles||(It+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+It),It+=30;const Nt=Math.max(Rt/2,conf$3.width/2);bounds$1.insert(it-Nt,bounds$1.getVerticalPos()-10+It,st+Nt,bounds$1.getVerticalPos()+30+It)}else It+=conf$3.boxMargin,Lt=bounds$1.getVerticalPos()+It,bounds$1.insert(it,Lt-10,st,Lt);return bounds$1.bumpVerticalPos(It),rt.height+=It,rt.stopy=rt.starty+rt.height,bounds$1.insert(rt.fromBounds,rt.starty,rt.toBounds,rt.stopy),Lt}const drawMessage=function(nt,rt,it,st){const{startx:_t,stopx:xt,starty:Et,message:kt,type:Lt,sequenceIndex:It,sequenceVisible:Rt}=rt,Nt=utils.calculateTextDimensions(kt,messageFont(conf$3)),Bt=svgDraw$1.getTextObj();Bt.x=_t,Bt.y=Et+10,Bt.width=xt-_t,Bt.class="messageText",Bt.dy="1em",Bt.text=kt,Bt.fontFamily=conf$3.messageFontFamily,Bt.fontSize=conf$3.messageFontSize,Bt.fontWeight=conf$3.messageFontWeight,Bt.anchor=conf$3.messageAlign,Bt.valign="center",Bt.textMargin=conf$3.wrapPadding,Bt.tspan=!1,drawText$1(nt,Bt);const Ft=Nt.width;let Yt;_t===xt?conf$3.rightAngles?Yt=nt.append("path").attr("d",`M  ${_t},${it} H ${_t+Math.max(conf$3.width/2,Ft/2)} V ${it+25} H ${_t}`):Yt=nt.append("path").attr("d","M "+_t+","+it+" C "+(_t+60)+","+(it-10)+" "+(_t+60)+","+(it+30)+" "+_t+","+(it+20)):(Yt=nt.append("line"),Yt.attr("x1",_t),Yt.attr("y1",it),Yt.attr("x2",xt),Yt.attr("y2",it)),Lt===st.db.LINETYPE.DOTTED||Lt===st.db.LINETYPE.DOTTED_CROSS||Lt===st.db.LINETYPE.DOTTED_POINT||Lt===st.db.LINETYPE.DOTTED_OPEN?(Yt.style("stroke-dasharray","3, 3"),Yt.attr("class","messageLine1")):Yt.attr("class","messageLine0");let Zt="";conf$3.arrowMarkerAbsolute&&(Zt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Zt=Zt.replace(/\(/g,"\\("),Zt=Zt.replace(/\)/g,"\\)")),Yt.attr("stroke-width",2),Yt.attr("stroke","none"),Yt.style("fill","none"),(Lt===st.db.LINETYPE.SOLID||Lt===st.db.LINETYPE.DOTTED)&&Yt.attr("marker-end","url("+Zt+"#arrowhead)"),(Lt===st.db.LINETYPE.SOLID_POINT||Lt===st.db.LINETYPE.DOTTED_POINT)&&Yt.attr("marker-end","url("+Zt+"#filled-head)"),(Lt===st.db.LINETYPE.SOLID_CROSS||Lt===st.db.LINETYPE.DOTTED_CROSS)&&Yt.attr("marker-end","url("+Zt+"#crosshead)"),(Rt||conf$3.showSequenceNumbers)&&(Yt.attr("marker-start","url("+Zt+"#sequencenumber)"),nt.append("text").attr("x",_t).attr("y",it+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(It))},drawActors=function(nt,rt,it,st,_t,xt,Et){if(_t.hideUnusedParticipants===!0){const Nt=new Set;xt.forEach(Bt=>{Nt.add(Bt.from),Nt.add(Bt.to)}),it=it.filter(Bt=>Nt.has(Bt))}let kt=0,Lt=0,It=0,Rt;for(const Nt of it){const Bt=rt[Nt],Ft=Bt.box;Rt&&Rt!=Ft&&(Et||bounds$1.models.addBox(Rt),Lt+=conf$3.boxMargin+Rt.margin),Ft&&Ft!=Rt&&(Et||(Ft.x=kt+Lt,Ft.y=st),Lt+=Ft.margin),Bt.width=Bt.width||conf$3.width,Bt.height=Math.max(Bt.height||conf$3.height,conf$3.height),Bt.margin=Bt.margin||conf$3.actorMargin,Bt.x=kt+Lt,Bt.y=bounds$1.getVerticalPos();const Yt=svgDraw$1.drawActor(nt,Bt,conf$3,Et);It=Math.max(It,Yt),bounds$1.insert(Bt.x,st,Bt.x+Bt.width,Bt.height),kt+=Bt.width+Lt,Bt.box&&(Bt.box.width=kt+Ft.margin-Bt.box.x),Lt=Bt.margin,Rt=Bt.box,bounds$1.models.addActor(Bt)}Rt&&!Et&&bounds$1.models.addBox(Rt),bounds$1.bumpVerticalPos(It)},drawActorsPopup=function(nt,rt,it,st){let _t=0,xt=0;for(const Et of it){const kt=rt[Et],Lt=getRequiredPopupWidth(kt),It=svgDraw$1.drawPopup(nt,kt,Lt,conf$3,conf$3.forceMenus,st);It.height>_t&&(_t=It.height),It.width+kt.x>xt&&(xt=It.width+kt.x)}return{maxHeight:_t,maxWidth:xt}},setConf$4=function(nt){assignWithDepth$1(conf$3,nt),nt.fontFamily&&(conf$3.actorFontFamily=conf$3.noteFontFamily=conf$3.messageFontFamily=nt.fontFamily),nt.fontSize&&(conf$3.actorFontSize=conf$3.noteFontSize=conf$3.messageFontSize=nt.fontSize),nt.fontWeight&&(conf$3.actorFontWeight=conf$3.noteFontWeight=conf$3.messageFontWeight=nt.fontWeight)},actorActivations=function(nt){return bounds$1.activations.filter(function(rt){return rt.actor===nt})},activationBounds=function(nt,rt){const it=rt[nt],st=actorActivations(nt),_t=st.reduce(function(Et,kt){return Math.min(Et,kt.startx)},it.x+it.width/2),xt=st.reduce(function(Et,kt){return Math.max(Et,kt.stopx)},it.x+it.width/2);return[_t,xt]};function adjustLoopHeightForWrap(nt,rt,it,st,_t){bounds$1.bumpVerticalPos(it);let xt=st;if(rt.id&&rt.message&&nt[rt.id]){const Et=nt[rt.id].width,kt=messageFont(conf$3);rt.message=utils.wrapLabel(`[${rt.message}]`,Et-2*conf$3.wrapPadding,kt),rt.width=Et,rt.wrap=!0;const Lt=utils.calculateTextDimensions(rt.message,kt),It=Math.max(Lt.height,conf$3.labelBoxHeight);xt=st+It,log$1.debug(`${It} - ${rt.message}`)}_t(rt),bounds$1.bumpVerticalPos(xt)}const draw$4=function(nt,rt,it,st){const{securityLevel:_t,sequence:xt}=getConfig$1();conf$3=xt,st.db.clear(),st.parser.parse(nt);let Et;_t==="sandbox"&&(Et=select("#i"+rt));const kt=select(_t==="sandbox"?Et.nodes()[0].contentDocument.body:"body"),Lt=_t==="sandbox"?Et.nodes()[0].contentDocument:document;bounds$1.init(),log$1.debug(st.db);const It=_t==="sandbox"?kt.select(`[id="${rt}"]`):select(`[id="${rt}"]`),Rt=st.db.getActors(),Nt=st.db.getBoxes(),Bt=st.db.getActorKeys(),Ft=st.db.getMessages(),Yt=st.db.getDiagramTitle(),Zt=st.db.hasAtLeastOneBox(),Wt=st.db.hasAtLeastOneBoxWithTitle(),Kt=getMaxMessageWidthPerActor(Rt,Ft,st);conf$3.height=calculateActorMargins(Rt,Kt,Nt),svgDraw$1.insertComputerIcon(It),svgDraw$1.insertDatabaseIcon(It),svgDraw$1.insertClockIcon(It),Zt&&(bounds$1.bumpVerticalPos(conf$3.boxMargin),Wt&&bounds$1.bumpVerticalPos(Nt[0].textMaxHeight)),drawActors(It,Rt,Bt,0,conf$3,Ft,!1);const Jt=calculateLoopBounds(Ft,Rt,Kt,st);svgDraw$1.insertArrowHead(It),svgDraw$1.insertArrowCrossHead(It),svgDraw$1.insertArrowFilledHead(It),svgDraw$1.insertSequenceNumber(It);function on(zn,dn){const Fn=bounds$1.endActivation(zn);Fn.starty+18>dn&&(Fn.starty=dn-6,dn+=12),svgDraw$1.drawActivation(It,Fn,dn,conf$3,actorActivations(zn.from.actor).length),bounds$1.insert(Fn.startx,dn-10,Fn.stopx,dn)}let rn=1,ln=1;const gn=[];Ft.forEach(function(zn){let dn,Fn,ir;switch(zn.type){case st.db.LINETYPE.NOTE:Fn=zn.noteModel,drawNote$1(It,Fn);break;case st.db.LINETYPE.ACTIVE_START:bounds$1.newActivation(zn,It,Rt);break;case st.db.LINETYPE.ACTIVE_END:on(zn,bounds$1.getVerticalPos());break;case st.db.LINETYPE.LOOP_START:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.LOOP_END:dn=bounds$1.endLoop(),svgDraw$1.drawLoop(It,dn,"loop",conf$3),bounds$1.bumpVerticalPos(dn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(dn);break;case st.db.LINETYPE.RECT_START:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin,conf$3.boxMargin,tr=>bounds$1.newLoop(void 0,tr.message));break;case st.db.LINETYPE.RECT_END:dn=bounds$1.endLoop(),svgDraw$1.drawBackgroundRect(It,dn),bounds$1.models.addLoop(dn),bounds$1.bumpVerticalPos(dn.stopy-bounds$1.getVerticalPos());break;case st.db.LINETYPE.OPT_START:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.OPT_END:dn=bounds$1.endLoop(),svgDraw$1.drawLoop(It,dn,"opt",conf$3),bounds$1.bumpVerticalPos(dn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(dn);break;case st.db.LINETYPE.ALT_START:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.ALT_ELSE:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,tr=>bounds$1.addSectionToLoop(tr));break;case st.db.LINETYPE.ALT_END:dn=bounds$1.endLoop(),svgDraw$1.drawLoop(It,dn,"alt",conf$3),bounds$1.bumpVerticalPos(dn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(dn);break;case st.db.LINETYPE.PAR_START:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.PAR_AND:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,tr=>bounds$1.addSectionToLoop(tr));break;case st.db.LINETYPE.PAR_END:dn=bounds$1.endLoop(),svgDraw$1.drawLoop(It,dn,"par",conf$3),bounds$1.bumpVerticalPos(dn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(dn);break;case st.db.LINETYPE.AUTONUMBER:rn=zn.message.start||rn,ln=zn.message.step||ln,zn.message.visible?st.db.enableSequenceNumbers():st.db.disableSequenceNumbers();break;case st.db.LINETYPE.CRITICAL_START:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.CRITICAL_OPTION:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin+conf$3.boxTextMargin,conf$3.boxMargin,tr=>bounds$1.addSectionToLoop(tr));break;case st.db.LINETYPE.CRITICAL_END:dn=bounds$1.endLoop(),svgDraw$1.drawLoop(It,dn,"critical",conf$3),bounds$1.bumpVerticalPos(dn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(dn);break;case st.db.LINETYPE.BREAK_START:adjustLoopHeightForWrap(Jt,zn,conf$3.boxMargin,conf$3.boxMargin+conf$3.boxTextMargin,tr=>bounds$1.newLoop(tr));break;case st.db.LINETYPE.BREAK_END:dn=bounds$1.endLoop(),svgDraw$1.drawLoop(It,dn,"break",conf$3),bounds$1.bumpVerticalPos(dn.stopy-bounds$1.getVerticalPos()),bounds$1.models.addLoop(dn);break;default:try{ir=zn.msgModel,ir.starty=bounds$1.getVerticalPos(),ir.sequenceIndex=rn,ir.sequenceVisible=st.db.showSequenceNumbers();const tr=boundMessage(It,ir);gn.push({messageModel:ir,lineStartY:tr}),bounds$1.models.addMessage(ir)}catch(tr){log$1.error("error while drawing message",tr)}}[st.db.LINETYPE.SOLID_OPEN,st.db.LINETYPE.DOTTED_OPEN,st.db.LINETYPE.SOLID,st.db.LINETYPE.DOTTED,st.db.LINETYPE.SOLID_CROSS,st.db.LINETYPE.DOTTED_CROSS,st.db.LINETYPE.SOLID_POINT,st.db.LINETYPE.DOTTED_POINT].includes(zn.type)&&(rn=rn+ln)}),gn.forEach(zn=>drawMessage(It,zn.messageModel,zn.lineStartY,st)),conf$3.mirrorActors&&(bounds$1.bumpVerticalPos(conf$3.boxMargin*2),drawActors(It,Rt,Bt,bounds$1.getVerticalPos(),conf$3,Ft,!0),bounds$1.bumpVerticalPos(conf$3.boxMargin),fixLifeLineHeights(It,bounds$1.getVerticalPos())),bounds$1.models.boxes.forEach(function(zn){zn.height=bounds$1.getVerticalPos()-zn.y,bounds$1.insert(zn.x,zn.y,zn.x+zn.width,zn.height),zn.startx=zn.x,zn.starty=zn.y,zn.stopx=zn.startx+zn.width,zn.stopy=zn.starty+zn.height,zn.stroke="rgb(0,0,0, 0.5)",svgDraw$1.drawBox(It,zn,conf$3)}),Zt&&bounds$1.bumpVerticalPos(conf$3.boxMargin);const wn=drawActorsPopup(It,Rt,Bt,Lt),{bounds:kn}=bounds$1.getBounds();log$1.debug("For line height fix Querying: #"+rt+" .actor-line"),selectAll("#"+rt+" .actor-line").attr("y2",kn.stopy);let Pn=kn.stopy-kn.starty;Pn<wn.maxHeight&&(Pn=wn.maxHeight);let An=Pn+2*conf$3.diagramMarginY;conf$3.mirrorActors&&(An=An-conf$3.boxMargin+conf$3.bottomMarginAdj);let cn=kn.stopx-kn.startx;cn<wn.maxWidth&&(cn=wn.maxWidth);const Ln=cn+2*conf$3.diagramMarginX;Yt&&It.append("text").text(Yt).attr("x",(kn.stopx-kn.startx)/2-2*conf$3.diagramMarginX).attr("y",-25),configureSvgSize(It,An,Ln,conf$3.useMaxWidth);const an=Yt?40:0;It.attr("viewBox",kn.startx-conf$3.diagramMarginX+" -"+(conf$3.diagramMarginY+an)+" "+Ln+" "+(An+an)),log$1.debug("models:",bounds$1.models)};function getMaxMessageWidthPerActor(nt,rt,it){const st={};return rt.forEach(function(_t){if(nt[_t.to]&&nt[_t.from]){const xt=nt[_t.to];if(_t.placement===it.db.PLACEMENT.LEFTOF&&!xt.prevActor||_t.placement===it.db.PLACEMENT.RIGHTOF&&!xt.nextActor)return;const Et=_t.placement!==void 0,kt=!Et,Lt=Et?noteFont(conf$3):messageFont(conf$3),It=_t.wrap?utils.wrapLabel(_t.message,conf$3.width-2*conf$3.wrapPadding,Lt):_t.message,Nt=utils.calculateTextDimensions(It,Lt).width+2*conf$3.wrapPadding;kt&&_t.from===xt.nextActor?st[_t.to]=Math.max(st[_t.to]||0,Nt):kt&&_t.from===xt.prevActor?st[_t.from]=Math.max(st[_t.from]||0,Nt):kt&&_t.from===_t.to?(st[_t.from]=Math.max(st[_t.from]||0,Nt/2),st[_t.to]=Math.max(st[_t.to]||0,Nt/2)):_t.placement===it.db.PLACEMENT.RIGHTOF?st[_t.from]=Math.max(st[_t.from]||0,Nt):_t.placement===it.db.PLACEMENT.LEFTOF?st[xt.prevActor]=Math.max(st[xt.prevActor]||0,Nt):_t.placement===it.db.PLACEMENT.OVER&&(xt.prevActor&&(st[xt.prevActor]=Math.max(st[xt.prevActor]||0,Nt/2)),xt.nextActor&&(st[_t.from]=Math.max(st[_t.from]||0,Nt/2)))}}),log$1.debug("maxMessageWidthPerActor:",st),st}const getRequiredPopupWidth=function(nt){let rt=0;const it=actorFont(conf$3);for(const st in nt.links){const xt=utils.calculateTextDimensions(st,it).width+2*conf$3.wrapPadding+2*conf$3.boxMargin;rt<xt&&(rt=xt)}return rt};function calculateActorMargins(nt,rt,it){let st=0;Object.keys(nt).forEach(xt=>{const Et=nt[xt];Et.wrap&&(Et.description=utils.wrapLabel(Et.description,conf$3.width-2*conf$3.wrapPadding,actorFont(conf$3)));const kt=utils.calculateTextDimensions(Et.description,actorFont(conf$3));Et.width=Et.wrap?conf$3.width:Math.max(conf$3.width,kt.width+2*conf$3.wrapPadding),Et.height=Et.wrap?Math.max(kt.height,conf$3.height):conf$3.height,st=Math.max(st,Et.height)});for(const xt in rt){const Et=nt[xt];if(!Et)continue;const kt=nt[Et.nextActor];if(!kt){const Nt=rt[xt]+conf$3.actorMargin-Et.width/2;Et.margin=Math.max(Nt,conf$3.actorMargin);continue}const It=rt[xt]+conf$3.actorMargin-Et.width/2-kt.width/2;Et.margin=Math.max(It,conf$3.actorMargin)}let _t=0;return it.forEach(xt=>{const Et=messageFont(conf$3);let kt=xt.actorKeys.reduce((Rt,Nt)=>Rt+=nt[Nt].width+(nt[Nt].margin||0),0);kt-=2*conf$3.boxTextMargin,xt.wrap&&(xt.name=utils.wrapLabel(xt.name,kt-2*conf$3.wrapPadding,Et));const Lt=utils.calculateTextDimensions(xt.name,Et);_t=Math.max(Lt.height,_t);const It=Math.max(kt,Lt.width+2*conf$3.wrapPadding);if(xt.margin=conf$3.boxTextMargin,kt<It){const Rt=(It-kt)/2;xt.margin+=Rt}}),it.forEach(xt=>xt.textMaxHeight=_t),Math.max(st,conf$3.height)}const buildNoteModel=function(nt,rt,it){const st=rt[nt.from].x,_t=rt[nt.to].x,xt=nt.wrap&&nt.message;let Et=utils.calculateTextDimensions(xt?utils.wrapLabel(nt.message,conf$3.width,noteFont(conf$3)):nt.message,noteFont(conf$3));const kt={width:xt?conf$3.width:Math.max(conf$3.width,Et.width+2*conf$3.noteMargin),height:0,startx:rt[nt.from].x,stopx:0,starty:0,stopy:0,message:nt.message};return nt.placement===it.db.PLACEMENT.RIGHTOF?(kt.width=xt?Math.max(conf$3.width,Et.width):Math.max(rt[nt.from].width/2+rt[nt.to].width/2,Et.width+2*conf$3.noteMargin),kt.startx=st+(rt[nt.from].width+conf$3.actorMargin)/2):nt.placement===it.db.PLACEMENT.LEFTOF?(kt.width=Math.max(xt?conf$3.width:rt[nt.from].width/2+rt[nt.to].width/2,Et.width+2*conf$3.noteMargin),kt.startx=st-kt.width+(rt[nt.from].width-conf$3.actorMargin)/2):nt.to===nt.from?(Et=utils.calculateTextDimensions(xt?utils.wrapLabel(nt.message,Math.max(conf$3.width,rt[nt.from].width),noteFont(conf$3)):nt.message,noteFont(conf$3)),kt.width=xt?Math.max(conf$3.width,rt[nt.from].width):Math.max(rt[nt.from].width,conf$3.width,Et.width+2*conf$3.noteMargin),kt.startx=st+(rt[nt.from].width-kt.width)/2):(kt.width=Math.abs(st+rt[nt.from].width/2-(_t+rt[nt.to].width/2))+conf$3.actorMargin,kt.startx=st<_t?st+rt[nt.from].width/2-conf$3.actorMargin/2:_t+rt[nt.to].width/2-conf$3.actorMargin/2),xt&&(kt.message=utils.wrapLabel(nt.message,kt.width-2*conf$3.wrapPadding,noteFont(conf$3))),log$1.debug(`NM:[${kt.startx},${kt.stopx},${kt.starty},${kt.stopy}:${kt.width},${kt.height}=${nt.message}]`),kt},buildMessageModel=function(nt,rt,it){let st=!1;if([it.db.LINETYPE.SOLID_OPEN,it.db.LINETYPE.DOTTED_OPEN,it.db.LINETYPE.SOLID,it.db.LINETYPE.DOTTED,it.db.LINETYPE.SOLID_CROSS,it.db.LINETYPE.DOTTED_CROSS,it.db.LINETYPE.SOLID_POINT,it.db.LINETYPE.DOTTED_POINT].includes(nt.type)&&(st=!0),!st)return{};const _t=activationBounds(nt.from,rt),xt=activationBounds(nt.to,rt),Et=_t[0]<=xt[0]?1:0,kt=_t[0]<xt[0]?0:1,Lt=[..._t,...xt],It=Math.abs(xt[kt]-_t[Et]);nt.wrap&&nt.message&&(nt.message=utils.wrapLabel(nt.message,Math.max(It+2*conf$3.wrapPadding,conf$3.width),messageFont(conf$3)));const Rt=utils.calculateTextDimensions(nt.message,messageFont(conf$3));return{width:Math.max(nt.wrap?0:Rt.width+2*conf$3.wrapPadding,It+2*conf$3.wrapPadding,conf$3.width),height:0,startx:_t[Et],stopx:xt[kt],starty:0,stopy:0,message:nt.message,type:nt.type,wrap:nt.wrap,fromBounds:Math.min.apply(null,Lt),toBounds:Math.max.apply(null,Lt)}},calculateLoopBounds=function(nt,rt,it,st){const _t={},xt=[];let Et,kt,Lt;return nt.forEach(function(It){switch(It.id=utils.random({length:10}),It.type){case st.db.LINETYPE.LOOP_START:case st.db.LINETYPE.ALT_START:case st.db.LINETYPE.OPT_START:case st.db.LINETYPE.PAR_START:case st.db.LINETYPE.CRITICAL_START:case st.db.LINETYPE.BREAK_START:xt.push({id:It.id,msg:It.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case st.db.LINETYPE.ALT_ELSE:case st.db.LINETYPE.PAR_AND:case st.db.LINETYPE.CRITICAL_OPTION:It.message&&(Et=xt.pop(),_t[Et.id]=Et,_t[It.id]=Et,xt.push(Et));break;case st.db.LINETYPE.LOOP_END:case st.db.LINETYPE.ALT_END:case st.db.LINETYPE.OPT_END:case st.db.LINETYPE.PAR_END:case st.db.LINETYPE.CRITICAL_END:case st.db.LINETYPE.BREAK_END:Et=xt.pop(),_t[Et.id]=Et;break;case st.db.LINETYPE.ACTIVE_START:{const Nt=rt[It.from?It.from.actor:It.to.actor],Bt=actorActivations(It.from?It.from.actor:It.to.actor).length,Ft=Nt.x+Nt.width/2+(Bt-1)*conf$3.activationWidth/2,Yt={startx:Ft,stopx:Ft+conf$3.activationWidth,actor:It.from.actor,enabled:!0};bounds$1.activations.push(Yt)}break;case st.db.LINETYPE.ACTIVE_END:{const Nt=bounds$1.activations.map(Bt=>Bt.actor).lastIndexOf(It.from.actor);delete bounds$1.activations.splice(Nt,1)[0]}break}It.placement!==void 0?(kt=buildNoteModel(It,rt,st),It.noteModel=kt,xt.forEach(Nt=>{Et=Nt,Et.from=Math.min(Et.from,kt.startx),Et.to=Math.max(Et.to,kt.startx+kt.width),Et.width=Math.max(Et.width,Math.abs(Et.from-Et.to))-conf$3.labelBoxWidth})):(Lt=buildMessageModel(It,rt,st),It.msgModel=Lt,Lt.startx&&Lt.stopx&&xt.length>0&&xt.forEach(Nt=>{if(Et=Nt,Lt.startx===Lt.stopx){const Bt=rt[It.from],Ft=rt[It.to];Et.from=Math.min(Bt.x-Lt.width/2,Bt.x-Bt.width/2,Et.from),Et.to=Math.max(Ft.x+Lt.width/2,Ft.x+Bt.width/2,Et.to),Et.width=Math.max(Et.width,Math.abs(Et.to-Et.from))-conf$3.labelBoxWidth}else Et.from=Math.min(Lt.startx,Et.from),Et.to=Math.max(Lt.stopx,Et.to),Et.width=Math.max(Et.width,Lt.width)-conf$3.labelBoxWidth}))}),bounds$1.activations=[],log$1.debug("Loop type widths:",_t),_t},sequenceRenderer={bounds:bounds$1,drawActors,drawActorsPopup,setConf:setConf$4,draw:draw$4};var parser$1=function(){var nt=function(Jn,hr,lr,cr){for(lr=lr||{},cr=Jn.length;cr--;lr[Jn[cr]]=hr);return lr},rt=[1,2],it=[1,3],st=[1,5],_t=[1,7],xt=[2,5],Et=[1,15],kt=[1,17],Lt=[1,21],It=[1,22],Rt=[1,23],Nt=[1,24],Bt=[1,37],Ft=[1,25],Yt=[1,26],Zt=[1,27],Wt=[1,28],Kt=[1,29],Jt=[1,32],on=[1,33],rn=[1,34],ln=[1,35],gn=[1,36],wn=[1,39],kn=[1,40],Cn=[1,41],Pn=[1,42],An=[1,38],cn=[1,45],Ln=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],an=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],zn=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],dn=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],Fn={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(hr,lr,cr,Cr,Er,ar,Fr){var mr=ar.length-1;switch(Er){case 4:return Cr.setRootDoc(ar[mr]),ar[mr];case 5:this.$=[];break;case 6:ar[mr]!="nl"&&(ar[mr-1].push(ar[mr]),this.$=ar[mr-1]);break;case 7:case 8:this.$=ar[mr];break;case 9:this.$="nl";break;case 12:this.$=ar[mr];break;case 13:const er=ar[mr-1];er.description=Cr.trimColon(ar[mr]),this.$=er;break;case 14:this.$={stmt:"relation",state1:ar[mr-2],state2:ar[mr]};break;case 15:const nn=Cr.trimColon(ar[mr]);this.$={stmt:"relation",state1:ar[mr-3],state2:ar[mr-1],description:nn};break;case 19:this.$={stmt:"state",id:ar[mr-3],type:"default",description:"",doc:ar[mr-1]};break;case 20:var xr=ar[mr],fr=ar[mr-2].trim();if(ar[mr].match(":")){var gr=ar[mr].split(":");xr=gr[0],fr=[fr,gr[1]]}this.$={stmt:"state",id:xr,type:"default",description:fr};break;case 21:this.$={stmt:"state",id:ar[mr-3],type:"default",description:ar[mr-5],doc:ar[mr-1]};break;case 22:this.$={stmt:"state",id:ar[mr],type:"fork"};break;case 23:this.$={stmt:"state",id:ar[mr],type:"join"};break;case 24:this.$={stmt:"state",id:ar[mr],type:"choice"};break;case 25:this.$={stmt:"state",id:Cr.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:ar[mr-1].trim(),note:{position:ar[mr-2].trim(),text:ar[mr].trim()}};break;case 30:this.$=ar[mr].trim(),Cr.setAccTitle(this.$);break;case 31:case 32:this.$=ar[mr].trim(),Cr.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:ar[mr-1].trim(),classes:ar[mr].trim()};break;case 35:this.$={stmt:"applyClass",id:ar[mr-1].trim(),styleClass:ar[mr].trim()};break;case 38:Cr.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:Cr.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:Cr.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:Cr.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:ar[mr].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:ar[mr-2].trim(),classes:[ar[mr].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:ar[mr-2].trim(),classes:[ar[mr].trim()],type:"default",description:""};break;case 50:Cr.parseDirective("%%{","open_directive");break;case 51:Cr.parseDirective(ar[mr],"type_directive");break;case 52:ar[mr]=ar[mr].trim().replace(/'/g,'"'),Cr.parseDirective(ar[mr],"arg_directive");break;case 53:Cr.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:rt,5:it,6:4,7:st,45:6,60:_t},{1:[3]},{3:8,4:rt,5:it,6:4,7:st,45:6,60:_t},{3:9,4:rt,5:it,6:4,7:st,45:6,60:_t},{3:10,4:rt,5:it,6:4,7:st,45:6,60:_t},nt([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],xt,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:It,19:Rt,22:Nt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Kt,32:31,33:Jt,35:on,37:rn,38:ln,42:gn,45:6,50:wn,51:kn,52:Cn,53:Pn,56:An,60:_t},{47:43,48:[1,44],63:cn},nt([48,63],[2,51]),nt(Ln,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:Lt,17:It,19:Rt,22:Nt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Kt,32:31,33:Jt,35:on,37:rn,38:ln,42:gn,45:6,50:wn,51:kn,52:Cn,53:Pn,56:An,60:_t},nt(Ln,[2,8]),nt(Ln,[2,9]),nt(Ln,[2,10]),nt(Ln,[2,11]),nt(Ln,[2,12],{14:[1,47],15:[1,48]}),nt(Ln,[2,16]),{18:[1,49]},nt(Ln,[2,18],{20:[1,50]}),{23:[1,51]},nt(Ln,[2,22]),nt(Ln,[2,23]),nt(Ln,[2,24]),nt(Ln,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},nt(Ln,[2,28]),nt(Ln,[2,29]),{34:[1,56]},{36:[1,57]},nt(Ln,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},nt(an,[2,44],{57:[1,61]}),nt(an,[2,45],{57:[1,62]}),nt(Ln,[2,38]),nt(Ln,[2,39]),nt(Ln,[2,40]),nt(Ln,[2,41]),nt(zn,[2,36]),{49:63,62:[1,64]},nt(zn,[2,53]),nt(Ln,[2,7]),nt(Ln,[2,13]),{13:65,24:Bt,56:An},nt(Ln,[2,17]),nt(dn,xt,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},nt(Ln,[2,30]),nt(Ln,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:cn},{63:[2,52]},nt(Ln,[2,14],{14:[1,76]}),{4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:It,19:Rt,21:[1,77],22:Nt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Kt,32:31,33:Jt,35:on,37:rn,38:ln,42:gn,45:6,50:wn,51:kn,52:Cn,53:Pn,56:An,60:_t},nt(Ln,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},nt(Ln,[2,33]),nt(Ln,[2,34]),nt(Ln,[2,35]),nt(an,[2,46]),nt(an,[2,47]),nt(zn,[2,37]),nt(Ln,[2,15]),nt(Ln,[2,19]),nt(dn,xt,{8:81}),nt(Ln,[2,26]),nt(Ln,[2,27]),{4:Et,5:kt,6:30,9:14,10:16,11:18,12:19,13:20,16:Lt,17:It,19:Rt,21:[1,82],22:Nt,24:Bt,25:Ft,26:Yt,27:Zt,28:Wt,29:Kt,32:31,33:Jt,35:on,37:rn,38:ln,42:gn,45:6,50:wn,51:kn,52:Cn,53:Pn,56:An,60:_t},nt(Ln,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(hr,lr){if(lr.recoverable)this.trace(hr);else{var cr=new Error(hr);throw cr.hash=lr,cr}},parse:function(hr){var lr=this,cr=[0],Cr=[],Er=[null],ar=[],Fr=this.table,mr="",xr=0,fr=0,gr=2,er=1,nn=ar.slice.call(arguments,1),un=Object.create(this.lexer),pn={yy:{}};for(var Rn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Rn)&&(pn.yy[Rn]=this.yy[Rn]);un.setInput(hr,pn.yy),pn.yy.lexer=un,pn.yy.parser=this,typeof un.yylloc>"u"&&(un.yylloc={});var _n=un.yylloc;ar.push(_n);var or=un.options&&un.options.ranges;typeof pn.yy.parseError=="function"?this.parseError=pn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Vn(){var li;return li=Cr.pop()||un.lex()||er,typeof li!="number"&&(li instanceof Array&&(Cr=li,li=Cr.pop()),li=lr.symbols_[li]||li),li}for(var Wn,Hn,nr,sr,pr={},vr,kr,si,ui;;){if(Hn=cr[cr.length-1],this.defaultActions[Hn]?nr=this.defaultActions[Hn]:((Wn===null||typeof Wn>"u")&&(Wn=Vn()),nr=Fr[Hn]&&Fr[Hn][Wn]),typeof nr>"u"||!nr.length||!nr[0]){var ii="";ui=[];for(vr in Fr[Hn])this.terminals_[vr]&&vr>gr&&ui.push("'"+this.terminals_[vr]+"'");un.showPosition?ii="Parse error on line "+(xr+1)+`:
`+un.showPosition()+`
Expecting `+ui.join(", ")+", got '"+(this.terminals_[Wn]||Wn)+"'":ii="Parse error on line "+(xr+1)+": Unexpected "+(Wn==er?"end of input":"'"+(this.terminals_[Wn]||Wn)+"'"),this.parseError(ii,{text:un.match,token:this.terminals_[Wn]||Wn,line:un.yylineno,loc:_n,expected:ui})}if(nr[0]instanceof Array&&nr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Hn+", token: "+Wn);switch(nr[0]){case 1:cr.push(Wn),Er.push(un.yytext),ar.push(un.yylloc),cr.push(nr[1]),Wn=null,fr=un.yyleng,mr=un.yytext,xr=un.yylineno,_n=un.yylloc;break;case 2:if(kr=this.productions_[nr[1]][1],pr.$=Er[Er.length-kr],pr._$={first_line:ar[ar.length-(kr||1)].first_line,last_line:ar[ar.length-1].last_line,first_column:ar[ar.length-(kr||1)].first_column,last_column:ar[ar.length-1].last_column},or&&(pr._$.range=[ar[ar.length-(kr||1)].range[0],ar[ar.length-1].range[1]]),sr=this.performAction.apply(pr,[mr,fr,xr,pn.yy,nr[1],Er,ar].concat(nn)),typeof sr<"u")return sr;kr&&(cr=cr.slice(0,-1*kr*2),Er=Er.slice(0,-1*kr),ar=ar.slice(0,-1*kr)),cr.push(this.productions_[nr[1]][0]),Er.push(pr.$),ar.push(pr._$),si=Fr[cr[cr.length-2]][cr[cr.length-1]],cr.push(si);break;case 3:return!0}}return!0}},ir=function(){var Jn={EOF:1,parseError:function(lr,cr){if(this.yy.parser)this.yy.parser.parseError(lr,cr);else throw new Error(lr)},setInput:function(hr,lr){return this.yy=lr||this.yy||{},this._input=hr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var hr=this._input[0];this.yytext+=hr,this.yyleng++,this.offset++,this.match+=hr,this.matched+=hr;var lr=hr.match(/(?:\r\n?|\n).*/g);return lr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),hr},unput:function(hr){var lr=hr.length,cr=hr.split(/(?:\r\n?|\n)/g);this._input=hr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-lr),this.offset-=lr;var Cr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),cr.length-1&&(this.yylineno-=cr.length-1);var Er=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:cr?(cr.length===Cr.length?this.yylloc.first_column:0)+Cr[Cr.length-cr.length].length-cr[0].length:this.yylloc.first_column-lr},this.options.ranges&&(this.yylloc.range=[Er[0],Er[0]+this.yyleng-lr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(hr){this.unput(this.match.slice(hr))},pastInput:function(){var hr=this.matched.substr(0,this.matched.length-this.match.length);return(hr.length>20?"...":"")+hr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var hr=this.match;return hr.length<20&&(hr+=this._input.substr(0,20-hr.length)),(hr.substr(0,20)+(hr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var hr=this.pastInput(),lr=new Array(hr.length+1).join("-");return hr+this.upcomingInput()+`
`+lr+"^"},test_match:function(hr,lr){var cr,Cr,Er;if(this.options.backtrack_lexer&&(Er={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Er.yylloc.range=this.yylloc.range.slice(0))),Cr=hr[0].match(/(?:\r\n?|\n).*/g),Cr&&(this.yylineno+=Cr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Cr?Cr[Cr.length-1].length-Cr[Cr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+hr[0].length},this.yytext+=hr[0],this.match+=hr[0],this.matches=hr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(hr[0].length),this.matched+=hr[0],cr=this.performAction.call(this,this.yy,this,lr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),cr)return cr;if(this._backtrack){for(var ar in Er)this[ar]=Er[ar];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var hr,lr,cr,Cr;this._more||(this.yytext="",this.match="");for(var Er=this._currentRules(),ar=0;ar<Er.length;ar++)if(cr=this._input.match(this.rules[Er[ar]]),cr&&(!lr||cr[0].length>lr[0].length)){if(lr=cr,Cr=ar,this.options.backtrack_lexer){if(hr=this.test_match(cr,Er[ar]),hr!==!1)return hr;if(this._backtrack){lr=!1;continue}else return!1}else if(!this.options.flex)break}return lr?(hr=this.test_match(lr,Er[Cr]),hr!==!1?hr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var lr=this.next();return lr||this.lex()},begin:function(lr){this.conditionStack.push(lr)},popState:function(){var lr=this.conditionStack.length-1;return lr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(lr){return lr=this.conditionStack.length-1-Math.abs(lr||0),lr>=0?this.conditionStack[lr]:"INITIAL"},pushState:function(lr){this.begin(lr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(lr,cr,Cr,Er){switch(Cr){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),cr.yytext=cr.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),cr.yytext=cr.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),cr.yytext=cr.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),cr.yytext=cr.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),cr.yytext=cr.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),cr.yytext=cr.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.pushState("STATE_STRING");break;case 49:return this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),cr.yytext=cr.yytext.substr(2).trim(),31;case 69:return this.popState(),cr.yytext=cr.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return cr.yytext=cr.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return Jn}();Fn.lexer=ir;function tr(){this.yy={}}return tr.prototype=Fn,Fn.Parser=tr,new tr}();parser$1.parser=parser$1;const stateParser=parser$1,stateDetector=(nt,rt)=>{var it;return((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper"?!1:nt.match(/^\s*stateDiagram/)!==null},stateDetectorV2=(nt,rt)=>{var it;return!!(nt.match(/^\s*stateDiagram-v2/)!==null||nt.match(/^\s*stateDiagram/)&&((it=rt==null?void 0:rt.state)==null?void 0:it.defaultRenderer)==="dagre-wrapper")},DEFAULT_DIAGRAM_DIRECTION="LR",DEFAULT_NESTED_DOC_DIR="TB",STMT_STATE="state",STMT_RELATION="relation",STMT_CLASSDEF="classDef",STMT_APPLYCLASS="applyClass",DEFAULT_STATE_TYPE="default",DIVIDER_TYPE="divider",START_NODE="[*]",START_TYPE="start",END_NODE=START_NODE,END_TYPE="end",COLOR_KEYWORD="color",FILL_KEYWORD="fill",BG_FILL="bgFill",STYLECLASS_SEP=",";function newClassesList(){return{}}let direction=DEFAULT_DIAGRAM_DIRECTION,rootDoc=[],classes=newClassesList();const newDoc=()=>({relations:[],states:{},documents:{}});let documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,dividerCnt=0;const lineType={LINE:0,DOTTED_LINE:1},relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},clone=nt=>JSON.parse(JSON.stringify(nt)),parseDirective$1=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},setRootDoc=nt=>{log$1.info("Setting root doc",nt),rootDoc=nt},getRootDoc=()=>rootDoc,docTranslator=(nt,rt,it)=>{if(rt.stmt===STMT_RELATION)docTranslator(nt,rt.state1,!0),docTranslator(nt,rt.state2,!1);else if(rt.stmt===STMT_STATE&&(rt.id==="[*]"?(rt.id=it?nt.id+"_start":nt.id+"_end",rt.start=it):rt.id=rt.id.trim()),rt.doc){const st=[];let _t=[],xt;for(xt=0;xt<rt.doc.length;xt++)if(rt.doc[xt].type===DIVIDER_TYPE){const Et=clone(rt.doc[xt]);Et.doc=clone(_t),st.push(Et),_t=[]}else _t.push(rt.doc[xt]);if(st.length>0&&_t.length>0){const Et={stmt:STMT_STATE,id:generateId$1(),type:"divider",doc:clone(_t)};st.push(clone(Et)),rt.doc=st}rt.doc.forEach(Et=>docTranslator(rt,Et,!0))}},getRootDocV2=()=>(docTranslator({id:"root"},{id:"root",doc:rootDoc},!0),{id:"root",doc:rootDoc}),extract=nt=>{let rt;nt.doc?rt=nt.doc:rt=nt,log$1.info(rt),clear$1(!0),log$1.info("Extract",rt),rt.forEach(it=>{switch(it.stmt){case STMT_STATE:addState(it.id.trim(),it.type,it.doc,it.description,it.note,it.classes,it.styles,it.textStyles);break;case STMT_RELATION:addRelation(it.state1,it.state2,it.description);break;case STMT_CLASSDEF:addStyleClass(it.id.trim(),it.classes);break;case STMT_APPLYCLASS:setCssClass(it.id.trim(),it.styleClass);break}})},addState=function(nt,rt=DEFAULT_STATE_TYPE,it=null,st=null,_t=null,xt=null,Et=null,kt=null){const Lt=nt==null?void 0:nt.trim();currentDocument.states[Lt]===void 0?(log$1.info("Adding state ",Lt,st),currentDocument.states[Lt]={id:Lt,descriptions:[],type:rt,doc:it,note:_t,classes:[],styles:[],textStyles:[]}):(currentDocument.states[Lt].doc||(currentDocument.states[Lt].doc=it),currentDocument.states[Lt].type||(currentDocument.states[Lt].type=rt)),st&&(log$1.info("Setting state description",Lt,st),typeof st=="string"&&addDescription(Lt,st.trim()),typeof st=="object"&&st.forEach(It=>addDescription(Lt,It.trim()))),_t&&(currentDocument.states[Lt].note=_t,currentDocument.states[Lt].note.text=common$1.sanitizeText(currentDocument.states[Lt].note.text,getConfig$1())),xt&&(log$1.info("Setting state classes",Lt,xt),(typeof xt=="string"?[xt]:xt).forEach(Rt=>setCssClass(Lt,Rt.trim()))),Et&&(log$1.info("Setting state styles",Lt,Et),(typeof Et=="string"?[Et]:Et).forEach(Rt=>setStyle(Lt,Rt.trim()))),kt&&(log$1.info("Setting state styles",Lt,Et),(typeof kt=="string"?[kt]:kt).forEach(Rt=>setTextStyle(Lt,Rt.trim())))},clear$1=function(nt){documents={root:newDoc()},currentDocument=documents.root,startEndCount=0,classes=newClassesList(),nt||clear$g()},getState=function(nt){return currentDocument.states[nt]},getStates=function(){return currentDocument.states},logDocuments=function(){log$1.info("Documents = ",documents)},getRelations=function(){return currentDocument.relations};function startIdIfNeeded(nt=""){let rt=nt;return nt===START_NODE&&(startEndCount++,rt=`${START_TYPE}${startEndCount}`),rt}function startTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===START_NODE?START_TYPE:rt}function endIdIfNeeded(nt=""){let rt=nt;return nt===END_NODE&&(startEndCount++,rt=`${END_TYPE}${startEndCount}`),rt}function endTypeIfNeeded(nt="",rt=DEFAULT_STATE_TYPE){return nt===END_NODE?END_TYPE:rt}function addRelationObjs(nt,rt,it){let st=startIdIfNeeded(nt.id.trim()),_t=startTypeIfNeeded(nt.id.trim(),nt.type),xt=startIdIfNeeded(rt.id.trim()),Et=startTypeIfNeeded(rt.id.trim(),rt.type);addState(st,_t,nt.doc,nt.description,nt.note,nt.classes,nt.styles,nt.textStyles),addState(xt,Et,rt.doc,rt.description,rt.note,rt.classes,rt.styles,rt.textStyles),currentDocument.relations.push({id1:st,id2:xt,relationTitle:common$1.sanitizeText(it,getConfig$1())})}const addRelation=function(nt,rt,it){if(typeof nt=="object")addRelationObjs(nt,rt,it);else{const st=startIdIfNeeded(nt.trim()),_t=startTypeIfNeeded(nt),xt=endIdIfNeeded(rt.trim()),Et=endTypeIfNeeded(rt);addState(st,_t),addState(xt,Et),currentDocument.relations.push({id1:st,id2:xt,title:common$1.sanitizeText(it,getConfig$1())})}},addDescription=function(nt,rt){const it=currentDocument.states[nt],st=rt.startsWith(":")?rt.replace(":","").trim():rt;it.descriptions.push(common$1.sanitizeText(st,getConfig$1()))},cleanupLabel=function(nt){return nt.substring(0,1)===":"?nt.substr(2).trim():nt.trim()},getDividerId=()=>(dividerCnt++,"divider-id-"+dividerCnt),addStyleClass=function(nt,rt=""){classes[nt]===void 0&&(classes[nt]={id:nt,styles:[],textStyles:[]});const it=classes[nt];rt!=null&&rt.split(STYLECLASS_SEP).forEach(st=>{const _t=st.replace(/([^;]*);/,"$1").trim();if(st.match(COLOR_KEYWORD)){const Et=_t.replace(FILL_KEYWORD,BG_FILL).replace(COLOR_KEYWORD,FILL_KEYWORD);it.textStyles.push(Et)}it.styles.push(_t)})},getClasses$1=function(){return classes},setCssClass=function(nt,rt){nt.split(",").forEach(function(it){let st=getState(it);if(st===void 0){const _t=it.trim();addState(_t),st=getState(_t)}st.classes.push(rt)})},setStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},setTextStyle=function(nt,rt){const it=getState(nt);it!==void 0&&it.textStyles.push(rt)},getDirection=()=>direction,setDirection=nt=>{direction=nt},trimColon=nt=>nt&&nt[0]===":"?nt.substr(1).trim():nt.trim(),stateDb={parseDirective:parseDirective$1,getConfig:()=>getConfig$1().state,addState,clear:clear$1,getState,getStates,getRelations,getClasses:getClasses$1,getDirection,addRelation,getDividerId,setDirection,cleanupLabel,lineType,relationType,logDocuments,getRootDoc,setRootDoc,getRootDocV2,extract,trimColon,getAccTitle,setAccTitle,getAccDescription,setAccDescription,addStyleClass,setCssClass,addDescription,setDiagramTitle,getDiagramTitle},drawStartState=nt=>nt.append("circle").attr("class","start-state").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit),drawDivider=nt=>nt.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",getConfig$1().state.textHeight).attr("class","divider").attr("x2",getConfig$1().state.textHeight*2).attr("y1",0).attr("y2",0),drawSimpleState=(nt,rt)=>{const it=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+2*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),st=it.node().getBBox();return nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",st.width+2*getConfig$1().state.padding).attr("height",st.height+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),it},drawDescrState=(nt,rt)=>{const it=function(Bt,Ft,Yt){const Zt=Bt.append("tspan").attr("x",2*getConfig$1().state.padding).text(Ft);Yt||Zt.attr("dy",getConfig$1().state.textHeight)},_t=nt.append("text").attr("x",2*getConfig$1().state.padding).attr("y",getConfig$1().state.textHeight+1.3*getConfig$1().state.padding).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.descriptions[0]).node().getBBox(),xt=_t.height,Et=nt.append("text").attr("x",getConfig$1().state.padding).attr("y",xt+getConfig$1().state.padding*.4+getConfig$1().state.dividerMargin+getConfig$1().state.textHeight).attr("class","state-description");let kt=!0,Lt=!0;rt.descriptions.forEach(function(Bt){kt||(it(Et,Bt,Lt),Lt=!1),kt=!1});const It=nt.append("line").attr("x1",getConfig$1().state.padding).attr("y1",getConfig$1().state.padding+xt+getConfig$1().state.dividerMargin/2).attr("y2",getConfig$1().state.padding+xt+getConfig$1().state.dividerMargin/2).attr("class","descr-divider"),Rt=Et.node().getBBox(),Nt=Math.max(Rt.width,_t.width);return It.attr("x2",Nt+3*getConfig$1().state.padding),nt.insert("rect",":first-child").attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding).attr("width",Nt+2*getConfig$1().state.padding).attr("height",Rt.height+xt+2*getConfig$1().state.padding).attr("rx",getConfig$1().state.radius),nt},addTitleAndBox=(nt,rt,it)=>{const st=getConfig$1().state.padding,_t=2*getConfig$1().state.padding,xt=nt.node().getBBox(),Et=xt.width,kt=xt.x,Lt=nt.append("text").attr("x",0).attr("y",getConfig$1().state.titleShift).attr("font-size",getConfig$1().state.fontSize).attr("class","state-title").text(rt.id),Rt=Lt.node().getBBox().width+_t;let Nt=Math.max(Rt,Et);Nt===Et&&(Nt=Nt+_t);let Bt;const Ft=nt.node().getBBox();rt.doc,Bt=kt-st,Rt>Et&&(Bt=(Et-Nt)/2+st),Math.abs(kt-Ft.x)<st&&Rt>Et&&(Bt=kt-(Rt-Et)/2);const Yt=1-getConfig$1().state.textHeight;return nt.insert("rect",":first-child").attr("x",Bt).attr("y",Yt).attr("class",it?"alt-composit":"composit").attr("width",Nt).attr("height",Ft.height+getConfig$1().state.textHeight+getConfig$1().state.titleShift+1).attr("rx","0"),Lt.attr("x",Bt+st),Rt<=Et&&Lt.attr("x",kt+(Nt-_t)/2-Rt/2+st),nt.insert("rect",":first-child").attr("x",Bt).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",Nt).attr("height",getConfig$1().state.textHeight*3).attr("rx",getConfig$1().state.radius),nt.insert("rect",":first-child").attr("x",Bt).attr("y",getConfig$1().state.titleShift-getConfig$1().state.textHeight-getConfig$1().state.padding).attr("width",Nt).attr("height",Ft.height+3+2*getConfig$1().state.textHeight).attr("rx",getConfig$1().state.radius),nt},drawEndState=nt=>(nt.append("circle").attr("class","end-state-outer").attr("r",getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+getConfig$1().state.miniPadding),nt.append("circle").attr("class","end-state-inner").attr("r",getConfig$1().state.sizeUnit).attr("cx",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2).attr("cy",getConfig$1().state.padding+getConfig$1().state.sizeUnit+2)),drawForkJoinState=(nt,rt)=>{let it=getConfig$1().state.forkWidth,st=getConfig$1().state.forkHeight;if(rt.parentId){let _t=it;it=st,st=_t}return nt.append("rect").style("stroke","black").style("fill","black").attr("width",it).attr("height",st).attr("x",getConfig$1().state.padding).attr("y",getConfig$1().state.padding)},_drawLongText=(nt,rt,it,st)=>{let _t=0;const xt=st.append("text");xt.style("text-anchor","start"),xt.attr("class","noteText");let Et=nt.replace(/\r\n/g,"<br/>");Et=Et.replace(/\n/g,"<br/>");const kt=Et.split(common$1.lineBreakRegex);let Lt=1.25*getConfig$1().state.noteMargin;for(const It of kt){const Rt=It.trim();if(Rt.length>0){const Nt=xt.append("tspan");if(Nt.text(Rt),Lt===0){const Bt=Nt.node().getBBox();Lt+=Bt.height}_t+=Lt,Nt.attr("x",rt+getConfig$1().state.noteMargin),Nt.attr("y",it+_t+1.25*getConfig$1().state.noteMargin)}}return{textWidth:xt.node().getBBox().width,textHeight:_t}},drawNote=(nt,rt)=>{rt.attr("class","state-note");const it=rt.append("rect").attr("x",0).attr("y",getConfig$1().state.padding),st=rt.append("g"),{textWidth:_t,textHeight:xt}=_drawLongText(nt,0,0,st);return it.attr("height",xt+2*getConfig$1().state.noteMargin),it.attr("width",_t+getConfig$1().state.noteMargin*2),it},drawState=function(nt,rt){const it=rt.id,st={id:it,label:rt.id,width:0,height:0},_t=nt.append("g").attr("id",it).attr("class","stateGroup");rt.type==="start"&&drawStartState(_t),rt.type==="end"&&drawEndState(_t),(rt.type==="fork"||rt.type==="join")&&drawForkJoinState(_t,rt),rt.type==="note"&&drawNote(rt.note.text,_t),rt.type==="divider"&&drawDivider(_t),rt.type==="default"&&rt.descriptions.length===0&&drawSimpleState(_t,rt),rt.type==="default"&&rt.descriptions.length>0&&drawDescrState(_t,rt);const xt=_t.node().getBBox();return st.width=xt.width+2*getConfig$1().state.padding,st.height=xt.height+2*getConfig$1().state.padding,st};let edgeCount=0;const drawEdge=function(nt,rt,it){const st=function(Lt){switch(Lt){case stateDb.relationType.AGGREGATION:return"aggregation";case stateDb.relationType.EXTENSION:return"extension";case stateDb.relationType.COMPOSITION:return"composition";case stateDb.relationType.DEPENDENCY:return"dependency"}};rt.points=rt.points.filter(Lt=>!Number.isNaN(Lt.y));const _t=rt.points,xt=line$1().x(function(Lt){return Lt.x}).y(function(Lt){return Lt.y}).curve(curveBasis),Et=nt.append("path").attr("d",xt(_t)).attr("id","edge"+edgeCount).attr("class","transition");let kt="";if(getConfig$1().state.arrowMarkerAbsolute&&(kt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,kt=kt.replace(/\(/g,"\\("),kt=kt.replace(/\)/g,"\\)")),Et.attr("marker-end","url("+kt+"#"+st(stateDb.relationType.DEPENDENCY)+"End)"),it.title!==void 0){const Lt=nt.append("g").attr("class","stateLabel"),{x:It,y:Rt}=utils.calcLabelPosition(rt.points),Nt=common$1.getRows(it.title);let Bt=0;const Ft=[];let Yt=0,Zt=0;for(let Jt=0;Jt<=Nt.length;Jt++){const on=Lt.append("text").attr("text-anchor","middle").text(Nt[Jt]).attr("x",It).attr("y",Rt+Bt),rn=on.node().getBBox();Yt=Math.max(Yt,rn.width),Zt=Math.min(Zt,rn.x),log$1.info(rn.x,It,Rt+Bt),Bt===0&&(Bt=on.node().getBBox().height,log$1.info("Title height",Bt,Rt)),Ft.push(on)}let Wt=Bt*Nt.length;if(Nt.length>1){const Jt=(Nt.length-1)*Bt*.5;Ft.forEach((on,rn)=>on.attr("y",Rt+rn*Bt-Jt)),Wt=Bt*Nt.length}const Kt=Lt.node().getBBox();Lt.insert("rect",":first-child").attr("class","box").attr("x",It-Yt/2-getConfig$1().state.padding/2).attr("y",Rt-Wt/2-getConfig$1().state.padding/2-3.5).attr("width",Yt+getConfig$1().state.padding).attr("height",Wt+getConfig$1().state.padding),log$1.info(Kt)}edgeCount++};let conf$2;const transformationLog={},setConf$3=function(){},insertMarkers=function(nt){nt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},draw$3=function(nt,rt,it,st){conf$2=getConfig$1().state;const _t=getConfig$1().securityLevel;let xt;_t==="sandbox"&&(xt=select("#i"+rt));const Et=select(_t==="sandbox"?xt.nodes()[0].contentDocument.body:"body"),kt=_t==="sandbox"?xt.nodes()[0].contentDocument:document;log$1.debug("Rendering diagram "+nt);const Lt=Et.select(`[id='${rt}']`);insertMarkers(Lt),new Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const Rt=st.db.getRootDoc();renderDoc(Rt,Lt,void 0,!1,Et,kt,st);const Nt=conf$2.padding,Bt=Lt.node().getBBox(),Ft=Bt.width+Nt*2,Yt=Bt.height+Nt*2,Zt=Ft*1.75;configureSvgSize(Lt,Yt,Zt,conf$2.useMaxWidth),Lt.attr("viewBox",`${Bt.x-conf$2.padding}  ${Bt.y-conf$2.padding} `+Ft+" "+Yt)},getLabelWidth=nt=>nt?nt.length*conf$2.fontSizeFactor:1,renderDoc=(nt,rt,it,st,_t,xt,Et)=>{const kt=new Graph({compound:!0,multigraph:!0});let Lt,It=!0;for(Lt=0;Lt<nt.length;Lt++)if(nt[Lt].stmt==="relation"){It=!1;break}it?kt.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:It?1:conf$2.edgeLengthFactor,nodeSep:It?1:50,isMultiGraph:!0}):kt.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:It?1:conf$2.edgeLengthFactor,nodeSep:It?1:50,ranker:"tight-tree",isMultiGraph:!0}),kt.setDefaultEdgeLabel(function(){return{}}),Et.db.extract(nt);const Rt=Et.db.getStates(),Nt=Et.db.getRelations(),Bt=Object.keys(Rt);for(const Kt of Bt){const Jt=Rt[Kt];it&&(Jt.parentId=it);let on;if(Jt.doc){let rn=rt.append("g").attr("id",Jt.id).attr("class","stateGroup");on=renderDoc(Jt.doc,rn,Jt.id,!st,_t,xt,Et);{rn=addTitleAndBox(rn,Jt,st);let ln=rn.node().getBBox();on.width=ln.width,on.height=ln.height+conf$2.padding/2,transformationLog[Jt.id]={y:conf$2.compositTitleSize}}}else on=drawState(rt,Jt);if(Jt.note){const rn={descriptions:[],id:Jt.id+"-note",note:Jt.note,type:"note"},ln=drawState(rt,rn);Jt.note.position==="left of"?(kt.setNode(on.id+"-note",ln),kt.setNode(on.id,on)):(kt.setNode(on.id,on),kt.setNode(on.id+"-note",ln)),kt.setParent(on.id,on.id+"-group"),kt.setParent(on.id+"-note",on.id+"-group")}else kt.setNode(on.id,on)}log$1.debug("Count=",kt.nodeCount(),kt);let Ft=0;Nt.forEach(function(Kt){Ft++,log$1.debug("Setting edge",Kt),kt.setEdge(Kt.id1,Kt.id2,{relation:Kt,width:getLabelWidth(Kt.title),height:conf$2.labelHeight*common$1.getRows(Kt.title).length,labelpos:"c"},"id"+Ft)}),layout(kt),log$1.debug("Graph after layout",kt.nodes());const Yt=rt.node();kt.nodes().forEach(function(Kt){Kt!==void 0&&kt.node(Kt)!==void 0?(log$1.warn("Node "+Kt+": "+JSON.stringify(kt.node(Kt))),_t.select("#"+Yt.id+" #"+Kt).attr("transform","translate("+(kt.node(Kt).x-kt.node(Kt).width/2)+","+(kt.node(Kt).y+(transformationLog[Kt]?transformationLog[Kt].y:0)-kt.node(Kt).height/2)+" )"),_t.select("#"+Yt.id+" #"+Kt).attr("data-x-shift",kt.node(Kt).x-kt.node(Kt).width/2),xt.querySelectorAll("#"+Yt.id+" #"+Kt+" .divider").forEach(on=>{const rn=on.parentElement;let ln=0,gn=0;rn&&(rn.parentElement&&(ln=rn.parentElement.getBBox().width),gn=parseInt(rn.getAttribute("data-x-shift"),10),Number.isNaN(gn)&&(gn=0)),on.setAttribute("x1",0-gn+8),on.setAttribute("x2",ln-gn-8)})):log$1.debug("No Node "+Kt+": "+JSON.stringify(kt.node(Kt)))});let Zt=Yt.getBBox();kt.edges().forEach(function(Kt){Kt!==void 0&&kt.edge(Kt)!==void 0&&(log$1.debug("Edge "+Kt.v+" -> "+Kt.w+": "+JSON.stringify(kt.edge(Kt))),drawEdge(rt,kt.edge(Kt),kt.edge(Kt).relation))}),Zt=Yt.getBBox();const Wt={id:it||"root",label:it||"root",width:0,height:0};return Wt.width=Zt.width+2*conf$2.padding,Wt.height=Zt.height+2*conf$2.padding,log$1.debug("Doc rendered",Wt,kt),Wt},stateRenderer={setConf:setConf$3,draw:draw$3},SHAPE_STATE="rect",SHAPE_STATE_WITH_DESC="rectWithTitle",SHAPE_START="start",SHAPE_END="end",SHAPE_DIVIDER="divider",SHAPE_GROUP="roundedWithTitle",SHAPE_NOTE="note",SHAPE_NOTEGROUP="noteGroup",CSS_DIAGRAM="statediagram",CSS_STATE="state",CSS_DIAGRAM_STATE=`${CSS_DIAGRAM}-${CSS_STATE}`,CSS_EDGE="transition",CSS_NOTE="note",CSS_NOTE_EDGE="note-edge",CSS_EDGE_NOTE_EDGE=`${CSS_EDGE} ${CSS_NOTE_EDGE}`,CSS_DIAGRAM_NOTE=`${CSS_DIAGRAM}-${CSS_NOTE}`,CSS_CLUSTER="cluster",CSS_DIAGRAM_CLUSTER=`${CSS_DIAGRAM}-${CSS_CLUSTER}`,CSS_CLUSTER_ALT="cluster-alt",CSS_DIAGRAM_CLUSTER_ALT=`${CSS_DIAGRAM}-${CSS_CLUSTER_ALT}`,PARENT="parent",NOTE="note",DOMID_STATE="state",DOMID_TYPE_SPACER="----",NOTE_ID=`${DOMID_TYPE_SPACER}${NOTE}`,PARENT_ID=`${DOMID_TYPE_SPACER}${PARENT}`,G_EDGE_STYLE="fill:none",G_EDGE_ARROWHEADSTYLE="fill: #333",G_EDGE_LABELPOS="c",G_EDGE_LABELTYPE="text",G_EDGE_THICKNESS="normal";let nodeDb={},graphItemCount=0;const setConf$2=function(nt){const rt=Object.keys(nt);for(const it of rt)nt[it]},getClasses=function(nt,rt){log$1.trace("Extracting classes"),rt.db.clear();try{return rt.parser.parse(nt),rt.db.extract(rt.db.getRootDocV2()),rt.db.getClasses()}catch(it){return it}};function getClassesFromDbInfo(nt){return nt==null?"":nt.classes?nt.classes.join(" "):""}function stateDomId(nt="",rt=0,it="",st=DOMID_TYPE_SPACER){const _t=it!==null&&it.length>0?`${st}${it}`:"";return`${DOMID_STATE}-${nt}${_t}-${rt}`}const setupNode=(nt,rt,it,st,_t,xt)=>{const Et=it.id,kt=getClassesFromDbInfo(st[Et]);if(Et!=="root"){let Lt=SHAPE_STATE;it.start===!0&&(Lt=SHAPE_START),it.start===!1&&(Lt=SHAPE_END),it.type!==DEFAULT_STATE_TYPE&&(Lt=it.type),nodeDb[Et]||(nodeDb[Et]={id:Et,shape:Lt,description:common$1.sanitizeText(Et,getConfig$1()),classes:`${kt} ${CSS_DIAGRAM_STATE}`});const It=nodeDb[Et];it.description&&(Array.isArray(It.description)?(It.shape=SHAPE_STATE_WITH_DESC,It.description.push(it.description)):It.description.length>0?(It.shape=SHAPE_STATE_WITH_DESC,It.description===Et?It.description=[it.description]:It.description=[It.description,it.description]):(It.shape=SHAPE_STATE,It.description=it.description),It.description=common$1.sanitizeTextOrArray(It.description,getConfig$1())),It.description.length===1&&It.shape===SHAPE_STATE_WITH_DESC&&(It.shape=SHAPE_STATE),!It.type&&it.doc&&(log$1.info("Setting cluster for ",Et,getDir(it)),It.type="group",It.dir=getDir(it),It.shape=it.type===DIVIDER_TYPE?SHAPE_DIVIDER:SHAPE_GROUP,It.classes=It.classes+" "+CSS_DIAGRAM_CLUSTER+" "+(xt?CSS_DIAGRAM_CLUSTER_ALT:""));const Rt={labelStyle:"",shape:It.shape,labelText:It.description,classes:It.classes,style:"",id:Et,dir:It.dir,domId:stateDomId(Et,graphItemCount),type:It.type,padding:15};if(it.note){const Nt={labelStyle:"",shape:SHAPE_NOTE,labelText:it.note.text,classes:CSS_DIAGRAM_NOTE,style:"",id:Et+NOTE_ID+"-"+graphItemCount,domId:stateDomId(Et,graphItemCount,NOTE),type:It.type,padding:15},Bt={labelStyle:"",shape:SHAPE_NOTEGROUP,labelText:it.note.text,classes:It.classes,style:"",id:Et+PARENT_ID,domId:stateDomId(Et,graphItemCount,PARENT),type:"group",padding:0};graphItemCount++;const Ft=Et+PARENT_ID;nt.setNode(Ft,Bt),nt.setNode(Nt.id,Nt),nt.setNode(Et,Rt),nt.setParent(Et,Ft),nt.setParent(Nt.id,Ft);let Yt=Et,Zt=Nt.id;it.note.position==="left of"&&(Yt=Nt.id,Zt=Et),nt.setEdge(Yt,Zt,{arrowhead:"none",arrowType:"",style:G_EDGE_STYLE,labelStyle:"",classes:CSS_EDGE_NOTE_EDGE,arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS})}else nt.setNode(Et,Rt)}rt&&rt.id!=="root"&&(log$1.trace("Setting node ",Et," to be child of its parent ",rt.id),nt.setParent(Et,rt.id)),it.doc&&(log$1.trace("Adding nodes children "),setupDoc(nt,it,it.doc,st,_t,!xt))},setupDoc=(nt,rt,it,st,_t,xt)=>{log$1.trace("items",it),it.forEach(Et=>{switch(Et.stmt){case STMT_STATE:setupNode(nt,rt,Et,st,_t,xt);break;case DEFAULT_STATE_TYPE:setupNode(nt,rt,Et,st,_t,xt);break;case STMT_RELATION:{setupNode(nt,rt,Et.state1,st,_t,xt),setupNode(nt,rt,Et.state2,st,_t,xt);const kt={id:"edge"+graphItemCount,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:G_EDGE_STYLE,labelStyle:"",label:common$1.sanitizeText(Et.description,getConfig$1()),arrowheadStyle:G_EDGE_ARROWHEADSTYLE,labelpos:G_EDGE_LABELPOS,labelType:G_EDGE_LABELTYPE,thickness:G_EDGE_THICKNESS,classes:CSS_EDGE};nt.setEdge(Et.state1.id,Et.state2.id,kt,graphItemCount),graphItemCount++}break}})},getDir=(nt,rt=DEFAULT_NESTED_DOC_DIR)=>{let it=rt;if(nt.doc)for(let st=0;st<nt.doc.length;st++){const _t=nt.doc[st];_t.stmt==="dir"&&(it=_t.value)}return it},draw$2=function(nt,rt,it,st){log$1.info("Drawing state diagram (v2)",rt),nodeDb={},st.db.getDirection();const{securityLevel:_t,state:xt}=getConfig$1(),Et=xt.nodeSpacing||50,kt=xt.rankSpacing||50;log$1.info(st.db.getRootDocV2()),st.db.extract(st.db.getRootDocV2()),log$1.info(st.db.getRootDocV2());const Lt=st.db.getStates(),It=new Graph({multigraph:!0,compound:!0}).setGraph({rankdir:getDir(st.db.getRootDocV2()),nodesep:Et,ranksep:kt,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});setupNode(It,void 0,st.db.getRootDocV2(),Lt,st.db,!0);let Rt;_t==="sandbox"&&(Rt=select("#i"+rt));const Nt=select(_t==="sandbox"?Rt.nodes()[0].contentDocument.body:"body"),Bt=Nt.select(`[id="${rt}"]`),Ft=Nt.select("#"+rt+" g");render$1(Ft,It,["barb"],CSS_DIAGRAM,rt);const Yt=8;utils.insertTitle(Bt,"statediagramTitleText",xt.titleTopMargin,st.db.getDiagramTitle());const Zt=Bt.node().getBBox(),Wt=Zt.width+Yt*2,Kt=Zt.height+Yt*2;Bt.attr("class",CSS_DIAGRAM);const Jt=Bt.node().getBBox();configureSvgSize(Bt,Kt,Wt,xt.useMaxWidth);const on=`${Jt.x-Yt} ${Jt.y-Yt} ${Wt} ${Kt}`;log$1.debug(`viewBox ${on}`),Bt.attr("viewBox",on);const rn=document.querySelectorAll('[id="'+rt+'"] .edgeLabel .label');for(const ln of rn){const gn=ln.getBBox(),wn=document.createElementNS("http://www.w3.org/2000/svg",SHAPE_STATE);wn.setAttribute("rx",0),wn.setAttribute("ry",0),wn.setAttribute("width",gn.width),wn.setAttribute("height",gn.height),ln.insertBefore(wn,ln.firstChild)}},stateRendererV2={setConf:setConf$2,getClasses,draw:draw$2};var parser=function(){var nt=function(Zt,Wt,Kt,Jt){for(Kt=Kt||{},Jt=Zt.length;Jt--;Kt[Zt[Jt]]=Wt);return Kt},rt=[1,2],it=[1,5],st=[6,9,11,17,18,20,22,23,24,26],_t=[1,15],xt=[1,16],Et=[1,17],kt=[1,18],Lt=[1,19],It=[1,20],Rt=[1,24],Nt=[4,6,9,11,17,18,20,22,23,24,26],Bt={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(Wt,Kt,Jt,on,rn,ln,gn){var wn=ln.length-1;switch(rn){case 1:return ln[wn-1];case 3:this.$=[];break;case 4:ln[wn-1].push(ln[wn]),this.$=ln[wn-1];break;case 5:case 6:this.$=ln[wn];break;case 7:case 8:this.$=[];break;case 11:on.setDiagramTitle(ln[wn].substr(6)),this.$=ln[wn].substr(6);break;case 12:this.$=ln[wn].trim(),on.setAccTitle(this.$);break;case 13:case 14:this.$=ln[wn].trim(),on.setAccDescription(this.$);break;case 15:on.addSection(ln[wn].substr(8)),this.$=ln[wn].substr(8);break;case 16:on.addTask(ln[wn-1],ln[wn]),this.$="task";break;case 18:on.parseDirective("%%{","open_directive");break;case 19:on.parseDirective(ln[wn],"type_directive");break;case 20:ln[wn]=ln[wn].trim().replace(/'/g,'"'),on.parseDirective(ln[wn],"arg_directive");break;case 21:on.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:rt,7:3,12:4,26:it},{1:[3]},nt(st,[2,3],{5:6}),{3:7,4:rt,7:3,12:4,26:it},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:_t,18:xt,20:Et,22:kt,23:Lt,24:It,26:it},{1:[2,2]},{14:22,15:[1,23],29:Rt},nt([15,29],[2,19]),nt(st,[2,8],{1:[2,1]}),nt(st,[2,4]),{7:21,10:25,12:4,17:_t,18:xt,20:Et,22:kt,23:Lt,24:It,26:it},nt(st,[2,6]),nt(st,[2,7]),nt(st,[2,11]),{19:[1,26]},{21:[1,27]},nt(st,[2,14]),nt(st,[2,15]),{25:[1,28]},nt(st,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},nt(st,[2,5]),nt(st,[2,12]),nt(st,[2,13]),nt(st,[2,16]),nt(Nt,[2,9]),{14:32,29:Rt},{29:[2,20]},{11:[1,33]},nt(Nt,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(Wt,Kt){if(Kt.recoverable)this.trace(Wt);else{var Jt=new Error(Wt);throw Jt.hash=Kt,Jt}},parse:function(Wt){var Kt=this,Jt=[0],on=[],rn=[null],ln=[],gn=this.table,wn="",kn=0,Cn=0,Pn=2,An=1,cn=ln.slice.call(arguments,1),Ln=Object.create(this.lexer),an={yy:{}};for(var zn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,zn)&&(an.yy[zn]=this.yy[zn]);Ln.setInput(Wt,an.yy),an.yy.lexer=Ln,an.yy.parser=this,typeof Ln.yylloc>"u"&&(Ln.yylloc={});var dn=Ln.yylloc;ln.push(dn);var Fn=Ln.options&&Ln.options.ranges;typeof an.yy.parseError=="function"?this.parseError=an.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ir(){var xr;return xr=on.pop()||Ln.lex()||An,typeof xr!="number"&&(xr instanceof Array&&(on=xr,xr=on.pop()),xr=Kt.symbols_[xr]||xr),xr}for(var tr,Jn,hr,lr,cr={},Cr,Er,ar,Fr;;){if(Jn=Jt[Jt.length-1],this.defaultActions[Jn]?hr=this.defaultActions[Jn]:((tr===null||typeof tr>"u")&&(tr=ir()),hr=gn[Jn]&&gn[Jn][tr]),typeof hr>"u"||!hr.length||!hr[0]){var mr="";Fr=[];for(Cr in gn[Jn])this.terminals_[Cr]&&Cr>Pn&&Fr.push("'"+this.terminals_[Cr]+"'");Ln.showPosition?mr="Parse error on line "+(kn+1)+`:
`+Ln.showPosition()+`
Expecting `+Fr.join(", ")+", got '"+(this.terminals_[tr]||tr)+"'":mr="Parse error on line "+(kn+1)+": Unexpected "+(tr==An?"end of input":"'"+(this.terminals_[tr]||tr)+"'"),this.parseError(mr,{text:Ln.match,token:this.terminals_[tr]||tr,line:Ln.yylineno,loc:dn,expected:Fr})}if(hr[0]instanceof Array&&hr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Jn+", token: "+tr);switch(hr[0]){case 1:Jt.push(tr),rn.push(Ln.yytext),ln.push(Ln.yylloc),Jt.push(hr[1]),tr=null,Cn=Ln.yyleng,wn=Ln.yytext,kn=Ln.yylineno,dn=Ln.yylloc;break;case 2:if(Er=this.productions_[hr[1]][1],cr.$=rn[rn.length-Er],cr._$={first_line:ln[ln.length-(Er||1)].first_line,last_line:ln[ln.length-1].last_line,first_column:ln[ln.length-(Er||1)].first_column,last_column:ln[ln.length-1].last_column},Fn&&(cr._$.range=[ln[ln.length-(Er||1)].range[0],ln[ln.length-1].range[1]]),lr=this.performAction.apply(cr,[wn,Cn,kn,an.yy,hr[1],rn,ln].concat(cn)),typeof lr<"u")return lr;Er&&(Jt=Jt.slice(0,-1*Er*2),rn=rn.slice(0,-1*Er),ln=ln.slice(0,-1*Er)),Jt.push(this.productions_[hr[1]][0]),rn.push(cr.$),ln.push(cr._$),ar=gn[Jt[Jt.length-2]][Jt[Jt.length-1]],Jt.push(ar);break;case 3:return!0}}return!0}},Ft=function(){var Zt={EOF:1,parseError:function(Kt,Jt){if(this.yy.parser)this.yy.parser.parseError(Kt,Jt);else throw new Error(Kt)},setInput:function(Wt,Kt){return this.yy=Kt||this.yy||{},this._input=Wt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Wt=this._input[0];this.yytext+=Wt,this.yyleng++,this.offset++,this.match+=Wt,this.matched+=Wt;var Kt=Wt.match(/(?:\r\n?|\n).*/g);return Kt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Wt},unput:function(Wt){var Kt=Wt.length,Jt=Wt.split(/(?:\r\n?|\n)/g);this._input=Wt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Kt),this.offset-=Kt;var on=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Jt.length-1&&(this.yylineno-=Jt.length-1);var rn=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Jt?(Jt.length===on.length?this.yylloc.first_column:0)+on[on.length-Jt.length].length-Jt[0].length:this.yylloc.first_column-Kt},this.options.ranges&&(this.yylloc.range=[rn[0],rn[0]+this.yyleng-Kt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Wt){this.unput(this.match.slice(Wt))},pastInput:function(){var Wt=this.matched.substr(0,this.matched.length-this.match.length);return(Wt.length>20?"...":"")+Wt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Wt=this.match;return Wt.length<20&&(Wt+=this._input.substr(0,20-Wt.length)),(Wt.substr(0,20)+(Wt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Wt=this.pastInput(),Kt=new Array(Wt.length+1).join("-");return Wt+this.upcomingInput()+`
`+Kt+"^"},test_match:function(Wt,Kt){var Jt,on,rn;if(this.options.backtrack_lexer&&(rn={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(rn.yylloc.range=this.yylloc.range.slice(0))),on=Wt[0].match(/(?:\r\n?|\n).*/g),on&&(this.yylineno+=on.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:on?on[on.length-1].length-on[on.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Wt[0].length},this.yytext+=Wt[0],this.match+=Wt[0],this.matches=Wt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Wt[0].length),this.matched+=Wt[0],Jt=this.performAction.call(this,this.yy,this,Kt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Jt)return Jt;if(this._backtrack){for(var ln in rn)this[ln]=rn[ln];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Wt,Kt,Jt,on;this._more||(this.yytext="",this.match="");for(var rn=this._currentRules(),ln=0;ln<rn.length;ln++)if(Jt=this._input.match(this.rules[rn[ln]]),Jt&&(!Kt||Jt[0].length>Kt[0].length)){if(Kt=Jt,on=ln,this.options.backtrack_lexer){if(Wt=this.test_match(Jt,rn[ln]),Wt!==!1)return Wt;if(this._backtrack){Kt=!1;continue}else return!1}else if(!this.options.flex)break}return Kt?(Wt=this.test_match(Kt,rn[on]),Wt!==!1?Wt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Kt=this.next();return Kt||this.lex()},begin:function(Kt){this.conditionStack.push(Kt)},popState:function(){var Kt=this.conditionStack.length-1;return Kt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Kt){return Kt=this.conditionStack.length-1-Math.abs(Kt||0),Kt>=0?this.conditionStack[Kt]:"INITIAL"},pushState:function(Kt){this.begin(Kt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(Kt,Jt,on,rn){switch(on){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return Zt}();Bt.lexer=Ft;function Yt(){this.yy={}}return Yt.prototype=Bt,Bt.Parser=Yt,new Yt}();parser.parser=parser;const journeyParser=parser,journeyDetector=nt=>nt.match(/^\s*journey/)!==null;let currentSection="";const sections=[],tasks=[],rawTasks=[],parseDirective=function(nt,rt,it){mermaidAPI.parseDirective(this,nt,rt,it)},clear=function(){sections.length=0,tasks.length=0,currentSection="",rawTasks.length=0,clear$g()},addSection=function(nt){currentSection=nt,sections.push(nt)},getSections=function(){return sections},getTasks=function(){let nt=compileTasks();const rt=100;let it=0;for(;!nt&&it<rt;)nt=compileTasks(),it++;return tasks.push(...rawTasks),tasks},updateActors=function(){const nt=[];return tasks.forEach(it=>{it.people&&nt.push(...it.people)}),[...new Set(nt)].sort()},addTask=function(nt,rt){const it=rt.substr(1).split(":");let st=0,_t=[];it.length===1?(st=Number(it[0]),_t=[]):(st=Number(it[0]),_t=it[1].split(","));const xt=_t.map(kt=>kt.trim()),Et={section:currentSection,type:currentSection,people:xt,task:nt,score:st};rawTasks.push(Et)},addTaskOrg=function(nt){const rt={section:currentSection,type:currentSection,description:nt,task:nt,classes:[]};tasks.push(rt)},compileTasks=function(){const nt=function(it){return rawTasks[it].processed};let rt=!0;for(const[it,st]of rawTasks.entries())nt(it),rt=rt&&st.processed;return rt},getActors=function(){return updateActors()},journeyDb={parseDirective,getConfig:()=>getConfig$1().journey,clear,setDiagramTitle,getDiagramTitle,setAccTitle,getAccTitle,setAccDescription,getAccDescription,addSection,getSections,getTasks,addTask,addTaskOrg,getActors},drawRect=function(nt,rt){const it=nt.append("rect");return it.attr("x",rt.x),it.attr("y",rt.y),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("width",rt.width),it.attr("height",rt.height),it.attr("rx",rt.rx),it.attr("ry",rt.ry),rt.class!==void 0&&it.attr("class",rt.class),it},drawFace=function(nt,rt){const st=nt.append("circle").attr("cx",rt.cx).attr("cy",rt.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),_t=nt.append("g");_t.append("circle").attr("cx",rt.cx-15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),_t.append("circle").attr("cx",rt.cx+15/3).attr("cy",rt.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function xt(Lt){const It=arc().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",It).attr("transform","translate("+rt.cx+","+(rt.cy+2)+")")}function Et(Lt){const It=arc().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);Lt.append("path").attr("class","mouth").attr("d",It).attr("transform","translate("+rt.cx+","+(rt.cy+7)+")")}function kt(Lt){Lt.append("line").attr("class","mouth").attr("stroke",2).attr("x1",rt.cx-5).attr("y1",rt.cy+7).attr("x2",rt.cx+5).attr("y2",rt.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return rt.score>3?xt(_t):rt.score<3?Et(_t):kt(_t),st},drawCircle=function(nt,rt){const it=nt.append("circle");return it.attr("cx",rt.cx),it.attr("cy",rt.cy),it.attr("class","actor-"+rt.pos),it.attr("fill",rt.fill),it.attr("stroke",rt.stroke),it.attr("r",rt.r),it.class!==void 0&&it.attr("class",it.class),rt.title!==void 0&&it.append("title").text(rt.title),it},drawText=function(nt,rt){const it=rt.text.replace(/<br\s*\/?>/gi," "),st=nt.append("text");st.attr("x",rt.x),st.attr("y",rt.y),st.attr("class","legend"),st.style("text-anchor",rt.anchor),rt.class!==void 0&&st.attr("class",rt.class);const _t=st.append("tspan");return _t.attr("x",rt.x+rt.textMargin*2),_t.text(it),st},drawLabel=function(nt,rt){function it(_t,xt,Et,kt,Lt){return _t+","+xt+" "+(_t+Et)+","+xt+" "+(_t+Et)+","+(xt+kt-Lt)+" "+(_t+Et-Lt*1.2)+","+(xt+kt)+" "+_t+","+(xt+kt)}const st=nt.append("polygon");st.attr("points",it(rt.x,rt.y,50,20,7)),st.attr("class","labelBox"),rt.y=rt.y+rt.labelMargin,rt.x=rt.x+.5*rt.labelMargin,drawText(nt,rt)},drawSection=function(nt,rt,it){const st=nt.append("g"),_t=getNoteRect();_t.x=rt.x,_t.y=rt.y,_t.fill=rt.fill,_t.width=it.width,_t.height=it.height,_t.class="journey-section section-type-"+rt.num,_t.rx=3,_t.ry=3,drawRect(st,_t),_drawTextCandidateFunc(it)(rt.text,st,_t.x,_t.y,_t.width,_t.height,{class:"journey-section section-type-"+rt.num},it,rt.colour)};let taskCount=-1;const drawTask=function(nt,rt,it){const st=rt.x+it.width/2,_t=nt.append("g");taskCount++;const xt=300+5*30;_t.append("line").attr("id","task"+taskCount).attr("x1",st).attr("y1",rt.y).attr("x2",st).attr("y2",xt).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),drawFace(_t,{cx:st,cy:300+(5-rt.score)*30,score:rt.score});const Et=getNoteRect();Et.x=rt.x,Et.y=rt.y,Et.fill=rt.fill,Et.width=it.width,Et.height=it.height,Et.class="task task-type-"+rt.num,Et.rx=3,Et.ry=3,drawRect(_t,Et);let kt=rt.x+14;rt.people.forEach(Lt=>{const It=rt.actors[Lt].color,Rt={cx:kt,cy:rt.y,r:7,fill:It,stroke:"#000",title:Lt,pos:rt.actors[Lt].position};drawCircle(_t,Rt),kt+=10}),_drawTextCandidateFunc(it)(rt.task,_t,Et.x,Et.y,Et.width,Et.height,{class:"task"},it,rt.colour)},drawBackgroundRect=function(nt,rt){drawRect(nt,{x:rt.startx,y:rt.starty,width:rt.stopx-rt.startx,height:rt.stopy-rt.starty,fill:rt.fill,class:"rect"}).lower()},getTextObj=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},getNoteRect=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},_drawTextCandidateFunc=function(){function nt(_t,xt,Et,kt,Lt,It,Rt,Nt){const Bt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt+It/2+5).style("font-color",Nt).style("text-anchor","middle").text(_t);st(Bt,Rt)}function rt(_t,xt,Et,kt,Lt,It,Rt,Nt,Bt){const{taskFontSize:Ft,taskFontFamily:Yt}=Nt,Zt=_t.split(/<br\s*\/?>/gi);for(let Wt=0;Wt<Zt.length;Wt++){const Kt=Wt*Ft-Ft*(Zt.length-1)/2,Jt=xt.append("text").attr("x",Et+Lt/2).attr("y",kt).attr("fill",Bt).style("text-anchor","middle").style("font-size",Ft).style("font-family",Yt);Jt.append("tspan").attr("x",Et+Lt/2).attr("dy",Kt).text(Zt[Wt]),Jt.attr("y",kt+It/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),st(Jt,Rt)}}function it(_t,xt,Et,kt,Lt,It,Rt,Nt){const Bt=xt.append("switch"),Yt=Bt.append("foreignObject").attr("x",Et).attr("y",kt).attr("width",Lt).attr("height",It).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Yt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(_t),rt(_t,Bt,Et,kt,Lt,It,Rt,Nt),st(Yt,Rt)}function st(_t,xt){for(const Et in xt)Et in xt&&_t.attr(Et,xt[Et])}return function(_t){return _t.textPlacement==="fo"?it:_t.textPlacement==="old"?nt:rt}}(),initGraphics=function(nt){nt.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},svgDraw={drawRect,drawCircle,drawSection,drawText,drawLabel,drawTask,drawBackgroundRect,getTextObj,getNoteRect,initGraphics},setConf$1=function(nt){Object.keys(nt).forEach(function(it){conf$1[it]=nt[it]})},actors={};function drawActorLegend(nt){const rt=getConfig$1().journey;let it=60;Object.keys(actors).forEach(st=>{const _t=actors[st].color,xt={cx:20,cy:it,r:7,fill:_t,stroke:"#000",pos:actors[st].position};svgDraw.drawCircle(nt,xt);const Et={x:40,y:it+7,fill:"#666",text:st,textMargin:rt.boxTextMargin|5};svgDraw.drawText(nt,Et),it+=20})}const conf$1=getConfig$1().journey,LEFT_MARGIN=conf$1.leftMargin,draw$1=function(nt,rt,it,st){const _t=getConfig$1().journey;st.db.clear(),st.parser.parse(nt+`
`);const xt=getConfig$1().securityLevel;let Et;xt==="sandbox"&&(Et=select("#i"+rt));const kt=select(xt==="sandbox"?Et.nodes()[0].contentDocument.body:"body");bounds.init();const Lt=kt.select("#"+rt);svgDraw.initGraphics(Lt);const It=st.db.getTasks(),Rt=st.db.getDiagramTitle(),Nt=st.db.getActors();for(const Kt in actors)delete actors[Kt];let Bt=0;Nt.forEach(Kt=>{actors[Kt]={color:_t.actorColours[Bt%_t.actorColours.length],position:Bt},Bt++}),drawActorLegend(Lt),bounds.insert(0,0,LEFT_MARGIN,Object.keys(actors).length*50),drawTasks(Lt,It,0);const Ft=bounds.getBounds();Rt&&Lt.append("text").text(Rt).attr("x",LEFT_MARGIN).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const Yt=Ft.stopy-Ft.starty+2*_t.diagramMarginY,Zt=LEFT_MARGIN+Ft.stopx+2*_t.diagramMarginX;configureSvgSize(Lt,Yt,Zt,_t.useMaxWidth),Lt.append("line").attr("x1",LEFT_MARGIN).attr("y1",_t.height*4).attr("x2",Zt-LEFT_MARGIN-4).attr("y2",_t.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const Wt=Rt?70:0;Lt.attr("viewBox",`${Ft.startx} -25 ${Zt} ${Yt+Wt}`),Lt.attr("preserveAspectRatio","xMinYMin meet"),Lt.attr("height",Yt+Wt+25)},bounds={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(nt,rt,it,st){nt[rt]===void 0?nt[rt]=it:nt[rt]=st(it,nt[rt])},updateBounds:function(nt,rt,it,st){const _t=getConfig$1().journey,xt=this;let Et=0;function kt(Lt){return function(Rt){Et++;const Nt=xt.sequenceItems.length-Et+1;xt.updateVal(Rt,"starty",rt-Nt*_t.boxMargin,Math.min),xt.updateVal(Rt,"stopy",st+Nt*_t.boxMargin,Math.max),xt.updateVal(bounds.data,"startx",nt-Nt*_t.boxMargin,Math.min),xt.updateVal(bounds.data,"stopx",it+Nt*_t.boxMargin,Math.max),Lt!=="activation"&&(xt.updateVal(Rt,"startx",nt-Nt*_t.boxMargin,Math.min),xt.updateVal(Rt,"stopx",it+Nt*_t.boxMargin,Math.max),xt.updateVal(bounds.data,"starty",rt-Nt*_t.boxMargin,Math.min),xt.updateVal(bounds.data,"stopy",st+Nt*_t.boxMargin,Math.max))}}this.sequenceItems.forEach(kt())},insert:function(nt,rt,it,st){const _t=Math.min(nt,it),xt=Math.max(nt,it),Et=Math.min(rt,st),kt=Math.max(rt,st);this.updateVal(bounds.data,"startx",_t,Math.min),this.updateVal(bounds.data,"starty",Et,Math.min),this.updateVal(bounds.data,"stopx",xt,Math.max),this.updateVal(bounds.data,"stopy",kt,Math.max),this.updateBounds(_t,Et,xt,kt)},bumpVerticalPos:function(nt){this.verticalPos=this.verticalPos+nt,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},fills=conf$1.sectionFills,textColours=conf$1.sectionColours,drawTasks=function(nt,rt,it){const st=getConfig$1().journey;let _t="";const xt=st.height*2+st.diagramMarginY,Et=it+xt;let kt=0,Lt="#CCC",It="black",Rt=0;for(const[Nt,Bt]of rt.entries()){if(_t!==Bt.section){Lt=fills[kt%fills.length],Rt=kt%fills.length,It=textColours[kt%textColours.length];const Yt={x:Nt*st.taskMargin+Nt*st.width+LEFT_MARGIN,y:50,text:Bt.section,fill:Lt,num:Rt,colour:It};svgDraw.drawSection(nt,Yt,st),_t=Bt.section,kt++}const Ft=Bt.people.reduce((Yt,Zt)=>(actors[Zt]&&(Yt[Zt]=actors[Zt]),Yt),{});Bt.x=Nt*st.taskMargin+Nt*st.width+LEFT_MARGIN,Bt.y=Et,Bt.width=st.diagramMarginX,Bt.height=st.diagramMarginY,Bt.colour=It,Bt.fill=Lt,Bt.num=Rt,Bt.actors=Ft,svgDraw.drawTask(nt,Bt,st),bounds.insert(Bt.x,Bt.y,Bt.x+Bt.width+st.taskMargin,300+5*30)}},journeyRenderer={setConf:setConf$1,draw:draw$1};let conf={};const setConf=function(nt){conf={...conf,...nt}},draw=(nt,rt,it)=>{try{log$1.debug(`Renering svg for syntax error
`);const st=select("#"+rt),_t=st.append("g");_t.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),_t.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),_t.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),_t.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),_t.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),_t.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),_t.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),_t.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+it),st.attr("height",100),st.attr("width",500),st.attr("viewBox","768 0 912 512")}catch(st){log$1.error("Error while rendering info diagram"),log$1.error(getErrorMessage(st))}},errorRenderer={setConf,draw},id$2="flowchart-elk",detector$2=(nt,rt)=>{var it;return!!(nt.match(/^\s*flowchart-elk/)||nt.match(/^\s*flowchart|graph/)&&((it=rt==null?void 0:rt.flowchart)==null?void 0:it.defaultRenderer)==="elk")},loader$2=async()=>{const{diagram:nt}=await __vitePreload(()=>import("./flowchart-elk-definition-170a3958-63cb3c50.js"),[]);return{id:id$2,diagram:nt}},plugin$2={id:id$2,detector:detector$2,loader:loader$2},flowchartElk=plugin$2,id$1$1="timeline",detector$1=nt=>nt.match(/^\s*timeline/)!==null,loader$1=async()=>{const{diagram:nt}=await __vitePreload(()=>import("./timeline-definition-8e5a9bc6-2d00007f.js"),["js/timeline-definition-8e5a9bc6-2d00007f.js","js/is_dark-4b7ec5f8.js"]);return{id:id$1$1,diagram:nt}},plugin$1={id:id$1$1,detector:detector$1,loader:loader$1},timelineDetector=plugin$1,id$3="mindmap",detector=nt=>nt.match(/^\s*mindmap/)!==null,loader=async()=>{const{diagram:nt}=await __vitePreload(()=>import("./mindmap-definition-44684416-af5e37cc.js"),["js/mindmap-definition-44684416-af5e37cc.js","js/is_dark-4b7ec5f8.js"]);return{id:id$3,diagram:nt}},plugin={id:id$3,detector,loader},mindmapDetector=plugin;let hasLoadedDiagrams=!1;const addDiagrams=()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerLazyLoadedDiagrams(flowchartElk,timelineDetector,mindmapDetector),registerDiagram("error",{db:{clear:()=>{}},styles:errorStyles,renderer:errorRenderer,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},nt=>nt.toLowerCase().trim()==="error"),registerDiagram("---",{db:{clear:()=>{}},styles:errorStyles,renderer:errorRenderer,parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with unindented `---` blocks")}},init:()=>null},nt=>nt.toLowerCase().trimStart().startsWith("---")),registerDiagram("c4",{parser:c4Parser,db:c4Db,renderer:c4Renderer,styles:c4Styles,init:nt=>{c4Renderer.setConf(nt.c4)}},c4Detector),registerDiagram("class",{parser:classParser,db:classDb,renderer:classRenderer,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetector),registerDiagram("classDiagram",{parser:classParser,db:classDb,renderer:classRendererV2,styles:classStyles,init:nt=>{nt.class||(nt.class={}),nt.class.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,classDb.clear()}},classDetectorV2),registerDiagram("er",{parser:erParser,db:erDb,renderer:erRenderer,styles:erStyles},erDetector),registerDiagram("gantt",{parser:ganttParser,db:ganttDb,renderer:ganttRenderer,styles:ganttStyles},ganttDetector),registerDiagram("info",{parser:infoParser,db:infoDb,renderer:infoRenderer,styles:infoStyles},infoDetector),registerDiagram("pie",{parser:pieParser,db:pieDb,renderer:pieRenderer,styles:pieStyles},pieDetector),registerDiagram("requirement",{parser:requirementParser,db:requirementDb,renderer:requirementRenderer,styles:requirementStyles},requirementDetector),registerDiagram("sequence",{parser:sequenceParser,db:sequenceDb,renderer:sequenceRenderer,styles:sequenceStyles,init:nt=>{if(nt.sequence||(nt.sequence={}),nt.sequence.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,"sequenceDiagram"in nt)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");sequenceDb.setWrap(nt.wrap),sequenceRenderer.setConf(nt.sequence)}},sequenceDetector),registerDiagram("state",{parser:stateParser,db:stateDb,renderer:stateRenderer,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetector),registerDiagram("stateDiagram",{parser:stateParser,db:stateDb,renderer:stateRendererV2,styles:stateStyles,init:nt=>{nt.state||(nt.state={}),nt.state.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,stateDb.clear()}},stateDetectorV2),registerDiagram("journey",{parser:journeyParser,db:journeyDb,renderer:journeyRenderer,styles:journeyStyles,init:nt=>{journeyRenderer.setConf(nt.journey),journeyDb.clear()}},journeyDetector),registerDiagram("flowchart",{parser:parser$8,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,flowRenderer.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-1")}},flowDetector),registerDiagram("flowchart-v2",{parser:parser$8,db:flowDb,renderer:flowRendererV2,styles:flowStyles,init:nt=>{nt.flowchart||(nt.flowchart={}),nt.flowchart.arrowMarkerAbsolute=nt.arrowMarkerAbsolute,setConfig({flowchart:{arrowMarkerAbsolute:nt.arrowMarkerAbsolute}}),flowRendererV2.setConf(nt.flowchart),flowDb.clear(),flowDb.setGen("gen-2")}},flowDetectorV2),registerDiagram("gitGraph",{parser:gitGraphParser,db:gitGraphDb,renderer:gitGraphRenderer,styles:gitGraphStyles},gitGraphDetector))};class Diagram{constructor(rt,it){var st,_t;this.txt=rt,this.type="graph",this.detectTypeFailed=!1;const xt=getConfig$1();this.txt=rt;try{this.type=detectType(rt,xt)}catch(Lt){this.handleError(Lt,it),this.type="error",this.detectTypeFailed=!0}const Et=getDiagram(this.type);log$1.debug("Type "+this.type),this.db=Et.db,(_t=(st=this.db).clear)==null||_t.call(st),this.renderer=Et.renderer,this.parser=Et.parser;const kt=this.parser.parse.bind(this.parser);this.parser.parse=Lt=>kt(extractFrontMatter(Lt,this.db)),this.parser.parser.yy=this.db,Et.init&&(Et.init(xt),log$1.info("Initialized diagram "+this.type,xt)),this.txt+=`
`,this.parse(this.txt,it)}parse(rt,it){var st,_t;if(this.detectTypeFailed)return!1;try{return rt=rt+`
`,(_t=(st=this.db).clear)==null||_t.call(st),this.parser.parse(rt),!0}catch(xt){this.handleError(xt,it)}return!1}handleError(rt,it){if(it===void 0)throw rt;if(isDetailedError(rt)){it(rt.str,rt.hash);return}it(rt)}getParser(){return this.parser}getType(){return this.type}}const getDiagramFromText=(nt,rt)=>{const it=detectType(nt,getConfig$1());try{getDiagram(it)}catch{const _t=getDiagramLoader(it);if(!_t)throw new Error(`Diagram ${it} not found.`);return _t().then(({diagram:xt})=>(registerDiagram(it,xt,void 0),new Diagram(nt,rt)))}return new Diagram(nt,rt)},Diagram$1=Diagram,SVG_ROLE="graphics-document document";function setA11yDiagramInfo(nt,rt){nt.attr("role",SVG_ROLE),isEmpty(rt)||nt.attr("aria-roledescription",rt)}function addSVGa11yTitleDescription(nt,rt,it,st){if(nt.insert!==void 0)if(rt||it){if(it){const _t="chart-desc-"+st;nt.attr("aria-describedby",_t),nt.insert("desc",":first-child").attr("id",_t).text(it)}if(rt){const _t="chart-title-"+st;nt.attr("aria-labelledby",_t),nt.insert("title",":first-child").attr("id",_t).text(rt)}}else return}const CLASSDEF_DIAGRAMS=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],MAX_TEXTLENGTH_EXCEEDED_MSG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",SECURITY_LVL_SANDBOX="sandbox",SECURITY_LVL_LOOSE="loose",XMLNS_SVG_STD="http://www.w3.org/2000/svg",XMLNS_XLINK_STD="http://www.w3.org/1999/xlink",XMLNS_XHTML_STD="http://www.w3.org/1999/xhtml",IFRAME_WIDTH="100%",IFRAME_HEIGHT="100%",IFRAME_STYLES="border:0;margin:0;",IFRAME_BODY_STYLE="margin:0",IFRAME_SANDBOX_OPTS="allow-top-navigation-by-user-activation allow-popups",IFRAME_NOT_SUPPORTED_MSG='The "iframe" tag is not supported by your browser.',DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function parse$1(nt,rt){return addDiagrams(),new Diagram$1(nt,rt).parse(nt,rt)}async function parseAsync$1(nt,rt){return addDiagrams(),(await getDiagramFromText(nt,rt)).parse(nt,rt)}const encodeEntities=function(nt){let rt=nt;return rt=rt.replace(/style.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/classDef.*:\S*#.*;/g,function(it){return it.substring(0,it.length-1)}),rt=rt.replace(/#\w+;/g,function(it){const st=it.substring(1,it.length-1);return/^\+?\d+$/.test(st)?"\uFB02\xB0\xB0"+st+"\xB6\xDF":"\uFB02\xB0"+st+"\xB6\xDF"}),rt},decodeEntities=function(nt){let rt=nt;return rt=rt.replace(/ﬂ°°/g,"&#"),rt=rt.replace(/ﬂ°/g,"&"),rt=rt.replace(/¶ß/g,";"),rt},cssImportantStyles=(nt,rt,it=[])=>`
.${nt} ${rt} { ${it.join(" !important; ")} !important; }`,createCssStyles=(nt,rt,it={})=>{var st;let _t="";if(nt.themeCSS!==void 0&&(_t+=`
${nt.themeCSS}`),nt.fontFamily!==void 0&&(_t+=`
:root { --mermaid-font-family: ${nt.fontFamily}}`),nt.altFontFamily!==void 0&&(_t+=`
:root { --mermaid-alt-font-family: ${nt.altFontFamily}}`),!isEmpty(it)&&CLASSDEF_DIAGRAMS.includes(rt)){const Lt=nt.htmlLabels||((st=nt.flowchart)==null?void 0:st.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const It in it){const Rt=it[It];isEmpty(Rt.styles)||Lt.forEach(Nt=>{_t+=cssImportantStyles(Rt.id,Nt,Rt.styles)}),isEmpty(Rt.textStyles)||(_t+=cssImportantStyles(Rt.id,"tspan",Rt.textStyles))}}return _t},createUserStyles=(nt,rt,it,st)=>{const _t=createCssStyles(nt,rt,it),xt=getStyles$2(rt,_t,nt.themeVariables);return serialize(compile(`${st}{${xt}}`),stringify)},cleanUpSvgCode=(nt="",rt,it)=>{let st=nt;return!it&&!rt&&(st=st.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),st=decodeEntities(st),st=st.replace(/<br>/g,"<br/>"),st},putIntoIFrame=(nt="",rt)=>{const it=rt?rt.viewBox.baseVal.height+"px":IFRAME_HEIGHT,st=btoa('<body style="'+IFRAME_BODY_STYLE+'">'+nt+"</body>");return`<iframe style="width:${IFRAME_WIDTH};height:${it};${IFRAME_STYLES}" src="data:text/html;base64,${st}" sandbox="${IFRAME_SANDBOX_OPTS}">
  ${IFRAME_NOT_SUPPORTED_MSG}
</iframe>`},appendDivSvgG=(nt,rt,it,st,_t)=>{const xt=nt.append("div");xt.attr("id",it),st&&xt.attr("style",st);const Et=xt.append("svg").attr("id",rt).attr("width","100%").attr("xmlns",XMLNS_SVG_STD);return _t&&Et.attr("xmlns:xlink",_t),Et.append("g"),nt};function sandboxedIframe(nt,rt){return nt.append("iframe").attr("id",rt).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const removeExistingElements=(nt,rt,it,st)=>{var _t,xt,Et;(_t=nt.getElementById(rt))==null||_t.remove(),(xt=nt.getElementById(it))==null||xt.remove(),(Et=nt.getElementById(st))==null||Et.remove()},render=function(nt,rt,it,st){var ir;var _t,xt,Et,kt;addDiagrams(),reset();const Lt=utils.detectInit(rt);Lt&&(directiveSanitizer(Lt),addDirective(Lt));const It=getConfig$1();log$1.debug(It),rt.length>((ir=It==null?void 0:It.maxTextSize)!=null?ir:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const Rt="#"+nt,Nt="i"+nt,Bt="#"+Nt,Ft="d"+nt,Yt="#"+Ft;let Zt=select("body");const Wt=It.securityLevel===SECURITY_LVL_SANDBOX,Kt=It.securityLevel===SECURITY_LVL_LOOSE,Jt=It.fontFamily;if(st!==void 0){if(st&&(st.innerHTML=""),Wt){const tr=sandboxedIframe(select(st),Nt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select(st);appendDivSvgG(Zt,nt,Ft,`font-family: ${Jt}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Ft,Nt),Wt){const tr=sandboxedIframe(select("body"),Nt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select("body");appendDivSvgG(Zt,nt,Ft)}rt=encodeEntities(rt);let on,rn;try{if(on=getDiagramFromText(rt),"then"in on)throw new Error("Diagram is a promise. Use renderAsync.")}catch(tr){on=new Diagram$1("error"),rn=tr}const ln=Zt.select(Yt).node(),gn=on.type,wn=ln.firstChild,kn=wn.firstChild,Cn=CLASSDEF_DIAGRAMS.includes(gn)?on.renderer.getClasses(rt,on):{},Pn=createUserStyles(It,gn,Cn,Rt),An=document.createElement("style");An.innerHTML=Pn,wn.insertBefore(An,kn);try{on.renderer.draw(rt,nt,version$1,on)}catch(tr){throw errorRenderer.draw(rt,nt,version$1),tr}const cn=Zt.select(`${Yt} svg`),Ln=(xt=(_t=on.db).getAccTitle)==null?void 0:xt.call(_t),an=(kt=(Et=on.db).getAccDescription)==null?void 0:kt.call(Et);addA11yInfo(gn,cn,Ln,an),Zt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let zn=Zt.select(Yt).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",It.arrowMarkerAbsolute),zn=cleanUpSvgCode(zn,Wt,evaluate(It.arrowMarkerAbsolute)),Wt){const tr=Zt.select(Yt+" svg").node();zn=putIntoIFrame(zn,tr)}else Kt||(zn=purify.sanitize(zn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(gn){case"flowchart":case"flowchart-v2":it(zn,flowDb.bindFunctions);break;case"gantt":it(zn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(zn,classDb.bindFunctions);break;default:it(zn)}else log$1.debug("CB = undefined!");attachFunctions();const Fn=select(Wt?Bt:Yt).node();if(Fn&&"remove"in Fn&&Fn.remove(),rn)throw rn;return zn},renderAsync$1=async function(nt,rt,it,st){var ir;var _t,xt,Et,kt;addDiagrams(),reset();const Lt=utils.detectInit(rt);Lt&&(directiveSanitizer(Lt),addDirective(Lt));const It=getConfig$1();log$1.debug(It),rt.length>((ir=It==null?void 0:It.maxTextSize)!=null?ir:5e4)&&(rt=MAX_TEXTLENGTH_EXCEEDED_MSG),rt=rt.replace(/\r\n?/g,`
`);const Rt="#"+nt,Nt="i"+nt,Bt="#"+Nt,Ft="d"+nt,Yt="#"+Ft;let Zt=select("body");const Wt=It.securityLevel===SECURITY_LVL_SANDBOX,Kt=It.securityLevel===SECURITY_LVL_LOOSE,Jt=It.fontFamily;if(st!==void 0){if(st&&(st.innerHTML=""),Wt){const tr=sandboxedIframe(select(st),Nt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select(st);appendDivSvgG(Zt,nt,Ft,`font-family: ${Jt}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,nt,Ft,Nt),Wt){const tr=sandboxedIframe(select("body"),Nt);Zt=select(tr.nodes()[0].contentDocument.body),Zt.node().style.margin=0}else Zt=select("body");appendDivSvgG(Zt,nt,Ft)}rt=encodeEntities(rt);let on,rn;try{on=await getDiagramFromText(rt)}catch(tr){on=new Diagram$1("error"),rn=tr}const ln=Zt.select(Yt).node(),gn=on.type,wn=ln.firstChild,kn=wn.firstChild,Cn=CLASSDEF_DIAGRAMS.includes(gn)?on.renderer.getClasses(rt,on):{},Pn=createUserStyles(It,gn,Cn,Rt),An=document.createElement("style");An.innerHTML=Pn,wn.insertBefore(An,kn);try{await on.renderer.draw(rt,nt,version$1,on)}catch(tr){throw errorRenderer.draw(rt,nt,version$1),tr}const cn=Zt.select(`${Yt} svg`),Ln=(xt=(_t=on.db).getAccTitle)==null?void 0:xt.call(_t),an=(kt=(Et=on.db).getAccDescription)==null?void 0:kt.call(Et);addA11yInfo(gn,cn,Ln,an),Zt.select(`[id="${nt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let zn=Zt.select(Yt).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",It.arrowMarkerAbsolute),zn=cleanUpSvgCode(zn,Wt,evaluate(It.arrowMarkerAbsolute)),Wt){const tr=Zt.select(Yt+" svg").node();zn=putIntoIFrame(zn,tr)}else Kt||(zn=purify.sanitize(zn,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(it!==void 0)switch(gn){case"flowchart":case"flowchart-v2":it(zn,flowDb.bindFunctions);break;case"gantt":it(zn,ganttDb.bindFunctions);break;case"class":case"classDiagram":it(zn,classDb.bindFunctions);break;default:it(zn)}else log$1.debug("CB = undefined!");attachFunctions();const Fn=select(Wt?Bt:Yt).node();if(Fn&&"remove"in Fn&&Fn.remove(),rn)throw rn;return zn};function initialize$1(nt={}){var rt;(nt==null?void 0:nt.fontFamily)&&!((rt=nt.themeVariables)!=null&&rt.fontFamily)&&(nt.themeVariables={fontFamily:nt.fontFamily}),saveConfigFromInitialize(nt),(nt==null?void 0:nt.theme)&&nt.theme in theme?nt.themeVariables=theme[nt.theme].getThemeVariables(nt.themeVariables):nt&&(nt.themeVariables=theme.default.getThemeVariables(nt.themeVariables));const it=typeof nt=="object"?setSiteConfig(nt):getSiteConfig();setLogLevel$1(it.logLevel),addDiagrams()}function addA11yInfo(nt,rt,it,st){setA11yDiagramInfo(rt,nt),addSVGa11yTitleDescription(rt,it,st,rt.attr("id"))}const mermaidAPI=Object.freeze({render,renderAsync:renderAsync$1,parse:parse$1,parseAsync:parseAsync$1,parseDirective:parseDirective$c,initialize:initialize$1,getConfig:getConfig$1,setConfig,getSiteConfig,updateSiteConfig,reset:()=>{reset()},globalReset:()=>{reset(defaultConfig)},defaultConfig});setLogLevel$1(getConfig$1().logLevel);reset(getConfig$1());const init$1=async function(nt,rt,it){try{await initThrowsErrorsAsync(nt,rt,it)}catch(st){log$1.warn("Syntax Error rendering"),isDetailedError(st)&&log$1.warn(st.str),mermaid.parseError&&mermaid.parseError(st)}},handleError=(nt,rt,it)=>{log$1.warn(nt),isDetailedError(nt)?(it&&it(nt.str,nt.hash),rt.push({...nt,message:nt.str,error:nt})):(it&&it(nt),nt instanceof Error&&rt.push({str:nt.message,message:nt.message,hash:nt.name,error:nt}))},initThrowsErrors=function(nt,rt,it){const st=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let _t;if(rt===void 0)_t=document.querySelectorAll(".mermaid");else if(typeof rt=="string")_t=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)_t=[rt];else if(rt instanceof NodeList)_t=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${_t.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const xt=new utils.initIdGenerator(st.deterministicIds,st.deterministicIDSeed);let Et;const kt=[];for(const Lt of Array.from(_t)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const It=`mermaid-${xt.next()}`;Et=Lt.innerHTML,Et=dedent(utils.entityDecode(Et)).trim().replace(/<br\s*\/?>/gi,"<br/>");const Rt=utils.detectInit(Et);Rt&&log$1.debug("Detected early reinit: ",Rt);try{mermaidAPI.render(It,Et,(Nt,Bt)=>{Lt.innerHTML=Nt,it!==void 0&&it(It),Bt&&Bt(Lt)},Lt)}catch(Nt){handleError(Nt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},loadExternalDiagrams=async(...nt)=>{log$1.debug(`Loading ${nt.length} external diagrams`);const it=(await Promise.allSettled(nt.map(async({id:st,detector:_t,loader:xt})=>{const{diagram:Et}=await xt();registerDiagram(st,Et,_t)}))).filter(st=>st.status==="rejected");if(it.length>0){log$1.error(`Failed to load ${it.length} external diagrams`);for(const st of it)log$1.error(st);throw new Error(`Failed to load ${it.length} external diagrams`)}},initThrowsErrorsAsync=async function(nt,rt,it){const st=mermaidAPI.getConfig();nt&&(mermaid.sequenceConfig=nt),log$1.debug(`${it?"":"No "}Callback function found`);let _t;if(rt===void 0)_t=document.querySelectorAll(".mermaid");else if(typeof rt=="string")_t=document.querySelectorAll(rt);else if(rt instanceof HTMLElement)_t=[rt];else if(rt instanceof NodeList)_t=rt;else throw new Error("Invalid argument nodes for mermaid.init");log$1.debug(`Found ${_t.length} diagrams`),(nt==null?void 0:nt.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(nt==null?void 0:nt.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:nt==null?void 0:nt.startOnLoad}));const xt=new utils.initIdGenerator(st.deterministicIds,st.deterministicIDSeed);let Et;const kt=[];for(const Lt of Array.from(_t)){log$1.info("Rendering diagram: "+Lt.id);/*! Check if previously processed */if(Lt.getAttribute("data-processed"))continue;Lt.setAttribute("data-processed","true");const It=`mermaid-${xt.next()}`;Et=Lt.innerHTML,Et=dedent(utils.entityDecode(Et)).trim().replace(/<br\s*\/?>/gi,"<br/>");const Rt=utils.detectInit(Et);Rt&&log$1.debug("Detected early reinit: ",Rt);try{await mermaidAPI.renderAsync(It,Et,(Nt,Bt)=>{Lt.innerHTML=Nt,it!==void 0&&it(It),Bt&&Bt(Lt)},Lt)}catch(Nt){handleError(Nt,kt,mermaid.parseError)}}if(kt.length>0)throw kt[0]},initialize=function(nt){mermaidAPI.initialize(nt)},registerExternalDiagrams=async(nt,{lazyLoad:rt=!0}={})=>{rt?registerLazyLoadedDiagrams(...nt):await loadExternalDiagrams(...nt)},contentLoaded=function(){if(mermaid.startOnLoad){const{startOnLoad:nt}=mermaidAPI.getConfig();nt&&mermaid.init().catch(rt=>log$1.error("Mermaid failed to initialize",rt))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",contentLoaded,!1)}const setParseErrorHandler=function(nt){mermaid.parseError=nt},parse=nt=>mermaidAPI.parse(nt,mermaid.parseError),executionQueue=[];let executionQueueRunning=!1;const executeQueue=async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const nt=executionQueue.shift();if(nt)try{await nt()}catch(rt){log$1.error("Error executing queue",rt)}}executionQueueRunning=!1}},parseAsync=nt=>new Promise((rt,it)=>{const st=()=>new Promise((_t,xt)=>{mermaidAPI.parseAsync(nt,mermaid.parseError).then(Et=>{_t(Et),rt(Et)},Et=>{log$1.error("Error parsing",Et),xt(Et),it(Et)})});executionQueue.push(st),executeQueue().catch(it)}),renderAsync=(nt,rt,it,st)=>new Promise((_t,xt)=>{const Et=()=>new Promise((kt,Lt)=>{mermaidAPI.renderAsync(nt,rt,it,st).then(It=>{kt(It),_t(It)},It=>{log$1.error("Error parsing",It),Lt(It),xt(It)})});executionQueue.push(Et),executeQueue().catch(xt)}),mermaid={startOnLoad:!0,diagrams:{},mermaidAPI,parse,parseAsync,render:mermaidAPI.render,renderAsync,init:init$1,initThrowsErrors,initThrowsErrorsAsync,registerExternalDiagrams,initialize,parseError:void 0,contentLoaded,setParseErrorHandler},_hoisted_1$9={class:"content"},_hoisted_2$6={key:0,id:"caption-bar"},_hoisted_3$6=["innerHTML"],_sfc_main$c=defineComponent({__name:"Mermaid.ce",props:{type:{type:String},caption:{type:String},width:{type:String},height:{type:String},position:{type:String},right:{type:Boolean},left:{type:Boolean},full:{type:Boolean},sticky:{type:Boolean}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var It;return(It=it==null?void 0:it.value)==null?void 0:It.parentNode}),_t=computed(()=>{var It,Rt;return(Rt=(It=it.value)==null?void 0:It.getRootNode())==null?void 0:Rt.host}),xt=computed(()=>{var It;return(It=st.value)==null?void 0:It.querySelector(".content")});watch$1(_t,()=>kt());const Et=rt.position||(rt.right?"right":rt.left?"left":"full");function kt(){_t.value.classList.add("ve-component"),_t.value.classList.add(Et),Et==="full"?_t.value.style.width="100%":(_t.value.style.float=Et,_t.value.style.width="50%"),_t.value.style.width=window.getComputedStyle(_t.value).width,xt.value.style.width=rt.width||"100%";let It=parseInt(window.getComputedStyle(xt.value).width.slice(0,-2));xt.value.style.width=`${It}px`,Lt()}function Lt(){let It=_t.value.textContent.trim();mermaid.initialize({startOnLoad:!1}),async function(){var Bt;let Rt=(Bt=st.value)==null?void 0:Bt.querySelector("#diagram");const Nt=function(Ft){Rt&&(Rt.innerHTML=Ft)};await mermaid.render("diagram",It,Nt)}()}return(It,Rt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[createBaseVNode("div",_hoisted_1$9,[Rt[0]||(Rt[0]=createBaseVNode("div",{id:"diagram"},null,-1)),rt.caption?(openBlock(),createElementBlock("div",_hoisted_2$6,[createBaseVNode("div",{class:"label",innerHTML:nt.caption},null,8,_hoisted_3$6)])):createCommentVNode("",!0)])],512))}}),_style_0$6=`*{box-sizing:border-box}.content{display:flex;flex-direction:column;justify-content:center;align-content:center;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}#diagram{display:block;margin:auto;width:100%;padding:12px 0}#caption-bar{display:flex;align-items:center;height:32px;width:100%;background-color:#555;color:#fff;padding:0 12px}.entityBox:hover{fill:#ff0}
`,Mermaid=_export_sfc(_sfc_main$c,[["styles",[_style_0$6]]]),_hoisted_1$8=["innerHTML"],_sfc_main$b=defineComponent({__name:"Modal.ce",props:{src:{type:String},prefix:{type:String},label:{type:String},buttonLabel:{type:String,default:"Show me"},buttonIcon:{type:String},width:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Ft;return(Ft=it==null?void 0:it.value)==null?void 0:Ft.parentNode}),_t=computed(()=>{var Ft,Yt;return(Yt=(Ft=it.value)==null?void 0:Ft.getRootNode())==null?void 0:Yt.host}),xt=computed(()=>{var Ft;return(Ft=st.value)==null?void 0:Ft.querySelector("#main")}),Et=ref("80vw"),kt=ref(!1);watch$1(kt,()=>{Lt.open=kt.value,Rt.value||Nt()});let Lt;const It=ref(),Rt=ref();watch$1(_t,()=>{Et.value=rt.width||(isMobile()?"100vw":"80vh");let Ft=_t.value.textContent.split(`
`),Yt=[];if(Ft.forEach(Zt=>{(Zt.trim().length>0||Yt.length>0)&&Yt.push(Zt)}),Yt.length>0){let Zt=(Yt[0].match(/(^\s+)/)||[""])[0].length;It.value=Yt.map(Wt=>(Wt.match(/(^\s+)/)||[""])[0].length>=Zt?Wt.slice(Zt):Wt).join(`
`)}}),watch$1(xt,()=>{var Ft;Lt=(Ft=st.value)==null?void 0:Ft.querySelector(".dialog"),Lt.addEventListener("sl-hide",Yt=>{Yt.target===Lt&&(kt.value=!1)})});function Nt(){if(Rt.value="",rt.src){let Ft=`/${rt.src}`,[Yt,Zt,...Wt]=rt.src.split("/");Yt==="juncture-digital"&&Zt==="juncture"&&(location.hostname==="dev.juncture-digital.org"||location.hostname==="localhost")&&(Ft+="?ref=dev"),fetch(Ft).then(Kt=>Kt.text()).then(Kt=>{var rn;let on=(rn=new DOMParser().parseFromString(Kt,"text/html").children[0].children[1].querySelector("main"))==null?void 0:rn.outerHTML;on&&(Rt.value=on),nextTick(()=>initTippy(st.value,!0))})}else fetch("/html/?inline=true",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix}`,path:"",markdown:It.value})}).then(Ft=>Ft.text()).then(Ft=>{var Wt;let Zt=(Wt=new DOMParser().parseFromString(Ft,"text/html").children[0].children[1].querySelector("main"))==null?void 0:Wt.outerHTML;Zt&&(Rt.value=Zt),nextTick(()=>initTippy(st.value,!0))})}function Bt(Ft){var Zt;let Yt=It.value;Yt&&((Zt=Ft.dataTransfer)==null||Zt.setData("text/plain",Yt))}return(Ft,Yt)=>{const Zt=resolveComponent("sl-icon"),Wt=resolveComponent("sl-button"),Kt=resolveComponent("sl-dialog");return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[createVNode(Wt,{onClick:Yt[0]||(Yt[0]=Jt=>kt.value=!kt.value)},{default:withCtx(()=>[rt.buttonIcon?(openBlock(),createBlock(Zt,{key:0,slot:"prefix",name:rt.buttonIcon,style:{"font-size":"20px"}},null,8,["name"])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(rt.buttonLabel),1)]),_:1}),createVNode(Kt,{label:nt.label,class:"dialog",style:normalizeStyle({"--width":Et.value})},{default:withCtx(()=>[createBaseVNode("div",{id:"content",innerHTML:Rt.value,draggable:"true",onDragstart:Bt},null,40,_hoisted_1$8),createVNode(Wt,{slot:"footer",variant:"primary",onClick:Yt[1]||(Yt[1]=Jt=>kt.value=!1)},{default:withCtx(()=>Yt[2]||(Yt[2]=[createTextVNode("Close")])),_:1,__:[2]})]),_:1},8,["label","style"])],512)}}}),_style_1$3=`*{box-sizing:border-box}:host{display:inline-block}sl-dialog::part(body){padding-top:0}sl-dialog::part(panel){max-width:unset}
`,Modal=_export_sfc(_sfc_main$b,[["styles",[_style_0$o,_style_1$3]]]),_hoisted_1$7=["href"],_hoisted_2$5=["src"],_hoisted_3$5=["src"],_hoisted_4$5={class:"title-panel"},_hoisted_5$5=["innerHTML"],_hoisted_6$2=["innerHTML"],_hoisted_7$1={class:"controls"},_hoisted_8$1=["innerHTML"],_sfc_main$a=defineComponent({__name:"Navbar.ce",props:{label:{type:String},subtitle:{type:String},background:{type:String},logo:{type:String},url:{type:String},alpha:{type:Number},contact:{type:String},sticky:{type:Boolean,default:!1},height:{type:Number,default:80},offset:{type:Number,default:0},searchDomain:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var kt,Lt;return(Lt=(kt=it.value)==null?void 0:kt.getRootNode())==null?void 0:Lt.host}),_t=computed(()=>{var kt,Lt;return(Lt=(kt=it==null?void 0:it.value)==null?void 0:kt.parentNode)==null?void 0:Lt.querySelector(".ve-navbar")}),xt=ref();onMounted(()=>{Et(),nextTick(()=>{var kt;return xt.value=(kt=st.value.querySelector("ul"))==null?void 0:kt.innerHTML})}),watch$1(rt,()=>Et());function Et(){if(_t.value.style.height=`${rt.height}px`,rt.background&&(st.value.style.backgroundColor=rt.background),rt.offset&&(_t.value.style.marginTop=`-${rt.offset}px`),rt.sticky&&(st.value.classList.add("sticky"),st.value.style.position="sticky",st.value.style.top="0",rt.alpha&&(st.value.style.background=`rgba(0, 0, 0, ${rt.alpha})`),st.value.style.marginTop=`-${rt.offset}px`),rt.label){let kt=document.querySelector("title");kt||(kt=document.createElement("title"),document.head.appendChild(kt)),kt.innerText=rt.label}}return(kt,Lt)=>{const It=resolveComponent("ve-site-search"),Rt=resolveComponent("ve-menu");return openBlock(),createElementBlock("section",{ref_key:"root",ref:it,class:"ve-navbar",style:normalizeStyle({height:`${rt.height}px`})},[rt.logo?(openBlock(),createElementBlock(Fragment,{key:0},[rt.url?(openBlock(),createElementBlock("a",{key:0,href:rt.url},[createBaseVNode("img",{src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_2$5)],8,_hoisted_1$7)):(openBlock(),createElementBlock("img",{key:1,src:rt.logo,alt:"logo",class:"logo"},null,8,_hoisted_3$5))],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$5,[createBaseVNode("div",{class:"title",innerHTML:rt.label},null,8,_hoisted_5$5),rt.subtitle?(openBlock(),createElementBlock("div",{key:0,class:"subtitle",innerHTML:rt.subtitle},null,8,_hoisted_6$2)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_7$1,[rt.searchDomain?(openBlock(),createBlock(It,{key:0,"search-domain":rt.searchDomain},null,8,["search-domain"])):createCommentVNode("",!0),xt.value?(openBlock(),createBlock(Rt,{key:1,background:rt.background,position:"right",contact:rt.contact},{default:withCtx(()=>[createBaseVNode("ul",{innerHTML:xt.value},null,8,_hoisted_8$1)]),_:1},8,["background","contact"])):createCommentVNode("",!0)])],4)}}}),_style_0$5=`*{box-sizing:border-box}:host,ve-navbar{display:block;position:relative;width:100%;z-index:10}.ve-navbar{display:flex;width:100%;height:100%;padding:0;align-items:center;background-color:inherit}.logo{margin-left:20px;background-color:#fff}img.logo{max-height:50px}.controls{display:flex;align-items:center;margin-left:auto}.title-panel{display:flex;flex-direction:column;gap:6px;margin-left:1rem}.title,.subtitle{color:#fff}.title{font-size:2rem;line-height:1.8rem;padding-top:0;font-weight:700}.subtitle{font-size:1.4rem}@media (max-width: 480px){.title{font-size:1.6rem}}
`,Navbar=_export_sfc(_sfc_main$a,[["styles",[_style_0$5]]]),_hoisted_1$6={ref:"root",class:"pagination"},_hoisted_2$4=["disabled"],_hoisted_3$4=["innerHTML"],_hoisted_4$4=["innerHTML"],_hoisted_5$4=["disabled"],_sfc_main$9=defineComponent({__name:"Pager.ce",props:{total:{type:Number,required:!0},current:{type:Number,default:1}},emits:["image-selected"],setup(nt,{emit:rt}){const it=rt,st=nt,_t=ref();return _t.value=st.current,watch$1(_t,()=>it("image-selected",_t.value)),(xt,Et)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("span",{class:"prev",onClick:Et[0]||(Et[0]=kt=>_t.value>1&&--_t.value),disabled:_t.value===1},"\xAB",8,_hoisted_2$4),createBaseVNode("span",{class:"current",innerHTML:_t.value},null,8,_hoisted_3$4),Et[2]||(Et[2]=createTextVNode(" / ")),createBaseVNode("span",{class:"total",innerHTML:st.total},null,8,_hoisted_4$4),createBaseVNode("span",{class:"next",onClick:Et[1]||(Et[1]=kt=>_t.value<st.total&&++_t.value),disabled:_t.value===st.total},"\xBB",8,_hoisted_5$4)],512))}}),_style_0$4=`.pagination{display:flex;align-items:center;justify-content:center;background-color:#eee;height:30px;color:#444}.current,.total{padding:0 12px;font-size:1.3rem}.prev[disabled=true],.next[disabled=true]{color:#ccc;cursor:unset}.prev,.next{height:100%;float:left;padding:0 8px;text-decoration:none;transition:background-color .3s;cursor:pointer;font-size:40px;margin-top:-28px}.prev[disabled=false]:hover,.next[disabled=false]:hover{color:var(--sl-color-primary-700)}
`,Pager=_export_sfc(_sfc_main$9,[["styles",[_style_0$4]]]);var rdfCanonize={exports:{}},lib={},IdentifierIssuer_1=class s2{constructor(rt,it=new Map,st=0){this.prefix=rt,this._existing=it,this.counter=st}clone(){const{prefix:rt,_existing:it,counter:st}=this;return new s2(rt,new Map(it),st)}getId(rt){const it=rt&&this._existing.get(rt);if(it)return it;const st=this.prefix+this.counter;return this.counter++,rt&&this._existing.set(rt,st),st}hasId(rt){return this._existing.has(rt)}getOldIds(){return[...this._existing.keys()]}};(function(nt,rt){if(nt.setImmediate)return;var it=1,st={},_t=!1,xt=nt.document,Et;function kt(Jt){typeof Jt!="function"&&(Jt=new Function(""+Jt));for(var on=new Array(arguments.length-1),rn=0;rn<on.length;rn++)on[rn]=arguments[rn+1];var ln={callback:Jt,args:on};return st[it]=ln,Et(it),it++}function Lt(Jt){delete st[Jt]}function It(Jt){var on=Jt.callback,rn=Jt.args;switch(rn.length){case 0:on();break;case 1:on(rn[0]);break;case 2:on(rn[0],rn[1]);break;case 3:on(rn[0],rn[1],rn[2]);break;default:on.apply(rt,rn);break}}function Rt(Jt){if(_t)setTimeout(Rt,0,Jt);else{var on=st[Jt];if(on){_t=!0;try{It(on)}finally{Lt(Jt),_t=!1}}}}function Nt(){Et=function(Jt){process.nextTick(function(){Rt(Jt)})}}function Bt(){if(nt.postMessage&&!nt.importScripts){var Jt=!0,on=nt.onmessage;return nt.onmessage=function(){Jt=!1},nt.postMessage("","*"),nt.onmessage=on,Jt}}function Ft(){var Jt="setImmediate$"+Math.random()+"$",on=function(rn){rn.source===nt&&typeof rn.data=="string"&&rn.data.indexOf(Jt)===0&&Rt(+rn.data.slice(Jt.length))};nt.addEventListener?nt.addEventListener("message",on,!1):nt.attachEvent("onmessage",on),Et=function(rn){nt.postMessage(Jt+rn,"*")}}function Yt(){var Jt=new MessageChannel;Jt.port1.onmessage=function(on){var rn=on.data;Rt(rn)},Et=function(on){Jt.port2.postMessage(on)}}function Zt(){var Jt=xt.documentElement;Et=function(on){var rn=xt.createElement("script");rn.onreadystatechange=function(){Rt(on),rn.onreadystatechange=null,Jt.removeChild(rn),rn=null},Jt.appendChild(rn)}}function Wt(){Et=function(Jt){setTimeout(Rt,0,Jt)}}var Kt=Object.getPrototypeOf&&Object.getPrototypeOf(nt);Kt=Kt&&Kt.setTimeout?Kt:nt,{}.toString.call(nt.process)==="[object process]"?Nt():Bt()?Ft():nt.MessageChannel?Yt():xt&&"onreadystatechange"in xt.createElement("script")?Zt():Wt(),Kt.setImmediate=kt,Kt.clearImmediate=Lt})(typeof self>"u"?commonjsGlobal$1:self);/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const crypto$1=self.crypto||self.msCrypto;var MessageDigestBrowser=class{constructor(rt){if(!(crypto$1&&crypto$1.subtle))throw new Error("crypto.subtle not found.");if(rt==="sha256")this.algorithm={name:"SHA-256"};else if(rt==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${rt}".`);this._content=""}update(rt){this._content+=rt}async digest(){const rt=new TextEncoder().encode(this._content),it=new Uint8Array(await crypto$1.subtle.digest(this.algorithm,rt));let st="";for(let _t=0;_t<it.length;++_t)st+=it[_t].toString(16).padStart(2,"0");return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Permuter_1=class{constructor(rt){this.current=rt.sort(),this.done=!1,this.dir=new Map;for(let it=0;it<rt.length;++it)this.dir.set(rt[it],!0)}hasNext(){return!this.done}next(){const{current:rt,dir:it}=this,st=rt.slice();let _t=null,xt=0;const Et=rt.length;for(let kt=0;kt<Et;++kt){const Lt=rt[kt],It=it.get(Lt);(_t===null||Lt>_t)&&(It&&kt>0&&Lt>rt[kt-1]||!It&&kt<Et-1&&Lt>rt[kt+1])&&(_t=Lt,xt=kt)}if(_t===null)this.done=!0;else{const kt=it.get(_t)?xt-1:xt+1;rt[xt]=rt[kt],rt[kt]=_t;for(const Lt of rt)Lt>_t&&it.set(Lt,!it.get(Lt))}return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const RDF$1="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_LANGSTRING$1=RDF$1+"langString",XSD_STRING$2="http://www.w3.org/2001/XMLSchema#string",TYPE_NAMED_NODE="NamedNode",TYPE_BLANK_NODE="BlankNode",TYPE_LITERAL="Literal",TYPE_DEFAULT_GRAPH="DefaultGraph",REGEX={};(()=>{const nt="(?:<([^:]+:[^>]*)>)",it="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD"+"_",st=it+"0-9-\xB7\u0300-\u036F\u203F-\u2040",xt="(_:(?:["+it+"0-9])(?:(?:["+st+".])*(?:["+st+"]))?)",Et='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',kt="(?:\\^\\^"+nt+")",Lt="(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))",It="(?:"+Et+"(?:"+kt+"|"+Lt+")?)",Rt="[ \\t]+",Nt="[ \\t]*",Bt="(?:"+nt+"|"+xt+")"+Rt,Ft=nt+Rt,Yt="(?:"+nt+"|"+xt+"|"+It+")"+Nt,Zt="(?:\\.|(?:(?:"+nt+"|"+xt+")"+Nt+"\\.))";REGEX.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,REGEX.empty=new RegExp("^"+Nt+"$"),REGEX.quad=new RegExp("^"+Nt+Bt+Ft+Yt+Zt+Nt+"$")})();var NQuads_1=class yv{static parse(rt){const it=[],st={},_t=rt.split(REGEX.eoln);let xt=0;for(const Et of _t){if(xt++,REGEX.empty.test(Et))continue;const kt=Et.match(REGEX.quad);if(kt===null)throw new Error("N-Quads parse error on line "+xt+".");const Lt={subject:null,predicate:null,object:null,graph:null};if(kt[1]!==void 0?Lt.subject={termType:TYPE_NAMED_NODE,value:kt[1]}:Lt.subject={termType:TYPE_BLANK_NODE,value:kt[2]},Lt.predicate={termType:TYPE_NAMED_NODE,value:kt[3]},kt[4]!==void 0?Lt.object={termType:TYPE_NAMED_NODE,value:kt[4]}:kt[5]!==void 0?Lt.object={termType:TYPE_BLANK_NODE,value:kt[5]}:(Lt.object={termType:TYPE_LITERAL,value:void 0,datatype:{termType:TYPE_NAMED_NODE}},kt[7]!==void 0?Lt.object.datatype.value=kt[7]:kt[8]!==void 0?(Lt.object.datatype.value=RDF_LANGSTRING$1,Lt.object.language=kt[8]):Lt.object.datatype.value=XSD_STRING$2,Lt.object.value=_unescape(kt[6])),kt[9]!==void 0?Lt.graph={termType:TYPE_NAMED_NODE,value:kt[9]}:kt[10]!==void 0?Lt.graph={termType:TYPE_BLANK_NODE,value:kt[10]}:Lt.graph={termType:TYPE_DEFAULT_GRAPH,value:""},!(Lt.graph.value in st))st[Lt.graph.value]=[Lt],it.push(Lt);else{let It=!0;const Rt=st[Lt.graph.value];for(const Nt of Rt)if(_compareTriples(Nt,Lt)){It=!1;break}It&&(Rt.push(Lt),it.push(Lt))}}return it}static serialize(rt){Array.isArray(rt)||(rt=yv.legacyDatasetToQuads(rt));const it=[];for(const st of rt)it.push(yv.serializeQuad(st));return it.sort().join("")}static serializeQuadComponents(rt,it,st,_t){let xt="";return rt.termType===TYPE_NAMED_NODE?xt+=`<${rt.value}>`:xt+=`${rt.value}`,xt+=` <${it.value}> `,st.termType===TYPE_NAMED_NODE?xt+=`<${st.value}>`:st.termType===TYPE_BLANK_NODE?xt+=st.value:(xt+=`"${_escape(st.value)}"`,st.datatype.value===RDF_LANGSTRING$1?st.language&&(xt+=`@${st.language}`):st.datatype.value!==XSD_STRING$2&&(xt+=`^^<${st.datatype.value}>`)),_t.termType===TYPE_NAMED_NODE?xt+=` <${_t.value}>`:_t.termType===TYPE_BLANK_NODE&&(xt+=` ${_t.value}`),xt+=` .
`,xt}static serializeQuad(rt){return yv.serializeQuadComponents(rt.subject,rt.predicate,rt.object,rt.graph)}static legacyDatasetToQuads(rt){const it=[],st={"blank node":TYPE_BLANK_NODE,IRI:TYPE_NAMED_NODE,literal:TYPE_LITERAL};for(const _t in rt)rt[_t].forEach(Et=>{const kt={};for(const Lt in Et){const It=Et[Lt],Rt={termType:st[It.type],value:It.value};Rt.termType===TYPE_LITERAL&&(Rt.datatype={termType:TYPE_NAMED_NODE},"datatype"in It&&(Rt.datatype.value=It.datatype),"language"in It?("datatype"in It||(Rt.datatype.value=RDF_LANGSTRING$1),Rt.language=It.language):"datatype"in It||(Rt.datatype.value=XSD_STRING$2)),kt[Lt]=Rt}_t==="@default"?kt.graph={termType:TYPE_DEFAULT_GRAPH,value:""}:kt.graph={termType:_t.startsWith("_:")?TYPE_BLANK_NODE:TYPE_NAMED_NODE,value:_t},it.push(kt)});return it}};function _compareTriples(nt,rt){return!(nt.subject.termType===rt.subject.termType&&nt.object.termType===rt.object.termType)||!(nt.subject.value===rt.subject.value&&nt.predicate.value===rt.predicate.value&&nt.object.value===rt.object.value)?!1:nt.object.termType!==TYPE_LITERAL?!0:nt.object.datatype.termType===rt.object.datatype.termType&&nt.object.language===rt.object.language&&nt.object.datatype.value===rt.object.datatype.value}const _escapeRegex=/["\\\n\r]/g;function _escape(nt){return nt.replace(_escapeRegex,function(rt){switch(rt){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const _unescapeRegex=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _unescape(nt){return nt.replace(_unescapeRegex,function(rt,it,st,_t){if(it)switch(it){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(st)return String.fromCharCode(parseInt(st,16));if(_t)throw new Error("Unsupported U escape")})}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const IdentifierIssuer$3=IdentifierIssuer_1,MessageDigest$3=MessageDigestBrowser,Permuter$1=Permuter_1,NQuads$3=NQuads_1;var URDNA2015_1=class{constructor({createMessageDigest:rt=()=>new MessageDigest$3("sha256"),canonicalIdMap:it=new Map,maxDeepIterations:st=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer$3("_:c14n",it),this.createMessageDigest=rt,this.maxDeepIterations=st,this.quads=null,this.deepIterations=null}async main(rt){this.deepIterations=new Map,this.quads=rt;for(const Lt of rt)this._addBlankNodeQuadInfo({quad:Lt,component:Lt.subject}),this._addBlankNodeQuadInfo({quad:Lt,component:Lt.object}),this._addBlankNodeQuadInfo({quad:Lt,component:Lt.graph});const it=new Map,st=[...this.blankNodeInfo.keys()];let _t=0;for(const Lt of st)++_t%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:Lt,hashToBlankNodes:it});const xt=[...it.keys()].sort(),Et=[];for(const Lt of xt){const It=it.get(Lt);if(It.length>1){Et.push(It);continue}const Rt=It[0];this.canonicalIssuer.getId(Rt)}for(const Lt of Et){const It=[];for(const Rt of Lt){if(this.canonicalIssuer.hasId(Rt))continue;const Nt=new IdentifierIssuer$3("_:b");Nt.getId(Rt);const Bt=await this.hashNDegreeQuads(Rt,Nt);It.push(Bt)}It.sort(_stringHashCompare$1);for(const Rt of It){const Nt=Rt.issuer.getOldIds();for(const Bt of Nt)this.canonicalIssuer.getId(Bt)}}const kt=[];for(const Lt of this.quads){const It=NQuads$3.serializeQuadComponents(this._componentWithCanonicalId(Lt.subject),Lt.predicate,this._componentWithCanonicalId(Lt.object),this._componentWithCanonicalId(Lt.graph));kt.push(It)}return kt.sort(),kt.join("")}async hashFirstDegreeQuads(rt){const it=[],st=this.blankNodeInfo.get(rt),_t=st.quads;for(const Et of _t){const kt={subject:null,predicate:Et.predicate,object:null,graph:null};kt.subject=this.modifyFirstDegreeComponent(rt,Et.subject,"subject"),kt.object=this.modifyFirstDegreeComponent(rt,Et.object,"object"),kt.graph=this.modifyFirstDegreeComponent(rt,Et.graph,"graph"),it.push(NQuads$3.serializeQuad(kt))}it.sort();const xt=this.createMessageDigest();for(const Et of it)xt.update(Et);return st.hash=await xt.digest(),st.hash}async hashRelatedBlankNode(rt,it,st,_t){let xt;this.canonicalIssuer.hasId(rt)?xt=this.canonicalIssuer.getId(rt):st.hasId(rt)?xt=st.getId(rt):xt=this.blankNodeInfo.get(rt).hash;const Et=this.createMessageDigest();return Et.update(_t),_t!=="g"&&Et.update(this.getRelatedPredicate(it)),Et.update(xt),Et.digest()}async hashNDegreeQuads(rt,it){const st=this.deepIterations.get(rt)||0;if(st>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(rt,st+1);const _t=this.createMessageDigest(),xt=await this.createHashToRelated(rt,it),Et=[...xt.keys()].sort();for(const kt of Et){_t.update(kt);let Lt="",It;const Rt=new Permuter$1(xt.get(kt));let Nt=0;for(;Rt.hasNext();){const Bt=Rt.next();++Nt%3===0&&await this._yield();let Ft=it.clone(),Yt="";const Zt=[];let Wt=!1;for(const Kt of Bt)if(this.canonicalIssuer.hasId(Kt)?Yt+=this.canonicalIssuer.getId(Kt):(Ft.hasId(Kt)||Zt.push(Kt),Yt+=Ft.getId(Kt)),Lt.length!==0&&Yt>Lt){Wt=!0;break}if(!Wt){for(const Kt of Zt){const Jt=await this.hashNDegreeQuads(Kt,Ft);if(Yt+=Ft.getId(Kt),Yt+=`<${Jt.hash}>`,Ft=Jt.issuer,Lt.length!==0&&Yt>Lt){Wt=!0;break}}Wt||(Lt.length===0||Yt<Lt)&&(Lt=Yt,It=Ft)}}_t.update(Lt),it=It}return{hash:await _t.digest(),issuer:it}}modifyFirstDegreeComponent(rt,it){return it.termType!=="BlankNode"?it:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return`<${rt.predicate.value}>`}async createHashToRelated(rt,it){const st=new Map,_t=this.blankNodeInfo.get(rt).quads;let xt=0;for(const Et of _t)++xt%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:Et,component:Et.subject,position:"s",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:Et,component:Et.object,position:"o",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:Et,component:Et.graph,position:"g",id:rt,issuer:it,hashToRelated:st})]);return st}async _hashAndTrackBlankNode({id:rt,hashToBlankNodes:it}){const st=await this.hashFirstDegreeQuads(rt),_t=it.get(st);_t?_t.push(rt):it.set(st,[rt])}_addBlankNodeQuadInfo({quad:rt,component:it}){if(it.termType!=="BlankNode")return;const st=it.value,_t=this.blankNodeInfo.get(st);_t?_t.quads.add(rt):this.blankNodeInfo.set(st,{quads:new Set([rt]),hash:null})}async _addRelatedBlankNodeHash({quad:rt,component:it,position:st,id:_t,issuer:xt,hashToRelated:Et}){if(!(it.termType==="BlankNode"&&it.value!==_t))return;const kt=it.value,Lt=await this.hashRelatedBlankNode(kt,rt,xt,st),It=Et.get(Lt);It?It.push(kt):Et.set(Lt,[kt])}_componentWithCanonicalId(rt){return rt.termType==="BlankNode"&&!rt.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(rt.value)}:rt}async _yield(){return new Promise(rt=>setImmediate(rt))}};function _stringHashCompare$1(nt,rt){return nt.hash<rt.hash?-1:nt.hash>rt.hash?1:0}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest$2=MessageDigestBrowser,URDNA2015=URDNA2015_1;var URGNA2012=class extends URDNA2015{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest$2("sha1")}modifyFirstDegreeComponent(rt,it,st){return it.termType!=="BlankNode"?it:st==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return rt.predicate.value}async createHashToRelated(rt,it){const st=new Map,_t=this.blankNodeInfo.get(rt).quads;let xt=0;for(const Et of _t){let kt,Lt;if(Et.subject.termType==="BlankNode"&&Et.subject.value!==rt)Lt=Et.subject.value,kt="p";else if(Et.object.termType==="BlankNode"&&Et.object.value!==rt)Lt=Et.object.value,kt="r";else continue;++xt%100===0&&await this._yield();const It=await this.hashRelatedBlankNode(Lt,Et,it,kt),Rt=st.get(It);Rt?Rt.push(Lt):st.set(It,[Lt])}return st}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const IdentifierIssuer$2=IdentifierIssuer_1,MessageDigest$1=MessageDigestBrowser,Permuter=Permuter_1,NQuads$2=NQuads_1;var URDNA2015Sync_1=class{constructor({createMessageDigest:rt=()=>new MessageDigest$1("sha256"),canonicalIdMap:it=new Map,maxDeepIterations:st=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer$2("_:c14n",it),this.createMessageDigest=rt,this.maxDeepIterations=st,this.quads=null,this.deepIterations=null}main(rt){this.deepIterations=new Map,this.quads=rt;for(const kt of rt)this._addBlankNodeQuadInfo({quad:kt,component:kt.subject}),this._addBlankNodeQuadInfo({quad:kt,component:kt.object}),this._addBlankNodeQuadInfo({quad:kt,component:kt.graph});const it=new Map,st=[...this.blankNodeInfo.keys()];for(const kt of st)this._hashAndTrackBlankNode({id:kt,hashToBlankNodes:it});const _t=[...it.keys()].sort(),xt=[];for(const kt of _t){const Lt=it.get(kt);if(Lt.length>1){xt.push(Lt);continue}const It=Lt[0];this.canonicalIssuer.getId(It)}for(const kt of xt){const Lt=[];for(const It of kt){if(this.canonicalIssuer.hasId(It))continue;const Rt=new IdentifierIssuer$2("_:b");Rt.getId(It);const Nt=this.hashNDegreeQuads(It,Rt);Lt.push(Nt)}Lt.sort(_stringHashCompare);for(const It of Lt){const Rt=It.issuer.getOldIds();for(const Nt of Rt)this.canonicalIssuer.getId(Nt)}}const Et=[];for(const kt of this.quads){const Lt=NQuads$2.serializeQuadComponents(this._componentWithCanonicalId({component:kt.subject}),kt.predicate,this._componentWithCanonicalId({component:kt.object}),this._componentWithCanonicalId({component:kt.graph}));Et.push(Lt)}return Et.sort(),Et.join("")}hashFirstDegreeQuads(rt){const it=[],st=this.blankNodeInfo.get(rt),_t=st.quads;for(const Et of _t){const kt={subject:null,predicate:Et.predicate,object:null,graph:null};kt.subject=this.modifyFirstDegreeComponent(rt,Et.subject,"subject"),kt.object=this.modifyFirstDegreeComponent(rt,Et.object,"object"),kt.graph=this.modifyFirstDegreeComponent(rt,Et.graph,"graph"),it.push(NQuads$2.serializeQuad(kt))}it.sort();const xt=this.createMessageDigest();for(const Et of it)xt.update(Et);return st.hash=xt.digest(),st.hash}hashRelatedBlankNode(rt,it,st,_t){let xt;this.canonicalIssuer.hasId(rt)?xt=this.canonicalIssuer.getId(rt):st.hasId(rt)?xt=st.getId(rt):xt=this.blankNodeInfo.get(rt).hash;const Et=this.createMessageDigest();return Et.update(_t),_t!=="g"&&Et.update(this.getRelatedPredicate(it)),Et.update(xt),Et.digest()}hashNDegreeQuads(rt,it){const st=this.deepIterations.get(rt)||0;if(st>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(rt,st+1);const _t=this.createMessageDigest(),xt=this.createHashToRelated(rt,it),Et=[...xt.keys()].sort();for(const kt of Et){_t.update(kt);let Lt="",It;const Rt=new Permuter(xt.get(kt));for(;Rt.hasNext();){const Nt=Rt.next();let Bt=it.clone(),Ft="";const Yt=[];let Zt=!1;for(const Wt of Nt)if(this.canonicalIssuer.hasId(Wt)?Ft+=this.canonicalIssuer.getId(Wt):(Bt.hasId(Wt)||Yt.push(Wt),Ft+=Bt.getId(Wt)),Lt.length!==0&&Ft>Lt){Zt=!0;break}if(!Zt){for(const Wt of Yt){const Kt=this.hashNDegreeQuads(Wt,Bt);if(Ft+=Bt.getId(Wt),Ft+=`<${Kt.hash}>`,Bt=Kt.issuer,Lt.length!==0&&Ft>Lt){Zt=!0;break}}Zt||(Lt.length===0||Ft<Lt)&&(Lt=Ft,It=Bt)}}_t.update(Lt),it=It}return{hash:_t.digest(),issuer:it}}modifyFirstDegreeComponent(rt,it){return it.termType!=="BlankNode"?it:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return`<${rt.predicate.value}>`}createHashToRelated(rt,it){const st=new Map,_t=this.blankNodeInfo.get(rt).quads;for(const xt of _t)this._addRelatedBlankNodeHash({quad:xt,component:xt.subject,position:"s",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:xt,component:xt.object,position:"o",id:rt,issuer:it,hashToRelated:st}),this._addRelatedBlankNodeHash({quad:xt,component:xt.graph,position:"g",id:rt,issuer:it,hashToRelated:st});return st}_hashAndTrackBlankNode({id:rt,hashToBlankNodes:it}){const st=this.hashFirstDegreeQuads(rt),_t=it.get(st);_t?_t.push(rt):it.set(st,[rt])}_addBlankNodeQuadInfo({quad:rt,component:it}){if(it.termType!=="BlankNode")return;const st=it.value,_t=this.blankNodeInfo.get(st);_t?_t.quads.add(rt):this.blankNodeInfo.set(st,{quads:new Set([rt]),hash:null})}_addRelatedBlankNodeHash({quad:rt,component:it,position:st,id:_t,issuer:xt,hashToRelated:Et}){if(!(it.termType==="BlankNode"&&it.value!==_t))return;const kt=it.value,Lt=this.hashRelatedBlankNode(kt,rt,xt,st),It=Et.get(Lt);It?It.push(kt):Et.set(Lt,[kt])}_componentWithCanonicalId({component:rt}){return rt.termType==="BlankNode"&&!rt.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(rt.value)}:rt}};function _stringHashCompare(nt,rt){return nt.hash<rt.hash?-1:nt.hash>rt.hash?1:0}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest=MessageDigestBrowser,URDNA2015Sync=URDNA2015Sync_1;var URGNA2012Sync=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest("sha1")}modifyFirstDegreeComponent(rt,it,st){return it.termType!=="BlankNode"?it:st==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:it.value===rt?"_:a":"_:z"}}getRelatedPredicate(rt){return rt.predicate.value}createHashToRelated(rt,it){const st=new Map,_t=this.blankNodeInfo.get(rt).quads;for(const xt of _t){let Et,kt;if(xt.subject.termType==="BlankNode"&&xt.subject.value!==rt)kt=xt.subject.value,Et="p";else if(xt.object.termType==="BlankNode"&&xt.object.value!==rt)kt=xt.object.value,Et="r";else continue;const Lt=this.hashRelatedBlankNode(kt,xt,it,Et),It=st.get(Lt);It?It.push(kt):st.set(Lt,[kt])}return st}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(nt){const rt=URDNA2015_1,it=URGNA2012,st=URDNA2015Sync_1,_t=URGNA2012Sync;let xt;try{xt=require$$4}catch{}function Et(kt){return Array.isArray(kt)?kt:nt.NQuads.legacyDatasetToQuads(kt)}nt.NQuads=NQuads_1,nt.IdentifierIssuer=IdentifierIssuer_1,nt._rdfCanonizeNative=function(kt){return kt&&(xt=kt),xt},nt.canonize=async function(kt,Lt){const It=Et(kt);if(Lt.useNative){if(!xt)throw new Error("rdf-canonize-native not available");if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((Rt,Nt)=>xt.canonize(It,Lt,(Bt,Ft)=>Bt?Nt(Bt):Rt(Ft)))}if(Lt.algorithm==="URDNA2015")return new rt(Lt).main(It);if(Lt.algorithm==="URGNA2012"){if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new it(Lt).main(It)}throw"algorithm"in Lt?new Error("Invalid RDF Dataset Canonicalization algorithm: "+Lt.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},nt._canonizeSync=function(kt,Lt){const It=Et(kt);if(Lt.useNative){if(!xt)throw new Error("rdf-canonize-native not available");if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return xt.canonizeSync(It,Lt)}if(Lt.algorithm==="URDNA2015")return new st(Lt).main(It);if(Lt.algorithm==="URGNA2012"){if(Lt.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new _t(Lt).main(It)}throw"algorithm"in Lt?new Error("Invalid RDF Dataset Canonicalization algorithm: "+Lt.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}})(lib);(function(nt){nt.exports=lib})(rdfCanonize);const api$d={};var types$7=api$d;api$d.isArray=Array.isArray;api$d.isBoolean=nt=>typeof nt=="boolean"||Object.prototype.toString.call(nt)==="[object Boolean]";api$d.isDouble=nt=>api$d.isNumber(nt)&&(String(nt).indexOf(".")!==-1||Math.abs(nt)>=1e21);api$d.isEmptyObject=nt=>api$d.isObject(nt)&&Object.keys(nt).length===0;api$d.isNumber=nt=>typeof nt=="number"||Object.prototype.toString.call(nt)==="[object Number]";api$d.isNumeric=nt=>!isNaN(parseFloat(nt))&&isFinite(nt);api$d.isObject=nt=>Object.prototype.toString.call(nt)==="[object Object]";api$d.isString=nt=>typeof nt=="string"||Object.prototype.toString.call(nt)==="[object String]";api$d.isUndefined=nt=>typeof nt>"u";const types$6=types$7,api$c={};var graphTypes$5=api$c;api$c.isSubject=nt=>types$6.isObject(nt)&&!("@value"in nt||"@set"in nt||"@list"in nt)?Object.keys(nt).length>1||!("@id"in nt):!1;api$c.isSubjectReference=nt=>types$6.isObject(nt)&&Object.keys(nt).length===1&&"@id"in nt;api$c.isValue=nt=>types$6.isObject(nt)&&"@value"in nt;api$c.isList=nt=>types$6.isObject(nt)&&"@list"in nt;api$c.isGraph=nt=>types$6.isObject(nt)&&"@graph"in nt&&Object.keys(nt).filter(rt=>rt!=="@id"&&rt!=="@index").length===1;api$c.isSimpleGraph=nt=>api$c.isGraph(nt)&&!("@id"in nt);api$c.isBlankNode=nt=>{if(types$6.isObject(nt)){if("@id"in nt){const rt=nt["@id"];return!types$6.isString(rt)||rt.indexOf("_:")===0}return Object.keys(nt).length===0||!("@value"in nt||"@set"in nt||"@list"in nt)}return!1};var JsonLdError_1=class extends Error{constructor(rt="An unspecified JSON-LD error occurred.",it="jsonld.Error",st={}){super(rt),this.name=it,this.message=rt,this.details=st}};const graphTypes$4=graphTypes$5,types$5=types$7,IdentifierIssuer$1=rdfCanonize.exports.IdentifierIssuer,JsonLdError$b=JsonLdError_1,REGEX_BCP47$3=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER$1=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,REGEX_KEYWORD$3=/^@[a-zA-Z]+$/,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api$b={};var util$5=api$b;api$b.IdentifierIssuer=IdentifierIssuer$1;api$b.REGEX_BCP47=REGEX_BCP47$3;api$b.REGEX_KEYWORD=REGEX_KEYWORD$3;api$b.clone=function(nt){if(nt&&typeof nt=="object"){let rt;if(types$5.isArray(nt)){rt=[];for(let it=0;it<nt.length;++it)rt[it]=api$b.clone(nt[it])}else if(nt instanceof Map){rt=new Map;for(const[it,st]of nt)rt.set(it,api$b.clone(st))}else if(nt instanceof Set){rt=new Set;for(const it of nt)rt.add(api$b.clone(it))}else if(types$5.isObject(nt)){rt={};for(const it in nt)rt[it]=api$b.clone(nt[it])}else rt=nt.toString();return rt}return nt};api$b.asArray=function(nt){return Array.isArray(nt)?nt:[nt]};api$b.buildHeaders=(nt={})=>{if(Object.keys(nt).some(it=>it.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},nt)};api$b.parseLinkHeader=nt=>{const rt={},it=nt.match(REGEX_LINK_HEADERS);for(let st=0;st<it.length;++st){let _t=it[st].match(REGEX_LINK_HEADER$1);if(!_t)continue;const xt={target:_t[1]},Et=_t[2];for(;_t=REGEX_LINK_HEADER_PARAMS.exec(Et);)xt[_t[1]]=_t[2]===void 0?_t[3]:_t[2];const kt=xt.rel||"";Array.isArray(rt[kt])?rt[kt].push(xt):rt.hasOwnProperty(kt)?rt[kt]=[rt[kt],xt]:rt[kt]=xt}return rt};api$b.validateTypeValue=(nt,rt)=>{if(!types$5.isString(nt)&&!(types$5.isArray(nt)&&nt.every(it=>types$5.isString(it)))){if(rt&&types$5.isObject(nt))switch(Object.keys(nt).length){case 0:return;case 1:if("@default"in nt&&api$b.asArray(nt["@default"]).every(it=>types$5.isString(it)))return}throw new JsonLdError$b('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:nt})}};api$b.hasProperty=(nt,rt)=>{if(nt.hasOwnProperty(rt)){const it=nt[rt];return!types$5.isArray(it)||it.length>0}return!1};api$b.hasValue=(nt,rt,it)=>{if(api$b.hasProperty(nt,rt)){let st=nt[rt];const _t=graphTypes$4.isList(st);if(types$5.isArray(st)||_t){_t&&(st=st["@list"]);for(let xt=0;xt<st.length;++xt)if(api$b.compareValues(it,st[xt]))return!0}else if(!types$5.isArray(it))return api$b.compareValues(it,st)}return!1};api$b.addValue=(nt,rt,it,st)=>{if(st=st||{},"propertyIsArray"in st||(st.propertyIsArray=!1),"valueIsArray"in st||(st.valueIsArray=!1),"allowDuplicate"in st||(st.allowDuplicate=!0),"prependValue"in st||(st.prependValue=!1),st.valueIsArray)nt[rt]=it;else if(types$5.isArray(it)){it.length===0&&st.propertyIsArray&&!nt.hasOwnProperty(rt)&&(nt[rt]=[]),st.prependValue&&(it=it.concat(nt[rt]),nt[rt]=[]);for(let _t=0;_t<it.length;++_t)api$b.addValue(nt,rt,it[_t],st)}else if(nt.hasOwnProperty(rt)){const _t=!st.allowDuplicate&&api$b.hasValue(nt,rt,it);!types$5.isArray(nt[rt])&&(!_t||st.propertyIsArray)&&(nt[rt]=[nt[rt]]),_t||(st.prependValue?nt[rt].unshift(it):nt[rt].push(it))}else nt[rt]=st.propertyIsArray?[it]:it};api$b.getValues=(nt,rt)=>[].concat(nt[rt]||[]);api$b.removeProperty=(nt,rt)=>{delete nt[rt]};api$b.removeValue=(nt,rt,it,st)=>{st=st||{},"propertyIsArray"in st||(st.propertyIsArray=!1);const _t=api$b.getValues(nt,rt).filter(xt=>!api$b.compareValues(xt,it));_t.length===0?api$b.removeProperty(nt,rt):_t.length===1&&!st.propertyIsArray?nt[rt]=_t[0]:nt[rt]=_t};api$b.relabelBlankNodes=(nt,rt)=>{rt=rt||{};const it=rt.issuer||new IdentifierIssuer$1("_:b");return _labelBlankNodes(it,nt)};api$b.compareValues=(nt,rt)=>nt===rt||graphTypes$4.isValue(nt)&&graphTypes$4.isValue(rt)&&nt["@value"]===rt["@value"]&&nt["@type"]===rt["@type"]&&nt["@language"]===rt["@language"]&&nt["@index"]===rt["@index"]?!0:types$5.isObject(nt)&&"@id"in nt&&types$5.isObject(rt)&&"@id"in rt?nt["@id"]===rt["@id"]:!1;api$b.compareShortestLeast=(nt,rt)=>nt.length<rt.length?-1:rt.length<nt.length?1:nt===rt?0:nt<rt?-1:1;function _labelBlankNodes(nt,rt){if(types$5.isArray(rt))for(let it=0;it<rt.length;++it)rt[it]=_labelBlankNodes(nt,rt[it]);else if(graphTypes$4.isList(rt))rt["@list"]=_labelBlankNodes(nt,rt["@list"]);else if(types$5.isObject(rt)){graphTypes$4.isBlankNode(rt)&&(rt["@id"]=nt.getId(rt["@id"]));const it=Object.keys(rt).sort();for(let st=0;st<it.length;++st){const _t=it[st];_t!=="@id"&&(rt[_t]=_labelBlankNodes(nt,rt[_t]))}}return rt}const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";var constants={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"},RequestQueue_1,hasRequiredRequestQueue;function requireRequestQueue(){return hasRequiredRequestQueue||(hasRequiredRequestQueue=1,RequestQueue_1=class{constructor(){this._requests={}}wrapLoader(rt){const it=this;return it._loader=rt,function(){return it.add.apply(it,arguments)}}async add(rt){let it=this._requests[rt];if(it)return Promise.resolve(it);it=this._requests[rt]=this._loader(rt);try{return await it}finally{delete this._requests[rt]}}}),RequestQueue_1}const types$4=types$7,api$a={};var url$1=api$a;api$a.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};api$a.parse=(nt,rt)=>{const it={},st=api$a.parsers[rt||"full"],_t=st.regex.exec(nt);let xt=st.keys.length;for(;xt--;)it[st.keys[xt]]=_t[xt]===void 0?null:_t[xt];return(it.scheme==="https"&&it.port==="443"||it.scheme==="http"&&it.port==="80")&&(it.href=it.href.replace(":"+it.port,""),it.authority=it.authority.replace(":"+it.port,""),it.port=null),it.normalizedPath=api$a.removeDotSegments(it.path),it};api$a.prependBase=(nt,rt)=>{if(nt===null||api$a.isAbsolute(rt))return rt;(!nt||types$4.isString(nt))&&(nt=api$a.parse(nt||""));const it=api$a.parse(rt),st={protocol:nt.protocol||""};if(it.authority!==null)st.authority=it.authority,st.path=it.path,st.query=it.query;else if(st.authority=nt.authority,it.path==="")st.path=nt.path,it.query!==null?st.query=it.query:st.query=nt.query;else{if(it.path.indexOf("/")===0)st.path=it.path;else{let xt=nt.path;xt=xt.substr(0,xt.lastIndexOf("/")+1),(xt.length>0||nt.authority)&&xt.substr(-1)!=="/"&&(xt+="/"),xt+=it.path,st.path=xt}st.query=it.query}it.path!==""&&(st.path=api$a.removeDotSegments(st.path));let _t=st.protocol;return st.authority!==null&&(_t+="//"+st.authority),_t+=st.path,st.query!==null&&(_t+="?"+st.query),it.fragment!==null&&(_t+="#"+it.fragment),_t===""&&(_t="./"),_t};api$a.removeBase=(nt,rt)=>{if(nt===null)return rt;(!nt||types$4.isString(nt))&&(nt=api$a.parse(nt||""));let it="";if(nt.href!==""?it+=(nt.protocol||"")+"//"+(nt.authority||""):rt.indexOf("//")&&(it+="//"),rt.indexOf(it)!==0)return rt;const st=api$a.parse(rt.substr(it.length)),_t=nt.normalizedPath.split("/"),xt=st.normalizedPath.split("/"),Et=st.fragment||st.query?0:1;for(;_t.length>0&&xt.length>Et&&_t[0]===xt[0];)_t.shift(),xt.shift();let kt="";if(_t.length>0){_t.pop();for(let Lt=0;Lt<_t.length;++Lt)kt+="../"}return kt+=xt.join("/"),st.query!==null&&(kt+="?"+st.query),st.fragment!==null&&(kt+="#"+st.fragment),kt===""&&(kt="./"),kt};api$a.removeDotSegments=nt=>{if(nt.length===0)return"";const rt=nt.split("/"),it=[];for(;rt.length>0;){const st=rt.shift(),_t=rt.length===0;if(st==="."){_t&&it.push("");continue}if(st===".."){it.pop(),_t&&it.push("");continue}it.push(st)}return nt[0]==="/"&&it.length>0&&it[0]!==""&&it.unshift(""),it.length===1&&it[0]===""?"/":it.join("/")};const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;api$a.isAbsolute=nt=>types$4.isString(nt)&&isAbsoluteRegex.test(nt);api$a.isRelative=nt=>types$4.isString(nt);const{parseLinkHeader,buildHeaders}=util$5,{LINK_HEADER_CONTEXT}=constants,JsonLdError$a=JsonLdError_1,RequestQueue=requireRequestQueue(),{prependBase:prependBase$2}=url$1,REGEX_LINK_HEADER=/(^|(\r\n))link:/i;var xhr=({secure:nt,headers:rt={},xhr:it}={headers:{}})=>{return rt=buildHeaders(rt),new RequestQueue().wrapLoader(_t);async function _t(xt){if(xt.indexOf("http:")!==0&&xt.indexOf("https:")!==0)throw new JsonLdError$a('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:xt});if(nt&&xt.indexOf("https")!==0)throw new JsonLdError$a(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:xt});let Et;try{Et=await _get(it,xt,rt)}catch(Nt){throw new JsonLdError$a("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:xt,cause:Nt})}if(Et.status>=400)throw new JsonLdError$a("URL could not be dereferenced: "+Et.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:xt,httpStatusCode:Et.status});let kt={contextUrl:null,documentUrl:xt,document:Et.response},Lt=null;const It=Et.getResponseHeader("Content-Type");let Rt;if(REGEX_LINK_HEADER.test(Et.getAllResponseHeaders())&&(Rt=Et.getResponseHeader("Link")),Rt&&It!=="application/ld+json"){const Nt=parseLinkHeader(Rt),Bt=Nt[LINK_HEADER_CONTEXT];if(Array.isArray(Bt))throw new JsonLdError$a("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:xt});Bt&&(kt.contextUrl=Bt.target),Lt=Nt.alternate,Lt&&Lt.type=="application/ld+json"&&!(It||"").match(/^application\/(\w*\+)?json$/)&&(kt=await _t(prependBase$2(xt,Lt.target)))}return kt}};function _get(nt,rt,it){nt=nt||XMLHttpRequest;const st=new nt;return new Promise((_t,xt)=>{st.onload=()=>_t(st),st.onerror=Et=>xt(Et),st.open("GET",rt,!0);for(const Et in it)st.setRequestHeader(Et,it[Et]);st.send()})}const xhrLoader=xhr,api$9={};var platformBrowser=api$9;api$9.setupDocumentLoaders=function(nt){typeof XMLHttpRequest<"u"&&(nt.documentLoaders.xhr=xhrLoader,nt.useDocumentLoader("xhr"))};api$9.setupGlobals=function(nt){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:nt.JsonLdProcessor})};var iterator,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator=function(nt){nt.prototype[Symbol.iterator]=function*(){for(let rt=this.head;rt;rt=rt.next)yield rt.value}}),iterator}var yallist=Yallist$1;Yallist$1.Node=Node$1;Yallist$1.create=Yallist$1;function Yallist$1(nt){var rt=this;if(rt instanceof Yallist$1||(rt=new Yallist$1),rt.tail=null,rt.head=null,rt.length=0,nt&&typeof nt.forEach=="function")nt.forEach(function(_t){rt.push(_t)});else if(arguments.length>0)for(var it=0,st=arguments.length;it<st;it++)rt.push(arguments[it]);return rt}Yallist$1.prototype.removeNode=function(nt){if(nt.list!==this)throw new Error("removing node which does not belong to this list");var rt=nt.next,it=nt.prev;return rt&&(rt.prev=it),it&&(it.next=rt),nt===this.head&&(this.head=rt),nt===this.tail&&(this.tail=it),nt.list.length--,nt.next=null,nt.prev=null,nt.list=null,rt};Yallist$1.prototype.unshiftNode=function(nt){if(nt!==this.head){nt.list&&nt.list.removeNode(nt);var rt=this.head;nt.list=this,nt.next=rt,rt&&(rt.prev=nt),this.head=nt,this.tail||(this.tail=nt),this.length++}};Yallist$1.prototype.pushNode=function(nt){if(nt!==this.tail){nt.list&&nt.list.removeNode(nt);var rt=this.tail;nt.list=this,nt.prev=rt,rt&&(rt.next=nt),this.tail=nt,this.head||(this.head=nt),this.length++}};Yallist$1.prototype.push=function(){for(var nt=0,rt=arguments.length;nt<rt;nt++)push(this,arguments[nt]);return this.length};Yallist$1.prototype.unshift=function(){for(var nt=0,rt=arguments.length;nt<rt;nt++)unshift(this,arguments[nt]);return this.length};Yallist$1.prototype.pop=function(){if(!!this.tail){var nt=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,nt}};Yallist$1.prototype.shift=function(){if(!!this.head){var nt=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,nt}};Yallist$1.prototype.forEach=function(nt,rt){rt=rt||this;for(var it=this.head,st=0;it!==null;st++)nt.call(rt,it.value,st,this),it=it.next};Yallist$1.prototype.forEachReverse=function(nt,rt){rt=rt||this;for(var it=this.tail,st=this.length-1;it!==null;st--)nt.call(rt,it.value,st,this),it=it.prev};Yallist$1.prototype.get=function(nt){for(var rt=0,it=this.head;it!==null&&rt<nt;rt++)it=it.next;if(rt===nt&&it!==null)return it.value};Yallist$1.prototype.getReverse=function(nt){for(var rt=0,it=this.tail;it!==null&&rt<nt;rt++)it=it.prev;if(rt===nt&&it!==null)return it.value};Yallist$1.prototype.map=function(nt,rt){rt=rt||this;for(var it=new Yallist$1,st=this.head;st!==null;)it.push(nt.call(rt,st.value,this)),st=st.next;return it};Yallist$1.prototype.mapReverse=function(nt,rt){rt=rt||this;for(var it=new Yallist$1,st=this.tail;st!==null;)it.push(nt.call(rt,st.value,this)),st=st.prev;return it};Yallist$1.prototype.reduce=function(nt,rt){var it,st=this.head;if(arguments.length>1)it=rt;else if(this.head)st=this.head.next,it=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var _t=0;st!==null;_t++)it=nt(it,st.value,_t),st=st.next;return it};Yallist$1.prototype.reduceReverse=function(nt,rt){var it,st=this.tail;if(arguments.length>1)it=rt;else if(this.tail)st=this.tail.prev,it=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var _t=this.length-1;st!==null;_t--)it=nt(it,st.value,_t),st=st.prev;return it};Yallist$1.prototype.toArray=function(){for(var nt=new Array(this.length),rt=0,it=this.head;it!==null;rt++)nt[rt]=it.value,it=it.next;return nt};Yallist$1.prototype.toArrayReverse=function(){for(var nt=new Array(this.length),rt=0,it=this.tail;it!==null;rt++)nt[rt]=it.value,it=it.prev;return nt};Yallist$1.prototype.slice=function(nt,rt){rt=rt||this.length,rt<0&&(rt+=this.length),nt=nt||0,nt<0&&(nt+=this.length);var it=new Yallist$1;if(rt<nt||rt<0)return it;nt<0&&(nt=0),rt>this.length&&(rt=this.length);for(var st=0,_t=this.head;_t!==null&&st<nt;st++)_t=_t.next;for(;_t!==null&&st<rt;st++,_t=_t.next)it.push(_t.value);return it};Yallist$1.prototype.sliceReverse=function(nt,rt){rt=rt||this.length,rt<0&&(rt+=this.length),nt=nt||0,nt<0&&(nt+=this.length);var it=new Yallist$1;if(rt<nt||rt<0)return it;nt<0&&(nt=0),rt>this.length&&(rt=this.length);for(var st=this.length,_t=this.tail;_t!==null&&st>rt;st--)_t=_t.prev;for(;_t!==null&&st>nt;st--,_t=_t.prev)it.push(_t.value);return it};Yallist$1.prototype.splice=function(nt,rt,...it){nt>this.length&&(nt=this.length-1),nt<0&&(nt=this.length+nt);for(var st=0,_t=this.head;_t!==null&&st<nt;st++)_t=_t.next;for(var xt=[],st=0;_t&&st<rt;st++)xt.push(_t.value),_t=this.removeNode(_t);_t===null&&(_t=this.tail),_t!==this.head&&_t!==this.tail&&(_t=_t.prev);for(var st=0;st<it.length;st++)_t=insert(this,_t,it[st]);return xt};Yallist$1.prototype.reverse=function(){for(var nt=this.head,rt=this.tail,it=nt;it!==null;it=it.prev){var st=it.prev;it.prev=it.next,it.next=st}return this.head=rt,this.tail=nt,this};function insert(nt,rt,it){var st=rt===nt.head?new Node$1(it,null,rt,nt):new Node$1(it,rt,rt.next,nt);return st.next===null&&(nt.tail=st),st.prev===null&&(nt.head=st),nt.length++,st}function push(nt,rt){nt.tail=new Node$1(rt,nt.tail,null,nt),nt.head||(nt.head=nt.tail),nt.length++}function unshift(nt,rt){nt.head=new Node$1(rt,null,nt.head,nt),nt.tail||(nt.tail=nt.head),nt.length++}function Node$1(nt,rt,it,st){if(!(this instanceof Node$1))return new Node$1(nt,rt,it,st);this.list=st,this.value=nt,rt?(rt.next=this,this.prev=rt):this.prev=null,it?(it.prev=this,this.next=it):this.next=null}try{requireIterator()(Yallist$1)}catch(nt){}const Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(rt){if(typeof rt=="number"&&(rt={max:rt}),rt||(rt={}),rt.max&&(typeof rt.max!="number"||rt.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=rt.max||1/0;const it=rt.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof it!="function"?naiveLength:it,this[ALLOW_STALE]=rt.stale||!1,rt.maxAge&&typeof rt.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=rt.maxAge||0,this[DISPOSE]=rt.dispose,this[NO_DISPOSE_ON_SET]=rt.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=rt.updateAgeOnGet||!1,this.reset()}set max(rt){if(typeof rt!="number"||rt<0)throw new TypeError("max must be a non-negative number");this[MAX]=rt||1/0,trim(this)}get max(){return this[MAX]}set allowStale(rt){this[ALLOW_STALE]=!!rt}get allowStale(){return this[ALLOW_STALE]}set maxAge(rt){if(typeof rt!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=rt,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(rt){typeof rt!="function"&&(rt=naiveLength),rt!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=rt,this[LENGTH]=0,this[LRU_LIST].forEach(it=>{it.length=this[LENGTH_CALCULATOR](it.value,it.key),this[LENGTH]+=it.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(rt,it){it=it||this;for(let st=this[LRU_LIST].tail;st!==null;){const _t=st.prev;forEachStep(this,rt,st,it),st=_t}}forEach(rt,it){it=it||this;for(let st=this[LRU_LIST].head;st!==null;){const _t=st.next;forEachStep(this,rt,st,it),st=_t}}keys(){return this[LRU_LIST].toArray().map(rt=>rt.key)}values(){return this[LRU_LIST].toArray().map(rt=>rt.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(rt=>this[DISPOSE](rt.key,rt.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(rt=>isStale(this,rt)?!1:{k:rt.key,v:rt.value,e:rt.now+(rt.maxAge||0)}).toArray().filter(rt=>rt)}dumpLru(){return this[LRU_LIST]}set(rt,it,st){if(st=st||this[MAX_AGE],st&&typeof st!="number")throw new TypeError("maxAge must be a number");const _t=st?Date.now():0,xt=this[LENGTH_CALCULATOR](it,rt);if(this[CACHE].has(rt)){if(xt>this[MAX])return del(this,this[CACHE].get(rt)),!1;const Lt=this[CACHE].get(rt).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](rt,Lt.value)),Lt.now=_t,Lt.maxAge=st,Lt.value=it,this[LENGTH]+=xt-Lt.length,Lt.length=xt,this.get(rt),trim(this),!0}const Et=new Entry(rt,it,xt,_t,st);return Et.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](rt,it),!1):(this[LENGTH]+=Et.length,this[LRU_LIST].unshift(Et),this[CACHE].set(rt,this[LRU_LIST].head),trim(this),!0)}has(rt){if(!this[CACHE].has(rt))return!1;const it=this[CACHE].get(rt).value;return!isStale(this,it)}get(rt){return get(this,rt,!0)}peek(rt){return get(this,rt,!1)}pop(){const rt=this[LRU_LIST].tail;return rt?(del(this,rt),rt.value):null}del(rt){del(this,this[CACHE].get(rt))}load(rt){this.reset();const it=Date.now();for(let st=rt.length-1;st>=0;st--){const _t=rt[st],xt=_t.e||0;if(xt===0)this.set(_t.k,_t.v);else{const Et=xt-it;Et>0&&this.set(_t.k,_t.v,Et)}}}prune(){this[CACHE].forEach((rt,it)=>get(this,it,!1))}}const get=(nt,rt,it)=>{const st=nt[CACHE].get(rt);if(st){const _t=st.value;if(isStale(nt,_t)){if(del(nt,st),!nt[ALLOW_STALE])return}else it&&(nt[UPDATE_AGE_ON_GET]&&(st.value.now=Date.now()),nt[LRU_LIST].unshiftNode(st));return _t.value}},isStale=(nt,rt)=>{if(!rt||!rt.maxAge&&!nt[MAX_AGE])return!1;const it=Date.now()-rt.now;return rt.maxAge?it>rt.maxAge:nt[MAX_AGE]&&it>nt[MAX_AGE]},trim=nt=>{if(nt[LENGTH]>nt[MAX])for(let rt=nt[LRU_LIST].tail;nt[LENGTH]>nt[MAX]&&rt!==null;){const it=rt.prev;del(nt,rt),rt=it}},del=(nt,rt)=>{if(rt){const it=rt.value;nt[DISPOSE]&&nt[DISPOSE](it.key,it.value),nt[LENGTH]-=it.length,nt[CACHE].delete(it.key),nt[LRU_LIST].removeNode(rt)}};class Entry{constructor(rt,it,st,_t,xt){this.key=rt,this.value=it,this.length=st,this.now=_t,this.maxAge=xt||0}}const forEachStep=(nt,rt,it,st)=>{let _t=it.value;isStale(nt,_t)&&(del(nt,it),nt[ALLOW_STALE]||(_t=void 0)),_t&&rt.call(st,_t.value,_t.key,nt)};var lruCache=LRUCache;const LRU$1=lruCache,MAX_ACTIVE_CONTEXTS=10;var ResolvedContext_1=class{constructor({document:rt}){this.document=rt,this.cache=new LRU$1({max:MAX_ACTIVE_CONTEXTS})}getProcessed(rt){return this.cache.get(rt)}setProcessed(rt,it){this.cache.set(rt,it)}};const{isArray:_isArray$5,isObject:_isObject$4,isString:_isString$4}=types$7,{asArray:_asArray$4}=util$5,{prependBase:prependBase$1}=url$1,JsonLdError$9=JsonLdError_1,ResolvedContext=ResolvedContext_1,MAX_CONTEXT_URLS=10;var ContextResolver_1=class{constructor({sharedCache:rt}){this.perOpCache=new Map,this.sharedCache=rt}async resolve({activeCtx:rt,context:it,documentLoader:st,base:_t,cycles:xt=new Set}){it&&_isObject$4(it)&&it["@context"]&&(it=it["@context"]),it=_asArray$4(it);const Et=[];for(const kt of it){if(_isString$4(kt)){let Rt=this._get(kt);Rt||(Rt=await this._resolveRemoteContext({activeCtx:rt,url:kt,documentLoader:st,base:_t,cycles:xt})),_isArray$5(Rt)?Et.push(...Rt):Et.push(Rt);continue}if(kt===null){Et.push(new ResolvedContext({document:null}));continue}_isObject$4(kt)||_throwInvalidLocalContext(it);const Lt=JSON.stringify(kt);let It=this._get(Lt);It||(It=new ResolvedContext({document:kt}),this._cacheResolvedContext({key:Lt,resolved:It,tag:"static"})),Et.push(It)}return Et}_get(rt){let it=this.perOpCache.get(rt);if(!it){const st=this.sharedCache.get(rt);st&&(it=st.get("static"),it&&this.perOpCache.set(rt,it))}return it}_cacheResolvedContext({key:rt,resolved:it,tag:st}){if(this.perOpCache.set(rt,it),st!==void 0){let _t=this.sharedCache.get(rt);_t||(_t=new Map,this.sharedCache.set(rt,_t)),_t.set(st,it)}return it}async _resolveRemoteContext({activeCtx:rt,url:it,documentLoader:st,base:_t,cycles:xt}){it=prependBase$1(_t,it);const{context:Et,remoteDoc:kt}=await this._fetchContext({activeCtx:rt,url:it,documentLoader:st,cycles:xt});_t=kt.documentUrl||it,_resolveContextUrls({context:Et,base:_t});const Lt=await this.resolve({activeCtx:rt,context:Et,documentLoader:st,base:_t,cycles:xt});return this._cacheResolvedContext({key:it,resolved:Lt,tag:kt.tag}),Lt}async _fetchContext({activeCtx:rt,url:it,documentLoader:st,cycles:_t}){if(_t.size>MAX_CONTEXT_URLS)throw new JsonLdError$9("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:rt.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:MAX_CONTEXT_URLS});if(_t.has(it))throw new JsonLdError$9("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:rt.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:it});_t.add(it);let xt,Et;try{Et=await st(it),xt=Et.document||null,_isString$4(xt)&&(xt=JSON.parse(xt))}catch(kt){throw new JsonLdError$9(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${it}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:it,cause:kt})}if(!_isObject$4(xt))throw new JsonLdError$9(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${it}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:it});return"@context"in xt?xt={"@context":xt["@context"]}:xt={"@context":{}},Et.contextUrl&&(_isArray$5(xt["@context"])||(xt["@context"]=[xt["@context"]]),xt["@context"].push(Et.contextUrl)),{context:xt,remoteDoc:Et}}};function _throwInvalidLocalContext(nt){throw new JsonLdError$9("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:nt})}function _resolveContextUrls({context:nt,base:rt}){if(!nt)return;const it=nt["@context"];if(_isString$4(it)){nt["@context"]=prependBase$1(rt,it);return}if(_isArray$5(it)){for(let st=0;st<it.length;++st){const _t=it[st];if(_isString$4(_t)){it[st]=prependBase$1(rt,_t);continue}_isObject$4(_t)&&_resolveContextUrls({context:{"@context":_t},base:rt})}return}if(!!_isObject$4(it))for(const st in it)_resolveContextUrls({context:it[st],base:rt})}var NQuads$1=rdfCanonize.exports.NQuads;const JsonLdError$8=JsonLdError_1,{isArray:_isArray$4}=types$7,{asArray:_asArray$3}=util$5,api$8={};var events=api$8;api$8.defaultEventHandler=null;api$8.setupEventHandler=({options:nt={}})=>{const rt=[].concat(nt.safe?api$8.safeEventHandler:[],nt.eventHandler?_asArray$3(nt.eventHandler):[],api$8.defaultEventHandler?api$8.defaultEventHandler:[]);return rt.length===0?null:rt};api$8.handleEvent=({event:nt,options:rt})=>{_handle({event:nt,handlers:rt.eventHandler})};function _handle({event:nt,handlers:rt}){let it=!0;for(let st=0;it&&st<rt.length;++st){it=!1;const _t=rt[st];if(_isArray$4(_t))it=_handle({event:nt,handlers:_t});else if(typeof _t=="function")_t({event:nt,next:()=>{it=!0}});else if(typeof _t=="object")nt.code in _t?_t[nt.code]({event:nt,next:()=>{it=!0}}):it=!0;else throw new JsonLdError$8("Invalid event handler.","jsonld.InvalidEventHandler",{event:nt})}return it}const _notSafeEventCodes=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);api$8.safeEventHandler=function nt({event:rt,next:it}){if(rt.level==="warning"&&_notSafeEventCodes.has(rt.code))throw new JsonLdError$8("Safe mode validation error.","jsonld.ValidationError",{event:rt});it()};api$8.logEventHandler=function nt({event:rt,next:it}){console.log(`EVENT: ${rt.message}`,{event:rt}),it()};api$8.logWarningEventHandler=function nt({event:rt,next:it}){rt.level==="warning"&&console.warn(`WARNING: ${rt.message}`,{event:rt}),it()};api$8.unhandledEventHandler=function nt({event:rt}){throw new JsonLdError$8("No handler for event.","jsonld.UnhandledEvent",{event:rt})};api$8.setDefaultEventHandler=function({eventHandler:nt}={}){api$8.defaultEventHandler=nt?_asArray$3(nt):null};const util$4=util$5,JsonLdError$7=JsonLdError_1,{isArray:_isArray$3,isObject:_isObject$3,isString:_isString$3,isUndefined:_isUndefined$2}=types$7,{isAbsolute:_isAbsoluteIri$2,isRelative:_isRelativeIri,prependBase}=url$1,{handleEvent:_handleEvent$3}=events,{REGEX_BCP47:REGEX_BCP47$2,REGEX_KEYWORD:REGEX_KEYWORD$2,asArray:_asArray$2,compareShortestLeast:_compareShortestLeast$1}=util$5,INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,api$7={};var context=api$7;api$7.process=async({activeCtx:nt,localCtx:rt,options:it,propagate:st=!0,overrideProtected:_t=!1,cycles:xt=new Set})=>{if(_isObject$3(rt)&&"@context"in rt&&_isArray$3(rt["@context"])&&(rt=rt["@context"]),_asArray$2(rt).length===0)return nt;const kt=[],Lt=[({event:Bt,next:Ft})=>{kt.push(Bt),Ft()}];it.eventHandler&&Lt.push(it.eventHandler);const It=it;it={...it,eventHandler:Lt};const Rt=await it.contextResolver.resolve({activeCtx:nt,context:rt,documentLoader:it.documentLoader,base:it.base});_isObject$3(Rt[0].document)&&typeof Rt[0].document["@propagate"]=="boolean"&&(st=Rt[0].document["@propagate"]);let Nt=nt;!st&&!Nt.previousContext&&(Nt=Nt.clone(),Nt.previousContext=nt);for(const Bt of Rt){let{document:Ft}=Bt;if(nt=Nt,Ft===null){if(!_t&&Object.keys(nt.protected).length!==0)throw new JsonLdError$7("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Nt=nt=api$7.getInitialContext(it).clone();continue}const Yt=Bt.getProcessed(nt);if(Yt){if(It.eventHandler)for(const Wt of Yt.events)_handleEvent$3({event:Wt,options:It});Nt=nt=Yt.context;continue}if(_isObject$3(Ft)&&"@context"in Ft&&(Ft=Ft["@context"]),!_isObject$3(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Ft});Nt=Nt.clone();const Zt=new Map;if("@version"in Ft){if(Ft["@version"]!==1.1)throw new JsonLdError$7("Unsupported JSON-LD version: "+Ft["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Ft});if(nt.processingMode&&nt.processingMode==="json-ld-1.0")throw new JsonLdError$7("@version: "+Ft["@version"]+" not compatible with "+nt.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Ft});Nt.processingMode="json-ld-1.1",Nt["@version"]=Ft["@version"],Zt.set("@version",!0)}if(Nt.processingMode=Nt.processingMode||nt.processingMode,"@base"in Ft){let Wt=Ft["@base"];if(!(Wt===null||_isAbsoluteIri$2(Wt)))if(_isRelativeIri(Wt))Wt=prependBase(Nt["@base"],Wt);else throw new JsonLdError$7('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Ft});Nt["@base"]=Wt,Zt.set("@base",!0)}if("@vocab"in Ft){const Wt=Ft["@vocab"];if(Wt===null)delete Nt["@vocab"];else if(_isString$3(Wt)){if(!_isAbsoluteIri$2(Wt)&&api$7.processingMode(Nt,1))throw new JsonLdError$7('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ft});{const Kt=_expandIri$3(Nt,Wt,{vocab:!0,base:!0},void 0,void 0,it);_isAbsoluteIri$2(Kt)||it.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Kt}},options:it}),Nt["@vocab"]=Kt}}else throw new JsonLdError$7('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ft});Zt.set("@vocab",!0)}if("@language"in Ft){const Wt=Ft["@language"];if(Wt===null)delete Nt["@language"];else if(_isString$3(Wt))Wt.match(REGEX_BCP47$2)||it.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Wt}},options:it}),Nt["@language"]=Wt.toLowerCase();else throw new JsonLdError$7('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Ft});Zt.set("@language",!0)}if("@direction"in Ft){const Wt=Ft["@direction"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$7("Invalid JSON-LD syntax; @direction not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Ft});if(Wt===null)delete Nt["@direction"];else{if(Wt!=="ltr"&&Wt!=="rtl")throw new JsonLdError$7('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Ft});Nt["@direction"]=Wt}Zt.set("@direction",!0)}if("@propagate"in Ft){const Wt=Ft["@propagate"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$7("Invalid JSON-LD syntax; @propagate not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ft});if(typeof Wt!="boolean")throw new JsonLdError$7("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:rt});Zt.set("@propagate",!0)}if("@import"in Ft){const Wt=Ft["@import"];if(nt.processingMode==="json-ld-1.0")throw new JsonLdError$7("Invalid JSON-LD syntax; @import not compatible with "+nt.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ft});if(!_isString$3(Wt))throw new JsonLdError$7("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:rt});const Kt=await it.contextResolver.resolve({activeCtx:nt,context:Wt,documentLoader:it.documentLoader,base:it.base});if(Kt.length!==1)throw new JsonLdError$7("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:rt});const Jt=Kt[0].getProcessed(nt);if(Jt)Ft=Jt;else{const on=Kt[0].document;if("@import"in on)throw new JsonLdError$7("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:rt});for(const rn in on)Ft.hasOwnProperty(rn)||(Ft[rn]=on[rn]);Kt[0].setProcessed(nt,Ft)}Zt.set("@import",!0)}Zt.set("@protected",Ft["@protected"]||!1);for(const Wt in Ft)if(api$7.createTermDefinition({activeCtx:Nt,localCtx:Ft,term:Wt,defined:Zt,options:it,overrideProtected:_t}),_isObject$3(Ft[Wt])&&"@context"in Ft[Wt]){const Kt=Ft[Wt]["@context"];let Jt=!0;if(_isString$3(Kt)){const on=prependBase(it.base,Kt);xt.has(on)?Jt=!1:xt.add(on)}if(Jt)try{await api$7.process({activeCtx:Nt.clone(),localCtx:Ft[Wt]["@context"],overrideProtected:!0,options:it,cycles:xt})}catch{throw new JsonLdError$7("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Ft[Wt]["@context"],term:Wt})}}Bt.setProcessed(nt,{context:Nt,events:kt})}return Nt};api$7.createTermDefinition=({activeCtx:nt,localCtx:rt,term:it,defined:st,options:_t,overrideProtected:xt=!1})=>{if(st.has(it)){if(st.get(it))return;throw new JsonLdError$7("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:rt,term:it})}st.set(it,!1);let Et;if(rt.hasOwnProperty(it)&&(Et=rt[it]),it==="@type"&&_isObject$3(Et)&&(Et["@container"]||"@set")==="@set"&&api$7.processingMode(nt,1.1)){const Ft=["@container","@id","@protected"],Yt=Object.keys(Et);if(Yt.length===0||Yt.some(Zt=>!Ft.includes(Zt)))throw new JsonLdError$7("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:rt,term:it})}else{if(api$7.isKeyword(it))throw new JsonLdError$7("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:rt,term:it});if(it.match(REGEX_KEYWORD$2)){_t.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:it}},options:_t});return}else if(it==="")throw new JsonLdError$7("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:rt})}const kt=nt.mappings.get(it);nt.mappings.has(it)&&nt.mappings.delete(it);let Lt=!1;if((_isString$3(Et)||Et===null)&&(Lt=!0,Et={"@id":Et}),!_isObject$3(Et))throw new JsonLdError$7("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:rt});const It={};nt.mappings.set(it,It),It.reverse=!1;const Rt=["@container","@id","@language","@reverse","@type"];api$7.processingMode(nt,1.1)&&Rt.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Ft in Et)if(!Rt.includes(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; a term definition must not contain "+Ft,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});const Nt=it.indexOf(":");if(It._termHasColon=Nt>0,"@reverse"in Et){if("@id"in Et)throw new JsonLdError$7("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});if("@nest"in Et)throw new JsonLdError$7("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});const Ft=Et["@reverse"];if(!_isString$3(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(Ft.match(REGEX_KEYWORD$2)){_t.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Ft}},options:_t}),kt?nt.mappings.set(it,kt):nt.mappings.delete(it);return}const Yt=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,_t);if(!_isAbsoluteIri$2(Yt))throw new JsonLdError$7("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});It["@id"]=Yt,It.reverse=!0}else if("@id"in Et){let Ft=Et["@id"];if(Ft&&!_isString$3(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(Ft===null)It["@id"]=null;else if(!api$7.isKeyword(Ft)&&Ft.match(REGEX_KEYWORD$2)){_t.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Ft}},options:_t}),kt?nt.mappings.set(it,kt):nt.mappings.delete(it);return}else if(Ft!==it){if(Ft=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,_t),!_isAbsoluteIri$2(Ft)&&!api$7.isKeyword(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt});if(it.match(/(?::[^:])|\//)){const Yt=new Map(st).set(it,!0);if(_expandIri$3(nt,it,{vocab:!0,base:!1},rt,Yt,_t)!==Ft)throw new JsonLdError$7("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt})}It["@id"]=Ft,It._prefix=Lt&&!It._termHasColon&&Ft.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in It))if(It._termHasColon){const Ft=it.substr(0,Nt);if(rt.hasOwnProperty(Ft)&&api$7.createTermDefinition({activeCtx:nt,localCtx:rt,term:Ft,defined:st,options:_t}),nt.mappings.has(Ft)){const Yt=it.substr(Nt+1);It["@id"]=nt.mappings.get(Ft)["@id"]+Yt}else It["@id"]=it}else if(it==="@type")It["@id"]=it;else{if(!("@vocab"in nt))throw new JsonLdError$7("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:rt,term:it});It["@id"]=nt["@vocab"]+it}if((Et["@protected"]===!0||st.get("@protected")===!0&&Et["@protected"]!==!1)&&(nt.protected[it]=!0,It.protected=!0),st.set(it,!0),"@type"in Et){let Ft=Et["@type"];if(!_isString$3(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt});if(Ft==="@json"||Ft==="@none"){if(api$7.processingMode(nt,1))throw new JsonLdError$7(`Invalid JSON-LD syntax; an @context @type value must not be "${Ft}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}else if(Ft!=="@id"&&Ft!=="@vocab"){if(Ft=_expandIri$3(nt,Ft,{vocab:!0,base:!1},rt,st,_t),!_isAbsoluteIri$2(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt});if(Ft.indexOf("_:")===0)throw new JsonLdError$7("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}It["@type"]=Ft}if("@container"in Et){const Ft=_isString$3(Et["@container"])?[Et["@container"]]:Et["@container"]||[],Yt=["@list","@set","@index","@language"];let Zt=!0;const Wt=Ft.includes("@set");if(api$7.processingMode(nt,1.1)){if(Yt.push("@graph","@id","@type"),Ft.includes("@list")){if(Ft.length!==1)throw new JsonLdError$7("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:rt})}else if(Ft.includes("@graph")){if(Ft.some(Kt=>Kt!=="@graph"&&Kt!=="@id"&&Kt!=="@index"&&Kt!=="@set"))throw new JsonLdError$7("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:rt})}else Zt&=Ft.length<=(Wt?2:1);if(Ft.includes("@type")&&(It["@type"]=It["@type"]||"@id",!["@id","@vocab"].includes(It["@type"])))throw new JsonLdError$7("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:rt})}else Zt&=!_isArray$3(Et["@container"]),Zt&=Ft.length<=1;if(Zt&=Ft.every(Kt=>Yt.includes(Kt)),Zt&=!(Wt&&Ft.includes("@list")),!Zt)throw new JsonLdError$7("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Yt.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:rt});if(It.reverse&&!Ft.every(Kt=>["@index","@set"].includes(Kt)))throw new JsonLdError$7("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:rt});It["@container"]=Ft}if("@index"in Et){if(!("@container"in Et)||!It["@container"].includes("@index"))throw new JsonLdError$7(`Invalid JSON-LD syntax; @index without @index in @container: "${Et["@index"]}" on term "${it}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(!_isString$3(Et["@index"])||Et["@index"].indexOf("@")===0)throw new JsonLdError$7(`Invalid JSON-LD syntax; @index must expand to an IRI: "${Et["@index"]}" on term "${it}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:rt});It["@index"]=Et["@index"]}if("@context"in Et&&(It["@context"]=Et["@context"]),"@language"in Et&&!("@type"in Et)){let Ft=Et["@language"];if(Ft!==null&&!_isString$3(Ft))throw new JsonLdError$7("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:rt});Ft!==null&&(Ft=Ft.toLowerCase()),It["@language"]=Ft}if("@prefix"in Et){if(it.match(/:|\//))throw new JsonLdError$7("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(api$7.isKeyword(It["@id"]))throw new JsonLdError$7("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:rt});if(typeof Et["@prefix"]=="boolean")It._prefix=Et["@prefix"]===!0;else throw new JsonLdError$7("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:rt})}if("@direction"in Et){const Ft=Et["@direction"];if(Ft!==null&&Ft!=="ltr"&&Ft!=="rtl")throw new JsonLdError$7('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:rt});It["@direction"]=Ft}if("@nest"in Et){const Ft=Et["@nest"];if(!_isString$3(Ft)||Ft!=="@nest"&&Ft.indexOf("@")===0)throw new JsonLdError$7("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:rt});It["@nest"]=Ft}// disallow aliasing @context and @preserve
const Bt=It["@id"];if(Bt==="@context"||Bt==="@preserve")throw new JsonLdError$7("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:rt});if(kt&&kt.protected&&!xt&&(nt.protected[it]=!0,It.protected=!0,!_deepCompare(kt,It)))throw new JsonLdError$7("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:rt,term:it})};api$7.expandIri=(nt,rt,it,st)=>_expandIri$3(nt,rt,it,void 0,void 0,st);function _expandIri$3(nt,rt,it,st,_t,xt){if(rt===null||!_isString$3(rt)||api$7.isKeyword(rt))return rt;if(rt.match(REGEX_KEYWORD$2))return null;if(st&&st.hasOwnProperty(rt)&&_t.get(rt)!==!0&&api$7.createTermDefinition({activeCtx:nt,localCtx:st,term:rt,defined:_t,options:xt}),it=it||{},it.vocab){const kt=nt.mappings.get(rt);if(kt===null)return null;if(_isObject$3(kt)&&"@id"in kt)return kt["@id"]}const Et=rt.indexOf(":");if(Et>0){const kt=rt.substr(0,Et),Lt=rt.substr(Et+1);if(kt==="_"||Lt.indexOf("//")===0)return rt;st&&st.hasOwnProperty(kt)&&api$7.createTermDefinition({activeCtx:nt,localCtx:st,term:kt,defined:_t,options:xt});const It=nt.mappings.get(kt);if(It&&It._prefix)return It["@id"]+Lt;if(_isAbsoluteIri$2(rt))return rt}if(it.vocab&&"@vocab"in nt)rt=nt["@vocab"]+rt;else if(it.base){let kt,Lt;"@base"in nt?nt["@base"]?(Lt=prependBase(xt.base,nt["@base"]),kt=prependBase(Lt,rt)):(Lt=nt["@base"],kt=rt):(Lt=xt.base,kt=prependBase(xt.base,rt)),rt=kt}return rt}api$7.getInitialContext=nt=>{const rt=JSON.stringify({processingMode:nt.processingMode}),it=INITIAL_CONTEXT_CACHE.get(rt);if(it)return it;const st={processingMode:nt.processingMode,mappings:new Map,inverse:null,getInverse:_t,clone:kt,revertToPreviousContext:Lt,protected:{}};return INITIAL_CONTEXT_CACHE.size===INITIAL_CONTEXT_CACHE_MAX_SIZE&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(rt,st),st;function _t(){const It=this;if(It.inverse)return It.inverse;const Rt=It.inverse={},Nt=It.fastCurieMap={},Bt={},Ft=(It["@language"]||"@none").toLowerCase(),Yt=It["@direction"],Zt=It.mappings,Wt=[...Zt.keys()].sort(_compareShortestLeast$1);for(const Kt of Wt){const Jt=Zt.get(Kt);if(Jt===null)continue;let on=Jt["@container"]||"@none";if(on=[].concat(on).sort().join(""),Jt["@id"]===null)continue;const rn=_asArray$2(Jt["@id"]);for(const ln of rn){let gn=Rt[ln];const wn=api$7.isKeyword(ln);if(gn)!wn&&!Jt._termHasColon&&Bt[ln].push(Kt);else if(Rt[ln]=gn={},!wn&&!Jt._termHasColon){Bt[ln]=[Kt];const kn={iri:ln,terms:Bt[ln]};ln[0]in Nt?Nt[ln[0]].push(kn):Nt[ln[0]]=[kn]}if(gn[on]||(gn[on]={"@language":{},"@type":{},"@any":{}}),gn=gn[on],Et(Kt,gn["@any"],"@none"),Jt.reverse)Et(Kt,gn["@type"],"@reverse");else if(Jt["@type"]==="@none")Et(Kt,gn["@any"],"@none"),Et(Kt,gn["@language"],"@none"),Et(Kt,gn["@type"],"@none");else if("@type"in Jt)Et(Kt,gn["@type"],Jt["@type"]);else if("@language"in Jt&&"@direction"in Jt){const kn=Jt["@language"],Cn=Jt["@direction"];kn&&Cn?Et(Kt,gn["@language"],`${kn}_${Cn}`.toLowerCase()):kn?Et(Kt,gn["@language"],kn.toLowerCase()):Cn?Et(Kt,gn["@language"],`_${Cn}`):Et(Kt,gn["@language"],"@null")}else"@language"in Jt?Et(Kt,gn["@language"],(Jt["@language"]||"@null").toLowerCase()):"@direction"in Jt?Jt["@direction"]?Et(Kt,gn["@language"],`_${Jt["@direction"]}`):Et(Kt,gn["@language"],"@none"):Yt?(Et(Kt,gn["@language"],`_${Yt}`),Et(Kt,gn["@language"],"@none"),Et(Kt,gn["@type"],"@none")):(Et(Kt,gn["@language"],Ft),Et(Kt,gn["@language"],"@none"),Et(Kt,gn["@type"],"@none"))}}for(const Kt in Nt)xt(Nt,Kt,1);return Rt}function xt(It,Rt,Nt){const Bt=It[Rt],Ft=It[Rt]={};let Yt,Zt;for(const Wt of Bt)Yt=Wt.iri,Nt>=Yt.length?Zt="":Zt=Yt[Nt],Zt in Ft?Ft[Zt].push(Wt):Ft[Zt]=[Wt];for(const Wt in Ft)Wt!==""&&xt(Ft,Wt,Nt+1)}function Et(It,Rt,Nt){Rt.hasOwnProperty(Nt)||(Rt[Nt]=It)}function kt(){const It={};return It.mappings=util$4.clone(this.mappings),It.clone=this.clone,It.inverse=null,It.getInverse=this.getInverse,It.protected=util$4.clone(this.protected),this.previousContext&&(It.previousContext=this.previousContext.clone()),It.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(It["@base"]=this["@base"]),"@language"in this&&(It["@language"]=this["@language"]),"@vocab"in this&&(It["@vocab"]=this["@vocab"]),It}function Lt(){return this.previousContext?this.previousContext.clone():this}};api$7.getContextValue=(nt,rt,it)=>{if(rt===null)return it==="@context"?void 0:null;if(nt.mappings.has(rt)){const st=nt.mappings.get(rt);if(_isUndefined$2(it))return st;if(st.hasOwnProperty(it))return st[it]}if(it==="@language"&&it in nt||it==="@direction"&&it in nt)return nt[it];if(it!=="@context")return null};api$7.processingMode=(nt,rt)=>rt.toString()>="1.1"?!nt.processingMode||nt.processingMode>="json-ld-"+rt.toString():nt.processingMode==="json-ld-1.0";api$7.isKeyword=nt=>{if(!_isString$3(nt)||nt[0]!=="@")return!1;switch(nt){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function _deepCompare(nt,rt){if(!(nt&&typeof nt=="object")||!(rt&&typeof rt=="object"))return nt===rt;const it=Array.isArray(nt);if(it!==Array.isArray(rt))return!1;if(it){if(nt.length!==rt.length)return!1;for(let xt=0;xt<nt.length;++xt)if(!_deepCompare(nt[xt],rt[xt]))return!1;return!0}const st=Object.keys(nt),_t=Object.keys(rt);if(st.length!==_t.length)return!1;for(const xt in nt){let Et=nt[xt],kt=rt[xt];if(xt==="@container"&&Array.isArray(Et)&&Array.isArray(kt)&&(Et=Et.slice().sort(),kt=kt.slice().sort()),!_deepCompare(Et,kt))return!1}return!0}const JsonLdError$6=JsonLdError_1,{isArray:_isArray$2,isObject:_isObject$2,isEmptyObject:_isEmptyObject,isString:_isString$2,isUndefined:_isUndefined$1}=types$7,{isList:_isList$1,isValue:_isValue$1,isGraph:_isGraph$1,isSubject:_isSubject}=graphTypes$5,{expandIri:_expandIri$2,getContextValue:_getContextValue$1,isKeyword:_isKeyword$1,process:_processContext$2,processingMode:_processingMode$2}=context,{isAbsolute:_isAbsoluteIri$1}=url$1,{REGEX_BCP47:REGEX_BCP47$1,REGEX_KEYWORD:REGEX_KEYWORD$1,addValue:_addValue$2,asArray:_asArray$1,getValues:_getValues,validateTypeValue:_validateTypeValue}=util$5,{handleEvent:_handleEvent$2}=events,api$6={};var expand=api$6;api$6.expand=async({activeCtx:nt,activeProperty:rt=null,element:it,options:st={},insideList:_t=!1,insideIndex:xt=!1,typeScopedContext:Et=null})=>{if(it==null)return null;if(rt==="@default"&&(st=Object.assign({},st,{isFrame:!1})),!_isArray$2(it)&&!_isObject$2(it))return!_t&&(rt===null||_expandIri$2(nt,rt,{vocab:!0},st)==="@graph")?(st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:it}},options:st}),null):_expandValue({activeCtx:nt,activeProperty:rt,value:it,options:st});if(_isArray$2(it)){let Yt=[];const Zt=_getContextValue$1(nt,rt,"@container")||[];_t=_t||Zt.includes("@list");for(let Wt=0;Wt<it.length;++Wt){let Kt=await api$6.expand({activeCtx:nt,activeProperty:rt,element:it[Wt],options:st,insideIndex:xt,typeScopedContext:Et});_t&&_isArray$2(Kt)&&(Kt={"@list":Kt}),Kt!==null&&(_isArray$2(Kt)?Yt=Yt.concat(Kt):Yt.push(Kt))}return Yt}const kt=_expandIri$2(nt,rt,{vocab:!0},st),Lt=_getContextValue$1(nt,rt,"@context");Et=Et||(nt.previousContext?nt:null);let It=Object.keys(it).sort(),Rt=!xt;if(Rt&&Et&&It.length<=2&&!It.includes("@context"))for(const Yt of It){const Zt=_expandIri$2(Et,Yt,{vocab:!0},st);if(Zt==="@value"){Rt=!1,nt=Et;break}if(Zt==="@id"&&It.length===1){Rt=!1;break}}Rt&&(nt=nt.revertToPreviousContext()),_isUndefined$1(Lt)||(nt=await _processContext$2({activeCtx:nt,localCtx:Lt,propagate:!0,overrideProtected:!0,options:st})),"@context"in it&&(nt=await _processContext$2({activeCtx:nt,localCtx:it["@context"],options:st})),Et=nt;let Nt=null;for(const Yt of It)if(_expandIri$2(nt,Yt,{vocab:!0},st)==="@type"){Nt=Nt||Yt;const Wt=it[Yt],Kt=Array.isArray(Wt)?Wt.length>1?Wt.slice().sort():Wt:[Wt];for(const Jt of Kt){const on=_getContextValue$1(Et,Jt,"@context");_isUndefined$1(on)||(nt=await _processContext$2({activeCtx:nt,localCtx:on,options:st,propagate:!1}))}}let Bt={};await _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:kt,element:it,expandedParent:Bt,options:st,insideList:_t,typeKey:Nt,typeScopedContext:Et}),It=Object.keys(Bt);let Ft=It.length;if("@value"in Bt){if("@type"in Bt&&("@language"in Bt||"@direction"in Bt))throw new JsonLdError$6('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Bt});let Yt=Ft-1;if("@type"in Bt&&(Yt-=1),"@index"in Bt&&(Yt-=1),"@language"in Bt&&(Yt-=1),"@direction"in Bt&&(Yt-=1),Yt!==0)throw new JsonLdError$6('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Bt});const Zt=Bt["@value"]===null?[]:_asArray$1(Bt["@value"]),Wt=_getValues(Bt,"@type");if(!(_processingMode$2(nt,1.1)&&Wt.includes("@json")&&Wt.length===1))if(Zt.length===0)st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Bt}},options:st}),Bt=null;else{if(!Zt.every(Kt=>_isString$2(Kt)||_isEmptyObject(Kt))&&"@language"in Bt)throw new JsonLdError$6("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Bt});if(!Wt.every(Kt=>_isAbsoluteIri$1(Kt)&&!(_isString$2(Kt)&&Kt.indexOf("_:")===0)||_isEmptyObject(Kt)))throw new JsonLdError$6('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Bt})}}else if("@type"in Bt&&!_isArray$2(Bt["@type"]))Bt["@type"]=[Bt["@type"]];else if("@set"in Bt||"@list"in Bt){if(Ft>1&&!(Ft===2&&"@index"in Bt))throw new JsonLdError$6('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Bt});"@set"in Bt&&(Bt=Bt["@set"],It=Object.keys(Bt),Ft=It.length)}else Ft===1&&"@language"in Bt&&(st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Bt}},options:st}),Bt=null);return _isObject$2(Bt)&&!st.keepFreeFloatingNodes&&!_t&&(rt===null||kt==="@graph"||(_getContextValue$1(nt,rt,"@container")||[]).includes("@graph"))&&(Bt=_dropUnsafeObject({value:Bt,count:Ft,options:st})),Bt};function _dropUnsafeObject({value:nt,count:rt,options:it}){if(rt===0||"@value"in nt||"@list"in nt||rt===1&&"@id"in nt){if(it.eventHandler){let st,_t;rt===0?(st="empty object",_t="Dropping empty object."):"@value"in nt?(st="object with only @value",_t="Dropping object with only @value."):"@list"in nt?(st="object with only @list",_t="Dropping object with only @list."):rt===1&&"@id"in nt&&(st="object with only @id",_t="Dropping object with only @id."),_handleEvent$2({event:{type:["JsonLdEvent"],code:st,level:"warning",message:_t,details:{value:nt}},options:it})}return null}return nt}async function _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:it,element:st,expandedParent:_t,options:xt={},insideList:Et,typeKey:kt,typeScopedContext:Lt}){const It=Object.keys(st).sort(),Rt=[];let Nt;const Bt=st[kt]&&_expandIri$2(nt,_isArray$2(st[kt])?st[kt][0]:st[kt],{vocab:!0},{...xt,typeExpansion:!0})==="@json";for(const Ft of It){let Yt=st[Ft],Zt;if(Ft==="@context")continue;const Wt=_expandIri$2(nt,Ft,{vocab:!0},xt);if(Wt===null||!(_isAbsoluteIri$1(Wt)||_isKeyword$1(Wt))){xt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Ft,expandedProperty:Wt}},options:xt});continue}if(_isKeyword$1(Wt)){if(it==="@reverse")throw new JsonLdError$6("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Yt});if(Wt in _t&&Wt!=="@included"&&Wt!=="@type")throw new JsonLdError$6("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:Wt})}if(Wt==="@id"){if(!_isString$2(Yt)){if(!xt.isFrame)throw new JsonLdError$6('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt});if(_isObject$2(Yt)){if(!_isEmptyObject(Yt))throw new JsonLdError$6('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}else if(_isArray$2(Yt)){if(!Yt.every(rn=>_isString$2(rn)))throw new JsonLdError$6('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}else throw new JsonLdError$6('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Yt})}_addValue$2(_t,"@id",_asArray$1(Yt).map(rn=>{if(_isString$2(rn)){const ln=_expandIri$2(nt,rn,{base:!0},xt);return xt.eventHandler&&(ln===null?_handleEvent$2(rn===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:rn}},options:xt}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:rn}},options:xt}):_isAbsoluteIri$1(ln)||_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:rn,expandedId:ln}},options:xt})),ln}return rn}),{propertyIsArray:xt.isFrame});continue}if(Wt==="@type"){_isObject$2(Yt)&&(Yt=Object.fromEntries(Object.entries(Yt).map(([rn,ln])=>[_expandIri$2(Lt,rn,{vocab:!0}),_asArray$1(ln).map(gn=>_expandIri$2(Lt,gn,{base:!0,vocab:!0},{...xt,typeExpansion:!0}))]))),_validateTypeValue(Yt,xt.isFrame),_addValue$2(_t,"@type",_asArray$1(Yt).map(rn=>{if(_isString$2(rn)){const ln=_expandIri$2(Lt,rn,{base:!0,vocab:!0},{...xt,typeExpansion:!0});return ln!=="@json"&&!_isAbsoluteIri$1(ln)&&xt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:rn}},options:xt}),ln}return rn}),{propertyIsArray:!!xt.isFrame});continue}if(Wt==="@included"&&_processingMode$2(nt,1.1)){const rn=_asArray$1(await api$6.expand({activeCtx:nt,activeProperty:rt,element:Yt,options:xt}));if(!rn.every(ln=>_isSubject(ln)))throw new JsonLdError$6("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Yt});_addValue$2(_t,"@included",rn,{propertyIsArray:!0});continue}if(Wt==="@graph"&&!(_isObject$2(Yt)||_isArray$2(Yt)))throw new JsonLdError$6('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Yt});if(Wt==="@value"){Nt=Yt,Bt&&_processingMode$2(nt,1.1)?_t["@value"]=Yt:_addValue$2(_t,"@value",Yt,{propertyIsArray:xt.isFrame});continue}if(Wt==="@language"){if(Yt===null)continue;if(!_isString$2(Yt)&&!xt.isFrame)throw new JsonLdError$6('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Yt});Yt=_asArray$1(Yt).map(rn=>_isString$2(rn)?rn.toLowerCase():rn);for(const rn of Yt)_isString$2(rn)&&!rn.match(REGEX_BCP47$1)&&xt.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:rn}},options:xt});_addValue$2(_t,"@language",Yt,{propertyIsArray:xt.isFrame});continue}if(Wt==="@direction"){if(!_isString$2(Yt)&&!xt.isFrame)throw new JsonLdError$6('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Yt});Yt=_asArray$1(Yt);for(const rn of Yt)if(_isString$2(rn)&&rn!=="ltr"&&rn!=="rtl")throw new JsonLdError$6('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Yt});_addValue$2(_t,"@direction",Yt,{propertyIsArray:xt.isFrame});continue}if(Wt==="@index"){if(!_isString$2(Yt))throw new JsonLdError$6('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Yt});_addValue$2(_t,"@index",Yt);continue}if(Wt==="@reverse"){if(!_isObject$2(Yt))throw new JsonLdError$6('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Yt});if(Zt=await api$6.expand({activeCtx:nt,activeProperty:"@reverse",element:Yt,options:xt}),"@reverse"in Zt)for(const ln in Zt["@reverse"])_addValue$2(_t,ln,Zt["@reverse"][ln],{propertyIsArray:!0});let rn=_t["@reverse"]||null;for(const ln in Zt){if(ln==="@reverse")continue;rn===null&&(rn=_t["@reverse"]={}),_addValue$2(rn,ln,[],{propertyIsArray:!0});const gn=Zt[ln];for(let wn=0;wn<gn.length;++wn){const kn=gn[wn];if(_isValue$1(kn)||_isList$1(kn))throw new JsonLdError$6('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Zt});_addValue$2(rn,ln,kn,{propertyIsArray:!0})}}continue}if(Wt==="@nest"){Rt.push(Ft);continue}let Kt=nt;const Jt=_getContextValue$1(nt,Ft,"@context");_isUndefined$1(Jt)||(Kt=await _processContext$2({activeCtx:nt,localCtx:Jt,propagate:!0,overrideProtected:!0,options:xt}));const on=_getContextValue$1(nt,Ft,"@container")||[];if(on.includes("@language")&&_isObject$2(Yt)){const rn=_getContextValue$1(Kt,Ft,"@direction");Zt=_expandLanguageMap(Kt,Yt,rn,xt)}else if(on.includes("@index")&&_isObject$2(Yt)){const rn=on.includes("@graph"),ln=_getContextValue$1(Kt,Ft,"@index")||"@index",gn=ln!=="@index"&&_expandIri$2(nt,ln,{vocab:!0},xt);Zt=await _expandIndexMap({activeCtx:Kt,options:xt,activeProperty:Ft,value:Yt,asGraph:rn,indexKey:ln,propertyIndex:gn})}else if(on.includes("@id")&&_isObject$2(Yt)){const rn=on.includes("@graph");Zt=await _expandIndexMap({activeCtx:Kt,options:xt,activeProperty:Ft,value:Yt,asGraph:rn,indexKey:"@id"})}else if(on.includes("@type")&&_isObject$2(Yt))Zt=await _expandIndexMap({activeCtx:Kt.revertToPreviousContext(),options:xt,activeProperty:Ft,value:Yt,asGraph:!1,indexKey:"@type"});else{const rn=Wt==="@list";if(rn||Wt==="@set"){let ln=rt;rn&&it==="@graph"&&(ln=null),Zt=await api$6.expand({activeCtx:Kt,activeProperty:ln,element:Yt,options:xt,insideList:rn})}else _getContextValue$1(nt,Ft,"@type")==="@json"?Zt={"@type":"@json","@value":Yt}:Zt=await api$6.expand({activeCtx:Kt,activeProperty:Ft,element:Yt,options:xt,insideList:!1})}if(!(Zt===null&&Wt!=="@value")){if(Wt!=="@list"&&!_isList$1(Zt)&&on.includes("@list")&&(Zt={"@list":_asArray$1(Zt)}),on.includes("@graph")&&!on.some(rn=>rn==="@id"||rn==="@index")){if(Zt=_asArray$1(Zt),xt.isFrame||(Zt=Zt.filter(rn=>{const ln=Object.keys(rn).length;return _dropUnsafeObject({value:rn,count:ln,options:xt})!==null})),Zt.length===0)continue;Zt=Zt.map(rn=>({"@graph":_asArray$1(rn)}))}if(Kt.mappings.has(Ft)&&Kt.mappings.get(Ft).reverse){const rn=_t["@reverse"]=_t["@reverse"]||{};Zt=_asArray$1(Zt);for(let ln=0;ln<Zt.length;++ln){const gn=Zt[ln];if(_isValue$1(gn)||_isList$1(gn))throw new JsonLdError$6('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Zt});_addValue$2(rn,Wt,gn,{propertyIsArray:!0})}continue}_addValue$2(_t,Wt,Zt,{propertyIsArray:!0})}}if("@value"in _t&&!(_t["@type"]==="@json"&&_processingMode$2(nt,1.1))){if((_isObject$2(Nt)||_isArray$2(Nt))&&!xt.isFrame)throw new JsonLdError$6('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Nt})}for(const Ft of Rt){const Yt=_isArray$2(st[Ft])?st[Ft]:[st[Ft]];for(const Zt of Yt){if(!_isObject$2(Zt)||Object.keys(Zt).some(Wt=>_expandIri$2(nt,Wt,{vocab:!0},xt)==="@value"))throw new JsonLdError$6("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Zt});await _expandObject({activeCtx:nt,activeProperty:rt,expandedActiveProperty:it,element:Zt,expandedParent:_t,options:xt,insideList:Et,typeScopedContext:Lt,typeKey:kt})}}}function _expandValue({activeCtx:nt,activeProperty:rt,value:it,options:st}){if(it==null)return null;const _t=_expandIri$2(nt,rt,{vocab:!0},st);if(_t==="@id")return _expandIri$2(nt,it,{base:!0},st);if(_t==="@type")return _expandIri$2(nt,it,{vocab:!0,base:!0},{...st,typeExpansion:!0});const xt=_getContextValue$1(nt,rt,"@type");if((xt==="@id"||_t==="@graph")&&_isString$2(it)){const kt=_expandIri$2(nt,it,{base:!0},st);return kt===null&&it.match(REGEX_KEYWORD$1)&&st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:rt}},options:st}),{"@id":kt}}if(xt==="@vocab"&&_isString$2(it))return{"@id":_expandIri$2(nt,it,{vocab:!0,base:!0},st)};if(_isKeyword$1(_t))return it;const Et={};if(xt&&!["@id","@vocab","@none"].includes(xt))Et["@type"]=xt;else if(_isString$2(it)){const kt=_getContextValue$1(nt,rt,"@language");kt!==null&&(Et["@language"]=kt);const Lt=_getContextValue$1(nt,rt,"@direction");Lt!==null&&(Et["@direction"]=Lt)}return["boolean","number","string"].includes(typeof it)||(it=it.toString()),Et["@value"]=it,Et}function _expandLanguageMap(nt,rt,it,st){const _t=[],xt=Object.keys(rt).sort();for(const Et of xt){const kt=_expandIri$2(nt,Et,{vocab:!0},st);let Lt=rt[Et];_isArray$2(Lt)||(Lt=[Lt]);for(const It of Lt){if(It===null)continue;if(!_isString$2(It))throw new JsonLdError$6("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:rt});const Rt={"@value":It};kt!=="@none"&&(Et.match(REGEX_BCP47$1)||st.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Et}},options:st}),Rt["@language"]=Et.toLowerCase()),it&&(Rt["@direction"]=it),_t.push(Rt)}}return _t}async function _expandIndexMap({activeCtx:nt,options:rt,activeProperty:it,value:st,asGraph:_t,indexKey:xt,propertyIndex:Et}){const kt=[],Lt=Object.keys(st).sort(),It=xt==="@type";for(let Rt of Lt){if(It){const Ft=_getContextValue$1(nt,Rt,"@context");_isUndefined$1(Ft)||(nt=await _processContext$2({activeCtx:nt,localCtx:Ft,propagate:!1,options:rt}))}let Nt=st[Rt];_isArray$2(Nt)||(Nt=[Nt]),Nt=await api$6.expand({activeCtx:nt,activeProperty:it,element:Nt,options:rt,insideList:!1,insideIndex:!0});let Bt;Et?Rt==="@none"?Bt="@none":Bt=_expandValue({activeCtx:nt,activeProperty:xt,value:Rt,options:rt}):Bt=_expandIri$2(nt,Rt,{vocab:!0},rt),xt==="@id"?Rt=_expandIri$2(nt,Rt,{base:!0},rt):It&&(Rt=Bt);for(let Ft of Nt){if(_t&&!_isGraph$1(Ft)&&(Ft={"@graph":[Ft]}),xt==="@type")Bt==="@none"||(Ft["@type"]?Ft["@type"]=[Rt].concat(Ft["@type"]):Ft["@type"]=[Rt]);else{if(_isValue$1(Ft)&&!["@language","@type","@index"].includes(xt))throw new JsonLdError$6(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${xt}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Ft});Et?Bt!=="@none"&&_addValue$2(Ft,Et,Bt,{propertyIsArray:!0,prependValue:!0}):Bt!=="@none"&&!(xt in Ft)&&(Ft[xt]=Rt)}kt.push(Ft)}}return kt}const{isKeyword:isKeyword$2}=context,graphTypes$3=graphTypes$5,types$3=types$7,util$3=util$5,JsonLdError$5=JsonLdError_1,api$5={};var nodeMap=api$5;api$5.createMergedNodeMap=(nt,rt)=>{rt=rt||{};const it=rt.issuer||new util$3.IdentifierIssuer("_:b"),st={"@default":{}};return api$5.createNodeMap(nt,st,"@default",it),api$5.mergeNodeMaps(st)};api$5.createNodeMap=(nt,rt,it,st,_t,xt)=>{if(types$3.isArray(nt)){for(const It of nt)api$5.createNodeMap(It,rt,it,st,void 0,xt);return}if(!types$3.isObject(nt)){xt&&xt.push(nt);return}if(graphTypes$3.isValue(nt)){if("@type"in nt){let It=nt["@type"];It.indexOf("_:")===0&&(nt["@type"]=It=st.getId(It))}xt&&xt.push(nt);return}else if(xt&&graphTypes$3.isList(nt)){const It=[];api$5.createNodeMap(nt["@list"],rt,it,st,_t,It),xt.push({"@list":It});return}if("@type"in nt){const It=nt["@type"];for(const Rt of It)Rt.indexOf("_:")===0&&st.getId(Rt)}types$3.isUndefined(_t)&&(_t=graphTypes$3.isBlankNode(nt)?st.getId(nt["@id"]):nt["@id"]),xt&&xt.push({"@id":_t});const Et=rt[it],kt=Et[_t]=Et[_t]||{};kt["@id"]=_t;const Lt=Object.keys(nt).sort();for(let It of Lt){if(It==="@id")continue;if(It==="@reverse"){const Nt={"@id":_t},Bt=nt["@reverse"];for(const Ft in Bt){const Yt=Bt[Ft];for(const Zt of Yt){let Wt=Zt["@id"];graphTypes$3.isBlankNode(Zt)&&(Wt=st.getId(Wt)),api$5.createNodeMap(Zt,rt,it,st,Wt),util$3.addValue(Et[Wt],Ft,Nt,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(It==="@graph"){_t in rt||(rt[_t]={}),api$5.createNodeMap(nt[It],rt,_t,st);continue}if(It==="@included"){api$5.createNodeMap(nt[It],rt,it,st);continue}if(It!=="@type"&&isKeyword$2(It)){if(It==="@index"&&It in kt&&(nt[It]!==kt[It]||nt[It]["@id"]!==kt[It]["@id"]))throw new JsonLdError$5("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:kt});kt[It]=nt[It];continue}const Rt=nt[It];if(It.indexOf("_:")===0&&(It=st.getId(It)),Rt.length===0){util$3.addValue(kt,It,[],{propertyIsArray:!0});continue}for(let Nt of Rt)if(It==="@type"&&(Nt=Nt.indexOf("_:")===0?st.getId(Nt):Nt),graphTypes$3.isSubject(Nt)||graphTypes$3.isSubjectReference(Nt)){if("@id"in Nt&&!Nt["@id"])continue;const Bt=graphTypes$3.isBlankNode(Nt)?st.getId(Nt["@id"]):Nt["@id"];util$3.addValue(kt,It,{"@id":Bt},{propertyIsArray:!0,allowDuplicate:!1}),api$5.createNodeMap(Nt,rt,it,st,Bt)}else if(graphTypes$3.isValue(Nt))util$3.addValue(kt,It,Nt,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes$3.isList(Nt)){const Bt=[];api$5.createNodeMap(Nt["@list"],rt,it,st,_t,Bt),Nt={"@list":Bt},util$3.addValue(kt,It,Nt,{propertyIsArray:!0,allowDuplicate:!1})}else api$5.createNodeMap(Nt,rt,it,st,_t),util$3.addValue(kt,It,Nt,{propertyIsArray:!0,allowDuplicate:!1})}};api$5.mergeNodeMapGraphs=nt=>{const rt={};for(const it of Object.keys(nt).sort())for(const st of Object.keys(nt[it]).sort()){const _t=nt[it][st];st in rt||(rt[st]={"@id":st});const xt=rt[st];for(const Et of Object.keys(_t).sort())if(isKeyword$2(Et)&&Et!=="@type")xt[Et]=util$3.clone(_t[Et]);else for(const kt of _t[Et])util$3.addValue(xt,Et,util$3.clone(kt),{propertyIsArray:!0,allowDuplicate:!1})}return rt};api$5.mergeNodeMaps=nt=>{const rt=nt["@default"],it=Object.keys(nt).sort();for(const st of it){if(st==="@default")continue;const _t=nt[st];let xt=rt[st];xt?"@graph"in xt||(xt["@graph"]=[]):rt[st]=xt={"@id":st,"@graph":[]};const Et=xt["@graph"];for(const kt of Object.keys(_t).sort()){const Lt=_t[kt];graphTypes$3.isSubjectReference(Lt)||Et.push(Lt)}}return rt};const{isSubjectReference:_isSubjectReference$2}=graphTypes$5,{createMergedNodeMap:_createMergedNodeMap$1}=nodeMap,api$4={};var flatten=api$4;api$4.flatten=nt=>{const rt=_createMergedNodeMap$1(nt),it=[],st=Object.keys(rt).sort();for(let _t=0;_t<st.length;++_t){const xt=rt[st[_t]];_isSubjectReference$2(xt)||it.push(xt)}return it};const JsonLdError$4=JsonLdError_1,graphTypes$2=graphTypes$5,types$2=types$7,{REGEX_BCP47,addValue:_addValue$1}=util$5,{handleEvent:_handleEvent$1}=events,{RDF_LIST,RDF_FIRST:RDF_FIRST$1,RDF_REST:RDF_REST$1,RDF_NIL:RDF_NIL$1,RDF_TYPE:RDF_TYPE$1,RDF_JSON_LITERAL:RDF_JSON_LITERAL$1,XSD_BOOLEAN:XSD_BOOLEAN$1,XSD_DOUBLE:XSD_DOUBLE$1,XSD_INTEGER:XSD_INTEGER$1,XSD_STRING:XSD_STRING$1}=constants,api$3={};var fromRdf=api$3;api$3.fromRDF=async(nt,rt)=>{const{useRdfType:it=!1,useNativeTypes:st=!1,rdfDirection:_t=null}=rt,xt={},Et={"@default":xt},kt={};if(_t){if(_t==="compound-literal")throw new JsonLdError$4("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:_t});if(_t!=="i18n-datatype")throw new JsonLdError$4("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:_t})}for(const Rt of nt){const Nt=Rt.graph.termType==="DefaultGraph"?"@default":Rt.graph.value;Nt in Et||(Et[Nt]={}),Nt!=="@default"&&!(Nt in xt)&&(xt[Nt]={"@id":Nt});const Bt=Et[Nt],Ft=Rt.subject.value,Yt=Rt.predicate.value,Zt=Rt.object;Ft in Bt||(Bt[Ft]={"@id":Ft});const Wt=Bt[Ft],Kt=Zt.termType.endsWith("Node");if(Kt&&!(Zt.value in Bt)&&(Bt[Zt.value]={"@id":Zt.value}),Yt===RDF_TYPE$1&&!it&&Kt){_addValue$1(Wt,"@type",Zt.value,{propertyIsArray:!0});continue}const Jt=_RDFToObject(Zt,st,_t,rt);if(_addValue$1(Wt,Yt,Jt,{propertyIsArray:!0}),Kt)if(Zt.value===RDF_NIL$1){const on=Bt[Zt.value];"usages"in on||(on.usages=[]),on.usages.push({node:Wt,property:Yt,value:Jt})}else Zt.value in kt?kt[Zt.value]=!1:kt[Zt.value]={node:Wt,property:Yt,value:Jt}}for(const Rt in Et){const Nt=Et[Rt];if(!(RDF_NIL$1 in Nt))continue;const Bt=Nt[RDF_NIL$1];if(!!Bt.usages){for(let Ft of Bt.usages){let Yt=Ft.node,Zt=Ft.property,Wt=Ft.value;const Kt=[],Jt=[];let on=Object.keys(Yt).length;for(;Zt===RDF_REST$1&&types$2.isObject(kt[Yt["@id"]])&&types$2.isArray(Yt[RDF_FIRST$1])&&Yt[RDF_FIRST$1].length===1&&types$2.isArray(Yt[RDF_REST$1])&&Yt[RDF_REST$1].length===1&&(on===3||on===4&&types$2.isArray(Yt["@type"])&&Yt["@type"].length===1&&Yt["@type"][0]===RDF_LIST)&&(Kt.push(Yt[RDF_FIRST$1][0]),Jt.push(Yt["@id"]),Ft=kt[Yt["@id"]],Yt=Ft.node,Zt=Ft.property,Wt=Ft.value,on=Object.keys(Yt).length,!!graphTypes$2.isBlankNode(Yt)););delete Wt["@id"],Wt["@list"]=Kt.reverse();for(const rn of Jt)delete Nt[rn]}delete Bt.usages}}const Lt=[],It=Object.keys(xt).sort();for(const Rt of It){const Nt=xt[Rt];if(Rt in Et){const Bt=Nt["@graph"]=[],Ft=Et[Rt],Yt=Object.keys(Ft).sort();for(const Zt of Yt){const Wt=Ft[Zt];graphTypes$2.isSubjectReference(Wt)||Bt.push(Wt)}}graphTypes$2.isSubjectReference(Nt)||Lt.push(Nt)}return Lt};function _RDFToObject(nt,rt,it,st){if(nt.termType.endsWith("Node"))return{"@id":nt.value};const _t={"@value":nt.value};if(nt.language)nt.language.match(REGEX_BCP47)||st.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt.language}},options:st}),_t["@language"]=nt.language;else{let xt=nt.datatype.value;if(xt||(xt=XSD_STRING$1),xt===RDF_JSON_LITERAL$1){xt="@json";try{_t["@value"]=JSON.parse(_t["@value"])}catch(Et){throw new JsonLdError$4("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:_t["@value"],cause:Et})}}if(rt){if(xt===XSD_BOOLEAN$1)_t["@value"]==="true"?_t["@value"]=!0:_t["@value"]==="false"&&(_t["@value"]=!1);else if(types$2.isNumeric(_t["@value"]))if(xt===XSD_INTEGER$1){const Et=parseInt(_t["@value"],10);Et.toFixed(0)===_t["@value"]&&(_t["@value"]=Et)}else xt===XSD_DOUBLE$1&&(_t["@value"]=parseFloat(_t["@value"]));[XSD_BOOLEAN$1,XSD_INTEGER$1,XSD_DOUBLE$1,XSD_STRING$1].includes(xt)||(_t["@type"]=xt)}else if(it==="i18n-datatype"&&xt.startsWith("https://www.w3.org/ns/i18n#")){const[,Et,kt]=xt.split(/[#_]/);Et.length>0&&(_t["@language"]=Et,Et.match(REGEX_BCP47)||st.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Et}},options:st})),_t["@direction"]=kt}else xt!==XSD_STRING$1&&(_t["@type"]=xt)}return _t}var canonicalize=function nt(rt){return rt===null||typeof rt!="object"||rt.toJSON!=null?JSON.stringify(rt):Array.isArray(rt)?"["+rt.reduce((it,st,_t)=>{const xt=_t===0?"":",",Et=st===void 0||typeof st=="symbol"?null:st;return it+xt+nt(Et)},"")+"]":"{"+Object.keys(rt).sort().reduce((it,st,_t)=>{if(rt[st]===void 0||typeof rt[st]=="symbol")return it;const xt=it.length===0?"":",";return it+xt+nt(st)+":"+nt(rt[st])},"")+"}"};const{createNodeMap}=nodeMap,{isKeyword:isKeyword$1}=context,graphTypes$1=graphTypes$5,jsonCanonicalize=canonicalize,JsonLdError$3=JsonLdError_1,types$1=types$7,util$2=util$5,{handleEvent:_handleEvent}=events,{RDF_FIRST,RDF_REST,RDF_NIL,RDF_TYPE,RDF_JSON_LITERAL,RDF_LANGSTRING,XSD_BOOLEAN,XSD_DOUBLE,XSD_INTEGER,XSD_STRING}=constants,{isAbsolute:_isAbsoluteIri}=url$1,api$2={};var toRdf=api$2;api$2.toRDF=(nt,rt)=>{const it=new util$2.IdentifierIssuer("_:b"),st={"@default":{}};createNodeMap(nt,st,"@default",it);const _t=[],xt=Object.keys(st).sort();for(const Et of xt){let kt;if(Et==="@default")kt={termType:"DefaultGraph",value:""};else if(_isAbsoluteIri(Et))Et.startsWith("_:")?kt={termType:"BlankNode"}:kt={termType:"NamedNode"},kt.value=Et;else{rt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Et}},options:rt});continue}_graphToRDF(_t,st[Et],kt,it,rt)}return _t};function _graphToRDF(nt,rt,it,st,_t){const xt=Object.keys(rt).sort();for(const Et of xt){const kt=rt[Et],Lt=Object.keys(kt).sort();for(let It of Lt){const Rt=kt[It];if(It==="@type")It=RDF_TYPE;else if(isKeyword$1(It))continue;for(const Nt of Rt){const Bt={termType:Et.startsWith("_:")?"BlankNode":"NamedNode",value:Et};if(!_isAbsoluteIri(Et)){_t.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Et}},options:_t});continue}const Ft={termType:It.startsWith("_:")?"BlankNode":"NamedNode",value:It};if(!_isAbsoluteIri(It)){_t.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:It}},options:_t});continue}if(Ft.termType==="BlankNode"&&!_t.produceGeneralizedRdf){_t.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:st.getOldIds().find(Zt=>st.getId(Zt)===It)}},options:_t});continue}const Yt=_objectToRDF(Nt,st,nt,it,_t.rdfDirection,_t);Yt&&nt.push({subject:Bt,predicate:Ft,object:Yt,graph:it})}}}}function _listToRDF(nt,rt,it,st,_t,xt){const Et={termType:"NamedNode",value:RDF_FIRST},kt={termType:"NamedNode",value:RDF_REST},Lt={termType:"NamedNode",value:RDF_NIL},It=nt.pop(),Rt=It?{termType:"BlankNode",value:rt.getId()}:Lt;let Nt=Rt;for(const Bt of nt){const Ft=_objectToRDF(Bt,rt,it,st,_t,xt),Yt={termType:"BlankNode",value:rt.getId()};it.push({subject:Nt,predicate:Et,object:Ft,graph:st}),it.push({subject:Nt,predicate:kt,object:Yt,graph:st}),Nt=Yt}if(It){const Bt=_objectToRDF(It,rt,it,st,_t,xt);it.push({subject:Nt,predicate:Et,object:Bt,graph:st}),it.push({subject:Nt,predicate:kt,object:Lt,graph:st})}return Rt}function _objectToRDF(nt,rt,it,st,_t,xt){const Et={};if(graphTypes$1.isValue(nt)){Et.termType="Literal",Et.value=void 0,Et.datatype={termType:"NamedNode"};let kt=nt["@value"];const Lt=nt["@type"]||null;if(Lt==="@json")Et.value=jsonCanonicalize(kt),Et.datatype.value=RDF_JSON_LITERAL;else if(types$1.isBoolean(kt))Et.value=kt.toString(),Et.datatype.value=Lt||XSD_BOOLEAN;else if(types$1.isDouble(kt)||Lt===XSD_DOUBLE)types$1.isDouble(kt)||(kt=parseFloat(kt)),Et.value=kt.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Et.datatype.value=Lt||XSD_DOUBLE;else if(types$1.isNumber(kt))Et.value=kt.toFixed(0),Et.datatype.value=Lt||XSD_INTEGER;else if("@direction"in nt&&_t==="i18n-datatype"){const It=(nt["@language"]||"").toLowerCase(),Rt=nt["@direction"],Nt=`https://www.w3.org/ns/i18n#${It}_${Rt}`;Et.datatype.value=Nt,Et.value=kt}else{if("@direction"in nt&&_t==="compound-literal")throw new JsonLdError$3("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:_t});if("@direction"in nt&&_t)throw new JsonLdError$3("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:_t});"@language"in nt?("@direction"in nt&&!_t&&xt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Et.value}},options:xt}),Et.value=kt,Et.datatype.value=Lt||RDF_LANGSTRING,Et.language=nt["@language"]):("@direction"in nt&&!_t&&xt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:Et.value}},options:xt}),Et.value=kt,Et.datatype.value=Lt||XSD_STRING)}}else if(graphTypes$1.isList(nt)){const kt=_listToRDF(nt["@list"],rt,it,st,_t,xt);Et.termType=kt.termType,Et.value=kt.value}else{const kt=types$1.isObject(nt)?nt["@id"]:nt;Et.termType=kt.startsWith("_:")?"BlankNode":"NamedNode",Et.value=kt}return Et.termType==="NamedNode"&&!_isAbsoluteIri(Et.value)?(xt.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Et.value}},options:xt}),null):Et}const{isKeyword}=context,graphTypes=graphTypes$5,types=types$7,util$1=util$5,url=url$1,JsonLdError$2=JsonLdError_1,{createNodeMap:_createNodeMap$1,mergeNodeMapGraphs:_mergeNodeMapGraphs}=nodeMap,api$1={};var frame=api$1;api$1.frameMergedOrDefault=(nt,rt,it)=>{const st={options:it,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},_t=new util$1.IdentifierIssuer("_:b");_createNodeMap$1(nt,st.graphMap,"@default",_t),it.merged&&(st.graphMap["@merged"]=_mergeNodeMapGraphs(st.graphMap),st.graph="@merged"),st.subjects=st.graphMap[st.graph];const xt=[];api$1.frame(st,Object.keys(st.subjects).sort(),rt,xt),it.pruneBlankNodeIdentifiers&&(it.bnodesToClear=Object.keys(st.bnodeMap).filter(Et=>st.bnodeMap[Et].length===1));// remove @preserve from results
return it.link={},_cleanupPreserve(xt,it)};api$1.frame=(nt,rt,it,st,_t=null)=>{_validateFrame(it),it=it[0];const xt=nt.options,Et={embed:_getFrameFlag(it,xt,"embed"),explicit:_getFrameFlag(it,xt,"explicit"),requireAll:_getFrameFlag(it,xt,"requireAll")};nt.link.hasOwnProperty(nt.graph)||(nt.link[nt.graph]={});const kt=nt.link[nt.graph],Lt=_filterSubjects(nt,rt,it,Et),It=Object.keys(Lt).sort();for(const Rt of It){const Nt=Lt[Rt];if(_t===null?nt.uniqueEmbeds={[nt.graph]:{}}:nt.uniqueEmbeds[nt.graph]=nt.uniqueEmbeds[nt.graph]||{},Et.embed==="@link"&&Rt in kt){_addFrameOutput(st,_t,kt[Rt]);continue}const Bt={"@id":Rt};if(Rt.indexOf("_:")===0&&util$1.addValue(nt.bnodeMap,Rt,Bt,{propertyIsArray:!0}),kt[Rt]=Bt,(Et.embed==="@first"||Et.embed==="@last")&&nt.is11)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:it});if(!(!nt.embedded&&nt.uniqueEmbeds[nt.graph].hasOwnProperty(Rt))){if(nt.embedded&&(Et.embed==="@never"||_createsCircularReference(Nt,nt.graph,nt.subjectStack))){_addFrameOutput(st,_t,Bt);continue}if(nt.embedded&&(Et.embed=="@first"||Et.embed=="@once")&&nt.uniqueEmbeds[nt.graph].hasOwnProperty(Rt)){_addFrameOutput(st,_t,Bt);continue}if(Et.embed==="@last"&&Rt in nt.uniqueEmbeds[nt.graph]&&_removeEmbed(nt,Rt),nt.uniqueEmbeds[nt.graph][Rt]={parent:st,property:_t},nt.subjectStack.push({subject:Nt,graph:nt.graph}),Rt in nt.graphMap){let Ft=!1,Yt=null;"@graph"in it?(Yt=it["@graph"][0],Ft=!(Rt==="@merged"||Rt==="@default"),types.isObject(Yt)||(Yt={})):(Ft=nt.graph!=="@merged",Yt={}),Ft&&api$1.frame({...nt,graph:Rt,embedded:!1},Object.keys(nt.graphMap[Rt]).sort(),[Yt],Bt,"@graph")}"@included"in it&&api$1.frame({...nt,embedded:!1},rt,it["@included"],Bt,"@included");for(const Ft of Object.keys(Nt).sort()){if(isKeyword(Ft)){if(Bt[Ft]=util$1.clone(Nt[Ft]),Ft==="@type")for(const Yt of Nt["@type"])Yt.indexOf("_:")===0&&util$1.addValue(nt.bnodeMap,Yt,Bt,{propertyIsArray:!0});continue}if(!(Et.explicit&&!(Ft in it)))for(const Yt of Nt[Ft]){const Zt=Ft in it?it[Ft]:_createImplicitFrame(Et);if(graphTypes.isList(Yt)){const Wt=it[Ft]&&it[Ft][0]&&it[Ft][0]["@list"]?it[Ft][0]["@list"]:_createImplicitFrame(Et),Kt={"@list":[]};_addFrameOutput(Bt,Ft,Kt);const Jt=Yt["@list"];for(const on of Jt)graphTypes.isSubjectReference(on)?api$1.frame({...nt,embedded:!0},[on["@id"]],Wt,Kt,"@list"):_addFrameOutput(Kt,"@list",util$1.clone(on))}else graphTypes.isSubjectReference(Yt)?api$1.frame({...nt,embedded:!0},[Yt["@id"]],Zt,Bt,Ft):_valueMatch(Zt[0],Yt)&&_addFrameOutput(Bt,Ft,util$1.clone(Yt))}}for(const Ft of Object.keys(it).sort()){if(Ft==="@type"){if(!types.isObject(it[Ft][0])||!("@default"in it[Ft][0]))continue}else if(isKeyword(Ft))continue;const Yt=it[Ft][0]||{};if(!_getFrameFlag(Yt,xt,"omitDefault")&&!(Ft in Bt)){let Wt="@null";"@default"in Yt&&(Wt=util$1.clone(Yt["@default"])),types.isArray(Wt)||(Wt=[Wt]),Bt[Ft]=[{"@preserve":Wt}]}}for(const Ft of Object.keys(it["@reverse"]||{}).sort()){const Yt=it["@reverse"][Ft];for(const Zt of Object.keys(nt.subjects))util$1.getValues(nt.subjects[Zt],Ft).some(Kt=>Kt["@id"]===Rt)&&(Bt["@reverse"]=Bt["@reverse"]||{},util$1.addValue(Bt["@reverse"],Ft,[],{propertyIsArray:!0}),api$1.frame({...nt,embedded:!0},[Zt],Yt,Bt["@reverse"][Ft],_t))}_addFrameOutput(st,_t,Bt),nt.subjectStack.pop()}}};api$1.cleanupNull=(nt,rt)=>{if(types.isArray(nt))return nt.map(st=>api$1.cleanupNull(st,rt)).filter(st=>st);if(nt==="@null")return null;if(types.isObject(nt)){if("@id"in nt){const it=nt["@id"];if(rt.link.hasOwnProperty(it)){const st=rt.link[it].indexOf(nt);if(st!==-1)return rt.link[it][st];rt.link[it].push(nt)}else rt.link[it]=[nt]}for(const it in nt)nt[it]=api$1.cleanupNull(nt[it],rt)}return nt};function _createImplicitFrame(nt){const rt={};for(const it in nt)nt[it]!==void 0&&(rt["@"+it]=[nt[it]]);return[rt]}function _createsCircularReference(nt,rt,it){for(let st=it.length-1;st>=0;--st){const _t=it[st];if(_t.graph===rt&&_t.subject["@id"]===nt["@id"])return!0}return!1}function _getFrameFlag(nt,rt,it){const st="@"+it;let _t=st in nt?nt[st][0]:rt[it];if(it==="embed"){if(_t===!0)_t="@once";else if(_t===!1)_t="@never";else if(_t!=="@always"&&_t!=="@never"&&_t!=="@link"&&_t!=="@first"&&_t!=="@last"&&_t!=="@once")throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:nt})}return _t}function _validateFrame(nt){if(!types.isArray(nt)||nt.length!==1||!types.isObject(nt[0]))throw new JsonLdError$2("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:nt});if("@id"in nt[0]){for(const rt of util$1.asArray(nt[0]["@id"]))if(!(types.isObject(rt)||url.isAbsolute(rt))||types.isString(rt)&&rt.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:nt})}if("@type"in nt[0]){for(const rt of util$1.asArray(nt[0]["@type"]))if(!(types.isObject(rt)||url.isAbsolute(rt)||rt==="@json")||types.isString(rt)&&rt.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:nt})}}function _filterSubjects(nt,rt,it,st){const _t={};for(const xt of rt){const Et=nt.graphMap[nt.graph][xt];_filterSubject(nt,Et,it,st)&&(_t[xt]=Et)}return _t}function _filterSubject(nt,rt,it,st){let _t=!0,xt=!1;for(const Et in it){let kt=!1;const Lt=util$1.getValues(rt,Et),It=util$1.getValues(it,Et).length===0;if(Et==="@id"){if(types.isEmptyObject(it["@id"][0]||{})?kt=!0:it["@id"].length>=0&&(kt=it["@id"].includes(Lt[0])),!st.requireAll)return kt}else if(Et==="@type"){if(_t=!1,It){if(Lt.length>0)return!1;kt=!0}else if(it["@type"].length===1&&types.isEmptyObject(it["@type"][0]))kt=Lt.length>0;else for(const Rt of it["@type"])types.isObject(Rt)&&"@default"in Rt?kt=!0:kt=kt||Lt.some(Nt=>Nt===Rt);if(!st.requireAll)return kt}else{if(isKeyword(Et))continue;{const Rt=util$1.getValues(it,Et)[0];let Nt=!1;if(Rt&&(_validateFrame([Rt]),Nt="@default"in Rt),_t=!1,Lt.length===0&&Nt)continue;if(Lt.length>0&&It)return!1;if(Rt===void 0){if(Lt.length>0)return!1;kt=!0}else if(graphTypes.isList(Rt)){const Bt=Rt["@list"][0];if(graphTypes.isList(Lt[0])){const Ft=Lt[0]["@list"];graphTypes.isValue(Bt)?kt=Ft.some(Yt=>_valueMatch(Bt,Yt)):(graphTypes.isSubject(Bt)||graphTypes.isSubjectReference(Bt))&&(kt=Ft.some(Yt=>_nodeMatch(nt,Bt,Yt,st)))}}else graphTypes.isValue(Rt)?kt=Lt.some(Bt=>_valueMatch(Rt,Bt)):graphTypes.isSubjectReference(Rt)?kt=Lt.some(Bt=>_nodeMatch(nt,Rt,Bt,st)):types.isObject(Rt)?kt=Lt.length>0:kt=!1}}if(!kt&&st.requireAll)return!1;xt=xt||kt}return _t||xt}function _removeEmbed(nt,rt){const it=nt.uniqueEmbeds[nt.graph],st=it[rt],_t=st.parent,xt=st.property,Et={"@id":rt};if(types.isArray(_t)){for(let Lt=0;Lt<_t.length;++Lt)if(util$1.compareValues(_t[Lt],Et)){_t[Lt]=Et;break}}else{const Lt=types.isArray(_t[xt]);util$1.removeValue(_t,xt,Et,{propertyIsArray:Lt}),util$1.addValue(_t,xt,Et,{propertyIsArray:Lt})}const kt=Lt=>{const It=Object.keys(it);for(const Rt of It)Rt in it&&types.isObject(it[Rt].parent)&&it[Rt].parent["@id"]===Lt&&(delete it[Rt],kt(Rt))};kt(rt)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function _cleanupPreserve(nt,rt){if(types.isArray(nt))return nt.map(it=>_cleanupPreserve(it,rt));if(types.isObject(nt)){// remove @preserve
if("@preserve"in nt)return nt["@preserve"][0];if(graphTypes.isValue(nt))return nt;if(graphTypes.isList(nt))return nt["@list"]=_cleanupPreserve(nt["@list"],rt),nt;if("@id"in nt){const it=nt["@id"];if(rt.link.hasOwnProperty(it)){const st=rt.link[it].indexOf(nt);if(st!==-1)return rt.link[it][st];rt.link[it].push(nt)}else rt.link[it]=[nt]}for(const it in nt){if(it==="@id"&&rt.bnodesToClear.includes(nt[it])){delete nt["@id"];continue}nt[it]=_cleanupPreserve(nt[it],rt)}}return nt}function _addFrameOutput(nt,rt,it){types.isObject(nt)?util$1.addValue(nt,rt,it,{propertyIsArray:!0}):nt.push(it)}function _nodeMatch(nt,rt,it,st){if(!("@id"in it))return!1;const _t=nt.subjects[it["@id"]];return _t&&_filterSubject(nt,_t,rt,st)}function _valueMatch(nt,rt){const it=rt["@value"],st=rt["@type"],_t=rt["@language"],xt=nt["@value"]?types.isArray(nt["@value"])?nt["@value"]:[nt["@value"]]:[],Et=nt["@type"]?types.isArray(nt["@type"])?nt["@type"]:[nt["@type"]]:[],kt=nt["@language"]?types.isArray(nt["@language"])?nt["@language"]:[nt["@language"]]:[];return xt.length===0&&Et.length===0&&kt.length===0?!0:!(!(xt.includes(it)||types.isEmptyObject(xt[0]))||!(!st&&Et.length===0||Et.includes(st)||st&&types.isEmptyObject(Et[0]))||!(!_t&&kt.length===0||kt.includes(_t)||_t&&types.isEmptyObject(kt[0])))}const JsonLdError$1=JsonLdError_1,{isArray:_isArray$1,isObject:_isObject$1,isString:_isString$1,isUndefined:_isUndefined}=types$7,{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference$1}=graphTypes$5,{expandIri:_expandIri$1,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext$1,processingMode:_processingMode$1}=context,{removeBase:_removeBase,prependBase:_prependBase}=url$1,{REGEX_KEYWORD,addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=util$5,api={};var compact=api;api.compact=async({activeCtx:nt,activeProperty:rt=null,element:it,options:st={}})=>{if(_isArray$1(it)){let xt=[];for(let Et=0;Et<it.length;++Et){const kt=await api.compact({activeCtx:nt,activeProperty:rt,element:it[Et],options:st});kt!==null&&xt.push(kt)}return st.compactArrays&&xt.length===1&&(_getContextValue(nt,rt,"@container")||[]).length===0&&(xt=xt[0]),xt}const _t=_getContextValue(nt,rt,"@context");if(_isUndefined(_t)||(nt=await _processContext$1({activeCtx:nt,localCtx:_t,propagate:!0,overrideProtected:!0,options:st})),_isObject$1(it)){if(st.link&&"@id"in it&&st.link.hasOwnProperty(it["@id"])){const Bt=st.link[it["@id"]];for(let Ft=0;Ft<Bt.length;++Ft)if(Bt[Ft].expanded===it)return Bt[Ft].compacted}if(_isValue(it)||_isSubjectReference$1(it)){const Bt=api.compactValue({activeCtx:nt,activeProperty:rt,value:it,options:st});return st.link&&_isSubjectReference$1(it)&&(st.link.hasOwnProperty(it["@id"])||(st.link[it["@id"]]=[]),st.link[it["@id"]].push({expanded:it,compacted:Bt})),Bt}if(_isList(it)&&(_getContextValue(nt,rt,"@container")||[]).includes("@list"))return api.compact({activeCtx:nt,activeProperty:rt,element:it["@list"],options:st});const xt=rt==="@reverse",Et={},kt=nt;!_isValue(it)&&!_isSubjectReference$1(it)&&(nt=nt.revertToPreviousContext());const Lt=_getContextValue(kt,rt,"@context");_isUndefined(Lt)||(nt=await _processContext$1({activeCtx:nt,localCtx:Lt,propagate:!0,overrideProtected:!0,options:st})),st.link&&"@id"in it&&(st.link.hasOwnProperty(it["@id"])||(st.link[it["@id"]]=[]),st.link[it["@id"]].push({expanded:it,compacted:Et}));let It=it["@type"]||[];It.length>1&&(It=Array.from(It).sort());const Rt=nt;for(const Bt of It){const Ft=api.compactIri({activeCtx:Rt,iri:Bt,relativeTo:{vocab:!0}}),Yt=_getContextValue(kt,Ft,"@context");_isUndefined(Yt)||(nt=await _processContext$1({activeCtx:nt,localCtx:Yt,options:st,propagate:!1}))}const Nt=Object.keys(it).sort();for(const Bt of Nt){const Ft=it[Bt];if(Bt==="@id"){let Yt=_asArray(Ft).map(Wt=>api.compactIri({activeCtx:nt,iri:Wt,relativeTo:{vocab:!1},base:st.base}));Yt.length===1&&(Yt=Yt[0]);const Zt=api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}});Et[Zt]=Yt;continue}if(Bt==="@type"){let Yt=_asArray(Ft).map(on=>api.compactIri({activeCtx:kt,iri:on,relativeTo:{vocab:!0}}));Yt.length===1&&(Yt=Yt[0]);const Zt=api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}}),Jt=(_getContextValue(nt,Zt,"@container")||[]).includes("@set")&&_processingMode$1(nt,1.1)||_isArray$1(Yt)&&Ft.length===0;_addValue(Et,Zt,Yt,{propertyIsArray:Jt});continue}if(Bt==="@reverse"){const Yt=await api.compact({activeCtx:nt,activeProperty:"@reverse",element:Ft,options:st});for(const Zt in Yt)if(nt.mappings.has(Zt)&&nt.mappings.get(Zt).reverse){const Wt=Yt[Zt],Jt=(_getContextValue(nt,Zt,"@container")||[]).includes("@set")||!st.compactArrays;_addValue(Et,Zt,Wt,{propertyIsArray:Jt}),delete Yt[Zt]}if(Object.keys(Yt).length>0){const Zt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Zt,Yt)}continue}if(Bt==="@preserve"){const Yt=await api.compact({activeCtx:nt,activeProperty:rt,element:Ft,options:st});_isArray$1(Yt)&&Yt.length===0||_addValue(Et,Bt,Yt);continue}if(Bt==="@index"){if((_getContextValue(nt,rt,"@container")||[]).includes("@index"))continue;const Zt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Zt,Ft);continue}if(Bt!=="@graph"&&Bt!=="@list"&&Bt!=="@included"&&_isKeyword(Bt)){const Yt=api.compactIri({activeCtx:nt,iri:Bt,relativeTo:{vocab:!0}});_addValue(Et,Yt,Ft);continue}if(!_isArray$1(Ft))throw new JsonLdError$1("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(Ft.length===0){const Yt=api.compactIri({activeCtx:nt,iri:Bt,value:Ft,relativeTo:{vocab:!0},reverse:xt}),Zt=nt.mappings.has(Yt)?nt.mappings.get(Yt)["@nest"]:null;let Wt=Et;Zt&&(_checkNestProperty(nt,Zt,st),_isObject$1(Et[Zt])||(Et[Zt]={}),Wt=Et[Zt]),_addValue(Wt,Yt,Ft,{propertyIsArray:!0})}for(const Yt of Ft){const Zt=api.compactIri({activeCtx:nt,iri:Bt,value:Yt,relativeTo:{vocab:!0},reverse:xt}),Wt=nt.mappings.has(Zt)?nt.mappings.get(Zt)["@nest"]:null;let Kt=Et;Wt&&(_checkNestProperty(nt,Wt,st),_isObject$1(Et[Wt])||(Et[Wt]={}),Kt=Et[Wt]);const Jt=_getContextValue(nt,Zt,"@container")||[],on=_isGraph(Yt),rn=_isList(Yt);let ln;rn?ln=Yt["@list"]:on&&(ln=Yt["@graph"]);let gn=await api.compact({activeCtx:nt,activeProperty:Zt,element:rn||on?ln:Yt,options:st});if(rn)if(_isArray$1(gn)||(gn=[gn]),!Jt.includes("@list"))gn={[api.compactIri({activeCtx:nt,iri:"@list",relativeTo:{vocab:!0}})]:gn},"@index"in Yt&&(gn[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=Yt["@index"]);else{_addValue(Kt,Zt,gn,{valueIsArray:!0,allowDuplicate:!0});continue}if(on)if(Jt.includes("@graph")&&(Jt.includes("@id")||Jt.includes("@index")&&_isSimpleGraph(Yt))){let wn;Kt.hasOwnProperty(Zt)?wn=Kt[Zt]:Kt[Zt]=wn={};const kn=(Jt.includes("@id")?Yt["@id"]:Yt["@index"])||api.compactIri({activeCtx:nt,iri:"@none",relativeTo:{vocab:!0}});_addValue(wn,kn,gn,{propertyIsArray:!st.compactArrays||Jt.includes("@set")})}else Jt.includes("@graph")&&_isSimpleGraph(Yt)?(_isArray$1(gn)&&gn.length>1&&(gn={"@included":gn}),_addValue(Kt,Zt,gn,{propertyIsArray:!st.compactArrays||Jt.includes("@set")})):(_isArray$1(gn)&&gn.length===1&&st.compactArrays&&(gn=gn[0]),gn={[api.compactIri({activeCtx:nt,iri:"@graph",relativeTo:{vocab:!0}})]:gn},"@id"in Yt&&(gn[api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}})]=Yt["@id"]),"@index"in Yt&&(gn[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=Yt["@index"]),_addValue(Kt,Zt,gn,{propertyIsArray:!st.compactArrays||Jt.includes("@set")}));else if(Jt.includes("@language")||Jt.includes("@index")||Jt.includes("@id")||Jt.includes("@type")){let wn;Kt.hasOwnProperty(Zt)?wn=Kt[Zt]:Kt[Zt]=wn={};let kn;if(Jt.includes("@language"))_isValue(gn)&&(gn=gn["@value"]),kn=Yt["@language"];else if(Jt.includes("@index")){const Cn=_getContextValue(nt,Zt,"@index")||"@index",Pn=api.compactIri({activeCtx:nt,iri:Cn,relativeTo:{vocab:!0}});if(Cn==="@index")kn=Yt["@index"],delete gn[Pn];else{let An;if([kn,...An]=_asArray(gn[Cn]||[]),!_isString$1(kn))kn=null;else switch(An.length){case 0:delete gn[Cn];break;case 1:gn[Cn]=An[0];break;default:gn[Cn]=An;break}}}else if(Jt.includes("@id")){const Cn=api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}});kn=gn[Cn],delete gn[Cn]}else if(Jt.includes("@type")){const Cn=api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}});let Pn;switch([kn,...Pn]=_asArray(gn[Cn]||[]),Pn.length){case 0:delete gn[Cn];break;case 1:gn[Cn]=Pn[0];break;default:gn[Cn]=Pn;break}Object.keys(gn).length===1&&"@id"in Yt&&(gn=await api.compact({activeCtx:nt,activeProperty:Zt,element:{"@id":Yt["@id"]},options:st}))}kn||(kn=api.compactIri({activeCtx:nt,iri:"@none",relativeTo:{vocab:!0}})),_addValue(wn,kn,gn,{propertyIsArray:Jt.includes("@set")})}else{const wn=!st.compactArrays||Jt.includes("@set")||Jt.includes("@list")||_isArray$1(gn)&&gn.length===0||Bt==="@list"||Bt==="@graph";_addValue(Kt,Zt,gn,{propertyIsArray:wn})}}}return Et}return it};api.compactIri=({activeCtx:nt,iri:rt,value:it=null,relativeTo:st={vocab:!1},reverse:_t=!1,base:xt=null})=>{if(rt===null)return rt;nt.isPropertyTermScoped&&nt.previousContext&&(nt=nt.previousContext);const Et=nt.getInverse();if(_isKeyword(rt)&&rt in Et&&"@none"in Et[rt]&&"@type"in Et[rt]["@none"]&&"@none"in Et[rt]["@none"]["@type"])return Et[rt]["@none"]["@type"]["@none"];if(st.vocab&&rt in Et){const Nt=nt["@language"]||"@none",Bt=[];_isObject$1(it)&&"@index"in it&&!("@graph"in it)&&Bt.push("@index","@index@set"),_isObject$1(it)&&"@preserve"in it&&(it=it["@preserve"][0]),_isGraph(it)?("@index"in it&&Bt.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in it&&Bt.push("@graph@id","@graph@id@set"),Bt.push("@graph","@graph@set","@set"),"@index"in it||Bt.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in it||Bt.push("@graph@id","@graph@id@set")):_isObject$1(it)&&!_isValue(it)&&Bt.push("@id","@id@set","@type","@set@type");let Ft="@language",Yt="@null";if(_t)Ft="@type",Yt="@reverse",Bt.push("@set");else if(_isList(it)){"@index"in it||Bt.push("@list");const Wt=it["@list"];if(Wt.length===0)Ft="@any",Yt="@none";else{let Kt=Wt.length===0?Nt:null,Jt=null;for(let on=0;on<Wt.length;++on){const rn=Wt[on];let ln="@none",gn="@none";if(_isValue(rn))if("@direction"in rn){const wn=(rn["@language"]||"").toLowerCase(),kn=rn["@direction"];ln=`${wn}_${kn}`}else"@language"in rn?ln=rn["@language"].toLowerCase():"@type"in rn?gn=rn["@type"]:ln="@null";else gn="@id";if(Kt===null?Kt=ln:ln!==Kt&&_isValue(rn)&&(Kt="@none"),Jt===null?Jt=gn:gn!==Jt&&(Jt="@none"),Kt==="@none"&&Jt==="@none")break}Kt=Kt||"@none",Jt=Jt||"@none",Jt!=="@none"?(Ft="@type",Yt=Jt):Yt=Kt}}else{if(_isValue(it))if("@language"in it&&!("@index"in it)){Bt.push("@language","@language@set"),Yt=it["@language"];const Wt=it["@direction"];Wt&&(Yt=`${Yt}_${Wt}`)}else"@direction"in it&&!("@index"in it)?Yt=`_${it["@direction"]}`:"@type"in it&&(Ft="@type",Yt=it["@type"]);else Ft="@type",Yt="@id";Bt.push("@set")}Bt.push("@none"),_isObject$1(it)&&!("@index"in it)&&Bt.push("@index","@index@set"),_isValue(it)&&Object.keys(it).length===1&&Bt.push("@language","@language@set");const Zt=_selectTerm(nt,rt,it,Bt,Ft,Yt);if(Zt!==null)return Zt}if(st.vocab&&"@vocab"in nt){const Nt=nt["@vocab"];if(rt.indexOf(Nt)===0&&rt!==Nt){const Bt=rt.substr(Nt.length);if(!nt.mappings.has(Bt))return Bt}}let kt=null;const Lt=[];let It=nt.fastCurieMap;const Rt=rt.length-1;for(let Nt=0;Nt<Rt&&rt[Nt]in It;++Nt)It=It[rt[Nt]],""in It&&Lt.push(It[""][0]);for(let Nt=Lt.length-1;Nt>=0;--Nt){const Bt=Lt[Nt],Ft=Bt.terms;for(const Yt of Ft){const Zt=Yt+":"+rt.substr(Bt.iri.length);nt.mappings.get(Yt)._prefix&&(!nt.mappings.has(Zt)||it===null&&nt.mappings.get(Zt)["@id"]===rt)&&(kt===null||_compareShortestLeast(Zt,kt)<0)&&(kt=Zt)}}if(kt!==null)return kt;for(const[Nt,Bt]of nt.mappings)if(Bt&&Bt._prefix&&rt.startsWith(Nt+":"))throw new JsonLdError$1(`Absolute IRI "${rt}" confused with prefix "${Nt}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:nt});if(!st.vocab)if("@base"in nt)if(nt["@base"]){const Nt=_removeBase(_prependBase(xt,nt["@base"]),rt);return REGEX_KEYWORD.test(Nt)?`./${Nt}`:Nt}else return rt;else return _removeBase(xt,rt);return rt};api.compactValue=({activeCtx:nt,activeProperty:rt,value:it,options:st})=>{if(_isValue(it)){const kt=_getContextValue(nt,rt,"@type"),Lt=_getContextValue(nt,rt,"@language"),It=_getContextValue(nt,rt,"@direction"),Rt=_getContextValue(nt,rt,"@container")||[],Nt="@index"in it&&!Rt.includes("@index");if(!Nt&&kt!=="@none"&&(it["@type"]===kt||"@language"in it&&it["@language"]===Lt&&"@direction"in it&&it["@direction"]===It||"@language"in it&&it["@language"]===Lt||"@direction"in it&&it["@direction"]===It))return it["@value"];const Bt=Object.keys(it).length,Ft=Bt===1||Bt===2&&"@index"in it&&!Nt,Yt="@language"in nt,Zt=_isString$1(it["@value"]),Wt=nt.mappings.has(rt)&&nt.mappings.get(rt)["@language"]===null;if(Ft&&kt!=="@none"&&(!Yt||!Zt||Wt))return it["@value"];const Kt={};return Nt&&(Kt[api.compactIri({activeCtx:nt,iri:"@index",relativeTo:{vocab:!0}})]=it["@index"]),"@type"in it?Kt[api.compactIri({activeCtx:nt,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx:nt,iri:it["@type"],relativeTo:{vocab:!0}}):"@language"in it&&(Kt[api.compactIri({activeCtx:nt,iri:"@language",relativeTo:{vocab:!0}})]=it["@language"]),"@direction"in it&&(Kt[api.compactIri({activeCtx:nt,iri:"@direction",relativeTo:{vocab:!0}})]=it["@direction"]),Kt[api.compactIri({activeCtx:nt,iri:"@value",relativeTo:{vocab:!0}})]=it["@value"],Kt}const _t=_expandIri$1(nt,rt,{vocab:!0},st),xt=_getContextValue(nt,rt,"@type"),Et=api.compactIri({activeCtx:nt,iri:it["@id"],relativeTo:{vocab:xt==="@vocab"},base:st.base});return xt==="@id"||xt==="@vocab"||_t==="@graph"?Et:{[api.compactIri({activeCtx:nt,iri:"@id",relativeTo:{vocab:!0}})]:Et}};function _selectTerm(nt,rt,it,st,_t,xt){xt===null&&(xt="@null");const Et=[];if((xt==="@id"||xt==="@reverse")&&_isObject$1(it)&&"@id"in it){xt==="@reverse"&&Et.push("@reverse");const Lt=api.compactIri({activeCtx:nt,iri:it["@id"],relativeTo:{vocab:!0}});nt.mappings.has(Lt)&&nt.mappings.get(Lt)&&nt.mappings.get(Lt)["@id"]===it["@id"]?Et.push.apply(Et,["@vocab","@id"]):Et.push.apply(Et,["@id","@vocab"])}else{Et.push(xt);const Lt=Et.find(It=>It.includes("_"));Lt&&Et.push(Lt.replace(/^[^_]+_/,"_"))}Et.push("@none");const kt=nt.inverse[rt];for(const Lt of st){if(!(Lt in kt))continue;const It=kt[Lt][_t];for(const Rt of Et)if(Rt in It)return It[Rt]}return null}function _checkNestProperty(nt,rt,it){if(_expandIri$1(nt,rt,{vocab:!0},it)!=="@nest")throw new JsonLdError$1("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}var JsonLdProcessor,hasRequiredJsonLdProcessor;function requireJsonLdProcessor(){return hasRequiredJsonLdProcessor||(hasRequiredJsonLdProcessor=1,JsonLdProcessor=nt=>{class rt{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(rt,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(rt.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:rt}),rt.compact=function(it,st){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):nt.compact(it,st)},rt.expand=function(it){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):nt.expand(it)},rt.flatten=function(it){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):nt.flatten(it)},rt}),JsonLdProcessor}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const canonize=rdfCanonize.exports,platform=platformBrowser,util=util$5,ContextResolver=ContextResolver_1,IdentifierIssuer=util.IdentifierIssuer,JsonLdError=JsonLdError_1,LRU=lruCache,NQuads=NQuads$1,{expand:_expand}=expand,{flatten:_flatten}=flatten,{fromRDF:_fromRDF}=fromRdf,{toRDF:_toRDF}=toRdf,{frameMergedOrDefault:_frameMergedOrDefault,cleanupNull:_cleanupNull}=frame,{isArray:_isArray,isObject:_isObject,isString:_isString}=types$7,{isSubjectReference:_isSubjectReference}=graphTypes$5,{expandIri:_expandIri,getInitialContext:_getInitialContext,process:_processContext,processingMode:_processingMode}=context,{compact:_compact,compactIri:_compactIri}=compact,{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=nodeMap,{logEventHandler:_logEventHandler,logWarningEventHandler:_logWarningEventHandler,safeEventHandler:_safeEventHandler,setDefaultEventHandler:_setDefaultEventHandler,setupEventHandler:_setupEventHandler,strictEventHandler:_strictEventHandler,unhandledEventHandler:_unhandledEventHandler}=events,wrapper=function(nt){const rt={},st=new LRU({max:100});nt.compact=async function(xt,Et,kt){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(Et===null)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(xt===null)return null;kt=_t(kt,{base:_isString(xt)?xt:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:st})}),kt.link&&(kt.skipExpansion=!0),kt.compactToRelative||delete kt.base;let Lt;kt.skipExpansion?Lt=xt:Lt=await nt.expand(xt,kt);const It=await nt.processContext(_getInitialContext(kt),Et,kt);let Rt=await _compact({activeCtx:It,element:Lt,options:kt});kt.compactArrays&&!kt.graph&&_isArray(Rt)?Rt.length===1?Rt=Rt[0]:Rt.length===0&&(Rt={}):kt.graph&&_isObject(Rt)&&(Rt=[Rt]),_isObject(Et)&&"@context"in Et&&(Et=Et["@context"]),Et=util.clone(Et),_isArray(Et)||(Et=[Et]);const Nt=Et;Et=[];for(let Ft=0;Ft<Nt.length;++Ft)(!_isObject(Nt[Ft])||Object.keys(Nt[Ft]).length>0)&&Et.push(Nt[Ft]);const Bt=Et.length>0;if(Et.length===1&&(Et=Et[0]),_isArray(Rt)){const Ft=_compactIri({activeCtx:It,iri:"@graph",relativeTo:{vocab:!0}}),Yt=Rt;Rt={},Bt&&(Rt["@context"]=Et),Rt[Ft]=Yt}else if(_isObject(Rt)&&Bt){const Ft=Rt;Rt={"@context":Et};for(const Yt in Ft)Rt[Yt]=Ft[Yt]}return Rt},nt.expand=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");Et=_t(Et,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:st})});const kt={},Lt=[];if("expandContext"in Et){const Bt=util.clone(Et.expandContext);_isObject(Bt)&&"@context"in Bt?kt.expandContext=Bt:kt.expandContext={"@context":Bt},Lt.push(kt.expandContext)}let It;if(!_isString(xt))kt.input=util.clone(xt);else{const Bt=await nt.get(xt,Et);It=Bt.documentUrl,kt.input=Bt.document,Bt.contextUrl&&(kt.remoteContext={"@context":Bt.contextUrl},Lt.push(kt.remoteContext))}"base"in Et||(Et.base=It||"");let Rt=_getInitialContext(Et);for(const Bt of Lt)Rt=await _processContext({activeCtx:Rt,localCtx:Bt,options:Et});let Nt=await _expand({activeCtx:Rt,element:kt.input,options:Et});return _isObject(Nt)&&"@graph"in Nt&&Object.keys(Nt).length===1?Nt=Nt["@graph"]:Nt===null&&(Nt=[]),_isArray(Nt)||(Nt=[Nt]),Nt},nt.flatten=async function(xt,Et,kt){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof Et=="function"?Et=null:Et=Et||null,kt=_t(kt,{base:_isString(xt)?xt:"",contextResolver:new ContextResolver({sharedCache:st})});const Lt=await nt.expand(xt,kt),It=_flatten(Lt);return Et===null?It:(kt.graph=!0,kt.skipExpansion=!0,await nt.compact(It,Et,kt))},nt.frame=async function(xt,Et,kt){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(kt=_t(kt,{base:_isString(xt)?xt:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:st})}),_isString(Et)){const Wt=await nt.get(Et,kt);if(Et=Wt.document,Wt.contextUrl){let Kt=Et["@context"];Kt?_isArray(Kt)?Kt.push(Wt.contextUrl):Kt=[Kt,Wt.contextUrl]:Kt=Wt.contextUrl,Et["@context"]=Kt}}const Lt=Et?Et["@context"]||{}:{},It=await nt.processContext(_getInitialContext(kt),Lt,kt);kt.hasOwnProperty("omitGraph")||(kt.omitGraph=_processingMode(It,1.1)),kt.hasOwnProperty("pruneBlankNodeIdentifiers")||(kt.pruneBlankNodeIdentifiers=_processingMode(It,1.1));const Rt=await nt.expand(xt,kt),Nt={...kt};Nt.isFrame=!0,Nt.keepFreeFloatingNodes=!0;const Bt=await nt.expand(Et,Nt),Ft=Object.keys(Et).map(Wt=>_expandIri(It,Wt,{vocab:!0}));Nt.merged=!Ft.includes("@graph"),Nt.is11=_processingMode(It,1.1);const Yt=_frameMergedOrDefault(Rt,Bt,Nt);Nt.graph=!kt.omitGraph,Nt.skipExpansion=!0,Nt.link={},Nt.framing=!0;let Zt=await nt.compact(Yt,Lt,Nt);return Nt.link={},Zt=_cleanupNull(Zt,Nt),Zt},nt.link=async function(xt,Et,kt){const Lt={};return Et&&(Lt["@context"]=Et),Lt["@embed"]="@link",nt.frame(xt,Lt,kt)},nt.normalize=nt.canonize=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(Et=_t(Et,{base:_isString(xt)?xt:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new ContextResolver({sharedCache:st})}),"inputFormat"in Et){if(Et.inputFormat!=="application/n-quads"&&Et.inputFormat!=="application/nquads")throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const It=NQuads.parse(xt);return canonize.canonize(It,Et)}const kt={...Et};delete kt.format,kt.produceGeneralizedRdf=!1;const Lt=await nt.toRDF(xt,kt);return canonize.canonize(Lt,Et)},nt.fromRDF=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Et=_t(Et,{format:_isString(xt)?"application/n-quads":void 0});const{format:kt}=Et;let{rdfParser:Lt}=Et;if(kt){if(Lt=Lt||rt[kt],!Lt)throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:kt})}else Lt=()=>xt;const It=await Lt(xt);return _fromRDF(It,Et)},nt.toRDF=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");Et=_t(Et,{base:_isString(xt)?xt:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:st})});let kt;Et.skipExpansion?kt=xt:kt=await nt.expand(xt,Et);const Lt=_toRDF(kt,Et);if(Et.format){if(Et.format==="application/n-quads"||Et.format==="application/nquads")return NQuads.serialize(Lt);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:Et.format})}return Lt},nt.createNodeMap=async function(xt,Et){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Et=_t(Et,{base:_isString(xt)?xt:"",contextResolver:new ContextResolver({sharedCache:st})});const kt=await nt.expand(xt,Et);return _createMergedNodeMap(kt,Et)},nt.merge=async function(xt,Et,kt){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(xt))throw new TypeError('Could not merge, "docs" must be an array.');typeof Et=="function"?Et=null:Et=Et||null,kt=_t(kt,{contextResolver:new ContextResolver({sharedCache:st})});const Lt=await Promise.all(xt.map(Wt=>{const Kt={...kt};return nt.expand(Wt,Kt)}));let It=!0;"mergeNodes"in kt&&(It=kt.mergeNodes);const Rt=kt.issuer||new IdentifierIssuer("_:b"),Nt={"@default":{}};for(let Wt=0;Wt<Lt.length;++Wt){const Kt=util.relabelBlankNodes(Lt[Wt],{issuer:new IdentifierIssuer("_:b"+Wt+"-")}),Jt=It||Wt===0?Nt:{"@default":{}};if(_createNodeMap(Kt,Jt,"@default",Rt),Jt!==Nt)for(const on in Jt){const rn=Jt[on];if(!(on in Nt)){Nt[on]=rn;continue}const ln=Nt[on];for(const gn in rn)gn in ln||(ln[gn]=rn[gn])}}const Bt=_mergeNodeMaps(Nt),Ft=[],Yt=Object.keys(Bt).sort();for(let Wt=0;Wt<Yt.length;++Wt){const Kt=Bt[Yt[Wt]];_isSubjectReference(Kt)||Ft.push(Kt)}return Et===null?Ft:(kt.graph=!0,kt.skipExpansion=!0,await nt.compact(Ft,Et,kt))},Object.defineProperty(nt,"documentLoader",{get:()=>nt._documentLoader,set:xt=>nt._documentLoader=xt}),nt.documentLoader=async xt=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:xt})},nt.get=async function(xt,Et){let kt;typeof Et.documentLoader=="function"?kt=Et.documentLoader:kt=nt.documentLoader;const Lt=await kt(xt);try{if(!Lt.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(Lt.document)&&(Lt.document=JSON.parse(Lt.document))}catch(It){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:It,remoteDoc:Lt})}return Lt},nt.processContext=async function(xt,Et,kt){return kt=_t(kt,{base:"",contextResolver:new ContextResolver({sharedCache:st})}),Et===null?_getInitialContext(kt):(Et=util.clone(Et),_isObject(Et)&&"@context"in Et||(Et={"@context":Et}),_processContext({activeCtx:xt,localCtx:Et,options:kt}))},nt.getContextValue=context.getContextValue,nt.documentLoaders={},nt.useDocumentLoader=function(xt){if(!(xt in nt.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+xt+'"',"jsonld.UnknownDocumentLoader",{type:xt});nt.documentLoader=nt.documentLoaders[xt].apply(nt,Array.prototype.slice.call(arguments,1))},nt.registerRDFParser=function(xt,Et){rt[xt]=Et},nt.unregisterRDFParser=function(xt){delete rt[xt]},nt.registerRDFParser("application/n-quads",NQuads.parse),nt.registerRDFParser("application/nquads",NQuads.parse),nt.url=url$1,nt.logEventHandler=_logEventHandler,nt.logWarningEventHandler=_logWarningEventHandler,nt.safeEventHandler=_safeEventHandler,nt.setDefaultEventHandler=_setDefaultEventHandler,nt.strictEventHandler=_strictEventHandler,nt.unhandledEventHandler=_unhandledEventHandler,nt.util=util,Object.assign(nt,util),nt.promises=nt,nt.RequestQueue=requireRequestQueue(),nt.JsonLdProcessor=requireJsonLdProcessor()(nt),platform.setupGlobals(nt),platform.setupDocumentLoaders(nt);function _t(xt,{documentLoader:Et=nt.documentLoader,...kt}){if(xt&&"compactionMap"in xt)throw new JsonLdError('"compactionMap" not supported.',"jsonld.OptionsError");if(xt&&"expansionMap"in xt)throw new JsonLdError('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:Et},kt,xt,{eventHandler:_setupEventHandler({options:xt})})}return nt},factory=function(){return wrapper(function(){return factory()})};wrapper(factory);var jsonld=factory;const _hoisted_1$5=["innerHTML"],sparqlEndpoint="https://cy9in0xsv5.execute-api.us-east-1.amazonaws.com/prod/sparql",iiifService="https://iiif.juncture-digital.org",sparql=`
    PREFIX jwd: <http://kg.jstor.org/entity/>
    PREFIX jwdt: <http://kg.jstor.org/prop/direct/>
    PREFIX jp: <http://kg.jstor.org/prop/>
    PREFIX jps: <http://kg.jstor.org/prop/statement/>
    PREFIX jpq: <http://kg.jstor.org/prop/qualifier/>
    PREFIX wd: <http://www.wikidata.org/entity/>
    PREFIX wdt: <http://www.wikidata.org/prop/direct/>
    PREFIX schema: <http://schema.org/>
    CONSTRUCT {
      ?specimen jwdt:P1660 ?specimenOf ;
                schema:description ?description ;
                rdf:type jwd:Q14316 ;
                jwdt:P1663 ?collectionDate ;
                jwdt:P1662 ?collector ;
                jwdt:P1665 ?locationCollected ;
                jwdt:P1106 ?jstorPlantsId ;
                jwdt:P1661 ?specimenType ;
                jwdt:P501 ?taxonName ;
                jwdt:P1666 ?availableAt ;
                jp:P1467 ?img .
      ?img jps:P1467 ?url ; jpq:P1669 ?imgSize .
      ?availableAt jps:P1666 ?wdID ; rdfs:label ?herbariumName .
      ?locationCollected jps:P1665 ?locId ; rdfs:label ?locationName ; wdt:P6766 ?wofId .
    } WHERE {
      ?specimen jwdt:P17 jwd:Q14316 ;
              <<SELECTOR>>
              schema:description ?description ;
              jwdt:P1106 ?jstorPlantsId ;
              jwdt:P501 ?taxonName ;
              jp:P1467 [ jps:P1467 ?img ;
                        jpq:P1669 ?imgSize ] .
      FILTER(?imgSize = 'best')
      OPTIONAL { ?specimen jwdt:P1661 ?specimenType . }
      OPTIONAL { ?specimen jwdt:P1660 ?specimenOf . }
      OPTIONAL { ?specimen jwdt:P1663 ?collectionDate . }
      OPTIONAL { ?specimen jwdt:P1662 ?collector . }
      OPTIONAL {
          ?specimen jwdt:P1665 ?locationCollected .
          SERVICE <https://query.wikidata.org/sparql> {
              ?locationCollected rdfs:label ?locationName .
              FILTER(LANG(?locationName) = 'en')
              OPTIONAL { ?locationCollected wdt:P6766 ?wofId . }
          }
      }        
      OPTIONAL {
          ?specimen jwdt:P1666 ?availableAt .
          SERVICE <https://query.wikidata.org/sparql> {
              ?availableAt rdfs:label ?herbariumName .
              FILTER(LANG(?herbariumName) = 'en')
          }
      }
    }
    LIMIT <<LIMIT>>`,_sfc_main$8=defineComponent({__name:"PlantSpecimen.ce",props:{eid:{type:String},qid:{type:String},jpid:{type:String},wdid:{type:String},taxonName:{type:String},caption:{type:String},max:{type:Number,default:1},full:{type:Boolean},left:{type:Boolean},right:{type:Boolean},sticky:{type:Boolean},width:{type:String},height:{type:String}},setup(nt){const rt=nt,it=ref(null),st=ref([]),_t=ref([]);watch$1(st,async()=>{var Rt;_t.value=await Promise.all((((Rt=st.value)==null?void 0:Rt.length)===1?[st.value[0]]:st.value||[]).map(Nt=>fetch(`${iiifService}/manifest/`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(It(Nt))}).then(Bt=>Bt.json())))});const xt=computed(()=>{var Rt;return rt.caption||(((Rt=st.value)==null?void 0:Rt.length)>0?st.value[0].description:"")});onMounted(()=>kt());const Et={"@context":{jwd:"http://kg.jstor.org/entity/",jwdt:"http://kg.jstor.org/prop/direct/",jp:"http://kg.jstor.org/prop/",jps:"http://kg.jstor.org/prop/statement/",jpq:"http://kg.jstor.org/prop/qualifier/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",wd:"http://www.wikidata.org/entity/",wdt:"http://www.wikidata.org/prop/direct/",xsd:"http://www.w3.org/2001/XMLSchema#",Specimen:"jwd:Q14316",id:"@id",collectionDate:{"@id":"jwdt:P1663","@type":"xsd:dateTime"},collector:{"@id":"jwdt:P1662","@container":"@set"},description:{"@id":"schema:description","@language":"en"},herbarium:{"@id":"jwdt:P1666","@type":"@id"},images:{"@id":"jp:P1467","@type":"@id","@container":"@set"},imgSize:{"@id":"jpq:P1669"},"instance of":{"@id":"jwdt:P17","@type":"@id"},jstorPlantsId:{"@id":"jwdt:P1106"},locationCollected:{"@id":"jwdt:P1665"},label:{"@id":"rdfs:label","@language":"en"},specimenOf:{"@id":"jwdt:P1660","@type":"@id"},specimenType:{"@id":"jwdt:P1661"},taxonName:{"@id":"jwdt:P501"},wofId:{"@id":"wdt:P6766"}}};async function kt(){let Rt=rt.jpid?`jwdt:P1106 "${rt.jpid}" ;`:rt.eid||rt.qid||rt.wdid?`jwdt:P1660 <http://www.wikidata.org/entity/${rt.eid||rt.qid||rt.wdid}> ;`:`jwdt:P501 "${rt.taxonName}" ;`,Nt=sparql.replace(/<<SELECTOR>>/,Rt).replace(/<<LIMIT>>/,`${rt.max}`),Bt=await Lt(Nt);Bt["@graph"]?st.value=(await Lt(Nt))["@graph"]:(delete Bt["@context"],st.value=[Bt])}async function Lt(Rt){let Bt=await(await fetch(sparqlEndpoint,{method:"POST",body:new URLSearchParams({query:Rt}),headers:{Accept:"text/plain","Content-type":"application/x-www-form-urlencoded"}})).text(),Ft=await jsonld.fromRDF(Bt,{format:"application/n-quads"});return jsonld.frame(Ft,{"@context":Et,"@type":"Specimen"})}function It(Rt){let Bt=Rt.images.find(Yt=>Yt.imgSize==="best").id.match(/rft_id=([^&]*)/)[1],Ft={url:`${iiifService}/gp-proxy${Bt}`};return Rt.taxonName&&(Ft["Taxon name"]=Rt.taxonName),Rt.jstorPlantsId&&(Ft["Global Plants ID"]=Rt.jstorPlantsId),Rt.description&&(Ft.Description=Rt.description),Rt.description&&(Ft.Label=Rt.description),Rt.specimenType&&(Ft["Specimen type"]=Rt.specimenType),Rt.collector&&(Ft.Collector=Rt.collector.join("; ")),Rt.locationCollected&&(Ft["Location collected"]=Rt.locationCollected.label),Rt.collectionDate&&(Ft["Date collected"]=Rt.collectionDate),Rt.herbarium&&(Ft.Herbarium=Rt.herbarium.label),Ft}return(Rt,Nt)=>{const Bt=resolveComponent("ve-media");return openBlock(),createElementBlock("div",{class:"osd",id:"osd",ref_key:"root",ref:it},[st.value.length>0?(openBlock(),createBlock(Bt,{key:0,grid:_t.value.length>1,caption:xt.value,right:rt.right,left:rt.left,full:rt.full,width:rt.width,height:rt.height},{default:withCtx(()=>[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_t.value,Ft=>(openBlock(),createElementBlock("li",{key:Ft.id||Ft["@id"],innerHTML:Ft.id||Ft["@id"]},null,8,_hoisted_1$5))),128))])]),_:1},8,["grid","caption","right","left","full","width","height"])):createCommentVNode("",!0)],512)}}}),_hoisted_1$4={class:"wrapper"},_hoisted_2$3={class:"search-form"},_hoisted_3$3={class:"input-wrapper"},_hoisted_4$3={key:0,class:"search-results"},_hoisted_5$3=["href"],_hoisted_6$1=["innerHTML"],_hoisted_7=["innerHTML"],_hoisted_8={key:0},_hoisted_9={class:"search-icon",htmlFor:"search-btn"},searchEndpoint="/search",_sfc_main$7=defineComponent({__name:"SiteSearch.ce",props:{searchDomain:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Zt;return(Zt=it==null?void 0:it.value)==null?void 0:Zt.parentNode}),_t=ref(),xt=ref(),Et=ref(""),kt=ref([]),Lt=ref(0),It=ref(!1);onMounted(()=>Rt());function Rt(){var Zt,Wt;_t.value=(Zt=st.value)==null?void 0:Zt.querySelector("#search-input"),_t.value.value="",xt.value=(Wt=st.value)==null?void 0:Wt.querySelector("#search-btn"),kt.value=[]}watch$1(It,()=>{var Zt;xt.value&&(xt.value.checked=It.value),It&&((Zt=_t.value)==null||Zt.focus())});function Nt(){var Jt;let Zt=(Jt=_t.value)==null?void 0:Jt.value.replace(/ /,"%20"),Wt=Zt===Et.value?kt.value.length+1:1,Kt=`${searchEndpoint}?domain=${rt.searchDomain}&q=${Zt}&start=${Wt}`;fetch(Kt).then(on=>on.json()).then(on=>{Lt.value=parseInt(on.searchInformation.totalResults);let rn=on.items.map(ln=>{let gn=new URL(ln.link);return ln.link=`${location.origin}${gn.pathname}`,ln});kt.value=Zt!==Et.value?rn:[...kt.value,...rn],Et.value=Zt||""})}function Bt(Zt){Zt.key==="Enter"&&Nt()}function Ft(){It.value=!1,_t.value&&(_t.value.value=""),Et.value="",Lt.value=0,kt.value=[]}function Yt(){It.value=!It.value}return(Zt,Wt)=>{const Kt=resolveComponent("sl-icon-button");return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,class:"search"},[Wt[0]||(Wt[0]=createBaseVNode("input",{class:"search-btn",type:"checkbox",id:"search-btn"},null,-1)),createBaseVNode("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createVNode(Kt,{class:"cancel",onClick:Ft,name:"x-circle",label:"Clear"}),createBaseVNode("input",{type:"text",id:"search-input",class:"search-input",onKeyup:Bt,autocomplete:"off",role:"textbox",placeholder:"Search site"},null,32)])]),kt.value.length>0?(openBlock(),createElementBlock("ul",_hoisted_4$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value,(Jt,on)=>(openBlock(),createElementBlock("li",{key:`sr=${on}`},[createBaseVNode("a",{href:Jt.link},[createBaseVNode("h3",{innerHTML:Jt.htmlTitle},null,8,_hoisted_6$1),createBaseVNode("p",{innerHTML:Jt.htmlSnippet},null,8,_hoisted_7)],8,_hoisted_5$3)]))),128)),Lt.value>kt.value.length?(openBlock(),createElementBlock("li",_hoisted_8,[createBaseVNode("div",{class:"more",onClick:Nt},"More")])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("label",_hoisted_9,[createVNode(Kt,{onClick:Yt,name:"search",label:"Search"})])],512)}}}),_style_0$3=`*{box-sizing:border-box}.search-icon{color:#fff;font-size:28px}.search-icon:hover{cursor:pointer}.search{position:relative;display:flex;align-items:center;gap:10px}.search-btn,.search-form,.wrapper{display:none}.wrapper{flex-direction:column;position:absolute;right:-4px}.search-form{display:flex;align-items:center}.search-input{height:30px;width:250px;border-radius:6px;padding:3px 10px;font-size:1rem}.search-submit{background-color:#fff;border-radius:6px;padding:8px 8px 4px;height:24px;z-index:4}.search-submit:hover{background-color:#ddd;cursor:pointer}.search-submit sl-icon{color:#00f;font-size:20px}.search-results{position:absolute;top:42px;left:0;width:326px;max-height:50vh;overflow-y:scroll;z-index:2;background-color:#fff;margin:0 0 0 2px;list-style:none;padding:6px;border-radius:6px;font-size:.9rem;box-shadow:0 6px 20px #00000030}.search-results li:nth-of-type(even){background-color:#e6e6df}.search-results li{padding:6px;margin:3px;border:1px solid #E6E6DF}.search-results li h3,.search-results li p{margin:8px 0}.search-results li a{text-decoration:none;color:#444}.search-results li a h3{font-weight:700}.search-results li a p{font-weight:300}.search-results li:hover{cursor:pointer;box-shadow:0 4px 8px #0003}.search-icon sl-icon-button::part(base){color:#fff}.search-btn:checked~.search-icon sl-icon-button::part(base){visibility:hidden}.search-btn:checked~.wrapper .search-form{display:flex;width:100%}.search-btn:checked~.wrapper{display:flex}.input-wrapper{display:inline-block;position:relative}.cancel{position:absolute;right:0;font-size:16px;cursor:pointer}
`,SiteSearch=_export_sfc(_sfc_main$7,[["styles",[_style_0$3]]]);var tab_styles_default=i$7`
  :host {
    display: inline-block;
  }

  .tab {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    border-radius: var(--sl-border-radius-medium);
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-medium) var(--sl-spacing-large);
    white-space: nowrap;
    user-select: none;
    -webkit-user-select: none;
    cursor: pointer;
    transition:
      var(--transition-speed) box-shadow,
      var(--transition-speed) color;
  }

  .tab:hover:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  :host(:focus) {
    outline: transparent;
  }

  :host(:focus-visible) {
    color: var(--sl-color-primary-600);
    outline: var(--sl-focus-ring);
    outline-offset: calc(-1 * var(--sl-focus-ring-width) - var(--sl-focus-ring-offset));
  }

  .tab.tab--active:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab.tab--closable {
    padding-inline-end: var(--sl-spacing-small);
  }

  .tab.tab--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .tab__close-button {
    font-size: var(--sl-font-size-small);
    margin-inline-start: var(--sl-spacing-small);
  }

  .tab__close-button::part(base) {
    padding: var(--sl-spacing-3x-small);
  }

  @media (forced-colors: active) {
    .tab.tab--active:not(.tab--disabled) {
      outline: solid 1px transparent;
      outline-offset: -3px;
    }
  }
`,id$1=0,SlTab=class extends ShoelaceElement{constructor(){super(...arguments),this.localize=new LocalizeController(this),this.attrId=++id$1,this.componentId=`sl-tab-${this.attrId}`,this.panel="",this.active=!1,this.closable=!1,this.disabled=!1,this.tabIndex=0}connectedCallback(){super.connectedCallback(),this.setAttribute("role","tab")}handleCloseClick(nt){nt.stopPropagation(),this.emit("sl-close")}handleActiveChange(){this.setAttribute("aria-selected",this.active?"true":"false")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false"),this.disabled&&!this.active?this.tabIndex=-1:this.tabIndex=0}render(){return this.id=this.id.length>0?this.id:this.componentId,x$1`
      <div
        part="base"
        class=${e$1({tab:!0,"tab--active":this.active,"tab--closable":this.closable,"tab--disabled":this.disabled})}
      >
        <slot></slot>
        ${this.closable?x$1`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                name="x-lg"
                library="system"
                label=${this.localize.term("close")}
                class="tab__close-button"
                @click=${this.handleCloseClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </div>
    `}};SlTab.styles=[component_styles_default,tab_styles_default];SlTab.dependencies={"sl-icon-button":SlIconButton};__decorateClass([e$4(".tab")],SlTab.prototype,"tab",2);__decorateClass([n$4({reflect:!0})],SlTab.prototype,"panel",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTab.prototype,"active",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTab.prototype,"closable",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTab.prototype,"disabled",2);__decorateClass([n$4({type:Number,reflect:!0})],SlTab.prototype,"tabIndex",2);__decorateClass([watch("active")],SlTab.prototype,"handleActiveChange",1);__decorateClass([watch("disabled")],SlTab.prototype,"handleDisabledChange",1);SlTab.define("sl-tab");var tab_group_styles_default=i$7`
  :host {
    --indicator-color: var(--sl-color-primary-600);
    --track-color: var(--sl-color-neutral-200);
    --track-width: 2px;

    display: block;
  }

  .tab-group {
    display: flex;
    border-radius: 0;
  }

  .tab-group__tabs {
    display: flex;
    position: relative;
  }

  .tab-group__indicator {
    position: absolute;
    transition:
      var(--sl-transition-fast) translate ease,
      var(--sl-transition-fast) width ease;
  }

  .tab-group--has-scroll-controls .tab-group__nav-container {
    position: relative;
    padding: 0 var(--sl-spacing-x-large);
  }

  .tab-group--has-scroll-controls .tab-group__scroll-button--start--hidden,
  .tab-group--has-scroll-controls .tab-group__scroll-button--end--hidden {
    visibility: hidden;
  }

  .tab-group__body {
    display: block;
    overflow: auto;
  }

  .tab-group__scroll-button {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    bottom: 0;
    width: var(--sl-spacing-x-large);
  }

  .tab-group__scroll-button--start {
    left: 0;
  }

  .tab-group__scroll-button--end {
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--start {
    left: auto;
    right: 0;
  }

  .tab-group--rtl .tab-group__scroll-button--end {
    left: 0;
    right: auto;
  }

  /*
   * Top
   */

  .tab-group--top {
    flex-direction: column;
  }

  .tab-group--top .tab-group__nav-container {
    order: 1;
  }

  .tab-group--top .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--top .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--top .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-bottom: solid var(--track-width) var(--track-color);
  }

  .tab-group--top .tab-group__indicator {
    bottom: calc(-1 * var(--track-width));
    border-bottom: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--top .tab-group__body {
    order: 2;
  }

  .tab-group--top ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Bottom
   */

  .tab-group--bottom {
    flex-direction: column;
  }

  .tab-group--bottom .tab-group__nav-container {
    order: 2;
  }

  .tab-group--bottom .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--bottom .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-top: solid var(--track-width) var(--track-color);
  }

  .tab-group--bottom .tab-group__indicator {
    top: calc(-1 * var(--track-width));
    border-top: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--bottom .tab-group__body {
    order: 1;
  }

  .tab-group--bottom ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Start
   */

  .tab-group--start {
    flex-direction: row;
  }

  .tab-group--start .tab-group__nav-container {
    order: 1;
  }

  .tab-group--start .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-inline-end: solid var(--track-width) var(--track-color);
  }

  .tab-group--start .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    border-right: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--start.tab-group--rtl .tab-group__indicator {
    right: auto;
    left: calc(-1 * var(--track-width));
  }

  .tab-group--start .tab-group__body {
    flex: 1 1 auto;
    order: 2;
  }

  .tab-group--start ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }

  /*
   * End
   */

  .tab-group--end {
    flex-direction: row;
  }

  .tab-group--end .tab-group__nav-container {
    order: 2;
  }

  .tab-group--end .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-left: solid var(--track-width) var(--track-color);
  }

  .tab-group--end .tab-group__indicator {
    left: calc(-1 * var(--track-width));
    border-inline-start: solid var(--track-width) var(--indicator-color);
  }

  .tab-group--end.tab-group--rtl .tab-group__indicator {
    right: calc(-1 * var(--track-width));
    left: auto;
  }

  .tab-group--end .tab-group__body {
    flex: 1 1 auto;
    order: 1;
  }

  .tab-group--end ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }
`,resize_observer_styles_default=i$7`
  :host {
    display: contents;
  }
`,SlResizeObserver=class extends ShoelaceElement{constructor(){super(...arguments),this.observedElements=[],this.disabled=!1}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(nt=>{this.emit("sl-resize",{detail:{entries:nt}})}),this.disabled||this.startObserver()}disconnectedCallback(){super.disconnectedCallback(),this.stopObserver()}handleSlotChange(){this.disabled||this.startObserver()}startObserver(){const nt=this.shadowRoot.querySelector("slot");if(nt!==null){const rt=nt.assignedElements({flatten:!0});this.observedElements.forEach(it=>this.resizeObserver.unobserve(it)),this.observedElements=[],rt.forEach(it=>{this.resizeObserver.observe(it),this.observedElements.push(it)})}}stopObserver(){this.resizeObserver.disconnect()}handleDisabledChange(){this.disabled?this.stopObserver():this.startObserver()}render(){return x$1` <slot @slotchange=${this.handleSlotChange}></slot> `}};SlResizeObserver.styles=[component_styles_default,resize_observer_styles_default];__decorateClass([n$4({type:Boolean,reflect:!0})],SlResizeObserver.prototype,"disabled",2);__decorateClass([watch("disabled",{waitUntilFirstUpdate:!0})],SlResizeObserver.prototype,"handleDisabledChange",1);var SlTabGroup=class extends ShoelaceElement{constructor(){super(...arguments),this.tabs=[],this.focusableTabs=[],this.panels=[],this.localize=new LocalizeController(this),this.hasScrollControls=!1,this.shouldHideScrollStartButton=!1,this.shouldHideScrollEndButton=!1,this.placement="top",this.activation="auto",this.noScrollControls=!1,this.fixedScrollControls=!1,this.scrollOffset=1}connectedCallback(){const nt=Promise.all([customElements.whenDefined("sl-tab"),customElements.whenDefined("sl-tab-panel")]);super.connectedCallback(),this.resizeObserver=new ResizeObserver(()=>{this.repositionIndicator(),this.updateScrollControls()}),this.mutationObserver=new MutationObserver(rt=>{const it=rt.filter(({target:st})=>{if(st===this)return!0;if(st.closest("sl-tab-group")!==this)return!1;const _t=st.tagName.toLowerCase();return _t==="sl-tab"||_t==="sl-tab-panel"});if(it.length!==0){if(it.some(st=>!["aria-labelledby","aria-controls"].includes(st.attributeName))&&setTimeout(()=>this.setAriaLabels()),it.some(st=>st.attributeName==="disabled"))this.syncTabsAndPanels();else if(it.some(st=>st.attributeName==="active")){const _t=it.filter(xt=>xt.attributeName==="active"&&xt.target.tagName.toLowerCase()==="sl-tab").map(xt=>xt.target).find(xt=>xt.active);_t&&this.setActiveTab(_t)}}}),this.updateComplete.then(()=>{this.syncTabsAndPanels(),this.mutationObserver.observe(this,{attributes:!0,attributeFilter:["active","disabled","name","panel"],childList:!0,subtree:!0}),this.resizeObserver.observe(this.nav),nt.then(()=>{new IntersectionObserver((it,st)=>{var _t;it[0].intersectionRatio>0&&(this.setAriaLabels(),this.setActiveTab((_t=this.getActiveTab())!=null?_t:this.tabs[0],{emitEvents:!1}),st.unobserve(it[0].target))}).observe(this.tabGroup)})})}disconnectedCallback(){var nt,rt;super.disconnectedCallback(),(nt=this.mutationObserver)==null||nt.disconnect(),this.nav&&((rt=this.resizeObserver)==null||rt.unobserve(this.nav))}getAllTabs(){return this.shadowRoot.querySelector('slot[name="nav"]').assignedElements()}getAllPanels(){return[...this.body.assignedElements()].filter(nt=>nt.tagName.toLowerCase()==="sl-tab-panel")}getActiveTab(){return this.tabs.find(nt=>nt.active)}handleClick(nt){const it=nt.target.closest("sl-tab");(it==null?void 0:it.closest("sl-tab-group"))===this&&it!==null&&this.setActiveTab(it,{scrollBehavior:"smooth"})}handleKeyDown(nt){const it=nt.target.closest("sl-tab");if((it==null?void 0:it.closest("sl-tab-group"))===this&&(["Enter"," "].includes(nt.key)&&it!==null&&(this.setActiveTab(it,{scrollBehavior:"smooth"}),nt.preventDefault()),["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(nt.key))){const _t=this.tabs.find(kt=>kt.matches(":focus")),xt=this.localize.dir()==="rtl";let Et=null;if((_t==null?void 0:_t.tagName.toLowerCase())==="sl-tab"){if(nt.key==="Home")Et=this.focusableTabs[0];else if(nt.key==="End")Et=this.focusableTabs[this.focusableTabs.length-1];else if(["top","bottom"].includes(this.placement)&&nt.key===(xt?"ArrowRight":"ArrowLeft")||["start","end"].includes(this.placement)&&nt.key==="ArrowUp"){const kt=this.tabs.findIndex(Lt=>Lt===_t);Et=this.findNextFocusableTab(kt,"backward")}else if(["top","bottom"].includes(this.placement)&&nt.key===(xt?"ArrowLeft":"ArrowRight")||["start","end"].includes(this.placement)&&nt.key==="ArrowDown"){const kt=this.tabs.findIndex(Lt=>Lt===_t);Et=this.findNextFocusableTab(kt,"forward")}if(!Et)return;Et.tabIndex=0,Et.focus({preventScroll:!0}),this.activation==="auto"?this.setActiveTab(Et,{scrollBehavior:"smooth"}):this.tabs.forEach(kt=>{kt.tabIndex=kt===Et?0:-1}),["top","bottom"].includes(this.placement)&&scrollIntoView(Et,this.nav,"horizontal"),nt.preventDefault()}}}handleScrollToStart(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft+this.nav.clientWidth:this.nav.scrollLeft-this.nav.clientWidth,behavior:"smooth"})}handleScrollToEnd(){this.nav.scroll({left:this.localize.dir()==="rtl"?this.nav.scrollLeft-this.nav.clientWidth:this.nav.scrollLeft+this.nav.clientWidth,behavior:"smooth"})}setActiveTab(nt,rt){if(rt=__spreadValues({emitEvents:!0,scrollBehavior:"auto"},rt),nt!==this.activeTab&&!nt.disabled){const it=this.activeTab;this.activeTab=nt,this.tabs.forEach(st=>{st.active=st===this.activeTab,st.tabIndex=st===this.activeTab?0:-1}),this.panels.forEach(st=>{var _t;return st.active=st.name===((_t=this.activeTab)==null?void 0:_t.panel)}),this.syncIndicator(),["top","bottom"].includes(this.placement)&&scrollIntoView(this.activeTab,this.nav,"horizontal",rt.scrollBehavior),rt.emitEvents&&(it&&this.emit("sl-tab-hide",{detail:{name:it.panel}}),this.emit("sl-tab-show",{detail:{name:this.activeTab.panel}}))}}setAriaLabels(){this.tabs.forEach(nt=>{const rt=this.panels.find(it=>it.name===nt.panel);rt&&(nt.setAttribute("aria-controls",rt.getAttribute("id")),rt.setAttribute("aria-labelledby",nt.getAttribute("id")))})}repositionIndicator(){const nt=this.getActiveTab();if(!nt)return;const rt=nt.clientWidth,it=nt.clientHeight,st=this.localize.dir()==="rtl",_t=this.getAllTabs(),Et=_t.slice(0,_t.indexOf(nt)).reduce((kt,Lt)=>({left:kt.left+Lt.clientWidth,top:kt.top+Lt.clientHeight}),{left:0,top:0});switch(this.placement){case"top":case"bottom":this.indicator.style.width=`${rt}px`,this.indicator.style.height="auto",this.indicator.style.translate=st?`${-1*Et.left}px`:`${Et.left}px`;break;case"start":case"end":this.indicator.style.width="auto",this.indicator.style.height=`${it}px`,this.indicator.style.translate=`0 ${Et.top}px`;break}}syncTabsAndPanels(){this.tabs=this.getAllTabs(),this.focusableTabs=this.tabs.filter(nt=>!nt.disabled),this.panels=this.getAllPanels(),this.syncIndicator(),this.updateComplete.then(()=>this.updateScrollControls())}findNextFocusableTab(nt,rt){let it=null;const st=rt==="forward"?1:-1;let _t=nt+st;for(;nt<this.tabs.length;){if(it=this.tabs[_t]||null,it===null){rt==="forward"?it=this.focusableTabs[0]:it=this.focusableTabs[this.focusableTabs.length-1];break}if(!it.disabled)break;_t+=st}return it}updateScrollButtons(){this.hasScrollControls&&!this.fixedScrollControls&&(this.shouldHideScrollStartButton=this.scrollFromStart()<=this.scrollOffset,this.shouldHideScrollEndButton=this.isScrolledToEnd())}isScrolledToEnd(){return this.scrollFromStart()+this.nav.clientWidth>=this.nav.scrollWidth-this.scrollOffset}scrollFromStart(){return this.localize.dir()==="rtl"?-this.nav.scrollLeft:this.nav.scrollLeft}updateScrollControls(){this.noScrollControls?this.hasScrollControls=!1:this.hasScrollControls=["top","bottom"].includes(this.placement)&&this.nav.scrollWidth>this.nav.clientWidth+1,this.updateScrollButtons()}syncIndicator(){this.getActiveTab()?(this.indicator.style.display="block",this.repositionIndicator()):this.indicator.style.display="none"}show(nt){const rt=this.tabs.find(it=>it.panel===nt);rt&&this.setActiveTab(rt,{scrollBehavior:"smooth"})}render(){const nt=this.localize.dir()==="rtl";return x$1`
      <div
        part="base"
        class=${e$1({"tab-group":!0,"tab-group--top":this.placement==="top","tab-group--bottom":this.placement==="bottom","tab-group--start":this.placement==="start","tab-group--end":this.placement==="end","tab-group--rtl":this.localize.dir()==="rtl","tab-group--has-scroll-controls":this.hasScrollControls})}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
      >
        <div class="tab-group__nav-container" part="nav">
          ${this.hasScrollControls?x$1`
                <sl-icon-button
                  part="scroll-button scroll-button--start"
                  exportparts="base:scroll-button__base"
                  class=${e$1({"tab-group__scroll-button":!0,"tab-group__scroll-button--start":!0,"tab-group__scroll-button--start--hidden":this.shouldHideScrollStartButton})}
                  name=${nt?"chevron-right":"chevron-left"}
                  library="system"
                  tabindex="-1"
                  aria-hidden="true"
                  label=${this.localize.term("scrollToStart")}
                  @click=${this.handleScrollToStart}
                ></sl-icon-button>
              `:""}

          <div class="tab-group__nav" @scrollend=${this.updateScrollButtons}>
            <div part="tabs" class="tab-group__tabs" role="tablist">
              <div part="active-tab-indicator" class="tab-group__indicator"></div>
              <sl-resize-observer @sl-resize=${this.syncIndicator}>
                <slot name="nav" @slotchange=${this.syncTabsAndPanels}></slot>
              </sl-resize-observer>
            </div>
          </div>

          ${this.hasScrollControls?x$1`
                <sl-icon-button
                  part="scroll-button scroll-button--end"
                  exportparts="base:scroll-button__base"
                  class=${e$1({"tab-group__scroll-button":!0,"tab-group__scroll-button--end":!0,"tab-group__scroll-button--end--hidden":this.shouldHideScrollEndButton})}
                  name=${nt?"chevron-left":"chevron-right"}
                  library="system"
                  tabindex="-1"
                  aria-hidden="true"
                  label=${this.localize.term("scrollToEnd")}
                  @click=${this.handleScrollToEnd}
                ></sl-icon-button>
              `:""}
        </div>

        <slot part="body" class="tab-group__body" @slotchange=${this.syncTabsAndPanels}></slot>
      </div>
    `}};SlTabGroup.styles=[component_styles_default,tab_group_styles_default];SlTabGroup.dependencies={"sl-icon-button":SlIconButton,"sl-resize-observer":SlResizeObserver};__decorateClass([e$4(".tab-group")],SlTabGroup.prototype,"tabGroup",2);__decorateClass([e$4(".tab-group__body")],SlTabGroup.prototype,"body",2);__decorateClass([e$4(".tab-group__nav")],SlTabGroup.prototype,"nav",2);__decorateClass([e$4(".tab-group__indicator")],SlTabGroup.prototype,"indicator",2);__decorateClass([r$1()],SlTabGroup.prototype,"hasScrollControls",2);__decorateClass([r$1()],SlTabGroup.prototype,"shouldHideScrollStartButton",2);__decorateClass([r$1()],SlTabGroup.prototype,"shouldHideScrollEndButton",2);__decorateClass([n$4()],SlTabGroup.prototype,"placement",2);__decorateClass([n$4()],SlTabGroup.prototype,"activation",2);__decorateClass([n$4({attribute:"no-scroll-controls",type:Boolean})],SlTabGroup.prototype,"noScrollControls",2);__decorateClass([n$4({attribute:"fixed-scroll-controls",type:Boolean})],SlTabGroup.prototype,"fixedScrollControls",2);__decorateClass([t$1({passive:!0})],SlTabGroup.prototype,"updateScrollButtons",1);__decorateClass([watch("noScrollControls",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"updateScrollControls",1);__decorateClass([watch("placement",{waitUntilFirstUpdate:!0})],SlTabGroup.prototype,"syncIndicator",1);SlTabGroup.define("sl-tab-group");var debounce=(nt,rt)=>{let it=0;return function(...st){window.clearTimeout(it),it=window.setTimeout(()=>{nt.call(this,...st)},rt)}},decorate=(nt,rt,it)=>{const st=nt[rt];nt[rt]=function(..._t){st.call(this,..._t),it.call(this,st,..._t)}};(()=>{if(typeof window>"u")return;if(!("onscrollend"in window)){const rt=new Set,it=new WeakMap,st=xt=>{for(const Et of xt.changedTouches)rt.add(Et.identifier)},_t=xt=>{for(const Et of xt.changedTouches)rt.delete(Et.identifier)};document.addEventListener("touchstart",st,!0),document.addEventListener("touchend",_t,!0),document.addEventListener("touchcancel",_t,!0),decorate(EventTarget.prototype,"addEventListener",function(xt,Et){if(Et!=="scrollend")return;const kt=debounce(()=>{rt.size?kt():this.dispatchEvent(new Event("scrollend"))},100);xt.call(this,"scroll",kt,{passive:!0}),it.set(this,kt)}),decorate(EventTarget.prototype,"removeEventListener",function(xt,Et){if(Et!=="scrollend")return;const kt=it.get(this);kt&&xt.call(this,"scroll",kt,{passive:!0})})}})();var tab_panel_styles_default=i$7`
  :host {
    --padding: 0;

    display: none;
  }

  :host([active]) {
    display: block;
  }

  .tab-panel {
    display: block;
    padding: var(--padding);
  }
`,id=0,SlTabPanel=class extends ShoelaceElement{constructor(){super(...arguments),this.attrId=++id,this.componentId=`sl-tab-panel-${this.attrId}`,this.name="",this.active=!1}connectedCallback(){super.connectedCallback(),this.id=this.id.length>0?this.id:this.componentId,this.setAttribute("role","tabpanel")}handleActiveChange(){this.setAttribute("aria-hidden",this.active?"false":"true")}render(){return x$1`
      <slot
        part="base"
        class=${e$1({"tab-panel":!0,"tab-panel--active":this.active})}
      ></slot>
    `}};SlTabPanel.styles=[component_styles_default,tab_panel_styles_default];__decorateClass([n$4({reflect:!0})],SlTabPanel.prototype,"name",2);__decorateClass([n$4({type:Boolean,reflect:!0})],SlTabPanel.prototype,"active",2);__decorateClass([watch("active")],SlTabPanel.prototype,"handleActiveChange",1);SlTabPanel.define("sl-tab-panel");const _hoisted_1$3={slot:"summary"},_hoisted_2$2={style:{display:"flex",alignItems:"center",gap:"9px"}},_hoisted_3$2=["innerHTML"],_hoisted_4$2=["innerHTML","draggable"],_hoisted_5$2=["innerHTML","draggable"],_sfc_main$6=defineComponent({__name:"Snippet.ce",props:{label:{type:String},tabs:{type:String,default:"markdown,html,preview"},collapsible:{type:Boolean,default:!1},open:{type:Boolean,default:!1},prefix:{type:String},path:{type:String},right:{type:Boolean},left:{type:Boolean},width:{type:String},height:{type:String},fill:{type:Boolean},showActive:{type:Boolean},disableDrag:{type:Boolean},src:{type:String}},setup(nt){const rt=nt,it=ref(null),st=computed(()=>{var Wt;return(Wt=it==null?void 0:it.value)==null?void 0:Wt.parentNode}),_t=computed(()=>{var Wt,Kt;return(Kt=(Wt=it.value)==null?void 0:Wt.getRootNode())==null?void 0:Kt.host}),xt=ref(),Et=ref(),kt=ref(),Lt=ref(),It=ref();watch$1(Et,()=>Yt()),onMounted(()=>{rt.src&&fetch(`https://dev.juncture-digital.org/${rt.src}?fmt=md`).then(Wt=>Wt.text()).then(Wt=>{xt.value=Wt.replace(/>/g,"&gt;").replace(/</g,"&lt;")})}),watch$1(_t,()=>{rt.tabs?It.value=rt.tabs.split(","):It.value=["markdown","html","preview"];let Kt=_t.value.innerHTML.replace(/<pre v-pre="" data-lang="markup"><code class="lang-markup">/,"").replace(/<\/code><\/pre>/,"").split(`
`),Jt=[];if(Kt.forEach(on=>{(on.trim().length>0||Jt.length>0)&&Jt.push(on)}),Jt.length>0){let on=(Jt[0].match(/(^\s+)/)||[""])[0].length;xt.value=Jt.map(rn=>(rn.match(/(^\s+)/)||[""])[0].length>=on?rn.slice(on):rn).join(`
`)}}),watch$1(Lt,()=>{Lt.value!=="markdown"&&Et.value===void 0&&Ft(),Lt.value==="preview"&&nextTick(()=>{initTippy(st.value,!0)}),rt.fill&&Et.value&&nextTick(()=>Bt()),rt.height&&nextTick(()=>Nt())});function Rt(){var Wt;(Wt=st.value)==null||Wt.querySelectorAll("sl-tab").forEach(Kt=>{new MutationObserver(on=>{var ln;let rn=on[0].target;rn.disabled=!((ln=It.value)!=null&&ln.includes(rn.panel)),rn.style.visibility=rn.disabled?"hidden":"visible",rn.active&&(Lt.value=rn.panel)}).observe(Kt,{childList:!0,subtree:!0,attributes:!0})})}watch$1(It,()=>Rt());function Nt(){var Kt;let Wt=(Kt=st.value)==null?void 0:Kt.querySelector('sl-tab-panel[name="preview"]');Lt.value==="preview"&&rt.height&&(Wt.style.height=rt.height)}function Bt(){var Kt,Jt;let Wt=(Kt=st.value)==null?void 0:Kt.querySelector('sl-tab-panel[name="preview"]');if(Lt.value==="preview"){let on=(Jt=st.value)==null?void 0:Jt.querySelector("#juncture"),rn=Wt.clientWidth/2,ln=document.createElement("div");ln.style.height=`${rn}px`;let gn=on.querySelector("ve-footer");gn?on.insertBefore(ln,gn):on.appendChild(ln),Wt.style.height=rt.height||`${Math.max(rn/2,500)}px`,Wt.style.overflowY="scroll"}else Wt.style.height=""}function Ft(){Et.value="",fetch("https://dev.juncture-digital.org/html/",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:`${rt.path||""}`,markdown:xt.value})}).then(Wt=>Wt.text()).then(Wt=>{let Kt=new DOMParser().parseFromString(Wt,"text/html").children[0].children,Jt=Kt[1].querySelector("main");if(Jt){let on=Kt[1].querySelector("style");on&&Jt.insertBefore(on,Jt.firstChild),Et.value=Jt.innerHTML,Lt.value==="preview"&&nextTick(()=>{var rn;rt.fill&&Bt(),initTippy(st.value,!0),observeActive((rn=st.value)==null?void 0:rn.querySelector("#juncture"))})}})}function Yt(){Et.value&&(kt.value="",fetch("https://dev.juncture-digital.org/wxr/",{method:"POST",body:JSON.stringify({prefix:`${rt.prefix||""}`,path:`${rt.path||""}`,html:Et.value})}).then(Wt=>Wt.text()).then(Wt=>kt.value=Wt))}function Zt(Wt){var Jt;let Kt=xt.value;Kt&&((Jt=Wt.dataTransfer)==null||Jt.setData("text/plain",Kt))}return(Wt,Kt)=>{const Jt=resolveComponent("sl-icon"),on=resolveComponent("sl-tooltip"),rn=resolveComponent("sl-tab"),ln=resolveComponent("ve-source-viewer"),gn=resolveComponent("sl-tab-panel"),wn=resolveComponent("sl-tab-pane"),kn=resolveComponent("sl-tab-group"),Cn=resolveComponent("sl-details");return openBlock(),createElementBlock("div",{ref_key:"root",ref:it,id:"main"},[nt.collapsible?(openBlock(),createBlock(Cn,{key:0,class:"custom-icons",open:rt.open,draggable:!rt.disableDrag,onDragstart:Zt},{default:withCtx(()=>[createVNode(Jt,{name:"plus-square",slot:"expand-icon"}),createVNode(Jt,{name:"dash-square",slot:"collapse-icon"}),createBaseVNode("div",_hoisted_1$3,[createVNode(on,{content:"Show code snippets",placement:"top"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$2,[createVNode(Jt,{name:"markdown",style:{"font-size":"24px"}}),createVNode(Jt,{name:"code-slash",style:{"font-size":"24px"}}),createBaseVNode("span",{innerHTML:rt.label,class:"label"},null,8,_hoisted_3$2)])]),_:1})]),createVNode(kn,null,{default:withCtx(()=>[createVNode(rn,{slot:"nav",panel:"markdown"},{default:withCtx(()=>[createVNode(Jt,{name:"markdown"}),Kt[0]||(Kt[0]=createTextVNode("Markdown"))]),_:1,__:[0]}),createVNode(rn,{slot:"nav",panel:"html"},{default:withCtx(()=>[createVNode(Jt,{name:"code-slash"}),Kt[1]||(Kt[1]=createTextVNode("HTML"))]),_:1,__:[1]}),createVNode(rn,{slot:"nav",panel:"wordpress"},{default:withCtx(()=>[createVNode(Jt,{name:"wordpress"}),Kt[2]||(Kt[2]=createTextVNode("Wordpress"))]),_:1,__:[2]}),createVNode(rn,{slot:"nav",panel:"preview"},{default:withCtx(()=>[createVNode(Jt,{name:"eye"}),Kt[3]||(Kt[3]=createTextVNode("Rendered"))]),_:1,__:[3]}),createVNode(gn,{name:"markdown"},{default:withCtx(()=>[xt.value&&Lt.value==="markdown"?(openBlock(),createBlock(ln,{key:0,draggable:!rt.disableDrag},{default:withCtx(()=>[createTextVNode(toDisplayString(xt.value),1)]),_:1},8,["draggable"])):createCommentVNode("",!0)]),_:1}),createVNode(gn,{name:"html"},{default:withCtx(()=>[Lt.value==="html"&&Et.value?(openBlock(),createBlock(ln,{key:0,innerHTML:Et.value,language:"html",draggable:!rt.disableDrag},null,8,["innerHTML","draggable"])):createCommentVNode("",!0)]),_:1}),createVNode(wn,{name:"wordpress"},{default:withCtx(()=>[Lt.value==="wordpress"&&kt.value?(openBlock(),createBlock(ln,{key:0,language:"wxr",draggable:!rt.disableDrag},{default:withCtx(()=>[createTextVNode(toDisplayString(kt.value),1)]),_:1},8,["draggable"])):createCommentVNode("",!0)]),_:1}),createVNode(gn,{name:"preview"},{default:withCtx(()=>[Lt.value==="preview"&&Et.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Et.value,draggable:!rt.disableDrag,onDragstart:Zt},null,40,_hoisted_4$2)):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1},8,["open","draggable"])):(openBlock(),createBlock(kn,{key:1},{default:withCtx(()=>[createVNode(rn,{slot:"nav",panel:"markdown"},{default:withCtx(()=>[createVNode(Jt,{name:"markdown"}),Kt[4]||(Kt[4]=createTextVNode("Markdown"))]),_:1,__:[4]}),createVNode(rn,{slot:"nav",panel:"html"},{default:withCtx(()=>[createVNode(Jt,{name:"code-slash"}),Kt[5]||(Kt[5]=createTextVNode("HTML"))]),_:1,__:[5]}),createVNode(rn,{slot:"nav",panel:"wordpress"},{default:withCtx(()=>[createVNode(Jt,{name:"wordpress"}),Kt[6]||(Kt[6]=createTextVNode("Wordpress"))]),_:1,__:[6]}),createVNode(rn,{slot:"nav",panel:"preview"},{default:withCtx(()=>[createVNode(Jt,{name:"eye"}),Kt[7]||(Kt[7]=createTextVNode("Rendered"))]),_:1,__:[7]}),createVNode(gn,{name:"markdown"},{default:withCtx(()=>[xt.value&&Lt.value==="markdown"?(openBlock(),createBlock(ln,{key:0,draggable:!rt.disableDrag},{default:withCtx(()=>[createTextVNode(toDisplayString(xt.value),1)]),_:1},8,["draggable"])):createCommentVNode("",!0)]),_:1}),createVNode(wn,{name:"html"},{default:withCtx(()=>[Lt.value==="html"&&Et.value?(openBlock(),createBlock(ln,{key:0,innerHTML:Et.value,language:"html",draggable:!rt.disableDrag},null,8,["innerHTML","draggable"])):createCommentVNode("",!0)]),_:1}),createVNode(wn,{name:"wordpress"},{default:withCtx(()=>[Lt.value==="wordpress"&&kt.value?(openBlock(),createBlock(ln,{key:0,language:"wxr",draggable:!rt.disableDrag},{default:withCtx(()=>[createTextVNode(toDisplayString(kt.value),1)]),_:1},8,["draggable"])):createCommentVNode("",!0)]),_:1}),createVNode(gn,{name:"preview"},{default:withCtx(()=>[Lt.value==="preview"&&Et.value?(openBlock(),createElementBlock("div",{key:0,id:"juncture",style:{position:"relative"},innerHTML:Et.value,draggable:!rt.disableDrag,onDragstart:Zt},null,40,_hoisted_5$2)):createCommentVNode("",!0)]),_:1})]),_:1}))],512)}}}),_style_1$2=`*{box-sizing:border-box}:host{display:block;margin-top:1.5rem;border-radius:2px;border:.5px solid #ddd;margin-bottom:2rem}:host([collapsible]){border:none}#main{font-family:Roboto,sans-serif;margin-top:0}sl-tab-panel{--padding: 0}sl-tab::part(base){padding:12px}#juncture{padding:12px;font-size:1.2em;line-height:1.3}sl-details::part(header){background-color:#f9f9f9}sl-details::part(summary){font-size:1rem}sl-details::part(content){border-top:1px solid #ddd;padding:0}sl-details.custom-icons::part(summary-icon){rotate:none}sl-tab sl-icon{font-size:24px;margin-right:6px}.label{margin-left:12px;color:#555;font-weight:400}
`,Snippet=_export_sfc(_sfc_main$6,[["styles",[_style_0$o,_style_1$2]]]);var prism$1={exports:{}};(function(nt){var rt=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var it=function(st){var _t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,xt=0,Et={},kt={manual:st.Prism&&st.Prism.manual,disableWorkerMessageHandler:st.Prism&&st.Prism.disableWorkerMessageHandler,util:{encode:function Jt(on){return on instanceof Lt?new Lt(on.type,Jt(on.content),on.alias):Array.isArray(on)?on.map(Jt):on.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(Jt){return Object.prototype.toString.call(Jt).slice(8,-1)},objId:function(Jt){return Jt.__id||Object.defineProperty(Jt,"__id",{value:++xt}),Jt.__id},clone:function Jt(on,rn){rn=rn||{};var ln,gn;switch(kt.util.type(on)){case"Object":if(gn=kt.util.objId(on),rn[gn])return rn[gn];ln={},rn[gn]=ln;for(var wn in on)on.hasOwnProperty(wn)&&(ln[wn]=Jt(on[wn],rn));return ln;case"Array":return gn=kt.util.objId(on),rn[gn]?rn[gn]:(ln=[],rn[gn]=ln,on.forEach(function(kn,Cn){ln[Cn]=Jt(kn,rn)}),ln);default:return on}},getLanguage:function(Jt){for(;Jt;){var on=_t.exec(Jt.className);if(on)return on[1].toLowerCase();Jt=Jt.parentElement}return"none"},setLanguage:function(Jt,on){Jt.className=Jt.className.replace(RegExp(_t,"gi"),""),Jt.classList.add("language-"+on)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT"&&1<2)return document.currentScript;try{throw new Error}catch(ln){var Jt=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(ln.stack)||[])[1];if(Jt){var on=document.getElementsByTagName("script");for(var rn in on)if(on[rn].src==Jt)return on[rn]}return null}},isActive:function(Jt,on,rn){for(var ln="no-"+on;Jt;){var gn=Jt.classList;if(gn.contains(on))return!0;if(gn.contains(ln))return!1;Jt=Jt.parentElement}return!!rn}},languages:{plain:Et,plaintext:Et,text:Et,txt:Et,extend:function(Jt,on){var rn=kt.util.clone(kt.languages[Jt]);for(var ln in on)rn[ln]=on[ln];return rn},insertBefore:function(Jt,on,rn,ln){ln=ln||kt.languages;var gn=ln[Jt],wn={};for(var kn in gn)if(gn.hasOwnProperty(kn)){if(kn==on)for(var Cn in rn)rn.hasOwnProperty(Cn)&&(wn[Cn]=rn[Cn]);rn.hasOwnProperty(kn)||(wn[kn]=gn[kn])}var Pn=ln[Jt];return ln[Jt]=wn,kt.languages.DFS(kt.languages,function(An,cn){cn===Pn&&An!=Jt&&(this[An]=wn)}),wn},DFS:function Jt(on,rn,ln,gn){gn=gn||{};var wn=kt.util.objId;for(var kn in on)if(on.hasOwnProperty(kn)){rn.call(on,kn,on[kn],ln||kn);var Cn=on[kn],Pn=kt.util.type(Cn);Pn==="Object"&&!gn[wn(Cn)]?(gn[wn(Cn)]=!0,Jt(Cn,rn,null,gn)):Pn==="Array"&&!gn[wn(Cn)]&&(gn[wn(Cn)]=!0,Jt(Cn,rn,kn,gn))}}},plugins:{},highlightAll:function(Jt,on){kt.highlightAllUnder(document,Jt,on)},highlightAllUnder:function(Jt,on,rn){var ln={callback:rn,container:Jt,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};kt.hooks.run("before-highlightall",ln),ln.elements=Array.prototype.slice.apply(ln.container.querySelectorAll(ln.selector)),kt.hooks.run("before-all-elements-highlight",ln);for(var gn=0,wn;wn=ln.elements[gn++];)kt.highlightElement(wn,on===!0,ln.callback)},highlightElement:function(Jt,on,rn){var ln=kt.util.getLanguage(Jt),gn=kt.languages[ln];kt.util.setLanguage(Jt,ln);var wn=Jt.parentElement;wn&&wn.nodeName.toLowerCase()==="pre"&&kt.util.setLanguage(wn,ln);var kn=Jt.textContent,Cn={element:Jt,language:ln,grammar:gn,code:kn};function Pn(cn){Cn.highlightedCode=cn,kt.hooks.run("before-insert",Cn),Cn.element.innerHTML=Cn.highlightedCode,kt.hooks.run("after-highlight",Cn),kt.hooks.run("complete",Cn),rn&&rn.call(Cn.element)}if(kt.hooks.run("before-sanity-check",Cn),wn=Cn.element.parentElement,wn&&wn.nodeName.toLowerCase()==="pre"&&!wn.hasAttribute("tabindex")&&wn.setAttribute("tabindex","0"),!Cn.code){kt.hooks.run("complete",Cn),rn&&rn.call(Cn.element);return}if(kt.hooks.run("before-highlight",Cn),!Cn.grammar){Pn(kt.util.encode(Cn.code));return}if(on&&st.Worker){var An=new Worker(kt.filename);An.onmessage=function(cn){Pn(cn.data)},An.postMessage(JSON.stringify({language:Cn.language,code:Cn.code,immediateClose:!0}))}else Pn(kt.highlight(Cn.code,Cn.grammar,Cn.language))},highlight:function(Jt,on,rn){var ln={code:Jt,grammar:on,language:rn};if(kt.hooks.run("before-tokenize",ln),!ln.grammar)throw new Error('The language "'+ln.language+'" has no grammar.');return ln.tokens=kt.tokenize(ln.code,ln.grammar),kt.hooks.run("after-tokenize",ln),Lt.stringify(kt.util.encode(ln.tokens),ln.language)},tokenize:function(Jt,on){var rn=on.rest;if(rn){for(var ln in rn)on[ln]=rn[ln];delete on.rest}var gn=new Nt;return Bt(gn,gn.head,Jt),Rt(Jt,gn,on,gn.head,0),Yt(gn)},hooks:{all:{},add:function(Jt,on){var rn=kt.hooks.all;rn[Jt]=rn[Jt]||[],rn[Jt].push(on)},run:function(Jt,on){var rn=kt.hooks.all[Jt];if(!(!rn||!rn.length))for(var ln=0,gn;gn=rn[ln++];)gn(on)}},Token:Lt};st.Prism=kt;function Lt(Jt,on,rn,ln){this.type=Jt,this.content=on,this.alias=rn,this.length=(ln||"").length|0}Lt.stringify=function Jt(on,rn){if(typeof on=="string")return on;if(Array.isArray(on)){var ln="";return on.forEach(function(Pn){ln+=Jt(Pn,rn)}),ln}var gn={type:on.type,content:Jt(on.content,rn),tag:"span",classes:["token",on.type],attributes:{},language:rn},wn=on.alias;wn&&(Array.isArray(wn)?Array.prototype.push.apply(gn.classes,wn):gn.classes.push(wn)),kt.hooks.run("wrap",gn);var kn="";for(var Cn in gn.attributes)kn+=" "+Cn+'="'+(gn.attributes[Cn]||"").replace(/"/g,"&quot;")+'"';return"<"+gn.tag+' class="'+gn.classes.join(" ")+'"'+kn+">"+gn.content+"</"+gn.tag+">"};function It(Jt,on,rn,ln){Jt.lastIndex=on;var gn=Jt.exec(rn);if(gn&&ln&&gn[1]){var wn=gn[1].length;gn.index+=wn,gn[0]=gn[0].slice(wn)}return gn}function Rt(Jt,on,rn,ln,gn,wn){for(var kn in rn)if(!(!rn.hasOwnProperty(kn)||!rn[kn])){var Cn=rn[kn];Cn=Array.isArray(Cn)?Cn:[Cn];for(var Pn=0;Pn<Cn.length;++Pn){if(wn&&wn.cause==kn+","+Pn)return;var An=Cn[Pn],cn=An.inside,Ln=!!An.lookbehind,an=!!An.greedy,zn=An.alias;if(an&&!An.pattern.global){var dn=An.pattern.toString().match(/[imsuy]*$/)[0];An.pattern=RegExp(An.pattern.source,dn+"g")}for(var Fn=An.pattern||An,ir=ln.next,tr=gn;ir!==on.tail&&!(wn&&tr>=wn.reach);tr+=ir.value.length,ir=ir.next){var Jn=ir.value;if(on.length>Jt.length)return;if(!(Jn instanceof Lt)){var hr=1,lr;if(an){if(lr=It(Fn,tr,Jt,Ln),!lr||lr.index>=Jt.length)break;var ar=lr.index,cr=lr.index+lr[0].length,Cr=tr;for(Cr+=ir.value.length;ar>=Cr;)ir=ir.next,Cr+=ir.value.length;if(Cr-=ir.value.length,tr=Cr,ir.value instanceof Lt)continue;for(var Er=ir;Er!==on.tail&&(Cr<cr||typeof Er.value=="string");Er=Er.next)hr++,Cr+=Er.value.length;hr--,Jn=Jt.slice(tr,Cr),lr.index-=tr}else if(lr=It(Fn,0,Jn,Ln),!lr)continue;var ar=lr.index,Fr=lr[0],mr=Jn.slice(0,ar),xr=Jn.slice(ar+Fr.length),fr=tr+Jn.length;wn&&fr>wn.reach&&(wn.reach=fr);var gr=ir.prev;mr&&(gr=Bt(on,gr,mr),tr+=mr.length),Ft(on,gr,hr);var er=new Lt(kn,cn?kt.tokenize(Fr,cn):Fr,zn,Fr);if(ir=Bt(on,gr,er),xr&&Bt(on,ir,xr),hr>1){var nn={cause:kn+","+Pn,reach:fr};Rt(Jt,on,rn,ir.prev,tr,nn),wn&&nn.reach>wn.reach&&(wn.reach=nn.reach)}}}}}}function Nt(){var Jt={value:null,prev:null,next:null},on={value:null,prev:Jt,next:null};Jt.next=on,this.head=Jt,this.tail=on,this.length=0}function Bt(Jt,on,rn){var ln=on.next,gn={value:rn,prev:on,next:ln};return on.next=gn,ln.prev=gn,Jt.length++,gn}function Ft(Jt,on,rn){for(var ln=on.next,gn=0;gn<rn&&ln!==Jt.tail;gn++)ln=ln.next;on.next=ln,ln.prev=on,Jt.length-=gn}function Yt(Jt){for(var on=[],rn=Jt.head.next;rn!==Jt.tail;)on.push(rn.value),rn=rn.next;return on}if(!st.document)return st.addEventListener&&(kt.disableWorkerMessageHandler||st.addEventListener("message",function(Jt){var on=JSON.parse(Jt.data),rn=on.language,ln=on.code,gn=on.immediateClose;st.postMessage(kt.highlight(ln,kt.languages[rn],rn)),gn&&st.close()},!1)),kt;var Zt=kt.util.currentScript();Zt&&(kt.filename=Zt.src,Zt.hasAttribute("data-manual")&&(kt.manual=!0));function Wt(){kt.manual||kt.highlightAll()}if(!kt.manual){var Kt=document.readyState;Kt==="loading"||Kt==="interactive"&&Zt&&Zt.defer?document.addEventListener("DOMContentLoaded",Wt):window.requestAnimationFrame?window.requestAnimationFrame(Wt):window.setTimeout(Wt,16)}return kt}(rt);nt.exports&&(nt.exports=it),typeof commonjsGlobal$1<"u"&&(commonjsGlobal$1.Prism=it),it.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},it.languages.markup.tag.inside["attr-value"].inside.entity=it.languages.markup.entity,it.languages.markup.doctype.inside["internal-subset"].inside=it.languages.markup,it.hooks.add("wrap",function(st){st.type==="entity"&&(st.attributes.title=st.content.replace(/&amp;/,"&"))}),Object.defineProperty(it.languages.markup.tag,"addInlined",{value:function(_t,xt){var Et={};Et["language-"+xt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:it.languages[xt]},Et.cdata=/^<!\[CDATA\[|\]\]>$/i;var kt={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Et}};kt["language-"+xt]={pattern:/[\s\S]+/,inside:it.languages[xt]};var Lt={};Lt[_t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return _t}),"i"),lookbehind:!0,greedy:!0,inside:kt},it.languages.insertBefore("markup","cdata",Lt)}}),Object.defineProperty(it.languages.markup.tag,"addAttribute",{value:function(st,_t){it.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+st+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[_t,"language-"+_t],inside:it.languages[_t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),it.languages.html=it.languages.markup,it.languages.mathml=it.languages.markup,it.languages.svg=it.languages.markup,it.languages.xml=it.languages.extend("markup",{}),it.languages.ssml=it.languages.xml,it.languages.atom=it.languages.xml,it.languages.rss=it.languages.xml,function(st){var _t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;st.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+_t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+_t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+_t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+_t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:_t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},st.languages.css.atrule.inside.rest=st.languages.css;var xt=st.languages.markup;xt&&(xt.tag.addInlined("style","css"),xt.tag.addAttribute("style","css"))}(it),it.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},it.languages.javascript=it.languages.extend("clike",{"class-name":[it.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),it.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,it.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:it.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:it.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:it.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:it.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:it.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),it.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:it.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),it.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),it.languages.markup&&(it.languages.markup.tag.addInlined("script","javascript"),it.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),it.languages.js=it.languages.javascript,function(){if(typeof it>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var st="Loading\u2026",_t=function(Zt,Wt){return"\u2716 Error "+Zt+" while fetching file: "+Wt},xt="\u2716 Error: File does not exist or is empty",Et={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},kt="data-src-status",Lt="loading",It="loaded",Rt="failed",Nt="pre[data-src]:not(["+kt+'="'+It+'"]):not(['+kt+'="'+Lt+'"])';function Bt(Zt,Wt,Kt){var Jt=new XMLHttpRequest;Jt.open("GET",Zt,!0),Jt.onreadystatechange=function(){Jt.readyState==4&&(Jt.status<400&&Jt.responseText?Wt(Jt.responseText):Jt.status>=400?Kt(_t(Jt.status,Jt.statusText)):Kt(xt))},Jt.send(null)}function Ft(Zt){var Wt=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(Zt||"");if(Wt){var Kt=Number(Wt[1]),Jt=Wt[2],on=Wt[3];return Jt?on?[Kt,Number(on)]:[Kt,void 0]:[Kt,Kt]}}it.hooks.add("before-highlightall",function(Zt){Zt.selector+=", "+Nt}),it.hooks.add("before-sanity-check",function(Zt){var Wt=Zt.element;if(Wt.matches(Nt)){Zt.code="",Wt.setAttribute(kt,Lt);var Kt=Wt.appendChild(document.createElement("CODE"));Kt.textContent=st;var Jt=Wt.getAttribute("data-src"),on=Zt.language;if(on==="none"){var rn=(/\.(\w+)$/.exec(Jt)||[,"none"])[1];on=Et[rn]||rn}it.util.setLanguage(Kt,on),it.util.setLanguage(Wt,on);var ln=it.plugins.autoloader;ln&&ln.loadLanguages(on),Bt(Jt,function(gn){Wt.setAttribute(kt,It);var wn=Ft(Wt.getAttribute("data-range"));if(wn){var kn=gn.split(/\r\n?|\n/g),Cn=wn[0],Pn=wn[1]==null?kn.length:wn[1];Cn<0&&(Cn+=kn.length),Cn=Math.max(0,Math.min(Cn-1,kn.length)),Pn<0&&(Pn+=kn.length),Pn=Math.max(0,Math.min(Pn,kn.length)),gn=kn.slice(Cn,Pn).join(`
`),Wt.hasAttribute("data-start")||Wt.setAttribute("data-start",String(Cn+1))}Kt.textContent=gn,it.highlightElement(Kt)},function(gn){Wt.setAttribute(kt,Rt),Kt.textContent=gn})}}),it.plugins.fileHighlight={highlight:function(Wt){for(var Kt=(Wt||document).querySelectorAll(Nt),Jt=0,on;on=Kt[Jt++];)it.highlightElement(on)}};var Yt=!1;it.fileHighlight=function(){Yt||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),Yt=!0),it.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(prism$1);const Prism$1=prism$1.exports;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(nt){nt.type==="entity"&&(nt.attributes.title=nt.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function nt(rt,it){var st={};st["language-"+it]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[it]},st.cdata=/^<!\[CDATA\[|\]\]>$/i;var _t={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:st}};_t["language-"+it]={pattern:/[\s\S]+/,inside:Prism.languages[it]};var xt={};xt[rt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return rt}),"i"),lookbehind:!0,greedy:!0,inside:_t},Prism.languages.insertBefore("markup","cdata",xt)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(nt,rt){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+nt+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[rt,"language-"+rt],inside:Prism.languages[rt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(nt){var rt=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function it(Rt){return Rt=Rt.replace(/<inner>/g,function(){return rt}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+Rt+")")}var st=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,_t=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return st}),xt=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;nt.languages.markdown=nt.languages.extend("markup",{}),nt.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:nt.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+_t+xt+"(?:"+_t+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+_t+xt+")(?:"+_t+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(st),inside:nt.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+_t+")"+xt+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+_t+"$"),inside:{"table-header":{pattern:RegExp(st),alias:"important",inside:nt.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:it(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:it(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:it(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:it(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(Rt){["url","bold","italic","strike","code-snippet"].forEach(function(Nt){Rt!==Nt&&(nt.languages.markdown[Rt].inside.content.inside[Nt]=nt.languages.markdown[Nt])})}),nt.hooks.add("after-tokenize",function(Rt){if(Rt.language!=="markdown"&&Rt.language!=="md")return;function Nt(Bt){if(!(!Bt||typeof Bt=="string"))for(var Ft=0,Yt=Bt.length;Ft<Yt;Ft++){var Zt=Bt[Ft];if(Zt.type!=="code"){Nt(Zt.content);continue}var Wt=Zt.content[1],Kt=Zt.content[3];if(Wt&&Kt&&Wt.type==="code-language"&&Kt.type==="code-block"&&typeof Wt.content=="string"){var Jt=Wt.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");Jt=(/[a-z][\w-]*/i.exec(Jt)||[""])[0].toLowerCase();var on="language-"+Jt;Kt.alias?typeof Kt.alias=="string"?Kt.alias=[Kt.alias,on]:Kt.alias.push(on):Kt.alias=[on]}}}Nt(Rt.tokens)}),nt.hooks.add("wrap",function(Rt){if(Rt.type==="code-block"){for(var Nt="",Bt=0,Ft=Rt.classes.length;Bt<Ft;Bt++){var Yt=Rt.classes[Bt],Zt=/language-(.+)/.exec(Yt);if(Zt){Nt=Zt[1];break}}var Wt=nt.languages[Nt];if(Wt)Rt.content=nt.highlight(It(Rt.content),Wt,Nt);else if(Nt&&Nt!=="none"&&nt.plugins.autoloader){var Kt="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);Rt.attributes.id=Kt,nt.plugins.autoloader.loadLanguages(Nt,function(){var Jt=document.getElementById(Kt);Jt&&(Jt.innerHTML=nt.highlight(Jt.textContent,nt.languages[Nt],Nt))})}}});var Et=RegExp(nt.languages.markup.tag.pattern.source,"gi"),kt={amp:"&",lt:"<",gt:">",quot:'"'},Lt=String.fromCodePoint||String.fromCharCode;function It(Rt){var Nt=Rt.replace(Et,"");return Nt=Nt.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(Bt,Ft){if(Ft=Ft.toLowerCase(),Ft[0]==="#"){var Yt;return Ft[1]==="x"?Yt=parseInt(Ft.slice(2),16):Yt=Number(Ft.slice(1)),Lt(Yt)}else{var Zt=kt[Ft];return Zt||Bt}}),Nt}nt.languages.md=nt.languages.markdown})(Prism);(function(nt){function rt(xt,Et){nt.languages[xt]&&nt.languages.insertBefore(xt,"comment",{"doc-comment":Et})}var it=nt.languages.markup.tag,st={pattern:/\/\/\/.*/,greedy:!0,alias:"comment",inside:{tag:it}},_t={pattern:/'''.*/,greedy:!0,alias:"comment",inside:{tag:it}};rt("csharp",st),rt("fsharp",st),rt("vbnet",_t)})(Prism);const prism="",_hoisted_1$2=["draggable"],_hoisted_2$1={key:0,id:"juncture",class:"language-juncture",style:{margin:"0","white-space":"pre-wrap","word-wrap":"break-word"}},_hoisted_3$1=["innerHTML"],_hoisted_4$1={key:1,id:"html",class:"language-markup",style:{margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word"}},_hoisted_5$1={key:2,id:"wxr",class:"language-xml"},_sfc_main$5=defineComponent({__name:"SourceViewer.ce",props:{src:{type:String},language:{type:String,default:"juncture"},draggable:{type:Boolean,default:!0}},setup(nt){const rt=ref(null),it=computed(()=>{var Rt,Nt;return(Nt=(Rt=rt.value)==null?void 0:Rt.getRootNode())==null?void 0:Nt.host}),st=computed(()=>{var Rt;return(Rt=rt==null?void 0:rt.value)==null?void 0:Rt.parentNode}),_t=nt,xt=ref();watch$1(it,()=>{var Nt;let Rt=(Nt=it.value)==null?void 0:Nt.innerHTML.trim();Rt&&(xt.value=_t.language==="html"?kt(Rt):`
${Rt}`)}),watch$1(xt,()=>{var Nt,Bt;xt.value=(Nt=xt.value)==null?void 0:Nt.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");let Rt=(Bt=st.value)==null?void 0:Bt.querySelector(`#${_t.language}`);Rt&&xt.value&&nextTick(()=>{Prism$1.highlightElement(Rt)})}),onMounted(()=>{_t.src&&fetch(`https://dev.juncture-digital.org/${_t.src}?fmt=md`).then(Rt=>Rt.text()).then(Rt=>{Rt=Rt.replace(/>/g,"&gt;").replace(/</g,"&lt;"),xt.value=_t.language==="html"?kt(Rt):`
${Rt}`})}),Prism$1.languages.juncture=Prism$1.languages.extend("markdown",{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+.+/,greedy:!0,inside:{"juncture-tag":{pattern:/\.ve-[a-z0-9-]+/},string:[{pattern:/[^=]\"(\\.|[^\"])*\"/,alias:"attr-value"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],"manifest-url":[{pattern:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,inside:{url:/\s+[a-z]+:[a-z0-9-_,%'\/\.]+/i,punctuation:/\s+/}}],position:[{pattern:/\s+(full|left|right|sticky)/,alias:"boolean"}],"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},marked:[{pattern:/==[^=]+=={[^}]+}/,alias:"class-name"}],qid:[{pattern:/Q[0-9]+/,alias:"entity"}],reference:[{pattern:/\[\^[^\]]+\]:?\s*/,alias:"class-name"}]});function Et(Rt){for(var Nt="",Bt=Rt*2;Bt--;)Nt+=" ";return Nt}function kt(Rt){Rt=Rt.trim().replace(/&amp;/g,"&");let Nt="",Bt=0,Ft=Rt.split(/</);for(var Yt=0,Zt=Ft.length;Yt<Zt;Yt++){var Wt=Ft[Yt].split(/>/);Wt.length===2?(Ft[Yt][0]==="/"&&Bt--,Nt+=Et(Bt),Ft[Yt][0]!=="/"&&Bt++,Yt>0&&(Nt+="<"),Nt+=Wt[0].trim()+`>
`,Wt[1].trim()!==""&&(Nt+=Et(Bt)+Wt[1].trim().replace(/\s+/g," ")+`
`),Wt[0].match(/^(img|hr|br)/)&&Bt--):Nt+=Et(Bt)+Wt[0]+`
`}return Nt.replace(/\s+<mark([^>]*>)\s+/gm," <mark$1").replace(/\s+<\/mark>\s+/mg,"</mark> ").replace(/<a([^>]*>)\s+/gm," <a$1").replace(/\s+<\/a>/mg,"</a> ").replace(/=""/g,"").replace(/(<ve-[^>]+>)\s(<\/ve-[^>]+>\n)/g,`$1$2
`).replace(/<p>\s+/g,"<p>").replace(/\s+<\/p>\s+/g,`</p>
`).replace(/<ve-/g,`
<ve-`).replace(/ anno-base="undefined\/"/g,"").replace(/^\n\n/g,`
`)}function Lt(){var Rt,Nt;if(navigator.clipboard){let Bt=(((Rt=xt.value)==null?void 0:Rt.trim())||"").replace(/&lt;/g,"<").replace(/&gt;/g,">");navigator.clipboard.writeText(Bt);const Ft=(Nt=st.value)==null?void 0:Nt.querySelector("sl-tooltip");Ft&&(Ft.open=!0,setTimeout(()=>Ft.open=!1,1e3))}}function It(Rt){var Bt;let Nt=xt.value;Nt&&((Bt=Rt.dataTransfer)==null||Bt.setData("text/plain",Nt))}return(Rt,Nt)=>{const Bt=resolveComponent("sl-button"),Ft=resolveComponent("sl-tooltip");return openBlock(),createElementBlock("div",{ref_key:"root",ref:rt,class:"main",style:{width:"100%",height:"100%"},draggable:_t.draggable,onDragstart:It},[nt.language==="juncture"?(openBlock(),createElementBlock("pre",_hoisted_2$1,[Nt[0]||(Nt[0]=createTextVNode("    ")),createBaseVNode("code",{innerHTML:xt.value},null,8,_hoisted_3$1),Nt[1]||(Nt[1]=createTextVNode(`
  `))])):createCommentVNode("",!0),nt.language==="html"?(openBlock(),createElementBlock("pre",_hoisted_4$1,[Nt[2]||(Nt[2]=createTextVNode("    ")),createBaseVNode("code",null,toDisplayString(xt.value),1)])):createCommentVNode("",!0),nt.language==="wxr"?(openBlock(),createElementBlock("pre",_hoisted_5$1,[createBaseVNode("code",null,toDisplayString(xt.value),1)])):createCommentVNode("",!0),createVNode(Ft,{content:"Text copied to clipboard",placement:"top",hoist:"",trigger:"manual",style:{"--sl-tooltip-arrow-size":"0"}},{default:withCtx(()=>[createVNode(Bt,{class:"copy-button",onClick:Lt},{default:withCtx(()=>Nt[3]||(Nt[3]=[createTextVNode("Copy Text")])),_:1,__:[3]})]),_:1})],40,_hoisted_1$2)}}}),_style_0$2=`code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function,.token.class-name{color:#dd4a68}.token.regex,.token.important,.token.variable{color:#e90}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
`,_style_1$1=`*{box-sizing:border-box}.main{font-size:.8em;position:relative}.main pre{background-color:#f9f9f9;font-size:1rem}.main:hover .copy-button{opacity:1}.copy-button{position:absolute;top:10px;right:10px;opacity:0;transition:all .3s ease-in}.juncture-tag{color:#905}
`,SourceViewer=_export_sfc(_sfc_main$5,[["styles",[_style_0$2,_style_1$1]]]),_sfc_main$4=defineComponent({__name:"Spacer.ce",props:{height:{type:String,default:"50vh"}},setup(nt){const rt=nt;return(it,st)=>(openBlock(),createElementBlock("div",{style:normalizeStyle({height:rt.height})},null,4))}}),_sfc_main$3=defineComponent({__name:"Starter.ce",props:{id:{type:String},numProp:{type:Number,default:0},boolProp:{type:Boolean}},emits:["custom-event"],setup(nt,{expose:rt,emit:it}){const st=it;rt({increment:Rt});const xt=ref(nt.numProp),Et=ref(null),kt=computed(()=>{var Nt;return(Nt=Et==null?void 0:Et.value)==null?void 0:Nt.parentNode}),Lt=computed(()=>{var Nt,Bt;return(Bt=(Nt=Et.value)==null?void 0:Nt.getRootNode())==null?void 0:Bt.host});watch$1(Lt,()=>It()),watch$1(xt,()=>st("custom-event",xt.value));function It(){var Nt;console.log(Lt.value),console.log((Nt=kt.value)==null?void 0:Nt.querySelector("h1")),setTimeout(()=>Rt(),2e3)}function Rt(){++xt.value}return(Nt,Bt)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Et,class:"main"}," <ve-starter></ve-starter> ",512))}}),_style_0$1=`.main{color:red}
`,Starter=_export_sfc(_sfc_main$3,[["styles",[_style_0$1]]]),_hoisted_1$1=["innerHTML"],_sfc_main$2=defineComponent({__name:"Version.ce",setup(nt){const rt=ref("2.0.0-beta.31");return(it,st)=>(openBlock(),createElementBlock("span",{innerHTML:rt.value},null,8,_hoisted_1$1))}}),_hoisted_1={id:"autocompleteContainer",class:"autocomplete__container",role:"combobox"},_hoisted_2={id:"autocompleteResults",class:"autocomplete__results",role:"listbox"},_hoisted_3=["onClick"],_hoisted_4=["innerHTML"],_hoisted_5={key:0,class:"aliases"},_hoisted_6=["innerHTML"],_sfc_main$1=defineComponent({__name:"WikidataSearch.ce",props:{language:{type:String,default:"en"}},emits:["entity-selected"],setup(nt,{emit:rt}){const it=rt,st=nt,_t=ref([]),xt=ref(),Et=ref(),kt=ref(),Lt=ref(),It=ref(0),Rt=ref(!1),Nt=ref(""),Bt=ref(!1),Ft=ref(null),Yt=computed(()=>{var wn;return(wn=Ft==null?void 0:Ft.value)==null?void 0:wn.parentNode}),Zt=computed(()=>{var wn,kn;return(kn=(wn=Ft.value)==null?void 0:wn.getRootNode())==null?void 0:kn.host});watch$1(Zt,()=>Wt()),watch$1(Rt,wn=>{var kn,Cn,Pn,An,cn,Ln,an;wn?((kn=xt.value)==null||kn.classList.add("visible"),(Cn=Et.value)==null||Cn.classList.add("expanded"),(Pn=kt.value)==null||Pn.setAttribute("aria-expanded","true")):((An=xt.value)==null||An.classList.remove("visible"),(cn=Et.value)==null||cn.classList.remove("expanded"),(Ln=kt.value)==null||Ln.setAttribute("aria-expanded","false"),(an=Lt.value)==null||an.setAttribute("aria-activedescendant",""))}),watch$1(Nt,()=>{_t.value=[],It.value=0,ln()});function Wt(){var wn,kn,Cn,Pn;xt.value=(wn=Yt.value)==null?void 0:wn.querySelector("#autocompleteResults"),Lt.value=(kn=Yt.value)==null?void 0:kn.querySelector("#autocompleteInput"),Et.value=(Cn=Yt.value)==null?void 0:Cn.querySelector("#autocompleteDropdownArrow"),kt.value=(Pn=Yt.value)==null?void 0:Pn.querySelector("#autocompleteContainer")}function Kt(){Lt.value&&(Lt.value.value=""),_t.value=[],It.value=0,Rt.value=!1}let Jt=null;function on(){Jt!==null&&(clearTimeout(Jt),Jt=null),Jt=window.setTimeout(()=>{Lt.value&&(Nt.value=Lt.value.value.trim()),Jt=null},500)}function rn(){Rt.value=!Rt.value}function ln(){if(!Nt.value||Bt.value)return;Bt.value=!0;let wn=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${Nt.value}&uselang=${st.language}&language=${st.language}&format=json&origin=*&continue=${It.value}`;fetch(wn).then(kn=>kn.json()).then(kn=>{It.value=kn["search-continue"],_t.value=[..._t.value,...kn.search],Rt.value=!0}).catch(kn=>{console.log(kn)}).finally(()=>Bt.value=!1)}function gn(wn){it("entity-selected",wn),Kt()}return(wn,kn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:Ft,class:"wikidata-search"},[createBaseVNode("div",_hoisted_1,[createBaseVNode("input",{id:"autocompleteInput",class:"autocomplete__input",onKeyup:on,autocomplete:"off",role:"textbox",placeholder:"Search for entity"},null,32),createBaseVNode("button",{id:"autocompleteDropdownArrow",class:"autocomplete__dropdown-arrow",style:normalizeStyle({visibility:_t.value.length>0?"visible":"hidden"}),onClick:rn,"aria-label":"toggle dropdown"},kn[0]||(kn[0]=[createBaseVNode("svg",{"fill-rule":"evenodd",height:"5",viewBox:"0 0 10 5",width:"10"},[createBaseVNode("title",null,"Open drop down"),createBaseVNode("path",{d:"M10 0L5 5 0 0z"})],-1)]),4),createBaseVNode("ul",_hoisted_2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_t.value,(Cn,Pn)=>(openBlock(),createElementBlock("li",{key:`result-${Pn}`,onClick:An=>gn(Cn)},[createBaseVNode("ul",null,[createBaseVNode("li",null,[createBaseVNode("span",{class:"label",innerHTML:Cn.label},null,8,_hoisted_4),Cn.aliases?(openBlock(),createElementBlock("span",_hoisted_5,"({item.aliases.join(', ')})")):createCommentVNode("",!0)]),createBaseVNode("li",{class:"description",innerHTML:Cn.description},null,8,_hoisted_6)])],8,_hoisted_3))),128)),It.value?(openBlock(),createElementBlock("li",{key:0,onClick:ln,class:"continue"},"More...")):createCommentVNode("",!0)])])],512))}}),_style_0=`:host{font-family:Roboto,sans-serif}*{box-sizing:border-box}.autocomplete__container{display:flex;position:relative;align-items:center;justify-content:flex-end;float:left;width:100%;max-width:500px;height:100%}textarea:focus,input:focus{outline:none}.wikidata-search{display:inline-block;height:calc(1.5em + .75rem + 2px);margin-right:3px;border:1px solid #ccc;border-radius:3px;width:100%;background-color:#fff}.wikidata-search i{padding-left:6px;font-size:1.2rem;color:#333}.autocomplete__results.visible{visibility:visible;min-width:320px}.autocomplete__input{display:block;width:100%;min-width:220px;height:100%;border:none;padding-left:.5rem;border-radius:3px;font-size:1.1rem}.autocomplete__input:focus{border-color:#284fa4}.autocomplete__dropdown-arrow{position:absolute;right:0;top:0;background:transparent;border:none;cursor:pointer;height:100%;transition:transform .2s linear}.autocomplete__dropdown-arrow.expanded{transform:rotate(-180deg)}.autocomplete__results{visibility:hidden;position:absolute;top:100%;margin-top:0;width:100%;overflow-y:auto;border:1px solid #999;padding:0;max-height:400px;background:white;z-index:500}.autocomplete__results>li{list-style:none;padding:.3rem .5rem;cursor:pointer;color:#000}.autocomplete__results ul{list-style-type:none;padding-left:0}.autocomplete__results>li:hover{background:hsl(212,10%,60%)}.autocomplete__results>li:focus{background:hsl(212,10%,70%)}.label{font-weight:700}.aliases{font-style:italic}.description{font-size:.9rem;padding:2px 0}.continue{font-weight:700;background-color:#ddd}.search{display:grid;border-radius:0;background-color:#555;color:#fff;width:100%;align-items:center}
`,WikidataSearch=_export_sfc(_sfc_main$1,[["styles",[_style_0]]]),_sfc_main=defineComponent({__name:"Window.ce",props:{href:{type:String},width:{type:Number},height:{type:Number},top:{type:Number,default:0},left:{type:Number,default:0},buttonLabel:{type:String,default:"Open"},buttonIcon:{type:String}},setup(nt){const rt=window,it=nt,st=ref(null);function _t(){it.width;let xt=it.height||Math.min(window.innerHeight,1600);rt.junctureWindow&&rt.junctureWindow.close();let Et=`toolbar=yes,location=yes,left=${it.left},top=${it.top},width=${it.width},height=${xt},scrollbars=yes,status=yes`;rt.junctureWindow=window.open(it.href,"_blank",Et)}return(xt,Et)=>{const kt=resolveComponent("sl-icon"),Lt=resolveComponent("sl-button");return openBlock(),createBlock(Lt,{ref_key:"root",ref:st,onClick:_t},{default:withCtx(()=>[it.buttonIcon?(openBlock(),createBlock(kt,{key:0,slot:"prefix",name:it.buttonIcon},null,8,["name"])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(it.buttonLabel),1)]),_:1},512)}}}),_style_1=`:host{display:inline-block}
`,Window=_export_sfc(_sfc_main,[["styles",[_style_0$o,_style_1]]]);setBasePath("https://raw.githubusercontent.com//juncture-digital/web-components/main/src");console.log("juncture.web-components: version=2.0.0-beta.31");function init(){customElements.define("ve-add-media-resource-dialog",defineCustomElement(AddMediaResourceDialog)),customElements.define("ve-auth",defineCustomElement(Auth)),customElements.define("ve-button",defineCustomElement(Button)),customElements.define("ve-contact",defineCustomElement(Contact)),customElements.define("ve-content-selector",defineCustomElement(ContentSelector)),customElements.define("ve-entities",defineCustomElement(Entities)),customElements.define("ve-entity-card",defineCustomElement(EntityCard)),customElements.define("ve-essay",defineCustomElement(Essay)),customElements.define("ve-fab",defineCustomElement(FAB)),customElements.define("ve-footer",defineCustomElement(Footer)),customElements.define("ve-header",defineCustomElement(Header)),customElements.define("ve-gif",defineCustomElement(GIF)),customElements.define("ve-hero",defineCustomElement(Hero)),customElements.define("ve-iframe",defineCustomElement(IFrame)),customElements.define("ve-info-card",defineCustomElement(InfoCard)),customElements.define("ve-manifest",defineCustomElement(Manifest)),customElements.define("ve-manifest-popup",defineCustomElement(ManifestPopup)),customElements.define("ve-map",defineCustomElement(Map$3)),customElements.define("ve-media",defineCustomElement(MediaViewer)),customElements.define("ve-media-card",defineCustomElement(MediaCard)),customElements.define("ve-media-selector",defineCustomElement(MediaSelector)),customElements.define("ve-menu",defineCustomElement(Menu)),customElements.define("ve-mermaid",defineCustomElement(Mermaid)),customElements.define("ve-modal",defineCustomElement(Modal)),customElements.define("ve-navbar",defineCustomElement(Navbar)),customElements.define("ve-pager",defineCustomElement(Pager)),customElements.define("ve-plant-specimen",defineCustomElement(_sfc_main$8)),customElements.define("ve-snippet",defineCustomElement(Snippet)),customElements.define("ve-source-viewer",defineCustomElement(SourceViewer)),customElements.define("ve-site-search",defineCustomElement(SiteSearch)),customElements.define("ve-spacer",defineCustomElement(_sfc_main$4)),customElements.define("ve-starter",defineCustomElement(Starter)),customElements.define("ve-version",defineCustomElement(_sfc_main$2)),customElements.define("ve-wikidata-search",defineCustomElement(WikidataSearch)),customElements.define("ve-window",defineCustomElement(Window)),document.body.style.transition="opacity 0.3s linear",document.body.style.visibility="visible",document.body.style.opacity="1"}init();export{Color$1 as C,_,getConfig$1 as a,setupGraphViewbox$1 as b,commonjsGlobal$1 as c,db as d,getStylesFromArray as e,evaluate as f,getDefaultExportFromCjs as g,addHtmlLabel$1 as h,insertMarkers$3 as i,common$1 as j,insertNode as k,log$1 as l,interpolateToCurve as m,curveLinear as n,insertEdgeLabel as o,parser$8 as p,line$1 as q,commonDb$1 as r,select as s,parseDirective$c as t,clear$g as u,lighten$1 as v,darken$1 as w,arc as x,sanitizeText$5 as y};
